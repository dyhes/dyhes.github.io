---
title: ã€Javaã€‘æ³¨è§£
date: 2025-07-04 00:00:00+0000
categories: 
- temple
tags:
- Java
---

## æ³¨è§£

Java æ³¨è§£ï¼ˆAnnotationï¼‰æ˜¯ Java 5 å¼•å…¥çš„ä¸€ç§**å…ƒæ•°æ®æœºåˆ¶**ï¼Œç”¨äºä¸ºä»£ç æ·»åŠ è¯´æ˜ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯è¢«ç¼–è¯‘å™¨ã€å·¥å…·æˆ–è¿è¡Œæ—¶ç¯å¢ƒè¯»å–å’Œå¤„ç†ï¼Œä»è€Œå¢å¼ºä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¸‹é¢ä»æ ¸å¿ƒæ¦‚å¿µåˆ°é«˜çº§åº”ç”¨è¿›è¡Œç³»ç»Ÿä»‹ç»ï¼š

------

### ä¸€ã€æ³¨è§£åŸºç¡€æ¦‚å¿µ

1. **æœ¬è´¨ä¸ä½œç”¨**

   - **å…ƒæ•°æ®**ï¼šæ³¨è§£æ˜¯é™„åŠ åœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ç¨‹åºå…ƒç´ ä¸Šçš„æ•°æ®ï¼Œæœ¬èº«ä¸å½±å“ç¨‹åºé€»è¾‘ï¼Œä½†æä¾›é¢å¤–ä¿¡æ¯[1,6](@ref)ã€‚
   - æ ¸å¿ƒç”¨é€”ï¼š
     - **ç¼–è¯‘æ£€æŸ¥**ï¼šå¦‚ `@Override` ç¡®ä¿æ–¹æ³•æ­£ç¡®é‡å†™çˆ¶ç±»æ–¹æ³•[3,7](@ref)ã€‚
     - **ä»£ç ç”Ÿæˆ**ï¼šå·¥å…·ï¼ˆå¦‚ Lombokï¼‰æ ¹æ®æ³¨è§£è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼ˆå¦‚ getter/setterï¼‰[7,9](@ref)ã€‚
     - **è¿è¡Œæ—¶å¤„ç†**ï¼šæ¡†æ¶ï¼ˆå¦‚ Springï¼‰é€šè¿‡åå°„è¯»å–æ³¨è§£å®ç°ä¾èµ–æ³¨å…¥ç­‰åŠ¨æ€è¡Œä¸º[2,6](@ref)ã€‚
     - **æ–‡æ¡£ç”Ÿæˆ**ï¼šJavadoc è§£ææ³¨è§£ç”Ÿæˆ API æ–‡æ¡£[1,9](@ref)ã€‚

2. **åŸºæœ¬è¯­æ³•**

   - ä»¥ @ å¼€å¤´ï¼Œåæ¥æ³¨è§£åï¼Œå¯åŒ…å«å‚æ•°ï¼š

     ```
     @Override // æ— å‚æ•°æ³¨è§£
     @Deprecated(since="1.8") // å¸¦å‚æ•°æ³¨è§£
     ```

------

### äºŒã€Java å†…ç½®æ³¨è§£

Java æä¾›ä»¥ä¸‹å¸¸ç”¨å†…ç½®æ³¨è§£ï¼š

| **æ³¨è§£**               | **ä½œç”¨**                                    | **ç¤ºä¾‹**                                                     |
| ---------------------- | ------------------------------------------- | ------------------------------------------------------------ |
| `@Override`            | æ ‡è®°æ–¹æ³•é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œç¼–è¯‘å™¨éªŒè¯ç­¾åæ­£ç¡®æ€§  | `@Override public void run() {...}`[3,7](@ref)               |
| `@Deprecated`          | æ ‡è®°å…ƒç´ ï¼ˆç±»/æ–¹æ³•ï¼‰å·²è¿‡æ—¶ï¼Œç¼–è¯‘å™¨è­¦å‘Šä½¿ç”¨è€… | `@Deprecated public void oldMethod()`[1,9](@ref)             |
| `@SuppressWarnings`    | æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Šï¼ˆå¦‚æœªæ£€æŸ¥è½¬æ¢ï¼‰              | `@SuppressWarnings("unchecked")`[1,4](@ref)                  |
| `@FunctionalInterface` | æ ‡è®°æ¥å£ä¸ºå‡½æ•°å¼æ¥å£ï¼ˆä»…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼‰    | `@FunctionalInterface interface Calc { int compute(); }`[6,9](@ref) |

------

### ä¸‰ã€å…ƒæ³¨è§£ï¼ˆMeta-Annotationsï¼‰

å…ƒæ³¨è§£ç”¨äº**å®šä¹‰æ³¨è§£çš„è¡Œä¸º**ï¼Œéœ€ç»“åˆ `java.lang.annotation` åŒ…ä½¿ç”¨ï¼š

1. **`@Target`**
   æŒ‡å®šæ³¨è§£å¯åº”ç”¨çš„å…ƒç´ ç±»å‹ï¼ˆé€šè¿‡ `ElementType` æšä¸¾ï¼‰ï¼š

   ```
   @Target({ElementType.METHOD, ElementType.TYPE}) // ä½œç”¨äºæ–¹æ³•æˆ–ç±»
   public @interface MyAnnotation {}
   ```

   - å¸¸ç”¨ç±»å‹ï¼š`TYPE`ï¼ˆç±»ï¼‰ã€`METHOD`ï¼ˆæ–¹æ³•ï¼‰ã€`FIELD`ï¼ˆå­—æ®µï¼‰ç­‰[2,6](@ref)ã€‚

2. **`@Retention`**
   æ§åˆ¶æ³¨è§£ç”Ÿå‘½å‘¨æœŸï¼ˆé€šè¿‡ `RetentionPolicy` æšä¸¾ï¼‰ï¼š

   | **ç­–ç•¥**  | **è¯´æ˜**                                |
   | --------- | --------------------------------------- |
   | `SOURCE`  | ä»…å­˜æºç ï¼ˆç¼–è¯‘åä¸¢å¼ƒï¼Œå¦‚ `@Override`ï¼‰  |
   | `CLASS`   | å­˜äºå­—èŠ‚ç ï¼ˆé»˜è®¤ï¼Œè¿è¡Œæ—¶ä¸å¯è®¿é—®ï¼‰      |
   | `RUNTIME` | è¿è¡Œæ—¶ä¿ç•™ï¼ˆå¯é€šè¿‡åå°„è¯»å–ï¼‰[6,9](@ref) |

3. **`@Documented`**
   æ³¨è§£ä¿¡æ¯åŒ…å«åœ¨ Javadoc ä¸­[1,6](@ref)ã€‚

4. **`@Inherited`**
   å­ç±»è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£ï¼ˆä»…ä½œç”¨äºç±»ï¼‰[6,9](@ref)ã€‚

------

### å››ã€è‡ªå®šä¹‰æ³¨è§£

é€šè¿‡ `@interface` å®šä¹‰è‡ªå®šä¹‰æ³¨è§£ï¼Œæ”¯æŒæ·»åŠ å…ƒç´ å’Œé»˜è®¤å€¼ï¼š

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Timer {
    String name() default "defaultTimer"; // å…ƒç´ å¯è®¾é»˜è®¤å€¼
    int timeout() default 30;
}
```

- **å…ƒç´ é™åˆ¶**ï¼šä»…æ”¯æŒåŸºæœ¬ç±»å‹ã€`String`ã€æšä¸¾ã€æ³¨è§£åŠæ•°ç»„[4,5](@ref)ã€‚

- ä½¿ç”¨ç¤ºä¾‹ï¼š

  ```
  public class Task {
      @Timer(name = "taskTimer", timeout = 60)
      public void execute() {...}
  }
  ```

------

### äº”ã€æ³¨è§£å¤„ç†æœºåˆ¶

1. **ç¼–è¯‘æ—¶å¤„ç†**

   æ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processorï¼‰ï¼šç»§æ‰¿ AbstractProcessorï¼Œåœ¨ç¼–è¯‘æ—¶æ‰«ææ³¨è§£å¹¶ç”Ÿæˆä»£ç æˆ–é…ç½®æ–‡ä»¶

   ```
   @SupportedAnnotationTypes("com.example.Timer")
   public class TimerProcessor extends AbstractProcessor {
       @Override
       public boolean process(...) {
           // å¤„ç†æ³¨è§£é€»è¾‘
       }
   }
   ```

2. **è¿è¡Œæ—¶å¤„ç†**
   é€šè¿‡**åå°„**è¯»å– `RUNTIME` ä¿ç•™çš„æ³¨è§£ï¼š

   ```
   Method method = Task.class.getMethod("execute");
   if (method.isAnnotationPresent(Timer.class)) {
       Timer timer = method.getAnnotation(Timer.class);
       System.out.println("Timeout: " + timer.timeout());
   }
   ```

------

### å…­ã€åº”ç”¨åœºæ™¯

| **åœºæ™¯**     | **æ¡ˆä¾‹**                                                     |
| ------------ | ------------------------------------------------------------ |
| **æ¡†æ¶é…ç½®** | Spring çš„ `@Autowired`ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€`@Service`ï¼ˆå£°æ˜ Beanï¼‰[8,9](@ref) |
| **æ•°æ®æ ¡éªŒ** | Hibernate çš„ `@NotNull`ï¼ˆå­—æ®µéç©ºæ ¡éªŒï¼‰[8](@ref)             |
| **AOP ç¼–ç¨‹** | ç»“åˆ Spring AOP å®ç°æ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§ï¼ˆå¦‚ `@Log`ï¼‰[2,8](@ref) |
| **æµ‹è¯•æ¡†æ¶** | JUnit çš„ `@Test`ï¼ˆæ ‡è®°æµ‹è¯•æ–¹æ³•ï¼‰[8](@ref)                    |

------

### ä¸ƒã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹

1. **é¿å…è¿‡åº¦ä½¿ç”¨**ï¼šå¤§é‡æ³¨è§£é™ä½ä»£ç å¯è¯»æ€§[6](@ref)ã€‚
2. **æ€§èƒ½è€ƒé‡**ï¼šåå°„è¯»å–è¿è¡Œæ—¶æ³¨è§£å¯èƒ½å¼•å…¥å¼€é”€[6](@ref)ã€‚
3. **æ˜ç¡®ç”Ÿå‘½å‘¨æœŸ**ï¼šæ ¹æ®åœºæ™¯é€‰æ‹© `SOURCE`/`CLASS`/`RUNTIME`ï¼Œé¿å…ä¸å¿…è¦çš„è¿è¡Œæ—¶ä¿ç•™[2,9](@ref)ã€‚

é€šè¿‡æŒæ¡æ³¨è§£çš„æ ¸å¿ƒæœºåˆ¶å’Œçµæ´»åº”ç”¨ï¼Œå¼€å‘è€…èƒ½æ˜¾è‘—æå‡ä»£ç çš„ç®€æ´æ€§å’Œæ¡†æ¶é›†æˆæ•ˆç‡ã€‚å®é™…å¼€å‘ä¸­å¯ç»“åˆ Springã€Lombok ç­‰æ¡†æ¶æ·±å…¥å®è·µæ³¨è§£çš„é«˜çº§åŠŸèƒ½ã€‚

## å…ƒæ³¨è§£

ä»¥ä¸‹æ˜¯ Java ä¸­æ‰€æœ‰å…ƒæ³¨è§£çš„è¯¦ç»†ä»‹ç»ï¼Œç»“åˆå…¶æ ¸å¿ƒåŠŸèƒ½ã€å‚æ•°é€‰é¡¹ã€ä½¿ç”¨åœºæ™¯åŠä»£ç ç¤ºä¾‹è¿›è¡Œç³»ç»Ÿè¯´æ˜ã€‚å…ƒæ³¨è§£ï¼ˆMeta-Annotationï¼‰æ˜¯ç”¨äºä¿®é¥°å…¶ä»–æ³¨è§£çš„æ³¨è§£ï¼Œæ§åˆ¶æ³¨è§£çš„è¡Œä¸ºå’Œç‰¹æ€§ã€‚Java æä¾› 5 ç§æ ¸å¿ƒå…ƒæ³¨è§£ï¼ˆJava 5 å®šä¹‰ 4 ç§ï¼ŒJava 8 æ–°å¢ 1 ç§ï¼‰ï¼Œå¦æœ‰ä¸€ä¸ªè¾…åŠ©æ€§å…ƒæ³¨è§£ `@Native`ã€‚

------

### ğŸ“Œ **ä¸€ã€æ ¸å¿ƒå…ƒæ³¨è§£**

#### 1. **`@Target`**

- **åŠŸèƒ½**ï¼šå®šä¹‰æ³¨è§£å¯åº”ç”¨çš„ç¨‹åºå…ƒç´ èŒƒå›´[1,3,6,7](@ref)ã€‚

- **å‚æ•°**ï¼š`ElementType` æšä¸¾æ•°ç»„ï¼Œå¸¸ç”¨å€¼åŒ…æ‹¬ï¼š

  | **å–å€¼**          | **é€‚ç”¨ç›®æ ‡**                              |
  | ----------------- | ----------------------------------------- |
  | `TYPE`            | ç±»ã€æ¥å£ã€æšä¸¾ã€æ³¨è§£ç±»å‹                  |
  | `FIELD`           | å­—æ®µï¼ˆå«æšä¸¾å¸¸é‡ï¼‰                        |
  | `METHOD`          | æ–¹æ³•                                      |
  | `PARAMETER`       | æ–¹æ³•å‚æ•°                                  |
  | `CONSTRUCTOR`     | æ„é€ å™¨                                    |
  | `LOCAL_VARIABLE`  | å±€éƒ¨å˜é‡                                  |
  | `ANNOTATION_TYPE` | å…¶ä»–æ³¨è§£ï¼ˆå…ƒæ³¨è§£è‡ªèº«ï¼‰                    |
  | `PACKAGE`         | åŒ…å£°æ˜                                    |
  | `TYPE_PARAMETER`  | æ³›å‹ç±»å‹å‚æ•°ï¼ˆJava 8+ï¼‰                   |
  | `TYPE_USE`        | ç±»å‹ä½¿ç”¨è¯­å¥ï¼ˆå¦‚æ³›å‹ã€ç±»å‹è½¬æ¢ï¼ŒJava 8+ï¼‰ |

- **ç¤ºä¾‹**ï¼š

  ```
  @Target({ElementType.METHOD, ElementType.TYPE})
  public @interface Loggable { // ä»…ç”¨äºç±»å’Œæ–¹æ³•
      String category() default "INFO";
  } [6,7](@ref)
  ```

------

#### 2. **`@Retention`**

- **åŠŸèƒ½**ï¼šæŒ‡å®šæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä¿ç•™ç­–ç•¥ï¼‰[1,4,12](@ref)ã€‚

- **å‚æ•°**ï¼š`RetentionPolicy` æšä¸¾ï¼Œå¯é€‰å€¼ï¼š

  | **ç­–ç•¥**        | **è¯´æ˜**                                                     |
  | --------------- | ------------------------------------------------------------ |
  | `SOURCE`        | ä»…å­˜äºæºç ï¼ˆç¼–è¯‘æ—¶ä¸¢å¼ƒï¼‰ï¼Œå¦‚ `@Override`ã€`@SuppressWarnings` |
  | `CLASS`ï¼ˆé»˜è®¤ï¼‰ | ä¿ç•™è‡³å­—èŠ‚ç ï¼ˆè¿è¡Œæ—¶ä¸å¯è®¿é—®ï¼‰ï¼Œé€‚ç”¨äºç¼–è¯‘æ—¶å¤„ç†ï¼ˆå¦‚ Lombokï¼‰ |
  | `RUNTIME`       | è¿è¡Œæ—¶ä¿ç•™ï¼ˆå¯é€šè¿‡åå°„è¯»å–ï¼‰ï¼Œå¦‚ Spring çš„ `@Autowired`      |

- **ç¤ºä¾‹**ï¼š

  ```
  @Retention(RetentionPolicy.RUNTIME)
  public @interface RuntimeConfig { // è¿è¡Œæ—¶å¯é€šè¿‡åå°„è·å–
      String value();
  } [4,12](@ref)
  ```

------

#### 3. **`@Documented`**

- **åŠŸèƒ½**ï¼šæ ‡è®°æ³¨è§£æ˜¯å¦åŒ…å«åœ¨ Javadoc ç”Ÿæˆçš„ API æ–‡æ¡£ä¸­[1,3,8](@ref)ã€‚

- **ç‰¹æ€§**ï¼šæ— å‚æ•°ï¼Œä»…ä½œä¸ºæ ‡è®°ã€‚

- ç¤ºä¾‹ï¼š

  ```
  @Documented
  @Retention(RetentionPolicy.RUNTIME)
  public @interface ApiNote { // ç”Ÿæˆ Javadoc æ—¶ä¼šæ˜¾ç¤ºæ­¤æ³¨è§£
      String description();
  } [3,8](@ref)
  ```

------

#### 4. **`@Inherited`**

- **åŠŸèƒ½**ï¼šå­ç±»è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„æ³¨è§£ï¼ˆä»…å¯¹ç±»æ³¨è§£ç”Ÿæ•ˆï¼‰[1,2,8](@ref)ã€‚

- **é™åˆ¶**ï¼šä¸é€‚ç”¨äºæ–¹æ³•ã€å­—æ®µç­‰å…¶ä»–å…ƒç´ ã€‚

- ç¤ºä¾‹ï¼š

  ```
  @Inherited
  @Retention(RetentionPolicy.RUNTIME)
  public @interface InheritedConfig {} 
  
  @InheritedConfig
  class Parent {}
  class Child extends Parent {} // Child è‡ªåŠ¨ç»§æ‰¿ @InheritedConfig[1,8](@ref)
  ```

------

#### 5. **`@Repeatable`ï¼ˆJava 8+ï¼‰**

- **åŠŸèƒ½**ï¼šå…è®¸åŒä¸€æ³¨è§£åœ¨å•ä¸ªå…ƒç´ ä¸Šé‡å¤ä½¿ç”¨[1,2,4](@ref)ã€‚

- **è¦æ±‚**ï¼šéœ€å®šä¹‰å®¹å™¨æ³¨è§£å­˜å‚¨é‡å¤æ³¨è§£ã€‚

- ç¤ºä¾‹ï¼š

  ```
  @Repeatable(Roles.class)
  public @interface Role {
      String value();
  }
  public @interface Roles {
      Role[] value(); // å®¹å™¨æ³¨è§£
  }
  
  @Role("admin")
  @Role("user")
  public class User {} // æ— éœ€æ˜¾å¼ä½¿ç”¨å®¹å™¨[1,4](@ref)
  ```

------

### âš™ï¸ **äºŒã€è¾…åŠ©å…ƒæ³¨è§£**

#### **`@Native`**

- **åŠŸèƒ½**ï¼šæ ‡è®°å­—æ®µå¯èƒ½è¢«æœ¬åœ°ä»£ç ï¼ˆå¦‚ JNIï¼‰å¼•ç”¨ï¼Œé€šå¸¸ç”±ä»£ç ç”Ÿæˆå·¥å…·ä½¿ç”¨[2,3](@ref)ã€‚

- ç¤ºä¾‹ï¼š

  ```
  public class NativeExample {
      @Native public static final int MAX_SIZE = 1024;
  } [2](@ref)
  ```

------

### ğŸ§© **ä¸‰ã€å…ƒæ³¨è§£åŠŸèƒ½å¯¹æ¯”æ€»ç»“**

| **å…ƒæ³¨è§£**    | **æ ¸å¿ƒä½œç”¨**             | **å…³é”®å‚æ•°/ç‰¹æ€§**          | **å…¸å‹åº”ç”¨åœºæ™¯**                          |
| ------------- | ------------------------ | -------------------------- | ----------------------------------------- |
| `@Target`     | é™å®šæ³¨è§£ä½œç”¨èŒƒå›´         | `ElementType` æšä¸¾æ•°ç»„     | é˜²æ­¢æ³¨è§£è¯¯ç”¨ï¼ˆå¦‚ä»…é™æ–¹æ³•ä½¿ç”¨ï¼‰            |
| `@Retention`  | æ§åˆ¶æ³¨è§£ç”Ÿå‘½å‘¨æœŸ         | `SOURCE`/`CLASS`/`RUNTIME` | ç¼–è¯‘æ£€æŸ¥ï¼ˆSOURCEï¼‰ã€æ¡†æ¶é…ç½®ï¼ˆRUNTIMEï¼‰   |
| `@Documented` | åŒ…å«æ³¨è§£è‡³ Javadoc       | æ— å‚æ•°ï¼ˆæ ‡è®°å‹ï¼‰           | API æ–‡æ¡£å¢å¼º                              |
| `@Inherited`  | å­ç±»ç»§æ‰¿çˆ¶ç±»æ³¨è§£         | ä»…å¯¹ç±»ç”Ÿæ•ˆ                 | æ¡†æ¶åŸºç±»é…ç½®ï¼ˆå¦‚ Spring çš„ `@Component`ï¼‰ |
| `@Repeatable` | æ”¯æŒåŒä¸€æ³¨è§£é‡å¤ä½¿ç”¨     | éœ€å®šä¹‰å®¹å™¨æ³¨è§£             | å¤šè§’è‰²æƒé™å£°æ˜                            |
| `@Native`     | æ ‡è®°å­—æ®µå¯è¢«æœ¬åœ°ä»£ç å¼•ç”¨ | æ— å‚æ•°ï¼ˆæ ‡è®°å‹ï¼‰           | JNI å¼€å‘æˆ–ä»£ç ç”Ÿæˆå·¥å…·                    |

------

### ğŸ’¡ **å››ã€æœ€ä½³å®è·µå»ºè®®**

1. ç²¾å‡†é™å®šä½œç”¨åŸŸï¼š
   - ä½¿ç”¨ `@Target` æ˜ç¡®æ³¨è§£é€‚ç”¨èŒƒå›´ï¼Œé¿å…æ»¥ç”¨ï¼ˆå¦‚ä»…é™æ–¹æ³•ä½¿ç”¨çš„æ³¨è§£ä¸åº”æ”¯æŒç±»ï¼‰[6,7](@ref)ã€‚
2. æŒ‰éœ€é€‰æ‹©ç”Ÿå‘½å‘¨æœŸï¼š
   - ä¼˜å…ˆç”¨ `SOURCE` æˆ– `CLASS` å‡å°‘è¿è¡Œæ—¶å¼€é”€ï¼›ä»…éœ€åå°„æ—¶é€‰ `RUNTIME`[4,12](@ref)ã€‚
3. è°¨æ…ä½¿ç”¨ `@Inherited`ï¼š
   - ä»…å½“éœ€è¦å­ç±»è‡ªåŠ¨ç»§æ‰¿æ³¨è§£æ—¶ä½¿ç”¨ï¼ˆå¦‚æ¡†æ¶åŸºç±»æ ‡è¯†ï¼‰[8](@ref)ã€‚
4. æ´»ç”¨ `@Repeatable` ç®€åŒ–ä»£ç ï¼š
   - æ›¿ä»£ä¼ ç»Ÿå®¹å™¨æ³¨è§£æ¨¡å¼ï¼Œæå‡ä»£ç å¯è¯»æ€§ï¼ˆJava 8+ï¼‰[2,4](@ref)ã€‚

------

é€šè¿‡åˆç†ç»„åˆå…ƒæ³¨è§£ï¼Œå¯è®¾è®¡å‡ºçµæ´»ä¸”å¼ºçº¦æŸçš„è‡ªå®šä¹‰æ³¨è§£ï¼Œæ˜¾è‘—æå‡æ¡†æ¶é›†æˆæ•ˆç‡ï¼ˆå¦‚ Spring çš„ `@Bean`ï¼‰æˆ–ä»£ç æ£€æŸ¥èƒ½åŠ›ï¼ˆå¦‚ Lombokï¼‰ã€‚æ›´å¤šå®æˆ˜æ¡ˆä¾‹å¯å‚è€ƒ [Java å…ƒæ³¨è§£åŸç†è¯¦è§£](https://www.jb51.net/article/273029.htm)[2](@ref) æˆ– [@Target ä¼˜åŒ–æŒ‡å—](https://www.oryoy.com/news/java-zhong-ru-he-gao-xiao-li-yong-target-shi-xian-dai-ma-you-hua-yu-zhong-gou-a15046509.html)[6](@ref)ã€‚

## @interface

åœ¨ Java ä¸­ï¼Œ`@interface` **ä¸æ˜¯å…ƒæ³¨è§£**ï¼Œè€Œæ˜¯**ç”¨äºå®šä¹‰è‡ªå®šä¹‰æ³¨è§£çš„å…³é”®å­—**ã€‚å…ƒæ³¨è§£ï¼ˆMeta-Annotationï¼‰æ˜¯æŒ‡ç”¨äº**ä¿®é¥°å…¶ä»–æ³¨è§£çš„æ³¨è§£**ï¼Œè€Œ `@interface` æ˜¯å£°æ˜æ–°æ³¨è§£ç±»å‹çš„è¯­æ³•ç»“æ„ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š

------

### ğŸ“Œ ä¸€ã€`@interface` çš„ä½œç”¨ä¸å®šä½

1. **å®šä¹‰è‡ªå®šä¹‰æ³¨è§£**
   `@interface` ç”¨äºå£°æ˜ä¸€ä¸ªæ–°çš„æ³¨è§£ç±»å‹ï¼ˆå¦‚ `@Override`ã€`@Autowired`ï¼‰ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿ `java.lang.annotation.Annotation` çš„ç‰¹æ®Šæ¥å£[2,5](@ref)ã€‚
   ç¤ºä¾‹ï¼š

   ```
   public @interface MyAnnotation {
       String value() default "default"; // æ³¨è§£å±æ€§
   }
   ```

2. **æ³¨è§£å±æ€§çš„é™åˆ¶**

   - å±æ€§è¿”å›å€¼ç±»å‹åªèƒ½æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€`String`ã€`Class`ã€æšä¸¾ã€æ³¨è§£æˆ–å®ƒä»¬çš„æ•°ç»„[3,6](@ref)ã€‚
   - å¯é€šè¿‡ `default` è®¾ç½®é»˜è®¤å€¼ï¼ˆå¦‚ `int timeout() default 30;`ï¼‰[3](@ref)ã€‚

------

### ğŸ§© äºŒã€å…ƒæ³¨è§£ï¼ˆMeta-Annotationï¼‰çš„æ ¸å¿ƒè§’è‰²

å…ƒæ³¨è§£æ˜¯ä¿®é¥°å…¶ä»–æ³¨è§£çš„æ³¨è§£ï¼Œç”¨äº**æ§åˆ¶æ³¨è§£çš„è¡Œä¸º**ã€‚Java æä¾›ä»¥ä¸‹ 5 ç§å…ƒæ³¨è§£ï¼š

1. **`@Target`**
   æŒ‡å®šæ³¨è§£å¯ä½œç”¨çš„ç¨‹åºå…ƒç´ ï¼ˆå¦‚ç±»ã€æ–¹æ³•ã€å­—æ®µï¼‰ï¼Œé€šè¿‡ `ElementType` æšä¸¾æŒ‡å®šèŒƒå›´[1,7](@ref)ã€‚
   ç¤ºä¾‹ï¼š

   ```
   @Target({ElementType.METHOD, ElementType.TYPE}) // ä»…ä½œç”¨äºæ–¹æ³•æˆ–ç±»
   public @interface Loggable {}
   ```

2. **`@Retention`**
   å®šä¹‰æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡ `RetentionPolicy` æŒ‡å®šï¼š

   - `SOURCE`ï¼šä»…å­˜æºç ï¼ˆç¼–è¯‘åä¸¢å¼ƒï¼Œå¦‚ `@Override`ï¼‰
   - `CLASS`ï¼šä¿ç•™è‡³å­—èŠ‚ç ï¼ˆé»˜è®¤ï¼Œè¿è¡Œæ—¶ä¸å¯è®¿é—®ï¼‰
   - `RUNTIME`ï¼šè¿è¡Œæ—¶ä¿ç•™ï¼ˆå¯é€šè¿‡åå°„è¯»å–ï¼Œå¦‚ Spring çš„ `@Autowired`ï¼‰[1,4,7](@ref)ã€‚

3. **`@Documented`**
   æ ‡è®°æ³¨è§£æ˜¯å¦è¢«åŒ…å«åœ¨ Javadoc ç”Ÿæˆçš„æ–‡æ¡£ä¸­[3,7](@ref)ã€‚

4. **`@Inherited`**
   æ ‡è®°æ³¨è§£æ˜¯å¦å¯è¢«å­ç±»ç»§æ‰¿ï¼ˆä»…å¯¹ç±»æ³¨è§£æœ‰æ•ˆï¼‰[4,7](@ref)ã€‚

5. **`@Repeatable`ï¼ˆJava 8+ï¼‰**
   å…è®¸åŒä¸€æ³¨è§£åœ¨å•ä¸ªå…ƒç´ ä¸Šé‡å¤ä½¿ç”¨ï¼ˆéœ€å®šä¹‰å®¹å™¨æ³¨è§£ï¼‰[7](@ref)ã€‚
   ç¤ºä¾‹ï¼š

   ```
   @Repeatable(Roles.class)
   public @interface Role {
       String value();
   }
   ```

------

### âš–ï¸ ä¸‰ã€`@interface` ä¸å…ƒæ³¨è§£çš„å…³ç³»

- **ä¾èµ–å…³ç³»**ï¼š
  è‡ªå®šä¹‰æ³¨è§£ï¼ˆé€šè¿‡ `@interface` å®šä¹‰ï¼‰éœ€**é€šè¿‡å…ƒæ³¨è§£é…ç½®å…¶è¡Œä¸º**ã€‚ä¾‹å¦‚ï¼š

  ```
  @Target(ElementType.METHOD)
  @Retention(RetentionPolicy.RUNTIME)
  public @interface Timer { // è‡ªå®šä¹‰æ³¨è§£
      int timeout() default 30;
  }
  ```

  æ­¤å¤„ `@Target` å’Œ `@Retention` æ˜¯å…ƒæ³¨è§£ï¼Œç”¨äºä¿®é¥° `@Timer` çš„ä½œç”¨èŒƒå›´å’Œç”Ÿå‘½å‘¨æœŸã€‚

- **æœ¬è´¨å·®å¼‚**ï¼š

  - `@interface` æ˜¯**å®šä¹‰æ³¨è§£çš„è¯­æ³•**ã€‚
  - å…ƒæ³¨è§£æ˜¯**ä¿®é¥°æ³¨è§£çš„å·¥å…·**ï¼ˆå¦‚ `@Retention` æ§åˆ¶æ³¨è§£çš„ä¿ç•™ç­–ç•¥ï¼‰[2,6,7](@ref)ã€‚

------

### ğŸ” å››ã€å¸¸è§æ··æ·†ç‚¹è§£æ

1. **è¯¯è§£æ¥æº**
   éƒ¨åˆ†èµ„æ–™å¯èƒ½å°† `@interface` æè¿°ä¸ºâ€œå…ƒæ³¨è§£â€ï¼Œè¿™æ˜¯ä¸å‡†ç¡®çš„ã€‚æ··æ·†å¯èƒ½æºäºï¼š
   - `@interface` ç”¨äºå®šä¹‰æ³¨è§£ï¼Œè€Œå…ƒæ³¨è§£ç”¨äºä¿®é¥°æ³¨è§£ï¼Œä¸¤è€…åœ¨æ³¨è§£ä½“ç³»ä¸­å±‚çº§ä¸åŒ[1,4](@ref)ã€‚
2. **å®é™…åº”ç”¨ä¸­çš„åŒºåˆ†**
   - **è‡ªå®šä¹‰æ³¨è§£**ï¼šéœ€ç”¨ `@interface` å£°æ˜ + å…ƒæ³¨è§£é…ç½®ã€‚
   - **å…ƒæ³¨è§£**ï¼šJDK å†…ç½®çš„ 5 ç§æ³¨è§£ï¼ˆå¦‚ `@Retention`ï¼‰ï¼Œä¸å¯ç”¨ `@interface` é‡æ–°å®šä¹‰ã€‚

------

### ğŸ’ æ€»ç»“

| **æ¦‚å¿µ**     | **è§’è‰²**               | **ç¤ºä¾‹**                      |
| ------------ | ---------------------- | ----------------------------- |
| `@interface` | å®šä¹‰è‡ªå®šä¹‰æ³¨è§£çš„å…³é”®å­— | `public @interface MyAnno {}` |
| **å…ƒæ³¨è§£**   | ä¿®é¥°è‡ªå®šä¹‰æ³¨è§£çš„æ³¨è§£   | `@Target`, `@Retention`       |

**ç®€å•æ¥è¯´**ï¼š
ğŸ‘‰ ç”¨ `@interface` â€‹**åˆ›å»º**æ³¨è§£ï¼Œç”¨å…ƒæ³¨è§£ï¼ˆå¦‚ `@Retention`ï¼‰â€‹**å®šåˆ¶**æ³¨è§£çš„è¡Œä¸ºã€‚
è‹¥éœ€æ·±å…¥å®è·µï¼Œå¯å‚è€ƒ [Java å…ƒæ³¨è§£è¯¦è§£](https://blog.csdn.net/zqwblog/article/details/6228936) æˆ– [è‡ªå®šä¹‰æ³¨è§£å®æˆ˜æŒ‡å—](https://blog.csdn.net/cheng_14/article/details/106562868)ã€‚

åœ¨ Java ä¸­ï¼Œ`@interface` ç”¨äºå®šä¹‰è‡ªå®šä¹‰æ³¨è§£ï¼Œå…¶å†…éƒ¨å­—æ®µçš„å£°æ˜æ–¹å¼ä¸æ™®é€šç±»æˆ–æ¥å£ä¸åŒï¼Œä¸”**ä¸èƒ½å®šä¹‰æ™®é€šæ–¹æ³•**ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š

------

### âš™ï¸ ä¸€ã€`@interface` å†…éƒ¨å­—æ®µçš„å®šä¹‰è§„åˆ™

1. **å­—æ®µå£°æ˜å½¢å¼**
   åœ¨ `@interface` ä¸­ï¼Œå­—æ®µé€šè¿‡**ç±»ä¼¼æ–¹æ³•å£°æ˜**çš„å½¢å¼å®šä¹‰ï¼Œå®é™…æ˜¯æ³¨è§£çš„å±æ€§ï¼ˆAttributeï¼‰ã€‚è¯­æ³•å¦‚ä¸‹ï¼š

   ```
   public @interface MyAnnotation {
       String name();        // æ— é»˜è®¤å€¼çš„å±æ€§ï¼ˆä½¿ç”¨æ—¶å¿…é¡»èµ‹å€¼ï¼‰
       int age() default 18; // æœ‰é»˜è®¤å€¼çš„å±æ€§ï¼ˆä½¿ç”¨æ—¶å¯é€‰ï¼‰
   }
   ```

   - **å±æ€§ç±»å‹é™åˆ¶**ï¼šä»…æ”¯æŒ `åŸºæœ¬ç±»å‹`ï¼ˆ`int`, `boolean` ç­‰ï¼‰ã€`String`ã€`Class`ã€`æšä¸¾`ã€`æ³¨è§£` æˆ–å®ƒä»¬çš„**æ•°ç»„**ï¼ˆå¦‚ `String[]`ï¼‰[1,5,9](@ref)ã€‚
   - **é»˜è®¤å€¼**ï¼šé€šè¿‡ `default` å…³é”®å­—æŒ‡å®šï¼ˆå¦‚ `default 18`ï¼‰ï¼ŒæœªæŒ‡å®šé»˜è®¤å€¼çš„å±æ€§åœ¨ä½¿ç”¨æ—¶å¿…é¡»æ˜¾å¼èµ‹å€¼[6,9](@ref)ã€‚

2. **ç‰¹æ®Šå±æ€§ `value`**
   è‹¥æ³¨è§£ä»…æœ‰ä¸€ä¸ªå±æ€§ä¸”å‘½åä¸º `value`ï¼Œä½¿ç”¨æ—¶å¯ç›´æ¥èµ‹å€¼è€Œæ— éœ€é”®å€¼å¯¹æ ¼å¼ï¼š

   ```
   public @interface Info {
       String value(); // ç‰¹æ®Šå±æ€§ value
   }
   
   @Info("é»˜è®¤å€¼") // ç­‰ä»·äº @Info(value = "é»˜è®¤å€¼")
   public class MyClass {}
   ```

   [6,9](@ref)

------

### âŒ äºŒã€**èƒ½å¦å®šä¹‰æ™®é€šæ–¹æ³•ï¼Ÿ**

**ä¸å¯ä»¥**ã€‚`@interface` ä¸­åªèƒ½å£°æ˜å±æ€§ï¼ˆå³ä¸Šè¿°â€œç±»ä¼¼æ–¹æ³•â€çš„ç»“æ„ï¼‰ï¼Œ**ä¸èƒ½åŒ…å«æ–¹æ³•ä½“ã€æ„é€ æ–¹æ³•æˆ–æ™®é€šæˆå‘˜æ–¹æ³•**ã€‚ä¾‹å¦‚ä»¥ä¸‹ä»£ç éæ³•ï¼š

```
public @interface InvalidAnnotation {
    void print(); // ç¼–è¯‘é”™è¯¯ï¼šæ³¨è§£å±æ€§ä¸èƒ½æ˜¯ void ç±»å‹
    String format() { return ""; } // ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½æœ‰æ–¹æ³•ä½“
}
```

[5,6,9](@ref)

------

### ğŸ§¬ ä¸‰ã€`@interface` çš„æœ¬è´¨ï¼šç‰¹æ®Šçš„æ¥å£

ä»è®¾è®¡å±‚é¢çœ‹ï¼Œ`@interface` æ˜¯ä¸€ç§**ç»§æ‰¿ `java.lang.annotation.Annotation` çš„ç‰¹æ®Šæ¥å£**ï¼Œä½†æœ‰ä»¥ä¸‹å…³é”®å·®å¼‚ï¼š

1. **è‡ªåŠ¨ç»§æ‰¿æœºåˆ¶**
   æ‰€æœ‰è‡ªå®šä¹‰æ³¨è§£åœ¨ç¼–è¯‘åè‡ªåŠ¨ç»§æ‰¿ `Annotation` æ¥å£ï¼Œå¼€å‘è€…æ— éœ€æ˜¾å¼å£°æ˜[6,7](@ref)ã€‚

2. **ä¸æ™®é€šæ¥å£çš„åŒºåˆ«**

   | **ç‰¹æ€§**       | æ™®é€šæ¥å£ (`interface`)             | æ³¨è§£ (`@interface`)    |
   | -------------- | ---------------------------------- | ---------------------- |
   | **æˆå‘˜ç±»å‹**   | æŠ½è±¡æ–¹æ³•ã€å¸¸é‡                     | å±æ€§ï¼ˆæ— å‚æ•°â€œæ–¹æ³•â€ï¼‰   |
   | **æ–¹æ³•ä½“**     | æ— ï¼ˆJava 8 åæ”¯æŒ `default` æ–¹æ³•ï¼‰ | ç»å¯¹ç¦æ­¢               |
   | **ç»§æ‰¿å…³ç³»**   | å¯å¤šç»§æ‰¿æ¥å£                       | ä¸èƒ½ç»§æ‰¿ç±»æˆ–å…¶ä»–æ³¨è§£   |
   | **å…ƒæ•°æ®åŠŸèƒ½** | æ—                                  | é€šè¿‡åå°„è¯»å–è¿è¡Œæ—¶ä¿¡æ¯ |

3. **ä¸ç±»çš„åŒºåˆ«**

   - **ä¸èƒ½å®ä¾‹åŒ–**ï¼šæ³¨è§£æ— æ³•é€šè¿‡ `new` åˆ›å»ºå¯¹è±¡ã€‚
   - **æ— çŠ¶æ€è¡Œä¸º**ï¼šæ³¨è§£ä»…å­˜å‚¨é™æ€é…ç½®ä¿¡æ¯ï¼Œä¸å«ä¸šåŠ¡é€»è¾‘[6,9](@ref)ã€‚

------

### ğŸ’¡ å››ã€ä½¿ç”¨ç¤ºä¾‹ï¼šå®šä¹‰ä¸å¤„ç†æ³¨è§£

1. **å®šä¹‰æ³¨è§£**

   ```
   @Retention(RetentionPolicy.RUNTIME)
   @Target(ElementType.METHOD)
   public @interface Timer {
       String taskName() default "defaultTask";
       int timeout() default 30; // å•ä½ï¼šç§’
   }
   ```

2. **ä½¿ç”¨æ³¨è§£**

   ```
   public class TaskService {
       @Timer(taskName = "dataProcess", timeout = 60)
       public void processData() { /* ... */ }
   }
   ```

3. **é€šè¿‡åå°„è¯»å–æ³¨è§£**

   ```
   Method method = TaskService.class.getMethod("processData");
   if (method.isAnnotationPresent(Timer.class)) {
       Timer timer = method.getAnnotation(Timer.class);
       System.out.println("Task: " + timer.taskName() + ", Timeout: " + timer.timeout());
   }
   ```

   [1,5,9](@ref)

------

### âœ… æ€»ç»“

- **å­—æ®µå®šä¹‰**ï¼šä»¥â€œæ— å‚æ–¹æ³•â€å½¢å¼å£°æ˜å±æ€§ï¼Œæ”¯æŒé»˜è®¤å€¼ï¼Œç±»å‹å—é™[9,10](@ref)ã€‚
- **æ–¹æ³•ç¦æ­¢**ï¼š**ä¸èƒ½åŒ…å«ä»»ä½•æ™®é€šæ–¹æ³•**æˆ–æ„é€ æ–¹æ³•[5,6](@ref)ã€‚
- **æœ¬è´¨**ï¼šæ˜¯ç‰¹æ®Šçš„æ¥å£ï¼ˆéšå¼ç»§æ‰¿ `Annotation`ï¼‰ï¼Œ**ä¸æ˜¯ç±»**ï¼ŒåŠŸèƒ½èšç„¦äºæä¾›å…ƒæ•°æ®è€Œéè¡Œä¸º[6,7](@ref)ã€‚

é€šè¿‡åˆç†è®¾è®¡æ³¨è§£å±æ€§ï¼Œå¯é«˜æ•ˆå®ç°é…ç½®åŒ–ç¼–ç¨‹ï¼ˆå¦‚ Spring æ¡†æ¶çš„ `@Autowired`ï¼‰ï¼Œä½†éœ€ä¸¥æ ¼éµå¾ªå…¶è¯­æ³•çº¦æŸã€‚

## RetentionPolicy

RetentionPolicy æ˜¯ Java ä¸­ç”¨äºå®šä¹‰æ³¨è§£ï¼ˆAnnotationï¼‰ç”Ÿå‘½å‘¨æœŸçš„å…³é”®æšä¸¾ç±»å‹ï¼Œé€šè¿‡ `@Retention` å…ƒæ³¨è§£æŒ‡å®šã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§ç­–ç•¥çš„è¯¦ç»†å¯¹æ¯”ï¼Œç»“åˆå…¶æ ¸å¿ƒç‰¹æ€§ã€ä½¿ç”¨åœºæ™¯åŠæŠ€æœ¯å®ç°å·®å¼‚ï¼š

------

### ğŸ“Œ **1. `RetentionPolicy.SOURCE`ï¼ˆæºç çº§ä¿ç•™ï¼‰**

- **ç”Ÿå‘½å‘¨æœŸ**ï¼š
  æ³¨è§£ä»…ä¿ç•™åœ¨æºä»£ç ä¸­ï¼Œç¼–è¯‘æ—¶è¢«ç¼–è¯‘å™¨ä¸¢å¼ƒï¼Œâ€‹**ä¸ä¼šå†™å…¥å­—èŠ‚ç æ–‡ä»¶**â€‹[1,6,9](@ref)ã€‚
- ä¸»è¦ç”¨é€”ï¼š
  - **ç¼–è¯‘æœŸæ£€æŸ¥**ï¼šå¦‚ `@Override` éªŒè¯æ–¹æ³•é‡å†™æ­£ç¡®æ€§ï¼Œé”™è¯¯æ—¶è§¦å‘ç¼–è¯‘å¤±è´¥[1,9](@ref)ã€‚
  - **ä»£ç ç”Ÿæˆ**ï¼šåˆ©ç”¨æ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processorï¼‰åœ¨ç¼–è¯‘æ—¶åŠ¨æ€ç”Ÿæˆä»£ç ï¼Œå¦‚ Lombok çš„ `@Data` è‡ªåŠ¨ç”Ÿæˆ getter/setter[1,10](@ref)ã€‚
- **æŠ€æœ¯å®ç°**ï¼š
  é€šè¿‡ `javax.annotation.processing` åŒ…ä¸­çš„å¤„ç†å™¨ï¼ˆå¦‚ `AbstractProcessor`ï¼‰å¤„ç†æ³¨è§£ï¼Œç”Ÿæˆæ–°ä»£ç æˆ–æ—¥å¿—[1,10](@ref)ã€‚
- å…¸å‹åœºæ™¯ï¼š
  - Lombok çš„æ³¨è§£ï¼ˆ`@Getter`, `@Setter`ï¼‰[1](@ref)ã€‚
  - æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Šï¼ˆ`@SuppressWarnings`ï¼‰[6](@ref)ã€‚

------

### ğŸ“¦ **2. `RetentionPolicy.CLASS`ï¼ˆå­—èŠ‚ç çº§ä¿ç•™ï¼‰**

- **ç”Ÿå‘½å‘¨æœŸ**ï¼š
  æ³¨è§£è¢«ç¼–è¯‘åˆ° `.class` æ–‡ä»¶ä¸­ï¼Œä½†**ä¸ä¼šè¢«åŠ è½½åˆ° JVM è¿è¡Œæ—¶**ï¼Œåå°„æ— æ³•è¯»å–[4,9,10](@ref)ã€‚
- ä¸»è¦ç”¨é€”ï¼š
  - **å­—èŠ‚ç å¤„ç†**ï¼šåœ¨ç±»åŠ è½½é˜¶æ®µï¼ˆåŠ è½½ã€é“¾æ¥ï¼‰ç”±å­—èŠ‚ç å·¥å…·ï¼ˆå¦‚ ASMï¼‰è¯»å–å¹¶å¤„ç†ï¼Œç”¨äºä»£ç ä¼˜åŒ–æˆ–å¢å¼º[4,9](@ref)ã€‚
  - **é¿å…è¿è¡Œæ—¶å¼€é”€**ï¼šé€‚åˆæ— éœ€è¿è¡Œæ—¶è®¿é—®ä½†éœ€ä¿ç•™ä¸­é—´ä¿¡æ¯çš„åœºæ™¯ã€‚
- **æŠ€æœ¯å®ç°**ï¼š
  é€šè¿‡å­—èŠ‚ç åˆ†æå·¥å…·ï¼ˆå¦‚ ASMï¼‰è§£æ `.class` æ–‡ä»¶ä¸­çš„æ³¨è§£å±æ€§è¡¨ï¼ˆå¦‚ `RuntimeInvisibleAnnotations`ï¼‰[9](@ref)ã€‚
  ç¤ºä¾‹ï¼šä½¿ç”¨ ASM è¯»å– `@Meta(name="obj")`ï¼ˆ`CLASS` ç­–ç•¥ï¼‰æ—¶ï¼Œæ³¨è§£ä¿¡æ¯åœ¨å­—èŠ‚ç ä¸­å¯è§ä½†è¿è¡Œæ—¶ä¸å¯è®¿é—®[9](@ref)ã€‚
- å…¸å‹åœºæ™¯ï¼š
  - AOP æ¡†æ¶çš„ç¼–è¯‘æ—¶ä»£ç†ç”Ÿæˆ[10](@ref)ã€‚
  - éƒ¨åˆ†ä»£ç åˆ†æå·¥å…·çš„ç¦»çº¿å¤„ç†[4](@ref)ã€‚

------

### âš¡ **3. `RetentionPolicy.RUNTIME`ï¼ˆè¿è¡Œæ—¶ä¿ç•™ï¼‰**

- **ç”Ÿå‘½å‘¨æœŸ**ï¼š
  æ³¨è§£ä¿ç•™åœ¨æºç ã€å­—èŠ‚ç åŠè¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œâ€‹**å¯é€šè¿‡åå°„åŠ¨æ€è¯»å–**â€‹[2,5,8](@ref)ã€‚
- **ä¸»è¦ç”¨é€”**ï¼š
  - **è¿è¡Œæ—¶åŠ¨æ€å¤„ç†**ï¼šæ¡†æ¶é€šè¿‡åå°„è·å–æ³¨è§£é…ç½®ï¼Œå®ç°ä¾èµ–æ³¨å…¥ã€è·¯ç”±æ˜ å°„ç­‰åŠŸèƒ½[2,8](@ref)ã€‚
  - **æ•°æ®æ ¡éªŒä¸AOP**ï¼šå¦‚ Spring çš„ `@Autowired`ã€JPA çš„ `@Entity`[2,5](@ref)ã€‚
- **æŠ€æœ¯å®ç°**ï¼š
  - åå°„ APIï¼š`AnnotatedElement` æ¥å£çš„ `getAnnotation()` ç­‰æ–¹æ³•[3,8](@ref)ã€‚
  - åŠ¨æ€ä»£ç†ï¼šJDK åœ¨åå°„æ—¶ç”Ÿæˆä»£ç†ç±»ï¼ˆå¦‚ `AnnotationInvocationHandler`ï¼‰ï¼Œå°†æ³¨è§£å±æ€§æ˜ å°„ä¸ºé”®å€¼å¯¹[5](@ref)ã€‚
- **å…¸å‹åœºæ™¯**ï¼š
  - Spring çš„ç»„ä»¶æ‰«æï¼ˆ`@Component`ï¼‰[2](@ref)ã€‚
  - JUnit æµ‹è¯•æ–¹æ³•æ ‡è®°ï¼ˆ`@Test`ï¼‰[3](@ref)ã€‚

------

### ğŸ’ **ä¸‰ç­–ç•¥æ ¸å¿ƒå¯¹æ¯”æ€»ç»“**

| **ç»´åº¦**     | `SOURCE`            | `CLASS`              | `RUNTIME`                     |
| ------------ | ------------------- | -------------------- | ----------------------------- |
| **ç”Ÿå‘½å‘¨æœŸ** | æºç é˜¶æ®µ            | å­—èŠ‚ç é˜¶æ®µ           | æºç  + å­—èŠ‚ç  + è¿è¡Œæ—¶        |
| **å¯è®¿é—®æ€§** | ä»…ç¼–è¯‘å™¨            | å­—èŠ‚ç å·¥å…·           | åå°„æœºåˆ¶                      |
| **ä¸»è¦ç”¨é€”** | ç¼–è¯‘æ£€æŸ¥ã€ä»£ç ç”Ÿæˆ  | å­—èŠ‚ç å¢å¼ºã€ç¦»çº¿åˆ†æ | è¿è¡Œæ—¶åŠ¨æ€é…ç½®                |
| **æ€§èƒ½å½±å“** | æ— è¿è¡Œæ—¶å¼€é”€        | æ— è¿è¡Œæ—¶å¼€é”€         | åå°„å¯èƒ½å¼•å…¥æ€§èƒ½æŸè€—[5](@ref) |
| **å…¸å‹åº”ç”¨** | Lombokã€`@Override` | ASM å­—èŠ‚ç æ“ä½œ       | Springã€JUnit                 |

------

### âš–ï¸ **å®è·µé€‰æ‹©å»ºè®®**

1. **ä¼˜å…ˆ `RUNTIME`**ï¼š
   éœ€è¦è¿è¡Œæ—¶åŠ¨æ€è¯»å–æ³¨è§£æ—¶å¿…é€‰ï¼ˆå¦‚æ¡†æ¶å¼€å‘ï¼‰[2,8](@ref)ã€‚
2. **ç¼–è¯‘æœŸéœ€æ±‚é€‰ `SOURCE`**ï¼š
   ä»…éœ€ç”Ÿæˆä»£ç æˆ–é™æ€æ£€æŸ¥æ—¶ä½¿ç”¨ï¼ˆå¦‚ Lombokï¼‰[1,10](@ref)ã€‚
3. **`CLASS` çš„ç‰¹å®šåœºæ™¯**ï¼š
   éœ€ä¿ç•™å­—èŠ‚ç ä¿¡æ¯ä½†æ— éœ€è¿è¡Œæ—¶åå°„æ—¶é€‰ç”¨ï¼ˆå¦‚ç¼–è¯‘æ—¶ AOP ç»‡å…¥ï¼‰[4,10](@ref)ã€‚
4. **æ€§èƒ½è€ƒé‡**ï¼š
   é«˜é¢‘è°ƒç”¨çš„æ³¨è§£é¿å… `RUNTIME`ï¼Œå‡å°‘åå°„å¼€é”€[5](@ref)ã€‚

> ğŸ’¡ **æ¡ˆä¾‹è¯´æ˜**ï¼š
>
> - Lombok çš„ `@Data` ä½¿ç”¨ `SOURCE`ï¼Œç¼–è¯‘åç”Ÿæˆä»£ç å¹¶ä¸¢å¼ƒæ³¨è§£[1](@ref)ã€‚
> - Spring çš„ `@Service` ä½¿ç”¨ `RUNTIME`ï¼Œè¿è¡Œæ—¶æ‰«æ Bean å¹¶æ³¨å…¥å®¹å™¨[2,8](@ref)ã€‚
> - å­—èŠ‚ç åŠ å¯†å·¥å…·å¯èƒ½ç”¨ `CLASS` ä¿ç•™æ³¨è§£ä¾›ç±»åŠ è½½é˜¶æ®µè§£å¯†[4](@ref)ã€‚

é€šè¿‡ç²¾å‡†åŒ¹é…éœ€æ±‚ä¸ç”Ÿå‘½å‘¨æœŸç­–ç•¥ï¼Œå¯æ˜¾è‘—æå‡ä»£ç æ•ˆç‡ä¸å¯ç»´æŠ¤æ€§ã€‚æ›´å¤šæŠ€æœ¯ç»†èŠ‚å¯å‚è€ƒï¼š[Java RetentionPolicy å®˜æ–¹æ–‡æ¡£](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html)ã€‚

## æ³¨è§£å¤„ç†å™¨

æ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processorï¼‰æ˜¯ Java ç¼–è¯‘æœŸçš„æ ¸å¿ƒå·¥å…·ï¼Œç”¨äºåœ¨ç¼–è¯‘é˜¶æ®µæ‰«æå’Œå¤„ç†æºç ä¸­çš„æ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç ã€èµ„æºæ–‡ä»¶æˆ–æ‰§è¡Œç¼–è¯‘æ—¶æ ¡éªŒã€‚ä»¥ä¸‹æ˜¯å…¶è¯¦ç»†è§£æï¼š

------

### ğŸ” ä¸€ã€æ³¨è§£å¤„ç†å™¨çš„æ ¸å¿ƒåŸç†

1. **å¤„ç†æ—¶æœºä¸éš”ç¦»æ€§**
   - **ç¼–è¯‘æœŸè¿è¡Œ**ï¼šæ³¨è§£å¤„ç†å™¨åœ¨ `javac` ç¼–è¯‘æ—¶è§¦å‘ï¼Œæ—©äºç±»åŠ è½½å’Œè¿è¡Œæ—¶ï¼Œ**æ— è¿è¡Œæ—¶æ€§èƒ½å¼€é”€**[1,3,6](@ref)ã€‚
   - **ç‹¬ç«‹è¿›ç¨‹**ï¼šè¿è¡Œåœ¨ç‹¬ç«‹çš„ JVM è¿›ç¨‹ä¸­ï¼Œä¸å¹²æ‰°ç›®æ ‡ç¨‹åºé€»è¾‘[1](@ref)ã€‚
2. **è½®æ¬¡å¤„ç†æœºåˆ¶**
   - **å¤šè½®å¤„ç†**ï¼šç¼–è¯‘å™¨æŒ‰è½®æ¬¡è°ƒç”¨å¤„ç†å™¨ï¼Œè‹¥æŸè½®ç”Ÿæˆæ–°æºç ï¼ˆå¦‚ `.java` æ–‡ä»¶ï¼‰ï¼Œä¼šè§¦å‘æ–°ä¸€è½®å¤„ç†ï¼Œç›´è‡³æ— æ–°æ–‡ä»¶ç”Ÿæˆ[3,5](@ref)ã€‚
   - **ç¯å¢ƒå¯¹è±¡**ï¼šé€šè¿‡ `RoundEnvironment` è·å–å½“å‰è½®æ¬¡è¢«æ³¨è§£çš„å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ç­‰ï¼‰[1,3](@ref)ã€‚
3. **æ ¸å¿ƒç»„ä»¶**
   - **`Processor` æ¥å£**ï¼šå®šä¹‰å¤„ç†å™¨çš„åŸºæœ¬è¡Œä¸ºã€‚
   - **`AbstractProcessor`**ï¼šå¸¸ç”¨åŸºç±»ï¼Œç®€åŒ–å¼€å‘[1,5](@ref)ã€‚
   - **å·¥å…·ç±»**ï¼š
     - `Filer`ï¼šç”Ÿæˆæ–°æ–‡ä»¶ï¼ˆæºç /èµ„æºï¼‰ã€‚
     - `Messager`ï¼šæŠ¥å‘Šç¼–è¯‘é”™è¯¯æˆ–è­¦å‘Šã€‚
     - `Elements` & `Types`ï¼šæ“ä½œç¨‹åºå…ƒç´ å’Œç±»å‹ç³»ç»Ÿ[1,5](@ref)ã€‚

------

### âš™ï¸ äºŒã€å¼€å‘è‡ªå®šä¹‰æ³¨è§£å¤„ç†å™¨

#### æ­¥éª¤ 1ï¼šå®šä¹‰æ³¨è§£

æ³¨è§£éœ€è®¾ç½®ä¸º `SOURCE` æˆ– `CLASS` çº§åˆ«ï¼Œç¡®ä¿ç¼–è¯‘æœŸå¯è§ï¼š

```
@Retention(RetentionPolicy.SOURCE)
@Target(ElementType.METHOD)
public @interface LogExecutionTime { 
    String value() default "";
}
```

**å…³é”®ç‚¹**ï¼š`@Target` æŒ‡å®šæ³¨è§£ä½œç”¨ç›®æ ‡ï¼ˆå¦‚æ–¹æ³•ã€ç±»ï¼‰[4,6](@ref)ã€‚

#### æ­¥éª¤ 2ï¼šå®ç°å¤„ç†å™¨é€»è¾‘

ç»§æ‰¿ `AbstractProcessor`ï¼Œé‡å†™ `process()` æ–¹æ³•ï¼š

```
@SupportedAnnotationTypes("com.example.LogExecutionTime")
@SupportedSourceVersion(SourceVersion.RELEASE_11)
public class LogProcessor extends AbstractProcessor {
    private Filer filer;
    private Messager messager;

    @Override
    public void init(ProcessingEnvironment env) {
        filer = env.getFiler();   // åˆå§‹åŒ–æ–‡ä»¶ç”Ÿæˆå·¥å…·
        messager = env.getMessager(); // æ—¥å¿—æŠ¥å‘Šå·¥å…·
    }

    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment env) {
        for (Element elem : env.getElementsAnnotatedWith(LogExecutionTime.class)) {
            if (elem.getKind() == ElementKind.METHOD) {
                generateWrapperClass((ExecutableElement) elem); // ç”Ÿæˆä»£ç 
            }
        }
        return true; // æ ‡è®°æ³¨è§£å·²å¤„ç†
    }
    
    private void generateWrapperClass(ExecutableElement method) throws IOException {
        // ä½¿ç”¨ Filer åˆ›å»ºæ–°æºæ–‡ä»¶[1,4](@ref)
        JavaFileObject file = filer.createSourceFile(method.getEnclosingElement() + "_Log");
        try (Writer writer = file.openWriter()) {
            writer.write("// è‡ªåŠ¨ç”Ÿæˆçš„æ—¥å¿—ä»£ç ...");
        }
    }
}
```

#### æ­¥éª¤ 3ï¼šæ³¨å†Œå¤„ç†å™¨

- **æ‰‹åŠ¨æ³¨å†Œ**ï¼šåˆ›å»º `META-INF/services/javax.annotation.processing.Processor` æ–‡ä»¶ï¼Œå†™å…¥å¤„ç†å™¨å…¨é™å®šå[5](@ref)ã€‚

- AutoService ç®€åŒ–ï¼šç”¨ Google AutoService è‡ªåŠ¨ç”Ÿæˆæ³¨å†Œæ–‡ä»¶ï¼š

  ```
  @AutoService(Processor.class)
  public class LogProcessor extends AbstractProcessor { ... }
  ```

  Maven ä¾èµ–ï¼š

  ```
  <dependency>
      <groupId>com.google.auto.service</groupId>
      <artifactId>auto-service</artifactId>
      <version>1.0.1</version>
  </dependency>
  ```

------

### ğŸ’¡ ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯

| **åœºæ™¯**       | **æ¡ˆä¾‹**                                   | **ä»£è¡¨å·¥å…·**                  |
| -------------- | ------------------------------------------ | ----------------------------- |
| **ä»£ç ç”Ÿæˆ**   | è‡ªåŠ¨ç”Ÿæˆ Getter/Setterã€Builder æ¨¡å¼       | Lombok[2,6](@ref)             |
| **ç¼–è¯‘æ—¶æ ¡éªŒ** | æ£€æŸ¥æ³¨è§£ä½¿ç”¨åˆæ³•æ€§ï¼ˆå¦‚éç©ºå­—æ®µï¼‰           | Hibernate Validator[2](@ref)  |
| **è‡ªåŠ¨åŒ–é…ç½®** | ç”Ÿæˆ SPIï¼ˆService Provider Interfaceï¼‰æ–‡ä»¶ | Google AutoService[2,5](@ref) |
| **æ€§èƒ½ä¼˜åŒ–**   | ç”Ÿæˆé«˜æ•ˆæ˜ å°„ä»£ç æ›¿ä»£åå°„                   | MapStruct[2](@ref)            |

#### ç¤ºä¾‹ï¼šLombok çš„å®ç°åŸç†

- ç”¨æˆ·æ³¨è§£ï¼š`@Data` æ ‡è®°ç±»ã€‚
- å¤„ç†å™¨é€»è¾‘ï¼šæ‰«æè¢«æ³¨è§£çš„ç±»ï¼Œç”Ÿæˆ `getXxx()`/`setXxx()` ç­‰æ–¹æ³•çš„å­—èŠ‚ç ï¼Œ**ç›´æ¥ä¿®æ”¹ .class æ–‡ä»¶**ï¼Œé¿å…æºç è†¨èƒ€[2,6](@ref)ã€‚

------

### ğŸš€ å››ã€æ³¨è§£å¤„ç†å™¨ vs. è¿è¡Œæ—¶åå°„

| **ç‰¹æ€§**         | **æ³¨è§£å¤„ç†å™¨**            | **è¿è¡Œæ—¶åå°„**          |
| ---------------- | ------------------------- | ----------------------- |
| **å¤„ç†æ—¶æœº**     | ç¼–è¯‘æœŸ                    | è¿è¡ŒæœŸ                  |
| **æ€§èƒ½å½±å“**     | â­ï¸ æ— è¿è¡Œæ—¶æŸè€—            | âš ï¸ åå°„è°ƒç”¨æ…¢            |
| **é”™è¯¯åé¦ˆ**     | â­ï¸ ç¼–è¯‘æ—¶æŠ¥é”™ï¼ˆæ—©å‘ç°ï¼‰    | âš ï¸ è¿è¡Œæ—¶æŠ¥é”™ï¼ˆéš¾è°ƒè¯•ï¼‰  |
| **ä»£ç ç”Ÿæˆèƒ½åŠ›** | âœ… å¯ç”Ÿæˆæ–°æºç /å­—èŠ‚ç      | âŒ ä»…è¯»å–æ³¨è§£            |
| **å…¸å‹åº”ç”¨**     | Lombok, Dagger, AutoValue | Spring DI, JPA å®ä½“æ ¡éªŒ |

> ğŸ’ **æ ¸å¿ƒä¼˜åŠ¿**ï¼šç¼–è¯‘æ—¶å¤„ç†é¿å…è¿è¡Œæ—¶å¼€é”€ï¼Œé€‚åˆé«˜é¢‘è°ƒç”¨çš„åŸºç¡€ç»„ä»¶ï¼ˆå¦‚ ORM å­—æ®µæ˜ å°„ï¼‰[3,6](@ref)ã€‚

------

### âš ï¸ äº”ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ

1. **ä½œç”¨åŸŸåŒ¹é…**

   - è‹¥éœ€è¿è¡Œæ—¶è¯»å–æ³¨è§£ï¼ˆå¦‚ Spring çš„ `@Autowired`ï¼‰ï¼Œä¿ç•™ç­–ç•¥éœ€ä¸º `RUNTIME`ï¼›è‹¥ä»…ç¼–è¯‘æœŸå¤„ç†ï¼Œç”¨ `SOURCE` æˆ– `CLASS`[4,6](@ref)ã€‚

2. **é¿å…é‡å¤ç”Ÿæˆ**

   - åœ¨ `process()` ä¸­æ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œé˜²æ­¢å¤šæ¬¡ç”Ÿæˆå†²çª[4](@ref)ã€‚

3. **ä¾èµ–éš”ç¦»**

   - æ³¨è§£å¤„ç†å™¨åº”è®¾ä¸º provided ä¾èµ–ï¼Œé¿å…æ‰“åŒ…åˆ°è¿è¡Œæ—¶ï¼š

     ```
     <dependency>
         <scope>provided</scope>
     </dependency>
     ```

4. **å¤šè½®å¤„ç†ä¼˜åŒ–**

   - åœ¨æœ€åä¸€è½®å¤„ç†ç”Ÿæˆæ±‡æ€»æ–‡ä»¶ï¼ˆå¦‚é…ç½®æ–‡ä»¶ï¼‰ï¼Œé¿å…ä¸­é—´è½®æ¬¡ç”Ÿæˆæœªå®Œæˆä»£ç [3,5](@ref)ã€‚

------

### ğŸ’ æ€»ç»“

æ³¨è§£å¤„ç†å™¨æ˜¯ Java å…ƒç¼–ç¨‹çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡ç¼–è¯‘æ—¶ä»£ç ç”Ÿæˆå’Œæ ¡éªŒï¼Œ**æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡**ï¼ˆå¦‚å‡å°‘ 50% æ ·æ¿ä»£ç ï¼‰ï¼Œå¹¶ä¿éšœè¿è¡Œæ—¶æ€§èƒ½ã€‚å…¶æ ¸å¿ƒåœ¨äºï¼š

- **ç²¾å‡†åŒ¹é…åœºæ™¯**ï¼šä»£ç ç”Ÿæˆé€‰ `SOURCE`ï¼Œæ ¡éªŒé€‰ `CLASS`ï¼ŒåŠ¨æ€æ³¨å…¥é€‰ `RUNTIME`ã€‚
- **åˆ©ç”¨å·¥å…·é“¾**ï¼šAutoService ç®€åŒ–æ³¨å†Œï¼ŒJavaPoetï¼ˆéæ ‡å‡†åº“ï¼‰æå‡ä»£ç ç”Ÿæˆå¯è¯»æ€§[4](@ref)ã€‚
- **è§„é¿åå°„ç“¶é¢ˆ**ï¼šç”¨ç¼–è¯‘æ—¶ç”Ÿæˆæ›¿ä»£è¿è¡Œæ—¶ä»£ç†ï¼ˆå¦‚ MapStruct vs. BeanUtilsï¼‰ã€‚

> ğŸ“š **æ‰©å±•å­¦ä¹ **ï¼š
>
> - [Java æ³¨è§£å¤„ç†å™¨å®˜æ–¹æ–‡æ¡£](https://docs.oracle.com/javase/8/docs/api/javax/annotation/processing/Processor.html)
> - å¼€æºé¡¹ç›®å‚è€ƒï¼šLombok æºç ã€Google Auto[5](@ref)ã€‚

## Processor & AbstractProcessor

Processor æ¥å£å’Œ AbstractProcessor æ˜¯ Java æ³¨è§£å¤„ç†æœºåˆ¶ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼ŒäºŒè€…æ—¢æœ‰ç´§å¯†è”ç³»ï¼Œåˆåœ¨åŠŸèƒ½å±‚çº§å’Œå®é™…ä½¿ç”¨ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯å…¶åŒºåˆ«ä¸è”ç³»çš„è¯¦ç»†è§£æï¼š

------

### ğŸ”— **ä¸€ã€æ ¸å¿ƒè”ç³»**

1. **ç»§æ‰¿å…³ç³»**
   `AbstractProcessor` æ˜¯ `Processor` æ¥å£çš„**é»˜è®¤æŠ½è±¡å®ç°ç±»**ï¼Œç®€åŒ–äº†è‡ªå®šä¹‰æ³¨è§£å¤„ç†å™¨çš„å¼€å‘ã€‚å¼€å‘è€…é€šå¸¸ç»§æ‰¿ `AbstractProcessor`ï¼Œè€Œéç›´æ¥å®ç° `Processor` æ¥å£[2,5](@ref)ã€‚
2. **å…±åŒç”Ÿå‘½å‘¨æœŸ**
   ä¸¤è€…å‡åœ¨ç¼–è¯‘æœŸç”± `javac` è°ƒç”¨ï¼Œéµå¾ªå¤šè½®æ¬¡ï¼ˆRoundï¼‰å¤„ç†æ¨¡å‹ï¼š
   - æ¯è½®æ‰«ææºç ä¸­çš„æ³¨è§£ï¼Œè°ƒç”¨å¤„ç†å™¨çš„ `process()` æ–¹æ³•ã€‚
   - è‹¥ç”Ÿæˆæ–°æ–‡ä»¶ï¼ˆå¦‚ `.java` æ–‡ä»¶ï¼‰ï¼Œåˆ™è§¦å‘æ–°ä¸€è½®å¤„ç†[4,5](@ref)ã€‚
3. **ä¾èµ–å·¥å…·ç±»**
   å‡é€šè¿‡ `ProcessingEnvironment` è·å–å…³é”®å·¥å…·ï¼š
   - `Filer`ï¼šç”Ÿæˆæ–°æ–‡ä»¶ï¼ˆå¦‚è‡ªåŠ¨åˆ›å»ºçš„æºç ï¼‰ã€‚
   - `Messager`ï¼šæŠ¥å‘Šç¼–è¯‘é”™è¯¯/è­¦å‘Šã€‚
   - `Elements`/`Types`ï¼šæ“ä½œç¨‹åºå…ƒç´ å’Œç±»å‹ç³»ç»Ÿ[4,5](@ref)ã€‚

------

### âš–ï¸ **äºŒã€æ ¸å¿ƒåŒºåˆ«**

#### 1. **åŠŸèƒ½å®Œå¤‡æ€§**

| **èƒ½åŠ›**     | **Processor æ¥å£**                       | **AbstractProcessor**                                        |
| ------------ | ---------------------------------------- | ------------------------------------------------------------ |
| **æ–¹æ³•å®ç°** | ä»…å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼ˆå¦‚ `process()`ï¼‰         | æä¾›é»˜è®¤å®ç°ï¼Œç®€åŒ–å¼€å‘ï¼ˆå¦‚æ³¨è§£è§£æé€»è¾‘ï¼‰[2,5](@ref)          |
| **æ³¨è§£æ”¯æŒ** | éœ€æ‰‹åŠ¨å®ç°æ‰€æœ‰æ–¹æ³•                       | é€šè¿‡æ³¨è§£ï¼ˆå¦‚ `@SupportedAnnotationTypes`ï¼‰å£°æ˜æ”¯æŒèŒƒå›´[2](@ref) |
| **ç‰ˆæœ¬å…¼å®¹** | éœ€æ‰‹åŠ¨è¦†ç›– `getSupportedSourceVersion()` | é»˜è®¤æ”¯æŒ `RELEASE_6`ï¼Œå¯é€šè¿‡æ³¨è§£æˆ–é‡å†™æ›´æ–°[2,4](@ref)        |

#### 2. **å…³é”®æ–¹æ³•å®ç°å¯¹æ¯”**

- **

  ```
  getSupportedAnnotationTypes()
  ```

  **

  - `Processor`ï¼šå¿…é¡»å®Œå…¨æ‰‹åŠ¨å®ç°ã€‚
  - `AbstractProcessor`ï¼šè‡ªåŠ¨ä» `@SupportedAnnotationTypes` æ³¨è§£è¯»å–å€¼ï¼Œæ”¯æŒé€šé…ç¬¦ï¼ˆå¦‚ `"*"`ï¼‰[2,5](@ref)ã€‚

- **

  ```
  process()
  ```

  **

  - `Processor`ï¼šå¼ºåˆ¶è¦æ±‚å®ç°æ ¸å¿ƒå¤„ç†é€»è¾‘ã€‚
  - `AbstractProcessor`ï¼šä»éœ€å¼€å‘è€…é‡å†™ï¼Œä½†ç¯å¢ƒå·¥å…·ï¼ˆå¦‚ `RoundEnvironment`ï¼‰å·²é›†æˆ[4,5](@ref)ã€‚

#### 3. **è®¾è®¡ç›®çš„**

- **`Processor` æ¥å£**
  å®šä¹‰æ³¨è§£å¤„ç†å™¨çš„**æ ‡å‡†è¡Œä¸ºå¥‘çº¦**ï¼Œç¡®ä¿æ‰€æœ‰å¤„ç†å™¨å…·å¤‡ä¸€è‡´çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆå¦‚åˆå§‹åŒ–ã€å¤šè½®å¤„ç†ï¼‰[5](@ref)ã€‚

- **

  ```
  AbstractProcessor
  ```

  
  æä¾›

  å¼€ç®±å³ç”¨çš„åŸºç¡€å®ç°**ï¼Œå‡å°‘é‡å¤ä»£ç ã€‚ä¾‹å¦‚ï¼š

  - è‡ªåŠ¨è§£æ `@SupportedSourceVersion` æ³¨è§£ã€‚
  - å†…ç½®ç©ºæ–¹æ³•é˜²æ­¢ `NullPointerException`[2,4](@ref)ã€‚

------

### ğŸ› ï¸ **ä¸‰ã€ä½¿ç”¨åœºæ™¯ä¸é€‰æ‹©å»ºè®®**

#### 1. **ä½•æ—¶ç”¨ `AbstractProcessor`**

- **ç»å¤§å¤šæ•°æƒ…å†µ**ï¼šå¦‚ Lombokã€AutoService ç­‰å·¥å…·ï¼Œé€šè¿‡ç»§æ‰¿å®ƒå¿«é€Ÿå®ç°æ³¨è§£å¤„ç†é€»è¾‘[2,3](@ref)ã€‚

- **éœ€å‡å°‘æ ·æ¿ä»£ç **ï¼šé¿å…æ‰‹åŠ¨è§£ææ³¨è§£æ”¯æŒèŒƒå›´æˆ–ç‰ˆæœ¬å…¼å®¹æ€§ã€‚

- 

  ç¤ºä¾‹ä»£ç ï¼š

  

  ```
  @AutoService(Processor.class) // Google AutoService è‡ªåŠ¨æ³¨å†Œ
  @SupportedAnnotationTypes("com.example.*") // å£°æ˜æ”¯æŒæ³¨è§£
  public class MyProcessor extends AbstractProcessor {
      @Override
      public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment env) {
          // å¤„ç†æ³¨è§£å¹¶ç”Ÿæˆä»£ç 
          return true;
      }
  }
  ```

#### 2. **ä½•æ—¶ç›´æ¥å®ç° `Processor`**

- **éœ€è¦å®Œå…¨è‡ªå®šä¹‰è¡Œä¸º**ï¼šä¾‹å¦‚ç»•è¿‡é»˜è®¤æ³¨è§£è§£ææœºåˆ¶ã€‚
- **åº•å±‚æ¡†æ¶å¼€å‘**ï¼šå¦‚å®šåˆ¶åŒ–ç¼–è¯‘å·¥å…·é“¾ï¼ˆç½•è§éœ€æ±‚ï¼‰[5](@ref)ã€‚

------

### ğŸ’ **å››ã€æ€»ç»“**

| **ç»´åº¦**     | **Processor æ¥å£**     | **AbstractProcessor**             |
| ------------ | ---------------------- | --------------------------------- |
| **è§’è‰²**     | åŸºç¡€æ¥å£ï¼Œå®šä¹‰è¡Œä¸ºè§„èŒƒ | é»˜è®¤å®ç°ï¼Œæä¾›å·¥å…·å’Œç®€åŒ–é€»è¾‘      |
| **ä½¿ç”¨éš¾åº¦** | é«˜ï¼ˆéœ€å®ç°æ‰€æœ‰æ–¹æ³•ï¼‰   | ä½ï¼ˆç»§æ‰¿+é‡å†™æ ¸å¿ƒæ–¹æ³•ï¼‰           |
| **é€‚ç”¨åœºæ™¯** | ç‰¹æ®Šå®šåˆ¶éœ€æ±‚           | 90% çš„æ³¨è§£å¤„ç†å™¨å¼€å‘ï¼ˆå¦‚ Lombokï¼‰ |

> ğŸ’¡ **ä¸€å¥è¯æ¦‚æ‹¬**ï¼š
> `Processor` æ˜¯â€œå®ªæ³•â€ï¼Œè§„å®šæ³¨è§£å¤„ç†å™¨åº”åšä»€ä¹ˆï¼›
> `AbstractProcessor` æ˜¯â€œæ³•å¾‹è‰æ¡ˆâ€ï¼Œæä¾›äº†å¯ç›´æ¥è½åœ°çš„å®ç°æ–¹æ¡ˆ[2,5](@ref)ã€‚

å¼€å‘è€…åº”ä¼˜å…ˆé€‰æ‹© **AbstractProcessor**ï¼Œä»…åœ¨æç«¯å®šåˆ¶åŒ–åœºæ™¯ä¸‹è€ƒè™‘ç›´æ¥å®ç°æ¥å£ã€‚äºŒè€…çš„åä½œå¥ å®šäº† Java ç¼–è¯‘æœŸä»£ç ç”Ÿæˆï¼ˆå¦‚å‡å°‘åå°„ï¼‰ã€è‡ªåŠ¨åŒ–æ ¡éªŒç­‰æŠ€æœ¯çš„åŸºç¡€ã€‚

## @SupportedAnnotationTypes

`@SupportedAnnotationTypes` æ˜¯ Java æ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processorï¼‰ä¸­çš„æ ¸å¿ƒæ³¨è§£ä¹‹ä¸€ï¼Œç”¨äºå£°æ˜å¤„ç†å™¨æ”¯æŒçš„æ³¨è§£ç±»å‹ã€‚å®ƒåœ¨ç¼–è¯‘é˜¶æ®µç”± `javac` è°ƒç”¨ï¼Œç¡®ä¿å¤„ç†å™¨ä»…å¤„ç†æŒ‡å®šçš„æ³¨è§£ï¼Œä»è€Œæå‡æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚ä»¥ä¸‹æ˜¯å…¶è¯¦ç»†è§£æï¼š

------

### âš™ï¸ **ä¸€ã€æ ¸å¿ƒä½œç”¨ä¸å®šä½**

1. **å£°æ˜æ”¯æŒèŒƒå›´**
   - æ˜ç¡®æ ‡æ³¨å½“å‰æ³¨è§£å¤„ç†å™¨èƒ½å¤„ç†çš„**æ³¨è§£ç±»å‹å…¨é™å®šå**ï¼ˆå¦‚ `"com.example.LogExecutionTime"`ï¼‰[1,3](@ref)ã€‚
   - é¿å…å¤„ç†å™¨æ— æ•ˆæ‰«ææ— å…³æ³¨è§£ï¼Œå‡å°‘ç¼–è¯‘æ—¶èµ„æºæ¶ˆè€—ã€‚
2. **ä¸ `AbstractProcessor` çš„åä½œ**
   - `AbstractProcessor.getSupportedAnnotationTypes()` æ–¹æ³•é»˜è®¤ä¼šè¯»å–è¯¥æ³¨è§£çš„ `value` å€¼ä½œä¸ºæ”¯æŒèŒƒå›´[1,6](@ref)ã€‚
   - å¼€å‘è€…æ— éœ€æ‰‹åŠ¨é‡å†™ `getSupportedAnnotationTypes()`ï¼Œç®€åŒ–ä»£ç [6](@ref)ã€‚

------

### ğŸ“ **äºŒã€è¯­æ³•ä¸ä½¿ç”¨æ–¹å¼**

#### **1. æ³¨è§£å®šä¹‰**

```
@Documented
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface SupportedAnnotationTypes {
    String[] value(); // è¿”å›æ”¯æŒçš„æ³¨è§£å…¨é™å®šåæ•°ç»„
}
```

- **ä½œç”¨ç›®æ ‡**ï¼šä»…èƒ½ç”¨äºæ³¨è§£å¤„ç†å™¨ç±»ï¼ˆ`ElementType.TYPE`ï¼‰[1](@ref)ã€‚
- **ä¿ç•™ç­–ç•¥**ï¼šè¿è¡Œæ—¶ä¿ç•™ï¼ˆ`RUNTIME`ï¼‰ï¼Œä¾›ç¼–è¯‘å™¨è¯»å–[1](@ref)ã€‚

#### **2. ä½¿ç”¨ç¤ºä¾‹**

```
@SupportedAnnotationTypes({"com.example.Log", "com.example.Validate"})
public class MyProcessor extends AbstractProcessor {
    @Override
    public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment env) {
        // å¤„ç†é€»è¾‘
        return true;
    }
}
```

- **å¤šæ³¨è§£æ”¯æŒ**ï¼šç”¨æ•°ç»„å½¢å¼å£°æ˜å¤šä¸ªæ³¨è§£ç±»å‹[6](@ref)ã€‚
- **é€šé…ç¬¦**ï¼šæ”¯æŒ `*` åŒ¹é…åŒ…è·¯å¾„ï¼ˆå¦‚ `"com.example.*"`ï¼‰ï¼Œä½†éœ€è°¨æ…é¿å…è¿‡åº¦åŒ¹é…[1,6](@ref)ã€‚

------

### âš™ï¸ **ä¸‰ã€å·¥ä½œåŸç†**

1. 

   ç¼–è¯‘æœŸæ‰«æ

   

   - `javac` åœ¨ç¼–è¯‘æ—¶è¯†åˆ«æ‰€æœ‰æ³¨è§£å¤„ç†å™¨ï¼Œå¹¶æ£€æŸ¥å…¶ `@SupportedAnnotationTypes` å®šä¹‰çš„æ³¨è§£ç±»å‹[7](@ref)ã€‚

2. 

   å¤šè½®æ¬¡å¤„ç†

   

   - è‹¥å¤„ç†å™¨ç”Ÿæˆæ–°æºæ–‡ä»¶ï¼ˆå¦‚ `.java`ï¼‰ï¼Œä¼šè§¦å‘æ–°ä¸€è½®å¤„ç†ï¼Œä½†ä»…æ‰«æä¸å£°æ˜åŒ¹é…çš„æ³¨è§£[7](@ref)ã€‚

------

### âš ï¸ **å››ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ**

1. **ä¸é‡å†™æ–¹æ³•å†²çª**

   - è‹¥åŒæ—¶ä½¿ç”¨æ³¨è§£å¹¶é‡å†™ `getSupportedAnnotationTypes()`ï¼Œ**ä»¥é‡å†™æ–¹æ³•ä¸ºå‡†**ã€‚å»ºè®®äºŒé€‰ä¸€ä»¥é¿å…æ··æ·†[6](@ref)ã€‚

   - ç¤ºä¾‹å†²çªï¼š

     ```
     @SupportedAnnotationTypes("com.example.A") // è¢«å¿½ç•¥
     public class MyProcessor extends AbstractProcessor {
         @Override
         public Set<String> getSupportedAnnotationTypes() {
             return Set.of("com.example.B"); // å®é™…ç”Ÿæ•ˆ
         }
     }
     ```

2. **é€šé…ç¬¦çš„å±€é™æ€§**

   - é€šé…ç¬¦ `*` ä»…åŒ¹é…å½“å‰åŒ…ä¸‹æ³¨è§£ï¼Œä¸æ”¯æŒé€’å½’å­åŒ…ï¼ˆå¦‚ `"com.example.*"` ä¸åŒ…å« `com.example.sub.*`ï¼‰[6](@ref)ã€‚

3. **æ³¨å†Œæ–¹å¼å¯¹æ¯”**

   | **æ³¨å†Œæ–¹å¼**                         | **ä¼˜ç‚¹**                   | **ç¼ºç‚¹**           |
   | ------------------------------------ | -------------------------- | ------------------ |
   | `@SupportedAnnotationTypes`          | å£°æ˜ç®€æ´ï¼Œå‡å°‘æ ·æ¿ä»£ç      | é€šé…ç¬¦åŠŸèƒ½æœ‰é™     |
   | é‡å†™ `getSupportedAnnotationTypes()` | åŠ¨æ€é€»è¾‘çµæ´»ï¼ˆå¦‚æ¡ä»¶è¿‡æ»¤ï¼‰ | éœ€æ‰‹åŠ¨ç»´æŠ¤æ³¨è§£åˆ—è¡¨ |

------

### ğŸ› ï¸ **äº”ã€å®é™…åº”ç”¨åœºæ™¯**

1. **ä»£ç ç”Ÿæˆå·¥å…·**

   - å¦‚ Lombok çš„

      

     ```
     @Getter
     ```

      

     å¤„ç†å™¨å£°æ˜ï¼š

     ```
     @SupportedAnnotationTypes("lombok.Getter")
     public class GetterProcessor extends AbstractProcessor { ... }
     ```

     ä»…å¤„ç†å«

      

     ```
     @Getter
     ```

      

     çš„ç±»ï¼Œé«˜æ•ˆç”Ÿæˆ getter æ–¹æ³•

     4

     ã€‚

2. **ç¼–è¯‘æ—¶æ ¡éªŒ**

   - æ ¡éªŒæ³¨è§£ï¼ˆå¦‚

      

     ```
     @NotNull
     ```

     ï¼‰çš„å¤„ç†å™¨ï¼š

     ```
     @SupportedAnnotationTypes("org.example.NotNull")
     public class NotNullProcessor extends AbstractProcessor { ... }
     ```

     æ£€æŸ¥å­—æ®µèµ‹å€¼æ˜¯å¦éç©ºï¼Œé”™è¯¯æ—¶é€šè¿‡

      

     ```
     Messager
     ```

      

     æŠ¥é”™

     3,6

     ã€‚

3. **æ¡†æ¶æ‰©å±•**

   - Spring Boot ä¸­è‡ªå®šä¹‰é…ç½®æ³¨è§£çš„å¤„ç†å™¨ï¼Œæ ¹æ®æ³¨è§£ç”Ÿæˆé…ç½®æ–‡ä»¶æˆ–åˆå§‹åŒ–ä»£ç [6](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

`@SupportedAnnotationTypes` æ˜¯æ³¨è§£å¤„ç†å™¨çš„**â€œç›®æ ‡è¿‡æ»¤å™¨â€**ï¼Œé€šè¿‡å£°æ˜å¼é…ç½®æ˜ç¡®å¤„ç†èŒƒå›´ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

- **ç²¾å‡†åŒ¹é…**ï¼šé¿å…æ— æ•ˆæ‰«æï¼Œæå‡ç¼–è¯‘æ•ˆç‡ã€‚
- **ä»£ç ç®€åŒ–**ï¼šæ›¿ä»£æ‰‹åŠ¨é‡å†™ `getSupportedAnnotationTypes()`ï¼Œé™ä½å†—ä½™[6](@ref)ã€‚
- **åä½œè§„èŒƒ**ï¼šä¸ `AbstractProcessor` æ·±åº¦é›†æˆï¼Œæ˜¯ Java ç¼–è¯‘æ—¶å…ƒç¼–ç¨‹çš„åŸºçŸ³ã€‚

> âš ï¸ **æ³¨æ„**ï¼šå¤æ‚åœºæ™¯ï¼ˆå¦‚åŠ¨æ€æ³¨è§£æ”¯æŒï¼‰ä»éœ€é‡å†™ `getSupportedAnnotationTypes()`ï¼Œæ­¤æ—¶åº”å¿½ç•¥è¯¥æ³¨è§£[6](@ref)ã€‚åˆç†é€‰æ‹©å£°æ˜æ–¹å¼ï¼Œå¯æ˜¾è‘—æå‡å¤„ç†å™¨æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚

## è¿è¡Œæ—¶æ³¨è§£

åœ¨ Java ä¸­ï¼Œè¿è¡Œæ—¶æ ¹æ®æ³¨è§£ç­›é€‰å…ƒç´ ï¼ˆå¦‚ç±»ã€æ–¹æ³•æˆ–å­—æ®µï¼‰ä¸»è¦é€šè¿‡ **åå°„æœºåˆ¶ï¼ˆReflectionï¼‰** å®ç°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤å’Œç¤ºä¾‹ï¼š

------

### âš™ï¸ **ä¸€ã€ç­›é€‰çš„æ ¸å¿ƒæ­¥éª¤**

1. **ç¡®ä¿æ³¨è§£ä¿ç•™åˆ°è¿è¡Œæ—¶**
   æ³¨è§£éœ€é€šè¿‡ `@Retention(RetentionPolicy.RUNTIME)` æ ‡è®°ï¼Œå¦åˆ™ JVM ä¼šåœ¨åŠ è½½ç±»æ—¶ä¸¢å¼ƒæ³¨è§£ä¿¡æ¯[2,4,5](@ref)ã€‚

   ```
   @Retention(RetentionPolicy.RUNTIME)
   @Target(ElementType.METHOD) // å¯æŒ‡å®šä½œç”¨ç›®æ ‡ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ï¼‰
   public @interface MyAnnotation {
       String value() default "";
   }
   ```

2. **è·å–ç›®æ ‡å…ƒç´ å¹¶æ£€æŸ¥æ³¨è§£**
   ä½¿ç”¨åå°„ API è·å–ç±»ã€æ–¹æ³•æˆ–å­—æ®µçš„å…ƒæ•°æ®ï¼Œå¹¶é€šè¿‡ä»¥ä¸‹æ–¹æ³•ç­›é€‰ï¼š

   - `isAnnotationPresent(Class)`: æ£€æŸ¥å…ƒç´ æ˜¯å¦è¢«æŒ‡å®šæ³¨è§£æ ‡è®°[2,4](@ref)ã€‚
   - `getAnnotation(Class)`: è·å–æ³¨è§£å®ä¾‹ï¼Œè¿›ä¸€æ­¥è¯»å–å±æ€§å€¼[4,6](@ref)ã€‚

3. **æ‰§è¡Œç­›é€‰é€»è¾‘**
   æ ¹æ®æ³¨è§£ä¿¡æ¯åŠ¨æ€è°ƒæ•´ç¨‹åºè¡Œä¸ºï¼ˆå¦‚è°ƒç”¨æ–¹æ³•ã€æ³¨å…¥ä¾èµ–ç­‰ï¼‰[2,6](@ref)ã€‚

------

### ğŸ§© **äºŒã€å…·ä½“åœºæ™¯ä¸ä»£ç ç¤ºä¾‹**

#### **åœºæ™¯ 1ï¼šç­›é€‰è¢«æ³¨è§£æ ‡è®°çš„æ–¹æ³•**

```
// å®šä¹‰è¿è¡Œæ—¶æ³¨è§£
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface LogExecutionTime {}

// ç›®æ ‡ç±»
public class TaskService {
    @LogExecutionTime
    public void runTask() {
        System.out.println("Task running...");
    }
}

// è¿è¡Œæ—¶ç­›é€‰å¹¶æ‰§è¡Œ
public class AnnotationScanner {
    public static void main(String[] args) throws Exception {
        Class<?> clazz = TaskService.class;
        for (Method method : clazz.getMethods()) {
            if (method.isAnnotationPresent(LogExecutionTime.class)) {
                // æ‰§è¡Œå¸¦æ³¨è§£çš„æ–¹æ³•
                method.invoke(clazz.getDeclaredConstructor().newInstance());
            }
        }
    }
}
```

- **å…³é”®ç‚¹**ï¼šé€šè¿‡ `getMethods()` éå†æ‰€æœ‰æ–¹æ³•ï¼Œç”¨ `isAnnotationPresent` æ£€æŸ¥æ³¨è§£[2,4](@ref)ã€‚

#### **åœºæ™¯ 2ï¼šæ ¹æ®æ³¨è§£å±æ€§å€¼ç­›é€‰**

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Route {
    String path(); // å®šä¹‰è·¯å¾„å±æ€§
}

// ä½¿ç”¨æ³¨è§£
@Route(path = "/user")
public class UserController {}

// æ‰«æå¹¶æ³¨å†Œè·¯ç”±
public class RouterRegistry {
    public static void registerControllers() {
        Reflections reflections = new Reflections("com.example"); // åŒ…æ‰«æå·¥å…·
        Set<Class<?>> controllers = reflections.getTypesAnnotatedWith(Route.class);
        for (Class<?> clazz : controllers) {
            Route route = clazz.getAnnotation(Route.class);
            System.out.println("æ³¨å†Œè·¯ç”±: " + route.path() + " -> " + clazz.getName());
        }
    }
}
```

- **å…³é”®ç‚¹**ï¼šç»“åˆç±»æ‰«æå·¥å…·ï¼ˆå¦‚ `Reflections`ï¼‰ç­›é€‰å¸¦æ³¨è§£çš„ç±»ï¼Œå¹¶è¯»å–æ³¨è§£å±æ€§[6,7](@ref)ã€‚

------

### âš¡ï¸ **ä¸‰ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§**

1. **å‡å°‘åå°„è°ƒç”¨**
   - ç¼“å­˜æ‰«æç»“æœï¼ˆå¦‚å°†æ³¨è§£ç±»åˆ—è¡¨å­˜å…¥é™æ€å˜é‡ï¼‰[6](@ref)ã€‚
   - é¿å…åœ¨å¾ªç¯ä¸­é‡å¤è°ƒç”¨ `getAnnotation()`ã€‚
2. **ç¼©å°æ‰«æèŒƒå›´**
   - æŒ‡å®šåŒ…è·¯å¾„ï¼ˆå¦‚ `Reflections("com.example.controllers")`ï¼‰[7](@ref)ã€‚
   - æŒ‰éœ€åŠ è½½ç±»ï¼ˆé¿å…æ‰«ææ•´ä¸ª classpathï¼‰ã€‚
3. **ä½¿ç”¨å·¥å…·åº“**
   - **Spring çš„ `AnnotationUtils`**ï¼šæ”¯æŒå¤„ç†ç»§æ‰¿æ³¨è§£ï¼ˆ`@Inherited`ï¼‰å’Œæ¡¥æ¥æ–¹æ³•[4](@ref)ã€‚
   - **Reflections åº“**ï¼šå¿«é€Ÿæ‰«æç±»è·¯å¾„å¹¶è¿‡æ»¤æ³¨è§£[7](@ref)ã€‚

------

### âš ï¸ **å››ã€å¸¸è§é—®é¢˜ä¸è§£å†³**

1. **æ³¨è§£æœªç”Ÿæ•ˆï¼Ÿ**
   - æ£€æŸ¥ `@Retention` æ˜¯å¦ä¸º `RUNTIME`ã€‚
   - ç¡®è®¤ `@Target` æ˜¯å¦åŒ…å«ç›®æ ‡å…ƒç´ ç±»å‹ï¼ˆå¦‚æ–¹æ³•æ³¨è§£è¯¯ç”¨äºç±»ï¼‰[4,5](@ref)ã€‚
2. **æ€§èƒ½ç“¶é¢ˆï¼Ÿ**
   - æ›¿æ¢åå°„ä¸ºç¼–è¯‘æ—¶æ³¨è§£å¤„ç†ï¼ˆå¦‚ Lombokï¼‰ï¼Œé¿å…è¿è¡Œæ—¶å¼€é”€[2,6](@ref)ã€‚
3. **æ³¨è§£ç»§æ‰¿å¤±æ•ˆï¼Ÿ**
   - é»˜è®¤ä¸ç»§æ‰¿çˆ¶ç±»æ³¨è§£ï¼Œéœ€æ˜¾å¼æ ‡è®° `@Inherited`ï¼ˆä»…å¯¹ç±»æœ‰æ•ˆï¼Œæ–¹æ³•æ— æ•ˆï¼‰[4,5](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

è¿è¡Œæ—¶æ³¨è§£ç­›é€‰çš„æ ¸å¿ƒæ˜¯ **åå°„ + å…ƒæ•°æ®ä¿ç•™ç­–ç•¥**ï¼š

1. æ³¨è§£éœ€ç”¨ `@Retention(RetentionPolicy.RUNTIME)` ä¿ç•™è‡³è¿è¡Œæ—¶ã€‚
2. é€šè¿‡åå°„ API éå†å…ƒç´ å¹¶æ£€æŸ¥æ³¨è§£å­˜åœ¨æ€§ï¼ˆ`isAnnotationPresent()`ï¼‰ã€‚
3. ç»“åˆæ‰«æå·¥å…·ï¼ˆå¦‚ Reflectionsï¼‰å’Œæ³¨è§£å±æ€§å®ç°åŠ¨æ€é€»è¾‘ã€‚

> **é€‚ç”¨åœºæ™¯**ï¼šåŠ¨æ€è·¯ç”±æ³¨å†Œï¼ˆSpring MVCï¼‰ã€AOP åˆ‡é¢ï¼ˆå¦‚ `@Transactional`ï¼‰ã€è‡ªå®šä¹‰æ ¡éªŒï¼ˆå¦‚ `@NotNull`ï¼‰[2,6,7](@ref)ã€‚
> â€‹**é¿å‘æç¤º**â€‹ï¼šé¢‘ç¹è°ƒç”¨åå°„æ—¶éœ€ä¼˜åŒ–æ€§èƒ½ï¼Œå¤æ‚åœºæ™¯ä¼˜å…ˆè€ƒè™‘ç¼–è¯‘æ—¶å¤„ç†ï¼ˆå¦‚æ³¨è§£å¤„ç†å™¨ç”Ÿæˆä»£ç ï¼‰[6,7](@ref)ã€‚

## Reflections

Reflections æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Java å…ƒæ•°æ®æ‰«æä¸æŸ¥è¯¢åº“ï¼Œå®ƒé€šè¿‡ç®€åŒ–åå°„æ“ä½œå’Œç±»è·¯å¾„æ‰«æï¼Œå¸®åŠ©å¼€å‘è€…åœ¨è¿è¡Œæ—¶åŠ¨æ€å‘ç°ç±»ã€æ–¹æ³•ã€å­—æ®µã€æ³¨è§£ç­‰å…ƒæ•°æ®ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŠŸèƒ½ã€ä½¿ç”¨æ–¹å¼ã€åº”ç”¨åœºæ™¯åŠä¼˜åŒ–æŠ€å·§å±•å¼€è¯¦ç»†ä»‹ç»ï¼š

------

### âš™ï¸ **ä¸€ã€æ ¸å¿ƒåŠŸèƒ½ä¸å®šä½** [1,6,7](@ref)

1. **å…ƒæ•°æ®ç´¢å¼•ä¸æ‰«æ**

   - **åŠ¨æ€æ‰«æç±»è·¯å¾„**ï¼šè‡ªåŠ¨æ‰«ææŒ‡å®šåŒ…æˆ–æ•´ä¸ªé¡¹ç›®çš„ `.class` æ–‡ä»¶ï¼Œæ„å»ºå…ƒæ•°æ®ç´¢å¼•è¡¨ï¼ˆå¦‚ç±»åã€æ³¨è§£ã€æ–¹æ³•ç­¾åç­‰ï¼‰ã€‚
   - **è·¨æ¨¡å—æ”¯æŒ**ï¼šæ”¯æŒå¤šæ¨¡å—é¡¹ç›®ï¼Œå¯åŒæ—¶æ‰«æå¤šä¸ªå­æ¨¡å—çš„å…ƒæ•°æ®ï¼ˆä¾‹å¦‚å¾®æœåŠ¡æ¶æ„ä¸­çš„ç»Ÿä¸€æ³¨è§£å¤„ç†ï¼‰[1,7](@ref)ã€‚

2. **ä¸°å¯Œçš„æŸ¥è¯¢åŠŸèƒ½**

   - 

     ç±»å‹æŸ¥è¯¢

     ï¼š

     - æŸ¥æ‰¾å­ç±»ï¼š`getSubTypesOf(SomeInterface.class)`
     - æŸ¥æ‰¾æ³¨è§£æ ‡è®°çš„ç±»ï¼š`getTypesAnnotatedWith(MyAnnotation.class)`

   - 

     æ–¹æ³•ä¸å­—æ®µæŸ¥è¯¢

     ï¼š

     - æ³¨è§£æ–¹æ³•ï¼š`getMethodsAnnotatedWith(Path.class)`
     - ç‰¹å®šå­—æ®µï¼š`getFieldsAnnotatedWith(Id.class)`

   - 

     èµ„æºæ–‡ä»¶æŸ¥è¯¢

     ï¼š

     - åŒ¹é…é…ç½®æ–‡ä»¶ï¼š`getResources(Pattern.compile(".*\\.properties"))` [3,5,6](@ref)ã€‚

3. **çµæ´»çš„æ‰«æå™¨é…ç½®**

   - å†…ç½®å¤šç§æ‰«æå™¨ï¼ˆScannersï¼‰ï¼ŒæŒ‰éœ€å¯ç”¨ï¼š

     - `TypeAnnotationsScanner`ï¼šæ‰«æç±»æ³¨è§£

     - `MethodParameterScanner`ï¼šè§£ææ–¹æ³•å‚æ•°

     - `ResourcesScanner`ï¼šå®šä½èµ„æºæ–‡ä»¶

     - ç¤ºä¾‹é…ç½®ï¼š

       ```
       Reflections reflections = new Reflections(new ConfigurationBuilder()
         .setUrls(ClasspathHelper.forPackage("com.example"))
         .addScanners(new TypeAnnotationsScanner(), new FieldAnnotationsScanner())
         .filterInputsBy(new FilterBuilder().includePackage("com.example")));
       ``` [6,8](@ref)
       ```

------

### ğŸ› ï¸ **äºŒã€ä½¿ç”¨æ–¹å¼ä¸ä»£ç ç¤ºä¾‹**

1. 

   ä¾èµ–å¼•å…¥

   

   Maven é…ç½®ï¼š

   ```
   <dependency>
     <groupId>org.reflections</groupId>
     <artifactId>reflections</artifactId>
     <version>0.10.2</version>
   </dependency>
   ``` [2,4,8](@ref)
   ```

2. 

   åŸºç¡€æ“ä½œç¤ºä¾‹

   

   - 

     æ‰«æå¸¦æ³¨è§£çš„ç±»

     ï¼š

     ```
     Reflections reflections = new Reflections("com.example");
     Set<Class<?>> controllers = reflections.getTypesAnnotatedWith(RestController.class);
     controllers.forEach(clazz -> System.out.println("æ§åˆ¶å™¨: " + clazz.getName()));
     ```

   - 

     æŸ¥æ‰¾æ¥å£å®ç°ç±»

     ï¼š

     ```
     Set<Class<? extends Plugin>> plugins = reflections.getSubTypesOf(Plugin.class);
     plugins.forEach(plugin -> registerPlugin(plugin.newInstance()));
     ``` [4,5,8](@ref)
     ```

3. 

   é«˜çº§æŸ¥è¯¢

   

   - å¤åˆæ¡ä»¶æŸ¥è¯¢ï¼ˆå¦‚æŸ¥æ‰¾å…¬æœ‰ getter æ–¹æ³•ï¼‰ï¼š

     ```
     Set<Method> getters = reflections.getMethodsMatchParams(
       withModifier(Modifier.PUBLIC), 
       withPrefix("get"), 
       withParametersCount(0)
     );
     ``` [3,5](@ref)
     ```

------

### ğŸš€ **ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯** [1,5,7](@ref)

1. **æ¡†æ¶å¼€å‘**

   - **ä¾èµ–æ³¨å…¥**ï¼šè‡ªåŠ¨å‘ç° `@Service` æˆ– `@Component` æ³¨è§£çš„ç±»å¹¶æ³¨å…¥å®¹å™¨ã€‚
   - **æ’ä»¶ç³»ç»Ÿ**ï¼šåŠ¨æ€åŠ è½½å®ç°ç‰¹å®šæ¥å£çš„æ’ä»¶ç±»ï¼ˆå¦‚ `getSubTypesOf(Plugin.class)`ï¼‰ã€‚

2. **æ³¨è§£é©±åŠ¨é€»è¾‘**

   - **è·¯ç”±æ³¨å†Œ**ï¼šæ‰«æå¸¦ `@Route("/path")` æ³¨è§£çš„æ§åˆ¶å™¨ï¼Œç”Ÿæˆè·¯ç”±è¡¨ã€‚
   - **AOP åˆ‡é¢**ï¼šå®šä½ `@Transactional` æ³¨è§£çš„æ–¹æ³•ï¼ŒåŠ¨æ€ä»£ç†äº‹åŠ¡ç®¡ç†ã€‚

3. **è‡ªåŠ¨åŒ–æµ‹è¯•**

   - æ”¶é›†æ‰€æœ‰

      

     ```
     @Test
     ```

      

     æ³¨è§£çš„æ–¹æ³•ï¼Œè‡ªå®šä¹‰æµ‹è¯•è¿è¡Œå™¨ï¼š

     ```
     Set<Method> tests = reflections.getMethodsAnnotatedWith(Test.class);
     tests.forEach(method -> runTest(method));
     ```

4. **èµ„æºç®¡ç†**

   - æ‰¹é‡åŠ è½½é…ç½®æ–‡ä»¶æˆ–æ¨¡æ¿ï¼ˆå¦‚ `.properties` æˆ– `.html` æ–‡ä»¶ï¼‰ã€‚

------

### âš ï¸ **å››ã€æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹** [1,5,6](@ref)

1. **æ€§èƒ½ç“¶é¢ˆ**

   - **é—®é¢˜**ï¼šå…¨é‡æ‰«æå¤§å‹é¡¹ç›®å¯èƒ½å¯¼è‡´å¯åŠ¨å»¶è¿Ÿï¼ˆå°¤å…¶é¦–æ¬¡æ‰«æï¼‰ã€‚

   - 

     ä¼˜åŒ–æ–¹æ¡ˆ

     ï¼š

     - ç¼©å°æ‰«æèŒƒå›´ï¼šç²¾ç¡®æŒ‡å®šåŒ…è·¯å¾„ï¼ˆå¦‚ `new Reflections("com.example.core")`ï¼‰ã€‚
     - å¯ç”¨ç¼“å­˜ï¼šå°†æ‰«æç»“æœåºåˆ—åŒ–ä¸º JSON/XMLï¼Œåç»­ç›´æ¥åŠ è½½é¿å…é‡å¤æ‰«æã€‚
     - å¢é‡æ›´æ–°ï¼šä»…æ‰«æå˜æ›´éƒ¨åˆ†ï¼ˆéœ€ç»“åˆæ„å»ºå·¥å…·ï¼‰ã€‚

2. **å¸¸è§é—®é¢˜**

   - **æ‰«æå¤±æ•ˆ**ï¼šåŒ…è·¯å¾„é”™è¯¯ï¼ˆå¦‚è¯¯å†™ `com.exmaple` â†’ `com.example`ï¼‰[4](@ref)ã€‚
   - **æ¨¡å—åŒ–å…¼å®¹æ€§**ï¼šJava 9+ æ¨¡å—ç³»ç»Ÿéœ€å¼€æ”¾åŒ…ï¼ˆ`opens` æŒ‡ä»¤ï¼‰æˆ–é…ç½®æ¨¡å—è·¯å¾„ã€‚
   - **å®‰å…¨é£é™©**ï¼šé¿å…æ‰«æä¸å¯ä¿¡ä»£ç ï¼ˆåå°„å¯èƒ½æ‰§è¡Œæ¶æ„é€»è¾‘ï¼‰ã€‚

------

### ğŸ” **äº”ã€Reflections vs åŸç”Ÿåå°„ API**

| **ç»´åº¦**       | **Reflections**                                 | **åŸç”Ÿåå°„ API**                     |
| -------------- | ----------------------------------------------- | ------------------------------------ |
| **ä½¿ç”¨å¤æ‚åº¦** | é«˜é˜¶å°è£…ï¼Œé“¾å¼è°ƒç”¨ï¼ˆå¦‚ `withModifier().and()`ï¼‰ | éœ€æ‰‹åŠ¨å¾ªç¯+æ¡ä»¶åˆ¤æ–­                  |
| **åŠŸèƒ½èŒƒå›´**   | æ”¯æŒç±»ã€æ–¹æ³•ã€å­—æ®µã€èµ„æºæ–‡ä»¶ç­‰å…¨æ–¹ä½æŸ¥è¯¢        | ä»…æ”¯æŒå•ä¸€ç±»æˆ–å¯¹è±¡çš„å…ƒæ•°æ®è®¿é—®       |
| **æ€§èƒ½**       | å¯åŠ¨æ—¶å¼€é”€å¤§ï¼Œè¿è¡Œæ—¶æŸ¥è¯¢å¿«ï¼ˆä¾èµ–é¢„ç´¢å¼•ï¼‰        | æ¯æ¬¡è°ƒç”¨å³æ—¶è§£æï¼Œè¿è¡Œæ—¶å¼€é”€å¤§       |
| **é€‚ç”¨åœºæ™¯**   | æ¡†æ¶å¼€å‘ã€æ‰¹é‡å…ƒæ•°æ®å¤„ç†                        | ç®€å•åŠ¨æ€è°ƒç”¨ï¼ˆå¦‚ `method.invoke()`ï¼‰ |

> ğŸ’¡ **è®¾è®¡å»ºè®®**ï¼šä¸­å°å‹é¡¹ç›®æˆ–éœ€åŠ¨æ€å‘ç°çš„åœºæ™¯ï¼ˆå¦‚æ’ä»¶åŒ–ï¼‰ä¼˜å…ˆç”¨ Reflectionsï¼›é«˜æ€§èƒ½å…³é”®è·¯å¾„é¿å…åå°„ï¼Œæ”¹ç”¨ç¼–è¯‘æ—¶æ³¨è§£å¤„ç†ï¼ˆå¦‚ Lombokï¼‰[3,7](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

Reflections é€šè¿‡**é¢„ç´¢å¼•+é“¾å¼æŸ¥è¯¢ API**ï¼Œå°† Java åå°„ä»â€œæ‰‹å·¥éå†â€å‡çº§ä¸ºâ€œå£°æ˜å¼æ£€ç´¢â€ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

- **ç®€åŒ–å…ƒæ•°æ®å‘ç°**ï¼šé€‚ç”¨äºä¾èµ–æ³¨å…¥ã€è·¯ç”±æ³¨å†Œç­‰åŠ¨æ€åœºæ™¯[5,7](@ref)ã€‚
- **è·¨æ¨¡å—æ”¯æŒ**ï¼šåŠ©åŠ›å¾®æœåŠ¡ç­‰åˆ†å¸ƒå¼æ¶æ„çš„å…ƒæ•°æ®æ•´åˆ[1](@ref)ã€‚
- **çµæ´»æ€§ä¸é£é™©å¹¶å­˜**ï¼šéœ€æƒè¡¡å¯åŠ¨æ€§èƒ½ä¸è¿è¡Œæ—¶ä¾¿åˆ©æ€§ï¼Œåˆç†æ§åˆ¶æ‰«æèŒƒå›´[6](@ref)ã€‚

**å®è·µèµ„æº**ï¼š

- [å®˜æ–¹ GitHub ç¤ºä¾‹](https://github.com/ronmamo/reflections/tree/master/src/test/java/org/reflections)
- [Spring é›†æˆæ–¹æ¡ˆ](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java)

## è¿è¡Œæ—¶æ³¨è§£è§£æ

åœ¨ Java ä¸­ï¼Œè‡ªå®šä¹‰æ³¨è§£æ˜¯ä¸€ç§å¼ºå¤§çš„å…ƒæ•°æ®ç¼–ç¨‹æœºåˆ¶ï¼Œå¯å¢å¼ºä»£ç çš„å¯è¯»æ€§ã€å‡å°‘é‡å¤é€»è¾‘å¹¶æ”¯æŒæ¡†æ¶æ‰©å±•ã€‚ä»¥ä¸‹æ˜¯å®ç°è‡ªå®šä¹‰æ³¨è§£çš„æ ¸å¿ƒæ­¥éª¤å’ŒæŠ€æœ¯è¦ç‚¹ï¼Œç»“åˆæœ€ä½³å®è·µå’Œå¸¸è§åœºæ™¯ï¼š

------

### ğŸ› ï¸ **ä¸€ã€å®šä¹‰è‡ªå®šä¹‰æ³¨è§£**

#### 1. **åŸºæœ¬è¯­æ³•**

ä½¿ç”¨ `@interface` å…³é”®å­—å®šä¹‰æ³¨è§£ï¼Œå¹¶é€šè¿‡å…ƒæ³¨è§£ï¼ˆå¦‚ `@Target`ã€`@Retention`ï¼‰é…ç½®å…¶ä½œç”¨èŒƒå›´å’Œç”Ÿå‘½å‘¨æœŸï¼š

```
import java.lang.annotation.*;

@Target(ElementType.METHOD) // æ³¨è§£ä½œç”¨äºæ–¹æ³•
@Retention(RetentionPolicy.RUNTIME) // è¿è¡Œæ—¶ä¿ç•™ï¼ˆå¯é€šè¿‡åå°„è·å–ï¼‰
public @interface LogExecution {
    String value() default ""; // æ³¨è§£å‚æ•°ï¼Œå¯è®¾ç½®é»˜è®¤å€¼
    int timeout() default 5000; // å¤šå‚æ•°ç¤ºä¾‹
}
```

#### 2. **å…ƒæ³¨è§£è¯¦è§£**

- **

  ```
  @Target
  ```

  **ï¼šæŒ‡å®šæ³¨è§£çš„åº”ç”¨ç›®æ ‡ï¼ˆæ–¹æ³•ã€ç±»ã€å­—æ®µç­‰ï¼‰ï¼Œå¸¸ç”¨å€¼ï¼š

  - `ElementType.METHOD`ï¼šæ–¹æ³•çº§åˆ«
  - `ElementType.TYPE`ï¼šç±»/æ¥å£çº§åˆ«
  - `ElementType.FIELD`ï¼šå­—æ®µçº§åˆ«

- **

  ```
  @Retention
  ```

  **ï¼šå®šä¹‰æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼š

  - `RetentionPolicy.SOURCE`ï¼šä»…æºç é˜¶æ®µï¼ˆå¦‚ Lombokï¼‰
  - `RetentionPolicy.CLASS`ï¼šç¼–è¯‘åˆ°å­—èŠ‚ç ï¼ˆé»˜è®¤ï¼‰
  - `RetentionPolicy.RUNTIME`ï¼šè¿è¡Œæ—¶å¯ç”¨ï¼ˆéœ€åå°„å¤„ç†ï¼‰[1,3](@ref)

- **`@Documented`**ï¼šæ˜¯å¦åŒ…å«åœ¨ Javadoc ä¸­

- **`@Inherited`**ï¼šæ˜¯å¦è¢«å­ç±»ç»§æ‰¿ï¼ˆä»…å¯¹ç±»æ³¨è§£æœ‰æ•ˆï¼‰[3](@ref)

------

### âš™ï¸ **äºŒã€å¤„ç†è‡ªå®šä¹‰æ³¨è§£**

#### 1. **åå°„æ–¹å¼ï¼ˆåŸºç¡€ï¼‰**

åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„è§£ææ³¨è§£ä¿¡æ¯ï¼Œé€‚ç”¨äºç®€å•åœºæ™¯ï¼š

```
public class AnnotationProcessor {
    public static void process(Object obj) {
        for (Method method : obj.getClass().getDeclaredMethods()) {
            if (method.isAnnotationPresent(LogExecution.class)) {
                LogExecution annotation = method.getAnnotation(LogExecution.class);
                System.out.println("Method: " + method.getName() + ", Timeout: " + annotation.timeout());
            }
        }
    }
}
```

**é€‚ç”¨åœºæ™¯**ï¼šå•æ¬¡åˆå§‹åŒ–æ£€æŸ¥ã€ç®€å•é…ç½®è¯»å–[2,7](@ref)ã€‚

#### 2. **AOP æ–¹å¼ï¼ˆæ¨èï¼‰**

ç»“åˆ Spring AOP å®ç°æ— ä¾µå…¥å¼é€»è¾‘å¢å¼ºï¼ˆå¦‚æ—¥å¿—ã€æƒé™æ§åˆ¶ï¼‰ï¼š

```
@Aspect
@Component
public class LogAspect {
    // æ‹¦æˆªå¸¦ @LogExecution æ³¨è§£çš„æ–¹æ³•
    @Around("@annotation(LogExecution)")
    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {
        long start = System.currentTimeMillis();
        Object result = joinPoint.proceed(); // æ‰§è¡ŒåŸæ–¹æ³•
        long duration = System.currentTimeMillis() - start;
        System.out.println("Method executed in: " + duration + "ms");
        return result;
    }
}
```

**å…³é”®é…ç½®**ï¼šåœ¨ Spring Boot ä¸­å¯ç”¨ AOP æ”¯æŒï¼š

```
@SpringBootApplication
@EnableAspectJAutoProxy // å¯ç”¨ AspectJ è‡ªåŠ¨ä»£ç†
public class Application { ... }
```

[1,5](@ref)

------

### ğŸ¯ **ä¸‰ã€å¸¸è§åº”ç”¨åœºæ™¯**

1. **æ—¥å¿—ä¸ç›‘æ§**
   æ ‡è®°æ–¹æ³•å¹¶è‡ªåŠ¨è®°å½•æ‰§è¡Œæ—¶é—´æˆ–å‚æ•°ï¼ˆå¦‚ `@LogExecution`ï¼‰[4,8](@ref)ã€‚
2. **æƒé™æ§åˆ¶**
   å®šä¹‰ `@RequiresRole("ADMIN")`ï¼Œé€šè¿‡ AOP åœ¨æ–¹æ³•æ‰§è¡Œå‰æ ¡éªŒç”¨æˆ·æƒé™[7,8](@ref)ã€‚
3. **æ•°æ®æ ¡éªŒ**
   ç»“åˆ Hibernate Validator å®ç°è‡ªå®šä¹‰æ ¡éªŒæ³¨è§£ï¼ˆå¦‚ `@ValidEmail`ï¼‰[6,8](@ref)ã€‚
4. **è‡ªåŠ¨å¡«å……å­—æ®µ**
   æ ‡è®°å®ä½“ç±»å­—æ®µï¼Œåœ¨ä¿å­˜å‰è‡ªåŠ¨ç”Ÿæˆ ID æˆ–è®¾ç½®é»˜è®¤å€¼ï¼ˆå¦‚ `@AutoGenerateId`ï¼‰[5](@ref)ã€‚
5. **API æ–‡æ¡£ç”Ÿæˆ**
   ä¸º Swagger æ‰©å±•è‡ªå®šä¹‰æ³¨è§£ï¼Œå¢å¼º API æè¿°ä¿¡æ¯[4](@ref)ã€‚

------

### âš ï¸ **å››ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ**

1. 

   æ€§èƒ½ä¼˜åŒ–

   

   - é¿å…é¢‘ç¹åå°„ï¼šç¼“å­˜æ³¨è§£è§£æç»“æœï¼ˆå¦‚ä½¿ç”¨ `ConcurrentHashMap`ï¼‰ã€‚
   - AOP åˆ‡ç‚¹ç²’åº¦ï¼šå°½é‡ç²¾ç¡®é™å®šæ‹¦æˆªèŒƒå›´ï¼ˆå¦‚ `@annotation(XXX)` ä¼˜äº `execution(*.*(..))`ï¼‰[7](@ref)ã€‚

2. 

   æ³¨è§£è®¾è®¡åŸåˆ™

   

   - å•ä¸€èŒè´£ï¼šæ¯ä¸ªæ³¨è§£è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚
   - æ˜ç¡®é»˜è®¤å€¼ï¼šä¸ºå¯é€‰å‚æ•°æä¾›åˆç†çš„é»˜è®¤å€¼ï¼ˆå¦‚ `default ""`ï¼‰ã€‚
   - å‘½åè§„èŒƒï¼šä½¿ç”¨åŠ¨è¯æˆ–åè¯çŸ­è¯­ï¼ˆå¦‚ `@Cacheable`ï¼‰[7](@ref)ã€‚

3. 

   é¿å…æ»¥ç”¨

   

   - ä¼˜å…ˆä½¿ç”¨æ¡†æ¶å†…ç½®æ³¨è§£ï¼ˆå¦‚ Spring çš„ `@Transactional`ï¼‰ã€‚
   - ä»…åœ¨éœ€è¦è§£è€¦é‡å¤é€»è¾‘æˆ–æ‰©å±•æ¡†æ¶æ—¶å¼•å…¥è‡ªå®šä¹‰æ³¨è§£[7](@ref)ã€‚

------

### ğŸ’¡ **äº”ã€å®æˆ˜ç¤ºä¾‹ï¼šå®ç°æƒé™æ§åˆ¶æ³¨è§£**

1. **å®šä¹‰æ³¨è§£**ï¼š

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface RequiresRole {
    String[] roles() default {"USER"};
}
```

1. **AOP å¤„ç†å™¨**ï¼š

```
@Aspect
@Component
public class SecurityAspect {
    @Before("@annotation(RequiresRole)")
    public void checkRole(JoinPoint joinPoint) {
        RequiresRole annotation = ((MethodSignature) joinPoint.getSignature())
                                .getMethod().getAnnotation(RequiresRole.class);
        String[] requiredRoles = annotation.roles();
        // ä»ä¼šè¯ä¸­è·å–å½“å‰ç”¨æˆ·è§’è‰²å¹¶æ ¡éªŒ
        if (!hasRequiredRole(currentUser, requiredRoles)) {
            throw new AccessDeniedException("Permission denied");
        }
    }
}
```

1. **ä½¿ç”¨æ³¨è§£**ï¼š

```
@RestController
public class AdminController {
    @RequiresRole(roles = {"ADMIN"})
    @DeleteMapping("/user/{id}")
    public void deleteUser(@PathVariable String id) { ... }
}
```

[4,7](@ref)

------

### ğŸ“Œ **æ€»ç»“**

- **æ ¸å¿ƒæ­¥éª¤**ï¼šå®šä¹‰æ³¨è§£ â†’ é€‰æ‹©å¤„ç†æ–¹å¼ï¼ˆåå°„/AOPï¼‰â†’ åº”ç”¨æ³¨è§£ â†’ å®ç°åŠŸèƒ½é€»è¾‘ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šæ—¥å¿—ã€æƒé™ã€æ ¡éªŒã€è‡ªåŠ¨åŒ–é…ç½®ç­‰éœ€è§£è€¦é‡å¤ä»£ç çš„åœºæ™¯ã€‚
- **é¿å‘æŒ‡å—**ï¼šæ§åˆ¶æ³¨è§£ç²’åº¦ã€ä¼˜å…ˆé€‰æ‹©è¿è¡Œæ—¶æ³¨è§£ï¼ˆ`RUNTIME`ï¼‰ã€é¿å…è¿‡åº¦ä¾èµ–åå°„æ€§èƒ½ã€‚

é€šè¿‡åˆç†è®¾è®¡è‡ªå®šä¹‰æ³¨è§£ï¼Œå¯æ˜¾è‘—æå‡ä»£ç å¯ç»´æŠ¤æ€§å’Œæ¡†æ¶æ‰©å±•æ€§ã€‚å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ç»“åˆ Spring AOP å’Œåå°„æœºåˆ¶çµæ´»å®ç°éœ€æ±‚[1,3,7](@ref)ã€‚

## .class æ–‡ä»¶ & å¯¹è±¡

åœ¨Javaä¸­ï¼Œ**.classæ–‡ä»¶**å’Œ**Classå¯¹è±¡**åˆ†åˆ«ä»£è¡¨ç±»åœ¨ç£ç›˜å­˜å‚¨å’Œè¿è¡Œæ—¶å†…å­˜ä¸­çš„ä¸¤ç§å½¢æ€ï¼ŒäºŒè€…å…³ç³»ç´§å¯†ä½†è§’è‰²ä¸åŒã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒè¦ç‚¹è§£æï¼š

------

### ğŸ” ä¸€ã€æœ¬è´¨ä¸å®šä½

1. **`.class`æ–‡ä»¶**
   - **é™æ€å­˜å‚¨**ï¼šæ˜¯Javaç¼–è¯‘å™¨ï¼ˆ`javac`ï¼‰å°†æºä»£ç ï¼ˆ`.java`æ–‡ä»¶ï¼‰ç¼–è¯‘åç”Ÿæˆçš„**äºŒè¿›åˆ¶æ–‡ä»¶**ï¼Œå­˜å‚¨åœ¨ç£ç›˜ä¸Š[6,7](@ref)ã€‚
   - **å†…å®¹ç»“æ„**ï¼šéµå¾ªä¸¥æ ¼çš„æ ¼å¼ï¼ˆå¦‚é­”æ•° `0xCAFEBABE`ã€ç‰ˆæœ¬å·ã€å¸¸é‡æ± ã€å­—æ®µè¡¨ã€æ–¹æ³•è¡¨ç­‰ï¼‰ï¼Œæè¿°ç±»çš„æˆå‘˜å˜é‡ã€æ–¹æ³•ç­¾åã€ç»§æ‰¿å…³ç³»ç­‰å…ƒæ•°æ®ï¼Œä½†ä¸åŒ…å«è¿è¡Œæ—¶çš„å†…å­˜å¸ƒå±€ä¿¡æ¯[6,8](@ref)ã€‚
2. **Classå¯¹è±¡**
   - **åŠ¨æ€è¿è¡Œæ—¶å¯¹è±¡**ï¼šæ˜¯JVMåœ¨**ç±»åŠ è½½é˜¶æ®µ**ï¼ˆé€šè¿‡ç±»åŠ è½½å™¨ï¼‰è§£æ`.class`æ–‡ä»¶åï¼Œåœ¨å †å†…å­˜ä¸­åˆ›å»ºçš„`java.lang.Class`ç±»çš„å®ä¾‹[1,2](@ref)ã€‚
   - **åŠŸèƒ½**ï¼šä½œä¸ºç±»çš„è¿è¡Œæ—¶ç±»å‹è¡¨ç¤ºï¼ˆRTTIï¼‰ï¼Œå­˜å‚¨ç±»çš„å…ƒä¿¡æ¯ï¼ˆå¦‚æ„é€ æ–¹æ³•ã€å­—æ®µã€æ–¹æ³•ç­‰ï¼‰ï¼Œæ”¯æŒåå°„æ“ä½œï¼ˆå¦‚è·å–æ–¹æ³•ã€åˆ›å»ºå®ä¾‹ï¼‰[3,10](@ref)ã€‚

------

### ğŸ”„ äºŒã€å…³ç³»ï¼šä»æ–‡ä»¶åˆ°å¯¹è±¡çš„è½¬åŒ–è¿‡ç¨‹

1. **ç±»åŠ è½½è§¦å‘**
   - å½“JVMé¦–æ¬¡ä½¿ç”¨ä¸€ä¸ªç±»ï¼ˆå¦‚`new`åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨é™æ€æ–¹æ³•ï¼‰æ—¶ï¼Œç±»åŠ è½½å™¨ï¼ˆå¦‚`ClassLoader`ï¼‰æ ¹æ®å…¨é™å®šåæŸ¥æ‰¾å¹¶åŠ è½½`.class`æ–‡ä»¶[10,11](@ref)ã€‚
   - è‹¥æœªåŠ è½½ï¼Œåˆ™é€šè¿‡`defineClass()`æ–¹æ³•è§£æ`.class`æ–‡ä»¶ï¼Œç”Ÿæˆå¯¹åº”çš„Classå¯¹è±¡[2,8](@ref)ã€‚
2. **å†…å­˜åˆ†é…ä¸åˆå§‹åŒ–**
   - Classå¯¹è±¡åœ¨å †ä¸­åˆ›å»ºï¼ŒåŒ…å«æŒ‡å‘æ–¹æ³•åŒºç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ˆKlass Wordï¼‰[1,3](@ref)ã€‚
   - ç±»åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œé™æ€ä»£ç å—ï¼ˆ`static{}`ï¼‰å’Œé™æ€å˜é‡èµ‹å€¼[10,11](@ref)ã€‚
3. **å®ä¾‹åŒ–ä¾èµ–**
   - åˆ›å»ºç±»çš„å®ä¾‹å¯¹è±¡æ—¶ï¼ŒJVMä¾æ®Classå¯¹è±¡ä¸­çš„ä¿¡æ¯åˆ†é…å†…å­˜ã€åˆå§‹åŒ–å­—æ®µï¼Œå¹¶è°ƒç”¨æ„é€ æ–¹æ³•[10,11](@ref)ã€‚
   - **å…³ç³»é“¾**ï¼š`.class`æ–‡ä»¶ â†’ Classå¯¹è±¡ â†’ å®ä¾‹å¯¹è±¡ï¼ˆå¦‚`new MyClass()`ï¼‰[1,3](@ref)ã€‚

------

### ğŸ“Š ä¸‰ã€æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”

| **ç»´åº¦**     | **`.class`æ–‡ä»¶**                 | **Classå¯¹è±¡**                       |
| ------------ | -------------------------------- | ----------------------------------- |
| **å­˜åœ¨å½¢å¼** | ç£ç›˜äºŒè¿›åˆ¶æ–‡ä»¶                   | å †å†…å­˜ä¸­çš„`java.lang.Class`å®ä¾‹     |
| **ç”Ÿå‘½å‘¨æœŸ** | æŒä¹…å­˜å‚¨ï¼ˆç¼–è¯‘åå³å­˜åœ¨ï¼‰         | è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºï¼ˆç±»åŠ è½½æ—¶ç”Ÿæˆï¼‰      |
| **å†…å®¹**     | ç±»ç»“æ„å…ƒæ•°æ®ï¼ˆå­—æ®µã€æ–¹æ³•ç­¾åç­‰ï¼‰ | è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼ˆæ”¯æŒåå°„æ“ä½œï¼‰      |
| **ç”Ÿæˆæ–¹å¼** | ç”±`javac`ç¼–è¯‘ç”Ÿæˆ                | ç”±JVMç±»åŠ è½½å™¨è§£æ`.class`æ–‡ä»¶ååˆ›å»º |
| **å”¯ä¸€æ€§**   | æ¯ä¸ªç±»å¯¹åº”ä¸€ä¸ªæ–‡ä»¶               | æ¯ä¸ªç±»åœ¨JVMä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªClasså¯¹è±¡  |

------

### ğŸ’ å››ã€æ€»ç»“ï¼šåä½œä¸ä¾èµ–

- **å•å‘ä¾èµ–**ï¼šClasså¯¹è±¡æ˜¯`.class`æ–‡ä»¶åœ¨JVMä¸­çš„è¿è¡Œæ—¶æ˜ å°„ï¼Œæ²¡æœ‰`.class`æ–‡ä»¶åˆ™æ— æ³•ç”ŸæˆClasså¯¹è±¡[2,8](@ref)ã€‚

- 

  åŠŸèƒ½äº’è¡¥

  ï¼š

  - `.class`æ–‡ä»¶æä¾›**é™æ€ç±»å®šä¹‰**ï¼Œç¡®ä¿è·¨å¹³å°ä¸€è‡´æ€§ï¼ˆâ€œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œâ€ï¼‰[6,7](@ref)ã€‚
  - Classå¯¹è±¡æä¾›**åŠ¨æ€è¿è¡Œæ—¶èƒ½åŠ›**ï¼Œæ”¯æ’‘åå°„ã€å®ä¾‹åˆ›å»ºã€å¤šæ€ç­‰ç‰¹æ€§[1,10](@ref)ã€‚

- **å®ä¾‹åŒ–æ¡¥æ¢**ï¼šé€šè¿‡`newInstance()`æˆ–æ„é€ æ–¹æ³•ï¼ŒClasså¯¹è±¡å°†ç±»æè¿°è½¬åŒ–ä¸ºå¯æ“ä½œçš„å†…å­˜å®ä¾‹[2,9](@ref)ã€‚

> ğŸ’ **ç®€å•æ¥è¯´**ï¼š`.class`æ–‡ä»¶æ˜¯ç±»çš„â€œè®¾è®¡å›¾çº¸â€ï¼ŒClasså¯¹è±¡æ˜¯JVMæŒ‰å›¾çº¸æ–½å·¥åç”Ÿæˆçš„â€œå·¥å‚æ¨¡å‹â€ï¼Œè€Œå®ä¾‹å¯¹è±¡åˆ™æ˜¯å·¥å‚ç”Ÿäº§çš„å…·ä½“â€œäº§å“â€ã€‚

## ClassPath & Qualified Name

ç±»è·¯å¾„ï¼ˆClasspathï¼‰å’Œç±»çš„å®Œå…¨é™å®šåï¼ˆFully Qualified Nameï¼‰æ˜¯Javaä¸­ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œåˆ†åˆ«ç”¨äº**å®šä½ç±»æ–‡ä»¶**å’Œ**å”¯ä¸€æ ‡è¯†ç±»**ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š

------

### ğŸ“ **ä¸€ã€ç±»è·¯å¾„ï¼ˆClasspathï¼‰**

#### **1. å®šä¹‰ä¸ä½œç”¨**

- **æœ¬è´¨**ï¼šClasspath æ˜¯ JVM ç”¨äºæŸ¥æ‰¾ç±»æ–‡ä»¶ï¼ˆ`.class`ï¼‰å’Œèµ„æºæ–‡ä»¶ï¼ˆå¦‚é…ç½®æ–‡ä»¶ã€JARåŒ…ï¼‰çš„è·¯å¾„é›†åˆ[1,2,4](@ref)ã€‚

- 

  ä½œç”¨

  ï¼š

  - æŒ‡å¯¼ JVM åœ¨ç¼–è¯‘æˆ–è¿è¡Œæ—¶åŠ è½½ç”¨æˆ·ç¨‹åºä¾èµ–çš„ç±»å’Œåº“ã€‚
  - ç®¡ç†é¡¹ç›®å†…éƒ¨ç±»ä¸ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚é€šè¿‡ `lib/*.jar` å¼•å…¥å¤–éƒ¨ä¾èµ–ï¼‰[3,11](@ref)ã€‚

#### **2. é…ç½®æ–¹å¼**

| **æ–¹æ³•**            | **ç¤ºä¾‹**                                                     | **é€‚ç”¨åœºæ™¯**                            |
| ------------------- | ------------------------------------------------------------ | --------------------------------------- |
| **ç¯å¢ƒå˜é‡**        | Windows: `set CLASSPATH=.;C:\lib\*.jar` Linux: `export CLASSPATH=.:/lib/*.jar` | å…¨å±€é…ç½®ï¼Œå½±å“æ‰€æœ‰Javaç¨‹åº              |
| **å‘½ä»¤è¡Œå‚æ•°**      | `java -cp .;lib/*.jar MyClass` `javac -classpath .;lib/*.jar MyClass.java` | ä¸´æ—¶æŒ‡å®šï¼Œä¼˜å…ˆçº§é«˜äºç¯å¢ƒå˜é‡[2,4](@ref) |
| **IDEé…ç½®**         | Eclipse: `Build Path > Libraries` IntelliJ: `Project Structure > Modules` | å¼€å‘é˜¶æ®µä¾èµ–ç®¡ç†                        |
| **MANIFEST.MFæ–‡ä»¶** | `Class-Path: lib/some-library.jar`                           | å¯æ‰§è¡ŒJARåŒ…çš„ä¾èµ–å£°æ˜[3](@ref)          |

> **é»˜è®¤è¡Œä¸º**ï¼š
>
> - JDK 5.0+ è‡ªåŠ¨åŒ…å«**å½“å‰ç›®å½•ï¼ˆ`.`ï¼‰** å’Œ **`JDK_HOME/lib`** ä¸‹çš„JARæ–‡ä»¶ï¼ˆå¦‚ `rt.jar`ï¼‰[1,2](@ref)ã€‚
> - è‹¥æœªæ˜¾å¼é…ç½®ï¼ŒClasspath é»˜è®¤ä¸ºå½“å‰ç›®å½•ï¼ˆ`.`ï¼‰[4](@ref)ã€‚

#### **3. ç±»åŠ è½½é¡ºåºä¸å†²çª**

- 

  æœç´¢é¡ºåº

  ï¼šJVM æŒ‰ Classpath ä¸­è·¯å¾„çš„

  å£°æ˜é¡ºåº

  æŸ¥æ‰¾ç±»æ–‡ä»¶ï¼Œæ‰¾åˆ°å³åœæ­¢ï¼Œåç»­åŒåç±»è¢«å¿½ç•¥

  9,11

  ã€‚

  ```
  java -cp lib/A.jar:lib/B.jar Main  # ä¼˜å…ˆåŠ è½½ A.jar ä¸­çš„ç±»
  ```

- 

  å†²çªè§£å†³

  ï¼š

  - å¤šä¸ªJARåŒ…å«åŒåç±»æ—¶ï¼Œä¾èµ–è·¯å¾„é¡ºåºã€‚
  - ä½¿ç”¨æ„å»ºå·¥å…·ï¼ˆå¦‚ Maven/Gradleï¼‰ç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼Œæˆ–é€šè¿‡ `<exclusions>` æ’é™¤å†²çªåŒ…[3,9](@ref)ã€‚

#### **4. ç±»åŠ è½½å™¨ä¸Classpathçš„å…³ç³»**

- 

  åŒäº²å§”æ´¾æ¨¡å‹

  ï¼š

  1. **Bootstrap ClassLoader**ï¼šåŠ è½½ `JRE_HOME/lib` æ ¸å¿ƒç±»ï¼ˆå¦‚ `rt.jar`ï¼‰ã€‚
  2. **Extension ClassLoader**ï¼šåŠ è½½ `JRE_HOME/lib/ext` æ‰©å±•ç±»ã€‚
  3. **Application ClassLoader**ï¼šåŠ è½½ Classpath ä¸­çš„ç”¨æˆ·ç±»[10,11](@ref)ã€‚

- 

  è‡ªå®šä¹‰ç±»åŠ è½½å™¨

  ï¼š

  - Tomcat ä¸ºæ¯ä¸ª Web åº”ç”¨åˆ›å»ºç‹¬ç«‹çš„ `WebAppClassLoader`ï¼Œéš”ç¦»ä¸åŒåº”ç”¨çš„ Classpathï¼Œé¿å…å†²çª[5,10](@ref)ã€‚

------

### ğŸ”¤ **äºŒã€ç±»çš„å®Œå…¨é™å®šåï¼ˆFully Qualified Nameï¼‰**

#### **1. å®šä¹‰ä¸ç»“æ„**

- **æ ¼å¼**ï¼š`åŒ…å.ç±»å`ï¼ˆå¦‚ `java.lang.String`ï¼‰ï¼ŒåŒ…åä»¥ç‚¹å·åˆ†éš”å±‚çº§[7,8](@ref)ã€‚

- 

  ä½œç”¨

  ï¼š

  - **å”¯ä¸€æ ‡è¯†ç±»**ï¼šé¿å…ä¸åŒåŒ…ä¸‹åŒåç±»çš„å†²çªï¼ˆå¦‚ `com.util.Date` ä¸ `java.util.Date`ï¼‰ã€‚
  - **ç²¾å‡†å®šä½ç±»**ï¼šåœ¨æºç ä¸­é€šè¿‡ `import` å¼•å…¥ï¼Œæˆ–åœ¨åå°„ä¸­é€šè¿‡ `Class.forName()` åŠ è½½[7,8](@ref)ã€‚

#### **2. Classæ–‡ä»¶ä¸­çš„è¡¨ç¤º**

- **è·¯å¾„è½¬æ¢**ï¼šæºç ä¸­çš„ `java.lang.Object` â†’ Classæ–‡ä»¶ä¸­çš„ `java/lang/Object.class`ï¼ˆç‚¹å·æ›¿æ¢ä¸ºæ–œæ ï¼‰[7](@ref)ã€‚

- 

  æè¿°ç¬¦å¼•ç”¨

  ï¼š

  - å­—æ®µç±»å‹ï¼š`Ljava/lang/Object;`ï¼ˆ`L` + å…¨é™å®šå + `;`ï¼‰ã€‚
  - æ–¹æ³•ç­¾åï¼š`(ILjava/lang/String;)V`ï¼ˆå‚æ•°ç±»å‹ + è¿”å›å€¼ç±»å‹ï¼‰[7](@ref)ã€‚

------

### âš™ï¸ **ä¸‰ã€Classpath ä¸å®Œå…¨é™å®šåçš„ååŒå·¥ä½œ**

1. 

   ç±»åŠ è½½æµç¨‹

   ï¼š

   - JVM å°†å®Œå…¨é™å®šåè½¬æ¢ä¸ºæ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ `com/example/MyClass.class`ï¼‰ã€‚
   - æŒ‰ Classpath é¡ºåºæ‰«æç›®å½•æˆ–JARåŒ…ï¼Œå®šä½è¯¥è·¯å¾„çš„å­—èŠ‚ç æ–‡ä»¶[10,11](@ref)ã€‚

2. 

   èµ„æºåŠ è½½

   ï¼š

   ```
   // ä»Classpathæ ¹ç›®å½•åŠ è½½èµ„æº
   InputStream is = getClass().getResourceAsStream("/config.properties"); 
   ```

3. 

   åŠ¨æ€åŠ è½½åœºæ™¯

   ï¼š

   - **çƒ­éƒ¨ç½²**ï¼šè‡ªå®šä¹‰ç±»åŠ è½½å™¨ç›‘å¬Classpathå˜åŒ–ï¼Œé‡æ–°åŠ è½½ä¿®æ”¹åçš„ç±»[10](@ref)ã€‚

------

### âš ï¸ **å››ã€å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ**

| **é—®é¢˜**                 | **åŸå› **                       | **è§£å†³æ–¹æ¡ˆ**                            |
| ------------------------ | ------------------------------ | --------------------------------------- |
| `ClassNotFoundException` | ClasspathæœªåŒ…å«ç›®æ ‡ç±»          | æ£€æŸ¥è·¯å¾„æ˜¯å¦é—æ¼æˆ–æ‹¼å†™é”™è¯¯              |
| `NoClassDefFoundError`   | ç¼–è¯‘æ—¶å­˜åœ¨ç±»ï¼Œä½†è¿è¡Œæ—¶ç¼ºå¤±ä¾èµ– | ç¡®ä¿æ‰€æœ‰ä¾èµ–JARåœ¨Classpathä¸­[3,9](@ref) |
| ç±»å†²çª                   | å¤šä¸ªJARåŒ…å«åŒåç±»              | è°ƒæ•´Classpathé¡ºåºæˆ–æ’é™¤å†²çªä¾èµ–         |

**æœ€ä½³å®è·µ**ï¼š

1. **é¿å…å…¨å±€CLASSPATH**ï¼šä¼˜å…ˆç”¨ `-cp` å‘½ä»¤è¡Œå‚æ•°ï¼Œé˜²æ­¢ç¯å¢ƒå˜é‡æ±¡æŸ“[4,11](@ref)ã€‚
2. **ä½¿ç”¨æ„å»ºå·¥å…·**ï¼šMaven/Gradle è‡ªåŠ¨ç®¡ç†ä¾èµ–å’ŒClasspath[3](@ref)ã€‚
3. èµ„æºè·¯å¾„è§„èŒƒï¼š
   - é…ç½®æ–‡ä»¶æ”¾ `src/main/resources`ï¼Œç¼–è¯‘åå¹¶å…¥Classpathæ ¹ç›®å½•ã€‚

------

### ğŸ’ **æ€»ç»“**

- **Classpath**ï¼šJVMçš„â€œå¯¼èˆªåœ°å›¾â€ï¼Œå†³å®šç±»æ–‡ä»¶çš„æœç´¢èŒƒå›´ä¸é¡ºåºã€‚
- **å®Œå…¨é™å®šå**ï¼šç±»çš„â€œèº«ä»½è¯å·â€ï¼Œç¡®ä¿å…¨å±€å”¯ä¸€æ€§å¹¶æŒ‡å¯¼è·¯å¾„è½¬æ¢ã€‚
  ä¸¤è€…ååŒæ„å»ºäº†Javaç±»åŠ è½½çš„æ ¸å¿ƒæœºåˆ¶ï¼šâ€‹**å®Œå…¨é™å®šåå®šä½ç±»èº«ä»½ â†’ Classpathå¯¼èˆªç±»ä½ç½® â†’ ç±»åŠ è½½å™¨åŠ è½½å­—èŠ‚ç **ã€‚æ·±å…¥ç†è§£å…¶åŸç†ï¼Œå¯æœ‰æ•ˆè§£å†³ä¾èµ–å†²çªã€èµ„æºåŠ è½½ç­‰å¼€å‘é—®é¢˜[1,7,10](@ref)ã€‚

## è·¯å¾„æ‰«æ

åœ¨JVMä¸­å®ç°è·¯å¾„æ‰«æï¼ˆå³åŠ¨æ€å‘ç°ç±»ã€èµ„æºæˆ–æ³¨è§£ï¼‰ä¸»è¦ä¾èµ–ç±»åŠ è½½æœºåˆ¶ã€åå°„APIåŠç¬¬ä¸‰æ–¹åº“ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒå®ç°æ–¹å¼åŠåŸç†ï¼š

------

### âš™ï¸ **ä¸€ã€åŸºäºåŸç”ŸAPIçš„æ‰«æï¼ˆClassLoader + åå°„ï¼‰**

#### **1. ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰çš„æ ¸å¿ƒä½œç”¨**

- **ç±»åŠ è½½å±‚æ¬¡**ï¼š
  JVMé€šè¿‡å¤šçº§ç±»åŠ è½½å™¨ï¼ˆBootstrapâ†’Extensionâ†’Applicationâ†’Customï¼‰æŒ‰åŒäº²å§”æ´¾æ¨¡å‹åŠ è½½ç±»[2,3](@ref)ã€‚

  - **Bootstrap**ï¼šåŠ è½½`JRE/lib`æ ¸å¿ƒç±»ï¼ˆå¦‚`java.*`ï¼‰ã€‚
  - **Application**ï¼šåŠ è½½`classpath`ä¸­çš„ç”¨æˆ·ç±»ã€‚
  - **Custom**ï¼šç”¨æˆ·è‡ªå®šä¹‰åŠ è½½å™¨ï¼ˆå¦‚æ‰«æç‰¹å®šç›®å½•ï¼‰[3](@ref)ã€‚

- **èµ„æºå®šä½æµç¨‹**ï¼š
  è°ƒç”¨`ClassLoader.getResources(String path)`å¯è·å–ç±»è·¯å¾„ä¸‹èµ„æºçš„URLæšä¸¾ã€‚ä¾‹å¦‚æ‰«æåŒ…å†…æ‰€æœ‰ç±»ï¼š

  ```
  Enumeration<URL> resources = classLoader.getResources("com/example");
  while (resources.hasMoreElements()) {
      URL url = resources.nextElement();
      File dir = new File(url.getFile()); // è½¬æ¢ä¸ºæ–‡ä»¶è·¯å¾„
  }
  ```

  æ­¤æ–¹æ³•å°†åŒ…åè½¬ä¸ºè·¯å¾„æ ¼å¼ï¼ˆ`.`â†’`/`ï¼‰ï¼Œéå†ç±»è·¯å¾„åŒ¹é…çš„ç›®å½•æˆ–JARæ–‡ä»¶[6](@ref)ã€‚

#### **2. åå°„å®ç°ç±»åè§£æ**

è·å–èµ„æºè·¯å¾„åï¼Œéœ€è§£æå…¶ä¸­çš„`.class`æ–‡ä»¶ï¼š

```
File[] files = dir.listFiles();
for (File file : files) {
    if (file.getName().endsWith(".class")) {
        String className = packageName + '.' + file.getName().replace(".class", "");
        Class<?> clazz = Class.forName(className); // åŠ è½½ç±»
    }
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- éœ€å¤„ç†åµŒå¥—ç›®å½•ï¼ˆé€’å½’æ‰«æï¼‰[6](@ref)ã€‚
- ç›´æ¥åŠ è½½ç±»å¯èƒ½è§¦å‘é™æ€åˆå§‹åŒ–ï¼Œè‹¥ä»…éœ€å…ƒæ•°æ®å¯æ”¹ç”¨`ClassLoader.loadClass()`ï¼ˆä¸åˆå§‹åŒ–ï¼‰[6](@ref)ã€‚

------

### ğŸ“¦ **äºŒã€JARæ–‡ä»¶å†…çš„æ‰«æ**

å¯¹JARä¸­çš„ç±»æ‰«æéœ€ç‰¹æ®Šå¤„ç†ï¼š

```
JarFile jarFile = new JarFile("path/to/lib.jar");
Enumeration<JarEntry> entries = jarFile.entries();
while (entries.hasMoreElements()) {
    JarEntry entry = entries.nextElement();
    if (entry.getName().startsWith("com/example/") && entry.getName().endsWith(".class")) {
        String className = entry.getName().replace("/", ".").replace(".class", "");
        // è¿›ä¸€æ­¥åŠ è½½æˆ–è®°å½•ç±»å
    }
}
```

æ­¤æ–¹æ³•ç›´æ¥éå†JARæ¡ç›®ï¼Œé¿å…è§£å‹æ–‡ä»¶[6](@ref)ã€‚

------

### âš¡ï¸ **ä¸‰ã€ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ä¼˜åŒ–æ‰«æ**

åŸç”ŸAPIè¾ƒç¹çï¼Œæ¨èç¬¬ä¸‰æ–¹åº“ï¼š

#### **1. Reflectionsåº“**

- **é¢„å»ºç´¢å¼•**ï¼šæ‰«æç±»è·¯å¾„å¹¶ç¼“å­˜ç±»/æ³¨è§£å…ƒæ•°æ®ï¼Œåç»­æŸ¥è¯¢æå¿«[6](@ref)ã€‚

- 

  ç¤ºä¾‹ä»£ç 

  ï¼š

  ```
  Reflections reflections = new Reflections("com.example", new SubTypesScanner());
  Set<Class<?>> classes = reflections.getSubTypesOf(Object.class); // è·å–æ‰€æœ‰ç±»
  Set<Class<?>> controllers = reflections.getTypesAnnotatedWith(RestController.class); // å¸¦æ³¨è§£çš„ç±»
  ```

#### **2. ClassGraphåº“**

- **ä¼˜åŠ¿**ï¼šæ”¯æŒæ¨¡å—åŒ–ç³»ç»Ÿï¼ˆJPMSï¼‰ï¼Œæ‰«æé€Ÿåº¦æ›´å¿«ï¼ŒAPIæ›´ç®€æ´[6](@ref)ã€‚

- 

  ç¤ºä¾‹

  ï¼š

  ```
  try (ScanResult scan = new ClassGraph().acceptPackages("com.example").scan()) {
      List<ClassInfo> classes = scan.getAllClasses(); // æ‰€æœ‰ç±»ä¿¡æ¯
  }
  ```

------

### âš ï¸ **å››ã€å…³é”®é—®é¢˜ä¸ä¼˜åŒ–ç­–ç•¥**

1. **æ€§èƒ½ç“¶é¢ˆ**

   - **é¦–æ¬¡æ‰«ææ…¢**ï¼šå…¨é‡éå†ç±»è·¯å¾„ï¼ˆå°¤å…¶å¤§å‹é¡¹ç›®ï¼‰ã€‚

   - 

     ä¼˜åŒ–æ–¹æ¡ˆ

     ï¼š

     - ä½¿ç”¨Reflectionsçš„ç¼“å­˜æœºåˆ¶[6](@ref)ã€‚
     - é™å®šæ‰«æèŒƒå›´ï¼ˆå¦‚ç²¾ç¡®åŒ…è·¯å¾„ï¼‰[6](@ref)ã€‚

2. **å®‰å…¨ä¸å…¼å®¹æ€§**

   - **æ¨¡å—åŒ–é™åˆ¶**ï¼šJava 9+éœ€åœ¨`module-info`ä¸­å¼€æ”¾åŒ…ï¼ˆ`opens package`ï¼‰[6](@ref)ã€‚
   - **ç±»åˆå§‹åŒ–é£é™©**ï¼šé¿å…æ‰«ææœŸè§¦å‘é™æ€ä»£ç å—ï¼ˆç”¨`ClassLoader.loadClass()`æ›¿ä»£`Class.forName()`ï¼‰[6](@ref)ã€‚

3. **éƒ¨ç½²ç¯å¢ƒå·®å¼‚**

   - IDEä¸­`classpath`åŒ…å«æºç ç›®å½•ï¼Œè€Œç”Ÿäº§ç¯å¢ƒåªæœ‰ç¼–è¯‘åçš„JARï¼Œéœ€æµ‹è¯•å¤šç¯å¢ƒå…¼å®¹æ€§[6](@ref)ã€‚

------

### ğŸ” **äº”ã€æŠ€æœ¯é€‰å‹å¯¹æ¯”**

| **æ–¹æ³•**                   | **é€‚ç”¨åœºæ™¯**           | **æ€§èƒ½**         | **å¤æ‚åº¦** |
| -------------------------- | ---------------------- | ---------------- | ---------- |
| **åŸç”ŸClassLoader**        | ç®€å•éœ€æ±‚ã€æ— ç¬¬ä¸‰æ–¹ä¾èµ– | ä½ï¼ˆéœ€æ‰‹åŠ¨éå†ï¼‰ | é«˜         |
| **Reflections/ClassGraph** | æ¡†æ¶å¼€å‘ã€é¢‘ç¹æ‰«æ     | é«˜ï¼ˆç´¢å¼•ç¼“å­˜ï¼‰   | ä½         |
| **JARç›´æ¥è§£æ**            | æ‰«æå¤–éƒ¨ä¾èµ–åº“         | ä¸­               | ä¸­         |

> ğŸ’¡ **å»ºè®®**ï¼š
>
> - å°å‹å·¥å…· â†’ åŸç”ŸAPIï¼ˆè½»é‡ï¼‰[6](@ref)ã€‚
> - ä¼ä¸šçº§æ¡†æ¶ â†’ Reflections/ClassGraphï¼ˆé«˜æ•ˆç¨³å®šï¼‰[6](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

JVMè·¯å¾„æ‰«æçš„æœ¬è´¨æ˜¯**åˆ©ç”¨ç±»åŠ è½½å™¨å®šä½èµ„æº+åå°„è§£æå…ƒæ•°æ®**ã€‚ä¼˜åŒ–æ–¹å‘åŒ…æ‹¬ï¼š

1. é€šè¿‡**åŒäº²å§”æ´¾æ¨¡å‹**æ§åˆ¶åŠ è½½èŒƒå›´[2,3](@ref)ï¼›
2. ç»“åˆ**ç¼“å­˜æœºåˆ¶**ï¼ˆå¦‚Reflectionsï¼‰å‡å°‘IOå¼€é”€[6](@ref)ï¼›
3. é€‚é…**æ¨¡å—åŒ–ä¸å®‰å…¨ç­–ç•¥**é¿å…è¿è¡Œæ—¶å¼‚å¸¸ã€‚
   æ·±å…¥ç†è§£ç±»åŠ è½½æµç¨‹ï¼Œèƒ½é«˜æ•ˆå®ç°æ’ä»¶åŒ–ã€æ³¨è§£é©±åŠ¨ç­‰åŠ¨æ€æ¶æ„[3,6](@ref)ã€‚

## TypeElement

`TypeElement` æ˜¯ Java ç¼–è¯‘å™¨ APIï¼ˆ`javax.lang.model.element` åŒ…ï¼‰ä¸­çš„æ ¸å¿ƒæ¥å£ï¼Œç”¨äºè¡¨ç¤º Java ç¨‹åºä¸­çš„**ç±»ã€æ¥å£ã€æšä¸¾æˆ–æ³¨è§£ç±»å‹**ç­‰é¡¶å±‚ç»“æ„å…ƒç´ ã€‚å®ƒåœ¨ç¼–è¯‘æœŸæ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processorï¼‰ä¸­æ‰®æ¼”é‡è¦è§’è‰²ï¼Œç”¨äºè·å–å’Œå¤„ç†ç±»å‹çº§åˆ«çš„å…ƒæ•°æ®ã€‚ä»¥ä¸‹ä»å®šä¹‰ã€åŠŸèƒ½ã€åº”ç”¨åœºæ™¯åŠç¤ºä¾‹å±•å¼€è¯¦è§£ï¼š

------

### ğŸ·ï¸ ä¸€ã€**å®šä¹‰ä¸æ ¸å¿ƒç‰¹å¾**

1. **æœ¬è´¨**
   `TypeElement` æ˜¯ `Element` æ¥å£çš„å­ç±»ï¼Œä»£è¡¨ Java æºç ä¸­çš„**ç±»å‹å£°æ˜**â€‹ï¼ˆType Declarationï¼‰ï¼ŒåŒ…æ‹¬ï¼š
   - ç±»ï¼ˆ`class`ï¼‰
   - æ¥å£ï¼ˆ`interface`ï¼‰
   - æšä¸¾ï¼ˆ`enum`ï¼‰
   - æ³¨è§£ç±»å‹ï¼ˆ`@interface`ï¼‰[3,6,8](@ref)ã€‚
2. **ç¼–è¯‘æœŸå¯è§æ€§**
   - ä»…åœ¨ç¼–è¯‘é˜¶æ®µï¼ˆé€šè¿‡æ³¨è§£å¤„ç†å™¨ï¼‰å¯è®¿é—®ï¼Œ**ä¸åŒ…å«è¿è¡Œæ—¶ä¿¡æ¯**ã€‚
   - ä¸ `TypeMirror`ï¼ˆç±»å‹é•œåƒï¼‰å…³è”ï¼š`TypeElement#asType()` è¿”å›è¯¥ç±»å‹çš„ `TypeMirror`ï¼Œç”¨äºè·å–æ³›å‹ã€çˆ¶ç±»ç­‰æ·±å±‚ç±»å‹ä¿¡æ¯[3,8](@ref)ã€‚

------

### ğŸ“š äºŒã€**åœ¨å…ƒç´ ä½“ç³»ï¼ˆElement Hierarchyï¼‰ä¸­çš„ä½ç½®**

Java ç¼–è¯‘å™¨å°†æºç ç»“æ„åŒ–ä¸º `Element` æ ‘ï¼Œ`TypeElement` æ˜¯å…¶ä¸­å…³é”®èŠ‚ç‚¹ï¼š

```
graph TD
    Element --> PackageElement[åŒ…å…ƒç´ ]
    Element --> TypeElement[ç±»å‹å…ƒç´ ]
    Element --> VariableElement[å˜é‡å…ƒç´ ]
    Element --> ExecutableElement[å¯æ‰§è¡Œå…ƒç´ ]
    TypeElement --> ç±»/æ¥å£/æšä¸¾/æ³¨è§£
```

- 

  çˆ¶å­å…³ç³»

  ï¼š

  - çˆ¶çº§ï¼š`PackageElement`ï¼ˆåŒ…ï¼‰
  - å­çº§ï¼š`VariableElement`ï¼ˆå­—æ®µï¼‰ã€`ExecutableElement`ï¼ˆæ–¹æ³•/æ„é€ å™¨ï¼‰[3,8](@ref)ã€‚

------

### âš™ï¸ ä¸‰ã€**æ ¸å¿ƒåŠŸèƒ½ä¸æ–¹æ³•**

`TypeElement` æä¾›çš„æ–¹æ³•ç”¨äºæå–ç±»å‹å…ƒæ•°æ®ï¼š

1. **è·å–æ ‡è¯†ä¿¡æ¯**
   - `getSimpleName()`ï¼šç®€å•åç§°ï¼ˆå¦‚ `"String"`ï¼‰ã€‚
   - `getQualifiedName()`ï¼šå…¨é™å®šåï¼ˆå¦‚ `"java.lang.String"`ï¼‰[3,8](@ref)ã€‚
2. **ç»“æ„åˆ†æ**
   - `getEnclosedElements()`ï¼šè¿”å›è¯¥ç±»å‹çš„æ‰€æœ‰å­å…ƒç´ ï¼ˆå­—æ®µã€æ–¹æ³•ç­‰ï¼‰ã€‚
   - `getTypeParameters()`ï¼šè·å–æ³›å‹å‚æ•°ï¼ˆå¦‚ `List<T>` ä¸­çš„ `T`ï¼‰[3,8](@ref)ã€‚
3. **ä¿®é¥°ç¬¦ä¸æ³¨è§£**
   - `getModifiers()`ï¼šè¿”å› `public`ã€`abstract` ç­‰ä¿®é¥°ç¬¦ã€‚
   - `getAnnotationMirrors()`ï¼šè·å–ç±»å‹ä¸Šçš„æ³¨è§£ï¼ˆå¦‚ `@Deprecated`ï¼‰[7,8](@ref)ã€‚

------

### ğŸ” å››ã€**åº”ç”¨åœºæ™¯**

#### 1. **æ³¨è§£å¤„ç†å™¨ï¼ˆAnnotation Processorï¼‰**

- **ä»£ç ç”Ÿæˆ**ï¼šæ‰«æè¢«æ³¨è§£çš„ç±»ï¼Œç”Ÿæˆæ–°ä»£ç ï¼ˆå¦‚ Lombok ç”Ÿæˆ Getterï¼‰ã€‚
- **ç¼–è¯‘æ—¶æ ¡éªŒ**ï¼šæ£€æŸ¥æ³¨è§£ä½¿ç”¨æ˜¯å¦åˆæ³•ï¼ˆå¦‚ `@NonNull` å­—æ®µæ˜¯å¦è¢«åˆå§‹åŒ–ï¼‰[3,7](@ref)ã€‚

```
// ç¤ºä¾‹ï¼šè·å–è¢«ç‰¹å®šæ³¨è§£æ ‡è®°çš„ TypeElement
Set<? extends Element> elements = roundEnv.getElementsAnnotatedWith(MyAnnotation.class);
for (Element e : elements) {
    if (e.getKind() == ElementKind.CLASS) { // åˆ¤æ–­æ˜¯å¦ä¸ºç±»
        TypeElement typeElement = (TypeElement) e;
        // å¤„ç†ç±»ä¿¡æ¯...
    }
}
```

#### 2. **æ¡†æ¶é›†æˆ**

- **è·¯ç”±æ¡†æ¶**ï¼šæ‰«æå¸¦ `@Controller` æ³¨è§£çš„ç±»ï¼Œæ³¨å†Œè·¯ç”±è¡¨ã€‚
- **DI å®¹å™¨**ï¼šè¯†åˆ« `@Component` ç±»ï¼Œç”Ÿæˆä¾èµ–æ³¨å…¥ä»£ç [1,7](@ref)ã€‚

#### 3. **å…ƒç¼–ç¨‹ï¼ˆMetaprogrammingï¼‰**

- åŠ¨æ€ç”Ÿæˆç±»ç»“æ„ï¼ˆå¦‚ä½¿ç”¨ JavaPoet åŸºäº `TypeElement` ä¿¡æ¯åˆ›å»ºæ–°ç±»ï¼‰[8](@ref)ã€‚

------

### ğŸ†š äº”ã€**ä¸å…¶ä»–å…ƒç´ çš„åŒºåˆ«**

| **å…ƒç´ ç±»å‹**        | **ä»£è¡¨å†…å®¹**           | **ç¤ºä¾‹**                   |
| ------------------- | ---------------------- | -------------------------- |
| `TypeElement`       | ç±»/æ¥å£/æšä¸¾/æ³¨è§£      | `public class User {}`     |
| `VariableElement`   | å­—æ®µ/æšä¸¾å¸¸é‡/å±€éƒ¨å˜é‡ | `private String name;`     |
| `ExecutableElement` | æ–¹æ³•/æ„é€ å™¨            | `public void save() {...}` |
| `PackageElement`    | åŒ…å£°æ˜                 | `package com.example;`     |

> ğŸ’¡ **å…³é”®åŒºåˆ«**ï¼š
>
> - `TypeElement` æè¿°**ç±»å‹æœ¬èº«**ï¼Œè€Œ `VariableElement`/`ExecutableElement` æè¿°å…¶æˆå‘˜ã€‚
> - `TypeMirror` å…³æ³¨**ç±»å‹ç­¾å**ï¼ˆå¦‚ `List<String>`ï¼‰ï¼Œ`TypeElement` å…³æ³¨**å£°æ˜ç»“æ„**[3,8](@ref)ã€‚

------

### âš ï¸ å…­ã€**ä½¿ç”¨æ³¨æ„äº‹é¡¹**

1. **ç¼–è¯‘æœŸå±€é™æ€§**
   `TypeElement` æ— æ³•è·å–è¿è¡Œæ—¶ä¿¡æ¯ï¼ˆå¦‚çˆ¶ç±»å®ä¾‹ï¼‰ï¼Œéœ€é€šè¿‡ `TypeMirror` è§£ææ³›å‹ç­‰ç±»å‹ç»†èŠ‚[8](@ref)ã€‚

2. **ç±»å‹åˆ¤æ–­**
   ä½¿ç”¨ `ElementKind` åŒºåˆ†å…·ä½“ç±»å‹ï¼š

   ```
   if (typeElement.getKind() == ElementKind.INTERFACE) {
       // å¤„ç†æ¥å£
   }
   ```

3. **åµŒå¥—ç±»å¤„ç†**
   åµŒå¥—ç±»ï¼ˆå¦‚ `Outer.Inner`ï¼‰è§†ä¸ºå¤–å±‚ `TypeElement` çš„å­å…ƒç´ ï¼Œéœ€é€’å½’è§£æ[8](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

`TypeElement` æ˜¯ Java ç¼–è¯‘æ—¶ç±»å‹æ¨¡å‹çš„**æ ¸å¿ƒæŠ½è±¡**ï¼Œä¸ºæ³¨è§£å¤„ç†å™¨æä¾›ç±»å‹å£°æ˜çº§åˆ«çš„å…ƒæ•°æ®è®¿é—®èƒ½åŠ›ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

- **ç»“æ„åŒ–æºç è§£æ**ï¼šå°† Java ç±»å‹æ˜ å°„ä¸ºå¯ç¼–ç¨‹å¯¹è±¡ã€‚
- **è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆ**ï¼šæ”¯æ’‘ Lombokã€Dagger ç­‰æ¡†æ¶çš„ç¼–è¯‘æ—¶ä»£ç ç”Ÿæˆã€‚
- **é™æ€æ ¡éªŒåŸºç¡€**ï¼šç¡®ä¿æ³¨è§£ä½¿ç”¨çš„æ­£ç¡®æ€§ï¼Œæå‡ä»£ç å¥å£®æ€§ã€‚

> ğŸ“š **æ·±å…¥å­¦ä¹ **ï¼š
>
> - å®˜æ–¹æ–‡æ¡£ï¼š[`javax.lang.model.element.TypeElement`](https://docs.oracle.com/javase/8/docs/api/javax/lang/model/element/TypeElement.html)
> - å®è·µç¤ºä¾‹ï¼š[æ³¨è§£å¤„ç†å™¨å¼€å‘æŒ‡å—](https://blog.csdn.net/aa642531/article/details/80219214)[3,8](@ref)ã€‚

## javac

javacï¼ˆJava Compilerï¼‰æ˜¯Javaå¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ä¸­çš„æ ¸å¿ƒç¼–è¯‘å™¨ï¼Œè´Ÿè´£å°†Javaæºä»£ç ï¼ˆ`.java`æ–‡ä»¶ï¼‰ç¼–è¯‘æˆJVMå¯æ‰§è¡Œçš„å­—èŠ‚ç æ–‡ä»¶ï¼ˆ`.class`æ–‡ä»¶ï¼‰ã€‚å…¶è®¾è®¡ä½“ç°äº†Javaâ€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€çš„è·¨å¹³å°ç†å¿µã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŠŸèƒ½ã€ç¼–è¯‘æµç¨‹ã€å…³é”®é€‰é¡¹åŠå®é™…åº”ç”¨å±•å¼€è¯¦ç»†ä»‹ç»ï¼š

------

### âš™ï¸ **ä¸€ã€æ ¸å¿ƒåŠŸèƒ½ä¸ä½œç”¨**

1. **æºä»£ç ç¼–è¯‘**

   - å°†Javaæºæ–‡ä»¶ï¼ˆ`.java`ï¼‰è½¬æ¢ä¸ºå¹³å°æ— å…³çš„å­—èŠ‚ç æ–‡ä»¶ï¼ˆ`.class`ï¼‰ï¼Œä¾›JVMæ‰§è¡Œ[2,3,5](@ref)ã€‚
   - æ”¯æŒå¤šæ–‡ä»¶ç¼–è¯‘ï¼ˆå¦‚`javac Main.java Helper.java`ï¼‰æˆ–é€šè¿‡æ–‡ä»¶åˆ—è¡¨æ‰¹é‡ç¼–è¯‘ï¼ˆ`javac @sourcefiles`ï¼‰[1,11](@ref)ã€‚

2. **è¯­æ³•ä¸è¯­ä¹‰æ£€æŸ¥**

   - **ç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹**ï¼šæ£€æŸ¥è¯­æ³•é”™è¯¯ï¼ˆå¦‚ç¼ºå°‘åˆ†å·ã€æ‹¬å·ä¸åŒ¹é…ï¼‰ã€ç±»å‹ä¸åŒ¹é…ã€æœªå£°æ˜å˜é‡ç­‰ï¼Œå¹¶è¾“å‡ºè¯¦ç»†é”™è¯¯ä½ç½®[5,10](@ref)ã€‚
   - **è¯­ä¹‰åˆ†æ**ï¼šéªŒè¯å˜é‡ä½œç”¨åŸŸã€æ–¹æ³•é‡è½½/é‡å†™çš„åˆæ³•æ€§ï¼Œç¡®ä¿ä»£ç ç¬¦åˆJavaè¯­è¨€è§„èŒƒ[6,8](@ref)ã€‚

3. **å¤šç‰ˆæœ¬å…¼å®¹æ€§**

   - é€šè¿‡`-source`å’Œ`-target`é€‰é¡¹æŒ‡å®šæºç ç‰ˆæœ¬å’Œå­—èŠ‚ç ç›®æ ‡ç‰ˆæœ¬ï¼ˆå¦‚`javac -source 8 -target 8 App.java`ï¼‰ï¼Œç¡®ä¿å‘åå…¼å®¹[3,9,10](@ref)ã€‚

4. **æ³¨è§£å¤„ç†**

   - æ”¯æŒç¼–è¯‘æ—¶æ³¨è§£å¤„ç†ï¼ˆAnnotation Processingï¼‰ï¼Œå¦‚Lomboké€šè¿‡æ³¨è§£ç”Ÿæˆä»£ç ï¼Œé¿å…è¿è¡Œæ—¶åå°„å¼€é”€[6,9](@ref)ã€‚

5. **è°ƒè¯•ä¿¡æ¯ç”Ÿæˆ**

   - é€šè¿‡

     ```
     -g
     ```

     é€‰é¡¹æ§åˆ¶è°ƒè¯•ä¿¡æ¯ç”Ÿæˆï¼š

     - `-g:lines`ï¼šç”Ÿæˆè¡Œå·ä¿¡æ¯ï¼ˆæ”¯æŒæ–­ç‚¹è°ƒè¯•ï¼‰ã€‚
     - `-g:vars`ï¼šç”Ÿæˆå±€éƒ¨å˜é‡ä¿¡æ¯ï¼ˆè°ƒè¯•æ—¶æŸ¥çœ‹å˜é‡å€¼ï¼‰ã€‚
     - `-g:source`ï¼šå…³è”æºæ–‡ä»¶ï¼ˆæ”¯æŒè·¨æ–‡ä»¶æºç æŸ¥çœ‹ï¼‰[9,10](@ref)ã€‚

------

### ğŸ”„ **äºŒã€ç¼–è¯‘æµç¨‹è¯¦è§£**

javacçš„ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸ºä¸ƒä¸ªé˜¶æ®µï¼Œå±äºç¼–è¯‘åŸç†ä¸­çš„â€œå‰ç«¯ç¼–è¯‘â€ï¼ˆä¸æ¶‰åŠç¡¬ä»¶ç›¸å…³çš„ä»£ç ä¼˜åŒ–ï¼‰[6,8](@ref)ï¼š

| **é˜¶æ®µ**       | **ä½œç”¨**                                                     | **å…³é”®ç»„ä»¶**                 |
| -------------- | ------------------------------------------------------------ | ---------------------------- |
| **è¯æ³•åˆ†æ**   | å°†æºä»£ç æ‹†åˆ†ä¸ºTokenï¼ˆå¦‚å…³é”®å­—ã€æ ‡è¯†ç¬¦ï¼‰                      | `Scanner`ç±»                  |
| **è¯­æ³•åˆ†æ**   | æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œæè¿°ä»£ç ç»“æ„                          | é€’å½’ä¸‹é™è§£æå™¨               |
| **ç¬¦å·è¡¨å¡«å……** | è§£æç±»/æ–¹æ³•/å˜é‡å®šä¹‰ï¼Œå¡«å……ç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰             | `Enter`å’Œ`MemberEnter`ç±»     |
| **æ³¨è§£å¤„ç†**   | è°ƒç”¨æ³¨è§£å¤„ç†å™¨ï¼ˆå¦‚Lombokï¼‰ï¼Œç”Ÿæˆæ–°ä»£ç æˆ–ä¿®æ”¹AST              | `JavacProcessingEnvironment` |
| **è¯­ä¹‰åˆ†æ**   | ç±»å‹æ£€æŸ¥ã€å¸¸é‡æŠ˜å ï¼ˆå¦‚`int a = 1+2`ä¼˜åŒ–ä¸º`3`ï¼‰ã€æ–¹æ³•åˆæ³•æ€§éªŒè¯ | `Check`å’Œ`Resolve`ç±»         |
| **æ•°æ®æµåˆ†æ** | æ£€æŸ¥å˜é‡åˆå§‹åŒ–ã€è¿”å›å€¼ã€ä¸å¯è¾¾ä»£ç ç­‰é€»è¾‘é”™è¯¯                 | `Flow`ç±»                     |
| **è§£ç³–ä¸ç”Ÿæˆ** | å»é™¤è¯­æ³•ç³–ï¼ˆå¦‚`for-each`è½¬ä¸ºè¿­ä»£å™¨ï¼‰ã€ç”Ÿæˆå­—èŠ‚ç æŒ‡ä»¤         | `Desugar`å’Œ`ClassWriter`     |

> ğŸ’¡ **ç¤ºä¾‹**ï¼š`String s = "a" + 1;`åœ¨è§£ç³–é˜¶æ®µä¼˜åŒ–ä¸º`String s = "a1";`[6](@ref)ã€‚

------

### âš¡ **ä¸‰ã€å¸¸ç”¨å‘½ä»¤é€‰é¡¹ä¸ç¤ºä¾‹**

#### **æ ¸å¿ƒé€‰é¡¹é€ŸæŸ¥**

| **é€‰é¡¹**           | **ä½œç”¨**                                 | **ç¤ºä¾‹**                           |
| ------------------ | ---------------------------------------- | ---------------------------------- |
| `-d <ç›®å½•>`        | æŒ‡å®š.classæ–‡ä»¶è¾“å‡ºç›®å½•                   | `javac -d bin src/Main.java`       |
| `-cp <è·¯å¾„>`       | è®¾ç½®ç±»è·¯å¾„ï¼ˆæŸ¥æ‰¾ä¾èµ–ç±»ï¼‰                 | `javac -cp lib/*.jar App.java`     |
| `-encoding <ç¼–ç >` | æŒ‡å®šæºæ–‡ä»¶ç¼–ç ï¼ˆå¦‚UTF-8ï¼‰                | `javac -encoding UTF-8 Hello.java` |
| `-nowarn`          | ç¦ç”¨è­¦å‘Šä¿¡æ¯                             | `javac -nowarn Demo.java`          |
| `-verbose`         | è¾“å‡ºç¼–è¯‘è¯¦ç»†è¿‡ç¨‹ï¼ˆåŠ è½½çš„ç±»ã€ç¼–è¯‘çš„æ–‡ä»¶ï¼‰ | `javac -verbose Test.java`         |

#### **å…¸å‹åœºæ™¯ç¤ºä¾‹**

1. **ç¼–è¯‘å¤šæ–‡ä»¶å¹¶æŒ‡å®šè¾“å‡ºç›®å½•**

   ```
   javac -d ./out Main.java Helper.java  # è¾“å‡ºåˆ°outç›®å½•
   ```

2. **è·¨ç‰ˆæœ¬ç¼–è¯‘ï¼ˆJava 8å…¼å®¹ï¼‰**

   ```
   javac -source 8 -target 8 -d bin OldSystemApp.java  # ç¡®ä¿åœ¨æ—§JVMè¿è¡Œ
   ```

3. **æ³¨è§£å¤„ç†å™¨é›†æˆ**

   ```
   javac -processor CustomProcessor -procpath ./processor.jar User.java  # è‡ªå®šä¹‰æ³¨è§£å¤„ç†
   ```

------

### âš–ï¸ **å››ã€javacä¸javaå‘½ä»¤çš„å…³ç³»**

| **ç»´åº¦**     | **javac**                     | **java**                           |
| ------------ | ----------------------------- | ---------------------------------- |
| **åŠŸèƒ½**     | ç¼–è¯‘æºä»£ç  â†’ ç”Ÿæˆ`.class`æ–‡ä»¶ | åŠ è½½`.class`æ–‡ä»¶ â†’ å¯åŠ¨JVMæ‰§è¡Œç¨‹åº |
| **è¾“å…¥**     | `.java`æºæ–‡ä»¶                 | ä¸»ç±»åï¼ˆä¸å«æ‰©å±•åï¼‰æˆ–JARåŒ…        |
| **è¾“å‡º**     | `.class`å­—èŠ‚ç æ–‡ä»¶            | ç¨‹åºè¿è¡Œç»“æœï¼ˆæ§åˆ¶å°è¾“å‡º/æ–‡ä»¶ç­‰ï¼‰  |
| **ä¾èµ–**     | éœ€JDKï¼ˆå¼€å‘ç¯å¢ƒï¼‰             | åªéœ€JREï¼ˆè¿è¡Œç¯å¢ƒï¼‰                |
| **å…¸å‹å‘½ä»¤** | `javac -d bin Hello.java`     | `java -cp bin Hello`               |

> ğŸ“Œ **å…³é”®ç‚¹**ï¼šjavacæ˜¯**ç¼–è¯‘æ—¶å·¥å…·**ï¼Œjavaæ˜¯**è¿è¡Œæ—¶å·¥å…·**ï¼Œä¸¤è€…åä½œå®ŒæˆJavaç¨‹åºçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ[3,4,8](@ref)ã€‚

------

### ğŸ› ï¸ **äº”ã€å®é™…åº”ç”¨æŠ€å·§ä¸é—®é¢˜å¤„ç†**

1. **ç¼–ç é—®é¢˜å¤„ç†**

   - Windowsä¸‹UTF-8æºæ–‡ä»¶ç¼–è¯‘æŠ¥é”™æ—¶ï¼Œéœ€æ˜¾å¼æŒ‡å®šç¼–ç ï¼š

     ```
     javac -encoding UTF-8 HelloWorld.java  # é¿å…"éæ³•å­—ç¬¦"é”™è¯¯[3,10](@ref)
     ```

2. **éšå¼ç¼–è¯‘æ§åˆ¶**

   - é»˜è®¤è‡ªåŠ¨ç¼–è¯‘ä¾èµ–ç±»ï¼ˆå¦‚A.javaå¼•ç”¨B.javaåˆ™ç¼–è¯‘Bï¼‰ï¼Œå¯é€šè¿‡`-implicit:none`ç¦ç”¨[9](@ref)ã€‚

3. **è°ƒè¯•ä¿¡æ¯ä¼˜åŒ–**

   - ç”Ÿäº§ç¯å¢ƒå¯å…³é—­è°ƒè¯•ä¿¡æ¯å‡å°ä½“ç§¯ï¼š`javac -g:none Service.java`[9](@ref)ã€‚

4. **å¤§å‹é¡¹ç›®ç¼–è¯‘**

   - ä½¿ç”¨æ–‡ä»¶åˆ—è¡¨é¿å…å‘½ä»¤è¡Œè¿‡é•¿ï¼š

     ```
     echo Main.java Helper.java > sources.txt
     javac @sources.txt  # ä»æ–‡ä»¶è¯»å–æºæ–‡ä»¶åˆ—è¡¨[1,11](@ref)
     ```

------

### ğŸ’ **æ€»ç»“**

javacä½œä¸ºJavaç”Ÿæ€çš„åŸºçŸ³ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

- **è·¨å¹³å°æ€§**ï¼šç”ŸæˆJVMç»Ÿä¸€çš„å­—èŠ‚ç ï¼Œå®ç°â€œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œâ€[2,5](@ref)ã€‚
- **é™æ€å®‰å…¨ä¿éšœ**ï¼šç¼–è¯‘æ—¶ä¸¥æ ¼æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯[5](@ref)ã€‚
- **å·¥å…·é“¾é›†æˆ**ï¼šä¸IDEï¼ˆå¦‚IntelliJï¼‰ã€æ„å»ºå·¥å…·ï¼ˆå¦‚Mavenï¼‰æ— ç¼åä½œï¼Œæå‡å¼€å‘æ•ˆç‡[5,9](@ref)ã€‚

> âš ï¸ **æ³¨æ„**ï¼šjavacä»…å®Œæˆå‰ç«¯ç¼–è¯‘ï¼ŒJITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰ç­‰è¿è¡Œæ—¶ä¼˜åŒ–ç”±JVMè´Ÿè´£ï¼Œä¸¤è€…å…±åŒå½±å“ç¨‹åºæ€§èƒ½ã€‚æ·±å…¥ç†è§£javacæœºåˆ¶ï¼Œæœ‰åŠ©äºç¼–å†™é«˜æ•ˆã€å¥å£®çš„Javaä»£ç ï¼Œå¹¶æœ‰æ•ˆæ’æŸ¥ç¼–è¯‘æœŸé—®é¢˜ã€‚

## JaråŒ…

JARï¼ˆJava ARchiveï¼‰åŒ…æ˜¯Javaå¹³å°çš„æ ¸å¿ƒæ‰“åŒ…æ ¼å¼ï¼Œç”¨äºå°†å¤šä¸ªç±»æ–‡ä»¶ã€èµ„æºåŠå…ƒæ•°æ®æ•´åˆä¸ºå•ä¸ªå‹ç¼©æ–‡ä»¶ï¼ˆåŸºäºZIPæ ¼å¼ï¼‰ï¼Œç®€åŒ–åˆ†å‘ã€éƒ¨ç½²å’Œä¾èµ–ç®¡ç†ã€‚ä»¥ä¸‹ä»ç»“æ„ã€åŠŸèƒ½åˆ°åº”ç”¨åœºæ™¯å…¨é¢è§£æï¼š

------

### ğŸ“¦ **ä¸€ã€JARåŒ…çš„æ ¸å¿ƒç»“æ„ä¸ç»„æˆ**

1. **ç±»æ–‡ä»¶ï¼ˆ`.class`ï¼‰**
   Javaæºç ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œæ˜¯JARåŒ…çš„ä¸»ä½“å†…å®¹ã€‚æ¯ä¸ªç±»å¯¹åº”ä¸€ä¸ª`.class`æ–‡ä»¶ï¼ŒæŒ‰åŒ…è·¯å¾„å±‚çº§ç»„ç»‡ï¼ˆå¦‚`com/example/Main.class`ï¼‰[1,2](@ref)ã€‚

2. **èµ„æºæ–‡ä»¶**
   é…ç½®æ–‡ä»¶ï¼ˆ`.properties`/`.xml`ï¼‰ã€å›¾ç‰‡ã€éŸ³é¢‘ç­‰éä»£ç èµ„æºï¼Œé€šå¸¸å­˜æ”¾åœ¨`resources/`ç›®å½•ä¸‹ï¼Œç¨‹åºé€šè¿‡`ClassLoader.getResourceAsStream()`è¯»å–[4,8](@ref)ã€‚

3. **å…ƒæ•°æ®ï¼ˆ`META-INF/`ï¼‰**

   - **

     ```
     MANIFEST.MF
     ```

     **ï¼šæ ¸å¿ƒæ¸…å•æ–‡ä»¶ï¼Œå®šä¹‰JARå±æ€§ï¼š

     - `Main-Class`ï¼šå¯æ‰§è¡ŒJARçš„å…¥å£ç±»ï¼ˆå¦‚`Main-Class: com.example.Main`ï¼‰[1,2](@ref)ã€‚
     - `Class-Path`ï¼šä¾èµ–çš„å…¶ä»–JARè·¯å¾„ï¼ˆå¦‚`lib/dependency.jar`ï¼‰[4](@ref)ã€‚
     - ç‰ˆæœ¬ã€ç­¾åä¿¡æ¯ç­‰[7](@ref)ã€‚

   - ç­¾åæ–‡ä»¶ï¼ˆ`.SF`/`.DSA`ï¼‰ï¼šç”¨äºéªŒè¯JARå®Œæ•´æ€§[8](@ref)ã€‚

4. **ä¾èµ–åº“ï¼ˆ`lib/`ï¼‰**
   ç¬¬ä¸‰æ–¹JARå¯åµŒå¥—åœ¨`lib/`ç›®å½•ï¼Œé€šè¿‡`MANIFEST.MF`çš„`Class-Path`å¼•ç”¨[6,8](@ref)ã€‚

------

### âš™ï¸ **äºŒã€JARåŒ…çš„ç±»å‹ä¸ç”¨é€”**

| **ç±»å‹**              | **ç‰¹ç‚¹**                                                     | **åº”ç”¨åœºæ™¯**                              |
| --------------------- | ------------------------------------------------------------ | ----------------------------------------- |
| **å¯æ‰§è¡ŒJAR**         | å«`Main-Class`ï¼Œé€šè¿‡`java -jar`ç›´æ¥è¿è¡Œ                      | ç‹¬ç«‹åº”ç”¨ã€å‘½ä»¤è¡Œå·¥å…·[2](@ref)             |
| **åº“JAR**             | æ— ä¸»ç±»ï¼Œæä¾›APIä¾›å…¶ä»–é¡¹ç›®è°ƒç”¨                                | å¼€æºåº“ï¼ˆå¦‚Gsonã€Apache Commonsï¼‰[1](@ref) |
| **èµ„æºJAR**           | ä»…å«é…ç½®æ–‡ä»¶ã€æ¨¡æ¿ç­‰èµ„æº                                     | å¤šè¯­è¨€æ”¯æŒã€æ¨¡æ¿å¼•æ“[9](@ref)             |
| **Webåº”ç”¨JARï¼ˆWARï¼‰** | ç‰¹æ®ŠJARæ ¼å¼ï¼Œå«`WEB-INF/classes`ã€`WEB-INF/lib`å’ŒWebé…ç½®æ–‡ä»¶ | Servletå®¹å™¨éƒ¨ç½²ï¼ˆå¦‚Tomcatï¼‰[11](@ref)     |

> ğŸ’¡ **WAR vs JAR**ï¼š
>
> - WARæ˜¯Webä¸“å±æ ¼å¼ï¼ŒåŒ…å«`web.xml`ã€JSPå’Œé™æ€èµ„æº[11](@ref)ã€‚
> - JARæ›´é€šç”¨ï¼Œé€‚ç”¨äºéWebåœºæ™¯[1](@ref)ã€‚

------

### ğŸ› ï¸ **ä¸‰ã€åˆ›å»ºJARåŒ…çš„å¸¸ç”¨æ–¹æ³•**

1. **å‘½ä»¤è¡Œå·¥å…·ï¼ˆJDK `jar`å‘½ä»¤ï¼‰**

   ```
   # åŸºç¡€æ‰“åŒ…ï¼ˆæ— æ¸…å•ï¼‰
   jar cvf app.jar -C classes/ .  
   # å«è‡ªå®šä¹‰æ¸…å•
   jar cfm app.jar MANIFEST.MF -C classes/ . [2,4](@ref)
   ```

   - `c`ï¼šåˆ›å»ºï¼Œ`v`ï¼šè¾“å‡ºè¯¦æƒ…ï¼Œ`f`ï¼šæŒ‡å®šæ–‡ä»¶åï¼Œ`m`ï¼šæŒ‡å®šæ¸…å•æ–‡ä»¶ã€‚

2. **æ„å»ºå·¥å…·è‡ªåŠ¨åŒ–**

   - 

     Maven

     ï¼šé…ç½®

     ```
     maven-shade-plugin
     ```

     æ‰“åŒ…ä¾èµ–ï¼š

     ```
     <plugin>
       <artifactId>maven-shade-plugin</artifactId>
       <configuration>
         <transformers>
           <transformer implementation="...ManifestResourceTransformer">
             <mainClass>com.example.Main</mainClass>
           </transractor>
         </transformers>
       </configuration>
     </plugin>
     ```

     ```
     mvn clean package
     ```

     ç”Ÿæˆå¯æ‰§è¡ŒJAR

     8

     ã€‚

   - 

     Gradle

     ï¼šé€šè¿‡

     ```
     shadowJar
     ```

     æ’ä»¶æ‰“åŒ…ï¼š

     ```
     plugins { id 'com.github.johnrengelman.shadow' }
     shadowJar { manifest { attributes 'Main-Class': 'com.example.Main' } }
     ```

     ```
     gradle shadowJar
     ```

     ç”Ÿæˆå«ä¾èµ–çš„Fat JAR

     8

     ã€‚

3. **IDEç”Ÿæˆï¼ˆIntelliJ/Eclipseï¼‰**

   - IntelliJï¼š`File â†’ Project Structure â†’ Artifacts â†’ JAR`[4](@ref)ã€‚
   - Eclipseï¼šå³é”®é¡¹ç›® â†’ `Export â†’ Runnable JAR`[6](@ref)ã€‚

------

### âš¡ï¸ **å››ã€JARåŒ…çš„æ ¸å¿ƒä¼˜åŠ¿**

1. **ç®€åŒ–éƒ¨ç½²**
   å•æ–‡ä»¶åŒ…å«æ‰€æœ‰ä»£ç å’Œèµ„æºï¼Œé¿å…æ–‡ä»¶æ•£è½[1,10](@ref)ã€‚
2. **ä¾èµ–ç®¡ç†**
   é€šè¿‡`Class-Path`æˆ–Fat JARæ•´åˆç¬¬ä¸‰æ–¹åº“ï¼Œé¿å…ç¯å¢ƒå·®å¼‚[8,10](@ref)ã€‚
3. **è·¨å¹³å°æ€§**
   ä¸Javaè¯­è¨€ä¸€è‡´ï¼Œæ”¯æŒWindows/Linux/macOS[3,7](@ref)ã€‚
4. **å®‰å…¨æ€§**
   æ”¯æŒæ•°å­—ç­¾åï¼Œé˜²æ­¢ç¯¡æ”¹ï¼ˆ`jarsigner`å‘½ä»¤ï¼‰[2,7](@ref)ã€‚

------

### âš ï¸ **äº”ã€å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–**

1. **ä¾èµ–å†²çª**

   - **Maven**ï¼š`<exclusions>`æ’é™¤å†²çªåŒ…[8](@ref)ã€‚
   - **Gradle**ï¼š`resolutionStrategy.force`å¼ºåˆ¶ç‰ˆæœ¬[8](@ref)ã€‚

2. **èµ„æºåŠ è½½å¤±è´¥**
   ç¡®ä¿èµ„æºè·¯å¾„æ­£ç¡®ï¼š

   ```
   // æ­£ç¡®æ–¹å¼ï¼šä»ç±»è·¯å¾„æ ¹ç›®å½•è¯»å–
   InputStream input = getClass().getResourceAsStream("/config.properties"); [8](@ref)
   ```

3. **å‡å°ä½“ç§¯**

   - ä½¿ç”¨`ProGuard`æ··æ·†åˆ é™¤æœªä½¿ç”¨ä»£ç ï¼ˆMaven/Gradleæ’ä»¶æ”¯æŒï¼‰[8](@ref)ã€‚
   - æ¨¡å—åŒ–æ‹†åˆ†ï¼ˆå¦‚å¾®æœåŠ¡ç‹¬ç«‹JARï¼‰[7,10](@ref)ã€‚

4. **çƒ­æ›´æ–°æ”¯æŒ**
   ç»“åˆ`Java Agent`æˆ–OSGiæ¡†æ¶å®ç°åŠ¨æ€åŠ è½½[7](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

JARåŒ…æ˜¯Javaç”Ÿæ€çš„åŸºçŸ³ï¼š

- **å¼€å‘ä¾§**ï¼šé€šè¿‡æ ‡å‡†å°è£…å®ç°ä»£ç å¤ç”¨ï¼ˆåº“JARï¼‰å’Œç‹¬ç«‹éƒ¨ç½²ï¼ˆå¯æ‰§è¡ŒJARï¼‰ã€‚
- **è¿ç»´ä¾§**ï¼šå•æ–‡ä»¶åˆ†å‘ã€ä¾èµ–éš”ç¦»ã€è·¨å¹³å°è¿è¡Œã€‚
- **è¿›é˜¶åœºæ™¯**ï¼šç»“åˆæ¨¡å—åŒ–ï¼ˆJPMSï¼‰ã€å®¹å™¨åŒ–ï¼ˆDockerï¼‰æ„å»ºç°ä»£äº‘åŸç”Ÿåº”ç”¨[7,10](@ref)ã€‚

> é™„ï¼š**å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥**
>
> - åˆ—å‡ºå†…å®¹ï¼š`jar tf app.jar`
> - è§£å‹ï¼š`jar xf app.jar`
> - è¿è¡Œï¼š`java -jar app.jar`[2,4](@ref)ã€‚

## Jar åŒ…è§£æ

ClassLoaderè§£æJARåŒ…çš„è¿‡ç¨‹æ¶‰åŠJavaç±»åŠ è½½æœºåˆ¶çš„æ ¸å¿ƒåŸç†ï¼Œå…¶å®ç°ä¾èµ–äº**åŒäº²å§”æ´¾æ¨¡å‹**ã€**ç±»è·¯å¾„æ‰«æ**åŠ**å­—èŠ‚ç å¤„ç†**ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š

------

### âš™ï¸ 1. **JARåŒ…ç»“æ„ä¸å®šä½**

- **JARæ–‡ä»¶æœ¬è´¨**ï¼šJARï¼ˆJava ARchiveï¼‰æ˜¯åŸºäºZIPæ ¼å¼çš„å‹ç¼©æ–‡ä»¶ï¼ŒåŒ…å«`.class`æ–‡ä»¶ã€èµ„æºï¼ˆå¦‚å›¾ç‰‡/é…ç½®æ–‡ä»¶ï¼‰åŠå…ƒæ•°æ®ï¼ˆå¦‚`META-INF/MANIFEST.MF`ï¼‰[1,3](@ref)ã€‚

- 

  ç±»è·¯å¾„ï¼ˆClasspathï¼‰

  ï¼š

  ClassLoaderé€šè¿‡ç±»è·¯å¾„å®šä½JARåŒ…ã€‚ç±»è·¯å¾„å¯æŒ‡å®šä¸ºï¼š

  - ç›®å½•ï¼ˆå«æŒ‰åŒ…ç»“æ„ç»„ç»‡çš„`.class`æ–‡ä»¶ï¼‰
  - JARæ–‡ä»¶è·¯å¾„ï¼ˆå¦‚`lib/myapp.jar`ï¼‰
  - é€šé…ç¬¦ï¼ˆå¦‚`lib/*.jar`åŠ è½½æ‰€æœ‰JARï¼‰[3,7](@ref)ã€‚

------

### ğŸ”„ 2. **ç±»åŠ è½½æµç¨‹ï¼ˆåŒäº²å§”æ´¾æ¨¡å‹ï¼‰**

ClassLoaderåŠ è½½JARä¸­çš„ç±»æ—¶ï¼Œä¸¥æ ¼éµå¾ª**åŒäº²å§”æ´¾æœºåˆ¶**ï¼š

1. **å§”æ´¾çˆ¶åŠ è½½å™¨**ï¼š
   å­ClassLoaderï¼ˆå¦‚`AppClassLoader`ï¼‰æ”¶åˆ°ç±»åŠ è½½è¯·æ±‚åï¼Œä¼˜å…ˆå§”æ´¾çˆ¶åŠ è½½å™¨ï¼ˆå¦‚`ExtClassLoader`ï¼‰å¤„ç†[4,7](@ref)ã€‚

2. 

   çˆ¶åŠ è½½å™¨é€çº§å°è¯•

   ï¼š

   - `BootstrapClassLoader`ï¼šåŠ è½½JREæ ¸å¿ƒç±»ï¼ˆ`rt.jar`ç­‰ï¼‰ã€‚
   - `ExtClassLoader`ï¼šåŠ è½½`jre/lib/ext`ç›®å½•çš„æ‰©å±•ç±»ã€‚
   - è‹¥çˆ¶åŠ è½½å™¨æˆåŠŸåŠ è½½ï¼Œç›´æ¥è¿”å›`Class`å¯¹è±¡[6,8](@ref)ã€‚

3. **è‡ªèº«åŠ è½½**ï¼š
   è‹¥çˆ¶åŠ è½½å™¨å‡å¤±è´¥ï¼Œå­ClassLoaderè°ƒç”¨`findClass()`æ–¹æ³•ï¼Œä»è‡ªèº«ç±»è·¯å¾„ï¼ˆå«JARï¼‰ä¸­æŸ¥æ‰¾å¹¶åŠ è½½ç±»[7,8](@ref)ã€‚

> **æµç¨‹å›¾è§£**ï¼š
>
> ```
> ç”¨æˆ·è¯·æ±‚åŠ è½½ç±» â†’ AppClassLoader â†’ ExtClassLoader â†’ BootstrapClassLoader  
> â†‘ (å¤±è´¥) â†“ (å¤±è´¥)  
> â† è¿”å›Class â† æˆåŠŸåŠ è½½ â† è‡ªèº«åŠ è½½ï¼ˆfindClassï¼‰  
> ```

------

### ğŸ§© 3. **URLClassLoaderè§£æJARçš„ç»†èŠ‚**

`URLClassLoader`æ˜¯åŠ è½½JARçš„æ ¸å¿ƒå®ç°ç±»ï¼Œå…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š

1. **JARè·¯å¾„æ˜ å°„**ï¼š
   å°†JARæ–‡ä»¶è½¬æ¢ä¸º`URL`å¯¹è±¡ï¼ˆå¦‚`file:/path/to.jar`ï¼‰ï¼ŒåŠ å…¥ç±»åŠ è½½å™¨çš„æœç´¢è·¯å¾„[2,5](@ref)ã€‚

2. 

   ç±»æŸ¥æ‰¾ä¸åŠ è½½

   ï¼š

   - è°ƒç”¨`findClass(String className)`ï¼Œæ ¹æ®ç±»åï¼ˆå¦‚`com.example.MyClass`ï¼‰è½¬æ¢ä¸ºJARå†…è·¯å¾„ï¼ˆ`com/example/MyClass.class`ï¼‰ã€‚
   - ä»JARä¸­è¯»å–è¯¥`.class`æ–‡ä»¶çš„å­—èŠ‚æµã€‚

3. 

   å­—èŠ‚ç å¤„ç†

   ï¼š

   - **éªŒè¯**ï¼šæ£€æŸ¥å­—èŠ‚ç ç¬¦åˆJVMè§„èŒƒï¼ˆå¦‚é­”æ•°`0xCAFEBABE`ï¼‰ã€‚
   - **å®šä¹‰ç±»**ï¼šè°ƒç”¨`defineClass(byte[] b, int off, int len)`ï¼Œå°†å­—èŠ‚ç è½¬æ¢ä¸ºJVMå†…éƒ¨çš„`Class`å¯¹è±¡[4,7](@ref)ã€‚

4. **èµ„æºåŠ è½½**ï¼š
   é€šè¿‡`getResourceAsStream()`åŠ è½½JARå†…éç±»èµ„æºï¼ˆå¦‚é…ç½®æ–‡ä»¶ï¼‰[1,5](@ref)ã€‚

------

### âš ï¸ 4. **ç±»åŠ è½½é¡ºåºä¸å†²çªè§£å†³**

- 

  ç±»è·¯å¾„é¡ºåºå†³å®šä¼˜å…ˆçº§

  ï¼š

  è‹¥å¤šä¸ªJARåŒ…å«åŒåç±»ï¼ˆå¦‚

  ```
  com.utils.StringUtil
  ```

  ï¼‰ï¼ŒClassLoaderåŠ è½½

  ç¬¬ä¸€ä¸ªåœ¨ç±»è·¯å¾„ä¸­æ‰¾åˆ°çš„ç±»

  ï¼Œåç»­åŒåç±»è¢«å¿½ç•¥

  3

  ã€‚

  ```
  # ç¤ºä¾‹ï¼šlib1.jarä¸­çš„ç±»ä¼˜å…ˆäºlib2.jaråŠ è½½
  java -cp lib1.jar:lib2.jar Main
  ```

- **è‡ªå®šä¹‰ClassLoaderéš”ç¦»å†²çª**ï¼š
  é€šè¿‡ç‹¬ç«‹`URLClassLoader`å®ä¾‹åŠ è½½ä¸åŒJARï¼Œå®ç°ç±»ç©ºé—´éš”ç¦»ï¼ˆå¦‚Tomcatä¸ºæ¯ä¸ªWebåº”ç”¨åˆ›å»ºç‹¬ç«‹ClassLoaderï¼‰[5,7](@ref)ã€‚

------

### ğŸ› ï¸ 5. **è‡ªå®šä¹‰ClassLoaderçš„é«˜çº§åœºæ™¯**

1. **çƒ­éƒ¨ç½²**ï¼š
   é‡å†™`findClass()`ï¼Œç›‘æ§JARæ–‡ä»¶ä¿®æ”¹å¹¶é‡æ–°åŠ è½½ç±»[4,5](@ref)ã€‚

2. **åŠ å¯†ç±»åŠ è½½**ï¼š
   è¯»å–åŠ å¯†çš„JARå­—èŠ‚ç ï¼Œè§£å¯†åè°ƒç”¨`defineClass()`[4](@ref)ã€‚

3. 

   Webå®¹å™¨ç±»åŠ è½½

   ï¼š

   å¦‚Tomcatçš„

   ```
   WebAppClassLoader
   ```

   ï¼š

   - ä¼˜å…ˆåŠ è½½`WEB-INF/classes`ä¸­çš„ç±»ã€‚
   - æ¬¡ä¼˜åŠ è½½`WEB-INF/lib/*.jar`ã€‚
   - çˆ¶åŠ è½½å™¨ä»…è´Ÿè´£Servlet APIç­‰å…±äº«åº“[5](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“ä¸æœ€ä½³å®è·µ**

- **è§£ææœ¬è´¨**ï¼šClassLoaderé€šè¿‡**åŒäº²å§”æ´¾**ç¡®ä¿æ ¸å¿ƒç±»å®‰å…¨ï¼Œé€šè¿‡**URLClassLoader**å®šä½å¹¶è½¬æ¢JARä¸­çš„å­—èŠ‚ç ä¸ºå¯æ‰§è¡Œç±»ã€‚

- 

  é¿å‘æŒ‡å—

  ï¼š

  - **é¿å…ç±»å†²çª**ï¼šè§„èŒƒåŒ…åæˆ–ä½¿ç”¨æ¨¡å—åŒ–ï¼ˆJPMSï¼‰[3](@ref)ã€‚
  - **èµ„æºæ³„éœ²**ï¼šåŠ¨æ€åŠ è½½çš„`URLClassLoader`éœ€æ‰‹åŠ¨`close()`ï¼ˆJava 7+ï¼‰[2](@ref)ã€‚
  - **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘å…¨é‡æ‰«æï¼Œç¼“å­˜å¸¸ç”¨ç±»ã€‚

> é€šè¿‡æ·±å…¥ç†è§£ClassLoaderæœºåˆ¶ï¼Œå¯çµæ´»åº”ç”¨äºæ’ä»¶ç³»ç»Ÿï¼ˆå¦‚OSGiï¼‰ã€äº‘åŸç”Ÿæ¶æ„ç­‰åœºæ™¯ï¼Œå®ç°é«˜æ‰©å±•æ€§è®¾è®¡[5,7](@ref)ã€‚

## class å®šä½

JVMåœ¨åŠ è½½ç±»æ—¶å®šä½.classæ–‡ä»¶æ‰€å±çš„å…·ä½“JARåŒ…ï¼Œæ˜¯é€šè¿‡**ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰** ç»“åˆ**åŒäº²å§”æ´¾æ¨¡å‹**å’Œ**ç±»è·¯å¾„ï¼ˆClasspathï¼‰** æœºåˆ¶å®ç°çš„ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†åŸç†ï¼š

------

### âš™ï¸ ä¸€ã€æ ¸å¿ƒæœºåˆ¶ï¼šç±»ååˆ°è·¯å¾„çš„æ˜ å°„

1. **å…¨é™å®šåè½¬æ¢**
   JVMå°†ç±»çš„å…¨é™å®šåï¼ˆå¦‚`com.example.MyClass`ï¼‰è½¬æ¢ä¸ºæ–‡ä»¶ç³»ç»Ÿè·¯å¾„æ ¼å¼ï¼ˆ`com/example/MyClass.class`ï¼‰[5,6](@ref)ã€‚
   - **ç¤ºä¾‹**ï¼šç±»`java.lang.String` â†’ è·¯å¾„`java/lang/String.class`ã€‚
2. **ç±»è·¯å¾„ï¼ˆClasspathï¼‰å®šä¹‰æœç´¢èŒƒå›´**
   - Classpathæ˜¯JVMæœç´¢ç±»æ–‡ä»¶çš„ç›®å½•æˆ–JARåˆ—è¡¨ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æŒ‡å®šï¼š
     - å‘½ä»¤è¡Œå‚æ•°ï¼š`-classpath`æˆ–`-cp`ï¼ˆå¦‚`java -cp lib/*.jar Main`ï¼‰[6](@ref)ã€‚
     - ç¯å¢ƒå˜é‡`CLASSPATH`ï¼ˆè¾ƒå°‘ç”¨ï¼Œæ˜“è¢«è¦†ç›–ï¼‰ã€‚
     - é»˜è®¤å½“å‰ç›®å½•ï¼ˆ`.`ï¼‰[6](@ref)ã€‚

------

### ğŸ” äºŒã€ç±»åŠ è½½å™¨çš„æœç´¢æµç¨‹ï¼ˆåŒäº²å§”æ´¾æ¨¡å‹ï¼‰

JVMé€šè¿‡ä¸‰çº§ç±»åŠ è½½å™¨é€çº§æœç´¢ï¼Œç¡®ä¿æ ¸å¿ƒç±»ä¼˜å…ˆåŠ è½½ï¼š

1. **å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰**

   - åŠ è½½`JAVA_HOME/lib/rt.jar`ç­‰æ ¸å¿ƒåº“ï¼ˆå¦‚`java.lang.*`ï¼‰[2,8](@ref)ã€‚
   - **æœç´¢è·¯å¾„**ï¼šä»…é™JREæ ¸å¿ƒJARã€‚

2. **æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰**

   - åŠ è½½`JAVA_HOME/lib/ext/*.jar`ä¸­çš„æ‰©å±•ç±»ï¼ˆå¦‚`javax.*`ï¼‰[6,8](@ref)ã€‚
   - **æœç´¢è·¯å¾„**ï¼šç”±`-Djava.ext.dirs`æŒ‡å®šã€‚

3. **åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰**

   - åŠ è½½Classpathä¸­ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠç¬¬ä¸‰æ–¹JARï¼ˆå¦‚é¡¹ç›®`lib/`ç›®å½•ï¼‰[5,6](@ref)ã€‚

   - 

     å·¥ä½œæµç¨‹

     ï¼š

     - éå†Classpathæ¯ä¸ªæ¡ç›®ï¼ˆç›®å½•æˆ–JARï¼‰ã€‚
     - åœ¨ç›®å½•ä¸­æŒ‰åŒ…è·¯å¾„æŸ¥æ‰¾`.class`æ–‡ä»¶ï¼ˆå¦‚`com/example/MyClass.class`ï¼‰ã€‚
     - åœ¨JARä¸­æŒ‰ç›¸åŒè·¯å¾„å®šä½å†…éƒ¨æ¡ç›®ï¼ˆå¦‚JARå†…çš„`com/example/MyClass.class`ï¼‰[9](@ref)ã€‚

------

### âš¡ï¸ ä¸‰ã€JARåŒ…å†…éƒ¨çš„å®šä½åŸç†

JARæœ¬è´¨æ˜¯ZIPæ ¼å¼å‹ç¼©æ–‡ä»¶ï¼Œç±»åŠ è½½å™¨å°†å…¶è§†ä¸ºè™šæ‹Ÿç›®å½•ç»“æ„ï¼š

1. 

   JARæ¡ç›®æ‰«æ

   

   - ç±»åŠ è½½å™¨è§£æJARæ—¶ï¼Œéå†å…¶å†…éƒ¨æ¡ç›®ï¼ˆ`JarEntry`ï¼‰ï¼ŒåŒ¹é…è·¯å¾„æ ¼å¼ï¼ˆå¦‚`com/example/MyClass.class`ï¼‰[9](@ref)ã€‚

2. 

   ç¼“å­˜ä¼˜åŒ–

   

   - é¦–æ¬¡åŠ è½½åï¼Œç±»ä¿¡æ¯åŠæ¥æºJARè·¯å¾„ä¼šè¢«ç¼“å­˜ï¼Œåç»­ç›´æ¥ä»å†…å­˜è¯»å–ï¼Œé¿å…é‡å¤æ‰«æ[3,8](@ref)ã€‚

------

### âš ï¸ å››ã€å…³é”®ç»†èŠ‚ä¸å†²çªè§£å†³

1. **ç±»è·¯å¾„ä¼˜å…ˆçº§**

   - è‹¥å¤šä¸ªJARåŒ…å«åŒåç±»ï¼ˆå¦‚`log4j-core-2.0.jar`å’Œ`log4j-core-1.0.jar`å‡æœ‰`org.apache.log4j.Core.class`ï¼‰ï¼ŒJVMæŒ‰Classpathå£°æ˜é¡ºåºåŠ è½½**ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹**ï¼Œåç»­å¿½ç•¥[6](@ref)ã€‚
   - **ç¤ºä¾‹**ï¼š`-cp lib/A.jar:lib/B.jar` â†’ ä¼˜å…ˆåŠ è½½`A.jar`ä¸­çš„ç±»ã€‚

2. **éªŒè¯ç±»æ¥æºçš„æ–¹æ³•**

   - **åå°„API**ï¼šé€šè¿‡`ClassLoader.getResource()`è·å–ç±»æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚`jar:file:/app/lib/utils.jar!/com/util/StringUtils.class`ï¼‰[1](@ref)ã€‚

   - 

     å‘½ä»¤è¡Œå·¥å…·

     ï¼š

     - `jps`æŸ¥çœ‹Javaè¿›ç¨‹ID â†’ `jinfo <pid>`è¾“å‡ºç±»è·¯å¾„[1](@ref)ã€‚
     - `jar tf app.jar`åˆ—å‡ºJARå†…å®¹[6](@ref)ã€‚

------

### ğŸ’ æ€»ç»“

JVMå®šä½ç±»æ‰€å±JARçš„æ ¸å¿ƒæ­¥éª¤ï¼š

1. **è·¯å¾„æ˜ å°„**ï¼šå°†å…¨é™å®šåè½¬æ¢ä¸ºæ–‡ä»¶è·¯å¾„ï¼ˆ`åŒ…å/ç±»å.class`ï¼‰ã€‚
2. **å±‚çº§æœç´¢**ï¼šæŒ‰åŒäº²å§”æ´¾æ¨¡å‹ï¼Œä»æ ¸å¿ƒåº“â†’æ‰©å±•åº“â†’Classpathé¡ºåºæ‰«æã€‚
3. **JARè§£æ**ï¼šå°†JARè§†ä¸ºè™šæ‹Ÿç›®å½•ï¼ŒåŒ¹é…å†…éƒ¨æ¡ç›®è·¯å¾„ã€‚
4. **ç¼“å­˜ä¸å†²çªå¤„ç†**ï¼šä¼˜å…ˆåŠ è½½Classpathä¸­é å‰çš„JARï¼Œé¿å…é‡å¤åŠ è½½ã€‚

**æ’æŸ¥å»ºè®®**ï¼š

- ç±»å†²çªæ—¶è°ƒæ•´JARé¡ºåºæˆ–æ’é™¤å†—ä½™ä¾èµ–ï¼ˆMaven/Gradleçš„`<exclusions>`ï¼‰[6](@ref)ã€‚
- ä½¿ç”¨`-verbose:class`å‚æ•°è·Ÿè¸ªç±»åŠ è½½è¿‡ç¨‹[8](@ref)ã€‚

## JaråŒ…ç»“æ„

JARåŒ…æœ¬è´¨æ˜¯åŸºäºZIPæ ¼å¼çš„å‹ç¼©æ–‡ä»¶ï¼Œä½†JVMé€šè¿‡**å¤šå±‚ä¼˜åŒ–æœºåˆ¶**å®ç°äº†å¯¹å…¶ä¸­`.class`æ–‡ä»¶æˆ–`JarEntry`çš„é«˜æ•ˆè§£æã€‚å…¶æ ¸å¿ƒåŸç†å¯æ‹†è§£å¦‚ä¸‹ï¼š

------

### âš™ï¸ ä¸€ã€JARç»“æ„ä¸å¿«é€Ÿå®šä½æœºåˆ¶

1. **ZIPç›®å½•ç´¢å¼•åŠ é€Ÿ**
   JARä½œä¸ºZIPæ ¼å¼çš„æ‰©å±•ï¼Œå…¶æ–‡ä»¶æœ«å°¾å›ºå®šå­˜å‚¨**ä¸­å¤®ç›®å½•è®°å½•**â€‹ï¼ˆCentral Directoryï¼‰ï¼Œè®°å½•äº†æ¯ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€åç§»é‡å’Œå‹ç¼©ä¿¡æ¯ã€‚JVMï¼ˆé€šè¿‡`java.util.jar.JarFile`ï¼‰ä¼šé¦–å…ˆè¯»å–æ­¤ç›®å½•ï¼Œæ„å»º**å†…å­˜ç´¢å¼•è¡¨**â€‹ï¼ˆå¦‚HashMapï¼‰ï¼Œå°†ç±»åï¼ˆå¦‚`com/example/MyClass.class`ï¼‰æ˜ å°„åˆ°æ–‡ä»¶ä½ç½®ã€‚åç»­æŸ¥æ‰¾ç±»æ—¶ç›´æ¥é€šè¿‡ç´¢å¼•å®šä½ï¼Œæ— éœ€éå†æ•´ä¸ªJARæ–‡ä»¶[1,3](@ref)ã€‚
2. **JARä¸“å±ä¼˜åŒ–**
   - **æ¸…å•æ–‡ä»¶ç¼“å­˜**ï¼š`META-INF/MANIFEST.MF`åœ¨é¦–æ¬¡åŠ è½½æ—¶å³è¢«è§£æå¹¶ç¼“å­˜ï¼Œé¿å…é‡å¤è¯»å–[1](@ref)ã€‚
   - **ç±»åè·¯å¾„æ˜ å°„**ï¼šç±»åŠ è½½å™¨å°†å…¨é™å®šåï¼ˆå¦‚`com.example.MyClass`ï¼‰è½¬æ¢ä¸ºJARå†…éƒ¨è·¯å¾„ï¼ˆ`com/example/MyClass.class`ï¼‰ï¼Œç›´æ¥åŒ¹é…ç´¢å¼•æ¡ç›®[3,5](@ref)ã€‚

------

### ğŸš€ äºŒã€JVMç±»åŠ è½½ä¸JARè§£æçš„ååŒæµç¨‹

1. **æŒ‰éœ€åŠ è½½ï¼ˆLazy Loadingï¼‰**
   JVMä¸ä¼šåœ¨å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰ç±»ï¼Œè€Œæ˜¯**é¦–æ¬¡ä½¿ç”¨æ—¶**â€‹ï¼ˆå¦‚`new MyClass()`ï¼‰è§¦å‘åŠ è½½ã€‚ç±»åŠ è½½å™¨ï¼ˆå¦‚`URLClassLoader`ï¼‰ä»…ä»JARä¸­æå–ç›®æ ‡ç±»çš„å­—èŠ‚ç ï¼Œæ— å…³æ–‡ä»¶ä¸è¢«è§£å‹æˆ–è¯»å–[3,5](@ref)ã€‚
2. **å­—èŠ‚ç ç›´æ¥è¯»å–**
   é€šè¿‡`JarEntry.getInputStream()`è·å–`.class`æ–‡ä»¶çš„å­—èŠ‚æµåï¼ŒJVMç›´æ¥é€å…¥**ç±»åŠ è½½å­ç³»ç»Ÿ**ï¼Œè¿›è¡ŒéªŒè¯ã€å‡†å¤‡ã€è§£æç­‰é˜¶æ®µï¼Œæ— éœ€è§£å‹åˆ°ç£ç›˜[2,9](@ref)ã€‚æ­¤è¿‡ç¨‹ä¾èµ–`ZipFile`ç±»çš„æœ¬åœ°æ–¹æ³•ï¼ˆNative Methodï¼‰ï¼Œç›´æ¥æ“ä½œå‹ç¼©æ–‡ä»¶å†…å®¹ï¼Œå‡å°‘IOå¼€é”€[3](@ref)ã€‚
3. **èµ„æºæ–‡ä»¶çš„æ‡’åŠ è½½**
   éç±»èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€é…ç½®æ–‡ä»¶ï¼‰é€šè¿‡`ClassLoader.getResourceAsStream()`è¯»å–ï¼ŒåŒæ ·åˆ©ç”¨JARç´¢å¼•å¿«é€Ÿå®šä½ï¼Œä»…å½“è°ƒç”¨æ—¶æ‰è§£å‹æ•°æ®åˆ°å†…å­˜[1,7](@ref)ã€‚

------

### âš¡ï¸ ä¸‰ã€æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯

1. **å†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆMemory-Mapped Filesï¼‰**
   å¯¹äºé¢‘ç¹è®¿é—®çš„JARï¼ŒJVMå¯èƒ½é€šè¿‡`java.nio`å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼ˆ`MappedByteBuffer`ï¼‰ï¼Œåç»­è¯»å–ç›´æ¥æ“ä½œå†…å­˜ï¼Œé¿å…ç£ç›˜IO[3,7](@ref)ã€‚
2. **ç¼“å­˜æœºåˆ¶**
   - **å·²åŠ è½½ç±»ç¼“å­˜**ï¼šåŠ è½½è¿‡çš„ç±»å­˜å…¥`ClassLoader`çš„ç¼“å­˜ï¼ˆå¦‚`ClassLoader#classes`ï¼‰ï¼Œé‡å¤è¯·æ±‚ç›´æ¥è¿”å›å†…å­˜ä¸­çš„`Class`å¯¹è±¡[5,9](@ref)ã€‚
   - **JARæ–‡ä»¶å¥æŸ„ç¼“å­˜**ï¼š`JarFile`å®ä¾‹ä¼šç¼“å­˜æ‰“å¼€çš„JARæ–‡ä»¶å¥æŸ„ï¼Œé¿å…é‡å¤æ‰“å¼€åŒä¸€æ–‡ä»¶[3](@ref)ã€‚
3. **å¹¶å‘æ§åˆ¶**
   ç±»åŠ è½½è¿‡ç¨‹é€šè¿‡**åŒæ­¥é”**â€‹ï¼ˆå¦‚`ClassLoader#getClassLoadingLock`ï¼‰ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œé¿å…é‡å¤åŠ è½½[5,9](@ref)ã€‚

------

### âš ï¸ å››ã€æ€§èƒ½ç“¶é¢ˆä¸è§„é¿ç­–ç•¥

å°½ç®¡æœ‰ä¸Šè¿°ä¼˜åŒ–ï¼Œä»¥ä¸‹åœºæ™¯ä»å¯èƒ½å½±å“è§£æé€Ÿåº¦ï¼š

1. **å·¨å‹JARæ–‡ä»¶**
   ç´¢å¼•è¡¨è¿‡å¤§å¯¼è‡´å†…å­˜å ç”¨é«˜ï¼Œé¦–æ¬¡åŠ è½½å»¶è¿Ÿã€‚
   â€‹**ä¼˜åŒ–æ–¹æ¡ˆ**â€‹ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªJARï¼Œæˆ–ä½¿ç”¨æ¨¡å—åŒ–ï¼ˆJPMSï¼‰æŒ‰éœ€åŠ è½½[3,7](@ref)ã€‚
2. **ç¢ç‰‡åŒ–æ¡ç›®**
   å¤§é‡å°æ–‡ä»¶ï¼ˆå¦‚åƒä¸ª`.class`ï¼‰å¢åŠ ç´¢å¼•æ„å»ºæ—¶é—´ã€‚
   â€‹**ä¼˜åŒ–æ–¹æ¡ˆ**â€‹ï¼šåˆå¹¶ä¸ºå°‘é‡å¤§æ–‡ä»¶ï¼ˆå¦‚ä½¿ç”¨ProGuardæ··æ·†åˆå¹¶ï¼‰[3](@ref)ã€‚
3. **è¿œç¨‹JARåŠ è½½**
   ç½‘ç»œå­˜å‚¨ï¼ˆå¦‚NFSï¼‰çš„JARæ–‡ä»¶å—ç½‘ç»œå»¶è¿Ÿå½±å“ã€‚
   â€‹**ä¼˜åŒ–æ–¹æ¡ˆ**â€‹ï¼šé¢„çƒ­ç¼“å­˜æˆ–ä¸‹è½½åˆ°æœ¬åœ°ç£ç›˜[1](@ref)ã€‚

------

### ğŸ” äº”ã€åŸç”ŸAPIä¸å·¥å…·ç¤ºä¾‹

```
// æ‰‹åŠ¨è§£æJARæ¡ç›®ç¤ºä¾‹
try (JarFile jarFile = new JarFile("app.jar")) {
    JarEntry entry = jarFile.getJarEntry("com/example/MyClass.class");
    try (InputStream is = jarFile.getInputStream(entry)) {
        byte[] bytes = is.readAllBytes(); // ç›´æ¥è·å–å­—èŠ‚ç 
    }
}
```

æ­¤ä»£ç å±•ç¤º`JarFile`å¦‚ä½•é€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½æ¡ç›®å¹¶è¯»å–å­—èŠ‚æµ[2,9](@ref)ã€‚

------

### ğŸ’ æ€»ç»“

JVMé€šè¿‡ **ZIPä¸­å¤®ç›®å½•ç´¢å¼• â†’ ç±»åè·¯å¾„æ˜ å°„ â†’ æŒ‰éœ€æ‡’åŠ è½½ â†’ å†…å­˜ç›´æ¥æ“ä½œ** å››æ­¥ååŒï¼Œå®ç°JARå†…èµ„æºçš„å¿«é€Ÿè§£æã€‚ä¼˜åŒ–æ ¸å¿ƒåœ¨äºï¼š

1. **ç©ºé—´æ¢æ—¶é—´**ï¼šå†…å­˜ç´¢å¼•é¿å…å…¨é‡æ‰«æï¼›
2. **å‡å°‘IO**ï¼šå­—èŠ‚æµç›´è¯»ã€å†…å­˜æ˜ å°„ï¼›
3. **æŒ‰éœ€åŠ è½½**ï¼šé¿å…æ— ç”¨è§£å‹ã€‚

> **é™„ï¼šJARè§£ææ•ˆç‡å¯¹æ¯”**
>
> | **æ–¹æ³•**         | ç´¢å¼•æŸ¥æ‰¾ | å…¨é‡æ‰«æ |
> | ---------------- | -------- | -------- |
> | **é¦–æ¬¡åŠ è½½å»¶è¿Ÿ** | ä¸­       | é«˜       |
> | **ç±»æŸ¥æ‰¾é€Ÿåº¦**   | O(1)     | O(n)     |
> | **å†…å­˜å¼€é”€**     | ç´¢å¼•è¡¨   | æ—        |

ç”Ÿäº§ç¯å¢ƒä¸­åº”é¿å…å•JARè¿‡å¤§ï¼Œåˆç†æ‹†åˆ†æ¨¡å—ï¼Œå¹¶åˆ©ç”¨JVMå†…ç½®ä¼˜åŒ–é™ä½å»¶è¿Ÿã€‚

## provided ä¾èµ–

åœ¨ Maven ä¾èµ–ç®¡ç†ä¸­ï¼Œ**`provided`** æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¾èµ–èŒƒå›´ï¼ˆScopeï¼‰ï¼Œç”¨äºå£°æ˜æŸäº›ä¾èµ–åœ¨ç‰¹å®šé˜¶æ®µç”±å¤–éƒ¨ç¯å¢ƒæä¾›ï¼Œè€Œéç”±é¡¹ç›®è‡ªèº«æ‰“åŒ…æºå¸¦ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒç‰¹æ€§å’Œåº”ç”¨åœºæ™¯çš„è¯¦ç»†è§£æï¼š

------

### âš™ï¸ **ä¸€ã€`provided` ä¾èµ–çš„æ ¸å¿ƒå®šä¹‰**

1. **ç”Ÿå‘½å‘¨æœŸé˜¶æ®µå¯ç”¨æ€§**
   - **ç¼–è¯‘ä¸æµ‹è¯•é˜¶æ®µå¯ç”¨**ï¼š`provided` ä¾èµ–åœ¨é¡¹ç›®çš„**ç¼–è¯‘æœŸ**å’Œ**æµ‹è¯•æœŸ**ä¼šè¢«åŠ å…¥ç±»è·¯å¾„ï¼ˆClasspathï¼‰ï¼Œå› æ­¤ä»£ç ä¸­å¯æ­£å¸¸å¼•ç”¨å…¶ API[1,2,6,9](@ref)ã€‚
   - **è¿è¡Œé˜¶æ®µä¸åŒ…å«**ï¼šåœ¨é¡¹ç›®æ‰“åŒ…ï¼ˆå¦‚ç”Ÿæˆ WAR/JAR æ–‡ä»¶ï¼‰æ—¶ï¼Œè¿™äº›ä¾èµ–**ä¸ä¼šè¢«æ‰“å…¥æœ€ç»ˆäº§ç‰©**ä¸­ã€‚è¿™æ˜¯å› ä¸ºè¿è¡Œæ—¶ç¯å¢ƒï¼ˆå¦‚åº”ç”¨æœåŠ¡å™¨ã€JDK ç­‰ï¼‰å·²é»˜è®¤æä¾›è¯¥ä¾èµ–[1,3,6,10](@ref)ã€‚
2. **ä¾èµ–ä¼ é€’æ€§**
   `provided` ä¾èµ–**ä¸å…·å¤‡ä¼ é€’æ€§**ã€‚è‹¥æ¨¡å— A ä¾èµ–æ¨¡å— Bï¼ˆScope=`provided`ï¼‰ï¼Œè€Œæ¨¡å— B ä¾èµ–æ¨¡å— Cï¼Œåˆ™æ¨¡å— C â€‹**ä¸ä¼šè‡ªåŠ¨ä¼ é€’åˆ°æ¨¡å— A**â€‹ çš„ä¾èµ–ä¸­[9](@ref)ã€‚

------

### ğŸ¯ **äºŒã€å…¸å‹åº”ç”¨åœºæ™¯**

1. **å®¹å™¨æä¾›çš„ API**

   - **Servlet/JSP API**ï¼šå¼€å‘ Web åº”ç”¨æ—¶éœ€å¼•å…¥ `javax.servlet-api`ï¼Œä½†éƒ¨ç½²åˆ° Tomcat/Jetty ç­‰å®¹å™¨åï¼Œå®¹å™¨è‡ªèº«å·²æä¾›è¯¥ JAR åŒ…ã€‚è‹¥é‡å¤æ‰“åŒ…ä¼šå¯¼è‡´ç±»å†²çªï¼ˆå¦‚ `LinkageError`ï¼‰[6,10](@ref)ã€‚

   ```
   <dependency>
       <groupId>javax.servlet</groupId>
       <artifactId>javax.servlet-api</artifactId>
       <version>4.0.1</version>
       <scope>provided</scope>
   </dependency>
   ```

2. **ç¼–è¯‘æ—¶å·¥å…·åº“**

   - **Lombok**ï¼šåœ¨ç¼–è¯‘æœŸé€šè¿‡æ³¨è§£ç”Ÿæˆä»£ç ï¼ˆå¦‚ Getter/Setterï¼‰ï¼Œä½†è¿è¡Œæ—¶æ— éœ€æºå¸¦å…¶ JAR åŒ…[1](@ref)ã€‚

   ```
   <dependency>
       <groupId>org.projectlombok</groupId>
       <artifactId>lombok</artifactId>
       <version>1.18.24</version>
       <scope>provided</scope>
   </dependency>
   ```

3. **Java EE æ ‡å‡†åº“**

   - å¦‚ JAX-RSã€JPA ç­‰ APIï¼Œé€šå¸¸ç”±åº”ç”¨æœåŠ¡å™¨ï¼ˆå¦‚ WildFlyã€WebLogicï¼‰æä¾›å®ç°[2,9](@ref)ã€‚

------

### âš–ï¸ **ä¸‰ã€ä¸ `compile` ä¾èµ–çš„å¯¹æ¯”**

| **ç‰¹æ€§**           | **`provided`**      | **`compile`ï¼ˆé»˜è®¤ï¼‰** |
| ------------------ | ------------------- | --------------------- |
| **ç¼–è¯‘é˜¶æ®µå¯ç”¨**   | âœ…                   | âœ…                     |
| **æµ‹è¯•é˜¶æ®µå¯ç”¨**   | âœ…                   | âœ…                     |
| **è¿è¡Œé˜¶æ®µå¯ç”¨**   | âŒï¼ˆç”±å¤–éƒ¨ç¯å¢ƒæä¾›ï¼‰ | âœ…ï¼ˆæ‰“åŒ…åˆ°äº§ç‰©ä¸­ï¼‰     |
| **æ˜¯å¦æ‰“å…¥æœ€ç»ˆåŒ…** | âŒ                   | âœ…                     |
| **ä¾èµ–ä¼ é€’æ€§**     | âŒ                   | âœ…                     |

> ğŸ’¡ **å…³é”®åŒºåˆ«**ï¼š
>
> - `compile` ä¾èµ–åœ¨**æ‰€æœ‰é˜¶æ®µ**å‡æœ‰æ•ˆä¸”ä¼šæ‰“åŒ…åˆ°æœ€ç»ˆäº§ç‰©ï¼Œé€‚ç”¨äºé¡¹ç›®æ ¸å¿ƒåº“ï¼ˆå¦‚ Spring Coreã€æ•°æ®åº“è¿æ¥æ± ï¼‰[6,9](@ref)ã€‚
> - `provided` ä¾èµ–åœ¨**è¿è¡Œæ—¶éœ€ç”±ç¯å¢ƒä¿éšœå¯ç”¨**ï¼Œå¦åˆ™ä¼šå¼•å‘ `ClassNotFoundException`[10](@ref)ã€‚

------

### âš ï¸ **å››ã€æ³¨æ„äº‹é¡¹**

1. **ç¯å¢ƒä¸€è‡´æ€§é£é™©**
   è‹¥ç”Ÿäº§ç¯å¢ƒæœªæä¾›å£°æ˜ä¸º `provided` çš„ä¾èµ–ï¼ˆå¦‚å®¹å™¨ç‰ˆæœ¬ä¸åŒ¹é…ï¼‰ï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯[2,9](@ref)ã€‚
   â€‹**å»ºè®®**â€‹ï¼šåœ¨æ–‡æ¡£ä¸­æ˜ç¡®æ ‡æ³¨æ‰€éœ€çš„ç¯å¢ƒä¾èµ–ç‰ˆæœ¬ã€‚
2. **é¿å…æ»¥ç”¨**
   - ä»…å¯¹**ç¡®ç”±å¤–éƒ¨ç¯å¢ƒæä¾›**çš„ä¾èµ–ä½¿ç”¨ `provided`ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¿è¡Œæ—¶ç±»ç¼ºå¤±[7](@ref)ã€‚
   - éå®¹å™¨ç¯å¢ƒï¼ˆå¦‚ç‹¬ç«‹ Java åº”ç”¨ï¼‰ä¸­æ…ç”¨ã€‚
3. **ä¸ `optional` çš„åŒºåˆ«**
   - `optional` è¡¨ç¤ºä¾èµ–æ˜¯**å¯é€‰çš„**ï¼ˆå¦‚å¤šæ•°æ®åº“é©±åŠ¨ï¼‰ï¼Œä¸ä¼ é€’ä¹Ÿä¸å¼ºåˆ¶æ‰“åŒ…ï¼Œä½†**ä¸å½±å“è¿è¡Œæ—¶åŠŸèƒ½**[7](@ref)ã€‚
   - `provided` æ˜¯**å¿…éœ€çš„**ï¼Œä»…è¿è¡Œæ—¶ç”±å¤–éƒ¨æä¾›ã€‚

------

### ğŸ’ **æ€»ç»“**

`provided` ä¾èµ–æ˜¯ Maven ä¸­è§£å†³ **â€œç¯å¢ƒå·²æä¾›ã€é¡¹ç›®ä¸æ‰“åŒ…â€** åœºæ™¯çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé€šè¿‡**ç²¾å‡†æ§åˆ¶ä¾èµ–çš„ç”Ÿå‘½å‘¨æœŸ**ï¼Œé¿å…äº†ç±»å†²çªå¹¶ä¼˜åŒ–äº†æ„å»ºäº§ç‰©å¤§å°ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

1. **é¿å…å†—ä½™**ï¼šé˜²æ­¢ä¸å®¹å™¨/JDK æä¾›çš„ JAR åŒ…é‡å¤æ‰“åŒ…[6,10](@ref)ã€‚
2. **è§£å†³å†²çª**ï¼šæ¶ˆé™¤å› ç›¸åŒç±»è¢«å¤šæ¬¡åŠ è½½å¯¼è‡´çš„ `LinkageError`[10](@ref)ã€‚
3. **è½»é‡åŒ–éƒ¨ç½²**ï¼šå‡å°‘æ„å»ºäº§ç‰©ä½“ç§¯ï¼Œæå‡åˆ†å‘æ•ˆç‡ã€‚

**ä½¿ç”¨å‡†åˆ™**ï¼šæ˜ç¡®ä¾èµ–æ¥æºï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒä¸å¼€å‘/æµ‹è¯•ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼ŒåŒæ—¶å¯¹éå®¹å™¨æä¾›çš„ä¾èµ–æ…ç”¨æ­¤èŒƒå›´ã€‚

## Maven ä¾èµ–èŒƒå›´

ä»¥ä¸‹æ˜¯ Maven ä¾èµ–èŒƒå›´ï¼ˆDependency Scopeï¼‰çš„å…¨é¢è§£æï¼Œç»“åˆå…¶å®šä¹‰ã€é€‚ç”¨åœºæ™¯åŠå®é™…å½±å“ï¼Œå¸®åŠ©å¼€å‘è€…ç²¾å‡†ç®¡ç†é¡¹ç›®ä¾èµ–ï¼š

------

### âš™ï¸ **ä¸€ã€æ ¸å¿ƒä¾èµ–èŒƒå›´è¯¦è§£**

1. **`compile`ï¼ˆé»˜è®¤èŒƒå›´ï¼‰**

   - **å®šä¹‰**ï¼šä¾èµ–åœ¨**ç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œæ—¶**å‡æœ‰æ•ˆï¼Œé»˜è®¤èŒƒå›´[1,3,6](@ref)ã€‚
   - ç‰¹ç‚¹ï¼š
     - åŒ…å«åœ¨ç¼–è¯‘ç±»è·¯å¾„ã€æµ‹è¯•ç±»è·¯å¾„ã€è¿è¡Œæ—¶ç±»è·¯å¾„ã€‚
     - ä¼š**æ‰“åŒ…åˆ°æœ€ç»ˆæ„å»ºäº§ç‰©**ï¼ˆJAR/WARï¼‰ä¸­ã€‚
     - å…·æœ‰**ä¼ é€’æ€§**ï¼ˆä¾èµ–ä¼šä¼ é€’ç»™å…¶ä»–æ¨¡å—ï¼‰[4,6](@ref)ã€‚
   - **å…¸å‹åœºæ™¯**ï¼šé¡¹ç›®æ ¸å¿ƒåº“ï¼ˆå¦‚ Spring Coreã€Apache Commonsï¼‰[1,5](@ref)ã€‚

2. **`provided`ï¼ˆå·²æä¾›èŒƒå›´ï¼‰**

   - **å®šä¹‰**ï¼šä¾èµ–åœ¨**ç¼–è¯‘å’Œæµ‹è¯•æ—¶**éœ€è¦ï¼Œä½†**è¿è¡Œæ—¶ç”±ç¯å¢ƒæä¾›**ï¼ˆå¦‚å®¹å™¨æˆ–JDKï¼‰[1,4,7](@ref)ã€‚
   - ç‰¹ç‚¹ï¼š
     - ç¼–è¯‘/æµ‹è¯•ç±»è·¯å¾„æœ‰æ•ˆï¼Œ**è¿è¡Œæ—¶ç±»è·¯å¾„æ— æ•ˆ**ã€‚
     - **ä¸æ‰“åŒ…**åˆ°æœ€ç»ˆæ„å»ºäº§ç‰©ã€‚
     - **æ— ä¼ é€’æ€§**[4,6](@ref)ã€‚
   - å…¸å‹åœºæ™¯ï¼š
     - Servlet APIï¼ˆTomcat ç­‰å®¹å™¨å·²æä¾›ï¼‰[1,6](@ref)ã€‚
     - Lombokï¼ˆä»…ç¼–è¯‘æœŸç”Ÿæ•ˆï¼‰[1,7](@ref)ã€‚

3. **`runtime`ï¼ˆè¿è¡Œæ—¶èŒƒå›´ï¼‰**

   - **å®šä¹‰**ï¼šä¾èµ–åœ¨**è¿è¡Œæ—¶å’Œæµ‹è¯•æ—¶**éœ€è¦ï¼Œä½†**ç¼–è¯‘æ—¶ä¸éœ€è¦**[3,5](@ref)ã€‚
   - ç‰¹ç‚¹ï¼š
     - ç¼–è¯‘ç±»è·¯å¾„æ— æ•ˆï¼Œ**æµ‹è¯•/è¿è¡Œæ—¶ç±»è·¯å¾„æœ‰æ•ˆ**ã€‚
     - ä¼š**æ‰“åŒ…**åˆ°æœ€ç»ˆæ„å»ºäº§ç‰©ã€‚
     - **éƒ¨åˆ†ä¼ é€’æ€§**ï¼ˆä¼ é€’è§„åˆ™è§ä¸‹æ–‡è¡¨æ ¼ï¼‰[4,6](@ref)ã€‚
   - **å…¸å‹åœºæ™¯**ï¼šJDBC é©±åŠ¨ï¼ˆå¦‚ `mysql-connector-java`ï¼‰[2,5](@ref)ã€‚

4. **`test`ï¼ˆæµ‹è¯•èŒƒå›´ï¼‰**

   - **å®šä¹‰**ï¼šä¾èµ–**ä»…åœ¨æµ‹è¯•é˜¶æ®µ**ï¼ˆç¼–è¯‘æµ‹è¯•ä»£ç ã€è¿è¡Œæµ‹è¯•ï¼‰æœ‰æ•ˆ[3,6](@ref)ã€‚
   - ç‰¹ç‚¹ï¼š
     - ä¸»ä»£ç ç¼–è¯‘å’Œè¿è¡Œæ—¶æ— æ•ˆã€‚
     - **ä¸æ‰“åŒ…**åˆ°æœ€ç»ˆæ„å»ºäº§ç‰©ã€‚
     - **æ— ä¼ é€’æ€§**[4,7](@ref)ã€‚
   - **å…¸å‹åœºæ™¯**ï¼šå•å…ƒæµ‹è¯•æ¡†æ¶ï¼ˆå¦‚ JUnitã€Mockitoï¼‰[1,6](@ref)ã€‚

5. **`system`ï¼ˆç³»ç»ŸèŒƒå›´ï¼‰**

   - **å®šä¹‰**ï¼šç±»ä¼¼ `provided`ï¼Œä½†éœ€é€šè¿‡ **`systemPath` æ˜¾å¼æŒ‡å®šæœ¬åœ°è·¯å¾„**[3,5,7](@ref)ã€‚

   - ç‰¹ç‚¹ï¼š

     - ç¼–è¯‘/æµ‹è¯•ç±»è·¯å¾„æœ‰æ•ˆï¼Œè¿è¡Œæ—¶æ— æ•ˆã€‚
     - **ä¸æ‰“åŒ…**ä¸”**æ— ä¼ é€’æ€§**ã€‚
     - **ä¸æ¨èä½¿ç”¨**ï¼ˆç ´åæ„å»ºå¯ç§»æ¤æ€§ï¼‰[5,7](@ref)ã€‚

   - ç¤ºä¾‹ï¼š

     ```
     <dependency>
         <groupId>com.oracle</groupId>
         <artifactId>ojdbc6</artifactId>
         <scope>system</scope>
         <systemPath>${project.basedir}/lib/ojdbc6.jar</systemPath>
     </dependency>
     ```

6. **`import`ï¼ˆå¯¼å…¥èŒƒå›´ï¼‰**

   - **å®šä¹‰**ï¼šä»…ç”¨äº `<dependencyManagement>`ï¼Œ**å¯¼å…¥å…¶ä»– POM çš„ä¾èµ–ç®¡ç†é…ç½®**[5,6](@ref)ã€‚
   - ç‰¹ç‚¹ï¼š
     - ä¸å®é™…å¼•å…¥ä¾èµ–ï¼Œä»…ç®¡ç†ç‰ˆæœ¬å’ŒèŒƒå›´ã€‚
     - é€‚ç”¨äº **BOMï¼ˆBill of Materialsï¼‰æ–‡ä»¶**[6](@ref)ã€‚
   - **å…¸å‹åœºæ™¯**ï¼šç»Ÿä¸€ç®¡ç† Spring Boot æˆ– Spring Cloud çš„ä¾èµ–ç‰ˆæœ¬[5,6](@ref)ã€‚

------

### ğŸ”— **äºŒã€ä¾èµ–èŒƒå›´çš„å½±å“ä¸ä¼ é€’æ€§è§„åˆ™**

#### **ä¾èµ–ä¼ é€’è§„åˆ™è¡¨**

| **ç¬¬ä¸€ç›´æ¥ä¾èµ–èŒƒå›´** | **ç¬¬äºŒç›´æ¥ä¾èµ–èŒƒå›´** â†’ ä¼ é€’ç»“æœ                            |
| -------------------- | ---------------------------------------------------------- |
| `compile`            | `compile` â†’ `compile` Â· `test` â†’ âŒ Â· `runtime` â†’ `runtime` |
| `provided`           | ä»»ä½•èŒƒå›´ â†’ âŒï¼ˆæ— ä¼ é€’ï¼‰                                     |
| `runtime`            | `compile` â†’ `runtime` Â· `runtime` â†’ `runtime`              |
| `test`               | ä»»ä½•èŒƒå›´ â†’ âŒï¼ˆæ— ä¼ é€’ï¼‰                                     |

> **æ³¨**ï¼š`provided` å’Œ `test` ä¾èµ–æ°¸è¿œä¸ä¼šä¼ é€’[4,6](@ref)ã€‚

------

### âš ï¸ **ä¸‰ã€ä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ**

1. é¿å…æ»¥ç”¨ provided
   - ç¡®ä¿ç”Ÿäº§ç¯å¢ƒ**ä¸€å®šæä¾›**è¯¥ä¾èµ–ï¼ˆå¦‚ Tomcat çš„ Servlet APIï¼‰ï¼Œå¦åˆ™å¼•å‘ `ClassNotFoundException`[1,7](@ref)ã€‚
2. ä¼˜å…ˆä½¿ç”¨æ ‡å‡†ä»“åº“ä¾èµ–
   - é¿å… `system` èŒƒå›´ï¼Œæ”¹ç”¨ `mvn install` å°†æœ¬åœ°åº“å®‰è£…åˆ°ä»“åº“[3,5](@ref)ã€‚
3. ä¾èµ–å†²çªè§£å†³
   - **è·¯å¾„æœ€è¿‘åŸåˆ™**ï¼šä¾èµ–è·¯å¾„çŸ­çš„ç‰ˆæœ¬ä¼˜å…ˆã€‚
   - **æœ€å…ˆå£°æ˜åŸåˆ™**ï¼šPOM ä¸­å…ˆå£°æ˜çš„ä¾èµ–ä¼˜å…ˆ[4](@ref)ã€‚
4. æµ‹è¯•ä¾èµ–éš”ç¦»
   - æ‰€æœ‰æµ‹è¯•åº“ï¼ˆå¦‚ JUnitï¼‰å¿…é¡»ç”¨ `test` èŒƒå›´ï¼Œé˜²æ­¢æ±¡æŸ“ç”Ÿäº§åŒ…[1,6](@ref)ã€‚
5. å¤šæ¨¡å—é¡¹ç›®ç®¡ç†
   - çˆ¶ POM ä½¿ç”¨ `<dependencyManagement>` + `import` èŒƒå›´ç»Ÿä¸€ç‰ˆæœ¬[5,6](@ref)ã€‚

------

### ğŸ’ **å››ã€æ€»ç»“ï¼šä¾èµ–èŒƒå›´é€ŸæŸ¥è¡¨**

| **èŒƒå›´**       | **ç¼–è¯‘** | **æµ‹è¯•** | **è¿è¡Œ** | **æ‰“åŒ…** | **ä¼ é€’æ€§** | **å…¸å‹ç”¨ä¾‹**              |
| -------------- | -------- | -------- | -------- | -------- | ---------- | ------------------------- |
| **`compile`**  | âœ…        | âœ…        | âœ…        | âœ…        | âœ…          | Spring Core, Commons Lang |
| **`provided`** | âœ…        | âœ…        | âŒ        | âŒ        | âŒ          | Servlet API, Lombok       |
| **`runtime`**  | âŒ        | âœ…        | âœ…        | âœ…        | âš ï¸Â¹         | JDBC é©±åŠ¨                 |
| **`test`**     | âŒ        | âœ…        | âŒ        | âŒ        | âŒ          | JUnit, Mockito            |
| **`system`**   | âœ…        | âœ…        | âŒ        | âŒ        | âŒ          | æœ¬åœ°ç³»ç»Ÿåº“ï¼ˆä¸æ¨èï¼‰      |
| **`import`**   | -        | -        | -        | -        | -          | ç®¡ç† BOM ä¾èµ–ç‰ˆæœ¬         |

> Â¹ `runtime` ä¼ é€’æ€§ï¼šå½“ç¬¬ä¸€ä¾èµ–ä¸º `compile` æ—¶ï¼Œä¼ é€’ç»“æœä¸º `runtime`ï¼›å¦åˆ™ä¸ç¬¬ä¸€ä¾èµ–èŒƒå›´ç›¸åŒ[4,6](@ref)ã€‚

åˆç†é€‰æ‹©ä¾èµ–èŒƒå›´å¯æ˜¾è‘—ä¼˜åŒ–æ„å»ºæ•ˆç‡ã€å‡å°‘åŒ…ä½“ç§¯ï¼Œå¹¶è§„é¿ç¯å¢ƒå†²çªé—®é¢˜ã€‚å»ºè®®ç»“åˆ Maven å‘½ä»¤ `mvn dependency:tree -Dscope=compile` åˆ†æå®é™…ä¾èµ–æ ‘[4,6](@ref)ã€‚

## BOM & POM

åœ¨Javaç”Ÿæ€ä¸­ï¼Œ**BOM**ï¼ˆBill of Materialsï¼Œç‰©æ–™æ¸…å•ï¼‰å’Œ**POM**ï¼ˆProject Object Modelï¼Œé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯Mavenä¾èµ–ç®¡ç†å’Œé¡¹ç›®æ„å»ºçš„æ ¸å¿ƒæ¦‚å¿µï¼ŒäºŒè€…ååŒå·¥ä½œä½†èŒè´£ä¸åŒã€‚ä»¥ä¸‹è¯¦ç»†è§£æï¼š

------

### âš™ï¸ **ä¸€ã€BOMï¼šç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬çš„â€œå…¼å®¹æ€§æ¸…å•â€**

#### 1. **å®šä¹‰ä¸ä½œç”¨**

- **æ ¸å¿ƒç›®æ ‡**ï¼šè§£å†³å¤šæ¨¡å—é¡¹ç›®ä¸­**ä¾èµ–ç‰ˆæœ¬å†²çª**é—®é¢˜ï¼Œç¡®ä¿ä¸€ç»„å…³è”åº“ï¼ˆå¦‚Springå…¨å®¶æ¡¶ã€Nettyæ¨¡å—ï¼‰çš„ç‰ˆæœ¬å…¼å®¹æ€§[1,4,5](@ref)ã€‚
- **å®ç°æ–¹å¼**ï¼šBOMæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„POMæ–‡ä»¶ï¼Œåœ¨`<dependencyManagement>`ä¸­å®šä¹‰**å®¶æ—å¼ä¾èµ–**ï¼ˆå¦‚Jettyã€Nettyçš„æ‰€æœ‰å­æ¨¡å—ï¼‰çš„æ¨èç‰ˆæœ¬ï¼Œä½†ä¸ç›´æ¥å¼•å…¥ä¾èµ–[1,2](@ref)ã€‚

#### 2. **ä½¿ç”¨åœºæ™¯**

- **å¤§å‹æ¡†æ¶é›†æˆ**ï¼šä¾‹å¦‚Spring Bootçš„`spring-boot-dependencies`ï¼Œç®¡ç†Springç”Ÿæ€åŠç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Jacksonã€Logbackï¼‰çš„å…¼å®¹ç‰ˆæœ¬[1,4](@ref)ã€‚
- **ä¼ä¸šçº§å¤šæ¨¡å—é¡¹ç›®**ï¼šç»Ÿä¸€å†…éƒ¨è‡ªç ”åº“çš„ç‰ˆæœ¬ï¼Œé¿å…å„æ¨¡å—éšæ„æŒ‡å®šç‰ˆæœ¬å¯¼è‡´å†²çª[1,5](@ref)ã€‚

#### 3. **å·¥ä½œåŸç†**

```
<!-- åœ¨çˆ¶POMä¸­å¼•å…¥BOM -->
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-dependencies</artifactId>
            <version>3.0.0</version>
            <type>pom</type>
            <scope>import</scope>  <!-- å…³é”®ï¼šscope=import -->
        </dependency>
    </dependencies>
</dependencyManagement>

<!-- å­æ¨¡å—ç›´æ¥ä½¿ç”¨ä¾èµ–ï¼ˆæ— éœ€ç‰ˆæœ¬å·ï¼‰ -->
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
</dependencies>
```

- **`scope=import`**ï¼šå°†BOMä¸­çš„ç‰ˆæœ¬å®šä¹‰åˆå¹¶åˆ°å½“å‰POMçš„`<dependencyManagement>`[1,4](@ref)ã€‚

#### 4. **ä¼˜åŠ¿**

- **é¿å…ç‰ˆæœ¬å†²çª**ï¼šå¼ºåˆ¶æ‰€æœ‰æ¨¡å—ä½¿ç”¨BOMå®šä¹‰çš„ç‰ˆæœ¬ï¼Œæ¶ˆé™¤â€œä¾èµ–åœ°ç‹±â€[5](@ref)ã€‚
- **ç®€åŒ–é…ç½®**ï¼šå­æ¨¡å—å£°æ˜ä¾èµ–æ—¶æ— éœ€æŒ‡å®šç‰ˆæœ¬[2,4](@ref)ã€‚
- **é›†ä¸­å‡çº§**ï¼šä¿®æ”¹BOMç‰ˆæœ¬å³å¯å…¨å±€å‡çº§ä¾èµ–[1](@ref)ã€‚

------

### ğŸ“¦ **äºŒã€POMï¼šé¡¹ç›®æ„å»ºçš„â€œå…ƒæ•°æ®è“å›¾â€**

#### 1. **å®šä¹‰ä¸ä½œç”¨**

- **æ ¸å¿ƒç›®æ ‡**ï¼šæè¿°é¡¹ç›®çš„**ç»“æ„ã€ä¾èµ–ã€æ„å»ºè§„åˆ™**ï¼Œæ˜¯Mavenæ„å»ºè¿‡ç¨‹çš„å”¯ä¸€ä¾æ®[3,8,9](@ref)ã€‚
- **ç‰©ç†æ–‡ä»¶**ï¼šé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`pom.xml`ã€‚

#### 2. **å…³é”®å…ƒç´ **

| **å…ƒç´ **               | **ä½œç”¨**                     | **ç¤ºä¾‹**                          |
| ---------------------- | ---------------------------- | --------------------------------- |
| `groupId`              | ç»„ç»‡æ ‡è¯†ï¼ˆåå‘åŸŸåï¼‰         | `<groupId>com.example</groupId>`  |
| `artifactId`           | é¡¹ç›®å”¯ä¸€æ ‡è¯†                 | `<artifactId>my-app</artifactId>` |
| `version`              | é¡¹ç›®ç‰ˆæœ¬                     | `<version>1.0-SNAPSHOT</version>` |
| `packaging`            | æ‰“åŒ…ç±»å‹ï¼ˆjar/war/pomï¼‰      | `<packaging>jar</packaging>`      |
| `dependencies`         | å£°æ˜é¡¹ç›®ä¾èµ–                 | è§ä¸‹æ–¹ç¤ºä¾‹                        |
| `dependencyManagement` | ç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼ˆä¾›å­æ¨¡å—ç»§æ‰¿ï¼‰ | å®šä¹‰BOMæˆ–ç»Ÿä¸€ç‰ˆæœ¬                 |
| `build`                | é…ç½®æ„å»ºæ’ä»¶ï¼ˆç¼–è¯‘ã€æ‰“åŒ…ç­‰ï¼‰ | æŒ‡å®šJDKç‰ˆæœ¬ã€èµ„æºç›®å½•             |
| `properties`           | å®šä¹‰å…¨å±€å˜é‡                 | `<java.version>11</java.version>` |

#### 3. **æ ¸å¿ƒåŠŸèƒ½**

- 

  ä¾èµ–ç®¡ç†

  ï¼š

  ```
  <dependencies>
      <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.12</version>
          <scope>test</scope>  <!-- ä½œç”¨åŸŸæ§åˆ¶ -->
      </dependency>
  </dependencies>
  ```

- 

  æ„å»ºç”Ÿå‘½å‘¨æœŸæ§åˆ¶

  ï¼š

  - **clean**ï¼šåˆ é™¤`target`ç›®å½•[10](@ref)ã€‚
  - **compile**ï¼šç¼–è¯‘ä¸»ä»£ç ã€‚
  - **test**ï¼šè¿è¡Œå•å…ƒæµ‹è¯•ã€‚
  - **package**ï¼šç”ŸæˆJAR/WARåŒ…[8,10](@ref)ã€‚

- 

  å¤šæ¨¡å—èšåˆ

  ï¼š

  ```
  <!-- çˆ¶æ¨¡å—ï¼ˆpackaging=pomï¼‰ -->
  <modules>
      <module>module-a</module>
      <module>module-b</module>
  </modules>
  ```

------

### ğŸ”„ **ä¸‰ã€BOMä¸POMçš„å…³ç³»ä¸å¯¹æ¯”**

| **ç‰¹æ€§**         | **BOM**                                 | **POM**                              |
| ---------------- | --------------------------------------- | ------------------------------------ |
| **æœ¬è´¨**         | ç‰¹æ®ŠPOMï¼ˆä»…å«`<dependencyManagement>`ï¼‰ | æ ‡å‡†é¡¹ç›®é…ç½®æ–‡ä»¶                     |
| **ä¸»è¦ä½œç”¨**     | ç»Ÿä¸€ç®¡ç†**ä¾èµ–ç‰ˆæœ¬**                    | å®šä¹‰**é¡¹ç›®ç»“æ„ã€ä¾èµ–ã€æ„å»ºè§„åˆ™**     |
| **ä½¿ç”¨åœºæ™¯**     | è§£å†³å®¶æ—å¼ä¾èµ–å…¼å®¹æ€§é—®é¢˜                | ä»»ä½•Mavené¡¹ç›®çš„åŸºç¡€é…ç½®              |
| **æ˜¯å¦å¼•å…¥ä¾èµ–** | âŒï¼ˆä»…å®šä¹‰ç‰ˆæœ¬ï¼‰                         | âœ…ï¼ˆé€šè¿‡`<dependencies>`å¼•å…¥ï¼‰        |
| **å…³é”®æ ‡è¯†**     | `<scope>import</scope>`                 | `<packaging>jar/war/pom</packaging>` |

#### **ååŒå·¥ä½œç¤ºä¾‹**ï¼š

1. **çˆ¶POM**ï¼šå¼•å…¥BOMå¹¶ç®¡ç†å…¬å…±é…ç½®ã€‚
2. **å­æ¨¡å—POM**ï¼šç»§æ‰¿çˆ¶POMï¼Œç›´æ¥ä½¿ç”¨BOMä¸­çš„ä¾èµ–ç‰ˆæœ¬ã€‚
3. **æ„å»ºæµç¨‹**ï¼šMavenè¯»å–POM â†’ è§£æBOMç‰ˆæœ¬ â†’ ä¸‹è½½ä¾èµ– â†’ æ‰§è¡Œæ„å»º[1,10](@ref)ã€‚

------

### âš ï¸ **å››ã€å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ**

1. **BOMçš„è¯¯ç”¨**
   - é”™è¯¯ï¼šå°†BOMæ”¾åœ¨`<dependencies>`è€Œé`<dependencyManagement>`ä¸­ï¼Œå¯¼è‡´ç›´æ¥å¼•å…¥æ— ç”¨ä¾èµ–ã€‚
   - æ­£ç¡®ï¼šä»…ç”¨`<scope>import`å¯¼å…¥ç‰ˆæœ¬å®šä¹‰[4](@ref)ã€‚
2. **POMè‡ƒè‚¿**
   - **è§£è€¦æ–¹æ¡ˆ**ï¼šå°†æ’ä»¶é…ç½®ã€å±æ€§å®šä¹‰æ‹†åˆ†åˆ°çˆ¶POMï¼Œå­æ¨¡å—ä»…å£°æ˜ä¸šåŠ¡ä¾èµ–[9,10](@ref)ã€‚
3. **ç‰ˆæœ¬å†²çªä¼˜å…ˆçº§**
   - Mavenè§„åˆ™ï¼š**å°±è¿‘åŸåˆ™**ï¼ˆä¾èµ–æ ‘ä¸­è·¯å¾„æœ€çŸ­çš„ç‰ˆæœ¬ç”Ÿæ•ˆï¼‰[5](@ref)ã€‚
   - åº”å¯¹ï¼šç”¨`mvn dependency:tree`åˆ†æä¾èµ–æ ‘ï¼Œé€šè¿‡`<exclusions>`æ’é™¤å†²çªç‰ˆæœ¬[5](@ref)ã€‚

------

### ğŸ’ **æ€»ç»“**

- **BOM**ï¼šæ˜¯â€œ**ç‰ˆæœ¬å…¼å®¹æ€§åˆçº¦**â€ï¼Œé€šè¿‡é›†ä¸­ç®¡ç†å®¶æ—å¼ä¾èµ–çš„ç‰ˆæœ¬ï¼Œç¡®ä¿æ¨¡å—é—´åä½œæ— å†²çª[1,4](@ref)ã€‚
- **POM**ï¼šæ˜¯â€œ**é¡¹ç›®æ„å»ºè¯´æ˜ä¹¦**â€ï¼Œå®šä¹‰ä»ç¼–ç åˆ°éƒ¨ç½²çš„å…¨ç”Ÿå‘½å‘¨æœŸè§„åˆ™[8,10](@ref)ã€‚

**äºŒè€…å…³ç³»**ï¼šBOMæ˜¯POMçš„é«˜çº§åº”ç”¨ï¼Œé€šè¿‡`<dependencyManagement>` + `import`ä½œç”¨åŸŸå®ç°ç‰ˆæœ¬ä»²è£ï¼Œæœ€ç»ˆç”±POMé©±åŠ¨æ„å»ºæ‰§è¡Œã€‚æŒæ¡ä¸¤è€…åŒºåˆ«ä¸è”åŠ¨ï¼Œæ˜¯é«˜æ•ˆç®¡ç†Javaé¡¹ç›®çš„å…³é”®èƒ½åŠ›ã€‚