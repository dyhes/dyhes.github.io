---
title: ã€Linuxã€‘Concepts
date: 2025-07-01 00:00:00+0000
categories: [nutrition, willow]
tags:
- Linux
---
## ç›®å½•

Linux ç›®å½•ç»“æ„é‡‡ç”¨æ ‘çŠ¶å±‚çº§è®¾è®¡ï¼Œä»¥æ ¹ç›®å½•ï¼ˆ`/`ï¼‰ä¸ºèµ·ç‚¹ï¼Œæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å‡é€šè¿‡çˆ¶å­å…³ç³»ç»„ç»‡ã€‚è¿™ç§è®¾è®¡éµå¾ª **æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡æ ‡å‡†**ï¼ˆFilesystem Hierarchy Standard, FHSï¼‰ï¼Œç¡®ä¿ä¸åŒå‘è¡Œç‰ˆçš„ä¸€è‡´æ€§ã€‚ä»¥ä¸‹æŒ‰åŠŸèƒ½åˆ†ç±»è¯¦è§£ä¸»è¦ç›®å½•åŠå…¶æ ¸å¿ƒä½œç”¨ï¼š


------
### ğŸ“ **æ ¸å¿ƒç³»ç»Ÿç›®å½•**

1. **`/`ï¼ˆæ ¹ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šæ–‡ä»¶ç³»ç»Ÿçš„èµ·ç‚¹ï¼Œæ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶çš„é¡¶å±‚çˆ¶ç›®å½•[1,5,7](@ref)ã€‚
   - **é‡è¦å†…å®¹**ï¼šä»…å­˜æ”¾å¿…è¦çš„å­ç›®å½•ï¼ˆå¦‚ `/bin`ã€`/etc`ï¼‰ï¼Œé¿å…ç›´æ¥å­˜å‚¨ç”¨æˆ·æ–‡ä»¶ã€‚
2. **`/bin`ï¼ˆäºŒè¿›åˆ¶å‘½ä»¤ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜æ”¾æ‰€æœ‰ç”¨æˆ·å¯ç”¨çš„åŸºç¡€å‘½ä»¤ï¼ˆå¦‚ `ls`ã€`cp`ã€`mkdir`ï¼‰ï¼Œç³»ç»Ÿå¯åŠ¨å’Œç»´æŠ¤å¿…éœ€[2,5,7](@ref)ã€‚
   - **å…³è”ç›®å½•**ï¼š`/usr/bin`ï¼ˆç”¨æˆ·å®‰è£…çš„å‘½ä»¤ï¼‰å’Œ `/sbin`ï¼ˆç®¡ç†å‘˜å‘½ä»¤ï¼‰ã€‚
3. **`/sbin`ï¼ˆç³»ç»Ÿç®¡ç†å‘½ä»¤ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜æ”¾éœ€ **root æƒé™** æ‰§è¡Œçš„ç³»ç»Ÿç®¡ç†å·¥å…·ï¼ˆå¦‚ `fdisk`ã€`ifconfig`ï¼‰[3,7,8](@ref)ã€‚
4. **`/boot`ï¼ˆå¯åŠ¨æ–‡ä»¶ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜å‚¨å†…æ ¸æ–‡ä»¶ï¼ˆ`vmlinuz`ï¼‰ã€å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆå¦‚ GRUBï¼‰ç­‰å¯åŠ¨å…³é”®æ–‡ä»¶[5,7,8](@ref)ã€‚
5. **`/etc`ï¼ˆé…ç½®æ–‡ä»¶ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šé›†ä¸­å­˜æ”¾ç³»ç»ŸåŠåº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ `/etc/passwd`ã€`/etc/fstab`ï¼‰[4,7,8](@ref)ã€‚
   - **è­¦å‘Š**ï¼šè¯¯ä¿®æ”¹å¯èƒ½å¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨ï¼


------
### ğŸ› ï¸ **ç¡¬ä»¶ä¸è®¾å¤‡ç®¡ç†**

1. **`/dev`ï¼ˆè®¾å¤‡æ–‡ä»¶ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå°†ç¡¬ä»¶æŠ½è±¡ä¸ºæ–‡ä»¶ï¼ˆå¦‚ç¡¬ç›˜ `/dev/sda`ã€ç»ˆç«¯ `/dev/tty`ï¼‰ï¼Œé€šè¿‡æ–‡ä»¶æ¥å£æ“ä½œè®¾å¤‡[5,7,8](@ref)ã€‚
2. **`/proc`ï¼ˆè¿›ç¨‹ä¸å†…æ ¸ä¿¡æ¯ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼š**è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ**ï¼ŒåŠ¨æ€åæ˜ ç³»ç»ŸçŠ¶æ€ï¼ˆå¦‚ `cpuinfo`ã€`meminfo`ï¼‰ï¼Œä¿®æ”¹æ–‡ä»¶å¯å®æ—¶è°ƒæ•´å†…æ ¸å‚æ•°[4,7,8](@ref)ã€‚
3. **`/sys`ï¼ˆè®¾å¤‡é©±åŠ¨ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šç®¡ç†ç¡¬ä»¶è®¾å¤‡å’Œé©±åŠ¨ç¨‹åºçš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæä¾›ç”µæºç®¡ç†ã€è®¾å¤‡æ’æ‹”ç­‰æ¥å£[5,7](@ref)ã€‚


------
### ğŸ‘¤ **ç”¨æˆ·ä¸æ•°æ®ç›®å½•**

1. **`/home`ï¼ˆç”¨æˆ·ä¸»ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šæ™®é€šç”¨æˆ·çš„ä¸ªäººç©ºé—´ï¼ˆå¦‚ç”¨æˆ· `alice` çš„ç›®å½•ä¸º `/home/alice`ï¼‰ï¼Œå­˜æ”¾æ–‡æ¡£ã€é…ç½®æ–‡ä»¶ç­‰[5,7,8](@ref)ã€‚
2. **`/root`ï¼ˆè¶…çº§ç”¨æˆ·ä¸»ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šç®¡ç†å‘˜ï¼ˆrootï¼‰çš„ä¸“å±ç›®å½•ï¼Œç‹¬ç«‹äº `/home`[4,7](@ref)ã€‚
3. **`/opt`ï¼ˆç¬¬ä¸‰æ–¹è½¯ä»¶ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜æ”¾æ‰‹åŠ¨å®‰è£…çš„ç¬¬ä¸‰æ–¹åº”ç”¨ï¼ˆå¦‚ Oracleã€WPSï¼‰[4,6,7](@ref)ã€‚
4. **`/usr`ï¼ˆç”¨æˆ·ç¨‹åºèµ„æºç›®å½•ï¼‰**
   - å­ç›®å½•ç¤ºä¾‹ï¼š
     - `bin`ï¼šç”¨æˆ·å®‰è£…çš„å‘½ä»¤ï¼ˆå¦‚ `python`ï¼‰ã€‚
     - `lib`ï¼šå…±äº«åº“æ–‡ä»¶ã€‚
     - `local`ï¼šæœ¬åœ°ç¼–è¯‘å®‰è£…çš„è½¯ä»¶[4,7](@ref)ã€‚


------
### ğŸ“Š **åŠ¨æ€æ•°æ®ä¸ä¸´æ—¶æ–‡ä»¶**

1. **`/var`ï¼ˆå¯å˜æ•°æ®ç›®å½•ï¼‰**
   - ç”¨é€”ï¼šå­˜å‚¨é¢‘ç¹å˜æ›´çš„æ–‡ä»¶ï¼š
     - `/var/log`ï¼šç³»ç»Ÿæ—¥å¿—ï¼ˆå¦‚ `syslog`ï¼‰ã€‚
     - `/var/cache`ï¼šåº”ç”¨ç¼“å­˜ã€‚
     - `/var/spool`ï¼šä»»åŠ¡é˜Ÿåˆ—ï¼ˆå¦‚æ‰“å°ä»»åŠ¡ï¼‰[4,7,8](@ref)ã€‚
2. **`/tmp`ï¼ˆä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜æ”¾ä¸´æ—¶æ–‡ä»¶ï¼Œ**é‡å¯è‡ªåŠ¨æ¸…ç©º**ï¼Œæ‰€æœ‰ç”¨æˆ·å¯å†™[5,7,8](@ref)ã€‚
3. **`/run`ï¼ˆè¿è¡Œæ—¶æ•°æ®ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜å‚¨ç³»ç»Ÿå¯åŠ¨åçš„ä¸´æ—¶æ•°æ®ï¼ˆå¦‚è¿›ç¨‹ PID æ–‡ä»¶ï¼‰ï¼Œé‡å¯æ—¶æ¸…é™¤[5,7](@ref)ã€‚


------
### ğŸ”— **æŒ‚è½½ä¸å¤–éƒ¨è®¾å¤‡**

1. **`/mnt` & `/media`ï¼ˆæŒ‚è½½ç‚¹ç›®å½•ï¼‰**
   - ç”¨é€”ï¼šä¸´æ—¶æŒ‚è½½å¤–éƒ¨è®¾å¤‡ï¼ˆå¦‚ U ç›˜ã€ç½‘ç»œå…±äº«ï¼‰ï¼š
     - `/media`ï¼šè‡ªåŠ¨æŒ‚è½½å¯ç§»åŠ¨è®¾å¤‡ï¼ˆå¦‚ USBï¼‰ã€‚
     - `/mnt`ï¼šæ‰‹åŠ¨æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ[5,7,8](@ref)ã€‚
2. **`/srv`ï¼ˆæœåŠ¡æ•°æ®ç›®å½•ï¼‰**
   - **ç”¨é€”**ï¼šå­˜æ”¾æœåŠ¡ç›¸å…³æ•°æ®ï¼ˆå¦‚ Web æœåŠ¡å™¨çš„ç½‘ç«™æ–‡ä»¶ï¼‰[7,8](@ref)ã€‚


------
### ğŸ’¡ **è®¾è®¡å“²å­¦ä¸ä½¿ç”¨å»ºè®®**

- **ä¸€åˆ‡çš†æ–‡ä»¶**ï¼šç¡¬ä»¶ã€è¿›ç¨‹ã€é…ç½®å‡ä»¥æ–‡ä»¶å½¢å¼ç®¡ç†ï¼Œæä¾›ç»Ÿä¸€æ“ä½œæ¥å£ï¼ˆå¦‚ `cat /proc/cpuinfo` æŸ¥çœ‹ CPU ä¿¡æ¯ï¼‰[4,8](@ref)ã€‚
- **æƒé™ä¸å®‰å…¨**ï¼šé€šè¿‡æ–‡ä»¶æƒé™æ§åˆ¶èµ„æºè®¿é—®ï¼ˆå¦‚ `/etc` é…ç½®æ–‡ä»¶éœ€ root ä¿®æ”¹ï¼‰[4,7](@ref)ã€‚
- **æ—¥å¸¸æ“ä½œç›®å½•**ï¼šç”¨æˆ·åº”ä¼˜å…ˆä½¿ç”¨ `/home`ã€`/tmp`ã€`/opt`ï¼Œé¿å…ç›´æ¥æ“ä½œç³»ç»Ÿæ ¸å¿ƒç›®å½•[6,7](@ref)ã€‚


------
### **æ ¸å¿ƒç›®å½•é€ŸæŸ¥è¡¨**

| **ç›®å½•** | **ç”¨é€”**                       | **å…³é”®å†…å®¹ç¤ºä¾‹**              |
| -------- | ------------------------------ | ----------------------------- |
| `/bin`   | åŸºç¡€å‘½ä»¤                       | `ls`, `cp`, `cat`             |
| `/etc`   | é…ç½®æ–‡ä»¶                       | `passwd`, `fstab`, `network/` |
| `/dev`   | è®¾å¤‡æ–‡ä»¶                       | `sda`ï¼ˆç¡¬ç›˜ï¼‰, `tty`ï¼ˆç»ˆç«¯ï¼‰  |
| `/home`  | ç”¨æˆ·ä¸ªäººæ–‡ä»¶                   | `~/Documents`, `~/.config`    |
| `/var`   | åŠ¨æ€æ•°æ®ï¼ˆæ—¥å¿—ã€ç¼“å­˜ï¼‰         | `/var/log`, `/var/cache`      |
| `/proc`  | è¿›ç¨‹ä¸å†…æ ¸ä¿¡æ¯ï¼ˆè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ | `cpuinfo`, `meminfo`          |
> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š
>
> - ä¿®æ”¹é…ç½®å‰å¤‡ä»½ `/etc` ç›®å½•[4](@ref)ï¼›
> - å®šæœŸæ¸…ç† `/tmp` å’Œ `/var/log` é¿å…ç£ç›˜å æ»¡[6](@ref)ï¼›
> - ç¬¬ä¸‰æ–¹è½¯ä»¶ä¼˜å…ˆå®‰è£…åˆ° `/opt` æˆ– `/usr/local`[7](@ref)ã€‚
é€šè¿‡ç†è§£ç›®å½•ç»“æ„çš„é€»è¾‘ï¼Œå¯å¿«é€Ÿå®šä½èµ„æºã€é«˜æ•ˆç®¡ç†ç³»ç»Ÿï¼Œå¹¶é¿å…å› è¯¯æ“ä½œå¯¼è‡´æ•…éšœã€‚æ·±å…¥æŒæ¡ FHS æ ‡å‡†æ˜¯æˆä¸º Linux ç®¡ç†å‘˜æˆ–å¼€å‘è€…çš„å…³é”®ä¸€æ­¥ ğŸ”‘ã€‚
## etc

`etc` æ˜¯ Linux ç³»ç»Ÿç›®å½•ä¸­ä¸€ä¸ªå…³é”®åç§°ï¼Œå…¶å«ä¹‰å’ŒåŠŸèƒ½è®¾è®¡æºäºå†å²æ¼”å˜ä¸ç³»ç»Ÿç®¡ç†éœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š


------
### ğŸ”¤ **`etc` çš„ç¼©å†™æ¥æº**

1. **è¯æºä¸å†å²**
   - **åŸå§‹å«ä¹‰**ï¼š`etc` æºè‡ªæ‹‰ä¸è¯­ **â€œet ceteraâ€**ï¼ˆæ„ä¸ºâ€œåŠå…¶ä»–â€â€œç­‰ç­‰â€ï¼‰ï¼Œåœ¨æ—©æœŸ Unix ç³»ç»Ÿä¸­è¡¨ç¤º **â€œæ‚é¡¹å­˜å‚¨ç›®å½•â€**ï¼Œå­˜æ”¾ç³»ç»Ÿè¿è¡Œæ‰€éœ€çš„å„ç§é›¶æ•£æ–‡ä»¶[5,9](@ref)ã€‚
   - **æ¼”å˜è¿‡ç¨‹**ï¼šéšç€ç³»ç»Ÿæ ‡å‡†åŒ–ï¼Œè¯¥ç›®å½•é€æ¸èšç„¦äº **é…ç½®æ–‡ä»¶**ï¼Œä½†åç§°ä¿ç•™è‡³ä»Šï¼Œæˆä¸ºçº¦å®šä¿—æˆçš„æ ‡è¯†[8,9](@ref)ã€‚
2. **å¸¸è§è¯¯è§£**
   - å¸¸è¢«è¯¯è®¤ä¸º â€œEditable Text Configurationâ€ æˆ– â€œExtended Tool Chestâ€ï¼Œä½†å®é™…æ˜¯å†å²é—ç•™å‘½åï¼Œä¸åŠŸèƒ½æ— ç›´æ¥å…³è”[5,9](@ref)ã€‚


------
### ğŸ§© **ä¸ºä»€ä¹ˆé…ç½®æ–‡ä»¶é›†ä¸­å­˜æ”¾äº `/etc`ï¼Ÿ**

#### âš™ï¸ **ç³»ç»Ÿç®¡ç†çš„æ ¸å¿ƒéœ€æ±‚**

- **é›†ä¸­åŒ–ç®¡ç†**ï¼š
  æ‰€æœ‰å…³é”®é…ç½®ï¼ˆå¦‚ç”¨æˆ·è´¦æˆ·ã€ç½‘ç»œè®¾ç½®ã€æœåŠ¡å‚æ•°ï¼‰ç»Ÿä¸€å­˜å‚¨åœ¨ `/etc`ï¼Œç®¡ç†å‘˜æ— éœ€åœ¨å¤šç›®å½•é—´åˆ‡æ¢ï¼Œå¤§å¹…æå‡ç»´æŠ¤æ•ˆç‡[5,7,9](@ref)ã€‚
  *ç¤ºä¾‹*ï¼š
  - ç”¨æˆ·è´¦æˆ·ï¼š`/etc/passwd`ã€`/etc/shadow`
  - ç½‘ç»œé…ç½®ï¼š`/etc/network/interfaces`ï¼ˆDebianï¼‰ã€`/etc/sysconfig/network-scripts/`ï¼ˆRHELï¼‰
  - æœåŠ¡é…ç½®ï¼š`/etc/nginx/nginx.conf`ï¼ˆNginxï¼‰ã€`/etc/ssh/sshd_config`ï¼ˆSSHï¼‰[5,7](@ref)ã€‚
- **å®‰å…¨æ€§æ§åˆ¶**ï¼š
  é…ç½®æ–‡ä»¶é€šå¸¸ä»…å…è®¸ â€‹**root ç”¨æˆ·ä¿®æ”¹**â€‹ï¼ˆå¦‚ `/etc/shadow` æƒé™ä¸º `600`ï¼‰ï¼Œé˜²æ­¢éç‰¹æƒç”¨æˆ·è¯¯æ“ä½œå¯¼è‡´ç³»ç»Ÿæ•…éšœ[5,6,7](@ref)ã€‚
#### ğŸ“š **éµå¾ªæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡æ ‡å‡†ï¼ˆFHSï¼‰**

- **FHS è§„èŒƒ**ï¼š
  Linux éµå¾ª â€‹**Filesystem Hierarchy Standard**ï¼Œæ˜ç¡®å°† `/etc` å®šä¹‰ä¸º â€‹**é™æ€ç³»ç»Ÿé…ç½®æ–‡ä»¶ç›®å½•**ï¼Œç¡®ä¿ä¸åŒå‘è¡Œç‰ˆï¼ˆå¦‚ Ubuntuã€CentOSï¼‰ç»“æ„ä¸€è‡´[8,9](@ref)ã€‚
- åŠ¨é™åˆ†ç¦»åŸåˆ™ï¼š
  - **é™æ€æ–‡ä»¶**ï¼ˆé…ç½®ã€ç¨‹åºï¼‰â†’ å­˜æ”¾äº `/etc`ã€`/usr`
  - **åŠ¨æ€æ–‡ä»¶**ï¼ˆæ—¥å¿—ã€ç¼“å­˜ï¼‰â†’ å­˜æ”¾äº `/var`ã€`/tmp`
    æ­¤è®¾è®¡æ”¯æŒåˆ†åŒºç‹¬ç«‹ï¼ˆå¦‚ `/home` å•ç‹¬åˆ†åŒºï¼‰ï¼Œé¿å…ç³»ç»Ÿé‡è£…æ—¶ä¸¢å¤±ç”¨æˆ·æ•°æ®[9](@ref)ã€‚
#### ğŸ”§ **ç»´æŠ¤ä¸æ‰©å±•æ€§ä¼˜åŠ¿**

- **å¿«é€Ÿå¤‡ä»½ä¸æ¢å¤**ï¼š
  å¤‡ä»½ `/etc` å³å¯ä¿å­˜ç³»ç»Ÿæ ¸å¿ƒé…ç½®ï¼Œç¾éš¾æ¢å¤æ—¶ç›´æ¥è¿˜åŸç›®å½•[7,9](@ref)ã€‚
- æœåŠ¡ä¾èµ–è§£è€¦ï¼š
  åº”ç”¨ç¨‹åºé€šè¿‡è¯»å–
```
  /etc
```
ä¸‹çš„é…ç½®å¯åŠ¨ï¼Œä¿®æ”¹é…ç½®åé‡å¯æœåŠ¡å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡è£…è½¯ä»¶ã€‚
  å…¸å‹æ“ä½œæµç¨‹ï¼š
  ```
  sudo nano /etc/nginx/nginx.conf  # ä¿®æ”¹é…ç½®
  sudo systemctl restart nginx    # é‡å¯æœåŠ¡ç”Ÿæ•ˆ
  ```


------
### ğŸ“Š **`/etc` ç›®å½•çš„å…¸å‹å†…å®¹**

| **é…ç½®ç±»å‹** | **å…³é”®æ–‡ä»¶/ç›®å½•**                | **ä½œç”¨**                   |
| ------------ | -------------------------------- | -------------------------- |
| **ç³»ç»ŸåŸºç¡€** | `/etc/passwd`ã€`/etc/fstab`      | ç”¨æˆ·è´¦æˆ·ã€æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¿¡æ¯ |
| **ç½‘ç»œè®¾ç½®** | `/etc/hosts`ã€`/etc/resolv.conf` | DNSè§£æã€é™æ€ä¸»æœºåæ˜ å°„    |
| **æœåŠ¡é…ç½®** | `/etc/nginx/`ã€`/etc/mysql/`     | WebæœåŠ¡å™¨ã€æ•°æ®åº“å‚æ•°      |
| **å®‰å…¨ç­–ç•¥** | `/etc/sudoers`ã€`/etc/ssh/`      | æƒé™æ§åˆ¶ã€SSHè®¿é—®è§„åˆ™      |
| **å®šæ—¶ä»»åŠ¡** | `/etc/cron.d/`ã€`/etc/crontab`   | è®¡åˆ’ä»»åŠ¡é…ç½®               |
> ğŸ’¡ **æ³¨æ„**ï¼šä¿®æ”¹ `/etc` éœ€è°¨æ…ï¼
>
> - è¯­æ³•é”™è¯¯ï¼ˆå¦‚å°‘ä¸€ä¸ªæ‹¬å·ï¼‰å¯èƒ½å¯¼è‡´æœåŠ¡å´©æºƒ[7](@ref)ï¼›
> - å»ºè®®ä¿®æ”¹å‰å¤‡ä»½æ–‡ä»¶ï¼ˆå¦‚ `cp nginx.conf nginx.conf.bak`ï¼‰ã€‚


------
### ğŸ’ **æ€»ç»“ï¼šè®¾è®¡å“²å­¦ä¸æœ€ä½³å®è·µ**

- **å†å²ä¸åŠŸèƒ½çš„ç»Ÿä¸€**ï¼š
  `etc` è™½æºäºâ€œæ‚é¡¹å­˜å‚¨â€ï¼Œä½†é€šè¿‡ â€‹**æ ‡å‡†åŒ–æ¼”è¿›**â€‹ æˆä¸ºé…ç½®ä¸­å¿ƒï¼Œä½“ç° Linux â€œçº¦å®šä¼˜äºé…ç½®â€çš„è®¾è®¡æ€æƒ³[8,9](@ref)ã€‚
- è¿ç»´æœ€ä½³å®è·µï¼š
  1. **æƒé™æœ€å°åŒ–**ï¼šé root ç”¨æˆ·ç¦ç”¨å†™æƒé™ï¼›
  2. **ç‰ˆæœ¬æ§åˆ¶**ï¼šç”¨ Git ç®¡ç† `/etc` å˜æ›´ï¼ˆå¦‚ `etckeeper` å·¥å…·ï¼‰ï¼›
  3. **åŠ¨é™åˆ†ç¦»**ï¼šå°†æ—¥å¿—ã€ç¼“å­˜æŒ‡å‘ `/var` é¿å…æŒ¤å  `/etc` ç©ºé—´[5,9](@ref)ã€‚
  ç†è§£ `/etc` çš„ç”±æ¥ä¸è®¾è®¡é€»è¾‘ï¼Œä¸ä»…èƒ½é¿å…è¯¯æ“ä½œï¼Œæ›´èƒ½æ·±å…¥æŒæ¡ Linux ç³»ç»Ÿç®¡ç†çš„æ ¸å¿ƒè„‰ç»œ ğŸŒŸã€‚
## sbin

åœ¨ Linux æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œ**`sbin` ä¸­çš„ "s" æ˜¯ "superuser"ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰çš„ç¼©å†™**ï¼Œè¡¨ç¤ºè¯¥ç›®å½•ä¸‹çš„å‘½ä»¤é€šå¸¸éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆroot æƒé™ï¼‰æ‰èƒ½æ‰§è¡Œã€‚è¿™ä¸€è®¾è®¡ä½“ç°äº† Linux ç³»ç»Ÿå¯¹æƒé™ç®¡ç†çš„ä¸¥æ ¼åˆ†å±‚æœºåˆ¶ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š


------
### ğŸ”‘ **"s" çš„æ ¸å¿ƒå«ä¹‰ï¼šè¶…çº§ç”¨æˆ·æƒé™**

1. **æƒé™æ§åˆ¶**
   - `sbin` ç›®å½•å­˜æ”¾çš„æ˜¯**ç³»ç»Ÿçº§ç®¡ç†å‘½ä»¤**ï¼Œå¦‚ç£ç›˜åˆ†åŒºï¼ˆ`fdisk`ï¼‰ã€ç½‘ç»œé…ç½®ï¼ˆ`ifconfig`ï¼‰ã€ç³»ç»Ÿé‡å¯ï¼ˆ`reboot`ï¼‰ç­‰[1,4,5](@ref)ã€‚
   - è¿™äº›å‘½ä»¤ç›´æ¥æ¶‰åŠç³»ç»Ÿåº•å±‚æ“ä½œï¼Œè‹¥æ™®é€šç”¨æˆ·éšæ„æ‰§è¡Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒæˆ–å®‰å…¨é£é™©ï¼Œå› æ­¤**ä»…å…è®¸ root ç”¨æˆ·æˆ–é€šè¿‡ `sudo` ææƒåä½¿ç”¨**[5](@ref)ã€‚
2. **ä¸ `/bin` çš„å¯¹æ¯”**
   - **`/bin`**ï¼šå­˜æ”¾åŸºç¡€å‘½ä»¤ï¼ˆå¦‚ `ls`, `cp`ï¼‰ï¼Œ**æ‰€æœ‰ç”¨æˆ·å‡å¯ä½¿ç”¨**[3,6](@ref)ã€‚
   - **
     ```
     /sbin
     ```
     ï¼šå‘½ä»¤åŠŸèƒ½æ›´åº•å±‚ï¼Œ
     éœ€ root æƒé™**ï¼Œä¾‹å¦‚ï¼š
     - `fdisk`ï¼ˆç£ç›˜åˆ†åŒºå·¥å…·ï¼‰
     - `iptables`ï¼ˆé˜²ç«å¢™é…ç½®ï¼‰
     - `shutdown`ï¼ˆå…³é—­ç³»ç»Ÿï¼‰[4,7](@ref)ã€‚


------
### âš™ï¸ **`sbin` ç›®å½•çš„æ‰©å±•åˆ†ç±»**

Linux ç³»ç»Ÿè¿˜åŒ…å«å…¶ä»– `sbin` ç›®å½•ï¼Œå‡éµå¾ªç›¸åŒçš„æƒé™é€»è¾‘ï¼š
1. **`/usr/sbin`**
   - å­˜æ”¾**éç³»ç»Ÿå¯åŠ¨å¿…éœ€çš„ç®¡ç†å‘½ä»¤**ï¼Œå¦‚ Web æœåŠ¡å™¨ï¼ˆ`apachectl`ï¼‰ã€æ•°æ®åº“æœåŠ¡ï¼ˆ`mysqld`ï¼‰[4,7](@ref)ã€‚
   - ä¸
```
     /sbin
```
çš„åŒºåˆ«ï¼š
     - `/sbin`ï¼šç³»ç»Ÿå¯åŠ¨æˆ–ä¿®å¤æ—¶å¿…é¡»çš„å‘½ä»¤ï¼ˆå¦‚ `init`ã€`mount`ï¼‰ã€‚
     - `/usr/sbin`ï¼šåæœŸå®‰è£…çš„æœåŠ¡ç®¡ç†å‘½ä»¤[3,7](@ref)ã€‚
2. **`/usr/local/sbin`**
   - å­˜æ”¾**æœ¬åœ°ç¼–è¯‘å®‰è£…çš„è½¯ä»¶**çš„ç®¡ç†å‘½ä»¤ï¼Œä¼˜å…ˆçº§é«˜äºç³»ç»Ÿè‡ªå¸¦å‘½ä»¤[7](@ref)ã€‚


------
### ğŸ’» **è®¾è®¡å“²å­¦ï¼šæƒé™åˆ†å±‚ä¸ç³»ç»Ÿå®‰å…¨**

1. **æœ€å°æƒé™åŸåˆ™**
   - é€šè¿‡éš”ç¦» `bin`ï¼ˆç”¨æˆ·çº§ï¼‰å’Œ `sbin`ï¼ˆç®¡ç†å‘˜çº§ï¼‰ï¼Œé™åˆ¶æ™®é€šç”¨æˆ·å¯¹æ ¸å¿ƒèµ„æºçš„æ“ä½œï¼Œé¿å…è¯¯æ“ä½œå¯¼è‡´ç³»ç»Ÿæ•…éšœ[5,6](@ref)ã€‚
   - **ç¤ºä¾‹**ï¼šæ™®é€šç”¨æˆ·è‹¥å°è¯•æ‰§è¡Œ `/sbin/reboot`ï¼Œä¼šæç¤º `Permission denied`[5](@ref)ã€‚
2. **ç³»ç»Ÿç»´æŠ¤åœºæ™¯**
   - åœ¨**å•ç”¨æˆ·æ¨¡å¼**ï¼ˆæ•‘æ´æ¨¡å¼ï¼‰ä¸‹ï¼Œç³»ç»Ÿä»…æŒ‚è½½æ ¹åˆ†åŒºï¼Œæ­¤æ—¶ `/sbin` ä¸­çš„å‘½ä»¤ä»å¯ç”¨ï¼Œä¾¿äºä¿®å¤ç³»ç»Ÿï¼ˆå¦‚ `fsck` æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿï¼‰[3,7](@ref)ã€‚


------
### âš ï¸ **ç”¨æˆ·æ“ä½œå»ºè®®**

1. **æƒé™æå‡æ–¹å¼**
   - ä½¿ç”¨
```
     sudo
```
ä¸´æ—¶è·å– root æƒé™ï¼š
     ```
     sudo /sbin/ifconfig eth0 up  # å¯ç”¨ç½‘å¡
     ```
   - åˆ‡æ¢åˆ° root ç”¨æˆ·åå†æ“ä½œï¼ˆä¸æ¨èæ—¥å¸¸ä½¿ç”¨ï¼‰[5](@ref)ã€‚
2. **ç¯å¢ƒå˜é‡é…ç½®**
   - æ™®é€šç”¨æˆ·çš„ `PATH` ç¯å¢ƒå˜é‡é»˜è®¤ä¸åŒ…å« `/sbin`ï¼Œå¯èƒ½å¯¼è‡´ "command not found" é”™è¯¯ã€‚
   - è§£å†³æ–¹æ³•ï¼šåœ¨
```
     ~/.bashrc
```
ä¸­æ·»åŠ è·¯å¾„ï¼š
     ```
 export PATH=$PATH:/usr/sbin:/sbin   # è¦†ç›–æ‰€æœ‰sbinè·¯å¾„ 
     ```


------
### ğŸ’ **æ€»ç»“**

- **`sbin` = Superuser Bin**ï¼šä¸“ä¸ºç³»ç»Ÿç®¡ç†å‘˜è®¾è®¡çš„å‘½ä»¤ä»“åº“ï¼Œå®ˆæŠ¤ç³»ç»Ÿå®‰å…¨ä¸ç¨³å®šã€‚
- **æƒé™åˆ†å±‚**ï¼šLinux é€šè¿‡ç›®å½•ç»“æ„ï¼ˆ`/bin` vs `/sbin`ï¼‰å®ç°ç”¨æˆ·æƒé™çš„ç‰©ç†éš”ç¦»ï¼Œæ˜¯ "æœ€å°æƒé™" åŸåˆ™çš„ç»å…¸å®è·µã€‚
- **æœ€ä½³å®è·µ**ï¼šæ—¥å¸¸æ“ä½œä¼˜å…ˆä½¿ç”¨ `/bin` å’Œ `/usr/bin`ï¼›ä¿®æ”¹ç³»ç»Ÿé…ç½®æ—¶é€šè¿‡ `sudo` è°ƒç”¨ `/sbin` å‘½ä»¤ï¼Œå¹¶ä¸¥æ ¼å®¡æ ¸æ“ä½œé€»è¾‘[3,5,7](@ref)ã€‚
ç†è§£è¿™ä¸€è®¾è®¡ï¼Œèƒ½æ›´å®‰å…¨é«˜æ•ˆåœ°é©¾é©­ Linux ç³»ç»Ÿç®¡ç† ğŸŒŸã€‚
## å¸¸ç”¨å‘½ä»¤

ä»¥ä¸‹æ˜¯Linuxç³»ç»Ÿä¸­æœ€å¸¸ç”¨ä¸”å®ç”¨çš„å‘½ä»¤åˆ†ç±»è¯¦è§£ï¼Œæ¶µç›–æ–‡ä»¶æ“ä½œã€ç³»ç»Ÿç®¡ç†ã€ç½‘ç»œå·¥å…·ç­‰æ ¸å¿ƒåœºæ™¯ï¼Œå¹¶é™„å…¸å‹ç”¨æ³•ç¤ºä¾‹ï¼š


------
### ğŸ“‚ **æ–‡ä»¶ä¸ç›®å½•æ“ä½œ**

| **å‘½ä»¤** | **åŠŸèƒ½è¯´æ˜**          | **å¸¸ç”¨ç¤ºä¾‹**              | **å…³é”®å‚æ•°è¯´æ˜**                         |
| -------- | --------------------- | ------------------------- | ---------------------------------------- |
| `ls`     | åˆ—å‡ºç›®å½•å†…å®¹          | `ls -l /home`             | `-l`ï¼šè¯¦ç»†åˆ—è¡¨ï¼›`-a`ï¼šæ˜¾ç¤ºéšè—æ–‡ä»¶       |
| `cd`     | åˆ‡æ¢ç›®å½•              | `cd ~/Documents`          | `~`ï¼šç”¨æˆ·å®¶ç›®å½•ï¼›`..`ï¼šä¸Šçº§ç›®å½•          |
| `pwd`    | æ˜¾ç¤ºå½“å‰è·¯å¾„          | `pwd`                     | -                                        |
| `mkdir`  | åˆ›å»ºç›®å½•              | `mkdir -p dir1/dir2`      | `-p`ï¼šé€’å½’åˆ›å»ºå¤šçº§ç›®å½•                   |
| `cp`     | å¤åˆ¶æ–‡ä»¶/ç›®å½•         | `cp -r dir1/ dir_backup/` | `-r`ï¼šé€’å½’å¤åˆ¶ç›®å½•                       |
| `mv`     | ç§»åŠ¨/é‡å‘½å           | `mv old.txt new.txt`      | é‡å‘½åï¼›`mv file.txt /tmp/`ï¼šç§»åŠ¨æ–‡ä»¶    |
| `rm`     | åˆ é™¤                  | `rm -rf dir/`             | `-r`ï¼šé€’å½’åˆ é™¤ï¼›`-f`ï¼šå¼ºåˆ¶åˆ é™¤           |
| `touch`  | åˆ›å»ºç©ºæ–‡ä»¶/æ›´æ–°æ—¶é—´æˆ³ | `touch file.log`          | -                                        |
| `find`   | æœç´¢æ–‡ä»¶              | `find /var -name "*.log"` | `-name`ï¼šæŒ‰åç§°åŒ¹é…ï¼›`-type`ï¼šæŒ‰ç±»å‹è¿‡æ»¤ |


------
### ğŸ–¥ï¸ **ç³»ç»Ÿç›‘æ§ä¸ç®¡ç†**

| **å‘½ä»¤** | **åŠŸèƒ½è¯´æ˜**   | **å…¸å‹ç”¨æ³•**          | **å…³é”®ä¿¡æ¯**                         |
| -------- | -------------- | --------------------- | ------------------------------------ |
| `top`    | å®æ—¶è¿›ç¨‹ç›‘æ§   | `top`                 | åŠ¨æ€æ˜¾ç¤ºCPU/å†…å­˜å ç”¨ï¼ŒæŒ‰`P`æŒ‰CPUæ’åº |
| `htop`   | å¢å¼ºç‰ˆè¿›ç¨‹ç›‘æ§ | `htop`                | æ”¯æŒé¼ æ ‡æ“ä½œï¼Œæ›´ç›´è§‚[2](@ref)        |
| `ps`     | æŸ¥çœ‹è¿›ç¨‹å¿«ç…§   | `ps aux | grep nginx` | `aux`ï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹              |
| `kill`   | ç»ˆæ­¢è¿›ç¨‹       | `kill -9 1234`        | `-9`ï¼šå¼ºåˆ¶ç»ˆæ­¢ä¿¡å·                   |
| `df`     | ç£ç›˜ç©ºé—´ç»Ÿè®¡   | `df -h`               | `-h`ï¼šäººç±»å¯è¯»æ ¼å¼ï¼ˆGB/MBï¼‰          |
| `free`   | å†…å­˜ä½¿ç”¨æƒ…å†µ   | `free -m`             | `-m`ï¼šä»¥MBä¸ºå•ä½æ˜¾ç¤º                 |
| `uptime` | ç³»ç»Ÿè¿è¡Œæ—¶é—´   | `uptime`              | æ˜¾ç¤ºè´Ÿè½½å¹³å‡å€¼ï¼ˆ1/5/15åˆ†é’Ÿï¼‰         |


------
### ğŸŒ **ç½‘ç»œç®¡ç†å·¥å…·**

| **å‘½ä»¤**          | **åŠŸèƒ½è¯´æ˜** | **ç¤ºä¾‹**                               | **é€‚ç”¨åœºæ™¯**                         |
| ----------------- | ------------ | -------------------------------------- | ------------------------------------ |
| `ifconfig` / `ip` | ç½‘ç»œæ¥å£é…ç½® | `ip addr show`                         | `ip`ä¸ºç°ä»£æ›¿ä»£å‘½ä»¤[6](@ref)          |
| `ping`            | æµ‹è¯•è¿é€šæ€§   | `ping -c 4 google.com`                 | `-c`ï¼šæŒ‡å®šæ¬¡æ•°                       |
| `netstat` / `ss`  | ç½‘ç»œè¿æ¥çŠ¶æ€ | `ss -tuln`                             | `-t`ï¼šTCPï¼›`-u`ï¼šUDPï¼›`-l`ï¼šç›‘å¬ç«¯å£ |
| `ssh`             | è¿œç¨‹ç™»å½•     | `ssh user@192.168.1.100`               | å®‰å…¨åŠ å¯†è¿æ¥                         |
| `scp`             | å®‰å…¨æ–‡ä»¶ä¼ è¾“ | `scp file.txt user@host:/path/`        | è·¨ä¸»æœºå¤åˆ¶                           |
| `wget` / `curl`   | ä¸‹è½½æ–‡ä»¶     | `curl -O https://example.com/file.zip` | `-O`ï¼šä¿å­˜åˆ°æœ¬åœ°                     |


------
### ğŸ” **æƒé™ä¸ç”¨æˆ·ç®¡ç†**

| **å‘½ä»¤**  | **åŠŸèƒ½è¯´æ˜** | **ç¤ºä¾‹**                    | **å‚æ•°è¯¦è§£**                           |
| --------- | ------------ | --------------------------- | -------------------------------------- |
| `sudo`    | ææƒæ‰§è¡Œå‘½ä»¤ | `sudo apt update`           | éœ€é…ç½®`/etc/sudoers`                   |
| `chmod`   | ä¿®æ”¹æƒé™     | `chmod 755 script.sh`       | `755`ï¼šç”¨æˆ·å¯è¯»å†™æ‰§è¡Œï¼Œç»„/å…¶ä»–å¯è¯»æ‰§è¡Œ |
| `chown`   | ä¿®æ”¹æ‰€æœ‰è€…   | `chown user:group file.txt` | åŒæ—¶ä¿®æ”¹ç”¨æˆ·å’Œç»„                       |
| `useradd` | åˆ›å»ºç”¨æˆ·     | `useradd -m alice`          | `-m`ï¼šåˆ›å»ºå®¶ç›®å½•                       |
| `passwd`  | ä¿®æ”¹å¯†ç      | `passwd alice`              | éœ€rootæƒé™                             |


------
### ğŸ“ **æ–‡æœ¬å¤„ç†ä¸è¿‡æ»¤**

| **å‘½ä»¤**        | **åŠŸèƒ½è¯´æ˜** | **é«˜çº§ç”¨æ³•**                             | **æŠ€å·§**                 |
| --------------- | ------------ | ---------------------------------------- | ------------------------ |
| `grep`          | æ–‡æœ¬æœç´¢     | `grep -r "error" /var/log/`              | `-r`ï¼šé€’å½’æœç´¢ç›®å½•       |
| `cat`           | æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ | `cat file1.txt file2.txt > combined.txt` | åˆå¹¶æ–‡ä»¶                 |
| `head` / `tail` | æŸ¥çœ‹é¦–å°¾å†…å®¹ | `tail -f app.log`                        | `-f`ï¼šå®æ—¶è¿½è¸ªæ—¥å¿—æ›´æ–°   |
| `awk`           | æ–‡æœ¬åˆ†æ     | `awk -F: '{print $1}' /etc/passwd`       | `-F`ï¼šæŒ‡å®šåˆ†éš”ç¬¦ï¼ˆå†’å·ï¼‰ |
| `sed`           | æµç¼–è¾‘å™¨     | `sed 's/old/new/g' file.txt`             | å…¨å±€æ›¿æ¢æ–‡æœ¬             |


------
### ğŸ§° **å‹ç¼©ä¸å½’æ¡£**

| **å‘½ä»¤** | **åŠŸèƒ½è¯´æ˜** | **å‹ç¼©ç¤ºä¾‹**                    | **è§£å‹ç¤ºä¾‹**               |
| -------- | ------------ | ------------------------------- | -------------------------- |
| `tar`    | æ‰“åŒ…/è§£åŒ…    | `tar -czvf archive.tar.gz dir/` | `tar -xzvf archive.tar.gz` |
| `gzip`   | å‹ç¼©æ–‡ä»¶     | `gzip file.txt`                 | `gunzip file.txt.gz`       |
| `zip`    | åˆ›å»ºZIPæ–‡ä»¶  | `zip -r data.zip data/`         | `unzip data.zip`           |


------
### ğŸ’¡ **å®ç”¨æŠ€å·§è¡¥å……**

1. 
   å†å²å‘½ä»¤ï¼š
   - `history`ï¼šæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œ`!n`é‡å¤æ‰§è¡Œç¬¬næ¡å‘½ä»¤[2](@ref)
2. 
   ç®¡é“ä¸é‡å®šå‘ï¼š
   - `ls -l \| grep "txt"`ï¼šè¿‡æ»¤å«"txt"çš„æ–‡ä»¶
   - `echo "log" >> file.txt`ï¼šè¿½åŠ å†…å®¹åˆ°æ–‡ä»¶
3. 
   å®šæ—¶ä»»åŠ¡ï¼š
   - `crontab -e`ï¼šç¼–è¾‘å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚`0 * * * * /path/backup.sh`æ¯å°æ—¶å¤‡ä»½ï¼‰[1](@ref)
> **æç¤º**ï¼š
>
> - æ›´å¤šå‘½ä»¤è¯¦è§£å¯å‚è€ƒ [Linuxå‘½ä»¤å…¨é›†æ‰‹å†Œ](https://wenku.csdn.net/doc/166j9zi6ts)[7](@ref) æˆ– [CSDNåšå®¢](https://blog.csdn.net/weixin_66625287/article/details/147271773)[1](@ref)ã€‚
> - å­¦ä¹ å»ºè®®ï¼š**ä¼˜å…ˆæŒæ¡é«˜é¢‘å‘½ä»¤ï¼ˆå¦‚`grep`ã€`find`ã€`awk`ï¼‰çš„ç»„åˆç”¨æ³•**ï¼Œå¯å¤§å¹…æå‡è¿ç»´æ•ˆç‡ğŸš€ã€‚
## compgen

`compgen` æ˜¯ **Bash shell çš„å†…ç½®å‘½ä»¤**ï¼Œä¸“ç”¨äºç”Ÿæˆå‘½ä»¤ã€åˆ«åã€å‡½æ•°ç­‰å†…å®¹çš„è‡ªåŠ¨è¡¥å…¨é€‰é¡¹ï¼Œæ˜¯ Bash å¯ç¼–ç¨‹è¡¥å…¨åŠŸèƒ½çš„æ ¸å¿ƒå·¥å…·ä¹‹ä¸€ã€‚å®ƒé€šè¿‡æ‰«æå½“å‰ Shell ç¯å¢ƒä¸­çš„å¯ç”¨èµ„æºï¼Œä¸ºç”¨æˆ·æˆ–è„šæœ¬æä¾›çµæ´»çš„è¡¥å…¨èƒ½åŠ›ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŠŸèƒ½åˆ°é«˜é˜¶åº”ç”¨å…¨é¢è§£æï¼š


------
### âš™ï¸ **åŸºç¡€å®šä½ä¸åŠŸèƒ½**

#### **æ ¸å¿ƒä½œç”¨**

- **åˆ—å‡º Shell ç¯å¢ƒèµ„æº**
  å¿«é€Ÿæšä¸¾å½“å‰ä¼šè¯ä¸­çš„å‘½ä»¤ã€åˆ«åã€å‡½æ•°ã€å˜é‡ã€ç”¨æˆ·ç­‰èµ„æºï¼Œæ”¯æŒæŒ‰ç±»å‹è¿‡æ»¤[1,6,7](@ref)ã€‚
- **å¢å¼ºè‡ªåŠ¨è¡¥å…¨**
  ä¸ `complete` å‘½ä»¤é…åˆï¼Œä¸ºè‡ªå®šä¹‰è„šæœ¬æˆ–å‘½ä»¤å®ç°æ™ºèƒ½è¡¥å…¨é€»è¾‘ï¼ˆå¦‚æŒ‰å…³é”®è¯åŒ¹é…ï¼‰[1,6](@ref)ã€‚
#### **ç‰¹æ€§ä¼˜åŠ¿**

- **æ— éœ€å®‰è£…**ï¼šä½œä¸º Bash å†…ç½®å‘½ä»¤ï¼Œç›´æ¥å¯ç”¨ï¼ˆéœ€ç¡®ä¿ Bash ç¯å¢ƒï¼‰[6](@ref)ã€‚
- **ç¯å¢ƒæ•æ„Ÿ**ï¼šè¾“å‡ºå†…å®¹**ä¾èµ–å½“å‰ Shell ä¼šè¯**ï¼ˆå¦‚ `compgen -a` ä»…æ˜¾ç¤ºå½“å‰å®šä¹‰çš„åˆ«åï¼‰[1,7](@ref)ã€‚
- **é«˜æ•ˆè¿‡æ»¤**ï¼šæ”¯æŒé€šé…ç¬¦ã€å…³é”®è¯åˆ—è¡¨å’Œæ­£åˆ™è¿‡æ»¤ï¼Œç²¾å‡†æ§åˆ¶è¾“å‡º[1,6](@ref)ã€‚


------
### ğŸ“‹ **è¯­æ³•ç»“æ„ä¸æ ¸å¿ƒé€‰é¡¹**

#### åŸºæœ¬è¯­æ³•ï¼š

```
compgen [é€‰é¡¹] [è¿‡æ»¤è¯]
```
#### **å¸¸ç”¨é€‰é¡¹ä¸åŠŸèƒ½**ï¼š

| **é€‰é¡¹**      | **è¯´æ˜**           | **ç¤ºä¾‹å‘½ä»¤**                               |
| ------------- | ------------------ | ------------------------------------------ |
| `-a`          | åˆ—å‡ºæ‰€æœ‰åˆ«å       | `compgen -a` â†’ æ˜¾ç¤º `ll`, `ls -l` ç­‰åˆ«å   |
| `-b`          | åˆ—å‡º Bash å†…ç½®å‘½ä»¤ | `compgen -b` â†’ è¾“å‡º `cd`, `echo` ç­‰        |
| `-c`          | åˆ—å‡ºæ‰€æœ‰å¯æ‰§è¡Œå‘½ä»¤ | `compgen -c` â†’ å«å¤–éƒ¨å‘½ä»¤ã€åˆ«åã€å‡½æ•°      |
| `-d`          | åˆ—å‡ºå½“å‰ç›®å½•       | `compgen -d` â†’ ä»…æ˜¾ç¤ºå­ç›®å½•å              |
| `-f`          | åˆ—å‡ºæ–‡ä»¶ï¼ˆå«ç›®å½•ï¼‰ | `compgen -f` â†’ è¾“å‡ºå½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶        |
| `-k`          | åˆ—å‡º Bash å…³é”®å­—   | `compgen -k` â†’ å¦‚ `if`, `for`, `while`     |
| `-v`          | åˆ—å‡º Shell å˜é‡    | `compgen -v` â†’ è¾“å‡º `PATH`, `HOME` ç­‰      |
| `-u`          | åˆ—å‡ºç³»ç»Ÿç”¨æˆ·       | `compgen -u` â†’ æ˜¾ç¤º `/etc/passwd` ä¸­çš„ç”¨æˆ· |
| `-A function` | åˆ—å‡ºæ‰€æœ‰å‡½æ•°       | `compgen -A function` â†’ è‡ªå®šä¹‰å‡½æ•°å       |
#### **é«˜çº§å‚æ•°**ï¼š

- `-W "è¯åˆ—è¡¨"`ï¼šä»æŒ‡å®šè¯åº“ç”Ÿæˆè¡¥å…¨ï¼ˆå¦‚ `compgen -W "start stop restart" -- "s"` â†’ åŒ¹é… `start`, `stop`ï¼‰[1,6](@ref)ã€‚
- `-X "æ¨¡å¼"`ï¼š**æ’é™¤åŒ¹é…é¡¹**ï¼ˆå¦‚ `compgen -c -X "*grep"` â†’ è¿‡æ»¤å« `grep` çš„å‘½ä»¤ï¼‰[1](@ref)ã€‚
- `-P`/`-S`ï¼šä¸ºè¾“å‡ºæ·»åŠ **å‰ç¼€/åç¼€**ï¼ˆå¦‚ `compgen -d -P "dir-" -S "-bak"` â†’ ç”Ÿæˆ `dir-docs-bak`ï¼‰[1](@ref)ã€‚


------
### ğŸ› ï¸ **å®ç”¨åœºæ™¯ä¸ç¤ºä¾‹**

#### **å¿«é€Ÿèµ„æºæŸ¥è¯¢**

```
# åˆ—å‡ºæ‰€æœ‰ä»¥ 'ls' å¼€å¤´çš„å‘½ä»¤/åˆ«å
compgen -ac ls â†’ è¾“å‡º `ls`, `lsblk`, `lsmod` ç­‰[7](@ref)
# ç»Ÿè®¡å½“å‰å¯ç”¨å‘½ä»¤æ€»æ•°
compgen -c | wc -l â†’ å¦‚è¾“å‡º `2453`[2,3](@ref)
# æ£€æŸ¥ç”¨æˆ·å®šä¹‰å‡½æ•°
compgen -A function â†’ æ˜¾ç¤º `backup()`, `deploy()` ç­‰[1](@ref)
```
#### **æ’æŸ¥ç¯å¢ƒé—®é¢˜**

```
# ç¡®è®¤åˆ«åæ˜¯å¦è¦†ç›–å‘½ä»¤
compgen -ac | grep "ll" â†’ è‹¥è¾“å‡º `ll`ï¼Œè¯´æ˜å­˜åœ¨åˆ«åå®šä¹‰
# éªŒè¯å˜é‡æ˜¯å¦å­˜åœ¨
compgen -v | grep "PROXY" â†’ æ£€æŸ¥ `$PROXY` æ˜¯å¦å·²è®¾ç½®
```
#### **æ„å»ºè‡ªå®šä¹‰è¡¥å…¨è„šæœ¬**

ä¸ºå‘½ä»¤ `myapp` å®ç°é€‰é¡¹è¡¥å…¨ï¼š
```
_myapp_complete() {
    local cur=${COMP_WORDS[COMP_CWORD]}  # å½“å‰è¾“å…¥è¯
    COMPREPLY=($(compgen -W "install uninstall update" -- "$cur"))
}
complete -F _myapp_complete myapp
```
è¾“å…¥ `myapp in` + Tab â†’ è‡ªåŠ¨è¡¥å…¨ä¸º `install`[1,6](@ref)ã€‚


------
### âš¡ï¸ **é«˜çº§åº”ç”¨æŠ€å·§**

1. **è”åˆè¿‡æ»¤ä¸ç»Ÿè®¡**
   ```
   # æ‰¾å‡ºåŒ…å« 'net' çš„å‘½ä»¤å¹¶è®¡æ•°
   compgen -c | grep 'net' | wc -l
   # æ’é™¤ç›®å½•ï¼Œä»…æ˜¾ç¤ºæ™®é€šæ–‡ä»¶
   compgen -f -X "*/"  # '*/' åŒ¹é…æ‰€æœ‰ç›®å½•[1](@ref)
   ```
2. **åŠ¨æ€è¡¥å…¨ç”Ÿæˆ**
   ç»“åˆå¤–éƒ¨å‘½ä»¤ç”Ÿæˆè¯åº“ï¼š
   ```
   # ç”¨ git branch ç”Ÿæˆåˆ†æ”¯åè¡¥å…¨
   _git_branch_complete() {
       local branches=$(git branch --list | cut -c 3-)
       COMPREPLY=($(compgen -W "$branches" -- "${COMP_WORDS[1]}"))
   }
   complete -F _git_branch_complete git-checkout
   ```


------
### âš ï¸ **æ³¨æ„äº‹é¡¹ä¸æ›¿ä»£æ–¹æ¡ˆ**

1. **å¸¸è§é—®é¢˜**
   - **ç¯å¢ƒä¾èµ–**ï¼šä¸åŒ Shellï¼ˆå¦‚ Zshï¼‰éœ€æ”¹ç”¨ `compctl` æˆ– `_completion` æœºåˆ¶[1](@ref)ã€‚
   - **æ€§èƒ½ç“¶é¢ˆ**ï¼šé€’å½’å¤§ç›®å½•ï¼ˆå¦‚ `compgen -f /`ï¼‰å¯èƒ½å¡é¡¿ï¼Œå»ºè®®é™åˆ¶èŒƒå›´[1](@ref)ã€‚
   - **è¾“å‡ºå†—ä½™**ï¼š`-c` åŒ…å«åˆ«å/å‡½æ•°ï¼Œå¯èƒ½ä¸ `-a`/`-b` é‡å ï¼Œéœ€æ˜ç¡®éœ€æ±‚[7](@ref)ã€‚
2. **æ›¿ä»£å·¥å…·**
   - **`complete`**ï¼šå®šä¹‰è¡¥å…¨è§„åˆ™ï¼ˆä¾èµ– `compgen` ç”Ÿæˆé€‰é¡¹ï¼‰[1,6](@ref)ã€‚
   - **`ls`/`find`**ï¼šæ–‡ä»¶æšä¸¾åœºæ™¯æ›´é«˜æ•ˆï¼ˆå¦‚ `find . -type f -name "*.sh"`ï¼‰[6](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“ï¼šcompgen æ ¸å¿ƒä»·å€¼**

| **åœºæ™¯**      | **å‘½ä»¤ç¤ºä¾‹**                      | **ä½œç”¨**                     |
| ------------- | --------------------------------- | ---------------------------- |
| å‘½ä»¤/åˆ«åæ£€ç´¢ | `compgen -ac`                     | å¿«é€ŸéªŒè¯å‘½ä»¤æ˜¯å¦å­˜åœ¨æˆ–è¢«è¦†ç›– |
| è¡¥å…¨è„šæœ¬å¼€å‘  | `compgen -W "start stop" -- $cur` | ä¸ºè‡ªå®šä¹‰å·¥å…·æ·»åŠ æ™ºèƒ½è¡¥å…¨     |
| ç¯å¢ƒè°ƒè¯•      | `compgen -v | grep "PATH"`        | æ£€æŸ¥å˜é‡å®šä¹‰æ˜¯å¦å†²çª         |
| èµ„æºç»Ÿè®¡      | `compgen -u | wc -l`              | ç»Ÿè®¡ç³»ç»Ÿç”¨æˆ·æ•°é‡             |
> **æœ€ä½³å®è·µ**ï¼š
>
> - æ—¥å¸¸è°ƒè¯•ä¼˜å…ˆä½¿ç”¨ `-c`ã€`-a`ã€`-v` ç­‰åŸºç¡€é€‰é¡¹ï¼›
> - è„šæœ¬å¼€å‘ä¸­ç»“åˆ `-W` å’Œ `-X` å®ç°ç²¾å‡†è¡¥å…¨ï¼›
> - é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒé€’å½’å¤§ç›®å½•ï¼Œé˜²æ­¢æ€§èƒ½é—®é¢˜[1,6](@ref)ã€‚
>   é€šè¿‡ `help compgen` æˆ– `man bash` å¯æŸ¥çœ‹æƒå¨æ–‡æ¡£[1](@ref)ã€‚
## whatis

`whatis` æ˜¯ Linux/Unix ç³»ç»Ÿä¸­çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº**å¿«é€ŸæŸ¥è¯¢å‘½ä»¤ã€å‡½æ•°æˆ–ç³»ç»Ÿè°ƒç”¨çš„åŠŸèƒ½æè¿°**ã€‚å®ƒé€šè¿‡æ£€ç´¢é¢„ç”Ÿæˆçš„â€œwhatis æ•°æ®åº“â€è¿”å›ç®€æ´è¯´æ˜ï¼Œæ˜¯ç³»ç»Ÿç®¡ç†å’Œå¼€å‘ä¸­é«˜æ•ˆè·å–å¸®åŠ©çš„æ ¸å¿ƒå·¥å…·ã€‚ä»¥ä¸‹æ˜¯å…¶è¯¦ç»†è§£æï¼š


------
### âš™ï¸ **æ ¸å¿ƒåŠŸèƒ½ä¸å®šä½**

1. **åŠŸèƒ½æè¿°**
   - æä¾›å‘½ä»¤ã€ç³»ç»Ÿè°ƒç”¨ã€åº“å‡½æ•°æˆ–ç‰¹æ®Šæ–‡ä»¶çš„
     å•è¡Œæ‘˜è¦
     ï¼Œä¾‹å¦‚ï¼š
     ```
     whatis ls  # è¾“å‡ºï¼šls (1) - list directory contents
     ```
   - ç­‰åŒäº `man -f` å‘½ä»¤ï¼Œä½†è¾“å‡ºæ›´ç®€æ´[1,4,5](@ref)ã€‚
2. **æ•°æ®æ¥æº**
   - ä¾èµ– **`whatis` æ•°æ®åº“**ï¼ˆè·¯å¾„é€šå¸¸ä¸º `/usr/share/man/whatis`ï¼‰ï¼Œè¯¥æ•°æ®åº“ç”± `mandb` æˆ– `makewhatis`å‘½ä»¤ç”Ÿæˆ[3,6](@ref)ã€‚
3. **å…¸å‹åœºæ™¯**
   - å¿«é€Ÿç¡®è®¤é™Œç”Ÿå‘½ä»¤çš„ä½œç”¨ï¼ˆå¦‚ `whatis chown`ï¼‰ã€‚
   - è„šæœ¬ä¸­åŠ¨æ€è·å–å‘½ä»¤åŠŸèƒ½æè¿°ã€‚
   - ä¸ `man` å‘½ä»¤é…åˆä½¿ç”¨ï¼šå…ˆ `whatis` æ¦‚è§ˆï¼Œå† `man` æŸ¥çœ‹è¯¦æƒ…[3,6](@ref)ã€‚


------
### ğŸ“‹ **è¯­æ³•ä¸å¸¸ç”¨é€‰é¡¹**

#### **åŸºç¡€è¯­æ³•**

```
whatis [é€‰é¡¹] å…³é”®è¯...
```
#### **å¸¸ç”¨é€‰é¡¹**

| **é€‰é¡¹**  | **ä½œç”¨**                                            | **ç¤ºä¾‹**                                |
| --------- | --------------------------------------------------- | --------------------------------------- |
| `-s LIST` | æŒ‡å®šæœç´¢çš„æ‰‹å†Œç« èŠ‚ï¼ˆå¦‚ `1`=ç”¨æˆ·å‘½ä»¤ï¼Œ`2`=ç³»ç»Ÿè°ƒç”¨ï¼‰ | `whatis -s 1,2 open`                    |
| `-r`      | å°†å…³é”®è¯è§†ä¸ºæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…                          | `whatis -r '^re'`ï¼ˆåŒ¹é… re å¼€å¤´çš„å‘½ä»¤ï¼‰ |
| `-w`      | æ”¯æŒé€šé…ç¬¦ï¼ˆå¦‚ `*`ã€`?`ï¼‰                           | `whatis -w 'ls*'`                       |
| `-l`      | ç¦æ­¢æˆªæ–­é•¿æ–‡æœ¬ï¼Œå®Œæ•´è¾“å‡º                            | `whatis -l man`                         |
| `-M PATH` | æŒ‡å®šè‡ªå®šä¹‰æ‰‹å†Œé¡µæœç´¢è·¯å¾„                            | `whatis -M /usr/local/man ls`           |
| `-V`      | æ˜¾ç¤º `whatis` ç‰ˆæœ¬ä¿¡æ¯                              | `whatis -V`                             |


------
### ğŸ› ï¸ **ä½¿ç”¨ç¤ºä¾‹**

1. **åŸºç¡€æŸ¥è¯¢**
   ```
   whatis cp
   # è¾“å‡ºï¼šcp (1) - copy files and directories
   whatis chown
   # è¾“å‡ºï¼šchown (1) - change file owner and group
   ```
2. **å¤šå…³é”®è¯ä¸ç« èŠ‚è¿‡æ»¤**
   ```
   whatis -s 2 chown  # ä»…æŸ¥è¯¢ç³»ç»Ÿè°ƒç”¨ç« èŠ‚
   # è¾“å‡ºï¼šchown (2) - change ownership of a file
   ```
3. **æ­£åˆ™åŒ¹é…ä¸é€šé…ç¬¦**
   ```
   whatis -r '^re'    # åŒ¹é…ä»¥ "re" å¼€å¤´çš„å‘½ä»¤
   whatis -w '??'     # åŒ¹é…ä¸¤ä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼ˆå¦‚ lsã€cdï¼‰
   ```


------
### âš ï¸ **æ³¨æ„äº‹é¡¹ä¸æ•…éšœæ’é™¤**

1. **æ•°æ®åº“æ›´æ–°**
   - è‹¥
```
     whatis
```
è¿”å›
```
     nothing appropriate
```
     ï¼Œéœ€æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ï¼š
     ```
     sudo mandb     # å¤šæ•°ç°ä»£ç³»ç»Ÿ
     sudo makewhatis # æ—§ç‰ˆç³»ç»Ÿ[3,6](@ref)
     ```
2. **å±€é™æ€§**
   - **ä»…æ˜¾ç¤ºå·²å®‰è£…å‘½ä»¤**ï¼šæ— æ³•æŸ¥è¯¢æœªå®‰è£…è½¯ä»¶çš„ä¿¡æ¯[3](@ref)ã€‚
   - **ç»“æœä¾èµ–æ‰‹å†Œé¡µ**ï¼šè‹¥å‘½ä»¤æœªæä¾›æ‰‹å†Œé¡µï¼Œ`whatis` æ— è¾“å‡ºï¼ˆå¦‚éƒ¨åˆ†è„šæœ¬å·¥å…·ï¼‰ã€‚
3. **è¾“å‡ºå¤šç»“æœå¤„ç†**
   - åŒä¸€å‘½ä»¤åœ¨ä¸åŒç« èŠ‚å¯èƒ½å­˜åœ¨å¤šæ¡è®°å½•ï¼ˆå¦‚
```
     chown
```
åœ¨ç« èŠ‚ 1 å’Œ 2ï¼‰ï¼š
     ```
     whatis chown
     # è¾“å‡ºï¼š
     # chown (1) - change file owner and group
     # chown (2) - change ownership of a file
     ```
     ä½¿ç”¨
```
     -s
```
é™å®šç« èŠ‚å¯è¿‡æ»¤ç»“æœ


------
### ğŸ” **ä¸å…¶ä»–å‘½ä»¤çš„å¯¹æ¯”**

| **å‘½ä»¤**  | **åŠŸèƒ½**                         | **å…¸å‹ç”¨ä¾‹**                       | **ä¸ `whatis` åŒºåˆ«**            |
| --------- | -------------------------------- | ---------------------------------- | ------------------------------- |
| `which`   | æŸ¥æ‰¾å‘½ä»¤çš„**å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„**     | `which python` â†’ `/usr/bin/python` | å®šä½ä½ç½® vs æè¿°åŠŸèƒ½[7](@ref)   |
| `whereis` | å®šä½å‘½ä»¤çš„**äºŒè¿›åˆ¶ã€æ‰‹å†Œå’Œæºç ** | `whereis python`ï¼ˆæ˜¾ç¤ºå¤šè·¯å¾„ï¼‰     | å¤šèµ„æºå®šä½ vs åŠŸèƒ½æ‘˜è¦[7](@ref) |
| `man`     | **è¯¦ç»†æ‰‹å†Œé¡µæŸ¥çœ‹**               | `man ls`ï¼ˆå®Œæ•´æ–‡æ¡£ï¼‰               | è¯¦è¿° vs å•è¡Œæ‘˜è¦[3,5](@ref)     |


------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒä»·å€¼**ï¼š`whatis` æ˜¯ Linux å‘½ä»¤è¡Œç¯å¢ƒä¸­çš„â€œé€ŸæŸ¥è¯å…¸â€ï¼Œé€‚ç”¨äºå¿«é€Ÿå®šä½å‘½ä»¤åŠŸèƒ½ï¼Œ**æå‡æ“ä½œæ•ˆç‡**[6,7](@ref)ã€‚
- é«˜é¢‘åœºæ™¯ï¼š
  - é™Œç”Ÿå‘½ä»¤åˆæ¢ â†’ `whatis [command]`
- è„šæœ¬ä¸­åŠ¨æ€è·å–æè¿° â†’ `func_desc=$(whatis chmod)`
  - å¤šç« èŠ‚ç»“æœè¿‡æ»¤ â†’ `whatis -s 2 open`
- è¿›é˜¶å»ºè®®ï¼š
  - å®šæœŸæ›´æ–°æ•°æ®åº“ï¼ˆ`sudo mandb`ï¼‰ç¡®ä¿ç»“æœå‡†ç¡®ã€‚
  - ç»“åˆ `-r` å’Œ `-w` å®ç°å¤æ‚åŒ¹é…ï¼Œåº”å¯¹æ¨¡ç³ŠæŸ¥è¯¢éœ€æ±‚ã€‚
  - ç»“æœä¸å…¨æ—¶ä¼˜å…ˆæ£€æŸ¥æ‰‹å†Œé¡µæ˜¯å¦å­˜åœ¨ï¼ˆå¦‚ `man -w [command]`ï¼‰ã€‚
## æ–‡ä»¶æƒé™

Linuxæ–‡ä»¶æƒé™ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿå®‰å…¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé€šè¿‡ç²¾ç»†æ§åˆ¶ç”¨æˆ·å¯¹æ–‡ä»¶/ç›®å½•çš„è®¿é—®ï¼Œç¡®ä¿æ•°æ®éš”ç¦»ä¸ç³»ç»Ÿç¨³å®šã€‚ä»¥ä¸‹ä»åŸºç¡€åˆ°é«˜çº§è¿›è¡Œå…¨é¢è§£æï¼š


------
### ğŸ“Œ æƒé™åŸºç¡€æ¦‚å¿µ

1. **æƒé™ç±»å‹**
   - **è¯»ï¼ˆrï¼‰**ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼ˆ`cat`ï¼‰æˆ–åˆ—å‡ºç›®å½•å†…å®¹ï¼ˆ`ls`ï¼‰ã€‚
   - **å†™ï¼ˆwï¼‰**ï¼šä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œæˆ–åœ¨ç›®å½•ä¸­åˆ›å»º/åˆ é™¤æ–‡ä»¶ã€‚
   - **æ‰§è¡Œï¼ˆxï¼‰**ï¼šè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚è„šæœ¬ï¼‰ï¼Œæˆ–è¿›å…¥ç›®å½•ï¼ˆ`cd`ï¼‰[6,10](@ref)ã€‚
2. **æƒé™å¯¹è±¡**
   - **æ‰€æœ‰è€…ï¼ˆuï¼‰**ï¼šæ–‡ä»¶åˆ›å»ºè€…ï¼Œæ‹¥æœ‰æœ€é«˜æ§åˆ¶æƒã€‚
   - **æ‰€å±ç»„ï¼ˆgï¼‰**ï¼šä¸æ‰€æœ‰è€…åŒç»„çš„ç”¨æˆ·ã€‚
   - **å…¶ä»–ç”¨æˆ·ï¼ˆoï¼‰**ï¼šç³»ç»Ÿå†…é™¤ä»¥ä¸Šä¸¤è€…çš„æ‰€æœ‰ç”¨æˆ·[8,10](@ref)ã€‚
3. **æƒé™æ£€æŸ¥é¡ºåº**
   Linuxä¾æ¬¡æ£€æŸ¥ç”¨æˆ·èº«ä»½ï¼šâ€‹**æ‰€æœ‰è€… â†’ æ‰€å±ç»„æˆå‘˜ â†’ å…¶ä»–ç”¨æˆ·**ï¼ŒåŒ¹é…å³ç”Ÿæ•ˆ[8](@ref)ã€‚


------
### ğŸ”¢ æƒé™è¡¨ç¤ºæ–¹æ³•

1. **ç¬¦å·è¡¨ç¤ºæ³•**ï¼ˆ9å­—ç¬¦ï¼‰
   - æ ¼å¼ï¼š
     ```
     -rwxr-xr--
     ```
     - ç¬¬1ä½ï¼šæ–‡ä»¶ç±»å‹ï¼ˆ`-`æ™®é€šæ–‡ä»¶ï¼Œ`d`ç›®å½•ï¼Œ`l`é“¾æ¥ï¼‰
     - å9ä½ï¼šä¸‰ç»„æƒé™ï¼ˆæ‰€æœ‰è€…/ç»„/å…¶ä»–å„å 3ä½ï¼‰[6,9](@ref)ã€‚
   - ç¤ºä¾‹ï¼š
     - `rwxr-xr--` â†’ æ‰€æœ‰è€…å¯è¯»/å†™/æ‰§è¡Œï¼Œç»„å¯è¯»/æ‰§è¡Œï¼Œå…¶ä»–ä»…å¯è¯»ã€‚
2. **æ•°å­—è¡¨ç¤ºæ³•**ï¼ˆ3ä½å…«è¿›åˆ¶æ•°ï¼‰
   - è®¡ç®—è§„åˆ™ï¼š`r=4, w=2, x=1`ï¼Œæ¯ç»„æƒé™å€¼ç›¸åŠ [9,10](@ref)ã€‚
   - å¸¸è§ç»„åˆï¼š
     | æ•°å­—  | ç¬¦å·è¡¨ç¤º    | é€‚ç”¨åœºæ™¯                                        |
     | ----- | ----------- | ----------------------------------------------- |
     | `644` | `rw-r--r--` | æ™®é€šæ–‡ä»¶ï¼ˆæ‰€æœ‰è€…å¯ä¿®æ”¹ï¼Œå…¶ä»–åªè¯»ï¼‰              |
     | `755` | `rwxr-xr-x` | å¯æ‰§è¡Œæ–‡ä»¶æˆ–ç›®å½•ï¼ˆæ‰€æœ‰è€…å…¨æƒï¼Œå…¶ä»–å¯æ‰§è¡Œ/è¿›å…¥ï¼‰ |
     | `700` | `rwx------` | ç§æœ‰æ–‡ä»¶/ç›®å½•ï¼ˆä»…æ‰€æœ‰è€…è®¿é—®ï¼‰[8,9](@ref)        |


------
### ğŸ§© æƒé™å¯¹æ–‡ä»¶ vs ç›®å½•çš„ä¸åŒå«ä¹‰

| **æƒé™** | **æ–‡ä»¶**                  | **ç›®å½•**                   |
| -------- | ------------------------- | -------------------------- |
| **r**    | è¯»å–å†…å®¹ï¼ˆ`cat`ï¼‰         | åˆ—å‡ºå­é¡¹ï¼ˆ`ls`ï¼‰           |
| **w**    | ä¿®æ”¹å†…å®¹ï¼ˆ`vim`ï¼‰         | åˆ›å»º/åˆ é™¤æ–‡ä»¶ï¼ˆéœ€ç»“åˆ`x`ï¼‰ |
| **x**    | æ‰§è¡Œç¨‹åºï¼ˆ`./script.sh`ï¼‰ | è¿›å…¥ç›®å½•ï¼ˆ`cd`ï¼‰           |
> ğŸ’¡ **å…³é”®åŒºåˆ«**ï¼šç›®å½•çš„`w`æƒé™å¿…é¡»é…åˆ`x`ç”Ÿæ•ˆï¼ˆå¦‚`chmod g+wx dir`å…è®¸ç»„ç”¨æˆ·åœ¨ç›®å½•ä¸­å¢åˆ æ–‡ä»¶ï¼‰[10](@ref)ã€‚


------
### ğŸ› ï¸ æƒé™ç®¡ç†å‘½ä»¤

1. **`chmod`**ï¼šä¿®æ”¹æƒé™
   - **æ•°å­—æ–¹å¼**ï¼š`chmod 755 file.sh`
   - ç¬¦å·æ–¹å¼ï¼š
     - `chmod u+x file`ï¼šç»™æ‰€æœ‰è€…æ·»åŠ æ‰§è¡Œæƒ
   - `chmod o-w file`ï¼šç§»é™¤å…¶ä»–ç”¨æˆ·çš„å†™æƒé™
     - `chmod a=r file`ï¼šæ‰€æœ‰äººä»…ä¿ç•™è¯»æƒé™[6,7](@ref)ã€‚
   - é€’å½’ä¿®æ”¹ç›®å½•ï¼š`chmod -R 700 /private/`[6](@ref)ã€‚
2. **`chown`**ï¼šä¿®æ”¹æ‰€æœ‰è€…/ç»„
   - `chown user:group file`ï¼šåŒæ—¶ä¿®æ”¹æ‰€æœ‰è€…å’Œç»„
   - `chown :admin file`ï¼šä»…ä¿®æ”¹æ‰€å±ç»„
   - é€’å½’æ“ä½œï¼š`chown -R www:www /var/www/`[6,10](@ref)ã€‚
3. **`chgrp`**ï¼šä»…ä¿®æ”¹æ‰€å±ç»„
   - `chgrp dev file` â†’ ç­‰ä»·äº`chown :dev file`[6](@ref)ã€‚


------
### âš¡ ç‰¹æ®Šæƒé™ï¼ˆSUID/SGID/Sticky Bitï¼‰

| **ç±»å‹**           | **ä½œç”¨**                                               | **è®¾ç½®æ–¹å¼**                     | **å…¸å‹åœºæ™¯**                                     |
| ------------------ | ------------------------------------------------------ | -------------------------------- | ------------------------------------------------ |
| **SUID (4)**       | ç”¨æˆ·æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œä¸´æ—¶è·å¾—**æ–‡ä»¶æ‰€æœ‰è€…**æƒé™             | `chmod u+s file` æˆ– `chmod 4755` | `/usr/bin/passwd`ï¼ˆæ™®é€šç”¨æˆ·å¯æ”¹å¯†ç ï¼‰[2,8](@ref) |
| **SGID (2)**       | ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿**ç›®å½•çš„æ‰€å±ç»„**                 | `chmod g+s dir` æˆ– `chmod 2770`  | å›¢é˜Ÿå…±äº«ç›®å½•ï¼ˆ`/shared/`ï¼‰[2,8](@ref)            |
| **Sticky Bit (1)** | ç›®å½•ä¸­æ–‡ä»¶ä»…å…è®¸**æ‰€æœ‰è€…åˆ é™¤**ï¼ˆå³ä½¿å…¶ä»–ç”¨æˆ·æœ‰å†™æƒé™ï¼‰ | `chmod o+t dir` æˆ– `chmod 1777`  | `/tmp` ä¸´æ—¶ç›®å½•[2,8](@ref)                       |
> âš ï¸ **å®‰å…¨è­¦å‘Š**ï¼šSUIDæ»¥ç”¨å¯èƒ½å¯¼è‡´æƒé™æå‡æ¼æ´ï¼ˆå¦‚`chmod u+s /bin/bash`å±é™©ï¼ï¼‰[8](@ref)ã€‚


------
### âš–ï¸ é»˜è®¤æƒé™ä¸umask

1. **umaskä½œç”¨**
   - æ§åˆ¶æ–°å»ºæ–‡ä»¶/ç›®å½•çš„é»˜è®¤æƒé™ï¼Œè®¡ç®—æ–¹å¼ï¼š
     - **æ–‡ä»¶é»˜è®¤æƒé™ = 666 - umask**
     - **ç›®å½•é»˜è®¤æƒé™ = 777 - umask**[8,10](@ref)ã€‚
   - ç¤ºä¾‹ï¼š`umask 022` â†’ æ–‡ä»¶æƒé™ä¸º`644`ï¼ˆ`666-022`ï¼‰ï¼Œç›®å½•ä¸º`755`ï¼ˆ`777-022`ï¼‰ã€‚
2. **umaskç®¡ç†**
   - ä¸´æ—¶ä¿®æ”¹ï¼š`umask 077`ï¼ˆæ–‡ä»¶å˜ä¸º`600`ï¼Œç›®å½•`700`ï¼‰
   - æ°¸ä¹…ç”Ÿæ•ˆï¼šåœ¨`~/.bashrc`æˆ–`/etc/profile`ä¸­æ·»åŠ `umask 027`[8](@ref)ã€‚


------
### ğŸ” ACLé«˜çº§æƒé™æ§åˆ¶

å½“éœ€è¦ä¸º**ç‰¹å®šç”¨æˆ·/ç»„**è®¾ç½®è¶…å‡ºä¼ ç»Ÿä¸‰ç»„çš„æƒé™æ—¶ï¼Œä½¿ç”¨ACLï¼š
1. 
   æŸ¥çœ‹ACLï¼š
   ```
   getfacl file
   ```
   - è¾“å‡ºåŒ…å«ç‰¹æ®Šç”¨æˆ·/ç»„çš„ç‹¬ç«‹æƒé™[2](@ref)ã€‚
2. 
   è®¾ç½®ACLï¼š
   - `setfacl -m u:lee:rwx file`ï¼šç»™ç”¨æˆ·`lee`æ·»åŠ è¯»å†™æ‰§è¡Œæƒ
   - `setfacl -m d:g:dev:rw dir`ï¼šç›®å½•æ–°å»ºæ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿ç»„æƒé™[2](@ref)ã€‚
3. **æƒé™ä¼˜å…ˆçº§**ï¼š
   æ‰€æœ‰è€… > ç‰¹æ®ŠæŒ‡å®šç”¨æˆ· > æ‰€å±ç»„ > å…¶ä»–ç”¨æˆ·[2](@ref)ã€‚


------
### ğŸ’ æ€»ç»“ï¼šæœ€ä½³å®è·µä¸å®‰å…¨å»ºè®®

1. **æœ€å°æƒé™åŸåˆ™**ï¼šéå¿…è¦ä¸å¼€æ”¾å†™å’Œæ‰§è¡Œæƒï¼ˆå¦‚é…ç½®æ–‡ä»¶ç”¨`644`ï¼‰ã€‚
2. **é€’å½’æ“ä½œè°¨æ…**ï¼š`chmod -R`é¿å…è¯¯æ”¹ç³»ç»Ÿæ–‡ä»¶ã€‚
3. **ç‰¹æ®Šæƒé™å®¡è®¡**ï¼šå®šæœŸæ‰«æSUID/SGIDæ–‡ä»¶ï¼ˆ`find / -perm -4000`ï¼‰[8](@ref)ã€‚
4. **ACLæ›¿ä»£å¤æ‚æƒé™**ï¼šéœ€ç²¾ç»†æ§åˆ¶æ—¶ä¼˜å…ˆä½¿ç”¨ACLè€Œéæ”¾å®½ç»„æƒé™ã€‚
5. **ç›®å½•æƒé™åˆ†ç¦»**ï¼šå¯å†™ç›®å½•ï¼ˆå¦‚ä¸Šä¼ æ–‡ä»¶å¤¹ï¼‰è®¾ä¸º`1770`ï¼Œé˜²æ­¢ç”¨æˆ·äº’åˆ æ–‡ä»¶[8,10](@ref)ã€‚
ç†è§£å¹¶æ­£ç¡®åº”ç”¨æƒé™æœºåˆ¶ï¼Œæ˜¯ä¿éšœLinuxç³»ç»Ÿå®‰å…¨ä¸åä½œæ•ˆç‡çš„æ ¸å¿ƒèƒ½åŠ› ğŸ”‘ã€‚
## ç‰¹æ®Šæƒé™

Linuxç³»ç»Ÿä¸­çš„ç‰¹æ®Šæƒé™ï¼ˆSUIDã€SGIDã€Sticky Bitï¼‰åœ¨åŸºç¡€æƒé™ï¼ˆrwxï¼‰ä¹‹ä¸Šæä¾›äº†æ›´ç²¾ç»†çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œä¸»è¦ç”¨äºè§£å†³ç‰¹å®šåœºæ™¯ä¸‹çš„æƒé™æå‡å’Œå…±äº«ç®¡ç†é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š


------
### ğŸ” **ä¸‰ç±»ç‰¹æ®Šæƒé™çš„æ ¸å¿ƒä½œç”¨**

| **æƒé™ç±»å‹**   | **ç¬¦å·è¡¨ç¤º** | **æ•°å­—è¡¨ç¤º** | **ä¸»è¦åº”ç”¨å¯¹è±¡**    | **æ ¸å¿ƒåŠŸèƒ½**                                                 |
| -------------- | ------------ | ------------ | ------------------- | ------------------------------------------------------------ |
| **SUID**       | `s` (ç”¨æˆ·ä½) | 4 (åƒä½)     | **å¯æ‰§è¡Œæ–‡ä»¶**      | æ‰§è¡Œæ—¶ä¸´æ—¶è·å¾—**æ–‡ä»¶æ‰€æœ‰è€…**çš„æƒé™ï¼ˆå¦‚æ™®é€šç”¨æˆ·æ‰§è¡Œ`/usr/bin/passwd`å¯ä¿®æ”¹å¯†ç ï¼‰[2,7,9](@ref) |
| **SGID**       | `s` (ç»„ä½)   | 2 (åƒä½)     | **ç›®å½•/å¯æ‰§è¡Œæ–‡ä»¶** | ç›®å½•ï¼šæ–°æ–‡ä»¶**ç»§æ‰¿ç›®å½•çš„æ‰€å±ç»„** æ–‡ä»¶ï¼šæ‰§è¡Œæ—¶ä¸´æ—¶è·å¾—**æ–‡ä»¶æ‰€å±ç»„**çš„æƒé™[9,10,11](@ref) |
| **Sticky Bit** | `t` (å…¶ä»–ä½) | 1 (åƒä½)     | **ç›®å½•**            | ä»…å…è®¸**æ–‡ä»¶æ‰€æœ‰è€…æˆ–root**åˆ é™¤/é‡å‘½åç›®å½•å†…æ–‡ä»¶ï¼ˆå¦‚`/tmp`ç›®å½•ï¼‰[2,9,10](@ref) |


------
### âš™ï¸ **è®¾ç½®ä¸è¯†åˆ«æ–¹æ³•**

#### **è®¾ç½®å‘½ä»¤**

- å­—ç¬¦æ¨¡å¼ï¼š
  ```
  chmod u+s file      # è®¾ç½®SUID
  chmod g+s dir       # è®¾ç½®SGIDï¼ˆç›®å½•ï¼‰
  chmod o+t dir       # è®¾ç½®Sticky Bit
  ```
- æ•°å­—æ¨¡å¼
  ï¼ˆç»„åˆä½¿ç”¨ï¼‰ï¼š
  ```
  chmod 4755 file    # SUIDï¼ˆ4ï¼‰+ æ‰€æœ‰è€…rwxã€ç»„r-xã€å…¶ä»–r-x
  chmod 2770 /shared  # SGIDï¼ˆ2ï¼‰+ æ‰€æœ‰è€…rwxã€ç»„rwxã€å…¶ä»–æ— æƒé™
  chmod 1777 /tmp     # Sticky Bitï¼ˆ1ï¼‰+ æ‰€æœ‰ç”¨æˆ·rwx
  ```
#### **æƒé™è¯†åˆ«**

- SUIDï¼šç”¨æˆ·æ‰§è¡Œä½æ˜¾ç¤º
```
  s
```
æˆ–
```
  S
```
  ï¼ˆå¤§å†™è¡¨ç¤ºæ— æ‰§è¡Œæƒé™ï¼‰
  > ç¤ºä¾‹ï¼š`-rwsr-xr-x`ï¼ˆ`/usr/bin/passwd`ï¼‰[2,7](@ref)
- SGIDï¼šç»„æ‰§è¡Œä½æ˜¾ç¤º
```
  s
```
æˆ–
```
  S
```
  > ç¤ºä¾‹ï¼š`drwxr-sr-x`ï¼ˆå…±äº«ç›®å½•ï¼‰[9,11](@ref)
- Sticky Bitï¼šå…¶ä»–ç”¨æˆ·æ‰§è¡Œä½æ˜¾ç¤º t æˆ– T
  > ç¤ºä¾‹ï¼š`drwxrwxrwt`ï¼ˆ`/tmp`ç›®å½•ï¼‰[2,9](@ref)


-----â€”â€”
### ğŸ› ï¸ **å…¸å‹åº”ç”¨åœºæ™¯**

#### **SUIDï¼šç‰¹æƒå‘½ä»¤æ‰§è¡Œ**

- åœºæ™¯ï¼šæ™®é€šç”¨æˆ·æ‰§è¡Œéœ€é«˜æƒé™çš„æ“ä½œ
  - `passwd` ä¿®æ”¹å¯†ç ï¼ˆéœ€å†™`/etc/shadow`ï¼‰[2,7](@ref)
  - `ping` å‘é€ICMPåŒ…ï¼ˆéœ€æ“ä½œç½‘ç»œæ¥å£ï¼‰
- åŸç†ï¼š
  ```
  graph LR
    A[æ™®é€šç”¨æˆ·æ‰§è¡Œpasswd] --> B[SUIDç”Ÿæ•ˆ]
    B --> C[ä»¥rootèº«ä»½è¿è¡Œ]
    C --> D[ä¿®æ”¹/etc/shadowæˆåŠŸ]
  ```
#### **SGIDï¼šå›¢é˜Ÿåä½œä¸æƒé™ç»§æ‰¿**

- ç›®å½•åœºæ™¯ï¼š
  - åˆ›å»º
    ```
    /project
    ```
    ç›®å½•å¹¶è®¾ç½®SGIDï¼š
    ```
    mkdir /project
    chgrp dev-team /project
    chmod 2770 /project
    ```
  - æ•ˆæœï¼šä»»ä½•ç”¨æˆ·åœ¨`/project`ä¸‹æ–°å»ºæ–‡ä»¶ï¼Œæ‰€å±ç»„è‡ªåŠ¨å˜ä¸º`dev-team`[9,11](@ref)
- æ–‡ä»¶åœºæ™¯ï¼š
  - `crontab` å‘½ä»¤ï¼ˆä»¥`crontab`ç»„æƒé™ä¿®æ”¹ç”¨æˆ·è®¡åˆ’ä»»åŠ¡ï¼‰
#### **Sticky Bitï¼šå…¬å…±ç›®å½•å†™ä¿æŠ¤**

- åœºæ™¯ï¼šå¤šç”¨æˆ·å¯å†™ç›®å½•ï¼ˆå¦‚
  ```
  /tmp
  ```
  ã€
  ```
  /var/tmp
  ```
  ï¼‰
  - ç”¨æˆ·å¯åˆ›å»ºæ–‡ä»¶ï¼Œä½†**åªèƒ½åˆ é™¤è‡ªå·±çš„æ–‡ä»¶**
  - ç¤ºä¾‹ï¼š
    ```
    # ç”¨æˆ·Aåˆ›å»ºæ–‡ä»¶
    echo "test" > /tmp/A_file
    # ç”¨æˆ·Bæ— æ³•åˆ é™¤A_fileï¼Œå³ä½¿æœ‰/tmpçš„wæƒé™[2,9](@ref)
    ```


------
### âš ï¸ **å®‰å…¨é£é™©ä¸é˜²æŠ¤æªæ–½**

#### **SUID/SGIDçš„å®‰å…¨éšæ‚£**

- æƒé™æå‡æ¼æ´ï¼š
  - è‹¥SUIDæ–‡ä»¶æ‰€æœ‰è€…æ˜¯rootä¸”å­˜åœ¨æ¼æ´ï¼ˆå¦‚ç¼“å†²åŒºæº¢å‡ºï¼‰ï¼Œæ”»å‡»è€…å¯è·å–root shell[6,8](@ref)
  - ç¤ºä¾‹ï¼šæ¶æ„æ›¿æ¢`/usr/bin/cat`å¹¶è®¾ç½®SUIDï¼Œå¯è¯»å–ä»»æ„æ–‡ä»¶ï¼ˆå¦‚`/etc/shadow`ï¼‰[7](@ref)
- æ»¥ç”¨é£é™©ï¼š
  - å…¨å±€å¯å†™çš„SUIDæ–‡ä»¶ï¼ˆå¦‚`chmod o+w suid_file`ï¼‰å¯è¢«æ›¿æ¢ä¸ºæ¶æ„ç¨‹åº[8](@ref)
#### **é˜²æŠ¤ç­–ç•¥**

- æœ€å°åŒ–SUID/SGIDæ–‡ä»¶ï¼š
  ```
  # å®šæœŸå®¡è®¡å¹¶ç§»é™¤éå¿…è¦SUID/SGID
  find / -type f \( -perm -4000 -o -perm -2000 \) -ls 2>/dev/null
  ```
- æƒé™æ§åˆ¶ï¼š
  - ç¦æ­¢æ™®é€šç”¨æˆ·è®¾ç½®ç‰¹æ®Šæƒé™ï¼ˆ`chmod`æƒé™é™åˆ¶ï¼‰
  - ä½¿ç”¨`capabilities`æ›¿ä»£éƒ¨åˆ†SUIDéœ€æ±‚ï¼ˆå¦‚`cap_net_raw`æ›¿ä»£`ping`çš„SUIDï¼‰[8](@ref)
- æ–‡ä»¶ç³»ç»ŸåŠ å›ºï¼š
  - å¯ç”¨SELinux/AppArmoré™åˆ¶ç¨‹åºè¡Œä¸º[6,8](@ref)


------
### ğŸ’ **æœ€ä½³å®è·µæ€»ç»“**

1. **è°¨æ…æˆäºˆSUID**ï¼šä»…é™å¿…è¦ç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚`passwd`ã€`sudo`ï¼‰ï¼Œç¦æ­¢è„šæœ¬è®¾ç½®SUIDï¼ˆä»…æ”¯æŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰[2,6](@ref)
2. **SGIDç›®å½•æƒé™**ï¼šå…±äº«ç›®å½•è®¾ä¸º`2770`ï¼Œé…åˆä¸¥æ ¼çš„ç»„æˆå‘˜ç®¡ç†[9,11](@ref)
3. **å…¬å…±ç›®å½•å¿…åŠ Sticky Bit**ï¼šå¦‚`/tmp`ã€ä¸Šä¼ ç›®å½•ç­‰[9,10](@ref)
4. **å®šæœŸå®¡è®¡**ï¼šæ¯æœˆæ‰«æç‰¹æ®Šæƒé™æ–‡ä»¶ï¼Œè®°å½•å˜æ›´æ—¥å¿—[6,8](@ref)
5. **æ›¿ä»£æ–¹æ¡ˆä¼˜å…ˆ**ï¼šç”¨Linux Capabilitiesæˆ–å‘½åç©ºé—´éš”ç¦»æ›¿ä»£é«˜æƒé™æ“ä½œ[8](@ref)
> é€šè¿‡åˆç†è¿ç”¨ç‰¹æ®Šæƒé™ï¼Œèƒ½åœ¨ä¿éšœåŠŸèƒ½éœ€æ±‚çš„åŒæ—¶æœ€å°åŒ–å®‰å…¨é£é™©ã€‚ç®¡ç†å‘˜åº”æ·±åˆ»ç†è§£ `SUIDâ‰ ä¸‡èƒ½ææƒå·¥å…·`ï¼Œè€Œæ˜¯**å®‰å…¨ä¸åŠŸèƒ½å¹³è¡¡çš„è‰ºæœ¯** ğŸ”‘ã€‚
## umask

umaskï¼ˆç”¨æˆ·æ–‡ä»¶åˆ›å»ºæ©ç ï¼‰æ˜¯Linuxç³»ç»Ÿä¸­ç”¨äºæ§åˆ¶**æ–°å»ºæ–‡ä»¶æˆ–ç›®å½•é»˜è®¤æƒé™**çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé€šè¿‡å±è”½ç‰¹å®šæƒé™ä½å®ç°å®‰å…¨ä¸åä½œçš„å¹³è¡¡ã€‚ä»¥ä¸‹ä»åŸç†åˆ°å®è·µå…¨é¢è§£æï¼š


------
### ğŸ”’ æ ¸å¿ƒåŸç†ï¼šæƒé™è¿‡æ»¤æœºåˆ¶

1. **ä½œç”¨æœ¬è´¨**
   - umask æ˜¯â€œæƒé™å‡æ³•å™¨â€ï¼šä»ç³»ç»Ÿé¢„è®¾çš„**æœ€å¤§é»˜è®¤æƒé™**ä¸­å±è”½æŒ‡å®šæƒé™ä½ï¼Œç”Ÿæˆæœ€ç»ˆæƒé™[1,4](@ref)ã€‚
   - **æ–‡ä»¶æœ€å¤§æƒé™**ï¼š`666`ï¼ˆ`rw-rw-rw-`ï¼‰ï¼Œå› å®‰å…¨è€ƒè™‘é»˜è®¤**ä¸å«æ‰§è¡Œæƒé™**ï¼ˆé¿å…æ¶æ„è„šæœ¬è‡ªåŠ¨è¿è¡Œï¼‰ã€‚
   - **ç›®å½•æœ€å¤§æƒé™**ï¼š`777`ï¼ˆ`drwxrwxrwx`ï¼‰ï¼Œå› ç›®å½•éœ€`x`æƒé™æ‰èƒ½è®¿é—®å†…å®¹[9](@ref)ã€‚
2. **è®¡ç®—é€»è¾‘**
   - **å…¬å¼**ï¼š`æœ€ç»ˆæƒé™ = æœ€å¤§æƒé™ & (~umask)`ï¼ˆæŒ‰ä½å–ååä¸æ“ä½œï¼‰[7](@ref)ã€‚
   - ç¤ºä¾‹ï¼š
     - umask=022ï¼š
       æ–‡ä»¶æƒé™ = 666 - 022 = 644ï¼ˆ`rw-r--r--`ï¼‰
       ç›®å½•æƒé™ = 777 - 022 = 755ï¼ˆ`rwxr-xr-x`ï¼‰[2,8](@ref)ã€‚
     - **æ³¨æ„**ï¼šå®é™…æ˜¯ä½è¿ç®—è€Œéç®—æœ¯å‡ï¼ˆé¿å…å‡ºç°`rw--wx`ç­‰é”™è¯¯ï¼‰[5](@ref)ã€‚


------
### âš™ï¸ æƒé™è®¾ç½®ä¸æŸ¥çœ‹æ–¹æ³•

1. **æŸ¥çœ‹å½“å‰umask**
   - æ•°å­—æ ¼å¼ï¼š`umask` â†’ è¾“å‡º`0022`ï¼ˆé¦–ä½0ä¸ºç‰¹æ®Šæƒé™ä½ï¼Œé€šå¸¸å¿½ç•¥ï¼‰[6](@ref)ã€‚
   - ç¬¦å·æ ¼å¼ï¼š`umask -S` â†’ `u=rwx,g=rx,o=rx`ï¼ˆç›´è§‚æ˜¾ç¤ºå„è§’è‰²æƒé™ï¼‰[3,4](@ref)ã€‚
2. **ä¿®æ”¹umaskå€¼**
   - ä¸´æ—¶ç”Ÿæ•ˆ
     ï¼ˆå½“å‰ä¼šè¯ï¼‰ï¼š
     ```
     umask 027   # æ–‡ä»¶æƒé™ï¼š640ï¼ˆrw-r-----ï¼‰ï¼Œç›®å½•ï¼š750ï¼ˆrwxr-x---ï¼‰
     ```
   - æ°¸ä¹…ç”Ÿæ•ˆï¼š
     - ç”¨æˆ·çº§ï¼šå†™å…¥`~/.bashrc`æˆ–`~/.profile`ï¼ˆå¦‚`umask 002`ï¼‰[2,8](@ref)ã€‚
     - ç³»ç»Ÿçº§ï¼šä¿®æ”¹`/etc/profile`ï¼ˆå½±å“æ‰€æœ‰ç”¨æˆ·ï¼‰[1](@ref)ã€‚


------
### ğŸ›¡ï¸ å®‰å…¨å®è·µï¼šåœºæ™¯åŒ–é…ç½®å»ºè®®

| **åœºæ™¯**                   | **æ¨èumask**  | **æ–‡ä»¶æƒé™**                       | **ç›®å½•æƒé™**                       | **å®‰å…¨ç›®æ ‡**                  |
| -------------------------- | -------------- | ---------------------------------- | ---------------------------------- | ----------------------------- |
| **æ™®é€šç”¨æˆ·åä½œ**           | 002            | 664ï¼ˆrw-rw-r--ï¼‰                   | 775ï¼ˆrwxrwxr-xï¼‰                   | åŒç»„ç”¨æˆ·å¯ä¿®æ”¹æ–‡ä»¶[9](@ref)   |
| **rootç”¨æˆ·/æ•æ„Ÿæ•°æ®**      | 022æˆ–027       | 644ï¼ˆrw-r--r--ï¼‰æˆ–640ï¼ˆrw-r-----ï¼‰ | 755ï¼ˆrwxr-xr-xï¼‰æˆ–750ï¼ˆrwxr-x---ï¼‰ | é™åˆ¶ç»„/ä»–äººå†™æƒé™[7,8](@ref)  |
| **WebæœåŠ¡å™¨æ—¥å¿—ç›®å½•**      | 027            | 640ï¼ˆrw-r-----ï¼‰                   | 750ï¼ˆrwxr-x---ï¼‰                   | é˜²æ­¢å…¬å¼€æ³„éœ²æ—¥å¿—              |
| **å…±äº«ä¸´æ—¶ç›®å½•ï¼ˆå¦‚/tmpï¼‰** | é…åˆç²˜æ»ä½`+t` | -                                  | 1777ï¼ˆrwxrwxrwtï¼‰                  | ç”¨æˆ·ä»…èƒ½åˆ è‡ªå·±çš„æ–‡ä»¶[9](@ref) |
> ğŸ’¡ **ç²˜æ»ä½ï¼ˆSticky Bitï¼‰**ï¼šå¯¹ç›®å½•è®¾ç½®`chmod +t`åï¼ˆå¦‚`/tmp`ï¼‰ï¼Œå³ä½¿ç›®å½•æƒé™ä¸º777ï¼Œç”¨æˆ·ä¹Ÿåªèƒ½åˆ é™¤è‡ªå·±åˆ›å»ºçš„æ–‡ä»¶[9](@ref)ã€‚


------
### âš ï¸ å¸¸è§è¯¯åŒºä¸éš¾ç‚¹è§£æ

1. **umaskä¸æ§åˆ¶æ‰§è¡Œæƒé™**
   - æ–‡ä»¶é»˜è®¤æ— `x`æƒé™ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ ï¼ˆå¦‚`chmod +x script.sh`ï¼‰[9](@ref)ã€‚
   - è‹¥umaskå«`1`ï¼ˆå¦‚033ï¼‰ï¼Œæ–‡ä»¶æƒé™è®¡ç®—ä¸º`633`ï¼ˆ`rw--wx-wx`ï¼‰ä½†å®é™…ç³»ç»Ÿä¼š**å¼ºåˆ¶å»é™¤æ–‡ä»¶xä½** â†’ `rw--w--w-`ï¼ˆ622ï¼‰[5](@ref)ã€‚
2. **ç›®å½•æƒé™å¿…é¡»å«`x`**
   - æ— `x`æƒé™æ—¶ï¼šæ— æ³•`cd`è¿›å…¥æˆ–`ls`æŸ¥çœ‹å­æ–‡ä»¶å±æ€§ï¼ˆå³ä½¿å·²çŸ¥è·¯å¾„ï¼‰[9](@ref)ã€‚
   - ä¾‹ï¼šumask=033æ—¶ï¼Œç›®å½•æƒé™ä¸º`744`ï¼ˆ`rwxr--r--`ï¼‰ï¼Œä½†ç»„/ä»–äººå› æ— `x`å¯¼è‡´æ— æ³•è®¿é—®å­æ–‡ä»¶ã€‚
3. **æƒé™ç»§æ‰¿é—®é¢˜**
   - umaskä»…å½±å“**æ–°åˆ›å»º**çš„æ–‡ä»¶/ç›®å½•ï¼Œä¸ä¿®æ”¹å·²æœ‰å¯¹è±¡æƒé™[7](@ref)ã€‚
   - å­ç›®å½•ç»§æ‰¿çˆ¶ç›®å½•æƒé™éœ€é…åˆ`SGID`ï¼ˆå¦‚`chmod g+s dir`ç¡®ä¿æ–°å»ºæ–‡ä»¶å±ç»„ä¸€è‡´ï¼‰[9](@ref)ã€‚


------
### ğŸ”§ è°ƒè¯•æŠ€å·§ä¸å·¥å…·

1. **å¿«é€ŸéªŒè¯æƒé™**
   ```
   umask 022
   touch file.txt  && ls -l file.txt    # è¾“å‡º -rw-r--r--
   mkdir dir1     && ls -ld dir1       # è¾“å‡º drwxr-xr-x
   ```
2. **umaskå€¼å¼‚å¸¸æ£€æµ‹**
   - è‹¥æ–‡ä»¶æƒé™æ„å¤–ä¸º`rw--wx--T`ï¼ˆå«å¤§å†™`T`ï¼‰ï¼Œè¡¨ç¤º**ç²˜æ»ä½è®¾ç½®é”™è¯¯**ï¼ˆåº”ä»…ç”¨äºç›®å½•ï¼‰[9](@ref)ã€‚


------
### ğŸ’ æ€»ç»“ï¼šæœ€ä½³å®è·µ

1. **æœ€å°æƒé™åŸåˆ™**ï¼šç”Ÿäº§ç¯å¢ƒé¿å…ä½¿ç”¨`umask 000`ï¼ˆæƒé™777/666ï¼‰[8](@ref)ã€‚
2. 
   ç¯å¢ƒéš”ç¦»ï¼š
   - ä¸ªäººå¼€å‘æœºï¼š`umask 002`ï¼ˆä¾¿äºåä½œï¼‰ã€‚
   - æœåŠ¡å™¨/å®¹å™¨ï¼š`umask 027`ï¼ˆå¢å¼ºéš”ç¦»æ€§ï¼‰[7](@ref)ã€‚
3. 
   æƒé™å®¡è®¡å‘½ä»¤ï¼š
   ```
   # æ£€æŸ¥ç³»ç»Ÿæ‰€æœ‰SUIDæ–‡ä»¶ï¼ˆé…åˆumask 022æ›´å®‰å…¨ï¼‰
   find / -perm -4000 -ls 2>/dev/null
   ```
> é€šè¿‡åˆç†é…ç½®umaskï¼Œå¯åœ¨ä¾¿åˆ©æ€§ä¸å®‰å…¨æ€§é—´å–å¾—å¹³è¡¡ã€‚**è®°ä½ï¼šumaskä¸æ˜¯åŠ æ³•è€Œæ˜¯å‡æ³•**â€”â€”å®ƒä»æœ€å¤§æƒé™ä¸­â€œå‰¥å¤ºâ€éƒ¨åˆ†æƒåŠ›ï¼Œè€Œéèµ‹äºˆæ–°æƒåŠ›[4,9](@ref)ã€‚
## ACL

ä»¥ä¸‹æ˜¯å¯¹ **Linux ACLï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰** çš„å…¨é¢è¯¦è§£ï¼Œæ¶µç›–å…¶æ ¸å¿ƒæ¦‚å¿µã€å·¥ä½œåŸç†ã€å‘½ä»¤ä½¿ç”¨åŠå®è·µåœºæ™¯ï¼Œå¸®åŠ©æ‚¨æŒæ¡è¿™ä¸€ç²¾ç»†æƒé™ç®¡ç†å·¥å…·ã€‚


------
### ğŸ” **ACL çš„æ ¸å¿ƒä½œç”¨**

ACLï¼ˆAccess Control Listï¼‰æ˜¯ Linux æ–‡ä»¶ç³»ç»Ÿçš„æ‰©å±•æƒé™æœºåˆ¶ï¼Œè§£å†³äº†ä¼ ç»Ÿ Unix æƒé™æ¨¡å‹ï¼ˆä»…æ”¯æŒ owner/group/others ä¸‰ç±»æƒé™ï¼‰çš„å±€é™æ€§ï¼š
1. 
   ç²¾ç»†æƒé™æ§åˆ¶
- ä¸º**å•ä¸ªç”¨æˆ·/ç»„**ç‹¬ç«‹è®¾ç½®æƒé™ï¼ˆå¦‚å…è®¸ç”¨æˆ· `john` è¯»å†™æ–‡ä»¶ï¼Œè€Œæ— éœ€ä¿®æ”¹ç»„æˆ– others æƒé™ï¼‰[1,8](@ref)ã€‚
2. 
   å¤šç”¨æˆ·/ç»„å¹¶è¡Œç®¡ç†
- æ”¯æŒåŒæ—¶ä¸ºå¤šä¸ªç”¨æˆ·æˆ–ç»„åˆ†é…ä¸åŒæƒé™ï¼ˆå¦‚å¼€å‘ç»„å¯è¯»å†™ã€æµ‹è¯•ç»„ä»…è¯»ï¼‰[3,5](@ref)ã€‚
3. 
   æƒé™ç»§æ‰¿
- é€šè¿‡ **é»˜è®¤ ACL** ä½¿ç›®å½•ä¸‹çš„æ–°æ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿é¢„è®¾æƒé™[6,9](@ref)ã€‚
> âš™ï¸ **ä¼ ç»Ÿæƒé™ vs ACL**
>
> | **åœºæ™¯**             | ä¼ ç»Ÿæƒé™                  | ACL æ–¹æ¡ˆ                    |
> | -------------------- | ------------------------- | --------------------------- |
> | å…è®¸ç‰¹å®šç”¨æˆ·è®¿é—®æ–‡ä»¶ | éœ€å°†å…¶åŠ å…¥ç»„æˆ–æ”¾å®½ others | `setfacl -m u:john:rw file` |
> | æ–°æ–‡ä»¶ç»§æ‰¿ç›®å½•æƒé™   | ä¾èµ– umask å’Œçˆ¶ç›®å½•æƒé™   | è®¾ç½®ç›®å½•çš„é»˜è®¤ ACL          |


------
### âš™ï¸ **ACL çš„æ ¸å¿ƒæœºåˆ¶**

#### **ACL ç±»å‹**

- è®¿é—® ACLï¼ˆAccess ACLï¼‰
  ç›´æ¥åº”ç”¨äºæ–‡ä»¶æˆ–ç›®å½•ï¼Œå®šä¹‰å…·ä½“è®¿é—®è§„åˆ™
  6,9
  ã€‚
  ```
  setfacl -m u:john:rwx /project  # ä¸ºç”¨æˆ· john æ·»åŠ è¯»å†™æ‰§è¡Œæƒé™
  ```
- é»˜è®¤ ACLï¼ˆDefault ACLï¼‰
  ä»…å¯¹ç›®å½•æœ‰æ•ˆï¼Œæ–°åˆ›å»ºçš„å­æ–‡ä»¶/ç›®å½•è‡ªåŠ¨ç»§æ‰¿å…¶è§„åˆ™
  6,9
  ã€‚
  ```
  setfacl -d -m g:team:rw /shared  # æ–°æ–‡ä»¶ç»§æ‰¿ç»„ team çš„è¯»å†™æƒé™
  ```
#### **ACL æ¡ç›®ç»“æ„**

æ¯æ¡ ACL ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š
```
# getfacl è¾“å‡ºç¤ºä¾‹
user::rw-              # æ–‡ä»¶æ‰€æœ‰è€…æƒé™ (ACL_USER_OBJ)
user:john:rw-          # ç‰¹å®šç”¨æˆ· john çš„æƒé™ (ACL_USER)
group::r--             # æ–‡ä»¶æ‰€å±ç»„æƒé™ (ACL_GROUP_OBJ)
group:dev:r-x          # ç‰¹å®šç»„ dev çš„æƒé™ (ACL_GROUP)
mask::rwx              # æœ‰æ•ˆæƒé™ä¸Šé™ (ACL_MASK)
other::r--             # å…¶ä»–ç”¨æˆ·æƒé™ (ACL_OTHER)
```
#### **æƒé™æ©ç ï¼ˆMaskï¼‰**

- **ä½œç”¨**ï¼šé™åˆ¶ ACL_USERã€ACL_GROUP å’Œ ACL_GROUP_OBJ çš„æœ€å¤§æƒé™[1,9](@ref)ã€‚
- ç¤ºä¾‹ï¼šè‹¥ mask ä¸º
```
  r--
```
  ï¼Œå³ä½¿ç”¨æˆ· ACL è®¾ä¸º
```
  rwx
```
  ï¼Œå®é™…æœ‰æ•ˆæƒé™ä»…ä¸º
```
  r--
```
  ã€‚
  ```
  setfacl -m m::r file  # è®¾ç½® mask ä¸ºåªè¯»
  ```


------
### ğŸ“‹ **ACL å‘½ä»¤è¯¦è§£**

#### **è®¾ç½® ACL**

```
# ä¸ºç”¨æˆ·æ·»åŠ æƒé™
setfacl -m u:username:perms file  
# ä¸ºç»„æ·»åŠ æƒé™
setfacl -m g:groupname:perms dir  
# è®¾ç½®é»˜è®¤ ACLï¼ˆç›®å½•ï¼‰
setfacl -d -m u:username:rwx dir  
# é€’å½’è®¾ç½®ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶
setfacl -R -m g:dev:rx /project  
```
#### **æŸ¥çœ‹ ACL**

```
getfacl file      # æŸ¥çœ‹å®Œæ•´ ACL
getfacl -d dir    # ä»…æŸ¥çœ‹é»˜è®¤ ACL
getfacl -c file   # çœç•¥æ³¨é‡Šï¼ˆç®€æ´è¾“å‡ºï¼‰
```
#### **åˆ é™¤ ACL**

```
setfacl -x u:john file    # åˆ é™¤ç”¨æˆ· john çš„ ACL æ¡ç›®
setfacl -x g:team dir     # åˆ é™¤ç»„ team çš„ ACL æ¡ç›®
setfacl -b file           # åˆ é™¤æ‰€æœ‰æ‰©å±• ACL
```
#### **å¤‡ä»½ä¸æ¢å¤**

```
# å¤‡ä»½æ•´ä¸ªç›®å½•çš„ ACL
getfacl -R /data > acl_backup.txt  
# ä»å¤‡ä»½æ¢å¤
setfacl --restore=acl_backup.txt  
```


------
### ğŸ› ï¸ **å®è·µåœºæ™¯ç¤ºä¾‹**

#### åœºæ™¯ 1ï¼šå…±äº«ç›®å½•çš„å¤šç”¨æˆ·åä½œ

```
mkdir /shared
chown :developers /shared
chmod 770 /shared
# å…è®¸ç”¨æˆ· john å®Œå…¨è®¿é—®ï¼Œsarah åªè¯»
setfacl -m u:john:rwx,u:sarah:r-x /shared
# æ–°æ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿æƒé™
setfacl -d -m u:john:rwx,u:sarah:r-x /shared
```
#### åœºæ™¯ 2ï¼šWeb æœåŠ¡å™¨æƒé™éš”ç¦»

```
chown -R www-data:www-data /var/www/html
# å…è®¸å¼€å‘ç»„è¯»å–ï¼Œä»… www-data å¯å†™
setfacl -R -m g:developers:r-x /var/www/html
setfacl -d -R -m g:developers:r-x /var/www/html
```
#### åœºæ™¯ 3ï¼šä¸´æ—¶æƒé™æˆäºˆ

```
# ä¸´æ—¶å…è®¸ alice è¯»å–æ—¥å¿—
setfacl -m u:alice:r /var/log/app.log
# å®Œæˆåæ’¤é”€
setfacl -x u:alice /var/log/app.log
```


------
### âš ï¸ **æ³¨æ„äº‹é¡¹**

1. 
   æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ
- éœ€ä½¿ç”¨ ext4/XFS/Btrfs ç­‰æ”¯æŒ ACL çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨æŒ‚è½½æ—¶å¯ç”¨
```
     acl
```
é€‰é¡¹ï¼ˆç¼–è¾‘
```
     /etc/fstab
```
     ï¼‰
     4,6ï¼š
     ```
     UUID=xxx /data ext4 defaults,acl 0 2
     ```
2. 
   æƒé™ä¼˜å…ˆçº§
- ACL ä¼˜å…ˆäºä¼ ç»Ÿæƒé™ï¼Œä½†å— mask é™åˆ¶[6,9](@ref)ã€‚
3. 
   å·¥å…·å…¼å®¹æ€§
- æ—§å·¥å…·ï¼ˆå¦‚æŸäº›å¤‡ä»½è½¯ä»¶ï¼‰å¯èƒ½å¿½ç•¥ ACLï¼Œéœ€éªŒè¯å…¼å®¹æ€§[5,8](@ref)ã€‚
4. 
   æ€§èƒ½å½±å“
- é¿å…åœ¨è¶…å¤§å‹ç›®å½•ï¼ˆå¦‚ç™¾ä¸‡æ–‡ä»¶ï¼‰ä¸Šé€’å½’è®¾ç½® ACLï¼Œå¯èƒ½å½±å“ I/O æ€§èƒ½[4,7](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“**

ACL æ˜¯çªç ´ä¼ ç»Ÿ Linux æƒé™ç“¶é¢ˆçš„å…³é”®å·¥å…·ï¼Œå°¤å…¶é€‚ç”¨äºï¼š
- **å¤šå›¢é˜Ÿåä½œ**ï¼šç²¾ç¡®æ§åˆ¶ç”¨æˆ·/ç»„æƒé™è€Œä¸ç ´ååŸæœ‰ç»“æ„[3,8](@ref)ã€‚
- **æœåŠ¡éš”ç¦»**ï¼šå¦‚ Web æœåŠ¡å™¨ç›®å½•çš„è¯»å†™åˆ†ç¦»[2,5](@ref)ã€‚
- **ä¸´æ—¶æˆæƒ**ï¼šåŠ¨æ€è°ƒæ•´æƒé™æ— éœ€ä¿®æ”¹ç”¨æˆ·ç»„[6,9](@ref)ã€‚
**æœ€ä½³å®è·µ**ï¼š
âœ… ç»“åˆä¼ ç»Ÿæƒé™ä½¿ç”¨ï¼ˆACL éæ›¿ä»£å“ï¼‰
âœ… å®šæœŸå®¡è®¡ ACLï¼ˆ`getfacl -R /critical_path`ï¼‰
âœ… é‡è¦æ“ä½œå‰å¤‡ä»½ ACLï¼ˆé¿å…è¯¯æ“ä½œå¯¼è‡´æƒé™ä¸¢å¤±ï¼‰[5,7](@ref)
é€šè¿‡æŒæ¡ ACLï¼Œæ‚¨å°†å®ç°ä¼ä¸šçº§ Linux ç³»ç»Ÿä¸­â€œæœ€å°æƒé™åŸåˆ™â€ä¸â€œçµæ´»è®¿é—®â€çš„é«˜æ•ˆå¹³è¡¡ ğŸ”‘ã€‚
## ç”¨æˆ·ç»„

ä»¥ä¸‹æ˜¯å¯¹**Linuxç”¨æˆ·ç»„**çš„å…¨é¢è§£æï¼Œæ¶µç›–æ ¸å¿ƒæ¦‚å¿µã€ç®¡ç†å‘½ä»¤ã€åº”ç”¨åœºæ™¯åŠæœ€ä½³å®è·µï¼Œç»“åˆå¤šä¸ªæƒå¨æ¥æºç»¼åˆæ•´ç†ï¼š


------
### ğŸ”‘ åŸºç¡€æ¦‚å¿µä¸ä½œç”¨

1. **ç”¨æˆ·ç»„å®šä¹‰**
   - ç”¨æˆ·ç»„ï¼ˆGroupï¼‰æ˜¯å¤šä¸ªç”¨æˆ·çš„é€»è¾‘é›†åˆï¼Œé€šè¿‡å…±äº«æƒé™ç®€åŒ–ç³»ç»Ÿç®¡ç†[2,8](@ref)ã€‚
   - æ ¸å¿ƒä½œç”¨ï¼š
     - **æƒé™ç®¡ç†**ï¼šä¸ºç»„åˆ†é…æƒé™ï¼Œç»„å†…ç”¨æˆ·è‡ªåŠ¨ç»§æ‰¿ï¼ˆå¦‚å…±äº«ç›®å½•çš„è¯»å†™æƒé™ï¼‰[1,8](@ref)ã€‚
     - **èµ„æºéš”ç¦»**ï¼šé™åˆ¶éæˆæƒç»„è®¿é—®æ•æ„Ÿèµ„æºï¼ˆå¦‚ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼‰[2,7](@ref)ã€‚
     - **åä½œæ•ˆç‡**ï¼šå›¢é˜Ÿé¡¹ç›®ä¸­æŒ‰è§’è‰²åˆ†ç»„ï¼ˆå¦‚å¼€å‘ç»„ã€æµ‹è¯•ç»„ï¼‰ï¼Œç»Ÿä¸€åˆ†é…ä»£ç åº“æƒé™[3,11](@ref)ã€‚
2. **ç”¨æˆ·ä¸ç»„çš„å…³ç³»**
   - **ä¸»ç»„ï¼ˆPrimary Groupï¼‰**ï¼šç”¨æˆ·åˆ›å»ºæ—¶è‡ªåŠ¨ç”Ÿæˆçš„åŒåç»„ï¼Œç”¨æˆ·æ–°å»ºæ–‡ä»¶çš„é»˜è®¤å±ç»„[3,7](@ref)ã€‚
   - **é™„åŠ ç»„ï¼ˆSecondary Groupï¼‰**ï¼šç”¨æˆ·å¯åŠ å…¥å¤šä¸ªé™„åŠ ç»„ï¼Œæ‰©å±•é¢å¤–æƒé™ï¼ˆå¦‚åŒæ—¶å±äº`developers`å’Œ`docker`ç»„ï¼‰[4,10](@ref)ã€‚


------
### ğŸ§© ç”¨æˆ·ç»„çš„ç±»å‹ä¸æ ‡è¯†

| **ç±»å‹**   | **è¯´æ˜**                                                     | **ç¤ºä¾‹åœºæ™¯**                            |
| ---------- | ------------------------------------------------------------ | --------------------------------------- |
| **ç§æœ‰ç»„** | ç”¨æˆ·ä¸»ç»„ï¼Œé€šå¸¸ä¸ç”¨æˆ·ååŒåä¸”ä»…å«è¯¥ç”¨æˆ·                       | ç”¨æˆ·`alice`çš„ç§æœ‰ç»„ä¸º`alice`[3](@ref)   |
| **å…¬å…±ç»„** | å¤šç”¨æˆ·å…±äº«çš„ç»„ï¼Œç”¨äºåä½œ                                     | `developers`ç»„åŒ…å«å¤šåå¼€å‘äººå‘˜[4](@ref) |
| **ç³»ç»Ÿç»„** | GIDèŒƒå›´1â€“999ï¼ˆCentOS 7+ï¼‰ï¼Œä¸“ç”¨äºç³»ç»ŸæœåŠ¡ï¼ˆå¦‚`www-data`ã€`mysql`ï¼‰ | NginxæœåŠ¡ä»¥`www-data`ç»„è¿è¡Œ[6,10](@ref) |
- **GIDï¼ˆGroup IDï¼‰**ï¼šç»„çš„å”¯ä¸€æ•°å­—æ ‡è¯†ï¼Œå¯é€šè¿‡`/etc/group`æŸ¥çœ‹[4,7](@ref)ã€‚


------
### âš™ï¸ ç”¨æˆ·ç»„ç®¡ç†å‘½ä»¤è¯¦è§£

#### **ç»„æ“ä½œå‘½ä»¤**

| å‘½ä»¤       | åŠŸèƒ½       | ç¤ºä¾‹                                                         |
| ---------- | ---------- | ------------------------------------------------------------ |
| `groupadd` | åˆ›å»ºæ–°ç»„   | `sudo groupadd -g 1010 dev` ï¼ˆåˆ›å»ºGID=1010çš„`dev`ç»„ï¼‰[6,9](@ref) |
| `groupmod` | ä¿®æ”¹ç»„å±æ€§ | `sudo groupmod -n new_dev dev` ï¼ˆé‡å‘½åç»„ï¼‰[9,11](@ref)      |
| `groupdel` | åˆ é™¤ç»„     | `sudo groupdel dev` ï¼ˆéœ€å…ˆç§»é™¤ç»„å†…ç”¨æˆ·ï¼‰[6,10](@ref)         |
#### **ç”¨æˆ·ä¸ç»„å…³è”å‘½ä»¤**

- æ·»åŠ ç”¨æˆ·åˆ°ç»„ï¼š
  ```
  sudo usermod -aG developers alice  # å°†aliceåŠ å…¥developersç»„ï¼ˆä¿ç•™åŸç»„ï¼‰[3,11](@ref)
  ```
- æŸ¥çœ‹ç”¨æˆ·æ‰€å±ç»„ï¼š
  ```
  groups alice  # è¾“å‡ºï¼šalice developers docker[9,10](@ref)
  ```
- åˆ‡æ¢æœ‰æ•ˆç»„ï¼š
  ```
  newgrp developers  # ä¸´æ—¶åˆ‡æ¢aliceçš„ä¸»ç»„ä¸ºdevelopersï¼ˆéœ€ç»„å¯†ç ï¼‰[11](@ref)
  ```
#### **æ–‡ä»¶æƒé™å…³è”å‘½ä»¤**

- ä¿®æ”¹æ–‡ä»¶å±ç»„ï¼š
  ```
  sudo chgrp developers /project  # å°†ç›®å½•å±ç»„æ”¹ä¸ºdevelopers[9](@ref)
  ```
- è®¾ç½®ç»„æƒé™ï¼š
  ```
  sudo chmod 770 /project  # ç»„å†…ç”¨æˆ·å¯è¯»å†™æ‰§è¡Œ[3](@ref)
  ```


------
### ğŸ’» æ ¸å¿ƒåº”ç”¨åœºæ™¯

1. **æ–‡ä»¶å…±äº«ä¸åä½œ**
   - åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®SGIDæƒé™ï¼Œç¡®ä¿æ–°å¢æ–‡ä»¶è‡ªåŠ¨ç»§æ‰¿ç»„æƒé™ï¼š
     ```
     sudo chmod g+s /shared  # è®¾ç½®SGIDä½[11](@ref)
     sudo chmod 770 /shared  # ç»„å†…ç”¨æˆ·å®Œå…¨æ§åˆ¶
     ```
2. **æœåŠ¡æƒé™éš”ç¦»**
   - ä¸ºWebæœåŠ¡ï¼ˆå¦‚Apacheï¼‰åˆ›å»ºä¸“ç”¨ç»„`www-data`ï¼Œé™åˆ¶éæœåŠ¡ç”¨æˆ·è®¿é—®ç«™ç‚¹æ–‡ä»¶[1,10](@ref)ã€‚
3. **å¤šè§’è‰²æƒé™åˆ†é…**
   - **å¼€å‘å›¢é˜Ÿ**ï¼š`dev`ç»„æ‹¥æœ‰ä»£ç åº“è¯»å†™æƒï¼Œ`test`ç»„ä»…è¯»æƒé™[2,8](@ref)ã€‚


------
### ğŸ“‚ å…³é”®é…ç½®æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„         | ä½œç”¨                 | æ ¼å¼ç¤ºä¾‹ï¼ˆå­—æ®µè¯´æ˜ï¼‰                                         |
| ---------------- | -------------------- | ------------------------------------------------------------ |
| **/etc/group**   | å­˜å‚¨ç»„åŸºæœ¬ä¿¡æ¯       | `developers:x:1001:alice,bob` ï¼ˆç»„å:å¯†ç å ä½ç¬¦:GID:æˆå‘˜åˆ—è¡¨ï¼‰[7,10](@ref) |
| **/etc/gshadow** | å­˜å‚¨ç»„å¯†ç ä¸ç®¡ç†ä¿¡æ¯ | `developers:!::alice` ï¼ˆç»„å:åŠ å¯†å¯†ç :ç»„ç®¡ç†å‘˜:æˆå‘˜ï¼‰[7](@ref) |


------
### âš ï¸ æœ€ä½³å®è·µä¸å¸¸è§é—®é¢˜

1. **å®‰å…¨åŸåˆ™**
   - **æœ€å°æƒé™**ï¼šæ™®é€šç”¨æˆ·ç»„ç¦æ­¢è®¿é—®`/etc/sudoers`ç­‰æ•æ„Ÿæ–‡ä»¶[8,10](@ref)ã€‚
   - **å®šæœŸå®¡è®¡**ï¼šä½¿ç”¨`getent group`æ£€æŸ¥å¼‚å¸¸ç»„ï¼Œæ¸…ç†æ— ç”¨ç»„[10](@ref)ã€‚
2. **é—®é¢˜æ’æŸ¥**
   - ç”¨æˆ·æ— æ³•è®¿é—®èµ„æºï¼š
     - æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨ç›®æ ‡ç»„ï¼š`groups username`[2](@ref)ã€‚
     - éªŒè¯ç›®å½•æƒé™ï¼š`ls -ld /path` ç¡®è®¤ç»„æƒé™æ˜¯å¦ä¸º`rwx`[3](@ref)ã€‚
3. **æ“ä½œå¤‡ä»½**
   ```
   cp /etc/group /etc/group.bak  # ä¿®æ”¹å‰å¤‡ä»½ç»„é…ç½®[10](@ref)
   ```


------
### ğŸ’ æ€»ç»“ï¼šç”¨æˆ·ç»„ç®¡ç†å‘½ä»¤é€ŸæŸ¥è¡¨

| **æ“ä½œ**         | **å‘½ä»¤**                       |
| ---------------- | ------------------------------ |
| åˆ›å»ºç»„           | `sudo groupadd [-g GID] ç»„å`  |
| æ·»åŠ ç”¨æˆ·åˆ°ç»„     | `sudo usermod -aG ç»„å ç”¨æˆ·å` |
| æŸ¥çœ‹ç”¨æˆ·æ‰€å±ç»„   | `groups ç”¨æˆ·å`                |
| ä¿®æ”¹æ–‡ä»¶å±ç»„     | `sudo chgrp ç»„å æ–‡ä»¶è·¯å¾„`     |
| è®¾ç½®ç›®å½•SGIDç»§æ‰¿ | `sudo chmod g+s ç›®å½•è·¯å¾„`      |
> é€šè¿‡åˆç†è¿ç”¨ç”¨æˆ·ç»„æœºåˆ¶ï¼Œå¯å®ç°Linuxç³»ç»Ÿæƒé™çš„ç²¾ç»†åŒ–æ§åˆ¶ä¸é«˜æ•ˆåä½œã€‚å»ºè®®ç»“åˆ`ACL`ï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰åº”å¯¹æ›´å¤æ‚çš„æƒé™éœ€æ±‚ï¼Œè¿›ä¸€æ­¥æå‡çµæ´»æ€§[10,11](@ref)ã€‚
## æ–‡ä»¶é»˜è®¤ç»„

åœ¨Linuxç³»ç»Ÿä¸­ï¼Œ**æ–‡ä»¶åˆ›å»ºæ—¶çš„é»˜è®¤æ‰€å±ç»„é€šå¸¸ä¸åˆ›å»ºè€…ç”¨æˆ·çš„ä¸»ç»„ï¼ˆå³åŒåç»„ï¼‰ä¸€è‡´**ã€‚ä»¥ä¸‹æ˜¯å…·ä½“è¯´æ˜å’Œå…³é”®ç»†èŠ‚ï¼š
### ğŸ”¹ **é»˜è®¤ç»„æœºåˆ¶**

- **ç”¨æˆ·åˆ›å»ºæ—¶çš„ä¸»ç»„**ï¼š
  å½“æ–°ç”¨æˆ·è¢«åˆ›å»ºï¼ˆä¾‹å¦‚é€šè¿‡`useradd`å‘½ä»¤ï¼‰æ—¶ï¼Œç³»ç»Ÿä¼š**è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸ç”¨æˆ·ååŒåçš„ç»„**ï¼Œç§°ä¸º**ä¸»ç»„ï¼ˆPrimary Groupï¼‰â€‹**ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·`alice`çš„ä¸»ç»„é»˜è®¤ä¸º`alice`[1,2,5](@ref)ã€‚
- **æ–‡ä»¶åˆ›å»ºçš„é»˜è®¤æ‰€å±ç»„**ï¼š
  ç”¨æˆ·åˆ›å»ºæ–°æ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œå…¶**æ‰€å±ç»„è‡ªåŠ¨ç»§æ‰¿è¯¥ç”¨æˆ·çš„ä¸»ç»„**â€‹ï¼ˆå³åŒåç»„ï¼‰ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·`alice`åˆ›å»ºçš„æ–‡ä»¶æ‰€å±ç»„ä¸º`alice`[1,3,5](@ref)ã€‚
### ğŸ”¹ **ä¾‹å¤–æƒ…å†µ**

å°½ç®¡é»˜è®¤è¡Œä¸ºæ˜¯ä½¿ç”¨åŒåç»„ï¼Œä½†ä»¥ä¸‹æƒ…å†µå¯èƒ½æ”¹å˜é»˜è®¤ç»„ï¼š
- **ç”¨æˆ·ä¸»ç»„è¢«ä¿®æ”¹**ï¼š
  è‹¥ç®¡ç†å‘˜é€šè¿‡`usermod -g`å‘½ä»¤å°†ç”¨æˆ·çš„ä¸»ç»„æ›´æ”¹ä¸ºå…¶ä»–ç»„ï¼ˆå¦‚`usermod -g developers alice`ï¼‰ï¼Œåˆ™æ–°åˆ›å»ºæ–‡ä»¶çš„æ‰€å±ç»„ä¼šå˜ä¸ºæ–°ä¸»ç»„ï¼ˆ`developers`ï¼‰[3,5](@ref)ã€‚
- ç›®å½•çš„SGIDæƒé™ï¼š
  è‹¥ç›®å½•è®¾ç½®äº†
  SGIDä½
  ï¼ˆ
  ```
  chmod g+s /dir
  ```
  ï¼‰ï¼Œåˆ™åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºçš„æ–‡ä»¶æˆ–å­ç›®å½•ä¼š
  ç»§æ‰¿ç›®å½•çš„æ‰€å±ç»„
  ï¼Œè€Œéåˆ›å»ºè€…çš„ä¸»ç»„ã€‚ä¾‹å¦‚ï¼š
  ```
  chgrp project /shared && chmod g+s /shared  # æ–°æ–‡ä»¶æ‰€å±ç»„è‡ªåŠ¨è®¾ä¸ºproject
  ```
  æ­¤æ—¶å³ä½¿ç”¨æˆ·ä¸»ç»„æ˜¯
  ```
  alice
  ```
  ï¼Œåœ¨
  ```
  /shared
  ```
  ä¸­åˆ›å»ºçš„æ–‡ä»¶æ‰€å±ç»„ä»ä¸º
  ```
  project
  ```
  1,4
  ã€‚
### ğŸ”¹ **ç”¨æˆ·ç»„çš„çµæ´»æ€§**

ç”¨æˆ·å¯å±äºå¤šä¸ªç»„ï¼ˆé™„åŠ ç»„ï¼‰ï¼Œä½†**æ–‡ä»¶é»˜è®¤æ‰€å±ç»„ä»…ç”±ç”¨æˆ·çš„ä¸»ç»„å†³å®š**ã€‚é™„åŠ ç»„ç”¨äºè®¿é—®å…¶ä»–ç»„èµ„æºï¼Œä¸å½±å“æ–°æ–‡ä»¶çš„é»˜è®¤æ‰€å±ç»„[2,5,7](@ref)ã€‚
### ğŸ’ æ€»ç»“

- **é»˜è®¤è¡Œä¸º**ï¼šæ–‡ä»¶é»˜è®¤æ‰€å±ç»„ = åˆ›å»ºè€…çš„ä¸»ç»„ï¼ˆåŒåç»„ï¼‰ âœ…
- **å¯èƒ½å˜åŒ–**ï¼šç”¨æˆ·ä¸»ç»„è¢«ä¿®æ”¹æˆ–ç›®å½•è®¾ç½®SGIDæƒé™æ—¶ï¼Œæ–‡ä»¶æ‰€å±ç»„ä¸å†ä¸ç”¨æˆ·åç›¸åŒ ğŸ”„
- **æƒé™éªŒè¯**ï¼šå¯é€šè¿‡`ls -l`æŸ¥çœ‹æ–‡ä»¶æ‰€å±ç»„ï¼Œæˆ–ä½¿ç”¨`groups ç”¨æˆ·å`ç¡®è®¤ç”¨æˆ·çš„ä¸»ç»„[3,5](@ref)ã€‚
è¿™ä¸€æœºåˆ¶æ—¢ç®€åŒ–äº†æƒé™ç®¡ç†ï¼ˆé»˜è®¤å½’å±æ¸…æ™°ï¼‰ï¼Œåˆé€šè¿‡SGIDç­‰åŠŸèƒ½æ”¯æŒçµæ´»çš„åä½œåœºæ™¯ã€‚
## sudo

`sudo`ï¼ˆSuperuser Doï¼‰æ˜¯Linuxç³»ç»Ÿä¸­ç”¨äº**ä¸´æ—¶æå‡ç”¨æˆ·æƒé™**çš„æ ¸å¿ƒå·¥å…·ï¼Œå…è®¸æ™®é€šç”¨æˆ·ä»¥**rootæˆ–å…¶ä»–ç”¨æˆ·èº«ä»½**æ‰§è¡Œç‰¹æƒå‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯å…¶å·¥ä½œæœºåˆ¶ã€é…ç½®æ–¹å¼åŠå®‰å…¨ç‰¹æ€§çš„è¯¦ç»†è§£æï¼š


------
### ğŸ”§ **æ ¸å¿ƒä½œç”¨ä¸å·¥ä½œåŸç†**

1. **æƒé™æå‡æœºåˆ¶**
   - **åŠŸèƒ½**ï¼šæ™®é€šç”¨æˆ·æ— éœ€åˆ‡æ¢è‡³rootè´¦æˆ·ï¼Œå³å¯æ‰§è¡Œéœ€é«˜æƒé™çš„æ“ä½œï¼ˆå¦‚å®‰è£…è½¯ä»¶ã€ä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼‰[1,2](@ref)ã€‚
   - **å·¥ä½œæµç¨‹**ï¼š
   1. ç”¨æˆ·è¾“å…¥`sudo [å‘½ä»¤]`ã€‚
     2. ç³»ç»Ÿæ£€æŸ¥`/etc/sudoers`æ–‡ä»¶ï¼ŒéªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰æ‰§è¡Œè¯¥å‘½ä»¤çš„æƒé™ã€‚
   3. è‹¥æˆæƒé€šè¿‡ï¼Œç”¨æˆ·éœ€è¾“å…¥**è‡ªèº«å¯†ç **ï¼ˆérootå¯†ç ï¼‰è¿›è¡Œèº«ä»½ç¡®è®¤ã€‚
     4. å¯†ç éªŒè¯æˆåŠŸåï¼Œå‘½ä»¤ä»¥ç›®æ ‡ç”¨æˆ·ï¼ˆé»˜è®¤ä¸ºrootï¼‰æƒé™æ‰§è¡Œ[4,10](@ref)ã€‚
   - **æ—¥å¿—è®°å½•**ï¼šæ‰€æœ‰`sudo`æ“ä½œå‡è¢«è®°å½•è‡³ç³»ç»Ÿæ—¥å¿—ï¼ˆå¦‚`/var/log/auth.log`ï¼‰ï¼Œä¾¿äºå®¡è®¡[4,10](@ref)ã€‚
2. **ä¸`su`çš„å¯¹æ¯”ä¼˜åŠ¿**
   - **å®‰å…¨æ€§**ï¼šé¿å…é•¿æœŸä½¿ç”¨rootè´¦æˆ·ï¼Œå‡å°‘è¯¯æ“ä½œå’Œæ¶æ„æ”»å‡»é£é™©ã€‚
   - **ç»†ç²’åº¦æ§åˆ¶**ï¼šå¯ç²¾ç¡®æˆæƒç‰¹å®šå‘½ä»¤ï¼Œè€Œéå¼€æ”¾å…¨éƒ¨rootæƒé™[2,10](@ref)ã€‚


------
### âš™ï¸ **å¸¸ç”¨å‘½ä»¤é€‰é¡¹**

| **é€‰é¡¹**    | **åŠŸèƒ½**                                      | **ç¤ºä¾‹**                                                    |
| ----------- | --------------------------------------------- | ----------------------------------------------------------- |
| `-u <ç”¨æˆ·>` | ä»¥æŒ‡å®šç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤                        | `sudo -u www-data cat /var/log/nginx/access.log`[3,9](@ref) |
| `-i`        | æ¨¡æ‹Ÿç›®æ ‡ç”¨æˆ·çš„å®Œæ•´ç™»å½•ç¯å¢ƒï¼ˆåŠ è½½é…ç½®æ–‡ä»¶ï¼‰    | `sudo -i`ï¼ˆç­‰åŒ`su - root`ï¼‰[5,9](@ref)                     |
| `-s`        | å¯åŠ¨ç›®æ ‡ç”¨æˆ·çš„éç™»å½•Shellï¼ˆä¿ç•™å½“å‰ç¯å¢ƒå˜é‡ï¼‰ | `sudo -s` [5,9](@ref)                                       |
| `-l`        | åˆ—å‡ºå½“å‰ç”¨æˆ·è¢«å…è®¸æ‰§è¡Œçš„å‘½ä»¤                  | `sudo -l` [3,9](@ref)                                       |
| `-k`        | æ¸…é™¤å¯†ç ç¼“å­˜ï¼Œå¼ºåˆ¶ä¸‹æ¬¡æ‰§è¡Œæ—¶é‡æ–°éªŒè¯          | `sudo -k` [3,9](@ref)                                       |


------
### âš¡ï¸ **é…ç½®æ–‡ä»¶`/etc/sudoers`è¯¦è§£**

#### **æ ¸å¿ƒè¯­æ³•ç»“æ„**

```
ç”¨æˆ·/ç”¨æˆ·ç»„  ä¸»æœº=(ç›®æ ‡ç”¨æˆ·:ç›®æ ‡ç»„)  [NOPASSWD:]å‘½ä»¤åˆ—è¡¨
```
- å­—æ®µè¯´æ˜ï¼š
  - **ç”¨æˆ·/ç”¨æˆ·ç»„**ï¼šç”¨æˆ·åæˆ–`%ç»„å`ï¼ˆå¦‚`%sudo`ï¼‰ã€‚
  - **ä¸»æœº**ï¼šè§„åˆ™ç”Ÿæ•ˆçš„ä¸»æœºï¼ˆé€šå¸¸ä¸º`ALL`ï¼‰ã€‚
  - **ç›®æ ‡èº«ä»½**ï¼šå‘½ä»¤æ‰§è¡Œæ—¶çš„èº«ä»½ï¼ˆå¦‚`(ALL)`è¡¨ç¤ºä»»ä½•ç”¨æˆ·ï¼‰ã€‚
  - **å‘½ä»¤åˆ—è¡¨**ï¼š**å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„**ï¼ˆå¦‚`/usr/bin/apt`ï¼‰[4,8,10](@ref)ã€‚
#### **å…¸å‹é…ç½®ç¤ºä¾‹**

- å…è®¸ç”¨æˆ·æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼ˆéœ€å¯†ç ï¼‰ï¼š
  ```
  alice ALL=(ALL:ALL) ALL   # aliceå¯æ‰§è¡Œä»»æ„å‘½ä»¤
  ```
- å…è®¸ç»„å†…ç”¨æˆ·å…å¯†ç æ‰§è¡Œç‰¹å®šå‘½ä»¤ï¼š
  ```
  %developers ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart nginx
  ```
- é™åˆ¶å‘½ä»¤èŒƒå›´ï¼š
  ```
  bob ALL=(ALL) /usr/bin/apt update, /usr/bin/apt upgrade  # ä»…å…è®¸æ‰§è¡Œaptæ›´æ–°[8,10](@ref)
  ```
#### **é«˜çº§é…ç½®æŠ€å·§**

- ä½¿ç”¨åˆ«åç®€åŒ–ç®¡ç†ï¼š
  ```
  User_Alias ADMINS = alice, bob
  Cmnd_Alias UPDATE_CMDS = /usr/bin/apt update, /usr/bin/yum update
  ADMINS ALL=(ALL) UPDATE_CMDS
  ```
- å­é…ç½®æ–‡ä»¶ç®¡ç†ï¼š
  æ¨èå°†è§„åˆ™æ‹†åˆ†è‡³
  ```
  /etc/sudoers.d/
  ```
  ç›®å½•ï¼Œé¿å…ç›´æ¥ä¿®æ”¹ä¸»æ–‡ä»¶ï¼š
  ```
  echo "charlie ALL=(ALL) /usr/bin/docker" | sudo tee /etc/sudoers.d/docker
  sudo chmod 440 /etc/sudoers.d/docker   # è®¾ç½®ä¸¥æ ¼æƒé™[8,9](@ref)
  ```


------
### ğŸ” **æƒé™ç®¡ç†å®è·µ**

#### **ä¸ºç”¨æˆ·æ·»åŠ `sudo`æƒé™**

- æ–¹æ³•1ï¼šåŠ å…¥ç‰¹æƒç»„
  ï¼ˆæ¨èï¼‰
  ```
  sudo usermod -aG sudo username   # Debian/Ubuntu
  sudo usermod -aG wheel username   # CentOS/RHEL[6,9](@ref)
  ```
- **æ–¹æ³•2ï¼šç›´æ¥ç¼–è¾‘
  ```
  sudoers
  ```
  **
  ä½¿ç”¨
  ```
  visudo
  ```
  å‘½ä»¤å®‰å…¨ç¼–è¾‘ï¼š
  ```
  sudo visudo   # æ·»åŠ è¡Œï¼šusername ALL=(ALL) ALL[7,8](@ref)
  ```
#### **å®‰å…¨æœ€ä½³å®è·µ**

- **æœ€å°æƒé™åŸåˆ™**ï¼šä»…æˆæƒå¿…è¦å‘½ä»¤ï¼Œé¿å…`ALL`é€šé…ç¬¦[8,10](@ref)ã€‚
- **ç¦ç”¨å¯†ç ç¼“å­˜**ï¼šå¯¹æ•æ„Ÿæ“ä½œè®¾ç½®`NOPASSWD:NO`å¼ºåˆ¶æ¯æ¬¡éªŒè¯[10](@ref)ã€‚
- ç¯å¢ƒéš”ç¦»ï¼šé€šè¿‡
  ```
  env_reset
  ```
  æ¸…é™¤ç¯å¢ƒå˜é‡ï¼Œé˜²æ­¢è·¯å¾„ç¯¡æ”»
  5,10ï¼š
  ```
  Defaults env_reset
  Defaults env_keep = "LANG DISPLAY"
  ```


------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è°ƒè¯•**

- **æƒé™æ‹’ç»**ï¼š
  æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨`sudoers`ä¸­ï¼š`sudo -l`ï¼Œæˆ–ç¡®è®¤å‘½ä»¤è·¯å¾„æ˜¯å¦åŒ¹é…[9](@ref)ã€‚
- **é…ç½®é”™è¯¯ä¿®å¤**ï¼š
  è‹¥`visudo`ä¿å­˜å¤±è´¥ï¼ˆè¯­æ³•é”™è¯¯ï¼‰ï¼Œéœ€é€šè¿‡**å•ç”¨æˆ·æ¨¡å¼**æˆ–**Live CD**ä¿®å¤`/etc/sudoers`[4](@ref)ã€‚
- **è¶…æ—¶è®¾ç½®**ï¼š
  è°ƒæ•´å¯†ç ç¼“å­˜æ—¶é—´ï¼ˆé»˜è®¤15åˆ†é’Ÿï¼‰ï¼š
  ```
  Defaults timestamp_timeout=30   # å•ä½ï¼šåˆ†é’Ÿ[8,10](@ref)
  ```


------
### ğŸ’ **æ€»ç»“**

`sudo`é€šè¿‡**ä¸´æ—¶ææƒ**ä¸**ç²¾ç»†æˆæƒ**æœºåˆ¶ï¼Œåœ¨ä¿éšœç³»ç»Ÿå®‰å…¨çš„å‰æä¸‹æå¤§æå‡äº†ç®¡ç†çµæ´»æ€§ã€‚å…¶æ ¸å¿ƒåœ¨äºï¼š
- **æƒé™åˆ†å±‚**ï¼šé€šè¿‡`/etc/sudoers`å®ç°å‘½ä»¤çº§æ§åˆ¶[4,10](@ref)ã€‚
- **æ“ä½œå¯æº¯**ï¼šå®Œæ•´æ—¥å¿—æ”¯æŒå®¡è®¡ä¸é—®é¢˜å›æº¯[4,10](@ref)ã€‚
- **å®‰å…¨åŠ å›º**ï¼šç¯å¢ƒéš”ç¦»ã€å¯†ç ç­–ç•¥ä¸é…ç½®æ ¡éªŒï¼ˆ`visudo`ï¼‰ä¸‰é‡é˜²æŠ¤[8,9](@ref)ã€‚
> é€šè¿‡åˆç†é…ç½®ï¼Œ`sudo`æ—¢èƒ½æ»¡è¶³æ—¥å¸¸ç®¡ç†éœ€æ±‚ï¼Œåˆèƒ½æœ‰æ•ˆè§„é¿`root`æ»¥ç”¨é£é™©ï¼Œæ˜¯Linuxç³»ç»Ÿæƒé™ç®¡ç†çš„åŸºçŸ³å·¥å…· ğŸ”‘ã€‚
## su

åœ¨Linuxç³»ç»Ÿä¸­ï¼Œåˆ‡æ¢ç”¨æˆ·ä¸»è¦é€šè¿‡ `su`ï¼ˆSubstitute Userï¼‰å’Œ `sudo`ï¼ˆSuperuser Doï¼‰ä¸¤ç±»å‘½ä»¤å®ç°ï¼Œå…·ä½“æ–¹å¼å–å†³äºç›®æ ‡ç”¨æˆ·æƒé™å’Œæ“ä½œéœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æ–¹æ³•å’Œåœºæ™¯è¯´æ˜ï¼š


------
### ğŸ”‘ **`su` å‘½ä»¤ï¼šå®Œæ•´åˆ‡æ¢ç”¨æˆ·èº«ä»½**

#### **åŸºç¡€åˆ‡æ¢**

- åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·
  ï¼ˆéœ€ç›®æ ‡ç”¨æˆ·å¯†ç ï¼‰ï¼š
  ```
  su [ç”¨æˆ·å]          # ä»…åˆ‡æ¢èº«ä»½ï¼Œä¿ç•™å½“å‰ç¯å¢ƒå˜é‡å’Œå·¥ä½œç›®å½•
  su - [ç”¨æˆ·å]        # å®Œæ•´åˆ‡æ¢ï¼ˆåŠ è½½ç›®æ ‡ç”¨æˆ·çš„ç¯å¢ƒå˜é‡å’Œå®¶ç›®å½•ï¼‰[1,3,6](@ref)
  ```
  ç¤ºä¾‹ï¼š
  ```
  su - root   # åˆ‡æ¢åˆ°rootç”¨æˆ·å¹¶åŠ è½½å…¶ç¯å¢ƒ
  exit        # è¿”å›åŸç”¨æˆ·
  ```
#### **ç‰¹æ®Šåœºæ™¯**

- **rootåˆ‡æ¢æ™®é€šç”¨æˆ·**ï¼š
  rootç”¨æˆ·åˆ‡æ¢æ—¶æ— éœ€å¯†ç ï¼Œä¾‹å¦‚ `su alice`[3,5](@ref)ã€‚
- æ‰§è¡Œå•æ¡å‘½ä»¤åè¿”å›ï¼š
  ```
  su -c "å‘½ä»¤" [ç”¨æˆ·å]  # ä»¥ç›®æ ‡ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤åè‡ªåŠ¨é€€å‡º[6,7](@ref)
  ```
  ç¤ºä¾‹ï¼š
  ```
  su -c "id" root  # æŸ¥çœ‹rootçš„IDä¿¡æ¯
  ```


------
### âš¡ï¸ **`sudo` å‘½ä»¤ï¼šä¸´æ—¶æƒé™æå‡**

#### **æ‰§è¡Œå•æ¡ç‰¹æƒå‘½ä»¤**

- ä»¥rootèº«ä»½æ‰§è¡Œ
  ï¼ˆéœ€å½“å‰ç”¨æˆ·å¯†ç ï¼‰ï¼š
  ```
  sudo [å‘½ä»¤]          # é»˜è®¤ä»¥rootèº«ä»½æ‰§è¡Œ
  sudo -u [ç”¨æˆ·å] [å‘½ä»¤] # ä»¥æŒ‡å®šç”¨æˆ·èº«ä»½æ‰§è¡Œ[8,9](@ref)
  ```
  ç¤ºä¾‹ï¼š
  ```
  sudo apt update      # rootæƒé™æ›´æ–°è½¯ä»¶åŒ…
  sudo -u alice touch /tmp/file  # ä»¥aliceèº«ä»½åˆ›å»ºæ–‡ä»¶
  ```
#### **ä¸´æ—¶åˆ‡æ¢ä¸ºrootä¼šè¯**

- è¿›å…¥rootçš„Shellç¯å¢ƒï¼š
  ```
  sudo -i    # åŠ è½½rootç¯å¢ƒå˜é‡ï¼ˆç±»ä¼¼å®Œæ•´ç™»å½•ï¼‰
  sudo -s    # å¯åŠ¨éç™»å½•Shellï¼ˆä¿ç•™éƒ¨åˆ†å½“å‰ç¯å¢ƒï¼‰[2,10](@ref)
  ```
- å…å¯†ç åˆ‡æ¢
  ï¼ˆéœ€æå‰é…ç½®ï¼‰ï¼š
  ç¼–è¾‘
```
  /etc/sudoers
```
æ·»åŠ ï¼š
  ```
  username ALL=(ALL) NOPASSWD: ALL  # å…è®¸usernameå…å¯†ä½¿ç”¨sudo[8](@ref)
  ```
  ä¹‹åå¯é€šè¿‡
```
  sudo su -
```
ç›´æ¥åˆ‡æ¢rootã€‚


------
### ğŸ”’ **å®‰å…¨æ€§ä¸é…ç½®è¦ç‚¹**

1. **`sudo` vs `su` å®‰å…¨å·®å¼‚**ï¼š
   - `sudo` éœ€è¾“å…¥**å½“å‰ç”¨æˆ·å¯†ç **ï¼Œä¸”æ“ä½œè¢«è®°å½•æ—¥å¿—ï¼Œæ›´å®‰å…¨[3,9](@ref)ã€‚
   - `su` éœ€è¾“å…¥**ç›®æ ‡ç”¨æˆ·å¯†ç **ï¼Œrootå¯†ç æ³„æ¼é£é™©æ›´é«˜ã€‚
2. **é…ç½®`sudo`æƒé™**ï¼š
   - ä½¿ç”¨
```
     visudo
```
å®‰å…¨ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
     ```
     # æˆæƒç”¨æˆ·ç»„ï¼ˆå¦‚wheelç»„ï¼‰
     %wheel ALL=(ALL) ALL      # ç»„å†…ç”¨æˆ·å¯æ‰§è¡Œæ‰€æœ‰å‘½ä»¤[9,10](@ref)
     ```
   - é™åˆ¶å‘½ä»¤èŒƒå›´ï¼ˆé¿å…æ»¥ç”¨ï¼‰ï¼š
     ```
     alice ALL=(ALL) NOPASSWD: /usr/bin/systemctl  # ä»…å…è®¸ç®¡ç†æœåŠ¡[9](@ref)
     ```
3. **ç¯å¢ƒå˜é‡å½±å“**ï¼š
   - `su -` å’Œ `sudo -i` ä¼šé‡ç½®ç¯å¢ƒå˜é‡ã€‚
   - `su` æˆ– `sudo -s` ä¿ç•™å½“å‰ç¯å¢ƒï¼Œå¯èƒ½å¼•å‘è·¯å¾„å†²çª[6,7](@ref)ã€‚


------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è§£å†³**

- **åˆ‡æ¢å¤±è´¥æ’æŸ¥**ï¼š
  - ç”¨æˆ·ä¸å­˜åœ¨ï¼š`getent passwd [ç”¨æˆ·å]`[2](@ref)ã€‚
  - å¯†ç é”™è¯¯ï¼š`sudo passwd -S [ç”¨æˆ·å]` æ£€æŸ¥çŠ¶æ€ã€‚
  - æƒé™æœªé…ç½®ï¼š`sudo -l -U [ç”¨æˆ·å]` éªŒè¯sudoæƒé™[2](@ref)ã€‚
- **ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
  - ç¦ç”¨rootç›´æ¥ç™»å½•ï¼šä¿®æ”¹ `/etc/ssh/sshd_config` è®¾ç½® `PermitRootLogin no`[2](@ref)ã€‚
  - æ•æ„Ÿæ“ä½œååŠæ—¶é€€å‡ºï¼š`exit` æˆ– `Ctrl+D` è¿”å›æ™®é€šç”¨æˆ·[5,10](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“ï¼šä¸åŒåœºæ™¯çš„åˆ‡æ¢é€‰æ‹©**

| **åœºæ™¯**                   | **æ¨èå‘½ä»¤**             | **æ³¨æ„äº‹é¡¹**              |
| -------------------------- | ------------------------ | ------------------------- |
| ä¸´æ—¶æ‰§è¡Œrootå‘½ä»¤           | `sudo [å‘½ä»¤]`            | éœ€å½“å‰ç”¨æˆ·å¯†ç             |
| å®Œæ•´åˆ‡æ¢åˆ°rootç¯å¢ƒ         | `sudo -i` æˆ– `su - root` | åè€…éœ€rootå¯†ç             |
| ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå•æ¬¡æ“ä½œ | `sudo -u [ç”¨æˆ·] [å‘½ä»¤]`  | éœ€é…ç½®sudoæƒé™            |
| å…å¯†åˆ‡æ¢rootï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰ | `sudo su -`              | æå‰é…ç½®NOPASSWD[8](@ref) |
> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼šæ—¥å¸¸æ“ä½œä¼˜å…ˆä½¿ç”¨ `sudo` æ›¿ä»£ç›´æ¥ `su root`ï¼Œç»“åˆæœ€å°æƒé™åŸåˆ™é…ç½®å‘½ä»¤ç™½åå•ï¼Œå¹¶é€šè¿‡ `script` è®°å½•æ“ä½œæ—¥å¿—ï¼ˆ`script -a /var/log/ops.log`ï¼‰[2,10](@ref)ã€‚\
## df

`df` å‘½ä»¤æ˜¯ Linux/Unix ç³»ç»Ÿä¸­ç”¨äº**æŠ¥å‘Šæ–‡ä»¶ç³»ç»Ÿç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µ**çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡æ˜¾ç¤ºæŒ‚è½½ç‚¹ã€æ€»å®¹é‡ã€å·²ç”¨ç©ºé—´ã€å¯ç”¨ç©ºé—´åŠä½¿ç”¨ç™¾åˆ†æ¯”ç­‰å…³é”®ä¿¡æ¯ï¼Œå¸®åŠ©ç”¨æˆ·ç›‘æ§ç£ç›˜çŠ¶æ€ï¼Œé¿å…ç©ºé—´è€—å°½é—®é¢˜ã€‚ä»¥ä¸‹ä»åŠŸèƒ½åˆ°å®è·µå…¨é¢è§£æï¼š


------
### âš™ï¸ **æ ¸å¿ƒåŠŸèƒ½**

1. 
   ç£ç›˜ç©ºé—´æ¦‚è§ˆ
- æ˜¾ç¤ºæ‰€æœ‰å·²æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„æ€»å®¹é‡ã€å·²ç”¨ç©ºé—´ã€å¯ç”¨ç©ºé—´åŠä½¿ç”¨ç™¾åˆ†æ¯”[1,6](@ref)ã€‚
   - é»˜è®¤ä»¥ 1KB ä¸ºå•ä½è¾“å‡ºï¼Œæ¨è `-h` é€‰é¡¹è½¬æ¢ä¸ºæ˜“è¯»æ ¼å¼ï¼ˆå¦‚ GBã€MBï¼‰[2,5](@ref)ã€‚
2. 
   å…³é”®å­—æ®µè¯´æ˜
- **Filesystem**ï¼šè®¾å¤‡æˆ–åˆ†åŒºåç§°ï¼ˆå¦‚ `/dev/sda1`ï¼‰ã€‚
   - **1K-blocks**ï¼šæ€»å®¹é‡ï¼ˆ1KB å—æ•°ï¼‰ã€‚
   - **Used/Available**ï¼šå·²ç”¨/å‰©ä½™ç©ºé—´ã€‚
   - **Use%**ï¼šç©ºé—´ä½¿ç”¨ç‡ã€‚
   - **Mounted on**ï¼šæŒ‚è½½ç‚¹è·¯å¾„ï¼ˆå¦‚ `/home`ï¼‰[1,6](@ref)ã€‚


------
### ğŸ“‹ **å‘½ä»¤è¯­æ³•ä¸å¸¸ç”¨é€‰é¡¹**

#### **åŸºç¡€è¯­æ³•**

```
df [é€‰é¡¹] [æ–‡ä»¶æˆ–ç›®å½•]  # æŒ‡å®šæ–‡ä»¶/ç›®å½•æ—¶ï¼Œæ˜¾ç¤ºå…¶æ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯[4,5](@ref)
```
#### **å¸¸ç”¨é€‰é¡¹è¯¦è§£**

| **é€‰é¡¹**      | **ä½œç”¨**                          | **ç¤ºä¾‹**                                          |
| ------------- | --------------------------------- | ------------------------------------------------- |
| **`-h`**      | äººç±»å¯è¯»æ ¼å¼ï¼ˆè‡ªåŠ¨è½¬æ¢å•ä½ï¼‰      | `df -h` â†’ æ˜¾ç¤º `Size: 39G, Used: 1.6G`[1,6](@ref) |
| **`-T`**      | æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆå¦‚ ext4ã€xfsï¼‰  | `df -Th` â†’ å¢åŠ  **Type** åˆ—[3,5](@ref)            |
| **`-i`**      | æ˜¾ç¤º inode ä½¿ç”¨æƒ…å†µï¼ˆéç£ç›˜ç©ºé—´ï¼‰ | `df -ih` â†’ æŸ¥çœ‹ç´¢å¼•èŠ‚ç‚¹ä½™é‡[2,6](@ref)            |
| **`-t TYPE`** | ä»…æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿ          | `df -t ext4` â†’ è¿‡æ»¤ ext4 åˆ†åŒº[5,6](@ref)          |
| **`-x TYPE`** | æ’é™¤æŒ‡å®šç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿ            | `df -x tmpfs` â†’ å¿½ç•¥ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ[1,3](@ref)       |
| **`--total`** | åœ¨æœ«å°¾æ·»åŠ æ€»è®¡è¡Œ                  | `df --total -h` â†’ æ±‡æ€»æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿ[1](@ref)       |
| **`-l`**      | ä»…æ˜¾ç¤ºæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆæ’é™¤ NFS ç­‰ï¼‰ | `df -l`[5,6](@ref)                                |
| **`-a`**      | åŒ…å«è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ `/proc`ï¼‰    | `df -a`[1,6](@ref)                                |


------
### ğŸ› ï¸ **å®ç”¨åœºæ™¯ä¸ç¤ºä¾‹**

#### **å¿«é€Ÿå®šä½ç£ç›˜ç“¶é¢ˆ**

```
df -hT  # äººç±»å¯è¯»æ ¼å¼ + æ–‡ä»¶ç³»ç»Ÿç±»å‹
```
è¾“å‡ºç¤ºä¾‹ï¼š
```
Filesystem      Type  Size  Used Avail Use% Mounted on
/dev/sda1       ext4   50G   15G   33G  31% /
/dev/sdb1       xfs    1T  800G  200G  80% /data
```
**åˆ†æ**ï¼š`/data` åˆ†åŒºä½¿ç”¨ç‡è¾¾ 80%ï¼Œéœ€åŠæ—¶æ¸…ç†[3,7](@ref)ã€‚
#### **æ’æŸ¥ inode è€—å°½é—®é¢˜**

```
df -ih /home  # æ£€æŸ¥ /home çš„ inode ä½¿ç”¨ç‡
```
è¾“å‡ºç¤ºä¾‹ï¼š
```
Filesystem     Inodes IUsed IFree IUse% Mounted on
/dev/sdb1        10M   9.8M  200K   98% /home
```
**é£é™©**ï¼šè‹¥ `IUse%` è¾¾ 100%ï¼Œå³ä½¿ç£ç›˜æœ‰ç©ºé—´ä¹Ÿæ— æ³•åˆ›å»ºæ–°æ–‡ä»¶[1,2](@ref)ã€‚
#### **è¿‡æ»¤ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿ**

```
df -t xfs -h      # ä»…æ˜¾ç¤º XFS æ–‡ä»¶ç³»ç»Ÿ
df -x tmpfs -x devtmpfs  # æ’é™¤ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ[1,5](@ref)
```
#### **æŸ¥çœ‹ç›®å½•æ‰€åœ¨åˆ†åŒºçš„ç©ºé—´**

```
df -h /var/log  # æ˜¾ç¤º /var/log ç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
```
è¾“å‡ºï¼š
```
Filesystem  Size  Used Avail Use% Mounted on
/dev/sda2    20G   12G  7.2G  62% /var
```


------
### âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **NFS ç­‰ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ**
   `df` å¯èƒ½æ— æ³•å®æ—¶è·å–è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿçš„å‡†ç¡®æ•°æ®ï¼ˆä¾èµ–ç¼“å­˜ï¼‰[1](@ref)ã€‚
2. **inode è€—å°½é£é™©**
   å°æ–‡ä»¶è¿‡å¤šå¯èƒ½å¯¼è‡´ inode å…ˆäºç£ç›˜ç©ºé—´è€—å°½ï¼ˆé€šè¿‡ `df -i` ç›‘æ§ï¼‰[1,7](@ref)ã€‚
3. 
   ä¸ `du` å‘½ä»¤çš„åŒºåˆ«
- `df`ï¼šæŠ¥å‘Š**æ–‡ä»¶ç³»ç»Ÿæ•´ä½“**ä½¿ç”¨æƒ…å†µï¼ˆåŸºäºè¶…çº§å—æ•°æ®ï¼‰[7](@ref)ã€‚
   - `du`ï¼šè®¡ç®—**ç›®å½•/æ–‡ä»¶**çš„å®é™…ç£ç›˜å ç”¨ï¼ˆé€çº§ç»Ÿè®¡ï¼‰[7](@ref)ã€‚
     â€‹**å…¸å‹åœºæ™¯**â€‹ï¼š`df` æ˜¾ç¤ºç£ç›˜æ»¡ï¼Œä½† `du -sh /` æ‰¾ä¸åˆ°å¤§æ–‡ä»¶ â†’ å¯èƒ½ä¸ºå·²åˆ é™¤æ–‡ä»¶ä»è¢«è¿›ç¨‹å ç”¨ï¼ˆéœ€é‡å¯è¿›ç¨‹æˆ–æ¸…ç©º `lsof / | grep deleted`ï¼‰ã€‚
4. 
   å•ä½å·®å¼‚
- `-h`ï¼šä»¥ 1024 ä¸ºåŸºæ•°ï¼ˆ1K=1024Bï¼‰[2,5](@ref)ã€‚
   - `-H`ï¼šä»¥ 1000 ä¸ºåŸºæ•°ï¼ˆ1K=1000Bï¼Œç¬¦åˆ SI æ ‡å‡†ï¼‰[5,6](@ref)ã€‚


------
### ğŸ”„ **æ‰©å±•å·¥å…·å¯¹æ¯”**

| **å‘½ä»¤**    | **ç”¨é€”**            | **é€‚ç”¨åœºæ™¯**                    |
| ----------- | ------------------- | ------------------------------- |
| **`df`**    | æ–‡ä»¶ç³»ç»Ÿçº§ç©ºé—´æ¦‚è§ˆ  | å¿«é€Ÿå®šä½åˆ†åŒºç“¶é¢ˆ                |
| **`du`**    | ç›®å½•/æ–‡ä»¶çº§ç©ºé—´ç»Ÿè®¡ | æŸ¥æ‰¾å¤§æ–‡ä»¶æˆ–ç›®å½•[7](@ref)       |
| **`lsblk`** | å—è®¾å¤‡æ‹“æ‰‘ç»“æ„      | æŸ¥çœ‹ç£ç›˜ä¸åˆ†åŒºç‰©ç†å…³ç³»[7](@ref) |
| **`mount`** | æŒ‚è½½ä¿¡æ¯æŸ¥çœ‹        | ç¡®è®¤æ–‡ä»¶ç³»ç»ŸæŒ‚è½½çŠ¶æ€            |


------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒä»·å€¼**ï¼š`df` æ˜¯ Linux ç£ç›˜ç®¡ç†çš„**ç¬¬ä¸€é“é˜²çº¿**ï¼Œé€šè¿‡å®æ—¶åé¦ˆæ–‡ä»¶ç³»ç»Ÿç©ºé—´çŠ¶æ€ï¼Œé¢„é˜²å­˜å‚¨èµ„æºæ¯ç«­[1,6](@ref)ã€‚
- é«˜é¢‘ç»„åˆï¼š
  - ç©ºé—´ç›‘æ§ â†’ `df -hT`
  - inode æ£€æŸ¥ â†’ `df -ih`
  - ç±»å‹è¿‡æ»¤ â†’ `df -t ext4 -x tmpfs`
- è¿›é˜¶æŠ€å·§ï¼š
  - ç»“åˆ `watch` å®æ—¶åˆ·æ–°ï¼ˆ`watch -n 5 df -h`ï¼‰ã€‚
  - ä½¿ç”¨ `--output` è‡ªå®šä¹‰è¾“å‡ºåˆ—ï¼ˆå¦‚ `df --output=source,used,pcent`ï¼‰[4](@ref)ã€‚
> è¿ç»´åœºæ™¯ä¸­ï¼Œå»ºè®®å°† `df -h` çº³å…¥æ—¥å¸¸å·¡æ£€è„šæœ¬ï¼Œé…åˆ `du` å’Œ `find` å®šä½ç©ºé—´å ç”¨æºå¤´ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡ŒğŸš€ã€‚
## du & df

`du`ï¼ˆDisk Usageï¼‰å’Œ`df`ï¼ˆDisk Freeï¼‰æ˜¯Linuxç³»ç»Ÿä¸­ä¸¤ä¸ªæ ¸å¿ƒçš„ç£ç›˜ç©ºé—´ç®¡ç†å·¥å…·ï¼Œè™½ç„¶å‡ç”¨äºç›‘æ§å­˜å‚¨èµ„æºï¼Œä½†å…¶åŠŸèƒ½å®šä½ã€ç»Ÿè®¡é€»è¾‘å’Œåº”ç”¨åœºæ™¯å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹ä»**æ ¸å¿ƒåŸç†**ã€**ä½¿ç”¨åœºæ™¯**ã€**å‘½ä»¤å‚æ•°**å’Œ**å…¸å‹é—®é¢˜**å››ä¸ªç»´åº¦è¿›è¡Œç³»ç»Ÿå¯¹æ¯”ï¼š


------
### âš™ï¸ **æ ¸å¿ƒåŸç†ä¸åŠŸèƒ½å®šä½**

| **ç‰¹æ€§**     | **`du`ï¼ˆDisk Usageï¼‰**                     | **`df`ï¼ˆDisk Freeï¼‰**                      |
| ------------ | ------------------------------------------ | ------------------------------------------ |
| **åŠŸèƒ½ç›®æ ‡** | ç»Ÿè®¡**æ–‡ä»¶/ç›®å½•**çš„å®é™…ç£ç›˜å ç”¨            | æŠ¥å‘Š**æ–‡ä»¶ç³»ç»Ÿ**çš„æ•´ä½“ç©ºé—´åˆ†é…æƒ…å†µ         |
| **æ•°æ®æ¥æº** | é€’å½’éå†æ–‡ä»¶ç³»ç»Ÿï¼Œè®¡ç®—æ¯ä¸ªæ–‡ä»¶çš„ç‰©ç†å—å ç”¨ | è¯»å–æ–‡ä»¶ç³»ç»Ÿè¶…çº§å—ï¼ˆsuperblockï¼‰çš„å…ƒæ•°æ®   |
| **ç»Ÿè®¡å±‚çº§** | æ–‡ä»¶çº§ï¼ˆç”¨æˆ·æ•°æ®ï¼‰                         | åˆ†åŒº/æŒ‚è½½ç‚¹çº§ï¼ˆæ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®ï¼‰            |
| **ç»Ÿè®¡èŒƒå›´** | ä»…è®¡ç®—ç”¨æˆ·å¯è§æ–‡ä»¶çš„å ç”¨ç©ºé—´               | åŒ…å«æ‰€æœ‰æ•°æ®ï¼šç”¨æˆ·æ–‡ä»¶+ç³»ç»Ÿä¿ç•™ç©ºé—´+å…ƒæ•°æ® |
| **æ‰§è¡Œæ•ˆç‡** | è¾ƒæ…¢ï¼ˆéœ€éå†ç›®å½•æ ‘ï¼‰                       | æå¿«ï¼ˆç›´æ¥è¯»å–ç¼“å­˜å…ƒæ•°æ®ï¼‰[1,4](@ref)      |
> **å…³é”®å·®å¼‚**ï¼š
>
> - `du` ç»Ÿè®¡çš„æ˜¯**æ–‡ä»¶å®é™…å ç”¨çš„ç‰©ç†å—æ•°é‡**ï¼ˆå¦‚ `du -b` æŒ‰å­—èŠ‚è®¡æ•°ï¼‰ï¼Œä½†å—æ–‡ä»¶ç³»ç»Ÿå—å¤§å°å½±å“ï¼ˆå¦‚4KBå—ä¸­å°æ–‡ä»¶ä»å 4KBï¼‰ã€‚
> - `df` ç»Ÿè®¡çš„æ˜¯**æ–‡ä»¶ç³»ç»Ÿçº§åˆ«çš„é€»è¾‘ç©ºé—´åˆ†é…**ï¼ŒåŒ…å«ä¸ºrootä¿ç•™çš„ç©ºé—´ï¼ˆé€šå¸¸5%ï¼‰å’Œå…ƒæ•°æ®ï¼ˆå¦‚inodeè¡¨ï¼‰[4,8](@ref)ã€‚


------
### ğŸ› ï¸ **å…¸å‹ä½¿ç”¨åœºæ™¯ä¸å‘½ä»¤ç¤ºä¾‹**

#### **`du`ï¼šå®šä½å¤§æ–‡ä»¶/ç›®å½•**

- æŸ¥æ‰¾å¤§æ–‡ä»¶ï¼š
  ```
  du -ah /var/log | sort -rh | head -10  # åˆ—å‡º/var/logä¸‹æœ€å¤§çš„10ä¸ªæ–‡ä»¶/ç›®å½•
  ```
- ç›®å½•ç©ºé—´æ±‡æ€»ï¼š
  ```
  du -sh /home/*                         # æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·å®¶ç›®å½•çš„æ€»å ç”¨[6,7](@ref)
  ```
- é™åˆ¶é€’å½’æ·±åº¦ï¼š
  ```
  du -h --max-depth=2 /opt               # ä»…æ˜¾ç¤º/optä¸‹ä¸¤çº§å­ç›®å½•å¤§å°[6](@ref)
  ```
#### **`df`ï¼šç›‘æ§æ–‡ä»¶ç³»ç»Ÿå¥åº·åº¦**

- åˆ†åŒºç©ºé—´æ¦‚è§ˆï¼š
  ```
  df -hT                                 # äººç±»å¯è¯»æ ¼å¼+æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼ˆå¦‚ext4, xfsï¼‰[3,9](@ref)
  ```
- inodeä½¿ç”¨æ£€æŸ¥ï¼š
  ```
  df -ih /data                           # æ£€æŸ¥/dataåˆ†åŒºçš„inodeä½™é‡ï¼ˆé˜²å°æ–‡ä»¶è€—å°½ï¼‰[4,9](@ref)
  ```
- ç‰¹å®šç±»å‹è¿‡æ»¤ï¼š
  ```
  df -t ext4 -x tmpfs                    # ä»…æ˜¾ç¤ºext4åˆ†åŒºï¼Œæ’é™¤ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ[3](@ref)
  ```


------
### ğŸ“Š **å‚æ•°å¯¹æ¯”ä¸è¾“å‡ºè§£æ**

| **å‚æ•°**    | **`du` ä½œç”¨**                               | **`df` ä½œç”¨**                    |
| ----------- | ------------------------------------------- | -------------------------------- |
| `-h`        | äººç±»å¯è¯»æ ¼å¼ï¼ˆKB/MB/GBï¼‰                    | åŒå·¦                             |
| `-s`        | åªæ˜¾ç¤ºæ€»è®¡ï¼ˆä¸é€’å½’å­ç›®å½•ï¼‰                  | ä¸é€‚ç”¨                           |
| `-a`        | æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ˆå«éšè—æ–‡ä»¶ï¼‰                  | æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼ˆå«ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼‰ |
| `-i`        | ä¸é€‚ç”¨                                      | **æ˜¾ç¤ºinodeä½¿ç”¨æƒ…å†µ**            |
| `-T`        | ä¸é€‚ç”¨                                      | **æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹**             |
| `--exclude` | æ’é™¤åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶ï¼ˆå¦‚`--exclude='*.log'`ï¼‰ | ä¸é€‚ç”¨                           |
**è¾“å‡ºå­—æ®µå·®å¼‚**ï¼š
- `du` è¾“å‡ºï¼šç›®å½•/è·¯å¾„ + å ç”¨ç©ºé—´ï¼ˆå¦‚ `2.1G /var/lib/mysql`ï¼‰[6,7](@ref)ã€‚
- `df` è¾“å‡ºï¼šæ–‡ä»¶ç³»ç»Ÿã€æ€»ç©ºé—´ã€å·²ç”¨ã€å¯ç”¨ã€ä½¿ç”¨ç‡%ã€æŒ‚è½½ç‚¹ï¼ˆå¦‚ `/dev/sda1 50G 42G 5.2G 89% /`ï¼‰[9,10](@ref)ã€‚


------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸çŸ›ç›¾è§£æ**

#### **ç©ºé—´ç»Ÿè®¡ä¸ä¸€è‡´çš„åŸå› **

| **åœºæ™¯**                                        | **åŸå› åˆ†æ**                                                 | **è§£å†³æ–¹æ¡ˆ**                                                |
| ----------------------------------------------- | ------------------------------------------------------------ | ----------------------------------------------------------- |
| `df` æ˜¾ç¤º100%æ»¡ï¼Œä½† `du` ç»Ÿè®¡æ€»å’Œè¿œå°äºåˆ†åŒºå®¹é‡ | **å·²åˆ é™¤æ–‡ä»¶ä»è¢«è¿›ç¨‹å ç”¨**ï¼šæ–‡ä»¶è¢«åˆ é™¤åï¼Œè‹¥è¿›ç¨‹æœªé‡Šæ”¾å¥æŸ„ï¼Œç©ºé—´ä¸ä¼šè¢«é‡Šæ”¾ã€‚ | é‡å¯ç›¸å…³è¿›ç¨‹æˆ–æ¸…ç©ºå¥æŸ„ï¼š`lsof / | grep deleted` [4,8](@ref) |
| `du` ç»Ÿè®¡å€¼ > `df` çš„å·²ç”¨ç©ºé—´                   | **ç¨€ç–æ–‡ä»¶ï¼ˆSparse Fileï¼‰**ï¼šæ–‡ä»¶é€»è¾‘å¤§å°å¤§ï¼Œä½†ç‰©ç†å—å ç”¨å°‘ï¼ˆå¦‚è™šæ‹Ÿç£ç›˜ï¼‰ã€‚ | ç”¨ `du --apparent-size` æŸ¥çœ‹é€»è¾‘å¤§å°ã€‚                      |
| `df -i` æ˜¾ç¤º100%æ»¡                              | **inodeè€—å°½**ï¼šå°æ–‡ä»¶è¿‡å¤šå¯¼è‡´inodeè¡¨æ»¡ï¼Œå³ä½¿ç£ç›˜æœ‰ç©ºé—´ä¹Ÿæ— æ³•åˆ›å»ºæ–°æ–‡ä»¶ã€‚ | æ¸…ç†æ–‡ä»¶æˆ–æ‰©å®¹åˆ†åŒº[3,9](@ref)                               |
#### **æ€§èƒ½ä¸æƒé™é—®é¢˜**

- **`du` éå†æ…¢**ï¼šå¯¹å¤§ç›®å½•ï¼ˆå¦‚ `/usr`ï¼‰ä½¿ç”¨ `--max-depth` é™åˆ¶æ·±åº¦ï¼Œæˆ–æ”¹ç”¨ `ncdu` äº¤äº’å¼å·¥å…·ã€‚
- **æƒé™ä¸è¶³**ï¼šç»Ÿè®¡ç³»ç»Ÿç›®å½•éœ€ `sudo du /`ï¼Œå¦åˆ™ä¼šå¿½ç•¥æ— æƒé™è®¿é—®çš„æ–‡ä»¶[5,7](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©ä¸ç»„åˆä½¿ç”¨**

| **åœºæ™¯**                   | **æ¨èå‘½ä»¤**         | **è¯´æ˜**                     |
| -------------------------- | -------------------- | ---------------------------- |
| å¿«é€ŸæŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´       | `df -h`              | ä¼˜å…ˆç¡®è®¤åˆ†åŒºæ˜¯å¦æ¥è¿‘æ»¡è½½     |
| æŸ¥æ‰¾å¤§æ–‡ä»¶/ç›®å½•            | `du -sh * | sort -h` | å®šä½ç©ºé—´å ç”¨æºå¤´             |
| ç›‘æ§inodeä½™é‡              | `df -ih`             | é˜²èŒƒå°æ–‡ä»¶å¯¼è‡´çš„å­˜å‚¨æ•…éšœ     |
| è¯Šæ–­â€œç£ç›˜æ»¡ä½†æ‰¾ä¸åˆ°å¤§æ–‡ä»¶â€ | `df -h` + `lsof`     | è”åˆåˆ†æè¿›ç¨‹å ç”¨çš„å·²åˆ é™¤æ–‡ä»¶ |
> **æœ€ä½³å®è·µ**ï¼š
> å®šæœŸç”¨ `df -h` ç›‘æ§å…³é”®åˆ†åŒºï¼ˆå¦‚ `/`, `/var`ï¼‰ï¼Œé…åˆ `du -sh /*` å¿«é€Ÿå®šä½å ç”¨æœ€é«˜çš„ç›®å½•ã€‚è‹¥å‘ç°ç©ºé—´å¼‚å¸¸ï¼Œè¿›ä¸€æ­¥ç”¨ `du --max-depth` é€å±‚ä¸‹é’»åˆ†æï¼Œå¹¶ç»“åˆ `lsof` æ’æŸ¥éšè—çš„å ç”¨é—®é¢˜[4,8,10](@ref)ã€‚
## netstat

`netstat`ï¼ˆNetwork Statisticsï¼‰æ˜¯Linux/Windowsç³»ç»Ÿä¸­ç”¨äºç›‘æ§ç½‘ç»œè¿æ¥çŠ¶æ€çš„æ ¸å¿ƒå‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡æ˜¾ç¤ºè·¯ç”±è¡¨ã€æ´»åŠ¨è¿æ¥ã€æ¥å£ç»Ÿè®¡ç­‰ä¿¡æ¯ï¼Œå¸®åŠ©ç”¨æˆ·è¯Šæ–­ç½‘ç»œé—®é¢˜ã€åˆ†æç«¯å£å ç”¨åŠæ’æŸ¥å®‰å…¨é£é™©ã€‚ä»¥ä¸‹æ˜¯å…¶åŠŸèƒ½è¯¦è§£åŠå®ç”¨æŒ‡å—ï¼š


------
### âš™ï¸ **æ ¸å¿ƒåŠŸèƒ½ä¸ç”¨é€”**

1. 
   è¿æ¥ç›‘æ§
- æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨çš„ **TCP/UDP è¿æ¥**ï¼ˆæœ¬åœ°/è¿œç¨‹IPã€ç«¯å£ã€åè®®çŠ¶æ€ï¼‰[1,3](@ref)ã€‚
   - åŒºåˆ†ç›‘å¬ç«¯å£ï¼ˆ`LISTEN`ï¼‰ä¸å·²å»ºç«‹è¿æ¥ï¼ˆ`ESTABLISHED`ï¼‰ã€‚
2. 
   è·¯ç”±ä¸æ¥å£åˆ†æ
   - æŸ¥çœ‹å†…æ ¸è·¯ç”±è¡¨ï¼ˆ`netstat -r`ï¼‰ï¼ŒåŠŸèƒ½ç­‰åŒ `route -e`[3,7](@ref)ã€‚
      - æ˜¾ç¤ºç½‘ç»œæ¥å£ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚æ•°æ®åŒ…æ”¶å‘é‡ã€é”™è¯¯æ•°ï¼‰[1,5](@ref)ã€‚
3. 
   åè®®ç»Ÿè®¡
- æŒ‰åè®®ï¼ˆTCPã€UDPã€IPç­‰ï¼‰æ±‡æ€»é”™è¯¯ç‡ã€é‡ä¼ æ¬¡æ•°ç­‰ï¼Œå®šä½ç½‘ç»œæ€§èƒ½ç“¶é¢ˆ[3,5](@ref)ã€‚


------
### ğŸ› ï¸ **å¸¸ç”¨å‚æ•°è¯¦è§£**

| **å‚æ•°**           | **ä½œç”¨**                        | **å…¸å‹åœºæ™¯**                                                 |
| ------------------ | ------------------------------- | ------------------------------------------------------------ |
| **`-a`**           | æ˜¾ç¤ºæ‰€æœ‰è¿æ¥ï¼ˆå«ç›‘å¬ç«¯å£ï¼‰      | æŸ¥çœ‹å…¨ç«¯å£å¼€æ”¾æƒ…å†µï¼š`netstat -a` [2,6](@ref)                 |
| **`-n`**           | ç¦ç”¨åŸŸåè§£æï¼Œç›´æ¥æ˜¾ç¤ºIP/ç«¯å£å· | åŠ é€Ÿè¾“å‡ºå¹¶é¿å…DNSå¹²æ‰°ï¼š`netstat -an` [2,4](@ref)             |
| **`-t`/`-u`**      | ä»…æ˜¾ç¤ºTCP/UDPè¿æ¥               | è¿‡æ»¤åè®®ï¼š`netstat -at`ï¼ˆTCPï¼‰æˆ– `netstat -au`ï¼ˆUDPï¼‰[6](@ref) |
| **`-p`**           | æ˜¾ç¤ºè¿›ç¨‹IDåŠç¨‹åºå              | å®šä½å ç”¨ç«¯å£çš„ç¨‹åºï¼š`netstat -ap                             |
| **`-l`**           | ä»…åˆ—å‡ºç›‘å¬ç«¯å£                  | æ£€æŸ¥æœåŠ¡ç›‘å¬çŠ¶æ€ï¼š`netstat -lt`ï¼ˆTCPç›‘å¬ï¼‰[6](@ref)          |
| **`-s`**           | æ˜¾ç¤ºåè®®ç»Ÿè®¡ä¿¡æ¯                | åˆ†æä¸¢åŒ…/é”™è¯¯ç‡ï¼š`netstat -s` [3,5](@ref)                    |
| **`-r`**           | æ˜¾ç¤ºè·¯ç”±è¡¨                      | æŸ¥çœ‹ç½‘å…³è·¯å¾„ï¼š`netstat -rn` [3,7](@ref)                      |
| **`-e`**           | æ˜¾ç¤ºæ¥å£æµé‡ç»Ÿè®¡                | ç›‘æ§ç½‘ç»œååé‡ï¼š`netstat -e` [1,2](@ref)                     |
| **`-o`** (Windows) | æ˜¾ç¤ºè¿›ç¨‹ID                      | ç»“åˆä»»åŠ¡ç®¡ç†å™¨ç»“æŸè¿›ç¨‹ï¼š`netstat -ano` [2](@ref)             |


------
### ğŸ“Š **TCPè¿æ¥çŠ¶æ€è§£æ**

`netstat` è¾“å‡ºçš„ `State` åˆ—æ˜¯å…³é”®è¯Šæ–­ä¾æ®ï¼Œå¸¸è§çŠ¶æ€åŒ…æ‹¬ï¼š
- **`LISTEN`**ï¼šæœåŠ¡ç«¯ç­‰å¾…è¿æ¥è¯·æ±‚ï¼ˆå¦‚WebæœåŠ¡å™¨ç›‘å¬80ç«¯å£ï¼‰[3,4](@ref)ã€‚
- **`ESTABLISHED`**ï¼šå·²å»ºç«‹è¿æ¥ï¼Œæ•°æ®æ­£å¸¸ä¼ è¾“ã€‚
- **`TIME_WAIT`**ï¼šè¿æ¥å…³é—­åç­‰å¾…æ¸…ç†ï¼ˆæŒç»­2MSLæ—¶é—´ï¼Œé˜²æŠ¥æ–‡é‡å¤ï¼‰ã€‚
- **`CLOSE_WAIT`**ï¼šè¿œç¨‹ä¸»åŠ¨å…³é—­ï¼Œæœ¬åœ°ç­‰å¾…å…³é—­è¿æ¥ï¼ˆå¯èƒ½æ³„éœ²èµ„æºï¼‰ã€‚
- **`SYN_SENT`**ï¼šå®¢æˆ·ç«¯å‘èµ·è¿æ¥åç­‰å¾…å“åº”ï¼ˆå¤§é‡å‡ºç°å¯èƒ½é­æ´ªæ°´æ”»å‡»ï¼‰[5](@ref)ã€‚
> âš ï¸ **å¼‚å¸¸çŠ¶æ€å‘Šè­¦**ï¼š
>
> - è¿‡å¤š `SYN_RECV`ï¼šå¯èƒ½é­å— **SYN Floodæ”»å‡»**ã€‚
> - å¤§é‡ `CLOSE_WAIT`ï¼šç¨‹åºæœªæ­£ç¡®å…³é—­è¿æ¥ï¼Œéœ€æ£€æŸ¥ä»£ç [5](@ref)ã€‚


------
### ğŸ” **å®ç”¨åœºæ™¯ä¸å‘½ä»¤ç¤ºä¾‹**

1. **æ’æŸ¥ç«¯å£å ç”¨**
   ```
   netstat -tulnp | grep :8080  # æŸ¥8080ç«¯å£çš„è¿›ç¨‹
   ```
   - è¾“å‡ºç¤ºä¾‹ï¼š`tcp 0 0 0.0.0.0:8080 0.0.0.0:* LISTEN 1053/java` â†’ è¿›ç¨‹ID 1053å ç”¨[6](@ref)ã€‚
2. **æ£€æµ‹æ¶æ„è¿æ¥**
   ```
   netstat -anp | grep ESTABLISHED | awk '{print $5}' | sort -u  # åˆ—å‡ºæ‰€æœ‰æ´»åŠ¨è¿æ¥çš„è¿œç¨‹IP
   ```
   - ç»“åˆ `-b`ï¼ˆWindowsï¼‰æˆ– `-p`ï¼ˆLinuxï¼‰æŸ¥çœ‹å¯ç–‘ç¨‹åºå[2](@ref)ã€‚
3. **ç›‘æ§ç½‘ç»œæµé‡**
   ```
   netstat -ie  # æ˜¾ç¤ºæ¥å£è¯¦ç»†ç»Ÿè®¡ï¼ˆç±»ä¼¼ifconfigï¼‰
   ```
   - å…³æ³¨ `Ierrs`ï¼ˆæ¥æ”¶é”™è¯¯ï¼‰å’Œ `Oeers`ï¼ˆå‘é€é”™è¯¯ï¼‰ï¼Œè¿‡é«˜éœ€æ£€æŸ¥ç¡¬ä»¶æˆ–é©±åŠ¨[1,5](@ref)ã€‚
4. **åˆ†æåè®®æ€§èƒ½**
   ```
   netstat -s -t  # ä»…æ˜¾ç¤ºTCPåè®®ç»Ÿè®¡ï¼ˆé‡ä¼ ã€æ ¡éªŒå’Œé”™è¯¯ç­‰ï¼‰
   ```
   - è¾“å‡ºä¸­ `segments retransmitted` çªå¢è¡¨æ˜ç½‘ç»œä¸ç¨³å®š[3](@ref)ã€‚


------
### âš ï¸ **æ³¨æ„äº‹é¡¹ä¸æ›¿ä»£æ–¹æ¡ˆ**

1. 
   æƒé™è¦æ±‚
- Linuxä¸­æŸ¥çœ‹è¿›ç¨‹åï¼ˆ`-p`ï¼‰éœ€ **rootæƒé™**ï¼›Windowsä¸­ `-b` éœ€ç®¡ç†å‘˜æƒé™[2,4](@ref)ã€‚
2. 
   æ€§èƒ½å½±å“
- å®æ—¶åˆ·æ–°ï¼ˆ`netstat -an 5`ï¼‰å¯èƒ½æ¶ˆè€—CPUï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ã€‚
3. 
   ç°ä»£æ›¿ä»£å·¥å…·
- Linuxæ¨è **
     ```
     ss
     ```
     ï¼ˆSocket Statisticsï¼‰**ï¼Œæ›´é«˜æ•ˆï¼š
     ```
     ss -tulp  # ç­‰ä»·äº netstat -tulp
     ```
   - `ss` ç›´æ¥è¯»å–å†…æ ¸æ•°æ®ï¼Œé€Ÿåº¦æ›´å¿«[7](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒä»·å€¼**ï¼š`netstat` æ˜¯ç½‘ç»œè¯Šæ–­çš„**åŸºç¡€å·¥å…·**ï¼Œé€šè¿‡è¿æ¥çŠ¶æ€ã€ç«¯å£å ç”¨å’Œåè®®ç»Ÿè®¡çš„ä¸‰ç»´æ•°æ®ï¼Œå¿«é€Ÿå®šä½æ•…éšœã€‚
- é«˜é¢‘ç»„åˆï¼š
  - ç«¯å£æ’æŸ¥ â†’ `netstat -tulnp`
  - è·¯ç”±æ£€æŸ¥ â†’ `netstat -rn`
  - æ¶æ„è¿›ç¨‹ â†’ `netstat -ano | findstr ESTABLISHED`ï¼ˆWindowsï¼‰
- **è¶‹åŠ¿å»ºè®®**ï¼šæ–°ç³»ç»Ÿä¼˜å…ˆä½¿ç”¨ `ss`ï¼Œä½† `netstat` çš„è·¨å¹³å°æ€§ï¼ˆWindows/Linuxï¼‰ä»ä¸å¯æ›¿ä»£[7](@ref)ã€‚
## ifconfig

`ifconfig`ï¼ˆInterface Configuratorï¼‰æ˜¯ Linux/Unix ç³»ç»Ÿä¸­ç”¨äº**é…ç½®å’ŒæŸ¥çœ‹ç½‘ç»œæ¥å£ä¿¡æ¯**çš„ç»å…¸å‘½ä»¤è¡Œå·¥å…·ã€‚å°½ç®¡ç°ä»£ Linux ç³»ç»Ÿé€æ¸æ¨èä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„ `ip` å‘½ä»¤ï¼ˆæ¥è‡ª `iproute2` å·¥å…·åŒ…ï¼‰ï¼Œä½† `ifconfig` å› å…¶ç®€æ´æ˜“ç”¨ä»å¹¿æ³›å­˜åœ¨äºæ—§ç³»ç»Ÿæˆ–è„šæœ¬ä¸­ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŠŸèƒ½åˆ°å®è·µå…¨é¢è§£æï¼š


------
### âš™ï¸ **æ ¸å¿ƒåŠŸèƒ½ä¸ç”¨é€”**

1. **æŸ¥çœ‹ç½‘ç»œæ¥å£çŠ¶æ€**
   - æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨æ¥å£çš„è¯¦ç»†ä¿¡æ¯ï¼š
     ```
     ifconfig
     ```
   - è¾“å‡ºåŒ…å«å…³é”®å­—æ®µï¼š
     - **`inet`**: IPv4 åœ°å€ï¼ˆå¦‚ `192.168.1.100`ï¼‰
     - **`netmask`**: å­ç½‘æ©ç ï¼ˆå¦‚ `255.255.255.0`ï¼‰
     - **`inet6`**: IPv6 åœ°å€
     - **`ether`**: MAC åœ°å€ï¼ˆå¦‚ `00:1c:42:11:12:34`ï¼‰
     - **`RX/TX`**: æ¥æ”¶/å‘é€çš„æ•°æ®åŒ…ç»Ÿè®¡ï¼ˆæµé‡ã€é”™è¯¯æ•°ç­‰ï¼‰
     - **`flags`**: æ¥å£çŠ¶æ€ï¼ˆ`UP` è¡¨ç¤ºå¯ç”¨ã€`RUNNING` è¡¨ç¤ºè¿è¡Œä¸­ï¼‰[1,4,6](@ref)ã€‚
2. **é…ç½®ç½‘ç»œæ¥å£**
   - ä¸´æ—¶è®¾ç½® IP åœ°å€ä¸å­ç½‘æ©ç ï¼š
     ```
     sudo ifconfig eth0 192.168.1.100 netmask 255.255.255.0
     ```
   - å¯ç”¨/ç¦ç”¨æ¥å£ï¼š
     ```
     sudo ifconfig eth0 up    # å¯ç”¨
     sudo ifconfig eth0 down  # ç¦ç”¨
     ```
   - âš ï¸ æ³¨æ„ï¼šé…ç½®é‡å¯åå¤±æ•ˆï¼ŒæŒä¹…åŒ–éœ€ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶ï¼ˆå¦‚ `/etc/network/interfaces`ï¼‰[1,5,6](@ref)ã€‚
3. **é«˜çº§åŠŸèƒ½**
   - ä¿®æ”¹ MAC åœ°å€
     ï¼ˆéœ€å…ˆç¦ç”¨æ¥å£ï¼‰ï¼š
     ```
     sudo ifconfig eth0 down
     sudo ifconfig eth0 hw ether 00:11:22:33:44:55
     sudo ifconfig eth0 up
     ```
   - å¯ç”¨æ··æ‚æ¨¡å¼
     ï¼ˆç”¨äºæŠ“åŒ…åˆ†æï¼‰ï¼š
     ```
     sudo ifconfig eth0 promisc   # å¯ç”¨
     sudo ifconfig eth0 -promisc  # ç¦ç”¨
     ```
   - è®¾ç½® MTU
     ï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰ï¼š
     ```
     sudo ifconfig eth0 mtu 1500
     ```[1,6,8](@ref)ã€‚
     ```

------
### ğŸ“‹ **å¸¸ç”¨å‚æ•°ä¸è¯­æ³•**

| **å‚æ•°**      | **ä½œç”¨**                   | **ç¤ºä¾‹**                     |
| ------------- | -------------------------- | ---------------------------- |
| `-a`          | æ˜¾ç¤ºæ‰€æœ‰æ¥å£ï¼ˆå«æœªå¯ç”¨çš„ï¼‰ | `ifconfig -a`                |
| `-s`          | æ˜¾ç¤ºç®€è¦ç»Ÿè®¡ä¿¡æ¯           | `ifconfig -s`                |
| `interface`   | æŒ‡å®šæ“ä½œæ¥å£ï¼ˆå¦‚ `eth0`ï¼‰  | `ifconfig eth0`              |
| `hw <type>`   | ä¿®æ”¹ç¡¬ä»¶åœ°å€ï¼ˆå¦‚ `ether`ï¼‰ | `ifconfig eth0 hw ether ...` |
| `mtu <value>` | è®¾ç½®æœ€å¤§ä¼ è¾“å•å…ƒ           | `ifconfig eth0 mtu 9000`     |
**åŸºæœ¬è¯­æ³•**ï¼š
```
ifconfig [æ¥å£] [æ“ä½œ] [å‚æ•°]
```

------
### ğŸ› ï¸ **å…¸å‹åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹**

#### **æŸ¥çœ‹æŒ‡å®šæ¥å£ä¿¡æ¯**

```
ifconfig eth0
```
è¾“å‡ºç¤ºä¾‹ï¼š
```
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
      inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255
      ether 00:1c:42:11:12:34  txqueuelen 1000  (Ethernet)
      RX packets 12045  bytes 1023345 (1023.3 KB)
      TX packets 8045  bytes 845621 (845.6 KB)
```
#### **é…ç½®è™šæ‹Ÿç½‘ç»œæ¥å£**

ä¸º `eth0` æ·»åŠ å¤šä¸ª IP åœ°å€ï¼ˆå¦‚ `eth0:0`ï¼‰ï¼š
```
sudo ifconfig eth0:0 192.168.1.101 netmask 255.255.255.0
```
é€‚ç”¨åœºæ™¯ï¼šå•ç½‘å¡éƒ¨ç½²å¤šä¸ªæœåŠ¡ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰[6,9](@ref)ã€‚
#### **ç½‘ç»œæ•…éšœæ’æŸ¥**

- æ£€æŸ¥æ¥å£æ˜¯å¦å¯ç”¨ï¼ˆ`UP` æ ‡å¿—ï¼‰ã€‚
- é€šè¿‡ `RX/TX errors` åˆ†æä¸¢åŒ…é—®é¢˜ã€‚
- ç¡®è®¤ IP å’Œå­ç½‘æ©ç æ˜¯å¦åŒ¹é…å±€åŸŸç½‘[3,5](@ref)ã€‚

------
### âš ï¸ **å±€é™æ€§åŠæ›¿ä»£æ–¹æ¡ˆ**

1. 
   åŠŸèƒ½å±€é™
- ä¸æ”¯æŒç°ä»£ç½‘ç»œç‰¹æ€§ï¼ˆå¦‚ VLAN é«˜çº§é…ç½®ã€ç­–ç•¥è·¯ç”±ï¼‰ã€‚
   - æ— æ³•æŸ¥çœ‹é‚»å±…è¡¨ï¼ˆARP ç¼“å­˜éœ€ç”¨ `arp -a`ï¼‰ã€‚
2. 
   è¢« `ip` å‘½ä»¤å–ä»£
- æŸ¥çœ‹æ¥å£ä¿¡æ¯ï¼š`ip addr show`
   - è®¾ç½® IP åœ°å€ï¼š`ip addr add 192.168.1.100/24 dev eth0`
   - å¯ç”¨æ¥å£ï¼š`ip link set eth0 up`
   - ğŸ’¡ ä¼˜åŠ¿ï¼šæ›´é«˜æ•ˆã€åŠŸèƒ½å…¨é¢ï¼Œç›´æ¥è¯»å–å†…æ ¸æ•°æ®[1,8,9](@ref)ã€‚
3. 
   å…¼å®¹æ€§è¦æ±‚
- æ–°ç³»ç»Ÿå¯èƒ½éœ€å®‰è£…
```
     net-tools
```
åŒ…ï¼š
     ```
     sudo apt install net-tools  # Debian/Ubuntu
     sudo yum install net-tools # CentOS/RHEL
     ```[1,3](@ref)ã€‚
     ```


------
### âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **æƒé™è¦æ±‚**
   é…ç½®æ“ä½œéœ€ `root` æƒé™ï¼ˆä½¿ç”¨ `sudo`ï¼‰ã€‚
2. **ä¸´æ—¶æ€§é…ç½®**
   é‡å¯åå¤±æ•ˆï¼ŒæŒä¹…åŒ–éœ€ç¼–è¾‘é…ç½®æ–‡ä»¶æˆ–ä½¿ç”¨ `netplan`ï¼ˆUbuntuï¼‰[1,7](@ref)ã€‚
3. **ç”Ÿäº§ç¯å¢ƒå»ºè®®**
   ä¼˜å…ˆä½¿ç”¨ `ip` å‘½ä»¤æˆ–ç½‘ç»œç®¡ç†å·¥å…·ï¼ˆå¦‚ `NetworkManager`ï¼‰[3,9](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“ï¼šifconfig æ ¸å¿ƒè¦ç‚¹**

| **åŠŸèƒ½**          | **å‘½ä»¤ç¤ºä¾‹**                               | **æ›¿ä»£æ–¹æ¡ˆï¼ˆipå‘½ä»¤ï¼‰**                       |
| ----------------- | ------------------------------------------ | -------------------------------------------- |
| **æŸ¥çœ‹æ¥å£ä¿¡æ¯**  | `ifconfig eth0`                            | `ip addr show dev eth0`                      |
| **è®¾ç½®IPåœ°å€**    | `ifconfig eth0 192.168.1.100/24`           | `ip addr add 192.168.1.100/24 dev eth0`      |
| **å¯ç”¨/ç¦ç”¨æ¥å£** | `ifconfig eth0 up` / `ifconfig eth0 down`  | `ip link set eth0 up`                        |
| **ä¿®æ”¹MACåœ°å€**   | `ifconfig eth0 hw ether 00:11:22:33:44:55` | `ip link set eth0 address 00:11:22:33:44:55` |
> **é€‚ç”¨åœºæ™¯**ï¼šå¿«é€Ÿè°ƒè¯•ã€æ—§ç³»ç»Ÿç»´æŠ¤ã€è„šæœ¬å…¼å®¹æ€§ã€‚
> â€‹**è¿ç§»å»ºè®®**â€‹ï¼šæ–°é¡¹ç›®æˆ–è„šæœ¬ä¼˜å…ˆä½¿ç”¨ `ip` å‘½ä»¤ä»¥å…¼å®¹æœªæ¥ Linux ç‰ˆæœ¬ğŸš€ã€‚
## ps

`ps`ï¼ˆProcess Statusï¼‰æ˜¯Linux/Unixç³»ç»Ÿä¸­ç”¨äº**æŸ¥çœ‹å½“å‰è¿›ç¨‹çŠ¶æ€**çš„æ ¸å¿ƒå‘½ä»¤ï¼Œå®ƒæä¾›ç³»ç»Ÿåœ¨æŸä¸€æ—¶åˆ»çš„è¿›ç¨‹å¿«ç…§ï¼Œæ˜¯ç³»ç»Ÿç›‘æ§å’Œæ•…éšœæ’æŸ¥çš„åŸºç¡€å·¥å…·ã€‚ä»¥ä¸‹ä»åŠŸèƒ½ã€è¯­æ³•ã€è¾“å‡ºè§£æåˆ°åº”ç”¨åœºæ™¯è¿›è¡Œå…¨é¢è§£æï¼š


------
### ğŸ” **æ ¸å¿ƒåŠŸèƒ½ä¸ç‰¹ç‚¹**

1. 
   è¿›ç¨‹å¿«ç…§
- æ˜¾ç¤ºç¬é—´çš„ç³»ç»Ÿè¿›ç¨‹çŠ¶æ€ï¼ˆéå®æ—¶åŠ¨æ€ï¼Œéœ€é…åˆ`top`æˆ–`watch`å®æ—¶ç›‘æ§ï¼‰[6,8](@ref)ã€‚
2. 
   ç²¾ç»†è¿‡æ»¤
- æ”¯æŒæŒ‰ç”¨æˆ·ã€CPU/å†…å­˜å ç”¨ã€ç»ˆç«¯ç­‰æ¡ä»¶ç­›é€‰è¿›ç¨‹ã€‚
3. 
   å¤šæ ¼å¼è¾“å‡º
- å¯è‡ªå®šä¹‰æ˜¾ç¤ºå­—æ®µï¼ˆå¦‚PIDã€å‘½ä»¤ã€èµ„æºå ç”¨ç­‰ï¼‰ã€‚


------
### âš™ï¸ **å‘½ä»¤è¯­æ³•ä¸å¸¸ç”¨é€‰é¡¹**

åŸºæœ¬è¯­æ³•ï¼š`ps [options]`
â€‹**å¸¸ç”¨é€‰é¡¹ç»„åˆ**â€‹ï¼š
| **é€‰é¡¹**                | **è¯´æ˜**                                                     |
| ----------------------- | ------------------------------------------------------------ |
| `ps aux`                | BSDé£æ ¼ï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå«èµ„æºå ç”¨ï¼‰[1,6](@ref) |
| `ps -ef`                | UNIXé£æ ¼ï¼šæ˜¾ç¤ºå®Œæ•´è¿›ç¨‹æ ‘ï¼ˆå«çˆ¶è¿›ç¨‹PPIDï¼‰[1](@ref)            |
| `ps -u root`            | æŸ¥çœ‹ç‰¹å®šç”¨æˆ·ï¼ˆå¦‚rootï¼‰çš„è¿›ç¨‹                                 |
| `ps -C nginx`           | æŒ‰è¿›ç¨‹åè¿‡æ»¤ï¼ˆå¦‚æ˜¾ç¤ºnginxç›¸å…³è¿›ç¨‹ï¼‰                          |
| `ps -e -o pid,user,cmd` | è‡ªå®šä¹‰è¾“å‡ºå­—æ®µï¼ˆPIDã€ç”¨æˆ·ã€å‘½ä»¤ï¼‰                            |
**å…³é”®å•é€‰é¡¹**ï¼š
- `a`ï¼šæ˜¾ç¤ºå½“å‰ç»ˆç«¯æ‰€æœ‰è¿›ç¨‹ï¼ˆå«å…¶ä»–ç”¨æˆ·ï¼‰
- `x`ï¼šåŒ…æ‹¬æ— ç»ˆç«¯çš„è¿›ç¨‹ï¼ˆå¦‚å®ˆæŠ¤è¿›ç¨‹ï¼‰
- `f`ï¼šæ ‘çŠ¶æ˜¾ç¤ºè¿›ç¨‹çˆ¶å­å…³ç³»
- `-L`ï¼šæ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯ï¼ˆLWPï¼‰[6](@ref)


------
### ğŸ“Š **è¾“å‡ºå­—æ®µè§£æ**

`ps aux` çš„å…¸å‹è¾“å‡ºç¤ºä¾‹ï¼š
```
USER  PID  %CPU %MEM  VSZ   RSS  TTY  STAT  START  TIME  COMMAND
root  1    0.0  0.3  193628 6800 ?   Ss    Jan01  0:15  /sbin/init
```
- **USER**ï¼šè¿›ç¨‹æ‰€æœ‰è€…
- **PID**ï¼šè¿›ç¨‹IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
- **%CPU/%MEM**ï¼šCPU/å†…å­˜å ç”¨ç™¾åˆ†æ¯”
- **VSZ/RSS**ï¼šè™šæ‹Ÿå†…å­˜/ç‰©ç†å†…å­˜ç”¨é‡ï¼ˆKBï¼‰
- **TTY**ï¼šå…³è”ç»ˆç«¯ï¼ˆ`?`è¡¨ç¤ºæ— ç»ˆç«¯ï¼‰
- **STAT**ï¼šè¿›ç¨‹çŠ¶æ€
- `R`ï¼šè¿è¡Œä¸­
  - `S`ï¼šå¯ä¸­æ–­ç¡çœ 
- `D`ï¼šä¸å¯ä¸­æ–­ç¡çœ ï¼ˆå¦‚ç­‰å¾…ç£ç›˜I/Oï¼‰
  - `Z`ï¼šåƒµå°¸è¿›ç¨‹ï¼ˆéœ€æ‰‹åŠ¨æ¸…ç†ï¼‰
- `T`ï¼šå·²åœæ­¢
  - `<`ï¼šé«˜ä¼˜å…ˆçº§è¿›ç¨‹
- **TIME**ï¼šç´¯è®¡CPUå ç”¨æ—¶é—´
- **COMMAND**ï¼šå¯åŠ¨å‘½ä»¤ï¼ˆ`[]`ä¸ºå†…æ ¸çº¿ç¨‹ï¼‰


------
### ğŸ› ï¸ **ç»å…¸ä½¿ç”¨åœºæ™¯**

#### **æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹**

```
ps aux   # æœ€å¸¸ç”¨ï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯
ps -ef   # æ˜¾ç¤ºå®Œæ•´è¿›ç¨‹æ ‘ï¼ˆå«PPIDï¼‰
```
#### **è¿‡æ»¤ç‰¹å®šè¿›ç¨‹**

```
ps aux | grep nginx     # æŸ¥æ‰¾nginxè¿›ç¨‹
ps -C httpd -o pid,cmd  # æŒ‰è¿›ç¨‹åç²¾ç¡®è¿‡æ»¤å¹¶æŒ‡å®šè¾“å‡ºå­—æ®µ
```
#### **åˆ†æèµ„æºå ç”¨**

```
ps aux --sort=-%cpu | head -10  # æŒ‰CPUé™åºå–å‰10
ps aux --sort=-%mem | head -5   # æŒ‰å†…å­˜é™åºå–å‰5
```
#### **æŸ¥çœ‹è¿›ç¨‹æ ‘å…³ç³»**

```
ps -f --forest         # æ ‘çŠ¶æ˜¾ç¤ºçˆ¶å­è¿›ç¨‹å±‚çº§
ps -e -o pid,ppid,cmd | grep -v "0$"  # æ’é™¤æ— çˆ¶è¿›ç¨‹çš„æ ¹è¿›ç¨‹
```
#### **ç›‘æ§çº¿ç¨‹ä¸å®æ—¶åˆ·æ–°**

```
ps -L 1234             # æŸ¥çœ‹PID=1234çš„çº¿ç¨‹è¯¦æƒ…
watch -n 1 "ps aux | grep mysql"  # æ¯ç§’åˆ·æ–°mysqlè¿›ç¨‹çŠ¶æ€
```


------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸æŠ€å·§**

1. 
   åƒµå°¸è¿›ç¨‹å¤„ç†
- è‹¥å‘ç°`STAT`ä¸º`Z`çš„è¿›ç¨‹ï¼Œéœ€ç¡®è®¤å…¶çˆ¶è¿›ç¨‹å¹¶ç»ˆæ­¢çˆ¶è¿›ç¨‹[6](@ref)ã€‚
2. 
   åŒºåˆ†è¿›ç¨‹çŠ¶æ€
- `S`ï¼ˆç¡çœ ï¼‰ä¸`D`ï¼ˆä¸å¯ä¸­æ–­ç¡çœ ï¼‰ï¼šåè€…å¤šå› ç¡¬ä»¶I/Oé˜»å¡ï¼Œæ— æ³•å¼ºåˆ¶ç»ˆæ­¢ã€‚
3. 
   è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼
- ä½¿ç”¨`-o`æŒ‡å®šå­—æ®µï¼ˆå¦‚`ps -eo pid,user,pcpu,pmem,vsz,rss,start,cmd`ï¼‰ã€‚
4. 
   ç»“åˆ`pstree`å¯è§†åŒ–
- å®‰è£…`pstree`å·¥å…·æ›´ç›´è§‚å±•ç¤ºè¿›ç¨‹æ ‘ï¼š`pstree -p`[6](@ref)ã€‚


------
### ğŸ’ **æ€»ç»“**

`ps`æ˜¯**è¿›ç¨‹é™æ€åˆ†æ**çš„åŸºçŸ³å·¥å…·ï¼Œé€‚ç”¨äºï¼š
- **å¿«é€Ÿå®šä½èµ„æºç“¶é¢ˆ**ï¼ˆCPU/å†…å­˜å ç”¨Topè¿›ç¨‹ï¼‰
- **æ’æŸ¥å¼‚å¸¸è¿›ç¨‹**ï¼ˆåƒµå°¸ã€é«˜è´Ÿè½½è¿›ç¨‹ï¼‰
- **æœåŠ¡çŠ¶æ€éªŒè¯**ï¼ˆå¦‚ç¡®è®¤å®ˆæŠ¤è¿›ç¨‹æ˜¯å¦è¿è¡Œï¼‰
> æŒæ¡ `ps aux | grep` ç»„åˆä¸å­—æ®µè§£æï¼Œå¯è¦†ç›–90%æ—¥å¸¸è¿ç»´éœ€æ±‚ã€‚åŠ¨æ€ç›‘æ§æ¨èç»“åˆ `top`/`htop`ï¼Œå¤æ‚åˆ†æä½¿ç”¨ `pidstat`ï¼ˆsysstatåŒ…ï¼‰[6,8](@ref)ã€‚
## åå°è¿è¡Œ

åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œä½¿å‘½ä»¤åœ¨åå°è¿è¡Œæ˜¯å¸¸è§çš„è¿ç»´éœ€æ±‚ï¼Œå¯ç¡®ä¿ç»ˆç«¯å…³é—­æˆ–æ–­å¼€è¿æ¥åä»»åŠ¡æŒç»­æ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯å…­ç§æ ¸å¿ƒæ–¹æ³•åŠå…¶è¯¦ç»†æ“ä½œæŒ‡å—ï¼š


------
### ğŸ”§ `&` ç¬¦å·ï¼ˆåŸºç¡€åå°è¿è¡Œï¼‰

- å‘½ä»¤æ ¼å¼ï¼š
  ```
  command &  # æœ«å°¾æ·»åŠ  & ç¬¦å·
  ```
- ç¤ºä¾‹ï¼š
  ```
  python3 script.py &  # åå°è¿è¡Œ Python è„šæœ¬
  ```
- ç‰¹ç‚¹ï¼š
  - è¿›ç¨‹ç«‹å³åœ¨åå°è¿è¡Œï¼Œç»ˆç«¯å¯ç»§ç»­ä½¿ç”¨ã€‚
  - **ç¼ºç‚¹**ï¼šç»ˆç«¯å…³é—­åè¿›ç¨‹ä¼šè¢«ç»ˆæ­¢[1,3,5](@ref)ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šä¸´æ—¶æ€§çŸ­ä»»åŠ¡ï¼ˆå¦‚ç¼–è¯‘ã€æµ‹è¯•ï¼‰ã€‚


------
### ğŸ”Œ `nohup` + `&`ï¼ˆè„±ç¦»ç»ˆç«¯è¿è¡Œï¼‰

- å‘½ä»¤æ ¼å¼ï¼š
  ```
  nohup command > output.log 2>&1 &  # é‡å®šå‘è¾“å‡ºåˆ°æ–‡ä»¶
  ```
- ç¤ºä¾‹ï¼š
  ```
  nohup java -jar app.jar > app.log 2>&1 &  # æ—¥å¿—å†™å…¥ app.log
  ```
- æ ¸å¿ƒæœºåˆ¶ï¼š
  - `nohup`ï¼šå¿½ç•¥ SIGHUP ä¿¡å·ï¼Œç»ˆç«¯å…³é—­åè¿›ç¨‹ä»è¿è¡Œã€‚
  - è¾“å‡ºé»˜è®¤ä¿å­˜åˆ° `nohup.out`ï¼Œå»ºè®®æ˜¾å¼é‡å®šå‘[1,6,7,8](@ref)ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šé•¿æœŸè¿è¡Œä¸”æ— éœ€äº¤äº’çš„ä»»åŠ¡ï¼ˆå¦‚å¤‡ä»½ã€æ•°æ®å¤„ç†ï¼‰ã€‚


------
### ğŸšª `disown`ï¼ˆè„±ç¦» Shell ç®¡ç†ï¼‰

- æ“ä½œæ­¥éª¤ï¼š
  1. å¯åŠ¨åå°ä»»åŠ¡ï¼š
     ```
     command &  # å¦‚ï¼špython3 server.py &
     ```
  2. æŸ¥çœ‹ä½œä¸š IDï¼š
     ```
     jobs -l  # æ˜¾ç¤ºä½œä¸šåˆ—è¡¨ï¼ˆå¦‚è¾“å‡º [1] 12345ï¼‰
     ```
  3. è§£é™¤å…³è”ï¼š
     ```
     disown %1  # %1 ä¸ºä½œä¸šç¼–å·
     ```
- **æ•ˆæœ**ï¼šè¿›ç¨‹è„±ç¦»å½“å‰ Shellï¼Œç»ˆç«¯å…³é—­åä»è¿è¡Œ[1,2](@ref)ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šå°†å·²å¯åŠ¨çš„å‰å°ä»»åŠ¡è½¬ä¸ºåå°æŒä¹…è¿è¡Œã€‚


------
### ğŸ–¥ï¸ ç»ˆç«¯å¤ç”¨å·¥å…·ï¼ˆ`screen` / `tmux`ï¼‰

#### **`screen` æ“ä½œæµç¨‹**

```
screen -S my_session    # åˆ›å»ºä¼šè¯ï¼ˆåä¸º my_sessionï¼‰
# åœ¨ä¼šè¯ä¸­è¿è¡Œå‘½ä»¤ï¼ˆå¦‚å¯åŠ¨åº”ç”¨ï¼‰
Ctrl+A â†’ D              # åˆ†ç¦»ä¼šè¯ï¼ˆåå°ä¿æŒè¿è¡Œï¼‰
screen -r my_session     # é‡æ–°è¿æ¥ä¼šè¯
```
#### **`tmux` æ“ä½œæµç¨‹**

```
tmux new -s my_session  # åˆ›å»ºä¼šè¯
# åœ¨ä¼šè¯ä¸­è¿è¡Œå‘½ä»¤
Ctrl+B â†’ D              # åˆ†ç¦»ä¼šè¯
tmux attach -t my_session # é‡æ–°è¿æ¥
```
- **ä¼˜åŠ¿**ï¼šæ”¯æŒä¼šè¯æ–­çº¿é‡è¿ã€å¤šä»»åŠ¡ç®¡ç†ï¼Œé€‚åˆäº¤äº’å¼ä»»åŠ¡ï¼ˆå¦‚è°ƒè¯•ã€ç›‘æ§ï¼‰[1,9,10,11](@ref)ã€‚
- è„šæœ¬è‡ªåŠ¨åŒ–ï¼š
  ```
  screen -dmS session_name command  # åå°åˆ›å»ºä¼šè¯å¹¶è¿è¡Œå‘½ä»¤
  ```


------
### âš™ï¸ `systemd` æœåŠ¡ç®¡ç†ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

- æ­¥éª¤ï¼š
  1. åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š
     ```
     sudo nano /etc/systemd/system/myapp.service
     ```
  2. å†™å…¥é…ç½®ï¼š
     ```
     [Unit]
     Description=My Application
     [Service]
     ExecStart=/path/to/command  # å¦‚ /usr/bin/python3 /app/main.py
     Restart=always              # å´©æºƒæ—¶è‡ªåŠ¨é‡å¯
     User=myuser                 # è¿è¡Œç”¨æˆ·
     [Install]
     WantedBy=multi-user.target
     ```
  3. å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼š
     ```
     sudo systemctl daemon-reload
     sudo systemctl start myapp
     sudo systemctl enable myapp
     ```
- **ä¼˜åŠ¿**ï¼šæ—¥å¿—ç”±ç³»ç»Ÿç®¡ç†ï¼ˆ`journalctl -u myapp`ï¼‰ï¼Œæ”¯æŒç›‘æ§ã€èµ„æºé™åˆ¶[1,7](@ref)ã€‚


------
### ğŸ› ï¸ å®ç”¨æŠ€å·§è¡¥å……

1. 
   å‰å°ä»»åŠ¡è½¬åå°ï¼š
   - `Ctrl+Z` æš‚åœä»»åŠ¡ â†’ `bg` åå°ç»§ç»­ â†’ `disown %1` è„±ç¦» Shell[2,3](@ref)ã€‚
2. 
   æŸ¥çœ‹åå°ä»»åŠ¡ï¼š
   ```
   jobs -l        # å½“å‰ç»ˆç«¯ä»»åŠ¡
   ps aux | grep "command"  # å…¨å±€æœç´¢è¿›ç¨‹
   ```
3. 
   ç»ˆæ­¢åå°è¿›ç¨‹ï¼š
   ```
   kill %1       # ç»ˆæ­¢ä½œä¸š 1
   kill -9 12345 # å¼ºåˆ¶ç»ˆæ­¢ PID 12345
   ```
4. 
   è¾“å‡ºé‡å®šå‘ï¼š
   ```
   nohup command > /dev/null 2>&1 &  # ä¸¢å¼ƒæ‰€æœ‰è¾“å‡ºï¼ˆé¿å…æ—¥å¿—è†¨èƒ€ï¼‰
   ```


------
### ğŸ’ **æ–¹æ³•å¯¹æ¯”ä¸é€‰æ‹©å»ºè®®**

| **æ–¹æ³•**        | ç»ˆç«¯å…³é—­åå­˜æ´» | æ—¥å¿—ç®¡ç†       | é€‚ç”¨åœºæ™¯                   |
| --------------- | -------------- | -------------- | -------------------------- |
| `command &`     | âŒ              | è¾“å‡ºåˆ°å½“å‰ç»ˆç«¯ | çŸ­æ—¶ä¸´æ—¶ä»»åŠ¡               |
| `nohup ... &`   | âœ…              | éœ€é‡å®šå‘åˆ°æ–‡ä»¶ | æ— äº¤äº’çš„é•¿æœŸä»»åŠ¡           |
| `screen`/`tmux` | âœ…              | ä¼šè¯å†…æŸ¥çœ‹     | éœ€é‡æ–°è¿æ¥çš„äº¤äº’å¼ä»»åŠ¡     |
| `systemd`       | âœ…              | ç³»ç»Ÿæ—¥å¿—é›†æˆ   | ç”Ÿäº§ç¯å¢ƒæœåŠ¡ã€å¼€æœºè‡ªå¯éœ€æ±‚ |
> **æœ€ä½³å®è·µ**ï¼š
>
> - ç®€å•ä»»åŠ¡ â†’ `nohup command > log 2>&1 &`
> - äº¤äº’è°ƒè¯• â†’ `tmux new -s session`
> - ç”Ÿäº§æœåŠ¡ â†’ `systemd` æœåŠ¡é…ç½®[1,7,10](@ref)ã€‚
æŒæ¡è¿™äº›æ–¹æ³•ï¼Œå¯çµæ´»åº”å¯¹ä»å¼€å‘è°ƒè¯•åˆ°ç”Ÿäº§éƒ¨ç½²çš„å„ç§åå°ä»»åŠ¡éœ€æ±‚ï¼Œç¡®ä¿å…³é”®è¿›ç¨‹ç¨³å®šè¿è¡Œ ğŸš€ã€‚
## nohup

`nohup`ï¼ˆNo Hang Upï¼‰æ˜¯ Linux/Unix ç³»ç»Ÿçš„æ ¸å¿ƒå‘½ä»¤ï¼Œç”¨äº**åœ¨ç”¨æˆ·é€€å‡ºç»ˆç«¯æˆ–æ–­å¼€è¿æ¥åä»ä¿æŒè¿›ç¨‹è¿è¡Œ**ã€‚å®ƒé€šè¿‡å¿½ç•¥ `SIGHUP`ï¼ˆæŒ‚æ–­ä¿¡å·ï¼‰å®ç°æŒä¹…åŒ–ä»»åŠ¡æ‰§è¡Œï¼Œæ˜¯åå°ä½œä¸šç®¡ç†çš„å¿…å¤‡å·¥å…·ã€‚ä»¥ä¸‹ä»åŸç†åˆ°å®è·µå…¨é¢è§£æï¼š


------
### ğŸ”§ **æ ¸å¿ƒåŸç†ä¸ä½œç”¨**

1. **`SIGHUP` ä¿¡å·å¤„ç†**
   - ç»ˆç«¯å…³é—­æˆ–ç”¨æˆ·æ³¨é”€æ—¶ï¼Œç³»ç»Ÿä¼šå‘å…³è”è¿›ç¨‹å‘é€ `SIGHUP` ä¿¡å·ï¼Œé»˜è®¤ç»ˆæ­¢è¿›ç¨‹ã€‚
   - `nohup` **æ•è·å¹¶å¿½ç•¥ `SIGHUP` ä¿¡å·**ï¼Œä½¿è¿›ç¨‹è„±ç¦»ç»ˆç«¯æ§åˆ¶ç»§ç»­è¿è¡Œ[2,4,7](@ref)ã€‚
2. **è¾“å‡ºé‡å®šå‘æœºåˆ¶**
   - **é»˜è®¤è¡Œä¸º**ï¼šæ ‡å‡†è¾“å‡ºï¼ˆ`stdout`ï¼‰å’Œé”™è¯¯è¾“å‡ºï¼ˆ`stderr`ï¼‰é‡å®šå‘åˆ°å½“å‰ç›®å½•çš„ `nohup.out` æ–‡ä»¶ï¼ˆè‹¥ä¸å¯å†™åˆ™ä¿å­˜åˆ° `$HOME/nohup.out`ï¼‰[3,6,8](@ref)ã€‚
   - **è‡ªå®šä¹‰è¾“å‡º**ï¼šæ”¯æŒæ‰‹åŠ¨é‡å®šå‘ï¼ˆå¦‚ `> output.log 2>&1`ï¼‰[1,5](@ref)ã€‚


------
### âš™ï¸ **åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨**

#### **å‘½ä»¤æ ¼å¼**

```
nohup COMMAND [ARG...] [&]
```
- `&`ï¼šå°†å‘½ä»¤æ”¾å…¥åå°æ‰§è¡Œï¼ˆéå¿…éœ€ä½†å¸¸ç”¨ï¼‰[1,6](@ref)ã€‚
#### **å…¸å‹åœºæ™¯ç¤ºä¾‹**

1. 
   ç®€å•åå°ä»»åŠ¡
```
   nohup python3 app.py &  # è¾“å‡ºé»˜è®¤å†™å…¥ nohup.out
```
2. 
   è‡ªå®šä¹‰æ—¥å¿—è·¯å¾„
```
   nohup ./script.sh > script.log 2>&1 &  # åˆå¹¶ stdout/stderr åˆ° script.log
```
3. 
   ä¸¢å¼ƒæ‰€æœ‰è¾“å‡º
```
   nohup command > /dev/null 2>&1 &  # è¾“å‡ºå®šå‘åˆ°é»‘æ´æ–‡ä»¶[5,7](@ref)ã€‚
```


------
### ğŸš€ **è¿›é˜¶æŠ€å·§ä¸ä¼˜åŒ–**

1. **å®Œå…¨è„±ç¦»ç»ˆç«¯æ§åˆ¶**
   ä½¿ç”¨ `disown` ç¡®ä¿è¿›ç¨‹ä¸ Shell ä¼šè¯å½»åº•è§£ç»‘ï¼š
   ```
   nohup command > log 2>&1 &  # å…ˆå¯åŠ¨
   disown -h %1               # è„±ç¦»ä½œä¸šæ§åˆ¶ï¼ˆ%1 ä¸º jobs æ˜¾ç¤ºçš„ä½œä¸šå·ï¼‰[7,4](@ref)ã€‚
   ```
2. **ç®¡é“å‘½ä»¤ä¸å¤æ‚æ“ä½œ**
   éœ€é€šè¿‡ `sh -c` åŒ…è£¹å¤åˆå‘½ä»¤ï¼š
   ```
   nohup sh -c 'grep "ERROR" access.log | awk "{print \$1}" > ips.txt' > pipe.log 2>&1 &[7](@ref)ã€‚
   ```
3. **æ—¥å¿—è½®è½¬ï¼ˆé¿å… nohup.out è†¨èƒ€ï¼‰**
   - **æ‰‹åŠ¨æ¸…ç©º**ï¼š`echo "" > nohup.out`ï¼ˆä¿ç•™æ–‡ä»¶å¥æŸ„ï¼Œè¿›ç¨‹ä»å¯å†™å…¥ï¼‰[7](@ref)ã€‚
   - Logrotate é…ç½®ï¼š
     ```
     /path/to/nohup.out {
         daily
         rotate 7
         compress
         missingok
     }
     ```


------
### âš¡ï¸ **åº”ç”¨åœºæ™¯ä¸æ¡ˆä¾‹**

| **åœºæ™¯**           | **å‘½ä»¤ç¤ºä¾‹**                                             | **è¯´æ˜**                          |
| ------------------ | -------------------------------------------------------- | --------------------------------- |
| **SSH è¿œç¨‹ä»»åŠ¡**   | `nohup ./batch_job.sh > job.log &`                       | æ–­å¼€è¿æ¥åä»»åŠ¡æŒç»­è¿è¡Œ[2](@ref)ã€‚ |
| **å®æ—¶æ—¥å¿—ç›‘æ§**   | `nohup app & tail -f nohup.out`                          | å¯åŠ¨å tail è·Ÿè¸ªè¾“å‡º[7](@ref)ã€‚   |
| **æœåŠ¡å®ˆæŠ¤è¿›ç¨‹**   | `nohup java -jar server.jar > stdout.log 2> error.log &` | åˆ†ç¦»æ ‡å‡†/é”™è¯¯è¾“å‡º[5](@ref)ã€‚      |
| **èµ„æºå¯†é›†å‹ä»»åŠ¡** | `nohup make -j8 > build.log 2>&1 &`                      | åå°ç¼–è¯‘å¤§å‹é¡¹ç›®[6](@ref)ã€‚       |


------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è§£å†³**

1. **è¿›ç¨‹ä»è¢«ç»ˆæ­¢ï¼Ÿ**
   - **åŸå› **ï¼šç¨‹åºä¸»åŠ¨æ•è· `SIGHUP` æˆ–ç³»ç»Ÿèµ„æºä¸è¶³[4](@ref)ã€‚
   - **è§£å†³**ï¼šæ£€æŸ¥ç¨‹åºä¿¡å·å¤„ç†é€»è¾‘ï¼›ç›‘æ§èµ„æºï¼ˆ`top`/`htop`ï¼‰[4](@ref)ã€‚
2. **`nohup.out` æœªç”Ÿæˆï¼Ÿ**
   - **æƒé™é—®é¢˜**ï¼šå½“å‰ç›®å½•ä¸å¯å†™ â†’ é‡å®šå‘åˆ°æœ‰æƒé™çš„ç›®å½•ï¼ˆå¦‚ `>/tmp/nohup.out`ï¼‰[4,8](@ref)ã€‚
   - **æ— è¾“å‡º**ï¼šç¨‹åºæœªäº§ç”Ÿè¾“å‡º â†’ æ£€æŸ¥å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸ[4](@ref)ã€‚
3. **äº¤äº’å¼å‘½ä»¤æ”¯æŒ**
   - `nohup` é»˜è®¤éäº¤äº’ç¯å¢ƒï¼Œéœ€ä¾èµ– `expect` æˆ–æ”¹ç”¨ `tmux`/`screen`[1,7](@ref)ã€‚


------
### ğŸ”„ **ä¸æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”**

| **å·¥å…·**       | **ç‰¹ç‚¹**                                 | **é€‚ç”¨åœºæ™¯**                          |
| -------------- | ---------------------------------------- | ------------------------------------- |
| **`nohup`**    | è½»é‡çº§ï¼Œä»…å¿½ç•¥ `SIGHUP`                  | ç®€å•åå°ä»»åŠ¡ï¼ˆæ— äº¤äº’éœ€æ±‚ï¼‰[7](@ref)ã€‚ |
| **`tmux`**     | æ”¯æŒä¼šè¯å¤ç”¨ã€åˆ†å±ã€æ–­çº¿é‡è¿             | äº¤äº’å¼é•¿ä»»åŠ¡ï¼ˆå¦‚è¿ç»´è°ƒè¯•ï¼‰[7](@ref)ã€‚ |
| **`systemd`**  | å®Œæ•´æœåŠ¡ç®¡ç†ï¼ˆæ—¥å¿—ã€é‡å¯ç­–ç•¥ã€å¼€æœºè‡ªå¯ï¼‰ | ç”Ÿäº§ç¯å¢ƒå®ˆæŠ¤è¿›ç¨‹[7](@ref)ã€‚           |
| **`&` ä»…åå°** | ç»ˆç«¯å…³é—­å³ç»ˆæ­¢                           | ä¸´æ—¶çŸ­ä»»åŠ¡[6](@ref)ã€‚                 |
> ğŸ’¡ **é€‰æ‹©å»ºè®®**ï¼š
>
> - å•æ¬¡è„šæœ¬ â†’ `nohup`
> - äº¤äº’è°ƒè¯• â†’ `tmux`
> - ç³»ç»ŸæœåŠ¡ â†’ `systemd`


------
### ğŸ’ **æ€»ç»“ä¸æœ€ä½³å®è·µ**

- **æ ¸å¿ƒä»·å€¼**ï¼š`nohup` æ˜¯ Linux æŒä¹…åŒ–ä»»åŠ¡çš„**åŸºçŸ³å·¥å…·**ï¼Œé€šè¿‡ä¿¡å·å±è”½ + è¾“å‡ºé‡å®šå‘å®ç°â€œæ°¸ä¸æ‰çº¿â€[1,7](@ref)ã€‚
- å¿…çŸ¥æŠ€å·§ï¼š
  - **é‡å®šå‘è¾“å‡º**ï¼šå§‹ç»ˆæ˜¾å¼æŒ‡å®šæ—¥å¿—è·¯å¾„ï¼ˆé¿å… `nohup.out` å¤±æ§ï¼‰[5,8](@ref)ã€‚
  - **å½»åº•è„±ç¦»ç»ˆç«¯**ï¼š`nohup ... & + disown` ç»„åˆ[4,7](@ref)ã€‚
  - **è¿›ç¨‹ç®¡ç†**ï¼š`jobs -l` æŸ¥çœ‹ä½œä¸šï¼Œ`kill -9 PID` ç»ˆæ­¢ä»»åŠ¡[6,8](@ref)ã€‚
- **ç”Ÿäº§å»ºè®®**ï¼šå…³é”®æœåŠ¡æ”¹ç”¨ `systemd` ç®¡ç†ï¼ˆæ—¥å¿—é›†æˆã€è‡ªåŠ¨é‡å¯ï¼‰[7](@ref)ã€‚
> é€šè¿‡åˆç†ä½¿ç”¨ `nohup`ï¼Œå¯ç¡®ä¿æ•°æ®å¤‡ä»½ã€æ¨¡å‹è®­ç»ƒã€è¿œç¨‹éƒ¨ç½²ç­‰ä»»åŠ¡ç¨³å®šæ‰§è¡Œï¼Œå‘Šåˆ«ç»ˆç«¯ä¾èµ–ï¼ğŸš€
## SIGHUP

SIGHUPï¼ˆ**Signal Hang Up**ï¼‰æ˜¯ Linux/Unix ç³»ç»Ÿä¸­çš„ä¸€ç§**è¿›ç¨‹é—´é€šä¿¡ä¿¡å·**ï¼Œç¼–å·ä¸º `1`ã€‚å…¶æ ¸å¿ƒè®¾è®¡ç”¨äºå¤„ç†ç»ˆç«¯ä¼šè¯çš„ç»“æŸäº‹ä»¶ï¼Œä½†ç°ä»£åº”ç”¨ä¸­æ›´å¤šç”¨äº**åŠ¨æ€é‡è½½é…ç½®**æˆ–**ä¼˜é›…é‡å¯å®ˆæŠ¤è¿›ç¨‹**ã€‚ä»¥ä¸‹ä»åŸç†åˆ°å®è·µå…¨é¢è§£æï¼š


------
### âš™ï¸ **æ ¸å¿ƒåŸç†ä¸é»˜è®¤è¡Œä¸º**

1. **ä¿¡å·æ¥æº**
   - **ç»ˆç«¯æ–­å¼€**ï¼šå½“ç”¨æˆ·é€€å‡ºç»ˆç«¯ï¼ˆå¦‚ SSH æ–­å¼€ï¼‰æ—¶ï¼Œç³»ç»Ÿå‘è¯¥ä¼šè¯å…³è”çš„è¿›ç¨‹å‘é€ SIGHUP[6,7](@ref)ã€‚
   - **ä¼šè¯ç»ˆæ­¢**ï¼šè‹¥ä¼šè¯é¦–è¿›ç¨‹ï¼ˆå¦‚ `login shell`ï¼‰é€€å‡ºï¼ŒSIGHUP ä¼šè¢«å‘é€åˆ°å‰å°è¿›ç¨‹ç»„çš„æ‰€æœ‰è¿›ç¨‹[9](@ref)ã€‚
   - **å­¤å„¿è¿›ç¨‹ç»„**ï¼šè‹¥è¿›ç¨‹ç»„å› çˆ¶è¿›ç¨‹é€€å‡ºå˜ä¸ºå­¤å„¿ï¼Œä¸”ç»„å†…æœ‰è¿›ç¨‹å¤„äºåœæ­¢çŠ¶æ€ï¼Œä¹Ÿä¼šè§¦å‘ SIGHUP[9](@ref)ã€‚
2. **é»˜è®¤å¤„ç†**
   - **ç»ˆæ­¢è¿›ç¨‹**ï¼šé»˜è®¤è¡Œä¸ºæ˜¯ç«‹å³ç»ˆæ­¢æ¥æ”¶ä¿¡å·çš„è¿›ç¨‹[6,9](@ref)ã€‚
   - **ç»ˆç«¯å…³è”æ€§**ï¼šä»…å½±å“ä¸ç»ˆç«¯å…³è”çš„è¿›ç¨‹ï¼ˆå¦‚å‰å°ä»»åŠ¡ã€`&` æäº¤çš„åå°ä½œä¸šï¼‰ï¼Œå®ˆæŠ¤è¿›ç¨‹é€šå¸¸ä¸å—å½±å“[9](@ref)ã€‚


------
### ğŸ› ï¸ **å…¸å‹åº”ç”¨åœºæ™¯**

#### ğŸ”§ **å®ˆæŠ¤è¿›ç¨‹çƒ­æ›´æ–°é…ç½®**

- **Web æœåŠ¡å™¨**ï¼šå¦‚ Nginxã€Apache æ•è· SIGHUP åé‡è½½é…ç½®æ–‡ä»¶ï¼ˆ`nginx -s reload` åº•å±‚å³å‘é€ SIGHUPï¼‰[8,10](@ref)ã€‚
- è‡ªå®šä¹‰å®ˆæŠ¤è¿›ç¨‹ï¼šé€šè¿‡æ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°ï¼Œåœ¨æ”¶åˆ° SIGHUP æ—¶é‡æ–°è¯»å–é…ç½®ï¼š
  ```
  void sighup_handler(int sig) {
      reload_config(); // é‡è½½é…ç½®
  }
  signal(SIGHUP, sighup_handler); // æ³¨å†Œå¤„ç†å‡½æ•°[10](@ref)
  ```
#### ğŸ’» **ç»ˆç«¯æ–­å¼€åè¿›ç¨‹ç»´æŒ**

- **`nohup` å‘½ä»¤**ï¼š`nohup command &` ä½¿è¿›ç¨‹å¿½ç•¥ SIGHUPï¼Œç¡®ä¿ç»ˆç«¯å…³é—­åä»»åŠ¡ç»§ç»­è¿è¡Œ[9](@ref)ã€‚
- ä»£ç çº§å±è”½ï¼šåœ¨ç¨‹åºä¸­ä¸»åŠ¨å¿½ç•¥ SIGHUPï¼š
  ```
  signal(SIGHUP, SIG_IGN); // å¿½ç•¥ä¿¡å·[6](@ref)
  ```
#### âš¡ **è¿›ç¨‹ä¼˜é›…é‡å¯**

- **éƒ¨åˆ†æœåŠ¡é‡å¯**ï¼šå¦‚ Tomcat æ”¶åˆ° SIGHUP å¯èƒ½è§¦å‘å®‰å…¨é‡å¯ï¼ˆä¸ä¸­æ–­è¿æ¥ï¼‰[8](@ref)ã€‚
- **æ—¥å¿—è½®è½¬å·¥å…·**ï¼š`logrotate` åœ¨åˆ‡å‰²æ—¥å¿—åï¼Œé€šè¿‡ `kill -HUP` é€šçŸ¥ `syslogd` é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶[8](@ref)ã€‚


------
### âš ï¸ **å…³é”®æ³¨æ„äº‹é¡¹**

1. **ä¿¡å·å¯é æ€§é—®é¢˜**
   - SIGHUP æ˜¯**ä¸å¯é ä¿¡å·**ï¼ˆç¼–å· â‰¤31ï¼‰ï¼Œå¯èƒ½ä¸¢å¤±æˆ–åˆå¹¶ã€‚è‹¥éœ€å¯é ä¼ é€’ï¼Œå»ºè®®æ”¹ç”¨å®æ—¶ä¿¡å·ï¼ˆå¦‚ SIGRTMIN+1ï¼‰[7](@ref)ã€‚
2. **ä¿¡å·å¤„ç†å®‰å…¨è§„èŒƒ**
   - **é¿å…å¤æ‚æ“ä½œ**ï¼šä¿¡å·å¤„ç†å‡½æ•°ä¸­ä¸å¯è°ƒç”¨ `malloc()`ã€`printf()` ç­‰éå¼‚æ­¥å®‰å…¨å‡½æ•°ï¼Œå¦åˆ™å¯èƒ½å¼•å‘æ­»é”[10](@ref)ã€‚
   - **æ ‡å¿—ä½æ³•**ï¼šåœ¨å¤„ç†å‡½æ•°å†…ä»…è®¾ç½®å…¨å±€æ ‡å¿—ä½ï¼Œä¸»å¾ªç¯ä¸­æ£€æµ‹å¹¶æ‰§è¡Œå®é™…é€»è¾‘[10](@ref)ã€‚
3. **è¿›ç¨‹å…³è”æ€§é™åˆ¶**
   - **è„±ç¦»ç»ˆç«¯çš„è¿›ç¨‹**ï¼šå­¤å„¿è¿›ç¨‹ï¼ˆå¦‚åŒ `fork` åçš„å®ˆæŠ¤è¿›ç¨‹ï¼‰é»˜è®¤ä¸æ¥æ”¶ SIGHUP[9](@ref)ã€‚
   - **å¼ºåˆ¶ç»ˆæ­¢ä¿¡å·**ï¼šè‹¥è¿›ç¨‹æ— è§† SIGHUPï¼Œéœ€ç”¨ `SIGKILL (9)` å¼ºåˆ¶ç»ˆæ­¢ï¼ˆæ— æ³•è¢«æ•è·æˆ–å¿½ç•¥ï¼‰[7,8](@ref)ã€‚


------
### ğŸ’¡ **æ“ä½œå‘½ä»¤ç¤ºä¾‹**

| **åœºæ™¯**       | **å‘½ä»¤**              | **ä½œç”¨**                             |
| -------------- | --------------------- | ------------------------------------ |
| å‘é€ SIGHUP    | `kill -HUP <PID>`     | é€šçŸ¥è¿›ç¨‹é‡è½½é…ç½®[8](@ref)            |
| æŒ‰è¿›ç¨‹åå‘é€   | `pkill -HUP nginx`    | å‘æ‰€æœ‰ Nginx è¿›ç¨‹å‘ä¿¡å·[8](@ref)     |
| å¯åŠ¨é˜²ç»ˆæ­¢ä»»åŠ¡ | `nohup ./server.sh &` | ç»ˆç«¯æ–­å¼€åè¿›ç¨‹ç»§ç»­è¿è¡Œ[9](@ref)      |
| æŸ¥çœ‹ä¿¡å·ç¼–å·   | `kill -l`             | æ˜¾ç¤ºæ‰€æœ‰ä¿¡å·ï¼ˆSIGHUP ä¸º 1ï¼‰[7](@ref) |


------
### ğŸ”„ **ä¸ç›¸å…³ä¿¡å·å¯¹æ¯”**

| **ä¿¡å·**    | **ç¼–å·** | **ç”¨é€”**                     | **å¯å¦æ•è·** |
| ----------- | -------- | ---------------------------- | ------------ |
| **SIGHUP**  | 1        | ç»ˆç«¯æ–­å¼€/é‡è½½é…ç½®            | æ˜¯           |
| **SIGINT**  | 2        | é”®ç›˜ä¸­æ–­ï¼ˆCtrl+Cï¼‰           | æ˜¯           |
| **SIGTERM** | 15       | è¯·æ±‚è¿›ç¨‹æ­£å¸¸ç»ˆæ­¢ï¼ˆé»˜è®¤ä¿¡å·ï¼‰ | æ˜¯           |
| **SIGKILL** | 9        | å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹                 | **å¦**       |


------
### ğŸ’ **æ€»ç»“**

SIGHUP æ˜¯ Linux è¿›ç¨‹ç®¡ç†çš„**æ ¸å¿ƒä¿¡å·æœºåˆ¶**ä¹‹ä¸€ï¼Œæ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ï¼š
- **ç»ˆç«¯ç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†ä¼šè¯å…³è”è¿›ç¨‹ï¼Œé¿å…åƒµå°¸è¿›ç¨‹æ®‹ç•™[7,9](@ref)ã€‚
- **é›¶åœæœºæ›´æ–°**ï¼šå®ˆæŠ¤è¿›ç¨‹é€šè¿‡æ•è· SIGHUP å®ç°é…ç½®çƒ­é‡è½½ï¼Œä¿éšœæœåŠ¡è¿ç»­æ€§[8,10](@ref)ã€‚
- **ä»»åŠ¡æŒä¹…åŒ–**ï¼šç»“åˆ `nohup` æˆ–ä»£ç å±è”½ï¼Œç¡®ä¿åå°ä»»åŠ¡è„±ç¦»ç»ˆç«¯ä¾èµ–[9](@ref)ã€‚
> **è¿ç»´å»ºè®®**ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¼˜å…ˆé€šè¿‡ `systemd` ç®¡ç†æœåŠ¡ï¼ˆæ”¯æŒ `systemctl reload` ç­‰æ›´å¯æ§çš„é‡è½½æ–¹å¼ï¼‰ï¼Œå‡å°‘æ‰‹åŠ¨å‘é€ SIGHUP çš„é£é™©ã€‚
## jobs

`jobs` æ˜¯ Linux/Unix ç³»ç»Ÿä¸­ **Shell å†…ç½®çš„å‘½ä»¤**ï¼Œç”¨äºç®¡ç†å½“å‰ Shell ä¼šè¯ä¸­çš„åå°ä»»åŠ¡ï¼ˆä½œä¸šï¼‰ï¼Œæ”¯æŒæŸ¥çœ‹ã€æš‚åœã€æ¢å¤å’Œåˆ‡æ¢ä»»åŠ¡çŠ¶æ€ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŠŸèƒ½åˆ°å®è·µæŠ€å·§å…¨é¢è§£æï¼š


------
### ğŸ” **æ ¸å¿ƒåŠŸèƒ½ä¸åŸºç¡€åŸç†**

1. **ä½œä¸šï¼ˆJobï¼‰å®šä¹‰**
   - **åå°ä»»åŠ¡**ï¼šé€šè¿‡ `&` å¯åŠ¨çš„å‘½ä»¤ï¼ˆå¦‚ `sleep 10 &`ï¼‰ï¼Œä¸å ç”¨ç»ˆç«¯[4,9](@ref)ã€‚
   - **æŒ‚èµ·ä»»åŠ¡**ï¼šé€šè¿‡ `Ctrl+Z` æš‚åœå‰å°ä»»åŠ¡å¹¶æ”¾å…¥åå°ï¼ˆçŠ¶æ€ä¸º `Stopped`ï¼‰[9](@ref)ã€‚
   - **ä½œä¸š vs è¿›ç¨‹**ï¼šä¸€ä¸ªä½œä¸šå¯åŒ…å«å¤šä¸ªè¿›ç¨‹ï¼ˆå¦‚ç®¡é“å‘½ä»¤ `grep "error" log.txt | wc -l &`ï¼‰[6](@ref)ã€‚
2. **ä½œä¸šæ§åˆ¶æœºåˆ¶**
   - çŠ¶æ€ç®¡ç†ï¼š
     - `Running`ï¼šåå°è¿è¡Œä¸­ã€‚
     - `Stopped`ï¼šè¢«æš‚åœï¼ˆå¦‚ `Ctrl+Z` è§¦å‘ `SIGTSTP` ä¿¡å·ï¼‰[3,9](@ref)ã€‚
     - `Done`/`Terminated`ï¼šå·²å®Œæˆæˆ–è¢«ç»ˆæ­¢[7](@ref)ã€‚
   - **ä¼šè¯éš”ç¦»**ï¼š`jobs` ä»…æ˜¾ç¤º**å½“å‰ Shell å¯åŠ¨çš„ä»»åŠ¡**ï¼Œç»ˆç«¯å…³é—­åä»»åŠ¡ç»ˆæ­¢ï¼ˆé™¤éç»“åˆ `nohup`ï¼‰[4,8](@ref)ã€‚


------
### ğŸ“Š **å‘½ä»¤è¯­æ³•ä¸è¾“å‡ºè§£æ**

#### **åŸºç¡€è¯­æ³•**

```
jobs [é€‰é¡¹] [ä½œä¸šID]  # é€‰é¡¹ï¼š-lã€-pã€-rã€-sã€-n
```
#### **è¾“å‡ºæ ¼å¼ç¤ºä¾‹**

```
[1]  1423 Running    python script.py &
[2]- 1490 Stopped    vim file.txt
[3]+ 1505 Running    sleep 100
```
- å­—æ®µå«ä¹‰ï¼š
  - `[1]`ï¼šä½œä¸šå·ï¼ˆ`%1` ç”¨äº `fg`/`bg` æ“ä½œï¼‰ã€‚
  - `1423`ï¼šè¿›ç¨‹ PIDï¼ˆéœ€ `-l` é€‰é¡¹æ˜¾ç¤ºï¼‰[2,5](@ref)ã€‚
  - ```
    +
    ```
    /**
    ```
    - # è¿è¡Œå‰å°ä»»åŠ¡ï¼ˆå¦‚ pingï¼‰
    ```
    æ ‡è¯†**ï¼š
    - `+`ï¼š**å½“å‰ä½œä¸š**ï¼ˆæœ€è¿‘æ“ä½œçš„ä»»åŠ¡ï¼‰ã€‚
    - `-`ï¼š**å‰ä¸€ä½œä¸š**ï¼ˆæ¬¡è¿‘æ“ä½œçš„ä»»åŠ¡ï¼‰[6,9](@ref)ã€‚
  - `Stopped`ï¼šçŠ¶æ€ï¼ˆå¸¸è§å€¼åŒ…æ‹¬ `Running`ã€`Stopped (SIGTSTP)` ç­‰ï¼‰[1,3](@ref)ã€‚



------
### âš™ï¸ **å¸¸ç”¨é€‰é¡¹è¯¦è§£**

| **é€‰é¡¹** | **ä½œç”¨**                       | **ç¤ºä¾‹**              | **åœºæ™¯**                      |
| -------- | ------------------------------ | --------------------- | ----------------------------- |
| `-l`     | æ˜¾ç¤º PID å’Œè¯¦ç»†ä¿¡æ¯            | `jobs -l`             | è°ƒè¯•æ—¶å®šä½è¿›ç¨‹[3,7](@ref)     |
| `-p`     | ä»…è¾“å‡º PID                     | `jobs -p %1` â†’ `1423` | ç»“åˆ `kill` ç»ˆæ­¢ä»»åŠ¡[2](@ref) |
| `-r`     | ä»…æ˜¾ç¤ºè¿è¡Œä¸­çš„ä½œä¸š             | `jobs -r`             | ç›‘æ§æ´»è·ƒä»»åŠ¡                  |
| `-s`     | ä»…æ˜¾ç¤ºæš‚åœçš„ä½œä¸š               | `jobs -s`             | æ¢å¤æŒ‚èµ·ä»»åŠ¡å‰æ£€æŸ¥[5](@ref)   |
| `-n`     | æ˜¾ç¤ºè‡ªä¸Šæ¬¡æç¤ºåçŠ¶æ€å˜åŒ–çš„ä½œä¸š | `jobs -n`             | è¿½è¸ªæœ€æ–°çŠ¶æ€å˜æ›´[3](@ref)     |



------
### ğŸ› ï¸ **å…³é”®æ“ä½œä¸ç¤ºä¾‹**

#### **ä»»åŠ¡çŠ¶æ€åˆ‡æ¢**

- å‰å° â†’ åå°æš‚åœï¼š
  ```
  ping example.com
  # æŒ‰ Ctrl+Z â†’ æš‚åœå¹¶æ”¾å…¥åå°ï¼ˆçŠ¶æ€ Stoppedï¼‰
  ```
- æ¢å¤åå°ä»»åŠ¡ï¼š
  ```
  bg %1   # åå°ç»§ç»­è¿è¡Œä½œä¸š 1ï¼ˆçŠ¶æ€å˜ Runningï¼‰
  fg %2   # å°†ä½œä¸š 2 åˆ‡å›å‰å°[6,9](@ref)
  ```
#### **ç»ˆæ­¢ä»»åŠ¡**

```
kill %1          # ç»ˆæ­¢ä½œä¸š 1ï¼ˆé€šè¿‡ä½œä¸šå·ï¼‰
kill -9 1423     # é€šè¿‡ PID å¼ºåˆ¶ç»ˆæ­¢[2,4](@ref)
```
#### **ç»“åˆ `nohup` æŒä¹…åŒ–ä»»åŠ¡**

```
nohup python app.py > app.log 2>&1 &  # é€€å‡ºç»ˆç«¯åä»»åŠ¡ç»§ç»­è¿è¡Œ[8,9](@ref)
jobs -l                              # æŸ¥çœ‹å½“å‰ä¼šè¯ä»»åŠ¡ï¼ˆä½† nohup ä»»åŠ¡ä¸å—ç»ˆç«¯å…³é—­å½±å“ï¼‰
```



------
### âš ï¸ **æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜**

1. **ç»ˆç«¯éš”ç¦»æ€§**
   - `jobs` **ä»…ç®¡ç†å½“å‰ Shell çš„ä»»åŠ¡**ï¼Œæ–°å¼€ç»ˆç«¯æˆ– SSH é‡è¿åæ— æ³•æŸ¥çœ‹[4,9](@ref)ã€‚
   - **æ›¿ä»£æ–¹æ¡ˆ**ï¼šç³»ç»Ÿçº§ä»»åŠ¡ç”¨ `ps aux | grep å‘½ä»¤` æˆ– `pgrep` æŸ¥çœ‹[2](@ref)ã€‚
2. **ä½œä¸šå·é‡ç”¨é—®é¢˜**
   - ä½œä¸šå·åœ¨ Shell ä¼šè¯å†…å”¯ä¸€ï¼Œé€€å‡ºåå¤±æ•ˆã€‚é‡å¯ç»ˆç«¯æ—¶ï¼Œç›¸åŒä½œä¸šå·å¯èƒ½æŒ‡å‘æ–°ä»»åŠ¡[6](@ref)ã€‚
3. **è„šæœ¬ä¸­çš„é™åˆ¶**
   - éäº¤äº’å¼ Shellï¼ˆå¦‚è„šæœ¬ï¼‰é»˜è®¤ç¦ç”¨ä½œä¸šæ§åˆ¶ï¼Œéœ€æ˜¾å¼å¯ç”¨ï¼š
     ```
     #!/bin/bash
     set -m  # å¯ç”¨ä½œä¸šæ§åˆ¶
     command &
     jobs -l
     ```
4. **çŠ¶æ€åŒæ­¥å»¶è¿Ÿ**
   - ä»»åŠ¡ç»ˆæ­¢åï¼Œ`jobs` å¯èƒ½çŸ­æš‚æ˜¾ç¤º `Terminated`ï¼Œéšåè‡ªåŠ¨ç§»é™¤[1,7](@ref)ã€‚



------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒä»·å€¼**ï¼š`jobs` æ˜¯ Shell ä½œä¸šæ§åˆ¶çš„æ¢çº½ï¼Œå®ç°ä»»åŠ¡çŠ¶æ€è·Ÿè¸ªï¼ˆ`Running`/`Stopped`ï¼‰å’Œå¿«é€Ÿåˆ‡æ¢ï¼ˆ`fg`/`bg`ï¼‰ã€‚
- é«˜é˜¶æŠ€å·§ï¼š
  - ç”¨ `jobs -l` è·å– PID ç²¾ç»†ç®¡ç†è¿›ç¨‹[5,7](@ref)ã€‚
  - æŒä¹…åŒ–ä»»åŠ¡ç”¨ `nohup ... &` è„±ç¦»ç»ˆç«¯ä¾èµ–[8,9](@ref)ã€‚
  - å¤šä»»åŠ¡æ“ä½œæ—¶ï¼Œå…³æ³¨ `+`/`-` æ ‡è¯†çš„å½“å‰å’Œå‰ä¸€ä½œä¸š[6](@ref)ã€‚
- é€‚ç”¨è¾¹ç•Œï¼š
  - è½»é‡çº§ä»»åŠ¡ç®¡ç† â†’ `jobs` + `fg`/`bg`ã€‚
  - ç³»ç»ŸæœåŠ¡/å®ˆæŠ¤è¿›ç¨‹ â†’ `systemd` æˆ– `supervisord`ã€‚
> é€šè¿‡ç†Ÿç»ƒä½¿ç”¨ `jobs`ï¼Œå¯é«˜æ•ˆç®¡ç†åå°ä»»åŠ¡æµï¼Œé¿å…ç»ˆç«¯é˜»å¡ï¼Œå°¤å…¶é€‚åˆ**é•¿æ—¶é—´ä»»åŠ¡**ï¼ˆå¦‚ç¼–è¯‘ã€å¤‡ä»½ï¼‰ä¸**äº¤äº’å¼è°ƒè¯•**åœºæ™¯ğŸš€ã€‚
## SIGTSTP

SIGTSTPï¼ˆ**Signal Terminal Stop**ï¼‰æ˜¯ Linux/Unix ç³»ç»Ÿä¸­çš„ä¸€ç§**ä½œä¸šæ§åˆ¶ä¿¡å·**ï¼Œç”¨äºæš‚åœè¿›ç¨‹ä½†ä¸ç»ˆæ­¢å…¶æ‰§è¡Œã€‚ä»¥ä¸‹ä»æ ¸å¿ƒç‰¹æ€§åˆ°åº”ç”¨åœºæ™¯çš„å…¨é¢è§£æï¼š

------
### âš™ï¸ **æ ¸å¿ƒç‰¹æ€§**

1. **ä¿¡å·ç¼–å·ä¸è§¦å‘æ–¹å¼**
   - **ç¼–å·**ï¼šé€šå¸¸ä¸º `20`ï¼ˆå¯é€šè¿‡ `kill -l` æŸ¥çœ‹ï¼‰[1,3](@ref)ã€‚
   - **é»˜è®¤è§¦å‘**ï¼šç”¨æˆ·æŒ‰ä¸‹ **`Ctrl+Z`** ç»„åˆé”®æ—¶ï¼Œç»ˆç«¯é©±åŠ¨ç¨‹åºå‘å‰å°è¿›ç¨‹ç»„çš„æ‰€æœ‰è¿›ç¨‹å‘é€ SIGTSTP[9,11](@ref)ã€‚
   - **ç¼–ç¨‹è§¦å‘**ï¼šé€šè¿‡ `kill(pid, SIGTSTP)` å‘æŒ‡å®šè¿›ç¨‹å‘é€ä¿¡å·[2](@ref)ã€‚
2. **é»˜è®¤è¡Œä¸º**
   - **æš‚åœè¿›ç¨‹**ï¼šæ¥æ”¶åˆ° SIGTSTP çš„è¿›ç¨‹ä¼šç«‹å³åœæ­¢æ‰§è¡Œï¼Œè¿›å…¥ `Stopped` çŠ¶æ€ï¼Œä¿ç•™æ‰€æœ‰å†…å­˜å’Œèµ„æºçŠ¶æ€[1,6](@ref)ã€‚
   - **å¯æ¢å¤æ€§**ï¼šæš‚åœçš„è¿›ç¨‹å¯é€šè¿‡ `SIGCONT` ä¿¡å·ï¼ˆå¦‚ `fg` å‘½ä»¤æˆ– `kill -SIGCONT`ï¼‰æ¢å¤è¿è¡Œ[9,10](@ref)ã€‚

------
### âš–ï¸ **ä¸ç›¸å…³ä¿¡å·çš„åŒºåˆ«**

| **ä¿¡å·**    | **è¡Œä¸º**                 | **å¯å¦æ•è·/å¿½ç•¥** | **å…¸å‹è§¦å‘æ–¹å¼**       |
| ----------- | ------------------------ | ----------------- | ---------------------- |
| **SIGTSTP** | æš‚åœè¿›ç¨‹ï¼ˆå¯æ¢å¤ï¼‰       | âœ…                 | `Ctrl+Z`               |
| **SIGINT**  | ç»ˆæ­¢è¿›ç¨‹ï¼ˆé»˜è®¤é€€å‡ºï¼‰     | âœ…                 | `Ctrl+C`               |
| **SIGSTOP** | å¼ºåˆ¶æš‚åœè¿›ç¨‹ï¼ˆä¸å¯æ¢å¤ï¼‰ | âŒ                 | `kill -SIGSTOP`        |
| **SIGCONT** | æ¢å¤è¢«æš‚åœçš„è¿›ç¨‹         | âœ…                 | `fg` å‘½ä»¤æˆ– `kill -18` |
- SIGTSTP vs SIGSTOPï¼š
  - SIGTSTP å…è®¸ç¨‹åºæ•è·å¹¶è‡ªå®šä¹‰å¤„ç†ï¼ˆå¦‚ä¿å­˜çŠ¶æ€ï¼‰ï¼Œè€Œ SIGSTOP **ä¸å¯æ•è·æˆ–å¿½ç•¥**[3,10](@ref)ã€‚
  - SIGTSTP æ˜¯äº¤äº’å¼æš‚åœï¼ˆç”¨æˆ·ä¸»åŠ¨è§¦å‘ï¼‰ï¼ŒSIGSTOP æ˜¯ç³»ç»Ÿçº§å¼ºåˆ¶æš‚åœ[3](@ref)ã€‚

------
### âš¡ï¸ **å†…æ ¸å¤„ç†æœºåˆ¶**

1. **ä¿¡å·ä¼ é€’è§„åˆ™**
   - **è¿›ç¨‹ç»„å¹¿æ’­**ï¼š`Ctrl+Z` ä¼šå‘å‰å°è¿›ç¨‹ç»„çš„æ‰€æœ‰è¿›ç¨‹å‘é€ SIGTSTP[9,11](@ref)ã€‚
   - **ä¿¡å·äº’æ–¥**ï¼šè‹¥è¿›ç¨‹æ”¶åˆ° SIGTSTPï¼Œå†…æ ¸ä¼šä¸¢å¼ƒå…¶æœªå†³çš„ SIGCONT ä¿¡å·ï¼›åä¹‹äº¦ç„¶[9,10](@ref)ã€‚
2. **çŠ¶æ€è½¬æ¢æµç¨‹**
   ```
   graph LR
   A[è¿›ç¨‹è¿è¡Œä¸­] -- Ctrl+Z --> B[è¿›ç¨‹æš‚åœ Stopped]
   B -- kill -SIGCONT --> A
   B -- fg å‘½ä»¤ --> A
   ```

------
### ğŸ› ï¸ **ç¼–ç¨‹å¤„ç†æ–¹å¼**

ç¨‹åºå¯æ•è· SIGTSTP å¹¶è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚ä¿å­˜çŠ¶æ€ï¼‰ï¼Œä½†æœ€ç»ˆä»éœ€æš‚åœè‡ªèº«ï¼š
```
#include <stdio.h>
#include <signal.h>
#include <unistd.h>

void sigtstp_handler(int sig) {
    printf("æ•è· SIGTSTPï¼Œå‡†å¤‡æš‚åœ...\n");
    // 1. æ¢å¤é»˜è®¤å¤„ç†
    signal(SIGTSTP, SIG_DFL);
    // 2. è§£é™¤ä¿¡å·é˜»å¡ï¼ˆé¿å…è‡ªé”ï¼‰
    sigset_t mask;
    sigemptyset(&mask);
    sigaddset(&mask, SIGTSTP);
    sigprocmask(SIG_UNBLOCK, &mask, NULL);
    // 3. å‘é€ SIGTSTP ä½¿è¿›ç¨‹æš‚åœ
    kill(getpid(), SIGTSTP);
    // 4. è¿›ç¨‹æ¢å¤åé‡ç½®å¤„ç†å™¨
    signal(SIGTSTP, sigtstp_handler);
    printf("è¿›ç¨‹å·²æ¢å¤\n");
}
int main() {
    signal(SIGTSTP, sigtstp_handler);
    while(1) pause(); // ä¿æŒè¿è¡Œ
    return 0;
}
```
**å…³é”®æ­¥éª¤**ï¼š
1. **è‡ªå®šä¹‰å¤„ç†**ï¼šæ‰§è¡Œæ¸…ç†æˆ–çŠ¶æ€ä¿å­˜[6,8](@ref)ã€‚
2. **æ¢å¤é»˜è®¤è¡Œä¸º**ï¼šé¿å…å¾ªç¯æ•è·[9,10](@ref)ã€‚
3. **è‡ªæˆ‘å‘é€ä¿¡å·**ï¼šè§¦å‘ç³»ç»Ÿé»˜è®¤æš‚åœåŠ¨ä½œ[8,10](@ref)ã€‚

------
### ğŸ’» **åº”ç”¨åœºæ™¯**

1. 
   äº¤äº’å¼ç¨‹åºæš‚åœ
- æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚ Vimï¼‰æŒ‰ `Ctrl+Z` æš‚åœåè¿”å› Shellï¼Œæ¢å¤æ—¶å¯ç»§ç»­ç¼–è¾‘[1,11](@ref)ã€‚
2. 
   åå°ä»»åŠ¡ç®¡ç†
- Shell é€šè¿‡ SIGTSTP æš‚åœä½œä¸šï¼Œç»“åˆ `bg`/`fg` æ§åˆ¶ä»»åŠ¡å‰åå°åˆ‡æ¢[9,11](@ref)ã€‚
3. 
   æœåŠ¡è¿›ç¨‹è°ƒè¯•
- æš‚åœæœåŠ¡è¿›ç¨‹ï¼ˆå¦‚ Nginx Workerï¼‰ä»¥æ£€æŸ¥å†…å­˜çŠ¶æ€ï¼Œæ¢å¤åç»§ç»­æœåŠ¡[6](@ref)ã€‚

------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è§£å†³**

1. **è¿›ç¨‹æœªæš‚åœï¼Ÿ**
   - **åŸå› **ï¼šç¨‹åºè¦†ç›–äº†ä¿¡å·å¤„ç†å™¨ä½†æœªå‘é€ SIGTSTP è‡ªèº«[8](@ref)ã€‚
   - **è§£å†³**ï¼šç¡®ä¿å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ `kill(getpid(), SIGTSTP)`[9,10](@ref)ã€‚
2. **å­è¿›ç¨‹ä¿¡å·ä¼ é€’å¤±è´¥**
   - **æƒé™é—®é¢˜**ï¼šçˆ¶è¿›ç¨‹éœ€ä¸å­è¿›ç¨‹åŒå±ä¸€ä¸ªä¼šè¯ï¼ˆSessionï¼‰å’Œè¿›ç¨‹ç»„ï¼ˆPGIDï¼‰[2,7](@ref)ã€‚
   - ä»£ç ç¤ºä¾‹ï¼š
     ```
     pid_t child_pid = fork();
     if (child_pid == 0) { /* å­è¿›ç¨‹ */ }
     else { kill(child_pid, SIGTSTP); } // çˆ¶è¿›ç¨‹å‘é€
     ```
3. **è·¨å¹³å°å…¼å®¹æ€§**
   - **Windows ä¸æ”¯æŒ**ï¼šSIGTSTP æ˜¯ POSIX æ ‡å‡†ä¿¡å·ï¼ŒWindows éœ€ç”¨å…¶ä»–æœºåˆ¶æ¨¡æ‹Ÿ[4](@ref)ã€‚

------
### ğŸ’ **æ€»ç»“**

SIGTSTP æ˜¯ Linux ä½œä¸šæ§åˆ¶çš„**æ ¸å¿ƒä¿¡å·**ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äºï¼š
- **äº¤äº’æ§åˆ¶**ï¼šé€šè¿‡ `Ctrl+Z` å®ç°è¿›ç¨‹çµæ´»æš‚åœ/æ¢å¤ã€‚
- **çŠ¶æ€ä¿ç•™**ï¼šæš‚åœæ—¶ä¸é‡Šæ”¾èµ„æºï¼Œé€‚ç”¨äºè°ƒè¯•ä¸çŠ¶æ€ç»´æŠ¤[6,9](@ref)ã€‚
- **å¯ç¼–ç¨‹æ€§**ï¼šæ”¯æŒè‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼ˆå¦‚ä¿å­˜ä¸´æ—¶çŠ¶æ€ï¼‰[6,8](@ref)ã€‚
> **è¿ç»´å»ºè®®**ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé•¿æ—¶é—´æš‚åœçš„æœåŠ¡è¿›ç¨‹å¯èƒ½å¼•å‘è¶…æ—¶ï¼Œå»ºè®®ç”¨ `systemd` ç®¡ç†æœåŠ¡ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…æ‰‹åŠ¨ä¿¡å·æ“ä½œã€‚
## å¤šè¿›ç¨‹ job

åœ¨ Linux/Unix ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªä½œä¸šï¼ˆJobï¼‰å¯èƒ½åŒ…å«å¤šä¸ªè¿›ç¨‹çš„æƒ…å†µé€šå¸¸ä¸ Shell çš„ä»»åŠ¡ç®¡ç†æœºåˆ¶ã€å‘½ä»¤ç»„åˆæ–¹å¼ä»¥åŠç¨‹åºè‡ªèº«çš„å¹¶å‘è®¾è®¡æœ‰å…³ã€‚ä»¥ä¸‹æ˜¯å¸¸è§åœºæ™¯çš„åˆ†ç±»è¯´æ˜ï¼š

------
### âš™ï¸ **Shell å‘½ä»¤ç»„åˆä¸ç®¡é“æ“ä½œ**

1. **ç®¡é“ï¼ˆ`|`ï¼‰è¿æ¥å¤šä¸ªå‘½ä»¤**
   - å½“å¤šä¸ªå‘½ä»¤é€šè¿‡ç®¡é“ç¬¦ç»„åˆæ—¶ï¼ˆå¦‚ `cmd1 | cmd2 | cmd3`ï¼‰ï¼Œæ¯ä¸ªå‘½ä»¤ä¼šç‹¬ç«‹æˆä¸ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œä½†æ•´ä½“è¢«è§†ä¸º**åŒä¸€ä¸ªä½œä¸š**ï¼ˆJobï¼‰ã€‚
   - ç¤ºä¾‹ï¼š
     ```
     grep "error" /var/log/syslog | sort | uniq -c &
     ```
     æ­¤å‘½ä»¤å¯åŠ¨ä¸‰ä¸ªè¿›ç¨‹ï¼ˆ
     ```
     grep
     ```
     ã€
     ```
     sort
     ```
     ã€
     ```
     uniq
     ```
     ï¼‰ï¼Œä½†å…±äº«ä¸€ä¸ªä½œä¸š IDï¼ˆå¦‚
```
     [1] 12345
```
     ï¼‰ï¼Œå¯é€šè¿‡
```
     jobs -l
```
     æŸ¥çœ‹
     1,7
     ã€‚
2. **å‘½ä»¤åˆ—è¡¨ï¼ˆ`;`ã€`&&`ã€`||`ï¼‰**
   - ä½¿ç”¨åˆ†å· `;` æˆ–é€»è¾‘æ“ä½œç¬¦ï¼ˆå¦‚ `cmd1 && cmd2`ï¼‰æ—¶ï¼Œæ¯ä¸ªå‘½ä»¤æŒ‰åºæ‰§è¡Œå¹¶ç”Ÿæˆç‹¬ç«‹è¿›ç¨‹ï¼Œä½† Shell å°†å…¶è§†ä¸º**å•ä¸€ä½œä¸š**ã€‚
   - ç¤ºä¾‹ï¼š
     ```
     make clean && make all && make install &
     ```
     ç¼–è¯‘æµç¨‹çš„ä¸‰ä¸ªé˜¶æ®µåˆ†åˆ«ç”Ÿæˆå­è¿›ç¨‹ï¼Œä½†æ•´ä½“ä½œä¸ºåå°ä½œä¸šè¿è¡Œ
     3
     ã€‚



------
### ğŸ§© **å­ Shell ä¸å‘½ä»¤åˆ†ç»„**

1. **å­ Shell æ‰§è¡Œï¼ˆ`( )`ï¼‰**
   - æ‹¬å· `( )` ä¼šå¯åŠ¨å­ Shellï¼Œå†…éƒ¨æ‰€æœ‰å‘½ä»¤åœ¨ç‹¬ç«‹è¿›ç¨‹ä¸­è¿è¡Œï¼Œä½†æ•´ä½“å±äº**ä¸€ä¸ªä½œä¸š**ã€‚
   - ç¤ºä¾‹ï¼š
     ```
     (tar -czf backup.tar.gz /data; scp backup.tar.gz user@remote:/backup) &
     ```
     æ‰“åŒ…å’Œä¼ è¾“ä¸¤ä¸ªå‘½ä»¤åœ¨å­ Shell ä¸­å¹¶è¡Œï¼Œå…±äº«ä½œä¸š ID
     1,7
     ã€‚
2. **è¿›ç¨‹æ›¿æ¢ï¼ˆ`<()` æˆ– `>()`ï¼‰**
   - å¦‚ `diff <(sort file1) <(sort file2)`ï¼Œ`sort` å‘½ä»¤ä¼šç”Ÿæˆä¸´æ—¶è¿›ç¨‹ï¼Œä¸ `diff` å…±åŒæ„æˆä½œä¸š[7](@ref)ã€‚



------
### âš¡ï¸ **ç¨‹åºè‡ªèº«çš„å¹¶å‘è®¾è®¡**

1. **å¤šè¿›ç¨‹åº”ç”¨ç¨‹åº**
   - æŸäº›ç¨‹åºï¼ˆå¦‚ Nginxã€Apacheï¼‰å¯åŠ¨æ—¶ä¼š
     ä¸»åŠ¨åˆ›å»ºå¤šä¸ªå·¥ä½œè¿›ç¨‹
     ï¼ˆWorker Processesï¼‰ã€‚ä¾‹å¦‚ï¼š
     ```
     nginx -g "daemon off;" &
     ```
     ä¸»è¿›ç¨‹ï¼ˆMasterï¼‰ç®¡ç†å¤šä¸ªå·¥ä½œè¿›ç¨‹ï¼Œä½†æ•´ä¸ªæœåŠ¡è¢«è§†ä¸ºä¸€ä¸ªä½œä¸š
     4,6
     ã€‚
2. **å¹¶è¡Œè®¡ç®—ä»»åŠ¡**
   - ä½¿ç”¨
```
     xargs -P
```
æˆ–
```
     parallel
```
å·¥å…·æ—¶ï¼Œä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°å¤šä¸ªè¿›ç¨‹å¹¶è¡Œæ‰§è¡Œï¼š
     ```
     find . -name "*.log" | xargs -P 4 gzip &
     ```
     è¿™é‡Œ
```
     gzip
```
ä¼šå¯åŠ¨æœ€å¤š 4 ä¸ªå¹¶è¡Œè¿›ç¨‹ï¼Œå±äºåŒä¸€ä½œä¸š
     3,5
     ã€‚



------
### ğŸ“¦ **åå°ä»»åŠ¡ç»„ä¸åç¨‹**

1. **åä½œå¼åå°ä»»åŠ¡ç»„ï¼ˆ`{ }`ï¼‰**
   - èŠ±æ‹¬å·
```
     { }
```
å®šä¹‰å‘½ä»¤ç»„å¹¶åœ¨åå°è¿è¡Œï¼š
     ```
     { cmd1; cmd2; cmd3; } &
     ```
     ç»„å†…æ‰€æœ‰å‘½ä»¤ä½œä¸º
     å•ä¸€ä½œä¸š
     ï¼Œæ¯ä¸ªå‘½ä»¤ç”Ÿæˆç‹¬ç«‹è¿›ç¨‹
     7,8
     ã€‚
2. **Shell å†…ç½®åç¨‹ï¼ˆ`coproc`ï¼‰**
   - å¦‚ `coproc { cmd1; cmd2; }`ï¼Œåç¨‹å†…çš„å‘½ä»¤å¯èƒ½åˆ†å±ä¸åŒè¿›ç¨‹[8](@ref)ã€‚



------
### âš ï¸ **ç‰¹æ®Šä¿¡å·ä¸ä½œä¸šæ§åˆ¶çš„å½±å“**

- **ä½œä¸šæš‚åœä¸æ¢å¤**ï¼š
  å¯¹ä½œä¸šå‘é€ `SIGSTOP`ï¼ˆ`kill -19 %1`ï¼‰ä¼šæš‚åœå…¶**æ‰€æœ‰å­è¿›ç¨‹**ï¼›å‘é€ `SIGCONT`ï¼ˆ`kill -18 %1`ï¼‰åˆ™æ•´ä½“æ¢å¤[6,8](@ref)ã€‚
- **ä½œä¸šç»ˆæ­¢**ï¼š
  ä½¿ç”¨ `kill %1` ä¼šå‘ä½œä¸šå†…æ‰€æœ‰è¿›ç¨‹å‘é€ç»ˆæ­¢ä¿¡å·ï¼ˆé»˜è®¤ `SIGTERM`ï¼‰[6](@ref)ã€‚



------
### ğŸ’ **æ€»ç»“ï¼šJob ä¸å¤šè¿›ç¨‹çš„å…³ç³»**

| **åœºæ™¯**            | **è¿›ç¨‹å…³ç³»**              | **å…¸å‹ä¾‹å­**                     |
| ------------------- | ------------------------- | -------------------------------- |
| **ç®¡é“å‘½ä»¤**        | å¤šä¸ªè¿›ç¨‹ä¸²è”æ‰§è¡Œ          | `cat file | grep "text" | wc -l` |
| **å­ Shell/å‘½ä»¤ç»„** | å­è¿›ç¨‹ç»„ååŒå®Œæˆå¤æ‚ä»»åŠ¡  | `(make \&\& make test) \&`       |
| **å¤šè¿›ç¨‹åº”ç”¨ç¨‹åº**  | ä¸»è¿›ç¨‹æ´¾ç”Ÿå·¥ä½œè¿›ç¨‹        | Nginxã€Apache æœåŠ¡å¯åŠ¨           |
| **å¹¶è¡Œå·¥å…·**        | åŒæ—¶å¯åŠ¨å¤šä¸ªç›¸åŒ/ä¸åŒè¿›ç¨‹ | `xargs -P`ã€`parallel`           |
| **åå°ä»»åŠ¡ç»„**      | å¤šä¸ªç‹¬ç«‹å‘½ä»¤ä½œä¸ºæ•´ä½“ä½œä¸š  | `{ cmd1; cmd2; } \&`             |
> **å…³é”®ç‚¹**ï¼šä½œä¸šï¼ˆJobï¼‰æ˜¯ **Shell å±‚é¢çš„ä»»åŠ¡ç®¡ç†å•ä½**ï¼Œè€Œè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„æ‰§è¡Œå®ä½“ã€‚ä¸€ä¸ª Job åŒ…å«å¤šä¸ªè¿›ç¨‹çš„æ ¸å¿ƒåŸå› æ˜¯ï¼š
>
> - Shell å°†**é€»è¾‘å…³è”çš„è¿›ç¨‹**ç»‘å®šä¸ºç»Ÿä¸€ç®¡ç†å•å…ƒï¼›
> - ç¨‹åºè‡ªèº«è®¾è®¡éœ€è¦**å¹¶å‘æ‰§è¡Œ**ï¼ˆå¦‚æœåŠ¡å®ˆæŠ¤è¿›ç¨‹ï¼‰[1,4,7](@ref)ã€‚
## pipeline

ç®¡é“ç¬¦ `|` æ˜¯ Linux/Unix ç³»ç»Ÿä¸­çš„æ ¸å¿ƒç¬¦å·ï¼Œç”¨äºè¿æ¥å¤šä¸ªå‘½ä»¤ï¼Œå½¢æˆ**æ•°æ®æµæ°´çº¿ï¼ˆPipelineï¼‰**ï¼Œå®ç°é«˜æ•ˆçš„è¿›ç¨‹é—´åä½œã€‚ä»¥ä¸‹ä»åŸç†åˆ°å®è·µå…¨é¢è§£æï¼š



------
### âš™ï¸ **æ ¸å¿ƒåŸç†ä¸åŠŸèƒ½**

1. **æ•°æ®æµé‡å®šå‘**
   - **è¾“å…¥è¾“å‡ºä¸²è”**ï¼š`|` å°†å·¦ä¾§å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºï¼ˆ`stdout`ï¼‰é‡å®šå‘ä¸ºå³ä¾§å‘½ä»¤çš„æ ‡å‡†è¾“å…¥ï¼ˆ`stdin`ï¼‰ï¼Œå½¢æˆå•å‘æ•°æ®æµ[6,7](@ref)ã€‚
   - **åŒ¿åç®¡é“**ï¼šç³»ç»Ÿåœ¨å†…å­˜ä¸­åˆ›å»º**ä¸´æ—¶ç®¡é“æ–‡ä»¶**ï¼Œä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œæ•°æ®æµç»“æŸåè‡ªåŠ¨é”€æ¯[6](@ref)ã€‚
2. **è¿›ç¨‹åä½œæœºåˆ¶**
   - **å¹¶å‘æ‰§è¡Œ**ï¼šå·¦ä¾§å‘½ä»¤å¯åŠ¨åï¼Œå³ä¾§å‘½ä»¤ç«‹å³å¯åŠ¨ï¼Œä¸¤è€…å¹¶è¡Œè¿è¡Œã€‚
   - **ç¼“å†²æœºåˆ¶**ï¼šç³»ç»Ÿé»˜è®¤åˆ†é… 64KB ç¼“å†²åŒºï¼Œå·¦ä¾§è¾“å‡ºå¡«æ»¡ç¼“å†²åŒºåï¼Œå³ä¾§æ‰è¯»å–æ•°æ®ï¼Œé¿å…è¿›ç¨‹é˜»å¡[6](@ref)ã€‚



------
### ğŸ› ï¸ **åŸºç¡€è¯­æ³•ä¸ç¤ºä¾‹**

#### **å‘½ä»¤æ ¼å¼**

```
command1 | command2 [ | command3 ... ]
```
#### **å…¸å‹åœºæ™¯ç¤ºä¾‹**

1. **æ—¥å¿—è¿‡æ»¤ä¸ç»Ÿè®¡**
   ```
   grep "ERROR" /var/log/syslog | cut -d' ' -f3 | sort | uniq -c
   ```
   - `grep` è¿‡æ»¤å« â€œERRORâ€ çš„è¡Œ â†’ `cut` æå–ç¬¬3åˆ— â†’ `sort` æ’åº â†’ `uniq` è®¡æ•°[6](@ref)ã€‚
2. **è¿›ç¨‹ç›‘æ§**
   ```
   ps aux | grep nginx | awk '{print $2}'
   ```
   - åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹ â†’ è¿‡æ»¤ `nginx` è¿›ç¨‹ â†’ æå– PID[7](@ref)ã€‚
3. **å®æ—¶æ•°æ®æµå¤„ç†**
   ```
   tail -f access.log | awk '{print $1}' | sort | uniq -c
   ```
   - è·Ÿè¸ªæ—¥å¿—æ–°å¢ â†’ æå– IP â†’ æ’åºå¹¶ç»Ÿè®¡è®¿é—®é¢‘æ¬¡[6](@ref)ã€‚



------
### ğŸ”§ **æŠ€æœ¯å®ç°ç»†èŠ‚**

1. 
   åŒ¿åç®¡é“çš„åˆ›å»º
- **ç³»ç»Ÿè°ƒç”¨**ï¼šé€šè¿‡ `pipe()` åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼š`fd[0]`ï¼ˆè¯»ç«¯ï¼‰å’Œ `fd[1]`ï¼ˆå†™ç«¯ï¼‰ã€‚
   - é‡å®šå‘æµç¨‹ï¼š
     ```
     graph LR
     A[command1] -- stdout --> fd[1]
     fd[0] -- stdin --> B[command2]
     ```
2. 
   é”™è¯¯æµå¤„ç†
- é»˜è®¤ä¸é‡å®šå‘
```
     stderr
```
     ï¼Œéœ€æ˜¾å¼åˆå¹¶ï¼š
     ```
     command1 2>&1 | command2  # å°† stderr åˆå¹¶åˆ° stdout
     ```



------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è§£å†³**

| **é—®é¢˜**             | **åŸå› **                     | **è§£å†³æ–¹æ¡ˆ**                                     |
| -------------------- | ---------------------------- | ------------------------------------------------ |
| **ç®¡é“é˜»å¡**         | å³ä¾§å‘½ä»¤å¤„ç†æ…¢ï¼Œç¼“å†²åŒºæ»¡     | å¢å¤§ç¼“å†²åŒºï¼š`ulimit -p 131072`                   |
| **å¤§æ•°æ®ä¸¢å¤±**       | å·¦ä¾§è¾“å‡ºè¶…è¿‡ç¼“å†²åŒºå®¹é‡       | ç”¨ä¸´æ—¶æ–‡ä»¶è¿‡æ¸¡ï¼š`command1 > tmp; command2 < tmp` |
| **å‘½ä»¤ä¸æ”¯æŒ stdin** | å¦‚ `ls` ä¸æ¥å—ç®¡é“è¾“å…¥       | æ”¹ç”¨ `xargs`ï¼š`echo "file"                       |
| **æ€§èƒ½ç“¶é¢ˆ**         | å¤šçº§ç®¡é“å¯¼è‡´ CPU æˆ– I/O è¿‡è½½ | ç®€åŒ–å‘½ä»¤é“¾æˆ–ç”¨ Awk/Python è„šæœ¬æ›¿ä»£               |



------
### ğŸš€ **è¿›é˜¶æŠ€å·§**

1. **å‘½åç®¡é“ï¼ˆFIFOï¼‰**
   - åˆ›å»ºæŒä¹…åŒ–ç®¡é“ï¼Œå…è®¸å¤šè¿›ç¨‹é‡å¤è¯»å†™ï¼š
     ```
     mkfifo my_pipe
     command1 > my_pipe & command2 < my_pipe
     ```
2. **å¹¶è¡Œå¤„ç†ä¼˜åŒ–**
   - ç»“åˆ
```
     xargs -P
```
å®ç°å¤šè¿›ç¨‹å¹¶è¡Œï¼š
     ```
     find . -name "*.log" | xargs -P 4 gzip  # å¯åŠ¨4ä¸ªå¹¶è¡Œ gzip è¿›ç¨‹[7](@ref)
     ```
3. **ç®¡é“ä¸é‡å®šå‘ç»„åˆ**
   - è¾“å‡ºåˆ°æ–‡ä»¶çš„åŒæ—¶è¿›è¡Œè¿‡æ»¤ï¼š
     ```
     command1 | tee output.log | grep "pattern"
     ```



------
### ğŸ’¡ **ä¸æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”**

| **æ–¹æ³•**       | **é€‚ç”¨åœºæ™¯**       | **å±€é™æ€§**                         |
| -------------- | ------------------ | ---------------------------------- |
| **ç®¡é“ ` | `**                | å¿«é€Ÿæ•°æ®æµå¤„ç†ï¼ˆæ— éœ€å­˜å‚¨ä¸­é—´ç»“æœï¼‰ ||
| **é‡å®šå‘ `>`** | ä¿å­˜è¾“å‡ºåˆ°æ–‡ä»¶     | æ— æ³•ç›´æ¥è¿æ¥å¤šä¸ªå‘½ä»¤               |
| **ä¸´æ—¶æ–‡ä»¶**   | å¤§æ•°æ®é‡æˆ–å¤æ‚å¤„ç† | ç£ç›˜ I/O å¼€é”€å¤§ï¼Œéœ€æ‰‹åŠ¨æ¸…ç†        |
| **è¿›ç¨‹æ›¿æ¢**   | åŠ¨æ€ç”Ÿæˆè¾“å…¥æº     | è¯­æ³•å¤æ‚ï¼š`command2 <(command1)`   |



------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒä»·å€¼**ï¼š`|` æ˜¯ Linux å‘½ä»¤è¡Œç”Ÿäº§åŠ›çš„**åŸºçŸ³**ï¼Œé€šè¿‡è¿›ç¨‹åä½œå®ç°æ•°æ®æµé«˜æ•ˆè½¬åŒ–[6,7](@ref)ã€‚
- æœ€ä½³å®è·µï¼š
  - ç®€åŒ–ç®¡é“å±‚çº§ï¼ˆé¿å…è¶…è¿‡ 3 çº§ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨ Awk ç­‰å·¥å…·åˆå¹¶æ“ä½œã€‚
  - å¤§æ•°æ®åœºæ™¯æ”¹ç”¨å‘½åç®¡é“æˆ–ä¸´æ—¶æ–‡ä»¶ã€‚
  - è°ƒè¯•æ—¶ç”¨ `tee` ä¸­é—´æ£€æŸ¥ï¼š`command1 | tee debug.log | command2`ã€‚
> æŒæ¡ç®¡é“ç¬¦èƒ½å¤§å¹…æå‡è‡ªåŠ¨åŒ–ä»»åŠ¡æ•ˆç‡ï¼Œå°¤å…¶é€‚åˆ**æ—¥å¿—åˆ†æ**ã€**æ•°æ®æ¸…æ´—**åŠ**å®æ—¶ç›‘æ§**åœºæ™¯ã€‚
## é‡å®šå‘

Linux é‡å®šå‘æ˜¯ Shell çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡ä¿®æ”¹å‘½ä»¤çš„é»˜è®¤è¾“å…¥/è¾“å‡ºæµå‘ï¼ˆå¦‚é”®ç›˜ã€å±å¹•ï¼‰ï¼Œå®ç°æ•°æ®æµçš„çµæ´»æ§åˆ¶ã€‚å…¶æœ¬è´¨æ˜¯æ“ä½œ**æ–‡ä»¶æè¿°ç¬¦**ï¼ˆFile Descriptor, FDï¼‰ï¼Œå…¶ä¸­ `0`ï¼ˆstdinï¼‰ã€`1`ï¼ˆstdoutï¼‰ã€`2`ï¼ˆstderrï¼‰æ˜¯ç³»ç»Ÿé¢„å®šä¹‰çš„ä¸‰ç§æ ‡å‡†æ•°æ®æµ[1,4,5](@ref)ã€‚ä»¥ä¸‹ä»åŸºç¡€åˆ°è¿›é˜¶å…¨é¢è§£æï¼š



------
### âš™ï¸ **åŸºç¡€é‡å®šå‘æ“ä½œ**

#### **è¾“å‡ºé‡å®šå‘**

- è¦†ç›–å†™å…¥ï¼ˆ`>`ï¼‰
  å°†å‘½ä»¤çš„ 
  stdout
   è¦†ç›–å†™å…¥æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼š
  ```
  echo "Hello" > output.txt  # è¾“å‡º"Hello"åˆ°output.txtï¼ˆåŸå†…å®¹è¢«æ¸…ç©ºï¼‰[3,6](@ref)
  ```
- è¿½åŠ å†™å…¥ï¼ˆ`>>`ï¼‰
  å°† 
  stdout
   è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼š
  ```
  echo "World" >> output.txt  # åœ¨output.txtæœ«å°¾æ·»åŠ "World"[3,6](@ref)
  ```
#### **é”™è¯¯é‡å®šå‘ï¼ˆ`2>` / `2>>`ï¼‰**

å°† **stderr** é‡å®šå‘åˆ°æ–‡ä»¶ï¼ˆä¸å½±å“ stdoutï¼‰ï¼š
```
ls /invalid_path 2> error.log  # é”™è¯¯ä¿¡æ¯ä¿å­˜åˆ°error.log[3,9](@ref)
```
#### **è¾“å…¥é‡å®šå‘ï¼ˆ`<`ï¼‰**

å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå‘½ä»¤çš„ **stdin**ï¼š
```
sort < data.txt  # ä»data.txtè¯»å–æ•°æ®å¹¶æ’åº[3,5](@ref)
```
#### **åˆå¹¶è¾“å‡ºä¸é”™è¯¯æµ**

- 
  ```
  &>
  ```
  æˆ–
```
  2>&1
```
  å°† stdout å’Œ stderr åˆå¹¶åˆ°åŒä¸€æ–‡ä»¶ï¼š
  ```
  command &> all.log        # æ–°è¯­æ³•ï¼ˆæ¨èï¼‰
  command > all.log 2>&1    # ä¼ ç»Ÿå†™æ³•ï¼šå…ˆé‡å®šå‘ stdoutï¼Œå†å¤åˆ¶ stderr åˆ° stdout[1,7](@ref)
  ```
- ä¸¢å¼ƒè¾“å‡ºï¼ˆ`/dev/null`ï¼‰
  å±è”½ä¸å¿…è¦çš„ä¿¡æ¯ï¼š
  ```
  command > /dev/null 2>&1  # ä¸¢å¼ƒæ‰€æœ‰è¾“å‡º[3,7](@ref)
  ```



------
### ğŸ”§ **è¿›é˜¶æŠ€å·§**

#### **ç®¡é“ï¼ˆ`|`ï¼‰ä¸é‡å®šå‘çš„ç»„åˆ**

ç®¡é“ä¼ é€’ **stdout** ç»™ä¸‹ä¸€å‘½ä»¤ï¼Œå¸¸ä¸é‡å®šå‘é…åˆï¼š
```
cat access.log | grep "404" > errors.log  # è¿‡æ»¤æ—¥å¿—å¹¶ä¿å­˜ç»“æœ[9,10](@ref)
```
#### **å¤šå‘½ä»¤è¾“å…¥ï¼ˆ`<<` Here Documentï¼‰**

ä»è„šæœ¬å†…åµŒå…¥å¤šè¡Œæ–‡æœ¬ä½œä¸º stdinï¼š
```
cat << EOF
Line 1
Line 2
EOF  # è¾“å‡ºä¸¤è¡Œæ–‡æœ¬[1,6](@ref)
```
#### **è¯»å†™åˆ†ç¦»ï¼ˆ`tee`å‘½ä»¤ï¼‰**

åŒæ—¶è¾“å‡ºåˆ°å±å¹•å’Œæ–‡ä»¶ï¼š
```
ls /usr | tee dirs.txt | wc -l  # æ˜¾ç¤ºç›®å½•åˆ—è¡¨å¹¶ä¿å­˜ï¼ŒåŒæ—¶ç»Ÿè®¡è¡Œæ•°[3,6](@ref)
```
#### **è‡ªå®šä¹‰æ–‡ä»¶æè¿°ç¬¦ï¼ˆFD 3-8ï¼‰**

- åˆ›å»ºå¯è¯»å†™ FD
```
  exec 5<> file.txt  # æ‰“å¼€ FD5 è¯»å†™ file.txt
  echo "data" >&5    # å†™å…¥ FD5
  read line <&5      # ä» FD5 è¯»å–[5](@ref)
```
- å¤‡ä»½ä¸æ¢å¤ FD
```
  exec 3>&1          # å¤‡ä»½ stdout åˆ° FD3
  exec 1> log.txt    # é‡å®šå‘ stdout åˆ°æ–‡ä»¶
  echo "To log"      # å†™å…¥ log.txt
  exec 1>&3          # æ¢å¤ stdout[5,10](@ref)
```
#### **å…³é—­æ–‡ä»¶æè¿°ç¬¦**

é‡Šæ”¾ä¸å†ä½¿ç”¨çš„ FDï¼š
```
exec 5>&-  # å…³é—­ FD5[5](@ref)
```



------
### âš¡ï¸ **é‡å®šå‘åŸç†ï¼ˆå†…æ ¸çº§æ“ä½œï¼‰**

1. **æ–‡ä»¶æè¿°ç¬¦è¡¨**
   è¿›ç¨‹é€šè¿‡ FD è¡¨ç®¡ç†æ‰“å¼€çš„æ–‡ä»¶ï¼Œé»˜è®¤ `0`ã€`1`ã€`2` å¯¹åº” stdinã€stdoutã€stderr[4](@ref)ã€‚
2. 
   é‡å®šå‘åº•å±‚å®ç°
- **`dup2` ç³»ç»Ÿè°ƒç”¨**ï¼šå¤åˆ¶ FD å®ç°é‡å®šå‘ï¼ˆå¦‚ `dup2(fd, 1)` å°† stdout æŒ‡å‘æ–°æ–‡ä»¶ï¼‰[4](@ref)ã€‚
   - **å…³é—­é»˜è®¤ FD**ï¼šè‹¥å…³é—­ `1`ï¼ˆstdoutï¼‰ï¼Œæ–°æ‰“å¼€çš„æ–‡ä»¶è‡ªåŠ¨å ç”¨ FD1ï¼Œå®ç°éšå¼é‡å®šå‘[4](@ref)ã€‚
3. **ç®¡é“æœ¬è´¨**
   åŒ¿åç®¡é“ï¼ˆ`|`ï¼‰æ˜¯å†…å­˜ä¸­çš„ä¸´æ—¶æ–‡ä»¶ï¼Œå·¦ä¾§å‘½ä»¤å†™ `fd[1]`ï¼Œå³ä¾§å‘½ä»¤è¯» `fd[0]`[10](@ref)ã€‚



------
### ğŸ’¡ **åº”ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ**

| **åœºæ™¯**     | **å‘½ä»¤ç¤ºä¾‹**                                       | **ä½œç”¨**                          |
| ------------ | -------------------------------------------------- | --------------------------------- |
| **æ—¥å¿—è®°å½•** | `script.sh > app.log 2>&1 &`                       | åå°è¿è¡Œå¹¶è®°å½•æ‰€æœ‰è¾“å‡º            |
| **æ‰¹é‡å¤„ç†** | `while read line; do echo $line; done < list.txt`  | é€è¡Œå¤„ç†æ–‡ä»¶å†…å®¹                  |
| **é”™è¯¯éš”ç¦»** | `make 2> build_errors.txt`                         | åˆ†ç¦»ç¼–è¯‘é”™è¯¯ä¿¡æ¯                  |
| **æ•°æ®æ¸…æ´—** | `csvtool < raw.csv | awk '{print $1}' > clean.csv` | æå–æŒ‡å®šåˆ—å¹¶ä¿å­˜                  |
| **æƒé™ç»•è¿‡** | `sudo sh -c 'echo 1 > /sys/file'`                  | è§£å†³ sudo é‡å®šå‘æƒé™é—®é¢˜[7](@ref) |
> **æ•ˆç‡å¯¹æ¯”ï¼ˆé‡å®šå‘ vs ç®¡é“ï¼‰**ï¼š
>
> - **é‡å®šå‘**ï¼šé€‚åˆæ–‡ä»¶æ“ä½œï¼ˆç£ç›˜ I/O é«˜æ•ˆï¼‰[8](@ref)ã€‚
> - **ç®¡é“**ï¼šé€‚åˆé“¾å¼å¤„ç†ï¼ˆå†…å­˜æ“ä½œå¿«ï¼Œä½†å¤šå‘½ä»¤ä¸²è”å¯èƒ½æˆç“¶é¢ˆï¼‰[8,10](@ref)ã€‚
>   â€‹**æœ€ä½³å®è·µ**â€‹ï¼šå¤§æ–‡ä»¶å¤„ç†ä¼˜å…ˆç”¨é‡å®šå‘ï¼Œå¤æ‚æ•°æ®æµç”¨ç®¡é“ç»„åˆè¿‡æ»¤å™¨ï¼ˆå¦‚ `grep`ã€`awk`ï¼‰ã€‚



------
### âš ï¸ **å¸¸è§é—®é¢˜è§£å†³**

1. 
   æƒé™ä¸è¶³
```
   sudo sh -c 'echo "config" > /etc/file.conf'  # é€šè¿‡å­ shell ææƒ[7](@ref)
```
2. **è¯¯è¦†ç›–æ–‡ä»¶**
   ä½¿ç”¨ `set -o noclobber` ç¦æ­¢ `>` è¦†ç›–å·²æœ‰æ–‡ä»¶ã€‚
3. **ç®¡é“é˜»å¡**
   å¢å¤§ç®¡é“ç¼“å†²åŒºï¼š`ulimit -p 131072`ï¼ˆå•ä½ï¼šKBï¼‰[10](@ref)ã€‚



------
### ğŸ’ **æ€»ç»“**

Linux é‡å®šå‘çš„æ ¸å¿ƒæ˜¯**æ“æ§æ•°æ®æµ**ï¼ˆstdin/stdout/stderrï¼‰ï¼Œé€šè¿‡æ–‡ä»¶æè¿°ç¬¦å®ç°çµæ´»è½¬å‘ã€‚
- **åŸºç¡€**ï¼šæŒæ¡ `>`ã€`>>`ã€`<`ã€`2>`ã€`|` æ»¡è¶³æ—¥å¸¸éœ€æ±‚ã€‚
- **è¿›é˜¶**ï¼š`exec` ç®¡ç† FDã€`tee` åˆ†æµæ•°æ®ã€`&>` åˆå¹¶é”™è¯¯æµåº”å¯¹å¤æ‚åœºæ™¯ã€‚
- **æœ¬è´¨**ï¼šç†è§£ `dup2` å’Œ FD è¡¨ï¼Œè§£é”é«˜é˜¶ç³»ç»Ÿç¼–ç¨‹èƒ½åŠ›[4,10](@ref)ã€‚
> ç†Ÿç»ƒè¿ç”¨é‡å®šå‘å¯å¤§å¹…æå‡è¿ç»´æ•ˆç‡ï¼Œå°¤å…¶åœ¨**æ—¥å¿—åˆ†æ**ã€**æ‰¹å¤„ç†è„šæœ¬**åŠ**æœåŠ¡ç›‘æ§**ä¸­ä¸å¯æˆ–ç¼ºã€‚
## é€šé…ç¬¦

Linux é€šé…ç¬¦ï¼ˆWildcardsï¼‰æ˜¯ Shell æä¾›çš„ç‰¹æ®Šå­—ç¬¦ï¼Œç”¨äº**æ‰¹é‡åŒ¹é…æ–‡ä»¶åæˆ–è·¯å¾„å**ï¼Œæå¤§æå‡å‘½ä»¤è¡Œæ“ä½œæ•ˆç‡ã€‚ä»¥ä¸‹ä»åŸºç¡€ç±»å‹ã€é«˜çº§æŠ€å·§ã€åº”ç”¨åœºæ™¯åˆ°æ³¨æ„äº‹é¡¹è¿›è¡Œç³»ç»Ÿè¯¦è§£ï¼š



------
### ğŸ” **é€šé…ç¬¦åŸºç¡€ç±»å‹ä¸ç¤ºä¾‹**

#### **æ˜Ÿå· `*`**

- **åŠŸèƒ½**ï¼šåŒ¹é…**ä»»æ„æ•°é‡å­—ç¬¦**ï¼ˆåŒ…æ‹¬é›¶ä¸ªå­—ç¬¦ï¼‰ã€‚
- ç¤ºä¾‹ï¼š
  ```
  ls *.txt       # åˆ—å‡ºæ‰€æœ‰ .txt æ–‡ä»¶ [1,3](@ref)  
  rm temp_*      # åˆ é™¤æ‰€æœ‰ä»¥ "temp_" å¼€å¤´çš„æ–‡ä»¶ [1](@ref)  
  cp /var/log/*.log ~/backup/  # å¤åˆ¶æ—¥å¿—æ–‡ä»¶ [3](@ref)  
  ```
#### **é—®å· `?`**

- **åŠŸèƒ½**ï¼šåŒ¹é…**å•ä¸ªä»»æ„å­—ç¬¦**ï¼ˆå¿…é¡»å­˜åœ¨ä¸€ä¸ªå­—ç¬¦ï¼‰ã€‚
- ç¤ºä¾‹ï¼š
  ```
  ls file?.txt    # åŒ¹é… file1.txtã€fileA.txt [1,5](@ref)  
  mv doc_??.pdf archive/  # ç§»åŠ¨æ–‡ä»¶åå«ä¸¤ä¸ªå­—ç¬¦çš„ PDF [3](@ref)  
  ```
#### **æ–¹æ‹¬å· `[...]`**

- **åŠŸèƒ½**ï¼šåŒ¹é…æ‹¬å·å†…**æŒ‡å®šå­—ç¬¦é›†åˆ**ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚æ”¯æŒèŒƒå›´ï¼ˆå¦‚ `[a-z]`ï¼‰å’Œæ’é™¤ï¼ˆ`[!0-9]`ï¼‰ã€‚
- ç¤ºä¾‹ï¼š
  ```
  ls file[123].txt  # åŒ¹é… file1.txtã€file2.txtã€file3.txt [1](@ref)  
  ls *.[ch]         # åŒ¹é… .c æˆ– .h ç»“å°¾çš„æ–‡ä»¶ [2](@ref)  
  rm [!a-z]*.tmp    # åˆ é™¤éå°å†™å­—æ¯å¼€å¤´çš„ä¸´æ—¶æ–‡ä»¶ [4](@ref)  
  ```
#### **èŠ±æ‹¬å· `{...}`**

- **åŠŸèƒ½**ï¼š**ç”Ÿæˆç»„åˆæ¨¡å¼**ï¼ˆéä¼ ç»ŸåŒ¹é…ï¼‰ï¼Œç”¨äºæ‰¹é‡åˆ›å»ºã€é‡å‘½åæˆ–æ“ä½œæ–‡ä»¶ã€‚
- ç¤ºä¾‹ï¼š
  ```
  touch report_{2023,2024}.txt  # åˆ›å»º report_2023.txt å’Œ report_2024.txt [5](@ref)  
  mkdir -p /project/{src,log,backup}  # é€’å½’åˆ›å»ºå¤šç›®å½• [1,3](@ref)  
  ```



------
### âš¡ï¸ **é«˜çº§æŠ€å·§ä¸ç‰¹æ®Šç”¨æ³•**

#### **ç‰¹æ®Šå­—ç¬¦ç±»**

- ä½¿ç”¨
```
  [[:class:]]
```
åŒ¹é…å­—ç¬¦ç±»åˆ«ï¼ˆéœ€åœ¨
```
  []
```
å†…ï¼‰ï¼š
  ```
  ls *[[:digit:]]*  # åŒ¹é…å«æ•°å­—çš„æ–‡ä»¶å [6](@ref)  
  find . -name "*[[:upper:]]*"  # æŸ¥æ‰¾å«å¤§å†™å­—æ¯çš„æ–‡ä»¶ [6](@ref)  
  ```
#### **åŒæ˜Ÿå· `\**`ï¼ˆé€’å½’åŒ¹é…ï¼‰**

- **åŠŸèƒ½**ï¼šé€’å½’åŒ¹é…å­ç›®å½•ï¼ˆéœ€ Bash 4.0+ æ”¯æŒ `globstar` é€‰é¡¹ï¼‰ã€‚
- ç¤ºä¾‹ï¼š
  ```
  shopt -s globstar  # å¯ç”¨é€’å½’åŒ¹é…  
  ls **/*.conf       # åˆ—å‡ºæ‰€æœ‰å­ç›®å½•ä¸­çš„ .conf æ–‡ä»¶ [4](@ref)  
  ```
#### **è½¬ä¹‰ä¸å¼•å·å¤„ç†**

- **è½¬ä¹‰é€šé…ç¬¦**ï¼šä½¿ç”¨ `\` å–æ¶ˆç‰¹æ®Šå«ä¹‰ï¼ˆå¦‚ `ls \*.log` åŒ¹é…å­—é¢é‡ `*.log`ï¼‰[1,4](@ref)ã€‚
- å¼•å·å½±å“ï¼š
  ```
  echo "*.txt"   # è¾“å‡º *.txtï¼ˆåŒå¼•å·ä¸æ‰©å±•ï¼‰  
  echo *.txt     # è¾“å‡ºå®é™…æ–‡ä»¶åï¼ˆæ— å¼•å·æ‰©å±•ï¼‰[1](@ref)  
  ```
#### **ç»“åˆå‘½ä»¤ä½¿ç”¨**

| **å‘½ä»¤**    | **ç¤ºä¾‹**                                    | **ä½œç”¨**                                 |
| ----------- | ------------------------------------------- | ---------------------------------------- |
| **`find`**  | `find . -name "*.jpg" -size +1M`            | æŸ¥æ‰¾å¤§äº 1MB çš„ JPG æ–‡ä»¶ [3,5](@ref)     |
| **`grep`**  | `grep "error" *.log`                        | åœ¨æ‰€æœ‰ .log æ–‡ä»¶ä¸­æœç´¢ "error" [1](@ref) |
| **`tar`**   | `tar -czvf backup.tar.gz {file1,file2}.txt` | å‹ç¼©æŒ‡å®šæ–‡ä»¶ [3](@ref)                   |
| **`xargs`** | `find . -name "*.tmp"                       | xargs rm`                                |



------
### ğŸ› ï¸ **ç»å…¸åº”ç”¨åœºæ™¯**

#### **æ–‡ä»¶æ‰¹é‡æ“ä½œ**

- å¤åˆ¶/ç§»åŠ¨ï¼š
  ```
  cp *.jpg /media/photo_backup/  # å¤‡ä»½æ‰€æœ‰ JPG [3](@ref)  
  mv *.{old,bak} archive/        # ç§»åŠ¨ .old å’Œ .bak æ–‡ä»¶ [5](@ref)  
  ```
- åˆ é™¤ï¼š
  ```
  rm *.tmp   # åˆ é™¤æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰[3](@ref)  
  ```
#### **æ–‡æœ¬å¤„ç†ä¸è¿‡æ»¤**

- æ—¥å¿—åˆ†æï¼š
  ```
  grep "FAILED" access_*.log > errors.txt  # æå–é”™è¯¯æ—¥å¿— [1](@ref)  
  ```
- æ‰¹é‡é‡å‘½åï¼š
  ```
  for f in *.txt; do mv "$f" "${f%.txt}.bak"; done  # .txt æ”¹ä¸º .bak [5](@ref)  
  ```
#### **ç³»ç»Ÿç»´æŠ¤**

- æ¸…ç†æ—§æ–‡ä»¶ï¼š
  ```
  find /tmp -name "*.cache" -mtime +30 -delete  # åˆ é™¤ 30 å¤©å‰çš„ç¼“å­˜ [5](@ref)  
  ```
- æœåŠ¡ç®¡ç†ï¼š
  ```
  systemctl restart {nginx,mysql}  # é‡å¯å¤šä¸ªæœåŠ¡ [3](@ref)  
  ```



------
### âš ï¸ **æ³¨æ„äº‹é¡¹ä¸é¿å‘æŒ‡å—**

1. **éšè—æ–‡ä»¶ä¸åŒ¹é…**
   - é€šé…ç¬¦é»˜è®¤å¿½ç•¥ä»¥
```
     .
```
å¼€å¤´çš„æ–‡ä»¶ï¼ˆå¦‚
```
     .config
```
     ï¼‰ï¼Œéœ€æ˜¾å¼æŒ‡å®šï¼š
     ```
     ls .*  # åŒ¹é…éšè—æ–‡ä»¶ [1](@ref)  
     ```
2. **ç©ºåŒ¹é…é£é™©**
   - è‹¥é€šé…ç¬¦æœªåŒ¹é…åˆ°æ–‡ä»¶ï¼Œå‘½ä»¤å¯èƒ½æŠ¥é”™ï¼ˆå¦‚ `rm *.tmp` è‹¥æ— æ–‡ä»¶åˆ™æç¤º `No such file`ï¼‰ã€‚
   - è§£å†³æ–¹æ¡ˆï¼š
     ```
     shopt -s nullglob  # ç©ºåŒ¹é…è¿”å›ç©ºï¼ˆBash é€‰é¡¹ï¼‰  
     rm *.tmp 2>/dev/null  # å¿½ç•¥é”™è¯¯ [3](@ref)  
     ```
3. **åŒºåˆ†é€šé…ç¬¦ä¸æ­£åˆ™è¡¨è¾¾å¼**
   | **ç‰¹æ€§**     | **é€šé…ç¬¦**       | **æ­£åˆ™è¡¨è¾¾å¼**            |
   | ------------ | ---------------- | ------------------------- |
   | **ä½¿ç”¨åœºæ™¯** | æ–‡ä»¶ååŒ¹é…       | æ–‡æœ¬å†…å®¹åŒ¹é…              |
   | `*` å«ä¹‰     | ä»»æ„æ•°é‡å­—ç¬¦     | å‰ä¸€ä¸ªå­—ç¬¦é‡å¤ 0 æ¬¡æˆ–å¤šæ¬¡ |
   | `?` å«ä¹‰     | å•ä¸ªä»»æ„å­—ç¬¦     | å‰ä¸€ä¸ªå­—ç¬¦å‡ºç° 0 æˆ– 1 æ¬¡  |
   | **å¸¸ç”¨å‘½ä»¤** | `ls`, `cp`, `rm` | `grep`, `sed`, `awk`      |
4. **é¿å…è¯¯æ“ä½œ**
   - æ‰§è¡Œ
```
     rm
```
æˆ–
```
     mv
```
å‰å…ˆç”¨
```
     ls
```
é¢„è§ˆåŒ¹é…ç»“æœï¼š
     ```
     ls *.tmp  # ç¡®è®¤æ–‡ä»¶åˆ—è¡¨åå†åˆ é™¤  
     ```
   - ç”Ÿäº§ç¯å¢ƒæ…ç”¨ `rm -rf *`ï¼ˆå¯èƒ½è¯¯åˆ æ ¹ç›®å½•ï¼‰[3,6](@ref)ã€‚



------
### ğŸ’ **æ€»ç»“**

Linux é€šé…ç¬¦æ˜¯å‘½ä»¤è¡Œé«˜æ•ˆæ“ä½œçš„**æ ¸å¿ƒå·¥å…·**ï¼Œé€šè¿‡ `*`ã€`?`ã€`[]`ã€`{}` å®ç°çµæ´»çš„æ–‡ä»¶åŒ¹é…ï¼Œç»“åˆ `find`ã€`grep` ç­‰å‘½ä»¤å¯å¤„ç†å¤æ‚ä»»åŠ¡ã€‚å…³é”®è¦ç‚¹ï¼š
- **åŸºç¡€å››ä»¶å¥—**ï¼š`*`ï¼ˆä»»æ„å­—ç¬¦ï¼‰ã€`?`ï¼ˆå•å­—ç¬¦ï¼‰ã€`[]`ï¼ˆå­—ç¬¦é›†ï¼‰ã€`{}`ï¼ˆç»„åˆæ‰©å±•ï¼‰[1,3](@ref)ã€‚
- **å®‰å…¨ç¬¬ä¸€**ï¼šç©ºåŒ¹é…å¤„ç†ã€éšè—æ–‡ä»¶æ˜¾å¼åŒ¹é…ã€æ…ç”¨åˆ é™¤[3,6](@ref)ã€‚
- **è¿›é˜¶æŠ€å·§**ï¼šé€’å½’åŒ¹é…ï¼ˆ`**`ï¼‰ã€å­—ç¬¦ç±»ï¼ˆ`[[:digit:]]`ï¼‰ã€ä¸ `xargs` ç®¡é“åä½œ[4,5](@ref)ã€‚
> æŒæ¡é€šé…ç¬¦ï¼Œè®©æ‰¹é‡æ–‡ä»¶æ“ä½œä»ç¹çå˜ä¸ºä¼˜é›…ï¼ğŸš€
## grep

`grep`ï¼ˆGlobal Regular Expression Printï¼‰æ˜¯ Linux/Unix ä¸­**æ–‡æœ¬æœç´¢çš„æ ¸å¿ƒå·¥å…·**ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æˆ–å­—ç¬¦ä¸²åŒ¹é…æ–‡ä»¶å†…å®¹å¹¶è¾“å‡ºç»“æœã€‚ä»¥ä¸‹ä»åŸºç¡€åˆ°è¿›é˜¶å…¨é¢è§£æå…¶åŠŸèƒ½ã€ç”¨æ³•åŠåœºæ™¯ï¼š



------
### ğŸ” **æ ¸å¿ƒåŠŸèƒ½ä¸åŸºç¡€è¯­æ³•**

#### **æ ¸å¿ƒåŠŸèƒ½**

- **æ–‡æœ¬æœç´¢**ï¼šåœ¨æ–‡ä»¶æˆ–è¾“å…¥æµä¸­åŒ¹é…æŒ‡å®šæ¨¡å¼ï¼ˆå­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼‰[1,5](@ref)ã€‚
- **æ¨¡å¼è¿‡æ»¤**ï¼šæ”¯æŒæ­£å‘åŒ¹é…ï¼ˆæ˜¾ç¤ºåŒ¹é…è¡Œï¼‰å’Œåå‘åŒ¹é…ï¼ˆæ’é™¤åŒ¹é…è¡Œï¼‰[2,7](@ref)ã€‚
- **é€’å½’æ“ä½œ**ï¼šè·¨ç›®å½•å±‚çº§æœç´¢æ–‡ä»¶ï¼ˆ`-r`/`-R`ï¼‰[3,8](@ref)ã€‚
- **ä¸Šä¸‹æ–‡å±•ç¤º**ï¼šè¾“å‡ºåŒ¹é…è¡ŒåŠå…¶å‰åè‹¥å¹²è¡Œï¼ˆè°ƒè¯•æ—¥å¿—å¸¸ç”¨ï¼‰[2,6](@ref)ã€‚
#### **åŸºç¡€è¯­æ³•**

```
grep [é€‰é¡¹] "æ¨¡å¼" [æ–‡ä»¶/ç›®å½•...]
```
- **æ¨¡å¼**ï¼šæœç´¢å†…å®¹ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼ˆå»ºè®®ç”¨å•å¼•å·åŒ…è£¹ï¼Œé¿å… Shell è§£æç‰¹æ®Šå­—ç¬¦ï¼‰[4,10](@ref)ã€‚
- **æ–‡ä»¶**ï¼šå¯æŒ‡å®šå•ä¸ª/å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼ˆæœªæŒ‡å®šæ—¶ä»æ ‡å‡†è¾“å…¥è¯»å–ï¼‰[5](@ref)ã€‚



------
### âš™ï¸ **å¸¸ç”¨é€‰é¡¹è¯¦è§£**

| **é€‰é¡¹**           | **åŠŸèƒ½**                   | **ç¤ºä¾‹**                                                     |
| ------------------ | -------------------------- | ------------------------------------------------------------ |
| **`-i`**           | å¿½ç•¥å¤§å°å†™                 | `grep -i "error" log.txt` åŒ¹é… "Error"ã€"ERROR" ç­‰ [1,6](@ref) |
| **`-v`**           | åå‘åŒ¹é…ï¼ˆæ’é™¤åŒ¹é…è¡Œï¼‰     | `grep -v "debug" log.txt` æ˜¾ç¤ºä¸å« "debug" çš„è¡Œ [2,7](@ref)  |
| **`-n`**           | æ˜¾ç¤ºè¡Œå·                   | `grep -n "main" code.c` è¾“å‡ºè¡Œå·æ–¹ä¾¿å®šä½ [6,10](@ref)        |
| **`-c`**           | ç»Ÿè®¡åŒ¹é…è¡Œæ•°               | `grep -c "404" access.log` ç»Ÿè®¡ 404 é”™è¯¯æ¬¡æ•° [2,5](@ref)     |
| **`-r`/`-R`**      | é€’å½’æœç´¢ç›®å½•               | `grep -r "TODO" ~/project/` æœç´¢é¡¹ç›®ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ [3,8](@ref) |
| **`-w`**           | å…¨è¯åŒ¹é…                   | `grep -w "test" file.txt` åŒ¹é… "test" ä½†ä¸åŒ¹é… "testing" [7,10](@ref) |
| **`-A`/`-B`/`-C`** | æ˜¾ç¤ºä¸Šä¸‹æ–‡è¡Œ               | `grep -C 2 "crash" log.txt` æ˜¾ç¤ºåŒ¹é…è¡Œå‰åå„ 2 è¡Œ [2,8](@ref) |
| **`-o`**           | ä»…è¾“å‡ºåŒ¹é…éƒ¨åˆ†             | `grep -o "http://[^ ]*" log.txt` æå–æ‰€æœ‰ URL [4,8](@ref)    |
| **`-E`**           | å¯ç”¨æ‰©å±•æ­£åˆ™ï¼ˆåŒ `egrep`ï¼‰ | `grep -E "error|warn" log.txt` åŒ¹é… "error" æˆ– "warn" [3,10](@ref) |
| **`--color=auto`** | é«˜äº®åŒ¹é…å†…å®¹               | æ·»åŠ åˆ«å `alias grep='grep --color=auto'` æ°¸ä¹…ç”Ÿæ•ˆ [4,6](@ref) |



------
### ğŸ§© **æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨**

#### **åŸºç¡€æ­£åˆ™ï¼ˆBREï¼‰**

- **`.`**ï¼šåŒ¹é…ä»»æ„å•å­—ç¬¦ï¼ˆå¦‚ `a.c` â†’ "abc", "a1c")ã€‚
- **`^`/`$`**ï¼šåŒ¹é…è¡Œé¦–/è¡Œå°¾ï¼ˆå¦‚ `^start` åŒ¹é…è¡Œé¦–ä¸º "start" çš„è¡Œï¼‰ã€‚
- **`[]`**ï¼šå­—ç¬¦é›†åˆï¼ˆå¦‚ `[aeiou]` åŒ¹é…å…ƒéŸ³ï¼Œ`[^0-9]` åŒ¹é…éæ•°å­—ï¼‰[5,10](@ref)ã€‚
- **`*`**ï¼šå‰å­—ç¬¦é‡å¤ 0 æ¬¡æˆ–å¤šæ¬¡ï¼ˆå¦‚ `go*gle` â†’ "ggle", "google"ï¼‰ã€‚
- **`\{n,m\}`**ï¼šæŒ‡å®šé‡å¤æ¬¡æ•°ï¼ˆå¦‚ `a\{2,4\}` â†’ "aa", "aaa", "aaaa"ï¼‰[10](@ref)ã€‚
#### **æ‰©å±•æ­£åˆ™ï¼ˆEREï¼Œéœ€ `-E`ï¼‰**

- **`|`**ï¼šé€»è¾‘æˆ–ï¼ˆå¦‚ `error|warn`ï¼‰ã€‚
- **`+`**ï¼šå‰å­—ç¬¦é‡å¤ 1 æ¬¡æˆ–å¤šæ¬¡ï¼ˆå¦‚ `go+gle` â†’ "gogle", "google"ï¼‰ã€‚
- **`?`**ï¼šå‰å­—ç¬¦é‡å¤ 0 æˆ– 1 æ¬¡ï¼ˆå¦‚ `colou?r` â†’ "color", "colour"ï¼‰ã€‚
- **`()`**ï¼šåˆ†ç»„æ•è·ï¼ˆå¦‚ `(ab)+` â†’ "ab", "abab"ï¼‰[5,10](@ref)ã€‚
#### **å®æˆ˜ç¤ºä¾‹**

- åŒ¹é… IP åœ°å€ï¼š
  ```
  grep -Eo "([0-9]{1,3}\.){3}[0-9]{1,3}" log.txt
  ```
- åŒ¹é…é‚®ç®±ï¼š
  ```
  grep -Eo "[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" users.csv
  ```
- è¿‡æ»¤ç©ºè¡Œå’Œæ³¨é‡Šï¼š
  ```
  grep -v -E "^$|^#" config.conf  # æ’é™¤ç©ºè¡Œå’Œ # å¼€å¤´çš„è¡Œ
  ```



------
### âš¡ï¸ **é«˜çº§æŠ€å·§ä¸åœºæ™¯**

#### **å¤šå‘½ä»¤åä½œ**

- ç®¡é“ç»„åˆï¼š
  ```
  ps aux | grep "[j]ava"     # æŸ¥æ‰¾ Java è¿›ç¨‹ï¼ˆ[j] é¿å…åŒ¹é… grep è‡ªèº«ï¼‰
  tail -f app.log | grep --color "Exception"  # å®æ—¶ç›‘æ§å¼‚å¸¸
  ```
- **ç»“åˆ
```
  find
```
  **ï¼š
  ```
  find . -name "*.py" -exec grep -Hn "TODO" {} +  # æœç´¢ Python æ–‡ä»¶ä¸­çš„ TODO
  ```
- ä¸ `awk`/`sed` è”åŠ¨ï¼š
  ```
  grep "GET" access.log | awk '{print $1, $7}'   # æå– IP å’Œè¯·æ±‚è·¯å¾„
  grep "enable_feature=true" config.txt | sed 's/true/false/'  # æ›¿æ¢å€¼
  ```
#### **é€’å½’æœç´¢ä¼˜åŒ–**

- æ’é™¤ç‰¹å®šæ–‡ä»¶/ç›®å½•ï¼š
  ```
  grep -r "error" /var/log/ --exclude="*.tmp" --exclude-dir="cache"
  ```
- ä»…æœç´¢æ–‡æœ¬æ–‡ä»¶ï¼š
  ```
  grep -r --binary-files=text "pattern" /path  # è·³è¿‡äºŒè¿›åˆ¶æ–‡ä»¶
  ```
#### **æ€§èƒ½ä¸å®‰å…¨**

- **å¤§æ–‡ä»¶å¤„ç†**ï¼šä¼˜å…ˆç”¨ `grep` è¿‡æ»¤å†äº¤å…¶ä»–å‘½ä»¤å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º[8](@ref)ã€‚
- å‹ç¼©æ–‡ä»¶æœç´¢ï¼šæ— éœ€è§£å‹ï¼Œç›´æ¥ä½¿ç”¨
```
  zgrep
  zgrep "404" access.log.gz  # åœ¨å‹ç¼©æ–‡ä»¶ä¸­æœç´¢
```



------
### ğŸ› ï¸ **å…¸å‹åº”ç”¨åœºæ™¯**

1. **æ—¥å¿—åˆ†æ**
   - å®šä½é”™è¯¯ï¼š`grep -A 10 "NullPointerException" catalina.out`ï¼ˆæ˜¾ç¤ºå¼‚å¸¸å 10 è¡Œå †æ ˆï¼‰[2](@ref)ã€‚
   - ç»Ÿè®¡å¼‚å¸¸ï¼š`grep -c " 500 " access.log`ï¼ˆç»Ÿè®¡ 500 çŠ¶æ€ç æ¬¡æ•°ï¼‰[6](@ref)ã€‚
2. **ä»£ç æ’æŸ¥**
   - é€’å½’æœç´¢å‡½æ•°ï¼š`grep -rnw --include="*.c" "main" ./src/`[8](@ref)ã€‚
   - æŸ¥æ‰¾æœªå®Œæˆé¡¹ï¼š`grep -r "TODO" . --color`ã€‚
3. **æ•°æ®æ¸…æ´—**
   - æå–ç‰¹å®šåˆ—ï¼š`grep -E "^([^,]*,){2}success," data.csv`ï¼ˆCSV ä¸­ç¬¬ 3 åˆ—ä¸º "success" çš„è¡Œï¼‰[5](@ref)ã€‚
   - è¿‡æ»¤æ— æ•ˆæ•°æ®ï¼š`grep -v "N/A" dataset.txt > cleaned.txt`ã€‚
4. **ç³»ç»Ÿç›‘æ§**
   - æ£€æµ‹æœåŠ¡çŠ¶æ€ï¼š`systemctl status nginx | grep -q "active (running)" && echo "OK"`ï¼ˆé™é»˜æ¨¡å¼æ£€æŸ¥ï¼‰[10](@ref)ã€‚



------
### âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **ç©ºåŒ¹é…å¤„ç†**ï¼š
   - æœªåŒ¹é…æ—¶é»˜è®¤æŠ¥é”™ï¼Œå¯è®¾ `shopt -s nullglob` æˆ–å¿½ç•¥é”™è¯¯ï¼š`grep "pattern" * 2>/dev/null`[8](@ref)ã€‚
2. **æ­£åˆ™è½¬ä¹‰**ï¼š
   - BRE ä¸­ `(`, `|`, `+` ç­‰éœ€è½¬ä¹‰ï¼ˆå¦‚ `\(`ï¼‰ï¼ŒERE ä¸­æ— éœ€è½¬ä¹‰[10](@ref)ã€‚
3. **ç¬¦å·é“¾æ¥é£é™©**ï¼š
   - é€’å½’æ—¶ç”¨ `-R` æ›¿ä»£ `-r` é¿å…ç¬¦å·é“¾æ¥å¾ªç¯ï¼ˆéƒ¨åˆ†ç³»ç»Ÿå·®å¼‚ï¼‰[8](@ref)ã€‚
4. **ç”Ÿäº§ç¯å¢ƒç¦å¿Œ**ï¼š
   - é¿å…ç›´æ¥ä¿®æ”¹æºæ–‡ä»¶ï¼ˆå¦‚ç»“åˆ `sed -i` å‰åŠ¡å¿…å¤‡ä»½ï¼‰ã€‚



------
### ğŸ’ **æ€»ç»“**

`grep` æ˜¯ Linux æ–‡æœ¬å¤„ç†çš„**ç‘å£«å†›åˆ€**ï¼Œå…¶èƒ½åŠ›å¯æ€»ç»“ä¸ºï¼š
- **æœç´¢å››æ¿æ–§**ï¼š`-i`ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ã€`-v`ï¼ˆåå‘è¿‡æ»¤ï¼‰ã€`-r`ï¼ˆé€’å½’ï¼‰ã€`-n`ï¼ˆè¡Œå·å®šä½ï¼‰ã€‚
- **æ­£åˆ™ä¸¤æ¨¡å¼**ï¼š**BRE**ï¼ˆåŸºç¡€ï¼Œéœ€è½¬ä¹‰ï¼‰ä¸ **ERE**ï¼ˆæ‰©å±•ï¼Œ`-E` å¯ç”¨é€»è¾‘ç¬¦ä¸åˆ†ç»„ï¼‰[10](@ref)ã€‚
- **åä½œä¸‰å‰‘å®¢**ï¼šä¸ `find`ï¼ˆæ–‡ä»¶ç­›é€‰ï¼‰ã€`awk`ï¼ˆå­—æ®µæå–ï¼‰ã€`sed`ï¼ˆæ–‡æœ¬æ›¿æ¢ï¼‰æ— ç¼è”åŠ¨[8](@ref)ã€‚
> æœ€ä½³å®è·µï¼šé«˜é¢‘æ“ä½œå¯è®¾åˆ«åï¼ˆå¦‚ `alias grep='grep --color=auto'`ï¼‰ï¼Œå¤æ‚æ¨¡å¼å…ˆç”¨ `echo "text" | grep -E "pattern"` æµ‹è¯•å†å®æˆ˜ã€‚
## Shell Programming

Shell è„šæœ¬ç¼–ç¨‹ï¼ˆsh/Bashï¼‰æ˜¯ Linux/Unix ç³»ç»Ÿè‡ªåŠ¨åŒ–ä»»åŠ¡çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡ç¼–å†™æ–‡æœ¬æ–‡ä»¶ç»„åˆç³»ç»Ÿå‘½ä»¤ã€æ§åˆ¶ç»“æ„å’Œå˜é‡ï¼Œå®ç°é«˜æ•ˆçš„ç³»ç»Ÿç®¡ç†å’Œä»»åŠ¡æ‰¹å¤„ç†ã€‚ä»¥ä¸‹ä»åŸºç¡€åˆ°å®æˆ˜çš„ç³»ç»Ÿæ€§è§£æï¼š



------
### âš™ï¸ **åŸºç¡€æ¦‚å¿µä¸ç‰¹ç‚¹**

1. **æ ¸å¿ƒå®šä½**
   - **è§£é‡Šå‹è¯­è¨€**ï¼šé€è¡Œæ‰§è¡Œï¼Œæ— éœ€ç¼–è¯‘ï¼ˆå¯¹æ¯” C éœ€ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶ï¼‰[1,4](@ref)ã€‚
   - **å˜é‡å³å­—ç¬¦ä¸²**ï¼šæ‰€æœ‰å˜é‡é»˜è®¤ä¸ºå­—ç¬¦ä¸²ï¼Œæ— éœ€å£°æ˜ç±»å‹ï¼ˆå¦‚ `count=5` å®é™…å­˜å‚¨ä¸º "5"ï¼‰[1,4](@ref)ã€‚
   - **æ—  `main` å‡½æ•°**ï¼šè„šæœ¬ä»é¦–è¡Œå¯æ‰§è¡Œè¯­å¥å¼€å§‹è¿è¡Œ[1,9](@ref)ã€‚
2. **å…¸å‹ä¼˜åŠ¿**
   - **è‡ªåŠ¨åŒ–æ•ˆç‡**ï¼šæ‰¹é‡æ–‡ä»¶å¤„ç†ã€å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—æ¸…ç†ã€å¤‡ä»½ï¼‰[5,9](@ref)ã€‚
   - **è½»é‡åŒ–**ï¼šèµ„æºå ç”¨ä½ï¼Œé€‚åˆåµŒå…¥å¼ç³»ç»Ÿ[3,5](@ref)ã€‚
   - **è·¨å¹³å°å…¼å®¹**ï¼šæ”¯æŒ Unix/Linux/macOS[5](@ref)ã€‚



------
### ğŸ“œ **è„šæœ¬ç»“æ„ä¸æ‰§è¡Œ**

#### **åŸºæœ¬ç»“æ„**

  ```
#!/bin/bash           # Shebang è¡Œï¼šæŒ‡å®šè§£é‡Šå™¨ï¼ˆå¿…é¡»é¦–è¡Œï¼‰[6,9](@ref)
# æ³¨é‡Šï¼šä»¥ # å¼€å¤´[6](@ref)
echo "Hello, World!"  # å‘½ä»¤ï¼šè¾“å‡ºæ–‡æœ¬
  ```
- æ‰§è¡Œæƒé™ï¼š
```
  chmod +x script.sh  # æ·»åŠ å¯æ‰§è¡Œæƒé™[7,9](@ref)
  ./script.sh         # ç›´æ¥è¿è¡Œ
```
#### **æ‰§è¡Œæ–¹å¼å¯¹æ¯”**

| **æ–¹æ³•**                  | **æ‰§è¡Œç¯å¢ƒ** | **æƒé™è¦æ±‚** | **ç‰¹ç‚¹**                          |
| ------------------------- | ------------ | ------------ | --------------------------------- |
| `./script.sh`             | å­ Shell     | éœ€ `x` æƒé™  | ä¾èµ– Shebang æŒ‡å®šçš„è§£é‡Šå™¨         |
| `bash script.sh`          | å­ Shell     | ä»… `r` æƒé™  | æ˜¾å¼æŒ‡å®šè§£é‡Šå™¨                    |
| `. script.sh` æˆ– `source` | å½“å‰ Shell   | ä»… `r` æƒé™  | è„šæœ¬å˜é‡å½±å“å½“å‰ç»ˆç«¯ç¯å¢ƒ[8](@ref) |



------
### ğŸ§© **å˜é‡ä¸å‚æ•°å¤„ç†**

1. **å˜é‡å®šä¹‰ä¸å¼•ç”¨**
  ```
   name="Alice"         # èµ‹å€¼ï¼ˆç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼ï¼‰
   echo "$name"         # è¾“å‡ºï¼šAliceï¼ˆæ¨èåŒå¼•å·é˜²æ­¢ç©ºæ ¼æˆªæ–­ï¼‰[6,8](@ref)
   echo "${name} Smith" # èŠ±æ‹¬å·æ˜ç¡®å˜é‡è¾¹ç•Œ â†’ "Alice Smith"
  ```
2. **ç‰¹æ®Šå˜é‡**
   | **å˜é‡**  | **å«ä¹‰**       | **ç¤ºä¾‹**                              |
   | --------- | -------------- | ------------------------------------- |
   | `$0`      | è„šæœ¬åç§°       | `./backup.sh` â†’ "$0" ä¸º "./backup.sh" |
   | `$1`-`$9` | ä½ç½®å‚æ•°       | `./test.sh apple` â†’ `$1="apple"`      |
   | `$#`      | å‚æ•°ä¸ªæ•°       | `./test.sh a b` â†’ `$#=2`              |
   | `$?`      | ä¸Šæ¡å‘½ä»¤é€€å‡ºç  | `0` è¡¨ç¤ºæˆåŠŸ                          |
   | `$$`      | å½“å‰è¿›ç¨‹ PID   | ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼š`log_$$.txt`[8](@ref)   |
3. **å‚æ•°æ‰©å±•æŠ€å·§**
   ```
   echo "ç¬¬10ä¸ªå‚æ•°: ${10}"    # è¶…è¿‡9ä¸ªå‚æ•°éœ€ç”¨ `${}`[8](@ref)  
   for arg in "$@"; do         # å¾ªç¯å¤„ç†æ‰€æœ‰å‚æ•°ï¼ˆä¿ç•™ç©ºæ ¼ï¼‰  
     echo "[$arg]"  
   done  
   ```



------
### ğŸ”€ **æµç¨‹æ§åˆ¶**

#### **æ¡ä»¶åˆ¤æ–­ï¼ˆ`if`ï¼‰**

   ```
if [ -f "file.txt" ]; then     # æµ‹è¯•æ–‡ä»¶æ˜¯å¦å­˜åœ¨
  echo "æ–‡ä»¶å­˜åœ¨"  
elif [ "$var" -gt 10 ]; then   # æ•°å€¼æ¯”è¾ƒï¼ˆ-gt: å¤§äºï¼‰  
  echo "å¤§äº10"  
else  
  echo "å…¶ä»–æƒ…å†µ"  
fi  
   ```
- æµ‹è¯•ç±»å‹ï¼š
  - æ–‡ä»¶ï¼š`-f`ï¼ˆæ–‡ä»¶ï¼‰ã€`-d`ï¼ˆç›®å½•ï¼‰ã€`-x`ï¼ˆå¯æ‰§è¡Œï¼‰[8](@ref)ã€‚
  - å­—ç¬¦ä¸²ï¼š`[ "$str" = "hello" ]`ï¼ˆä¸¥æ ¼åŒ¹é…ï¼‰ã€‚
  - æ•°å€¼ï¼š`[ $num -le 5 ]`ï¼ˆ`-le`ï¼šå°äºç­‰äºï¼‰[6,9](@ref)ã€‚
#### **å¾ªç¯ç»“æ„**

- **
```
  for
```
å¾ªç¯**ï¼š
  ```
  for i in {1..5}; do         # éå†æ•°å­—åºåˆ—  
    echo "Number: $i"  
  done  
  ```
- **
  ```
  while
  ```
  å¾ªç¯**ï¼š
  ```
  while read line; do         # é€è¡Œè¯»å–æ–‡ä»¶  
    echo "Line: $line"  
  done < input.txt  
  ```
#### **`case` å¤šåˆ†æ”¯**

  ```
case "$OS" in  
  "Linux") echo "ä½¿ç”¨Linux" ;;  
  "MacOS") echo "ä½¿ç”¨Mac" ;;  
  *) echo "æœªçŸ¥ç³»ç»Ÿ" ;;        # é»˜è®¤åˆ†æ”¯  
esac  
  ```



------
### ğŸ§° **å‡½æ•°ä¸æ¨¡å—åŒ–**

```
# å®šä¹‰å‡½æ•°
backup_dir() {
  local src="$1"          # local å£°æ˜å±€éƒ¨å˜é‡[8](@ref)
  tar -czf "backup_$(date +%F).tar.gz" "$src"
  echo "å·²å¤‡ä»½: $src"
}
# è°ƒç”¨å‡½æ•°
backup_dir "/home/data"   # ä¼ é€’å‚æ•°
```
- **è¿”å›å€¼**ï¼šå‡½æ•°æœ€åä¸€æ¡å‘½ä»¤çš„é€€å‡ºç å³è¿”å›å€¼ï¼ˆæˆ–æ˜¾å¼ `return`ï¼‰[1](@ref)ã€‚



------
### âš¡ï¸ **å®æˆ˜åº”ç”¨**

#### **è‡ªåŠ¨åŒ–å¤‡ä»½è„šæœ¬**

```
#!/bin/bash
SRC="/var/www"                         # æºç›®å½•  
DEST="/backups"  
mkdir -p "$DEST"  
tar -czf "$DEST/backup_$(date +%Y%m%d).tar.gz" "$SRC"  
echo "å¤‡ä»½å®Œæˆ: $DEST/backup_$(date +%Y%m%d).tar.gz" >> /var/log/backup.log  
```
#### **ç”¨æˆ·è¾“å…¥å¤„ç†**

```
read -p "è¾“å…¥ç”¨æˆ·å: " username          # -p æ˜¾ç¤ºæç¤º  
read -s -p "è¾“å…¥å¯†ç : " password         # -s éšè—è¾“å…¥  
if [ "$username" = "admin" ]; then  
  echo "ç™»å½•æˆåŠŸ"  
else  
  echo "ç”¨æˆ·åé”™è¯¯"  
fi  
```



------
### ğŸ **è°ƒè¯•ä¸æœ€ä½³å®è·µ**

1. **è°ƒè¯•æŠ€å·§**
   - **è¾“å‡ºè¿½è¸ª**ï¼š`bash -x script.sh` æ˜¾ç¤ºæ¯æ¡å‘½ä»¤åŠç»“æœ[8](@ref)ã€‚
   - **é”™è¯¯ç»ˆæ­¢**ï¼š`set -e` é‡åˆ°é”™è¯¯ç«‹å³é€€å‡ºè„šæœ¬ã€‚
2. **å…³é”®å®è·µ**
   - **å¼•å·è§„åˆ™**ï¼šå˜é‡å§‹ç»ˆç”¨åŒå¼•å·åŒ…è£¹ï¼ˆé˜²ç©ºæ ¼æˆªæ–­ï¼‰[8](@ref)ã€‚
   - **å‘½ä»¤æ›¿æ¢**ï¼šä¼˜å…ˆ `$(cmd)` æ›¿ä»£åå¼•å· ``cmd``ï¼ˆæ”¯æŒåµŒå¥—ï¼‰ã€‚
   - å‚æ•°æ ¡éªŒï¼šè„šæœ¬å¼€å¤´æ£€æŸ¥å‚æ•°å’Œæ–‡ä»¶æ˜¯å¦å­˜åœ¨
     8
     ã€‚
```
     if [ $# -lt 1 ]; then  
       echo "ç”¨æ³•: $0 <æ–‡ä»¶>" >&2  # >&2 è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯  
       exit 1  
     fi  
```



------
### ğŸ’ **æ€»ç»“**

Shell è„šæœ¬çš„æ ¸å¿ƒä»·å€¼åœ¨äº**è‡ªåŠ¨åŒ–ç³»ç»Ÿç®¡ç†**ï¼ˆå¦‚å¤‡ä»½ã€ç›‘æ§ï¼‰å’Œ**å¿«é€ŸåŸå‹å¼€å‘**ã€‚å…¶ä¼˜åŠ¿åœ¨äºè¯­æ³•ç®€æ´ã€ä¸ç³»ç»Ÿå‘½ä»¤æ— ç¼é›†æˆï¼Œé€‚åˆå¤„ç†æ–‡ä»¶ã€è¿›ç¨‹å’Œæ–‡æœ¬æµã€‚
â€‹**å­¦ä¹ è·¯å¾„å»ºè®®**â€‹ï¼š
1ï¸âƒ£ æŒæ¡åŸºç¡€ç»“æ„ï¼ˆShebangã€å˜é‡ã€å‚æ•°ï¼‰ â†’
2ï¸âƒ£ ç†Ÿç»ƒæµç¨‹æ§åˆ¶ï¼ˆå¾ªç¯ã€æ¡ä»¶ï¼‰ â†’
3ï¸âƒ£ å®è·µå‡½æ•°å°è£…ä¸æ¨¡å—åŒ– â†’
4ï¸âƒ£ åº”ç”¨è‡³å®šæ—¶ä»»åŠ¡ï¼ˆ`cron`ï¼‰å’Œç³»ç»Ÿç®¡ç†åœºæ™¯[3,9](@ref)ã€‚
> é€šè¿‡ `man bash` æˆ–åœ¨çº¿èµ„æºï¼ˆå¦‚ [Advanced Bash-Scripting Guide](https://tldp.org/LDP/abs/html/)ï¼‰å¯æ·±å…¥æ¢ç´¢é«˜çº§ç‰¹æ€§ï¼ˆå¦‚æ•°ç»„ã€æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
## read

Shell è„šæœ¬ä¸­çš„ `read` å‘½ä»¤æ˜¯å¤„ç†ç”¨æˆ·è¾“å…¥å’Œæ–‡ä»¶è¯»å–çš„æ ¸å¿ƒå·¥å…·ï¼Œå®ƒå…è®¸è„šæœ¬ä»¥äº¤äº’æ–¹å¼æ¥æ”¶æ•°æ®å¹¶èµ‹å€¼ç»™å˜é‡æˆ–æ•°ç»„ã€‚ä»¥ä¸‹ä»åº•å±‚æœºåˆ¶åˆ°å®æˆ˜åº”ç”¨çš„ç»¼åˆè§£æï¼š



------
### âš™ï¸ **æ ¸å¿ƒåŠŸèƒ½ä¸è¯­æ³•**

#### **åŸºæœ¬è¯­æ³•**

```
read [é€‰é¡¹] [å˜é‡å]
```
- **å˜é‡å**ï¼šå­˜å‚¨è¾“å…¥å†…å®¹ï¼Œä¸æŒ‡å®šæ—¶é»˜è®¤å­˜å…¥ `REPLY` å˜é‡[7,8](@ref)ã€‚
- å¸¸ç”¨é€‰é¡¹ï¼š
  - `-p "æç¤ºæ–‡æœ¬"`ï¼šæ˜¾ç¤ºè¾“å…¥æç¤ºï¼ˆå¦‚ `read -p "ç”¨æˆ·åï¼š" user`ï¼‰[1,3](@ref)ã€‚
  - `-s`ï¼šé™é»˜æ¨¡å¼ï¼ˆéšè—è¾“å…¥å†…å®¹ï¼Œç”¨äºå¯†ç ï¼‰[1,6](@ref)ã€‚
  - `-t ç§’æ•°`ï¼šè¶…æ—¶è‡ªåŠ¨é€€å‡ºï¼ˆè¶…æ—¶è¿”å›éé›¶çŠ¶æ€ç ï¼‰[2,8](@ref)ã€‚
  - `-a æ•°ç»„å`ï¼šå°†è¾“å…¥æŒ‰ç©ºæ ¼åˆ†å‰²å­˜å…¥æ•°ç»„ï¼ˆå¦‚ `read -a fruits`ï¼‰[1,7](@ref)ã€‚
  - `-r`ï¼šç¦ç”¨åæ–œæ  `\` è½¬ä¹‰ï¼ˆä¿ç•™åŸå§‹è¾“å…¥ï¼‰[1,4](@ref)ã€‚
  - `-n å­—ç¬¦æ•°`ï¼šé™åˆ¶è¾“å…¥é•¿åº¦ï¼ˆè¾“å…¥æŒ‡å®šå­—ç¬¦æ•°åè‡ªåŠ¨ç»“æŸï¼‰[4,9](@ref)ã€‚
  - `-d åˆ†éš”ç¬¦`ï¼šè‡ªå®šä¹‰è¾“å…¥ç»“æŸç¬¦ï¼ˆé»˜è®¤æ¢è¡Œç¬¦ï¼‰[7,9](@ref)ã€‚
#### **åº•å±‚æœºåˆ¶**

- **è¾“å…¥æ¥æº**ï¼šé»˜è®¤ä»æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰è¯»å–ï¼Œä¹Ÿå¯é€šè¿‡é‡å®šå‘ï¼ˆ`< æ–‡ä»¶`ï¼‰æˆ–å¾ªç¯ä»æ–‡ä»¶è¯»å–[3,7](@ref)ã€‚
- **å­—æ®µåˆ†å‰²**ï¼šä¾èµ– `IFS`ï¼ˆInternal Field Separatorï¼‰å˜é‡ï¼Œé»˜è®¤ä»¥ç©ºæ ¼/Tab/æ¢è¡Œåˆ†å‰²è¾“å…¥[7,8](@ref)ã€‚
- **ç³»ç»Ÿè°ƒç”¨**ï¼šé€šè¿‡ `read()` ç³»ç»Ÿè°ƒç”¨é˜»å¡ç­‰å¾…è¾“å…¥ï¼Œæ•°æ®å­˜å‚¨åˆ°æŒ‡å®šå˜é‡[1,7](@ref)ã€‚



------
### ğŸ› ï¸ **å…¸å‹åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹**

#### **åŸºç¡€äº¤äº’**

- å•å˜é‡è¾“å…¥ï¼š
  ```
  read -p "è¾“å…¥å§“åï¼š" name
  echo "Hello, $name!"  # è¾“å‡ºï¼šHello, Alice!
  ```
- å¤šå˜é‡èµ‹å€¼ï¼š
  ```
  read -p "è¾“å…¥å§“åå’Œå¹´é¾„ï¼š" name age
  echo "$name ä»Šå¹´ $age å²"  # è¾“å…¥"Alice 30" â†’ Alice ä»Šå¹´ 30 å²[2,6](@ref)ã€‚
  ```
#### **å®‰å…¨è¾“å…¥ï¼ˆå¯†ç /æ•æ„Ÿä¿¡æ¯ï¼‰**

```
read -s -p "å¯†ç ï¼š" pass  # è¾“å…¥ä¸æ˜¾ç¤º
echo "å¯†ç é•¿åº¦ä¸º ${#pass}"  # è¾“å‡ºå¯†ç é•¿åº¦[3,6](@ref)ã€‚
```
#### **è¶…æ—¶ä¸é»˜è®¤å€¼å¤„ç†**

```
if read -t 5 -p "5ç§’å†…è¾“å…¥ï¼š" input; then
    echo "è¾“å…¥ï¼š$input"
else
    echo "è¶…æ—¶ï¼Œä½¿ç”¨é»˜è®¤å€¼"
    input="guest"
fi[2,8](@ref)ã€‚
```
#### **æ•°ç»„ä¸å¤æ‚è¾“å…¥**

```
read -a names -p "è¾“å…¥å¤šä¸ªåå­—ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š"
echo "ç¬¬ä¸€ä¸ªåå­—ï¼š${names[0]}"  # è¾“å…¥"Tom Jerry" â†’ è¾“å‡º Tom[1,9](@ref)ã€‚
```
#### **æ–‡ä»¶é€è¡Œå¤„ç†**

```
while read line; do
    echo "è¡Œå†…å®¹ï¼š$line"
done < log.txt  # è¯»å– log.txt æ¯ä¸€è¡Œ[3,7](@ref)ã€‚
```
#### **è‡ªå®šä¹‰åˆ†éš”ç¬¦**

```
IFS="," read -r city country  # ä»¥é€—å·åˆ†éš”è¾“å…¥
echo "åŸå¸‚ï¼š$city, å›½å®¶ï¼š$country"  # è¾“å…¥"Paris,France" â†’ åŸå¸‚ï¼šParis, å›½å®¶ï¼šFrance[7,9](@ref)ã€‚
```



------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸é¿å‘æŒ‡å—**

1. **å˜é‡è¦†ç›–**
   ä¸æŒ‡å®šå˜é‡æ—¶ï¼Œå¤šæ¬¡ `read` ä¼šè¦†ç›– `REPLY` å˜é‡ï¼Œå»ºè®®æ˜¾å¼å‘½åå˜é‡[7,8](@ref)ã€‚
2. **è¶…æ—¶å¤„ç†**
   `-t` è¶…æ—¶åè¿”å›éé›¶çŠ¶æ€ç ï¼Œéœ€ç”¨ `if` æˆ– `$?` æ£€æµ‹[2,8](@ref)ï¼š
   ```
   read -t 3 input || echo "è¶…æ—¶"
   ```
3. **ç©ºæ ¼ä¸ç‰¹æ®Šå­—ç¬¦**
   - è¾“å…¥å«ç©ºæ ¼æ—¶ï¼Œæœªç”¨å¼•å·åŒ…è£¹çš„å˜é‡ä¼šåˆ†å‰²ï¼ˆå¦‚ `echo $input` å¯èƒ½è¾“å‡ºå¤šä¸ªå•è¯ï¼‰ã€‚
   - ä½¿ç”¨ `-r` é¿å…åæ–œæ è½¬ä¹‰ï¼ˆå¦‚è·¯å¾„ `C:\test` è¢«è¯¯è§£æï¼‰[4,7](@ref)ã€‚
4. **æ–‡ä»¶è¯»å–ç»ˆæ­¢**
   æ–‡ä»¶æœ«å°¾ `read` è¿”å›éé›¶çŠ¶æ€ç ï¼Œå¾ªç¯éœ€æ£€æµ‹é€€å‡ºæ¡ä»¶ï¼š
   ```
   while read line; do ... done < file || true  # å¿½ç•¥é€€å‡ºçŠ¶æ€[3](@ref)ã€‚
   ```



------
### ğŸ’¡ **é«˜é˜¶æŠ€å·§**

#### **IFS åŠ¨æ€å®šåˆ¶**

ä¸´æ—¶ä¿®æ”¹ `IFS` è§£æå¤æ‚æ ¼å¼ï¼ˆå¦‚ CSVï¼‰ï¼š
```
OLD_IFS="$IFS"; IFS=":"
read user pass uid  # æŒ‰å†’å·åˆ†å‰²è¾“å…¥
IFS="$OLD_IFS"[7](@ref)ã€‚
```
#### **ç»“åˆ Here String**

ç›´æ¥è§£æå­—ç¬¦ä¸²è€Œéæ–‡ä»¶ï¼š
```
read first second <<< "Hello World"
echo "$second $first"  # è¾“å‡ºï¼šWorld Hello[7](@ref)ã€‚
```
#### **èœå•äº¤äº’ç³»ç»Ÿ**

```
while true; do
    read -p "é€‰é¡¹ (1/2/3): " opt
    case $opt in
        1) echo "æ‰§è¡Œæ“ä½œ1";;
        2) break;;
        *) echo "æ— æ•ˆé€‰é¡¹";;
    esac
done[4,9](@ref)ã€‚
```



------
### ğŸ’ **æ€»ç»“ä¸åœºæ™¯æ¨è**

| **åœºæ™¯**       | **å‘½ä»¤ç¤ºä¾‹**                          | **å…³é”®é€‰é¡¹**  |
| -------------- | ------------------------------------- | ------------- |
| ç®€å•è¾“å…¥       | `read -p "å§“åï¼š" name`               | `-p`          |
| å¯†ç å¤„ç†       | `read -s -p "å¯†ç ï¼š" pass`            | `-s`          |
| è¶…æ—¶æ§åˆ¶       | `read -t 5 input`                     | `-t`          |
| æ‰¹é‡æ•°æ®å­˜å‚¨   | `read -a users`                       | `-a`          |
| æ–‡ä»¶é€è¡Œå¤„ç†   | `while read line; do ... done < file` | å¾ªç¯ + é‡å®šå‘ |
| å¤æ‚åˆ†éš”ç¬¦è§£æ | `IFS="," read city country`           | `IFS` å®šåˆ¶    |
> **æœ€ä½³å®è·µ**ï¼š
>
> - æ•æ„Ÿè¾“å…¥å¿…ç”¨ `-s` éšè—ï¼›
> - å¤šå˜é‡è¾“å…¥æ—¶æ˜¾å¼å‘½åå˜é‡ï¼›
> - æ–‡ä»¶å¤„ç†æ­é… `while read` é¿å…é—æ¼è¡Œï¼›
> - ç”¨ `-r` å¤„ç†è·¯å¾„æˆ–ç‰¹æ®Šå­—ç¬¦ã€‚
>   é€šè¿‡ `help read` æˆ– `man bash` æŸ¥çœ‹å®Œæ•´æ–‡æ¡£[7,8](@ref)ã€‚
## /dev/tty

`/dev/tty` æ˜¯ Linux ç³»ç»Ÿä¸­ä¸€ä¸ªç‰¹æ®Šçš„**å­—ç¬¦è®¾å¤‡æ–‡ä»¶**ï¼Œä»£è¡¨å½“å‰è¿›ç¨‹çš„**æ§åˆ¶ç»ˆç«¯ï¼ˆControlling Terminalï¼‰**ã€‚å®ƒåœ¨ç»ˆç«¯äº¤äº’ã€æƒé™ç®¡ç†å’Œç³»ç»Ÿè°ƒè¯•ä¸­æ‰®æ¼”æ ¸å¿ƒè§’è‰²ã€‚ä»¥ä¸‹ä»æ¦‚å¿µã€åŠŸèƒ½ã€åº”ç”¨åœºæ™¯åˆ°æŠ€æœ¯ç»†èŠ‚è¿›è¡Œå…¨é¢è§£æï¼š



------
### ğŸ” **åŸºç¡€æ¦‚å¿µä¸å®šä¹‰**

1. **æ ¸å¿ƒå®šä¹‰**
   - `/dev/tty` æ˜¯ä¸€ä¸ª**ç¬¦å·é“¾æ¥**ï¼ŒæŒ‡å‘å½“å‰ä¼šè¯å…³è”çš„å®é™…ç»ˆç«¯è®¾å¤‡ï¼ˆå¦‚ç‰©ç†ç»ˆç«¯ã€è™šæ‹Ÿç»ˆç«¯æˆ–ä¼ªç»ˆç«¯ï¼‰[1,3,6](@ref)ã€‚
   - **ä½œç”¨**ï¼šä¸ºè¿›ç¨‹æä¾›ä¸ç”¨æˆ·äº¤äº’çš„æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰ã€è¾“å‡ºï¼ˆstdoutï¼‰å’Œé”™è¯¯ï¼ˆstderrï¼‰æ¥å£ï¼Œæ— è®ºè¿›ç¨‹åœ¨ä½•ç§ç»ˆç«¯ç¯å¢ƒä¸­è¿è¡Œã€‚
2. **å†å²æ¸Šæº**
   - `tty` æºäº **Teletypewriterï¼ˆç”µä¼ æ‰“å­—æœºï¼‰**ï¼Œæ—©æœŸé€šè¿‡ä¸²è¡Œçº¿è¿æ¥ä¸»æœºè¿›è¡Œè¾“å…¥è¾“å‡ºã€‚ç°ä»£ Linux ä¸­æ¼”å˜ä¸ºç»ˆç«¯è®¾å¤‡çš„æŠ½è±¡å±‚[3,7](@ref)ã€‚



------
### âš™ï¸ **å·¥ä½œåŸç†ä¸ç‰¹æ€§**

1. **åŠ¨æ€ç»‘å®šæœºåˆ¶**
   - å½“ç”¨æˆ·å¯åŠ¨ä¸€ä¸ªä¼šè¯ï¼ˆå¦‚ç™»å½• Shell æˆ– SSH è¿æ¥ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨å°† `/dev/tty` å…³è”åˆ°è¯¥ä¼šè¯çš„å®é™…ç»ˆç«¯è®¾å¤‡ï¼ˆå¦‚ `/dev/tty1` æˆ– `/dev/pts/0`ï¼‰ã€‚
   - éªŒè¯å‘½ä»¤ï¼š
     ```
     $ tty  # æ˜¾ç¤ºå½“å‰ç»ˆç«¯è·¯å¾„ï¼Œå¦‚ /dev/pts/2
     ```
2. **è¾“å…¥è¾“å‡ºé‡å®šå‘**
   - å‘
```
     /dev/tty
```
å†™å…¥æ•°æ®ä¼šç›´æ¥æ˜¾ç¤ºåœ¨
     å½“å‰ç»ˆç«¯
     ï¼Œä¸å—æ ‡å‡†æµé‡å®šå‘å½±å“ï¼š
     ```
     echo "Hello" > /dev/tty  # å¿½ç•¥ç®¡é“æˆ–é‡å®šå‘ï¼Œç›´æ¥è¾“å‡ºåˆ°å½“å‰å±å¹•[2,6](@ref)
     ```
   - è¯»å– `/dev/tty` ä¼šæ•è·**å½“å‰ç»ˆç«¯çš„é”®ç›˜è¾“å…¥**ï¼Œé€‚ç”¨äºäº¤äº’å¼è„šæœ¬ï¼ˆå¦‚å¯†ç è¾“å…¥ï¼‰ã€‚
3. **æƒé™ä¸å®‰å…¨æ€§**
   - é»˜è®¤æƒé™ï¼š`crw-rw-rw-`ï¼ˆæ‰€æœ‰ç”¨æˆ·å¯è¯»å†™ï¼‰[7](@ref)ã€‚
   - å®‰å…¨åœºæ™¯ï¼šåœ¨è„šæœ¬ä¸­å¼ºåˆ¶äº¤äº’ï¼ˆå¦‚è¾“å…¥å¯†ç æ—¶ä¸å›æ˜¾ï¼‰ï¼š
     ```
     #!/bin/bash
     echo -n "Password: "
     stty -echo  # å…³é—­å›æ˜¾
     read password </dev/tty  # ä»å½“å‰ç»ˆç«¯è¯»å–
     stty echo   # æ¢å¤å›æ˜¾
     ```



------
### ğŸ§© **ä¸å…¶ä»–ç»ˆç«¯è®¾å¤‡çš„åŒºåˆ«**

| **è®¾å¤‡æ–‡ä»¶**     | **ä½œç”¨**                                    | **å…¸å‹è·¯å¾„**           | **ä½¿ç”¨åœºæ™¯**                       |
| ---------------- | ------------------------------------------- | ---------------------- | ---------------------------------- |
| **/dev/tty**     | å½“å‰è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ï¼ˆåŠ¨æ€ç»‘å®šï¼‰              | ç¬¦å·é“¾æ¥ï¼ˆå¦‚ â†’ pts/0ï¼‰ | è„šæœ¬äº¤äº’ã€é”™è¯¯è¾“å‡º                 |
| **/dev/tty0**    | å½“å‰æ¿€æ´»çš„è™šæ‹Ÿæ§åˆ¶å°ï¼ˆVCï¼‰åˆ«å              | /dev/tty0              | ç³»ç»Ÿæ¶ˆæ¯æ˜¾ç¤ºï¼ˆå¦‚å†…æ ¸æ—¥å¿—ï¼‰         |
| **/dev/tty1~63** | é™æ€è™šæ‹Ÿæ§åˆ¶å°ï¼ˆé€šè¿‡ Ctrl+Alt+F1~F12 åˆ‡æ¢ï¼‰ | /dev/ttyN              | æœ¬åœ°å¤šä¼šè¯ç®¡ç†                     |
| **/dev/pts/N**   | ä¼ªç»ˆç«¯ä»è®¾å¤‡ï¼ˆSSHã€å›¾å½¢ç»ˆç«¯æ¨¡æ‹Ÿå™¨åˆ›å»ºï¼‰     | /dev/pts/0             | è¿œç¨‹ç™»å½•ã€GNOME Terminal           |
| **/dev/console** | ç³»ç»Ÿæ§åˆ¶å°ï¼ˆå†…æ ¸çº§è¾“å‡ºï¼Œå¦‚å¯åŠ¨æ—¥å¿—ï¼‰        | /dev/console           | å•ç”¨æˆ·æ¨¡å¼ã€ç³»ç»Ÿå´©æºƒè°ƒè¯• [6](@ref) |
> ğŸ’¡ **å…³é”®åŒºåˆ«**ï¼š
>
> - `/dev/tty` **åŠ¨æ€ç»‘å®šä¼šè¯**ï¼Œè€Œ `/dev/tty0` å’Œ `/dev/tty1` æ˜¯**é™æ€è®¾å¤‡**ã€‚
> - å‘ `/dev/console` å†™å…¥éœ€ **root æƒé™**ï¼Œè€Œ `/dev/tty` å…è®¸æ™®é€šç”¨æˆ·æ“ä½œ[6](@ref)ã€‚



------
### âš¡ï¸ **æ ¸å¿ƒåº”ç”¨åœºæ™¯**

1. **äº¤äº’å¼è„šæœ¬è®¾è®¡**
   - ç¡®ä¿ç”¨æˆ·è¾“å…¥/è¾“å‡ºå§‹ç»ˆæŒ‡å‘å½“å‰ç»ˆç«¯ï¼Œé¿å…åå°è¿è¡Œæ—¶å¤±æ•ˆï¼š
     ```
     echo "Alert!" > /dev/tty  # å³ä½¿è„šæœ¬åœ¨åå°è¿è¡Œï¼Œä»æ˜¾ç¤ºåˆ°å‰å°ç»ˆç«¯[2](@ref)
     ```
2. **ç»ˆç«¯å‚æ•°é…ç½®**
   - ç»“åˆ
```
     stty
```
å‘½ä»¤åŠ¨æ€ä¿®æ”¹ç»ˆç«¯è¡Œä¸ºï¼ˆå¦‚å…³é—­å›æ˜¾ã€è®¾ç½®æ³¢ç‰¹ç‡ï¼‰ï¼š
     ```
     stty -F /dev/tty raw  # å°†å½“å‰ç»ˆç«¯è®¾ä¸ºåŸå§‹æ¨¡å¼ï¼ˆæ— ç¼“å†²ï¼‰
     ```
3. **åå°è¿›ç¨‹çš„ç»ˆç«¯äº¤äº’**
   - éœ€å‰å°äº¤äº’çš„åå°è¿›ç¨‹ï¼ˆå¦‚å¯†ç æç¤ºï¼‰ï¼Œé€šè¿‡ `/dev/tty` ç»•è¿‡æ ‡å‡†æµé™åˆ¶ã€‚
4. **æƒé™éš”ç¦»ä¸å¤šç”¨æˆ·ä¼šè¯**
   - æ¯ä¸ªç”¨æˆ·çš„ä¼šè¯ç‹¬ç«‹ç»‘å®š `/dev/tty`ï¼Œå®ç°è¾“å…¥è¾“å‡ºéš”ç¦»ï¼ˆå¦‚ SSH å¤šç”¨æˆ·ç™»å½•ï¼‰[5](@ref)ã€‚



------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è§£å†³**

1. **æƒé™é”™è¯¯ï¼ˆPermission Deniedï¼‰**
   - **åŸå› **ï¼šä¼šè¯æ— æ§åˆ¶ç»ˆç«¯ï¼ˆå¦‚ `cron` ä»»åŠ¡æˆ– `systemd` æœåŠ¡ï¼‰ã€‚
   - **è§£å†³**ï¼šé¿å…åœ¨æ— ç»ˆç«¯ç¯å¢ƒä¸­ä½¿ç”¨ `/dev/tty`ï¼›æ”¹ç”¨æ—¥å¿—æ–‡ä»¶æˆ– `syslog`[2](@ref)ã€‚
2. **è¾“å…¥é˜»å¡ï¼ˆHanging Processï¼‰**
   - **åŸå› **ï¼šè„šæœ¬å°è¯•ä» `/dev/tty` è¯»å–ï¼Œä½†ç»ˆç«¯æœªæ¿€æ´»ï¼ˆå¦‚ SSH æ–­å¼€åï¼‰ã€‚
   - è§£å†³ï¼šä½¿ç”¨
```
     nohup
```
æˆ–
```
     screen
```
æ‰˜ç®¡ä¼šè¯ï¼š
     ```
     nohup script.sh > output.log 2>&1 & 
     ```
3. **é‡å®šå‘å¤±æ•ˆ**
   - **ç°è±¡**ï¼š`echo "test" > /dev/tty` å¿½ç•¥ `>` é‡å®šå‘ï¼Œå§‹ç»ˆè¾“å‡ºåˆ°å±å¹•ã€‚
   - **æ›¿ä»£æ–¹æ¡ˆ**ï¼šéœ€å±è”½ç»ˆç«¯è¾“å‡ºæ—¶ï¼Œå¯å…³é—­æ–‡ä»¶æè¿°ç¬¦æˆ–æ”¹ç”¨ `/dev/null`ã€‚



------
### ğŸ’» **æŠ€æœ¯å®è·µç¤ºä¾‹**

#### **å¯†ç å®‰å…¨è¾“å…¥**

```
#!/bin/bash
# ä»å½“å‰ç»ˆç«¯è¯»å–å¯†ç ï¼ˆä¸å›æ˜¾ï¼‰
read -sp "Enter Password: " passwd </dev/tty
echo  # æ¢è¡Œ
# éªŒè¯å¯†ç ï¼ˆç¤ºä¾‹ï¼‰
if [ "$passwd" = "secret" ]; then
    echo "Access Granted!" >/dev/tty
else
    echo "Denied!" >/dev/tty
fi
```
#### **ç»ˆç«¯ç±»å‹æ£€æµ‹**

```
if tty -s; then
    echo "Interactive Session: $(tty)" >/dev/tty
else
    echo "Non-interactive Session" >&2
fi
```



------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒå®šä½**ï¼š`/dev/tty` æ˜¯**ä¼šè¯çº§åŠ¨æ€ç»ˆç«¯**ï¼Œä¸ºè¿›ç¨‹æä¾›ç»Ÿä¸€çš„äº¤äº’æ¥å£ï¼Œå±è”½åº•å±‚ç»ˆç«¯å·®å¼‚[3,6](@ref)ã€‚
- **ä¸å¯æ›¿ä»£æ€§**ï¼šåœ¨éœ€è¦**å¼ºç»‘å®šå½“å‰ç»ˆç«¯**çš„åœºæ™¯ï¼ˆå¦‚è¾“å…¥ã€å®æ—¶è¾“å‡ºï¼‰ä¸­ä½œç”¨å…³é”®ã€‚
- **è¿ç»´æ„ä¹‰**ï¼šç†è§£å…¶ä¸ `/dev/tty0`ã€`/dev/pts` ç­‰è®¾å¤‡çš„åŒºåˆ«ï¼Œæ˜¯è§£å†³ç»ˆç«¯æƒé™ã€ä¼šè¯éš”ç¦»é—®é¢˜çš„åŸºçŸ³ã€‚
> ğŸ“Œ **æœ€ä½³å®è·µ**ï¼š
>
> - äº¤äº’å¼è„šæœ¬**æ˜¾å¼ä½¿ç”¨ `/dev/tty`** ç¡®ä¿å¯é æ€§ã€‚
> - é¿å…åœ¨**æ— ç»ˆç«¯ç¯å¢ƒ**ï¼ˆå¦‚å®ˆæŠ¤è¿›ç¨‹ï¼‰ä¸­è°ƒç”¨å®ƒã€‚
> - æ•æ„Ÿæ“ä½œ**ç»“åˆ `stty` æ§åˆ¶ç»ˆç«¯è¡Œä¸º**ï¼ˆå¦‚å…³é—­å›æ˜¾ï¼‰ã€‚
## /dev/null

`/dev/null` æ˜¯ Linux ç³»ç»Ÿä¸­çš„**ç‰¹æ®Šå­—ç¬¦è®¾å¤‡æ–‡ä»¶**ï¼Œå› å…¶**ä¸¢å¼ƒä¸€åˆ‡å†™å…¥æ•°æ®**çš„ç‰¹æ€§è¢«ç§°ä¸ºâ€œé»‘æ´æ–‡ä»¶â€ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†ã€åº”ç”¨åœºæ™¯åŠå®è·µæŠ€å·§çš„å…¨é¢è§£æï¼š



------
### ğŸ•³ï¸ **æ ¸å¿ƒç‰¹æ€§ä¸åŸç†**

1. **æ•°æ®ä¸¢å¼ƒæœºåˆ¶**
   - **å†™å…¥é»‘æ´**ï¼šä»»ä½•å†™å…¥ `/dev/null` çš„æ•°æ®ä¼šè¢«å†…æ ¸ç›´æ¥ä¸¢å¼ƒï¼Œä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œæ— ä»»ä½•å­˜å‚¨æˆ–è¾“å‡º[1,4,6,8](@ref)ã€‚
   - **è¯»å–è¿”å› EOF**ï¼šå°è¯•è¯»å–æ—¶ç«‹å³è¿”å›æ–‡ä»¶ç»“æŸæ ‡å¿—ï¼ˆEOFï¼‰ï¼Œæ— æœ‰æ•ˆæ•°æ®[6,8](@ref)ã€‚
   - æƒé™ä¸ç±»å‹ï¼š
     ```
     crw-rw-rw- 1 root root 1, 3 /dev/null  # å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œæ‰€æœ‰ç”¨æˆ·å¯è¯»å†™[6,10](@ref)ã€‚
     ```
2. **è®¾è®¡ç›®çš„**
   - **èµ„æºä¼˜åŒ–**ï¼šé¿å…æ— ç”¨è¾“å‡ºå ç”¨ç»ˆç«¯æˆ–æ—¥å¿—æ–‡ä»¶ï¼Œæå‡æ€§èƒ½[6,8](@ref)ã€‚
   - **ç®€åŒ–æ“ä½œ**ï¼šé€šè¿‡é‡å®šå‘å¿«é€Ÿå±è”½è¾“å‡ºï¼Œä¿æŒå‘½ä»¤è¡Œç®€æ´[2,9](@ref)ã€‚



------
### âš™ï¸ **æ ¸å¿ƒåº”ç”¨åœºæ™¯**

#### ğŸ”§ **å±è”½å‘½ä»¤è¾“å‡º**

- å±è”½æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ï¼š
  ```
  ls > /dev/null  # æ­£å¸¸è¾“å‡ºè¢«ä¸¢å¼ƒï¼Œç»ˆç«¯æ— æ˜¾ç¤º[1,7](@ref)ã€‚
  ```
- å±è”½é”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰ï¼š
  ```
  rm non_existent_file 2> /dev/null  # é”™è¯¯ä¿¡æ¯ä¸æ˜¾ç¤º[4,9](@ref)ã€‚
  ```
- å±è”½æ‰€æœ‰è¾“å‡ºï¼š
  ```
  nohup java -jar app.jar > /dev/null 2>&1 &  # åå°è¿è¡Œï¼Œä¸¢å¼ƒæ‰€æœ‰è¾“å‡º[1,3,10](@ref)ã€‚
  ```
#### ğŸ§¹ **æ¸…ç©ºæ–‡ä»¶å†…å®¹**

å°† `/dev/null` å†™å…¥ç›®æ ‡æ–‡ä»¶ï¼Œå®ç°å¿«é€Ÿæ¸…ç©ºï¼š
```
cat /dev/null > log.txt  # æ¸…ç©º log.txtï¼ˆæ¯” `rm + touch` æ›´é«˜æ•ˆï¼‰[4,10](@ref)ã€‚
```
#### ğŸ¤– **é¿å…äº¤äº’å¼æç¤º**

å¼ºåˆ¶è„šæœ¬éäº¤äº’è¿è¡Œï¼Œå±è”½è¾“å…¥æç¤ºï¼š
```
apt-get install -y package < /dev/null  # å¿½ç•¥å®‰è£…è¿‡ç¨‹ä¸­çš„ç¡®è®¤æç¤º[9](@ref)ã€‚
```
#### â³ **åå°è¿›ç¨‹é™é»˜è¿è¡Œ**

å®ˆæŠ¤è¿›ç¨‹æˆ–å®šæ—¶ä»»åŠ¡ä¸­å±è”½è¾“å‡ºï¼š
```
*/5 * * * * /path/script.sh > /dev/null 2>&1  # å®šæ—¶ä»»åŠ¡ä¸äº§ç”Ÿä»»ä½•æ—¥å¿—[7,10](@ref)ã€‚
```
#### ğŸª **éšç§ä¿æŠ¤**

å±è”½æ•æ„Ÿæ•°æ®è®°å½•ï¼ˆå¦‚æµè§ˆå™¨ cookiesï¼‰ï¼š
```
ln -s /dev/null ~/.netscape/cookies  # æ‰€æœ‰ cookies å†™å…¥åç«‹å³ä¸¢å¼ƒ[4](@ref)ã€‚
```



------
### ğŸ§  **é«˜çº§é‡å®šå‘æŠ€å·§**

#### ğŸ“Œ **é‡å®šå‘è¯­æ³•è§£æ**

| **å‘½ä»¤**                   | **æ•ˆæœ**                                                     |
| -------------------------- | ------------------------------------------------------------ |
| `command > /dev/null`      | ä»…ä¸¢å¼ƒæ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰[3,7](@ref)ã€‚                        |
| `command 2> /dev/null`     | ä»…ä¸¢å¼ƒé”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰[7,9](@ref)ã€‚                        |
| `command > /dev/null 2>&1` | å…ˆé‡å®šå‘ stdout åˆ°é»‘æ´ï¼Œå†å°† stderr åˆå¹¶åˆ° stdoutï¼ŒäºŒè€…å‡ä¸¢å¼ƒ[3,8](@ref)ã€‚ |
| `command 2>&1 > /dev/null` | **é”™è¯¯è¾“å‡ºä»æ˜¾ç¤º**ï¼ˆstderr å…ˆåˆå¹¶åˆ° stdoutï¼Œä½† stdout æœªé‡å®šå‘ï¼‰[3,8](@ref)ã€‚ |
#### ğŸ¯ **é€€å‡ºç æ£€æµ‹**

å³ä½¿è¾“å‡ºè¢«ä¸¢å¼ƒï¼Œä»å¯é€šè¿‡ `$?` è·å–å‘½ä»¤æ‰§è¡ŒçŠ¶æ€ï¼š
```
ls /invalid_dir 2> /dev/null
echo $?  # è¿”å›é0å€¼ï¼ˆå¤±è´¥ï¼‰ï¼Œç”¨äºè„šæœ¬æ¡ä»¶åˆ¤æ–­[4,7](@ref)ã€‚
```



------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸é™·é˜±**

1. **è¯¯æ“ä½œå¯¼è‡´æ•°æ®ä¸¢å¤±**
   - **é£é™©**ï¼šè¯¯å°†é‡è¦æ•°æ®é‡å®šå‘åˆ° `/dev/null` å°†æ— æ³•æ¢å¤[6,10](@ref)ã€‚
   - **é¢„é˜²**ï¼šé‡å®šå‘å‰æ£€æŸ¥è·¯å¾„ï¼Œå¦‚ `> file` å‹¿è¯¯å†™ä¸º `> /dev/null`ã€‚
2. **é‡å®šå‘é¡ºåºé”™è¯¯**
   - **é”™è¯¯ç¤ºä¾‹**ï¼š`command 2>&1 > /dev/null` ä¼šå¯¼è‡´ stderr ä»æ˜¾ç¤ºï¼ˆå›  stderr é‡å®šå‘æ—¶ stdout å°šæœªæŒ‡å‘é»‘æ´ï¼‰[3](@ref)ã€‚
   - **æ­£ç¡®å†™æ³•**ï¼šå§‹ç»ˆå°† `2>&1` æ”¾åœ¨é‡å®šå‘æœ«å°¾ï¼ˆ`> /dev/null 2>&1`ï¼‰ã€‚
3. **æ€§èƒ½å½±å“**
   - é«˜é¢‘å†™å…¥ `/dev/null` å¯èƒ½æ¶ˆè€— CPU èµ„æºï¼ˆè™½æ— ç£ç›˜ I/Oï¼‰[8](@ref)ã€‚
   - **ä¼˜åŒ–å»ºè®®**ï¼šé¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹é‡å®šå‘è‡³é»‘æ´ã€‚



------
### ğŸ”„ **ä¸ `/dev/zero` çš„åŒºåˆ«**

| **ç‰¹æ€§**     | **`/dev/null`**    | **`/dev/zero`**                                              |
| ------------ | ------------------ | ------------------------------------------------------------ |
| **å†™å…¥è¡Œä¸º** | æ•°æ®æ°¸ä¹…ä¸¢å¼ƒ       | æ•°æ®è¢«ä¸¢å¼ƒï¼Œä½†å¯è¯»å–ç©ºå­—èŠ‚æµ[10](@ref)ã€‚                     |
| **è¯»å–è¡Œä¸º** | ç«‹å³è¿”å› EOF       | æä¾›æ— é™è¿ç»­çš„ `0x00` å­—èŠ‚æµ[10](@ref)ã€‚                     |
| **å…¸å‹ç”¨é€”** | ä¸¢å¼ƒè¾“å‡ºã€æ¸…ç©ºæ–‡ä»¶ | åˆ›å»ºç©ºæ–‡ä»¶ï¼ˆ`dd if=/dev/zero of=file bs=1M count=10`ï¼‰[10](@ref)ã€‚ |



------
### ğŸ’ **æ€»ç»“**

- **æ ¸å¿ƒä»·å€¼**ï¼š`/dev/null` æ˜¯ Linux **èµ„æºç®¡ç†**å’Œ**è¾“å‡ºæ§åˆ¶**çš„åŸºçŸ³ï¼Œé€šè¿‡é‡å®šå‘å®ç°â€œé™é»˜è¿è¡Œâ€æˆ–â€œéšç§ä¿æŠ¤â€ã€‚
- è¿ç»´å®è·µï¼š
  - è„šæœ¬ä¸­å±è”½éå…³é”®è¾“å‡ºï¼Œèšç„¦é”™è¯¯å¤„ç†ï¼ˆ`2> /dev/null` + `$?`ï¼‰[4,7](@ref)ã€‚
  - å®šæ—¶ä»»åŠ¡æ ‡é… `> /dev/null 2>&1` é¿å…æ—¥å¿—è†¨èƒ€[10](@ref)ã€‚
- **å®‰å…¨æç¤º**ï¼šæ…é˜²é‡å®šå‘è¯¯æ“ä½œï¼Œä¼˜å…ˆæµ‹è¯•å‘½ä»¤å†å¼•å…¥é»‘æ´[6,10](@ref)ã€‚
> **ä¸€å¥è¯ç†è§£**ï¼šå‘é»‘æ´æ–‡ä»¶å†™å…¥æ•°æ® â‰ˆ ä¸¢å…¥è™šç©ºï¼›ä»ä¸­è¯»å– â‰ˆ è§¦ç¢°è™šæ— ã€‚æŒæ¡å…¶ç”¨æ³•ï¼Œå¯è®©å‘½ä»¤è¡Œæ›´ç®€æ´ï¼Œç³»ç»Ÿæ›´é«˜æ•ˆ ğŸš€ã€‚