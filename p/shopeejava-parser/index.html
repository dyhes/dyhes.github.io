<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='JavaParser æ³¨è§£ è¦ä½¿ç”¨ com.github.javaparser.JavaParserè§£æç‰¹å®šæ³¨è§£ï¼ˆå¦‚ @RestControllerï¼‰ï¼Œéœ€é€šè¿‡è§£æ Java æºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å¹¶éå†ç›®æ ‡å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µï¼‰çš„æ³¨è§£åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š\n1. åŸºæœ¬è§£ææµç¨‹ æ­¥éª¤æ¦‚è¿° è§£ææºä»£ç ï¼šå°† Java æ–‡ä»¶æˆ–å­—ç¬¦ä¸²è§£æä¸º CompilationUnitï¼ˆAST çš„æ ¹èŠ‚ç‚¹ï¼‰ã€‚ å®šä½ç›®æ ‡å…ƒç´ ï¼šéå† AST æ‰¾åˆ°éœ€è¦æ£€æŸ¥çš„ç±»ã€æ–¹æ³•æˆ–å­—æ®µã€‚ æ£€æŸ¥æ³¨è§£ï¼šéå†å…ƒç´ çš„æ³¨è§£åˆ—è¡¨ï¼ŒåŒ¹é…ç›®æ ‡æ³¨è§£çš„åç§°æˆ–å‚æ•°ã€‚ ä»£ç ç¤ºä¾‹ import com.github.javaparser.StaticJavaParser; import com.github.javaparser.ast.CompilationUnit; import com.github.javaparser.ast.body.ClassOrInterfaceDeclaration; import java.io.File; public class AnnotationParser { public static void main(String[] args) throws Exception { // 1. è§£æJavaæ–‡ä»¶ CompilationUnit cu = StaticJavaParser.parse(new File("YourClass.java")); // 2. éå†æ‰€æœ‰ç±»å£°æ˜ cu.findAll(ClassOrInterfaceDeclaration.class).forEach(clazz -> { // 3. æ£€æŸ¥ç±»æ˜¯å¦åŒ…å«@RestControlleræ³¨è§£ boolean hasRestController = clazz.getAnnotations().stream() .anyMatch(annotation -> annotation.getNameAsString().equals("RestController") ); System.out.println("Class has @RestController: " + hasRestController); }); } } 2. è§£ææ³¨è§£çš„ç»†èŠ‚ æ³¨è§£åç§°åŒ¹é… æ³¨è§£åç§°éœ€ä¸æºä»£ç ä¸­çš„å†™æ³•ä¸€è‡´ï¼ˆå¦‚ "RestController"è€Œéå…¨é™å®šå org.springframework.web.bind.annotation.RestControllerï¼‰ã€‚è‹¥éœ€å¤„ç†å…¨é™å®šåï¼Œéœ€æ£€æŸ¥æ³¨è§£çš„ QualifiedNameã€‚ è·å–æ³¨è§£å‚æ•° è‹¥æ³¨è§£å¸¦å‚æ•°ï¼ˆå¦‚ @RequestMapping("/path")ï¼‰ï¼Œå¯æå–å‚æ•°å€¼ï¼š\n'><title>ã€Shopeeã€‘Java Parser</title><link rel=canonical href=https://dyhes.github.io/p/shopeejava-parser/><link rel=stylesheet href=/scss/style.min.f7091bff8043bd3e53b22be6c05dd86b506e8dec4d0d75d249d2dfb0fe074a46.css><meta property='og:title' content="ã€Shopeeã€‘Java Parser"><meta property='og:description' content='JavaParser æ³¨è§£ è¦ä½¿ç”¨ com.github.javaparser.JavaParserè§£æç‰¹å®šæ³¨è§£ï¼ˆå¦‚ @RestControllerï¼‰ï¼Œéœ€é€šè¿‡è§£æ Java æºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å¹¶éå†ç›®æ ‡å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µï¼‰çš„æ³¨è§£åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š\n1. åŸºæœ¬è§£ææµç¨‹ æ­¥éª¤æ¦‚è¿° è§£ææºä»£ç ï¼šå°† Java æ–‡ä»¶æˆ–å­—ç¬¦ä¸²è§£æä¸º CompilationUnitï¼ˆAST çš„æ ¹èŠ‚ç‚¹ï¼‰ã€‚ å®šä½ç›®æ ‡å…ƒç´ ï¼šéå† AST æ‰¾åˆ°éœ€è¦æ£€æŸ¥çš„ç±»ã€æ–¹æ³•æˆ–å­—æ®µã€‚ æ£€æŸ¥æ³¨è§£ï¼šéå†å…ƒç´ çš„æ³¨è§£åˆ—è¡¨ï¼ŒåŒ¹é…ç›®æ ‡æ³¨è§£çš„åç§°æˆ–å‚æ•°ã€‚ ä»£ç ç¤ºä¾‹ import com.github.javaparser.StaticJavaParser; import com.github.javaparser.ast.CompilationUnit; import com.github.javaparser.ast.body.ClassOrInterfaceDeclaration; import java.io.File; public class AnnotationParser { public static void main(String[] args) throws Exception { // 1. è§£æJavaæ–‡ä»¶ CompilationUnit cu = StaticJavaParser.parse(new File("YourClass.java")); // 2. éå†æ‰€æœ‰ç±»å£°æ˜ cu.findAll(ClassOrInterfaceDeclaration.class).forEach(clazz -> { // 3. æ£€æŸ¥ç±»æ˜¯å¦åŒ…å«@RestControlleræ³¨è§£ boolean hasRestController = clazz.getAnnotations().stream() .anyMatch(annotation -> annotation.getNameAsString().equals("RestController") ); System.out.println("Class has @RestController: " + hasRestController); }); } } 2. è§£ææ³¨è§£çš„ç»†èŠ‚ æ³¨è§£åç§°åŒ¹é… æ³¨è§£åç§°éœ€ä¸æºä»£ç ä¸­çš„å†™æ³•ä¸€è‡´ï¼ˆå¦‚ "RestController"è€Œéå…¨é™å®šå org.springframework.web.bind.annotation.RestControllerï¼‰ã€‚è‹¥éœ€å¤„ç†å…¨é™å®šåï¼Œéœ€æ£€æŸ¥æ³¨è§£çš„ QualifiedNameã€‚ è·å–æ³¨è§£å‚æ•° è‹¥æ³¨è§£å¸¦å‚æ•°ï¼ˆå¦‚ @RequestMapping("/path")ï¼‰ï¼Œå¯æå–å‚æ•°å€¼ï¼š\n'><meta property='og:url' content='https://dyhes.github.io/p/shopeejava-parser/'><meta property='og:site_name' content='é£é¸¿è¸é›ªæ³¥'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Shopee'><meta property='article:published_time' content='2025-08-18T00:00:00+00:00'><meta property='article:modified_time' content='2025-08-22T19:16:52+08:00'><meta name=twitter:title content="ã€Shopeeã€‘Java Parser"><meta name=twitter:description content='JavaParser æ³¨è§£ è¦ä½¿ç”¨ com.github.javaparser.JavaParserè§£æç‰¹å®šæ³¨è§£ï¼ˆå¦‚ @RestControllerï¼‰ï¼Œéœ€é€šè¿‡è§£æ Java æºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å¹¶éå†ç›®æ ‡å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µï¼‰çš„æ³¨è§£åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š\n1. åŸºæœ¬è§£ææµç¨‹ æ­¥éª¤æ¦‚è¿° è§£ææºä»£ç ï¼šå°† Java æ–‡ä»¶æˆ–å­—ç¬¦ä¸²è§£æä¸º CompilationUnitï¼ˆAST çš„æ ¹èŠ‚ç‚¹ï¼‰ã€‚ å®šä½ç›®æ ‡å…ƒç´ ï¼šéå† AST æ‰¾åˆ°éœ€è¦æ£€æŸ¥çš„ç±»ã€æ–¹æ³•æˆ–å­—æ®µã€‚ æ£€æŸ¥æ³¨è§£ï¼šéå†å…ƒç´ çš„æ³¨è§£åˆ—è¡¨ï¼ŒåŒ¹é…ç›®æ ‡æ³¨è§£çš„åç§°æˆ–å‚æ•°ã€‚ ä»£ç ç¤ºä¾‹ import com.github.javaparser.StaticJavaParser; import com.github.javaparser.ast.CompilationUnit; import com.github.javaparser.ast.body.ClassOrInterfaceDeclaration; import java.io.File; public class AnnotationParser { public static void main(String[] args) throws Exception { // 1. è§£æJavaæ–‡ä»¶ CompilationUnit cu = StaticJavaParser.parse(new File("YourClass.java")); // 2. éå†æ‰€æœ‰ç±»å£°æ˜ cu.findAll(ClassOrInterfaceDeclaration.class).forEach(clazz -> { // 3. æ£€æŸ¥ç±»æ˜¯å¦åŒ…å«@RestControlleræ³¨è§£ boolean hasRestController = clazz.getAnnotations().stream() .anyMatch(annotation -> annotation.getNameAsString().equals("RestController") ); System.out.println("Class has @RestController: " + hasRestController); }); } } 2. è§£ææ³¨è§£çš„ç»†èŠ‚ æ³¨è§£åç§°åŒ¹é… æ³¨è§£åç§°éœ€ä¸æºä»£ç ä¸­çš„å†™æ³•ä¸€è‡´ï¼ˆå¦‚ "RestController"è€Œéå…¨é™å®šå org.springframework.web.bind.annotation.RestControllerï¼‰ã€‚è‹¥éœ€å¤„ç†å…¨é™å®šåï¼Œéœ€æ£€æŸ¥æ³¨è§£çš„ QualifiedNameã€‚ è·å–æ³¨è§£å‚æ•° è‹¥æ³¨è§£å¸¦å‚æ•°ï¼ˆå¦‚ @RequestMapping("/path")ï¼‰ï¼Œå¯æå–å‚æ•°å€¼ï¼š\n'><link rel="shortcut icon" href=/github.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_b567f26f71c49c33.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>é£é¸¿è¸é›ªæ³¥</a></h1><h2 class=site-description>æ²¡æœ‰è®°å½•ï¼Œå°±æ²¡æœ‰å‘ç”Ÿ</h2></div></header><ol class=menu-social><li><a href=https://leetcode.cn/u/dyhes/ target=_blank title=LeetCode rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 13h7.5"/><path d="M9.424 7.268l4.999-4.999"/><path d="M16.633 16.644l-2.402 2.415a3.189 3.189.0 01-4.524.0l-3.77-3.787a3.223 3.223.0 010-4.544l3.77-3.787a3.189 3.189.0 014.524.0l2.302 2.313"/></svg></a></li><li><a href=https://github.com/dyhes target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:dyheslin@gmail.com target=_blank title=Gmail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-gmail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li><li><a href=mailto:1325574784@qq.com target=_blank title=Mail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 19H5a2 2 0 01-2-2V7a2 2 0 012-2h14a2 2 0 012 2v5.5"/><path d="M3 7l9 6 9-6"/><path d="M19 16l-2 3h4l-2 3"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/categories/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/tags/><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#javaparser-æ³¨è§£>JavaParser æ³¨è§£</a><ol><li><a href=#1-åŸºæœ¬è§£ææµç¨‹><strong>1. åŸºæœ¬è§£ææµç¨‹</strong></a><ol><li><a href=#æ­¥éª¤æ¦‚è¿°><strong>æ­¥éª¤æ¦‚è¿°</strong></a></li><li><a href=#ä»£ç ç¤ºä¾‹><strong>ä»£ç ç¤ºä¾‹</strong></a></li></ol></li><li><a href=#2-è§£ææ³¨è§£çš„ç»†èŠ‚><strong>2. è§£ææ³¨è§£çš„ç»†èŠ‚</strong></a><ol><li><a href=#æ³¨è§£åç§°åŒ¹é…><strong>æ³¨è§£åç§°åŒ¹é…</strong></a></li><li><a href=#è·å–æ³¨è§£å‚æ•°><strong>è·å–æ³¨è§£å‚æ•°</strong></a></li><li><a href=#è·å–æ³¨è§£ä½ç½®><strong>è·å–æ³¨è§£ä½ç½®</strong></a></li></ol></li><li><a href=#3-æ‰©å±•åº”ç”¨åœºæ™¯><strong>3. æ‰©å±•åº”ç”¨åœºæ™¯</strong></a><ol><li><a href=#æ–¹æ³•å­—æ®µçº§æ³¨è§£><strong>æ–¹æ³•/å­—æ®µçº§æ³¨è§£</strong></a></li><li><a href=#ä¾èµ–é…ç½®><strong>ä¾èµ–é…ç½®</strong></a></li></ol></li><li><a href=#4-æ³¨æ„äº‹é¡¹><strong>4. æ³¨æ„äº‹é¡¹</strong></a></li></ol></li><li><a href=#visitor>Visitor</a><ol><li><a href=#1-é‡æ„ä¸ºè®¿é—®è€…æ¨¡å¼><strong>1. é‡æ„ä¸ºè®¿é—®è€…æ¨¡å¼</strong></a><ol><li><a href=#æ­¥éª¤è¯´æ˜><strong>æ­¥éª¤è¯´æ˜</strong></a></li><li><a href=#é‡æ„ä»£ç ><strong>é‡æ„ä»£ç </strong></a></li><li><a href=#å…³é”®æ”¹è¿›><strong>å…³é”®æ”¹è¿›</strong></a></li></ol></li><li><a href=#2-è®¿é—®è€…æ¨¡å¼çš„æ•ˆç‡åˆ†æ><strong>2. è®¿é—®è€…æ¨¡å¼çš„æ•ˆç‡åˆ†æ</strong></a><ol><li><a href=#ä¼˜åŠ¿åœºæ™¯><strong>ä¼˜åŠ¿åœºæ™¯</strong></a></li><li><a href=#æ½œåœ¨å¼€é”€><strong>æ½œåœ¨å¼€é”€</strong></a></li></ol></li><li><a href=#3-ä½•æ—¶ä½¿ç”¨è®¿é—®è€…æ¨¡å¼><strong>3. ä½•æ—¶ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ï¼Ÿ</strong></a></li><li><a href=#4-æ€§èƒ½å¯¹æ¯”ç»“è®º><strong>4. æ€§èƒ½å¯¹æ¯”ç»“è®º</strong></a></li></ol></li><li><a href=#ç»Ÿåˆ>ç»Ÿåˆ</a><ol><li><a href=#-ä¸€å¤šæ³¨è§£æ£€æŸ¥çš„è®¿é—®è€…æ¨¡å¼å®ç°>ğŸ”§ <strong>ä¸€ã€å¤šæ³¨è§£æ£€æŸ¥çš„è®¿é—®è€…æ¨¡å¼å®ç°</strong></a><ol><li><a href=#1-æ ¸å¿ƒè®¾è®¡æ€è·¯><strong>1. æ ¸å¿ƒè®¾è®¡æ€è·¯</strong></a></li><li><a href=#2-ä»£ç å®ç°ç¤ºä¾‹><strong>2. ä»£ç å®ç°ç¤ºä¾‹</strong></a></li></ol></li><li><a href=#-äºŒå…³é”®æŠ€æœ¯ç‚¹è§£æ>âš™ï¸ <strong>äºŒã€å…³é”®æŠ€æœ¯ç‚¹è§£æ</strong></a><ol><li><a href=#1-åŒé‡åˆ†æ´¾æœºåˆ¶><strong>1. åŒé‡åˆ†æ´¾æœºåˆ¶</strong></a></li><li><a href=#2-æ³¨è§£å‚æ•°æå–><strong>2. æ³¨è§£å‚æ•°æå–</strong></a></li><li><a href=#3-æ”¯æŒåµŒå¥—æ³¨è§£><strong>3. æ”¯æŒåµŒå¥—æ³¨è§£</strong></a></li></ol></li><li><a href=#-ä¸‰æ€§èƒ½ä¸æ‰©å±•æ€§ä¼˜åŒ–>ğŸš€ <strong>ä¸‰ã€æ€§èƒ½ä¸æ‰©å±•æ€§ä¼˜åŒ–</strong></a><ol><li><a href=#1-é¿å…é‡å¤éå†><strong>1. é¿å…é‡å¤éå†</strong></a></li><li><a href=#2-åŠ¨æ€æ‰©å±•æ–°æ³¨è§£><strong>2. åŠ¨æ€æ‰©å±•æ–°æ³¨è§£</strong></a></li><li><a href=#3-ç¼“å­˜ä¼˜åŒ–><strong>3. ç¼“å­˜ä¼˜åŒ–</strong></a></li></ol></li><li><a href=#-å››å¯¹æ¯”è¿‡ç¨‹å¼ä»£ç çš„ä¼˜åŠ¿>âœ… <strong>å››ã€å¯¹æ¯”è¿‡ç¨‹å¼ä»£ç çš„ä¼˜åŠ¿</strong></a></li><li><a href=#-äº”æ€»ç»“>ğŸ’ <strong>äº”ã€æ€»ç»“</strong></a></li></ol></li><li><a href=#é«˜æ•ˆ>é«˜æ•ˆ</a><ol><li><a href=#-ä¸€ä¼˜åŒ–æ–¹æ¡ˆç»„åˆè®¿é—®è€…ä¸çŠ¶æ€å…±äº«>ğŸ”§ <strong>ä¸€ã€ä¼˜åŒ–æ–¹æ¡ˆï¼šç»„åˆè®¿é—®è€…ä¸çŠ¶æ€å…±äº«</strong></a><ol><li><a href=#1-å•æ¬¡éå†å¤šæ“ä½œæ ¸å¿ƒä¼˜åŒ–>1. <strong>å•æ¬¡éå†å¤šæ“ä½œï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼‰</strong></a></li><li><a href=#2-èŠ‚ç‚¹è®¿é—®ä¼˜åŒ–>2. <strong>èŠ‚ç‚¹è®¿é—®ä¼˜åŒ–</strong></a></li><li><a href=#3-çŠ¶æ€å…±äº«ä¸ç»“æœèšåˆ>3. <strong>çŠ¶æ€å…±äº«ä¸ç»“æœèšåˆ</strong></a></li></ol></li><li><a href=#-äºŒæ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯>âš™ï¸ <strong>äºŒã€æ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯</strong></a></li><li><a href=#-ä¸‰æ‰©å±•ä¼˜åŒ–å»ºè®®>ğŸš€ <strong>ä¸‰ã€æ‰©å±•ä¼˜åŒ–å»ºè®®</strong></a></li><li><a href=#-æ€»ç»“>ğŸ’ <strong>æ€»ç»“</strong></a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/snow/ style=background-color:#aa6a4c;color:>è¸é›ªæ³¥
</a><a href=/categories/willow/ style=background-color:#dc9123;color:>æ»¡åŸé£çµ®</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/shopeejava-parser/>ã€Shopeeã€‘Java Parser</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Aug 18, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h2 id=javaparser-æ³¨è§£>JavaParser æ³¨è§£</h2><p>è¦ä½¿ç”¨ <code>com.github.javaparser.JavaParser</code>è§£æç‰¹å®šæ³¨è§£ï¼ˆå¦‚ <code>@RestController</code>ï¼‰ï¼Œéœ€é€šè¿‡è§£æ Java æºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å¹¶éå†ç›®æ ‡å…ƒç´ ï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µï¼‰çš„æ³¨è§£åˆ—è¡¨ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p><hr><h3 id=1-åŸºæœ¬è§£ææµç¨‹><strong>1. åŸºæœ¬è§£ææµç¨‹</strong></h3><h4 id=æ­¥éª¤æ¦‚è¿°><strong>æ­¥éª¤æ¦‚è¿°</strong></h4><ol><li><strong>è§£ææºä»£ç </strong>ï¼šå°† Java æ–‡ä»¶æˆ–å­—ç¬¦ä¸²è§£æä¸º <code>CompilationUnit</code>ï¼ˆAST çš„æ ¹èŠ‚ç‚¹ï¼‰ã€‚</li><li><strong>å®šä½ç›®æ ‡å…ƒç´ </strong>ï¼šéå† AST æ‰¾åˆ°éœ€è¦æ£€æŸ¥çš„ç±»ã€æ–¹æ³•æˆ–å­—æ®µã€‚</li><li><strong>æ£€æŸ¥æ³¨è§£</strong>ï¼šéå†å…ƒç´ çš„æ³¨è§£åˆ—è¡¨ï¼ŒåŒ¹é…ç›®æ ‡æ³¨è§£çš„åç§°æˆ–å‚æ•°ã€‚</li></ol><h4 id=ä»£ç ç¤ºä¾‹><strong>ä»£ç ç¤ºä¾‹</strong></h4><pre tabindex=0><code>import com.github.javaparser.StaticJavaParser;
import com.github.javaparser.ast.CompilationUnit;
import com.github.javaparser.ast.body.ClassOrInterfaceDeclaration;
import java.io.File;

public class AnnotationParser {
    public static void main(String[] args) throws Exception {
        // 1. è§£æJavaæ–‡ä»¶
        CompilationUnit cu = StaticJavaParser.parse(new File(&#34;YourClass.java&#34;));
        
        // 2. éå†æ‰€æœ‰ç±»å£°æ˜
        cu.findAll(ClassOrInterfaceDeclaration.class).forEach(clazz -&gt; {
            // 3. æ£€æŸ¥ç±»æ˜¯å¦åŒ…å«@RestControlleræ³¨è§£
            boolean hasRestController = clazz.getAnnotations().stream()
                .anyMatch(annotation -&gt; 
                    annotation.getNameAsString().equals(&#34;RestController&#34;)
                );
            System.out.println(&#34;Class has @RestController: &#34; + hasRestController);
        });
    }
}
</code></pre><hr><h3 id=2-è§£ææ³¨è§£çš„ç»†èŠ‚><strong>2. è§£ææ³¨è§£çš„ç»†èŠ‚</strong></h3><h4 id=æ³¨è§£åç§°åŒ¹é…><strong>æ³¨è§£åç§°åŒ¹é…</strong></h4><ul><li>æ³¨è§£åç§°éœ€ä¸æºä»£ç ä¸­çš„å†™æ³•ä¸€è‡´ï¼ˆå¦‚ <code>"RestController"</code>è€Œéå…¨é™å®šå <code>org.springframework.web.bind.annotation.RestController</code>ï¼‰ã€‚è‹¥éœ€å¤„ç†å…¨é™å®šåï¼Œéœ€æ£€æŸ¥æ³¨è§£çš„ <code>QualifiedName</code>ã€‚</li></ul><h4 id=è·å–æ³¨è§£å‚æ•°><strong>è·å–æ³¨è§£å‚æ•°</strong></h4><p>è‹¥æ³¨è§£å¸¦å‚æ•°ï¼ˆå¦‚ <code>@RequestMapping("/path")</code>ï¼‰ï¼Œå¯æå–å‚æ•°å€¼ï¼š</p><pre tabindex=0><code>clazz.getAnnotations().forEach(annotation -&gt; {
    if (annotation.getNameAsString().equals(&#34;RequestMapping&#34;)) {
        annotation.ifSingleMemberValueExpr(expr -&gt; {
            String path = expr.toString(); // ä¾‹å¦‚ï¼šè·å– &#34;/path&#34;
            System.out.println(&#34;Path: &#34; + path);
        });
    }
});
</code></pre><p>æ­¤å¤„ <code>ifSingleMemberValueExpr</code>é€‚ç”¨äºå•å‚æ•°æ³¨è§£ï¼ˆå¦‚ <code>@RequestMapping</code>ï¼‰ã€‚å¤šå‚æ•°æ³¨è§£éœ€éå†é”®å€¼å¯¹ ã€‚</p><h4 id=è·å–æ³¨è§£ä½ç½®><strong>è·å–æ³¨è§£ä½ç½®</strong></h4><p>é€šè¿‡ <code>getRange()</code>è·å–æ³¨è§£åœ¨æºä»£ç ä¸­çš„è¡Œå·ï¼š</p><pre tabindex=0><code>annotation.getRange().ifPresent(range -&gt; {
    int startLine = range.begin.line;
    System.out.println(&#34;Annotation at line: &#34; + startLine);
});
</code></pre><hr><h3 id=3-æ‰©å±•åº”ç”¨åœºæ™¯><strong>3. æ‰©å±•åº”ç”¨åœºæ™¯</strong></h3><h4 id=æ–¹æ³•å­—æ®µçº§æ³¨è§£><strong>æ–¹æ³•/å­—æ®µçº§æ³¨è§£</strong></h4><p>ç±»ä¼¼åœ°ï¼Œå¯æ£€æŸ¥æ–¹æ³•æˆ–å­—æ®µçš„æ³¨è§£ï¼š</p><pre tabindex=0><code>cu.findAll(MethodDeclaration.class).forEach(method -&gt; {
    boolean hasMapping = method.getAnnotations().stream()
        .anyMatch(anno -&gt; anno.getNameAsString().equals(&#34;GetMapping&#34;));
    System.out.println(&#34;Method has @GetMapping: &#34; + hasMapping);
});
</code></pre><h4 id=ä¾èµ–é…ç½®><strong>ä¾èµ–é…ç½®</strong></h4><p>éœ€åœ¨é¡¹ç›®ä¸­æ·»åŠ  JavaParser ä¾èµ–ï¼ˆMavenï¼‰ï¼š</p><pre tabindex=0><code>&lt;dependency&gt;
    &lt;groupId&gt;com.github.javaparser&lt;/groupId&gt;
    &lt;artifactId&gt;javaparser-core&lt;/artifactId&gt;
    &lt;version&gt;3.28.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><hr><h3 id=4-æ³¨æ„äº‹é¡¹><strong>4. æ³¨æ„äº‹é¡¹</strong></h3><ul><li><strong>æ³¨è§£åç§°åŒ¹é…</strong>ï¼šéœ€è€ƒè™‘å¯¼å…¥è¯­å¥ï¼ˆå¦‚ <code>import org.springframework.web.bind.annotation.*;</code>ï¼‰ï¼Œå¦åˆ™éœ€æ£€æŸ¥å…¨é™å®šåã€‚</li><li><strong>åµŒå¥—æ³¨è§£</strong>ï¼šè‹¥æ³¨è§£åµŒå¥—åœ¨ç»„åˆæ³¨è§£ä¸­ï¼ˆå¦‚ <code>@SpringBootApplication</code>åŒ…å« <code>@RestController</code>ï¼‰ï¼Œéœ€é€’å½’è§£æ ã€‚</li><li><strong>å‚æ•°ç±»å‹å¤„ç†</strong>ï¼šæ³¨è§£å‚æ•°å¯èƒ½æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–æšä¸¾ï¼Œéœ€è°ƒç”¨ <code>asStringLiteralExpr()</code>ã€<code>asArrayInitializerExpr()</code>ç­‰æ–¹æ³•è½¬æ¢ ã€‚</li></ul><p>é€šè¿‡ä¸Šè¿°æ–¹æ³•ï¼Œå¯çµæ´»è§£æä»»æ„æ³¨è§£åŠå…¶å±æ€§ï¼Œé€‚ç”¨äºä»£ç å®¡è®¡ã€æ–‡æ¡£ç”Ÿæˆç­‰åœºæ™¯ã€‚</p><h2 id=visitor>Visitor</h2><p>è¦å°†ç»™å®šçš„JavaParserä»£ç è½¬æ¢ä¸ºè®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰å½¢å¼ï¼Œéœ€é€šè¿‡å®šä¹‰è‡ªå®šä¹‰è®¿é—®è€…ç±»æ¥è§£è€¦ASTéå†ä¸æ³¨è§£æ£€æŸ¥é€»è¾‘ã€‚ä»¥ä¸‹ä¸ºé‡æ„åçš„ä»£ç åŠæ•ˆç‡åˆ†æï¼š</p><hr><h3 id=1-é‡æ„ä¸ºè®¿é—®è€…æ¨¡å¼><strong>1. é‡æ„ä¸ºè®¿é—®è€…æ¨¡å¼</strong></h3><h4 id=æ­¥éª¤è¯´æ˜><strong>æ­¥éª¤è¯´æ˜</strong></h4><ol><li><p><strong>å®šä¹‰æ³¨è§£è®¿é—®è€…ç±»</strong></p><p>ç»§æ‰¿<code>VoidVisitorAdapter</code>ï¼Œé‡å†™<code>visit</code>æ–¹æ³•å¤„ç†ç‰¹å®šèŠ‚ç‚¹ï¼ˆå¦‚ç±»å£°æ˜ï¼‰çš„æ³¨è§£æ£€æŸ¥ã€‚</p></li><li><p><strong>è§£è€¦éå†ä¸æ“ä½œ</strong></p><p>å°†æ³¨è§£æ£€æŸ¥é€»è¾‘å°è£…åœ¨è®¿é—®è€…å†…éƒ¨ï¼Œé¿å…åœ¨<code>main</code>æ–¹æ³•ä¸­æ··åˆéå†ä¸ä¸šåŠ¡é€»è¾‘ã€‚</p></li><li><p><strong>ä¼˜åŒ–éå†è¿‡ç¨‹</strong></p><p>é€šè¿‡è®¿é—®è€…æ¨¡å¼è‡ªåŠ¨é€’å½’éå†ASTï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨<code>findAll</code>ã€‚</p></li></ol><h4 id=é‡æ„ä»£ç ><strong>é‡æ„ä»£ç </strong></h4><pre tabindex=0><code>import com.github.javaparser.StaticJavaParser;
import com.github.javaparser.ast.CompilationUnit;
import com.github.javaparser.ast.body.ClassOrInterfaceDeclaration;
import com.github.javaparser.ast.visitor.VoidVisitorAdapter;
import java.io.File;

// è‡ªå®šä¹‰è®¿é—®è€…ï¼šæ£€æŸ¥@RestControlleræ³¨è§£
class RestControllerVisitor extends VoidVisitorAdapter&lt;Void&gt; {
    @Override
    public void visit(ClassOrInterfaceDeclaration clazz, Void arg) {
        super.visit(clazz, arg);
        boolean hasRestController = clazz.getAnnotations().stream()
            .anyMatch(anno -&gt; anno.getNameAsString().equals(&#34;RestController&#34;));
        System.out.println(&#34;Class &#34; + clazz.getName() + &#34; has @RestController: &#34; + hasRestController);
    }
}

public class AnnotationParser {
    public static void main(String[] args) throws Exception {
        CompilationUnit cu = StaticJavaParser.parse(new File(&#34;YourClass.java&#34;));
        // ä½¿ç”¨è®¿é—®è€…éå†AST
        RestControllerVisitor visitor = new RestControllerVisitor();
        visitor.visit(cu, null);
    }
}
</code></pre><h4 id=å…³é”®æ”¹è¿›><strong>å…³é”®æ”¹è¿›</strong></h4><ul><li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šæ³¨è§£æ£€æŸ¥é€»è¾‘ç‹¬ç«‹å°è£…åœ¨<code>RestControllerVisitor</code>ä¸­ã€‚</li><li><strong>éšå¼é€’å½’éå†</strong>ï¼šè®¿é—®è€…è‡ªåŠ¨å¤„ç†ASTçš„é€’å½’éå†ï¼Œé¿å…æ‰‹åŠ¨è¿­ä»£ã€‚</li><li><strong>æ‰©å±•æ€§</strong>ï¼šæ–°å¢æ“ä½œï¼ˆå¦‚æ–¹æ³•/å­—æ®µæ³¨è§£æ£€æŸ¥ï¼‰åªéœ€æ·»åŠ æ–°è®¿é—®è€…ï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</li></ul><hr><h3 id=2-è®¿é—®è€…æ¨¡å¼çš„æ•ˆç‡åˆ†æ><strong>2. è®¿é—®è€…æ¨¡å¼çš„æ•ˆç‡åˆ†æ</strong></h3><h4 id=ä¼˜åŠ¿åœºæ™¯><strong>ä¼˜åŠ¿åœºæ™¯</strong></h4><ol><li><p><strong>å¤æ‚æ“ä½œä¼˜åŒ–</strong></p><ul><li>å½“éœ€å¯¹ASTè¿›è¡Œ<strong>å¤šç§æ“ä½œ</strong>ï¼ˆå¦‚åŒæ—¶æ£€æŸ¥æ³¨è§£ã€ç»Ÿè®¡æ–¹æ³•æ•°ï¼‰æ—¶ï¼Œè®¿é—®è€…æ¨¡å¼é¿å…é‡å¤éå†ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li><li>ä¾‹å¦‚ï¼šåœ¨å•æ¬¡éå†ä¸­ï¼Œå¤šä¸ªè®¿é—®è€…å¯ååŒå¤„ç†ä¸åŒä»»åŠ¡ï¼ˆé€šè¿‡<code>CompositeVisitor</code>ç»„åˆï¼‰ã€‚</li></ul></li><li><p><strong>å±€éƒ¨éå†æ§åˆ¶</strong></p><p>è®¿é—®è€…å¯è·³è¿‡æ— å…³èŠ‚ç‚¹ï¼ˆå¦‚å¿½ç•¥æ–¹æ³•å†…éƒ¨ä»£ç ï¼‰ï¼Œå‡å°‘ä¸å¿…è¦çš„å­æ ‘è§£æã€‚</p></li><li><p><strong>ç¼“å­˜ä¼˜åŒ–</strong></p><p>JavaParserå†…ç½®çš„è®¿é—®è€…å®ç°ï¼ˆå¦‚<code>VoidVisitorAdapter</code>ï¼‰å·²ä¼˜åŒ–éå†ç®—æ³•ï¼Œå‡å°‘ASTè§£æå¼€é”€ã€‚</p></li></ol><h4 id=æ½œåœ¨å¼€é”€><strong>æ½œåœ¨å¼€é”€</strong></h4><ul><li><strong>å°è§„æ¨¡æ–‡ä»¶</strong>ï¼šè‹¥ä»…æ£€æŸ¥å•ä¸ªæ³¨è§£ï¼Œ<strong>è¿‡ç¨‹å¼ä»£ç ï¼ˆåŸä»£ç ï¼‰æ›´è½»é‡</strong>ï¼Œå› è®¿é—®è€…æ¨¡å¼éœ€åˆ›å»ºé¢å¤–ç±»åŠè°ƒç”¨æ ˆã€‚</li><li><strong>ç®€å•æ“ä½œ</strong>ï¼šå•ä¸€æ“ä½œï¼ˆå¦‚ä»…æ£€æŸ¥ç±»æ³¨è§£ï¼‰æ—¶ï¼Œè®¿é—®è€…æ¨¡å¼å› åŒåˆ†æ´¾æœºåˆ¶ï¼ˆ<code>accept-visit</code>è°ƒç”¨é“¾ï¼‰ç•¥æœ‰æ€§èƒ½æŸè€—ã€‚</li></ul><hr><h3 id=3-ä½•æ—¶ä½¿ç”¨è®¿é—®è€…æ¨¡å¼><strong>3. ä½•æ—¶ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ï¼Ÿ</strong></h3><div class=table-wrapper><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ¨èæ–¹æ¡ˆ</strong></th><th><strong>åŸå› </strong></th></tr></thead><tbody><tr><td>å•ä¸€ç®€å•æ“ä½œï¼ˆå¦‚æ£€æŸ¥å•ä¸ªæ³¨è§£ï¼‰</td><td><strong>è¿‡ç¨‹å¼éå†</strong></td><td>ä»£ç ç®€æ´ï¼Œæ— é¢å¤–ç±»å¼€é”€ã€‚</td></tr><tr><td>å¤æ‚/å¤šæ“ä½œï¼ˆå¦‚ä»£ç å®¡æŸ¥å·¥å…·ï¼‰</td><td><strong>è®¿é—®è€…æ¨¡å¼</strong></td><td>é¿å…é‡å¤éå†ï¼Œé€»è¾‘è§£è€¦ï¼Œæ‰©å±•æ€§å¼ºã€‚</td></tr><tr><td>éœ€æ·±åº¦å®šåˆ¶éå†é€»è¾‘</td><td><strong>è®¿é—®è€…æ¨¡å¼</strong></td><td>å¯è¦†ç›–<code>visit</code>æ–¹æ³•æ§åˆ¶èŠ‚ç‚¹è®¿é—®é¡ºåºï¼ˆå¦‚è·³è¿‡å­èŠ‚ç‚¹ï¼‰ã€‚</td></tr></tbody></table></div><hr><h3 id=4-æ€§èƒ½å¯¹æ¯”ç»“è®º><strong>4. æ€§èƒ½å¯¹æ¯”ç»“è®º</strong></h3><p>âœ… <strong>è®¿é—®è€…æ¨¡å¼æ›´é«˜æ•ˆçš„æƒ…å†µ</strong>ï¼š</p><ul><li>éœ€æ‰§è¡Œ<strong>å¤šä¸ªæ“ä½œ</strong>ï¼ˆå¦‚åŒæ—¶æ£€æŸ¥æ³¨è§£+ç”Ÿæˆæ–‡æ¡£ï¼‰ã€‚</li><li>é¡¹ç›®<strong>æŒç»­æ‰©å±•</strong>ï¼ˆéœ€æ–°å¢ASTæ“ä½œï¼‰ã€‚</li><li>éœ€<strong>ç²¾ç»†æ§åˆ¶éå†è·¯å¾„</strong>ï¼ˆå¦‚å¿½ç•¥æŸäº›èŠ‚ç‚¹ï¼‰ã€‚</li></ul><p>âŒ <strong>åŸè¿‡ç¨‹å¼ä»£ç æ›´é«˜æ•ˆçš„æƒ…å†µ</strong>ï¼š</p><ul><li>ä»…éœ€<strong>ä¸€æ¬¡æ€§ç®€å•æŸ¥è¯¢</strong>ï¼ˆå¦‚å•æ³¨è§£æ£€æŸ¥ï¼‰ã€‚</li><li>ç›®æ ‡æ–‡ä»¶<strong>è§„æ¨¡æå°</strong>ï¼ˆ&lt;100è¡Œä»£ç ï¼‰ã€‚</li></ul><blockquote><p><strong>å»ºè®®</strong>ï¼šå¤§å‹é¡¹ç›®æˆ–å¤æ‚å·¥å…·ï¼ˆå¦‚ä»£ç åˆ†æå™¨ï¼‰ä¼˜å…ˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ï¼›å°å‹è„šæœ¬å¯ä¿ç•™è¿‡ç¨‹å¼ä»£ç ã€‚</p></blockquote><h2 id=ç»Ÿåˆ>ç»Ÿåˆ</h2><p>åœ¨è®¿é—®è€…æ¨¡å¼ä¸­å®ç°å¯¹å¤šç§ä¸åŒç±»å‹æ³¨è§£ï¼ˆå¦‚ <code>@RestController</code>å’Œ <code>@GetMapping</code>ï¼‰çš„æ£€æŸ¥ï¼Œéœ€é€šè¿‡ <strong>åˆ†å±‚è®¿é—®è€…è®¾è®¡</strong> å’Œ <strong>ç±»å‹åˆ†æ´¾æœºåˆ¶</strong> å®ç°é«˜æ•ˆä¸”è§£è€¦çš„ä»£ç ç»“æ„ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ–¹æ¡ˆå’Œä¼˜åŒ–å»ºè®®ï¼š</p><hr><h3 id=-ä¸€å¤šæ³¨è§£æ£€æŸ¥çš„è®¿é—®è€…æ¨¡å¼å®ç°>ğŸ”§ <strong>ä¸€ã€å¤šæ³¨è§£æ£€æŸ¥çš„è®¿é—®è€…æ¨¡å¼å®ç°</strong></h3><h4 id=1-æ ¸å¿ƒè®¾è®¡æ€è·¯><strong>1. æ ¸å¿ƒè®¾è®¡æ€è·¯</strong></h4><ul><li><strong>ç»Ÿä¸€è®¿é—®æ¥å£</strong>ï¼šå®šä¹‰ <code>AnnotationVisitor</code>æ¥å£ï¼Œå£°æ˜å¯¹ä¸åŒæ³¨è§£çš„è®¿é—®æ–¹æ³•ã€‚</li><li><strong>å…·ä½“è®¿é—®è€…å®ç°</strong>ï¼šä¸ºæ¯ç±»æ³¨è§£åˆ›å»ºç‹¬ç«‹è®¿é—®è€…ï¼ˆå¦‚ <code>RestControllerVisitor</code>ã€<code>GetMappingVisitor</code>ï¼‰ï¼Œå®ç°æ³¨è§£æ£€æŸ¥é€»è¾‘ã€‚</li><li><strong>AST èŠ‚ç‚¹åˆ†æ´¾</strong>ï¼šåœ¨ç±»/æ–¹æ³•èŠ‚ç‚¹ä¸­è°ƒç”¨è®¿é—®è€…çš„å¯¹åº”æ–¹æ³•ï¼Œå®ç°åŒé‡åˆ†æ´¾ï¼ˆèŠ‚ç‚¹ç±»å‹ + æ³¨è§£ç±»å‹ï¼‰ã€‚</li></ul><h4 id=2-ä»£ç å®ç°ç¤ºä¾‹><strong>2. ä»£ç å®ç°ç¤ºä¾‹</strong></h4><pre tabindex=0><code>import com.github.javaparser.ast.CompilationUnit;
import com.github.javaparser.ast.body.*;
import com.github.javaparser.ast.visitor.VoidVisitorAdapter;

// 1. å®šä¹‰æ³¨è§£è®¿é—®è€…æ¥å£
interface AnnotationVisitor {
    void visitRestController(ClassOrInterfaceDeclaration clazz);
    void visitGetMapping(MethodDeclaration method);
}

// 2. å®ç°å…·ä½“è®¿é—®è€…ï¼ˆæ£€æŸ¥ @RestControllerï¼‰
class RestControllerVisitorImpl implements AnnotationVisitor {
    @Override
    public void visitRestController(ClassOrInterfaceDeclaration clazz) {
        boolean hasAnnotation = clazz.getAnnotations().stream()
            .anyMatch(anno -&gt; anno.getNameAsString().equals(&#34;RestController&#34;));
        System.out.println(&#34;Class has @RestController: &#34; + hasAnnotation);
    }

    @Override
    public void visitGetMapping(MethodDeclaration method) {} // æ— éœ€å®ç°
}

// 3. å®ç°å…·ä½“è®¿é—®è€…ï¼ˆæ£€æŸ¥ @GetMappingï¼‰
class GetMappingVisitorImpl implements AnnotationVisitor {
    @Override
    public void visitRestController(ClassOrInterfaceDeclaration clazz) {} // æ— éœ€å®ç°

    @Override
    public void visitGetMapping(MethodDeclaration method) {
        boolean hasAnnotation = method.getAnnotations().stream()
            .anyMatch(anno -&gt; anno.getNameAsString().equals(&#34;GetMapping&#34;));
        System.out.println(&#34;Method has @GetMapping: &#34; + hasAnnotation);
    }
}

// 4. AST èŠ‚ç‚¹è®¿é—®è€…ï¼ˆåˆ†æ´¾æ³¨è§£æ£€æŸ¥ï¼‰
class AnnotationCheckVisitor extends VoidVisitorAdapter&lt;AnnotationVisitor&gt; {
    @Override
    public void visit(ClassOrInterfaceDeclaration clazz, AnnotationVisitor visitor) {
        super.visit(clazz, visitor);
        visitor.visitRestController(clazz); // åˆ†æ´¾åˆ°å…·ä½“æ³¨è§£æ£€æŸ¥
    }

    @Override
    public void visit(MethodDeclaration method, AnnotationVisitor visitor) {
        super.visit(method, visitor);
        visitor.visitGetMapping(method); // åˆ†æ´¾åˆ°å…·ä½“æ³¨è§£æ£€æŸ¥
    }
}

// 5. å®¢æˆ·ç«¯è°ƒç”¨
public class Main {
    public static void main(String[] args) {
        CompilationUnit cu = StaticJavaParser.parse(&#34;/* æºä»£ç  */&#34;);
        AnnotationCheckVisitor dispatcher = new AnnotationCheckVisitor();

        // ç»„åˆå¤šä¸ªæ³¨è§£æ£€æŸ¥
        AnnotationVisitor[] visitors = {
            new RestControllerVisitorImpl(),
            new GetMappingVisitorImpl()
        };

        // å•æ¬¡éå†æ‰§è¡Œæ‰€æœ‰æ£€æŸ¥
        for (AnnotationVisitor visitor : visitors) {
            cu.accept(dispatcher, visitor);
        }
    }
}
</code></pre><hr><h3 id=-äºŒå…³é”®æŠ€æœ¯ç‚¹è§£æ>âš™ï¸ <strong>äºŒã€å…³é”®æŠ€æœ¯ç‚¹è§£æ</strong></h3><h4 id=1-åŒé‡åˆ†æ´¾æœºåˆ¶><strong>1. åŒé‡åˆ†æ´¾æœºåˆ¶</strong></h4><ul><li><strong>ç¬¬ä¸€æ¬¡åˆ†æ´¾</strong>ï¼šAST èŠ‚ç‚¹ï¼ˆå¦‚ <code>ClassOrInterfaceDeclaration</code>ï¼‰çš„ <code>accept()</code>æ–¹æ³•è°ƒç”¨è®¿é—®è€…çš„ <code>visit()</code>ã€‚</li><li><strong>ç¬¬äºŒæ¬¡åˆ†æ´¾</strong>ï¼šè®¿é—®è€…çš„ <code>visitRestController()</code>æˆ– <code>visitGetMapping()</code>å¤„ç†å…·ä½“æ³¨è§£é€»è¾‘ã€‚</li></ul><h4 id=2-æ³¨è§£å‚æ•°æå–><strong>2. æ³¨è§£å‚æ•°æå–</strong></h4><p>è‹¥éœ€æ£€æŸ¥æ³¨è§£å‚æ•°ï¼ˆå¦‚ <code>@GetMapping("/path")</code>ï¼‰ï¼Œåœ¨å…·ä½“è®¿é—®è€…ä¸­è§£æ <code>AnnotationExpr</code>ï¼š</p><pre tabindex=0><code>// åœ¨ GetMappingVisitorImpl ä¸­
@Override
public void visitGetMapping(MethodDeclaration method) {
    method.getAnnotations().forEach(anno -&gt; {
        if (&#34;GetMapping&#34;.equals(anno.getNameAsString())) {
            anno.ifSingleMemberValueExpr(expr -&gt; {
                String path = expr.asStringLiteralExpr().asString();
                System.out.println(&#34;Path: &#34; + path);
            });
        }
    });
}
</code></pre><h4 id=3-æ”¯æŒåµŒå¥—æ³¨è§£><strong>3. æ”¯æŒåµŒå¥—æ³¨è§£</strong></h4><p>è‹¥æ³¨è§£åµŒå¥—ï¼ˆå¦‚ <code>@RequestMapping(method = RequestMethod.GET)</code>ï¼‰ï¼Œéœ€é€’å½’è§£æï¼š</p><pre tabindex=0><code>anno.getChildNodes().stream()
    .filter(node -&gt; node instanceof AnnotationExpr)
    .map(node -&gt; (AnnotationExpr) node)
    .forEach(nestedAnno -&gt; { /* å¤„ç†åµŒå¥— */ });
</code></pre><hr><h3 id=-ä¸‰æ€§èƒ½ä¸æ‰©å±•æ€§ä¼˜åŒ–>ğŸš€ <strong>ä¸‰ã€æ€§èƒ½ä¸æ‰©å±•æ€§ä¼˜åŒ–</strong></h3><h4 id=1-é¿å…é‡å¤éå†><strong>1. é¿å…é‡å¤éå†</strong></h4><ul><li><strong>å•æ¬¡éå†å¤šæ£€æŸ¥</strong>ï¼šé€šè¿‡ç»„åˆæ¨¡å¼ï¼Œåœ¨å•æ¬¡ AST éå†ä¸­æ‰§è¡Œæ‰€æœ‰æ³¨è§£æ£€æŸ¥ï¼Œå‡å°‘ I/O å’Œè§£æå¼€é”€ã€‚</li><li><strong>å±€éƒ¨è§£ææ§åˆ¶</strong>ï¼šåœ¨è®¿é—®è€…ä¸­è·³è¿‡æ— å…³èŠ‚ç‚¹ï¼ˆå¦‚å­—æ®µå£°æ˜ï¼‰ï¼Œä»…éå†ç±»å’Œæ–¹æ³•èŠ‚ç‚¹ã€‚</li></ul><h4 id=2-åŠ¨æ€æ‰©å±•æ–°æ³¨è§£><strong>2. åŠ¨æ€æ‰©å±•æ–°æ³¨è§£</strong></h4><p>æ–°å¢æ³¨è§£æ£€æŸ¥åªéœ€ä¸¤æ­¥ï¼š</p><ol><li>åœ¨ <code>AnnotationVisitor</code>æ¥å£æ·»åŠ æ–°æ–¹æ³•ï¼ˆå¦‚ <code>visitPostMapping()</code>ï¼‰ã€‚</li><li>å®ç°æ–°çš„å…·ä½“è®¿é—®è€…ç±»ï¼ˆå¦‚ <code>PostMappingVisitorImpl</code>ï¼‰ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</li></ol><h4 id=3-ç¼“å­˜ä¼˜åŒ–><strong>3. ç¼“å­˜ä¼˜åŒ–</strong></h4><ul><li><strong>æ³¨è§£åç§°ç¼“å­˜</strong>ï¼šé¢„åŠ è½½å¸¸ç”¨æ³¨è§£åï¼ˆå¦‚ <code>RestController</code>ã€<code>GetMapping</code>ï¼‰ï¼Œé¿å…é‡å¤å­—ç¬¦ä¸²æ¯”è¾ƒã€‚</li><li><strong>AST ç¼“å­˜</strong>ï¼šå¯¹åŒä¸€æ–‡ä»¶å¤šæ¬¡æ£€æŸ¥æ—¶ï¼Œå¤ç”¨ <code>CompilationUnit</code>å¯¹è±¡ã€‚</li></ul><hr><h3 id=-å››å¯¹æ¯”è¿‡ç¨‹å¼ä»£ç çš„ä¼˜åŠ¿>âœ… <strong>å››ã€å¯¹æ¯”è¿‡ç¨‹å¼ä»£ç çš„ä¼˜åŠ¿</strong></h3><div class=table-wrapper><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>è®¿é—®è€…æ¨¡å¼</strong></th><th><strong>è¿‡ç¨‹å¼ä»£ç </strong></th></tr></thead><tbody><tr><td>å¤šæ³¨è§£æ£€æŸ¥</td><td>âœ… å•æ¬¡éå†å®Œæˆæ‰€æœ‰æ£€æŸ¥</td><td>âŒ éœ€å¤šæ¬¡éå†æˆ–å¤æ‚æ¡ä»¶åµŒå¥—</td></tr><tr><td>æ–°å¢æ³¨è§£ç±»å‹</td><td>âœ… æ‰©å±•æ–°ç±»å³å¯ï¼Œç¬¦åˆå¼€é—­åŸåˆ™</td><td>âŒ éœ€ä¿®æ”¹åŸæœ‰é€»è¾‘</td></tr><tr><td>å¤æ‚ä»£ç ç»“æ„</td><td>âœ… è‡ªåŠ¨å¤„ç†åµŒå¥—ç±»ã€åŒ¿åç±»</td><td>âŒ éœ€æ‰‹åŠ¨é€’å½’éå†</td></tr><tr><td>æ€§èƒ½ï¼ˆå¤§æ–‡ä»¶ï¼‰</td><td>âœ… é€šè¿‡ç»„åˆè®¿é—®è€…ä¼˜åŒ–</td><td>âŒ å¤šæ¬¡è§£æå¼€é”€å¤§</td></tr></tbody></table></div><hr><h3 id=-äº”æ€»ç»“>ğŸ’ <strong>äº”ã€æ€»ç»“</strong></h3><p>åœ¨è®¿é—®è€…æ¨¡å¼ä¸­å®ç°å¤šæ³¨è§£æ£€æŸ¥çš„æ ¸å¿ƒæ˜¯ï¼š</p><ol><li><strong>åˆ†å±‚è®¾è®¡</strong>ï¼šé€šè¿‡ <code>AnnotationVisitor</code>æ¥å£è§£è€¦æ³¨è§£ç±»å‹ä¸æ£€æŸ¥é€»è¾‘ã€‚</li><li><strong>åŒé‡åˆ†æ´¾</strong>ï¼šåˆ©ç”¨ AST èŠ‚ç‚¹çš„ <code>accept()</code>æ–¹æ³•åŠ¨æ€è°ƒç”¨å…·ä½“æ³¨è§£å¤„ç†å™¨ã€‚</li><li><strong>ç»„åˆä¼˜åŒ–</strong>ï¼šåœ¨å•æ¬¡éå†ä¸­ç»„åˆå¤šä¸ªè®¿é—®è€…ï¼Œé¿å…é‡å¤è§£æã€‚</li></ol><p>æ­¤æ–¹æ¡ˆé€‚ç”¨äºé™æ€ä»£ç åˆ†æã€API è·¯ç”±æ‰«æç­‰åœºæ™¯ï¼Œå…¼å…·<strong>é«˜æ‰©å±•æ€§</strong>ä¸<strong>é«˜æ€§èƒ½</strong>ï¼Œå°¤å…¶é€‚åˆå¤§å‹é¡¹ç›®ä¸­çš„æ³¨è§£è‡ªåŠ¨åŒ–å¤„ç†ã€‚</p><h2 id=é«˜æ•ˆ>é«˜æ•ˆ</h2><p>é’ˆå¯¹ä»£ç ä¸­å¤šä¸ª <code>ClassOrInterfaceDeclaration</code>å’Œ <code>MethodDeclaration</code>çš„é«˜æ•ˆç»„åˆé—®é¢˜ï¼Œå¯é€šè¿‡ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥æå‡æ€§èƒ½ä¸å¯ç»´æŠ¤æ€§ï¼š</p><hr><h3 id=-ä¸€ä¼˜åŒ–æ–¹æ¡ˆç»„åˆè®¿é—®è€…ä¸çŠ¶æ€å…±äº«>ğŸ”§ <strong>ä¸€ã€ä¼˜åŒ–æ–¹æ¡ˆï¼šç»„åˆè®¿é—®è€…ä¸çŠ¶æ€å…±äº«</strong></h3><h4 id=1-å•æ¬¡éå†å¤šæ“ä½œæ ¸å¿ƒä¼˜åŒ–>1. <strong>å•æ¬¡éå†å¤šæ“ä½œï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼‰</strong></h4><p><strong>é—®é¢˜</strong>ï¼šåŸä»£ç å¯¹æ¯ä¸ªè®¿é—®è€…ç‹¬ç«‹éå† ASTï¼Œå¯¼è‡´å¤šæ¬¡è§£æå¼€é”€ã€‚</p><p><strong>è§£å†³</strong>ï¼šåˆ›å»º <strong>å¤åˆè®¿é—®è€…</strong>ï¼Œåœ¨å•æ¬¡éå†ä¸­æ‰§è¡Œæ‰€æœ‰æ£€æŸ¥ï¼š</p><pre tabindex=0><code>public class CompositeAnnotationVisitor implements AnnotationVisitor {
    private final List&lt;AnnotationVisitor&gt; visitors = new ArrayList&lt;&gt;();
    
    public void addVisitor(AnnotationVisitor visitor) {
        visitors.add(visitor);
    }

    @Override
    public void visitRestController(ClassOrInterfaceDeclaration clazz) {
        visitors.forEach(v -&gt; v.visitRestController(clazz));
    }

    @Override
    public void visitGetMapping(MethodDeclaration method) {
        visitors.forEach(v -&gt; v.visitGetMapping(method));
    }
}

// å®¢æˆ·ç«¯è°ƒç”¨
public static void main(String[] args) {
    CompilationUnit cu = StaticJavaParser.parse(&#34;/* æºä»£ç  */&#34;);
    AnnotationCheckVisitor dispatcher = new AnnotationCheckVisitor();
    
    CompositeAnnotationVisitor composite = new CompositeAnnotationVisitor();
    composite.addVisitor(new RestControllerVisitorImpl());
    composite.addVisitor(new GetMappingVisitorImpl());
    
    // ä»…éœ€å•æ¬¡éå†
    cu.accept(dispatcher, composite);
}
</code></pre><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>âœ… <strong>é¿å…é‡å¤éå†</strong>ï¼šAST ä»…è§£æä¸€æ¬¡ï¼Œæ€§èƒ½æå‡æ˜¾è‘—ï¼›</li><li>âœ… <strong>é€»è¾‘è§£è€¦</strong>ï¼šæ–°å¢æ£€æŸ¥åªéœ€æ·»åŠ è®¿é—®è€…ï¼Œæ— éœ€ä¿®æ”¹éå†é€»è¾‘ã€‚</li></ul><hr><h4 id=2-èŠ‚ç‚¹è®¿é—®ä¼˜åŒ–>2. <strong>èŠ‚ç‚¹è®¿é—®ä¼˜åŒ–</strong></h4><p><strong>é—®é¢˜</strong>ï¼š<code>AnnotationCheckVisitor</code>å¯¹æ¯ä¸ªèŠ‚ç‚¹æ— å·®åˆ«åˆ†æ´¾æ£€æŸ¥ã€‚</p><p><strong>è§£å†³</strong>ï¼š<strong>æŒ‰éœ€åˆ†æ´¾</strong>ï¼Œä»…å¯¹ç›®æ ‡èŠ‚ç‚¹è§¦å‘æ“ä½œï¼š</p><pre tabindex=0><code>class AnnotationCheckVisitor extends VoidVisitorAdapter&lt;AnnotationVisitor&gt; {
    @Override
    public void visit(ClassOrInterfaceDeclaration clazz, AnnotationVisitor visitor) {
        super.visit(clazz, visitor);
        if (visitor instanceof RestControllerVisitorImpl) { // ä»…è§¦å‘ç›¸å…³æ£€æŸ¥
            visitor.visitRestController(clazz);
        }
    }

    @Override
    public void visit(MethodDeclaration method, AnnotationVisitor visitor) {
        super.visit(method, visitor);
        if (visitor instanceof GetMappingVisitorImpl) {
            visitor.visitGetMapping(method);
        }
    }
}
</code></pre><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>âš¡ï¸ <strong>å‡å°‘å†—ä½™è°ƒç”¨</strong>ï¼šé¿å…å¯¹éç›®æ ‡è®¿é—®è€…æ‰§è¡Œç©ºæ–¹æ³•ã€‚</li></ul><hr><h4 id=3-çŠ¶æ€å…±äº«ä¸ç»“æœèšåˆ>3. <strong>çŠ¶æ€å…±äº«ä¸ç»“æœèšåˆ</strong></h4><p><strong>é—®é¢˜</strong>ï¼šå„è®¿é—®è€…ç‹¬ç«‹è¾“å‡ºç»“æœï¼Œéš¾ä»¥ç»Ÿä¸€å¤„ç†ã€‚</p><p><strong>è§£å†³</strong>ï¼šå¼•å…¥ <strong>å…±äº«ä¸Šä¸‹æ–‡å¯¹è±¡</strong> èšåˆç»“æœï¼š</p><pre tabindex=0><code>class AnnotationContext {
    public Map&lt;String, Boolean&gt; restControllerResults = new HashMap&lt;&gt;();
    public Map&lt;String, Boolean&gt; getMappingResults = new HashMap&lt;&gt;();
}

class RestControllerVisitorImpl implements AnnotationVisitor {
    private AnnotationContext context;
    
    public RestControllerVisitorImpl(AnnotationContext context) {
        this.context = context;
    }
    
    @Override
    public void visitRestController(ClassOrInterfaceDeclaration clazz) {
        boolean hasAnnotation = ...; // æ£€æŸ¥é€»è¾‘
        context.restControllerResults.put(clazz.getNameAsString(), hasAnnotation);
    }
}
</code></pre><p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p><pre tabindex=0><code>AnnotationContext context = new AnnotationContext();
CompositeAnnotationVisitor composite = new CompositeAnnotationVisitor();
composite.addVisitor(new RestControllerVisitorImpl(context));
composite.addVisitor(new GetMappingVisitorImpl(context));
</code></pre><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>ğŸ’¡ <strong>é›†ä¸­ç®¡ç†ç»“æœ</strong>ï¼šä¾¿äºåç»­ç”ŸæˆæŠ¥å‘Šæˆ–æ‰¹é‡å¤„ç†ã€‚</li></ul><hr><h3 id=-äºŒæ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯>âš™ï¸ <strong>äºŒã€æ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯</strong></h3><div class=table-wrapper><table><thead><tr><th><strong>æ–¹æ¡ˆ</strong></th><th>æ—¶é—´å¤æ‚åº¦</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>åŸæ–¹æ¡ˆï¼ˆå¤šæ¬¡éå†ï¼‰</strong></td><td>O(nÃ—m)ï¼ˆn=èŠ‚ç‚¹æ•°, m=è®¿é—®è€…æ•°ï¼‰</td><td>ç®€å•æ£€æŸ¥ï¼ŒèŠ‚ç‚¹æ•°å°‘</td><td>å®ç°ç®€å•</td></tr><tr><td><strong>å¤åˆè®¿é—®è€…</strong></td><td>O(n)</td><td>å¤šç±»å‹èŠ‚ç‚¹ã€å¤§è§„æ¨¡ä»£ç </td><td>é¿å…é‡å¤éå†ï¼Œæ€§èƒ½æœ€ä¼˜</td></tr><tr><td><strong>æŒ‰éœ€åˆ†æ´¾</strong></td><td>O(n)ï¼ˆå‡å°‘ç©ºè°ƒç”¨ï¼‰</td><td>è®¿é—®è€…é€»è¾‘å¤æ‚ä¸”å·®å¼‚å¤§</td><td>å‡å°‘å†—ä½™æ“ä½œ</td></tr></tbody></table></div><hr><h3 id=-ä¸‰æ‰©å±•ä¼˜åŒ–å»ºè®®>ğŸš€ <strong>ä¸‰ã€æ‰©å±•ä¼˜åŒ–å»ºè®®</strong></h3><ol><li><p><strong>å¹¶è¡Œå¤„ç†</strong></p><p>å¯¹ç‹¬ç«‹ç±»å£°æ˜å¯ç”¨å¤šçº¿ç¨‹æ£€æŸ¥ï¼ˆçº¿ç¨‹å®‰å…¨å‰æä¸‹ï¼‰ï¼š</p><pre tabindex=0><code>cu.findAll(ClassOrInterfaceDeclaration.class).parallelStream()
   .forEach(clazz -&gt; composite.visitRestController(clazz));
</code></pre><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè¶…å¤§å‹é¡¹ç›®ï¼ˆç±»æ•°é‡ > 1000ï¼‰ã€‚</p></li><li><p><strong>å¢é‡è§£æ</strong></p><p>ä»…è§£æå«æ³¨è§£çš„èŠ‚ç‚¹ï¼ˆéœ€ç»“åˆç¬¦å·è§£æï¼‰ï¼š</p><pre tabindex=0><code>cu.getTypes().stream()
  .filter(type -&gt; type.getAnnotations().isNonEmpty())
  .forEach(type -&gt; type.accept(dispatcher, composite));
</code></pre><p><strong>ä¼˜åŠ¿</strong>ï¼šè·³è¿‡æ— æ³¨è§£èŠ‚ç‚¹ï¼Œå‡å°‘ AST éå†æ·±åº¦ã€‚</p></li><li><p><strong>ç¼“å­˜æœºåˆ¶</strong></p><p>å¤ç”¨å·²è§£æçš„ AST ç»“æ„ï¼š</p><pre tabindex=0><code>// å…¨å±€ç¼“å­˜ CompilationUnit
private static Map&lt;String, CompilationUnit&gt; astCache = new ConcurrentHashMap&lt;&gt;();
CompilationUnit cu = astCache.computeIfAbsent(filePath, 
                    path -&gt; StaticJavaParser.parse(new File(path)));
</code></pre><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤šæ¬¡åˆ†æåŒä¸€æ–‡ä»¶ï¼ˆå¦‚æŒç»­é›†æˆç¯å¢ƒï¼‰ã€‚</p></li></ol><hr><h3 id=-æ€»ç»“>ğŸ’ <strong>æ€»ç»“</strong></h3><p>é«˜æ•ˆç»„åˆå¤šç±»ä¸æ–¹æ³•å£°æ˜çš„æ ¸å¿ƒç­–ç•¥ï¼š</p><ol><li><p><strong>å¤åˆè®¿é—®è€…æ¨¡å¼</strong> â†’ å•æ¬¡éå†å®Œæˆå¤šæ£€æŸ¥ï¼›</p></li><li><p><strong>æŒ‰éœ€åˆ†æ´¾</strong> â†’ é¿å…å¯¹éç›®æ ‡è®¿é—®è€…è§¦å‘ç©ºæ“ä½œï¼›</p></li><li><p><strong>å…±äº«ä¸Šä¸‹æ–‡</strong> â†’ ç»Ÿä¸€ç®¡ç†æ£€æŸ¥ç»“æœã€‚</p><p>é’ˆå¯¹è¶…å¤§è§„æ¨¡ä»£ç ï¼Œå¯ç»“åˆ <strong>å¹¶è¡Œå¤„ç†</strong>ã€<strong>å¢é‡è§£æ</strong> å’Œ <strong>ASTç¼“å­˜</strong> è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚æ­¤æ–¹æ¡ˆé€‚ç”¨äºé™æ€åˆ†æå·¥å…·ã€API è·¯ç”±æ‰«æç­‰åœºæ™¯ï¼Œå…¼é¡¾æ•ˆç‡ä¸æ‰©å±•æ€§ã€‚</p></li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/shopee/>Shopee</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Aug 22, 2025 19:16 CST</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/shopeeconcurrent-java/><div class=article-details><h2 class=article-title>ã€Shopeeã€‘Concurrent Java</h2></div></a></article><article><a href=/p/postopiamicro-services/><div class=article-details><h2 class=article-title>ã€Postopiaã€‘Micro-services</h2></div></a></article><article><a href=/p/shopeeannotations/><div class=article-details><h2 class=article-title>ã€Shopeeã€‘Annotations</h2></div></a></article><article><a href=/p/shopeethread/><div class=article-details><h2 class=article-title>ã€Shopeeã€‘Thread</h2></div></a></article><article><a href=/p/shopeeinsight-hub/><div class=article-details><h2 class=article-title>ã€Shopeeã€‘Insight Hub</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 é£é¸¿è¸é›ªæ³¥</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>