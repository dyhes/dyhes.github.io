<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="QPS ÊµãÈáèÂêéÁ´ØÊúçÂä°ÁöÑQPSÔºàQueries Per SecondÔºåÊØèÁßíÊü•ËØ¢ÁéáÔºâÊòØËØÑ‰º∞Á≥ªÁªüÊÄßËÉΩÁöÑÂÖ≥ÈîÆÊåáÊ†áÔºåÈúÄÁªìÂêàÂ∑•ÂÖ∑‰ΩøÁî®„ÄÅ‰ª£Á†ÅÂÆûÁé∞ÂíåÁªüËÆ°ÂàÜÊûê„ÄÇ‰ª•‰∏ãÊòØÁ≥ªÁªüÂåñÁöÑÊµãÈáèÊñπÊ≥ïÔºåÂàÜ‰∏∫ÂõõÂ§ßÂú∫ÊôØÔºö\nüìä Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï Á¶ªÁ∫øÊó•ÂøóÁªüËÆ° ÂéüÁêÜÔºöÂàÜÊûêÊúçÂä°Âô®Êó•ÂøóÔºàÂ¶ÇNginx„ÄÅTomcatËÆøÈóÆÊó•ÂøóÔºâÔºåÁªüËÆ°Âçï‰ΩçÊó∂Èó¥ÂÜÖÁöÑËØ∑Ê±ÇÈáè„ÄÇ Ê≠•È™§Ôºö ÊèêÂèñÊó•Âøó‰∏≠ÁöÑËØ∑Ê±ÇÊó∂Èó¥Êà≥Ôºà‰æãÂ¶Çgrep 'GET /api' access.log | cut -d ' ' -f4 | uniq -cÔºâ2Ôºõ ÊåâÁßí/ÂàÜÈíüËÅöÂêàËØ∑Ê±ÇÊï∞ÔºåÂÖ¨ÂºèÔºöQPS = ÊÄªËØ∑Ê±ÇÊï∞ / Êó∂Èó¥Á™óÂè£ÔºàÁßíÔºâ1Ôºõ ÈÄÇÁî®Âú∫ÊôØÔºöÂéÜÂè≤Êï∞ÊçÆÂàÜÊûê„ÄÅÈùûÂÆûÊó∂ÁõëÊéß„ÄÇ ÂéãÂäõÊµãËØïÂ∑•ÂÖ∑ÔºàÊé®ËçêÔºâ Â∑•ÂÖ∑ÈÄâÊã©Ôºö JMeterÔºöÈÄöËøáËÅöÂêàÊä•ÂëäÔºàAggregate ReportÔºâÁöÑThroughputÂ≠óÊÆµÁõ¥Êé•Ëé∑ÂèñQPS3,8Ôºõ wrk/abÔºöÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÁªìÊûú‰∏≠ÁöÑRequests/secÂç≥QPSÔºàÂ¶Çwrk -t12 -c400 -d30s http://apiÔºâ6,4„ÄÇ ÂÖ≥ÈîÆÈÖçÁΩÆÔºö ËÆæÁΩÆÂπ∂ÂèëÁ∫øÁ®ãÊï∞Ôºà-cÔºâ„ÄÅÊµãËØïÊó∂ÈïøÔºà-dÔºâÔºõ ‰ΩøÁî®Â∏∏ÈáèÂêûÂêêÈáèÂÆöÊó∂Âô®ÔºàJMeterÔºâÊéßÂà∂ËØ∑Ê±ÇÈÄüÁéá3„ÄÇ ‚è±Ô∏è ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ ‰ª£Á†ÅÂüãÁÇπ + Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï\nÊªëÂä®Á™óÂè£ÂÆûÁé∞Ôºö Áî®ÁéØÂΩ¢Êï∞ÁªÑÔºàRing BufferÔºâÂàÜÊ°∂Â≠òÂÇ®ÔºåÊØè200ms‰∏Ä‰∏™Ê°∂ÔºåËÆ∞ÂΩïËØ∑Ê±ÇËÆ°Êï∞5Ôºõ ÊØèÁßíËÅöÂêàÊúÄËøë5‰∏™Ê°∂ÁöÑÊï∞ÊçÆÔºàÁ™óÂè£=1ÁßíÔºâÔºåËÆ°ÁÆóÂÆûÊó∂QPSÔºö QPS = (Ê°∂‚ÇúËÆ°Êï∞ÊÄªÂíå) / 1.0 ÂºÄÊ∫êÁªÑ‰ª∂ÔºöÈòøÈáåSentinel„ÄÅGoogle Guava RateLimiterÂùáÈááÁî®Ê≠§ÁÆóÊ≥ï5,2„ÄÇ ÁõëÊéßÁ≥ªÁªüÈõÜÊàê\nPrometheus + GrafanaÔºö ‰ª£Á†Å‰∏≠Ë∞ÉÁî®Counter.Inc()ÊâìÁÇπÔºõ PromQLÊü•ËØ¢Ôºörate(api_requests_total[1s])5Ôºõ ‰ºòÂäøÔºöÂä®ÊÄÅÂèØËßÜÂåñ„ÄÅÂëäË≠¶ËÅîÂä®„ÄÇ ‚öôÔ∏è ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè ÈõÜÁæ§QPSËÆ°ÁÆóÔºö \\text{ÈõÜÁæ§QPS} = \\sum(\\text{ÂçïÂÆû‰æãQPS}) \\times \\text{Ë¥üËΩΩÂùáË°°ÊïàÁéáÁ≥ªÊï∞ÔºàÈÄöÂ∏∏0.8~0.95Ôºâ} Ê≥®ÊÑè‰∫ãÈ°πÔºö ÈúÄËÅöÂêàÊâÄÊúâËäÇÁÇπÊó•ÂøóÔºàÂ¶ÇELK StackÔºâ2Ôºõ ÊéíÈô§ÂÅ•Â∫∑Ê£ÄÊü•Á≠âÈùû‰∏öÂä°ËØ∑Ê±Ç4„ÄÇ üß™ ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ ÂèÇÊï∞ÈÖçÁΩÆÂéüÂàôÔºö ÊµãËØïÊó∂Èïø‚â•5ÂàÜÈíüÔºåÈÅøÂÖçÁû¨Êó∂Ê≥¢Âä®4Ôºõ Âπ∂ÂèëÁ∫øÁ®ãÊï∞ÈÄêÊ≠•Â¢ûÂä†ÔºåËßÇÂØüÂêûÂêêÈáèÊãêÁÇπÔºàÂìçÂ∫îÊó∂Èó¥Èô°Â¢ûÊó∂ÂÅúÊ≠¢Ôºâ3„ÄÇ ÂÖ∏ÂûãQPSËåÉÂõ¥ÂèÇËÄÉÔºö ÊúçÂä°Á±ªÂûã ÂçïÂÆû‰æãQPSËåÉÂõ¥ ‰ºòÂåñÊñπÂêë Êï∞ÊçÆÂ∫ìËØªÂÜôÔºàMySQLÔºâ 100~5,000 ÁºìÂ≠ò/ÂàÜÂ∫ìÂàÜË°®7 ÂÜÖÂ≠òËÆ°ÁÆóÔºàRedisÔºâ 10,000~100,000 Êó†ÈîÅÁªìÊûÑ7 APIÁΩëÂÖ≥ÔºàNginxÔºâ 100,000+ Ë¥üËΩΩÂùáË°°7 ËØØÂ∑ÆÂ§ÑÁêÜÔºö ÂéãÂäõÊµãËØïÁªìÊûúÈÄöÂ∏∏ÊØîÁêÜËÆ∫ÂÄº‰Ωé20%~30%ÔºàÂõ†GC„ÄÅÁ∫øÁ®ãÂàáÊç¢Ôºâ2Ôºõ ÂØπÊØîÂ§öÂ∑•ÂÖ∑ÁªìÊûúÔºàÂ¶ÇJMeter vs. wrkÔºâ‰∫§ÂèâÈ™åËØÅ6,8„ÄÇ üíé ÊÄªÁªì Âø´ÈÄüÈ™åËØÅÔºöÁî®wrk/abÂéãÊµãÔºåÁõ¥Êé•Ëé∑ÂèñRequests/secÔºõ ÈïøÊúüÁõëÊéßÔºöÈõÜÊàêPrometheusÔºåÂÆûÊó∂ÂàÜÊûêrate()Êõ≤Á∫øÔºõ È´òÁ≤æÂ∫¶Ë¶ÅÊ±ÇÔºöÂÆûÁé∞ÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÔºà200msÂàÜÊ°∂ÔºâÊàñ‰ΩøÁî®SentinelÁ≠âÁªÑ‰ª∂„ÄÇ üí° ÊèêÁ§∫ÔºöÊµãÈáèÊó∂ÈúÄÊòéÁ°ÆÂú∫ÊôØÔºàÂçïÊú∫/ÈõÜÁæ§Ôºâ„ÄÅÊó∂Èó¥Á≤íÂ∫¶ÔºàÁßíÁ∫ß/ÂàÜÈíüÁ∫ßÔºâÔºåÂπ∂ÊéíÈô§Èùû‰∏öÂä°ÊµÅÈáè„ÄÇÂÆûÈôÖQPSÂèóÊï∞ÊçÆÂ∫ì„ÄÅÁΩëÁªú„ÄÅ‰ª£Á†ÅÈÄªËæëÂΩ±ÂìçÔºåÈúÄÁªìÂêàÁì∂È¢àÂàÜÊûê‰ºòÂåñ4,7„ÄÇ\n"><title>„ÄêPostopia„ÄëQPS</title><link rel=canonical href=https://dyhes.github.io/p/postopiaqps/><link rel=stylesheet href=/scss/style.min.f7091bff8043bd3e53b22be6c05dd86b506e8dec4d0d75d249d2dfb0fe074a46.css><meta property='og:title' content="„ÄêPostopia„ÄëQPS"><meta property='og:description' content="QPS ÊµãÈáèÂêéÁ´ØÊúçÂä°ÁöÑQPSÔºàQueries Per SecondÔºåÊØèÁßíÊü•ËØ¢ÁéáÔºâÊòØËØÑ‰º∞Á≥ªÁªüÊÄßËÉΩÁöÑÂÖ≥ÈîÆÊåáÊ†áÔºåÈúÄÁªìÂêàÂ∑•ÂÖ∑‰ΩøÁî®„ÄÅ‰ª£Á†ÅÂÆûÁé∞ÂíåÁªüËÆ°ÂàÜÊûê„ÄÇ‰ª•‰∏ãÊòØÁ≥ªÁªüÂåñÁöÑÊµãÈáèÊñπÊ≥ïÔºåÂàÜ‰∏∫ÂõõÂ§ßÂú∫ÊôØÔºö\nüìä Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï Á¶ªÁ∫øÊó•ÂøóÁªüËÆ° ÂéüÁêÜÔºöÂàÜÊûêÊúçÂä°Âô®Êó•ÂøóÔºàÂ¶ÇNginx„ÄÅTomcatËÆøÈóÆÊó•ÂøóÔºâÔºåÁªüËÆ°Âçï‰ΩçÊó∂Èó¥ÂÜÖÁöÑËØ∑Ê±ÇÈáè„ÄÇ Ê≠•È™§Ôºö ÊèêÂèñÊó•Âøó‰∏≠ÁöÑËØ∑Ê±ÇÊó∂Èó¥Êà≥Ôºà‰æãÂ¶Çgrep 'GET /api' access.log | cut -d ' ' -f4 | uniq -cÔºâ2Ôºõ ÊåâÁßí/ÂàÜÈíüËÅöÂêàËØ∑Ê±ÇÊï∞ÔºåÂÖ¨ÂºèÔºöQPS = ÊÄªËØ∑Ê±ÇÊï∞ / Êó∂Èó¥Á™óÂè£ÔºàÁßíÔºâ1Ôºõ ÈÄÇÁî®Âú∫ÊôØÔºöÂéÜÂè≤Êï∞ÊçÆÂàÜÊûê„ÄÅÈùûÂÆûÊó∂ÁõëÊéß„ÄÇ ÂéãÂäõÊµãËØïÂ∑•ÂÖ∑ÔºàÊé®ËçêÔºâ Â∑•ÂÖ∑ÈÄâÊã©Ôºö JMeterÔºöÈÄöËøáËÅöÂêàÊä•ÂëäÔºàAggregate ReportÔºâÁöÑThroughputÂ≠óÊÆµÁõ¥Êé•Ëé∑ÂèñQPS3,8Ôºõ wrk/abÔºöÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÁªìÊûú‰∏≠ÁöÑRequests/secÂç≥QPSÔºàÂ¶Çwrk -t12 -c400 -d30s http://apiÔºâ6,4„ÄÇ ÂÖ≥ÈîÆÈÖçÁΩÆÔºö ËÆæÁΩÆÂπ∂ÂèëÁ∫øÁ®ãÊï∞Ôºà-cÔºâ„ÄÅÊµãËØïÊó∂ÈïøÔºà-dÔºâÔºõ ‰ΩøÁî®Â∏∏ÈáèÂêûÂêêÈáèÂÆöÊó∂Âô®ÔºàJMeterÔºâÊéßÂà∂ËØ∑Ê±ÇÈÄüÁéá3„ÄÇ ‚è±Ô∏è ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ ‰ª£Á†ÅÂüãÁÇπ + Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï\nÊªëÂä®Á™óÂè£ÂÆûÁé∞Ôºö Áî®ÁéØÂΩ¢Êï∞ÁªÑÔºàRing BufferÔºâÂàÜÊ°∂Â≠òÂÇ®ÔºåÊØè200ms‰∏Ä‰∏™Ê°∂ÔºåËÆ∞ÂΩïËØ∑Ê±ÇËÆ°Êï∞5Ôºõ ÊØèÁßíËÅöÂêàÊúÄËøë5‰∏™Ê°∂ÁöÑÊï∞ÊçÆÔºàÁ™óÂè£=1ÁßíÔºâÔºåËÆ°ÁÆóÂÆûÊó∂QPSÔºö QPS = (Ê°∂‚ÇúËÆ°Êï∞ÊÄªÂíå) / 1.0 ÂºÄÊ∫êÁªÑ‰ª∂ÔºöÈòøÈáåSentinel„ÄÅGoogle Guava RateLimiterÂùáÈááÁî®Ê≠§ÁÆóÊ≥ï5,2„ÄÇ ÁõëÊéßÁ≥ªÁªüÈõÜÊàê\nPrometheus + GrafanaÔºö ‰ª£Á†Å‰∏≠Ë∞ÉÁî®Counter.Inc()ÊâìÁÇπÔºõ PromQLÊü•ËØ¢Ôºörate(api_requests_total[1s])5Ôºõ ‰ºòÂäøÔºöÂä®ÊÄÅÂèØËßÜÂåñ„ÄÅÂëäË≠¶ËÅîÂä®„ÄÇ ‚öôÔ∏è ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè ÈõÜÁæ§QPSËÆ°ÁÆóÔºö \\text{ÈõÜÁæ§QPS} = \\sum(\\text{ÂçïÂÆû‰æãQPS}) \\times \\text{Ë¥üËΩΩÂùáË°°ÊïàÁéáÁ≥ªÊï∞ÔºàÈÄöÂ∏∏0.8~0.95Ôºâ} Ê≥®ÊÑè‰∫ãÈ°πÔºö ÈúÄËÅöÂêàÊâÄÊúâËäÇÁÇπÊó•ÂøóÔºàÂ¶ÇELK StackÔºâ2Ôºõ ÊéíÈô§ÂÅ•Â∫∑Ê£ÄÊü•Á≠âÈùû‰∏öÂä°ËØ∑Ê±Ç4„ÄÇ üß™ ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ ÂèÇÊï∞ÈÖçÁΩÆÂéüÂàôÔºö ÊµãËØïÊó∂Èïø‚â•5ÂàÜÈíüÔºåÈÅøÂÖçÁû¨Êó∂Ê≥¢Âä®4Ôºõ Âπ∂ÂèëÁ∫øÁ®ãÊï∞ÈÄêÊ≠•Â¢ûÂä†ÔºåËßÇÂØüÂêûÂêêÈáèÊãêÁÇπÔºàÂìçÂ∫îÊó∂Èó¥Èô°Â¢ûÊó∂ÂÅúÊ≠¢Ôºâ3„ÄÇ ÂÖ∏ÂûãQPSËåÉÂõ¥ÂèÇËÄÉÔºö ÊúçÂä°Á±ªÂûã ÂçïÂÆû‰æãQPSËåÉÂõ¥ ‰ºòÂåñÊñπÂêë Êï∞ÊçÆÂ∫ìËØªÂÜôÔºàMySQLÔºâ 100~5,000 ÁºìÂ≠ò/ÂàÜÂ∫ìÂàÜË°®7 ÂÜÖÂ≠òËÆ°ÁÆóÔºàRedisÔºâ 10,000~100,000 Êó†ÈîÅÁªìÊûÑ7 APIÁΩëÂÖ≥ÔºàNginxÔºâ 100,000+ Ë¥üËΩΩÂùáË°°7 ËØØÂ∑ÆÂ§ÑÁêÜÔºö ÂéãÂäõÊµãËØïÁªìÊûúÈÄöÂ∏∏ÊØîÁêÜËÆ∫ÂÄº‰Ωé20%~30%ÔºàÂõ†GC„ÄÅÁ∫øÁ®ãÂàáÊç¢Ôºâ2Ôºõ ÂØπÊØîÂ§öÂ∑•ÂÖ∑ÁªìÊûúÔºàÂ¶ÇJMeter vs. wrkÔºâ‰∫§ÂèâÈ™åËØÅ6,8„ÄÇ üíé ÊÄªÁªì Âø´ÈÄüÈ™åËØÅÔºöÁî®wrk/abÂéãÊµãÔºåÁõ¥Êé•Ëé∑ÂèñRequests/secÔºõ ÈïøÊúüÁõëÊéßÔºöÈõÜÊàêPrometheusÔºåÂÆûÊó∂ÂàÜÊûêrate()Êõ≤Á∫øÔºõ È´òÁ≤æÂ∫¶Ë¶ÅÊ±ÇÔºöÂÆûÁé∞ÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÔºà200msÂàÜÊ°∂ÔºâÊàñ‰ΩøÁî®SentinelÁ≠âÁªÑ‰ª∂„ÄÇ üí° ÊèêÁ§∫ÔºöÊµãÈáèÊó∂ÈúÄÊòéÁ°ÆÂú∫ÊôØÔºàÂçïÊú∫/ÈõÜÁæ§Ôºâ„ÄÅÊó∂Èó¥Á≤íÂ∫¶ÔºàÁßíÁ∫ß/ÂàÜÈíüÁ∫ßÔºâÔºåÂπ∂ÊéíÈô§Èùû‰∏öÂä°ÊµÅÈáè„ÄÇÂÆûÈôÖQPSÂèóÊï∞ÊçÆÂ∫ì„ÄÅÁΩëÁªú„ÄÅ‰ª£Á†ÅÈÄªËæëÂΩ±ÂìçÔºåÈúÄÁªìÂêàÁì∂È¢àÂàÜÊûê‰ºòÂåñ4,7„ÄÇ\n"><meta property='og:url' content='https://dyhes.github.io/p/postopiaqps/'><meta property='og:site_name' content='È£ûÈ∏øË∏èÈõ™Ê≥•'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Postopia'><meta property='article:published_time' content='2025-07-02T00:00:00+00:00'><meta property='article:modified_time' content='2025-10-22T16:26:59+08:00'><meta name=twitter:title content="„ÄêPostopia„ÄëQPS"><meta name=twitter:description content="QPS ÊµãÈáèÂêéÁ´ØÊúçÂä°ÁöÑQPSÔºàQueries Per SecondÔºåÊØèÁßíÊü•ËØ¢ÁéáÔºâÊòØËØÑ‰º∞Á≥ªÁªüÊÄßËÉΩÁöÑÂÖ≥ÈîÆÊåáÊ†áÔºåÈúÄÁªìÂêàÂ∑•ÂÖ∑‰ΩøÁî®„ÄÅ‰ª£Á†ÅÂÆûÁé∞ÂíåÁªüËÆ°ÂàÜÊûê„ÄÇ‰ª•‰∏ãÊòØÁ≥ªÁªüÂåñÁöÑÊµãÈáèÊñπÊ≥ïÔºåÂàÜ‰∏∫ÂõõÂ§ßÂú∫ÊôØÔºö\nüìä Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï Á¶ªÁ∫øÊó•ÂøóÁªüËÆ° ÂéüÁêÜÔºöÂàÜÊûêÊúçÂä°Âô®Êó•ÂøóÔºàÂ¶ÇNginx„ÄÅTomcatËÆøÈóÆÊó•ÂøóÔºâÔºåÁªüËÆ°Âçï‰ΩçÊó∂Èó¥ÂÜÖÁöÑËØ∑Ê±ÇÈáè„ÄÇ Ê≠•È™§Ôºö ÊèêÂèñÊó•Âøó‰∏≠ÁöÑËØ∑Ê±ÇÊó∂Èó¥Êà≥Ôºà‰æãÂ¶Çgrep 'GET /api' access.log | cut -d ' ' -f4 | uniq -cÔºâ2Ôºõ ÊåâÁßí/ÂàÜÈíüËÅöÂêàËØ∑Ê±ÇÊï∞ÔºåÂÖ¨ÂºèÔºöQPS = ÊÄªËØ∑Ê±ÇÊï∞ / Êó∂Èó¥Á™óÂè£ÔºàÁßíÔºâ1Ôºõ ÈÄÇÁî®Âú∫ÊôØÔºöÂéÜÂè≤Êï∞ÊçÆÂàÜÊûê„ÄÅÈùûÂÆûÊó∂ÁõëÊéß„ÄÇ ÂéãÂäõÊµãËØïÂ∑•ÂÖ∑ÔºàÊé®ËçêÔºâ Â∑•ÂÖ∑ÈÄâÊã©Ôºö JMeterÔºöÈÄöËøáËÅöÂêàÊä•ÂëäÔºàAggregate ReportÔºâÁöÑThroughputÂ≠óÊÆµÁõ¥Êé•Ëé∑ÂèñQPS3,8Ôºõ wrk/abÔºöÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÁªìÊûú‰∏≠ÁöÑRequests/secÂç≥QPSÔºàÂ¶Çwrk -t12 -c400 -d30s http://apiÔºâ6,4„ÄÇ ÂÖ≥ÈîÆÈÖçÁΩÆÔºö ËÆæÁΩÆÂπ∂ÂèëÁ∫øÁ®ãÊï∞Ôºà-cÔºâ„ÄÅÊµãËØïÊó∂ÈïøÔºà-dÔºâÔºõ ‰ΩøÁî®Â∏∏ÈáèÂêûÂêêÈáèÂÆöÊó∂Âô®ÔºàJMeterÔºâÊéßÂà∂ËØ∑Ê±ÇÈÄüÁéá3„ÄÇ ‚è±Ô∏è ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ ‰ª£Á†ÅÂüãÁÇπ + Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï\nÊªëÂä®Á™óÂè£ÂÆûÁé∞Ôºö Áî®ÁéØÂΩ¢Êï∞ÁªÑÔºàRing BufferÔºâÂàÜÊ°∂Â≠òÂÇ®ÔºåÊØè200ms‰∏Ä‰∏™Ê°∂ÔºåËÆ∞ÂΩïËØ∑Ê±ÇËÆ°Êï∞5Ôºõ ÊØèÁßíËÅöÂêàÊúÄËøë5‰∏™Ê°∂ÁöÑÊï∞ÊçÆÔºàÁ™óÂè£=1ÁßíÔºâÔºåËÆ°ÁÆóÂÆûÊó∂QPSÔºö QPS = (Ê°∂‚ÇúËÆ°Êï∞ÊÄªÂíå) / 1.0 ÂºÄÊ∫êÁªÑ‰ª∂ÔºöÈòøÈáåSentinel„ÄÅGoogle Guava RateLimiterÂùáÈááÁî®Ê≠§ÁÆóÊ≥ï5,2„ÄÇ ÁõëÊéßÁ≥ªÁªüÈõÜÊàê\nPrometheus + GrafanaÔºö ‰ª£Á†Å‰∏≠Ë∞ÉÁî®Counter.Inc()ÊâìÁÇπÔºõ PromQLÊü•ËØ¢Ôºörate(api_requests_total[1s])5Ôºõ ‰ºòÂäøÔºöÂä®ÊÄÅÂèØËßÜÂåñ„ÄÅÂëäË≠¶ËÅîÂä®„ÄÇ ‚öôÔ∏è ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè ÈõÜÁæ§QPSËÆ°ÁÆóÔºö \\text{ÈõÜÁæ§QPS} = \\sum(\\text{ÂçïÂÆû‰æãQPS}) \\times \\text{Ë¥üËΩΩÂùáË°°ÊïàÁéáÁ≥ªÊï∞ÔºàÈÄöÂ∏∏0.8~0.95Ôºâ} Ê≥®ÊÑè‰∫ãÈ°πÔºö ÈúÄËÅöÂêàÊâÄÊúâËäÇÁÇπÊó•ÂøóÔºàÂ¶ÇELK StackÔºâ2Ôºõ ÊéíÈô§ÂÅ•Â∫∑Ê£ÄÊü•Á≠âÈùû‰∏öÂä°ËØ∑Ê±Ç4„ÄÇ üß™ ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ ÂèÇÊï∞ÈÖçÁΩÆÂéüÂàôÔºö ÊµãËØïÊó∂Èïø‚â•5ÂàÜÈíüÔºåÈÅøÂÖçÁû¨Êó∂Ê≥¢Âä®4Ôºõ Âπ∂ÂèëÁ∫øÁ®ãÊï∞ÈÄêÊ≠•Â¢ûÂä†ÔºåËßÇÂØüÂêûÂêêÈáèÊãêÁÇπÔºàÂìçÂ∫îÊó∂Èó¥Èô°Â¢ûÊó∂ÂÅúÊ≠¢Ôºâ3„ÄÇ ÂÖ∏ÂûãQPSËåÉÂõ¥ÂèÇËÄÉÔºö ÊúçÂä°Á±ªÂûã ÂçïÂÆû‰æãQPSËåÉÂõ¥ ‰ºòÂåñÊñπÂêë Êï∞ÊçÆÂ∫ìËØªÂÜôÔºàMySQLÔºâ 100~5,000 ÁºìÂ≠ò/ÂàÜÂ∫ìÂàÜË°®7 ÂÜÖÂ≠òËÆ°ÁÆóÔºàRedisÔºâ 10,000~100,000 Êó†ÈîÅÁªìÊûÑ7 APIÁΩëÂÖ≥ÔºàNginxÔºâ 100,000+ Ë¥üËΩΩÂùáË°°7 ËØØÂ∑ÆÂ§ÑÁêÜÔºö ÂéãÂäõÊµãËØïÁªìÊûúÈÄöÂ∏∏ÊØîÁêÜËÆ∫ÂÄº‰Ωé20%~30%ÔºàÂõ†GC„ÄÅÁ∫øÁ®ãÂàáÊç¢Ôºâ2Ôºõ ÂØπÊØîÂ§öÂ∑•ÂÖ∑ÁªìÊûúÔºàÂ¶ÇJMeter vs. wrkÔºâ‰∫§ÂèâÈ™åËØÅ6,8„ÄÇ üíé ÊÄªÁªì Âø´ÈÄüÈ™åËØÅÔºöÁî®wrk/abÂéãÊµãÔºåÁõ¥Êé•Ëé∑ÂèñRequests/secÔºõ ÈïøÊúüÁõëÊéßÔºöÈõÜÊàêPrometheusÔºåÂÆûÊó∂ÂàÜÊûêrate()Êõ≤Á∫øÔºõ È´òÁ≤æÂ∫¶Ë¶ÅÊ±ÇÔºöÂÆûÁé∞ÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÔºà200msÂàÜÊ°∂ÔºâÊàñ‰ΩøÁî®SentinelÁ≠âÁªÑ‰ª∂„ÄÇ üí° ÊèêÁ§∫ÔºöÊµãÈáèÊó∂ÈúÄÊòéÁ°ÆÂú∫ÊôØÔºàÂçïÊú∫/ÈõÜÁæ§Ôºâ„ÄÅÊó∂Èó¥Á≤íÂ∫¶ÔºàÁßíÁ∫ß/ÂàÜÈíüÁ∫ßÔºâÔºåÂπ∂ÊéíÈô§Èùû‰∏öÂä°ÊµÅÈáè„ÄÇÂÆûÈôÖQPSÂèóÊï∞ÊçÆÂ∫ì„ÄÅÁΩëÁªú„ÄÅ‰ª£Á†ÅÈÄªËæëÂΩ±ÂìçÔºåÈúÄÁªìÂêàÁì∂È¢àÂàÜÊûê‰ºòÂåñ4,7„ÄÇ\n"><link rel="shortcut icon" href=/github.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_b567f26f71c49c33.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>È£ûÈ∏øË∏èÈõ™Ê≥•</a></h1><h2 class=site-description>Ê≤°ÊúâËÆ∞ÂΩïÔºåÂ∞±Ê≤°ÊúâÂèëÁîü</h2></div></header><ol class=menu-social><li><a href=https://leetcode.cn/u/dyhes/ target=_blank title=LeetCode rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 13h7.5"/><path d="M9.424 7.268l4.999-4.999"/><path d="M16.633 16.644l-2.402 2.415a3.189 3.189.0 01-4.524.0l-3.77-3.787a3.223 3.223.0 010-4.544l3.77-3.787a3.189 3.189.0 014.524.0l2.302 2.313"/></svg></a></li><li><a href=https://github.com/dyhes target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:dyheslin@gmail.com target=_blank title=Gmail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-gmail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li><li><a href=mailto:1325574784@qq.com target=_blank title=Mail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 19H5a2 2 0 01-2-2V7a2 2 0 012-2h14a2 2 0 012 2v5.5"/><path d="M3 7l9 6 9-6"/><path d="M19 16l-2 3h4l-2 3"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/categories/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/tags/><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#qps>QPS</a><ol><li><a href=#-Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï>üìä <strong>Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï</strong></a></li><li><a href=#-ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ>‚è±Ô∏è <strong>ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ</strong></a></li><li><a href=#-ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè>‚öôÔ∏è <strong>ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè</strong></a></li><li><a href=#-ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ>üß™ <strong>ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ</strong></a></li><li><a href=#-ÊÄªÁªì>üíé <strong>ÊÄªÁªì</strong></a></li></ol></li><li><a href=#jmeter>JMeter</a><ol><li><a href=#-Ê†∏ÂøÉÂäüËÉΩ‰∏éÁâπÊÄß>‚öôÔ∏è <strong>Ê†∏ÂøÉÂäüËÉΩ‰∏éÁâπÊÄß</strong></a></li><li><a href=#-Êû∂ÊûÑ‰∏éÊ†∏ÂøÉÁªÑ‰ª∂>üß± <strong>Êû∂ÊûÑ‰∏éÊ†∏ÂøÉÁªÑ‰ª∂</strong></a></li><li><a href=#-ÂÆâË£Ö‰∏éÈÖçÁΩÆ>üõ†Ô∏è <strong>ÂÆâË£Ö‰∏éÈÖçÁΩÆ</strong></a></li><li><a href=#-ÊµãËØïËÆæËÆ°‰∏éÊâßË°åÊµÅÁ®ã>üìä <strong>ÊµãËØïËÆæËÆ°‰∏éÊâßË°åÊµÅÁ®ã</strong></a></li><li><a href=#-È´òÁ∫ßÂäüËÉΩ>üöÄ <strong>È´òÁ∫ßÂäüËÉΩ</strong></a></li><li><a href=#-‰ºòÁº∫ÁÇπ‰∏éÈÄÇÁî®Âú∫ÊôØ>‚ö†Ô∏è <strong>‰ºòÁº∫ÁÇπ‰∏éÈÄÇÁî®Âú∫ÊôØ</strong></a></li><li><a href=#-ÊúÄ‰Ω≥ÂÆûË∑µ>üíé <strong>ÊúÄ‰Ω≥ÂÆûË∑µ</strong></a></li><li><a href=#-ÊÄªÁªì-1>üíé <strong>ÊÄªÁªì</strong></a></li></ol></li><li><a href=#sentinel>Sentinel</a><ol><li><a href=#-qpsÊµãÈáèÂéüÁêÜÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï>‚öôÔ∏è <strong>QPSÊµãÈáèÂéüÁêÜÔºöÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï</strong></a></li><li><a href=#-Â¶Ç‰ΩïËé∑ÂèñqpsÊï∞ÊçÆ>üìä <strong>Â¶Ç‰ΩïËé∑ÂèñQPSÊï∞ÊçÆÔºü</strong></a></li><li><a href=#-Ê≥®ÊÑè‰∫ãÈ°π‰∏éÂ∏∏ËßÅÈóÆÈ¢ò>‚ö†Ô∏è <strong>Ê≥®ÊÑè‰∫ãÈ°π‰∏éÂ∏∏ËßÅÈóÆÈ¢ò</strong></a></li><li><a href=#-Êâ©Â±ïÂ∫îÁî®Âü∫‰∫éqpsÁöÑÊµÅÈáèÊéßÂà∂>üõ†Ô∏è <strong>Êâ©Â±ïÂ∫îÁî®ÔºöÂü∫‰∫éQPSÁöÑÊµÅÈáèÊéßÂà∂</strong></a></li><li><a href=#-ÊÄªÁªì-2>üíé <strong>ÊÄªÁªì</strong></a></li></ol></li><li><a href=#ÂéãÂäõÊµãËØï>ÂéãÂäõÊµãËØï</a><ol><li><a href=#-Ê†∏ÂøÉËÉΩÂäõÂØπÊØî>‚öôÔ∏è <strong>Ê†∏ÂøÉËÉΩÂäõÂØπÊØî</strong></a></li><li><a href=#-sentinelÂú®ÂéãÂäõÊµãËØï‰∏≠ÁöÑËæÖÂä©‰ª∑ÂÄº>üîß <strong>SentinelÂú®ÂéãÂäõÊµãËØï‰∏≠ÁöÑËæÖÂä©‰ª∑ÂÄº</strong></a></li><li><a href=#-ËÅîÂêà‰ΩøÁî®ÊñπÊ°àjmeter--sentinel>üõ†Ô∏è <strong>ËÅîÂêà‰ΩøÁî®ÊñπÊ°àÔºöJMeter + Sentinel</strong></a></li><li><a href=#-Ê≥®ÊÑè‰∫ãÈ°π>‚ö†Ô∏è <strong>Ê≥®ÊÑè‰∫ãÈ°π</strong></a></li><li><a href=#-ÊÄªÁªì-3>üíé <strong>ÊÄªÁªì</strong></a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/nutrition/ style=background-color:#93b5cf;color:>ÁßØÈõ™Á≤Æ
</a><a href=/categories/willow/ style=background-color:#dc9123;color:>Êª°ÂüéÈ£éÁµÆ
</a><a href=/categories/moon/ style=background-color:#b7ae8f;color:>ÊúàÊª°Ë•øÊ•º</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/postopiaqps/>„ÄêPostopia„ÄëQPS</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 02, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>3 minute read</time></div></footer></div></header><section class=article-content><h2 id=qps>QPS</h2><p>ÊµãÈáèÂêéÁ´ØÊúçÂä°ÁöÑQPSÔºàQueries Per SecondÔºåÊØèÁßíÊü•ËØ¢ÁéáÔºâÊòØËØÑ‰º∞Á≥ªÁªüÊÄßËÉΩÁöÑÂÖ≥ÈîÆÊåáÊ†áÔºåÈúÄÁªìÂêàÂ∑•ÂÖ∑‰ΩøÁî®„ÄÅ‰ª£Á†ÅÂÆûÁé∞ÂíåÁªüËÆ°ÂàÜÊûê„ÄÇ‰ª•‰∏ãÊòØÁ≥ªÁªüÂåñÁöÑÊµãÈáèÊñπÊ≥ïÔºåÂàÜ‰∏∫ÂõõÂ§ßÂú∫ÊôØÔºö</p><hr><h3 id=-Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï>üìä <strong>Âü∫Á°ÄÊµãÈáèÊñπÊ≥ï</strong></h3><ol><li><strong>Á¶ªÁ∫øÊó•ÂøóÁªüËÆ°</strong><ul><li><strong>ÂéüÁêÜ</strong>ÔºöÂàÜÊûêÊúçÂä°Âô®Êó•ÂøóÔºàÂ¶ÇNginx„ÄÅTomcatËÆøÈóÆÊó•ÂøóÔºâÔºåÁªüËÆ°Âçï‰ΩçÊó∂Èó¥ÂÜÖÁöÑËØ∑Ê±ÇÈáè„ÄÇ</li><li><strong>Ê≠•È™§</strong>Ôºö</li></ul></li></ol><ul><li>ÊèêÂèñÊó•Âøó‰∏≠ÁöÑËØ∑Ê±ÇÊó∂Èó¥Êà≥Ôºà‰æãÂ¶Ç<code>grep 'GET /api' access.log | cut -d ' ' -f4 | uniq -c</code>Ôºâ<a class=link href=@ref>2</a>Ôºõ<ul><li>ÊåâÁßí/ÂàÜÈíüËÅöÂêàËØ∑Ê±ÇÊï∞ÔºåÂÖ¨ÂºèÔºö<code>QPS = ÊÄªËØ∑Ê±ÇÊï∞ / Êó∂Èó¥Á™óÂè£ÔºàÁßíÔºâ</code><a class=link href=@ref>1</a>Ôºõ</li><li><strong>ÈÄÇÁî®Âú∫ÊôØ</strong>ÔºöÂéÜÂè≤Êï∞ÊçÆÂàÜÊûê„ÄÅÈùûÂÆûÊó∂ÁõëÊéß„ÄÇ</li></ul></li></ul><ol start=2><li><strong>ÂéãÂäõÊµãËØïÂ∑•ÂÖ∑</strong>ÔºàÊé®ËçêÔºâ<ul><li>Â∑•ÂÖ∑ÈÄâÊã©Ôºö<ul><li><strong>JMeter</strong>ÔºöÈÄöËøá<code>ËÅöÂêàÊä•ÂëäÔºàAggregate ReportÔºâ</code>ÁöÑ<code>Throughput</code>Â≠óÊÆµÁõ¥Êé•Ëé∑ÂèñQPS<a class=link href=@ref>3,8</a>Ôºõ</li></ul></li></ul></li></ol><ul><li><strong>wrk/ab</strong>ÔºöÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ÔºåÁªìÊûú‰∏≠ÁöÑ<code>Requests/sec</code>Âç≥QPSÔºàÂ¶Ç<code>wrk -t12 -c400 -d30s http://api</code>Ôºâ<a class=link href=@ref>6,4</a>„ÄÇ</li><li>ÂÖ≥ÈîÆÈÖçÁΩÆÔºö<ul><li>ËÆæÁΩÆÂπ∂ÂèëÁ∫øÁ®ãÊï∞Ôºà<code>-c</code>Ôºâ„ÄÅÊµãËØïÊó∂ÈïøÔºà<code>-d</code>ÔºâÔºõ</li></ul></li><li>‰ΩøÁî®<strong>Â∏∏ÈáèÂêûÂêêÈáèÂÆöÊó∂Âô®</strong>ÔºàJMeterÔºâÊéßÂà∂ËØ∑Ê±ÇÈÄüÁéá<a class=link href=@ref>3</a>„ÄÇ</li></ul><hr><h3 id=-ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ>‚è±Ô∏è <strong>ÂÆûÊó∂ÁõëÊéßÂú∫ÊôØ</strong></h3><ol><li><p><strong>‰ª£Á†ÅÂüãÁÇπ + Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï</strong></p><ul><li>ÊªëÂä®Á™óÂè£ÂÆûÁé∞Ôºö<ul><li>Áî®ÁéØÂΩ¢Êï∞ÁªÑÔºàRing BufferÔºâÂàÜÊ°∂Â≠òÂÇ®ÔºåÊØè200ms‰∏Ä‰∏™Ê°∂ÔºåËÆ∞ÂΩïËØ∑Ê±ÇËÆ°Êï∞<a class=link href=@ref>5</a>Ôºõ</li><li>ÊØèÁßíËÅöÂêàÊúÄËøë5‰∏™Ê°∂ÁöÑÊï∞ÊçÆÔºàÁ™óÂè£=1ÁßíÔºâÔºåËÆ°ÁÆóÂÆûÊó∂QPSÔºö<pre tabindex=0><code>QPS = (Ê°∂‚ÇúËÆ°Êï∞ÊÄªÂíå) / 1.0
</code></pre></li></ul></li><li><strong>ÂºÄÊ∫êÁªÑ‰ª∂</strong>ÔºöÈòøÈáåSentinel„ÄÅGoogle Guava RateLimiterÂùáÈááÁî®Ê≠§ÁÆóÊ≥ï<a class=link href=@ref>5,2</a>„ÄÇ</li></ul></li><li><p><strong>ÁõëÊéßÁ≥ªÁªüÈõÜÊàê</strong></p><ul><li>Prometheus + GrafanaÔºö<ul><li>‰ª£Á†Å‰∏≠Ë∞ÉÁî®<code>Counter.Inc()</code>ÊâìÁÇπÔºõ</li></ul></li></ul></li></ol><ul><li>PromQLÊü•ËØ¢Ôºö<code>rate(api_requests_total[1s])</code><a class=link href=@ref>5</a>Ôºõ</li><li><strong>‰ºòÂäø</strong>ÔºöÂä®ÊÄÅÂèØËßÜÂåñ„ÄÅÂëäË≠¶ËÅîÂä®„ÄÇ</li></ul><hr><h3 id=-ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè>‚öôÔ∏è <strong>ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊµãÈáè</strong></h3><ul><li>ÈõÜÁæ§QPSËÆ°ÁÆóÔºö<pre tabindex=0><code>\text{ÈõÜÁæ§QPS} = \sum(\text{ÂçïÂÆû‰æãQPS}) \times \text{Ë¥üËΩΩÂùáË°°ÊïàÁéáÁ≥ªÊï∞ÔºàÈÄöÂ∏∏0.8~0.95Ôºâ}
</code></pre></li><li>Ê≥®ÊÑè‰∫ãÈ°πÔºö<ul><li>ÈúÄËÅöÂêàÊâÄÊúâËäÇÁÇπÊó•ÂøóÔºàÂ¶ÇELK StackÔºâ<a class=link href=@ref>2</a>Ôºõ</li></ul></li><li>ÊéíÈô§ÂÅ•Â∫∑Ê£ÄÊü•Á≠âÈùû‰∏öÂä°ËØ∑Ê±Ç<a class=link href=@ref>4</a>„ÄÇ</li></ul><hr><h3 id=-ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ>üß™ <strong>ÊµãÈáèÂÆûË∑µÂª∫ËÆÆ</strong></h3><ol><li><strong>ÂèÇÊï∞ÈÖçÁΩÆÂéüÂàô</strong>Ôºö<ul><li>ÊµãËØïÊó∂Èïø‚â•5ÂàÜÈíüÔºåÈÅøÂÖçÁû¨Êó∂Ê≥¢Âä®<a class=link href=@ref>4</a>Ôºõ</li><li>Âπ∂ÂèëÁ∫øÁ®ãÊï∞ÈÄêÊ≠•Â¢ûÂä†ÔºåËßÇÂØüÂêûÂêêÈáèÊãêÁÇπÔºàÂìçÂ∫îÊó∂Èó¥Èô°Â¢ûÊó∂ÂÅúÊ≠¢Ôºâ<a class=link href=@ref>3</a>„ÄÇ</li></ul></li><li><strong>ÂÖ∏ÂûãQPSËåÉÂõ¥ÂèÇËÄÉ</strong>Ôºö<div class=table-wrapper><table><thead><tr><th>ÊúçÂä°Á±ªÂûã</th><th>ÂçïÂÆû‰æãQPSËåÉÂõ¥</th><th>‰ºòÂåñÊñπÂêë</th></tr></thead><tbody><tr><td>Êï∞ÊçÆÂ∫ìËØªÂÜôÔºàMySQLÔºâ</td><td>100~5,000</td><td>ÁºìÂ≠ò/ÂàÜÂ∫ìÂàÜË°®<a class=link href=@ref>7</a></td></tr><tr><td>ÂÜÖÂ≠òËÆ°ÁÆóÔºàRedisÔºâ</td><td>10,000~100,000</td><td>Êó†ÈîÅÁªìÊûÑ<a class=link href=@ref>7</a></td></tr><tr><td>APIÁΩëÂÖ≥ÔºàNginxÔºâ</td><td>100,000+</td><td>Ë¥üËΩΩÂùáË°°<a class=link href=@ref>7</a></td></tr></tbody></table></div></li><li><strong>ËØØÂ∑ÆÂ§ÑÁêÜ</strong>Ôºö<ul><li>ÂéãÂäõÊµãËØïÁªìÊûúÈÄöÂ∏∏ÊØîÁêÜËÆ∫ÂÄº‰Ωé20%~30%ÔºàÂõ†GC„ÄÅÁ∫øÁ®ãÂàáÊç¢Ôºâ<a class=link href=@ref>2</a>Ôºõ</li><li>ÂØπÊØîÂ§öÂ∑•ÂÖ∑ÁªìÊûúÔºàÂ¶ÇJMeter vs. wrkÔºâ‰∫§ÂèâÈ™åËØÅ<a class=link href=@ref>6,8</a>„ÄÇ</li></ul></li></ol><hr><h3 id=-ÊÄªÁªì>üíé <strong>ÊÄªÁªì</strong></h3><ul><li><strong>Âø´ÈÄüÈ™åËØÅ</strong>ÔºöÁî®<code>wrk/ab</code>ÂéãÊµãÔºåÁõ¥Êé•Ëé∑Âèñ<code>Requests/sec</code>Ôºõ</li><li><strong>ÈïøÊúüÁõëÊéß</strong>ÔºöÈõÜÊàêPrometheusÔºåÂÆûÊó∂ÂàÜÊûê<code>rate()</code>Êõ≤Á∫øÔºõ</li><li><strong>È´òÁ≤æÂ∫¶Ë¶ÅÊ±Ç</strong>ÔºöÂÆûÁé∞ÊªëÂä®Á™óÂè£ÁÆóÊ≥ïÔºà200msÂàÜÊ°∂ÔºâÊàñ‰ΩøÁî®SentinelÁ≠âÁªÑ‰ª∂„ÄÇ</li></ul><blockquote><p>üí° ÊèêÁ§∫ÔºöÊµãÈáèÊó∂ÈúÄÊòéÁ°ÆÂú∫ÊôØÔºàÂçïÊú∫/ÈõÜÁæ§Ôºâ„ÄÅÊó∂Èó¥Á≤íÂ∫¶ÔºàÁßíÁ∫ß/ÂàÜÈíüÁ∫ßÔºâÔºåÂπ∂ÊéíÈô§Èùû‰∏öÂä°ÊµÅÈáè„ÄÇÂÆûÈôÖQPSÂèóÊï∞ÊçÆÂ∫ì„ÄÅÁΩëÁªú„ÄÅ‰ª£Á†ÅÈÄªËæëÂΩ±ÂìçÔºåÈúÄÁªìÂêàÁì∂È¢àÂàÜÊûê‰ºòÂåñ<a class=link href=@ref>4,7</a>„ÄÇ</p></blockquote><h2 id=jmeter>JMeter</h2><p>JMeter ÊòØÁî± Apache ËΩØ‰ª∂Âü∫Èáë‰ºöÂºÄÂèëÁöÑÂºÄÊ∫êÊÄßËÉΩÊµãËØïÂ∑•ÂÖ∑Ôºå‰∏ªË¶ÅÁî®‰∫éÂØπ Web Â∫îÁî®„ÄÅAPI„ÄÅÊï∞ÊçÆÂ∫ì„ÄÅÊ∂àÊÅØÈòüÂàóÁ≠âÁ≥ªÁªüËøõË°åÂéãÂäõÊµãËØï„ÄÅË¥üËΩΩÊµãËØïÂíåÂäüËÉΩÊµãËØï„ÄÇ‰ª•‰∏ã‰ªéÊ†∏ÂøÉÂäüËÉΩ„ÄÅÊû∂ÊûÑ„ÄÅ‰ΩøÁî®ÊµÅÁ®ã„ÄÅÈ´òÁ∫ßÁâπÊÄßÂèäÊúÄ‰Ω≥ÂÆûË∑µÁ≠âÊñπÈù¢ËØ¶ÁªÜ‰ªãÁªçÔºö</p><hr><h3 id=-Ê†∏ÂøÉÂäüËÉΩ‰∏éÁâπÊÄß>‚öôÔ∏è <strong>Ê†∏ÂøÉÂäüËÉΩ‰∏éÁâπÊÄß</strong></h3><ol><li><strong>Â§öÂçèËÆÆÊîØÊåÅ</strong><ul><li><strong>Web/API</strong>ÔºöHTTP/HTTPSÔºàREST„ÄÅSOAP„ÄÅGraphQLÔºâ<a class=link href=@ref>1,3</a>„ÄÇ</li><li><strong>Êï∞ÊçÆÂ∫ì</strong>ÔºöJDBCÔºàMySQL„ÄÅOracle Á≠âÔºâ<a class=link href=@ref>1,8</a>„ÄÇ</li><li><strong>Ê∂àÊÅØ‰∏≠Èó¥‰ª∂</strong>ÔºöJMS„ÄÅKafka„ÄÅMQTT<a class=link href=@ref>1,3</a>„ÄÇ</li><li><strong>ÂÖ∂‰ªñ</strong>ÔºöFTP„ÄÅTCP„ÄÅSMTP„ÄÅLDAP Á≠â<a class=link href=@ref>3,8</a>„ÄÇ</li></ul></li><li><strong>È´òÂπ∂ÂèëÊ®°Êãü</strong><ul><li>Á∫øÁ®ãÁªÑÔºàThread GroupÔºâÔºöÂÆö‰πâËôöÊãüÁî®Êà∑Êï∞ÔºàÁ∫øÁ®ãÊï∞Ôºâ„ÄÅÂêØÂä®Êó∂Èó¥ÔºàRamp-UpÔºâ„ÄÅÂæ™ÁéØÊ¨°Êï∞<ul><li><em>Á§∫‰æã</em>Ôºö100 Á∫øÁ®ã + 10 Áßí Ramp-Up = ÊØèÁßíÂêØÂä® 10 ‰∏™Áî®Êà∑<a class=link href=@ref>6,10</a>„ÄÇ</li></ul></li><li><strong>ÂàÜÂ∏ÉÂºèÊµãËØï</strong>ÔºöÈÄöËøá Master-Slave Êû∂ÊûÑËÅîÂêàÂ§öÂè∞Êú∫Âô®Á™ÅÁ†¥ÂçïÊú∫Âπ∂ÂèëÈôêÂà∂<a class=link href=@ref>1,3</a>„ÄÇ</li></ul></li><li><strong>ÊµãËØïÂÖÉ‰ª∂‰∏∞ÂØå</strong><ul><li><strong>ÂèñÊ†∑Âô®ÔºàSamplerÔºâ</strong>ÔºöÂèëÈÄÅËØ∑Ê±ÇÔºàÂ¶Ç HTTP RequestÔºâ<a class=link href=@ref>3,8</a>„ÄÇ</li><li><strong>ÁõëÂê¨Âô®ÔºàListenerÔºâ</strong>ÔºöÊî∂ÈõÜÁªìÊûúÔºàËÅöÂêàÊä•Âëä„ÄÅÂìçÂ∫îÊó∂Èó¥ÂõæÔºâ<a class=link href=@ref>2,6</a>„ÄÇ</li><li><strong>ÈÄªËæëÊéßÂà∂Âô®</strong>ÔºöÂæ™ÁéØ„ÄÅÊù°‰ª∂Âà§Êñ≠ÔºàÂ¶Ç If ControllerÔºâ<a class=link href=@ref>8</a>„ÄÇ</li><li><strong>Êñ≠Ë®ÄÔºàAssertionÔºâ</strong>ÔºöÈ™åËØÅÂìçÂ∫îÔºàÁä∂ÊÄÅÁ†Å„ÄÅJSON Â≠óÊÆµÔºâ<a class=link href=@ref>3,8</a>„ÄÇ</li></ul></li><li><strong>Âä®ÊÄÅÊï∞ÊçÆÂ§ÑÁêÜ</strong><ul><li><strong>ÂèÇÊï∞Âåñ</strong>ÔºöCSV Êñá‰ª∂„ÄÅÈöèÊú∫ÂèòÈáèÁîüÊàêÊµãËØïÊï∞ÊçÆ<a class=link href=@ref>3,7</a>„ÄÇ</li><li><strong>ÂÖ≥ËÅîÔºàCorrelationÔºâ</strong>ÔºöÊ≠£ÂàôË°®ËææÂºè/JSON ÊèêÂèñÂô®‰ªéÂìçÂ∫î‰∏≠ÊèêÂèñÂä®ÊÄÅÂÄºÔºàÂ¶Ç TokenÔºâ<a class=link href=@ref>3,8</a>„ÄÇ</li></ul></li></ol><hr><h3 id=-Êû∂ÊûÑ‰∏éÊ†∏ÂøÉÁªÑ‰ª∂>üß± <strong>Êû∂ÊûÑ‰∏éÊ†∏ÂøÉÁªÑ‰ª∂</strong></h3><div class=table-wrapper><table><thead><tr><th><strong>ÁªÑ‰ª∂</strong></th><th><strong>‰ΩúÁî®</strong></th><th><strong>Â∏∏Áî®Á±ªÂûã</strong></th></tr></thead><tbody><tr><td>ÊµãËØïËÆ°ÂàíÔºàTest PlanÔºâ</td><td>È°∂Â±ÇÂÆπÂô®ÔºåÁÆ°ÁêÜÊâÄÊúâÊµãËØïÂÖÉ‰ª∂</td><td>ÂÖ®Â±ÄÂèòÈáèÈÖçÁΩÆ<a class=link href=@ref>3,8</a></td></tr><tr><td>Á∫øÁ®ãÁªÑÔºàThread GroupÔºâ</td><td>ÂÆö‰πâÂπ∂ÂèëÁî®Êà∑Ë°å‰∏∫</td><td>ÊôÆÈÄöÁ∫øÁ®ãÁªÑ„ÄÅsetUp/tearDown Á∫øÁ®ãÁªÑÔºàÈ¢Ñ/ÂêéÂ§ÑÁêÜÔºâ<a class=link href=@ref>6,8</a></td></tr><tr><td>ÂèñÊ†∑Âô®ÔºàSamplerÔºâ</td><td>ÂèëÈÄÅÂçèËÆÆËØ∑Ê±Ç</td><td>HTTPËØ∑Ê±Ç„ÄÅJDBCËØ∑Ê±Ç„ÄÅSOAPËØ∑Ê±Ç<a class=link href=@ref>3,8</a></td></tr><tr><td>ÁõëÂê¨Âô®ÔºàListenerÔºâ</td><td>ÁªìÊûúÂèØËßÜÂåñ</td><td>ËÅöÂêàÊä•ÂëäÔºàThroughput„ÄÅRTÔºâ„ÄÅÁªìÊûúÊ†ëÔºàËØ∑Ê±ÇËØ¶ÊÉÖÔºâ<a class=link href=@ref>2,6</a></td></tr><tr><td>ÂÆöÊó∂Âô®ÔºàTimerÔºâ</td><td>ÊéßÂà∂ËØ∑Ê±ÇÈó¥Èöî</td><td>Âõ∫ÂÆöÂÆöÊó∂Âô®„ÄÅÂêåÊ≠•ÂÆöÊó∂Âô®ÔºàÊ®°ÊãüÁû¨Êó∂Âπ∂ÂèëÔºâ<a class=link href=@ref>6,8</a></td></tr><tr><td>ÂâçÁΩÆ/ÂêéÁΩÆÂ§ÑÁêÜÂô®</td><td>ËØ∑Ê±ÇÂâçÂêéÊâßË°åÈÄªËæë</td><td>JSONÊèêÂèñÂô®„ÄÅBeanShellËÑöÊú¨ÔºàÂä®ÊÄÅÂä†ÂØÜÔºâ<a class=link href=@ref>1,3</a></td></tr></tbody></table></div><hr><h3 id=-ÂÆâË£Ö‰∏éÈÖçÁΩÆ>üõ†Ô∏è <strong>ÂÆâË£Ö‰∏éÈÖçÁΩÆ</strong></h3><ol><li>ÁéØÂ¢ÉË¶ÅÊ±Ç</li></ol><ul><li>Java 8+ ÁéØÂ¢ÉÔºåÂÆòÁΩë‰∏ãËΩΩËß£ÂéãÂç≥Áî®ÔºàÊó†ÈúÄÂÆâË£ÖÔºâ<a class=link href=@ref>5,7</a>„ÄÇ</li></ul><ol start=2><li>ËØ≠Ë®ÄËÆæÁΩÆ</li></ol><ul><li>‰øÆÊîπ <code>bin/jmeter.properties</code>Ôºö<code>language=zh_CN</code> ÂàáÊç¢‰∏≠Êñá<a class=link href=@ref>7,10</a>„ÄÇ</li></ul><ol start=3><li>ÂêØÂä®ÊñπÂºè</li></ol><ul><li><strong>GUIÊ®°Âºè</strong>ÔºöË∞ÉËØïËÑöÊú¨ÔºàÂèåÂáª <code>jmeter.bat</code>Ôºâ<a class=link href=@ref>5,7</a>„ÄÇ<ul><li>ÂëΩ‰ª§Ë°åÊ®°ÂºèÔºöÊ≠£ÂºèÂéãÊµãÔºàËµÑÊ∫êÊ∂àËÄó‰ΩéÔºâÔºö<pre tabindex=0><code>jmeter -n -t test.jmx -l result.jtl -e -o ./report
```[2,7](@ref)
</code></pre></li></ul></li></ul><hr><h3 id=-ÊµãËØïËÆæËÆ°‰∏éÊâßË°åÊµÅÁ®ã>üìä <strong>ÊµãËØïËÆæËÆ°‰∏éÊâßË°åÊµÅÁ®ã</strong></h3><ol><li>ÂàõÂª∫ÊµãËØïËÆ°Âàí</li></ol><ul><li>Âè≥ÈîÆÊµãËØïËÆ°Âàí ‚Üí Ê∑ªÂä†Á∫øÁ®ãÁªÑ ‚Üí ËÆæÁΩÆÁ∫øÁ®ãÊï∞„ÄÅRamp-Up„ÄÅÂæ™ÁéØÊ¨°Êï∞<a class=link href=@ref>9,10</a>„ÄÇ</li></ul><ol start=2><li>Ê∑ªÂä†ËØ∑Ê±Ç‰∏éÈÖçÁΩÆ</li></ol><ul><li>Á∫øÁ®ãÁªÑ‰∏ãÊ∑ªÂä† <strong>HTTP ËØ∑Ê±Ç</strong>ÔºöÈÖçÁΩÆ URL„ÄÅÊñπÊ≥ïÔºàGET/POSTÔºâ„ÄÅÂèÇÊï∞/Ê∂àÊÅØ‰Ωì<a class=link href=@ref>9,10</a>„ÄÇ<ul><li>‰ΩøÁî® <strong>HTTP Cookie ÁÆ°ÁêÜÂô®</strong> Â§ÑÁêÜ‰ºöËØùÔºàÂ¶ÇÁôªÂΩïÊÄÅÔºâ<a class=link href=@ref>2,8</a>„ÄÇ</li></ul></li></ul><ol start=3><li>ÁªìÊûúÁõëÂê¨‰∏éÊñ≠Ë®Ä</li></ol><ul><li>Ê∑ªÂä† <strong>ËÅöÂêàÊä•Âëä</strong>ÔºöÊü•ÁúãÂêûÂêêÈáèÔºàThroughput=QPSÔºâ„ÄÅÂπ≥ÂùáÂìçÂ∫îÊó∂Èó¥„ÄÅÈîôËØØÁéá<a class=link href=@ref>6,9</a>„ÄÇ<ul><li>Ê∑ªÂä† <strong>ÂìçÂ∫îÊñ≠Ë®Ä</strong>ÔºöÈ™åËØÅÁä∂ÊÄÅÁ†ÅÊòØÂê¶‰∏∫ 200<a class=link href=@ref>3,8</a>„ÄÇ</li></ul></li></ul><ol start=4><li>ËøêË°å‰∏éÂàÜÊûê</li></ol><ul><li>ÂëΩ‰ª§Ë°åÂêØÂä®ÊµãËØïÔºåÁîüÊàê HTML Êä•ÂëäÔºàÂåÖÂê´ÂìçÂ∫îÊó∂Èó¥ÂàÜÂ∏É„ÄÅTPS Ë∂ãÂäøÔºâ<a class=link href=@ref>2,7</a>„ÄÇ</li></ul><hr><h3 id=-È´òÁ∫ßÂäüËÉΩ>üöÄ <strong>È´òÁ∫ßÂäüËÉΩ</strong></h3><ol><li>ÂàÜÂ∏ÉÂºèÊµãËØï</li></ol><ul><li><p>ÈÖçÁΩÆÊ≠•È™§Ôºö</p><ol><li>‰∏ªÊéßÊú∫ÔºàMasterÔºâ‰øÆÊîπ <code>jmeter.properties</code> Ê∑ªÂä† Slave IP<a class=link href=@ref>1,3</a>„ÄÇ</li><li>Slave Êú∫ÂêØÂä® <code>jmeter-server</code><a class=link href=@ref>1</a>„ÄÇ</li><li>Master ÈÄâÊã© &ldquo;Remote Start&rdquo; Ëß¶ÂèëÂ§öÊú∫ÂéãÊµã<a class=link href=@ref>3</a>„ÄÇ</li></ol></li></ul><ol start=2><li>ËÑöÊú¨Êâ©Â±ï</li></ol><ul><li><p>BeanShell/GroovyÔºöÂä®ÊÄÅÁîüÊàêÂèÇÊï∞ÔºàÂ¶ÇÊó∂Èó¥Êà≥Áî®Êà∑ÂêçÔºâ</p><pre tabindex=0><code>vars.put(&#34;username&#34;, &#34;user_&#34; + System.currentTimeMillis());
</code></pre></li></ul><ol start=3><li>CI/CD ÈõÜÊàê</li></ol><ul><li><p>Jenkins ÊµÅÊ∞¥Á∫øÔºöËá™Âä®ÂåñÊâßË°åÊÄßËÉΩÊµãËØï</p><pre tabindex=0><code>jmeter(testPlan: &#39;test.jmx&#39;, generateReports: true)
</code></pre></li></ul><hr><h3 id=-‰ºòÁº∫ÁÇπ‰∏éÈÄÇÁî®Âú∫ÊôØ>‚ö†Ô∏è <strong>‰ºòÁº∫ÁÇπ‰∏éÈÄÇÁî®Âú∫ÊôØ</strong></h3><div class=table-wrapper><table><thead><tr><th><strong>Áª¥Â∫¶</strong></th><th><strong>ËØ¥Êòé</strong></th></tr></thead><tbody><tr><td><strong>‰ºòÁÇπ</strong></td><td>‚úÖ ÂºÄÊ∫êÂÖçË¥π„ÄÅË∑®Âπ≥Âè∞„ÄÅÂ§öÂçèËÆÆÊîØÊåÅ„ÄÅÊèí‰ª∂ÁîüÊÄÅ‰∏∞ÂØåÔºàÂ¶Ç WebSocketÔºâ<a class=link href=@ref>1,3</a>„ÄÇ</td></tr><tr><td><strong>Áº∫ÁÇπ</strong></td><td>‚ùå GUI Ê®°ÂºèËµÑÊ∫êÊ∂àËÄóÂ§ß„ÄÅÂ≠¶‰π†Êõ≤Á∫øÈô°Â≥≠„ÄÅÂÆûÊó∂ÁõëÊéßÂº±ÔºàÈúÄÊï¥Âêà PrometheusÔºâ<a class=link href=@ref>1,3</a>„ÄÇ</td></tr><tr><td><strong>ÂÖ∏ÂûãÂú∫ÊôØ</strong></td><td>- Web È´òÂπ∂ÂèëÊµãËØïÔºàÁîµÂïÜÁßíÊùÄÔºâ - API ÂêûÂêêÈáèÊµãÈáè - Êï∞ÊçÆÂ∫ìÊü•ËØ¢ÂéãÊµãÔºàJDBCÔºâ - ÊåÅÁª≠ÈõÜÊàêÂõûÂΩíÊµãËØï<a class=link href=@ref>1,3</a>„ÄÇ</td></tr></tbody></table></div><hr><h3 id=-ÊúÄ‰Ω≥ÂÆûË∑µ>üíé <strong>ÊúÄ‰Ω≥ÂÆûË∑µ</strong></h3><ol><li>ÈÅøÂÖç GUI ÂéãÊµã</li></ol><ul><li>ÂëΩ‰ª§Ë°åÊâßË°åÂáèÂ∞ëËµÑÊ∫êÂç†Áî®ÔºåÊèêÂçáÂéãÊµãÁ≤æÂ∫¶<a class=link href=@ref>1,7</a>„ÄÇ</li></ul><ol start=2><li>ÂèÇÊï∞Âåñ‰∏éÂÖ≥ËÅî</li></ol><ul><li>‰ΩøÁî® CSV Êñá‰ª∂ÂàÜÁ¶ªÊµãËØïÊï∞ÊçÆÔºåÊ≠£ÂàôË°®ËææÂºèÊèêÂèñÂä®ÊÄÅ Token<a class=link href=@ref>3,7</a>„ÄÇ</li></ul><ol start=3><li>ÁªìÊûúÂàÜÊûê‰ºòÂåñ</li></ol><ul><li><strong>ÂêûÂêêÈáèÁì∂È¢à</strong>ÔºöËã• Throughput ‰∏çÈöèÁ∫øÁ®ãÊï∞Â¢ûÈïøÔºåÈúÄÊ£ÄÊü•Êï∞ÊçÆÂ∫ì/‰ª£Á†ÅÊÄßËÉΩ<a class=link href=@ref>6,9</a>„ÄÇ<ul><li><strong>ÈîôËØØÁéáÈòàÂÄº</strong>Ôºö>1% ÈúÄÂÆö‰ΩçÂéüÂõ†ÔºàÂ¶ÇË∂ÖÊó∂„ÄÅËµÑÊ∫ê‰∏çË∂≥Ôºâ<a class=link href=@ref>6</a>„ÄÇ</li></ul></li></ul><hr><h3 id=-ÊÄªÁªì-1>üíé <strong>ÊÄªÁªì</strong></h3><p>JMeter ÊòØ‰ºÅ‰∏öÁ∫ßÊÄßËÉΩÊµãËØïÁöÑÊ†∏ÂøÉÂ∑•ÂÖ∑ÔºåÂ∞§ÂÖ∂ÈÄÇÂêà<strong>Â§çÊùÇÂú∫ÊôØÊ®°Êãü</strong>ÔºàÂ¶ÇÂàÜÂ∏ÉÂºèÂéãÊµã„ÄÅÂä®ÊÄÅÂèÇÊï∞ÂåñÔºâÂíå<strong>Â§öÂçèËÆÆË¶ÜÁõñ</strong>ÈúÄÊ±Ç„ÄÇÂØπ‰∫éËΩªÈáèÁ∫ß API ÊµãËØïÂèØÈÄâÁî® Locust/GatlingÔºõËã•ËøΩÊ±Ç‰ºÅ‰∏öÁ∫ßÊîØÊåÅÔºåLoadRunner ÊòØÊõø‰ª£ÊñπÊ°à<a class=link href=@ref>1,3</a>„ÄÇ
‚Äã<strong>Â≠¶‰π†Âª∫ËÆÆ</strong>‚ÄãÔºö‰ªéÂü∫Á°ÄÁ∫øÁ®ãÁªÑ+HTTPËØ∑Ê±ÇÂÖ•ÊâãÔºåÈÄêÊ≠•ËøõÈò∂ÂèÇÊï∞Âåñ„ÄÅÂàÜÂ∏ÉÂºèÂíåCIÈõÜÊàêÔºåÁªìÂêàËÅöÂêàÊä•Âëä‰∏éHTMLÂèØËßÜÂåñÁ≤æÂáÜÂÆö‰ΩçÊÄßËÉΩÁì∂È¢à„ÄÇ</p><h2 id=sentinel>Sentinel</h2><p>ÊòØÁöÑÔºåSentinel <strong>ÂÆåÂÖ®ÂÖ∑Â§áÊµãÈáèQPSÔºàÊØèÁßíÊü•ËØ¢ÁéáÔºâÁöÑËÉΩÂäõ</strong>ÔºåÂπ∂‰∏îËøôÊòØÂÖ∂ÊµÅÈáèÊéßÂà∂ÁöÑÊ†∏ÂøÉÂäüËÉΩ‰πã‰∏Ä„ÄÇ‰ª•‰∏ãÊòØSentinelÂÆûÁé∞QPSÊµãÈáèÁöÑÂéüÁêÜ„ÄÅÊñπÂºèÂíåÂ∫îÁî®Âú∫ÊôØÁöÑËØ¶ÁªÜËØ¥ÊòéÔºö</p><hr><h3 id=-qpsÊµãÈáèÂéüÁêÜÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï>‚öôÔ∏è <strong>QPSÊµãÈáèÂéüÁêÜÔºöÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï</strong></h3><p>Sentinel ÈÄöËøá<strong>ÊªëÂä®Êó∂Èó¥Á™óÂè£ÁÆóÊ≥ï</strong>Á≤æÁ°ÆÁªüËÆ°Âçï‰ΩçÊó∂Èó¥ÂÜÖÁöÑËØ∑Ê±ÇÈáèÔºåÂÖ∂Ê†∏ÂøÉËÆæËÆ°Â¶Ç‰∏ãÔºö</p><ol><li><strong>Êó∂Èó¥Á™óÂè£ÂàíÂàÜ</strong><ul><li>‰ΩøÁî®‰∏Ä‰∏™Âæ™ÁéØÊï∞ÁªÑÔºàÂ¶ÇÈïøÂ∫¶‰∏∫2ÔºâË°®Á§∫Êó∂Èó¥Á™óÂè£ÔºåÊØè‰∏™Á™óÂè£Áß∞‰∏∫‰∏Ä‰∏™‚ÄúÊ°∂‚ÄùÔºàBucketÔºâÔºåÊØè‰∏™Ê°∂ËÆ∞ÂΩïÂõ∫ÂÆöÊó∂ÈïøÔºàÂ¶Ç500msÔºâÂÜÖÁöÑËØ∑Ê±ÇÊï∞ÊçÆ<a class=link href=@ref>2,6</a>„ÄÇ</li><li>‰æãÂ¶ÇÔºöÁªüËÆ°1ÁßíÂÜÖÁöÑQPSÊó∂ÔºåÁ™óÂè£ÂåÖÂê´‰∏§‰∏™500msÁöÑÊ°∂ÔºåÈÄöËøáÊªöÂä®Ë¶ÜÁõñÂÆûÁé∞ÁßíÁ∫ßÁªüËÆ°„ÄÇ</li></ul></li><li><strong>ÁªüËÆ°Áª¥Â∫¶</strong><ul><li><strong>ÊØ´ÁßíÁ∫ßÁ™óÂè£</strong>ÔºöÁî®‰∫éÂÆûÊó∂ÈôêÊµÅÂà§Êñ≠ÔºàÂ¶ÇÂø´ÈÄüÂ§±Ë¥•ËßÑÂàôÔºâ„ÄÇ</li><li><strong>ÁßíÁ∫ß/ÂàÜÈíüÁ∫ßÁ™óÂè£</strong>ÔºöÁî®‰∫éÁõëÊéßÊó•ÂøóÂíå‰ª™Ë°®ÁõòÂ±ïÁ§∫Ôºå‰æãÂ¶ÇÊØèÂàÜÈíü60‰∏™1ÁßíÁ™óÂè£<a class=link href=@ref>4,6</a>„ÄÇ</li></ul></li><li><strong>Êï∞ÊçÆËÆ∞ÂΩï</strong>
ÊØè‰∏™BucketÂ≠òÂÇ®‰ª•‰∏ãÂÖ≥ÈîÆÊåáÊ†áÔºö<ul><li><code>passQps</code>ÔºöÈÄöËøáÁöÑËØ∑Ê±ÇÊï∞</li><li><code>blockQps</code>ÔºöË¢´ÈôêÊµÅÁöÑËØ∑Ê±ÇÊï∞</li><li><code>successQps</code>ÔºöÊàêÂäüÂÆåÊàêÁöÑËØ∑Ê±ÇÊï∞</li><li><code>rt</code>ÔºàResponse TimeÔºâÔºöËØ∑Ê±ÇÂìçÂ∫îÊó∂Èó¥<a class=link href=@ref>6</a>„ÄÇ</li></ul></li></ol><hr><h3 id=-Â¶Ç‰ΩïËé∑ÂèñqpsÊï∞ÊçÆ>üìä <strong>Â¶Ç‰ΩïËé∑ÂèñQPSÊï∞ÊçÆÔºü</strong></h3><ol><li><p><strong>ÊéßÂà∂Âè∞ÂÆûÊó∂ÁõëÊéß</strong>
Sentinel Dashboard Áõ¥Êé•Â±ïÁ§∫ÊØè‰∏™ËµÑÊ∫êÁöÑÂÆûÊó∂QPS„ÄÅÈòªÂ°ûQPS„ÄÅÂºÇÂ∏∏ÁéáÁ≠âÊï∞ÊçÆÔºåÊîØÊåÅÂä®ÊÄÅÂà∑Êñ∞<a class=link href=@ref>1</a>„ÄÇ</p></li><li><p><strong>Êó•ÂøóÊñá‰ª∂ËæìÂá∫</strong>
Sentinel ‰ºöÁîüÊàêÁßíÁ∫ßÁõëÊéßÊó•ÂøóÔºàË∑ØÂæÑÔºö<code>${user_home}/logs/csp/${app_name}-${pid}-metrics.log</code>ÔºâÔºåÊ†ºÂºèÁ§∫‰æãÔºö</p><pre tabindex=0><code>Êó∂Èó¥Êà≥|Ê†ºÂºèÂåñÊó∂Èó¥|ËµÑÊ∫êÂêç|passQps|blockQps|successQps|ÂºÇÂ∏∏Êï∞|Âπ≥ÂùáRT  
</code></pre><p>‰æãÂ¶ÇÔºö<code>1568253804000|2019-09-12 10:03:24|orderService|15|2|15|0|5</code> Ë°®Á§∫ËØ•ÁßíÂÜÖÈÄöËøá15Ê¨°ËØ∑Ê±ÇÔºåÈòªÂ°û2Ê¨°<a class=link href=@ref>4</a>„ÄÇ</p></li><li><p><strong>APIÊé•Âè£Êü•ËØ¢</strong>
ÈÄöËøá <code>ClusterNode</code> ÂØπË±°ÂèØÁºñÁ®ãËé∑ÂèñQPSÔºö</p><pre tabindex=0><code>ClusterNode node = ClusterBuilderSlot.getClusterNode(&#34;ËµÑÊ∫êÂêç&#34;);
long passQps = node.passQps(); // ÂΩìÂâçÁßíÈÄöËøáQPS
long blockQps = node.blockQps(); // ÂΩìÂâçÁßíÈôêÊµÅQPS
</code></pre></li></ol><hr><h3 id=-Ê≥®ÊÑè‰∫ãÈ°π‰∏éÂ∏∏ËßÅÈóÆÈ¢ò>‚ö†Ô∏è <strong>Ê≥®ÊÑè‰∫ãÈ°π‰∏éÂ∏∏ËßÅÈóÆÈ¢ò</strong></h3><ol><li><strong>QPSÁªüËÆ°ËØØÂ∑ÆÈóÆÈ¢ò</strong><ul><li>Âú®È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÔºåËã•ËØ∑Ê±ÇË∑®Ë∂ä‰∏§‰∏™Êó∂Èó¥Á™óÂè£ÔºàÂ¶Ç1ÁßíÊú´Â∞æÁöÑËØ∑Ê±ÇÂª∂ËøüÂà∞‰∏ã‰∏ÄÁßíÁªüËÆ°ÔºâÔºåÂèØËÉΩÂØºËá¥Êó•Âøó‰∏≠QPSÊú™ËææÈòàÂÄºÂç¥Ë¢´ÈôêÊµÅ<a class=link href=@ref>4</a>„ÄÇ</li><li><strong>Ëß£ÂÜ≥ÊñπÊ°à</strong>ÔºöÁ°Æ‰øùÁªüËÆ°Á™óÂè£ÂØπÈΩêÔºàÂ¶Ç‰ΩøÁî®Áõ∏ÂêåÊó∂Èó¥Êà≥ÂêåÊ≠•Â§öÁª¥ÁªüËÆ°Ôºâ„ÄÇ</li></ul></li><li><strong>ÊÄßËÉΩÊçüËÄó</strong>
Sentinel ÁöÑQPSÁªüËÆ°ÂØπÊÄßËÉΩÂΩ±ÂìçÊûÅÂ∞èÔºåÂçïÊú∫QPS‰Ωé‰∫é25‰∏áÊó∂ÊçüËÄóÂèØÂøΩÁï•ÔºàÁ∫¶5%~10%ÂΩ±ÂìçÂá∫Áé∞Âú®Ë∂ÖÈ´òÂπ∂ÂèëÂú∫ÊôØÔºâ<a class=link href=@ref>3</a>„ÄÇ</li></ol><hr><h3 id=-Êâ©Â±ïÂ∫îÁî®Âü∫‰∫éqpsÁöÑÊµÅÈáèÊéßÂà∂>üõ†Ô∏è <strong>Êâ©Â±ïÂ∫îÁî®ÔºöÂü∫‰∫éQPSÁöÑÊµÅÈáèÊéßÂà∂</strong></h3><p>Sentinel ‰∏ç‰ªÖÊµãÈáèQPSÔºåËøòËÉΩÂü∫‰∫éQPSÂÆûÊñΩÂä®ÊÄÅÊéßÂà∂Ôºö</p><ol><li><p><strong>ÊµÅÈáèÊéßÂà∂ËßÑÂàô</strong></p><ul><li><p>ËÆæÁΩÆQPSÈòàÂÄºÔºàÂ¶Ç20/sÔºâÔºåË∂ÖÂá∫Êó∂Ëß¶ÂèëÈôêÊµÅÔºàÂø´ÈÄüÂ§±Ë¥•„ÄÅÈ¢ÑÁÉ≠„ÄÅÊéíÈòüÔºâ„ÄÇ</p></li><li><p>Á§∫‰æãËßÑÂàôÈÖçÁΩÆÔºö</p><pre tabindex=0><code>FlowRule rule = new FlowRule(&#34;orderService&#34;);
rule.setCount(20); // QPSÈòàÂÄº=20
rule.setGrade(RuleConstant.FLOW_GRADE_QPS);
</code></pre></li></ul></li><li><p><strong>ÁÜîÊñ≠ÈôçÁ∫ß</strong>
ÂΩìQPSÊøÄÂ¢ûÂØºËá¥ÊÖ¢Ë∞ÉÁî®ÊØî‰æãÊàñÂºÇÂ∏∏ÁéáË∂ÖÊ†áÊó∂ÔºåËá™Âä®ÁÜîÊñ≠ÊúçÂä°<a class=link href=@ref>2</a>„ÄÇ</p></li></ol><hr><h3 id=-ÊÄªÁªì-2>üíé <strong>ÊÄªÁªì</strong></h3><ul><li><strong>ÊµãÈáèËÉΩÂäõ</strong>ÔºöSentinel ÈÄöËøáÊªëÂä®Á™óÂè£Á≤æÁ°ÆÁªüËÆ°QPSÔºåÊîØÊåÅÂÆûÊó∂ÁõëÊéß„ÄÅÊó•ÂøóËæìÂá∫ÂíåAPIÊü•ËØ¢„ÄÇ</li><li><strong>Ê†∏ÂøÉ‰ª∑ÂÄº</strong>Ôºö‰∏ç‰ªÖÊòØÊµãÈáèÂ∑•ÂÖ∑ÔºåÊõ¥ÊòØÂü∫‰∫éQPSÂÆûÁé∞ÊµÅÈáèÊéßÂà∂„ÄÅÁÜîÊñ≠ÈôçÁ∫ßÁöÑÊ≤ªÁêÜÊ°ÜÊû∂<a class=link href=@ref>1,2</a>„ÄÇ</li><li><strong>ÈÄÇÁî®Âú∫ÊôØ</strong>ÔºöÂæÆÊúçÂä°Êé•Âè£ÈôêÊµÅ„ÄÅÁΩëÂÖ≥Â±ÇÊµÅÈáèÊï¥ÂΩ¢ÔºàÂ¶ÇNginx+Sentinel SidecarÔºâ<a class=link href=@ref>1</a>„ÄÅÂéãÊµãÊÄßËÉΩÂàÜÊûê<a class=link href=@ref>3</a>„ÄÇ</li></ul><p>Â¶ÇÈúÄÊ∑±Â∫¶ÈõÜÊàêÔºåÂª∫ËÆÆÁªìÂêàÊéßÂà∂Âè∞ÂíåÊó•ÂøóÂàÜÊûêÔºåÂπ∂Ê≥®ÊÑèÈ´òÂπ∂Âèë‰∏ãÁöÑÁ™óÂè£ÂêåÊ≠•ÈóÆÈ¢ò„ÄÇ</p><h2 id=ÂéãÂäõÊµãËØï>ÂéãÂäõÊµãËØï</h2><p>Sentinel Âíå JMeter ÁöÑÊ†∏ÂøÉÂÆö‰ΩçÂ≠òÂú®Êú¨Ë¥®Â∑ÆÂºÇÔºö<strong>Sentinel Êó†Ê≥ïÁõ¥Êé•Êõø‰ª£ JMeter ËøõË°åÊµÅÈáèÊ®°ÊãüÂíåÂéãÂäõÊµãËØï</strong>Ôºå‰ΩÜÂÆÉËÉΩÈÄöËøá‰∏éÂéãÊµãÂ∑•ÂÖ∑ÁªìÂêàÔºåÂú®ÂéãÂäõÊµãËØï‰∏≠ÂÆûÁé∞Á≤æÂáÜÁöÑÊµÅÈáèÊ≤ªÁêÜ‰∏éÁõëÊéß„ÄÇ‰ª•‰∏ãÊòØÂÖ∑‰ΩìÂàÜÊûêÔºö</p><hr><h3 id=-Ê†∏ÂøÉËÉΩÂäõÂØπÊØî>‚öôÔ∏è <strong>Ê†∏ÂøÉËÉΩÂäõÂØπÊØî</strong></h3><div class=table-wrapper><table><thead><tr><th><strong>ËÉΩÂäõÁª¥Â∫¶</strong></th><th><strong>Sentinel</strong></th><th><strong>JMeter</strong></th></tr></thead><tbody><tr><td><strong>ÊµÅÈáèÁîüÊàê</strong></td><td>‚ùå Êó†Ê≥ï‰∏ªÂä®Ê®°ÊãüËØ∑Ê±Ç</td><td>‚úÖ ÈÄöËøáÁ∫øÁ®ãÁªÑ„ÄÅÂÆöÊó∂Âô®Á≠âÊ®°ÊãüÈ´òÂπ∂ÂèëÊµÅÈáè</td></tr><tr><td><strong>QPSÂéãÂäõÊµãËØï</strong></td><td>‰ªÖË¢´Âä®ÁªüËÆ°ÂÆûÊó∂QPSÔºå‰∏çÁîüÊàêÂéãÂäõ<a class=link href=@ref>1,5</a></td><td>‚úÖ Ê†∏ÂøÉÂäüËÉΩÔºåÂèØÁ≤æÁ°ÆÊéßÂà∂Âπ∂ÂèëÈáè„ÄÅÊåÅÁª≠Êó∂Èó¥Á≠â<a class=link href=@ref>7,9</a></td></tr><tr><td><strong>ÈôêÊµÅÁÜîÊñ≠ÊéßÂà∂</strong></td><td>‚úÖ Ê†∏ÂøÉÂäüËÉΩÔºàÂ¶ÇQPSÈòàÂÄº„ÄÅÁÜîÊñ≠Á≠ñÁï•Ôºâ<a class=link href=@ref>1,5</a></td><td>‚ùå ÈúÄ‰æùËµñÂ§ñÈÉ®ÁªÑ‰ª∂ÔºàÂ¶ÇÈõÜÊàêSentinelÔºâ</td></tr><tr><td><strong>ÁõëÊéßÂàÜÊûê</strong></td><td>‚úÖ ÂÆûÊó∂Â±ïÁ§∫QPS„ÄÅÈòªÂ°ûÈáè„ÄÅÂºÇÂ∏∏ÁéáÁ≠â<a class=link href=@ref>1,2</a></td><td>‚úÖ ÈÄöËøáÁõëÂê¨Âô®Êî∂ÈõÜÂêûÂêêÈáè„ÄÅÂìçÂ∫îÊó∂Èó¥Á≠â<a class=link href=@ref>7</a></td></tr></tbody></table></div><p><strong>ÁªìËÆ∫</strong>Ôºö</p><ul><li><strong>JMeter</strong> ÊòØ‰∏ì‰∏öÁöÑ<strong>ÂéãÂäõÊµãËØïÂ∑•ÂÖ∑</strong>ÔºåÁî®‰∫éÊ®°ÊãüÊµÅÈáè„ÄÅÂà∂ÈÄ†Á≥ªÁªüÂéãÂäõ„ÄÇ</li><li><strong>Sentinel</strong> ÊòØ<strong>ÊµÅÈáèÊ≤ªÁêÜÁªÑ‰ª∂</strong>ÔºåÁî®‰∫éÂú®ÁúüÂÆûÊµÅÈáèÊàñÊµãËØïÊµÅÈáè‰∏≠ÂÆûÊñΩÈò≤Êä§Á≠ñÁï•ÔºàÂ¶ÇÈôêÊµÅÁÜîÊñ≠ÔºâÔºåÂπ∂ÁõëÊéßÁ≥ªÁªüË°®Áé∞„ÄÇ</li></ul><hr><h3 id=-sentinelÂú®ÂéãÂäõÊµãËØï‰∏≠ÁöÑËæÖÂä©‰ª∑ÂÄº>üîß <strong>SentinelÂú®ÂéãÂäõÊµãËØï‰∏≠ÁöÑËæÖÂä©‰ª∑ÂÄº</strong></h3><p>ËôΩÁÑ∂Êó†Ê≥ï‰∏ªÂä®ÁîüÊàêÊµÅÈáèÔºå‰ΩÜSentinelÂú®ÂéãÂäõÊµãËØï‰∏≠ÊâÆÊºîÂÖ≥ÈîÆËßíËâ≤Ôºö</p><ol><li><strong>ÂÆûÊó∂QPSÁõëÊéß‰∏éÈ™åËØÅ</strong><ul><li>Âú®JMeterÂéãÊµãËøáÁ®ã‰∏≠ÔºåSentinelÂèØÂÆûÊó∂ÁªüËÆ°Êé•Âè£ÁöÑ<strong>ÂÆûÈôÖQPS</strong>„ÄÅ<strong>Ë¢´ÈôêÊµÅËØ∑Ê±ÇÊï∞</strong>„ÄÅ<strong>ÁÜîÊñ≠Áä∂ÊÄÅ</strong>Á≠âÔºåÂ∏ÆÂä©È™åËØÅÁ≥ªÁªüÊòØÂê¶ËææÂà∞È¢ÑÊúüÂêûÂêêÈáè<a class=link href=@ref>1,6</a>„ÄÇ</li><li>‰æãÂ¶ÇÔºöÈÄöËøáÊéßÂà∂Âè∞Êü•Áúã <code>orderService</code> ÁöÑQPSÊòØÂê¶Á®≥ÂÆöÂú®È¢ÑËÆæÈòàÂÄºÔºàÂ¶Ç1000/sÔºâ<a class=link href=@ref>2</a>„ÄÇ</li></ul></li><li><strong>Âä®ÊÄÅËßÑÂàôËß¶ÂèëÊµãËØï</strong><ul><li>ÁªìÂêàJMeterÁöÑÈ´òÂπ∂ÂèëËØ∑Ê±ÇÔºåÊµãËØïSentinelÁöÑ<strong>ÈôêÊµÅËßÑÂàô</strong>ÔºàÂ¶ÇQPSÈòàÂÄºÔºâÂíå<strong>ÁÜîÊñ≠Á≠ñÁï•</strong>ÔºàÂ¶ÇÊÖ¢Ë∞ÉÁî®ÊØî‰æãÔºâÊòØÂê¶ÊåâÈ¢ÑÊúüÁîüÊïà<a class=link href=@ref>4,6</a>„ÄÇ</li><li>Á§∫‰æãÔºöÂΩìJMeterÂèëÈÄÅ2000 QPSÊó∂ÔºåËßÇÂØüSentinelÊòØÂê¶Êã¶Êà™Ë∂ÖÈòàÂÄºÁöÑËØ∑Ê±ÇÔºàËøîÂõû429Áä∂ÊÄÅÁ†ÅÔºâ<a class=link href=@ref>2,5</a>„ÄÇ</li></ul></li><li><strong>Á≥ªÁªü‰øùÊä§Á≠ñÁï•È™åËØÅ</strong><ul><li>ÈÄöËøáÂéãÊµãËß¶ÂèëSentinelÁöÑ<strong>Á≥ªÁªüËá™ÈÄÇÂ∫îËßÑÂàô</strong>ÔºàÂ¶ÇCPU >80%Êó∂Ëá™Âä®ÈôêÊµÅÔºâÔºåÈ™åËØÅÁ≥ªÁªüÂú®ËµÑÊ∫êÁì∂È¢à‰∏ãÁöÑËá™Êàë‰øùÊä§ËÉΩÂäõ<a class=link href=@ref>5,6</a>„ÄÇ</li></ul></li></ol><hr><h3 id=-ËÅîÂêà‰ΩøÁî®ÊñπÊ°àjmeter--sentinel>üõ†Ô∏è <strong>ËÅîÂêà‰ΩøÁî®ÊñπÊ°àÔºöJMeter + Sentinel</strong></h3><p>Ëã•ÈúÄÂÆûÁé∞‚ÄúÊ®°ÊãüÊµÅÈáè + Á≤æÂáÜÈò≤Êä§‚ÄùÁöÑÂÆåÊï¥ÊµãËØïÊµÅÁ®ãÔºåÂèØÁªÑÂêà‰ΩøÁî®Ôºö</p><ol><li><p><strong>JMeterÊ®°ÊãüÊµÅÈáè</strong></p><ul><li><p>ÈÖçÁΩÆÁ∫øÁ®ãÁªÑ„ÄÅHTTPËØ∑Ê±ÇÈááÊ†∑Âô®ÔºåÊ®°ÊãüÁõÆÊ†áQPSÔºàÂ¶Ç5000ËØ∑Ê±Ç/ÁßíÔºâ<a class=link href=@ref>7,9</a>„ÄÇ</p></li><li><p>‰ΩøÁî®ÂëΩ‰ª§Ë°åÊ®°ÂºèÊâßË°åÂéãÊµãÔºåÈÅøÂÖçGUIËµÑÊ∫êÊ∂àËÄóÔºö</p><pre tabindex=0><code>jmeter -n -t test.jmx -l result.jtl -e -o ./report
</code></pre></li></ul></li><li><p><strong>SentinelÁõëÊéß‰∏éÊã¶Êà™</strong></p><ul><li>Âú®Â∫îÁî®‰∏≠ÈõÜÊàêSentinelÔºå‰∏∫Êé•Âè£ÈÖçÁΩÆËßÑÂàôÔºàÂ¶ÇQPS‚â§1000Ôºâ<a class=link href=@ref>2,6</a>„ÄÇ</li><li>ÈÄöËøáÊéßÂà∂Âè∞ÂÆûÊó∂ËßÇÂØüÔºö<ul><li>ÂÆûÈôÖQPS vs ÈôêÊµÅÈòàÂÄºÔºõ</li><li>Ë¢´ÊãíÁªùËØ∑Ê±ÇÁöÑÊØî‰æãÔºõ</li><li>ÁÜîÊñ≠Âô®Áä∂ÊÄÅÔºàOPEN/HALF_OPEN/CLOSEDÔºâ<a class=link href=@ref>1,5</a>„ÄÇ</li></ul></li></ul></li><li><p><strong>ÁªìÊûúÁªºÂêàÂàÜÊûê</strong></p><ul><li>ÂØπÊØîJMeterÁöÑËÅöÂêàÊä•ÂëäÔºàÂêûÂêêÈáè„ÄÅÈîôËØØÁéáÔºâ‰∏éSentinelÁöÑÁõëÊéßÊó•ÂøóÔºåÂÆö‰ΩçÊÄßËÉΩÁì∂È¢àÔºö<ul><li>Ëã•JMeterÊòæÁ§∫È´òÈîôËØØÁéáÔºåËÄåSentinelÊòæÁ§∫ÈôêÊµÅËß¶Âèë ‚Üí ÈúÄË∞ÉÊï¥QPSÈòàÂÄºÔºõ</li><li>Ëã•SentinelËß¶ÂèëÁÜîÊñ≠‰ΩÜJMeterÊú™Êä•Èîô ‚Üí Ê£ÄÊü•ÁÜîÊñ≠Á≠ñÁï•ÊòØÂê¶ËøáÊïèÊÑü<a class=link href=@ref>4,6</a>„ÄÇ</li></ul></li></ul></li></ol><hr><h3 id=-Ê≥®ÊÑè‰∫ãÈ°π>‚ö†Ô∏è <strong>Ê≥®ÊÑè‰∫ãÈ°π</strong></h3><ol><li><strong>SentinelÁöÑË¢´Âä®ÊÄß</strong>
Sentinel ÁöÑÁªüËÆ°‰æùËµñ‰∫éÁúüÂÆûÊµÅÈáèÔºåËã•ÈúÄÊµãËØïÂÜ∑ÂêØÂä®Âú∫ÊôØÔºàÂ¶ÇÁ≥ªÁªüÁ©∫ËΩΩÊó∂Á™ÅÂèëÊµÅÈáèÔºâÔºå‰ªçÈúÄJMeterÁ≠âÂ∑•ÂÖ∑Ê®°Êãü<a class=link href=@ref>1,5</a>„ÄÇ</li><li><strong>ËµÑÊ∫êÊ∂àËÄó</strong>
SentinelÁöÑÊªëÂä®Á™óÂè£ÁªüËÆ°ÔºàÂ¶Ç500msÂàÜÊ°∂Ôºâ‰ºöÂç†Áî®Â∞ëÈáèCPUÔºåÂú®Ë∂ÖÈ´òÊÄßËÉΩÊµãËØï‰∏≠ÔºàÂ¶ÇQPS>20‰∏áÔºâÈúÄËØÑ‰º∞ÂΩ±Âìç<a class=link href=@ref>5</a>„ÄÇ</li></ol><hr><h3 id=-ÊÄªÁªì-3>üíé <strong>ÊÄªÁªì</strong></h3><ul><li><strong>üö´ ‰∏çËÉΩÊõø‰ª£</strong>ÔºöSentinel Êó†Ê≥ïÂÉè JMeter ‰∏ÄÊ†∑‰∏ªÂä®ÁîüÊàêÂéãÂäõÊµÅÈáè„ÄÇ</li><li><strong>‚úÖ ÂøÖÈ°ªÈÖçÂêà</strong>ÔºöÂú®ÂéãÂäõÊµãËØï‰∏≠Ôºå<strong>Áî®JMeterÂà∂ÈÄ†ÂéãÂäõ</strong>Ôºå<strong>Áî®SentinelÂÆûÊñΩÈò≤Êä§Âπ∂ÁõëÊéßÊïàÊûú</strong>Ôºå‰∏§ËÄÖ‰∫íË°•ÂèØÈ™åËØÅÁ≥ªÁªüÂú®È´òÂπ∂Âèë‰∏ãÁöÑÁ®≥ÂÆöÊÄß‰∏éÈüßÊÄß<a class=link href=@ref>3,4,6</a>„ÄÇ</li><li><strong>ËøõÈò∂Âú∫ÊôØ</strong>ÔºöÂØπ‰∫é‰∫ëÂéüÁîüÊû∂ÊûÑÔºåÂèØÁªìÂêà <strong>Kubernetes + JMeterÂàÜÂ∏ÉÂºèÂéãÊµã + SentinelÈõÜÁæ§ÈôêÊµÅ</strong>ÔºåÂÆûÁé∞ÂÖ®ÈìæË∑ØÂéãÂäõÊµãËØï‰∏éÊ≤ªÁêÜÈ™åËØÅ<a class=link href=@ref>5</a>„ÄÇ</li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/postopia/>Postopia</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Oct 22, 2025 16:26 CST</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/postopiaexactly-once/><div class=article-details><h2 class=article-title>„ÄêPostopia„ÄëExactly Once</h2></div></a></article><article><a href=/p/postopiacaffeine/><div class=article-details><h2 class=article-title>„ÄêPostopia„Äëcaffeine</h2></div></a></article><article><a href=/p/postopiapage/><div class=article-details><h2 class=article-title>„ÄêPostopia„Äëpage</h2></div></a></article><article><a href=/p/postopiatimer/><div class=article-details><h2 class=article-title>„ÄêPostopia„Äëtimer</h2></div></a></article><article><a href=/p/distributedxxl-job/><div class=article-details><h2 class=article-title>„ÄêDistributed„ÄëXXL-JOB</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 È£ûÈ∏øË∏èÈõ™Ê≥•</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>