<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Nutrtion on é£é¸¿è¸é›ªæ³¥</title><link>https://dyhes.github.io/categories/nutrtion/</link><description>Recent content in Nutrtion on é£é¸¿è¸é›ªæ³¥</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 20 Oct 2025 22:07:04 +0800</lastBuildDate><atom:link href="https://dyhes.github.io/categories/nutrtion/index.xml" rel="self" type="application/rss+xml"/><item><title>ã€CPPã€‘Review</title><link>https://dyhes.github.io/p/cppreview/</link><pubDate>Sat, 04 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/cppreview/</guid><description>&lt;h2 id="class--struct"&gt;class &amp;amp; struct
&lt;/h2&gt;&lt;p&gt;åœ¨C++ä¸­ï¼Œ&lt;code&gt;class&lt;/code&gt;å’Œ &lt;code&gt;struct&lt;/code&gt;çš„æœ¬è´¨åŠŸèƒ½æ˜¯ç›¸åŒçš„ï¼Œå®ƒä»¬çœŸæ­£çš„åŒºåˆ«åœ¨äºå…¶è®¾è®¡çš„&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;å’Œ&lt;strong&gt;çº¦å®šä¿—æˆçš„ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œä¸‹é¢çš„è¡¨æ ¼æ¸…æ™°åœ°åˆ—å‡ºäº†å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;struct&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;class&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤æˆå‘˜è®¿é—®æƒé™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;public&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤ç»§æ‰¿æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;public&lt;/code&gt;ç»§æ‰¿&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;ç»§æ‰¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§è®¾è®¡è¯­ä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå‘æ•°æ®èšåˆï¼ˆData Aggregationï¼‰ï¼Œç”¨äºæ‰“åŒ…ä¸€ç»„ç›¸å…³çš„æ•°æ®&lt;/td&gt;
&lt;td&gt;ä¾§é‡å¯¹è±¡å°è£…ï¼ˆObject Encapsulationï¼‰ï¼Œç”¨äºæ„å»ºå…·æœ‰è¡Œä¸ºå’ŒçŠ¶æ€çš„å¤æ‚å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡æ¿å‚æ•°å£°æ˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸èƒ½å•ç‹¬ç”¨æ¥å£°æ˜æ¨¡æ¿å‚æ•°ï¼ˆéœ€ç”¨ &lt;code&gt;class&lt;/code&gt;æˆ– &lt;code&gt;typename&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å¯ä»¥ç”¨äºæ¨¡æ¿å‚æ•°å£°æ˜ï¼Œå¦‚ &lt;code&gt;template&amp;lt;class T&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èšåˆåˆå§‹åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ”¯æŒå¤§æ‹¬å· &lt;code&gt;{}&lt;/code&gt;è¿›è¡Œèšåˆåˆå§‹åŒ–ï¼ˆå½“æ²¡æœ‰ç”¨æˆ·è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶ï¼‰&lt;/td&gt;
&lt;td&gt;ä»…å½“æ‰€æœ‰éé™æ€æ•°æ®æˆå‘˜å‡ä¸º &lt;code&gt;public&lt;/code&gt;ä¸”æ— è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶ï¼Œæ‰æ”¯æŒèšåˆåˆå§‹åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åº•å±‚å®ç°åŸç†"&gt;ğŸ§  åº•å±‚å®ç°åŸç†
&lt;/h3&gt;&lt;p&gt;å°½ç®¡åœ¨è¯­æ³•å’Œé»˜è®¤è¡Œä¸ºä¸Šæœ‰æ‰€åŒºåˆ«ï¼Œä½† &lt;code&gt;class&lt;/code&gt;å’Œ &lt;code&gt;struct&lt;/code&gt;åœ¨åº•å±‚çš„å®ç°æœºåˆ¶æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›¸åŒçš„å†…å­˜å¸ƒå±€&lt;/strong&gt;ï¼šå¯¹äºç›¸åŒçš„æ•°æ®æˆå‘˜å¸ƒå±€ï¼Œä¸¤è€…ç”Ÿæˆçš„å†…å­˜ç»“æ„æ²¡æœ‰åŒºåˆ«ã€‚ç¼–è¯‘å™¨ä¼šæŒ‰ç…§ç›¸åŒçš„è§„åˆ™è¿›è¡Œå†…å­˜å¯¹é½ï¼ˆAlignmentï¼‰å’Œå¡«å……ï¼ˆPaddingï¼‰ï¼Œä»¥ç¡®ä¿CPUè®¿é—®æ•ˆç‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸åŒçš„å‡½æ•°å¤„ç†&lt;/strong&gt;ï¼šæˆå‘˜å‡½æ•°ï¼ˆåŒ…æ‹¬æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€è™šå‡½æ•°ï¼‰çš„å¤„ç†æ–¹å¼ä¹Ÿå®Œå…¨ä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç±»ä¸­å«æœ‰è™šå‡½æ•°ï¼Œæ— è®ºæ˜¯ &lt;code&gt;class&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;struct&lt;/code&gt;ï¼Œå…¶å¯¹è±¡å†…éƒ¨é€šå¸¸éƒ½ä¼šåŒ…å«ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨ï¼ˆvTableï¼‰çš„æŒ‡é’ˆ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºå¯¹è±¡çš„å¤§å°&lt;/strong&gt;ï¼šå¯¹äºç©ºç±»ï¼ˆå³æ²¡æœ‰ä»»ä½•éé™æ€æ•°æ®æˆå‘˜çš„ç±»ï¼‰ï¼Œæ— è®ºæ˜¯ç”¨ &lt;code&gt;class&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;struct&lt;/code&gt;å®šä¹‰ï¼Œå…¶å¯¹è±¡å¤§å°é€šå¸¸ä¸º1å­—èŠ‚ï¼Œè¿™æ˜¯ä¸ºäº†ç¡®ä¿æ¯ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­éƒ½æœ‰å”¯ä¸€çš„åœ°å€ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œç¼–è¯‘å™¨æ˜¯å°†å®ƒä»¬è§†ä¸ºåŒä¸€ç§å®ä½“è¿›è¡Œå¤„ç†çš„ï¼Œè¯­æ³•ä¸Šçš„å·®å¼‚å¹¶ä¸ä¼šå¯¼è‡´ç¼–è¯‘åçš„ä»£ç åœ¨æ•ˆç‡æˆ–å†…å­˜æ¨¡å‹ä¸Šæœ‰ä»»ä½•ä¸åŒ ã€‚è®¿é—®æ§åˆ¶ï¼ˆ&lt;code&gt;public&lt;/code&gt;, &lt;code&gt;private&lt;/code&gt;, &lt;code&gt;protected&lt;/code&gt;ï¼‰åªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œçš„æ£€æŸ¥ï¼Œä¸ä¼šå¼•å…¥ä»»ä½•è¿è¡Œæ—¶å¼€é”€ ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä½¿ç”¨æ—¶æœº"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ä½¿ç”¨æ—¶æœº
&lt;/h3&gt;&lt;p&gt;äº†è§£åŒºåˆ«ä¹‹åï¼Œåœ¨å®é™…ç¼–ç¨‹ä¸­å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿè¿™ä¸»è¦å–å†³äºä½ çš„è®¾è®¡æ„å›¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;struct&lt;/code&gt;çš„åœºæ™¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çº¯æ•°æ®é›†åˆ&lt;/strong&gt;ï¼šå½“ä½ åªæ˜¯éœ€è¦å°†ä¸€äº›æ•°æ®æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰å¤æ‚çš„å†…éƒ¨é€»è¾‘éœ€è¦å°è£…æ—¶ï¼Œä¾‹å¦‚åæ ‡ç‚¹ã€é…ç½®å‚æ•°ç­‰ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cè¯­è¨€å…¼å®¹çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦å®šä¹‰ä¸Cè¯­è¨€äº¤äº’çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ç½‘ç»œåè®®å¤´ã€æ–‡ä»¶å¤´ï¼‰æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;struct&lt;/code&gt;å¹¶é…åˆ &lt;code&gt;extern &amp;quot;C&amp;quot;&lt;/code&gt;å¯ä»¥ç¡®ä¿å†…å­˜å¸ƒå±€ä¸Cè¯­è¨€å…¼å®¹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ¿å…ƒç¼–ç¨‹&lt;/strong&gt;ï¼šåœ¨å…ƒç¼–ç¨‹ä¸­ï¼Œ&lt;code&gt;struct&lt;/code&gt;å¸¸è¢«ç”¨äºå®šä¹‰æ¨¡æ¿å’Œç±»å‹ç‰¹å¾ï¼ˆtype traitsï¼‰ï¼Œå› ä¸ºè¿™æ›´åƒæ˜¯ä¸€ç§ç¼–è¯‘æœŸçš„è®¡ç®—ï¼Œè€Œéè¿è¡Œæ—¶çš„å¯¹è±¡æŠ½è±¡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;class&lt;/code&gt;çš„åœºæ™¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ•°æ®å°è£…å’ŒæŠ½è±¡&lt;/strong&gt;ï¼šå½“ä½ çš„å¯¹è±¡æœ‰å†…éƒ¨çŠ¶æ€éœ€è¦ä¿æŠ¤ï¼Œå¿…é¡»é€šè¿‡å…¬å…±æˆå‘˜å‡½æ•°æ¥æ“ä½œæ—¶ï¼Œä¾‹å¦‚é“¶è¡Œè´¦æˆ·ã€æ–‡ä»¶å¥æŸ„ç®¡ç†ç­‰ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºå¤æ‚çš„ç»§æ‰¿ä½“ç³»&lt;/strong&gt;ï¼šå½“ä½ è¦ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç‰¹æ€§ï¼Œå¦‚å¤šæ€ã€è®¾è®¡å¤æ‚çš„ç±»å±‚æ¬¡ç»“æ„æ—¶ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºç®¡ç†ï¼ˆRAIIï¼‰&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦å®ç°èµ„æºè·å–å³åˆå§‹åŒ–ï¼ˆRAIIï¼‰æ¨¡å¼æ—¶ï¼Œä¾‹å¦‚ç®¡ç†åŠ¨æ€å†…å­˜ã€æ–‡ä»¶æè¿°ç¬¦ã€ç½‘ç»œè¿æ¥ç­‰ï¼Œ&lt;code&gt;class&lt;/code&gt;çš„å°è£…æ€§æ›´é€‚åˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å®è·µå»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;æ ¸å¿ƒè®°ä½ä¸€ç‚¹ï¼š&lt;strong&gt;&lt;code&gt;struct&lt;/code&gt;å’Œ &lt;code&gt;class&lt;/code&gt;åœ¨C++ä¸­æ²¡æœ‰åŠŸèƒ½ä¸Šçš„å¼ºå¼±ä¹‹åˆ†ï¼Œåªæœ‰é»˜è®¤è®¾ç½®å’Œè¯­ä¹‰ä¸Šçš„ä¸åŒã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå¥½çš„ç¼–ç¨‹ä¹ æƒ¯æ˜¯ï¼š&lt;strong&gt;è®©ä»£ç â€œè‡ªæ³¨é‡Šâ€&lt;/strong&gt;ã€‚å¦‚æœä½ å®šä¹‰çš„ç±»å‹ä¸»è¦æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ‰€æœ‰æˆå‘˜å…¬å¼€è®¿é—®æ˜¯åˆç†çš„ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ &lt;code&gt;struct&lt;/code&gt;ã€‚å¦‚æœä½ å®šä¹‰çš„æ˜¯ä¸€ä¸ªæœ‰å¤æ‚è¡Œä¸ºã€éœ€è¦ç»´æŠ¤ä¸å˜é‡çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ &lt;code&gt;class&lt;/code&gt;ï¼Œå¹¶ä»”ç»†è®¾è®¡å…¶å…¬å…±æ¥å£ ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ &lt;code&gt;class&lt;/code&gt;å’Œ &lt;code&gt;struct&lt;/code&gt;ã€‚åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œä¿æŒä¸€è‡´æ€§æœ€ä¸ºé‡è¦ã€‚&lt;/p&gt;
&lt;h2 id="å°è£…"&gt;å°è£…
&lt;/h2&gt;&lt;p&gt;åœ¨C++ä¸­ï¼Œ&lt;code&gt;public&lt;/code&gt;ã€&lt;code&gt;private&lt;/code&gt;å’Œ &lt;code&gt;protected&lt;/code&gt;æ˜¯ä¸‰ç§&lt;strong&gt;è®¿é—®ä¿®é¥°ç¬¦&lt;/strong&gt;ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†C++é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­&lt;strong&gt;å°è£…&lt;/strong&gt;ç‰¹æ€§çš„åŸºçŸ³ï¼Œç”¨äºç²¾ç¡®æ§åˆ¶ç±»æˆå‘˜ï¼ˆåŒ…æ‹¬æ•°æ®æˆå‘˜å’Œæˆå‘˜å‡½æ•°ï¼‰åœ¨ä¸åŒä½œç”¨åŸŸä¸‹çš„å¯è§æ€§å’Œå¯è®¿é—®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹é¢çš„è¡¨æ ¼æ¸…æ™°åœ°æ±‡æ€»äº†å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è®¿é—®ä¿®é¥°ç¬¦&lt;/th&gt;
&lt;th&gt;ç±»å†…éƒ¨è®¿é—®&lt;/th&gt;
&lt;th&gt;æ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰è®¿é—®&lt;/th&gt;
&lt;th&gt;ç±»å¤–éƒ¨ï¼ˆé€šè¿‡å¯¹è±¡ï¼‰è®¿é—®&lt;/th&gt;
&lt;th&gt;å‹å…ƒï¼ˆfriendï¼‰è®¿é—®&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;public&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;private&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âœ”ï¸&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸‰ç§ä¿®é¥°ç¬¦"&gt;ğŸ” æ·±å…¥ç†è§£ä¸‰ç§ä¿®é¥°ç¬¦
&lt;/h3&gt;&lt;h4 id="1"&gt;&lt;strong&gt;1. &lt;code&gt;public&lt;/code&gt;ï¼šå¼€æ”¾çš„æ¥å£&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;public&lt;/code&gt;æˆå‘˜å®šä¹‰äº†ç±»å¯¹å¤–çš„&lt;strong&gt;å…¬å…±æ¥å£&lt;/strong&gt;ã€‚å®ƒä»¬å¯ä»¥è¢«ä»»ä½•ä»£ç è®¿é—®ï¼ŒåŒ…æ‹¬ç±»è‡ªèº«çš„æˆå‘˜å‡½æ•°ã€æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°ã€ç±»çš„å¤–éƒ¨ä»£ç ï¼ˆå¦‚&lt;code&gt;main&lt;/code&gt;å‡½æ•°ä¸­çš„å¯¹è±¡ï¼‰ä»¥åŠå‹å…ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹ç”¨æ³•&lt;/strong&gt;ï¼šå°†éœ€è¦æä¾›ç»™å¤–éƒ¨ä¸–ç•Œä½¿ç”¨çš„å‡½æ•°å£°æ˜ä¸º &lt;code&gt;public&lt;/code&gt;ï¼Œä¾‹å¦‚ç±»çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€ä»¥åŠé‚£äº›å…è®¸ç”¨æˆ·ä¸å¯¹è±¡äº¤äº’çš„æ–¹æ³•ï¼ˆå¦‚ &lt;code&gt;getter&lt;/code&gt;, &lt;code&gt;setter&lt;/code&gt;æˆ–è¡Œä¸ºæ–¹æ³•ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MyClass {
public:
int publicVar; // å…¬æœ‰æˆå‘˜å˜é‡
void publicFunc() { } // å…¬æœ‰æˆå‘˜å‡½æ•°
};
MyClass obj;
obj.publicVar = 10; // åˆæ³•ï¼šå¤–éƒ¨å¯ç›´æ¥è®¿é—®
obj.publicFunc(); // åˆæ³•ï¼šå¤–éƒ¨å¯ç›´æ¥è°ƒç”¨
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å°†æ•°æ®æˆå‘˜è®¾ä¸º &lt;code&gt;public&lt;/code&gt;è™½ç„¶åˆæ³•ï¼Œä½†é€šå¸¸ä¸æ¨èï¼Œå› ä¸ºå®ƒç ´åäº†å°è£…æ€§ï¼Œå…è®¸å¤–éƒ¨ä»£ç éšæ„ä¿®æ”¹å†…éƒ¨çŠ¶æ€ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚æ›´ä½³å®è·µæ˜¯ä½¿ç”¨ &lt;code&gt;private&lt;/code&gt;æ•°æ®æˆå‘˜ï¼Œå¹¶é€šè¿‡ &lt;code&gt;public&lt;/code&gt;æˆå‘˜å‡½æ•°æ¥æä¾›å—æ§çš„è®¿é—®é€”å¾„ã€‚&lt;/p&gt;
&lt;h4 id="2"&gt;&lt;strong&gt;2. &lt;code&gt;private&lt;/code&gt;ï¼šä¸¥æ ¼çš„å°è£…&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;private&lt;/code&gt;æˆå‘˜æ˜¯ç±»çš„&lt;strong&gt;ç§æœ‰å®ç°ç»†èŠ‚&lt;/strong&gt;ï¼Œåªèƒ½åœ¨å®šä¹‰å®ƒçš„ç±»çš„å†…éƒ¨ï¼ˆå³è¯¥ç±»çš„æˆå‘˜å‡½æ•°å†…ï¼‰ä»¥åŠå…¶&lt;strong&gt;å‹å…ƒ&lt;/strong&gt;ä¸­è®¿é—®ã€‚æ´¾ç”Ÿç±»å’Œå¤–éƒ¨ä»£ç å‡æ— æ³•ç›´æ¥è®¿é—® &lt;code&gt;private&lt;/code&gt;æˆå‘˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹ç”¨æ³•&lt;/strong&gt;ï¼šç”¨äºéšè—ç±»çš„å†…éƒ¨å®ç°ç»†èŠ‚å’Œä¿æŠ¤å…³é”®æ•°æ®ï¼Œé˜²æ­¢è¢«å¤–éƒ¨æ„å¤–ä¿®æ”¹æˆ–æ´¾ç”Ÿç±»ç¯¡æ”¹ï¼Œè¿™æ˜¯å®ç°æ•°æ®å°è£…çš„æ ¸å¿ƒæ‰‹æ®µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MyClass {
private:
int secretData; // ç§æœ‰æˆå‘˜å˜é‡ï¼Œå¯¹å¤–éšè—
void helperFunc() { } // ç§æœ‰æˆå‘˜å‡½æ•°ï¼Œå†…éƒ¨è¾…åŠ©ç”¨
public:
void setData(int s) { secretData = s; } // å…¬æœ‰æ¥å£é—´æ¥ä¿®æ”¹ç§æœ‰æ•°æ®
int getData() { return secretData; } // å…¬æœ‰æ¥å£é—´æ¥è¯»å–ç§æœ‰æ•°æ®
};
MyClass obj;
// obj.secretData = 5; // éæ³•ï¼ç¼–è¯‘é”™è¯¯ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®
obj.setData(5); // åˆæ³•ï¼šé€šè¿‡å…¬å…±æ¥å£é—´æ¥æ“ä½œ
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨C++ä¸­ï¼Œå¦‚æœæœªæŒ‡å®šè®¿é—®ä¿®é¥°ç¬¦ï¼Œ&lt;strong&gt;&lt;code&gt;class&lt;/code&gt;çš„é»˜è®¤è®¿é—®æƒé™æ˜¯ &lt;code&gt;private&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id="3"&gt;&lt;strong&gt;3. &lt;code&gt;protected&lt;/code&gt;ï¼šå—æ§çš„ç»§æ‰¿&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;protected&lt;/code&gt;æˆå‘˜çš„è®¿é—®æƒé™ä»‹äº &lt;code&gt;public&lt;/code&gt;å’Œ &lt;code&gt;private&lt;/code&gt;ä¹‹é—´ã€‚å®ƒå…è®¸ç±»è‡ªèº«å’Œå…¶&lt;strong&gt;æ´¾ç”Ÿç±»&lt;/strong&gt;çš„æˆå‘˜å‡½æ•°è®¿é—®ï¼Œä½†&lt;strong&gt;ç±»çš„å¤–éƒ¨ä»£ç æ— æ³•ç›´æ¥è®¿é—®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹ç”¨æ³•&lt;/strong&gt;ï¼šä¸»è¦ç”¨äºè®¾è®¡å¯æ‰©å±•çš„ç±»å±‚æ¬¡ç»“æ„ã€‚å½“ä½ å¸Œæœ›æŸäº›æˆå‘˜èƒ½å¤Ÿè¢«æ´¾ç”Ÿç±»ä½¿ç”¨å’Œæ‰©å±•ï¼Œä½†åˆä¸æƒ³å®Œå…¨æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œæ—¶ï¼Œå°±ä½¿ç”¨ &lt;code&gt;protected&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Base {
protected:
int protectedData; // ä¿æŠ¤æˆå‘˜
};
class Derived : public Base {
public:
void modifyBaseData(int d) {
protectedData = d; // åˆæ³•ï¼šæ´¾ç”Ÿç±»å¯ä»¥è®¿é—®åŸºç±»çš„protectedæˆå‘˜
}
};
Derived d;
// d.protectedData = 10; // éæ³•ï¼å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®
d.modifyBaseData(10); // åˆæ³•ï¼šé€šè¿‡æ´¾ç”Ÿç±»çš„å…¬å…±æ¥å£é—´æ¥è®¿é—®
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ç»§æ‰¿æ–¹å¼å¯¹è®¿é—®æƒé™çš„å½±å“"&gt;âš™ï¸ ç»§æ‰¿æ–¹å¼å¯¹è®¿é—®æƒé™çš„å½±å“
&lt;/h3&gt;&lt;p&gt;å½“å‘ç”Ÿç±»ç»§æ‰¿æ—¶ï¼Œ&lt;strong&gt;ç»§æ‰¿æ–¹å¼&lt;/strong&gt;ï¼ˆ&lt;code&gt;public&lt;/code&gt;ã€&lt;code&gt;protected&lt;/code&gt;æˆ– &lt;code&gt;private&lt;/code&gt;ï¼‰ä¼šæ”¹å˜åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ã€‚å…¶è§„åˆ™å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŸºç±»ä¸­çš„åŸå§‹æˆå‘˜&lt;/th&gt;
&lt;th&gt;&lt;code&gt;public&lt;/code&gt;ç»§æ‰¿å&lt;/th&gt;
&lt;th&gt;&lt;code&gt;protected&lt;/code&gt;ç»§æ‰¿å&lt;/th&gt;
&lt;th&gt;&lt;code&gt;private&lt;/code&gt;ç»§æ‰¿å&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;public&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;public&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒè¦ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;public&lt;/code&gt;ç»§æ‰¿&lt;/strong&gt;æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå®ƒå»ºç«‹äº†â€œæ˜¯ä¸€ä¸ªï¼ˆis-aï¼‰â€çš„å…³ç³»ï¼Œå¹¶ä¿æŒåŸºç±»çš„æ¥å£åœ¨æ´¾ç”Ÿç±»ä¸­ä¾ç„¶æ˜¯æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;æ— è®ºé‡‡ç”¨ä½•ç§ç»§æ‰¿æ–¹å¼ï¼ŒåŸºç±»çš„ &lt;strong&gt;&lt;code&gt;private&lt;/code&gt;æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­å§‹ç»ˆæ˜¯ä¸å¯ç›´æ¥è®¿é—®çš„&lt;/strong&gt;ã€‚å¦‚æœæ´¾ç”Ÿç±»éœ€è¦è®¿é—®åŸºç±»çš„â€œç§æœ‰â€éƒ¨åˆ†ï¼Œé€šå¸¸éœ€è¦è€ƒè™‘ redesignï¼Œæˆ–è€…åŸºç±»å¯å°†è¿™äº›æˆå‘˜è®¾ä¸º &lt;code&gt;protected&lt;/code&gt;ï¼Œæˆ–å°†è¯¥æ´¾ç”Ÿç±»å£°æ˜ä¸ºå‹å…ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨å»ºè®®æ€»ç»“"&gt;ğŸ’¡ å®ç”¨å»ºè®®æ€»ç»“
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;private&lt;/code&gt;&lt;/strong&gt;ï¼šéµå¾ªâ€œ&lt;strong&gt;ä¼˜å…ˆå°è£…&lt;/strong&gt;â€çš„åŸåˆ™ã€‚å°†æ•°æ®æˆå‘˜å£°æ˜ä¸º &lt;code&gt;private&lt;/code&gt;ï¼Œä»…é€šè¿‡ &lt;code&gt;public&lt;/code&gt;æˆå‘˜å‡½æ•°æä¾›å¿…è¦çš„è®¿é—®å’Œæ“ä½œæ¥å£ã€‚è¿™æœ€å¤§ç¨‹åº¦åœ°ä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§å’Œç±»çš„å†…éƒ¨ç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;protected&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;code&gt;protected&lt;/code&gt;æˆå‘˜è™½ç„¶å¯¹æ´¾ç”Ÿç±»å¼€æ”¾ï¼Œä½†ä¹Ÿæ„å‘³ç€å®ƒæˆä¸ºäº†åŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´â€œå¥‘çº¦â€çš„ä¸€éƒ¨åˆ†ã€‚ä¿®æ”¹ &lt;code&gt;protected&lt;/code&gt;æˆå‘˜å¯èƒ½ä¼šå½±å“åˆ°æ‰€æœ‰æ´¾ç”Ÿç±»ï¼Œå› æ­¤è¦è°¨æ…è®¾è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®ä½¿ç”¨ &lt;code&gt;public&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;code&gt;public&lt;/code&gt;æˆå‘˜æ˜¯ä½ çš„ç±»å¯¹ç”¨æˆ·çš„æ‰¿è¯ºã€‚è®¾è®¡ä¸€ä¸ªæ¸…æ™°ã€ç¨³å®šã€ç®€æ´çš„ &lt;code&gt;public&lt;/code&gt;æ¥å£è‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ &lt;code&gt;class&lt;/code&gt;ä¸ &lt;code&gt;struct&lt;/code&gt;çš„é»˜è®¤åŒºåˆ«&lt;/strong&gt;ï¼šåœ¨C++ä¸­ï¼Œ&lt;code&gt;class&lt;/code&gt;çš„é»˜è®¤è®¿é—®æƒé™æ˜¯ &lt;code&gt;private&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;struct&lt;/code&gt;çš„é»˜è®¤è®¿é—®æƒé™æ˜¯ &lt;code&gt;public&lt;/code&gt;ã€‚è¿™é€šå¸¸æ˜¯é€‰æ‹©ä½¿ç”¨ &lt;code&gt;class&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;struct&lt;/code&gt;çš„å”¯ä¸€æŠ€æœ¯åŒºåˆ«ï¼ˆåè€…æ›´å¸¸ç”¨äºè¡¨ç¤ºçº¯ç²¹çš„æ•°æ®ç»“æ„ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆç†åœ°è¿ç”¨è¿™ä¸‰ç§è®¿é—®ä¿®é¥°ç¬¦ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ æ„å»ºå‡ºæ›´å¥å£®ã€æ›´æ˜“ç»´æŠ¤çš„é¢å‘å¯¹è±¡ç¨‹åºã€‚å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å®ƒä»¬ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç»§æ‰¿--å¤šæ€"&gt;ç»§æ‰¿ &amp;amp; å¤šæ€
&lt;/h2&gt;&lt;p&gt;C++ ä¸­çš„ç»§æ‰¿å’Œå¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„æ ¸å¿ƒæ”¯æŸ±ï¼Œå®ƒä»¬å…±åŒæ„å»ºäº†ä»£ç çš„å±‚æ¬¡ç»“æ„å’ŒåŠ¨æ€è¡Œä¸ºèƒ½åŠ›ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ç»§æ‰¿è®©ä½ å¯ä»¥æ„å»ºæ–°çš„ç±»åŸºäºå·²å­˜åœ¨çš„ç±»ï¼Œå®ç°ä»£ç çš„å¤ç”¨å’Œå±‚æ¬¡çš„åˆ’åˆ†ï¼›è€Œå¤šæ€åˆ™å…è®¸ä½ ä½¿ç”¨ç»Ÿä¸€çš„æ¥å£æ¥æ“ä½œä¸åŒçš„ç±»å¯¹è±¡ï¼Œæ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥æ‰§è¡Œä¸åŒçš„è¡Œä¸º&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç»§æ‰¿ (Inheritance)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¤šæ€ (Polymorphism)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»£ç å¤ç”¨ï¼Œå»ºç«‹ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ï¼ˆis-aï¼‰&lt;/td&gt;
&lt;td&gt;æ¥å£ç»Ÿä¸€ï¼Œå®ç°è¿è¡Œæ—¶è¡Œä¸ºå·®å¼‚åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°å…³é”®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»§æ‰¿è¯­æ³•ï¼ˆ&lt;code&gt;class Derived : public Base&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;è™šå‡½æ•°ï¼ˆ&lt;code&gt;virtual&lt;/code&gt;ï¼‰ã€çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šæ€çš„åŸºç¡€&lt;/strong&gt;ï¼šä¸ºåŠ¨æ€ç»‘å®šæä¾›ç±»å±‚æ¬¡ç»“æ„&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»§æ‰¿çš„å‡å&lt;/strong&gt;ï¼šåœ¨ç»§æ‰¿ä½“ç³»ä¸Šå®ç°è¿è¡Œæ—¶çµæ´»æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¦ç»†è§£æè¿™ä¸¤å¤§ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-ç»§æ‰¿ä»£ç å¤ç”¨ä¸å±‚æ¬¡æ„å»º"&gt;ğŸ§¬ ç»§æ‰¿ï¼šä»£ç å¤ç”¨ä¸å±‚æ¬¡æ„å»º
&lt;/h3&gt;&lt;p&gt;ç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ï¼ˆæ´¾ç”Ÿç±»æˆ–å­ç±»ï¼‰è·å–å¦ä¸€ä¸ªç±»ï¼ˆåŸºç±»æˆ–çˆ¶ç±»ï¼‰çš„æˆå‘˜ï¼ˆå˜é‡å’Œå‡½æ•°ï¼‰ï¼Œå¹¶å¯ä»¥æ·»åŠ è‡ªå·±çš„æ–°æˆå‘˜æˆ–é‡å®šä¹‰å·²æœ‰çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h4 id="1-ç»§æ‰¿æ–¹å¼ä¸è®¿é—®æ§åˆ¶"&gt;1. ç»§æ‰¿æ–¹å¼ä¸è®¿é—®æ§åˆ¶
&lt;/h4&gt;&lt;p&gt;ç»§æ‰¿æœ‰ä¸‰ç§æ–¹å¼ï¼š&lt;code&gt;public&lt;/code&gt;ã€&lt;code&gt;protected&lt;/code&gt;å’Œ &lt;code&gt;private&lt;/code&gt;ï¼Œå®ƒä»¬å†³å®šäº†åŸºç±»æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ã€‚æ ¸å¿ƒè§„åˆ™æ˜¯ï¼š&lt;strong&gt;æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®æƒé™ä¸ä¼šæ¯”ç»§æ‰¿æ–¹å¼æ›´å®½æ¾&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŸºç±»æˆå‘˜è®¿é—®æƒé™&lt;/th&gt;
&lt;th&gt;&lt;code&gt;public&lt;/code&gt;ç»§æ‰¿å&lt;/th&gt;
&lt;th&gt;&lt;code&gt;protected&lt;/code&gt;ç»§æ‰¿å&lt;/th&gt;
&lt;th&gt;&lt;code&gt;private&lt;/code&gt;ç»§æ‰¿å&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;public&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;public&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;protected&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;private&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸å¯è§&lt;/td&gt;
&lt;td&gt;ä¸å¯è§&lt;/td&gt;
&lt;td&gt;ä¸å¯è§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;æœ€å¸¸ç”¨çš„æ˜¯ &lt;code&gt;public&lt;/code&gt;ç»§æ‰¿&lt;/strong&gt;ï¼Œå®ƒè¡¨ç¤ºçº¯ç²¹çš„ &amp;ldquo;is-a&amp;rdquo; å…³ç³»ï¼ˆä¾‹å¦‚ï¼Œ&lt;code&gt;Student&lt;/code&gt;æ˜¯ä¸€ä¸ª &lt;code&gt;Person&lt;/code&gt;ï¼‰ã€‚&lt;code&gt;protected&lt;/code&gt;å’Œ &lt;code&gt;private&lt;/code&gt;ç»§æ‰¿ä½¿ç”¨è¾ƒå°‘ï¼Œå®ƒä»¬è¡¨ç¤ºä¸€ç§ &amp;ldquo;is-implemented-in-terms-of&amp;rdquo; çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;h4 id="2-æ´¾ç”Ÿç±»çš„æ„é€ ä¸ææ„"&gt;2. æ´¾ç”Ÿç±»çš„æ„é€ ä¸ææ„
&lt;/h4&gt;&lt;p&gt;å¯¹è±¡çš„æ„å»ºå’Œé”€æ¯éµå¾ªä¸¥æ ¼çš„é¡ºåºï¼Œè¿™å¯¹äºæ­£ç¡®ç®¡ç†èµ„æºè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ é¡ºåº&lt;/strong&gt;ï¼š&lt;strong&gt;å…ˆåŸºç±»ï¼Œå†æˆå‘˜å¯¹è±¡ï¼Œæœ€åæ´¾ç”Ÿç±»è‡ªèº«&lt;/strong&gt;ã€‚æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°å¿…é¡»é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ææ„é¡ºåº&lt;/strong&gt;ï¼šä¸æ„é€ é¡ºåº&lt;strong&gt;å®Œå…¨ç›¸å&lt;/strong&gt;ã€‚&lt;strong&gt;å…ˆæ´¾ç”Ÿç±»è‡ªèº«ï¼Œå†æˆå‘˜å¯¹è±¡ï¼Œæœ€ååŸºç±»&lt;/strong&gt;ã€‚ç¡®ä¿èµ„æºè¢«ä»¥æ­£ç¡®çš„é¡ºåºé‡Šæ”¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-è±å½¢ç»§æ‰¿ä¸è™šæ‹Ÿç»§æ‰¿"&gt;3. è±å½¢ç»§æ‰¿ä¸è™šæ‹Ÿç»§æ‰¿
&lt;/h4&gt;&lt;p&gt;å½“å¤šä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿è‡ªåŒä¸€ä¸ªåŸºç±»ï¼Œè€Œè¿™äº›æ´¾ç”Ÿç±»åˆè¢«å¦ä¸€ä¸ªç±»ç»§æ‰¿æ—¶ï¼Œå°±ä¼šå½¢æˆè±å½¢ç»§æ‰¿ã€‚è¿™ä¼šå¸¦æ¥&lt;strong&gt;æ•°æ®å†—ä½™&lt;/strong&gt;å’Œ&lt;strong&gt;äºŒä¹‰æ€§&lt;/strong&gt;é—®é¢˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è±å½¢ç»§æ‰¿é—®é¢˜ç¤ºä¾‹
class A { public: int data; };
class B : public A {};
class C : public A {};
class D : public B, public C {}; // D å¯¹è±¡ä¸­åŒ…å«ä¸¤ä»½ A çš„ data æˆå‘˜
D d;
// d.data = 10; // é”™è¯¯ï¼ä¸æ˜ç¡®æ˜¯è®¿é—®ä» B ç»§æ‰¿çš„ data è¿˜æ˜¯ä» C ç»§æ‰¿çš„ data
d.B::data = 10; // éœ€è¦æ˜ç¡®æŒ‡å®šï¼Œä½†æ•°æ®å†—ä½™é—®é¢˜ä¾ç„¶å­˜åœ¨
d.C::data = 20;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è§£å†³æ–¹æ¡ˆæ˜¯&lt;strong&gt;è™šæ‹Ÿç»§æ‰¿&lt;/strong&gt;ã€‚åœ¨ç»§æ‰¿æ—¶ä½¿ç”¨ &lt;code&gt;virtual&lt;/code&gt;å…³é”®å­—ï¼Œå¯ä»¥ç¡®ä¿åœ¨æ´¾ç”Ÿç±»ä¸­åªä¿ç•™ä¸€ä»½åŸºç±»å­å¯¹è±¡çš„å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä½¿ç”¨è™šæ‹Ÿç»§æ‰¿è§£å†³è±å½¢é—®é¢˜
class A { public: int data; };
class B : virtual public A {}; // è™šæ‹Ÿç»§æ‰¿
class C : virtual public A {}; // è™šæ‹Ÿç»§æ‰¿
class D : public B, public C {};
D d;
d.data = 10; // æ­£ç¡®ï¼ç°åœ¨ data åªæœ‰ä¸€ä»½ï¼ŒäºŒä¹‰æ€§å’Œå†—ä½™éƒ½è¢«æ¶ˆé™¤
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è™šæ‹Ÿç»§æ‰¿é€šè¿‡å¼•å…¥è™šåŸºè¡¨æŒ‡é’ˆæ¥å®ç°ï¼Œä¼šå¸¦æ¥ä¸€äº›å†…å­˜å’Œæ€§èƒ½å¼€é”€ï¼Œå› æ­¤åº”ä»…åœ¨è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜æ—¶ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="-å¤šæ€æ¥å£ç»Ÿä¸€ä¸åŠ¨æ€è¡Œä¸º"&gt;ğŸ”„ å¤šæ€ï¼šæ¥å£ç»Ÿä¸€ä¸åŠ¨æ€è¡Œä¸º
&lt;/h3&gt;&lt;p&gt;å¤šæ€å…è®¸æˆ‘ä»¬ä½¿ç”¨åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æ¥æ“ä½œæ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œå¹¶åœ¨è¿è¡Œæ—¶ç¡®å®šå®é™…è°ƒç”¨çš„å‡½æ•°ã€‚&lt;/p&gt;
&lt;h4 id="1-å¤šæ€çš„å®ç°æ¡ä»¶"&gt;1. å¤šæ€çš„å®ç°æ¡ä»¶
&lt;/h4&gt;&lt;p&gt;å®ç°è¿è¡Œæ—¶å¤šæ€éœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸºç±»ä¸­å¿…é¡»å£°æ˜è™šå‡½æ•°&lt;/strong&gt;ï¼ˆä½¿ç”¨ &lt;code&gt;virtual&lt;/code&gt;å…³é”®å­—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ´¾ç”Ÿç±»å¿…é¡»å¯¹åŸºç±»çš„è™šå‡½æ•°è¿›è¡Œé‡å†™&lt;/strong&gt;ï¼ˆOverrideï¼‰ï¼Œå³å‡½æ•°åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼ç±»å‹å¿…é¡»å®Œå…¨ç›¸åŒï¼ˆåå˜è¿”å›å€¼é™¤å¤–ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿…é¡»é€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨&lt;/strong&gt;æ¥è°ƒç”¨è™šå‡½æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="2-è™šå‡½æ•°ä¸é‡å†™"&gt;2. è™šå‡½æ•°ä¸é‡å†™
&lt;/h4&gt;&lt;p&gt;è™šå‡½æ•°æ˜¯åŠ¨æ€å¤šæ€çš„åŸºçŸ³ã€‚ä½¿ç”¨ &lt;code&gt;override&lt;/code&gt;å…³é”®å­—ï¼ˆC++11ï¼‰å¯ä»¥æ˜ç¡®è¡¨ç¤ºæ„å›¾ï¼Œè®©ç¼–è¯‘å™¨å¸®åŠ©æ£€æŸ¥é‡å†™æ˜¯å¦æ­£ç¡®ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal {
public:
virtual void speak() const { // åŸºç±»è™šå‡½æ•°
std::cout &amp;lt;&amp;lt; &amp;#34;Some animal sound!&amp;#34; &amp;lt;&amp;lt; std::endl;
}
virtual ~Animal() {} // è™šææ„å‡½æ•°è‡³å…³é‡è¦ï¼
};
class Cat : public Animal {
public:
void speak() const override { // æ´¾ç”Ÿç±»é‡å†™è™šå‡½æ•°
std::cout &amp;lt;&amp;lt; &amp;#34;Meow!&amp;#34; &amp;lt;&amp;lt; std::endl;
}
};
// é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨ï¼Œè¡¨ç°å¤šæ€
Animal* animal = new Cat();
animal-&amp;gt;speak(); // è¾“å‡º &amp;#34;Meow!&amp;#34;ï¼Œè°ƒç”¨çš„æ˜¯ Cat çš„ speak
delete animal;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;âš ï¸ é‡è¦æç¤ºï¼šè™šææ„å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªç±»å¯èƒ½è¢«ç»§æ‰¿ï¼Œå¹¶ä¸”ä¼šé€šè¿‡åŸºç±»æŒ‡é’ˆæ¥åˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œ&lt;strong&gt;åŸºç±»çš„ææ„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°&lt;/strong&gt;ã€‚å¦åˆ™ï¼Œä¼šå¯¼è‡´æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ä¸è¢«è°ƒç”¨ï¼Œå¼•å‘èµ„æºæ³„æ¼ã€‚&lt;/p&gt;
&lt;h4 id="3-å¤šæ€çš„åŸç†è™šå‡½æ•°è¡¨vtable"&gt;3. å¤šæ€çš„åŸç†ï¼šè™šå‡½æ•°è¡¨ï¼ˆvTableï¼‰
&lt;/h4&gt;&lt;p&gt;å¤šæ€çš„åº•å±‚æœºåˆ¶æ˜¯é€šè¿‡&lt;strong&gt;è™šå‡½æ•°è¡¨&lt;/strong&gt;å®ç°çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»»ä½•åŒ…å«è™šå‡½æ•°çš„ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªéšè—çš„æˆå‘˜â€”â€”&lt;strong&gt;è™šå‡½æ•°è¡¨æŒ‡é’ˆ&lt;/strong&gt;ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªè™šå‡½æ•°è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;è™šå‡½æ•°è¡¨æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾ç€è¯¥ç±»æ‰€æœ‰è™šå‡½æ•°çš„åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;å½“æ´¾ç”Ÿç±»é‡å†™è™šå‡½æ•°æ—¶ï¼Œå®ƒçš„è™šå‡½æ•°è¡¨ä¸­ç›¸åº”ä½ç½®çš„å‡½æ•°æŒ‡é’ˆä¼šè¢«æ›´æ–°ä¸ºæ´¾ç”Ÿç±»å‡½æ•°çš„åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œç¨‹åºä¼šé€šè¿‡è™šå‡½æ•°è¡¨æŒ‡é’ˆæ‰¾åˆ°æ­£ç¡®çš„è™šå‡½æ•°è¡¨ï¼Œè¿›è€Œè°ƒç”¨æ­£ç¡®çš„å‡½æ•°ç‰ˆæœ¬ã€‚è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œå› æ­¤ç§°ä¸º&lt;strong&gt;åŠ¨æ€ç»‘å®š&lt;/strong&gt;æˆ–&lt;strong&gt;æ™šæœŸç»‘å®š&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å…³é”®åŒºåˆ«"&gt;ğŸ’ æ€»ç»“ä¸å…³é”®åŒºåˆ«
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ç»§æ‰¿&lt;/th&gt;
&lt;th&gt;å¤šæ€&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç ä¸ç»“æ„çš„å¤ç”¨&lt;/strong&gt;ï¼Œå»ºç«‹å±‚æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡Œä¸ºçš„åŠ¨æ€ç»‘å®š&lt;/strong&gt;ï¼Œå®ç°æ¥å£ç»Ÿä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šæ€çš„åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»§æ‰¿çš„è¿›é˜¶åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;:&lt;/code&gt;å’Œç»§æ‰¿æ–¹å¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;virtual&lt;/code&gt;ã€&lt;code&gt;override&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘ç”Ÿæ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘æ—¶ç¡®å®šç±»å…³ç³»&lt;/td&gt;
&lt;td&gt;è¿è¡Œæ—¶ç¡®å®šå‡½æ•°è¡Œä¸º&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ç»§æ‰¿è§£å†³äº†â€œæ˜¯ä»€ä¹ˆâ€çš„é—®é¢˜ï¼Œæ„å»ºäº†ç±»çš„å®¶æ—è°±ç³»ï¼›è€Œå¤šæ€åˆ™è§£å†³äº†â€œåšä»€ä¹ˆâ€å’Œâ€œæ€ä¹ˆåšâ€çš„é—®é¢˜ï¼Œè®©è¿™ä¸ªå®¶æ—è°±ç³»ä¸­çš„ä¸åŒæˆå‘˜èƒ½å¯¹åŒä¸€æŒ‡ä»¤åšå‡ºå„è‡ªç‹¬ç‰¹çš„å“åº”&lt;/strong&gt;ã€‚æŒæ¡å®ƒä»¬ï¼Œä½ å°±èƒ½è®¾è®¡å‡ºæ—¢çµæ´»åˆå¥å£®çš„é¢å‘å¯¹è±¡ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£C++ä¸­çš„ç»§æ‰¿å’Œå¤šæ€ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚ï¼Œæ¯”å¦‚çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»ï¼Œæˆ–è€…æ›´å¤æ‚çš„å¤šé‡ç»§æ‰¿å†…å­˜å¸ƒå±€æœ‰æ›´å¤šå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è™šç»§æ‰¿"&gt;è™šç»§æ‰¿
&lt;/h2&gt;&lt;p&gt;C++ ä¸­çš„è™šç»§æ‰¿æ˜¯ä¸€é¡¹ä¸“é—¨ç”¨äºè§£å†³å¤šé‡ç»§æ‰¿ä¸­â€œè±å½¢ç»§æ‰¿â€é—®é¢˜çš„å…³é”®æŠ€æœ¯ã€‚å®ƒé€šè¿‡ç¡®ä¿åœ¨å¤æ‚çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­ï¼ŒæŸä¸ªå…¬å…±åŸºç±»åªæœ‰ä¸€ä¸ªå…±äº«å®ä¾‹ï¼Œæ¥é¿å…æ•°æ®å†—ä½™å’Œè®¿é—®çš„äºŒä¹‰æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶ä¸æ™®é€šç»§æ‰¿çš„æ ¸å¿ƒåŒºåˆ«ï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ™®é€šç»§æ‰¿&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è™šç»§æ‰¿ (&lt;code&gt;virtual&lt;/code&gt;)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è±å½¢ç»§æ‰¿ç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¬å…±åŸºç±»åœ¨æœ€ç»ˆæ´¾ç”Ÿç±»ä¸­æœ‰&lt;strong&gt;å¤šä¸ªå‰¯æœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¬å…±åŸºç±»åœ¨æœ€ç»ˆæ´¾ç”Ÿç±»ä¸­åªæœ‰&lt;strong&gt;ä¸€ä¸ªå…±äº«å‰¯æœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å»ºç«‹ &amp;ldquo;is-a&amp;rdquo; å…³ç³»ï¼Œå®ç°ä»£ç å¤ç”¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜&lt;/strong&gt;ï¼Œç¡®ä¿å…¬å…±åŸºç±»å”¯ä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æˆå‘˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½å¯¼è‡´&lt;strong&gt;æ•°æ®å†—ä½™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— å†—ä½™&lt;/strong&gt;ï¼Œå…±äº«ä¸€ä»½æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æˆå‘˜è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¿é—®å…¬å…±åŸºç±»æˆå‘˜å¯èƒ½äº§ç”Ÿ&lt;strong&gt;äºŒä¹‰æ€§&lt;/strong&gt;ï¼Œéœ€ç”¨ä½œç”¨åŸŸè§£æç¬¦ &lt;code&gt;::&lt;/code&gt;é™å®š&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— äºŒä¹‰æ€§&lt;/strong&gt;ï¼Œç›´æ¥è®¿é—®å…±äº«æˆå‘˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„é€ å‡½æ•°è°ƒç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±&lt;strong&gt;ç›´æ¥æ´¾ç”Ÿç±»&lt;/strong&gt;åˆå§‹åŒ–å…¶ç›´æ¥åŸºç±»&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€ç»ˆæ´¾ç”Ÿç±»&lt;/strong&gt;ç›´æ¥è´Ÿè´£åˆå§‹åŒ–æ‰€æœ‰&lt;strong&gt;è™šåŸºç±»&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºç±»å‰¯æœ¬å¯èƒ½å¢åŠ å†…å­˜å ç”¨&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ›´çœæ•°æ®ç©ºé—´ï¼Œä½†å¯èƒ½å¼•å…¥&lt;strong&gt;è™šåŸºè¡¨æŒ‡é’ˆ&lt;/strong&gt;çš„å¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€èˆ¬çš„å•ç»§æ‰¿å’Œå¤šç»§æ‰¿&lt;/td&gt;
&lt;td&gt;æ˜ç¡®éœ€è¦è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è±å½¢ç»§æ‰¿é—®é¢˜"&gt;ğŸ” è±å½¢ç»§æ‰¿é—®é¢˜
&lt;/h3&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿ï¼Ÿå½“ä¸€ä¸ªç±»é€šè¿‡å¤šæ¡è·¯å¾„ç»§æ‰¿è‡ªåŒä¸€ä¸ªåŸºç±»æ—¶ï¼Œå°±ä¼šå½¢æˆè±å½¢çš„ç»§æ‰¿ç»“æ„ã€‚åœ¨æ™®é€šç»§æ‰¿ä¸‹ï¼Œè¿™ä¼šå¯¼è‡´æœ€ç»ˆæ´¾ç”Ÿç±»ä¸­åŒ…å«å¤šä»½åŸºç±»å­å¯¹è±¡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal { public: int age; };
class Mammal : public Animal {}; // æ™®é€šç»§æ‰¿
class WingedAnimal : public Animal {}; // æ™®é€šç»§æ‰¿
class Bat : public Mammal, public WingedAnimal {}; // è±å½¢ç»§æ‰¿
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡å†…éƒ¨å°†åŒ…å«ä¸¤ä»½ &lt;code&gt;Animal&lt;/code&gt;çš„å®ä¾‹ï¼ˆä¸€ä»½æ¥è‡ª &lt;code&gt;Mammal&lt;/code&gt;ï¼Œä¸€ä»½æ¥è‡ª &lt;code&gt;WingedAnimal&lt;/code&gt;ï¼‰ã€‚è¿™ä¼šå¼•å‘ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å†—ä½™&lt;/strong&gt;ï¼šå­˜å‚¨ä¸¤ä»½ &lt;code&gt;age&lt;/code&gt;ï¼Œæµªè´¹å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®äºŒä¹‰æ€§&lt;/strong&gt;ï¼šå½“ç›´æ¥è®¿é—® &lt;code&gt;bat.age&lt;/code&gt;æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šä½ è¦è®¿é—®å“ªä¸€æ¡è·¯å¾„ä¸Šçš„ &lt;code&gt;age&lt;/code&gt;ï¼Œå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚å¿…é¡»é€šè¿‡ &lt;code&gt;bat.Mammal::age&lt;/code&gt;æˆ– &lt;code&gt;bat.WingedAnimal::age&lt;/code&gt;æ¥æ˜ç¡®æŒ‡å®šï¼Œè¿™å¾ˆä¸æ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è™šç»§æ‰¿çš„è§£å†³æ–¹æ¡ˆ"&gt;ğŸ› ï¸ è™šç»§æ‰¿çš„è§£å†³æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨è™šç»§æ‰¿å¯ä»¥å®Œç¾è§£å†³ä¸Šè¿°é—®é¢˜ã€‚åªéœ€åœ¨ä¸­é—´æ´¾ç”Ÿç±»ç»§æ‰¿å…¬å…±åŸºç±»æ—¶ä½¿ç”¨ &lt;code&gt;virtual&lt;/code&gt;å…³é”®å­—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal { public: int age; };
class Mammal : virtual public Animal {}; // è™šç»§æ‰¿
class WingedAnimal : virtual public Animal {}; // è™šç»§æ‰¿
class Bat : public Mammal, public WingedAnimal {}; // è±å½¢ç»§æ‰¿ï¼Œä½†Animalåªæœ‰ä¸€ä»½
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç°åœ¨ï¼Œ&lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡ä¸­åªå­˜åœ¨ä¸€ä»½ &lt;code&gt;Animal&lt;/code&gt;å­å¯¹è±¡ã€‚ä½ å¯ä»¥ç›´æ¥ã€æ— äºŒä¹‰æ€§åœ°è®¿é—® &lt;code&gt;bat.age&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-åº•å±‚åŸç†ä¸å®ç°æœºåˆ¶"&gt;âš™ï¸ åº•å±‚åŸç†ä¸å®ç°æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;è™šç»§æ‰¿çš„é­”æ³•èƒŒåï¼Œç¼–è¯‘å™¨ä¸»è¦ä¾é &lt;strong&gt;è™šåŸºç±»è¡¨&lt;/strong&gt;å’Œç›¸å…³çš„æŒ‡é’ˆæ¥å®ç°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è™šåŸºç±»æŒ‡é’ˆä¸è¡¨&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªç±»è™šç»§æ‰¿è‡ªæŸä¸ªåŸºç±»æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¸ºè¯¥ç±»æ·»åŠ ä¸€ä¸ªéšè—çš„&lt;strong&gt;è™šåŸºç±»è¡¨æŒ‡é’ˆ&lt;/strong&gt;ã€‚è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ª&lt;strong&gt;è™šåŸºç±»è¡¨&lt;/strong&gt;ï¼Œè¡¨ä¸­å­˜å‚¨äº†è™šåŸºç±»å­å¯¹è±¡ç›¸å¯¹äºå½“å‰å¯¹è±¡èµ·å§‹åœ°å€çš„åç§»é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…±äº«å®šä½&lt;/strong&gt;ï¼šåœ¨æœ€ç»ˆæ´¾ç”Ÿç±»ï¼ˆå¦‚ &lt;code&gt;Bat&lt;/code&gt;ï¼‰çš„å¯¹è±¡ä¸­ï¼Œ&lt;code&gt;Mammal&lt;/code&gt;å’Œ &lt;code&gt;WingedAnimal&lt;/code&gt;éƒ¨åˆ†çš„è™šåŸºç±»è¡¨æŒ‡é’ˆéƒ½æŒ‡å‘åŒä¸€ä¸ªå…±äº«çš„ &lt;code&gt;Animal&lt;/code&gt;å­å¯¹è±¡ã€‚é€šè¿‡æŸ¥è¯¢è¿™ä¸ªè¡¨ï¼Œæ— è®ºé€šè¿‡ &lt;code&gt;Mammal&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;WingedAnimal&lt;/code&gt;çš„è·¯å¾„å»è®¿é—® &lt;code&gt;Animal&lt;/code&gt;çš„æˆå‘˜ï¼Œæœ€ç»ˆéƒ½èƒ½å®šä½åˆ°åŒä¸€å—å†…å­˜åœ°å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§é—´æ¥å¯»å€çš„æ–¹å¼ç¡®ä¿äº†å”¯ä¸€æ€§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›è¿è¡Œæ—¶å¼€é”€ã€‚&lt;/p&gt;
&lt;h3 id="-æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºçš„å˜åŒ–"&gt;ğŸ§± æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºçš„å˜åŒ–
&lt;/h3&gt;&lt;p&gt;è™šç»§æ‰¿æ˜¾è‘—æ”¹å˜äº†æ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåºï¼Œè¿™æ˜¯ä¸€æ¡éå¸¸é‡è¦çš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è™šåŸºç±»ä¼˜å…ˆ&lt;/strong&gt;ï¼šæ‰€æœ‰è™šåŸºç±»çš„æ„é€ å‡½æ•°æœ€å…ˆè¢«è°ƒç”¨ï¼Œé¡ºåºæŒ‰å®ƒä»¬åœ¨ç»§æ‰¿ä½“ç³»ä¸­çš„å£°æ˜é¡ºåºæ·±åº¦ä¼˜å…ˆéå†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç„¶åæ˜¯æ™®é€šåŸºç±»&lt;/strong&gt;ï¼šæ¥ç€æ˜¯éè™šåŸºç±»çš„æ„é€ å‡½æ•°ï¼ŒæŒ‰æ´¾ç”Ÿç±»å£°æ˜ä¸­çš„ç»§æ‰¿é¡ºåºè°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€åæ˜¯æ´¾ç”Ÿç±»è‡ªèº«&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šè™šåŸºç±»çš„æ„é€ å‡½æ•°ç”±&lt;strong&gt;æœ€åº•å±‚çš„æ´¾ç”Ÿç±»&lt;/strong&gt;ç›´æ¥è°ƒç”¨ã€‚ä¸­é—´æ´¾ç”Ÿç±»ï¼ˆå¦‚ &lt;code&gt;Mammal&lt;/code&gt;å’Œ &lt;code&gt;WingedAnimal&lt;/code&gt;ï¼‰çš„æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä¸­å¯¹äºè™šåŸºç±»æ„é€ å‡½æ•°çš„è°ƒç”¨ä¼šè¢«å¿½ç•¥ã€‚è¿™ç¡®ä¿äº†è™šåŸºç±»åªè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal {
public:
Animal(int a) : age(a) {}
int age;
};
class Mammal : virtual public Animal {
public:
Mammal() : Animal(1) { } // å¦‚æœBatè°ƒç”¨äº†Animalï¼Œè¿™é‡Œçš„Animal(1)ä¼šè¢«å¿½ç•¥
};
class Bat : public Mammal {
public:
Bat() : Animal(5) { } // å¿…é¡»ç›´æ¥åˆå§‹åŒ–è™šåŸºç±»Animal
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸ä½¿ç”¨å»ºè®®"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸ä½¿ç”¨å»ºè®®
&lt;/h3&gt;&lt;p&gt;è™šç»§æ‰¿è™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå¼•å…¥äº†å¤æ‚æ€§å’Œå¼€é”€ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šç”±äºéœ€è¦é€šè¿‡è™šåŸºç±»è¡¨æŒ‡é’ˆé—´æ¥è®¿é—®æˆå‘˜ï¼Œå…¶æ•ˆç‡é€šå¸¸ä½äºç›´æ¥è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;ï¼šæ¯ä¸ªè™šç»§æ‰¿çš„ç±»éƒ½ä¼šæºå¸¦é¢å¤–çš„æŒ‡é’ˆï¼ˆæˆ–å¤šä¸ªæŒ‡é’ˆï¼‰ï¼Œå¢åŠ äº†å¯¹è±¡çš„å¤§å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡å¤æ‚æ€§&lt;/strong&gt;ï¼šä½¿ç±»çš„å±‚æ¬¡å…³ç³»å˜å¾—æ›´å¤æ‚ï¼Œç†è§£å’Œç»´æŠ¤æˆæœ¬å¢é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ç»„åˆ&lt;/strong&gt;ï¼šåœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œä½¿ç”¨ç»„åˆï¼ˆåœ¨ä¸€ä¸ªç±»ä¸­åŒ…å«å¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼‰è€Œéå¤æ‚çš„å¤šé‡ç»§æ‰¿ï¼Œæ˜¯æ›´æ¸…æ™°ã€æ›´å®‰å…¨çš„è®¾è®¡é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨äºæ¥å£ç±»&lt;/strong&gt;ï¼šè™šç»§æ‰¿å¸¸è¢«ç”¨äºç»§æ‰¿çº¯ç²¹çš„æŠ½è±¡æ¥å£ç±»ï¼ˆåªåŒ…å«çº¯è™šå‡½æ•°çš„ç±»ï¼‰ï¼Œå› ä¸ºè¿™äº›æ¥å£é€šå¸¸æ— çŠ¶æ€ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ç»Ÿä¸€æ¥å£è€Œéå…±äº«æ•°æ®ï¼Œæ­¤æ—¶è™šç»§æ‰¿èƒ½ä¼˜é›…åœ°é¿å…æ½œåœ¨çš„äºŒä¹‰æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒC++ä¸­çš„è™šç»§æ‰¿æ˜¯å¤„ç†è±å½¢ç»§æ‰¿è¿™ä¸€ç‰¹å®šéš¾é¢˜çš„ä¸“ç”¨å·¥å…·ã€‚å®ƒé€šè¿‡å…±äº«åŸºç±»å®ä¾‹å’Œä¿®æ”¹å¯¹è±¡æ„é€ é¡ºåºï¼Œæœ‰æ•ˆæ¶ˆé™¤äº†æ•°æ®å†—ä½™å’Œè®¿é—®äºŒä¹‰æ€§ã€‚ç†è§£å…¶åŸç†å’Œé€‚ç”¨åœºæ™¯ï¼Œèƒ½å¸®åŠ©ä½ åœ¨é¢å¯¹å¤æ‚ç±»å±‚æ¬¡è®¾è®¡æ—¶åšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°æŒæ¡C++è™šç»§æ‰¿çš„ç²¾é«“ï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥ã€‚&lt;/p&gt;
&lt;h2 id="raii"&gt;RAII
&lt;/h2&gt;&lt;p&gt;RAIIï¼ˆResource Acquisition Is Initializationï¼‰ï¼Œä¸­æ–‡å¸¸è¯‘ä¸ºâ€œ&lt;strong&gt;èµ„æºè·å–å³åˆå§‹åŒ–&lt;/strong&gt;â€ï¼Œæ˜¯ C++ ç¼–ç¨‹ä¸­ä¸€é¡¹&lt;strong&gt;è‡³å…³é‡è¦&lt;/strong&gt;çš„ç¼–ç¨‹æƒ¯ç”¨æ³•ï¼ˆidiomï¼‰ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š&lt;strong&gt;å°†èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ã€äº’æ–¥é”ç­‰ï¼‰çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸¥æ ¼ç»‘å®š&lt;/strong&gt;ã€‚å¯¹è±¡åœ¨æ„é€ å‡½æ•°ä¸­è·å–èµ„æºï¼Œå¹¶åœ¨ææ„å‡½æ•°ä¸­è‡ªåŠ¨é‡Šæ”¾èµ„æºã€‚è¿™ç§æ–¹æ³•è¢«èª‰ä¸ºç¼–å†™&lt;strong&gt;å¼‚å¸¸å®‰å…¨&lt;/strong&gt;ä¸”&lt;strong&gt;æ— èµ„æºæ³„æ¼&lt;/strong&gt;çš„ C++ ä»£ç çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒè¿ä½œæœºåˆ¶ï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç¯èŠ‚&lt;/th&gt;
&lt;th&gt;RAII çš„å¤„ç†æ–¹å¼&lt;/th&gt;
&lt;th&gt;ç›®çš„ä¸ä¼˜åŠ¿&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºè·å– (Acquisition)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;å¯¹è±¡çš„æ„é€ å‡½æ•°&lt;/strong&gt;ä¸­å®Œæˆã€‚&lt;/td&gt;
&lt;td&gt;å°†èµ„æºè·å–ä¸å¯¹è±¡åˆå§‹åŒ–åˆä¸€ï¼Œç¡®ä¿èµ„æºç«‹å³å¯ç”¨ã€‚è‹¥è·å–å¤±è´¥ï¼Œå¯é€šè¿‡æŠ›å‡ºå¼‚å¸¸ä¸­æ­¢å¯¹è±¡æ„é€ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºé‡Šæ”¾ (Release)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;å¯¹è±¡çš„ææ„å‡½æ•°&lt;/strong&gt;ä¸­å®Œæˆã€‚&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ C++ ä¿è¯çš„ææ„å‡½æ•°è°ƒç”¨æœºåˆ¶ï¼Œç¡®ä¿èµ„æºåœ¨ä»»ä½•æ‰§è¡Œè·¯å¾„ä¸‹ï¼ˆåŒ…æ‹¬å¼‚å¸¸å‘ç”Ÿï¼‰éƒ½èƒ½è¢«è‡ªåŠ¨ã€ç¡®å®šæ€§åœ°é‡Šæ”¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºè®¿é—® (Access)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡è¯¥å¯¹è±¡æä¾›çš„&lt;strong&gt;æˆå‘˜å‡½æ•°&lt;/strong&gt;è¿›è¡Œã€‚&lt;/td&gt;
&lt;td&gt;èµ„æºåœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…å§‹ç»ˆç”±è¯¥å¯¹è±¡æœ‰æ•ˆç®¡ç†ï¼Œä¿è¯è®¿é—®çš„å®‰å…¨æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸å·¥ä½œæœºåˆ¶"&gt;ğŸ”§ æ ¸å¿ƒåŸç†ä¸å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;RAII çš„å¼ºå¤§èƒ½åŠ›å»ºç«‹åœ¨ C++ è¯­è¨€çš„å‡ ä¸ªå…³é”®ç‰¹æ€§ä¹‹ä¸Šï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šåœ¨ C++ ä¸­ï¼Œå¯¹äºåœ¨æ ˆä¸Šåˆ›å»ºçš„å±€éƒ¨å¯¹è±¡ï¼ˆautomatic objectsï¼‰ï¼Œå½“å…¶ç¦»å¼€ä½œç”¨åŸŸï¼ˆä¾‹å¦‚å‡½æ•°è¿”å›ã€æˆ–è€…ç”±äºä»£ç å— &lt;code&gt;{}&lt;/code&gt;ç»“æŸï¼‰æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨å…¶ææ„å‡½æ•°ã€‚RAII æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼Œå°†é‡Šæ”¾èµ„æºçš„è´£ä»»äº¤ç»™äº†ææ„å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ˆå±•å¼€ (Stack Unwinding)&lt;/strong&gt;ï¼šå½“ä»£ç ä¸­æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒC++ è¿è¡Œæ—¶ä¼šæ²¿ç€è°ƒç”¨é“¾è¿›è¡Œâ€œæ ˆå±•å¼€â€ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œ&lt;strong&gt;é€†åº&lt;/strong&gt;è°ƒç”¨æ‰€æœ‰å·²æ„é€ çš„å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ç¨‹åºæ‰§è¡Œå› å¼‚å¸¸è€Œä¸­æ–­ï¼Œé‚£äº›å·²ç»è·å–äº†èµ„æºçš„ RAII å¯¹è±¡ä»ç„¶ä¼šè¢«é”€æ¯ï¼Œä»è€Œä¿è¯èµ„æºä¸è¢«æ³„æ¼ã€‚è¿™æ˜¯ RAII æä¾›&lt;strong&gt;å¼‚å¸¸å®‰å…¨&lt;/strong&gt;çš„æ ¹æœ¬åŸå› ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„ä¾‹å­å¯ä»¥æ¸…æ™°åœ°å±•ç¤ºå…¶å·¥ä½œæµç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void example() {
FileHandler fh(&amp;#34;data.txt&amp;#34;); // è¿›å…¥ä½œç”¨åŸŸï¼šæ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼Œæ–‡ä»¶è¢«æˆåŠŸæ‰“å¼€ã€‚
// ... å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ
if (some_error_occurred) {
throw std::runtime_error(&amp;#34;Oops!&amp;#34;); // æŠ›å‡ºå¼‚å¸¸
}
} // ç¦»å¼€ä½œç”¨åŸŸï¼šæ— è®ºæ˜¯å› ä¸ºæ­£å¸¸æ‰§è¡Œå®Œæ¯•è¿˜æ˜¯å› ä¸ºå¼‚å¸¸å¯¼è‡´æ ˆå±•å¼€ï¼Œfh çš„ææ„å‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ–‡ä»¶è¢«å®‰å…¨å…³é—­ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ— è®º &lt;code&gt;example&lt;/code&gt;å‡½æ•°æ˜¯æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œè¿˜æ˜¯ä¸­é€”æŠ›å‡ºäº†å¼‚å¸¸ï¼Œ&lt;code&gt;FileHandler&lt;/code&gt;å¯¹è±¡ &lt;code&gt;fh&lt;/code&gt;çš„ææ„å‡½æ•°éƒ½ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œç¡®ä¿æ–‡ä»¶å¥æŸ„è¢«å…³é—­ã€‚ä½ ä¸éœ€è¦æ‰‹åŠ¨å†™ &lt;code&gt;close&lt;/code&gt;è¯­å¥ï¼Œä¹Ÿæ— éœ€åœ¨æ¯ä¸ªå¯èƒ½è¿”å›çš„åœ°æ–¹é‡å¤é‡Šæ”¾èµ„æºï¼Œå½»åº•é¿å…äº†å› é—å¿˜æˆ–å¼‚å¸¸å¯¼è‡´çš„èµ„æºæ³„æ¼ã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;RAII åœ¨ C++ æ ‡å‡†åº“å’Œæ—¥å¸¸ç¼–ç¨‹ä¸­æ— å¤„ä¸åœ¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ€å…¸å‹çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜ç®¡ç†ï¼šæ™ºèƒ½æŒ‡é’ˆ (&lt;code&gt;std::unique_ptr&lt;/code&gt;, &lt;code&gt;std::shared_ptr&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ RAII æœ€å¹¿ä¸ºäººçŸ¥çš„åº”ç”¨ã€‚&lt;code&gt;std::unique_ptr&amp;lt;int&amp;gt; ptr(new int(42));&lt;/code&gt;åœ¨æ„é€ æ—¶è·å–å†…å­˜ï¼Œåœ¨ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚è¿™å®Œå…¨é¿å…äº†æ‰‹åŠ¨ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;å¯èƒ½å¸¦æ¥çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”ç®¡ç†ï¼š&lt;code&gt;std::lock_guard&lt;/code&gt;, &lt;code&gt;std::scoped_lock&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œè¿™äº› RAII ç±»åœ¨æ„é€ æ—¶è‡ªåŠ¨è·å–äº’æ–¥é”ï¼ˆè°ƒç”¨ &lt;code&gt;lock()&lt;/code&gt;ï¼‰ï¼Œåœ¨ææ„æ—¶è‡ªåŠ¨é‡Šæ”¾é”ï¼ˆè°ƒç”¨ &lt;code&gt;unlock()&lt;/code&gt;ï¼‰ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢å› å¿˜è®°è§£é”æˆ–å¼‚å¸¸è·¯å¾„æœªè§£é”è€Œå¯¼è‡´çš„æ­»é”ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::mutex mtx;
void thread_safe_function() {
std::lock_guard&amp;lt;std::mutex&amp;gt; lock(mtx); // è¿›å…¥ä½œç”¨åŸŸï¼ŒåŠ é”
// ... æ“ä½œå…±äº«æ•°æ®
} // ç¦»å¼€ä½œç”¨åŸŸï¼Œlock ææ„ï¼Œè‡ªåŠ¨è§£é”
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ–‡ä»¶æµï¼š&lt;code&gt;std::ifstream&lt;/code&gt;, &lt;code&gt;std::ofstream&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ‡å‡†åº“ä¸­çš„æ–‡ä»¶æµå¯¹è±¡ä¹Ÿæ˜¯ RAII çš„ä½“ç°ã€‚å®ƒä»¬åœ¨æ„é€ æ—¶æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨ææ„æ—¶è‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†è‡ªå®šä¹‰èµ„æº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä¸ºä»»ä½•éœ€è¦æˆå¯¹æ“ä½œï¼ˆOpen/Close, Connect/Disconnect, Init/Cleanupï¼‰çš„èµ„æºåˆ›å»ºè‡ªå·±çš„ RAII ç±»ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ã€ç½‘ç»œå¥—æ¥å­—ã€å›¾å½¢è®¾å¤‡ä¸Šä¸‹æ–‡ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç°æ³¨æ„äº‹é¡¹"&gt;âš ï¸ å®ç°æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨è®¾è®¡è‡ªå·±çš„ RAII ç±»æ—¶ï¼Œæœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹·è´è¯­ä¹‰ä¸ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¦æ­¢æ‹·è´&lt;/strong&gt;ï¼šå¯¹äºä¸åº”è¢«å…±äº«çš„èµ„æºï¼ˆå¦‚äº’æ–¥é”ã€æ–‡ä»¶å¥æŸ„ï¼‰ï¼Œé€šå¸¸éœ€è¦&lt;strong&gt;ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦&lt;/strong&gt;ï¼ˆä½¿ç”¨ &lt;code&gt;= delete&lt;/code&gt;ï¼‰ï¼Œä»¥é˜²æ­¢å¤šä¸ªå¯¹è±¡è¯•å›¾ç®¡ç†åŒä¸€ä»½èµ„æºï¼Œå¯¼è‡´é‡å¤é‡Šæ”¾ç­‰æœªå®šä¹‰è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒç§»åŠ¨&lt;/strong&gt;ï¼šå¦‚æœèµ„æºæ‰€æœ‰æƒå¯ä»¥è½¬ç§»ï¼Œåˆ™åº”å®ç°&lt;strong&gt;ç§»åŠ¨æ„é€ å‡½æ•°&lt;/strong&gt;å’Œ&lt;strong&gt;ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦&lt;/strong&gt;ã€‚è¿™å°†èµ„æºçš„æ‰€æœ‰æƒä»ä¸€ä¸ªå¯¹è±¡é«˜æ•ˆåœ°è½¬ç§»åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ç°ä»£ C++ ä¸­è®© RAII å¯¹è±¡æ˜“äºè¿”å›å’Œä¼ é€’çš„é‡è¦ç‰¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ææ„å‡½æ•°ä¸åº”æŠ›å‡ºå¼‚å¸¸&lt;/strong&gt;ï¼šC++ è§„åˆ™è¡¨æ˜ï¼Œææ„å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ˜¯å±é™©çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ ˆå±•å¼€è¿‡ç¨‹ä¸­ã€‚å¦‚æœææ„å‡½æ•°ä¸­çš„èµ„æºé‡Šæ”¾æ“ä½œå¯èƒ½å¤±è´¥ï¼Œåº”å°½åŠ›åœ¨ææ„å‡½æ•°å†…éƒ¨å¤„ç†é”™è¯¯ï¼ˆä¾‹å¦‚è®°å½•æ—¥å¿—ï¼‰ï¼Œå¹¶ç¡®ä¿ææ„å‡½æ•°æœ¬èº«&lt;strong&gt;ä¸æŠ›å‡ºå¼‚å¸¸&lt;/strong&gt;ï¼ˆå£°æ˜ä¸º &lt;code&gt;noexcept&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¯¹æ¯”ä¸æ€»ç»“"&gt;ğŸ“Š å¯¹æ¯”ä¸æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä¸ Javaã€Python ç­‰ä¾èµ–åƒåœ¾å›æ”¶ï¼ˆGarbage Collection, GCï¼‰çš„è¯­è¨€ç›¸æ¯”ï¼ŒRAII çš„ä¼˜åŠ¿åœ¨äº&lt;strong&gt;ç¡®å®šæ€§é‡Šæ”¾&lt;/strong&gt;ã€‚GC åªç®¡ç†å†…å­˜ï¼Œä¸”å›æ”¶æ—¶é—´ä¸ç¡®å®šï¼›è€Œ RAII å¯ä»¥ç®¡ç†æ‰€æœ‰ç±»å‹çš„èµ„æºï¼ˆæ–‡ä»¶ã€é”ç­‰ï¼‰ï¼Œå¹¶èƒ½ä¿è¯èµ„æºåœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶è¢«&lt;strong&gt;ç«‹å³é‡Šæ”¾&lt;/strong&gt;ï¼Œè¿™å¯¹äºèµ„æºæ•æ„Ÿçš„ç³»ç»Ÿï¼ˆå¦‚å®æ—¶åº”ç”¨ã€é«˜æ€§èƒ½æœåŠ¡å™¨ï¼‰è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒRAII æ˜¯ C++ èµ„æºç®¡ç†çš„æ ¸å¿ƒèŒƒå¼ã€‚å®ƒé€šè¿‡å°†èµ„æºç”Ÿå‘½å‘¨æœŸä¸å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œå®ç°äº†&lt;strong&gt;è‡ªåŠ¨åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;å¼‚å¸¸å®‰å…¨&lt;/strong&gt;çš„èµ„æºç®¡ç†ã€‚æŒæ¡å¹¶ç†Ÿç»ƒè¿ç”¨ RAIIï¼Œæ˜¯ç¼–å†™å¥å£®ã€æ¸…æ™°ã€å¯ç»´æŠ¤çš„ç°ä»£ C++ ä»£ç çš„å…³é”®ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ RAIIã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåº”ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚æ™ºèƒ½æŒ‡é’ˆçš„æ·±å…¥ç»†èŠ‚ï¼‰æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å†…å­˜æ¨¡å‹"&gt;å†…å­˜æ¨¡å‹
&lt;/h2&gt;&lt;p&gt;C++ å†…å­˜æ¨¡å‹æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒæè¿°äº†ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œæ•°æ®å’Œå„ç§ä»£ç æ®µåœ¨å†…å­˜ä¸­çš„ç»„ç»‡æ–¹å¼ã€‚ç†è§£å†…å­˜æ¨¡å‹å¯¹äºç¼–å†™é«˜æ•ˆã€å®‰å…¨ä¸”æ— å†…å­˜é”™è¯¯çš„ç¨‹åºè‡³å…³é‡è¦ã€‚ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†C++ç¨‹åºçš„å†…å­˜å¸ƒå±€å…¨æ™¯ï¼Œå¯ä»¥å¸®ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªç›´è§‚çš„è®¤è¯†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[C++ ç¨‹åºå†…å­˜å¸ƒå±€] --&amp;gt; B[ä½åœ°å€]
A --&amp;gt; C[é«˜åœ°å€]
B --&amp;gt; D[ä»£ç åŒº&amp;lt;br&amp;gt;.textæ®µ]
D --&amp;gt; E[å¸¸é‡åŒº&amp;lt;br&amp;gt;.rodataæ®µ]
E --&amp;gt; F[å·²åˆå§‹åŒ–æ•°æ®åŒº&amp;lt;br&amp;gt;.dataæ®µ]
F --&amp;gt; G[æœªåˆå§‹åŒ–æ•°æ®åŒº&amp;lt;br&amp;gt;.bssæ®µ]
G --&amp;gt; H[å †åŒº&amp;lt;br&amp;gt;Heap]
H --&amp;gt; I[è‡ªç”±ç©ºé—´]
I --&amp;gt; C
C --&amp;gt; J[æ ˆåŒº&amp;lt;br&amp;gt;Stack]
J --&amp;gt; K[ç¯å¢ƒå˜é‡/å‘½ä»¤è¡Œå‚æ•°]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†ç¨‹åºå†…å­˜å¸ƒå±€çš„å…¸å‹ç»“æ„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†è§£è¯»å„ä¸ªåŒºåŸŸã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒå†…å­˜åˆ†åŒºè¯¦è§£"&gt;ğŸ§  æ ¸å¿ƒå†…å­˜åˆ†åŒºè¯¦è§£
&lt;/h3&gt;&lt;h4 id="æ ˆåŒº-stack"&gt;&lt;strong&gt;æ ˆåŒº (Stack)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æ ˆåŒºç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œç”¨äºå­˜å‚¨å‡½æ•°çš„å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›åœ°å€ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆï¼Œéµå¾ªåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰åŸåˆ™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šåœ¨å‡½æ•°è°ƒç”¨æ—¶åˆ†é…ï¼Œå‡½æ•°æ‰§è¡Œç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾ã€‚è¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘å™¨å®Œæˆï¼Œæ— éœ€ç¨‹åºå‘˜å¹²é¢„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šåˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦éå¸¸å¿«ï¼Œä½†ç©ºé—´é€šå¸¸æœ‰é™ã€‚åœ¨Windowsä¸‹ï¼Œæ ˆå¤§å°é€šå¸¸é»˜è®¤ä¸ºå‡ MBï¼Œè¶…è¿‡é™åˆ¶ä¼šå¯¼è‡´æ ˆæº¢å‡ºï¼ˆStack Overflowï¼‰ã€‚æ ˆä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å †åŒº-heap--è‡ªç”±å­˜å‚¨åŒº-free-store"&gt;&lt;strong&gt;å †åŒº (Heap) / è‡ªç”±å­˜å‚¨åŒº (Free Store)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å †åŒºæ˜¯ç”¨äº&lt;strong&gt;åŠ¨æ€å†…å­˜åˆ†é…&lt;/strong&gt;çš„åŒºåŸŸï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨æ§åˆ¶ï¼ˆé€šè¿‡ &lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;æˆ– &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šç”±ç¨‹åºå‘˜æ§åˆ¶ã€‚å¦‚æœåˆ†é…åå¿˜è®°é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼›å¦‚æœå¯¹å·²é‡Šæ”¾çš„å†…å­˜å†æ¬¡è®¿é—®æˆ–é‡Šæ”¾ï¼Œä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šç©ºé—´å·¨å¤§ï¼ˆå—é™äºç³»ç»Ÿè™šæ‹Ÿå†…å­˜ï¼‰ï¼Œä½†åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦è¾ƒæ…¢ï¼Œå¹¶å¯èƒ½äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚å †ä»ä½åœ°å€å‘é«˜åœ°å€å¢é•¿ã€‚åœ¨C++ä¸­ï¼Œé€šè¿‡ &lt;code&gt;new&lt;/code&gt;åˆ†é…çš„å†…å­˜é€šå¸¸è¢«ç§°ä¸ºåœ¨è‡ªç”±å­˜å‚¨åŒºä¸Šï¼Œå®ƒå¯ä»¥ç†è§£ä¸ºå †çš„ä¸€ä¸ªæŠ½è±¡ï¼Œä½†æœ‰æ—¶ä¸â€œå †â€æ¦‚å¿µäº’æ¢ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…¨å±€é™æ€å­˜å‚¨åŒº-globalstatic-storage"&gt;&lt;strong&gt;å…¨å±€/é™æ€å­˜å‚¨åŒº (Global/Static Storage)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ä¸ªåŒºåŸŸç”¨äºå­˜å‚¨&lt;strong&gt;å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼ˆåŒ…æ‹¬é™æ€å±€éƒ¨å˜é‡å’Œé™æ€å…¨å±€å˜é‡ï¼‰&lt;/strong&gt; ã€‚è¯¥åŒºåŸŸå¯ç»†åˆ†ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;.data&lt;/code&gt;æ®µ (å·²åˆå§‹åŒ–æ•°æ®æ®µ)&lt;/strong&gt;ï¼šå­˜æ”¾å·²æ˜¾å¼åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;.bss&lt;/code&gt;æ®µ (æœªåˆå§‹åŒ–æ•°æ®æ®µ)&lt;/strong&gt;ï¼šå­˜æ”¾æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚ç¨‹åºåŠ è½½æ—¶ï¼Œç³»ç»Ÿä¼šå°†æ­¤åŒºåŸŸçš„å†…å­˜åˆå§‹åŒ–ä¸ºé›¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šåœ¨ç¨‹åºå¼€å§‹å‰åˆ†é…ï¼Œç¨‹åºç»“æŸæ—¶é‡Šæ”¾ã€‚æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´éƒ½å­˜åœ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å¸¸é‡åŒº-constant-storage"&gt;&lt;strong&gt;å¸¸é‡åŒº (Constant Storage)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å¸¸é‡åŒºç”¨äºå­˜å‚¨&lt;strong&gt;å¸¸é‡&lt;/strong&gt;ï¼Œå¦‚å­—ç¬¦ä¸²å¸¸é‡å’Œ &lt;code&gt;const&lt;/code&gt;ä¿®é¥°çš„å…¨å±€å¸¸é‡ã€‚è¯¥åŒºåŸŸé€šå¸¸å¯¹åº”äº &lt;code&gt;.rodata&lt;/code&gt;(åªè¯»æ•°æ®) æ®µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;å†…å®¹åªè¯»&lt;/strong&gt;ï¼Œä»»ä½•ä¿®æ”¹å°è¯•ï¼ˆä¾‹å¦‚é€šè¿‡éæ³•æŒ‡é’ˆæ“ä½œï¼‰å°†å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä»£ç åŒº-code-segment--text-segment"&gt;&lt;strong&gt;ä»£ç åŒº (Code Segment / Text Segment)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ä»£ç åŒºï¼ˆ&lt;code&gt;.text&lt;/code&gt;æ®µï¼‰ç”¨äºå­˜å‚¨ç¨‹åºçš„&lt;strong&gt;æ‰§è¡Œä»£ç ï¼ˆæœºå™¨æŒ‡ä»¤ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šè¯¥åŒºåŸŸé€šå¸¸æ˜¯&lt;strong&gt;åªè¯»å’Œå¯å…±äº«çš„&lt;/strong&gt;ï¼Œä»¥é˜²æ­¢ç¨‹åºè¢«æ„å¤–ä¿®æ”¹ï¼Œå¹¶å…è®¸å¤šä¸ªè¿›ç¨‹å®ä¾‹å…±äº«åŒä¸€ä»½ä»£ç ä»¥èŠ‚çœå†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å†…å­˜ç»†èŠ‚"&gt;âš™ï¸ æ·±å…¥ç†è§£å†…å­˜ç»†èŠ‚
&lt;/h3&gt;&lt;h4 id="å†…å­˜å¯¹é½-memory-alignment"&gt;&lt;strong&gt;å†…å­˜å¯¹é½ (Memory Alignment)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å†…å­˜å¯¹é½æ˜¯ç¼–è¯‘å™¨ä¸ºäº†ä¼˜åŒ–CPUè®¿é—®å†…å­˜æ•ˆç‡è€Œé‡‡å–çš„ç­–ç•¥ã€‚æŸäº›å¹³å°çš„CPUå¯¹ç‰¹å®šç±»å‹æ•°æ®çš„èµ·å§‹åœ°å€æœ‰è¦æ±‚ï¼ˆä¾‹å¦‚ï¼Œ4å­—èŠ‚çš„intå‹å˜é‡è¦æ±‚å…¶èµ·å§‹åœ°å€æ˜¯4çš„å€æ•°ï¼‰ã€‚å¦‚æœæœªå¯¹é½ï¼ŒCPUå¯èƒ½éœ€è¦å¤šæ¬¡å†…å­˜è®¿é—®æ‰èƒ½è¯»å–å®Œæ•´æ•°æ®ï¼Œé™ä½æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘å™¨é€šå¸¸ä¼šè‡ªåŠ¨å¤„ç†å¯¹é½ï¼Œä½†äº†è§£è¿™ä¸€æ¦‚å¿µæœ‰åŠ©äºç†è§£å¦‚ç»“æ„ä½“ï¼ˆ&lt;code&gt;struct&lt;/code&gt;ï¼‰å¤§å°è®¡ç®—ç­‰çœ‹ä¼¼å¼‚å¸¸çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h4 id="c11-å†…å­˜æ¨¡å‹ä¸å¤šçº¿ç¨‹-memory-model-for-concurrency"&gt;&lt;strong&gt;C++11 å†…å­˜æ¨¡å‹ä¸å¤šçº¿ç¨‹ (Memory Model for Concurrency)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ä»C++11æ ‡å‡†å¼€å§‹ï¼Œè¯­è¨€å®šä¹‰äº†ä¸€ä¸ªæ­£å¼çš„&lt;strong&gt;å†…å­˜æ¨¡å‹&lt;/strong&gt;æ¥æ”¯æŒå¤šçº¿ç¨‹ç¼–ç¨‹ã€‚è¿™ä¸ªæ¨¡å‹å®šä¹‰äº†çº¿ç¨‹å¦‚ä½•äº¤äº’å†…å­˜è®¿é—®ï¼Œæ ¸å¿ƒå†…å®¹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ“ä½œ (Atomic Operations)&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;std::atomic&lt;/code&gt;æ¨¡æ¿ç±»æä¾›ï¼Œç¡®ä¿å¯¹æŸä¸ªå˜é‡çš„è¯»å†™æ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œä»è€Œé¿å…æ•°æ®ç«äº‰ï¼ˆData Raceï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜é¡ºåº (Memory Ordering)&lt;/strong&gt;ï¼šå®šä¹‰äº†åŸå­æ“ä½œå¯¹å…¶ä»–çº¿ç¨‹çš„å¯è§æ€§é¡ºåºã€‚C++æä¾›äº†ä¸åŒä¸¥æ ¼çº§åˆ«çš„å†…å­˜é¡ºåºï¼ˆå¦‚ &lt;code&gt;memory_order_relaxed&lt;/code&gt;, &lt;code&gt;memory_order_acquire&lt;/code&gt;, &lt;code&gt;memory_order_release&lt;/code&gt;, &lt;code&gt;memory_order_seq_cst&lt;/code&gt;ç­‰ï¼‰ï¼Œè®©ç¨‹åºå‘˜åœ¨ä¿è¯æ­£ç¡®æ€§çš„å‰æä¸‹è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸è§å†…å­˜é”™è¯¯åŠé¿å…ç­–ç•¥"&gt;âš ï¸ å¸¸è§å†…å­˜é”™è¯¯åŠé¿å…ç­–ç•¥
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜æ³„æ¼ (Memory Leak)&lt;/strong&gt;ï¼šåœ¨å †ä¸Šåˆ†é…å†…å­˜åï¼Œå¤±å»å¯¹å…¶çš„å¼•ç”¨ä¸”æœªé‡Šæ”¾ã€‚é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºä¸­ï¼Œå†…å­˜æ³„æ¼ä¼šé€æ¸è€—å°½ç³»ç»Ÿèµ„æºã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ç­–&lt;/strong&gt;ï¼šä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆ&lt;code&gt;std::unique_ptr&lt;/code&gt;, &lt;code&gt;std::shared_ptr&lt;/code&gt;ï¼‰è¿›è¡Œèµ„æºç®¡ç†ï¼Œéµå¾ªRAII (Resource Acquisition Is Initialization) åŸåˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‚¬å‚æŒ‡é’ˆ (Dangling Pointer)&lt;/strong&gt;ï¼šæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å·²è¢«é‡Šæ”¾ï¼Œä½†æŒ‡é’ˆæœªè¢«ç½®ç©ºï¼Œæ­¤æ—¶é€šè¿‡æŒ‡é’ˆè®¿é—®å†…å­˜è¡Œä¸ºæœªå®šä¹‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ç­–&lt;/strong&gt;ï¼šé‡Šæ”¾å†…å­˜åç«‹å³å°†æŒ‡é’ˆç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°ç»„è¶Šç•Œ (Array Bounds Overflow)&lt;/strong&gt;ï¼šè®¿é—®æ•°ç»„æ—¶ï¼Œç´¢å¼•è¶…å‡ºäº†å…¶åˆæ³•èŒƒå›´ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ç­–&lt;/strong&gt;ï¼šä½¿ç”¨æ ‡å‡†åº“å®¹å™¨ï¼ˆå¦‚ &lt;code&gt;std::vector&lt;/code&gt;ï¼‰å¹¶æ­é… &lt;code&gt;at()&lt;/code&gt;å‡½æ•°ï¼ˆä¼šè¿›è¡Œè¾¹ç•Œæ£€æŸ¥ï¼‰ï¼Œæˆ–è‡ªè¡Œå°å¿ƒæ£€æŸ¥ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»/å†™å·²é‡Šæ”¾å†…å­˜ (Freed Memory Read/Write)&lt;/strong&gt; å’Œ &lt;strong&gt;é‡å¤é‡Šæ”¾ (Double Free)&lt;/strong&gt;ï¼šè®¿é—®æˆ–é‡Šæ”¾ä¸€ä¸ªå·²ç»é‡Šæ”¾çš„å †å†…å­˜å—ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ç­–&lt;/strong&gt;ï¼šåŒé¿å…æ‚¬å‚æŒ‡é’ˆçš„ç­–ç•¥ï¼Œå¹¶ç¡®ä¿ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;å’Œ &lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;æˆå¯¹åŒ¹é…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç†è§£C++å†…å­˜æ¨¡å‹æ˜¯æˆä¸ºä¸€åä¼˜ç§€C++ç¨‹åºå‘˜çš„åŸºçŸ³ã€‚å®ƒä¸ä»…èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆã€æ›´å¥å£®çš„ä»£ç ï¼Œä¹Ÿæ˜¯æ·±å…¥ç†è§£å¤šçº¿ç¨‹ç¼–ç¨‹ã€æ€§èƒ½ä¼˜åŒ–å’Œè°ƒè¯•å¤æ‚å†…å­˜é—®é¢˜çš„åŸºç¡€ã€‚è¯·åŠ¡å¿…ç‰¢è®°ä¸åŒå†…å­˜åŒºåŸŸçš„ç”Ÿå‘½å‘¨æœŸå’Œç®¡ç†æ–¹å¼ï¼Œè¿™æ˜¯é¿å…ç»å¤§å¤šæ•°å†…å­˜ç›¸å…³é”™è¯¯çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£C++çš„å†…å­˜æ¨¡å‹ï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ–¹é¢ï¼ˆæ¯”å¦‚å¤šçº¿ç¨‹å†…å­˜æ¨¡å‹æˆ–æ™ºèƒ½æŒ‡é’ˆï¼‰æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¸¸é‡"&gt;å¸¸é‡
&lt;/h2&gt;&lt;p&gt;æ‚¨æçš„è¿™ä¸¤ä¸ªé—®é¢˜éå¸¸æ ¸å¿ƒï¼Œå®ƒä»¬è§¦åŠäº†C++å¸¸é‡æœºåˆ¶çš„åº•å±‚å®ç°ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å±€éƒ¨å¸¸é‡çš„ä¸å˜æ€§ä¸»è¦ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µé€šè¿‡è¯­æ³•è§„åˆ™ä¿è¯&lt;/strong&gt;ï¼Œè€Œå®ƒæ‰€åœ¨çš„å†…å­˜åŒºåŸŸï¼ˆæ ˆåŒºï¼‰åˆ™ä¸å…¶ç”Ÿå‘½å‘¨æœŸå’Œç®¡ç†æ•ˆç‡å¯†åˆ‡ç›¸å…³ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®åŠ©æ‚¨å¿«é€ŸæŠ“ä½æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;å±€éƒ¨å¸¸é‡ (å¦‚ &lt;code&gt;const int x = 10;&lt;/code&gt;)&lt;/th&gt;
&lt;th&gt;å…¨å±€å¸¸é‡ (å¦‚ &lt;code&gt;const int g_x = 10;&lt;/code&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨åŒºåŸŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ˆåŒº (Stack)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åªè¯»æ•°æ®æ®µ (.rodata)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸å˜æ€§ä¿è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼–è¯‘å™¨è¯­æ³•æ£€æŸ¥&lt;/strong&gt;ï¼ˆè¿è¡Œæ—¶å¯é€šè¿‡æŒ‡é’ˆé—´æ¥ä¿®æ”¹ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿå†…å­˜ä¿æŠ¤&lt;/strong&gt;ï¼ˆä»»ä½•ä¿®æ”¹å°è¯•å¯¼è‡´æ®µé”™è¯¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡½æ•°è°ƒç”¨æœŸé—´&lt;/td&gt;
&lt;td&gt;æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜åˆ†é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å™¨åœ¨å‡½æ•°æ ˆå¸§ä¸­åˆ†é…&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘æœŸç¡®å®šï¼Œå­˜å‚¨åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„æ•°æ®æ®µä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å±€éƒ¨å¸¸é‡ä¸æ ˆåŒº"&gt;ğŸ§  å±€éƒ¨å¸¸é‡ä¸æ ˆåŒº
&lt;/h3&gt;&lt;p&gt;å±€éƒ¨å¸¸é‡è¢«å­˜å‚¨åœ¨æ ˆåŒºï¼Œä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹è€ƒè™‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸåŒ¹é…&lt;/strong&gt;ï¼šå±€éƒ¨å¸¸é‡çš„ç”Ÿå‘½å‘¨æœŸä¸å…¶æ‰€åœ¨çš„å‡½æ•°è°ƒç”¨æ ˆå¸§å®Œå…¨ç»‘å®šã€‚å‡½æ•°å¼€å§‹æ—¶ï¼Œå®ƒåœ¨æ ˆä¸Šè¢«åˆ›å»ºï¼›å‡½æ•°ç»“æŸæ—¶ï¼Œå®ƒéšæ ˆå¸§ä¸€åŒè¢«è‡ªåŠ¨ã€é«˜æ•ˆåœ°é‡Šæ”¾ã€‚å¦‚æœå°†å…¶æ”¾å…¥å…¨å±€çš„å¸¸é‡åŒºï¼ˆç”Ÿå‘½å‘¨æœŸä¸ºæ•´ä¸ªç¨‹åºï¼‰ï¼Œå°±éœ€è¦å¤æ‚çš„æœºåˆ¶æ¥ç®¡ç†å…¶åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™ä¸æ ˆåŒºâ€œè‡ªåŠ¨ç®¡ç†ã€åè¿›å…ˆå‡ºâ€çš„ç®€å•é«˜æ•ˆè®¾è®¡èƒŒé“è€Œé©°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®¡ç†æ•ˆç‡&lt;/strong&gt;ï¼šæ ˆå†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ä»…é€šè¿‡è°ƒæ•´æ ˆæŒ‡é’ˆå³å¯å®Œæˆï¼Œé€Ÿåº¦æå¿«ã€‚å°†ç”Ÿå‘½å‘¨æœŸçŸ­æš‚çš„å±€éƒ¨å¸¸é‡æ”¾åœ¨æ ˆä¸Šï¼Œç¬¦åˆâ€œè°åˆ›å»ºã€è°ç®¡ç†ã€è°é‡Šæ”¾â€çš„åŸåˆ™ï¼Œç®¡ç†å¼€é”€æœ€å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸é‡ä¸å˜æ€§çš„å®ç°æœºåˆ¶"&gt;ğŸ›¡ï¸ å¸¸é‡ä¸å˜æ€§çš„å®ç°æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;å¸¸é‡çš„â€œä¸å˜æ€§â€æ˜¯ç”±&lt;strong&gt;ç¼–è¯‘å™¨å’Œæ“ä½œç³»ç»Ÿå…±åŒåä½œ&lt;/strong&gt;åœ¨ä¸åŒå±‚é¢å®ç°çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼–è¯‘æœŸä¿è¯ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ä¸»è¦çš„æ–¹å¼ã€‚å½“ä½ åœ¨ä»£ç ä¸­å†™ä¸‹ &lt;code&gt;const int x = 10;&lt;/code&gt;åï¼Œä»»ä½•è¯•å›¾ç›´æ¥ä¿®æ”¹ &lt;code&gt;x&lt;/code&gt;çš„æ˜¾å¼ä»£ç ï¼ˆä¾‹å¦‚ &lt;code&gt;x = 20;&lt;/code&gt;ï¼‰éƒ½ä¼šåœ¨&lt;strong&gt;ç¼–è¯‘é˜¶æ®µ&lt;/strong&gt;è¢«ç¼–è¯‘å™¨å‘ç°å¹¶æŠ¥é”™ï¼Œæ— æ³•é€šè¿‡ç¼–è¯‘ã€‚è¿™æ˜¯ä¸€ç§&lt;strong&gt;è¯­æ³•å±‚é¢çš„å¼ºçº¦æŸ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œæ—¶çš„â€œæ¼æ´â€ä¸é£é™©&lt;/strong&gt;ï¼šå¯¹äºå±€éƒ¨å¸¸é‡ï¼Œè¿™ç§ä¸å˜æ€§çº¦æŸåœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡ç‰¹æ®Šæ‰‹æ®µç»•è¿‡ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è·å–å…¶åœ°å€å¹¶å¼ºåˆ¶ç±»å‹è½¬æ¢åï¼Œå¯ä»¥ä¿®æ”¹å…¶æ‰€åœ¨å†…å­˜çš„å€¼ã€‚ä½†è¿™æ˜¯ä¸€ç§&lt;strong&gt;æœªå®šä¹‰è¡Œä¸º&lt;/strong&gt;ï¼Œå› ä¸ºå±€éƒ¨å¸¸é‡æ‰€åœ¨æ ˆå†…å­˜æœ¬èº«æ˜¯å¯å†™çš„ï¼Œæ“ä½œç³»ç»Ÿä¸ä¼šé˜»æ­¢æ­¤æ“ä½œã€‚ä¿®æ”¹å¯èƒ½æˆåŠŸï¼Œä¹Ÿå¯èƒ½å¯¼è‡´éš¾ä»¥é¢„æµ‹çš„ç¨‹åºè¡Œä¸ºï¼Œåº”ç»å¯¹é¿å…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿçº§ä¿æŠ¤ï¼ˆé’ˆå¯¹å…¨å±€å¸¸é‡ï¼‰&lt;/strong&gt;ï¼šå¯¹äºå…¨å±€å¸¸é‡ï¼Œæƒ…å†µåˆ™ä¸åŒã€‚å®ƒä»¬è¢«ç¼–è¯‘å™¨æ”¾ç½®åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„ &lt;strong&gt;&lt;code&gt;.rodata&lt;/code&gt;ï¼ˆåªè¯»æ•°æ®ï¼‰æ®µ&lt;/strong&gt;ã€‚å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿåœ¨åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œä¼šå°†è¿™ä¸ªåŒºåŸŸçš„å†…å­˜é¡µé¢è®¾ç½®ä¸º&lt;strong&gt;åªè¯»&lt;/strong&gt;ã€‚ä»»ä½•è¯•å›¾å†™å…¥åªè¯»å†…å­˜é¡µé¢çš„æ“ä½œï¼ˆæ— è®ºé€šè¿‡æŒ‡é’ˆè¿˜æ˜¯å…¶ä»–æ–¹å¼ï¼‰éƒ½ä¼šç«‹åˆ»è§¦å‘æ“ä½œç³»ç»Ÿçš„å†…å­˜ä¿æŠ¤æœºåˆ¶ï¼Œå¯¼è‡´ç¨‹åºå› â€œæ®µé”™è¯¯â€è€Œå´©æºƒã€‚è¿™æ˜¯ä¸€ç§&lt;strong&gt;ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿå±‚é¢çš„å¼ºä¿æŠ¤&lt;/strong&gt;ï¼Œç¡®ä¿äº†å…¨å±€å¸¸é‡çš„ç»å¯¹ä¸å¯ä¿®æ”¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨å¸¸é‡åœ¨æ ˆåŒº&lt;/strong&gt;ï¼šä¸»è¦æ˜¯ä¸ºäº†åŒ¹é…å…¶çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ç°é«˜æ•ˆçš„å†…å­˜ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å˜æ€§ç”±ç¼–è¯‘å™¨ä¿è¯&lt;/strong&gt;ï¼šå…¶â€œå¸¸é‡â€ç‰¹æ€§ä¸»è¦ä¾èµ–äºç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸè¿›è¡Œè¯­æ³•æ£€æŸ¥ã€‚è™½ç„¶è¿è¡Œæ—¶å­˜åœ¨è¢«æ¶æ„ä¿®æ”¹çš„å¯èƒ½ï¼Œä½†è¿™å±äºå±é™©æ“ä½œï¼Œåº”ä¸¥æ ¼ç¦æ­¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨ç¼–ç¨‹å®è·µä¸­ï¼Œè¯·å°† &lt;code&gt;const&lt;/code&gt;è§†ä¸ºä¸€ä¸ªä¸ç¼–è¯‘å™¨çš„&lt;strong&gt;å¥‘çº¦&lt;/strong&gt;ï¼šä½ æ‰¿è¯ºä¸ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œç¼–è¯‘å™¨åˆ™ä¸ºä½ æä¾›æ£€æŸ¥å’Œæ”¯æŒã€‚ä¸è¦ä¾èµ–ä»»ä½•ç»•è¿‡å¸¸é‡çš„è¡Œä¸ºï¼Œè¿™æ ·æ‰èƒ½å†™å‡ºæ—¢å®‰å…¨åˆé«˜æ•ˆçš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´æ·±å…¥åœ°ç†è§£C++å¸¸é‡çš„å·¥ä½œæœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="è¿ç®—ç¬¦é‡è½½"&gt;è¿ç®—ç¬¦é‡è½½
&lt;/h2&gt;&lt;p&gt;C++ è¿ç®—ç¬¦é‡è½½çš„åº•å±‚å®ç°ï¼Œæœ¬è´¨ä¸Šæ˜¯ç¼–è¯‘å™¨å°†æˆ‘ä»¬ç†Ÿæ‚‰çš„è¿ç®—ç¬¦è¡¨è¾¾å¼è½¬æ¢ä¸ºç‰¹å®šçš„å‡½æ•°è°ƒç”¨ï¼Œå¹¶åˆ©ç”¨åç§°ä¿®é¥°ç­‰æŠ€æœ¯æ¥ç¡®ä¿æ­£ç¡®å…³è”ã€‚ä¸‹é¢è¿™å¼ å›¾æç»˜äº†ä»ä»£ç ç¼–å†™åˆ°æœ€ç»ˆæ‰§è¡Œçš„å®Œæ•´è¿‡ç¨‹ï¼Œå¯ä»¥å¸®åŠ©ä½ ç›´è§‚åœ°ç†è§£è¿™ä¸€æœºåˆ¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç¨‹åºå‘˜ç¼–å†™è¿ç®—ç¬¦è¡¨è¾¾å¼] --&amp;gt; B[&amp;#34;ç¼–è¯‘å™¨è§£æè¡¨è¾¾å¼&amp;lt;br&amp;gt;(å¦‚ a + b)&amp;#34;]
B --&amp;gt; C{åˆ¤æ–­è¿ç®—ç¬¦æ˜¯å¦è¢«é‡è½½}
C -- æ˜¯ --&amp;gt; D[è½¬æ¢ä¸ºå‡½æ•°è°ƒç”¨&amp;lt;br&amp;gt;&amp;#34;a.operator+(b)&amp;#34; æˆ– &amp;#34;operator+(a, b)&amp;#34;]
C -- å¦ --&amp;gt; E[æŒ‰å†…ç½®è¿ç®—ç¬¦è§„åˆ™å¤„ç†]
D --&amp;gt; F[&amp;#34;åç§°ä¿®é¥°&amp;lt;br&amp;gt;(Name Mangling)&amp;lt;br&amp;gt;ç”Ÿæˆå”¯ä¸€ç¬¦å·å&amp;#34;]
F --&amp;gt; G[&amp;#34;ç”Ÿæˆç›®æ ‡ä»£ç &amp;lt;br&amp;gt;(ç¬¦å·è¡¨ä¸­å…³è”å‡½æ•°å®ç°)&amp;#34;]
G --&amp;gt; H[é“¾æ¥å™¨è§£æç¬¦å·å¼•ç”¨]
H --&amp;gt; I[ç¨‹åºæ‰§è¡Œæ—¶è°ƒç”¨å¯¹åº”å‡½æ•°]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å…·ä½“çœ‹çœ‹è¿™ä¸ªè¿‡ç¨‹ä¸­çš„å…³é”®ç¯èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id="-ç¼–è¯‘å™¨çš„ç¿»è¯‘å·¥ä½œ"&gt;ğŸ”§ ç¼–è¯‘å™¨çš„â€œç¿»è¯‘â€å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;å½“ä½ å†™ä¸‹ &lt;code&gt;a + b&lt;/code&gt;è¿™æ ·çš„è¡¨è¾¾å¼ï¼Œè€Œ &lt;code&gt;a&lt;/code&gt;å’Œ &lt;code&gt;b&lt;/code&gt;æ˜¯è‡ªå®šä¹‰ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œç¼–è¯‘å™¨çš„é¦–è¦ä»»åŠ¡å°±æ˜¯å°†å…¶â€œç¿»è¯‘â€æˆä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æˆå‘˜å‡½æ•°å½¢å¼&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;operator+&lt;/code&gt;æ˜¯ä½œä¸ºç±»çš„æˆå‘˜å‡½æ•°é‡è½½çš„ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼ &lt;code&gt;a + b&lt;/code&gt;ä¼šè¢«è½¬æ¢ä¸º &lt;code&gt;a.operator+(b)&lt;/code&gt;ã€‚è¿™é‡Œçš„å·¦æ“ä½œæ•° &lt;code&gt;a&lt;/code&gt;æˆä¸ºäº†è°ƒç”¨è¯¥æˆå‘˜å‡½æ•°çš„å¯¹è±¡ï¼Œå³æ“ä½œæ•° &lt;code&gt;b&lt;/code&gt;åˆ™ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€å‡½æ•°å½¢å¼&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;operator+&lt;/code&gt;æ˜¯ä½œä¸ºå…¨å±€å‡½æ•°ï¼ˆæˆ–å‹å…ƒå‡½æ•°ï¼‰é‡è½½çš„ï¼Œé‚£ä¹ˆè¡¨è¾¾å¼ &lt;code&gt;a + b&lt;/code&gt;åˆ™ä¼šè¢«è½¬æ¢ä¸º &lt;code&gt;operator+(a, b)&lt;/code&gt;ã€‚ä¸¤ä¸ªæ“ä½œæ•°éƒ½ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªå…¨å±€å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§è½¬æ¢æ˜¯è¿ç®—ç¬¦é‡è½½èƒ½å¤Ÿå®ç°çš„æ ¹æœ¬åŸå› ã€‚&lt;/p&gt;
&lt;h3 id="-åç§°ä¿®é¥°ä¸ç¬¦å·ç”Ÿæˆ"&gt;ğŸ·ï¸ åç§°ä¿®é¥°ä¸ç¬¦å·ç”Ÿæˆ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†é¿å…å‘½åå†²çªï¼ŒC++ ç¼–è¯‘å™¨ä¼šä½¿ç”¨ä¸€ç§ç§°ä¸º &lt;strong&gt;åç§°ä¿®é¥°ï¼ˆName Manglingï¼‰&lt;/strong&gt; çš„æŠ€æœ¯ï¼Œä¸ºæ¯ä¸ªé‡è½½çš„è¿ç®—ç¬¦å‡½æ•°ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„å†…éƒ¨ç¬¦å·åï¼ˆä¿®é¥°åï¼‰ã€‚è¿™ä¸ªç¬¦å·åç¼–ç äº†å‡½æ•°åã€å‚æ•°ç±»å‹ã€æ‰€å±ç±»å‘½åç©ºé—´ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸€ä¸ªåä¸º &lt;code&gt;Vector&lt;/code&gt;çš„ç±»çš„æˆå‘˜å‡½æ•° &lt;code&gt;operator+&lt;/code&gt;ï¼Œç»è¿‡ GCC ç¼–è¯‘å™¨ä¿®é¥°åï¼Œå¯èƒ½ä¼šç”Ÿæˆç±»ä¼¼ &lt;code&gt;_ZN6VectorplERKS_&lt;/code&gt;çš„ç¬¦å·åï¼ˆ&lt;code&gt;pl&lt;/code&gt;ä»£è¡¨ &lt;code&gt;operator+&lt;/code&gt;ï¼Œ&lt;code&gt;RKS_&lt;/code&gt;ä»£è¡¨ &lt;code&gt;const&lt;/code&gt;å¼•ç”¨ç­‰ï¼‰ã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;nm&lt;/code&gt;æˆ– &lt;code&gt;objdump&lt;/code&gt;è¿™æ ·çš„å·¥å…·æ¥æŸ¥çœ‹ç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·è¡¨ï¼ŒéªŒè¯è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id="-å‡½æ•°è°ƒç”¨ä¸å‚æ•°ä¼ é€’"&gt;âš™ï¸ å‡½æ•°è°ƒç”¨ä¸å‚æ•°ä¼ é€’
&lt;/h3&gt;&lt;p&gt;åœ¨åº•å±‚ï¼Œè¿ç®—ç¬¦é‡è½½å‡½æ•°çš„è°ƒç”¨ä¸æ™®é€šæˆå‘˜å‡½æ•°æˆ–å…¨å±€å‡½æ•°çš„è°ƒç”¨æœºåˆ¶å®Œå…¨ç›¸åŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æˆå‘˜å‡½æ•°è°ƒç”¨&lt;/strong&gt;ï¼šä¼šéšå¼åœ°ä¼ å…¥ä¸€ä¸ª &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°ä¼ é€’&lt;/strong&gt;ï¼šå¦‚æœå‚æ•°æ˜¯å¯¹è±¡ï¼Œé€šå¸¸ä¼šä½¿ç”¨å¼•ç”¨ï¼ˆç‰¹åˆ«æ˜¯ &lt;code&gt;const&lt;/code&gt;å¼•ç”¨ï¼‰æ¥ä¼ é€’ï¼Œä»¥é¿å…ä¸å¿…è¦çš„å¯¹è±¡æ‹·è´å¼€é”€ã€‚è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ™å¯èƒ½é€šè¿‡è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰ç­‰æœºåˆ¶æ¥æå‡æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è™šå‡½æ•°ä¸åŠ¨æ€å¤šæ€"&gt;ğŸ¯ è™šå‡½æ•°ä¸åŠ¨æ€å¤šæ€
&lt;/h3&gt;&lt;p&gt;å¯¹äºè™šå‡½æ•°çš„é‡è½½ï¼ˆä¾‹å¦‚ï¼Œåœ¨åŸºç±»ä¸­å°† &lt;code&gt;operator=&lt;/code&gt;å£°æ˜ä¸ºè™šå‡½æ•°ï¼‰ï¼Œå…¶åº•å±‚æœºåˆ¶ä¸æ™®é€šè™šå‡½æ•°ç›¸åŒï¼Œéœ€è¦é€šè¿‡&lt;strong&gt;è™šå‡½æ•°è¡¨ï¼ˆvTableï¼‰&lt;/strong&gt; è¿›è¡ŒåŠ¨æ€ç»‘å®šã€‚è°ƒç”¨æ—¶ï¼Œç¨‹åºä¼šé€šè¿‡å¯¹è±¡çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆæ‰¾åˆ°æ­£ç¡®çš„å‡½æ•°åœ°å€å¹¶æ‰§è¡Œã€‚è¿™ä½¿å¾—é€šè¿‡åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨è¿ç®—ç¬¦æ—¶ï¼Œèƒ½å¤Ÿè¡¨ç°å‡ºå¤šæ€è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸æŠ€å·§"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸æŠ€å·§
&lt;/h3&gt;&lt;p&gt;ç†è§£åº•å±‚åŸç†æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°è¿ç”¨è¿ç®—ç¬¦é‡è½½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å€¼ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨è¿ç®—ç¬¦é‡è½½å‡½æ•°ä¸­ç›´æ¥è¿”å›ä¸€ä¸ªä¸´æ—¶æ„é€ çš„å¯¹è±¡ï¼ˆå¦‚ &lt;code&gt;return MyClass(a.value + b.value);&lt;/code&gt;ï¼‰ï¼Œç¼–è¯‘å™¨å¾ˆå¯èƒ½åº”ç”¨è¿”å›å€¼ä¼˜åŒ–ï¼Œé¿å…ä¸´æ—¶å¯¹è±¡çš„æ„é€ å’Œæ‹·è´ï¼Œç›´æ¥åœ¨è¢«è°ƒç”¨å¤„æ„é€ å¯¹è±¡ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•ç”¨ä¼ é€’&lt;/strong&gt;ï¼šåœ¨é‡è½½å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;const &amp;amp;&lt;/code&gt;æ¥ä¼ é€’å¤§å‹å¯¹è±¡æ˜¯å¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå› ä¸ºå®ƒé¿å…äº†å‚æ•°çš„æ·±åº¦æ‹·è´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒé™åˆ¶"&gt;âš ï¸ æ ¸å¿ƒé™åˆ¶
&lt;/h3&gt;&lt;p&gt;éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œè¿ç®—ç¬¦é‡è½½å¹¶ä¸ä¼šæ”¹å˜è¿ç®—ç¬¦åŸæœ‰çš„&lt;strong&gt;ä¼˜å…ˆçº§&lt;/strong&gt;å’Œ&lt;strong&gt;ç»“åˆæ€§&lt;/strong&gt;ã€‚åŒæ—¶ï¼ŒC++ è¯­è¨€è§„å®šäº†ä¸€äº›è¿ç®—ç¬¦&lt;strong&gt;ä¸å¯é‡è½½&lt;/strong&gt;ï¼Œä¾‹å¦‚ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ &lt;code&gt;::&lt;/code&gt;ã€æˆå‘˜è®¿é—®è¿ç®—ç¬¦ &lt;code&gt;.&lt;/code&gt;ã€æ¡ä»¶è¿ç®—ç¬¦ &lt;code&gt;?:&lt;/code&gt;ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ C++ è¿ç®—ç¬¦é‡è½½çš„åº•å±‚å®ç°ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šè¿ç®—ç¬¦çš„ç»†èŠ‚æˆ–æ›´æ·±å…¥çš„æŠ€æœ¯ç‚¹æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="new--delete"&gt;new &amp;amp; delete
&lt;/h2&gt;&lt;p&gt;C++ ä¸­çš„ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;å’Œ C ä¸­çš„ &lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;éƒ½ç”¨äºåŠ¨æ€å†…å­˜ç®¡ç†ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡å“²å­¦ã€å®‰å…¨æ€§å’ŒåŠŸèƒ½ä¸Šå­˜åœ¨æ ¹æœ¬å·®å¼‚ã€‚ä¸‹é¢çš„è¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Cé£æ ¼: malloc/free&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;C++é£æ ¼: new/delete&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Cæ ‡å‡†åº“å‡½æ•°&lt;/td&gt;
&lt;td&gt;C++è¿ç®—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…åˆ†é…/é‡Šæ”¾æŒ‡å®šå¤§å°çš„&lt;strong&gt;åŸå§‹å†…å­˜å—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ†é…å†…å­˜å¹¶&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°/ææ„å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»å‹å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å› &lt;code&gt;void*&lt;/code&gt;ï¼Œéœ€&lt;strong&gt;å¼ºåˆ¶ç±»å‹è½¬æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;ç±»å‹æ­£ç¡®çš„æŒ‡é’ˆ&lt;/strong&gt;ï¼Œæ— éœ€è½¬æ¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°ç»„å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨è®¡ç®—æ€»å­—èŠ‚æ•°&lt;/td&gt;
&lt;td&gt;ä¸“ç”¨è¯­æ³• &lt;code&gt;new[]&lt;/code&gt;/&lt;code&gt;delete[]&lt;/code&gt;ï¼Œè‡ªåŠ¨ç®¡ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤±è´¥å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å› &lt;code&gt;NULL&lt;/code&gt;ï¼Œéœ€æ‰‹åŠ¨æ£€æŸ¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ›å‡º &lt;code&gt;std::bad_alloc&lt;/code&gt;å¼‚å¸¸&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‡è½½èƒ½åŠ›&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯é‡è½½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯é‡è½½&lt;/strong&gt;ï¼Œå®ç°è‡ªå®šä¹‰å†…å­˜ç®¡ç†ç­–ç•¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå·®å¼‚è¯¦è§£"&gt;ğŸ”§ æ ¸å¿ƒå·®å¼‚è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-å¯¹è±¡æ„é€ ä¸ææ„"&gt;&lt;strong&gt;1. å¯¹è±¡æ„é€ ä¸ææ„&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸¤è€…æœ€æœ¬è´¨çš„åŒºåˆ«ï¼Œå…³ä¹å¯¹è±¡çš„ç”Ÿæ­»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;code&gt;new&lt;/code&gt;æ“ä½œç¬¦ä¼šåšä¸¤ä»¶äº‹ï¼šé¦–å…ˆåœ¨å †ä¸Šåˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œç„¶å&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°&lt;/strong&gt;æ¥åˆå§‹åŒ–è¿™å—å†…å­˜ã€‚åŒæ ·ï¼Œ&lt;code&gt;delete&lt;/code&gt;ä¼šå…ˆ&lt;strong&gt;è°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°&lt;/strong&gt;æ¥æ¸…ç†èµ„æºï¼ˆå¦‚å…³é—­æ–‡ä»¶ã€é‡Šæ”¾å…¶ä»–å†…å­˜ç­‰ï¼‰ï¼Œç„¶åå†é‡Šæ”¾å†…å­˜ã€‚è¿™ç¡®ä¿äº†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸè¢«å®Œæ•´ã€æ­£ç¡®åœ°ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;&lt;/strong&gt;ï¼šå®ƒä»¬ä»…ä»…æ˜¯å†…å­˜çš„â€œæ¬è¿å·¥â€ã€‚&lt;code&gt;malloc&lt;/code&gt;åªè´Ÿè´£åˆ’å‡ºä¸€å—æŒ‡å®šå¤§å°çš„åŸå§‹å†…å­˜ï¼Œä¸å…³å¿ƒé‡Œé¢è¦æ”¾ä»€ä¹ˆï¼›&lt;code&gt;free&lt;/code&gt;åªè´Ÿè´£å›æ”¶è¿™å—å†…å­˜çš„åœ°å€ï¼Œä¸å…³å¿ƒé‡Œé¢åŸæ¥æœ‰ä»€ä¹ˆã€‚å®ƒä»¬&lt;strong&gt;ä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°&lt;/strong&gt;ã€‚å¯¹äºC++çš„ç±»å¯¹è±¡ï¼Œä½¿ç”¨ &lt;code&gt;malloc&lt;/code&gt;ä¼šå¯¼è‡´å¯¹è±¡æœªåˆå§‹åŒ–ï¼Œä½¿ç”¨ &lt;code&gt;free&lt;/code&gt;ä¼šå¯¼è‡´èµ„æºæ³„æ¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-è¯­æ³•ä¸ç±»å‹å®‰å…¨"&gt;&lt;strong&gt;2. è¯­æ³•ä¸ç±»å‹å®‰å…¨&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ï¼šè¯­æ³•ç®€æ´ä¸”å®‰å…¨ã€‚ä½ åªéœ€æŒ‡å®šç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è®¡ç®—å¤§å°å¹¶è¿”å›æ­£ç¡®ç±»å‹çš„æŒ‡é’ˆã€‚é”™è¯¯çš„ç±»å‹èµ‹å€¼ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¢«æ•è·ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int* p = new int; // æ— éœ€è®¡ç®—å¤§å°ï¼Œæ— éœ€ç±»å‹è½¬æ¢
MyClass* obj = new MyClass; // ç›´æ¥è¿”å›MyClass*ç±»å‹
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;&lt;/strong&gt;ï¼šéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨è®¡ç®—å­—èŠ‚æ•°å¹¶è¿›è¡Œå±é™©çš„ç±»å‹è½¬æ¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int* p = (int*)malloc(sizeof(int)); // éœ€è®¡ç®—å¤§å°å¹¶å¼ºåˆ¶è½¬æ¢
MyClass* obj = (MyClass*)malloc(sizeof(MyClass)); // ç±»å‹ä¸å®‰å…¨
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-å†…å­˜åˆ†é…å¤±è´¥å¤„ç†"&gt;&lt;strong&gt;3. å†…å­˜åˆ†é…å¤±è´¥å¤„ç†&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;new&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œé»˜è®¤ä¼š&lt;strong&gt;æŠ›å‡º &lt;code&gt;std::bad_alloc&lt;/code&gt;å¼‚å¸¸&lt;/strong&gt;ã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;try-catch&lt;/code&gt;å—æ¥ä¼˜é›…åœ°å¤„ç†è¿™ç§é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;malloc&lt;/code&gt;&lt;/strong&gt;ï¼šåˆ†é…å¤±è´¥æ—¶&lt;strong&gt;è¿”å› &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ã€‚ä½ å¿…é¡»åœ¨æ¯æ¬¡åˆ†é…åæ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œå¦åˆ™åç»­ä½¿ç”¨ç©ºæŒ‡é’ˆä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼ˆé€šå¸¸æ˜¯ç¨‹åºå´©æºƒï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-é‡è½½ä¸çµæ´»æ€§"&gt;&lt;strong&gt;4. é‡è½½ä¸çµæ´»æ€§&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ï¼šå¯ä»¥ä½œä¸ºè¿ç®—ç¬¦è¢«&lt;strong&gt;é‡è½½&lt;/strong&gt;ã€‚è¿™å…è®¸ä½ ä¸ºç‰¹å®šç±»å®ç°è‡ªå®šä¹‰çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼Œä¾‹å¦‚ä½¿ç”¨å†…å­˜æ± æ¥æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;&lt;/strong&gt;ï¼šæ˜¯åº“å‡½æ•°ï¼Œ&lt;strong&gt;æ— æ³•é‡è½½&lt;/strong&gt;ï¼Œå…¶è¡Œä¸ºæ˜¯å›ºå®šçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç»å¯¹ç¦æ­¢æ··ç”¨&lt;/strong&gt;ï¼šå¿…é¡»ä¸¥æ ¼é…å¯¹ä½¿ç”¨ã€‚ç”¨ &lt;code&gt;new&lt;/code&gt;åˆ†é…çš„å†…å­˜å¿…é¡»ç”¨ &lt;code&gt;delete&lt;/code&gt;é‡Šæ”¾ï¼›ç”¨ &lt;code&gt;malloc&lt;/code&gt;åˆ†é…çš„å†…å­˜å¿…é¡»ç”¨ &lt;code&gt;free&lt;/code&gt;é‡Šæ”¾ï¼›å¯¹äºæ•°ç»„ï¼Œ&lt;code&gt;new[]&lt;/code&gt;å¿…é¡»å¯¹åº” &lt;code&gt;delete[]&lt;/code&gt;ã€‚æ··ç”¨ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œå¦‚ç¨‹åºå´©æºƒæˆ–å†…å­˜æ³„æ¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç°ä»£C++çš„æœ€ä½³å®è·µ&lt;/strong&gt;ï¼šåœ¨å½“ä»Šçš„C++å¼€å‘ä¸­ï¼Œ&lt;strong&gt;åº”å°½é‡é¿å…ç›´æ¥ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ã€‚æ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆå¦‚ &lt;code&gt;std::unique_ptr&lt;/code&gt;å’Œ &lt;code&gt;std::shared_ptr&lt;/code&gt;ï¼‰å’Œæ ‡å‡†åº“å®¹å™¨ï¼ˆå¦‚ &lt;code&gt;std::vector&lt;/code&gt;ï¼‰ã€‚å®ƒä»¬éµå¾ªRAIIåŸåˆ™ï¼Œèƒ½è‡ªåŠ¨ç®¡ç†å†…å­˜ç”Ÿå‘½å‘¨æœŸï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å†…å­˜æ³„æ¼å’Œæ‚¬ç©ºæŒ‡é’ˆç­‰é—®é¢˜ï¼Œè®©ä»£ç æ›´å®‰å…¨ã€æ›´ç®€æ´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;æ˜¯è¾ƒä½çº§çš„&lt;strong&gt;å†…å­˜ç®¡ç†å·¥å…·&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;æ˜¯æ›´é«˜çº§çš„&lt;strong&gt;å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†å·¥å…·&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ¨èé€‰æ‹©&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¯C++é¡¹ç›®ï¼Œå°¤å…¶æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦ä¸Cè¯­è¨€ä»£ç äº¤äº’æˆ–å…¼å®¹Cåº“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä½¿ç”¨ &lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦å®ç°è‡ªå®šä¹‰å†…å­˜åˆ†é…ç­–ç•¥ï¼ˆå¦‚å†…å­˜æ± ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é‡è½½ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç°ä»£C++å¼€å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºçƒˆæ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå’Œå®¹å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç†è§£å®ƒä»¬çš„åŒºåˆ«æœ‰åŠ©äºä½ æ ¹æ®å®é™…æƒ…å†µåšå‡ºæ­£ç¡®é€‰æ‹©ï¼Œä½†åœ¨å®è·µä¸­ï¼Œæ‹¥æŠ±RAIIå’Œæ™ºèƒ½æŒ‡é’ˆæ˜¯ç°ä»£C++ç¼–ç¨‹çš„æ›´ä½³è·¯å¾„ã€‚å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„æ€»ç»“å¯¹ä½ æœ‰å¸®åŠ©ï¼&lt;/p&gt;
&lt;h2 id="new--æ„é€ å‡½æ•°"&gt;new &amp;amp; æ„é€ å‡½æ•°
&lt;/h2&gt;&lt;p&gt;ç†è§£æ„é€ å‡½æ•°å’Œ &lt;code&gt;new&lt;/code&gt;è¿ç®—ç¬¦çš„åŒºåˆ«ï¼Œå…³é”®åœ¨äºåˆ†æ¸…å®ƒä»¬çš„è§’è‰²ï¼š&lt;strong&gt;æ„é€ å‡½æ•°è´Ÿè´£å¯¹è±¡çš„â€œåˆå§‹åŒ–â€&lt;/strong&gt;ï¼Œè€Œ &lt;strong&gt;&lt;code&gt;new&lt;/code&gt;è¿ç®—ç¬¦ä¸»è¦è´Ÿè´£å¯¹è±¡çš„â€œåˆ›å»ºè¿‡ç¨‹â€ï¼Œç‰¹åˆ«æ˜¯å†…å­˜åˆ†é…&lt;/strong&gt;ã€‚å®ƒä»¬é€šå¸¸ååŒå·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„ä¸»è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ„é€ å‡½æ•° (Constructor)&lt;/th&gt;
&lt;th&gt;new è¿ç®—ç¬¦ (new Operator)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»çš„ç‰¹æ®Š&lt;strong&gt;æˆå‘˜å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;C++ çš„&lt;strong&gt;å…³é”®å­—/æ“ä½œç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèŒè´£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹åŒ–å¯¹è±¡&lt;/strong&gt;ï¼šä¸ºå¯¹è±¡çš„æ•°æ®æˆå‘˜èµ‹åˆå€¼&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€åˆ†é…å†…å­˜&lt;/strong&gt;ï¼šåœ¨å †ä¸Šåˆ†é…ç©ºé—´å¹¶æ„é€ å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜æ¥æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è±¡æ‰€åœ¨çš„å†…å­˜ï¼ˆæ ˆæˆ–å †ï¼‰&lt;/td&gt;
&lt;td&gt;exclusively åœ¨&lt;strong&gt;å †&lt;/strong&gt;ä¸Šåˆ†é…å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å™¨&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt;æˆ–é€šè¿‡ &lt;code&gt;new&lt;/code&gt;é—´æ¥è°ƒç”¨&lt;/td&gt;
&lt;td&gt;ç¨‹åºå‘˜&lt;strong&gt;æ˜¾å¼è°ƒç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æŒ‡å‘å·²æ„é€ å¯¹è±¡çš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼ˆå‡ºç”Ÿæ—¶ï¼‰&lt;/td&gt;
&lt;td&gt;ç¨‹åºå‘˜éœ€æ‰‹åŠ¨ä½¿ç”¨ &lt;code&gt;delete&lt;/code&gt;é‡Šæ”¾ï¼ˆæ­»äº¡æ—¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŒºåˆ«è¯¦è§£"&gt;ğŸ§  æ ¸å¿ƒåŒºåˆ«è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-æ ¹æœ¬è§’è‰²ä¸åŒ"&gt;&lt;strong&gt;1. æ ¹æœ¬è§’è‰²ä¸åŒ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå®ƒæ˜¯ä¸€ä¸ªä¸ç±»åŒåã€æ²¡æœ‰è¿”å›ç±»å‹çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ã€‚å®ƒçš„æ ¸å¿ƒä½¿å‘½æ˜¯&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;ã€‚å½“å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œæ— è®ºå®ƒåœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Œç¼–è¯‘å™¨éƒ½ä¼šä¿è¯è°ƒç”¨æ„é€ å‡½æ•°æ¥è®¾ç½®å¯¹è±¡çš„åˆå§‹çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;new è¿ç®—ç¬¦&lt;/strong&gt;ï¼šå®ƒæ˜¯C++è¯­è¨€æä¾›çš„ä¸€ä¸ªæ“ä½œç¬¦ï¼Œç”¨äºæ‰§è¡ŒåŠ¨æ€å†…å­˜åˆ†é…ã€‚å®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯ &lt;strong&gt;â€œåˆ›å»ºâ€è¿‡ç¨‹ä¸­çš„å†…å­˜åˆ†é…å’Œæ„é€ åè°ƒ&lt;/strong&gt;ã€‚å½“ä½ ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;æ—¶ï¼Œå®ƒä¼šåœ¨&lt;strong&gt;å †&lt;/strong&gt;ä¸Šå¯»æ‰¾ä¸€å—è¶³å¤Ÿå¤§çš„å†…å­˜ï¼Œç„¶ååœ¨è¿™å—å†…å­˜ä¸Šè°ƒç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;æ„é€ å‡½æ•°ç®¡â€œè£…ä¿®æ–°æˆ¿â€ï¼ˆåˆå§‹åŒ–ï¼‰ï¼Œ&lt;code&gt;new&lt;/code&gt;ç®¡â€œç”³è¯·æ¯›å¯æˆ¿å¹¶è”ç³»è£…ä¿®é˜Ÿâ€ï¼ˆåˆ†é…å†…å­˜+åè°ƒåˆå§‹åŒ–ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id="2-å†…å­˜æ¥æºä¸å¯¹è±¡ä½ç½®"&gt;&lt;strong&gt;2. å†…å­˜æ¥æºä¸å¯¹è±¡ä½ç½®&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯å¯¼è‡´è¡Œä¸ºå·®å¼‚çš„å…³é”®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå½“ä½ ä»¥ç±»ä¼¼ &lt;code&gt;MyClass obj(10);&lt;/code&gt;çš„æ–¹å¼å®šä¹‰å¯¹è±¡æ—¶ï¼Œå¯¹è±¡ &lt;code&gt;obj&lt;/code&gt;çš„å†…å­˜æ˜¯åœ¨&lt;strong&gt;æ ˆ&lt;/strong&gt;ä¸Šåˆ†é…çš„ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸç”±ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†ï¼Œä¸€æ—¦ç¦»å¼€å…¶ä½œç”¨åŸŸï¼ˆæ¯”å¦‚å‡½æ•°ç»“æŸï¼‰ï¼Œææ„å‡½æ•°ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå†…å­˜è‡ªåŠ¨é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;è¿ç®—ç¬¦&lt;/strong&gt;ï¼šå½“ä½ å†™ &lt;code&gt;MyClass* objPtr = new MyClass(10);&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;new&lt;/code&gt;ä¼šåœ¨&lt;strong&gt;å †&lt;/strong&gt;ä¸Šåˆ†é…å†…å­˜å¹¶æ„é€ å¯¹è±¡ã€‚å †ä¸Šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œä½ å¿…é¡»åœ¨ä½¿ç”¨å®Œæ¯•åä½¿ç”¨ &lt;code&gt;delete objPtr;&lt;/code&gt;æ¥æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-åº•å±‚æœºåˆ¶"&gt;&lt;strong&gt;3. åº•å±‚æœºåˆ¶ï¼š&lt;code&gt;new&lt;/code&gt;çš„ä¸‰æ­¥æ›²&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;new&lt;/code&gt;è¿ç®—ç¬¦çš„å·¥ä½œæµç¨‹å¯ä»¥åˆ†è§£ä¸ºä¸‰ä¸ªæ¸…æ™°çš„æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…å†…å­˜&lt;/strong&gt;ï¼šè°ƒç”¨ &lt;code&gt;operator new&lt;/code&gt;å‡½æ•°ï¼ˆåº•å±‚é€šå¸¸ä½¿ç”¨ &lt;code&gt;malloc&lt;/code&gt;ï¼‰æ¥åˆ†é…ä¸€å—è¶³å¤Ÿå¤§çš„ã€æœªåˆå§‹åŒ–çš„åŸå§‹å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ å¯¹è±¡&lt;/strong&gt;ï¼šåœ¨åˆšåˆšåˆ†é…åˆ°çš„è¿™å—å†…å­˜åœ°å€ä¸Šï¼Œè°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡ã€‚è¿™ä¸€æ­¥æœ‰æ—¶ä¼šç”¨åˆ°ç§°ä¸º â€œplacement newâ€ çš„æŠ€æœ¯æ¥æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›æŒ‡é’ˆ&lt;/strong&gt;ï¼šè¿”å›ä¸€ä¸ªæŒ‡å‘æ–°æ„é€ å¥½çš„å¯¹è±¡çš„æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹åº”çš„ï¼Œ&lt;code&gt;delete&lt;/code&gt;è¿ç®—ç¬¦ä¼šå…ˆè°ƒç”¨ææ„å‡½æ•°æ¸…ç†å¯¹è±¡èµ„æºï¼Œå†è°ƒç”¨ &lt;code&gt;operator delete&lt;/code&gt;ï¼ˆåº•å±‚é€šå¸¸ç”¨ &lt;code&gt;free&lt;/code&gt;ï¼‰é‡Šæ”¾å†…å­˜ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸ç°ä»£cå®è·µ"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸ç°ä»£C++å®è·µ
&lt;/h3&gt;&lt;h4 id="new-operator-ä¸-operator-new"&gt;&lt;strong&gt;â€œnew operatorâ€ ä¸ â€œoperator newâ€&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„ç»†èŠ‚ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;new operatorï¼ˆnew è¡¨è¾¾å¼ï¼‰&lt;/strong&gt;ï¼šå³æˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„ &lt;code&gt;new&lt;/code&gt;ï¼Œå¦‚ &lt;code&gt;new MyClass()&lt;/code&gt;ã€‚å®ƒå®Œæˆäº†ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;operator new&lt;/strong&gt;ï¼šåªæ˜¯ä¸€ä¸ªåƒ &lt;code&gt;malloc&lt;/code&gt;ä¸€æ ·è´Ÿè´£åˆ†é…åŸå§‹å†…å­˜çš„å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥é‡è½½è¿™ä¸ªå‡½æ•°æ¥å®ç°è‡ªå®šä¹‰çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼Œæ¯”å¦‚ä»å†…å­˜æ± ä¸­åˆ†é…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç°ä»£cçš„æœ€ä½³å®è·µ"&gt;&lt;strong&gt;ç°ä»£C++çš„æœ€ä½³å®è·µ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ç”±äºæ‰‹åŠ¨ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;å¯¹ç¨‹åºå‘˜çš„å†…å­˜ç®¡ç†èƒ½åŠ›è¦æ±‚æé«˜ï¼Œå®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ã€æ‚¬ç©ºæŒ‡é’ˆç­‰é—®é¢˜ï¼Œç°ä»£C++ï¼ˆC++11åŠä»¥ä¸Šï¼‰å¼ºçƒˆå»ºè®®ä½¿ç”¨ &lt;strong&gt;RAII&lt;/strong&gt; åŸåˆ™å’Œ&lt;strong&gt;æ™ºèƒ½æŒ‡é’ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½æŒ‡é’ˆ&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;std::unique_ptr&lt;/code&gt;å’Œ &lt;code&gt;std::shared_ptr&lt;/code&gt;ã€‚å®ƒä»¬å°†åŠ¨æ€åˆ†é…çš„å¯¹è±¡å°è£…åœ¨æ™ºèƒ½æŒ‡é’ˆä¸­ï¼Œåˆ©ç”¨æ ˆä¸Šå¯¹è±¡çš„ç¡®å®šæ€§ææ„æ¥è‡ªåŠ¨ç®¡ç†å †ä¸Šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½ å‡ ä¹ä¸éœ€è¦å†æ‰‹åŠ¨å†™ &lt;code&gt;delete&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‡å‡†åº“å®¹å™¨&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;std::vector&lt;/code&gt;ã€&lt;code&gt;std::string&lt;/code&gt;ï¼Œå®ƒä»¬å†…éƒ¨å·²ç»å¸®ä½ ç®¡ç†å¥½äº†åŠ¨æ€å†…å­˜ï¼Œç›´æ¥ä½¿ç”¨å®ƒä»¬å¯ä»¥é¿å…å¤§é‡çš„åŸå§‹ &lt;code&gt;new/delete&lt;/code&gt;æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š&lt;strong&gt;æ„é€ å‡½æ•°çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œ &lt;code&gt;new&lt;/code&gt;è¿ç®—ç¬¦çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åœ¨å †ä¸ŠåŠ¨æ€åˆ›å»ºå¯¹è±¡ï¼ˆå…¶ä¸­åŒ…å«äº†å†…å­˜åˆ†é…å’Œè°ƒç”¨æ„é€ å‡½æ•°çš„æ­¥éª¤ï¼‰&lt;/strong&gt;ã€‚ç†è§£å®ƒä»¬çš„åˆ†å·¥ä¸åˆä½œï¼Œæ˜¯æŒæ¡C++å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ç®¡ç†çš„åŸºç¡€ã€‚åœ¨ç°ä»£C++å¼€å‘ä¸­ï¼Œåº”ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æ ˆä¸Šå¯¹è±¡å’Œæ™ºèƒ½æŒ‡é’ˆï¼Œå°½é‡é¿å…ç›´æ¥ä½¿ç”¨è£¸ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼&lt;/p&gt;
&lt;h2 id="delete"&gt;delete
&lt;/h2&gt;&lt;p&gt;åœ¨C++ä¸­ï¼Œ&lt;code&gt;delete&lt;/code&gt;æ“ä½œç¬¦çš„è°ƒç”¨æ–¹å¼éå¸¸æ˜ç¡®ï¼š&lt;strong&gt;å¯¹äºä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡ï¼Œå¿…é¡»ç”±ç¨‹åºå‘˜æ‰‹åŠ¨è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ã€‚è€Œææ„å‡½æ•°çš„è°ƒç”¨ï¼Œåˆ™æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†çš„ï¼Œå®ƒä¼šåœ¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è¢«è‡ªåŠ¨è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°å±•ç¤ºå®ƒä»¬çš„åˆ†å·¥ä¸åˆä½œï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œ/è§’è‰²&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¨‹åºå‘˜ (You)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼–è¯‘å™¨/è¿è¡Œæ—¶ç³»ç»Ÿ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰‹åŠ¨ç®¡ç†åŠ¨æ€å¯¹è±¡çš„&lt;strong&gt;æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨ç®¡ç†éåŠ¨æ€å¯¹è±¡çš„&lt;strong&gt;ææ„æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;new&lt;/code&gt;ä¹‹å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è´Ÿè´£åœ¨é€‚å½“æ—¶å€™&lt;strong&gt;æ‰‹åŠ¨è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;delete&lt;/code&gt;è§¦å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œ &lt;code&gt;delete obj;&lt;/code&gt;è¯­å¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt; &lt;code&gt;obj&lt;/code&gt;çš„ææ„å‡½æ•°ï¼Œç„¶åé‡Šæ”¾å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å±€éƒ¨å¯¹è±¡ææ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;å¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸæ—¶&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt;ææ„å‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¨å±€/é™æ€å¯¹è±¡ææ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;ç¨‹åºç»“æŸå&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt;ææ„å‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸æœ€ä½³å®è·µ"&gt;ğŸ”§ å·¥ä½œæœºåˆ¶ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;h4 id="delete-1"&gt;&lt;strong&gt;&lt;code&gt;delete&lt;/code&gt;çš„å·¥ä½œæµç¨‹&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“æ‚¨æ‰§è¡Œ &lt;code&gt;delete ptr;&lt;/code&gt;æ—¶ï¼Œä¼šå‘ç”Ÿä¸¤ä»¶äº‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨ææ„å‡½æ•°&lt;/strong&gt;ï¼šç¼–è¯‘å™¨é¦–å…ˆè°ƒç”¨ &lt;code&gt;ptr&lt;/code&gt;æ‰€æŒ‡å‘å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œç”¨äºé‡Šæ”¾è¯¥å¯¹è±¡å†…éƒ¨å¯èƒ½æŒæœ‰çš„èµ„æºï¼ˆä¾‹å¦‚ï¼Œå…¶ä»–åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡Šæ”¾å†…å­˜&lt;/strong&gt;ï¼šéšåï¼Œ&lt;code&gt;ptr&lt;/code&gt;æŒ‡å‘çš„é‚£å—åŸæœ¬é€šè¿‡ &lt;code&gt;new&lt;/code&gt;åˆ†é…çš„å†…å­˜ä¼šè¢«å½’è¿˜ç»™ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºæ•°ç»„ &lt;code&gt;delete[] ptr;&lt;/code&gt;ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ææ„å‡½æ•°ï¼Œç„¶åé‡Šæ”¾æ•´å—å†…å­˜ã€‚&lt;/p&gt;
&lt;h4 id="å…³é”®åŸåˆ™ä¸å¸¸è§é™·é˜±"&gt;&lt;strong&gt;å…³é”®åŸåˆ™ä¸å¸¸è§é™·é˜±&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é…å¯¹ä½¿ç”¨&lt;/strong&gt;ï¼šå¿…é¡»ä¸¥æ ¼éµå¾ª &lt;strong&gt;&lt;code&gt;new&lt;/code&gt;å¯¹åº” &lt;code&gt;delete&lt;/code&gt;ï¼Œ&lt;code&gt;new[]&lt;/code&gt;å¯¹åº” &lt;code&gt;delete[]&lt;/code&gt;&lt;/strong&gt;ã€‚æ··ç”¨ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œé€šå¸¸æ˜¯ä¸¥é‡çš„ç¨‹åºé”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é‡å¤é‡Šæ”¾&lt;/strong&gt;ï¼šå¯¹åŒä¸€ä¸ªæŒ‡é’ˆè°ƒç”¨ä¸¤æ¬¡ &lt;code&gt;delete&lt;/code&gt;æ˜¯å±é™©æ“ä½œã€‚ä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯æ˜¯ï¼Œåœ¨ &lt;code&gt;delete&lt;/code&gt;ä¸€ä¸ªæŒ‡é’ˆåï¼Œç«‹å³å°†å…¶ç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ï¼Œå› ä¸º &lt;code&gt;delete nullptr&lt;/code&gt;æ˜¯å®‰å…¨çš„ç©ºæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ç”³è¯·ï¼Œè°é‡Šæ”¾&lt;/strong&gt;ï¼šè¿™æ˜¯åŠ¨æ€å†…å­˜ç®¡ç†çš„é»„é‡‘æ³•åˆ™ã€‚ç¡®ä¿æ¯ä¸€ä¸ª &lt;code&gt;new&lt;/code&gt;éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¯¹åº”çš„ &lt;code&gt;delete&lt;/code&gt;ï¼Œæœ€å¥½åœ¨åŒä¸€ä¸ªä»£ç å±‚æ¬¡æˆ–æ¨¡å—å†…å®Œæˆï¼Œä»¥é¿å…å†…å­˜æ³„æ¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç°ä»£cçš„æœ€ä½³å®è·µæ™ºèƒ½æŒ‡é’ˆ"&gt;ğŸ’¡ ç°ä»£C++çš„æœ€ä½³å®è·µï¼šæ™ºèƒ½æŒ‡é’ˆ
&lt;/h3&gt;&lt;p&gt;æ‰‹åŠ¨ç®¡ç† &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;å¯¹ç¨‹åºå‘˜æ¥è¯´æ˜¯æ²‰é‡çš„è´Ÿæ‹…ï¼Œææ˜“å‡ºé”™ã€‚ç°ä»£C++ï¼ˆC++11åŠä»¥ä¸Šï¼‰å¼ºçƒˆæ¨èä½¿ç”¨ &lt;strong&gt;æ™ºèƒ½æŒ‡é’ˆ&lt;/strong&gt; æ¥è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æ™ºèƒ½æŒ‡é’ˆï¼ˆå¦‚ &lt;code&gt;std::unique_ptr&lt;/code&gt;å’Œ &lt;code&gt;std::shared_ptr&lt;/code&gt;ï¼‰æ˜¯ç±»æ¨¡æ¿ï¼Œå®ƒä»¬å°†åŠ¨æ€åˆ†é…çš„å¯¹è±¡å°è£…èµ·æ¥ï¼Œå…¶æ ¸å¿ƒåŸç†æ˜¯&lt;strong&gt;RAII&lt;/strong&gt;ã€‚æ™ºèƒ½æŒ‡é’ˆæœ¬èº«æ˜¯æ ˆå¯¹è±¡ï¼Œå½“å®ƒç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒçš„ææ„å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;æ¥é‡Šæ”¾å…¶ç®¡ç†çš„å †å¯¹è±¡ã€‚è¿™æ„å‘³ç€æ‚¨&lt;strong&gt;ä¸å†éœ€è¦æ‰‹åŠ¨è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;memory&amp;gt;
void modern_way() {
// ä½¿ç”¨ std::make_unique åˆ›å»ºå¯¹è±¡ï¼ˆC++14æ¨èï¼‰
auto ptr = std::make_unique&amp;lt;MyClass&amp;gt;();
// ... ä½¿ç”¨ ptr
} // å‡½æ•°ç»“æŸæ—¶ï¼Œptr è‡ªåŠ¨ææ„ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­è‡ªåŠ¨åˆ é™¤å…¶ç®¡ç†çš„ MyClass å¯¹è±¡
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;&lt;code&gt;delete&lt;/code&gt;å¿…é¡»ç”±ç”¨æˆ·æ‰‹åŠ¨è°ƒç”¨ï¼Œä»¥é‡Šæ”¾é€šè¿‡ &lt;code&gt;new&lt;/code&gt;åˆ›å»ºçš„åŠ¨æ€å¯¹è±¡&lt;/strong&gt;ã€‚è€Œ&lt;strong&gt;ææ„å‡½æ•°çš„è°ƒç”¨æ˜¯è‡ªåŠ¨çš„&lt;/strong&gt;ï¼Œå®ƒè¦ä¹ˆç”±æ‚¨æ‰‹åŠ¨å†™çš„ &lt;code&gt;delete&lt;/code&gt;è§¦å‘ï¼Œè¦ä¹ˆç”±ç¼–è¯‘å™¨åœ¨è‡ªåŠ¨å¯¹è±¡ï¼ˆå¦‚å±€éƒ¨å˜é‡ï¼‰ç¦»å¼€ä½œç”¨åŸŸæ—¶è§¦å‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç°ä»£C++å¼€å‘ä¸­ï¼Œ&lt;strong&gt;æœ€ä½³å®è·µæ˜¯å°½é‡é¿å…ç›´æ¥ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ï¼Œè€Œæ˜¯ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç­‰RAIIå·¥å…·ï¼Œå°†èµ„æºç®¡ç†çš„è´£ä»»äº¤ç»™ç¼–è¯‘å™¨ï¼Œä»è€Œå†™å‡ºæ›´å®‰å…¨ã€æ›´ç®€æ´çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ &lt;code&gt;delete&lt;/code&gt;å’Œææ„å‡½æ•°çš„å…³ç³»ï¼&lt;/p&gt;
&lt;h2 id="é»˜è®¤è¡Œä¸º"&gt;é»˜è®¤è¡Œä¸º
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œä½ è‡ªå®šä¹‰çš„ç±»&lt;strong&gt;ä¸ä¼šéšå¼ç»§æ‰¿æŸä¸ªå…¨å±€åŸºç±»&lt;/strong&gt;ï¼ˆè¿™ç‚¹ä¸ Java æˆ– C# ä¸åŒï¼‰ã€‚åŒæ—¶ï¼Œ&lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;æ“ä½œç¬¦çš„é»˜è®¤å®ç°ä¹Ÿ&lt;strong&gt;å¹¶éä»åŸºç±»ç»§æ‰¿è€Œæ¥&lt;/strong&gt;ï¼Œå®ƒä»¬æœ‰ç€è‡ªå·±ç‹¬ç«‹çš„æ¥æºå’Œè§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å¯¹æ¯”äº†è¿™ä¸¤ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è‡ªå®šä¹‰ç±»æ˜¯å¦éšå¼ç»§æ‰¿å…¨å±€åŸºç±»&lt;/th&gt;
&lt;th&gt;&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;çš„é»˜è®¤å®ç°æ¥æº&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç­”æ¡ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…¨å±€æ“ä½œç¬¦å‡½æ•°&lt;/strong&gt;ï¼Œè€Œéé€šè¿‡ç±»ç»§æ‰¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;C++ æ²¡æœ‰ç»Ÿä¸€çš„æ ¹ç±»ï¼ˆå¦‚ Java çš„ &lt;code&gt;Object&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;å…¨å±€é»˜è®¤å®ç°&lt;/strong&gt;ï¼šè°ƒç”¨ &lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt; 2. &lt;strong&gt;ç±»å†…å¯é‡è½½&lt;/strong&gt;ï¼šæ”¹å˜è¯¥ç±»åŠå…¶æ´¾ç”Ÿç±»çš„åˆ†é…è¡Œä¸º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ´¾ç”Ÿç±»å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸é€‚ç”¨&lt;/td&gt;
&lt;td&gt;è‹¥åŸºç±»é‡è½½äº† &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;ï¼Œæ´¾ç”Ÿç±»ä¼š&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;è¯¥é‡è½½ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç±»çš„ç‹¬ç«‹æ€§ä¸-newdeleteçš„æ¥æº"&gt;ğŸ” ç±»çš„ç‹¬ç«‹æ€§ä¸ &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;çš„æ¥æº
&lt;/h3&gt;&lt;h4 id="ç±»çš„ç‹¬ç«‹æ€§"&gt;&lt;strong&gt;ç±»çš„ç‹¬ç«‹æ€§&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œæ¯ä¸ªä½ ç›´æ¥å®šä¹‰çš„ç±»éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®ä½“ã€‚é™¤éä½ æ˜¾å¼ä½¿ç”¨ç»§æ‰¿è¯­æ³•ï¼ˆå¦‚ &lt;code&gt;class Derived : public Base&lt;/code&gt;ï¼‰ï¼Œå¦åˆ™å®ƒä¸ä¼šè‡ªåŠ¨è·å¾—ä»»ä½•çˆ¶ç±»ã€‚C++ æ ‡å‡†å¹¶æœªåƒ Java æˆ– C# é‚£æ ·å®šä¹‰ä¸€ä¸ªæ‰€æœ‰ç±»éƒ½éšå¼ç»§æ‰¿çš„å…¨å±€åŸºç±»ï¼ˆä¾‹å¦‚ &lt;code&gt;Object&lt;/code&gt;ï¼‰ï¼Œè¿™ä½“ç°äº† C++ &lt;strong&gt;â€œä¸ä¸ºä¸ä½¿ç”¨çš„ä¸œè¥¿æ”¯ä»˜æˆæœ¬â€&lt;/strong&gt; çš„è®¾è®¡å“²å­¦ï¼Œä¿è¯äº†å¯¹è±¡æ¨¡å‹çš„ç®€æ´å’Œé«˜æ•ˆ ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œç¼–è¯‘å™¨ä¼šä¸ºä½ çš„ç±»&lt;strong&gt;è‡ªåŠ¨ç”Ÿæˆ&lt;/strong&gt;ä¸€äº›ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå¦‚é»˜è®¤æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ç­‰ã€‚è¿™äº›å‡½æ•°ç¡®ä¿äº†å¯¹è±¡çš„åŸºæœ¬ç”Ÿå‘½å‘¨æœŸæ“ä½œï¼Œä½†å®ƒä»¬çš„ç”Ÿæˆè§„åˆ™æ˜¯å†…ç½®äºè¯­è¨€è§„èŒƒä¸­çš„ï¼Œå¹¶éé€šè¿‡ç»§æ‰¿è·å¾—ã€‚&lt;/p&gt;
&lt;h4 id="new"&gt;&lt;strong&gt;&lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;çš„é»˜è®¤å®ç°&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“ä½ ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;æ—¶ï¼Œå…¶é»˜è®¤è¡Œä¸ºæ¥è‡ªäº&lt;strong&gt;å…¨å±€ä½œç”¨åŸŸ&lt;/strong&gt;ä¸­é¢„å®šä¹‰çš„ &lt;code&gt;operator new&lt;/code&gt;å’Œ &lt;code&gt;operator delete&lt;/code&gt;å‡½æ•°ã€‚è¿™äº›å…¨å±€å‡½æ•°åº•å±‚é€šå¸¸ä½¿ç”¨ &lt;code&gt;malloc&lt;/code&gt;å’Œ &lt;code&gt;free&lt;/code&gt;è¿›è¡Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾ ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®åœ¨äºï¼Œä½ å¯ä»¥åœ¨ç±»å†…éƒ¨&lt;strong&gt;é‡è½½&lt;/strong&gt;è¿™äº›æ“ä½œç¬¦ã€‚ä¸€æ—¦åœ¨ç±»ä¸­é‡è½½ï¼Œåˆ›å»ºå’Œé”€æ¯è¯¥ç±»åŠå…¶æ´¾ç”Ÿç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šä½¿ç”¨ä½ è‡ªå®šä¹‰çš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯å…¨å±€é»˜è®¤ç‰ˆæœ¬ã€‚è¿™å¯ä»¥ç”¨äºå®ç°å†…å­˜æ± ã€è·Ÿè¸ªå†…å­˜ä½¿ç”¨ç­‰ç‰¹å®šéœ€æ±‚ã€‚é‡è½½çš„ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;ä¼šè¢«æ´¾ç”Ÿç±»ç»§æ‰¿ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;cstdlib&amp;gt;
class MyClass {
public:
int data;
// é‡è½½ç±»çš„ operator new
static void* operator new(std::size_t size) {
std::cout &amp;lt;&amp;lt; &amp;#34;MyClass&amp;#39;s custom new, size: &amp;#34; &amp;lt;&amp;lt; size &amp;lt;&amp;lt; std::endl;
return ::operator new(size); // ä»ä½¿ç”¨å…¨å±€çš„ new è¿›è¡Œåˆ†é…
}
// é‡è½½ç±»çš„ operator delete
static void operator delete(void* ptr) noexcept {
std::cout &amp;lt;&amp;lt; &amp;#34;MyClass&amp;#39;s custom delete&amp;#34; &amp;lt;&amp;lt; std::endl;
::operator delete(ptr); // ä½¿ç”¨å…¨å±€çš„ delete è¿›è¡Œé‡Šæ”¾
}
};
class MyDerived : public MyClass {
public:
int more_data;
};
int main() {
MyClass* obj1 = new MyClass; // è°ƒç”¨ MyClass é‡è½½çš„ operator new
delete obj1; // è°ƒç”¨ MyClass é‡è½½çš„ operator delete
MyDerived* obj2 = new MyDerived; // åŒæ ·è°ƒç”¨ä» MyClass ç»§æ‰¿æ¥çš„ operator new
delete obj2; // åŒæ ·è°ƒç”¨ç»§æ‰¿æ¥çš„ operator delete
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦ç»†èŠ‚ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦ç»†èŠ‚ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒºåˆ† &lt;code&gt;new&lt;/code&gt;è¡¨è¾¾å¼ä¸ &lt;code&gt;operator new&lt;/code&gt;å‡½æ•°&lt;/strong&gt;ï¼š&lt;code&gt;new MyClass&lt;/code&gt;è¿™ä¸ªè¡¨è¾¾å¼èƒŒååšäº†ä¸¤ä»¶äº‹ï¼šé¦–å…ˆè°ƒç”¨ &lt;code&gt;operator new&lt;/code&gt;åˆ†é…å†…å­˜ï¼Œç„¶åè°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ã€‚æˆ‘ä»¬é€šå¸¸é‡è½½çš„æ˜¯ &lt;code&gt;operator new&lt;/code&gt;å‡½æ•°ï¼Œå®ƒåªè´Ÿè´£å†…å­˜åˆ†é… ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°ç»„å½¢å¼çš„ &lt;code&gt;new[]&lt;/code&gt;å’Œ &lt;code&gt;delete[]&lt;/code&gt;&lt;/strong&gt;ï¼šå¯¹äºæ•°ç»„æ“ä½œï¼ˆ&lt;code&gt;new[]&lt;/code&gt;å’Œ &lt;code&gt;delete[]&lt;/code&gt;ï¼‰ï¼Œç¼–è¯‘å™¨å¯èƒ½éœ€è¦å­˜å‚¨æ•°ç»„å¤§å°ç­‰ä¿¡æ¯ï¼Œå…¶å†…å­˜å¸ƒå±€å¯èƒ½ä¸å•ä¸ªå¯¹è±¡ä¸åŒã€‚å› æ­¤ï¼Œé‡è½½äº†å•å¯¹è±¡ç‰ˆæœ¬çš„ &lt;code&gt;new/delete&lt;/code&gt;åï¼Œæœ€å¥½ä¹Ÿä¸€å¹¶é‡è½½æ•°ç»„ç‰ˆæœ¬ &lt;code&gt;new[]/delete[]&lt;/code&gt;ï¼Œå¹¶ä¸”åŠ¡å¿…é…å¯¹ä½¿ç”¨ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è½½ä¸å¤šæ€çš„äº¤äº’&lt;/strong&gt;ï¼šå¦‚æœåŸºç±»é‡è½½äº† &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;ï¼Œé‚£ä¹ˆé€šè¿‡åŸºç±»æŒ‡é’ˆåˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œéœ€è¦ç¡®ä¿åŸºç±»çš„ææ„å‡½æ•°æ˜¯&lt;strong&gt;è™šå‡½æ•°&lt;/strong&gt;ã€‚è¿™æ · &lt;code&gt;delete&lt;/code&gt;æ‰èƒ½æ­£ç¡®è°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ï¼Œå¹¶æœ€ç»ˆä½¿ç”¨åŸºç±»é‡è½½çš„ &lt;code&gt;operator delete&lt;/code&gt;æ¥é‡Šæ”¾å†…å­˜ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒC++ ç»™äºˆä½ å……åˆ†çš„è‡ªç”±å’Œæ˜ç¡®çš„è´£ä»»ï¼šè‡ªå®šä¹‰ç±»é»˜è®¤æ˜¯ç‹¬ç«‹çš„ï¼Œ&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;çš„é»˜è®¤å®ç°ç”±å…¨å±€å‡½æ•°æä¾›ã€‚ä½ å¯ä»¥é€šè¿‡ç±»å†…é‡è½½æ¥ç²¾ç»†æ§åˆ¶æŸä¸ªç±»åŠå…¶æ´¾ç”Ÿç±»çš„å†…å­˜åˆ†é…ç­–ç•¥ï¼Œä½†è¿™éœ€è¦ä½ æ¸…æ™°åœ°äº†è§£å…¶æœºåˆ¶å¹¶è°¨æ…æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ C++ ä¸­ç±»å’Œå†…å­˜ç®¡ç†æ“ä½œç¬¦çš„å…³ç³»ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é‡è½½å®è·µæˆ–è€…å¤šæ€åˆ é™¤çš„ç»†èŠ‚æœ‰æ›´å¤šå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="delete-é»˜è®¤å®ç°"&gt;delete é»˜è®¤å®ç°
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œ&lt;code&gt;delete&lt;/code&gt;æ“ä½œç¬¦çš„é»˜è®¤å®ç°æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„ä¸¤æ­¥è¿‡ç¨‹ï¼Œå®ƒç¡®ä¿äº†åŠ¨æ€åˆ†é…çš„å¯¹è±¡èƒ½å¤Ÿè¢«å®‰å…¨ä¸”å®Œæ•´åœ°é”€æ¯ã€‚å…¶æ ¸å¿ƒæœºåˆ¶å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹æµç¨‹å›¾ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†ä»æ‰§è¡Œ &lt;code&gt;delete&lt;/code&gt;è¯­å¥åˆ°å†…å­˜è¢«é‡Šæ”¾çš„å®Œæ•´è·¯å¾„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡Œ delete ptr è¯­å¥] --&amp;gt; B{æŒ‡é’ˆ ptr æ˜¯å¦ä¸ºç©º?}
B -- æ˜¯ --&amp;gt; C[ç©ºæ“ä½œï¼Œ å®‰å…¨è¿”å›]
B -- å¦ --&amp;gt; D[è°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°]
D --&amp;gt; E[è°ƒç”¨ operator delete é‡Šæ”¾å†…å­˜]
E --&amp;gt; F[å†…å­˜å½’è¿˜ç³»ç»Ÿ]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£è¯»è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id="-é»˜è®¤å®ç°çš„æ ¸å¿ƒæ­¥éª¤"&gt;ğŸ”§ é»˜è®¤å®ç°çš„æ ¸å¿ƒæ­¥éª¤
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;delete&lt;/code&gt;æ“ä½œç¬¦çš„é»˜è®¤è¡Œä¸ºä¸»è¦ä¾èµ–äºå…¨å±€çš„ &lt;code&gt;operator delete&lt;/code&gt;å‡½æ•°ã€‚å…¶æ ‡å‡†å®ç°é€šå¸¸å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// operator delete çš„é»˜è®¤å®ç°
void operator delete(void* ptr) noexcept {
free(ptr); // åº•å±‚é€šå¸¸è°ƒç”¨ C æ ‡å‡†åº“çš„ free å‡½æ•°
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“ä½ ä½¿ç”¨ &lt;code&gt;delete ptr;&lt;/code&gt;æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶è½¬æ¢ä¸ºä¸¤ä¸ªå…³é”®æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨ææ„å‡½æ•°&lt;/strong&gt;ï¼šé¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šè°ƒç”¨ &lt;code&gt;ptr&lt;/code&gt;æ‰€æŒ‡å‘å¯¹è±¡çš„ææ„å‡½æ•°ï¼ˆ&lt;code&gt;~ClassName()&lt;/code&gt;ï¼‰ã€‚ææ„å‡½æ•°è´Ÿè´£æ‰§è¡Œå¯¹è±¡çš„â€œæ¸…ç†å·¥ä½œâ€ï¼Œä¾‹å¦‚é‡Šæ”¾å¯¹è±¡å†…éƒ¨æŒæœ‰çš„å…¶ä»–èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨ &lt;code&gt;operator delete&lt;/code&gt;é‡Šæ”¾å†…å­˜&lt;/strong&gt;ï¼šåœ¨ææ„å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œç¼–è¯‘å™¨ä¼šè°ƒç”¨ &lt;code&gt;operator delete&lt;/code&gt;å‡½æ•°ï¼Œå°†å¯¹è±¡æœ¬èº«æ‰€å ç”¨çš„å†…å­˜å—å½’è¿˜ç»™ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹ä¸é™·é˜±"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹ä¸é™·é˜±
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;new[]&lt;/code&gt;ä¸ &lt;code&gt;delete[]&lt;/code&gt;å¿…é¡»é…å¯¹ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºæ•°ç»„ï¼Œå¿…é¡»ä½¿ç”¨ &lt;code&gt;delete[]&lt;/code&gt;è€Œä¸æ˜¯ &lt;code&gt;delete&lt;/code&gt;ã€‚&lt;code&gt;new[]&lt;/code&gt;ä¼šåœ¨åˆ†é…å†…å­˜æ—¶é¢å¤–å­˜å‚¨æ•°ç»„çš„å¤§å°ä¿¡æ¯ï¼ˆé€šå¸¸æ˜¯åœ¨å¯¹è±¡å†…å­˜å—ä¹‹å‰ï¼‰ï¼Œ&lt;code&gt;delete[]&lt;/code&gt;åˆ™åˆ©ç”¨è¿™ä¸ªä¿¡æ¯æ¥æ­£ç¡®è°ƒç”¨æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ææ„å‡½æ•°å¹¶é‡Šæ”¾æ•´å—å†…å­˜ã€‚å¦‚æœæ··ç”¨ï¼ˆä¾‹å¦‚ç”¨ &lt;code&gt;delete&lt;/code&gt;é‡Šæ”¾ç”± &lt;code&gt;new[]&lt;/code&gt;åˆ†é…çš„æ•°ç»„ï¼‰ï¼Œä¼šå¯¼è‡´&lt;strong&gt;æœªå®šä¹‰è¡Œä¸º&lt;/strong&gt;ï¼Œé€šå¸¸åªè°ƒç”¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„ææ„å‡½æ•°å¹¶é”™è¯¯åœ°é‡Šæ”¾å†…å­˜ï¼Œå¾ˆå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è™šææ„å‡½æ•°çš„é‡è¦æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ æ‰“ç®—é€šè¿‡åŸºç±»æŒ‡é’ˆæ¥åˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œ&lt;strong&gt;åŸºç±»çš„ææ„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°&lt;/strong&gt;ã€‚å¦åˆ™ï¼Œ&lt;code&gt;delete&lt;/code&gt;åªä¼šè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ï¼Œè€Œä¸ä¼šè°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ï¼Œä»è€Œå¯¼è‡´æ´¾ç”Ÿç±»ç‹¬æœ‰çš„èµ„æºæ— æ³•è¢«é‡Šæ”¾ï¼Œå¼•å‘èµ„æºæ³„æ¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Base {
public:
virtual ~Base() { ... } // è™šææ„å‡½æ•°ï¼Œä¿è¯å¤šæ€åˆ é™¤çš„æ­£ç¡®æ€§
};
class Derived : public Base { ... };
Base* ptr = new Derived;
delete ptr; // æ­£ç¡®ï¼šä¼šå…ˆè°ƒç”¨ ~Derived()ï¼Œå†è°ƒç”¨ ~Base()
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤ç©ºæŒ‡é’ˆæ˜¯å®‰å…¨çš„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ C++ æ ‡å‡†ä¸­ï¼Œ&lt;code&gt;delete&lt;/code&gt;ä¸€ä¸ªç©ºæŒ‡é’ˆï¼ˆ&lt;code&gt;nullptr&lt;/code&gt;ï¼‰æ˜¯æ˜ç¡®è§„å®šçš„&lt;strong&gt;ç©ºæ“ä½œ&lt;/strong&gt;ï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœã€‚å› æ­¤ï¼Œåœ¨åˆ é™¤æŒ‡é’ˆå‰é€šå¸¸ä¸éœ€è¦æ£€æŸ¥å…¶æ˜¯å¦ä¸ºç©ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è‡ªå®šä¹‰-operator-delete"&gt;ğŸ› ï¸ è‡ªå®šä¹‰ &lt;code&gt;operator delete&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥ä¸ºç‰¹å®šçš„ç±»é‡è½½ &lt;code&gt;operator delete&lt;/code&gt;ï¼Œä»¥å®ç°è‡ªå®šä¹‰çš„å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œä¾‹å¦‚å†…å­˜æ± ã€‚è¿™å¯ä»¥æ˜¾è‘—æå‡é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ—¶çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MyClass {
public:
void* operator new(size_t size);
void operator delete(void* ptr) noexcept {
// è‡ªå®šä¹‰å†…å­˜é‡Šæ”¾é€»è¾‘ï¼Œä¾‹å¦‚å°†å†…å­˜å—è¿”å›ç»™å†…å­˜æ± 
std::cout &amp;lt;&amp;lt; &amp;#34;Custom delete for MyClass&amp;#34; &amp;lt;&amp;lt; std::endl;
myMemoryPool.deallocate(ptr);
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ç°ä»£cçš„æœ€ä½³å®è·µ"&gt;ğŸ’¡ ç°ä»£C++çš„æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;åœ¨ç°ä»£C++å¼€å‘ä¸­ï¼Œ&lt;strong&gt;å¼ºçƒˆå»ºè®®å°½é‡é¿å…ç›´æ¥ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å’Œ &lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ã€‚è€Œæ˜¯åº”è¯¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;std::unique_ptr&lt;/code&gt;å’Œ &lt;code&gt;std::shared_ptr&lt;/code&gt;ã€‚å®ƒä»¬åˆ©ç”¨ &lt;strong&gt;RAII&lt;/strong&gt; æŠ€æœ¯ï¼Œè‡ªåŠ¨åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;ï¼Œæå¤§åœ°å‡å°‘äº†å†…å­˜æ³„æ¼çš„é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“å®¹å™¨&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;std::vector&lt;/code&gt;ã€&lt;code&gt;std::string&lt;/code&gt;ï¼Œå®ƒä»¬å†…éƒ¨å·²ç»å¸®ä½ å®‰å…¨åœ°ç®¡ç†äº†åŠ¨æ€å†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;delete&lt;/code&gt;çš„é»˜è®¤å®ç°é€šè¿‡ &lt;strong&gt;ææ„å‡½æ•°ï¼ˆæ¸…ç†å¯¹è±¡èµ„æºï¼‰ + &lt;code&gt;operator delete&lt;/code&gt;ï¼ˆé‡Šæ”¾å¯¹è±¡å†…å­˜ï¼‰&lt;/strong&gt; è¿™ä¸¤æ­¥åä½œï¼Œç¡®ä¿äº†èµ„æºçš„å®Œå…¨é‡Šæ”¾ã€‚ç†è§£å…¶åŸç†å’Œæ³¨æ„äº‹é¡¹ï¼Œæ˜¯ç¼–å†™å®‰å…¨ã€ç¨³å®šC++ç¨‹åºçš„åŸºç¡€ã€‚ä½†åœ¨å®è·µä¸­ï¼Œæ›´é¼“åŠ±ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç­‰ç°ä»£æŠ€æœ¯æ¥è§„é¿æ‰‹åŠ¨å†…å­˜ç®¡ç†çš„å¤æ‚æ€§å’Œé£é™©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£C++ä¸­ &lt;code&gt;delete&lt;/code&gt;çš„é»˜è®¤å®ç°æœºåˆ¶ï¼&lt;/p&gt;
&lt;h2 id="å †--æ ˆ"&gt;å † &amp;amp; æ ˆ
&lt;/h2&gt;&lt;p&gt;åœ¨C++ä¸­ï¼Œå¯¹è±¡æ˜¯å­˜æ”¾åœ¨å †ä¸Šè¿˜æ˜¯æ ˆä¸Šï¼Œä¸»è¦å–å†³äºå®ƒçš„åˆ›å»ºæ–¹å¼ã€ç”Ÿå‘½å‘¨æœŸéœ€æ±‚ä»¥åŠå¤§å°ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒçš„åŒºåˆ«ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿåˆ¤æ–­ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹å¾ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ ˆä¸Šå¯¹è±¡&lt;/th&gt;
&lt;th&gt;å †ä¸Šå¯¹è±¡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ›å»ºæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥å®šä¹‰å˜é‡ï¼Œå¦‚ &lt;code&gt;MyClass obj;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å…³é”®å­—ï¼Œå¦‚ &lt;code&gt;MyClass* obj = new MyClass();&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨ç®¡ç†&lt;/strong&gt;ã€‚ç”±ç¼–è¯‘å™¨è´Ÿè´£åˆ†é…å’Œé‡Šæ”¾ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‰‹åŠ¨ç®¡ç†&lt;/strong&gt;ã€‚ç¨‹åºå‘˜è´Ÿè´£ç”¨ &lt;code&gt;new&lt;/code&gt;åˆ†é…ï¼Œå¿…é¡»ç”¨ &lt;code&gt;delete&lt;/code&gt;é‡Šæ”¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸&lt;strong&gt;ä½œç”¨åŸŸç»‘å®š&lt;/strong&gt;ã€‚ç¦»å¼€ä½œç”¨åŸŸï¼ˆå¦‚å‡½æ•°ç»“æŸï¼‰åè‡ªåŠ¨é”€æ¯ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸&lt;code&gt;delete&lt;/code&gt;è°ƒç”¨ç»‘å®š&lt;/strong&gt;ã€‚é™¤éæ‰‹åŠ¨é‡Šæ”¾ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨ï¼Œå¯è·¨å‡½æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é…/é‡Šæ”¾æå¿«&lt;/strong&gt;ï¼ˆä»…ç§»åŠ¨æ ˆæŒ‡é’ˆï¼‰ã€‚å†…å­˜è¿ç»­æ— ç¢ç‰‡ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é…/é‡Šæ”¾è¾ƒæ…¢&lt;/strong&gt;ï¼ˆéœ€æŸ¥æ‰¾ç©ºé—²å†…å­˜å—ï¼‰ã€‚å¯èƒ½äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¾ˆå°ï¼Œé€šå¸¸å‡ MBï¼ˆæ˜“æ ˆæº¢å‡ºï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;å¾ˆå¤§ï¼Œä»…å—ç³»ç»Ÿå¯ç”¨å†…å­˜é™åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿå‘½å‘¨æœŸçŸ­å°çš„ä¸´æ—¶å¯¹è±¡ã€å±€éƒ¨å˜é‡ã€‚&lt;/td&gt;
&lt;td&gt;ç”Ÿå‘½å‘¨æœŸé•¿æˆ–è·¨ä½œç”¨åŸŸçš„å¯¹è±¡ã€å¤§å‹å¯¹è±¡ï¼ˆå¦‚å¤§æ•°ç»„ï¼‰ã€éœ€åœ¨è¿è¡Œæ—¶ç¡®å®šå¤§å°çš„å¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åˆ¤æ–­å­˜å‚¨ä½ç½®çš„å®ç”¨æŠ€å·§"&gt;ğŸ’¡ åˆ¤æ–­å­˜å‚¨ä½ç½®çš„å®ç”¨æŠ€å·§
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ç¼–ç ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¿«é€Ÿåˆ¤æ–­å¯¹è±¡çš„å­˜å‚¨ä½ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çœ‹åˆ›å»ºè¯­æ³•&lt;/strong&gt;ï¼šæœ€ç›´æ¥çš„åˆ¤æ–­æ–¹æ³•æ˜¯çœ‹åˆ›å»ºå¯¹è±¡æ—¶æ˜¯å¦ä½¿ç”¨äº† &lt;code&gt;new&lt;/code&gt;å…³é”®å­—ã€‚ä½¿ç”¨äº† &lt;code&gt;new&lt;/code&gt;ï¼Œå¯¹è±¡å°±åœ¨å †ä¸Šï¼›å¦åˆ™ï¼Œé€šå¸¸åœ¨æ ˆä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœ‹é”€æ¯è´£ä»»&lt;/strong&gt;ï¼šéœ€è¦ä½ æ‰‹åŠ¨è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;æ¥é”€æ¯çš„ï¼Œå¯¹è±¡åœ¨å †ä¸Šï¼›ç”±ç³»ç»Ÿè‡ªåŠ¨é”€æ¯çš„ï¼Œåœ¨æ ˆä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§‚å¯Ÿå†…å­˜åœ°å€&lt;/strong&gt;ï¼šå †å’Œæ ˆåœ¨å†…å­˜ä¸­çš„ç”Ÿé•¿æ–¹å‘ä¸åŒã€‚ä½ å¯ä»¥é€šè¿‡æ‰“å°å˜é‡çš„åœ°å€æ¥è§‚å¯Ÿï¼šæ ˆä¸Šçš„å˜é‡åœ°å€é€šå¸¸å‘ä½åœ°å€æ–¹å‘æ‰©å±•ï¼Œè€Œå †ä¸Šåˆ†é…çš„åœ°å€å‘é«˜åœ°å€æ–¹å‘æ‰©å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç°ä»£cçš„æœ€ä½³å®è·µä¼˜å…ˆä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ"&gt;ğŸ› ï¸ ç°ä»£C++çš„æœ€ä½³å®è·µï¼šä¼˜å…ˆä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ
&lt;/h3&gt;&lt;p&gt;æ‰‹åŠ¨ç®¡ç†å †å†…å­˜ï¼ˆ&lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;ï¼‰éå¸¸å®¹æ˜“å‡ºé”™ï¼Œæ¯”å¦‚å¯¼è‡´å†…å­˜æ³„æ¼æˆ–é‡å¤é‡Šæ”¾ã€‚ç°ä»£C++ï¼ˆC++11åŠä»¥ä¸Šï¼‰å¼ºçƒˆæ¨èä½¿ç”¨&lt;strong&gt;æ™ºèƒ½æŒ‡é’ˆ&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;std::unique_ptr&lt;/code&gt;å’Œ &lt;code&gt;std::shared_ptr&lt;/code&gt;ï¼‰æ¥ç®¡ç†å †ä¸Šå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æ™ºèƒ½æŒ‡é’ˆç»“åˆäº†å †çš„çµæ´»æ€§å’Œæ ˆçš„å®‰å…¨æ€§ã€‚å®ƒä»¬æœ¬èº«æ˜¯æ ˆä¸Šçš„å¯¹è±¡ï¼Œä½†å…¶å†…éƒ¨åŒ…è£¹ç€å †ä¸Šå¯¹è±¡çš„æŒ‡é’ˆã€‚å½“æ™ºèƒ½æŒ‡é’ˆç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒçš„ææ„å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;æ¥é‡Šæ”¾æ‰€ç®¡ç†çš„å †å†…å­˜ã€‚è¿™ç›¸å½“äºå°†å †ä¸Šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåˆ°äº†ä¸€ä¸ªæ ˆä¸Šç®¡ç†å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ç°äº†è‡ªåŠ¨ç®¡ç†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;memory&amp;gt;
void smartFunction() {
// å †ä¸Šåˆ›å»ºå¯¹è±¡ï¼Œä½†ç”±æ ˆä¸Šçš„ unique_ptr è‡ªåŠ¨ç®¡ç†
std::unique_ptr&amp;lt;MyClass&amp;gt; objPtr = std::make_unique&amp;lt;MyClass&amp;gt;();
objPtr-&amp;gt;doSomething();
// å‡½æ•°ç»“æŸæ—¶ï¼ŒobjPtr ææ„ï¼Œè‡ªåŠ¨è°ƒç”¨ deleteï¼Œæ— éœ€æ‰‹åŠ¨é‡Šæ”¾
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å¯¹è±¡å­˜å‚¨åœ¨æ ˆä¸Šè¿˜æ˜¯å †ä¸Šï¼Œå†³å®šäº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€æ€§èƒ½ç‰¹å¾å’Œç®¡ç†æ–¹å¼&lt;/strong&gt;ã€‚é€‰æ‹©çš„å…³é”®åœ¨äºè¯„ä¼°å¯¹è±¡çš„éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸçŸ­æš‚ã€å¤§å°å¯æ§&lt;/strong&gt; -&amp;gt; ä¼˜å…ˆä½¿ç”¨&lt;strong&gt;æ ˆ&lt;/strong&gt;ï¼Œç®€å•é«˜æ•ˆä¸”å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸé•¿ã€ä½“ç§¯åºå¤§æˆ–éœ€çµæ´»å…±äº«&lt;/strong&gt; -&amp;gt; ä½¿ç”¨&lt;strong&gt;å †&lt;/strong&gt;ï¼Œå¹¶ç»“åˆ&lt;strong&gt;æ™ºèƒ½æŒ‡é’ˆ&lt;/strong&gt;è¿›è¡Œè‡ªåŠ¨åŒ–ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè¿™æ˜¯ç°ä»£C++æ¨èçš„å®è·µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°åˆ¤æ–­å¯¹è±¡çš„ä½ç½®å¹¶åšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2 id="æ™ºèƒ½æŒ‡é’ˆ"&gt;æ™ºèƒ½æŒ‡é’ˆ
&lt;/h2&gt;&lt;p&gt;C++ çš„æ™ºèƒ½æŒ‡é’ˆæ˜¯ç°ä»£ C++ ä¸­ç”¨äºè‡ªåŠ¨åŒ–ã€å®‰å…¨ç®¡ç†åŠ¨æ€å†…å­˜çš„åˆ©å™¨ï¼Œå®ƒèƒ½æœ‰æ•ˆå¸®åŠ©æ‚¨é¿å…å†…å­˜æ³„æ¼ã€æ‚¬ç©ºæŒ‡é’ˆç­‰ç»å…¸é—®é¢˜ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°æ¦‚æ‹¬äº†ä¸‰ç§æ ¸å¿ƒæ™ºèƒ½æŒ‡é’ˆçš„ç²¾é«“ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€ŸæŠ“ä½é‡ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;std::unique_ptr&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;std::shared_ptr&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;std::weak_ptr&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰€æœ‰æƒæ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬å æ‰€æœ‰æƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«æ‰€æœ‰æƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ‹¥æœ‰æ‰€æœ‰æƒ&lt;/strong&gt; (å¼±å¼•ç”¨)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ª &lt;code&gt;unique_ptr&lt;/code&gt;æŒ‡å‘å¯¹è±¡&lt;/td&gt;
&lt;td&gt;å¤šä¸ª &lt;code&gt;shared_ptr&lt;/code&gt;å¯å…±äº«åŒä¸€å¯¹è±¡&lt;/td&gt;
&lt;td&gt;ä¸æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸï¼Œè§£å†³å¾ªç¯å¼•ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶è¯­ä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¦æ­¢å¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…è®¸å¤åˆ¶ï¼Œå¼•ç”¨è®¡æ•°å¢åŠ &lt;/td&gt;
&lt;td&gt;å…è®¸ä» &lt;code&gt;shared_ptr&lt;/code&gt;æˆ– &lt;code&gt;weak_ptr&lt;/code&gt;æ„é€ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒç§»åŠ¨&lt;/strong&gt; (æ‰€æœ‰æƒè½¬ç§»)&lt;/td&gt;
&lt;td&gt;æ”¯æŒç§»åŠ¨&lt;/td&gt;
&lt;td&gt;æ”¯æŒç§»åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡ ä¹ä¸ºé›¶ (ä¸åŸå§‹æŒ‡é’ˆç›¸å½“)&lt;/td&gt;
&lt;td&gt;éœ€ç»´æŠ¤å¼•ç”¨è®¡æ•°ï¼Œæœ‰ä¸€å®šå¼€é”€&lt;/td&gt;
&lt;td&gt;éœ€ç»´æŠ¤å¼±å¼•ç”¨è®¡æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èµ„æºç‹¬å ã€å·¥å‚æ¨¡å¼ã€è¿”å›å †å¯¹è±¡&lt;/td&gt;
&lt;td&gt;èµ„æºå…±äº«ã€ç¼“å­˜ã€å¤šçº¿ç¨‹åœºæ™¯&lt;/td&gt;
&lt;td&gt;æ‰“ç ´å¾ªç¯å¼•ç”¨ã€è§‚å¯Ÿè€…æ¨¡å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£æ™ºèƒ½æŒ‡é’ˆçš„åŸºçŸ³raii"&gt;ğŸ§  ç†è§£æ™ºèƒ½æŒ‡é’ˆçš„åŸºçŸ³ï¼šRAII
&lt;/h3&gt;&lt;p&gt;æ™ºèƒ½æŒ‡é’ˆçš„å¼ºå¤§ï¼Œæºäºå…¶èƒŒåçš„ &lt;strong&gt;RAII&lt;/strong&gt; æœºåˆ¶ã€‚RAII çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š&lt;strong&gt;å°†èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼‰çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»‘å®š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œåœ¨æ™ºèƒ½æŒ‡é’ˆçš„&lt;strong&gt;æ„é€ å‡½æ•°&lt;/strong&gt;ä¸­è·å–èµ„æºï¼ˆä¾‹å¦‚ï¼Œæ¥æ”¶ä¸€ä¸ªåŸå§‹æŒ‡é’ˆï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æ™ºèƒ½æŒ‡é’ˆçš„&lt;strong&gt;ææ„å‡½æ•°&lt;/strong&gt;ä¸­è‡ªåŠ¨é‡Šæ”¾èµ„æºï¼ˆä¾‹å¦‚ï¼Œè°ƒç”¨ &lt;code&gt;delete&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œåªè¦æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡è¶…å‡ºå…¶ä½œç”¨åŸŸï¼ˆä¾‹å¦‚å‡½æ•°ç»“æŸï¼‰ï¼Œå®ƒçš„ææ„å‡½æ•°å°±ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä»è€Œç¡®ä¿å…¶ç®¡ç†çš„èµ„æºè¢«é‡Šæ”¾ã€‚å³ä½¿ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œç”±äºæ ˆå±•å¼€ï¼ˆStack Unwindingï¼‰ä¼šè°ƒç”¨å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œèµ„æºä¹Ÿèƒ½è¢«å®‰å…¨é‡Šæ”¾ï¼Œè¿™å°±æä¾›äº†&lt;strong&gt;å¼‚å¸¸å®‰å…¨&lt;/strong&gt;çš„ä¿è¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸‰ç§æ™ºèƒ½æŒ‡é’ˆæ·±åº¦è§£æ"&gt;ğŸ”§ ä¸‰ç§æ™ºèƒ½æŒ‡é’ˆæ·±åº¦è§£æ
&lt;/h3&gt;&lt;h4 id="stdunique_ptr"&gt;&lt;strong&gt;&lt;code&gt;std::unique_ptr&lt;/code&gt;ï¼šä¸“å±çš„å®ˆæŠ¤è€…&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;std::unique_ptr&lt;/code&gt;å®è¡Œç‹¬å ç»Ÿæ²»ï¼Œå®ƒè®¤ä¸ºå…¶æŒ‡å‘çš„å¯¹è±¡åº”è¯¥ä¸”åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰æƒè½¬ç§»&lt;/strong&gt;ï¼šç”±äºç‹¬å æ€§ï¼Œ&lt;code&gt;std::unique_ptr&lt;/code&gt;&lt;strong&gt;ä¸èƒ½è¢«å¤åˆ¶&lt;/strong&gt;ã€‚ä½†å¯ä»¥é€šè¿‡ &lt;code&gt;std::move&lt;/code&gt;å°†å…¶æ‰€æœ‰æƒè½¬ç§»ç»™å¦ä¸€ä¸ª &lt;code&gt;std::unique_ptr&lt;/code&gt;ã€‚è½¬ç§»åï¼ŒæºæŒ‡é’ˆå˜ä¸º &lt;code&gt;nullptr&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::unique_ptr&amp;lt;MyClass&amp;gt; ptr1(new MyClass);
// std::unique_ptr&amp;lt;MyClass&amp;gt; ptr2 = ptr1; // é”™è¯¯ï¼ä¸èƒ½å¤åˆ¶
std::unique_ptr&amp;lt;MyClass&amp;gt; ptr2 = std::move(ptr1); // æ­£ç¡®ï¼Œptr1 çš„æ‰€æœ‰æƒè½¬ç§»ç»™ ptr2ï¼Œptr1 å˜ä¸ºç©º
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæ¨è&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨ &lt;code&gt;std::make_unique&lt;/code&gt;(C++14 å¼•å…¥) æ¥åˆ›å»ºï¼Œè¿™æ›´å®‰å…¨é«˜æ•ˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;auto ptr = std::make_unique&amp;lt;MyClass&amp;gt;(constructor_args);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="stdshared_ptr"&gt;&lt;strong&gt;&lt;code&gt;std::shared_ptr&lt;/code&gt;ï¼šå…±äº«çš„å›¢é˜Ÿ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“éœ€è¦ä¸€ä¸ªèµ„æºè¢«å¤šä¸ªæ‰€æœ‰è€…å…±åŒç®¡ç†æ—¶ï¼Œ&lt;code&gt;std::shared_ptr&lt;/code&gt;æ˜¯ç†æƒ³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼•ç”¨è®¡æ•°&lt;/strong&gt;ï¼š&lt;code&gt;std::shared_ptr&lt;/code&gt;é€šè¿‡&lt;strong&gt;å¼•ç”¨è®¡æ•°&lt;/strong&gt;æ¥è·Ÿè¸ªæœ‰å¤šå°‘ä¸ª &lt;code&gt;shared_ptr&lt;/code&gt;æ­£æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚æ¯å½“ä¸€ä¸ªæ–°çš„ &lt;code&gt;shared_ptr&lt;/code&gt;é€šè¿‡æ‹·è´èµ‹å€¼æˆ–æ„é€ ä¸æºæŒ‡é’ˆå…±äº«æ‰€æœ‰æƒæ—¶ï¼Œå¼•ç”¨è®¡æ•°å¢åŠ ã€‚å½“æŸä¸ª &lt;code&gt;shared_ptr&lt;/code&gt;è¢«é”€æ¯æˆ–é‡ç½®æ—¶ï¼Œå¼•ç”¨è®¡æ•°å‡å°‘ã€‚å½“è®¡æ•°å˜ä¸ºé›¶ï¼Œå¯¹è±¡è¢«è‡ªåŠ¨é”€æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæ¨è&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨ &lt;code&gt;std::make_shared&lt;/code&gt;ã€‚å®ƒé€šå¸¸åªéœ€ä¸€æ¬¡å†…å­˜åˆ†é…ï¼ˆåŒæ—¶ä¸ºå¯¹è±¡æœ¬èº«å’Œæ§åˆ¶å—-åŒ…å«å¼•ç”¨è®¡æ•°ç­‰-åˆ†é…å†…å­˜ï¼‰ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;auto ptr1 = std::make_shared&amp;lt;MyClass&amp;gt;();
auto ptr2 = ptr1; // å¼•ç”¨è®¡æ•°å˜ä¸º 2
std::cout &amp;lt;&amp;lt; ptr1.use_count(); // è¾“å‡º 2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="stdweak_ptr"&gt;&lt;strong&gt;&lt;code&gt;std::weak_ptr&lt;/code&gt;ï¼šèªæ˜çš„è§‚å¯Ÿè€…&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;std::weak_ptr&lt;/code&gt;æœ¬èº«ä¸æ‹¥æœ‰å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œä¹Ÿä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ã€‚å®ƒè®¾è®¡ç”¨æ¥è§£å†³ &lt;code&gt;shared_ptr&lt;/code&gt;æœ€è‘—åçš„é™·é˜±ï¼š&lt;strong&gt;å¾ªç¯å¼•ç”¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¾ªç¯å¼•ç”¨é—®é¢˜&lt;/strong&gt;ï¼šå½“ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡é€šè¿‡ &lt;code&gt;shared_ptr&lt;/code&gt;äº’ç›¸æŒæœ‰æ—¶ï¼Œä¼šå½¢æˆå¾ªç¯å¼•ç”¨ã€‚è¿™å°†å¯¼è‡´å®ƒä»¬çš„å¼•ç”¨è®¡æ•°æ°¸è¿œæ— æ³•é™ä¸ºé›¶ï¼Œä»è€Œäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå°†å¾ªç¯é“¾ä¸­çš„æŸä¸€ä¸ª &lt;code&gt;shared_ptr&lt;/code&gt;æ›¿æ¢ä¸º &lt;code&gt;std::weak_ptr&lt;/code&gt;ã€‚&lt;code&gt;weak_ptr&lt;/code&gt;ä¸ä¼šå¢åŠ å¼•ç”¨è®¡æ•°ï¼Œå› æ­¤å½“å¤–éƒ¨å…³è”è§£é™¤æ—¶ï¼Œå¯¹è±¡å¯ä»¥è¢«æ­£ç¡®é”€æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ–¹æ³•&lt;/strong&gt;ï¼š&lt;code&gt;weak_ptr&lt;/code&gt;ä¸èƒ½ç›´æ¥è®¿é—®å¯¹è±¡ï¼Œå¿…é¡»é€šè¿‡è°ƒç”¨ &lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªä¸´æ—¶çš„ &lt;code&gt;shared_ptr&lt;/code&gt;æ¥ä½¿ç”¨ã€‚åœ¨ä½¿ç”¨å‰ï¼Œæœ€å¥½æ£€æŸ¥è¯¥ &lt;code&gt;shared_ptr&lt;/code&gt;æ˜¯å¦æœ‰æ•ˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::weak_ptr&amp;lt;MyClass&amp;gt; weak_ptr = some_shared_ptr;
if (auto temp_shared_ptr = weak_ptr.lock()) { // è½¬æ¢å¹¶æ£€æŸ¥å¯¹è±¡æ˜¯å¦è¿˜å­˜åœ¨
temp_shared_ptr-&amp;gt;doSomething(); // å®‰å…¨åœ°ä½¿ç”¨å¯¹è±¡
} else {
// å¯¹è±¡å·²è¢«é‡Šæ”¾
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®å®è·µä¸å¸¸è§é™·é˜±"&gt;âš ï¸ å…³é”®å®è·µä¸å¸¸è§é™·é˜±
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;make_\*&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;std::make_unique&lt;/code&gt;å’Œ &lt;code&gt;std::make_shared&lt;/code&gt;ï¼Œè€Œéç›´æ¥ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;ã€‚è¿™ä¸ä»…æ˜¯æ€§èƒ½ä¼˜åŒ–ï¼ˆå‡å°‘å†…å­˜åˆ†é…æ¬¡æ•°ï¼‰ï¼Œè¿˜èƒ½æä¾›æ›´å¼ºçš„å¼‚å¸¸å®‰å…¨ä¿éšœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è­¦æƒ• &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆ&lt;/strong&gt;ï¼šåˆ‡å‹¿åœ¨ç±»çš„æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œä½¿ç”¨ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;shared_ptr&lt;/code&gt;ã€‚è¿™ä¼šå¯¼è‡´å¤šä¸ªäº’ä¸çŸ¥æƒ…çš„æ§åˆ¶å—è¢«åˆ›å»ºï¼Œä»è€Œå¼•å‘é‡å¤åˆ é™¤ã€‚æ­£ç¡®çš„åšæ³•æ˜¯è®©è¯¥ç±»ç»§æ‰¿ &lt;code&gt;std::enable_shared_from_this&lt;/code&gt;ï¼Œå¹¶åœ¨éœ€è¦æ—¶ä½¿ç”¨ &lt;code&gt;shared_from_this()&lt;/code&gt;æˆå‘˜å‡½æ•°æ¥è·å–ä¸€ä¸ªå…±äº«æ‰€æœ‰æƒçš„æ™ºèƒ½æŒ‡é’ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…æ··åˆä½¿ç”¨åŸå§‹æŒ‡é’ˆ&lt;/strong&gt;ï¼šä¸è¦ç”¨åŒä¸€ä¸ªåŸå§‹æŒ‡é’ˆåˆå§‹åŒ–å¤šä¸ªç‹¬ç«‹çš„æ™ºèƒ½æŒ‡é’ˆã€‚è¿™åŒæ ·ä¼šå¯¼è‡´å¤šä¸ªæ§åˆ¶å—å’Œé‡å¤é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;MyClass* raw_ptr = new MyClass;
std::shared_ptr&amp;lt;MyClass&amp;gt; p1(raw_ptr);
std::shared_ptr&amp;lt;MyClass&amp;gt; p2(raw_ptr); // ç¾éš¾ï¼ä¸¤ä¸ªç‹¬ç«‹çš„ shared_ptr éƒ½è®¤ä¸ºè‡ªå·±æ˜¯ raw_ptr çš„å”¯ä¸€æ‰€æœ‰è€…
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜ç¡®æ‰€æœ‰æƒè¯­ä¹‰&lt;/strong&gt;ï¼šåœ¨è®¾è®¡å’Œæ¥å£ä¸­æ¸…æ™°åœ°è¡¨è¾¾ä½ çš„æ„å›¾ã€‚å¦‚æœå‡½æ•°åªæ˜¯ä½¿ç”¨å¯¹è±¡è€Œä¸å–å¾—æ‰€æœ‰æƒï¼Œåº”ä¼ é€’åŸå§‹æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚å¦‚æœå‡½æ•°éœ€è¦å…±äº«æ‰€æœ‰æƒï¼Œåˆ™ä¼ é€’ &lt;code&gt;shared_ptr&lt;/code&gt;ï¼›å¦‚æœéœ€è¦å–å¾—ç‹¬å æ‰€æœ‰æƒï¼Œåˆ™ä¼ é€’ &lt;code&gt;unique_ptr&lt;/code&gt;å¹¶æŒ‰å€¼æ¥æ”¶ï¼ˆè¡¨ç¤ºæ‰€æœ‰æƒè½¬ç§»ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ™ºèƒ½æŒ‡é’ˆæ˜¯ç°ä»£ C++ é«˜æ•ˆã€å®‰å…¨èµ„æºç®¡ç†çš„åŸºçŸ³ã€‚ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤é¦–é€‰ &lt;code&gt;std::unique_ptr&lt;/code&gt;&lt;/strong&gt;ï¼Œå®ƒå¼€é”€æœ€å°ï¼Œæ‰€æœ‰æƒæœ€æ¸…æ™°ã€‚&lt;/li&gt;
&lt;li&gt;å½“éœ€è¦çœŸæ­£çš„å…±äº«æ‰€æœ‰æƒæ—¶ï¼Œå†ä½¿ç”¨ &lt;code&gt;std::shared_ptr&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨ &lt;code&gt;shared_ptr&lt;/code&gt;ä¸”å­˜åœ¨å¾ªç¯å¼•ç”¨çš„å¯èƒ½ï¼ŒåŠ¡å¿…ç”¨ &lt;code&gt;std::weak_ptr&lt;/code&gt;æ¥æ‰“ç ´å¾ªç¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ C++ æ™ºèƒ½æŒ‡é’ˆã€‚å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ„é€ å‡½æ•°"&gt;æ„é€ å‡½æ•°
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œæ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒä»¬ç¡®ä¿äº†å¯¹è±¡èƒ½å¤Ÿè¢«æ­£ç¡®åœ°åˆå§‹åŒ–å’Œæ¸…ç†ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°æ¦‚æ‹¬äº†å®ƒä»¬çš„æ ¸å¿ƒç‰¹ç‚¹ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è§¦å‘æ—¶æœº&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä»»åŠ¡&lt;/th&gt;
&lt;th&gt;é»˜è®¤ç”Ÿæˆè§„åˆ™&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤æ„é€ å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ClassName();&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜ &lt;code&gt;ClassName obj;&lt;/code&gt;æ—¶&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–å¯¹è±¡æˆå‘˜&lt;/td&gt;
&lt;td&gt;å¦‚æœ&lt;strong&gt;æœªå®šä¹‰ä»»ä½•æ„é€ å‡½æ•°&lt;/strong&gt;ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰å‚æ„é€ å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ClassName(int x);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜ &lt;code&gt;ClassName obj(10);&lt;/code&gt;æ—¶&lt;/td&gt;
&lt;td&gt;æŒ‰æŒ‡å®šå€¼åˆå§‹åŒ–å¯¹è±¡&lt;/td&gt;
&lt;td&gt;éœ€ç”¨æˆ·è‡ªå®šä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‹·è´æ„é€ å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ClassName(const ClassName&amp;amp;);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨å·²æœ‰å¯¹è±¡åˆå§‹åŒ–æ–°å¯¹è±¡æ—¶&lt;/td&gt;
&lt;td&gt;å®ç°å¯¹è±¡ä¹‹é—´çš„æ‹·è´ï¼ˆæ·±/æµ…æ‹·è´ï¼‰&lt;/td&gt;
&lt;td&gt;å¦‚æœ&lt;strong&gt;æœªè‡ªå®šä¹‰&lt;/strong&gt;ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼ˆæµ…æ‹·è´ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç§»åŠ¨æ„é€ å‡½æ•° (C++11)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ClassName(ClassName&amp;amp;&amp;amp;);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨å³å€¼ï¼ˆå¦‚ä¸´æ—¶å¯¹è±¡ï¼‰åˆå§‹åŒ–æ–°å¯¹è±¡æ—¶&lt;/td&gt;
&lt;td&gt;è½¬ç§»èµ„æºæ‰€æœ‰æƒï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´&lt;/td&gt;
&lt;td&gt;åœ¨æŸäº›æ¡ä»¶ä¸‹&lt;strong&gt;è‡ªåŠ¨ç”Ÿæˆ&lt;/strong&gt;ï¼Œæˆ–éœ€ç”¨æˆ·è‡ªå®šä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ææ„å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;~ClassName();&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼ˆå¦‚ç¦»å¼€ä½œç”¨åŸŸï¼‰&lt;/td&gt;
&lt;td&gt;é‡Šæ”¾å¯¹è±¡å ç”¨çš„èµ„æºï¼ˆå¦‚å†…å­˜ã€æ–‡ä»¶å¥æŸ„ï¼‰&lt;/td&gt;
&lt;td&gt;å¦‚æœ&lt;strong&gt;æœªè‡ªå®šä¹‰&lt;/strong&gt;ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å„ç±»æ„é€ å‡½æ•°è¯¦è§£"&gt;ğŸ› ï¸ å„ç±»æ„é€ å‡½æ•°è¯¦è§£
&lt;/h3&gt;&lt;h4 id="é»˜è®¤æ„é€ å‡½æ•°-default-constructor"&gt;&lt;strong&gt;é»˜è®¤æ„é€ å‡½æ•° (Default Constructor)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;é»˜è®¤æ„é€ å‡½æ•°æ˜¯åœ¨æ²¡æœ‰æä¾›ä»»ä½•å®å‚çš„æƒ…å†µä¸‹è¢«è°ƒç”¨çš„æ„é€ å‡½æ•°ã€‚å¦‚æœä½ æ²¡æœ‰ä¸ºç±»å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚ä¸€æ—¦ä½ å®šä¹‰äº†å…¶ä»–ç±»å‹çš„æ„é€ å‡½æ•°ï¼ˆå¦‚&lt;strong&gt;æœ‰å‚æ„é€ å‡½æ•°&lt;/strong&gt;ï¼‰ï¼Œç¼–è¯‘å™¨å°±ä¸å†è‡ªåŠ¨æä¾›é»˜è®¤æ„é€ å‡½æ•°ã€‚å¦‚æœæ­¤æ—¶ä»éœ€è¦é»˜è®¤æ„é€ ï¼Œä½ å¿…é¡»è‡ªå·±æ˜¾å¼å®šä¹‰ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h4 id="æœ‰å‚æ„é€ å‡½æ•°-parameterized-constructor"&gt;&lt;strong&gt;æœ‰å‚æ„é€ å‡½æ•° (Parameterized Constructor)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æœ‰å‚æ„é€ å‡½æ•°å…è®¸åœ¨åˆ›å»ºå¯¹è±¡æ—¶é€šè¿‡ä¼ å…¥å‚æ•°æ¥åˆå§‹åŒ–å¯¹è±¡çš„çŠ¶æ€ã€‚å®ƒæ”¯æŒ&lt;strong&gt;é‡è½½&lt;/strong&gt;ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä¸ºåŒä¸€ä¸ªç±»å®šä¹‰å¤šä¸ªå…·æœ‰ä¸åŒå‚æ•°åˆ—è¡¨çš„æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å‚æ„é€ å‡½æ•°çš„åˆå§‹åŒ–æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–åˆ—è¡¨&lt;/strong&gt;ï¼šåœ¨å‚æ•°åˆ—è¡¨åä»¥å†’å·å¼€å¤´è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;strong&gt;æ¨èä½¿ç”¨è¿™ç§æ–¹å¼&lt;/strong&gt;ï¼Œå› ä¸ºæ•°æ®æˆå‘˜çš„åˆå§‹åŒ–åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œå‰å°±å·²å®Œæˆï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Student {
public:
// ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„æœ‰å‚æ„é€ å‡½æ•°
Student(int age, int score) : m_age(age), m_score(score) {}
private:
int m_age;
int m_score;
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°ä½“å†…èµ‹å€¼&lt;/strong&gt;ï¼šåœ¨æ„é€ å‡½æ•°çš„èŠ±æ‹¬å·ä½“å†…è¿›è¡Œèµ‹å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Student {
public:
// åœ¨å‡½æ•°ä½“å†…èµ‹å€¼çš„æœ‰å‚æ„é€ å‡½æ•°
Student(int age, int score) {
m_age = age;
m_score = score;
}
// ...
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ‹·è´æ„é€ å‡½æ•°-copy-constructor"&gt;&lt;strong&gt;æ‹·è´æ„é€ å‡½æ•° (Copy Constructor)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯å¯¹åŒç±»å¯¹è±¡çš„&lt;strong&gt;å¸¸é‡å¼•ç”¨&lt;/strong&gt;ï¼ˆ&lt;code&gt;const ClassName&amp;amp;&lt;/code&gt;ï¼‰ï¼Œç”¨äºæ ¹æ®ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„å…³é”®åœ¨äº&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;å’Œ&lt;strong&gt;æ·±æ‹·è´&lt;/strong&gt;çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ï¼šå¦‚æœç±»ä¸­æœ‰&lt;strong&gt;æŒ‡é’ˆæˆå‘˜&lt;/strong&gt;ï¼Œå¹¶ä¸”æŒ‡å‘äº†åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼ˆä¾‹å¦‚ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;åˆ†é…ï¼‰ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ‹·è´æ„é€ å‡½æ•°åªä¼šè¿›è¡Œæµ…æ‹·è´â€”â€”å³&lt;strong&gt;å¤åˆ¶æŒ‡é’ˆçš„å€¼&lt;/strong&gt;ï¼ˆå†…å­˜åœ°å€ï¼‰ï¼Œå¯¼è‡´ä¸¤ä¸ªå¯¹è±¡çš„æŒ‡é’ˆæˆå‘˜æŒ‡å‘&lt;strong&gt;åŒä¸€å—å†…å­˜&lt;/strong&gt;ã€‚å½“è¿™ä¸¤ä¸ªå¯¹è±¡ææ„æ—¶ï¼Œä¼šå¯¹åŒä¸€å—å†…å­˜é‡Šæ”¾ä¸¤æ¬¡ï¼Œé€ æˆä¸¥é‡é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ·±æ‹·è´&lt;/strong&gt;ï¼šä¸ºäº†è§£å†³æµ…æ‹·è´çš„é—®é¢˜ï¼Œå½“ç±»ç®¡ç†ç€åŠ¨æ€èµ„æºæ—¶ï¼Œ&lt;strong&gt;å¿…é¡»è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°&lt;/strong&gt;ï¼Œè¿›è¡Œæ·±æ‹·è´ã€‚æ·±æ‹·è´ä¼š&lt;strong&gt;é‡æ–°ç”³è¯·ä¸€å—æ–°å†…å­˜&lt;/strong&gt;ï¼Œå¹¶å°†åŸå¯¹è±¡æŒ‡é’ˆæ‰€æŒ‡çš„å†…å®¹å®Œæ•´å¤åˆ¶è¿‡æ¥ï¼Œä½¿ä¸¤ä¸ªå¯¹è±¡çš„æŒ‡é’ˆæˆå‘˜æŒ‡å‘å„è‡ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MyClass {
private:
int* data;
public:
// è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰
MyClass(const MyClass&amp;amp; other) {
data = new int; // ä¸ºæ–°å¯¹è±¡é‡æ–°åˆ†é…å†…å­˜
*data = *(other.data); // å¤åˆ¶å†…å®¹ï¼Œè€Œéåœ°å€
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‹·è´æ„é€ å‡½æ•°åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µä¸‹è¢«è°ƒç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨ä¸€ä¸ªå·²åˆ›å»ºçš„å¯¹è±¡åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡&lt;/strong&gt;ï¼š&lt;code&gt;MyClass obj2 = obj1;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°ä¼ å‚&lt;/strong&gt;ï¼šå‡½æ•°å‚æ•°ä¸ºç±»å¯¹è±¡ï¼ˆéå¼•ç”¨ï¼‰æ—¶ï¼Œå®å‚ä¼ é€’ç»™å½¢å‚ä¼šè°ƒç”¨æ‹·è´æ„é€ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡&lt;/strong&gt;ï¼šå‡½æ•°è¿”å›ä¸€ä¸ªç±»å¯¹è±¡ï¼ˆéå¼•ç”¨ï¼‰æ—¶ï¼Œå¯èƒ½ä¼šè°ƒç”¨æ‹·è´æ„é€ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="ç§»åŠ¨æ„é€ å‡½æ•°-move-constructor-c11"&gt;&lt;strong&gt;ç§»åŠ¨æ„é€ å‡½æ•° (Move Constructor, C++11)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯ C++11 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒé€šè¿‡&lt;strong&gt;å³å€¼å¼•ç”¨&lt;/strong&gt;ï¼ˆ&lt;code&gt;ClassName&amp;amp;&amp;amp;&lt;/code&gt;ï¼‰å‚æ•°ï¼Œå°†ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰çš„èµ„æºâ€œè½¬ç§»â€åˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹&lt;strong&gt;é¿å…äº†å¯¹å¤§å‹æ•°æ®è¿›è¡Œä¸å¿…è¦çš„æ·±æ‹·è´&lt;/strong&gt;ï¼Œä»è€Œæå‡äº†ç¨‹åºæ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨è½¬ç§»äº†èµ„æºï¼ˆå¦‚æŒ‡é’ˆï¼‰çš„æ‰€æœ‰æƒåï¼Œé€šå¸¸ä¼šå°†åŸå¯¹è±¡ä¸­çš„æŒ‡é’ˆç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ï¼Œç¡®ä¿åŸå¯¹è±¡ææ„æ—¶ä¸ä¼šé”™è¯¯åœ°é‡Šæ”¾å·²è½¬ç§»çš„èµ„æºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MyClass {
private:
int* data;
public:
// ç§»åŠ¨æ„é€ å‡½æ•°
MyClass(MyClass&amp;amp;&amp;amp; other) noexcept : data(other.data) { // è½¬ç§»æŒ‡é’ˆ
other.data = nullptr; // å°†åŸå¯¹è±¡çš„æŒ‡é’ˆç½®ç©º
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;std::move()&lt;/code&gt;å‡½æ•°å°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼ï¼Œä»è€Œè§¦å‘ç§»åŠ¨æ„é€ ã€‚&lt;/p&gt;
&lt;h3 id="-ææ„å‡½æ•°-destructor"&gt;ğŸ§¹ ææ„å‡½æ•° (Destructor)
&lt;/h3&gt;&lt;p&gt;ææ„å‡½æ•°åœ¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt;ï¼Œè´Ÿè´£æ¸…ç†å·¥ä½œï¼Œå¦‚é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ã€å…³é—­æ–‡ä»¶ç­‰ã€‚å®ƒçš„åç§°æ˜¯åœ¨ç±»åå‰åŠ ä¸Š &lt;code&gt;~&lt;/code&gt;ï¼Œæ²¡æœ‰è¿”å›å€¼å’Œå‚æ•°ï¼Œå› æ­¤&lt;strong&gt;ä¸èƒ½é‡è½½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id="è°ƒç”¨æ—¶æœº"&gt;&lt;strong&gt;è°ƒç”¨æ—¶æœº&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ææ„å‡½æ•°åœ¨ä»¥ä¸‹æƒ…å†µä¸‹è¢«è‡ªåŠ¨è°ƒç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨å¯¹è±¡&lt;/strong&gt;ï¼šå½“å¯¹è±¡ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶ï¼ˆä¾‹å¦‚å‡½æ•°ä¸­çš„å±€éƒ¨å¯¹è±¡åœ¨å‡½æ•°ç»“æŸæ—¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€å¯¹è±¡&lt;/strong&gt;ï¼šå¯¹é€šè¿‡ &lt;code&gt;new&lt;/code&gt;åˆ›å»ºçš„å¯¹è±¡ä½¿ç”¨ &lt;code&gt;delete&lt;/code&gt;æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€/é™æ€å¯¹è±¡&lt;/strong&gt;ï¼šåœ¨ç¨‹åºç»“æŸæ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è™šææ„å‡½æ•°-virtual-destructor"&gt;&lt;strong&gt;è™šææ„å‡½æ•° (Virtual Destructor)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚å½“ä½ æƒ³&lt;strong&gt;é€šè¿‡åŸºç±»æŒ‡é’ˆæ¥åˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡&lt;/strong&gt;æ—¶ï¼Œå¦‚æœåŸºç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œé‚£ä¹ˆ &lt;code&gt;delete&lt;/code&gt;æ“ä½œå°†&lt;strong&gt;åªè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°&lt;/strong&gt;ï¼Œè€Œä¸ä¼šè°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ï¼Œä»è€Œå¯¼è‡´æ´¾ç”Ÿç±»ç‰¹æœ‰çš„èµ„æºæ— æ³•è¢«æ­£ç¡®é‡Šæ”¾ï¼ˆå³â€œèµ„æºæ³„æ¼â€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³åŠæ³•&lt;/strong&gt;ï¼šå¦‚æœä¸€ä¸ªç±»&lt;strong&gt;å¯èƒ½è¢«ç»§æ‰¿&lt;/strong&gt;ï¼ˆå³ä½œä¸ºå¤šæ€åŸºç±»ï¼‰ï¼Œé‚£ä¹ˆä½ åº”è¯¥å°†å…¶ææ„å‡½æ•°å£°æ˜ä¸º&lt;strong&gt;è™šå‡½æ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Base {
public:
virtual ~Base() { // å£°æ˜ä¸ºè™šææ„å‡½æ•°
// ... åŸºç±»çš„æ¸…ç†å·¥ä½œ
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·ï¼Œé€šè¿‡åŸºç±»æŒ‡é’ˆåˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œä¼šå…ˆè°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ï¼Œå†è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ï¼Œç¡®ä¿èµ„æºè¢«å®Œå…¨é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;h4 id="ææ„å‡½æ•°ä¸‰æ³•åˆ™-rule-of-three"&gt;&lt;strong&gt;ææ„å‡½æ•°ä¸‰æ³•åˆ™ (Rule of Three)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ä¸ªå†å²ç»éªŒæ³•åˆ™æŒ‡å‡ºï¼šå¦‚æœä¸€ä¸ªç±»éœ€è¦&lt;strong&gt;è‡ªå®šä¹‰ææ„å‡½æ•°&lt;/strong&gt;ï¼Œé‚£ä¹ˆå®ƒ&lt;strong&gt;å‡ ä¹è‚¯å®šä¹Ÿéœ€è¦è‡ªå®šä¹‰æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºéœ€è¦è‡ªå®šä¹‰ææ„å‡½æ•°é€šå¸¸æ„å‘³ç€ç±»ç®¡ç†ç€åŠ¨æ€èµ„æºï¼ˆå¦‚å †å†…å­˜ï¼‰ï¼Œæ­¤æ—¶é»˜è®¤çš„æµ…æ‹·è´è¡Œä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œå¿…é¡»é€šè¿‡è‡ªå®šä¹‰æ‹·è´æ§åˆ¶æ¥ç¡®ä¿æ·±æ‹·è´çš„æ­£ç¡®æ€§ã€‚åœ¨ç°ä»£ C++ ä¸­ï¼Œè¿™ä¸ªæ³•åˆ™å·²ç»å‘å±•ä¸ºâ€œ&lt;strong&gt;äº”æ³•åˆ™&lt;/strong&gt;â€ï¼Œå°†ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ä¹Ÿè€ƒè™‘äº†è¿›æ¥ã€‚&lt;/p&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹ä¸æ€»ç»“"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹ä¸æ€»ç»“
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ ä¸ææ„çš„é¡ºåº&lt;/strong&gt;ï¼šåœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ„é€ é¡ºåºæ˜¯&lt;strong&gt;å…ˆåŸºç±»åæ´¾ç”Ÿç±»&lt;/strong&gt;ï¼›ææ„é¡ºåºåˆ™&lt;strong&gt;å®Œå…¨ç›¸å&lt;/strong&gt;ï¼Œæ˜¯&lt;strong&gt;å…ˆæ´¾ç”Ÿç±»ååŸºç±»&lt;/strong&gt;ã€‚å¯¹äºç±»çš„æˆå‘˜å¯¹è±¡ï¼Œæ„é€ é¡ºåºæŒ‰å…¶&lt;strong&gt;å£°æ˜é¡ºåº&lt;/strong&gt;è¿›è¡Œï¼Œææ„é¡ºåºåˆ™ç›¸åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åœ¨ææ„å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸&lt;/strong&gt;ï¼šææ„å‡½æ•°ä¸åº”æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœææ„å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆæˆå‡½æ•°&lt;/strong&gt;ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°ï¼ˆå¦‚é»˜è®¤æ„é€ ã€æ‹·è´æ„é€ ã€ææ„ç­‰ï¼‰ç§°ä¸ºåˆæˆå‡½æ•°ã€‚äº†è§£ç¼–è¯‘å™¨åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”Ÿæˆè¿™äº›é»˜è®¤å‡½æ•°éå¸¸é‡è¦ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è§£å¹¶æ­£ç¡®ä½¿ç”¨å„ç§æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œæ˜¯ç¼–å†™å®‰å…¨ã€é«˜æ•ˆ C++ ç¨‹åºçš„åŸºç¡€ã€‚å®ƒä»¬å…±åŒæ„æˆäº† C++ å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„åŸºçŸ³ï¼Œä¹Ÿæ˜¯å®ç° RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰è¿™ä¸€é‡è¦ç¼–ç¨‹èŒƒå¼çš„æ ¸å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°æŒæ¡ C++ ä¸­çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åˆ—è¡¨åˆå§‹åŒ–"&gt;åˆ—è¡¨åˆå§‹åŒ–
&lt;/h2&gt;&lt;p&gt;C++11 å¼•å…¥çš„&lt;strong&gt;åˆ—è¡¨åˆå§‹åŒ–&lt;/strong&gt;ï¼ˆä¹Ÿç§°ä¸ºç»Ÿä¸€åˆå§‹åŒ–ï¼‰ï¼Œç”¨èŠ±æ‹¬å· &lt;code&gt;{}&lt;/code&gt;æä¾›äº†ä¸€ç§æ›´å®‰å…¨ã€æ›´ç»Ÿä¸€çš„åˆå§‹åŒ–æ–¹å¼ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ä¼ ç»Ÿåˆå§‹åŒ–æ–¹å¼&lt;/th&gt;
&lt;th&gt;åˆ—è¡¨åˆå§‹åŒ– (&lt;code&gt;{}&lt;/code&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ç»Ÿä¸€æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šç§è¯­æ³•å¹¶å­˜ï¼Œä¸ä¸€è‡´&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ç»Ÿä¸€&lt;/strong&gt;ï¼Œé€‚ç”¨äºå‡ ä¹æ‰€æœ‰åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…è®¸éšå¼çš„çª„åŒ–è½¬æ¢&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¦æ­¢çª„åŒ–è½¬æ¢&lt;/strong&gt;ï¼Œç¼–è¯‘æ—¶æŠ¥é”™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ­§ä¹‰é¿å…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜“äº§ç”Ÿâ€œæœ€ä»¤äººçƒ¦æ¼çš„è§£æâ€&lt;/td&gt;
&lt;td&gt;æ˜ç¡®è¡¨ç¤ºåˆå§‹åŒ–ï¼Œé¿å…æ­§ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èšåˆåˆå§‹åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒï¼Œä½†æ–¹å¼ä¸ç»Ÿä¸€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥ã€ç›´è§‚&lt;/strong&gt;åœ°åˆå§‹åŒ–èšåˆç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®¹å™¨åˆå§‹åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¹çï¼Œéœ€é€ä¸ªæ·»åŠ å…ƒç´ &lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥å¡«å……&lt;/strong&gt;å®¹å™¨å…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬æ¦‚å¿µä¸è¯­æ³•"&gt;ğŸ” åŸºæœ¬æ¦‚å¿µä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;åˆ—è¡¨åˆå§‹åŒ–ä½¿ç”¨èŠ±æ‹¬å· &lt;code&gt;{}&lt;/code&gt;æ¥åˆå§‹åŒ–å¯¹è±¡ï¼ŒåŸºæœ¬è¯­æ³•åŒ…æ‹¬ç›´æ¥åˆ—è¡¨åˆå§‹åŒ–å’Œå¤åˆ¶åˆ—è¡¨åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›´æ¥åˆ—è¡¨åˆå§‹åŒ–&lt;/strong&gt;ï¼š&lt;code&gt;T object{arg1, arg2, ...};&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆ¶åˆ—è¡¨åˆå§‹åŒ–&lt;/strong&gt;ï¼š&lt;code&gt;T object = {arg1, arg2, ...};&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸¤ç§å½¢å¼åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ•ˆæœç›¸åŒï¼Œä½†ç›´æ¥åˆ—è¡¨åˆå§‹åŒ–å¯èƒ½æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒå¯ä»¥é¿å…ä¸å¿…è¦çš„æ‹·è´æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// åŸºæœ¬æ•°æ®ç±»å‹
int x{5}; // ç›´æ¥åˆ—è¡¨åˆå§‹åŒ–
int y = {10}; // å¤åˆ¶åˆ—è¡¨åˆå§‹åŒ–
// æ•°ç»„
int arr[]{1, 2, 3};
// ç»“æ„ä½“ï¼ˆèšåˆç±»å‹ï¼‰
struct Point { int x; int y; };
Point p{10, 20}; // ç›´æ¥åˆå§‹åŒ–æ‰€æœ‰æˆå‘˜
// æ ‡å‡†åº“å®¹å™¨
std::vector&amp;lt;int&amp;gt; vec{1, 2, 3, 4, 5};
// åŠ¨æ€åˆ†é…çš„å†…å­˜
int* ptr = new int[3]{1, 2, 3};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ ¸å¿ƒä¼˜åŠ¿è¯¦è§£"&gt;ğŸ›¡ï¸ æ ¸å¿ƒä¼˜åŠ¿è¯¦è§£
&lt;/h3&gt;&lt;p&gt;åˆ—è¡¨åˆå§‹åŒ–ä¹‹æ‰€ä»¥è¢«æ¨èï¼Œæºäºå…¶è®¾è®¡ä¸Šçš„å¤šé‡å®‰å…¨ä¿éšœå’Œç»Ÿä¸€æ€§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜²æ­¢çª„åŒ–è½¬æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ—è¡¨åˆå§‹åŒ–ä¼š&lt;strong&gt;ç¦æ­¢å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±çš„éšå¼ç±»å‹è½¬æ¢&lt;/strong&gt;ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶ç›´æ¥æŠ¥é”™ï¼Œä»è€Œé¿å…æ½œåœ¨çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int a = 3.14; // ä¼ ç»Ÿæ–¹å¼ï¼šå…è®¸ï¼ˆä½†açš„å€¼ä¸º3ï¼Œæ•°æ®ä¸¢å¤±ï¼‰
int b{3.14}; // åˆ—è¡¨åˆå§‹åŒ–ï¼šç¼–è¯‘é”™è¯¯ï¼é˜²æ­¢äº†çª„åŒ–è½¬æ¢
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…â€œæœ€ä»¤äººçƒ¦æ¼çš„è§£æâ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨C++ä¸­ï¼ŒæŸäº›åˆå§‹åŒ–è¯­å¥å¯èƒ½è¢«ç¼–è¯‘å™¨è§£æä¸ºå‡½æ•°å£°æ˜ï¼Œè¿™è¢«ç§°ä¸ºâ€œæœ€ä»¤äººçƒ¦æ¼çš„è§£æâ€ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Timer { /* ... */ };
Timer t(); // è¿™ä¼šè¢«è§£æä¸ºä¸€ä¸ªåä¸ºtã€è¿”å›Timerå¯¹è±¡çš„å‡½æ•°å£°æ˜ï¼
Timer t{}; // ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼šæ˜ç¡®è¡¨ç¤ºåˆå§‹åŒ–ä¸€ä¸ªTimerå¯¹è±¡
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»Ÿä¸€çš„åˆå§‹åŒ–è¯­æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ—è¡¨åˆå§‹åŒ–å‡ ä¹å¯ä»¥ç”¨äºæ‰€æœ‰åœºæ™¯ï¼šåŸºæœ¬ç±»å‹ã€æ•°ç»„ã€ç»“æ„ä½“ã€ç±»å¯¹è±¡ã€æ ‡å‡†åº“å®¹å™¨ç­‰ã€‚è¿™ç§ä¸€è‡´æ€§å¤§å¤§é™ä½äº†è®°å¿†æˆæœ¬ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç‰¹æ®Šè§„åˆ™ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ ç‰¹æ®Šè§„åˆ™ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å°½ç®¡åˆ—è¡¨åˆå§‹åŒ–å¾ˆå¼ºå¤§ï¼Œä½†ä½¿ç”¨æ—¶ä¹Ÿéœ€è¦äº†è§£ä¸€äº›ç‰¹æ®Šè§„åˆ™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;std::initializer_list&lt;/code&gt;çš„ä¼˜å…ˆçº§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªç±»åŒæ—¶å®šä¹‰äº†å‚æ•°åŒ¹é…çš„æ™®é€šæ„é€ å‡½æ•°å’Œæ¥æ”¶ &lt;code&gt;std::initializer_list&lt;/code&gt;çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆ&lt;strong&gt;åˆ—è¡¨åˆå§‹åŒ–ä¼šä¼˜å…ˆè°ƒç”¨ &lt;code&gt;std::initializer_list&lt;/code&gt;ç‰ˆæœ¬çš„æ„é€ å‡½æ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Widget {
public:
Widget(int a, int b) { ... } // æ™®é€šæ„é€ å‡½æ•°
Widget(std::initializer_list&amp;lt;int&amp;gt; list) { ... } // initializer_listæ„é€ å‡½æ•°
};
Widget w1(1, 2); // è°ƒç”¨æ™®é€šæ„é€ å‡½æ•°
Widget w2{1, 2}; // è°ƒç”¨çš„æ˜¯ initializer_list æ„é€ å‡½æ•°ï¼
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸€ç‚¹åœ¨åˆå§‹åŒ–æ ‡å‡†åº“å®¹å™¨æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::vector&amp;lt;int&amp;gt; v1(5, 10); // åˆ›å»ºä¸€ä¸ªåŒ…å«5ä¸ªå…ƒç´ ï¼ˆæ¯ä¸ªéƒ½æ˜¯10ï¼‰çš„å‘é‡
std::vector&amp;lt;int&amp;gt; v2{5, 10}; // åˆ›å»ºä¸€ä¸ªåŒ…å«2ä¸ªå…ƒç´  [5, 10] çš„å‘é‡
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºåˆ—è¡¨çš„æƒ…å†µ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç©ºçš„èŠ±æ‹¬å· &lt;code&gt;{}&lt;/code&gt;ä¼šè°ƒç”¨ç±»çš„&lt;strong&gt;é»˜è®¤æ„é€ å‡½æ•°&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ &lt;code&gt;std::initializer_list&lt;/code&gt;æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Widget w{}; // è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èšåˆåˆå§‹åŒ–ä¸éèšåˆç±»å‹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšåˆç±»å‹&lt;/strong&gt;ï¼ˆå¦‚æ²¡æœ‰ç”¨æˆ·è‡ªå®šä¹‰æ„é€ å‡½æ•°ã€æ²¡æœ‰ç§æœ‰/å—ä¿æŠ¤çš„éé™æ€æˆå‘˜ã€æ²¡æœ‰è™šå‡½æ•°ç­‰çš„ç»“æ„ä½“æˆ–ç±»ï¼‰å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–å…¶æˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;éèšåˆç±»å‹&lt;/strong&gt;ï¼Œåˆ—è¡¨åˆå§‹åŒ–ä¼šå°è¯•è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ã€‚å¦‚æœç±»æ²¡æœ‰åˆé€‚çš„æ„é€ å‡½æ•°ï¼Œåˆ™æ— æ³•ä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®é™…åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;åˆ—è¡¨åˆå§‹åŒ–åœ¨ç°ä»£C++ç¼–ç¨‹ä¸­åº”ç”¨å¹¿æ³›ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¹å™¨åˆå§‹åŒ–&lt;/strong&gt;ï¼šè¿™æ˜¯åˆ—è¡¨åˆå§‹åŒ–æœ€å¸¸ç”¨çš„åœºæ™¯ä¹‹ä¸€ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç›´æ¥å¡«å……å®¹å™¨å…ƒç´ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::vector&amp;lt;int&amp;gt; grades{85, 90, 78, 92};
std::map&amp;lt;std::string, int&amp;gt; ageMap{{&amp;#34;Alice&amp;#34;, 25}, {&amp;#34;Bob&amp;#34;, 30}};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°è¿”å›å€¼&lt;/strong&gt;ï¼šå‡½æ•°å¯ä»¥ç›´æ¥è¿”å›åˆå§‹åŒ–åˆ—è¡¨ï¼Œä»£ç æ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::vector&amp;lt;int&amp;gt; getNumbers() {
return {1, 2, 3, 4, 5}; // ç›´æ¥è¿”å›åˆå§‹åŒ–åˆ—è¡¨
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°å‚æ•°&lt;/strong&gt;ï¼šå‡½æ•°å¯ä»¥æ¥å— &lt;code&gt;std::initializer_list&lt;/code&gt;å‚æ•°ï¼Œæ–¹ä¾¿ä¼ é€’ä¸€ç»„å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void printValues(std::initializer_list&amp;lt;int&amp;gt; values) {
for (int value : values) {
std::cout &amp;lt;&amp;lt; value &amp;lt;&amp;lt; &amp;#34; &amp;#34;;
}
}
printValues({10, 20, 30}); // è°ƒç”¨æ—¶ç›´æ¥ä¼ å…¥åˆ—è¡¨
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœ€ä½³å®è·µä¸æ€»ç»“"&gt;ğŸ“ æœ€ä½³å®è·µä¸æ€»ç»“
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–&lt;/strong&gt;ï¼šåœ¨ç°ä»£C++ä¸­ï¼Œå¯¹äºæ–°ä»£ç ï¼Œ&lt;strong&gt;æ¨èä¼˜å…ˆä½¿ç”¨åˆ—è¡¨åˆå§‹åŒ–&lt;/strong&gt;ã€‚å› ä¸ºå®ƒæ›´å®‰å…¨ï¼ˆé˜²æ­¢çª„åŒ–è½¬æ¢ï¼‰ã€æ›´ç»Ÿä¸€ï¼ˆè¯­æ³•ä¸€è‡´ï¼‰ã€æ›´æ¸…æ™°ï¼ˆé¿å…æ­§ä¹‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æ„é€ å‡½æ•°é‡è½½&lt;/strong&gt;ï¼šåœ¨åˆå§‹åŒ–ç±»å¯¹è±¡æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ &lt;code&gt;std::initializer_list&lt;/code&gt;æ„é€ å‡½æ•°çš„ä¼˜å…ˆçº§å¯èƒ½å¸¦æ¥çš„æ„å¤–è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºè‡ªå®šä¹‰ç±»å®ç° &lt;code&gt;std::initializer_list&lt;/code&gt;æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå¦‚æœä½ çš„ç±»æ”¯æŒç”¨ä¸€ç»„å€¼æ¥åˆå§‹åŒ–ï¼ˆä¾‹å¦‚è‡ªå®šä¹‰çš„å®¹å™¨ç±»ï¼‰ï¼Œå®ç°ä¸€ä¸ª &lt;code&gt;std::initializer_list&lt;/code&gt;æ„é€ å‡½æ•°ä¼šå¤§å¤§æå‡æ˜“ç”¨æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒC++11çš„åˆ—è¡¨åˆå§‹åŒ–æ˜¯ä¸€é¡¹é‡è¦çš„ç°ä»£åŒ–ç‰¹æ€§ï¼Œå®ƒé€šè¿‡ç»Ÿä¸€çš„ &lt;code&gt;{}&lt;/code&gt;è¯­æ³•ï¼Œæ˜¾è‘—æå‡äº†ä»£ç çš„å®‰å…¨æ€§ã€ä¸€è‡´æ€§å’Œå¯è¯»æ€§ã€‚æŒæ¡å¹¶å–„ç”¨åˆ—è¡¨åˆå§‹åŒ–ï¼Œæ˜¯ç¼–å†™ç°ä»£ã€å¥å£®C++ä»£ç çš„é‡è¦ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£C++åˆ—è¡¨åˆå§‹åŒ–ï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç§»åŠ¨æ„é€ "&gt;ç§»åŠ¨æ„é€ 
&lt;/h2&gt;&lt;p&gt;åœ¨ C++11 ä¸­å¼•å…¥çš„&lt;strong&gt;ç§»åŠ¨æ„é€ å‡½æ•°&lt;/strong&gt;æ˜¯ä¸€é¡¹å…³é”®çš„ç°ä»£åŒ–ç‰¹æ€§ï¼Œå®ƒé€šè¿‡è½¬ç§»è€Œéå¤åˆ¶èµ„æºï¼Œæ˜¾è‘—æå‡äº†ç¨‹åºçš„æ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰èµ„æºæ—¶ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°æ¦‚æ‹¬äº†å…¶æ ¸å¿ƒç‰¹ç‚¹ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ç§»åŠ¨æ„é€ å‡½æ•° (Move Constructor)&lt;/th&gt;
&lt;th&gt;æ‹·è´æ„é€ å‡½æ•° (Copy Constructor)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è½¬ç§»èµ„æºæ‰€æœ‰æƒ&lt;/strong&gt;ï¼Œæºå¯¹è±¡å°†è¿›å…¥æœ‰æ•ˆä½†æœªå®šä¹‰çš„çŠ¶æ€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ›å»ºå¯¹è±¡çš„ç‹¬ç«‹å‰¯æœ¬&lt;/strong&gt;ï¼Œæºå¯¹è±¡ä¿æŒä¸å˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å³å€¼å¼•ç”¨&lt;/strong&gt; (&lt;code&gt;ClassName&amp;amp;&amp;amp;&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¸¸é‡å·¦å€¼å¼•ç”¨&lt;/strong&gt; (&lt;code&gt;const ClassName&amp;amp;&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼‚å¸¸å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸å£°æ˜ä¸º &lt;strong&gt;&lt;code&gt;noexcept&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä¸å£°æ˜ä¸º &lt;code&gt;noexcept&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;ï¼Œåªè½¬ç§»æŒ‡é’ˆç­‰èµ„æºå¥æŸ„ï¼Œæ— æ•°æ®å¤åˆ¶&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹è¾ƒä½&lt;/strong&gt;ï¼Œå°¤å…¶å¯¹äºå¤§å‹èµ„æºéœ€è¦è¿›è¡Œæ·±æ‹·è´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰æˆ–æ˜¾å¼è½¬æ¢ä¸ºå³å€¼çš„å¯¹è±¡&lt;/td&gt;
&lt;td&gt;éœ€è¦ç‹¬ç«‹å‰¯æœ¬çš„æŒä¹…å¯¹è±¡ï¼ˆå·¦å€¼ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç§»åŠ¨æ„é€ å‡½æ•°çš„å·¥ä½œåŸç†"&gt;ğŸ§  ç§»åŠ¨æ„é€ å‡½æ•°çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;ç§»åŠ¨æ„é€ å‡½æ•°çš„æœ¬è´¨æ˜¯ &lt;strong&gt;â€œèµ„æºæ‰€æœ‰æƒçš„è½¬ç§»â€&lt;/strong&gt;ã€‚å®ƒæ¥å—ä¸€ä¸ªå³å€¼å¼•ç”¨å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°é€šå¸¸æŒ‡å‘ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼ˆä¹Ÿç§°ä¸ºâ€œå°†äº¡å€¼â€ï¼‰ï¼Œæˆ–è€…é€šè¿‡ &lt;code&gt;std::move&lt;/code&gt;è¢«æ˜¾å¼æ ‡è®°ä¸ºå¯ç§»åŠ¨çš„å·¦å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ç°é€šå¸¸åŒ…å«ä¸¤ä¸ªå…³é”®æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¥ç®¡èµ„æº&lt;/strong&gt;ï¼šå°†æºå¯¹è±¡ï¼ˆå³å€¼å¼•ç”¨å‚æ•°ï¼‰å†…éƒ¨çš„èµ„æºæŒ‡é’ˆæˆ–å¥æŸ„ï¼Œç›´æ¥èµ‹å€¼ç»™æ–°å¯¹è±¡çš„å¯¹åº”æˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½®ç©ºæºå¯¹è±¡&lt;/strong&gt;ï¼šå°†æºå¯¹è±¡å†…éƒ¨çš„èµ„æºæŒ‡é’ˆè®¾ç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ï¼ˆæˆ–ç­‰æ•ˆæ“ä½œï¼‰ï¼Œä½¿å…¶ä¸å†æ‹¥æœ‰è¯¥èµ„æºã€‚è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼Œç¡®ä¿äº†æºå¯¹è±¡çš„ææ„å‡½æ•°ä¸ä¼šé”™è¯¯åœ°é‡Šæ”¾å·²ç»è½¬ç§»èµ°çš„èµ„æºï¼Œä»è€Œé¿å…äº†é‡å¤é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ç®¡ç†åŠ¨æ€æ•°ç»„çš„ç§»åŠ¨æ„é€ å‡½æ•°å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MyArray {
private:
int* data;
size_t size;
public:
// ç§»åŠ¨æ„é€ å‡½æ•°
MyArray(MyArray&amp;amp;&amp;amp; other) noexcept // 1. å‚æ•°ä¸ºå³å€¼å¼•ç”¨ï¼Œå¹¶æ ‡è®°ä¸ºnoexcept
: data(other.data) // 2. æ¥ç®¡èµ„æºï¼šç›´æ¥å¤åˆ¶æŒ‡é’ˆ
, size(other.size) {
// 3. ç½®ç©ºæºå¯¹è±¡
other.data = nullptr;
other.size = 0;
std::cout &amp;lt;&amp;lt; &amp;#34;Move constructor called.\n&amp;#34;;
}
// ... å…¶ä»–æˆå‘˜å‡½æ•°ï¼Œå¦‚ææ„å‡½æ•°éœ€è¦è´Ÿè´£é‡Šæ”¾ data ...
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;MyArray createHugeArray(); // å‡½æ•°è¿”å›ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰
MyArray arr1 = createHugeArray(); // åœºæ™¯1ï¼šè‡ªåŠ¨è§¦å‘ç§»åŠ¨æ„é€ ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
MyArray arr2(100);
MyArray arr3 = std::move(arr2); // åœºæ™¯2ï¼šä½¿ç”¨ std::move æ˜¾å¼è§¦å‘ç§»åŠ¨æ„é€ 
// æ³¨æ„ï¼šæ­¤å arr2 ä¸åº”å†è¢«ä½¿ç”¨ï¼Œé™¤éè¢«é‡æ–°èµ‹å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-è§¦å‘ç§»åŠ¨æ„é€ çš„å…¸å‹åœºæ™¯"&gt;âš™ï¸ è§¦å‘ç§»åŠ¨æ„é€ çš„å…¸å‹åœºæ™¯
&lt;/h3&gt;&lt;p&gt;äº†è§£ç§»åŠ¨æ„é€ å‡½æ•°åœ¨ä½•æ—¶è¢«è°ƒç”¨ï¼Œå¯¹äºå†™å‡ºé«˜æ•ˆçš„ç°ä»£C++ä»£ç è‡³å…³é‡è¦ã€‚ä¸»è¦è§¦å‘åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°è¿”å›å±€éƒ¨å¯¹è±¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“å‡½æ•°è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨è¿”å›è¯­å¥å¤„æ˜¯ä¸€ä¸ªâ€œå°†äº¡å€¼â€ã€‚ç¼–è¯‘å™¨ä¼šä¼˜å…ˆå°è¯•ä½¿ç”¨ç§»åŠ¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æ¥æ”¶è¿”å›å€¼çš„å¯¹è±¡ï¼Œä»è€Œé¿å…æ·±æ‹·è´ã€‚å¦‚æœç±»å®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè¿™ä¸€æ“ä½œä¼šéå¸¸é«˜æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ‡å‡†åº“å®¹å™¨æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;std::vector::push_back&lt;/code&gt;ã€&lt;code&gt;std::vector::emplace_back&lt;/code&gt;ç­‰æ“ä½œæ—¶ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ä¸´æ—¶å¯¹è±¡æˆ–ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;è½¬æ¢åçš„å¯¹è±¡ï¼Œå®¹å™¨å†…éƒ¨ä¼šä½¿ç”¨ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ”¾ç½®å…ƒç´ ï¼Œè¿™å¯¹äºæå‡å®¹å™¨æ€§èƒ½éå¸¸å…³é”®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ ç¡®å®šä¸€ä¸ªå·¦å€¼å¯¹è±¡åœ¨åç»­ä¸å†éœ€è¦å…¶å½“å‰çŠ¶æ€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼ï¼Œä»è€Œè§¦å‘ç§»åŠ¨è¯­ä¹‰ã€‚&lt;strong&gt;éœ€è¦ç‰¹åˆ«æ³¨æ„&lt;/strong&gt;ï¼š&lt;code&gt;std::move&lt;/code&gt;æœ¬èº«å¹¶ä¸è¿›è¡Œä»»ä½•ç§»åŠ¨æ“ä½œï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢å·¥å…·ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨â€œè¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«ç§»åŠ¨â€ã€‚ç§»åŠ¨çš„å®é™…å·¥ä½œæ˜¯ç”±ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦å®Œæˆçš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®ç°æ³¨æ„äº‹é¡¹ä¸é™·é˜±è§„é¿"&gt;âš ï¸ å®ç°æ³¨æ„äº‹é¡¹ä¸é™·é˜±è§„é¿
&lt;/h3&gt;&lt;p&gt;å®ç°ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«ç•™æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ‡è®°ä¸º &lt;code&gt;noexcept&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™éå¸¸é‡è¦ã€‚æ ‡å‡†åº“ä¸­çš„è®¸å¤šæ“ä½œï¼ˆä¾‹å¦‚ &lt;code&gt;std::vector&lt;/code&gt;çš„é‡æ–°åˆ†é…ï¼‰åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ä¼šä½¿ç”¨ç§»åŠ¨æ„é€ ï¼Œä½†å¦‚æœç§»åŠ¨æ„é€ å‡½æ•°å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œå‡ºäºå¼ºå¼‚å¸¸å®‰å…¨ä¿è¯ï¼Œå®¹å™¨å¯èƒ½ä¼šå›é€€åˆ°ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œä»è€Œå¤±å»æ€§èƒ½ä¼˜åŠ¿ã€‚å› æ­¤ï¼Œåº”ç¡®ä¿ç§»åŠ¨æ„é€ å‡½æ•°ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶æ ‡è®°ä¸º &lt;code&gt;noexcept&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­£ç¡®ç½®ç©ºæºå¯¹è±¡&lt;/strong&gt;ï¼šåŠ¡å¿…è®°å¾—åœ¨ç§»åŠ¨åå°†æºå¯¹è±¡çš„èµ„æºå¥æŸ„ç½®ç©ºï¼Œç¡®ä¿å…¶å¤„äºå¯å®‰å…¨ææ„çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†è‡ªèµ‹å€¼æ£€æŸ¥&lt;/strong&gt;ï¼šè™½ç„¶åœ¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸­è‡ªèµ‹å€¼ï¼ˆç”¨è‡ªå·±åˆå§‹åŒ–è‡ªå·±ï¼‰çš„æƒ…å†µæä¸ºç½•è§ï¼Œä½†åœ¨&lt;strong&gt;ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦&lt;/strong&gt;ä¸­å¿…é¡»è¿›è¡Œæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼šå¦‚æœä½ æ²¡æœ‰ä¸ºç±»æ˜¾å¼å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ã€æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€ç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦å’Œææ„å‡½æ•°ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šä¸ºä½ ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªé»˜è®¤å®ç°ä¼šå¯¹æ¯ä¸ªæˆå‘˜ä¾æ¬¡è¿›è¡Œç§»åŠ¨æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯ç°ä»£C++ä¸­å®ç°é«˜æ•ˆèµ„æºç®¡ç†çš„å…³é”®å·¥å…·ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯&lt;strong&gt;è½¬ç§»èµ„æºæ‰€æœ‰æƒ&lt;/strong&gt;ï¼Œè€Œéå¤åˆ¶èµ„æºå†…å®¹ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„å¼€é”€ã€‚é€šè¿‡ç†è§£å…¶å·¥ä½œåŸç†ã€è§¦å‘åœºæ™¯å’Œå®ç°è¦ç‚¹ï¼Œä½ å¯ä»¥ç¼–å†™å‡ºæ›´é«˜æ•ˆã€æ›´ç°ä»£çš„C++ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå½“ä½ éœ€è¦ç®¡ç†åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰â€œé‡é‡çº§â€èµ„æºæ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘å®ç°ç§»åŠ¨æ„é€ å‡½æ•°ã€‚è€Œå¯¹äºåªåŒ…å«åŸºæœ¬æ•°æ®ç±»å‹æˆ–æ ‡å‡†åº“å®¹å™¨ï¼ˆå®ƒä»¬è‡ªèº«å·²å®ç°ç§»åŠ¨è¯­ä¹‰ï¼‰çš„ç®€å•ç±»ï¼Œç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤ç§»åŠ¨æ„é€ å‡½æ•°é€šå¸¸å·²ç»è¶³å¤Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°æŒæ¡C++ä¸­çš„ç§»åŠ¨æ„é€ å‡½æ•°ã€‚å¦‚æœä½ å¯¹ç›¸å…³çš„ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æˆ–&lt;code&gt;std::move&lt;/code&gt;çš„æ›´æ·±å±‚ç»†èŠ‚æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å®ä¾‹"&gt;å®ä¾‹
&lt;/h2&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå±•ç¤ºC++ç§»åŠ¨æ„é€ å‡½æ•°çš„ç®€å•å®ä¾‹ï¼Œå®ƒæ¸…æ™°åœ°å¯¹æ¯”äº†ç§»åŠ¨æ„é€ å’Œæ‹·è´æ„é€ çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h3 id="ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ç±»"&gt;ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ç±»
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬ä»¥ä¸€ä¸ªç®¡ç†åŠ¨æ€å­—ç¬¦æ•°ç»„çš„ç®€å•å­—ç¬¦ä¸²ç±» &lt;code&gt;MyString&lt;/code&gt;ä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;cstring&amp;gt;
class MyString {
private:
char* m_data; // æŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘åŠ¨æ€åˆ†é…çš„å­—ç¬¦æ•°ç»„
size_t m_length; // è®°å½•å­—ç¬¦ä¸²é•¿åº¦
public:
// 1. æ™®é€šæ„é€ å‡½æ•°
MyString(const char* str = &amp;#34;&amp;#34;) {
std::cout &amp;lt;&amp;lt; &amp;#34;æ™®é€šæ„é€ å‡½æ•°è¢«è°ƒç”¨: &amp;#34; &amp;lt;&amp;lt; str &amp;lt;&amp;lt; std::endl;
m_length = strlen(str);
m_data = new char[m_length + 1]; // åˆ†é…å †å†…å­˜
strcpy(m_data, str);
}
// 2. æ‹·è´æ„é€ å‡½æ•° (æ·±æ‹·è´)
MyString(const MyString&amp;amp; other) {
std::cout &amp;lt;&amp;lt; &amp;#34;æ‹·è´æ„é€ å‡½æ•°è¢«è°ƒç”¨ (æ·±æ‹·è´): &amp;#34; &amp;lt;&amp;lt; other.m_data &amp;lt;&amp;lt; std::endl;
m_length = other.m_length;
m_data = new char[m_length + 1]; // ä¸ºæ–°å¯¹è±¡é‡æ–°åˆ†é…å†…å­˜
strcpy(m_data, other.m_data); // å¤åˆ¶å†…å®¹
}
// 3. ç§»åŠ¨æ„é€ å‡½æ•° (èµ„æºè½¬ç§»)
MyString(MyString&amp;amp;&amp;amp; other) noexcept // å‚æ•°æ˜¯å³å€¼å¼•ç”¨ï¼Œæ ‡è®°ä¸ºnoexcept
: m_data(other.m_data) // ç›´æ¥â€œçªƒå–â€æºå¯¹è±¡çš„èµ„æº
, m_length(other.m_length) {
std::cout &amp;lt;&amp;lt; &amp;#34;ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨ (èµ„æºè½¬ç§»): &amp;#34; &amp;lt;&amp;lt; other.m_data &amp;lt;&amp;lt; std::endl;
// å…³é”®æ­¥éª¤ï¼šå°†æºå¯¹è±¡ç½®äºæœ‰æ•ˆä½†ç©ºçš„çŠ¶æ€ï¼Œé˜²æ­¢å…¶ææ„æ—¶é‡Šæ”¾æˆ‘ä»¬åˆšå·æ¥çš„èµ„æº
other.m_data = nullptr;
other.m_length = 0;
}
// ææ„å‡½æ•°
~MyString() {
if (m_data != nullptr) {
std::cout &amp;lt;&amp;lt; &amp;#34;ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾å†…å­˜: &amp;#34;;
if (m_data) std::cout &amp;lt;&amp;lt; m_data; // å®‰å…¨èµ·è§ï¼Œæ£€æŸ¥æ˜¯å¦ä¸ºç©º
std::cout &amp;lt;&amp;lt; std::endl;
delete[] m_data;
}
}
// è¾…åŠ©å‡½æ•°ï¼Œæ‰“å°å­—ç¬¦ä¸²
void print() const {
if (m_data) {
std::cout &amp;lt;&amp;lt; &amp;#34;String: &amp;#34; &amp;lt;&amp;lt; m_data &amp;lt;&amp;lt; &amp;#34; (åœ°å€: &amp;#34; &amp;lt;&amp;lt; (void*)m_data &amp;lt;&amp;lt; &amp;#34;)&amp;#34; &amp;lt;&amp;lt; std::endl;
} else {
std::cout &amp;lt;&amp;lt; &amp;#34;String: (null)&amp;#34; &amp;lt;&amp;lt; std::endl;
}
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="æ¼”ç¤ºç§»åŠ¨æ„é€ å‡½æ•°çš„ä½¿ç”¨"&gt;æ¼”ç¤ºç§»åŠ¨æ„é€ å‡½æ•°çš„ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ &lt;code&gt;main&lt;/code&gt;å‡½æ•°ä¸­è§‚å¯Ÿä¸åŒæ„é€ æ–¹å¼çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int main() {
std::cout &amp;lt;&amp;lt; &amp;#34;=== åœºæ™¯1ï¼šåˆ›å»ºå¯¹è±¡ str1 ===&amp;#34; &amp;lt;&amp;lt; std::endl;
MyString str1(&amp;#34;Hello, Move!&amp;#34;);
std::cout &amp;lt;&amp;lt; &amp;#34;\n=== åœºæ™¯2ï¼šæ‹·è´æ„é€  str2 (æ¥è‡ªstr1) ===&amp;#34; &amp;lt;&amp;lt; std::endl;
MyString str2(str1); // è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œè¿›è¡Œæ·±æ‹·è´
std::cout &amp;lt;&amp;lt; &amp;#34;æ‹·è´åï¼š&amp;#34; &amp;lt;&amp;lt; std::endl;
str1.print();
str2.print(); // æ­¤æ—¶ str1 å’Œ str2 æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å‰¯æœ¬
std::cout &amp;lt;&amp;lt; &amp;#34;\n=== åœºæ™¯3ï¼šç§»åŠ¨æ„é€  str3 (æ¥è‡ªstr1) ===&amp;#34; &amp;lt;&amp;lt; std::endl;
// ä½¿ç”¨ std::move å°†å·¦å€¼ str1 è½¬æ¢ä¸ºå³å€¼ï¼Œä»è€Œè§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°
MyString str3(std::move(str1));
std::cout &amp;lt;&amp;lt; &amp;#34;ç§»åŠ¨åï¼š&amp;#34; &amp;lt;&amp;lt; std::endl;
str1.print(); // str1 çš„èµ„æºå·²è¢«è½¬ç§»ï¼Œå…¶ m_data ä¸º nullptr
str3.print(); // str3 æ‹¥æœ‰äº†åŸå±äº str1 çš„èµ„æº
std::cout &amp;lt;&amp;lt; &amp;#34;\n=== åœºæ™¯4ï¼šå‡½æ•°è¿”å›ä¸´æ—¶å¯¹è±¡ ===&amp;#34; &amp;lt;&amp;lt; std::endl;
// å‡½æ•°è¿”å›çš„ä¸´æ—¶å¯¹è±¡æ˜¯å³å€¼ï¼Œä¹Ÿä¼šä¼˜å…ˆè°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
MyString str4(MyString(&amp;#34;Temporary String&amp;#34;));
std::cout &amp;lt;&amp;lt; &amp;#34;\n=== main å‡½æ•°ç»“æŸï¼Œå¼€å§‹ææ„ ===&amp;#34; &amp;lt;&amp;lt; std::endl;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="é¢„æœŸè¾“å‡ºä¸å…³é”®ç‚¹åˆ†æ"&gt;é¢„æœŸè¾“å‡ºä¸å…³é”®ç‚¹åˆ†æ
&lt;/h3&gt;&lt;p&gt;è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼ˆå†…å­˜åœ°å€ä¼šä¸åŒï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=== åœºæ™¯1ï¼šåˆ›å»ºå¯¹è±¡ str1 ===
æ™®é€šæ„é€ å‡½æ•°è¢«è°ƒç”¨: Hello, Move!
=== åœºæ™¯2ï¼šæ‹·è´æ„é€  str2 (æ¥è‡ªstr1) ===
æ‹·è´æ„é€ å‡½æ•°è¢«è°ƒç”¨ (æ·±æ‹·è´): Hello, Move!
æ‹·è´åï¼š
String: Hello, Move! (åœ°å€: 0x55a1a5d5aeb0)
String: Hello, Move! (åœ°å€: 0x55a1a5d5aed0) # æ³¨æ„ï¼šä¸¤ä¸ªå¯¹è±¡çš„åœ°å€ä¸åŒ
=== åœºæ™¯3ï¼šç§»åŠ¨æ„é€  str3 (æ¥è‡ªstr1) ===
ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨ (èµ„æºè½¬ç§»): Hello, Move!
ç§»åŠ¨åï¼š
String: (null) # str1 å˜ä¸ºç©º
String: Hello, Move! (åœ°å€: 0x55a1a5d5aeb0) # str3 æ‹¥æœ‰çš„æ˜¯ str1 åŸæ¥çš„åœ°å€
=== åœºæ™¯4ï¼šå‡½æ•°è¿”å›ä¸´æ—¶å¯¹è±¡ ===
æ™®é€šæ„é€ å‡½æ•°è¢«è°ƒç”¨: Temporary String
ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨ (èµ„æºè½¬ç§»): Temporary String # ä¸´æ—¶å¯¹è±¡çš„èµ„æºè½¬ç§»ç»™äº† str4
ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾å†…å­˜: # ä¸´æ—¶å¯¹è±¡è¢«ææ„ï¼Œä½†èµ„æºå·²è½¬ç§»ï¼Œæ‰€ä»¥æ— äº‹å‘ç”Ÿ
=== main å‡½æ•°ç»“æŸï¼Œå¼€å§‹ææ„ ===
ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾å†…å­˜: Temporary String # str4 è¢«ææ„
ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾å†…å­˜: Hello, Move! # str3 è¢«ææ„
ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾å†…å­˜: Hello, Move! # str2 è¢«ææ„
ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾å†…å­˜: # str1 è¢«ææ„ï¼Œä½†å·²æ˜¯ç©ºæŒ‡é’ˆï¼Œå®‰å…¨
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€šè¿‡è¿™ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºç§»åŠ¨æ„é€ å‡½æ•°çš„å‡ ä¸ªæ ¸å¿ƒè¦ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆæ€§&lt;/strong&gt;ï¼šç§»åŠ¨æ„é€ å‡½æ•°é€šè¿‡ç›´æ¥â€œçªƒå–â€æºå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ä¸´æ—¶å¯¹è±¡æˆ–ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;æ˜¾å¼æ ‡è®°çš„å¯¹è±¡ï¼‰çš„èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰æ¥æ„é€ æ–°å¯¹è±¡ï¼Œé¿å…äº†æ·±æ‹·è´å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;noexcept&lt;/code&gt;å…³é”®å­—&lt;/strong&gt;ï¼šç§»åŠ¨æ„é€ å‡½æ•°åº”æ ‡è®°ä¸º &lt;code&gt;noexcept&lt;/code&gt;ï¼Œè¿™å‘æ ‡å‡†åº“è¡¨æ˜è¯¥æ“ä½œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºåƒ &lt;code&gt;std::vector&lt;/code&gt;åœ¨é‡æ–°åˆ†é…å†…å­˜æ—¶ï¼Œå¦‚æœå…ƒç´ çš„ç§»åŠ¨æ„é€ å‡½æ•°æ˜¯ &lt;code&gt;noexcept&lt;/code&gt;ï¼Œå®ƒä¼šä½¿ç”¨ç§»åŠ¨è€Œéæ‹·è´æ¥ä¿è¯æ•ˆç‡å’Œé«˜å¼‚å¸¸å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æºå¯¹è±¡çŠ¶æ€&lt;/strong&gt;ï¼šç§»åŠ¨æ“ä½œåï¼Œæºå¯¹è±¡ä¸å†æ‹¥æœ‰è¢«è½¬ç§»çš„èµ„æºï¼Œå…¶å†…éƒ¨æŒ‡é’ˆåº”è¢«ç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ï¼ˆæˆ–å…¶ä»–è¡¨ç¤ºâ€œç©ºâ€çš„çŠ¶æ€ï¼‰ã€‚è¿™ä½¿å¾—æºå¯¹è±¡å¤„äºä¸€ä¸ª&lt;strong&gt;æœ‰æ•ˆä½†æœªå®šä¹‰&lt;/strong&gt;çš„çŠ¶æ€ï¼Œå¯ä»¥å®‰å…¨åœ°ææ„æˆ–é‡æ–°èµ‹å€¼ï¼Œä½†ä½ ä¸åº”å†ä¾èµ–å…¶å…·ä½“å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;std::move&lt;/code&gt;çš„å…³ç³»&lt;/strong&gt;ï¼š&lt;code&gt;std::move&lt;/code&gt;æœ¬èº«å¹¶ä¸è¿›è¡Œä»»ä½•ç§»åŠ¨æ“ä½œï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢å·¥å…·ï¼Œå…¶ä½œç”¨æ˜¯å°†ä¸€ä¸ªå·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œä»è€Œå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«ç§»åŠ¨â€ã€‚å®é™…çš„ç§»åŠ¨æ“ä½œæ˜¯ç”±ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦æ¥å®Œæˆçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„å®ä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ç§»åŠ¨æ„é€ å‡½æ•°çš„å·¥ä½œåŸç†å’Œä¼˜åŠ¿ï¼&lt;/p&gt;
&lt;h2 id="å·¦å€¼--å³å€¼"&gt;å·¦å€¼ &amp;amp; å³å€¼
&lt;/h2&gt;&lt;p&gt;å·¦å€¼å’Œå³å€¼æ˜¯ C++ ä¸­è¡¨è¾¾å¼çš„åŸºæœ¬åˆ†ç±»ï¼Œç†è§£å®ƒä»¬çš„åŒºåˆ«å¯¹äºæŒæ¡ç§»åŠ¨è¯­ä¹‰ã€èµ„æºç®¡ç†ç­‰ç°ä»£ C++ æ ¸å¿ƒç‰¹æ€§è‡³å…³é‡è¦ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œå¯ä»¥å¸®ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;å·¦å€¼ (Lvalue)&lt;/th&gt;
&lt;th&gt;å³å€¼ (Rvalue)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰æ ‡è¯†ç¬¦ã€æœ‰æŒä¹…å†…å­˜åœ°å€çš„è¡¨è¾¾å¼&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶ã€çŸ­æš‚ã€æ— æŒä¹…å†…å­˜åœ°å€çš„è¡¨è¾¾å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ‰æ˜ç¡®åœ°å€&lt;/strong&gt;ï¼Œå¯ä½¿ç”¨ &lt;code&gt;&amp;amp;&lt;/code&gt;å–å€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— æŒä¹…åœ°å€&lt;/strong&gt;ï¼Œæ— æ³•ä½¿ç”¨ &lt;code&gt;&amp;amp;&lt;/code&gt;å–å€ï¼ˆå¦‚ &lt;code&gt;&amp;amp;(a+5)&lt;/code&gt;éæ³•ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒä¹…ï¼Œç”±å…¶ä½œç”¨åŸŸæˆ–åŠ¨æ€åˆ†é…å†³å®š&lt;/td&gt;
&lt;td&gt;çŸ­æš‚ï¼Œé€šå¸¸ä»…åœ¨å½“å‰è¡¨è¾¾å¼å†…æœ‰æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ä¿®æ”¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä¿®æ”¹ï¼ˆé™¤éè¢« &lt;code&gt;const&lt;/code&gt;é™å®šï¼‰&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ˜¯åªè¯»çš„ä¸´æ—¶å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ‹å€¼è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯å‡ºç°åœ¨å·¦ä¾§ï¼ˆä½œä¸ºè¢«èµ‹å€¼å¯¹è±¡ï¼‰&lt;/td&gt;
&lt;td&gt;åªèƒ½å‡ºç°åœ¨å³ä¾§ï¼ˆä½œä¸ºå€¼çš„æ¥æºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ç¤ºä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å˜é‡åã€å‡½æ•°è¿”å›çš„å¼•ç”¨ã€è§£å¼•ç”¨æŒ‡é’ˆ&lt;/td&gt;
&lt;td&gt;å­—é¢é‡ï¼ˆå¦‚ &lt;code&gt;42&lt;/code&gt;ï¼‰ã€è¡¨è¾¾å¼ç»“æœï¼ˆå¦‚ &lt;code&gt;a+b&lt;/code&gt;ï¼‰ã€ä¸´æ—¶å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£-stdmoveçš„è½¬æ¢é­”æ³•"&gt;ğŸ”§ ç†è§£ &lt;code&gt;std::move&lt;/code&gt;çš„è½¬æ¢é­”æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;std::move&lt;/code&gt;çš„æ ¸å¿ƒåŠŸèƒ½éå¸¸å•ä¸€å’Œæ˜ç¡®ï¼š&lt;strong&gt;å®ƒæ‰§è¡Œä¸€ä¸ªæ— æ¡ä»¶ç±»å‹è½¬æ¢ï¼Œå°†ä¼ å…¥çš„è¡¨è¾¾å¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ç±»å‹&lt;/strong&gt;ã€‚å®ƒæœ¬èº«å¹¶ä¸è¿›è¡Œä»»ä½•æ•°æ®çš„ç§»åŠ¨æ“ä½œ ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŸºæœ¬å®ç°åŸç†å¯ä»¥ç®€åŒ–ä¸ºä»¥ä¸‹å½¢å¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;template &amp;lt;typename T&amp;gt;
typename std::remove_reference&amp;lt;T&amp;gt;::type&amp;amp;&amp;amp; move(T&amp;amp;&amp;amp; arg) noexcept {
return static_cast&amp;lt;typename std::remove_reference&amp;lt;T&amp;gt;::type&amp;amp;&amp;amp;&amp;gt;(arg);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒåœ¨äº &lt;strong&gt;&lt;code&gt;static_cast&lt;/code&gt;&lt;/strong&gt; ã€‚&lt;code&gt;std::move&lt;/code&gt;åˆ©ç”¨æ¨¡æ¿å’Œç±»å‹èƒå–ï¼ˆ&lt;code&gt;std::remove_reference&lt;/code&gt;ï¼‰ï¼Œç¡®ä¿æ— è®ºè¾“å…¥çš„æ˜¯å·¦å€¼ã€å·¦å€¼å¼•ç”¨è¿˜æ˜¯å³å€¼å¼•ç”¨ï¼Œæœ€ç»ˆéƒ½è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå¯¹åº”çš„å³å€¼å¼•ç”¨ç±»å‹ï¼ˆ&lt;code&gt;T&amp;amp;&amp;amp;&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼š&lt;strong&gt;ä¸€ä¸ªæœ‰åå­—çš„å³å€¼å¼•ç”¨å˜é‡ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ªå·¦å€¼&lt;/strong&gt; ã€‚è¿™æ˜¯å› ä¸ºå®ƒå…·æœ‰æ ‡è¯†ç¬¦å’ŒæŒä¹…åœ°å€ï¼Œç¬¦åˆå·¦å€¼çš„å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦çš„å‚æ•° &lt;code&gt;MyClass&amp;amp;&amp;amp; other&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;other&lt;/code&gt;æœ¬èº«åœ¨å‡½æ•°ä½“å†…æ˜¯ä¸€ä¸ªå·¦å€¼ã€‚å¦‚æœä½ å¸Œæœ›å°†æˆå‘˜å˜é‡çš„èµ„æºä¹Ÿâ€œç§»åŠ¨â€è¿‡æ¥ï¼Œè€Œä¸æ˜¯æ‹·è´ï¼Œå°±éœ€è¦å¯¹å®ƒä»¬å†æ¬¡ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-stdmoveçš„åº”ç”¨ä¸é‡è¦æ³¨æ„äº‹é¡¹"&gt;ğŸ¯ &lt;code&gt;std::move&lt;/code&gt;çš„åº”ç”¨ä¸é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;std::move&lt;/code&gt;çš„çœŸæ­£å¨åŠ›åœ¨äºå®ƒèƒ½å¤Ÿ&lt;strong&gt;è§¦å‘ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ç§»åŠ¨è¯­ä¹‰ä¸­çš„åº”ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç§»åŠ¨è¯­ä¹‰å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå³å€¼ï¼ˆç‰¹åˆ«æ˜¯â€œå°†äº¡å€¼â€ï¼‰çš„èµ„æºæ‰€æœ‰æƒé«˜æ•ˆåœ°è½¬ç§»ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„æ·±åº¦æ‹·è´ï¼Œæå¤§æå‡æ€§èƒ½ ã€‚ä¾‹å¦‚ï¼Œåœ¨å®ç°ç§»åŠ¨æ„é€ å‡½æ•°æ—¶ï¼Œå¯¹äºç®¡ç†åŠ¨æ€èµ„æºçš„æˆå‘˜å˜é‡ï¼Œä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;å¯ä»¥ç¡®ä¿è°ƒç”¨å…¶ç§»åŠ¨æ„é€ å‡½æ•°è€Œéæ‹·è´æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¤ºä¾‹ï¼šç§»åŠ¨æ„é€ å‡½æ•°
MyClass(MyClass&amp;amp;&amp;amp; other) noexcept
: data_ptr(std::move(other.data_ptr)) { // å°†æˆå‘˜å˜é‡è½¬ä¸ºå³å€¼ï¼Œæ„å›¾è°ƒç”¨å…¶ç§»åŠ¨æ„é€ 
other.data_ptr = nullptr; // å°†æºå¯¹è±¡ç½®äºæœ‰æ•ˆä½†ç©ºçš„çŠ¶æ€
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿…é¡»è°¨æ…ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;åï¼Œè¢«è½¬æ¢çš„å·¦å€¼å¯¹è±¡çš„çŠ¶æ€å°†å˜ä¸º&lt;strong&gt;æœªå®šä¹‰&lt;/strong&gt;ï¼ˆæœ‰æ•ˆä½†ä¸ç¡®å®šçš„çŠ¶æ€ï¼‰ã€‚æœ€å¸¸è§çš„åšæ³•æ˜¯å°†å…¶å†…éƒ¨æŒ‡é’ˆç½®ç©ºã€‚å› æ­¤ï¼Œ&lt;strong&gt;ä¸€æ—¦å¯¹ä¸€ä¸ªå¯¹è±¡ä½¿ç”¨äº† &lt;code&gt;std::move&lt;/code&gt;ï¼Œä½ å°±åº”è¯¥å‡å®šå®ƒä¸å†æŒæœ‰åŸæ¥çš„èµ„æºï¼Œä¸åº”å†è¯»å–å…¶å€¼&lt;/strong&gt;ï¼Œé™¤éä½ æ˜ç¡®çŸ¥é“å®ƒçš„æ–°çŠ¶æ€ï¼ˆä¾‹å¦‚ï¼Œåœ¨ç§»åŠ¨æ„é€ å‡½æ•°æˆ–èµ‹å€¼è¿ç®—ç¬¦ä¸­ä½ äº²è‡ªè®¾ç½®äº†å®ƒçš„æ–°çŠ¶æ€ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æ ¸å¿ƒä»·å€¼"&gt;ğŸ’ æ€»ç»“ä¸æ ¸å¿ƒä»·å€¼
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå·¦å€¼å’Œå³å€¼çš„æ ¹æœ¬åŒºåˆ«åœ¨äº&lt;strong&gt;èº«ä»½ï¼ˆæ˜¯å¦å¯å¯»å€ï¼‰å’Œç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ã€‚&lt;code&gt;std::move&lt;/code&gt;æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„â€œèº«ä»½è½¬æ¢å™¨â€ï¼Œå®ƒé€šè¿‡ç®€å•çš„ç±»å‹è½¬æ¢ï¼Œå°†ä¸€ä¸ªå·¦å€¼æ ‡è®°ä¸ºâ€œå¯è¢«ç§»åŠ¨çš„â€å³å€¼ï¼Œä»è€Œä¸ºç§»åŠ¨è¯­ä¹‰é“ºå¹³é“è·¯ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äº&lt;strong&gt;å¯ç”¨ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;ï¼Œä½¿å¾— C++ èƒ½å¤Ÿé«˜æ•ˆåœ°è½¬ç§»èµ„æºæ‰€æœ‰æƒï¼Œé¿å…äº†ä¸å¿…è¦çš„æ·±åº¦æ‹·è´ï¼Œå°¤å…¶å¯¹äºç®¡ç†å¤§é‡èµ„æºçš„å¯¹è±¡ï¼ˆå¦‚ &lt;code&gt;std::vector&lt;/code&gt;, &lt;code&gt;std::string&lt;/code&gt;ï¼‰æ€§èƒ½æå‡æ˜¾è‘— ã€‚ç†è§£å·¦å€¼ã€å³å€¼ä»¥åŠ &lt;code&gt;std::move&lt;/code&gt;çš„æœºåˆ¶ï¼Œæ˜¯ç¼–å†™ç°ä»£ã€é«˜æ•ˆ C++ ä»£ç çš„å…³é”®ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼å¦‚æœä½ å¯¹ç§»åŠ¨è¯­ä¹‰çš„å…·ä½“å®ç°æˆ–è€…å®Œç¾è½¬å‘æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥ã€‚&lt;/p&gt;
&lt;h2 id="å³å€¼åœ°å€"&gt;å³å€¼åœ°å€
&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„é—®é¢˜ï¼Œå®ƒç›´æŒ‡C++ä¸­å·¦å€¼å’Œå³å€¼çš„æ ¹æœ¬åŒºåˆ«ã€‚ç®€å•æ¥è¯´ï¼Œå³å€¼æ²¡æœ‰æŒä¹…åœ°å€ï¼Œæ˜¯å› ä¸ºå®ƒçš„&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸçŸ­æš‚&lt;/strong&gt;å’Œ&lt;strong&gt;è®¾è®¡ç›®çš„çº¯ç²¹&lt;/strong&gt;ï¼Œè¿™ç§ç‰¹æ€§æ˜¯C++ä¸ºäº†è¿½æ±‚æè‡´æ€§èƒ½è€Œåšå‡ºçš„å…³é”®è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹è¡¨æ¸…æ™°åœ°å¯¹æ¯”äº†å·¦å€¼å’Œå³å€¼åœ¨åœ°å€æ–¹é¢çš„æœ¬è´¨å·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å·¦å€¼ (Lvalue)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å³å€¼ (Rvalue)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèº«ä»½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºä¸€ä¸ª&lt;strong&gt;æœ‰æ ‡è¯†ç¬¦ã€æœ‰æŒä¹…å†…å­˜åœ°å€çš„å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºä¸€ä¸ª&lt;strong&gt;ä¸´æ—¶çš„ã€çŸ­æš‚çš„æ•°æ®å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å…¶ä½œç”¨åŸŸå†…æŒç»­å­˜åœ¨ï¼Œç”Ÿå‘½å‘¨æœŸè¾ƒé•¿&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä»…åœ¨å½“å‰è¡¨è¾¾å¼å†…æœ‰æ•ˆï¼Œè¡¨è¾¾å¼ç»“æŸåç«‹å³é”€æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç¨‹åºçŠ¶æ€ï¼Œå¯ä»¥è¢«åå¤ä½¿ç”¨å’Œä¿®æ”¹&lt;/td&gt;
&lt;td&gt;æä¾›è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸´æ—¶ç»“æœï¼Œæ˜¯â€œä¸€æ¬¡æ€§â€çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ‰æ˜ç¡®ã€æŒä¹…çš„åœ°å€&lt;/strong&gt;ï¼Œå¯ä½¿ç”¨ &lt;code&gt;&amp;amp;&lt;/code&gt;å–å€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— æŒä¹…å†…å­˜åœ°å€&lt;/strong&gt;ï¼Œæ— æ³•ä½¿ç”¨ &lt;code&gt;&amp;amp;&lt;/code&gt;å–å€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£æ— æŒä¹…åœ°å€çš„æ ¹æº"&gt;ğŸ§  æ·±å…¥ç†è§£â€œæ— æŒä¹…åœ°å€â€çš„æ ¹æº
&lt;/h3&gt;&lt;h4 id="ä¸´æ—¶æ€§ä¸ç”Ÿå‘½å‘¨æœŸ"&gt;&lt;strong&gt;ä¸´æ—¶æ€§ä¸ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å³å€¼æœ€æ ¸å¿ƒçš„ç‰¹å¾å°±æ˜¯å…¶&lt;strong&gt;ä¸´æ—¶æ€§&lt;/strong&gt;ã€‚æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ &lt;code&gt;x + 5&lt;/code&gt;ã€‚è¿™ä¸ªåŠ æ³•è®¡ç®—çš„ç»“æœæ˜¯ä¸€ä¸ªä¸´æ—¶å­˜åœ¨çš„æ•°å€¼ã€‚å®ƒå­˜åœ¨çš„å”¯ä¸€ç›®çš„å°±æ˜¯è¢«ä½¿ç”¨ï¼ˆæ¯”å¦‚èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ &lt;code&gt;y = x + 5&lt;/code&gt;ï¼‰ï¼Œä¸€æ—¦è¿™ä¸ªæ“ä½œå®Œæˆï¼Œè¿™ä¸ªä¸´æ—¶ç»“æœå°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†ï¼Œä¼šè¢«ç«‹å³ä¸¢å¼ƒã€‚&lt;/p&gt;
&lt;p&gt;C++è¯­è¨€çš„è®¾è®¡éµå¾ªè¿™ä¸€é€»è¾‘ï¼šæ—¢ç„¶è¿™ä¸ªå€¼é©¬ä¸Šå°±ä¼šæ¶ˆå¤±ï¼Œé‚£ä¹ˆä¸ºå®ƒåœ¨å†…å­˜ä¸­åˆ†é…ä¸€ä¸ªæŒä¹…çš„ã€å¯å¯»å€çš„ä½ç½®å°±æ˜¯&lt;strong&gt;ä¸å¿…è¦çš„å¼€é”€&lt;/strong&gt;ã€‚ç¼–è¯‘å™¨å¯èƒ½ä¼šé€‰æ‹©åœ¨CPUå¯„å­˜å™¨ä¸­å¤„ç†å®ƒï¼Œæˆ–è€…åˆ†é…ä¸€ä¸ªä¸´æ—¶çš„æ ˆä½ç½®ï¼Œä½†è¿™ä¸ªä½ç½®æ˜¯â€œåŒ¿åâ€çš„ï¼Œä¸”ç”Ÿå‘½å‘¨æœŸä¸è¡¨è¾¾å¼ç»‘å®šï¼Œå› æ­¤ä½ æ— æ³•è·å¾—å…¶æŒä¹…åœ°å€ã€‚&lt;/p&gt;
&lt;h4 id="æ€§èƒ½ä¼˜åŒ–ä¸èµ„æºè½¬ç§»"&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–ä¸èµ„æºè½¬ç§»&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ­£æ˜¯C++å“²å­¦çš„ç²¾å¦™ä¹‹å¤„ã€‚ä¸ä¸ºå³å€¼åˆ†é…æŒä¹…åœ°å€ï¼Œé¿å…äº†ä¸å¿…è¦çš„å†…å­˜æ“ä½œï¼Œæå‡äº†æ•ˆç‡ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒC++11å¼•å…¥å³å€¼å¼•ç”¨ï¼ˆ&lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;ï¼‰çš„æ ¸å¿ƒç›®çš„ï¼Œå°±æ˜¯&lt;strong&gt;åˆ©ç”¨å³å€¼çš„â€œå°†äº¡â€ç‰¹æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªå³å€¼ï¼ˆæ¯”å¦‚ä¸€ä¸ªå‡½æ•°è¿”å›çš„ä¸´æ—¶å¯¹è±¡ï¼‰å³å°†é”€æ¯æ—¶ï¼Œå®ƒå†…éƒ¨æŒæœ‰çš„èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ã€æ–‡ä»¶å¥æŸ„ï¼‰æœ¬æ¥ä¹Ÿè¦éšä¹‹é‡Šæ”¾ã€‚ç§»åŠ¨è¯­ä¹‰å…è®¸æˆ‘ä»¬é€šè¿‡å³å€¼å¼•ç”¨â€œæ‹¦æˆªâ€è¿™ä¸ªå³å°†é”€æ¯çš„å¯¹è±¡ï¼Œç›´æ¥å°†å…¶èµ„æºè½¬ç§»ç»™æ–°å¯¹è±¡ï¼Œä»è€Œ&lt;strong&gt;é¿å…äº†ä¸€æ¬¡æ˜‚è´µçš„æ·±æ‹·è´&lt;/strong&gt;ã€‚å¦‚æœå³å€¼æœ‰æŒä¹…åœ°å€ï¼Œå¯ä»¥è¢«éšæ„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ç§å®‰å…¨ã€é«˜æ•ˆçš„èµ„æºè½¬ç§»å°±æ— æ³•å®ç°ï¼Œå› ä¸ºæ— æ³•ç¡®å®šè¿˜æœ‰æ²¡æœ‰å…¶ä»–ä»£ç åœ¨å¼•ç”¨è¿™å—èµ„æºã€‚&lt;/p&gt;
&lt;h3 id="-ä»ç¼–è¯‘å™¨è§†è§’çœ‹"&gt;ğŸ’» ä»ç¼–è¯‘å™¨è§†è§’çœ‹
&lt;/h3&gt;&lt;p&gt;ä»ç¼–è¯‘å™¨å’Œåº•å±‚å®ç°çš„è§†è§’æ¥çœ‹ï¼Œå³å€¼é€šå¸¸å¯¹åº”ç€&lt;strong&gt;å¯„å­˜å™¨ä¸­å­˜å‚¨çš„ä¸´æ—¶æ•°æ®&lt;/strong&gt;ï¼Œæˆ–è€…ç”Ÿå‘½å‘¨æœŸæçŸ­çš„æ ˆå†…å­˜ã€‚å®ƒä»¬æ²¡æœ‰â€œåå­—â€ï¼Œåªæ˜¯æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸­é—´äº§ç‰©ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ &lt;code&gt;std::move&lt;/code&gt;çš„æœ¬è´¨ï¼Œå°±æ˜¯ä¸€ä¸ªé«˜çº§çš„â€œå¼ºåˆ¶ç±»å‹è½¬æ¢â€å·¥å…·ã€‚å®ƒå¹¶ä¸ç§»åŠ¨ä»»ä½•æ•°æ®ï¼Œå…¶å”¯ä¸€ä½œç”¨å°±æ˜¯&lt;strong&gt;å°†ä¸€ä¸ªå·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨&lt;/strong&gt;ã€‚è¿™ç›¸å½“äºå¼€å‘è€…å‘ç¼–è¯‘å™¨åšå‡ºä¸€ä¸ªæ‰¿è¯ºï¼šâ€œæˆ‘æ˜ç¡®çŸ¥é“è¿™ä¸ªå¯¹è±¡ï¼ˆ&lt;code&gt;a&lt;/code&gt;ï¼‰ä¹‹åä¸ä¼šå†è¢«ä½¿ç”¨ï¼Œæˆ‘å…è®¸ä½ æŠŠå®ƒå½“ä½œä¸€ä¸ªå³å°†æ­»äº¡çš„ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰æ¥å¤„ç†ï¼Œä»è€Œå¯ä»¥â€˜å·â€™èµ°å®ƒçš„èµ„æºã€‚â€&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;MyObject a;
MyObject b = std::move(a); // å‘Šè¯‰ç¼–è¯‘å™¨ï¼šæŠŠaå½“ä½œå³å€¼ï¼Œä»è€Œè§¦å‘ç§»åŠ¨æ„é€ ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œè¿™è¡Œä»£ç åï¼Œå¯¹è±¡ &lt;code&gt;a&lt;/code&gt;çš„èµ„æºè¢«è½¬ç§»ç»™äº† &lt;code&gt;b&lt;/code&gt;ï¼Œ&lt;code&gt;a&lt;/code&gt;æœ¬èº«è¿›å…¥ä¸€ä¸ªâ€œæœ‰æ•ˆä½†æœªæŒ‡å®šâ€çš„çŠ¶æ€ï¼ˆé€šå¸¸å†…éƒ¨æŒ‡é’ˆè¢«ç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ï¼‰ï¼Œä½ ä¸åº”å†ä½¿ç”¨å®ƒï¼Œä½†å®ƒçš„ææ„å‡½æ•°ä¾ç„¶æ˜¯å®‰å…¨çš„ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œå³å€¼æ²¡æœ‰æŒä¹…çš„å†…å­˜åœ°å€ï¼Œå¹¶éä¸€ç§ç¼ºé™·ï¼Œè€Œæ˜¯ä¸€é¡¹ç»è¿‡æ·±æ€ç†Ÿè™‘çš„è®¾è®¡ã€‚å®ƒæ ¹æ¤äºå³å€¼&lt;strong&gt;çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸€æ¬¡æ€§ä½¿ç”¨&lt;/strong&gt;çš„æœ¬è´¨ï¼Œæ˜¯C++å®ç°é«˜æ•ˆèµ„æºç®¡ç†å’Œé›¶å¼€é”€æŠ½è±¡çš„é‡è¦åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ä»æ ¹æºä¸Šç†è§£å³å€¼çš„è¿™ä¸€ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h2 id="å°†äº¡å€¼"&gt;å°†äº¡å€¼
&lt;/h2&gt;&lt;p&gt;åœ¨ C++11 ä¹‹åï¼Œå³å€¼è¢«ç»†åˆ†ä¸ºä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š&lt;strong&gt;çº¯å³å€¼&lt;/strong&gt; å’Œ &lt;strong&gt;å°†äº¡å€¼&lt;/strong&gt;ã€‚ä¸‹é¢çš„è¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;çº¯å³å€¼&lt;/th&gt;
&lt;th&gt;å°†äº¡å€¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèº«ä»½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¯ç²¹çš„ä¸´æ—¶å€¼ï¼Œæ— å†…å­˜åœ°å€&lt;/td&gt;
&lt;td&gt;æœ‰èº«ä»½ä½†ç”Ÿå‘½å‘¨æœŸå³å°†ç»“æŸçš„å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸åœ¨å½“å‰è¡¨è¾¾å¼ç»“æŸåé”€æ¯&lt;/td&gt;
&lt;td&gt;èµ„æºå¯è¢«è½¬ç§»ï¼Œç”Ÿå‘½å‘¨æœŸé€šè¿‡ç§»åŠ¨å¾—ä»¥â€œå»¶ç»­â€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ä¾‹å­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­—é¢é‡ï¼ˆå¦‚ &lt;code&gt;42&lt;/code&gt;ï¼‰ã€&lt;code&gt;a+b&lt;/code&gt;çš„ç»“æœã€è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°è°ƒç”¨&lt;/td&gt;
&lt;td&gt;&lt;code&gt;std::move()&lt;/code&gt;çš„è¿”å›å€¼ã€è¿”å›å³å€¼å¼•ç”¨çš„å‡½æ•°è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…±åŒç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éƒ½å±äº&lt;strong&gt;å³å€¼&lt;/strong&gt;ï¼Œå¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨ï¼ˆ&lt;code&gt;T&amp;amp;&amp;amp;&lt;/code&gt;ï¼‰ï¼Œç”¨äºè§¦å‘ç§»åŠ¨è¯­ä¹‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å°†äº¡å€¼"&gt;ğŸ§  æ·±å…¥ç†è§£å°†äº¡å€¼
&lt;/h3&gt;&lt;p&gt;å°†äº¡å€¼æ˜¯æ¯”è¾ƒç‹¬ç‰¹çš„ä¸€ç§å³å€¼ï¼Œå¯ä»¥é€šä¿—åœ°ç†è§£ä¸º &lt;strong&gt;â€œå³å°†æ­»äº¡ä½†ä»æœ‰åˆ©ç”¨ä»·å€¼â€çš„å¯¹è±¡&lt;/strong&gt;ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªæœ‰åå­—çš„ã€ç”Ÿå‘½å‘¨æœŸå³å°†ç»“æŸçš„å·¦å€¼ï¼Œä½†è¢«æ˜¾å¼åœ°æ ‡è®°ä¸ºâ€œèµ„æºå¯ä»¥è¢«å®‰å…¨åœ°è½¬ç§»èµ°â€ã€‚&lt;/p&gt;
&lt;p&gt;å°†äº¡å€¼çš„ä¸€ä¸ªå…³é”®æ¥æºæ˜¯ä½¿ç”¨ &lt;code&gt;std::move()&lt;/code&gt;è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™ä¸ªå‡½æ•°æœ¬èº«å¹¶ä¸ç§»åŠ¨ä»»ä½•æ•°æ®ï¼Œå®ƒçš„æ ¸å¿ƒä½œç”¨åªæ˜¯ä¸€ä¸ª&lt;strong&gt;ç±»å‹è½¬æ¢å™¨&lt;/strong&gt;ï¼Œæ‰§è¡Œä¸€ä¸ªæ— æ¡ä»¶è½¬æ¢ï¼Œå°†ä¼ å…¥çš„å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ç±»å‹ï¼Œä»è€Œå°†å…¶æ ‡è®°ä¸ºä¸€ä¸ªå°†äº¡å€¼ã€‚è¿™ç›¸å½“äºå‘ç¼–è¯‘å™¨æ‰¿è¯ºï¼šâ€œæˆ‘æ˜ç¡®çŸ¥é“è¿™ä¸ªå¯¹è±¡ä¹‹åä¸ä¼šå†è¢«ä½¿ç”¨ï¼ˆæˆ–æˆ‘ä¸å†å…³å¿ƒå®ƒçš„çŠ¶æ€ï¼‰ï¼Œè¯·ä½ æŠŠå®ƒå½“ä½œä¸€ä¸ªå¯ä»¥â€˜å·â€™èµ„æºçš„å°†äº¡å¯¹è±¡æ¥å¤„ç†ã€‚â€&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„é‡è¦è§„åˆ™æ˜¯ï¼š&lt;strong&gt;ä¸€ä¸ªæœ‰åå­—çš„å³å€¼å¼•ç”¨å˜é‡ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ªå·¦å€¼&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œåœ¨ç§»åŠ¨æ„é€ å‡½æ•°çš„å‚æ•° &lt;code&gt;MyClass&amp;amp;&amp;amp; other&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;other&lt;/code&gt;åœ¨å‡½æ•°ä½“å†…æ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œå› ä¸ºå®ƒæœ‰åå­—ï¼Œå¯ä»¥å–åœ°å€ã€‚å¦‚æœä½ å¸Œæœ›å°†å…¶æˆå‘˜å˜é‡çš„èµ„æºä¹Ÿâ€œç§»åŠ¨â€è¿‡æ¥ï¼Œå°±éœ€è¦å¯¹å®ƒä»¬å†æ¬¡ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-çº¯å³å€¼çš„å¸¸è§å½¢å¼"&gt;ğŸ¯ çº¯å³å€¼çš„å¸¸è§å½¢å¼
&lt;/h3&gt;&lt;p&gt;çº¯å³å€¼ä»£è¡¨äº†ä¼ ç»Ÿæ„ä¹‰ä¸Šæœ€â€œçº¯ç²¹â€çš„ä¸´æ—¶å€¼ï¼Œä¸»è¦åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­—é¢é‡&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;42&lt;/code&gt;ã€&lt;code&gt;3.14&lt;/code&gt;ã€&lt;code&gt;true&lt;/code&gt;ç­‰ï¼ˆå­—ç¬¦ä¸²å­—é¢é‡ &lt;code&gt;&amp;quot;abc&amp;quot;&lt;/code&gt;æ˜¯ç‰¹ä¾‹ï¼Œå±äºå·¦å€¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿ç®—è¡¨è¾¾å¼çš„ç»“æœ&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;a + b&lt;/code&gt;ã€&lt;code&gt;a * b&lt;/code&gt;ç­‰äº§ç”Ÿçš„åŒ¿åä¸´æ—¶ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›éå¼•ç”¨ç±»å‹çš„å‡½æ•°è°ƒç”¨&lt;/strong&gt;ï¼šå¦‚ä¸€ä¸ªå‡½æ•° &lt;code&gt;std::string getName()&lt;/code&gt;è¿”å›çš„é‚£ä¸ªä¸´æ—¶ &lt;code&gt;std::string&lt;/code&gt;å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lambda è¡¨è¾¾å¼&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;[]{ return 42; }&lt;/code&gt;æœ¬èº«æ˜¯ä¸€ä¸ªå³å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç½®è‡ªå¢/è‡ªå‡è¡¨è¾¾å¼&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;i++&lt;/code&gt;ã€&lt;code&gt;i--&lt;/code&gt;è¿”å›çš„æ˜¯åŸå§‹å€¼çš„å‰¯æœ¬ï¼Œæ˜¯å³å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸ºä½•é‡è¦ç§»åŠ¨è¯­ä¹‰ä¸æ€§èƒ½ä¼˜åŒ–"&gt;ğŸ’¡ ä¸ºä½•é‡è¦ï¼šç§»åŠ¨è¯­ä¹‰ä¸æ€§èƒ½ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;å¼•å…¥å°†äº¡å€¼çš„æ ¹æœ¬ç›®çš„æ˜¯ä¸ºäº†æ”¯æŒ &lt;strong&gt;ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;ï¼Œè¿™æ˜¯ç°ä»£C++æ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::vector&amp;lt;std::string&amp;gt; createHugeVector();
std::vector&amp;lt;std::string&amp;gt; hugeVec = createHugeVector();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨C++11ä¹‹å‰ï¼Œ&lt;code&gt;createHugeVector()&lt;/code&gt;è¿”å›çš„ä¸´æ—¶å¯¹è±¡ï¼ˆçº¯å³å€¼ï¼‰éœ€è¦è¢«å®Œæ•´åœ°æ‹·è´åˆ° &lt;code&gt;hugeVec&lt;/code&gt;ä¸­ï¼Œå¦‚æœå¯¹è±¡å¾ˆå¤§ï¼Œå¼€é”€ä¼šéå¸¸é«˜æ˜‚ã€‚è€Œåœ¨C++11åŠä¹‹åï¼Œç¼–è¯‘å™¨ä¼šè¯†åˆ«å‡ºè¿™æ˜¯ä¸€ä¸ªå³å€¼ï¼ˆç‰¹åˆ«æ˜¯å°†äº¡å€¼ï¼‰ï¼Œä»è€Œè°ƒç”¨ &lt;code&gt;std::vector&lt;/code&gt;çš„&lt;strong&gt;ç§»åŠ¨æ„é€ å‡½æ•°&lt;/strong&gt;ã€‚ç§»åŠ¨æ„é€ å‡½æ•°ä¼šâ€œçªƒå–â€ä¸´æ—¶å¯¹è±¡å†…éƒ¨çš„åŠ¨æ€æ•°ç»„æŒ‡é’ˆç­‰èµ„æºï¼Œç„¶åå°†ä¸´æ—¶å¯¹è±¡ç½®äºæœ‰æ•ˆä½†ä¸ºç©ºçš„çŠ¶æ€ã€‚è¿™ä¸ªè¿‡ç¨‹&lt;strong&gt;é¿å…äº†ä¸å¿…è¦çš„æ•°æ®æ·±æ‹·è´&lt;/strong&gt;ï¼Œæå¤§åœ°æå‡äº†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å°†äº¡å€¼æ˜¯ç§»åŠ¨è¯­ä¹‰çš„åŸºçŸ³&lt;/strong&gt;ã€‚å®ƒè®©ç¨‹åºå‘˜èƒ½å¤Ÿæ˜ç¡®åœ°å°†é‚£äº›â€œä¸å†éœ€è¦â€çš„å·¦å€¼æ ‡è¯†ä¸ºå¯è¢«ç§»åŠ¨çš„èµ„æºï¼Œä»è€Œåœ¨éœ€è¦æ‹·è´çš„åœ°æ–¹å˜â€œæ‹·è´â€ä¸ºâ€œç§»åŠ¨â€ï¼Œå®ç°æ€§èƒ½çš„é£è·ƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å°†äº¡å€¼ä»¥åŠå³å€¼çš„ä¸åŒç±»å‹ã€‚ç†è§£äº†è¿™äº›æ¦‚å¿µï¼Œä½ å°±èƒ½æ›´å¥½åœ°è¿ç”¨ç§»åŠ¨è¯­ä¹‰æ¥ä¼˜åŒ–ä½ çš„C++ä»£ç äº†ã€‚&lt;/p&gt;
&lt;h2 id="å¼•ç”¨"&gt;å¼•ç”¨
&lt;/h2&gt;&lt;p&gt;ç†è§£å·¦å€¼å’Œå³å€¼å¼•ç”¨åŠå…¶å…³ç³»ï¼Œæ˜¯æŒæ¡ç°ä»£C++èµ„æºç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–çš„å…³é”®ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å·¦å€¼å¼•ç”¨ (&lt;code&gt;&amp;amp;&lt;/code&gt;)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å³å€¼å¼•ç”¨ (&lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºå·²å­˜åœ¨çš„å¯¹è±¡ï¼ˆå·¦å€¼ï¼‰èµ·åˆ«å&lt;/td&gt;
&lt;td&gt;ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰ï¼Œå»¶é•¿å…¶ç”Ÿå‘½å‘¨æœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»‘å®šå¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å·¦å€¼&lt;/strong&gt;ï¼ˆæœ‰æ ‡è¯†ç¬¦ã€æœ‰æŒä¹…åœ°å€çš„å¯¹è±¡ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å³å€¼&lt;/strong&gt;ï¼ˆä¸´æ—¶ã€çŸ­æš‚çš„å¯¹è±¡ï¼Œå¦‚è¡¨è¾¾å¼ç»“æœã€å­—é¢é‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. é¿å…å¯¹è±¡æ‹·è´ 2. å‡½æ•°å‚æ•°ä¼ é€’ä¸è¿”å›&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;ï¼šé«˜æ•ˆè½¬ç§»èµ„æºæ‰€æœ‰æƒ 2. &lt;strong&gt;å®Œç¾è½¬å‘&lt;/strong&gt;ï¼šä¿æŒå‚æ•°åŸå§‹ç±»å‹è½¬å‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿®æ”¹æƒé™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå¸¸é‡å·¦å€¼å¼•ç”¨å¯ä¿®æ”¹å…¶ç»‘å®šå¯¹è±¡&lt;/td&gt;
&lt;td&gt;å³å€¼å¼•ç”¨å¯ä¿®æ”¹å…¶ç»‘å®šçš„å³å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‰¹æ®Šè§„åˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;const&lt;/code&gt;å·¦å€¼å¼•ç”¨å¯ç»‘å®šåˆ°å³å€¼&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;std::move&lt;/code&gt;å°†å·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼ï¼Œä»è€Œè¢«å³å€¼å¼•ç”¨ç»‘å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç»‘å®šè§„åˆ™ä¸è½¬æ¢"&gt;ğŸ”— ç»‘å®šè§„åˆ™ä¸è½¬æ¢
&lt;/h3&gt;&lt;p&gt;è™½ç„¶è¡¨æ ¼å±•ç¤ºäº†åŸºæœ¬è§„åˆ™ï¼Œä½†å®ƒä»¬ä¹‹é—´å¯ä»¥é€šè¿‡ç‰¹å®šæ–¹å¼è¿›è¡Œè½¬æ¢ï¼Œè¿™å¢åŠ äº†ä½¿ç”¨çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;const&lt;/code&gt;å·¦å€¼å¼•ç”¨çš„åŒ…å®¹æ€§&lt;/strong&gt;ï¼šè¿™æ˜¯å·¦å€¼å¼•ç”¨çš„ä¸€ä¸ªä¾‹å¤–ã€‚&lt;code&gt;const&lt;/code&gt;å·¦å€¼å¼•ç”¨å¯ä»¥ç»‘å®šåˆ°å³å€¼ï¼Œä¾‹å¦‚ &lt;code&gt;const int&amp;amp; ref = 10;&lt;/code&gt;æ˜¯åˆæ³•çš„ã€‚è¿™ä½¿å¾—å‡½æ•°å¯ä»¥åŒæ—¶æ¥å—å·¦å€¼å’Œå³å€¼ä½œä¸ºå‚æ•°ï¼Œä¾‹å¦‚ &lt;code&gt;std::vector&lt;/code&gt;çš„ &lt;code&gt;push_back&lt;/code&gt;å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;std::move&lt;/code&gt;è¿›è¡Œè½¬æ¢&lt;/strong&gt;ï¼š&lt;code&gt;std::move&lt;/code&gt;æ˜¯ä¸€ä¸ªæ ¸å¿ƒå‡½æ•°ï¼Œå®ƒèƒ½å°†ä¸€ä¸ªå·¦å€¼å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ã€‚è¿™ç›¸å½“äºå¼€å‘è€…å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œæˆ‘æ˜ç¡®çŸ¥é“è¿™ä¸ªå·¦å€¼å¯¹è±¡ä¹‹åä¸å†éœ€è¦å…¶å½“å‰çŠ¶æ€ï¼Œå…è®¸å°†å…¶èµ„æºè½¬ç§»â€ã€‚&lt;strong&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;std::move&lt;/code&gt;æœ¬èº«å¹¶ä¸è¿›è¡Œä»»ä½•ç§»åŠ¨æ“ä½œï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç±»å‹è½¬æ¢å·¥å…·&lt;/strong&gt;ï¼Œå®é™…çš„ç§»åŠ¨æ˜¯ç”±ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦å®Œæˆçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒåº”ç”¨åœºæ™¯"&gt;ğŸš€ æ ¸å¿ƒåº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å³å€¼å¼•ç”¨çš„å¨åŠ›ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªç°ä»£C++çš„é‡è¦ç‰¹æ€§ä¸Šï¼šç§»åŠ¨è¯­ä¹‰å’Œå®Œç¾è½¬å‘ã€‚&lt;/p&gt;
&lt;h4 id="ç§»åŠ¨è¯­ä¹‰move-semantics"&gt;&lt;strong&gt;ç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ç§»åŠ¨è¯­ä¹‰æ˜¯å³å€¼å¼•ç”¨æœ€é‡è¦çš„åº”ç”¨ï¼Œæ—¨åœ¨è§£å†³ä¸å¿…è¦çš„æ·±åº¦æ‹·è´å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚å®ƒå…è®¸å°†èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ï¼‰ä»ä¸€ä¸ªå¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ä¸´æ—¶å¯¹è±¡ï¼‰&lt;strong&gt;â€œç§»åŠ¨â€&lt;/strong&gt; åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œéåˆ›å»ºå‰¯æœ¬ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;ï¼šé€šè¿‡å®šä¹‰&lt;strong&gt;ç§»åŠ¨æ„é€ å‡½æ•°&lt;/strong&gt;å’Œ&lt;strong&gt;ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦&lt;/strong&gt;æ¥å®ç°ï¼Œå®ƒä»¬ä»¥å³å€¼å¼•ç”¨ä½œä¸ºå‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šç§»åŠ¨æ„é€ å‡½æ•°â€œçªƒå–â€æºå¯¹è±¡ï¼ˆå³å€¼ï¼‰çš„å†…éƒ¨èµ„æºï¼ˆä¾‹å¦‚æŒ‡é’ˆï¼‰ï¼Œç„¶åå°†æºå¯¹è±¡çš„å†…éƒ¨æŒ‡é’ˆç½®ä¸º &lt;code&gt;nullptr&lt;/code&gt;ï¼Œä½¿å…¶å¤„äºæœ‰æ•ˆä½†ç©ºçš„çŠ¶æ€ï¼Œä»è€Œç¡®ä¿æºå¯¹è±¡ææ„æ—¶ä¸ä¼šé”™è¯¯é‡Šæ”¾å·²è¢«è½¬ç§»çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŠ¿&lt;/strong&gt;ï¼šå½“å¯¹è±¡ç®¡ç†ç€æ˜‚è´µèµ„æºï¼ˆå¦‚å¤§å‹åŠ¨æ€æ•°ç»„ï¼‰æ—¶ï¼Œç§»åŠ¨æ“ä½œï¼ˆé€šå¸¸åªæ˜¯å¤åˆ¶å‡ ä¸ªæŒ‡é’ˆï¼‰æ¯”æ·±æ‹·è´é«˜æ•ˆå¾—å¤šã€‚æ ‡å‡†åº“å®¹å™¨ï¼ˆå¦‚ &lt;code&gt;std::vector&lt;/code&gt;ï¼‰å’Œæ™ºèƒ½æŒ‡é’ˆéƒ½å……åˆ†åˆ©ç”¨äº†ç§»åŠ¨è¯­ä¹‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å®Œç¾è½¬å‘perfect-forwarding"&gt;&lt;strong&gt;å®Œç¾è½¬å‘ï¼ˆPerfect Forwardingï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å®Œç¾è½¬å‘æ˜¯æŒ‡åœ¨å‡½æ•°æ¨¡æ¿ä¸­ï¼Œå°†å‚æ•°ä»¥å…¶åŸå§‹çš„å€¼ç±»åˆ«ï¼ˆå·¦å€¼æˆ–å³å€¼ï¼‰è½¬å‘ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜èƒŒæ™¯&lt;/strong&gt;ï¼šåœ¨æ¨¡æ¿å‡½æ•° &lt;code&gt;template&amp;lt;typename T&amp;gt; void wrapper(T&amp;amp;&amp;amp; arg)&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;arg&lt;/code&gt;æ˜¯ä¸€ä¸ªâ€œä¸‡èƒ½å¼•ç”¨â€ï¼Œå®ƒæ—¢èƒ½ç»‘å®šå·¦å€¼ä¹Ÿèƒ½ç»‘å®šå³å€¼ã€‚ç„¶è€Œï¼Œ&lt;strong&gt;ä¸€æ—¦ä¸€ä¸ªæœ‰åå­—çš„å³å€¼å¼•ç”¨è¢«ç»‘å®šï¼Œå®ƒåœ¨è¡¨è¾¾å¼å†…éƒ¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªå·¦å€¼&lt;/strong&gt;ï¼ˆå› ä¸ºå®ƒæœ‰æ ‡è¯†ç¬¦å’Œåœ°å€ï¼‰ã€‚è¿™æ„å‘³ç€å¦‚æœç›´æ¥ä¼ é€’ &lt;code&gt;arg&lt;/code&gt;ï¼Œå®ƒä¼šè¢«å½“ä½œå·¦å€¼å¤„ç†ï¼Œæ— æ³•è§¦å‘ç›®æ ‡å‡½æ•°çš„å³å€¼é‡è½½ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;std::forward&amp;lt;T&amp;gt;(arg)&lt;/code&gt;ã€‚&lt;code&gt;std::forward&lt;/code&gt;æ˜¯ä¸€ä¸ªæ¡ä»¶è½¬æ¢ï¼Œå®ƒèƒ½ä¿æŒå‚æ•°çš„åŸå§‹å€¼ç±»åˆ«ã€‚å¦‚æœ &lt;code&gt;arg&lt;/code&gt;æœ€åˆæ˜¯ä¸€ä¸ªå³å€¼ï¼Œé‚£ä¹ˆ &lt;code&gt;std::forward&lt;/code&gt;ä¼šè¿”å›ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼›å¦‚æœæœ€åˆæ˜¯å·¦å€¼ï¼Œåˆ™è¿”å›å·¦å€¼å¼•ç”¨ã€‚è¿™æ ·å°±å®ç°äº†â€œå®Œç¾â€è½¬å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦ç»†èŠ‚ä¸è¯¯åŒº"&gt;âš ï¸ é‡è¦ç»†èŠ‚ä¸è¯¯åŒº
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å³å€¼å¼•ç”¨å˜é‡æœ¬èº«æ˜¯å·¦å€¼&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªå…³é”®ä¸”å®¹æ˜“æ··æ·†çš„ç‚¹ã€‚è™½ç„¶ &lt;code&gt;int&amp;amp;&amp;amp; rr = 10;&lt;/code&gt;ä¸­çš„ &lt;code&gt;rr&lt;/code&gt;æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨ç±»å‹ï¼Œä½† &lt;code&gt;rr&lt;/code&gt;è¿™ä¸ªå˜é‡æœ¬èº«æœ‰åå­—ï¼Œå¯ä»¥å–åœ°å€ï¼Œå› æ­¤&lt;strong&gt;å®ƒåœ¨è¡¨è¾¾å¼é‡Œæ˜¯ä¸€ä¸ªå·¦å€¼&lt;/strong&gt;ã€‚æ‰€ä»¥ä½ ä¸èƒ½å°† &lt;code&gt;rr&lt;/code&gt;å†ç»‘å®šç»™å¦ä¸€ä¸ªå³å€¼å¼•ç”¨ï¼ˆ&lt;code&gt;int&amp;amp;&amp;amp; rr2 = rr;&lt;/code&gt;æ˜¯é”™è¯¯çš„ï¼‰ï¼Œä½†å¯ä»¥ç”¨ &lt;code&gt;std::move(rr)&lt;/code&gt;å°†å…¶è½¬ä¸ºå³å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;std::move&lt;/code&gt;ä¸ä¿è¯å‘ç”Ÿç§»åŠ¨&lt;/strong&gt;ï¼šè°ƒç”¨ &lt;code&gt;std::move&lt;/code&gt;åªæ˜¯å°†å·¦å€¼æ ‡è®°ä¸ºå³å€¼ï¼Œä¸ºç§»åŠ¨æ“ä½œåˆ›é€ äº†å¯èƒ½ã€‚ä½†æœ€ç»ˆæ˜¯å¦ä¼šçœŸæ­£è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè¿˜å–å†³äºç›®æ ‡ç±»å‹æ˜¯å¦å®ç°äº†ç§»åŠ¨è¯­ä¹‰ã€‚å¦‚æœç±»æ²¡æœ‰ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šå›é€€åˆ°æ‹·è´æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨æ˜¯ç°ä»£C++ä¸­ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œèµ„æºçš„ä¸¤å¤§å·¥å…·ã€‚å·¦å€¼å¼•ç”¨ä¸»è¦ç”¨äºä¸ºæŒä¹…å¯¹è±¡èµ·åˆ«åï¼Œé¿å…æ‹·è´ï¼›è€Œå³å€¼å¼•ç”¨çš„æ ¸å¿ƒä»·å€¼åœ¨äºå®ç°&lt;strong&gt;ç§»åŠ¨è¯­ä¹‰&lt;/strong&gt;å’Œ&lt;strong&gt;å®Œç¾è½¬å‘&lt;/strong&gt;ï¼Œé€šè¿‡é«˜æ•ˆè½¬ç§»èµ„æºæ‰€æœ‰æƒæ¥æ˜¾è‘—æå‡ç¨‹åºæ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†åŒ…å«åŠ¨æ€èµ„æºçš„å¤§å‹å¯¹è±¡æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œç‰¹åˆ«æ˜¯ &lt;code&gt;std::move&lt;/code&gt;å’Œ &lt;code&gt;std::forward&lt;/code&gt;çš„é€‚ç”¨åœºæ™¯ä¸åŒºåˆ«ï¼Œæ˜¯ç¼–å†™ç°ä»£ã€é«˜æ•ˆC++ä»£ç çš„å…³é”®ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹ç§»åŠ¨æ„é€ æˆ–å®Œç¾è½¬åŠ¨çš„å…·ä½“å®ç°æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å†…è”å‡½æ•°"&gt;å†…è”å‡½æ•°
&lt;/h2&gt;&lt;p&gt;åœ¨C++ä¸­ï¼Œåœ¨ç±»å£°æ˜å†…éƒ¨å®šä¹‰çš„å‡½æ•°ï¼ˆé™¤äº†è™šå‡½æ•°ï¼‰ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è§†ä¸ºå†…è”å‡½æ•°ï¼Œè¿™ä¸»è¦æ˜¯åŸºäº&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;ç¼–è¯‘æ¨¡å‹&lt;/strong&gt;çš„è€ƒè™‘ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°æ¦‚æ‹¬äº†ä¸åŒç±»å‹æˆå‘˜å‡½æ•°çš„å†…è”è¡Œä¸ºåŠå…¶èƒŒåçš„ä¸»è¦åŸå› ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒè§‚ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°ç±»å‹&lt;/th&gt;
&lt;th&gt;åœ¨ç±»å†…éƒ¨å®šä¹‰æ˜¯å¦éšå¼å†…è”&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ™®é€šæˆå‘˜å‡½æ•°&lt;/strong&gt; (éè™š)&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;å‡½æ•°ä½“çŸ­å°&lt;/strong&gt;ï¼Œé€‚åˆå†…è”ä¼˜åŒ– 2. &lt;strong&gt;å®šä¹‰åœ¨å¤´æ–‡ä»¶å¯è§&lt;/strong&gt;ï¼Œæ»¡è¶³å†…è”è¦æ±‚ 3. é¿å…å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œæå‡æ€§èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è™šå‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦ (å³ä½¿ç±»å†…å®šä¹‰ä¹Ÿä¸å†…è”)&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;å¤šæ€æ€§è¦æ±‚åŠ¨æ€ç»‘å®š&lt;/strong&gt;ï¼Œè¿è¡Œæ—¶é€šè¿‡è™šå‡½æ•°è¡¨æŸ¥æ‰¾ 2. ç¼–è¯‘æœŸæ— æ³•ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œæ— æ³•åœ¨è°ƒç”¨ç‚¹å±•å¼€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„é€ å‡½æ•°/ææ„å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯ (ä½†éœ€è°¨æ…)&lt;/td&gt;
&lt;td&gt;1. è¯­æ³•ä¸Šæ»¡è¶³éšå¼å†…è”æ¡ä»¶ 2. ä½†å®é™…å¯èƒ½åŒ…å«ç¼–è¯‘å™¨æ’å…¥çš„å¤æ‚æ“ä½œï¼Œå†…è”å¯èƒ½ä¸ç”Ÿæ•ˆæˆ–å¯¼è‡´ä»£ç è†¨èƒ€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£è®¾è®¡é€»è¾‘"&gt;ğŸ” æ·±å…¥ç†è§£è®¾è®¡é€»è¾‘
&lt;/h3&gt;&lt;h4 id="-æ€§èƒ½ä¼˜å…ˆçš„å‡è®¾"&gt;âš™ï¸ æ€§èƒ½ä¼˜å…ˆçš„å‡è®¾
&lt;/h4&gt;&lt;p&gt;è¿™ä¸€è§„åˆ™çš„è®¾è®¡åŸºäºä¸€ä¸ªå¸¸è§çš„ç¼–ç¨‹å®è·µï¼šåœ¨ç±»å£°æ˜å†…éƒ¨ç›´æ¥å®šä¹‰çš„å‡½æ•°ï¼Œé€šå¸¸éƒ½æ˜¯æ¯”è¾ƒ&lt;strong&gt;çŸ­å°ã€ç®€å•&lt;/strong&gt;çš„æˆå‘˜å‡½æ•°ï¼ˆä¾‹å¦‚è·å–æˆ–è®¾ç½®æˆå‘˜å˜é‡çš„å‡½æ•°ï¼‰ã€‚è¿™ç±»å‡½æ•°æœ¬èº«å°±æ˜¯ä¸ºäº†é¿å…å‡½æ•°è°ƒç”¨çš„é¢å¤–å¼€é”€ï¼ˆå¦‚å‚æ•°å‹æ ˆã€æ ˆå¸§åˆ›å»ºä¸é”€æ¯ç­‰ï¼‰è€Œè®¾è®¡çš„ï¼Œå°†å®ƒä»¬éšå¼å†…è”å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ï¼Œè¿™ç¬¦åˆå†…è”ä¼˜åŒ–çš„åˆè¡·ã€‚ç¼–è¯‘å™¨è®¤ä¸ºï¼Œæ—¢ç„¶å¼€å‘è€…é€‰æ‹©å°†å‡½æ•°ä½“ç›´æ¥æ”¾åœ¨ç±»å®šä¹‰ä¸­ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½å¸Œæœ›å®ƒè¢«å†…è”å¤„ç†ã€‚&lt;/p&gt;
&lt;h4 id="-ç¼–è¯‘æ¨¡å‹ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™"&gt;ğŸ“š ç¼–è¯‘æ¨¡å‹ä¸ä¸€æ¬¡å®šä¹‰è§„åˆ™
&lt;/h4&gt;&lt;p&gt;C++ çš„ç¼–è¯‘æ¨¡å‹è¦æ±‚ï¼Œ&lt;strong&gt;å†…è”å‡½æ•°åœ¨æ¯ä¸ªä½¿ç”¨å®ƒçš„ç¿»è¯‘å•å…ƒä¸­éƒ½å¿…é¡»æœ‰å®Œå…¨ç›¸åŒçš„å®šä¹‰&lt;/strong&gt;ã€‚å°†å†…è”å‡½æ•°çš„å®šä¹‰ç›´æ¥æ”¾åœ¨å¤´æ–‡ä»¶ä¸­æ˜¯æ»¡è¶³è¿™ä¸€è¦æ±‚çš„å¸¸è§åšæ³•ã€‚å½“ä¸€ä¸ªå‡½æ•°åœ¨ç±»å£°æ˜å†…éƒ¨å®šä¹‰æ—¶ï¼Œå®ƒçš„å®šä¹‰ä¼šéšç€å¤´æ–‡ä»¶è¢«åŒ…å«åˆ°å„ä¸ªæºæ–‡ä»¶ä¸­ï¼Œè‡ªç„¶æ»¡è¶³äº†â€œå¯¹ç¼–è¯‘å™¨å¯è§â€çš„è¦æ±‚ï¼Œä»è€Œæ–¹ä¾¿ç¼–è¯‘å™¨åœ¨è°ƒç”¨ç‚¹è¿›è¡Œå†…è”å±•å¼€ã€‚å¦‚æœè¿™ç±»å‡½æ•°ä¸è¢«éšå¼å¤„ç†ä¸ºå†…è”ï¼Œåœ¨å¤šä¸ªæºæ–‡ä»¶åŒ…å«åŒä¸€ä¸ªå¤´æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šå¼•å‘é‡å¤å®šä¹‰çš„é“¾æ¥é”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id="-è™šå‡½æ•°çš„ä¾‹å¤–ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ è™šå‡½æ•°çš„ä¾‹å¤–ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;è™šå‡½æ•°çš„è¡Œä¸ºæ˜¯ç‰¹æ®Šçš„ã€‚å³ä½¿ä¸€ä¸ªè™šå‡½æ•°åœ¨ç±»å†…éƒ¨å®šä¹‰ï¼Œå®ƒé€šå¸¸&lt;strong&gt;ä¹Ÿä¸ä¼šè¢«å†…è”&lt;/strong&gt;ï¼ˆé™¤éæ˜¯é€šè¿‡å…·ä½“å¯¹è±¡è°ƒç”¨ï¼Œç¼–è¯‘å™¨èƒ½åœ¨ç¼–è¯‘æœŸç¡®å®šå…·ä½“ç±»å‹çš„æƒ…å†µï¼‰ã€‚è¿™æ˜¯å› ä¸ºè™šå‡½æ•°çš„æ ¸å¿ƒæœºåˆ¶æ˜¯&lt;strong&gt;è¿è¡Œæ—¶å¤šæ€&lt;/strong&gt;ï¼Œå…¶å…·ä½“è°ƒç”¨å“ªä¸ªå‡½æ•°æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡è™šå‡½æ•°è¡¨åŠ¨æ€å†³å®šçš„ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®å®šå‡½æ•°è°ƒç”¨çš„å…·ä½“ç›®æ ‡ï¼Œå› æ­¤æ— æ³•å°†å‡½æ•°ä½“ç›´æ¥æ’å…¥åˆ°è°ƒç”¨ç‚¹ï¼Œè¿™ä¸å†…è”çš„åŸºæœ¬å‰æç›¸æ‚–ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œè™½ç„¶å®ƒä»¬åœ¨è¯­æ³•ä¸Šç¬¦åˆéšå¼å†…è”çš„æ¡ä»¶ï¼Œä½†éœ€è¦ç‰¹åˆ«å°å¿ƒã€‚å› ä¸ºä»ä»£ç ä¸Šçœ‹å®ƒä»¬å¯èƒ½å¾ˆç®€å•ï¼Œç„¶è€Œç¼–è¯‘å™¨é€šå¸¸ä¼šåœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­â€œé»˜é»˜â€æ’å…¥è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ã€éé™æ€æˆå‘˜å˜é‡çš„æ„é€ å‡½æ•°ä»¥åŠè®¾ç½®è™šå‡½æ•°è¡¨æŒ‡é’ˆç­‰æ“ä½œã€‚å› æ­¤ï¼Œä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°å®é™…å¯èƒ½æ‰§è¡Œäº†å¤§é‡æ“ä½œã€‚å¦‚æœç›²ç›®å†…è”ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»£ç è†¨èƒ€ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸å®è·µå»ºè®®-1"&gt;ğŸ’ æ€»ç»“ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒC++ å°†ç±»å£°æ˜å†…å®šä¹‰çš„å‡½æ•°éšå¼å†…è”ï¼Œæ˜¯è¯­è¨€è®¾è®¡è€…åŸºäº&lt;strong&gt;å¸¸è§ä½¿ç”¨åœºæ™¯ã€æ€§èƒ½ä¼˜åŒ–å’Œç¼–è¯‘æ¨¡å‹çº¦æŸ&lt;/strong&gt;æ‰€åšçš„ä¸€ç§æƒè¡¡ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¾¿åˆ©ï¼Œä½†æˆ‘ä»¬ä¹Ÿéœ€è¦ç†è§£å…¶èƒŒåçš„é€»è¾‘å’Œä¾‹å¤–æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»…å°†&lt;strong&gt;çŸ­å°ã€é¢‘ç¹è°ƒç”¨&lt;/strong&gt;çš„éè™šå‡½æ•°å®šä¹‰åœ¨ç±»å†…éƒ¨ï¼Œä»¥åˆ©ç”¨éšå¼å†…è”çš„ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;è™šå‡½æ•°&lt;/strong&gt;æˆ–&lt;strong&gt;é€»è¾‘å¤æ‚ã€ä»£ç è¾ƒé•¿&lt;/strong&gt;çš„å‡½æ•°ï¼Œå³ä½¿å®ƒå¾ˆçŸ­ï¼Œä¹Ÿæœ€å¥½å°†å£°æ˜æ”¾åœ¨ç±»å†…éƒ¨ï¼Œè€Œå°†å®šä¹‰æ”¾åœ¨ç±»å®ç°æ–‡ä»¶ï¼ˆ.cppï¼‰ä¸­ï¼Œå¹¶æ˜¾å¼ä½¿ç”¨ &lt;code&gt;inline&lt;/code&gt;å…³é”®å­—ï¼ˆå¦‚æœéœ€è¦å†…è”çš„è¯ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£C++çš„è¿™ä¸€è®¾è®¡å†³ç­–ï¼&lt;/p&gt;
&lt;h2 id="å‹å…ƒ"&gt;å‹å…ƒ
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œåœ¨ç±»å¤–å®šä¹‰æˆå‘˜å‡½æ•°å’Œå‹å…ƒå‡½æ•°æ˜¯å¸¸è§çš„åšæ³•ï¼Œå°¤å…¶æ˜¯åœ¨é¡¹ç›®è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œè¿™æœ‰åŠ©äºä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§ã€‚è™½ç„¶ä¸¤è€…éƒ½åœ¨ç±»å¤–å®šä¹‰ï¼Œä½†å…¶è¯­æ³•å’Œè®¾è®¡æ„å›¾æœ‰æœ¬è´¨åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ç±»å¤–å®šä¹‰æˆå‘˜å‡½æ•°&lt;/th&gt;
&lt;th&gt;å‹å…ƒå‡½æ•°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»çš„ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯æˆå‘˜&lt;/td&gt;
&lt;td&gt;ç±»çš„â€œæœ‹å‹â€ï¼Œæ˜¯&lt;strong&gt;éæˆå‘˜å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®æƒé™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤©ç„¶æ‹¥æœ‰è®¿é—®è¯¥ç±»æ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜ï¼‰çš„æƒé™&lt;/td&gt;
&lt;td&gt;éœ€åœ¨ç±»å†…ç”¨ &lt;code&gt;friend&lt;/code&gt;å…³é”®å­—å£°æ˜ï¼Œä»¥è·å¾—è®¿é—®ç§æœ‰/ä¿æŠ¤æˆå‘˜çš„æƒé™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šä¹‰è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å€¼ç±»å‹ &lt;strong&gt;&lt;code&gt;ç±»å::å‡½æ•°å&lt;/code&gt;&lt;/strong&gt;(å‚æ•°åˆ—è¡¨) { å‡½æ•°ä½“ }&lt;/td&gt;
&lt;td&gt;è¿”å›å€¼ç±»å‹ &lt;strong&gt;&lt;code&gt;å‡½æ•°å&lt;/code&gt;&lt;/strong&gt;(å‚æ•°åˆ—è¡¨) { å‡½æ•°ä½“ }&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ç±»çš„å¯¹è±¡ï¼ˆæˆ–æŒ‡é’ˆ/å¼•ç”¨ï¼‰è°ƒç”¨ï¼š&lt;code&gt;obj.memberFunc()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åƒæ™®é€šå‡½æ•°ä¸€æ ·ç›´æ¥è°ƒç”¨ï¼š&lt;code&gt;friendFunc(obj)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éšå« &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡&lt;/td&gt;
&lt;td&gt;æ—  &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç±»å¤–å®šä¹‰æˆå‘˜å‡½æ•°"&gt;ğŸ› ï¸ ç±»å¤–å®šä¹‰æˆå‘˜å‡½æ•°
&lt;/h3&gt;&lt;p&gt;å°†æˆå‘˜å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰åˆ†ç¦»æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ã€‚å£°æ˜æ”¾åœ¨å¤´æ–‡ä»¶ï¼ˆ&lt;code&gt;.h&lt;/code&gt;æˆ– &lt;code&gt;.hpp&lt;/code&gt;ï¼‰ä¸­ï¼Œå®šä¹‰åˆ™æ”¾åœ¨å®ç°æ–‡ä»¶ï¼ˆ&lt;code&gt;.cpp&lt;/code&gt;ï¼‰ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯­æ³•è¦ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç±»ä½“å†…å£°æ˜å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç±»å¤–å®šä¹‰æ—¶ï¼Œå¿…é¡»åœ¨å‡½æ•°åå‰ä½¿ç”¨&lt;strong&gt;ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ &lt;code&gt;::&lt;/code&gt;&lt;/strong&gt;ï¼Œæ ¼å¼ä¸º &lt;code&gt;è¿”å›å€¼ç±»å‹ ç±»å::å‡½æ•°å(å‚æ•°åˆ—è¡¨) { å‡½æ•°ä½“ }&lt;/code&gt;ã€‚è¿™æ˜ç¡®æŒ‡å‡ºäº†è¯¥å‡½æ•°å±äºå“ªä¸ªç±»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// Student.h (å¤´æ–‡ä»¶ - ç±»å£°æ˜)
class Student {
private:
std::string name;
int score;
public:
// æˆå‘˜å‡½æ•°å£°æ˜
void setInfo(std::string n, int s);
void showInfo();
};
// Student.cpp (å®ç°æ–‡ä»¶ - ç±»å¤–å®šä¹‰æˆå‘˜å‡½æ•°)
#include &amp;#34;Student.h&amp;#34;
#include &amp;lt;iostream&amp;gt;
// ä½¿ç”¨ Student:: æ¥å®šä¹‰ setInfo å‡½æ•°
void Student::setInfo(std::string n, int s) {
name = n;
score = s;
}
// ä½¿ç”¨ Student:: æ¥å®šä¹‰ showInfo å‡½æ•°
void Student::showInfo() {
std::cout &amp;lt;&amp;lt; &amp;#34;Name: &amp;#34; &amp;lt;&amp;lt; name &amp;lt;&amp;lt; &amp;#34;, Score: &amp;#34; &amp;lt;&amp;lt; score &amp;lt;&amp;lt; std::endl;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å®šä¹‰ä¸ä½¿ç”¨å‹å…ƒå‡½æ•°"&gt;ğŸ¤ å®šä¹‰ä¸ä½¿ç”¨å‹å…ƒå‡½æ•°
&lt;/h3&gt;&lt;p&gt;å‹å…ƒå‡½æ•°ä¸æ˜¯ç±»çš„æˆå‘˜ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œä½†è¢«æˆäºˆäº†è®¿é—®æŸä¸ªç±»ç§æœ‰å’Œä¿æŠ¤æˆå‘˜çš„ç‰¹æ®Šæƒé™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯­æ³•è¦ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ç±»å†…éƒ¨å£°æ˜&lt;/strong&gt;ï¼šåœ¨ç±»ä½“å†…ä½¿ç”¨ &lt;code&gt;friend&lt;/code&gt;å…³é”®å­—å£°æ˜è¯¥å‡½æ•°ã€‚æ­¤å£°æ˜&lt;strong&gt;ä¸è§†ä¸ºè¯¥ç±»çš„æˆå‘˜å‡½æ•°&lt;/strong&gt;ï¼Œåªæ˜¯æˆäºˆè®¿é—®æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ç±»å¤–éƒ¨å®šä¹‰&lt;/strong&gt;ï¼šåƒå®šä¹‰æ™®é€šå…¨å±€å‡½æ•°ä¸€æ ·å®šä¹‰å‹å…ƒå‡½æ•°ï¼Œ&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ä½¿ç”¨ &lt;code&gt;ç±»å::&lt;/code&gt;å‰ç¼€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// Student.h
class Student {
private:
std::string name;
int score;
public:
Student(std::string n, int s) : name(n), score(s) {}
// å£°æ˜å…¨å±€å‡½æ•° compareScores ä¸º Student ç±»çš„å‹å…ƒ
friend bool compareScores(const Student&amp;amp; s1, const Student&amp;amp; s2);
};
// åœ¨ç±»å¤–å®šä¹‰å‹å…ƒå‡½æ•° - ä¸è¦ä½¿ç”¨ Student::
bool compareScores(const Student&amp;amp; s1, const Student&amp;amp; s2) {
// å› ä¸ºæ˜¯å‹å…ƒï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜ score
return s1.score &amp;gt; s2.score;
}
// main.cpp ä¸­ä½¿ç”¨
int main() {
Student alice(&amp;#34;Alice&amp;#34;, 90);
Student bob(&amp;#34;Bob&amp;#34;, 85);
if (compareScores(alice, bob)) { // åƒæ™®é€šå‡½æ•°ä¸€æ ·ç›´æ¥è°ƒç”¨
std::cout &amp;lt;&amp;lt; &amp;#34;Alice has a higher score.&amp;#34; &amp;lt;&amp;lt; std::endl;
}
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æˆå‘˜å‡½æ•°ä½œä¸ºå…¶ä»–ç±»çš„å‹å…ƒ&lt;/strong&gt;ï¼šä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ä¹Ÿå¯ä»¥æˆä¸ºå¦ä¸€ä¸ªç±»çš„å‹å…ƒã€‚è¿™æ—¶ï¼Œåœ¨å®šä¹‰è¯¥æˆå‘˜å‡½æ•°æ—¶ï¼Œ&lt;strong&gt;éœ€è¦&lt;/strong&gt;ä½¿ç”¨å…¶æ‰€å±ç±»çš„ç±»åå’Œä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Teacher; // å‰å‘å£°æ˜
class Student {
// ... åŒä¸Š ...
// å£°æ˜ Teacher ç±»çš„æˆå‘˜å‡½æ•° gradeStudent ä¸ºå‹å…ƒ
friend void Teacher::gradeStudent(Student&amp;amp; s, int newScore);
};
class Teacher {
public:
void gradeStudent(Student&amp;amp; s, int newScore);
};
// å®šä¹‰ Teacher çš„æˆå‘˜å‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ Teacher::
void Teacher::gradeStudent(Student&amp;amp; s, int newScore) {
s.score = newScore; // å› ä¸ºæ˜¯å‹å…ƒï¼Œå¯ä»¥è®¿é—® Student çš„ç§æœ‰æˆå‘˜ score
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ…ç”¨å‹å…ƒ&lt;/strong&gt;ï¼šå‹å…ƒæœºåˆ¶ç ´åäº†ç±»çš„å°è£…æ€§ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚é€šå¸¸åªåœ¨è¿ç®—ç¬¦é‡è½½æˆ–ä¸¤ä¸ªç±»ç´§å¯†åä½œç­‰ç‰¹å®šåœºæ™¯ä¸‹ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œè®°ä½æœ€æ ¸å¿ƒçš„åŒºåˆ«ï¼š&lt;strong&gt;å®šä¹‰ç±»å¤–æˆå‘˜å‡½æ•°è¦åŠ  &lt;code&gt;ç±»å::&lt;/code&gt;ï¼Œè€Œå®šä¹‰å‹å…ƒå‡½æ•°ï¼ˆä½œä¸ºéæˆå‘˜å‡½æ•°ï¼‰ä¸èƒ½åŠ &lt;/strong&gt;ã€‚å‰è€…æ˜¯ç±»è‡ªèº«çš„æ‰©å±•ï¼Œåè€…æ˜¯ç±»æˆäºˆç‰¹æƒçš„â€œå®¢äººâ€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„è§£é‡Šå’Œå¯¹æ¯”èƒ½å¸®åŠ©ä½ åœ¨ä»£ç ä¸­æ­£ç¡®åœ°ä½¿ç”¨å®ƒä»¬ï¼å¦‚æœä½ å¯¹ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="volatile"&gt;volatile
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ å’Œ Java ä¸­ï¼Œ&lt;code&gt;volatile&lt;/code&gt;å…³é”®å­—è™½ç„¶æ‹¼å†™ç›¸åŒï¼Œä½†å…¶è®¾è®¡ç›®çš„ã€ä¿è¯çš„è¯­ä¹‰ä»¥åŠåœ¨å¹¶å‘ç¼–ç¨‹ä¸­çš„è§’è‰²æœ‰ç€&lt;strong&gt;æ ¹æœ¬æ€§çš„åŒºåˆ«&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒå·®å¼‚ï¼Œä¸‹è¡¨è¿›è¡Œäº†æ¸…æ™°çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;C++ ä¸­çš„ &lt;code&gt;volatile&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Java ä¸­çš„ &lt;code&gt;volatile&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒè®¾è®¡ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘ŠçŸ¥ç¼–è¯‘å™¨å˜é‡å¯èƒ½è¢«ç¨‹åºå¤–éƒ¨å› ç´ ä¿®æ”¹ï¼Œ&lt;strong&gt;é˜²æ­¢ç¼–è¯‘å™¨ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒè®¾è®¡ï¼Œæä¾›&lt;strong&gt;è½»é‡çº§çš„çº¿ç¨‹é—´åŒæ­¥æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯è§æ€§ä¿è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒå¼±&lt;/strong&gt;ã€‚ä»…ç¡®ä¿æ¯æ¬¡è®¿é—®ä»å†…å­˜è¯»å–ï¼Œä¸è§£å†³ CPU ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºä¿è¯&lt;/strong&gt;ã€‚ç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½ç«‹å³å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰åºæ€§ä¿è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— ä¿è¯&lt;/strong&gt;ã€‚ä¸é˜²æ­¢ CPU çš„æŒ‡ä»¤é‡æ’åºã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ‰ä¿è¯&lt;/strong&gt;ã€‚ç¦æ­¢ç¼–è¯‘å™¨/CPU å¯¹ &lt;code&gt;volatile&lt;/code&gt;å˜é‡çš„æ“ä½œè¿›è¡Œé‡æ’åºï¼Œå»ºç«‹ &lt;strong&gt;happens-before&lt;/strong&gt; å…³ç³»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§ä¿è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œå…¨ä¸ä¿è¯&lt;/strong&gt;ã€‚å¯¹ &lt;code&gt;volatile&lt;/code&gt;å˜é‡çš„éåŸå­æ“ä½œï¼ˆå¦‚ &lt;code&gt;i++&lt;/code&gt;ï¼‰ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯å•ä¸ªè¯»/å†™æ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ï¼Œä½†ä¸ä¿è¯å¤åˆæ“ä½œï¼ˆå¦‚ &lt;code&gt;i++&lt;/code&gt;ï¼‰çš„åŸå­æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…å­˜æ˜ å°„ç¡¬ä»¶å¯„å­˜å™¨ã€ä¿¡å·å¤„ç†å‡½æ•°ã€ä¸ &lt;code&gt;setjmp&lt;/code&gt;/&lt;code&gt;longjmp&lt;/code&gt;é…åˆä½¿ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;ç”¨ä½œçº¿ç¨‹é—´é€šä¿¡çš„&lt;strong&gt;çŠ¶æ€æ ‡å¿—ä½&lt;/strong&gt;ã€å®ç°&lt;strong&gt;åŒé‡æ£€æŸ¥é”å®šå•ä¾‹æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå·®å¼‚è¯¦è§£-1"&gt;ğŸ’¡ æ ¸å¿ƒå·®å¼‚è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-è®¾è®¡å“²å­¦ä¸å†…å­˜å±éšœ"&gt;&lt;strong&gt;1. è®¾è®¡å“²å­¦ä¸å†…å­˜å±éšœ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ä¸¤è€…çš„æ ¹æœ¬åŒºåˆ«æºäºå…¶è®¾è®¡ç›®æ ‡å’Œå®ç°æœºåˆ¶çš„ä¸åŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;C++ &lt;code&gt;volatile&lt;/code&gt;&lt;/strong&gt; ä¸»è¦æ˜¯ä¸€ä¸ªç»™&lt;strong&gt;ç¼–è¯‘å™¨&lt;/strong&gt;çš„æŒ‡ä»¤ã€‚å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™ä¸ªå˜é‡çš„å€¼å¯èƒ½ä¼šåœ¨ä½ ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ”¹å˜ï¼Œæ‰€ä»¥ä¸è¦åšä»»ä½•ç¼“å­˜æˆ–æ¿€è¿›çš„ä¼˜åŒ–ã€‚â€ å®ƒçš„ä½œç”¨ä¸»è¦åœç•™åœ¨ç¼–è¯‘é˜¶æ®µï¼Œé˜²æ­¢ç¼–è¯‘å™¨å°†å˜é‡ç¼“å­˜åœ¨å¯„å­˜å™¨ä¸­ã€‚åœ¨åº•å±‚ï¼Œå®ƒé€šå¸¸ä¸åŒ…å«å¼ºå¤§çš„&lt;strong&gt;å†…å­˜å±éšœ&lt;/strong&gt;ï¼Œå› æ­¤æ— æ³•ä¿è¯åœ¨ä¸åŒ CPU æ ¸å¿ƒé—´çš„ç¼“å­˜ä¸€è‡´æ€§ï¼Œä¹Ÿæ— æ³•é˜²æ­¢ CPU å±‚é¢çš„æŒ‡ä»¤é‡æ’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Java &lt;code&gt;volatile&lt;/code&gt;&lt;/strong&gt; æ˜¯ Java å†…å­˜æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ç›´æ¥ä¸º&lt;strong&gt;å¤šçº¿ç¨‹é€šä¿¡&lt;/strong&gt;è®¾è®¡çš„ã€‚å½“å†™å…¥ä¸€ä¸ª &lt;code&gt;volatile&lt;/code&gt;å˜é‡æ—¶ï¼ŒJava è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¼šæ’å…¥ä¸€ä¸ª&lt;strong&gt;å†™å±éšœæŒ‡ä»¤&lt;/strong&gt;ï¼›å½“è¯»å–æ—¶ï¼Œä¼šæ’å…¥ä¸€ä¸ª**è¯»å±éšœæŒ‡ä»¤â€ã€‚è¿™äº›å†…å­˜å±éšœç¡®ä¿äº†ï¼š1ï¼‰å†™å…¥æ—¶ï¼Œæ‰€æœ‰ä¿®æ”¹èƒ½ç«‹å³åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼›2ï¼‰è¯»å–æ—¶ï¼Œèƒ½ç›´æ¥ä»ä¸»å†…å­˜è·å–æœ€æ–°å€¼ï¼›3ï¼‰åœ¨å±éšœä¸¤è¾¹çš„æŒ‡ä»¤ä¸ä¼šå‘ç”Ÿé‡æ’åºã€‚è¿™ä¸º &lt;code&gt;volatile&lt;/code&gt;å˜é‡æä¾›äº†å¼ºå¤§çš„å¯è§æ€§å’Œæœ‰åºæ€§ä¿è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-åŸå­æ€§ä¸å¤åˆæ“ä½œ"&gt;&lt;strong&gt;2. åŸå­æ€§ä¸å¤åˆæ“ä½œ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿åœ¨ Java ä¸­ï¼Œ&lt;code&gt;volatile&lt;/code&gt;ä¹Ÿ&lt;strong&gt;ä¸èƒ½ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;count++&lt;/code&gt;è¿™ä¸ªæ“ä½œï¼ˆåŒ…å«è¯»å–ã€åŠ 1ã€å†™å…¥ä¸‰ä¸ªæ­¥éª¤ï¼‰ï¼Œå³ä½¿ &lt;code&gt;count&lt;/code&gt;è¢«å£°æ˜ä¸º &lt;code&gt;volatile&lt;/code&gt;ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä»ç„¶æ˜¯ä¸å®‰å…¨çš„ã€‚å› ä¸ºä¸¤ä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è¯»å–åˆ°ç›¸åŒçš„å€¼ï¼Œåˆ†åˆ«åŠ 1åå†™å›ï¼Œå¯¼è‡´æœ€ç»ˆç»“æœæ¯”é¢„æœŸå°‘1ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ &lt;strong&gt;C++&lt;/strong&gt; ä¸­ï¼Œå¯¹äºéœ€è¦åŸå­æ€§çš„å…±äº«å˜é‡ï¼Œåº”ä½¿ç”¨ &lt;code&gt;std::atomic&lt;/code&gt;æ¨¡æ¿åº“ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;strong&gt;Java&lt;/strong&gt; ä¸­ï¼Œåº”ä½¿ç”¨ &lt;code&gt;java.util.concurrent.atomic&lt;/code&gt;åŒ…ä¸‹çš„åŸå­ç±»ï¼ˆå¦‚ &lt;code&gt;AtomicInteger&lt;/code&gt;ï¼‰ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;synchronized&lt;/code&gt;å…³é”®å­—è¿›è¡ŒåŒæ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®é€‰æ‹©"&gt;ğŸ› ï¸ å¦‚ä½•æ­£ç¡®é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;äº†è§£å·®å¼‚åï¼Œå…³é”®åœ¨äºæ­£ç¡®ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h4 id="c-ä¸­çš„æ­£ç¡®å§¿åŠ¿"&gt;&lt;strong&gt;C++ ä¸­çš„æ­£ç¡®å§¿åŠ¿&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;åœ¨ç°ä»£ C++ å¤šçº¿ç¨‹å¼€å‘ä¸­ï¼Œ&lt;strong&gt;åº”é¿å…ä½¿ç”¨ &lt;code&gt;volatile&lt;/code&gt;è¿›è¡Œçº¿ç¨‹åŒæ­¥&lt;/strong&gt;ã€‚å®ƒå¸¦æ¥çš„æ›´å¤šæ˜¯è¯¯è§£è€Œéå¸®åŠ©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦çº¿ç¨‹å®‰å…¨çš„å…±äº«å˜é‡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;&lt;code&gt;std::atomic&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒæä¾›äº†çœŸæ­£çš„åŸå­æ€§ã€å¯è§æ€§å’Œé¡ºåºæ€§ä¿è¯ï¼Œæ˜¯ç°ä»£ C++ å¹¶å‘ç¼–ç¨‹çš„é¦–é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœŸæ­£çš„ä¸´ç•ŒåŒºä¿æŠ¤&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;&lt;code&gt;std::mutex&lt;/code&gt;&lt;/strong&gt; ç­‰äº’æ–¥é”ï¼Œæ¥ä¿æŠ¤éœ€è¦å¤æ‚æ“ä½œçš„ä»£ç æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;volatile&lt;/code&gt;åº”ä¸¥æ ¼ä¿ç•™åœ¨å…¶ä¼ ç»Ÿé¢†åŸŸï¼Œå¦‚&lt;strong&gt;åµŒå…¥å¼ç³»ç»Ÿå¼€å‘ã€è®¾å¤‡é©±åŠ¨ç¼–ç¨‹&lt;/strong&gt;ç­‰ï¼Œç”¨äºè®¿é—®å¯èƒ½è¢«ç¡¬ä»¶æ”¹å˜çš„å†…å­˜æ˜ å°„å¯„å­˜å™¨ã€‚&lt;/p&gt;
&lt;h4 id="java-ä¸­çš„é€‚ç”¨åœºæ™¯"&gt;&lt;strong&gt;Java ä¸­çš„é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Java çš„ &lt;code&gt;volatile&lt;/code&gt;æ˜¯ä¸€ç§&lt;strong&gt;è½»é‡çº§çš„åŒæ­¥æœºåˆ¶&lt;/strong&gt;ï¼Œé€‚ç”¨äºç‰¹å®šçš„ç®€å•åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€æ ‡å¿—ä½&lt;/strong&gt;ï¼šä¸€ä¸ªçº¿ç¨‹æ£€æŸ¥ &lt;code&gt;volatile boolean running&lt;/code&gt;ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å°†å…¶è®¾ç½®ä¸º &lt;code&gt;false&lt;/code&gt;ä»¥é€šçŸ¥åœæ­¢ã€‚è¿™ç§ç®€å•çš„â€œä¸€å†™å¤šè¯»â€åœºæ™¯æ˜¯ &lt;code&gt;volatile&lt;/code&gt;çš„ç»å…¸ç”¨ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒé‡æ£€æŸ¥é”å®šä¸å•ä¾‹æ¨¡å¼&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;code&gt;volatile&lt;/code&gt;çš„æœ‰åºæ€§ä¿è¯ï¼Œé˜²æ­¢å¯¹è±¡åˆå§‹åŒ–æ—¶å‘ç”Ÿé‡æ’åºï¼Œç¡®ä¿å…¶ä»–çº¿ç¨‹çœ‹åˆ°çš„æ˜¯å®Œå…¨æ„é€ å¥½çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†å¯¹äºåƒâ€œæ£€æŸ¥-æ›´æ–°â€è¿™æ ·çš„å¤åˆæ“ä½œï¼Œ&lt;code&gt;volatile&lt;/code&gt;æ— èƒ½ä¸ºåŠ›ï¼Œä»éœ€ä½¿ç”¨é”æˆ–åŸå­å˜é‡ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå¯ä»¥æŠŠè¿™ä¸¤ä¸ªå…³é”®å­—æƒ³è±¡æˆåç§°ç›¸åŒä½†åŠŸèƒ½å®Œå…¨ä¸åŒçš„å·¥å…·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;C++ çš„ &lt;code&gt;volatile&lt;/code&gt;&lt;/strong&gt; åƒæ˜¯ä¸€å— &lt;strong&gt;â€œè¯·å‹¿ä¼˜åŒ–â€&lt;/strong&gt; çš„å‘Šç¤ºç‰Œï¼Œä¸»è¦ç”¨æ¥æé†’ç¼–è¯‘å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Java çš„ &lt;code&gt;volatile&lt;/code&gt;&lt;/strong&gt; åˆ™åƒæ˜¯ä¸€ä¸ªå°å‹çš„ &lt;strong&gt;â€œçº¿ç¨‹é—´æ¶ˆæ¯å¹¿æ’­ç«™â€&lt;/strong&gt;ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½è¿…é€Ÿè¢«æ‰€æœ‰å…¶ä»–çº¿ç¨‹çŸ¥æ™“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åœ¨ C++ å’Œ Java ç¼–ç¨‹ä¸­ï¼Œå‡†ç¡®åœ°ç†è§£å¹¶æ­£ç¡®åœ°ä½¿ç”¨ &lt;code&gt;volatile&lt;/code&gt;å…³é”®å­—ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="if-åˆå§‹åŒ–"&gt;if åˆå§‹åŒ–
&lt;/h2&gt;&lt;p&gt;è¿™æ®µä»£ç ä¸­ &lt;code&gt;if&lt;/code&gt;è¯­å¥çš„è¡Œä¸ºæ˜¯ C++ ä¸­çš„ä¸€ä¸ªç‰¹æ®Šè¯­æ³•ç‰¹æ€§ï¼Œç§°ä¸º &lt;strong&gt;&lt;code&gt;if&lt;/code&gt;è¯­å¥ä¸­çš„åˆå§‹åŒ–å£°æ˜&lt;/strong&gt;ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šå®ƒçš„å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;h2 id="-è¯­æ³•è§£æ"&gt;ğŸ” è¯­æ³•è§£æ
&lt;/h2&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)) {
da-&amp;gt;fooA(); // ç¡®ä¿ b çœŸæ­£æŒ‡å‘ DerivedA
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ª &lt;code&gt;if&lt;/code&gt;è¯­å¥å®é™…ä¸Šåšäº†ä¸‰ä»¶äº‹æƒ…ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å£°æ˜å¹¶åˆå§‹åŒ–å˜é‡&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;if&lt;/code&gt;æ¡ä»¶éƒ¨åˆ†å£°æ˜ &lt;code&gt;DerivedA* da&lt;/code&gt;å˜é‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œç±»å‹è½¬æ¢&lt;/strong&gt;ï¼šç”¨ &lt;code&gt;dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)&lt;/code&gt;åˆå§‹åŒ–è¯¥å˜é‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶åˆ¤æ–­&lt;/strong&gt;ï¼šå°†è½¬æ¢ç»“æœä½œä¸ºå¸ƒå°”æ¡ä»¶è¿›è¡Œåˆ¤æ–­&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-æ‰§è¡Œæµç¨‹"&gt;âš™ï¸ æ‰§è¡Œæµç¨‹
&lt;/h2&gt;&lt;p&gt;ä»£ç çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä¼ªä»£ç è¡¨ç¤ºæ‰§è¡Œé€»è¾‘
DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b); // 1. å£°æ˜å¹¶è½¬æ¢
if (da != nullptr) { // 2. æ£€æŸ¥æ˜¯å¦ä¸º null
da-&amp;gt;fooA(); // 3. æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œ
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-dynamic_castçš„å…³é”®ä½œç”¨"&gt;ğŸ¯ &lt;code&gt;dynamic_cast&lt;/code&gt;çš„å…³é”®ä½œç”¨
&lt;/h2&gt;&lt;p&gt;åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œ&lt;code&gt;dynamic_cast&lt;/code&gt;èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥&lt;/strong&gt;ï¼š&lt;code&gt;dynamic_cast&lt;/code&gt;åœ¨è¿è¡Œæ—¶æ£€æŸ¥ &lt;code&gt;b&lt;/code&gt;æ˜¯å¦çœŸçš„æŒ‡å‘ &lt;code&gt;DerivedA&lt;/code&gt;ç±»å‹çš„å¯¹è±¡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨è½¬æ¢&lt;/strong&gt;ï¼šå¦‚æœè½¬æ¢æˆåŠŸï¼Œè¿”å›æœ‰æ•ˆçš„ &lt;code&gt;DerivedA*&lt;/code&gt;æŒ‡é’ˆï¼›å¦‚æœå¤±è´¥ï¼Œè¿”å› &lt;code&gt;nullptr&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ€æ”¯æŒ&lt;/strong&gt;ï¼šéœ€è¦åŸºç±»æœ‰è™šå‡½æ•°ï¼ˆè¿™é‡Œ &lt;code&gt;Base&lt;/code&gt;æœ‰è™šææ„å‡½æ•°ï¼Œæ»¡è¶³æ¡ä»¶ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-å®Œæ•´ä»£ç åˆ†æ"&gt;ğŸ“ å®Œæ•´ä»£ç åˆ†æ
&lt;/h2&gt;&lt;p&gt;è®©æˆ‘ä»¬åˆ†ææ•´ä¸ª &lt;code&gt;process&lt;/code&gt;å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void process(Base* b) {
// ç¬¬ä¸€æ¬¡å°è¯•è½¬æ¢ï¼šBase* â†’ DerivedA*
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)) {
da-&amp;gt;fooA(); // åªæœ‰ b ç¡®å®æŒ‡å‘ DerivedA æ—¶æ‰æ‰§è¡Œ
}
// ç¬¬äºŒæ¬¡å°è¯•è½¬æ¢ï¼šBase* â†’ DerivedB*
else if (DerivedB* db = dynamic_cast&amp;lt;DerivedB*&amp;gt;(b)) {
db-&amp;gt;fooB(); // åªæœ‰ b ç¡®å®æŒ‡å‘ DerivedB æ—¶æ‰æ‰§è¡Œ
}
// å¦‚æœä¸¤æ¬¡è½¬æ¢éƒ½å¤±è´¥ï¼Œä»€ä¹ˆéƒ½ä¸åš
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-å˜é‡ä½œç”¨åŸŸ"&gt;ğŸ”„ å˜é‡ä½œç”¨åŸŸ
&lt;/h2&gt;&lt;p&gt;è¿™ç§è¯­æ³•çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯&lt;strong&gt;å˜é‡ä½œç”¨åŸŸé™å®šåœ¨ &lt;code&gt;if&lt;/code&gt;è¯­å¥å†…&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void process(Base* b) {
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)) {
da-&amp;gt;fooA(); // da åœ¨æ­¤ä½œç”¨åŸŸå†…æœ‰æ•ˆ
}
// da åœ¨æ­¤å¤„å·²ç»è¶…å‡ºä½œç”¨åŸŸï¼Œä¸å¯è®¿é—®
if (DerivedB* db = dynamic_cast&amp;lt;DerivedB*&amp;gt;(b)) {
db-&amp;gt;fooB(); // db åœ¨æ­¤ä½œç”¨åŸŸå†…æœ‰æ•ˆ
}
// db åœ¨æ­¤å¤„å·²ç»è¶…å‡ºä½œç”¨åŸŸï¼Œä¸å¯è®¿é—®
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-è¿™ç§å†™æ³•çš„ä¼˜åŠ¿"&gt;ğŸ’¡ è¿™ç§å†™æ³•çš„ä¼˜åŠ¿
&lt;/h2&gt;&lt;p&gt;è¿™ç§è¯­æ³•æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç ç®€æ´&lt;/strong&gt;ï¼šå°†å£°æ˜ã€åˆå§‹åŒ–å’Œæ¡ä»¶åˆ¤æ–­åˆå¹¶åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸæ§åˆ¶&lt;/strong&gt;ï¼šå˜é‡åªåœ¨éœ€è¦çš„èŒƒå›´å†…æœ‰æ•ˆï¼Œé¿å…å‘½åæ±¡æŸ“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å›¾æ¸…æ™°&lt;/strong&gt;ï¼šæ˜ç¡®è¡¨è¾¾&amp;quot;å¦‚æœè½¬æ¢æˆåŠŸï¼Œåˆ™ä½¿ç”¨è½¬æ¢ç»“æœ&amp;quot;çš„é€»è¾‘&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šç¡®ä¿åªæœ‰åœ¨è½¬æ¢æˆåŠŸçš„æƒ…å†µä¸‹æ‰ä½¿ç”¨æŒ‡é’ˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨è¿™ç§è¯­æ³•æ—¶éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å˜é‡ç”Ÿå‘½å‘¨æœŸä»…é™äº &lt;code&gt;if&lt;/code&gt;è¯­å¥å—å†…&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨è½¬æ¢ç»“æœï¼Œåº”è¯¥åœ¨å¤–é¢å£°æ˜å˜é‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dynamic_cast&lt;/code&gt;æœ‰ä¸€å®šçš„è¿è¡Œæ—¶å¼€é”€ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯è¦è°¨æ…ä½¿ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-æ€»ç»“-13"&gt;ğŸ¯ æ€»ç»“
&lt;/h2&gt;&lt;p&gt;è¿™ç§ &lt;code&gt;if (Type var = expression)&lt;/code&gt;çš„è¯­æ³•æ˜¯ C++ çš„ä¸€ä¸ªä¾¿åˆ©ç‰¹æ€§ï¼Œå®ƒç»“åˆäº†å˜é‡å£°æ˜ã€åˆå§‹åŒ–å’Œæ¡ä»¶åˆ¤æ–­ï¼Œç‰¹åˆ«é€‚åˆç”¨äºéœ€è¦ç±»å‹æ£€æŸ¥åæ‰§è¡Œçš„åœºæ™¯ï¼Œå¦‚è¿™é‡Œçš„ &lt;code&gt;dynamic_cast&lt;/code&gt;ç±»å‹å®‰å…¨è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ä¼šè¿›å…¥&lt;/strong&gt;ã€‚å½“ &lt;code&gt;dynamic_cast&lt;/code&gt;å¤±è´¥è¿”å› &lt;code&gt;nullptr&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;if&lt;/code&gt;è¯­å¥&lt;strong&gt;ä¸ä¼š&lt;/strong&gt;è¿›å…¥å†…éƒ¨ä»£ç å—ã€‚&lt;/p&gt;
&lt;h2 id="-åŸå› åˆ†æ"&gt;ğŸ” åŸå› åˆ†æ
&lt;/h2&gt;&lt;p&gt;è®©æˆ‘ä»¬åˆ†æè¿™ä¸ªæ¡ä»¶åˆ¤æ–­çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)) {
// è¿™é‡Œçš„ä»£ç åªæœ‰åœ¨æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œ
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="æ‰§è¡Œè¿‡ç¨‹åˆ†è§£"&gt;æ‰§è¡Œè¿‡ç¨‹åˆ†è§£ï¼š
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èµ‹å€¼æ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶åˆ¤æ–­&lt;/strong&gt;ï¼šå°† &lt;code&gt;da&lt;/code&gt;çš„å€¼ä½œä¸ºå¸ƒå°”æ¡ä»¶è¿›è¡Œåˆ¤æ–­&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="å¸ƒå°”è½¬æ¢è§„åˆ™"&gt;å¸ƒå°”è½¬æ¢è§„åˆ™ï¼š
&lt;/h3&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼ŒæŒ‡é’ˆç±»å‹çš„å¸ƒå°”è½¬æ¢è§„åˆ™æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæŒ‡é’ˆ&lt;strong&gt;ä¸æ˜¯ &lt;code&gt;nullptr&lt;/code&gt;&lt;/strong&gt; â†’ è½¬æ¢ä¸º &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœæŒ‡é’ˆ&lt;strong&gt;æ˜¯ &lt;code&gt;nullptr&lt;/code&gt;&lt;/strong&gt; â†’ è½¬æ¢ä¸º &lt;code&gt;false&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-å…·ä½“åœºæ™¯æ¼”ç¤º"&gt;ğŸ“Š å…·ä½“åœºæ™¯æ¼”ç¤º
&lt;/h2&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;Base* basePtr = new DerivedA(); // æŒ‡å‘ DerivedA
Base* basePtr2 = new DerivedB(); // æŒ‡å‘ DerivedB
Base* basePtr3 = nullptr; // ç©ºæŒ‡é’ˆ
// åœºæ™¯1ï¼šæˆåŠŸè½¬æ¢
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(basePtr)) {
// è¿›å…¥è¿™é‡Œï¼šda ä¸æ˜¯ nullptrï¼Œæ¡ä»¶ä¸º true
da-&amp;gt;fooA(); // å®‰å…¨è°ƒç”¨
}
// åœºæ™¯2ï¼šå¤±è´¥è½¬æ¢
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(basePtr2)) {
// ä¸ä¼šè¿›å…¥è¿™é‡Œï¼šda æ˜¯ nullptrï¼Œæ¡ä»¶ä¸º false
// da-&amp;gt;fooA(); // è¿™è¡Œä»£ç ä¸ä¼šæ‰§è¡Œ
}
// åœºæ™¯3ï¼šç©ºæŒ‡é’ˆè½¬æ¢
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(basePtr3)) {
// ä¸ä¼šè¿›å…¥è¿™é‡Œï¼šda æ˜¯ nullptrï¼Œæ¡ä»¶ä¸º false
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-å®‰å…¨æœºåˆ¶"&gt;ğŸ¯ å®‰å…¨æœºåˆ¶
&lt;/h2&gt;&lt;p&gt;è¿™æ­£æ˜¯ &lt;code&gt;dynamic_cast&lt;/code&gt;çš„è®¾è®¡ç›®çš„ä¹‹ä¸€â€”â€”&lt;strong&gt;æä¾›å®‰å…¨çš„è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void process(Base* b) {
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)) {
// åªæœ‰ç¡®è®¤ b æŒ‡å‘ DerivedA æ—¶æ‰æ‰§è¡Œ
da-&amp;gt;fooA(); // ç»å¯¹å®‰å…¨ï¼Œä¸ä¼šå‡ºç°æœªå®šä¹‰è¡Œä¸º
}
// å¦‚æœè½¬æ¢å¤±è´¥ï¼Œç›´æ¥è·³è¿‡ï¼Œé¿å…å±é™©æ“ä½œ
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-å¯¹æ¯”å±é™©çš„åšæ³•"&gt;âš ï¸ å¯¹æ¯”å±é™©çš„åšæ³•
&lt;/h2&gt;&lt;p&gt;å¦‚æœæ²¡æœ‰ &lt;code&gt;dynamic_cast&lt;/code&gt;çš„ä¿æŠ¤ï¼Œç›´æ¥è¿›è¡Œå¼ºåˆ¶è½¬æ¢ä¼šå¾ˆå±é™©ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å±é™©çš„åšæ³•ï¼
void unsafeProcess(Base* b) {
DerivedA* da = (DerivedA*)b; // å¼ºåˆ¶è½¬æ¢ï¼Œä¸æ£€æŸ¥ç±»å‹
da-&amp;gt;fooA(); // å¦‚æœ b ä¸æ˜¯ DerivedAï¼Œå¯èƒ½å¯¼è‡´å´©æºƒæˆ–æœªå®šä¹‰è¡Œä¸º
}
// å®‰å…¨çš„åšæ³• âœ“
void safeProcess(Base* b) {
if (DerivedA* da = dynamic_cast&amp;lt;DerivedA*&amp;gt;(b)) {
da-&amp;gt;fooA(); // åªåœ¨ç±»å‹æ­£ç¡®æ—¶æ‰§è¡Œ
}
// è½¬æ¢å¤±è´¥æ—¶å®‰å…¨åœ°è·³è¿‡
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-æ€»ç»“-14"&gt;ğŸ’¡ æ€»ç»“
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤±è´¥è¿”å› &lt;code&gt;nullptr&lt;/code&gt;&lt;/strong&gt; â†’ &lt;strong&gt;æ¡ä»¶ä¸º &lt;code&gt;false&lt;/code&gt;&lt;/strong&gt; â†’ &lt;strong&gt;ä¸è¿›å…¥ &lt;code&gt;if&lt;/code&gt;å†…éƒ¨&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;è¿™æ˜¯ &lt;code&gt;dynamic_cast&lt;/code&gt;çš„å®‰å…¨æœºåˆ¶ï¼Œé˜²æ­¢å¯¹é”™è¯¯ç±»å‹çš„å¯¹è±¡è¿›è¡Œæ“ä½œ&lt;/li&gt;
&lt;li&gt;ä¿è¯äº†ä»£ç çš„&lt;strong&gt;ç±»å‹å®‰å…¨æ€§&lt;/strong&gt;ï¼Œé¿å…äº†è¿è¡Œæ—¶é”™è¯¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§è®¾è®¡ä½¿å¾— &lt;code&gt;dynamic_cast&lt;/code&gt;æˆä¸ºå¤„ç†å¤šæ€ç±»å‹è½¬æ¢æ—¶æœ€å®‰å…¨çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2 id="å¸¸é‡æŒ‡é’ˆ--æŒ‡é’ˆå¸¸é‡"&gt;å¸¸é‡æŒ‡é’ˆ &amp;amp; æŒ‡é’ˆå¸¸é‡
&lt;/h2&gt;&lt;p&gt;å¥½çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸ä¸”å®¹æ˜“æ··æ·†çš„C++é¢è¯•é¢˜ã€‚æˆ‘ä»¬æ¥è¯¦ç»†å¯¹æ¯”ä¸€ä¸‹&lt;strong&gt;å¸¸é‡æŒ‡é’ˆï¼ˆPointer to Constantï¼‰&lt;strong&gt;å’Œ&lt;/strong&gt;æŒ‡é’ˆå¸¸é‡ï¼ˆConstant Pointerï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒåŒºåˆ«åœ¨äºï¼š&lt;code&gt;const&lt;/code&gt;ä¿®é¥°çš„æ˜¯&lt;strong&gt;æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®&lt;/strong&gt;ï¼Œè¿˜æ˜¯&lt;strong&gt;æŒ‡é’ˆæœ¬èº«&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="1-å¸¸é‡æŒ‡é’ˆpointer-to-constant"&gt;1. å¸¸é‡æŒ‡é’ˆï¼ˆPointer to Constantï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹æ˜¯å¸¸é‡ï¼Œä¸å¯é€šè¿‡è¯¥æŒ‡é’ˆä¿®æ”¹ï¼Œä½†æŒ‡é’ˆæœ¬èº«å¯ä»¥æŒ‡å‘åˆ«çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯­æ³•å½¢å¼&lt;/strong&gt;ï¼š&lt;code&gt;const&lt;/code&gt;åœ¨ç±»å‹ä¹‹å‰æˆ–ä¹‹åï¼Œä½†éƒ½åœ¨ &lt;code&gt;*&lt;/code&gt;ä¹‹å‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;const int* ptr;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;int const* ptr;&lt;/code&gt;(è¿™ä¸¤ç§å†™æ³•å®Œå…¨ç­‰ä»·)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å‘çš„æ•°æ®&lt;/strong&gt;ï¼šæ˜¯å¸¸é‡ï¼Œä¸å¯ä¿®æ”¹ï¼ˆ&lt;code&gt;*ptr = 10;&lt;/code&gt;âŒ ç¼–è¯‘é”™è¯¯ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡é’ˆæœ¬èº«&lt;/strong&gt;ï¼šä¸æ˜¯å¸¸é‡ï¼Œå¯ä»¥é‡æ–°æŒ‡å‘ï¼ˆ&lt;code&gt;ptr = &amp;amp;other_value;&lt;/code&gt;âœ…ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;è®°å¿†å£è¯€&lt;/strong&gt;ï¼š&lt;strong&gt;â€œå¸¸é‡æŒ‡é’ˆâ€å¼ºè°ƒçš„æ˜¯â€œæŒ‡å‘å¸¸é‡â€çš„æŒ‡é’ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int a = 10;
int b = 20;
// å£°æ˜ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆ
const int* ptr = &amp;amp;a;
// âœ… æ­£ç¡®ï¼šæŒ‡é’ˆæœ¬èº«å¯ä»¥é‡æ–°æŒ‡å‘
ptr = &amp;amp;b;
// âŒ é”™è¯¯ï¼šä¸èƒ½é€šè¿‡pträ¿®æ”¹å®ƒæŒ‡å‘çš„æ•°æ®
// *ptr = 30; // Compilation Error!
// æ³¨æ„ï¼šaæœ¬èº«ä¸æ˜¯å¸¸é‡ï¼Œå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ä¿®æ”¹
a = 30; // âœ… æ­£ç¡®
cout &amp;lt;&amp;lt; *ptr; // ç°åœ¨è¾“å‡º30
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦ä¼ é€’ä¸€ä¸ªæŒ‡é’ˆç»™å‡½æ•°ï¼Œä½†å¸Œæœ›å‡½æ•°ä¸ä¼šé€šè¿‡è¯¥æŒ‡é’ˆä¿®æ”¹åŸå§‹æ•°æ®æ—¶ï¼ˆä¾‹å¦‚ï¼Œåªè¯»çš„å‡½æ•°å‚æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="2-æŒ‡é’ˆå¸¸é‡constant-pointer"&gt;2. æŒ‡é’ˆå¸¸é‡ï¼ˆConstant Pointerï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šæŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡ï¼Œä¸€æ—¦åˆå§‹åŒ–åå°±ä¸èƒ½å†æŒ‡å‘å…¶ä»–åœ°å€ï¼Œä½†å¯ä»¥é€šè¿‡å®ƒä¿®æ”¹æ‰€æŒ‡å‘çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯­æ³•å½¢å¼&lt;/strong&gt;ï¼š&lt;code&gt;const&lt;/code&gt;åœ¨ &lt;code&gt;*&lt;/code&gt;ä¹‹åã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;int* const ptr;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å‘çš„æ•°æ®&lt;/strong&gt;ï¼šä¸æ˜¯å¸¸é‡ï¼Œå¯ä»¥ä¿®æ”¹ï¼ˆ&lt;code&gt;*ptr = 10;&lt;/code&gt;âœ…ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡é’ˆæœ¬èº«&lt;/strong&gt;ï¼šæ˜¯å¸¸é‡ï¼Œä¸å¯é‡æ–°æŒ‡å‘ï¼ˆ&lt;code&gt;ptr = &amp;amp;other_value;&lt;/code&gt;âŒ ç¼–è¯‘é”™è¯¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;è®°å¿†å£è¯€&lt;/strong&gt;ï¼š&lt;strong&gt;â€œæŒ‡é’ˆå¸¸é‡â€å¼ºè°ƒçš„æ˜¯â€œæŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int a = 10;
int b = 20;
// å£°æ˜ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡
int* const ptr = &amp;amp;a;
// âœ… æ­£ç¡®ï¼šå¯ä»¥é€šè¿‡pträ¿®æ”¹å®ƒæŒ‡å‘çš„æ•°æ®
*ptr = 30;
cout &amp;lt;&amp;lt; a; // è¾“å‡º30
// âŒ é”™è¯¯ï¼šæŒ‡é’ˆæœ¬èº«ä¸èƒ½é‡æ–°æŒ‡å‘
// ptr = &amp;amp;b; // Compilation Error!
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦ä¸€ä¸ªå§‹ç»ˆæŒ‡å‘ç‰¹å®šå†…å­˜åœ°å€çš„æŒ‡é’ˆï¼Œä½†åˆéœ€è¦ä¿®æ”¹è¯¥åœ°å€çš„æ•°æ®æ—¶ï¼ˆç›¸å¯¹å°‘è§ï¼Œä½†åœ¨ä¸€äº›åµŒå…¥å¼æˆ–ç³»ç»Ÿç¼–ç¨‹ä¸­å¯èƒ½ä¼šç”¨åˆ°ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="å¯¹æ¯”æ€»ç»“è¡¨"&gt;å¯¹æ¯”æ€»ç»“è¡¨
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;å¸¸é‡æŒ‡é’ˆ (&lt;code&gt;const int* ptr&lt;/code&gt;)&lt;/th&gt;
&lt;th&gt;æŒ‡é’ˆå¸¸é‡ (&lt;code&gt;int* const ptr&lt;/code&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸­æ–‡å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ&lt;/td&gt;
&lt;td&gt;æŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‡é’ˆå¯å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å¯ä»¥&lt;/strong&gt;æŒ‡å‘æ–°åœ°å€&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸å¯&lt;/strong&gt;æŒ‡å‘æ–°åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¯å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸å¯&lt;/strong&gt;é€šè¿‡æ­¤æŒ‡é’ˆä¿®æ”¹æ•°æ®&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å¯ä»¥&lt;/strong&gt;é€šè¿‡æ­¤æŒ‡é’ˆä¿®æ”¹æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒçº¦æŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿æŠ¤&lt;strong&gt;æŒ‡å‘çš„æ•°æ®&lt;/strong&gt;ä¸è¢«æ­¤æŒ‡é’ˆä¿®æ”¹&lt;/td&gt;
&lt;td&gt;ä¿æŠ¤&lt;strong&gt;æŒ‡é’ˆæœ¬èº«&lt;/strong&gt;çš„æŒ‡å‘ä¸è¢«æ”¹å˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®°å¿†æŠ€å·§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;const&lt;/code&gt;åœ¨ &lt;code&gt;*&lt;/code&gt;&lt;strong&gt;å‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;const&lt;/code&gt;åœ¨ &lt;code&gt;*&lt;/code&gt;&lt;strong&gt;å&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="3-åŒé‡å¸¸é‡constant-pointer-to-constant"&gt;3. åŒé‡å¸¸é‡ï¼ˆConstant Pointer to Constantï¼‰
&lt;/h3&gt;&lt;p&gt;è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯å°†ä¸¤è€…ç»“åˆï¼š&lt;code&gt;const int* const ptr&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;ï¼šæŒ‡é’ˆæœ¬èº«ä¸èƒ½æ”¹å˜æŒ‡å‘ï¼Œä¹Ÿä¸èƒ½é€šè¿‡å®ƒä¿®æ”¹æ‰€æŒ‡å‘çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int a = 10;
int b = 20;
const int* const ptr = &amp;amp;a;
// âŒ é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„æ•°æ®
// *ptr = 30;
// âŒ é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„æŒ‡å‘
// ptr = &amp;amp;b;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="è®°å¿†å£è¯€"&gt;è®°å¿†å£è¯€
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªéå¸¸å®ç”¨çš„ä¸­æ–‡å£è¯€æ˜¯ï¼š&lt;strong&gt;â€œå·¦å®šå€¼ï¼Œå³å®šå‘â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;const&lt;/code&gt;åœ¨ &lt;code&gt;*&lt;/code&gt;&lt;strong&gt;å·¦è¾¹&lt;/strong&gt;ï¼ˆ&lt;code&gt;const int*&lt;/code&gt;ï¼‰ï¼Œå®šçš„æ˜¯&lt;strong&gt;å€¼&lt;/strong&gt;ï¼ˆæŒ‡å‘çš„å€¼ä¸å¯å˜ï¼‰â†’ &lt;strong&gt;å¸¸é‡æŒ‡é’ˆ&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;const&lt;/code&gt;åœ¨ &lt;code&gt;*&lt;/code&gt;&lt;strong&gt;å³è¾¹&lt;/strong&gt;ï¼ˆ&lt;code&gt;int* const&lt;/code&gt;ï¼‰ï¼Œå®šçš„æ˜¯&lt;strong&gt;å‘&lt;/strong&gt;ï¼ˆæŒ‡é’ˆçš„æŒ‡å‘ä¸å¯å˜ï¼‰â†’ &lt;strong&gt;æŒ‡é’ˆå¸¸é‡&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£è¿™ä¸¤ä¸ªæ¦‚å¿µï¼&lt;/p&gt;
&lt;h2 id="decltype"&gt;decltype
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;decltype&lt;/code&gt;æ˜¯ C++11 å¼•å…¥çš„ä¸€ä¸ªå¼ºå¤§çš„ç¼–è¯‘æ—¶ç±»å‹æ¨å¯¼å·¥å…·ï¼Œå®ƒå…è®¸ä½ æŸ¥è¯¢è¡¨è¾¾å¼çš„ç±»å‹ï¼Œå¹¶ä¸”ä¼šä¿ç•™é¡¶å±‚ &lt;code&gt;const&lt;/code&gt;ã€å¼•ç”¨ç­‰é™å®šç¬¦ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠ“ä½ &lt;code&gt;decltype&lt;/code&gt;ä¸ &lt;code&gt;auto&lt;/code&gt;çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;decltype&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;auto&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨å¯¼åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥è¯¢&lt;strong&gt;è¡¨è¾¾å¼çš„ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®&lt;strong&gt;åˆå§‹åŒ–å€¼&lt;/strong&gt;æ¨å¯¼å˜é‡ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼•ç”¨ä¸ &lt;code&gt;const&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿ç•™&lt;/strong&gt;è¡¨è¾¾å¼çš„å¼•ç”¨å’Œé¡¶å±‚ &lt;code&gt;const&lt;/code&gt;å±æ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿½ç•¥&lt;/strong&gt;é¡¶å±‚ &lt;code&gt;const&lt;/code&gt;å’Œå¼•ç”¨ï¼ˆé™¤éæ˜¾å¼å£°æ˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨å¯¼è§„åˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–äºè¡¨è¾¾å¼çš„&lt;strong&gt;å€¼ç±»åˆ«&lt;/strong&gt;ï¼ˆå·¦å€¼ã€å³å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼äºæ¨¡æ¿å‚æ•°æ¨å¯¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹åŒ–è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸è¦æ±‚è¡¨è¾¾å¼å¯æ±‚å€¼ï¼Œä¹Ÿä¸è¦æ±‚å˜é‡å¿…é¡»åˆå§‹åŒ–&lt;/td&gt;
&lt;td&gt;å¿…é¡»ç”¨åˆå§‹åŒ–å€¼è¿›è¡Œæ¨å¯¼&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£-decltypeçš„æ¨å¯¼è§„åˆ™"&gt;ğŸ” ç†è§£ &lt;code&gt;decltype&lt;/code&gt;çš„æ¨å¯¼è§„åˆ™
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;decltype&lt;/code&gt;çš„æ¨å¯¼è§„åˆ™éå¸¸ç›´è§‚ï¼Œä¸»è¦å–å†³äºä½ ä¼ é€’ç»™å®ƒçš„è¡¨è¾¾å¼å½¢å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è§„åˆ™ï¼šå˜é‡åå’Œç±»æˆå‘˜è®¿é—®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“è¡¨è¾¾å¼æ˜¯ä¸€ä¸ª&lt;strong&gt;ä¸å¸¦æ‹¬å·çš„å˜é‡å&lt;/strong&gt;æˆ–&lt;strong&gt;ç±»æˆå‘˜è®¿é—®&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;obj.member&lt;/code&gt;ï¼‰æ—¶ï¼Œ&lt;code&gt;decltype&lt;/code&gt;ç›´æ¥æ¨å¯¼å‡ºè¯¥å˜é‡æˆ–æˆå‘˜å£°æ˜çš„ç¡®åˆ‡ç±»å‹ï¼ŒåŒ…æ‹¬å¼•ç”¨å’Œ &lt;code&gt;const&lt;/code&gt;é™å®šç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;const int ci = 0;
const int &amp;amp;cir = ci;
decltype(ci) x = ci; // x çš„ç±»å‹æ˜¯ const int
decltype(cir) y = x; // y çš„ç±»å‹æ˜¯ const int&amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®è§„åˆ™ï¼šå¸¦æ‹¬å·çš„è¡¨è¾¾å¼å’Œå·¦å€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“è¡¨è¾¾å¼æ˜¯&lt;strong&gt;å¸¦æ‹¬å·çš„å˜é‡å&lt;/strong&gt;ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª&lt;strong&gt;å·¦å€¼è¡¨è¾¾å¼&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;decltype&lt;/code&gt;ä¼šæ¨å¯¼å‡º&lt;strong&gt;ç±»å‹çš„å¼•ç”¨&lt;/strong&gt;ï¼ˆ&lt;code&gt;T&amp;amp;&lt;/code&gt;ï¼‰ã€‚è¿™æ˜¯ &lt;code&gt;decltype&lt;/code&gt;çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œä¹Ÿå¸¸è¢«ç§°ä¸ºâ€œæ‹¬å·é™·é˜±â€ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int i = 42;
decltype((i)) z = i; // z çš„ç±»å‹æ˜¯ int&amp;amp;ï¼Œç»‘å®šåˆ° i
decltype(i++) j; // j çš„ç±»å‹æ˜¯ int (i++ æ˜¯å³å€¼)
decltype(++i) k = i; // k çš„ç±»å‹æ˜¯ int&amp;amp; (++i æ˜¯å·¦å€¼)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªè§„åˆ™ç¡®ä¿äº† &lt;code&gt;decltype&lt;/code&gt;èƒ½å¤Ÿç²¾ç¡®åæ˜ è¡¨è¾¾å¼çš„å€¼ç±»åˆ«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°è°ƒç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¡¨è¾¾å¼æ˜¯&lt;strong&gt;å‡½æ•°è°ƒç”¨&lt;/strong&gt;ï¼Œ&lt;code&gt;decltype&lt;/code&gt;æ¨å¯¼å‡ºçš„ç±»å‹å°±æ˜¯è¯¥å‡½æ•°çš„è¿”å›ç±»å‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int&amp;amp; getRef();
decltype(getRef()) ref = ...; // ref çš„ç±»å‹æ˜¯ int&amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-decltypeçš„ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ &lt;code&gt;decltype&lt;/code&gt;çš„ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;decltype&lt;/code&gt;çš„ç²¾ç¡®ç±»å‹æ¨å¯¼èƒ½åŠ›ä½¿å…¶åœ¨ç°ä»£C++ç¼–ç¨‹ä¸­ä¸å¯æˆ–ç¼ºã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¨¡æ¿ç¼–ç¨‹ä¸è¿”å›ç±»å‹åç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç¼–å†™æ¨¡æ¿å‡½æ•°æ—¶ï¼Œå¦‚æœè¿”å›ç±»å‹ä¾èµ–äºæ¨¡æ¿å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨&lt;strong&gt;è¿”å›ç±»å‹åç½®&lt;/strong&gt;è¯­æ³•ç»“åˆ &lt;code&gt;decltype&lt;/code&gt;ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;template&amp;lt;typename T, typename U&amp;gt;
auto add(T&amp;amp;&amp;amp; t, U&amp;amp;&amp;amp; u) -&amp;gt; decltype(std::forward&amp;lt;T&amp;gt;(t) + std::forward&amp;lt;U&amp;gt;(u)) {
return std::forward&amp;lt;T&amp;gt;(t) + std::forward&amp;lt;U&amp;gt;(u);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;decltype(auto)&lt;/code&gt;ï¼ˆC++14ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;C++14 å¼•å…¥äº† &lt;code&gt;decltype(auto)&lt;/code&gt;ï¼Œå®ƒç”¨ &lt;code&gt;decltype&lt;/code&gt;çš„è§„åˆ™æ¥æ¨å¯¼ &lt;code&gt;auto&lt;/code&gt;ï¼Œä»è€Œ&lt;strong&gt;å®Œç¾ä¿ç•™åˆå§‹åŒ–è¡¨è¾¾å¼çš„å€¼ç±»åˆ«å’Œå¼•ç”¨å±æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int x = 1;
const int&amp;amp; rx = x;
auto a1 = rx; // a1 æ˜¯ int (å¿½ç•¥å¼•ç”¨å’Œconst)
decltype(auto) a2 = rx; // a2 æ˜¯ const int&amp;amp; (å®Œå…¨ä¿ç•™)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®€åŒ–å¤æ‚ç±»å‹å£°æ˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ç±»å‹åç§°å¾ˆé•¿æˆ–å¤æ‚æ—¶ï¼ˆå¦‚å®¹å™¨è¿­ä»£å™¨ã€å‡½æ•°æŒ‡é’ˆï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;decltype&lt;/code&gt;å¯ä»¥ç®€åŒ–ä»£ç ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::vector&amp;lt;std::string&amp;gt; myVec;
// ä¼ ç»Ÿæ–¹å¼
std::vector&amp;lt;std::string&amp;gt;::iterator it1 = myVec.begin();
// ä½¿ç”¨ decltype
decltype(myVec)::iterator it2 = myVec.begin();
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…ƒç¼–ç¨‹ä¸ç±»å‹ç‰¹å¾&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ¨¡æ¿å…ƒç¼–ç¨‹ä¸­ï¼Œ&lt;code&gt;decltype&lt;/code&gt;å¸¸ç”¨äºåœ¨ç¼–è¯‘æœŸæŸ¥è¯¢è¡¨è¾¾å¼çš„ç±»å‹ï¼Œè¿›è€Œè¿›è¡Œç±»å‹åˆ¤æ–­æˆ–æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‹¬å·é™·é˜±&lt;/strong&gt;ï¼šåŠ¡å¿…å°å¿ƒä½¿ç”¨æ‹¬å·ã€‚&lt;code&gt;decltype(variable)&lt;/code&gt;å’Œ &lt;code&gt;decltype((variable))&lt;/code&gt;çš„ç»“æœå¯èƒ½å®Œå…¨ä¸åŒï¼Œåè€…ä¼šå¾—åˆ°å¼•ç”¨ç±»å‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;decltype(auto)&lt;/code&gt;ä½œä¸ºå‡½æ•°è¿”å›ç±»å‹æ—¶ï¼Œç¡®ä¿ä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨æˆ–æŒ‡é’ˆï¼Œå¦åˆ™ä¼šå¯¼è‡´æ‚¬å‚å¼•ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å±é™©ï¼è¿”å›äº†å±€éƒ¨å˜é‡çš„å¼•ç”¨
decltype(auto) bad_func() {
int x = 42;
return (x); // å› ä¸º (x) æ˜¯å·¦å€¼ï¼Œæ¨å¯¼ä¸º int&amp;amp;ï¼Œä½† x å³å°†é”€æ¯
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;decltype&lt;/code&gt;ä¸ä¼šå¯¹è¡¨è¾¾å¼æ±‚å€¼&lt;/strong&gt;ï¼š&lt;code&gt;decltype&lt;/code&gt;åªåœ¨ç¼–è¯‘æœŸè¿›è¡Œç±»å‹åˆ†æï¼Œä¸ä¼šçœŸæ­£è¿è¡Œè¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int i = 0;
decltype(i++) j; // j æ˜¯ intï¼Œä½† i++ ä¸ä¼šè¢«æ‰§è¡Œï¼Œi ä»ä¸º 0
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-15"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;decltype&lt;/code&gt;æ˜¯ C++ ç±»å‹ç³»ç»Ÿä¸­ä¸€ä¸ªå¼ºå¤§è€Œç²¾ç¡®çš„å·¥å…·ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºèƒ½å¤Ÿ&lt;strong&gt;å®Œæ•´ä¿ç•™è¡¨è¾¾å¼çš„ç±»å‹ä¿¡æ¯&lt;/strong&gt;ï¼ŒåŒ…æ‹¬å¼•ç”¨å’Œ &lt;code&gt;const&lt;/code&gt;é™å®šç¬¦ï¼Œè¿™å¯¹äºç¼–å†™æ³›å‹ã€å®‰å…¨ä¸”é«˜æ•ˆçš„ç°ä»£ C++ ä»£ç è‡³å…³é‡è¦ã€‚ç†è§£å…¶æ¨å¯¼è§„åˆ™ï¼Œç‰¹åˆ«æ˜¯æ‹¬å·çš„å½±å“ï¼Œæ˜¯æ­£ç¡®ä½¿ç”¨å®ƒçš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æŒæ¡ &lt;code&gt;decltype&lt;/code&gt;ï¼å¦‚æœä½ å¯¹ &lt;code&gt;decltype&lt;/code&gt;åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="thread"&gt;Thread
&lt;/h2&gt;&lt;p&gt;C++ å¤šçº¿ç¨‹ç¼–ç¨‹å…è®¸ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæå‡æ€§èƒ½ã€‚ä¸‹é¢ä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œä»‹ç»å…¶æ ¸å¿ƒç”¨æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-c-å¤šçº¿ç¨‹ç¼–ç¨‹å…¨é¢æŒ‡å—"&gt;ğŸ§µ C++ å¤šçº¿ç¨‹ç¼–ç¨‹å…¨é¢æŒ‡å—
&lt;/h3&gt;&lt;h4 id="1-çº¿ç¨‹åˆ›å»ºä¸ç®¡ç†"&gt;1 çº¿ç¨‹åˆ›å»ºä¸ç®¡ç†
&lt;/h4&gt;&lt;p&gt;C++11 é€šè¿‡ &lt;code&gt;&amp;lt;thread&amp;gt;&lt;/code&gt;å¤´æ–‡ä»¶æä¾›äº†æ ‡å‡†çº¿ç¨‹æ”¯æŒï¼Œä½¿å¾—çº¿ç¨‹åˆ›å»ºéå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;thread&amp;gt;
void threadFunction(int id) {
std::cout &amp;lt;&amp;lt; &amp;#34;Thread &amp;#34; &amp;lt;&amp;lt; id &amp;lt;&amp;lt; &amp;#34; is running.&amp;#34; &amp;lt;&amp;lt; std::endl;
}
int main() {
// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹
std::thread t1(threadFunction, 1);
std::thread t2(threadFunction, 2);
// ç­‰å¾…çº¿ç¨‹å®Œæˆ
t1.join();
t2.join();
std::cout &amp;lt;&amp;lt; &amp;#34;Main thread is done.&amp;#34; &amp;lt;&amp;lt; std::endl;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="12-çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†"&gt;1.2 çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;join()&lt;/strong&gt;ï¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°ç›®æ ‡çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;detach()&lt;/strong&gt;ï¼šå°†çº¿ç¨‹åˆ†ç¦»ï¼Œä½¿å…¶åœ¨åå°ç‹¬ç«‹è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;joinable()&lt;/strong&gt;ï¼šæ£€æŸ¥çº¿ç¨‹æ˜¯å¦å¯è¢« joinã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼šåœ¨ std::thread å¯¹è±¡é”€æ¯å‰ï¼Œå¿…é¡»è°ƒç”¨ join() æˆ– detach()ï¼Œå¦åˆ™ç¨‹åºä¼šç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;h3 id="2-çº¿ç¨‹åŒæ­¥æœºåˆ¶"&gt;2 çº¿ç¨‹åŒæ­¥æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;å½“å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºæ—¶ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶é¿å…æ•°æ®ç«äº‰ã€‚&lt;/p&gt;
&lt;h4 id="21-äº’æ–¥é”-mutex"&gt;2.1 äº’æ–¥é” (Mutex)
&lt;/h4&gt;&lt;p&gt;C++ æä¾›å¤šç§äº’æ–¥é”ç±»å‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::mutex&lt;/code&gt;ï¼šåŸºæœ¬äº’æ–¥é”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::recursive_mutex&lt;/code&gt;ï¼šå¯é‡å…¥äº’æ–¥é”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;std::timed_mutex&lt;/code&gt;ï¼šå¸¦è¶…æ—¶çš„äº’æ–¥é”&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;thread&amp;gt;
#include &amp;lt;mutex&amp;gt;
std::mutex mtx;
int shared_data = 0;
void safe_increment() {
std::lock_guard&amp;lt;std::mutex&amp;gt; lock(mtx); // RAIIé£æ ¼ï¼Œè‡ªåŠ¨è§£é”
++shared_data;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¨èä½¿ç”¨ &lt;code&gt;std::lock_guard&lt;/code&gt;æˆ– &lt;code&gt;std::unique_lock&lt;/code&gt;ç­‰ RAII ç±»å‹çš„é”ç®¡ç†å·¥å…·ï¼Œé¿å…æ‰‹åŠ¨åŠ é”/è§£é”åŠç”±æ­¤äº§ç”Ÿçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h4 id="22-æ¡ä»¶å˜é‡-condition-variable"&gt;2.2 æ¡ä»¶å˜é‡ (Condition Variable)
&lt;/h4&gt;&lt;p&gt;æ¡ä»¶å˜é‡å…è®¸çº¿ç¨‹ç­‰å¾…ç‰¹å®šæ¡ä»¶æˆç«‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;thread&amp;gt;
#include &amp;lt;mutex&amp;gt;
#include &amp;lt;condition_variable&amp;gt;
std::mutex mtx;
std::condition_variable cv;
bool ready = false;
void worker() {
std::unique_lock&amp;lt;std::mutex&amp;gt; lock(mtx);
cv.wait(lock, []{ return ready; }); // ç­‰å¾…readyä¸ºtrue
// æ‰§è¡Œå·¥ä½œ...
}
void master() {
// å‡†å¤‡å·¥ä½œ...
{
std::lock_guard&amp;lt;std::mutex&amp;gt; lock(mtx);
ready = true;
}
cv.notify_all(); // é€šçŸ¥æ‰€æœ‰ç­‰å¾…çº¿ç¨‹
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="23-åŸå­æ“ä½œ"&gt;2.3 åŸå­æ“ä½œ
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;&amp;lt;atomic&amp;gt;&lt;/code&gt;å¤´æ–‡ä»¶æä¾›äº†åŸå­ç±»å‹ï¼Œæ— éœ€é”å³å¯å®ç°çº¿ç¨‹å®‰å…¨æ“ä½œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;atomic&amp;gt;
#include &amp;lt;thread&amp;gt;
std::atomic&amp;lt;int&amp;gt; counter(0);
void safe_increment() {
++counter; // åŸå­æ“ä½œ
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="3-é«˜çº§çº¿ç¨‹ç‰¹æ€§"&gt;3 é«˜çº§çº¿ç¨‹ç‰¹æ€§
&lt;/h3&gt;&lt;h4 id="31-å¼‚æ­¥æ“ä½œ"&gt;3.1 å¼‚æ­¥æ“ä½œ
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;&amp;lt;future&amp;gt;&lt;/code&gt;å¤´æ–‡ä»¶æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ï¼Œå…è®¸ä¸»çº¿ç¨‹è·å–å­çº¿ç¨‹çš„ç»“æœã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;future&amp;gt;
int compute() {
// å¤æ‚è®¡ç®—...
return 42;
}
int main() {
std::future&amp;lt;int&amp;gt; result = std::async(std::launch::async, compute);
// ä¸»çº¿ç¨‹å¯ç»§ç»­å…¶ä»–å·¥ä½œ
std::cout &amp;lt;&amp;lt; &amp;#34;Result: &amp;#34; &amp;lt;&amp;lt; result.get() &amp;lt;&amp;lt; std::endl; // é˜»å¡ç­‰å¾…ç»“æœ
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="32-çº¿ç¨‹å±€éƒ¨å­˜å‚¨"&gt;3.2 çº¿ç¨‹å±€éƒ¨å­˜å‚¨
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;thread_local&lt;/code&gt;å…³é”®å­—å£°æ˜çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;thread_local int thread_specific_data = 0;
void worker() {
++thread_specific_data; // æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ä¿®æ”¹
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="33-çº¿ç¨‹æ± å®ç°"&gt;3.3 çº¿ç¨‹æ± å®ç°
&lt;/h4&gt;&lt;p&gt;çº¿ç¨‹æ± é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çº¿ç¨‹æ± å®ç°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;vector&amp;gt;
#include &amp;lt;queue&amp;gt;
#include &amp;lt;thread&amp;gt;
#include &amp;lt;functional&amp;gt;
#include &amp;lt;condition_variable&amp;gt;
class ThreadPool {
public:
ThreadPool(size_t threads) : stop(false) {
for(size_t i = 0; i &amp;lt; threads; ++i) {
workers.emplace_back([this] {
while(true) {
std::function&amp;lt;void()&amp;gt; task;
{
std::unique_lock&amp;lt;std::mutex&amp;gt; lock(this-&amp;gt;queue_mutex);
this-&amp;gt;condition.wait(lock,
[this]{ return this-&amp;gt;stop || !this-&amp;gt;tasks.empty(); });
if(this-&amp;gt;stop &amp;amp;&amp;amp; this-&amp;gt;tasks.empty()) return;
task = std::move(this-&amp;gt;tasks.front());
this-&amp;gt;tasks.pop();
}
task();
}
});
}
}
template&amp;lt;class F&amp;gt;
void enqueue(F&amp;amp;&amp;amp; f) {
{
std::unique_lock&amp;lt;std::mutex&amp;gt; lock(queue_mutex);
tasks.emplace(std::forward&amp;lt;F&amp;gt;(f));
}
condition.notify_one();
}
~ThreadPool() {
{
std::unique_lock&amp;lt;std::mutex&amp;gt; lock(queue_mutex);
stop = true;
}
condition.notify_all();
for(std::thread &amp;amp;worker : workers)
worker.join();
}
private:
std::vector&amp;lt;std::thread&amp;gt; workers;
std::queue&amp;lt;std::function&amp;lt;void()&amp;gt;&amp;gt; tasks;
std::mutex queue_mutex;
std::condition_variable condition;
bool stop;
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="4-ç¼–è¯‘ä¸å¹³å°ç›¸å…³è¯´æ˜"&gt;4 ç¼–è¯‘ä¸å¹³å°ç›¸å…³è¯´æ˜
&lt;/h3&gt;&lt;h4 id="41-ç¼–è¯‘å‘½ä»¤"&gt;4.1 ç¼–è¯‘å‘½ä»¤
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ pthread åº“&lt;/strong&gt;ï¼š&lt;code&gt;g++ -pthread -o program program.cpp&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ C++11 çº¿ç¨‹åº“&lt;/strong&gt;ï¼š&lt;code&gt;g++ -std=c++11 -o program program.cpp&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="42-c20-æ–°ç‰¹æ€§"&gt;4.2 C++20 æ–°ç‰¹æ€§
&lt;/h4&gt;&lt;p&gt;C++20 å¼•å…¥äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;std::jthread&lt;/code&gt;ï¼šå¯è‡ªåŠ¨ join çš„çº¿ç¨‹ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;åœæ­¢ä»¤ç‰Œï¼ˆstop_tokenï¼‰å’Œåœæ­¢å›è°ƒã€‚&lt;/li&gt;
&lt;li&gt;ä¿¡å·é‡ï¼ˆsemaphoreï¼‰å’Œé”å­˜å™¨ï¼ˆlatchï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="5-æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–"&gt;5 æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨é«˜çº§æŠ½è±¡&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;std::async&lt;/code&gt;è€Œéç›´æ¥åˆ›å»ºçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ•°æ®ç«äº‰&lt;/strong&gt;ï¼šä½¿ç”¨äº’æ–¥é‡æˆ–åŸå­æ“ä½œä¿æŠ¤å…±äº«æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ­»é”&lt;/strong&gt;ï¼šæŒ‰å›ºå®šé¡ºåºè·å–é”ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;std::lock&lt;/code&gt;åŒæ—¶é”å®šå¤šä¸ªäº’æ–¥é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å°åŒ–é”èŒƒå›´&lt;/strong&gt;ï¼šåªä¿æŠ¤å¿…è¦çš„æ•°æ®å’Œæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šçº¿ç¨‹åˆ›å»ºå’ŒåŒæ­¥æœ‰å¼€é”€ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ RAII ç®¡ç†èµ„æº&lt;/strong&gt;ï¼šç¡®ä¿å¼‚å¸¸å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="æ€»ç»“"&gt;æ€»ç»“
&lt;/h3&gt;&lt;p&gt;C++ å¤šçº¿ç¨‹ç¼–ç¨‹æä¾›äº†ä»åŸºç¡€çº¿ç¨‹ç®¡ç†åˆ°é«˜çº§åŒæ­¥æœºåˆ¶çš„å…¨é¢æ”¯æŒã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼šä½¿ç”¨ &lt;code&gt;std::thread&lt;/code&gt;åˆ›å»ºçº¿ç¨‹ï¼Œé€šè¿‡äº’æ–¥é”å’Œæ¡ä»¶å˜é‡å®ç°åŒæ­¥ï¼Œåˆ©ç”¨åŸå­æ“ä½œå‡å°‘é”ç«äº‰ï¼Œä»¥åŠä½¿ç”¨å¼‚æ­¥æ“ä½œæé«˜å“åº”æ€§ã€‚æŒæ¡è¿™äº›æŠ€æœ¯å¯ä»¥å¸®åŠ©ä½ ç¼–å†™å‡ºé«˜æ•ˆã€å®‰å…¨çš„å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h2 id="pq"&gt;pq
&lt;/h2&gt;&lt;p&gt;ä½ æåˆ°äº†ä¸€ä¸ªC++æ ‡å‡†åº“ä¸­ &lt;code&gt;std::priority_queue&lt;/code&gt;éå¸¸å…³é”®çš„ç‰¹æ€§ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;æ ‡å‡†çš„ &lt;code&gt;std::priority_queue&lt;/code&gt;æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥åˆ°å…¶å†…éƒ¨å…ƒç´ å€¼çš„ä¿®æ”¹&lt;/strong&gt;ã€‚å¦‚æœä½ ç›´æ¥ä¿®æ”¹äº†å †ä¸­çš„å…ƒç´ ï¼Œå †çš„ç»“æ„å¯èƒ½ä¼šè¢«ç ´åï¼Œå¯¼è‡´å…¶è¡Œä¸ºå˜å¾—ä¸å¯é¢„æµ‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥å¯¹æ¯”â€œå®‰å…¨æ“ä½œâ€å’Œâ€œå±é™©æ“ä½œâ€åŠå…¶åæœï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œç±»å‹&lt;/th&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;å¯¹å †ç»“æ„çš„å½±å“&lt;/th&gt;
&lt;th&gt;ç»“æœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âœ… å®‰å…¨æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;push()&lt;/code&gt;, &lt;code&gt;pop()&lt;/code&gt;, &lt;code&gt;top()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨ &lt;code&gt;adjust_up&lt;/code&gt;æˆ– &lt;code&gt;adjust_down&lt;/code&gt;æ¥ç»´æŠ¤å †åº&lt;/td&gt;
&lt;td&gt;ä¿è¯æ“ä½œåå †ç»“æ„æ­£ç¡®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âŒ å±é™©æ“ä½œ (å¤–éƒ¨ä¿®æ”¹)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡éå¸¸è§„æ‰‹æ®µï¼ˆå¦‚è·å–å¼•ç”¨ï¼‰ç›´æ¥ä¿®æ”¹å…ƒç´ å€¼&lt;/td&gt;
&lt;td&gt;å †æ— æ³•æ„ŸçŸ¥ï¼Œå†…éƒ¨é¡ºåºå¯èƒ½è¢«ç ´å&lt;/td&gt;
&lt;td&gt;è¡Œä¸ºæœªå®šä¹‰ï¼Œåç»­æ“ä½œå¯èƒ½å‡ºé”™&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å †çš„è°ƒæ•´æœºåˆ¶ä¸å¤–éƒ¨ä¿®æ”¹çš„éš”ç¦»"&gt;ğŸ” å †çš„è°ƒæ•´æœºåˆ¶ä¸å¤–éƒ¨ä¿®æ”¹çš„éš”ç¦»
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;std::priority_queue&lt;/code&gt;çš„è‡ªåŠ¨è°ƒæ•´æœºåˆ¶ä»…åœ¨ç‰¹å®šçš„ã€ç”±å®ƒè‡ªå·±å‘èµ·çš„æ“ä½œåæ‰ä¼šè§¦å‘ï¼Œè€Œæ— æ³•ç›‘æ§ä»»æ„æ—¶åˆ»å…ƒç´ å€¼çš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶ä¼šè‡ªåŠ¨è°ƒæ•´ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ’å…¥å…ƒç´  (&lt;code&gt;push&lt;/code&gt;)&lt;/strong&gt;ï¼šæ–°å…ƒç´ è¢«æ·»åŠ åˆ°å®¹å™¨æœ«å°¾ï¼Œç„¶åæ‰§è¡Œ&lt;strong&gt;å‘ä¸Šè°ƒæ•´&lt;/strong&gt;ï¼Œä½¿å…¶â€œæµ®â€åˆ°åˆé€‚çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤å †é¡¶ (&lt;code&gt;pop&lt;/code&gt;)&lt;/strong&gt;ï¼šå…ˆå°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢å¹¶ç§»é™¤ï¼Œç„¶åå¯¹æ–°çš„å †é¡¶å…ƒç´ æ‰§è¡Œ&lt;strong&gt;å‘ä¸‹è°ƒæ•´&lt;/strong&gt;ï¼Œä½¿å…¶â€œæ²‰â€åˆ°åˆé€‚çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºä½•æ„ŸçŸ¥ä¸åˆ°å¤–éƒ¨ä¿®æ”¹ï¼Ÿ&lt;/strong&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ²¡æœ‰ç›‘æ§æœºåˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;priority_queue&lt;/code&gt;æœ¬èº«ä¸å…·å¤‡ç›‘å¬æˆ–è½®è¯¢åŠŸèƒ½æ¥æ£€æŸ¥æ¯ä¸ªå…ƒç´ çš„å€¼æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡é€‰æ‹©ä¸æ•ˆç‡&lt;/strong&gt;ï¼šæä¾›å…ƒç´ ä¿®æ”¹é€šçŸ¥æœºåˆ¶ä¼šå¼•å…¥å·¨å¤§çš„æ€§èƒ½å¼€é”€ã€‚&lt;code&gt;priority_queue&lt;/code&gt;çš„è®¾è®¡å“²å­¦æ˜¯é«˜æ•ˆåœ°æä¾›å †é¡¶å…ƒç´ ï¼Œè€Œéä¸€ä¸ªå¯ä»¥éšæ„ä¿®æ”¹çš„é€šç”¨å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£é™åˆ¶&lt;/strong&gt;ï¼šå®ƒ intentionally &lt;strong&gt;ä¸æä¾›ç›´æ¥è®¿é—®å®¹å™¨ä¸­ä»»æ„å…ƒç´ çš„æ–¹æ³•&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œæ²¡æœ‰ &lt;code&gt;operator[]&lt;/code&gt;ï¼‰ï¼Œè¿™ä»æ¥å£å±‚é¢å°±é˜»æ­¢äº†ç›´æ¥ä¿®æ”¹ï¼Œä»è€Œä¿è¯å…¶ä¸å˜å¼ä¸è¢«ç ´åã€‚ä½ æ‰€ç”¨çš„ &lt;code&gt;top()&lt;/code&gt;æ–¹æ³•è¿”å›çš„æ˜¯å †é¡¶å…ƒç´ çš„ &lt;strong&gt;const å¼•ç”¨&lt;/strong&gt;ï¼Œä¹Ÿæš—ç¤ºä½ ä¸åº”é€šè¿‡å®ƒä¿®æ”¹å †é¡¶å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®ä¿®æ”¹å †å†…å…ƒç´ "&gt;ğŸ’¡ å¦‚ä½•æ­£ç¡®ä¿®æ”¹å †å†…å…ƒç´ 
&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ ç¡®å®éœ€è¦ä¿®æ”¹å †ä¸­å…ƒç´ çš„ä¼˜å…ˆçº§ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯éµå¾ªä¸€ä¸ªâ€œ&lt;strong&gt;å…ˆç§»é™¤ï¼Œå†ä¿®æ”¹ï¼Œåé‡æ–°æ’å…¥&lt;/strong&gt;â€çš„æ¨¡å¼ã€‚è¿™è™½ç„¶çœ‹èµ·æ¥å¤šäº†ä¸€æ­¥ï¼Œä½†èƒ½ä¿è¯å †ç»“æ„çš„å®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ‰¾åˆ°å…ƒç´ &lt;/strong&gt;ï¼šå¦‚æœä½ éœ€è¦ä¿®æ”¹éå †é¡¶çš„å…ƒç´ ï¼Œ&lt;code&gt;priority_queue&lt;/code&gt;æœ¬èº«ä¸æä¾›ç›´æ¥æŸ¥æ‰¾çš„æ–¹æ³•ã€‚ä½ å¯èƒ½éœ€è¦ç»´æŠ¤ä¸€ä¸ªé¢å¤–çš„æ•°æ®ç»“æ„æ¥è¾…åŠ©å®šä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œæƒ°æ€§åˆ é™¤â€ç­–ç•¥&lt;/strong&gt;ï¼šä¸€ç§å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥æ˜¯ï¼Œä¸ç«‹å³ä»å †ä¸­åˆ é™¤æ— æ•ˆå…ƒç´ ã€‚è€Œæ˜¯ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨ä¿®æ”¹æ—¶ï¼Œå°†æ–°å…ƒç´ ç›´æ¥æ’å…¥å †ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶æ ‡è®°æ—§å…ƒç´ ä¸ºâ€œæ— æ•ˆâ€ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä»å †é¡¶å–å‡ºå…ƒç´ æ—¶ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å·²è¢«æ ‡è®°ä¸ºæ— æ•ˆã€‚å¦‚æœæ— æ•ˆï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒå¹¶ç»§ç»­å–ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æ‰¾åˆ°æœ‰æ•ˆå…ƒç´ ã€‚è¿™ç§æ–¹æ³•åœ¨ç®—æ³•ï¼ˆå¦‚Dijkstraç®—æ³•ï¼‰ä¸­å¾ˆå¸¸ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ›¿ä»£æ–¹æ¡ˆæ‰‹åŠ¨ç»´æŠ¤ä¸ç´¢å¼•å †"&gt;âš™ï¸ æ›¿ä»£æ–¹æ¡ˆï¼šæ‰‹åŠ¨ç»´æŠ¤ä¸ç´¢å¼•å †
&lt;/h3&gt;&lt;p&gt;å¯¹äºéœ€è¦é¢‘ç¹ä¿®æ”¹å…ƒç´ ä¼˜å…ˆçº§çš„åœºæ™¯ï¼Œæ ‡å‡†çš„ &lt;code&gt;priority_queue&lt;/code&gt;å¯èƒ½ä¸æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚ä½ å¯ä»¥è€ƒè™‘ä»¥ä¸‹æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨é‡æ–°å»ºå †&lt;/strong&gt;ï¼šå¦‚æœä¿®æ”¹äº†å¤§é‡å…ƒç´ ï¼Œä¸€ä¸ªâ€œç¬¨â€ä½†æœ‰æ•ˆçš„æ–¹æ³•æ˜¯è°ƒç”¨ &lt;code&gt;std::make_heap&lt;/code&gt;åœ¨æ•´ä¸ªå®¹å™¨ä¸Šé‡æ–°æ„å»ºå †ã€‚è™½ç„¶å•æ¬¡æ—¶é—´å¤æ‚åº¦æ˜¯ O(N)ï¼Œä½†å¯èƒ½æ¯”å¤šæ¬¡ O(log N) çš„ä¿®æ”¹æ›´ç®€å•ç›´æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æ”¯æŒ &lt;code&gt;decrease_key&lt;/code&gt;æ“ä½œçš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œ&lt;strong&gt;ç´¢å¼•å †&lt;/strong&gt;ã€‚ç´¢å¼•å †å°†å…ƒç´ æœ¬èº«å’Œå…¶ç´¢å¼•ï¼ˆæˆ–å¥æŸ„ï¼‰åˆ†å¼€å­˜å‚¨ã€‚å½“ä½ é€šè¿‡ç´¢å¼•ä¿®æ”¹å…ƒç´ å€¼æ—¶ï¼Œå¯ä»¥æ˜¾å¼åœ°é€šçŸ¥å †åœ¨è¯¥ç´¢å¼•ä½ç½®è¿›è¡Œå‘ä¸Šæˆ–å‘ä¸‹è°ƒæ•´ã€‚è™½ç„¶ STL æ²¡æœ‰æä¾›ï¼Œä½†ä½ å¯ä»¥è‡ªå·±å®ç°æˆ–ä½¿ç”¨åƒ &lt;strong&gt;Boost.Heap&lt;/strong&gt; è¿™æ ·çš„åº“ï¼Œå®ƒæä¾›äº†å¯å˜çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-16"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;std::priority_queue&lt;/code&gt;æ˜¯ä¸€ä¸ªâ€œè‡ªåŠ¨åŒ–â€ä½†â€œä¸æ™ºèƒ½â€çš„å®¹å™¨ã€‚å®ƒä¼šåœ¨è‡ªå·±æ§åˆ¶çš„æ’å…¥å’Œåˆ é™¤æ“ä½œåè‡ªåŠ¨è°ƒæ•´ç»“æ„ï¼Œä½†&lt;strong&gt;æ— æ³•æ„ŸçŸ¥ä¹Ÿæ— æ³•å¤„ç†å¤–éƒ¨å¯¹å…¶å…ƒç´ å€¼çš„ç›´æ¥ä¿®æ”¹&lt;/strong&gt;ã€‚è¦å®‰å…¨åœ°ä¿®æ”¹å…ƒç´ ä¼˜å…ˆçº§ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨â€œå…ˆå‡ºåè¿›â€çš„è§„èŒƒæ–¹æ³•ï¼Œæˆ–è€…è€ƒè™‘ä½¿ç”¨æ›´ä¸“é—¨çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;std::priority_queue&lt;/code&gt;ã€‚å¦‚æœä½ æœ‰ç‰¹å®šåº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨æ›´åˆé€‚çš„å®ç°ç­–ç•¥ã€‚&lt;/p&gt;</description></item></channel></rss>