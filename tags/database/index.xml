<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DataBase on é£é¸¿è¸é›ªæ³¥</title><link>https://dyhes.github.io/tags/database/</link><description>Recent content in DataBase on é£é¸¿è¸é›ªæ³¥</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 22 Oct 2025 16:27:30 +0800</lastBuildDate><atom:link href="https://dyhes.github.io/tags/database/index.xml" rel="self" type="application/rss+xml"/><item><title>ã€DataBaseã€‘Test</title><link>https://dyhes.github.io/p/databasetest/</link><pubDate>Mon, 01 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/databasetest/</guid><description>&lt;h2 id="å¤§å°å†™"&gt;å¤§å°å†™
&lt;/h2&gt;&lt;p&gt;MySQL çš„å¤§å°å†™æ•æ„Ÿæ€§æ˜¯ä¸€ä¸ªå¤šå› ç´ å†³å®šçš„é—®é¢˜ï¼Œä¸èƒ½ç®€å•åœ°ç”¨â€œæ˜¯â€æˆ–â€œå¦â€å›ç­”ã€‚å®ƒå…·ä½“å–å†³äºä½ æŒ‡çš„æ˜¯&lt;strong&gt;æ•°æ®åº“å¯¹è±¡å&lt;/strong&gt;ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰è¿˜æ˜¯&lt;strong&gt;æ•°æ®å†…å®¹æœ¬èº«&lt;/strong&gt;ï¼ŒåŒæ—¶ä¹Ÿä¸&lt;strong&gt;æ“ä½œç³»ç»Ÿ&lt;/strong&gt;å’Œ&lt;strong&gt;æ•°æ®åº“é…ç½®&lt;/strong&gt;å¯†åˆ‡ç›¸å…³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªè¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹è±¡&lt;/th&gt;
&lt;th&gt;å¤§å°å†™æ•æ„Ÿæƒ…å†µ&lt;/th&gt;
&lt;th&gt;ä¸»è¦æ§åˆ¶å› ç´ &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®åº“å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–äºæ“ä½œç³»ç»Ÿå’Œ &lt;code&gt;lower_case_table_names&lt;/code&gt;è®¾ç½®&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿã€&lt;code&gt;lower_case_table_names&lt;/code&gt;å‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–äºæ“ä½œç³»ç»Ÿå’Œ &lt;code&gt;lower_case_table_names&lt;/code&gt;è®¾ç½®&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿã€&lt;code&gt;lower_case_table_names&lt;/code&gt;å‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ•æ„Ÿ&lt;/strong&gt; (åœ¨æ‰€æœ‰å¹³å°ä¸Š)&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ«å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ•æ„Ÿ&lt;/strong&gt; (åœ¨æ‰€æœ‰å¹³å°ä¸Š)&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å†…å®¹ (å­—ç¬¦ä¸²)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å–å†³äºå­—æ®µçš„&lt;strong&gt;å­—ç¬¦é›†æ ¡å¯¹è§„åˆ™&lt;/strong&gt; (Collation)&lt;/td&gt;
&lt;td&gt;å­—æ®µçš„å­—ç¬¦é›†æ ¡å¯¹è§„åˆ™ (Collation)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;å¦‚ä½•æŸ¥çœ‹å’Œä¿®æ”¹è®¾ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰ &lt;code&gt;lower_case_table_names&lt;/code&gt;çš„é…ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW VARIABLES LIKE &amp;#39;lower_case_table_names&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¦ä¿®æ”¹æ­¤å‚æ•°ï¼Œéœ€ç¼–è¾‘ MySQL çš„é…ç½®æ–‡ä»¶ï¼ˆ&lt;code&gt;my.cnf&lt;/code&gt;æˆ– &lt;code&gt;my.ini&lt;/code&gt;ï¼‰ï¼Œåœ¨ &lt;code&gt;[mysqld]&lt;/code&gt;èŠ‚ä¸‹æ·»åŠ æˆ–ä¿®æ”¹ &lt;code&gt;lower_case_table_names&lt;/code&gt;ï¼Œç„¶å&lt;strong&gt;é‡å¯ MySQL æœåŠ¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¦æŸ¥çœ‹è¡¨æˆ–å­—æ®µçš„å­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™ï¼Œå¯ä»¥ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW CREATE TABLE your_table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–æ›´è¯¦ç»†åœ°æŸ¥çœ‹å­—æ®µä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW FULL COLUMNS FROM your_table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ğŸ¯ &lt;strong&gt;å¦‚ä½•æ§åˆ¶æ•°æ®å†…å®¹çš„å¤§å°å†™æ•æ„Ÿæ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ•°æ®å†…å®¹çš„å¤§å°å†™æ•æ„Ÿæ€§ç”±å­—æ®µçš„&lt;strong&gt;æ ¡å¯¹è§„åˆ™ (Collation)&lt;/strong&gt; å†³å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸åŒºåˆ†å¤§å°å†™&lt;/strong&gt;çš„æ ¡å¯¹è§„åˆ™é€šå¸¸ä»¥ &lt;code&gt;_ci&lt;/code&gt;(case insensitive) ç»“å°¾ï¼Œå¦‚ &lt;code&gt;utf8mb4_general_ci&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒºåˆ†å¤§å°å†™&lt;/strong&gt;çš„æ ¡å¯¹è§„åˆ™é€šå¸¸ä»¥ &lt;code&gt;_cs&lt;/code&gt;(case sensitive) æˆ– &lt;code&gt;_bin&lt;/code&gt;(binary) ç»“å°¾ï¼Œå¦‚ &lt;code&gt;utf8mb4_bin&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨&lt;strong&gt;åˆ›å»ºæˆ–ä¿®æ”¹è¡¨/å­—æ®µæ—¶æŒ‡å®šæ ¡å¯¹è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE your_table (
your_column VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin
);
-- æˆ–ä¿®æ”¹ç°æœ‰å­—æ®µ
ALTER TABLE your_table MODIFY your_column VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœä¸æƒ³ä¿®æ”¹è¡¨ç»“æ„ï¼Œä¹Ÿå¯ä»¥åœ¨ &lt;strong&gt;SQL æŸ¥è¯¢æ—¶ä¸´æ—¶æŒ‡å®š&lt;/strong&gt;ï¼Œä½¿ç”¨ &lt;code&gt;BINARY&lt;/code&gt;å…³é”®å­—æˆ– &lt;code&gt;COLLATE&lt;/code&gt;å­å¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM your_table WHERE BINARY your_column = &amp;#39;AbC&amp;#39;;
-- æˆ–
SELECT * FROM your_table WHERE your_column = &amp;#39;AbC&amp;#39; COLLATE utf8mb4_bin;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ğŸ’¡ &lt;strong&gt;å®è·µå»ºè®®&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨åŒä¸€ä¸ªé¡¹ç›®æˆ–æ•°æ®åº“ä¸­ï¼Œæœ€å¥½ä¿æŒç»Ÿä¸€çš„å¤§å°å†™å‘½åè§„èŒƒã€‚ä¸€ä¸ªå¹¿æ³›é‡‡ç”¨çš„å®è·µæ˜¯&lt;strong&gt;æ‰€æœ‰æ•°æ®åº“åã€è¡¨åã€åˆ—åå‡ä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿çš„ç»„åˆ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä¿®æ”¹ &lt;code&gt;lower_case_table_names&lt;/code&gt;&lt;/strong&gt;ï¼šä¿®æ”¹æ­¤å‚æ•°&lt;strong&gt;éœ€è¦é‡å¯æ•°æ®åº“æœåŠ¡&lt;/strong&gt;ï¼Œä¸”å¯¹å·²æœ‰æ•°æ®åº“çš„å½±å“å¯èƒ½å¾ˆå¤æ‚ï¼Œå°¤å…¶æ˜¯åœ¨ä¸åŒæ“ä½œç³»ç»Ÿé—´è¿ç§»æ—¶ã€‚&lt;strong&gt;æœ€å¥½åœ¨åˆå§‹åŒ–æ•°æ®åº“å®ä¾‹æ—¶å°±ç¡®å®šæ­¤è®¾ç½®&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®éœ€æ±‚&lt;/strong&gt;ï¼šåœ¨è®¾è®¡è¡¨æ—¶ï¼Œæ ¹æ®ä¸šåŠ¡é€»è¾‘è€ƒè™‘å­—æ®µæ˜¯å¦éœ€è¦åŒºåˆ†å¤§å°å†™ï¼ˆä¾‹å¦‚ï¼ŒéªŒè¯ç é€šå¸¸åŒºåˆ†ï¼Œç”¨æˆ·åå¯èƒ½ä¸åŒºåˆ†ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œæ§åˆ¶ MySQL ä¸­çš„å¤§å°å†™é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="date"&gt;date
&lt;/h2&gt;&lt;p&gt;åœ¨ SQL ä¸­è·å–ä¸€ä¸ªæ—¥æœŸçš„ä¸‹ä¸€å¤©ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨æ•°æ®åº“æä¾›çš„æ—¥æœŸå‡½æ•°ã€‚è™½ç„¶å…·ä½“å‡½æ•°åå’Œè¯­æ³•å› æ•°æ®åº“ç³»ç»Ÿè€Œå¼‚ï¼Œä½†æ€è·¯ç±»ä¼¼ï¼š&lt;strong&gt;æŒ‡å®šä¸€ä¸ªæ—¥æœŸ/æ—¶é—´ç‚¹ï¼Œä¸ºå…¶åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”ï¼ˆä¾‹å¦‚1å¤©ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ‚¨æ²¡æœ‰æŒ‡å®šæ•°æ®åº“ç³»ç»Ÿï¼Œä¸‹é¢ç”¨è¡¨æ ¼æ±‡æ€»å‡ ç§å¸¸è§æ•°æ®åº“ä¸­è·å–æ—¥æœŸä¸‹ä¸€å¤©çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ•°æ®åº“ç³»ç»Ÿ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒå‡½æ•°/æ“ä½œ&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹ (å‡è®¾è¦è·å–'2023-10-01&amp;rsquo;çš„ä¸‹ä¸€å¤©)&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨/æ¥æº&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATE_ADD(date, INTERVAL expr unit)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATE_ADD('2023-10-01', INTERVAL 1 DAY) AS next_day;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¹Ÿæ”¯æŒ &lt;code&gt;+ INTERVAL&lt;/code&gt;æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;date + INTERVAL expr unit&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT '2023-10-01' + INTERVAL 1 DAY AS next_day;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SQL Server&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATEADD(datepart, number, date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATEADD(DAY, 1, '2023-10-01') AS next_day;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Oracle&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;date + NUMBER&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT TO_DATE('2023-10-01', 'YYYY-MM-DD') + 1 AS next_day FROM DUAL;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ—¥æœŸç›´æ¥åŠ æ•°å­—ï¼ˆå•ä½ä¸ºå¤©ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PostgreSQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;date + INTERVAL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATE '2023-10-01' + INTERVAL '1 day' AS next_day;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æˆ– &lt;code&gt;date + INTEGER&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATE '2023-10-01' + 1 AS next_day;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸€äº›è¯´æ˜å’Œæ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ ä¸€äº›è¯´æ˜å’Œæ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–å½“å‰æ—¥æœŸçš„ä¸‹ä¸€å¤©&lt;/strong&gt;ï¼šè‹¥æƒ³è·å–&lt;strong&gt;å½“å‰æ—¥æœŸ&lt;/strong&gt;ï¼ˆä»Šå¤©ï¼‰çš„ä¸‹ä¸€å¤©ï¼ˆæ˜å¤©ï¼‰ï¼Œå¯åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­å°†å›ºå®šæ—¥æœŸæ›¿æ¢ä¸ºè·å–å½“å‰æ—¥æœŸçš„å‡½æ•°ã€‚ä¾‹å¦‚åœ¨MySQLä¸­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATE_ADD(CURDATE(), INTERVAL 1 DAY) AS tomorrow;
-- æˆ–
SELECT CURDATE() + INTERVAL 1 DAY AS tomorrow;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨SQL Serverä¸­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEADD(DAY, 1, GETDATE()) AS tomorrow;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥æœŸæ ¼å¼éå¸¸é‡è¦&lt;/strong&gt;ï¼šæ•°æ®åº“æœŸæœ›çš„æ—¥æœŸå­—ç¬¦ä¸²æ ¼å¼é€šå¸¸æ˜¯ &lt;code&gt;YYYY-MM-DD&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;'2023-10-01'&lt;/code&gt;ï¼‰ã€‚ä½¿ç”¨å…¶ä»–æ ¼å¼å¯èƒ½å¯¼è‡´é”™è¯¯æˆ–ä¸å¯é¢„çŸ¥çš„ç»“æœã€‚å¦‚æœä¸ç¡®å®šï¼Œè¯·æŸ¥é˜…æ‰€ç”¨æ•°æ®åº“çš„æ—¥æœŸå­—é¢é‡è¡¨ç¤ºè§„èŒƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—æ®µæ“ä½œ&lt;/strong&gt;ï¼šä¸Šè¿°ç¤ºä¾‹åŒæ ·é€‚ç”¨äºè¡¨å­—æ®µï¼ˆåˆ—ï¼‰ã€‚åªéœ€å°†å‡½æ•°ä¸­çš„æ—¥æœŸå­—é¢é‡æ›¿æ¢ä¸ºå­—æ®µåå³å¯ã€‚ä¾‹å¦‚ï¼Œæ›´æ–°è¡¨ä¸­æŸä¸ªæ—¥æœŸå­—æ®µä¸ºå®ƒçš„ä¸‹ä¸€å¤©ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- MySQL ä¸­æ›´æ–°æŸæ—¥æœŸå­—æ®µä¸ºä¸‹ä¸€å¤©
UPDATE your_table
SET your_date_column = DATE_ADD(your_date_column, INTERVAL 1 DAY)
WHERE your_condition;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸€ä¸ªç®€å•çš„åº”ç”¨åœºæ™¯"&gt;ğŸ§  ä¸€ä¸ªç®€å•çš„åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ªç”¨æˆ·ç™»å½•è¡¨ &lt;code&gt;user_logins&lt;/code&gt;ï¼ŒåŒ…å« &lt;code&gt;user_id&lt;/code&gt;å’Œ &lt;code&gt;login_date&lt;/code&gt;å­—æ®µã€‚å¦‚æœæƒ³æ‰¾å‡ºæ‰€æœ‰åœ¨ &lt;strong&gt;é¦–æ¬¡ç™»å½•çš„ç¬¬äºŒå¤©&lt;/strong&gt; ä¹Ÿç™»å½•äº†çš„ç”¨æˆ·ï¼Œå…¶æŸ¥è¯¢æ€è·¯ä¼šæ¶‰åŠè®¡ç®—é¦–æ¬¡ç™»å½•æ—¥æœŸçš„ä¸‹ä¸€å¤©ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¤ºä¾‹æ€è·¯ (MySQLç¯å¢ƒ)
SELECT u1.user_id
FROM user_logins u1
JOIN (
SELECT user_id, MIN(login_date) AS first_login
FROM user_logins
GROUP BY user_id
) u2 ON u1.user_id = u2.user_id
WHERE u1.login_date = u2.first_login + INTERVAL 1 DAY; -- å…³é”®ï¼šä¸‹ä¸€å¤©
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ èƒ½å‘Šè¯‰æˆ‘ä½ ä½¿ç”¨çš„æ˜¯å“ªç§æ•°æ®åº“ï¼ˆå¦‚ MySQLã€SQL Server ç­‰ï¼‰ï¼Œæˆ‘å¯ä»¥æä¾›æ›´ç²¾ç¡®çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;h2 id="åµŒå¥—å­æŸ¥è¯¢å’Œ-join-å­æŸ¥è¯¢"&gt;åµŒå¥—å­æŸ¥è¯¢å’Œ JOIN å­æŸ¥è¯¢
&lt;/h2&gt;&lt;p&gt;ä½ æä¾›çš„ä¸¤ä¸ªSQLæŸ¥è¯¢éƒ½æ˜¯ç”¨æ¥æŸ¥æ‰¾æ²¡æœ‰ä¸åä¸º&amp;rsquo;RED&amp;rsquo;çš„å…¬å¸è¾¾æˆä»»ä½•äº¤æ˜“çš„é”€å”®äººå‘˜çš„åå­—ï¼Œä½†å®ƒä»¬åœ¨æ€§èƒ½ä¸Šç¡®å®æœ‰ä¸€äº›å·®å¼‚ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œç„¶åè¯¦ç»†è§£é‡Šï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;æŸ¥è¯¢ä¸€ï¼ˆåµŒå¥—å­æŸ¥è¯¢ï¼‰&lt;/th&gt;
&lt;th&gt;æŸ¥è¯¢äºŒï¼ˆJOINå­æŸ¥è¯¢ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œé€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»å†…å‘å¤–æ‰§è¡Œï¼Œå…ˆå–&lt;code&gt;com_id&lt;/code&gt;ï¼Œå†æ‰¾è®¢å•ï¼Œæœ€åæ’é™¤é”€å”®äººå‘˜ã€‚æ¯ä¸€æ­¥ç»“æœ&lt;strong&gt;å¯è¢«ç¼“å­˜&lt;/strong&gt;ï¼ˆå¦‚æœä¼˜åŒ–å™¨åˆ¤æ–­åˆé€‚ï¼‰&lt;/td&gt;
&lt;td&gt;å…ˆæ‰§è¡ŒJOINï¼Œç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„ä¸­é—´ç»“æœé›†ï¼ˆæ‰€æœ‰ä¸&amp;rsquo;RED&amp;rsquo;å…¬å¸ç›¸å…³çš„è®¢å•ï¼‰ï¼Œå†æ’é™¤é”€å”®äººå‘˜ã€‚è¿™ä¸ªä¸­é—´ç»“æœé›†&lt;strong&gt;é€šå¸¸éœ€è¦å®æ—¶è®¡ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•åˆ©ç”¨æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹&lt;code&gt;company.name&lt;/code&gt;å’Œ&lt;code&gt;orders.com_id&lt;/code&gt;çš„ç´¢å¼•ä¾èµ–æ€§å¼ºï¼Œ&lt;strong&gt;ç†æƒ³æƒ…å†µä¸‹èƒ½é«˜æ•ˆåˆ©ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜åº¦ä¾èµ–&lt;/strong&gt;&lt;code&gt;orders.com_id&lt;/code&gt;å’Œ&lt;code&gt;company.com_id&lt;/code&gt;åŠ&lt;code&gt;company.name&lt;/code&gt;çš„ç´¢å¼•ã€‚JOINæ¡ä»¶ç´¢å¼•è‡³å…³é‡è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯è¯»æ€§ä¸ç»´æŠ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€»è¾‘æ˜¯åˆ†å±‚å’Œæ¸…æ™°çš„ï¼Œç¬¦åˆâ€œä¸€æ­¥ä¸€æ­¥â€çš„æ€ç»´ï¼Œä½†åµŒå¥—ç¨æ˜¾å¤æ‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨å…³è”å…³ç³»æ›´ç›´è§‚&lt;/strong&gt;ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡º&lt;code&gt;orders&lt;/code&gt;å’Œ&lt;code&gt;company&lt;/code&gt;æ˜¯å¦‚ä½•è¿æ¥çš„ï¼Œå­æŸ¥è¯¢çš„ç›®çš„éå¸¸æ˜ç¡®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ½œåœ¨æ€§èƒ½é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœ&lt;strong&gt;å­æŸ¥è¯¢ç»“æœé›†å¾ˆå¤§&lt;/strong&gt;ï¼Œ&lt;code&gt;NOT IN&lt;/code&gt;çš„æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚MySQLå¯èƒ½æ— æ³•ä¼˜åŒ–æ‰é‡å¤é¡¹ï¼Œå¯¼è‡´æ•ˆç‡ä½ä¸‹&lt;/td&gt;
&lt;td&gt;å¦‚æœ&lt;strong&gt;JOINäº§ç”Ÿçš„ä¸­é—´ç»“æœé›†éå¸¸å¤§&lt;/strong&gt;ï¼ˆæ¯”å¦‚&amp;rsquo;RED&amp;rsquo;å…¬å¸è®¢å•éå¸¸å¤šï¼‰ï¼Œé‚£ä¹ˆæ•´ä¸ªæŸ¥è¯¢çš„æ€§èƒ½ä¼šå—åˆ°è¾ƒå¤§å½±å“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŒ–å™¨å‹å¥½åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç°ä»£MySQLç‰ˆæœ¬ï¼ˆ5.6+ï¼‰ä¼šå°è¯•ä¼˜åŒ–è¿™ç§å­æŸ¥è¯¢ï¼Œä¾‹å¦‚å°è¯•å°†å…¶&lt;strong&gt;è½¬æ¢ä¸ºé«˜æ•ˆçš„JOIN&lt;/strong&gt;ï¼Œä½†&lt;strong&gt;å¹¶éæ€»èƒ½æˆåŠŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“ä¼˜åŒ–å™¨&lt;strong&gt;æ›´æ“…é•¿ä¼˜åŒ–JOINæ“ä½œ&lt;/strong&gt;ï¼Œå¯ä»¥æ›´å¥½åœ°é€‰æ‹©é©±åŠ¨è¡¨ã€è¿æ¥é¡ºåºå’Œè¿æ¥ç®—æ³•ï¼ˆå¦‚Nested Loop, Hash Join, Merge Joinï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å»ºè®®ä½¿ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®é‡é€‚ä¸­ï¼Œæˆ–è€…&lt;code&gt;company&lt;/code&gt;å’Œ&lt;code&gt;orders&lt;/code&gt;è¡¨ç›¸å…³è¿‡æ»¤æ¡ä»¶èƒ½&lt;strong&gt;æœ‰æ•ˆç¼©å°å­æŸ¥è¯¢ç»“æœé›†&lt;/strong&gt;æ—¶&lt;/td&gt;
&lt;td&gt;&lt;code&gt;orders&lt;/code&gt;å’Œ&lt;code&gt;company&lt;/code&gt;è¡¨&lt;strong&gt;å…³è”å­—æ®µæœ‰è‰¯å¥½ç´¢å¼•&lt;/strong&gt;ï¼Œå¹¶ä¸”ä¸&amp;rsquo;RED&amp;rsquo;ç›¸å…³çš„è®¢å•æ•°æ®é‡ä¸ä¼šè¿‡å¤§æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ç»™ä½ çš„ä¼˜åŒ–å»ºè®®"&gt;ğŸ’¡ ç»™ä½ çš„ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼šç¡®ä¿ç›¸å…³å­—æ®µä¸Šéƒ½æœ‰ç´¢å¼•ï¼Œè¿™æ˜¯æå‡æ€§èƒ½çš„åŸºç¡€ã€‚å¯¹äº&lt;code&gt;company&lt;/code&gt;è¡¨ï¼Œ&lt;code&gt;name&lt;/code&gt;å­—æ®µç´¢å¼•å¾ˆé‡è¦ã€‚å¯¹äº&lt;code&gt;orders&lt;/code&gt;è¡¨ï¼Œ&lt;code&gt;com_id&lt;/code&gt;å’Œ&lt;code&gt;sales_id&lt;/code&gt;çš„ç´¢å¼•ä¹Ÿéå¸¸å…³é”®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è€ƒè™‘ä½¿ç”¨&lt;code&gt;NOT EXISTS&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå°¤å…¶æ˜¯å¤„ç†å¯èƒ½å­˜åœ¨&lt;code&gt;NULL&lt;/code&gt;å€¼çš„æƒ…å†µæ—¶ï¼Œç”¨&lt;code&gt;NOT EXISTS&lt;/code&gt;æ›¿ä»£&lt;code&gt;NOT IN&lt;/code&gt;æ˜¯æ›´å®‰å…¨ä¸”&lt;strong&gt;æ€§èƒ½å¾€å¾€æ›´å¥½çš„é€‰æ‹©&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT name
FROM salesperson s
WHERE NOT EXISTS (
SELECT 1
FROM orders o
JOIN company c ON o.com_id = c.com_id
WHERE c.name = &amp;#39;RED&amp;#39;
AND o.sales_id = s.sales_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;NOT EXISTS&lt;/code&gt;ä¸€æ—¦æ‰¾åˆ°åŒ¹é…çš„è¡Œå°±ä¼šåœæ­¢æ‰«æï¼Œæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”èƒ½æ­£ç¡®å¤„ç†&lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨&lt;code&gt;EXPLAIN&lt;/code&gt;åˆ†æ&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç›´æ¥æœ‰æ•ˆçš„æ–¹æ³•ã€‚åœ¨ä½ çš„æ•°æ®åº“ç¯å¢ƒä¸‹ï¼Œ&lt;strong&gt;å¯¹è¿™ä¸¤ä¸ªåŸå§‹æŸ¥è¯¢ä»¥åŠ&lt;code&gt;NOT EXISTS&lt;/code&gt;çš„ç‰ˆæœ¬éƒ½è¿è¡Œ&lt;code&gt;EXPLAIN&lt;/code&gt;&lt;/strong&gt;ï¼ŒæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆæ³¨æ„å…³æ³¨æ˜¯å¦ä½¿ç”¨ç´¢å¼•ã€æ‰«æè¡Œæ•°ã€æ˜¯å¦å‡ºç°ä¸´æ—¶è¡¨æˆ–æ–‡ä»¶æ’åºç­‰ï¼‰ã€‚æ•°æ®åº“ä¼˜åŒ–å™¨çš„é€‰æ‹©å¯èƒ½å› æ•°æ®åˆ†å¸ƒã€è¡¨ç»“æ„å’Œç‰ˆæœ¬è€Œå¼‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¡è§†ä¸šåŠ¡é€»è¾‘ä¸è¡¨è®¾è®¡&lt;/strong&gt;ï¼šå¦‚æœâ€˜REDâ€™å…¬å¸çš„è®¢å•æ•°æ®é‡å·¨å¤§ä¸”é¢‘ç¹æŸ¥è¯¢ï¼Œå¯ä»¥è€ƒè™‘åœ¨&lt;code&gt;orders&lt;/code&gt;è¡¨ä¸­&lt;strong&gt;å†—ä½™å­˜å‚¨å…¬å¸åç§°&lt;/strong&gt;ï¼ˆåèŒƒå¼è®¾è®¡ï¼‰ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥è¿‡æ»¤ï¼Œé¿å…&lt;code&gt;JOIN&lt;/code&gt;ã€‚ä½†è¿™ä¼šå¢åŠ æ•°æ®ä¸€è‡´æ€§ç»´æŠ¤çš„æˆæœ¬ï¼Œéœ€è¦æƒè¡¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä½ çš„ç¬¬äºŒä¸ªæŸ¥è¯¢ï¼ˆä½¿ç”¨äº†JOINï¼‰&lt;strong&gt;ç†è®ºä¸Šæ›´å¯èƒ½è·å¾—æ›´å¥½çš„æ€§èƒ½&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæ›´ç¬¦åˆæ•°æ®åº“ä¼˜åŒ–å™¨çš„ä¼˜åŒ–æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å…³è”å­—æ®µæœ‰ç´¢å¼•å¹¶ä¸”æ•°æ®åº“èƒ½å¤Ÿé«˜æ•ˆå¤„ç†JOINæ“ä½œæ—¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ&lt;strong&gt;æ€§èƒ½å·®å¼‚å¯èƒ½ä¼šå› å…·ä½“çš„æ•°æ®é‡ã€ç´¢å¼•æƒ…å†µã€MySQLç‰ˆæœ¬å’Œé…ç½®è€Œå¼‚&lt;/strong&gt;ã€‚æœ€ç¨³å¦¥çš„åšæ³•æ˜¯éµå¾ªâ€œ&lt;strong&gt;ç´¢å¼•ä¼˜å…ˆ + &lt;code&gt;EXPLAIN&lt;/code&gt;éªŒè¯&lt;/strong&gt;â€çš„åŸåˆ™ã€‚å¯¹äºè¿™ä¸ªéœ€æ±‚ï¼Œä¹Ÿå¼ºçƒˆå»ºè®®ä½ è¯•è¯•&lt;code&gt;NOT EXISTS&lt;/code&gt;çš„å†™æ³•ï¼Œå®ƒ often æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›åˆ†æå¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ æœ‰å…·ä½“çš„è¡¨ç»“æ„å’Œæ•°æ®é‡ä¿¡æ¯ï¼Œç”¨&lt;code&gt;EXPLAIN&lt;/code&gt;è·‘ä¸€ä¸‹ï¼Œçœ‹çœ‹ç»“æœï¼Œä¼šè®©ä½ æ›´äº†è§£æ•°æ®åº“çš„å®é™…æ‰§è¡Œæƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id="select-1"&gt;SELECT 1
&lt;/h2&gt;&lt;p&gt;&amp;ldquo;SELECT 1&amp;rdquo; åœ¨ SQL ä¸­æ˜¯ä¸€ä¸ªå¸¸è§ä¸”å®ç”¨çš„æŠ€å·§ï¼Œå®ƒçš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;å¿«é€Ÿæ£€æŸ¥æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œè€Œéè·å–å®é™…æ•°æ®&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘ä¼šè¯¦ç»†è§£é‡Šå®ƒçš„ä½œç”¨ã€å¸¸è§ç”¨æ³•ä»¥åŠéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€åŸºæœ¬æ¦‚å¿µä¸åŸç†"&gt;ğŸ“Š ä¸€ã€åŸºæœ¬æ¦‚å¿µä¸åŸç†
&lt;/h3&gt;&lt;p&gt;&amp;ldquo;SELECT 1&amp;rdquo; çš„å«ä¹‰æ˜¯&lt;strong&gt;è¿”å›ä¸€ä¸ªå¸¸æ•°å€¼ï¼ˆæ•°å­—1ï¼‰&lt;/strong&gt;ã€‚å®ƒå¹¶ä¸å…³å¿ƒè¡¨é‡Œå…·ä½“æœ‰ä»€ä¹ˆæ•°æ®ï¼Œä¹Ÿä¸ä¼šå»è¯»å–å®é™…çš„åˆ—å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæ‰§è¡Œ &lt;code&gt;SELECT 1 FROM users;&lt;/code&gt;ä¼šä¸º &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­çš„æ¯ä¸€è¡Œè¿”å›ä¸€ä¸ªæ•°å­—1ï¼Œç»“æœé›†çš„è¡Œæ•°ä¸åŸè¡¨ç›¸åŒï¼Œä½†æ¯è¡Œåªæœ‰ä¸€ä¸ªå€¼ä¸º1çš„åˆ—ã€‚&lt;/p&gt;
&lt;p&gt;ä½ ç”šè‡³å¯ä»¥çœç•¥è¡¨åï¼Œç›´æ¥æ‰§è¡Œ &lt;code&gt;SELECT 1;&lt;/code&gt;ï¼ˆåœ¨ MySQL ç­‰æ•°æ®åº“ä¸­ï¼Œè¿™å®é™…ä¸Šæ˜¯ä»è™šæ‹Ÿè¡¨ DUAL æŸ¥è¯¢ï¼‰ï¼Œå®ƒåŒæ ·ä¼šè¿”å›ä¸€ä¸ª1ã€‚&lt;/p&gt;
&lt;h3 id="-äºŒä¸»è¦ç”¨é€”"&gt;ğŸ¯ äºŒã€ä¸»è¦ç”¨é€”
&lt;/h3&gt;&lt;p&gt;&amp;ldquo;SELECT 1&amp;rdquo; ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸è§ç”¨é€”ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ğŸ·ï¸ å­˜åœ¨æ€§æ£€æŸ¥ï¼ˆæœ€å¸¸ç”¨ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯ &lt;code&gt;SELECT 1&lt;/code&gt;æœ€ç»å…¸çš„ç”¨æ³•ï¼Œé€šå¸¸ä¸ &lt;code&gt;EXISTS&lt;/code&gt;æˆ– &lt;code&gt;NOT EXISTS&lt;/code&gt;å­å¥é…åˆï¼Œç”¨äºæ£€æŸ¥æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæƒ³æ‰¾å‡ºæ²¡æœ‰ä¸‹è¿‡è®¢å•çš„å®¢æˆ·ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM Customers
WHERE NOT EXISTS (
SELECT 1 FROM Orders
WHERE Customers.CustomerID = Orders.CustomerID
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;SELECT 1&lt;/code&gt;ä»…ä»…æ˜¯ä¸ºäº†æ»¡è¶³è¯­æ³•è¦æ±‚ï¼Œæ•°æ®åº“å¼•æ“åªéœ€åˆ¤æ–­å­æŸ¥è¯¢æ˜¯å¦æœ‰ç»“æœè¿”å›ï¼Œ&lt;strong&gt;å¹¶ä¸éœ€è¦è¯»å– Orders è¡¨çš„ä»»ä½•å…·ä½“åˆ—æ•°æ®&lt;/strong&gt;ï¼Œå› æ­¤æ•ˆç‡å¾ˆé«˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ğŸ”§ æ•°æ®åº“è¿æ¥æµ‹è¯•&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºæˆ–è„šæœ¬ä¸­ï¼Œæœ‰æ—¶éœ€è¦éªŒè¯æ•°æ®åº“è¿æ¥æ˜¯å¦æœ‰æ•ˆä¸”é€šç•…ã€‚æ‰§è¡Œä¸€æ¡åƒ &lt;code&gt;SELECT 1;&lt;/code&gt;è¿™æ ·ç®€å•ä¸”è½»é‡çš„è¯­å¥ï¼Œå¦‚æœæˆåŠŸè¿”å›ç»“æœï¼Œå°±è¯´æ˜è¿æ¥æ˜¯æ­£å¸¸çš„ã€‚&lt;/p&gt;
&lt;p&gt;Python ä¼ªä»£ç ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;try:
cursor.execute(&amp;#34;SELECT 1&amp;#34;)
print(&amp;#34;æ•°æ®åº“è¿æ¥æ­£å¸¸!&amp;#34;)
except Error as e:
print(&amp;#34;è¿æ¥å¤±è´¥:&amp;#34;, e)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;â±ï¸ æ€§èƒ½å‹æµ‹&lt;/strong&gt;ï¼šåœ¨å¯¹æ•°æ®åº“è¿›è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•æˆ–å‹åŠ›æµ‹è¯•æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;SELECT 1&lt;/code&gt;å¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘ SQL æœ¬èº«å¸¦æ¥çš„ I/O å’Œè®¡ç®—å¼€é”€ï¼ˆå› ä¸ºä¸éœ€è¦è®¿é—®çœŸå®æ•°æ®ï¼‰ï¼Œä»è€Œæ›´çº¯ç²¹åœ°æµ‹è¯•æ•°æ®åº“æœåŠ¡çš„&lt;strong&gt;å“åº”é€Ÿåº¦å’Œå¹¶å‘å¤„ç†èƒ½åŠ›&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œåœ¨ MySQL ä¸­å¯ä»¥ä½¿ç”¨ï¼š&lt;code&gt;SELECT BENCHMARK(1000000, SELECT 1);&lt;/code&gt;æ¥é‡å¤æ‰§è¡Œå¤šæ¬¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;â¡ï¸ å­æŸ¥è¯¢ä¸­çš„å ä½ç¬¦&lt;/strong&gt;ï¼šåœ¨æŸäº›å­æŸ¥è¯¢ä¸­ï¼Œå¯èƒ½åªéœ€è¦ä¸€ä¸ªè¯­æ³•ä¸Šçš„å ä½ç¬¦ï¼Œè€Œä¸éœ€è¦å®é™…æ•°æ®ã€‚&lt;code&gt;SELECT 1&lt;/code&gt;æ­¤æ—¶å°±æ˜¯ä¸€ä¸ªç®€æ´çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE orders SET status = &amp;#39;processed&amp;#39;
WHERE id IN (
SELECT 1 FROM temp_order_ids WHERE condition = true
);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸‰select-1ä¸-select-çš„å¯¹æ¯”"&gt;âš–ï¸ ä¸‰ã€&lt;code&gt;SELECT 1&lt;/code&gt;ä¸ &lt;code&gt;SELECT *&lt;/code&gt;çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ç†è§£ &lt;code&gt;SELECT 1&lt;/code&gt;å’Œ &lt;code&gt;SELECT *&lt;/code&gt;çš„åŒºåˆ«ï¼Œèƒ½æ›´å¥½åœ°æŠŠæ¡å…¶é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”é¡¹&lt;/th&gt;
&lt;th&gt;&lt;code&gt;SELECT 1&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;SELECT *&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œæ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— éœ€è¯»å–åˆ—æ•°æ®ï¼Œä»…éªŒè¯è¡Œæ˜¯å¦å­˜åœ¨ï¼Œ&lt;strong&gt;æ›´å¿«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦è¯»å–æ‰€æœ‰åˆ—æ•°æ®ï¼Œ&lt;strong&gt;è¾ƒæ…¢&lt;/strong&gt;ï¼ˆå°¤å…¶å¯¹å®½è¡¨æˆ–å¤§å­—æ®µè¡¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›ç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›ºå®šå¸¸é‡å€¼ (1)&lt;/td&gt;
&lt;td&gt;è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µæ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€»è¾‘æ¡ä»¶éªŒè¯ã€å­˜åœ¨æ€§æ£€æŸ¥&lt;/td&gt;
&lt;td&gt;éœ€è¦è·å–å®é™…æ•°æ®çš„æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦æ¶‰åŠI/O&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ›´å°‘&lt;/td&gt;
&lt;td&gt;æ›´å¤š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å½“ä½ åªå…³å¿ƒâ€œæœ‰æ²¡æœ‰â€æ—¶ï¼Œç”¨ &lt;code&gt;SELECT 1&lt;/code&gt;ï¼›å½“ä½ å…³å¿ƒâ€œæ˜¯ä»€ä¹ˆâ€æ—¶ï¼Œæ‰ç”¨ &lt;code&gt;SELECT \*&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å››å…¶ä»–ç±»ä¼¼å†™æ³•ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ” å››ã€å…¶ä»–ç±»ä¼¼å†™æ³•ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SELECT 1&lt;/code&gt;ä¸ &lt;code&gt;SELECT COUNT(1)&lt;/code&gt;/ &lt;code&gt;SELECT SUM(1)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸‰è€…å®Œå…¨ä¸åŒã€‚
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT 1 FROM table&lt;/code&gt;ä¼šè¿”å›ä¸€ä¸ªåˆ—ï¼Œå…¶è¡Œæ•°ä¸è¡¨ç›¸åŒï¼Œæ¯è¡Œéƒ½æ˜¯1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT COUNT(1) FROM table&lt;/code&gt;æˆ– &lt;code&gt;SELECT SUM(1) FROM table&lt;/code&gt;ä¼š&lt;strong&gt;èšåˆ&lt;/strong&gt;è®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªå•ä¸€æ•°å€¼ï¼Œå³è¡¨çš„&lt;strong&gt;æ€»è¡Œæ•°&lt;/strong&gt;ï¼ˆå› ä¸ºå¯¹æ¯è¡Œçš„å¸¸é‡1è¿›è¡Œè®¡æ•°æˆ–æ±‚å’Œï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸é‡å€¼å¯ä»¥æ›¿æ¢&lt;/strong&gt;ï¼š&lt;code&gt;SELECT 1&lt;/code&gt;ä¸­çš„ &amp;ldquo;1&amp;rdquo; å¹¶éå›ºå®šä¸å˜ï¼Œæ ¹æ®ä¹ æƒ¯æˆ–ç‰¹å®šéœ€è¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;SELECT 2&lt;/code&gt;ã€&lt;code&gt;SELECT 'A'&lt;/code&gt;ã€&lt;code&gt;SELECT NULL&lt;/code&gt;ç­‰ï¼Œå®ƒä»¬åœ¨&lt;strong&gt;å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;ä¸­çš„ä½œç”¨æ˜¯&lt;strong&gt;ç­‰ä»·&lt;/strong&gt;çš„ã€‚ æ•°å­—1åªæ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„çº¦å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶éä¸‡èƒ½&lt;/strong&gt;ï¼š&lt;code&gt;SELECT 1&lt;/code&gt;çš„è½»é‡ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨é¿å…äº†ä¸å¿…è¦çš„åˆ—æ•°æ®è¯»å–ã€‚ä½†å¦‚æœå­æŸ¥è¯¢æœ¬èº«æ²¡æœ‰åˆé€‚çš„ç´¢å¼•ï¼Œæˆ–è€…éœ€è¦æ‰«æå¤§é‡æ•°æ®æ‰èƒ½åˆ¤æ–­å­˜åœ¨æ€§ï¼Œå…¶æ€§èƒ½ä»ç„¶å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚æ­¤æ—¶ï¼Œä¼˜åŒ–ç´¢å¼•å’ŒæŸ¥è¯¢æ¡ä»¶æ›´ä¸ºå…³é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT 1&lt;/code&gt;æ˜¯ SQL ä¸­ä¸€ä¸ªä»¥&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸“æ³¨&lt;/strong&gt;ï¼ˆäºå­˜åœ¨æ€§åˆ¤æ–­ï¼‰ä¸ºç‰¹ç‚¹çš„å†™æ³•ã€‚&lt;strong&gt;å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼šç”¨æœ€å°çš„èµ„æºå¼€é”€ï¼Œæ¥å¿«é€Ÿå›ç­”â€œæ˜¯å¦å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„è®°å½•â€è¿™ä¸ªé—®é¢˜&lt;/strong&gt;ã€‚ è®°ä½å®ƒçš„æœ€ä½³æ­æ¡£æ˜¯ &lt;code&gt;EXISTS&lt;/code&gt;å­å¥ï¼Œå¹¶åœ¨ä¸‹æ¬¡è¿›è¡Œå­˜åœ¨æ€§æ£€æŸ¥æˆ–è¿æ¥æµ‹è¯•æ—¶ï¼Œè€ƒè™‘ä½¿ç”¨å®ƒæ¥ä»£æ›¿ &lt;code&gt;SELECT *&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="count-count1-and-countcol"&gt;COUNT(*), COUNT(1) and COUNT(col)
&lt;/h2&gt;&lt;p&gt;ç†è§£ &lt;code&gt;COUNT(*)&lt;/code&gt;, &lt;code&gt;COUNT(1)&lt;/code&gt;, å’Œ &lt;code&gt;COUNT(column)&lt;/code&gt;çš„åŒºåˆ«æ˜¯ SQL æŸ¥è¯¢ä¸­çš„å¸¸è§é—®é¢˜ã€‚å®ƒä»¬è™½ç„¶éƒ½ç”¨äºè®¡æ•°ï¼Œä½†åœ¨è¯­ä¹‰ã€å¯¹ç©ºå€¼çš„å¤„ç†ä»¥åŠæ•°æ®åº“ä¼˜åŒ–å™¨å¤„ç†æ–¹å¼ä¸Šå­˜åœ¨å·®å¼‚ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;COUNT(*)&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;COUNT(1)&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;COUNT(column)&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»Ÿè®¡å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡&lt;strong&gt;æ‰€æœ‰è¡Œ&lt;/strong&gt;çš„æ•°é‡&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡&lt;strong&gt;æ‰€æœ‰è¡Œ&lt;/strong&gt;çš„æ•°é‡&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡æŒ‡å®šåˆ—ä¸­&lt;strong&gt;é NULL å€¼&lt;/strong&gt;çš„æ•°é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦åŒ…å«NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… åŒ…å«&lt;/td&gt;
&lt;td&gt;âœ… åŒ…å«&lt;/td&gt;
&lt;td&gt;âŒ ä¸åŒ…å«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“é€šå¸¸ä¼šä¼˜åŒ–ï¼Œ&lt;strong&gt;ä¸è¯»å–å®é™…æ•°æ®åˆ—&lt;/strong&gt;ï¼Œåªå…³å¿ƒè¡Œæ˜¯å¦å­˜åœ¨&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“é€šå¸¸ä¼šä¼˜åŒ–ï¼Œ&lt;strong&gt;ä¸è¯»å–å®é™…æ•°æ®åˆ—&lt;/strong&gt;ï¼Œåªå…³å¿ƒè¡Œæ˜¯å¦å­˜åœ¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦è¯»å–æŒ‡å®šåˆ—çš„å€¼&lt;/strong&gt;å¹¶åˆ¤æ–­æ˜¯å¦ä¸ºNULL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å‚è€ƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ (ä¼˜åŒ–æœ€å¥½)&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ (ä¸ &lt;code&gt;COUNT(*)&lt;/code&gt;åŸºæœ¬ç›¸åŒ)&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸ï½â­ï¸â­ï¸â­ï¸ (é€šå¸¸è¾ƒæ…¢ï¼Œ&lt;strong&gt;å¼ºçƒˆä¾èµ–äºè¯¥åˆ—æ˜¯å¦æœ‰ç´¢å¼•&lt;/strong&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­ä¹‰æ¸…æ™°åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ (éå¸¸æ˜ç¡®æ˜¯ç»Ÿè®¡è¡Œæ•°)&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸ (è¯­ä¹‰ä¸Šç•¥é€Šäº &lt;code&gt;COUNT(*)&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ (éå¸¸æ˜ç¡®æ˜¯ç»Ÿè®¡æŸåˆ—éç©ºå€¼æ•°é‡)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èä½¿ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»Ÿè®¡è¡¨ä¸­çš„æ€»è¡Œæ•°&lt;/strong&gt;ï¼ˆé¦–é€‰ï¼‰&lt;/td&gt;
&lt;td&gt;æ•ˆæœåŒ &lt;code&gt;COUNT(*)&lt;/code&gt;ï¼Œä½†æ›´æ¨èä½¿ç”¨ &lt;code&gt;COUNT(*)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»Ÿè®¡ç‰¹å®šåˆ—ä¸­éç©ºå€¼çš„æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;å…³äºæ€§èƒ½çš„è¡¥å……è¯´æ˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;COUNT(*)&lt;/code&gt;å’Œ &lt;code&gt;COUNT(1)&lt;/code&gt;åœ¨ç°ä»£æ•°æ®åº“ï¼ˆå¦‚ MySQLã€PostgreSQL ç­‰ï¼‰ä¸­çš„&lt;strong&gt;æ€§èƒ½å‡ ä¹æ²¡æœ‰å·®å¼‚&lt;/strong&gt;ã€‚æ•°æ®åº“ä¼˜åŒ–å™¨é€šå¸¸ä¼šå°†å®ƒä»¬è§†ä¸ºç›¸åŒçš„æ“ä½œï¼Œé€‰æ‹©æœ€å°çš„å¯ç”¨ç´¢å¼•ï¼ˆé€šå¸¸æ˜¯äºŒçº§ç´¢å¼•ï¼‰æ¥ç»Ÿè®¡è¡Œæ•°ï¼Œé¿å…äº†å…¨è¡¨æ‰«æã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;COUNT(column)&lt;/code&gt;çš„æ€§èƒ½åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Š&lt;strong&gt;å–å†³äºè¯¥åˆ—æ˜¯å¦æœ‰ç´¢å¼•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;column&lt;/code&gt;å­—æ®µä¸Šæœ‰ç´¢å¼•ï¼Œæ•°æ®åº“å¯èƒ½ä¼šåˆ©ç”¨ç´¢å¼•æ¥ç»Ÿè®¡éNULLå€¼çš„æ•°é‡ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;column&lt;/code&gt;å­—æ®µä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œæ•°æ®åº“å°±éœ€è¦è¿›è¡Œ&lt;strong&gt;å…¨è¡¨æ‰«æ&lt;/strong&gt;ï¼Œå¹¶é€è¡Œæ£€æŸ¥è¯¥åˆ—çš„å€¼æ˜¯å¦ä¸ºNULLï¼Œè¿™åœ¨è¡¨å¾ˆå¤§æ—¶ä¼šéå¸¸è€—æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;å³ä½¿ &lt;code&gt;column&lt;/code&gt;æ˜¯ä¸»é”®&lt;/strong&gt;ï¼Œ&lt;code&gt;COUNT(column)&lt;/code&gt;ä¹Ÿ&lt;strong&gt;å¯èƒ½&lt;/strong&gt;æ¯” &lt;code&gt;COUNT(*)&lt;/code&gt;ç¨æ…¢ã€‚å› ä¸º &lt;code&gt;COUNT(*)&lt;/code&gt;æ•°æ®åº“å¯èƒ½ä¼šé€‰æ‹©æ›´å°çš„äºŒçº§ç´¢å¼•æ¥æ‰«æï¼Œè€Œ &lt;code&gt;COUNT(column)&lt;/code&gt;ï¼ˆå¦‚æœcolumnæ˜¯ä¸»é”®ï¼‰åˆ™ä¼šå¼ºåˆ¶æ‰«æä¸»é”®ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼Œè€Œèšç°‡ç´¢å¼•é€šå¸¸åŒ…å«æ•´ä¸ªæ•°æ®è¡Œï¼Œä½“ç§¯æ›´å¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸¾ä¾‹è¯´æ˜"&gt;ğŸ“Š ä¸¾ä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€å¼  &lt;code&gt;students&lt;/code&gt;è¡¨ï¼Œæ•°æ®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;id&lt;/th&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;age&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Alice&lt;/td&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Bob&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;22&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ‰§è¡Œä¸åŒ COUNT è¯­å¥çš„ç»“æœæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SELECT COUNT(*) FROM students;&lt;/code&gt;ç»“æœä¸º &lt;strong&gt;4&lt;/strong&gt;ï¼ˆç»Ÿè®¡æ‰€æœ‰è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT COUNT(1) FROM students;&lt;/code&gt;ç»“æœä¸º &lt;strong&gt;4&lt;/strong&gt;ï¼ˆç»Ÿè®¡æ‰€æœ‰è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT COUNT(name) FROM students;&lt;/code&gt;ç»“æœä¸º &lt;strong&gt;2&lt;/strong&gt;ï¼ˆåªç»Ÿè®¡ &lt;code&gt;name&lt;/code&gt;åˆ—ä¸­éNULLå€¼çš„è¡Œï¼Œå³ &amp;ldquo;Alice&amp;rdquo; å’Œ &amp;ldquo;Bob&amp;rdquo;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT COUNT(age) FROM students;&lt;/code&gt;ç»“æœä¸º &lt;strong&gt;2&lt;/strong&gt;ï¼ˆåªç»Ÿè®¡ &lt;code&gt;age&lt;/code&gt;åˆ—ä¸­éNULLå€¼çš„è¡Œï¼Œå³ 20 å’Œ 22ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸš€ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æƒ³ç»Ÿè®¡è¡¨çš„æ€»è¡Œæ•°æ—¶ï¼Œç”¨ &lt;code&gt;COUNT(\*)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯ SQL æ ‡å‡†å†™æ³•ï¼Œè¯­ä¹‰æœ€æ¸…æ™°ï¼Œè€Œä¸”æ•°æ®åº“å¯¹å…¶ä¼˜åŒ–å¾—æœ€å¥½ï¼Œæ€§èƒ½æœ€ä½³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ³ç»Ÿè®¡æŸåˆ—ä¸­éç©ºå€¼çš„æ•°é‡æ—¶ï¼Œç”¨ &lt;code&gt;COUNT(column)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯å®ƒçš„ä¸“å±ç”¨é€”ã€‚å¦‚æœç»å¸¸éœ€è¦å¯¹è¯¥åˆ—è¿›è¡Œæ­¤ç±»ç»Ÿè®¡ï¼Œä¸ºå…¶å»ºç«‹ç´¢å¼•ä¼šå¤§å¤§æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;COUNT(1)&lt;/code&gt;å’Œ &lt;code&gt;COUNT(\*)&lt;/code&gt;æŒ‰éœ€é€‰æ‹©å³å¯&lt;/strong&gt;ï¼šä¸¤è€…åœ¨æ•ˆç‡å’Œç»“æœä¸Šå¹¶æ— å®è´¨åŒºåˆ«ã€‚ä½ å¯ä»¥æ ¹æ®å›¢é˜Ÿä¹ æƒ¯æˆ–ä¸ªäººåå¥½é€‰æ‹©ï¼Œä½†é€šå¸¸æ›´æ¨èä½¿ç”¨è¯­ä¹‰æ›´æ˜ç¡®çš„ &lt;code&gt;COUNT(*)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="exist--in"&gt;EXIST &amp;amp; IN
&lt;/h2&gt;&lt;p&gt;EXISTS å’Œ IN æ˜¯ SQL ä¸­ç”¨äºå­æŸ¥è¯¢çš„ä¸¤ç§æ“ä½œç¬¦ï¼Œè™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥å®ç°ç›¸ä¼¼çš„æŸ¥è¯¢ç»“æœï¼Œä½†å®ƒä»¬çš„åº•å±‚æœºåˆ¶ã€é€‚ç”¨åœºæ™¯å’Œæ€§èƒ½ç‰¹ç‚¹æœ‰æ˜¾è‘—åŒºåˆ«ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿæ¢³ç†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ï¼Œç„¶åå†è¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;EXISTS&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IN&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…³è”å­æŸ¥è¯¢&lt;/strong&gt;ã€‚éå†å¤–éƒ¨è¡¨ï¼Œå¯¹æ¯ä¸€è¡Œæ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢ï¼Œä¸€æ—¦æ‰¾åˆ°åŒ¹é…å°±åœæ­¢ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éå…³è”å­æŸ¥è¯¢&lt;/strong&gt;ã€‚å…ˆæ‰§è¡Œå­æŸ¥è¯¢ï¼Œå°†ç»“æœé›†ç¼“å­˜åˆ°å†…å­˜ï¼Œç„¶åéå†å¤–éƒ¨è¡¨ï¼Œæ£€æŸ¥å€¼æ˜¯å¦åœ¨ç»“æœé›†ä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´å®‰å…¨&lt;/strong&gt;ã€‚&lt;code&gt;NOT EXISTS&lt;/code&gt;ä¼šæŒ‰é¢„æœŸå·¥ä½œï¼Œä¸å—å­æŸ¥è¯¢ä¸­çš„ NULL å€¼å½±å“ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ‰é£é™©&lt;/strong&gt;ã€‚å¦‚æœå­æŸ¥è¯¢è¿”å› NULLï¼Œ&lt;code&gt;NOT IN&lt;/code&gt;çš„æ¡ä»¶ä¼šè¯„ä¼°ä¸º &lt;code&gt;UNKNOWN&lt;/code&gt;ï¼ˆç›¸å½“äº FALSEï¼‰ï¼Œå¯èƒ½å¯¼è‡´æ„å¤–ç»“æœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½åå¥½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢&lt;strong&gt;ç»“æœé›†å¤§&lt;/strong&gt;ã€æ˜¯&lt;strong&gt;å…³è”æŸ¥è¯¢&lt;/strong&gt;ã€ä¸”&lt;strong&gt;å…³è”å­—æ®µæœ‰ç´¢å¼•&lt;/strong&gt;æ—¶ï¼Œæ€§èƒ½é€šå¸¸æ›´å¥½ã€‚&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢&lt;strong&gt;ç»“æœé›†å°&lt;/strong&gt;ã€ä¸”ä¸º&lt;strong&gt;éå…³è”æŸ¥è¯¢&lt;/strong&gt;æ—¶ï¼Œæ€§èƒ½å¯èƒ½æ›´ä¼˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥&lt;strong&gt;å­˜åœ¨æ€§&lt;/strong&gt;ï¼Œå¸¸ç”¨äºåŠ¨æ€çš„ã€æ¡ä»¶æ€§çš„å…³è”æŸ¥è¯¢ã€‚&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥&lt;strong&gt;å€¼åŒ¹é…&lt;/strong&gt;ï¼Œå¸¸ç”¨äºé™æ€çš„ã€ç¡®å®šæ€§çš„å€¼åˆ—è¡¨æˆ–ç®€å•å­æŸ¥è¯¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä½¿ç”¨æ–¹æ³•ä¸ç¤ºä¾‹"&gt;ğŸ’¡ ä½¿ç”¨æ–¹æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼š&lt;code&gt;customers&lt;/code&gt;ï¼ˆå®¢æˆ·ï¼‰å’Œ &lt;code&gt;orders&lt;/code&gt;ï¼ˆè®¢å•ï¼‰ï¼Œæˆ‘ä»¬æƒ³æ‰¾å‡ºæ‰€æœ‰ä¸‹è¿‡è®¢å•çš„å®¢æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ INï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM customers
WHERE id IN (SELECT customer_id FROM orders);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥ä¼šå…ˆæ‰§è¡Œ &lt;code&gt;(SELECT customer_id FROM orders)&lt;/code&gt;ï¼Œå¾—åˆ°ä¸€ä¸ªæ‰€æœ‰å®¢æˆ·IDçš„åˆ—è¡¨ï¼Œç„¶åå†æ£€æŸ¥ &lt;code&gt;customers&lt;/code&gt;è¡¨ä¸­çš„æ¯ä¸ª &lt;code&gt;id&lt;/code&gt;æ˜¯å¦åœ¨è¿™ä¸ªåˆ—è¡¨é‡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ EXISTSï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM customers c
WHERE EXISTS (SELECT 1 FROM orders o WHERE o.customer_id = c.id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥ä¼šéå† &lt;code&gt;customers&lt;/code&gt;è¡¨çš„æ¯ä¸€è¡Œï¼Œå¯¹äºæ¯ä¸€è¡Œï¼ˆä¾‹å¦‚ &lt;code&gt;id = 5&lt;/code&gt;ï¼‰ï¼Œå»æ‰§è¡Œå­æŸ¥è¯¢ &lt;code&gt;(SELECT 1 FROM orders o WHERE o.customer_id = 5)&lt;/code&gt;ã€‚åªè¦æ‰¾åˆ°ä¸€æ¡åŒ¹é…çš„è®¢å•ï¼Œå°±ç«‹å³è¿”å› TRUEï¼Œå¹¶ä¿ç•™è¯¥å®¢æˆ·è®°å½•ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è­¦æƒ• NOT IN çš„ NULL é™·é˜±&lt;/strong&gt;ï¼šå½“å­æŸ¥è¯¢å¯èƒ½è¿”å› NULL å€¼æ—¶ï¼Œ&lt;code&gt;NOT IN&lt;/code&gt;çš„è¡Œä¸ºå¯èƒ½ä¸ç¬¦åˆé¢„æœŸã€‚å®‰å…¨åšæ³•æ˜¯ç¡®ä¿å­æŸ¥è¯¢æ’é™¤ NULLï¼Œæˆ–ç›´æ¥ä½¿ç”¨ &lt;code&gt;NOT EXISTS&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä¸å®‰å…¨å†™æ³•
SELECT * FROM table_a WHERE id NOT IN (SELECT some_id FROM table_b);
-- å®‰å…¨å†™æ³•ï¼ˆæ’é™¤NULLï¼‰
SELECT * FROM table_a WHERE id NOT IN (SELECT some_id FROM table_b WHERE some_id IS NOT NULL);
-- æ¨èå†™æ³•ï¼ˆä½¿ç”¨NOT EXISTSï¼‰
SELECT * FROM table_a a
WHERE NOT EXISTS (SELECT 1 FROM table_b b WHERE b.some_id = a.id);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç´¢å¼•æ˜¯å…³é”®&lt;/strong&gt;ï¼šæ— è®ºæ˜¯ &lt;code&gt;EXISTS&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;IN&lt;/code&gt;ï¼Œè‰¯å¥½çš„ç´¢å¼•æ˜¯é«˜æ€§èƒ½çš„ä¿éšœã€‚å¯¹äº &lt;code&gt;EXISTS&lt;/code&gt;ï¼Œåº”ç¡®ä¿&lt;strong&gt;å­æŸ¥è¯¢çš„å…³è”æ¡ä»¶å­—æ®µï¼ˆå¦‚ &lt;code&gt;o.customer_id&lt;/code&gt;ï¼‰æœ‰ç´¢å¼•&lt;/strong&gt;ã€‚å¯¹äº &lt;code&gt;IN&lt;/code&gt;ï¼Œè™½ç„¶å­æŸ¥è¯¢ç»“æœé›†æœ¬èº«æ— æ³•åˆ©ç”¨ç´¢å¼•ï¼Œä½†åº”ç¡®ä¿&lt;strong&gt;å¤–éƒ¨æŸ¥è¯¢çš„ç­›é€‰å­—æ®µï¼ˆå¦‚ &lt;code&gt;customers.id&lt;/code&gt;ï¼‰æœ‰ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è€ƒè™‘ä½¿ç”¨ JOIN æ”¹å†™&lt;/strong&gt;ï¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå°¤å…¶æ˜¯éœ€è¦è·å–å…³è”è¡¨çš„æ•°æ®æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;JOIN&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;INNER JOIN&lt;/code&gt;æˆ– &lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼‰å¯èƒ½æ˜¯æ¯” &lt;code&gt;EXISTS&lt;/code&gt;æˆ– &lt;code&gt;IN&lt;/code&gt;æ›´æ¸…æ™°ã€æ€§èƒ½æ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ§© å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥æ ¹æ®ä»¥ä¸‹æƒ…å†µåšå†³å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ EXISTS å½“&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å­æŸ¥è¯¢&lt;strong&gt;ç»“æœé›†å¾ˆå¤§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å­æŸ¥è¯¢æ˜¯&lt;strong&gt;å…³è”å­æŸ¥è¯¢&lt;/strong&gt;ï¼ˆå¼•ç”¨äº†å¤–éƒ¨æŸ¥è¯¢çš„åˆ—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦å¤„ç† &lt;code&gt;NOT NULL&lt;/code&gt;é€»è¾‘æ—¶ï¼ˆä½¿ç”¨ &lt;code&gt;NOT EXISTS&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ä»¥è€ƒè™‘ä½¿ç”¨ IN å½“&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å­æŸ¥è¯¢&lt;strong&gt;ç»“æœé›†å¾ˆå°ä¸”å›ºå®š&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å­æŸ¥è¯¢æ˜¯&lt;strong&gt;éå…³è”&lt;/strong&gt;çš„ï¼ˆå¯ä»¥ç‹¬ç«‹æ‰§è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢é€»è¾‘æ›´æ³¨é‡&lt;strong&gt;å€¼åˆ—è¡¨çš„åŒ¹é…&lt;/strong&gt;ï¼Œä¸”ä»£ç &lt;strong&gt;å¯è¯»æ€§æ›´é‡è¦&lt;/strong&gt;æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ EXISTS å’Œ IN çš„åŒºåˆ«ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œçµæ´»è¿ç”¨å¹¶ç»“åˆæ‰§è¡Œè®¡åˆ’åˆ†æï¼Œæ‰èƒ½å†™å‡ºæœ€ä¼˜çš„æŸ¥è¯¢è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="not-exists"&gt;NOT EXISTS
&lt;/h2&gt;&lt;p&gt;ä½ æä¾›çš„æŸ¥è¯¢è¯­å¥æŠ¥é”™ï¼Œä¸»è¦æ˜¯å› ä¸º SQL ä¸­çš„å…³é”®å­—æ˜¯ &lt;strong&gt;&lt;code&gt;NOT EXISTS&lt;/code&gt;&lt;/strong&gt; è€Œä¸æ˜¯ &lt;code&gt;NOT EXIST&lt;/code&gt;ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ç¡®ä¿å­æŸ¥è¯¢çš„é€»è¾‘æ­£ç¡®ï¼Œæ‰èƒ½æ‰¾åˆ°ä»…åœ¨ç‰¹å®šæ—¶é—´æ®µé”€å”®çš„äº§å“ã€‚&lt;/p&gt;
&lt;h3 id="-æŠ¥é”™åŸå› ä¸ä¿®æ­£"&gt;ğŸ” æŠ¥é”™åŸå› ä¸ä¿®æ­£
&lt;/h3&gt;&lt;p&gt;ä½ çš„åŸæŸ¥è¯¢æŠ¥é”™ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å­—æ‹¼å†™é”™è¯¯&lt;/strong&gt;ï¼šSQL ä¸­ç”¨äºåˆ¤æ–­æ˜¯å¦&lt;strong&gt;ä¸å­˜åœ¨&lt;/strong&gt;çš„å­æŸ¥è¯¢å…³é”®å­—æ˜¯ &lt;code&gt;NOT EXISTS&lt;/code&gt;ï¼Œè€Œä¸æ˜¯ &lt;code&gt;NOT EXIST&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘å¯èƒ½ä¸ä¸¥è°¨&lt;/strong&gt;ï¼šåŸæŸ¥è¯¢çš„é€»è¾‘æ˜¯â€œæŸ¥æ‰¾ä»æœªåœ¨ 2019-01-01 ä¹‹å‰ &lt;strong&gt;æˆ–&lt;/strong&gt; 2019-03-31 ä¹‹åé”€å”®è¿‡çš„äº§å“â€ã€‚è¿™å¹¶ä¸èƒ½å®Œå…¨ä¿è¯äº§å“&lt;strong&gt;ä¸€å®šåœ¨&lt;/strong&gt; 2019å¹´ç¬¬ä¸€å­£åº¦å†…é”€å”®è¿‡ã€‚å®ƒå¯èƒ½æ ¹æœ¬æ²¡æœ‰ä»»ä½•é”€å”®è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿äº§å“åœ¨2019å¹´ç¬¬ä¸€å­£åº¦ï¼ˆ2019-01-01è‡³2019-03-31ï¼‰ä¹‹é—´æœ‰é”€å”®ï¼Œå¹¶ä¸”åœ¨è¯¥æ—¶é—´æ®µä¹‹å¤–æ²¡æœ‰é”€å”®ï¼Œæ›´ä¸¥è°¨çš„æ€è·¯æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;ï¼šç¡®ä¿äº§å“åœ¨ &lt;code&gt;2019-01-01&lt;/code&gt;è‡³ &lt;code&gt;2019-03-31&lt;/code&gt;æœŸé—´æœ‰é”€å”®è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’ä»–æ€§æ£€æŸ¥&lt;/strong&gt;ï¼šç¡®ä¿äº§å“åœ¨ &lt;code&gt;2019-01-01&lt;/code&gt;ä¹‹å‰æˆ– &lt;code&gt;2019-03-31&lt;/code&gt;ä¹‹å&lt;strong&gt;æ²¡æœ‰&lt;/strong&gt;ä»»ä½•é”€å”®è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¿®æ”¹åçš„æŸ¥è¯¢è¯­å¥-ä½¿ç”¨-not-exists"&gt;âœ… ä¿®æ”¹åçš„æŸ¥è¯¢è¯­å¥ (ä½¿ç”¨ NOT EXISTS)
&lt;/h3&gt;&lt;p&gt;è¿™é‡Œæä¾›ä¸¤ä¸ªä¿®æ”¹åçš„æ–¹æ¡ˆï¼Œæ–¹æ¡ˆä¸€æ›´ç¬¦åˆä½ æœ€åˆçš„é€»è¾‘æ€è·¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT p.product_id, p.product_name
FROM Product p
WHERE
-- æ¡ä»¶1: è¯¥äº§å“åœ¨2019å¹´ç¬¬ä¸€å­£åº¦å†…è‡³å°‘æœ‰ä¸€æ¬¡é”€å”®è®°å½•
EXISTS (
SELECT 1
FROM Sales s
WHERE s.product_id = p.product_id
AND s.sale_date BETWEEN &amp;#39;2019-01-01&amp;#39; AND &amp;#39;2019-03-31&amp;#39;
)
AND
-- æ¡ä»¶2: è¯¥äº§å“åœ¨2019å¹´ç¬¬ä¸€å­£åº¦ä¹‹å¤–æ²¡æœ‰ä»»ä½•é”€å”®è®°å½•
NOT EXISTS (
SELECT 1
FROM Sales s
WHERE s.product_id = p.product_id
AND s.sale_date NOT BETWEEN &amp;#39;2019-01-01&amp;#39; AND &amp;#39;2019-03-31&amp;#39;
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š&lt;code&gt;BETWEEN '2019-01-01' AND '2019-03-31'&lt;/code&gt;åŒ…å«äº†è¾¹ç•Œæ—¥æœŸï¼ˆå³åŒ…æ‹¬2019-01-01å’Œ2019-03-31ï¼‰ã€‚è¯·ç¡®ä¿è¿™ä¸ä½ çš„ä¸šåŠ¡éœ€æ±‚ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h3 id="-æ›¿ä»£æ–¹æ¡ˆ-ä½¿ç”¨-left-join--is-null"&gt;ğŸ”„ æ›¿ä»£æ–¹æ¡ˆ (ä½¿ç”¨ LEFT JOIN + IS NULL)
&lt;/h3&gt;&lt;p&gt;é™¤äº† &lt;code&gt;NOT EXISTS&lt;/code&gt;ï¼Œä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;ç»“åˆ &lt;code&gt;IS NULL&lt;/code&gt;æ¥æ£€æŸ¥ä¹Ÿæ˜¯å¸¸è§çš„åšæ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT p.product_id, p.product_name
FROM Product p
LEFT JOIN Sales s ON p.product_id = s.product_id
AND s.sale_date NOT BETWEEN &amp;#39;2019-01-01&amp;#39; AND &amp;#39;2019-03-31&amp;#39;
WHERE s.product_id IS NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæŸ¥è¯¢çš„é€»è¾‘æ˜¯ï¼šæ‰¾åˆ°æ‰€æœ‰äº§å“ï¼Œå¹¶å°è¯•å…³è”å…¶åœ¨2019å¹´ç¬¬ä¸€å­£åº¦&lt;strong&gt;ä¹‹å¤–&lt;/strong&gt;çš„é”€å”®è®°å½•ã€‚å¦‚æœå…³è”ç»“æœä¸ºç©ºï¼ˆ&lt;code&gt;IS NULL&lt;/code&gt;ï¼‰ï¼Œåˆ™è¯´æ˜è¯¥äº§å“åœ¨ç¬¬ä¸€å­£åº¦ä¹‹å¤–æ²¡æœ‰é”€å”®ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™ä¸ªæŸ¥è¯¢&lt;strong&gt;æœ¬èº«å¹¶æ²¡æœ‰æ˜¾å¼ç¡®ä¿è¯¥äº§å“åœ¨ç¬¬ä¸€å­£åº¦å†…æœ‰é”€å”®&lt;/strong&gt;ã€‚å®ƒåªèƒ½æ‰¾å‡º&lt;strong&gt;ä»æœª&lt;/strong&gt;åœ¨ç¬¬ä¸€å­£åº¦ä¹‹å¤–é”€å”®è¿‡çš„äº§å“ï¼Œè¿™å¯èƒ½åŒ…æ‹¬é‚£äº›æ ¹æœ¬æ²¡æœ‰é”€å”®è®°å½•çš„äº§å“ã€‚å› æ­¤ï¼Œå¦‚æœä½ è¦ä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼Œé€šå¸¸éœ€è¦ä¸ç¡®ä¿å­˜åœ¨æ€§çš„æŸ¥è¯¢ç»“åˆæˆ–é¢å¤–ç­›é€‰ã€‚&lt;/p&gt;
&lt;h3 id="-æ€§èƒ½æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ€§èƒ½æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ˜¯å…³é”®&lt;/strong&gt;ï¼šä¸ºäº†è¿™ç±»æŸ¥è¯¢çš„æ€§èƒ½ï¼ŒåŠ¡å¿…åœ¨ &lt;code&gt;Sales&lt;/code&gt;è¡¨çš„ &lt;code&gt;product_id&lt;/code&gt;å’Œ &lt;code&gt;sale_date&lt;/code&gt;ä¸Šå»ºç«‹ç´¢å¼•ã€‚ä¸€ä¸ªè¦†ç›– &lt;code&gt;(product_id, sale_date)&lt;/code&gt;çš„&lt;strong&gt;å¤åˆç´¢å¼•&lt;/strong&gt;æ•ˆæœæœ€å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£é€»è¾‘å·®å¼‚&lt;/strong&gt;ï¼šç¡®ä¿ä½ å®Œå…¨ç†è§£æ¯ä¸ªæŸ¥è¯¢æ¡ä»¶çš„é€»è¾‘å«ä¹‰ï¼Œé€‰æ‹©æœ€ç¬¦åˆä½ ä¸šåŠ¡éœ€æ±‚çš„ä¸€ä¸ªã€‚ä¸Šè¿°ä¿®æ”¹åçš„ &lt;code&gt;NOT EXISTS&lt;/code&gt;ç‰ˆæœ¬ï¼ˆåŒ…å«ä¸¤ä¸ªæ¡ä»¶ï¼‰é€šå¸¸æ˜¯æœ€ç¨³å¦¥å’Œé€»è¾‘æ¸…æ™°çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™èƒ½å¸®ä½ è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="date-è¿ç®—"&gt;Date è¿ç®—
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;DATE&lt;/code&gt;ç±»å‹ä¸»è¦ç”¨äºå­˜å‚¨æ—¥æœŸå€¼ï¼ˆä¸åŒ…æ‹¬æ—¶é—´éƒ¨åˆ†ï¼‰ï¼Œå®ƒæ”¯æŒå¤šç§è¿ç®—ï¼Œè®©ä½ èƒ½é«˜æ•ˆåœ°å¤„ç†å’Œæ“ä½œæ—¥æœŸæ•°æ®ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id="-mysql-date-ç±»å‹æ”¯æŒçš„è¿ç®—"&gt;ğŸ“Š MySQL DATE ç±»å‹æ”¯æŒçš„è¿ç®—
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¿ç®—ç±»åˆ«&lt;/th&gt;
&lt;th&gt;æ”¯æŒçš„æ“ä½œç¬¦æˆ–å‡½æ•°&lt;/th&gt;
&lt;th&gt;ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯”è¾ƒè¿ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;!=&lt;/code&gt;(æˆ– &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;), &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ—¥æœŸçš„å…ˆåæ¬¡åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æœ¯è¿ç®—ï¼ˆåŠ å‡ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATE_ADD()&lt;/code&gt;, &lt;code&gt;ADDDATE()&lt;/code&gt;, &lt;code&gt;+ INTERVAL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç»™æ—¥æœŸå¢åŠ ä¸€ä¸ªæ—¶é—´é—´éš”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATE_SUB()&lt;/code&gt;, &lt;code&gt;SUBDATE()&lt;/code&gt;, &lt;code&gt;- INTERVAL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»æ—¥æœŸå‡å»ä¸€ä¸ªæ—¶é—´é—´éš”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·®å€¼è®¡ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´ç›¸å·®çš„å¤©æ•° (è¿”å› &lt;code&gt;date1 - date2&lt;/code&gt;çš„å¤©æ•°å·®)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TIMESTAMPDIFF(unit, start_date, end_date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸæ—¶é—´çš„å·®å€¼ï¼Œå¯æŒ‡å®šå•ä½ï¼ˆå¦‚ DAYã€MONTHã€YEARã€HOURã€MINUTE ç­‰ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æå–éƒ¨åˆ†æ—¥æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;YEAR(date)&lt;/code&gt;, &lt;code&gt;MONTH(date)&lt;/code&gt;, &lt;code&gt;DAY(date)&lt;/code&gt;(æˆ– &lt;code&gt;DAYOFMONTH(date)&lt;/code&gt;), &lt;code&gt;DAYOFWEEK(date)&lt;/code&gt;, &lt;code&gt;DAYOFYEAR(date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»æ—¥æœŸä¸­æå–å‡ºå¹´ã€æœˆã€æ—¥ã€æ˜ŸæœŸå‡ ã€å¹´ä»½ä¸­çš„ç¬¬å‡ å¤©ç­‰éƒ¨åˆ†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;QUARTER(date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ‰€åœ¨çš„å­£åº¦ï¼ˆ1-4ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;WEEK(date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ˜¯ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LAST_DAY(date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ‰€åœ¨æœˆä»½çš„æœ€åä¸€å¤©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¼å¼åŒ–ä¸è½¬æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATE_FORMAT(date, format)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†æ—¥æœŸæŒ‰æŒ‡å®šæ ¼å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;STR_TO_DATE(str, format)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†å­—ç¬¦ä¸²æŒ‰æŒ‡å®šæ ¼å¼è§£æä¸ºæ—¥æœŸå€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATE(date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä» DATETIME æˆ– TIMESTAMP è¡¨è¾¾å¼ä¸­æå–æ—¥æœŸéƒ¨åˆ†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¿ç®—æ—¶çš„æ³¨æ„äº‹é¡¹"&gt;âš ï¸ è¿ç®—æ—¶çš„æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿æ—¥æœŸæ ¼å¼æœ‰æ•ˆ&lt;/strong&gt;ï¼šè¿›è¡Œè¿ç®—çš„æ—¥æœŸå€¼åº”æ˜¯æœ‰æ•ˆæ—¥æœŸï¼Œå¦åˆ™å¯èƒ½å¾—åˆ° &lt;code&gt;NULL&lt;/code&gt;æˆ–é”™è¯¯çš„ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸè¾¹ç•Œé—®é¢˜&lt;/strong&gt;ï¼šåœ¨è¿›è¡ŒåŠ å‡è¿ç®—ï¼ˆå°¤å…¶æ˜¯æœˆã€å¹´ï¼‰æ—¶ï¼Œæ³¨æ„ç»“æœæ—¥æœŸçš„æœ‰æ•ˆæ€§ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;DATE_ADD('2023-01-31', INTERVAL 1 MONTH)&lt;/code&gt;ä¼šå¾—åˆ° &lt;code&gt;2023-02-28&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´å•ä½çš„æ­£ç¡®ä½¿ç”¨&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;INTERVAL&lt;/code&gt;æ—¶ï¼Œè¦é€‰æ‹©æ­£ç¡®çš„æ—¶é—´å•ä½ï¼ˆå¦‚ &lt;code&gt;DAY&lt;/code&gt;, &lt;code&gt;MONTH&lt;/code&gt;, &lt;code&gt;YEAR&lt;/code&gt;, &lt;code&gt;HOUR&lt;/code&gt;, &lt;code&gt;MINUTE&lt;/code&gt;, &lt;code&gt;SECOND&lt;/code&gt;ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶åŒºçš„å½±å“&lt;/strong&gt;ï¼šå¦‚æœä½ çš„MySQLæœåŠ¡å™¨è®¾ç½®äº†æ—¶åŒºï¼ŒæŸäº›å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;CURDATE()&lt;/code&gt;ï¼‰è¿”å›çš„å€¼å¯èƒ½ä¼šå—æ—¶åŒºå½±å“ï¼Œä½†çº¯ &lt;code&gt;DATE&lt;/code&gt;ç±»å‹çš„å€¼æœ¬èº«ä¸åŒ…å«æ—¶åŒºä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœè¿ç®—ä¸­çš„æ—¥æœŸå‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œç»“æœé€šå¸¸ä¹Ÿæ˜¯ &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨ç¤ºä¾‹"&gt;ğŸ’¡ å®ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ç‰¹å®šæ—¥æœŸä¹‹å/ä¹‹å‰çš„è®°å½•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM your_table WHERE date_column &amp;gt; &amp;#39;2023-10-01&amp;#39;;
SELECT * FROM your_table WHERE date_column BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE(); -- æœ€è¿‘7å¤©çš„è®°å½•
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸç›¸å·®çš„å¤©æ•°/æœˆæ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(&amp;#39;2023-10-31&amp;#39;, &amp;#39;2023-10-01&amp;#39;) AS day_diff; -- è¿”å› 30
SELECT TIMESTAMPDIFF(MONTH, &amp;#39;2023-01-15&amp;#39;, &amp;#39;2023-10-20&amp;#39;) AS month_diff; -- è¿”å› 9
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–æ—¥æœŸçš„ç‰¹å®šéƒ¨åˆ†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT YEAR(&amp;#39;2023-10-31&amp;#39;), MONTH(&amp;#39;2023-10-31&amp;#39;), DAY(&amp;#39;2023-10-31&amp;#39;); -- è¿”å› 2023, 10, 31
SELECT DAYNAME(&amp;#39;2023-10-31&amp;#39;); -- è¿”å› &amp;#39;Tuesday&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥æœŸæ ¼å¼åŒ–æ˜¾ç¤º&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATE_FORMAT(&amp;#39;2023-10-31&amp;#39;, &amp;#39;%Yå¹´%mæœˆ%dæ—¥&amp;#39;); -- è¿”å› &amp;#39;2023å¹´10æœˆ31æ—¥&amp;#39;
SELECT DATE_FORMAT(&amp;#39;2023-10-31&amp;#39;, &amp;#39;%W, %M %D, %Y&amp;#39;); -- è¿”å› &amp;#39;Tuesday, October 31st, 2023&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åœ¨ MySQL ä¸­å¤„ç†æ—¥æœŸè¿ç®—ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘å¾ˆä¹æ„æä¾›è¿›ä¸€æ­¥çš„å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2 id="åˆ¤æ–­å¹´æœˆ"&gt;åˆ¤æ–­å¹´æœˆ
&lt;/h2&gt;&lt;p&gt;åœ¨MySQLä¸­åˆ¤æ–­æ—¥æœŸæ˜¯å¦å±äº2020å¹´2æœˆï¼Œæœ‰å‡ ç§å¸¸ç”¨æ–¹æ³•ï¼Œå®ƒä»¬åœ¨ä½¿ç”¨å’Œæ€§èƒ½ä¸Šç•¥æœ‰å·®å¼‚ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»è¿™äº›æ–¹æ³•ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿå¯¹æ¯”é€‰æ‹©ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;ä»£ç ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;YEAR()&lt;/code&gt;å’Œ &lt;code&gt;MONTH()&lt;/code&gt;å‡½æ•°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT * FROM table_name WHERE YEAR(date_column) = 2020 AND MONTH(date_column) = 2;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç›´è§‚æ˜“æ‡‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ä¸­å¯¹å­—æ®µä½¿ç”¨å‡½æ•°ä¼šå¯¼è‡´æ— æ³•ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼Œåœ¨æ•°æ®é‡å¤§æ—¶å¯èƒ½å½±å“æ€§èƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;DATE_FORMAT()&lt;/code&gt;å‡½æ•°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT * FROM table_name WHERE DATE_FORMAT(date_column, '%Y-%m') = '2020-02';&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¼å¼åŒ–çµæ´»ï¼Œå¯é€‚é…ä¸åŒæ ¼å¼è¦æ±‚&lt;/td&gt;
&lt;td&gt;åŒæ ·&lt;strong&gt;æ— æ³•ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼Œæ€§èƒ½ä¸å¤§è¡¨ä¸Šä¸å ä¼˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;BETWEEN&lt;/code&gt;å’Œæ—¥æœŸèŒƒå›´&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT * FROM table_name WHERE date_column BETWEEN '2020-02-01' AND '2020-02-29';&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;èƒ½å¤Ÿåˆ©ç”¨ç´¢å¼•&lt;/strong&gt;ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€‚åˆå¤§æ•°æ®é‡&lt;/td&gt;
&lt;td&gt;éœ€å‡†ç¡®æŒ‡å®šæ—¥æœŸèŒƒå›´ã€‚è‹¥å­—æ®µåŒ…å«æ—¶é—´éƒ¨åˆ†ï¼Œæ›´æ¨è &lt;code&gt;&amp;lt; '2020-03-01'&lt;/code&gt;æˆ–ç»†ç²’åº¦åˆ°ç§’çº§çš„èŒƒå›´æ¥åŒ…å«2æœˆæ‰€æœ‰å¯èƒ½æ—¶åˆ»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;é€‰æ‹©å»ºè®®ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä½ çš„æ•°æ®é‡ä¸å¤§ï¼Œæˆ–è€…åªæ˜¯å¶å°”æŸ¥è¯¢ï¼Œè¿½æ±‚å†™æ³•ç®€å•ï¼Œ&lt;strong&gt;æ–¹æ³•1æˆ–æ–¹æ³•2&lt;/strong&gt;éƒ½å¯ä»¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä½ çš„è¡¨æ•°æ®é‡éå¸¸å¤§ï¼Œå¹¶ä¸”å¯¹æŸ¥è¯¢æ€§èƒ½æœ‰è¦æ±‚ï¼Œ&lt;strong&gt;å¼ºçƒˆæ¨èæ–¹æ³•3&lt;/strong&gt;ï¼ˆä½¿ç”¨ &lt;code&gt;BETWEEN&lt;/code&gt;æˆ–èŒƒå›´æŸ¥è¯¢ï¼‰ï¼Œå› ä¸ºå®ƒèƒ½æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæ—¥æœŸå­—æ®µåŒ…å«æ—¶é—´éƒ¨åˆ†ï¼ˆå¦‚ &lt;code&gt;datetime&lt;/code&gt;æˆ– &lt;code&gt;timestamp&lt;/code&gt;ç±»å‹ï¼‰ï¼Œä¸ºäº†ç²¾ç¡®åŒ¹é…æ•´ä¸ª2æœˆï¼Œå¯ä»¥å°†ç»“æŸæ—¥æœŸè®¾ç½®ä¸ºä¸‹ä¸ªæœˆçš„ç¬¬ä¸€å¤©ï¼ˆ exclulsive ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM your_table
WHERE date_column &amp;gt;= &amp;#39;2020-02-01&amp;#39; AND date_column &amp;lt; &amp;#39;2020-03-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æ–¹å¼èƒ½ç¡®ä¿åŒ…å«2020å¹´2æœˆæ‰€æœ‰çš„æ—¥æœŸå’Œæ—¶é—´ç‚¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´é«˜æ•ˆåœ°å®ŒæˆæŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h2 id="where-group-by-and-having"&gt;where, group by, and having
&lt;/h2&gt;&lt;p&gt;ç†è§£ &lt;code&gt;WHERE&lt;/code&gt;ã€&lt;code&gt;GROUP BY&lt;/code&gt;å’Œ &lt;code&gt;HAVING&lt;/code&gt;çš„é¡ºåºï¼Œå¯¹äºç¼–å†™æ­£ç¡®çš„ SQL æŸ¥è¯¢è‡³å…³é‡è¦ã€‚è¿™ä¸ä»…æ¶‰åŠåˆ°è¯­å¥çš„&lt;strong&gt;ä¹¦å†™é¡ºåº&lt;/strong&gt;ï¼Œæ›´å…³é”®çš„æ˜¯æ•°æ®åº“æ‰§è¡Œè¿™äº›è¯­å¥æ—¶çš„&lt;strong&gt;é€»è¾‘é¡ºåº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ä¸æ‰§è¡Œé¡ºåºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­å¥&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä½œç”¨&lt;/th&gt;
&lt;th&gt;æ‰§è¡Œé¡ºåº&lt;/th&gt;
&lt;th&gt;èƒ½å¦ä½¿ç”¨èšåˆå‡½æ•°&lt;/th&gt;
&lt;th&gt;æ“ä½œå¯¹è±¡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;WHERE&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿‡æ»¤&lt;strong&gt;åŸå§‹æ•°æ®è¡Œ&lt;/strong&gt;ï¼Œåœ¨åˆ†ç»„å‰ç­›é€‰è®°å½•&lt;/td&gt;
&lt;td&gt;å…ˆæ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“è¡¨ä¸­çš„åŸå§‹è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†è¿‡æ»¤åçš„æ•°æ®&lt;strong&gt;æŒ‰æŒ‡å®šå­—æ®µåˆ†ç»„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¶æ¬¡æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;WHERE ç­›é€‰åçš„ç»“æœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;HAVING&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿‡æ»¤&lt;strong&gt;åˆ†ç»„åçš„æ•°æ®&lt;/strong&gt;ï¼Œç­›é€‰æ»¡è¶³æ¡ä»¶çš„&lt;strong&gt;ç»„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€åæ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;GROUP BY åˆ†ç»„åçš„ç»„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªé¡ºåº"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªé¡ºåºï¼Ÿ
&lt;/h3&gt;&lt;p&gt;æ•°æ®åº“çš„æ‰§è¡Œé¡ºåºæ˜¯è§„å®šå¥½çš„ï¼Œå®ƒå¿…é¡»å…ˆæ‹¿åˆ°åŸå§‹æ•°æ®ï¼ˆ&lt;code&gt;FROM&lt;/code&gt;ï¼‰ï¼Œç„¶åè¿‡æ»¤æ‰ä¸éœ€è¦çš„è¡Œï¼ˆ&lt;code&gt;WHERE&lt;/code&gt;ï¼‰ï¼Œæ¥ç€æ‰èƒ½å¯¹å‰©ä¸‹çš„æœ‰æ•ˆæ•°æ®è¿›è¡Œåˆ†ç»„ï¼ˆ&lt;code&gt;GROUP BY&lt;/code&gt;ï¼‰ï¼Œæœ€åå†æ£€æŸ¥å“ªäº›ç»„ç¬¦åˆæœ€ç»ˆæ¡ä»¶ï¼ˆ&lt;code&gt;HAVING&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæŠŠ &lt;code&gt;HAVING&lt;/code&gt;çš„ç­›é€‰æ¡ä»¶é”™è¯¯åœ°æ”¾åœ¨ &lt;code&gt;WHERE&lt;/code&gt;é‡Œï¼Œç”±äº &lt;code&gt;WHERE&lt;/code&gt;æ‰§è¡Œæ—¶è¿˜æ²¡æœ‰è¿›è¡Œåˆ†ç»„è®¡ç®—ï¼Œæ•°æ®åº“æ— æ³•è¯†åˆ«è¯¸å¦‚&lt;code&gt;SUM()&lt;/code&gt;, &lt;code&gt;COUNT()&lt;/code&gt;, &lt;code&gt;AVG()&lt;/code&gt;è¿™æ ·çš„èšåˆå‡½æ•°ï¼Œä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•å¿«é€Ÿåˆ¤æ–­ç”¨-where-è¿˜æ˜¯-having"&gt;ğŸ§  å¦‚ä½•å¿«é€Ÿåˆ¤æ–­ç”¨ WHERE è¿˜æ˜¯ HAVINGï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š&lt;strong&gt;çœ‹ä½ è¿‡æ»¤çš„æ¡ä»¶æ˜¯å¦ä¾èµ–äºåˆ†ç»„åçš„èšåˆç»“æœ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶ä¸å•è¡Œæ•°æ®ç›¸å…³&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼š&lt;code&gt;age &amp;gt; 18&lt;/code&gt;, &lt;code&gt;name = 'Alice'&lt;/code&gt;ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;ã€‚å®ƒåœ¨åˆ†ç»„å‰å¿«é€Ÿå‡å°‘è¦å¤„ç†çš„æ•°æ®é‡ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶ä¸åˆ†ç»„èšåˆç»“æœç›¸å…³&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼š&lt;code&gt;æ€»é”€é‡ &amp;gt; 1000&lt;/code&gt;, &lt;code&gt;å¹³å‡åˆ† &amp;gt; 90&lt;/code&gt;ï¼Œ&lt;code&gt;å‘˜å·¥æ•° &amp;gt;= 5&lt;/code&gt;ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;HAVING&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¤ºä¾‹è¯´æ˜"&gt;ğŸ“– ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼  &lt;code&gt;sales&lt;/code&gt;è®¢å•è¡¨ï¼ŒåŒ…å« &lt;code&gt;product&lt;/code&gt;ï¼ˆäº§å“åï¼‰ã€&lt;code&gt;sale_amount&lt;/code&gt;ï¼ˆé”€å”®é¢ï¼‰ç­‰å­—æ®µã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢éœ€æ±‚ï¼š&lt;/strong&gt; æ‰¾å‡ºæ€»é”€å”®é¢è¶…è¿‡ 10,000 çš„äº§å“ç±»åˆ«ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†æï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;â€œæ€»é”€å”®é¢â€éœ€è¦å…ˆæŒ‰äº§å“åˆ†ç»„ï¼ˆ&lt;code&gt;GROUP BY product&lt;/code&gt;ï¼‰å¹¶ç”¨ &lt;code&gt;SUM(sale_amount)&lt;/code&gt;è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;â€œè¶…è¿‡ 10,000â€è¿™ä¸ªæ¡ä»¶æ˜¯&lt;strong&gt;é’ˆå¯¹åˆ†ç»„åçš„æ€»å’Œ&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯åŸè¡¨ä¸­çš„ä»»ä½•å•è¡Œæ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­£ç¡®å†™æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT product, SUM(sale_amount) AS total_sales
FROM sales
GROUP BY product
HAVING SUM(sale_amount) &amp;gt; 10000;
-- æˆ–è€…ä½¿ç”¨åˆ«å: HAVING total_sales &amp;gt; 10000 (æŸäº›æ•°æ®åº“æ”¯æŒ)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œé€»è¾‘æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;FROM sales&lt;/code&gt;: å–å‡ºåŸå§‹é”€å”®è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GROUP BY product&lt;/code&gt;: å°†æ•°æ®æŒ‰äº§å“ååˆ†ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;HAVING SUM(sale_amount) &amp;gt; 10000&lt;/code&gt;: ç­›é€‰å‡ºæ€»é”€å”®é¢å¤§äº 10000 çš„ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT ...&lt;/code&gt;: æœ€åæ˜¾ç¤ºäº§å“å’Œå®ƒçš„æ€»é”€å”®é¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”™è¯¯å†™æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT product, SUM(sale_amount) AS total_sales
FROM sales
WHERE SUM(sale_amount) &amp;gt; 10000 -- é”™è¯¯ï¼WHERE ä¸­ä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°
GROUP BY product;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥åœ¨æ‰§è¡Œæ—¶ï¼Œæ•°æ®åº“åœ¨ &lt;code&gt;WHERE&lt;/code&gt;é˜¶æ®µå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæ— æ³•ç†è§£ &lt;code&gt;SUM(sale_amount)&lt;/code&gt;çš„å«ä¹‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æé†’"&gt;âœ… æ€»ç»“ä¸æé†’
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¢è®°æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;FROM&lt;/code&gt;-&amp;gt; &lt;code&gt;WHERE&lt;/code&gt;-&amp;gt; &lt;code&gt;GROUP BY&lt;/code&gt;-&amp;gt; &lt;code&gt;HAVING&lt;/code&gt;-&amp;gt; &lt;code&gt;SELECT&lt;/code&gt;-&amp;gt; &lt;code&gt;ORDER BY&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çµæ´»ä½¿ç”¨&lt;/strong&gt;ï¼š&lt;code&gt;WHERE&lt;/code&gt;å’Œ &lt;code&gt;HAVING&lt;/code&gt;å¹¶éäº’æ–¥ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­åŒæ—¶ä½¿ç”¨ã€‚&lt;code&gt;WHERE&lt;/code&gt;å…ˆç­›é€‰è¡Œï¼Œ&lt;code&gt;GROUP BY&lt;/code&gt;åˆ†ç»„åï¼Œ&lt;code&gt;HAVING&lt;/code&gt;å†ç­›é€‰ç»„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¤ºä¾‹ï¼šå…ˆç­›é€‰å‡º2023å¹´çš„æ•°æ®ï¼Œå†æŒ‰äº§å“åˆ†ç»„ï¼Œæœ€åæ‰¾å‡ºå¹´ä»½æ€»é”€å”®é¢è¶…è¿‡1ä¸‡çš„äº§å“
SELECT product, SUM(sale_amount) AS total_sales
FROM sales
WHERE YEAR(date) = 2023 -- WHERE å…ˆè¿‡æ»¤å¹´ä»½
GROUP BY product
HAVING total_sales &amp;gt; 10000; -- HAVING å†è¿‡æ»¤åˆ†ç»„
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½è€ƒè™‘&lt;/strong&gt;ï¼šå°½é‡åœ¨ &lt;code&gt;WHERE&lt;/code&gt;é˜¶æ®µè¿‡æ»¤æ‰æ›´å¤šä¸éœ€è¦çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ &lt;code&gt;GROUP BY&lt;/code&gt;å’Œ &lt;code&gt;HAVING&lt;/code&gt;é˜¶æ®µéœ€è¦å¤„ç†çš„æ•°æ®é‡ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;WHERE&lt;/code&gt;ã€&lt;code&gt;GROUP BY&lt;/code&gt;å’Œ &lt;code&gt;HAVING&lt;/code&gt;çš„ä½¿ç”¨é¡ºåºå’ŒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="cross-join"&gt;cross join
&lt;/h2&gt;&lt;p&gt;Cross Joinï¼ˆäº¤å‰è¿æ¥ï¼‰æ˜¯ SQL ä¸­ä¸€ç§éå¸¸åŸºç¡€ä½†ä¹Ÿéå¸¸ç‰¹æ®Šçš„è¡¨è¿æ¥æ“ä½œã€‚äº†è§£å®ƒèƒ½å¸®åŠ©ä½ å¤„ç†ä¸€äº›ç‰¹å®šçš„æ•°æ®åœºæ™¯ï¼Œä½†ä¹Ÿéœ€æ ¼å¤–å°å¿ƒä½¿ç”¨ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;h3 id="-cross-join-çš„æ ¸å¿ƒç¬›å¡å°”ç§¯"&gt;âš™ï¸ Cross Join çš„æ ¸å¿ƒï¼šç¬›å¡å°”ç§¯
&lt;/h3&gt;&lt;p&gt;Cross Join çš„æ ¸å¿ƒæ˜¯ç”Ÿæˆä¸¤ä¸ªè¡¨çš„ &lt;strong&gt;ç¬›å¡å°”ç§¯ (Cartesian product)&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— æ¡ä»¶è¿æ¥&lt;/strong&gt;ï¼šå®ƒä¸éœ€è¦ä»»ä½•è¿æ¥æ¡ä»¶ï¼ˆæ²¡æœ‰ &lt;code&gt;ON&lt;/code&gt;æˆ– &lt;code&gt;USING&lt;/code&gt;å­å¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨ç»„åˆ&lt;/strong&gt;ï¼šç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªè¡¨ä¸­çš„ä¸€è¡Œä¸ç¬¬äºŒä¸ªè¡¨ä¸­çš„ä¸€è¡Œçš„ç»„åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®çˆ†ç‚¸&lt;/strong&gt;ï¼šå¦‚æœè¡¨ A æœ‰ &lt;code&gt;m&lt;/code&gt;è¡Œï¼Œè¡¨ B æœ‰ &lt;code&gt;n&lt;/code&gt;è¡Œï¼ŒCross Join çš„ç»“æœå°†åŒ…å« &lt;code&gt;m Ã— n&lt;/code&gt;è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸€ä¸ªåŒ…å« 3 ç§é¢œè‰²çš„è¡¨å’Œä¸€ä¸ªåŒ…å« 4 ä¸ªå°ºå¯¸çš„è¡¨è¿›è¡Œ Cross Joinï¼Œå°†äº§ç”Ÿ 12 è¡Œæ•°æ®ï¼ˆ3ç§é¢œè‰² Ã— 4ä¸ªå°ºå¯¸çš„æ‰€æœ‰å¯èƒ½ç»„åˆï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•å½¢å¼"&gt;ğŸ“ è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;p&gt;Cross Join æœ‰ä¸¤ç§å†™æ³•ï¼Œå®ƒä»¬åœ¨åŠŸèƒ½ä¸Šå®Œå…¨ç­‰æ•ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼è¯­æ³•&lt;/strong&gt; (æ¨èï¼Œæ›´æ¸…æ™°)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM table1
CROSS JOIN table2;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è¯­æ³•&lt;/strong&gt; (ä½¿ç”¨é€—å·)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM table1, table2;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç»“æœé›†é¢„è§ˆ"&gt;ğŸ§ ç»“æœé›†é¢„è§ˆ
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸¤ä¸ªå°è¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;colors&lt;/code&gt;&lt;/strong&gt; è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;color_id&lt;/th&gt;
&lt;th&gt;color_name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;çº¢è‰²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;è“è‰²&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;sizes&lt;/code&gt;&lt;/strong&gt; è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;size_id&lt;/th&gt;
&lt;th&gt;size_name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;S&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;M&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰§è¡Œ &lt;code&gt;CROSS JOIN&lt;/code&gt;åï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT colors.color_name, sizes.size_name
FROM colors
CROSS JOIN sizes;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;color_name&lt;/th&gt;
&lt;th&gt;size_name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;çº¢è‰²&lt;/td&gt;
&lt;td&gt;S&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;çº¢è‰²&lt;/td&gt;
&lt;td&gt;M&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è“è‰²&lt;/td&gt;
&lt;td&gt;S&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è“è‰²&lt;/td&gt;
&lt;td&gt;M&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;è™½ç„¶éœ€è¦è°¨æ…ä½¿ç”¨ï¼Œä½† Cross Join åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆæ‰€æœ‰å¯èƒ½ç»„åˆ&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…¸å‹çš„ç”¨é€”ã€‚ä¾‹å¦‚ï¼Œä¸ºç”µå•†å¹³å°ç”Ÿæˆæ‰€æœ‰äº§å“é¢œè‰²å’Œå°ºå¯¸çš„ SKU ç»„åˆï¼Œæˆ–è€…ç”Ÿæˆæ‰€æœ‰æ—¥æœŸå’Œæ‰€æœ‰äº§å“çš„ç»„åˆç”¨äºåˆ›å»ºå®Œæ•´çš„é”€å”®æŠ¥å‘Šç»´åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®è¡¥å…¨&lt;/strong&gt;ï¼šåœ¨ç»Ÿè®¡æŠ¥è¡¨ä¸­ï¼Œç¡®ä¿å³ä½¿æŸäº›ç»„åˆæ²¡æœ‰å®é™…æ•°æ®ï¼ˆå¦‚æŸäº§å“åœ¨æŸå¤©æ— é”€å”®ï¼‰ï¼Œä¹Ÿèƒ½åœ¨ç»“æœä¸­æ˜¾ç¤ºä¸º 0 æˆ– NULLï¼Œè€Œä¸æ˜¯å®Œå…¨ç¼ºå¤±ã€‚è¿™é€šå¸¸é€šè¿‡ &lt;strong&gt;CROSS JOIN&lt;/strong&gt; ç”Ÿæˆå®Œæ•´ç»´åº¦è¡¨ï¼Œå†ä¸äº‹å®è¡¨è¿›è¡Œ &lt;strong&gt;LEFT JOIN&lt;/strong&gt; æ¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆå¤§é‡æµ‹è¯•æ•°æ®&lt;/strong&gt;ï¼šé€šè¿‡å°†ä¸€ä¸ªå°æ•°æ®è¡¨ï¼ˆå¦‚ä¸‡è¡Œæ•°æ®ï¼‰ä¸å¦ä¸€ä¸ªå°è¡¨è¿›è¡Œ Cross Joinï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆç™¾ä¸‡ç”šè‡³ä¸Šäº¿è¡Œçš„æµ‹è¯•æ•°æ®é›†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½é£é™©&lt;/strong&gt;ï¼šè¿™æ˜¯ä½¿ç”¨ Cross Join &lt;strong&gt;æœ€éœ€è¦è­¦æƒ•çš„ä¸€ç‚¹&lt;/strong&gt;ã€‚å¯¹ä¸¤ä¸ªå¤§å‹è¡¨ï¼ˆä¾‹å¦‚å„æœ‰åä¸‡è¡Œï¼‰è¿›è¡Œ Cross Join ä¼šäº§ç”Ÿä¸‡äº¿è¡Œç»“æœï¼Œææ˜“è€—å°½æ•°æ®åº“èµ„æºï¼Œå¯¼è‡´æŸ¥è¯¢æ€§èƒ½æ€¥å‰§ä¸‹é™ç”šè‡³æœåŠ¡å´©æºƒã€‚&lt;strong&gt;å› æ­¤ï¼Œç»å¯¹é¿å…å¯¹å¤§è¡¨ä½¿ç”¨æ— é™åˆ¶çš„ Cross Join&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœè¿‡æ»¤&lt;/strong&gt;ï¼šå¯ä»¥å¯¹ Cross Join çš„ç»“æœä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥è¿›è¡Œè¿‡æ»¤ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåŠ äº†ç­‰å€¼æ¡ä»¶ï¼ˆå¦‚ &lt;code&gt;WHERE table1.id = table2.foreign_id&lt;/code&gt;ï¼‰ï¼Œå®ƒåœ¨é€»è¾‘ä¸Šå°±ç­‰åŒäº &lt;strong&gt;INNER JOIN&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ INNER JOIN çš„åŒºåˆ«&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CROSS JOIN&lt;/strong&gt; æ— æ¡ä»¶ï¼Œç”Ÿæˆç¬›å¡å°”ç§¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;INNER JOIN&lt;/strong&gt; å¿…é¡»æœ‰è¿æ¥æ¡ä»¶ï¼Œåªè¿”å›åŒ¹é…çš„è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸€ä¸ª &lt;strong&gt;INNER JOIN&lt;/strong&gt; æ²¡æœ‰æŒ‡å®šä»»ä½•è¿æ¥æ¡ä»¶ï¼Œåœ¨æŸäº›æ•°æ®åº“ç³»ç»Ÿä¸­ï¼ˆå¦‚ MySQLï¼‰ï¼Œå®ƒä¼šäº§ç”Ÿå’Œ &lt;strong&gt;CROSS JOIN&lt;/strong&gt; ä¸€æ ·çš„æ•ˆæœã€‚ä½†è¯­æ³•ä¸Šæ˜¾å¼åœ°ä½¿ç”¨ &lt;strong&gt;CROSS JOIN&lt;/strong&gt; æ›´èƒ½è¡¨è¾¾æ„å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä½¿ç”¨å»ºè®®"&gt;ğŸš€ ä½¿ç”¨å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼ä½¿ç”¨å…³é”®å­—&lt;/strong&gt;ï¼šå§‹ç»ˆä½¿ç”¨ &lt;code&gt;CROSS JOIN&lt;/code&gt;å…³é”®å­—ï¼Œè€Œä¸æ˜¯é€—å·ã€‚è¿™ä½¿å¾—ä»£ç çš„æ„å›¾æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“è¢«ç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸¥æ ¼æ§åˆ¶è¾“å…¥&lt;/strong&gt;ï¼šç¡®ä¿å‚ä¸ Cross Join çš„è¡¨æ˜¯&lt;strong&gt;ç»´åº¦è¡¨æˆ–å°å‹è¡¨&lt;/strong&gt;ã€‚åœ¨æŸ¥è¯¢å‰ï¼Œå¿ƒé‡Œè¦å¯¹ç»“æœé›†çš„è¡Œæ•°æœ‰ä¸€ä¸ªé¢„ä¼°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å–„ç”¨ LIMIT&lt;/strong&gt;ï¼šåœ¨å¼€å‘å’Œè°ƒè¯•æ—¶ï¼Œå¼ºçƒˆå»ºè®®ä¸ &lt;code&gt;LIMIT&lt;/code&gt;å­å¥ä¸€èµ·ä½¿ç”¨ï¼Œå…ˆæŸ¥çœ‹å°‘é‡æ ·æœ¬ç»“æœï¼Œé¿å…æ„å¤–è¿”å›æµ·é‡æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;ï¼šæœ‰æ—¶ä½¿ç”¨åº”ç”¨ç¨‹åºä»£ç å¾ªç¯ç”Ÿæˆç»„åˆå¯èƒ½æ¯”åœ¨æ•°æ®åº“ä¸­è¿›è¡Œå·¨å¤§çš„ Cross Join æ›´é«˜æ•ˆã€æ›´å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒCross Join æ˜¯ä¸€æŠŠå¼ºå¤§çš„åŒåˆƒå‰‘ã€‚å®ƒåœ¨éœ€è¦ç³»ç»Ÿæ€§åœ°ç»„åˆæ‰€æœ‰å¯èƒ½æ€§æ—¶éå¸¸é«˜æ•ˆå’Œç›´æ¥ï¼Œä½†ä¸€æ—¦ç”¨äºå¤§å‹è¡¨ï¼Œç ´ååŠ›ä¹Ÿæå¤§ã€‚ä½¿ç”¨æ—¶åŠ¡å¿…æ˜ç¡®å…¶åæœã€‚&lt;/p&gt;
&lt;h2 id="between"&gt;between
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼ŒSQL ä¸­çš„ &lt;code&gt;BETWEEN ... AND ...&lt;/code&gt;æ“ä½œç¬¦&lt;strong&gt;åŒ…å«è¾¹ç•Œå€¼&lt;/strong&gt;ï¼Œå³åŒ…å«ç­‰äºä¸¤ç«¯ç‚¹çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°å±•ç¤ºä¸åŒæ•°æ®ç±»å‹ä¸‹ &lt;code&gt;BETWEEN ... AND ...&lt;/code&gt;çš„è¡Œä¸ºï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;æ˜¯å¦åŒ…å«è¾¹ç•Œ&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;ç­‰æ•ˆå†™æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°å€¼ç±»å‹&lt;/strong&gt; (INT, FLOATç­‰)&lt;/td&gt;
&lt;td&gt;âœ… åŒ…å«&lt;/td&gt;
&lt;td&gt;&lt;code&gt;salary BETWEEN 3000 AND 5000&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;salary &amp;gt;= 3000 AND salary &amp;lt;= 5000&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥æœŸæ—¶é—´ç±»å‹&lt;/strong&gt; (DATETIMEç­‰)&lt;/td&gt;
&lt;td&gt;âœ… åŒ…å« (ä½†éœ€æ³¨æ„æ—¶é—´ç²¾åº¦)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;order_date BETWEEN '2023-01-01' AND '2023-01-31'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;order_date &amp;gt;= '2023-01-01' AND order_date &amp;lt;= '2023-01-31'&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–‡æœ¬ç±»å‹&lt;/strong&gt; (VARCHAR, CHARç­‰)&lt;/td&gt;
&lt;td&gt;âœ… åŒ…å« (æŒ‰å­—å…¸åºæ¯”è¾ƒ)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;name BETWEEN 'Adams' AND 'Carter'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;name &amp;gt;= 'Adams' AND name &amp;lt;= 'Carter'&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“Œ &lt;strong&gt;ä½¿ç”¨æ—¶è¯·æ³¨æ„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸæ—¶é—´çš„ç‰¹æ®Šæ€§&lt;/strong&gt;ï¼šå¦‚æœä½ çš„å­—æ®µæ˜¯ &lt;code&gt;DATETIME&lt;/code&gt;æˆ– &lt;code&gt;TIMESTAMP&lt;/code&gt;ç±»å‹ï¼ˆåŒ…å«æ—¶åˆ†ç§’ï¼‰ï¼ŒæŸ¥è¯¢ &lt;code&gt;BETWEEN '2023-07-15' AND '2023-07-17'&lt;/code&gt;æ—¶ï¼Œç”±äºæ•°æ®åº“ä¼šå°† &lt;code&gt;'2023-07-17'&lt;/code&gt;éšå¼è½¬æ¢ä¸º &lt;code&gt;'2023-07-17 00:00:00'&lt;/code&gt;ï¼Œè¿™æ„å‘³ç€&lt;strong&gt;å®é™…ä¸Šä¸ä¼šåŒ…å« 7æœˆ17æ—¥ 00:00:00 ä¹‹åçš„æ‰€æœ‰æ—¶é—´ç‚¹&lt;/strong&gt;ï¼ˆä¾‹å¦‚17æ—¥ä¸‹åˆçš„æ•°æ®ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¨èåšæ³•&lt;/strong&gt;ï¼šè¦ç¡®ä¿åŒ…å«ä¸€æ•´å¤©ï¼Œé€šå¸¸ä¼šç”¨ &lt;code&gt;BETWEEN '2023-07-15 00:00:00' AND '2023-07-17 23:59:59'&lt;/code&gt;ï¼Œæˆ–è€…æ›´ä¼˜é›…åœ°ä½¿ç”¨åŠå¼€åŒºé—´ï¼š&lt;code&gt;&amp;gt;= '2023-07-15' AND &amp;lt; '2023-07-18'&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒƒå›´çš„æœ‰æ•ˆæ€§&lt;/strong&gt;ï¼šåŠ¡å¿…ç¡®ä¿ &lt;code&gt;value1&lt;/code&gt;å°äºæˆ–ç­‰äº &lt;code&gt;value2&lt;/code&gt;ã€‚å¦‚æœ &lt;code&gt;value1&lt;/code&gt;&amp;gt; &lt;code&gt;value2&lt;/code&gt;ï¼ŒæŸ¥è¯¢å°†è¿”å›ç©ºç»“æœé›†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¤” &lt;strong&gt;å¦‚æœæƒ³æ’é™¤è¾¹ç•Œæ€ä¹ˆåŠï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦&lt;strong&gt;ä¸åŒ…å«&lt;/strong&gt;è¾¹ç•Œå€¼çš„èŒƒå›´æŸ¥è¯¢ï¼ˆå¼€åŒºé—´ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;&amp;gt;&lt;/code&gt;å’Œ &lt;code&gt;&amp;lt;&lt;/code&gt;è¿ç®—ç¬¦æ¥æ˜¾å¼å®šä¹‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM table_name WHERE column_name &amp;gt; value1 AND column_name &amp;lt; value2;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;BETWEEN ... AND ...&lt;/code&gt;åœ¨ç»å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿä¸­é»˜è®¤æ˜¯åŒ…å«è¾¹ç•Œå€¼çš„ï¼ˆé—­åŒºé—´ï¼‰ï¼Œä½†åœ¨å¤„ç†æ—¥æœŸæ—¶é—´æ—¶éœ€æ ¼å¤–ç•™æ„æ—¶é—´ç²¾åº¦é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="having"&gt;having
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œä½ ç†è§£å¾—å®Œå…¨æ­£ç¡®ã€‚åœ¨è¿™ä¸ªSQLæŸ¥è¯¢ä¸­ï¼Œ&lt;code&gt;HAVING unit &amp;gt;= 100&lt;/code&gt;é‡Œçš„ &lt;code&gt;unit&lt;/code&gt;æ­£æ˜¯ &lt;code&gt;SELECT&lt;/code&gt;å­å¥ä¸­å®šä¹‰çš„åˆ«å &lt;code&gt;unit&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯ &lt;code&gt;SUM(unit)&lt;/code&gt;è¿™ä¸ªèšåˆå‡½æ•°è®¡ç®—åçš„ç»“æœåˆ«åã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£å®ƒçš„å·¥ä½œæ–¹å¼ä»¥åŠä¸ &lt;code&gt;WHERE&lt;/code&gt;çš„åŒºåˆ«ï¼Œè¯·çœ‹ä¸‹é¢çš„å¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;HAVING unit &amp;gt;= 100&lt;/th&gt;
&lt;th&gt;WHERE unit &amp;gt;= 100 (å‡è®¾unitæ˜¯åŸå­—æ®µ)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿‡æ»¤å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹&lt;strong&gt;åˆ†ç»„åçš„èšåˆç»“æœ&lt;/strong&gt;è¿›è¡Œè¿‡æ»¤ (å³&lt;code&gt;SUM(unit)&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å¯¹&lt;strong&gt;åŸå§‹è¡¨ä¸­çš„è¡Œæ•°æ®&lt;/strong&gt;è¿›è¡Œè¿‡æ»¤ï¼ˆåœ¨åˆ†ç»„å’Œèšåˆ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œæ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;&lt;strong&gt;ä¹‹å&lt;/strong&gt;æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;æ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ«åä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å¯ä»¥&lt;/strong&gt;ç›´æ¥ä½¿ç”¨&lt;code&gt;SELECT&lt;/code&gt;ä¸­å®šä¹‰çš„åˆ«å (&lt;code&gt;unit&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ä½¿ç”¨&lt;code&gt;SELECT&lt;/code&gt;ä¸­å®šä¹‰çš„åˆ«åï¼Œå› ä¸º&lt;code&gt;WHERE&lt;/code&gt;æ‰§è¡Œæ—¶&lt;code&gt;SELECT&lt;/code&gt;ä¸­çš„åˆ«åè¿˜æœªå®šä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨æ“ä½œç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¸¸ä¸èšåˆå‡½æ•°ï¼ˆå¦‚&lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;COUNT&lt;/code&gt;ï¼‰å’Œåˆ†ç»„å­—æ®µä¸€èµ·ä½¿ç”¨&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨æ™®é€šåˆ—çš„æ“ä½œç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç­›é€‰å‡º&lt;strong&gt;æ€»é”€é‡&amp;gt;=100&lt;/strong&gt;çš„äº§å“&lt;/td&gt;
&lt;td&gt;ç­›é€‰å‡º&lt;strong&gt;åŸå§‹è®°å½•ä¸­unitå­—æ®µå€¼&amp;gt;=100&lt;/strong&gt;çš„è¡Œï¼ˆè¿™é€šå¸¸ä¸æ˜¯æŸ¥è¯¢æœ¬æ„ï¼Œå› ä¸ºè®¢å•ä¸­å•ä¸ªæ¡ç›®çš„æ•°é‡å¯èƒ½å¾ˆå°ï¼Œæœ€ç»ˆSUMç»“æœæœªå¿…&amp;gt;=100ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³äºsqlçš„æ‰§è¡Œé¡ºåº"&gt;ğŸ’¡ å…³äºSQLçš„æ‰§è¡Œé¡ºåº
&lt;/h3&gt;&lt;p&gt;ç†è§£SQLçš„&lt;strong&gt;é€»è¾‘æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼ˆè¿™ä¸æˆ‘ä»¬ä¹¦å†™çš„é¡ºåºä¸åŒï¼‰èƒ½æ›´å¥½åœ°æŠŠæ¡&lt;code&gt;HAVING&lt;/code&gt;å’Œ&lt;code&gt;WHERE&lt;/code&gt;çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FROM&lt;/strong&gt; å’Œ &lt;strong&gt;JOIN&lt;/strong&gt;: ç¡®å®šæ•°æ®æ¥æºï¼Œè¿æ¥&lt;code&gt;products&lt;/code&gt;å’Œ&lt;code&gt;orders&lt;/code&gt;è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WHERE&lt;/strong&gt;: ä½¿ç”¨ &lt;code&gt;order_date&lt;/code&gt;æ¡ä»¶è¿‡æ»¤å‡º2020å¹´2æœˆçš„æ‰€æœ‰è®¢å•&lt;strong&gt;è¡Œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;: å°†è¿‡æ»¤åçš„æ•°æ®æŒ‰ &lt;code&gt;product_name&lt;/code&gt;åˆ†ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HAVING&lt;/strong&gt;: æ­¤æ—¶èšåˆå‡½æ•° &lt;code&gt;SUM(unit)&lt;/code&gt;å·²ç»è®¡ç®—å®Œæ¯•ï¼Œå¹¶æœ‰äº†åˆ«å &lt;code&gt;unit&lt;/code&gt;ã€‚æ­¤æ¡ä»¶è¿‡æ»¤æ‰æ€»é”€é‡å°äº100çš„åˆ†ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SELECT&lt;/strong&gt;: é€‰æ‹©æœ€ç»ˆè¦è¿”å›çš„åˆ—ï¼Œè¿™é‡Œå°±åŒ…æ‹¬äº† &lt;code&gt;product_name&lt;/code&gt;å’Œ &lt;code&gt;SUM(unit) AS unit&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;: (å¦‚æœæŸ¥è¯¢ä¸­æœ‰çš„è¯) å¯¹æœ€ç»ˆç»“æœè¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ­£æ˜¯å› ä¸º &lt;code&gt;HAVING&lt;/code&gt;åœ¨é€»è¾‘ä¸Šä½äº &lt;code&gt;GROUP BY&lt;/code&gt;ä¹‹åã€&lt;code&gt;SELECT&lt;/code&gt;ä¹‹å‰ï¼Œä½†SQLæ ‡å‡†å…è®¸å®ƒå¼•ç”¨ &lt;code&gt;SELECT&lt;/code&gt;ä¸­çš„åˆ«åï¼Œä½¿å¾—æŸ¥è¯¢å†™èµ·æ¥æ›´ç®€æ´ç›´è§‚ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;âœ… æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥ï¼Œä½ çš„æŸ¥è¯¢ç›®çš„æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰¾å‡ºåœ¨2020å¹´2æœˆä»½æ€»é”€é‡ï¼ˆ&lt;code&gt;unit&lt;/code&gt;ï¼‰å¤§äºç­‰äº100çš„æ‰€æœ‰äº§å“åç§°åŠå…¶æ€»é”€é‡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæŸ¥è¯¢æ˜¯æ­£ç¡®çš„ï¼Œ&lt;code&gt;HAVING unit &amp;gt;= 100&lt;/code&gt;æ­£æ˜¯åœ¨åˆ¤æ–­èšåˆåçš„æ€»é”€é‡æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id="on--where"&gt;on &amp;amp; where
&lt;/h2&gt;&lt;p&gt;åœ¨ SQL ä¸­ï¼Œ&lt;code&gt;JOIN ... ON&lt;/code&gt;è¯­å¥ä¸­&lt;strong&gt;å¯ä»¥&lt;/strong&gt;æ·»åŠ é¢å¤–çš„è¿‡æ»¤æ¡ä»¶ã€‚è¿™ä¸ &lt;code&gt;WHERE&lt;/code&gt;å­å¥çš„ä½¿ç”¨æœ‰æ˜¾è‘—åŒºåˆ«ï¼Œå°¤å…¶åœ¨æ€§èƒ½å’Œå¯¹ç»“æœé›†çš„å½±å“ä¸Šã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„å¯¹æ¯”æ€»ç»“å’Œè¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ON æ¡ä»¶&lt;/th&gt;
&lt;th&gt;WHERE æ¡ä»¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œé˜¶æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥è¿‡ç¨‹ä¸­åº”ç”¨&lt;/td&gt;
&lt;td&gt;è¿æ¥å®Œæˆååº”ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å½±å“èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½±å“å‚ä¸è¿æ¥çš„æ•°æ®è¡Œï¼Œå¯èƒ½å‡å°‘ä¸­é—´ç»“æœé›†&lt;/td&gt;
&lt;td&gt;è¿‡æ»¤æœ€ç»ˆç»“æœé›†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹OUTER JOINçš„å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å½±å“ä¸»è¡¨è®°å½•æ•°ï¼Œå³è¡¨ä¸åŒ¹é…åˆ™å¡«å……NULL&lt;/td&gt;
&lt;td&gt;ä¼šè¿‡æ»¤æ‰æ‰€æœ‰ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œï¼ˆåŒ…æ‹¬ä¸»è¡¨è®°å½•ï¼‰ï¼Œå¯èƒ½å¯¼è‡´OUTER JOINé€€åŒ–ä¸ºINNER JOIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ï¼ˆé€šå¸¸ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½æ›´é«˜&lt;/strong&gt;ï¼Œå°¤å…¶åœ¨è¿æ¥å¤§è¡¨æ—¶ï¼Œæå‰è¿‡æ»¤å‡å°‘æ•°æ®é‡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½è¾ƒä½&lt;/strong&gt;ï¼Œå…ˆè¿›è¡Œå…¨è¿æ¥å†è¿‡æ»¤ï¼Œä¸­é—´ç»“æœé›†å¯èƒ½æ›´åºå¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æå‰è¿‡æ»¤å…³è”è¡¨ã€åœ¨OUTER JOINä¸­ä¿ç•™ä¸»è¡¨æ‰€æœ‰è®°å½•æ—¶å¯¹å³è¡¨è¿‡æ»¤&lt;/td&gt;
&lt;td&gt;å¯¹è¿æ¥åçš„æœ€ç»ˆç»“æœé›†è¿›è¡Œç­›é€‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£-on-å’Œ-where-çš„åŒºåˆ«"&gt;ğŸ’¡ è¯¦è§£ ON å’Œ WHERE çš„åŒºåˆ«
&lt;/h3&gt;&lt;h4 id="1-ä½œç”¨æ—¶æœºä¸æœ¬è´¨ä¸åŒ"&gt;1. ä½œç”¨æ—¶æœºä¸æœ¬è´¨ä¸åŒ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ON å­å¥&lt;/strong&gt;ï¼šç”¨äºæŒ‡å®šè¡¨ä¹‹é—´çš„&lt;strong&gt;è¿æ¥æ¡ä»¶&lt;/strong&gt;ï¼Œå†³å®šäº†æ•°æ®å¦‚ä½•è¢«è¿æ¥ã€‚å®ƒè¿˜å¯ä»¥åŒ…å«é’ˆå¯¹å…³è”è¡¨çš„&lt;strong&gt;è¿‡æ»¤æ¡ä»¶&lt;/strong&gt;ï¼Œè¿™äº›æ¡ä»¶åœ¨&lt;strong&gt;è¿æ¥è¿‡ç¨‹ä¸­&lt;/strong&gt;ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WHERE å­å¥&lt;/strong&gt;ï¼šåœ¨è¿æ¥æ“ä½œå®Œæˆåï¼Œå¯¹ç”Ÿæˆçš„&lt;strong&gt;æ•´ä¸ªç»“æœé›†&lt;/strong&gt;è¿›è¡Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-å¯¹æŸ¥è¯¢ç»“æœçš„å½±å“å…³é”®åŒºåˆ«"&gt;2. å¯¹æŸ¥è¯¢ç»“æœçš„å½±å“ï¼ˆå…³é”®åŒºåˆ«ï¼‰
&lt;/h4&gt;&lt;p&gt;è¿™åœ¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;æˆ– &lt;code&gt;RIGHT JOIN&lt;/code&gt;ç­‰å¤–è¿æ¥ä¸­å·®å¼‚æœ€ä¸ºæ˜æ˜¾ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶æ”¾åœ¨ ON ä¸­&lt;/strong&gt;ï¼šæ— è®ºæ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œ&lt;strong&gt;ä¸»è¡¨&lt;/strong&gt;ï¼ˆ&lt;code&gt;LEFT JOIN&lt;/code&gt;çš„å·¦è¡¨æˆ– &lt;code&gt;RIGHT JOIN&lt;/code&gt;çš„å³è¡¨ï¼‰çš„æ‰€æœ‰è®°å½•éƒ½ä¼šè¿”å›ã€‚åªæ˜¯å½“å…³è”è¡¨ä¸æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå…¶ç›¸å…³å­—æ®µä¼šä»¥ &lt;code&gt;NULL&lt;/code&gt;å€¼å¡«å……ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶æ”¾åœ¨ WHERE ä¸­&lt;/strong&gt;ï¼š&lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¼šåœ¨è¿æ¥å®Œæˆåè¿‡æ»¤æ•´ä¸ªç»“æœé›†ã€‚å¦‚æœæ¡ä»¶æ¶‰åŠå…³è”è¡¨çš„å­—æ®µï¼Œé‚£äº›ä¸»è¡¨è®°å½•å­˜åœ¨ä½†å…³è”è¡¨å­—æ®µä¸º &lt;code&gt;NULL&lt;/code&gt;çš„è¡Œä¹Ÿä¼šè¢«è¿‡æ»¤æ‰ã€‚è¿™å¸¸å¸¸ä¼šå¯¼è‡´ &lt;code&gt;LEFT JOIN&lt;/code&gt;&lt;strong&gt;æ„å¤–åœ°é€€åŒ–æˆç±»ä¼¼ &lt;code&gt;INNER JOIN&lt;/code&gt;&lt;/strong&gt; çš„æ•ˆæœï¼Œä¸¢å¤±ä¸»è¡¨ä¸­æœªåŒ¹é…åˆ°çš„è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-æ€§èƒ½å·®å¼‚"&gt;3. æ€§èƒ½å·®å¼‚
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ON æ¡ä»¶&lt;/strong&gt;ï¼šæ•°æ®åº“ä¼˜åŒ–å™¨é€šå¸¸ä¼šå°è¯•åœ¨è¿æ¥æ“ä½œ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;åº”ç”¨ &lt;code&gt;ON&lt;/code&gt;å­å¥ä¸­çš„è¿‡æ»¤æ¡ä»¶ã€‚è¿™èƒ½æ˜¾è‘—&lt;strong&gt;å‡å°‘å‚ä¸è¿æ¥æ“ä½œçš„æ•°æ®é‡&lt;/strong&gt;ï¼Œä»è€Œé™ä½å†…å­˜ä½¿ç”¨å’Œæé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§è¡¨æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WHERE æ¡ä»¶&lt;/strong&gt;ï¼šè¿‡æ»¤å‘ç”Ÿåœ¨è¿æ¥ä¹‹åï¼Œè¿™æ„å‘³ç€æ•°æ®åº“å¯èƒ½éœ€è¦å…ˆæ„å»ºä¸€ä¸ªæ›´å¤§çš„ä¸­é—´ç»“æœé›†ï¼ˆåŒ…å«æ‰€æœ‰è¿æ¥çš„æ•°æ®ï¼‰ï¼Œç„¶åå†è¿›è¡Œè¿‡æ»¤ã€‚å¦‚æœä¸­é—´ç»“æœé›†éå¸¸åºå¤§ï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©on-è¿˜æ˜¯-where"&gt;ğŸ› ï¸ å¦‚ä½•é€‰æ‹©ï¼šON è¿˜æ˜¯ WHEREï¼Ÿ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;INNER JOIN æ—¶&lt;/strong&gt;ï¼šå°†æ¡ä»¶æ”¾åœ¨ &lt;code&gt;ON&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;WHERE&lt;/code&gt;ä¸­ï¼Œ&lt;strong&gt;æœ€ç»ˆçš„ç»“æœé›†é€šå¸¸æ˜¯ç›¸åŒçš„&lt;/strong&gt;ã€‚ä½†ä»æ€§èƒ½è§’åº¦è€ƒè™‘ï¼Œå»ºè®®å°†å…³è”è¡¨çš„è¿‡æ»¤æ¡ä»¶æ”¾åœ¨ &lt;code&gt;ON&lt;/code&gt;å­å¥ä¸­ï¼Œä»¥ä¾¿ä¼˜åŒ–å™¨èƒ½å°½æ—©è¿‡æ»¤æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LEFT/RIGHT JOIN æ—¶&lt;/strong&gt;ï¼šè¿™æ˜¯å†³ç­–çš„å…³é”®ã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ æƒ³&lt;strong&gt;ä¿ç•™ä¸»è¡¨çš„æ‰€æœ‰è®°å½•&lt;/strong&gt;ï¼ŒåŒæ—¶åªç­›é€‰å…³è”è¡¨ä¸­çš„æ•°æ®ï¼Œè¯·å°†å…³è”è¡¨çš„è¿‡æ»¤æ¡ä»¶æ”¾åœ¨ &lt;strong&gt;&lt;code&gt;ON&lt;/code&gt;&lt;/strong&gt; å­å¥ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ ç¡®å®éœ€è¦&lt;strong&gt;å¯¹è¿æ¥åçš„æœ€ç»ˆç»“æœé›†&lt;/strong&gt;è¿›è¡Œè¿‡æ»¤ï¼ˆåŒ…æ‹¬å¯èƒ½è¿‡æ»¤æ‰ä¸»è¡¨çš„ä¸€äº›è®°å½•ï¼‰ï¼Œåˆ™å°†æ¡ä»¶æ”¾åœ¨ &lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt; å­å¥ä¸­ã€‚ä½†è¦éå¸¸å°å¿ƒè¿™å¯èƒ½ä¼šæ”¹å˜è¿æ¥ç±»å‹çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ON&lt;/code&gt;å­å¥&lt;/strong&gt;ï¼šä¸»è¦ç”¨äº&lt;strong&gt;æŒ‡å®šè¿æ¥æ¡ä»¶&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;table1.id = table2.foreign_id&lt;/code&gt;ï¼‰å’Œ&lt;strong&gt;æå‰è¿‡æ»¤å…³è”è¡¨&lt;/strong&gt;çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;å­å¥&lt;/strong&gt;ï¼šä¸»è¦ç”¨äº&lt;strong&gt;è¿‡æ»¤æœ€ç»ˆä½ éœ€è¦çš„æ•´ä½“ç»“æœé›†&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºå¤æ‚æŸ¥è¯¢ï¼Œä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤æ¥æŸ¥çœ‹æ•°æ®åº“çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¿™æ˜¯åˆ¤æ–­æ€§èƒ½å·®å¼‚æœ€å¯é çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;JOIN ... ON&lt;/code&gt;ä¸­æ·»åŠ æ¡ä»¶ä¸ä»…æ˜¯å…è®¸çš„ï¼Œæœ‰æ—¶è¿˜æ˜¯ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½å’Œä¿æŠ¤æ•°æ®å®Œæ•´æ€§çš„é‡è¦æ‰‹æ®µã€‚&lt;/p&gt;
&lt;p&gt;ç‰¢è®°ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;strong&gt;&lt;code&gt;ON&lt;/code&gt;å½±å“è¿æ¥è¿‡ç¨‹ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;å½±å“æœ€ç»ˆç»“æœ&lt;/strong&gt;ã€‚ç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;æ—¶ï¼Œè°¨æ…è€ƒè™‘æ¡ä»¶æ”¾ç½®çš„ä½ç½®ï¼Œä»¥å…å¾—åˆ°éé¢„æœŸçš„ç»“æœã€‚&lt;/p&gt;
&lt;h2 id="group_concat"&gt;GROUP_CONCAT
&lt;/h2&gt;&lt;p&gt;GROUP_CONCAT æ˜¯ MySQL ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„&lt;strong&gt;èšåˆå‡½æ•°&lt;/strong&gt;ï¼Œå®ƒèƒ½å¤Ÿå°†åˆ†ç»„ï¼ˆGROUP BYï¼‰åçš„å¤šè¡Œæ•°æ®&lt;strong&gt;æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²&lt;/strong&gt;ï¼Œé»˜è®¤ç”¨é€—å·åˆ†éš”ï¼Œä½¿å¾—æ•°æ®å±•ç¤ºæ›´åŠ ç´§å‡‘å’Œç›´è§‚ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒçš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒè¯­æ³•"&gt;ğŸ“Œ æ ¸å¿ƒè¯­æ³•
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;GROUP_CONCAT([DISTINCT] è¦æ‹¼æ¥çš„å­—æ®µæˆ–è¡¨è¾¾å¼
[ORDER BY æ’åºå­—æ®µ ASC/DESC]
[SEPARATOR &amp;#39;è‡ªå®šä¹‰åˆ†éš”ç¬¦&amp;#39;])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»“åˆ &lt;code&gt;GROUP BY&lt;/code&gt;ä½¿ç”¨çš„å®Œæ•´æŸ¥è¯¢ç»“æ„é€šå¸¸æ˜¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT åˆ†ç»„å­—æ®µ, GROUP_CONCAT(...) AS åˆ«å
FROM è¡¨å
GROUP BY åˆ†ç»„å­—æ®µ;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å‚æ•°è§£è¯»"&gt;ğŸ› ï¸ å‚æ•°è§£è¯»
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä¸‹è¡¨ä½ å¯ä»¥å¿«é€Ÿäº†è§£æ¯ä¸ªå‚æ•°çš„ä½œç”¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å‚æ•°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä½œç”¨è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¤ºä¾‹åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ï¼Œå¯¹æ‹¼æ¥çš„å†…å®¹è¿›è¡Œå»é‡ï¼Œé¿å…é‡å¤å€¼å¹²æ‰°ç»“æœ&lt;/td&gt;
&lt;td&gt;åˆå¹¶åŒä¸€ç”¨æˆ·çš„ä¸åŒè®¢å•å·ï¼ˆå»é™¤é‡å¤è®¢å•å·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¦æ‹¼æ¥çš„å­—æ®µ/è¡¨è¾¾å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…å¡«ï¼ŒæŒ‡å®šéœ€è¦åˆå¹¶çš„åˆ—ï¼Œä¹Ÿèƒ½é€šè¿‡CONCATç­‰å‡½æ•°æ„é€ å¤æ‚çš„æ‹¼æ¥å†…å®¹&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP_CONCAT(CONCAT(å§“å, '-', å¹´é¾„))&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ï¼Œæ§åˆ¶æ‹¼æ¥å‰ç»„å†…æ•°æ®çš„æ’åºé¡ºåºï¼Œè®©ç»“æœæŒ‰ç‰¹å®šè§„å¾‹æ’åˆ—&lt;/td&gt;
&lt;td&gt;æŒ‰æ“ä½œæ—¶é—´å€’åºæ‹¼æ¥æ“ä½œæ—¥å¿—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SEPARATOR&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ï¼Œè‡ªå®šä¹‰åˆ†éš”ç¬¦ã€‚é»˜è®¤ä½¿ç”¨é€—å·ï¼ˆ,ï¼‰åˆ†éš”ï¼Œå¯å®šä¹‰ä¸ºç©ºæ ¼ã€åˆ†å·ã€æ¢è¡Œç­‰&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨åˆ†å·åˆ†éš”ï¼š&lt;code&gt;SEPARATOR '; '&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºç¡€ç”¨æ³•ç¤ºä¾‹"&gt;ğŸ’» åŸºç¡€ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ªè®¢å•è¡¨ &lt;code&gt;orders&lt;/code&gt;ï¼Œæ•°æ®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;product&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Orange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Banana&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€ç®€æ‹¼æ¥ï¼ˆé»˜è®¤é€—å·åˆ†éš”ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT order_id, GROUP_CONCAT(product) AS products
FROM orders
GROUP BY order_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;products&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple,Orange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Banana&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨è‡ªå®šä¹‰åˆ†éš”ç¬¦&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT order_id, GROUP_CONCAT(product SEPARATOR &amp;#39;, &amp;#39;) AS products
FROM orders
GROUP BY order_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;products&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple, Orange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Banana&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ’åºåæ‹¼æ¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT order_id, GROUP_CONCAT(product ORDER BY product ASC) AS products
FROM orders
GROUP BY order_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šï¼ˆæŒ‰äº§å“åå‡åºæ’åˆ—ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;products&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple,Orange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Banana&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å»é‡æ‹¼æ¥ (DISTINCT)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ &lt;code&gt;order_id=1&lt;/code&gt;æœ‰é‡å¤çš„ &lt;code&gt;Apple&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;product&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Orange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Banana&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT order_id, GROUP_CONCAT(DISTINCT product) AS products
FROM orders
GROUP BY order_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šï¼ˆ&lt;code&gt;Apple&lt;/code&gt;åªå‡ºç°ä¸€æ¬¡ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;products&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Apple,Orange&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Banana&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Apple&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¿›é˜¶åº”ç”¨åœºæ™¯"&gt;âš¡ è¿›é˜¶åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‹¼æ¥å¤æ‚è¡¨è¾¾å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ‰ä¸€å¼  &lt;code&gt;user_orders&lt;/code&gt;è¡¨ï¼ŒåŒ…å« &lt;code&gt;user_id&lt;/code&gt;, &lt;code&gt;order_no&lt;/code&gt;, &lt;code&gt;order_date&lt;/code&gt;å­—æ®µï¼Œå¸Œæœ›åˆå¹¶æˆ &lt;code&gt;è®¢å•å· (æ—¥æœŸ)&lt;/code&gt;çš„æ ¼å¼ï¼Œå¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT user_id,
GROUP_CONCAT(CONCAT(order_no, &amp;#39; (&amp;#39;, order_date, &amp;#39;)&amp;#39;)
ORDER BY order_date DESC
SEPARATOR &amp;#39;; &amp;#39;) AS order_info
FROM user_orders
GROUP BY user_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å¯ä»¥æ¸…æ™°å±•ç¤ºç”¨æˆ·çš„å†å²è®¢å•ï¼ŒæŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼Œç”¨åˆ†å·åˆ†éš”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç† NULL å€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœ &lt;code&gt;tasks&lt;/code&gt;è¡¨ä¸­çš„ &lt;code&gt;task_note&lt;/code&gt;å­—æ®µå¯èƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œæ‹¼æ¥æ—¶å¸Œæœ›æ›¿æ¢ä¸º &lt;code&gt;[æ— å¤‡æ³¨]&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT user_id,
GROUP_CONCAT(COALESCE(task_note, &amp;#39;[æ— å¤‡æ³¨]&amp;#39;)
SEPARATOR &amp;#39; | &amp;#39;) AS all_notes
FROM tasks
GROUP BY user_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°ä¼šè¿”å›å…¶å‚æ•°ä¸­ç¬¬ä¸€ä¸ªé &lt;code&gt;NULL&lt;/code&gt;çš„å€¼ï¼Œè¿™é¿å…äº† &lt;code&gt;NULL&lt;/code&gt;å¯¼è‡´æ‹¼æ¥å†…å®¹ç¼ºå¤±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é•¿åº¦é™åˆ¶ (group_concat_max_len)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL é»˜è®¤é™åˆ¶ &lt;code&gt;GROUP_CONCAT&lt;/code&gt;å‡½æ•°è¿”å›çš„ç»“æœå­—ç¬¦ä¸²&lt;strong&gt;æœ€å¤§é•¿åº¦ä¸º 1024 å­—èŠ‚&lt;/strong&gt;ã€‚å¦‚æœæ‹¼æ¥çš„å†…å®¹è¶…è¿‡è¿™ä¸ªé•¿åº¦ï¼Œç»“æœä¼šè¢«&lt;strong&gt;æˆªæ–­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤&lt;strong&gt;æŸ¥çœ‹&lt;/strong&gt;å½“å‰è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW VARIABLES LIKE &amp;#39;group_concat_max_len&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼&lt;strong&gt;ä¿®æ”¹&lt;/strong&gt;é™åˆ¶ï¼ˆ&lt;strong&gt;éœ€æ³¨æ„æƒé™&lt;/strong&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä»…åœ¨å½“å‰ä¼šè¯ä¸­ç”Ÿæ•ˆ
SET SESSION group_concat_max_len = 102400;
-- å…¨å±€è®¾ç½®ï¼ˆéœ€è¦SUPERæƒé™ï¼Œé‡å¯åå¯èƒ½å¤±æ•ˆï¼‰
SET GLOBAL group_concat_max_len = 102400;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¦æ°¸ä¹…ç”Ÿæ•ˆï¼Œé€šå¸¸éœ€è¦ä¿®æ”¹ MySQL çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;my.cnf&lt;/code&gt;æˆ– &lt;code&gt;my.ini&lt;/code&gt;ï¼‰ï¼Œåœ¨ &lt;code&gt;[mysqld]&lt;/code&gt;æ®µæ·»åŠ  &lt;code&gt;group_concat_max_len = 102400&lt;/code&gt;ï¼Œç„¶åé‡å¯æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NULL å€¼çš„å¤„ç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GROUP_CONCAT&lt;/code&gt;å‡½æ•°ä¼š&lt;strong&gt;è‡ªåŠ¨å¿½ç•¥&lt;/strong&gt;ç»„å†…çš„ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚å¦‚æœæ•´ä¸ªç»„çš„å€¼éƒ½æ˜¯ &lt;code&gt;NULL&lt;/code&gt;ï¼Œé‚£ä¹ˆ &lt;code&gt;GROUP_CONCAT&lt;/code&gt;çš„ç»“æœæ˜¯ &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¤„ç†&lt;strong&gt;è¶…å¤§é‡æ•°æ®&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;GROUP_CONCAT&lt;/code&gt;æ“ä½œä¼šåœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œå¯èƒ½ä¼šæ¶ˆè€—è¾ƒå¤šçš„å†…å­˜å’Œ CPUï¼Œä»è€Œæ‹–æ…¢æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–å»ºè®®&lt;/strong&gt;ï¼šå°½é‡ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ç¼©å°æŸ¥è¯¢èŒƒå›´ï¼›é¿å…åµŒå¥—è¿‡äºå¤æ‚çš„è¡¨è¾¾å¼ï¼›è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦å°†æ‰€æœ‰æ•°æ®åˆå¹¶å±•ç¤ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–æ•°æ®åº“çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ•°æ®åº“çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;äº†è§£ä¸åŒæ•°æ®åº“ä¸­ç±»ä¼¼çš„å‡½æ•°æœ‰åŠ©äºè·¨æ•°æ®åº“è¿ç§»æˆ–ç¼–å†™å…¼å®¹æ€§ä»£ç ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®åº“&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å‡½æ•°å&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP_CONCAT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤é€—å·åˆ†éš”ï¼Œå¯é…ç½®æ€§å¼º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PostgreSQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;STRING_AGG&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ— é»˜è®¤åˆ†éš”ç¬¦ï¼Œéœ€æ˜¾å¼æŒ‡å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SQL Server&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;STRING_AGG&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¯­æ³•ä¸ PostgreSQL ç±»ä¼¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Oracle&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LISTAGG&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŠŸèƒ½ç±»ä¼¼ï¼Œä½†è¯­æ³•å’Œç»†èŠ‚æœ‰å·®å¼‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;GROUP_CONCAT&lt;/code&gt;æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ±‡æ€»æŠ¥å‘Š&lt;/strong&gt;ï¼šå¦‚åˆ—å‡ºæ¯ä¸ªéƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥å§“åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆæ ‡ç­¾æˆ–åˆ†ç±»åˆ—è¡¨&lt;/strong&gt;ï¼šå°†å¤šè¡Œæ ‡ç­¾æ•°æ®åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºåŠ¨æ€SQLæŸ¥è¯¢&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–ä¸€å¯¹å¤šå…³ç³»çš„å±•ç¤º&lt;/strong&gt;ï¼šå°†å­è¡¨ä¿¡æ¯æµ“ç¼©åä¸ä¸»è¡¨å…³è”å±•ç¤ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨æ—¶ï¼Œè¯·åŠ¡å¿…ç•™æ„&lt;strong&gt;é•¿åº¦é™åˆ¶&lt;/strong&gt;å’Œ&lt;strong&gt;æ½œåœ¨çš„æ€§èƒ½å½±å“&lt;/strong&gt;ï¼Œå¹¶æ ¹æ®å®é™…éœ€æ±‚çµæ´»è¿ç”¨å»é‡ã€æ’åºå’Œè‡ªå®šä¹‰åˆ†éš”ç¬¦ç­‰é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;GROUP_CONCAT&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="regexp_like"&gt;REGEXP_LIKE
&lt;/h2&gt;&lt;p&gt;REGEXP_LIKE æ˜¯ SQL ä¸­ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å­—ç¬¦ä¸²åŒ¹é…å‡½æ•°ï¼Œå®ƒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æŒ‡å®šçš„æ¨¡å¼ã€‚ä¸ç®€å•çš„ &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦ç›¸æ¯”ï¼Œå®ƒèƒ½å®ç°æ›´å¤æ‚ã€æ›´çµæ´»çš„æ¨¡å¼åŒ¹é…ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¯¦ç»†ä»‹ç»è¿™ä¸ªå‡½æ•°ã€‚&lt;/p&gt;
&lt;h3 id="-å‡½æ•°è¯­æ³•å’Œå‚æ•°"&gt;ğŸ“Š å‡½æ•°è¯­æ³•å’Œå‚æ•°
&lt;/h3&gt;&lt;p&gt;REGEXP_LIKE å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REGEXP_LIKE(source_string, pattern [, match_parameter])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°å&lt;/th&gt;
&lt;th&gt;æ˜¯å¦å¿…é€‰&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;source_string&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;è¦æœç´¢çš„åŸå§‹å­—ç¬¦ä¸²æˆ–åˆ—åã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;pattern&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;ç”¨æ¥åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;match_parameter&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;ç”¨äºæ”¹å˜åŒ¹é…è¡Œä¸ºçš„å­—ç¬¦ä¸²ï¼Œå¯åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä»¥ä¸‹å­—ç¬¦ï¼š - &lt;strong&gt;&amp;lsquo;i&amp;rsquo;&lt;/strong&gt;: å¤§å°å†™ä¸æ•æ„ŸåŒ¹é… - &lt;strong&gt;&amp;lsquo;c&amp;rsquo;&lt;/strong&gt;: å¤§å°å†™æ•æ„ŸåŒ¹é… - &lt;strong&gt;&amp;rsquo;n&amp;rsquo;&lt;/strong&gt;: å…è®¸é€šé…ç¬¦ &lt;strong&gt;&lt;code&gt;.&lt;/code&gt;&lt;/strong&gt; åŒ¹é…æ¢è¡Œç¬¦ - &lt;strong&gt;&amp;rsquo;m&amp;rsquo;&lt;/strong&gt;: å°†å­—ç¬¦ä¸²è§†ä¸ºå¤šè¡Œï¼Œå½±å“ &lt;strong&gt;&lt;code&gt;^&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;$&lt;/code&gt;&lt;/strong&gt; çš„åŒ¹é…&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¦‚æœçœç•¥ &lt;code&gt;match_parameter&lt;/code&gt;ï¼ŒåŒ¹é…è¡Œä¸ºå¯èƒ½ä¼šå—æ•°æ®åº“ä¼šè¯çš„é»˜è®¤è®¾ç½®ï¼ˆå¦‚ &lt;code&gt;NLS_SORT&lt;/code&gt;ï¼‰å½±å“ï¼Œä½†é€šå¸¸é»˜è®¤ä¸ºå¤§å°å†™æ•æ„Ÿ &lt;strong&gt;&lt;code&gt;'.'&lt;/code&gt;&lt;/strong&gt; ä¸åŒ¹é…æ¢è¡Œç¬¦ï¼Œå¹¶å°†å­—ç¬¦ä¸²è§†ä¸ºå•è¡Œ ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ&lt;strong&gt;&lt;code&gt;TRUE&lt;/code&gt;&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;FALSE&lt;/code&gt;&lt;/strong&gt;ï¼‰ï¼Œå› æ­¤é€šå¸¸ç”¨åœ¨ &lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt; å­å¥æˆ– &lt;strong&gt;&lt;code&gt;CASE WHEN&lt;/code&gt;&lt;/strong&gt; è¡¨è¾¾å¼ä¸­ä½œä¸ºæ¡ä»¶åˆ¤æ–­ ã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦"&gt;ğŸ” å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦
&lt;/h3&gt;&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶å…ƒå­—ç¬¦ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ€å¸¸è§çš„ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…ƒå­—ç¬¦&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;.&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'a.c'&lt;/code&gt;åŒ¹é… &amp;ldquo;abc&amp;rdquo;, &amp;ldquo;aXc&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰é¢çš„å…ƒç´ é›¶æ¬¡æˆ–å¤šæ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'ab*c'&lt;/code&gt;åŒ¹é… &amp;ldquo;ac&amp;rdquo;, &amp;ldquo;abc&amp;rdquo;, &amp;ldquo;abbc&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;+&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰é¢çš„å…ƒç´ ä¸€æ¬¡æˆ–å¤šæ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'ab+c'&lt;/code&gt;åŒ¹é… &amp;ldquo;abc&amp;rdquo;, &amp;ldquo;abbc&amp;rdquo; (ä¸åŒ¹é… &amp;ldquo;ac&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;?&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰é¢çš„å…ƒç´ é›¶æ¬¡æˆ–ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'ab?c'&lt;/code&gt;åŒ¹é… &amp;ldquo;ac&amp;rdquo; æˆ– &amp;ldquo;abc&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;^&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'^abc'&lt;/code&gt;åŒ¹é…ä»¥ &amp;ldquo;abc&amp;rdquo; å¼€å¤´çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;$&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'xyz$'&lt;/code&gt;åŒ¹é…ä»¥ &amp;ldquo;xyz&amp;rdquo; ç»“å°¾çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'[aeiou]'&lt;/code&gt;åŒ¹é…ä»»æ„å…ƒéŸ³å­—æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;[^]&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä¸åœ¨æ–¹æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'[^0-9]'&lt;/code&gt;åŒ¹é…ä»»æ„éæ•°å­—å­—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;**`&lt;/td&gt;
&lt;td&gt;`**&lt;/td&gt;
&lt;td&gt;é€»è¾‘&amp;quot;æˆ–&amp;quot;ï¼ŒåŒ¹é…å·¦è¾¹æˆ–å³è¾¹çš„æ¨¡å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ä¸€ä¸ªå­è¡¨è¾¾å¼ç»„ï¼Œå¯ç”¨äºåˆ†ç»„æˆ–æ•è·&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'(abc)+'&lt;/code&gt;åŒ¹é… &amp;ldquo;abc&amp;rdquo;, &amp;ldquo;abcabc&amp;rdquo; ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;{m,n}&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰é¢çš„å…ƒç´ è‡³å°‘ m æ¬¡ï¼Œè‡³å¤š n æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'a{2,3}'&lt;/code&gt;åŒ¹é… &amp;ldquo;aa&amp;rdquo; æˆ– &amp;ldquo;aaa&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;\d&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº &lt;code&gt;[0-9]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'\d+'&lt;/code&gt;åŒ¹é…è¿ç»­æ•°å­—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;\w&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº &lt;code&gt;[A-Za-z0-9_]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'\w+'&lt;/code&gt;åŒ¹é…ä¸€ä¸ªå•è¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬ç”¨æ³•ç¤ºä¾‹"&gt;ğŸ“– åŸºæœ¬ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º &lt;code&gt;employees&lt;/code&gt;çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª &lt;code&gt;email&lt;/code&gt;åˆ—ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾ä»¥ &amp;ldquo;.com&amp;rdquo; ç»“å°¾çš„é‚®ç®±åœ°å€&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM employees
WHERE REGEXP_LIKE(email, &amp;#39;\.com$&amp;#39;, &amp;#39;i&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\.&lt;/code&gt;åŒ¹é…å®é™…çš„ç‚¹å·ï¼ˆ&lt;code&gt;.&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$&lt;/code&gt;è¡¨ç¤ºå­—ç¬¦ä¸²ç»“å°¾&lt;/li&gt;
&lt;li&gt;&lt;code&gt;'i'&lt;/code&gt;ä½¿åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥ &amp;ldquo;.COM&amp;rdquo; æˆ– &amp;ldquo;.Com&amp;rdquo; ä¹Ÿä¼šè¢«åŒ¹é…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾åå­—ä»¥ &amp;ldquo;J&amp;rdquo; å¼€å¤´ï¼Œåè·Ÿä»»æ„å­—ç¬¦çš„å‘˜å·¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM employees
WHERE REGEXP_LIKE(name, &amp;#39;^J.*&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;^J&lt;/code&gt;è¡¨ç¤ºä»¥ &amp;ldquo;J&amp;rdquo; å¼€å¤´&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.*&lt;/code&gt;è¡¨ç¤ºåŒ¹é…ä»»æ„æ•°é‡ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰çš„ä»»æ„å­—ç¬¦&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é«˜çº§ç”¨æ³•å’Œåœºæ™¯"&gt;âš¡ é«˜çº§ç”¨æ³•å’Œåœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šæ¡ä»¶åŒ¹é…ï¼ˆORï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥æ‰¾åŒ…å« &amp;ldquo;error&amp;rdquo; æˆ– &amp;ldquo;warning&amp;rdquo; çš„æ—¥å¿—æ¶ˆæ¯ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM system_log
WHERE REGEXP_LIKE(log_message, &amp;#39;error|warning&amp;#39;, &amp;#39;i&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;|&lt;/code&gt;æ“ä½œç¬¦èµ·åˆ°äº†é€»è¾‘&amp;quot;æˆ–&amp;quot;çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éªŒè¯æ•°æ®æ ¼å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éªŒè¯é‚®ç®±æ ¼å¼æ˜¯å¦ç¬¦åˆå¸¸è§è§„åˆ™ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT email FROM users
WHERE REGEXP_LIKE(email, &amp;#39;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ¨¡å¼å¯ä»¥æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŸºæœ¬ç¬¦åˆç”µå­é‚®ä»¶åœ°å€çš„æ ¼å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿‡æ»¤æ•æ„Ÿè¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å†…å®¹ç®¡ç†ä¸­ï¼Œè¿‡æ»¤æ‰åŒ…å«ç‰¹å®šæ•æ„Ÿè¯çš„è®°å½• ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM user_posts
WHERE NOT REGEXP_LIKE(post_content, &amp;#39;æ•æ„Ÿè¯1|æ•æ„Ÿè¯2|æ•æ„Ÿè¯3&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»“åˆ &lt;code&gt;NOT&lt;/code&gt;æ“ä½œç¬¦ï¼Œå¯ä»¥æ’é™¤åŒ…å«è¿™äº›è¯çš„è®°å½•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å…¼å®¹æ€§&lt;/strong&gt;ï¼š&lt;code&gt;REGEXP_LIKE&lt;/code&gt;å‡½æ•°åœ¨ &lt;strong&gt;MySQL 8.0&lt;/strong&gt; åŠæ›´é«˜ç‰ˆæœ¬ä¸­æ‰è¢«æ­£å¼å¼•å…¥å’Œæ”¯æŒ ã€‚åœ¨æ—§ç‰ˆæœ¬ MySQL æˆ–æŸäº›æ•°æ®åº“ï¼ˆå¦‚ SQLiteï¼‰ä¸­å¯èƒ½ä¸å¯ç”¨ã€‚å¯¹äºä½ç‰ˆæœ¬ MySQLï¼Œé€šå¸¸ä½¿ç”¨ &lt;code&gt;REGEXP&lt;/code&gt;æˆ– &lt;code&gt;RLIKE&lt;/code&gt;æ“ä½œç¬¦æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œä¾‹å¦‚ &lt;code&gt;WHERE email REGEXP '\\.com$'&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…é€šå¸¸æ¯”ç®€å•çš„ &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œ&lt;strong&gt;æ›´è€—è´¹èµ„æº&lt;/strong&gt;ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚åº”é¿å…åœ¨è¡¨ä¸Šè¿›è¡Œå…¨æ‰«æçš„æ­£åˆ™åŒ¹é…ï¼Œå°½é‡ç»“åˆå…¶ä»–æ¡ä»¶ç¼©å°æŸ¥è¯¢èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦&lt;/strong&gt;ï¼šæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å…ƒå­—ç¬¦ï¼ˆå¦‚ &lt;code&gt;.&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;?&lt;/code&gt;, &lt;code&gt;$&lt;/code&gt;ç­‰ï¼‰å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚å¦‚æœä½ éœ€è¦åŒ¹é…è¿™äº›å­—ç¬¦æœ¬èº«ï¼Œå¿…é¡»åœ¨å®ƒä»¬å‰é¢åŠ ä¸Šåæ–œæ  &lt;code&gt;\&lt;/code&gt; è¿›è¡Œè½¬ä¹‰ï¼ˆä¾‹å¦‚&lt;code&gt;.&lt;/code&gt; æ¥åŒ¹é…ä¸€ä¸ªå®é™…çš„ç‚¹å·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒ¹é…å‚æ•°å†²çª&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;match_parameter&lt;/code&gt;ä¸­æŒ‡å®šçš„å€¼æœ‰å†²çªï¼ˆä¾‹å¦‚åŒæ—¶æŒ‡å®š &lt;code&gt;'i'&lt;/code&gt;å’Œ &lt;code&gt;'c'&lt;/code&gt;ï¼‰ï¼Œæ•°æ®åº“é€šå¸¸ä¼šä½¿ç”¨&lt;strong&gt;æœ€åæŒ‡å®šçš„ä¸€ä¸ªå€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REGEXP_LIKE&lt;/code&gt;æ˜¯ä¸€ä¸ªæå…¶å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒå°†æ­£åˆ™è¡¨è¾¾å¼çš„çµæ´»æ€§å¼•å…¥äº† SQL æŸ¥è¯¢ä¸­ã€‚æ— è®ºæ˜¯è¿›è¡Œå¤æ‚çš„æ¨¡å¼åŒ¹é…ã€æ•°æ®éªŒè¯è¿˜æ˜¯æ•°æ®è¿‡æ»¤ï¼Œå®ƒéƒ½èƒ½æä¾›æ¯”ä¼ ç»Ÿ &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œæ›´ç²¾ç¡®å’Œå¼ºå¤§çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æŒæ¡å®ƒçš„å…³é”®åœ¨äºç†Ÿæ‚‰æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼Œå¹¶æ ¹æ®å…·ä½“çš„æ•°æ®åº“ç¯å¢ƒåˆç†ä½¿ç”¨ï¼ŒåŒæ—¶æ³¨æ„å…¶å¯¹æ€§èƒ½çš„æ½œåœ¨å½±å“ã€‚&lt;/p&gt;
&lt;h2 id="regexp"&gt;REGEXP
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;REGEXP&lt;/code&gt;è¿ç®—ç¬¦å…è®¸ä½ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå¤æ‚çš„å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…ï¼ŒåŠŸèƒ½æ¯”æ ‡å‡†çš„ &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦æ›´å¼ºå¤§å’Œçµæ´»ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†ä»‹ç»å®ƒçš„ä¸»è¦ç”¨æ³•ã€è§„åˆ™å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€regexp-åŸºæœ¬è¯­æ³•ä¸æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ“Š ä¸€ã€REGEXP åŸºæœ¬è¯­æ³•ä¸æ ¸å¿ƒåŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REGEXP&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM table_name WHERE column_name REGEXP &amp;#39;pattern&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ &lt;code&gt;pattern&lt;/code&gt;æ˜¯ä½ è¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸æ¨¡å¼åŒ¹é…ï¼Œè¿”å› 1 (true)ï¼›å¦åˆ™è¿”å› 0 (false)ã€‚è‹¥ä»»ä¸€å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œåˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;code&gt;REGEXP&lt;/code&gt;é»˜è®¤&lt;strong&gt;ä¸åŒºåˆ†å¤§å°å†™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;MySQL è¿˜æ”¯æŒ &lt;code&gt;RLIKE&lt;/code&gt;æ“ä½œç¬¦ï¼Œå®ƒæ˜¯ &lt;code&gt;REGEXP&lt;/code&gt;çš„åŒä¹‰è¯ï¼ŒåŠŸèƒ½å®Œå…¨ç›¸åŒã€‚å¦å®šæ“ä½œåˆ™ä½¿ç”¨ &lt;code&gt;NOT REGEXP&lt;/code&gt;ï¼Œç”¨äºæ£€æŸ¥å­—ç¬¦ä¸²ä¸æ¨¡å¼æ˜¯å¦ä¸åŒ¹é…ã€‚&lt;/p&gt;
&lt;h3 id="-äºŒæ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦è¯¦è§£"&gt;ğŸ” äºŒã€æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ç†è§£æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦æ˜¯æœ‰æ•ˆä½¿ç”¨ &lt;code&gt;REGEXP&lt;/code&gt;çš„å…³é”®ã€‚ä¸‹è¡¨æ±‡æ€»äº†å¸¸ç”¨çš„å…ƒå­—ç¬¦åŠå…¶å«ä¹‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å…ƒå­—ç¬¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¤ºä¾‹æè¿°&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;^&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'^abc'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»¥ &amp;ldquo;abc&amp;rdquo; å¼€å¤´çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;$&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'xyz$'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»¥ &amp;ldquo;xyz&amp;rdquo; ç»“å°¾çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;.&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…é™¤ &amp;ldquo;\n&amp;rdquo; å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'a.c'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å¦‚ &amp;ldquo;abc&amp;rdquo;ã€&amp;ldquo;axc&amp;rdquo; çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦é›¶æ¬¡æˆ–å¤šæ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'zo*'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é… &amp;ldquo;z&amp;rdquo;ã€&amp;ldquo;zoo&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;+&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡æˆ–å¤šæ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'zo+'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é… &amp;ldquo;zo&amp;rdquo;ã€&amp;ldquo;zoo&amp;rdquo;ï¼Œä½†ä¸åŒ¹é… &amp;ldquo;z&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;?&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦é›¶æ¬¡æˆ–ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'a?x'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é… &amp;ldquo;x&amp;rdquo;ã€&amp;ldquo;ax&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;|&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨ç¤º&amp;quot;æˆ–&amp;quot;æ“ä½œï¼ŒåŒ¹é…ç«–çº¿ä¸¤ä¾§çš„ä»»ä¸€æ¨¡å¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;lsquo;a|b&amp;rsquo;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…åŒ…å« &amp;ldquo;a&amp;rdquo; æˆ– &amp;ldquo;b&amp;rdquo; çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[abc]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'[abc]'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é… &amp;ldquo;a&amp;rdquo;ã€&amp;ldquo;b&amp;rdquo; æˆ– &amp;ldquo;c&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[^abc]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;æœª&lt;/strong&gt;åŒ…å«åœ¨æ–¹æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'[^abc]'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä¸æ˜¯ &amp;ldquo;a&amp;rdquo;ã€&amp;ldquo;b&amp;rdquo;ã€&amp;ldquo;c&amp;rdquo; çš„å­—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;[a-z]&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'[0-9]'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»»æ„æ•°å­—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;{n}&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ç¡®å®šçš„ n æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'o{2}'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…è¿ç»­ä¸¤ä¸ª &amp;ldquo;o&amp;rdquo;ï¼Œå¦‚ &amp;ldquo;food&amp;rdquo; ä¸­çš„ &amp;ldquo;oo&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;{n,m}&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…è‡³å°‘ n æ¬¡ï¼Œè‡³å¤š m æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'o{2,4}'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é… &amp;ldquo;oo&amp;rdquo;ã€&amp;ldquo;ooo&amp;rdquo;ã€&amp;ldquo;oooo&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„è½¬ä¹‰åºåˆ—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\d&lt;/code&gt;: åŒ¹é…ä»»æ„æ•°å­—ï¼Œç­‰åŒäº &lt;code&gt;[0-9]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;\D&lt;/code&gt;: åŒ¹é…ä»»æ„éæ•°å­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;\s&lt;/code&gt;: åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸‰å®ç”¨ç¤ºä¾‹"&gt;ğŸ›  ä¸‰ã€å®ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒ¹é…ç‰¹å®šå¼€å¤´æˆ–ç»“å°¾&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾åå­—ä»¥ &amp;#39;A&amp;#39; åˆ° &amp;#39;M&amp;#39; å¼€å¤´çš„ç”¨æˆ·
SELECT * FROM users WHERE name REGEXP &amp;#39;^[A-M]&amp;#39;;
-- æŸ¥æ‰¾ä»¥ &amp;#39;ing&amp;#39; ç»“å°¾çš„å•è¯
SELECT * FROM words WHERE word REGEXP &amp;#39;ing$&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒ¹é…åŒ…å«ç‰¹å®šå­—ç¬¦æˆ–æ•°å­—&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾åŒ…å«æ•°å­—çš„è®¢å•å·
SELECT * FROM orders WHERE order_number REGEXP &amp;#39;[0-9]&amp;#39;;
-- æŸ¥æ‰¾äº§å“ç±»åˆ«ä¸­åŒ…å« &amp;#39;electronics&amp;#39; æˆ– &amp;#39;furniture&amp;#39; çš„äº§å“
SELECT * FROM products WHERE category REGEXP &amp;#39;electronics|furniture&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®éªŒè¯ä¸æå–&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- éªŒè¯é‚®ç®±æ ¼å¼ (ç®€åŒ–ç¤ºä¾‹)
SELECT email FROM users WHERE email REGEXP &amp;#39;^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$&amp;#39;;
-- åŒ¹é…ç‰¹å®šåŸŸåä¸‹çš„é‚®ç®±
SELECT * FROM employees WHERE email REGEXP &amp;#39;@example\\.com$&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒ¹é…æ±‰å­—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨UTF8MB4å­—ç¬¦é›†ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼åŒ¹é…åŒ…å«æ±‰å­—çš„å­—æ®µï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT buildnum FROM ya_evaluating_price WHERE buildnum REGEXP &amp;#39;[\\x{4e00}-\\x{9fa5}]&amp;#39;;
-- æˆ–è€…åˆ©ç”¨å­—ç¬¦é•¿åº¦å·®å¼‚åˆ¤æ–­ï¼ˆå‰ææ˜¯å­—æ®µå­—ç¬¦é›†ä¸ºUTF8MB4ï¼‰
SELECT buildnum FROM ya_evaluating_price WHERE CHAR_LENGTH(buildnum) &amp;lt; LENGTH(buildnum);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨ REGEXP_REPLACE æ›¿æ¢å¤šä½™ç©ºæ ¼ï¼ˆå•ä¸ªæˆ–å¤šä¸ªç©ºæ ¼æ›¿æ¢ä¸ºä¸€ä¸ªç©ºæ ¼ï¼‰
UPDATE products SET product_name = REGEXP_REPLACE(product_name, &amp;#39;[[:space:]]+&amp;#39;, &amp;#39; &amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å››æ€§èƒ½æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ å››ã€æ€§èƒ½æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼š&lt;code&gt;REGEXP&lt;/code&gt;æ“ä½œé€šå¸¸&lt;strong&gt;ä¼šè¿›è¡Œå…¨è¡¨æ‰«æ&lt;/strong&gt;ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹æ•°æ®é›†ä¸Šä½¿ç”¨å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå¯èƒ½å¯¹&lt;strong&gt;æ€§èƒ½äº§ç”Ÿæ˜¾è‘—å½±å“&lt;/strong&gt;ã€‚å®ƒåŸºäº Henry Spencer æ­£åˆ™è¡¨è¾¾å¼åº“å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è¿‡åº¦ä½¿ç”¨&lt;/strong&gt;ï¼šåœ¨åº”ç”¨å±‚æˆ–ETLè¿‡ç¨‹ä¸­è¿›è¡Œé¢„å¤„ç†ï¼Œæˆ–è€ƒè™‘ä½¿ç”¨ç”Ÿæˆåˆ—ï¼ˆGenerated Columnsï¼‰æ¥å­˜å‚¨æ­£åˆ™åŒ¹é…ç»“æœå¹¶å»ºç«‹ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç¡®é”šå®š&lt;/strong&gt;ï¼šå°½é‡ä½¿ç”¨ &lt;code&gt;^&lt;/code&gt;å’Œ &lt;code&gt;$&lt;/code&gt;æ˜ç¡®åŒ¹é…å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œç¼©å°æœç´¢èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹è¯•è¡¨è¾¾å¼&lt;/strong&gt;ï¼šç¼–å†™å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå»ºè®®å…ˆåœ¨æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å·¥å…·ä¸­éªŒè¯ï¼Œç„¶åå†åœ¨SQLä¸­ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒºåˆ†å¤§å°å†™åŒ¹é…&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code&gt;REGEXP&lt;/code&gt;åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™ã€‚å¦‚æœéœ€è¦åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;BINARY&lt;/code&gt;å…³é”®å­—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE BINARY name REGEXP &amp;#39;^[A-M]&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;REGEXP&lt;/code&gt;è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œé€‚ç”¨äºè¿›è¡Œå¤æ‚çš„å­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…ã€æ•°æ®éªŒè¯å’Œæ¸…æ´—ä»»åŠ¡ã€‚æŒæ¡å…¶å…ƒå­—ç¬¦å’Œè¯­æ³•èƒ½æå¤§æå‡å¤„ç†æ–‡æœ¬æ•°æ®çš„çµæ´»æ€§ã€‚ä½†åŠ¡å¿…æ³¨æ„å…¶åœ¨å¤§æ•°æ®é›†ä¸Šå¯èƒ½å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µä»¥ç¡®ä¿æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id="like"&gt;LIKE
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦æ˜¯è¿›è¡Œå­—ç¬¦ä¸²æ¨¡ç³ŠåŒ¹é…çš„åˆ©å™¨ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨é€šé…ç¬¦æ¥æŸ¥æ‰¾ç¬¦åˆç‰¹å®šæ¨¡å¼çš„æ•°æ®ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»å®ƒçš„ç”¨æ³•ã€æŠ€å·§ä»¥åŠéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€like-åŸºç¡€é€šé…ç¬¦ä¸è¯­æ³•"&gt;ğŸ“Š &lt;strong&gt;ä¸€ã€LIKE åŸºç¡€ï¼šé€šé…ç¬¦ä¸è¯­æ³•&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LIKE&lt;/code&gt;çš„æ ¸å¿ƒåœ¨äºä¸¤ä¸ªé€šé…ç¬¦ï¼Œå®ƒä»¬èµ‹äºˆäº† &lt;code&gt;LIKE&lt;/code&gt;çµæ´»åŒ¹é…çš„èƒ½åŠ›ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é€šé…ç¬¦&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;åŒ¹é…ç¤ºä¾‹ï¼ˆå‡è®¾ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;%&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;ä»»æ„æ•°é‡&lt;/strong&gt;ï¼ˆé›¶ä¸ªæˆ–å¤šä¸ªï¼‰çš„ä»»æ„å­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE 'app%'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&amp;ldquo;apple&amp;rdquo;, &amp;ldquo;application&amp;rdquo;, &amp;ldquo;app&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;_&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;å•ä¸ª&lt;/strong&gt;ä»»æ„å­—ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE '_pple'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&amp;ldquo;apple&amp;rdquo; (ä½† &amp;ldquo;pineapple&amp;rdquo; ä¸è¡Œ)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ç»“æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT åˆ—å1, åˆ—å2, ...
FROM è¡¨å
WHERE åˆ—å LIKE &amp;#39;æ¨¡å¼&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-äºŒlike-çš„å¸¸è§ç”¨æ³•ä¸ç¤ºä¾‹"&gt;ğŸ” &lt;strong&gt;äºŒã€LIKE çš„å¸¸è§ç”¨æ³•ä¸ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ç»„åˆé€šé…ç¬¦ï¼Œä½ å¯ä»¥å®ç°å¤šç§åŒ¹é…æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŒ¹é…ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;æè¿°è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‰ç¼€åŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE 'abc%'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»¥ &amp;ldquo;abc&amp;rdquo; &lt;strong&gt;å¼€å¤´&lt;/strong&gt;çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åç¼€åŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE '%abc'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»¥ &amp;ldquo;abc&amp;rdquo; &lt;strong&gt;ç»“å°¾&lt;/strong&gt;çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸­é—´åŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE '%abc%'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;åŒ…å«&lt;/strong&gt; &amp;ldquo;abc&amp;rdquo; çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®é•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE 'a_c'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»¥ &amp;ldquo;a&amp;rdquo; å¼€å¤´ã€&amp;ldquo;c&amp;rdquo; ç»“å°¾çš„&lt;strong&gt;ä¸‰å­—ç¬¦&lt;/strong&gt;å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»„åˆåŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIKE 'a%b%c'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…ä»¥ &amp;ldquo;a&amp;rdquo; å¼€å¤´ï¼Œä¸­é—´æŸå¤„æœ‰ &amp;ldquo;b&amp;rdquo;ï¼Œå¹¶ä»¥ &amp;ldquo;c&amp;rdquo; ç»“å°¾çš„å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¦å®šåŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NOT LIKE ...&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥æ‰¾&lt;strong&gt;ä¸åŒ¹é…&lt;/strong&gt;æŒ‡å®šæ¨¡å¼çš„è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä¸€äº›å®ç”¨ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾å§“â€œå¼ â€çš„å­¦ç”Ÿï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM students WHERE name LIKE &amp;#39;å¼ %&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾æ‰€æœ‰Gmailé‚®ç®±çš„ç”¨æˆ·ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE email LIKE &amp;#39;%@gmail.com&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾äº§å“æè¿°ä¸­åŒ…å«â€œæŠ˜æ‰£â€çš„å•†å“ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM products WHERE description LIKE &amp;#39;%æŠ˜æ‰£%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾åå­—ç¬¬äºŒä¸ªå­—æ˜¯â€œæ˜â€çš„å­¦ç”Ÿï¼ˆå¦‚â€œææ˜â€ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM students WHERE name LIKE &amp;#39;_æ˜%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ’é™¤æ‰€æœ‰ä»¥â€œtestâ€å¼€å¤´çš„æµ‹è¯•ç”¨æˆ·ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username NOT LIKE &amp;#39;test%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸‰é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ &lt;strong&gt;ä¸‰ã€é‡è¦æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é»˜è®¤å¤§å°å†™ä¸æ•æ„Ÿ&lt;/strong&gt;ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ&lt;code&gt;LIKE&lt;/code&gt;åŒ¹é…æ˜¯&lt;strong&gt;ä¸åŒºåˆ†å¤§å°å†™&lt;/strong&gt;çš„ï¼ˆä¾‹å¦‚ &amp;lsquo;a&amp;rsquo; å’Œ &amp;lsquo;A&amp;rsquo; è¢«è§†ä¸ºç›¸åŒï¼‰ã€‚è¿™ä¸€è¡Œä¸ºå–å†³äºæ•°æ®åº“çš„å­—ç¬¦é›†å’Œæ’åºè§„åˆ™ï¼ˆCollationï¼‰è®¾ç½®ã€‚å¦‚éœ€åŒºåˆ†å¤§å°å†™ï¼Œå¯ä½¿ç”¨ &lt;code&gt;BINARY&lt;/code&gt;å…³é”®å­—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM table_name WHERE BINARY column_name LIKE &amp;#39;%a%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦&lt;/strong&gt;ï¼šå¦‚æœä½ éœ€è¦åŒ¹é…é€šé…ç¬¦æœ¬èº«ï¼ˆä¾‹å¦‚æŸ¥æ‰¾åŒ…å«ä¸‹åˆ’çº¿ &lt;code&gt;_&lt;/code&gt;æˆ–ç™¾åˆ†å· &lt;code&gt;%&lt;/code&gt;çš„æ•°æ®ï¼‰ï¼Œéœ€è¦ä½¿ç”¨ &lt;code&gt;ESCAPE&lt;/code&gt;å…³é”®å­—å®šä¹‰è½¬ä¹‰å­—ç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾åŒ…å«ä¸‹åˆ’çº¿ &amp;#34;_&amp;#34; çš„æ–‡ä»¶å
SELECT * FROM files WHERE filename LIKE &amp;#39;%\_%&amp;#39; ESCAPE &amp;#39;\&amp;#39;;
-- æŸ¥æ‰¾åŒ…å«ç™¾åˆ†å· &amp;#34;%&amp;#34; çš„æ–‡æœ¬
SELECT * FROM documents WHERE content LIKE &amp;#39;%\%%&amp;#39; ESCAPE &amp;#39;\&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœè¢«åŒ¹é…çš„åˆ—å­˜åœ¨ &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œ&lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦æ— æ³•åŒ¹é…åˆ°å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;NULL LIKE '%pattern%'&lt;/code&gt;çš„ç»“æœæ˜¯ &lt;code&gt;NULL&lt;/code&gt;ï¼Œè€Œä¸æ˜¯ &lt;code&gt;TRUE&lt;/code&gt;æˆ– &lt;code&gt;FALSE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å››æ€§èƒ½ä¼˜åŒ–ä¸æ›¿ä»£æ–¹æ¡ˆ"&gt;âš¡ &lt;strong&gt;å››ã€æ€§èƒ½ä¼˜åŒ–ä¸æ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LIKE&lt;/code&gt;è™½ç„¶æ–¹ä¾¿ï¼Œä½†åœ¨å¤§æ•°æ®é›†ä¸Šä½¿ç”¨ä¸å½“å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½é™·é˜±&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LIKE '%pattern%'&lt;/code&gt;&lt;/strong&gt;ï¼ˆå‰å¯¼é€šé…ç¬¦ï¼‰å’Œ &lt;strong&gt;&lt;code&gt;LIKE '%pattern'&lt;/code&gt;&lt;/strong&gt;ï¼ˆåç¼€åŒ¹é…ï¼‰é€šå¸¸ä¼šå¯¼è‡´&lt;strong&gt;å…¨è¡¨æ‰«æ&lt;/strong&gt;ï¼Œå› ä¸ºæ•°æ®åº“æ— æ³•æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•ï¼Œåœ¨ç™¾ä¸‡çº§æ•°æ®ä¸Šå¯èƒ½éå¸¸ç¼“æ…¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LIKE 'pattern%'&lt;/code&gt;&lt;/strong&gt;ï¼ˆå‰ç¼€åŒ¹é…ï¼‰å¦‚æœè¯¥åˆ—ä¸Šæœ‰&lt;strong&gt;ç´¢å¼•&lt;/strong&gt;ï¼Œåˆ™é€šå¸¸&lt;strong&gt;å¯ä»¥ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼ŒæŸ¥è¯¢é€Ÿåº¦è¾ƒå¿«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨å‰ç¼€åŒ¹é…&lt;/strong&gt;ï¼šå°½å¯èƒ½è®¾è®¡æŸ¥è¯¢ä¸º &lt;code&gt;LIKE 'pattern%'&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è€ƒè™‘å…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼šå¦‚æœä½ çš„ MySQL ç‰ˆæœ¬æ”¯æŒï¼ˆé€šå¸¸ 5.6 åŠä»¥ä¸Šï¼‰ï¼Œå¹¶ä¸”éœ€è¦è¿›è¡Œå¤§é‡æ–‡æœ¬æœç´¢ï¼Œå¯ä»¥ä¸ºåˆ—åˆ›å»ºå…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXT INDEXï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;MATCH ... AGAINST&lt;/code&gt;è¿›è¡Œæœç´¢ï¼Œæ€§èƒ½è¿œè¶… &lt;code&gt;LIKE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ›å»ºå…¨æ–‡ç´¢å¼•
ALTER TABLE products ADD FULLTEXT INDEX idx_name(name);
-- ä½¿ç”¨å…¨æ–‡æœç´¢
SELECT * FROM products WHERE MATCH(name) AGAINST(&amp;#39;apple&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤–éƒ¨æœç´¢å¼•æ“&lt;/strong&gt;ï¼šå¯¹äºè¶…å¤§è§„æ¨¡çš„æ–‡æœ¬æœç´¢éœ€æ±‚ï¼ˆå¦‚å•†å“æœç´¢ã€æ—¥å¿—åˆ†æï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨ &lt;strong&gt;Elasticsearch&lt;/strong&gt; æˆ– &lt;strong&gt;Solr&lt;/strong&gt; ç­‰ä¸“ä¸šçš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œå®ƒä»¬ä¸ºæ­¤ç±»åœºæ™¯æä¾›äº†æœ€ä¼˜çš„æ€§èƒ½å’ŒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–æ›¿ä»£å‡½æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºç®€å•çš„åŒ…å«åˆ¤æ–­ï¼Œ&lt;code&gt;LOCATE('substr', str)&lt;/code&gt;æˆ– &lt;code&gt;INSTR(str, 'substr')&lt;/code&gt;å‡½æ•°ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼ &lt;code&gt;LIKE '%substr%'&lt;/code&gt;çš„æ•ˆæœï¼Œä½†æ€§èƒ½ç‰¹å¾ç›¸ä¼¼ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ›´å¤æ‚çš„æ¨¡å¼åŒ¹é…ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;REGEXP&lt;/code&gt;æˆ– &lt;code&gt;RLIKE&lt;/code&gt;è¿ç®—ç¬¦ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œä½†åŒæ ·è¦æ³¨æ„å…¶æ€§èƒ½å¼€é”€é€šå¸¸è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LIKE&lt;/code&gt;æ˜¯ MySQL ä¸­è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„å¼ºå¤§å·¥å…·ï¼Œå®ƒçš„é€šé…ç¬¦æä¾›äº†çµæ´»æ€§ã€‚ä½¿ç”¨æ—¶ï¼Œè¦&lt;strong&gt;ç‰¹åˆ«æ³¨æ„é€šé…ç¬¦çš„ä½ç½®å¯¹æ€§èƒ½çš„å·¨å¤§å½±å“&lt;/strong&gt;ï¼Œå¹¶å–„ç”¨ç´¢å¼•å’Œå…¨æ–‡æœç´¢æ¥ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„ &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦ï¼&lt;/p&gt;
&lt;h2 id="contains"&gt;&lt;strong&gt;&lt;code&gt;CONTAINS&lt;/code&gt;&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;ç»è¿‡è¯¦ç»†ç¡®è®¤ï¼Œ&lt;strong&gt;MySQL ä¸­å¹¶ä¸å­˜åœ¨åä¸º &lt;code&gt;CONTAINS&lt;/code&gt;çš„å†…ç½®å‡½æ•°&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ï¼Œé€šå¸¸æºäºå¯¹å…¶ä»–æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ SQL Serverï¼‰åŠŸèƒ½çš„æ··æ·†ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ &lt;code&gt;CONTAINS&lt;/code&gt;ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§ä¸»è¦æ–¹å¼åœ¨ MySQL ä¸­å®ç°åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­ä¸²çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h3 id="-æ›¿ä»£æ–¹æ¡ˆä¸€ä½¿ç”¨-likeè¿›è¡Œæ¨¡ç³ŠåŒ¹é…"&gt;ğŸ“Œ æ›¿ä»£æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ &lt;code&gt;LIKE&lt;/code&gt;è¿›è¡Œæ¨¡ç³ŠåŒ¹é…
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦é…åˆé€šé…ç¬¦ &lt;code&gt;%&lt;/code&gt;æ˜¯æœ€ç®€å•ç›´æ¥çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç™¾åˆ†å· &lt;code&gt;%&lt;/code&gt;&lt;/strong&gt;ï¼šåŒ¹é…ä»»æ„æ•°é‡ï¼ˆåŒ…æ‹¬é›¶ä¸ªï¼‰çš„ä»»æ„å­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸‹åˆ’çº¿ &lt;code&gt;_&lt;/code&gt;&lt;/strong&gt;ï¼šåŒ¹é…å•ä¸ªä»»æ„å­—ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æ³•ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM products WHERE product_name LIKE &amp;#39;%apple%&amp;#39;; -- æŸ¥æ‰¾äº§å“åä¸­åŒ…å«&amp;#34;apple&amp;#34;çš„è®°å½•
SELECT * FROM students WHERE name LIKE &amp;#39;%Tom%&amp;#39;; -- æŸ¥æ‰¾åå­—ä¸­åŒ…å«&amp;#34;Tom&amp;#34;çš„å­¦ç”Ÿ
SELECT * FROM table_name WHERE column_name LIKE &amp;#39;abc%&amp;#39;; -- æŸ¥æ‰¾ä»¥&amp;#34;abc&amp;#34;å¼€å¤´çš„è®°å½•
SELECT * FROM table_name WHERE column_name LIKE &amp;#39;_b_&amp;#39;; -- æŸ¥æ‰¾ç¬¬äºŒä¸ªå­—æ¯æ˜¯&amp;#39;b&amp;#39;çš„ä¸‰å­—æ¯å•è¯
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LIKE&lt;/code&gt;é»˜è®¤æ˜¯&lt;strong&gt;å¤§å°å†™ä¸æ•æ„Ÿ&lt;/strong&gt;çš„ï¼Œä½†è¿™ä¹Ÿå–å†³äºä½ ä½¿ç”¨çš„æ•°æ®åº“å­—ç¬¦é›†å’Œæ’åºè§„åˆ™ï¼ˆCollationï¼‰è®¾ç½®ã€‚ä¸ºç¡®ä¿å®Œå…¨çš„å¤§å°å†™ä¸æ•æ„Ÿï¼Œå¯åœ¨æŸ¥è¯¢å‰ä½¿ç”¨ &lt;code&gt;LOWER()&lt;/code&gt;æˆ– &lt;code&gt;UPPER()&lt;/code&gt;å‡½æ•°è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥ &lt;code&gt;%&lt;/code&gt;å¼€å¤´çš„æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;%keyword&lt;/code&gt;ï¼‰&lt;strong&gt;æ— æ³•æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•&lt;/strong&gt;ï¼Œåœ¨å¤§å‹è¡¨ä¸Šå¯èƒ½å¯¼è‡´å…¨è¡¨æ‰«æï¼Œæ€§èƒ½è¾ƒå·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ›¿ä»£æ–¹æ¡ˆäºŒä½¿ç”¨å…¨æ–‡ç´¢å¼•è¿›è¡Œé«˜æ•ˆæœç´¢"&gt;ğŸ“Œ æ›¿ä»£æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å…¨æ–‡ç´¢å¼•è¿›è¡Œé«˜æ•ˆæœç´¢
&lt;/h3&gt;&lt;p&gt;å¯¹äºéœ€è¦è¿›è¡Œå¤§é‡æ–‡æœ¬æœç´¢çš„åœºæ™¯ï¼ŒMySQL æä¾›äº†&lt;strong&gt;å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXT Indexï¼‰&lt;/strong&gt;ï¼Œå®ƒèƒ½æä¾›æ›´é«˜æ•ˆã€æ›´å¼ºå¤§çš„æœç´¢èƒ½åŠ›ï¼ŒåŒ…æ‹¬è¯å¹²åˆ†æç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. åˆ›å»ºå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE articles (
id INT AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(255),
body TEXT,
FULLTEXT(title, body) -- åœ¨titleå’Œbodyåˆ—ä¸Šåˆ›å»ºå…¨æ–‡ç´¢å¼•
) ENGINE=InnoDB;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. ä½¿ç”¨ &lt;code&gt;MATCH() ... AGAINST()&lt;/code&gt;æŸ¥è¯¢&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;MySQL&amp;#39; IN NATURAL LANGUAGE MODE); -- ä½¿ç”¨è‡ªç„¶è¯­è¨€æ¨¡å¼æœç´¢
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©"&gt;ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;ä¸‹è¡¨åˆ—å‡ºäº†ä¸¤ç§ä¸»è¦æ–¹æ³•çš„ç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦&lt;/th&gt;
&lt;th&gt;å…¨æ–‡ç´¢å¼• (&lt;code&gt;MATCH&lt;/code&gt;&amp;hellip; &lt;code&gt;AGAINST&lt;/code&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•çš„æ¨¡ç³ŠåŒ¹é…ï¼Œæ•°æ®é‡è¾ƒå°&lt;/td&gt;
&lt;td&gt;å¤§é‡æ–‡æœ¬æœç´¢ï¼Œéœ€è¦é«˜æ•ˆå’Œä¸“ä¸šæœç´¢åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‰ç¼€æ¨¡ç³ŠæŸ¥è¯¢(&lt;code&gt;abc%&lt;/code&gt;)å¯åˆ©ç”¨ç´¢å¼•ï¼›å·¦æ¨¡ç³Š(&lt;code&gt;%abc&lt;/code&gt;)å’Œå…¨æ¨¡ç³Š(&lt;code&gt;%abc%&lt;/code&gt;)æ€§èƒ½å·®ï¼Œå¯èƒ½å¯¼è‡´å…¨è¡¨æ‰«æ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸“é—¨ä¸ºæ–‡æœ¬æœç´¢ä¼˜åŒ–&lt;/strong&gt;ï¼Œæ€§èƒ½è¿œé«˜äº &lt;code&gt;LIKE&lt;/code&gt;ï¼ˆå°¤å…¶åœ¨å¤§å‹è¡¨ä¸Šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºç¡€æ¨¡å¼åŒ¹é…&lt;/td&gt;
&lt;td&gt;æ”¯æŒè‡ªç„¶è¯­è¨€æœç´¢ã€å¸ƒå°”æœç´¢ç­‰å¤šç§æ¨¡å¼ï¼Œèƒ½æŒ‰ç›¸å…³æ€§æ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ™®é€šç´¢å¼•å¯¹å‰ç¼€æ¨¡ç³ŠæŸ¥è¯¢æœ‰æ•ˆ&lt;/td&gt;
&lt;td&gt;å¿…é¡»åˆ›å»º&lt;strong&gt;FULLTEXT ç´¢å¼•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…¶ä»–ç›¸å…³å‡½æ•°"&gt;ğŸ’¡ å…¶ä»–ç›¸å…³å‡½æ•°
&lt;/h3&gt;&lt;p&gt;é™¤äº† &lt;code&gt;LIKE&lt;/code&gt;ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡½æ•°è¿›è¡Œæ›´ç²¾ç¡®çš„å®šä½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LOCATE(substr, str)&lt;/code&gt;&lt;/strong&gt; / &lt;strong&gt;&lt;code&gt;POSITION(substr IN str)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å­ä¸² &lt;code&gt;substr&lt;/code&gt;åœ¨å­—ç¬¦ä¸² &lt;code&gt;str&lt;/code&gt;ä¸­&lt;strong&gt;ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®&lt;/strong&gt;ï¼ˆä»1å¼€å§‹è®¡æ•°ï¼‰ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¿”å›0ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM your_table WHERE LOCATE(&amp;#39;substring&amp;#39;, column_name) &amp;gt; 0;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;INSTR(str, substr)&lt;/code&gt;&lt;/strong&gt;ï¼šåŠŸèƒ½ä¸ &lt;code&gt;LOCATE&lt;/code&gt;ç±»ä¼¼ï¼Œä½†&lt;strong&gt;å‚æ•°é¡ºåºç›¸å&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM your_table WHERE INSTR(column_name, &amp;#39;substring&amp;#39;) &amp;gt; 0;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æé†’"&gt;âš ï¸ é‡è¦æé†’
&lt;/h3&gt;&lt;p&gt;ç½‘ç»œä¸Šæœ‰äº›æ–‡ç« ï¼ˆå¦‚ï¼‰å¯èƒ½ä¼šæåˆ° MySQL å­˜åœ¨ &lt;code&gt;CONTAINS&lt;/code&gt;å‡½æ•°ï¼Œä½†è¿™æ˜¯&lt;strong&gt;ä¸å‡†ç¡®çš„ä¿¡æ¯&lt;/strong&gt;ã€‚MySQL å®˜æ–¹æ–‡æ¡£ä¸­å¹¶æœªå®šä¹‰è¯¥å‡½æ•°ï¼Œå¾ˆå¯èƒ½æ˜¯æ··æ·†äº† SQL Server ç­‰å…¶ä»–æ•°æ®åº“ç³»ç»Ÿçš„åŠŸèƒ½ã€‚è¯·å§‹ç»ˆä»¥ MySQL å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ é¡ºåˆ©åœ°åœ¨ MySQL ä¸­å®ç°å­—ç¬¦ä¸²åŒ…å«æŸ¥è¯¢ï¼&lt;/p&gt;
&lt;h2 id="instr"&gt;INSTR
&lt;/h2&gt;&lt;p&gt;INSTR å‡½æ•°æ˜¯ SQL ä¸­ä¸€ä¸ªå¸¸ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°ï¼Œç”¨äºæŸ¥æ‰¾å­å­—ç¬¦ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚ä¸‹é¢æˆ‘ä¼šè¯¦ç»†ä»‹ç»å®ƒçš„è¯­æ³•ã€è¿”å›å€¼å’Œåº”ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€instr-å‡½æ•°è¯­æ³•"&gt;ğŸ“Œ ä¸€ã€INSTR å‡½æ•°è¯­æ³•
&lt;/h3&gt;&lt;p&gt;INSTR å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSTR(str, substr)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;str&lt;/strong&gt;ï¼šè¦æœç´¢çš„&lt;strong&gt;ä¸»å­—ç¬¦ä¸²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;substr&lt;/strong&gt;ï¼šè¦æŸ¥æ‰¾çš„&lt;strong&gt;å­å­—ç¬¦ä¸²&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä¸€äº›æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ Oracle å’Œ Hiveï¼‰ä¸­ï¼Œå®ƒè¿˜æ”¯æŒæ›´å¤šå¯é€‰å‚æ•°ï¼Œæä¾›äº†æ›´çµæ´»çš„æŸ¥æ‰¾æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSTR(str, substr, [start_position], [nth_appearance])
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;start_position&lt;/strong&gt;ï¼š&lt;strong&gt;å¯é€‰&lt;/strong&gt;ã€‚æŒ‡å®šå¼€å§‹æœç´¢çš„ä½ç½®ã€‚é»˜è®¤ä¸º 1ï¼ˆå³ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼‰ã€‚å¦‚æœä¸º&lt;strong&gt;è´Ÿæ•°&lt;/strong&gt;ï¼Œåˆ™è¡¨ç¤ºä»å­—ç¬¦ä¸²çš„&lt;strong&gt;æœ«å°¾å¼€å§‹å‘å‰æœç´¢&lt;/strong&gt;ï¼ˆä½†è¿”å›çš„ä½ç½®åºå·ä»ä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nth_appearance&lt;/strong&gt;ï¼š&lt;strong&gt;å¯é€‰&lt;/strong&gt;ã€‚æŒ‡å®šè¦æŸ¥æ‰¾å­å­—ç¬¦ä¸²ç¬¬å‡ æ¬¡å‡ºç°çš„ä½ç½®ã€‚é»˜è®¤ä¸º 1ï¼ˆå³ç¬¬ä¸€æ¬¡å‡ºç°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-äºŒè¿”å›å€¼è§„åˆ™"&gt;ğŸ”¢ äºŒã€è¿”å›å€¼è§„åˆ™
&lt;/h3&gt;&lt;p&gt;INSTR å‡½æ•°çš„è¿”å›å€¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿”å›å­å­—ç¬¦ä¸²åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­&lt;strong&gt;é¦–æ¬¡å‡ºç°&lt;/strong&gt;çš„&lt;strong&gt;èµ·å§‹ä½ç½®&lt;/strong&gt;ã€‚&lt;strong&gt;ä½ç½®è®¡æ•°ä» 1 å¼€å§‹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœªæ‰¾åˆ°å­å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å› &lt;strong&gt;0&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä»»ä¸€å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œåœ¨æŸäº›æ•°æ®åº“ç³»ç»Ÿä¸­ï¼ˆå¦‚ Hiveï¼‰ï¼Œç»“æœå¯èƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œå› æ­¤ä½¿ç”¨æ—¶æœ€å¥½ç”¨ &lt;code&gt;NVL()&lt;/code&gt;ç­‰å‡½æ•°å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸‰instr-å‡½æ•°ç¤ºä¾‹"&gt;ğŸ› ï¸ ä¸‰ã€INSTR å‡½æ•°ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ INSTR å‡½æ•°çš„ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ ç†è§£å…¶ç”¨æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç¤ºä¾‹ä»£ç &lt;/th&gt;
&lt;th&gt;è¿”å›å€¼&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SELECT INSTR('Hello, World!', 'World');&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;&amp;lsquo;World&amp;rsquo; ä»ç¬¬ 7 ä¸ªå­—ç¬¦å¼€å§‹å‡ºç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SELECT INSTR('Hello, World!', 'Python');&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;æœªæ‰¾åˆ° &amp;lsquo;Python&amp;rsquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SELECT INSTR('Hello, World!', 'o', 5);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;ä»ç¬¬ 5 ä½å¼€å§‹æŸ¥æ‰¾ï¼Œç¬¬ä¸€ä¸ª &amp;lsquo;o&amp;rsquo; åœ¨ç¬¬ 8 ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SELECT INSTR('Apple,Apple', 'p', 1, 2);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;æŸ¥æ‰¾ç¬¬ 2 æ¬¡å‡ºç° &amp;lsquo;p&amp;rsquo; çš„ä½ç½®ï¼ˆåœ¨ç¬¬äºŒä¸ª &amp;lsquo;Apple&amp;rsquo; ä¸­ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å››instr-å‡½æ•°çš„åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å››ã€INSTR å‡½æ•°çš„åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;INSTR å‡½æ•°åœ¨å®é™…åº”ç”¨ä¸­éå¸¸çµæ´»ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç”¨é€”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®è¿‡æ»¤ä¸æŸ¥è¯¢&lt;/strong&gt;ï¼šç”¨äºç­›é€‰åŒ…å«ç‰¹å®šå­å­—ç¬¦ä¸²çš„è®°å½•ï¼Œæ›¿ä»£æˆ–è¡¥å…… &lt;code&gt;LIKE&lt;/code&gt;æ“ä½œç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾é‚®ç®±åœ°å€ä¸­åŒ…å« &amp;#39;@example.com&amp;#39; çš„æ‰€æœ‰ç”¨æˆ·
SELECT * FROM users WHERE INSTR(email, &amp;#39;@example.com&amp;#39;) &amp;gt; 0;
-- ç­‰æ•ˆäº
SELECT * FROM users WHERE email LIKE &amp;#39;%@example.com%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—ä¸è½¬æ¢&lt;/strong&gt;ï¼šåœ¨æ•°æ®æ¸…æ´—ä¸­ï¼Œå¯ç”¨äºå®šä½ç‰¹å®šå­—ç¬¦ï¼Œè¿›è€Œè¿›è¡Œå­—ç¬¦ä¸²çš„æˆªå–æˆ–æ›¿æ¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æˆªå–ç½‘å€ä¸­çš„åŸŸåéƒ¨åˆ†ï¼ˆå‡è®¾åŸŸååœ¨ç¬¬ä¸€ä¸ª &amp;#39;.&amp;#39; ä¹‹åï¼‰
SELECT SUBSTRING(url, INSTR(url, &amp;#39;.&amp;#39;) + 1) AS domain FROM websites;
-- æ›¿æ¢é‚®ç®±åŸŸåï¼ˆä¾‹å¦‚å°† &amp;#39;@gmail.com&amp;#39; æ›¿æ¢ä¸º &amp;#39;@yahoo.com&amp;#39;ï¼‰
UPDATE users
SET email = CONCAT(SUBSTRING(email, 1, INSTR(email, &amp;#39;@&amp;#39;) - 1), &amp;#39;@yahoo.com&amp;#39;)
WHERE INSTR(email, &amp;#39;@gmail.com&amp;#39;) &amp;gt; 0;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¡ä»¶åˆ¤æ–­ä¸åˆ†ç±»&lt;/strong&gt;ï¼šå¯æ ¹æ®å­å­—ç¬¦ä¸²å‡ºç°çš„ä½ç½®æˆ–æ˜¯å¦å­˜åœ¨æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­å’Œåˆ†ç±»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å¯¹è¯„è®ºè¿›è¡Œé£é™©ç­‰çº§åˆ†ç±»
SELECT comment_id,
CASE
WHEN INSTR(comment, &amp;#39;è¯ˆéª—&amp;#39;) &amp;gt; 0 THEN &amp;#39;é«˜å±&amp;#39;
WHEN INSTR(comment, &amp;#39;è½¬è´¦&amp;#39;) &amp;gt; 5 THEN &amp;#39;ä¸­å±&amp;#39; -- ä¾‹å¦‚åœ¨è¾ƒåä½ç½®å‡ºç°
ELSE &amp;#39;æ­£å¸¸&amp;#39;
END AS risk_level
FROM customer_comments;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨&lt;strong&gt;æµ·é‡æ•°æ®&lt;/strong&gt;æŸ¥è¯¢ä¸­ï¼Œ&lt;code&gt;INSTR&lt;/code&gt;å‡½æ•°é€šå¸¸æ¯” &lt;code&gt;LIKE '%keyword%'&lt;/code&gt;å…·æœ‰&lt;strong&gt;æ›´å¥½çš„æ€§èƒ½&lt;/strong&gt;ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦è¿›è¡Œæ¨¡å¼åŒ¹é…æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-äº”æ³¨æ„äº‹é¡¹"&gt;âš ï¸ äº”ã€æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ INSTR å‡½æ•°æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤§å°å†™æ•æ„Ÿæ€§&lt;/strong&gt;ï¼š&lt;strong&gt;INSTR å‡½æ•°é»˜è®¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;INSTR('Apple', 'a')&lt;/code&gt;è¿”å› 0ã€‚å¦‚éœ€ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯å…ˆç”¨ &lt;code&gt;LOWER()&lt;/code&gt;æˆ– &lt;code&gt;UPPER()&lt;/code&gt;å‡½æ•°è½¬æ¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT INSTR(LOWER(&amp;#39;Apple&amp;#39;), LOWER(&amp;#39;a&amp;#39;)); -- è¿”å› 1
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èµ·å§‹ä½ç½®å‚æ•°&lt;/strong&gt;ï¼š&lt;code&gt;start_position&lt;/code&gt;å¿…é¡»å¤§äº 0ã€‚å¦‚æœä¸ºè´Ÿæ•°ï¼Œåœ¨æŸäº›æ•°æ®åº“ç³»ç»Ÿä¸­è¡¨ç¤ºä»å­—ç¬¦ä¸²æœ«å°¾å€’æ•°ï¼ˆå¦‚ Oracleï¼‰ï¼Œä½†è¡Œä¸ºå¯èƒ½å› ç³»ç»Ÿè€Œå¼‚ï¼Œä½¿ç”¨æ—¶éœ€æŸ¥é˜…ç›¸åº”æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç† NULL å€¼&lt;/strong&gt;ï¼šå¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼ŒINSTR å‡½æ•°é€šå¸¸ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚ä¸ºç¡®ä¿ä»£ç å¥å£®æ€§ï¼Œå»ºè®®ç”¨ &lt;code&gt;COALESCE()&lt;/code&gt;æˆ– &lt;code&gt;NVL()&lt;/code&gt;ç­‰å‡½æ•°å¤„ç†å¯èƒ½çš„ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT INSTR(COALESCE(column_name, &amp;#39;&amp;#39;), &amp;#39;search&amp;#39;); -- é˜²æ­¢ column_name ä¸º NULL
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—ç¬¦é›†é—®é¢˜&lt;/strong&gt;ï¼šå¤„ç†&lt;strong&gt;ä¸­æ–‡å­—ç¬¦&lt;/strong&gt;æˆ–å…¶ä»–å¤šå­—èŠ‚å­—ç¬¦æ—¶ï¼Œç¡®ä¿æ•°æ®åº“å­—ç¬¦é›†è®¾ç½®æ­£ç¡®ï¼Œä»¥å…å‡ºç°æ„å¤–ç»“æœã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå…ˆä½¿ç”¨ &lt;code&gt;LENGTH()&lt;/code&gt;å‡½æ•°æ£€æŸ¥å­—ç¬¦ä¸²é•¿åº¦æœ‰åŠ©äºè°ƒè¯•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…­instr-ä¸å…¶ä»–å­—ç¬¦ä¸²æŸ¥æ‰¾å‡½æ•°çš„æ¯”è¾ƒ"&gt;ğŸ“Š å…­ã€INSTR ä¸å…¶ä»–å­—ç¬¦ä¸²æŸ¥æ‰¾å‡½æ•°çš„æ¯”è¾ƒ
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°å&lt;/th&gt;
&lt;th&gt;è¯­æ³•&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;åŒºåˆ«ä¸ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;INSTR&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSTR(str, substr)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å­ä¸²çš„&lt;strong&gt;èµ·å§‹ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šç”¨æ€§å¼ºï¼Œå¯æŒ‡å®šèµ·å§‹ä½ç½®å’Œå‡ºç°æ¬¡æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LOCATE&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LOCATE(substr, str)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å­ä¸²çš„èµ·å§‹ä½ç½®&lt;/td&gt;
&lt;td&gt;å‚æ•°é¡ºåºä¸åŒï¼ŒåŠŸèƒ½ä¸ INSTR ç±»ä¼¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;POSITION&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;POSITION(substr IN str)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å­ä¸²çš„èµ·å§‹ä½ç½®&lt;/td&gt;
&lt;td&gt;SQL æ ‡å‡†å‡½æ•°ï¼Œè¯­æ³•ä¸åŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CHARINDEX&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CHARINDEX(substr, str)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å­ä¸²çš„èµ·å§‹ä½ç½®&lt;/td&gt;
&lt;td&gt;SQL Server ä¸­çš„å‡½æ•°ï¼ŒMySQL ä¸­éœ€ç”¨ INSTR&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ INSTR å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="å­—ç¬¦ä¸²å¤§å°å†™"&gt;å­—ç¬¦ä¸²å¤§å°å†™
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­å¤„ç†å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢ï¼Œä¸»è¦é€šè¿‡å†…ç½®å‡½æ•°å®ç°ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒæ–¹æ³•å’Œä¸€äº›å®ç”¨æç¤ºï¼š&lt;/p&gt;
&lt;h3 id="-ä¸€æ ¸å¿ƒå‡½æ•°ç›´æ¥è½¬æ¢"&gt;ğŸ“Œ ä¸€ã€æ ¸å¿ƒå‡½æ•°ï¼šç›´æ¥è½¬æ¢
&lt;/h3&gt;&lt;p&gt;MySQL æä¾›äº†ä¸¤ä¸ªç›´æ¥ç”¨äºå­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢çš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;UPPER(str)&lt;/code&gt;æˆ– &lt;code&gt;UCASE(str)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†å­—ç¬¦ä¸² &lt;code&gt;str&lt;/code&gt;ä¸­çš„æ‰€æœ‰å­—æ¯å­—ç¬¦è½¬æ¢ä¸º&lt;strong&gt;å¤§å†™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT UPPER(&amp;#39;Hello World!123&amp;#39;); -- è¾“å‡º &amp;#39;HELLO WORLD!123&amp;#39;
SELECT UCASE(&amp;#39;mysql&amp;#39;); -- è¾“å‡º &amp;#39;MYSQL&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LOWER(str)&lt;/code&gt;æˆ– &lt;code&gt;LCASE(str)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†å­—ç¬¦ä¸² &lt;code&gt;str&lt;/code&gt;ä¸­çš„æ‰€æœ‰å­—æ¯å­—ç¬¦è½¬æ¢ä¸º&lt;strong&gt;å°å†™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT LOWER(&amp;#39;Hello World!123&amp;#39;); -- è¾“å‡º &amp;#39;hello world!123&amp;#39;
SELECT LCASE(&amp;#39;MySQL&amp;#39;); -- è¾“å‡º &amp;#39;mysql&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-äºŒé‡è¦ç‰¹æ€§"&gt;âš ï¸ äºŒã€é‡è¦ç‰¹æ€§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»…å½±å“å­—æ¯å­—ç¬¦&lt;/strong&gt;ï¼šæ•°å­—ã€ç©ºæ ¼ã€æ ‡ç‚¹ç¬¦å·æˆ–æ±‰å­—ç­‰&lt;strong&gt;éå­—æ¯å­—ç¬¦ä¸ä¼šå—å½±å“&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT UPPER(&amp;#39;å¼ ä¸‰Zhang&amp;#39;); -- è¾“å‡º &amp;#39;å¼ ä¸‰ZHANG&amp;#39;
SELECT LOWER(&amp;#39;ä¸œäº¬TOKYO&amp;#39;); -- è¾“å‡º &amp;#39;ä¸œäº¬tokyo&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç† NULL å€¼&lt;/strong&gt;ï¼šå¦‚æœè¾“å…¥å­—ç¬¦ä¸²ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¹Ÿä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒå¤šè¯­è¨€&lt;/strong&gt;ï¼šå¯¹äºå¸¦é‡éŸ³çš„å­—æ¯ï¼ˆå¦‚ &lt;code&gt;'Ã‰clair'&lt;/code&gt;è½¬ä¸º &lt;code&gt;'Ã©clair'&lt;/code&gt;ï¼‰æˆ–å¾·è¯­å˜å…ƒéŸ³ï¼ˆå¦‚ &lt;code&gt;'Ã„Ã–Ãœ'&lt;/code&gt;è½¬ä¸º &lt;code&gt;'Ã¤Ã¶Ã¼'&lt;/code&gt;ï¼‰ï¼Œé€šå¸¸ä¹Ÿèƒ½æ­£ç¡®è½¬æ¢ï¼Œå…·ä½“æ•ˆæœå–å†³äºæ•°æ®åº“çš„å­—ç¬¦é›†å’Œæ’åºè§„åˆ™è®¾ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸‰å¸¸è§åº”ç”¨åœºæ™¯"&gt;ğŸ”§ ä¸‰ã€å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ ‡å‡†åŒ–ä¸æ¸…æ´—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¯¼å…¥æˆ–æ¸…æ´—æ•°æ®æ—¶ï¼Œç¡®ä¿å­—ç¬¦ä¸²æ ¼å¼ç»Ÿä¸€ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†ç”¨æˆ·åçš„æ‰€æœ‰è¾“å…¥ç»Ÿä¸€ä¸ºå°å†™å­˜å‚¨
UPDATE users SET username = LOWER(username);
-- æˆ–å°†äº§å“åç§°ç»Ÿä¸€ä¸ºå¤§å†™
UPDATE products SET product_name = UPPER(product_name);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢æ—¶å¿½ç•¥å¤§å°å†™æ¯”è¾ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ï¼Œåˆ©ç”¨å‡½æ•°æ¥å¿½ç•¥å¤§å°å†™å·®å¼‚ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE LOWER(username) = LOWER(&amp;#39;JohnDoe&amp;#39;);
SELECT * FROM products WHERE UPPER(product_name) = UPPER(&amp;#39;galaxy s24&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šåœ¨è¡¨æ•°æ®é‡å¤§æ—¶ï¼Œå¯¹åˆ—ä½¿ç”¨å‡½æ•°å¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œå…¨è¡¨æ‰«æä»è€Œé™ä½æŸ¥è¯¢é€Ÿåº¦ã€‚å¦‚æœç»å¸¸éœ€è¦è¿›è¡Œæ­¤ç±»æŸ¥è¯¢ï¼Œå¯è€ƒè™‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨å‡½æ•°ç´¢å¼•&lt;/strong&gt;ï¼ˆMySQL 8.0+ æ”¯æŒï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE INDEX idx_username_lower ON users(LOWER(username));
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¢„å¤„ç†æ•°æ®&lt;/strong&gt;ï¼šæ–°å¢ä¸€ä¸ªå­˜å‚¨è½¬æ¢åå€¼çš„åˆ—ï¼ˆå¦‚ `username_lower``ï¼‰ï¼Œå¹¶å¯¹è¯¥åˆ—å»ºç«‹æ™®é€šç´¢å¼•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿæˆç‰¹å®šæ ¼å¼çš„è¾“å‡º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨äºç”ŸæˆæŠ¥å‘Šã€URL Slugæˆ–æ ‡å‡†åŒ–ä»£ç ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç”Ÿæˆå°å†™çš„URLè·¯å¾„
SELECT CONCAT(&amp;#39;/product/&amp;#39;, LOWER(REPLACE(product_name, &amp;#39; &amp;#39;, &amp;#39;-&amp;#39;)) FROM products;
-- è¾“å‡ºç¤ºä¾‹ï¼š&amp;#39;/product/galaxy-s24-ultra&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å››æ€§èƒ½ä¸æœ€ä½³å®è·µ"&gt;âš¡ å››ã€æ€§èƒ½ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…åœ¨ WHERE å­å¥ä¸­çš„åˆ—ä¸Šä½¿ç”¨å‡½æ•°&lt;/strong&gt;ï¼šå¦‚å‰è¿°ï¼Œè¿™å¯èƒ½&lt;strong&gt;å¯¼è‡´æ— æ³•ä½¿ç”¨ç°æœ‰ç´¢å¼•&lt;/strong&gt;ï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚å¯¹äºé«˜é¢‘æŸ¥è¯¢ï¼Œå»ºè®®ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å‡½æ•°ç´¢å¼•æˆ–é¢„å¤„ç†åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦é›†çš„å½±å“&lt;/strong&gt;ï¼šå‡½æ•°çš„è¡Œä¸ºå¯èƒ½ä¼šå—åˆ°æ•°æ®åº“å’Œè¡¨å­—ç¬¦é›†ï¼ˆ&lt;code&gt;character_set_server&lt;/code&gt;ï¼‰åŠæ’åºè§„åˆ™ï¼ˆCollationï¼‰çš„å½±å“ã€‚ç¡®ä¿ä½ çš„å­—ç¬¦é›†è®¾ç½®èƒ½æ­£ç¡®æ”¯æŒéœ€è¦å¤„ç†çš„è¯­è¨€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶éæ‰€æœ‰â€œå¤§å°å†™â€é—®é¢˜éƒ½é å‡½æ•°è§£å†³&lt;/strong&gt;ï¼šè¡¨åã€å­—æ®µåç­‰æ ‡è¯†ç¬¦çš„å¤§å°å†™æ•æ„Ÿæ€§é€šå¸¸ç”±ç³»ç»Ÿå˜é‡ &lt;code&gt;lower_case_table_names&lt;/code&gt;æ§åˆ¶ï¼Œè€Œé &lt;code&gt;UPPER()&lt;/code&gt;æˆ– &lt;code&gt;LOWER()&lt;/code&gt;å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-äº”å…¶ä»–ç›¸å…³æ–¹æ³•"&gt;ğŸ’¡ äº”ã€å…¶ä»–ç›¸å…³æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;é™¤äº†ç›´æ¥ä½¿ç”¨å‡½æ•°ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é—´æ¥æ§åˆ¶æˆ–å½±å“å¤§å°å†™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®æ’åºè§„åˆ™ï¼ˆCollationï¼‰&lt;/strong&gt;ï¼šåœ¨åˆ›å»ºè¡¨æˆ–åˆ—æ—¶æŒ‡å®š&lt;em&gt;ä¸åŒºåˆ†å¤§å°å†™&lt;/em&gt;ï¼ˆ&lt;code&gt;ci&lt;/code&gt;, case-insensitiveï¼‰çš„æ’åºè§„åˆ™ï¼Œä¾‹å¦‚ &lt;code&gt;utf8mb4_general_ci&lt;/code&gt;ã€‚è¿™æ ·åœ¨æ¯”è¾ƒå’Œæ’åºæ—¶ä¼šå¿½ç•¥å¤§å°å†™ï¼Œä½†&lt;strong&gt;ä¸ä¼šæ”¹å˜å­˜å‚¨çš„åŸå§‹å€¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE my_table (
content VARCHAR(100) COLLATE utf8mb4_general_ci
);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;BINARY&lt;/code&gt;å…³é”®å­—&lt;/strong&gt;ï¼šè®©åŸæœ¬ä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²æ¯”è¾ƒå˜å¾—&lt;strong&gt;åŒºåˆ†å¤§å°å†™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE BINARY username = &amp;#39;JohnDoe&amp;#39;; -- å°†ç²¾ç¡®åŒ¹é…å¤§å°å†™
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŒæ¡ &lt;code&gt;UPPER()&lt;/code&gt;å’Œ &lt;code&gt;LOWER()&lt;/code&gt;å‡½æ•°ï¼Œèƒ½æœ‰æ•ˆå¸®ä½ å¤„ç†MySQLä¸­çš„å­—ç¬¦ä¸²å¤§å°å†™é—®é¢˜ã€‚æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼Œå¹¶ç•™æ„å…¶å¯¹æ€§èƒ½çš„æ½œåœ¨å½±å“ï¼Œå°±èƒ½æ›´å¥½åœ°è¿›è¡Œæ•°æ®æ“ä½œå’ŒæŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ åœ¨å¤„ç†ç‰¹å®šæ•°æ®ç±»å‹æˆ–é‡åˆ°æ›´å¤æ‚çš„æƒ…å†µï¼Œå¯ä»¥æä¾›æ›´å¤šç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="å­—ç¬¦å¤§å°å†™"&gt;å­—ç¬¦å¤§å°å†™
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ç›´æ¥æ”¹å˜å­—ç¬¦ä¸²ä¸­&lt;strong&gt;å•ä¸ªå­—ç¬¦&lt;/strong&gt;çš„å¤§å°å†™ï¼Œä¸åƒåœ¨ç¼–ç¨‹è¯­è¨€ä¸­é‚£æ ·ç›´æ¥æ“ä½œã€‚é€šå¸¸éœ€è¦å€ŸåŠ©å­—ç¬¦ä¸²å‡½æ•°ç»„åˆæ¥å®ç°ã€‚ä¸‹é¢ä¸ºä½ ä»‹ç»å‡ ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ–¹æ³•ä½¿ç”¨å­—ç¬¦ä¸²å‡½æ•°ç»„åˆ"&gt;ğŸ› ï¸ æ ¸å¿ƒæ–¹æ³•ï¼šä½¿ç”¨å­—ç¬¦ä¸²å‡½æ•°ç»„åˆ
&lt;/h3&gt;&lt;p&gt;MySQL æ²¡æœ‰ç›´æ¥æ”¹å˜å­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦å¤§å°å†™çš„å‡½æ•°ï¼Œä½†å¯ä»¥é€šè¿‡ä»¥ä¸‹æ€è·¯å®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æå–&lt;/strong&gt;ç›®æ ‡å­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹æå–çš„å­—ç¬¦è¿›è¡Œ&lt;strong&gt;å¤§å°å†™è½¬æ¢&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°†è½¬æ¢åçš„å­—ç¬¦&lt;strong&gt;æ”¾å›&lt;/strong&gt;åŸå­—ç¬¦ä¸²çš„å¯¹åº”ä½ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é€šå¸¸ä¼šç”¨åˆ° &lt;code&gt;SUBSTRING&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;SUBSTR&lt;/code&gt;ï¼‰ã€&lt;code&gt;CONCAT&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;CONCAT_WS&lt;/code&gt;ï¼‰ï¼Œä»¥åŠ &lt;code&gt;UPPER&lt;/code&gt;æˆ– &lt;code&gt;LOWER&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;h4 id="è½¬æ¢æŒ‡å®šä½ç½®çš„å­—ç¬¦"&gt;è½¬æ¢æŒ‡å®šä½ç½®çš„å­—ç¬¦
&lt;/h4&gt;&lt;p&gt;å‡è®¾ä½ æƒ³å°†å­—ç¬¦ä¸² &lt;code&gt;'hello'&lt;/code&gt;ä¸­çš„ç¬¬ 1 ä¸ªå­—ç¬¦ &lt;code&gt;'h'&lt;/code&gt;è½¬æ¢ä¸ºå¤§å†™ &lt;code&gt;'H'&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONCAT(
UPPER(SUBSTRING(&amp;#39;hello&amp;#39;, 1, 1)), -- æå–ç¬¬1ä¸ªå­—ç¬¦å¹¶è½¬ä¸ºå¤§å†™
SUBSTRING(&amp;#39;hello&amp;#39;, 2) -- æå–ä»ç¬¬2ä¸ªå­—ç¬¦å¼€å§‹çš„æ‰€æœ‰å­—ç¬¦
) AS transformed_string;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;: &lt;code&gt;'Hello'&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åŒç†ï¼Œè‹¥æƒ³å°†ç¬¬ 4 ä¸ªå­—ç¬¦ &lt;code&gt;'l'&lt;/code&gt;è½¬æ¢ä¸ºå¤§å†™ &lt;code&gt;'L'&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONCAT(
SUBSTRING(&amp;#39;hello&amp;#39;, 1, 3), -- æå–å‰3ä¸ªå­—ç¬¦
UPPER(SUBSTRING(&amp;#39;hello&amp;#39;, 4, 1)), -- æå–ç¬¬4ä¸ªå­—ç¬¦å¹¶è½¬ä¸ºå¤§å†™
SUBSTRING(&amp;#39;hello&amp;#39;, 5) -- æå–ä»ç¬¬5ä¸ªå­—ç¬¦å¼€å§‹çš„æ‰€æœ‰å­—ç¬¦ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
) AS transformed_string;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;: &lt;code&gt;'helLo'&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="è½¬æ¢ç‰¹å®šå­—ç¬¦å¦‚é¦–å­—æ¯"&gt;è½¬æ¢ç‰¹å®šå­—ç¬¦ï¼ˆå¦‚é¦–å­—æ¯ï¼‰
&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚æ˜¯å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™ã€‚è¿™é‡Œæä¾›ä¸€ä¸ªç¨æ˜¾å¤æ‚ä½†æ›´é€šç”¨çš„æ–¹æ³•ï¼Œå®ƒèƒ½å¤Ÿå¤„ç†å•ä¸ªå•è¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONCAT(
UPPER(SUBSTRING(&amp;#39;hello&amp;#39;, 1, 1)), -- å°†ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™
LOWER(SUBSTRING(&amp;#39;hello&amp;#39;, 2)) -- å°†å‰©ä½™çš„å­—æ¯è½¬ä¸ºå°å†™ï¼ˆç¡®ä¿å…¶ä½™å­—æ¯ä¸ºå°å†™ï¼‰
) AS capitalized_string;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;: &lt;code&gt;'Hello'&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ³¨æ„&lt;/strong&gt;ï¼šè¿™ä¸ªæ–¹æ³•å‡è®¾å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªè¿ç»­çš„å•è¯ã€‚å¯¹äºåŒ…å«ç©ºæ ¼çš„å¥å­æˆ–æ›´å¤æ‚çš„å­—ç¬¦ä¸²ï¼Œé€»è¾‘ä¼šå¤æ‚å¾—å¤šï¼Œé€šå¸¸éœ€è¦å€ŸåŠ©å­˜å‚¨è¿‡ç¨‹æˆ–åº”ç”¨ç¨‹åºä»£ç æ¥å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æé†’-1"&gt;âš ï¸ é‡è¦æé†’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦ç´¢å¼•&lt;/strong&gt;ï¼šMySQL ä¸­å­—ç¬¦ä¸²çš„ä½ç½®é€šå¸¸ä» &lt;strong&gt;1&lt;/strong&gt; å¼€å§‹ï¼Œè€Œä¸æ˜¯ 0ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚æ€§&lt;/strong&gt;ï¼šä¸Šè¿°æ–¹æ³•åœ¨ SQL ä¸­å®ç°ä¼šæ˜¾å¾—æœ‰äº›ç¹çï¼Œå°¤å…¶æ˜¯éœ€è¦åŠ¨æ€å®šä½å’Œæ›´æ”¹å¤šä¸ªç‰¹å®šå­—ç¬¦æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç”¨å»ºè®®&lt;/strong&gt;ï¼šå¦‚æœä¸šåŠ¡é€»è¾‘ä¸­é¢‘ç¹éœ€è¦è¿›è¡Œå¤æ‚çš„å­—ç¬¦çº§åˆ«æ“ä½œï¼Œæ›´é«˜æ•ˆã€æ›´çµæ´»çš„åšæ³•æ˜¯&lt;strong&gt;åœ¨åº”ç”¨ç¨‹åºå±‚é¢&lt;/strong&gt;ï¼ˆå¦‚ä½¿ç”¨ Pythonã€Javaã€PHP ç­‰ï¼‰å¤„ç†å­—ç¬¦ä¸²ï¼Œç„¶åå°†å¤„ç†å¥½çš„ç»“æœå­˜å…¥æ•°æ®åº“æˆ–ç›´æ¥ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦é›†å½±å“&lt;/strong&gt;ï¼šå¤§å°å†™è½¬æ¢è¡Œä¸ºå¯èƒ½ä¼šå—æ•°æ®åº“å’Œè¡¨æ‰€ä½¿ç”¨çš„&lt;strong&gt;å­—ç¬¦é›†ï¼ˆCharacter Setï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;æ’åºè§„åˆ™ï¼ˆCollationï¼‰&lt;/strong&gt; çš„å½±å“ã€‚ä¾‹å¦‚ï¼ŒæŸäº›è¯­è¨€æˆ–ç‰¹æ®Šå­—ç¬¦çš„å¤§å°å†™è½¬æ¢è§„åˆ™å¯èƒ½æ¯”è¾ƒç‰¹æ®Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶åœ¨ MySQL ä¸­ç›´æ¥æ“ä½œå•ä¸ªå­—ç¬¦çš„å¤§å°å†™éœ€è¦ç»•ç‚¹å¼¯è·¯ï¼Œä½†é€šè¿‡ &lt;code&gt;SUBSTRING&lt;/code&gt;ã€&lt;code&gt;UPPER&lt;/code&gt;/&lt;code&gt;LOWER&lt;/code&gt;å’Œ &lt;code&gt;CONCAT&lt;/code&gt;å‡½æ•°çš„ç»„åˆï¼Œä½ å®Œå…¨å¯ä»¥å®ç°éœ€æ±‚ã€‚ å…³é”®æ˜¯å…ˆ&lt;strong&gt;æå–&lt;/strong&gt;ç›®æ ‡å­—ç¬¦ï¼Œ&lt;strong&gt;è½¬æ¢&lt;/strong&gt;å®ƒï¼Œç„¶åå†&lt;strong&gt;æ‹¼æ¥&lt;/strong&gt;å›å»ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç®€å•çš„ã€ç‰¹åˆ«æ˜¯ä½ç½®å›ºå®šçš„å­—ç¬¦è½¬æ¢ï¼Œå¯ä»¥ç›´æ¥ç”¨ SQL å¤„ç†ã€‚ä½†å¯¹äºæ›´å¤æ‚æˆ–é¢‘ç¹çš„æ“ä½œï¼Œå»ºè®®åœ¨åº”ç”¨ç¨‹åºä¸­å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚å¦‚æœè¿˜æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­è¯¢é—®ã€‚&lt;/p&gt;
&lt;h2 id="è¡Œè½¬åˆ—"&gt;è¡Œè½¬åˆ—
&lt;/h2&gt;&lt;p&gt;äº†è§£ MySQL ä¸­çš„åˆ—è½¬è¡Œï¼ˆUnpivotï¼‰æ“ä½œèƒ½è®©ä½ æ›´çµæ´»åœ°å¤„ç†å’Œåˆ†ææ•°æ®ã€‚ç”±äº MySQL å¹¶æœªåƒå…¶ä»–ä¸€äº›æ•°æ®åº“ï¼ˆå¦‚ SQL Serverï¼‰é‚£æ ·ç›´æ¥æä¾› &lt;code&gt;UNPIVOT&lt;/code&gt;æ“ä½œç¬¦ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹æ³•ã€å®ƒä»¬çš„é€‚ç”¨åœºæ™¯ä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€è·¯&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;UNION ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šä¸ªSELECTè¯­å¥åˆ†åˆ«æŸ¥è¯¢æ¯ä¸ªç›®æ ‡åˆ—ï¼Œç„¶ååˆå¹¶ç»“æœé›†&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ—æ•°é‡å›ºå®šä¸”è¾ƒå°‘&lt;/strong&gt;çš„åœºæ™¯ï¼Œå®ç°ç®€å•ç›´è§‚&lt;/td&gt;
&lt;td&gt;è¯­æ³•ç®€å•ï¼Œæ˜“äºç†è§£å’Œç¼–å†™&lt;/td&gt;
&lt;td&gt;åˆ—å¤šæ—¶ä»£ç å†—é•¿ï¼›æ•°æ®é‡å¤§æ—¶å¯èƒ½&lt;strong&gt;æ€§èƒ½ä½ä¸‹&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€SQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡æŸ¥è¯¢ç³»ç»Ÿè¡¨è·å–åˆ—åï¼Œ&lt;strong&gt;åŠ¨æ€æ‹¼æ¥&lt;/strong&gt;å‡ºUNION ALLè¯­å¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ—æ•°é‡ä¸å›ºå®š&lt;/strong&gt;æˆ–&lt;strong&gt;åˆ—åç»å¸¸å˜åŒ–&lt;/strong&gt;çš„åœºæ™¯ï¼Œéœ€è¦è‡ªåŠ¨åŒ–å¤„ç†&lt;/td&gt;
&lt;td&gt;çµæ´»æ€§å¼ºï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™æ‰€æœ‰åˆ—&lt;/td&gt;
&lt;td&gt;å®ç°å¤æ‚ï¼Œé€šå¸¸éœ€è¦&lt;strong&gt;å­˜å‚¨è¿‡ç¨‹&lt;/strong&gt;ï¼Œæœ‰SQLæ³¨å…¥é£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CROSS JOIN + CASE (MySQL 8.0+)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡è™šæ‹Ÿæ´¾ç”Ÿè¡¨å®šä¹‰æ˜ å°„å…³ç³»ï¼Œé¿å…ç¡¬ç¼–ç åˆ—å&lt;/td&gt;
&lt;td&gt;MySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¸Œæœ›&lt;strong&gt;é¿å…ç¡¬ç¼–ç &lt;/strong&gt;åˆ—å&lt;/td&gt;
&lt;td&gt;ä»£ç ç›¸å¯¹ç´§å‡‘ï¼Œé€»è¾‘æ¸…æ™°&lt;/td&gt;
&lt;td&gt;éœ€è¦MySQL 8.0+æ”¯æŒï¼›ç†è§£èµ·æ¥ç¨å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦ç»†æ–¹æ³•ä¸ç¤ºä¾‹"&gt;ğŸ”§ è¯¦ç»†æ–¹æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="1-ä½¿ç”¨-union-allæœ€å¸¸ç”¨å…¼å®¹æ€§å¥½"&gt;1. ä½¿ç”¨ UNION ALLï¼ˆæœ€å¸¸ç”¨ï¼Œå…¼å®¹æ€§å¥½ï¼‰
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ï¼Œä¸ºæ¯ä¸ªéœ€è¦è½¬æ¢ä¸ºè¡Œçš„åˆ—ç¼–å†™ä¸€ä¸ªç‹¬ç«‹çš„ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ï¼Œç„¶åç”¨ &lt;code&gt;UNION ALL&lt;/code&gt;åˆå¹¶æ‰€æœ‰ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ª &lt;code&gt;sales_data&lt;/code&gt;è¡¨ï¼Œå­˜å‚¨äº†äº§å“åœ¨å„ä¸ªå­£åº¦çš„é”€å”®é¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE sales_data (
product VARCHAR(50),
Q1 INT,
Q2 INT,
Q3 INT,
Q4 INT
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›®æ ‡æ˜¯å°†å…¶è½¬æ¢ä¸º &lt;code&gt;(äº§å“, å­£åº¦, é”€å”®é¢)&lt;/code&gt;çš„é•¿æ ¼å¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT product, &amp;#39;Q1&amp;#39; AS quarter, Q1 AS sales FROM sales_data
UNION ALL
SELECT product, &amp;#39;Q2&amp;#39;, Q2 FROM sales_data
UNION ALL
SELECT product, &amp;#39;Q3&amp;#39;, Q3 FROM sales_data
UNION ALL
SELECT product, &amp;#39;Q4&amp;#39;, Q4 FROM sales_data
ORDER BY product, quarter; -- ORDER BY å¯¹æ•´ä¸ªç»“æœé›†æ’åº
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­—æ®µä¸€è‡´æ€§&lt;/strong&gt;ï¼šæ‰€æœ‰ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥çš„&lt;strong&gt;å­—æ®µæ•°é‡å’Œç±»å‹å¿…é¡»ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½é—®é¢˜&lt;/strong&gt;ï¼š&lt;code&gt;UNION ALL&lt;/code&gt;ä¼š&lt;strong&gt;å¤šæ¬¡æ‰«æåŸè¡¨&lt;/strong&gt;ï¼Œå½“åŸè¡¨æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œæ€§èƒ½å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚å¯ä»¥è€ƒè™‘åœ¨ç›¸å…³åˆ—ä¸Šåˆ›å»ºç´¢å¼•æˆ–ä½¿ç”¨ä¸´æ—¶è¡¨ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æ»¤ NULL å€¼&lt;/strong&gt;ï¼šå¦‚æœæŸäº›åˆ—å¯èƒ½å­˜åœ¨ &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œå¹¶ä¸”ä½ å¸Œæœ›æ’é™¤è¿™äº›è®°å½•ï¼Œå¯ä»¥åœ¨æ¯ä¸ª &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ä¸­æ·»åŠ  &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ï¼Œä¾‹å¦‚ &lt;code&gt;WHERE Q1 IS NOT NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ä½¿ç”¨åŠ¨æ€sqlåº”å¯¹åˆ—åä¸å›ºå®šæˆ–åˆ—å¾ˆå¤šçš„æƒ…å†µ"&gt;2. ä½¿ç”¨åŠ¨æ€SQLï¼ˆåº”å¯¹åˆ—åä¸å›ºå®šæˆ–åˆ—å¾ˆå¤šçš„æƒ…å†µï¼‰
&lt;/h4&gt;&lt;p&gt;å½“éœ€è¦è½¬æ¢çš„åˆ—ä¸å›ºå®šæˆ–æ•°é‡éå¸¸å¤šæ—¶ï¼Œæ‰‹åŠ¨ç¼–å†™ &lt;code&gt;UNION ALL&lt;/code&gt;ä¼šå¾ˆç¹çã€‚è¿™æ—¶å¯ä»¥é€šè¿‡æŸ¥è¯¢ &lt;code&gt;INFORMATION_SCHEMA.COLUMNS&lt;/code&gt;ç³»ç»Ÿè¡¨æ¥åŠ¨æ€ç”ŸæˆSQLè¯­å¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET @sql = NULL;
-- åŠ¨æ€æ„é€ UNION ALLæŸ¥è¯¢
SELECT GROUP_CONCAT(
CONCAT(
&amp;#39;SELECT product, \&amp;#39;&amp;#39;,
COLUMN_NAME,
&amp;#39;\&amp;#39; AS quarter, &amp;#39;,
COLUMN_NAME,
&amp;#39; AS sales FROM sales_data&amp;#39;
-- å¯ä»¥æ·»åŠ  WHERE COLUMN_NAME IS NOT NULL æ¥è¿‡æ»¤ç©ºå€¼
)
SEPARATOR &amp;#39; UNION ALL &amp;#39;
) INTO @sql
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = &amp;#39;sales_data&amp;#39;
AND TABLE_SCHEMA = &amp;#39;your_database_name&amp;#39; -- æ›¿æ¢ä¸ºä½ çš„æ•°æ®åº“å
AND COLUMN_NAME IN (&amp;#39;Q1&amp;#39;, &amp;#39;Q2&amp;#39;, &amp;#39;Q3&amp;#39;, &amp;#39;Q4&amp;#39;); -- æŒ‡å®šè¦è½¬æ¢çš„åˆ—å
-- å‡†å¤‡å¹¶æ‰§è¡ŒåŠ¨æ€SQL
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šåŠ¨æ€SQLéœ€æ³¨æ„é˜²èŒƒSQLæ³¨å…¥é£é™©ï¼Œç¡®ä¿åˆ—åæ¥æºå¯é ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚æ€§&lt;/strong&gt;ï¼šè¿™ç§æ–¹æ³•é€šå¸¸éœ€è¦åœ¨å­˜å‚¨è¿‡ç¨‹æˆ–è„šæœ¬ä¸­å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ä½¿ç”¨-cross-join--case-mysql-80"&gt;3. ä½¿ç”¨ CROSS JOIN + CASE (MySQL 8.0+)
&lt;/h4&gt;&lt;p&gt;MySQL 8.0 æ”¯æŒ &lt;code&gt;VALUES&lt;/code&gt;è¯­å¥ï¼Œå¯ä»¥ç»“åˆ &lt;code&gt;CROSS JOIN&lt;/code&gt;å’Œ &lt;code&gt;CASE&lt;/code&gt;æ¥å®ç°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
s.product,
v.quarter,
CASE v.quarter
WHEN &amp;#39;Q1&amp;#39; THEN s.Q1
WHEN &amp;#39;Q2&amp;#39; THEN s.Q2
WHEN &amp;#39;Q3&amp;#39; THEN s.Q3
WHEN &amp;#39;Q4&amp;#39; THEN s.Q4
END AS sales
FROM sales_data s
CROSS JOIN (
SELECT &amp;#39;Q1&amp;#39; AS quarter UNION ALL
SELECT &amp;#39;Q2&amp;#39; UNION ALL
SELECT &amp;#39;Q3&amp;#39; UNION ALL
SELECT &amp;#39;Q4&amp;#39;
) v;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æ–¹æ³•é€šè¿‡ä¸€ä¸ªè™šæ‹Ÿçš„æ´¾ç”Ÿè¡¨ &lt;code&gt;v&lt;/code&gt;æ¥å®šä¹‰æ‰€æœ‰è¦è½¬æ¢çš„å­£åº¦å€¼ï¼Œç„¶åé€šè¿‡ &lt;code&gt;CASE&lt;/code&gt;è¯­å¥æ ¹æ® &lt;code&gt;quarter&lt;/code&gt;çš„å€¼é€‰æ‹©å¯¹åº”çš„åˆ—ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸ä¼˜åŒ–å»ºè®®"&gt;ğŸ“Š åº”ç”¨åœºæ™¯ä¸ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é€è§†ä¸åˆ†æ&lt;/strong&gt;ï¼šå°†å®½è¡¨è½¬æ¢ä¸ºé•¿æ ¼å¼ï¼Œä¾¿äºè¿›è¡Œæ—¶é—´åºåˆ—åˆ†æï¼ˆå¦‚å­£åº¦é”€å”®é¢å˜åŒ–ï¼‰ã€åˆ¶ä½œå›¾è¡¨æˆ–å¯¼å…¥å…¶ä»–åˆ†æå·¥å…·ï¼ˆå¦‚ Pandasï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‡å‡†åŒ–æ•°æ®&lt;/strong&gt;ï¼šå‡å°‘å†—ä½™åˆ—ï¼Œä½¿æ•°æ®ç»“æ„æ›´è§„èŒƒï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—å¤„ç†&lt;/strong&gt;ï¼šå°†æ—¥å¿—æ•°æ®ä¸­çš„å¤šä¸ªå­—æ®µè½¬æ¢ä¸ºé”®å€¼å¯¹å½¢å¼ï¼Œä¾¿äºæŸ¥è¯¢å’Œåˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–å»ºè®®&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ä¼˜åŒ–&lt;/strong&gt;ï¼šç¡®ä¿åŸè¡¨ä¸Šç”¨äºè¿æ¥ã€è¿‡æ»¤æˆ–æ’åºçš„å­—æ®µæœ‰åˆé€‚çš„ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é¡µå¤„ç†&lt;/strong&gt;ï¼šå¦‚æœç»“æœé›†éå¸¸å¤§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;LIMIT&lt;/code&gt;å’Œ &lt;code&gt;OFFSET&lt;/code&gt;è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ä¸´æ—¶è¡¨&lt;/strong&gt;ï¼šå…ˆå°†åˆ—è½¬è¡Œçš„ç»“æœå­˜å…¥ä¸´æ—¶è¡¨ï¼Œå†å¯¹ä¸´æ—¶è¡¨è¿›è¡Œåç»­æŸ¥è¯¢æ“ä½œï¼Œé¿å…é‡å¤è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é‡å¤&lt;/strong&gt;ï¼š&lt;code&gt;UNION ALL&lt;/code&gt;ä¼šä¿ç•™æ‰€æœ‰ç»“æœï¼ŒåŒ…æ‹¬å¯èƒ½é‡å¤çš„è¡Œã€‚å¦‚æœä½ ç¡®å®šéœ€è¦å»é‡ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;ï¼ˆä½†è¯·æ³¨æ„æ€§èƒ½å¼€é”€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹ä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¡®ä¿æ‰€æœ‰è¦åˆå¹¶çš„åˆ—åœ¨ &lt;code&gt;UNION ALL&lt;/code&gt;æ—¶æ•°æ®ç±»å‹æ˜¯å…¼å®¹çš„ï¼Œé˜²æ­¢éšå¼è½¬æ¢å¯¼è‡´é”™è¯¯æˆ–æ€§èƒ½é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULLå€¼å¤„ç†&lt;/strong&gt;ï¼šæ˜ç¡®æ˜¯å¦éœ€è¦ä¿ç•™æˆ–è¿‡æ»¤æ‰åŸåˆ—ä¸­çš„ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’åºè§„åˆ™&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å¯¹æœ€ç»ˆç»“æœè¿›è¡Œæ’åºæ—¶ï¼Œæ³¨æ„å®ƒæ˜¯ä½œç”¨äºæ•´ä¸ªè”åˆç»“æœé›†çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åœ¨ MySQL ä¸­å®ç°åˆ—è½¬è¡Œï¼Œ&lt;strong&gt;&lt;code&gt;UNION ALL&lt;/code&gt;æ˜¯æœ€å¸¸ç”¨ä¸”å…¼å®¹æ€§æœ€å¥½çš„æ–¹æ³•&lt;/strong&gt;ï¼Œé€‚åˆåˆ—æ•°è¾ƒå°‘ä¸”å›ºå®šçš„åœºæ™¯ã€‚å½“åˆ—æ•°ä¸å›ºå®šæˆ–éå¸¸å¤šæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨&lt;strong&gt;åŠ¨æ€SQL&lt;/strong&gt;æ¥è‡ªåŠ¨ç”ŸæˆæŸ¥è¯¢ã€‚å¯¹äº MySQL 8.0+ çš„ç”¨æˆ·ï¼Œ&lt;strong&gt;&lt;code&gt;CROSS JOIN&lt;/code&gt;+ &lt;code&gt;VALUES&lt;/code&gt;+ &lt;code&gt;CASE&lt;/code&gt;&lt;/strong&gt; æä¾›äº†å¦ä¸€ç§é¿å…ç¡¬ç¼–ç çš„æ€è·¯ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ã€æ•°æ®é‡ã€MySQL ç‰ˆæœ¬ä»¥åŠå¯¹æ€§èƒ½å’Œçµæ´»æ€§çš„è¦æ±‚ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åœ¨ MySQL ä¸­è¿›è¡Œåˆ—è½¬è¡Œæ“ä½œï¼&lt;/p&gt;
&lt;h2 id="åˆ—è½¬è¡Œ"&gt;åˆ—è½¬è¡Œ
&lt;/h2&gt;&lt;p&gt;äº†è§£ MySQL ä¸­çš„è¡Œè½¬åˆ—ï¼ˆPivotï¼‰æ“ä½œï¼Œèƒ½è®©ä½ æ›´çµæ´»åœ°å±•ç¤ºå’Œåˆ†ææ•°æ®ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šå…¶æ¦‚å¿µã€æ–¹æ³•ã€åœºæ™¯åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;è¡Œè½¬åˆ—æ˜¯å°†åŒä¸€å®ä½“ï¼ˆå¦‚ç”¨æˆ·ã€æ—¶é—´ç­‰ï¼‰åœ¨ä¸åŒè¡Œä¸­çš„å¤šä¸ªå±æ€§å€¼è½¬æ¢ä¸ºåŒä¸€è¡Œçš„å¤šåˆ—æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå°†å­¦ç”Ÿçš„å„ç§‘æˆç»©ä»å¤šè¡Œåˆå¹¶ä¸ºä¸€è¡Œï¼Œæ¯ç§‘å¯¹åº”ä¸€åˆ—ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CASE WHEN&lt;/code&gt;+ èšåˆå‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ—åå·²çŸ¥ä¸”å›ºå®šï¼Œéœ€å…¼å®¹å„ç§æ•°æ®åº“&lt;/td&gt;
&lt;td&gt;é€šç”¨æ€§å¼ºï¼Œæ‰€æœ‰SQLæ•°æ®åº“éƒ½æ”¯æŒï¼Œçµæ´»å¯æ§&lt;/td&gt;
&lt;td&gt;åˆ—å›ºå®šä¸å¤Ÿçµæ´»ï¼Œä»£ç ç›¸å¯¹å†—é•¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;GROUP_CONCAT&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€å°†å¤šè¡Œæ•°æ®åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚é€—å·åˆ†éš”åˆ—è¡¨ï¼‰&lt;/td&gt;
&lt;td&gt;ç®€æ´ï¼Œé¿å…å¤šåˆ—æ‰©å±•&lt;/td&gt;
&lt;td&gt;ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåç»­å¤„ç†å¯èƒ½éœ€è¦è§£æ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;PIVOT&lt;/code&gt;&lt;/strong&gt; (MySQL 8.0+)&lt;/td&gt;
&lt;td&gt;MySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè¿½æ±‚ä»£ç ç®€æ´&lt;/td&gt;
&lt;td&gt;è¯­æ³•ç®€æ´ç›´è§‚ï¼Œå¯è¯»æ€§é«˜&lt;/td&gt;
&lt;td&gt;å…¼å®¹æ€§è¾ƒå·®ï¼Œåˆ—åå¿…é¡»é¢„å…ˆé™æ€å®šä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€SQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è½¬æ¢çš„åˆ—ä¸å›ºå®šæˆ–ç»å¸¸å˜åŒ–&lt;/td&gt;
&lt;td&gt;çµæ´»é€‚åº”æ•°æ®å˜åŒ–ï¼Œæ— éœ€ç¡¬ç¼–ç åˆ—å&lt;/td&gt;
&lt;td&gt;å®ç°å¤æ‚ï¼Œéœ€ç¼–å†™å­˜å‚¨è¿‡ç¨‹æˆ–ç¨‹åºä»£ç ï¼Œæœ‰SQLæ³¨å…¥é£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¡Œè½¬åˆ—çš„å®ç°æ–¹æ³•"&gt;ğŸ”§ è¡Œè½¬åˆ—çš„å®ç°æ–¹æ³•
&lt;/h3&gt;&lt;h4 id="1-ä½¿ç”¨-case-when-èšåˆå‡½æ•°æœ€é€šç”¨"&gt;1. ä½¿ç”¨ &lt;code&gt;CASE WHEN&lt;/code&gt;+ èšåˆå‡½æ•°ï¼ˆæœ€é€šç”¨ï¼‰
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€åŸºç¡€å’Œå¸¸ç”¨çš„æ–¹å¼ï¼Œé€šè¿‡æ¡ä»¶åˆ¤æ–­å°†ä¸åŒè¡Œçš„æ•°å€¼åˆ†é…åˆ°å¯¹åº”çš„åˆ—ä¸­ï¼Œå†ç»“åˆ &lt;code&gt;SUM&lt;/code&gt;ã€&lt;code&gt;MAX&lt;/code&gt;ç­‰èšåˆå‡½æ•°å®Œæˆæ±‡æ€»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
userid,
SUM(CASE WHEN subject = &amp;#39;è¯­æ–‡&amp;#39; THEN score ELSE 0 END) AS è¯­æ–‡,
SUM(CASE WHEN subject = &amp;#39;æ•°å­¦&amp;#39; THEN score ELSE 0 END) AS æ•°å­¦,
SUM(CASE WHEN subject = &amp;#39;è‹±è¯­&amp;#39; THEN score ELSE 0 END) AS è‹±è¯­
FROM tb_score
GROUP BY userid;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå¯¹æ¯ä¸ªç”¨æˆ·çš„åˆ†ç»„å†…ï¼Œæ ¹æ®ç§‘ç›®åŒ¹é…åˆ†æ•°å¹¶ç´¯åŠ ï¼ŒæœªåŒ¹é…åˆ°çš„ç§‘ç›®å¡«å……ä¸º0ã€‚&lt;code&gt;CASE WHEN&lt;/code&gt;å¯ä»¥ç”¨ &lt;code&gt;IF()&lt;/code&gt;å‡½æ•°æ›¿ä»£ï¼Œæ•ˆæœç›¸åŒä½†è¯­æ³•æ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;h4 id="2-ä½¿ç”¨-group_concatå‡½æ•°"&gt;2. ä½¿ç”¨ &lt;code&gt;GROUP_CONCAT&lt;/code&gt;å‡½æ•°
&lt;/h4&gt;&lt;p&gt;å½“éœ€è¦å°†å¤šè¡Œæ•°æ®åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œ&lt;code&gt;GROUP_CONCAT&lt;/code&gt;æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
student_id,
GROUP_CONCAT(CONCAT(subject, &amp;#39;:&amp;#39;, score) ORDER BY subject SEPARATOR &amp;#39;; &amp;#39;) AS score_details
FROM scores
GROUP BY student_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°†æŠŠæ¯ä¸ªå­¦ç”Ÿçš„æ‰€æœ‰ç§‘ç›®å’Œæˆç»©åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š&amp;ldquo;æ•°å­¦:95; è¯­æ–‡:89; è‹±è¯­:92&amp;rdquo;ã€‚&lt;/p&gt;
&lt;h4 id="3-ä½¿ç”¨-pivotå‡½æ•°-mysql-80åŠä»¥ä¸Šç‰ˆæœ¬"&gt;3. ä½¿ç”¨ &lt;code&gt;PIVOT&lt;/code&gt;å‡½æ•° (MySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬)
&lt;/h4&gt;&lt;p&gt;MySQL 8.0 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ &lt;code&gt;PIVOT&lt;/code&gt;å‡½æ•°ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°å®ç°è¡Œè½¬åˆ—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM (
SELECT student_id, subject, score
FROM scores
) AS source_table
PIVOT (
SUM(score)
FOR subject IN (&amp;#39;æ•°å­¦&amp;#39;, &amp;#39;è¯­æ–‡&amp;#39;, &amp;#39;è‹±è¯­&amp;#39;)
) AS pivot_table;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="4-ä½¿ç”¨åŠ¨æ€sqlåº”å¯¹åˆ—åä¸å›ºå®š"&gt;4. ä½¿ç”¨åŠ¨æ€SQLï¼ˆåº”å¯¹åˆ—åä¸å›ºå®šï¼‰
&lt;/h4&gt;&lt;p&gt;å½“éœ€è¦è½¬æ¢çš„åˆ—ä¸å›ºå®šæˆ–æ•°é‡éå¸¸å¤šæ—¶ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢ &lt;code&gt;INFORMATION_SCHEMA.COLUMNS&lt;/code&gt;æˆ–ä¸šåŠ¡è¡¨æ¥åŠ¨æ€è·å–åˆ—åï¼Œå¹¶æ‹¼æ¥SQLè¯­å¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET @sql = NULL;
SELECT GROUP_CONCAT(DISTINCT
CONCAT(&amp;#39;SUM(IF(subject = &amp;#39;&amp;#39;&amp;#39;, subject, &amp;#39;&amp;#39;&amp;#39;, score, 0)) AS `&amp;#39;, subject, &amp;#39;`&amp;#39;)
) INTO @sql
FROM scores; -- å‡è®¾subjectæ¥è‡ªscoresè¡¨
SET @sql = CONCAT(&amp;#39;SELECT student_id, &amp;#39;, @sql, &amp;#39; FROM scores GROUP BY student_id&amp;#39;);
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šåŠ¨æ€SQLçµæ´»æ€§é«˜ä½†å¤æ‚åº¦è¾ƒå¤§ï¼Œä¸”éœ€é˜²èŒƒSQLæ³¨å…¥é£é™©ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ“Š åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;è¡Œè½¬åˆ—æ“ä½œå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é€è§†åˆ†æ&lt;/strong&gt;ï¼šç”Ÿæˆäº¤å‰è¡¨ä»¥ä¾¿å¤šç»´åº¦ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–æŸ¥è¯¢ç»“æœ&lt;/strong&gt;ï¼šå‡å°‘è¡Œæ•°ï¼Œä½¿æ•°æ®æ›´ç´§å‡‘æ˜“è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ¥è¡¨å±•ç¤ºä¼˜åŒ–&lt;/strong&gt;ï¼šé€‚é…å‰ç«¯è¡¨æ ¼ç»„ä»¶çš„æ•°æ®æ ¼å¼è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”€å”®æŠ¥è¡¨&lt;/strong&gt;ï¼šå°†ä¸åŒäº§å“çš„é”€å”®æ•°æ®è½¬æ¢ä¸ºåˆ—ï¼Œä¾¿äºæ¯”è¾ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·è¡Œä¸ºåˆ†æ&lt;/strong&gt;ï¼šå°†ç”¨æˆ·çš„å¤šç§è¡Œä¸ºæ•°æ®è½¬æ¢ä¸ºåˆ—ï¼Œä¾¿äºç»Ÿè®¡å’Œåˆ†æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº“å­˜ç®¡ç†&lt;/strong&gt;ï¼šå°†ä¸åŒä»“åº“çš„åº“å­˜æ•°æ®è½¬æ¢ä¸ºåˆ—ï¼Œä¾¿äºç®¡ç†å’Œç›‘æ§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹ç¤ºä¾‹&lt;/strong&gt;ï¼šå­¦ç”Ÿæˆç»©è¡¨è¡Œè½¬åˆ—&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸå§‹æ•°æ® (è¡Œæ ¼å¼)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;student_id&lt;/th&gt;
&lt;th&gt;subject&lt;/th&gt;
&lt;th&gt;score&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;æ•°å­¦&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;è¯­æ–‡&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;è‹±è¯­&lt;/td&gt;
&lt;td&gt;78&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;æ•°å­¦&lt;/td&gt;
&lt;td&gt;92&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;è¯­æ–‡&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;è‹±è¯­&lt;/td&gt;
&lt;td&gt;88&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›®æ ‡æ•°æ® (åˆ—æ ¼å¼)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;student_id&lt;/th&gt;
&lt;th&gt;æ•°å­¦&lt;/th&gt;
&lt;th&gt;è¯­æ–‡&lt;/th&gt;
&lt;th&gt;è‹±è¯­&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;78&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;92&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;td&gt;88&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°SQL&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
student_id,
MAX(CASE WHEN subject = &amp;#39;æ•°å­¦&amp;#39; THEN score END) AS æ•°å­¦,
MAX(CASE WHEN subject = &amp;#39;è¯­æ–‡&amp;#39; THEN score END) AS è¯­æ–‡,
MAX(CASE WHEN subject = &amp;#39;è‹±è¯­&amp;#39; THEN score END) AS è‹±è¯­
FROM scores
GROUP BY student_id;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–ç­–ç•¥"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–ç­–ç•¥
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿åˆ†ç»„å­—æ®µå”¯ä¸€æ€§&lt;/strong&gt;ï¼š&lt;code&gt;GROUP BY&lt;/code&gt;çš„å­å¥åº”ç¡®ä¿åˆ†ç»„çš„å”¯ä¸€æ€§ï¼Œé¿å…æ•°æ®æ··æ·†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†NULLå€¼&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;COALESCE()&lt;/code&gt;å‡½æ•°æˆ–æ¡ä»¶åˆ¤æ–­ä¸­çš„ &lt;code&gt;ELSE&lt;/code&gt;å­å¥ä¸ºç¼ºå¤±å€¼æä¾›é»˜è®¤å€¼ï¼ˆå¦‚0ï¼‰ï¼Œä¿æŒæ•°å€¼ç±»å‹ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ä¼˜åŒ–&lt;/strong&gt;ï¼šä¸ºç»å¸¸ç”¨äº &lt;code&gt;GROUP BY&lt;/code&gt;çš„åˆ—å’Œ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­çš„åˆ—åˆ›å»ºç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘æ•°æ®é‡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶è¿‡æ»¤ä¸éœ€è¦çš„æ•°æ®ï¼Œå‡å°‘è½¬æ¢æ“ä½œçš„æ•°æ®é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…&lt;code&gt;SELECT \*&lt;/code&gt;&lt;/strong&gt;ï¼šåªé€‰æ‹©å¿…è¦çš„åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨&lt;code&gt;EXPLAIN&lt;/code&gt;åˆ†æ&lt;/strong&gt;ï¼šåˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€SQLçš„å®‰å…¨æ€§&lt;/strong&gt;ï¼šä½¿ç”¨åŠ¨æ€SQLæ—¶ï¼ŒåŠ¡å¿…éªŒè¯è¾“å…¥å‚æ•°çš„å®‰å…¨æ€§ï¼Œé˜²èŒƒSQLæ³¨å…¥é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;GROUP_CONCAT&lt;/code&gt;é•¿åº¦é™åˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;GROUP_CONCAT&lt;/code&gt;å‡½æ•°æœ‰é»˜è®¤é•¿åº¦é™åˆ¶ï¼ˆ1024å­—èŠ‚ï¼‰ï¼Œå¯é€šè¿‡è®¾ç½® &lt;code&gt;group_concat_max_len&lt;/code&gt;å‚æ•°è°ƒæ•´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è¡Œè½¬åˆ—æ˜¯æ•°æ®å¤„ç†ä¸­çš„é‡è¦æ“ä½œï¼Œå…¶æ ¸å¿ƒåœ¨äº&lt;strong&gt;çµæ´»è¿ç”¨SQLçš„æ¡ä»¶è¡¨è¾¾å¼ã€èšåˆå‡½æ•°åŠé›†åˆæ“ä½œç¬¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨ä¸”ç¨³å®š&lt;/strong&gt;ï¼šé€‰æ‹© &lt;strong&gt;&lt;code&gt;CASE WHEN&lt;/code&gt;+ èšåˆå‡½æ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå¹¶ä¸ºå­—ç¬¦ä¸²&lt;/strong&gt;ï¼šé€‰æ‹© &lt;strong&gt;&lt;code&gt;GROUP_CONCAT&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL 8.0+ä¸”åˆ—å›ºå®š&lt;/strong&gt;ï¼šå¯ä»¥å°è¯• &lt;strong&gt;&lt;code&gt;PIVOT&lt;/code&gt;&lt;/strong&gt; è¯­æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ—åä¸å›ºå®š&lt;/strong&gt;ï¼šä½¿ç”¨&lt;strong&gt;åŠ¨æ€SQL&lt;/strong&gt;ï¼ˆä½†è¦æ³¨æ„å¤æ‚åº¦å’Œå®‰å…¨é£é™©ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨MySQLä¸­çš„è¡Œè½¬åˆ—æ“ä½œï¼&lt;/p&gt;
&lt;h2 id="union--union-all"&gt;UNION &amp;amp; UNION ALL
&lt;/h2&gt;&lt;p&gt;äº†è§£ &lt;code&gt;UNION&lt;/code&gt;å’Œ &lt;code&gt;UNION ALL&lt;/code&gt;çš„åŒºåˆ«å¯¹äºç¼–å†™é«˜æ•ˆçš„ SQL æŸ¥è¯¢å¾ˆé‡è¦ã€‚å®ƒä»¬è™½ç„¶éƒ½ç”¨äºåˆå¹¶ç»“æœé›†ï¼Œä½†åœ¨å¤„ç†é‡å¤æ•°æ®ã€æ€§èƒ½ä»¥åŠä½¿ç”¨åœºæ™¯ä¸Šæœ‰æ‰€ä¸åŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;UNION ALL&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;UNION&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å»é‡è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¿ç•™æ‰€æœ‰è¡Œ&lt;/strong&gt;ï¼ŒåŒ…æ‹¬é‡å¤è®°å½•&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;è‡ªåŠ¨å»é™¤é‡å¤è¡Œ&lt;/strong&gt;ï¼Œåªä¿ç•™å”¯ä¸€è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è¡¨ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš¡ &lt;strong&gt;æ›´å¿«&lt;/strong&gt;ï¼Œå› æ— éœ€å»é‡æ“ä½œ&lt;/td&gt;
&lt;td&gt;ğŸ¢ &lt;strong&gt;ç›¸å¯¹è¾ƒæ…¢&lt;/strong&gt;ï¼Œéœ€é¢å¤–æ’åºå’Œæ¯”è¾ƒä»¥å»é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†å¤§å°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç­‰äºæ‰€æœ‰æŸ¥è¯¢ç»“æœè¡Œæ•°çš„&lt;strong&gt;æ€»å’Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½å°äºæ‰€æœ‰æŸ¥è¯¢ç»“æœè¡Œæ•°çš„æ€»å’Œï¼ˆå› å»é‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥çš„&lt;strong&gt;åˆ—æ•°å¿…é¡»ç›¸åŒ&lt;/strong&gt;ï¼Œä¸”å¯¹åº”åˆ—çš„æ•°æ®ç±»å‹å…¼å®¹&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;UNION ALL&lt;/code&gt;ç›¸åŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’åºæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä¸è¿›è¡Œéšå¼æ’åº&lt;/td&gt;
&lt;td&gt;ä¸ºå®Œæˆå»é‡ï¼Œé€šå¸¸ä¼šåœ¨å†…éƒ¨è¿›è¡Œæ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©-1"&gt;ğŸ§  å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©çš„å…³é”®åœ¨äº&lt;strong&gt;æ˜¯å¦éœ€è¦å»é‡&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;å¯¹æ€§èƒ½çš„è€ƒé‡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦å»é™¤é‡å¤è¡Œ&lt;/strong&gt;æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸éœ€è¦å»é‡&lt;/strong&gt;ï¼Œæˆ–&lt;strong&gt;æ˜ç¡®çŸ¥é“ç»“æœé›†æ— é‡å¤&lt;/strong&gt;ä¸”&lt;strong&gt;è¿½æ±‚æŸ¥è¯¢é€Ÿåº¦&lt;/strong&gt;æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;UNION ALL&lt;/code&gt;ã€‚åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½æå‡å°¤ä¸ºæ˜æ˜¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-3"&gt;ğŸ“ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ—åä¸æ•°æ®ç±»å‹&lt;/strong&gt;ï¼šåˆå¹¶æ—¶ï¼Œå¤šä¸ª &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥çš„åˆ—æ•°å¿…é¡»ç›¸åŒï¼Œå¯¹åº”åˆ—çš„æ•°æ®ç±»å‹åº”å…¼å®¹ï¼ˆå¦‚ INT å’Œ DECIMALï¼‰ï¼Œä½†åˆ—åå¯ä»¥ä¸åŒï¼Œæœ€ç»ˆç»“æœé›†çš„åˆ—åé€šå¸¸å–è‡ªç¬¬ä¸€ä¸ª &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’åºå­å¥ (&lt;code&gt;ORDER BY&lt;/code&gt;)&lt;/strong&gt;ï¼šå¦‚æœéœ€è¦å¯¹åˆå¹¶åçš„æœ€ç»ˆç»“æœæ’åºï¼Œåªèƒ½åœ¨&lt;strong&gt;æœ€åä¸€ä¸ª &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥å&lt;/strong&gt;ä½¿ç”¨ä¸€ä¸ª &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç† NULL å€¼&lt;/strong&gt;ï¼šä¸¤è€…é€šå¸¸éƒ½å°† NULL å€¼è§†ä¸ºç›¸åŒçš„å€¼è¿›è¡Œå»é‡æˆ–ä¿ç•™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;UNION&lt;/code&gt;å’Œ &lt;code&gt;UNION ALL&lt;/code&gt;æ˜¯ SQL æŸ¥è¯¢ä¸­åˆå¹¶ç»“æœé›†çš„å¼ºå¤§å·¥å…·ã€‚&lt;strong&gt;&lt;code&gt;UNION ALL&lt;/code&gt;ç®€å•é«˜æ•ˆï¼Œä¿ç•™æ‰€æœ‰ï¼›&lt;code&gt;UNION&lt;/code&gt;å»é‡æ±‚ç²¾ï¼Œç¡®ä¿å”¯ä¸€&lt;/strong&gt;ã€‚æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚è°¨æ…é€‰æ‹©ï¼Œå¯ä»¥æœ‰æ•ˆæå‡æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;ä¸ &lt;code&gt;UNION ALL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="å…¨å¤–è¿æ¥"&gt;å…¨å¤–è¿æ¥
&lt;/h2&gt;&lt;p&gt;MySQL æœ¬èº«å¹¶ä¸ç›´æ¥æ”¯æŒ &lt;code&gt;FULL OUTER JOIN&lt;/code&gt;ï¼ˆå…¨å¤–è¿æ¥ï¼‰è¯­æ³•ã€‚ä¸è¿‡åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»„åˆ &lt;code&gt;LEFT JOIN&lt;/code&gt;ã€&lt;code&gt;RIGHT JOIN&lt;/code&gt;å’Œ &lt;code&gt;UNION&lt;/code&gt;æ¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä¸ºä½ ä»‹ç»å…·ä½“çš„æ–¹æ³•ã€åŒºåˆ«ä»¥åŠå¦‚ä½•é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h3 id="-å®ç°å…¨å¤–è¿æ¥çš„ä¸¤ç§æ–¹æ³•"&gt;ğŸ”§ å®ç°å…¨å¤–è¿æ¥çš„ä¸¤ç§æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;å…¨å¤–è¿æ¥çš„æ ¸å¿ƒç›®çš„æ˜¯è¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰çš„è®°å½•ï¼Œå³ä½¿å®ƒä»¬åœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œã€‚æ²¡æœ‰åŒ¹é…çš„éƒ¨åˆ†ä¼šç”¨ &lt;code&gt;NULL&lt;/code&gt;å¡«å……ã€‚&lt;/p&gt;
&lt;h4 id="æ–¹æ³•ä¸€ä½¿ç”¨-unionè‡ªåŠ¨å»é‡"&gt;æ–¹æ³•ä¸€ï¼šä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;(è‡ªåŠ¨å»é‡)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€æ ‡å‡†å’Œå¸¸ç”¨çš„æ–¹å¼ï¼Œä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;æ“ä½œç¬¦åˆå¹¶å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥çš„ç»“æœé›†ï¼Œå¹¶è‡ªåŠ¨å»é™¤é‡å¤çš„è¡Œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM table1
LEFT JOIN table2 ON table1.id = table2.id
UNION
SELECT *
FROM table1
RIGHT JOIN table2 ON table1.id = table2.id;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æ–¹æ³•äºŒä½¿ç”¨-union-allä¸å»é‡æ€§èƒ½æ›´ä¼˜"&gt;æ–¹æ³•äºŒï¼šä½¿ç”¨ &lt;code&gt;UNION ALL&lt;/code&gt;(ä¸å»é‡ï¼Œæ€§èƒ½æ›´ä¼˜)
&lt;/h4&gt;&lt;p&gt;å¦‚æœä½ ç¡®ä¿¡å·¦å³è¿æ¥çš„ç»“æœé›†æ²¡æœ‰é‡å¤è¡Œï¼ˆæˆ–è€…ä¸å…³å¿ƒé‡å¤è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;UNION ALL&lt;/code&gt;æ¥æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œå› ä¸ºå®ƒçœå»äº†å»é‡çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM table1
LEFT JOIN table2 ON table1.id = table2.id
UNION ALL
SELECT *
FROM table1
RIGHT JOIN table2 ON table1.id = table2.id
WHERE table1.id IS NULL; -- æ­¤æ¡ä»¶ç”¨äºç­›é€‰å‡ºä»…å­˜åœ¨äºå³è¡¨çš„è®°å½•
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ–¹æ³•äºŒä¸­ç¬¬äºŒä¸ªæŸ¥è¯¢çš„ &lt;code&gt;WHERE table1.id IS NULL&lt;/code&gt;æ¡ä»¶è‡³å…³é‡è¦ï¼Œå®ƒç”¨äºç­›é€‰å‡º&lt;strong&gt;ä»…å­˜åœ¨äº &lt;code&gt;table2&lt;/code&gt;ï¼ˆå³è¡¨ï¼‰&lt;/strong&gt; è€Œ&lt;strong&gt;ä¸åœ¨ &lt;code&gt;table1&lt;/code&gt;ï¼ˆå·¦è¡¨ï¼‰&lt;/strong&gt; ä¸­çš„è®°å½•ï¼Œé¿å…äº†ä¸å·¦è¿æ¥ç»“æœé‡å¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ æ›´å¥½åœ°æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼Œè¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸¤ç§æ–¹æ³•çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;(æ–¹æ³•ä¸€)&lt;/th&gt;
&lt;th&gt;ä½¿ç”¨ &lt;code&gt;UNION ALL&lt;/code&gt;(æ–¹æ³•äºŒ)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å»é‡è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… è‡ªåŠ¨å»é™¤æ‰€æœ‰é‡å¤è¡Œ&lt;/td&gt;
&lt;td&gt;âŒ ä¿ç•™æ‰€æœ‰è¡Œï¼ŒåŒ…æ‹¬å¯èƒ½é‡å¤çš„è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš ï¸ ç›¸å¯¹è¾ƒæ…¢ (éœ€æ‰§è¡Œå»é‡æ“ä½œ)&lt;/td&gt;
&lt;td&gt;âš¡ &lt;strong&gt;æ›´å¿«&lt;/strong&gt; (æ— éœ€å»é‡)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœå‡†ç¡®æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ (æ ‡å‡†åšæ³•ï¼Œç¡®ä¿æ— è¯¯)&lt;/td&gt;
&lt;td&gt;â­ï¸â­ï¸â­ï¸â­ï¸ (éœ€ç¡®ä¿å†™æ³•æ­£ç¡®ï¼Œå¦åˆ™æ˜“é‡å¤)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èåœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šç”¨åœºæ™¯ï¼Œæˆ–ä¸ç¡®å®šæ˜¯å¦æœ‰é‡å¤æ—¶&lt;/td&gt;
&lt;td&gt;ç¡®ä¿¡ä¸¤ç»“æœé›†&lt;strong&gt;æ— é‡å¤è¡Œ&lt;/strong&gt;ï¼Œæˆ–æ˜ç¡®éœ€è¦ä¿ç•™æ‰€æœ‰è¡Œä¸”è¿½æ±‚æ€§èƒ½æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…¨å¤–è¿æ¥ç»“æœç¤ºæ„"&gt;ğŸ“Š å…¨å¤–è¿æ¥ç»“æœç¤ºæ„
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;employees&lt;/code&gt;(å‘˜å·¥è¡¨)&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;emp_id&lt;/th&gt;
&lt;th&gt;emp_name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;å¼ ä¸‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;æå››&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;ç‹äº”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;departments&lt;/code&gt;(éƒ¨é—¨è¡¨)&lt;/strong&gt;:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;dept_id&lt;/th&gt;
&lt;th&gt;dept_name&lt;/th&gt;
&lt;th&gt;emp_id&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;td&gt;ç ”å‘éƒ¨&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;102&lt;/td&gt;
&lt;td&gt;å¸‚åœºéƒ¨&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;103&lt;/td&gt;
&lt;td&gt;è´¢åŠ¡éƒ¨&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰§è¡Œå…¨å¤–è¿æ¥æŸ¥è¯¢åï¼Œç»“æœé›†å°†åŒ…å«æ‰€æœ‰å‘˜å·¥å’Œæ‰€æœ‰éƒ¨é—¨çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;emp_id&lt;/th&gt;
&lt;th&gt;emp_name&lt;/th&gt;
&lt;th&gt;dept_id&lt;/th&gt;
&lt;th&gt;dept_name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;å¼ ä¸‰&lt;/td&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;td&gt;ç ”å‘éƒ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;æå››&lt;/td&gt;
&lt;td&gt;102&lt;/td&gt;
&lt;td&gt;å¸‚åœºéƒ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;ç‹äº”&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;103&lt;/td&gt;
&lt;td&gt;è´¢åŠ¡éƒ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–å»ºè®®"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šå…¨å¤–è¿æ¥ï¼Œå°¤å…¶æ˜¯é€šè¿‡è”åˆï¼ˆUNIONï¼‰å®ç°æ—¶ï¼Œå¯èƒ½å¤„ç†å¤§é‡æ•°æ®ã€‚ä¸ºç¡®ä¿æ•ˆç‡ï¼Œ&lt;strong&gt;åŠ¡å¿…ä¸ºè¿æ¥æ¡ä»¶ä¸­ä½¿ç”¨çš„å­—æ®µï¼ˆå¦‚ &lt;code&gt;table1.id&lt;/code&gt;å’Œ &lt;code&gt;table2.id&lt;/code&gt;ï¼‰åˆ›å»ºç´¢å¼•&lt;/strong&gt;ã€‚å¯¹äºæå¤§è¡¨ï¼Œè¿˜å¯è€ƒè™‘ä½¿ç”¨åˆ†åŒºè¡¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç† NULL å€¼&lt;/strong&gt;ï¼šç»“æœé›†ä¸­å‡ºç°çš„ &lt;code&gt;NULL&lt;/code&gt;æ˜¯æ­£å¸¸ç°è±¡ï¼Œè¡¨ç¤ºç¼ºå°‘åŒ¹é…ã€‚å¦‚æœåº”ç”¨å±‚éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;COALESCE()&lt;/code&gt;æˆ– &lt;code&gt;IFNULL()&lt;/code&gt;å‡½æ•°ä¸ºè¿™äº› &lt;code&gt;NULL&lt;/code&gt;å€¼æä¾›é»˜è®¤å€¼æˆ–å‹å¥½æ˜¾ç¤ºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
COALESCE(table1.id, table2.id) AS id,
COALESCE(table1.name, &amp;#39;æœªçŸ¥&amp;#39;) AS name,
...
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ç±»å‹ä¸åˆ—æ•°&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;æˆ– &lt;code&gt;UNION ALL&lt;/code&gt;æ—¶ï¼Œ&lt;strong&gt;æ‰€æœ‰ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥çš„åˆ—æ•°å¿…é¡»ç›¸åŒï¼Œä¸”å¯¹åº”åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†ææŸ¥è¯¢è®¡åˆ’&lt;/strong&gt;ï¼šå¯¹äºå¤æ‚çš„æŸ¥è¯¢ï¼Œä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Œæœ‰åŠ©äºäº†è§£æ€§èƒ½ç“¶é¢ˆå¹¶è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶åœ¨ MySQL ä¸­å®ç°å…¨å¤–è¿æ¥éœ€è¦ç»•ä¸€ç‚¹è·¯ï¼Œä½†é€šè¿‡ &lt;code&gt;LEFT JOIN&lt;/code&gt;ã€&lt;code&gt;RIGHT JOIN&lt;/code&gt;é…åˆ &lt;code&gt;UNION&lt;/code&gt;æˆ– &lt;code&gt;UNION ALL&lt;/code&gt;ï¼Œå®Œå…¨å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;é€šç”¨éœ€æ±‚&lt;/strong&gt;ï¼Œç›´æ¥ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;UNION&lt;/code&gt;&lt;/strong&gt; æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ &lt;strong&gt;éå¸¸ç¡®å®šç»“æœæ²¡æœ‰é‡å¤&lt;/strong&gt;ä¸”&lt;strong&gt;è¿½æ±‚æè‡´æ€§èƒ½&lt;/strong&gt;æ—¶ï¼Œå¯ä»¥è€ƒè™‘ &lt;strong&gt;&lt;code&gt;UNION ALL&lt;/code&gt;&lt;/strong&gt; æ–¹æ³•ï¼Œä½†åŠ¡å¿…æ³¨æ„è¯­æ³•çš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ é¡ºåˆ©åœ°åœ¨ MySQL ä¸­å®Œæˆå…¨å¤–è¿æ¥æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id="åŸå› "&gt;åŸå› 
&lt;/h2&gt;&lt;p&gt;MySQL é€‰æ‹©ä¸æ”¯æŒ &lt;code&gt;FULL OUTER JOIN&lt;/code&gt;ï¼ˆå…¨å¤–è¿æ¥ï¼‰è¯­æ³•ï¼Œæ˜¯å…¶åŸºäºè®¾è®¡å“²å­¦ã€æ€§èƒ½è€ƒé‡å’Œä½¿ç”¨åœºæ™¯ç­‰æ–¹é¢åšå‡ºçš„æƒè¡¡ã€‚&lt;/p&gt;
&lt;h3 id="-å®ç°å…¨å¤–è¿æ¥çš„æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ› ï¸ å®ç°å…¨å¤–è¿æ¥çš„æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ MySQL ä¸ç›´æ¥æ”¯æŒ &lt;code&gt;FULL OUTER JOIN&lt;/code&gt;ï¼Œä½†ä½ ä»ç„¶å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ç›¸åŒçš„æ•ˆæœã€‚é€šå¸¸ä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;å’Œ &lt;code&gt;RIGHT JOIN&lt;/code&gt;çš„ç»„åˆï¼Œå¹¶é€šè¿‡ &lt;code&gt;UNION&lt;/code&gt;æ¥åˆå¹¶ç»“æœé›†ï¼Œæ¨¡æ‹Ÿå…¨å¤–è¿æ¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM table1
LEFT JOIN table2 ON table1.id = table2.id
UNION
SELECT *
FROM table1
RIGHT JOIN table2 ON table1.id = table2.id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š&lt;code&gt;UNION&lt;/code&gt;æ“ä½œç¬¦é»˜è®¤ä¼šå»é™¤é‡å¤çš„è¡Œã€‚å¦‚æœä½ ç¡®ä¿¡å·¦å³è¿æ¥çš„ç»“æœé›†æ²¡æœ‰é‡å¤è¡Œï¼Œæˆ–è€…ä¸éœ€è¦å»é‡ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;UNION ALL&lt;/code&gt;æ¥æå‡æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id="-å…¨å¤–è¿æ¥çš„ä½œç”¨"&gt;ğŸ’¡ å…¨å¤–è¿æ¥çš„ä½œç”¨
&lt;/h3&gt;&lt;p&gt;å…¨å¤–è¿æ¥çš„ç›®çš„æ˜¯è¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰çš„è®°å½•ï¼Œæ— è®ºå®ƒä»¬åœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ˜¯å¦æœ‰åŒ¹é…çš„è¡Œã€‚å½“æŸä¸€è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…æ—¶ï¼Œç›¸åº”å­—æ®µä¼šå¡«å……ä¸º &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-mysql-ä¸æ”¯æŒå…¨å¤–è¿æ¥çš„å¯èƒ½åŸå› "&gt;ğŸ¤” MySQL ä¸æ”¯æŒå…¨å¤–è¿æ¥çš„å¯èƒ½åŸå› 
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡å“²å­¦ä¸ä½¿ç”¨é¢‘ç‡&lt;/strong&gt;ï¼šMySQL çš„è®¾è®¡æ›´ä¾§é‡äºæ€§èƒ½ã€ç®€å•å’Œç¨³å®šã€‚&lt;code&gt;FULL OUTER JOIN&lt;/code&gt;çš„ä½¿ç”¨åœºæ™¯ç›¸å¯¹&lt;strong&gt;å°ä¼—&lt;/strong&gt;ï¼Œå¹¶éæ‰€æœ‰åº”ç”¨éƒ½ä¼šç”¨åˆ°ã€‚MySQL å›¢é˜Ÿå¯èƒ½è®¤ä¸ºï¼Œé€šè¿‡ç°æœ‰çš„ &lt;code&gt;UNION&lt;/code&gt;å’Œ &lt;code&gt;LEFT JOIN&lt;/code&gt;/&lt;code&gt;RIGHT JOIN&lt;/code&gt;ç»„åˆå·²ç»èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œæ— éœ€å¢åŠ è¯­æ³•å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼š&lt;code&gt;FULL OUTER JOIN&lt;/code&gt;çš„å®ç°å¯èƒ½æ¶‰åŠå¯¹ä¸¤ä¸ªè¡¨çš„å¤§é‡æ•°æ®çš„å¤æ‚æ“ä½œï¼Œ&lt;strong&gt;æ€§èƒ½å¼€é”€è¾ƒå¤§&lt;/strong&gt;ã€‚åœ¨ MySQL æ›´æ³¨é‡ OLTPï¼ˆè”æœºäº‹åŠ¡å¤„ç†ï¼‰åœºæ™¯çš„æ—©æœŸï¼Œè¿™ç§å¯èƒ½å½±å“æ ¸å¿ƒäº‹åŠ¡æ€§èƒ½çš„ç‰¹æ€§ä¼˜å…ˆçº§ä¸é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯­ä¹‰æ¸…æ™°åº¦&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;UNION&lt;/code&gt;å’Œ &lt;code&gt;LEFT JOIN&lt;/code&gt;/&lt;code&gt;RIGHT JOIN&lt;/code&gt;çš„ç»„åˆæ¥æ¨¡æ‹Ÿå…¨å¤–è¿æ¥ï¼Œè™½ç„¶è¯­å¥ç¨é•¿ï¼Œä½†&lt;strong&gt;é€»è¾‘éå¸¸æ¸…æ™°&lt;/strong&gt;ï¼Œæ˜ç¡®äº†æ“ä½œæ­¥éª¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†å²ä¸å…¼å®¹æ€§&lt;/strong&gt;ï¼šMySQL çš„å‘å±•æœ‰å…¶å†å²è·¯å¾„ã€‚ä¸€æ—¦æŸç§è®¾è®¡è¢«å¹¿æ³›æ¥å—ï¼Œåç»­æ›´æ”¹å¯èƒ½ä¼šè€ƒè™‘å¯¹ç°æœ‰ç³»ç»Ÿå’Œç”¨æˆ·ä¹ æƒ¯çš„å…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆæ—¶éœ€æ³¨æ„"&gt;âš ï¸ ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆæ—¶éœ€æ³¨æ„
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼š&lt;code&gt;UNION&lt;/code&gt;ä¼šæ‰§è¡Œå»é‡æ“ä½œï¼Œå¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œå¯èƒ½ä¼š&lt;strong&gt;å½±å“æŸ¥è¯¢æ•ˆç‡&lt;/strong&gt;ã€‚ç¡®ä¿åœ¨è¿æ¥æ¡ä»¶ä½¿ç”¨çš„å­—æ®µä¸Šåˆ›å»ºç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;NULL&lt;/code&gt;å€¼å¤„ç†&lt;/strong&gt;ï¼šç»“æœé›†ä¸­å¯èƒ½ä¼šå‡ºç° &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœåº”ç”¨å±‚éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;COALESCE()&lt;/code&gt;æˆ– &lt;code&gt;IFNULL()&lt;/code&gt;å‡½æ•°ä¸ºè¿™äº› &lt;code&gt;NULL&lt;/code&gt;å€¼æä¾›é»˜è®¤å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¡®ä¿æ‰€æœ‰ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥çš„&lt;strong&gt;åˆ—æ•°ç›¸åŒ&lt;/strong&gt;ï¼Œä¸”&lt;strong&gt;å¯¹åº”åˆ—çš„æ•°æ®ç±»å‹å…¼å®¹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-13"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL ä¸æ”¯æŒ &lt;code&gt;FULL OUTER JOIN&lt;/code&gt;ï¼Œä¸»è¦æ˜¯åŸºäºå…¶&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;ï¼ˆç®€å•ã€é«˜æ•ˆï¼‰ã€å¯¹&lt;strong&gt;ä½¿ç”¨é¢‘ç‡&lt;/strong&gt;çš„è€ƒé‡ä»¥åŠ&lt;strong&gt;æ€§èƒ½æƒè¡¡&lt;/strong&gt;çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œé€šè¿‡ &lt;code&gt;LEFT JOIN&lt;/code&gt;ã€&lt;code&gt;RIGHT JOIN&lt;/code&gt;ç»“åˆ &lt;code&gt;UNION&lt;/code&gt;çš„æ–¹æ¡ˆï¼Œä½ å®Œå…¨å¯ä»¥åœ¨ MySQL ä¸­å®ç°å…¨å¤–è¿æ¥çš„åŠŸèƒ½ã€‚åªéœ€æ³¨æ„åœ¨æ€§èƒ½å…³é”®çš„ä¸šåŠ¡ä¸­ï¼Œç¡®ä¿ç›¸å…³çš„è¿æ¥å­—æ®µä¸Šæœ‰ç´¢å¼•ï¼Œå¹¶ç†è§£ &lt;code&gt;UNION&lt;/code&gt;ä¼šå»é‡å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ ç†è§£ MySQL çš„è®¾è®¡é€‰æ‹©ï¼Œå¹¶é¡ºåˆ©å®ç°å…¨å¤–è¿æ¥çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id="having-1"&gt;having
&lt;/h2&gt;&lt;p&gt;ä½ åœ¨ä½¿ç”¨ &lt;code&gt;HAVING&lt;/code&gt;å­å¥æ—¶é‡åˆ°çš„ &lt;code&gt;Unknown column 'library_books.total_copies' in 'having clause'&lt;/code&gt;é”™è¯¯ï¼Œæ˜¯ MySQL ä¸­ä¸€ä¸ªå¸¸è§çš„è¯¯åŒºã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹åŸå› å¹¶æä¾›è§£å†³æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-é”™è¯¯åŸå› "&gt;ğŸ” é”™è¯¯åŸå› 
&lt;/h3&gt;&lt;p&gt;æ ¸å¿ƒåŸå› åœ¨äºä½ å¯¹ &lt;strong&gt;&lt;code&gt;HAVING&lt;/code&gt;å­å¥èƒ½å¼•ç”¨ä»€ä¹ˆå­—æ®µ&lt;/strong&gt;çš„ç†è§£æœ‰è¯¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;HAVING&lt;/code&gt;å­å¥çš„é™åˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;HAVING&lt;/code&gt;å­å¥ç”¨äºå¯¹ &lt;code&gt;GROUP BY&lt;/code&gt;åˆ†ç»„åçš„ç»“æœé›†è¿›è¡Œè¿‡æ»¤ã€‚å®ƒ&lt;strong&gt;åªèƒ½ç›´æ¥å¼•ç”¨&lt;/strong&gt;ä»¥ä¸‹ä¸¤ç§å†…å®¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­åˆ—å‡ºçš„åˆ—&lt;/strong&gt;ã€‚åœ¨ä½ çš„æŸ¥è¯¢ä¸­ï¼Œåªæœ‰ &lt;code&gt;library_books.book_id&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èšåˆå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;COUNT()&lt;/code&gt;, &lt;code&gt;SUM()&lt;/code&gt;, &lt;code&gt;MAX()&lt;/code&gt;, &lt;code&gt;MIN()&lt;/code&gt;ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½ çš„æŸ¥è¯¢é—®é¢˜&lt;/strong&gt;ï¼šä½ çš„ &lt;code&gt;HAVING&lt;/code&gt;å­å¥è¯•å›¾ç›´æ¥å¼•ç”¨ &lt;code&gt;library_books.total_copies&lt;/code&gt;ï¼Œä½†è¿™ä¸ªå­—æ®µ&lt;strong&gt;æ—¢æ²¡æœ‰å‡ºç°åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­ï¼Œä¹Ÿæ²¡æœ‰è¢«ç”¨äºèšåˆå‡½æ•°&lt;/strong&gt;ã€‚å¯¹äº MySQL æ¥è¯´ï¼Œåœ¨åˆ†ç»„åçš„ç»“æœé›†é‡Œï¼Œå®ƒä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªæœªå‚ä¸åˆ†ç»„çš„åˆ—ï¼Œå› æ­¤ä¼šæŠ¥å‘Šâ€œæœªçŸ¥åˆ—â€çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è§£å†³æ–¹æ³•"&gt;ğŸ› ï¸ è§£å†³æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œè¿™é‡Œæœ‰ä¸¤ç§å¯èƒ½çš„ä¿®æ”¹æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;h4 id="æ–¹æ¡ˆä¸€å°†-total_copiesåŠ å…¥-group-byå­å¥"&gt;æ–¹æ¡ˆä¸€ï¼šå°† &lt;code&gt;total_copies&lt;/code&gt;åŠ å…¥ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥
&lt;/h4&gt;&lt;p&gt;å¦‚æœ &lt;code&gt;total_copies&lt;/code&gt;çš„å€¼å¯¹äºç›¸åŒçš„ &lt;code&gt;book_id&lt;/code&gt;æ˜¯ç›¸åŒçš„ï¼ˆè¿™é€šå¸¸æ˜¯åˆç†çš„ï¼Œå› ä¸ºåŒä¸€æœ¬ä¹¦çš„æ€»å‰¯æœ¬æ•°é€šå¸¸æ˜¯å›ºå®šçš„ï¼‰ï¼Œä½ å¯ä»¥å°†å®ƒæ·»åŠ åˆ° &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­ã€‚è¿™æ ·ï¼Œå®ƒå°±å¯ä»¥åœ¨ &lt;code&gt;HAVING&lt;/code&gt;å­å¥ä¸­å¼•ç”¨äº†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
library_books.book_id,
title,
author,
genre,
publication_year,
COUNT(*) AS current_borrowers
FROM
library_books
JOIN
borrowing_records ON library_books.book_id = borrowing_records.book_id
AND borrowing_records.return_date IS NULL
GROUP BY
library_books.book_id,
title,
author,
genre,
publication_year,
library_books.total_copies -- å°† total_copies æ·»åŠ åˆ° GROUP BY ä¸­
HAVING
library_books.total_copies = library_books.total_copies -- ç°åœ¨å¯ä»¥å¼•ç”¨äº†
ORDER BY
current_borrowers DESC,
title;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æ–¹æ¡ˆäºŒåœ¨-havingå­å¥ä¸­ä½¿ç”¨èšåˆå‡½æ•°"&gt;æ–¹æ¡ˆäºŒï¼šåœ¨ &lt;code&gt;HAVING&lt;/code&gt;å­å¥ä¸­ä½¿ç”¨èšåˆå‡½æ•°
&lt;/h4&gt;&lt;p&gt;å¦‚æœä½ éœ€è¦å¯¹ &lt;code&gt;total_copies&lt;/code&gt;è¿›è¡ŒæŸç§èšåˆåˆ¤æ–­ï¼ˆè™½ç„¶ä»ä½ çš„æ¡ä»¶çœ‹ä¼¼ä¹åªæ˜¯ç›¸ç­‰åˆ¤æ–­ï¼Œå¯èƒ½æ— éœ€èšåˆï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;MAX&lt;/code&gt;æˆ– &lt;code&gt;MIN&lt;/code&gt;ï¼ˆå› ä¸ºåŒä¸€æœ¬ä¹¦çš„ &lt;code&gt;total_copies&lt;/code&gt;åº”è¯¥ç›¸åŒï¼Œæ‰€ä»¥ &lt;code&gt;MAX(total_copies)&lt;/code&gt;å°±æ˜¯å®ƒçš„å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
library_books.book_id,
title,
author,
genre,
publication_year,
COUNT(*) AS current_borrowers
FROM
library_books
JOIN
borrowing_records ON library_books.book_id = borrowing_records.book_id
AND borrowing_records.return_date IS NULL
GROUP BY
library_books.book_id
HAVING
MAX(library_books.total_copies) = MAX(library_books.total_copies) -- ä½¿ç”¨èšåˆå‡½æ•°
ORDER BY
current_borrowers DESC,
title;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…³äºä½ çš„-having-æ¡ä»¶"&gt;ğŸ’¡ å…³äºä½ çš„ HAVING æ¡ä»¶
&lt;/h3&gt;&lt;p&gt;ä½ å½“å‰çš„ &lt;code&gt;HAVING&lt;/code&gt;æ¡ä»¶æ˜¯ &lt;code&gt;library_books.total_copies = library_books.total_copies&lt;/code&gt;ã€‚è¿™ä¸ªæ¡ä»¶&lt;strong&gt;æ°¸è¿œä¸ºçœŸ&lt;/strong&gt;ï¼Œä¸ä¼šèµ·åˆ°ä»»ä½•è¿‡æ»¤ä½œç”¨ã€‚å¦‚æœä½ åªæ˜¯æƒ³æµ‹è¯•è¯­æ³•ï¼Œè¿™æ ·åšæ²¡é—®é¢˜ã€‚ä½†å¦‚æœä½ æœ‰å®é™…çš„è¿‡æ»¤éœ€æ±‚ï¼Œæ¯”å¦‚æƒ³æ‰¾å‡ºå½“å‰å€Ÿé˜…æ•°ç­‰äºæ€»å‰¯æœ¬æ•°çš„ä¹¦ï¼ˆè¡¨ç¤ºæ‰€æœ‰å‰¯æœ¬éƒ½å·²å€Ÿå‡ºï¼‰ï¼Œä½ åº”è¯¥è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;HAVING
COUNT(*) = MAX(library_books.total_copies)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸æé†’-1"&gt;ğŸ“Œ æ€»ç»“ä¸æé†’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰¢è®°è§„åˆ™&lt;/strong&gt;ï¼š&lt;code&gt;HAVING&lt;/code&gt;å­å¥ä¸­åªèƒ½ä½¿ç”¨ &lt;code&gt;GROUP BY&lt;/code&gt;åçš„åˆ—æˆ–èšåˆå‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ WHERE&lt;/strong&gt;ï¼šå°½å¯èƒ½åœ¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­è¿‡æ»¤æ‰ä¸éœ€è¦çš„è¡Œï¼Œè¿™å¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œå› ä¸ºå®ƒåœ¨åˆ†ç»„å‰å°±å‡å°‘äº†éœ€è¦å¤„ç†çš„æ•°æ®é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥æ¡ä»¶é€»è¾‘&lt;/strong&gt;ï¼šç¡®ä¿ä½ çš„ &lt;code&gt;HAVING&lt;/code&gt;æ¡ä»¶ç¡®å®èƒ½è¡¨è¾¾ä½ æƒ³è¦çš„è¿‡æ»¤æ„å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®ä½ è§£å†³é—®é¢˜å¹¶æ›´å¥½åœ°ç†è§£ &lt;code&gt;HAVING&lt;/code&gt;å­å¥çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id="count--condition"&gt;Count() &amp;amp; condition
&lt;/h2&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;COUNT()&lt;/code&gt;å‡½æ•°æœ¬èº«ä¸ç›´æ¥æ¥å—æ¡ä»¶ä½œä¸ºå‚æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ä¸€äº›æŠ€å·§æ¥å®ç°æŒ‰æ¡ä»¶è®¡æ•°ã€‚ä¸‹é¢æ˜¯å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;COUNT() + CASE WHEN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT COUNT(CASE WHEN condition THEN 1 END) FROM table_name;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨è&lt;/strong&gt;ã€‚çµæ´»ï¼Œå¯åŒæ—¶å¤„ç†å¤šä¸ªæ¡ä»¶ï¼Œå¯è¯»æ€§å¥½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;COUNT() + IF()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT COUNT(IF(condition, 1, NULL)) FROM table_name;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;CASE WHEN&lt;/code&gt;ç±»ä¼¼ï¼Œä½†å¯èƒ½æ›´ç®€æ´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SUM() + CASE WHEN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT SUM(CASE WHEN condition THEN 1 ELSE 0 END) FROM table_name;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ•ˆæœä¸ &lt;code&gt;COUNT&lt;/code&gt;ç›¸åŒï¼Œä½†ä½¿ç”¨ &lt;code&gt;SUM&lt;/code&gt;è¿›è¡Œç´¯åŠ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;WHERE å­å¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT COUNT(*) FROM table_name WHERE condition;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç®€å•ç›´æ¥&lt;/strong&gt;ã€‚ä»…éœ€ç»Ÿè®¡&lt;strong&gt;å•ä¸€æ¡ä»¶&lt;/strong&gt;æ—¶ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦ç»†è¯´æ˜ä¸ç¤ºä¾‹"&gt;ğŸ’¡ è¯¦ç»†è¯´æ˜ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="1-ä½¿ç”¨-countcase-when-æ¨è"&gt;1. ä½¿ç”¨ &lt;code&gt;COUNT(CASE WHEN ...)&lt;/code&gt;(&lt;strong&gt;æ¨è&lt;/strong&gt;)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€é€šç”¨å’Œæ¸…æ™°çš„æ–¹æ³•ã€‚&lt;code&gt;CASE&lt;/code&gt;è¯­å¥ç”¨äºå¯¹æ¯ä¸€è¡Œè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼šæ»¡è¶³æ¡ä»¶æ—¶è¿”å› &lt;code&gt;1&lt;/code&gt;ï¼Œå¦åˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;code&gt;COUNT&lt;/code&gt;å‡½æ•°ä¼šå¿½ç•¥ &lt;code&gt;NULL&lt;/code&gt;ï¼Œä»è€Œåªå¯¹æ»¡è¶³æ¡ä»¶çš„è¡Œè¿›è¡Œè®¡æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç»Ÿè®¡æ‰€æœ‰å¹´é¾„å¤§äº18å²çš„ç”¨æˆ·æ•°é‡
SELECT COUNT(CASE WHEN age &amp;gt; 18 THEN 1 END) AS adult_count FROM users;
-- åœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­åŒæ—¶ç»Ÿè®¡å¤šä¸ªæ¡ä»¶
SELECT
COUNT(CASE WHEN age &amp;gt; 18 THEN 1 END) AS adult_count,
COUNT(CASE WHEN gender = &amp;#39;F&amp;#39; THEN 1 END) AS female_count
FROM users;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-ä½¿ç”¨-countif"&gt;2. ä½¿ç”¨ &lt;code&gt;COUNT(IF(...))&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;IF&lt;/code&gt;å‡½æ•°æ˜¯ &lt;code&gt;CASE WHEN&lt;/code&gt;çš„ç®€å†™å½¢å¼ï¼Œé€»è¾‘å®Œå…¨ç›¸åŒï¼šæ¡ä»¶ä¸ºçœŸè¿”å› &lt;code&gt;1&lt;/code&gt;ï¼Œä¸ºå‡è¿”å› &lt;code&gt;NULL&lt;/code&gt;ï¼ˆ&lt;code&gt;COUNT&lt;/code&gt;ä¼šå¿½ç•¥ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç»Ÿè®¡çŠ¶æ€ä¸º &amp;#39;active&amp;#39; çš„ç”¨æˆ·æ•°é‡
SELECT COUNT(IF(status = &amp;#39;active&amp;#39;, 1, NULL)) AS active_users FROM users;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-ä½¿ç”¨-sumcase-when-"&gt;3. ä½¿ç”¨ &lt;code&gt;SUM(CASE WHEN ...)&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;å…¶é€»è¾‘æ˜¯ï¼šæ»¡è¶³æ¡ä»¶æ—¶è¿”å› &lt;code&gt;1&lt;/code&gt;ï¼Œå¦åˆ™è¿”å› &lt;code&gt;0&lt;/code&gt;ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;SUM&lt;/code&gt;å‡½æ•°å°†æ‰€æœ‰ &lt;code&gt;1&lt;/code&gt;åŠ æ€»ï¼Œå¾—åˆ°çš„ç»“æœä¸ &lt;code&gt;COUNT&lt;/code&gt;ç›¸åŒã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨SUMå®ç°æ¡ä»¶è®¡æ•°
SELECT SUM(CASE WHEN score &amp;gt;= 60 THEN 1 ELSE 0 END) AS pass_count FROM exams;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="4-ä½¿ç”¨-whereå­å¥"&gt;4. ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥
&lt;/h4&gt;&lt;p&gt;å¦‚æœåªæ˜¯ç®€å•åœ°ç»Ÿè®¡æ•´ä¸ªè¡¨ä¸­æ»¡è¶³&lt;strong&gt;æŸä¸€ä¸ªæ¡ä»¶&lt;/strong&gt;çš„è¡Œæ•°ï¼Œç›´æ¥åœ¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­è¿‡æ»¤ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;COUNT(*)&lt;/code&gt;æ˜¯æœ€ç®€å•æ˜äº†çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç»Ÿè®¡æ‰€æœ‰å¹´é¾„å¤§äº18å²çš„ç”¨æˆ·æ•°é‡
SELECT COUNT(*) FROM users WHERE age &amp;gt; 18;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„è¦ç‚¹"&gt;âš ï¸ æ³¨æ„è¦ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;COUNT(column)&lt;/code&gt;ä¸ &lt;code&gt;COUNT(\*)&lt;/code&gt;çš„åŒºåˆ«&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;COUNT(column)&lt;/code&gt;ç»Ÿè®¡çš„æ˜¯è¯¥åˆ—&lt;strong&gt;é NULL å€¼&lt;/strong&gt;çš„æ•°é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;COUNT(*)&lt;/code&gt;ç»Ÿè®¡çš„æ˜¯è¡¨ä¸­çš„&lt;strong&gt;æ€»è¡Œæ•°&lt;/strong&gt;ï¼Œä¸ç®¡åˆ—å€¼æ˜¯å¦ä¸º NULLã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¡ä»¶è®¡æ•°ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸åˆ©ç”¨ &lt;code&gt;COUNT&lt;/code&gt;ä¼šå¿½ç•¥ &lt;code&gt;NULL&lt;/code&gt;çš„ç‰¹æ€§ï¼Œè®©ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œè¿”å› &lt;code&gt;NULL&lt;/code&gt;ä»è€Œå®ç°è¿‡æ»¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ&lt;code&gt;COUNT(CASE WHEN...)&lt;/code&gt;å’Œ &lt;code&gt;COUNT(IF(...))&lt;/code&gt;çš„æ€§èƒ½æ˜¯ç›¸ä¼¼çš„ã€‚ä½†å¦‚æœè¦é’ˆå¯¹å•ä¸€æ¡ä»¶è®¡æ•°ï¼Œä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥é€šå¸¸æ˜¯æœ€å¿«çš„ï¼Œå› ä¸ºå®ƒèƒ½åœ¨è®¡æ•°å‰å°±è¿‡æ»¤æ‰å¤§é‡ä¸éœ€è¦çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-14"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;COUNT()&lt;/code&gt;å‡½æ•°ä¸èƒ½ç›´æ¥ä¼ å…¥æ¡ä»¶å‚æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;CASE WHEN&lt;/code&gt;æˆ– &lt;code&gt;IF&lt;/code&gt;è¡¨è¾¾å¼ inside the &lt;code&gt;COUNT()&lt;/code&gt;æ¥å®ç°æ¡ä»¶è®¡æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;ç®€å•å•ä¸€&lt;/strong&gt;çš„æ¡ä»¶è®¡æ•°ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ + &lt;code&gt;COUNT(*)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºéœ€è¦åœ¨&lt;strong&gt;ä¸€ä¸ªæŸ¥è¯¢ä¸­ç»Ÿè®¡å¤šä¸ªä¸åŒæ¡ä»¶&lt;/strong&gt;çš„æƒ…å†µï¼Œ&lt;strong&gt;&lt;code&gt;COUNT(CASE WHEN ... END)&lt;/code&gt;&lt;/strong&gt; æ˜¯æœ€çµæ´»ã€å¯è¯»æ€§æœ€å¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åœ¨ MySQL ä¸­å®ç°æ¡ä»¶è®¡æ•°ã€‚&lt;/p&gt;
&lt;h2 id="offset"&gt;OFFSET
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;OFFSET&lt;/code&gt;å…³é”®å­—ä¸»è¦ç”¨äº&lt;strong&gt;æ§åˆ¶æŸ¥è¯¢ç»“æœé›†çš„èµ·å§‹è¿”å›ä½ç½®&lt;/strong&gt;ï¼Œå®ƒé€šå¸¸ä¸ &lt;code&gt;LIMIT&lt;/code&gt;å­å¥æ­æ¡£ï¼Œæ˜¯å®ç°åˆ†é¡µæŸ¥è¯¢çš„æ ¸å¿ƒå·¥å…·ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒçš„ç”¨æ³•ã€æ³¨æ„äº‹é¡¹ä»¥åŠå¦‚ä½•ä¼˜åŒ–å…¶æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€offset-å’Œ-limit-åŸºç¡€"&gt;ğŸ“Œ ä¸€ã€OFFSET å’Œ LIMIT åŸºç¡€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;OFFSET&lt;/code&gt;å’Œ &lt;code&gt;LIMIT&lt;/code&gt;å­å¥é€šå¸¸ä¸€èµ·ä½¿ç”¨ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column1, column2, ...
FROM table_name
LIMIT number_of_rows OFFSET start_position;
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LIMIT&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®š&lt;strong&gt;è¦è¿”å›çš„æœ€å¤§è®°å½•è¡Œæ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;OFFSET&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®š&lt;strong&gt;è¦è·³è¿‡çš„è¡Œæ•°&lt;/strong&gt;ï¼Œå³ä»ç»“æœé›†çš„ç¬¬å‡ è¡Œå¼€å§‹è¿”å›æ•°æ®ã€‚&lt;strong&gt;&lt;code&gt;OFFSET&lt;/code&gt;æ˜¯ä» 0 å¼€å§‹è®¡æ•°çš„&lt;/strong&gt;ï¼Œè¿™æ„å‘³ç€ &lt;code&gt;OFFSET 0&lt;/code&gt;è¡¨ç¤ºä»ç¬¬ä¸€è¡Œå¼€å§‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MySQL ä¹Ÿæ”¯æŒä¸€ç§ç®€å†™å½¢å¼ï¼š&lt;code&gt;LIMIT offset, row_count&lt;/code&gt;ï¼Œå…¶ç­‰ä»·äº &lt;code&gt;LIMIT row_count OFFSET offset&lt;/code&gt;ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;LIMIT 10, 5&lt;/code&gt;è¡¨ç¤ºè·³è¿‡å‰10æ¡è®°å½•ï¼Œè¿”å›æ¥ä¸‹æ¥çš„5æ¡è®°å½•ã€‚&lt;/p&gt;
&lt;h3 id="-äºŒoffset-åœ¨åˆ†é¡µæŸ¥è¯¢ä¸­çš„åº”ç”¨"&gt;ğŸ“Š äºŒã€OFFSET åœ¨åˆ†é¡µæŸ¥è¯¢ä¸­çš„åº”ç”¨
&lt;/h3&gt;&lt;p&gt;åˆ†é¡µæŸ¥è¯¢æ˜¯ &lt;code&gt;OFFSET&lt;/code&gt;æœ€ç»å…¸çš„åº”ç”¨åœºæ™¯ã€‚å…¶æ ¸å¿ƒæ€è·¯æ˜¯æ ¹æ®å½“å‰é¡µç å’Œæ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°æ¥è®¡ç®— &lt;code&gt;OFFSET&lt;/code&gt;çš„å€¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é¡µç  (pageIndex)&lt;/th&gt;
&lt;th&gt;æ¯é¡µè®°å½•æ•° (pageSize)&lt;/th&gt;
&lt;th&gt;OFFSET è®¡ç®—å…¬å¼ (pageSize * (pageIndex - 1))&lt;/th&gt;
&lt;th&gt;LIMIT (pageSize)&lt;/th&gt;
&lt;th&gt;å®é™…å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;10 * (1-1) = &lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;ä»ç¬¬1æ¡å¼€å§‹ï¼Œå–10æ¡è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;10 * (2-1) = &lt;strong&gt;10&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;ä»ç¬¬11æ¡å¼€å§‹ï¼Œå–10æ¡è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;10 * (3-1) = &lt;strong&gt;20&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;ä»ç¬¬21æ¡å¼€å§‹ï¼Œå–10æ¡è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œè¦æŸ¥è¯¢ &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ç¬¬3é¡µçš„æ•°æ®ï¼ˆå‡è®¾æ¯é¡µ10æ¡è®°å½•ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users LIMIT 10 OFFSET 20;
-- æˆ–è€…ä½¿ç”¨ç®€å†™å½¢å¼
SELECT * FROM users LIMIT 20, 10;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥ä¼šè·³è¿‡å‰20æ¡è®°å½•ï¼Œè¿”å›ä»ç¬¬21æ¡è®°å½•å¼€å§‹çš„10æ¡è®°å½•ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸‰æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜"&gt;âš ï¸ ä¸‰ã€æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½é—®é¢˜&lt;/strong&gt;ï¼šè¿™æ˜¯ä½¿ç”¨ &lt;code&gt;OFFSET&lt;/code&gt;æ—¶æœ€éœ€è¦è­¦æƒ•çš„ä¸€ç‚¹ã€‚&lt;strong&gt;å½“ &lt;code&gt;OFFSET&lt;/code&gt;å€¼éå¸¸å¤§æ—¶ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™&lt;/strong&gt;ã€‚å› ä¸ºæ•°æ®åº“éœ€è¦å…ˆæ‰«æå¹¶è·³è¿‡ &lt;code&gt;OFFSET&lt;/code&gt;æŒ‡å®šçš„è¡Œæ•°ï¼Œç„¶åæ‰èƒ½è¿”å›æ‰€éœ€çš„è®°å½•ã€‚å¯¹äºæµ·é‡æ•°æ®çš„åˆ†é¡µï¼Œè¿™å¯èƒ½æˆä¸ºä¸€ä¸ªç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå¦‚æœæ•°æ®æºåœ¨åˆ†é¡µæŸ¥è¯¢è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å˜åŒ–ï¼ˆå¦‚æ–°å¢æˆ–åˆ é™¤äº†è®°å½•ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;OFFSET&lt;/code&gt;å¯èƒ½ä¼šå¯¼è‡´&lt;strong&gt;æ•°æ®é‡å¤æˆ–ä¸¢å¤±&lt;/strong&gt;ï¼ˆä¾‹å¦‚æŸä¸€è®°å½•åŒæ—¶å‡ºç°åœ¨ä¸¤é¡µä¸­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;ORDER BY&lt;/code&gt;æ­é…ä½¿ç”¨&lt;/strong&gt;ï¼š&lt;strong&gt;å¼ºçƒˆå»ºè®®&lt;/strong&gt;åœ¨ä½¿ç”¨ &lt;code&gt;LIMIT&lt;/code&gt;å’Œ &lt;code&gt;OFFSET&lt;/code&gt;æ—¶ï¼Œä¸€å®šè¦ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥ç¡®ä¿ç»“æœçš„é¡ºåºæ˜¯ç¡®å®šä¸”å¯é¢„æœŸçš„ã€‚å¦åˆ™ï¼Œæ¯æ¬¡æŸ¥è¯¢è¿”å›çš„é¡ºåºå¯èƒ½ä¸ä¸€è‡´ï¼Œå¯¼è‡´åˆ†é¡µæ··ä¹±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶…å‡ºè®°å½•æ•°&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;OFFSET&lt;/code&gt;çš„å€¼è¶…å‡ºäº†æŸ¥è¯¢çš„è®°å½•æ€»æ•°ï¼ŒMySQL ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ç»“æœé›†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å››æ€§èƒ½ä¼˜åŒ–ç­–ç•¥"&gt;ğŸš€ å››ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;é’ˆå¯¹ &lt;code&gt;OFFSET&lt;/code&gt;åœ¨å¤§æ•°æ®é‡ä¸‹çš„æ€§èƒ½ç“¶é¢ˆï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢&lt;/strong&gt;ï¼šç¡®ä¿ &lt;code&gt;ORDER BY&lt;/code&gt;å’Œ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­ä½¿ç”¨çš„å­—æ®µä¸Šæœ‰åˆé€‚çš„ç´¢å¼•ï¼Œè¿™å¯ä»¥å¤§å¤§æé«˜åˆ†é¡µæŸ¥è¯¢çš„é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”®é›†åˆ†é¡µï¼ˆKeyset Paginationï¼‰&lt;/strong&gt;ï¼šä¹Ÿç§°ä¸ºâ€œæ¸¸æ ‡åˆ†é¡µâ€ï¼Œè¿™æ˜¯ä¸€ç§æ›´é«˜æ•ˆçš„åˆ†é¡µæ–¹æ³•ã€‚å®ƒä¸ä¾èµ–äº &lt;code&gt;OFFSET&lt;/code&gt;ï¼Œè€Œæ˜¯åˆ©ç”¨ä¸Šä¸€é¡µæœ€åä¸€æ¡è®°å½•çš„æŸä¸ªå”¯ä¸€ä¸”æœ‰åºçš„å­—æ®µï¼ˆå¦‚è‡ªå¢ä¸»é”® &lt;code&gt;id&lt;/code&gt;ã€æ—¶é—´æˆ³ï¼‰ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä¼ ç»Ÿ OFFSET åˆ†é¡µï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰
SELECT * FROM orders ORDER BY id LIMIT 10 OFFSET 10000; -- éœ€è¦è·³è¿‡å‰10000è¡Œ
-- é”®é›†åˆ†é¡µï¼ˆæ€§èƒ½æ›´å¥½ï¼‰
SELECT * FROM orders
WHERE id &amp;gt; (SELECT id FROM orders ORDER BY id LIMIT 1 OFFSET 10000) -- å­æŸ¥è¯¢å¿«é€Ÿå®šä½åˆ°èµ·å§‹id
ORDER BY id
LIMIT 10;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æ–¹æ³•çš„åŸç†æ˜¯ï¼Œé€šè¿‡ä¸€ä¸ªå­æŸ¥è¯¢å…ˆå¿«é€Ÿå®šä½åˆ°èµ·å§‹ç‚¹çš„ &lt;code&gt;id&lt;/code&gt;ï¼Œç„¶åé€šè¿‡ &lt;code&gt;WHERE id &amp;gt; last_seen_id&lt;/code&gt;æ¥ç­›é€‰æ•°æ®ï¼Œé¿å…äº†æ‰«æå’Œè·³è¿‡å¤§é‡æ— å…³çš„è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-äº”å…¶ä»–åº”ç”¨åœºæ™¯ç¤ºä¾‹"&gt;ğŸ’¡ äº”ã€å…¶ä»–åº”ç”¨åœºæ™¯ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;é™¤äº†åˆ†é¡µï¼Œ&lt;code&gt;OFFSET&lt;/code&gt;è¿˜æœ‰ä¸€äº›å·§å¦™çš„ç”¨æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–ç¬¬Né«˜çš„è®°å½•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥è¯¢å‘˜å·¥è¡¨ä¸­ç¬¬äºŒé«˜çš„è–ªæ°´
SELECT DISTINCT salary FROM employees
ORDER BY salary DESC
LIMIT 1 OFFSET 1;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšæœºæŠ½æ ·&lt;/strong&gt;ï¼ˆé…åˆ &lt;code&gt;ORDER BY RAND()&lt;/code&gt;ï¼Œæ³¨æ„æ€§èƒ½ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- éšæœºæŠ½å–5æ¡è®°å½•
SELECT * FROM products ORDER BY RAND() LIMIT 5;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-15"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;OFFSET&lt;/code&gt;æ˜¯ MySQL ä¸­å®ç°åˆ†é¡µæŸ¥è¯¢çš„ä¸€ä¸ªç®€å•ç›´æ¥çš„å·¥å…·ï¼Œä½†åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„å…¶æ€§èƒ½å¼€é”€ã€‚&lt;strong&gt;å¯¹äºå¤§å¤šæ•°ä¸­å°å‹æ•°æ®é‡çš„åˆ†é¡µéœ€æ±‚ï¼Œ&lt;code&gt;OFFSET&lt;/code&gt;å®Œå…¨èƒ½å¤Ÿèƒœä»»&lt;/strong&gt;ã€‚ç„¶è€Œï¼Œä¸€æ—¦é‡åˆ°æ·±åº¦åˆ†é¡µï¼ˆå³ &lt;code&gt;OFFSET&lt;/code&gt;å€¼éå¸¸å¤§ï¼‰å¯¼è‡´æ€§èƒ½ä¸‹é™æ—¶ï¼Œ&lt;strong&gt;é”®é›†åˆ†é¡µï¼ˆåŸºäºæ¸¸æ ‡çš„åˆ†é¡µï¼‰æ˜¯é¦–é€‰çš„ä¼˜åŒ–æ–¹æ¡ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è®°ä½ï¼Œ&lt;strong&gt;æ€»æ˜¯ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;æ¥ä¿è¯åˆ†é¡µé¡ºåºçš„ç¡®å®šæ€§&lt;/strong&gt;ï¼Œå¹¶æ ¹æ®å®é™…çš„æ•°æ®é‡å’Œå¹¶å‘æƒ…å†µï¼Œé€‰æ‹©æœ€é€‚åˆçš„åˆ†é¡µç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„ &lt;code&gt;OFFSET&lt;/code&gt;ï¼&lt;/p&gt;
&lt;h2 id="çª—å£å‡½æ•°"&gt;çª—å£å‡½æ•°
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„çª—å£å‡½æ•°æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„æ•°æ®åˆ†æå·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸æ”¹å˜æŸ¥è¯¢ç»“æœé›†è¡Œæ•°çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸€ç»„ç›¸å…³çš„è¡Œï¼ˆç§°ä¸ºâ€œçª—å£â€ï¼‰æ‰§è¡Œè®¡ç®—ï¼Œå¹¶ä¸ºæ¯ä¸€è¡Œè¿”å›ä¸€ä¸ªåŸºäºå…¶æ‰€åœ¨çª—å£çš„è®¡ç®—ç»“æœã€‚è¿™ä¸ä¼ ç»Ÿçš„ &lt;code&gt;GROUP BY&lt;/code&gt;èšåˆä¸åŒï¼Œçª—å£å‡½æ•°ä¼š&lt;strong&gt;ä¿ç•™æ‰€æœ‰åŸå§‹è¡Œ&lt;/strong&gt;çš„ç»†èŠ‚ï¼ŒåŒæ—¶è¿˜èƒ½æä¾›èšåˆæˆ–æ’åºåçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼Œå¸®åŠ©ä½ å¿«é€Ÿç†è§£çª—å£å‡½æ•°ä¸æ™®é€šèšåˆå‡½æ•°çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;çª—å£å‡½æ•°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ™®é€šèšåˆå‡½æ•° + GROUP BY&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿æŒä¸åŸè¡¨ç›¸åŒ&lt;/td&gt;
&lt;td&gt;åˆå¹¶ä¸ºåˆ†ç»„åçš„è¡Œæ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¡ç®—æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºå®šä¹‰çš„â€œçª—å£â€è®¡ç®—ï¼Œä¸ºæ¯è¡Œè¿”å›ç»“æœ&lt;/td&gt;
&lt;td&gt;åŸºäºåˆ†ç»„è®¡ç®—ï¼Œæ¯ç»„è¿”å›ä¸€ä¸ªç»“æœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’åã€ç´¯è®¡å€¼ã€ç§»åŠ¨å¹³å‡ã€å‰åè¡Œæ¯”è¾ƒç­‰&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡æ€»æ•°ã€å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•å…³é”®è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;OVER()&lt;/code&gt;å­å¥&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP BY&lt;/code&gt;å­å¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-çª—å£å‡½æ•°æ ¸å¿ƒè¯­æ³•"&gt;ğŸ” çª—å£å‡½æ•°æ ¸å¿ƒè¯­æ³•
&lt;/h3&gt;&lt;p&gt;çª—å£å‡½æ•°çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;çª—å£å‡½æ•°&amp;gt;(&amp;lt;å‚æ•°&amp;gt;) OVER (
[PARTITION BY &amp;lt;åˆ†åŒºå­—æ®µ&amp;gt;]
[ORDER BY &amp;lt;æ’åºå­—æ®µ&amp;gt;]
[ROWS/RANGE &amp;lt;çª—å£æ¡†æ¶&amp;gt;]
)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;çª—å£å‡½æ•°&amp;gt;(&amp;lt;å‚æ•°&amp;gt;)&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„çª—å£å‡½æ•°ï¼Œä¾‹å¦‚ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;, &lt;code&gt;SUM(salary)&lt;/code&gt;, &lt;code&gt;LAG(column)&lt;/code&gt;ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;OVER()&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯çª—å£å‡½æ•°çš„æ ‡å¿—æ€§å…³é”®å­—ï¼Œæ‰€æœ‰çª—å£å‡½æ•°éƒ½å¿…é¡»ä½¿ç”¨æ­¤å­å¥æ¥å®šä¹‰çª—å£çš„èŒƒå›´å’Œè¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰ã€‚ç”¨äºå°†æ•°æ®è¡Œåˆ’åˆ†ä¸ºä¸åŒçš„åˆ†åŒºï¼ˆç±»ä¼¼äº &lt;code&gt;GROUP BY&lt;/code&gt;çš„åˆ†ç»„ï¼Œä½†ä¸ä¼šåˆå¹¶è¡Œï¼‰ï¼Œçª—å£å‡½æ•°ä¼šåœ¨&lt;strong&gt;æ¯ä¸ªåˆ†åŒºå†…ç‹¬ç«‹æ‰§è¡Œ&lt;/strong&gt;è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰ã€‚ç”¨äºæŒ‡å®šåˆ†åŒºå†…æ•°æ®çš„&lt;strong&gt;æ’åºé¡ºåº&lt;/strong&gt;ï¼Œè¿™ä¼šå½±å“åºå·åˆ†é…ã€ç´¯è®¡è®¡ç®—å’Œæ»‘åŠ¨çª—å£çš„èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çª—å£æ¡†æ¶ï¼ˆ&lt;code&gt;ROWS/RANGE&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šå¯é€‰ã€‚ç”¨äºå®šä¹‰è®¡ç®—çª—å£å‡½æ•°æ—¶è€ƒè™‘çš„è¡Œçš„&lt;strong&gt;ç²¾ç¡®èŒƒå›´&lt;/strong&gt;ï¼Œä¾‹å¦‚â€œä»å½“å‰è¡Œä¹‹å‰çš„2è¡Œåˆ°å½“å‰è¡Œâ€ã€‚è¿™æ˜¯çª—å£å‡½æ•°å¼ºå¤§å’Œçµæ´»çš„å…³é”®æ‰€åœ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;çª—å£æ¡†æ¶å¸¸ç”¨é€‰é¡¹ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW&lt;/code&gt;ï¼šä»åˆ†åŒº&lt;strong&gt;ç¬¬ä¸€è¡Œåˆ°å½“å‰è¡Œ&lt;/strong&gt;ï¼ˆé»˜è®¤çª—å£èŒƒå›´ï¼Œå¸¸ç”¨äºç´¯è®¡è®¡ç®—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ROWS BETWEEN 2 PRECEDING AND CURRENT ROW&lt;/code&gt;ï¼šä»&lt;strong&gt;å½“å‰è¡ŒåŠå‰2è¡Œ&lt;/strong&gt;ï¼ˆå…±3è¡Œï¼Œå¸¸ç”¨äºç§»åŠ¨å¹³å‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING&lt;/code&gt;ï¼šä»&lt;strong&gt;å‰ä¸€è¡Œåˆ°åä¸€è¡Œ&lt;/strong&gt;ï¼ˆå…±3è¡Œï¼Œæ»‘åŠ¨çª—å£ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RANGE BETWEEN INTERVAL 1 DAY PRECEDING AND CURRENT ROW&lt;/code&gt;ï¼šåŸºäºåˆ—å€¼ï¼ˆå¦‚æ—¥æœŸï¼‰çš„é€»è¾‘èŒƒå›´ï¼ŒåŒ…å«ä¸å½“å‰è¡Œå€¼ç›¸å·®åœ¨1å¤©å†…çš„æ‰€æœ‰è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¸¸ç”¨çª—å£å‡½æ•°åˆ†ç±»ä¸ç¤ºä¾‹"&gt;ğŸ“Š å¸¸ç”¨çª—å£å‡½æ•°åˆ†ç±»ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;çª—å£å‡½æ•°å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;h4 id="1-æ’åºå‡½æ•°"&gt;1. æ’åºå‡½æ•°
&lt;/h4&gt;&lt;p&gt;ä¸ºæ¯ä¸€è¡Œåˆ†é…ä¸€ä¸ªåºå·æˆ–æ’åã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ROW_NUMBER()&lt;/code&gt;&lt;/strong&gt;ï¼šä¸ºæ¯ä¸€è¡Œåˆ†é…ä¸€ä¸ª&lt;strong&gt;å”¯ä¸€çš„è¿ç»­åºå·&lt;/strong&gt;ï¼ˆå³ä½¿å€¼ç›¸åŒï¼Œåºå·ä¹Ÿä¸åŒï¼‰ï¼Œä¾‹å¦‚ &lt;code&gt;1, 2, 3, 4,...&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;RANK()&lt;/code&gt;&lt;/strong&gt;ï¼šä¸ºæ¯ä¸€è¡Œåˆ†é…æ’åï¼Œ&lt;strong&gt;ç›¸åŒå€¼è·å¾—ç›¸åŒæ’åï¼Œå¹¶ä¸”ä¼šè·³è¿‡åç»­çš„æ’ååºå·&lt;/strong&gt;ï¼Œä¾‹å¦‚ &lt;code&gt;1, 2, 2, 4,...&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;DENSE_RANK()&lt;/code&gt;&lt;/strong&gt;ï¼šä¸ºæ¯ä¸€è¡Œåˆ†é…æ’åï¼Œç›¸åŒå€¼è·å¾—ç›¸åŒæ’åï¼Œä½†&lt;strong&gt;åç»­æ’ååºå·æ˜¯è¿ç»­çš„&lt;/strong&gt;ï¼Œä¸ä¼šè·³è¿‡ï¼Œä¾‹å¦‚ &lt;code&gt;1, 2, 2, 3,...&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¤ºä¾‹ï¼šè®¡ç®—å‘˜å·¥åœ¨éƒ¨é—¨å†…çš„è–ªèµ„æ’å
SELECT
department,
name,
salary,
ROW_NUMBER() OVER (PARTITION BY department ORDER BY salary DESC) AS row_num,
RANK() OVER (PARTITION BY department ORDER BY salary DESC) AS rank_num,
DENSE_RANK() OVER (PARTITION BY department ORDER BY salary DESC) AS dense_rank
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-èšåˆå‡½æ•°ç”¨ä½œçª—å£å‡½æ•°"&gt;2. èšåˆå‡½æ•°ï¼ˆç”¨ä½œçª—å£å‡½æ•°ï¼‰
&lt;/h4&gt;&lt;p&gt;å¸¸è§çš„èšåˆå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;AVG&lt;/code&gt;, &lt;code&gt;MAX&lt;/code&gt;, &lt;code&gt;MIN&lt;/code&gt;, &lt;code&gt;COUNT&lt;/code&gt;ï¼‰ä¸ &lt;code&gt;OVER()&lt;/code&gt;å­å¥ç»“åˆåï¼Œå°±å˜æˆäº†çª—å£å‡½æ•°ï¼Œå¯ä»¥åœ¨ä¿ç•™æ‰€æœ‰è¡Œçš„åŒæ—¶è¿›è¡Œèšåˆè®¡ç®—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¤ºä¾‹ï¼šè®¡ç®—æ¯ä½å‘˜å·¥è–ªèµ„åœ¨éƒ¨é—¨å†…çš„å æ¯”å’Œç´¯è®¡è–ªèµ„
SELECT
department,
name,
salary,
SUM(salary) OVER (PARTITION BY department) AS dept_total_salary, -- éƒ¨é—¨æ€»è–ªèµ„
salary / SUM(salary) OVER (PARTITION BY department) * 100 AS salary_percentage, -- è–ªèµ„å æ¯”
SUM(salary) OVER (PARTITION BY department ORDER BY salary DESC ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS cumulative_salary -- éƒ¨é—¨å†…ç´¯è®¡è–ªèµ„
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-åˆ†å¸ƒå‡½æ•°"&gt;3. åˆ†å¸ƒå‡½æ•°
&lt;/h4&gt;&lt;p&gt;ç”¨äºè®¡ç®—å€¼åœ¨çª—å£å†…çš„ç›¸å¯¹ä½ç½®æˆ–åˆ†å¸ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PERCENT_RANK()&lt;/code&gt;&lt;/strong&gt;ï¼šè®¡ç®—è¡Œçš„&lt;strong&gt;ç™¾åˆ†æ¯”æ’å&lt;/strong&gt;ï¼ŒèŒƒå›´æ˜¯[0, 1]ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;CUME_DIST()&lt;/code&gt;&lt;/strong&gt;ï¼šè®¡ç®—è¡Œçš„&lt;strong&gt;ç´¯ç§¯åˆ†å¸ƒ&lt;/strong&gt;ï¼Œå³å€¼å°äºæˆ–ç­‰äºå½“å‰è¡Œå€¼çš„è¡Œæ•°å æ€»è¡Œæ•°çš„æ¯”ä¾‹ï¼ŒèŒƒå›´æ˜¯(0, 1]ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-åç§»å‡½æ•°"&gt;4. åç§»å‡½æ•°
&lt;/h4&gt;&lt;p&gt;è®¿é—®å½“å‰è¡Œä¹‹å‰æˆ–ä¹‹åçš„è¡Œä¸­çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LAG(column, n)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å½“å‰è¡Œ&lt;strong&gt;ä¹‹å‰ç¬¬nè¡Œ&lt;/strong&gt;çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LEAD(column, n)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å½“å‰è¡Œ&lt;strong&gt;ä¹‹åç¬¬nè¡Œ&lt;/strong&gt;çš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¤ºä¾‹ï¼šè®¡ç®—é”€å”®é¢çš„ç¯æ¯”å¢é•¿
SELECT
month,
sales_amount,
LAG(sales_amount, 1) OVER (ORDER BY month) AS prev_month_sales, -- ä¸Šæœˆé”€å”®é¢
(sales_amount - LAG(sales_amount, 1) OVER (ORDER BY month)) / LAG(sales_amount, 1) OVER (ORDER BY month) * 100 AS growth_rate -- ç¯æ¯”å¢é•¿ç‡
FROM sales_data;
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-çª—å£å‡½æ•°çš„åº”ç”¨åœºæ™¯"&gt;ğŸ¯ çª—å£å‡½æ•°çš„åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;çª—å£å‡½æ•°åœ¨è®¸å¤šåœºæ™¯ä¸‹éƒ½éå¸¸æœ‰ç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å…¸å‹çš„åº”ç”¨æ¡ˆä¾‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ’åä¸åˆ†ç»„Top-N&lt;/strong&gt;ï¼šå¦‚è·å–æ¯ä¸ªéƒ¨é—¨è–ªèµ„æœ€é«˜çš„å‘˜å·¥ã€å•†å“é”€é‡æ’åç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¯è®¡è®¡ç®—&lt;/strong&gt;ï¼šå¦‚è®¡ç®—æˆªè‡³å½“æœˆçš„ç´¯è®¡é”€å”®é¢ã€å¹´åº¦ç´¯è®¡é¢„ç®—æ¶ˆè€—ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§»åŠ¨å¹³å‡ä¸æ»‘åŠ¨çª—å£è®¡ç®—&lt;/strong&gt;ï¼šå¦‚è®¡ç®—è‚¡ç¥¨7æ—¥å‡çº¿ã€æœ€è¿‘3ä¸ªæœˆçš„å¹³å‡é”€å”®é¢ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ¯”/ç¯æ¯”åˆ†æ&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;code&gt;LAG&lt;/code&gt;/&lt;code&gt;LEAD&lt;/code&gt;å‡½æ•°è®¡ç®—ä¸ä¸Šæœˆæˆ–å»å¹´åŒæœŸçš„å˜åŒ–ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å·®å¼‚å¯¹æ¯”&lt;/strong&gt;ï¼šå¦‚è®¡ç®—æ¯ä¸ªå‘˜å·¥è–ªèµ„ä¸éƒ¨é—¨å¹³å‡è–ªèµ„çš„å·®å€¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;è™½ç„¶çª—å£åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä¹Ÿéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ˜¯å…³é”®&lt;/strong&gt;ï¼šä¸º &lt;code&gt;PARTITION BY&lt;/code&gt;å’Œ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ä¸­ä½¿ç”¨çš„å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥æ˜¾è‘—æå‡çª—å£å‡½æ•°çš„æ€§èƒ½ã€‚ä¸€ä¸ªè¦†ç›– &lt;code&gt;(PARTITION BYåˆ—, ORDER BYåˆ—)&lt;/code&gt;çš„å¤åˆç´¢å¼•é€šå¸¸æ•ˆæœæœ€å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æ»¤ä¼˜å…ˆ&lt;/strong&gt;ï¼šå°½é‡åœ¨å­æŸ¥è¯¢æˆ– &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­æå‰è¿‡æ»¤æ•°æ®ï¼Œå‡å°‘è¿›å…¥çª—å£è®¡ç®—çš„æ•°æ®é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨èŒƒå›´æ¡†æ¶&lt;/strong&gt;ï¼š&lt;code&gt;RANGE&lt;/code&gt;æ¡†æ¶åŸºäºé€»è¾‘èŒƒå›´ï¼Œåœ¨å¤„ç†é‡å¤å€¼æˆ–èŒƒå›´æŸ¥è¯¢æ—¶å¯èƒ½æ¯” &lt;code&gt;ROWS&lt;/code&gt;ï¼ˆåŸºäºç‰©ç†è¡Œï¼‰æ›´è€—èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è¿‡åº¦ä½¿ç”¨&lt;/strong&gt;ï¼šå•ä¸ªæŸ¥è¯¢ä¸­ä¸å®œä½¿ç”¨è¿‡å¤šçš„çª—å£å‡½æ•°ï¼ˆé€šå¸¸å»ºè®®å°‘äº5ä¸ªï¼‰ï¼Œå¤æ‚çš„çª—å£å¸§å®šä¹‰ä¹Ÿä¼šå¢åŠ è®¡ç®—å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-16"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„çª—å£å‡½æ•°é€šè¿‡ &lt;code&gt;OVER()&lt;/code&gt;å­å¥æä¾›äº†å¼ºå¤§çš„æ•°æ®åˆ†æèƒ½åŠ›ï¼Œå…è®¸ä½ åœ¨ä¿ç•™åŸå§‹è¡Œç»†èŠ‚çš„åŒæ—¶ï¼Œæ‰§è¡Œå¤æ‚çš„æ’åã€èšåˆå’Œè·¨è¡Œè®¡ç®—ã€‚æŒæ¡ &lt;code&gt;PARTITION BY&lt;/code&gt;ã€&lt;code&gt;ORDER BY&lt;/code&gt;å’Œçª—å£æ¡†æ¶ï¼ˆ&lt;code&gt;ROWS/RANGE&lt;/code&gt;ï¼‰çš„ç”¨æ³•ï¼Œæ˜¯çµæ´»è¿ç”¨çª—å£å‡½æ•°çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ ç†è§£å’Œè¿ç”¨ MySQL çª—å£å‡½æ•°ã€‚å¦‚æœ‰æ›´å¤šé—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­è¯¢é—®ï¼&lt;/p&gt;
&lt;h2 id="partition-by"&gt;PARTITION BY
&lt;/h2&gt;&lt;p&gt;äº†è§£ &lt;code&gt;PARTITION BY&lt;/code&gt;ï¼ˆç”¨äºçª—å£å‡½æ•°ï¼‰å’Œ &lt;code&gt;GROUP BY&lt;/code&gt;çš„æ ¸å¿ƒåŒºåˆ«ï¼Œèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¿›è¡Œæ•°æ®åˆ†æå’Œæ±‡æ€»ã€‚å®ƒä»¬è™½ç„¶éƒ½æ¶‰åŠâ€œåˆ†ç»„â€ï¼Œä½†ç›®çš„å’Œç»“æœæˆªç„¶ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;PARTITION BY&lt;/strong&gt; (çª—å£å‡½æ•°)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;èšåˆæ•°æ®&lt;/strong&gt;ï¼Œç”Ÿæˆæ±‡æ€»ç»“æœ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†åŒºè®¡ç®—&lt;/strong&gt;ï¼Œä¿ç•™æ‰€æœ‰åŸå§‹è¡Œå¹¶æ·»åŠ è®¡ç®—ç»“æœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡å°‘&lt;/strong&gt;ï¼ˆæ¯ç»„è¿”å›ä¸€è¡Œï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å˜&lt;/strong&gt;ï¼ˆä¸åŸè¡¨è¡Œæ•°ç›¸åŒï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èšåˆå‡½æ•°ï¼ˆ&lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;AVG&lt;/code&gt;, &lt;code&gt;MAX&lt;/code&gt;, &lt;code&gt;MIN&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;çª—å£å‡½æ•°ï¼ˆ&lt;code&gt;RANK&lt;/code&gt;, &lt;code&gt;ROW_NUMBER&lt;/code&gt;, &lt;code&gt;SUM() OVER&lt;/code&gt;, &lt;code&gt;LAG&lt;/code&gt;, &lt;code&gt;LEAD&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ä¸­çš„ç‹¬ç«‹å­å¥&lt;/td&gt;
&lt;td&gt;ä½äºçª—å£å‡½æ•°çš„ &lt;code&gt;OVER()&lt;/code&gt;å­å¥å†…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡æ±‡æ€»ï¼ˆå¦‚éƒ¨é—¨æ€»äººæ•°ã€å¹³å‡å·¥èµ„ï¼‰&lt;/td&gt;
&lt;td&gt;æ’ååˆ†æã€ç´¯è®¡è®¡ç®—ã€åŒæ¯”ç¯æ¯”ã€ç§»åŠ¨å¹³å‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸è¾“å‡ºç»“æœ"&gt;ğŸ” å·¥ä½œåŸç†ä¸è¾“å‡ºç»“æœ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;&lt;/strong&gt; ä¼šå°†æŒ‡å®šåˆ—ä¸­å€¼ç›¸åŒçš„è¡Œ&lt;strong&gt;å½’å¹¶ä¸ºä¸€è¡Œ&lt;/strong&gt;ã€‚ä½ åªèƒ½æŸ¥è¯¢åˆ†ç»„åˆ—å’Œèšåˆå‡½æ•°çš„ç»“æœï¼ŒåŸå§‹è¡Œçš„ç»†èŠ‚ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- è®¡ç®—æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼ˆç»“æœè¡Œæ•°ç­‰äºéƒ¨é—¨æ•°é‡ï¼‰
SELECT department, AVG(salary) AS avg_salary
FROM employees
GROUP BY department;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;department&lt;/th&gt;
&lt;th&gt;avg_salary&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;è´¢åŠ¡éƒ¨&lt;/td&gt;
&lt;td&gt;1500.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;äººäº‹éƒ¨&lt;/td&gt;
&lt;td&gt;5500.00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/strong&gt; ä¼šå°†æ•°æ®æŒ‰æŒ‡å®šåˆ—åˆ’åˆ†ä¸ºé€»è¾‘åˆ†åŒºï¼Œä½†&lt;strong&gt;ä¸ä¼šå‡å°‘è¡Œæ•°&lt;/strong&gt;ã€‚çª—å£å‡½æ•°ä¼šåœ¨æ¯ä¸ªåˆ†åŒºå†…ç‹¬ç«‹è®¡ç®—ï¼Œç»“æœä½œä¸ºæ–°åˆ—æ·»åŠ åˆ°æ¯ä¸€è¡Œæ—è¾¹ï¼ŒåŸå§‹æ•°æ®å¾—ä»¥ä¿ç•™ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- è®¡ç®—æ¯ä¸ªå‘˜å·¥å·¥èµ„åŠå…¶æ‰€åœ¨éƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼ˆç»“æœè¡Œæ•°ç­‰äºå‘˜å·¥æ•°ï¼‰
SELECT emp_id, department, salary,
AVG(salary) OVER (PARTITION BY department) AS dept_avg_salary
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;emp_id&lt;/th&gt;
&lt;th&gt;department&lt;/th&gt;
&lt;th&gt;salary&lt;/th&gt;
&lt;th&gt;dept_avg_salary&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;è´¢åŠ¡éƒ¨&lt;/td&gt;
&lt;td&gt;1000&lt;/td&gt;
&lt;td&gt;1500.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;è´¢åŠ¡éƒ¨&lt;/td&gt;
&lt;td&gt;2000&lt;/td&gt;
&lt;td&gt;1500.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;äººäº‹éƒ¨&lt;/td&gt;
&lt;td&gt;5500&lt;/td&gt;
&lt;td&gt;5500.00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ’ååˆ†æ (ä½¿ç”¨ &lt;code&gt;PARTITION BY&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨å†…çš„å‘˜å·¥å·¥èµ„æ’åã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT name, department, salary,
RANK() OVER (PARTITION BY department ORDER BY salary DESC) AS dept_rank
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç´¯è®¡è®¡ç®— (ä½¿ç”¨ &lt;code&gt;PARTITION BY&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®¡ç®—æ¯ä¸ªéƒ¨é—¨å†…ï¼ŒæŒ‰å·¥èµ„å‡åºçš„ç´¯è®¡å·¥èµ„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT dept_id, emp_id, salary,
SUM(salary) OVER (PARTITION BY dept_id ORDER BY salary) AS cumulative_salary
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ±‡æ€»ç»Ÿè®¡ (ä½¿ç”¨ &lt;code&gt;GROUP BY&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥æ•°é‡å’Œå¹³å‡å·¥èµ„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT dept_id, COUNT(emp_id) AS employee_count, AVG(salary) AS avg_salary
FROM employees
GROUP BY dept_id;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å¸¸è§è¯¯åŒº"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸å¸¸è§è¯¯åŒº
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯­æ³•é”™è¯¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;æŸ¥è¯¢ä¸­ï¼Œ&lt;code&gt;SELECT&lt;/code&gt;åçš„éèšåˆåˆ—å¿…é¡»å‡ºç°åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çª—å£å‡½æ•°ï¼ˆåŒ…å« &lt;code&gt;PARTITION BY&lt;/code&gt;ï¼‰&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ç›´æ¥åœ¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­ç”¨äºç­›é€‰ã€‚å¿…é¡»å…ˆåœ¨å¤–å±‚å¥—ç”¨å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- é”™è¯¯ï¼šç›´æ¥ç­›é€‰æ’å
SELECT *, RANK() OVER (PARTITION BY dept ORDER BY salary DESC) AS rnk
FROM employees
WHERE rnk &amp;lt;= 3; -- æŠ¥é”™ï¼ŒWHEREæ‰§è¡Œæ—¶rnkåˆ—è¿˜ä¸å­˜åœ¨
-- æ­£ç¡®ï¼šä½¿ç”¨å­æŸ¥è¯¢
SELECT *
FROM (
SELECT *, RANK() OVER (PARTITION BY dept ORDER BY salary DESC) AS rnk
FROM employees
) AS ranked
WHERE rnk &amp;lt;= 3;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½å·®å¼‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GROUP BY&lt;/code&gt;é€šå¸¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ’åºå’Œåˆ†ç»„ï¼Œå¯èƒ½ä¼šç”Ÿæˆä¸´æ—¶è¡¨ï¼Œå¼€é”€è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;é€šå¸¸åªéœ€æ‰«ææ•°æ®å¹¶åˆ’åˆ†çª—å£ï¼Œ&lt;strong&gt;æ€§èƒ½é€šå¸¸ä¼˜äº&lt;/strong&gt;å¤æ‚çš„ã€å¤šå±‚åµŒå¥—çš„ &lt;code&gt;GROUP BY&lt;/code&gt;æŸ¥è¯¢ï¼ˆä¾‹å¦‚ï¼Œéœ€è¦å¤šæ¬¡è‡ªè¿æ¥æˆ–å­æŸ¥è¯¢æ‰èƒ½å®ç°ç›¸åŒåˆ†æç›®çš„æ—¶ï¼‰ã€‚ä¸ºåˆ†åŒºå­—æ®µå’Œæ’åºå­—æ®µåˆ›å»ºå¤åˆç´¢å¼•å¯ä»¥è¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©-2"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;æ ¹æ®ä½ çš„ç›®æ ‡åšå‡ºé€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;æ±‡æ€»ç»Ÿè®¡&lt;/strong&gt;ï¼ˆå¦‚æ€»è®¡ã€å¹³å‡å€¼ã€è®¡æ•°ï¼‰ï¼Œä¸”ä¸éœ€è¦æŸ¥çœ‹åŸå§‹æ˜ç»†æ—¶ â†’ ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;åœ¨ä¿ç•™æ‰€æœ‰åŸå§‹è¡Œç»†èŠ‚çš„åŒæ—¶&lt;/strong&gt;ï¼Œè¿›è¡Œåˆ†ç»„å†…çš„æ’åã€è®¡ç®—ç´¯è®¡å€¼ã€è®¿é—®å‰åè¡Œæ•°æ®æˆ–æ·»åŠ åˆ†ç»„æ±‡æ€»å€¼ä½œä¸ºæ–°åˆ— â†’ ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£ä¸¤è€…åŒºåˆ«ï¼Œå¹¶åœ¨å®é™…æŸ¥è¯¢ä¸­åšå‡ºæœ€ä½³é€‰æ‹©ï¼&lt;/p&gt;
&lt;h2 id="count"&gt;count
&lt;/h2&gt;&lt;p&gt;ä½ æä¾›çš„SQLæŸ¥è¯¢æŠ¥é”™ï¼Œä¸»è¦æ˜¯å› ä¸º&lt;strong&gt;é”™è¯¯åœ°åœ¨èšåˆå‡½æ•°&lt;code&gt;COUNT()&lt;/code&gt;ä¸­ç›´æ¥åµŒå¥—äº†å®Œæ•´çš„&lt;code&gt;SELECT&lt;/code&gt;å­æŸ¥è¯¢&lt;/strong&gt;ã€‚&lt;code&gt;COUNT()&lt;/code&gt;å‡½æ•°åº”è¯¥ä½œç”¨äºåˆ—åã€è¡¨è¾¾å¼æˆ–å­æŸ¥è¯¢è¿”å›çš„åˆ—ï¼Œè€Œä¸æ˜¯æ•´ä¸ª&lt;code&gt;SELECT ... FROM ...&lt;/code&gt;è¯­å¥ã€‚&lt;/p&gt;
&lt;h3 id="-é”™è¯¯åˆ†æä¸ä¿®æ­£"&gt;ğŸ” é”™è¯¯åˆ†æä¸ä¿®æ­£
&lt;/h3&gt;&lt;p&gt;ä½ çš„åŸæŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;select round(
count( -- é”™è¯¯ï¼šCOUNT()å†…ä¸èƒ½ç›´æ¥æ¥SELECTå­æŸ¥è¯¢
select f.player_id, f.first_login
from (...)
)
/ count( -- é”™è¯¯ï¼šCOUNT()å†…ä¸èƒ½ç›´æ¥æ¥SELECTå­æŸ¥è¯¢
select distinct player_id
)
, 2
) fraction;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é”™è¯¯åŸå› &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;COUNT()&lt;/code&gt;å‡½æ•°æ¥å—çš„æ˜¯åˆ—åã€è¡¨è¾¾å¼æˆ–**ï¼ˆä½†ä½ çš„å†™æ³•æ˜¯ç›´æ¥æ”¾å…¥äº†ä¸€ä¸ªå®Œæ•´çš„&lt;code&gt;SELECT&lt;/code&gt;å­æŸ¥è¯¢ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å­æŸ¥è¯¢ &lt;code&gt;(select distinct player_id)&lt;/code&gt;ç¼ºå°‘ &lt;code&gt;FROM&lt;/code&gt;å­å¥ï¼Œè¯­æ³•ä¸å®Œæ•´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¿®æ”¹åçš„æŸ¥è¯¢"&gt;âœ… ä¿®æ”¹åçš„æŸ¥è¯¢
&lt;/h3&gt;&lt;p&gt;ä½ çš„ç›®æ ‡æ˜¯è®¡ç®—&lt;strong&gt;åœ¨é¦–æ¬¡ç™»å½•åç¬¬äºŒå¤©å†æ¬¡ç™»å½•çš„ç©å®¶æ¯”ä¾‹&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„åˆ†å¼è®¡ç®—ï¼Œåˆ†å­æ˜¯&lt;strong&gt;åœ¨é¦–æ¬¡ç™»å½•åç¬¬äºŒå¤©ä¹Ÿç™»å½•çš„ç©å®¶æ•°é‡&lt;/strong&gt;ï¼Œåˆ†æ¯æ˜¯&lt;strong&gt;æ‰€æœ‰ç©å®¶æ•°é‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¿®æ­£åçš„å†™æ³•ï¼Œä½¿ç”¨äº†&lt;strong&gt;å­æŸ¥è¯¢&lt;/strong&gt;æ¥åˆ†åˆ«è®¡ç®—åˆ†å­å’Œåˆ†æ¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT ROUND(
( -- åˆ†å­ï¼šè®¡ç®—åœ¨é¦–æ¬¡ç™»å½•åç¬¬äºŒå¤©ä¹Ÿç™»å½•çš„ç©å®¶æ•°é‡
SELECT COUNT(DISTINCT a1.player_id)
FROM Activity a1
JOIN (
-- å…ˆæ‰¾åˆ°æ¯ä¸ªç©å®¶çš„é¦–æ¬¡ç™»å½•æ—¥æœŸ
SELECT player_id, MIN(event_date) AS first_login
FROM Activity
GROUP BY player_id
) AS first_logins ON a1.player_id = first_logins.player_id
WHERE DATEDIFF(a1.event_date, first_logins.first_login) = 1
)
/ -- é™¤ä»¥
( -- åˆ†æ¯ï¼šè®¡ç®—æ‰€æœ‰ç©å®¶çš„æ•°é‡
SELECT COUNT(DISTINCT player_id)
FROM Activity
)
, 2) AS fraction;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å­å­æŸ¥è¯¢&lt;/strong&gt;ï¼šé€šè¿‡å°†&lt;code&gt;Activity&lt;/code&gt;è¡¨ä¸æ¯ä¸ªç©å®¶çš„é¦–æ¬¡ç™»å½•æ—¥æœŸï¼ˆç”±å­æŸ¥è¯¢&lt;code&gt;first_logins&lt;/code&gt;è®¡ç®—ï¼‰è¿›è¡Œè¿æ¥ï¼Œç„¶åç­›é€‰å‡ºä¸é¦–æ¬¡ç™»å½•æ—¥æœŸç›¸å·®1å¤©çš„è®°å½•ï¼ˆ&lt;code&gt;DATEDIFF(...) = 1&lt;/code&gt;ï¼‰ï¼Œæœ€åç»Ÿè®¡æ»¡è¶³æ¡ä»¶çš„&lt;strong&gt;å»é‡ç©å®¶æ•°&lt;/strong&gt;ï¼ˆ&lt;code&gt;COUNT(DISTINCT ...)&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ¯å­æŸ¥è¯¢&lt;/strong&gt;ï¼šç®€å•ç»Ÿè®¡&lt;code&gt;Activity&lt;/code&gt;è¡¨ä¸­æ‰€æœ‰&lt;strong&gt;å»é‡çš„ç©å®¶æ•°é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™¤æ³•ä¸å››èˆäº”å…¥&lt;/strong&gt;ï¼šå°†åˆ†å­é™¤ä»¥åˆ†æ¯ï¼Œå¹¶ä½¿ç”¨&lt;code&gt;ROUND(..., 2)&lt;/code&gt;å°†ç»“æœä¿ç•™ä¸¤ä½å°æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–å®ç°æ€è·¯ä½¿ç”¨sumcase"&gt;ğŸ’¡ å…¶ä»–å®ç°æ€è·¯ï¼ˆä½¿ç”¨SUM+CASEï¼‰
&lt;/h3&gt;&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code&gt;SUM&lt;/code&gt;é…åˆ&lt;code&gt;CASE&lt;/code&gt;è¯­å¥æ¥è®¡ç®—åˆ†å­ï¼Œé€»è¾‘æ˜¯ï¼š&lt;strong&gt;å¦‚æœæŸä¸ªç©å®¶åœ¨é¦–æ¬¡ç™»å½•çš„ç¬¬äºŒå¤©æœ‰ç™»å½•è®°å½•ï¼Œåˆ™è®¡æ•°1ï¼Œå¦åˆ™è®¡æ•°0ï¼Œç„¶åå¯¹æ‰€æœ‰ç©å®¶çš„è¿™ä¸ªæ ‡å¿—æ±‚å’Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT ROUND(
SUM( -- å¯¹æ¯ä¸ªç©å®¶çš„ç™»å½•æ ‡å¿—è¿›è¡Œæ±‚å’Œ
CASE WHEN DATEDIFF(a.event_date, first_logins.first_login) = 1 THEN 1 ELSE 0 END
)
/ COUNT(DISTINCT first_logins.player_id) -- é™¤ä»¥æ€»ç©å®¶æ•°
, 2) AS fraction
FROM Activity a
JOIN (
SELECT player_id, MIN(event_date) AS first_login
FROM Activity
GROUP BY player_id
) AS first_logins ON a.player_id = first_logins.player_id;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æé†’-2"&gt;âš ï¸ é‡è¦æé†’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æ³¨æ„&lt;/strong&gt;ï¼šå¦‚æœä½ çš„&lt;code&gt;Activity&lt;/code&gt;è¡¨æ•°æ®é‡éå¸¸å¤§ï¼Œä¸Šè¿°æŸ¥è¯¢å¯èƒ½ä¼šæ¯”è¾ƒè€—æ—¶ã€‚ç¡®ä¿åœ¨&lt;code&gt;player_id&lt;/code&gt;å’Œ&lt;code&gt;event_date&lt;/code&gt;å­—æ®µä¸Šå»ºç«‹ç´¢å¼•å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ¯ä¸º0&lt;/strong&gt;ï¼šå¦‚æœåˆ†æ¯ï¼ˆæ€»ç©å®¶æ•°ï¼‰ä¸º0ï¼Œé™¤æ³•æ“ä½œä¼šå¯¼è‡´é”™è¯¯ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨&lt;code&gt;NULLIF&lt;/code&gt;å‡½æ•°æ¥å¤„ç†è¿™ç§æƒ…å†µï¼Œä¾‹å¦‚ï¼š&lt;code&gt;... / NULLIF((SELECT COUNT(...)), 0) ...&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®ä½ ç†è§£é”™è¯¯åŸå› å¹¶æˆåŠŸè§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="äº¤é›†"&gt;äº¤é›†
&lt;/h2&gt;&lt;p&gt;MySQL æœ¬èº«å¹¶ä¸ç›´æ¥æ”¯æŒ &lt;code&gt;INTERSECT&lt;/code&gt;æ“ä½œç¬¦æ¥æ±‚ä¸¤ä¸ªå­æŸ¥è¯¢çš„äº¤é›†ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•æ¥å®ç°ç›¸åŒçš„æ•ˆæœã€‚ä¸‹é¢æˆ‘ä¼šä¸ºä½ ä»‹ç»ä¸¤ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸ç”¨æ–¹æ³•ä»‹ç»"&gt;ğŸ“Œ å¸¸ç”¨æ–¹æ³•ä»‹ç»
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;INNER JOIN&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç›´æ¥å’Œå¸¸è§çš„æ–¹æ³•ã€‚å¦‚æœä¸¤ä¸ªå­æŸ¥è¯¢æœ‰å¯ä»¥å…³è”çš„å­—æ®µï¼Œä½ å¯ä»¥å°†å®ƒä»¬è¿›è¡Œå†…è¿æ¥ï¼Œåªè¿”å›é‚£äº›åœ¨ä¸¤ä¸ªç»“æœé›†ä¸­éƒ½å­˜åœ¨çš„è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;EXISTS&lt;/code&gt;æˆ– &lt;code&gt;IN&lt;/code&gt;å­æŸ¥è¯¢&lt;/strong&gt;ï¼šè¿™ç§æ–¹æ³•é€‚ç”¨äºåˆ¤æ–­ä¸€ä¸ªå­æŸ¥è¯¢çš„ç»“æœæ˜¯å¦å­˜åœ¨äºå¦ä¸€ä¸ªå­æŸ¥è¯¢ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç¤ºä¾‹è¯´æ˜-1"&gt;ğŸ“Š ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç®€å•çš„å­æŸ¥è¯¢ï¼Œå®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªåŒ…å« &lt;code&gt;id&lt;/code&gt;å­—æ®µçš„ç»“æœé›†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­æŸ¥è¯¢ A (&lt;code&gt;subquery_a&lt;/code&gt;)&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT id FROM table_a WHERE condition_a;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­æŸ¥è¯¢ B (&lt;code&gt;subquery_b&lt;/code&gt;)&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT id FROM table_b WHERE condition_b;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ–¹æ³•ä¸€ä½¿ç”¨-inner-joinè¿æ¥å­æŸ¥è¯¢"&gt;æ–¹æ³•ä¸€ï¼šä½¿ç”¨ &lt;code&gt;INNER JOIN&lt;/code&gt;è¿æ¥å­æŸ¥è¯¢
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT a.id
FROM (
SELECT id FROM table_a WHERE condition_a
) AS a
INNER JOIN (
SELECT id FROM table_b WHERE condition_b
) AS b ON a.id = b.id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;INNER JOIN&lt;/code&gt;æ—¶ï¼ŒåŠ¡å¿…ç¡®ä¿è¿æ¥æ¡ä»¶ï¼ˆå¦‚ &lt;code&gt;a.id = b.id&lt;/code&gt;ï¼‰ä¸­çš„å­—æ®µåœ¨ä¸¤ä¸ªå­æŸ¥è¯¢ä¸­éƒ½å­˜åœ¨ä¸”å«ä¹‰ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h4 id="æ–¹æ³•äºŒä½¿ç”¨-existså­æŸ¥è¯¢"&gt;æ–¹æ³•äºŒï¼šä½¿ç”¨ &lt;code&gt;EXISTS&lt;/code&gt;å­æŸ¥è¯¢
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT id
FROM table_a a
WHERE condition_a
AND EXISTS (
SELECT 1
FROM table_b b
WHERE condition_b
AND a.id = b.id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;IN&lt;/code&gt;å­å¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT id
FROM table_a
WHERE condition_a
AND id IN (
SELECT id
FROM table_b
WHERE condition_b
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;EXISTS&lt;/code&gt;å’Œ &lt;code&gt;IN&lt;/code&gt;åœ¨è¿™ä¸ªåœºæ™¯ä¸‹æ•ˆæœç±»ä¼¼ï¼Œä½† &lt;code&gt;EXISTS&lt;/code&gt;åœ¨å¤„ç† NULL å€¼æˆ–å¤§æ•°æ®é›†æ—¶å¯èƒ½æ›´æœ‰ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šå½“å­æŸ¥è¯¢çš„ç»“æœé›†å¾ˆå¤§æ—¶ï¼Œäº¤é›†æ“ä½œçš„æ€§èƒ½å¯èƒ½ä¼šæˆä¸ºç“¶é¢ˆã€‚ç¡®ä¿&lt;strong&gt;ç”¨äºè¿æ¥æˆ–åˆ¤æ–­çš„å­—æ®µï¼ˆå¦‚ &lt;code&gt;id&lt;/code&gt;ï¼‰ä¸Šæœ‰ç´¢å¼•&lt;/strong&gt;å¯ä»¥æ˜¾è‘—æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¡®ä¿ä¸¤ä¸ªå­æŸ¥è¯¢ä¸­ç”¨äºæ¯”è¾ƒçš„å­—æ®µæ•°æ®ç±»å‹å…¼å®¹ï¼Œå¹¶ä¸”å«ä¹‰ä¸€è‡´ï¼Œå¦åˆ™å¯èƒ½æ— æ³•å¾—åˆ°é¢„æœŸçš„äº¤é›†ç»“æœï¼Œæˆ–å‡ºç°æ¯”è¾ƒé”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;IN&lt;/code&gt;è¿›è¡Œåˆ¤æ–­æ—¶ï¼Œéœ€è¦æ³¨æ„ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„è¡Œä¸ºã€‚å¦‚æœå­æŸ¥è¯¢å¯èƒ½è¿”å› &lt;code&gt;NULL&lt;/code&gt;ï¼Œ&lt;code&gt;IN&lt;/code&gt;çš„æ¡ä»¶å¯èƒ½ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œã€‚æ­¤æ—¶ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;é€šå¸¸æ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©æ–¹æ³•"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©æ–¹æ³•ï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å½“ä¸¤ä¸ªå­æŸ¥è¯¢ç»“æœé›†éƒ½&lt;strong&gt;æ¯”è¾ƒå¤§&lt;/strong&gt;ï¼Œå¹¶ä¸”ä½ &lt;strong&gt;éœ€è¦åŸºäºå¤šä¸ªå­—æ®µè¿›è¡Œå…³è”&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;INNER JOIN&lt;/code&gt;æ–¹æ³•é€šå¸¸æ›´åˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå­æŸ¥è¯¢Bçš„ç»“æœé›†&lt;strong&gt;å¾ˆå°&lt;/strong&gt;ï¼Œæˆ–è€…ä½ åªæƒ³æ ¹æ®&lt;strong&gt;å•ä¸ªå­—æ®µçš„å­˜åœ¨æ€§&lt;/strong&gt;è¿›è¡Œåˆ¤æ–­ï¼Œé‚£ä¹ˆ &lt;code&gt;EXISTS&lt;/code&gt;æˆ– &lt;code&gt;IN&lt;/code&gt;å­æŸ¥è¯¢å¯èƒ½æ›´ç®€æ´ç›´è§‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æˆåŠŸåœ¨ MySQL ä¸­æ±‚å‡ºä¸¤ä¸ªå­æŸ¥è¯¢çš„äº¤é›†ã€‚&lt;/p&gt;
&lt;h2 id="case-when"&gt;CASE WHEN
&lt;/h2&gt;&lt;p&gt;äº†è§£ SQL ä¸­çš„ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼èƒ½è®©ä½ å†™æŸ¥è¯¢æ—¶æ›´çµæ´»ã€‚å®ƒä¸»è¦æœ‰ä¸¤ç§å½¢å¼ï¼šç®€å• &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼å’Œæœç´¢ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç®€å• CASE è¡¨è¾¾å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æœç´¢ CASE è¡¨è¾¾å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASE&lt;/code&gt;åç´§è·Ÿä¸€ä¸ªè¡¨è¾¾å¼æˆ–åˆ—å&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASE&lt;/code&gt;åç›´æ¥è·Ÿ &lt;code&gt;WHEN&lt;/code&gt;ï¼Œæ— éœ€åˆå§‹è¡¨è¾¾å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯”è¾ƒæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…èƒ½è¿›è¡Œ&lt;strong&gt;ç­‰å€¼æ¯”è¾ƒ&lt;/strong&gt; (&lt;code&gt;=&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å¯è¿›è¡Œ&lt;strong&gt;ä»»æ„æ¡ä»¶åˆ¤æ–­&lt;/strong&gt; (å¦‚ &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;LIKE&lt;/code&gt;, &lt;code&gt;BETWEEN&lt;/code&gt;, &lt;code&gt;IS NULL&lt;/code&gt;ç­‰)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼Œä»…é’ˆå¯¹å•ä¸€è¡¨è¾¾å¼çš„å€¼è¿›è¡ŒåŒ¹é…&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜&lt;/strong&gt;ï¼Œå¯ç»„åˆå¤šä¸ªå­—æ®µã€ä½¿ç”¨å‡½æ•°è¿›è¡Œå¤æ‚åˆ¤æ–­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æšä¸¾å€¼è½¬æ¢ã€ç®€å•çš„å€¼æ˜ å°„&lt;/td&gt;
&lt;td&gt;èŒƒå›´åˆ¤æ–­ã€å¤šæ¡ä»¶ç»„åˆã€å¤æ‚ä¸šåŠ¡é€»è¾‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç† NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— æ³•&lt;/strong&gt;ç›´æ¥åŒ¹é… &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼ˆ&lt;code&gt;WHEN NULL&lt;/code&gt;æ— æ•ˆï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥&lt;/strong&gt;å¤„ç† &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼ˆ&lt;code&gt;WHEN column IS NULL&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å‚è€ƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆå§‹è¡¨è¾¾å¼ä»…è®¡ç®—ä¸€æ¬¡ï¼Œ&lt;strong&gt;å¯èƒ½ç•¥å¿«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªæ¡ä»¶éƒ½éœ€è®¡ç®—ï¼Œä½†åœ¨å¤æ‚æ¡ä»¶ä¸‹é€šå¸¸æ›´ä¼˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è¯­æ³•è¯¦è§£"&gt;ğŸ§© è¯­æ³•è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-ç®€å•-case-è¡¨è¾¾å¼"&gt;1. ç®€å• CASE è¡¨è¾¾å¼
&lt;/h4&gt;&lt;p&gt;ç®€å• &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼å°†ä¸€ä¸ªè¡¨è¾¾å¼æˆ–åˆ—åä¸ä¸€ç³»åˆ—å€¼è¿›è¡Œ&lt;strong&gt;ç­‰å€¼æ¯”è¾ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CASE expression_to_compare
WHEN value1 THEN result1
WHEN value2 THEN result2
...
[ELSE default_result]
END
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œé€»è¾‘&lt;/strong&gt;ï¼šè®¡ç®— &lt;code&gt;expression_to_compare&lt;/code&gt;çš„å€¼ï¼Œç„¶å&lt;strong&gt;æŒ‰é¡ºåº&lt;/strong&gt;ä¸æ¯ä¸ª &lt;code&gt;WHEN&lt;/code&gt;å­å¥ä¸­çš„ &lt;code&gt;value&lt;/code&gt;è¿›è¡Œç­‰å€¼æ¯”è¾ƒã€‚è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ &lt;code&gt;THEN&lt;/code&gt;åçš„ç»“æœã€‚å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ä¸”æ²¡æœ‰ &lt;code&gt;ELSE&lt;/code&gt;å­å¥ï¼Œåˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-æœç´¢-case-è¡¨è¾¾å¼"&gt;2. æœç´¢ CASE è¡¨è¾¾å¼
&lt;/h4&gt;&lt;p&gt;æœç´¢ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼å…è®¸æ¯ä¸ª &lt;code&gt;WHEN&lt;/code&gt;å­å¥ä½¿ç”¨&lt;strong&gt;ç‹¬ç«‹çš„å¸ƒå°”æ¡ä»¶&lt;/strong&gt;è¿›è¡Œåˆ¤æ–­ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CASE
WHEN condition1 THEN result1
WHEN condition2 THEN result2
...
[ELSE default_result]
END
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œé€»è¾‘&lt;/strong&gt;ï¼š&lt;strong&gt;æŒ‰é¡ºåº&lt;/strong&gt;è¯„ä¼°æ¯ä¸ª &lt;code&gt;WHEN&lt;/code&gt;å­å¥çš„ &lt;code&gt;condition&lt;/code&gt;ã€‚è¿”å›ç¬¬ä¸€ä¸ªä¸ºçœŸï¼ˆTRUEï¼‰çš„æ¡ä»¶å¯¹åº”çš„ &lt;code&gt;THEN&lt;/code&gt;ç»“æœã€‚å¦‚æœæ²¡æœ‰æ¡ä»¶ä¸ºçœŸä¸”æ²¡æœ‰ &lt;code&gt;ELSE&lt;/code&gt;å­å¥ï¼Œåˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="ç®€å•-case-è¡¨è¾¾å¼"&gt;ç®€å• CASE è¡¨è¾¾å¼
&lt;/h4&gt;&lt;p&gt;é€‚ç”¨äº&lt;strong&gt;ç­‰å€¼è½¬æ¢&lt;/strong&gt;ï¼Œä¾‹å¦‚å°†ç¼–ç æ˜ å°„ä¸ºå¯è¯»æ–‡æœ¬ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†æ€§åˆ«ç¼–ç è½¬æ¢ä¸ºä¸­æ–‡æè¿°
SELECT
name,
CASE gender_code
WHEN &amp;#39;M&amp;#39; THEN &amp;#39;ç”·&amp;#39;
WHEN &amp;#39;F&amp;#39; THEN &amp;#39;å¥³&amp;#39;
ELSE &amp;#39;å…¶ä»–&amp;#39;
END AS gender_text
FROM users;
-- æ ¹æ®éƒ¨é—¨IDè°ƒæ•´äº§å“ä»·æ ¼
UPDATE products
SET price = CASE category_id
WHEN 1 THEN price * 1.1 -- ç”µå­äº§å“æä»·10%
WHEN 2 THEN price * 0.9 -- å›¾ä¹¦é™ä»·10%
ELSE price
END;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æœç´¢-case-è¡¨è¾¾å¼"&gt;æœç´¢ CASE è¡¨è¾¾å¼
&lt;/h4&gt;&lt;p&gt;é€‚ç”¨äº&lt;strong&gt;èŒƒå›´åˆ¤æ–­ã€å¤æ‚æ¡ä»¶ç»„åˆ&lt;/strong&gt;åŠ&lt;strong&gt;æ¡ä»¶èšåˆ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æ ¹æ®åˆ†æ•°åˆ’åˆ†ç­‰çº§
SELECT
name,
score,
CASE
WHEN score &amp;gt;= 90 THEN &amp;#39;ä¼˜ç§€&amp;#39;
WHEN score &amp;gt;= 80 THEN &amp;#39;è‰¯å¥½&amp;#39;
WHEN score &amp;gt;= 60 THEN &amp;#39;åŠæ ¼&amp;#39;
ELSE &amp;#39;ä¸åŠæ ¼&amp;#39;
END AS grade
FROM exam_results;
-- æ¡ä»¶èšåˆï¼šç»Ÿè®¡ä¸åŒçŠ¶æ€çš„è®¢å•æ•°é‡
SELECT
COUNT(*) AS total_orders,
SUM(CASE WHEN status = &amp;#39;paid&amp;#39; THEN 1 ELSE 0 END) AS paid_orders,
SUM(CASE WHEN amount &amp;gt; 1000 THEN 1 ELSE 0 END) AS high_value_orders
FROM orders;
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶é¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼æŒ‰é¡ºåºåˆ¤æ–­æ¡ä»¶ã€‚&lt;strong&gt;ä¸€æ—¦æŸä¸ªæ¡ä»¶è¢«æ»¡è¶³ï¼Œåç»­æ¡ä»¶å°†ä¸å†è¯„ä¼°&lt;/strong&gt;ã€‚å› æ­¤ï¼Œåº”å°†æ›´å…·ä½“æˆ–æ›´å¯èƒ½æ»¡è¶³çš„æ¡ä»¶æ”¾åœ¨å‰é¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ELSE å­å¥&lt;/strong&gt;ï¼š&lt;code&gt;ELSE&lt;/code&gt;å­å¥æ˜¯&lt;strong&gt;å¯é€‰çš„&lt;/strong&gt;ï¼Œä½†å¼ºçƒˆå»ºè®®æ€»æ˜¯åŒ…å«å®ƒã€‚å¦‚æœä¸æŒ‡å®š &lt;code&gt;ELSE&lt;/code&gt;ä¸”æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œè¡¨è¾¾å¼å°†è¿”å› &lt;code&gt;NULL&lt;/code&gt;ï¼Œè¿™å¯èƒ½å¯¼è‡´æ„å¤–ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å€¼ç±»å‹ä¸€è‡´&lt;/strong&gt;ï¼šç¡®ä¿æ‰€æœ‰ &lt;code&gt;THEN&lt;/code&gt;å­å¥å’Œ &lt;code&gt;ELSE&lt;/code&gt;å­å¥è¿”å›çš„å€¼çš„&lt;strong&gt;æ•°æ®ç±»å‹å…¼å®¹æˆ–ç»Ÿä¸€&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½å‡ºé”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šè™½ç„¶ç®€å• &lt;code&gt;CASE&lt;/code&gt;å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹ç¨å¿«ï¼Œä½†æœç´¢ &lt;code&gt;CASE&lt;/code&gt;å› å…¶çµæ´»æ€§è€Œæ›´å¸¸ç”¨ã€‚å¯¹äºå¤æ‚è®¡ç®—ï¼Œå¯è€ƒè™‘ä½¿ç”¨æ´¾ç”Ÿè¡¨æˆ–å…¬å…±è¡¨è¡¨è¾¾å¼ï¼ˆCTEï¼‰æ¥é¿å…é‡å¤è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“å°¾çš„ END&lt;/strong&gt;ï¼šåƒä¸‡ä¸è¦å¿˜è®°ä»¥ &lt;code&gt;END&lt;/code&gt;å…³é”®å­—ç»“æŸ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-17"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ç®€å• &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼ç”¨äºâ€œæ˜¯ä»€ä¹ˆâ€çš„ç­‰å€¼åˆ¤æ–­ï¼Œè€Œæœç´¢ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼ç”¨äºâ€œæ»¡è¶³ä»€ä¹ˆæ¡ä»¶â€çš„å¤æ‚è¯„ä¼°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œ&lt;strong&gt;æœç´¢å‹ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼å› å…¶å¼ºå¤§çš„çµæ´»æ€§å’ŒåŠŸèƒ½æ€§è€Œè¢«æ›´å¹¿æ³›åœ°ä½¿ç”¨&lt;/strong&gt;ã€‚å½“ä½ éœ€è¦å¤„ç†ä»»ä½•éç­‰å€¼æ¯”è¾ƒã€é€»è¾‘è¿ç®—æˆ–å¤æ‚æ¡ä»¶æ—¶ï¼Œæœç´¢ &lt;code&gt;CASE&lt;/code&gt;è¡¨è¾¾å¼éƒ½æ˜¯ä½ çš„é¦–é€‰å·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id="coalesce"&gt;coalesce
&lt;/h2&gt;&lt;p&gt;COALESCE æ˜¯ SQL ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„å‡½æ•°ï¼Œä¸»è¦ç”¨äºå¤„ç†æ•°æ®ä¸­çš„ NULL å€¼ã€‚å®ƒèƒ½&lt;strong&gt;è¿”å›å…¶å‚æ•°åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé NULL å€¼&lt;/strong&gt;ã€‚å¦‚æœæ‰€æœ‰å‚æ•°å‡ä¸º NULLï¼Œå®ƒå°†è¿”å› NULLã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥å¿«é€Ÿäº†è§£ &lt;code&gt;COALESCE&lt;/code&gt;ä¸å…¶ä»–ç±»ä¼¼å‡½æ•°çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;COALESCE&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ISNULL&lt;/strong&gt; (SQL Server) / &lt;strong&gt;NVL&lt;/strong&gt; (Oracle) / &lt;strong&gt;IFNULL&lt;/strong&gt; (MySQL)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CASE WHEN&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒå¤šä¸ªå‚æ•°&lt;/td&gt;
&lt;td&gt;ä»…æ”¯æŒä¸¤ä¸ªå‚æ•°&lt;/td&gt;
&lt;td&gt;æ”¯æŒä»»æ„æ¡ä»¶é€»è¾‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡†æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ANSI SQL æ ‡å‡†&lt;/strong&gt;ï¼Œè·¨æ•°æ®åº“å…¼å®¹æ€§å¥½&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“ç‰¹å®šå‡½æ•°&lt;/td&gt;
&lt;td&gt;ANSI SQL æ ‡å‡†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»å¤šä¸ªå¯èƒ½ä¸ºç©ºçš„å­—æ®µä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªæœ‰æ•ˆå€¼ï¼›ä¸ºNULLæä¾›å…œåº•çš„é»˜è®¤å€¼&lt;/td&gt;
&lt;td&gt;æ›¿æ¢å•ä¸ªå­—æ®µçš„NULLå€¼&lt;/td&gt;
&lt;td&gt;å®ç°å¤æ‚çš„æ¡ä»¶åˆ†æ”¯åˆ¤æ–­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COALESCE(phone, backup_phone, 'æ— è”ç³»æ–¹å¼')&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ISNULL(phone, 'æ— è”ç³»æ–¹å¼')&lt;/code&gt;(SQL Server)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASE WHEN phone IS NOT NULL THEN phone ELSE 'æ— è”ç³»æ–¹å¼' END&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸è¯­æ³•"&gt;ğŸ”§ å·¥ä½œåŸç†ä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;COALESCE(value1, value2, ..., valueN)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ‰§è¡Œé€»è¾‘&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;COALESCE å‡½æ•°ä¼š&lt;strong&gt;ä»å·¦åˆ°å³ä¾æ¬¡æ£€æŸ¥æ¯ä¸ªå‚æ•°&lt;/strong&gt;çš„å€¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€æ—¦é‡åˆ°&lt;strong&gt;ç¬¬ä¸€ä¸ªé NULL å€¼&lt;/strong&gt;ï¼Œå°±ç«‹å³è¿”å›è¯¥å€¼ï¼ˆçŸ­è·¯è¯„ä¼°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ‰€æœ‰å‚æ•°éƒ½æ˜¯ NULLï¼Œåˆ™å‡½æ•°è¿”å› NULLã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€æœ‰å‚æ•°åº”è¯¥æ˜¯ç›¸åŒæˆ–å…¼å®¹çš„æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-1"&gt;ğŸ¯ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;COALESCE å‡½æ•°åœ¨æ•°æ®å¤„ç†ä¸­éå¸¸çµæ´»ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æä¾›é»˜è®¤å€¼ï¼ˆå¤„ç†å•å­—æ®µNULLå€¼ï¼‰&lt;/strong&gt;ï¼šå½“æŸä¸ªå­—æ®µå¯èƒ½ä¸º NULL æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ COALESCE ä¸ºå…¶æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œé¿å…åœ¨æŸ¥è¯¢ç»“æœæˆ–è®¡ç®—ä¸­å‡ºç° NULLã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°† NULL çš„å¥–é‡‘(bonus)æ˜¾ç¤ºä¸º 0
SELECT name, COALESCE(bonus, 0) AS bonus_amount FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šå­—æ®µä¼˜å…ˆçº§é€‰æ‹©&lt;/strong&gt;ï¼šä»å¤šä¸ªå¯èƒ½ä¸º NULL çš„å­—æ®µä¸­ï¼ŒæŒ‰ä¼˜å…ˆçº§é€‰æ‹©ç¬¬ä¸€ä¸ªé NULL çš„å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä¼˜å…ˆä½¿ç”¨æ‰‹æœºå·(phone)ï¼Œè‹¥æ— åˆ™ç”¨å®¶åº­ç”µè¯(home_phone)ï¼Œæœ€åç”¨å·¥ä½œç”µè¯(work_phone)
SELECT name, COALESCE(phone, home_phone, work_phone, &amp;#39;æ— æœ‰æ•ˆè”ç³»æ–¹å¼&amp;#39;) AS contact_info
FROM contacts;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿è®¡ç®—å®‰å…¨&lt;/strong&gt;ï¼šåœ¨æ•°å­¦è¿ç®—æˆ–ç‰¹å®šå‡½æ•°ä¸­ï¼Œå¦‚æœæ“ä½œæ•°å¯èƒ½ä¸º NULLï¼Œå¯ä»¥ä½¿ç”¨ COALESCE æä¾›ä¸€ä¸ªå®‰å…¨å€¼ï¼Œé˜²æ­¢æ•´ä¸ªè¡¨è¾¾å¼ç»“æœä¸º NULLã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¡®ä¿æŠ˜æ‰£(discount)ä¸ä¸ºNULLï¼Œé¿å…æ•´ä¸ªè¡¨è¾¾å¼ä¸ºNULL
SELECT product_name, price * COALESCE(discount, 1) AS final_price
FROM products;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—å’Œè½¬æ¢&lt;/strong&gt;ï¼šåœ¨æ•°æ®æ¸…æ´—è¿‡ç¨‹ä¸­ï¼Œå°† NULL å€¼è½¬æ¢ä¸ºæœ‰æ„ä¹‰çš„é»˜è®¤å€¼æˆ–ç»Ÿä¸€æ ¼å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†NULLåç§°è½¬æ¢ä¸º&amp;#39;Unknown&amp;#39;
SELECT COALESCE(name, &amp;#39;Unknown&amp;#39;) AS cleaned_name FROM customers;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ COALESCE æ—¶ï¼Œæœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°é¡ºåº&lt;/strong&gt;ï¼šå‚æ•°çš„é¡ºåºå¾ˆé‡è¦ã€‚&lt;strong&gt;å°†æœ€å¯èƒ½ä¸ºé NULL æˆ–æœ€å¸Œæœ›è¿”å›çš„å€¼æ”¾åœ¨åˆ—è¡¨å·¦ä¾§&lt;/strong&gt;ï¼Œè¿™æ ·å¯ä»¥åˆ©ç”¨çŸ­è·¯è¯„ä¼°æœºåˆ¶ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹å…¼å®¹æ€§&lt;/strong&gt;ï¼šæ‰€æœ‰å‚æ•°çš„æ•°æ®ç±»å‹åº”è¯¥å…¼å®¹æˆ–å¯ä»¥éšå¼è½¬æ¢ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ CASE è¡¨è¾¾å¼çš„ç­‰ä»·æ€§&lt;/strong&gt;ï¼šCOALESCE(expr1, expr2) åœ¨é€»è¾‘ä¸Šç­‰ä»·äº &lt;code&gt;CASE WHEN expr1 IS NOT NULL THEN expr1 ELSE expr2 END&lt;/code&gt;ã€‚å¯¹äºå¤šå‚æ•°ï¼Œä¹Ÿç­‰åŒäºä¸€ç³»åˆ— CASE WHEN åˆ¤æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨å­æŸ¥è¯¢&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“ï¼ˆå¦‚ SQL Serverï¼‰ä¸­ï¼Œå¦‚æœ COALESCE çš„å‚æ•°åŒ…å«å­æŸ¥è¯¢ï¼Œè¯¥å­æŸ¥è¯¢å¯èƒ½ä¼šè¢«å¤šæ¬¡è¯„ä¼°ï¼ˆæ‰§è¡Œï¼‰ï¼Œè¿™å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜æˆ–åœ¨ç‰¹å®šéš”ç¦»çº§åˆ«ä¸‹äº§ç”Ÿéé¢„æœŸç»“æœã€‚å¯¹æ­¤ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ ISNULLï¼ˆå¦‚æœé€‚ç”¨ï¼‰æˆ–å°†å­æŸ¥è¯¢ç§»è‡³æ´¾ç”Ÿè¡¨ï¼ˆå­æŸ¥è¯¢ï¼‰ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-18"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;COALESCE æ˜¯ SQL ä¸­å¤„ç† NULL å€¼çš„&lt;strong&gt;é¦–é€‰å·¥å…·ä¹‹ä¸€&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒç¬¦åˆ ANSI æ ‡å‡†ä¸”æ”¯æŒå¤šä¸ªå‚æ•°ï¼Œéå¸¸çµæ´»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;åœ¨äºå…¶èƒ½å¤Ÿæä¾›&lt;strong&gt;ç®€æ´ã€æ¸…æ™°çš„è¯­æ³•&lt;/strong&gt;æ¥å¤„ç†å¯èƒ½å‡ºç°çš„ NULL å€¼ï¼Œä»è€Œ&lt;strong&gt;å¢å¼ºæŸ¥è¯¢ç»“æœçš„å¯é æ€§å’Œå¯è¯»æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ éœ€è¦åœ¨å¤šä¸ªå¯èƒ½ä¸ºç©ºçš„åˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆå€¼ï¼Œæˆ–è€…æƒ³ä¸º NULL æä¾›ä¸€ä¸ªå®‰å…¨çš„fallbackå€¼æ—¶ï¼Œè®°å¾—è€ƒè™‘ä½¿ç”¨ COALESCE å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="group-by-expr"&gt;Group by Expr
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ç¡®å®å¯ä»¥åŸºäºè¡¨è¾¾å¼è¿›è¡Œåˆ†ç»„ï¼Œè¿™ä¸ºæ•°æ®åˆ†ç»„æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ±‡æ€»äº†å¸¸ç”¨è¡¨è¾¾å¼ç±»å‹çš„è¡¨æ ¼ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¡¨è¾¾å¼ç±»åˆ«&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°è¡¨è¾¾å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ MySQL å†…ç½®å‡½æ•°å¤„ç†åˆ—å€¼ååˆ†ç»„&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP BY YEAR(order_date)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰å¹´ã€æœˆã€å‘¨ç­‰æ—¶é—´ç»´åº¦åˆ†ç»„ï¼›å¤„ç†å­—ç¬¦ä¸²åè¿›è¡Œåˆ†ç»„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æœ¯è¡¨è¾¾å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æ•°å€¼åˆ—è¿›è¡ŒåŠ å‡ä¹˜é™¤ç­‰ç®—æœ¯è¿ç®—ååˆ†ç»„&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP BY (quantity * price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰è®¡ç®—åçš„é‡‘é¢ã€å¾—åˆ†ã€æ¯”ç‡ç­‰åˆ†ç»„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CASE è¡¨è¾¾å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®æ¡ä»¶é€»è¾‘å°†æ•°æ®åˆ†åˆ°ä¸åŒçš„è‡ªå®šä¹‰ç»„åˆ«&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP BY CASE WHEN score &amp;gt;= 90 THEN 'ä¼˜' WHEN score &amp;gt;= 60 THEN 'åŠæ ¼' ELSE 'ä¸åŠæ ¼' END&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†æ•°æ®æŒ‰è‡ªå®šä¹‰åŒºé—´æˆ–æ¡ä»¶åˆ†ç»„ï¼Œå¦‚æˆç»©ç­‰çº§ã€å®¢æˆ·åˆ†æ®µã€é‡‘é¢åŒºé—´ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦ä¸²æ‹¼æ¥è¡¨è¾¾å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å¤šä¸ªå­—æ®µæˆ–å­—æ®µä¸å¸¸é‡æ‹¼æ¥ååˆ†ç»„&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP BY CONCAT(first_name, ' ', last_name)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆå…¨åã€ç»„åˆç¼–ç ç­‰ä½œä¸ºåˆ†ç»„ä¾æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æ—¥æœŸæ—¶é—´å­—æ®µè¿›è¡Œæ ¼å¼åŒ–æˆ–æå–ç‰¹å®šéƒ¨åˆ†ååˆ†ç»„&lt;/td&gt;
&lt;td&gt;&lt;code&gt;GROUP BY DATE_FORMAT(order_date, '%Y-%m')&lt;/code&gt; &lt;code&gt;GROUP BY HOUR(login_time)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰å¹´æœˆåˆ†ç»„æŸ¥çœ‹æ•°æ®ï¼›æŒ‰å°æ—¶åˆ†ç»„åˆ†æè®¿é—®æ¨¡å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨è¡¨è¾¾å¼åˆ†ç»„æ—¶ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SELECT å­å¥çš„ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;SELECT&lt;/code&gt;å­å¥ä¸­&lt;strong&gt;å‡ºç°çš„éèšåˆåˆ—æˆ–è¡¨è¾¾å¼ï¼Œå¿…é¡»ä¸ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­çš„è¡¨è¾¾å¼ä¿æŒä¸€è‡´&lt;/strong&gt;ï¼ˆé™¤éæ˜¯èšåˆå‡½æ•°çš„å‚æ•°ï¼‰ã€‚è¿™æ˜¯ MySQL ä¸­ &lt;code&gt;ONLY_FULL_GROUP_BY&lt;/code&gt;SQL æ¨¡å¼ï¼ˆMySQL 8.0 åé»˜è®¤å¯ç”¨ï¼‰çš„è¦æ±‚ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æ­£ç¡®çš„å†™æ³•ï¼šSELECT ä¸­çš„è¡¨è¾¾å¼ä¸ GROUP BY ä¸­çš„ä¸€è‡´
SELECT YEAR(order_date) AS order_year, COUNT(*)
FROM orders
GROUP BY YEAR(order_date);
-- âŒ é”™è¯¯çš„å†™æ³•ï¼šSELECT ä¸­ä½¿ç”¨äº†åˆ«åï¼ŒGROUP BY ä¸­ä½¿ç”¨äº†åŸå§‹è¡¨è¾¾å¼
-- SELECT YEAR(order_date) AS order_year, COUNT(*)
-- FROM orders
-- GROUP BY order_year; ï¼ˆåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŸäº› MySQL ç‰ˆæœ¬å¯èƒ½ä¸å…è®¸è¿™æ ·ä½¿ç”¨åˆ«åï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è™½ç„¶ MySQL åœ¨æŸäº›æƒ…å†µä¸‹å…è®¸åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;ä¸­ä½¿ç”¨ &lt;code&gt;SELECT&lt;/code&gt;ä¸­å®šä¹‰çš„åˆ«åï¼ˆå¦‚ &lt;code&gt;GROUP BY order_year&lt;/code&gt;ï¼‰ï¼Œä½†ä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§å’Œé¿å…æ½œåœ¨é”™è¯¯ï¼Œ&lt;strong&gt;æ›´æ¨èåœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;ä¸­ç›´æ¥ä½¿ç”¨ä¸ SELECT ä¸­ç›¸åŒçš„è¡¨è¾¾å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œé‚£ä¹ˆè¿™äº›è¡Œä¼šè¢«å½’å…¥åŒä¸€ä¸ªåˆ†ç»„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šå¯¹åˆ—ä½¿ç”¨å‡½æ•°æˆ–å¤æ‚è¡¨è¾¾å¼è¿›è¡Œè®¡ç®—åå†åˆ†ç»„ï¼Œ&lt;strong&gt;æœ‰æ—¶ä¼šé˜»æ­¢ MySQL ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼Œå¯èƒ½ä¼šå½±å“æŸ¥è¯¢æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§æ•°æ®é›†æ—¶ã€‚å¦‚æœæŸç±»åˆ†ç»„æ“ä½œéå¸¸é¢‘ç¹ï¼Œå¯ä»¥è€ƒè™‘&lt;strong&gt;ç”Ÿæˆä¸€ä¸ªé¢å¤–çš„è®¡ç®—åˆ—ï¼ˆGenerated Columnï¼‰&lt;/strong&gt; æ¥å­˜å‚¨è¡¨è¾¾å¼ç»“æœå¹¶ä¸ºè¯¥åˆ—å»ºç«‹ç´¢å¼•ï¼Œä»¥ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒè¦ç‚¹"&gt;ğŸ’¡ æ ¸å¿ƒè¦ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ä»¥ä¼ é€’è¡¨è¾¾å¼&lt;/strong&gt;ï¼š&lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸ä»…èƒ½åŸºäºåˆ—åè¿›è¡Œåˆ†ç»„ï¼Œè¿˜&lt;strong&gt;å®Œå…¨å¯ä»¥åŸºäºè¡¨è¾¾å¼è¿›è¡Œåˆ†ç»„&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨è¾¾å¼éœ€ä¿æŒä¸€è‡´&lt;/strong&gt;ï¼šç¡®ä¿ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­ä½¿ç”¨çš„è¡¨è¾¾å¼ä¸ &lt;code&gt;SELECT&lt;/code&gt;åˆ—è¡¨ä¸­ç›¸åº”çš„è¡¨è¾¾å¼å®Œå…¨ä¸€è‡´ï¼ˆé™¤éæ˜¯èšåˆå‡½æ•°çš„å‚æ•°ï¼‰ï¼Œè¿™æ˜¯ MySQL ä¸­ &lt;code&gt;ONLY_FULL_GROUP_BY&lt;/code&gt;æ¨¡å¼çš„è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ«åä½¿ç”¨éœ€è°¨æ…&lt;/strong&gt;ï¼šè™½ç„¶åœ¨ MySQL ä¸­æœ‰æ—¶å¯ä»¥åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;ä¸­ä½¿ç”¨ &lt;code&gt;SELECT&lt;/code&gt;åˆ—è¡¨ä¸­å®šä¹‰çš„åˆ«åï¼Œä½†ä¸ºäº†ä»£ç çš„æ¸…æ™°æ€§å’Œè·¨æ•°æ®åº“å…¼å®¹æ€§ï¼Œæ›´æ¨èåœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;ä¸­ç›´æ¥é‡å¤è¯¥è¡¨è¾¾å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ NULL åˆ†ç»„&lt;/strong&gt;ï¼šæ‰€æœ‰è¡¨è¾¾å¼è®¡ç®—ç»“æœä¸º &lt;code&gt;NULL&lt;/code&gt;çš„è¡Œä¼šè¢«åˆ†åˆ°åŒä¸€ç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åœ¨ MySQL ä¸­ä½¿ç”¨è¡¨è¾¾å¼è¿›è¡Œåˆ†ç»„ã€‚&lt;/p&gt;
&lt;h2 id="å¹´æœˆ"&gt;å¹´æœˆ
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­åŒæ—¶æå–æ—¥æœŸå­—æ®µçš„å¹´ä»½å’Œæœˆä»½ï¼Œæœ‰å¤šç§æ–¹æ³•å¯ä»¥å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿå¯¹æ¯”è¡¨æ ¼ï¼Œå¸®åŠ©ä½ æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹ä»£ç &lt;/th&gt;
&lt;th&gt;è¿”å›å€¼è¯´æ˜&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;YEAR() + MONTH()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT YEAR(date_col), MONTH(date_col);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ†å¼€è¿”å›&lt;strong&gt;æ•°å­—&lt;/strong&gt;å½¢å¼çš„å¹´ä»½å’Œæœˆä»½&lt;/td&gt;
&lt;td&gt;éœ€è¦åˆ†åˆ«å¯¹å¹´ä»½å’Œæœˆä»½è¿›è¡Œæ•°å­—è®¡ç®—æˆ–æ¯”è¾ƒæ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DATE_FORMAT()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATE_FORMAT(date_col, '%Y-%m');&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å­—ç¬¦ä¸²&lt;/strong&gt;å½¢å¼çš„å¹´æœˆï¼ˆå¦‚ &amp;ldquo;2025-09&amp;rdquo;ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦ç›´æ¥è·å¾—æ ¼å¼åŒ–çš„å¹´æœˆå­—ç¬¦ä¸²ç”¨äºæ˜¾ç¤ºæˆ–ä½œä¸ºåˆ†ç±»æ ‡ç­¾æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EXTRACT()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT EXTRACT(YEAR_MONTH FROM date_col);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;æ•°å­—&lt;/strong&gt;å½¢å¼çš„å¹´æœˆï¼ˆå¦‚ 202509ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦ç´§å‡‘çš„æ•°å­—æ ¼å¼è¿›è¡Œå­˜å‚¨æˆ–ç‰¹å®šè®¡ç®—æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯è¿™äº›æ–¹æ³•çš„è¯¦ç»†è¯´æ˜å’Œä¸€äº›å®ç”¨å»ºè®®ã€‚&lt;/p&gt;
&lt;h3 id="-è¯¦ç»†æ–¹æ³•è¯´æ˜"&gt;ğŸ“Œ è¯¦ç»†æ–¹æ³•è¯´æ˜
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;YEAR()&lt;/code&gt;å’Œ &lt;code&gt;MONTH()&lt;/code&gt;å‡½æ•°ç»„åˆ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ã€‚&lt;code&gt;YEAR()&lt;/code&gt;å‡½æ•°è¿”å›æ—¥æœŸä¸­çš„å¹´ä»½ï¼ˆ4ä½æ•°ï¼‰ï¼Œ&lt;code&gt;MONTH()&lt;/code&gt;å‡½æ•°è¿”å›æœˆä»½çš„æ•°å­—ï¼ˆ1-12ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åŸºæœ¬ç”¨æ³•
SELECT YEAR(your_date_column) AS order_year,
MONTH(your_date_column) AS order_month
FROM your_table;
-- ç¤ºä¾‹ç»“æœï¼š
-- | order_year | order_month |
-- |------------|-------------|
-- | 2023 | 1 |
-- | 2023 | 2 |
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœéœ€è¦å°†å¹´ä»½å’Œæœˆä»½ç»„åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ &amp;ldquo;2023-01&amp;rdquo;ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;CONCAT()&lt;/code&gt;å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONCAT(YEAR(your_date_column), &amp;#39;-&amp;#39;, LPAD(MONTH(your_date_column), 2, &amp;#39;0&amp;#39;)) AS year_month
FROM your_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;LPAD(MONTH(...), 2, '0')&lt;/code&gt;æ˜¯ä¸ºäº†ç¡®ä¿æœˆä»½æ€»æ˜¯ä¸¤ä½æ•°ï¼ˆä¾‹å¦‚å°† &amp;lsquo;1&amp;rsquo; æ˜¾ç¤ºä¸º &amp;lsquo;01&amp;rsquo;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;DATE_FORMAT()&lt;/code&gt;å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;DATE_FORMAT()&lt;/code&gt;å‡½æ•°éå¸¸å¼ºå¤§ï¼Œå¯ä»¥ç›´æ¥å°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºä»»ä½•ä½ æƒ³è¦çš„å­—ç¬¦ä¸²å½¢å¼ã€‚è¦è·å– &amp;ldquo;YYYY-MM&amp;rdquo; æ ¼å¼ï¼Œåªéœ€æŒ‡å®šæ ¼å¼å­—ç¬¦ä¸² &lt;code&gt;'%Y-%m'&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATE_FORMAT(your_date_column, &amp;#39;%Y-%m&amp;#39;) AS year_month
FROM your_table;
-- ç¤ºä¾‹ç»“æœï¼š
-- | year_month |
-- |------------|
-- | 2023-01 |
-- | 2023-02 |
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ ¼å¼ç¬¦ï¼Œä¾‹å¦‚ &lt;code&gt;%Yå¹´%mæœˆ&lt;/code&gt;ä¼šå¾—åˆ° &amp;ldquo;2023å¹´01æœˆ&amp;rdquo;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;EXTRACT()&lt;/code&gt;å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;EXTRACT()&lt;/code&gt;å‡½æ•°ç”¨äºä»æ—¥æœŸä¸­æå–æŒ‡å®šçš„éƒ¨åˆ†ã€‚ä½¿ç”¨ &lt;code&gt;YEAR_MONTH&lt;/code&gt;å•å…ƒå¯ä»¥ä¸€æ¬¡æ€§æå–å‡ºç»„åˆçš„å¹´æœˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT EXTRACT(YEAR_MONTH FROM your_date_column) AS year_month
FROM your_table;
-- ç¤ºä¾‹ç»“æœï¼š
-- | year_month |
-- |------------|
-- | 202301 |
-- | 202302 |
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°†è¿”å›ä¸€ä¸ªæ•°å­—ç±»å‹çš„å€¼ï¼Œå¦‚ 202301 ä»£è¡¨ 2023å¹´1æœˆã€‚å¦‚æœéœ€è¦åœ¨æœˆä»½éƒ¨åˆ†ä¿æŒä¸¤ä½æ•°ï¼ˆå¦‚ 202301 è€Œä¸æ˜¯ 20231ï¼‰ï¼Œè¯·ç¡®ä¿æºæ—¥æœŸå­—æ®µæ˜¯ &lt;code&gt;DATE&lt;/code&gt;ã€&lt;code&gt;DATETIME&lt;/code&gt;æˆ– &lt;code&gt;TIMESTAMP&lt;/code&gt;ç±»å‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®ç”¨åœºæ™¯å’Œå»ºè®®"&gt;ğŸ’¡ å®ç”¨åœºæ™¯å’Œå»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰å¹´æœˆåˆ†ç»„ç»Ÿè®¡&lt;/strong&gt;ï¼šåœ¨ç”ŸæˆæŠ¥å‘Šæ—¶ï¼Œç»å¸¸éœ€è¦æŒ‰å¹´æœˆåˆ†ç»„æ±‡æ€»æ•°æ®ï¼ˆå¦‚æ¯æœˆé”€å”®é¢ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨DATE_FORMAT
SELECT DATE_FORMAT(order_date, &amp;#39;%Y-%m&amp;#39;) AS month,
COUNT(*) AS order_count,
SUM(amount) AS total_amount
FROM orders
GROUP BY DATE_FORMAT(order_date, &amp;#39;%Y-%m&amp;#39;);
-- ä½¿ç”¨YEARå’ŒMONTH
SELECT YEAR(order_date) AS year,
MONTH(order_date) AS month,
COUNT(*) AS order_count,
SUM(amount) AS total_amount
FROM orders
GROUP BY YEAR(order_date), MONTH(order_date);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½æ³¨æ„&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥æˆ– &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­å¯¹åˆ—ä½¿ç”¨å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;YEAR(column)&lt;/code&gt;ã€&lt;code&gt;DATE_FORMAT(column, ...)&lt;/code&gt;ï¼‰&lt;strong&gt;å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“æ— æ³•ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼Œä»è€Œå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚å¯¹äºå¤§é‡æ•°æ®çš„è¿‡æ»¤ï¼Œè€ƒè™‘ä½¿ç”¨èŒƒå›´æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- è€Œä¸æ˜¯: WHERE YEAR(order_date) = 2023 AND MONTH(order_date) = 1
-- å¯ä»¥å°è¯•:
WHERE order_date &amp;gt;= &amp;#39;2023-01-01&amp;#39; AND order_date &amp;lt; &amp;#39;2023-02-01&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†æ—¶é—´éƒ¨åˆ†&lt;/strong&gt;ï¼šå¦‚æœä½ çš„å­—æ®µæ˜¯ &lt;code&gt;DATETIME&lt;/code&gt;æˆ– &lt;code&gt;TIMESTAMP&lt;/code&gt;ç±»å‹ï¼ˆå¦‚ &amp;lsquo;2023-10-05 14:30:00&amp;rsquo;ï¼‰ï¼Œä¸Šè¿°å‡½æ•°ä»ç„¶æœ‰æ•ˆï¼Œå®ƒä»¬ä¼š&lt;strong&gt;è‡ªåŠ¨å¿½ç•¥æ—¶é—´éƒ¨åˆ†&lt;/strong&gt;ï¼Œåªæå–æ—¥æœŸéƒ¨åˆ†çš„å¹´ä»½å’Œæœˆä»½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ çµæ´»åœ°åœ¨ MySQL ä¸­è·å–æ—¥æœŸå­—æ®µçš„å¹´ä»½å’Œæœˆä»½ã€‚å¦‚æœä½ æœ‰æ›´å¤šé—®é¢˜ï¼Œæ¬¢è¿æå‡ºï¼&lt;/p&gt;
&lt;h2 id="with"&gt;WITH
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;WITH&lt;/code&gt; å­å¥ï¼Œä¹Ÿç§°ä¸ºå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ˆCommon Table Expressionï¼ŒCTEï¼‰ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå°¤å…¶ç”¨äºç®€åŒ–å¤æ‚æŸ¥è¯¢ã€æé«˜ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»å…¶è¯­æ³•ã€åº”ç”¨åœºæ™¯åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€åŸºæœ¬æ¦‚å¿µ"&gt;ğŸ“Œ ä¸€ã€åŸºæœ¬æ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;WITH&lt;/code&gt; å­å¥å…è®¸ä½ åœ¨ä¸€ä¸ªæŸ¥è¯¢ä¸­å®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„ã€å‘½åçš„ç»“æœé›†ï¼Œè¿™ä¸ªç»“æœé›†å¯ä»¥è¢«ç´§éšå…¶åçš„ä¸»æŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;SELECT&lt;/code&gt;ã€&lt;code&gt;INSERT&lt;/code&gt;ã€&lt;code&gt;UPDATE&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt; ç”šè‡³ &lt;code&gt;CREATE VIEW&lt;/code&gt;ï¼‰å¼•ç”¨ã€‚è¿™ä¸ªä¸´æ—¶ç»“æœé›†ä»…åœ¨å½“å‰æŸ¥è¯¢æ‰§è¡ŒæœŸé—´å­˜åœ¨ï¼ŒæŸ¥è¯¢ç»“æŸåè‡ªåŠ¨æ¶ˆå¤±ï¼Œæ— éœ€æ‰‹åŠ¨æ¸…ç†ã€‚&lt;/p&gt;
&lt;h3 id="-äºŒè¯­æ³•ç»“æ„"&gt;ğŸ“ äºŒã€è¯­æ³•ç»“æ„
&lt;/h3&gt;&lt;h4 id="1-åŸºæœ¬è¯­æ³•éé€’å½’-cte"&gt;1. åŸºæœ¬è¯­æ³•ï¼ˆéé€’å½’ CTEï¼‰
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cte_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;column1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;column2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...)]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- å®šä¹‰CTEçš„æŸ¥è¯¢ï¼ˆä¸€ä¸ªSELECTè¯­å¥ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- ä¸»æŸ¥è¯¢ï¼Œä½¿ç”¨ä¸Šé¢å®šä¹‰çš„CTE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cte_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â€¢ &lt;code&gt;cte_name&lt;/code&gt; æ˜¯ä½ ä¸ºè¿™ä¸ªä¸´æ—¶ç»“æœé›†æŒ‡å®šçš„åç§°ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ &lt;code&gt;(column1, column2, ...)&lt;/code&gt; æ˜¯å¯é€‰çš„åˆ—ååˆ—è¡¨ã€‚å¦‚æœçœç•¥ï¼Œåˆ—åå°†ä» &lt;code&gt;SELECT&lt;/code&gt; è¯­å¥ä¸­æ¨æ–­ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ å®šä¹‰å¤šä¸ª CTE æ—¶ï¼Œç”¨é€—å·åˆ†éš”ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```sql
WITH
cte1 AS (SELECT ...),
cte2 AS (SELECT ... FROM cte1 ...) -- cte2 å¯ä»¥å¼•ç”¨cte1
SELECT ... FROM cte2 ...;
```
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id="2-é€’å½’è¯­æ³•é€’å½’-cte"&gt;2. é€’å½’è¯­æ³•ï¼ˆé€’å½’ CTEï¼‰
&lt;/h4&gt;&lt;p&gt;é€’å½’ CTE ç”¨äºå¤„ç†å±‚æ¬¡ç»“æ„æˆ–æ ‘å½¢æ•°æ®ï¼ˆå¦‚ç»„ç»‡æ¶æ„ã€è¯„è®ºçº¿ç¨‹ã€æ–‡ä»¶ç›®å½•ï¼‰ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;RECURSIVE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cte_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- åˆå§‹æŸ¥è¯¢ï¼ˆé”šæˆå‘˜ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;table_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;UNION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ALL&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- é€’å½’æŸ¥è¯¢ï¼ˆé€’å½’æˆå‘˜ï¼‰ï¼Œå¼•ç”¨CTEè‡ªèº«
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;table_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;JOIN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cte_name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cte_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;â€¢ &lt;code&gt;RECURSIVE&lt;/code&gt; å…³é”®å­—æ˜¯å¿…é¡»çš„ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ é€’å½’ CTE å¿…é¡»åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œç”± &lt;code&gt;UNION ALL&lt;/code&gt; è¿æ¥ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;â—¦ é”šæˆå‘˜ï¼ˆAnchor Memberï¼‰ï¼šåˆå§‹æŸ¥è¯¢ï¼Œæä¾›é€’å½’çš„èµ·ç‚¹ã€‚
â—¦ é€’å½’æˆå‘˜ï¼ˆRecursive Memberï¼‰ï¼šé€šè¿‡è”æ¥ CTE è‡ªèº«è¿›è¡Œé€’å½’ï¼Œç›´åˆ°ä¸å†è¿”å›è¡Œä¸ºæ­¢ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="-ä¸‰ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ¯ ä¸‰ã€ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;WITH&lt;/code&gt; å­å¥çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œä¸»è¦åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç®€åŒ–å¤æ‚æŸ¥è¯¢å’Œåˆ†è§£é€»è¾‘ï¼šå°†å¤æ‚çš„å¤šæ­¥éª¤æŸ¥è¯¢åˆ†è§£æˆå¤šä¸ªé€»è¾‘æ¸…æ™°çš„ CTEï¼Œä½¿ä»£ç æ›´æ˜“è¯»å’Œç»´æŠ¤ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- è®¡ç®—æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼Œå¹¶æ‰¾å‡ºé«˜äºéƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dept_avg_salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;department_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;avg_salary&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;employees&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;GROUP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;department_id&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;avg_salary&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;employees&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;JOIN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dept_avg_salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;department_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;department_id&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;avg_salary&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¿å…é‡å¤å­æŸ¥è¯¢ï¼šå½“åŒä¸€ä¸ªå­æŸ¥è¯¢éœ€è¦åœ¨ä¸»æŸ¥è¯¢ä¸­å¤šæ¬¡ä½¿ç”¨æ—¶ï¼ŒCTE å¯ä»¥é¿å…é‡å¤ç¼–å†™å’Œè®¡ç®—ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- è€Œéé‡å¤å†™ä¸¤æ¬¡ç›¸åŒçš„å­æŸ¥è¯¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;high_salary_employees&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;employee_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;employees&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;100000&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;COUNT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;high_salary_employees&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;UNION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ALL&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AVG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salary&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;high_salary_employees&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€’å½’æŸ¥è¯¢å±‚æ¬¡ç»“æ„æ•°æ®ï¼šè¿™æ˜¯é€’å½’ CTE çš„ç»å…¸ç”¨æ³•ï¼Œä¾‹å¦‚æŸ¥è¯¢ä¸€ä¸ªå‘˜å·¥çš„æ‰€æœ‰ä¸‹å±ï¼Œæˆ–ä¸€ä¸ªåˆ†ç±»çš„æ‰€æœ‰å­åˆ†ç±»ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;-- æŸ¥è¯¢éƒ¨é—¨å±‚çº§ç»“æ„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;RECURSIVE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dept_hierarchy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- é”šæˆå‘˜ï¼šé€‰æ‹©æ ¹éƒ¨é—¨ï¼ˆä¾‹å¦‚IDä¸º1çš„éƒ¨é—¨ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parent_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;level&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;departments&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;UNION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ALL&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- é€’å½’æˆå‘˜ï¼šæŸ¥æ‰¾å½“å‰å±‚çº§éƒ¨é—¨çš„ä¸‹çº§éƒ¨é—¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parent_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;level&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;departments&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INNER&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;JOIN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dept_hierarchy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parent_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dept_hierarchy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•°æ®æ¸…æ´—å’Œè½¬æ¢ç®¡é“ï¼šå¯ä»¥å®šä¹‰å¤šä¸ª CTEï¼Œé€æ­¥å¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ã€è½¬æ¢å’Œä¸°å¯Œï¼Œæœ€ååœ¨ä¸»æŸ¥è¯¢ä¸­è¾“å‡ºæœ€ç»ˆç»“æœã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;WITH&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;raw_data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;source_table&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;raw_data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enriched_data&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;AS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;calculated_column&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cleaned_data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;enriched_data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å››ä¼˜ç‚¹ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ å››ã€ä¼˜ç‚¹ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;h4 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹
&lt;/h4&gt;&lt;p&gt;â€¢ æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼šå°†å¤æ‚æŸ¥è¯¢åˆ†è§£æˆå‘½åçš„é€»è¾‘å—ï¼Œç±»ä¼¼ç¼–ç¨‹ä¸­çš„å˜é‡å®šä¹‰ï¼Œä½¿ SQL ç»“æ„æ¸…æ™°æ˜“æ‡‚ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ ä»£ç é‡ç”¨ï¼šé¿å…åœ¨æŸ¥è¯¢ä¸­é‡å¤ç¼–å†™ç›¸åŒçš„å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ æ”¯æŒé€’å½’æŸ¥è¯¢ï¼šæä¾›äº†å¤„ç†å±‚æ¬¡ç»“æ„æ•°æ®çš„ä¼˜é›…è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h4 id="æ³¨æ„äº‹é¡¹ä¸é™åˆ¶"&gt;æ³¨æ„äº‹é¡¹ä¸é™åˆ¶
&lt;/h4&gt;&lt;p&gt;â€¢ ç‰ˆæœ¬å…¼å®¹æ€§ï¼šMySQL 8.0 åŠä»¥ä¸Šç‰ˆæœ¬æ‰å®Œæ•´æ”¯æŒ CTE å’Œé€’å½’ CTEã€‚MySQL 5.7 åŠæ›´æ—©ç‰ˆæœ¬æ— æ³•ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ ä½œç”¨åŸŸï¼šCTE ä»…åœ¨ç´§éšå…¶åçš„å•ä¸ª SQL è¯­å¥ä¸­æœ‰æ•ˆã€‚ä¸èƒ½åœ¨åç»­çš„å…¶ä»–ç‹¬ç«‹æŸ¥è¯¢ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;â€¢ é€’å½’æ·±åº¦ä¸æ€§èƒ½ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;â—¦ é€’å½’ CTE å¯èƒ½æœ‰é»˜è®¤çš„æœ€å¤§é€’å½’æ·±åº¦é™åˆ¶ï¼ˆå¦‚ MySQL é»˜è®¤ 1000ï¼‰ï¼Œå¯é€šè¿‡ `SET @@cte_max_recursion_depth = new_value;` è°ƒæ•´ã€‚
â—¦ é€’å½’æŸ¥è¯¢å¦‚æœæ²¡æœ‰æ­£ç¡®çš„ç»ˆæ­¢æ¡ä»¶å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ã€‚åŠ¡å¿…ç¡®ä¿é€’å½’éƒ¨åˆ†èƒ½æœ€ç»ˆç»“æŸã€‚
â—¦ å¯¹äºå¤æ‚æˆ–å¤§æ•°æ®é‡çš„ CTEï¼Œè¦æ³¨æ„æŸ¥è¯¢æ€§èƒ½ï¼Œç¡®ä¿åŸºè¡¨ä¸Šæœ‰åˆé€‚çš„ç´¢å¼•ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;â€¢ ä¸ä¸´æ—¶è¡¨çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;| ç‰¹æ€§ | CTE | ä¸´æ—¶è¡¨ |
| :--- | :--- | :--- |
| ç”Ÿå‘½å‘¨æœŸ | ä»…å½“å‰è¯­å¥æœ‰æ•ˆ | ä¼šè¯ç»“æŸå‰æœ‰æ•ˆ |
| ç‰©ç†å­˜å‚¨ | ä¸ç‰©ç†å­˜å‚¨ï¼Œé€šå¸¸ä¸ºé€»è¾‘å­˜åœ¨ | å¯èƒ½å­˜å‚¨åœ¨å†…å­˜æˆ–ç£ç›˜ |
| ç´¢å¼• | ä¸èƒ½åˆ›å»ºç´¢å¼• | å¯ä»¥åˆ›å»ºç´¢å¼• |
| å¯è§æ€§ | ä»…å®šä¹‰å®ƒçš„æŸ¥è¯¢å¯è§ | åŒä¸€ä¼šè¯çš„åç»­æŸ¥è¯¢å¯è§ |
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="-æ€»ç»“-19"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;WITH&lt;/code&gt; å­å¥ï¼ˆCTEï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”å®ç”¨çš„å·¥å…·ï¼Œå®ƒèƒ½æ˜¾è‘—æå‡å¤æ‚æŸ¥è¯¢çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œå¹¶æä¾›äº†é€’å½’æŸ¥è¯¢çš„å®˜æ–¹è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒä»·å€¼åœ¨äºå…¶èƒ½å¤Ÿå°†å¤æ‚çš„æŸ¥è¯¢é€»è¾‘åˆ†è§£ä¸ºæ›´å°ã€æ›´æ˜“ç®¡ç†çš„å‘½åæ¨¡å—ï¼Œè®©ä½ èƒ½åƒæ­ç§¯æœ¨ä¸€æ ·æ„å»ºSQLæŸ¥è¯¢ï¼Œä»è€Œå†™å‡ºæ›´æ¸…æ™°ã€æ›´æ˜“äºè°ƒè¯•çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ éœ€è¦ç¼–å†™åŒ…å«å¤šå±‚åµŒå¥—å­æŸ¥è¯¢çš„å¤æ‚SQLï¼Œæˆ–è€…éœ€è¦å¤„ç†æ ‘çŠ¶ã€å±‚æ¬¡åŒ–çš„æ•°æ®å…³ç³»æ—¶ï¼Œä¸å¦¨è€ƒè™‘ä½¿ç”¨ &lt;code&gt;WITH&lt;/code&gt; å­å¥æ¥ä¼˜åŒ–ä½ çš„æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h2 id="æœ€å¤§å€¼è¡Œ"&gt;æœ€å¤§å€¼è¡Œ
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­è¦è·å–æ¯ä¸ªåˆ†ç»„é‡ŒæŸä¸ªå­—æ®µæœ€å¤§å€¼å¯¹åº”çš„æ•´è¡Œè®°å½•ï¼ˆåŒ…æ‹¬å…¶ä»–å­—æ®µï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„éœ€æ±‚ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å‡ ç§ä¸»è¦çš„æ–¹æ³•ï¼Œå¸®ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„åŒºåˆ«å’Œé€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€è·¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JOIN + å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…ˆå­æŸ¥è¯¢æ‰¾å‡ºåˆ†ç»„æœ€å¤§å€¼ï¼Œå†ä¸åŸè¡¨è¿æ¥è·å–å®Œæ•´è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€šç”¨æ€§å¼º&lt;/strong&gt;ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç¼–å†™&lt;/td&gt;
&lt;td&gt;å¦‚æœæœ€å¤§å€¼å¯¹åº”å¤šæ¡è®°å½•ï¼Œä¼š&lt;strong&gt;è¿”å›æ‰€æœ‰è®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨WHEREæ¡ä»¶ä¸­ä½¿ç”¨å­æŸ¥è¯¢ï¼Œç›´æ¥åŒ¹é…åˆ†ç»„å†…æœ€å¤§å€¼&lt;/td&gt;
&lt;td&gt;å†™æ³•ç›¸å¯¹ç®€æ´&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å¯èƒ½è¾ƒå·®&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯æ•°æ®é‡å¤§æ—¶ï¼Œå› ä¸ºæ¯æ¡è®°å½•éƒ½å¯èƒ½æ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NOT EXISTS&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥æ‰¾ä¸å­˜åœ¨æ¯”å½“å‰è®°å½•å€¼æ›´å¤§çš„è®°å½•ï¼Œè¯¥è®°å½•å³ä¸ºæœ€å¤§å€¼æ‰€åœ¨è¡Œ&lt;/td&gt;
&lt;td&gt;é€»è¾‘å·§å¦™ï¼Œé€‚åˆç†è§£NOT EXISTSç”¨æ³•&lt;/td&gt;
&lt;td&gt;åŒæ ·å¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œéœ€è¦ç¡®ä¿ç›¸å…³å­—æ®µæœ‰ç´¢å¼•ä¼˜åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çª—å£å‡½æ•° (ROW_NUMBER)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;ç­‰çª—å£å‡½æ•°ä¸ºåˆ†ç»„å†…è®°å½•æ’åºï¼Œå†ç­›é€‰æ’åç¬¬ä¸€çš„è®°å½•&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;MySQL 8.0+æ”¯æŒ&lt;/strong&gt;ï¼Œ&lt;strong&gt;ç°ä»£ä¸”é«˜æ•ˆ&lt;/strong&gt;ï¼Œå¯çµæ´»å¤„ç†â€œTop Nâ€é—®é¢˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»…é€‚ç”¨äºMySQL 8.0åŠä»¥ä¸Šç‰ˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ§  æœ€å¸¸ç”¨å’Œæ¨èçš„æ–¹æ³•æ˜¯ &lt;strong&gt;JOIN + å­æŸ¥è¯¢&lt;/strong&gt;ï¼Œå…¶æ€è·¯æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ‰¾å‡ºåˆ†ç»„æœ€å¤§å€¼&lt;/strong&gt;ï¼šä½¿ç”¨å­æŸ¥è¯¢å’Œ &lt;code&gt;GROUP BY&lt;/code&gt;è®¡ç®—å‡ºæ¯ä¸ªåˆ†ç»„çš„æœ€å¤§å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥å›åŸè¡¨&lt;/strong&gt;ï¼šå°†åŸè¡¨ä¸ç¬¬1æ­¥çš„ç»“æœè¿æ¥ï¼ŒåŒ¹é…åˆ†ç»„å­—æ®µå’Œæœ€å¤§å€¼å­—æ®µï¼Œä»è€Œå¾—åˆ°æœ€å¤§å€¼å¯¹åº”çš„å®Œæ•´è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
t1.*
FROM
your_table t1
JOIN (
SELECT
group_column,
MAX(value_column) AS max_value
FROM
your_table
GROUP BY
group_column
) t2
ON
t1.group_column = t2.group_column
AND t1.value_column = t2.max_value;
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;ğŸ“– &lt;strong&gt;æ›´å¤šæ–¹æ³•è¯¦è§£&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡åœ¨å¤–å±‚æŸ¥è¯¢çš„WHEREæ¡ä»¶ä¸­åµŒå¥—ä¸€ä¸ªä¸å½“å‰è¡Œå…³è”çš„å­æŸ¥è¯¢æ¥åŒ¹é…æœ€å¤§å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM your_table t1
WHERE t1.value_column = (
SELECT MAX(t2.value_column)
FROM your_table t2
WHERE t2.group_column = t1.group_column
);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ NOT EXISTS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ£€æŸ¥ä¸å­˜åœ¨æ¯”å½“å‰è¡Œå€¼æ›´å¤§çš„è®°å½•æ¥ç¡®å®šæœ€å¤§å€¼è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM your_table t1
WHERE NOT EXISTS (
SELECT 1
FROM your_table t2
WHERE
t2.group_column = t1.group_column
AND t2.value_column &amp;gt; t1.value_column
);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨çª—å£å‡½æ•°ï¼ˆMySQL 8.0+ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨çš„æ˜¯ MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œçª—å£å‡½æ•°æä¾›äº†æ›´ç°ä»£å’Œé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå°¤å…¶é€‚ç”¨äºè·å–â€œå‰Næ¡â€è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM (
SELECT
*,
ROW_NUMBER() OVER (PARTITION BY group_column ORDER BY value_column DESC) AS rn
FROM your_table
) ranked
WHERE rn = 1;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;âš¡ &lt;strong&gt;é‡è¦æ³¨æ„äº‹é¡¹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†é‡å¤æœ€å¤§å€¼&lt;/strong&gt;ï¼šå¦‚æœåˆ†ç»„å†…å­˜åœ¨å¤šæ¡è®°å½•å…·æœ‰ç›¸åŒçš„æœ€å¤§å€¼ï¼Œ&lt;strong&gt;ä¸Šè¿°æ–¹æ³•ï¼ˆé™¤çª—å£å‡½æ•°ï¼‰ä¼šè¿”å›æ‰€æœ‰è¿™äº›è®°å½•&lt;/strong&gt;ã€‚å¦‚æœä½ åªæƒ³è¦ä¸€æ¡è®°å½•ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;MIN()&lt;/code&gt;æˆ– &lt;code&gt;MAX()&lt;/code&gt;å¯¹å…¶ä»–å­—æ®µè¿›è¡Œé¢å¤–æ§åˆ¶ï¼Œæˆ–è€…ä½¿ç”¨ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;çª—å£å‡½æ•°å¹¶æŒ‡å®šé¢å¤–çš„æ’åºæ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šç¡®ä¿&lt;strong&gt;è¿æ¥æ¡ä»¶ï¼ˆ&lt;code&gt;group_column&lt;/code&gt;ï¼‰å’Œç”¨äºæŸ¥æ‰¾æœ€å¤§å€¼çš„å­—æ®µï¼ˆ&lt;code&gt;value_column&lt;/code&gt;ï¼‰ä¸Šæœ‰ç´¢å¼•&lt;/strong&gt;ï¼Œè¿™å¯ä»¥æ˜¾è‘—æå‡å¤§æ•°æ®é‡ä¸‹çš„æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ ONLY_FULL_GROUP_BY&lt;/strong&gt;ï¼šåœ¨ MySQL ä¸­ï¼Œå¦‚æœ &lt;code&gt;sql_mode&lt;/code&gt;åŒ…å«äº† &lt;code&gt;ONLY_FULL_GROUP_BY&lt;/code&gt;ï¼Œç›´æ¥åœ¨é€‰æ‹©åˆ—è¡¨ä¸­ä½¿ç”¨éèšåˆåˆ—è€Œæœªåœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥ä¸­æŒ‡å®šä¼šå¯¼è‡´é”™è¯¯ã€‚æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•éƒ½æ˜¯ä¸ºäº†è§„é¿è¿™ä¸ªé™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©åˆé€‚çš„æ–¹æ³•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;å¤§å¤šæ•°æƒ…å†µ&lt;/strong&gt;ï¼Œ&lt;strong&gt;&lt;code&gt;JOIN + å­æŸ¥è¯¢&lt;/code&gt;&lt;/strong&gt; æ˜¯ä¸€ä¸ªå¹³è¡¡äº†å¯è¯»æ€§å’Œæ€§èƒ½çš„å¥½é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨çš„æ˜¯ &lt;strong&gt;MySQL 8.0+&lt;/strong&gt;ï¼Œ&lt;strong&gt;çª—å£å‡½æ•°&lt;/strong&gt;é€šå¸¸æ˜¯æœ€ä¼˜è§£ï¼Œè¯­æ³•æ›´ç°ä»£ä¸”çµæ´»ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;å°å‹æ•°æ®é›†&lt;/strong&gt;ï¼Œç›¸å…³å­æŸ¥è¯¢æˆ– &lt;code&gt;NOT EXISTS&lt;/code&gt;å¯èƒ½å†™èµ·æ¥æ›´ç®€å•ï¼Œä½†è¦ç•™æ„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="row_number--rank"&gt;ROW_NUMBER &amp;amp; RANK
&lt;/h2&gt;&lt;p&gt;ROW_NUMBER å’Œ RANK éƒ½æ˜¯ SQL ä¸­å¸¸ç”¨çš„çª—å£å‡½æ•°ï¼Œç”¨äºç»™æ•°æ®åˆ†é…åºå·ï¼Œä½†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«åœ¨äº&lt;strong&gt;å¦‚ä½•å¤„ç†ç›¸åŒæ’åºå€¼çš„æƒ…å†µ&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒå·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ROW_NUMBER&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;RANK&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»å¯¹æ’å&lt;/strong&gt;ï¼Œåƒâ€œç›´ç”·â€ï¼Œé“é¢æ— ç§ï¼Œä¸¥æ ¼æŒ‰è¡Œæ’åº&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·³è·ƒæ’å&lt;/strong&gt;ï¼Œè®²â€œå…¬å¹³â€ï¼Œå…è®¸å¹¶åˆ—ï¼Œå¹¶è·³è¿‡åç»­åæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’åç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å”¯ä¸€ä¸”è¿ç»­&lt;/strong&gt;çš„åºå· (å¦‚ 1, 2, 3, 4)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…è®¸å¹¶åˆ—&lt;/strong&gt;ï¼Œ&lt;strong&gt;åç»­åºå·è·³è·ƒ&lt;/strong&gt; (å¦‚ 1, 1, &lt;strong&gt;3&lt;/strong&gt;, 4)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦æœ‰å¹¶åˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä¸å­˜åœ¨å¹¶åˆ—ï¼Œå³ä½¿å€¼ç›¸åŒä¹Ÿå¼ºåˆ¶åˆ†é…ä¸åŒåºå·&lt;/td&gt;
&lt;td&gt;âœ… å­˜åœ¨å¹¶åˆ—ï¼Œç›¸åŒå€¼å…±äº«åŒä¸€æ’å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦è·³å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä¸è·³å·ï¼Œåºå·è¿ç»­é€’å¢&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;è·³å·&lt;/strong&gt;ï¼Œå¹¶åˆ—çš„è®°å½•æ•°ä¼šå½±å“åç»­æ’å&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ“Š &lt;strong&gt;è¯­æ³•ä¸ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸¤è€…çš„åŸºç¡€è¯­æ³•ç±»ä¼¼ï¼Œéƒ½éœ€è¦åœ¨ &lt;code&gt;OVER&lt;/code&gt;å­å¥ä¸­æŒ‡å®š &lt;code&gt;ORDER BY&lt;/code&gt;æ¥è¿›è¡Œæ’åºï¼Œå¹¶å¯é€‰æ‹©ç”¨ &lt;code&gt;PARTITION BY&lt;/code&gt;è¿›è¡Œåˆ†ç»„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ROW_NUMBER() OVER ([PARTITION BY ...] ORDER BY ...)
RANK() OVER ([PARTITION BY ...] ORDER BY ...)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€å¼ å‘˜å·¥è¡¨ &lt;code&gt;employees&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;EmployeeID&lt;/th&gt;
&lt;th&gt;Department&lt;/th&gt;
&lt;th&gt;Salary&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;5000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7000&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7000&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;IT&lt;/td&gt;
&lt;td&gt;8000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;IT&lt;/td&gt;
&lt;td&gt;9000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ ROW_NUMBER&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
EmployeeID, Department, Salary,
ROW_NUMBER() OVER (PARTITION BY Department ORDER BY Salary DESC) AS RowNum
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šHRéƒ¨é—¨ä¸­ä¸¤ä¸ª7000çš„å‘˜å·¥è¢«èµ‹äºˆäº†ä¸åŒçš„è¿ç»­åºå·ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;EmployeeID&lt;/th&gt;
&lt;th&gt;Department&lt;/th&gt;
&lt;th&gt;Salary&lt;/th&gt;
&lt;th&gt;RowNum&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7000&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7000&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;5000&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;IT&lt;/td&gt;
&lt;td&gt;9000&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;IT&lt;/td&gt;
&lt;td&gt;8000&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ RANK&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
EmployeeID, Department, Salary,
RANK() OVER (PARTITION BY Department ORDER BY Salary DESC) AS RankNum
FROM employees;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼šHRéƒ¨é—¨ä¸­ä¸¤ä¸ª7000çš„å‘˜å·¥å¹¶åˆ—ç¬¬ä¸€ï¼Œå¯¼è‡´ä¸‹ä¸€ä¸ªæ’åç›´æ¥è·³åˆ°ç¬¬ä¸‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;EmployeeID&lt;/th&gt;
&lt;th&gt;Department&lt;/th&gt;
&lt;th&gt;Salary&lt;/th&gt;
&lt;th&gt;RankNum&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7000&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7000&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;HR&lt;/td&gt;
&lt;td&gt;5000&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;IT&lt;/td&gt;
&lt;td&gt;9000&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;IT&lt;/td&gt;
&lt;td&gt;8000&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ¯ &lt;strong&gt;å¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä½ çš„ç›®æ ‡æ¥å†³å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ROW_NUMBER()&lt;/code&gt;&lt;/strong&gt; å½“ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ éœ€è¦&lt;strong&gt;ç»å¯¹å”¯ä¸€ã€è¿ç»­çš„åºå·&lt;/strong&gt;ï¼Œä¾‹å¦‚è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;ä½ éœ€è¦&lt;strong&gt;åˆ é™¤é‡å¤æ•°æ®&lt;/strong&gt;ï¼Œåªä¿ç•™æ¯ç»„ä¸­çš„ä¸€æ¡è®°å½•ï¼ˆä¾‹å¦‚ï¼ŒæŒ‰ç‰¹å®šæ’åºä¿ç•™æ¯ç»„ç¬¬ä¸€æ¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½ &lt;strong&gt;ä¸å…³å¿ƒæ’åºå€¼æ˜¯å¦ç›¸åŒ&lt;/strong&gt;ï¼Œåªè¦æ±‚ä¸€ä¸ªä¸¥æ ¼çš„é¡ºåºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;RANK()&lt;/code&gt;&lt;/strong&gt; å½“ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ éœ€è¦&lt;strong&gt;å¤„ç†å¹¶åˆ—æ’å&lt;/strong&gt;ï¼Œå¹¶ä¸”å¸Œæœ›åç»­æ’ååæ˜ è·³è·ƒï¼ˆå¦‚æˆç»©æ’åï¼šå¹¶åˆ—ç¬¬ä¸€åï¼Œä¸‹ä¸€ä¸ªæ˜¯ç¬¬ä¸‰åï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½ å¸Œæœ›çœ‹åˆ°æ•°æ®åœ¨ç»„å†…çš„&lt;strong&gt;çœŸå®æ’åä½ç½®&lt;/strong&gt;ï¼Œå³ä½¿åæ¬¡ä¸è¿ç»­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;æç¤º&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿˜æœ‰ä¸€ä¸ªå« &lt;strong&gt;&lt;code&gt;DENSE_RANK()&lt;/code&gt;&lt;/strong&gt; çš„å‡½æ•°ï¼Œå®ƒå¤„ç†å¹¶åˆ—æ—¶ï¼Œåç»­æ’åæ˜¯&lt;strong&gt;è¿ç»­&lt;/strong&gt;çš„ï¼ˆä¾‹å¦‚ï¼š1, 1, 2, 3ï¼‰ã€‚è¿™åœ¨éœ€è¦è¿ç»­åæ¬¡çš„åœºæ™¯ï¼ˆå¦‚å¥–é¡¹è¯„å®šï¼‰ä¸­å¾ˆå¸¸ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©æ’åºå­—æ®µ (&lt;code&gt;ORDER BY&lt;/code&gt;) è‡³å…³é‡è¦ï¼Œå®ƒç›´æ¥å†³å®šäº†æ’åçš„ä¾æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;æ˜¯å¯é€‰çš„ï¼Œä½†å®ƒèƒ½è®©ä½ åœ¨æŒ‡å®šçš„åˆ†ç»„å†…è¿›è¡Œæ’åï¼Œéå¸¸å®ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ¥šåœ°ç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼&lt;/p&gt;
&lt;h2 id="week"&gt;week
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;WEEK()&lt;/code&gt;å‡½æ•°ç”¨äºè·å–æŒ‡å®šæ—¥æœŸåœ¨ä¸€å¹´ä¸­çš„å‘¨æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„æ ¸å¿ƒåœ¨äºå…¶å¯é€‰çš„ &lt;code&gt;mode&lt;/code&gt;å‚æ•°ï¼Œè¯¥å‚æ•°å†³å®šäº†å‘¨çš„è®¡ç®—è§„åˆ™ï¼Œä¾‹å¦‚ä¸€å‘¨ä»å“ªä¸€å¤©å¼€å§‹ï¼Œä»¥åŠå¦‚ä½•ç•Œå®šæ¯å¹´çš„ç¬¬ä¸€å‘¨ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¨¡å¼ (Mode)&lt;/th&gt;
&lt;th&gt;ä¸€å‘¨çš„ç¬¬ä¸€å¤©&lt;/th&gt;
&lt;th&gt;è¿”å›å€¼èŒƒå›´&lt;/th&gt;
&lt;th&gt;ç¬¬ä¸€å‘¨è®¡ç®—è§„åˆ™&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;å‘¨æ—¥&lt;/td&gt;
&lt;td&gt;0 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å«æœ¬å¹´ç¬¬ä¸€å¤©ï¼ˆ1æœˆ1æ—¥ï¼‰çš„å‘¨ï¼Œä¸”è¯¥å‘¨åŒ…å«ä¸€ä¸ªæ˜ŸæœŸæ—¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;å‘¨ä¸€&lt;/td&gt;
&lt;td&gt;0 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å« &amp;gt;=4 å¤©åœ¨æœ¬å¹´çš„å‘¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;å‘¨æ—¥&lt;/td&gt;
&lt;td&gt;1 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å«æœ¬å¹´ç¬¬ä¸€å¤©ï¼ˆ1æœˆ1æ—¥ï¼‰çš„å‘¨ï¼Œä¸”è¯¥å‘¨åŒ…å«ä¸€ä¸ªæ˜ŸæœŸæ—¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‘¨ä¸€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1 - 53&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŒ…å« &amp;gt;=4 å¤©åœ¨æœ¬å¹´çš„å‘¨ (ç¬¦åˆ ISO 8601 å›½é™…æ ‡å‡†)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;å‘¨æ—¥&lt;/td&gt;
&lt;td&gt;0 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å« &amp;gt;=4 å¤©åœ¨æœ¬å¹´çš„å‘¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;å‘¨ä¸€&lt;/td&gt;
&lt;td&gt;0 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å«æœ¬å¹´ç¬¬ä¸€å¤©ï¼ˆ1æœˆ1æ—¥ï¼‰çš„å‘¨ï¼Œä¸”è¯¥å‘¨åŒ…å«ä¸€ä¸ªæ˜ŸæœŸä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;å‘¨æ—¥&lt;/td&gt;
&lt;td&gt;1 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å« &amp;gt;=4 å¤©åœ¨æœ¬å¹´çš„å‘¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;å‘¨ä¸€&lt;/td&gt;
&lt;td&gt;1 - 53&lt;/td&gt;
&lt;td&gt;åŒ…å«æœ¬å¹´ç¬¬ä¸€å¤©ï¼ˆ1æœˆ1æ—¥ï¼‰çš„å‘¨ï¼Œä¸”è¯¥å‘¨åŒ…å«ä¸€ä¸ªæ˜ŸæœŸä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•å’Œå‚æ•°"&gt;ğŸ§  è¯­æ³•å’Œå‚æ•°
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;WEEK()&lt;/code&gt;å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WEEK(date[, mode])
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;date&lt;/code&gt;&lt;/strong&gt;ï¼šå¿…éœ€çš„å‚æ•°ã€‚è¦æå–å‘¨æ•°çš„æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;mode&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰çš„å‚æ•°ã€‚å®ƒå†³å®šäº†å‘¨çš„è®¡ç®—è§„åˆ™ã€‚å¦‚æœçœç•¥ï¼ŒMySQL ä¼šä½¿ç”¨ç³»ç»Ÿå˜é‡ &lt;code&gt;default_week_format&lt;/code&gt;çš„å€¼ï¼ˆé€šå¸¸é»˜è®¤ä¸º 0ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¬¬ä¸€å‘¨çš„è®¡ç®—è§„åˆ™"&gt;ğŸ“… ç¬¬ä¸€å‘¨çš„è®¡ç®—è§„åˆ™
&lt;/h3&gt;&lt;p&gt;â€œç¬¬ä¸€å‘¨â€çš„ç•Œå®šä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸åŒ &lt;code&gt;mode&lt;/code&gt;å€¼äº§ç”Ÿå·®å¼‚çš„æ ¸å¿ƒåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒ…å«æœ¬å¹´ç¬¬ä¸€å¤©çš„å‘¨&lt;/strong&gt;ï¼šåªè¦ä¸€å‘¨ä¸­åŒ…å«1æœˆ1æ—¥ï¼Œå°±è¢«è§†ä¸ºç¬¬ä¸€å‘¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒ…å«4å¤©æˆ–æ›´å¤šå¤©åœ¨æœ¬å¹´çš„å‘¨&lt;/strong&gt;ï¼šä¸€å¹´ä¸­çš„ç¬¬ä¸€å‘¨å¿…é¡»æ˜¯åŒ…å«äº†è‡³å°‘4å¤©å±äºæœ¬å¹´çš„å‘¨ï¼ˆæ ¹æ®ä¸€å‘¨èµ·å§‹æ—¥çš„ä¸åŒï¼Œå¯èƒ½æ˜¯ä»ä¸Šå‘¨å¼€å§‹ï¼‰ã€‚&lt;strong&gt;æ¨¡å¼3 (mode=3) éµå¾ªæ­¤è§„åˆ™ï¼Œå¹¶ä¸”ç¬¦åˆ ISO 8601 å›½é™…æ ‡å‡†&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å›½é™…æ ‡å‡†mode-3"&gt;ğŸŒ å›½é™…æ ‡å‡†ï¼šMode 3
&lt;/h3&gt;&lt;p&gt;å¯¹äºå›½é™…ä¸šåŠ¡æˆ–éœ€è¦ç¬¦åˆé€šç”¨æ ‡å‡†çš„åœºæ™¯ï¼Œ&lt;strong&gt;å¼ºçƒˆæ¨èä½¿ç”¨ &lt;code&gt;mode=3&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒç¬¦åˆ ISO 8601 æ ‡å‡†ï¼Œè§„å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯å‘¨ä»&lt;strong&gt;æ˜ŸæœŸä¸€å¼€å§‹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¯å¹´çš„ç¬¬ä¸€å‘¨æ˜¯åŒ…å«&lt;strong&gt;å½“å¹´è‡³å°‘4å¤©&lt;/strong&gt;çš„é‚£ä¸€å‘¨ï¼ˆé€šå¸¸ä¹Ÿç­‰åŒäºåŒ…å«å½“å¹´ç¬¬ä¸€ä¸ªæ˜ŸæœŸå››çš„é‚£å‘¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç›¸å…³å‡½æ•°"&gt;ğŸ”¢ ç›¸å…³å‡½æ•°
&lt;/h3&gt;&lt;p&gt;é™¤äº† &lt;code&gt;WEEK()&lt;/code&gt;ï¼ŒMySQL è¿˜æä¾›äº†å…¶ä»–ä¸€äº›ç›¸å…³çš„å‘¨å‡½æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;YEARWEEK(date[, mode])&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›ä¸€ä¸ªç»„åˆå€¼ï¼ŒåŒ…å«å¹´ä»½å’Œå‘¨æ•°ï¼ˆæ ¼å¼ä¸º &lt;code&gt;YYYYWW&lt;/code&gt;ï¼‰ï¼Œè¿™å¯¹äºæŒ‰å¹´å’Œå‘¨å”¯ä¸€æ ‡è¯†ä¸€æ®µæ—¶é—´éå¸¸æœ‰ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;YEARWEEK&lt;/code&gt;å‡½æ•°çš„æ¨¡å¼è¡Œä¸ºä¸ &lt;code&gt;WEEK&lt;/code&gt;ç•¥æœ‰ä¸åŒï¼Œå®ƒ&lt;strong&gt;æ²¡æœ‰ 0 å‘¨&lt;/strong&gt;ï¼Œè·¨å¹´å‘¨ä¼šè¢«å½’å…¥ä¸Šä¸€å¹´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WEEKOFYEAR(date)&lt;/code&gt;&lt;/strong&gt;ï¼šæ­¤å‡½æ•°ç­‰ä»·äº &lt;code&gt;WEEK(date, 3)&lt;/code&gt;ï¼Œå³ä½¿ç”¨ ISO 8601 æ ‡å‡†è®¡ç®—å‘¨æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-5"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹´å‘¨çš„å¤„ç†&lt;/strong&gt;ï¼šä¸€å¹´çš„æœ€åå‡ å¤©å¯èƒ½ä¼šè¢«ç®—å…¥ä¸‹ä¸€å¹´çš„ç¬¬ä¸€å‘¨ï¼ˆä¾‹å¦‚ &lt;code&gt;WEEK('2022-12-31', 3)&lt;/code&gt;å¯èƒ½è¿”å› 2023 å¹´çš„ç¬¬ä¸€å‘¨ï¼‰ã€‚åŒæ ·ï¼Œä¸€å¹´çš„å¤´å‡ å¤©ä¹Ÿå¯èƒ½ä»å±äºä¸Šä¸€å¹´çš„æœ€åä¸€å‘¨ã€‚ä½¿ç”¨ &lt;code&gt;YEARWEEK()&lt;/code&gt;å‡½æ•°å¯ä»¥æ›´æ¸…æ™°åœ°å¤„ç†è¿™ç±»è·¨å¹´æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å®š &lt;code&gt;mode&lt;/code&gt;å‚æ•°&lt;/strong&gt;ï¼šç”±äº &lt;code&gt;mode&lt;/code&gt;å‚æ•°æ˜¾è‘—å½±å“ç»“æœï¼Œ&lt;strong&gt;åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–éœ€è¦æ˜ç¡®è§„åˆ™çš„æŸ¥è¯¢ä¸­ï¼ŒåŠ¡å¿…æ˜¾å¼æŒ‡å®š &lt;code&gt;mode&lt;/code&gt;å€¼&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ä¾èµ–é»˜è®¤è®¾ç½®ï¼Œä»¥é¿å…æ„å¤–è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ¥è¡¨ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨ç”Ÿæˆè·¨å‘¨æŠ¥è¡¨æˆ–æŒ‰å‘¨åˆ†ç»„ç»Ÿè®¡æ—¶ï¼Œç¡®ä¿æ‰€æœ‰æŸ¥è¯¢éƒ½ä½¿ç”¨ç›¸åŒçš„ &lt;code&gt;mode&lt;/code&gt;å€¼ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹"&gt;ğŸ’¡ ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- è·å–å½“å‰æ—¥æœŸæŒ‰ISOå‘¨æ ‡å‡†çš„å‘¨æ•°ï¼ˆæ¨èï¼‰
SELECT WEEK(CURDATE(), 3) AS current_iso_week;
-- è·å–ç‰¹å®šæ—¥æœŸåœ¨ä¸åŒæ¨¡å¼ä¸‹çš„å‘¨æ•°
SELECT
WEEK(&amp;#39;2023-01-01&amp;#39;, 0) AS mode0, -- å¯èƒ½è¿”å›0æˆ–1
WEEK(&amp;#39;2023-01-01&amp;#39;, 3) AS mode3; -- è¿”å›ç¬¦åˆISOæ ‡å‡†çš„å‘¨æ•°
-- ç»“åˆYEARWEEKä½¿ç”¨ï¼Œè·å–å¹´å’Œå‘¨çš„å”¯ä¸€æ ‡è¯†
SELECT YEARWEEK(&amp;#39;2023-12-31&amp;#39;, 3) AS year_week; -- å¯èƒ½è¿”å› 202352
-- æŒ‰ISOå‘¨è¿›è¡Œåˆ†ç»„ç»Ÿè®¡
SELECT
YEARWEEK(sale_date, 3) AS sale_week,
COUNT(*) AS total_sales
FROM sales
GROUP BY sale_week;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢äº†è§£ MySQL çš„ &lt;code&gt;WEEK&lt;/code&gt;å‡½æ•°ï¼&lt;/p&gt;
&lt;h2 id="min-is-null"&gt;min is null
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fi&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;patient_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;first_infection&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;covid_tests&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;result&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Positive&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;group&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;patient_id&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;min(test_date) æ˜¯å¦å¯èƒ½ä¸ºnullï¼Ÿæ˜¯å¦éœ€è¦æ·»åŠ  &amp;ldquo;having count(*) &amp;gt; 0&amp;rdquo; æ¥æ’é™¤ null å€¼ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½ åœ¨ä½¿ç”¨ &lt;code&gt;MIN()&lt;/code&gt;å‡½æ•°æ—¶è€ƒè™‘ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æƒ…å†µï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚æ ¹æ®ä½ çš„ä»£ç ç‰‡æ®µå’Œé—®é¢˜ï¼Œæˆ‘æ¥ä¸ºä½ åˆ†æä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒç»“è®º"&gt;ğŸ§  æ ¸å¿ƒç»“è®º
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;MIN(test_date)&lt;/code&gt;å¯èƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼šæ˜¯çš„ï¼Œå¦‚æœæŸä¸ª &lt;code&gt;patient_id&lt;/code&gt;åœ¨ &lt;code&gt;covid_tests&lt;/code&gt;è¡¨ä¸­&lt;strong&gt;æ²¡æœ‰ä»»ä½•ä¸€æ¡&lt;/strong&gt; &lt;code&gt;result = 'Positive'&lt;/code&gt;çš„è®°å½•ï¼Œé‚£ä¹ˆè¯¥æ‚£è€…çš„åˆ†ç»„ä¸­ &lt;code&gt;test_date&lt;/code&gt;å­—æ®µå°±æ²¡æœ‰ä»»ä½•é &lt;code&gt;NULL&lt;/code&gt;å€¼å¯ä¾›è®¡ç®—ï¼Œ&lt;code&gt;MIN(test_date)&lt;/code&gt;å°±ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸éœ€è¦æ·»åŠ  &lt;code&gt;HAVING count(\*) &amp;gt; 0&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;ä¸éœ€è¦&lt;/strong&gt;ã€‚å› ä¸ºä½ çš„æŸ¥è¯¢ä¸­å·²ç»ä½¿ç”¨äº† &lt;code&gt;WHERE result = 'Positive'&lt;/code&gt;æ¡ä»¶ã€‚è¿™æ„å‘³ç€ &lt;code&gt;GROUP BY patient_id&lt;/code&gt;åˆ›å»ºçš„æ¯ä¸ªåˆ†ç»„éƒ½&lt;strong&gt;è‡³å°‘åŒ…å«ä¸€æ¡è®°å½•&lt;/strong&gt;ï¼ˆå¦åˆ™å®ƒä¸ä¼šè¢«åˆ†ç»„ï¼‰ã€‚å› æ­¤ï¼Œ&lt;code&gt;COUNT(*)&lt;/code&gt;å¯¹äºæ¯ä¸ªç»„æ€»æ˜¯å¤§äº 0 çš„ï¼Œæ·»åŠ  &lt;code&gt;HAVING count(*) &amp;gt; 0&lt;/code&gt;æ˜¯&lt;strong&gt;å†—ä½™çš„&lt;/strong&gt;ï¼Œä¸ä¼šæ”¹å˜ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸åŒæƒ…å†µä¸‹ &lt;code&gt;MIN()&lt;/code&gt;çš„è¡Œä¸ºä»¥åŠä½ çš„æŸ¥è¯¢å¦‚ä½•å¤„ç†ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯&lt;/th&gt;
&lt;th&gt;&lt;code&gt;MIN(test_date)&lt;/code&gt;ç»“æœ&lt;/th&gt;
&lt;th&gt;ä½ çš„æŸ¥è¯¢å¦‚ä½•å¤„ç† (å¸¦ &lt;code&gt;WHERE result='Positive'&lt;/code&gt;)&lt;/th&gt;
&lt;th&gt;æ˜¯å¦éœ€è¦ &lt;code&gt;HAVING count(*) &amp;gt; 0&lt;/code&gt;ï¼Ÿ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æŸ &lt;code&gt;patient_id&lt;/code&gt;&lt;strong&gt;æœ‰&lt;/strong&gt; &lt;code&gt;result = 'Positive'&lt;/code&gt;çš„è®°å½•&lt;/td&gt;
&lt;td&gt;æœ€æ—©çš„é˜³æ€§æ£€æµ‹æ—¥æœŸ&lt;/td&gt;
&lt;td&gt;æ­£å¸¸è¿”å›è¯¥æ‚£è€…åŠå…¶æœ€æ—©é˜³æ€§æ—¥æœŸ&lt;/td&gt;
&lt;td&gt;âŒ ä¸éœ€è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æŸ &lt;code&gt;patient_id&lt;/code&gt;&lt;strong&gt;æ²¡æœ‰&lt;/strong&gt; &lt;code&gt;result = 'Positive'&lt;/code&gt;çš„è®°å½•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¯¥æ‚£è€…ä¸ä¼šå‡ºç°åœ¨ç»“æœé›†é‡Œ&lt;/strong&gt; (å› ä¸ºè¢« &lt;code&gt;WHERE&lt;/code&gt;å­å¥è¿‡æ»¤äº†)&lt;/td&gt;
&lt;td&gt;âŒ ä¸éœ€è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æŸ &lt;code&gt;patient_id&lt;/code&gt;æœ‰è®°å½•ä½† &lt;code&gt;test_date&lt;/code&gt;å­—æ®µ&lt;strong&gt;å…¨éƒ¨ä¸º &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­£å¸¸è¿”å›è¯¥æ‚£è€…ï¼Œä¸” &lt;code&gt;first_infection&lt;/code&gt;å­—æ®µä¸º &lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä¸éœ€è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥åˆ†æä¸å»ºè®®"&gt;ğŸ’¡ æ·±å…¥åˆ†æä¸å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;ä¸ &lt;code&gt;HAVING&lt;/code&gt;çš„åŒºåˆ«&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;WHERE result = 'Positive'&lt;/code&gt;åœ¨åˆ†ç»„&lt;strong&gt;å‰&lt;/strong&gt;è¿›è¡Œè¿‡æ»¤ï¼Œå®ƒå†³å®šäº†å“ªäº›è®°å½•æœ‰èµ„æ ¼è¿›å…¥åˆ†ç»„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;HAVING count(*) &amp;gt; 0&lt;/code&gt;åœ¨åˆ†ç»„&lt;strong&gt;å&lt;/strong&gt;è¿›è¡Œè¿‡æ»¤ï¼Œå®ƒæ£€æŸ¥å·²ç»å½¢æˆçš„åˆ†ç»„æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½ çš„æŸ¥è¯¢ä¸­ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;å­å¥å·²ç»ç¡®ä¿äº†åªæœ‰è‡³å°‘æœ‰ä¸€æ¡é˜³æ€§è®°å½•çš„æ‚£è€…æ‰ä¼šè¢«åˆ†ç»„ï¼Œæ‰€ä»¥ &lt;code&gt;HAVING&lt;/code&gt;å­å¥åœ¨è¿™é‡Œæ˜¯å¤šä½™çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœéœ€è¦å¤„ç†æ‰€æœ‰æ‚£è€…&lt;/strong&gt;ï¼šå¦‚æœä½ çš„æ„å›¾æ˜¯åˆ—å‡º&lt;strong&gt;æ‰€æœ‰æ‚£è€…&lt;/strong&gt;ï¼Œå³ä½¿ä»–ä»¬æ²¡æœ‰é˜³æ€§è®°å½•ï¼ˆæ­¤æ—¶ &lt;code&gt;first_infection&lt;/code&gt;ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼‰ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;æˆ–æ”¹å˜æŸ¥è¯¢ç­–ç•¥ï¼Œä½†è¿™å·²ç»ä¸æ˜¯å½“å‰æŸ¥è¯¢çš„ç›®æ ‡äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼šè™½ç„¶ä½ çš„æŸ¥è¯¢ä¸éœ€è¦ &lt;code&gt;HAVING count(*) &amp;gt; 0&lt;/code&gt;ï¼Œä½†åœ¨å…¶ä»–åœºæ™¯ä¸­ï¼Œå¦‚æœä½ éœ€è¦ç­›é€‰å‡º&lt;strong&gt;åˆ†ç»„åè®°å½•æ•°é‡æ»¡è¶³ç‰¹å®šæ¡ä»¶&lt;/strong&gt;çš„åˆ†ç»„ï¼ˆä¾‹å¦‚ï¼Œæ‰¾å‡ºæ„ŸæŸ“æ¬¡æ•°å¤§äº1æ¬¡çš„æ‚£è€…ï¼‰ï¼Œ&lt;code&gt;HAVING count(*) &amp;gt; 1&lt;/code&gt;å°±ä¼šå˜å¾—éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-20"&gt;âœ… æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å¯¹äºä½ çš„è¿™ä¸ªç‰¹å®šæŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;MIN(test_date)&lt;/code&gt;æœ‰å¯èƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼Œä½†è¿™åªä¼šå‘ç”Ÿåœ¨æŸä¸ªåˆ†ç»„å†…çš„æ‰€æœ‰ &lt;code&gt;test_date&lt;/code&gt;å€¼éƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;çš„æƒ…å†µä¸‹ï¼ˆè™½ç„¶ä½ çš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶å·²ç»éšå¼ç¡®ä¿äº†æ¯ä¸ªåˆ†ç»„è‡³å°‘æœ‰ä¸€æ¡è®°å½•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºä½¿ç”¨äº† &lt;code&gt;WHERE result = 'Positive'&lt;/code&gt;æ¡ä»¶ï¼Œ&lt;strong&gt;ä¸éœ€è¦æ·»åŠ &lt;/strong&gt; &lt;code&gt;HAVING count(*) &amp;gt; 0&lt;/code&gt;ï¼Œå› ä¸ºå®ƒä¸ä¼šæ”¹å˜æŸ¥è¯¢ç»“æœï¼Œæ˜¯å¤šä½™çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œä½ å½“å‰çš„ SQL å†™æ³•æ˜¯æ­£ç¡®çš„ï¼Œæ— éœ€æ·»åŠ  &lt;code&gt;HAVING&lt;/code&gt;å­å¥ã€‚&lt;/p&gt;
&lt;h2 id="lag"&gt;Lag
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œè®¡ç®—å½“å‰è¡Œä¸ä¸Šä¸€è¡Œæ•°æ®çš„å·®å€¼ï¼Œ&lt;strong&gt;&lt;code&gt;LAG()&lt;/code&gt;çª—å£å‡½æ•°&lt;/strong&gt;æ˜¯ä½ çš„æ ¸å¿ƒå·¥å…·ã€‚å®ƒä¸“é—¨ç”¨äºè·å–å½“å‰è¡Œä¹‹å‰æŸä¸€è¡Œçš„å€¼ï¼Œä»è€Œè½»æ¾å®ç°å·®å€¼è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ç›¸å…³çš„çª—å£å‡½æ•°ï¼Œå¸®ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°&lt;/th&gt;
&lt;th&gt;ç”¨é€”&lt;/th&gt;
&lt;th&gt;åŸºæœ¬è¯­æ³•ç¤ºä¾‹ (ä»¥ &lt;code&gt;amount&lt;/code&gt;åˆ—ä¸ºä¾‹)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LAG()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·å–å½“å‰è¡Œä¹‹å‰çš„è¡Œçš„å€¼&lt;/strong&gt;ï¼Œéå¸¸é€‚åˆè®¡ç®—â€œå½“å‰è¡Œ - å‰ä¸€è¡Œâ€çš„å·®å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LAG(amount) OVER (ORDER BY date)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LEAD()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·å–å½“å‰è¡Œä¹‹åçš„è¡Œçš„å€¼ï¼Œé€‚åˆè®¡ç®—â€œåä¸€è¡Œ - å½“å‰è¡Œâ€çš„å·®å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LEAD(amount) OVER (ORDER BY date)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£-lagå‡½æ•°"&gt;ğŸ” è¯¦è§£ &lt;code&gt;LAG()&lt;/code&gt;å‡½æ•°
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LAG()&lt;/code&gt;å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LAG(expression [, offset [, default_value]]) OVER (
[PARTITION BY partition_expression]
ORDER BY sort_expression [ASC | DESC]
)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;expression&lt;/code&gt;&lt;/strong&gt;ï¼šè¦è·å–å€¼çš„åˆ—æˆ–è¡¨è¾¾å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;offset&lt;/code&gt;&lt;/strong&gt;ï¼ˆå¯é€‰ï¼‰ï¼šæŒ‡å®šå‘å‰åç§»çš„è¡Œæ•°ï¼Œé»˜è®¤ä¸º 1ï¼ˆå³å‰ä¸€è¡Œï¼‰ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;offset&lt;/code&gt;ä¸º 2 åˆ™è·å–å‰ä¸¤è¡Œçš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;default_value&lt;/code&gt;&lt;/strong&gt;ï¼ˆå¯é€‰ï¼‰ï¼šå½“æ²¡æœ‰å‰ä¸€è¡Œï¼ˆå¦‚ç¬¬ä¸€è¡Œï¼‰æ—¶è¿”å›çš„é»˜è®¤å€¼ã€‚å¦‚æœçœç•¥ï¼Œåˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/strong&gt;ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºåˆ†åŒºçš„åˆ—ã€‚å‡½æ•°ä¼šåœ¨&lt;strong&gt;æ¯ä¸ªåˆ†åŒºå†…ç‹¬ç«‹è®¡ç®—&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼ŒæŒ‰äº§å“ç±»å‹åˆ†åŒºï¼Œåˆ™æ¯ä¸ªäº§å“ç±»å‹å†…éƒ¨ä¼šå•ç‹¬è®¡ç®—å·®å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ã€‚æŒ‡å®šè¡Œçš„æ’åºé¡ºåºï¼Œè¿™å†³å®šäº†â€œå‰ä¸€è¡Œâ€æ˜¯å“ªä¸€è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•ä½¿ç”¨-lagè®¡ç®—å·®å€¼"&gt;ğŸ§® å¦‚ä½•ä½¿ç”¨ &lt;code&gt;LAG()&lt;/code&gt;è®¡ç®—å·®å€¼
&lt;/h3&gt;&lt;p&gt;è®¡ç®—å·®å€¼çš„é€šç”¨æ¨¡å¼æ˜¯ï¼š&lt;code&gt;å½“å‰è¡Œçš„å€¼ - LAG(å½“å‰è¡Œçš„å€¼) ...&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ä½ æœ‰ä¸€ä¸ª &lt;code&gt;sales&lt;/code&gt;è¡¨ï¼ŒåŒ…å« &lt;code&gt;sale_date&lt;/code&gt;(é”€å”®æ—¥æœŸ) å’Œ &lt;code&gt;amount&lt;/code&gt;(é”€å”®é¢) å­—æ®µï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
sale_date,
amount,
amount - LAG(amount) OVER (ORDER BY sale_date) AS difference -- è®¡ç®—å·®å€¼
FROM sales;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ç»“æœç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;sale_date&lt;/th&gt;
&lt;th&gt;amount&lt;/th&gt;
&lt;th&gt;difference&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2023-01-01&lt;/td&gt;
&lt;td&gt;100.00&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2023-01-02&lt;/td&gt;
&lt;td&gt;150.00&lt;/td&gt;
&lt;td&gt;50.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2023-01-03&lt;/td&gt;
&lt;td&gt;200.00&lt;/td&gt;
&lt;td&gt;50.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2023-01-04&lt;/td&gt;
&lt;td&gt;170.00&lt;/td&gt;
&lt;td&gt;-30.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2023-01-05&lt;/td&gt;
&lt;td&gt;300.00&lt;/td&gt;
&lt;td&gt;130.00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é«˜çº§ç”¨æ³•ç¤ºä¾‹"&gt;ğŸ“Š é«˜çº§ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç† &lt;code&gt;NULL&lt;/code&gt;å€¼&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ &lt;code&gt;default_value&lt;/code&gt;å‚æ•°æˆ– &lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°ä¸ºæ²¡æœ‰å‰ä¸€è¡Œæ•°æ®çš„è¡Œï¼ˆå¦‚ç¬¬ä¸€è¡Œï¼‰æä¾›é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
sale_date,
amount,
amount - LAG(amount, 1, 0) OVER (ORDER BY sale_date) AS difference -- æ²¡æœ‰å‰ä¸€è¡Œåˆ™ç”¨0è®¡ç®—
FROM sales;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
sale_date,
amount,
COALESCE(amount - LAG(amount) OVER (ORDER BY sale_date), 0) AS difference -- å°†NULLæ›¿æ¢ä¸º0
FROM sales;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰åˆ†åŒºè®¡ç®—å·®å€¼&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;PARTITION BY&lt;/code&gt;å¯ä»¥åœ¨ä¸åŒçš„ç»„å†…åˆ†åˆ«è®¡ç®—å·®å€¼ã€‚ä¾‹å¦‚ï¼ŒæŒ‰ &lt;code&gt;product_id&lt;/code&gt;åˆ†åŒºï¼Œè®¡ç®—æ¯ä¸ªäº§å“è‡ªèº«çš„é”€å”®é¢å˜åŒ–ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
product_id,
sale_date,
amount,
amount - LAG(amount) OVER (PARTITION BY product_id ORDER BY sale_date) AS diff_within_product
FROM sales;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—æ—¶é—´é—´éš”&lt;/strong&gt;ï¼šç»“åˆ &lt;code&gt;DATEDIFF()&lt;/code&gt;ç­‰æ—¥æœŸå‡½æ•°ï¼Œå¯ä»¥è®¡ç®—æ—¥æœŸä¹‹é—´çš„å·®å€¼ã€‚ä¾‹å¦‚ï¼Œè®¡ç®—ä¸¤æ¬¡é”€å”®ä¹‹é—´çš„å¤©æ•°é—´éš”ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
sale_date,
amount,
DATEDIFF(sale_date, LAG(sale_date) OVER (ORDER BY sale_date)) AS days_since_last_sale
FROM sales;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MySQL ç‰ˆæœ¬è¦æ±‚&lt;/strong&gt;ï¼š&lt;code&gt;LAG()&lt;/code&gt;å’Œ &lt;code&gt;LEAD()&lt;/code&gt;ç­‰çª—å£å‡½æ•°éœ€è¦ &lt;strong&gt;MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦é€šè¿‡å˜é‡æˆ–è‡ªè¿æ¥ç­‰å¤æ‚æ–¹å¼å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šå¯¹å¤§å‹æ•°æ®é›†ä½¿ç”¨çª—å£å‡½æ•°æ—¶ï¼Œ&lt;strong&gt;ç¡®ä¿ &lt;code&gt;ORDER BY&lt;/code&gt;å’Œ &lt;code&gt;PARTITION BY&lt;/code&gt;ä¸­ä½¿ç”¨çš„åˆ—ä¸Šæœ‰é€‚å½“çš„ç´¢å¼•&lt;/strong&gt;ï¼Œä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ &lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;code&gt;OVER()&lt;/code&gt;å­å¥ä¸­çš„ &lt;code&gt;ORDER BY&lt;/code&gt;è‡³å…³é‡è¦ï¼Œå®ƒå†³å®šäº†è¡Œçš„é¡ºåºï¼Œä»è€Œç›´æ¥å½±å“ &lt;code&gt;LAG()&lt;/code&gt;è·å–çš„æ˜¯å“ªä¸€è¡Œçš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ é¡ºåˆ©ä½¿ç”¨çª—å£å‡½æ•°è®¡ç®—å·®å€¼ï¼&lt;/p&gt;
&lt;h2 id="ç›¸å…³å­æŸ¥è¯¢"&gt;ç›¸å…³å­æŸ¥è¯¢
&lt;/h2&gt;&lt;p&gt;ã€‚MySQL ä¸­ç›¸åŒçš„å­æŸ¥è¯¢&lt;strong&gt;æ˜¯å¦ä¼šè¢«é‡å¤æ‰§è¡Œï¼Œå–å†³äºå­æŸ¥è¯¢çš„ç±»å‹å’Œå…·ä½“åœºæ™¯&lt;/strong&gt;ã€‚ç†è§£è¿™ä¸€ç‚¹å¯¹ç¼–å†™é«˜æ•ˆçš„ SQL è¯­å¥å¾ˆé‡è¦ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­æŸ¥è¯¢ç±»å‹&lt;/th&gt;
&lt;th&gt;æ˜¯å¦ä¼šé‡å¤æ‰§è¡Œ&lt;/th&gt;
&lt;th&gt;åŸå› ä¸æœºåˆ¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt; (ä¸ä¾èµ–å¤–éƒ¨æŸ¥è¯¢)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€šå¸¸ä¸ä¼š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MySQL æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå°è¯•å°†å…¶&lt;strong&gt;æ‰§è¡Œä¸€æ¬¡å¹¶å°†ç»“æœç¼“å­˜&lt;/strong&gt;èµ·æ¥ï¼Œä¾›å¤–éƒ¨æŸ¥è¯¢é‡å¤ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt; (ä¾èµ–å¤–éƒ¨æŸ¥è¯¢çš„åˆ—)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢&lt;strong&gt;ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œ&lt;/strong&gt;ï¼Œå› æ­¤ä¼šä¸ºå¤–éƒ¨æŸ¥è¯¢ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œä¸€æ¬¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;å¦‚ä½•åˆ¤æ–­ï¼Ÿç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¦ç¡®åˆ‡çŸ¥é“ä½ çš„å­æŸ¥è¯¢æ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹æŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’ã€‚åˆ†ææ‰§è¡Œè®¡åˆ’å¯ä»¥å¸®åŠ©ä½ äº†è§£ä¼˜åŒ–å™¨é€‰æ‹©çš„è®¿é—®æ–¹æ³•ï¼ˆå¦‚æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ã€æ˜¯å¦æœ‰ä¸´æ—¶è¡¨ã€æ˜¯å¦è¿›è¡Œäº†å…¨è¡¨æ‰«æç­‰ï¼‰ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ€§èƒ½ç“¶é¢ˆã€‚&lt;/p&gt;
&lt;h3 id="-ä¼˜åŒ–å­æŸ¥è¯¢æ€§èƒ½çš„ç­–ç•¥"&gt;ğŸ”§ ä¼˜åŒ–å­æŸ¥è¯¢æ€§èƒ½çš„ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;å¦‚æœå‘ç°å­æŸ¥è¯¢å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°†å­æŸ¥è¯¢æ”¹å†™ä¸º &lt;code&gt;JOIN&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å¸¸ç”¨ä¸”æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µã€‚&lt;code&gt;JOIN&lt;/code&gt;æ“ä½œé€šå¸¸èƒ½è¢«æ•°æ®åº“æ›´å¥½åœ°ä¼˜åŒ–ï¼Œå°¤å…¶æ˜¯å½“å…³è”å­—æ®µä¸Šæœ‰ç´¢å¼•æ—¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åŸå§‹æŸ¥è¯¢ï¼šå¯èƒ½ä¸ºç›¸å…³å­æŸ¥è¯¢ï¼Œæ•ˆç‡ä½
SELECT * FROM orders o
WHERE o.customer_id IN (SELECT c.customer_id FROM customers c WHERE c.country = o.country);
-- ä¼˜åŒ–ä¸ºJOINï¼š
SELECT DISTINCT o.* FROM orders o
JOIN customers c ON o.customer_id = c.customer_id AND c.country = o.country;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;EXISTS&lt;/code&gt;ä»£æ›¿ &lt;code&gt;IN&lt;/code&gt;&lt;/strong&gt;ï¼šå¯¹äºç›¸å…³å­æŸ¥è¯¢ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ &lt;code&gt;IN&lt;/code&gt;çš„åœºæ™¯ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;å¾€å¾€æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒä¸€æ—¦æ‰¾åˆ°åŒ¹é…é¡¹å°±ä¼šåœæ­¢æ‰«æã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨ EXISTS
SELECT * FROM orders o
WHERE EXISTS (SELECT 1 FROM customers c WHERE c.customer_id = o.customer_id AND c.country = o.country);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿åˆé€‚çš„ç´¢å¼•&lt;/strong&gt;ï¼šä¸ºå­æŸ¥è¯¢ä¸­&lt;strong&gt;ç”¨äºè¿æ¥ï¼ˆ&lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶æˆ– &lt;code&gt;JOIN&lt;/code&gt;æ¡ä»¶ï¼‰çš„å­—æ®µåˆ›å»ºç´¢å¼•&lt;/strong&gt;è‡³å…³é‡è¦ï¼Œè¿™èƒ½æå¤§æå‡ both å­æŸ¥è¯¢æœ¬èº«å’Œ &lt;code&gt;JOIN&lt;/code&gt;æ“ä½œçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ä¸´æ—¶è¡¨æˆ–æ´¾ç”Ÿè¡¨ï¼ˆMySQL 5.7åŠä»¥ä¸‹ï¼‰&lt;/strong&gt;ï¼šå¯¹äºå¤æ‚æˆ–é‡å¤ä½¿ç”¨çš„éç›¸å…³å­æŸ¥è¯¢ï¼Œå¯ä»¥å°†å…¶ç»“æœå­˜å…¥ä¸´æ—¶è¡¨æˆ–ä½œä¸ºæ´¾ç”Ÿè¡¨ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚MySQL 8.0+ å¯ä»¥è€ƒè™‘ä½¿ç”¨ CTE (Common Table Expressions)ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨æ´¾ç”Ÿè¡¨
SELECT *
FROM orders o,
(SELECT customer_id FROM customers WHERE country = &amp;#39;USA&amp;#39;) AS usa_customers
WHERE o.customer_id = usa_customers.customer_id;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-21"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL æ˜¯å¦ä¼šé‡å¤æ‰§è¡Œç›¸åŒçš„å­æŸ¥è¯¢ï¼Œ&lt;strong&gt;å…³é”®åœ¨äºå­æŸ¥è¯¢æ˜¯å¦ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢ï¼ˆæ˜¯å¦æ˜¯ç›¸å…³å­æŸ¥è¯¢ï¼‰&lt;/strong&gt;ã€‚å¯¹äºéç›¸å…³å­æŸ¥è¯¢ï¼Œä¼˜åŒ–å™¨ä¼šå°½åŠ›ç¼“å­˜ï¼›è€Œå¯¹äºç›¸å…³å­æŸ¥è¯¢ï¼Œåˆ™æ— æ³•é¿å…å¤šæ¬¡æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜åŒ–å­æŸ¥è¯¢æ€§èƒ½çš„é¦–è¦æ–¹æ³•æ˜¯&lt;strong&gt;å°è¯•å°†å…¶æ”¹å†™ä¸º &lt;code&gt;JOIN&lt;/code&gt;&lt;/strong&gt;ï¼Œå¹¶ç»“åˆ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Œä»¥åŠ&lt;strong&gt;ä¸ºç›¸å…³å­—æ®µåˆ›å»ºåˆé€‚çš„ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id="with--ä¸ç›¸å…³å­æŸ¥è¯¢"&gt;WITH &amp;amp; ä¸ç›¸å…³å­æŸ¥è¯¢
&lt;/h2&gt;&lt;p&gt;MySQL å¦‚ä½•å¤„ç† SQL è¯­å¥ä¸­å¤šä¸ªç›¸åŒçš„&lt;strong&gt;ä¸ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;ï¼ˆå³ä¸ä¾èµ–å¤–éƒ¨æŸ¥è¯¢å€¼çš„å­æŸ¥è¯¢ï¼‰ï¼Œä»¥åŠä½¿ç”¨ &lt;code&gt;WITH&lt;/code&gt;(CTE) å¯¹å…¶è¡Œä¸ºçš„å½±å“ï¼Œç¡®å®æ˜¯ä¸€ä¸ªå…³ä¹æ€§èƒ½çš„é‡è¦é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;strong&gt;ç°ä»£ MySQL ä¼˜åŒ–å™¨ä¼šå°½åŠ›é¿å…é‡å¤æ‰§è¡Œç›¸åŒçš„éç›¸å…³å­æŸ¥è¯¢ï¼Œä½†ä½¿ç”¨ CTE é€šå¸¸èƒ½æä¾›æ›´æ˜ç¡®å’Œå¯é çš„æ§åˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒå¯¹æ¯”ï¼Œå¸®ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç›´æ¥ä½¿ç”¨å¤šä¸ªç›¸åŒçš„ä¸ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;WITH&lt;/code&gt;(CTE) å®šä¹‰å¹¶å¼•ç”¨&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œæ¬¡æ•° (ç†æƒ³æƒ…å†µ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡&lt;/strong&gt; (ä¼˜åŒ–å™¨å°è¯•ç¼“å­˜ç»“æœ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡&lt;/strong&gt; (CTE ç»“æœé›†è¢«ç‰©åŒ–æˆ–ä¼˜åŒ–)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œæ¬¡æ•° (é£é™©æƒ…å†µ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½å¤šæ¬¡&lt;/strong&gt; (å¤æ‚æŸ¥è¯¢ä¸­ä¼˜åŒ–å™¨å¯èƒ½æ— æ³•ä¼˜åŒ–)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡&lt;/strong&gt; (CTE çš„å®šä¹‰æ˜ç¡®ï¼Œç¡®ä¿äº†é‡ç”¨æ€§)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯è¯»æ€§å’Œç»´æŠ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼ŒSQL è¯­å¥å†—é•¿ä¸”é‡å¤&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´é«˜&lt;/strong&gt;ï¼ŒæŸ¥è¯¢ç»“æ„æ¸…æ™°ï¼Œé€»è¾‘åˆ†ç¦»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯é‡ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å·®ï¼Œæ¯ä¸ªå­æŸ¥è¯¢éœ€å•ç‹¬ç¼–å†™&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¥½&lt;/strong&gt;ï¼Œå®šä¹‰ä¸€æ¬¡ï¼Œå¯åœ¨ä¸»æŸ¥è¯¢ä¸­&lt;strong&gt;å¤šæ¬¡å¼•ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€’å½’æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ç›¸å…³å­æŸ¥è¯¢çš„æ‰§è¡Œ"&gt;ğŸ” ä¸ç›¸å…³å­æŸ¥è¯¢çš„æ‰§è¡Œ
&lt;/h3&gt;&lt;p&gt;å¯¹äºä¸ç›¸å…³å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„å€¼ï¼‰ï¼ŒMySQL æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå°è¯•è¯†åˆ«å‡ºè¿™äº›ç›¸åŒçš„å­æŸ¥è¯¢ï¼Œå¹¶&lt;strong&gt;å°½å¯èƒ½åªæ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åå°†ç»“æœç¼“å­˜èµ·æ¥ä¾›æ‰€æœ‰éœ€è¦çš„åœ°æ–¹ä½¿ç”¨&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–æ‰‹æ®µï¼Œæ—¨åœ¨é¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¾‹å¦‚ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM products
WHERE category_id IN (SELECT id FROM categories WHERE type = &amp;#39;Electronics&amp;#39;) -- å­æŸ¥è¯¢1
AND price &amp;gt; (SELECT AVG(price) FROM products WHERE category_id IN (SELECT id FROM categories WHERE type = &amp;#39;Electronics&amp;#39;)); -- å­æŸ¥è¯¢2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œä¸¤ä¸ª &lt;code&gt;(SELECT id FROM categories WHERE type = 'Electronics')&lt;/code&gt;æ˜¯ç›¸åŒçš„&lt;strong&gt;ä¸ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;ã€‚MySQL ä¼˜åŒ–å™¨å¾ˆå¯èƒ½åªæ‰§è¡Œå®ƒä¸€æ¬¡ï¼Œç„¶åç¼“å­˜ç»“æœé›† &lt;code&gt;(100, 101)&lt;/code&gt;ï¼Œå¹¶åœ¨ä¸¤ä¸ªéœ€è¦çš„åœ°æ–¹ï¼ˆå­æŸ¥è¯¢1å’Œå­æŸ¥è¯¢2ä¸­ï¼‰é‡å¤ä½¿ç”¨è¿™ä¸ªç¼“å­˜çš„ç»“æœã€‚&lt;/p&gt;
&lt;h3 id="-ä½¿ç”¨-cte-çš„å½±å“"&gt;âš™ï¸ ä½¿ç”¨ CTE çš„å½±å“
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;WITH&lt;/code&gt;å…³é”®å­—å®šä¹‰ CTE (å…¬å…±è¡¨è¡¨è¾¾å¼) ä¼šæ”¹å˜ç¼–å†™å’Œä¼˜åŒ–çš„æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼å®šä¹‰ä¸å¼•ç”¨&lt;/strong&gt;ï¼šCTE å…è®¸ä½ &lt;strong&gt;æ˜¾å¼åœ°&lt;/strong&gt;å®šä¹‰ä¸€ä¸ªä¸´æ—¶ç»“æœé›†ï¼Œç„¶ååœ¨ä¸»æŸ¥è¯¢ä¸­åƒä½¿ç”¨æ™®é€šè¡¨ä¸€æ ·&lt;strong&gt;å¤šæ¬¡å¼•ç”¨å®ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WITH ElectronicCategories AS (
SELECT id FROM categories WHERE type = &amp;#39;Electronics&amp;#39; -- CTEå®šä¹‰ï¼Œæ‰§è¡Œä¸€æ¬¡
)
SELECT * FROM products
WHERE category_id IN (SELECT id FROM ElectronicCategories) -- å¼•ç”¨CTE
AND price &amp;gt; (SELECT AVG(price) FROM products WHERE category_id IN (SELECT id FROM ElectronicCategories)); -- å†æ¬¡å¼•ç”¨CTE
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡Œä¼˜åŒ–&lt;/strong&gt;ï¼šæ•°æ®åº“å¼•æ“é€šå¸¸ä¼š&lt;strong&gt;å°† CTE çš„ç»“æœçœ‹ä½œä¸€ä¸ªä¸´æ—¶æ•°æ®é›†&lt;/strong&gt;ã€‚è™½ç„¶ CTE ä¸ä¸€å®šæ€»æ˜¯è¢«â€œç‰©åŒ–â€ï¼ˆç‰©ç†å­˜å‚¨åœ¨ä¸´æ—¶è¡¨ä¸­ï¼‰ï¼Œä½†ä¼˜åŒ–å™¨ä¼šæ„è¯†åˆ° &lt;code&gt;ElectronicCategories&lt;/code&gt;åªéœ€è¦è®¡ç®—ä¸€æ¬¡ï¼Œç„¶ååœ¨åç»­å¼•ç”¨ä¸­é‡ç”¨è¯¥ç»“æœã€‚è¿™&lt;strong&gt;ä»è¯­ä¹‰ä¸Šä¿è¯äº†ç›¸åŒé€»è¾‘åªæ‰§è¡Œä¸€æ¬¡&lt;/strong&gt;ï¼Œé¿å…äº†ä¼˜åŒ–å™¨æ— æ³•è¯†åˆ«é‡å¤å­æŸ¥è¯¢çš„é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯è¯»æ€§æå‡&lt;/strong&gt;ï¼šCTE èƒ½å°†å¤æ‚çš„æŸ¥è¯¢é€»è¾‘åˆ†è§£æˆæ¸…æ™°çš„æ­¥éª¤ï¼Œå¤§å¤§æé«˜äº† SQL è¯­å¥çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å†³ç­–å»ºè®®"&gt;ğŸ’¡ å†³ç­–å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚å¯è¯»æ€§å’Œå¯é æ€§æ—¶ï¼Œä½¿ç”¨ CTE&lt;/strong&gt;ï¼šå°¤å…¶æ˜¯åœ¨å¤æ‚çš„æŸ¥è¯¢ä¸­ï¼Œæœ‰å¤šä¸ªåœ°æ–¹éœ€è¦å¼•ç”¨ç›¸åŒçš„é€»è¾‘æ—¶ã€‚CTE èƒ½ç¡®ä¿é€»è¾‘åªå®šä¹‰ä¸€æ¬¡ï¼Œå¹¶èƒ½æ˜ç¡®åœ°å¤šæ¬¡å¼•ç”¨ï¼Œè®© SQL æ›´æ˜“è¯»ã€æ›´æ˜“ç»´æŠ¤ï¼Œä¹Ÿæ›´èƒ½ä¿è¯æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•åœºæ™¯ï¼Œç›´æ¥å†™å­æŸ¥è¯¢äº¦å¯&lt;/strong&gt;ï¼šå¦‚æœæŸ¥è¯¢éå¸¸ç®€å•ï¼Œä¼˜åŒ–å™¨å¤§æ¦‚ç‡èƒ½æ­£ç¡®ä¼˜åŒ–ï¼Œç›´æ¥å†™å­æŸ¥è¯¢ä¹Ÿå¯ä»¥ã€‚ä½†ä½¿ç”¨ CTE é€šå¸¸æ˜¯ä¸€ä¸ªæ›´ç¨³å¦¥çš„å¥½ä¹ æƒ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€»æ˜¯æ£€æŸ¥æ‰§è¡Œè®¡åˆ’&lt;/strong&gt;ï¼šå¯¹äºå¤æ‚çš„ã€æ€§èƒ½å…³é”®çš„æŸ¥è¯¢ï¼Œæœ€å¯é çš„æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤åˆ†ææ‰§è¡Œè®¡åˆ’ã€‚è¿™ä¼šå‘Šè¯‰ä½ ä¼˜åŒ–å™¨æœ€ç»ˆå†³å®šå¦‚ä½•æ‰§è¡ŒæŸ¥è¯¢ï¼ŒåŒ…æ‹¬æ˜¯å¦åˆ›å»ºäº†ä¸´æ—¶è¡¨ã€æ˜¯å¦è¿›è¡Œäº†é‡å¤è®¡ç®—ç­‰ï¼Œä»è€Œå¸®ä½ åšå‡ºæœ€ç»ˆåˆ¤æ–­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç¼–å†™é«˜æ•ˆçš„ SQL æŸ¥è¯¢ï¼&lt;/p&gt;
&lt;h2 id="with-recursive"&gt;WITH RECURSIVE
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;WITH RECURSIVE&lt;/code&gt;è¿›è¡Œé€’å½’å‘ä¸Šèšåˆæ˜¯å¤„ç†æ ‘å½¢æˆ–å±‚çº§ç»“æ„æ•°æ®ï¼ˆå¦‚ç»„ç»‡æ¶æ„ã€äº§å“åˆ†ç±»ã€è®ºå›è¯„è®ºåµŒå¥—ï¼‰çš„å¼ºå¤§å·¥å…·ã€‚å®ƒå…è®¸ä½ ä»æŸä¸ªå¶èŠ‚ç‚¹æˆ–åˆ†æ”¯èŠ‚ç‚¹å¼€å§‹ï¼Œå‘ä¸Šéå†å…¶æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ï¼Œå¹¶åœ¨éå†è¿‡ç¨‹ä¸­è¿›è¡Œèšåˆè®¡ç®—ï¼ˆå¦‚æ±‡æ€»æˆæœ¬ã€è®¡ç®—è·¯å¾„ã€æ ‡è®°å±‚çº§ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-é€’å½’å‘ä¸Šèšåˆæ ¸å¿ƒæ­¥éª¤"&gt;ğŸ“Š é€’å½’å‘ä¸Šèšåˆæ ¸å¿ƒæ­¥éª¤
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„é€’å½’å‘ä¸ŠèšåˆæŸ¥è¯¢åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é”šç‚¹æˆå‘˜ (Anchor Member)&lt;/strong&gt;ï¼šè¿™æ˜¯é€’å½’çš„èµ·ç‚¹ï¼Œç”¨äºé€‰æ‹©åˆå§‹èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€’å½’æˆå‘˜ (Recursive Member)&lt;/strong&gt;ï¼šé€šè¿‡è¿æ¥ CTE è‡ªèº«å’ŒåŸè¡¨ï¼Œä¸æ–­å‘ä¸ŠæŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œèšåˆè®¡ç®—ã€‚é€’å½’æˆå‘˜ä¼šåå¤æ‰§è¡Œï¼Œç›´åˆ°æ‰¾ä¸åˆ°æ›´å¤šçš„çˆ¶èŠ‚ç‚¹ï¼ˆå³åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼‰ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¯­æ³•ç»“æ„"&gt;ğŸ§© è¯­æ³•ç»“æ„
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;WITH RECURSIVE cte_name AS (
-- é”šç‚¹æˆå‘˜ï¼šé€‰æ‹©èµ·å§‹èŠ‚ç‚¹ï¼Œå¹¶åˆå§‹åŒ–èšåˆå€¼
SELECT
id,
parent_id,
some_value,
initial_value AS aggregated_value, -- åˆå§‹åŒ–èšåˆå€¼ï¼ˆå¦‚è‡ªèº«å€¼ã€è·¯å¾„ã€å±‚çº§ï¼‰
1 AS level -- æˆ–å…¶ä»–æ ‡è®°
FROM your_table
WHERE condition_to_select_starting_node -- ä¾‹å¦‚ id = ?
UNION ALL
-- é€’å½’æˆå‘˜ï¼šå‘ä¸ŠæŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ï¼Œå¹¶ç´¯åŠ æˆ–è®¡ç®—èšåˆå€¼
SELECT
t.id,
t.parent_id,
t.some_value,
ct.aggregated_value OPERATOR t.some_value, -- å‘ä¸Šèšåˆè®¡ç®—ï¼ˆå¦‚ç›¸åŠ ã€æ‹¼æ¥è·¯å¾„ï¼‰
ct.level + 1 -- å±‚çº§é€’å¢
FROM your_table t
INNER JOIN cte_name ct ON t.id = ct.parent_id -- å…³é”®ï¼šé€šè¿‡ parent_id å‘ä¸Šè¿æ¥
-- WHERE ct.parent_id IS NOT NULL -- å¯é€‰çš„æ˜¾å¼ç»ˆæ­¢æ¡ä»¶
)
SELECT * FROM cte_name; -- æœ€ç»ˆæŸ¥è¯¢é€’å½’CTEçš„ç»“æœ
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ç¤ºä¾‹è¯´æ˜-2"&gt;ğŸ“Œ ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ª &lt;code&gt;employees&lt;/code&gt;è¡¨ï¼Œç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;id&lt;/th&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;manager_id&lt;/th&gt;
&lt;th&gt;salary&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Alice&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;100000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Bob&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;80000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Charlie&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;60000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;David&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;40000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;1. å‘ä¸Šéå†è·¯å¾„ï¼ˆéèšåˆï¼Œä½†é‡è¦åŸºç¡€ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WITH RECURSIVE employee_chain AS (
-- é”šç‚¹ï¼šä»Davidï¼ˆid=4ï¼‰å¼€å§‹
SELECT
id,
name,
manager_id,
CAST(name AS CHAR(200)) AS path -- åˆå§‹åŒ–è·¯å¾„
FROM employees
WHERE id = 4
UNION ALL
-- é€’å½’ï¼šä¸æ–­å‘ä¸ŠæŸ¥æ‰¾ç»ç†ï¼Œå¹¶å°†åå­—æ·»åŠ åˆ°è·¯å¾„ä¸­
SELECT
e.id,
e.name,
e.manager_id,
CONCAT(e.name, &amp;#39; -&amp;gt; &amp;#39;, ec.path) -- å‘ä¸Šæ„å»ºè·¯å¾„
FROM employees e
INNER JOIN employee_chain ec ON e.id = ec.manager_id
)
SELECT * FROM employee_chain;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;id&lt;/th&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;manager_id&lt;/th&gt;
&lt;th&gt;path&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;David&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;David&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Charlie&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Charlie -&amp;gt; David&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Bob&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Bob -&amp;gt; Charlie -&amp;gt; David&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Alice&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;Alice -&amp;gt; Bob -&amp;gt; Charlie -&amp;gt; David&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;2. å‘ä¸Šèšåˆè–ªèµ„ï¼ˆé€’å½’å‘ä¸Šèšåˆï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è‹¥è¦è®¡ç®—ä»æŸä¸ªå‘˜å·¥å¼€å§‹ï¼Œå…¶å‘ä¸Šæ•´ä¸ªç®¡ç†é“¾çš„æ€»è–ªèµ„ï¼ˆåŒ…æ‹¬è‡ªå·±åŠå…¶æ‰€æœ‰ç»ç†çš„è–ªèµ„ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WITH RECURSIVE salary_rollup AS (
-- é”šç‚¹ï¼šä»å‘˜å·¥Davidï¼ˆid=4ï¼‰å¼€å§‹ï¼Œå…¶è–ªèµ„ä½œä¸ºåˆå§‹èšåˆå€¼
SELECT
id,
name,
manager_id,
salary,
salary AS total_salary -- åˆå§‹åŒ–æ€»è–ªèµ„ï¼ˆè‡ªèº«è–ªèµ„ï¼‰
FROM employees
WHERE id = 4
UNION ALL
-- é€’å½’ï¼šå‘ä¸ŠæŸ¥æ‰¾ç»ç†ï¼Œå¹¶å°†ç»ç†çš„è–ªèµ„ç´¯åŠ åˆ°æ€»è–ªèµ„ä¸­
SELECT
e.id,
e.name,
e.manager_id,
e.salary,
sr.total_salary + e.salary AS total_salary -- ç´¯åŠ ç»ç†è–ªèµ„
FROM employees e
INNER JOIN salary_rollup sr ON e.id = sr.manager_id
)
SELECT * FROM salary_rollup;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;id&lt;/th&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;manager_id&lt;/th&gt;
&lt;th&gt;salary&lt;/th&gt;
&lt;th&gt;total_salary&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;David&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;40000&lt;/td&gt;
&lt;td&gt;40000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Charlie&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;60000&lt;/td&gt;
&lt;td&gt;100000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Bob&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;80000&lt;/td&gt;
&lt;td&gt;180000&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Alice&lt;/td&gt;
&lt;td&gt;NULL&lt;/td&gt;
&lt;td&gt;100000&lt;/td&gt;
&lt;td&gt;280000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-6"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç»ˆæ­¢æ¡ä»¶&lt;/strong&gt;ï¼šé€’å½’æˆå‘˜å¿…é¡»æœ‰ä¸€ä¸ªéšå¼æˆ–æ˜¾å¼çš„ç»ˆæ­¢æ¡ä»¶ï¼Œå¦åˆ™ä¼šæ— é™å¾ªç¯ã€‚é€šå¸¸ï¼Œå½“ &lt;code&gt;cte_name.parent_id&lt;/code&gt;ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼ˆæ‰¾ä¸åˆ°çˆ¶èŠ‚ç‚¹ï¼‰æ—¶ï¼Œé€’å½’ä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨é€’å½’æˆå‘˜ä¸­ä½¿ç”¨ &lt;code&gt;WHERE ct.parent_id IS NOT NULL&lt;/code&gt;æ¥æ˜¾å¼ç¡®ä¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šé€’å½’æŸ¥è¯¢å¯èƒ½ä¼šäº§ç”Ÿå¤§é‡ä¸­é—´ç»“æœã€‚ç¡®ä¿åœ¨ &lt;strong&gt;&lt;code&gt;parent_id&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;id&lt;/code&gt;&lt;/strong&gt; å­—æ®µä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥æ˜¾è‘—æå‡è¿æ¥æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQLç‰ˆæœ¬&lt;/strong&gt;ï¼š&lt;code&gt;WITH RECURSIVE&lt;/code&gt;éœ€è¦ &lt;strong&gt;MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šç¡®ä¿æ•°æ®ä¸­æ²¡æœ‰å¾ªç¯å¼•ç”¨ï¼ˆä¾‹å¦‚ A çš„çˆ¶èŠ‚ç‚¹æ˜¯ Bï¼ŒB çš„çˆ¶èŠ‚ç‚¹åˆæ˜¯ Aï¼‰ï¼Œå¦åˆ™é€’å½’å°†æ— æ³•ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èšåˆé€»è¾‘&lt;/strong&gt;ï¼šæ ¹æ®ä½ çš„éœ€æ±‚è®¾è®¡èšåˆé€»è¾‘ã€‚é™¤äº†æ±‚å’Œ (&lt;code&gt;SUM&lt;/code&gt;)ï¼Œä½ è¿˜å¯ä»¥è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ (&lt;code&gt;CONCAT&lt;/code&gt;)ã€è®¡æ•°ã€å–æœ€å¤§å€¼/æœ€å°å€¼ç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ MATERIALIZED æç¤º&lt;/strong&gt;ï¼šåœ¨æŸäº›å¤æ‚çš„é€’å½’æŸ¥è¯¢ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;MATERIALIZED&lt;/code&gt;æç¤ºæ¥å¼ºåˆ¶æ•°æ®åº“å°†CTEçš„ç»“æœç‰©åŒ–ï¼ˆä¸´æ—¶å­˜å‚¨ï¼‰ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼ˆå¯èƒ½æ›´å¥½ä¹Ÿå¯èƒ½æ›´å·®ï¼‰ï¼Œéœ€æ ¹æ®å®é™…æƒ…å†µæµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-22"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;WITH RECURSIVE&lt;/code&gt;è¿›è¡Œé€’å½’å‘ä¸Šèšåˆçš„æ ¸å¿ƒåœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é”šç‚¹æˆå‘˜&lt;/strong&gt;å®šä¹‰èµ·å§‹ç‚¹å’Œèšåˆåˆå§‹å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€’å½’æˆå‘˜&lt;/strong&gt;é€šè¿‡ &lt;code&gt;INNER JOIN ... ON t.id = ct.parent_id&lt;/code&gt;ä¸æ–­å‘ä¸Šéå†ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œèšåˆè®¡ç®—ï¼ˆå¦‚ç´¯åŠ ã€æ‹¼æ¥ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€’å½’ä¼šåœ¨æ‰¾ä¸åˆ°çˆ¶èŠ‚ç‚¹æ—¶è‡ªåŠ¨ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŒæ¡æ­¤æ–¹æ³•ï¼Œä½ å¯ä»¥è½»æ¾åº”å¯¹å„ç§éœ€è¦è‡ªåº•å‘ä¸Šè¿›è¡Œæ•°æ®æ±‡æ€»å’Œåˆ†æçš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id="ç¦æ­¢èšåˆ"&gt;ç¦æ­¢èšåˆ
&lt;/h2&gt;&lt;p&gt;MySQL çš„é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ˆRecursive CTEï¼‰åœ¨&lt;strong&gt;é€’å½’éƒ¨åˆ†&lt;/strong&gt;ç¡®å®ç¦æ­¢ä½¿ç”¨èšåˆå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;SUM()&lt;/code&gt;ã€&lt;code&gt;COUNT()&lt;/code&gt;ï¼‰å’Œçª—å£å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;ã€&lt;code&gt;RANK()&lt;/code&gt;ï¼‰ã€‚è¿™ä¸ªé”™è¯¯æç¤ºæ˜ç¡®æŒ‡å‡ºäº†è¿™ä¸€ç‚¹ã€‚ä¸‹é¢æˆ‘å°†ä¸ºæ‚¨è§£é‡ŠåŸå› å’Œè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id="-é”™è¯¯åŸå› ä¸é™åˆ¶"&gt;âš ï¸ é”™è¯¯åŸå› ä¸é™åˆ¶
&lt;/h3&gt;&lt;p&gt;åœ¨ MySQL çš„é€’å½’ CTE ä¸­ï¼Œ&lt;strong&gt;é€’å½’æŸ¥è¯¢å—&lt;/strong&gt;ï¼ˆå³ &lt;code&gt;UNION ALL&lt;/code&gt;ä¹‹åçš„éƒ¨åˆ†ï¼‰æœ‰ä¸¥æ ¼çš„è¯­æ³•é™åˆ¶ã€‚æ ¹æ® MySQL çš„è®¾è®¡å’Œ SQL æ ‡å‡†ï¼Œé€’å½’éƒ¨åˆ†ä¸èƒ½åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšåˆå‡½æ•°&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;SUM()&lt;/code&gt;, &lt;code&gt;COUNT()&lt;/code&gt;, &lt;code&gt;AVG()&lt;/code&gt;, &lt;code&gt;MAX()&lt;/code&gt;, &lt;code&gt;MIN()&lt;/code&gt;ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çª—å£å‡½æ•°&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;, &lt;code&gt;RANK()&lt;/code&gt;, &lt;code&gt;DENSE_RANK()&lt;/code&gt;, &lt;code&gt;LAG()&lt;/code&gt;, &lt;code&gt;LEAD()&lt;/code&gt;ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GROUP BY å­å¥&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY å­å¥&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DISTINCT å…³é”®å­—&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åŸå› åœ¨äº&lt;/strong&gt;ï¼šé€’å½’ CTE çš„å·¥ä½œåŸç†æ˜¯é€æ­¥è¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£éƒ½åŸºäºå‰ä¸€æ¬¡çš„ç»“æœé›†ç”Ÿæˆæ–°çš„è¡Œã€‚èšåˆå’Œçª—å£å‡½æ•°é€šå¸¸éœ€è¦å¯¹&lt;strong&gt;æ•´ä¸ªæ•°æ®é›†&lt;/strong&gt;æˆ–&lt;strong&gt;ä¸€ä¸ªæ˜ç¡®çš„åˆ†åŒº&lt;/strong&gt;è¿›è¡Œæ“ä½œï¼Œè¿™ä¸é€’å½’é€æ­¥ç”Ÿæˆæ•°æ®çš„æœ¬è´¨ç›¸å†²çªï¼Œå¯èƒ½å¯¼è‡´æ— æ³•é¢„æµ‹çš„è¡Œä¸ºæˆ–æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id="-è§£å†³æ–¹æ¡ˆ"&gt;ğŸ”§ è§£å†³æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ä¸èƒ½åœ¨é€’å½’éƒ¨åˆ†ç›´æ¥ä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œä½†æ‚¨å¯ä»¥é€šè¿‡è°ƒæ•´æŸ¥è¯¢ç»“æ„æ¥è¾¾æˆç›®æ ‡ã€‚ä»¥ä¸‹æ˜¯ä¸¤ç§å¸¸è§çš„è§£å†³æ€è·¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°†èšåˆæ“ä½œç§»è‡³å¤–éƒ¨æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚åœ¨é€’å½’CTEä¸­åªä¸“æ³¨äºç”Ÿæˆæ‰€éœ€çš„æ‰€æœ‰è¡Œï¼ˆä¾‹å¦‚ï¼Œç”Ÿæˆå®Œæ•´çš„å±‚çº§å…³ç³»ï¼‰ï¼Œç„¶ååœ¨æœ€å¤–å±‚çš„&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ä¸­å¯¹è¿™äº›ç»“æœè¿›è¡Œèšåˆæˆ–çª—å£è®¡ç®—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WITH RECURSIVE employee_hierarchy AS (
-- éé€’å½’éƒ¨åˆ†ï¼šæ‰¾åˆ°åˆå§‹å‘˜å·¥ï¼ˆä¾‹å¦‚CEOï¼‰
SELECT
id,
name,
manager_id,
1 AS level -- åˆå§‹å±‚çº§
FROM employees
WHERE manager_id IS NULL -- å‡è®¾é¡¶å±‚ç»ç†çš„manager_idä¸ºNULL
UNION ALL
-- é€’å½’éƒ¨åˆ†ï¼šä»…è¿æ¥è¡¨ï¼Œç”Ÿæˆå±‚çº§å…³ç³»ï¼Œä¸è¿›è¡Œèšåˆ
SELECT
e.id,
e.name,
e.manager_id,
eh.level + 1 -- å±‚çº§é€’å¢
FROM employees e
INNER JOIN employee_hierarchy eh ON e.manager_id = eh.id
-- æ­¤å¤„ä¸èƒ½æœ‰èšåˆæˆ–çª—å£å‡½æ•°
)
-- åœ¨å¤–å±‚æŸ¥è¯¢ä¸­è¿›è¡Œèšåˆ
SELECT
manager_id,
COUNT(*) AS direct_reports_count, -- è®¡ç®—æ¯ä¸ªç»ç†çš„ç›´æ¥ä¸‹å±æ•°é‡
AVG(level) AS avg_level_in_hierarchy -- è®¡ç®—å¹³å‡å±‚çº§ï¼ˆç¤ºä¾‹ï¼‰
FROM employee_hierarchy
GROUP BY manager_id;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨å¤šä¸ªCTEåˆ†æ­¥å¤„ç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºæ›´å¤æ‚çš„é€»è¾‘ï¼Œå¯ä»¥å…ˆç”¨ä¸€ä¸ªé€’å½’CTEç”ŸæˆåŸºç¡€æ•°æ®ï¼Œå†é€šè¿‡å¦ä¸€ä¸ªï¼ˆéé€’å½’ï¼‰CTEæˆ–å­æŸ¥è¯¢è¿›è¡Œèšåˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;WITH RECURSIVE base_data AS (
-- é€’å½’CTEä»…è´Ÿè´£ç”Ÿæˆéœ€è¦çš„è¡Œé›†
SELECT id, name, manager_id
FROM employees
WHERE ... -- ä½ çš„åˆå§‹æ¡ä»¶
UNION ALL
SELECT e.id, e.name, e.manager_id
FROM employees e
JOIN base_data b ON e.manager_id = b.id
),
aggregated_data AS (
-- åœ¨éé€’å½’CTEæˆ–å¤–éƒ¨æŸ¥è¯¢ä¸­è¿›è¡Œèšåˆ
SELECT
manager_id,
COUNT(*) AS team_size,
SUM(salary) AS total_salary -- å‡è®¾æœ‰salaryå­—æ®µ
FROM base_data
GROUP BY manager_id
)
SELECT * FROM aggregated_data;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-5"&gt;ğŸ’¡ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€’å½’ç»ˆæ­¢æ¡ä»¶&lt;/strong&gt;ï¼šåŠ¡å¿…åœ¨é€’å½’éƒ¨åˆ†åŒ…å«æœ‰æ•ˆçš„ç»ˆæ­¢æ¡ä»¶ï¼ˆä¾‹å¦‚ &lt;code&gt;WHERE level &amp;lt; 100&lt;/code&gt;ï¼‰ï¼Œæˆ–é€šè¿‡è®¾ç½® &lt;code&gt;cte_max_recursion_depth&lt;/code&gt;ç³»ç»Ÿå˜é‡æ¥é˜²æ­¢æ— é™é€’å½’å’Œæ€§èƒ½é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šé€’å½’CTEå¯èƒ½äº§ç”Ÿå¤§é‡ä¸­é—´æ•°æ®ã€‚ç¡®ä¿åœ¨è¿æ¥æ¡ä»¶ä½¿ç”¨çš„å­—æ®µï¼ˆå¦‚ &lt;code&gt;id&lt;/code&gt;, &lt;code&gt;manager_id&lt;/code&gt;ï¼‰ä¸Šæœ‰åˆé€‚çš„ç´¢å¼•ï¼Œä»¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¾ªç¯å¼•ç”¨&lt;/strong&gt;ï¼šç¡®ä¿æ•°æ®ä¸­æ²¡æœ‰å¾ªç¯å¼•ç”¨ï¼ˆä¾‹å¦‚Açš„ä¸Šçº§æ˜¯Bï¼ŒBçš„ä¸Šçº§åˆæ˜¯Aï¼‰ï¼Œå¦åˆ™é€’å½’å¯èƒ½æ— æ³•ç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-23"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;é‡åˆ° â€œRecursive Common Table Expression can contain neither aggregation nor window functionsâ€ é”™è¯¯æ—¶ï¼Œæ ¸å¿ƒè§£å†³æ€è·¯æ˜¯ï¼š&lt;strong&gt;åœ¨é€’å½’éƒ¨åˆ†ä»…è¿›è¡Œç®€å•çš„æ•°æ®ç”Ÿæˆå’Œè¿æ¥æ“ä½œï¼Œå°†æ‰€æœ‰å¤æ‚çš„èšåˆã€æ’åºã€åˆ†ç»„ç­‰è®¡ç®—ç§»åˆ°æœ€å¤–å±‚çš„æŸ¥è¯¢æˆ–ä½¿ç”¨é¢å¤–çš„éé€’å½’CTEæ¥å®Œæˆã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡å°†é€’å½’é€»è¾‘ä¸èšåˆé€»è¾‘åˆ†ç¦»ï¼Œä½ æ—¢å¯ä»¥éµå®ˆMySQLçš„è¯­æ³•é™åˆ¶ï¼Œåˆèƒ½å®ç°å¤æ‚çš„æ•°æ®æŸ¥è¯¢éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id="å¤šä¸ª-partition-by"&gt;å¤šä¸ª partition by
&lt;/h2&gt;&lt;p&gt;MySQL çš„çª—å£å‡½æ•°ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;PARTITION BY&lt;/code&gt;åè·Ÿå¤šä¸ªé”®ï¼ˆåˆ—ï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ æ ¹æ®å¤šä¸ªç»´åº¦æ¥åˆ’åˆ†æ•°æ®çª—å£ï¼Œè¿›è¡Œç²¾ç»†åŒ–çš„åˆ†ç»„è®¡ç®—ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒçš„è¡Œä¸ºã€æŠ€å·§å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-å¤šé”®åˆ†åŒºæ ¸å¿ƒè¡Œä¸º"&gt;ğŸ“Š å¤šé”®åˆ†åŒºæ ¸å¿ƒè¡Œä¸º
&lt;/h3&gt;&lt;p&gt;å½“ä½ ä½¿ç”¨ &lt;code&gt;PARTITION BY col1, col2, ...&lt;/code&gt;æ—¶ï¼Œå…¶æ ¸å¿ƒè¡Œä¸ºæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è”åˆé”®åˆ†ç»„&lt;/strong&gt;ï¼šçª—å£å‡½æ•°ä¸ä¼šå•ç‹¬æŒ‰ &lt;code&gt;col1&lt;/code&gt;æˆ– &lt;code&gt;col2&lt;/code&gt;åˆ†åŒºï¼Œè€Œæ˜¯å°† &lt;code&gt;(col1, col2)&lt;/code&gt;çš„&lt;strong&gt;ç»„åˆå€¼&lt;/strong&gt;ä½œä¸ºä¸€ä¸ªæ•´ä½“åˆ†åŒºé”®ã€‚åªæœ‰æ‰€æœ‰æŒ‡å®šåˆ—çš„å€¼éƒ½ç›¸åŒçš„è¡Œæ‰ä¼šè¢«åˆ†åˆ°åŒä¸€ä¸ªçª—å£å†…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºå†…ç‹¬ç«‹è®¡ç®—&lt;/strong&gt;ï¼šè®¡ç®—ï¼ˆå¦‚ &lt;code&gt;SUM()&lt;/code&gt;, &lt;code&gt;ROW_NUMBER()&lt;/code&gt;, &lt;code&gt;AVG()&lt;/code&gt;ç­‰ï¼‰ä¼šåœ¨&lt;strong&gt;æ¯ä¸ªè¿™æ ·çš„ç»„åˆåˆ†åŒºå†…ç‹¬ç«‹è¿›è¡Œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿ç•™åŸå§‹è¡Œ&lt;/strong&gt;ï¼šä¸ &lt;code&gt;GROUP BY&lt;/code&gt;ä¼šæŠ˜å è¡Œä¸åŒï¼Œ&lt;code&gt;PARTITION BY&lt;/code&gt;ä¼šä¿ç•™æ‰€æœ‰åŸå§‹æ•°æ®è¡Œï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šä¸ºæ¯ä¸€è¡Œæ·»åŠ ä¸€ä¸ªåŸºäºå…¶æ‰€åœ¨åˆ†åŒºè®¡ç®—å¾—å‡ºçš„æ–°åˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ªé”€å”®è¡¨ &lt;code&gt;sales_data(region, product_category, sales)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
region,
product_category,
sales,
SUM(sales) OVER (PARTITION BY region, product_category) AS regional_category_sales
FROM sales_data;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œ&lt;code&gt;SUM(sales)&lt;/code&gt;ä¸ä¼šè®¡ç®—æ‰€æœ‰é”€å”®æ€»é¢ï¼Œä¹Ÿä¸ä¼šå•ç‹¬æŒ‰ &lt;code&gt;region&lt;/code&gt;æˆ– &lt;code&gt;product_category&lt;/code&gt;è®¡ç®—ï¼Œè€Œæ˜¯ä¼šä¸ºæ¯ä¸€ä¸ª &lt;code&gt;(region, product_category)&lt;/code&gt;ç»„åˆï¼ˆå¦‚ &lt;code&gt;('North', 'Electronics')&lt;/code&gt;ï¼‰è®¡ç®—å…¶é”€å”®æ€»é¢ï¼Œå¹¶å°†è¿™ä¸ªç»“æœé™„åŠ åˆ°è¯¥ç»„åˆä¸‹çš„æ¯ä¸€è¡Œä¸Šã€‚&lt;/p&gt;
&lt;h3 id="-æ‰§è¡Œé¡ºåºä¸è¯­æ³•"&gt;âš™ï¸ æ‰§è¡Œé¡ºåºä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;åœ¨çª—å£å‡½æ•°çš„ &lt;code&gt;OVER()&lt;/code&gt;å­å¥ä¸­ï¼Œå¤šä¸ªåˆ†åŒºé”®çš„è¯­æ³•éå¸¸ç›´æ¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;çª—å£å‡½æ•°&amp;gt;() OVER (
[PARTITION BY é”®1, é”®2, ...]
[ORDER BY æ’åºåˆ—1, ...]
[çª—å£æ¡†æ¶å­å¥]
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶é€»è¾‘æ‰§è¡Œé¡ºåºå¯ä»¥ç†è§£ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åˆ†åŒº&lt;/strong&gt;ï¼šæ ¹æ® &lt;code&gt;PARTITION BY&lt;/code&gt;ååˆ—å‡ºçš„æ‰€æœ‰é”®è¿›è¡Œåˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºå†…æ’åº&lt;/strong&gt;ï¼šå¦‚æœæŒ‡å®šäº† &lt;code&gt;ORDER BY&lt;/code&gt;ï¼Œåˆ™åœ¨æ¯ä¸ªåˆ†åŒºå†…æŒ‰è§„åˆ™æ’åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çª—å£æ¡†æ¶åˆ’å®š&lt;/strong&gt;ï¼šå¦‚æœæŒ‡å®šäº† &lt;code&gt;ROWS&lt;/code&gt;æˆ– &lt;code&gt;RANGE&lt;/code&gt;ï¼Œè¿›ä¸€æ­¥ç¡®å®šè®¡ç®—èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºå†…è®¡ç®—&lt;/strong&gt;ï¼šåœ¨å‰ä¸‰æ­¥ç¡®å®šçš„çª—å£èŒƒå›´å†…æ‰§è¡ŒæŒ‡å®šçš„çª—å£å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ¯ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å¤šé”®åˆ†åŒºéå¸¸é€‚åˆéœ€è¦&lt;strong&gt;åŒæ—¶åŸºäºå¤šä¸ªç»´åº¦è¿›è¡Œåˆ†ç»„åˆ†æ&lt;/strong&gt;çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šå±‚æ¬¡èšåˆåˆ†æ&lt;/strong&gt;ï¼šå¦‚è®¡ç®—æ¯ä¸ªåœ°åŒºä¸‹æ¯ä¸ªäº§å“ç±»åˆ«çš„é”€å”®é¢ã€æ¯ä¸ªç­çº§å†…æ¯é—¨ç§‘ç›®çš„å¹³å‡åˆ†ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆæ’å&lt;/strong&gt;ï¼šå¦‚è®¡ç®—æ¯ä¸ªéƒ¨é—¨å†…æŒ‰ä¸åŒèŒç§°çº§åˆ«çš„è–ªèµ„æ’å &lt;code&gt;(PARTITION BY dept, title ORDER BY salary DESC)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç»†åŒ–å¯¹æ¯”&lt;/strong&gt;ï¼šå¦‚è®¡ç®—æ¯ä¸ªå®¢æˆ·åœ¨ä¸åŒäº§å“ä¸Šçš„æ¶ˆè´¹ä¸å…¶å¯¹åº”äº§å“å¹³å‡æ¶ˆè´¹çš„åå·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨å¤šé”®åˆ†åŒºæ—¶ï¼Œæœ‰ä¸€äº›é‡è¦çš„è€ƒé‡ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºé”®é¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;PARTITION BY key1, key2&lt;/code&gt;å’Œ &lt;code&gt;PARTITION BY key2, key1&lt;/code&gt;äº§ç”Ÿçš„ç»“æœé›†æ˜¯&lt;strong&gt;ç›¸åŒ&lt;/strong&gt;çš„ï¼Œå› ä¸ºåˆ†åŒºä¾æ®éƒ½æ˜¯æ‰€æœ‰é”®çš„ç»„åˆå€¼ã€‚ä¸è¿‡ï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œå¦‚æœé”®ä¸­åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä¸åŒæ•°æ®åº“å¯¹ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„å¤„ç†æ–¹å¼å¯èƒ½ç•¥æœ‰å·®å¼‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åˆ†åŒºé”®è¶Šå¤šï¼Œç†è®ºä¸Šåˆ’åˆ†çš„åˆ†åŒºå°±è¶Šå¤šã€è¶Šç»†ã€‚è¿™å¯èƒ½ä¼š&lt;strong&gt;å¢åŠ è®¡ç®—å¼€é”€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºç»å¸¸ä¸€èµ·ç”¨äºåˆ†åŒºçš„åˆ—åˆ›å»º&lt;strong&gt;å¤åˆç´¢å¼•&lt;/strong&gt; (&lt;code&gt;CREATE INDEX idx_region_category ON sales_data(region, product_category)&lt;/code&gt;) å¯ä»¥æ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºæ•°è€ƒé‡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆé€‰æ‹©&lt;strong&gt;åŸºæ•°è¾ƒä½&lt;/strong&gt;ï¼ˆä¸åŒå€¼è¾ƒå°‘ï¼‰çš„åˆ—ä½œä¸ºåˆ†åŒºé”®ï¼Œå¦‚åœ°åŒºã€äº§å“ç±»å‹ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;é¿å…ä½¿ç”¨&lt;strong&gt;åŸºæ•°éå¸¸é«˜&lt;/strong&gt;ï¼ˆå‡ ä¹æ¯æ¡è®°å½•éƒ½ä¸åŒï¼‰çš„åˆ—ä½œä¸ºåˆ†åŒºé”®ï¼Œä¾‹å¦‚ç”¨æˆ·IDã€è®¢å•IDã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´åˆ†åŒºæ•°é‡è¿‡å¤šï¼ˆå‡ ä¹æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªåˆ†åŒºï¼‰ï¼Œä½¿çª—å£å‡½æ•°é€€åŒ–ä¸ºç±»ä¼¼é€è¡Œè®¡ç®—çš„æƒ…å†µï¼Œæ•ˆç‡ä½ä¸‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šéœ€è¦æ³¨æ„åˆ†åŒºé”®ä¸­å¯èƒ½å­˜åœ¨ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚åœ¨åˆ†åŒºæ—¶ï¼Œæ‰€æœ‰ &lt;code&gt;NULL&lt;/code&gt;å€¼ä¼šè¢«è§†ä¸ºç›¸åŒçš„å€¼å½’å…¥åŒä¸€ä¸ªåˆ†åŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-24"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;åè·Ÿå¤šä¸ªé”®æ˜¯ä¸€ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒé€šè¿‡&lt;strong&gt;å°†å¤šä¸ªåˆ—çš„ç»„åˆå€¼ä½œä¸ºåˆ†åŒºä¾æ®&lt;/strong&gt;ï¼Œè®©ä½ èƒ½å¤Ÿåœ¨æ›´ç²¾ç»†çš„ç»´åº¦ä¸Šæ‰§è¡Œçª—å£è®¡ç®—ï¼ŒåŒæ—¶ä¿ç•™åŸå§‹æ•°æ®çš„å…¨éƒ¨ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;æŒæ¡è¿™ä¸€ç‰¹æ€§ï¼Œèƒ½å¸®åŠ©ä½ è½»æ¾åº”å¯¹å„ç§å¤æ‚çš„å¤šç»´åº¦æ•°æ®åˆ†æéœ€æ±‚ï¼Œä»ç®€å•çš„å¤šå±‚èšåˆåˆ°å¤æ‚çš„å¤åˆæ’åå’Œè·¨è¡Œå¯¹æ¯”ï¼Œéƒ½èƒ½ä¼˜é›…åœ°å®ç°ã€‚åªéœ€æ³¨æ„åˆ†åŒºé”®çš„é€‰æ‹©å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œå°±èƒ½é«˜æ•ˆåœ°å‘æŒ¥å…¶å¨åŠ›ã€‚&lt;/p&gt;</description></item><item><title>ã€Databaseã€‘Indexes</title><link>https://dyhes.github.io/p/databaseindexes/</link><pubDate>Mon, 18 Nov 2024 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/databaseindexes/</guid><description>&lt;p&gt;æ•°æ®åº“ç´¢å¼•æ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ç”¨äºæé«˜æŸ¥è¯¢æ•ˆç‡çš„æ•°æ®ç»“æ„ã€‚å®ƒä»¬å…è®¸æ•°æ®åº“ç³»ç»Ÿå¿«é€Ÿæ‰¾åˆ°è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ— éœ€æ‰«ææ•´ä¸ªè¡¨ã€‚&lt;/p&gt;
&lt;p&gt;æ­£ç¡®ä½¿ç”¨ç´¢å¼•å¯ä»¥æå¤§åœ°æé«˜æ•°æ®åº“çš„æ€§èƒ½ï¼Œä½†ä¹Ÿéœ€è¦æ ¹æ®å…·ä½“çš„æŸ¥è¯¢æ¨¡å¼å’Œæ•°æ®è®¿é—®æ¨¡å¼æ¥è®¾è®¡å’Œç»´æŠ¤ç´¢å¼•ã€‚ä¸å½“çš„ç´¢å¼•å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå› æ­¤éœ€è¦ä»”ç»†è§„åˆ’å’Œå®šæœŸè¯„ä¼°ç´¢å¼•çš„æœ‰æ•ˆæ€§ã€‚&lt;/p&gt;
&lt;p&gt;ç´¢å¼•é€šå¸¸æ˜¯&lt;strong&gt;æ•°æ®åº“è¡¨ä¹‹å¤–&lt;/strong&gt;çš„è¾…åŠ©æ•°æ®ç»“æ„ã€‚å®ƒä»¬å­˜å‚¨åœ¨æ•°æ®åº“çš„å­˜å‚¨ä»‹è´¨ä¸Šï¼Œä¸å®é™…çš„æ•°æ®è¡¨&lt;strong&gt;åˆ†å¼€&lt;/strong&gt;ï¼Œä½†ä¸è¡¨ä¸­çš„æ•°æ®ç›¸å…³è”ã€‚&lt;/p&gt;
&lt;p&gt;ç´¢å¼•ä½¿ç”¨ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼ˆå¦‚&lt;strong&gt;Bæ ‘ã€B+æ ‘ã€å“ˆå¸Œè¡¨&lt;/strong&gt;ç­‰ï¼‰æ¥ç»„ç»‡æ•°æ®ï¼Œè¿™äº›ç»“æ„æ”¯æŒé«˜æ•ˆçš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å½“è¡¨ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ˆå¦‚æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤ï¼‰æ—¶ï¼Œç›¸åº”çš„ç´¢å¼•ä¹Ÿéœ€è¦æ›´æ–°ï¼Œä»¥ä¿æŒç´¢å¼•çš„å‡†ç¡®æ€§å’Œæœ‰æ•ˆæ€§ï¼Œå› æ­¤&lt;strong&gt;ç»å¸¸ä¿®æ”¹çš„åˆ—ä¸é€‚åˆä½œä¸ºç´¢å¼•&lt;/strong&gt;ï¼Œç»å¸¸ä¿®æ”¹çš„è¡¨éœ€è¦ç»“åˆä¸šåŠ¡æƒè¡¡ç´¢å¼•å¸¦æ¥çš„æŸ¥è¯¢æ€§èƒ½æå‡ä¸æ›´æ–°ä»£ä»·ã€‚&lt;/p&gt;
&lt;p&gt;ç´¢å¼•é€šå¸¸åªå­˜å‚¨&lt;strong&gt;ç”¨äºå¿«é€Ÿå®šä½æ•°æ®çš„é”®å€¼å’ŒæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆæˆ–è¡Œæ ‡è¯†ç¬¦&lt;/strong&gt;ï¼Œè€Œä¸å­˜å‚¨å®Œæ•´çš„æ•°æ®è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç´¢å¼•å¯ä»¥æ˜¾è‘—æé«˜æ’åºæ“ä½œçš„æ€§èƒ½ã€‚å½“ä½ åœ¨ä¸€ä¸ªåˆ—ä¸Šåˆ›å»ºç´¢å¼•æ—¶ï¼Œæ•°æ®åº“ä¼šæ ¹æ®è¯¥åˆ—çš„å€¼æ„å»ºä¸€ä¸ªæœ‰åºçš„æ•°æ®ç»“æ„ï¼ˆé€šå¸¸æ˜¯Bæ ‘ï¼‰ã€‚è¿™ä½¿å¾—æ•°æ®åº“åœ¨æ‰§è¡Œæ’åºæ“ä½œæ—¶å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ï¼Œä»è€Œå¤§å¤§æé«˜æ’åºçš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h2 id="example"&gt;Example
&lt;/h2&gt;&lt;h5 id=""&gt;
&lt;/h5&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å­—æ®µåç§°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;çº¦æŸ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æè¿°&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;id&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BIGINT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;PRIMARY KEY&lt;/code&gt;, &lt;code&gt;AUTO_INCREMENT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç©ºé—´ç”¨æˆ·ä¿¡æ¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;user_id&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BIGINT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;FOREIGN KEY&lt;/code&gt;, &lt;code&gt;NOT NULL&lt;/code&gt;,&lt;code&gt;PRIMARY KEY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å…³è”çš„ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå…³è”åˆ° &lt;code&gt;users&lt;/code&gt; è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;createdAt&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TIMESTAMP&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NOT NULL&lt;/code&gt;, &lt;code&gt;AUDIT-CREATED&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®°å½•ç”¨æˆ·åŠ å…¥ç©ºé—´çš„æ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;content&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TEXT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NOT NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€šçŸ¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœ¨OceanBaseä¸­å¯¹äºè¿™æ ·ä¸€å¼ è¡¨ä»¥user_idä¸ºåˆ†åŒºé”®è¿›è¡ŒRangeåˆ†åŒºï¼Œå†åœ¨ user_idåˆ—ä¸Šå»ºç«‹æœ¬åœ°ç´¢å¼•ï¼Œä¾¿äºæŒ‰ç…§ç”¨æˆ·æŸ¥è¯¢é€šçŸ¥å¯è¡Œå—ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;QWEN:&lt;/p&gt;
&lt;p&gt;åœ¨OceanBaseä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ†åŒºè¡¨æ¥ä¼˜åŒ–å¤§è§„æ¨¡æ•°æ®çš„ç®¡ç†å’ŒæŸ¥è¯¢æ€§èƒ½ã€‚æ ¹æ®ä½ æä¾›çš„è¡¨ç»“æ„å’Œéœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä»¥ä¸‹è®¾è®¡æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;h3 id="è¡¨ç»“æ„"&gt;è¡¨ç»“æ„
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TABLE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;BIGINT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;PRIMARY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;BIGINT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TIMESTAMP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FOREIGN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;REFERENCES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RANGE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2000000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3000000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- æ·»åŠ æ›´å¤šåˆ†åŒºï¼Œæ ¹æ®å®é™…æ•°æ®èŒƒå›´è¿›è¡Œè°ƒæ•´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;MAXVALUE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="åˆ†åŒºé”®å’Œæœ¬åœ°ç´¢å¼•"&gt;åˆ†åŒºé”®å’Œæœ¬åœ°ç´¢å¼•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†åŒºé”®&lt;/strong&gt;ï¼šä½ é€‰æ‹© &lt;code&gt;user_id&lt;/code&gt; ä½œä¸ºåˆ†åŒºé”®ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ï¼Œå› ä¸º &lt;code&gt;user_id&lt;/code&gt; æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè€Œä¸”æ¯ä¸ªç”¨æˆ·çš„é€šçŸ¥æ•°æ®é€šå¸¸ä¼šè¢«é›†ä¸­åœ¨ä¸€èµ·ï¼Œæœ‰åˆ©äºåˆ†åŒºçš„å±€éƒ¨æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ¬åœ°ç´¢å¼•&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;user_id&lt;/code&gt; åˆ—ä¸Šå»ºç«‹æœ¬åœ°ç´¢å¼•ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯å½“æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å« &lt;code&gt;user_id&lt;/code&gt; æ—¶ã€‚æœ¬åœ°ç´¢å¼•æ˜¯é’ˆå¯¹æ¯ä¸ªåˆ†åŒºå•ç‹¬åˆ›å»ºçš„ç´¢å¼•ï¼Œå¯ä»¥å‡å°‘è·¨åˆ†åŒºçš„æŸ¥è¯¢å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="åˆ›å»ºæœ¬åœ°ç´¢å¼•"&gt;åˆ›å»ºæœ¬åœ°ç´¢å¼•
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LOCAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INDEX&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;idx_user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;ï¼šé€šè¿‡åˆ†åŒºå’Œæœ¬åœ°ç´¢å¼•ï¼Œå¯ä»¥æ˜¾è‘—æé«˜æŒ‰ &lt;code&gt;user_id&lt;/code&gt; æŸ¥è¯¢é€šçŸ¥çš„æ€§èƒ½ã€‚æ•°æ®åº“å¯ä»¥ç›´æ¥å®šä½åˆ°ç›¸åº”çš„åˆ†åŒºï¼Œå¹¶ä½¿ç”¨æœ¬åœ°ç´¢å¼•å¿«é€ŸæŸ¥æ‰¾æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥æ€§èƒ½&lt;/strong&gt;ï¼šåˆ†åŒºå¯ä»¥åˆ†æ•£å†™æ“ä½œçš„å‹åŠ›ï¼Œå‡å°‘å•ä¸ªåˆ†åŒºçš„çƒ­ç‚¹é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤æˆæœ¬&lt;/strong&gt;ï¼šåˆ†åŒºå’Œæœ¬åœ°ç´¢å¼•çš„ç»´æŠ¤æˆæœ¬ç›¸å¯¹è¾ƒä½ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œåˆ†åŒºå¯ä»¥æœ‰æ•ˆç®¡ç†æ•°æ®çš„åˆ†å¸ƒå’Œè®¿é—®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ç¤ºä¾‹æŸ¥è¯¢"&gt;ç¤ºä¾‹æŸ¥è¯¢
&lt;/h3&gt;&lt;p&gt;å‡è®¾ä½ éœ€è¦æŸ¥è¯¢æŸä¸ªç”¨æˆ·çš„æœ€è¿‘10æ¡é€šçŸ¥ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;12345&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;LIMIT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œæ•°æ®åº“ä¼šé¦–å…ˆå®šä½åˆ°åŒ…å« &lt;code&gt;user_id = 12345&lt;/code&gt; çš„åˆ†åŒºï¼Œç„¶åä½¿ç”¨æœ¬åœ°ç´¢å¼•å¿«é€ŸæŸ¥æ‰¾å¹¶æ’åºæ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id="æ³¨æ„äº‹é¡¹"&gt;æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºæ•°&lt;/strong&gt;ï¼šåˆç†é€‰æ‹©åˆ†åŒºæ•°ï¼Œé¿å…è¿‡å¤šæˆ–è¿‡å°‘çš„åˆ†åŒºã€‚è¿‡å¤šçš„åˆ†åŒºä¼šå¢åŠ ç®¡ç†å¤æ‚åº¦ï¼Œè¿‡å°‘çš„åˆ†åŒºåˆ™æ— æ³•å……åˆ†å‘æŒ¥åˆ†åŒºçš„ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºè¾¹ç•Œ&lt;/strong&gt;ï¼šæ ¹æ®å®é™…æ•°æ®åˆ†å¸ƒé€‰æ‹©åˆé€‚çš„åˆ†åŒºè¾¹ç•Œã€‚å¯ä»¥å®šæœŸè°ƒæ•´åˆ†åŒºè¾¹ç•Œï¼Œä»¥é€‚åº”æ•°æ®å¢é•¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ç»´æŠ¤&lt;/strong&gt;ï¼šè™½ç„¶æœ¬åœ°ç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œä½†ä¹Ÿä¼šå¢åŠ å†™æ“ä½œçš„å¼€é”€ã€‚éœ€è¦æƒè¡¡ç´¢å¼•å¸¦æ¥çš„æ€§èƒ½æå‡å’Œç»´æŠ¤æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="æ€»ç»“"&gt;æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åœ¨OceanBaseä¸­ï¼Œä»¥ &lt;code&gt;user_id&lt;/code&gt; ä¸ºåˆ†åŒºé”®è¿›è¡ŒRangeåˆ†åŒºï¼Œå¹¶åœ¨ &lt;code&gt;user_id&lt;/code&gt; åˆ—ä¸Šå»ºç«‹æœ¬åœ°ç´¢å¼•ï¼Œæ˜¯ä¸€ä¸ªåˆç†çš„è®¾è®¡æ–¹æ¡ˆï¼Œå¯ä»¥æœ‰æ•ˆä¼˜åŒ–æŒ‰ç”¨æˆ·æŸ¥è¯¢é€šçŸ¥çš„æ€§èƒ½ã€‚é€šè¿‡åˆç†é€‰æ‹©åˆ†åŒºæ•°å’Œåˆ†åŒºè¾¹ç•Œï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘è¿˜æƒ³æ”¯æŒå¯¹äºé€šçŸ¥æŒ‰æ—¶é—´å¿«é€Ÿæ’åºï¼Œæˆ‘æ˜¯ä¸æ˜¯åº”è¯¥åœ¨create_atåˆ—ä¸Šå»ºç«‹æœ¬åœ°ç´¢å¼•ï¼Ÿä¸¤ä¸ªç´¢å¼•ä¹‹é—´èƒ½ç›¸äº’åä½œå—ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;QWEN:&lt;/p&gt;
&lt;p&gt;åœ¨OceanBaseä¸­ï¼Œå¦‚æœä½ æƒ³æ”¯æŒæŒ‰æ—¶é—´å¿«é€Ÿæ’åºï¼ŒåŒæ—¶ä¿æŒæŒ‰ç”¨æˆ·æŸ¥è¯¢é€šçŸ¥çš„é«˜æ•ˆæ€§ï¼Œå¯ä»¥åœ¨ &lt;code&gt;createdAt&lt;/code&gt; åˆ—ä¸Šå»ºç«‹æœ¬åœ°ç´¢å¼•ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åŒæ—¶åˆ©ç”¨ &lt;code&gt;user_id&lt;/code&gt; å’Œ &lt;code&gt;createdAt&lt;/code&gt; åˆ—çš„ç´¢å¼•æ¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id="è¡¨ç»“æ„å’Œåˆ†åŒº"&gt;è¡¨ç»“æ„å’Œåˆ†åŒº
&lt;/h3&gt;&lt;p&gt;å‡è®¾ä½ çš„è¡¨ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TABLE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;BIGINT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;PRIMARY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;BIGINT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TIMESTAMP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;TEXT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FOREIGN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;REFERENCES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RANGE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2000000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3000000&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- æ·»åŠ æ›´å¤šåˆ†åŒºï¼Œæ ¹æ®å®é™…æ•°æ®èŒƒå›´è¿›è¡Œè°ƒæ•´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PARTITION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LESS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THAN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;MAXVALUE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="åˆ›å»ºæœ¬åœ°ç´¢å¼•-1"&gt;åˆ›å»ºæœ¬åœ°ç´¢å¼•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;user_id&lt;/code&gt; åˆ—ä¸Šåˆ›å»ºæœ¬åœ°ç´¢å¼•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LOCAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INDEX&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;idx_user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;createdAt&lt;/code&gt; åˆ—ä¸Šåˆ›å»ºæœ¬åœ°ç´¢å¼•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LOCAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INDEX&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;idx_createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä¸¤ä¸ªç´¢å¼•ä¹‹é—´çš„åä½œ"&gt;ä¸¤ä¸ªç´¢å¼•ä¹‹é—´çš„åä½œ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ä¸¤ä¸ªç´¢å¼•å¯ä»¥åˆ†åˆ«ä¼˜åŒ–ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ï¼Œä½†å®ƒä»¬å¹¶ä¸ä¼šç›´æ¥â€œåä½œâ€æ¥ä¼˜åŒ–åŒä¸€ä¸ªæŸ¥è¯¢ã€‚ç„¶è€Œï¼Œé€šè¿‡åˆç†è®¾è®¡æŸ¥è¯¢ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨è¿™ä¸¤ä¸ªç´¢å¼•ã€‚&lt;/p&gt;
&lt;h3 id="ç¤ºä¾‹æŸ¥è¯¢-1"&gt;ç¤ºä¾‹æŸ¥è¯¢
&lt;/h3&gt;&lt;p&gt;å‡è®¾ä½ éœ€è¦æŸ¥è¯¢æŸä¸ªç”¨æˆ·çš„æœ€è¿‘10æ¡é€šçŸ¥ï¼Œå¹¶æŒ‰æ—¶é—´æ’åºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;12345&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;LIMIT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;user_id&lt;/code&gt; ç´¢å¼•&lt;/strong&gt;ï¼šæ•°æ®åº“ä¼šé¦–å…ˆä½¿ç”¨ &lt;code&gt;idx_user_id&lt;/code&gt; ç´¢å¼•å¿«é€Ÿå®šä½åˆ°åŒ…å« &lt;code&gt;user_id = 12345&lt;/code&gt; çš„åˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;createdAt&lt;/code&gt; ç´¢å¼•&lt;/strong&gt;ï¼šåœ¨å®šä½åˆ°çš„åˆ†åŒºä¸­ï¼Œæ•°æ®åº“ä¼šä½¿ç”¨ &lt;code&gt;idx_createdAt&lt;/code&gt; ç´¢å¼•å¿«é€Ÿå¯¹ç»“æœè¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å¤åˆç´¢å¼•"&gt;å¤åˆç´¢å¼•
&lt;/h3&gt;&lt;p&gt;å¦ä¸€ç§æ›´é«˜æ•ˆçš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå¤åˆç´¢å¼•ï¼Œç»“åˆ &lt;code&gt;user_id&lt;/code&gt; å’Œ &lt;code&gt;createdAt&lt;/code&gt; åˆ—ã€‚è¿™æ ·å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–æŒ‰ç”¨æˆ·å’Œæ—¶é—´æ’åºçš„æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LOCAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INDEX&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;idx_user_createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ON&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="å¤åˆç´¢å¼•çš„ä¼˜åŠ¿"&gt;å¤åˆç´¢å¼•çš„ä¼˜åŠ¿
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢ä¼˜åŒ–&lt;/strong&gt;ï¼šå¤åˆç´¢å¼•å¯ä»¥åŒæ—¶åˆ©ç”¨ &lt;code&gt;user_id&lt;/code&gt; å’Œ &lt;code&gt;createdAt&lt;/code&gt; åˆ—çš„æœ‰åºæ€§ï¼Œä¼˜åŒ–æŒ‰ç”¨æˆ·å’Œæ—¶é—´æ’åºçš„æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘I/Oæ“ä½œ&lt;/strong&gt;ï¼šå¤åˆç´¢å¼•å¯ä»¥å‡å°‘æ•°æ®åº“éœ€è¦è¯»å–çš„æ•°æ®é‡ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ç¤ºä¾‹æŸ¥è¯¢-2"&gt;ç¤ºä¾‹æŸ¥è¯¢
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨å¤åˆç´¢å¼•çš„æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;notifications&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;12345&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;ORDER&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;createdAt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;DESC&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="k"&gt;LIMIT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œæ•°æ®åº“å¯ä»¥ç›´æ¥ä½¿ç”¨ &lt;code&gt;idx_user_createdAt&lt;/code&gt; å¤åˆç´¢å¼•ï¼Œå¿«é€Ÿå®šä½åˆ°åŒ…å« &lt;code&gt;user_id = 12345&lt;/code&gt; çš„è®°å½•ï¼Œå¹¶æŒ‰ &lt;code&gt;createdAt&lt;/code&gt; åˆ—è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;h3 id="æ€»ç»“-1"&gt;æ€»ç»“
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•åˆ—ç´¢å¼•&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;user_id&lt;/code&gt; å’Œ &lt;code&gt;createdAt&lt;/code&gt; åˆ—ä¸Šåˆ†åˆ«åˆ›å»ºæœ¬åœ°ç´¢å¼•ï¼Œå¯ä»¥åˆ†åˆ«ä¼˜åŒ–æŒ‰ç”¨æˆ·å’ŒæŒ‰æ—¶é—´çš„æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆç´¢å¼•&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å« &lt;code&gt;user_id&lt;/code&gt; å’Œ &lt;code&gt;createdAt&lt;/code&gt; åˆ—çš„å¤åˆç´¢å¼•ï¼Œå¯ä»¥æ›´é«˜æ•ˆåœ°ä¼˜åŒ–æŒ‰ç”¨æˆ·å’Œæ—¶é—´æ’åºçš„æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡åˆç†è®¾è®¡ç´¢å¼•ï¼Œå¯ä»¥æ˜¾è‘—æé«˜æŸ¥è¯¢æ€§èƒ½ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>ã€Frontã€‘ç™¾åº¦å‰ç«¯å®ä¹ æ€»ç»“</title><link>https://dyhes.github.io/p/front%E7%99%BE%E5%BA%A6%E5%89%8D%E7%AB%AF%E5%AE%9E%E4%B9%A0%E6%80%BB%E7%BB%93/</link><pubDate>Wed, 21 Aug 2024 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/front%E7%99%BE%E5%BA%A6%E5%89%8D%E7%AB%AF%E5%AE%9E%E4%B9%A0%E6%80%BB%E7%BB%93/</guid><description>&lt;h2 id="å·¥ä½œ"&gt;å·¥ä½œ
&lt;/h2&gt;&lt;p&gt;fe&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;iAPIå¸®åŠ©æ–‡æ¡£&lt;/li&gt;
&lt;li&gt;Comateå…³è”&lt;/li&gt;
&lt;li&gt;ä»£ç ç”ŸæˆåŠŸèƒ½æ‰“ç‚¹&lt;/li&gt;
&lt;li&gt;çŸ¥è¯†åº“å¯¼å…¥&lt;/li&gt;
&lt;li&gt;æ™ºèƒ½æ£€ç´¢ï¼ˆApihubï¼Œé¡¹ç›®ï¼‰&lt;/li&gt;
&lt;li&gt;æ”¯æ´å…¶ä»–é¡¹ç›®
&lt;ul&gt;
&lt;li&gt;å¹´åº¦æ€»ç»“&lt;/li&gt;
&lt;li&gt;å¼€æºè´¦å·ç»‘å®š&lt;/li&gt;
&lt;li&gt;icafeå¡ç‰‡ç»‘å®šåŠŸèƒ½ç§»æ¤è‡³æ’ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ—¥å¸¸éœ€æ±‚ï¼ˆbugï¼Œäº¤äº’ä¼˜åŒ–ï¼Œé¡µé¢ä¼˜åŒ–ç­‰ï¼‰
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·é‚€è¯·&lt;/li&gt;
&lt;li&gt;å‘å¸ƒæ–‡æ¡£&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;be&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‰´æƒé€»è¾‘ï¼ˆugateï¼ŒAccessTokenï¼‰&lt;/li&gt;
&lt;li&gt;æ‰“ç‚¹è®°å½•openapiè°ƒç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="bug"&gt;Bug
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;äº‹ä»¶æ‰©æ•£å¯¼è‡´å¸ƒå°”å€¼é‡ç½®ï¼ŒModalå…³ä¸æ‰&lt;/li&gt;
&lt;li&gt;vue webpack å›¾ç‰‡å¯¼å…¥è®¾ç½®é—®é¢˜&lt;/li&gt;
&lt;li&gt;çŸ¥è¯†åº“æ–‡æ¡£è§£æï¼Œä»£ç åˆå¹¶å¯¼è‡´ç¯å¢ƒå˜é‡è¢«è¦†ç›–ï¼Œæœ¬åœ°å¯ä»¥ï¼Œçº¿ä¸Šå‡ºé”™è€ƒè™‘ç¯å¢ƒå˜é‡&lt;/li&gt;
&lt;li&gt;usecallbackçš„ä¾èµ–è¦åŠ å…¨ï¼Œå¥½å‡ ä¸ªå°æ—¶æ‰å®šä½åˆ°bug&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ”¶è·"&gt;æ”¶è·
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;èƒ½åŠ›ä¸Šæå‡ï¼ˆå¼€å‘èƒ½åŠ›ï¼Œä»£ç é˜…è¯»èƒ½åŠ›ï¼Œå›¢é˜Ÿåä½œæ²Ÿé€šäº¤æµèƒ½åŠ›ï¼‰&lt;/li&gt;
&lt;li&gt;ç§¯ç´¯å·¥ä½œç»éªŒï¼ˆæ–¹æ–¹é¢é¢çš„ç»†èŠ‚è€³æ¿¡ç›®æŸ“ï¼‰&lt;/li&gt;
&lt;li&gt;ç§¯ç´¯äº†debugç»éªŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ„Ÿæ‚Ÿ"&gt;æ„Ÿæ‚Ÿ
&lt;/h2&gt;&lt;p&gt;é˜…è¯»ä»£ç ï¼Œä»ç‚¹åˆ°é¢é€æ­¥æ‰©æ•£&lt;/p&gt;
&lt;p&gt;é‡è¦çš„ä¸æ˜¯åšäº†ä»€ä¹ˆï¼Œè€Œæ˜¯åšçš„äº‹æƒ…å¯¹ç»“æœæœ‰ä»€ä¹ˆå¸®åŠ©&lt;/p&gt;
&lt;p&gt;è§£å†³å®Œä»£ç å†²çªè¦éªŒè¯&lt;/p&gt;
&lt;p&gt;å†™å·¥ä½œæ—¥å¿—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯&lt;/p&gt;</description></item></channel></rss>