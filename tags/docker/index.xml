<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Docker on é£é¸¿è¸é›ªæ³¥</title><link>https://dyhes.github.io/tags/docker/</link><description>Recent content in Docker on é£é¸¿è¸é›ªæ³¥</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 20 Oct 2025 22:07:04 +0800</lastBuildDate><atom:link href="https://dyhes.github.io/tags/docker/index.xml" rel="self" type="application/rss+xml"/><item><title>ã€Dockerã€‘Concepts</title><link>https://dyhes.github.io/p/dockerconcepts/</link><pubDate>Mon, 30 Jun 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/dockerconcepts/</guid><description>&lt;h2 id="docker"&gt;Docker
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯å¯¹Dockerçš„è¯¦ç»†ä»‹ç»ï¼Œä»æ ¸å¿ƒæ¦‚å¿µåˆ°æŠ€æœ¯åŸç†ã€åº”ç”¨åœºæ™¯åŠç”Ÿæ€ç³»ç»Ÿï¼Œç»“åˆå¤šç»´åº¦ä¿¡æ¯ç»¼åˆæ•´ç†ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-dockerçš„å®šä¹‰ä¸æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ³ &lt;strong&gt;Dockerçš„å®šä¹‰ä¸æ ¸å¿ƒæ¦‚å¿µ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸºæœ¬å®šä¹‰&lt;/strong&gt;
Dockeræ˜¯ä¸€ä¸ªå¼€æºçš„&lt;strong&gt;åº”ç”¨å®¹å™¨å¼•æ“&lt;/strong&gt;ï¼ŒåŸºäºGoè¯­è¨€å¼€å‘ï¼Œå…è®¸å¼€å‘è€…å°†åº”ç”¨åŠå…¶ä¾èµ–æ‰“åŒ…æˆè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ã€‚å®¹å™¨å…±äº«å®¿ä¸»æœºæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œä½†é€šè¿‡éš”ç¦»æŠ€æœ¯ä¿è¯ç‹¬ç«‹æ€§ï¼Œå®ç°â€œä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œâ€&lt;a class="link" href="@ref" &gt;1,4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒç»„ä»¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é•œåƒï¼ˆImageï¼‰&lt;/strong&gt;ï¼šåªè¯»æ¨¡æ¿ï¼ŒåŒ…å«åº”ç”¨è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆä»£ç ã€åº“ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰ã€‚é‡‡ç”¨åˆ†å±‚å­˜å‚¨ç»“æ„ï¼ˆUnion FSï¼‰ï¼Œæ¯ä¸€å±‚å¯å¤ç”¨ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨ï¼ˆContainerï¼‰&lt;/strong&gt;ï¼šé•œåƒçš„è¿è¡Œå®ä¾‹ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œå’Œè¿›ç¨‹ç©ºé—´ã€‚é€šè¿‡å†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼‰æŠ€æœ¯ï¼Œä¿®æ”¹ä»…ä½œç”¨äºå®¹å™¨å±‚ï¼Œä¸æ”¹å˜é•œåƒæœ¬èº«&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»“åº“ï¼ˆRegistryï¼‰&lt;/strong&gt;ï¼šé›†ä¸­å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„å¹³å°ã€‚å…¬æœ‰ä»“åº“å¦‚Docker Hubï¼Œç§æœ‰ä»“åº“å¦‚Harbor&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dockerfile&lt;/strong&gt;ï¼šæ–‡æœ¬æ–‡ä»¶å®šä¹‰é•œåƒæ„å»ºæ­¥éª¤ï¼ˆå¦‚&lt;code&gt;FROM&lt;/code&gt;æŒ‡å®šåŸºç¡€é•œåƒã€&lt;code&gt;RUN&lt;/code&gt;æ‰§è¡Œå‘½ä»¤ï¼‰ï¼Œå®ç°è‡ªåŠ¨åŒ–æ„å»º&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æŠ€æœ¯åŸç†ä¸æ¶æ„è®¾è®¡"&gt;âš™ï¸ &lt;strong&gt;æŠ€æœ¯åŸç†ä¸æ¶æ„è®¾è®¡&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚æŠ€æœ¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Namespace&lt;/strong&gt;ï¼šæä¾›èµ„æºéš”ç¦»ï¼Œåˆ†ä¸º6ç±»ï¼š
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;PID Namespace&lt;/td&gt;
&lt;td&gt;éš”ç¦»è¿›ç¨‹ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Net Namespace&lt;/td&gt;
&lt;td&gt;éš”ç¦»ç½‘ç»œæ¥å£ä¸ç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;MNT Namespace&lt;/td&gt;
&lt;td&gt;éš”ç¦»æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IPC Namespace&lt;/td&gt;
&lt;td&gt;éš”ç¦»è¿›ç¨‹é—´é€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UTS Namespace&lt;/td&gt;
&lt;td&gt;éš”ç¦»ä¸»æœºåä¸åŸŸå&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;User Namespace&lt;/td&gt;
&lt;td&gt;éš”ç¦»ç”¨æˆ·ä¸ç”¨æˆ·ç»„ &lt;a class="link" href="@ref" &gt;2,3&lt;/a&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cgroups&lt;/strong&gt;ï¼šé™åˆ¶èµ„æºä½¿ç”¨ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜I/Oç­‰ï¼‰ï¼Œé˜²æ­¢å•ä¸ªå®¹å™¨è€—å°½å®¿ä¸»æœºèµ„æº&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Union File Systemï¼ˆUnion FSï¼‰&lt;/strong&gt;ï¼šæ”¯æŒåˆ†å±‚é•œåƒå­˜å‚¨ï¼Œå¤šä¸ªå®¹å™¨å…±äº«åŸºç¡€é•œåƒå±‚ï¼Œå‡å°‘å†—ä½™&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶æ„è®¾è®¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹&lt;/strong&gt;ï¼šç”¨æˆ·é€šè¿‡Dockerå®¢æˆ·ç«¯å‘é€å‘½ä»¤ï¼Œç”±å®ˆæŠ¤è¿›ç¨‹ï¼ˆDockerdï¼‰æ‰§è¡Œæ“ä½œï¼ˆæ„å»ºã€è¿è¡Œå®¹å™¨ç­‰ï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨è¿è¡Œæ—¶&lt;/strong&gt;ï¼šæ—©æœŸä½¿ç”¨LXCï¼Œåæ”¹ä¸ºè‡ªç ”çš„&lt;code&gt;runc&lt;/code&gt;ï¼ˆç¬¦åˆOCIæ ‡å‡†ï¼‰ï¼Œå®ç°è·¨å¹³å°å…¼å®¹&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä½œæµç¨‹ä¸æ ¸å¿ƒç»„ä»¶"&gt;ğŸ”„ &lt;strong&gt;å·¥ä½œæµç¨‹ä¸æ ¸å¿ƒç»„ä»¶&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹å·¥ä½œæµ&lt;/strong&gt;ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;graph LR
A[ç¼–å†™Dockerfile] --&amp;gt; B[æ„å»ºé•œåƒ] --&amp;gt; C[æ¨é€è‡³ä»“åº“] --&amp;gt; D[æ‹‰å–é•œåƒå¹¶è¿è¡Œå®¹å™¨]
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„å»º&lt;/strong&gt;ï¼š&lt;code&gt;docker build -t my-image:tag .&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œ&lt;/strong&gt;ï¼š&lt;code&gt;docker run -d --name my-container my-image:tag&lt;/code&gt;&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨ç®¡ç†å·¥å…·&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Docker Compose&lt;/strong&gt;ï¼šé€šè¿‡YAMLæ–‡ä»¶å®šä¹‰å¤šå®¹å™¨åº”ç”¨ï¼ˆå¦‚WebæœåŠ¡+æ•°æ®åº“ï¼‰ï¼Œä¸€é”®å¯åŠ¨/åœæ­¢&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Docker Swarm/Kubernetes&lt;/strong&gt;ï¼šç”¨äºå®¹å™¨ç¼–æ’ï¼Œæ”¯æŒé›†ç¾¤ç®¡ç†ã€è‡ªåŠ¨æ‰©ç¼©å®¹&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸ä¼˜åŠ¿åˆ†æ"&gt;ğŸ’¡ &lt;strong&gt;åº”ç”¨åœºæ™¯ä¸ä¼˜åŠ¿åˆ†æ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒåº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒä¸€è‡´æ€§&lt;/strong&gt;ï¼šè§£å†³å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå·®å¼‚é—®é¢˜ï¼ˆå¦‚ä¾èµ–åº“ç‰ˆæœ¬å†²çªï¼‰&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾®æœåŠ¡éƒ¨ç½²&lt;/strong&gt;ï¼šæ¯ä¸ªå¾®æœåŠ¡ç‹¬ç«‹å®¹å™¨åŒ–ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CI/CDæµæ°´çº¿&lt;/strong&gt;ï¼šä¸Jenkins/GitLabé›†æˆï¼Œå®ç°è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸æ¯”è™šæ‹Ÿæœºçš„ä¼˜åŠ¿&lt;/strong&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Dockerå®¹å™¨&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼ ç»Ÿè™šæ‹Ÿæœº&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯åŠ¨é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç§’çº§ï¼ˆå…±äº«å†…æ ¸ï¼‰&lt;/td&gt;
&lt;td&gt;åˆ†é’Ÿçº§ï¼ˆéœ€å¯åŠ¨å®Œæ•´OSï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºå ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆæ— Guest OSå¼€é”€ï¼‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆæ¯ä¸ªVMéœ€ç‹¬ç«‹OSèµ„æºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹çº§ï¼ˆé€šè¿‡Namespaceï¼‰&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶çº§ï¼ˆæ›´å¼ºéš”ç¦»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆé•œåƒè·¨å¹³å°ä¸€è‡´ï¼‰&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆä¾èµ–Hypervisorå…¼å®¹ï¼‰ &lt;a class="link" href="@ref" &gt;3,4,6&lt;/a&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éš”ç¦»æ€§è¾ƒå¼±&lt;/strong&gt;ï¼šå…±äº«å†…æ ¸å¯¼è‡´å®‰å…¨é£é™©é«˜äºè™šæ‹Ÿæœºï¼Œä¸é€‚åˆå¼ºéš”ç¦»éœ€æ±‚åœºæ™¯&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»…æ”¯æŒLinuxåº”ç”¨&lt;/strong&gt;ï¼šWindows/macOSéœ€é€šè¿‡è™šæ‹ŸåŒ–å±‚ï¼ˆå¦‚Hyper-Vï¼‰è¿è¡Œ&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å‘å±•å†ç¨‹ä¸ç”Ÿæ€ç³»ç»Ÿ"&gt;ğŸ“ˆ &lt;strong&gt;å‘å±•å†ç¨‹ä¸ç”Ÿæ€ç³»ç»Ÿ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‰ˆæœ¬æ¼”è¿›&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2013å¹´&lt;/strong&gt;ï¼šDotCloudå¼€æºDockerï¼ŒåŸºäºLXCæŠ€æœ¯&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2014å¹´ï¼ˆ1.0ç‰ˆï¼‰&lt;/strong&gt;ï¼šç”Ÿäº§ç¯å¢ƒå¯ç”¨ï¼Œå¼•å…¥æ ¸å¿ƒå‘½ä»¤ï¼ˆ&lt;code&gt;docker run&lt;/code&gt;ã€&lt;code&gt;docker build&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2017å¹´&lt;/strong&gt;ï¼šåˆ†æ‹†ä¸ºç¤¾åŒºç‰ˆï¼ˆCEï¼‰å’Œä¼ä¸šç‰ˆï¼ˆEEï¼‰&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2020å¹´å&lt;/strong&gt;ï¼šå¼ºåŒ–å®‰å…¨ï¼ˆRootlessæ¨¡å¼ï¼‰ã€ä¼˜åŒ–ARM/M1æ”¯æŒã€é›†æˆKubernetes&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸å…³å·¥å…·ä¸ç«å“&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é•œåƒä»“åº“&lt;/strong&gt;ï¼šDocker Hubï¼ˆå…¬æœ‰ï¼‰ã€Harborï¼ˆç§æœ‰ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨è¿è¡Œæ—¶&lt;/strong&gt;ï¼šrktï¼ˆCoreOSï¼‰ã€CRI-Oï¼ˆKubernetesä¸“ç”¨ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–æ’å·¥å…·&lt;/strong&gt;ï¼šKubernetesï¼ˆä¸»æµæ›¿ä»£Swarmï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Dockeré€šè¿‡&lt;strong&gt;æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–&lt;/strong&gt;æŠ€æœ¯ï¼Œä»¥å®¹å™¨ä¸ºè½½ä½“è§£å†³äº†ç¯å¢ƒä¸ä¸€è‡´å’Œèµ„æºæ•ˆç‡é—®é¢˜ï¼Œæˆä¸ºDevOpså’Œäº‘åŸç”ŸæŠ€æœ¯çš„åŸºçŸ³ã€‚å…¶è½»é‡åŒ–ã€æ ‡å‡†åŒ–ç‰¹æ€§åœ¨å¾®æœåŠ¡ã€CI/CDä¸­è¡¨ç°çªå‡ºï¼Œä½†éœ€ç»“åˆä¸šåŠ¡éœ€æ±‚æƒè¡¡éš”ç¦»æ€§ä¸å®‰å…¨æ€§ã€‚æœªæ¥éšç€å®¹å™¨ç”Ÿæ€ï¼ˆå¦‚Kubernetesã€æœåŠ¡ç½‘æ ¼ï¼‰çš„æ¼”è¿›ï¼ŒDockerå°†ç»§ç»­åœ¨åº”ç”¨ç°ä»£åŒ–ä¸­æ‰®æ¼”æ ¸å¿ƒè§’è‰²ã€‚
å¦‚éœ€è¿›ä¸€æ­¥äº†è§£å®‰è£…é…ç½®ï¼ˆå¦‚æˆ–æ•™ç¨‹ï¼‰æˆ–å‘½ä»¤è¯¦è§£ï¼ˆå¦‚ï¼‰ï¼Œå¯å‚è€ƒå…·ä½“ç« èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="vs-è™šæ‹Ÿæœº"&gt;vs. è™šæ‹Ÿæœº
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ Docker ä¸è™šæ‹Ÿæœºçš„è¯¦ç»†å¯¹æ¯”ï¼Œä»æ¶æ„åŸç†ã€æ€§èƒ½ã€éš”ç¦»æ€§ã€é€‚ç”¨åœºæ™¯ç­‰ç»´åº¦ç»¼åˆåˆ†æï¼Œç»“åˆå¤šæºä¿¡æ¯æ•´åˆï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ¶æ„ä¸å·¥ä½œåŸç†"&gt;âš™ï¸ &lt;strong&gt;æ¶æ„ä¸å·¥ä½œåŸç†&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Dockerï¼ˆå®¹å™¨ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è™šæ‹Ÿæœºï¼ˆVMï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è™šæ‹ŸåŒ–ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–ï¼ˆå…±äº«å®¿ä¸»æœºå†…æ ¸ï¼‰&lt;a class="link" href="@ref" &gt;1,3,9&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶çº§è™šæ‹ŸåŒ–ï¼ˆé€šè¿‡ Hypervisor æ¨¡æ‹Ÿç¡¬ä»¶ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç»„ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Docker å¼•æ“ã€å®¹å™¨è¿è¡Œæ—¶ï¼ˆå¦‚ runcï¼‰ã€é•œåƒåˆ†å±‚å­˜å‚¨ &lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Hypervisorï¼ˆå¦‚ VMware ESXiã€KVMï¼‰ã€Guest OSã€è™šæ‹Ÿç¡¬ä»¶ &lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºå ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;MB çº§&lt;/strong&gt;ï¼ˆä»…åŒ…å«åº”ç”¨åŠä¾èµ–ï¼‰&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GB çº§&lt;/strong&gt;ï¼ˆéœ€å®Œæ•´æ“ä½œç³»ç»Ÿï¼‰&lt;a class="link" href="@ref" &gt;3,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯åŠ¨é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç§’çº§å¯åŠ¨&lt;/strong&gt;ï¼ˆæ— æ“ä½œç³»ç»ŸåŠ è½½ï¼‰&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é’Ÿçº§å¯åŠ¨&lt;/strong&gt;ï¼ˆéœ€å¯åŠ¨å®Œæ•´ OSï¼‰&lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¸èµ„æºæ•ˆç‡"&gt;âš¡ &lt;strong&gt;æ€§èƒ½ä¸èµ„æºæ•ˆç‡&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æŒ‡æ ‡&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Docker&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è™šæ‹Ÿæœº&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CPU/å†…å­˜å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä½ï¼ˆç›´æ¥ä½¿ç”¨å®¿ä¸»æœºèµ„æºï¼‰&lt;a class="link" href="@ref" &gt;3,9&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜ï¼ˆHypervisor å±‚ + Guest OS å¼€é”€ï¼‰&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œå¯†åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•å®¿ä¸»æœºå¯è¿è¡Œ &lt;strong&gt;ä¸Šåƒå®¹å™¨&lt;/strong&gt;&lt;a class="link" href="@ref" &gt;2,10&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;å•å®¿ä¸»æœºä»…æ”¯æŒ &lt;strong&gt;å‡ åä¸ª VM&lt;/strong&gt;&lt;a class="link" href="@ref" &gt;2,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;I/O æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¥è¿‘å®¿ä¸»æœºæœ¬åœ°è¿›ç¨‹ï¼ˆæ— è™šæ‹ŸåŒ–å±‚ï¼‰&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;å› è™šæ‹ŸåŒ–å±‚å­˜åœ¨ &lt;strong&gt;æ€§èƒ½æŸè€—&lt;/strong&gt;ï¼ˆçº¦ 5-20%ï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-éš”ç¦»æ€§ä¸å®‰å…¨æ€§"&gt;ğŸ”’ &lt;strong&gt;éš”ç¦»æ€§ä¸å®‰å…¨æ€§&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ–¹é¢&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Docker&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è™šæ‹Ÿæœº&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹çº§éš”ç¦»ï¼ˆLinux Namespace/Cgroupsï¼‰&lt;a class="link" href="@ref" &gt;7,9&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿçº§éš”ç¦»&lt;/strong&gt;ï¼ˆç‹¬ç«‹å†…æ ¸+è™šæ‹Ÿç¡¬ä»¶ï¼‰&lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒå¼±ï¼ˆå…±äº«å†…æ ¸ï¼Œå®¹å™¨é€ƒé€¸é£é™©ï¼‰&lt;a class="link" href="@ref" &gt;5,9&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;æå¼ºï¼ˆç¡¬ä»¶çº§éš”ç¦»ï¼Œæ”»å‡»éš¾æ‰©æ•£ï¼‰&lt;a class="link" href="@ref" &gt;2,10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;root æƒé™é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¹å™¨å†… root ç­‰åŒå®¿ä¸»æœº rootï¼ˆæƒé™æœªåˆ†ç¦»ï¼‰&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;è™šæ‹Ÿæœº root ä¸å®¿ä¸»æœº root æƒé™åˆ†ç¦»&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯å¯¹æ¯”"&gt;ğŸ¯ &lt;strong&gt;é€‚ç”¨åœºæ™¯å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Docker ä¼˜åŠ¿&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è™šæ‹Ÿæœº ä¼˜åŠ¿&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¾®æœåŠ¡/äº‘åŸç”Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¿«é€Ÿéƒ¨ç½²ã€å¼¹æ€§æ‰©ç¼©å®¹ &lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;âŒ èµ„æºå¼€é”€å¤§ï¼Œå¯åŠ¨æ…¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CI/CD æµæ°´çº¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… ç¯å¢ƒä¸€è‡´æ€§ï¼ˆå¼€å‘â†’æµ‹è¯•â†’ç”Ÿäº§ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;âŒ ç¯å¢ƒé…ç½®å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šæ“ä½œç³»ç»Ÿéœ€æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä»…æ”¯æŒä¸å®¿ä¸»æœºåŒå†…æ ¸çš„ç³»ç»Ÿï¼ˆå¦‚ Linux å®¹å™¨ï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¯åŒæ—¶è¿è¡Œ Windows/Linux ç­‰å¼‚æ„ç³»ç»Ÿ &lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å®‰å…¨éš”ç¦»åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä¸é€‚ç”¨ï¼ˆå¦‚é‡‘èæ ¸å¿ƒç³»ç»Ÿã€å¤šç§Ÿæˆ·ç¯å¢ƒï¼‰&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¼ºéš”ç¦»ä¿éšœï¼ˆå¦‚ VDIã€æ•æ„Ÿæ•°æ®å¤„ç†ï¼‰&lt;a class="link" href="@ref" &gt;1,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é—ç•™ç³»ç»Ÿå…¼å®¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä¾èµ–æ—§ç‰ˆåº“/ç¡¬ä»¶çš„åº”ç”¨éš¾å®¹å™¨åŒ–&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;âœ… ç›´æ¥è¿è¡Œæœªæ”¹é€ çš„é—ç•™åº”ç”¨&lt;a class="link" href="@ref" &gt;10&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ç”Ÿæ€ç³»ç»Ÿä¸ç®¡ç†å·¥å…·"&gt;ğŸŒ &lt;strong&gt;ç”Ÿæ€ç³»ç»Ÿä¸ç®¡ç†å·¥å…·&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;èƒ½åŠ›&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Docker&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è™šæ‹Ÿæœº&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼–æ’å·¥å…·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Kubernetesï¼ˆä¸»æµï¼‰ã€Docker Swarm&lt;a class="link" href="@ref" &gt;5,10&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;VMware vSphereã€OpenStack&lt;a class="link" href="@ref" &gt;2,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•œåƒ/æ¨¡æ¿ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Docker Hubï¼ˆå…¬æœ‰ä»“åº“ï¼‰ã€Harborï¼ˆç§æœ‰ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;OVF æ¨¡æ¿ã€VM å¿«ç…§&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¯ç”¨æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–ç¼–æ’å·¥å…·ï¼ˆå¦‚ K8s è‡ªåŠ¨é‡å¯å®¹å™¨ï¼‰&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;æˆç†Ÿï¼ˆVMware HA æ‰¿è¯º 99.999% å¯ç”¨æ€§ï¼‰&lt;a class="link" href="@ref" &gt;5,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€‰ Docker çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è¿½æ±‚ &lt;strong&gt;æè‡´èµ„æºåˆ©ç”¨&lt;/strong&gt;ï¼ˆäº‘åŸç”Ÿã€å¾®æœåŠ¡ï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;éœ€ &lt;strong&gt;å¿«é€Ÿè¿­ä»£&lt;/strong&gt;ï¼ˆCI/CDã€DevOpsï¼‰&lt;a class="link" href="@ref" &gt;4,10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç¯å¢ƒä¸€è‡´æ€§è¦æ±‚é«˜ï¼ˆè·¨å¹³å°å¼€å‘æµ‹è¯•ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰è™šæ‹Ÿæœºçš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºéš”ç¦»åˆšæ€§éœ€æ±‚&lt;/strong&gt;ï¼ˆå®‰å…¨åˆè§„ã€å¤šç§Ÿæˆ·ï¼‰&lt;a class="link" href="@ref" &gt;2,9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œå¼‚æ„ OS&lt;/strong&gt;ï¼ˆå¦‚ Windows åº”ç”¨ï¼‰&lt;a class="link" href="@ref" &gt;3,10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ ç»Ÿåº”ç”¨å…¼å®¹&lt;/strong&gt;ï¼ˆæ— éœ€æ”¹é€ çš„é—ç•™ç³»ç»Ÿï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆæ¶æ„è¶‹åŠ¿&lt;/strong&gt;ï¼š
è™šæ‹Ÿæœºä¸­éƒ¨ç½² Docker é›†ç¾¤ï¼ˆå¦‚ VMware + Kubernetesï¼‰ï¼Œå…¼é¡¾éš”ç¦»æ€§ä¸å®¹å™¨æ•ˆç‡&lt;a class="link" href="@ref" &gt;5,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;æ›´æ·±å…¥çš„æŠ€æœ¯ç»†èŠ‚ï¼ˆå¦‚ Docker çš„ Union FSã€è™šæ‹Ÿæœºçš„ VT-x ç¡¬ä»¶åŠ é€Ÿï¼‰æˆ–å…·ä½“åœºæ™¯æ–¹æ¡ˆï¼Œå¯è¿›ä¸€æ­¥æ¢è®¨ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="è™šæ‹ŸåŒ–æŠ€æœ¯"&gt;è™šæ‹ŸåŒ–æŠ€æœ¯
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯é™¤Dockerå®¹å™¨å¤–çš„å…¶ä»–ä¸»æµè™šæ‹ŸåŒ–æŠ€æœ¯åˆ†ç±»è¯¦è§£ï¼Œæ¶µç›–åŸç†ã€ä»£è¡¨æŠ€æœ¯ä¸åº”ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æœåŠ¡å™¨è™šæ‹ŸåŒ–"&gt;ğŸ–¥ï¸ &lt;strong&gt;æœåŠ¡å™¨è™šæ‹ŸåŒ–&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. å…¨è™šæ‹ŸåŒ–ï¼ˆFull Virtualizationï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šé€šè¿‡Hypervisorï¼ˆå¦‚VMware ESXiï¼‰åœ¨ç‰©ç†ç¡¬ä»¶ä¸Šåˆ›å»ºå®Œå…¨éš”ç¦»çš„è™šæ‹Ÿæœºï¼Œæ¯ä¸ªè™šæ‹Ÿæœºè¿è¡Œç‹¬ç«‹æ“ä½œç³»ç»Ÿã€‚Hypervisoræ¨¡æ‹Ÿå®Œæ•´ç¡¬ä»¶ç¯å¢ƒï¼Œæ— éœ€ä¿®æ”¹å®¢æˆ·æœºæ“ä½œç³»ç»Ÿ&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä»£è¡¨æŠ€æœ¯ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;VMware ESXi&lt;/strong&gt;ï¼šä¼ä¸šçº§è™šæ‹ŸåŒ–å¹³å°ï¼Œæ”¯æŒåŠ¨æ€èµ„æºåˆ†é…ã€å®æ—¶è¿ç§»ï¼ˆvMotionï¼‰ï¼Œå¹¿æ³›ç”¨äºæ•°æ®ä¸­å¿ƒæ•´åˆ&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Microsoft Hyper-V&lt;/strong&gt;ï¼šé›†æˆäºWindows Serverï¼Œæ”¯æŒåµŒå¥—è™šæ‹ŸåŒ–ï¼Œé€‚ç”¨äºæ··åˆäº‘ç¯å¢ƒ&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šå…¼å®¹æ€§å¼ºï¼Œæ”¯æŒå¼‚æ„æ“ä½œç³»ç»Ÿï¼ˆWindows/Linuxï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€é™&lt;/strong&gt;ï¼šHypervisorå±‚å¼•å…¥æ€§èƒ½å¼€é”€ï¼ˆçº¦5-20%ï¼‰&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚
&lt;strong&gt;2. åŠè™šæ‹ŸåŒ–ï¼ˆParavirtualizationï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šéœ€ä¿®æ”¹å®¢æˆ·æœºæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œä½¿å…¶æ„ŸçŸ¥è™šæ‹ŸåŒ–ç¯å¢ƒï¼Œç›´æ¥ä¸Hypervisoråä½œï¼ˆå¦‚Xenï¼‰ï¼Œå‡å°‘æ¨¡æ‹Ÿå¼€é”€&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£è¡¨æŠ€æœ¯&lt;/strong&gt;ï¼š&lt;strong&gt;Xen&lt;/strong&gt;ï¼šå¼€æºè™šæ‹ŸåŒ–å¹³å°ï¼Œç”±å‰‘æ¡¥å¤§å­¦å¼€å‘ï¼Œæ—©æœŸç”¨äºå…¬æœ‰äº‘ï¼ˆå¦‚AWS EC2ï¼‰ï¼Œéœ€å®šåˆ¶åŒ–æ“ä½œç³»ç»Ÿæ”¯æŒ&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¯¹I/Oæ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®åº“é›†ç¾¤ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚
&lt;strong&gt;3. ç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–ï¼ˆHardware-Assisted Virtualizationï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šä¾èµ–CPUæŒ‡ä»¤é›†ï¼ˆIntel VT-x / AMD-Vï¼‰ç›´æ¥å¤„ç†è™šæ‹ŸåŒ–æ“ä½œï¼Œå‡å°‘è½¯ä»¶å±‚å¼€é”€ã€‚å…³é”®æŠ€æœ¯åŒ…æ‹¬å†…å­˜è™šæ‹ŸåŒ–ï¼ˆEPT/NPTï¼‰å’ŒI/Oè™šæ‹ŸåŒ–ï¼ˆVT-d/SR-IOVï¼‰&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£è¡¨æŠ€æœ¯&lt;/strong&gt;ï¼š&lt;strong&gt;KVMï¼ˆKernel-based Virtual Machineï¼‰&lt;/strong&gt;ï¼šLinuxå†…æ ¸æ¨¡å—ï¼Œå°†Linuxè½¬åŒ–ä¸ºHypervisorï¼Œç»“åˆQEMUæ¨¡æ‹Ÿç¡¬ä»¶ï¼Œæˆä¸ºOpenStacké»˜è®¤è™šæ‹ŸåŒ–æ–¹æ¡ˆ&lt;a class="link" href="@ref" &gt;3,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šè™šæ‹Ÿæœºæ€§èƒ½è¾¾ç‰©ç†æœº95%ä»¥ä¸Šï¼Œé€‚ç”¨äºé«˜å¯†åº¦äº‘ç¯å¢ƒ&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å®¹å™¨è™šæ‹ŸåŒ–æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–"&gt;ğŸ“¦ &lt;strong&gt;å®¹å™¨è™šæ‹ŸåŒ–ï¼ˆæ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. è½»é‡çº§å®¹å™¨æŠ€æœ¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå…±äº«å®¿ä¸»æœºå†…æ ¸ï¼Œé€šè¿‡Namespaceå’ŒCgroupså®ç°è¿›ç¨‹éš”ç¦»ï¼Œæ— éœ€ç‹¬ç«‹æ“ä½œç³»ç»Ÿ&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä»£è¡¨æŠ€æœ¯ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;LXCï¼ˆLinux Containersï¼‰&lt;/strong&gt;ï¼šæ—©æœŸLinuxå®¹å™¨å¼•æ“ï¼ŒDockerçš„å‰èº«åŸºç¡€&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OpenVZ&lt;/strong&gt;ï¼šåŸºäºLinuxå†…æ ¸çš„OSçº§è™šæ‹ŸåŒ–ï¼Œæ”¯æŒèµ„æºéš”ç¦»ä½†éœ€å®šåˆ¶å†…æ ¸&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹æ¯”Docker&lt;/strong&gt;ï¼šæ›´æ¥è¿‘ç³»ç»Ÿåº•å±‚ï¼Œé€‚åˆéœ€è¦ç›´æ¥ç®¡ç†å†…æ ¸èµ„æºçš„åœºæ™¯ã€‚
&lt;strong&gt;2. å®¹å™¨ç¼–æ’ç”Ÿæ€&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes&lt;/strong&gt;ï¼šå®¹å™¨ç¼–æ’æ ‡æ†ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©ç¼©å®¹ï¼Œä¸KVMã€VMwareé›†æˆå®ç°æ··åˆè™šæ‹ŸåŒ–ç®¡ç†&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å­˜å‚¨è™šæ‹ŸåŒ–"&gt;ğŸ’¾ &lt;strong&gt;å­˜å‚¨è™šæ‹ŸåŒ–&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šæ•´åˆç‰©ç†å­˜å‚¨è®¾å¤‡ï¼ˆSAN/NASï¼‰ä¸ºç»Ÿä¸€â€œå­˜å‚¨æ± â€ï¼Œå®ç°åŠ¨æ€åˆ†é…ä¸æ•°æ®è¿ç§»&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æŠ€æœ¯æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå­˜å‚¨é˜µåˆ—ï¼ˆå¦‚EMC VMAXï¼‰æä¾›å·ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯ä»¶æ–¹æ¡ˆ&lt;/strong&gt;ï¼šåˆ†å¸ƒå¼å­˜å‚¨ï¼ˆå¦‚Cephï¼‰ã€è™šæ‹ŸSANï¼ˆå¦‚VMware vSANï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒåŠŸèƒ½ï¼š
&lt;ul&gt;
&lt;li&gt;ç²¾ç®€é…ç½®ï¼ˆThin Provisioningï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¿«ç…§ä¸å…‹éš†
&lt;ul&gt;
&lt;li&gt;å¼‚åœ°æ•°æ®å¤åˆ¶ï¼ˆå®¹ç¾ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šäº‘å­˜å‚¨ã€å¤‡ä»½æ¢å¤ç³»ç»Ÿ&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç½‘ç»œè™šæ‹ŸåŒ–"&gt;ğŸŒ &lt;strong&gt;ç½‘ç»œè™šæ‹ŸåŒ–&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. SDNï¼ˆè½¯ä»¶å®šä¹‰ç½‘ç»œï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåˆ†ç¦»æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢ï¼Œé€šè¿‡æ§åˆ¶å™¨ï¼ˆå¦‚OpenDaylightï¼‰é›†ä¸­ç®¡ç†ç½‘ç»œæµé‡&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨&lt;/strong&gt;ï¼šåŠ¨æ€é…ç½®VLANã€è´Ÿè½½å‡è¡¡ï¼Œæ”¯æŒå¤šç§Ÿæˆ·ç½‘ç»œéš”ç¦»ï¼ˆå¦‚äº‘æœåŠ¡å•†ï¼‰ã€‚
&lt;strong&gt;2. NFVï¼ˆç½‘ç»œåŠŸèƒ½è™šæ‹ŸåŒ–ï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå°†é˜²ç«å¢™ã€è·¯ç”±å™¨ç­‰ç½‘ç»œåŠŸèƒ½ä»ä¸“ç”¨ç¡¬ä»¶è§£è€¦ï¼Œä»¥è½¯ä»¶å½¢å¼è¿è¡Œäºè™šæ‹Ÿæœº&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š5Gæ ¸å¿ƒç½‘UPFï¼ˆç”¨æˆ·é¢åŠŸèƒ½ï¼‰è™šæ‹ŸåŒ–ï¼Œé™ä½è¿è¥å•†è®¾å¤‡æˆæœ¬&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-åº”ç”¨ä¸æ¡Œé¢è™šæ‹ŸåŒ–"&gt;ğŸ–±ï¸ &lt;strong&gt;åº”ç”¨ä¸æ¡Œé¢è™šæ‹ŸåŒ–&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. åº”ç”¨è™šæ‹ŸåŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåº”ç”¨ä¸æ“ä½œç³»ç»Ÿè§£è€¦ï¼Œé€šè¿‡æµå¼ä¼ è¾“ï¼ˆå¦‚Microsoft App-Vï¼‰æˆ–å®¹å™¨ï¼ˆå¦‚Singularityï¼‰äº¤ä»˜ï¼Œé¿å…æœ¬åœ°å®‰è£…å†²çª&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šä¼ä¸šç»Ÿä¸€å‘å¸ƒè½¯ä»¶ï¼Œè·¨å¹³å°å…¼å®¹ï¼ˆWindows/Linuxåº”ç”¨æ··ç”¨ï¼‰ã€‚
&lt;strong&gt;2. æ¡Œé¢è™šæ‹ŸåŒ–ï¼ˆVDIï¼‰&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šæ¡Œé¢æ“ä½œç³»ç»Ÿè¿è¡Œäºæ•°æ®ä¸­å¿ƒè™šæ‹Ÿæœºï¼Œç”¨æˆ·é€šè¿‡ç˜¦å®¢æˆ·ç«¯ï¼ˆå¦‚Citrix Receiverï¼‰è¿œç¨‹è®¿é—®&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šæ•°æ®ä¸è½åœ°ã€æ”¯æŒç§»åŠ¨åŠå…¬ï¼Œå…¸å‹æ–¹æ¡ˆåŒ…æ‹¬VMware Horizonã€Citrix XenDesktopã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ–°å…´è™šæ‹ŸåŒ–æŠ€æœ¯"&gt;âš™ï¸ &lt;strong&gt;æ–°å…´è™šæ‹ŸåŒ–æŠ€æœ¯&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æŠ€æœ¯æ–¹å‘&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ ¸å¿ƒçªç ´&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GPUè™šæ‹ŸåŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;vGPUåˆ†ç‰‡ï¼ˆNVIDIA GRIDï¼‰æ”¯æŒAIè®­ç»ƒå¹¶è¡ŒåŠ é€Ÿ&lt;/td&gt;
&lt;td&gt;æ·±åº¦å­¦ä¹ ã€å®æ—¶æ¸²æŸ“&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åµŒå¥—è™šæ‹ŸåŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è™šæ‹Ÿæœºå†…å†è¿è¡ŒHypervisorï¼ˆå¦‚KVM on ESXiï¼‰&lt;/td&gt;
&lt;td&gt;å¼€å‘æµ‹è¯•ã€äº‘æœåŠ¡åµŒå¥—éƒ¨ç½²&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ— æœåŠ¡å™¨è™šæ‹ŸåŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äº‹ä»¶é©±åŠ¨æŒ‰éœ€åˆ†é…èµ„æºï¼ˆAWS Lambdaï¼‰&lt;/td&gt;
&lt;td&gt;å¾®æœåŠ¡ã€é—´æ­‡æ€§ä»»åŠ¡å¤„ç†&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“æŠ€æœ¯é€‰å‹å»ºè®®"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ï¼šæŠ€æœ¯é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚è½»é‡å¿«é€Ÿ&lt;/strong&gt;ï¼šé€‰å®¹å™¨ï¼ˆDocker/LXCï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ºéš”ç¦»ä¸å¤šOS&lt;/strong&gt;ï¼šé€‰å…¨è™šæ‹ŸåŒ–ï¼ˆVMware/KVMï¼‰&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œ/å­˜å‚¨ä¼˜åŒ–&lt;/strong&gt;ï¼šSDN/NFVæˆ–å­˜å‚¨è™šæ‹ŸåŒ–&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡Œé¢äº¤ä»˜ä¸å®‰å…¨&lt;/strong&gt;ï¼šVDIæ–¹æ¡ˆï¼ˆCitrix/VMwareï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªæ¥è¶‹åŠ¿&lt;/strong&gt;ï¼šç¡¬ä»¶è¾…åŠ©è™šæ‹ŸåŒ–+å®¹å™¨åŒ–èåˆï¼ˆå¦‚vSphere with Tanzuï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æ›´æ·±å…¥çš„æŠ€æœ¯å®ç°ç»†èŠ‚ï¼ˆå¦‚Intel VT-xæŒ‡ä»¤é›†å·¥ä½œæµç¨‹ï¼‰æˆ–è¡Œä¸šæ¡ˆä¾‹ï¼ˆé‡‘è/ç”µä¿¡è™šæ‹ŸåŒ–æ¶æ„ï¼‰ï¼Œå¯è¿›ä¸€æ­¥æ¢è®¨ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="network"&gt;Network
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ Docker ç½‘ç»œæ¨¡å¼çš„å…¨é¢è§£æï¼Œæ¶µç›–æ ¸å¿ƒåŸç†ã€é…ç½®æ–¹æ³•ã€é€‚ç”¨åœºæ™¯åŠä¼˜åŒ–ç­–ç•¥ï¼Œç»“åˆæŠ€æœ¯ç»†èŠ‚ä¸å®è·µæ¡ˆä¾‹ç»¼åˆæ•´ç†ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-docker-ç½‘ç»œæ¶æ„æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ—ï¸ &lt;strong&gt;Docker ç½‘ç»œæ¶æ„æ ¸å¿ƒæ¦‚å¿µ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Network Namespace&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªå®¹å™¨æ‹¥æœ‰ç‹¬ç«‹çš„ç½‘ç»œæ ˆï¼ˆç½‘å¡ã€IPã€è·¯ç”±è¡¨ï¼‰ï¼Œå®ç°ç½‘ç»œéš”ç¦»&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;ip netns&lt;/code&gt; å‘½ä»¤å¯æŸ¥çœ‹ä¸åŒå®¹å™¨çš„å‘½åç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿç½‘æ¡¥ï¼ˆdocker0ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é»˜è®¤åˆ›å»ºçš„è™šæ‹Ÿäº¤æ¢æœºï¼ˆIP é€šå¸¸ä¸º &lt;code&gt;172.17.0.1/16&lt;/code&gt;ï¼‰ï¼Œå®¹å™¨é€šè¿‡ &lt;code&gt;veth pair&lt;/code&gt; è®¾å¤‡è¿æ¥åˆ°ç½‘æ¡¥&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;veth pair&lt;/strong&gt;ï¼šä¸€ç«¯åœ¨å®¹å™¨å†…ï¼ˆ&lt;code&gt;eth0&lt;/code&gt;ï¼‰ï¼Œä¸€ç«¯åœ¨å®¿ä¸»æœºï¼ˆ&lt;code&gt;vethxxx&lt;/code&gt;ï¼‰ï¼Œå®ç°å®¹å™¨ä¸å®¿ä¸»æœºé€šä¿¡&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œé©±åŠ¨ï¼ˆDriverï¼‰&lt;/strong&gt;
Docker é€šè¿‡ä¸åŒé©±åŠ¨å®ç°å¤šæ ·åŒ–çš„ç½‘ç»œæ¨¡å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bridge&lt;/code&gt;ï¼šé»˜è®¤é©±åŠ¨ï¼Œé€‚ç”¨äºå•æœºå®¹å™¨äº’è”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;overlay&lt;/code&gt;ï¼šæ”¯æŒè·¨ä¸»æœºé€šä¿¡ï¼ˆå¦‚ Swarm/Kubernetesï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;macvlan&lt;/code&gt;ï¼šå®¹å™¨ç›´æ¥ç»‘å®šç‰©ç†ç½‘å¡ï¼Œè·å¾—ç‹¬ç«‹ MAC åœ°å€&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;none&lt;/code&gt;ï¼šæ— ç½‘ç»œåŠŸèƒ½ï¼Œéœ€æ‰‹åŠ¨é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…­å¤§ç½‘ç»œæ¨¡å¼è¯¦è§£"&gt;ğŸ”§ &lt;strong&gt;å…­å¤§ç½‘ç»œæ¨¡å¼è¯¦è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="bridge-æ¨¡å¼é»˜è®¤"&gt;&lt;strong&gt;Bridge æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š
å®¹å™¨é€šè¿‡ &lt;code&gt;docker0&lt;/code&gt; ç½‘æ¡¥äº’è”ï¼ŒIP ç”± DHCP åˆ†é…ï¼ˆå¦‚ &lt;code&gt;172.17.0.0/16&lt;/code&gt;ï¼‰ã€‚å¤–éƒ¨è®¿é—®éœ€ç«¯å£æ˜ å°„ï¼ˆ&lt;code&gt;-p 80:80&lt;/code&gt;ï¼‰ï¼Œæœ¬è´¨æ˜¯ iptables DNAT è§„åˆ™&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;âœ… å®¹å™¨é—´é€šè¿‡ IP æˆ–å®¹å™¨åé€šä¿¡ï¼ˆéœ€è‡ªå®šä¹‰ç½‘ç»œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;âŒ å¤–éƒ¨è®¿é—®éœ€æ˜¾å¼ç«¯å£æ˜ å°„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å‘½ä»¤ç¤ºä¾‹ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;docker run -d --name web nginx # é»˜è®¤ä½¿ç”¨ bridge
docker network create my-bridge # åˆ›å»ºè‡ªå®šä¹‰æ¡¥æ¥ç½‘ç»œ[7](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="host-æ¨¡å¼"&gt;&lt;strong&gt;Host æ¨¡å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š
å®¹å™¨å…±äº«å®¿ä¸»æœº Network Namespaceï¼Œç›´æ¥ä½¿ç”¨ä¸»æœº IP å’Œç«¯å£ï¼Œæ— è™šæ‹Ÿç½‘å¡&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é«˜æ€§èƒ½éœ€æ±‚ï¼ˆå¦‚ç½‘ç»œç›‘æ§å·¥å…·ï¼‰ï¼Œé¿å… NAT å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;éœ€ç›´æ¥æš´éœ²æœåŠ¡çš„åœºæ™¯ï¼ˆå¦‚ Prometheus æŠ“å–èŠ‚ç‚¹æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é™åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;âŒ ç«¯å£å†²çªé£é™©ï¼ˆå®¹å™¨ä¸å®¿ä¸»æœºç«¯å£å…±ç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;âŒ æ— ç½‘ç»œéš”ç¦»ï¼Œå®‰å…¨æ€§ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘½ä»¤ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker run -d --net=host --name nginx-host nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="container-æ¨¡å¼"&gt;&lt;strong&gt;Container æ¨¡å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š
æ–°å®¹å™¨å…±äº«æŒ‡å®šå®¹å™¨çš„ Network Namespaceï¼ˆåŒ IPã€ç«¯å£ï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹ç”¨ä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetes Pod å†…å®¹å™¨äº’é€šï¼ˆé€šè¿‡ &lt;code&gt;localhost&lt;/code&gt; ç›´æ¥é€šä¿¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;Sidecar æ¨¡å¼ï¼ˆæ—¥å¿—æ”¶é›†å™¨å…±äº«ä¸šåŠ¡å®¹å™¨çš„ç½‘ç»œï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‘½ä»¤ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker run -d --name base-container alpine sleep 3600
docker run -d --net=container:base-container --name sidecar nginx
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="none-æ¨¡å¼"&gt;&lt;strong&gt;None æ¨¡å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š
å®¹å™¨ä»…æœ‰ &lt;code&gt;lo&lt;/code&gt; å›ç¯æ¥å£ï¼Œæ— å¤–éƒ¨ç½‘ç»œè¿æ¥&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¦»çº¿æ•°æ®å¤„ç†ï¼ˆå¦‚å®‰å…¨å®¡è®¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éœ€å®Œå…¨è‡ªå®šä¹‰ç½‘ç»œçš„åœºæ™¯ï¼ˆæ‰‹åŠ¨é…ç½® veth æˆ– VPNï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘½ä»¤ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker run -d --net=none --name isolated-container alpine
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="overlay-æ¨¡å¼"&gt;&lt;strong&gt;Overlay æ¨¡å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š
åŸºäº VXLAN éš§é“å®ç°è·¨ä¸»æœºå®¹å™¨é€šä¿¡ï¼Œç”¨äº Docker Swarm/Kubernetes é›†ç¾¤&lt;a class="link" href="@ref" &gt;1,8&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ ¸å¿ƒä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;âœ… è‡ªåŠ¨æœåŠ¡å‘ç°ï¼ˆDNS è§£ææœåŠ¡åï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;âœ… å†…ç½®è´Ÿè½½å‡è¡¡ï¼ˆVIP åˆ†å‘æµé‡åˆ°å¤šä¸ªå‰¯æœ¬ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘½ä»¤ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker network create -d overlay my-overlay # Swarm æ¨¡å¼ä¸‹æœ‰æ•ˆ
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="macvlan-æ¨¡å¼"&gt;&lt;strong&gt;Macvlan æ¨¡å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š
å®¹å™¨ç›´æ¥ç»‘å®šç‰©ç†ç½‘å¡ï¼ˆå¦‚ &lt;code&gt;eth0&lt;/code&gt;ï¼‰ï¼Œæ‹¥æœ‰ç‹¬ç«‹ MAC å’Œ IPï¼Œåƒç‰©ç†è®¾å¤‡ä¸€æ ·æ¥å…¥å±€åŸŸç½‘&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IoT è®¾å¤‡æ¨¡æ‹Ÿï¼ˆæ¯ä¸ªå®¹å™¨ä»£è¡¨ä¸€ä¸ªè®¾å¤‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éœ€å›ºå®š IP çš„ä¼ ç»Ÿåº”ç”¨è¿ç§»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é…ç½®ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker network create -d macvlan \
--subnet=192.168.1.0/24 \
--gateway=192.168.1.1 \
-o parent=eth0 \
my-macvlan
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç½‘ç»œæ¨¡å¼å¯¹æ¯”ä¸é€‰å‹æŒ‡å—"&gt;âš¡ &lt;strong&gt;ç½‘ç»œæ¨¡å¼å¯¹æ¯”ä¸é€‰å‹æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é…ç½®å¤æ‚åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bridge&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;å¼€å‘æµ‹è¯•ã€å•æœºå¤šå®¹å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Host&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;â˜…â˜…â˜…&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ç½‘ç»œç›‘æ§ã€é«˜æ€§èƒ½æœåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Container&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;Pod å†…å®¹å™¨äº’é€šã€Sidecar&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;None&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â˜…â˜…â˜…&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;å®‰å…¨æ•æ„Ÿå‹ç¦»çº¿ä»»åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Overlay&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é›†ç¾¤è·¨ä¸»æœºé€šä¿¡ï¼ˆSwarm/K8sï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Macvlan&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;â˜…â˜…â˜…&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ç›´æ¥æ¥å…¥ç‰©ç†ç½‘ç»œã€IoT&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-é«˜çº§ç½‘ç»œé…ç½®æŠ€å·§"&gt;ğŸ› ï¸ &lt;strong&gt;é«˜çº§ç½‘ç»œé…ç½®æŠ€å·§&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è‡ªå®šä¹‰ DNS ä¸æœåŠ¡å‘ç°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªå®šä¹‰ç½‘ç»œä¸­å®¹å™¨å¯é€šè¿‡&lt;strong&gt;å®¹å™¨å&lt;/strong&gt;è‡ªåŠ¨è§£æ IPï¼ˆæ— éœ€ &lt;code&gt;--link&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¦†ç›–ç½‘ç»œå†…ç½® DNS è½®è¯¢ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç½‘ç»œéš”ç¦»ä¸å®‰å…¨&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;--internal&lt;/code&gt; åˆ›å»ºä»…å†…éƒ¨é€šä¿¡çš„ç½‘ç»œï¼ˆç¦æ­¢å¤–éƒ¨è®¿é—®ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;iptables&lt;/code&gt; é™åˆ¶å®¹å™¨é—´æµé‡ï¼ˆå¦‚ä»…å…è®¸ç‰¹å®šç«¯å£ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šç½‘å¡ç»‘å®š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®¹å™¨å¯è¿æ¥å¤šä¸ªç½‘ç»œï¼ˆå¦‚ä¸šåŠ¡ç½‘+ç›‘æ§ç½‘ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker network connect monitoring-net my-container
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;IPv6 æ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºç½‘ç»œæ—¶æ·»åŠ &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;--ipv6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‚æ•°ï¼Œå¹¶é…ç½®å­ç½‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker network create --ipv6 --subnet=2001:db8::/64 ipv6-net
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºç¡€åœºæ™¯&lt;/strong&gt;ï¼šå•æœºå®¹å™¨äº’è”é¦–é€‰ &lt;strong&gt;Bridge æ¨¡å¼&lt;/strong&gt;ï¼ˆè‡ªå®šä¹‰ç½‘ç»œæå‡çµæ´»æ€§ä¸ DNS è§£æï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¼˜å…ˆ&lt;/strong&gt;ï¼š&lt;strong&gt;Host æ¨¡å¼&lt;/strong&gt;é€‚åˆé«˜é¢‘ I/O åº”ç”¨ï¼Œä½†ç‰ºç‰²éš”ç¦»æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é›†ç¾¤æ¶æ„&lt;/strong&gt;ï¼š&lt;strong&gt;Overlay æ¨¡å¼&lt;/strong&gt;æ˜¯è·¨ä¸»æœºé€šä¿¡çš„åŸºçŸ³ï¼Œé›†æˆäº Swarm/Kubernetesã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç‰¹æ®Šéœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‰©ç†ç½‘ç»œç›´é€š â†’ &lt;strong&gt;Macvlan&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»å¯¹ç½‘ç»œéš”ç¦» â†’ &lt;strong&gt;None æ¨¡å¼&lt;/strong&gt; + æ‰‹åŠ¨é…ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯é€šè¿‡ &lt;code&gt;docker network inspect [ç½‘ç»œå]&lt;/code&gt; æŸ¥çœ‹è¯¦ç»†é…ç½®&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®é¿å…é»˜è®¤ç½‘æ¡¥ï¼Œä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œä»¥å¢å¼ºå¯æ§æ€§ä¸å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="volume"&gt;Volume
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯å¯¹ &lt;strong&gt;Docker Volumeï¼ˆå­˜å‚¨å·ï¼‰&lt;/strong&gt; çš„å…¨é¢è§£æï¼Œç»“åˆæ ¸å¿ƒæ¦‚å¿µã€ç±»å‹å¯¹æ¯”ã€æ“ä½œæŒ‡å—åŠæœ€ä½³å®è·µï¼Œç»¼åˆå¤šæºä¿¡æ¯æ•´ç†è€Œæˆï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-volume-çš„æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ—‚ï¸ &lt;strong&gt;Volume çš„æ ¸å¿ƒæ¦‚å¿µ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Volume æ˜¯ Docker ç”¨äº&lt;strong&gt;æŒä¹…åŒ–å­˜å‚¨å®¹å™¨æ•°æ®&lt;/strong&gt;çš„æœºåˆ¶ï¼Œæœ¬è´¨æ˜¯å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›®å½•ï¼ˆå¦‚ &lt;code&gt;/var/lib/docker/volumes/&lt;/code&gt;ï¼‰ï¼Œä¸å®¹å™¨å†…ç›®å½•å»ºç«‹ç»‘å®šå…³ç³»ï¼Œå®ç°åŒå‘æ•°æ®åŒæ­¥&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç‹¬ç«‹äºå®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼Œå®¹å™¨åˆ é™¤åæ•°æ®ä»ä¿ç•™ï¼Œæ”¯æŒå¤šå®¹å™¨å…±äº«&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æŒä¹…åŒ–&lt;/strong&gt;ï¼šè§£å†³å®¹å™¨åˆ é™¤å¯¼è‡´æ•°æ®ä¸¢å¤±çš„é—®é¢˜ï¼ˆå¦‚ MySQL æ•°æ®åº“æ–‡ä»¶ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šç»•è¿‡è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnion FSï¼‰ï¼Œç›´æ¥è¯»å†™å®¿ä¸»æœºç£ç›˜ï¼ŒI/O æ•ˆç‡æå‡ 30% ä»¥ä¸Š&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…±äº«ä¸éš”ç¦»&lt;/strong&gt;ï¼šå¤šä¸ªå®¹å™¨å¯æŒ‚è½½åŒä¸€ Volume å…±äº«æ•°æ®ï¼ˆå¦‚æ—¥å¿—ç›®å½•ï¼‰ï¼ŒåŒæ—¶é€šè¿‡ Namespace éš”ç¦»æ“ä½œ&lt;a class="link" href="@ref" &gt;5,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-volume-çš„ç±»å‹ä¸å¯¹æ¯”"&gt;ğŸ”§ &lt;strong&gt;Volume çš„ç±»å‹ä¸å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç®¡ç†æ–¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®¡ç†å· (Volume)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Docker å¼•æ“&lt;/td&gt;
&lt;td&gt;&lt;code&gt;/var/lib/docker/volumes/å·å&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åˆ›å»ºã€å®‰å…¨éš”ç¦»ã€æ˜“å¤‡ä»½&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»‘å®šå· (Bind Mount)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®š&lt;/td&gt;
&lt;td&gt;å®¿ä¸»æœºä»»æ„è·¯å¾„ï¼ˆå¦‚ &lt;code&gt;/home/data&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;å¼€å‘è°ƒè¯•ï¼ˆæŒ‚è½½ä»£ç æˆ–é…ç½®ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€ç»å¯¹è·¯å¾„ï¼Œè¦†ç›–å®¹å™¨ç›®å½•å†…å®¹&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸´æ—¶å· (tmpfs)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¿ä¸»æœºå†…å­˜&lt;/td&gt;
&lt;td&gt;å†…å­˜ä¸­&lt;/td&gt;
&lt;td&gt;æ•æ„Ÿä¸´æ—¶æ•°æ®ï¼ˆå¦‚ SSL è¯ä¹¦ï¼‰&lt;/td&gt;
&lt;td&gt;å®¹å™¨åœæ­¢å³æ¶ˆå¤±ï¼Œé«˜æ€§èƒ½ä½†æ˜“å¤±&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;å…³é”®åŒºåˆ«&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»‘å®šå·ä¼š&lt;strong&gt;è¦†ç›–å®¹å™¨å†…ç›®å½•åŸæœ‰å†…å®¹&lt;/strong&gt;ï¼Œè€Œç®¡ç†å·ä¼š&lt;strong&gt;ä¿ç•™é•œåƒåˆå§‹æ•°æ®&lt;/strong&gt;&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸´æ—¶å·ä»…é™ Linux å®¿ä¸»æœºä½¿ç”¨ï¼Œä¸æ”¯æŒå…±äº«&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-volume-æ“ä½œå…¨æŒ‡å—"&gt;âš™ï¸ &lt;strong&gt;Volume æ“ä½œå…¨æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†å·æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºä¸æŸ¥çœ‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker volume create my-vol # åˆ›å»ºå‘½åå·
docker volume ls # åˆ—å‡ºæ‰€æœ‰å·
docker volume inspect my-vol # æŸ¥çœ‹å·è¯¦æƒ…ï¼ˆå«å®¿ä¸»æœºå­˜å‚¨è·¯å¾„ï¼‰[1,3](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‚è½½åˆ°å®¹å™¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æ–¹å¼1ï¼š-v å‚æ•°
docker run -d -v my-vol:/app/data nginx:latest
# æ–¹å¼2ï¼š--mount å‚æ•°ï¼ˆæ›´æ¨èï¼Œè¯­æ³•æ˜ç¡®ï¼‰
docker run -d --mount type=volume,source=my-vol,target=/app/data nginx:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ é™¤æ¸…ç†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;docker volume rm my-vol # åˆ é™¤æŒ‡å®šå·ï¼ˆéœ€æ— å®¹å™¨ä½¿ç”¨ï¼‰
docker volume prune # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨å·&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»‘å®šå·æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# å°†å®¿ä¸»æœº /home/user/config æŒ‚è½½åˆ°å®¹å™¨ /app/configï¼ˆå¯è¯»å†™ï¼‰
docker run -d -v /home/user/config:/app/config nginx:latest
# åªè¯»æŒ‚è½½ï¼ˆå®¹å™¨æ— æ³•ä¿®æ”¹å®¿ä¸»æœºæ–‡ä»¶ï¼‰
docker run -d -v /home/user/config:/app/config:ro nginx:latest[5,7](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸´æ—¶å·æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# å†…å­˜æŒ‚è½½ï¼ˆé™åˆ¶å¤§å° 128MBï¼‰
docker run -d --tmpfs /app/cache:rw,size=128m nginx:latest
# æˆ–ä½¿ç”¨ --mount
docker run -d --mount type=tmpfs,destination=/app/cache,tmpfs-size=128m nginx:latest[1,3](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-é«˜çº§åº”ç”¨æŠ€å·§"&gt;ğŸ”„ &lt;strong&gt;é«˜çº§åº”ç”¨æŠ€å·§&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šå®¹å™¨å…±äº«æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ–¹æ¡ˆ1ï¼šå¤šä¸ªå®¹å™¨æŒ‚è½½åŒä¸€ Volume&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker run -d -v shared-data:/app/logs container1
docker run -d -v shared-data:/app/logs container2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–¹æ¡ˆ2ï¼šé€šè¿‡ &amp;ndash;volumes-from ç»§æ‰¿æŒ‚è½½ï¼ˆé€‚åˆ Sidecar æ—¥å¿—æ”¶é›†ï¼‰&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; docker run -d --name logger -v /logs busybox
docker run -d --volumes-from logger app-server
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½ä¸æ¢å¤&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# å¤‡ä»½ Volume åˆ°å®¿ä¸»æœº
docker run --rm -v my-vol:/data -v $(pwd):/backup alpine \
tar -czf /backup/my-vol-backup.tar.gz /data
# ä»å¤‡ä»½æ¢å¤
docker run --rm -v my-vol:/data -v $(pwd):/backup alpine \
sh -c &amp;#34;rm -rf /data/* &amp;amp;&amp;amp; tar -xzf /backup/my-vol-backup.tar.gz -C /data&amp;#34;[3,6](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿œç¨‹å­˜å‚¨é©±åŠ¨&lt;/strong&gt;
å¯¹æ¥ NFSã€AWS EBS ç­‰åˆ†å¸ƒå¼å­˜å‚¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;docker volume create \
--driver local \
--opt type=nfs \
--opt o=addr=192.168.1.100,rw \
--opt device=:/nfs/data \
nfs-volume[3,4](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æœ€ä½³å®è·µæ€»ç»“"&gt;ğŸ’ &lt;strong&gt;æœ€ä½³å®è·µæ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;âœ… &lt;strong&gt;ç”Ÿäº§ç¯å¢ƒ&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨&lt;strong&gt;ç®¡ç†å·&lt;/strong&gt;ï¼ˆå®‰å…¨éš”ç¦»ã€æ˜“ç»´æŠ¤ï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;âœ… &lt;strong&gt;å¼€å‘è°ƒè¯•&lt;/strong&gt;ï¼šç”¨&lt;strong&gt;ç»‘å®šå·&lt;/strong&gt;å¿«é€ŸæŒ‚è½½ä»£ç æˆ–é…ç½®&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;âš ï¸ &lt;strong&gt;æ•æ„Ÿæ•°æ®&lt;/strong&gt;ï¼šç”¨ &lt;strong&gt;tmpfs&lt;/strong&gt; é¿å…ç£ç›˜æ®‹ç•™&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å‘æŒ‡å—&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é¿å…åŒ¿åå·ï¼ˆéš¾ä»¥è¿½è¸ªç®¡ç†ï¼‰ï¼Œå§‹ç»ˆå‘½å Volumeï¼ˆå¦‚ &lt;code&gt;mysql-data&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç»‘å®šå·æ—¶ç¡®ä¿å®¿ä¸»æœºç›®å½•å­˜åœ¨ï¼Œå¦åˆ™ &lt;code&gt;--mount&lt;/code&gt; ä¼šæŠ¥é”™ï¼ˆ&lt;code&gt;-v&lt;/code&gt; ä¼šè‡ªåŠ¨åˆ›å»ºä½†å¯èƒ½å¯¼è‡´æƒé™é—®é¢˜ï¼‰&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è·¨å¹³å°åœºæ™¯ç”¨ Volume è€Œéç»‘å®šå·ï¼ˆWindows/macOS è·¯å¾„å…¼å®¹æ€§é—®é¢˜ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿ç»´ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç›‘æ§å®¿ä¸»æœºç£ç›˜ç©ºé—´ï¼ˆ&lt;code&gt;df -h /var/lib/docker/volumes&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å®šæœŸå¤‡ä»½å…³é”® Volumeï¼ˆå¦‚æ•°æ®åº“å·ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å®æˆ˜æ¡ˆä¾‹"&gt;ğŸ’¡ &lt;strong&gt;å®æˆ˜æ¡ˆä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;MySQL æ•°æ®æŒä¹…åŒ–&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# åˆ›å»ºä¸“ç”¨äºæ•°æ®åº“çš„ Volume
docker volume create mysql-data
# è¿è¡Œå®¹å™¨å¹¶æŒ‚è½½
docker run -d \
--name mysql-server \
-e MYSQL_ROOT_PASSWORD=123456 \
-v mysql-data:/var/lib/mysql \ # æ•°æ®ç›®å½•æŒä¹…åŒ–
mysql:8.0
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;å³ä½¿åˆ é™¤å®¹å™¨ï¼Œæ•°æ®ä»å¯é€šè¿‡æ–°å®¹å™¨æŒ‚è½½ &lt;code&gt;mysql-data&lt;/code&gt; æ¢å¤&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;é€šè¿‡ Volume æœºåˆ¶ï¼ŒDocker æœ‰æ•ˆå¹³è¡¡äº†å®¹å™¨è½»é‡åŒ–ä¸æ•°æ®æŒä¹…åŒ–çš„çŸ›ç›¾ï¼Œæˆä¸ºæœ‰çŠ¶æ€æœåŠ¡çš„æ ¸å¿ƒæ”¯æ’‘ã€‚åˆç†é€‰å‹ä¸è§„èŒƒæ“ä½œï¼Œå¯æ˜¾è‘—æå‡ç³»ç»Ÿå¯é æ€§ï¼ˆå‚è€ƒï¼š&lt;a class="link" href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener"
&gt;Docker å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id="ç®¡ç†å·--ç»‘å®šå·"&gt;ç®¡ç†å· &amp;amp; ç»‘å®šå·
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ Docker ä¸­**ç®¡ç†å·ï¼ˆVolumeï¼‰&lt;strong&gt;ä¸&lt;/strong&gt;ç»‘å®šå·ï¼ˆBind Mountï¼‰**çš„è¯¦ç»†å¯¹æ¯”ï¼Œç»“åˆæ ¸å¿ƒç‰¹æ€§ã€é€‚ç”¨åœºæ™¯åŠæ“ä½œå·®å¼‚ï¼Œæ•´ç†è‡ªå¤šæºæŠ€æœ¯æ–‡æ¡£ä¸å®è·µåˆ†æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”"&gt;âš™ï¸ &lt;strong&gt;æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç®¡ç†å· (Volume)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç»‘å®šå· (Bind Mount)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®¡ç†æ–¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Docker å¼•æ“è‡ªåŠ¨ç®¡ç†&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·æ‰‹åŠ¨ç®¡ç†å®¿ä¸»æœºè·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;/var/lib/docker/volumes/å·å/_data&lt;/code&gt; &lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·æŒ‡å®šçš„å®¿ä¸»æœºä»»æ„è·¯å¾„ï¼ˆå¦‚ &lt;code&gt;/home/data&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;3,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹åŒ–è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åˆ›å»ºç©ºç›®å½•ï¼Œ&lt;strong&gt;ä¿ç•™å®¹å™¨å†…åŸå†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥è¦†ç›–å®¹å™¨å†…ç›®å½•çš„åŸæœ‰å†…å®¹&lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… é«˜ï¼ˆè·¯å¾„ç”± Docker ç»Ÿä¸€ç®¡ç†ï¼‰&lt;/td&gt;
&lt;td&gt;âŒ ä½ï¼ˆä¾èµ–å®¿ä¸»æœºç‰¹å®šè·¯å¾„ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æƒé™æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤å®¹å™¨å†…ç”¨æˆ·æƒé™éš”ç¦»&lt;/td&gt;
&lt;td&gt;ä¾èµ–å®¿ä¸»æœºæ–‡ä»¶æƒé™ï¼Œéœ€æ‰‹åŠ¨è®¾ç½®&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«ä¾¿æ·æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒå¤šå®¹å™¨å…±äº«åŒä¸€å‘½åå·&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨ç¡®ä¿å¤šä¸ªå®¹å™¨æŒ‚è½½ç›¸åŒå®¿ä¸»æœºè·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¸å®‰å…¨å¯¹æ¯”"&gt;âš¡ &lt;strong&gt;æ€§èƒ½ä¸å®‰å…¨å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç®¡ç†å·&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç»‘å®šå·&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;I/O æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´ä¼˜ï¼ˆå°¤å…¶å°æ–‡ä»¶è¯»å†™ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½å› è·¨æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ ext4 â†’ overlay2ï¼‰äº§ç”Ÿé¢å¤–å¼€é”€&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒæ•°æ®æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜æ•ˆï¼ˆå¤§é‡æ–‡ä»¶åˆ›å»º/åˆ é™¤åœºæ™¯ï¼‰&lt;/td&gt;
&lt;td&gt;æ€§èƒ½è¾ƒä½ï¼ˆä¾èµ–å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… éš”ç¦»æ€§å¼ºï¼ˆä»… Docker å¯è®¿é—®ï¼‰&lt;/td&gt;
&lt;td&gt;âŒ é£é™©é«˜ï¼ˆå®¹å™¨ç›´æ¥è¯»å†™å®¿ä¸»æœºæ•æ„Ÿè·¯å¾„ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æŒä¹…æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‹¬ç«‹äºå®¹å™¨ç”Ÿå‘½å‘¨æœŸ&lt;/td&gt;
&lt;td&gt;ä¾èµ–å®¿ä¸»æœºç›®å½•ç»´æŠ¤&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ“ä½œæ–¹å¼å¯¹æ¯”"&gt;ğŸ› ï¸ &lt;strong&gt;æ“ä½œæ–¹å¼å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="åˆ›å»ºä¸æŒ‚è½½å‘½ä»¤"&gt;&lt;strong&gt;åˆ›å»ºä¸æŒ‚è½½å‘½ä»¤&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ–¹å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç®¡ç†å·&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç»‘å®šå·&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½ä»¤è¡Œåˆ›å»º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;docker volume create db-data&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ— éœ€åˆ›å»ºï¼Œç›´æ¥æŒ‡å®šè·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œå®¹å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;bash docker run -v db-data:/var/lib/mysql &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;bash docker run -v /host/mysql:/var/lib/mysql &lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;--mount&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;bash --mount type=volume,src=db-data,target=/data &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;bash --mount type=bind,src=https://dyhes.github.io/host/data,target=/app &lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="å…³é”®å·®å¼‚ç‚¹"&gt;&lt;strong&gt;å…³é”®å·®å¼‚ç‚¹&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¯å¾„å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»‘å®šå·&lt;/strong&gt;ï¼šå®¿ä¸»æœºè·¯å¾„ä¸å­˜åœ¨æ—¶ï¼Œ&lt;code&gt;--mount&lt;/code&gt; ä¼šæŠ¥é”™ï¼Œ&lt;code&gt;-v&lt;/code&gt; ä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆå¯èƒ½å¯¼è‡´æƒé™é—®é¢˜ï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç®¡ç†å·ï¼šè‡ªåŠ¨åˆ›å»ºç›®å½•ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åªè¯»æ§åˆ¶&lt;/strong&gt;
ä¸¤è€…å‡æ”¯æŒ &lt;code&gt;:ro&lt;/code&gt; æˆ– &lt;code&gt;readonly&lt;/code&gt; å‚æ•°ï¼ˆå¦‚ &lt;code&gt;-v db-data:/data:ro&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯å¯¹æ¯”-1"&gt;ğŸ¯ &lt;strong&gt;é€‚ç”¨åœºæ™¯å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¨èæ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“æŒä¹…åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… ç®¡ç†å·&lt;/td&gt;
&lt;td&gt;æ•°æ®å®‰å…¨éš”ç¦»ã€æ˜“å¤‡ä»½è¿ç§»ï¼ˆå¦‚ MySQL çš„ &lt;code&gt;/var/lib/mysql&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘ç¯å¢ƒä»£ç çƒ­æ›´æ–°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… ç»‘å®šå·&lt;/td&gt;
&lt;td&gt;ç›´æ¥ä¿®æ”¹å®¿ä¸»æœºä»£ç ï¼Œå®¹å™¨å®æ—¶ç”Ÿæ•ˆ&lt;a class="link" href="@ref" &gt;1,8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå®¹å™¨å…±äº«é…ç½®ï¼ˆå¦‚æ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš–ï¸ ç®¡ç†å·æ›´å®‰å…¨&lt;/td&gt;
&lt;td&gt;é¿å…æš´éœ²å®¿ä¸»æœºæ•æ„Ÿè·¯å¾„&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®¿ä¸»æœºæ–‡ä»¶ç›´æ¥è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… ç»‘å®šå·&lt;/td&gt;
&lt;td&gt;éœ€è¯»å–å®¿ä¸»æœºç‰¹å®šæ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;/etc/resolv.conf&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å¸¸è§é—®é¢˜ä¸é¿å‘æŒ‡å—"&gt;âš ï¸ &lt;strong&gt;å¸¸è§é—®é¢˜ä¸é¿å‘æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®è¦†ç›–é£é™©&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç»‘å®šå·ä¼šæ¸…ç©ºå®¹å™¨å†…ç›®æ ‡ç›®å½•åŸæœ‰æ–‡ä»¶ï¼ˆå¦‚æŒ‚è½½ç©ºç›®å½•åˆ° Nginx çš„ &lt;code&gt;/usr/share/nginx/html&lt;/code&gt; ä¼šå¯¼è‡´é»˜è®¤é¡µé¢æ¶ˆå¤±ï¼‰&lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§„é¿æ–¹æ¡ˆ&lt;/strong&gt;ï¼šé¢„å¡«å……å®¿ä¸»æœºç›®å½•æˆ–ä½¿ç”¨ç®¡ç†å·ä¿ç•™åˆå§‹å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™å†²çª&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç»‘å®šå·è‹¥å®¿ä¸»æœºç›®å½•å±ä¸»ä¸º rootï¼Œå®¹å™¨é root ç”¨æˆ·è¿è¡Œæ—¶å¯èƒ½æ— å†™æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼šå¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šç”¨æˆ· &lt;code&gt;-u&lt;/code&gt; æˆ–è°ƒæ•´å®¿ä¸»æœºç›®å½•æƒé™&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒ¿åå·ç®¡ç†æ··ä¹±&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åŒ¿åç®¡ç†å·ï¼ˆå¦‚ &lt;code&gt;-v /data&lt;/code&gt;ï¼‰éš¾ä»¥è¿½è¸ªï¼Œ&lt;strong&gt;å»ºè®®å§‹ç»ˆä½¿ç”¨å‘½åå·&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;-v named-vol:/data&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“é€‰å‹å»ºè®®"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ï¼šé€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹©ç®¡ç†å·çš„åœºæ™¯&lt;/strong&gt;ï¼š
âœ… ç”Ÿäº§ç¯å¢ƒæ•°æ®æŒä¹…åŒ–
âœ… éœ€è·¨ä¸»æœºè¿ç§»æˆ–å¤‡ä»½çš„æ•°æ®
âœ… å¯¹å®‰å…¨éš”ç¦»æ€§è¦æ±‚é«˜&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹©ç»‘å®šå·çš„åœºæ™¯&lt;/strong&gt;ï¼š
âœ… å¼€å‘è°ƒè¯•éœ€å®æ—¶åŒæ­¥ä»£ç 
âœ… ç›´æ¥é›†æˆå®¿ä¸»æœºç°æœ‰æ–‡ä»¶ï¼ˆå¦‚é…ç½®æ–‡ä»¶ï¼‰
âœ… å¯¹å®¿ä¸»æœºè·¯å¾„æœ‰ç²¾å‡†æ§åˆ¶éœ€æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ··åˆæ¶æ„ç¤ºä¾‹&lt;/strong&gt;ï¼š
å¼€å‘ç¯å¢ƒç”¨ç»‘å®šå·å¿«é€Ÿè¿­ä»£ï¼Œç”Ÿäº§ç¯å¢ƒæ›¿æ¢ä¸ºç®¡ç†å·ï¼š
&lt;code&gt;bash # å¼€å‘å‘½ä»¤ docker run -v /path/to/code:/app my-image # ç”Ÿäº§å‘½ä»¤ docker run -v prod-code:/app my-image &lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡åˆç†é€‰å‹ï¼Œå¯å¹³è¡¡å¼€å‘æ•ˆç‡ä¸è¿ç»´å¯é æ€§ã€‚æ›´æ·±å…¥çš„æ€§èƒ½è°ƒä¼˜ï¼ˆå¦‚ NFS è¿œç¨‹å·ï¼‰æˆ–æƒé™æ–¹æ¡ˆï¼Œå¯å‚è€ƒ &lt;a class="link" href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener"
&gt;Docker å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id="é‡å¯ç­–ç•¥"&gt;é‡å¯ç­–ç•¥
&lt;/h2&gt;&lt;p&gt;Docker çš„é‡å¯ç­–ç•¥ï¼ˆRestart Policiesï¼‰æ˜¯ç¡®ä¿å®¹å™¨åœ¨é€€å‡ºåè‡ªåŠ¨æ¢å¤è¿è¡Œçš„æ ¸å¿ƒæœºåˆ¶ï¼Œé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒä¸­ä¿éšœæœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚ä»¥ä¸‹è¯¦ç»†è§£æå…¶åŸç†ã€ç­–ç•¥ç±»å‹ã€é…ç½®æ–¹æ³•åŠæœ€ä½³å®è·µï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-é‡å¯ç­–ç•¥ç±»å‹ä¸åŸç†"&gt;ğŸ”§ &lt;strong&gt;é‡å¯ç­–ç•¥ç±»å‹ä¸åŸç†&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker æä¾›å››ç§é‡å¯ç­–ç•¥ï¼Œé€šè¿‡ &lt;code&gt;--restart&lt;/code&gt; å‚æ•°æŒ‡å®šï¼Œç”± Docker å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ&lt;a class="link" href="@ref" &gt;1,3,6&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;no&lt;/code&gt;ï¼ˆé»˜è®¤ç­–ç•¥ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸º&lt;/strong&gt;ï¼šå®¹å™¨é€€å‡ºåä¸è‡ªåŠ¨é‡å¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šä¸´æ—¶ä»»åŠ¡ã€æµ‹è¯•ç¯å¢ƒæˆ–ç”±å¤–éƒ¨ç¼–æ’å·¥å…·ï¼ˆå¦‚ Kubernetesï¼‰ç®¡ç†ç”Ÿå‘½å‘¨æœŸ&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;always&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸º&lt;/strong&gt;ï¼šæ— è®ºé€€å‡ºçŠ¶æ€ï¼ˆæ­£å¸¸æˆ–å¼‚å¸¸ï¼‰ï¼Œå‡è‡ªåŠ¨é‡å¯å®¹å™¨ã€‚
â€‹&lt;strong&gt;æ³¨æ„&lt;/strong&gt;â€‹ï¼šè‹¥å®¹å™¨è¢«æ‰‹åŠ¨åœæ­¢ï¼ˆ&lt;code&gt;docker stop&lt;/code&gt;ï¼‰ï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹é‡å¯åè¯¥å®¹å™¨ä»ä¼šè‡ªåŠ¨å¯åŠ¨&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šéœ€ç»å¯¹æŒç»­è¿è¡Œçš„æœåŠ¡ï¼ˆå¦‚ç›‘æ§ä»£ç†ï¼‰ï¼Œä½†éœ€è­¦æƒ•æ— é™é‡å¯å¾ªç¯&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;on-failure[:max-retries]&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¡Œä¸ºï¼šä»…å½“å®¹å™¨å¼‚å¸¸é€€å‡ºï¼ˆé€€å‡ºçŠ¶æ€ç é&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ï¼‰æ—¶é‡å¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯æŒ‡å®šæœ€å¤§é‡å¯æ¬¡æ•°ï¼ˆå¦‚ &lt;code&gt;on-failure:3&lt;/code&gt;ï¼‰ï¼Œè¶…é™åæ”¾å¼ƒé‡å¯ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ä¸è®¾ä¸Šé™ï¼ˆ&lt;code&gt;on-failure&lt;/code&gt;ï¼‰ï¼Œä¼šæ— é™é‡è¯•&lt;a class="link" href="@ref" &gt;2,3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šæ‰¹å¤„ç†ä»»åŠ¡æˆ–å¯èƒ½å¶å‘æ•…éšœçš„æœåŠ¡ï¼Œé¿å…æ­£å¸¸é€€å‡ºåæ— æ„ä¹‰é‡å¯&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;unless-stopped&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸º&lt;/strong&gt;ï¼šå®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯ï¼Œ&lt;strong&gt;é™¤éè¢«æ‰‹åŠ¨åœæ­¢&lt;/strong&gt;ï¼ˆ&lt;code&gt;docker stop&lt;/code&gt;ï¼‰ã€‚
â€‹&lt;strong&gt;å…³é”®åŒºåˆ«&lt;/strong&gt;â€‹ï¼šè‹¥å®¹å™¨æ‰‹åŠ¨åœæ­¢ï¼Œå³ä½¿ Docker å®ˆæŠ¤è¿›ç¨‹é‡å¯ï¼Œè¯¥å®¹å™¨ä¹Ÿä¿æŒåœæ­¢çŠ¶æ€&lt;a class="link" href="@ref" &gt;3,4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼š&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒé¦–é€‰&lt;/strong&gt;ï¼Œå…¼é¡¾é«˜å¯ç”¨ï¼ˆå¼‚å¸¸å´©æºƒæ—¶æ¢å¤ï¼‰ä¸è¿ç»´å¯æ§æ€§ï¼ˆå¦‚ç»´æŠ¤æ—¶æ‰‹åŠ¨åœæ­¢ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹"&gt;âš ï¸ &lt;strong&gt;å…³é”®æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…æ— é™é‡å¯å¾ªç¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è‹¥å®¹å™¨å› é…ç½®é”™è¯¯æŒç»­å´©æºƒï¼ˆå¦‚åº”ç”¨å¯åŠ¨å³å¤±è´¥ï¼‰ï¼Œ&lt;code&gt;always&lt;/code&gt; æˆ– &lt;code&gt;on-failure&lt;/code&gt; å¯èƒ½å¯¼è‡´é¢‘ç¹é‡å¯ï¼Œæ¶ˆè€—èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸º &lt;code&gt;on-failure&lt;/code&gt; è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆå¦‚ &lt;code&gt;on-failure:5&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡æ—¥å¿—è¯Šæ–­é—®é¢˜ï¼š&lt;code&gt;docker logs &amp;lt;å®¹å™¨å&amp;gt;&lt;/code&gt;&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾èµ–æœåŠ¡å¯åŠ¨é¡ºåº&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®¹å™¨é‡å¯æ—¶è‹¥ä¾èµ–æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ï¼‰æœªå°±ç»ªï¼Œå¯èƒ½å¯¼è‡´å¯åŠ¨å¤±è´¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å¯åŠ¨è„šæœ¬ä¸­æ·»åŠ é‡è¯•é€»è¾‘ï¼ˆå¦‚ &lt;code&gt;wait-for-it.sh&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ Docker Compose çš„ &lt;code&gt;depends_on&lt;/code&gt; æ§åˆ¶å¯åŠ¨é¡ºåº&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æŒä¹…åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®¹å™¨é‡å¯æ—¶ï¼Œä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿä¼šè¢«é‡ç½®ï¼Œå…³é”®æ•°æ®éœ€é€šè¿‡å·ï¼ˆVolumeï¼‰æˆ–ç»‘å®šæŒ‚è½½ï¼ˆBind Mountï¼‰æŒä¹…åŒ–ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; docker run -d --restart always -v /host/data:/container/data my-app
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç­–ç•¥ç”Ÿæ•ˆæ¡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»…åå°å®¹å™¨&lt;/strong&gt;ï¼š&lt;code&gt;--restart&lt;/code&gt; ä»…é€‚ç”¨äº &lt;code&gt;-d&lt;/code&gt; æ¨¡å¼ï¼ˆåå°è¿è¡Œï¼‰ï¼Œä¸å¯ä¸ &lt;code&gt;--rm&lt;/code&gt;ï¼ˆé€€å‡ºååˆ é™¤ï¼‰å…±ç”¨&lt;a class="link" href="@ref" &gt;5,6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker æœåŠ¡è‡ªå¯ï¼šéœ€ç¡®ä¿ Docker å®ˆæŠ¤è¿›ç¨‹éšç³»ç»Ÿå¯åŠ¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;systemctl enable docker # å¯ç”¨å¼€æœºè‡ªå¯[1](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-é…ç½®æ–¹æ³•"&gt;âš™ï¸ &lt;strong&gt;é…ç½®æ–¹æ³•&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="å‘½ä»¤è¡Œé…ç½®"&gt;&lt;strong&gt;å‘½ä»¤è¡Œé…ç½®&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨æ—¶æŒ‡å®šï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;docker run -d &amp;ndash;name nginx &amp;ndash;restart unless-stopped nginx&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
- ä¿®æ”¹å·²æœ‰å®¹å™¨ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker update &amp;ndash;restart unless-stopped nginx # æ›´æ–°ç­–ç•¥&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
#### **Docker Compose é…ç½®**
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;version: &amp;lsquo;3.8&amp;rsquo;
services:
web:
image: nginx
restart: unless-stopped # ç­–ç•¥ç±»å‹
ports:
- &amp;ldquo;80:80&amp;rdquo;
db:
image: mysql
restart: on-failure:5 # é™åˆ¶æœ€å¤§é‡å¯æ¬¡æ•°
environment:
MYSQL_ROOT_PASSWORD: password
volumes:
- db_data:/var/lib/mysql
volumes:
db_data:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
#### **æ‰‹åŠ¨ä¿®æ”¹å®¹å™¨é…ç½®**
ç¼–è¾‘å®¹å™¨é…ç½®æ–‡ä»¶ï¼ˆéœ€åœæ­¢å®¹å™¨ï¼‰ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;vim /var/lib/docker/containers/&amp;lt;å®¹å™¨ID&amp;gt;/hostconfig.json&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
ä¿®æ”¹ `RestartPolicy` å­—æ®µï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;{&amp;ldquo;Name&amp;rdquo;: &amp;ldquo;unless-stopped&amp;rdquo;, &amp;ldquo;MaximumRetryCount&amp;rdquo;: 0} # åŸå€¼ä¸º &amp;ldquo;no&amp;rdquo;&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
------
### ğŸ“Š **ç­–ç•¥å¯¹æ¯”ä¸é€‰å‹å»ºè®®**
| **ç­–ç•¥** | **è‡ªåŠ¨é‡å¯è§¦å‘æ¡ä»¶** | **æ‰‹åŠ¨åœæ­¢åæ˜¯å¦éš Docker é‡å¯** | **é€‚ç”¨åœºæ™¯** |
| ---------------- | ------------------------- | -------------------------------- | -------------------------------- |
| `no` | æ°¸ä¸é‡å¯ | å¦ | ä¸´æ—¶ä»»åŠ¡ã€æµ‹è¯•ç¯å¢ƒ |
| `always` | **ä»»ä½•é€€å‡º** | **æ˜¯** | æå°‘ä½¿ç”¨ï¼ˆå¯èƒ½å¼•å‘å¾ªç¯é‡å¯ï¼‰ |
| `on-failure[:N]` | **å¼‚å¸¸é€€å‡º**ï¼ˆé0çŠ¶æ€ç ï¼‰ | å¦ | æ‰¹å¤„ç†ä»»åŠ¡ã€å¯æ•…éšœæ¢å¤çš„æœåŠ¡ |
| `unless-stopped` | **ä»»ä½•é€€å‡º** | **å¦** | **ç”Ÿäº§ç¯å¢ƒé•¿æœŸæœåŠ¡ï¼ˆæ¨èé¦–é€‰ï¼‰** |
&amp;gt; ğŸ’¡ **çŠ¶æ€ç å‚è€ƒ**ï¼š
&amp;gt;
&amp;gt; - `0`ï¼šæ­£å¸¸é€€å‡ºï¼ˆå¦‚ `docker stop`ï¼‰ã€‚
&amp;gt; - `é0`ï¼šå¼‚å¸¸é€€å‡ºï¼ˆå¦‚åº”ç”¨å´©æºƒï¼‰ã€‚
&amp;gt; - `125+`ï¼šDocker è‡ªèº«é”™è¯¯ï¼ˆå¦‚å‘½ä»¤æ— æ³•æ‰§è¡Œï¼‰[2,6](@ref)ã€‚
------
### ğŸ” **è°ƒè¯•ä¸ç›‘æ§**
- æŸ¥çœ‹é‡å¯ç­–ç•¥ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker inspect nginx &amp;ndash;format &amp;lsquo;{{.HostConfig.RestartPolicy.Name}}&amp;rsquo;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
- æ£€æŸ¥é‡å¯æ¬¡æ•°ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker inspect nginx &amp;ndash;format &amp;lsquo;{{.RestartCount}}&amp;rsquo; # æ˜¾ç¤ºå·²é‡å¯æ¬¡æ•°&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
- åˆ†æé€€å‡ºåŸå› ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="docker-logs-nginx---å®šä½é”™è¯¯æ—¥å¿—"&gt;docker ps -a # æŸ¥çœ‹ Exited çŠ¶æ€ç &lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;
docker logs nginx # å®šä½é”™è¯¯æ—¥å¿—
&lt;/h2&gt;&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker é‡å¯ç­–ç•¥æ˜¯ä¿éšœæœåŠ¡éŸ§æ€§çš„å…³é”®å·¥å…·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§é¦–é€‰ &lt;code&gt;unless-stopped&lt;/code&gt;&lt;/strong&gt;ï¼šå¼‚å¸¸å´©æºƒæ—¶è‡ªæ„ˆï¼ŒåŒæ—¶å°Šé‡æ‰‹åŠ¨ç»´æŠ¤æ“ä½œ&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»»åŠ¡å‹æœåŠ¡ç”¨ &lt;code&gt;on-failure&lt;/code&gt;&lt;/strong&gt;ï¼šé™åˆ¶é‡è¯•æ¬¡æ•°ï¼Œé¿å…èµ„æºè€—å°½&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¡å¿…ç»“åˆæ•°æ®å·&lt;/strong&gt;ï¼šç¡®ä¿é‡å¯åæ•°æ®ä¸ä¸¢å¤±&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§é‡å¯æ¬¡æ•°&lt;/strong&gt;ï¼šé¢‘ç¹é‡å¯å¾€å¾€æ˜¯åº”ç”¨æ•…éšœçš„ä¿¡å·ï¼Œéœ€åŠæ—¶æ’æŸ¥&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡åˆç†é…ç½®ç­–ç•¥ï¼Œå¯æ˜¾è‘—æå‡å®¹å™¨åŒ–æœåŠ¡çš„å¯ç”¨æ€§ï¼Œå‡å°‘è¿ç»´å¹²é¢„æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id="å¤šé˜¶æ®µæ„å»º"&gt;å¤šé˜¶æ®µæ„å»º
&lt;/h2&gt;&lt;p&gt;Docker å¤šé˜¶æ®µæ„å»ºï¼ˆMulti-stage Buildï¼‰æ˜¯ Docker 17.05 ç‰ˆæœ¬å¼•å…¥çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç”¨äº&lt;strong&gt;ä¼˜åŒ–é•œåƒä½“ç§¯ã€æå‡å®‰å…¨æ€§å’Œç®€åŒ–æ„å»ºæµç¨‹&lt;/strong&gt;ã€‚å®ƒå…è®¸åœ¨å•ä¸ª Dockerfile ä¸­å®šä¹‰å¤šä¸ªæ„å»ºé˜¶æ®µï¼ˆStageï¼‰ï¼Œæ¯ä¸ªé˜¶æ®µä½¿ç”¨ç‹¬ç«‹çš„åŸºç¡€é•œåƒï¼Œæœ€ç»ˆä»…å°†å¿…è¦çš„äº§ç‰©å¤åˆ¶åˆ°æœ€ç»ˆé•œåƒä¸­ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†ã€ä¼˜åŠ¿åŠå®è·µæŒ‡å—ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†"&gt;âš™ï¸ &lt;strong&gt;æ ¸å¿ƒåŸç†&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜¶æ®µåˆ†ç¦»&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å•ä¸ª Dockerfile ä¸­ä½¿ç”¨å¤šä¸ª &lt;code&gt;FROM&lt;/code&gt; æŒ‡ä»¤ï¼Œæ¯ä¸ª &lt;code&gt;FROM&lt;/code&gt; å¼€å¯ä¸€ä¸ªæ–°é˜¶æ®µï¼Œå„é˜¶æ®µç›¸äº’éš”ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºé˜¶æ®µï¼ˆBuilder Stageï¼‰&lt;/strong&gt;ï¼šä½¿ç”¨å®Œæ•´ SDK é•œåƒï¼ˆå¦‚ &lt;code&gt;golang&lt;/code&gt;ã€&lt;code&gt;maven&lt;/code&gt;ï¼‰ï¼Œå®‰è£…ç¼–è¯‘å·¥å…·å¹¶ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œé˜¶æ®µï¼ˆRuntime Stageï¼‰&lt;/strong&gt;ï¼šä½¿ç”¨è½»é‡çº§åŸºç¡€é•œåƒï¼ˆå¦‚ &lt;code&gt;alpine&lt;/code&gt;ã€&lt;code&gt;slim&lt;/code&gt;ï¼‰ï¼Œä»…å¤åˆ¶æ„å»ºé˜¶æ®µçš„äº§ç‰©ï¼ˆå¦‚äºŒè¿›åˆ¶æ–‡ä»¶ã€é™æ€èµ„æºï¼‰&lt;a class="link" href="@ref" &gt;1,3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº§ç‰©å¤åˆ¶æœºåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;COPY --from=&amp;lt;stage-name&amp;gt;&lt;/code&gt; å°†å‰ä¸€é˜¶æ®µçš„æ–‡ä»¶å¤åˆ¶åˆ°å½“å‰é˜¶æ®µï¼Œå…¶ä»–ä¸­é—´æ–‡ä»¶ï¼ˆå¦‚ç¼–è¯‘å™¨ã€æºç ï¼‰è¢«ä¸¢å¼ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;FROM golang:1.20 AS builder # æ„å»ºé˜¶æ®µ
WORKDIR /app
COPY . .
RUN go build -o myapp # ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶
FROM alpine:3.18 # è¿è¡Œé˜¶æ®µ
COPY &amp;ndash;from=builder /app/myapp . # ä»…å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶
CMD [&amp;quot;./myapp&amp;quot;]&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒä¼˜åŠ¿"&gt;ğŸš€ &lt;strong&gt;æ ¸å¿ƒä¼˜åŠ¿&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¤šé˜¶æ®µæ„å»º&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼ ç»Ÿå•é˜¶æ®µæ„å»º&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•œåƒä½“ç§¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å‡å°‘ 60%-90%&lt;/strong&gt;ï¼ˆä»…ä¿ç•™è¿è¡Œæ—¶æ–‡ä»¶ï¼‰&lt;/td&gt;
&lt;td&gt;âŒ åŒ…å«æ„å»ºå·¥å…·ã€æºç ã€ä¸´æ—¶æ–‡ä»¶ï¼Œä½“ç§¯å¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ— ç¼–è¯‘å·¥å…·å’Œæºç ï¼Œæ”»å‡»é¢å°&lt;/td&gt;
&lt;td&gt;âŒ æ„å»ºå·¥å…·å¯èƒ½å«æ¼æ´ï¼Œæºç æ˜“æ³„éœ²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„å»ºæ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš¡ï¸ åˆ©ç”¨ç¼“å­˜ä¼˜åŒ–ï¼Œä»…é‡å»ºå˜æ›´é˜¶æ®µ&lt;/td&gt;
&lt;td&gt;âš ï¸ å…¨é‡é‡å»ºï¼Œç¼“å­˜åˆ©ç”¨ç‡ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»´æŠ¤æˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ğŸ“ å• Dockerfile ç®¡ç†ï¼Œæ— éœ€é¢å¤–è„šæœ¬&lt;/td&gt;
&lt;td&gt;âŒ éœ€ç»´æŠ¤æ„å»ºè„šæœ¬å’Œå¤šä¸ª Dockerfile&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Node.js React åº”ç”¨ï¼šå•é˜¶æ®µé•œåƒ 420MB â†’ å¤šé˜¶æ®µé•œåƒ 43.2MBï¼ˆç¼©å° 90%ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;Nginx åº”ç”¨ï¼šä» 172MB ä¼˜åŒ–è‡³ 24.1MB&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ› ï¸ &lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ç¼–è¯‘å‹è¯­è¨€gojava"&gt;&lt;strong&gt;ç¼–è¯‘å‹è¯­è¨€ï¼ˆGoã€Javaï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;# Go åº”ç”¨
FROM golang:1.20 AS builder
WORKDIR /app
COPY . .
RUN go build -o app . # ç¼–è¯‘
FROM alpine:latest
COPY --from=builder /app/app .
CMD [&amp;#34;./app&amp;#34;]
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="å‰ç«¯åº”ç”¨reactvue"&gt;&lt;strong&gt;å‰ç«¯åº”ç”¨ï¼ˆReactã€Vueï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;# React + Nginx
FROM node:18 AS build
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build # ç”Ÿæˆé™æ€æ–‡ä»¶
FROM nginx:alpine
COPY --from=build /app/build /usr/share/nginx/html # ä»…å¤åˆ¶æ„å»ºç»“æœ
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="java-spring-boot"&gt;&lt;strong&gt;Java Spring Boot&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;FROM maven:3.8-openjdk-17 AS builder
WORKDIR /app
COPY pom.xml .
RUN mvn dependency:go-offline
COPY src ./src
RUN mvn package # ç”Ÿæˆ JAR åŒ…
FROM openjdk:17-alpine
COPY --from=builder /app/target/app.jar .
CMD [&amp;#34;java&amp;#34;, &amp;#34;-jar&amp;#34;, &amp;#34;app.jar&amp;#34;]
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-é«˜çº§æŠ€å·§"&gt;ğŸ”§ &lt;strong&gt;é«˜çº§æŠ€å·§&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜¶æ®µå‘½åä¸å¼•ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;AS&lt;/code&gt; å‘½åé˜¶æ®µï¼ˆå¦‚ &lt;code&gt;FROM node:18 AS build&lt;/code&gt;ï¼‰ï¼Œæå‡å¯è¯»æ€§å¹¶é¿å…ä¾èµ–æ•´æ•°ç´¢å¼•&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼š&lt;code&gt;COPY --from=build /app/dist ./dist&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éƒ¨åˆ†æ„å»ºä¸è°ƒè¯•&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; --target
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»…æ„å»ºç‰¹å®šé˜¶æ®µï¼Œç”¨äºè°ƒè¯•æˆ–æµ‹è¯•ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; ```
docker build --target builder -t app:debug .
```
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start="3"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤ç”¨å¤–éƒ¨é•œåƒæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›´æ¥ä»å…¶ä»–é•œåƒå¤åˆ¶æ–‡ä»¶ï¼ˆå¦‚ Nginx é…ç½®ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;COPY --from=nginx:latest /etc/nginx/nginx.conf /app/nginx.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾èµ–ç¼“å­˜ä¼˜åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆå¤åˆ¶ä¾èµ–å£°æ˜æ–‡ä»¶ï¼ˆå¦‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; package.json
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt; ã€
```
pom.xml
```
ï¼‰ï¼Œå†å¤åˆ¶æºç ï¼Œæœ€å¤§åŒ–åˆ©ç”¨æ„å»ºç¼“å­˜ï¼š
```
COPY package*.json ./ # å…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶
RUN npm install
COPY . . # åå¤åˆ¶æºç 
```
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h3 id="-æœ€ä½³å®è·µ"&gt;âš ï¸ &lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºç¡€é•œåƒé€‰æ‹©&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ„å»ºé˜¶æ®µï¼šä½¿ç”¨å®Œæ•´ SDK é•œåƒï¼ˆå¦‚ &lt;code&gt;golang&lt;/code&gt;ã€&lt;code&gt;maven&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œé˜¶æ®µï¼šä½¿ç”¨æœ€å°åŒ–é•œåƒï¼ˆå¦‚ &lt;code&gt;alpine&lt;/code&gt;ã€&lt;code&gt;distroless&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¸…ç†æ— ç”¨æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æ„å»ºé˜¶æ®µç»“æŸæ—¶åˆ é™¤ç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;RUN npm install &amp;amp;&amp;amp; npm run build &amp;amp;&amp;amp; rm -rf /tmp/*
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šé˜¶æ®µå¤ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¤šä¸ªè¿è¡Œé˜¶æ®µå¯å¤ç”¨åŒä¸€æ„å»ºé˜¶æ®µï¼Œé¿å…é‡å¤ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;FROM builder AS prod
COPY --from=builder /app/bin .
FROM builder AS test
COPY --from=builder /app/bin .
RUN ./test-suite
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰å…¨åŠ å›º&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¿è¡Œé˜¶æ®µä½¿ç”¨é root ç”¨æˆ·ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;RUN adduser -D appuser &amp;amp;&amp;amp; chown -R appuser /app
USER appuser
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker å¤šé˜¶æ®µæ„å»ºé€šè¿‡&lt;strong&gt;åˆ†ç¦»æ„å»ºä¸è¿è¡Œç¯å¢ƒ&lt;/strong&gt;ï¼Œè§£å†³äº†ä¼ ç»Ÿå•é˜¶æ®µæ„å»ºçš„ä¸‰å¤§ç—›ç‚¹ï¼š&lt;strong&gt;é•œåƒè‡ƒè‚¿ã€å®‰å…¨é£é™©ã€æµç¨‹å¤æ‚&lt;/strong&gt;ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š
âœ… â€‹&lt;strong&gt;æç®€é•œåƒ&lt;/strong&gt;â€‹ï¼šä»…åŒ…å«è¿è¡Œæ—¶å¿…è¦æ–‡ä»¶ï¼Œæå‡éƒ¨ç½²æ•ˆç‡ã€‚
âœ… â€‹&lt;strong&gt;ç”Ÿäº§å®‰å…¨&lt;/strong&gt;â€‹ï¼šå‰”é™¤ç¼–è¯‘å·¥å…·å’Œæºç ï¼Œé™ä½æ”»å‡»é¢ã€‚
âœ… â€‹&lt;strong&gt;å¼€å‘å‹å¥½&lt;/strong&gt;â€‹ï¼šå• Dockerfile ç®¡ç†å…¨æµç¨‹ï¼Œæ— éœ€å¤–éƒ¨è„šæœ¬&lt;a class="link" href="@ref" &gt;3,5,8&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯é€šè¿‡ &lt;code&gt;docker build --target&lt;/code&gt; åˆ†æ­¥è°ƒè¯•ï¼Œç»“åˆè½»é‡çº§åŸºç¡€é•œåƒï¼ˆå¦‚ Alpineï¼‰è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚&lt;strong&gt;ä¼ä¸šçº§åº”ç”¨&lt;/strong&gt;ï¼ˆå¾®æœåŠ¡ã€äº‘åŸç”Ÿåœºæ™¯ï¼‰å¼ºçƒˆæ¨èé‡‡ç”¨æ­¤æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="å®¹å™¨éš”ç¦»"&gt;å®¹å™¨éš”ç¦»
&lt;/h2&gt;&lt;p&gt;Docker å®¹å™¨çš„éš”ç¦»æ€§æ˜¯å…¶æ ¸å¿ƒä»·å€¼ä¹‹ä¸€ï¼Œä¾èµ–äº &lt;strong&gt;Linux å†…æ ¸çš„å¤šé¡¹æŠ€æœ¯&lt;/strong&gt;å®ç°èµ„æºä¸ç¯å¢ƒçš„éš”ç¦»ï¼Œç¡®ä¿å®¹å™¨é—´äº’ä¸å¹²æ‰°ã€‚ä»¥ä¸‹æ˜¯å…¶éš”ç¦»æœºåˆ¶çš„è¯¦ç»†è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-éš”ç¦»æœºåˆ¶åˆ†ç±»ä¸å®ç°æŠ€æœ¯"&gt;âš™ï¸ &lt;strong&gt;éš”ç¦»æœºåˆ¶åˆ†ç±»ä¸å®ç°æŠ€æœ¯&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="å‘½åç©ºé—´namespaces-èµ„æºè§†å›¾éš”ç¦»-2348"&gt;&lt;strong&gt;å‘½åç©ºé—´ï¼ˆNamespacesï¼‰â€”â€” èµ„æºè§†å›¾éš”ç¦»&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;2,3,4,8&lt;/a&gt;
&lt;/h4&gt;&lt;p&gt;å‘½åç©ºé—´ä¸ºå®¹å™¨æä¾›ç‹¬ç«‹çš„ç³»ç»Ÿèµ„æºè§†å›¾ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;PID å‘½åç©ºé—´&lt;/strong&gt;ï¼šéš”ç¦»è¿›ç¨‹ IDï¼Œå®¹å™¨å†…è¿›ç¨‹ä» PID 1 å¼€å§‹ç¼–å·ï¼Œæ— æ³•çœ‹åˆ°å®¿ä¸»æœºæˆ–å…¶ä»–å®¹å™¨çš„è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Network å‘½åç©ºé—´&lt;/strong&gt;ï¼šæ¯ä¸ªå®¹å™¨æ‹¥æœ‰ç‹¬ç«‹çš„ç½‘ç»œæ ˆï¼ˆIPã€ç«¯å£ã€è·¯ç”±è¡¨ã€é˜²ç«å¢™è§„åˆ™ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mount å‘½åç©ºé—´&lt;/strong&gt;ï¼šéš”ç¦»æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ï¼Œå®¹å™¨å†…æ–‡ä»¶æ“ä½œä¸å½±å“å®¿ä¸»æœºï¼ˆå¦‚ &lt;code&gt;/app/data&lt;/code&gt; ä»…å¯¹å½“å‰å®¹å™¨å¯è§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UTS å‘½åç©ºé—´&lt;/strong&gt;ï¼šéš”ç¦»ä¸»æœºåä¸åŸŸåï¼ˆå¦‚å®¹å™¨å¯è‡ªå®šä¹‰ &lt;code&gt;hostname&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPC å‘½åç©ºé—´&lt;/strong&gt;ï¼šéš”ç¦»è¿›ç¨‹é—´é€šä¿¡ï¼ˆä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;User å‘½åç©ºé—´&lt;/strong&gt;ï¼šæ˜ å°„å®¹å™¨å†… root ç”¨æˆ·åˆ°å®¿ä¸»æœºéç‰¹æƒç”¨æˆ·ï¼Œæå‡å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ§åˆ¶ç»„cgroups-èµ„æºé™åˆ¶-348"&gt;&lt;strong&gt;æ§åˆ¶ç»„ï¼ˆCgroupsï¼‰â€”â€” èµ„æºé™åˆ¶&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;3,4,8&lt;/a&gt;
&lt;/h4&gt;&lt;p&gt;Cgroups é™åˆ¶å®¹å™¨å¯¹ç‰©ç†èµ„æºçš„å ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPU&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;--cpus&lt;/code&gt; é™åˆ¶æ ¸å¿ƒæ•°æˆ–æ—¶é—´ç‰‡ä»½é¢ï¼ˆå¦‚ &lt;code&gt;docker run --cpus=0.5&lt;/code&gt; é™åˆ¶ 50% CPUï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;-m&lt;/code&gt; è®¾ç½®å†…å­˜ä¸Šé™ï¼ˆå¦‚ &lt;code&gt;-m 512m&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç£ç›˜ I/O&lt;/strong&gt;ï¼šé™åˆ¶è¯»å†™å¸¦å®½ï¼ˆå¦‚ &lt;code&gt;--device-write-bps&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡è®¿é—®&lt;/strong&gt;ï¼šæ§åˆ¶å®¹å™¨å¯¹ &lt;code&gt;/dev&lt;/code&gt; ç›®å½•ä¸‹è®¾å¤‡çš„è®¿é—®æƒé™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è”åˆæ–‡ä»¶ç³»ç»Ÿunionfs-æ–‡ä»¶éš”ç¦»-378"&gt;&lt;strong&gt;è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰â€”â€” æ–‡ä»¶éš”ç¦»&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;3,7,8&lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å±‚å­˜å‚¨&lt;/strong&gt;ï¼šé•œåƒç”±å¤šä¸ªåªè¯»å±‚å åŠ ï¼Œå®¹å™¨è¿è¡Œæ—¶æ·»åŠ å¯å†™å±‚ï¼ˆOverlayFS/AUFSï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™æ—¶å¤åˆ¶ï¼ˆCoWï¼‰&lt;/strong&gt;ï¼šä¿®æ”¹æ–‡ä»¶æ—¶å¤åˆ¶åˆ°å¯å†™å±‚ï¼Œé¿å…æ±¡æŸ“åŸºç¡€é•œåƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹è§†å›¾&lt;/strong&gt;ï¼šæ¯ä¸ªå®¹å™¨ä»…çœ‹åˆ°è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ— æ³•ç›´æ¥è®¿é—®å…¶ä»–å®¹å™¨æˆ–å®¿ä¸»æœºçš„æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å®‰å…¨æœºåˆ¶æƒé™éš”ç¦»-38"&gt;&lt;strong&gt;å®‰å…¨æœºåˆ¶â€”â€”æƒé™éš”ç¦»&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Capabilities&lt;/strong&gt;ï¼šé™åˆ¶å®¹å™¨å†… root ç”¨æˆ·çš„æƒé™ï¼ˆå¦‚ç¦æ­¢åŠ è½½å†…æ ¸æ¨¡å—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Seccomp&lt;/strong&gt;ï¼šè¿‡æ»¤å±é™©ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ç¦æ­¢ &lt;code&gt;mount()&lt;/code&gt; æˆ– &lt;code&gt;reboot()&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AppArmor/SELinux&lt;/strong&gt;ï¼šå¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰ï¼Œé™åˆ¶è¿›ç¨‹è¡Œä¸ºï¼ˆå¦‚ç¦æ­¢å†™å…¥æ•æ„Ÿç›®å½•ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç½‘ç»œéš”ç¦»è™šæ‹Ÿç½‘ç»œæ ˆ-68"&gt;&lt;strong&gt;ç½‘ç»œéš”ç¦»â€”â€”è™šæ‹Ÿç½‘ç»œæ ˆ&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;veth pair + ç½‘æ¡¥&lt;/strong&gt;ï¼šå®¹å™¨é€šè¿‡è™šæ‹Ÿç½‘å¡ï¼ˆvethï¼‰è¿æ¥åˆ°å®¿ä¸»æœºç½‘æ¡¥ï¼ˆå¦‚ &lt;code&gt;docker0&lt;/code&gt;ï¼‰ï¼Œå®ç°ç‹¬ç«‹ IP å’Œç«¯å£åˆ†é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç½‘ç»œæ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bridge&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰ï¼šå®¹å™¨é€šè¿‡ NAT ä¸å¤–éƒ¨é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt;ï¼šå…±äº«å®¿ä¸»æœºç½‘ç»œæ ˆï¼ˆç‰ºç‰²éš”ç¦»æ€§æ¢å–æ€§èƒ½ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;none&lt;/code&gt;ï¼šæ— ç½‘ç»œæ¥å£ï¼Œé€‚ç”¨äºæ— éœ€ç½‘ç»œçš„æ‰¹å¤„ç†ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºçš„å¯¹æ¯”-89"&gt;âš–ï¸ &lt;strong&gt;ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºçš„å¯¹æ¯”&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;8,9&lt;/a&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Docker å®¹å™¨&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼ ç»Ÿè™šæ‹Ÿæœº&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹çº§ï¼ˆè½»é‡ï¼‰&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶çº§ï¼ˆé‡é‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆç›´æ¥è°ƒç”¨å®¿ä¸»æœºå†…æ ¸ï¼‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆéœ€ Hypervisor è™šæ‹ŸåŒ–å±‚ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯åŠ¨é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç§’çº§&lt;/td&gt;
&lt;td&gt;åˆ†é’Ÿçº§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•œåƒå¤§å°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MB çº§ï¼ˆå…±äº«å†…æ ¸ï¼‰&lt;/td&gt;
&lt;td&gt;GB çº§ï¼ˆå«å®Œæ•´ OSï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–å†…æ ¸éš”ç¦»ï¼ˆéœ€åŠ å›ºï¼‰&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶çº§éš”ç¦»ï¼ˆæ›´å¼ºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨&lt;/strong&gt;ï¼šå¾®æœåŠ¡ã€CI/CDã€å¼€å‘æµ‹è¯•ç¯å¢ƒï¼ˆè½»é‡å¿«é€Ÿï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿæœº&lt;/strong&gt;ï¼šå¤šç§Ÿæˆ·éš”ç¦»ã€å¼ºå®‰å…¨éœ€æ±‚ï¼ˆå¦‚é‡‘èç³»ç»Ÿï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-å®‰å…¨æ€§ä¸å±€é™æ€§"&gt;ğŸ›¡ï¸ &lt;strong&gt;å®‰å…¨æ€§ä¸å±€é™æ€§&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="å®‰å…¨åŠ å›ºå®è·µ-78"&gt;&lt;strong&gt;å®‰å…¨åŠ å›ºå®è·µ&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é root ç”¨æˆ·è¿è¡Œ&lt;/strong&gt;ï¼š&lt;code&gt;docker run -u 1000:1000&lt;/code&gt; é¿å…ç‰¹æƒæå‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªè¯»æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt;ï¼š&lt;code&gt;--read-only&lt;/code&gt; ç¦æ­¢å®¹å™¨å†™å…¥ï¼ˆæ—¥å¿—å¯æŒ‚è½½å·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºé™åˆ¶&lt;/strong&gt;ï¼šä¸¥æ ¼é…ç½® Cgroups é˜²æ­¢èµ„æºè€—å°½ï¼ˆå¦‚å†…å­˜æº¢å‡ºå¯¼è‡´ OOM Killï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å›ºæœ‰å±€é™æ€§-38"&gt;&lt;strong&gt;å›ºæœ‰å±€é™æ€§&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸å…±äº«&lt;/strong&gt;ï¼šæ‰€æœ‰å®¹å™¨å…±äº«å®¿ä¸»æœºå†…æ ¸ï¼Œå†…æ ¸æ¼æ´å¯èƒ½å½±å“æ‰€æœ‰å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€ƒé€¸é£é™©&lt;/strong&gt;ï¼šé…ç½®ä¸å½“å¯èƒ½å¯¼è‡´å®¹å™¨çªç ´éš”ç¦»ï¼ˆå¦‚æœªå¯ç”¨ User Namespaceï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç§Ÿæˆ·åœºæ™¯&lt;/strong&gt;ï¼šç”Ÿäº§ç¯å¢ƒéœ€ç»“åˆ Kubernetes Namespace æˆ– Kata Containersï¼ˆåŸºäºè™šæ‹ŸåŒ–çš„å®¹å™¨è¿è¡Œæ—¶ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-éš”ç¦»æ•ˆæœéªŒè¯ç¤ºä¾‹"&gt;ğŸ” &lt;strong&gt;éš”ç¦»æ•ˆæœéªŒè¯ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;# æŸ¥çœ‹å®¹å™¨è¿›ç¨‹éš”ç¦»
docker run -it alpine sh
ps aux # ä»…æ˜¾ç¤ºå®¹å™¨å†…è¿›ç¨‹ï¼ˆPID 1 ä¸ºå®¹å™¨åˆå§‹åŒ–è¿›ç¨‹ï¼‰
# æ£€æŸ¥èµ„æºé™åˆ¶
docker run -m 100m --cpus=0.5 stress-ng --vm 1 --vm-bytes 150M
# å®¹å™¨å› å†…å­˜è¶…é™è¢«å¼ºåˆ¶ç»ˆæ­¢ï¼ˆOOM Killerï¼‰
# ç½‘ç»œéš”ç¦»æµ‹è¯•
docker run -d --name web nginx
docker exec web ip addr # æ˜¾ç¤ºå®¹å™¨å†…ç‹¬ç«‹ç½‘å¡ï¼ˆeth0ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker é€šè¿‡ &lt;strong&gt;Namespacesï¼ˆè§†å›¾éš”ç¦»ï¼‰ã€Cgroupsï¼ˆèµ„æºé™åˆ¶ï¼‰ã€UnionFSï¼ˆæ–‡ä»¶éš”ç¦»ï¼‰åŠå®‰å…¨æ¨¡å—&lt;/strong&gt;çš„ç»„åˆï¼Œå®ç°äº†è½»é‡çº§ä½†é«˜æ•ˆçš„å®¹å™¨éš”ç¦»ã€‚å…¶ä¼˜åŠ¿åœ¨äº&lt;strong&gt;ä½å¼€é”€ã€å¿«é€Ÿå¯åŠ¨å’Œæ˜“ç§»æ¤æ€§&lt;/strong&gt;ï¼Œé€‚ç”¨äºäº‘åŸç”Ÿå’Œå¾®æœåŠ¡æ¶æ„&lt;a class="link" href="@ref" &gt;4,7,9&lt;/a&gt;ã€‚ç„¶è€Œï¼Œåœ¨&lt;strong&gt;å¼ºå®‰å…¨éš”ç¦»&lt;/strong&gt;åœºæ™¯ä¸‹ï¼Œéœ€ç»“åˆè™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆå¦‚ gVisorï¼‰æˆ–ç¡¬ä»¶è¾…åŠ©æ–¹æ¡ˆï¼ˆå¦‚ Intel VT-xï¼‰å¼¥è¡¥å†…æ ¸å…±äº«çš„å›ºæœ‰ç¼ºé™·&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id="cgroup"&gt;CGroup
&lt;/h2&gt;&lt;p&gt;CGroupï¼ˆControl Groupsï¼‰æ˜¯ Linux å†…æ ¸æä¾›çš„èµ„æºç®¡ç†æœºåˆ¶ï¼Œç”¨äºé™åˆ¶ã€éš”ç¦»å’Œç›‘æ§è¿›ç¨‹ç»„ï¼ˆprocess groupsï¼‰çš„ç³»ç»Ÿèµ„æºï¼ˆå¦‚ CPUã€å†…å­˜ã€ç£ç›˜ I/Oã€ç½‘ç»œç­‰ï¼‰ã€‚å®ƒæ˜¯å®¹å™¨æŠ€æœ¯ï¼ˆå¦‚ Dockerã€Kubernetesï¼‰å®ç°èµ„æºéš”ç¦»çš„æ ¸å¿ƒåŸºç¡€ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†å’ŒåŠŸèƒ½çš„è¯¦ç»†è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-cgroup-çš„æ ¸å¿ƒæ¦‚å¿µ"&gt;âš™ï¸ &lt;strong&gt;CGroup çš„æ ¸å¿ƒæ¦‚å¿µ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»»åŠ¡ï¼ˆTaskï¼‰&lt;/strong&gt;
å³ç³»ç»Ÿä¸­çš„è¿›ç¨‹ï¼ˆProcessï¼‰ï¼Œæ˜¯èµ„æºæ§åˆ¶çš„åŸºæœ¬å•ä½&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶ç»„ï¼ˆControl Groupï¼‰&lt;/strong&gt;
ä¸€ç»„è¿›ç¨‹çš„é›†åˆï¼Œèµ„æºé™åˆ¶ä»¥æ§åˆ¶ç»„ä¸ºå•ä½ç”Ÿæ•ˆã€‚è¿›ç¨‹å¯åŠ¨æ€åŠ å…¥æˆ–è¿ç§»åˆ°ä¸åŒæ§åˆ¶ç»„&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±‚çº§ï¼ˆHierarchyï¼‰&lt;/strong&gt;
æ§åˆ¶ç»„ä»¥æ ‘å½¢ç»“æ„ç»„ç»‡ï¼Œå­ç»„ç»§æ‰¿çˆ¶ç»„çš„èµ„æºå±æ€§ã€‚æ¯ä¸ªå±‚çº§å¯é™„åŠ å¤šä¸ªå­ç³»ç»Ÿï¼ˆSubsystemï¼‰&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­ç³»ç»Ÿï¼ˆSubsystemï¼‰&lt;/strong&gt;
èµ„æºæ§åˆ¶å™¨ï¼Œæ¯ä¸ªå­ç³»ç»Ÿè´Ÿè´£ä¸€ç±»èµ„æºçš„é™åˆ¶æˆ–ç›‘æ§ã€‚å¸¸è§å­ç³»ç»ŸåŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPU&lt;/strong&gt;ï¼šé™åˆ¶ CPU ä½¿ç”¨æ—¶é—´&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Memory&lt;/strong&gt;ï¼šé™åˆ¶å†…å­˜ç”¨é‡å¹¶ç»Ÿè®¡ä½¿ç”¨æƒ…å†µ&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Blkio&lt;/strong&gt;ï¼šé™åˆ¶å—è®¾å¤‡ I/O å¸¦å®½ï¼ˆå¦‚ç£ç›˜è¯»å†™ï¼‰&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cpuset&lt;/strong&gt;ï¼šç»‘å®šè¿›ç¨‹åˆ°æŒ‡å®š CPU æ ¸æˆ–å†…å­˜èŠ‚ç‚¹&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Devices&lt;/strong&gt;ï¼šæ§åˆ¶è®¾å¤‡è®¿é—®æƒé™ï¼ˆå¦‚ç¦æ­¢è¯»å†™ç‰¹å®šè®¾å¤‡ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-cgroup-çš„æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ› ï¸ &lt;strong&gt;CGroup çš„æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºé™åˆ¶ï¼ˆLimitingï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CPUï¼šé€šè¿‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; cpu.cfs_quota_us
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt; ï¼ˆå‘¨æœŸå†…å¯ç”¨æ—¶é—´ï¼‰å’Œ
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; cpu.cfs_period_us
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt; ï¼ˆå‘¨æœŸé•¿åº¦ï¼‰é™åˆ¶ CPU æ—¶é—´ç‰‡
3,6
ã€‚
ç¤ºä¾‹
ï¼šè®¾ç½®è¿›ç¨‹ç»„æœ€å¤šä½¿ç”¨ 50% CPUï¼š
```
echo 50000 &amp;gt; /sys/fs/cgroup/cpu/group1/cpu.cfs_quota_us # 50ms/100ms
echo 100000 &amp;gt; /sys/fs/cgroup/cpu/group1/cpu.cfs_period_us
```
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt; å†…å­˜
ï¼šé€šè¿‡
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; memory.limit_in_bytes
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è®¾ç½®å†…å­˜ä¸Šé™ï¼Œè¶…é™è§¦å‘ OOMï¼ˆOut-of-Memoryï¼‰ç»ˆæ­¢è¿›ç¨‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; 4,7
ã€‚
ç¤ºä¾‹
ï¼šé™åˆ¶å†…å­˜ä¸º 100MBï¼š
```
echo 100M &amp;gt; /sys/fs/cgroup/memory/group1/memory.limit_in_bytes
```
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt; I/O
ï¼šé€šè¿‡
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; blkio.throttle.read_bps_device
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é™åˆ¶ç£ç›˜è¯»å†™é€Ÿç‡&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; 1,8
ã€‚
ç¤ºä¾‹
ï¼šé™åˆ¶ç£ç›˜è¯»é€Ÿç‡ä¸º 1MB/sï¼š
```
echo &amp;quot;8:0 1048576&amp;quot; &amp;gt; /sys/fs/cgroup/blkio/group1/blkio.throttle.read_bps_device
```
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆçº§æ§åˆ¶ï¼ˆPrioritizationï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPU æƒé‡&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;cpu.shares&lt;/code&gt; åˆ†é…ç›¸å¯¹æƒé‡ï¼ˆå¦‚ 1000 vs 500 è¡¨ç¤º 2:1 çš„ CPU ç«äº‰æ¯”ä¾‹ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;I/O æƒé‡&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;blkio.weight&lt;/code&gt; è®¾ç½®å—è®¾å¤‡ I/O ä¼˜å…ˆçº§&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºå®¡è®¡ï¼ˆAccountingï¼‰&lt;/strong&gt;
å­ç³»ç»Ÿè‡ªåŠ¨ç»Ÿè®¡èµ„æºä½¿ç”¨é‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPUacct&lt;/strong&gt;ï¼šè®°å½• CPU æ—¶é—´ï¼ˆ&lt;code&gt;cpuacct.usage&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Memory&lt;/strong&gt;ï¼šç»Ÿè®¡å†…å­˜ç”¨é‡ï¼ˆ&lt;code&gt;memory.usage_in_bytes&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›ç¨‹æ§åˆ¶ï¼ˆControlï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Freezer&lt;/strong&gt;ï¼šæš‚åœï¼ˆ&lt;code&gt;FROZEN&lt;/code&gt;ï¼‰æˆ–æ¢å¤ï¼ˆ&lt;code&gt;THAWED&lt;/code&gt;ï¼‰è¿›ç¨‹ç»„&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-cgroup-ä¸å®¹å™¨æŠ€æœ¯çš„ç»“åˆ"&gt;ğŸŒ &lt;strong&gt;CGroup ä¸å®¹å™¨æŠ€æœ¯çš„ç»“åˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;åœ¨ Docker/Kubernetes ä¸­ï¼ŒCGroup ä¸ºæ¯ä¸ªå®¹å™¨åˆ›å»ºç‹¬ç«‹çš„æ§åˆ¶ç»„ï¼Œå®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºéš”ç¦»&lt;/strong&gt;ï¼šé™åˆ¶å®¹å™¨ CPUã€å†…å­˜ç­‰èµ„æºï¼Œé¿å…äº’ç›¸äº‰æŠ¢&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨éš”ç¦»&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;devices&lt;/code&gt; å­ç³»ç»Ÿç¦æ­¢å®¹å™¨è®¿é—®å®¿ä¸»æœºè®¾å¤‡&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è°ƒæ•´&lt;/strong&gt;ï¼šè¿è¡Œæ—¶ä¿®æ”¹èµ„æºå‚æ•°ï¼ˆå¦‚ &lt;code&gt;docker update --cpus=2&lt;/code&gt; å®æ—¶è°ƒæ•´ CPU é…é¢ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-é…ç½®ä¸å®è·µ"&gt;âš ï¸ &lt;strong&gt;é…ç½®ä¸å®è·µ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"&gt;&lt;strong&gt;é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ“ä½œ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æŒ‚è½½å­ç³»ç»Ÿï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;mount -t cgroup -o cpu,memory cgroup /sys/fs/cgroup&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
- åˆ›å»ºæ§åˆ¶ç»„ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;mkdir /sys/fs/cgroup/cpu/group1
echo 50000 &amp;gt; /sys/fs/cgroup/cpu/group1/cpu.cfs_quota_us&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
- æ·»åŠ è¿›ç¨‹ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;echo $$ &amp;gt; /sys/fs/cgroup/cpu/group1/tasks # å°†å½“å‰è¿›ç¨‹åŠ å…¥ group1&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
#### **é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆ/etc/cgconfig.confï¼‰**
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;group mysql_group {
cpu {
cpu.cfs_quota_us = 50000; # é™åˆ¶ 50% CPU
}
memory {
memory.limit_in_bytes = 100M; # é™åˆ¶ 100MB å†…å­˜
}
}&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
é‡å¯æœåŠ¡ç”Ÿæ•ˆï¼š`service cgconfig restart`[3,4](@ref)ã€‚
------
### ğŸ’¡ **å¸¸è§é—®é¢˜ä¸è§£å†³**
1. **Cgroup æŒ‚è½½å¤±è´¥**
æ£€æŸ¥å†…æ ¸æ”¯æŒï¼š`grep CGROUP /boot/config-$(uname -r)`[1](@ref)ã€‚
2. **èµ„æºè¶…é™å¯¼è‡´ OOM**
è°ƒæ•´ `memory.oom_control` ç¦ç”¨ OOM Killerï¼Œæˆ–å¢åŠ å†…å­˜ä¸Šé™[4](@ref)ã€‚
3. **å¤šæ ¸ CPU ç»‘å®šä½¿ç”¨**
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;cpuset&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
å­ç³»ç»Ÿç»‘å®šè¿›ç¨‹åˆ°æŒ‡å®šæ ¸å¿ƒï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;echo &amp;ldquo;0-1&amp;rdquo; &amp;gt; /sys/fs/cgroup/cpuset/group1/cpuset.cpus # ç»‘å®šåˆ° CPU0-1&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
------
### ğŸ’ **æ€»ç»“**
CGroup æ˜¯ Linux èµ„æºç®¡ç†çš„åŸºçŸ³ï¼Œé€šè¿‡**å±‚çº§åŒ–çš„æ§åˆ¶ç»„**å’Œ**å¤šæ ·åŒ–çš„å­ç³»ç»Ÿ**å®ç°äº†å¯¹è¿›ç¨‹ç»„èµ„æºçš„ç²¾ç»†æ§åˆ¶ã€‚å…¶ä¸ Namespaceï¼ˆç¯å¢ƒéš”ç¦»ï¼‰çš„ç»“åˆï¼Œæ„æˆäº†ç°ä»£å®¹å™¨æŠ€æœ¯çš„æ ¸å¿ƒæ¶æ„[7,8](@ref)ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåˆç†é…ç½® CGroup å¯æ˜¾è‘—æå‡ç³»ç»Ÿç¨³å®šæ€§å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œé¿å…å•ç‚¹æ•…éšœå¼•å‘çš„èµ„æºé›ªå´©ã€‚
&amp;gt; æ›´å¤šå®è·µæ¡ˆä¾‹å¯å‚è€ƒï¼š[CGroup å®˜æ–¹æ–‡æ¡£](https://www.kernel.org/doc/Documentation/cgroup-v1/)åŠ Docker èµ„æºé™åˆ¶é…ç½®ã€‚
## -it
`docker exec -it` ä¸­çš„ **`-it`** æ˜¯ Docker å‘½ä»¤ä¸­ä¸¤ä¸ªå¸¸ç”¨é€‰é¡¹çš„ç»„åˆï¼š**`-i`**ï¼ˆ`--interactive`ï¼‰å’Œ **`-t`**ï¼ˆ`--tty`ï¼‰ã€‚å®ƒä»¬å…±åŒä½œç”¨ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿä»¥**äº¤äº’å¼ç»ˆç«¯**çš„æ–¹å¼è¿›å…¥å®¹å™¨å†…éƒ¨æ‰§è¡Œå‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š
------
### ğŸ”§ **`-i` å’Œ `-t` çš„ä½œç”¨**
| **é€‰é¡¹** | **å«ä¹‰** | **ä½¿ç”¨åœºæ™¯** |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **`-i`** | ä¿æŒæ ‡å‡†è¾“å…¥ï¼ˆ`STDIN`ï¼‰æ‰“å¼€ï¼Œå…è®¸ç”¨æˆ·å‘å®¹å™¨å†…å‘é€è¾“å…¥ï¼ˆå¦‚é”®ç›˜è¾“å…¥ï¼‰[1,3,5](@ref)ã€‚ | éœ€è¦ä¸å®¹å™¨äº¤äº’ï¼ˆå¦‚è¾“å…¥å‘½ä»¤ã€ç¼–è¾‘æ–‡ä»¶ï¼‰æ—¶å¿…é€‰ã€‚ |
| **`-t`** | åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆ`pseudo-TTY`ï¼‰ï¼Œæ¨¡æ‹ŸçœŸå®çš„ç»ˆç«¯ç¯å¢ƒï¼ˆæ”¯æŒå‘½ä»¤è¡Œæ ¼å¼ã€å…‰æ ‡æ§åˆ¶ç­‰ï¼‰[1,6,8](@ref)ã€‚ | éœ€è·å¾—ç±»ä¼¼æœ¬åœ°ç»ˆç«¯çš„æ“ä½œä½“éªŒï¼ˆå¦‚å½©è‰²è¾“å‡ºã€å‘½ä»¤è¡¥å…¨ï¼‰æ—¶å¿…é€‰ã€‚ |
&amp;gt; ğŸ’¡ **ç»„åˆæ•ˆæœ**ï¼š`-it` ä½¿å®¹å™¨å¯åŠ¨ä¸€ä¸ª**å¯äº¤äº’çš„ç»ˆç«¯ä¼šè¯**ï¼ˆå¦‚ Bashï¼‰ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤å¹¶æŸ¥çœ‹æ ¼å¼åŒ–è¾“å‡ºã€‚
------
### âš™ï¸ **ä¸ºä½•éœ€è¦ `-it`ï¼Ÿ**
1. **é¿å…å‘½ä»¤é˜»å¡**
æ—  `-i` æ—¶ï¼Œå®¹å™¨å¯èƒ½å› ç­‰å¾…è¾“å…¥è€Œé˜»å¡ï¼ˆå¦‚ `docker exec` æ‰§è¡Œ `bash` åæ— æ³•è¾“å…¥å‘½ä»¤ï¼‰[3](@ref)ã€‚
2. **è§£å†³ç»ˆç«¯æ ¼å¼æ··ä¹±**
æ—  `-t` æ—¶ï¼Œç»ˆç«¯æ— æ³•æ­£ç¡®è§£ææ¢è¡Œã€é¢œè‰²ç­‰æ§åˆ¶å­—ç¬¦ï¼Œè¾“å‡ºå¯èƒ½é”™ä¹±ï¼ˆå¦‚ `ls` å‘½ä»¤ç»“æœæŒ¤åœ¨ä¸€è¡Œï¼‰[6,8](@ref)ã€‚
3. **æ”¯æŒäº¤äº’å¼å·¥å…·**
éœ€åœ¨å®¹å™¨å†…ä½¿ç”¨ `vi`ã€`top` ç­‰äº¤äº’å¼å·¥å…·æ—¶ï¼Œå¿…é¡»å¯ç”¨ `-it`[3,7](@ref)ã€‚
------
### ğŸ› ï¸ **å…¸å‹ä½¿ç”¨åœºæ™¯**
#### **è¿›å…¥å®¹å™¨çš„ Bash ç»ˆç«¯**
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker exec -it nginx /bin/bash # è¿›å…¥åä¸º nginx å®¹å™¨çš„ Bash ç»ˆç«¯&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
- è‹¥å®¹å™¨æ—  Bashï¼ˆå¦‚ Alpine é•œåƒï¼‰ï¼Œæ”¹ç”¨
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;/bin/sh&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
ï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker exec -it alpine_container /bin/sh &lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
#### **åœ¨å®¹å™¨å†…æ‰§è¡Œäº¤äº’å‘½ä»¤**
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker exec -it mysql mysql -u root -p # è¿›å…¥ MySQL äº¤äº’å‘½ä»¤è¡Œ&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
&amp;gt; è¾“å…¥å¯†ç åå¯ç›´æ¥æ‰§è¡Œ SQL è¯­å¥ã€‚
#### **è°ƒè¯•å®¹å™¨ï¼ˆæŸ¥çœ‹æ—¥å¿—ã€è¿›ç¨‹ï¼‰**
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker exec -it web_server tail -f /var/log/nginx/access.log # å®æ—¶æŸ¥çœ‹æ—¥å¿—&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;
docker exec -it web_server ps aux # æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
------
### âš ï¸ **æ³¨æ„äº‹é¡¹**
1. **å®¹å™¨å¿…é¡»å¤„äºè¿è¡ŒçŠ¶æ€**
`docker exec` ä»…å¯¹è¿è¡Œä¸­çš„å®¹å™¨ç”Ÿæ•ˆï¼ˆéœ€å…ˆé€šè¿‡ `docker start` å¯åŠ¨åœæ­¢çš„å®¹å™¨ï¼‰[3,8](@ref)ã€‚
2.
ä¸ `docker attach` çš„åŒºåˆ«
- `docker attach`ï¼šç›´æ¥é™„åŠ åˆ°å®¹å™¨ä¸»è¿›ç¨‹ï¼Œ**é€€å‡ºå¯èƒ½å¯¼è‡´å®¹å™¨åœæ­¢**[7,8](@ref)ã€‚
- `docker exec -it`ï¼šå¯åŠ¨æ–°è¿›ç¨‹ï¼ˆå¦‚ Bashï¼‰ï¼Œ**é€€å‡ºä¸å½±å“ä¸»è¿›ç¨‹**ï¼ˆæ›´å®‰å…¨ï¼‰[3,7](@ref)ã€‚
3.
æƒé™é—®é¢˜
è‹¥æç¤ºæƒé™ä¸è¶³ï¼Œå¯æ·»åŠ 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;-u root&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
ä»¥ root ç”¨æˆ·æ‰§è¡Œï¼š
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;docker exec -it -u root my_container /bin/bash &lt;a class="link" href="@ref" &gt;2,3&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;
------
### ğŸ’ **æ€»ç»“**
- **`-it` = `-i` + `-t`**ï¼šç¼ºä¸€ä¸å¯ï¼Œå…±åŒå®ç°**äº¤äº’å¼ç»ˆç«¯æ“ä½œ**ã€‚
- **æ ¸å¿ƒä»·å€¼**ï¼šè®©ç”¨æˆ·åƒæ“ä½œæœ¬åœ°ç»ˆç«¯ä¸€æ ·**å®‰å…¨è°ƒè¯•å®¹å™¨**ï¼ˆæŸ¥çœ‹ã€ä¿®æ”¹ã€è¿ç»´ï¼‰ã€‚
- **æ›¿ä»£æ–¹æ¡ˆ**ï¼šéäº¤äº’å‘½ä»¤ï¼ˆå¦‚ `docker exec nginx ls /app`ï¼‰æ— éœ€ `-it`[6](@ref)ã€‚
&amp;gt; å¯é€šè¿‡ `docker exec --help` æŸ¥çœ‹å®Œæ•´é€‰é¡¹è¯´æ˜[3](@ref)ã€‚æŒæ¡ `-it` æ˜¯é«˜æ•ˆä½¿ç”¨ Docker çš„å¿…å¤‡æŠ€èƒ½ï¼
## TTY
TTYï¼ˆTeletypewriterï¼Œç”µä¼ æ‰“å­—æœºï¼‰æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­**ç»ˆç«¯è®¾å¤‡çš„ç»Ÿç§°**ï¼Œèµ·æºäºæ—©æœŸçš„ç‰©ç†ç”µä¼ æ‰“å­—è®¾å¤‡ï¼Œç”¨äºé€šè¿‡ä¸²è¡Œé€šä¿¡ä¼ è¾“æ–‡æœ¬ã€‚åœ¨ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼ˆå°¤å…¶æ˜¯Linux/Unixï¼‰ï¼ŒTTYå·²æ¼”å˜ä¸º**ç®¡ç†ç”¨æˆ·ä¸ç³»ç»Ÿäº¤äº’çš„æŠ½è±¡æ¥å£**ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯å¤„ç†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰å’Œè¾“å‡ºï¼ˆæ˜¾ç¤ºï¼‰ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒè¦ç‚¹ï¼š
------
### ğŸ“œ **å®šä¹‰ä¸å†å²æ¼”å˜**
1. **èµ·æº**
- TTYæœ€åˆæŒ‡ç‰©ç†ç”µä¼ æ‰“å­—æœºï¼ˆTeletypeï¼‰ï¼Œé€šè¿‡ä¸²å£ä¸è®¡ç®—æœºé€šä¿¡ï¼Œç”¨äºè¿œç¨‹ä¼ è¾“æ–‡æœ¬[1,6](@ref)ã€‚
- åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼ŒTTYæˆä¸º**ç»ˆç«¯è®¾å¤‡çš„è½¯ä»¶æŠ½è±¡**ï¼Œè´Ÿè´£ç®¡ç†ç”¨æˆ·å‘½ä»¤è¾“å…¥å’Œç³»ç»Ÿè¾“å‡ºï¼ˆå¦‚æ˜¾ç¤ºæ–‡æœ¬æˆ–æ‰“å°å†…å®¹ï¼‰[4,6](@ref)ã€‚
2. **æ ¸å¿ƒåŠŸèƒ½**
- **è¾“å…¥å¤„ç†**ï¼šå°†é”®ç›˜ä¿¡å·è½¬æ¢ä¸ºç³»ç»Ÿå¯è¯»æ•°æ®ï¼Œå­˜å‚¨åˆ°è¾“å…¥ç¼“å†²åŒºã€‚
- **è¾“å‡ºå¤„ç†**ï¼šå°†ç³»ç»Ÿè¿”å›çš„æ•°æ®å‘é€åˆ°æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚
- **å›æ˜¾æ§åˆ¶**ï¼šç”¨æˆ·è¾“å…¥æ—¶å®æ—¶æ˜¾ç¤ºå­—ç¬¦ï¼ˆå¦‚å¯†ç è¾“å…¥éšè—ï¼‰[6](@ref)ã€‚
------
### âš™ï¸ **TTYçš„ç±»å‹ä¸è®¾å¤‡è·¯å¾„**
ç°ä»£ç³»ç»Ÿä¸»è¦åˆ†ä¸ºä¸‰ç±»TTYè®¾å¤‡ï¼š
| **ç±»å‹** | **è®¾å¤‡è·¯å¾„** | **åº”ç”¨åœºæ™¯** | **ç‰¹ç‚¹** |
| ----------------- | ---------------------------- | -------------------------------------- | ----------------------------------------------------------- |
| **ç‰©ç†TTY** | `/dev/ttyS0`ã€`/dev/ttyUSB0` | ä¸²å£è®¾å¤‡è°ƒè¯•ï¼ˆå¦‚åµŒå…¥å¼å¼€å‘æ¿ï¼‰ | ç›´æ¥è¿æ¥ç‰©ç†ç¡¬ä»¶ï¼Œéœ€é…ç½®æ³¢ç‰¹ç‡ç­‰å‚æ•° [3,4](@ref) |
| **è™šæ‹ŸTTY** | `/dev/tty1`~`/dev/tty6` | æœ¬åœ°æ§åˆ¶å°ï¼ˆé€šè¿‡`Ctrl+Alt+F1~F6`åˆ‡æ¢ï¼‰ | ç³»ç»Ÿå¯åŠ¨æ—¶é¢„åˆ†é…ï¼Œä¸¥æ ¼æƒé™æ§åˆ¶ï¼ˆå¦‚é™åˆ¶rootç™»å½•ï¼‰[2,4](@ref) |
| **ä¼ªç»ˆç«¯ï¼ˆPTSï¼‰** | `/dev/pts/0`ã€`/dev/pts/1` | SSHè¿œç¨‹è¿æ¥ã€å›¾å½¢ç•Œé¢ç»ˆç«¯æ¨¡æ‹Ÿå™¨ | åŠ¨æ€åˆ›å»ºï¼Œæ”¯æŒç½‘ç»œä¼ è¾“ï¼Œç”¨æˆ·æƒé™çµæ´»[4,10](@ref) |
&amp;gt; ğŸ’¡ **ä¼ªç»ˆç«¯ï¼ˆPTSï¼‰çš„å·¥ä½œæµç¨‹**ï¼š
&amp;gt;
&amp;gt; 1. ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆå¦‚SSHDï¼‰åˆ›å»ºä¸€å¯¹è®¾å¤‡ï¼š**ä¸»è®¾å¤‡ï¼ˆptmxï¼‰** å’Œ **ä»è®¾å¤‡ï¼ˆPTSï¼‰**ã€‚
&amp;gt; 2. ç”¨æˆ·è¾“å…¥ â†’ ptmx â†’ PTS â†’ Shellè¿›ç¨‹ â†’ å¤„ç†ç»“æœåå‘è¾“å‡ºåˆ°ç»ˆç«¯[4,10](@ref)ã€‚
------
### ğŸ”§ **TTYåœ¨Linuxç³»ç»Ÿä¸­çš„å…³é”®ä½œç”¨**
1. **å¤šç”¨æˆ·æ”¯æŒ**
å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶é€šè¿‡ä¸åŒTTYç™»å½•ç³»ç»Ÿï¼Œæ¯ä¸ªä¼šè¯ç‹¬ç«‹éš”ç¦»ï¼ˆå¦‚ç”¨æˆ·Aåœ¨`tty1`æ“ä½œï¼Œç”¨æˆ·Båœ¨`pts/0`é€šè¿‡SSHè¿æ¥ï¼‰[1,9](@ref)ã€‚
2. **ä¼šè¯ç®¡ç†**
TTYç»‘å®šShellè¿›ç¨‹ï¼ˆå¦‚Bashï¼‰ï¼Œç”¨æˆ·å‘½ä»¤é€šè¿‡Shellè§£é‡Šåç”±å†…æ ¸æ‰§è¡Œï¼Œç»“æœè¿”å›TTYæ˜¾ç¤º[9,10](@ref)ã€‚
3. **ç³»ç»Ÿè°ƒè¯•ä¸ç»´æŠ¤**
- ç³»ç»Ÿæ•…éšœæ—¶å¯é€šè¿‡è™šæ‹ŸTTYï¼ˆå¦‚`tty1`ï¼‰ç›´æ¥æ“ä½œï¼Œé¿å…å›¾å½¢ç•Œé¢å´©æºƒçš„å½±å“[2,7](@ref)ã€‚
- å®ˆæŠ¤è¿›ç¨‹ï¼ˆå¦‚æ—¥å¿—æœåŠ¡ï¼‰é€šè¿‡TTYè¾“å‡ºè°ƒè¯•ä¿¡æ¯[6](@ref)ã€‚
------
### âš ï¸ **å¸¸è§é—®é¢˜ä¸è§£å†³**
1. **TTYæƒé™é”™è¯¯**
- **é—®é¢˜**ï¼šæ™®é€šç”¨æˆ·æ— æ³•è®¿é—®`/dev/tty1`ã€‚
- **è§£å†³**ï¼šä¿®æ”¹`/etc/securetty`æ–‡ä»¶ï¼Œæ·»åŠ å…è®¸ç™»å½•çš„è®¾å¤‡å[4](@ref)ã€‚
2. **ä¼ªç»ˆç«¯è¿æ¥æ–­å¼€**
- **é—®é¢˜**ï¼šSSHä¼šè¯å› ç½‘ç»œæ³¢åŠ¨ä¸­æ–­ã€‚
- **è§£å†³**ï¼šå®¢æˆ·ç«¯è®¾ç½®`ServerAliveInterval`ä¿æ´»å‚æ•°ï¼Œæˆ–æœåŠ¡ç«¯è°ƒæ•´è¶…æ—¶æ—¶é—´[1](@ref)ã€‚
3. **è¾“å…¥/è¾“å‡ºå¼‚å¸¸**
- **é—®é¢˜**ï¼šTTYä¸­é”®ç›˜è¾“å…¥æ— å“åº”æˆ–æ˜¾ç¤ºä¹±ç ã€‚
- **è§£å†³**ï¼šæ£€æŸ¥ç»ˆç«¯å±æ€§é…ç½®ï¼ˆå¦‚æ³¢ç‰¹ç‡ã€æ•°æ®ä½ï¼‰ï¼Œä½¿ç”¨`stty`å‘½ä»¤é‡ç½®è®¾ç½®[3,7](@ref)ã€‚
------
### ğŸ’ **æ€»ç»“**
TTYæ˜¯è´¯ç©¿è®¡ç®—æœºå†å²çš„**äº¤äº’æ¥å£åŸºçŸ³**ï¼Œä»ç‰©ç†ç”µä¼ æ‰“å­—æœºåˆ°ç°ä»£ä¼ªç»ˆç«¯ï¼ˆPTSï¼‰ï¼Œå§‹ç»ˆæ‰¿æ‹…ç€**ç”¨æˆ·ä¸ç³»ç»Ÿé—´æ–‡æœ¬é€šä¿¡çš„æ¡¥æ¢ä½œç”¨**ã€‚ç†è§£å…¶ç±»å‹å·®å¼‚ï¼ˆç‰©ç†/Virtual/PTSï¼‰å’Œå·¥ä½œåŸç†ï¼ˆå¦‚ptmx-PTSæ•°æ®æµï¼‰ï¼Œå¯¹ç³»ç»Ÿç®¡ç†ã€è¿œç¨‹è¿ç»´å’Œè°ƒè¯•è‡³å…³é‡è¦[4,6,10](@ref)ã€‚
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>ã€Docker Composeã€‘Notes</title><link>https://dyhes.github.io/p/docker-composenotes/</link><pubDate>Wed, 14 May 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/docker-composenotes/</guid><description>&lt;h2 id="version"&gt;Version
&lt;/h2&gt;&lt;p&gt;åœ¨ &lt;code&gt;docker-compose.yaml&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œç¬¬ä¸€è¡Œçš„ &lt;code&gt;version&lt;/code&gt; å­—æ®µç”¨äºæŒ‡å®šå½“å‰æ–‡ä»¶éµå¾ªçš„ Docker Compose é…ç½®è§„èŒƒç‰ˆæœ¬ã€‚å®ƒçš„ä½œç”¨ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="å®šä¹‰è¯­æ³•ä¸åŠŸèƒ½æ”¯æŒ"&gt;&lt;strong&gt;å®šä¹‰è¯­æ³•ä¸åŠŸèƒ½æ”¯æŒ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;version&lt;/code&gt; å†³å®šäº† Compose æ–‡ä»¶ä½¿ç”¨çš„è¯­æ³•è§„åˆ™å’Œå¯ç”¨åŠŸèƒ½ã€‚ä¸åŒç‰ˆæœ¬çš„ Compose è§„èŒƒæ”¯æŒä¸åŒçš„é…ç½®é¡¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬ 2&lt;/strong&gt;ï¼šå¼•å…¥ &lt;code&gt;services&lt;/code&gt; é¡¶çº§é”®ï¼Œæ”¯æŒèµ„æºé™åˆ¶ï¼ˆå¦‚ CPUã€å†…å­˜ï¼‰ã€å®¹å™¨ä¾èµ–ç®¡ç†ã€ç½‘ç»œå’Œå·çš„é«˜çº§é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬ 3&lt;/strong&gt;ï¼šå…¼å®¹ Docker Swarm é›†ç¾¤æ¨¡å¼ï¼Œæ”¯æŒæ»šåŠ¨æ›´æ–°ã€æœåŠ¡æ‰©å±•ç­‰ç¼–æ’åŠŸèƒ½ï¼Œé€‚ç”¨äºå¤šä¸»æœºéƒ¨ç½²åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´é«˜ç‰ˆæœ¬ï¼ˆå¦‚ 3.8ï¼‰&lt;/strong&gt;ï¼šé€æ­¥æ–°å¢ç‰¹æ€§ï¼ˆå¦‚ GPU èµ„æºåˆ†é…ã€å¥åº·æ£€æŸ¥å¢å¼ºç­‰ï¼‰ï¼ŒåŒæ—¶ä¿æŒå‘åå…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‹¥æœªæ˜¾å¼æŒ‡å®š &lt;code&gt;version&lt;/code&gt;ï¼Œé»˜è®¤è¡Œä¸ºå›  Docker Compose ç‰ˆæœ¬è€Œå¼‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—§ç‰ˆå·¥å…·ï¼ˆå¦‚ Docker Compose v1/v2ï¼‰å¯èƒ½é»˜è®¤ä½¿ç”¨ç‰ˆæœ¬ 2 çš„è¯­æ³•ï¼›&lt;/li&gt;
&lt;li&gt;æ–°ç‰ˆå·¥å…·ï¼ˆå¦‚ Compose V2+ï¼‰æ”¯æŒæ—  &lt;code&gt;version&lt;/code&gt; å£°æ˜ï¼Œç›´æ¥éµå¾ªæœ€æ–°çš„ &lt;a class="link" href="https://compose-spec.io/" target="_blank" rel="noopener"
&gt;Compose è§„èŒƒ&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="ä¸-docker-å¼•æ“çš„å…¼å®¹æ€§"&gt;&lt;strong&gt;ä¸ Docker å¼•æ“çš„å…¼å®¹æ€§&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker Compose æ–‡ä»¶ç‰ˆæœ¬éœ€ä¸ Docker å¼•æ“ç‰ˆæœ¬åŒ¹é…ï¼Œå¦åˆ™å¯èƒ½å› è¯­æ³•ä¸å…¼å®¹å¯¼è‡´æŠ¥é”™ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;version: '3.8'&lt;/code&gt; è¦æ±‚ Docker Engine &lt;strong&gt;19.03.0+&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;version: '3'&lt;/code&gt; æœ€ä½è¦æ±‚ Docker Engine &lt;strong&gt;1.13.0+&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;è‹¥ä½¿ç”¨æ—§ç‰ˆ Dockerï¼ˆå¦‚ 17.06ï¼‰ï¼Œéœ€é€‰æ‹© &lt;code&gt;version: '3.3'&lt;/code&gt; æˆ–æ›´ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="åºŸå¼ƒä¸æ¼”è¿›"&gt;&lt;strong&gt;åºŸå¼ƒä¸æ¼”è¿›&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—§ç‰ˆæœ¬ï¼ˆå¦‚ v1ï¼‰&lt;/strong&gt;ï¼šå·²åºŸå¼ƒï¼Œä»…æ”¯æŒåŸºç¡€é…ç½®ï¼Œä¸æ¨èä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–°ç‰ˆè§„èŒƒè¶‹åŠ¿&lt;/strong&gt;ï¼šå®˜æ–¹é€æ­¥å¼±åŒ–å¯¹ &lt;code&gt;version&lt;/code&gt; çš„å¼ºåˆ¶è¦æ±‚ã€‚è‹¥æ–‡ä»¶æœªå£°æ˜ &lt;code&gt;version&lt;/code&gt;ï¼Œé»˜è®¤é‡‡ç”¨æœ€æ–°è§„èŒƒï¼ŒåŒæ—¶å¯èƒ½è§¦å‘è­¦å‘Šï¼ˆå¦‚ &lt;code&gt;WARN[0000] version is obsolete&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èåšæ³•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•æœºç¯å¢ƒ&lt;/strong&gt;ï¼šå¯çœç•¥ &lt;code&gt;version&lt;/code&gt;ï¼Œç›´æ¥ä½¿ç”¨æœ€æ–°è¯­æ³•ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤æˆ–éœ€æ˜ç¡®ç‰ˆæœ¬æ§åˆ¶&lt;/strong&gt;ï¼šæ˜¾å¼å£°æ˜ç‰ˆæœ¬ï¼ˆå¦‚ &lt;code&gt;3.8&lt;/code&gt;ï¼‰ä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="ç¤ºä¾‹ä¸é€‰æ‹©å»ºè®®"&gt;ç¤ºä¾‹ä¸é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# å£°æ˜ä½¿ç”¨ 3.8 ç‰ˆæœ¬è§„èŒƒï¼ˆéœ€ Docker 19.03.0+ï¼‰&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nginx&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;deploy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# æ­¤é…ç½®é¡¹ä»…åœ¨ç‰ˆæœ¬ 3+ ä¸­æœ‰æ•ˆ&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;replicas&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼š&lt;code&gt;version&lt;/code&gt; ä¸»è¦ç”¨äºæ§åˆ¶è¯­æ³•è§£æè§„åˆ™å’ŒåŠŸèƒ½èŒƒå›´ï¼Œéœ€æ ¹æ® Docker ç¯å¢ƒç‰ˆæœ¬å’Œéœ€æ±‚é€‰æ‹©ã€‚æ–°ç‰ˆå¼€å‘ä¸­å¯é€æ­¥è¿‡æ¸¡åˆ°æ—  &lt;code&gt;version&lt;/code&gt; å£°æ˜ï¼Œä»¥ç®€åŒ–é…ç½®ã€‚&lt;/p&gt;
&lt;h2 id="volumns-ä¸è®¾ç½®"&gt;Volumns ä¸è®¾ç½®
&lt;/h2&gt;&lt;p&gt;åœ¨ Docker Compose ä¸­ï¼Œ&lt;strong&gt;ä¸è®¾ç½® &lt;code&gt;volumes&lt;/code&gt; å­—æ®µæ—¶ï¼ŒDocker ä¸ä¼šè‡ªåŠ¨åˆ›å»ºä»»ä½•å®¿ä¸»æœºç›®å½•æˆ–æ•°æ®å·&lt;/strong&gt;ï¼Œæ­¤æ—¶å®¹å™¨å†…çš„æ•°æ®ä»…å­˜å‚¨åœ¨å®¹å™¨çš„å¯å†™å±‚ä¸­ï¼Œä¸”å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="æ•°æ®å­˜å‚¨æ–¹å¼"&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨æ–¹å¼&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼šä¸é…ç½® &lt;code&gt;volumes&lt;/code&gt; æ—¶ï¼Œå®¹å™¨å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸å®¿ä¸»æœºå®Œå…¨éš”ç¦»ï¼Œæ‰€æœ‰æ•°æ®ä»…åœ¨å®¹å™¨å†…éƒ¨ä¸´æ—¶å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šå½“å®¹å™¨è¢«åˆ é™¤æˆ–é‡å»ºæ—¶ï¼Œæ‰€æœ‰æœªæŒä¹…åŒ–çš„æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="è‡ªåŠ¨åˆ›å»ºçš„æ¡ä»¶"&gt;&lt;strong&gt;è‡ªåŠ¨åˆ›å»ºçš„æ¡ä»¶&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;è‹¥éœ€ Docker è‡ªåŠ¨åˆ›å»ºç›®å½•æˆ–å·ï¼Œéœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼å®šä¹‰ &lt;code&gt;volumes&lt;/code&gt;&lt;/strong&gt;ï¼šå¿…é¡»é€šè¿‡ &lt;code&gt;volumes&lt;/code&gt; å­—æ®µæ˜ç¡®æŒ‡å®šå®¿ä¸»æœºè·¯å¾„ï¼ˆå¦‚ &lt;code&gt;- /host/path:/container/path&lt;/code&gt;ï¼‰æˆ–å‘½åå·ï¼ˆå¦‚ &lt;code&gt;- my_volume:/container/path&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¿ä¸»æœºè·¯å¾„ä¸å­˜åœ¨æ—¶&lt;/strong&gt;ï¼šå½“ä½¿ç”¨ç»‘å®šæŒ‚è½½ï¼ˆ&lt;code&gt;bind&lt;/code&gt; æ¨¡å¼ï¼‰ä¸”å®¿ä¸»æœºç›®å½•ä¸å­˜åœ¨æ—¶ï¼ŒDocker ä¼šå°è¯•è‡ªåŠ¨åˆ›å»ºè¯¥ç›®å½•ï¼Œä½†å¯èƒ½å› æƒé™é—®é¢˜å¯¼è‡´å®¹å™¨æ— æ³•å†™å…¥ï¼ˆè‡ªåŠ¨åˆ›å»ºçš„ç›®å½•æƒé™é»˜è®¤å½’å± &lt;code&gt;root&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="æ¨èåšæ³•"&gt;&lt;strong&gt;æ¨èåšæ³•&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼å®šä¹‰æŒä¹…åŒ–è·¯å¾„&lt;/strong&gt;ï¼šè‹¥éœ€æ•°æ®æŒä¹…åŒ–ï¼Œåº”åœ¨ &lt;code&gt;volumes&lt;/code&gt; ä¸­æ˜ç¡®é…ç½®å®¿ä¸»æœºè·¯å¾„æˆ–å‘½åå·ã€‚ä¾‹å¦‚ï¼š
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;./data:/app/data &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# è‡ªåŠ¨åˆ›å»ºå®¿ä¸»æœºç›®å½•ï¼ˆéœ€æ³¨æ„æƒé™ï¼‰&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;db_volume:/var/lib/mysql &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ä½¿ç”¨å‘½åå·è‡ªåŠ¨ç®¡ç†&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;db_volume&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨åˆ›å»ºå®¿ä¸»æœºç›®å½•&lt;/strong&gt;ï¼šå¯¹äºå…³é”®ç›®å½•ï¼ˆå¦‚é…ç½®æ–‡ä»¶ã€æ—¥å¿—è·¯å¾„ï¼‰ï¼Œå»ºè®®æå‰æ‰‹åŠ¨åˆ›å»ºå¹¶è®¾ç½®æƒé™ï¼ˆå¦‚ &lt;code&gt;chmod 777 /host/path&lt;/code&gt;ï¼‰ï¼Œé¿å…è‡ªåŠ¨åˆ›å»ºå¼•å‘çš„æƒé™é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨å‘½åå·&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦è·¨å®¹å™¨å…±äº«æˆ–é•¿æœŸå­˜å‚¨çš„æ•°æ®ï¼Œä¼˜å…ˆä½¿ç”¨ Docker ç®¡ç†çš„å‘½åå·ï¼ˆ&lt;code&gt;volumes&lt;/code&gt; æ¨¡å¼ï¼‰ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼Œä¸”æƒé™æ›´æ˜“æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="æ¨¡å¼å¯¹æ¯”"&gt;æ¨¡å¼å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ˜¯å¦éœ€è¦æ˜¾å¼å®šä¹‰ &lt;code&gt;volumes&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®æŒä¹…åŒ–&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è‡ªåŠ¨åˆ›å»ºç›®å½•&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æœªé…ç½® &lt;code&gt;volumes&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶æµ‹è¯•ã€æ— éœ€ä¿å­˜æ•°æ®çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç»‘å®šæŒ‚è½½ï¼ˆ&lt;code&gt;bind&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ˜¯ï¼ˆæœ‰æ¡ä»¶ï¼‰&lt;/td&gt;
&lt;td&gt;å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶æ˜ å°„ã€æ—¥å¿—æ”¶é›†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å‘½åå·ï¼ˆ&lt;code&gt;volume&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ˜¯ï¼ˆè‡ªåŠ¨ç®¡ç†ï¼‰&lt;/td&gt;
&lt;td&gt;ç”Ÿäº§ç¯å¢ƒæ•°æ®æŒä¹…åŒ–ã€å¤šå®¹å™¨å…±äº«æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼šDocker Compose ä»…åœ¨æ˜¾å¼é…ç½® &lt;code&gt;volumes&lt;/code&gt; æ—¶æ‰ä¼šæ ¹æ®è§„åˆ™è‡ªåŠ¨åˆ›å»ºç›®å½•æˆ–å·ã€‚è‹¥éœ€æ•°æ®æŒä¹…åŒ–ï¼ŒåŠ¡å¿…é€šè¿‡ &lt;code&gt;volumes&lt;/code&gt; å­—æ®µå®šä¹‰è·¯å¾„æˆ–å‘½åå·ï¼Œå¹¶ä¼˜å…ˆé€šè¿‡æ‰‹åŠ¨ç®¡ç†ç›®å½•æƒé™ä»¥é¿å…è¿è¡Œæ—¶é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="volumes-è¯­æ³•"&gt;Volumes è¯­æ³•
&lt;/h2&gt;&lt;p&gt;åœ¨ Docker Compose ä¸­ï¼Œ&lt;code&gt;volumes&lt;/code&gt; ç”¨äºå®šä¹‰å®¹å™¨ä¸å®¿ä¸»æœºä¹‹é—´çš„æ•°æ®æŒ‚è½½è§„åˆ™ï¼Œæ”¯æŒå¤šç§è¯­æ³•æ ¼å¼å’Œé…ç½®é€‰é¡¹ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒè¯­æ³•è§„åˆ™åŠä½¿ç”¨åœºæ™¯çš„æ€»ç»“ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="çŸ­æ ¼å¼short-syntax"&gt;&lt;strong&gt;çŸ­æ ¼å¼ï¼ˆShort Syntaxï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;çŸ­æ ¼å¼æ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸ç”¨çš„ç®€æ´å†™æ³•ï¼Œé€‚ç”¨äºå¿«é€Ÿå®šä¹‰ç®€å•çš„æ•°æ®æŒ‚è½½éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h4 id="åŸºæœ¬ç»“æ„"&gt;&lt;strong&gt;åŸºæœ¬ç»“æ„&lt;/strong&gt;
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="l"&gt;å®¿ä¸»æœºè·¯å¾„|å·å]:[å®¹å™¨è·¯å¾„]:[æƒé™]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="å¸¸è§ç”¨æ³•ç¤ºä¾‹"&gt;&lt;strong&gt;å¸¸è§ç”¨æ³•ç¤ºä¾‹&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»‘å®šæŒ‚è½½ï¼ˆBind Mountï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;- /host/path:/container/path&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†å®¿ä¸»æœºçš„ &lt;code&gt;/host/path&lt;/code&gt; æ˜ å°„åˆ°å®¹å™¨çš„ &lt;code&gt;/container/path&lt;/code&gt;ï¼Œè·¯å¾„éœ€å­˜åœ¨æˆ–è‡ªåŠ¨åˆ›å»º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹è·¯å¾„ç»‘å®š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;- ./data:/app/data&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»¥ Compose æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸ºåŸºå‡†çš„ç›¸å¯¹è·¯å¾„æ˜ å°„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åªè¯»æƒé™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;- /configs:/etc/configs:ro&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®¹å™¨å†…ç›®å½• &lt;code&gt;/etc/configs&lt;/code&gt; ä»¥åªè¯»æ¨¡å¼æŒ‚è½½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åå·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;- /var/lib/mysql&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®¹å™¨å†…è·¯å¾„æŒ‚è½½åˆ°å®¿ä¸»æœºéšæœºç”Ÿæˆçš„åŒ¿åå·ï¼ˆæ•°æ®ç”Ÿå‘½å‘¨æœŸä¸å®¹å™¨ç»‘å®šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½åå·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;- db_volume:/var/lib/mysql&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨é¢„å®šä¹‰çš„å‘½åå· &lt;code&gt;db_volume&lt;/code&gt;ï¼ˆéœ€åœ¨é¡¶çº§ &lt;code&gt;volumes&lt;/code&gt; å—ä¸­å£°æ˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="é•¿æ ¼å¼long-syntax"&gt;&lt;strong&gt;é•¿æ ¼å¼ï¼ˆLong Syntaxï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;é•¿æ ¼å¼ï¼ˆCompose v3.2+ æ”¯æŒï¼‰æä¾›æ›´ç²¾ç»†çš„é…ç½®é€‰é¡¹ï¼Œé€‚ç”¨äºå¤æ‚åœºæ™¯ã€‚&lt;/p&gt;
&lt;h4 id="åŸºæœ¬ç»“æ„-1"&gt;&lt;strong&gt;åŸºæœ¬ç»“æ„&lt;/strong&gt;
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;volume|bind|tmpfs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="l"&gt;å®¿ä¸»æœºè·¯å¾„|å·å]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="l"&gt;å®¹å™¨è·¯å¾„]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volume&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;nocopy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="l"&gt;|false &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# æ˜¯å¦ç¦æ­¢å¤åˆ¶å®¹å™¨åˆå§‹æ•°æ®åˆ°æ–°å·&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;read_only&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="l"&gt;|false&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="ç¤ºä¾‹ä¸é…ç½®é¡¹"&gt;&lt;strong&gt;ç¤ºä¾‹ä¸é…ç½®é¡¹&lt;/strong&gt;
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;bind &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ç»‘å®šå®¿ä¸»æœºç›®å½•&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;./static &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# å®¿ä¸»æœºç›¸å¯¹è·¯å¾„&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/opt/app/static&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;read_only&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# å®¹å™¨å†…åªè¯»&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;volume &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ä½¿ç”¨å‘½åå·&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;db_data&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/var/lib/mysql&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volume&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;nocopy&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ç¦æ­¢ä»å®¹å™¨å¤åˆ¶åˆå§‹åŒ–æ•°æ®åˆ°æ–°å·&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;tmpfs &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ä¸´æ—¶å†…å­˜æ–‡ä»¶ç³»ç»Ÿ&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/tmp/cache&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;tmpfs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;size&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10000&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# é™åˆ¶å†…å­˜å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id="åŒ¿åå·ä¸å‘½åå·å¯¹æ¯”"&gt;&lt;strong&gt;åŒ¿åå·ä¸å‘½åå·å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å®šä¹‰æ–¹å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åå·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;- /container/path&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;éšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶æ•°æ®å­˜å‚¨ï¼ˆå¦‚æµ‹è¯•ç¯å¢ƒï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½åå·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€åœ¨é¡¶çº§ &lt;code&gt;volumes&lt;/code&gt; å—å£°æ˜&lt;/td&gt;
&lt;td&gt;ç‹¬ç«‹äºå®¹å™¨ï¼Œéœ€æ‰‹åŠ¨åˆ é™¤&lt;/td&gt;
&lt;td&gt;ç”Ÿäº§ç¯å¢ƒæ•°æ®æŒä¹…åŒ–ï¼ˆå¦‚æ•°æ®åº“æ–‡ä»¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;å‘½åå·å®šä¹‰ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;db_data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# é¡¶çº§å®šä¹‰å‘½åå·&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;local&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;driver_opts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;nfs &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ä½¿ç”¨ NFS é©±åŠ¨&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;o&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;addr=192.168.1.100,rw&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id="æ•°æ®æŒä¹…åŒ–ç­–ç•¥"&gt;&lt;strong&gt;æ•°æ®æŒä¹…åŒ–ç­–ç•¥&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼€å‘ç¯å¢ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ç»‘å®šæŒ‚è½½ï¼ˆ&lt;code&gt;bind&lt;/code&gt;ï¼‰å®æ—¶åŒæ­¥ä»£ç å’Œé…ç½®æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼š&lt;code&gt;- ./src:/app/src&lt;/code&gt; å®ç°ä»£ç çƒ­æ›´æ–°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆä½¿ç”¨å‘½åå·ï¼ˆ&lt;code&gt;volume&lt;/code&gt;ï¼‰ä¿è¯æ•°æ®å®‰å…¨æ€§å’Œå¯ç§»æ¤æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ç»“åˆäº‘å­˜å‚¨é©±åŠ¨ï¼ˆå¦‚ AWS EBSã€NFSï¼‰å®ç°è·¨ä¸»æœºå…±äº«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸´æ—¶æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;tmpfs&lt;/code&gt; ç±»å‹å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé¿å…ç£ç›˜ I/O å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="æ³¨æ„äº‹é¡¹"&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¯å¾„å­˜åœ¨æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»‘å®šæŒ‚è½½æ—¶ï¼Œè‹¥å®¿ä¸»æœºè·¯å¾„ä¸å­˜åœ¨ï¼ŒDocker ä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•ï¼ˆéœ€æ³¨æ„æƒé™é—®é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æƒé™å†²çª&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¹å™¨å†…è¿›ç¨‹éœ€æœ‰æƒé™è¯»å†™æŒ‚è½½è·¯å¾„ï¼Œå¯é€šè¿‡ &lt;code&gt;chmod&lt;/code&gt; æå‰è®¾ç½®å®¿ä¸»æœºç›®å½•æƒé™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬å…¼å®¹æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é•¿æ ¼å¼éœ€ Compose æ–‡ä»¶ç‰ˆæœ¬ â‰¥ &lt;code&gt;3.2&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘½åå·å¯é€šè¿‡ &lt;code&gt;docker volume inspect&lt;/code&gt; æŸ¥çœ‹ç‰©ç†è·¯å¾„ï¼Œä¾¿äºå¤‡ä»½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="å®Œæ•´ç¤ºä¾‹"&gt;&lt;strong&gt;å®Œæ•´ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;mysql:8.0&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;db_data:/var/lib/mysql &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# å‘½åå·æŒä¹…åŒ–æ•°æ®&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;./my.cnf:/etc/mysql/my.cnf &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# ç»‘å®šé…ç½®æ–‡ä»¶ï¼ˆåªè¯»ï¼‰&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;MYSQL_ROOT_PASSWORD=secret&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;db_data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# å®šä¹‰å‘½åå·&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;local&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡åˆç†é€‰æ‹© &lt;code&gt;volumes&lt;/code&gt; è¯­æ³•ï¼Œå¯çµæ´»ç®¡ç†å®¹å™¨æ•°æ®ï¼Œæ»¡è¶³å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§å¤šåœºæ™¯éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id="build"&gt;build
&lt;/h2&gt;&lt;p&gt;Docker Compose çš„ &lt;code&gt;build&lt;/code&gt; å‘½ä»¤ç”¨äºæ ¹æ® &lt;code&gt;docker-compose.yml&lt;/code&gt; æ–‡ä»¶ä¸­çš„é…ç½®æ„å»ºæœåŠ¡é•œåƒï¼Œæ˜¯ç®¡ç†å¤šå®¹å™¨åº”ç”¨çš„æ ¸å¿ƒå‘½ä»¤ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŠŸèƒ½å’Œç”¨æ³•è¯¦è§£ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="åŸºæœ¬ç”¨æ³•"&gt;åŸºæœ¬ç”¨æ³•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ„å»ºæ‰€æœ‰æœåŠ¡é•œåƒ&lt;/strong&gt;&lt;br&gt;
é»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code&gt;docker-compose build&lt;/code&gt; ä¼šè¯»å– &lt;code&gt;docker-compose.yml&lt;/code&gt; æ–‡ä»¶ä¸­æ‰€æœ‰å®šä¹‰äº† &lt;code&gt;build&lt;/code&gt; é…ç½®çš„æœåŠ¡ï¼Œå¹¶ä¾æ¬¡æ„å»ºå®ƒä»¬çš„é•œåƒã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;./app &lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c"&gt;# æŒ‡å®šæ„å»ºä¸Šä¸‹æ–‡ç›®å½•&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;api&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;./api&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œ &lt;code&gt;docker-compose build&lt;/code&gt; å°†åŒæ—¶æ„å»º &lt;code&gt;web&lt;/code&gt; å’Œ &lt;code&gt;api&lt;/code&gt; æœåŠ¡çš„é•œåƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ„å»ºæŒ‡å®šæœåŠ¡é•œåƒ&lt;/strong&gt;&lt;br&gt;
è‹¥åªéœ€æ„å»ºéƒ¨åˆ†æœåŠ¡ï¼Œå¯åœ¨å‘½ä»¤åæ·»åŠ æœåŠ¡åç§°ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build web &lt;span class="c1"&gt;# ä»…æ„å»º web æœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="å¸¸ç”¨é€‰é¡¹ä¸å‚æ•°"&gt;å¸¸ç”¨é€‰é¡¹ä¸å‚æ•°
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼ºåˆ¶ä¸ä½¿ç”¨ç¼“å­˜ï¼ˆ&lt;code&gt;--no-cache&lt;/code&gt;ï¼‰&lt;/strong&gt;&lt;br&gt;
é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker ä¼šåˆ©ç”¨ç¼“å­˜å±‚åŠ é€Ÿæ„å»ºã€‚ä½¿ç”¨ &lt;code&gt;--no-cache&lt;/code&gt; å¯è·³è¿‡ç¼“å­˜ï¼Œä»å¤´å¼€å§‹æ„å»ºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --no-cache
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‹‰å–æœ€æ–°åŸºç¡€é•œåƒï¼ˆ&lt;code&gt;--pull&lt;/code&gt;ï¼‰&lt;/strong&gt;&lt;br&gt;
å¼ºåˆ¶ä»é•œåƒä»“åº“æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„ &lt;code&gt;FROM&lt;/code&gt; åŸºç¡€é•œåƒï¼Œç¡®ä¿æ„å»ºåŸºäºæœ€æ–°ä¾èµ–ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --pull
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶è¡Œæ„å»ºï¼ˆ&lt;code&gt;--parallel&lt;/code&gt;ï¼‰&lt;/strong&gt;&lt;br&gt;
åœ¨ Docker Compose 3.4+ ç‰ˆæœ¬ä¸­ï¼Œå¯é€šè¿‡ &lt;code&gt;--parallel&lt;/code&gt; å¹¶è¡Œæ„å»ºå¤šä¸ªæœåŠ¡ï¼Œç¼©çŸ­æ„å»ºæ—¶é—´ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --parallel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼ é€’æ„å»ºå‚æ•°ï¼ˆ&lt;code&gt;--build-arg&lt;/code&gt;ï¼‰&lt;/strong&gt;&lt;br&gt;
å‘ Dockerfile ä¼ é€’åŠ¨æ€å‚æ•°ï¼Œä¾‹å¦‚ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --build-arg &lt;span class="nv"&gt;APP_ENV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;production
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿ç•™ä¸­é—´å®¹å™¨ï¼ˆ&lt;code&gt;--no-rm&lt;/code&gt;ï¼‰&lt;/strong&gt;&lt;br&gt;
é»˜è®¤æ„å»ºåä¼šåˆ é™¤ä¸­é—´å®¹å™¨ï¼Œæ·»åŠ æ­¤é€‰é¡¹å¯ä¿ç•™ç”¨äºè°ƒè¯•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --no-rm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="é…ç½®æ–‡ä»¶ä¸­çš„-build-å‚æ•°"&gt;é…ç½®æ–‡ä»¶ä¸­çš„ &lt;code&gt;build&lt;/code&gt; å‚æ•°
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;docker-compose.yml&lt;/code&gt; ä¸­ï¼Œ&lt;code&gt;build&lt;/code&gt; éƒ¨åˆ†æ”¯æŒä»¥ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;context&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šæ„å»ºä¸Šä¸‹æ–‡çš„ç›®å½•ï¼ˆåŒ…å« Dockerfile çš„è·¯å¾„ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;dockerfile&lt;/code&gt;&lt;/strong&gt;ï¼šè‡ªå®šä¹‰ Dockerfile æ–‡ä»¶åï¼ˆé»˜è®¤ä¸º &lt;code&gt;Dockerfile&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;args&lt;/code&gt;&lt;/strong&gt;ï¼šå®šä¹‰æ„å»ºæ—¶ä¼ é€’çš„å˜é‡ï¼Œéœ€åœ¨ Dockerfile ä¸­é€šè¿‡ &lt;code&gt;ARG&lt;/code&gt; å£°æ˜ã€‚
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;./app&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Dockerfile.prod&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;APP_VERSION=1.0&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="ä½¿ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹"&gt;ä½¿ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹äº† Dockerfile æˆ–æ„å»ºä¸Šä¸‹æ–‡ä¸­çš„æ–‡ä»¶ï¼ˆå¦‚ä»£ç ã€ä¾èµ–é…ç½®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦æ‰‹åŠ¨æ›´æ–°é•œåƒç‰ˆæœ¬æˆ–ä¼ é€’ç‰¹å®šæ„å»ºå‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸ &lt;code&gt;docker-compose up&lt;/code&gt; çš„åŒºåˆ«&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;docker-compose up&lt;/code&gt; ä¼šè‡ªåŠ¨æ£€æµ‹é•œåƒæ˜¯å¦éœ€è¦é‡æ–°æ„å»ºï¼Œä½†ç›´æ¥ä½¿ç”¨ &lt;code&gt;build&lt;/code&gt; å‘½ä»¤å¯æ›´ç²¾ç»†æ§åˆ¶æ„å»ºè¿‡ç¨‹ï¼ˆä¾‹å¦‚è·³è¿‡ç¼“å­˜ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹¶è¡Œæ„å»ºéœ€ç¡®ä¿æœåŠ¡é—´æ— ä¾èµ–ï¼Œå¦åˆ™å¯èƒ½å¼•å‘æ„å»ºé¡ºåºé—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;æ„å»ºå®Œæˆåéœ€é€šè¿‡ &lt;code&gt;docker-compose up&lt;/code&gt; å¯åŠ¨æœåŠ¡å®¹å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="å®Œæ•´ç¤ºä¾‹-1"&gt;å®Œæ•´ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;./backend&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;dockerfile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Dockerfile.prod&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;NODE_ENV=production&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="s2"&gt;&amp;#34;3000:3000&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;db&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;postgres:14&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†æ„å»º &lt;code&gt;app&lt;/code&gt; æœåŠ¡é•œåƒï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --no-cache --pull app
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;é€šè¿‡çµæ´»ç»„åˆè¿™äº›é€‰é¡¹å’Œé…ç½®ï¼Œå¯ä»¥é«˜æ•ˆç®¡ç† Docker é•œåƒçš„æ„å»ºæµç¨‹ï¼Œç¡®ä¿å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h2 id="rebuild"&gt;rebuild
&lt;/h2&gt;&lt;p&gt;åœ¨ Docker Compose ä¸­æ‰§è¡Œé•œåƒçš„é‡æ–°æ„å»ºï¼ˆRebuildï¼‰å¯é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®ç°ï¼Œé€‚ç”¨äºå¼€å‘è¿‡ç¨‹ä¸­ä»£ç æˆ–é…ç½®å˜æ›´åçš„æ›´æ–°éœ€æ±‚ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="æ ¸å¿ƒå‘½ä»¤åŠç”¨æ³•"&gt;æ ¸å¿ƒå‘½ä»¤åŠç”¨æ³•
&lt;/h3&gt;&lt;h4 id="å•ç‹¬æ‰§è¡Œ"&gt;&lt;strong&gt;å•ç‹¬æ‰§è¡Œ &lt;code&gt;build&lt;/code&gt; å‘½ä»¤&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;docker-compose build&lt;/code&gt; é‡æ–°æ„å»ºæ‰€æœ‰æœåŠ¡çš„é•œåƒï¼Œé»˜è®¤ä½¿ç”¨ç¼“å­˜åŠ é€Ÿæ„å»ºã€‚è‹¥éœ€å¼ºåˆ¶å®Œå…¨é‡å»ºï¼Œéœ€æ·»åŠ å‚æ•°ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# é‡å»ºå…¨éƒ¨æœåŠ¡é•œåƒï¼ˆè·³è¿‡ç¼“å­˜ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --no-cache
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# ä»…é‡å»ºæŒ‡å®šæœåŠ¡ï¼ˆå¦‚ web æœåŠ¡ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --no-cache web
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;--no-cache&lt;/code&gt; å‚æ•°ç¦ç”¨ç¼“å­˜ï¼Œç¡®ä¿ä»å¤´å¼€å§‹æ„å»ºé•œåƒã€‚&lt;/p&gt;
&lt;h4 id="ç»“åˆ"&gt;&lt;strong&gt;ç»“åˆ &lt;code&gt;up&lt;/code&gt; å‘½ä»¤è§¦å‘é‡å»º&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;docker-compose up&lt;/code&gt; çš„ &lt;code&gt;--build&lt;/code&gt; å‚æ•°ï¼Œå¯åœ¨å¯åŠ¨æœåŠ¡æ—¶è‡ªåŠ¨æ‰§è¡Œé•œåƒé‡å»ºï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# é‡å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆæ¨èå¼€å‘è°ƒè¯•ä½¿ç”¨ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose up --build
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# åå°è¿è¡Œå¹¶å¼ºåˆ¶é‡å»ºæŒ‡å®šæœåŠ¡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose up -d --build web
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ–¹å¼ä¼šå…ˆæ‰§è¡Œæ„å»ºæµç¨‹å†å¯åŠ¨å®¹å™¨ï¼Œé€‚åˆéœ€è¦å¿«é€ŸéªŒè¯å˜æ›´çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="é«˜çº§é…ç½®ä¸å‚æ•°"&gt;é«˜çº§é…ç½®ä¸å‚æ•°
&lt;/h3&gt;&lt;h4 id="æ‹‰å–æœ€æ–°åŸºç¡€é•œåƒ"&gt;&lt;strong&gt;æ‹‰å–æœ€æ–°åŸºç¡€é•œåƒ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;--pull&lt;/code&gt; å‚æ•°å¼ºåˆ¶ä»é•œåƒä»“åº“æ›´æ–° &lt;code&gt;FROM&lt;/code&gt; æŒ‡ä»¤ä¸­çš„åŸºç¡€é•œåƒï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --pull
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¡®ä¿æ„å»ºåŸºäºæœ€æ–°ä¾èµ–ç¯å¢ƒï¼Œé¿å…åŸºç¡€é•œåƒè¿‡æœŸé—®é¢˜ã€‚&lt;/p&gt;
&lt;h4 id="ä¼ é€’æ„å»ºå‚æ•°"&gt;&lt;strong&gt;ä¼ é€’æ„å»ºå‚æ•°&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;åœ¨ &lt;code&gt;docker-compose.yml&lt;/code&gt; ä¸­å®šä¹‰ &lt;code&gt;args&lt;/code&gt; æˆ–é€šè¿‡å‘½ä»¤è¡ŒåŠ¨æ€æ³¨å…¥å˜é‡ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# docker-compose.yml é…ç½®ç¤ºä¾‹&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;services&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;context&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;.&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;APP_ENV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;production&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‘½ä»¤è¡Œè¦†ç›–å‚æ•°ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --build-arg &lt;span class="nv"&gt;APP_ENV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;staging
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€‚ç”¨äºç¯å¢ƒå·®å¼‚é…ç½®ï¼ˆå¦‚å¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id="å¹¶è¡Œæ„å»ºåŠ é€Ÿ"&gt;&lt;strong&gt;å¹¶è¡Œæ„å»ºåŠ é€Ÿ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;åœ¨ Docker Compose 3.4+ ç‰ˆæœ¬ä¸­ï¼Œå¯ç”¨å¹¶è¡Œæ„å»ºç¼©çŸ­å¤šæœåŠ¡é‡å»ºæ—¶é—´ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --parallel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éœ€ç¡®ä¿æœåŠ¡é—´æ— æ„å»ºé¡ºåºä¾èµ–ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="æ¸…ç†ä¸è°ƒè¯•æŠ€å·§"&gt;æ¸…ç†ä¸è°ƒè¯•æŠ€å·§
&lt;/h3&gt;&lt;h4 id="åˆ é™¤æ—§å®¹å™¨ä¸ä¸­é—´å±‚"&gt;&lt;strong&gt;åˆ é™¤æ—§å®¹å™¨ä¸ä¸­é—´å±‚&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;é‡å»ºå‰å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¸…ç†ç¯å¢ƒï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å…³è”å®¹å™¨ï¼ˆä¿ç•™æ•°æ®å·ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose down
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# åˆ é™¤æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸´æ—¶å®¹å™¨ï¼ˆé¿å…æ®‹ç•™å¹²æ‰°ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --force-rm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;--force-rm&lt;/code&gt; å‚æ•°å¼ºåˆ¶åˆ é™¤ä¸­é—´å®¹å™¨ã€‚&lt;/p&gt;
&lt;h4 id="æŸ¥çœ‹æ„å»ºæ—¥å¿—"&gt;&lt;strong&gt;æŸ¥çœ‹æ„å»ºæ—¥å¿—&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;é€šè¿‡æ—¥å¿—æ’æŸ¥æ„å»ºå¤±è´¥åŸå› ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose logs --tail&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt; web
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç»“åˆ &lt;code&gt;docker-compose config&lt;/code&gt; éªŒè¯é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="å…¸å‹åœºæ™¯ç¤ºä¾‹"&gt;å…¸å‹åœºæ™¯ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="å…¨é‡é‡å»ºå¹¶å¯åŠ¨æœåŠ¡"&gt;&lt;strong&gt;å…¨é‡é‡å»ºå¹¶å¯åŠ¨æœåŠ¡&lt;/strong&gt;
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose down &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker-compose build --no-cache &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker-compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€‚ç”¨äºä»£ç æˆ–ä¾èµ–é¡¹å¤§è§„æ¨¡å˜æ›´åçš„ç¯å¢ƒåˆ·æ–°ã€‚&lt;/p&gt;
&lt;h4 id="å¢é‡æ›´æ–°æŒ‡å®šæœåŠ¡"&gt;&lt;strong&gt;å¢é‡æ›´æ–°æŒ‡å®šæœåŠ¡&lt;/strong&gt;
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker-compose build --pull web &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker-compose up -d web
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»…æ›´æ–° &lt;code&gt;web&lt;/code&gt; æœåŠ¡ï¼Œå‡å°‘å¯¹å…¶ä»–æœåŠ¡çš„å½±å“ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;é€šè¿‡çµæ´»ç»„åˆä¸Šè¿°å‘½ä»¤ï¼Œå¯é«˜æ•ˆç®¡ç†é•œåƒé‡å»ºæµç¨‹ï¼Œå…¼é¡¾å¼€å‘æ•ˆç‡ä¸éƒ¨ç½²ç¨³å®šæ€§ã€‚å»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©å‚æ•°ç»„åˆï¼Œå¹¶é€šè¿‡ &lt;code&gt;docker-compose help build&lt;/code&gt; æŸ¥çœ‹å®Œæ•´é€‰é¡¹è¯´æ˜ã€‚&lt;/p&gt;</description></item><item><title>ã€Redisã€‘In Spring Boot</title><link>https://dyhes.github.io/p/redisin-spring-boot/</link><pubDate>Mon, 23 Sep 2024 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/redisin-spring-boot/</guid><description>&lt;h2 id="dependency"&gt;dependency
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;groupId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;springframework&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;boot&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;groupId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;artifactId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;spring&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;starter&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;redis&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;artifactId&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="applicationproperties"&gt;application.properties
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;spring&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;data&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;redis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="n"&gt;spring&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;data&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;redis&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;6379&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="composeyaml"&gt;compose.yaml
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-dockerfile" data-lang="dockerfile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;redis:&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; &lt;span class="c1"&gt;# ä¸ â€™redis:latest&amp;#39; subtle differences&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; image: redis:latest&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; container_name: postopia-redis&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; ports:&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;&lt;/span&gt; - &lt;span class="s2"&gt;&amp;#34;6379:6379&amp;#34;&lt;/span&gt;&lt;span class="err"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="config"&gt;Config
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Configuration&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RedisConfig&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Bean&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RedisConnectionFactory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;redisConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LettuceConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Bean&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RedisConnectionFactory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;connectionFactory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setConnectionFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;connectionFactory&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Use String serializers for keys&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setKeySerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;StringRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setValueSerializer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;StringRedisSerializer&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="service"&gt;Service
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nd"&gt;@Service&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RedisService&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Autowired&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;RedisTemplate&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;setByMinute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minute&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;minute&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TimeUnit&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MINUTES&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;opsForValue&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;redisTemplate&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>ã€Dockerã€‘Postgres</title><link>https://dyhes.github.io/p/dockerpostgres/</link><pubDate>Thu, 19 Sep 2024 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/dockerpostgres/</guid><description>&lt;p&gt;Postgres Docker Image&lt;/p&gt;
&lt;p&gt;Container &amp;gt; Image&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;psql -U &lt;span class="o"&gt;{&lt;/span&gt;username&lt;span class="o"&gt;}&lt;/span&gt; -d &lt;span class="o"&gt;{&lt;/span&gt;database&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>ã€Dockerã€‘Introduction</title><link>https://dyhes.github.io/p/dockerintroduction/</link><pubDate>Tue, 21 Mar 2023 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/dockerintroduction/</guid><description>&lt;h2 id="what-is-docker"&gt;What is Docker
&lt;/h2&gt;&lt;p&gt;Docker is an open source platform for building, deploying, and managing containerized applications.&lt;/p&gt;
&lt;p&gt;It enables developers to package applications into containersâ€”standardized &lt;strong&gt;executable components&lt;/strong&gt; combining &lt;strong&gt;application source code&lt;/strong&gt; with the o&lt;strong&gt;perating system (OS) libraries and dependencies&lt;/strong&gt; required to run that code in any environment.&lt;/p&gt;
&lt;p&gt;Developers can create containers &lt;strong&gt;without&lt;/strong&gt; Docker, but the platform makes it &lt;strong&gt;easier, simpler, and safer&lt;/strong&gt; to build, deploy and manage containers.&lt;/p&gt;
&lt;p&gt;Docker is essentially a &lt;strong&gt;toolkit&lt;/strong&gt; that enables developers to build, deploy, run, update, and stop containers using simple commands and work-saving automation through a single API.&lt;/p&gt;
&lt;p&gt;Containers are made possible by &lt;strong&gt;process isolation&lt;/strong&gt; and &lt;strong&gt;virtualization capabilities&lt;/strong&gt; built into the &lt;strong&gt;Linux kernel&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id="docker-tools"&gt;Docker tools
&lt;/h2&gt;&lt;h3 id="dockerfile"&gt;DockerFile
&lt;/h3&gt;&lt;p&gt;Every Docker container &lt;em&gt;&lt;strong&gt;starts with&lt;/strong&gt;&lt;/em&gt; &lt;strong&gt;a simple text file&lt;/strong&gt; containing &lt;strong&gt;instructions&lt;/strong&gt; for how to build the Docker container image. &lt;em&gt;DockerFile&lt;/em&gt; &lt;strong&gt;automates&lt;/strong&gt; the process of Docker image creation. Itâ€™s essentially a list of command-line interface (CLI) instructions that Docker Engine will run in order to assemble the image.&lt;/p&gt;
&lt;h3 id="docker-images"&gt;Docker images
&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Docker images&lt;/em&gt; contain &lt;strong&gt;executable application source code&lt;/strong&gt; as well as all the &lt;strong&gt;tools, libraries, and dependencies&lt;/strong&gt; that the application code needs to run as a container.&lt;/p&gt;
&lt;p&gt;When you run the Docker image, it &lt;strong&gt;becomes one instance&lt;/strong&gt; (or multiple instances) of the container.&lt;/p&gt;
&lt;p&gt;Multiple Docker images can be created from a single base image, and theyâ€™ll share the commonalities of their stack.&lt;/p&gt;
&lt;p&gt;Docker images are made up of &lt;em&gt;&lt;strong&gt;layers&lt;/strong&gt;&lt;/em&gt;, and each layer corresponds to &lt;strong&gt;a version&lt;/strong&gt; of the image. Whenever a developer makes changes to the image, a new top layer is created, and this top layer replaces the previous &lt;strong&gt;top layer&lt;/strong&gt; as the &lt;strong&gt;current version&lt;/strong&gt; of the image. Previous layers are saved for &lt;strong&gt;rollbacks&lt;/strong&gt; or to be &lt;strong&gt;re-used&lt;/strong&gt; in other projects.&lt;/p&gt;
&lt;p&gt;Each time a container is created from a Docker image, yet another new layer called the &lt;strong&gt;container layer&lt;/strong&gt; is created. Changes made to the containerâ€”such as the addition or deletion of filesâ€”are saved to the container layer only and exist only while the container is running.&lt;/p&gt;
&lt;p&gt;This iterative image-creation process enables increased &lt;strong&gt;overall efficiency&lt;/strong&gt; since multiple live container instances can run from just a single base image, and when they do so, they leverage a common stack.&lt;/p&gt;
&lt;h3 id="docker-containers"&gt;&lt;strong&gt;Docker containers&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker containers are the &lt;strong&gt;live, running instances&lt;/strong&gt; of Docker images. While Docker images are &lt;strong&gt;read-only&lt;/strong&gt; files, containers are live, ephemeral, executable content. Users can interact with them, and administrators can adjust their settings and conditions using docker commands.&lt;/p&gt;
&lt;h3 id="docker-hub"&gt;&lt;strong&gt;Docker Hub&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker Hub is the &lt;strong&gt;public repository of Docker images&lt;/strong&gt; It includes images that have been produced by Docker, Inc., certified images belonging to the Docker Trusted Registry, and many thousands of other images.&lt;/p&gt;
&lt;p&gt;All Docker Hub users can share their images at will. They can also download predefined base images from the Docker filesystem to use as a starting point for any containerization project.&lt;/p&gt;
&lt;h3 id="docker-daemon"&gt;&lt;strong&gt;Docker daemon&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Docker daemon is a &lt;strong&gt;service&lt;/strong&gt; running on your operating system This service creates and manages your Docker images for you using the commands from the client, acting as the &lt;strong&gt;control center&lt;/strong&gt; of your Docker implementation.&lt;/p&gt;
&lt;h3 id="docker-registry"&gt;&lt;strong&gt;Docker registry&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;A Docker registry is a scalable open-source &lt;strong&gt;storage and distribution system&lt;/strong&gt; for docker images. The registry enables you to track image versions in repositories, using tagging for identification. This is accomplished using git, a version control tool.&lt;/p&gt;
&lt;h3 id="docker-compose"&gt;&lt;strong&gt;Docker Compose&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;If youâ€™re &lt;strong&gt;building an application out of processes in multiple containers&lt;/strong&gt; that all reside on the same host, you can use &lt;em&gt;Docker Compose&lt;/em&gt; to manage the applicationâ€™s architecture. Docker Compose creates a YAML file that specifies which services are included in the application and can deploy and run containers with a single command. Using Docker Compose, you can also define persistent volumes for storage, specify base nodes, and document and configure service dependencies.&lt;/p&gt;
&lt;h3 id="kubernetes"&gt;&lt;strong&gt;Kubernetes&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;To monitor and manage container lifecycles in more complex environments, youâ€™ll need to turn to a &lt;strong&gt;container orchestration tool.&lt;/strong&gt; While Docker includes its own orchestration tool (called Docker Swarm), most developers choose Kubernetes instead.&lt;/p&gt;
&lt;p&gt;Kubernetes is an open-source container orchestration platform descended from a project developed for internal use at Google. Kubernetes schedules and automates tasks integral to the management of container-based architectures, including container deployment, updates, service discovery, storage provisioning, load balancing, health monitoring, and more. In addition, the open source ecosystem of tools for Kubernetesâ€”including Istio and Knativeâ€”enables organizations to deploy a high-productivity Platform-as-a-Service (PaaS) for containerized applications and a faster on-ramp to serverless computing.&lt;/p&gt;</description></item></channel></rss>