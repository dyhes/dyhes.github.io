<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>NowCoder on é£é¸¿è¸é›ªæ³¥</title><link>https://dyhes.github.io/tags/nowcoder/</link><description>Recent content in NowCoder on é£é¸¿è¸é›ªæ³¥</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 20 Oct 2025 22:07:04 +0800</lastBuildDate><atom:link href="https://dyhes.github.io/tags/nowcoder/index.xml" rel="self" type="application/rss+xml"/><item><title>ã€NowCoderã€‘Reference</title><link>https://dyhes.github.io/p/nowcoderreference/</link><pubDate>Mon, 13 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderreference/</guid><description>&lt;h2 id="çº¢é»‘æ ‘"&gt;çº¢é»‘æ ‘
&lt;/h2&gt;&lt;p&gt;çº¢é»‘æ ‘æ˜¯ä¸€ç§é«˜æ•ˆçš„è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒé€šè¿‡ä¸€å¥—ç‰¹å®šçš„è§„åˆ™æ¥ç»´æŠ¤æ ‘çš„è¿‘ä¼¼å¹³è¡¡ï¼Œä»è€Œç¡®ä¿æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾ç­‰æ“ä½œåœ¨æœ€åæƒ…å†µä¸‹ä¹Ÿèƒ½ä¿æŒ &lt;em&gt;O&lt;/em&gt;(log &lt;em&gt;n&lt;/em&gt;) çš„æ—¶é—´å¤æ‚åº¦ã€‚å®ƒåœ¨å¾ˆå¤šé‡è¦çš„ç³»ç»Ÿä¸­éƒ½æœ‰åº”ç”¨ï¼Œä¾‹å¦‚ Linux å†…æ ¸çš„è¿›ç¨‹è°ƒåº¦å’Œ C++ STL ä¸­çš„ map å’Œ set å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯çº¢é»‘æ ‘éœ€è¦éµå¾ªçš„äº”é¡¹æ ¸å¿ƒè§„åˆ™ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä¿æŒå¹³è¡¡çš„åŸºç¡€ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è§„åˆ™&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§„åˆ™1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯&lt;strong&gt;çº¢è‰²&lt;/strong&gt;ï¼Œè¦ä¹ˆæ˜¯&lt;strong&gt;é»‘è‰²&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§„åˆ™2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§„åˆ™3&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰&lt;strong&gt;å¶å­èŠ‚ç‚¹&lt;/strong&gt;ï¼ˆNIL èŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ï¼‰éƒ½è¢«è§†ä¸º&lt;strong&gt;é»‘è‰²&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§„åˆ™4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²&lt;/strong&gt;ï¼ˆå³ä¸èƒ½å‡ºç°ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§„åˆ™5&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;ä»»æ„èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸Šï¼ŒåŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-çº¢é»‘æ ‘å¦‚ä½•ä¿è¯å¹³è¡¡"&gt;ğŸŒ³ çº¢é»‘æ ‘å¦‚ä½•ä¿è¯å¹³è¡¡
&lt;/h3&gt;&lt;p&gt;çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ä¸»è¦ç”±è§„åˆ™4å’Œè§„åˆ™5å…±åŒä¿è¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°å­¦å…³ç³»æ¥ç†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¾ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­è·¯å¾„ä¸Šçš„é»‘è‰²èŠ‚ç‚¹æ•°ä¸º &lt;strong&gt;bh&lt;/strong&gt;ï¼ˆBlack Heightï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„åˆ™4ï¼ˆä¸èƒ½æœ‰è¿ç»­çº¢èŠ‚ç‚¹ï¼‰ï¼Œ&lt;strong&gt;æœ€çŸ­è·¯å¾„&lt;/strong&gt;å¯èƒ½å…¨éƒ¨ç”±é»‘è‰²èŠ‚ç‚¹ç»„æˆï¼Œå…¶é•¿åº¦çº¦ä¸º &lt;strong&gt;bh&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€é•¿è·¯å¾„&lt;/strong&gt;åˆ™ä¼šæ˜¯çº¢é»‘èŠ‚ç‚¹äº¤æ›¿å‡ºç°ï¼Œå…¶é•¿åº¦æœ€å¤šä¸º &lt;strong&gt;2bh&lt;/strong&gt;ï¼ˆbhä¸ªé»‘èŠ‚ç‚¹ + bhä¸ªçº¢èŠ‚ç‚¹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œæœ€é•¿è·¯å¾„ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„çš„2å€ã€‚è¿™ä¿è¯äº†æ ‘æ˜¯è¿‘ä¼¼å¹³è¡¡çš„ï¼Œè¿›è€Œä½¿å¾—æ ‘é«˜ h æ»¡è¶³ &lt;em&gt;h&lt;/em&gt;â‰¤ 2logâ‚‚(&lt;em&gt;n&lt;/em&gt;+1)ï¼Œæ‰€æœ‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ç¨³å®šåœ¨ &lt;em&gt;O&lt;/em&gt;(log &lt;em&gt;n&lt;/em&gt;)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-çº¢é»‘æ ‘-vs-avl-æ ‘"&gt;âš–ï¸ çº¢é»‘æ ‘ vs AVL æ ‘
&lt;/h3&gt;&lt;p&gt;çº¢é»‘æ ‘å¸¸ä¸å¦ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘â€”â€”AVLæ ‘è¿›è¡Œæ¯”è¾ƒï¼Œå®ƒä»¬åœ¨å¹³è¡¡ç­–ç•¥å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰æ‰€ä¸åŒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;çº¢é»‘æ ‘&lt;/th&gt;
&lt;th&gt;AVL æ ‘&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹³è¡¡ä¸¥æ ¼åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿‘ä¼¼å¹³è¡¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸¥æ ¼å¹³è¡¡&lt;/strong&gt;ï¼ˆä»»ä½•èŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—‹è½¬æ¬¡æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒå°‘ï¼Œæ’å…¥/åˆ é™¤æ•ˆç‡&lt;strong&gt;æ›´ç¨³å®š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹æ›´å¤šï¼Œå¯èƒ½é¢‘ç¹æ—‹è½¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¨æ…¢ï¼ˆä½†ä»æ˜¯ &lt;em&gt;O&lt;/em&gt;(log &lt;em&gt;n&lt;/em&gt;)ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´å¿«&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é¢‘ç¹æ’å…¥ã€åˆ é™¤&lt;/strong&gt;çš„åœºæ™¯ï¼ˆå¦‚æ•°æ®åº“ç´¢å¼•ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢å¯†é›†å‹&lt;/strong&gt;åœºæ™¯ï¼ˆå¦‚å­—å…¸ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ éœ€è¦é¢‘ç¹åœ°ä¿®æ”¹æ•°æ®ï¼Œçº¢é»‘æ ‘çš„æ•´ä½“æ€§èƒ½é€šå¸¸æ›´å¥½ï¼›è€Œå¦‚æœä½ çš„åº”ç”¨ä¸»è¦æ˜¯è¿›è¡Œå¤§é‡æŸ¥è¯¢ï¼ŒAVLæ ‘å¯èƒ½æ›´åˆé€‚ã€‚&lt;/p&gt;
&lt;h3 id="-çº¢é»‘æ ‘çš„æ’å…¥æ“ä½œ"&gt;ğŸ”§ çº¢é»‘æ ‘çš„æ’å…¥æ“ä½œ
&lt;/h3&gt;&lt;p&gt;å‘çº¢é»‘æ ‘ä¸­æ’å…¥æ–°èŠ‚ç‚¹æ—¶ï¼Œæ–°èŠ‚ç‚¹é€šå¸¸è¢«åˆå§‹åŒ–ä¸º&lt;strong&gt;çº¢è‰²&lt;/strong&gt;ã€‚è¿™æ˜¯å› ä¸ºæ’å…¥çº¢è‰²èŠ‚ç‚¹å¯èƒ½è¿åè§„åˆ™4ï¼ˆå‡ºç°è¿ç»­çº¢èŠ‚ç‚¹ï¼‰ï¼Œä½†ä¸ä¼šè¿åè§„åˆ™5ï¼ˆæ¯æ¡è·¯å¾„é»‘èŠ‚ç‚¹æ•°ç›¸åŒï¼‰ï¼›è€Œå¦‚æœæ’å…¥é»‘è‰²èŠ‚ç‚¹ï¼Œåˆ™ä¼šç›´æ¥ç ´åè§„åˆ™5ï¼Œä¿®æ­£èµ·æ¥æˆæœ¬æ›´é«˜ã€‚&lt;/p&gt;
&lt;p&gt;æ’å…¥ä¿®å¤çš„æ ¸å¿ƒæ˜¯å¤„ç†â€œåŒçº¢â€é—®é¢˜ï¼ˆå³æ–°æ’å…¥çš„çº¢è‰²èŠ‚ç‚¹æœ‰ä¸€ä¸ªçº¢è‰²çš„çˆ¶èŠ‚ç‚¹ï¼‰ã€‚ä¿®å¤è¿‡ç¨‹ä¸»è¦ä¾æ®å…¶&lt;strong&gt;å”å”èŠ‚ç‚¹&lt;/strong&gt;ï¼ˆçˆ¶èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼‰çš„é¢œè‰²å’Œä½ç½®åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µä¸€ï¼šå”å”èŠ‚ç‚¹å­˜åœ¨ä¸”ä¸ºçº¢è‰²&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œ&lt;/strong&gt;ï¼šå°†&lt;strong&gt;çˆ¶èŠ‚ç‚¹&lt;/strong&gt;å’Œ&lt;strong&gt;å”å”èŠ‚ç‚¹&lt;/strong&gt;å˜ä¸ºé»‘è‰²ï¼Œå°†&lt;strong&gt;ç¥–çˆ¶èŠ‚ç‚¹&lt;/strong&gt;å˜ä¸ºçº¢è‰²ã€‚ç„¶åæŠŠç¥–çˆ¶èŠ‚ç‚¹å½“ä½œæ–°çš„å½“å‰èŠ‚ç‚¹ï¼Œç»§ç»­å‘ä¸Šæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘&lt;/strong&gt;ï¼šé€šè¿‡å°†çº¢è‰²å‘ä¸Šä¼ é€’ï¼Œå°†çŸ›ç›¾è½¬ç§»åˆ°æ ‘çš„æ›´é«˜å±‚ï¼Œå¹¶åœ¨æœ¬å±‚è§£å†³äº†è¿ç»­çº¢èŠ‚ç‚¹çš„é—®é¢˜ï¼ŒåŒæ—¶ä¿æŒäº†é»‘è‰²èŠ‚ç‚¹æ•°é‡ä¸å˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µäºŒï¼šå”å”èŠ‚ç‚¹ä¸ºé»‘è‰²æˆ–ä¸å­˜åœ¨ï¼Œä¸”å½“å‰èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹å½¢æˆâ€œç›´çº¿â€å…³ç³»&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œçˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œå½“å‰èŠ‚ç‚¹ä¹Ÿæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼ˆå·¦å·¦ï¼‰ï¼Œæˆ–è€…å‡ä¸ºå³å­©å­ï¼ˆå³å³ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œ&lt;/strong&gt;ï¼šå¯¹&lt;strong&gt;ç¥–çˆ¶èŠ‚ç‚¹&lt;/strong&gt;è¿›è¡Œä¸€æ¬¡&lt;strong&gt;å•æ—‹&lt;/strong&gt;ï¼ˆå·¦å·¦å¯¹åº”å³å•æ—‹ï¼Œå³å³å¯¹åº”å·¦å•æ—‹ï¼‰ã€‚ç„¶åå°†&lt;strong&gt;åŸçˆ¶èŠ‚ç‚¹å˜é»‘&lt;/strong&gt;ï¼Œ&lt;strong&gt;åŸç¥–çˆ¶èŠ‚ç‚¹å˜çº¢&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘&lt;/strong&gt;ï¼šé€šè¿‡æ—‹è½¬æ”¹å˜æ ‘çš„ç»“æ„ï¼Œå¹¶å°†ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹è½¬æ¢ä¸ºé»‘è‰²èŠ‚ç‚¹ï¼Œä»è€Œåœ¨å±€éƒ¨ä¿®å¤å¹³è¡¡å¹¶æ»¡è¶³è§„åˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µä¸‰ï¼šå”å”èŠ‚ç‚¹ä¸ºé»‘è‰²æˆ–ä¸å­˜åœ¨ï¼Œä¸”å½“å‰èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹å½¢æˆâ€œæŠ˜çº¿â€å…³ç³»&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œçˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œè€Œå½“å‰èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼ˆå·¦å³ï¼‰ï¼Œæˆ–è€…ç›¸åï¼ˆå³å·¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œ&lt;/strong&gt;ï¼šå…ˆå¯¹&lt;strong&gt;çˆ¶èŠ‚ç‚¹&lt;/strong&gt;è¿›è¡Œä¸€æ¬¡&lt;strong&gt;å•æ—‹&lt;/strong&gt;ï¼ˆå°†æŠ˜çº¿å…³ç³»è½¬ä¸ºç›´çº¿å…³ç³»ï¼‰ï¼Œè¿™æ ·å°±è½¬åŒ–æˆäº†æƒ…å†µäºŒã€‚ç„¶åæŒ‰ç…§æƒ…å†µäºŒçš„æ–¹æ³•ï¼Œå†å¯¹&lt;strong&gt;ç¥–çˆ¶èŠ‚ç‚¹&lt;/strong&gt;è¿›è¡Œä¸€æ¬¡å•æ—‹ï¼Œå¹¶å°†&lt;strong&gt;å½“å‰èŠ‚ç‚¹å˜é»‘&lt;/strong&gt;ï¼Œ&lt;strong&gt;åŸç¥–çˆ¶èŠ‚ç‚¹å˜çº¢&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘&lt;/strong&gt;ï¼šé€šè¿‡åŒæ—‹æ“ä½œå°†ä¸­é—´èŠ‚ç‚¹æå‡åˆ°é¡¶éƒ¨ï¼Œå¹¶è°ƒæ•´é¢œè‰²ï¼Œæœ€ç»ˆæ¢å¤å¹³è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ’» åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å¾—ç›Šäºå…¶é«˜æ•ˆçš„å¹³è¡¡æ€§ï¼Œçº¢é»‘æ ‘åœ¨è®¡ç®—æœºç§‘å­¦ä¸­åº”ç”¨å¹¿æ³›ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;C++ STL&lt;/strong&gt;ï¼š&lt;code&gt;map&lt;/code&gt;, &lt;code&gt;set&lt;/code&gt;, &lt;code&gt;multimap&lt;/code&gt;, &lt;code&gt;multiset&lt;/code&gt;ç­‰å…³è”å®¹å™¨é€šå¸¸ä½¿ç”¨çº¢é»‘æ ‘ä½œä¸ºåº•å±‚å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Java&lt;/strong&gt;ï¼š&lt;code&gt;TreeMap&lt;/code&gt;å’Œ &lt;code&gt;TreeSet&lt;/code&gt;ä¹ŸåŸºäºçº¢é»‘æ ‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linux å†…æ ¸&lt;/strong&gt;ï¼šç”¨äºè¿›ç¨‹è°ƒåº¦ã€å†…å­˜ç®¡ç†ç­‰éœ€è¦é«˜æ•ˆæŸ¥æ‰¾å’ŒåŠ¨æ€æ›´æ–°çš„æ¨¡å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“ç³»ç»Ÿ&lt;/strong&gt;ï¼šå¸¸ç”¨äºå®ç°ç´¢å¼•ç»“æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å°ç»“"&gt;âœ¨ å°ç»“
&lt;/h3&gt;&lt;p&gt;çº¢é»‘æ ‘é€šè¿‡å·§å¦™çš„é¢œè‰²çº¦æŸå’Œæ—‹è½¬æ“ä½œï¼Œä»¥ç›¸å¯¹è¾ƒå°‘çš„å¹³è¡¡ç»´æŠ¤æˆæœ¬ï¼Œæ¢å–äº†åœ¨é¢‘ç¹å¢åˆ åœºæ™¯ä¸‹ä¾ç„¶ç¨³å®šçš„é«˜æ€§èƒ½ã€‚ç†è§£å…¶äº”ç§æ ¸å¿ƒè§„åˆ™å’Œä¸‰ç§æ’å…¥ä¿®å¤æƒ…å†µï¼Œæ˜¯æŒæ¡çº¢é»‘æ ‘åŸç†çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£çº¢é»‘æ ‘ã€‚å¦‚æœä½ å¯¹æ’å…¥æ“ä½œä¸­çš„æ—‹è½¬å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæˆ–è€…æƒ³äº†è§£æ›´å¤æ‚çš„åˆ é™¤æ“ä½œï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ä¸ºä½ è®²è§£ã€‚&lt;/p&gt;
&lt;h2 id="åˆ†å¸ƒå¼é”"&gt;åˆ†å¸ƒå¼é”
&lt;/h2&gt;&lt;p&gt;åˆ†å¸ƒå¼é”åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ˜¯ç¡®ä¿å…±äº«èµ„æºè¢«å®‰å…¨è®¿é—®çš„å…³é”®æœºåˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå®ƒèƒ½æœ‰æ•ˆé˜²æ­¢æ•°æ®ä¸ä¸€è‡´å’Œç³»ç»Ÿæ··ä¹±ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¦‚æ‹¬äº†å…¶æ ¸å¿ƒåº”ç”¨åœºæ™¯å’Œç›®æ ‡ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£å…¨è²Œã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åº”ç”¨åœºæ™¯ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å…¸å‹ä¾‹å­&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç›®æ ‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºç«äº‰æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”µå•†åº“å­˜æ‰£å‡ã€é™é‡ä¼˜æƒ åˆ¸/å•†å“æŠ¢è´­&lt;/td&gt;
&lt;td&gt;é˜²æ­¢&lt;strong&gt;è¶…å–&lt;/strong&gt;æˆ–èµ„æºè¢«è¶…é¢å ç”¨ï¼Œä¿è¯æ•°æ®å‡†ç¡®æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§ä¿éšœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜²æ­¢é‡å¤æ”¯ä»˜ã€ç¼“å­˜é¢„çƒ­ã€é…ç½®æ›´æ–°&lt;/td&gt;
&lt;td&gt;ç¡®ä¿å…³é”®æ“ä½œï¼ˆå¦‚æ”¯ä»˜ã€æ•°æ®æ›´æ–°ï¼‰çš„&lt;strong&gt;å¹‚ç­‰æ€§&lt;/strong&gt;ï¼Œé¿å…é‡å¤å¤„ç†æˆ–æ•°æ®é”™ä¹±ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿåè°ƒä¸ä»»åŠ¡è°ƒåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯å¤©çš„æ•°æ®æ¨é€ï¼‰ã€ä¸»èŠ‚ç‚¹é€‰ä¸¾&lt;/td&gt;
&lt;td&gt;ä¿è¯é›†ç¾¤ä»»åŠ¡&lt;strong&gt;åªè¢«ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œ&lt;/strong&gt;ï¼Œé¿å…é‡å¤è®¡ç®—å’Œèµ„æºæµªè´¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å¸¸è§åœºæ™¯"&gt;ğŸ’¡ æ·±å…¥ç†è§£å¸¸è§åœºæ™¯
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯å‡ ä¸ªæ›´å…·è±¡çš„åœºæ™¯ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ä½•æ—¶éœ€è¦å¼•å…¥åˆ†å¸ƒå¼é”ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº“å­˜æ‰£å‡ä¸ç§’æ€&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„åœºæ™¯ã€‚åœ¨ç”µå•†ä¿ƒé”€æ—¶ï¼Œå¤§é‡è¯·æ±‚ä¼šåŒæ—¶æ‰£å‡åŒä¸€å•†å“çš„åº“å­˜ã€‚å¦‚æœæ²¡æœ‰åˆ†å¸ƒå¼é”ï¼Œå¤šä¸ªæœåŠ¡å™¨å¯èƒ½åŒæ—¶æŸ¥è¯¢åˆ°æœ‰ä½™é‡å¹¶è¿›è¡Œæ‰£å‡ï¼Œå¯¼è‡´åº“å­˜å˜ä¸ºè´Ÿæ•°ï¼ˆå³â€œè¶…å–â€ï¼‰ã€‚é€šè¿‡è®©æœåŠ¡å™¨åœ¨æ“ä½œæŸä¸ªå•†å“åº“å­˜å‰å…ˆè·å–å¯¹åº”çš„é”ï¼Œå¯ä»¥ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæœåŠ¡å™¨æ‰§è¡Œâ€œæŸ¥è¯¢-æ‰£å‡-æ›´æ–°â€çš„å®Œæ•´æµç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜²æ­¢é‡å¤æäº¤ä¸å¹‚ç­‰æ€§&lt;/strong&gt;ï¼šç”¨æˆ·å¯èƒ½å› ç½‘ç»œå»¶è¿Ÿæˆ–è¿ç»­ç‚¹å‡»è€Œæäº¤å®Œå…¨ç›¸åŒçš„è¯·æ±‚ï¼ˆå¦‚æ”¯ä»˜ã€ä¸‹å•ã€åŠ å…¥å›¢é˜Ÿï¼‰ã€‚åˆ†å¸ƒå¼é”å¯ä»¥åŸºäºè¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚è®¢å•IDï¼‰ä¸Šé”ï¼Œç¡®ä¿å¯¹äºåŒä¸€ä¸ªä¸šåŠ¡å•å·ï¼Œå³ä½¿æœ‰å¤šä¸ªè¯·æ±‚åˆ°è¾¾ï¼Œä¹Ÿåªæœ‰ç¬¬ä¸€ä¸ªèƒ½è·å–é”å¹¶å¤„ç†ï¼Œåç»­è¯·æ±‚ä¼šè¢«æ‹¦æˆªï¼Œä»è€Œä¿è¯æ“ä½œçš„å¹‚ç­‰æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡&lt;/strong&gt;ï¼šåœ¨ç”±å¤šå°æœåŠ¡å™¨æ„æˆçš„é›†ç¾¤ä¸­ï¼Œå¦‚æœæ¯å°æœåŠ¡å™¨éƒ½è¿è¡Œç€ç›¸åŒçš„å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯å¤©å‡Œæ™¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼‰ï¼Œå°±ä¼šå¯¼è‡´ä»»åŠ¡è¢«é‡å¤æ‰§è¡Œã€‚é€šè¿‡åœ¨ä»»åŠ¡å¼€å§‹æ—¶å°è¯•è·å–ä¸€ä¸ªå…¨å±€é”ï¼Œå¯ä»¥ç¡®ä¿å³ä½¿åœ¨å¤šèŠ‚ç‚¹çš„ç¯å¢ƒä¸‹ï¼Œè¯¥ä»»åŠ¡åœ¨è®¡åˆ’æ—¶é—´å†…ä¹Ÿåªä¼šæˆåŠŸè¿è¡Œä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é…ç½®ç®¡ç†&lt;/strong&gt;ï¼šå½“ç®¡ç†å‘˜åœ¨åå°æ›´æ–°ç³»ç»Ÿå…¨å±€é…ç½®ï¼ˆå¦‚å¼€å…³æŸä¸ªåŠŸèƒ½ï¼‰æ—¶ï¼Œå¦‚æœå¤šä¸ªèŠ‚ç‚¹çš„æœåŠ¡å®ä¾‹åŒæ—¶è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¯èƒ½ä¼šé€ æˆé…ç½®æ··ä¹±æˆ–è¦†ç›–ã€‚åœ¨ä¿®æ”¹é…ç½®å‰è·å–åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§å’Œä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©å»ºè®®"&gt;âš™ï¸ æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©äº†æ­£ç¡®çš„åº”ç”¨åœºæ™¯åï¼Œä¸åŒçš„å®ç°æŠ€æœ¯æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼Œéœ€è¦æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚è¿›è¡Œæƒè¡¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºäºRedis&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½æé«˜&lt;/strong&gt;ï¼Œæ”¯æŒè‡ªåŠ¨è¿‡æœŸï¼Œä½¿ç”¨ç®€ä¾¿ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨æç«¯æƒ…å†µï¼ˆå¦‚ä¸»ä»åˆ‡æ¢ï¼‰ä¸‹å¯èƒ½å­˜åœ¨é”å¤±æ•ˆçš„é£é™©ï¼Œæ˜¯&lt;strong&gt;APå‹&lt;/strong&gt;ç³»ç»Ÿï¼ˆä¿è¯å¯ç”¨æ€§ï¼Œå¼±åŒ–ä¸€è‡´æ€§ï¼‰çš„å…¸å‹é€‰æ‹©ã€‚&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ã€å¯¹æ€§èƒ½è¦æ±‚é«˜ã€å¯å®¹å¿çŸ­æš‚ä¸ä¸€è‡´çš„åœºæ™¯ï¼Œå¦‚&lt;strong&gt;ç§’æ€ã€é™æµ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºäºZooKeeper/etcd&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºä¸€è‡´æ€§ï¼ˆCPå‹ï¼‰&lt;/strong&gt;ï¼Œå¯é æ€§é«˜ï¼Œé€šè¿‡ä¸´æ—¶èŠ‚ç‚¹å’Œç›‘å¬æœºåˆ¶å¤©ç„¶æ”¯æŒå…¬å¹³é”å’Œè‡ªåŠ¨é‡Šæ”¾ã€‚&lt;/td&gt;
&lt;td&gt;æ€§èƒ½ç›¸å¯¹Redisè¾ƒä½ï¼Œéƒ¨ç½²å’Œç»´æŠ¤æ›´å¤æ‚ã€‚&lt;/td&gt;
&lt;td&gt;å¯¹&lt;strong&gt;ä¸€è‡´æ€§è¦æ±‚æé«˜&lt;/strong&gt;çš„åœºæ™¯ï¼Œå¦‚&lt;strong&gt;é‡‘èäº¤æ˜“ã€ä¸»èŠ‚ç‚¹é€‰ä¸¾&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºäºæ•°æ®åº“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œæ— éœ€å¼•å…¥æ–°ä¸­é—´ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å·®&lt;/strong&gt;ï¼Œå¯¹æ•°æ®åº“å‹åŠ›å¤§ï¼Œå®¹æ˜“æˆä¸ºå•ç‚¹ç“¶é¢ˆã€‚&lt;/td&gt;
&lt;td&gt;å¹¶å‘é‡ä½ã€å¯¹æ€§èƒ½ä¸æ•æ„Ÿã€ä¸”ä¸å¸Œæœ›å¼•å…¥é¢å¤–ç»„ä»¶çš„ç®€å•ç³»ç»Ÿã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸåˆ™ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ ¸å¿ƒåŸåˆ™ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨åˆ†å¸ƒå¼é”æ—¶ï¼Œæœ‰å‡ ä¸ªå…³é”®åŸåˆ™éœ€è¦ç‰¢è®°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç»†é”ç²’åº¦&lt;/strong&gt;ï¼šå°½é‡ç¼©å°é”çš„èŒƒå›´ã€‚ä¾‹å¦‚ï¼Œé”ä½ç‰¹å®šçš„å•†å“IDï¼Œè€Œä¸æ˜¯é”ä½æ•´ä¸ªåº“å­˜è¡¨ï¼Œè¿™æ ·å¯ä»¥æå¤§æå‡ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®è¶…æ—¶æ—¶é—´&lt;/strong&gt;ï¼šå¿…é¡»ä¸ºé”è®¾ç½®ä¸€ä¸ªåˆç†çš„è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢å› æŒæœ‰é”çš„è¿›ç¨‹å´©æºƒè€Œå¯¼è‡´é”æ°¸è¿œæ— æ³•é‡Šæ”¾ï¼ˆæ­»é”ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿é‡Šæ”¾é”&lt;/strong&gt;ï¼šåŠ é”åï¼Œå¿…é¡»å°†é‡Šæ”¾æ“ä½œæ”¾åœ¨&lt;code&gt;finally&lt;/code&gt;ä»£ç å—ä¸­æ‰§è¡Œï¼Œä»¥ç¡®ä¿æ— è®ºä¸šåŠ¡é€»è¾‘æ‰§è¡ŒæˆåŠŸè¿˜æ˜¯å¼‚å¸¸ï¼Œé”éƒ½èƒ½è¢«é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘å¯é‡å…¥æ€§&lt;/strong&gt;ï¼šå¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰é”çš„æƒ…å†µä¸‹å†æ¬¡å°è¯•è·å–åŒä¸€æŠŠé”ï¼Œé”åº”è¯¥èƒ½å¤Ÿæ­£ç¡®å¤„ç†ï¼ˆå³æ”¯æŒå¯é‡å…¥ï¼‰ï¼Œé¿å…æ­»é”ã€‚æˆç†Ÿçš„å®¢æˆ·ç«¯å¦‚Redissonå·²ç»å†…ç½®äº†è¿™äº›ç‰¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨åˆ†å¸ƒå¼é”ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘å¯ä»¥ä¸ºä½ æä¾›æ›´æ·±å…¥çš„åˆ†æã€‚&lt;/p&gt;
&lt;h2 id="ä¸šåŠ¡å¹‚ç­‰"&gt;ä¸šåŠ¡å¹‚ç­‰
&lt;/h2&gt;&lt;p&gt;ä¸šåŠ¡å¹‚ç­‰æ€§æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­è‡³å…³é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒèƒ½ç¡®ä¿åŒä¸€æ“ä½œè¢«æ‰§è¡Œå¤šæ¬¡æ‰€äº§ç”Ÿçš„æ•ˆæœä¸æ‰§è¡Œä¸€æ¬¡å®Œå…¨ç›¸åŒã€‚ä¸‹é¢æˆ‘å°†ç³»ç»Ÿæ€§åœ°ä¸ºæ‚¨ä»‹ç»å®ç°ä¸šåŠ¡å¹‚ç­‰æ€§çš„æ ¸å¿ƒæ–¹æ¡ˆã€é€‰å‹å»ºè®®ä»¥åŠå…³é”®æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£å¹‚ç­‰æ€§åŠå…¶å¿…è¦æ€§"&gt;ğŸ”‘ ç†è§£å¹‚ç­‰æ€§åŠå…¶å¿…è¦æ€§
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å¹‚ç­‰æ€§&lt;/strong&gt;æ„å‘³ç€æ— è®ºä¸€ä¸ªæ“ä½œè¢«é‡å¤æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œå…¶å¯¹ç³»ç»ŸçŠ¶æ€é€ æˆçš„å½±å“éƒ½åªä¸æ‰§è¡Œä¸€æ¬¡ç›¸åŒã€‚ åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç”±äºç½‘ç»œè¶…æ—¶ã€å®¢æˆ·ç«¯é‡è¯•ã€æ¶ˆæ¯é‡å¤æŠ•é€’ç­‰ç°è±¡æ™®éå­˜åœ¨ï¼Œä¿è¯å…³é”®ä¸šåŠ¡çš„å¹‚ç­‰æ€§å¯ä»¥æœ‰æ•ˆé˜²æ­¢é‡å¤ä¸‹å•ã€é‡å¤æ”¯ä»˜ã€è¶…å–ç­‰é—®é¢˜ï¼Œæ˜¯ç³»ç»Ÿç¨³å®šæ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;h3 id="-å…­å¤§æ ¸å¿ƒå®ç°æ–¹æ¡ˆå¯¹æ¯”"&gt;ğŸ“Š å…­å¤§æ ¸å¿ƒå®ç°æ–¹æ¡ˆå¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†å®ç°ä¸šåŠ¡å¹‚ç­‰æ€§çš„ä¸»è¦æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒæ€æƒ³ä¸é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;1. Tokenä»¤ç‰Œæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç«¯é¢„ç”Ÿæˆå”¯ä¸€Tokenï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ—¶æºå¸¦ï¼ŒæœåŠ¡ç«¯é€šè¿‡åŸå­æ“ä½œæ ¡éªŒTokenæœ‰æ•ˆæ€§ã€‚&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·æäº¤è®¢å•ã€æ”¯ä»˜è¯·æ±‚ç­‰å‰ç«¯äº¤äº’åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;å®‰å…¨æ€§é«˜ï¼Œé€»è¾‘æ¸…æ™°ã€‚&lt;/td&gt;
&lt;td&gt;éœ€ä¸¤æ¬¡äº¤äº’ï¼ˆè·å–Tokenã€æäº¤è¯·æ±‚ï¼‰ï¼Œéœ€ä¿è¯Tokenä¼ è¾“å®‰å…¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2. æ•°æ®åº“å”¯ä¸€çº¦æŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨æ•°æ®åº“è¡¨å­—æ®µçš„å”¯ä¸€ç´¢å¼•ï¼Œé˜²æ­¢é‡å¤æ•°æ®æ’å…¥ã€‚&lt;/td&gt;
&lt;td&gt;è®¢å•åˆ›å»ºã€ç”¨æˆ·æ³¨å†Œç­‰æ•°æ®æ’å…¥åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œä¿è¯å¼ºä¸€è‡´æ€§ï¼Œæ˜¯å¯é çš„å…œåº•æ–¹æ¡ˆã€‚&lt;/td&gt;
&lt;td&gt;ä»…é€‚ç”¨äºæ’å…¥æ“ä½œï¼Œé«˜å¹¶å‘ä¸‹æ•°æ®åº“å‹åŠ›å¤§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;3. ä¹è§‚é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ç‰ˆæœ¬å·æˆ–ä¸šåŠ¡æ¡ä»¶ï¼ˆå¦‚åº“å­˜æ•°é‡ï¼‰æ§åˆ¶æ›´æ–°æ“ä½œï¼Œåªæœ‰æ¡ä»¶æ»¡è¶³æ—¶æ‰æ›´æ–°ã€‚&lt;/td&gt;
&lt;td&gt;æ›´æ–°åº“å­˜ã€æ‰£å‡è´¦æˆ·ä½™é¢ç­‰æ›´æ–°åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;é¿å…ä½¿ç”¨é”ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ä¸‹å¤±è´¥ç‡è¾ƒé«˜ï¼Œä»…é€‚ç”¨äºæ›´æ–°æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;4. åˆ†å¸ƒå¼é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘å‰å…ˆè·å–ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œç¡®ä¿åŒæ—¶åˆ»åªæœ‰ä¸€ä¸ªè¯·æ±‚èƒ½å¤„ç†ä¸šåŠ¡ã€‚&lt;/td&gt;
&lt;td&gt;ç§’æ€ã€èµ„æºæŠ¢å ç­‰é«˜å¹¶å‘åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´æ€§ï¼Œé€šç”¨æ€§å¼ºã€‚&lt;/td&gt;
&lt;td&gt;å®ç°å¤æ‚ï¼Œéœ€å¤„ç†é”è¶…æ—¶ã€æ­»é”ç­‰é—®é¢˜ï¼Œæ€§èƒ½æœ‰æŸè€—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;5. çŠ¶æ€æœºæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ä¸šåŠ¡çŠ¶æ€çš„åˆæ³•æµè½¬è·¯å¾„ï¼Œåªæœ‰åœ¨ç‰¹å®šçŠ¶æ€ä¸‹æ‰å…è®¸æ‰§è¡Œæ“ä½œã€‚&lt;/td&gt;
&lt;td&gt;è®¢å•æµç¨‹ã€å·¥å•æµè½¬ç­‰æœ‰æ˜ç¡®çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸåœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦ç²¾å¿ƒè®¾è®¡çŠ¶æ€æµè½¬è§„åˆ™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;6. é˜²é‡è¡¨æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ç‹¬å»ºç«‹ä¸€å¼ é˜²é‡è¡¨ï¼Œåˆ©ç”¨å…¶å”¯ä¸€ç´¢å¼•æ¥è®°å½•å·²å¤„ç†çš„è¯·æ±‚ã€‚&lt;/td&gt;
&lt;td&gt;å¼‚æ­¥ä»»åŠ¡å¤„ç†ã€æ‰¹é‡æ“ä½œç­‰ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ä¸šåŠ¡è§£è€¦ï¼Œå¯å¤ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;é˜²é‡è¡¨ä¸ä¸šåŠ¡è¡¨éœ€åœ¨åŒä¸€æ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ–¹æ¡ˆé€‰æ‹©ä¸ç»„åˆç­–ç•¥"&gt;ğŸ’¡ æ–¹æ¡ˆé€‰æ‹©ä¸ç»„åˆç­–ç•¥
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§æ–¹æ¡ˆæˆ–ç»„åˆç­–ç•¥ï¼Œä¸»è¦å–å†³äºæ‚¨çš„å…·ä½“ä¸šåŠ¡åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¢å‘ç”¨æˆ·äº¤äº’çš„æµç¨‹ï¼ˆå¦‚æäº¤è®¢å•ã€æ”¯ä»˜ï¼‰&lt;/strong&gt;ï¼šæ¨èä½¿ç”¨ &lt;strong&gt;Tokenä»¤ç‰Œæœºåˆ¶&lt;/strong&gt;ã€‚è¿™ç§æ–¹æ¡ˆç”±æœåŠ¡ç«¯æ§åˆ¶ä»¤ç‰Œçš„ç”Ÿæˆå’Œæ ¡éªŒï¼Œå®‰å…¨æ€§å¾ˆé«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¯æ•°æ®å†™å…¥åœºæ™¯ï¼ˆå¦‚åˆ›å»ºå”¯ä¸€èµ„æºï¼‰&lt;/strong&gt;ï¼š&lt;strong&gt;æ•°æ®åº“å”¯ä¸€ç´¢å¼•&lt;/strong&gt;æ˜¯æœ€ç®€å•ã€æœ€å¯é çš„å…œåº•æ–¹æ¡ˆã€‚å®ƒå¯ä»¥ä¸å…¶å®ƒæ–¹æ¡ˆç»“åˆï¼Œæä¾›æœ€ç»ˆä¿éšœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ›´æ–°åœºæ™¯ï¼ˆå¦‚æ‰£å‡åº“å­˜ï¼‰&lt;/strong&gt;ï¼š&lt;strong&gt;ä¹è§‚é”&lt;/strong&gt;ï¼ˆåŸºäºç‰ˆæœ¬å·æˆ–æ¡ä»¶ï¼‰é€šå¸¸æ˜¯é¦–é€‰ï¼Œå› ä¸ºå®ƒæ€§èƒ½æŸè€—è¾ƒå°ä¸”å®ç°ä¸å¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æé«˜å¹¶å‘ä¸”å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸¥æ ¼çš„åœºæ™¯ï¼ˆå¦‚ç§’æ€ï¼‰&lt;/strong&gt;ï¼šå¯è€ƒè™‘ &lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt; æˆ– &lt;strong&gt;RedisåŸå­æŒ‡ä»¤ï¼ˆå¦‚Luaè„šæœ¬ï¼‰&lt;/strong&gt;ï¼Œä»¥ç¡®ä¿ç»å¯¹çš„å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…·æœ‰æ˜ç¡®çŠ¶æ€æµè½¬çš„ä¸šåŠ¡ï¼ˆå¦‚è®¢å•ä»å¾…æ”¯ä»˜åˆ°å·²æ”¯ä»˜ï¼‰&lt;/strong&gt;ï¼š&lt;strong&gt;çŠ¶æ€æœºå¹‚ç­‰&lt;/strong&gt; æ˜¯æœ€è‡ªç„¶å’Œä¼˜é›…çš„å®ç°æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œ&lt;strong&gt;ç»å¸¸éœ€è¦ç»„åˆä½¿ç”¨å¤šç§æ–¹æ¡ˆ&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œåœ¨æ”¯ä»˜åœºæ™¯ä¸­ï¼Œå¯ä»¥åŒæ—¶é‡‡ç”¨Tokenä»¤ç‰Œé˜²æ­¢å‰ç«¯é‡å¤æäº¤ï¼Œåœ¨æœåŠ¡ç«¯ä½¿ç”¨ä¹è§‚é”æ›´æ–°è´¦æˆ·ä½™é¢ï¼Œå¹¶å°†æ”¯ä»˜æµæ°´å·ä½œä¸ºæ•°æ®åº“å”¯ä¸€ç´¢å¼•çš„å…œåº•æªæ–½ã€‚&lt;/p&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿æ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ï¼šè¿™æ˜¯å®ç°å¹‚ç­‰çš„å…³é”®ã€‚æ— è®ºæ˜¯â€œæ£€æŸ¥-æ“ä½œâ€è¿˜æ˜¯â€œæ£€æŸ¥-åˆ é™¤â€ï¼Œéƒ½å¿…é¡»æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„åŸå­æ“ä½œã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Redisæ—¶ï¼Œåº”ä¼˜å…ˆé€‰æ‹© &lt;code&gt;DEL&lt;/code&gt;å‘½ä»¤ï¼ˆè¿”å›åˆ é™¤æ•°é‡ï¼‰æˆ– &lt;code&gt;SET ... NX&lt;/code&gt;å‘½ä»¤ï¼Œè€ŒééåŸå­çš„â€œGETåDELâ€æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´&lt;/strong&gt;ï¼šä½¿ç”¨Redisæˆ–ç¼“å­˜æ—¶ï¼ŒåŠ¡å¿…ä¸ºå¹‚ç­‰Keyè®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰ã€‚æ—¶é—´åº”å¤§äºä¸šåŠ¡å¤„ç†æœ€é•¿æ—¶é—´ï¼Œé˜²æ­¢Keyè¿‡æ—©å¤±æ•ˆï¼›ä½†ä¹Ÿä¸å®œè¿‡é•¿ï¼Œé¿å…æ— ç”¨æ•°æ®é•¿æœŸå ç”¨å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†å¥½å¼‚å¸¸æƒ…å†µ&lt;/strong&gt;ï¼šè¦ç‰¹åˆ«æ³¨æ„â€œå…ˆåˆ é™¤Tokenåæ‰§è¡Œä¸šåŠ¡â€æ—¶ï¼Œä¸šåŠ¡æ‰§è¡Œå¤±è´¥å¯¼è‡´åç»­åˆæ³•é‡è¯•è¢«è¯¯åˆ¤ä¸ºé‡å¤è¯·æ±‚çš„æƒ…å†µã€‚éœ€è¦æœ‰è¡¥å¿æœºåˆ¶æˆ–è®©å®¢æˆ·ç«¯é‡æ–°è·å–Tokenã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶éæ‰€æœ‰æ¥å£éƒ½éœ€è¦å¹‚ç­‰&lt;/strong&gt;ï¼šæŸ¥è¯¢ï¼ˆGETï¼‰æ“ä½œå’Œåˆ é™¤æ“ä½œé€šå¸¸æ˜¯å¤©ç„¶å¹‚ç­‰çš„æˆ–æ— éœ€å¹‚ç­‰æ§åˆ¶ã€‚åº”å°†ç²¾åŠ›é›†ä¸­åœ¨æœ‰çŠ¶æ€å˜æ›´çš„å†™æ“ä½œä¸Šï¼Œå¦‚åˆ›å»ºï¼ˆPOSTï¼‰ã€æ›´æ–°ï¼ˆPUT/PATCHï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹‚ç­‰é”®çš„è®¾è®¡&lt;/strong&gt;ï¼šç”¨äºæ ‡è¯†å”¯ä¸€è¯·æ±‚çš„é”®ï¼ˆæ— è®ºæ˜¯Tokenè¿˜æ˜¯ä¸šåŠ¡é”®ï¼‰å¿…é¡»å…¨å±€å”¯ä¸€ï¼Œé€šå¸¸ä¸ä¸šåŠ¡å¼ºç›¸å…³ï¼Œå¦‚&lt;code&gt;ç”¨æˆ·ID+ä¸šåŠ¡ç±»å‹+ä¸šåŠ¡ID&lt;/code&gt;ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å®ç°ä¸šåŠ¡å¹‚ç­‰æ€§æ˜¯æ„å»ºå¥å£®åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¿…å¤‡æŠ€èƒ½ã€‚æ ¸å¿ƒåœ¨äº&lt;strong&gt;æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€ç®€æœ‰æ•ˆçš„æ–¹æ¡ˆ&lt;/strong&gt;ï¼Œå¹¶ç‰¢è®°&lt;strong&gt;åŸå­æ€§æ“ä½œ&lt;/strong&gt;è¿™ä¸€ç”Ÿå‘½çº¿ã€‚é€šå¸¸ï¼Œç»“åˆä¸šåŠ¡ç‰¹ç‚¹çš„â€œä¹è§‚é”â€æˆ–â€œå”¯ä¸€çº¦æŸâ€æ˜¯è¾ƒé€šç”¨ä¸”æ¨èçš„æ–¹å¼ï¼Œè€Œåœ¨é«˜å¹¶å‘ç§’æ€ç­‰ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œå¯è€ƒè™‘å¼•å…¥â€œåˆ†å¸ƒå¼é”â€æˆ–â€œRedisåŸå­æŒ‡ä»¤â€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æ¢³ç†èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°è®¾è®¡å’Œå®ç°ä¸šåŠ¡å¹‚ç­‰æ€§ã€‚å¦‚æœæ‚¨æœ‰ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘å¯ä»¥æä¾›æ›´å…·ä½“çš„åˆ†æå’Œå»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id="setnx--lua"&gt;SETNX &amp;amp; Lua
&lt;/h2&gt;&lt;p&gt;Redis çš„ &lt;code&gt;SETNX&lt;/code&gt;å’Œ Lua è„šæœ¬éƒ½èƒ½å®ç°åˆ†å¸ƒå¼é”ç­‰éœ€è¦åŸå­æ€§çš„æ“ä½œï¼Œä½†å®ƒä»¬åœ¨æ€§èƒ½å’Œåº”ç”¨åœºæ™¯ä¸Šå„æœ‰ä¾§é‡ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;SETNX&lt;/code&gt;ï¼ˆæˆ–å…¶ç°ä»£æ›¿ä»£ &lt;code&gt;SET key value NX EX timeout&lt;/code&gt;ï¼‰åƒä¸€æŠŠç²¾å‡†çš„åŒ•é¦–ï¼Œ&lt;strong&gt;ç®€å•ç›´æ¥ã€æ€§èƒ½æé«˜&lt;/strong&gt;ï¼Œé€‚åˆå¤„ç†ç®€å•çš„äº’æ–¥åœºæ™¯ï¼›è€Œ Lua è„šæœ¬åˆ™åƒä¸€æŠŠåŠŸèƒ½å…¨é¢çš„ç‘å£«å†›åˆ€ï¼Œ&lt;strong&gt;é€šè¿‡åŸå­æ€§æ‰§è¡Œå¤æ‚é€»è¾‘æ¥ä¿éšœæ•°æ®å¼ºä¸€è‡´æ€§&lt;/strong&gt;ï¼Œè™½å•æ¬¡æ‰§è¡Œå¼€é”€ç•¥é«˜ï¼Œä½†èƒ½é¿å…å¤šæ¬¡ç½‘ç»œå¾€è¿”ï¼Œåœ¨å¤æ‚åœºæ™¯ä¸‹å®é™…æ€§èƒ½å¯èƒ½æ›´å¥½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬çš„ä¸»è¦ç‰¹æ€§å·®å¼‚ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;SETNX (åŠç°ä»£æ›¿ä»£ &lt;code&gt;SET ... NX&lt;/code&gt;)&lt;/th&gt;
&lt;th&gt;Lua è„šæœ¬&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•å‘½ä»¤åŸå­æ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šå‘½ä»¤åŸå­æ€§&lt;/strong&gt;ï¼Œæ•´ä¸ªè„šæœ¬ä½œä¸ºä¸€ä¸ªå•å…ƒæ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æè‡´æ€§èƒ½&lt;/strong&gt;ï¼Œå•å‘½ä»¤å¼€é”€æå°&lt;/td&gt;
&lt;td&gt;æ€§èƒ½é«˜ï¼Œä½†éœ€è¦ä¼ è¾“å’ŒåŠ è½½è„šæœ¬ã€‚ä½¿ç”¨ &lt;code&gt;EVALSHA&lt;/code&gt;å¯ä¼˜åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•ï¼Œä»…èƒ½åˆ¤æ–­ Key æ˜¯å¦å­˜åœ¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æå…¶çµæ´»&lt;/strong&gt;ï¼Œæ”¯æŒæ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰å¤æ‚é€»è¾‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œå¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•æ¬¡ç½‘ç»œå¾€è¿”&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡è„šæœ¬ä¼ è¾“ï¼Œæ›¿ä»£å¤šæ¬¡ç½‘ç»œå¾€è¿”&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•çš„åˆ†å¸ƒå¼é”ã€å¹‚ç­‰ä»¤ç‰Œ&lt;/td&gt;
&lt;td&gt;å®‰å…¨çš„é”é‡Šæ”¾ã€æ¯”è¾ƒå¹¶äº¤æ¢ï¼ˆCASï¼‰ã€ç§’æ€æ‰£åº“å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå·®å¼‚ä¸é€‰æ‹©ä¾æ®"&gt;ğŸ’¡ æ ¸å¿ƒå·®å¼‚ä¸é€‰æ‹©ä¾æ®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸå­æ€§çš„æœ¬è´¨ä¸åŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SETNX&lt;/code&gt;æœ¬èº«æ˜¯ä¸€ä¸ªåŸå­å‘½ä»¤ï¼Œä½†å½“ä½ éœ€è¦ç»„åˆå¤šä¸ªæ“ä½œï¼ˆä¾‹å¦‚ç»å…¸çš„ &lt;code&gt;SETNX + EXPIRE&lt;/code&gt;ï¼‰æ—¶ï¼Œè¿™ä¸ªâ€œç»„åˆâ€æœ¬èº«å¹¶éåŸå­ã€‚å¦‚æœ &lt;code&gt;SETNX&lt;/code&gt;æˆåŠŸåã€æ‰§è¡Œ &lt;code&gt;EXPIRE&lt;/code&gt;å‰è¿›ç¨‹å´©æºƒï¼Œä¼šå¯¼è‡´é”æ— æ³•è‡ªåŠ¨é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;Lua è„šæœ¬çš„åŸå­æ€§æ˜¯ &lt;strong&gt;â€œè„šæœ¬çº§â€&lt;/strong&gt; çš„ã€‚Redis ä¿è¯è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´ä¸ä¼šè¢«ä»»ä½•å…¶ä»–å‘½ä»¤æ‰“æ–­ï¼Œè„šæœ¬å†…çš„æ‰€æœ‰å‘½ä»¤è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚è¿™å¯¹äºéœ€è¦ &lt;strong&gt;â€œæ£€æŸ¥-æ“ä½œâ€&lt;/strong&gt; åºåˆ—çš„åœºæ™¯è‡³å…³é‡è¦ï¼Œä¾‹å¦‚æ£€æŸ¥åº“å­˜å……è¶³åå†æ‰£å‡ï¼Œç¡®ä¿æ•°æ®å¼ºä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½å½±å“å› ç´ &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SETNX&lt;/code&gt;çš„æ€§èƒ½ä¼˜åŠ¿åœ¨äºå…¶ &lt;strong&gt;ç®€å•æ€§&lt;/strong&gt;ã€‚ä½œä¸ºå•å‘½ä»¤ï¼Œå®ƒæ¶ˆè€—æœ€å°‘çš„æœåŠ¡å™¨è®¡ç®—èµ„æºå’Œç½‘ç»œå¸¦å®½ã€‚&lt;/li&gt;
&lt;li&gt;Lua è„šæœ¬çš„æ€§èƒ½ä¼˜åŠ¿ä½“ç°åœ¨ &lt;strong&gt;å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°&lt;/strong&gt;ã€‚å¯¹äºéœ€è¦å¤šä¸ªæ­¥éª¤çš„æ“ä½œï¼Œå°†å¤šä¸ªå‘½ä»¤æ‰“åŒ…è¿›ä¸€ä¸ªè„šæœ¬ï¼Œåªéœ€ä¸€æ¬¡ç½‘ç»œé€šä¿¡ï¼Œå…¶æ€»è€—æ—¶é€šå¸¸è¿œä½äºå¤šä¸ªç‹¬ç«‹å‘½ä»¤çš„å¤šæ¬¡ç½‘ç»œé€šä¿¡ã€‚ä½†éœ€è¦æ³¨æ„ï¼Œ&lt;strong&gt;å¤æ‚çš„è„šæœ¬é€»è¾‘æˆ–å¤§æ•°æ®é‡å¤„ç†ä¼šé˜»å¡ Redis çš„å•çº¿ç¨‹&lt;/strong&gt;ï¼Œå½±å“æœåŠ¡å™¨æ•´ä½“å“åº”ï¼Œå› æ­¤è„šæœ¬åº”ä¿æŒç®€æ´é«˜æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•é€‰æ‹©ï¼šåœºæ™¯å†³å®šä¸€åˆ‡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´ç›´è§‚åœ°åšå‡ºé€‰æ‹©ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹å†³ç­–è·¯å¾„ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[è¯„ä¼°ä¸šåŠ¡åœºæ™¯] --&amp;gt; B{æ“ä½œé€»è¾‘æ˜¯å¦å¤æ‚?}
B -- å¦&amp;lt;br&amp;gt;ï¼ˆå¦‚ç®€å•é”/å¹‚ç­‰ï¼‰ --&amp;gt; C[ä¼˜å…ˆä½¿ç”¨ SET...NX...]
B -- æ˜¯&amp;lt;br&amp;gt;ï¼ˆæ¶‰åŠæ¡ä»¶åˆ¤æ–­æˆ–å¤šæ­¥éª¤ï¼‰ --&amp;gt; D{éœ€è¦ä¿è¯å¤šæ“ä½œ&amp;lt;br&amp;gt;çš„åŸå­æ€§?}
D -- å¦ --&amp;gt; C
D -- æ˜¯ --&amp;gt; E[ä½¿ç”¨ Lua è„šæœ¬]
E --&amp;gt; F[è€ƒè™‘ä½¿ç”¨ EVALSHA&amp;lt;br&amp;gt;ä¼˜åŒ–æ€§èƒ½]
C --&amp;gt; G[å®Œæˆ]
F --&amp;gt; G
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å®è·µå»ºè®®"&gt;ğŸ’ å®è·µå»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç°ä»£ç”¨æ³•&lt;/strong&gt;ï¼šç°åœ¨æ›´æ¨èä½¿ç”¨ &lt;code&gt;SET key your_unique_value NX PX 30000&lt;/code&gt;è¿™æ ·çš„å•æ¡å‘½ä»¤æ¥æ›¿ä»£ä¼ ç»Ÿçš„ &lt;code&gt;SETNX&lt;/code&gt;+ &lt;code&gt;EXPIRE&lt;/code&gt;ï¼Œå› ä¸ºå®ƒå¤©ç„¶å…·æœ‰åŸå­æ€§ï¼Œé¿å…äº†æ­»é”é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lua è„šæœ¬ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹äºä¼šé¢‘ç¹æ‰§è¡Œçš„ Lua è„šæœ¬ï¼Œå¯ä»¥å…ˆä½¿ç”¨ &lt;code&gt;SCRIPT LOAD&lt;/code&gt;å‘½ä»¤å°†å…¶é¢„åŠ è½½åˆ° Redis æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡ &lt;code&gt;EVALSHA&lt;/code&gt;å‘½ä»¤æ‰§è¡Œå…¶ SHA1 æ‘˜è¦å€¼ã€‚è¿™å¯ä»¥ &lt;strong&gt;å‡å°‘è„šæœ¬å†…å®¹çš„é‡å¤ä¼ è¾“ï¼Œæå‡æ€§èƒ½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯åšå‡ºæœ€åˆé€‚çš„æŠ€æœ¯é€‰å‹ã€‚&lt;/p&gt;
&lt;h2 id="aop"&gt;AOP
&lt;/h2&gt;&lt;p&gt;Springæ¡†æ¶ä¸­ï¼Œè®¸å¤šæ³¨è§£çš„åŠŸèƒ½å®ç°éƒ½å€ŸåŠ©äº†AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æŠ€æœ¯ï¼Œåœ¨å¹•åé€šè¿‡åŠ¨æ€ä»£ç†ç­‰æ–¹å¼ä¸ºä½ çš„ä¸šåŠ¡é€»è¾‘â€œç»‡å…¥â€é€šç”¨åŠŸèƒ½ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†è¿™äº›å¸¸è§çš„æ³¨è§£åŠå…¶èƒŒåçš„AOPåŸç†å’Œæ ¸å¿ƒåº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨è§£ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å…·ä½“æ³¨è§£&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;th&gt;AOP å®ç°æ–¹å¼ / é€šçŸ¥ç±»å‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº‹åŠ¡ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Transactional&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ŒåŒ…æ‹¬å¼€å¯ã€æäº¤ã€å›æ»šäº‹åŠ¡ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt; (&lt;code&gt;@Around&lt;/code&gt;) æ„å»ºäº‹åŠ¡è¾¹ç•Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Cacheable&lt;/code&gt;, &lt;code&gt;@CachePut&lt;/code&gt;, &lt;code&gt;@CacheEvict&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜å¼ç¼“å­˜ï¼Œå®ç°æŸ¥è¯¢ç¼“å­˜ã€æ›´æ–°ç¼“å­˜ã€æ¸…é™¤ç¼“å­˜ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt;ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ“ä½œç¼“å­˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@PreAuthorize&lt;/code&gt;, &lt;code&gt;@Secured&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•çº§æƒé™æ§åˆ¶ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæƒé™æ£€æŸ¥ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;å‰ç½®é€šçŸ¥&lt;/strong&gt; (&lt;code&gt;@Before&lt;/code&gt;) æˆ–&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt;è¿›è¡Œæƒé™éªŒè¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼‚æ­¥æ‰§è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Async&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿æ–¹æ³•å¼‚æ­¥æ‰§è¡Œï¼Œå³åœ¨æ–°çº¿ç¨‹ä¸­è¿è¡Œã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt;ï¼Œå°†æ–¹æ³•è°ƒç”¨æäº¤åˆ°çº¿ç¨‹æ± æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šæ—¶ä»»åŠ¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Scheduled&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œåœ¨ç‰¹å®šæ—¶é—´æˆ–å‘¨æœŸæ‰§è¡Œæ–¹æ³•ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt;ï¼Œç”±è°ƒåº¦å™¨è§¦å‘æ–¹æ³•æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰ AOP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Aspect&lt;/code&gt;, &lt;code&gt;@Pointcut&lt;/code&gt;ç­‰&lt;/td&gt;
&lt;td&gt;å…è®¸å¼€å‘è€…è‡ªå®šä¹‰æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå¦‚æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ã€‚&lt;/td&gt;
&lt;td&gt;ç›´æ¥åŸºäº AOP æœºåˆ¶ï¼Œå¯ä½¿ç”¨æ‰€æœ‰ç±»å‹çš„é€šçŸ¥ï¼ˆAdviceï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ä½“è‡ªåŠ¨å¡«å……&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªå®šä¹‰æ³¨è§£ï¼ˆå¦‚ &lt;code&gt;@AutoFill&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;åœ¨æ•°æ®åº“æ“ä½œå‰åè‡ªåŠ¨å¡«å……å­—æ®µï¼ˆå¦‚åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä½¿ç”¨&lt;strong&gt;å‰ç½®é€šçŸ¥&lt;/strong&gt; (&lt;code&gt;@Before&lt;/code&gt;) é€šè¿‡åå°„ä¸ºå®ä½“å­—æ®µèµ‹å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Retryable&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•æ‰§è¡Œå¤±è´¥åæŒ‰ç­–ç•¥è‡ªåŠ¨é‡è¯•ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt;æˆ–&lt;strong&gt;å¼‚å¸¸é€šçŸ¥&lt;/strong&gt; (&lt;code&gt;@AfterThrowing&lt;/code&gt;) æ•è·å¼‚å¸¸å¹¶é‡è¯•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£aopå¦‚ä½•å·¥ä½œ"&gt;ğŸ’¡ ç†è§£AOPå¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†åƒæ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€æƒé™æ§åˆ¶è¿™ç±»éå¸ƒåœ¨å¤šä¸ªä¸šåŠ¡æ¨¡å—ä¸­çš„â€œæ¨ªåˆ‡å…³æ³¨ç‚¹â€ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå®ç°è§£è€¦å’Œä»£ç å¤ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Spring AOPä¸»è¦é€šè¿‡&lt;strong&gt;åŠ¨æ€ä»£ç†&lt;/strong&gt;æŠ€æœ¯å®ç°ä¸Šè¿°åŠŸèƒ½ã€‚å½“ä½ åœ¨ä¸€ä¸ªç±»çš„æ–¹æ³•ä¸Šä½¿ç”¨&lt;code&gt;@Transactional&lt;/code&gt;æ³¨è§£æ—¶ï¼ŒSpringå®¹å™¨åœ¨åˆ›å»ºè¿™ä¸ªç±»çš„Beanæ—¶ï¼Œå¹¶ä¸ä¼šç›´æ¥è¿”å›è¿™ä¸ªç±»çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¼šä¸ºå…¶ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚è¿™ä¸ªä»£ç†å¯¹è±¡åŒ…å«äº†äº‹åŠ¡ç®¡ç†çš„é€»è¾‘ã€‚å½“ä½ åœ¨åº”ç”¨ç¨‹åºä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ã€‚ä»£ç†å¯¹è±¡ä¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;å¼€å¯äº‹åŠ¡ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œ&lt;strong&gt;ä¹‹å&lt;/strong&gt;æäº¤äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æŠ›å‡ºå¼‚å¸¸åˆ™&lt;strong&gt;å›æ»š&lt;/strong&gt;äº‹åŠ¡ã€‚è¿™ä¸€åˆ‡å¯¹ä½ æ¥è¯´éƒ½æ˜¯é€æ˜çš„ï¼Œä½ åªéœ€è¦ä¸€ä¸ªç®€å•çš„æ³¨è§£ï¼Œè€Œæ— éœ€åœ¨ä¸šåŠ¡ä»£ç ä¸­ç¼–å†™é‡å¤çš„äº‹åŠ¡æ§åˆ¶è¯­å¥ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒaopæ³¨è§£"&gt;ğŸ› ï¸ æ ¸å¿ƒAOPæ³¨è§£
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ä¸Šé¢çš„æ³¨è§£å€ŸåŠ©äº†AOPï¼Œä½†Springä¹Ÿæä¾›äº†ä¸€å¥—ç›´æ¥ç”¨äºå®šä¹‰åˆ‡é¢çš„æ ¸å¿ƒæ³¨è§£ï¼Œè®©ä½ å¯ä»¥å®ç°è‡ªå®šä¹‰çš„æ¨ªåˆ‡é€»è¾‘ã€‚è¦ä½¿ç”¨å®ƒä»¬ï¼Œé¦–å…ˆéœ€è¦åœ¨é…ç½®ç±»ä¸Šä½¿ç”¨&lt;code&gt;@EnableAspectJAutoProxy&lt;/code&gt;æ³¨è§£æ¥å¼€å¯AOPçš„è‡ªåŠ¨ä»£ç†åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ˜¯è¿™äº›æ ¸å¿ƒAOPæ³¨è§£çš„ç®€è¦è¯´æ˜ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨è§£&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@Aspect&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ‡è®°ä¸€ä¸ªç±»ä¸º&lt;strong&gt;åˆ‡é¢&lt;/strong&gt;ç±»ï¼Œè¿™ä¸ªç±»å°†åŒ…å«å„ç§é€šçŸ¥å’Œåˆ‡å…¥ç‚¹å®šä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@Pointcut&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰&lt;strong&gt;åˆ‡å…¥ç‚¹&lt;/strong&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç”¨äºç¡®å®šåœ¨ç¨‹åºçš„å“ªäº›è¿æ¥ç‚¹ï¼ˆå¦‚æ–¹æ³•æ‰§è¡Œï¼‰åº”ç”¨é€šçŸ¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@Before&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‰ç½®é€šçŸ¥&lt;/strong&gt;ï¼šåœ¨ç›®æ ‡æ–¹æ³•&lt;strong&gt;æ‰§è¡Œä¹‹å‰&lt;/strong&gt;æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@AfterReturning&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›é€šçŸ¥&lt;/strong&gt;ï¼šåœ¨ç›®æ ‡æ–¹æ³•&lt;strong&gt;æˆåŠŸæ‰§è¡Œå¹¶è¿”å›ç»“æœå&lt;/strong&gt;æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@AfterThrowing&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼‚å¸¸é€šçŸ¥&lt;/strong&gt;ï¼šåœ¨ç›®æ ‡æ–¹æ³•&lt;strong&gt;æŠ›å‡ºå¼‚å¸¸å&lt;/strong&gt;æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@After&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åç½®é€šçŸ¥&lt;/strong&gt;ï¼šåœ¨ç›®æ ‡æ–¹æ³•&lt;strong&gt;æ‰§è¡Œä¹‹å&lt;/strong&gt;æ‰§è¡Œï¼Œ&lt;strong&gt;æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸&lt;/strong&gt;éƒ½ä¼šæ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@Around&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¯ç»•é€šçŸ¥&lt;/strong&gt;ï¼šåŠŸèƒ½æœ€å¼ºå¤§çš„é€šçŸ¥ï¼Œå¯ä»¥&lt;strong&gt;åŒ…å›´&lt;/strong&gt;ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼Œå®Œå…¨æ§åˆ¶æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="ä½¿ç”¨å»ºè®®ä¸åœºæ™¯"&gt;ä½¿ç”¨å»ºè®®ä¸åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šä½¿ç”¨åŸºäºAOPçš„æ³¨è§£èƒ½æ˜¾è‘—&lt;strong&gt;å‡å°‘ä»£ç é‡å¤&lt;/strong&gt;ï¼Œæé«˜ä»£ç çš„&lt;strong&gt;æ¨¡å—åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;å¯ç»´æŠ¤æ€§&lt;/strong&gt;ã€‚å®ƒè®©ä½ èƒ½ä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šAOPä¸»è¦ç”¨äºå¤„ç†&lt;strong&gt;æ–¹æ³•è°ƒç”¨&lt;/strong&gt;ç±»å‹çš„è¿æ¥ç‚¹ã€‚å¯¹äºè¿‡äºç»†ç²’åº¦çš„æ“ä½œæˆ–æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œéœ€è¦è°¨æ…è¯„ä¼°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£Springä¸­è¿™äº›å¼ºå¤§æ³¨è§£çš„å·¥ä½œåŸç†ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„æ³¨è§£æˆ–å…¶åº”ç”¨åœºæ™¯æœ‰æ›´è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è‡ªå®šä¹‰æ³¨è§£å»¶è¿ŸåŒåˆ "&gt;è‡ªå®šä¹‰æ³¨è§£å»¶è¿ŸåŒåˆ 
&lt;/h2&gt;&lt;p&gt;é€šè¿‡è‡ªå®šä¹‰æ³¨è§£å®ç°å»¶è¿ŸåŒåˆ ï¼Œæ˜¯è§£å†³ç¼“å­˜ä¸æ•°æ®åº“æ•°æ®ä¸€è‡´æ€§é—®é¢˜çš„ç»å…¸ç­–ç•¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åˆ©ç”¨Spring AOPä¼˜é›…åœ°å®ç°å®ƒã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£å»¶è¿ŸåŒåˆ "&gt;ğŸ§  ç†è§£å»¶è¿ŸåŒåˆ 
&lt;/h3&gt;&lt;p&gt;å»¶è¿ŸåŒåˆ ç­–ç•¥çš„æ ¸å¿ƒæ­¥éª¤åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ¬¡åˆ é™¤&lt;/strong&gt;ï¼šåœ¨æ›´æ–°æ•°æ®åº“&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼Œå…ˆåˆ é™¤Redisä¸­çš„ç¼“å­˜æ•°æ®ï¼Œé˜²æ­¢æ—§æ•°æ®è¢«åç»­è¯»è¯·æ±‚å‘½ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°æ•°æ®åº“&lt;/strong&gt;ï¼šæ‰§è¡Œå®é™…çš„æ•°æ®åº“æ›´æ–°æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿç­‰å¾…&lt;/strong&gt;ï¼šè®©å½“å‰çº¿ç¨‹ä¼‘çœ ä¸€æ®µçŸ­æš‚çš„æ—¶é—´ã€‚è¿™ä¸ªå»¶è¿Ÿæ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®åº“çš„æ›´æ–°æ“ä½œï¼ˆç‰¹åˆ«æ˜¯åœ¨ä¸»ä»å¤åˆ¶æ¶æ„ä¸‹ï¼‰å·²ç»å®Œæˆï¼Œå¹¶ä¸”æ¸…ç†æ‰åœ¨æ›´æ–°æœŸé—´å¯èƒ½è¢«å…¶ä»–è¯·æ±‚å†™å…¥åˆ°Redisçš„æ—§æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ¬¡åˆ é™¤&lt;/strong&gt;ï¼šå»¶è¿Ÿç»“æŸåï¼Œå†æ¬¡åˆ é™¤ç¼“å­˜ã€‚è¿™æ¬¡åˆ é™¤çš„ç›®çš„æ˜¯æ¸…é™¤åœ¨â€œæ›´æ–°æ•°æ®åº“â€åˆ°â€œå»¶è¿Ÿç­‰å¾…ç»“æŸâ€è¿™ä¸ªæ—¶é—´çª—å£å†…ï¼Œå¯èƒ½è¢«å…¶ä»–å¹¶å‘è¯»è¯·æ±‚é‡æ–°å­˜å…¥Redisçš„æ—§æ•°æ®ï¼Œä»è€Œç¡®ä¿åç»­çš„è¯»è¯·æ±‚èƒ½ä»æ•°æ®åº“è·å–æœ€æ–°æ•°æ®å¹¶é‡æ–°ç¼“å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®ç°æ­¥éª¤ä¸ä»£ç ç¤ºä¾‹"&gt;âš™ï¸ å®ç°æ­¥éª¤ä¸ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="1-åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£"&gt;1. åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£
&lt;/h4&gt;&lt;p&gt;é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªæ³¨è§£&lt;code&gt;@ClearAndReloadCache&lt;/code&gt;ï¼Œç”¨äºæ ‡è®°å“ªäº›æ–¹æ³•éœ€è¦è§¦å‘å»¶è¿ŸåŒåˆ é€»è¾‘ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Retention(RetentionPolicy.RUNTIME) // æ³¨è§£åœ¨è¿è¡Œæ—¶æœ‰æ•ˆ
@Documented
@Target(ElementType.METHOD) // è¯¥æ³¨è§£ç”¨äºæ–¹æ³•ä¸Š
public @interface ClearAndReloadCache {
String name() default &amp;#34;&amp;#34;; // ç”¨äºæ ‡è¯†ç¼“å­˜é”®çš„ç»„æˆéƒ¨åˆ†
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-ç¼–å†™åˆ‡é¢é€»è¾‘"&gt;2. ç¼–å†™åˆ‡é¢é€»è¾‘
&lt;/h4&gt;&lt;p&gt;æ¥ä¸‹æ¥æ˜¯å®ç°æ ¸å¿ƒé€»è¾‘çš„åˆ‡é¢ç±»ã€‚å®ƒä½¿ç”¨&lt;code&gt;@Around&lt;/code&gt;ç¯ç»•é€šçŸ¥æ¥æ‹¦æˆªæ‰€æœ‰å¸¦æœ‰&lt;code&gt;@ClearAndReloadCache&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Aspect
@Component
@Slf4j // ä½¿ç”¨Lombokç®€åŒ–æ—¥å¿—è®°å½•
public class ClearAndReloadCacheAspect {
@Autowired
private StringRedisTemplate stringRedisTemplate;
// å®šä¹‰åˆ‡å…¥ç‚¹ï¼šæ‰€æœ‰è¢«@ClearAndReloadCacheæ³¨è§£çš„æ–¹æ³•
@Pointcut(&amp;#34;@annotation(com.yourpackage.annotation.ClearAndReloadCache)&amp;#34;)
public void pointCut() {
}
@Around(&amp;#34;pointCut()&amp;#34;)
public Object aroundAdvice(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {
MethodSignature signature = (MethodSignature) proceedingJoinPoint.getSignature();
Method method = signature.getMethod();
ClearAndReloadCache annotation = method.getAnnotation(ClearAndReloadCache.class);
String cacheKeyPattern = annotation.name();
// 1. ç¬¬ä¸€æ¬¡åˆ é™¤ï¼šæ–¹æ³•æ‰§è¡Œå‰åˆ é™¤ç›¸å…³ç¼“å­˜
Set&amp;lt;String&amp;gt; keys = stringRedisTemplate.keys(&amp;#34;*&amp;#34; + cacheKeyPattern + &amp;#34;*&amp;#34;);
if (keys != null &amp;amp;&amp;amp; !keys.isEmpty()) {
stringRedisTemplate.delete(keys);
log.info(&amp;#34;å»¶è¿ŸåŒåˆ  - é¦–æ¬¡åˆ é™¤ç¼“å­˜å®Œæˆï¼Œé”®æ¨¡å¼ï¼š{}&amp;#34;, cacheKeyPattern);
}
// 2. æ‰§è¡ŒåŸä¸šåŠ¡æ–¹æ³•ï¼ˆå³æ›´æ–°æ•°æ®åº“ï¼‰
Object result = proceedingJoinPoint.proceed();
// 3. å¼‚æ­¥å»¶è¿Ÿåè¿›è¡Œç¬¬äºŒæ¬¡åˆ é™¤
CompletableFuture.runAsync(() -&amp;gt; {
try {
// è®¾ç½®å»¶è¿Ÿæ—¶é—´ï¼Œä¾‹å¦‚1000æ¯«ç§’ï¼ˆå¯æ ¹æ®ä¸šåŠ¡è°ƒæ•´ï¼‰
Thread.sleep(1000);
Set&amp;lt;String&amp;gt; keysToDelete = stringRedisTemplate.keys(&amp;#34;*&amp;#34; + cacheKeyPattern + &amp;#34;*&amp;#34;);
if (keysToDelete != null &amp;amp;&amp;amp; !keysToDelete.isEmpty()) {
stringRedisTemplate.delete(keysToDelete);
log.info(&amp;#34;å»¶è¿ŸåŒåˆ  - å»¶è¿ŸäºŒæ¬¡åˆ é™¤ç¼“å­˜å®Œæˆï¼Œé”®æ¨¡å¼ï¼š{}&amp;#34;, cacheKeyPattern);
}
} catch (InterruptedException e) {
Thread.currentThread().interrupt();
log.error(&amp;#34;å»¶è¿ŸåŒåˆ  - å»¶è¿Ÿä»»åŠ¡è¢«ä¸­æ–­&amp;#34;, e);
} catch (Exception e) {
log.error(&amp;#34;å»¶è¿ŸåŒåˆ  - ç¬¬äºŒæ¬¡åˆ é™¤ç¼“å­˜æ—¶å‘ç”Ÿå¼‚å¸¸&amp;#34;, e);
}
});
return result;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-åœ¨controllerä¸­ä½¿ç”¨æ³¨è§£"&gt;3. åœ¨Controllerä¸­ä½¿ç”¨æ³¨è§£
&lt;/h4&gt;&lt;p&gt;æœ€åï¼Œåœ¨éœ€è¦ä¿è¯ç¼“å­˜ä¸€è‡´æ€§çš„æ›´æ–°æ–¹æ³•ä¸Šä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@RestController
@RequestMapping(&amp;#34;/product&amp;#34;)
public class ProductController {
@Autowired
private ProductService productService;
@PostMapping(&amp;#34;/update&amp;#34;)
@ClearAndReloadCache(name = &amp;#34;product:detail:&amp;#34;) // æŒ‡å®šè¦æ¸…é™¤çš„ç¼“å­˜é”®æ¨¡å¼
public Result updateProduct(@RequestBody Product product) {
return productService.update(product);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…³é”®é…ç½®ä¸ä¼˜åŒ–å»ºè®®"&gt;ğŸ’¡ å…³é”®é…ç½®ä¸ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è®©æ–¹æ¡ˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ›´å¯é ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡®å®šå»¶è¿Ÿæ—¶é—´&lt;/strong&gt;ï¼šå»¶è¿Ÿæ—¶é—´æ˜¯å…³é”®å‚æ•°ã€‚å®ƒéœ€è¦å¤§äºæ•°æ®åº“ä¸»ä»å¤åˆ¶å¯èƒ½çš„æœ€å¤§å»¶è¿Ÿæ—¶é—´ï¼Œå¹¶åŠ ä¸Šä¸€å®šçš„ä¸šåŠ¡å¤„ç†è€—æ—¶å’Œå®‰å…¨å†—ä½™ã€‚é€šå¸¸å¯ä»¥ä»&lt;strong&gt;500æ¯«ç§’åˆ°2ç§’&lt;/strong&gt;å¼€å§‹è¯•éªŒï¼Œå¹¶é€šè¿‡ç›‘æ§ç³»ç»Ÿï¼ˆå¦‚Prometheusï¼‰è§‚å¯Ÿæ•°æ®åº“ä¸»ä»å¤åˆ¶çš„P99å»¶è¿Ÿæ¥åŠ¨æ€è°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨å¼‚æ­¥ä¸çº¿ç¨‹æ± &lt;/strong&gt;ï¼šç¬¬äºŒæ¬¡åˆ é™¤æ“ä½œ&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½¿ç”¨å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼ˆå¦‚&lt;code&gt;CompletableFuture.runAsync&lt;/code&gt;æˆ–é…ç½®å¥½çš„çº¿ç¨‹æ± ï¼‰ï¼Œä»¥é¿å…é˜»å¡ä¸»ä¸šåŠ¡æµç¨‹ï¼Œå½±å“æ¥å£å“åº”æ—¶é—´ã€‚åŒæ—¶ï¼Œåº”ä¸ºå¼‚æ­¥ä»»åŠ¡é…ç½®&lt;strong&gt;æœ‰ç•Œé˜Ÿåˆ—&lt;/strong&gt;å’Œåˆç†çš„æ‹’ç»ç­–ç•¥ï¼Œé˜²æ­¢ä»»åŠ¡å †ç§¯å¯¼è‡´å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®é™çº§å¼€å…³&lt;/strong&gt;ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸ºå»¶è¿ŸåŒåˆ é€»è¾‘é…ç½®ä¸€ä¸ªå¼€å…³ï¼ˆå¦‚é€šè¿‡é…ç½®ä¸­å¿ƒ&lt;code&gt;@Value(&amp;quot;${delay.delete.enabled:true}&amp;quot;)&lt;/code&gt;ï¼‰ã€‚åœ¨ç³»ç»Ÿé«˜è´Ÿè½½æˆ–å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿé™çº§ä¸ºåªæ‰§è¡Œä¸€æ¬¡ç«‹å³åˆ é™¤ï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å±€é™"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸å±€é™
&lt;/h3&gt;&lt;p&gt;å»¶è¿ŸåŒåˆ ç­–ç•¥æä¾›çš„æ˜¯&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼Œå¹¶éå¼ºä¸€è‡´æ€§ã€‚å®ƒé€‚ç”¨äº&lt;strong&gt;è¯»å¤šå†™å°‘&lt;/strong&gt;çš„åœºæ™¯ã€‚å¯¹äºå†™æ“ä½œæå…¶é¢‘ç¹çš„æ•°æ®ï¼Œé¢‘ç¹çš„åˆ é™¤ç¼“å­˜ä¼šä¸¥é‡é™ä½ç¼“å­˜å‘½ä¸­ç‡ï¼Œåè€Œä¸åˆ©äºæ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå¼‚æ­¥æ‰§è¡Œçš„ç¬¬äºŒæ¬¡åˆ é™¤æ“ä½œå­˜åœ¨æå°çš„å¤±è´¥é£é™©ã€‚å¦‚æœä¸šåŠ¡å¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œå¯ä»¥è€ƒè™‘å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ›´å¯é çš„æ–¹æ¡ˆæ¥ä¿è¯ç¬¬äºŒæ¬¡åˆ é™¤çš„æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å®ç°æ–¹æ¡ˆå¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ åœ¨å…·ä½“å®è·µä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cacheable"&gt;@Cacheable
&lt;/h2&gt;&lt;p&gt;Spring çš„ &lt;code&gt;@Cacheable&lt;/code&gt;æ³¨è§£åœ¨å°†æ•°æ®å­˜å…¥ Redis æ—¶ï¼Œå…¶å­˜å‚¨çš„æ•°æ®ç±»å‹å’Œç»“æ„ä¸»è¦å–å†³äºæ‚¨çš„åºåˆ—åŒ–é…ç½®ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†ä¸åŒé…ç½®ä¸‹çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åºåˆ—åŒ–æ–¹å¼&lt;/th&gt;
&lt;th&gt;Redis æ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;å­˜å‚¨ç»“æ„è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹ä¸æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤é…ç½® (JDKåºåˆ—åŒ–)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;String (å­—ç¬¦ä¸²)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ–¹æ³•çš„è¿”å›ç»“æœï¼ˆå¦‚ Listï¼‰é€šè¿‡ JDK åºåˆ—åŒ–æœºåˆ¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—èŠ‚æµï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“çš„å­—ç¬¦ä¸²å€¼å­˜å‚¨ã€‚Key çš„æ ¼å¼é€šå¸¸ä¸º &lt;code&gt;ç¼“å­˜åç§°::è‡ªå®šä¹‰Keyæˆ–è‡ªåŠ¨ç”ŸæˆKey&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯è¯»æ€§å·®&lt;/strong&gt;ï¼šRedis ä¸­æŸ¥çœ‹æ˜¯ä¹±ç ã€‚&lt;strong&gt;è·¨è¯­è¨€ä¸å‹å¥½&lt;/strong&gt;ï¼šå…¶ä»–è¯­è¨€ç¨‹åºéš¾ä»¥è§£æã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰ä¸º JSON åºåˆ—åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;String (å­—ç¬¦ä¸²)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å¯¹è±¡ï¼ˆå¦‚ Listï¼‰åºåˆ—åŒ–ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²åè¿›è¡Œå­˜å‚¨ã€‚Key ä»ç„¶æ˜¯å­—ç¬¦ä¸²ï¼ŒValue æ˜¯ç»“æ„åŒ–çš„ JSON æ–‡æœ¬ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯è¯»æ€§å¥½&lt;/strong&gt;ï¼šå¯ç›´æ¥æŸ¥çœ‹ JSON ç»“æ„ã€‚&lt;strong&gt;è·¨è¯­è¨€å‹å¥½&lt;/strong&gt;ï¼šæ˜¯é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="é…ç½®æŒ‡å—ä¸ç¤ºä¾‹"&gt;é…ç½®æŒ‡å—ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å°†é»˜è®¤çš„ JDK åºåˆ—åŒ–æ”¹ä¸º JSON åºåˆ—åŒ–å¯ä»¥æ˜¾è‘—æå‡æ•°æ®çš„å¯è¯»æ€§å’Œå®ç”¨æ€§ã€‚ä»¥ä¸‹æ˜¯å…³é”®çš„é…ç½®æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
@EnableCaching
public class MyCacheConfig {
@Bean
public RedisCacheConfiguration redisCacheConfiguration(CacheProperties cacheProperties) {
// è·å–é»˜è®¤é…ç½®
RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig();
// è®¾ç½® Key çš„åºåˆ—åŒ–å™¨ä¸ºå­—ç¬¦ä¸²åºåˆ—åŒ–å™¨
config = config.serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(new StringRedisSerializer()));
// è®¾ç½® Value çš„åºåˆ—åŒ–å™¨ä¸º Jackson çš„ JSON åºåˆ—åŒ–å™¨
config = config.serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer()));
// ä»¥ä¸‹ä»£ç ç¡®ä¿åœ¨è‡ªå®šä¹‰é…ç½®åï¼Œé…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ï¼ˆå¦‚TTLï¼‰ä¾ç„¶ç”Ÿæ•ˆ
CacheProperties.Redis redisProperties = cacheProperties.getRedis();
if (redisProperties.getTimeToLive() != null) {
config = config.entryTtl(redisProperties.getTimeToLive());
}
if (redisProperties.getKeyPrefix() != null) {
config = config.prefixCacheNameWith(redisProperties.getKeyPrefix());
}
if (!redisProperties.isCacheNullValues()) {
config = config.disableCachingNullValues();
}
if (!redisProperties.isUseKeyPrefix()) {
config = config.disableKeyPrefix();
}
return config;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ &lt;code&gt;application.yml&lt;/code&gt;ä¸­çš„ç›¸å…³é…ç½®ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;spring:
cache:
type: redis
redis:
time-to-live: 3600000 # ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå•ä½æ¯«ç§’
cache-null-values: true # æ˜¯å¦ç¼“å­˜ç©ºå€¼ï¼Œå¯ç”¨äºé˜²æ­¢ç¼“å­˜ç©¿é€
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å®ç”¨å»ºè®®"&gt;ğŸ’¡ å®ç”¨å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é”®ï¼ˆKeyï¼‰çš„ç”Ÿæˆ&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;@Cacheable&lt;/code&gt;æ³¨è§£æ—¶ï¼Œå¼ºçƒˆå»ºè®®é€šè¿‡ &lt;code&gt;key&lt;/code&gt;å±æ€§æ˜ç¡®æŒ‡å®šé”®çš„ç”Ÿæˆè§„åˆ™ï¼Œä¾‹å¦‚ &lt;code&gt;@Cacheable(value = &amp;quot;users&amp;quot;, key = &amp;quot;'list'&amp;quot;)&lt;/code&gt;ã€‚å¦‚æœä¸æŒ‡å®šï¼ŒSpring ä¼šä½¿ç”¨é»˜è®¤ç­–ç•¥ç”Ÿæˆï¼Œå¯è¯»æ€§è¾ƒå·®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šSpring Cache æä¾›çš„æ³¨è§£æ–¹å¼éå¸¸é€‚ç”¨äº&lt;strong&gt;è¯»å¤šå†™å°‘&lt;/strong&gt;ã€å¯¹&lt;strong&gt;å³æ—¶æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;è¦æ±‚ä¸æ˜¯ç‰¹åˆ«é«˜çš„å¸¸è§„æ•°æ®åœºæ™¯ï¼Œèƒ½æå¤§ç®€åŒ–ç¼“å­˜å¼€å‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Spring Cacheã€‚å¦‚æœæ‚¨åœ¨å…·ä½“é…ç½®ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è‡ªå®šä¹‰æ³¨è§£"&gt;è‡ªå®šä¹‰æ³¨è§£
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œé€šè¿‡è‡ªå®šä¹‰æ³¨è§£å°†è¿”å›å€¼å­˜ä¸º &lt;strong&gt;Redis Hash&lt;/strong&gt; æˆ–ç²¾å¿ƒè®¾è®¡çš„ &lt;strong&gt;List&lt;/strong&gt; ç»“æ„ï¼Œç¡®å®å¯ä»¥å®ç°æ¯”ç®€å•å­˜å‚¨æ•´ä¸ªå¯¹è±¡æ›´é«˜çš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†é›†åˆæ•°æ®æˆ–å¤æ‚å¯¹è±¡æ—¶ã€‚è¿™æœ¬è´¨ä¸Šæ˜¯&lt;strong&gt;æ•°æ®å­˜å‚¨ç²’åº¦&lt;/strong&gt;å’Œ&lt;strong&gt;è®¿é—®æ¨¡å¼&lt;/strong&gt;çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨å¯¹æ¯”äº†è¿™å‡ ç§å­˜å‚¨æ–¹å¼çš„æ€§èƒ½ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­˜å‚¨æ–¹å¼&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€æƒ³ä¸æ€§èƒ½ä¼˜åŠ¿&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯ä¸¾ä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥å­˜å‚¨æ•´ä¸ªList/å¯¹è±¡&lt;/strong&gt; (é»˜è®¤çš„JSONåºåˆ—åŒ–)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®ç°ç®€å•&lt;/strong&gt;ã€‚ä½†&lt;strong&gt;è¯»å†™ç²’åº¦ç²—&lt;/strong&gt;ï¼šä»»ä½•ä¿®æ”¹éƒ½éœ€&lt;strong&gt;åºåˆ—åŒ–/ååºåˆ—åŒ–æ•´ä¸ªé›†åˆ&lt;/strong&gt;ï¼Œç½‘ç»œä¼ è¾“æ•°æ®é‡å¤§ã€‚&lt;/td&gt;
&lt;td&gt;æ•°æ®é‡å°ã€è®¿é—®é¢‘ç‡ä½ã€ä¸”æ€»æ˜¯&lt;strong&gt;æ•´ä½“è¯»å†™&lt;/strong&gt;çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€æ¬¡æ€§è·å–çš„é…ç½®åˆ—è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ä¸ºRedis Hash&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»†ç²’åº¦è¯»å†™&lt;/strong&gt;ï¼šå¯å°†å¯¹è±¡çš„å„ä¸ªå­—æ®µæˆ–é›†åˆä¸­çš„å•ä¸ªå…ƒç´ åˆ†åˆ«å­˜å‚¨ï¼Œæ”¯æŒ&lt;strong&gt;ç›´æ¥ä¿®æ”¹å•ä¸ªå­—æ®µ&lt;/strong&gt;è€Œæ— éœ€è¯»å†™æ•´ä¸ªå¯¹è±¡ï¼Œæå¤§å‡å°‘ç½‘ç»œä¼ è¾“å’Œæ•°æ®åºåˆ—åŒ–å¼€é”€ã€‚&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;å¤§å‹å¯¹è±¡ç¼“å­˜&lt;/strong&gt;ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼Œåªæ›´æ–°æœ€åç™»å½•æ—¶é—´ï¼‰ã€‚ 2. &lt;strong&gt;å¯¹è±¡é›†åˆç¼“å­˜&lt;/strong&gt;ï¼šå°†é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ ä»¥å…¶å”¯ä¸€IDï¼ˆæˆ–ç‰¹å®šå­—æ®µï¼‰ä½œä¸ºfieldå­˜å…¥ä¸€ä¸ªHashï¼Œå®ç°æŒ‰keyå¿«é€Ÿå®šä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç²¾å¿ƒè®¾è®¡ç»“æ„çš„List&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨Listçš„ç‰¹æ€§æ”¯æŒç‰¹å®šè®¿é—®æ¨¡å¼ã€‚æ€§èƒ½æå‡å…³é”®åœ¨äº&lt;strong&gt;é¿å…æ“ä½œæ•´ä¸ªList&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;åˆ†é¡µæŸ¥è¯¢&lt;/strong&gt;ï¼šåˆ©ç”¨&lt;code&gt;LRANGE&lt;/code&gt;å‘½ä»¤åªè·å–æŒ‡å®šèŒƒå›´å…ƒç´ ï¼Œæ— éœ€ä¼ è¾“å…¨éƒ¨ã€‚ 2. &lt;strong&gt;æ—¶åºæ•°æ®æˆ–é˜Ÿåˆ—&lt;/strong&gt;ï¼šåˆ©ç”¨Listçš„å¤©ç„¶é¡ºåºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•å®ç°è‡ªå®šä¹‰æ³¨è§£"&gt;ğŸ”§ å¦‚ä½•å®ç°è‡ªå®šä¹‰æ³¨è§£
&lt;/h3&gt;&lt;p&gt;è¦å®ç°ä¸Šè¿°ä¼˜åŒ–ï¼Œæ ¸å¿ƒæ˜¯åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ï¼Œå¹¶åˆ©ç”¨Spring AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰åœ¨æ–¹æ³•æ‰§è¡Œå‰åä»‹å…¥ç¼“å­˜é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. å®šä¹‰æ³¨è§£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºæŒ‡å®šç¼“å­˜ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼ˆå¦‚Hashï¼‰å’Œé”®çš„ç”Ÿæˆè§„åˆ™ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface CustomCache {
String key(); // ç¼“å­˜çš„ä¸»é”®
DataStructure dataStructure() default DataStructure.HASH; // é»˜è®¤ä¸ºHashç»“æ„
long ttl() default 3600; // è¿‡æœŸæ—¶é—´ï¼Œç§’
}
enum DataStructure {
HASH,
LIST
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. å®ç°AOPåˆ‡é¢é€»è¾‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªåˆ‡é¢ç±»æ¥æ‹¦æˆªå¸¦æœ‰&lt;code&gt;@CustomCache&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Aspect
@Component
public class CustomCacheAspect {
@Autowired
private RedisTemplate&amp;lt;String, Object&amp;gt; redisTemplate;
@Around(&amp;#34;@annotation(customCache)&amp;#34;)
public Object handleCache(ProceedingJoinPoint joinPoint, CustomCache customCache) throws Throwable {
String cacheKey = generateCacheKey(joinPoint, customCache.key());
// 1. åˆ¤æ–­ä½¿ç”¨å“ªç§æ•°æ®ç»“æ„
if (customCache.dataStructure() == DataStructure.HASH) {
return handleHashCache(joinPoint, cacheKey, customCache);
} else if (customCache.dataStructure() == DataStructure.LIST) {
return handleListCache(joinPoint, cacheKey, customCache);
}
// ... å…¶ä»–ç»“æ„çš„å¤„ç†
return joinPoint.proceed();
}
private Object handleHashCache(ProceedingJoinPoint joinPoint, String cacheKey, CustomCache customCache) throws Throwable {
// æ£€æŸ¥æ•´ä¸ªHashæ˜¯å¦å­˜åœ¨ï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥ä¸€ä¸ªç‰¹å®šçš„å­—æ®µï¼‰
if (Boolean.TRUE.equals(redisTemplate.opsForHash().hasKey(cacheKey, &amp;#34;existenceMarker&amp;#34;))) {
// ç¼“å­˜å‘½ä¸­ï¼šä»Hashä¸­ååºåˆ—åŒ–å¹¶ç»„è£…æ•°æ®
Map&amp;lt;Object, Object&amp;gt; entries = redisTemplate.opsForHash().entries(cacheKey);
return convertToReturnType(entries); // å°†Mapè½¬æ¢ä¸ºæ–¹æ³•è¿”å›çš„ç±»å‹ï¼Œå¦‚List&amp;lt;User&amp;gt;
} else {
// ç¼“å­˜æœªå‘½ä¸­ï¼šæ‰§è¡ŒåŸæ–¹æ³•
Object result = joinPoint.proceed();
// å°†ç»“æœï¼ˆä¾‹å¦‚ä¸€ä¸ªListï¼‰è½¬æ¢ä¸ºMapï¼Œä»¥æ¯ä¸ªå…ƒç´ çš„IDä½œä¸ºField
if (result instanceof List&amp;lt;?&amp;gt; resultList) {
Map&amp;lt;String, Object&amp;gt; hashData = new HashMap&amp;lt;&amp;gt;();
for (Object item : resultList) {
// å‡è®¾itemæœ‰ä¸€ä¸ªgetId()æ–¹æ³•
String field = String.valueOf(getIdFromItem(item));
hashData.put(field, item);
}
// å°†æ•´ä¸ªMapå­˜å…¥Hash
redisTemplate.opsForHash().putAll(cacheKey, hashData);
// è®¾ç½®è¿‡æœŸæ—¶é—´
redisTemplate.expire(cacheKey, customCache.ttl(), TimeUnit.SECONDS);
}
return result;
}
}
// ... handleListCache ç­‰å…¶ä»–æ–¹æ³•
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€§èƒ½æå‡çš„å…³é”®ä¸æƒè¡¡"&gt;ğŸ’¡ æ€§èƒ½æå‡çš„å…³é”®ä¸æƒè¡¡
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©æ›´ä¼˜çš„æ•°æ®ç»“æ„æ˜¯ä¸ºäº†è§£å†³ç‰¹å®šç—›ç‚¹ï¼Œä½†å®ƒä¹Ÿå¸¦æ¥äº†é¢å¤–çš„å¤æ‚åº¦ï¼Œéœ€è¦ä½ ä»”ç»†æƒè¡¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Hashç»“æ„çš„ä¼˜åŠ¿&lt;/strong&gt;ï¼šå½“ä½ çš„ä¸šåŠ¡åœºæ™¯ä¸­ç»å¸¸éœ€è¦&lt;strong&gt;æ›´æ–°é›†åˆä¸­å•ä¸ªå…ƒç´ &lt;/strong&gt;æˆ–&lt;strong&gt;åªè·å–éƒ¨åˆ†æ•°æ®&lt;/strong&gt;æ—¶ï¼ŒHashçš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼Œå…¶ä¸­æŸä¸ªç”¨æˆ·çš„çŠ¶æ€é¢‘ç¹æ›´æ–°ï¼Œç”¨Hashå¯ä»¥åªæ›´æ–°è¯¥ç”¨æˆ·å¯¹åº”çš„å­—æ®µï¼Œæ•ˆç‡æé«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Listç»“æ„çš„é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¦‚æœä½ çš„æ•°æ®è®¿é—®æ¨¡å¼æ˜¯&lt;strong&gt;é¡ºåºæ€§çš„&lt;/strong&gt;ï¼ˆå¦‚æ¶ˆæ¯æµã€æ—¶é—´çº¿ï¼‰æˆ–&lt;strong&gt;åˆ†é¡µçš„&lt;/strong&gt;ï¼ŒListçš„&lt;code&gt;LRANGE&lt;/code&gt;å‘½ä»¤ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒèƒ½ç›´æ¥åˆ©ç”¨åˆ—è¡¨çš„ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¦æ¥çš„å¤æ‚åº¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åºåˆ—åŒ–/ååºåˆ—åŒ–&lt;/strong&gt;ï¼šä½ å¯èƒ½éœ€è¦å¤„ç†æ›´å¤æ‚çš„å¯¹è±¡è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¡®ä¿æ•°æ®åº“æ›´æ–°åï¼Œç¼“å­˜ä¸­çš„Hashæˆ–Listèƒ½æ­£ç¡®å¤±æ•ˆæˆ–æ›´æ–°ï¼Œè¿™å¯èƒ½æ¯”ç®€å•å¤±æ•ˆæ•´ä¸ªKeyæ›´å¤æ‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®è·µå»ºè®®-1"&gt;ğŸ’ å®è·µå»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘è®¿é—®æ¨¡å¼&lt;/strong&gt;ï¼šä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–ã€‚å¦‚æœä½ çš„é›†åˆæ•°æ®&lt;strong&gt;æ€»æ˜¯è¢«æ•´ä½“è®¿é—®&lt;/strong&gt;ï¼Œä¸”&lt;strong&gt;æ›´æ–°ä¸é¢‘ç¹&lt;/strong&gt;ï¼Œé‚£ä¹ˆç›´æ¥å­˜å‚¨æ•´ä¸ªListå¯èƒ½æ˜¯æœ€ç®€å•ã€æ€§èƒ½ä¹Ÿè¶³å¤Ÿå¥½çš„æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»ç®€å•å¼€å§‹&lt;/strong&gt;ï¼šåˆæœŸå¯ä»¥ç›´æ¥ä½¿ç”¨Spring Cacheçš„&lt;code&gt;@Cacheable&lt;/code&gt;ç­‰æ ‡å‡†æ³¨è§£ã€‚å½“ç›‘æ§å‘ç°æŸäº›ç¼“å­˜æˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œä¸”å…¶è®¿é—®æ¨¡å¼é€‚åˆæ›´ç»†ç²’åº¦çš„æ§åˆ¶æ—¶ï¼Œå†è€ƒè™‘å¼•å…¥è‡ªå®šä¹‰æ³¨è§£çš„æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨ç¼“å­˜å¤±æ•ˆ&lt;/strong&gt;ï¼šç»†ç²’åº¦ç¼“å­˜å¯¹ç¼“å­˜å¤±æ•ˆç­–ç•¥è¦æ±‚æ›´é«˜ã€‚è¦è®¾è®¡å¥½å½“åº•å±‚æ•°æ®å‘ç”Ÿå¢ã€åˆ ã€æ”¹æ—¶ï¼Œå¦‚ä½•ç²¾å‡†åœ°æ›´æ–°æˆ–å¤±æ•ˆç¼“å­˜ä¸­çš„ç›¸å…³éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ åšå‡ºæ›´åˆé€‚çš„æŠ€æœ¯å†³ç­–ï¼å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="c-ä¸­æ–‡å­—ç¬¦"&gt;c++ ä¸­æ–‡å­—ç¬¦
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­æ­£ç¡®å¤„ç†ä¸­æ–‡å­—ç¬¦çš„éå†ï¼Œå…³é”®åœ¨äºç†è§£å­—ç¬¦ç¼–ç å¹¶é€‰æ‹©æ­£ç¡®çš„å¤„ç†æ–¹æ³•ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒçš„éå†æ–¹æ³•ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€è·¯&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰‹åŠ¨è§£æç¼–ç &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ä½è¿ç®—åˆ¤æ–­ UTF-8 å­—ç¬¦çš„å­—èŠ‚é•¿åº¦ï¼ŒæŒ‰å®Œæ•´å­—ç¬¦æå–ã€‚&lt;/td&gt;
&lt;td&gt;æ— ç¬¬ä¸‰æ–¹åº“ä¾èµ–ã€éœ€è½»é‡çº§å¤„ç†ã€è·¨å¹³å°é¡¹ç›®ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ä¾èµ–å¤–éƒ¨åº“ï¼Œçµæ´»æ€§å¼ºï¼Œæœ‰åŠ©äºç†è§£ç¼–ç åŸç†ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è‡ªè¡Œå¤„ç†ç¼–ç ç»†èŠ‚ï¼Œæ˜“å‡ºé”™ï¼Œä¸æ”¯æŒæ‰€æœ‰ Unicode å¤æ‚ç‰¹æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®½å­—ç¬¦ä¸ &lt;code&gt;std::wstring&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;wchar_t&lt;/code&gt;å’Œå®½å­—ç¬¦ä¸²ç±»å‹ï¼Œæ¯ä¸ªå­—ç¬¦æœ‰å›ºå®šå®½åº¦ã€‚&lt;/td&gt;
&lt;td&gt;Windows å¹³å°å¼€å‘ï¼Œå¤„ç†å·²çŸ¥ç¼–ç ï¼ˆå¦‚ UTF-16LEï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨ç‰¹å®šå¹³å°ï¼ˆå¦‚ Windowsï¼‰ä¸Šå¯¹å®½å­—ç¬¦æ”¯æŒè¾ƒå¥½ã€‚&lt;/td&gt;
&lt;td&gt;è·¨å¹³å°å…¼å®¹æ€§å·®ï¼ˆ&lt;code&gt;wchar_t&lt;/code&gt;é•¿åº¦éšå¹³å°å˜åŒ–ï¼‰ï¼Œéœ€å¤„ç†ç¼–ç è½¬æ¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ ICU, utf8.hï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ä¸“ä¸š Unicode åº“å¤„ç†ç¼–ç è½¬æ¢å’Œå­—ç¬¦ä¸²éå†ã€‚&lt;/td&gt;
&lt;td&gt;å¤æ‚æ–‡æœ¬å¤„ç†ï¼ˆå¦‚æ··åˆæ–‡å­—ã€ç”Ÿåƒ»å­—ã€å­—å½¢ç»„åˆï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;åŠŸèƒ½å…¨é¢ï¼Œå¯é æ€§é«˜ï¼Œä¸¥æ ¼éµå¾ª Unicode æ ‡å‡†ã€‚&lt;/td&gt;
&lt;td&gt;å¼•å…¥å¤–éƒ¨ä¾èµ–ï¼Œå¯èƒ½å¢åŠ é¡¹ç›®å¤æ‚åº¦å’Œä½“ç§¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ–¹æ³•ä¸€æ‰‹åŠ¨è§£æ-utf-8-ç¼–ç "&gt;ğŸ”§ æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è§£æ UTF-8 ç¼–ç 
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€åŸºç¡€çš„æ–¹æ³•ï¼Œç›´æ¥åŸºäº UTF-8 ç¼–ç è§„åˆ™è¿›è¡Œå­—èŠ‚è§£æã€‚UTF-8 æ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼Œæ¯ä¸ªå­—ç¬¦å¯èƒ½ç”± 1 åˆ° 4 ä¸ªå­—èŠ‚ç»„æˆã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¯ä¸ªå­—èŠ‚çš„å‰å‡ ä½æ¯”ç‰¹æ¥åˆ¤æ–­å®ƒå±äºä¸€ä¸ªå­—ç¬¦çš„å“ªä¸ªéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;string&amp;gt;
// è®¡ç®— UTF-8 å­—ç¬¦çš„å­—èŠ‚é•¿åº¦
size_t utf8_char_len(unsigned char lead_byte) {
if (lead_byte &amp;lt; 0x80) return 1; // å•å­—èŠ‚å­—ç¬¦ (0xxxxxxx)
else if ((lead_byte &amp;amp; 0xE0) == 0xC0) return 2; // åŒå­—èŠ‚å­—ç¬¦ (110xxxxx)
else if ((lead_byte &amp;amp; 0xF0) == 0xE0) return 3; // ä¸‰å­—èŠ‚å­—ç¬¦ (1110xxxx)
else if ((lead_byte &amp;amp; 0xF8) == 0xF0) return 4; // å››å­—èŠ‚å­—ç¬¦ (11110xxx)
return 1; // é»˜è®¤æŒ‰å•å­—èŠ‚å¤„ç†
}
int main() {
std::string text = u8&amp;#34;ä½ å¥½ï¼Œä¸–ç•Œï¼Hello!&amp;#34;; // ç¡®ä¿æºç ä¸º UTF-8 ç¼–ç 
std::string output;
for (size_t i = 0; i &amp;lt; text.length(); ) {
// è·å–å½“å‰å­—ç¬¦çš„å­—èŠ‚é•¿åº¦
size_t char_len = utf8_char_len(static_cast&amp;lt;unsigned char&amp;gt;(text[i]));
// æå–å®Œæ•´å­—ç¬¦
std::string single_char = text.substr(i, char_len);
output.append(single_char + &amp;#34; &amp;#34;); // ç”¨ç©ºæ ¼åˆ†éš”
i += char_len; // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦çš„èµ·å§‹ä½ç½®
}
std::cout &amp;lt;&amp;lt; output &amp;lt;&amp;lt; std::endl; // è¾“å‡º: ä½  å¥½ ï¼Œ ä¸– ç•Œ ï¼ H e l l o !
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¦ç‚¹è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç è§„åˆ™&lt;/strong&gt;ï¼šUTF-8 å­—ç¬¦çš„é¦–å­—èŠ‚çš„é«˜ä½æ¯”ç‰¹æŒ‡æ˜äº†è¯¥å­—ç¬¦æ€»å…±å ç”¨çš„å­—èŠ‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;u8&lt;/code&gt;å‰ç¼€ï¼šåœ¨ C++11 åŠä»¥ä¸Šæ ‡å‡†ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;u8&lt;/code&gt;å‰ç¼€å¯ä»¥ç¡®ä¿å­—ç¬¦ä¸²å­—é¢é‡ä»¥ UTF-8 ç¼–ç å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;ï¼šæ­¤æ–¹æ³•å‡è®¾è¾“å…¥çš„ UTF-8 åºåˆ—æ˜¯æœ‰æ•ˆçš„ã€‚å¯¹äºæ— æ•ˆåºåˆ—ï¼Œéœ€è¦æ›´å¤æ‚çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ–¹æ³•äºŒä½¿ç”¨å®½å­—ç¬¦-stdwstring"&gt;ğŸ’» æ–¹æ³•äºŒï¼šä½¿ç”¨å®½å­—ç¬¦ &lt;code&gt;std::wstring&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;è¿™ç§æ–¹æ³•è¯•å›¾å°†å¤šå­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºå®½å­—ç¬¦å­—ç¬¦ä¸²ï¼Œå…¶ä¸­æ¯ä¸ª &lt;code&gt;wchar_t&lt;/code&gt;å…ƒç´ ç†æƒ³æƒ…å†µä¸‹å¯¹åº”ä¸€ä¸ª Unicode ç ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;string&amp;gt;
#include &amp;lt;locale&amp;gt;
#include &amp;lt;codecvt&amp;gt; // C++17 ä¸­å·²å¼ƒç”¨ï¼Œä½†è®¸å¤šç¼–è¯‘å™¨ä»æ”¯æŒ
int main() {
// è®¾ç½®å…¨å±€æœ¬åœ°åŒ–ç¯å¢ƒï¼ˆå¯¹å®½å­—ç¬¦è¾“å‡ºå¾ˆé‡è¦ï¼‰
std::locale::global(std::locale(&amp;#34;&amp;#34;));
std::string utf8_str = u8&amp;#34;ä½ å¥½ï¼Œä¸–ç•Œï¼&amp;#34;;
// ä½¿ç”¨è½¬æ¢å™¨ï¼ˆæ³¨æ„ï¼šcodecvt åœ¨ C++17 ä¸­å¼ƒç”¨ï¼‰
std::wstring_convert&amp;lt;std::codecvt_utf8&amp;lt;wchar_t&amp;gt;&amp;gt; converter;
std::wstring wide_str = converter.from_bytes(utf8_str);
// éå†å®½å­—ç¬¦ä¸²
for (wchar_t wc : wide_str) {
std::wcout &amp;lt;&amp;lt; wc &amp;lt;&amp;lt; L&amp;#34; &amp;#34;; // ä½¿ç”¨ wcout è¾“å‡ºå®½å­—ç¬¦
}
std::wcout &amp;lt;&amp;lt; std::endl;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¦ç‚¹è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹³å°å·®å¼‚&lt;/strong&gt;ï¼š&lt;code&gt;wchar_t&lt;/code&gt;çš„å¤§å°å› å¹³å°è€Œå¼‚ï¼ˆWindows ä¸Šé€šå¸¸ä¸º 2 å­—èŠ‚ï¼ŒLinux ä¸Šé€šå¸¸ä¸º 4 å­—èŠ‚ï¼‰ï¼Œè¿™ä¼šå½±å“å…¶èƒ½è¡¨ç¤ºçš„å­—ç¬¦èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ƒç”¨è­¦å‘Š&lt;/strong&gt;ï¼š&lt;code&gt;std::wstring_convert&lt;/code&gt;å’Œ &lt;code&gt;std::codecvt&lt;/code&gt;åœ¨ C++17 æ ‡å‡†ä¸­å·²è¢«å¼ƒç”¨ï¼Œæ„å‘³ç€æœªæ¥çš„æ ‡å‡†åº“å¯èƒ½ä¼šç§»é™¤å®ƒä»¬ã€‚è™½ç„¶ç›®å‰ä¸»æµç¼–è¯‘å™¨ä»æ”¯æŒï¼Œä½†æ–°é¡¹ç›®åº”è°¨æ…ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶å°è®¾ç½®&lt;/strong&gt;ï¼šæ­£ç¡®è¾“å‡ºå®½å­—ç¬¦ï¼ˆ&lt;code&gt;std::wcout&lt;/code&gt;ï¼‰éœ€è¦è®¾ç½®åˆé€‚çš„æœ¬åœ°åŒ–ç¯å¢ƒï¼ˆ&lt;code&gt;std::locale&lt;/code&gt;ï¼‰å’Œæ§åˆ¶å°ç¼–ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ–¹æ³•ä¸‰ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒ"&gt;ğŸ“š æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
&lt;/h3&gt;&lt;p&gt;å¯¹äºéœ€è¦ç¨³å®šã€å‡†ç¡®å¤„ç†å„ç§ Unicode å­—ç¬¦çš„ä¸¥è‚ƒé¡¹ç›®ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨æˆç†Ÿçš„ç¬¬ä¸‰æ–¹åº“ã€‚&lt;/p&gt;
&lt;h4 id="ä½¿ç”¨-utf8hè½»é‡çº§åº“"&gt;ä½¿ç”¨ &lt;code&gt;utf8.h&lt;/code&gt;è½»é‡çº§åº“
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;utf8.h&lt;/code&gt;æ˜¯ä¸€ä¸ªå•å¤´æ–‡ä»¶åº“ï¼Œæä¾›äº†è§£ç  UTF-8 çš„ç®€å•æ¥å£ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;string&amp;gt;
#define UTF8PP_IMPLEMENTATION
#include &amp;#34;utf8.h&amp;#34; // éœ€è¦åŒ…å« utf8.h å¤´æ–‡ä»¶
int main() {
std::string text = u8&amp;#34;ä½ å¥½ï¼Œä¸–ç•Œï¼ğŸŒ&amp;#34;; // åŒ…å« Emoji
const char* ptr = text.c_str();
const char* end = ptr + text.size();
while (ptr &amp;lt; end) {
uint32_t codepoint;
// å®‰å…¨åœ°è·å–ä¸‹ä¸€ä¸ª Unicode ç ç‚¹
ptr = utf8codepoint(ptr, &amp;amp;codepoint);
// è¾“å‡ºç ç‚¹çš„åå…­è¿›åˆ¶å€¼
std::cout &amp;lt;&amp;lt; std::hex &amp;lt;&amp;lt; codepoint &amp;lt;&amp;lt; &amp;#34; &amp;#34;;
}
std::cout &amp;lt;&amp;lt; std::endl;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ä½¿ç”¨-icu-åº“"&gt;ä½¿ç”¨ ICU åº“
&lt;/h4&gt;&lt;p&gt;ICU (International Components for Unicode) æ˜¯ä¸šç•Œæ ‡å‡†çš„ Unicode å¤„ç†åº“ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;unicode/ustream.h&amp;gt; // éœ€è¦å®‰è£… ICU åº“
#include &amp;lt;unicode/ucnv.h&amp;gt;
#include &amp;lt;unicode/ustring.h&amp;gt;
int main() {
std::string utf8_str = u8&amp;#34;ä½ å¥½ï¼Œä¸–ç•Œï¼&amp;#34;;
UErrorCode status = U_ZERO_ERROR;
// å°† UTF-8 å­—ç¬¦ä¸²è½¬æ¢ä¸º ICU çš„ UnicodeString
icu::UnicodeString unicode_str = icu::UnicodeString::fromUTF8(utf8_str);
// éå†æ¯ä¸ªç ç‚¹
for (int32_t i = 0; i &amp;lt; unicode_str.length(); ) {
UChar32 c = unicode_str.char32At(i); // è·å– 32 ä½ç ç‚¹
std::cout &amp;lt;&amp;lt; std::hex &amp;lt;&amp;lt; c &amp;lt;&amp;lt; &amp;#34; &amp;#34;;
i += U16_LENGTH(c); // å‰è¿›ç›¸åº”çš„ä»£ç å•å…ƒæ•°
}
std::cout &amp;lt;&amp;lt; std::endl;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¦ç‚¹è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½å…¨é¢&lt;/strong&gt;ï¼šç¬¬ä¸‰æ–¹åº“èƒ½æ­£ç¡®å¤„ç†å„ç§è¾¹ç¼˜æƒ…å†µï¼Œå¦‚æ— æ•ˆçš„ UTF-8 åºåˆ—ã€ä»£ç†å¯¹ã€å­—å½¢ç»„åˆç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²æˆæœ¬&lt;/strong&gt;ï¼šä½¿ç”¨è¿™äº›åº“éœ€è¦åœ¨å¼€å‘ç¯å¢ƒä¸­å®‰è£…ç›¸åº”çš„åº“æ–‡ä»¶ï¼Œå¹¶åœ¨é¡¹ç›®ä¸­æ­£ç¡®é…ç½®é“¾æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ-1"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»Ÿä¸€ç¼–ç æºå¤´&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿ä½ çš„ C++ æºæ–‡ä»¶æœ¬èº«ä»¥ &lt;strong&gt;UTF-8 without BOM&lt;/strong&gt; æ ¼å¼ä¿å­˜ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç¼–è¯‘å™¨å‚æ•°ä¸­æ˜ç¡®æŒ‡å®šæºä»£ç çš„å­—ç¬¦é›†ï¼ˆä¾‹å¦‚ GCC/Clang ä½¿ç”¨ &lt;code&gt;-finput-charset=UTF-8&lt;/code&gt;ï¼ŒMSVC ä½¿ç”¨ &lt;code&gt;/utf-8&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†æ§åˆ¶å°/ç»ˆç«¯è¾“å‡º&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Windows ä¸Šï¼Œé»˜è®¤æ§åˆ¶å°å¯èƒ½ä¸æ”¯æŒ UTF-8 è¾“å‡ºã€‚éœ€è¦åœ¨ç¨‹åºå¼€å§‹æ—¶è®¾ç½®æ§åˆ¶å°ä»£ç é¡µï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;windows.h&amp;gt;
SetConsoleOutputCP(CP_UTF8); // è®¾ç½®æ§åˆ¶å°è¾“å‡ºä¸º UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¡®ä¿ç»ˆç«¯ä½¿ç”¨çš„å­—ä½“æ”¯æŒä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…å¸¸è§é™·é˜±&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ‡å‹¿æŒ‰å­—èŠ‚éå†&lt;/strong&gt;ï¼šç›´æ¥ä½¿ç”¨ &lt;code&gt;for (char c : str)&lt;/code&gt;æˆ–ä¸‹æ ‡ &lt;code&gt;str[i]&lt;/code&gt;éå†åŒ…å«ä¸­æ–‡çš„ &lt;code&gt;std::string&lt;/code&gt;ä¼šå¯¼è‡´æ¯ä¸ªå­—èŠ‚è¢«è¯¯è®¤ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œäº§ç”Ÿä¹±ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;std::codecvt&lt;/code&gt;&lt;/strong&gt;ï¼šå› å…¶åœ¨ C++17 ä¸­è¢«å¼ƒç”¨ï¼Œåœ¨æ–°é¡¹ç›®ä¸­åº”å¯»æ±‚æ›¿ä»£æ–¹æ¡ˆï¼Œå¦‚ç¬¬ä¸‰æ–¹åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©ä½ åœ¨ C++ é¡¹ç›®ä¸­é¡ºåˆ©å¤„ç†ä¸­æ–‡å­—ç¬¦ï¼å¦‚æœä½ æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼ˆä¾‹å¦‚å¤„ç†æ–‡ä»¶æˆ–ç½‘ç»œæ•°æ®ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="hyperloglog"&gt;HyperLoglog
&lt;/h2&gt;&lt;p&gt;HyperLogLogï¼ˆç®€ç§° HLLï¼‰æ˜¯ Redis æä¾›çš„ä¸€ç§&lt;strong&gt;æ¦‚ç‡æ•°æ®ç»“æ„&lt;/strong&gt;ï¼Œç”¨äº&lt;strong&gt;æµ·é‡æ•°æ®çš„åŸºæ•°ï¼ˆå³ä¸é‡å¤å…ƒç´ ï¼‰ä¼°ç®—&lt;/strong&gt;ã€‚å®ƒä»¥å…¶&lt;strong&gt;æä½çš„å†…å­˜å ç”¨&lt;/strong&gt;å’Œ&lt;strong&gt;å¯æ¥å—çš„è¯¯å·®ç‡&lt;/strong&gt;ï¼Œåœ¨å¤§æ•°æ®ç»Ÿè®¡åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚ä¸‹é¢æˆ‘å°†ä»æ ¸å¿ƒæ¦‚å¿µã€åŸç†ã€ä½¿ç”¨å’Œæ³¨æ„äº‹é¡¹ç­‰æ–¹é¢ä¸ºä½ è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡HyperLogLogçš„æ ¸å¿ƒç‰¹å¾ï¼Œç‰¹åˆ«æ˜¯ä¸ç²¾ç¡®ç»Ÿè®¡å®¹å™¨çš„åŒºåˆ«ï¼Œè¯·çœ‹è¿™ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;HyperLogLog&lt;/th&gt;
&lt;th&gt;HashSet (ç²¾ç¡®ç»Ÿè®¡)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šçº¦12KB&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éšå…ƒç´ æ•°é‡çº¿æ€§å¢é•¿ (O(n))&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»Ÿè®¡ç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿‘ä¼¼å€¼&lt;/strong&gt; (æ ‡å‡†è¯¯å·® ~0.81%)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦æ”¯æŒæŸ¥è¯¢å…·ä½“å…ƒç´ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¦&lt;/strong&gt; (ä»…ä¼°ç®—æ€»æ•°)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆå¹¶èƒ½åŠ›&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt; (è½»æ¾åˆå¹¶å¤šä¸ªHLL)&lt;/td&gt;
&lt;td&gt;å¤æ‚ï¼Œéœ€éå†æ‰€æœ‰å…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€ä½³åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æµ·é‡æ•°æ®ç‹¬ç«‹è®¡æ•° (å¦‚UVç»Ÿè®¡)&lt;/td&gt;
&lt;td&gt;æ•°æ®é‡å¯æ§çš„ç²¾ç¡®å»é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ§  æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯åŸºæ•°&lt;/strong&gt;ï¼šåŸºæ•°æŒ‡çš„æ˜¯ä¸€ä¸ªé›†åˆä¸­&lt;strong&gt;ä¸é‡å¤å…ƒç´ çš„æ•°é‡&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œé›†åˆ {1, 3, 5, 3, 1} çš„åŸºæ•°æ˜¯ 3ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡&lt;/strong&gt;ï¼šHyperLogLog ç”¨äºåœ¨&lt;strong&gt;å†…å­˜å ç”¨æå°&lt;/strong&gt;çš„å‰æä¸‹ï¼Œé«˜é€Ÿä¼°ç®—å¤§è§„æ¨¡æ•°æ®é›†çš„åŸºæ•°ï¼Œ&lt;strong&gt;æ ‡å‡†è¯¯å·®çº¦ä¸º 0.81%&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å¥‡è¿¹&lt;/strong&gt;ï¼šæ— è®ºä½ è¦ç»Ÿè®¡å¤šå°‘å…ƒç´ ï¼Œä¸€ä¸ª HyperLogLog é”®åœ¨ Redis ä¸­&lt;strong&gt;ä»…å ç”¨çº¦ 12KB çš„å†…å­˜&lt;/strong&gt;ï¼Œç†è®ºä¸Šå¯ä»¥ä¼°ç®—æ¥è¿‘ 264ä¸ªä¸åŒå…ƒç´ çš„åŸºæ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å·¥ä½œåŸç†ç®€è¿°"&gt;âš™ï¸ å·¥ä½œåŸç†ç®€è¿°
&lt;/h3&gt;&lt;p&gt;HyperLogLog çš„ç®—æ³•æ ¸å¿ƒæ˜¯&lt;strong&gt;é€šè¿‡æ¦‚ç‡ç»Ÿè®¡æ¥ä¼°ç®—åŸºæ•°&lt;/strong&gt;ï¼Œå…¶å·§å¦™ä¹‹å¤„åœ¨äºåˆ©ç”¨äº†å“ˆå¸Œå‡½æ•°å’Œä½æ¨¡å¼è§‚å¯Ÿã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œæ˜ å°„&lt;/strong&gt;ï¼šç®—æ³•ä¼šä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å°†æ‰€æœ‰è¾“å…¥å…ƒç´ è½¬æ¢ä¸ºä¸€ä¸ªè¶³å¤Ÿé•¿ï¼ˆå¦‚64ä½ï¼‰çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå“ˆå¸Œå€¼ï¼‰ã€‚è¿™ä¸ªå“ˆå¸Œå‡½æ•°éœ€è¦ä¿è¯è¾“å‡º&lt;strong&gt;å‡åŒ€åˆ†å¸ƒ&lt;/strong&gt;ï¼Œå³æ¯ä¸ªäºŒè¿›åˆ¶ä½å‡ºç°0æˆ–1çš„æ¦‚ç‡æ˜¯å‡ç­‰çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§‚å¯Ÿå‰å¯¼é›¶&lt;/strong&gt;ï¼šè®¡ç®—æ¯ä¸ªå“ˆå¸Œå€¼çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­&lt;strong&gt;ä»æœ€ä½ä½å¼€å§‹è¿ç»­é›¶çš„ä¸ªæ•°&lt;/strong&gt;ï¼ˆå³å‰å¯¼é›¶çš„æ•°é‡ï¼‰ã€‚ä¾‹å¦‚ï¼Œå“ˆå¸Œå€¼ &lt;code&gt;000101...&lt;/code&gt;çš„å‰å¯¼é›¶æ•°é‡ä¸º 3ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ¡¶ï¼ˆRegisterï¼‰å–æœ€å¤§&lt;/strong&gt;ï¼šä½¿ç”¨å“ˆå¸Œå€¼çš„å‰è‹¥å¹²ä½ï¼ˆæ¯”å¦‚å‰14ä½ï¼‰æ¥ç¡®å®šä¸€ä¸ªâ€œæ¡¶â€çš„ç´¢å¼•ï¼ˆRediså®ç°äº†16384ä¸ªæ¡¶ï¼‰ã€‚æ¯ä¸ªæ¡¶åªè®°å½•&lt;strong&gt;è¯¥æ¡¶æ‰€æœ‰å“ˆå¸Œå€¼ä¸­æœ€å¤§çš„å‰å¯¼é›¶æ•°é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒå’Œå¹³å‡æ•°ä¼°ç®—&lt;/strong&gt;ï¼šç»Ÿè®¡æ‰€æœ‰æ¡¶çš„ä¼°å€¼ï¼Œå¹¶ä½¿ç”¨&lt;strong&gt;è°ƒå’Œå¹³å‡æ•°&lt;/strong&gt;æ¥ä¼°ç®—æ•´ä½“çš„åŸºæ•°ã€‚è°ƒå’Œå¹³å‡æ•°å¯¹å¤§å€¼çš„æ•æ„Ÿæ€§è¾ƒä½ï¼Œèƒ½æä¾›æ›´å‡†ç¡®çš„ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-redis-ä¸­çš„å‘½ä»¤"&gt;ğŸ“Ÿ Redis ä¸­çš„å‘½ä»¤
&lt;/h3&gt;&lt;p&gt;Redis ä¸º HyperLogLog æä¾›äº†ä¸‰ä¸ªæ ¸å¿ƒå‘½ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;PFADD key element [element &amp;hellip;]&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šå‘æŒ‡å®šçš„ HyperLogLog ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;ï¼šå¦‚æœ HyperLogLog çš„å†…éƒ¨ä¼°å€¼å› æ­¤å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿”å› 1ï¼›å¦åˆ™è¿”å› 0ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ç¤ºä¾‹ï¼š&lt;/em&gt;&lt;code&gt;PFADD uv:20231013 user1 user2 user3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PFCOUNT key [key &amp;hellip;]&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šè·å–ä¸€ä¸ªæˆ–å¤šä¸ª HyperLogLog çš„åŸºæ•°ä¼°ç®—å€¼ã€‚å½“æŒ‡å®šå¤šä¸ª key æ—¶ï¼Œè¿”å›çš„æ˜¯å®ƒä»¬&lt;strong&gt;å¹¶é›†&lt;/strong&gt;çš„åŸºæ•°ä¼°ç®—å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ç¤ºä¾‹ï¼š&lt;/em&gt;&lt;code&gt;PFCOUNT uv:20231013&lt;/code&gt;&lt;em&gt;(ä¼°ç®—å½“æ—¥UV)&lt;em&gt;æˆ– &lt;code&gt;PFCOUNT uv:mon uv:tue uv:wed&lt;/code&gt;&lt;/em&gt;(ä¼°ç®—å‘¨ä¸‰å¤©çš„æ€»UV)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PFMERGE destkey sourcekey [sourcekey &amp;hellip;]&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šå°†å¤šä¸ª HyperLogLog åˆå¹¶åˆ°ä¸€ä¸ªç›®æ ‡ HyperLogLog ä¸­ã€‚åˆå¹¶åçš„ HyperLogLog æ˜¯&lt;strong&gt;æ‰€æœ‰æº HyperLogLog çš„å¹¶é›†&lt;/strong&gt;çš„ä¼°ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ç¤ºä¾‹ï¼š&lt;/em&gt;&lt;code&gt;PFMERGE uv:weekly uv:mon uv:tue uv:wed uv:thu uv:fri uv:sat uv:sun&lt;/code&gt;&lt;em&gt;(å°†ä¸€å‘¨ä¸ƒå¤©çš„æ•°æ®åˆå¹¶ä¸ºå‘¨æŠ¥)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;HyperLogLog éå¸¸é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç«™ç‹¬ç«‹è®¿å®¢(UV)ç»Ÿè®¡&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„ç”¨é€”ã€‚æ¯å¤©ä¸ºç½‘ç«™åˆ›å»ºä¸€ä¸ª HLLï¼Œå°†æ¯ä¸ªè®¿é—®è€…çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ç”¨æˆ·IDæˆ–IPï¼‰æ·»åŠ è¿›å»ï¼Œæœ€åé€šè¿‡ &lt;code&gt;PFCOUNT&lt;/code&gt;è·å–ä¼°ç®—å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§å‹å®æ—¶åˆ†æ&lt;/strong&gt;ï¼šç»Ÿè®¡ä¸åŒæœç´¢è¯çš„æ•°é‡ã€å¹¿å‘Šç‚¹å‡»çš„å”¯ä¸€ç”¨æˆ·æ•°ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å»é‡ç»Ÿè®¡&lt;/strong&gt;ï¼šåœ¨éœ€è¦çŸ¥é“å¤§è‡´å”¯ä¸€å€¼æ•°é‡ä½†ä¸éœ€è¦ç²¾ç¡®å€¼å’Œå…·ä½“å…ƒç´ çš„åœºæ™¯ä¸‹ï¼Œå¦‚æ—¥å¿—åˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ HyperLogLog æ—¶ï¼Œè¯·åŠ¡å¿…äº†è§£ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœæ˜¯è¿‘ä¼¼å€¼&lt;/strong&gt;ï¼šHyperLogLog æä¾›çš„æ˜¯ä¼°ç®—å€¼ï¼Œ&lt;strong&gt;å­˜åœ¨çº¦ 0.81% çš„æ ‡å‡†è¯¯å·®&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€å¯¹äºä¼°ç®—å€¼ä¸º 100ä¸‡ çš„æ•°æ®é›†ï¼ŒçœŸå®åŸºæ•°å¯èƒ½åœ¨ 991,900 åˆ° 1,008,100 ä¹‹é—´æ³¢åŠ¨ã€‚è¿™åœ¨æµ·é‡æ•°æ®ç»Ÿè®¡ä¸­é€šå¸¸æ˜¯å¯æ¥å—çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å­˜å‚¨åŸå§‹å…ƒç´ &lt;/strong&gt;ï¼šHyperLogLog &lt;strong&gt;ä¸ä¼šå­˜å‚¨ä½ æ·»åŠ çš„å…ƒç´ æœ¬èº«&lt;/strong&gt;ï¼Œä½ æ— æ³•ä»ä¸­æŸ¥è¯¢æˆ–éå†å‡ºå“ªäº›å…ƒç´ è¢«æ·»åŠ è¿‡ã€‚å®ƒåªå­˜å‚¨ç”¨äºä¼°ç®—çš„ä¸­é—´çŠ¶æ€ï¼ˆé‚£äº›æ¡¶çš„æœ€å¤§å€¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´æ•ˆç‡æé«˜&lt;/strong&gt;ï¼šå›ºå®šçš„ 12KB å†…å­˜å ç”¨ä½¿å…¶æˆä¸ºå¤„ç†æµ·é‡æ•°æ®åŸºæ•°ç»Ÿè®¡çš„&lt;strong&gt;ç¥å™¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå¹¶æ“ä½œæ˜¯å¹‚ç­‰çš„&lt;/strong&gt;ï¼šå¯ä»¥éšæ—¶åˆå¹¶å¤šä¸ª HLLï¼Œéå¸¸é€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿæˆ–åˆ†ç‰‡æ•°æ®ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;HyperLogLog æ˜¯ä¸€é¡¹å·§å¦™åœ°å°†æ¦‚ç‡è®ºåº”ç”¨äºå·¥ç¨‹å®è·µçš„æ°å‡ºæˆæœã€‚å®ƒé€šè¿‡&lt;strong&gt;ç‰ºç‰²ä¸€å®šçš„ç²¾ç¡®æ€§&lt;/strong&gt;ï¼Œæ¢æ¥äº†&lt;strong&gt;æè‡´çš„å†…å­˜æ•ˆç‡å’Œå¤„ç†é€Ÿåº¦&lt;/strong&gt;ï¼Œå®Œç¾åœ°è§£å†³äº†â€œ&lt;strong&gt;å¤§æµ·æé’ˆå¹¶æ•°æ•°&lt;/strong&gt;â€è¿™ç±»é—®é¢˜çš„èµ„æºæ¶ˆè€—éš¾é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ éœ€è¦ç»Ÿè®¡çš„æ•°æ®é‡å·¨å¤§ï¼Œä¸”ä¸€ä¸ª&lt;strong&gt;å¤§è‡´å‡†ç¡®çš„æ•°å­—&lt;/strong&gt;è¿œæ¯”&lt;strong&gt;ç™¾åˆ†ä¹‹ç™¾çš„ç²¾ç¡®å€¼&lt;/strong&gt;å’Œ&lt;strong&gt;çŸ¥é“å…·ä½“æœ‰å“ªäº›å…ƒç´ &lt;/strong&gt;æ›´é‡è¦æ—¶ï¼ŒHyperLogLog å°±æ˜¯ä½ æœ€å¾—åŠ›çš„åŠ©æ‰‹ã€‚&lt;/p&gt;
&lt;h2 id="å‰å¯¼é›¶"&gt;å‰å¯¼é›¶
&lt;/h2&gt;&lt;p&gt;ç†è§£å‰å¯¼é›¶æ•°é‡å’Œå…ƒç´ ä¸ªæ•°çš„å…³ç³»ï¼Œæ˜¯æŒæ¡ HyperLogLog ç­‰æ¦‚ç‡ç»Ÿè®¡ç®—æ³•ç²¾é«“çš„å…³é”®ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;åœ¨ä¸€ä¸ªéšæœºè¿‡ç¨‹ä¸­ï¼Œä½ è§‚å¯Ÿåˆ°çš„æœ€å¤§å‰å¯¼é›¶æ•°é‡ &lt;code&gt;k&lt;/code&gt;ï¼Œä¸å¯èƒ½äº§ç”Ÿè¿™ä¸ªè§‚å¯Ÿç»“æœçš„å…ƒç´ æ€»æ•°é‡ &lt;code&gt;N&lt;/code&gt;ä¹‹é—´å­˜åœ¨ä¸€ç§æ¦‚ç‡ä¸Šçš„å…³è”ï¼Œå³ &lt;code&gt;N&lt;/code&gt;å¤§çº¦ä¸º 2^k&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒæ€æƒ³ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…³é”®æ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ¯”å–»ï¼ˆæŠ›ç¡¬å¸ï¼‰&lt;/th&gt;
&lt;th&gt;åœ¨ HyperLogLog ä¸­çš„åº”ç”¨&lt;/th&gt;
&lt;th&gt;å…³ç³»è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡è¯•éªŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŠ›ä¸€æ¬¡ç¡¬å¸ï¼Œçœ‹æ˜¯æ­£é¢è¿˜æ˜¯åé¢ã€‚&lt;/td&gt;
&lt;td&gt;å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå“ˆå¸Œï¼Œå¾—åˆ°æ¯”ç‰¹ä¸²ã€‚&lt;/td&gt;
&lt;td&gt;å°†å…ƒç´ æ˜ å°„ä¸ºå¯åˆ†æçš„éšæœºåºåˆ—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;â€œæˆåŠŸâ€ä¸è®¡æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿ç»­æŠ›å‡ºåé¢ï¼Œç›´åˆ°å‡ºç°æ­£é¢ä¸ºæ­¢ï¼Œè®°å½•è¿ç»­åé¢çš„æ¬¡æ•° &lt;code&gt;k&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡å“ˆå¸Œå€¼ä»ä½ä½å¼€å§‹&lt;strong&gt;è¿ç»­ä¸º0çš„ä¸ªæ•°&lt;/strong&gt;ï¼ˆå‰å¯¼é›¶ï¼‰ï¼Œè¿™ä¸ªæ•°é‡ä¹Ÿæ˜¯ &lt;code&gt;k&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;k&lt;/code&gt;è®°å½•äº†åœ¨ä¸€æ¬¡è¯•éªŒä¸­â€œç¨€æœ‰äº‹ä»¶â€çš„å¼ºåº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§ &lt;code&gt;k&lt;/code&gt;å€¼ä¸æ€»æ¬¡æ•° &lt;code&gt;N&lt;/code&gt;çš„å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ æŠ›äº† &lt;code&gt;N&lt;/code&gt;æ¬¡ç¡¬å¸ï¼Œå‘ç°æœ€é•¿çš„è¿ç»­åé¢æ¬¡æ•°æ˜¯ &lt;code&gt;k&lt;/code&gt;ã€‚ &lt;code&gt;N&lt;/code&gt;è¶Šå¤§ï¼Œå‡ºç°æ›´é•¿è¿ç»­åé¢ï¼ˆ&lt;code&gt;k&lt;/code&gt;å€¼æ›´å¤§ï¼‰çš„æ¦‚ç‡å°±è¶Šé«˜ã€‚&lt;/td&gt;
&lt;td&gt;å¯¹ &lt;code&gt;N&lt;/code&gt;ä¸ªå…ƒç´ éƒ½è¿›è¡Œå“ˆå¸Œå¹¶ç»Ÿè®¡å‰å¯¼é›¶ï¼Œè®°å½•æ‰€æœ‰è§‚æµ‹ä¸­æœ€å¤§çš„ &lt;code&gt;k&lt;/code&gt;ã€‚ åŸºæ•° &lt;code&gt;N&lt;/code&gt;è¶Šå¤§ï¼Œå“ˆå¸Œå€¼ä¸­å¯èƒ½å‡ºç°æ›´é•¿å‰å¯¼é›¶ï¼ˆ&lt;code&gt;k&lt;/code&gt;å€¼æ›´å¤§ï¼‰çš„æ¦‚ç‡å°±è¶Šé«˜ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;N â‰ˆ 2^k&lt;/code&gt;&lt;/strong&gt;ã€‚ è¿™æ˜¯æ•´ä¸ªä¼°ç®—çš„åŸºç¡€ï¼Œé€šè¿‡æœ€å¤§ &lt;code&gt;k&lt;/code&gt;å€¼æ¥åæ¨å¤§æ¦‚è¿›è¡Œäº†å¤šå°‘æ¬¡è¯•éªŒï¼ˆå³æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä»æŠ›ç¡¬å¸ç†è§£æ¦‚ç‡åŸºç¡€"&gt;ğŸ” ä»æŠ›ç¡¬å¸ç†è§£æ¦‚ç‡åŸºç¡€
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªå…³ç³»çš„ç›´è§‰å¯ä»¥é€šè¿‡ä¸€ä¸ªç»å…¸çš„ä¾‹å­â€”â€”&lt;strong&gt;æŠ›ç¡¬å¸&lt;/strong&gt;æ¥å»ºç«‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸€æ¬¡ç½•è§çš„è¿ç»­åé¢&lt;/strong&gt;ï¼šå‡è®¾ä½ æŠ›ç¡¬å¸ï¼Œè¿ç»­æŠ›å‡ºäº† &lt;code&gt;k&lt;/code&gt;æ¬¡åé¢ï¼Œç›´åˆ°ç¬¬ &lt;code&gt;k+1&lt;/code&gt;æ¬¡æ‰å‡ºç°æ­£é¢ã€‚è¿™ç§æƒ…å†µçš„æ¦‚ç‡æ˜¯ &lt;code&gt;(1/2)^(k+1)&lt;/code&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªå°æ¦‚ç‡äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ¬¡è¯•éªŒä¸­çš„æœŸæœ›&lt;/strong&gt;ï¼šå¦‚æœä½ æŠ›äº† &lt;code&gt;N&lt;/code&gt;æ¬¡ç¡¬å¸ï¼ˆè¿™é‡ŒæŒ‡è¿›è¡Œäº† &lt;code&gt;N&lt;/code&gt;æ¬¡ç‹¬ç«‹çš„æŠ›ç¡¬å¸åºåˆ—ï¼‰ï¼Œé‚£ä¹ˆå¤§è‡´æœŸæœ›èƒ½çœ‹åˆ°ä¸€æ¬¡è¿™ç§â€œè¿ç»­ &lt;code&gt;k&lt;/code&gt;æ¬¡åé¢â€çš„äº‹ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ&lt;code&gt;N * (1/2)^(k+1) â‰ˆ 1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨å¯¼å‡ºå…³ç³»&lt;/strong&gt;ï¼šå¯¹ä¸Šé¢çš„è¿‘ä¼¼ç­‰å¼è¿›è¡Œå˜æ¢ï¼Œå¯ä»¥å¾—åˆ° &lt;code&gt;N â‰ˆ 2^(k+1)&lt;/code&gt;ã€‚è¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œè§‚å¯Ÿåˆ°ä¸€æ¬¡â€œè¿ç»­ &lt;code&gt;k&lt;/code&gt;æ¬¡åé¢â€çš„äº‹ä»¶ï¼Œæ„å‘³ç€ä½ å¤§æ¦‚è¿›è¡Œäº† &lt;code&gt;2^(k+1)&lt;/code&gt;æ¬¡è¯•éªŒã€‚åœ¨ç®—æ³•ä¸­ï¼Œç»è¿‡æ›´ç²¾ç¡®çš„æ•°å­¦ä¿®æ­£åï¼Œå…³ç³»ç®€åŒ–ä¸º &lt;strong&gt;&lt;code&gt;N â‰ˆ 2^k&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;ï¼š&lt;strong&gt;è§‚å¯Ÿåˆ°ä¸€æ¬¡éå¸¸â€œç¨€æœ‰â€çš„äº‹ä»¶ï¼ˆå¾ˆé•¿çš„è¿ç»­é›¶ï¼‰ï¼Œæš—ç¤ºäº†èƒŒåä¸€å®šè¿›è¡Œäº†å¤§é‡çš„è¯•éªŒ&lt;/strong&gt;ã€‚æœ€å¤§çš„å‰å¯¼é›¶æ•°é‡ &lt;code&gt;k&lt;/code&gt;å°±åƒä¸€ä¸ªæµ‹é‡å°ºï¼Œå®ƒçš„é•¿åº¦é—´æ¥åæ˜ äº†æ ·æœ¬é‡ &lt;code&gt;N&lt;/code&gt;çš„å¤§å°ã€‚&lt;/p&gt;
&lt;h3 id="-hyperloglog-çš„å·¥ç¨‹ä¼˜åŒ–"&gt;âš™ï¸ HyperLogLog çš„å·¥ç¨‹ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;ç›´æ¥ä½¿ç”¨å•ä¸ª &lt;code&gt;k&lt;/code&gt;å€¼æ¥ä¼°ç®— &lt;code&gt;N&lt;/code&gt;æ–¹å·®ä¼šå¾ˆå¤§ï¼Œå› ä¸ºæ•°æ®åˆ†å¸ƒå¯èƒ½ä¸å‡åŒ€ã€‚HyperLogLog çš„ç²¾å¦™ä¹‹å¤„åœ¨äºå®ƒç”¨äº†ä¸¤ä¸ªä¸»è¦ç­–ç•¥æ¥ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨å“ˆå¸Œå‡½æ•°&lt;/strong&gt;ï¼šå°†æ¯ä¸ªè¾“å…¥å…ƒç´ é€šè¿‡ä¸€ä¸ªå“ˆå¸Œå‡½æ•°æ˜ å°„æˆä¸€ä¸ªè¶³å¤Ÿé•¿ï¼ˆå¦‚64ä½ï¼‰ä¸”æœä»å‡åŒ€åˆ†å¸ƒçš„æ¯”ç‰¹ä¸²ã€‚è¿™å°±ç›¸å½“äºä¸ºæ¯ä¸ªå…ƒç´ ç”Ÿæˆäº†ä¸€ä¸²ç‹¬ä¸€æ— äºŒçš„ã€éšæœºçš„â€œç¡¬å¸åºåˆ—â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†æ¡¶å¹³å‡&lt;/strong&gt;ï¼šè¿™æ˜¯é™ä½è¯¯å·®çš„å…³é”®ã€‚HyperLogLog å°†æ•´ä¸ªå­˜å‚¨ç©ºé—´åˆ†ä¸º &lt;code&gt;m&lt;/code&gt;ä¸ªæ¡¶ï¼ˆåœ¨Redisä¸­é»˜è®¤ä¸º16384ä¸ªï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œå…ˆè®¡ç®—å…¶å“ˆå¸Œå€¼ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨å“ˆå¸Œå€¼çš„&lt;strong&gt;å‰è‹¥å¹²ä½&lt;/strong&gt;ï¼ˆæ¯”å¦‚ä½14ä½ï¼‰æ¥å†³å®šè¿™ä¸ªå…ƒç´ å±äºå“ªä¸ªæ¡¶ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨å“ˆå¸Œå€¼çš„&lt;strong&gt;å‰©ä½™éƒ¨åˆ†&lt;/strong&gt;ï¼ˆ50ä½ï¼‰æ¥è®¡ç®—å‰å¯¼é›¶æ•°é‡ &lt;code&gt;k&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¿™ä¸ª &lt;code&gt;k&lt;/code&gt;å€¼å¤§äºè¯¥æ¡¶å½“å‰è®°å½•çš„æœ€å¤§å€¼ï¼Œåˆ™æ›´æ–°æ¡¶ä¸­çš„å€¼ä¸º &lt;code&gt;k&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€åï¼Œåœ¨ä¼°ç®—æ€»åŸºæ•°æ—¶ï¼Œå¹¶ä¸æ˜¯ç›´æ¥ç”¨æ‰€æœ‰æ¡¶ä¸­æœ€å¤§çš„ &lt;code&gt;k&lt;/code&gt;ï¼Œè€Œæ˜¯ä½¿ç”¨æ‰€æœ‰æ¡¶çš„ &lt;code&gt;k&lt;/code&gt;å€¼çš„&lt;strong&gt;è°ƒå’Œå¹³å‡æ•°&lt;/strong&gt;ï¼Œå†ä»£å…¥ä¸€ä¸ªä¿®æ­£å…¬å¼è¿›è¡Œè®¡ç®—ã€‚è°ƒå’Œå¹³å‡æ•°å¯¹æç«¯å€¼ä¸æ•æ„Ÿï¼Œèƒ½æœ‰æ•ˆå¹³ç¼“ä¸ªåˆ«æ¡¶å› è¿æ°”å¥½å¾—åˆ°çš„æå¤§ &lt;code&gt;k&lt;/code&gt;å€¼å¸¦æ¥çš„è¯¯å·®ï¼Œä½¿ç»“æœæ›´ç¨³å®šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡è¿™ç§åˆ†æ¡¶ç­–ç•¥ï¼ŒHyperLogLog å°†å…¨å±€çš„ä¼°è®¡å˜æˆäº†å¤šä¸ªå±€éƒ¨ä¼°è®¡çš„å¹³å‡ï¼Œå¤§å¤§æé«˜äº†ä¼°ç®—çš„å‡†ç¡®åº¦ï¼Œæœ€ç»ˆå®ç°äº†ç”¨çº¦12KBçš„å›ºå®šå†…å­˜ä¼°ç®—ä¸Šäº¿çº§åŸºæ•°çš„å¥‡è¿¹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£å‰å¯¼é›¶æ•°é‡ä¸å…ƒç´ ä¸ªæ•°ä¹‹é—´é‚£ç§å·§å¦™è€Œå¼ºå¤§çš„æ¦‚ç‡å…³è”ï¼&lt;/p&gt;
&lt;h2 id="å›ºå®šå†…å­˜"&gt;å›ºå®šå†…å­˜
&lt;/h2&gt;&lt;p&gt;HyperLogLog èƒ½å¤Ÿä»…ç”¨å›ºå®šçš„ &lt;strong&gt;12KB&lt;/strong&gt; å†…å­˜æ¥ä¼°ç®—æµ·é‡æ•°æ®çš„åŸºæ•°ï¼Œå…¶æ ¸å¿ƒåœ¨äºå®ƒé‡‡ç”¨çš„æ˜¯ä¸€ç§&lt;strong&gt;æ¦‚ç‡ç®—æ³•&lt;/strong&gt;å’Œå·§å¦™çš„&lt;strong&gt;åˆ†æ¡¶å¹³å‡&lt;/strong&gt;æœºåˆ¶ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿç†è§£å…¶å†…å­˜è®¡ç®—çš„æ„æˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å†…å­˜è®¡ç®—å…³é”®å› ç´ &lt;/th&gt;
&lt;th&gt;å…·ä½“æ•°å€¼&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¡¶çš„æ•°é‡ (m)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;214=16384ä¸ª&lt;/td&gt;
&lt;td&gt;å°†æ•´ä¸ªæ•°æ®é›†åˆ†å¸ƒåˆ°å¤§é‡â€œæ¡¶â€ä¸­ï¼Œæ¯ä¸ªæ¡¶ç‹¬ç«‹ä¼°è®¡å±€éƒ¨åŸºæ•°ï¼Œé€šè¿‡æ±‚å¹³å‡å€¼æ¥é™ä½å•ä¸€ä¼°è®¡çš„æ–¹å·®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯ä¸ªæ¡¶çš„å­˜å‚¨ç©ºé—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;6 bits&lt;/strong&gt; (æ¯”ç‰¹)&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªæ¡¶åªéœ€è®°å½•å…¶å¯¹åº”çš„å“ˆå¸Œå€¼ä½ä¸²ä¸­&lt;strong&gt;å‰å¯¼é›¶çš„æœ€å¤§æ•°é‡&lt;/strong&gt;ã€‚6 bits å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§å€¼æ˜¯ 63ï¼ˆ26âˆ’1ï¼‰ï¼Œè¶³ä»¥è®°å½•ä¸€ä¸ª 64 ä½å“ˆå¸Œå€¼ä¸­å¯èƒ½å‡ºç°çš„æœ€å¤§å‰å¯¼é›¶æ•°é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€»å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;16384Ã—6bits=12KB&lt;/td&gt;
&lt;td&gt;è®¡ç®—è¿‡ç¨‹ï¼š16384Ã—6bits=98304bits=12288bytes=12KBã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£12kbçš„ç”±æ¥"&gt;âš™ï¸ æ·±å…¥ç†è§£12KBçš„ç”±æ¥
&lt;/h3&gt;&lt;p&gt;HyperLogLog ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š&lt;strong&gt;ä¸€ä¸ªéšæœºç”Ÿæˆçš„64ä½å“ˆå¸Œå€¼ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­å‰å¯¼é›¶çš„æ•°é‡ï¼ˆkï¼‰ä¸ä¼°ç®—çš„åŸºæ•°ï¼ˆnï¼‰å­˜åœ¨æ¦‚ç‡å…³ç³»ï¼Œå¤§è‡´ä¸º nâ‰ˆ2k&lt;/strong&gt;ã€‚ä½†å•ä¸ªå“ˆå¸Œå€¼çš„kå€¼æ³¢åŠ¨å¾ˆå¤§ï¼Œç›´æ¥ç”¨æ¥ä¼°ç®—è¯¯å·®ä¼šéå¸¸å¤§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHyperLogLog å¼•å…¥äº†&lt;strong&gt;åˆ†æ¡¶å¹³å‡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œä¸åˆ†æ¡¶&lt;/strong&gt;ï¼šå½“æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œé¦–å…ˆç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª&lt;strong&gt;64ä½çš„æ¯”ç‰¹ä¸²&lt;/strong&gt;ã€‚è¿™ä¸ªæ¯”ç‰¹ä¸²å¯ä»¥çœ‹ä½œæ˜¯ä¸€é•¿ä¸²éšæœºçš„0å’Œ1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡¶ç´¢å¼•&lt;/strong&gt;ï¼šå–è¿™ä¸ª64ä½æ¯”ç‰¹ä¸²çš„&lt;strong&gt;ä½14ä½&lt;/strong&gt;ï¼ˆå14ä½ï¼‰æ¥è®¡ç®—å®ƒåº”è¯¥å±äºå“ªä¸ªæ¡¶ã€‚å› ä¸º 214=16384ï¼Œæ‰€ä»¥æ€»å…±å¯ä»¥å°†æ•°æ®åˆ†æ•£åˆ°16384ä¸ªæ¡¶ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½•å…³é”®å€¼&lt;/strong&gt;ï¼šç„¶åï¼Œè§‚å¯Ÿæ¯”ç‰¹ä¸²çš„&lt;strong&gt;å‰©ä½™50ä½&lt;/strong&gt;ï¼ˆä»ä½ä½åˆ°é«˜ä½ï¼‰ï¼Œç»Ÿè®¡&lt;strong&gt;ç¬¬ä¸€ä¸ª1å‡ºç°çš„ä½ç½®&lt;/strong&gt;ï¼ˆæ¯”å¦‚ &lt;code&gt;000...001...&lt;/code&gt;ä¸­ï¼Œç¬¬ä¸€ä¸ª1å‡ºç°åœ¨ç¬¬å‡ ä½ï¼‰ã€‚è¿™ä¸ªä½ç½®å€¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º &lt;code&gt;Ï&lt;/code&gt;(rho)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿ç•™æœ€å¤§å€¼&lt;/strong&gt;ï¼šæ¯ä¸ªæ¡¶åªåšä¸€ä»¶äº‹ï¼šè®°å½•æ‰€æœ‰è½å…¥è¯¥æ¡¶çš„å…ƒç´ çš„ &lt;code&gt;Ï&lt;/code&gt;å€¼ä¸­çš„&lt;strong&gt;æœ€å¤§å€¼&lt;/strong&gt;ã€‚å› ä¸º &lt;code&gt;Ï&lt;/code&gt;çš„æœ€å¤§å€¼éšå«åœ°åæ˜ äº†è¿™ä¸ªæ¡¶é‡Œè§è¿‡çš„å…ƒç´ æ•°é‡çš„é‡çº§ï¼ˆæœ€å¤§å€¼è¶Šå¤§ï¼Œè¯´æ˜å¯èƒ½è§è¿‡çš„å…ƒç´ è¶Šå¤šï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç”±äº &lt;code&gt;Ï&lt;/code&gt;çš„æœ€å¤§å€¼ä¸å¯èƒ½è¶…è¿‡50ï¼ˆå› ä¸ºåªæ£€æŸ¥50ä½ï¼‰ï¼Œè€Œ 26=64&amp;gt;50ï¼Œæ‰€ä»¥æ¯ä¸ªæ¡¶åªéœ€è¦ &lt;strong&gt;6ä¸ªæ¯”ç‰¹&lt;/strong&gt; çš„ç©ºé—´å°±è¶³ä»¥è®°å½•è¿™ä¸ªæœ€å¤§å€¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå†…å­˜å ç”¨æ˜¯å›ºå®šçš„ï¼š&lt;strong&gt;æ— è®ºä½ å‘ HyperLogLog ä¸­æ·»åŠ åäº¿è¿˜æ˜¯ä¸€ä¸‡äº¿ä¸ªå…ƒç´ ï¼Œæ¡¶çš„æ•°é‡ï¼ˆ16384ä¸ªï¼‰å’Œæ¯ä¸ªæ¡¶çš„å¤§å°ï¼ˆ6æ¯”ç‰¹ï¼‰éƒ½æ˜¯ä¸å˜çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæ€»å†…å­˜å ç”¨å°±æ˜¯ï¼š16384Ã—6bits=98304bits=12288bytes=12KBã€‚&lt;/p&gt;
&lt;h3 id="-redisçš„å­˜å‚¨ä¼˜åŒ–"&gt;ğŸ’¾ Redisçš„å­˜å‚¨ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒRedis ä¸ºäº†è¿›ä¸€æ­¥èŠ‚çœç©ºé—´ï¼Œåœ¨å®é™…å®ç°ä¸­ä½¿ç”¨äº†ä¸¤ç§ç¼–ç æ ¼å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¨€ç–æ ¼å¼ (Sparse Representation)&lt;/strong&gt;ï¼šå½“åŸºæ•°å¾ˆå°æ—¶ï¼Œå¾ˆå¤šæ¡¶çš„å€¼éƒ½æ˜¯0ã€‚Redis ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„ç¼–ç æ¥å‹ç¼©å­˜å‚¨è¿™äº›è¿ç»­çš„0æˆ–é‡å¤çš„å€¼ï¼Œæ­¤æ—¶å®é™…å ç”¨çš„å†…å­˜å¯èƒ½&lt;strong&gt;è¿œå°äº12KB&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯†é›†æ ¼å¼ (Dense Representation)&lt;/strong&gt;ï¼šå½“åŸºæ•°å¢å¤§åˆ°ä¸€å®šç¨‹åº¦ï¼ˆæˆ–è€…æŸä¸ªæ¡¶çš„è®¡æ•°å€¼è¶…è¿‡32ï¼‰ï¼Œç¨€ç–æ ¼å¼çš„ä¼˜åŠ¿ä¸å†æ˜æ˜¾ï¼ŒRedis å°±ä¼šå°†å…¶è½¬æ¢ä¸ºä¸Šè¿°çš„å›ºå®š12KBçš„å¯†é›†æ ¼å¼å­˜å‚¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§è®¾è®¡ä½¿å¾— HyperLogLog åœ¨æ•°æ®é‡å°å’Œå·¨å¤§æ—¶éƒ½èƒ½é«˜æ•ˆåˆ©ç”¨å†…å­˜ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸å…¶ä»–æ•°æ®ç»“æ„çš„å†…å­˜å¯¹æ¯”"&gt;ğŸ†š ä¸å…¶ä»–æ•°æ®ç»“æ„çš„å†…å­˜å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ä¼ ç»Ÿçš„ç²¾ç¡®è®¡æ•°æ•°æ®ç»“æ„ç›¸æ¯”ï¼ŒHyperLogLog çš„å†…å­˜ä¼˜åŠ¿æ˜¯å‹å€’æ€§çš„ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ•°æ®ç»“æ„&lt;/th&gt;
&lt;th&gt;ç»Ÿè®¡10äº¿ç”¨æˆ·UVçš„å†…å­˜æ¶ˆè€—ï¼ˆä¼°ç®—ï¼‰&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Set&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½è¾¾åˆ° &lt;strong&gt;æ•°åGB&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨æ‰€æœ‰ä¸é‡å¤çš„ç”¨æˆ·IDï¼Œå†…å­˜éšåŸºæ•°çº¿æ€§å¢é•¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bitmap&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å–å†³äºIDçš„å–å€¼èŒƒå›´ï¼Œè‹¥ç”¨æˆ·IDä¸ºæ•´æ•°ä¸”èŒƒå›´åˆ°10äº¿ï¼Œçº¦éœ€ &lt;strong&gt;120MB&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªç”¨æˆ·IDæ˜ å°„åˆ°ä¸€ä¸ªä½ï¼Œéœ€è¦è¶³å¤Ÿçš„ä½é•¿åº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;HyperLogLog&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®š 12KB&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å­˜å‚¨å…ƒç´ æœ¬èº«ï¼Œåªå­˜å‚¨ç”¨äºæ¦‚ç‡ä¼°ç®—çš„ä¸­é—´çŠ¶æ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥ï¼ŒHyperLogLog å›ºå®šå ç”¨ &lt;strong&gt;12KB&lt;/strong&gt; å†…å­˜çš„åŸå› å¯ä»¥å½’ç»“ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•åŸºç¡€&lt;/strong&gt;ï¼šåŸºäº&lt;strong&gt;æ¦‚ç‡ä¼°ç®—&lt;/strong&gt;ï¼Œè€Œéç²¾ç¡®å­˜å‚¨æ¯ä¸€ä¸ªå…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;ï¼šé€šè¿‡&lt;strong&gt;åˆ†æ¡¶ï¼ˆ16384ä¸ªæ¡¶ï¼‰&lt;/strong&gt; å’Œè®°å½•&lt;strong&gt;å‰å¯¼é›¶æœ€å¤§æ•°é‡ï¼ˆæ¯ä¸ªæ¡¶6æ¯”ç‰¹ï¼‰&lt;/strong&gt; çš„æ–¹å¼æ¥å¤§å¹…é™ä½å•ä¸€ä¼°è®¡çš„æ–¹å·®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ç¨‹å®ç°&lt;/strong&gt;ï¼š16384Ã—6bitsçš„è®¡ç®—ç»“æœå°±æ˜¯ &lt;strong&gt;12KB&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§ç”¨å›ºå®šçš„ã€æå°çš„å†…å­˜ç©ºé—´æ¢å–å¯æ¥å—çš„è¯¯å·®ç‡çš„è®¾è®¡ï¼Œæ­£æ˜¯ HyperLogLog é€‚ç”¨äºæµ·é‡æ•°æ®åŸºæ•°ç»Ÿè®¡åœºæ™¯çš„æ ¹æœ¬åŸå› ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£å…¶ä¸­çš„åŸç†ï¼&lt;/p&gt;
&lt;h2 id="ä¸»ä»åŒæ­¥"&gt;ä¸»ä»åŒæ­¥
&lt;/h2&gt;&lt;p&gt;MySQLä¸»ä»åŒæ­¥æ˜¯æå‡æ•°æ®åº“å¯ç”¨æ€§å’Œæ€§èƒ½çš„ç»å…¸æ¶æ„ï¼Œä½†åœ¨å®é™…è¿ç»´ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°åŒæ­¥å»¶è¿Ÿã€åŒæ­¥ä¸­æ–­åŠæ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜ã€‚ä¸‹é¢æˆ‘å°†æ¢³ç†å¸¸è§çš„é—®é¢˜ã€å…¶åŸå› åŠåº”å¯¹æ€è·¯ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦é—®é¢˜çš„æ¦‚è§ˆï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é—®é¢˜ç±»å‹&lt;/th&gt;
&lt;th&gt;å…·ä½“è¡¨ç°/å¸¸è§åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”„ åŒæ­¥å»¶è¿Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Seconds_Behind_Master&lt;/code&gt;å€¼æŒç»­åé«˜æˆ–ä¸æ–­å¢åŠ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;â›”ï¸ åŒæ­¥ä¸­æ–­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Slave_IO_Running&lt;/code&gt;æˆ– &lt;code&gt;Slave_SQL_Running&lt;/code&gt;çŠ¶æ€ä¸º &lt;code&gt;No&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”€ æ•°æ®ä¸ä¸€è‡´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»ä»åº“æ•°æ®å†…å®¹æˆ–ç»“æ„ä¸åŒï¼Œå¯¼è‡´å¤åˆ¶é”™è¯¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âš™ï¸ é…ç½®ä¸è¿ç»´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨IDå†²çªã€ç½‘ç»œä¸ç¨³ã€ç‰ˆæœ¬å·®å¼‚ç­‰åŸºç¡€é—®é¢˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åº”å¯¹åŒæ­¥å»¶è¿Ÿ"&gt;ğŸ”„ åº”å¯¹åŒæ­¥å»¶è¿Ÿ
&lt;/h3&gt;&lt;p&gt;åŒæ­¥å»¶è¿Ÿæ˜¯æœ€å¸¸è§çš„é—®é¢˜ï¼Œæœ¬è´¨æ˜¯ä»åº“é‡æ”¾ä¸»åº“æ—¥å¿—çš„é€Ÿåº¦è·Ÿä¸ä¸Šä¸»åº“ç”Ÿæˆæ—¥å¿—çš„é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åº“å†™å…¥å‹åŠ›å¤§&lt;/strong&gt;ï¼šä¸»åº“å¹¶å‘äº‹åŠ¡é«˜æˆ–å­˜åœ¨&lt;strong&gt;å¤§äº‹åŠ¡&lt;/strong&gt;ï¼ˆå¦‚ä¸€æ¬¡æ€§æ›´æ–°å‡ åä¸‡è¡Œï¼‰ï¼Œä¼šç”Ÿæˆå¤§é‡Binlogï¼Œä»åº“å•çº¿ç¨‹é‡æ”¾å¯èƒ½éš¾ä»¥è·Ÿä¸Šã€‚ è§£å†³æ–¹æ¡ˆåŒ…æ‹¬å°†å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå°æ‰¹æ¬¡å¤„ç†ï¼Œä»¥åŠä¸»åº“äº‹åŠ¡æäº¤å‚æ•°è°ƒæ•´ï¼ˆå¦‚ &lt;code&gt;sync_binlog&lt;/code&gt;å’Œ &lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;ï¼‰ä»¥å¹³è¡¡æ€§èƒ½å’Œæ•°æ®å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“å¤„ç†èƒ½åŠ›ä¸è¶³&lt;/strong&gt;ï¼šä»åº“&lt;strong&gt;ç¡¬ä»¶èµ„æº&lt;/strong&gt;ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜I/Oï¼‰ä¸è¶³æˆ–é…ç½®è¾ƒä½ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨æœºæ¢°ç¡¬ç›˜æ—¶ï¼ŒSQLçº¿ç¨‹é‡æ”¾æ—¥å¿—ä¼šå˜æ…¢ã€‚ è€ƒè™‘å‡çº§ä»åº“ç¡¬ä»¶ï¼ˆå¦‚ä½¿ç”¨SSDï¼‰ï¼Œå¹¶&lt;strong&gt;å¯ç”¨å¹¶è¡Œå¤åˆ¶&lt;/strong&gt;ï¼ˆå¦‚MySQL 5.7+è®¾ç½® &lt;code&gt;slave_parallel_type=LOGICAL_CLOCK&lt;/code&gt;å’Œ &lt;code&gt;slave_parallel_workers&lt;/code&gt;&amp;gt; 1ï¼‰ä»¥æå‡é‡æ”¾æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“è´Ÿè½½è¿‡é«˜&lt;/strong&gt;ï¼šè‹¥ä»åº“æ‰¿æ‹…å¤§é‡&lt;strong&gt;è¯»è¯·æ±‚&lt;/strong&gt;ï¼Œä¼šä¸SQLçº¿ç¨‹ç«äº‰èµ„æºã€‚å¯é€šè¿‡&lt;strong&gt;å¢åŠ ä»åº“æ•°é‡&lt;/strong&gt;æˆ–ä½¿ç”¨&lt;strong&gt;è¯»å†™åˆ†ç¦»ä¸­é—´ä»¶&lt;/strong&gt;ï¼ˆå¦‚ProxySQLï¼‰æ¥åˆ†æ‹…è¯»è´Ÿè½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå»¶è¿Ÿ&lt;/strong&gt;ï¼šä¸»ä»åº“è·¨æœºæˆ¿éƒ¨ç½²æ—¶ï¼Œ&lt;strong&gt;ç½‘ç»œä¼ è¾“&lt;/strong&gt;å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚ ä¼˜åŒ–ç½‘ç»œé“¾è·¯ï¼ˆå¦‚åŒæœºæˆ¿éƒ¨ç½²ã€ä½¿ç”¨ä¸“çº¿ï¼‰æˆ–å¼€å¯Binlogä¼ è¾“å‹ç¼©ï¼ˆ&lt;code&gt;slave_compressed_protocol=ON&lt;/code&gt;ï¼‰æœ‰åŠ©äºæ”¹å–„æƒ…å†µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¤„ç†åŒæ­¥ä¸­æ–­"&gt;â›”ï¸ å¤„ç†åŒæ­¥ä¸­æ–­
&lt;/h3&gt;&lt;p&gt;åŒæ­¥ä¸­æ–­é€šå¸¸è¡¨ç°ä¸ºSlave_IO_Runningæˆ–Slave_SQL_Runningçº¿ç¨‹åœæ­¢ï¼Œå¯é€šè¿‡ &lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§é”™è¯¯ç±»å‹åŠå¤„ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»é”®å†²çª&lt;/strong&gt;ï¼šé”™è¯¯ä»£ç  &lt;code&gt;1062&lt;/code&gt;ã€‚å¯èƒ½å› åœ¨ä»åº“æ‰‹åŠ¨å†™å…¥æ•°æ®å¯¼è‡´ã€‚ å¯ä¸´æ—¶è·³è¿‡é”™è¯¯ï¼ˆ&lt;code&gt;STOP SLAVE; SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1; START SLAVE;&lt;/code&gt;ï¼‰ï¼Œä½†éœ€è°¨æ…ï¼Œå¹¶å»ºè®®åç»­è¿›è¡Œæ•°æ®ä¸€è‡´æ€§æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½•ä¸å­˜åœ¨&lt;/strong&gt;ï¼šé”™è¯¯ä»£ç  &lt;code&gt;1032&lt;/code&gt;ã€‚ä¸»åº“æ›´æ–°æˆ–åˆ é™¤æŸæ¡è®°å½•æ—¶ï¼Œä»åº“æ‰¾ä¸åˆ°å¯¹åº”è®°å½•ã€‚ éœ€æ ¹æ®ä¸šåŠ¡é€»è¾‘åœ¨ä»åº“è¡¥å½•æ•°æ®æˆ–è·³è¿‡é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨æˆ–åˆ—ä¸å­˜åœ¨&lt;/strong&gt;ï¼šé”™è¯¯ä»£ç  &lt;code&gt;1146&lt;/code&gt;æˆ– &lt;code&gt;1054&lt;/code&gt;ã€‚ é€šå¸¸å› DDLè¯­å¥ï¼ˆå¦‚å»ºè¡¨ã€åŠ å­—æ®µï¼‰æœªæˆåŠŸåŒæ­¥åˆ°ä»åº“ã€‚éœ€åœ¨ä»åº“æ‰‹åŠ¨æ‰§è¡Œç¼ºå¤±çš„DDLæ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­ç»§æ—¥å¿—æŸå&lt;/strong&gt;ï¼šæœåŠ¡å™¨å¼‚å¸¸å…³æœºå¯èƒ½å¯¼è‡´ä¸­ç»§æ—¥å¿—æŸåï¼Œé”™è¯¯å¯èƒ½åŒ…å« &lt;code&gt;relay log read failure&lt;/code&gt;ã€‚ é€šå¸¸éœ€è¦&lt;strong&gt;é‡æ–°æŒ‡å®šåŒæ­¥ç‚¹&lt;/strong&gt;ï¼šåœ¨ä¸»åº“ä½¿ç”¨ &lt;code&gt;SHOW MASTER STATUS;&lt;/code&gt;è·å–å½“å‰æ—¥å¿—æ–‡ä»¶å’Œä½ç½®ï¼Œç„¶ååœ¨ä»åº“æ‰§è¡Œ &lt;code&gt;CHANGE MASTER TO ...&lt;/code&gt;å‘½ä»¤é‡æ–°æŒ‡å‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥ä¸»åº“å¤±è´¥&lt;/strong&gt;ï¼šSlave_IO_RunningçŠ¶æ€ä¸º &lt;code&gt;Connecting&lt;/code&gt;ã€‚ æ£€æŸ¥ç½‘ç»œè¿é€šæ€§ã€ä¸»åº“é˜²ç«å¢™è®¾ç½®ã€ä»¥åŠè¿æ¥ç”¨æˆ·æƒé™æ˜¯å¦æ­£ç¡®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è§£å†³æ•°æ®ä¸ä¸€è‡´"&gt;ğŸ”€ è§£å†³æ•°æ®ä¸ä¸€è‡´
&lt;/h3&gt;&lt;p&gt;æ•°æ®ä¸ä¸€è‡´å¯èƒ½ç”±é…ç½®å·®å¼‚æˆ–ä¸å½“æ“ä½œå¼•èµ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡¨ç»“æ„æˆ–å­—ç¬¦é›†ä¸ä¸€è‡´&lt;/strong&gt;ï¼šä¸»ä»åº“çš„&lt;strong&gt;å­—ç¬¦é›†&lt;/strong&gt;ã€&lt;strong&gt;å­—æ®µç±»å‹æˆ–é•¿åº¦&lt;/strong&gt;ä¸åŒï¼Œå¯èƒ½å¯¼è‡´æ•°æ®è§£æé”™è¯¯æˆ–å¤åˆ¶ä¸­æ–­ã€‚ ç¡®ä¿ä¸»ä»åº“ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦é›†å’Œè¡¨ç»“æ„è®¾è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶åŒºè®¾ç½®ä¸ä¸€è‡´&lt;/strong&gt;ï¼šä¸»ä»åº“ä½äºä¸åŒæ—¶åŒºä¸”ä½¿ç”¨äº† &lt;code&gt;NOW()&lt;/code&gt;ç­‰å‡½æ•°ï¼Œä¼šå¯¼è‡´æ—¶é—´å­—æ®µæ•°æ®ä¸åŒã€‚ åŠ¡å¿…ç»Ÿä¸€ä¸»ä»åº“çš„æ—¶åŒºè®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max_allowed_packet&lt;/code&gt;è®¾ç½®ä¸å½“&lt;/strong&gt;ï¼šä»åº“è¯¥å‚æ•°å€¼å°äºä¸»åº“æ—¶ï¼Œå¯èƒ½å¯¼è‡´å¤§å‹SQLè¯­å¥æ— æ³•è¢«ä»åº“æ¥æ”¶å’Œæ‰§è¡Œã€‚ ç¡®ä¿ä»åº“çš„ &lt;code&gt;max_allowed_packet&lt;/code&gt;å€¼ä¸å°äºä¸»åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³æ³¨é…ç½®ä¸è¿ç»´"&gt;âš™ï¸ å…³æ³¨é…ç½®ä¸è¿ç»´
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Server ID æˆ– UUID å†²çª&lt;/strong&gt;ï¼šä¸»ä»åº“é…ç½®äº†ç›¸åŒçš„ &lt;code&gt;server-id&lt;/code&gt;æˆ–æ‹¥æœ‰ç›¸åŒçš„ &lt;code&gt;uuid&lt;/code&gt;ï¼ˆåœ¨ &lt;code&gt;auto.cnf&lt;/code&gt;æ–‡ä»¶ä¸­ï¼‰ï¼Œä¼šå¯¼è‡´å¤åˆ¶æ— æ³•å¯åŠ¨ã€‚ ç¡®ä¿æ¯å°MySQLå®ä¾‹çš„ &lt;code&gt;server-id&lt;/code&gt;å’Œ &lt;code&gt;uuid&lt;/code&gt;å”¯ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Binlog è¢«è¯¯åˆ &lt;/strong&gt;ï¼šä»åº“IOçº¿ç¨‹è¯·æ±‚çš„Binlogåœ¨ä¸»åº“ä¸Šå·²è¢«æ¸…ç†ï¼Œä¼šå¯¼è‡´é”™è¯¯ &lt;code&gt;1236&lt;/code&gt;ã€‚ åˆ¶å®šåˆç†çš„Binlogä¿ç•™ç­–ç•¥ï¼Œç¡®ä¿ä»åº“æ‰€éœ€çš„æ—¥å¿—æ–‡ä»¶ä»ç„¶å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å·®å¼‚&lt;/strong&gt;ï¼šé«˜ç‰ˆæœ¬ä¸»åº“çš„ç‰¹æ€§å¯èƒ½åœ¨ä½ç‰ˆæœ¬ä»åº“ä¸Šä¸æ”¯æŒï¼Œå¼•å‘é—®é¢˜ã€‚ å°½é‡ä¿æŒä¸»ä»åº“MySQLç‰ˆæœ¬ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒè¿ç»´å»ºè®®"&gt;ğŸ’ æ ¸å¿ƒè¿ç»´å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸç›‘æ§&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt;ç›‘æ§ &lt;code&gt;Seconds_Behind_Master&lt;/code&gt;å’Œçº¿ç¨‹çŠ¶æ€ã€‚ è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;Prometheus + Grafana&lt;/strong&gt; æˆ– &lt;strong&gt;Percona Toolkit&lt;/strong&gt; ç­‰å·¥å…·è¿›è¡Œæ›´å…¨é¢çš„ç›‘æ§å’ŒæŠ¥è­¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§„èŒƒæ“ä½œ&lt;/strong&gt;ï¼šé¿å…åœ¨ä»åº“è¿›è¡Œå†™æ“ä½œã€‚å¯¹è¡¨ç»“æ„çš„æ›´æ”¹ï¼ˆDDLï¼‰åº”åœ¨ä¸»åº“æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸå¤‡ä»½ä¸æ ¡éªŒ&lt;/strong&gt;ï¼šå®šæœŸè¿›è¡Œä¸»ä»æ•°æ®ä¸€è‡´æ€§æ ¡éªŒï¼ˆå¯ä½¿ç”¨ &lt;code&gt;pt-table-checksum&lt;/code&gt;ç­‰å·¥å…·ï¼‰ï¼Œå‘ç°é—®é¢˜åŠæ—¶ä¿®å¤ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ¢³ç†èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œå¤„ç†MySQLä¸»ä»åŒæ­¥ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚å¦‚æœä½ åœ¨å…·ä½“å®è·µä¸­é‡åˆ°äº†ç‰¹å®šçš„é”™è¯¯ä»£ç æˆ–åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åŠåŒæ­¥å¤åˆ¶"&gt;åŠåŒæ­¥å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;MySQLåŠåŒæ­¥å¤åˆ¶é€šè¿‡åœ¨æ•°æ®å®‰å…¨æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—å·§å¦™å¹³è¡¡ï¼Œæˆä¸ºäº†è®¸å¤šå¯¹æ•°æ®ä¸€è‡´æ€§æœ‰è¦æ±‚çš„åœºæ™¯çš„é¦–é€‰æ–¹æ¡ˆã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿäº†è§£å®ƒä¸å¼‚æ­¥å¤åˆ¶å’ŒåŒæ­¥å¤åˆ¶çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;å¼‚æ­¥å¤åˆ¶&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;åŒæ­¥å¤åˆ¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼±ï¼Œå¯èƒ½ä¸¢å¤±æ•°æ®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºï¼Œè‡³å°‘ä¸€ä¸ªä»åº“æœ‰æ•°æ®å‰¯æœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€å¼ºï¼Œä¿è¯æ‰€æœ‰èŠ‚ç‚¹æ•°æ®ä¸€è‡´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡ ä¹æ— å½±å“&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è½»å¾®å¢åŠ ï¼Œä¸»åº“éœ€ç­‰å¾…ä»åº“ACK&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾è‘—å½±å“ï¼Œå»¶è¿Ÿé«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ï¼Œè¶…æ—¶è‡ªåŠ¨é™çº§ä¸ºå¼‚æ­¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼Œä¾èµ–æ‰€æœ‰ä»åº“çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå·¥ä½œåŸç†ä¸ä¿éšœæœºåˆ¶"&gt;ğŸ”„ æ ¸å¿ƒå·¥ä½œåŸç†ä¸ä¿éšœæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;åŠåŒæ­¥å¤åˆ¶çš„æ ¸å¿ƒæ”¹è¿›åœ¨äºäº‹åŠ¡æäº¤çš„æµç¨‹ï¼šä¸»åº“åœ¨å°†äº‹åŠ¡å†™å…¥è‡ªèº«çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰åï¼Œå¹¶ä¸ä¼šç«‹å³å‘å®¢æˆ·ç«¯è¿”å›æˆåŠŸï¼Œè€Œæ˜¯ä¼š&lt;strong&gt;ç­‰å¾…è‡³å°‘ä¸€ä¸ªä»åº“ç¡®è®¤&lt;/strong&gt;ï¼ˆACKï¼‰å·²æ”¶åˆ°è¯¥æ—¥å¿—å¹¶å†™å…¥å…¶ä¸­ç»§æ—¥å¿—ï¼ˆRelay Logï¼‰ã€‚åªæœ‰æ”¶åˆ°è¿™ä¸ªç¡®è®¤åï¼Œä¸»åº“æ‰ä¼šå®Œæˆæäº¤å¹¶å‘ŠçŸ¥å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†åº”å¯¹ç½‘ç»œæ³¢åŠ¨æˆ–ä»åº“å‹åŠ›å¯¼è‡´çš„å»¶è¿Ÿï¼ŒåŠåŒæ­¥å¤åˆ¶å¼•å…¥äº†&lt;strong&gt;è¶…æ—¶é€€åŒ–æœºåˆ¶&lt;/strong&gt;ã€‚ä¸»åº“æœ‰ä¸€ä¸ªå¯é…ç½®çš„ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼ˆå¦‚é»˜è®¤10ç§’ï¼‰ï¼Œå¦‚æœè¶…æ—¶ä»æœªæ”¶åˆ°ä»åº“çš„ç¡®è®¤ï¼Œå®ƒä¼š&lt;strong&gt;è‡ªåŠ¨é™çº§ä¸ºå¼‚æ­¥å¤åˆ¶æ¨¡å¼&lt;/strong&gt;ï¼Œä»è€Œä¿è¯ä¸»åº“çš„å†™æœåŠ¡ä¸ä¼šè¢«é˜»å¡ã€‚ä¸€æ—¦ä»åº“æ¢å¤ï¼Œå¤åˆ¶é“¾è·¯ä¼šé‡æ–°å»ºç«‹ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒMySQLæä¾›äº†ä¸¤ç§æ¨¡å¼ä»¥åº”å¯¹ä¸åŒçº§åˆ«çš„æ•°æ®ä¿æŠ¤éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;after_commit&lt;/code&gt;ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰&lt;/strong&gt;ï¼šä¸»åº“åœ¨äº‹åŠ¡æäº¤åç­‰å¾…ä»åº“ç¡®è®¤ã€‚å¦‚æœç­‰å¾…å¤±è´¥ï¼Œä¸»åº“ä¼šå›æ»šäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;after_sync&lt;/code&gt;æ¨¡å¼&lt;/strong&gt;ï¼šä¸»åº“åœ¨å°†BinlogåŒæ­¥åˆ°ç£ç›˜åã€æäº¤äº‹åŠ¡å‰å°±ç­‰å¾…ä»åº“ç¡®è®¤ã€‚è¿™ç§æ–¹å¼èƒ½è¿›ä¸€æ­¥å‡å°‘æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é…ç½®ä¸å®è·µè¦ç‚¹"&gt;âš™ï¸ é…ç½®ä¸å®è·µè¦ç‚¹
&lt;/h3&gt;&lt;p&gt;è¦å¯ç”¨åŠåŒæ­¥å¤åˆ¶ï¼Œéœ€è¦åœ¨ä¸»åº“å’Œä»åº“ä¸Šéƒ½è¿›è¡Œé…ç½®ï¼ŒåŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®‰è£…æ’ä»¶&lt;/strong&gt;ï¼šåœ¨ä¸»ä»åº“ä¸Šåˆ†åˆ«æ‰§è¡Œ &lt;code&gt;INSTALL PLUGIN ...&lt;/code&gt;å‘½ä»¤æ¥åŠ è½½åŠåŒæ­¥å¤åˆ¶æ’ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨åŠŸèƒ½&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;SET GLOBAL&lt;/code&gt;å‘½ä»¤å°†ä¸»åº“çš„ &lt;code&gt;rpl_semi_sync_master_enabled&lt;/code&gt;å’Œä»åº“çš„ &lt;code&gt;rpl_semi_sync_slave_enabled&lt;/code&gt;å‚æ•°è®¾ç½®ä¸º &lt;code&gt;ON&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¯çº¿ç¨‹&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;STOP SLAVE IO_THREAD; START SLAVE IO_THREAD;&lt;/code&gt;ä»¥ä½¿é…ç½®ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ°¸ä¹…é…ç½®&lt;/strong&gt;ï¼šä¸ºäº†é‡å¯åä¾ç„¶æœ‰æ•ˆï¼Œå»ºè®®å°†ç›¸å…³å‚æ•°å†™å…¥MySQLçš„é…ç½®æ–‡ä»¶ &lt;code&gt;my.cnf&lt;/code&gt;ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡ç›‘æ§ä¸€äº›å…³é”®çš„çŠ¶æ€å˜é‡æ¥äº†è§£åŠåŒæ­¥å¤åˆ¶çš„å·¥ä½œçŠ¶æ€ï¼Œä¾‹å¦‚ &lt;code&gt;Rpl_semi_sync_master_status&lt;/code&gt;ï¼ˆä¸»åº“åŠåŒæ­¥æ˜¯å¦æ´»è·ƒï¼‰ã€&lt;code&gt;Rpl_semi_sync_master_yes_tx&lt;/code&gt;ï¼ˆæˆåŠŸé€šè¿‡åŠåŒæ­¥æäº¤çš„äº‹åŠ¡æ•°ï¼‰å’Œ &lt;code&gt;Rpl_semi_sync_master_no_tx&lt;/code&gt;ï¼ˆå› è¶…æ—¶é™çº§ä¸ºå¼‚æ­¥çš„äº‹åŠ¡æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒåŠåŒæ­¥å¤åˆ¶æ˜¯åœ¨ä½ æ—¢æƒ³è¦æ¥è¿‘å¼‚æ­¥å¤åˆ¶çš„æ€§èƒ½ï¼Œåˆæ— æ³•æ¥å—å¼‚æ­¥å¤åˆ¶å¯èƒ½å¸¦æ¥çš„æ•°æ®ä¸¢å¤±é£é™©æ—¶çš„ç†æƒ³æŠ˜ä¸­æ–¹æ¡ˆã€‚å®ƒç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡‘èäº¤æ˜“ã€è®¢å•å¤„ç†&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹æ•°æ®å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„ç”µå•†ç³»ç»Ÿ&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºé«˜å¯ç”¨æ¶æ„ï¼Œå¸Œæœ›æ•…éšœåˆ‡æ¢æ—¶æ•°æ®ä¸¢å¤±æœ€å°‘&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£åŠåŒæ­¥å¤åˆ¶çš„ä»·å€¼ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯çš„é…ç½®ç»†èŠ‚æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="çƒ­-key"&gt;çƒ­ key
&lt;/h2&gt;&lt;p&gt;çƒ­ Key é—®é¢˜æ˜¯é«˜å¹¶å‘ç³»ç»Ÿä¸­ä¸€ä¸ªå¸¸è§çš„æŒ‘æˆ˜ï¼Œè¡¨ç°ä¸ºå¯¹æŸä¸ªç‰¹å®š Key çš„è®¿é—®é‡è¿œé«˜äºå…¶ä»– Keyï¼Œå¯¼è‡´å•ä¸ªæœåŠ¡å™¨å®ä¾‹ä¸å ªé‡è´Ÿã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒçš„è§£å†³æ€è·¯ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è§£å†³æ€è·¯&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šçº§ç¼“å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†çƒ­ Key æ•°æ®ç¼“å­˜åˆ°ç¦»åº”ç”¨æ›´è¿‘çš„åœ°æ–¹ï¼ˆå¦‚æœ¬åœ°ç¼“å­˜ï¼‰ï¼Œé¿å…æ‰€æœ‰è¯·æ±‚ç©¿é€åˆ° Redis/æ•°æ®åº“ã€‚&lt;/td&gt;
&lt;td&gt;è¯»å¤šå†™å°‘ï¼Œçƒ­ Key æ˜ç¡®ä¸” Value ä¸å¤§çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çƒ­ Key å¤‡ä»½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å•ä¸ªçƒ­ Key å¤åˆ¶æˆå¤šä¸ªå¤‡ä»½ Keyï¼ˆå¦‚ &lt;code&gt;key_01&lt;/code&gt;, &lt;code&gt;key_02&lt;/code&gt;ï¼‰ï¼Œå°†è®¿é—®å‹åŠ›åˆ†æ•£åˆ°é›†ç¾¤çš„ä¸åŒèŠ‚ç‚¹ä¸Šã€‚&lt;/td&gt;
&lt;td&gt;å†™æ“ä½œè¾ƒå°‘ï¼Œé€‚åˆé€šè¿‡åˆ†ç‰‡æŠ€æœ¯åˆ†æ•£è¯»å–å‹åŠ›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»å†™åˆ†ç¦»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ä¸»ä»æ¶æ„ï¼Œå°†è¯»è¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªä»èŠ‚ç‚¹ï¼Œæå‡æ•´ä½“è¯»ååé‡ã€‚&lt;/td&gt;
&lt;td&gt;è¯»è¿œå¤§äºå†™ï¼Œå¯¹æ•°æ®å®æ—¶æ€§è¦æ±‚ä¸æ˜¯æè‡´çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Key æ‹†åˆ†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä¸€ä¸ªå¤§çš„çƒ­ Keyï¼ˆå¦‚é›†åˆï¼‰æ‹†åˆ†æˆå¤šä¸ªå­ Keyï¼Œé™ä½å•ä¸ªèŠ‚ç‚¹çš„è®¿é—®å’Œå­˜å‚¨å‹åŠ›ã€‚&lt;/td&gt;
&lt;td&gt;å¤§ Key ä¸çƒ­ Key åŒæ—¶å­˜åœ¨çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æµä¸ç†”æ–­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨åº”ç”¨å±‚æˆ–ä»£ç†å±‚å¯¹çƒ­ Key çš„è®¿é—®è¿›è¡Œé™æµï¼Œä¿æŠ¤åç«¯æœåŠ¡ä¸è¢«å‹å®ã€‚&lt;/td&gt;
&lt;td&gt;çªå‘æµé‡éš¾ä»¥é¿å…ï¼Œä½œä¸ºä¿æŠ¤ç³»ç»Ÿçš„æœ€åä¸€é“é˜²çº¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•å‘ç°çƒ­-key"&gt;ğŸ” å¦‚ä½•å‘ç°çƒ­ Key
&lt;/h3&gt;&lt;p&gt;åœ¨è§£å†³é—®é¢˜ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å‡†ç¡®åœ°å‘ç°çƒ­ Keyã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸šåŠ¡é¢„ä¼°&lt;/strong&gt;ï¼šå¯¹äºç§’æ€å•†å“ã€çƒ­é—¨è¯é¢˜ç­‰å¯ä»¥é¢„è§çš„åœºæ™¯ï¼Œæå‰å°†å…¶æ ‡è®°ä¸ºæ½œåœ¨çƒ­ Key å¹¶åšå¥½åº”å¯¹æªæ–½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯ç»Ÿè®¡&lt;/strong&gt;ï¼šåœ¨ä»£ç ä¸­åµŒå…¥ç»Ÿè®¡é€»è¾‘ï¼Œå½“è®¿é—® Redis æ—¶ï¼Œè®°å½• Key çš„è®¿é—®é¢‘æ¬¡ï¼Œå¹¶é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ–¹å¼ä¸ŠæŠ¥ç»™åˆ†æç³»ç»Ÿã€‚è¿™ç§æ–¹å¼éœ€è¦å¯¹ä»£ç æœ‰ä¸€å®šä¾µå…¥æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Proxy/ä¸­é—´ä»¶æ”¶é›†&lt;/strong&gt;ï¼šå¦‚æœç³»ç»Ÿæ¶æ„ä¸­ä½¿ç”¨äº†ä»£ç†å±‚ï¼ˆå¦‚ Twemproxyï¼‰ï¼Œå¯ä»¥åœ¨è¿™ä¸€å±‚ç»Ÿä¸€æ”¶é›†æ‰€æœ‰è¯·æ±‚è¿›è¡Œç»Ÿè®¡åˆ†æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Redis è‡ªå¸¦å‘½ä»¤&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;monitor&lt;/code&gt;å‘½ä»¤&lt;/strong&gt;ï¼šå¯ä»¥å®æ—¶è¾“å‡º Redis å¤„ç†çš„æ‰€æœ‰å‘½ä»¤ï¼Œé€šè¿‡è„šæœ¬åˆ†æå…¶è¾“å‡ºå³å¯æ‰¾åˆ°çƒ­ Keyã€‚ä½†æ­¤å‘½ä»¤å¯¹æ€§èƒ½å½±å“è¾ƒå¤§ï¼Œ&lt;strong&gt;ä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒé•¿æ—¶é—´ä½¿ç”¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;redis-cli --hotkeys&lt;/code&gt;&lt;/strong&gt;ï¼šRedis 4.0.3 åŠä»¥ä¸Šç‰ˆæœ¬æä¾›çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿç›´æ¥æ‰¾å‡ºçƒ­ Keyã€‚éœ€è¦æ³¨æ„ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤å‰éœ€å°†å†…å­˜æ·˜æ±°ç­–ç•¥é…ç½®ä¸º &lt;code&gt;allkeys-lfu&lt;/code&gt;æˆ– &lt;code&gt;volatile-lfu&lt;/code&gt;ï¼Œå¹¶ä¸” Key æ•°é‡å¤šæ—¶å¯èƒ½è¾ƒæ…¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒè§£å†³æ–¹æ¡ˆè¯¦è§£"&gt;ğŸ’¡ æ ¸å¿ƒè§£å†³æ–¹æ¡ˆè¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-ä½¿ç”¨å¤šçº§ç¼“å­˜"&gt;1. ä½¿ç”¨å¤šçº§ç¼“å­˜
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯åº”å¯¹çƒ­ Key æœ€æœ‰æ•ˆçš„æ‰‹æ®µä¹‹ä¸€ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å¼•å…¥æœ¬åœ°ç¼“å­˜ï¼ˆå¦‚ Guava Cache, Caffeine, Ehcache ç­‰ï¼‰ï¼Œåœ¨è¯·æ±‚åˆ°è¾¾ Redis ä¹‹å‰è¿›è¡Œæ‹¦æˆªã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼šå½“çƒ­ Key è¢«è¯†åˆ«åï¼Œå°†å…¶æ•°æ®åŠ è½½åˆ°éƒ¨ç½²äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æœºå™¨æœ¬åœ°å†…å­˜ä¸­ã€‚åç»­çš„è¯»è¯·æ±‚ä¼šç›´æ¥ä»æœ¬æœºå†…å­˜è·å–æ•°æ®ï¼Œä¸å†è®¿é—® Redisã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šå°†é›†ä¸­åœ¨å¯¹ Redis ä¸€ä¸ªèŠ‚ç‚¹çš„è®¿é—®å‹åŠ›ï¼Œåˆ†æ•£åˆ°äº†ä¸Šç™¾ä¸ªåº”ç”¨å®ä¾‹ä¸Šï¼Œæå¤§åœ°å‡è½»äº† Redis çš„å‹åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼šéœ€è¦å…³æ³¨æœ¬åœ°ç¼“å­˜ä¸ Redis ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œä»¥åŠæœ¬åœ°ç¼“å­˜å¯¹åº”ç”¨å†…å­˜å ç”¨çš„å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-å®æ–½çƒ­-key-å¤‡ä»½"&gt;2. å®æ–½çƒ­ Key å¤‡ä»½
&lt;/h4&gt;&lt;p&gt;é€šè¿‡æ•°æ®åˆ†ç‰‡çš„æ€æƒ³ï¼Œå°†ä¸€ä¸ªçƒ­ Key å¤åˆ¶å¤šä»½ï¼Œå­˜å‚¨åœ¨é›†ç¾¤çš„ä¸åŒèŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œæ–¹å¼&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼ŒåŸå§‹ Key ä¸º &lt;code&gt;product_123&lt;/code&gt;ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªå¤‡ä»½ Keyï¼Œå¦‚ &lt;code&gt;product_123_a&lt;/code&gt;, &lt;code&gt;product_123_b&lt;/code&gt;, &lt;code&gt;product_123_c&lt;/code&gt;ï¼Œå¹¶ç¡®ä¿å®ƒä»¬é€šè¿‡åˆ†ç‰‡ç®—æ³•åˆ†å¸ƒåˆ°ä¸åŒçš„ Redis å®ä¾‹ä¸Šã€‚å½“æŸ¥è¯¢æ—¶ï¼Œå®¢æˆ·ç«¯éšæœºé€‰å–ä¸€ä¸ªå¤‡ä»½ Key è¿›è¡Œè®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šå®ç°ç›¸å¯¹ç®€å•ï¼Œæ— éœ€å¼•å…¥æ–°çš„ç»„ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;/strong&gt;ï¼šéœ€è¦è‡ªè¡Œåœ¨å®¢æˆ·ç«¯ç»´æŠ¤å¤‡ä»½ Key çš„åˆ—è¡¨å’Œè·¯ç”±é€»è¾‘ï¼›åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œéœ€è¦åŒæ—¶æ›´æ–°æ‰€æœ‰å¤‡ä»½ï¼Œå¢åŠ äº†å†™æ“ä½œçš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-è®¾ç½®é™æµä¸ç†”æ–­"&gt;3. è®¾ç½®é™æµä¸ç†”æ–­
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç§ä¿æŠ¤æ€§æªæ–½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™æµ&lt;/strong&gt;ï¼šåœ¨ç½‘å…³æˆ–åº”ç”¨å±‚é¢å¯¹ç‰¹å®š Key çš„è®¿é—®é¢‘ç‡è¿›è¡Œé™åˆ¶ï¼Œä¾‹å¦‚æ¯ç§’åªå…è®¸é€šè¿‡ 10000 æ¬¡è¯·æ±‚ï¼Œè¶…å‡ºéƒ¨åˆ†çš„è¯·æ±‚å¿«é€Ÿå¤±è´¥æˆ–è¿›å…¥é˜Ÿåˆ—ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†”æ–­&lt;/strong&gt;ï¼šå½“æ£€æµ‹åˆ°å¯¹æŸä¸ª Key çš„è®¿é—®å¼‚å¸¸ï¼ˆå¦‚è¶…æ—¶ã€é”™è¯¯ç‡å‡é«˜ï¼‰æ—¶ï¼Œæš‚æ—¶åœæ­¢è®¿é—®è¯¥ Key å¯¹åº”çš„æœåŠ¡ï¼Œç›´æ¥è¿”å›é»˜è®¤å€¼æˆ–é”™è¯¯ä¿¡æ¯ï¼Œç»™æœåŠ¡æ¢å¤çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ–¹æ¡ˆé€‰å‹ä¸å®è·µå»ºè®®"&gt;ğŸ’ æ–¹æ¡ˆé€‰å‹ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€šå¸¸éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µç»„åˆä½¿ç”¨ä¸Šè¿°æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºå¯é¢„çŸ¥çš„çªå‘æµé‡&lt;/strong&gt;ï¼ˆå¦‚ç§’æ€ï¼‰ï¼šé¦–é€‰ &lt;strong&gt;â€œå¤šçº§ç¼“å­˜ + é™æµâ€&lt;/strong&gt; çš„ç»„åˆã€‚æå‰å°†å•†å“æ•°æ®åŠ è½½åˆ°æœ¬åœ°ç¼“å­˜ï¼Œå¹¶è®¾ç½®ä¸¥æ ¼çš„é™æµç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºä¸å¯é¢„çŸ¥çªç„¶å‡ºç°çš„çƒ­ Key&lt;/strong&gt;ï¼šéœ€è¦å»ºç«‹å®Œå–„çš„ &lt;strong&gt;å®æ—¶æ£€æµ‹æœºåˆ¶&lt;/strong&gt;ï¼ˆå¦‚é€šè¿‡å®¢æˆ·ç«¯æˆ– Proxy ä¸ŠæŠ¥ï¼‰ï¼Œä¸€æ—¦å‘ç°çƒ­ Keyï¼Œç³»ç»Ÿèƒ½è‡ªåŠ¨è§¦å‘åº”å¯¹ç­–ç•¥ï¼Œå¦‚å°†å…¶åŠ å…¥æœ¬åœ°ç¼“å­˜æˆ–åŠ¨æ€åˆ›å»ºå¤‡ä»½ Keyã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜çš„åœºæ™¯&lt;/strong&gt;ï¼šä½¿ç”¨å¤šçº§ç¼“å­˜éœ€è°¨æ…ï¼Œå› ä¸ºæ•°æ®æ›´æ–°ä¼šæœ‰å»¶è¿Ÿã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;çƒ­ Key å¤‡ä»½&lt;/strong&gt; å¹¶ä¿è¯å†™æ“ä½œçš„åŸå­æ€§ï¼Œæˆ–è€…ç‰ºç‰²éƒ¨åˆ†æ€§èƒ½ï¼Œ&lt;strong&gt;è¯»å†™éƒ½èµ°ä¸»åº“&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ä¸å‘Šè­¦&lt;/strong&gt;ï¼šæ— è®ºå¦‚ä½•ä¼˜åŒ–ï¼Œå»ºç«‹å¼ºå¤§çš„ç›‘æ§ä½“ç³»éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚å¯†åˆ‡å…³æ³¨ Redis å„ä¸ªå®ä¾‹çš„ QPSã€CPU ä½¿ç”¨ç‡ã€ç½‘ç»œæµé‡ç­‰æŒ‡æ ‡ï¼Œå¹¶è®¾ç½®å‘Šè­¦é˜ˆå€¼ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°æ½œåœ¨çš„çƒ­ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„æ–¹æ¡ˆèƒ½ä¸ºä½ è§£å†³çƒ­ Key é—®é¢˜æä¾›æ¸…æ™°çš„æ€è·¯ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¹è§‚é”"&gt;ä¹è§‚é”
&lt;/h2&gt;&lt;p&gt;åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ Redis å®ç°ä¹è§‚é”æ˜¯ä¸€ç§é«˜æ•ˆçš„å¹¶å‘æ§åˆ¶æ–¹æ³•ã€‚å®ƒåŸºäº &lt;strong&gt;â€œå‡è®¾å†²çªä¸å¸¸å‘ç”Ÿâ€&lt;/strong&gt; çš„ç†å¿µï¼Œé€šè¿‡åœ¨æäº¤ä¿®æ”¹æ—¶æ£€æŸ¥æ•°æ®æ˜¯å¦è¢«å…¶ä»–å®¢æˆ·ç«¯æ›´æ”¹è¿‡ï¼Œæ¥ä¿è¯æ•°æ®æ“ä½œçš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ä¹è§‚é”&lt;/th&gt;
&lt;th&gt;æ‚²è§‚é”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…ˆä¿®æ”¹ï¼Œæäº¤æ—¶æ£€æŸ¥å†²çª&lt;/td&gt;
&lt;td&gt;å…ˆè·å–é”ï¼Œå†æ“ä½œæ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis çš„ &lt;code&gt;WATCH&lt;/code&gt;/ &lt;code&gt;MULTI&lt;/code&gt;/ &lt;code&gt;EXEC&lt;/code&gt;å‘½ä»¤ç»„åˆ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SETNX&lt;/code&gt;å‘½ä»¤æˆ– Redisson ç­‰åº“å®ç°çš„äº’æ–¥é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— é”ç­‰å¾…ï¼Œé«˜å¹¶å‘ä¸‹é‡è¯•å¯èƒ½å¢åŠ å¼€é”€&lt;/td&gt;
&lt;td&gt;æœ‰é”ç­‰å¾…ï¼Œå¯èƒ½å¼•èµ·çº¿ç¨‹é˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¯»å¤šå†™å°‘ï¼Œå†²çªæ¦‚ç‡è¾ƒä½&lt;/td&gt;
&lt;td&gt;å†™å¤šè¯»å°‘ï¼Œå†²çªæ¦‚ç‡é«˜ï¼Œéœ€è¦å¼ºä¸€è‡´æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå‘½ä»¤ä¸åŸç†"&gt;ğŸ”§ æ ¸å¿ƒå‘½ä»¤ä¸åŸç†
&lt;/h3&gt;&lt;p&gt;Redis ä¸»è¦é€šè¿‡ä¸‰ä¸ªå‘½ä»¤åä½œå®ç°ä¹è§‚é”ï¼š&lt;code&gt;WATCH&lt;/code&gt;ã€&lt;code&gt;MULTI&lt;/code&gt;å’Œ &lt;code&gt;EXEC&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WATCH&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯ä¹è§‚é”çš„åŸºçŸ³ã€‚å®ƒå¯ä»¥ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ª &lt;strong&gt;Key&lt;/strong&gt;ã€‚ä¸€æ—¦è°ƒç”¨ &lt;code&gt;WATCH&lt;/code&gt;ï¼ŒRedis ä¼šè®°å½•è¿™äº› Key çš„ç‰ˆæœ¬ï¼ˆæˆ–çŠ¶æ€ï¼‰ã€‚å¦‚æœåœ¨åç»­äº‹åŠ¡æäº¤ï¼ˆ&lt;code&gt;EXEC&lt;/code&gt;ï¼‰ä¹‹å‰ï¼Œæœ‰ä»»ä½•è¢«ç›‘è§†çš„ Key è¢«å…¶ä»–å®¢æˆ·ç«¯ä¿®æ”¹ï¼Œé‚£ä¹ˆå½“å‰å®¢æˆ·ç«¯çš„äº‹åŠ¡å°†ä¼šè¢«æ”¾å¼ƒæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;MULTI&lt;/code&gt;&lt;/strong&gt;ï¼šç”¨äºå¼€å¯ä¸€ä¸ª&lt;strong&gt;äº‹åŠ¡&lt;/strong&gt;ã€‚åœ¨ &lt;code&gt;MULTI&lt;/code&gt;å’Œ &lt;code&gt;EXEC&lt;/code&gt;ä¹‹é—´çš„å‘½ä»¤ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ï¼Œä½†ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œä¿è¯äº†å¤šä¸ªå‘½ä»¤çš„åŸå­æ€§æ‰¹é‡æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;EXEC&lt;/code&gt;&lt;/strong&gt;ï¼šç”¨äºæäº¤äº‹åŠ¡ã€‚å½“è°ƒç”¨ &lt;code&gt;EXEC&lt;/code&gt;æ—¶ï¼ŒRedis ä¼šæ£€æŸ¥æ‰€æœ‰è¢« &lt;code&gt;WATCH&lt;/code&gt;çš„ Key è‡ª &lt;code&gt;WATCH&lt;/code&gt;åæ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚å¦‚æœæ²¡æœ‰ä¿®æ”¹ï¼Œåˆ™é¡ºåºæ‰§è¡Œäº‹åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å‘½ä»¤ï¼›å¦åˆ™ï¼Œäº‹åŠ¡å°†æ‰§è¡Œå¤±è´¥ï¼Œè¿”å› &lt;code&gt;nil&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;strong&gt;ç›‘è§† â†’ è¯»å– â†’ è®¡ç®— â†’ æäº¤éªŒè¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ä»£ç å®ç°ç¤ºä¾‹"&gt;ğŸ“œ ä»£ç å®ç°ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Java (Jedis å®¢æˆ·ç«¯) å®ç°ä¹è§‚é”çš„å…¸å‹ç¤ºä¾‹ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªç®€å•çš„åº“å­˜æ‰£å‡åœºæ™¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import redis.clients.jedis.Jedis;
import redis.clients.jedis.Transaction;
import java.util.List;
public class RedisOptimisticLock {
public static void main(String[] args) {
try (Jedis jedis = new Jedis(&amp;#34;localhost&amp;#34;, 6379)) {
String key = &amp;#34;product:1001:stock&amp;#34;; // å•†å“åº“å­˜çš„é”®
jedis.set(key, &amp;#34;10&amp;#34;); // åˆå§‹åŒ–åº“å­˜ä¸º10
// æ¨¡æ‹Ÿå¤šä¸ªå®¢æˆ·ç«¯å¹¶å‘æ‰£å‡åº“å­˜
for (int i = 0; i &amp;lt; 20; i++) {
new Thread(() -&amp;gt; tryDeductStock(jedis, key)).start();
}
}
}
public static void tryDeductStock(Jedis jedis, String key) {
String clientId = Thread.currentThread().getName(); // ç”¨çº¿ç¨‹IDæ ‡è¯†å®¢æˆ·ç«¯
int maxRetries = 3; // è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°
int retryCount = 0;
while (retryCount &amp;lt; maxRetries) {
retryCount++;
try {
// 1. ç›‘è§†åº“å­˜é”®
jedis.watch(key);
int currentStock = Integer.parseInt(jedis.get(key));
// 2. æ£€æŸ¥åº“å­˜å¹¶å‡†å¤‡æ–°å€¼
if (currentStock &amp;gt; 0) {
// 3. å¼€å¯äº‹åŠ¡
Transaction tx = jedis.multi();
tx.set(key, String.valueOf(currentStock - 1));
// 4. æ‰§è¡Œäº‹åŠ¡ï¼Œå¹¶åˆ¤æ–­ç»“æœ
List&amp;lt;Object&amp;gt; results = tx.exec();
if (results != null &amp;amp;&amp;amp; !results.isEmpty()) {
System.out.println(clientId + &amp;#34;: æ‰£å‡æˆåŠŸã€‚å‰©ä½™åº“å­˜: &amp;#34; + (currentStock - 1));
return; // æˆåŠŸåˆ™é€€å‡ºå¾ªç¯
} else {
// 5. æ‰§è¡Œå¤±è´¥ï¼Œè¯´æ˜é”®è¢«ä¿®æ”¹ï¼Œè¿›è¡Œé‡è¯•
System.out.println(clientId + &amp;#34;: å¹¶å‘å†²çªï¼Œç¬¬&amp;#34; + retryCount + &amp;#34;æ¬¡é‡è¯•ã€‚&amp;#34;);
}
} else {
System.out.println(&amp;#34;åº“å­˜ä¸è¶³ï¼Œæ‰£å‡å¤±è´¥ã€‚&amp;#34;);
jedis.unwatch(); // å–æ¶ˆç›‘è§†
return;
}
} catch (Exception e) {
e.printStackTrace();
jedis.unwatch(); // å‘ç”Ÿå¼‚å¸¸æ—¶å–æ¶ˆç›‘è§†
break;
}
}
System.out.println(clientId + &amp;#34;: æ“ä½œå¤±è´¥ï¼Œå·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä»£ç å…³é”®ç‚¹è§£é‡Š&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;ï¼šå½“ &lt;code&gt;tx.exec()&lt;/code&gt;è¿”å› &lt;code&gt;null&lt;/code&gt;æˆ–ç©ºåˆ—è¡¨æ—¶ï¼Œæ„å‘³ç€åœ¨ &lt;code&gt;WATCH&lt;/code&gt;å’Œ &lt;code&gt;EXEC&lt;/code&gt;ä¹‹é—´ï¼Œåº“å­˜è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œé‡è¯•ï¼Œç›´åˆ°æˆåŠŸæˆ–è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼š&lt;code&gt;MULTI&lt;/code&gt;/&lt;code&gt;EXEC&lt;/code&gt;åŒ…è£¹çš„å‘½ä»¤æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;unwatch&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨æ“ä½œå®Œæˆæˆ–å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œè°ƒç”¨ &lt;code&gt;unwatch&lt;/code&gt;å¯ä»¥æ‰‹åŠ¨å–æ¶ˆå¯¹æ‰€æœ‰é”®çš„ç›‘è§†ï¼Œè¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šä¹è§‚é”çš„ä¼˜åŠ¿åœ¨äºå®ƒä¸éœ€è¦åœ¨è¯»å–æ•°æ®æ—¶åŠ é”ï¼Œä¸ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯ï¼Œå› æ­¤åœ¨&lt;strong&gt;è¯»å¤šå†™å°‘&lt;/strong&gt;çš„å¹¶å‘åœºæ™¯ä¸‹æ€§èƒ½å¾ˆå¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;/strong&gt;ï¼šåœ¨&lt;strong&gt;å†™æ“ä½œéå¸¸é¢‘ç¹&lt;/strong&gt;çš„é«˜ç«äº‰ç¯å¢ƒä¸‹ï¼Œå†²çªä¼šå¤§é‡å‘ç”Ÿï¼Œå¯¼è‡´çº¿ç¨‹éœ€è¦ä¸æ–­é‡è¯•ï¼Œåè€Œå¯èƒ½é™ä½ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Lua è„šæœ¬å¯¹æ¯”&lt;/strong&gt;ï¼šå¯¹äºéå¸¸ç®€å•çš„åŸå­æ“ä½œï¼ˆä¾‹å¦‚é€’å¢ã€é€’å‡ï¼‰ï¼Œä½¿ç”¨ Redis å†…åµŒçš„ &lt;strong&gt;Lua è„šæœ¬&lt;/strong&gt;é€šå¸¸æ˜¯æ›´ä¼˜çš„é€‰æ‹©ã€‚å› ä¸º Lua è„šæœ¬åœ¨æ‰§è¡Œæ—¶æ˜¯åŸå­æ€§çš„ï¼Œç›¸å½“äºä¸€ä¸ªâ€œéšå¼é”â€ï¼Œèƒ½å¤Ÿé¿å…ä¹è§‚é”çš„é‡è¯•å¼€é”€ï¼Œå®ç°æ›´ç®€æ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ ç†è§£å’Œå®ç° Redis çš„ä¹è§‚é”ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨å“ªç§å¹¶å‘æ§åˆ¶æ–¹æ¡ˆæ›´åˆé€‚ã€‚&lt;/p&gt;
&lt;h2 id="ä¸­ä½æ•°ä¼°ç®—"&gt;ä¸­ä½æ•°ä¼°ç®—
&lt;/h2&gt;&lt;p&gt;åœ¨æµå¼åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ ¹æ®æºå¸¦é‡è¦æ€§åˆ†æ•°çš„è¯·æ±‚æ¥ä¼°ç®—ä¸­ä½æ•°ï¼Œå…³é”®åœ¨äºå°†â€œé‡è¦æ€§åˆ†æ•°â€è½¬åŒ–ä¸ºè®¡ç®—ä¸­çš„â€œæƒé‡â€ï¼Œå¹¶é‡‡ç”¨åˆé€‚çš„æµå¼ç®—æ³•å’Œåˆ†å¸ƒå¼æ¶æ„ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„æ–¹æ³•å’Œè€ƒé‡ã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£åŠ æƒä¸­ä½æ•°"&gt;âš–ï¸ ç†è§£åŠ æƒä¸­ä½æ•°
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼Œå½“è¯·æ±‚æºå¸¦é‡è¦æ€§åˆ†æ•°æ—¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸å†æ˜¯ç®€å•çš„&lt;strong&gt;æ•°æ®ç‚¹è®¡æ•°&lt;/strong&gt;ï¼Œè€Œæ˜¯è¦è€ƒè™‘æ¯ä¸ªæ•°æ®ç‚¹çš„&lt;strong&gt;æƒé‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»è®¡æ•°åˆ°æƒé‡&lt;/strong&gt;ï¼šåœ¨æ™®é€šä¸­ä½æ•°è®¡ç®—ä¸­ï¼Œæ¯ä¸ªæ•°æ®ç‚¹è¢«è§†ä¸ºåŒç­‰é‡è¦ã€‚å¼•å…¥é‡è¦æ€§åˆ†æ•°åï¼Œæ¯ä¸ªæ•°æ®ç‚¹åˆ™æ‹¥æœ‰ä¸åŒçš„æƒé‡ã€‚æ­¤æ—¶çš„ä¸­ä½æ•°è®¡ç®—ï¼Œéœ€è¦ä½¿å¾—&lt;strong&gt;å‰åŠéƒ¨åˆ†æ•°æ®çš„ç´¯ç§¯æƒé‡å’Œ&lt;/strong&gt;ä¸&lt;strong&gt;ååŠéƒ¨åˆ†æ•°æ®çš„ç´¯ç§¯æƒé‡å’Œ&lt;/strong&gt;åŸºæœ¬ç›¸ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸¾ä¾‹è¯´æ˜&lt;/strong&gt;ï¼šå‡è®¾æœ‰ä¸‰ä¸ªè¯·æ±‚ï¼Œå…¶è€—æ—¶å’Œé‡è¦æ€§åˆ†æ•°åˆ†åˆ«ä¸ºï¼š(100ms, æƒé‡1), (200ms, æƒé‡3), (300ms, æƒé‡2)ã€‚æ€»æƒé‡ä¸º6ã€‚æŒ‰è€—æ—¶æ’åºåï¼ŒåŠ æƒä¸­ä½æ•°æ˜¯ç´¯è®¡æƒé‡é¦–å…ˆè¾¾åˆ°æˆ–è¶…è¿‡æ€»æƒé‡ä¸€åŠï¼ˆå³3ï¼‰çš„é‚£ä¸ªå€¼ã€‚æ­¤ä¾‹ä¸­ï¼Œ100msåç´¯è®¡æƒé‡1ï¼Œ200msåç´¯è®¡æƒé‡1+3=4ï¼ˆå·²è¶…è¿‡3ï¼‰ï¼Œå› æ­¤åŠ æƒä¸­ä½æ•°ä¸º200msã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æµå¼å¤„ç†ä¸åˆ†å¸ƒå¼æ¶æ„ç­–ç•¥"&gt;ğŸš€ æµå¼å¤„ç†ä¸åˆ†å¸ƒå¼æ¶æ„ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;ç›´æ¥å­˜å‚¨æ‰€æœ‰åŸå§‹æ•°æ®å¹¶æ’åºè®¡ç®—åŠ æƒä¸­ä½æ•°åœ¨æµå¼åˆ†å¸ƒå¼åœºæ™¯ä¸‹æ˜¯ä¸ç°å®çš„ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯&lt;strong&gt;å¢é‡æ›´æ–°&lt;/strong&gt;å’Œ&lt;strong&gt;åˆ†å¸ƒå¼èšåˆ&lt;/strong&gt;çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®åˆ†æ¡¶ä¸è¿‘ä¼¼è®¡ç®—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•æ˜¯&lt;strong&gt;åˆ†æ¡¶è®¡æ•°&lt;/strong&gt;ï¼ˆBinningï¼‰ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†å¯èƒ½çš„å“åº”æ—¶é—´èŒƒå›´åˆ’åˆ†æˆä¸€ç³»åˆ—è¿ç»­çš„åŒºé—´ï¼ˆç§°ä¸ºâ€œæ¡¶â€ï¼‰ï¼Œä¾‹å¦‚ &lt;code&gt;0-10ms&lt;/code&gt;, &lt;code&gt;10-50ms&lt;/code&gt;, &lt;code&gt;50-100ms&lt;/code&gt;ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ¡¶ä¸ä»…è®°å½•è½å…¥è¯¥åŒºé—´çš„&lt;strong&gt;æ•°æ®ç‚¹ä¸ªæ•°&lt;/strong&gt;ï¼Œæ›´é‡è¦çš„æ˜¯è®°å½•è¿™äº›æ•°æ®ç‚¹çš„&lt;strong&gt;æƒé‡æ€»å’Œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“æ–°çš„è¯·æ±‚æ•°æ®åˆ°è¾¾æ—¶ï¼Œç³»ç»Ÿåªéœ€æ‰¾åˆ°å¯¹åº”çš„æ¡¶ï¼Œå¹¶å°†å…¶æƒé‡ç´¯åŠ åˆ°è¯¥æ¡¶çš„æ€»æƒé‡ä¸­ï¼Œæ— éœ€ä¿å­˜åŸå§‹æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢ä¸­ä½æ•°æ—¶ï¼Œä»è€—æ—¶æœ€å°çš„æ¡¶å¼€å§‹ç´¯åŠ æƒé‡ï¼Œç›´åˆ°ç´¯è®¡æƒé‡è¶…è¿‡æ€»æƒé‡çš„ä¸€åŠï¼Œæ‰€åœ¨æ¡¶çš„ä»£è¡¨çš„è€—æ—¶ï¼ˆå¦‚æ¡¶ä¸­ä½æ•°æˆ–ä¸Šé™ï¼‰å³å¯ä½œä¸ºåŠ æƒä¸­ä½æ•°çš„è¿‘ä¼¼å€¼ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å¹³è¡¡ç²¾åº¦å’Œè®¡ç®—å¼€é”€ï¼Œå¯ä»¥å¯¹&lt;strong&gt;ä½è€—æ—¶åŒºåŸŸè®¾ç½®æ›´ç»†çš„æ¡¶ç²’åº¦&lt;/strong&gt;ï¼Œé«˜è€—æ—¶åŒºåŸŸè®¾ç½®è¾ƒç²—çš„ç²’åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;T-Digest ç­‰é«˜çº§æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºç²¾åº¦è¦æ±‚æ›´é«˜çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¦‚ &lt;strong&gt;T-Digest&lt;/strong&gt; ä¹‹ç±»çš„ä¸“é—¨ç®—æ³•ã€‚è™½ç„¶æœç´¢ç»“æœæœªç›´æ¥æåŠï¼Œä½†å®ƒæ˜¯å¤„ç†æµå¼åŠ æƒåˆ†ä½æ•°ä¼°ç®—çš„å¸¸ç”¨é«˜æ•ˆæ–¹æ³•ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼ç¯å¢ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ¶æ„ä¸‹çš„åˆå¹¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ•°æ®é€šå¸¸ç”±å¤šä¸ªèŠ‚ç‚¹å¹¶è¡Œå¤„ç†ã€‚æ•´ä½“æµç¨‹å¯ä»¥è®¾è®¡ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°èšåˆ&lt;/strong&gt;ï¼šæ¯ä¸ªå¤„ç†èŠ‚ç‚¹ç‹¬ç«‹ç»´æŠ¤è‡ªå·±çš„æ•°æ®æ‘˜è¦ï¼Œä¾‹å¦‚è‡ªå·±çš„ä¸€å¥—åˆ†æ¡¶ç»Ÿè®¡æˆ–ä¸€ä¸ª T-Digest ç»“æ„ï¼Œå¹¶å®šæœŸï¼ˆå¦‚æ¯åˆ†é’Ÿï¼‰å°†è¿™ä»½æ‘˜è¦æ•°æ®å‘é€ç»™èšåˆèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€èšåˆ&lt;/strong&gt;ï¼šèšåˆèŠ‚ç‚¹æ¥æ”¶æ¥è‡ªæ‰€æœ‰å¤„ç†èŠ‚ç‚¹çš„æ‘˜è¦ï¼Œå¹¶å°†è¿™äº›æ‘˜è¦åˆå¹¶æˆä¸€ä¸ªå…¨å±€æ‘˜è¦ã€‚å¯¹äºåˆ†æ¡¶æ³•ï¼Œåˆå¹¶å°±æ˜¯&lt;strong&gt;å°†ç›¸åŒæ¡¶çš„æƒé‡ç›´æ¥ç›¸åŠ &lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªå…¨å±€æ‘˜è¦å°±å¯ä»¥ç”¨æ¥è®¡ç®—è¿‘ä¼¼çš„åŠ æƒä¸­ä½æ•°æˆ–å…¶ä»–åˆ†ä½æ•°ï¼ˆå¦‚ P95ã€P99ï¼‰ã€‚è¿™ç§&lt;strong&gt;æ‘˜è¦åˆå¹¶&lt;/strong&gt;çš„æ–¹å¼ç½‘ç»œå¼€é”€å°ï¼Œæ•ˆç‡é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®è·µè€ƒé‡ç‚¹"&gt;âš™ï¸ å®è·µè€ƒé‡ç‚¹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…å®ç°æ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çª—å£ç±»å‹é€‰æ‹©&lt;/strong&gt;ï¼šæ˜¯è®¡ç®—&lt;strong&gt;å…¨å±€&lt;/strong&gt;çš„åŠ æƒä¸­ä½æ•°ï¼Œè¿˜æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼ˆå¦‚&lt;strong&gt;æœ€è¿‘5åˆ†é’Ÿ&lt;/strong&gt;ï¼‰çš„åŠ æƒä¸­ä½æ•°ï¼Ÿè¿™å†³å®šäº†æ˜¯å¦éœ€è¦æ•°æ®è¿‡æœŸæœºåˆ¶ã€‚æ»‘åŠ¨çª—å£é€šå¸¸æ›´ä¸ºå®ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé‡èµ‹å€¼ç­–ç•¥&lt;/strong&gt;ï¼šé‡è¦æ€§åˆ†æ•°å¦‚ä½•å…·ä½“è½¬åŒ–ä¸ºæƒé‡è‡³å…³é‡è¦ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åˆ†æ•°ä½œä¸ºæƒé‡ï¼Œæˆ–é€šè¿‡æŸç§å‡½æ•°ï¼ˆå¦‚å¯¹æ•°å‡½æ•°ï¼‰è¿›è¡Œæ˜ å°„ï¼Œä»¥å¹³æ»‘æç«¯å€¼çš„å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾åº¦ä¸æ•ˆç‡çš„æƒè¡¡&lt;/strong&gt;ï¼šåˆ†æ¡¶çš„ç²’åº¦ã€T-Digest çš„å‚æ•°ç­‰éƒ½ä¼šå½±å“è®¡ç®—ç²¾åº¦å’Œèµ„æºæ¶ˆè€—ï¼Œéœ€è¦æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹é”™æ€§&lt;/strong&gt;ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œéœ€è¦è€ƒè™‘éƒ¨åˆ†èŠ‚ç‚¹æ•…éšœæˆ–ç½‘ç»œå»¶è¿Ÿçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ä¿è¯ä¼°ç®—ç»“æœçš„æœ€ç»ˆä¸€è‡´æ€§å’Œç³»ç»Ÿçš„é²æ£’æ€§ã€‚D-Stream ç­‰æ¨¡å‹çš„æ€æƒ³å¯ä¾›å‚è€ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒæ–¹æ¡ˆæ€è·¯"&gt;ğŸ’ æ ¸å¿ƒæ–¹æ¡ˆæ€è·¯
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ€è·¯å¯ä»¥å½’çº³ä¸ºä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæ­¥éª¤&lt;/th&gt;
&lt;th&gt;å…³é”®æŠ€æœ¯æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;1. æ¦‚å¿µè½¬åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†â€œé‡è¦æ€§åˆ†æ•°â€ä½œä¸ºè®¡ç®—&lt;strong&gt;åŠ æƒä¸­ä½æ•°&lt;/strong&gt;çš„æƒé‡ã€‚&lt;/td&gt;
&lt;td&gt;æ ¸å¿ƒç›®æ ‡çš„è½¬å˜ï¼Œä»å¹³ç­‰è®¡æ•°åˆ°åŠ æƒç»Ÿè®¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2. æœ¬åœ°ä¼°ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†æ¡¶è¿‘ä¼¼æ³•&lt;/strong&gt; æˆ– &lt;strong&gt;T-Digest ç­‰ç®—æ³•&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨å•ä¸ªå¤„ç†èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨é«˜æ•ˆçš„æ•°æ®ç»“æ„å¢é‡æ›´æ–°æ•°æ®æ‘˜è¦ï¼Œé¿å…å­˜å‚¨å…¨éƒ¨åŸå§‹æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;3. å…¨å±€èšåˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨èšåˆèŠ‚ç‚¹&lt;strong&gt;åˆå¹¶æ¥è‡ªå„ä¸ªå¤„ç†èŠ‚ç‚¹çš„æ•°æ®æ‘˜è¦&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;é€šè¿‡åˆå¹¶æœ¬åœ°æ‘˜è¦å¾—åˆ°å…¨å±€è§†å›¾ï¼Œæ”¯æŒåˆ†å¸ƒå¼è®¡ç®—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›æ€è·¯èƒ½å¸®åŠ©æ‚¨è®¾è®¡æµå¼åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„åŠ æƒä¸­ä½æ•°ä¼°ç®—æ–¹æ¡ˆã€‚å¦‚æœæ‚¨å¯¹ç‰¹å®šç®—æ³•æˆ–æ¶æ„ç»†èŠ‚æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘25 Oct</title><link>https://dyhes.github.io/p/nowcoder25-oct/</link><pubDate>Fri, 10 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoder25-oct/</guid><description>&lt;h2 id="è¿›ç¨‹ä¸çº¿ç¨‹"&gt;è¿›ç¨‹ä¸çº¿ç¨‹
&lt;/h2&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œç°ä»£æ“ä½œç³»ç»Ÿçš„è°ƒåº¦å™¨ç›´æ¥ç®¡ç†çš„å¯¹è±¡æ˜¯&lt;strong&gt;çº¿ç¨‹&lt;/strong&gt;ï¼Œè€Œ&lt;strong&gt;è¿›ç¨‹&lt;/strong&gt;åˆ™ä¸»è¦ä½œä¸ºèµ„æºåˆ†é…çš„å®¹å™¨ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å®ƒä»¬çš„å…³é”®åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¿›ç¨‹&lt;/th&gt;
&lt;th&gt;çº¿ç¨‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒåº¦è§’è‰²&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;CPUè°ƒåº¦çš„åŸºæœ¬å•ä½&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºæ‹¥æœ‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‹¥æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€æ–‡ä»¶ã€å†…å­˜ç­‰èµ„æº&lt;/td&gt;
&lt;td&gt;å…±äº«è¿›ç¨‹çš„èµ„æºï¼Œä½†æœ‰è‡ªå·±çš„æ ˆã€å¯„å­˜å™¨ç­‰ç§æœ‰æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼€é”€å¤§ï¼Œéœ€è¦åˆ‡æ¢é¡µè¡¨ã€å†…å­˜ç©ºé—´ç­‰&lt;/td&gt;
&lt;td&gt;å¼€é”€å°ï¼Œè‹¥å±åŒä¸€è¿›ç¨‹ï¼Œåªéœ€åˆ‡æ¢ç§æœ‰æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸€ä¸ªå´©æºƒé€šå¸¸ä¸å½±å“å…¶ä»–è¿›ç¨‹&lt;/td&gt;
&lt;td&gt;çº¿ç¨‹é—´å…±äº«å†…å­˜ï¼Œä¸€ä¸ªçº¿ç¨‹å´©æºƒå¯èƒ½å¯¼è‡´æ•´ä¸ªè¿›ç¨‹ç»ˆæ­¢&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£è°ƒåº¦å•ä½æ¼”å˜"&gt;ğŸ” ç†è§£è°ƒåº¦å•ä½æ¼”å˜
&lt;/h3&gt;&lt;p&gt;ç†è§£ä¸ºä½•çº¿ç¨‹æˆä¸ºè°ƒåº¦å•ä½ï¼Œå…³é”®åœ¨äºçœ‹æ¸…å…¶è®¾è®¡åˆè¡·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿›ç¨‹çš„â€œæ²‰é‡â€&lt;/strong&gt;ï¼šæ—©æœŸæ“ä½œç³»ç»Ÿç¡®å®ç›´æ¥è°ƒåº¦è¿›ç¨‹ã€‚ä½†è¿›ç¨‹åƒä¸€ä¸ªâ€œç‹¬æ ‹åˆ«å¢…â€ï¼Œæ‹¥æœ‰å®Œå…¨ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ç­‰å…¨éƒ¨ç³»ç»Ÿèµ„æºã€‚å½“è°ƒåº¦å™¨éœ€è¦ä»ä¸€ä¸ªè¿›ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå°±åƒè®©ä¸€ä¸ªäººä»ä¸€æ ‹åˆ«å¢…æ¬åˆ°å¦ä¸€æ ‹åˆ«å¢…å·¥ä½œå’Œç”Ÿæ´»ï¼Œéœ€è¦æ›´æ¢æ‰€æœ‰ç¯å¢ƒï¼ˆåˆ‡æ¢å®Œæ•´çš„åœ°å€ç©ºé—´ã€æ›´æ–°å¯„å­˜å™¨ã€æ¸…é™¤ç¼“å­˜ç­‰ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º&lt;strong&gt;è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¼€é”€éå¸¸å¤§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹çš„â€œè½»é‡â€&lt;/strong&gt;ï¼šä¸ºäº†æ›´é«˜æ•ˆåœ°å®ç°å¹¶å‘ï¼Œçº¿ç¨‹è¢«å¼•å…¥ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹å†…éƒ¨çš„æ‰§è¡Œæµï¼Œå¯ä»¥çœ‹ä½œæ˜¯â€œåˆ«å¢…é‡Œçš„åˆç§Ÿå®¤å‹â€ã€‚å®ƒä»¬å…±äº«åˆ«å¢…çš„ä¸»è¦èµ„æºï¼ˆå¦‚å¨æˆ¿ã€å®¢å…ï¼Œå³è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€å…¨å±€å˜é‡ã€æ‰“å¼€çš„æ–‡ä»¶ï¼‰ï¼Œä½†æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„â€œå§å®¤â€ï¼ˆå³æ ˆã€å¯„å­˜å™¨çŠ¶æ€å’Œç¨‹åºè®¡æ•°å™¨ï¼‰ã€‚å½“è°ƒåº¦å™¨åœ¨åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹é—´åˆ‡æ¢æ—¶ï¼Œå°±åƒè®©ä¸€ä¸ªäººä»è‡ªå·±çš„å§å®¤èµ°åˆ°å®¤å‹çš„å§å®¤å·¥ä½œï¼Œå¤§éƒ¨åˆ†ç¯å¢ƒï¼ˆåˆ«å¢…æœ¬èº«ï¼‰æ— éœ€æ”¹å˜ï¼Œåªéœ€åˆ‡æ¢ä¸ªäººç‰©å“ï¼ˆçº¿ç¨‹çš„ç§æœ‰çŠ¶æ€ï¼‰ï¼Œè¿™å°±æ˜¯&lt;strong&gt;çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ï¼Œå…¶&lt;strong&gt;å¼€é”€è¿œå°äºè¿›ç¨‹åˆ‡æ¢&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œå°†çº¿ç¨‹ä½œä¸ºè°ƒåº¦åŸºæœ¬å•ä½ï¼Œå¯ä»¥åœ¨å¹¶å‘æ‰§è¡Œæ—¶å¤§å¹…å‡å°‘åˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œæé«˜CPUçš„åˆ©ç”¨ç‡å’Œç³»ç»Ÿçš„æ•´ä½“å“åº”èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h3 id="-è°ƒåº¦å™¨çš„å®é™…å·¥ä½œç»†èŠ‚"&gt;âš™ï¸ è°ƒåº¦å™¨çš„å®é™…å·¥ä½œç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯å†³å®šå“ªä¸ªå¯è¿è¡Œçš„çº¿ç¨‹æ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨CPUæ ¸å¿ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦é˜Ÿåˆ—&lt;/strong&gt;ï¼šæ“ä½œç³»ç»Ÿä¼šç»´æŠ¤ä¸åŒçš„é˜Ÿåˆ—æ¥ç®¡ç†çº¿ç¨‹ã€‚æœ€ä¸»è¦çš„æ˜¯&lt;strong&gt;å°±ç»ªé˜Ÿåˆ—&lt;/strong&gt;ï¼Œé‡Œé¢å­˜æ”¾ç€æ‰€æœ‰å·²å‡†å¤‡å¥½ã€åªç­‰CPUèµ„æºçš„çº¿ç¨‹ã€‚å½“æŸä¸ªçº¿ç¨‹å› ä¸ºç­‰å¾…I/Oæ“ä½œï¼ˆå¦‚è¯»å–æ–‡ä»¶ã€ç½‘ç»œæ•°æ®ï¼‰æˆ–ä¸»åŠ¨ç¡çœ è€Œæš‚åœæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šè¢«ç§»å‡ºå°±ç»ªé˜Ÿåˆ—ï¼Œè¿›å…¥ç›¸åº”çš„&lt;strong&gt;ç­‰å¾…é˜Ÿåˆ—&lt;/strong&gt;æˆ–&lt;strong&gt;é˜»å¡é˜Ÿåˆ—&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦è§¦å‘æ—¶æœº&lt;/strong&gt;ï¼šè°ƒåº¦å¹¶ééšæœºå‘ç”Ÿï¼Œé€šå¸¸åœ¨ä»¥ä¸‹æƒ…å†µè¢«è§¦å‘ï¼š
&lt;ul&gt;
&lt;li&gt;æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹&lt;strong&gt;æ—¶é—´ç‰‡ç”¨å®Œ&lt;/strong&gt;ï¼ˆåŸºäºæ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹&lt;strong&gt;ä¸»åŠ¨é˜»å¡&lt;/strong&gt;ï¼Œä¾‹å¦‚è¿›è¡ŒI/Oæ“ä½œæˆ–è°ƒç”¨&lt;code&gt;sleep()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰&lt;strong&gt;æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹&lt;/strong&gt;è¿›å…¥å°±ç»ªçŠ¶æ€ï¼ˆæŠ¢å å¼è°ƒåº¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å½“å‰çº¿ç¨‹&lt;strong&gt;è¿è¡Œç»“æŸ&lt;/strong&gt;æˆ–&lt;strong&gt;è¢«ç»ˆæ­¢&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦ç®—æ³•&lt;/strong&gt;ï¼šè°ƒåº¦å™¨ä¾æ®ç‰¹å®šç®—æ³•ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©çº¿ç¨‹ï¼Œå¸¸è§çš„æœ‰å…ˆæ¥å…ˆæœåŠ¡ã€æ—¶é—´ç‰‡è½®è½¬ã€ä¼˜å…ˆçº§è°ƒåº¦ã€å¤šçº§åé¦ˆé˜Ÿåˆ—ç­‰ï¼Œç›®æ ‡æ˜¯å¹³è¡¡å…¬å¹³æ€§ã€ååé‡ã€å“åº”æ—¶é—´ç­‰æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦è¡¥å……ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ é‡è¦è¡¥å……ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å•çº¿ç¨‹è¿›ç¨‹&lt;/strong&gt;ï¼šå¯¹äºä¸€ä¸ªåªåŒ…å«ä¸€ä¸ªçº¿ç¨‹çš„è¿›ç¨‹ï¼ˆå•çº¿ç¨‹è¿›ç¨‹ï¼‰ï¼Œè°ƒåº¦çº¿ç¨‹å°±ç­‰äºè°ƒåº¦è¯¥è¿›ç¨‹æœ¬èº«ã€‚æ­¤æ—¶ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹åœ¨è°ƒåº¦è§†è§’ä¸Šå‡ ä¹åˆä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·çº§çº¿ç¨‹ä¸å†…æ ¸çº§çº¿ç¨‹&lt;/strong&gt;ï¼šçº¿ç¨‹çš„å®ç°æ¨¡å‹ä¼šå½±å“è°ƒåº¦ã€‚æˆ‘ä»¬é€šå¸¸è®¨è®ºçš„æ˜¯&lt;strong&gt;å†…æ ¸çº§çº¿ç¨‹&lt;/strong&gt;ï¼Œå…¶åˆ›å»ºã€ç®¡ç†å’Œè°ƒåº¦éƒ½ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç›´æ¥è´Ÿè´£ï¼Œå› æ­¤èƒ½è¢«åˆ†é…åˆ°å¤šä¸ªCPUæ ¸å¿ƒä¸ŠçœŸæ­£å¹¶è¡Œæ‰§è¡Œã€‚è€Œ&lt;strong&gt;ç”¨æˆ·çº§çº¿ç¨‹&lt;/strong&gt;æ˜¯åœ¨ç”¨æˆ·ç©ºé—´ç”±çº¿ç¨‹åº“ç®¡ç†çš„ï¼Œå†…æ ¸å¹¶ä¸çŸ¥é“å®ƒä»¬çš„å­˜åœ¨ã€‚å¯¹äºå†…æ ¸æ¥è¯´ï¼Œåªçœ‹åˆ°å…¶æ‰€å±çš„è¿›ç¨‹ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹æœ‰å¤šä¸ªç”¨æˆ·çº§çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹é€šå¸¸æ— æ³•è¢«å†…æ ¸ç›´æ¥è°ƒåº¦åˆ°å¤šä¸ªCPUæ ¸å¿ƒä¸Šå¹¶è¡Œè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿›ç¨‹ä¾ç„¶è‡³å…³é‡è¦&lt;/strong&gt;ï¼šå°½ç®¡çº¿ç¨‹æ˜¯è°ƒåº¦å•ä½ï¼Œä½†è¿›ç¨‹ä½œä¸º&lt;strong&gt;èµ„æºå®¹å™¨å’Œæ‰€æœ‰æƒå•ä½&lt;/strong&gt;çš„è§’è‰²ä¸æ¯«æ²¡æœ‰å‡å¼±ã€‚å®ƒä¸ºå†…éƒ¨çš„çº¿ç¨‹æä¾›äº†ç‹¬ç«‹çš„ã€å—ä¿æŠ¤çš„æ‰§è¡Œç¯å¢ƒï¼Œè¿™æ˜¯æ“ä½œç³»ç»Ÿå®ç°ç¨³å®šæ€§å’Œå®‰å…¨æ€§çš„åŸºçŸ³ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£æ“ä½œç³»ç»Ÿè°ƒåº¦çš„å·¥ä½œåŸç†ï¼å¦‚æœä½ å¯¹è°ƒåº¦ç®—æ³•æˆ–è€…å…¶ä»–ç›¸å…³æ¦‚å¿µè¿˜æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="çº¿ç¨‹æ± å·¥ä½œæµç¨‹"&gt;çº¿ç¨‹æ± å·¥ä½œæµç¨‹
&lt;/h2&gt;&lt;p&gt;çº¿ç¨‹æ± çš„çº¿ç¨‹å¤ç”¨æœºåˆ¶ç¡®å®å¾ˆç²¾å¦™ï¼Œå®ƒé€šè¿‡ä¸€ç§â€œ&lt;strong&gt;ä»»åŠ¡ä¸çº¿ç¨‹è§£è€¦&lt;/strong&gt;â€çš„è®¾è®¡ï¼Œè®©å°‘é‡çº¿ç¨‹èƒ½å¤Ÿå¤„ç†å¤§é‡ä»»åŠ¡ï¼Œä»è€Œé¿å…äº†é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å·¨å¤§å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µï¼Œä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†çº¿ç¨‹æ± å¤„ç†ä»»åŠ¡æ—¶çš„æ ¸å¿ƒæµç¨‹ä¸çº¿ç¨‹å¤ç”¨çš„å…³é”®ç¯èŠ‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æäº¤ä»»åŠ¡] --&amp;gt; B{çº¿ç¨‹æ•° &amp;lt; æ ¸å¿ƒçº¿ç¨‹æ•°?}
B -- æ˜¯ --&amp;gt; C[åˆ›å»ºæ–°æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œ]
B -- å¦ --&amp;gt; D{ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡?}
D -- å¦ --&amp;gt; E[ä»»åŠ¡å…¥é˜Ÿç­‰å¾…]
E --&amp;gt; F{æœ‰çº¿ç¨‹ç©ºé—²?}
F -- æ˜¯ --&amp;gt; G[çº¿ç¨‹ä»é˜Ÿåˆ—è·å–ä»»åŠ¡æ‰§è¡Œ]
D -- æ˜¯ --&amp;gt; H{çº¿ç¨‹æ•° &amp;lt; æœ€å¤§çº¿ç¨‹æ•°?}
H -- æ˜¯ --&amp;gt; I[åˆ›å»ºæ–°éæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œ]
H -- å¦ --&amp;gt; J[æ‰§è¡Œæ‹’ç»ç­–ç•¥]
C --&amp;gt; K[çº¿ç¨‹æ‰§è¡Œä»»åŠ¡]
G --&amp;gt; K
I --&amp;gt; K
K --&amp;gt; L{è·å–æ–°ä»»åŠ¡&amp;lt;br&amp;gt;getTask()}
L -- è·å–åˆ°ä»»åŠ¡ --&amp;gt; K
L -- è¶…æ—¶æœªè·å–ä¸”çº¿ç¨‹æ•° &amp;gt; æ ¸å¿ƒæ•° --&amp;gt; M[çº¿ç¨‹ç»ˆæ­¢å›æ”¶]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è§£æè¿™ä¸ªæµç¨‹ä¸­çš„å…³é”®ç¯èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒå¼•æ“workerä¸å¾ªç¯æœºåˆ¶"&gt;ğŸ”§ æ ¸å¿ƒå¼•æ“ï¼šWorkerä¸å¾ªç¯æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;çº¿ç¨‹æ± å¤ç”¨çš„æ ¸å¿ƒåœ¨äºä¸€ä¸ªåä¸º &lt;strong&gt;&lt;code&gt;Worker&lt;/code&gt;&lt;/strong&gt; çš„å†…éƒ¨ç±»ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå‹¤åŠ³çš„å·¥äººï¼Œå®ƒæŒæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆè´Ÿè´£å¹²æ´»ï¼‰å’Œä¸€ç³»åˆ—å¾…å¤„ç†çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ª &lt;code&gt;Worker&lt;/code&gt;è¢«åˆ›å»ºå¹¶å¯åŠ¨åï¼Œä¼šæ‰§è¡Œä¸€ä¸ª &lt;strong&gt;&lt;code&gt;runWorker&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨æ˜¯ä¸€ä¸ªå…³é”®çš„ &lt;code&gt;while&lt;/code&gt;å¾ªç¯ã€‚è¿™ä¸ªå¾ªç¯ä¸æ–­åœ°åšä¸¤ä»¶äº‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·å–ä»»åŠ¡&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;getTask()&lt;/code&gt;æ–¹æ³•ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œä»»åŠ¡&lt;/strong&gt;ï¼šç›´æ¥è°ƒç”¨ä»»åŠ¡çš„ &lt;code&gt;run()&lt;/code&gt;æ–¹æ³•ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çº¿ç¨‹æ¥æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œæ­£æ˜¯çº¿ç¨‹å¤ç”¨çš„é­”æ³•æ‰€åœ¨ï¼å®ƒè·³è¿‡äº†ä¼ ç»Ÿçš„ &lt;code&gt;Thread.start()&lt;/code&gt;ï¼Œè€Œæ˜¯æŠŠä»»åŠ¡å½“ä½œä¸€ä¸ªæ™®é€šçš„æ–¹æ³•è°ƒç”¨æ¥æ‰§è¡Œã€‚è¿™æ ·ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹ï¼ˆ&lt;code&gt;Worker&lt;/code&gt;å†…çš„çº¿ç¨‹ï¼‰å°±å¯ä»¥åœ¨å¾ªç¯ä¸­æ¥è¿æ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„ &lt;code&gt;run&lt;/code&gt;æ–¹æ³•ï¼Œå°†è¿™äº›ä»»åŠ¡ä¸²è”èµ·æ¥ï¼Œä»è€Œå®ç°äº†å¤ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="-ä»»åŠ¡è·å–ä¸çº¿ç¨‹ç­‰å¾…"&gt;ğŸ“¡ ä»»åŠ¡è·å–ä¸çº¿ç¨‹ç­‰å¾…
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;getTask()&lt;/code&gt;æ–¹æ³•æ˜¯çº¿ç¨‹æ± ç®¡ç†çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸçš„æ™ºèƒ½ä¸­æ¢ã€‚å®ƒçš„ä¸»è¦å·¥ä½œæ˜¯&lt;strong&gt;ä»é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰ä¸­è·å–ä»»åŠ¡&lt;/strong&gt;ã€‚é˜Ÿåˆ—çš„è¡Œä¸ºç›´æ¥å½±å“çº¿ç¨‹çš„è¡Œä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡&lt;/strong&gt;ï¼š&lt;code&gt;getTask()&lt;/code&gt;ç«‹å³è¿”å›ä¸€ä¸ªä»»åŠ¡ç»™ &lt;code&gt;Worker&lt;/code&gt;æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜Ÿåˆ—ä¸ºç©ºæ—¶&lt;/strong&gt;ï¼šæ ¹æ®çº¿ç¨‹çš„ç±»å‹ï¼Œè¡Œä¸ºä¸åŒï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºæ ¸å¿ƒçº¿ç¨‹&lt;/strong&gt;ï¼šé»˜è®¤ä¼šä¸€ç›´é˜»å¡åœ¨ &lt;code&gt;getTask()&lt;/code&gt;ä¸­çš„ &lt;code&gt;workQueue.take()&lt;/code&gt;ä¸Šï¼Œç›´åˆ°æœ‰æ–°ä»»åŠ¡å…¥é˜Ÿè¢«å”¤é†’ã€‚è¿™ä½¿å¾—æ ¸å¿ƒçº¿ç¨‹èƒ½å¤Ÿ&lt;strong&gt;é•¿æœŸå­˜æ´»&lt;/strong&gt;ï¼Œç­‰å¾…æ–°ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºéæ ¸å¿ƒçº¿ç¨‹&lt;/strong&gt;ï¼šä¼šä½¿ç”¨ &lt;code&gt;workQueue.poll(keepAliveTime, ...)&lt;/code&gt;è¿›è¡Œ&lt;strong&gt;è¶…æ—¶ç­‰å¾…&lt;/strong&gt;ã€‚å¦‚æœåœ¨æŒ‡å®šçš„ &lt;code&gt;keepAliveTime&lt;/code&gt;æ—¶é—´å†…æ²¡æœ‰è·å–åˆ°æ–°ä»»åŠ¡ï¼Œ&lt;code&gt;getTask()&lt;/code&gt;ä¼šè¿”å› &lt;code&gt;null&lt;/code&gt;ã€‚è¿™ä¸ª &lt;code&gt;null&lt;/code&gt;ä¿¡å·ä¼šå¯¼è‡´ &lt;code&gt;Worker&lt;/code&gt;é€€å‡ºé‚£ä¸ªæ ¸å¿ƒçš„ &lt;code&gt;while&lt;/code&gt;å¾ªç¯ï¼Œéšåçº¿ç¨‹è¢«ç»ˆæ­¢å›æ”¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§æœºåˆ¶ä½¿å¾—çº¿ç¨‹æ± å¯ä»¥&lt;strong&gt;åŠ¨æ€è°ƒæ•´æ´»è·ƒçº¿ç¨‹æ•°é‡&lt;/strong&gt;ï¼Œåœ¨è´Ÿè½½é«˜æ—¶åˆ›å»ºæ›´å¤šçº¿ç¨‹ï¼Œè´Ÿè½½ä¸‹é™æ—¶å›æ”¶å¤šä½™çº¿ç¨‹ï¼Œåªä¿ç•™æ ¸å¿ƒçº¿ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id="-çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹ä¸ç”Ÿå‘½å‘¨æœŸ"&gt;âš™ï¸ çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹ä¸ç”Ÿå‘½å‘¨æœŸ
&lt;/h3&gt;&lt;p&gt;ç»“åˆæœ€å¼€å§‹çš„æµç¨‹å›¾ï¼Œçº¿ç¨‹æ± å¤„ç†ä»»åŠ¡çš„å…¨æ™¯å›¾æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»»åŠ¡æäº¤&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªæ–°ä»»åŠ¡æäº¤æ—¶ï¼Œçº¿ç¨‹æ± æŒ‰ä»¥ä¸‹é¡ºåºåˆ¤æ–­ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœå½“å‰è¿è¡Œçš„çº¿ç¨‹æ•° &lt;strong&gt;å°äº&lt;/strong&gt; &lt;strong&gt;&lt;code&gt;corePoolSize&lt;/code&gt;&lt;/strong&gt;ï¼ˆæ ¸å¿ƒçº¿ç¨‹æ•°ï¼‰ï¼Œå³ä½¿æœ‰ç©ºé—²çº¿ç¨‹ï¼Œä¹Ÿä¼š&lt;strong&gt;ç«‹å³åˆ›å»ºæ–°çš„æ ¸å¿ƒçº¿ç¨‹&lt;/strong&gt;æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœçº¿ç¨‹æ•° &lt;strong&gt;å¤§äºç­‰äº&lt;/strong&gt; &lt;code&gt;corePoolSize&lt;/code&gt;ï¼Œä»»åŠ¡ä¼šè¢«å°è¯•&lt;strong&gt;æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—&lt;/strong&gt;ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;é˜Ÿåˆ—å·²æ»¡&lt;/strong&gt;ï¼Œä¸”çº¿ç¨‹æ•° &lt;strong&gt;å°äº&lt;/strong&gt; &lt;strong&gt;&lt;code&gt;maximumPoolSize&lt;/code&gt;&lt;/strong&gt;ï¼ˆæœ€å¤§çº¿ç¨‹æ•°ï¼‰ï¼Œçº¿ç¨‹æ± ä¼š&lt;strong&gt;åˆ›å»ºæ–°çš„éæ ¸å¿ƒçº¿ç¨‹&lt;/strong&gt;æ¥ç«‹å³å¤„ç†è¿™ä¸ªæ–°ä»»åŠ¡ï¼ˆè€Œä¸æ˜¯é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;é˜Ÿåˆ—å·²æ»¡&lt;/strong&gt;ä¸”çº¿ç¨‹æ•° &lt;strong&gt;è¾¾åˆ°&lt;/strong&gt; &lt;code&gt;maximumPoolSize&lt;/code&gt;ï¼Œçº¿ç¨‹æ± ä¼š&lt;strong&gt;è§¦å‘æ‹’ç»ç­–ç•¥&lt;/strong&gt;æ¥å¤„ç†è¿™ä¸ªæ— æ³•æ¥çº³çš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒçº¿ç¨‹&lt;/strong&gt;ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå³ä½¿ç©ºé—²ä¹Ÿä¼šä¸€ç›´å­˜æ´»ã€‚å¯ä»¥é€šè¿‡è®¾ç½® &lt;code&gt;allowCoreThreadTimeOut(true)&lt;/code&gt;è®©æ ¸å¿ƒçº¿ç¨‹ä¹Ÿåœ¨ç©ºé—²è¶…æ—¶åè¢«å›æ”¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éæ ¸å¿ƒçº¿ç¨‹&lt;/strong&gt;ï¼šå¦‚æµç¨‹æ‰€è¿°ï¼Œåœ¨ç©ºé—²è¶…è¿‡ &lt;code&gt;keepAliveTime&lt;/code&gt;åä¼šè¢«è‡ªåŠ¨å›æ”¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸ä¼˜åŠ¿"&gt;ğŸ’¡ æ€»ç»“ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œçº¿ç¨‹æ± é€šè¿‡ &lt;strong&gt;&lt;code&gt;Worker&lt;/code&gt;å†…éƒ¨ç±»çš„å¾ªç¯æœºåˆ¶&lt;/strong&gt;ï¼Œå°†ä»»åŠ¡æ‰§è¡Œæ–¹å¼ä»â€œä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºæ–°çº¿ç¨‹â€è½¬å˜ä¸ºâ€œ&lt;strong&gt;åœ¨ç°æœ‰çº¿ç¨‹ä¸Šå¾ªç¯æ‰§è¡Œä»»åŠ¡çš„æ–¹æ³•&lt;/strong&gt;â€ï¼Œå¹¶ç»“åˆ&lt;strong&gt;é˜»å¡é˜Ÿåˆ—&lt;/strong&gt;å’Œ&lt;strong&gt;è¶…æ—¶æ§åˆ¶&lt;/strong&gt;ï¼Œå·§å¦™åœ°å®ç°äº†çº¿ç¨‹çš„å¤ç”¨ã€æ•°é‡çš„åŠ¨æ€è°ƒèŠ‚ä»¥åŠèµ„æºçš„æœ‰æ•ˆç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§è®¾è®¡å¸¦æ¥çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™ä½èµ„æºæ¶ˆè€—&lt;/strong&gt;ï¼šå¤§å¹…å‡å°‘çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æé«˜å“åº”é€Ÿåº¦&lt;/strong&gt;ï¼šä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œé€šå¸¸æœ‰ç°æˆçš„ç©ºé—²çº¿ç¨‹ç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…çº¿ç¨‹åˆ›å»ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æé«˜çº¿ç¨‹å¯ç®¡ç†æ€§&lt;/strong&gt;ï¼šå¯ä»¥ç»Ÿä¸€ç›‘æ§ã€ç®¡ç†å’Œè°ƒä¼˜çº¿ç¨‹èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£çº¿ç¨‹æ± çš„å¤ç”¨åŸç†ï¼å¦‚æœä½ å¯¹ç‰¹å®šç±»å‹çš„çº¿ç¨‹æ± ï¼ˆå¦‚ &lt;code&gt;CachedThreadPool&lt;/code&gt;æˆ– &lt;code&gt;ScheduledThreadPool&lt;/code&gt;ï¼‰æˆ–å…¶æ‹’ç»ç­–ç•¥ç­‰ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥ã€‚&lt;/p&gt;
&lt;h2 id="n---1--hash"&gt;(n - 1) &amp;amp; hash
&lt;/h2&gt;&lt;p&gt;æ‚¨æåˆ°äº†ä¸€ä¸ªåœ¨Java &lt;code&gt;HashMap&lt;/code&gt;ç­‰é«˜æ€§èƒ½æ•°æ®ç»“æ„ä¸­è‡³å…³é‡è¦çš„ä½è¿ç®—æŠ€å·§ã€‚ç®€å•æ¥è¯´ï¼Œå½“ &lt;code&gt;n&lt;/code&gt;æ˜¯2çš„å¹‚ï¼ˆå¦‚16, 32, 64ï¼‰æ—¶ï¼Œ&lt;code&gt;(n - 1) &amp;amp; hash&lt;/code&gt;åœ¨æ•°å­¦ç»“æœä¸Šå®Œå…¨ç­‰åŒäº &lt;code&gt;hash % n&lt;/code&gt;ï¼Œä½†æ‰§è¡Œæ•ˆç‡å´è¦é«˜å¾—å¤šã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®æ‚¨å¿«é€ŸæŠŠæ¡ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;(n - 1) &amp;amp; hash&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;hash % n&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç­‰ä»·å‰æ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;n&lt;/code&gt;å¿…é¡»æ˜¯ &lt;strong&gt;2 çš„å¹‚æ¬¡æ–¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹ &lt;code&gt;n&lt;/code&gt;æ— ç‰¹æ®Šè¦æ±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¡ç®—æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½ä¸è¿ç®—&lt;/strong&gt;ï¼šç›´æ¥æˆªå– &lt;code&gt;hash&lt;/code&gt;å€¼çš„ä½ &lt;code&gt;logâ‚‚(n)&lt;/code&gt;ä½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å–æ¨¡è¿ç®—&lt;/strong&gt;ï¼šéœ€è¦åšé™¤æ³•å¹¶å–ä½™æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è¡¨ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜&lt;/strong&gt;ï¼Œé€šå¸¸æ˜¯1ä¸ªCPUå‘¨æœŸï¼Œç›´æ¥æ“ä½œäºŒè¿›åˆ¶ä½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½&lt;/strong&gt;ï¼Œéœ€è¦æ•°åä¸ªCPUå‘¨æœŸï¼Œæ¶‰åŠå¤æ‚çš„é™¤æ³•æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œå¦‚HashMapçš„ç´¢å¼•è®¡ç®—&lt;/td&gt;
&lt;td&gt;é€šç”¨çš„æ•°å­¦è®¡ç®—&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ•°å­¦ç­‰ä»·æ€§çš„åŸç†"&gt;ğŸ”¢ æ•°å­¦ç­‰ä»·æ€§çš„åŸç†
&lt;/h3&gt;&lt;p&gt;ä¸ºä»€ä¹ˆä¸¤è€…ä¼šç­‰ä»·å‘¢ï¼Ÿè¿™èƒŒåçš„å…³é”®åœ¨äºå½“ &lt;code&gt;n&lt;/code&gt;æ˜¯2çš„å¹‚æ—¶ï¼Œ&lt;code&gt;n-1&lt;/code&gt;çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¼šå½¢æˆä¸€ä¸ªç‰¹æ®Šçš„â€œæ©ç â€ï¼ˆMaskï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸¾ä¸ªä¾‹å­&lt;/strong&gt;ï¼šå‡è®¾ &lt;code&gt;n = 16&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ª2çš„å¹‚ï¼ˆ2^4ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;n - 1 = 15&lt;/code&gt;ï¼Œå®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º &lt;code&gt;0000 1111&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç°åœ¨æœ‰ä¸€ä¸ªå“ˆå¸Œå€¼ &lt;code&gt;hash = 25&lt;/code&gt;ï¼Œå…¶äºŒè¿›åˆ¶ä¸º &lt;code&gt;0001 1001&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›è¡Œä½ä¸è¿ç®—&lt;/strong&gt;ï¼š&lt;code&gt;(n-1) &amp;amp; hash = 15 &amp;amp; 25&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;0000 1111 (15)
&amp;amp; 0001 1001 (25)
------------
0000 1001 (9)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ“ä½œçš„æœ¬è´¨æ˜¯&lt;strong&gt;ä¿ç•™ &lt;code&gt;hash&lt;/code&gt;å€¼çš„ä½4ä½ï¼ˆå› ä¸º15çš„ä½4ä½å…¨æ˜¯1ï¼‰ï¼Œé«˜ä½å…¨éƒ¨æ¸…é›¶&lt;/strong&gt;ã€‚ç»“æœæ˜¯ &lt;code&gt;9&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›è¡Œå–æ¨¡è¿ç®—&lt;/strong&gt;ï¼š&lt;code&gt;hash % n = 25 % 16&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ•°å­¦ä¸Šï¼Œä¸€ä¸ªæ•°é™¤ä»¥16çš„ä½™æ•°ï¼Œæ°æ°å°±ç­‰äºè¿™ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½4ä½æ‰€ä»£è¡¨çš„å€¼ã€‚å› ä¸º16æ˜¯10000ï¼Œä»ç¬¬5ä½å¼€å§‹æ¯ä¸€ä½éƒ½ä»£è¡¨16çš„å€æ•°ï¼Œé™¤ä»¥16çš„ä½™æ•°å¿…ç„¶ç”±ä½4ä½å†³å®šã€‚è®¡ç®—ç»“æœä¹Ÿæ˜¯ &lt;code&gt;9&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œå½“ &lt;code&gt;n&lt;/code&gt;æ˜¯2çš„å¹‚æ—¶ï¼Œä¸¤ç§æ“ä½œçš„ç»“æœå®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯è·å– &lt;code&gt;hash&lt;/code&gt;å€¼å¯¹ &lt;code&gt;n&lt;/code&gt;å–æ¨¡åçš„ä½™æ•°ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä½•ä½è¿ç®—æ€§èƒ½æ›´é«˜"&gt;âš¡ ä¸ºä½•ä½è¿ç®—æ€§èƒ½æ›´é«˜
&lt;/h3&gt;&lt;p&gt;æ€§èƒ½å·®å¼‚æºäºè®¡ç®—æœºåº•å±‚çš„ç¡¬ä»¶æŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶æ”¯æŒ&lt;/strong&gt;ï¼šä½è¿ç®—ï¼ˆANDï¼‰æ˜¯CPUæœ€åŸºç¡€ã€æœ€åŸå§‹çš„æ“ä½œä¹‹ä¸€ï¼Œé€šå¸¸åœ¨å•ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å°±èƒ½å®Œæˆï¼Œç›´æ¥å¯¹å¯„å­˜å™¨ä¸­çš„äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œå¤æ‚åº¦&lt;/strong&gt;ï¼šå–æ¨¡è¿ç®—ï¼ˆ%ï¼‰åœ¨åº•å±‚é€šå¸¸éœ€è¦é€šè¿‡é™¤æ³•æ¥å®ç°ï¼Œè€Œé™¤æ³•æ˜¯CPUä¸­æœ€ä¸ºè€—æ—¶çš„åŸºæœ¬è¿ç®—ä¹‹ä¸€ï¼Œå¯èƒ½éœ€è¦æ•°åä¸ªæ—¶é’Ÿå‘¨æœŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æ€§èƒ½å·®è·åœ¨åƒ &lt;code&gt;HashMap&lt;/code&gt;è¿™æ ·éœ€è¦æ¯ç§’è¿›è¡Œæ•°ç™¾ä¸‡æ¬¡ç´¢å¼•è®¡ç®—çš„åœºæ™¯ä¸‹ï¼Œç´¯ç§¯èµ·æ¥çš„æ€§èƒ½æå‡æ˜¯éå¸¸å¯è§‚çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ &lt;code&gt;HashMap&lt;/code&gt;åœ¨è®¾è®¡ä¸Šå¼ºåˆ¶è¦æ±‚å®¹é‡ï¼ˆå³ &lt;code&gt;n&lt;/code&gt;ï¼‰å¿…é¡»ä¸º2çš„å¹‚æ¬¡æ–¹ï¼Œä»è€Œå¯ä»¥å®‰å…¨åœ°ä½¿ç”¨è¿™ç§é«˜æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µã€‚&lt;/p&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šè¿™ç§ä¼˜åŒ–æœ€å¸¸è§äº&lt;strong&gt;å“ˆå¸Œè¡¨&lt;/strong&gt;ï¼ˆå¦‚Javaçš„ &lt;code&gt;HashMap&lt;/code&gt;ã€&lt;code&gt;ConcurrentHashMap&lt;/code&gt;ï¼‰çš„ç´¢å¼•å®šä½ï¼Œä»¥åŠ&lt;strong&gt;ç¯å½¢ç¼“å†²åŒº&lt;/strong&gt;ï¼ˆRing Bufferï¼‰çš„æŒ‡é’ˆè®¡ç®—ã€‚åœ¨è¿™äº›åœ°æ–¹ï¼Œè®¡ç®—é¢‘ç‡æé«˜ï¼Œå¯¹æ€§èƒ½æœ‰ä¸¥è‹›è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å‰æ&lt;/strong&gt;ï¼šå¿…é¡»ä¿è¯ &lt;code&gt;n&lt;/code&gt;æ˜¯ &lt;strong&gt;2 çš„å¹‚æ¬¡æ–¹&lt;/strong&gt;ã€‚å¦‚æœ &lt;code&gt;n&lt;/code&gt;ä¸æ˜¯2çš„å¹‚ï¼Œæ¯”å¦‚ &lt;code&gt;n=10&lt;/code&gt;ï¼Œé‚£ä¹ˆ &lt;code&gt;n-1=9&lt;/code&gt;ï¼ˆäºŒè¿›åˆ¶1001ï¼‰ã€‚æ­¤æ—¶ &lt;code&gt;(n-1) &amp;amp; hash&lt;/code&gt;åªèƒ½ä¿ç•™ç‰¹å®šçš„ä½ï¼ˆå¦‚ä¸Šè¿°ä¾‹å­ä¸­çš„ç¬¬0ä½å’Œç¬¬3ä½ï¼‰ï¼Œä¼šå¯¼è‡´å¾ˆå¤šå“ˆå¸Œå€¼è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªç´¢å¼•ï¼Œé€ æˆä¸¥é‡çš„å“ˆå¸Œç¢°æ’ï¼Œæ— æ³•å‡åŒ€åˆ†å¸ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç•™æ„è´Ÿæ•°&lt;/strong&gt;ï¼šéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œåœ¨Javaä¸­ï¼Œ&lt;code&gt;%&lt;/code&gt;æ“ä½œç¬¦å¯¹äºè´Ÿæ•°çš„ç»“æœå¯èƒ½æ˜¯è´Ÿæ•°ï¼Œè€Œ &lt;code&gt;&amp;amp;&lt;/code&gt;è¿ç®—çš„ç»“æœåˆ™æ°¸è¿œæ˜¯éè´Ÿçš„ã€‚åœ¨åº”ç”¨æ—¶ï¼Œè¦ç¡®ä¿å“ˆå¸Œå€¼æ˜¯ç»è¿‡å¤„ç†çš„éè´Ÿæ•°ï¼Œæˆ–è€…ç†è§£ä¸Šä¸‹æ–‡å¯¹è´Ÿæ•°çš„å¤„ç†é€»è¾‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©æ‚¨å½»åº•ç†è§£è¿™ä¸ªç²¾å·§çš„ä¼˜åŒ–æŠ€å·§ï¼å¦‚æœæ‚¨å¯¹å“ˆå¸Œè¡¨å†…éƒ¨çš„å…¶ä»–æœºåˆ¶ï¼ˆæ¯”å¦‚å“ˆå¸Œæ‰°åŠ¨ã€æ‰©å®¹ç­–ç•¥ç­‰ï¼‰ä¹Ÿæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="paxos--raft"&gt;Paxos &amp;amp; Raft
&lt;/h2&gt;&lt;p&gt;Paxos å’Œ Raft æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿé¢†åŸŸè§£å†³ä¸€è‡´æ€§é—®é¢˜çš„ä¸¤å¤§ç»å…¸å…±è¯†ç®—æ³•ï¼Œå®ƒä»¬éƒ½æ—¨åœ¨è®©ä¸€ä¸ªé›†ç¾¤ä¸­çš„å¤šä¸ªèŠ‚ç‚¹å°±æŸä¸ªå€¼ï¼ˆæˆ–æ“ä½œåºåˆ—ï¼‰è¾¾æˆä¸€è‡´ï¼Œå³ä½¿åœ¨éƒ¨åˆ†èŠ‚ç‚¹å‡ºç°æ•…éšœæˆ–ç½‘ç»œä¸ç¨³å®šæ—¶ä¹Ÿèƒ½ä¿æŒç³»ç»Ÿçš„å¯é æ€§ä¸æ•°æ®ä¸€è‡´æ€§ ã€‚å°½ç®¡ç›®æ ‡ç›¸åŒï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡å“²å­¦ã€å¤æ‚æ€§å’Œå·¥ç¨‹å®ç°ä¸Šæœ‰ç€æ˜¾è‘—åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†å®ƒä»¬çš„å…³é”®ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;Paxos&lt;/th&gt;
&lt;th&gt;Raft&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒè®¾è®¡å“²å­¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´&lt;strong&gt;æŠ½è±¡&lt;/strong&gt;å’Œ&lt;strong&gt;é€šç”¨&lt;/strong&gt;çš„å…±è¯†ç†è®ºåŸºçŸ³ï¼Œå¼ºè°ƒçµæ´»æ€§&lt;/td&gt;
&lt;td&gt;æ›´&lt;strong&gt;ç»“æ„åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;å·¥ç¨‹åŒ–&lt;/strong&gt;ï¼Œé€šè¿‡åˆ†è§£é—®é¢˜å’Œè§’è‰²ç®€åŒ–ç†è§£ä¸å®ç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§’è‰²æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠ¨æ€è§’è‰²ï¼š&lt;strong&gt;Proposerï¼ˆæè®®è€…ï¼‰&lt;/strong&gt;ã€&lt;strong&gt;Acceptorï¼ˆæ¥å—è€…ï¼‰&lt;/strong&gt;ã€&lt;strong&gt;Learnerï¼ˆå­¦ä¹ è€…ï¼‰&lt;/strong&gt;ã€‚ä¸€ä¸ªèŠ‚ç‚¹å¯å…¼ä»»å¤šèŒï¼Œè§’è‰²æ˜¯å¯¹ç­‰çš„&lt;/td&gt;
&lt;td&gt;å›ºå®šè§’è‰²ï¼š&lt;strong&gt;Leaderï¼ˆé¢†å¯¼è€…ï¼‰&lt;/strong&gt;ã€&lt;strong&gt;Followerï¼ˆè·Ÿéšè€…ï¼‰&lt;/strong&gt;ã€&lt;strong&gt;Candidateï¼ˆå€™é€‰è€…ï¼‰&lt;/strong&gt;ã€‚è§’è‰²åˆ†æ˜ï¼Œ&lt;strong&gt;å¼ºé¢†å¯¼åˆ¶&lt;/strong&gt;ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚å¿…é¡»ç»è¿‡Leader&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒè¿‡ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸¤é˜¶æ®µåè®®&lt;/strong&gt;ï¼šå‡†å¤‡é˜¶æ®µï¼ˆPrepareï¼‰å’Œæ¥å—é˜¶æ®µï¼ˆAcceptï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸¤ä¸ªæ¸…æ™°å­é—®é¢˜&lt;/strong&gt;ï¼šé¢†å¯¼è€…é€‰ä¸¾ï¼ˆLeader Electionï¼‰å’Œæ—¥å¿—å¤åˆ¶ï¼ˆLog Replicationï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç†è§£ä¸å®ç°éš¾åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ã€‚æ¦‚å¿µæŠ½è±¡ï¼Œç†è®ºå¤æ‚ï¼Œå®Œæ•´å®ç°å’Œæ­£ç¡®è°ƒè¯•æŒ‘æˆ˜å¤§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹è¾ƒä½&lt;/strong&gt;ã€‚é€»è¾‘æ¸…æ™°ï¼Œæµç¨‹æ˜ç¡®ï¼Œæœ‰å¤§é‡ç°æˆçš„å¼€æºå®ç°å‚è€ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç†è®ºä¸Šå¯ä¼˜åŒ–æ€§é«˜ï¼Œä½†åŸºç¡€å®ç°å¯èƒ½å› &lt;strong&gt;æ´»é”&lt;/strong&gt;ï¼ˆå¤šä¸ªProposerç«äº‰ï¼‰æˆ–&lt;strong&gt;å¤šè½®é€šä¿¡&lt;/strong&gt;å¯¼è‡´å»¶è¿Ÿè¾ƒé«˜&lt;/td&gt;
&lt;td&gt;æ€§èƒ½è¡¨ç°&lt;strong&gt;ç¨³å®šå¯é¢„æµ‹&lt;/strong&gt;ã€‚å¼ºé¢†å¯¼æ¨¡å‹å‡å°‘äº†å†³ç­–ç‚¹ï¼Œä½†åœ¨é«˜è´Ÿè½½ä¸‹Leaderå¯èƒ½æˆä¸ºç“¶é¢ˆï¼Œååé‡å¯èƒ½ç•¥ä½äºä¼˜åŒ–åçš„Paxoså˜ç§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Google Chubbyé”æœåŠ¡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;etcd&lt;/strong&gt;ï¼ˆKubernetesçš„åç«¯å­˜å‚¨ï¼‰ã€&lt;strong&gt;Consul&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥è§£ææ ¸å¿ƒæœºåˆ¶"&gt;ğŸ”¬ æ·±å…¥è§£ææ ¸å¿ƒæœºåˆ¶
&lt;/h3&gt;&lt;h4 id="-paxos-çš„ä¸¤é˜¶æ®µåè®®"&gt;ğŸ“œ Paxos çš„ä¸¤é˜¶æ®µåè®®
&lt;/h4&gt;&lt;p&gt;Paxos ç®—æ³•çš„ç›®æ ‡æ˜¯åœ¨å¯èƒ½å‘ç”Ÿæœºå™¨å®•æœºæˆ–ç½‘ç»œä¸¢åŒ…çš„éå¯é ç¯å¢ƒä¸‹ï¼Œåœ¨é›†ç¾¤å†…éƒ¨å¯¹æŸä¸ªå€¼è¾¾æˆä¸€è‡´ ã€‚å®ƒçš„æ ¸å¿ƒæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä¸¤ä¸ªé˜¶æ®µ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡é˜¶æ®µ&lt;/strong&gt;ï¼šä¸€ä¸ª Proposer é€‰æ‹©ä¸€ä¸ªå…¨å±€å”¯ä¸€ä¸”é€’å¢çš„ææ¡ˆç¼–å· &lt;code&gt;n&lt;/code&gt;ï¼Œå¹¶å‘æ‰€æœ‰ Acceptor å‘é€ Prepare è¯·æ±‚ã€‚Acceptor æ”¶åˆ°è¯·æ±‚åï¼Œè‹¥ &lt;code&gt;n&lt;/code&gt;å¤§äºå®ƒä¹‹å‰å“åº”çš„ä»»ä½•ææ¡ˆç¼–å·ï¼Œåˆ™æ‰¿è¯ºä¸å†æ¥å—ç¼–å·å°äº &lt;code&gt;n&lt;/code&gt;çš„ææ¡ˆï¼Œå¹¶å°†å…¶å·²æ¥å—è¿‡çš„ç¼–å·æœ€å¤§çš„ææ¡ˆï¼ˆå¦‚æœå­˜åœ¨ï¼‰è¿”å›ç»™ Proposer ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å—é˜¶æ®µ&lt;/strong&gt;ï¼šå¦‚æœ Proposer æ”¶åˆ°äº†å¤§å¤šæ•° Acceptor çš„å“åº”ï¼Œå®ƒå°±å¯ä»¥å‘èµ· Accept è¯·æ±‚ã€‚è¯·æ±‚ä¸­å¸¦çš„ value æ˜¯å®ƒä» Acceptor å“åº”ä¸­è·å¾—çš„ç¼–å·æœ€å¤§çš„ææ¡ˆçš„ valueï¼Œå¦‚æœæ‰€æœ‰å“åº”éƒ½è¡¨ç¤ºæœªæ¥å—è¿‡ä»»ä½•ææ¡ˆï¼Œåˆ™ä½¿ç”¨å®ƒè‡ªå·±æå‡ºçš„ valueã€‚Acceptor æ”¶åˆ° Accept è¯·æ±‚åï¼Œåªè¦è¯¥è¯·æ±‚çš„ç¼–å·ä¸ä½äºå®ƒä¹‹å‰æ‰¿è¯ºçš„æœ€å°ç¼–å·ï¼Œå°±ä¼šæ¥å—è¿™ä¸ªææ¡ˆ ã€‚ä¸€æ—¦ä¸€ä¸ªææ¡ˆè¢«å¤§å¤šæ•° Acceptor æ¥å—ï¼Œè¿™ä¸ªå€¼å°±è¢«è®¤ä¸ºå·²é€‰å®šï¼Œéœ€è¦é€šçŸ¥ Learner è¿›è¡Œå­¦ä¹  ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="-raft-çš„å¼ºé¢†å¯¼æ¨¡å‹"&gt;âš™ï¸ Raft çš„å¼ºé¢†å¯¼æ¨¡å‹
&lt;/h4&gt;&lt;p&gt;Raft ç®—æ³•å°†ä¸€è‡´æ€§é—®é¢˜åˆ†è§£ä¸ºä¸‰ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­é—®é¢˜ï¼šé¢†å¯¼è€…é€‰ä¸¾ã€æ—¥å¿—å¤åˆ¶å’Œå®‰å…¨æ€§ ï¼Œè¿™ä½¿å¾—ç®—æ³•æ›´æ˜“äºç†è§£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¢†å¯¼è€…é€‰ä¸¾&lt;/strong&gt;ï¼šæ‰€æœ‰èŠ‚ç‚¹å¯åŠ¨æ—¶éƒ½æ˜¯ Followerã€‚å¦‚æœ Follower åœ¨ç‰¹å®šæ—¶é—´ï¼ˆé€‰ä¸¾è¶…æ—¶ï¼Œä¾‹å¦‚150-300msçš„éšæœºå€¼ï¼‰å†…æ²¡æœ‰æ”¶åˆ°å½“å‰ Leader çš„å¿ƒè·³ï¼Œå®ƒå°±ä¼šè½¬å˜ä¸º Candidate å¼€å§‹æ–°ä¸€è½®é€‰ä¸¾ ã€‚Candidate ä¼šå‘å…¶ä»–èŠ‚ç‚¹è¯·æ±‚æŠ•ç¥¨ï¼Œå¦‚æœè·å¾—é›†ç¾¤ä¸­&lt;strong&gt;è¶…è¿‡åŠæ•°&lt;/strong&gt;çš„é€‰ç¥¨ï¼Œå®ƒå°±æ™‹å‡ä¸ºæ–°çš„ Leader ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—å¤åˆ¶&lt;/strong&gt;ï¼šLeader æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå°†å…¶å°è£…ä¸ºæ—¥å¿—æ¡ç›®ï¼ˆlog entryï¼‰è¿½åŠ åˆ°è‡ªå·±çš„æ—¥å¿—ä¸­ï¼Œç„¶åå¹¶è¡Œåœ°å°†è¯¥æ¡ç›®å‘é€ç»™æ‰€æœ‰ Follower ã€‚ä¸€æ—¦ Leader ç¡®è®¤&lt;strong&gt;è¶…è¿‡åŠæ•°&lt;/strong&gt;çš„èŠ‚ç‚¹å·²ç»æˆåŠŸå¤åˆ¶äº†è¯¥æ—¥å¿—æ¡ç›®ï¼Œå°±å¯ä»¥æäº¤ï¼ˆcommitï¼‰è¯¥æ¡ç›®ï¼Œå¹¶å°†å…¶åº”ç”¨ï¼ˆapplyï¼‰åˆ°çŠ¶æ€æœºï¼Œæœ€åå°†æ‰§è¡Œç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­é€‰å‹"&gt;ğŸ’¡ å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­é€‰å‹ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;äº†è§£åŸç†åï¼Œæœ€å…³é”®çš„æ˜¯å¦‚ä½•åœ¨å®è·µä¸­é€‰æ‹©ã€‚è¿™ä¸ªå†³ç­–å–å†³äºä½ çš„æ ¸å¿ƒéœ€æ±‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æè‡´çš„ç†è®ºä¼˜é›…å’Œçµæ´»æ€§ï¼Œä¸”æœ‰æ·±åšæŠ€æœ¯å‚¨å¤‡&lt;/strong&gt;ï¼šå¯ä»¥é€‰æ‹© &lt;strong&gt;Paxos&lt;/strong&gt;ã€‚å®ƒæ›´æŠ½è±¡ï¼Œä¸ºå„ç§ä¼˜åŒ–å’Œå˜ç§ï¼ˆå¦‚Multi-Paxosï¼‰ç•™ä¸‹äº†ç©ºé—´ï¼Œé€‚åˆæ„å»ºæå…¶åº•å±‚çš„åˆ†å¸ƒå¼åŸºç¡€ç»„ä»¶ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘å¼€å‘æ•ˆç‡ã€å¯ç»´æŠ¤æ€§ã€å¿«é€Ÿä¸Šçº¿å’Œå›¢é˜Ÿåä½œ&lt;/strong&gt;ï¼š&lt;strong&gt;Raft&lt;/strong&gt; å‡ ä¹æ˜¯æ¯«æ— ç–‘é—®çš„æ›´ä¼˜é€‰æ‹©ã€‚å…¶æ¸…æ™°çš„è§’è‰²å’Œæµç¨‹å¤§å¤§é™ä½äº†å¼€å‘ã€è°ƒè¯•å’Œè¿ç»´çš„å¤æ‚åº¦ ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåƒ Kubernetes çš„ etcd ç­‰ä¼—å¤šçŸ¥åå¼€æºé¡¹ç›®é€‰æ‹© Raft çš„é‡è¦åŸå›  ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹å®šåœºæ™¯çš„è€ƒé‡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½è®¡ç®—æˆ–å¯¹å»¶è¿Ÿæå…¶æ•æ„Ÿçš„åœºæ™¯&lt;/strong&gt;ï¼šç»è¿‡æ·±åº¦ä¼˜åŒ–çš„ Paxos å˜ç§å¯èƒ½åœ¨æé™æ€§èƒ½ä¸Šæ›´æœ‰ä¼˜åŠ¿ï¼Œä½†è¿™éœ€è¦å·¨å¤§çš„æŠ€æœ¯æŠ•å…¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨æ€§è¦æ±‚æé«˜çš„åœºæ™¯&lt;/strong&gt;ï¼šRaft çš„æ•…éšœæ¢å¤é€Ÿåº¦é€šå¸¸æ›´å¿«ï¼Œèƒ½æ›´å¿«åœ°é€‰å‡ºæ–° Leader æ¢å¤æœåŠ¡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§è§„æ¨¡é›†ç¾¤&lt;/strong&gt;ï¼šå½“èŠ‚ç‚¹æ•°é‡éå¸¸å¤šæ—¶ï¼ŒRaft çš„å¼ºé¢†å¯¼æ¨¡å‹å¯èƒ½å¸¦æ¥æ€§èƒ½ç“¶é¢ˆï¼Œè€Œä¸€äº› Paxos å˜ç§ï¼ˆå¦‚å¹¶è¡Œæäº¤ï¼‰å¯èƒ½æ›´é€‚åˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒPaxos æ›´åƒæ˜¯ä¸€ä»½å¼ºå¤§çš„&lt;strong&gt;ç†è®ºè“å›¾&lt;/strong&gt;ï¼Œä¸ºåˆ†å¸ƒå¼å…±è¯†å¥ å®šäº†åšå®çš„æ•°å­¦åŸºç¡€ï¼Œä½†å°†å…¶è½¬åŒ–ä¸ºå®é™…å¯ç”¨çš„å»ºç­‘ï¼ˆå·¥ç¨‹å®ç°ï¼‰æŒ‘æˆ˜å·¨å¤§ã€‚è€Œ Raft åˆ™æä¾›äº†ä¸€å¥—&lt;strong&gt;å¼€ç®±å³ç”¨çš„ç²¾å“å»ºç­‘å·¥å…·åŒ…&lt;/strong&gt;ï¼Œç»“æ„æ¸…æ™°ã€æ–‡æ¡£é½å…¨ï¼Œèƒ½è®©ä½ æ›´é«˜æ•ˆã€æ›´å¯é åœ°æ­å»ºèµ·åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤§å¦ ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç»å¤§å¤šæ•°åº”ç”¨åœºæ™¯å’Œå›¢é˜Ÿè€Œè¨€ï¼ŒRaft å› å…¶å“è¶Šçš„&lt;strong&gt;å¯ç†è§£æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;å·¥ç¨‹å‹å¥½æ€§&lt;/strong&gt;ï¼Œæ˜¯æ›´å®ç”¨ã€æ›´å®‰å…¨çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Paxos å’Œ Raftã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ps"&gt;ps
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;ps&lt;/code&gt;å‘½ä»¤æ˜¯ Linux ç³»ç»Ÿä¸­ç”¨äºæŸ¥çœ‹å½“å‰è¿›ç¨‹çŠ¶æ€çš„å¼ºå¤§å·¥å…·ã€‚å®ƒå¯ä»¥æ˜¾ç¤ºè¿›ç¨‹çš„å„ç§è¯¦ç»†ä¿¡æ¯ï¼Œæ˜¯ç³»ç»Ÿç®¡ç†å’Œæ•…éšœæ’æŸ¥çš„åŸºçŸ³ã€‚ç”±äº &lt;code&gt;ps&lt;/code&gt;å‘½ä»¤çš„åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å…¶æœ€æ ¸å¿ƒçš„ç”¨æ³•å’Œé€‰é¡¹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps -ef&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;UNIXé£æ ¼&lt;/strong&gt;ï¼Œæ˜¾ç¤ºå®Œæ•´æ ¼å¼çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps aux&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;BSDé£æ ¼&lt;/strong&gt;ï¼Œæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çš„è¯¦ç»†èµ„æºå ç”¨ï¼ˆå¦‚CPUã€å†…å­˜ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥æ‰¾ç‰¹å®šè¿›ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;`ps -ef&lt;/td&gt;
&lt;td&gt;grep &amp;lt;è¿›ç¨‹å&amp;gt;`&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥çœ‹æŒ‡å®šç”¨æˆ·/PID&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps -u &amp;lt;ç”¨æˆ·å&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps -p &amp;lt;PID&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹IDï¼ˆPIDï¼‰çš„è¯¦ç»†ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰èµ„æºæ’åº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;`ps aux &amp;ndash;sort=-%cpu&lt;/td&gt;
&lt;td&gt;head -5`&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;`ps aux &amp;ndash;sort=-%mem&lt;/td&gt;
&lt;td&gt;head -5`&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¾ç¤ºè¿›ç¨‹å±‚æ¬¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps -f --forest&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤ºè¿›ç¨‹çš„çˆ¶å­å…³ç³»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰è¾“å‡º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps -eo pid,ppid,cmd,%cpu,%mem&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;-o&lt;/code&gt;å‚æ•°è‡ªå®šä¹‰è¦æ˜¾ç¤ºçš„å­—æ®µã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥çœ‹çº¿ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ps -eLf&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çš„çº¿ç¨‹ä¿¡æ¯ï¼ˆLWPï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£è¾“å‡ºä¿¡æ¯"&gt;ğŸ’» ç†è§£è¾“å‡ºä¿¡æ¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ps aux&lt;/code&gt;å’Œ &lt;code&gt;ps -ef&lt;/code&gt;æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ç§å‘½ä»¤ï¼Œå®ƒä»¬çš„è¾“å‡ºæ ¼å¼ç•¥æœ‰ä¸åŒï¼Œä½†éƒ½åŒ…å«å…³é”®ä¿¡æ¯ã€‚ç†è§£è¿™äº›å­—æ®µçš„å«ä¹‰è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ps aux&lt;/code&gt;è¾“å‡ºè¯¦è§£&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;USER&lt;/th&gt;
&lt;th&gt;PID&lt;/th&gt;
&lt;th&gt;%CPU&lt;/th&gt;
&lt;th&gt;%MEM&lt;/th&gt;
&lt;th&gt;VSZ&lt;/th&gt;
&lt;th&gt;RSS&lt;/th&gt;
&lt;th&gt;TTY&lt;/th&gt;
&lt;th&gt;STAT&lt;/th&gt;
&lt;th&gt;START&lt;/th&gt;
&lt;th&gt;TIME&lt;/th&gt;
&lt;th&gt;COMMAND&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;è¿›ç¨‹æ‰€æœ‰è€…&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹ID&lt;/td&gt;
&lt;td&gt;CPUä½¿ç”¨ç‡&lt;/td&gt;
&lt;td&gt;å†…å­˜ä½¿ç”¨ç‡&lt;/td&gt;
&lt;td&gt;è™šæ‹Ÿå†…å­˜å¤§å°&lt;/td&gt;
&lt;td&gt;ç‰©ç†å†…å­˜å¤§å°&lt;/td&gt;
&lt;td&gt;æ‰€åœ¨ç»ˆç«¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿›ç¨‹çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯åŠ¨æ—¶é—´&lt;/td&gt;
&lt;td&gt;ç´¯è®¡CPUæ—¶é—´&lt;/td&gt;
&lt;td&gt;å¯åŠ¨å‘½ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;è¿›ç¨‹çŠ¶æ€ï¼ˆSTATï¼‰æ˜¯æ’æŸ¥é—®é¢˜çš„å…³é”®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;R&lt;/strong&gt;ï¼šæ­£åœ¨è¿è¡Œæˆ–å¯è¿è¡Œï¼ˆåœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;ï¼šå¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€ï¼ˆç­‰å¾…äº‹ä»¶å®Œæˆï¼Œå¦‚I/Oæ“ä½œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;D&lt;/strong&gt;ï¼šä¸å¯ä¸­æ–­çš„ç¡çœ ï¼ˆé€šå¸¸æ­£åœ¨ç­‰å¾…ç¡¬ä»¶I/Oï¼Œæ— æ³•è¢«ä¿¡å·ä¸­æ–­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;T&lt;/strong&gt;ï¼šå·²åœæ­¢ï¼ˆä¾‹å¦‚ï¼Œè¢«ä½œä¸šæ§åˆ¶ä¿¡å·æš‚åœæˆ–æ­£åœ¨è¢«è°ƒè¯•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Z&lt;/strong&gt;ï¼š&lt;strong&gt;åƒµå°¸è¿›ç¨‹&lt;/strong&gt;ï¼Œè¿™æ˜¯éœ€è¦å…³æ³¨çš„é—®é¢˜çŠ¶æ€ã€‚è¡¨ç¤ºè¿›ç¨‹å·²ç»ˆæ­¢ï¼Œä½†å…¶çˆ¶è¿›ç¨‹å°šæœªå›æ”¶è¯¥è¿›ç¨‹çš„èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ps -ef&lt;/code&gt;è¾“å‡ºè¯¦è§£&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç”¨æˆ·ID&lt;/th&gt;
&lt;th&gt;è¿›ç¨‹ID&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;çˆ¶è¿›ç¨‹ID&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;CPUåˆ©ç”¨ç‡&lt;/th&gt;
&lt;th&gt;å¯åŠ¨æ—¶é—´&lt;/th&gt;
&lt;th&gt;ç»ˆç«¯&lt;/th&gt;
&lt;th&gt;ç´¯è®¡CPUæ—¶é—´&lt;/th&gt;
&lt;th&gt;å®Œæ•´å‘½ä»¤&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;UID&lt;/td&gt;
&lt;td&gt;PID&lt;/td&gt;
&lt;td&gt;PPID&lt;/td&gt;
&lt;td&gt;C&lt;/td&gt;
&lt;td&gt;STIME&lt;/td&gt;
&lt;td&gt;TTY&lt;/td&gt;
&lt;td&gt;TIME&lt;/td&gt;
&lt;td&gt;CMD&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¿™ä¸ªè¾“å‡ºç‰¹åˆ«æœ‰åŠ©äºé€šè¿‡ &lt;strong&gt;PPIDï¼ˆçˆ¶è¿›ç¨‹IDï¼‰&lt;/strong&gt; æ¥ç†è§£è¿›ç¨‹é—´çš„æ´¾ç”Ÿå…³ç³»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸è§ä½¿ç”¨åœºæ™¯ä¸æŠ€å·§"&gt;ğŸ› ï¸ å¸¸è§ä½¿ç”¨åœºæ™¯ä¸æŠ€å·§
&lt;/h3&gt;&lt;p&gt;æŒæ¡ &lt;code&gt;ps&lt;/code&gt;å‘½ä»¤çš„å…³é”®åœ¨äºå°†å…¶ä¸å…¶å®ƒå‘½ä»¤ï¼ˆå¦‚ &lt;code&gt;grep&lt;/code&gt;, &lt;code&gt;sort&lt;/code&gt;, &lt;code&gt;head&lt;/code&gt;ï¼‰çµæ´»ç»„åˆï¼Œä»¥é€‚åº”ä¸åŒçš„æ’æŸ¥åœºæ™¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿«é€Ÿå®šä½èµ„æºæ¶ˆè€—å¤§æˆ·&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ç³»ç»Ÿè´Ÿè½½è¿‡é«˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾å‡ºæ¶ˆè€—CPUæˆ–å†…å­˜æœ€å¤šçš„è¿›ç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æ‰¾å‡ºCPUå ç”¨æœ€é«˜çš„5ä¸ªè¿›ç¨‹
ps aux --sort=-%cpu | head -n 5
# æ‰¾å‡ºå†…å­˜å ç”¨æœ€é«˜çš„5ä¸ªè¿›ç¨‹
ps aux --sort=-%mem | head -n 5
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ’æŸ¥åƒµå°¸è¿›ç¨‹ï¼ˆZombie Processesï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åƒµå°¸è¿›ç¨‹è¿‡å¤šä¼šå ç”¨ç³»ç»Ÿè¿›ç¨‹å·èµ„æºï¼Œéœ€è¦å…³æ³¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨åƒµå°¸è¿›ç¨‹
ps aux | grep defunct
# æˆ–è€…é€šè¿‡STATå­—æ®µç­›é€‰
ps -eo pid,stat,cmd | grep &amp;#39;^.* [Z]&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœå‘ç°åƒµå°¸è¿›ç¨‹ï¼Œé€šå¸¸éœ€è¦æ‰¾åˆ°å¹¶é‡å¯å…¶çˆ¶è¿›ç¨‹æ¥æ¸…ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ¨æ€ç›‘æ§ç‰¹å®šè¿›ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶ &lt;code&gt;ps&lt;/code&gt;æ˜¯é™æ€å¿«ç…§ï¼Œä½†å¯ä»¥ç»“åˆ &lt;code&gt;watch&lt;/code&gt;å‘½ä»¤å®ç°ç®€å•çš„åŠ¨æ€ç›‘æ§ã€‚ä¾‹å¦‚ï¼Œæ¯2ç§’åˆ·æ–°ä¸€æ¬¡å†…å­˜å ç”¨æœ€é«˜çš„è¿›ç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;watch -n 2 &amp;#39;ps aux --sort=-%mem | head -n 5&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¿›é˜¶ç”¨æ³•"&gt;ğŸ’¡ è¿›é˜¶ç”¨æ³•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è‡ªå®šä¹‰è¾“å‡ºå­—æ®µ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ps -o&lt;/code&gt;å¯ä»¥å®Œå…¨è‡ªå®šä¹‰è¾“å‡ºçš„åˆ—ï¼Œè¿™å¯¹äºç¼–å†™ç›‘æ§è„šæœ¬å°¤å…¶æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# åªæ˜¾ç¤ºPIDã€å‘½ä»¤åã€è¿è¡Œæ—¶é—´ï¼Œå¹¶æŒ‰è¿è¡Œæ—¶é—´æ’åº
ps -eo pid,comm,etime --sort=-etime
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹è¿›ç¨‹çš„ç¯å¢ƒå˜é‡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ps eww&lt;/code&gt;å¯ä»¥æŸ¥çœ‹è¿›ç¨‹è¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ps eww -p &amp;lt;PID&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ps&lt;/code&gt;å‘½ä»¤æ˜¯Linuxç³»ç»Ÿç®¡ç†ä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚å®ƒæä¾›äº†æ´å¯Ÿç³»ç»Ÿå†…éƒ¨è¿è¡Œçš„çª—å£ã€‚è®°ä½ï¼Œ&lt;code&gt;ps aux&lt;/code&gt;å’Œ &lt;code&gt;ps -ef&lt;/code&gt;æ˜¯æŸ¥çœ‹å…¨å±€è¿›ç¨‹çš„èµ·ç‚¹ï¼Œç»“åˆ &lt;code&gt;grep&lt;/code&gt;è¿›è¡Œè¿‡æ»¤å’Œ &lt;code&gt;--sort&lt;/code&gt;è¿›è¡Œæ’åºï¼Œå¯ä»¥è§£å†³å¤§éƒ¨åˆ†è¿›ç¨‹æŸ¥è¯¢é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;ps&lt;/code&gt;å‘½ä»¤ã€‚å¦‚æœä½ åœ¨å®è·µä¸­æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="jps--ps"&gt;Jps &amp;amp; ps
&lt;/h2&gt;&lt;p&gt;åœ¨Linuxç³»ç»Ÿä¸­ï¼Œ&lt;code&gt;jps&lt;/code&gt;å’Œ &lt;code&gt;ps&lt;/code&gt;éƒ½æ˜¯ç”¨äºæŸ¥çœ‹è¿›ç¨‹çŠ¶æ€çš„å®ç”¨å‘½ä»¤ï¼Œä½†å®ƒä»¬çš„å®šä½å’Œä¸“é•¿é¢†åŸŸæˆªç„¶ä¸åŒã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;jps&lt;/code&gt;æ˜¯ä¸“é—¨ä¸ºJavaåº”ç”¨é‡èº«æ‰“é€ çš„â€œä¸“å±å·¥å…·â€ï¼Œè€Œ &lt;code&gt;ps&lt;/code&gt;åˆ™æ˜¯æ´å¯Ÿç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„â€œå¹¿è§’é•œâ€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¿«é€ŸæŠ“ä½å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;jps (Java Virtual Machine Process Status Tool)&lt;/th&gt;
&lt;th&gt;ps (Process Status)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸“ç”¨å·¥å…·&lt;/strong&gt;ï¼Œä»…ç”¨äºåˆ—å‡ºJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰è¿›ç¨‹&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€šç”¨å·¥å…·&lt;/strong&gt;ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹ï¼ˆä»»ä½•è¯­è¨€ã€ä»»ä½•ç±»å‹ï¼‰çš„çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¾ç¤ºèŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤ä»…æ˜¾ç¤º&lt;strong&gt;å½“å‰ç”¨æˆ·&lt;/strong&gt;æœ‰æƒè®¿é—®çš„&lt;strong&gt;JVMè¿›ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯æ˜¾ç¤º&lt;strong&gt;æ‰€æœ‰ç”¨æˆ·&lt;/strong&gt;çš„&lt;strong&gt;å…¨éƒ¨è¿›ç¨‹&lt;/strong&gt;ï¼ˆéœ€ç›¸åº”æƒé™ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾“å‡ºä¿¡æ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜åº¦ç»“æ„åŒ–&lt;/strong&gt;ï¼Œç›´æ¥æ˜¾ç¤ºJavaè¿›ç¨‹IDã€ä¸»ç±»å…¨åï¼ˆ&lt;code&gt;-l&lt;/code&gt;ï¼‰ã€JVMå‚æ•°ï¼ˆ&lt;code&gt;-v&lt;/code&gt;ï¼‰ã€ä¸»æ–¹æ³•å‚æ•°ï¼ˆ&lt;code&gt;-m&lt;/code&gt;ï¼‰ç­‰å…³é”®ä¿¡æ¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡æ¯å¹¿æ³›ä½†éœ€è¿‡æ»¤&lt;/strong&gt;ï¼Œæ˜¾ç¤ºå¦‚PIDã€CPU/å†…å­˜å ç”¨ã€ç”¨æˆ·ã€å¯åŠ¨æ—¶é—´ç­‰ç³»ç»Ÿçº§ä¿¡æ¯ã€‚è¦è¯†åˆ«Javaè¿›ç¨‹ï¼Œé€šå¸¸éœ€ä»å‘½ä»¤æ ï¼ˆ&lt;code&gt;COMMAND&lt;/code&gt;ï¼‰ä¸­æ‰‹åŠ¨ç­›é€‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜“ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼€ç®±å³ç”¨&lt;/strong&gt;ï¼Œæ— éœ€é¢å¤–è¿‡æ»¤ï¼Œç»“æœæ¸…æ™°ä¸”ä¸“ä¸ºJavaä¼˜åŒ–ï¼Œæ˜“äºè§£æ&lt;/td&gt;
&lt;td&gt;éœ€è¦ç»“åˆ &lt;code&gt;grep&lt;/code&gt;ç­‰å·¥å…·è¿›è¡Œè¿‡æ»¤ï¼ˆå¦‚ `ps -ef&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥è®¿é—®JVMå…±äº«å†…å­˜æ•°æ®ï¼Œ&lt;strong&gt;å¼€é”€æä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå†ç³»ç»Ÿè¿›ç¨‹åˆ—è¡¨ï¼Œé…åˆ &lt;code&gt;grep&lt;/code&gt;æ—¶ä¼šæœ‰é¢å¤–å¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä½¿ç”¨åœºæ™¯ä¸æŠ€å·§"&gt;ğŸ”§ ä½¿ç”¨åœºæ™¯ä¸æŠ€å·§
&lt;/h3&gt;&lt;p&gt;ç†è§£å®ƒä»¬çš„åŒºåˆ«åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¯¥ç”¨å“ªä¸ªå‘½ä»¤ï¼Œä»¥åŠä¸€äº›å®ç”¨æŠ€å·§ã€‚&lt;/p&gt;
&lt;h4 id="ä½•æ—¶é€‰æ‹©"&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹© &lt;code&gt;jps&lt;/code&gt;ï¼Ÿ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“ä½ çš„å·¥ä½œé‡å¿ƒå°±æ˜¯&lt;strong&gt;Javaåº”ç”¨æœ¬èº«&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;jps&lt;/code&gt;æ˜¯æ›´é«˜æ•ˆã€æ›´å‡†ç¡®çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿«é€Ÿå®šä½Javaåº”ç”¨&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å™¨ä¸Šéœ€è¦å¿«é€Ÿæ‰¾åˆ°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„JavaæœåŠ¡ï¼ˆæ¯”å¦‚Tomcatã€Spring Bootåº”ç”¨çš„PIDï¼‰ï¼Œç›´æ¥è¾“å…¥ &lt;code&gt;jps -l&lt;/code&gt;å³å¯ã€‚&lt;code&gt;-l&lt;/code&gt;å‚æ•°èƒ½è¾“å‡ºä¸»ç±»çš„å®Œæ•´åŒ…åæˆ–JARæ–‡ä»¶è·¯å¾„ï¼Œéå¸¸ä¾¿äºè¯†åˆ«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºå…¶ä»–JDKå·¥å…·æä¾›å…¥å£&lt;/strong&gt;ï¼šå½“ä½ å‡†å¤‡ä½¿ç”¨ &lt;code&gt;jstack&lt;/code&gt;ï¼ˆæŸ¥çœ‹çº¿ç¨‹ï¼‰ã€&lt;code&gt;jmap&lt;/code&gt;ï¼ˆåˆ†æå†…å­˜ï¼‰ã€&lt;code&gt;jstat&lt;/code&gt;ï¼ˆç›‘æ§GCï¼‰ç­‰JDKå†…ç½®çš„æ•…éšœè¯Šæ–­å·¥å…·æ—¶ï¼Œç¬¬ä¸€æ­¥é€šå¸¸å°±æ˜¯ç”¨ &lt;code&gt;jps&lt;/code&gt;è·å–ç›®æ ‡Javaè¿›ç¨‹çš„PIDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥JVMå¯åŠ¨å‚æ•°&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;jps -v&lt;/code&gt;å¯ä»¥å¿«é€ŸæŸ¥çœ‹æŸä¸ªJavaè¿›ç¨‹å¯åŠ¨æ—¶ä¼ é€’çš„æ‰€æœ‰JVMå‚æ•°ï¼ˆå¦‚å†…å­˜è®¾ç½®ã€GCé…ç½®ç­‰ï¼‰ï¼Œå¯¹äºè°ƒä¼˜å’Œé—®é¢˜æ’æŸ¥éå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä½•æ—¶é€‰æ‹©-1"&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹© &lt;code&gt;ps&lt;/code&gt;ï¼Ÿ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“ä½ éœ€è¦&lt;strong&gt;å…¨é¢äº†è§£ç³»ç»ŸçŠ¶æ€&lt;/strong&gt;ï¼Œæˆ–æ’æŸ¥çš„é—®é¢˜&lt;strong&gt;è¶…å‡ºJavaèŒƒç•´&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;ps&lt;/code&gt;æ˜¯å¿…ä¸å¯å°‘çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿçº§ç›‘æ§ä¸æ’æŸ¥&lt;/strong&gt;ï¼šå½“ç³»ç»Ÿè´Ÿè½½è¿‡é«˜ï¼Œéœ€è¦æ‰¾å‡ºæ˜¯å“ªä¸ªè¿›ç¨‹ï¼ˆå¯èƒ½æ˜¯Javaï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®åº“ã€C++ç¨‹åºç­‰ï¼‰è€—å°½CPUæˆ–å†…å­˜æ—¶ï¼Œ&lt;code&gt;ps&lt;/code&gt;æ˜¯é¦–é€‰ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;ps aux --sort=-%cpu | head -5&lt;/code&gt;å¯ä»¥å¿«é€Ÿæ‰¾å‡ºCPUå ç”¨æœ€é«˜çš„å‰5ä¸ªè¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥çœ‹è¿›ç¨‹çš„å®Œæ•´ä¸Šä¸‹æ–‡&lt;/strong&gt;ï¼š&lt;code&gt;ps&lt;/code&gt;èƒ½æä¾›Javaè¿›ç¨‹ä¹‹å¤–çš„ä¸°å¯Œä¿¡æ¯ï¼Œå¦‚&lt;strong&gt;çˆ¶è¿›ç¨‹IDï¼ˆPPIDï¼‰&lt;/strong&gt;ã€è¿›ç¨‹å¯åŠ¨çš„&lt;strong&gt;å®Œæ•´å‘½ä»¤è¡Œ&lt;/strong&gt;ã€&lt;strong&gt;æ‰€å±ç”¨æˆ·&lt;/strong&gt;ã€&lt;strong&gt;è¿è¡Œç»ˆç«¯&lt;/strong&gt;ç­‰ï¼Œè¿™åœ¨åˆ†æå¤æ‚çš„è¿›ç¨‹å…³ç³»ï¼ˆå¦‚ç”±è„šæœ¬å¯åŠ¨çš„Javaè¿›ç¨‹ï¼‰æ—¶éå¸¸å…³é”®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’æŸ¥éJavaè¿›ç¨‹é—®é¢˜&lt;/strong&gt;ï¼šå½“é—®é¢˜å¯èƒ½å‡ºåœ¨Javaåº”ç”¨çš„ä¾èµ–æœåŠ¡ï¼ˆå¦‚Nginxã€MySQLï¼‰æˆ–æ“ä½œç³»ç»Ÿæœ¬èº«æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ &lt;code&gt;ps&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å®ç”¨å‘½ä»¤ç¤ºä¾‹"&gt;&lt;strong&gt;å®ç”¨å‘½ä»¤ç¤ºä¾‹&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;jps&lt;/code&gt;å¸¸ç”¨ç»„åˆ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;jps # åˆ—å‡ºæœ¬æœºæ‰€æœ‰Javaè¿›ç¨‹çš„PIDå’Œä¸»ç±»åï¼ˆçŸ­æ ¼å¼ï¼‰
jps -l # è¾“å‡ºä¸»ç±»çš„å®Œæ•´åŒ…åæˆ–JARæ–‡ä»¶å®Œæ•´è·¯å¾„
jps -v # æ˜¾ç¤ºä¼ é€’ç»™JVMçš„å‚æ•°
jps -m # æ˜¾ç¤ºä¼ é€’ç»™mainæ–¹æ³•çš„å‚æ•°
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ps&lt;/code&gt;æŸ¥æ‰¾Javaè¿›ç¨‹çš„å¸¸ç”¨æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ps -ef | grep java # æ ‡å‡†ç”¨æ³•ï¼Œä½†ä¼šåŒ…å«grepè¿›ç¨‹æœ¬èº«
ps -ef | grep java | grep -v grep # æ’é™¤æ‰grepè¿›ç¨‹ï¼Œç»“æœæ›´å¹²å‡€
ps -C java -f # ä½¿ç”¨-Cé€‰é¡¹ç›´æ¥æŒ‡å®šè¿›ç¨‹åï¼Œæ›´ç²¾ç¡®
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰æ‹©å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œé€‰æ‹©å“ªä¸ªå·¥å…·å–å†³äºä½ çš„ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸“æ³¨äºJavaåº”ç”¨&lt;/strong&gt;ï¼šæ¯«ä¸çŠ¹è±«åœ°ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;jps&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒç²¾å‡†ã€é«˜æ•ˆï¼Œèƒ½ç›´æ¥æä¾›ä¸Javaç›¸å…³çš„æ ¸å¿ƒä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®è§‚ç³»ç»Ÿç›‘æ§æˆ–è·¨ç•Œé—®é¢˜æ’æŸ¥&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ps&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒæ˜¯ç³»ç»Ÿç®¡ç†çš„ç‘å£«å†›åˆ€ï¼Œèƒ½æä¾›å…¨å±€è§†è§’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å¾ˆå¤šå®é™…çš„è¿ç»´åœºæ™¯ä¸­ï¼Œè¿™ä¸¤è€…å¸¸å¸¸æ˜¯&lt;strong&gt;ååŒå·¥ä½œ&lt;/strong&gt;çš„ã€‚æ¯”å¦‚ï¼Œå…ˆç”¨ &lt;code&gt;ps aux | grep java&lt;/code&gt;å‘ç°æŸä¸ªJavaè¿›ç¨‹å†…å­˜å ç”¨å¼‚å¸¸ï¼Œå†é€šè¿‡ &lt;code&gt;jps -l&lt;/code&gt;ç¡®è®¤å…¶å…·ä½“åº”ç”¨èº«ä»½ï¼Œæœ€åç”¨ &lt;code&gt;jstack&lt;/code&gt;æˆ– &lt;code&gt;jmap&lt;/code&gt;è¿›è¡Œæ·±åº¦è¯Šæ–­ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤ï¼å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ‹œå åº­é”™è¯¯"&gt;æ‹œå åº­é”™è¯¯
&lt;/h2&gt;&lt;p&gt;åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ£€æµ‹å’Œé˜²èŒƒæ‹œå åº­é”™è¯¯æ˜¯ä¸€é¡¹å¤æ‚çš„æŒ‘æˆ˜ï¼Œè¿™ç±»é”™è¯¯æŒ‡çš„æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­èŠ‚ç‚¹å¯èƒ½è¡¨ç°å‡ºä»»æ„æ€§æ•…éšœï¼ˆåŒ…æ‹¬æ¶æ„è¡Œä¸ºï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯å®•æœºæˆ–ç®€å•çš„é”™è¯¯ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¢³ç†äº†æ ¸å¿ƒçš„ç­–ç•¥ä¸æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç­–ç•¥ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ–¹æ³•&lt;/th&gt;
&lt;th&gt;å…³é”®æŠ€æœ¯ä¸å®è·µ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒé˜²èŒƒç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é‡‡ç”¨æ‹œå åº­å®¹é”™ï¼ˆBFTï¼‰å…±è¯†ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å…³é”®ç³»ç»Ÿä¸­ä½¿ç”¨PBFTã€SBFTç­‰ç®—æ³•ï¼Œå¯å®¹å¿ä¸è¶…è¿‡ (N-1)/3 çš„æ¶æ„èŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»åŠ¨æ£€æµ‹æ‰‹æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®æ–½èŠ‚ç‚¹è¡Œä¸ºç›‘æ§ä¸ä¸€è‡´æ€§æ£€æŸ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å®¡è®¡æ—¥å¿—ã€æ¯”è¾ƒèŠ‚ç‚¹å“åº”ã€è®¾ç½®Quorumæ£€æµ‹å™¨ç­‰æ–¹å¼è¯†åˆ«ä¸ä¸€è‡´è¡Œä¸ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿè®¾è®¡å¢å¼º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é™ä½æ”»å‡»é¢ä¸æå‡éŸ§æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºåŒ–èŠ‚ç‚¹å®‰å…¨ã€ç½‘ç»œåŠ å¯†ã€é›¶ä¿¡ä»»æ¶æ„ï¼›è®¾è®¡æ¨¡å—åŒ–ã€æœ€å°ä¿¡ä»»åŸŸä»¥é™åˆ¶æ•…éšœä¼ æ’­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºä¸ç¯å¢ƒè€ƒé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æƒè¡¡BFTä¸CFTçš„é€‰æ‹©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨éæ•Œå¯¹å†…éƒ¨ç¯å¢ƒï¼ˆå¦‚å…¬å¸å†…ç½‘ï¼‰å¸¸ä½¿ç”¨Raftç­‰CFTç®—æ³•ï¼Œå‡è®¾èŠ‚ç‚¹â€œéæ¶æ„â€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥æ£€æµ‹æ–¹æ³•"&gt;ğŸ” æ·±å…¥æ£€æµ‹æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;æ‹œå åº­é”™è¯¯çš„ç‹¡çŒ¾ä¹‹å¤„åœ¨äºï¼Œæ¶æ„èŠ‚ç‚¹ä¼šè¯•å›¾æ©ç›–å…¶è¡Œä¸ºã€‚å› æ­¤ï¼Œæ£€æµ‹éœ€è¦å¤šç®¡é½ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§å®¡è®¡ä¸äº¤å‰éªŒè¯&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€åŸºæœ¬çš„æ–¹æ³•ã€‚é€šè¿‡è®°å½•æ‰€æœ‰èŠ‚ç‚¹çš„è¯·æ±‚ã€å“åº”å’Œé€šä¿¡çš„&lt;strong&gt;ä¸å¯ç¯¡æ”¹çš„å®¡è®¡æ—¥å¿—&lt;/strong&gt;ï¼Œå¹¶å®šæœŸå¯¹æ¯”æ¥è‡ªä¸åŒèŠ‚ç‚¹çš„æ•°æ®æˆ–çŠ¶æ€å‰¯æœ¬ï¼Œå¯ä»¥å‘ç°èŠ‚ç‚¹åœ¨ä¸åŒå¯¹è±¡é¢å‰æä¾›ä¸ä¸€è‡´ä¿¡æ¯ï¼ˆå³â€œè¯´å‡è¯â€ï¼‰çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºå¯é çš„æ£€æµ‹ç½‘ç»œ&lt;/strong&gt;ï¼šä¸ºäº†é¿å…æ£€æµ‹å™¨æœ¬èº«è¢«æ¶æ„èŠ‚ç‚¹æ¬ºéª—æˆ–å¹²æ‰°ï¼Œå¯ä»¥é‡‡ç”¨ &lt;strong&gt;Quorumæ£€æµ‹å™¨&lt;/strong&gt; çš„æ¦‚å¿µã€‚å³ç”±ä¸€ç»„æ£€æµ‹èŠ‚ç‚¹å…±åŒæŠ•ç¥¨å†³å®šæŸä¸ªè¢«æ£€æµ‹èŠ‚ç‚¹æ˜¯å¦å‘ç”Ÿæ•…éšœï¼Œè¿™å¯ä»¥æœ‰æ•ˆé˜²æ­¢å•ä¸ªæˆ–å°‘æ•°æ¶æ„æ£€æµ‹èŠ‚ç‚¹å¯¹ç»“æœè¿›è¡Œå¹²æ‰°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½åŒ–çš„æ•…éšœé¢„æµ‹&lt;/strong&gt;ï¼šç»“åˆæœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œé€šè¿‡åˆ†æèŠ‚ç‚¹çš„å“åº”æ—¶é—´ã€æ¶ˆæ¯æ¨¡å¼ã€èµ„æºä½¿ç”¨æƒ…å†µç­‰å†å²æ•°æ®ï¼Œå»ºç«‹æ­£å¸¸è¡Œä¸ºåŸºçº¿ã€‚ä¸€æ—¦èŠ‚ç‚¹è¡Œä¸ºæ˜¾è‘—åç¦»åŸºçº¿ï¼Œå³å¯è§¦å‘è­¦æŠ¥ï¼Œå®ç°&lt;strong&gt;ä¸»åŠ¨çš„æ•…éšœé¢„æµ‹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¨é¢é˜²èŒƒæ–¹æ¡ˆ"&gt;ğŸ›¡ï¸ å…¨é¢é˜²èŒƒæ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;é˜²èŒƒæªæ–½éœ€è¦ä»æ¶æ„åˆ°åè®®å±‚å±‚è®¾é˜²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹œå åº­å®¹é”™å…±è¯†ç®—æ³•&lt;/strong&gt;ï¼šè¿™æ˜¯é˜²èŒƒçš„åŸºçŸ³ã€‚ä¸å¸¸è§çš„ã€åªèƒ½å®¹å¿èŠ‚ç‚¹å´©æºƒæ•…éšœï¼ˆCFTï¼‰çš„Raftç®—æ³•ä¸åŒï¼ŒBFTç®—æ³•ï¼ˆå¦‚PBFTåŠå…¶å˜ç§ï¼‰èƒ½å¤Ÿå®¹å¿ä¸€å®šæ¯”ä¾‹çš„èŠ‚ç‚¹ä½œæ¶ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”±4ä¸ªèŠ‚ç‚¹ç»„æˆçš„é‡‡ç”¨å¿«é€Ÿæ‹œå åº­å®¹é”™å…±è¯†ç®—æ³•ï¼ˆFBFTï¼‰çš„æ’åºé›†ç¾¤ï¼Œæœ€å¤šå¯ä»¥å®¹å¿1ä¸ªæ‹œå åº­é”™è¯¯èŠ‚ç‚¹è€Œä¸å½±å“ç³»ç»Ÿæ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿå®‰å…¨åŠ å›ºä¸å†—ä½™&lt;/strong&gt;ï¼š&lt;strong&gt;å¼ºåŒ–æ¯ä¸ªèŠ‚ç‚¹è‡ªèº«çš„å®‰å…¨&lt;/strong&gt;è‡³å…³é‡è¦ï¼ŒåŒ…æ‹¬åŠæ—¶æ‰“è¡¥ä¸ã€ä½¿ç”¨å®‰å…¨å¯åŠ¨ã€æœ€å°æƒé™åŸåˆ™ç­‰ã€‚åŒæ—¶ï¼Œåœ¨ç³»ç»Ÿå’Œç½‘ç»œå±‚é¢å¼•å…¥&lt;strong&gt;å¤šæ ·æ€§å†—ä½™&lt;/strong&gt;ï¼Œå¦‚é‡‡ç”¨ä¸åŒæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è½¯ä»¶å®ç°çš„èŠ‚ç‚¹ï¼Œå¯ä»¥é™ä½å…±æ¨¡æ•…éšœé£é™©ã€‚æ­¤å¤–ï¼Œ&lt;strong&gt;å®æ–½ä¸¥æ ¼çš„ç½‘ç»œéš”ç¦»å’Œé€šä¿¡åŠ å¯†&lt;/strong&gt;ï¼ˆå¦‚TLS/SSLï¼‰ä¹Ÿèƒ½æœ‰æ•ˆå‡å°‘æ”»å‡»é¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶æ„éŸ§æ€§è®¾è®¡&lt;/strong&gt;ï¼šé‡‡ç”¨&lt;strong&gt;æœ€å°ä¿¡ä»»åŸŸ&lt;/strong&gt;åŸåˆ™ï¼Œå‡è®¾ä»»ä½•ç»„ä»¶éƒ½å¯èƒ½å¤±æ•ˆã€‚é€šè¿‡&lt;strong&gt;æœåŠ¡ç½‘æ ¼&lt;/strong&gt;æˆ–ä»£ç†å±‚å®ç°ç»†ç²’åº¦çš„æµé‡æ§åˆ¶å’Œç­–ç•¥æ‰§è¡Œï¼Œå¹¶è®¾è®¡&lt;strong&gt;å¿«é€Ÿéš”ç¦»ä¸æ¢å¤æœºåˆ¶&lt;/strong&gt;ï¼Œä¸€æ—¦æ£€æµ‹åˆ°æ½œåœ¨æ‹œå åº­èŠ‚ç‚¹ï¼Œèƒ½è¿…é€Ÿå°†å…¶ä»ç³»ç»Ÿä¸­éš”ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¡Œä¸šå®è·µä¸æƒè¡¡"&gt;ğŸ’¡ è¡Œä¸šå®è·µä¸æƒè¡¡
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯åšå‡ºæƒè¡¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒºå—é“¾ç³»ç»Ÿ&lt;/strong&gt;ï¼šåŒºå—é“¾æ˜¯BFTæŠ€æœ¯çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œå…¶å…±è¯†æœºåˆ¶ï¼ˆå¦‚æ¯”ç‰¹å¸ä½¿ç”¨çš„å·¥ä½œé‡è¯æ˜PoWï¼Œä»¥å¤ªåŠ2.0ä½¿ç”¨çš„æƒç›Šè¯æ˜PoSï¼‰æœ¬è´¨ä¸Šæ˜¯è§£å†³å…¬å¼€ç½‘ç»œä¸­çš„æ‹œå åº­å°†å†›é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡‘èä¸å…³é”®åŸºç¡€è®¾æ–½&lt;/strong&gt;ï¼šåœ¨è¿™äº›å¯¹å®‰å…¨æ€§è¦æ±‚æé«˜çš„é¢†åŸŸï¼Œé€šå¸¸ä¼šé‡‡ç”¨PBFTç­‰ç»å…¸ç®—æ³•æˆ–å…¶å˜ç§ï¼Œå°½ç®¡æ€§èƒ½å¼€é”€ç›¸å¯¹è¾ƒå¤§ï¼Œä½†ä¸ºäº†å®‰å…¨æ˜¯å€¼å¾—çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨å¯ä¿¡ç½‘ç»œ&lt;/strong&gt;ï¼šå¯¹äºè®¸å¤šä¼ä¸šå†…éƒ¨çš„ä¸­é—´ä»¶ç³»ç»Ÿï¼ˆå¦‚ä½¿ç”¨Raftç®—æ³•çš„etcdæˆ–åŸºäºRaftæ„å»ºçš„MySQLé›†ç¾¤ï¼‰ï¼Œé€šå¸¸å‡è®¾èŠ‚ç‚¹æ˜¯â€œå–„æ„â€çš„ï¼Œä»…å¯èƒ½å‘ç”Ÿå´©æºƒè€Œéæ¶æ„è¡Œä¸ºã€‚æ­¤æ—¶ï¼Œé€‰æ‹©&lt;strong&gt;å´©æºƒå®¹é”™ï¼ˆCFTï¼‰&lt;/strong&gt; ç®—æ³•åœ¨æ€§èƒ½ã€å¤æ‚æ€§å’Œä¸€è‡´æ€§ä¹‹é—´å–å¾—äº†æ›´å¥½çš„å¹³è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åº”å¯¹æ‹œå åº­é”™è¯¯éœ€è¦ä¸€ä¸ª&lt;strong&gt;æ·±åº¦é˜²å¾¡ä½“ç³»&lt;/strong&gt;ã€‚è¿™åŒ…æ‹¬åœ¨å¿…è¦æ—¶é€‰ç”¨åˆé€‚çš„BFTå…±è¯†ç®—æ³•ä½œä¸ºæ ¸å¿ƒï¼Œå¹¶è¾…ä»¥æŒç»­çš„è¡Œä¸ºç›‘æ§ã€ä¸»åŠ¨çš„å®‰å…¨åŠ å›ºå’Œçµæ´»çš„æ¶æ„è®¾è®¡ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦æ¸…é†’åœ°è®¤è¯†åˆ°BFTå¸¦æ¥çš„æ€§èƒ½å’Œç®¡ç†å¤æ‚åº¦æˆæœ¬ï¼Œæ ¹æ®å®é™…é¢ä¸´çš„å¨èƒæ¨¡å‹ï¼Œåœ¨BFTå’ŒCFTä¹‹é—´åšå‡ºæ˜æ™ºçš„æƒè¡¡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›å…·ä½“çš„ç­–ç•¥èƒ½ä¸ºä½ æ„å»ºå¥å£®çš„ç³»ç»Ÿæä¾›å¸®åŠ©ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="etcd"&gt;etcd
&lt;/h2&gt;&lt;p&gt;ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;etcd è‡ªèº«è®¾è®¡å¹¶ä¸ç›´æ¥è§£å†³æ‹œå åº­å°†å†›é—®é¢˜&lt;/strong&gt;ã€‚å®ƒåŸºäº Raft å…±è¯†ç®—æ³•ï¼Œè¯¥ç®—æ³•æœ‰ä¸€ä¸ªé‡è¦å‡è®¾ï¼šé›†ç¾¤ä¸­çš„èŠ‚ç‚¹æ˜¯â€œè¯šå®â€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒèŠ‚ç‚¹å¯èƒ½ä¼šå› ä¸ºæ•…éšœã€ç½‘ç»œé—®é¢˜è€Œå®•æœºæˆ–æ— å“åº”ï¼Œä½†&lt;strong&gt;ä¸ä¼šæ•…æ„æ¬ºéª—æˆ–æ¶æ„å‘é€é”™è¯¯ä¿¡æ¯&lt;/strong&gt;ã€‚etcd çš„æ ¸å¿ƒç›®æ ‡æ˜¯é«˜æ•ˆåœ°å¤„ç†è¿™ç±»â€œéæ‹œå åº­é”™è¯¯â€ï¼ˆä¹Ÿç§°ä¸ºå´©æºƒå®¹é”™ï¼‰ï¼Œä»è€Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°å¼ºä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº† etcd æ‰€èƒ½å¤„ç†çš„â€œéæ‹œå åº­é”™è¯¯â€å’Œå®ƒé€šå¸¸æ— æ³•å¤„ç†çš„â€œæ‹œå åº­é”™è¯¯â€ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é”™è¯¯ç±»å‹&lt;/th&gt;
&lt;th&gt;å…¸å‹è¡¨ç°&lt;/th&gt;
&lt;th&gt;etcd/Raft èƒ½å¦å¤„ç†ï¼Ÿ&lt;/th&gt;
&lt;th&gt;ä¸¾ä¾‹è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éæ‹œå åº­é”™è¯¯ï¼ˆå´©æºƒå®¹é”™ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èŠ‚ç‚¹å®•æœºã€ç½‘ç»œå»¶è¿Ÿæˆ–ä¸­æ–­å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€èŠ‚ç‚¹æ— å“åº”ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª etcd èŠ‚ç‚¹çªç„¶æ–­ç”µï¼Œæˆ–ç½‘ç»œæ–­å¼€å¯¼è‡´å…¶æ— æ³•ä¸å…¶ä»–èŠ‚ç‚¹é€šä¿¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‹œå åº­é”™è¯¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èŠ‚ç‚¹æ•…æ„å‘é€çŸ›ç›¾æˆ–é”™è¯¯çš„ä¿¡æ¯ã€ç¯¡æ”¹æ•°æ®ã€æ¬ºéª—å…¶ä»–èŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ï¼ˆåœ¨æ ‡å‡† Raft ä¸‹ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¢«æ”»å‡»çš„æ¶æ„èŠ‚ç‚¹å‘ä¸åŒèŠ‚ç‚¹å‘é€ä¸åŒçš„å€¼ï¼Œæˆ–å†’å……é¢†å¯¼è€…å‘å¸ƒéæ³•æŒ‡ä»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-raft-ç®—æ³•çš„éæ‹œå åº­å®¹é”™è®¾è®¡"&gt;ğŸ” Raft ç®—æ³•çš„éæ‹œå åº­å®¹é”™è®¾è®¡
&lt;/h3&gt;&lt;p&gt;etcd ä¾èµ–çš„ Raft ç®—æ³•é€šè¿‡ä¸€ç§ç›¸å¯¹ç®€å•ä¸”æ˜“äºç†è§£çš„æ–¹å¼æ¥ç»´æŠ¤ä¸€è‡´æ€§ï¼Œå…¶æ ¸å¿ƒæœºåˆ¶åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºé¢†å¯¼è€…æ¨¡å¼&lt;/strong&gt;ï¼šé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ª&lt;strong&gt;é¢†å¯¼è€…&lt;/strong&gt;ï¼ˆLeaderï¼‰ã€‚æ‰€æœ‰å®¢æˆ·ç«¯çš„å†™è¯·æ±‚éƒ½å¿…é¡»ç»ç”±é¢†å¯¼è€…å¤„ç†ã€‚é¢†å¯¼è€…å°†æ“ä½œä½œä¸ºæ—¥å¿—æ¡ç›®å¤åˆ¶ç»™å…¶ä»–&lt;strong&gt;è·Ÿéšè€…&lt;/strong&gt;ï¼ˆFollowerï¼‰èŠ‚ç‚¹ã€‚è¿™ç§ä¸­å¿ƒåŒ–çš„æ•°æ®æµæå¤§åœ°ç®€åŒ–äº†ç³»ç»Ÿé€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ•°æ´¾åŸåˆ™&lt;/strong&gt;ï¼šä¸€ä¸ªå†™æ“ä½œï¼ˆæ—¥å¿—æ¡ç›®ï¼‰åªæœ‰åœ¨è¢«é›†ç¾¤ä¸­&lt;strong&gt;è¶…è¿‡åŠæ•°&lt;/strong&gt;çš„èŠ‚ç‚¹æŒä¹…åŒ–åï¼Œæ‰ä¼šè¢«é¢†å¯¼è€…æäº¤ï¼ˆCommitï¼‰å¹¶åº”ç”¨åˆ°çŠ¶æ€æœºï¼Œéšåé€šçŸ¥å®¢æˆ·ç«¯æ“ä½œæˆåŠŸã€‚è¿™æ„å‘³ç€å³ä½¿å°‘æ•°èŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œé›†ç¾¤ä¾ç„¶èƒ½æ­£å¸¸è¿ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¯è¯­å’Œé€‰ä¸¾&lt;/strong&gt;ï¼šRaft å°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ª&lt;strong&gt;ä»»æœŸ&lt;/strong&gt;ï¼ˆTermï¼‰ã€‚æ¯ä¸ªä»»æœŸéƒ½ç”±ä¸€ä¸ªé¢†å¯¼è€…è´Ÿè´£ã€‚å¦‚æœè·Ÿéšè€…åœ¨ä¸€å®šæ—¶é—´å†…æ”¶ä¸åˆ°é¢†å¯¼è€…çš„å¿ƒè·³ï¼Œå°±ä¼šè§¦å‘æ–°çš„é€‰ä¸¾ã€‚åœ¨é€‰ä¸¾ä¸­ï¼ŒèŠ‚ç‚¹ä¼šæŠ•ç¥¨ç»™é‚£äº›æ—¥å¿—æ¯”è‡ªå·±æ›´å®Œæ•´çš„å€™é€‰äººï¼Œè¿™&lt;strong&gt;é˜²æ­¢äº†æ•°æ®é™ˆæ—§çš„èŠ‚ç‚¹æˆä¸ºé¢†å¯¼è€…&lt;/strong&gt;ï¼Œä¿è¯äº†æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-etcd-çš„å®é™…å®‰å…¨è¾¹ç•Œä¸å¢å¼ºæªæ–½"&gt;ğŸ›¡ï¸ etcd çš„å®é™…å®‰å…¨è¾¹ç•Œä¸å¢å¼ºæªæ–½
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ etcd çš„æ ¸å¿ƒç®—æ³•ä¸æä¾›æ‹œå åº­å®¹é”™ï¼Œä½†åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œä¼šé€šè¿‡å…¶ä»–æ‰‹æ®µæ¥å¼ºåŒ–å®‰å…¨ï¼Œå°½å¯èƒ½å°†æ‹œå åº­é”™è¯¯å‘ç”Ÿçš„æ¦‚ç‡é™è‡³æœ€ä½ï¼Œå¹¶å°†å…¶å½±å“æ§åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡è®¾ä¸è¾¹ç•Œ&lt;/strong&gt;ï¼šetcd çš„è®¾è®¡åŸºäºä¸€ä¸ªæ˜ç¡®çš„ä¿¡ä»»æ¨¡å‹ï¼š&lt;strong&gt;é›†ç¾¤å†…éƒ¨çš„èŠ‚ç‚¹æ˜¯å¯ä¿¡çš„&lt;/strong&gt;ã€‚è¿™ä¸ªä¿¡ä»»è¾¹ç•Œé€šå¸¸åˆ’åœ¨æ•°æ®ä¸­å¿ƒå†…éƒ¨æˆ–å—æ§çš„ç§æœ‰ç½‘ç»œç¯å¢ƒä¸­ã€‚å®ƒçš„é«˜å¯ç”¨æ€§ç›®æ ‡æ˜¯åº”å¯¹ç¡¬ä»¶æ•…éšœã€ç½‘ç»œæ³¢åŠ¨ç­‰â€œè‰¯æ€§â€é—®é¢˜ï¼Œè€ŒéæŠµå¾¡å†…éƒ¨èŠ‚ç‚¹çš„æ¶æ„æ”»å‡»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–å›´åŠ å›ºæªæ–½&lt;/strong&gt;ï¼šä¸ºäº†ç»´æŠ¤é›†ç¾¤çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ï¼Œetcd æ”¯æŒå¹¶æ¨èä»¥ä¸‹æªæ–½ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹èº«ä»½è®¤è¯&lt;/strong&gt;ï¼šä½¿ç”¨ TLS è¯ä¹¦å¯¹é›†ç¾¤å†…èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡è¿›è¡ŒåŠ å¯†å’Œèº«ä»½éªŒè¯ï¼Œé˜²æ­¢å¤–éƒ¨å®ä½“å†’å……åˆæ³•èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯è®¿é—®æ§åˆ¶&lt;/strong&gt;ï¼šé€šè¿‡åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰æ¥ç®¡ç†å®¢æˆ·ç«¯å¯¹æ•°æ®çš„è¯»å†™æƒé™ï¼Œé¿å…æœªæˆæƒçš„æ•°æ®ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰©ç†ä¸ç½‘ç»œéš”ç¦»&lt;/strong&gt;ï¼šå°† etcd é›†ç¾¤éƒ¨ç½²åœ¨å®‰å…¨çš„å†…éƒ¨ç½‘ç»œï¼Œä¸å…¬ç½‘éš”ç¦»ï¼Œå‡å°‘å—æ”»å‡»é¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¯é€‰æ–¹æ¡ˆbw-raft"&gt;ğŸ’¡ å¯é€‰æ–¹æ¡ˆï¼šBW-Raft
&lt;/h3&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸šç•Œä¹Ÿå­˜åœ¨å¯¹ç±»ä¼¼ Raft çš„ç®—æ³•è¿›è¡Œæ‰©å±•ï¼Œä»¥ä½¿å…¶å…·å¤‡æ‹œå åº­å®¹é”™èƒ½åŠ›çš„æ¢ç´¢ã€‚ä¾‹å¦‚ï¼Œ&lt;strong&gt;BW-Raft&lt;/strong&gt; å°±æ˜¯å¯¹ Raft åè®®çš„ä¸€ç§æ‹œå åº­å®¹é”™æ‰©å±•ã€‚å®ƒé€šè¿‡åœ¨æ¶ˆæ¯ä¼ é€’ä¸­åŠ å…¥&lt;strong&gt;æ•°å­—ç­¾å&lt;/strong&gt;ã€åœ¨é€‰ä¸¾å’Œæ—¥å¿—å¤åˆ¶é˜¶æ®µå¼•å…¥&lt;strong&gt;é¢å¤–çš„éªŒè¯è½®æ¬¡&lt;/strong&gt;ç­‰æœºåˆ¶ï¼Œæ¥è¯†åˆ«å’Œéš”ç¦»æ¶æ„èŠ‚ç‚¹ã€‚ç„¶è€Œï¼Œè¿™ç§å¢å¼ºæ˜¯ä»¥&lt;strong&gt;æ›´é«˜çš„å¤æ‚æ€§å’Œæ€§èƒ½å¼€é”€&lt;/strong&gt;ä¸ºä»£ä»·çš„ã€‚å¯¹äºç»å¤§å¤šæ•°éœ€è¦å†…éƒ¨åè°ƒä¸€è‡´ã€è€Œéåº”å¯¹æ¶æ„èŠ‚ç‚¹çš„åº”ç”¨åœºæ™¯ï¼ˆå¦‚ Kubernetes çš„å…ƒæ•°æ®å­˜å‚¨ï¼‰ï¼Œæ ‡å‡†ç‰ˆæœ¬çš„ etcd å’Œ Raft ç®—æ³•åœ¨ç®€å•æ€§ã€æ€§èƒ½å’Œå¯é æ€§ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œä½ å¯ä»¥å°† etcd è§†ä¸ºä¸€ä¸ªé«˜åº¦å¯é çš„â€œå†…éƒ¨ç®¡å®¶â€ã€‚å®ƒå“è¶Šåœ°å®Œæˆäº†åœ¨å¯ä¿¡ç¯å¢ƒï¼ˆå¦‚å…¬å¸å†…éƒ¨ç½‘ç»œï¼‰ä¸­ä¿æŒæ•°æ®ä¸€è‡´æ€§çš„ä»»åŠ¡ï¼Œèƒ½ä»å®¹åº”å¯¹æœºå™¨å®•æœºã€ç½‘ç»œåˆ†åŒºç­‰å¸¸è§æ•…éšœã€‚ä½†å®ƒå¹¶éè®¾è®¡ç”¨æ¥é˜²å¾¡â€œå†…é¬¼â€æˆ–å·²æ”»å…¥å†…éƒ¨çš„æ¶æ„æ”»å‡»è€…ã€‚ç†è§£è¿™ä¸€å…³é”®å®šä½ï¼Œå¯¹äºæ­£ç¡®ã€å®‰å…¨åœ°ä½¿ç”¨ etcd è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ etcdã€‚å¦‚æœä½ å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…¶ä»–æ–¹é¢æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="çº¢é»‘æ ‘--avl-æ ‘"&gt;çº¢é»‘æ ‘ &amp;amp; AVL æ ‘
&lt;/h2&gt;&lt;p&gt;çº¢é»‘æ ‘å’ŒAVLæ ‘éƒ½æ˜¯é«˜æ•ˆçš„è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œä½†å®ƒä»¬çš„è®¾è®¡å“²å­¦å’Œä¼˜åŒ–ä¾§é‡ç‚¹ä¸åŒï¼Œè¿™ä¹Ÿç›´æ¥å†³å®šäº†å®ƒä»¬å„è‡ªçš„åº”ç”¨åœºæ™¯ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°æ¦‚æ‹¬äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;çº¢é»‘æ ‘ (Red-Black Tree)&lt;/th&gt;
&lt;th&gt;AVLæ ‘ (Adelson-Velsky and Landis Tree)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹³è¡¡æ ‡å‡†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿‘ä¼¼å¹³è¡¡&lt;/strong&gt;ï¼Œç¡®ä¿ä»æ ¹åˆ°å¶å­çš„æœ€é•¿è·¯å¾„ä¸è¶…è¿‡æœ€çŸ­è·¯å¾„çš„&lt;strong&gt;2å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸¥æ ¼å¹³è¡¡&lt;/strong&gt;ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ï¼ˆå¹³è¡¡å› å­ï¼‰&lt;strong&gt;ç»å¯¹å€¼ä¸è¶…è¿‡1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥/åˆ é™¤æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´é«˜&lt;/strong&gt;ã€‚æ—‹è½¬æ¬¡æ•°æ›´å°‘ï¼Œé€šå¸¸æ’å…¥æœ€å¤š&lt;strong&gt;ä¸¤æ¬¡&lt;/strong&gt;æ—‹è½¬ï¼Œåˆ é™¤æœ€å¤š&lt;strong&gt;ä¸‰æ¬¡&lt;/strong&gt;æ—‹è½¬&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹è¾ƒä½&lt;/strong&gt;ã€‚ä¸ºç»´æŒä¸¥æ ¼å¹³è¡¡ï¼Œæ’å…¥å’Œåˆ é™¤åå¯èƒ½éœ€è¦&lt;strong&gt;æ›´å¤šæ¬¡&lt;/strong&gt;çš„æ—‹è½¬æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥æ‰¾æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç•¥ä½&lt;/strong&gt;äºAVLæ ‘ã€‚ç”±äºæ˜¯è¿‘ä¼¼å¹³è¡¡ï¼Œæ ‘çš„é«˜åº¦å¯èƒ½æ¯”AVLæ ‘é«˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´é«˜&lt;/strong&gt;ã€‚å› å…¶ä¸¥æ ¼å¹³è¡¡ï¼Œæ ‘çš„é«˜åº¦æœ€å°ï¼ŒæŸ¥æ‰¾æ“ä½œéå¸¸é«˜æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—‹è½¬é¢‘ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ã€‚é‡æ–°å¹³è¡¡æ‰€éœ€çš„æ—‹è½¬æ“ä½œè¾ƒå°‘&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ã€‚åœ¨æ’å…¥å’Œåˆ é™¤åæ›´å®¹æ˜“è§¦å‘æ—‹è½¬ä»¥é‡æ–°å¹³è¡¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªèŠ‚ç‚¹é€šå¸¸åªéœ€&lt;strong&gt;1ä¸ªæ¯”ç‰¹&lt;/strong&gt;å­˜å‚¨é¢œè‰²ä¿¡æ¯ï¼ˆçº¢æˆ–é»‘ï¼‰&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªèŠ‚ç‚¹éœ€è¦å­˜å‚¨&lt;strong&gt;å¹³è¡¡å› å­&lt;/strong&gt;ï¼ˆé€šå¸¸ä¸ºæ•´æ•°ï¼‰æˆ–&lt;strong&gt;é«˜åº¦ä¿¡æ¯&lt;/strong&gt;ï¼Œå¼€é”€ç¨å¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¢åˆ æ“ä½œé¢‘ç¹&lt;/strong&gt;çš„åœºæ™¯ï¼Œå¦‚ &lt;strong&gt;Javaçš„TreeMap/TreeSet&lt;/strong&gt;ã€&lt;strong&gt;C++ STLçš„map/set&lt;/strong&gt;ã€&lt;strong&gt;Linuxå†…æ ¸è¿›ç¨‹è°ƒåº¦&lt;/strong&gt;ç­‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ“ä½œè¿œå¤šäºå¢åˆ &lt;/strong&gt;çš„åœºæ™¯ï¼Œå¦‚&lt;strong&gt;æ•°æ®åº“ç´¢å¼•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒä¼˜ç‚¹ä¸åœºæ™¯é€‰æ‹©"&gt;ğŸ’¡ æ ¸å¿ƒä¼˜ç‚¹ä¸åœºæ™¯é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;çº¢é»‘æ ‘çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼Œå®ƒé€šè¿‡&lt;strong&gt;ç‰ºç‰²ä¸€éƒ¨åˆ†ä¸¥æ ¼çš„å¹³è¡¡æ€§&lt;/strong&gt;ï¼Œæ¢å–äº†åœ¨&lt;strong&gt;æ’å…¥å’Œåˆ é™¤æ“ä½œä¸Šæ›´é«˜çš„æ€§èƒ½&lt;/strong&gt;ã€‚è¿™ç§è®¾è®¡ä½¿å¾—å®ƒåœ¨éœ€è¦é¢‘ç¹ä¿®æ”¹æ•°æ®çš„åœºæ™¯ä¸‹æ•´ä½“æ€§èƒ½æ›´ä¼˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©çº¢é»‘æ ‘çš„æƒ…å†µ&lt;/strong&gt;ï¼šå½“ä½ çš„åº”ç”¨æ¶‰åŠ&lt;strong&gt;é¢‘ç¹çš„æ’å…¥ã€åˆ é™¤æ“ä½œ&lt;/strong&gt;ï¼Œæˆ–è€…æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œæ¬¡æ•°å·®ä¸å¤šæ—¶ï¼Œçº¢é»‘æ ‘æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ç°ä»£æ“ä½œç³»ç»Ÿå’Œç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†åº“å¹¿æ³›ä½¿ç”¨çº¢é»‘æ ‘æ¥å®ç°æ˜ å°„ï¼ˆMapï¼‰å’Œé›†åˆï¼ˆSetï¼‰ç­‰æ•°æ®ç»“æ„ï¼Œæ­£æ˜¯çœ‹ä¸­äº†å…¶ç»¼åˆæ€§èƒ½ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©AVLæ ‘çš„æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœä½ çš„åº”ç”¨æ˜¯&lt;strong&gt;æŸ¥è¯¢å¯†é›†å‹&lt;/strong&gt;çš„ï¼Œå³æ•°æ®ä¸€æ—¦å»ºç«‹ï¼Œåç»­çš„æ“ä½œç»å¤§éƒ¨åˆ†æ˜¯æŸ¥æ‰¾è€Œå¾ˆå°‘ä¿®æ”¹ï¼Œé‚£ä¹ˆAVLæ ‘å‡­å€Ÿå…¶ä¸¥æ ¼çš„å¹³è¡¡æ€§å¸¦æ¥çš„æè‡´æŸ¥æ‰¾é€Ÿåº¦ä¼šæ›´æœ‰ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§â€œå‡è¡¡å‹â€é€‰æ‰‹ï¼Œåœ¨ä¿®æ”¹å’ŒæŸ¥æ‰¾æ“ä½œä¹‹é—´å–å¾—äº†å¾ˆå¥½çš„å¹³è¡¡ï¼Œç‰¹åˆ«é€‚åˆåŠ¨æ€æ•°æ®é›†ï¼›è€ŒAVLæ ‘æ˜¯â€œæŸ¥æ‰¾ç‰¹åŒ–å‹â€é€‰æ‰‹ï¼Œä¸ºé™æ€æˆ–è¯»å¤šå†™å°‘çš„æ•°æ®é›†æä¾›äº†æœ€å¿«çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£çº¢é»‘æ ‘çš„ä¼˜ç‚¹ã€‚å¦‚æœä½ å¯¹æŸäº›ç»†èŠ‚è¿˜æƒ³æ·±å…¥äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="innodb-äº‹åŠ¡"&gt;innoDB äº‹åŠ¡
&lt;/h2&gt;&lt;p&gt;MySQL çš„ InnoDB å­˜å‚¨å¼•æ“é€šè¿‡ä¸€å¥—ç²¾å¯†çš„æœºåˆ¶æ¥ç®¡ç†äº‹åŠ¡ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿è‘—åçš„ &lt;strong&gt;ACID&lt;/strong&gt; ç‰¹æ€§ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ã€‚ä¸‹é¢è¿™å¼ å›¾å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒç»„ä»¶ä¸ ACID ç‰¹æ€§ä¹‹é—´çš„ä¿éšœå…³ç³»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç”¨æˆ·äº‹åŠ¡] --&amp;gt; B(ACIDç›®æ ‡)
B --&amp;gt; C1[åŸå­æ€§&amp;lt;br&amp;gt;Atomicity]
B --&amp;gt; C2[ä¸€è‡´æ€§&amp;lt;br&amp;gt;Consistency]
B --&amp;gt; C3[éš”ç¦»æ€§&amp;lt;br&amp;gt;Isolation]
B --&amp;gt; C4[æŒä¹…æ€§&amp;lt;br&amp;gt;Durability]
C1 --&amp;gt; D1[Undo Log&amp;lt;br&amp;gt;å›æ»šæ—¥å¿—]
C2 --&amp;gt; D2[åº”ç”¨é€»è¾‘ä¸&amp;lt;br&amp;gt;æ•°æ®åº“çº¦æŸ]
C3 --&amp;gt; D3[é”æœºåˆ¶ä¸&amp;lt;br&amp;gt;MVCC]
C4 --&amp;gt; D4[Redo Log&amp;lt;br&amp;gt;é‡åšæ—¥å¿—]
D1 --&amp;gt; E1[å®ç°å›æ»šæ“ä½œ]
D3 --&amp;gt; E2[æ§åˆ¶å¹¶å‘è®¿é—®]
D4 --&amp;gt; E3[å®ç°å´©æºƒæ¢å¤]
D2 --&amp;gt; E4[è¾¾æˆæ•°æ®ä¸€è‡´æ€§]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬è¯¦ç»†è§£è¯»è¿™å¼ å›¾èƒŒåçš„å„ä¸ªæ ¸å¿ƒæ¨¡å—æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶è¯¦è§£"&gt;âš™ï¸ æ ¸å¿ƒæœºåˆ¶è¯¦è§£
&lt;/h3&gt;&lt;h4 id="-äº‹åŠ¡æ—¥å¿—undo-log-ä¸-redo-log"&gt;ğŸ“œ äº‹åŠ¡æ—¥å¿—ï¼ˆUndo Log ä¸ Redo Logï¼‰
&lt;/h4&gt;&lt;p&gt;äº‹åŠ¡æ—¥å¿—æ˜¯ä¿è¯äº‹åŠ¡ç‰¹æ€§çš„æ ¸å¿ƒæŠ€æœ¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;ï¼šä¸»è¦ç”¨äºæ”¯æŒäº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ã€‚åœ¨ä½ å¯¹æ•°æ®è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼ˆå¦‚ &lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;ï¼‰ä¹‹å‰ï¼ŒInnoDB ä¼šå…ˆå°†æ•°æ®ä¿®æ”¹å‰çš„ç‰ˆæœ¬ä¿¡æ¯è®°å½•åˆ° Undo Log ä¸­ã€‚å¦‚æœäº‹åŠ¡éœ€è¦å›æ»šï¼Œæˆ–è€…æœ‰å…¶ä»–å¹¶å‘äº‹åŠ¡éœ€è¦è¯»å–æ•°æ®çš„æ—§ç‰ˆæœ¬ï¼ˆé€šè¿‡ MVCCï¼‰ï¼Œå°±å¯ä»¥åˆ©ç”¨ Undo Log æ¥é‡å»ºæ—§æ•°æ®ã€‚äº‹åŠ¡æäº¤åï¼Œå¯¹åº”çš„ Undo Log ä¸ä¼šç«‹å³åˆ é™¤ï¼Œè€Œæ˜¯åœ¨ä¸å†è¢«ä»»ä½•äº‹åŠ¡éœ€è¦æ—¶ç”±åå°çº¿ç¨‹æ¸…ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt;ï¼šæ ¸å¿ƒç›®æ ‡æ˜¯ä¿è¯äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;ã€‚å®ƒè®°å½•çš„æ˜¯æ•°æ®é¡µçš„&lt;strong&gt;ç‰©ç†ä¿®æ”¹&lt;/strong&gt;ã€‚é‡‡ç”¨â€œé¢„å†™æ—¥å¿—â€ç­–ç•¥ï¼Œå³åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œé¦–å…ˆå°†äº‹åŠ¡æ‰€åšçš„æ‰€æœ‰ä¿®æ”¹æŒ‰é¡ºåºã€é«˜æ•ˆåœ°å†™å…¥ Redo Log å¹¶è¿›è¡ŒæŒä¹…åŒ–ï¼ˆ&lt;code&gt;fsync&lt;/code&gt;æ“ä½œï¼‰ï¼Œç„¶åæ‰è®¤ä¸ºäº‹åŠ¡æäº¤æˆåŠŸã€‚å³ä½¿ä¹‹åç³»ç»Ÿå‘ç”Ÿå´©æºƒï¼Œåœ¨é‡å¯å InnoDB ä¹Ÿå¯ä»¥æ ¹æ® Redo Log ä¸­çš„è®°å½•ï¼Œå°†å·²ç»æäº¤ä½†å°šæœªå†™å…¥æ•°æ®æ–‡ä»¶çš„æ•°æ®æ¢å¤å›æ¥ï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±ã€‚Redo Log æ˜¯å›ºå®šå¤§å°çš„å¾ªç¯æ–‡ä»¶ï¼Œé‡‡ç”¨é¡ºåºå†™å…¥ï¼Œæ€§èƒ½è¿œé«˜äºéšæœºå†™å…¥æ•°æ®é¡µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-é”æœºåˆ¶ä¸-mvcc"&gt;ğŸ”’ é”æœºåˆ¶ä¸ MVCC
&lt;/h4&gt;&lt;p&gt;å®ƒä»¬å…±åŒä¿éšœäº†äº‹åŠ¡çš„&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ï¼Œæ§åˆ¶å¹¶å‘äº‹åŠ¡ä¹‹é—´çš„ç›¸äº’å½±å“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”æœºåˆ¶&lt;/strong&gt;ï¼šInnoDB å®ç°äº†è¡Œçº§é”ï¼Œå…è®¸ä¸åŒäº‹åŠ¡åŒæ—¶ä¿®æ”¹åŒä¸€å¼ è¡¨ä¸­çš„ä¸åŒè¡Œï¼Œå¤§å¤§æå‡äº†å¹¶å‘æ€§èƒ½ã€‚é”çš„ä¸»è¦ç±»å‹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…±äº«é”&lt;/strong&gt;ï¼šå…è®¸äº‹åŠ¡è¯»å–ä¸€è¡Œæ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ’ä»–é”&lt;/strong&gt;ï¼šå…è®¸äº‹åŠ¡æ›´æ–°æˆ–åˆ é™¤ä¸€è¡Œæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿˜æœ‰&lt;strong&gt;æ„å‘é”&lt;/strong&gt;ç”¨äºåœ¨è¡¨çº§å¿«é€Ÿåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¡Œé”ï¼Œä»¥åŠ&lt;strong&gt;é—´éš™é”&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸´é”®é”&lt;/strong&gt;ï¼Œç”¨äºåœ¨&lt;code&gt;REPEATABLE READ&lt;/code&gt;éš”ç¦»çº§åˆ«ä¸‹é˜²æ­¢å¹»è¯»ç°è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MVCC&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ç§éé˜»å¡è¯»çš„é«˜æ•ˆå¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚å®ƒé€šè¿‡åœ¨æ¯è¡Œæ•°æ®åç»´æŠ¤å¤šä¸ªç‰ˆæœ¬ï¼ˆé€šè¿‡ Undo Log é“¾å®ç°ï¼‰æ¥å®ç°ã€‚å½“ä¸€ä¸ªäº‹åŠ¡å¼€å§‹æ—¶ï¼Œå®ƒä¼šè·å–ä¸€ä¸ªä¸€è‡´æ€§è¯»è§†å›¾ã€‚åœ¨è¯¥äº‹åŠ¡æ‰§è¡ŒæœŸé—´ï¼Œè¯»å–æ•°æ®æ—¶ä¼šæ ¹æ®è¯¥è§†å›¾åˆ¤æ–­æ•°æ®ç‰ˆæœ¬çš„å¯è§æ€§ï¼Œä»è€Œè¯»å–åˆ°ç‰¹å®šæ—¶é—´ç‚¹çš„æ•°æ®å¿«ç…§ï¼Œè€Œéæœ€æ–°æ•°æ®ã€‚è¿™ä½¿å¾—è¯»æ“ä½œä¸ä¼šé˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¹Ÿä¸ä¼šé˜»å¡è¯»æ“ä½œï¼Œæ˜¾è‘—æé«˜äº†æ•°æ®åº“çš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚InnoDB çš„é»˜è®¤éš”ç¦»çº§åˆ« &lt;code&gt;REPEATABLE READ&lt;/code&gt;å°±æ˜¯é€šè¿‡ MVCC å®ç°çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ"&gt;ğŸ”„ äº‹åŠ¡çš„ç”Ÿå‘½å‘¨æœŸ
&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„äº‹åŠ¡æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¼€å§‹äº‹åŠ¡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;START TRANSACTION&lt;/code&gt;æˆ– &lt;code&gt;BEGIN&lt;/code&gt;æ˜¾å¼å¼€å§‹ï¼Œæˆ–è€…é€šè¿‡è®¾ç½® &lt;code&gt;autocommit=0&lt;/code&gt;å…³é—­è‡ªåŠ¨æäº¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ SQL&lt;/strong&gt;ï¼šåœ¨äº‹åŠ¡å†…æ‰§è¡Œä¸€ç³»åˆ— DML æ“ä½œï¼ˆå¦‚ &lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆæ—¥å¿—&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œ DML æ—¶ï¼Œä¼šè®°å½• Undo Log ç”¨äºå›æ»šå’Œ MVCCï¼Œå¹¶å†™å…¥ Redo Log Bufferã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤äº‹åŠ¡&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;COMMIT&lt;/code&gt;ã€‚è¿™æ˜¯å…³é”®é˜¶æ®µï¼Œæ¶‰åŠ&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤&lt;/strong&gt;ä»¥ç¡®ä¿ Redo Log å’Œ Binlogï¼ˆç”¨äºä¸»ä»å¤åˆ¶ï¼‰çš„ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ»šäº‹åŠ¡&lt;/strong&gt;ï¼šå¦‚æœæ‰§è¡Œ &lt;code&gt;ROLLBACK&lt;/code&gt;æˆ–å‘ç”Ÿé”™è¯¯ï¼Œåˆ™åˆ©ç”¨ Undo Log å°†æ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®è·µå»ºè®®ä¸ä¼˜åŒ–"&gt;ğŸ’¡ å®è·µå»ºè®®ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;äº†è§£åŸç†åï¼Œå¦‚ä½•åœ¨å®è·µä¸­ç”¨å¥½äº‹åŠ¡ä¹Ÿå¾ˆé‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆç†è®¾ç½®éš”ç¦»çº§åˆ«&lt;/strong&gt;ï¼šæ ¹æ®ä¸šåŠ¡å¯¹ä¸€è‡´æ€§çš„è¦æ±‚å’Œå¹¶å‘æ€§èƒ½çš„è€ƒé‡é€‰æ‹©åˆé€‚çš„éš”ç¦»çº§åˆ«ã€‚é»˜è®¤çš„ &lt;code&gt;REPEATABLE READ&lt;/code&gt;åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¹³è¡¡çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é•¿äº‹åŠ¡&lt;/strong&gt;ï¼šé•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡ä¼šå ç”¨é”èµ„æºï¼Œå¯èƒ½é˜»å¡å…¶ä»–äº‹åŠ¡ï¼Œåº”å°½é‡ä¿æŒäº‹åŠ¡çŸ­å°ç²¾æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºæŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•&lt;/strong&gt;ï¼šç‰¹åˆ«æ˜¯äºŒçº§ç´¢å¼•ï¼Œé”é€šå¸¸æ˜¯åŠ åœ¨ç´¢å¼•è®°å½•ä¸Šçš„ã€‚è‰¯å¥½çš„ç´¢å¼•è®¾è®¡å¯ä»¥å‡å°‘é”çš„ç«äº‰èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨æ—¥å¿—å†™å…¥é…ç½®&lt;/strong&gt;ï¼š&lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;å‚æ•°é…ç½®äº†äº‹åŠ¡æäº¤æ—¶ Redo Log åˆ·ç›˜ç­–ç•¥ï¼Œéœ€è¦åœ¨æ€§èƒ½å’Œæ•°æ®å®‰å…¨æ€§ä¹‹é—´åšå‡ºæƒè¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒInnoDB çš„äº‹åŠ¡ç®¡ç†æ˜¯ä¸€ä¸ªç”± &lt;strong&gt;Undo Log&lt;/strong&gt;ï¼ˆä¿è¯åŸå­æ€§å’Œ MVCCï¼‰ã€&lt;strong&gt;Redo Log&lt;/strong&gt;ï¼ˆä¿è¯æŒä¹…æ€§ï¼‰ã€&lt;strong&gt;é”æœºåˆ¶&lt;/strong&gt; å’Œ &lt;strong&gt;MVCC&lt;/strong&gt;ï¼ˆå…±åŒä¿è¯éš”ç¦»æ€§ï¼‰ç­‰å¤šç»„ä»¶ååŒå·¥ä½œçš„å¤æ‚è€Œç²¾å¦™çš„ç³»ç»Ÿã€‚ç†è§£è¿™äº›æ ¸å¿ƒæœºåˆ¶ï¼Œå¯¹äºè®¾è®¡å’Œå¼€å‘é«˜å¹¶å‘ã€é«˜å¯é æ€§çš„æ•°æ®åº“åº”ç”¨è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ InnoDB çš„äº‹åŠ¡ç®¡ç†ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="rpc"&gt;RPC
&lt;/h2&gt;&lt;p&gt;åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒRPCå’ŒHTTPæ˜¯ä¸¤ç§æ ¸å¿ƒçš„é€šä¿¡æ–¹å¼ã€‚å®ƒä»¬åœ¨è®¾è®¡å“²å­¦ã€æ€§èƒ½è¡¨ç°å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰ç€æ˜¾è‘—åŒºåˆ«ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬çš„ä¸»è¦å·®å¼‚ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;RPC (è¿œç¨‹è¿‡ç¨‹è°ƒç”¨)&lt;/th&gt;
&lt;th&gt;HTTP (è¶…æ–‡æœ¬ä¼ è¾“åè®®)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨ä¸ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ç§&lt;strong&gt;ç¼–ç¨‹æ¨¡å‹/æ¡†æ¶&lt;/strong&gt;ï¼Œç›®æ ‡æ˜¯é€æ˜åœ°è°ƒç”¨è¿œç¨‹æœåŠ¡ï¼Œå¦‚åŒè°ƒç”¨æœ¬åœ°å‡½æ•°ã€‚&lt;/td&gt;
&lt;td&gt;ä¸€ç§&lt;strong&gt;åº”ç”¨å±‚åè®®&lt;/strong&gt;ï¼Œç›®æ ‡æ˜¯å®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´èµ„æºï¼ˆå¦‚ç½‘é¡µã€APIæ•°æ®ï¼‰çš„æ ‡å‡†äº¤äº’ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šä¿¡èŒƒå¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢å‘&lt;strong&gt;æ–¹æ³•æˆ–å‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;userService.GetUser(id)&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;é¢å‘&lt;strong&gt;èµ„æº&lt;/strong&gt;ï¼Œé€šè¿‡URLå®šä½ï¼Œä½¿ç”¨æ ‡å‡†æ–¹æ³•ï¼ˆGET, POSTç­‰ï¼‰æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ã€‚é€šå¸¸é‡‡ç”¨äºŒè¿›åˆ¶åºåˆ—åŒ–ï¼ˆå¦‚Protobufï¼‰ï¼Œä¼ è¾“ä½“ç§¯å°ï¼Œåºåˆ—åŒ–/ååºåˆ—åŒ–é€Ÿåº¦å¿«ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹è¾ƒä½&lt;/strong&gt;ã€‚é€šå¸¸ä½¿ç”¨æ–‡æœ¬æ ¼å¼ï¼ˆå¦‚JSON/XMLï¼‰ï¼Œåè®®å¤´éƒ¨å¼€é”€å¤§ï¼Œè§£æè€—æ—¶è¾ƒé•¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè®®ä¸è¿æ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯åŸºäºTCPæˆ–HTTP/2ç­‰ã€‚é€šå¸¸&lt;strong&gt;ç»´æŠ¤é•¿è¿æ¥&lt;/strong&gt;ï¼Œå‡å°‘æ¡æ‰‹å¼€é”€ï¼Œæ”¯æŒè¿æ¥å¤ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;åŸºäºHTTPåè®®ã€‚HTTP/1.1å¸¸ä¸ºçŸ­è¿æ¥ï¼Œæœ‰é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼›HTTP/2æœ‰å¤šè·¯å¤ç”¨ç­‰æ”¹è¿›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡æ²»ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¡†æ¶å†…ç½®&lt;/strong&gt;ã€‚é€šå¸¸è‡ªå¸¦æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™çº§ç­‰èƒ½åŠ›ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–å¤–éƒ¨ç»„ä»¶&lt;/strong&gt;ã€‚éœ€å€ŸåŠ©APIç½‘å…³ã€Nginxã€æœåŠ¡ç½‘æ ¼ç­‰å®ç°æ²»ç†åŠŸèƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘ä¸è°ƒè¯•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘æ•ˆç‡é«˜&lt;/strong&gt;ï¼ˆä»£ç ç”Ÿæˆï¼Œè°ƒç”¨ç®€å•ï¼‰ï¼Œ&lt;strong&gt;è°ƒè¯•è¾ƒå¤æ‚&lt;/strong&gt;ï¼ˆéœ€ä¸“ç”¨å·¥å…·ï¼ŒäºŒè¿›åˆ¶æ•°æ®ä¸æ˜“è¯»ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘æ›´çµæ´»&lt;/strong&gt;ï¼ˆç›´æ¥æ“ä½œURLå’Œå‚æ•°ï¼‰ï¼Œ&lt;strong&gt;è°ƒè¯•æ–¹ä¾¿&lt;/strong&gt;ï¼ˆå·¥å…·ä¸°å¯Œï¼Œå¦‚æµè§ˆå™¨ã€Postmanï¼Œæ•°æ®å¯è¯»æ€§å¼ºï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿå†…éƒ¨é€šä¿¡&lt;/strong&gt;ï¼šå¾®æœåŠ¡é—´é«˜é¢‘è°ƒç”¨ã€å¯¹æ€§èƒ½æ•æ„Ÿçš„å†…éƒ¨ç³»ç»Ÿã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯¹å¤–æš´éœ²æœåŠ¡&lt;/strong&gt;ï¼šWeb APIã€ç§»åŠ¨ç«¯æ¥å£ã€éœ€è¦è·¨è¯­è¨€/è·¨å¹³å°é›†æˆçš„å¼€æ”¾å¹³å°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹æ¡†æ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;gRPC, Apache Thrift, Dubbo, Kitexã€‚&lt;/td&gt;
&lt;td&gt;RESTful APIs, GraphQL, åŠå„è¯­è¨€Webæ¡†æ¶ï¼ˆGin, Expressç­‰ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©rpc-è¿˜æ˜¯-http"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼šRPC è¿˜æ˜¯ HTTPï¼Ÿ
&lt;/h3&gt;&lt;p&gt;äº†è§£äº†å®ƒä»¬çš„åŒºåˆ«åï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•é€‰æ‹©å°±æ¸…æ™°äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© RPC çš„æƒ…å†µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ„å»º&lt;strong&gt;å¾®æœåŠ¡æ¶æ„&lt;/strong&gt;ï¼Œå°¤å…¶æ˜¯æœåŠ¡ä¹‹é—´å­˜åœ¨å¤§é‡ã€é«˜é¢‘çš„å†…éƒ¨è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹&lt;strong&gt;æ€§èƒ½ã€å»¶è¿Ÿå’Œååé‡&lt;/strong&gt;æœ‰æé«˜è¦æ±‚ï¼Œä¾‹å¦‚é‡‘èäº¤æ˜“ç³»ç»Ÿã€å®æ—¶é€šä¿¡åç«¯ã€‚&lt;/li&gt;
&lt;li&gt;æŠ€æœ¯æ ˆç›¸å¯¹ç»Ÿä¸€ï¼Œèƒ½å¤Ÿæ¥å—RPCæ¡†æ¶çš„å¼ºçº¦æŸå’Œä»£ç ç”Ÿæˆæµç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© HTTPï¼ˆç‰¹åˆ«æ˜¯ RESTful APIï¼‰çš„æƒ…å†µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;éœ€è¦æä¾›&lt;strong&gt;å…¬å¼€API&lt;/strong&gt;ç»™æµè§ˆå™¨ã€ç§»åŠ¨ç«¯Appæˆ–ç¬¬ä¸‰æ–¹å¼€å‘è€…ï¼Œå¼ºé€šç”¨æ€§æ˜¯é¦–è¦è€ƒè™‘ã€‚&lt;/li&gt;
&lt;li&gt;é¡¹ç›®å¤„äº&lt;strong&gt;å¿«é€ŸåŸå‹é˜¶æ®µ&lt;/strong&gt;æˆ–æ¥å£å˜åŠ¨é¢‘ç¹ï¼ŒHTTPçš„çµæ´»æ€§å’Œæ˜“è°ƒè¯•æ€§èƒ½åŠ é€Ÿå¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿäº¤äº’ä¸é¢‘ç¹ï¼Œå†…éƒ¨å­ç³»ç»Ÿæ•°é‡ä¸å¤šï¼Œå¼•å…¥RPCæ¡†æ¶çš„æ”¶ç›Šä¸å¦‚å…¶å¸¦æ¥çš„å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆæ¶æ„&lt;/strong&gt;ï¼šåœ¨ç°ä»£æ¶æ„ä¸­ï¼Œä¸€ç§éå¸¸æ™®éä¸”æœ‰æ•ˆçš„æ¨¡å¼æ˜¯&lt;strong&gt;æ··åˆä½¿ç”¨&lt;/strong&gt;ä¸¤è€…ã€‚å³å¯¹å¤–éƒ¨æš´éœ²ç®€å•ã€é€šç”¨çš„HTTP RESTful APIï¼Œè€Œåœ¨å†…éƒ¨å¤æ‚çš„å¾®æœåŠ¡ä¹‹é—´ä½¿ç”¨é«˜æ€§èƒ½çš„RPCï¼ˆå¦‚gRPCï¼‰è¿›è¡Œé€šä¿¡ã€‚è¿™æ ·æ—¢ä¿è¯äº†å¤–éƒ¨çš„å…¼å®¹æ€§ï¼Œåˆæ”¶è·äº†å†…éƒ¨çš„é«˜æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„æ€»ç»“èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£RPCå’ŒHTTPã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="redis--mysql"&gt;REDIS &amp;amp; MYSQL
&lt;/h2&gt;&lt;p&gt;äº†è§£å•æœºä¸‹Rediså’ŒMySQLèƒ½æ‰¿å—çš„QPSï¼ˆæ¯ç§’æŸ¥è¯¢æ¬¡æ•°ï¼‰ï¼Œå¯¹äºç³»ç»Ÿè®¾è®¡å’Œæ€§èƒ½è§„åˆ’éå¸¸é‡è¦ã€‚ç”±äºä¸¤è€…è®¾è®¡ç›®æ ‡ä¸åŒï¼Œå…¶æ€§èƒ½ç‰¹å¾å·®å¼‚æ˜¾è‘—ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¯¹å®ƒä»¬çš„å…¸å‹QPSèŒƒå›´å’Œæ ¸å¿ƒå·®å¼‚æœ‰ä¸ªå¿«é€Ÿç›´è§‚çš„æŠŠæ¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Redis&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹å•æœºQPSèŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°ä¸‡è‡³æ•°åä¸‡&lt;/strong&gt;ï¼Œç®€å•å‘½ä»¤å¯è¾¾10ä¸‡ä»¥ä¸Šï¼Œä¼˜åŒ–åç”šè‡³æ›´é«˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡ åƒè‡³ä¸€ä¸¤ä¸‡&lt;/strong&gt;ï¼Œç®€å•ä¸»é”®æŸ¥è¯¢å¯èƒ½è¾¾åˆ°5åƒå·¦å³ï¼Œå¤æ‚æŸ¥è¯¢ä¼šæ˜¾è‘—é™ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºå†…å­˜ï¼Œæ•°æ®æ“ä½œç›´æ¥ä½œç”¨äºå†…å­˜&lt;/td&gt;
&lt;td&gt;åŸºäºç£ç›˜ï¼ˆé…åˆç¼“å†²æ± ï¼‰ï¼Œéœ€æŒä¹…åŒ–åˆ°å­˜å‚¨è®¾å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é”®å€¼å¯¹åŠå¤šç§æ•°æ®ç»“æ„ï¼ˆå¦‚å­—ç¬¦ä¸²ã€å“ˆå¸Œã€åˆ—è¡¨ç­‰ï¼‰ï¼Œç®€å•çµæ´»&lt;/td&gt;
&lt;td&gt;å…³ç³»å‹æ¨¡å‹ï¼Œæ”¯æŒå¤æ‚çš„SQLæŸ¥è¯¢å’Œå…³è”æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸é‡‡ç”¨å•çº¿ç¨‹ï¼ˆæˆ–Workerçº¿ç¨‹å•çº¿ç¨‹å¤„ç†æ ¸å¿ƒé€»è¾‘ï¼‰ï¼Œé¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œé”ç«äº‰&lt;/td&gt;
&lt;td&gt;å¤šçº¿ç¨‹è¿æ¥ï¼Œåº”å¯¹å¤æ‚æŸ¥è¯¢å’Œå¹¶å‘äº‹åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç“¶é¢ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œå¸¦å®½&lt;/strong&gt;ã€&lt;strong&gt;CPU&lt;/strong&gt;ï¼ˆåºåˆ—åŒ–/ååºåˆ—åŒ–ã€å¤æ‚å‘½ä»¤ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç£ç›˜IOPS&lt;/strong&gt;ã€&lt;strong&gt;CPU&lt;/strong&gt;ï¼ˆå¤æ‚æŸ¥è¯¢è®¡ç®—ï¼‰ã€&lt;strong&gt;é”ç«äº‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€§èƒ½å·®å¼‚çš„æ ¹æº"&gt;ğŸ’¡ æ€§èƒ½å·®å¼‚çš„æ ¹æº
&lt;/h3&gt;&lt;p&gt;Rediså’ŒMySQLçš„QPSå·®å¼‚ä¸»è¦æºäºå…¶æ ¹æœ¬æ¶æ„çš„ä¸åŒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ä¸ç£ç›˜çš„å·®è·&lt;/strong&gt;ï¼šRediså°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦æå¿«ã€‚è€ŒMySQLå³ä½¿æœ‰ç¼“å†²æ± ï¼ˆInnoDB Buffer Poolï¼‰ï¼Œæœ€ç»ˆæ•°æ®ä»éœ€æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œç£ç›˜I/Oçš„é€Ÿåº¦è¿œä½äºå†…å­˜æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¨¡å‹çš„å¤æ‚åº¦&lt;/strong&gt;ï¼šRedisçš„æ•°æ®ç»“æ„å’Œæ“ä½œç›¸å¯¹ç®€å•ç›´æ¥ã€‚MySQLåˆ™éœ€è¦è§£æSQLè¯­å¥ã€ç»´æŠ¤ç´¢å¼•ï¼ˆå¦‚B+æ ‘ï¼‰ã€å¤„ç†è¡¨è¿æ¥ã€äº‹åŠ¡ï¼ˆACIDç‰¹æ€§ï¼‰ç­‰ï¼Œè¿™äº›éƒ½ä¼šæ¶ˆè€—å¤§é‡CPUèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹æ¨¡å‹çš„å½±å“&lt;/strong&gt;ï¼šRedisçš„å•çº¿ç¨‹æ¨¡å‹é¿å…äº†å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œé”ç«äº‰å¼€é”€ï¼Œç‰¹åˆ«é€‚åˆé«˜æ€§èƒ½çš„ç®€å•æ“ä½œåœºæ™¯ã€‚MySQLçš„å¤šçº¿ç¨‹æ¨¡å‹è™½ç„¶èƒ½æ›´å¥½åœ°åˆ©ç”¨å¤šæ ¸CPUå¤„ç†å¤æ‚æŸ¥è¯¢å’Œé«˜å¹¶å‘è¿æ¥ï¼Œä½†ä¹Ÿå¼•å…¥äº†é”ç«äº‰ç­‰å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æå‡æ€§èƒ½çš„å¸¸ç”¨ç­–ç•¥"&gt;ğŸ”§ æå‡æ€§èƒ½çš„å¸¸ç”¨ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;å½“å•æœºæ€§èƒ½æˆä¸ºç“¶é¢ˆæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–å’Œæ‰©å±•æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Redisä¼˜åŒ–æ–¹å‘&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨Pipeline&lt;/strong&gt;ï¼šå°†å¤šä¸ªå‘½ä»¤æ‰“åŒ…åä¸€æ¬¡å‘é€ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼Œæ˜¾è‘—æå‡æ‰¹é‡æ“ä½œçš„æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨è¿æ¥æ± &lt;/strong&gt;ï¼šé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ•°æ®ç»“æ„ä¸å‘½ä»¤&lt;/strong&gt;ï¼šé¿å…ä½¿ç”¨è€—æ—¶é•¿çš„å¤æ‚å‘½ä»¤ï¼Œé€‰æ‹©é«˜æ•ˆçš„æ•°æ®ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒä¹…åŒ–ç­–ç•¥æƒè¡¡&lt;/strong&gt;ï¼šæ ¹æ®æ•°æ®å¯é æ€§è¦æ±‚ï¼Œåœ¨RDBå’ŒAOFä¹‹é—´åšå‡ºåˆé€‚é€‰æ‹©ï¼Œå¹³è¡¡æ€§èƒ½ä¸æŒä¹…åŒ–å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤åŒ–ä¸è¯»å†™åˆ†ç¦»&lt;/strong&gt;ï¼šå½“å•å®ä¾‹æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œé€šè¿‡Redis Clusterè¿›è¡Œåˆ†ç‰‡ï¼Œæˆ–é€šè¿‡ä¸»ä»å¤åˆ¶å®ç°è¯»å†™åˆ†ç¦»ï¼Œåˆ†æ•£å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQLä¼˜åŒ–æ–¹å‘&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Schemaä¸SQLä¼˜åŒ–&lt;/strong&gt;ï¼šè®¾è®¡åˆç†çš„è¡¨ç»“æ„ï¼Œå»ºç«‹æœ‰æ•ˆçš„ç´¢å¼•ï¼Œå¹¶ä¼˜åŒ–SQLæŸ¥è¯¢è¯­å¥ï¼Œè¿™æ˜¯æˆæœ¬æœ€ä½ä¸”æ•ˆæœæœ€æ˜¾è‘—çš„æ‰‹æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´å…³é”®å‚æ•°&lt;/strong&gt;ï¼šå¦‚è®¾ç½®åˆé€‚çš„&lt;code&gt;innodb_buffer_pool_size&lt;/code&gt;ï¼ˆç¼“å†²æ± å¤§å°ï¼‰ï¼Œè®©æ›´å¤šæ•°æ®èƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå‡å°‘ç£ç›˜I/Oã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ç¼“å­˜&lt;/strong&gt;ï¼šåœ¨åº”ç”¨å±‚ä¸MySQLä¹‹é—´å¼•å…¥Redisæˆ–Memcachedç­‰ç¼“å­˜ï¼Œæ‹¦æˆªå¤§é‡é‡å¤è¯»è¯·æ±‚ï¼Œè¿™æ˜¯åº”å¯¹é«˜å¹¶å‘è¯»åœºæ™¯çš„å¸¸ç”¨æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åº“åˆ†è¡¨ä¸è¯»å†™åˆ†ç¦»&lt;/strong&gt;ï¼šå½“å•è¡¨æ•°æ®é‡æˆ–å†™å¹¶å‘è¿‡å¤§æ—¶ï¼Œè€ƒè™‘åˆ†åº“åˆ†è¡¨ã€‚é€šè¿‡ä¸»ä»å¤åˆ¶å®ç°è¯»å†™åˆ†ç¦»ï¼Œå°†è¯»è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªä»åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æé†’"&gt;ğŸ’ é‡è¦æé†’
&lt;/h3&gt;&lt;p&gt;è¡¨æ ¼å’Œæ–‡ä¸­ç»™å‡ºçš„QPSæ•°å€¼æ˜¯å…¸å‹çš„å‚è€ƒèŒƒå›´ã€‚&lt;strong&gt;å®é™…æ€§èƒ½ä¼šå—åˆ°ç¡¬ä»¶é…ç½®ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ç±»å‹ï¼‰ã€å…·ä½“å·¥ä½œè´Ÿè½½ï¼ˆè¯»å†™æ¯”ä¾‹ã€æŸ¥è¯¢å¤æ‚åº¦ï¼‰ã€æ•°æ®å¤§å°ä»¥åŠé…ç½®å‚æ•°ç­‰å¤šç§å› ç´ çš„æ˜¾è‘—å½±å“ã€‚&lt;/strong&gt; æœ€å¯é çš„æ–¹å¼æ˜¯åœ¨æœ€æ¥è¿‘ç”Ÿäº§ç¯å¢ƒçš„ç³»ç»Ÿä¸Šè¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¿›è¡ŒæŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="tls-12"&gt;TLS 1.2
&lt;/h2&gt;&lt;p&gt;SSL/TLS æ¡æ‰‹æ˜¯å»ºç«‹å®‰å…¨ç½‘ç»œé€šä¿¡çš„åŸºçŸ³ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹é¢è¿™å¼ å›¾æç»˜äº†å…¶æ ¸å¿ƒæµç¨‹ä¸å…³é”®æ•°æ®äº¤æ¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å®¢æˆ·ç«¯] --&amp;gt; B[&amp;#34;å‘é€ ClientHello&amp;lt;br&amp;gt;æ”¯æŒç‰ˆæœ¬/åŠ å¯†å¥—ä»¶/ClientRandom&amp;#34;]
B --&amp;gt; C[&amp;#34;æœåŠ¡å™¨å¤„ç†&amp;#34;]
C --&amp;gt; D[&amp;#34;å‘é€ ServerHello&amp;lt;br&amp;gt;é€‰å®šç‰ˆæœ¬/åŠ å¯†å¥—ä»¶/ServerRandom&amp;#34;]
D --&amp;gt; E[&amp;#34;å‘é€ Certificate&amp;lt;br&amp;gt;æœåŠ¡å™¨è¯ä¹¦&amp;#34;]
E --&amp;gt; F[&amp;#34;å‘é€ ServerHelloDone&amp;#34;]
F --&amp;gt; G[&amp;#34;å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦&amp;lt;br&amp;gt;ç”Ÿæˆ PreMasterSecret&amp;#34;]
G --&amp;gt; H[&amp;#34;ä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†&amp;lt;br&amp;gt;å‘é€ ClientKeyExchange&amp;#34;]
H --&amp;gt; I[&amp;#34;å®¢æˆ·ç«¯å‘é€&amp;lt;br&amp;gt;ChangeCipherSpec / Finished&amp;#34;]
I --&amp;gt; J[&amp;#34;åŒæ–¹ç”Ÿæˆä¼šè¯å¯†é’¥&amp;lt;br&amp;gt;åŸºäºä¸‰ä¸ªéšæœºæ•°&amp;#34;]
J --&amp;gt; K[&amp;#34;æœåŠ¡å™¨å‘é€&amp;lt;br&amp;gt;ChangeCipherSpec / Finished&amp;#34;]
K --&amp;gt; L[&amp;#34;åŠ å¯†é€šä¿¡å¼€å§‹&amp;#34;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹çš„æ¯ä¸ªç¯èŠ‚éƒ½ä¸ºäº†ç¡®ä¿é€šä¿¡çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’Œèº«ä»½çœŸå®æ€§ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†æ‹†è§£ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id="-åˆ†æ­¥è¯¦è§£æ¡æ‰‹æµç¨‹"&gt;ğŸ” åˆ†æ­¥è¯¦è§£æ¡æ‰‹æµç¨‹
&lt;/h3&gt;&lt;h4 id="1-åå•†å®‰å…¨å‚æ•°"&gt;&lt;strong&gt;1. åå•†å®‰å…¨å‚æ•°&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æ¡æ‰‹å§‹äºå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ &lt;strong&gt;&lt;code&gt;ClientHello&lt;/code&gt;&lt;/strong&gt; æ¶ˆæ¯ï¼ŒåŒ…å«ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒçš„ SSL/TLS ç‰ˆæœ¬&lt;/strong&gt;ï¼šå¦‚ TLS 1.2ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒçš„åŠ å¯†å¥—ä»¶åˆ—è¡¨&lt;/strong&gt;ï¼šæŒ‰ä¼˜å…ˆçº§æ’åˆ—çš„ç®—æ³•ç»„åˆï¼Œä¾‹å¦‚ &lt;code&gt;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯éšæœºæ•°&lt;/strong&gt;ï¼šä¸€ä¸ªç”±å®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²ï¼Œç”¨äºåç»­å¯†é’¥ç”Ÿæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœåŠ¡å™¨å“åº” &lt;strong&gt;&lt;code&gt;ServerHello&lt;/code&gt;&lt;/strong&gt; æ¶ˆæ¯ï¼Œä»ä¸­åšå‡ºé€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†³å®šä½¿ç”¨çš„ TLS ç‰ˆæœ¬å’ŒåŠ å¯†å¥—ä»¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨éšæœºæ•°&lt;/strong&gt;ï¼šæœåŠ¡å™¨ç”Ÿæˆçš„å¦ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-èº«ä»½éªŒè¯ä¸å¯†é’¥äº¤æ¢"&gt;&lt;strong&gt;2. èº«ä»½éªŒè¯ä¸å¯†é’¥äº¤æ¢&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æœåŠ¡å™¨å‘é€å…¶&lt;strong&gt;æ•°å­—è¯ä¹¦&lt;/strong&gt;ï¼ˆ&lt;code&gt;Certificate&lt;/code&gt;æ¶ˆæ¯ï¼‰ä»¥ä¾¿å®¢æˆ·ç«¯éªŒè¯å…¶èº«ä»½ã€‚è¯ä¹¦åŒ…å«æœåŠ¡å™¨çš„å…¬é’¥ç­‰ä¿¡æ¯ã€‚å®¢æˆ·ç«¯ä¼šéªŒè¯è¯ä¹¦çš„ç­¾å‘æœºæ„æ˜¯å¦å—ä¿¡ä»»ã€æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ã€åŸŸåæ˜¯å¦åŒ¹é…ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€æ˜¯å¯†é’¥äº¤æ¢çš„æ ¸å¿ƒæ­¥éª¤ã€‚å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ª &lt;strong&gt;&lt;code&gt;Pre-Master Secret&lt;/code&gt;&lt;/strong&gt;ï¼ˆé¢„ä¸»å¯†é’¥ï¼‰ï¼Œä½¿ç”¨æœåŠ¡å™¨è¯ä¹¦ä¸­çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œé€šè¿‡ &lt;strong&gt;&lt;code&gt;ClientKeyExchange&lt;/code&gt;&lt;/strong&gt; æ¶ˆæ¯å‘é€ç»™æœåŠ¡å™¨ã€‚åªæœ‰æŒæœ‰å¯¹åº”ç§é’¥çš„æœåŠ¡å™¨æ‰èƒ½è§£å¯†å‡º &lt;code&gt;Pre-Master Secret&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id="3-ç”Ÿæˆå¯†é’¥å¹¶å®Œæˆæ¡æ‰‹"&gt;&lt;strong&gt;3. ç”Ÿæˆå¯†é’¥å¹¶å®Œæˆæ¡æ‰‹&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç°åœ¨æ‹¥æœ‰ä¸‰ä¸ªéšæœºæ•°ï¼š&lt;code&gt;ClientRandom&lt;/code&gt;ã€&lt;code&gt;ServerRandom&lt;/code&gt;å’Œ &lt;code&gt;Pre-Master Secret&lt;/code&gt;ã€‚åŒæ–¹ä½¿ç”¨ç›¸åŒçš„ç®—æ³•ï¼Œåˆ©ç”¨è¿™ä¸‰ä¸ªå‚æ•°ç‹¬ç«‹è®¡ç®—ç”Ÿæˆç”¨äºæœ¬æ¬¡ä¼šè¯çš„&lt;strong&gt;ä¸»å¯†é’¥&lt;/strong&gt;ï¼Œè¿›è€Œæ´¾ç”Ÿå‡ºå®é™…çš„&lt;strong&gt;ä¼šè¯å¯†é’¥&lt;/strong&gt;ï¼ˆå¯¹ç§°åŠ å¯†å¯†é’¥ï¼‰ç”¨äºåç»­é€šä¿¡çš„åŠ å¯†å’Œå®Œæ•´æ€§éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;éšåï¼ŒåŒæ–¹å‘é€ &lt;strong&gt;&lt;code&gt;ChangeCipherSpec&lt;/code&gt;&lt;/strong&gt; æ¶ˆæ¯ï¼Œé€šçŸ¥å¯¹æ–¹åç»­é€šä¿¡å°†ä½¿ç”¨åˆšåå•†çš„ä¼šè¯å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚æœ€åï¼Œäº¤æ¢ &lt;strong&gt;&lt;code&gt;Finished&lt;/code&gt;&lt;/strong&gt; æ¶ˆæ¯ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¡ç”¨ä¼šè¯å¯†é’¥åŠ å¯†çš„æ¶ˆæ¯ï¼ŒåŒ…å«ä¹‹å‰æ‰€æœ‰æ¡æ‰‹æ¶ˆæ¯çš„æ‘˜è¦ä»¥ä¾›å¯¹æ–¹éªŒè¯ï¼Œç¡®ä¿æ•´ä¸ªæ¡æ‰‹è¿‡ç¨‹æœªè¢«ç¯¡æ”¹ã€‚éªŒè¯é€šè¿‡åï¼Œå®‰å…¨çš„åŠ å¯†é€šä¿¡é€šé“ä¾¿æ­£å¼å»ºç«‹ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦ç‰¹æ€§ä¸ä¼˜åŒ–"&gt;âš¡ï¸ é‡è¦ç‰¹æ€§ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼šè¯æ¢å¤&lt;/strong&gt;ï¼šä¸ºæå‡æ•ˆç‡ï¼Œè‹¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ›¾å»ºç«‹è¿æ¥ï¼Œå¯é€šè¿‡ &lt;strong&gt;&lt;code&gt;Session ID&lt;/code&gt;&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;Session Ticket&lt;/code&gt;&lt;/strong&gt; æœºåˆ¶æ¢å¤ä¼šè¯ï¼Œè·³è¿‡å®Œæ•´çš„å¯†é’¥äº¤æ¢ç­‰æ­¥éª¤ï¼Œå¤§å¹…å‡å°‘å»¶è¿Ÿå’Œè®¡ç®—å¼€é”€ï¼Œå®ç°â€œç®€åŒ–æ¡æ‰‹â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰å‘ä¿å¯†&lt;/strong&gt;ï¼šè‹¥å¯†é’¥äº¤æ¢ä½¿ç”¨åŸºäºè¿ªè²-èµ«å°”æ›¼çš„ç®—æ³•ï¼ˆå¦‚ DHE æˆ– ECDHEï¼‰ï¼Œå³ä½¿æœåŠ¡å™¨ç§é’¥æ—¥åæ³„éœ²ï¼Œä¹Ÿæ— æ³•è§£å¯†è¿‡å¾€çš„é€šä¿¡å½•éŸ³ï¼Œè¿™æä¾›äº†&lt;strong&gt;å‰å‘ä¿å¯†&lt;/strong&gt;æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒå‘è®¤è¯&lt;/strong&gt;ï¼šé™¤æœåŠ¡å™¨è®¤è¯å®¢æˆ·ç«¯å¤–ï¼ŒæŸäº›åœºæ™¯ï¼ˆå¦‚ä¼ä¸šå†…éƒ¨ç³»ç»Ÿï¼‰å¯èƒ½éœ€è¦å®¢æˆ·ç«¯ä¹Ÿæä¾›è¯ä¹¦ä¾›æœåŠ¡å™¨éªŒè¯ï¼Œå³&lt;strong&gt;åŒå‘è®¤è¯&lt;/strong&gt;ï¼ˆæˆ–å®¢æˆ·ç«¯è®¤è¯ï¼‰ã€‚è¿™åœ¨å¸¸è§„æµç¨‹ä¸­æ˜¯å¯é€‰çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-tls-13-çš„æ”¹è¿›"&gt;ğŸ”„ TLS 1.3 çš„æ”¹è¿›
&lt;/h3&gt;&lt;p&gt;è¾ƒæ–°çš„ TLS 1.3 åè®®å¯¹æ¡æ‰‹åšäº†å¤§å¹…ä¼˜åŒ–ï¼Œé»˜è®¤æ”¯æŒå‰å‘ä¿å¯†çš„å¯†é’¥äº¤æ¢ç®—æ³•ï¼Œå¹¶é€šè¿‡å°†å¯†é’¥äº¤æ¢å’Œèº«ä»½éªŒè¯æ•°æ®æ•´åˆåˆ°åˆå§‹çš„ &lt;code&gt;ClientHello&lt;/code&gt;å’Œ &lt;code&gt;ServerHello&lt;/code&gt;æ¶ˆæ¯ä¸­ï¼Œ&lt;strong&gt;å°†å®Œæ•´çš„æ¡æ‰‹æ‰€éœ€å¾€è¿”æ¬¡æ•°ä» 2-RTT å‡å°‘åˆ° 1-RTT&lt;/strong&gt;ã€‚åœ¨ä¼šè¯æ¢å¤æ—¶ç”šè‡³å¯å®ç° &lt;strong&gt;0-RTT&lt;/strong&gt;ï¼Œè¿›ä¸€æ­¥é™ä½å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒå®‰å…¨ä»·å€¼"&gt;ğŸ’ æ ¸å¿ƒå®‰å…¨ä»·å€¼
&lt;/h3&gt;&lt;p&gt;SSL/TLS æ¡æ‰‹è¿‡ç¨‹é€šè¿‡éå¯¹ç§°åŠ å¯†å®‰å…¨äº¤æ¢å¯¹ç§°å¯†é’¥çš„ç§å­ï¼ˆ&lt;code&gt;Pre-Master Secret&lt;/code&gt;ï¼‰ï¼Œç»“åˆæ•°å­—è¯ä¹¦éªŒè¯èº«ä»½ï¼Œæœ€ç»ˆåˆ©ç”¨é«˜æ•ˆä¸”å®‰å…¨çš„å¯¹ç§°åŠ å¯†ä¼šè¯å¯†é’¥ï¼Œç¡®ä¿äº†ç½‘ç»œé€šä¿¡çš„&lt;strong&gt;æœºå¯†æ€§&lt;/strong&gt;ï¼ˆåŠ å¯†ï¼‰ã€&lt;strong&gt;å®Œæ•´æ€§&lt;/strong&gt;ï¼ˆé˜²ç¯¡æ”¹ï¼‰å’Œ&lt;strong&gt;èº«ä»½è®¤è¯&lt;/strong&gt;ï¼ˆé˜²å†’å……ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ SSL/TLS æ¡æ‰‹ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç‰ˆæœ¬ï¼ˆå¦‚ TLS 1.3 çš„ 0-RTTï¼‰æˆ–ç‰¹å®šåŠ å¯†å¥—ä»¶çš„ç»†èŠ‚æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="time_wait"&gt;TIME_WAIT
&lt;/h2&gt;&lt;p&gt;TCPè¿æ¥å…³é—­æ—¶ï¼Œæœ€åä¸€æ¬¡ACKä¸¢å¤±ç¡®å®ä¼šå½±å“è¿æ¥çš„æ­£å¸¸ç»ˆæ­¢ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ä¸»åŠ¨å…³é—­æ–¹ä¼šè¿›å…¥&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ç­‰å¾…ï¼Œè€Œè¢«åŠ¨å…³é—­æ–¹å°†å› æ”¶ä¸åˆ°ç¡®è®¤è€Œé‡å‘FINæŠ¥æ–‡&lt;/strong&gt;ã€‚ä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†ç¬¬å››æ¬¡æŒ¥æ‰‹ACKä¸¢å¤±åçš„æ ¸å¿ƒå¤„ç†é€»è¾‘ä¸çŠ¶æ€å˜è¿ï¼Œä½ å¯ä»¥ç»“åˆå®ƒæ¥ç†è§£ä¸‹æ–‡çš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[è¢«åŠ¨å…³é—­æ–¹å‘é€FINå&amp;lt;br&amp;gt;è¿›å…¥LAST_ACKçŠ¶æ€] --&amp;gt; B[ä¸»åŠ¨å…³é—­æ–¹å‘é€ACK&amp;lt;br&amp;gt;è¿›å…¥TIME_WAITçŠ¶æ€]
B --&amp;gt; C{æœ€åä¸€ä¸ªACKæ˜¯å¦ä¸¢å¤±?}
C -- æœªä¸¢å¤± --&amp;gt; D[è¿æ¥æ­£å¸¸å…³é—­]
C -- ä¸¢å¤± --&amp;gt; E[è¢«åŠ¨å…³é—­æ–¹æœªæ”¶åˆ°ACK&amp;lt;br&amp;gt;è§¦å‘è¶…æ—¶é‡ä¼ æœºåˆ¶]
E --&amp;gt; F[é‡ä¼ FINæŠ¥æ–‡]
F --&amp;gt; G[ä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ°é‡ä¼ çš„FIN&amp;lt;br&amp;gt;é‡å‘ACKå¹¶é‡ç½®2MSLè®¡æ—¶å™¨]
G --&amp;gt; H[è¢«åŠ¨å…³é—­æ–¹æ”¶åˆ°ACK&amp;lt;br&amp;gt;è¿›å…¥CLOSEDçŠ¶æ€]
H --&amp;gt; I[2MSLè¶…æ—¶å&amp;lt;br&amp;gt;ä¸»åŠ¨å…³é—­æ–¹è¿›å…¥CLOSEDçŠ¶æ€]
F -- é‡ä¼ è¾¾åˆ°ä¸Šé™åä»æœªæ”¶åˆ°ACK --&amp;gt; J[è¢«åŠ¨å…³é—­æ–¹æ”¾å¼ƒç­‰å¾…&amp;lt;br&amp;gt;å•æ–¹é¢å…³é—­è¿æ¥]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-è¯¦è§£ackä¸¢å¤±åçš„å¤„ç†"&gt;ğŸ” è¯¦è§£ACKä¸¢å¤±åçš„å¤„ç†
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æ˜¯é’ˆå¯¹ä¸Šè¿°æµç¨‹ä¸­å…³é”®ç¯èŠ‚çš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¢«åŠ¨å…³é—­æ–¹çš„é‡ä¼ æœºåˆ¶&lt;/strong&gt;ï¼šå½“è¢«åŠ¨å…³é—­æ–¹ï¼ˆå¦‚æœåŠ¡å™¨ï¼‰å‘é€FINæŠ¥æ–‡å¹¶è¿›å…¥&lt;code&gt;LAST_ACK&lt;/code&gt;çŠ¶æ€åï¼Œå¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°é¢„æœŸçš„æœ€åä¸€ä¸ªACKç¡®è®¤ï¼Œå®ƒä¼šè§¦å‘&lt;strong&gt;è¶…æ—¶é‡ä¼ æœºåˆ¶&lt;/strong&gt;ï¼Œé‡æ–°å‘é€FINæŠ¥æ–‡ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªé‡ä¼ æ¬¡æ•°é»˜è®¤é€šå¸¸ä¸º5æ¬¡ï¼Œå…·ä½“è¡Œä¸ºå¯ç”±ç³»ç»Ÿå‚æ•°æ§åˆ¶ã€‚å¦‚æœé‡ä¼ å¤šæ¬¡åä¾ç„¶æ²¡æœ‰æ”¶åˆ°ACKï¼Œè¢«åŠ¨å…³é—­æ–¹æœ€ç»ˆä¼šæ”¾å¼ƒç­‰å¾…ï¼Œ&lt;strong&gt;å•æ–¹é¢å…³é—­è¿æ¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åŠ¨å…³é—­æ–¹çš„è§’è‰²ä¸&lt;code&gt;TIME_WAIT&lt;/code&gt;&lt;/strong&gt;ï¼šä¸»åŠ¨å…³é—­æ–¹ï¼ˆå¦‚å®¢æˆ·ç«¯ï¼‰åœ¨å‘é€å®Œæœ€åä¸€ä¸ªACKåï¼Œä¾¿ä¼šè¿›å…¥**&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€**ï¼Œå¹¶å¼€å¯ä¸€ä¸ªæ—¶é•¿&lt;strong&gt;ä¸º2MSLï¼ˆMaximum Segment Lifetimeï¼ŒæŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼‰çš„è®¡æ—¶å™¨&lt;/strong&gt;ã€‚&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€æœ‰ä¸¤ä¸ªå…³é”®ä½œç”¨ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯é åœ°ç»ˆæ­¢TCPè¿æ¥&lt;/strong&gt;ï¼šç¡®ä¿è¢«åŠ¨å…³é—­æ–¹èƒ½å¤Ÿæ­£å¸¸å…³é—­ã€‚å¦‚æœä¸»åŠ¨å…³é—­æ–¹å‘å‡ºçš„æœ€åä¸€ä¸ªACKä¸¢å¤±ï¼Œè¢«åŠ¨å…³é—­æ–¹ä¼šå› è¶…æ—¶è€Œé‡ä¼ FINæŠ¥æ–‡ã€‚æ­¤æ—¶ä»åœ¨&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ä¸‹çš„ä¸»åŠ¨å…³é—­æ–¹åœ¨æ”¶åˆ°è¿™ä¸ªé‡ä¼ çš„FINæŠ¥æ–‡åï¼Œä¼š&lt;strong&gt;é‡æ–°å‘é€ACK&lt;/strong&gt;ï¼Œå¹¶é‡ç½®2MSLè®¡æ—¶å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®©æ—§è¿æ¥çš„æŠ¥æ–‡åœ¨ç½‘ç»œä¸­æ¶ˆé€&lt;/strong&gt;ï¼šç­‰å¾…æ—¶é•¿2MSLè¶³ä»¥è®©æœ¬æ¬¡è¿æ¥äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡åœ¨ç½‘ç»œä¸­æ¶ˆå¤±ï¼Œä»è€Œé¿å…è¿™äº›é™ˆæ—§çš„æŠ¥æ–‡è¢«ä¹‹åæ–°å»ºçš„ã€ç›¸åŒå››å…ƒç»„ï¼ˆæºIPã€æºç«¯å£ã€ç›®çš„IPã€ç›®çš„ç«¯å£ï¼‰çš„è¿æ¥é”™è¯¯æ¥æ”¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸åŒåœºæ™¯ä¸‹çš„ç»“æœ"&gt;âš™ï¸ ä¸åŒåœºæ™¯ä¸‹çš„ç»“æœ
&lt;/h3&gt;&lt;p&gt;åŸºäºä¸Šè¿°æœºåˆ¶ï¼Œæœ€åä¸€æ¬¡ACKä¸¢å¤±å¯èƒ½å¯¼è‡´ä»¥ä¸‹å‡ ç§ç»“æœï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¸è§„æƒ…å†µï¼šè¿æ¥æ­£å¸¸å…³é—­&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„æƒ…å†µã€‚åªè¦ä¸»åŠ¨å…³é—­æ–¹å¤„äº&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ä¸‹ï¼Œå°±èƒ½å¤„ç†è¢«åŠ¨å…³é—­æ–¹é‡ä¼ çš„FINæŠ¥æ–‡å¹¶é‡æ–°å‘é€ACKã€‚è¢«åŠ¨å…³é—­æ–¹æœ€ç»ˆèƒ½æ”¶åˆ°ACKå¹¶è¿›å…¥&lt;code&gt;CLOSED&lt;/code&gt;çŠ¶æ€ï¼Œè¿æ¥å¾—ä»¥æ­£å¸¸å…³é—­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸»åŠ¨å…³é—­æ–¹å·²ä¸åœ¨&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸»åŠ¨å…³é—­æ–¹åœ¨è¢«åŠ¨å…³é—­æ–¹é‡ä¼ FINä¹‹å‰å°±å·²åº¦è¿‡&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€å¹¶å®Œå…¨å…³é—­äº†è¿æ¥ï¼ˆä¾‹å¦‚ç³»ç»Ÿé…ç½®äº†ç¼©çŸ­æˆ–è·³è¿‡&lt;code&gt;TIME_WAIT&lt;/code&gt;ï¼‰ï¼Œé‚£ä¹ˆå½“å®ƒæ”¶åˆ°é‡ä¼ çš„FINæŠ¥æ–‡æ—¶ï¼Œç”±äºè¯¥è¿æ¥å·²ä¸å­˜åœ¨ï¼Œå®ƒä¼šå›å¤ä¸€ä¸ª&lt;strong&gt;RST (Reset) æŠ¥æ–‡&lt;/strong&gt;ã€‚è¢«åŠ¨å…³é—­æ–¹æ”¶åˆ°RSTæŠ¥æ–‡åï¼Œä¼šå¾—çŸ¥è¿æ¥å‡ºç°é”™è¯¯ï¼Œå¹¶&lt;strong&gt;ä¸­æ­¢è¿æ¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡ä¼ å¤±è´¥ï¼šè¿æ¥é‡ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç½‘ç»œé—®é¢˜ä¸¥é‡ï¼Œå¯¼è‡´è¢«åŠ¨å…³é—­æ–¹å¤šæ¬¡é‡ä¼ FINåå§‹ç»ˆæ”¶ä¸åˆ°ACKæˆ–RSTï¼Œè¾¾åˆ°é‡ä¼ æ¬¡æ•°ä¸Šé™åï¼Œå®ƒä¼š&lt;strong&gt;æ”¾å¼ƒé‡ä¼ å¹¶å•æ–¹é¢å…³é—­è¿æ¥&lt;/strong&gt;ï¼Œé‡Šæ”¾ç›¸å…³èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒTCPåè®®é€šè¿‡è¶…æ—¶é‡ä¼ ã€&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ç­‰æœºåˆ¶ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†ç¬¬å››æ¬¡æŒ¥æ‰‹ACKä¸¢å¤±çš„æƒ…å†µï¼Œ&lt;strong&gt;åŸºæœ¬ä¿è¯äº†è¿æ¥èƒ½å¤Ÿæ­£å¸¸å…³é—­&lt;/strong&gt;ã€‚&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€æ˜¯TCPå¯é æ€§çš„é‡è¦ä½“ç°ä¹‹ä¸€ï¼Œè™½ç„¶æœ‰æ—¶å¯èƒ½å¸¦æ¥ç«¯å£å ç”¨ç­‰é—®é¢˜ï¼Œä½†å…¶è®¾è®¡åˆè¡·æ˜¯å¿…è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£TCPè¿æ¥å…³é—­çš„ç»†èŠ‚ã€‚å¦‚æœä½ å¯¹&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€çš„ä¼˜åŒ–æˆ–è€…å…¶å®ƒç½‘ç»œé—®é¢˜æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å››æ¬¡æŒ¥æ‰‹"&gt;å››æ¬¡æŒ¥æ‰‹
&lt;/h2&gt;&lt;p&gt;TCP è¿æ¥ç»ˆæ­¢æ—¶çš„çŠ¶æ€æµè½¬ï¼Œæ˜¯ç†è§£ç½‘ç»œé€šä¿¡å¯é æ€§çš„å…³é”®ã€‚ä¸‹é¢è¿™å¼ çŠ¶æ€æœºæµç¨‹å›¾ï¼Œå¯ä»¥å¸®ä½ ç›´è§‚åœ°æŠŠææ•´ä¸ªå…³é—­è¿‡ç¨‹ä¸­ï¼Œä¸»åŠ¨å…³é—­æ–¹ä¸è¢«åŠ¨å…³é—­æ–¹çš„çŠ¶æ€å¦‚ä½•ååŒå˜åŒ–ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ESTABLISHED&amp;lt;br&amp;gt;ï¼ˆè¿æ¥å·²å»ºç«‹ï¼‰] --&amp;gt; B[FIN_WAIT_1&amp;lt;br&amp;gt;ï¼ˆä¸»åŠ¨æ–¹å‘é€FINåï¼‰]
B -- æ”¶åˆ°å¯¹FINçš„ACK --&amp;gt; C[FIN_WAIT_2&amp;lt;br&amp;gt;ï¼ˆç­‰å¾…å¯¹ç«¯FINï¼‰]
B -- åŒæ—¶æ”¶åˆ°ACKä¸FIN --&amp;gt; D[CLOSING&amp;lt;br&amp;gt;ï¼ˆåŒæ–¹åŒæ—¶å…³é—­ï¼‰]
C -- æ”¶åˆ°å¯¹ç«¯FIN --&amp;gt; E[TIME_WAIT&amp;lt;br&amp;gt;ï¼ˆå‘é€æœ€åACKåï¼‰]
D -- æ”¶åˆ°ACK --&amp;gt; E
E -- ç­‰å¾…2MSLè¶…æ—¶ --&amp;gt; F[CLOSED&amp;lt;br&amp;gt;ï¼ˆè¿æ¥å®Œå…¨å…³é—­ï¼‰]
G[ESTABLISHED&amp;lt;br&amp;gt;ï¼ˆè¿æ¥å·²å»ºç«‹ï¼‰] -- æ”¶åˆ°å¯¹ç«¯FIN --&amp;gt; H[CLOSE_WAIT&amp;lt;br&amp;gt;ï¼ˆè¢«åŠ¨å…³é—­æ–¹ï¼‰]
H -- åº”ç”¨å±‚è°ƒç”¨close()å‘é€FIN --&amp;gt; I[LAST_ACK&amp;lt;br&amp;gt;ï¼ˆç­‰å¾…æœ€åACKï¼‰]
I -- æ”¶åˆ°æœ€åACK --&amp;gt; F
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è§£ææ¯ä¸ªçŠ¶æ€ã€‚&lt;/p&gt;
&lt;h3 id="-çŠ¶æ€è¯¦è§£"&gt;ğŸ” çŠ¶æ€è¯¦è§£
&lt;/h3&gt;&lt;h4 id="ä¸»åŠ¨å…³é—­æ–¹çš„çŠ¶æ€åºåˆ—"&gt;&lt;strong&gt;ä¸»åŠ¨å…³é—­æ–¹çš„çŠ¶æ€åºåˆ—&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ä¸»åŠ¨å‘èµ·å…³é—­çš„ä¸€æ–¹ï¼ˆä¾‹å¦‚å®¢æˆ·ç«¯ï¼‰ï¼Œå…¶çŠ¶æ€å˜è¿éµå¾ªå›¾ä¸­å·¦ä¾§è·¯å¾„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FIN_WAIT_1&lt;/strong&gt;ï¼šå½“åº”ç”¨ç¨‹åºè°ƒç”¨ &lt;code&gt;close()&lt;/code&gt;åï¼Œä¸»åŠ¨æ–¹å‘å‡º &lt;code&gt;FIN&lt;/code&gt;æŠ¥æ–‡ï¼Œéšå³è¿›å…¥æ­¤çŠ¶æ€ï¼Œç­‰å¾…å¯¹æ–¹å¯¹ &lt;code&gt;FIN&lt;/code&gt;çš„ç¡®è®¤ï¼ˆACKï¼‰ã€‚è¿™æ˜¯å…³é—­æµç¨‹çš„èµ·ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FIN_WAIT_2&lt;/strong&gt;ï¼šåœ¨æ”¶åˆ°å¯¹æ–¹å‘æ¥çš„ç¬¬ä¸€ä¸ª &lt;code&gt;ACK&lt;/code&gt;ç¡®è®¤æŠ¥æ–‡åï¼Œä¸»åŠ¨æ–¹è¿›å…¥æ­¤çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œ&lt;strong&gt;ä»ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨æ–¹çš„å•å‘è¿æ¥å·²å…³é—­&lt;/strong&gt;ï¼Œä¸»åŠ¨æ–¹ä¸å†å‘é€ä»»ä½•æ•°æ®ï¼Œä½†ä»ç„¶èƒ½å¤Ÿæ¥æ”¶æ¥è‡ªå¯¹æ–¹çš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªç­‰å¾…å¯¹æ–¹å…³é—­è¿æ¥çš„ä¸­é—´çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TIME_WAIT&lt;/strong&gt;ï¼šå½“æ”¶åˆ°è¢«åŠ¨æ–¹å‘æ¥çš„ &lt;code&gt;FIN&lt;/code&gt;æŠ¥æ–‡åï¼Œä¸»åŠ¨æ–¹ä¼šç«‹å³å‘é€æœ€åä¸€ä¸ª &lt;code&gt;ACK&lt;/code&gt;ï¼Œç„¶åè¿›å…¥è‡³å…³é‡è¦çš„ &lt;strong&gt;&lt;code&gt;TIME_WAIT&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ã€‚æ­¤çŠ¶æ€å°†æŒç»­ &lt;strong&gt;2MSL&lt;/strong&gt; çš„æ—¶é—´ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MSL&lt;/strong&gt; æ˜¯æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œ&lt;code&gt;2MSL&lt;/code&gt;çš„ç­‰å¾…ç¡®ä¿äº†å³ä½¿æœ€åä¸€ä¸ª &lt;code&gt;ACK&lt;/code&gt;ä¸¢å¤±ï¼Œè¢«åŠ¨æ–¹é‡ä¼ çš„ &lt;code&gt;FIN&lt;/code&gt;ä¹Ÿèƒ½è¢«å†æ¬¡å“åº”ï¼Œä»è€Œä¿è¯è¢«åŠ¨æ–¹èƒ½å¯é åœ°è¿›å…¥ &lt;code&gt;CLOSED&lt;/code&gt;çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶ï¼Œè¿™æ®µç­‰å¾…æ—¶é—´ä¹Ÿç¡®ä¿äº†æœ¬æ¬¡è¿æ¥äº§ç”Ÿçš„æ‰€æœ‰å»¶è¿ŸæŠ¥æ–‡éƒ½åœ¨ç½‘ç»œä¸­æ¶ˆæ•£ï¼Œé¿å…äº†å®ƒä»¬å¹²æ‰°æœªæ¥å¯èƒ½ä½¿ç”¨ç›¸åŒIPå’Œç«¯å£çš„æ–°è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªæœ‰ä¸»åŠ¨å…³é—­è¿æ¥çš„ä¸€æ–¹æ‰ä¼šç»å†æ­¤çŠ¶æ€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="è¢«åŠ¨å…³é—­æ–¹çš„çŠ¶æ€åºåˆ—"&gt;&lt;strong&gt;è¢«åŠ¨å…³é—­æ–¹çš„çŠ¶æ€åºåˆ—&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¢«åŠ¨æ¥æ”¶å…³é—­è¯·æ±‚çš„ä¸€æ–¹ï¼ˆä¾‹å¦‚æœåŠ¡ç«¯ï¼‰ï¼Œå…¶çŠ¶æ€å˜è¿éµå¾ªå›¾ä¸­å³ä¾§è·¯å¾„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CLOSE_WAIT&lt;/strong&gt;ï¼šå½“è¢«åŠ¨æ–¹æ”¶åˆ°ä¸»åŠ¨æ–¹å‘æ¥çš„ &lt;code&gt;FIN&lt;/code&gt;æŠ¥æ–‡åï¼Œä¼šç«‹å³å›åº”ä¸€ä¸ª &lt;code&gt;ACK&lt;/code&gt;ï¼Œå¹¶è¿›å…¥æ­¤çŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€çš„æ„ä¹‰åœ¨äºï¼š&lt;strong&gt;é€šçŸ¥ä¸Šå±‚åº”ç”¨ç¨‹åºï¼Œå¯¹ç«¯å·²ç»å…³é—­äº†æ•°æ®å‘é€&lt;/strong&gt;ã€‚åº”ç”¨ç¨‹åºå¾—çŸ¥åï¼Œåº”å°½å¿«å®Œæˆè‡ªèº«çš„æ•°æ®å‘é€ï¼Œå¹¶è°ƒç”¨ &lt;code&gt;close()&lt;/code&gt;æ¥å…³é—­è¿æ¥ã€‚å¦‚æœåº”ç”¨ä¸­å­˜åœ¨è¿æ¥æ³„æ¼ï¼Œå¯èƒ½ä¼šè§‚å¯Ÿåˆ°å¤§é‡çš„ &lt;code&gt;CLOSE_WAIT&lt;/code&gt;çŠ¶æ€è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LAST_ACK&lt;/strong&gt;ï¼šå½“è¢«åŠ¨æ–¹çš„åº”ç”¨ç¨‹åºè°ƒç”¨ &lt;code&gt;close()&lt;/code&gt;å¹¶å‘å‡ºè‡ªå·±çš„ &lt;code&gt;FIN&lt;/code&gt;æŠ¥æ–‡åï¼Œè¿›å…¥æ­¤çŠ¶æ€ã€‚å®ƒç­‰å¾…ä¸»åŠ¨æ–¹å¯¹å®ƒçš„ &lt;code&gt;FIN&lt;/code&gt;æŠ¥æ–‡çš„æœ€ç»ˆç¡®è®¤ï¼ˆæœ€åä¸€ä¸ª &lt;code&gt;ACK&lt;/code&gt;ï¼‰ã€‚ä¸€æ—¦æ”¶åˆ°è¿™ä¸ª &lt;code&gt;ACK&lt;/code&gt;ï¼Œè¢«åŠ¨æ–¹å°±ç›´æ¥è¿›å…¥ &lt;code&gt;CLOSED&lt;/code&gt;çŠ¶æ€ï¼Œè¿æ¥å…³é—­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="å…¶ä»–ç‰¹æ®ŠçŠ¶æ€"&gt;&lt;strong&gt;å…¶ä»–ç‰¹æ®ŠçŠ¶æ€&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;åœ¨æµç¨‹å›¾ä¸­æœªç›´æ¥ä½“ç°ï¼Œä½†å€¼å¾—æ³¨æ„çš„ç‰¹æ®ŠçŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CLOSING&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ç§ç›¸å¯¹ç½•è§çš„çŠ¶æ€ï¼Œè¡¨ç¤º&lt;strong&gt;åŒæ–¹åŒæ—¶å°è¯•å…³é—­è¿æ¥&lt;/strong&gt;ã€‚å½“åŒæ–¹éƒ½å‘é€äº† &lt;code&gt;FIN&lt;/code&gt;æŠ¥æ–‡ï¼Œä½†åˆéƒ½æ²¡æ”¶åˆ°å¯¹æ–¹çš„ &lt;code&gt;ACK&lt;/code&gt;ç¡®è®¤æ—¶ï¼Œå°±ä¼šè¿›å…¥æ­¤çŠ¶æ€ã€‚å½“æ”¶åˆ°å¯¹æ–¹çš„ &lt;code&gt;ACK&lt;/code&gt;åï¼Œä¼šç¦»å¼€ &lt;code&gt;CLOSING&lt;/code&gt;çŠ¶æ€å¹¶è¿›å…¥ &lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç†è§£å…³é”®è®¾è®¡"&gt;ğŸ’¡ ç†è§£å…³é”®è®¾è®¡
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºä½•æ˜¯â€œå››æ¬¡â€æŒ¥æ‰‹ï¼Ÿ&lt;/strong&gt; è¿™æ˜¯å› ä¸ºTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šç‹¬ç«‹ä¼ è¾“ã€‚å› æ­¤ï¼Œæ¯ä¸ªæ–¹å‘éƒ½éœ€è¦å•ç‹¬å…³é—­ã€‚ç¬¬äºŒæ¬¡æŒ¥æ‰‹åï¼Œè¿æ¥å¤„äº&lt;strong&gt;åŠå…³é—­&lt;/strong&gt;çŠ¶æ€ï¼Œè¢«åŠ¨æ–¹å¯èƒ½è¿˜æœ‰æ•°æ®éœ€è¦å‘é€ï¼Œè¿™å°±å°† &lt;code&gt;ACK&lt;/code&gt;å’Œ &lt;code&gt;FIN&lt;/code&gt;çš„å‘é€åˆ†æˆäº†ä¸¤æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;TIME_WAIT&lt;/code&gt;çš„ä»·å€¼&lt;/strong&gt;ï¼šè¿™ä¸ªçŠ¶æ€æ˜¯TCPå¯é æ€§è®¾è®¡çš„é‡è¦ä½“ç°ã€‚å®ƒè‚©è´Ÿç€ä¸¤ä¸ªæ ¸å¿ƒä½¿å‘½ï¼š&lt;strong&gt;å¯é åœ°ç»ˆæ­¢è¿æ¥&lt;/strong&gt;ï¼ˆé˜²æ­¢æœ€åçš„ &lt;code&gt;ACK&lt;/code&gt;ä¸¢å¤±ï¼‰å’Œ&lt;strong&gt;è®©æ—§è¿æ¥çš„æŠ¥æ–‡åœ¨ç½‘ç»œä¸­å¤±æ•ˆ&lt;/strong&gt;ï¼ˆé˜²æ­¢è¯¯å¯¼æ–°è¿æ¥ï¼‰ã€‚è™½ç„¶æœ‰æ—¶ä¸ºäº†å¿«é€Ÿé‡Šæ”¾ç«¯å£èµ„æºä¼šå°è¯•ä¼˜åŒ–æ­¤çŠ¶æ€ï¼Œä½†éœ€è°¨æ…è¡Œäº‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£æèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£TCPå…³é—­è¿æ¥æ—¶çš„çŠ¶æ€å˜åŒ–ã€‚å¦‚æœä½ å¯¹ç‰¹å®šçŠ¶æ€çš„é—®é¢˜æ’æŸ¥æˆ–è°ƒä¼˜æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="kmp"&gt;KMP
&lt;/h2&gt;&lt;p&gt;KMPç®—æ³•æ˜¯ä¸€ç§é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œå®ƒé€šè¿‡æ™ºèƒ½åœ°åˆ©ç”¨åŒ¹é…å¤±è´¥æ—¶çš„ä¿¡æ¯ï¼Œé¿å…äº†ä¸»ä¸²ï¼ˆå¾…æœç´¢çš„æ–‡æœ¬ï¼‰æŒ‡é’ˆçš„å›æº¯ï¼Œä»è€Œå°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–è‡³ O(n+m)ï¼Œå…¶ä¸­ n æ˜¯ä¸»ä¸²é•¿åº¦ï¼Œm æ˜¯æ¨¡å¼ä¸²é•¿åº¦ ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ¯” KMP ç®—æ³•å’Œæš´åŠ›åŒ¹é…ç®—æ³•çš„è¡¨æ ¼ï¼Œå¸®åŠ©ä½ ç›´è§‚ç†è§£å…¶æ ¸å¿ƒæ”¹è¿›ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æš´åŠ›åŒ¹é…ç®—æ³•&lt;/th&gt;
&lt;th&gt;KMPç®—æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€ä¸ªå°è¯•ï¼Œå¤±è´¥åˆ™ä¸»ä¸²æŒ‡é’ˆå›æº¯&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨å·²çŸ¥ä¿¡æ¯ï¼Œä¸»ä¸²æŒ‡é’ˆä¸å›æº¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(n*m)&lt;/td&gt;
&lt;td&gt;O(n+m)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(1)&lt;/td&gt;
&lt;td&gt;O(m) (ç”¨äºå­˜å‚¨nextæ•°ç»„)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ€è·¯ç®€å•ï¼Œä»£ç ç›´è§‚&lt;/td&gt;
&lt;td&gt;å¤„ç†é•¿æ–‡æœ¬å’Œå¤§è§„æ¨¡æ•°æ®æ—¶æ•ˆç‡é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ£åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•ˆç‡ä½ï¼Œå­˜åœ¨å¤§é‡é‡å¤æ¯”è¾ƒ&lt;/td&gt;
&lt;td&gt;å®ç°ç¨å¤æ‚ï¼Œéœ€è¦é¢„å¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-kmp-ç®—æ³•çš„æ ¸å¿ƒnext-æ•°ç»„"&gt;ğŸ” KMP ç®—æ³•çš„æ ¸å¿ƒï¼šNext æ•°ç»„
&lt;/h3&gt;&lt;p&gt;KMP ç®—æ³•çš„å…³é”®åœ¨äºä¸€ä¸ªé¢„å¤„ç†æ­¥éª¤ï¼šä¸ºæ¨¡å¼ä¸²ç”Ÿæˆä¸€ä¸ª &lt;strong&gt;Next æ•°ç»„&lt;/strong&gt;ï¼ˆä¹Ÿç§°ä¸ºéƒ¨åˆ†åŒ¹é…è¡¨ï¼‰ã€‚è¿™ä¸ªæ•°ç»„å­˜å‚¨äº†æ¨¡å¼ä¸²è‡ªèº«çš„å±€éƒ¨åŒ¹é…ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€é•¿å…¬å…±å‰åç¼€&lt;/strong&gt;ï¼šè¦ç†è§£ Next æ•°ç»„ï¼Œå…ˆè¦æ˜ç™½ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²çš„â€œæœ€é•¿å…¬å…±å‰åç¼€â€ã€‚å‰ç¼€æ˜¯æŒ‡ä¸åŒ…å«æœ€åä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰ä»¥ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„è¿ç»­å­ä¸²ï¼›åç¼€æ˜¯æŒ‡ä¸åŒ…å«ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰ä»¥æœ€åä¸€ä¸ªå­—ç¬¦ç»“å°¾çš„è¿ç»­å­ä¸² ã€‚æ‰€è°“å…¬å…±å‰åç¼€ï¼Œå°±æ˜¯åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œç›¸ç­‰çš„å‰ç¼€å’Œåç¼€ã€‚
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸² &lt;code&gt;&amp;quot;ABABA&amp;quot;&lt;/code&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å‰ç¼€æœ‰ï¼š&lt;code&gt;&amp;quot;A&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;AB&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;ABA&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;ABAB&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åç¼€æœ‰ï¼š&lt;code&gt;&amp;quot;A&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;BA&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;ABA&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;BABA&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å…¶å…¬å…±å‰åç¼€æœ‰ &lt;code&gt;&amp;quot;A&amp;quot;&lt;/code&gt;(é•¿åº¦1) å’Œ &lt;code&gt;&amp;quot;ABA&amp;quot;&lt;/code&gt;(é•¿åº¦3)ï¼Œå…¶ä¸­æœ€é•¿çš„å°±æ˜¯ &lt;code&gt;&amp;quot;ABA&amp;quot;&lt;/code&gt;ï¼Œé•¿åº¦ä¸º3ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Next æ•°ç»„çš„å«ä¹‰&lt;/strong&gt;ï¼šNext æ•°ç»„ä¸­çš„å€¼ &lt;code&gt;next[i]&lt;/code&gt;è¡¨ç¤ºçš„æ˜¯æ¨¡å¼ä¸²ä¸­ä»å¼€å¤´åˆ°ç¬¬ &lt;code&gt;i&lt;/code&gt;ä¸ªå­—ç¬¦ï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰çš„è¿™ä¸ªå­ä¸²ï¼Œå…¶&lt;strong&gt;æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦&lt;/strong&gt; ã€‚
&lt;ul&gt;
&lt;li&gt;ä»¥æ¨¡å¼ä¸² &lt;code&gt;P = &amp;quot;ABABC&amp;quot;&lt;/code&gt;ä¸ºä¾‹ï¼Œå®ƒçš„ Next æ•°ç»„è®¡ç®—å¦‚ä¸‹ ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;i=0&lt;/code&gt;, å­ä¸² &lt;code&gt;&amp;quot;A&amp;quot;&lt;/code&gt;ï¼Œæ— å…¬å…±å‰åç¼€ï¼Œ&lt;code&gt;next[0] = 0&lt;/code&gt;ï¼ˆæœ‰äº›å®ç°è®¾ä¸º-1ï¼ŒåŸç†ç›¸é€šï¼Œæ„ä¸ºå½»åº•ä»å¤´å¼€å§‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;i=1&lt;/code&gt;, å­ä¸² &lt;code&gt;&amp;quot;AB&amp;quot;&lt;/code&gt;ï¼Œå‰ç¼€ &lt;code&gt;&amp;quot;A&amp;quot;&lt;/code&gt;ï¼Œåç¼€ &lt;code&gt;&amp;quot;B&amp;quot;&lt;/code&gt;ï¼Œæ— å…¬å…±ï¼Œ&lt;code&gt;next[1] = 0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;i=2&lt;/code&gt;, å­ä¸² &lt;code&gt;&amp;quot;ABA&amp;quot;&lt;/code&gt;ï¼Œæœ€é•¿å…¬å…±å‰åç¼€æ˜¯ &lt;code&gt;&amp;quot;A&amp;quot;&lt;/code&gt;ï¼Œ&lt;code&gt;next[2] = 1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;i=3&lt;/code&gt;, å­ä¸² &lt;code&gt;&amp;quot;ABAB&amp;quot;&lt;/code&gt;ï¼Œæœ€é•¿å…¬å…±å‰åç¼€æ˜¯ &lt;code&gt;&amp;quot;AB&amp;quot;&lt;/code&gt;ï¼Œ&lt;code&gt;next[3] = 2&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;i=4&lt;/code&gt;, å­ä¸² &lt;code&gt;&amp;quot;ABABC&amp;quot;&lt;/code&gt;ï¼Œæ— å…¬å…±å‰åç¼€ï¼Œ&lt;code&gt;next[4] = 0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œ&lt;code&gt;next = [0, 0, 1, 2, 0]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-next-æ•°ç»„çš„æ„å»ºä¸åŒ¹é…æµç¨‹"&gt;âš™ï¸ Next æ•°ç»„çš„æ„å»ºä¸åŒ¹é…æµç¨‹
&lt;/h3&gt;&lt;p&gt;æ„å»º Next æ•°ç»„å’Œè¿›è¡ŒåŒ¹é…çš„è¿‡ç¨‹åœ¨é€»è¾‘ä¸Šéå¸¸ç›¸ä¼¼ï¼Œå¯ä»¥çœ‹ä½œæ¨¡å¼ä¸²çš„â€œè‡ªåŒ¹é…â€ ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ„å»º Next æ•°ç»„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’çš„è¿‡ç¨‹ã€‚ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ &lt;code&gt;i&lt;/code&gt;å’Œ &lt;code&gt;j&lt;/code&gt;ï¼Œ&lt;code&gt;i&lt;/code&gt;æŒ‡å‘å½“å‰è¦è®¡ç®— Next å€¼çš„ä½ç½®ï¼ˆå¯è§†ä¸ºåç¼€çš„æœ«å°¾ï¼‰ï¼Œ&lt;code&gt;j&lt;/code&gt;æŒ‡å‘å‰ç¼€çš„æœ«å°¾ï¼ŒåŒæ—¶ä¹Ÿä»£è¡¨äº†å½“å‰æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–ï¼š&lt;code&gt;i = 1&lt;/code&gt;, &lt;code&gt;j = 0&lt;/code&gt;, &lt;code&gt;next[0] = 0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒå¾ªç¯ï¼šæ¯”è¾ƒ &lt;code&gt;pattern[i]&lt;/code&gt;å’Œ &lt;code&gt;pattern[j]&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœç›¸ç­‰ï¼Œè¯´æ˜å¯ä»¥å»¶ç»­å‰é¢çš„å…¬å…±å‰åç¼€ï¼Œ&lt;code&gt;j&lt;/code&gt;åŠ 1ï¼Œç„¶å &lt;code&gt;next[i] = j&lt;/code&gt;ï¼Œæœ€å &lt;code&gt;i&lt;/code&gt;åŠ 1ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™ &lt;code&gt;j&lt;/code&gt;éœ€è¦å›æº¯åˆ° &lt;code&gt;next[j-1]&lt;/code&gt;çš„ä½ç½®ï¼ˆå¦‚æœ &lt;code&gt;j&amp;gt;0&lt;/code&gt;ï¼‰ï¼Œå°è¯•æ›´çŸ­çš„å…¬å…±å‰ç¼€ï¼Œç„¶åç»§ç»­æ¯”è¾ƒã€‚å¦‚æœ &lt;code&gt;j&lt;/code&gt;å·²ç»ä¸º0ï¼Œåˆ™ç›´æ¥è®¾ç½® &lt;code&gt;next[i] = 0&lt;/code&gt;ï¼Œ&lt;code&gt;i&lt;/code&gt;åŠ 1 ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡ŒåŒ¹é…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¾—åˆ° Next æ•°ç»„åï¼ŒåŒ¹é…è¿‡ç¨‹å°±éå¸¸é«˜æ•ˆäº† ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–ä¸»ä¸²æŒ‡é’ˆ &lt;code&gt;i = 0&lt;/code&gt;ï¼Œæ¨¡å¼ä¸²æŒ‡é’ˆ &lt;code&gt;j = 0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒå¾ªç¯ï¼šæ¯”è¾ƒ &lt;code&gt;text[i]&lt;/code&gt;å’Œ &lt;code&gt;pattern[j]&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœç›¸ç­‰ï¼Œ&lt;code&gt;i&lt;/code&gt;å’Œ &lt;code&gt;j&lt;/code&gt;éƒ½åŠ 1ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸ç›¸ç­‰ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;j &amp;gt; 0&lt;/code&gt;ï¼Œè¯´æ˜å·²ç»åŒ¹é…äº†ä¸€éƒ¨åˆ†ï¼Œæ­¤æ—¶æ¨¡å¼ä¸²ä¸æ˜¯å‚»å‚»åœ°åªç§»åŠ¨ä¸€ä½ï¼Œè€Œæ˜¯&lt;strong&gt;æ ¹æ® Next æ•°ç»„æ™ºèƒ½è·³è·ƒ&lt;/strong&gt;ï¼šå°† &lt;code&gt;j&lt;/code&gt;è®¾ç½®ä¸º &lt;code&gt;next[j-1]&lt;/code&gt;ï¼ˆå¯¹äº &lt;code&gt;next[0]=0&lt;/code&gt;çš„å®ç°ï¼Œå¯èƒ½éœ€è¦ç¨ä½œè°ƒæ•´ã€‚å¯¹äº &lt;code&gt;next[0]=-1&lt;/code&gt;çš„å®ç°ï¼Œåˆ™åˆ¤æ–­ &lt;code&gt;j==-1&lt;/code&gt;æ—¶ç›´æ¥ç§»åŠ¨ &lt;code&gt;i&lt;/code&gt;ï¼‰ã€‚è¿™ä¸ªæ“ä½œç›¸å½“äºåˆ©ç”¨å·²ç»åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†ï¼ˆå³å…¬å…±å‰åç¼€ï¼‰ï¼Œå°†æ¨¡å¼ä¸²çš„å‰ç¼€ç§»åŠ¨åˆ°åˆšæ‰åŒ¹é…æˆåŠŸçš„åç¼€çš„ä½ç½®ä¸Šï¼Œä»è€Œè·³è¿‡ä¸å¿…è¦çš„æ¯”è¾ƒã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;j == 0&lt;/code&gt;ï¼Œåˆ™åªæœ‰ä¸»ä¸²æŒ‡é’ˆ &lt;code&gt;i&lt;/code&gt;åŠ 1ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å½“ &lt;code&gt;j&lt;/code&gt;ç­‰äºæ¨¡å¼ä¸²é•¿åº¦æ—¶ï¼Œè¡¨ç¤ºåŒ¹é…æˆåŠŸï¼Œè¿”å›ä½ç½® &lt;code&gt;i - j&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹"&gt;ğŸ’» ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨ Python å®ç°çš„ KMP ç®—æ³•æ ¸å¿ƒéƒ¨åˆ† ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;def getNext(pattern: str) -&amp;gt; list:
m = len(pattern)
next_arr = [0] * m # åˆå§‹åŒ–nextæ•°ç»„ï¼Œå…¨0
j = 0 # æŒ‡å‘å‰ç¼€æœ«å°¾ï¼Œä¹Ÿä»£è¡¨å½“å‰æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦
i = 1 # æŒ‡å‘åç¼€æœ«å°¾ï¼Œä»1å¼€å§‹éå†
while i &amp;lt; m:
if pattern[i] == pattern[j]:
# å­—ç¬¦åŒ¹é…ï¼Œå…¬å…±é•¿åº¦åŠ 1
j += 1
next_arr[i] = j
i += 1
else:
if j != 0:
# å­—ç¬¦ä¸åŒ¹é…ï¼Œä¸”jä¸ä¸º0ï¼Œåˆ™jå›æº¯åˆ°å‰ä¸€ä¸ªä½ç½®çš„nextå€¼
j = next_arr[j-1]
else:
# jå·²ç»ä¸º0ï¼Œæ— æ³•å†å›æº¯ï¼Œå½“å‰içš„nextå€¼ä¸º0
next_arr[i] = 0
i += 1
return next_arr
def kmpSearch(text: str, pattern: str) -&amp;gt; int:
if not pattern:
return 0
n, m = len(text), len(pattern)
if n &amp;lt; m:
return -1
next_arr = getNext(pattern)
i, j = 0, 0 # ä¸»ä¸²å’Œæ¨¡å¼ä¸²çš„æŒ‡é’ˆ
while i &amp;lt; n:
if text[i] == pattern[j]:
# å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼ŒåŒæŒ‡é’ˆåç§»
i += 1
j += 1
else:
if j != 0:
# åˆ©ç”¨nextæ•°ç»„è·³è¿‡æ¨¡å¼ä¸²çš„å‰ç¼€
j = next_arr[j-1]
else:
# æ¨¡å¼ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦å°±ä¸åŒ¹é…ï¼Œä¸»ä¸²æŒ‡é’ˆåç§»
i += 1
if j == m:
# åŒ¹é…æˆåŠŸ
return i - j
return -1
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-åº”ç”¨ä¸æ‰©å±•"&gt;ğŸŒ åº”ç”¨ä¸æ‰©å±•
&lt;/h3&gt;&lt;p&gt;KMP ç®—æ³•å› å…¶é«˜æ•ˆæ€§è¢«å¹¿æ³›åº”ç”¨äºä¼—å¤šé¢†åŸŸ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æœ¬ç¼–è¾‘ä¸æœç´¢å¼•æ“&lt;/strong&gt;ï¼šåœ¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚Ctrl+FæŸ¥æ‰¾ï¼‰æˆ–æœç´¢å¼•æ“ä¸­å¿«é€Ÿå®šä½å…³é”®è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿç‰©ä¿¡æ¯å­¦&lt;/strong&gt;ï¼šç”¨äºDNAã€RNAç­‰ç”Ÿç‰©å¤§åˆ†å­åºåˆ—çš„æ¯”å¯¹ï¼Œå¯»æ‰¾ç‰¹å®šæ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æŒ–æ˜&lt;/strong&gt;ï¼šåœ¨å¤§è§„æ¨¡æ–‡æœ¬ä¸­è¿›è¡Œæ¨¡å¼è¯†åˆ«å’Œé‡å¤æ•°æ®æ£€æµ‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒKMP ç®—æ³•ä¹Ÿæ˜¯å…¶ä»–æ›´é«˜çº§ç®—æ³•çš„åŸºç¡€ã€‚æœ€è‘—åçš„å½“å± &lt;strong&gt;ACè‡ªåŠ¨æœº&lt;/strong&gt;ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯ KMP ç®—æ³•åœ¨å¤šæ¨¡å¼åŒ¹é…ï¼ˆå³åŒæ—¶æŸ¥æ‰¾å¤šä¸ªæ¨¡å¼ä¸²ï¼‰ä¸Šçš„æ‰©å±•ï¼Œå…¶æ ¸å¿ƒçš„å¤±è´¥æŒ‡é’ˆï¼ˆfailï¼‰ä¸ Next æ•°ç»„çš„æ€æƒ³ä¸€è„‰ç›¸æ‰¿ ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ KMP ç®—æ³•ã€‚å¦‚æœä½ å¯¹ Next æ•°ç»„çš„å…·ä½“æ„å»ºè¿‡ç¨‹æˆ–åŒ¹é…æ­¥éª¤è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥å†æ·±å…¥æ¢è®¨æŸä¸ªç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="bm"&gt;BM
&lt;/h2&gt;&lt;p&gt;BMç®—æ³•ï¼ˆBoyer-Moore Algorithmï¼‰æ˜¯1977å¹´ç”±Robert S. Boyerå’ŒJ Strother Mooreæå‡ºçš„ä¸€ç§é«˜æ•ˆå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ã€‚å®ƒä»¥å…¶ç‹¬ç‰¹çš„ &lt;strong&gt;â€œä»å³å‘å·¦â€&lt;/strong&gt; åŒ¹é…æ–¹å¼å’Œä¸¤ä¸ªå¼ºå¤§çš„å¯å‘å¼è§„åˆ™â€”â€”&lt;strong&gt;åå­—ç¬¦è§„åˆ™&lt;/strong&gt;å’Œ&lt;strong&gt;å¥½åç¼€è§„åˆ™&lt;/strong&gt;è€Œé—»åï¼Œåœ¨å®é™…åº”ç”¨ï¼ˆå¦‚æ–‡æœ¬ç¼–è¾‘å™¨ã€ç”Ÿç‰©ä¿¡æ¯å­¦ï¼‰ä¸­ï¼Œå…¶æ€§èƒ½é€šå¸¸èƒ½è¾¾åˆ°KMPç®—æ³•çš„3-5å€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©æ‚¨å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒä¼˜åŠ¿ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªBMç®—æ³•ä¸æš´åŠ›åŒ¹é…æ³•çš„ç›´è§‚å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æš´åŠ›åŒ¹é…ç®—æ³•&lt;/th&gt;
&lt;th&gt;BMç®—æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯”è¾ƒé¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»å·¦åˆ°å³&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»å³åˆ°å·¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·³è·ƒç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡å¤±è´¥ååªç§»åŠ¨ä¸€ä½&lt;/td&gt;
&lt;td&gt;åº”ç”¨&lt;strong&gt;åå­—ç¬¦&lt;/strong&gt;å’Œ&lt;strong&gt;å¥½åç¼€&lt;/strong&gt;è§„åˆ™ï¼Œå®ç°&lt;strong&gt;è·³è·ƒå¼åŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦ï¼ˆæœ€å¥½ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(m*n)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(n/m)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦ï¼ˆæœ€åï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(m*n)&lt;/td&gt;
&lt;td&gt;O(m*n) æˆ– O(n+m)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€ä¸ªå°è¯•&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨åŒ¹é…å¤±è´¥çš„ä¿¡æ¯ï¼Œè·³è¿‡ä¸å¯èƒ½åŒ¹é…çš„ä½ç½®ï¼Œé¿å…å†—ä½™æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="æ ¸å¿ƒåŸç†è¯¦è§£"&gt;&lt;strong&gt;æ ¸å¿ƒåŸç†è¯¦è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;BMç®—æ³•çš„é«˜æ•ˆæ€§ä¸»è¦å»ºç«‹åœ¨ä»¥ä¸‹ä¸¤ä¸ªè§„åˆ™ä¹‹ä¸Šã€‚&lt;/p&gt;
&lt;h4 id="-åå­—ç¬¦è§„åˆ™"&gt;ğŸ”¤ &lt;strong&gt;åå­—ç¬¦è§„åˆ™&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“æ¨¡å¼ä¸²ä¸ä¸»ä¸²çš„æŸä¸ªå­—ç¬¦æ¯”è¾ƒå¤±è´¥æ—¶ï¼Œä¸»ä¸²ä¸­çš„è¿™ä¸ªå­—ç¬¦å°±è¢«ç§°ä¸ºâ€œåå­—ç¬¦â€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶ï¼Œç®—æ³•ä¼šæŸ¥æ‰¾è¯¥åå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­æœ€å³å‡ºç°çš„ä½ç½®ã€‚ç§»åŠ¨æ¨¡å¼ä¸²ï¼Œä½¿æ¨¡å¼ä¸²ä¸­æœ€å³è¾¹çš„è¿™ä¸ªåå­—ç¬¦ä¸ä¸»ä¸²ä¸­çš„åå­—ç¬¦å¯¹é½ã€‚å¦‚æœæ¨¡å¼ä¸²ä¸­ä¸å­˜åœ¨è¯¥åå­—ç¬¦ï¼Œåˆ™å°†æ•´ä¸ªæ¨¡å¼ä¸²ç§»åŠ¨åˆ°åå­—ç¬¦ä¹‹åã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç§»åŠ¨è·ç¦»è®¡ç®—å…¬å¼&lt;/strong&gt;ï¼š&lt;code&gt;ç§»åŠ¨è·ç¦» = åå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­çš„ä½ç½® - åå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­æœ€å³å‡ºç°çš„ä½ç½®&lt;/code&gt;ã€‚å¦‚æœåå­—ç¬¦ä¸åœ¨æ¨¡å¼ä¸²ä¸­ï¼Œæœ€å³å‡ºç°ä½ç½®è®°ä¸º -1ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå‡è®¾ä¸»ä¸²ä¸º &lt;code&gt;&amp;quot;HERE IS A SIMPLE EXAMPLE&amp;quot;&lt;/code&gt;ï¼Œæ¨¡å¼ä¸²ä¸º &lt;code&gt;&amp;quot;EXAMPLE&amp;quot;&lt;/code&gt;ã€‚ç¬¬ä¸€è½®æ¯”è¾ƒï¼Œå°¾éƒ¨çš„ &lt;code&gt;'S'&lt;/code&gt;å’Œ &lt;code&gt;'E'&lt;/code&gt;ä¸åŒ¹é…ã€‚&lt;code&gt;'S'&lt;/code&gt;æ˜¯åå­—ç¬¦ä¸”ä¸åœ¨æ¨¡å¼ä¸²ä¸­ï¼Œå› æ­¤æ ¹æ®è§„åˆ™ï¼Œå°†æ¨¡å¼ä¸²æ•´ä½“ç§»åŠ¨åˆ° &lt;code&gt;'S'&lt;/code&gt;çš„åé¢ã€‚&lt;/p&gt;
&lt;h4 id="-å¥½åç¼€è§„åˆ™"&gt;ğŸ“£ &lt;strong&gt;å¥½åç¼€è§„åˆ™&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“é‡åˆ°åå­—ç¬¦æ—¶ï¼Œå…¶åé¢å·²ç»åŒ¹é…æˆåŠŸçš„å­ä¸²è¢«ç§°ä¸ºâ€œå¥½åç¼€â€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè§„åˆ™æ›´å¤æ‚äº›ï¼Œåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µä¸€&lt;/strong&gt;ï¼šå¦‚æœå¥½åç¼€åœ¨æ¨¡å¼ä¸²çš„å‰åŠéƒ¨åˆ†å†æ¬¡å‡ºç°ï¼ˆå¹¶ä¸”å‰ä¸€ä¸ªå­—ç¬¦ä¸å½“å‰å¥½åç¼€å‰çš„å­—ç¬¦ä¸ç›¸åŒï¼‰ï¼Œåˆ™å°†æ¨¡å¼ä¸²ä¸­é‚£ä¸ªç›¸åŒçš„å­ä¸²æ»‘åŠ¨åˆ°ä¸å¥½åç¼€å¯¹é½çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µäºŒ&lt;/strong&gt;ï¼šå¦‚æœå¥½åç¼€æ²¡æœ‰å†å®Œæ•´å‡ºç°ï¼Œåˆ™å¯»æ‰¾æ¨¡å¼ä¸²çš„ä¸€ä¸ªæœ€é•¿å‰ç¼€ï¼Œä½¿å…¶ä¸å¥½åç¼€çš„æŸä¸ªåç¼€ç›¸åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µä¸‰&lt;/strong&gt;ï¼šå¦‚æœä¸Šè¿°ä¸¤ç§æƒ…å†µéƒ½ä¸æ»¡è¶³ï¼Œåˆ™ç›´æ¥å°†æ•´ä¸ªæ¨¡å¼ä¸²ç§»åŠ¨åˆ°å¥½åç¼€çš„åé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç§»åŠ¨ç­–ç•¥&lt;/strong&gt;ï¼šåœ¨æ¯ä¸€è½®åŒ¹é…å¤±è´¥æ—¶ï¼ŒBMç®—æ³•ä¼š&lt;strong&gt;åˆ†åˆ«è®¡ç®—&lt;/strong&gt;åå­—ç¬¦è§„åˆ™å’Œå¥½åç¼€è§„åˆ™å»ºè®®çš„ç§»åŠ¨è·ç¦»ï¼Œç„¶åé€‰æ‹©&lt;strong&gt;è¾ƒå¤§çš„é‚£ä¸ª&lt;/strong&gt;ä½œä¸ºå®é™…ç§»åŠ¨è·ç¦»ï¼Œä»è€Œå®ç°æ›´é«˜æ•ˆçš„è·³è·ƒã€‚&lt;/p&gt;
&lt;h3 id="-ç®—æ³•æ­¥éª¤ä¸ç¤ºä¾‹"&gt;âš™ï¸ &lt;strong&gt;ç®—æ³•æ­¥éª¤ä¸ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç»å…¸ä¾‹å­æ¥ä¸²è”ä¸Šè¿°è§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»ä¸²&lt;/strong&gt;ï¼š&lt;code&gt;&amp;quot;HERE IS A SIMPLE EXAMPLE&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼ä¸²&lt;/strong&gt;ï¼š&lt;code&gt;&amp;quot;EXAMPLE&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€è½®&lt;/strong&gt;ï¼šä»å³å‘å·¦æ¯”è¾ƒï¼Œ&lt;code&gt;'S'&lt;/code&gt;ä¸ &lt;code&gt;'E'&lt;/code&gt;ä¸åŒ¹é…ã€‚&lt;code&gt;'S'&lt;/code&gt;æ˜¯åå­—ç¬¦ä¸”ä¸åœ¨æ¨¡å¼ä¸²ä¸­ã€‚åå­—ç¬¦è§„åˆ™å»ºè®®ç§»åŠ¨ï¼š&lt;code&gt;6 - (-1) = 7&lt;/code&gt;ä½ã€‚å¥½åç¼€è§„åˆ™æ­¤æ—¶æ— æ•ˆã€‚&lt;strong&gt;å®é™…ç§»åŠ¨7ä½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒè½®&lt;/strong&gt;ï¼šç§»åŠ¨åï¼Œ&lt;code&gt;'P'&lt;/code&gt;ä¸ &lt;code&gt;'E'&lt;/code&gt;ä¸åŒ¹é…ã€‚&lt;code&gt;'P'&lt;/code&gt;æ˜¯åå­—ç¬¦ï¼Œå®ƒåœ¨æ¨¡å¼ä¸²ä¸­çš„ä½ç½®æ˜¯4ã€‚åå­—ç¬¦è§„åˆ™å»ºè®®ç§»åŠ¨ï¼š&lt;code&gt;6 - 4 = 2&lt;/code&gt;ä½ã€‚&lt;strong&gt;å®é™…ç§»åŠ¨2ä½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸‰è½®&lt;/strong&gt;ï¼šç§»åŠ¨åï¼Œ&lt;code&gt;&amp;quot;MPLE&amp;quot;&lt;/code&gt;åŒ¹é…æˆåŠŸï¼Œä½†å‰é¢çš„ &lt;code&gt;'I'&lt;/code&gt;å’Œ &lt;code&gt;'A'&lt;/code&gt;ä¸åŒ¹é…ã€‚æ­¤æ—¶ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åå­—ç¬¦è§„åˆ™&lt;/strong&gt;ï¼š&lt;code&gt;'I'&lt;/code&gt;ä¸åœ¨æ¨¡å¼ä¸²ä¸­ï¼Œç§»åŠ¨è·ç¦»ä¸º &lt;code&gt;2 - (-1) = 3&lt;/code&gt;ä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¥½åç¼€è§„åˆ™&lt;/strong&gt;ï¼šå¥½åç¼€ &lt;code&gt;&amp;quot;MPLE&amp;quot;&lt;/code&gt;ç­‰ä¹‹ä¸­ï¼Œåªæœ‰ &lt;code&gt;'E'&lt;/code&gt;å‡ºç°åœ¨æ¨¡å¼ä¸²å¼€å¤´ï¼Œç§»åŠ¨è·ç¦»ä¸º &lt;code&gt;6 - 0 = 6&lt;/code&gt;ä½ã€‚&lt;/li&gt;
&lt;li&gt;å–æœ€å¤§å€¼ï¼Œ&lt;strong&gt;å®é™…ç§»åŠ¨6ä½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬å››è½®&lt;/strong&gt;ï¼šç§»åŠ¨åï¼Œ&lt;code&gt;'P'&lt;/code&gt;å†æ¬¡æˆä¸ºåå­—ç¬¦ã€‚åå­—ç¬¦è§„åˆ™å»ºè®®ç§»åŠ¨ &lt;code&gt;6 - 4 = 2&lt;/code&gt;ä½ã€‚ç§»åŠ¨åï¼Œ&lt;strong&gt;åŒ¹é…æˆåŠŸ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä»£ç å®ç°æ¦‚è§ˆ"&gt;ğŸ’» &lt;strong&gt;ä»£ç å®ç°æ¦‚è§ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;BMç®—æ³•çš„å®ç°ä¸»è¦åŒ…æ‹¬é¢„å¤„ç†å’Œæœç´¢ä¸¤ä¸ªé˜¶æ®µã€‚ä»¥ä¸‹æ˜¯C++å®ç°çš„æ ¸å¿ƒæ¡†æ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¢„å¤„ç†é˜¶æ®µ&lt;/strong&gt;ï¼šæ„å»ºä¸¤å¼ è¾…åŠ©è¡¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bc&lt;/code&gt;(Bad Character) è¡¨ï¼šè®°å½•æ¯ä¸ªå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­æœ€åå‡ºç°çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;std::vector&amp;lt;int&amp;gt; buildBC(string pattern) {
vector&amp;lt;int&amp;gt; bc(256, -1); // å‡è®¾å­—ç¬¦é›†ä¸ºASCII
for (int i = 0; i &amp;lt; pattern.size(); i++) {
bc[pattern[i]] = i; // ä¸æ–­æ›´æ–°ï¼Œæœ€ç»ˆä¿å­˜æœ€å³ä½ç½®
}
return bc;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;gs&lt;/code&gt;(Good Suffix) è¡¨ï¼šé€šè¿‡ä¸€ä¸ªè¾…åŠ©çš„ &lt;code&gt;suffix&lt;/code&gt;æ•°ç»„æ¥è®¡ç®—ï¼Œç”¨äºå¥½åç¼€è§„åˆ™ã€‚æ„å»ºè¿‡ç¨‹ç¨å¤æ‚ï¼Œä½†å…¶æ ¸å¿ƒæ˜¯è®°å½•åœ¨ä¸åŒä½ç½®åŒ¹é…å¤±è´¥æ—¶ï¼Œæ ¹æ®å¥½åç¼€è§„åˆ™æ¨¡å¼ä¸²åº”ç§»åŠ¨çš„è·ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœç´¢é˜¶æ®µ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int BM_search(string text, string pattern) {
vector&amp;lt;int&amp;gt; bc = buildBC(pattern);
vector&amp;lt;int&amp;gt; gs = buildGS(pattern); // æ„å»ºgsè¡¨
int n = text.size(), m = pattern.size();
int align = 0; // æ¨¡å¼ä¸²ä¸æ–‡æœ¬ä¸²çš„å¯¹é½ä½ç½®
while (align + m &amp;lt;= n) {
int j = m - 1;
// ä»å³å‘å·¦åŒ¹é…
while (j &amp;gt;= 0 &amp;amp;&amp;amp; text[align + j] == pattern[j]) j--;
if (j &amp;lt; 0) {
return align; // åŒ¹é…æˆåŠŸ
} else {
// è®¡ç®—ç§»åŠ¨è·ç¦»ï¼Œå–ä¸¤è€…æœ€å¤§å€¼
int dist_bc = j - bc[text[align + j]];
int dist_gs = gs[j];
align += max(dist_bc, dist_gs);
}
}
return -1; // åŒ¹é…å¤±è´¥
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;BMç®—æ³•æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„é«˜æ•ˆå•æ¨¡å¼åŒ¹é…ç®—æ³•ã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶é€†å‘æ¯”è¾ƒçš„æ€ç»´å’Œç²¾å·§çš„è·³è·ƒè§„åˆ™ï¼Œä½¿å¾—å…¶åœ¨å¤„ç†å¤§æ–‡æœ¬å’Œè¾ƒé•¿æ¨¡å¼ä¸²æ—¶ä¼˜åŠ¿æ˜æ˜¾ã€‚è™½ç„¶å…¶é¢„å¤„ç†é˜¶æ®µæ¯”KMPç­‰ç®—æ³•ç¨å¤æ‚ï¼Œä½†åœ¨æœç´¢é˜¶æ®µçš„å“è¶Šè¡¨ç°ä½¿å…¶æˆä¸ºè®¸å¤šå®é™…åº”ç”¨çš„é¦–é€‰ã€‚ç†è§£BMç®—æ³•ä¸ä»…æœ‰åŠ©äºè§£å†³å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼Œå…¶è®¾è®¡æ€æƒ³ä¹Ÿå¯¹ç†è§£å…¶ä»–ç®—æ³•ï¼ˆå¦‚ACè‡ªåŠ¨æœºï¼‰å¤§æœ‰è£¨ç›Šã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©æ‚¨é€å½»ç†è§£BMç®—æ³•ã€‚å¦‚æœæ‚¨å¯¹å¥½åç¼€è¡¨çš„æ„å»ºç»†èŠ‚æˆ–æ›´å¤šå˜ä½“æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="bad-request"&gt;Bad Request
&lt;/h2&gt;&lt;p&gt;å½“æœåŠ¡å™¨è¿”å›â€œ400 Bad Requestâ€é”™è¯¯æ—¶ï¼Œæ„å‘³ç€å®ƒè®¤ä¸ºå®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ä½ çš„æµè§ˆå™¨ï¼‰å‘èµ·çš„è¯·æ±‚å­˜åœ¨æŸç§é—®é¢˜ï¼Œå› æ­¤æ— æ³•å¤„ç†ã€‚è¿™ä¸ªé”™è¯¯çš„å…·ä½“åŸå› å¤šç§å¤šæ ·ï¼Œä½†æ ¸å¿ƒåœ¨äº&lt;strong&gt;è¯·æ±‚çš„æ ¼å¼æˆ–å†…å®¹ä¸ç¬¦åˆæœåŠ¡å™¨çš„é¢„æœŸ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¢³ç†äº†æœ€å¸¸è§çš„ä¸€äº›åŸå› å’Œåˆæ­¥çš„è§£å†³æ€è·¯ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå®šä½é—®é¢˜ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é”™è¯¯ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å¸¸è§å…·ä½“åŸå› &lt;/th&gt;
&lt;th&gt;åˆæ­¥åº”å¯¹æ€è·¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”— URL é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç½‘å€å«æœ‰éæ³•å­—ç¬¦ï¼ˆå¦‚æœªç¼–ç çš„ç©ºæ ¼ï¼‰ã€æ‹¼å†™é”™è¯¯ã€ç«¯å£å·é”™è¯¯æˆ–åè®®å¤´ï¼ˆhttp/httpsï¼‰æœ‰è¯¯ã€‚&lt;/td&gt;
&lt;td&gt;ä»”ç»†æ£€æŸ¥å¹¶ä¿®æ­£URLã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“¨ è¯·æ±‚æ•°æ®é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æäº¤çš„æ•°æ®ï¼ˆå¦‚JSONã€è¡¨å•ï¼‰æ ¼å¼é”™è¯¯ã€ç¼ºå¤±å¿…éœ€å‚æ•°ã€æˆ–æ•°æ®ç±»å‹ä¸åŒ¹é…ã€‚&lt;/td&gt;
&lt;td&gt;æ ¸å¯¹APIæ–‡æ¡£ï¼Œç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®ã€å­—æ®µå®Œæ•´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“¢ è¯·æ±‚å¤´é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Content-Type&lt;/code&gt;ç­‰å¤´éƒ¨ä¿¡æ¯è®¾ç½®é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œå£°æ˜å‘é€JSONå´å®é™…å‘é€äº†æ–‡æœ¬ï¼‰ï¼Œæˆ–è¯·æ±‚å¤´è¿‡é•¿ã€‚&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥å¹¶ä¿®æ­£è¯·æ±‚å¤´è®¾ç½®ï¼Œç¡®ä¿ä¸å®é™…å†…å®¹ç±»å‹ä¸€è‡´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸª Cookie ä¸ç¼“å­˜é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æµè§ˆå™¨ç¼“å­˜æˆ–Cookieä¸­å­˜å‚¨çš„æ—§æ•°æ®ä¸æœåŠ¡å™¨å½“å‰æœŸæœ›çš„ä¸ä¸€è‡´ï¼Œå¯èƒ½å¯¼è‡´å†²çªã€‚&lt;/td&gt;
&lt;td&gt;å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’ŒCookieã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“ æ–‡ä»¶ä¸Šä¼ é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è¯•ä¸Šä¼ çš„æ–‡ä»¶å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨å…è®¸çš„é™åˆ¶ã€‚&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼Œæˆ–è”ç³»æœåŠ¡å•†äº†è§£é™åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âš™ï¸ æœåŠ¡å™¨é…ç½®é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨å¯¹è¯·æ±‚é¢‘ç‡ã€URLé•¿åº¦ç­‰æœ‰ç‰¹å®šé™åˆ¶ï¼Œè¶…å‡ºåˆ™ä¼šæ‹’ç»ã€‚&lt;/td&gt;
&lt;td&gt;å¯èƒ½éœ€è¦è”ç³»ç½‘ç«™ç®¡ç†å‘˜è§£å†³ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="å¦‚ä½•æ’æŸ¥å’Œè§£å†³"&gt;å¦‚ä½•æ’æŸ¥å’Œè§£å†³
&lt;/h3&gt;&lt;p&gt;å½“é‡åˆ°400é”™è¯¯æ—¶ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ’æŸ¥ï¼Œè¿™å°¤å…¶é€‚ç”¨äºå¼€å‘è€…æˆ–è¿›é˜¶ç”¨æˆ·ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»”ç»†æ£€æŸ¥URL&lt;/strong&gt;ï¼šè¿™æ˜¯ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€æ­¥ã€‚ç¡®ä¿URLå®Œå…¨æ­£ç¡®ï¼Œæ²¡æœ‰å¤šä½™æˆ–ç¼ºå°‘çš„ç¬¦å·ï¼Œç‰¹åˆ«æ˜¯æ³¨æ„ç‰¹æ®Šå­—ç¬¦æ˜¯å¦ç»è¿‡äº†æ­£ç¡®çš„ç™¾åˆ†æ¯”ç¼–ç ï¼ˆPercent-encodingï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¡æŸ¥è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“&lt;/strong&gt;ï¼šå¦‚æœä½ æ˜¯å¼€å‘è€…æˆ–åœ¨è°ƒç”¨APIï¼Œè¯·ä½¿ç”¨å¼€å‘è€…å·¥å…·æˆ–æŠ“åŒ…å·¥å…·æ£€æŸ¥ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚å¤´&lt;/strong&gt;ï¼šç¡®è®¤ &lt;code&gt;Content-Type&lt;/code&gt;ç­‰å¤´éƒ¨å­—æ®µçš„å€¼æ˜¯å¦æ­£ç¡®æ— è¯¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®é™…å‘é€çš„æ˜¯JSONæ•°æ®ï¼Œ&lt;code&gt;Content-Type&lt;/code&gt;åº”è®¾ç½®ä¸º &lt;code&gt;application/json&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚ä½“&lt;/strong&gt;ï¼šç¡®è®¤å‘é€çš„æ•°æ®æ ¼å¼å®Œå…¨æ­£ç¡®ã€‚å¯¹äºJSONï¼Œè¦æ£€æŸ¥å¼•å·ã€æ‹¬å·æ˜¯å¦é…å¯¹ï¼Œæ²¡æœ‰å¤šä½™çš„é€—å·ã€‚å¯¹äºè¡¨å•æ•°æ®ï¼Œæ£€æŸ¥å­—æ®µåæ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦é—æ¼äº†å¿…å¡«å­—æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…ç†æµè§ˆå™¨çŠ¶æ€&lt;/strong&gt;ï¼šå¯¹äºæ™®é€šç”¨æˆ·ï¼Œå¦‚æœæ˜¯åœ¨æµè§ˆç½‘é¡µæ—¶é‡åˆ°æ­¤é”™è¯¯ï¼Œæœ€æœ‰æ•ˆçš„å°è¯•ä¹‹ä¸€æ˜¯&lt;strong&gt;æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’ŒCookie&lt;/strong&gt;ã€‚å› ä¸ºæŸåæˆ–è¿‡æœŸçš„ç¼“å­˜/Cookieå¯èƒ½ä¼šæºå¸¦é”™è¯¯ä¿¡æ¯å¹²æ‰°æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥æ–‡ä»¶å¤§å°&lt;/strong&gt;ï¼šå¦‚æœä½ æ­£åœ¨ä¸Šä¼ æ–‡ä»¶ï¼Œç¡®è®¤æ–‡ä»¶æ²¡æœ‰è¶…è¿‡æœåŠ¡å™¨çš„å°ºå¯¸é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥é˜…æ–‡æ¡£&lt;/strong&gt;ï¼šç¡®ä¿ä½ ä½¿ç”¨çš„HTTPæ–¹æ³•ï¼ˆGET, POST, PUTç­‰ï¼‰ç¬¦åˆAPIæ¥å£çš„è¦æ±‚ï¼Œå¹¶ä¸”æ‰€æœ‰å‚æ•°éƒ½æŒ‰ç…§æ–‡æ¡£çš„è¯´æ˜ä¼ é€’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’é™¤æœ¬åœ°å¹²æ‰°&lt;/strong&gt;ï¼šæš‚æ—¶ç¦ç”¨æµè§ˆå™¨æ’ä»¶æˆ–æ‰©å±•ï¼Œç‰¹åˆ«æ˜¯é‚£äº›å¯èƒ½ä¿®æ”¹è¯·æ±‚çš„æ’ä»¶ï¼ˆå¦‚æŸäº›å¹¿å‘Šæ‹¦æˆªå™¨ã€VPNå·¥å…·ï¼‰ï¼Œç„¶åé‡è¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ ç†è§£å¹¶è§£å†³â€œ400 Bad Requestâ€é”™è¯¯ã€‚å¦‚æœä½ é‡åˆ°äº†å…·ä½“åœºæ™¯ï¼Œå¯ä»¥æä¾›æ›´å¤šç»†èŠ‚ï¼Œæˆ–è®¸æˆ‘èƒ½ç»™å‡ºæ›´å…·ä½“çš„å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id="prim--kruskal"&gt;Prim &amp;amp; Kruskal
&lt;/h2&gt;&lt;p&gt;Primç®—æ³•å’ŒKruskalç®—æ³•æ˜¯æ„å»ºæœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰çš„ä¸¤ç§ç»å…¸è´ªå¿ƒç®—æ³•ï¼Œå®ƒä»¬éƒ½æ—¨åœ¨ä»¥æœ€å°çš„æ€»è¾¹æƒè¿æ¥å›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œä½†å®ç°æ€è·¯å’Œé€‚ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥ç›´è§‚å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç„¶åå†æ·±å…¥èŠèŠå®ƒä»¬å„è‡ªçš„å·¥ä½œæµç¨‹å’Œå¦‚ä½•é€‰æ‹©ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;Primç®—æ³•&lt;/th&gt;
&lt;th&gt;Kruskalç®—æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ ç‚¹æ³•&lt;/strong&gt;ï¼šä»å•ä¸ªé¡¶ç‚¹å‡ºå‘ï¼Œé€æ­¥æ‰©å±•æ ‘ï¼Œæ¯æ¬¡æ·»åŠ ä¸å½“å‰æ ‘ç›¸è¿çš„æœ€å°æƒè¾¹&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ è¾¹æ³•&lt;/strong&gt;ï¼šå°†æ‰€æœ‰è¾¹æ’åºï¼Œä»å°åˆ°å¤§ä¾æ¬¡é€‰æ‹©ï¼Œç¡®ä¿ä¸å½¢æˆç¯ï¼Œæœ€ç»ˆåˆå¹¶æˆæ ‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶æŸ¥é›† (Union-Find)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt; (å¸¸ç”¨å®ç°)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;O(E log V)&lt;/code&gt;ï¼ˆä½¿ç”¨é‚»æ¥è¡¨å’ŒäºŒå‰å †ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;O(E log E)&lt;/code&gt;ï¼ˆä¸»è¦å¼€é”€åœ¨äºè¾¹çš„æ’åºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¨ å¯†å›¾&lt;/strong&gt;ï¼ˆè¾¹æ•°è¾ƒå¤šï¼Œå³Eæ¥è¿‘VÂ²ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¨€ç–å›¾&lt;/strong&gt;ï¼ˆè¾¹æ•°ç›¸å¯¹è¾ƒå°‘ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œè¿‡ç¨‹ç‰¹å¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ä»»æ„æ—¶åˆ»ï¼Œä¸­é—´ç»“æœéƒ½æ˜¯&lt;strong&gt;ä¸€æ£µè¿é€šçš„æ ‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ä»»æ„æ—¶åˆ»ï¼Œä¸­é—´ç»“æœå¯èƒ½æ˜¯&lt;strong&gt;ä¸€ä¸ªæ£®æ—&lt;/strong&gt;ï¼ˆå¤šæ£µæ ‘ï¼‰ï¼Œæœ€åæ‰åˆå¹¶æˆä¸€æ£µæ ‘&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç®—æ³•æµç¨‹ç®€ä»‹"&gt;ğŸ”„ ç®—æ³•æµç¨‹ç®€ä»‹
&lt;/h3&gt;&lt;p&gt;äº†è§£å®ƒä»¬çš„å…·ä½“æ­¥éª¤ï¼Œèƒ½å¸®ä½ æ›´å¥½åœ°ç†è§£ä¸Šè¿°å·®å¼‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Primç®—æ³•çš„å·¥ä½œæµç¨‹&lt;/strong&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;ï¼šéšæœºé€‰æ‹©ä¸€ä¸ªé¡¶ç‚¹ä½œä¸ºèµ·å§‹ç‚¹ï¼Œå°†å…¶åŠ å…¥æœ€å°ç”Ÿæˆæ ‘é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ‰¾ä¸æ‰©å±•&lt;/strong&gt;ï¼šåœ¨æ‰€æœ‰è¿æ¥&lt;strong&gt;å·²é€‰é¡¶ç‚¹é›†&lt;/strong&gt;å’Œ&lt;strong&gt;æœªé€‰é¡¶ç‚¹é›†&lt;/strong&gt;çš„è¾¹ä¸­ï¼Œé€‰æ‹©æƒé‡æœ€å°çš„é‚£æ¡è¾¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ é¡¶ç‚¹&lt;/strong&gt;ï¼šå°†è¿™æ¡è¾¹åŠå…¶è¿æ¥çš„å¦ä¸€ä¸ªé¡¶ç‚¹åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤&lt;/strong&gt;ï¼šå¾ªç¯æ‰§è¡Œç¬¬2ã€3æ­¥ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½è¢«åŒ…å«è¿›æœ€å°ç”Ÿæˆæ ‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kruskalç®—æ³•çš„å·¥ä½œæµç¨‹&lt;/strong&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ’åº&lt;/strong&gt;ï¼šå°†å›¾ä¸­æ‰€æœ‰çš„è¾¹æŒ‰ç…§æƒé‡ä»å°åˆ°å¤§è¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–æ£®æ—&lt;/strong&gt;ï¼šå°†æ¯ä¸ªé¡¶ç‚¹éƒ½è§†ä¸ºä¸€æ£µç‹¬ç«‹çš„æ ‘ï¼Œå½¢æˆä¸€ä¸ªæ£®æ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰è¾¹ä¸æ£€æŸ¥&lt;/strong&gt;ï¼šæŒ‰é¡ºåºæ£€æŸ¥æ¯æ¡è¾¹ã€‚å¦‚æœä¸€æ¡è¾¹è¿æ¥çš„ä¸¤æ£µé¡¶ç‚¹å±äºæ£®æ—ä¸­&lt;strong&gt;ä¸åŒçš„æ ‘&lt;/strong&gt;ï¼ˆå³åŠ å…¥åä¸ä¼šå½¢æˆç¯ï¼‰ï¼Œåˆ™é€‰ä¸­è¯¥è¾¹ï¼Œå¹¶å°†ä¸¤æ£µæ ‘åˆå¹¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤&lt;/strong&gt;ï¼šç»§ç»­æ£€æŸ¥ä¸‹ä¸€æ¡è¾¹ï¼Œç›´åˆ°é€‰ä¸­äº†&lt;code&gt;V-1&lt;/code&gt;æ¡è¾¹ï¼ˆå½¢æˆä¸€æ£µæ ‘ï¼‰æˆ–æ‰€æœ‰è¾¹éƒ½å·²æ£€æŸ¥å®Œæ¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é¢å¯¹å…·ä½“é—®é¢˜æ—¶ï¼Œä½ å¯ä»¥æ ¹æ®å›¾çš„ç‰¹æ€§æ¥å†³å®šä½¿ç”¨å“ªç§ç®—æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹© Prim ç®—æ³•çš„æƒ…å†µ&lt;/strong&gt;ï¼šå½“ä½ çš„å›¾æ˜¯&lt;strong&gt;ç¨ å¯†å›¾&lt;/strong&gt;ï¼ˆè¾¹æ•° E è¿œå¤§äºé¡¶ç‚¹æ•° Vï¼Œä¾‹å¦‚æ¥è¿‘å®Œå…¨å›¾ï¼‰æ—¶ï¼ŒPrim ç®—æ³•ï¼ˆç‰¹åˆ«æ˜¯ä½¿ç”¨é‚»æ¥çŸ©é˜µå®ç°æ—¶ï¼‰é€šå¸¸æ•ˆç‡æ›´é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹© Kruskal ç®—æ³•çš„æƒ…å†µ&lt;/strong&gt;ï¼šå½“ä½ çš„å›¾æ˜¯&lt;strong&gt;ç¨€ç–å›¾&lt;/strong&gt;ï¼ˆè¾¹æ•° E ç›¸å¯¹é¡¶ç‚¹æ•° V è¾ƒå°‘ï¼‰æ—¶ï¼ŒKruskal ç®—æ³•çš„æ€§èƒ½é€šå¸¸æ›´ä¼˜ã€‚å¦å¤–ï¼Œå¦‚æœå›¾æœ¬èº«æ˜¯&lt;strong&gt;éè¿é€šå›¾&lt;/strong&gt;ï¼ŒKruskal ç®—æ³•å¤©ç„¶å¯ä»¥ç”Ÿæˆä¸€ä¸ª&lt;strong&gt;æœ€å°ç”Ÿæˆæ£®æ—&lt;/strong&gt;ï¼Œè€Œ Prim ç®—æ³•éœ€è¦é¢å¤–å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸è®°å¿†å£è¯€"&gt;ğŸ’ æ€»ç»“ä¸è®°å¿†å£è¯€
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥è®°ä½è¿™ä¸ªç®€å•çš„å£è¯€æ¥åŒºåˆ†å®ƒä»¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Primç®—æ³•&lt;/strong&gt;ï¼š&lt;code&gt;åŠ ç‚¹è¿æœ€å°ï¼Œå§‹ç»ˆä¸€æ£µæ ‘&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kruskalç®—æ³•&lt;/strong&gt;ï¼š&lt;code&gt;æ’åºåŠ å°è¾¹ï¼Œå¹¶æŸ¥é˜²ç¯è·¯&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£è¿™ä¸¤ä¸ªé‡è¦çš„ç®—æ³•ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå…·ä½“çš„å›¾åœ¨æ‰‹ä¸Šï¼Œä¸å¦¨åˆ†äº«ä¸€ä¸‹å®ƒçš„é¡¶ç‚¹å’Œè¾¹æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å…·ä½“åœ°è®¨è®ºå“ªç§ç®—æ³•ä¼šæ›´åˆé€‚ã€‚&lt;/p&gt;
&lt;h2 id="æœ€å°å †-prim"&gt;æœ€å°å † Prim
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ä¼˜åŒ–çš„ Prim ç®—æ³•æ˜¯ä¸€ç§é«˜æ•ˆæ±‚è§£åŠ æƒæ— å‘å›¾æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰çš„è´ªå¿ƒç®—æ³•ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»å…¶å·¥ä½œåŸç†ã€æ­¥éª¤ï¼Œå¹¶æä¾›ä¸€ä¸ªå®Œæ•´çš„ C++ ä»£ç å®ç°ã€‚&lt;/p&gt;
&lt;h2 id="-ç®—æ³•æ ¸å¿ƒæ€æƒ³"&gt;ğŸ” ç®—æ³•æ ¸å¿ƒæ€æƒ³
&lt;/h2&gt;&lt;p&gt;Prim ç®—æ³•çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªè¿é€šæ— å‘å›¾çš„æœ€å°ç”Ÿæˆæ ‘ï¼Œå³åŒ…å«æ‰€æœ‰é¡¶ç‚¹ä¸”è¾¹æƒæ€»å’Œæœ€å°çš„æ ‘çŠ¶å­å›¾ã€‚ç®—æ³•åŸºäº&lt;strong&gt;åˆ‡åˆ†å®šç†&lt;/strong&gt;ï¼šç»™å®šå›¾çš„ä»»æ„åˆ‡åˆ†ï¼Œè¿æ¥ä¸¤ä¸ªéƒ¨åˆ†çš„æœ€å°æƒè¾¹å¿…ç„¶å±äºæœ€å°ç”Ÿæˆæ ‘ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æœ€å°å †ä¼˜åŒ–åï¼Œç®—æ³•çš„æ ¸å¿ƒå˜ä¸ºï¼š&lt;strong&gt;å§‹ç»ˆä»å½“å‰ç”Ÿæˆæ ‘é›†åˆå‡ºå‘ï¼Œé€‰æ‹©ä¸€æ¡è¿æ¥æ ‘å†…é¡¶ç‚¹ä¸æ ‘å¤–é¡¶ç‚¹çš„æœ€å°æƒè¾¹&lt;/strong&gt;ã€‚æœ€å°å †åœ¨è¿™é‡Œç”¨äºé«˜æ•ˆåœ°åŠ¨æ€è·å–å½“å‰å¯ç”¨çš„æœ€å°æƒè¾¹ã€‚&lt;/p&gt;
&lt;h2 id="-ç®—æ³•è¯¦ç»†æ­¥éª¤"&gt;ğŸ“‹ ç®—æ³•è¯¦ç»†æ­¥éª¤
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨æœ€å°å †çš„ Prim ç®—æ³•æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºæ•°ç»„ &lt;code&gt;key[]&lt;/code&gt;è®°å½•æ¯ä¸ªé¡¶ç‚¹åˆ°å½“å‰ç”Ÿæˆæ ‘çš„æœ€å°è·ç¦»ï¼Œåˆå§‹ä¸ºæ— ç©·å¤§ï¼ˆé™¤èµ·å§‹é¡¶ç‚¹è®¾ä¸º0ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæ•°ç»„ &lt;code&gt;parent[]&lt;/code&gt;è®°å½•æœ€å°ç”Ÿæˆæ ‘ä¸­é¡¶ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå¸ƒå°”æ•°ç»„ &lt;code&gt;inMST[]&lt;/code&gt;æ ‡è®°é¡¶ç‚¹æ˜¯å¦å·²åŠ å…¥ç”Ÿæˆæ ‘ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼ŒæŒ‰è¾¹çš„æƒé‡æ’åºã€‚å°†èµ·å§‹é¡¶ç‚¹ï¼ˆæƒé‡ä¸º0ï¼‰åŠ å…¥å †ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†å †ä¸­é¡¶ç‚¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åªè¦æœ€å°å †ä¸ä¸ºç©ºï¼Œå°±å–å‡ºå †é¡¶é¡¶ç‚¹ &lt;code&gt;u&lt;/code&gt;ï¼ˆå½“å‰ä¸ç”Ÿæˆæ ‘è·ç¦»æœ€å°çš„é¡¶ç‚¹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;u&lt;/code&gt;å·²åœ¨ç”Ÿæˆæ ‘ä¸­ï¼Œåˆ™è·³è¿‡ã€‚å¦åˆ™ï¼Œå°†å…¶åŠ å…¥ç”Ÿæˆæ ‘ï¼Œå¹¶æ›´æ–°æ€»æƒé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°é‚»æ¥é¡¶ç‚¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;éå† &lt;code&gt;u&lt;/code&gt;çš„æ‰€æœ‰æœªè®¿é—®é‚»æ¥é¡¶ç‚¹ &lt;code&gt;v&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå­˜åœ¨è¾¹ &lt;code&gt;(u, v)&lt;/code&gt;çš„æƒé‡å°äº &lt;code&gt;v&lt;/code&gt;å½“å‰çš„ &lt;code&gt;key&lt;/code&gt;å€¼ï¼Œåˆ™æ›´æ–° &lt;code&gt;v&lt;/code&gt;çš„ &lt;code&gt;key&lt;/code&gt;å€¼ä¸ºè¯¥æƒé‡ï¼Œå¹¶å°†å…¶çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸º &lt;code&gt;u&lt;/code&gt;ï¼Œç„¶åå°† &lt;code&gt;v&lt;/code&gt;åŠå…¶æ–° &lt;code&gt;key&lt;/code&gt;å€¼åŠ å…¥æœ€å°å †ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»ˆæ­¢æ¡ä»¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“æ‰€æœ‰é¡¶ç‚¹éƒ½åŒ…å«åœ¨ç”Ÿæˆæ ‘ä¸­ï¼ˆå³å·²æ·»åŠ  &lt;code&gt;V-1&lt;/code&gt;æ¡è¾¹ï¼‰æ—¶ï¼Œç®—æ³•ç»“æŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-æ—¶é—´å¤æ‚åº¦åˆ†æ"&gt;â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ä½¿ç”¨å †ä¼˜åŒ–&lt;/strong&gt;ï¼šåŸºäºé‚»æ¥çŸ©é˜µçš„å®ç°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(VÂ²)ï¼Œé€‚åˆç¨ å¯†å›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æœ€å°å †ä¼˜åŒ–&lt;/strong&gt;ï¼šåŸºäºé‚»æ¥è¡¨çš„å®ç°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(E log V)&lt;/strong&gt;ï¼Œå…¶ä¸­ E æ˜¯è¾¹æ•°ï¼ŒV æ˜¯é¡¶ç‚¹æ•°ã€‚è¿™æ˜¯å› ä¸ºæ¯æ¡è¾¹æœ€å¤šè¢«å¤„ç†ä¸€æ¬¡ï¼Œè€Œå †çš„æ’å…¥å’Œæå–æœ€å°å€¼çš„æ“ä½œéƒ½æ˜¯å¯¹æ•°æ—¶é—´å¤æ‚åº¦ã€‚è¿™ä½¿å¾—ä¼˜åŒ–åçš„ç®—æ³•åœ¨å¤„ç†ç¨€ç–å›¾ï¼ˆè¾¹æ•° E è¿œå°äº VÂ²ï¼‰æ—¶æ•ˆç‡æ˜¾è‘—æå‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-c-ä»£ç å®ç°"&gt;ğŸ’» C++ ä»£ç å®ç°
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨ C++ STL ä¸­çš„ &lt;code&gt;priority_queue&lt;/code&gt;å®ç°çš„æœ€å°å †ä¼˜åŒ– Prim ç®—æ³•ã€‚ä»£ç å‡è®¾å›¾æ˜¯æ— å‘çš„ï¼Œå¹¶ä½¿ç”¨é‚»æ¥è¡¨å­˜å‚¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
#include &amp;lt;queue&amp;gt;
#include &amp;lt;climits&amp;gt;
using namespace std;
// ç”¨äºè¡¨ç¤ºå›¾ä¸­çš„ä¸€æ¡è¾¹
struct Edge {
int dest;
int weight;
};
// ç”¨äºæœ€å°å †çš„å…ƒç´ ï¼šå­˜å‚¨é¡¶ç‚¹ç¼–å·å’Œå…¶å¯¹åº”çš„keyå€¼ï¼ˆåˆ°MSTçš„æœ€å°è·ç¦»ï¼‰
struct MinHeapNode {
int vertex;
int key;
};
// æ¯”è¾ƒå™¨ï¼Œç”¨äºæ„å»ºæœ€å°å †
struct Compare {
bool operator()(const MinHeapNode&amp;amp; a, const MinHeapNode&amp;amp; b) {
return a.key &amp;gt; b.key;
}
};
// Primç®—æ³•å‡½æ•°
void primMST(vector&amp;lt;vector&amp;lt;Edge&amp;gt;&amp;gt;&amp;amp; graph, int startVertex) {
int V = graph.size(); // å›¾ä¸­é¡¶ç‚¹çš„æ•°é‡
vector&amp;lt;int&amp;gt; key(V, INT_MAX); // å­˜å‚¨é¡¶ç‚¹åˆ°MSTçš„æœ€å°è·ç¦»
vector&amp;lt;int&amp;gt; parent(V, -1); // å­˜å‚¨MSTä¸­çš„çˆ¶èŠ‚ç‚¹ä¿¡æ¯
vector&amp;lt;bool&amp;gt; inMST(V, false); // æ ‡è®°é¡¶ç‚¹æ˜¯å¦å·²åŠ å…¥MST
// åˆ›å»ºæœ€å°ä¼˜å…ˆé˜Ÿåˆ—
priority_queue&amp;lt;MinHeapNode, vector&amp;lt;MinHeapNode&amp;gt;, Compare&amp;gt; minHeap;
// åˆå§‹åŒ–èµ·å§‹é¡¶ç‚¹
key[startVertex] = 0;
minHeap.push({startVertex, 0});
int totalWeight = 0; // è®°å½•MSTçš„æ€»æƒé‡
while (!minHeap.empty()) {
// æå–å½“å‰keyå€¼æœ€å°çš„é¡¶ç‚¹
int u = minHeap.top().vertex;
minHeap.pop();
// å¦‚æœé¡¶ç‚¹å·²åœ¨MSTä¸­ï¼Œåˆ™è·³è¿‡
if (inMST[u]) continue;
inMST[u] = true; // å°†é¡¶ç‚¹åŠ å…¥MST
totalWeight += key[u]; // æ›´æ–°æ€»æƒé‡
// éå†uçš„æ‰€æœ‰é‚»æ¥é¡¶ç‚¹
for (const Edge&amp;amp; edge : graph[u]) {
int v = edge.dest;
int weight = edge.weight;
// å¦‚æœvä¸åœ¨MSTä¸­ï¼Œä¸”å‘ç°æ›´å°çš„è¿æ¥è¾¹
if (!inMST[v] &amp;amp;&amp;amp; weight &amp;lt; key[v]) {
key[v] = weight;
parent[v] = u;
minHeap.push({v, key[v]});
}
}
}
// è¾“å‡ºæœ€å°ç”Ÿæˆæ ‘
cout &amp;lt;&amp;lt; &amp;#34;æœ€å°ç”Ÿæˆæ ‘çš„è¾¹ï¼š&amp;#34; &amp;lt;&amp;lt; endl;
for (int i = 1; i &amp;lt; V; i++) {
if (parent[i] != -1) {
cout &amp;lt;&amp;lt; parent[i] &amp;lt;&amp;lt; &amp;#34; - &amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34; \tæƒé‡: &amp;#34; &amp;lt;&amp;lt; key[i] &amp;lt;&amp;lt; endl;
}
}
cout &amp;lt;&amp;lt; &amp;#34;æœ€å°ç”Ÿæˆæ ‘æ€»æƒé‡: &amp;#34; &amp;lt;&amp;lt; totalWeight &amp;lt;&amp;lt; endl;
}
int main() {
int V = 5; // é¡¶ç‚¹æ•°
vector&amp;lt;vector&amp;lt;Edge&amp;gt;&amp;gt; graph(V);
// æ·»åŠ è¾¹ï¼ˆæ„å»ºç¤ºä¾‹å›¾ï¼‰
graph[0].push_back({1, 2});
graph[0].push_back({3, 6});
graph[1].push_back({0, 2});
graph[1].push_back({2, 3});
graph[1].push_back({3, 8});
graph[1].push_back({4, 5});
graph[2].push_back({1, 3});
graph[2].push_back({4, 7});
graph[3].push_back({0, 6});
graph[3].push_back({1, 8});
graph[3].push_back({4, 9});
graph[4].push_back({1, 5});
graph[4].push_back({2, 7});
graph[4].push_back({3, 9});
// ä»é¡¶ç‚¹0å¼€å§‹æ‰§è¡ŒPrimç®—æ³•
primMST(graph, 0);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="-ä»£ç å…³é”®ç‚¹è§£é‡Š"&gt;ğŸ” ä»£ç å…³é”®ç‚¹è§£é‡Š
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç»“æ„é€‰æ‹©&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;vector&amp;lt;vector&amp;lt;Edge&amp;gt;&amp;gt;&lt;/code&gt;ä½œä¸ºé‚»æ¥è¡¨æ¥è¡¨ç¤ºå›¾ï¼Œé€‚åˆç¨€ç–å›¾ï¼Œèƒ½èŠ‚çœç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;priority_queue&lt;/code&gt;å®ç°æœ€å°å †ï¼Œç¡®ä¿èƒ½é«˜æ•ˆè·å–å½“å‰æœ€å°è¾¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é‡å¤å¤„ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥ &lt;code&gt;if (inMST[u]) continue;&lt;/code&gt;æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºåŒä¸€ä¸ªé¡¶ç‚¹å¯èƒ½è¢«å¤šæ¬¡åŠ å…¥å †ï¼ˆå½“å®ƒçš„keyå€¼è¢«æ›´æ–°æ—¶ï¼‰ï¼Œä½†åªéœ€è¦å¤„ç†ä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keyå€¼æ›´æ–°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å½“å‘ç°åˆ°æŸä¸ªé¡¶ç‚¹çš„æ›´å°æƒé‡çš„è¾¹æ—¶ï¼Œä¼šæ›´æ–°å…¶keyå€¼å¹¶å†æ¬¡å…¥å †ã€‚å †ä¸­å¯èƒ½å­˜åœ¨åŒä¸€é¡¶ç‚¹çš„å¤šä¸ªå‰¯æœ¬ï¼ˆå…·æœ‰ä¸åŒçš„keyå€¼ï¼‰ï¼Œä½†ç”±äºæ¯æ¬¡å¤„ç†çš„æ˜¯æœ€å°keyå€¼çš„é¡¶ç‚¹ï¼Œå¹¶ä¸”æœ‰&lt;code&gt;inMST&lt;/code&gt;æ ‡è®°ï¼Œç®—æ³• correctness å¯ä»¥ä¿è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“"&gt;ğŸ’ æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨æœ€å°å †ä¼˜åŒ–çš„ Prim ç®—æ³•é€šè¿‡é«˜æ•ˆåŠ¨æ€åœ°é€‰å–æœ€å°è¾¹ï¼Œæ˜¾è‘—æå‡äº†åœ¨ç¨€ç–å›¾ä¸­çš„æ€§èƒ½ã€‚å®ƒå®Œç¾ç»“åˆäº†è´ªå¿ƒç­–ç•¥ä¸é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œæ˜¯è§£å†³æœ€å°ç”Ÿæˆæ ‘é—®é¢˜çš„ç»å…¸æ–¹æ³•ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Prim ç®—æ³•ã€‚&lt;/p&gt;
&lt;h2 id="dijkstra"&gt;Dijkstra
&lt;/h2&gt;&lt;p&gt;Dijkstraç®—æ³•æ˜¯è§£å†³&lt;strong&gt;å•æºæœ€çŸ­è·¯å¾„é—®é¢˜&lt;/strong&gt;çš„ç»å…¸ç®—æ³•ï¼Œç‰¹åˆ«é€‚ç”¨äº&lt;strong&gt;æ²¡æœ‰è´Ÿæƒè¾¹&lt;/strong&gt;çš„åŠ æƒå›¾ã€‚ä¸‹é¢æˆ‘ä»¬æ¥æ·±å…¥äº†è§£å®ƒçš„å·¥ä½œåŸç†ã€å®ç°å’Œåº”ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="-dijkstra-ç®—æ³•å¦‚ä½•å·¥ä½œ"&gt;âš™ï¸ Dijkstra ç®—æ³•å¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;Dijkstraç®—æ³•æ˜¯ä¸€ç§&lt;strong&gt;è´ªå¿ƒç®—æ³•&lt;/strong&gt;ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šé€šè¿‡é€æ­¥ç¡®å®šä»æºç‚¹åˆ°å…¶ä»–å„é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œ&lt;strong&gt;æ¯ä¸€æ­¥éƒ½é€‰æ‹©ä¸€ä¸ªå½“å‰è·ç¦»æºç‚¹æœ€è¿‘çš„æœªè®¿é—®é¡¶ç‚¹&lt;/strong&gt;ï¼Œå¹¶æ›´æ–°å…¶é‚»å±…é¡¶ç‚¹çš„è·ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ç®—æ³•çš„ä¸»è¦æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è®¾ç½®ä¸€ä¸ªæ•°ç»„ &lt;code&gt;dist&lt;/code&gt;ï¼Œç”¨äºè®°å½•æºç‚¹åˆ°å„ä¸ªé¡¶ç‚¹çš„å½“å‰æœ€çŸ­è·ç¦»ã€‚åˆå§‹æ—¶ï¼Œæºç‚¹è‡ªèº«çš„è·ç¦»è®¾ä¸º0ï¼Œå…¶ä»–é¡¶ç‚¹è·ç¦»è®¾ä¸ºæ— ç©·å¤§ã€‚&lt;/li&gt;
&lt;li&gt;è®¾ç½®ä¸€ä¸ªé›†åˆï¼ˆæˆ–å¸ƒå°”æ•°ç»„ï¼‰ç”¨äºæ ‡è®°å“ªäº›é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„å·²ç»è¢«ç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;é€šå¸¸ä½¿ç”¨ä¸€ä¸ª**ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰**æ¥é«˜æ•ˆåœ°é€‰æ‹©å½“å‰è·ç¦»æœ€å°çš„æœªè®¿é—®é¡¶ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»å¾ªç¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å–å‡ºå½“å‰è·ç¦»æºç‚¹æœ€è¿‘çš„æœªè®¿é—®é¡¶ç‚¹ &lt;code&gt;u&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ‡è®°é¡¶ç‚¹ &lt;code&gt;u&lt;/code&gt;ä¸ºå·²è®¿é—®ï¼Œè¡¨ç¤ºæºç‚¹åˆ° &lt;code&gt;u&lt;/code&gt;çš„æœ€çŸ­è·ç¦»å·²ç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;éå†é¡¶ç‚¹ &lt;code&gt;u&lt;/code&gt;çš„æ‰€æœ‰æœªè®¿é—®çš„é‚»å±…é¡¶ç‚¹ &lt;code&gt;v&lt;/code&gt;ï¼Œè¿›è¡Œ&lt;strong&gt;æ¾å¼›æ“ä½œ&lt;/strong&gt;ï¼šæ£€æŸ¥å¦‚æœä»æºç‚¹å…ˆåˆ° &lt;code&gt;u&lt;/code&gt;ï¼Œå†ä» &lt;code&gt;u&lt;/code&gt;åˆ° &lt;code&gt;v&lt;/code&gt;çš„è·¯å¾„è·ç¦»æ˜¯å¦å°äºå½“å‰å·²çŸ¥çš„ä»æºç‚¹ç›´æ¥åˆ° &lt;code&gt;v&lt;/code&gt;çš„è·ç¦»ã€‚å³ï¼Œå¦‚æœ &lt;code&gt;dist[u] + weight(u, v) &amp;lt; dist[v]&lt;/code&gt;ï¼Œåˆ™æ›´æ–° &lt;code&gt;dist[v] = dist[u] + weight(u, v)&lt;/code&gt;ã€‚å¦‚æœ &lt;code&gt;v&lt;/code&gt;ä¸åœ¨é˜Ÿåˆ—ä¸­ï¼Œå°†å…¶åŠ å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»ˆæ­¢&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä¼˜å…ˆé˜Ÿåˆ—ä¸ºç©ºï¼Œæˆ–è€…æ‰€æœ‰é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„éƒ½å·²ç¡®å®šæ—¶ï¼Œç®—æ³•ç»“æŸã€‚æ­¤æ—¶ &lt;code&gt;dist&lt;/code&gt;æ•°ç»„ä¸­å­˜å‚¨çš„å°±æ˜¯æºç‚¹åˆ°å„ä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ—¶é—´å¤æ‚åº¦"&gt;ğŸ§® æ—¶é—´å¤æ‚åº¦
&lt;/h3&gt;&lt;p&gt;Dijkstraç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å–å†³äºæ‰€ä½¿ç”¨çš„æ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;æ•°æ®ç»“æ„&lt;/th&gt;
&lt;th&gt;æ—¶é—´å¤æ‚åº¦&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åŸºç¡€å®ç°&lt;/td&gt;
&lt;td&gt;æ•°ç»„æˆ–é“¾è¡¨&lt;/td&gt;
&lt;td&gt;O(VÂ²)&lt;/td&gt;
&lt;td&gt;ç¨ å¯†å›¾ï¼ˆè¾¹æ•°Eæ¥è¿‘VÂ²ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŒ–å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O((V + E) log V)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¨€ç–å›¾ï¼ˆè¾¹æ•°Eè¿œå°äºVÂ²ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä»£ç å®ç°c-ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ç‰ˆ"&gt;ğŸ“ ä»£ç å®ç°ï¼ˆC++ ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ç‰ˆï¼‰
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨C++æ ‡å‡†åº“ä¸­çš„ &lt;code&gt;priority_queue&lt;/code&gt;ï¼ˆä½œä¸ºæœ€å°å †ä½¿ç”¨ï¼‰å®ç°çš„Dijkstraç®—æ³•ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
#include &amp;lt;queue&amp;gt;
#include &amp;lt;climits&amp;gt;
using namespace std;
const int INF = INT_MAX; // ç”¨INT_MAXè¡¨ç¤ºæ— ç©·å¤§
// ä½¿ç”¨é‚»æ¥è¡¨å­˜å‚¨å›¾ï¼Œgraph[u] å­˜å‚¨ä»é¡¶ç‚¹uå‡ºå‘çš„æ‰€æœ‰è¾¹ (ç›®æ ‡é¡¶ç‚¹v, è¾¹æƒé‡w)
vector&amp;lt;vector&amp;lt;pair&amp;lt;int, int&amp;gt;&amp;gt;&amp;gt; graph;
vector&amp;lt;int&amp;gt; dijkstra(int source, int numVertices) {
// åˆå§‹åŒ–è·ç¦»æ•°ç»„ï¼Œæ‰€æœ‰è·ç¦»åˆå§‹ä¸ºæ— ç©·å¤§
vector&amp;lt;int&amp;gt; dist(numVertices, INF);
dist[source] = 0; // æºç‚¹åˆ°è‡ªèº«çš„è·ç¦»ä¸º0
// ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰ï¼Œå…ƒç´ ä¸ºpair&amp;lt;å½“å‰è·ç¦», é¡¶ç‚¹ç´¢å¼•&amp;gt;
// ä½¿ç”¨greater&amp;lt;pair&amp;lt;int, int&amp;gt;&amp;gt;ä½¿é˜Ÿåˆ—æˆä¸ºæœ€å°å †ï¼ŒæŒ‰è·ç¦»ä»å°åˆ°å¤§å‡ºé˜Ÿ
priority_queue&amp;lt;pair&amp;lt;int, int&amp;gt;, vector&amp;lt;pair&amp;lt;int, int&amp;gt;&amp;gt;, greater&amp;lt;pair&amp;lt;int, int&amp;gt;&amp;gt;&amp;gt; pq;
pq.push({0, source}); // å°†æºç‚¹åŠ å…¥é˜Ÿåˆ—
while (!pq.empty()) {
// å–å‡ºå½“å‰è·ç¦»æœ€å°çš„é¡¶ç‚¹
int currentDist = pq.top().first;
int u = pq.top().second;
pq.pop();
// é‡è¦ï¼šå¦‚æœé˜Ÿåˆ—ä¸­å­˜å‚¨çš„è·ç¦»å¤§äºå½“å‰è®¡ç®—å‡ºçš„æœ€çŸ­è·ç¦»ï¼Œè¯´æ˜æ­¤æ¡ç›®å·²è¿‡æ—¶ï¼Œè·³è¿‡
if (currentDist &amp;gt; dist[u]) {
continue;
}
// éå†å½“å‰é¡¶ç‚¹uçš„æ‰€æœ‰é‚»å±…
for (auto &amp;amp;edge : graph[u]) {
int v = edge.first;
int weight = edge.second;
// æ¾å¼›æ“ä½œï¼šå°è¯•é€šè¿‡é¡¶ç‚¹uç¼©çŸ­åˆ°vçš„è·¯å¾„
if (dist[u] + weight &amp;lt; dist[v]) {
dist[v] = dist[u] + weight; // æ›´æ–°æœ€çŸ­è·ç¦»
pq.push({dist[v], v}); // å°†æ›´æ–°åçš„é¡¶ç‚¹å’Œè·ç¦»åŠ å…¥é˜Ÿåˆ—
}
}
}
return dist;
}
int main() {
int n = 5; // é¡¶ç‚¹æ•°ï¼ˆå‡è®¾é¡¶ç‚¹ç¼–å·ä»0åˆ°4ï¼‰
graph.resize(n);
// æ„å»ºä¸€ä¸ªç¤ºä¾‹å›¾ï¼ˆæœ‰å‘å›¾ï¼‰
graph[0].push_back({1, 4});
graph[0].push_back({2, 1});
graph[1].push_back({3, 1});
graph[2].push_back({1, 2});
graph[2].push_back({3, 5});
graph[3].push_back({4, 3});
int source = 0;
vector&amp;lt;int&amp;gt; shortestDists = dijkstra(source, n);
cout &amp;lt;&amp;lt; &amp;#34;ä»æºç‚¹ &amp;#34; &amp;lt;&amp;lt; source &amp;lt;&amp;lt; &amp;#34; åˆ°å„é¡¶ç‚¹çš„æœ€çŸ­è·ç¦»ä¸ºï¼š&amp;#34; &amp;lt;&amp;lt; endl;
for (int i = 0; i &amp;lt; n; ++i) {
if (shortestDists[i] == INF) {
cout &amp;lt;&amp;lt; &amp;#34;é¡¶ç‚¹ &amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34;: ä¸å¯è¾¾&amp;#34; &amp;lt;&amp;lt; endl;
} else {
cout &amp;lt;&amp;lt; &amp;#34;é¡¶ç‚¹ &amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34;: &amp;#34; &amp;lt;&amp;lt; shortestDists[i] &amp;lt;&amp;lt; endl;
}
}
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…³é”®ç‚¹ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ å…³é”®ç‚¹ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¾å¼›æ“ä½œ&lt;/strong&gt;ï¼šè¿™æ˜¯ç®—æ³•çš„æ ¸å¿ƒæ­¥éª¤ï¼Œé€šè¿‡ä¸æ–­æ¯”è¾ƒå’Œæ›´æ–°æ¥æ‰¾åˆ°æ›´çŸ­çš„è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–&lt;/strong&gt;ï¼šä½¿ç”¨æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰æ˜¯ä¸ºäº†é«˜æ•ˆåœ°è·å–å½“å‰æœªè®¿é—®é¡¶ç‚¹ä¸­è·ç¦»æœ€å°çš„é¡¶ç‚¹ï¼Œè¿™æ˜¯ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦çš„å…³é”®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ°æ€§åˆ é™¤&lt;/strong&gt;ï¼šåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå½“æ›´æ–°ä¸€ä¸ªé¡¶ç‚¹çš„è·ç¦»æ—¶ï¼Œæˆ‘ä»¬æ˜¯å°†æ–°çš„ï¼ˆæ›´å°çš„ï¼‰è·ç¦»å’Œé¡¶ç‚¹å†æ¬¡åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹é˜Ÿåˆ—ä¸­å·²å­˜åœ¨çš„æ—§å€¼ã€‚å½“ä»é˜Ÿåˆ—ä¸­å–å‡ºè¯¥é¡¶ç‚¹æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡æ¯”è¾ƒå½“å‰è®°å½•çš„æœ€çŸ­è·ç¦»å’Œé˜Ÿåˆ—ä¸­å­˜å‚¨çš„è·ç¦»æ¥åˆ¤æ–­è¯¥æ¡ç›®æ˜¯å¦å·²è¿‡æ—¶ï¼Œå¦‚æœæ˜¯åˆ™è·³è¿‡ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„â€œæƒ°æ€§åˆ é™¤â€ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿæƒè¾¹çš„é™åˆ¶&lt;/strong&gt;ï¼šDijkstraç®—æ³•&lt;strong&gt;ä¸èƒ½å¤„ç†åŒ…å«è´Ÿæƒè¾¹çš„å›¾&lt;/strong&gt;ã€‚å› ä¸ºè´Ÿæƒè¾¹å¯èƒ½ç ´åè´ªå¿ƒé€‰æ‹©æ€§è´¨ï¼Œå¯¼è‡´ç®—æ³•æ— æ³•å¾—å‡ºæ­£ç¡®çš„æœ€çŸ­è·¯å¾„ã€‚å¦‚æœå›¾ä¸­å­˜åœ¨è´Ÿæƒè¾¹ï¼Œåº”è€ƒè™‘ä½¿ç”¨Bellman-Fordç­‰ç®—æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨åœºæ™¯"&gt;ğŸŒ å®é™…åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;Dijkstraç®—æ³•åœ¨è®¸å¤šé¢†åŸŸéƒ½æœ‰å¹¿æ³›åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ°å›¾å¯¼èˆªä¸è·¯å¾„è§„åˆ’&lt;/strong&gt;ï¼šå¦‚GPSå¯¼èˆªç³»ç»Ÿä¸­è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è¡Œè½¦è·¯çº¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œè·¯ç”±åè®®&lt;/strong&gt;ï¼šä¾‹å¦‚OSPFï¼ˆå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼‰åè®®ï¼Œç”¨äºåœ¨ç½‘ç»œä¸­ä¸ºæ•°æ®åŒ…é€‰æ‹©æœ€ä½³ä¼ è¾“è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸¸æˆå¼€å‘&lt;/strong&gt;ï¼šç”¨äºæ¸¸æˆä¸­çš„AIå¯»è·¯ï¼Œè®©è§’è‰²æ™ºèƒ½åœ°æ‰¾åˆ°åˆ°è¾¾ç›®æ ‡ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰©æµé…é€ä¸äº¤é€šè§„åˆ’&lt;/strong&gt;ï¼šä¼˜åŒ–è´§ç‰©é…é€è·¯çº¿æˆ–åŸå¸‚äº¤é€šæµã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Dijkstraç®—æ³•å‡­å€Ÿå…¶é«˜æ•ˆå’Œå¯é ï¼Œæˆä¸ºæ±‚è§£éè´Ÿæƒå›¾å•æºæœ€çŸ­è·¯å¾„é—®é¢˜çš„åŸºçŸ³ç®—æ³•ã€‚ç†è§£å…¶è´ªå¿ƒç­–ç•¥ã€æ¾å¼›æ“ä½œä»¥åŠä¼˜å…ˆé˜Ÿåˆ—çš„ä¼˜åŒ–æ–¹å¼ï¼Œå¯¹äºè§£å†³å®é™…ä¸­çš„æœ€çŸ­è·¯å¾„é—®é¢˜è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨Dijkstraç®—æ³•ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç»†èŠ‚æˆ–å˜ç§ç®—æ³•ï¼ˆå¦‚A*ç®—æ³•ï¼‰æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="prim--dijkstra"&gt;Prim &amp;amp; Dijkstra
&lt;/h2&gt;&lt;p&gt;Primç®—æ³•å’ŒDijkstraç®—æ³•ç¡®å®åœ¨æ€æƒ³å’Œç»“æ„ä¸Šæœ‰ç€æ·±åˆ»çš„ç›¸ä¼¼æ€§ï¼Œä½†å®ƒä»¬è¦è§£å†³çš„æ˜¯ä¸¤ä¸ªæ ¹æœ¬ä¸åŒçš„é—®é¢˜ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥ç›´è§‚å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;Primç®—æ³•&lt;/th&gt;
&lt;th&gt;Dijkstraç®—æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§£å†³é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€å°ç”Ÿæˆæ ‘ (MST)&lt;/strong&gt;ï¼šè¿æ¥æ‰€æœ‰é¡¶ç‚¹çš„æœ€å°ä»£ä»·å­å›¾&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•æºæœ€çŸ­è·¯å¾„&lt;/strong&gt;ï¼šä»æºç‚¹åˆ°å…¶ä»–é¡¶ç‚¹çš„æœ€å°æƒé‡è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®ä¿æ‰€æœ‰é¡¶ç‚¹ä»¥æœ€å°æ€»è¾¹æƒ&lt;strong&gt;è¿é€š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®ä¿ä»æºç‚¹åˆ°ä»»æ„é¡¶ç‚¹è·¯å¾„çš„æƒé‡æ€»å’Œ&lt;strong&gt;æœ€å°&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´ªå¿ƒç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡é€‰æ‹©è¿æ¥&lt;strong&gt;å½“å‰ç”Ÿæˆæ ‘&lt;/strong&gt;ä¸&lt;strong&gt;å¤–éƒ¨é¡¶ç‚¹&lt;/strong&gt;çš„&lt;strong&gt;æœ€å°æƒè¾¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡é€‰æ‹©&lt;strong&gt;è·ç¦»æºç‚¹æœ€è¿‘&lt;/strong&gt;çš„&lt;strong&gt;æœªç¡®å®šé¡¶ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾…åŠ©æ•°ç»„è®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¡¶ç‚¹åˆ°&lt;strong&gt;å½“å‰ç”Ÿæˆæ ‘&lt;/strong&gt;çš„æœ€å°è·ç¦»&lt;/td&gt;
&lt;td&gt;é¡¶ç‚¹åˆ°&lt;strong&gt;æºç‚¹&lt;/strong&gt;çš„å½“å‰æœ€çŸ­è·ç¦»ä¼°è®¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›¾çš„æ€§è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸é’ˆå¯¹&lt;strong&gt;æ— å‘å›¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸é’ˆå¯¹&lt;strong&gt;æœ‰å‘å›¾&lt;/strong&gt;æˆ–æ— å‘å›¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœå½¢å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€æ£µæ ‘ï¼ˆ&lt;strong&gt;Vä¸ªé¡¶ç‚¹ï¼ŒV-1æ¡è¾¹&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸€æ£µæœ€çŸ­è·¯å¾„æ ‘ï¼ˆ&lt;strong&gt;æ ¹åˆ°æ‰€æœ‰å¯è¾¾èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å°½ç®¡ç›®æ ‡ä¸åŒï¼Œä½†ä¸¤ç§ç®—æ³•åœ¨å®ç°ä¸Šå…±äº«äº†ç›¸åŒçš„â€œéª¨æ¶â€ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä»¬å®¹æ˜“è®©äººæ„Ÿåˆ°æ··æ·†çš„åŸå› ã€‚å®ƒä»¬çš„å…±é€šä¹‹å¤„ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚&lt;/p&gt;
&lt;h3 id="-ç®—æ³•æ¡†æ¶çš„ç›¸ä¼¼æ€§"&gt;ğŸ”µ ç®—æ³•æ¡†æ¶çš„ç›¸ä¼¼æ€§
&lt;/h3&gt;&lt;p&gt;ä¸¤ç§ç®—æ³•éƒ½éµå¾ªä¸€ä¸ªé«˜åº¦ç›¸ä¼¼çš„&lt;strong&gt;è´ªå¿ƒ&lt;/strong&gt;è¿­ä»£æ¡†æ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;ï¼šè®¾ç½®ä¸€ä¸ªèµ·å§‹ç‚¹ã€‚Primç®—æ³•å¯ä»¥æ˜¯ä»»ä¸€èµ·ç‚¹ï¼ŒDijkstraç®—æ³•æ˜¯æŒ‡å®šçš„æºç‚¹ã€‚ç®—æ³•éƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªå…³é”®å€¼æ•°ç»„ï¼ˆå¦‚ &lt;code&gt;key[]&lt;/code&gt;æˆ– &lt;code&gt;dist[]&lt;/code&gt;ï¼‰ï¼Œå¹¶å°†èµ·å§‹ç‚¹çš„å€¼è®¾ä¸º0ï¼Œå…¶ä½™è®¾ä¸ºæ— ç©·å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯è¿­ä»£&lt;/strong&gt;ï¼šç®—æ³•éƒ½å¾ªç¯æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½è¢«å¤„ç†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©&lt;/strong&gt;ï¼šä»å°šæœªåŠ å…¥æœ€ç»ˆé›†åˆçš„é¡¶ç‚¹ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ª&lt;strong&gt;å…³é”®å€¼æœ€å°&lt;/strong&gt;çš„é¡¶ç‚¹ &lt;code&gt;u&lt;/code&gt;åŠ å…¥é›†åˆã€‚å¯¹äºPrimï¼Œè¿™ä¸ªé›†åˆæ˜¯å½“å‰çš„æœ€å°ç”Ÿæˆæ ‘ï¼›å¯¹äºDijkstraï¼Œæ˜¯å·²ç¡®å®šæœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹é›†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¾å¼›/æ›´æ–°&lt;/strong&gt;ï¼šæ£€æŸ¥é¡¶ç‚¹ &lt;code&gt;u&lt;/code&gt;çš„æ‰€æœ‰é‚»æ¥é¡¶ç‚¹ &lt;code&gt;v&lt;/code&gt;ã€‚Primç®—æ³•ä¼š&lt;strong&gt;æ›´æ–°é¡¶ç‚¹våˆ°å½“å‰ç”Ÿæˆæ ‘çš„æœ€å°è·ç¦»&lt;/strong&gt;ï¼›Dijkstraç®—æ³•åˆ™ä¼šè¿›è¡Œ&lt;strong&gt;æ¾å¼›æ“ä½œ&lt;/strong&gt;ï¼Œåˆ¤æ–­å¦‚æœç»è¿‡ &lt;code&gt;u&lt;/code&gt;åˆ°è¾¾ &lt;code&gt;v&lt;/code&gt;æ˜¯å¦æ¯”å·²çŸ¥è·¯å¾„æ›´çŸ­ï¼Œå¦‚æœæ˜¯åˆ™æ›´æ–° &lt;code&gt;v&lt;/code&gt;çš„è·ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç»“æ„&lt;/strong&gt;ï¼šä¸ºäº†å®ç°é«˜æ•ˆçš„æœ€å°å€¼é€‰æ‹©ï¼Œä¸¤ç§ç®—æ³•éƒ½å¯ä»¥ä½¿ç”¨**ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰**è¿›è¡Œä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç†è§£æ ¸å¿ƒå·®å¼‚ä¸€ä¸ªå…³é”®ä¾‹å­"&gt;âš ï¸ ç†è§£æ ¸å¿ƒå·®å¼‚ï¼šä¸€ä¸ªå…³é”®ä¾‹å­
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è®©ä½ æ¸…æ™°ç†è§£ä¸¤è€…çš„æ ¹æœ¬åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç»å…¸ä¾‹å­ã€‚ä¸‹è¡¨æ¼”ç¤ºäº†åœ¨ä¸€ä¸ªå›¾ä¸­åˆ†åˆ«åº”ç”¨Primç®—æ³•å’ŒDijkstraç®—æ³•æ—¶ï¼Œé¡¶ç‚¹Bå’ŒCçš„â€œè·ç¦»â€æ˜¯å¦‚ä½•äº§ç”Ÿä¸åŒç»“æœçš„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é¡¶ç‚¹&lt;/th&gt;
&lt;th&gt;åœ¨Primç®—æ³•ä¸­çš„å«ä¹‰&lt;/th&gt;
&lt;th&gt;åœ¨Dijkstraç®—æ³•ä¸­çš„å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é¡¶ç‚¹B&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Båˆ°å½“å‰ç”Ÿæˆæ ‘çš„æœ€å°è¾¹æƒ&lt;/strong&gt;ï¼ˆä¾‹å¦‚è¾¹ABçš„æƒé‡2ï¼‰ã€‚ç®—æ³•åªå…³å¿ƒç”¨æœ€å°çš„ä»£ä»·æŠŠBè¿è¿›æ¥ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»æºç‚¹Aåˆ°Bçš„è·¯å¾„æ€»æƒé‡&lt;/strong&gt;ï¼ˆå³Aâ†’Bï¼Œæ€»æƒé‡ä¸º2ï¼‰ã€‚ç®—æ³•å…³å¿ƒçš„æ˜¯ä»Aå‡ºå‘èµ°åˆ°Bçš„æ€»æˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é¡¶ç‚¹C&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Cåˆ°å½“å‰ç”Ÿæˆæ ‘çš„æœ€å°è¾¹æƒ&lt;/strong&gt;ã€‚å¯èƒ½é€šè¿‡Bï¼ˆè¾¹BCæƒé‡1ï¼‰è¿æ¥ï¼Œæ‰€ä»¥â€œè·ç¦»â€æ˜¯1ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»æºç‚¹Aåˆ°Cçš„è·¯å¾„æ€»æƒé‡&lt;/strong&gt;ã€‚å¯èƒ½ç»è¿‡Bï¼ˆAâ†’Bâ†’Cï¼Œæ€»æƒé‡2+1=3ï¼‰ï¼Œæ‰€ä»¥â€œè·ç¦»â€æ˜¯3ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¿™ä¸ªä¾‹å­æ­ç¤ºäº†æ ¸å¿ƒå·®å¼‚ï¼š&lt;strong&gt;Primç®—æ³•å…³æ³¨çš„æ˜¯å±€éƒ¨è¾¹çš„æƒé‡ï¼Œè€ŒDijkstraç®—æ³•å…³æ³¨çš„æ˜¯å…¨å±€è·¯å¾„çš„ç´¯åŠ æƒé‡&lt;/strong&gt;ã€‚è¿™å¯¼è‡´äº†åœ¨é€‰æ‹©è¾¹æ—¶ï¼Œå³ä½¿é¢å¯¹ç›¸åŒçš„å›¾ï¼Œä¸¤è€…ä¹Ÿå¯èƒ½åšå‡ºä¸åŒçš„å†³ç­–ï¼Œä»è€Œå¾—åˆ°ä¸åŒçš„è§£ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸è®°å¿†å£è¯€-1"&gt;ğŸ’ æ€»ç»“ä¸è®°å¿†å£è¯€
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥è¿™æ ·è®°å¿†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Primç®—æ³•&lt;/strong&gt;çš„ç›®æ ‡æ˜¯â€œ&lt;strong&gt;é€šç›˜è€ƒè™‘ï¼Œæ€»ä»·æœ€ä½&lt;/strong&gt;â€ï¼Œå®ƒè¦çš„æ˜¯ç”¨æœ€å°çš„æ€»æˆæœ¬è¿æ¥æ‰€æœ‰ç‚¹ï¼Œåƒå»ºè®¾æˆæœ¬æœ€ä½çš„å…¬è·¯ç½‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dijkstraç®—æ³•&lt;/strong&gt;çš„ç›®æ ‡æ˜¯â€œ&lt;strong&gt;é€æ®µè®¡ç®—ï¼Œæˆ‘åˆ°ä½ çš„è·ç¦»æœ€çŸ­&lt;/strong&gt;â€ï¼Œå®ƒè¦çš„æ˜¯ä»èµ·ç‚¹åˆ°æ¯ä¸ªå…·ä½“ç‚¹çš„æœ€å¿«æˆ–æœ€çœé’±çš„è·¯çº¿ï¼Œåƒå¯¼èˆªè½¯ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£è¿™ä¸¤ä¸ªé‡è¦ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="bellman-ford"&gt;Bellman-Ford
&lt;/h2&gt;&lt;p&gt;Bellman-Ford ç®—æ³•æ˜¯è§£å†³&lt;strong&gt;å•æºæœ€çŸ­è·¯å¾„é—®é¢˜&lt;/strong&gt;çš„ä¸€ä¸ªé‡è¦ç®—æ³•ï¼Œå°¤å…¶ä»¥å…¶èƒ½å¤„ç†&lt;strong&gt;è´Ÿæƒè¾¹&lt;/strong&gt;çš„èƒ½åŠ›è€Œé—»åã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½å®ƒçš„æ ¸å¿ƒç‰¹å¾ï¼Œä¹‹åæˆ‘ä»¬å†æ·±å…¥èŠèŠå®ƒçš„å·¥ä½œåŸç†ã€ç‹¬ç‰¹ä¹‹å¤„ä»¥åŠå®é™…åº”ç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Bellman-Fordç®—æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ±‚è§£å¸¦æƒå›¾çš„å•æºæœ€çŸ­è·¯å¾„é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèƒ½åŠ›&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç†&lt;strong&gt;è´Ÿæƒè¾¹&lt;/strong&gt;ï¼Œå¹¶èƒ½&lt;strong&gt;æ£€æµ‹è´Ÿæƒå›è·¯&lt;/strong&gt;ï¼ˆå›¾ä¸­æ˜¯å¦å­˜åœ¨æ€»æƒé‡ä¸ºè´Ÿçš„ç¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æ³•æ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€è§„åˆ’/ç›´æ¥è¿­ä»£&lt;/strong&gt;ï¼šé€šè¿‡å¤šæ¬¡å…¨å±€æ¾å¼›æ“ä½œï¼Œé€æ­¥é€¼è¿‘æœ€çŸ­è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(V*E)ï¼ˆVä¸ºé¡¶ç‚¹æ•°ï¼ŒEä¸ºè¾¹æ•°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(V)ï¼ˆä¸»è¦å­˜å‚¨æºç‚¹åˆ°å„ç‚¹çš„è·ç¦»ç­‰ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠŸèƒ½å¼ºå¤§ï¼ˆèƒ½å¤„ç†è´Ÿæƒè¾¹å¹¶æ£€æµ‹è´Ÿæƒç¯ï¼‰ï¼Œå®ç°ç›¸å¯¹ç®€å•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ£åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¶é—´å¤æ‚åº¦é«˜äºDijkstraç®—æ³•ï¼Œä¸é€‚åˆå¤§è§„æ¨¡å›¾&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç®—æ³•å·¥ä½œåŸç†"&gt;ğŸ” ç®—æ³•å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;Bellman-Ford ç®—æ³•çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä»å•ä¸ªæºç‚¹å‡ºå‘ï¼Œåˆ°å›¾ä¸­æ‰€æœ‰å…¶ä»–é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚å…¶æ ¸å¿ƒæ“ä½œæ˜¯&lt;strong&gt;æ¾å¼›æ“ä½œ&lt;/strong&gt;ï¼Œå³æ£€æŸ¥å¯¹äºä¸€æ¡è¾¹ (u, v)ï¼Œæ˜¯å¦å­˜åœ¨é€šè¿‡ u åˆ°è¾¾ v çš„æ›´çŸ­è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;ç®—æ³•è¿‡ç¨‹æ¸…æ™°åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†æºç‚¹ s åˆ°è‡ªèº«çš„è·ç¦»è®¾ä¸º 0ï¼Œå³ &lt;code&gt;dist[s] = 0&lt;/code&gt;ã€‚å°†æºç‚¹ s åˆ°æ‰€æœ‰å…¶ä»–é¡¶ç‚¹çš„è·ç¦»åˆå§‹åŒ–ä¸ºä¸€ä¸ªæå¤§å€¼ï¼ˆå¦‚æ— ç©·å¤§ï¼‰ï¼Œè¡¨ç¤ºåˆå§‹æ—¶æœªçŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿­ä»£æ±‚è§£ï¼ˆæ¾å¼›æ“ä½œï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ç®—æ³•çš„æ ¸å¿ƒã€‚ç®—æ³•ä¼šè¿›è¡Œ &lt;strong&gt;V-1 è½®&lt;/strong&gt;æ¾å¼›æ“ä½œï¼ˆV æ˜¯é¡¶ç‚¹æ•°ï¼‰ã€‚åœ¨æ¯ä¸€è½®ä¸­ï¼Œ&lt;strong&gt;éå†å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹&lt;/strong&gt;ï¼Œå¯¹æ¯æ¡è¾¹ (u, v) å°è¯•è¿›è¡Œæ¾å¼›ï¼šå¦‚æœæ»¡è¶³ &lt;code&gt;dist[u] + w(u, v) &amp;lt; dist[v]&lt;/code&gt;ï¼ˆå…¶ä¸­ &lt;code&gt;w(u, v)&lt;/code&gt;æ˜¯è¾¹ (u, v) çš„æƒé‡ï¼‰ï¼Œåˆ™æ›´æ–° &lt;code&gt;dist[v] = dist[u] + w(u, v)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆæ˜¯ V-1 è½®ï¼Ÿ&lt;/strong&gt; å› ä¸ºåœ¨ä¸€å¹…æ²¡æœ‰è´Ÿæƒå›è·¯ï¼ˆä»æºç‚¹å¯è¾¾çš„ï¼‰çš„å›¾ä¸­ï¼Œä»»æ„ä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯å¾„æœ€å¤šåŒ…å« V-1 æ¡è¾¹ã€‚ç»è¿‡ V-1 è½®å¯¹æ‰€æœ‰è¾¹çš„æ¾å¼›ï¼Œè¶³ä»¥ä¿è¯æ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ£€éªŒè´Ÿæƒå›è·¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®Œæˆ V-1 è½®æ¾å¼›åï¼Œ&lt;strong&gt;å†è¿›è¡Œä¸€è½®é¢å¤–çš„æ¾å¼›æ“ä½œ&lt;/strong&gt;ã€‚å¦‚æœæ­¤æ—¶å‘ç°è¿˜æœ‰æŸæ¡è¾¹ (u, v) æ»¡è¶³ &lt;code&gt;dist[u] + w(u, v) &amp;lt; dist[v]&lt;/code&gt;ï¼Œåˆ™è¯æ˜å›¾ä¸­å­˜åœ¨&lt;strong&gt;ä»æºç‚¹å¯è¾¾çš„è´Ÿæƒå›è·¯&lt;/strong&gt;ã€‚æ­¤æ—¶ï¼Œç®—æ³•ä¼šæŠ¥å‘Šå­˜åœ¨è´Ÿæƒå›è·¯ï¼Œæ— æ³•å¾—å‡ºæ­£ç¡®çš„æœ€çŸ­è·¯å¾„ï¼ˆå› ä¸ºå¯ä»¥ä¸æ–­æ²¿ç€è¿™ä¸ªå›è·¯èµ°ï¼Œè®©è·¯å¾„é•¿åº¦æ— é™å‡å°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸-dijkstra-ç®—æ³•çš„æ¯”è¾ƒ"&gt;âš–ï¸ ä¸ Dijkstra ç®—æ³•çš„æ¯”è¾ƒ
&lt;/h3&gt;&lt;p&gt;ç†è§£ Bellman-Ford ç®—æ³•æ—¶ï¼Œä¸ç†Ÿæ‚‰çš„ Dijkstra ç®—æ³•å¯¹æ¯”ä¼šæ›´æœ‰å¸®åŠ©ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Bellman-Ford ç®—æ³•&lt;/th&gt;
&lt;th&gt;Dijkstra ç®—æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿæƒè¾¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸èƒ½å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿæƒç¯æ£€æµ‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥æ£€æµ‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— æ³•æ£€æµ‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(V*E)&lt;/td&gt;
&lt;td&gt;O((V+E) log V)ï¼ˆä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æ³•ç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠ¨æ€è§„åˆ’ï¼Œå¯¹æ‰€æœ‰è¾¹è¿›è¡Œå¤šè½®æ¾å¼›&lt;/td&gt;
&lt;td&gt;è´ªå¿ƒç®—æ³•ï¼Œæ¯æ¬¡é€‰æ‹©å½“å‰æœ€è¿‘çš„é¡¶ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Dijkstra ç®—æ³•é‡‡ç”¨&lt;strong&gt;è´ªå¿ƒ&lt;/strong&gt;ç­–ç•¥ï¼Œæ¯æ¬¡é€‰æ‹©å½“å‰è·ç¦»æºç‚¹æœ€è¿‘çš„æœªè®¿é—®é¡¶ç‚¹ï¼Œå¹¶è®¤ä¸ºå…¶æœ€çŸ­è·¯å¾„å·²ç¡®å®šã€‚è¿™ä¸ªç­–ç•¥åœ¨å­˜åœ¨è´Ÿæƒè¾¹æ—¶ä¼šå¤±æ•ˆï¼Œå› ä¸ºåç»­å¯èƒ½é€šè¿‡è´Ÿæƒè¾¹æ‰¾åˆ°æ›´çŸ­è·¯å¾„ã€‚è€Œ Bellman-Ford ç®—æ³•é€šè¿‡&lt;strong&gt;æ›´å…¨é¢&lt;/strong&gt;çš„å¤šè½®æ¾å¼›ï¼Œç¡®ä¿äº†å³ä½¿åœ¨æœ‰è´Ÿæƒè¾¹çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ‰¾åˆ°æ­£ç¡®çš„æœ€çŸ­è·¯å¾„ï¼ˆåªè¦æ²¡æœ‰è´Ÿæƒç¯ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å¤æ‚åº¦ä¸ä¼˜åŒ–"&gt;â±ï¸ å¤æ‚åº¦ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼šå¦‚å‰æ‰€è¿°ï¼Œä¸»è¦å¼€é”€åœ¨äº V-1 è½®å¾ªç¯ï¼Œæ¯è½®å¾ªç¯éå†æ‰€æœ‰ E æ¡è¾¹ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(V*E)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;ï¼šé€šå¸¸ä¸º O(V)ï¼Œç”¨äºå­˜å‚¨è·ç¦»æ•°ç»„å’Œå‰é©±èŠ‚ç‚¹æ•°ç»„ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–&lt;/strong&gt;ï¼šä¸€ä¸ªå¸¸è§çš„ä¼˜åŒ–æ˜¯&lt;strong&gt;æå‰ç»ˆæ­¢&lt;/strong&gt;ã€‚å¦‚æœåœ¨æŸä¸€è½®æ¾å¼›ä¸­ï¼Œæ²¡æœ‰ä»»ä½•è·ç¦»å€¼è¢«æ›´æ–°ï¼Œè¯´æ˜å·²ç»æ‰¾åˆ°æ‰€æœ‰æœ€çŸ­è·¯å¾„ï¼Œå¯ä»¥æå‰ç»“æŸå¾ªç¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç å®ç°"&gt;ğŸ–¥ï¸ ä»£ç å®ç°
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ Bellman-Ford ç®—æ³•çš„ä¸€ä¸ªç®€å• C++ å®ç°ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ ç†è§£å…¶å…·ä½“æ­¥éª¤ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
#include &amp;lt;limits.h&amp;gt;
using namespace std;
// å®šä¹‰è¾¹çš„ç»“æ„ä½“
struct Edge {
int u, v, weight; // u: èµ·ç‚¹, v: ç»ˆç‚¹, weight: æƒé‡
};
bool bellmanFord(int src, int V, int E, vector&amp;lt;Edge&amp;gt;&amp;amp; edges, vector&amp;lt;int&amp;gt;&amp;amp; dist) {
// 1. åˆå§‹åŒ–
dist.assign(V, INT_MAX);
dist[src] = 0;
// 2. è¿›è¡Œ V-1 è½®æ¾å¼›æ“ä½œ
for (int i = 1; i &amp;lt;= V - 1; i++) {
bool updated = false; // å¯é€‰ï¼šç”¨äºæå‰ç»ˆæ­¢çš„æ ‡è®°
for (int j = 0; j &amp;lt; E; j++) {
int u = edges[j].u;
int v = edges[j].v;
int w = edges[j].weight;
// é˜²æ­¢æº¢å‡ºï¼Œå¹¶åˆ¤æ–­èƒ½å¦æ¾å¼›
if (dist[u] != INT_MAX &amp;amp;&amp;amp; dist[u] + w &amp;lt; dist[v]) {
dist[v] = dist[u] + w;
updated = true; // æœ‰æ›´æ–°
}
}
// å¯é€‰ï¼šå¦‚æœæœ¬è½®æ²¡æœ‰æ›´æ–°ï¼Œå¯æå‰ç»“æŸ
// if (!updated) break;
}
// 3. æ£€æŸ¥è´Ÿæƒå›è·¯
for (int j = 0; j &amp;lt; E; j++) {
int u = edges[j].u;
int v = edges[j].v;
int w = edges[j].weight;
if (dist[u] != INT_MAX &amp;amp;&amp;amp; dist[u] + w &amp;lt; dist[v]) {
cout &amp;lt;&amp;lt; &amp;#34;å›¾ä¸­å­˜åœ¨ä»æºç‚¹å¯è¾¾çš„è´Ÿæƒå›è·¯ï¼&amp;#34; &amp;lt;&amp;lt; endl;
return false;
}
}
return true;
}
int main() {
int V = 5; // é¡¶ç‚¹æ•°
int E = 8; // è¾¹æ•°
vector&amp;lt;Edge&amp;gt; edges = {
{0, 1, -1}, {0, 2, 4},
{1, 2, 3}, {1, 3, 2}, {1, 4, 2},
{3, 2, 5}, {3, 1, 1},
{4, 3, -3}
};
vector&amp;lt;int&amp;gt; dist(V);
int source = 0;
if (bellmanFord(source, V, E, edges, dist)) {
cout &amp;lt;&amp;lt; &amp;#34;ä»é¡¶ç‚¹ &amp;#34; &amp;lt;&amp;lt; source &amp;lt;&amp;lt; &amp;#34; åˆ°å„é¡¶ç‚¹çš„æœ€çŸ­è·ç¦»ä¸ºï¼š&amp;#34; &amp;lt;&amp;lt; endl;
for (int i = 0; i &amp;lt; V; i++) {
if (dist[i] == INT_MAX)
cout &amp;lt;&amp;lt; &amp;#34;é¡¶ç‚¹ &amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34;: ä¸å¯è¾¾&amp;#34; &amp;lt;&amp;lt; endl;
else
cout &amp;lt;&amp;lt; &amp;#34;é¡¶ç‚¹ &amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34;: &amp;#34; &amp;lt;&amp;lt; dist[i] &amp;lt;&amp;lt; endl;
}
}
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å®é™…åº”ç”¨åœºæ™¯-1"&gt;ğŸŒ å®é™…åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;Bellman-Ford ç®—æ³•çš„ç‰¹æ€§ä½¿å…¶åœ¨ç‰¹å®šåœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œè·¯ç”±åè®®&lt;/strong&gt;ï¼šå¦‚æ—©æœŸçš„ RIP åè®®ï¼Œç”¨äºè®¡ç®—æœ€ä½³è·¯å¾„ï¼Œéœ€è¦èƒ½å¤„ç†å¤æ‚çš„ç½‘ç»œæˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡‘èå¥—åˆ©æ£€æµ‹&lt;/strong&gt;ï¼šè´Ÿæƒç¯å¯ä»¥æ¨¡æ‹Ÿå¥—åˆ©æœºä¼šï¼ˆé€šè¿‡ä¸€ç³»åˆ—è´§å¸å…‘æ¢äº§ç”Ÿæ— é£é™©åˆ©æ¶¦ï¼‰ï¼Œç®—æ³•å¯ç”¨äºæ£€æµ‹æ­¤ç±»å¾ªç¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº¤é€šè§„åˆ’ä¸å·®åˆ†çº¦æŸç³»ç»Ÿ&lt;/strong&gt;ï¼šå¤„ç†å¯èƒ½å¸¦æœ‰è´Ÿæƒé‡çš„è·¯å¾„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒBellman-Ford ç®—æ³•æ˜¯ä¸€ä½åŠŸèƒ½å¼ºå¤§ä½†é€Ÿåº¦ç¨æ…¢çš„â€œç‰¹å‹¤é˜Ÿå‘˜â€ã€‚å½“å›¾ä¸­å­˜åœ¨è´Ÿæƒè¾¹æˆ–éœ€è¦æ£€æµ‹è´Ÿæƒç¯æ—¶ï¼Œå®ƒå°±æ˜¯ä½ çš„å¾—åŠ›å·¥å…·ã€‚è™½ç„¶æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†å…¶å®ç°ç®€å•ï¼ŒåŠŸèƒ½ä¸“ä¸€ï¼Œåœ¨è§£å†³ç‰¹å®šé—®é¢˜æ—¶ä¸å¯æˆ–ç¼ºã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£ Bellman-Ford ç®—æ³•ã€‚å¦‚æœä½ å¯¹ç®—æ³•çš„æŸä¸ªç»†èŠ‚æˆ–å˜ç§ï¼ˆå¦‚ SPFAï¼‰ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£ Dijkstra å’Œ Bellman-Ford ç®—æ³•çš„åŒºåˆ«ï¼Œå…³é”®åœ¨äºçœ‹æ¸…å®ƒä»¬çš„è®¾è®¡åˆè¡·å’Œé€‚ç”¨åœºæ™¯ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Dijkstra ç®—æ³•&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Bellman-Ford ç®—æ³•&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è´ªå¿ƒç®—æ³•&lt;/strong&gt;ï¼šæ¯ä¸€æ­¥éƒ½é€‰æ‹©å½“å‰è·ç¦»æºç‚¹æœ€è¿‘çš„é¡¶ç‚¹ï¼Œå¹¶è®¤ä¸ºå…¶æœ€çŸ­è·¯å¾„å·²ç¡®å®šã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€è§„åˆ’/ç›´æ¥è¿­ä»£&lt;/strong&gt;ï¼šé€šè¿‡å¤šæ¬¡å…¨å±€æ¾å¼›æ“ä½œï¼Œé€æ­¥é€¼è¿‘æ‰€æœ‰å¯èƒ½çš„æœ€çŸ­è·¯å¾„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O((V+E) log V)&lt;/strong&gt;ï¼ˆä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼Œå¸¸è§äºç¨€ç–å›¾ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(V*E)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿæƒè¾¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸èƒ½å¤„ç†&lt;/strong&gt;ã€‚å­˜åœ¨è´Ÿæƒè¾¹æ—¶ï¼Œç®—æ³•å¯èƒ½å¾—å‡ºé”™è¯¯ç»“æœã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥å¤„ç†&lt;/strong&gt;ã€‚èƒ½å¤Ÿæ­£ç¡®è®¡ç®—å‡ºå«è´Ÿæƒè¾¹å›¾çš„æœ€çŸ­è·¯å¾„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿæƒç¯æ£€æµ‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— æ³•æ£€æµ‹&lt;/strong&gt;ã€‚å¦‚æœå›¾ä¸­å­˜åœ¨è´Ÿæƒç¯ï¼Œç®—æ³•å¯èƒ½é™·å…¥å¾ªç¯æˆ–ç»™å‡ºé”™è¯¯ç­”æ¡ˆã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥æ£€æµ‹&lt;/strong&gt;ã€‚ç®—æ³•å®Œæˆåï¼Œèƒ½é€šè¿‡é¢å¤–ä¸€è½®æ¾å¼›æ“ä½œåˆ¤æ–­å›¾ä¸­æ˜¯å¦å­˜åœ¨è´Ÿæƒç¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾¹æƒ&lt;strong&gt;éè´Ÿ&lt;/strong&gt;çš„å›¾ï¼Œå¦‚è·¯å¾„è§„åˆ’ã€ç½‘ç»œè·¯ç”±ï¼ˆOSPFåè®®ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;è¾¹æƒ&lt;strong&gt;å¯ä¸ºè´Ÿ&lt;/strong&gt;çš„å›¾ï¼Œæˆ–éœ€è¦&lt;strong&gt;æ£€æµ‹è´Ÿæƒç¯&lt;/strong&gt;çš„åœºæ™¯ï¼Œå¦‚é‡‘èå¥—åˆ©æ£€æµ‹ã€ç‰¹å®šç½‘ç»œè·¯ç”±ï¼ˆRIPåè®®ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç®—æ³•åŸç†"&gt;ğŸ” æ·±å…¥ç®—æ³•åŸç†
&lt;/h3&gt;&lt;p&gt;è¦ç†è§£è¡¨æ ¼ä¸­çš„å·®å¼‚ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥çœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Dijkstra çš„è´ªå¿ƒç­–ç•¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Dijkstra ç®—æ³•ä»ä¸€ä¸ªæºç‚¹å‡ºå‘ï¼Œç»´æŠ¤ä¸€ä¸ªâ€œå·²ç¡®å®šæœ€çŸ­è·¯å¾„â€çš„é¡¶ç‚¹é›†åˆã€‚åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œå®ƒéƒ½&lt;strong&gt;è´ªå¿ƒåœ°&lt;/strong&gt;é€‰æ‹©å½“å‰è·ç¦»æºç‚¹æœ€è¿‘çš„æœªå¤„ç†é¡¶ç‚¹ï¼Œå°†å…¶åŠ å…¥é›†åˆï¼Œç„¶åæ›´æ–°è¿™ä¸ªæ–°é¡¶ç‚¹çš„æ‰€æœ‰é‚»å±…çš„è·ç¦»ã€‚è¿™ä¸ªè¿‡ç¨‹åŸºäºä¸€ä¸ªå…³é”®å‡è®¾ï¼š&lt;strong&gt;ä¸€æ—¦ä¸€ä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„è¢«ç¡®å®šï¼Œå°±ä¸ä¼šå†æœ‰æ›´çŸ­çš„è·¯å¾„&lt;/strong&gt;ã€‚è¿™ä¸ªå‡è®¾åœ¨è¾¹æƒéè´Ÿæ—¶æˆç«‹ï¼Œå› ä¸ºåç»­è·¯å¾„çš„ç´¯åŠ åªä¼šä½¿è·ç¦»å˜å¤§ã€‚ä½†å¦‚æœå­˜åœ¨è´Ÿæƒè¾¹ï¼Œè¿™ä¸ªå‡è®¾å°±è¢«æ‰“ç ´äº†ï¼Œå¯èƒ½å¯¼è‡´é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Bellman-Ford çš„æ¾å¼›è¿­ä»£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Bellman-Ford ç®—æ³•åˆ™é‡‡å–äº†ä¸€ç§æ›´â€œæš´åŠ›â€ä½†ä¹Ÿæ›´å…¨é¢çš„ç­–ç•¥ã€‚å®ƒä¸å…³å¿ƒé¡¶ç‚¹çš„å¤„ç†é¡ºåºï¼Œè€Œæ˜¯ç®€å•åœ°å¯¹å›¾ä¸­&lt;strong&gt;æ‰€æœ‰è¾¹&lt;/strong&gt;è¿›è¡Œ &lt;strong&gt;V-1 è½®&lt;/strong&gt;æ¾å¼›æ“ä½œï¼ˆV æ˜¯é¡¶ç‚¹æ•°ï¼‰ã€‚æ¯ä¸€è½®æ¾å¼›éƒ½å¯èƒ½è®©æœ€çŸ­è·¯å¾„ä¿¡æ¯å‘å‰ä¼ æ’­ä¸€æ­¥ã€‚ç»è¿‡ V-1 è½®åï¼Œä»æºç‚¹å‡ºå‘ã€ç»è¿‡è¾¹æ•°ä¸è¶…è¿‡ V-1 æ¡çš„æ‰€æœ‰å¯èƒ½è·¯å¾„éƒ½è¢«è€ƒè™‘åˆ°äº†ï¼ˆå› ä¸ºæœ€çŸ­è·¯å¾„é€šå¸¸ä¸å«ç¯ï¼Œæœ€å¤š V-1 æ¡è¾¹ï¼‰ã€‚ä¹‹åï¼Œå®ƒè¿˜ä¼šè¿›è¡Œç¬¬ V è½®æ¾å¼›ï¼Œå¦‚æœä»»ä½•é¡¶ç‚¹çš„è·ç¦»è¿˜èƒ½è¢«æ›´æ–°ï¼Œå°±è¯æ˜å›¾ä¸­å­˜åœ¨&lt;strong&gt;è´Ÿæƒç¯&lt;/strong&gt;ï¼ˆæ€»æƒé‡ä¸ºè´Ÿçš„ç¯ï¼‰ï¼Œè¿™æ„å‘³ç€æŸäº›ç‚¹çš„æœ€çŸ­è·¯å¾„å¯ä»¥æ— é™å‡å°ï¼ˆè´Ÿæ— ç©·ï¼‰ï¼Œå› æ­¤ä¸å­˜åœ¨ç¡®å®šçš„æœ€çŸ­è·¯å¾„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç†è§£è´Ÿæƒè¾¹å’Œè´Ÿæƒç¯çš„å½±å“"&gt;âš ï¸ ç†è§£è´Ÿæƒè¾¹å’Œè´Ÿæƒç¯çš„å½±å“
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸¤ç§ç®—æ³•æœ€æ ¹æœ¬çš„åŒºåˆ«æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆ Dijkstra â€œæ€•â€è´Ÿæƒè¾¹ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æƒ³è±¡ä¸€ä¸ªç®€å•çš„ä¸‰è§’å…³ç³»ï¼šé¡¶ç‚¹ Aã€Bã€Cï¼Œè¾¹ä¸º Aâ†’Bï¼ˆæƒé‡ 5ï¼‰ï¼ŒAâ†’Cï¼ˆæƒé‡ 6ï¼‰ï¼ŒCâ†’Bï¼ˆæƒé‡ -2ï¼‰ã€‚Dijkstra ç®—æ³•ä¼šå…ˆç¡®å®š Aâ†’B çš„æœ€çŸ­è·ç¦»ä¸º 5ã€‚ç„¶åå®ƒå¤„ç† Cï¼Œä½†å³ä½¿å‘ç°äº†è·¯å¾„ Aâ†’Câ†’Bï¼ˆæ€»æƒé‡ 6 + (-2) = 4ï¼‰æ›´çŸ­ï¼Œå®ƒä¹Ÿä¸ä¼šå›å¤´å»æ›´æ–°å·²ç»â€œç¡®å®šâ€çš„ B çš„è·ç¦»ï¼Œä»è€Œå¯¼è‡´é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Bellman-Ford å¦‚ä½•åº”å¯¹è´Ÿæƒç¯ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è´Ÿæƒç¯çš„å­˜åœ¨æ„å‘³ç€ä½ å¯ä»¥ç»•ç€è¿™ä¸ªç¯èµ°æ— æ•°åœˆï¼Œè®©è·¯å¾„æ€»æˆæœ¬æ— é™é™ä½ã€‚å› æ­¤ï¼Œä»ç¯ä¸Šä»»æ„é¡¶ç‚¹å¯è¾¾çš„æŸäº›é¡¶ç‚¹ï¼Œå…¶â€œæœ€çŸ­â€è·¯å¾„é•¿åº¦å®é™…ä¸Šæ˜¯è´Ÿæ— ç©·ã€‚Bellman-Ford ç®—æ³•çš„ä»·å€¼å°±åœ¨äºå®ƒèƒ½&lt;strong&gt;æ£€æµ‹å¹¶æŠ¥å‘Š&lt;/strong&gt;è¿™ç§æƒ…å†µï¼Œå‘Šè¯‰ä½ â€œæ— è§£â€ï¼Œè€Œä¸æ˜¯ç»™ä½ ä¸€ä¸ªé”™è¯¯çš„ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ç®—æ³•"&gt;ğŸ› ï¸ å¦‚ä½•é€‰æ‹©ç®—æ³•ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é¢å¯¹å®é™…é—®é¢˜æ—¶ï¼Œä½ çš„é€‰æ‹©æ ‡å‡†éå¸¸æ¸…æ™°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å›¾ä¸­æœ‰è´Ÿæƒè¾¹æˆ–éœ€è¦æ£€æµ‹è´Ÿæƒç¯å—ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;ï¼šæ¯«ä¸çŠ¹è±«åœ°é€‰æ‹© &lt;strong&gt;Bellman-Ford ç®—æ³•&lt;/strong&gt;ã€‚è¿™æ˜¯å®ƒçš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦&lt;/strong&gt;ï¼šä¼˜å…ˆé€‰æ‹©æ•ˆç‡æ›´é«˜çš„ &lt;strong&gt;Dijkstra ç®—æ³•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›¾çš„è§„æ¨¡å¦‚ä½•ï¼Ÿï¼ˆåœ¨ä¸¤è€…éƒ½é€‚ç”¨æ—¶è€ƒè™‘ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;ç¨€ç–å›¾&lt;/strong&gt;ï¼ˆè¾¹æ•° E è¿œå°äºé¡¶ç‚¹æ•° V çš„å¹³æ–¹ï¼‰ï¼Œä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–çš„ Dijkstra ç®—æ³•é€šå¸¸æ›´å¿«ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;ç¨ å¯†å›¾&lt;/strong&gt;ï¼ˆè¾¹æ•° E æ¥è¿‘ VÂ²ï¼‰ï¼ŒBellman-Ford çš„å¸¸æ•°å› å­å¯èƒ½æ›´å°ï¼Œæœ‰æ—¶å®ç°ç®€å•ä¹Ÿæ˜¯ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸è®°å¿†å£è¯€-2"&gt;ğŸ“ æ€»ç»“ä¸è®°å¿†å£è¯€
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥è®°ä½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Dijkstraç®—æ³•&lt;/strong&gt;ï¼š&lt;code&gt;è´ªå¿ƒé€‰è¿‘é‚»ï¼Œè´Ÿæƒå°±å¤±çµ&lt;/code&gt;ã€‚é€‚ç”¨äºè¾¹æƒéè´Ÿçš„åœºæ™¯ï¼Œæ•ˆç‡é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bellman-Fordç®—æ³•&lt;/strong&gt;ï¼š&lt;code&gt;å…¨å±€å¤šæ¾å¼›ï¼Œè´Ÿæƒä¹Ÿèƒ½è¡Œï¼Œç¯å¦å¯åˆ¤å®š&lt;/code&gt;ã€‚åŠŸèƒ½æ›´å¼ºï¼Œèƒ½å¤„ç†è´Ÿæƒè¾¹å’Œæ£€æµ‹è´Ÿæƒç¯ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£è¿™ä¸¤ä¸ªé‡è¦çš„ç®—æ³•ï¼å¦‚æœä½ æœ‰å…·ä½“çš„å›¾ä¾‹æˆ–åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥åˆ†æã€‚&lt;/p&gt;
&lt;h2 id="floyd"&gt;Floyd
&lt;/h2&gt;&lt;p&gt;Floydç®—æ³•æ˜¯ä¸€ç§éå¸¸ç»å…¸ä¸”å®ç”¨çš„ç®—æ³•ï¼Œç”¨äºè§£å†³&lt;strong&gt;åŠ æƒå›¾ä¸­æ‰€æœ‰é¡¶ç‚¹å¯¹ï¼ˆå¤šæºï¼‰ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é—®é¢˜&lt;/strong&gt;ã€‚å®ƒå‡­å€Ÿå…¶ç®€æ´è€Œå¼ºå¤§çš„æ€æƒ³ï¼Œåœ¨å›¾è®ºå’Œå®é™…åº”ç”¨ä¸­å æœ‰é‡è¦åœ°ä½ã€‚&lt;/p&gt;
&lt;h3 id="æ ¸å¿ƒåŸç†åŠ¨æ€è§„åˆ’"&gt;&lt;strong&gt;æ ¸å¿ƒåŸç†ï¼šåŠ¨æ€è§„åˆ’&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Floydç®—æ³•æœ¬è´¨ä¸Šæ˜¯ä¸€ç§&lt;strong&gt;åŠ¨æ€è§„åˆ’&lt;/strong&gt;ç®—æ³•ã€‚å®ƒçš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šé€æ­¥å°è¯•å°†å›¾ä¸­çš„æ¯ä¸€ä¸ªé¡¶ç‚¹ä½œä¸º&lt;strong&gt;ä¸­è½¬ç«™&lt;/strong&gt;ï¼Œæ£€æŸ¥å¯¹äºä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ &lt;code&gt;i&lt;/code&gt;å’Œ &lt;code&gt;j&lt;/code&gt;ï¼Œå¦‚æœé€šè¿‡è¿™ä¸ªä¸­è½¬ç«™ &lt;code&gt;k&lt;/code&gt;èƒ½å¤Ÿç¼©çŸ­å®ƒä»¬ä¹‹é—´çš„å·²çŸ¥è·ç¦»ï¼Œå°±æ›´æ–°è¿™ä¸ªæ›´çŸ­çš„è·ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¯ä»¥ç”¨å…¶&lt;strong&gt;çŠ¶æ€è½¬ç§»æ–¹ç¨‹&lt;/strong&gt;æ¸…æ™°åœ°è¡¨ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;dist[i][j] = min( dist[i][j], dist[i][k] + dist[k][j] )
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼Œ&lt;code&gt;dist[i][j]&lt;/code&gt;è¡¨ç¤ºä»é¡¶ç‚¹ &lt;code&gt;i&lt;/code&gt;åˆ°é¡¶ç‚¹ &lt;code&gt;j&lt;/code&gt;çš„å½“å‰å·²çŸ¥æœ€çŸ­è·ç¦»ã€‚&lt;/p&gt;
&lt;h3 id="ç®—æ³•æ­¥éª¤è¯¦è§£"&gt;&lt;strong&gt;ç®—æ³•æ­¥éª¤è¯¦è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Floydç®—æ³•çš„å®ç°éå¸¸è§„æ•´ï¼Œé€šå¸¸éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–è·ç¦»çŸ©é˜µ&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ &lt;code&gt;dist[][]&lt;/code&gt;ï¼Œç”¨å®ƒæ¥è¡¨ç¤ºå›¾ä¸­æ‰€æœ‰é¡¶ç‚¹å¯¹ä¹‹é—´çš„ç›´æ¥è·ç¦»ã€‚åˆå§‹æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœé¡¶ç‚¹ &lt;code&gt;i&lt;/code&gt;å’Œ &lt;code&gt;j&lt;/code&gt;ä¹‹é—´æœ‰è¾¹ç›´æ¥ç›¸è¿ï¼Œåˆ™ &lt;code&gt;dist[i][j]&lt;/code&gt;è®¾ä¸ºè¯¥è¾¹çš„æƒé‡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;i&lt;/code&gt;å’Œ &lt;code&gt;j&lt;/code&gt;æ˜¯åŒä¸€ä¸ªé¡¶ç‚¹ï¼Œåˆ™ &lt;code&gt;dist[i][j] = 0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœé¡¶ç‚¹ &lt;code&gt;i&lt;/code&gt;å’Œ &lt;code&gt;j&lt;/code&gt;ä¹‹é—´æ²¡æœ‰ç›´æ¥è¾¹ç›¸è¿ï¼Œåˆ™ &lt;code&gt;dist[i][j]&lt;/code&gt;åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°ï¼ˆä»£è¡¨æ— ç©·å¤§ï¼Œå³ä¸å¯è¾¾ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸‰é‡å¾ªç¯æ›´æ–°&lt;/strong&gt;ï¼šè¿™æ˜¯ç®—æ³•çš„æ ¸å¿ƒã€‚ä¾æ¬¡å°†æ¯ä¸ªé¡¶ç‚¹ &lt;code&gt;k&lt;/code&gt;(ä»0åˆ°n-1) ä½œä¸ºæ½œåœ¨çš„ä¸­è½¬ç«™ï¼Œç„¶åéå†æ‰€æœ‰é¡¶ç‚¹å¯¹ &lt;code&gt;(i, j)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;å¯¹äº k ä» 0 åˆ° n-1ï¼š
å¯¹äº i ä» 0 åˆ° n-1ï¼š
å¯¹äº j ä» 0 åˆ° n-1ï¼š
å¦‚æœ dist[i][k] + dist[k][j] &amp;lt; dist[i][j]ï¼š
åˆ™æ›´æ–° dist[i][j] = dist[i][k] + dist[k][j]
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•ç»“æŸ&lt;/strong&gt;ï¼šå½“ä¸‰é‡å¾ªç¯æ‰§è¡Œå®Œæ¯•åï¼Œ&lt;code&gt;dist[][]&lt;/code&gt;çŸ©é˜µä¸­å­˜å‚¨çš„å°±æ˜¯æ‰€æœ‰é¡¶ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿè¿‡ç¨‹"&gt;&lt;strong&gt;ä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿè¿‡ç¨‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«3ä¸ªé¡¶ç‚¹çš„å›¾ï¼Œå…¶é‚»æ¥çŸ©é˜µåˆå§‹åŒ–å¦‚ä¸‹ï¼ˆâˆ ä»£è¡¨æ— ç©·å¤§ï¼‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;A&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;B&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;C&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;A&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;âˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;B&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âˆ&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;C&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;âˆ&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä»¥é¡¶ç‚¹Aï¼ˆk=0ï¼‰ä½œä¸ºä¸­è½¬ç«™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥æ‰€æœ‰ &lt;code&gt;i, j&lt;/code&gt;ï¼Œå‘ç°å¯¹äº &lt;code&gt;C -&amp;gt; A -&amp;gt; B&lt;/code&gt;ï¼š&lt;code&gt;dist[C][A] + dist[A][B] = 1 + 4 = 5&lt;/code&gt;ã€‚è¿™æ¯” &lt;code&gt;dist[C][B] = âˆ&lt;/code&gt;å°ï¼Œæ‰€ä»¥æ›´æ–° &lt;code&gt;dist[C][B] = 5&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä»¥é¡¶ç‚¹Bï¼ˆk=1ï¼‰ä½œä¸ºä¸­è½¬ç«™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥å‘ç° &lt;code&gt;A -&amp;gt; B -&amp;gt; C&lt;/code&gt;ï¼š&lt;code&gt;dist[A][B] + dist[B][C] = 4 + 2 = 6&lt;/code&gt;ã€‚è¿™æ¯” &lt;code&gt;dist[A][C] = âˆ&lt;/code&gt;å°ï¼Œæ‰€ä»¥æ›´æ–° &lt;code&gt;dist[A][C] = 6&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä»¥é¡¶ç‚¹Cï¼ˆk=2ï¼‰ä½œä¸ºä¸­è½¬ç«™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥å‘ç° &lt;code&gt;B -&amp;gt; C -&amp;gt; A&lt;/code&gt;ï¼š&lt;code&gt;dist[B][C] + dist[C][A] = 2 + 1 = 3&lt;/code&gt;ã€‚è¿™æ¯” &lt;code&gt;dist[B][A] = âˆ&lt;/code&gt;å°ï¼Œæ‰€ä»¥æ›´æ–° &lt;code&gt;dist[B][A] = 3&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€ç»ˆï¼Œæˆ‘ä»¬å¾—åˆ°æ‰€æœ‰é¡¶ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„è·ç¦»çŸ©é˜µã€‚&lt;/p&gt;
&lt;h3 id="ç®—æ³•ç‰¹æ€§ä¸ä¼˜åŠ£"&gt;&lt;strong&gt;ç®—æ³•ç‰¹æ€§ä¸ä¼˜åŠ£&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ä¼˜ç‚¹"&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•æœ‰æ•ˆ&lt;/strong&gt;ï¼šç®—æ³•æ€æƒ³ç›´è§‚ï¼Œä»£ç å®ç°éå¸¸ç®€æ´ï¼Œä»…éœ€ä¸‰é‡å¾ªç¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæºæœ€çŸ­è·¯å¾„&lt;/strong&gt;ï¼šä¸€æ¬¡æ‰§è¡Œå°±èƒ½æ±‚å‡ºå›¾ä¸­æ‰€æœ‰é¡¶ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚åº”æ€§å¼º&lt;/strong&gt;ï¼šèƒ½å¤Ÿå¤„ç†&lt;strong&gt;æœ‰å‘å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;æ— å‘å›¾&lt;/strong&gt;ï¼Œå¹¶ä¸”å¯ä»¥æ¥å—è¾¹çš„æƒé‡ä¸º&lt;strong&gt;è´Ÿæ•°&lt;/strong&gt;ï¼ˆåªè¦å›¾ä¸­ä¸å­˜åœ¨æ€»æƒé‡ä¸ºè´Ÿçš„ç¯ï¼Œå³â€œè´Ÿæƒå›è·¯â€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¼ºç‚¹"&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦è¾ƒé«˜&lt;/strong&gt;ï¼šç”±äºä¸‰é‡å¾ªç¯ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(nÂ³)&lt;/strong&gt;ï¼Œå…¶ä¸­ n æ˜¯é¡¶ç‚¹æ•°ã€‚å› æ­¤ï¼Œå®ƒä¸é€‚åˆå¤„ç†é¡¶ç‚¹æ•°é‡éå¸¸å¤§çš„å›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦è¾ƒé«˜&lt;/strong&gt;ï¼šéœ€è¦ç»´æŠ¤ä¸€ä¸ª nÃ—n çš„çŸ©é˜µï¼Œç©ºé—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(nÂ²)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ä»£ç å®ç°c"&gt;&lt;strong&gt;ä»£ç å®ç°ï¼ˆC++ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯Floydç®—æ³•çš„ä¸€ä¸ªç®€æ´C++å®ç°ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
using namespace std;
const int INF = 1e9; // ç”¨ä¸€ä¸ªå¾ˆå¤§çš„æ•°ä»£è¡¨æ— ç©·å¤§
void floydWarshall(vector&amp;lt;vector&amp;lt;int&amp;gt;&amp;gt;&amp;amp; graph, int n) {
// åˆå§‹åŒ–è·ç¦»çŸ©é˜µ
vector&amp;lt;vector&amp;lt;int&amp;gt;&amp;gt; dist = graph;
// æ ¸å¿ƒéƒ¨åˆ†ï¼šä¸‰é‡å¾ªç¯
for (int k = 0; k &amp;lt; n; ++k) {
for (int i = 0; i &amp;lt; n; ++i) {
for (int j = 0; j &amp;lt; n; ++j) {
// é˜²æ­¢æº¢å‡ºï¼Œæ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
if (dist[i][k] &amp;lt; INF &amp;amp;&amp;amp; dist[k][j] &amp;lt; INF) {
dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);
}
}
}
}
// è¾“å‡ºç»“æœ
cout &amp;lt;&amp;lt; &amp;#34;æ‰€æœ‰é¡¶ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·ç¦»ï¼š&amp;#34; &amp;lt;&amp;lt; endl;
for (int i = 0; i &amp;lt; n; ++i) {
for (int j = 0; j &amp;lt; n; ++j) {
if (dist[i][j] == INF)
cout &amp;lt;&amp;lt; &amp;#34;INF &amp;#34;;
else
cout &amp;lt;&amp;lt; dist[i][j] &amp;lt;&amp;lt; &amp;#34; &amp;#34;;
}
cout &amp;lt;&amp;lt; endl;
}
}
int main() {
int n = 4; // é¡¶ç‚¹æ•°
vector&amp;lt;vector&amp;lt;int&amp;gt;&amp;gt; graph = { {0, 3, INF, 7},
{8, 0, 2, INF},
{5, INF, 0, 1},
{2, INF, INF, 0} };
floydWarshall(graph, n);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="ä¸»è¦åº”ç”¨åœºæ™¯"&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Floydç®—æ³•åœ¨éœ€è¦è®¡ç®—å…¨å±€æœ€çŸ­è·¯å¾„çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œè·¯ç”±è§„åˆ’&lt;/strong&gt;ï¼šç”¨äºæŸäº›è·¯ç”±åè®®ä¸­ï¼Œè®¡ç®—ç½‘ç»œä¸­æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´çš„æœ€ä½³ä¼ è¾“è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº¤é€šç½‘ç»œåˆ†æ&lt;/strong&gt;ï¼šåˆ†æåœ°å›¾ä¸Šæ‰€æœ‰åŸå¸‚æˆ–åœ°ç‚¹ä¹‹é—´çš„æœ€çŸ­è¡Œè½¦è·¯çº¿æˆ–æœ€çŸ­é€šè¡Œæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³ç³»ä¼ é€’é—­åŒ…&lt;/strong&gt;ï¼šç»è¿‡é€‚å½“ä¿®æ”¹ï¼Œå¯ä»¥ç”¨äºåˆ¤æ–­å›¾ä¸­é¡¶ç‚¹ä¹‹é—´çš„è¿é€šæ€§ï¼ˆå³è®¡ç®—ä¼ é€’é—­åŒ…ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£Floydç®—æ³•ï¼å¦‚æœä½ å¯¹ç‰¹å®šç»†èŠ‚æˆ–åº”ç”¨æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="java-åå°„"&gt;Java åå°„
&lt;/h2&gt;&lt;p&gt;Java åå°„ï¼ˆReflectionï¼‰çš„åº•å±‚åŸç†ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ &lt;strong&gt;Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰åœ¨è¿è¡Œæ—¶å°†å…¶å†…éƒ¨ç»´æŠ¤çš„ç±»å…ƒä¿¡æ¯ï¼Œé€šè¿‡ &lt;code&gt;Class&lt;/code&gt;ç­‰ç‰¹å®šå¯¹è±¡æš´éœ²ç»™ç¨‹åºï¼Œå¹¶å…è®¸ç¨‹åºé€šè¿‡æœ¬åœ°æ–¹æ³•è°ƒç”¨ç­‰æœºåˆ¶åŠ¨æ€æ“ä½œè¿™äº›ä¿¡æ¯çš„ä¸€ç§èƒ½åŠ›&lt;/strong&gt;ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼æ€»ç»“äº†å…¶æ ¸å¿ƒçš„è¿ä½œä¾èµ–å’Œè¿‡ç¨‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæ”¯æŸ±&lt;/th&gt;
&lt;th&gt;å…³é”®ç»„ä»¶/è¿‡ç¨‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºçŸ³ï¼šç±»åŠ è½½ä¸å…ƒæ•°æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»åŠ è½½æœºåˆ¶ä¸ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡&lt;/td&gt;
&lt;td&gt;JVM åŠ è½½ç±»æ—¶ï¼Œåœ¨æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰åˆ›å»ºç±»çš„å…ƒæ•°æ®ï¼Œå¹¶ç”Ÿæˆå”¯ä¸€çš„ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡ä½œä¸ºè®¿é—®å…¥å£ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ¥æºï¼šå…ƒæ•°æ®å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç±»çš„å­—èŠ‚ç è§£æåçš„ç»“æ„ä¿¡æ¯ï¼Œå¦‚å­—æ®µè¡¨ã€æ–¹æ³•è¡¨ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œå¼•æ“ï¼šåŠ¨æ€è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ¬åœ°æ–¹æ³•ï¼ˆJNIï¼‰ä¸æ–¹æ³•å¥æŸ„&lt;/td&gt;
&lt;td&gt;åå°„è°ƒç”¨ï¼ˆå¦‚ &lt;code&gt;Method.invoke()&lt;/code&gt;ï¼‰é€šè¿‡ JNI è°ƒç”¨æœ¬åœ°æ–¹æ³•å®ç°ï¼Œæˆ–é€šè¿‡ &lt;code&gt;MethodHandle&lt;/code&gt;ä¼˜åŒ–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼“å­˜æœºåˆ¶ä¸ Inflation&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨è½¯å¼•ç”¨ç¼“å­˜åå°„æ•°æ®ï¼Œçƒ­ç‚¹æ–¹æ³•è°ƒç”¨ç”Ÿæˆå­—èŠ‚ç é€‚é…å™¨ï¼ˆInflationï¼‰æå‡æ€§èƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åå°„æ˜¯å¦‚ä½•å·¥ä½œçš„"&gt;ğŸ” åå°„æ˜¯å¦‚ä½•å·¥ä½œçš„
&lt;/h3&gt;&lt;p&gt;ç†è§£ä¸Šè¿°æ¡†æ¶åï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥çœ‹çœ‹ä¸€æ¬¡å®Œæ•´çš„åå°„æ“ä½œï¼Œä¾‹å¦‚è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ‰§è¡Œçš„ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å– Class å¯¹è±¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯åå°„çš„èµ·ç‚¹ã€‚ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;Class.forName(&amp;quot;å…¨é™å®šç±»å&amp;quot;)&lt;/code&gt;ã€&lt;code&gt;å¯¹è±¡.getClass()&lt;/code&gt;æˆ– &lt;code&gt;ç±»å.class&lt;/code&gt;è¿™ä¸‰ç§æ–¹å¼è·å–ç›®æ ‡ç±»çš„ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡ã€‚&lt;code&gt;Class.forName()&lt;/code&gt;ä¼šè§¦å‘ç±»çš„åŠ è½½ï¼ˆå¦‚æœè¿˜æœªè¢«åŠ è½½ï¼‰ï¼Œè¿›è€Œä¿ƒä½¿ JVM å®Œæˆä¸Šè¿°çš„å…ƒæ•°æ®æ„å»ºå’Œ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–å…ƒä¿¡æ¯å¯¹è±¡ï¼ˆMethod, Fieldï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ è°ƒç”¨ &lt;code&gt;clazz.getMethod(&amp;quot;æ–¹æ³•å&amp;quot;, å‚æ•°ç±»å‹)&lt;/code&gt;æˆ– &lt;code&gt;clazz.getDeclaredField(&amp;quot;å­—æ®µå&amp;quot;)&lt;/code&gt;æ—¶ï¼ŒJVM å¹¶ä¸ä¼šç«‹å³è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚ç›¸åï¼Œ&lt;code&gt;Class&lt;/code&gt;å¯¹è±¡å†…éƒ¨ä¼šç»´æŠ¤ä¸€ä¸ªåå°„æ•°æ®çš„ç¼“å­˜ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª &lt;code&gt;ReflectionData&lt;/code&gt;ç»“æ„ï¼Œç”¨è½¯å¼•ç”¨æ¥é¿å…å†…å­˜æ³„æ¼ï¼‰ã€‚é¦–å…ˆä¼šæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é€šè¿‡æœ¬åœ°æ–¹æ³•ä» JVM çš„å…ƒæ•°æ®åŒºæŸ¥æ‰¾ã€‚æ‰¾åˆ°åï¼Œä¼š&lt;strong&gt;å¤åˆ¶&lt;/strong&gt;ä¸€ä»½æ–°çš„ &lt;code&gt;Method&lt;/code&gt;æˆ– &lt;code&gt;Field&lt;/code&gt;å¯¹è±¡è¿”å›ç»™ç¨‹åºã€‚è¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†é¿å…ç¨‹åºé€šè¿‡åå°„ä¿®æ”¹è¿™äº›å¯¹è±¡çš„çŠ¶æ€è€Œå½±å“åˆ° JVM å†…éƒ¨çš„å…ƒæ•°æ®æœ¬èº«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡Œæ“ä½œï¼ˆinvoke, set/getï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æ ¸å¿ƒçš„ä¸€æ­¥ã€‚ä»¥ &lt;code&gt;method.invoke(obj, args)&lt;/code&gt;ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®æ£€æŸ¥&lt;/strong&gt;ï¼šé¦–å…ˆä¼šæ£€æŸ¥è°ƒç”¨è€…æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œæ˜¯å¦ä¸ºç§æœ‰æ–¹æ³•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–æ–¹æ³•è®¿é—®å™¨ï¼ˆMethodAccessorï¼‰&lt;/strong&gt;ï¼šæ¯ä¸ª &lt;code&gt;Method&lt;/code&gt;å¯¹è±¡èƒŒåéƒ½å…³è”ç€ä¸€ä¸ª &lt;code&gt;MethodAccessor&lt;/code&gt;æ¥å£ï¼Œå®ƒæ˜¯å®é™…æ‰§è¡Œè°ƒç”¨çš„æ ¸å¿ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Inflation æœºåˆ¶ï¼ˆæ€§èƒ½ä¼˜åŒ–çš„å…³é”®ï¼‰&lt;/strong&gt;ï¼šä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJVM é‡‡ç”¨äº†ä¸€ç§å·§å¦™çš„ç­–ç•¥ã€‚æœ€åˆå‡ æ¬¡è°ƒç”¨ï¼ˆé»˜è®¤é˜ˆå€¼æ˜¯15æ¬¡ï¼‰ä¼šä½¿ç”¨ä¸€ä¸ªåä¸º &lt;code&gt;NativeMethodAccessorImpl&lt;/code&gt;çš„å®ç°ï¼Œå…¶å†…éƒ¨é€šè¿‡ JNI è°ƒç”¨æœ¬åœ°æ–¹æ³• &lt;code&gt;invoke0&lt;/code&gt;ï¼Œè¿™ç§æ–¹å¼å¼€é”€è¾ƒå¤§ã€‚ä½†å½“è°ƒç”¨æ¬¡æ•°è¶…è¿‡é˜ˆå€¼åï¼ŒJVM ä¼šåŠ¨æ€ç”Ÿæˆä¸€ä¸ªåä¸º &lt;code&gt;GeneratedMethodAccessorXXX&lt;/code&gt;çš„æ–°çš„å­—èŠ‚ç ç±»ã€‚è¿™ä¸ªç±»åŒ…å«äº†ç›´æ¥è°ƒç”¨ç›®æ ‡æ–¹æ³•çš„é€»è¾‘ã€‚æ­¤åï¼Œåå°„è°ƒç”¨å°±ä¼š&lt;strong&gt;å§”æ´¾ç»™è¿™ä¸ªæ–°ç”Ÿæˆçš„ç±»&lt;/strong&gt;ï¼Œå…¶æœ¬è´¨å°±ç›¸å½“äºä¸€æ¬¡ç›´æ¥çš„æ–¹æ³•è°ƒç”¨ï¼Œä»è€Œç»•è¿‡äº†æœ¬åœ°è°ƒç”¨ï¼Œæ€§èƒ½å¾—åˆ°å·¨å¤§æå‡ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º &amp;ldquo;Inflation&amp;rdquo;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€§èƒ½ä¸å®‰å…¨è€ƒé‡"&gt;âš–ï¸ æ€§èƒ½ä¸å®‰å…¨è€ƒé‡
&lt;/h3&gt;&lt;p&gt;åå°„çš„å¼ºå¤§åŠŸèƒ½ä¹Ÿä¼´éšç€ä¸€äº›éœ€è¦æƒè¡¡çš„æ–¹é¢ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šä¸»è¦æ¥è‡ªå‡ ä¸ªæ–¹é¢ï¼šæ–¹æ³•æŸ¥æ‰¾ã€è®¿é—®æƒé™æ£€æŸ¥ã€å‚æ•°è£…ç®±/æ‹†ç®±ï¼Œä»¥åŠæ—©æœŸåŸºäºæœ¬åœ°æ–¹æ³•è°ƒç”¨çš„å¼€é”€ã€‚è™½ç„¶ Inflation æœºåˆ¶æå¤§åœ°ä¼˜åŒ–äº†é«˜é¢‘è°ƒç”¨çš„æ€§èƒ½ï¼Œä½†å¶å°”çš„ã€ä½é¢‘çš„åå°„æ“ä½œä»ç„¶æ¯”ç›´æ¥è°ƒç”¨è¦æ…¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–å»ºè®®&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦é‡å¤ä½¿ç”¨çš„ &lt;code&gt;Class&lt;/code&gt;, &lt;code&gt;Method&lt;/code&gt;, &lt;code&gt;Field&lt;/code&gt;ç­‰å¯¹è±¡ï¼ŒåŠ¡å¿…å°†å…¶ç¼“å­˜èµ·æ¥ï¼Œé¿å…æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½é‡æ–°æŸ¥æ‰¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;setAccessible(true)&lt;/code&gt;&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•å¯ä»¥å…³é—­è®¿é—®å®‰å…¨æ£€æŸ¥ï¼Œä»è€Œæå‡ä¸€äº›é€Ÿåº¦ã€‚ä½†è¿™ä¹Ÿç ´åäº†å°è£…æ€§ï¼Œå¯èƒ½å¸¦æ¥å®‰å…¨é£é™©ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨é—®é¢˜&lt;/strong&gt;ï¼šåå°„å¯ä»¥çªç ´ Java çš„è®¿é—®æ§åˆ¶ï¼Œä¾‹å¦‚è°ƒç”¨ç§æœ‰æ–¹æ³•æˆ–ä¿®æ”¹ç§æœ‰å­—æ®µã€‚åœ¨éœ€è¦ä¸¥æ ¼å®‰å…¨ç®¡ç†çš„ç¯å¢ƒä¸­ï¼Œå¯ä»¥é€šè¿‡ Java å®‰å…¨ç®¡ç†å™¨ï¼ˆSecurity Managerï¼‰æ¥é™åˆ¶åå°„æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;åå°„æœºåˆ¶æ˜¯è®¸å¤šé«˜çº§ Java ç‰¹æ€§å’Œæ¡†æ¶çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¡†æ¶å¼€å‘&lt;/strong&gt;ï¼šå¦‚ Spring æ¡†æ¶çš„ä¾èµ–æ³¨å…¥ï¼ˆIoCï¼‰ã€Hibernate çš„å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰ï¼Œéƒ½æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„æ¥å®ä¾‹åŒ–å¯¹è±¡ã€è®¾ç½®å±æ€§æˆ–è°ƒç”¨æ–¹æ³•çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä»£ç†å’Œ AOP&lt;/strong&gt;ï¼šå®ç°é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ŒåŠ¨æ€åœ°åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ’å…¥é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨è§£å¤„ç†&lt;/strong&gt;ï¼šè¯»å–å¹¶å¤„ç†ç±»ã€æ–¹æ³•æˆ–å­—æ®µä¸Šçš„æ³¨è§£ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹è¯•å·¥å…·&lt;/strong&gt;ï¼šå¦‚ JUnit æ¡†æ¶åŠ¨æ€å‘ç°å’Œè¿è¡Œæµ‹è¯•æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒJava åå°„çš„åº•å±‚åŸç†æ˜¯ JVM å…ƒæ•°æ®å¯¹å¤–æš´éœ²å’ŒåŠ¨æ€è°ƒç”¨çš„ç²¾å·§ç»“åˆã€‚å®ƒé€šè¿‡ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡æä¾›å…¥å£ï¼Œåˆ©ç”¨ JVM å†…å­˜ä¸­çš„å…ƒæ•°æ®ä½œä¸ºä¿¡æ¯æºï¼Œå¹¶å€ŸåŠ© JNI å’ŒåŠ¨æ€å­—èŠ‚ç ç”Ÿæˆï¼ˆInflationï¼‰æ¥æ‰§è¡Œå®é™…æ“ä½œã€‚ç†è§£å…¶åŸç†ï¼Œæœ‰åŠ©äºä½ åœ¨äº«å—å…¶å¸¦æ¥çš„çµæ´»æ€§çš„åŒæ—¶ï¼Œä¹Ÿèƒ½æ¸…é†’åœ°è®¤è¯†åˆ°æ€§èƒ½ä¸å®‰å…¨ä¸Šçš„æƒè¡¡ï¼Œä»è€Œåšå‡ºæ›´åˆé€‚çš„æŠ€æœ¯å†³ç­–ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ Java åå°„çš„åº•å±‚åŸç†ã€‚å¦‚æœä½ å¯¹ç‰¹å®šçš„ç»†èŠ‚ï¼Œæ¯”å¦‚ Inflation æœºåˆ¶çš„å…·ä½“å®ç°æˆ–è€…å®‰å…¨ç®¡ç†å™¨çš„é…ç½®æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="java-codepointat"&gt;java codePointAt
&lt;/h2&gt;&lt;p&gt;åœ¨Javaä¸­æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶ï¼Œä¸»è¦ä½¿ç”¨ &lt;code&gt;Reader&lt;/code&gt;ç±»åŠå…¶å­ç±»ï¼ˆå¦‚ &lt;code&gt;InputStreamReader&lt;/code&gt;ã€&lt;code&gt;FileReader&lt;/code&gt;ï¼‰å°†å­—èŠ‚æµè½¬æ¢ä¸ºå­—ç¬¦æµè¿›è¡Œå¤„ç†ã€‚è¿™ç§æ–¹å¼èƒ½å¾ˆå¥½åœ°å¤„ç†æ–‡æœ¬ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶çš„ä¸¤ç§æ ¸å¿ƒæ–¹å¼åŠå…¶ä»£ç ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;h3 id="æ ¸å¿ƒæ–¹æ³•ä¸ä»£ç ç¤ºä¾‹"&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•ä¸ä»£ç ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦"&gt;&lt;strong&gt;ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ç§æ–¹å¼é€‚åˆå¤„ç†å°æ–‡ä»¶æˆ–éœ€è¦ç²¾ç»†å¤„ç†æ¯ä¸ªå­—ç¬¦çš„åœºæ™¯ï¼Œä½†é¢‘ç¹çš„IOæ“ä½œå¯èƒ½å½±å“å¤§æ–‡ä»¶çš„è¯»å–æ•ˆç‡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.io.*;
public class ReadByCharOneByOne {
public static void main(String[] args) {
// æ›¿æ¢ä¸ºä½ çš„å®é™…æ–‡ä»¶è·¯å¾„
String fileName = &amp;#34;example.txt&amp;#34;;
// ä½¿ç”¨try-with-resourcesè¯­å¥ç¡®ä¿æµè‡ªåŠ¨å…³é—­
try (FileInputStream fis = new FileInputStream(fileName);
InputStreamReader isr = new InputStreamReader(fis);
Reader reader = isr) {
int charAsInt; // read()æ–¹æ³•è¿”å›çš„æ˜¯å­—ç¬¦çš„Unicodeç ç‚¹ï¼ˆ0-65535ï¼‰ï¼Œ-1è¡¨ç¤ºæ–‡ä»¶ç»“æŸ
while ((charAsInt = reader.read()) != -1) {
char character = (char) charAsInt; // å°†ç ç‚¹è½¬æ¢ä¸ºcharç±»å‹
System.out.print(character);
}
} catch (IOException e) {
e.printStackTrace();
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ä¸€æ¬¡è¯»å–å¤šä¸ªå­—ç¬¦åˆ°å­—ç¬¦æ•°ç»„"&gt;&lt;strong&gt;ä¸€æ¬¡è¯»å–å¤šä¸ªå­—ç¬¦åˆ°å­—ç¬¦æ•°ç»„&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ç§æ–¹å¼åˆ©ç”¨ç¼“å†²åŒºï¼Œå‡å°‘äº†IOæ“ä½œæ¬¡æ•°ï¼Œè¯»å–æ•ˆç‡æ›´é«˜ï¼Œæ˜¯å¤„ç†è¾ƒå¤§æ–‡ä»¶çš„æ¨èåšæ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.io.*;
public class ReadByCharBuffer {
public static void main(String[] args) {
String fileName = &amp;#34;example.txt&amp;#34;;
// åˆ›å»ºä¸€ä¸ªå­—ç¬¦æ•°ç»„ä½œä¸ºç¼“å†²åŒº
char[] charBuffer = new char[1024]; // ç¼“å†²åŒºå¤§å°é€šå¸¸è®¾ä¸º1024çš„å€æ•°
try (FileInputStream fis = new FileInputStream(fileName);
InputStreamReader isr = new InputStreamReader(fis);
Reader reader = isr) {
int charsRead; // å®é™…è¯»å–åˆ°çš„å­—ç¬¦æ•°
while ((charsRead = reader.read(charBuffer)) != -1) {
// å¤„ç†è¯»å–åˆ°çš„å­—ç¬¦ï¼Œæ³¨æ„åªå¤„ç†ä»0åˆ°charsReadçš„éƒ¨åˆ†
String contentChunk = new String(charBuffer, 0, charsRead);
System.out.print(contentChunk);
}
} catch (IOException e) {
e.printStackTrace();
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="å…³é”®æ¦‚å¿µè¯´æ˜"&gt;&lt;strong&gt;å…³é”®æ¦‚å¿µè¯´æ˜&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œé€‰æ‹©ï¼Œä¸‹é¢å¯¹è¿™ä¸¤ç§æ–¹å¼è¿›è¡Œå¯¹æ¯”ï¼Œå¹¶è§£é‡Šæ¶‰åŠçš„æ ¸å¿ƒç±»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦&lt;/th&gt;
&lt;th&gt;ä¸€æ¬¡è¯»å–å¤šä¸ªå­—ç¬¦ï¼ˆç¼“å†²åŒºï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int read()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int read(char[] cbuf)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼ˆé¢‘ç¹IOæ“ä½œï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé«˜&lt;/strong&gt;ï¼ˆå‡å°‘IOæ“ä½œæ¬¡æ•°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°æ–‡ä»¶ã€éœ€è¦é€ä¸ªå­—ç¬¦å¤„ç†çš„é€»è¾‘&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤§å¤šæ•°æƒ…å†µ&lt;/strong&gt;ï¼Œå°¤å…¶æ˜¯å¤§æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶ç²’åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ä¸ªå­—ç¬¦&lt;/td&gt;
&lt;td&gt;ä¸€æ‰¹å­—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;InputStreamReader&lt;/strong&gt;ï¼šè¿™æ˜¯&lt;strong&gt;å­—èŠ‚æµé€šå‘å­—ç¬¦æµçš„æ¡¥æ¢&lt;/strong&gt;ã€‚å®ƒè´Ÿè´£è¯»å–åŸå§‹å­—èŠ‚ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†ï¼ˆå¦‚UTF-8ã€GBKï¼‰å°†å…¶è§£ç ä¸ºå­—ç¬¦ã€‚å¦‚æœä¸æŒ‡å®šå­—ç¬¦é›†ï¼Œå°†ä½¿ç”¨å¹³å°é»˜è®¤çš„å­—ç¬¦é›†ï¼Œè¿™æœ‰æ—¶å¯èƒ½å¯¼è‡´ä¹±ç é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FileReader&lt;/strong&gt;ï¼šå®ƒæ˜¯ &lt;code&gt;InputStreamReader&lt;/code&gt;çš„ä¸€ä¸ªä¾¿æ·å­ç±»ï¼Œä¸“é—¨ç”¨äºè¯»å–å­—ç¬¦æ–‡ä»¶ã€‚å®ƒçš„é»˜è®¤å­—ç¬¦ç¼–ç å’Œå­—èŠ‚ç¼“å†²åŒºå¤§å°å¯èƒ½é€‚ç”¨äºç®€å•æƒ…å†µï¼Œä½†ä¸ºäº†æ›´å¥½çš„è·¨å¹³å°å…¼å®¹æ€§ï¼Œ&lt;strong&gt;æ˜¾å¼æŒ‡å®šç¼–ç é€šå¸¸æ›´å®‰å…¨&lt;/strong&gt;ã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;InputStreamReader&lt;/code&gt;é…åˆ &lt;code&gt;FileInputStream&lt;/code&gt;æ¥æ˜ç¡®æŒ‡å®šç¼–ç ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ³¨æ„äº‹é¡¹"&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦ç¼–ç &lt;/strong&gt;ï¼šè¿™æ˜¯æ­£ç¡®è¯»å–æ–‡æœ¬æ–‡ä»¶çš„å…³é”®ã€‚å¦‚æœæ–‡ä»¶ç¼–ç ä¸è¯»å–æ—¶ä½¿ç”¨çš„ç¼–ç ä¸ä¸€è‡´ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚å»ºè®®åœ¨åˆ›å»º &lt;code&gt;InputStreamReader&lt;/code&gt;æ—¶æ˜ç¡®æŒ‡å®šç¼–ç ï¼Œä¾‹å¦‚ &lt;code&gt;new InputStreamReader(fis, &amp;quot;UTF-8&amp;quot;)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸å¤„ç†&lt;/strong&gt;ï¼šIOæ“ä½œå¯èƒ½ä¼šæŠ›å‡º &lt;code&gt;IOException&lt;/code&gt;ï¼Œå¿…é¡»è¿›è¡Œå¤„ç†ã€‚ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº† &lt;strong&gt;try-with-resources&lt;/strong&gt; è¯­æ³•ï¼Œå®ƒå¯ä»¥ç¡®ä¿åœ¨è¯­å¥ç»“æŸæ—¶è‡ªåŠ¨å…³é—­æ‰€æœ‰æ‰“å¼€çš„æµï¼Œè¿™æ˜¯ä¸€ç§ä¼˜é›…ä¸”å®‰å…¨çš„èµ„æºç®¡ç†æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦é«˜æ€§èƒ½è¯»å–çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘å°† &lt;code&gt;InputStreamReader&lt;/code&gt;åŒ…è£…åœ¨ &lt;code&gt;BufferedReader&lt;/code&gt;ä¸­ã€‚&lt;code&gt;BufferedReader&lt;/code&gt;æä¾›äº†æ›´å¤§çš„ç¼“å†²åŒºï¼Œå¹¶ä¸”æœ‰æ–¹ä¾¿çš„ &lt;code&gt;readLine()&lt;/code&gt;æ–¹æ³•ï¼Œå¯ä»¥æŒ‰è¡Œè¯»å–æ–‡æœ¬ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä¸å…¶ä»–è¯»å–æ–¹å¼çš„å¯¹æ¯”"&gt;&lt;strong&gt;ä¸å…¶ä»–è¯»å–æ–¹å¼çš„å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;äº†è§£æŒ‰å­—ç¬¦è¯»å–çš„æ–¹å¼åï¼Œä½ å¯èƒ½æƒ³çŸ¥é“å®ƒå’Œå…¶ä»–æ–¹æ³•çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¯»å–æ–¹å¼&lt;/th&gt;
&lt;th&gt;å¤„ç†å•ä½&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰å­—ç¬¦è¯»å–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦ (char)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–‡æœ¬æ–‡ä»¶å¤„ç†&lt;/td&gt;
&lt;td&gt;èƒ½æ­£ç¡®å¤„ç†å­—ç¬¦å’Œå­—ç¬¦ä¸²ï¼Œé¿å…ä¹±ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰å­—èŠ‚è¯»å–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­—èŠ‚ (byte)&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ï¼‰&lt;/td&gt;
&lt;td&gt;ä¿æŒæ–‡ä»¶åŸå§‹æ ¼å¼ï¼Œä¸è¿›è¡Œå­—ç¬¦è§£ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰è¡Œè¯»å–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–‡æœ¬è¡Œ (String)&lt;/td&gt;
&lt;td&gt;æ—¥å¿—æ–‡ä»¶ã€é…ç½®æ–‡ä»¶åˆ†æ&lt;/td&gt;
&lt;td&gt;å¤„ç†é€»è¾‘ç®€æ´ï¼Œé€‚åˆé¢å‘è¡Œçš„æ–‡æœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œåœ¨Javaä¸­æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶ï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç»“åˆ &lt;code&gt;FileInputStream&lt;/code&gt;å’Œ &lt;code&gt;InputStreamReader&lt;/code&gt;ï¼ˆå¹¶æŒ‡å®šæ­£ç¡®çš„å­—ç¬¦ç¼–ç ï¼‰ï¼Œç„¶åä½¿ç”¨ç¼“å†²åŒºï¼ˆä¸€æ¬¡è¯»å–å¤šä¸ªå­—ç¬¦ï¼‰æ¥æé«˜æ•ˆç‡ã€‚å¯¹äºçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œ&lt;code&gt;BufferedReader&lt;/code&gt;çš„ &lt;code&gt;readLine()&lt;/code&gt;æ–¹æ³•åœ¨ä¾¿åˆ©æ€§ä¸Šå¾€å¾€æ›´èƒœä¸€ç­¹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ ï¼å¦‚æœä½ æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚éœ€è¦å¤„ç†ç‰¹å®šçš„æ–‡ä»¶ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="grep"&gt;grep
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;grep&lt;/code&gt;æ˜¯ Linux å’Œ Unix ç³»ç»Ÿä¸­ä¸€ä¸ªæå…¶å¼ºå¤§çš„&lt;strong&gt;æ–‡æœ¬æœç´¢å·¥å…·&lt;/strong&gt;ï¼Œå®ƒçš„åå­—æ¥æºäºâ€œ&lt;strong&gt;G&lt;/strong&gt;lobal &lt;strong&gt;R&lt;/strong&gt;egular &lt;strong&gt;E&lt;/strong&gt;xpression &lt;strong&gt;P&lt;/strong&gt;rintâ€ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒçš„æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯æ ¹æ®ä½ æä¾›çš„æ¨¡å¼ï¼ˆå¯ä»¥æ˜¯ç®€å•çš„å­—ç¬¦ä¸²æˆ–å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œåœ¨æ–‡ä»¶æˆ–è¾“å…¥æµä¸­é€è¡Œæ‰«æï¼Œå¹¶å°†åŒ¹é…åˆ°çš„è¡Œæ‰“å°å‡ºæ¥ã€‚å®ƒæ˜¯æ—¥å¸¸è¿ç»´ã€æ—¥å¿—åˆ†æå’Œç¼–ç¨‹å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒè¯­æ³•ä¸é€‰é¡¹"&gt;ğŸ” æ ¸å¿ƒè¯­æ³•ä¸é€‰é¡¹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;grep&lt;/code&gt;å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;grep [é€‰é¡¹] &amp;#39;æ¨¡å¼&amp;#39; [æ–‡ä»¶...]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œä¸‹é¢è¡¨æ ¼æ±‡æ€»äº†æœ€å¸¸ç”¨çš„ä¸€äº›é€‰é¡¹åŠå…¶åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;é€‰é¡¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŠŸèƒ½è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-i&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¿½ç•¥å¤§å°å†™è¿›è¡ŒåŒ¹é…ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -i &amp;quot;hello&amp;quot; file.txt&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-v&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åå‘é€‰æ‹©&lt;/strong&gt;ï¼Œåªæ˜¾ç¤º&lt;strong&gt;ä¸&lt;/strong&gt;åŒ¹é…çš„è¡Œã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -v &amp;quot;debug&amp;quot; log.txt&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-n&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºåŒ¹é…è¡Œçš„&lt;strong&gt;è¡Œå·&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -n &amp;quot;error&amp;quot; app.log&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-c&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åªè¾“å‡ºåŒ¹é…è¡Œçš„&lt;strong&gt;è®¡æ•°&lt;/strong&gt;ï¼ˆè¡Œæ•°ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -c &amp;quot;warning&amp;quot; system.log&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-l&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åªæ‰“å°&lt;strong&gt;åŒ…å«åŒ¹é…é¡¹çš„æ–‡ä»¶å&lt;/strong&gt;ï¼Œè€Œéå…·ä½“è¡Œå†…å®¹ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -l &amp;quot;TODO&amp;quot; *.py&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-r&lt;/code&gt;æˆ– &lt;code&gt;-R&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€’å½’æœç´¢&lt;/strong&gt;ç›®å½•åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -r &amp;quot;function_name&amp;quot; ~/code/&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-w&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•´è¯åŒ¹é…&lt;/strong&gt;ï¼Œé¿å…éƒ¨åˆ†åŒ¹é…ï¼ˆå¦‚ &amp;ldquo;word&amp;rdquo; ä¸ä¼šåŒ¹é… &amp;ldquo;keyword&amp;rdquo;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -w &amp;quot;cat&amp;quot; animals.txt&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-A n&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶&lt;strong&gt;åé¢ï¼ˆAfterï¼‰&lt;/strong&gt; çš„ n è¡Œã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -A 2 &amp;quot;Exception&amp;quot; log.txt&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-B n&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶&lt;strong&gt;å‰é¢ï¼ˆBeforeï¼‰&lt;/strong&gt; çš„ n è¡Œã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -B 1 &amp;quot;START&amp;quot; process.log&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-C n&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶&lt;strong&gt;å‰åï¼ˆContextï¼‰&lt;/strong&gt; å„ n è¡Œã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -C 3 &amp;quot;timeout&amp;quot; debug.log&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-E&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼&lt;/strong&gt;ï¼ŒåŠŸèƒ½æ›´å¼ºï¼Œç­‰åŒäº &lt;code&gt;egrep&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;`grep -E &amp;ldquo;error&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-F&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†æ¨¡å¼è§†ä¸º&lt;strong&gt;å›ºå®šå­—ç¬¦ä¸²&lt;/strong&gt;ï¼ˆç¦ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œé€Ÿåº¦å¿«ï¼Œç­‰åŒäº &lt;code&gt;fgrep&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -F &amp;quot;*.log&amp;quot; files.txt&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-o&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åªè¾“å‡ºåŒ¹é…åˆ°çš„&lt;strong&gt;å­—ç¬¦ä¸²æœ¬èº«&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯æ•´è¡Œã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -o &amp;quot;[0-9]*&amp;quot; data.txt&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€"&gt;ğŸ§  æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;grep&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™å…è®¸ä½ è¿›è¡Œéå¸¸å¤æ‚å’Œçµæ´»çš„æ¨¡å¼åŒ¹é…ã€‚æ­£åˆ™è¡¨è¾¾å¼åˆ†ä¸º&lt;strong&gt;åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ï¼ˆBREï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼ˆEREï¼‰&lt;/strong&gt;ï¼Œä½¿ç”¨ &lt;code&gt;-E&lt;/code&gt;é€‰é¡¹å¯å¯ç”¨ EREã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›æœ€å¸¸ç”¨çš„å…ƒå­—ç¬¦ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å…ƒå­—ç¬¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;.&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;ä»»æ„ä¸€ä¸ª&lt;/strong&gt;å­—ç¬¦ï¼ˆé™¤æ¢è¡Œç¬¦ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;a.c&amp;quot;&lt;/code&gt;åŒ¹é… &amp;ldquo;abc&amp;rdquo;, &amp;ldquo;a2c&amp;rdquo;, &amp;ldquo;axc&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;*&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ &lt;strong&gt;0 æ¬¡æˆ–å¤šæ¬¡&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;go*gle&amp;quot;&lt;/code&gt;åŒ¹é… &amp;ldquo;ggle&amp;rdquo;, &amp;ldquo;google&amp;rdquo;, &amp;ldquo;gooogle&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;+&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ &lt;strong&gt;1 æ¬¡æˆ–å¤šæ¬¡&lt;/strong&gt;ï¼ˆéœ€è¦ &lt;code&gt;-E&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -E &amp;quot;go+gle&amp;quot;&lt;/code&gt;åŒ¹é… &amp;ldquo;google&amp;rdquo;, &amp;ldquo;gooogle&amp;rdquo;ï¼Œä½†ä¸åŒ¹é… &amp;ldquo;ggle&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;?&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ &lt;strong&gt;0 æ¬¡æˆ– 1 æ¬¡&lt;/strong&gt;ï¼ˆéœ€è¦ &lt;code&gt;-E&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -E &amp;quot;colou?r&amp;quot;&lt;/code&gt;åŒ¹é… &amp;ldquo;color&amp;rdquo; å’Œ &amp;ldquo;colour&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;^&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…è¡Œçš„&lt;strong&gt;å¼€å§‹&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;^start&amp;quot;&lt;/code&gt;åŒ¹é…æ‰€æœ‰ä»¥ &amp;ldquo;start&amp;rdquo; å¼€å¤´çš„è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;$&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…è¡Œçš„&lt;strong&gt;ç»“å°¾&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;end$&amp;quot;&lt;/code&gt;åŒ¹é…æ‰€æœ‰ä»¥ &amp;ldquo;end&amp;rdquo; ç»“å°¾çš„è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[abc]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;æ‹¬å·å†…&lt;/strong&gt;çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;[Tt]est&amp;quot;&lt;/code&gt;åŒ¹é… &amp;ldquo;Test&amp;rdquo; å’Œ &amp;ldquo;test&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[^abc]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;ä¸åœ¨&lt;/strong&gt;æ‹¬å·å†…çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;[^0-9]&amp;quot;&lt;/code&gt;åŒ¹é…åŒ…å«éæ•°å­—å­—ç¬¦çš„è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;`&lt;/td&gt;
&lt;td&gt;`&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æˆ–&lt;/strong&gt;æ“ä½œï¼ŒåŒ¹é…å¤šä¸ªæ¨¡å¼ä¹‹ä¸€ï¼ˆéœ€è¦ &lt;code&gt;-E&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äº&lt;strong&gt;åˆ†ç»„&lt;/strong&gt;ï¼ˆéœ€è¦ &lt;code&gt;-E&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep -E &amp;quot;(abc)+&amp;quot;&lt;/code&gt;åŒ¹é… &amp;ldquo;abc&amp;rdquo;, &amp;ldquo;abcabc&amp;rdquo; ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\b&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…&lt;strong&gt;å•è¯è¾¹ç•Œ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;grep &amp;quot;\bthe\b&amp;quot;&lt;/code&gt;åŒ¹é…å•è¯ &amp;ldquo;the&amp;rdquo;ï¼Œè€Œä¸æ˜¯ &amp;ldquo;there&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®ç”¨åœºæ™¯ä¸æŠ€å·§"&gt;ğŸ’¡ å®ç”¨åœºæ™¯ä¸æŠ€å·§
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥æ‰¾åŒ…å« &amp;ldquo;error&amp;rdquo; çš„è¡Œï¼Œå¹¶æ˜¾ç¤ºå‰å 3 è¡Œä¸Šä¸‹æ–‡ä»¥ä¾¿åˆ†æåŸå› ï¼š&lt;code&gt;grep -C 3 -i &amp;quot;error&amp;quot; /var/log/syslog&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç»Ÿè®¡æŸä¸ª IPï¼ˆå¦‚ 192.168.1.1ï¼‰åœ¨è®¿é—®æ—¥å¿—ä¸­å‡ºç°çš„æ¬¡æ•°ï¼š&lt;code&gt;grep -c &amp;quot;192.168.1.1&amp;quot; /var/log/nginx/access.log&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç æœç´¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é¡¹ç›®ä¸­é€’å½’æŸ¥æ‰¾æ‰€æœ‰ä½¿ç”¨äº† &lt;code&gt;printf&lt;/code&gt;çš„ C æ–‡ä»¶ï¼š&lt;code&gt;grep -r --include=&amp;quot;*.c&amp;quot; &amp;quot;printf&amp;quot; /path/to/project/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥æ‰¾æ‰€æœ‰ Python æ–‡ä»¶ä¸­å¯¼å…¥ &lt;code&gt;pandas&lt;/code&gt;çš„è¡Œï¼š&lt;code&gt;grep -r --include=&amp;quot;*.py&amp;quot; &amp;quot;import pandas&amp;quot; .&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—ä¸æå–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;-o&lt;/code&gt;é€‰é¡¹åªæå–æ¯è¡Œä¸­çš„ç”µå­é‚®ä»¶åœ°å€ï¼š&lt;code&gt;grep -oE '\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b' contacts.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç»“åˆç®¡é“(&lt;code&gt;|&lt;/code&gt;)ï¼Œä¸å…¶ä»–å‘½ä»¤åä½œã€‚ä¾‹å¦‚ï¼ŒæŸ¥æ‰¾å¤§æ–‡ä»¶ä¸­æœ€è¿‘ 100 è¡Œæ—¥å¿—ä¸­çš„å¼‚å¸¸ï¼š&lt;code&gt;tail -100 app.log | grep -A 5 -B 5 &amp;quot;NullPointerException&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤§å°å†™æ•æ„Ÿ&lt;/strong&gt;ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code&gt;grep&lt;/code&gt;æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚è®°å¾—ä½¿ç”¨ &lt;code&gt;-i&lt;/code&gt;é€‰é¡¹æ¥å¿½ç•¥å¤§å°å†™ï¼Œé¿å…é—æ¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰&lt;/strong&gt;ï¼šå½“ä½ çš„æœç´¢æ¨¡å¼ä¸­åŒ…å«æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ &lt;code&gt;.&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;$&lt;/code&gt;ç­‰ï¼‰ï¼Œä½†ä½ åˆæƒ³åŒ¹é…å®ƒä»¬æœ¬èº«æ—¶ï¼Œéœ€è¦ä½¿ç”¨åæ–œæ  &lt;code&gt;\&lt;/code&gt; è¿›è¡Œè½¬ä¹‰ã€‚ä¾‹å¦‚ï¼Œè¦æœç´¢ &amp;ldquo;file.txt&amp;rdquo; è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåº”å†™ä¸º&lt;code&gt;grep &amp;quot;file.txt&amp;quot;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•å·çš„ä½¿ç”¨&lt;/strong&gt;ï¼šä¸ºäº†ç¡®ä¿æ¨¡å¼ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ã€&lt;code&gt;|&lt;/code&gt;ï¼‰ä¸ä¼šè¢« Shell è¯¯è§£ï¼Œ&lt;strong&gt;å¼ºçƒˆå»ºè®®&lt;/strong&gt;æ€»æ˜¯å°†æ¨¡å¼ç”¨å•å¼•å·æˆ–åŒå¼•å·æ‹¬èµ·æ¥ã€‚å½“æ¨¡å¼ä¸­åŒ…å«å˜é‡æ—¶ï¼Œä½¿ç”¨åŒå¼•å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒè™‘&lt;/strong&gt;ï¼šåœ¨é€’å½’æœç´¢éå¸¸å¤§çš„ç›®å½•æ—¶ï¼Œ&lt;code&gt;grep&lt;/code&gt;å¯èƒ½ä¼šæ¶ˆè€—è¾ƒå¤šèµ„æºã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;--exclude-dir&lt;/code&gt;æˆ– &lt;code&gt;--include&lt;/code&gt;é€‰é¡¹æ¥é™å®šæœç´¢çš„æ–‡ä»¶ç±»å‹ï¼Œæå‡æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;grep&lt;/code&gt;æ˜¯æ–‡æœ¬å¤„ç†åŸºçŸ³èˆ¬çš„å·¥å…·ï¼Œç†Ÿç»ƒæŒæ¡å®ƒèƒ½æå¤§æå‡ä½ åœ¨å‘½ä»¤è¡Œä¸‹çš„å·¥ä½œæ•ˆç‡ã€‚å¸Œæœ›è¿™ä»½ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨å®ƒï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç”¨æ³•æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç­‰å¾…é˜Ÿåˆ—"&gt;ç­‰å¾…é˜Ÿåˆ—
&lt;/h2&gt;&lt;p&gt;åœ¨ Java å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼æˆ–é…ç½®çº¿ç¨‹æ± æ—¶ï¼Œé€‰æ‹©åˆé€‚çš„ç­‰å¾…é˜Ÿåˆ—ï¼ˆå³é˜»å¡é˜Ÿåˆ—ï¼‰è‡³å…³é‡è¦ã€‚ä¸åŒçš„é˜Ÿåˆ—åœ¨æ•°æ®ç»“æ„ã€è¾¹ç•Œç‰¹æ€§å’ŒåŠŸèƒ½ä¸Šå„æœ‰ä¾§é‡ï¼Œç›´æ¥å½±å“åˆ°ç¨‹åºçš„æ€§èƒ½ã€èµ„æºæ¶ˆè€—å’Œä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº† Java ä¸­ä¸»è¦çš„é˜»å¡é˜Ÿåˆ—åŠå…¶æ ¸å¿ƒé€‚ç”¨åœºæ™¯ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é˜Ÿåˆ—ç±»å‹&lt;/th&gt;
&lt;th&gt;æ•°æ®ç»“æ„&lt;/th&gt;
&lt;th&gt;å®¹é‡ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;é¡ºåºè§„åˆ™&lt;/th&gt;
&lt;th&gt;å…¸å‹é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ArrayBlockingQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°ç»„&lt;/td&gt;
&lt;td&gt;æœ‰ç•Œ&lt;/td&gt;
&lt;td&gt;FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¸¥æ ¼æ§åˆ¶å†…å­˜æ¶ˆè€—çš„å›ºå®šå¤§å°èµ„æºæ± ã€ç¨³å®šçš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LinkedBlockingQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é“¾è¡¨&lt;/td&gt;
&lt;td&gt;å¯é€‰æœ‰ç•Œï¼ˆé»˜è®¤æ— ç•Œï¼‰&lt;/td&gt;
&lt;td&gt;FIFO&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡é‡æ³¢åŠ¨è¾ƒå¤§ã€å¸Œæœ›å°½å¯èƒ½æ¥çº³ä»»åŠ¡çš„é«˜ååé‡åœºæ™¯ï¼›&lt;code&gt;ThreadPoolExecutor&lt;/code&gt;çš„é»˜è®¤é˜Ÿåˆ—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PriorityBlockingQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼˜å…ˆçº§å †ï¼ˆæ•°ç»„ï¼‰&lt;/td&gt;
&lt;td&gt;æ— ç•Œ&lt;/td&gt;
&lt;td&gt;ä¼˜å…ˆçº§æ’åº&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Œéœ€è¦æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§è€Œéæäº¤é¡ºåºæ¥å¤„ç†ï¼Œå¦‚ VIP æ’é˜Ÿè´­ç¥¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DelayQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼˜å…ˆçº§å †ï¼ˆåŸºäºPriorityQueueï¼‰&lt;/td&gt;
&lt;td&gt;æ— ç•Œ&lt;/td&gt;
&lt;td&gt;å»¶è¿Ÿæ—¶é—´æ’åº&lt;/td&gt;
&lt;td&gt;å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€ç¼“å­˜è¿‡æœŸå¤±æ•ˆã€è®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SynchronousQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— å®é™…å­˜å‚¨&lt;/td&gt;
&lt;td&gt;é›¶å®¹é‡ï¼ˆç›´æ¥ä¼ é€’ï¼‰&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ä¸‹å¸Œæœ›ä»»åŠ¡è¢«ç«‹å³å¤„ç†ã€ä¸åšç¼“å†²çš„åœºæ™¯ï¼›&lt;code&gt;newCachedThreadPool&lt;/code&gt;çš„é»˜è®¤é˜Ÿåˆ—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LinkedTransferQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é“¾è¡¨&lt;/td&gt;
&lt;td&gt;æ— ç•Œ&lt;/td&gt;
&lt;td&gt;FIFO&lt;/td&gt;
&lt;td&gt;ç”Ÿäº§è€…éœ€è¦ç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹å®Œæ¯•çš„é«˜æ€§èƒ½æ•°æ®ä¼ è¾“åœºæ™¯ï¼Œæä¾›æ¯” &lt;code&gt;SynchronousQueue&lt;/code&gt;æ›´ä¸°å¯Œçš„æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LinkedBlockingDeque&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒå‘é“¾è¡¨&lt;/td&gt;
&lt;td&gt;å¯é€‰æœ‰ç•Œ&lt;/td&gt;
&lt;td&gt;å¯ä»åŒç«¯æ“ä½œ&lt;/td&gt;
&lt;td&gt;å·¥ä½œçªƒå–ç®—æ³•ã€éœ€è¦ä»é˜Ÿåˆ—ä¸¤ç«¯æ’å…¥æˆ–ç§»é™¤ä»»åŠ¡çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é˜Ÿåˆ—é€‰æ‹©å¿«é€ŸæŒ‡å—"&gt;ğŸ’¡ é˜Ÿåˆ—é€‰æ‹©å¿«é€ŸæŒ‡å—
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®ä»¥ä¸‹å‡ ç‚¹æ¥åšå‡ºé€‰æ‹©ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ˜¯å¦éœ€è¦é™åˆ¶é˜Ÿåˆ—å¤§å°ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;ï¼šé€‰æ‹© &lt;strong&gt;ArrayBlockingQueue&lt;/strong&gt;ï¼ˆå›ºå®šæ•°ç»„å¤§å°ï¼‰æˆ– &lt;strong&gt;æœ‰ç•Œçš„ LinkedBlockingQueue/LinkedBlockingDeque&lt;/strong&gt;ã€‚è¿™å¯ä»¥é˜²æ­¢ç”Ÿäº§è€…é€Ÿåº¦è¿‡å¿«å¯¼è‡´å†…å­˜æº¢å‡ºï¼Œä½†éœ€æ³¨æ„é˜Ÿåˆ—æ»¡æ—¶çš„å¤„ç†ç­–ç•¥ï¼ˆé˜»å¡è¿˜æ˜¯æ‹’ç»ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦&lt;/strong&gt;ï¼šé€‰æ‹© &lt;strong&gt;æ— ç•Œçš„ LinkedBlockingQueue&lt;/strong&gt;ã€&lt;strong&gt;PriorityBlockingQueue&lt;/strong&gt; æˆ– &lt;strong&gt;DelayQueue&lt;/strong&gt;ã€‚å¯ä»¥æ— é™æ¥çº³ä»»åŠ¡ï¼Œä½†è¦æ‰¿æ‹…ä»»åŠ¡æ— é™å †ç§¯å¯¼è‡´å†…å­˜è€—å°½çš„é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæœ‰ä½•è¦æ±‚ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤ FIFO&lt;/strong&gt;ï¼š&lt;strong&gt;ArrayBlockingQueue&lt;/strong&gt; æˆ– &lt;strong&gt;LinkedBlockingQueue&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰ä¼˜å…ˆçº§&lt;/strong&gt;ï¼š&lt;strong&gt;PriorityBlockingQueue&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰å»¶è¿Ÿæ—¶é—´&lt;/strong&gt;ï¼š&lt;strong&gt;DelayQueue&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§è€…æ˜¯å¦éœ€è¦ä¸æ¶ˆè´¹è€…â€œç´§å¯†åä½œâ€ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¯ï¼Œå¸Œæœ›ä»»åŠ¡è¢«ç«‹åˆ»å¤„ç†&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;SynchronousQueue&lt;/strong&gt;ï¼ˆç›´æ¥äº¤æ¥ï¼‰æˆ– &lt;strong&gt;LinkedTransferQueue&lt;/strong&gt;ï¼ˆæ”¯æŒæ›´å¤šæ“ä½œï¼‰ã€‚è¿™ç±»é˜Ÿåˆ—ä¸ç¼“å†²ä»»åŠ¡ï¼Œè¦æ±‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹ä¸€ä¸€åŒ¹é…ï¼Œé€‚åˆé«˜å“åº”çš„ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦ï¼Œå¸Œæœ›ä»»åŠ¡å¯ä»¥ç¼“å†²&lt;/strong&gt;ï¼šé€‰æ‹©å…¶ä»–èƒ½å­˜å‚¨å…ƒç´ çš„é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— ç•Œé˜Ÿåˆ—çš„é£é™©&lt;/strong&gt;ï¼š&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ï¼ˆé»˜è®¤æ— ç•Œï¼‰ã€&lt;code&gt;PriorityBlockingQueue&lt;/code&gt;å’Œ &lt;code&gt;DelayQueue&lt;/code&gt;éƒ½æ˜¯â€œæ— ç•Œâ€çš„ã€‚è¿™æ„å‘³ç€å¦‚æœä»»åŠ¡ç”Ÿäº§é€Ÿåº¦æŒç»­è¿œå¤§äºæ¶ˆè´¹é€Ÿåº¦ï¼Œé˜Ÿåˆ—ä¼šä¸æ–­å¢é•¿ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´ &lt;code&gt;OutOfMemoryError&lt;/code&gt;ã€‚ ä½¿ç”¨æ— ç•Œé˜Ÿåˆ—æ—¶ï¼ŒåŠ¡å¿…ç¡®ä¿æ¶ˆè´¹é€Ÿåº¦èƒ½è·Ÿä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹æ± çš„é˜Ÿåˆ—é€‰æ‹©&lt;/strong&gt;ï¼šé˜Ÿåˆ—çš„é€‰æ‹©ä¸çº¿ç¨‹æ± çš„å‚æ•°ï¼ˆå¦‚æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ï¼‰ç´§å¯†ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;SynchronousQueue&lt;/code&gt;æ—¶ï¼Œé€šå¸¸éœ€è¦è®¾ç½®è¾ƒå¤§çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œä»¥ä¾¿åŠæ—¶åˆ›å»ºæ–°çº¿ç¨‹å¤„ç†ä»»åŠ¡ï¼Œå¦åˆ™æ–°ä»»åŠ¡å¯èƒ½ä¼šè¢«æ‹’ç»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¬å¹³æ€§&lt;/strong&gt;ï¼š&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;å’Œ &lt;code&gt;SynchronousQueue&lt;/code&gt;æ”¯æŒå…¬å¹³æ€§è®¾ç½®ã€‚å½“è®¾ç½®ä¸ºå…¬å¹³æ—¶ï¼Œå¯ä»¥é¿å…çº¿ç¨‹é¥¥é¥¿ï¼Œä¿è¯ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ä¼˜å…ˆæ‰§è¡Œï¼Œä½†å¯èƒ½ä¼šé™ä½æ•´ä½“çš„ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ€»ç»“èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­æ›´ç²¾å‡†åœ°é€‰æ‹©æœ€åˆé€‚çš„ç­‰å¾…é˜Ÿåˆ—ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæ¬¢è¿åˆ†äº«ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæ›´æ·±å…¥çš„æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="findclass--loadclass"&gt;findClass &amp;amp; loadClass
&lt;/h2&gt;&lt;p&gt;åœ¨ Java ç±»åŠ è½½æœºåˆ¶ä¸­ï¼Œ&lt;code&gt;findClass&lt;/code&gt;å’Œ &lt;code&gt;loadClass&lt;/code&gt;æ˜¯ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒä»¬èŒè´£ä¸åŒï¼Œå…±åŒåä½œå®Œæˆç±»çš„åŠ è½½ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;loadClass(String name)&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;findClass(String name)&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡å®šä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŒäº²å§”æ´¾æ¨¡å‹çš„å…¥å£å’Œæµç¨‹ç®¡ç†è€…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç±»åŠ è½½çš„æ¨¡æ¿æ–¹æ³•ï¼Œä¾›å­ç±»å®ç°å…·ä½“æŸ¥æ‰¾é€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦èŒè´£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥ç±»æ˜¯å¦å·²åŠ è½½ â†’ å§”æ´¾çˆ¶åŠ è½½å™¨ â†’ (çˆ¶åŠ è½½å™¨å¤±è´¥å)è°ƒç”¨ &lt;code&gt;findClass&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®åç§°&lt;strong&gt;æŸ¥æ‰¾å¹¶è·å–ç±»çš„å­—èŠ‚ç &lt;/strong&gt;ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;defineClass&lt;/code&gt;ç”Ÿæˆ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘åˆå§‹åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤ä¸è§¦å‘ç±»çš„åˆå§‹åŒ–ï¼ˆé“¾æ¥é˜¶æ®µçš„ &lt;code&gt;resolve&lt;/code&gt;å‚æ•°é»˜è®¤ä¸º &lt;code&gt;false&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸è´Ÿè´£åˆå§‹åŒ–ï¼Œä»…å®ŒæˆåŠ è½½å’Œå®šä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‡å†™å»ºè®®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€èˆ¬ä¸å»ºè®®é‡å†™&lt;/strong&gt;ï¼ˆé™¤éåˆ»æ„æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶å¿…é¡»é‡å†™&lt;/strong&gt;çš„æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£åä½œæµç¨‹"&gt;ğŸ”„ ç†è§£åä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;loadClass&lt;/code&gt;å’Œ &lt;code&gt;findClass&lt;/code&gt;æ˜¯åä½œå…³ç³»ï¼Œè€Œéæ›¿ä»£å…³ç³»ã€‚å®ƒä»¬çš„æ ‡å‡†è°ƒç”¨æµç¨‹æ˜¯ &lt;code&gt;loadClass&lt;/code&gt;-&amp;gt; &lt;code&gt;findClass&lt;/code&gt;-&amp;gt; &lt;code&gt;defineClass&lt;/code&gt;ã€‚ä½ å¯ä»¥æŠŠ &lt;code&gt;loadClass&lt;/code&gt;æƒ³è±¡æˆä¸€ä½é¡¹ç›®ç»ç†ï¼Œè´Ÿè´£æ•´ä½“æµç¨‹å’Œèµ„æºåè°ƒï¼ˆåŒäº²å§”æ´¾ï¼‰ï¼›è€Œ &lt;code&gt;findClass&lt;/code&gt;åˆ™æ˜¯å…·ä½“çš„æŠ€æœ¯ä¸“å®¶ï¼Œè´Ÿè´£å®Œæˆç‰¹å®šçš„æŠ€æœ¯ä»»åŠ¡ï¼ˆæŸ¥æ‰¾å­—èŠ‚ç ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„æµç¨‹å›¾ç›´è§‚åœ°å±•ç¤ºäº†å½“ä½ è°ƒç”¨ &lt;code&gt;loadClass&lt;/code&gt;æ–¹æ³•æ—¶ï¼ŒJVM å†…éƒ¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠ &lt;code&gt;findClass&lt;/code&gt;åœ¨ä½•æ—¶ä»‹å…¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[è°ƒç”¨ loadClass(name)] --&amp;gt; B{æ£€æŸ¥æ˜¯å¦å·²åŠ è½½}
B -- æ˜¯ --&amp;gt; C[è¿”å›å·²åŠ è½½çš„ Class å¯¹è±¡]
B -- å¦ --&amp;gt; D[å§”æ´¾çˆ¶åŠ è½½å™¨ parent.loadClass(name, false)]
D --&amp;gt; E{çˆ¶åŠ è½½å™¨&amp;lt;br&amp;gt;æ˜¯å¦åŠ è½½æˆåŠŸï¼Ÿ}
E -- æ˜¯ --&amp;gt; F[è¿”å›çˆ¶åŠ è½½å™¨åŠ è½½çš„ Class]
E -- å¦ --&amp;gt; G[è°ƒç”¨ findClass(name) æŸ¥æ‰¾ç±»]
G --&amp;gt; H{findClass æ˜¯å¦æ‰¾åˆ°å­—èŠ‚ç ï¼Ÿ}
H -- æ˜¯ --&amp;gt; I[è°ƒç”¨ defineClass å®šä¹‰ Class å¯¹è±¡]
I --&amp;gt; J[è¿”å›æ–°åŠ è½½çš„ Class å¯¹è±¡]
H -- å¦ --&amp;gt; K[æŠ›å‡º ClassNotFoundException]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»è¿™ä¸ªæµç¨‹å¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œ&lt;code&gt;findClass&lt;/code&gt;æ˜¯ &lt;code&gt;loadClass&lt;/code&gt;åœ¨æ‰§è¡ŒåŒäº²å§”æ´¾æ¨¡å‹åï¼Œç”±å½“å‰ç±»åŠ è½½å™¨æ‰§è¡Œç±»åŠ è½½çš„â€œæœ€åä¸€æ­¥â€ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦åŒºåˆ«ä¸å¯ç¤º"&gt;ğŸ’¡ é‡è¦åŒºåˆ«ä¸å¯ç¤º
&lt;/h3&gt;&lt;p&gt;åŸºäºä¸Šè¿°æµç¨‹å’Œè¡¨æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºå‡ ä¸ªå…³é”®åŒºåˆ«å’Œé‡è¦çš„å®è·µå¯ç¤ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒäº²å§”æ´¾æœºåˆ¶çš„å®ç°è€…&lt;/strong&gt;ï¼š&lt;code&gt;loadClass&lt;/code&gt;æ–¹æ³•åŒ…å«äº†åŒäº²å§”æ´¾æ¨¡å‹çš„å®Œæ•´é€»è¾‘ï¼ˆå…ˆæ£€æŸ¥æ˜¯å¦å·²åŠ è½½ï¼Œç„¶åå§”æ´¾çˆ¶åŠ è½½å™¨ï¼Œæœ€åæ‰è°ƒç”¨è‡ªå·±çš„ &lt;code&gt;findClass&lt;/code&gt;ï¼‰ã€‚è¿™æ­£æ˜¯ä¿è¯ Java æ ¸å¿ƒåº“å®‰å…¨ï¼ˆå¦‚é˜²æ­¢è‡ªå®šä¹‰çš„ &lt;code&gt;java.lang.Object&lt;/code&gt;è¢«åŠ è½½ï¼‰çš„å…³é”®ã€‚è€Œ &lt;code&gt;findClass&lt;/code&gt;å®Œå…¨ä¸å…³å¿ƒå§”æ´¾é€»è¾‘ï¼Œåªè´Ÿè´£â€œæ‰¾åˆ°å­—èŠ‚ç â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„æ­£ç¡®å§¿åŠ¿&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦åˆ›å»ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼ˆä¾‹å¦‚ä»ç½‘ç»œã€æ•°æ®åº“æˆ–åŠ å¯†æ–‡ä»¶ä¸­åŠ è½½ç±»ï¼‰æ—¶ï¼Œ&lt;strong&gt;æ­£ç¡®çš„åšæ³•æ˜¯é‡å†™ &lt;code&gt;findClass&lt;/code&gt;æ–¹æ³•ï¼Œè€Œä¸æ˜¯ &lt;code&gt;loadClass&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ã€‚åœ¨ &lt;code&gt;findClass&lt;/code&gt;ä¸­ï¼Œä½ åªéœ€å®ç°ä»ç‰¹å®šæ¥æºè·å–ç±»å­—èŠ‚ç çš„é€»è¾‘ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;defineClass&lt;/code&gt;å°†å­—èŠ‚ç è½¬æ¢ä¸º Class å¯¹è±¡å³å¯ã€‚è¿™æ ·åšæ—¢å®ç°äº†è‡ªå®šä¹‰åŠ è½½ï¼Œåˆå®Œç¾ä¿ç•™äº†åŒäº²å§”æ´¾æœºåˆ¶ï¼Œæ˜¯æ¨èçš„åšæ³•ã€‚ç›´æ¥é‡å†™ &lt;code&gt;loadClass&lt;/code&gt;å¯èƒ½ä¼šç ´åè¿™ä¸€é‡è¦æœºåˆ¶ï¼Œå¸¦æ¥å®‰å…¨é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–æ—¶æœºçš„æ§åˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;loadClass&lt;/code&gt;æ–¹æ³•æœ‰ä¸€ä¸ªé‡è½½å½¢å¼ &lt;code&gt;loadClass(String name, boolean resolve)&lt;/code&gt;ã€‚å½“ &lt;code&gt;resolve&lt;/code&gt;å‚æ•°ä¸º &lt;code&gt;true&lt;/code&gt;æ—¶ï¼Œå®ƒä¼šåœ¨åŠ è½½åè¿›è¡Œé“¾æ¥ï¼ˆlinkingï¼‰ï¼Œè¿™å¯èƒ½ä¼šè§¦å‘åç»­çš„åˆå§‹åŒ–é˜¶æ®µã€‚ä½†é»˜è®¤æƒ…å†µä¸‹ï¼ˆåŒ…æ‹¬å•å‚æ•°ç‰ˆæœ¬ï¼‰ï¼Œ&lt;code&gt;resolve&lt;/code&gt;ä¸º &lt;code&gt;false&lt;/code&gt;ï¼Œæ‰€ä»¥ä¸ä¼šç«‹å³åˆå§‹åŒ–ã€‚è€Œ &lt;code&gt;findClass&lt;/code&gt;ä»…å®ŒæˆåŠ è½½ï¼Œä¸æ¶‰åŠåˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸å…³è”çŸ¥è¯†"&gt;ğŸ“š æ€»ç»“ä¸å…³è”çŸ¥è¯†
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;loadClass&lt;/code&gt;æ˜¯ &lt;strong&gt;â€œç®¡ç†è€…â€&lt;/strong&gt;ï¼Œè´Ÿè´£è°ƒåº¦å’Œéµå¾ªè§„åˆ™ï¼ˆåŒäº²å§”æ´¾ï¼‰ï¼›&lt;code&gt;findClass&lt;/code&gt;æ˜¯ &lt;strong&gt;â€œæ‰§è¡Œè€…â€&lt;/strong&gt;ï¼Œè´Ÿè´£å®Œæˆå…·ä½“çš„æŸ¥æ‰¾ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸¸è§æ–¹æ³• &lt;code&gt;Class.forName()&lt;/code&gt;ï¼Œå®ƒé€šå¸¸ä¼šå¯¼è‡´ç±»çš„&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;è¢«è§¦å‘ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ï¼Œè¿™æ˜¯å®ƒä¸ &lt;code&gt;ClassLoader.loadClass()&lt;/code&gt;çš„ä¸€ä¸ªæ˜¾è‘—åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£ &lt;code&gt;findClass&lt;/code&gt;å’Œ &lt;code&gt;loadClass&lt;/code&gt;çš„åŒºåˆ«ã€‚å¦‚æœä½ å¯¹åŒäº²å§”æ´¾æ¨¡å‹æˆ–è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„å…·ä½“å®ç°æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¹»è¯»"&gt;å¹»è¯»
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL çš„ InnoDB å¼•æ“ä¸­ï¼Œè™½ç„¶é—´éš™é”ï¼ˆGap Lockï¼‰å’Œä¸´é”®é”ï¼ˆNext-Key Lockï¼‰æ˜¯é˜²æ­¢å¹»è¯»çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¹»è¯»ç°è±¡ä»ç„¶å¯èƒ½å‘ç”Ÿã€‚è¿™ä¸»è¦ä¸ &lt;strong&gt;å¿«ç…§è¯»&lt;/strong&gt; å’Œ &lt;strong&gt;å½“å‰è¯»&lt;/strong&gt; çš„æ··åˆä½¿ç”¨ã€ä»¥åŠ&lt;strong&gt;é”çš„è¦†ç›–èŒƒå›´ä¸è¶³&lt;/strong&gt;æœ‰å…³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£é—´éš™é”é˜²æŠ¤ä¹‹å¤–çš„å¹»è¯»åœºæ™¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¹»è¯»åœºæ™¯&lt;/th&gt;
&lt;th&gt;å…³é”®åŸå› &lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¿«ç…§è¯»ä¸å½“å‰è¯»æ··åˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;UPDATE/DELETE&lt;/strong&gt; ç­‰å†™æ“ä½œä¼šè¿›è¡Œ&lt;strong&gt;å½“å‰è¯»&lt;/strong&gt;ï¼Œçœ‹åˆ°å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ–°æ•°æ®ï¼Œè€Œæ™®é€šçš„ &lt;strong&gt;SELECT&lt;/strong&gt; æ˜¯å¿«ç…§è¯»**ï¼Œçœ‹ä¸åˆ°æ–°æ•°æ®**ï¼Œå¯¼è‡´äº‹åŠ¡å†…æ•°æ®é€»è¾‘ä¸ä¸€è‡´ã€‚&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡Aå¿«ç…§è¯»æŸ¥è¯¢æ•°é‡ä¸º2ï¼Œäº‹åŠ¡Bæ’å…¥1æ¡å¹¶æäº¤ï¼Œäº‹åŠ¡AéšåUPDATEä¼šå½±å“3æ¡è®°å½•ï¼ŒåŒ…æ‹¬äº‹åŠ¡Bæ–°æ’å…¥çš„ï¼Œå†æŸ¥è¯¢å°±ä¼šå¤šå‡º1æ¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨éç´¢å¼•åˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é—´éš™é”ä½œç”¨äº&lt;strong&gt;ç´¢å¼•&lt;/strong&gt;ã€‚è‹¥ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼ŒInnoDB æ— æ³•ç²¾ç¡®å®šä½é—´éš™ï¼Œå¯èƒ½é€€åŒ–ä¸º&lt;strong&gt;å…¨è¡¨æ‰«ææˆ–å‡çº§è¡¨é”&lt;/strong&gt;ï¼Œæ— æ³•æœ‰æ•ˆé˜»æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥ç¬¦åˆæ¡ä»¶çš„æ–°æ•°æ®ã€‚&lt;/td&gt;
&lt;td&gt;å¯¹éç´¢å¼•åˆ— &lt;code&gt;value = 'B'&lt;/code&gt;è¿›è¡ŒæŸ¥è¯¢å’ŒåŠ é”ï¼Œæ— æ³•é”å®šç‰¹å®šé—´éš™ï¼Œå…¶ä»–äº‹åŠ¡ä»å¯æ’å…¥ &lt;code&gt;value = 'B'&lt;/code&gt;çš„æ–°è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¦†ç›–ç´¢å¼•å¯¼è‡´é”èŒƒå›´ä¸å®Œæ•´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“æŸ¥è¯¢ä»…ä½¿ç”¨è¦†ç›–ç´¢å¼•æ—¶ï¼Œé—´éš™é”å¯èƒ½åªé”å®š&lt;strong&gt;ç´¢å¼•èŒƒå›´å†…çš„é—´éš™&lt;/strong&gt;ï¼Œå¦‚æœå…¶ä»–äº‹åŠ¡æ’å…¥çš„æ•°æ®ä¸åœ¨å½“å‰ç´¢å¼•è¦†ç›–èŒƒå›´å†…ï¼ˆå³ä½¿ä¸»é”®ç›¸åŒï¼‰ï¼Œä½†é€šè¿‡å…¶ä»–æ–¹å¼å˜å¾—å¯è§ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å¹»è¯»ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨è¦†ç›–ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œé”å®šçš„èŒƒå›´å¯èƒ½æœªèƒ½å®Œå…¨é˜»æ­¢ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ–°æ•°æ®æ’å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å…³é”®åœºæ™¯å¿«ç…§è¯»ä¸å½“å‰è¯»çš„æ··åˆ"&gt;ğŸ”„ æ·±å…¥ç†è§£å…³é”®åœºæ™¯ï¼šå¿«ç…§è¯»ä¸å½“å‰è¯»çš„æ··åˆ
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€ç»å…¸ä¸”å®¹æ˜“å¿½ç•¥çš„å¹»è¯»åœºæ™¯ï¼Œå³ä½¿åœ¨é»˜è®¤çš„ &lt;strong&gt;å¯é‡å¤è¯»ï¼ˆREPEATable Read, RRï¼‰&lt;/strong&gt; éš”ç¦»çº§åˆ«ä¸‹ä¹Ÿå¯èƒ½å‘ç”Ÿã€‚å…¶æ ¸å¿ƒåŸå› åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿«ç…§è¯»&lt;/strong&gt;ï¼šæ™®é€šçš„ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ï¼ˆä¸åŠ  &lt;code&gt;FOR UPDATE&lt;/code&gt;æˆ– &lt;code&gt;LOCK IN SHARE MODE&lt;/code&gt;ï¼‰åŸºäº &lt;strong&gt;MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰&lt;/strong&gt; æœºåˆ¶ã€‚å®ƒè¯»å–çš„æ˜¯äº‹åŠ¡å¼€å§‹æ—¶çš„æ•°æ®å¿«ç…§ï¼Œå› æ­¤ä¸ä¼šçœ‹åˆ°å…¶ä»–äº‹åŠ¡åç»­æäº¤çš„ä¿®æ”¹ï¼Œè¿™æœ¬èº«é¿å…äº†å•çº¯çš„å¿«ç…§è¯»å‡ºç°å¹»è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å½“å‰è¯»&lt;/strong&gt;ï¼š&lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;, ä»¥åŠåŠ é”çš„ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;ç­‰æ“ä½œï¼Œä¼šè¯»å–æ•°æ®åº“&lt;strong&gt;æœ€æ–°çš„ã€å·²æäº¤çš„æ•°æ®&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯å†™æ“ä½œåŸºäºæœ€æ–°çŠ¶æ€è¿›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;é£é™©ç‚¹åœ¨äº&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªäº‹åŠ¡å†…å…ˆè¿›è¡Œå¿«ç…§è¯»ï¼Œç„¶ååŸºäºè¯»åˆ°çš„ç»“æœè¿›è¡Œå†™æ“ä½œï¼ˆå½“å‰è¯»ï¼‰æ—¶ï¼Œå†™æ“ä½œä¼šçœ‹åˆ°å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ–°æ•°æ®ï¼Œä»è€Œå¯èƒ½æ„å¤–åœ°ä¿®æ”¹è¿™äº›â€œå¹»å½±è¡Œâ€ã€‚éšåï¼Œè¯¥äº‹åŠ¡å†…çš„å¿«ç…§è¯»ä¹Ÿèƒ½çœ‹åˆ°è‡ªå·±æ‰€åšçš„ä¿®æ”¹ï¼Œå¯¼è‡´æœ€ç»ˆç»“æœé›†å‡ºç°å˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹ä¾‹å­æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;äº‹åŠ¡Aæ‰§è¡Œ &lt;code&gt;SELECT * FROM table WHERE condition&lt;/code&gt;ï¼ˆå¿«ç…§è¯»ï¼‰ï¼Œè¿”å›Næ¡ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡Bæ’å…¥ä¸€æ¡ç¬¦åˆ &lt;code&gt;condition&lt;/code&gt;çš„æ–°è®°å½•å¹¶æäº¤ã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡Aæ‰§è¡Œ &lt;code&gt;UPDATE table SET ... WHERE condition&lt;/code&gt;ï¼ˆå½“å‰è¯»ï¼‰ã€‚æ­¤æ—¶ï¼Œ&lt;strong&gt;è¿™ä¸ªUPDATEä¼šçœ‹åˆ°äº‹åŠ¡Bæ–°æ’å…¥çš„é‚£æ¡è®°å½•&lt;/strong&gt;ï¼Œå¹¶å¯¹å…¶æ‰§è¡Œæ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡Aå†æ¬¡æ‰§è¡Œ &lt;code&gt;SELECT * FROM table WHERE condition&lt;/code&gt;ï¼ˆå¿«ç…§è¯»ï¼‰ã€‚ç”±äºUPDATEæ˜¯äº‹åŠ¡Aè‡ªå·±åšçš„ä¿®æ”¹ï¼ŒMVCCè§„åˆ™å…è®¸å…¶å¯è§ï¼Œå› æ­¤ç»“æœé›†å˜æˆäº†N+1æ¡ï¼Œå¹»è¯»å‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•åº”å¯¹è¿™äº›å¹»è¯»åœºæ™¯"&gt;ğŸ’¡ å¦‚ä½•åº”å¯¹è¿™äº›å¹»è¯»åœºæ™¯
&lt;/h3&gt;&lt;p&gt;äº†è§£äº†è¿™äº›â€œæ¼ç½‘ä¹‹é±¼â€ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç­–ç•¥æ¥åŠ å¼ºé˜²å¾¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®æ“ä½œç»Ÿä¸€ä½¿ç”¨å½“å‰è¯»&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦å¼ºä¸€è‡´æ€§çš„ä¸šåŠ¡æµç¨‹ï¼Œå¦‚æœä¸€æ¬¡è¯»æ“ä½œçš„ç»“æœä¼šç”¨äºåç»­çš„å†™æ“ä½œï¼Œé‚£ä¹ˆè¿™æ¬¡è¯»æ“ä½œå°±åº”è¯¥ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;è¿™æ ·çš„å½“å‰è¯»è¯­å¥ã€‚è¿™ä¼šç»™æŸ¥è¯¢ç»“æœåŠ ä¸Šä¸´é”®é”ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥å¯èƒ½å¼•å‘å¹»è¯»çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå‡éš”ç¦»çº§åˆ«&lt;/strong&gt;ï¼šå°†äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸º &lt;strong&gt;SERIALIZABLE&lt;/strong&gt;ã€‚åœ¨è¯¥çº§åˆ«ä¸‹ï¼Œæ™®é€šçš„ &lt;code&gt;SELECT&lt;/code&gt;æŸ¥è¯¢ä¹Ÿä¼šé»˜è®¤åŠ é”ï¼ˆç±»ä¼¼äº &lt;code&gt;LOCK IN SHARE MODE&lt;/code&gt;ï¼‰ï¼Œä»è€Œå®Œå…¨é¿å…å¹»è¯»ã€‚ä½†è¿™æ˜¯ä»¥ä¸¥é‡ç‰ºç‰²å¹¶å‘æ€§èƒ½ä¸ºä»£ä»·çš„ï¼Œéœ€è°¨æ…è¯„ä¼°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–ç´¢å¼•è®¾è®¡&lt;/strong&gt;ï¼šç¡®ä¿æŸ¥è¯¢æ¡ä»¶ä¸­çš„åˆ—è¢«åˆé€‚çš„ç´¢å¼•è¦†ç›–ã€‚è¿™æ˜¯é—´éš™é”èƒ½å¤Ÿæœ‰æ•ˆå‘æŒ¥ä½œç”¨çš„å‰æã€‚åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œä¸ºé«˜é¢‘ä¸”å¯¹ä¸€è‡´æ€§è¦æ±‚é«˜çš„æŸ¥è¯¢æ¡ä»¶åˆ›å»ºç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç®€å•æ€»ç»“"&gt;ğŸ’ ç®€å•æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œé—´éš™é”æ˜¯é˜²æ­¢å¹»è¯»çš„å¼ºå¤§å·¥å…·ï¼Œä½†å®ƒå¹¶éä¸‡èƒ½ã€‚å…¶æœ‰æ•ˆæ€§å»ºç«‹åœ¨&lt;strong&gt;æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;å’Œ&lt;strong&gt;æ­£ç¡®çš„åŠ é”è¯»&lt;/strong&gt;åŸºç¡€ä¸Šã€‚å¹»è¯»çš„â€œå¹½çµâ€æœ€å¸¸å‡ºæ²¡äº &lt;strong&gt;å¿«ç…§è¯»ä¸å½“å‰è¯»æ··åˆä½¿ç”¨&lt;/strong&gt; çš„åœºæ™¯ä»¥åŠ &lt;strong&gt;éç´¢å¼•æŸ¥è¯¢&lt;/strong&gt; çš„è·¯å¾„ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å…¨é¢åœ°ç†è§£MySQLä¸­çš„å¹»è¯»é—®é¢˜ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è¡Œçº§é”"&gt;è¡Œçº§é”
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼ŒMySQL InnoDB å­˜å‚¨å¼•æ“çš„&lt;strong&gt;è¡Œçº§é”ç¡®å®æ˜¯åŸºäºç´¢å¼•å®ç°çš„&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†åœ¨ä¸åŒç´¢å¼•æ¡ä»¶ä¸‹çš„é”è¡Œä¸ºã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŸ¥è¯¢æ¡ä»¶ä¸ç´¢å¼•ä½¿ç”¨æƒ…å†µ&lt;/th&gt;
&lt;th&gt;é”æœºåˆ¶ä¸è¡Œä¸º&lt;/th&gt;
&lt;th&gt;å…³é”®å½±å“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½¿ç”¨ç´¢å¼•ï¼ˆå¦‚ä¸»é”®ã€å”¯ä¸€ç´¢å¼•ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ç´¢å¼•ç²¾ç¡®å®šä½åˆ°å…·ä½“çš„&lt;strong&gt;ç´¢å¼•é¡¹&lt;/strong&gt;ï¼Œå¹¶å¯¹è¿™äº›ç´¢å¼•é¡¹åŠ é”ï¼ˆå¦‚è®°å½•é”ã€ä¸´é”®é”ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é”ç²’åº¦ç»†ï¼Œå¹¶å‘åº¦é«˜&lt;/strong&gt;ã€‚ä¸åŒäº‹åŠ¡å¯ä»¥åŒæ—¶ä¿®æ”¹è¡¨ä¸­ä¸åŒçš„è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœªä½¿ç”¨ç´¢å¼•ï¼ˆå…¨è¡¨æ‰«æï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±äºæ— æ³•ç²¾ç¡®å®šä½æ•°æ®è¡Œï¼ŒInnoDB ä¼š&lt;strong&gt;é€€åŒ–ä¸ºè¡¨çº§é”&lt;/strong&gt;ï¼Œå¯¹æ‰€æœ‰æ‰«æåˆ°çš„è®°å½•åŠ é”ï¼Œå®é™…æ•ˆæœæ˜¯é”ä½æ•´å¼ è¡¨ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é”ç²’åº¦ç²—ï¼Œå¹¶å‘åº¦æ€¥å‰§ä¸‹é™&lt;/strong&gt;ï¼Œå®¹æ˜“å¯¼è‡´æ€§èƒ½ç“¶é¢ˆå’Œé”ç­‰å¾…ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½¿ç”¨éå”¯ä¸€ç´¢å¼•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™¤äº†ç»™ç¬¦åˆæ¡ä»¶çš„ç´¢å¼•è®°å½•åŠ é”ï¼Œè¿˜å¯èƒ½å¯¹è¿™äº›è®°å½•ä¹‹é—´çš„&lt;strong&gt;é—´éš™ï¼ˆGapï¼‰&lt;/strong&gt; åŠ é”ï¼Œä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥é€ æˆå¹»è¯»ã€‚&lt;/td&gt;
&lt;td&gt;é”çš„èŒƒå›´å¯èƒ½æ¯”é¢„æœŸå¤§ï¼Œä½†å¹¶å‘æ€§èƒ½ä»ä¼˜äºè¡¨é”ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¡Œçº§é”å¦‚ä½•åŸºäºç´¢å¼•å·¥ä½œ"&gt;ğŸ” è¡Œçº§é”å¦‚ä½•åŸºäºç´¢å¼•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;InnoDB çš„è¡¨æ˜¯&lt;strong&gt;ç´¢å¼•ç»„ç»‡è¡¨&lt;/strong&gt;ï¼Œæ•°æ®æŒ‰ä¸»é”®ï¼ˆèšç°‡ç´¢å¼•ï¼‰æ’åºå­˜å‚¨ã€‚è¡Œçº§é”å¹¶ä¸æ˜¯ç›´æ¥é”ä½æ•°æ®è¡Œæœ¬èº«ï¼Œè€Œæ˜¯é€šè¿‡é”å®šè¿™äº›æ•°æ®è¡Œå¯¹åº”çš„&lt;strong&gt;ç´¢å¼•é¡¹&lt;/strong&gt;æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ‰ç´¢å¼•çš„æƒ…å†µ&lt;/strong&gt;ï¼šå½“ä½ æ‰§è¡Œä¸€æ¡å¸¦æ¡ä»¶çš„æ›´æ–°è¯­å¥ï¼ˆå¦‚ &lt;code&gt;UPDATE users SET name = 'Alice' WHERE id = 10;&lt;/code&gt;ï¼‰ï¼Œå¹¶ä¸” &lt;code&gt;id&lt;/code&gt;å­—æ®µæœ‰ç´¢å¼•æ—¶ï¼ŒInnoDB ä¼šæ²¿ç€ç´¢å¼•çš„ B+æ ‘ç»“æ„å¿«é€Ÿæ‰¾åˆ° &lt;code&gt;id=10&lt;/code&gt;è¿™ä¸ªç´¢å¼•é¡¹ï¼Œç„¶åç›´æ¥å¯¹è¿™ä¸ªç´¢å¼•é¡¹åŠ ä¸Šé”ï¼ˆä¾‹å¦‚ä¸€ä¸ªè®°å½•é”ï¼‰ã€‚å…¶ä»–äº‹åŠ¡å¦‚æœè¦ä¿®æ”¹åŒä¸€æ¡è®°å½•ï¼Œå°±éœ€è¦ç­‰å¾…è¿™ä¸ªé”è¢«é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ç´¢å¼•çš„æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼ˆå¦‚ &lt;code&gt;UPDATE users SET name = 'Alice' WHERE name = 'Bob';&lt;/code&gt;ä¸” &lt;code&gt;name&lt;/code&gt;å­—æ®µæ— ç´¢å¼•ï¼‰ï¼ŒInnoDB æ— æ³•å¿«é€Ÿå®šä½åˆ°ç›®æ ‡æ•°æ®è¡Œã€‚ä¸ºäº†ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼Œå®ƒä¼šè¢«è¿«è¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¹¶å¯¹æ‰€æœ‰æ‰«æåˆ°çš„è®°å½•åŠ é”ï¼Œè¿™å®é™…ä¸Šå¯¼è‡´&lt;strong&gt;è¡Œçº§é”é€€åŒ–ä¸ºè¡¨çº§é”&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„æµç¨‹å›¾ç›´è§‚åœ°å±•ç¤ºäº† InnoDB åœ¨æ‰§è¡Œå†™æ“ä½œæ—¶çš„åŠ é”å†³ç­–è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡Œ UPDATE/DELETE è¯­å¥] --&amp;gt; B{WHERE æ¡ä»¶æ˜¯å¦ä½¿ç”¨ç´¢å¼•?}
B -- å¦ --&amp;gt; C[è¿›è¡Œå…¨è¡¨æ‰«æ]
C --&amp;gt; D[å¯¹æ‰€æœ‰æ‰«æåˆ°çš„è®°å½•åŠ è¡Œé”&amp;lt;br&amp;gt;ï¼ˆæ•ˆæœç­‰åŒäºè¡¨çº§é”ï¼‰]
B -- æ˜¯ --&amp;gt; E[é€šè¿‡ç´¢å¼•å®šä½åˆ°ç›®æ ‡è®°å½•]
E --&amp;gt; F{éš”ç¦»çº§åˆ«æ˜¯å¦ä¸º RR?}
F -- æ˜¯ --&amp;gt; G[æ–½åŠ  Next-Key Lock&amp;lt;br&amp;gt;ï¼ˆè®°å½•é”+é—´éš™é”ï¼‰]
F -- å¦ï¼ˆRCçº§åˆ«ï¼‰ --&amp;gt; H[ä»…å¯¹è®°å½•æœ¬èº«æ–½åŠ è®°å½•é”]
G --&amp;gt; I[ä»…é”å®šç›®æ ‡è®°å½•åŠå…¶é—´éš™]
H --&amp;gt; I
D --&amp;gt; J[å¹¶å‘æ€§èƒ½å·®]
I --&amp;gt; K[å¹¶å‘æ€§èƒ½é«˜]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦å¯ç¤ºä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ é‡è¦å¯ç¤ºä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ç†è§£è¡Œçº§é”åŸºäºç´¢å¼•è¿™ä¸€ç‰¹æ€§ï¼Œå¯¹äºæ•°æ®åº“è®¾è®¡å’ŒSQLä¼˜åŒ–è‡³å…³é‡è¦ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºé«˜é¢‘æŸ¥è¯¢å’Œæ›´æ–°æ¡ä»¶åˆ›å»ºç´¢å¼•&lt;/strong&gt;ï¼šè¿™æ˜¯ç¡®ä¿è¡Œçº§é”ç”Ÿæ•ˆã€é¿å…é”å‡çº§ä»è€Œæå‡å¹¶å‘æ€§èƒ½çš„&lt;strong&gt;æ ¹æœ¬æªæ–½&lt;/strong&gt;ã€‚åŠ¡å¿…ä¸º &lt;code&gt;WHERE&lt;/code&gt;ã€&lt;code&gt;UPDATE&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt;è¯­å¥ä¸­å¸¸ç”¨çš„æ¡ä»¶åˆ—åˆ›å»ºåˆé€‚çš„ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„é—´éš™é”ï¼ˆGap Lockï¼‰&lt;/strong&gt;ï¼šåœ¨é»˜è®¤çš„&lt;strong&gt;å¯é‡å¤è¯»ï¼ˆRRï¼‰&lt;/strong&gt; éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸ºäº†é˜²æ­¢å¹»è¯»ï¼ŒInnoDB ä¸ä»…ä¼šé”ä½è®°å½•æœ¬èº«ï¼Œè¿˜ä¼šé”ä½è®°å½•ä¹‹é—´çš„é—´éš™ï¼ˆå³ä¸´é”®é”ï¼ŒNext-Key Lockï¼‰ã€‚è¿™æ„å‘³ç€å³ä½¿ä½ åªæƒ³ä¿®æ”¹ä¸€æ¡è®°å½•ï¼Œä¹Ÿå¯èƒ½é”ä½ä¸€ä¸ªèŒƒå›´ï¼Œå½±å“å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´å†…çš„æ’å…¥æ“ä½œã€‚å¦‚æœä¸šåŠ¡åœºæ™¯å¯ä»¥å®¹å¿å¹»è¯»ï¼Œè€ƒè™‘ä½¿ç”¨&lt;strong&gt;è¯»å·²æäº¤ï¼ˆRCï¼‰&lt;/strong&gt; éš”ç¦»çº§åˆ«ï¼Œåœ¨è¯¥çº§åˆ«ä¸‹é—´éš™é”é€šå¸¸ä¼šè¢«ç¦ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶äº‹åŠ¡å¤§å°ï¼ŒåŠæ—¶æäº¤&lt;/strong&gt;ï¼šInnoDB çš„è¡Œé”åœ¨äº‹åŠ¡æäº¤æˆ–å›æ»šåæ‰ä¼šé‡Šæ”¾ã€‚å› æ­¤ï¼Œ&lt;strong&gt;é¿å…é•¿äº‹åŠ¡&lt;/strong&gt;éå¸¸é‡è¦ï¼Œé•¿æ—¶é—´ä¸æäº¤çš„äº‹åŠ¡ä¼šæŒæœ‰é”ï¼Œé˜»å¡å…¶ä»–æ“ä½œï¼Œå¢åŠ æ­»é”é£é™©ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;InnoDB çš„è¡Œçº§é”æ˜¯æŒ‚åœ¨ç´¢å¼•ä¸Šçš„&lt;/strong&gt;ã€‚æœ‰ç´¢å¼•ï¼Œé”æ‰èƒ½ç²¾å‡†åœ°â€œæŠ“ä½â€ç›®æ ‡è¡Œï¼Œå®ç°é«˜å¹¶å‘ã€‚æ²¡æœ‰ç´¢å¼•ï¼Œé”å°±åªèƒ½â€œå¤§é¢ç§¯â€è¦†ç›–ï¼Œå¯¼è‡´å¹¶å‘æ€§èƒ½éª¤é™ã€‚å› æ­¤ï¼Œ&lt;strong&gt;è‰¯å¥½çš„ç´¢å¼•è®¾è®¡æ˜¯å‘æŒ¥è¡Œçº§é”å¨åŠ›ã€ä¿éšœæ•°æ®åº“é«˜å¹¶å‘èƒ½åŠ›çš„åŸºçŸ³&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£è¡Œçº§é”ä¸ç´¢å¼•çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é”è¡Œä¸ºæœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ— ç´¢å¼•å…¨è¡¨"&gt;æ— ç´¢å¼•å…¨è¡¨
&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„æ•°æ®åº“å¹¶å‘æ§åˆ¶é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;åœ¨æ— ç´¢å¼•å…¨è¡¨æ‰«ææ—¶å¯¹æ‰€æœ‰è®°å½•åŠ é”ï¼Œæ˜¯ä¸ºäº†åœ¨æ— æ³•ç²¾ç¡®å®šä½æ•°æ®çš„æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œç‰¹åˆ«æ˜¯é˜²æ­¢â€œå¹»è¯»â€å’Œâ€œä¸å¯é‡å¤è¯»â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹è¡¨å¯¹æ¯”äº†åœ¨é»˜è®¤çš„&lt;strong&gt;å¯é‡å¤è¯»ï¼ˆRRï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;è¯»å·²æäº¤ï¼ˆRCï¼‰&lt;/strong&gt; éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ— ç´¢å¼•æ›´æ–°æ“ä½œçš„åŠ é”å·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¯é‡å¤è¯»ï¼ˆRRï¼‰éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¯»å·²æäº¤ï¼ˆRCï¼‰éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ é”æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Next-Key Lock&lt;/strong&gt;ï¼ˆè®°å½•é”+é—´éš™é”ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Record Lock Only&lt;/strong&gt;ï¼ˆä»…è®°å½•é”ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é”èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é”å®šæ‰€æœ‰æ‰«æè¿‡çš„è®°å½•åŠå…¶ä¹‹é—´çš„é—´éš™&lt;/strong&gt;ï¼Œæ•ˆæœç­‰åŒäºé”è¡¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»…é”å®šæœ€ç»ˆæ»¡è¶³æ¡ä»¶çš„è®°å½•&lt;/strong&gt;ï¼ˆä½†æ‰«æè¿‡ç¨‹ä»ä¼šä¸´æ—¶åŠ é”ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸ºä½•åŠ é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é˜²æ­¢å¹»è¯»&lt;/strong&gt;ï¼šé€šè¿‡é—´éš™é”é˜»æ­¢å…¶ä»–äº‹åŠ¡åœ¨æ‰«æèŒƒå›´å†…æ’å…¥æ–°æ•°æ®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šé˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹å½“å‰äº‹åŠ¡æ­£åœ¨å¤„ç†çš„æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æå¤§&lt;/strong&gt;ï¼Œä¸¥é‡é˜»å¡å†™å¹¶å‘&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒå¤§&lt;/strong&gt;ï¼Œä½†ä¼˜äºRRçº§åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªæµç¨‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†æ— ç´¢å¼•æ›´æ–°åœ¨ä¸¤ç§éš”ç¦»çº§åˆ«ä¸‹çš„åŠ é”å†³ç­–è¿‡ç¨‹å’Œæœ€ç»ˆæ•ˆæœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡Œæ— ç´¢å¼•çš„UPDATEè¯­å¥] --&amp;gt; B{è·å–äº‹åŠ¡éš”ç¦»çº§åˆ«}
B -- RRï¼ˆå¯é‡å¤è¯»ï¼‰ --&amp;gt; C[è¿›è¡Œå…¨è¡¨æ‰«æ]
C --&amp;gt; D[å¯¹æ¯æ¡æ‰«æåˆ°çš„è®°å½•&amp;lt;br&amp;gt;åŠ Next-Key Lock&amp;lt;br&amp;gt;ï¼ˆè®°å½•é” + é—´éš™é”ï¼‰]
D --&amp;gt; E[æ•ˆæœï¼šé”ä½å…¨è¡¨&amp;lt;br&amp;gt;ï¼ˆæ‰€æœ‰è®°å½•å’Œé—´éš™ï¼‰]
B -- RCï¼ˆè¯»å·²æäº¤ï¼‰ --&amp;gt; F[è¿›è¡Œå…¨è¡¨æ‰«æ]
F --&amp;gt; G[å¯¹æ¯æ¡æ‰«æåˆ°çš„è®°å½•&amp;lt;br&amp;gt;ä¸´æ—¶åŠ è®°å½•é”]
G --&amp;gt; H{è®°å½•æ»¡è¶³WHEREæ¡ä»¶?}
H -- æ˜¯ --&amp;gt; I[ä¿æŒè®°å½•é”]
H -- å¦ --&amp;gt; J[ç«‹å³é‡Šæ”¾è¯¥è®°å½•çš„é”]
I --&amp;gt; K[æœ€ç»ˆæ•ˆæœï¼šä»…é”å®š&amp;lt;br&amp;gt;æ»¡è¶³æ¡ä»¶çš„è®°å½•]
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-æ·±å…¥ç†è§£åŠ é”é€»è¾‘"&gt;ğŸ” æ·±å…¥ç†è§£åŠ é”é€»è¾‘
&lt;/h3&gt;&lt;p&gt;ä¸Šè¿°æµç¨‹èƒŒåçš„æ ¸å¿ƒåŸå› ï¼Œæ˜¯æ•°æ®åº“éœ€è¦è§£å†³ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š&lt;strong&gt;åœ¨æ— æ³•å¿«é€Ÿå®šä½æ•°æ®æ—¶ï¼Œå¦‚ä½•ä¿è¯äº‹åŠ¡çš„æ­£ç¡®æ€§ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¹æœ¬åŸå› ï¼šè¡Œé”åŸºäºç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;InnoDB çš„è¡Œçº§é”ï¼ˆRecord Lockã€Gap Lockï¼‰å¹¶ä¸æ˜¯ç›´æ¥é”åœ¨æ•°æ®è¡Œä¸Šï¼Œè€Œæ˜¯&lt;strong&gt;é”åœ¨ç´¢å¼•è®°å½•ä¸Šçš„&lt;/strong&gt; ã€‚å½“ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶åˆ—æ²¡æœ‰ç´¢å¼•æ—¶ï¼Œä¼˜åŒ–å™¨æ— æ³•é€šè¿‡ç´¢å¼•æ ‘å¿«é€Ÿå®šä½åˆ°ç›®æ ‡æ•°æ®è¡Œï¼Œå”¯ä¸€çš„åŠæ³•å°±æ˜¯è¿›è¡Œ&lt;strong&gt;å…¨è¡¨æ‰«æ&lt;/strong&gt;ï¼Œæ²¿ç€èšç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰ä»å¤´åˆ°å°¾é€è¡Œæ£€æŸ¥ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RRéš”ç¦»çº§åˆ«çš„å¼ºåŠ›é˜²æŠ¤ï¼šè§£å†³å¹»è¯»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨&lt;strong&gt;å¯é‡å¤è¯»ï¼ˆRRï¼‰&lt;/strong&gt; çº§åˆ«ä¸‹ï¼Œæ•°æ®åº“è¦ä¿è¯äº‹åŠ¡æœŸé—´å¤šæ¬¡è¯»å–çš„æ•°æ®èŒƒå›´ç»å¯¹ä¸€è‡´ï¼Œç¦æ­¢å‡ºç°â€œå¹»è¯»â€ï¼ˆå³å…¶ä»–äº‹åŠ¡æ’å…¥æ–°æ•°æ®ï¼‰ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ŒInnoDB å¼•å…¥äº† &lt;strong&gt;Next-Key Lock&lt;/strong&gt; æœºåˆ¶ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è¿›è¡Œå…¨è¡¨æ‰«ææ—¶ï¼ŒInnoDB ä¸ä»…ä¼šç»™æ‰«æåˆ°çš„æ¯ä¸€æ¡&lt;strong&gt;ç°æœ‰è®°å½•&lt;/strong&gt;åŠ ä¸Šé”ï¼ˆRecord Lockï¼‰ï¼Œè¿˜ä¼šåœ¨æ¯æ¡è®°å½•ä¹‹å‰åŠ ä¸Š&lt;strong&gt;é—´éš™é”ï¼ˆGap Lockï¼‰&lt;/strong&gt;ï¼Œç»„åˆæˆ Next-Key Lock ã€‚&lt;/li&gt;
&lt;li&gt;é—´éš™é”çš„ä½œç”¨æ˜¯&lt;strong&gt;é”å®šä¸€ä¸ªèŒƒå›´&lt;/strong&gt;ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥ä»»ä½•æ–°è®°å½•ã€‚å½“å…¨è¡¨æ‰«æå‘ç”Ÿæ—¶ï¼Œè¿™ç§é”ä¼šè¦†ç›–æ•´ä¸ªè¡¨çš„æ¯ä¸€ä¸ªé—´éš™ï¼Œä»è€Œå½»åº•æœç»äº†å…¶ä»–äº‹åŠ¡æ’å…¥æ–°æ•°æ®çš„å¯èƒ½æ€§ï¼Œç›¸å½“äºé”ä½äº†æ•´å¼ è¡¨ ã€‚è¿™æ˜¯ä¸€ç§â€œå®å¯é”™æ€ä¸€åƒï¼Œä¸å¯æ”¾è¿‡ä¸€ä¸ªâ€çš„ä¿å®ˆç­–ç•¥ï¼Œä»æ ¹æœ¬ä¸Šä¿è¯äº†äº‹åŠ¡çš„éš”ç¦»æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;RCéš”ç¦»çº§åˆ«çš„æŠ˜è¡·ï¼šæ•ˆç‡ä¸ä¸€è‡´æ€§æƒè¡¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨&lt;strong&gt;è¯»å·²æäº¤ï¼ˆRCï¼‰&lt;/strong&gt; çº§åˆ«ä¸‹ï¼Œå…è®¸å‡ºç°å¹»è¯»ã€‚å› æ­¤ï¼Œå®ƒ&lt;strong&gt;ä¸ä¼šä½¿ç”¨é—´éš™é”&lt;/strong&gt; ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒä¸åŠ é”ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å…¨è¡¨æ‰«æè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ç¡®ä¿å½“å‰äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®åœ¨æ‰«ææœŸé—´ä¸è¢«å…¶ä»–äº‹åŠ¡æ›´æ”¹ï¼ŒInnoDB ä»ç„¶ä¼šä¸ºæ¯ä¸€æ¡æ‰«æåˆ°çš„è®°å½•åŠ ä¸Š&lt;strong&gt;è®°å½•é”ï¼ˆRecord Lockï¼‰&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;ä½† InnoDB åšäº†ä¸€é¡¹é‡è¦ä¼˜åŒ–ï¼šå½“ Server å±‚åˆ¤æ–­æŸæ¡è®°å½•ä¸æ»¡è¶³ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶åï¼Œå®ƒä¼š&lt;strong&gt;ç«‹å³é‡Šæ”¾&lt;/strong&gt;è¯¥è®°å½•ä¸Šçš„é” ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥ï¼Œæœ€ç»ˆç»“æœæ˜¯ï¼Œåœ¨ RC çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡åªä¼š&lt;strong&gt;æŒæœ‰çœŸæ­£æ»¡è¶³æ¡ä»¶çš„é‚£å‡ æ¡è®°å½•&lt;/strong&gt;ä¸Šçš„é”ï¼Œè€Œä¸æ˜¯é”å…¨è¡¨ã€‚è™½ç„¶æ‰«æè¿‡ç¨‹ä¸­ä»æœ‰åŠ é”å¼€é”€ï¼Œä½†é”çš„æŒæœ‰èŒƒå›´å’ŒæŒç»­æ—¶é—´å¤§å¤§å‡å°‘ï¼Œå¹¶å‘æ€§èƒ½æ¯” RR çº§åˆ«å¥½å¾ˆå¤šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é¿å…é”å…¨è¡¨å®ç”¨å»ºè®®"&gt;ğŸ’¡ å¦‚ä½•é¿å…é”å…¨è¡¨ï¼Ÿå®ç”¨å»ºè®®
&lt;/h3&gt;&lt;p&gt;äº†è§£äº†åŸç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ï¼Œé¿å…è¿™ç§å±å®³æå¤§çš„æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒåŸåˆ™ï¼šä¸ºæŸ¥è¯¢æ¡ä»¶å»ºç«‹ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æ ¹æœ¬çš„è§£å†³æ–¹æ¡ˆã€‚ä¸º &lt;code&gt;WHERE&lt;/code&gt;ã€&lt;code&gt;UPDATE&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt;è¯­å¥ä¸­å¸¸ç”¨çš„æ¡ä»¶åˆ—åˆ›å»ºåˆé€‚çš„ç´¢å¼•ï¼Œè®©æ•°æ®åº“èƒ½å¤Ÿå¿«é€Ÿå®šä½æ•°æ®ï¼Œé¿å…å…¨è¡¨æ‰«æ ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å¦‚æœç»å¸¸æ ¹æ®remarkåˆ—æ›´æ–°ï¼Œå°±ä¸ºå…¶æ·»åŠ ç´¢å¼•
ALTER TABLE user_info ADD INDEX idx_remark (remark);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨å®‰å…¨æ¨¡å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°† MySQL çš„ &lt;code&gt;sql_safe_updates&lt;/code&gt;å‚æ•°è®¾ç½®ä¸º &lt;code&gt;1&lt;/code&gt;ï¼Œå¯ä»¥å¼ºåˆ¶è¦æ±‚ &lt;code&gt;UPDATE&lt;/code&gt;/&lt;code&gt;DELETE&lt;/code&gt;è¯­å¥çš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶å¿…é¡»åŒ…å«ç´¢å¼•åˆ—æˆ–ä½¿ç”¨ &lt;code&gt;LIMIT&lt;/code&gt;ï¼Œå¦åˆ™è¯­å¥ä¼šæ‰§è¡Œå¤±è´¥ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„é¢„é˜²æªæ–½ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯„ä¼°éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸šåŠ¡åœºæ™¯å¯ä»¥å®¹å¿å¹»è¯»ï¼Œè€ƒè™‘ä½¿ç”¨ &lt;strong&gt;READ COMMITTED&lt;/strong&gt; éš”ç¦»çº§åˆ«ã€‚è¿™å¯ä»¥é¿å…é—´éš™é”ï¼Œå³ä½¿å‘ç”Ÿå…¨è¡¨æ‰«æï¼Œå…¶å½±å“ä¹Ÿè¿œå°äº RR çº§åˆ« ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–äº‹åŠ¡ä¹ æƒ¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é•¿äº‹åŠ¡&lt;/strong&gt;ï¼šäº‹åŠ¡è¿è¡Œæ—¶é—´è¶Šé•¿ï¼ŒæŒæœ‰é”çš„æ—¶é—´å°±è¶Šé•¿ï¼Œå¯¹å¹¶å‘çš„é˜»å¡å°±è¶Šä¸¥é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç¡®æŸ¥è¯¢èŒƒå›´&lt;/strong&gt;ï¼šå°½é‡ç¼©å°æ•°æ®æ“ä½œçš„èŒƒå›´ï¼Œé¿å…è¿‡äºå®½æ³›çš„æŸ¥è¯¢æ¡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªä»åŸç†åˆ°å®è·µçš„è¯¦ç»†è§£é‡Šï¼Œèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£è¿™ä¸ªé—®é¢˜ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é”è¡Œä¸ºè¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è®°å½•é”"&gt;è®°å½•é”
&lt;/h2&gt;&lt;p&gt;è®°å½•é”æ˜¯ MySQL InnoDB å¼•æ“ä¸­è¡Œçº§é”çš„åŸºç¡€ï¼Œç”¨äºç¡®ä¿å¹¶å‘äº‹åŠ¡ä¸­çš„æ•°æ®ä¸€è‡´æ€§ã€‚ä¸‹é¢è¿™ä¸ªæµç¨‹å›¾ç›´è§‚å±•ç¤ºäº†è®°å½•é”åœ¨ä¸¤ç§å…¸å‹åœºæ™¯ä¸‹çš„åŠ é”è¿‡ç¨‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤è¯†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[SQLè¯­å¥] --&amp;gt; B{åˆ¤æ–­è¯­å¥ç±»å‹}
B -- UPDATE/DELETE/INSERT --&amp;gt; C[é€šè¿‡ç´¢å¼•å®šä½è®°å½•]
B -- SELECT...FOR UPDATE/LOCK IN SHARE MODE --&amp;gt; C
C --&amp;gt; D{ç´¢å¼•ç±»å‹åˆ¤æ–­}
D -- ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼• --&amp;gt; E[ç²¾å‡†å®šä½åˆ°å•æ¡è®°å½•]
D -- éå”¯ä¸€ç´¢å¼•æˆ–æ— ç´¢å¼• --&amp;gt; F[å¯èƒ½å‡çº§ä¸ºä¸´é”®é”æˆ–è¡¨é”]
E --&amp;gt; G[å¯¹ç´¢å¼•è®°å½•åŠ è®°å½•é”]
G --&amp;gt; H[é”å®šå¯¹åº”çš„èšç°‡ç´¢å¼•è®°å½•]
H --&amp;gt; I[å®ŒæˆåŠ é”ï¼Œ äº‹åŠ¡ç‹¬å è¯¥è®°å½•]
F --&amp;gt; J[åŠ é”èŒƒå›´æ‰©å¤§æˆ–é€€åŒ–ä¸ºè¡¨é”]
J --&amp;gt; K[å¹¶å‘æ€§èƒ½ä¸‹é™]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†äº†è§£è®°å½•é”çš„å…³é”®ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-è®°å½•é”çš„å·¥ä½œåŸç†ä¸æ ¸å¿ƒç‰¹æ€§"&gt;ğŸ” è®°å½•é”çš„å·¥ä½œåŸç†ä¸æ ¸å¿ƒç‰¹æ€§
&lt;/h3&gt;&lt;p&gt;è®°å½•é”çš„æ ¸å¿ƒæœºåˆ¶æ˜¯&lt;strong&gt;é”å®šç´¢å¼•è®°å½•è€Œéæ•°æ®è¡Œæœ¬èº«&lt;/strong&gt;ã€‚InnoDB çš„æ•°æ®å­˜å‚¨åŸºäºèšç°‡ç´¢å¼•ï¼ˆClustered Indexï¼‰ï¼Œå³ä½¿è¡¨æ²¡æœ‰æ˜¾å¼å®šä¹‰ä¸»é”®ï¼ŒInnoDB ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªéšå¼çš„èšç°‡ç´¢å¼•ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„è®°å½•é”æœ€ç»ˆéƒ½æ˜¯é€šè¿‡é”å®šèšç°‡ç´¢å¼•æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é”å®šç´¢å¼•è®°å½•&lt;/strong&gt;ï¼šå½“ä½ é€šè¿‡ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ›´æ–°ä¸€æ¡è®°å½•æ—¶ï¼Œä¾‹å¦‚ &lt;code&gt;UPDATE users SET age = 30 WHERE id = 1;&lt;/code&gt;ï¼ŒInnoDB ä¼šåœ¨ &lt;code&gt;id=1&lt;/code&gt;è¿™ä¸ªç´¢å¼•é¡¹ä¸ŠåŠ ä¸€æŠŠè®°å½•é”ï¼ˆæ’ä»–é”ï¼‰ã€‚å…¶ä»–äº‹åŠ¡è‹¥æƒ³ä¿®æ”¹åŒä¸€æ¡è®°å½•ï¼Œå¿…é¡»ç­‰å¾…è¯¥é”é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éå”¯ä¸€ç´¢å¼•ä¸é”å‡çº§&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ä½¿ç”¨çš„æ˜¯éå”¯ä¸€ç´¢å¼•ï¼Œä¸ºäº†é˜²æ­¢å¹»è¯»ï¼ŒInnoDB ä¸ä¼šåªåŠ è®°å½•é”ï¼Œè€Œæ˜¯ä¼šåŠ &lt;strong&gt;ä¸´é”®é”&lt;/strong&gt;ï¼Œå³é”å®šä¸€ä¸ªèŒƒå›´ã€‚å¦‚æœæŸ¥è¯¢&lt;strong&gt;æ²¡æœ‰ä½¿ç”¨ä»»ä½•ç´¢å¼•&lt;/strong&gt;ï¼Œè®°å½•é”å°†æ— æ³•ç²¾ç¡®å®šä½æ•°æ®è¡Œï¼ŒInnoDB ä¼š&lt;strong&gt;é€€åŒ–ä¸ºè¡¨çº§é”&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è®°å½•é”ä¸å…¶ä»–é”çš„åŒºåˆ«"&gt;ğŸ“Š è®°å½•é”ä¸å…¶ä»–é”çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£è®°å½•é”çš„å®šä½ï¼Œå¯ä»¥å‚è€ƒä¸‹è¡¨ä¸é—´éš™é”ã€ä¸´é”®é”çš„å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é”ç±»å‹&lt;/th&gt;
&lt;th&gt;é”å®šèŒƒå›´&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä½œç”¨&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®°å½•é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•æ¡ç´¢å¼•è®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜²æ­¢æŒ‡å®šè®°å½•è¢«å¹¶å‘ä¿®æ”¹&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE ... WHERE id = 1&lt;/code&gt;(&lt;code&gt;id&lt;/code&gt;æ˜¯ä¸»é”®)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é—´éš™é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜²æ­¢åœ¨èŒƒå›´å†…æ’å…¥æ–°æ•°æ®ï¼ˆé˜²å¹»è¯»ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE age BETWEEN 10 AND 20 FOR UPDATE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸´é”®é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è®°å½•é” + é—´éš™é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¢é˜²å¹¶å‘ä¿®æ”¹ï¼Œåˆé˜²å¹»è¯»&lt;/td&gt;
&lt;td&gt;åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹çš„èŒƒå›´æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ˜¯é«˜æ•ˆä½¿ç”¨è®°å½•é”çš„å‰æ&lt;/strong&gt;ï¼šåŠ¡å¿…ä¸ºé«˜é¢‘æŸ¥è¯¢å’Œæ›´æ–°æ¡ä»¶åˆ›å»ºæœ‰æ•ˆçš„ç´¢å¼•ï¼Œç‰¹åˆ«æ˜¯ä¸»é”®å’Œå”¯ä¸€ç´¢å¼•ã€‚è¿™èƒ½ç¡®ä¿è®°å½•é”ç²¾å‡†é”å®šç›®æ ‡ï¼Œé¿å…é”å‡çº§å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶äº‹åŠ¡ç²’åº¦ï¼ŒåŠæ—¶æäº¤&lt;/strong&gt;ï¼šè®°å½•é”åœ¨äº‹åŠ¡æäº¤æˆ–å›æ»šåæ‰ä¼šé‡Šæ”¾ã€‚&lt;strong&gt;é•¿äº‹åŠ¡&lt;/strong&gt;ä¼šé•¿æ—¶é—´æŒæœ‰é”ï¼Œå¢åŠ æ­»é”æ¦‚ç‡å¹¶é˜»å¡å…¶ä»–äº‹åŠ¡ï¼Œåº”å°½é‡ç¼©çŸ­äº‹åŠ¡æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£éš”ç¦»çº§åˆ«çš„å½±å“&lt;/strong&gt;ï¼šè®°å½•é”åœ¨ MySQL é»˜è®¤çš„&lt;strong&gt;å¯é‡å¤è¯»&lt;/strong&gt;å’Œ&lt;strong&gt;è¯»å·²æäº¤&lt;/strong&gt;éš”ç¦»çº§åˆ«ä¸‹éƒ½èµ·ä½œç”¨ã€‚ä½†åœ¨å¯é‡å¤è¯»çº§åˆ«ä¸‹ï¼ŒInnoDB ä¼šæ›´å¤šåœ°ä½¿ç”¨ä¸´é”®é”æ¥å½»åº•é˜²æ­¢å¹»è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æ­»é”é£é™©&lt;/strong&gt;ï¼šè¡Œçº§é”ï¼ˆåŒ…æ‹¬è®°å½•é”ï¼‰å¯èƒ½å¼•èµ·æ­»é”ã€‚åº”ç”¨ç¨‹åºéœ€è¦è®¾è®¡åˆç†çš„é‡è¯•æœºåˆ¶ï¼Œå¹¶å…³æ³¨æ•°æ®åº“çš„æ­»é”æ—¥å¿—ä»¥ä¼˜åŒ–ä¸šåŠ¡é€»è¾‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ MySQL çš„è®°å½•é”ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é”è¡Œä¸ºæœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¸´é”®é”"&gt;ä¸´é”®é”
&lt;/h2&gt;&lt;p&gt;Next-Key Lockï¼ˆä¸´é”®é”ï¼‰æ˜¯ MySQL InnoDB å­˜å‚¨å¼•æ“åœ¨&lt;strong&gt;å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰&lt;/strong&gt; éš”ç¦»çº§åˆ«ä¸‹ï¼Œç”¨äºè§£å†³å¹»è¯»é—®é¢˜çš„æ ¸å¿ƒé”æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§ç»“åˆäº†è®°å½•é”å’Œé—´éš™é”çš„å¤åˆé”ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†å®ƒçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é”ç±»å‹&lt;/th&gt;
&lt;th&gt;é”å®šç›®æ ‡&lt;/th&gt;
&lt;th&gt;é”å®šèŒƒå›´ç¤ºä¾‹ï¼ˆå‡è®¾ç´¢å¼•å€¼æœ‰ 1, 3, 5ï¼‰&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®°å½•é” (Record Lock)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´¢å¼•ä¸­çš„&lt;strong&gt;å•æ¡å…·ä½“è®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é”å®š &lt;code&gt;id = 5&lt;/code&gt;è¿™ä¸€è¡Œ&lt;/td&gt;
&lt;td&gt;é˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹æˆ–åˆ é™¤è¿™æ¡å·²å­˜åœ¨çš„è®°å½•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é—´éš™é” (Gap Lock)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´¢å¼•è®°å½•ä¹‹é—´çš„&lt;strong&gt;é—´éš™&lt;/strong&gt;ï¼ˆä¸€ä¸ªå¼€åŒºé—´ï¼‰&lt;/td&gt;
&lt;td&gt;é”å®š &lt;code&gt;(3, 5)&lt;/code&gt;è¿™ä¸ªç©ºéš™&lt;/td&gt;
&lt;td&gt;é˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªé—´éš™å†…æ’å…¥æ–°è®°å½•ï¼Œä»è€Œæœç»å¹»è¯»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Next-Key Lock&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è®°å½•é” + é—´éš™é”&lt;/strong&gt;ï¼ˆä¸€ä¸ªå·¦å¼€å³é—­åŒºé—´ï¼‰&lt;/td&gt;
&lt;td&gt;é”å®š &lt;code&gt;(3, 5]&lt;/code&gt;è¿™ä¸ªèŒƒå›´&lt;/td&gt;
&lt;td&gt;æ—¢é˜²æ­¢å¯¹å·²æœ‰è®°å½•çš„ä¿®æ”¹ï¼Œä¹Ÿé˜²æ­¢åœ¨é—´éš™ä¸­æ’å…¥æ–°è®°å½•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸åŠ é”è§„åˆ™"&gt;ğŸ”’ å·¥ä½œæœºåˆ¶ä¸åŠ é”è§„åˆ™
&lt;/h3&gt;&lt;p&gt;Next-Key Lock çš„é”å®šèŒƒå›´æ˜¯ &lt;strong&gt;å·¦å¼€å³é—­&lt;/strong&gt; çš„åŒºé—´ã€‚å‡è®¾ä¸€ä¸ªç´¢å¼•çš„å€¼ä¾æ¬¡ä¸º 1, 3, 5, 8ï¼Œé‚£ä¹ˆè¯¥ç´¢å¼•å¯èƒ½è¢« Next-Key Lock åˆ’åˆ†çš„åŒºé—´æœ‰ï¼š&lt;code&gt;(-âˆ, 1]&lt;/code&gt;, &lt;code&gt;(1, 3]&lt;/code&gt;, &lt;code&gt;(3, 5]&lt;/code&gt;, &lt;code&gt;(5, 8]&lt;/code&gt;, &lt;code&gt;(8, +âˆ)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŠ é”è§„åˆ™å¹¶éä¸€æˆä¸å˜ï¼Œä¼šæ ¹æ®&lt;strong&gt;æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨çš„ç´¢å¼•ç±»å‹&lt;/strong&gt;å’Œ&lt;strong&gt;æ•°æ®æ˜¯å¦å­˜åœ¨&lt;/strong&gt;è¿›è¡Œä¼˜åŒ–ï¼Œæ ¸å¿ƒè§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h4 id="1-å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢"&gt;1. å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®°å½•å­˜åœ¨æ—¶&lt;/strong&gt;ï¼šNext-Key Lock ä¼š&lt;strong&gt;é€€åŒ–ä¸ºè®°å½•é”ï¼ˆRecord Lockï¼‰&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;SELECT * FROM users WHERE id = 5 FOR UPDATE;&lt;/code&gt;ï¼ˆid æ˜¯ä¸»é”®ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ é”èŒƒå›´&lt;/strong&gt;ï¼šä»…é”å®š &lt;code&gt;id = 5&lt;/code&gt;è¿™ä¸€è¡Œè®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šå”¯ä¸€ç´¢å¼•èƒ½ç¡®ä¿åªè¿”å›ä¸€æ¡è®°å½•ï¼Œæ— éœ€é€šè¿‡é—´éš™é”æ¥é˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥ç›¸åŒå€¼çš„è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢"&gt;2. éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®°å½•å­˜åœ¨æ—¶&lt;/strong&gt;ï¼šNext-Key Lock &lt;strong&gt;ä¸ä¼šé€€åŒ–&lt;/strong&gt;ã€‚é™¤äº†é”å®šæ‰€æœ‰åŒ¹é…çš„è®°å½•æœ¬èº«ï¼Œè¿˜ä¼šé”å®šè¿™äº›è®°å½•ä¹‹å‰çš„é—´éš™ï¼Œä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥å…·æœ‰ç›¸åŒç´¢å¼•å€¼çš„æ–°è®°å½•ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;SELECT * FROM users WHERE age = 20 FOR UPDATE;&lt;/code&gt;ï¼ˆage æ˜¯æ™®é€šç´¢å¼•ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ é”èŒƒå›´&lt;/strong&gt;ï¼šå‡è®¾ç°æœ‰æ•°æ®ä¸º &lt;code&gt;(10, 15, 20, 25)&lt;/code&gt;ï¼Œåˆ™ä¼šé”å®š &lt;code&gt;(15, 20]&lt;/code&gt;å’Œ &lt;code&gt;(20, 25]&lt;/code&gt;è¿™ä¸¤ä¸ªåŒºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-èŒƒå›´æŸ¥è¯¢æ— è®ºä½•ç§ç´¢å¼•"&gt;3. èŒƒå›´æŸ¥è¯¢ï¼ˆæ— è®ºä½•ç§ç´¢å¼•ï¼‰
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;Next-Key Lock ä¼šé”å®š&lt;strong&gt;æŸ¥è¯¢æ¡ä»¶è¦†ç›–çš„æ‰€æœ‰èŒƒå›´&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;SELECT * FROM users WHERE id &amp;gt; 10 AND id &amp;lt; 20 FOR UPDATE;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ é”èŒƒå›´&lt;/strong&gt;ï¼šä¼šé”å®š &lt;code&gt;(10, 15]&lt;/code&gt;å’Œ &lt;code&gt;(15, 20]&lt;/code&gt;ç­‰åŒºé—´ï¼Œç¡®ä¿åœ¨è¿™ä¸ªèŒƒå›´å†…çš„æ’å…¥å’Œä¿®æ”¹éƒ½è¢«é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ½œåœ¨é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®"&gt;âš ï¸ æ½œåœ¨é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;p&gt;å°½ç®¡ Next-Key Lock èƒ½æœ‰æ•ˆé˜²æ­¢å¹»è¯»ï¼Œä½†å®ƒä¹Ÿå¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é”èŒƒå›´è¿‡å¤§ä¸æ€§èƒ½ä¸‹é™&lt;/strong&gt;ï¼šèŒƒå›´æŸ¥è¯¢æˆ–éå”¯ä¸€ç´¢å¼•æŸ¥è¯¢å¯èƒ½é”å®šå¤§é‡æ•°æ®ï¼Œå¯¼è‡´å¹¶å‘æ€§èƒ½é™ä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”é£é™©å¢åŠ &lt;/strong&gt;ï¼šå¤šä¸ªäº‹åŠ¡ä»¥ä¸åŒé¡ºåºè¯·æ±‚é‡å çš„ Next-Key Lock èŒƒå›´æ—¶ï¼Œæ›´å®¹æ˜“å½¢æˆå¾ªç¯ç­‰å¾…ï¼Œå¼•å‘æ­»é”ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨å”¯ä¸€ç´¢å¼•&lt;/strong&gt;ï¼šè®©ç­‰å€¼æŸ¥è¯¢é€€åŒ–ä¸ºç²’åº¦æ›´ç»†çš„è®°å½•é”ï¼Œæå‡å¹¶å‘åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç¡®æŸ¥è¯¢èŒƒå›´&lt;/strong&gt;ï¼šé¿å…ä½¿ç”¨è¿‡äºå®½æ³›çš„ &lt;code&gt;BETWEEN&lt;/code&gt;æˆ– &lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&lt;/code&gt;æ¡ä»¶ï¼Œå‡å°é”èŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘éš”ç¦»çº§åˆ«&lt;/strong&gt;ï¼šå¦‚æœä¸šåŠ¡å¯ä»¥å®¹å¿å¹»è¯»ï¼Œä½¿ç”¨ &lt;strong&gt;READ COMMITTED&lt;/strong&gt; éš”ç¦»çº§åˆ«å¯ä»¥ç¦ç”¨é—´éš™é”ï¼ˆGap Lockï¼‰ï¼Œä»è€Œé¿å… Next-Key Lock çš„å¤§éƒ¨åˆ†è´Ÿé¢å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Next-Key Lock æ˜¯ InnoDB åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ä¿éšœæ•°æ®ä¸€è‡´æ€§çš„åŸºçŸ³ã€‚ç†è§£å…¶ &lt;strong&gt;â€œè®°å½•é”+é—´éš™é”â€&lt;/strong&gt; çš„ç»„åˆæœ¬è´¨ã€&lt;strong&gt;å·¦å¼€å³é—­&lt;/strong&gt;çš„åŒºé—´ç‰¹æ€§ï¼Œä»¥åŠåœ¨ä¸åŒç´¢å¼•å’ŒæŸ¥è¯¢æ¡ä»¶ä¸‹çš„&lt;strong&gt;é€€åŒ–è§„åˆ™&lt;/strong&gt;ï¼Œå¯¹äºè®¾è®¡é«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„æ•°æ®åº“åº”ç”¨è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ Next-Key Lockã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åŠ é”è¡Œä¸ºæœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="mysql-ä¹è§‚é”å†™"&gt;MYSQL ä¹è§‚é”å†™
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œä¹è§‚é”æ˜¯ä¸€ç§éå¸¸å·§å¦™çš„å¹¶å‘æ§åˆ¶ç­–ç•¥ï¼Œå®ƒç‰¹åˆ«é€‚åˆåœ¨&lt;strong&gt;å†™æ“ä½œå¹¶å‘ä¸é«˜ä½†è¯»æ“ä½œéå¸¸é¢‘ç¹&lt;/strong&gt;çš„åœºæ™¯ä¸‹ä¿éšœæ•°æ®ä¸€è‡´æ€§ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä¹è§‚åœ°è®¤ä¸ºæ•°æ®å†²çªå‘ç”Ÿçš„æ¦‚ç‡å¾ˆä½ï¼Œå› æ­¤åªåœ¨æ•°æ®æ›´æ–°çš„é‚£ä¸€åˆ»æ‰å»æ£€æµ‹å†²çªã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº†ä¹è§‚é”åœ¨å†™æ“ä½œä¸­çš„åº”ç”¨è¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åº”ç”¨å±‚é¢&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶ä¸æ“ä½œ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ•°æ®è¡¨æ·»åŠ &lt;strong&gt;ç‰ˆæœ¬å·ï¼ˆVersionï¼‰å­—æ®µ&lt;/strong&gt;æˆ–&lt;strong&gt;æ—¶é—´æˆ³ï¼ˆTimestampï¼‰å­—æ®µ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡æ›´æ–°æ—¶ï¼Œç‰ˆæœ¬å·é€’å¢æˆ–æ›´æ–°æ—¶é—´æˆ³ï¼Œå¹¶åœ¨ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ä¸­æ ¡éªŒæ­¤æ ‡è¯†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ›´æ–°æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œå¸¦æ¡ä»¶åˆ¤æ–­çš„ &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ï¼Œä¾‹å¦‚ï¼š&lt;code&gt;UPDATE ... SET ..., version = version + 1 WHERE id = ? AND version = ?&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼šæ•°æ®åº“ä¿è¯æ•´ä¸ª &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥æ˜¯åŸå­æ“ä½œï¼Œå³ä½¿å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿåªæœ‰ä¸€æ¡èƒ½æˆåŠŸã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœåˆ¤æ–­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ® &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥æ‰§è¡Œå&lt;strong&gt;å—å½±å“çš„è¡Œæ•°&lt;/strong&gt; æ¥åˆ¤æ–­æˆåŠŸä¸å¦ã€‚&lt;/td&gt;
&lt;td&gt;- &lt;strong&gt;å—å½±å“è¡Œæ•°ä¸º 1&lt;/strong&gt;ï¼šæ›´æ–°æˆåŠŸï¼Œæ•°æ®å·²è¢«ä¿®æ”¹ã€‚ - &lt;strong&gt;å—å½±å“è¡Œæ•°ä¸º 0&lt;/strong&gt;ï¼šæ›´æ–°å¤±è´¥ï¼Œè¡¨ç¤ºæ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤±è´¥å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸éœ€è¦&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;æˆ–å‘ç”¨æˆ·è¿”å›å‹å¥½æç¤ºã€‚&lt;/td&gt;
&lt;td&gt;é‡è¯•æ—¶éœ€é‡æ–°è¯»å–æœ€æ–°æ•°æ®å’Œç‰ˆæœ¬å·ï¼Œç„¶åå†æ¬¡å°è¯•æ›´æ–°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•å®ç°ä¹è§‚é”"&gt;ğŸ”§ å¦‚ä½•å®ç°ä¹è§‚é”
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”çš„å®ç°é€šå¸¸ä¾èµ–äºä¸€ä¸ªé¢å¤–çš„å­—æ®µæ¥æ ‡è¯†æ•°æ®çš„ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºäºç‰ˆæœ¬å·ï¼ˆVersionï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨ã€æœ€æ¨èçš„æ–¹å¼ã€‚ä½ éœ€è¦å…ˆåœ¨è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ•´å‹çš„ç‰ˆæœ¬å·å­—æ®µï¼ˆä¾‹å¦‚ &lt;code&gt;version&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE product (
id INT PRIMARY KEY,
name VARCHAR(50),
stock INT,
version INT DEFAULT 0 -- ä¹è§‚é”ç‰ˆæœ¬å­—æ®µ
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿›è¡Œæ›´æ–°æ“ä½œæ—¶ï¼ŒSQL è¯­å¥å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- 1. å…ˆæŸ¥è¯¢ï¼Œè·å–å½“å‰æ•°æ®å’Œç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ version=1ï¼‰
SELECT stock, version FROM product WHERE id = 1;
-- 2. åœ¨åº”ç”¨å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆä¾‹å¦‚è®¡ç®—æ–°åº“å­˜ï¼‰...
-- 3. æ›´æ–°æ•°æ®ï¼ŒåŒæ—¶å¢åŠ ç‰ˆæœ¬å·ï¼Œå¹¶æ ¸å¯¹æ—§ç‰ˆæœ¬å·
UPDATE product
SET stock = 9, version = version + 1
WHERE id = 1 AND version = 1; -- è¿™é‡Œçš„ version=1 æ˜¯ç¬¬ä¸€æ­¥æŸ¥è¯¢åˆ°çš„å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºäºæ—¶é—´æˆ³ï¼ˆTimestampï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ—¶é—´æˆ³å­—æ®µï¼ˆä¾‹å¦‚ &lt;code&gt;update_time&lt;/code&gt;ï¼‰ã€‚æ›´æ–°æ—¶ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ä¸­æ ¸å¯¹è¯»å–æ—¶çš„æ—¶é—´æˆ³æ˜¯å¦ä¸å½“å‰æ•°æ®åº“ä¸­çš„æ—¶é—´æˆ³ä¸€è‡´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE product
SET stock = 9, update_time = NOW()
WHERE id = 1 AND update_time = &amp;#39;2025-10-13 10:00:00&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ—¶é—´æˆ³æ–¹å¼å¯¹æ•°æ®åº“æœåŠ¡å™¨çš„æ—¶é—´åŒæ­¥è¦æ±‚å¾ˆé«˜ï¼Œä¸”åœ¨æé«˜å¹¶å‘ä¸‹å¯èƒ½å› æ—¶é—´ç²¾åº¦é—®é¢˜å¯¼è‡´å†²çªæ£€æµ‹ä¸å‡†ç¡®ï¼Œå› æ­¤&lt;strong&gt;ç‰ˆæœ¬å·æ–¹å¼æ˜¯æ›´æ™®éçš„é€‰æ‹©&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åœ¨åº”ç”¨ç¨‹åºä¸­å¦‚ä½•åº”ç”¨"&gt;ğŸ’» åœ¨åº”ç”¨ç¨‹åºä¸­å¦‚ä½•åº”ç”¨
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”çš„é€»è¾‘éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ Java ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ç»“åˆé‡è¯•æœºåˆ¶ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä¼ªä»£ç ç¤ºä¾‹
public boolean deductStock(Long productId) {
for (int retry = 0; retry &amp;lt; MAX_RETRY_TIMES; retry++) { // æœ€å¤§é‡è¯•æ¬¡æ•°
// 1. æŸ¥è¯¢å•†å“å½“å‰åº“å­˜å’Œç‰ˆæœ¬å·
Product product = productDao.selectById(productId);
// 2. æ£€æŸ¥åº“å­˜ã€è®¡ç®—æ–°åº“å­˜ç­‰ä¸šåŠ¡é€»è¾‘
if (product.getStock() &amp;lt;= 0) {
throw new RuntimeException(&amp;#34;åº“å­˜ä¸è¶³&amp;#34;);
}
int newStock = product.getStock() - 1;
// 3. å°è¯•æ›´æ–°ï¼Œå¸¦ä¸Šç‰ˆæœ¬å·ä½œä¸ºæ¡ä»¶
int affectedRows = productDao.updateStockAndVersion(productId, newStock, product.getVersion());
// 4. æ ¹æ®å—å½±å“è¡Œæ•°åˆ¤æ–­æ›´æ–°æ˜¯å¦æˆåŠŸ
if (affectedRows &amp;gt; 0) {
return true; // æ›´æ–°æˆåŠŸ
}
// å¦‚æœ affectedRows ä¸º 0ï¼Œè¯´æ˜æ›´æ–°å¤±è´¥ï¼Œå¾ªç¯ä¼šè¿›è¡Œé‡è¯•
}
throw new RuntimeException(&amp;#34;å¹¶å‘æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•&amp;#34;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ &lt;code&gt;updateStockAndVersion&lt;/code&gt;æ–¹æ³•è¿”å›çš„å½±å“è¡Œæ•°æ˜¯ 0ï¼Œè¯´æ˜æœ‰å…¶ä»–è¯·æ±‚å·²ç»ä¿®æ”¹äº†æ•°æ®ï¼Œå½“å‰æ“ä½œç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œæ›´æ–°å¤±è´¥ï¼Œç„¶åè¿›å…¥é‡è¯•é€»è¾‘ã€‚&lt;/p&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šä¹è§‚é”çš„ä¸»è¦ä¼˜åŠ¿åœ¨äº&lt;strong&gt;å‡å°‘äº†é”çš„æŒæœ‰æ—¶é—´&lt;/strong&gt;ï¼Œé¿å…äº†æ•°æ®åº“çº§åˆ«çš„é”ç«äº‰ï¼Œä»è€Œåœ¨é«˜è¯»ä½å†™çš„åœºæ™¯ä¸‹èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ£åŠ¿&lt;/strong&gt;ï¼šåœ¨&lt;strong&gt;å†™æ“ä½œå¼‚å¸¸é¢‘ç¹&lt;/strong&gt;çš„åœºæ™¯ä¸‹ï¼Œå†²çªæ¦‚ç‡ä¼šå¤§å¤§å¢åŠ ï¼Œå¯¼è‡´å¤§é‡æ“ä½œå¤±è´¥å’Œé‡è¯•ï¼Œåè€Œä¼šé™ä½æ€§èƒ½å¹¶å¢åŠ åº”ç”¨é€»è¾‘çš„å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœ€ä½³å®è·µæ€»ç»“"&gt;ğŸ’ æœ€ä½³å®è·µæ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä¹è§‚é”åœ¨å†™æ“ä½œä¸Šçš„åº”ç”¨å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;strong&gt;ä¸€æŸ¥äºŒæ¯”ä¸‰æ›´æ–°&lt;/strong&gt;ã€‚å…ˆæŸ¥è¯¢æ•°æ®å’Œç‰ˆæœ¬æ ‡è¯†ï¼Œç„¶ååœ¨æ›´æ–°æ—¶æ¯”è¾ƒç‰ˆæœ¬æ ‡è¯†ï¼Œæœ€åå®Œæˆæ›´æ–°å¹¶æ ¹æ®ç»“æœå†³å®šåç»­æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ MySQL çš„ä¹è§‚é”ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="redis-è¶…å–"&gt;REDIS è¶…å–
&lt;/h2&gt;&lt;p&gt;åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œç”¨ Redis è§£å†³â€œè¶…å–â€é—®é¢˜çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;ç¡®ä¿åº“å­˜æŸ¥éªŒå’Œæ‰£å‡æ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ï¼Œé¿å…å¤šä¸ªè¯·æ±‚åŒæ—¶è¯»åˆ°è¶…é¢åº“å­˜ã€‚ä¸‹é¢è¿™å¼ å›¾æ¢³ç†äº†è§£å†³è¶…å–é—®é¢˜çš„æ ¸å¿ƒæ€è·¯å’Œä¸»æµæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[é«˜å¹¶å‘è¯·æ±‚] --&amp;gt; B{é€‰æ‹©è§£å†³æ–¹æ¡ˆ}
B --&amp;gt; C[RedisåŸå­æ“ä½œ]
B --&amp;gt; D[Luaè„šæœ¬]
B --&amp;gt; E[åˆ†å¸ƒå¼é”]
C --&amp;gt; C1[INCR/DECRå‘½ä»¤]
C1 --&amp;gt; F[å®ç°ç®€å•&amp;lt;br&amp;gt;æ€§èƒ½æé«˜]
D --&amp;gt; D1[å°è£…å¤æ‚é€»è¾‘]
D1 --&amp;gt; G[åŸå­æ€§æ‰§è¡Œ&amp;lt;br&amp;gt;çµæ´»æ€§å¼º]
E --&amp;gt; E1[setnxå‘½ä»¤]
E1 --&amp;gt; H[å¼ºä¸€è‡´æ€§&amp;lt;br&amp;gt;é€»è¾‘æ¸…æ™°]
F --&amp;gt; I[è§£å†³æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹]
G --&amp;gt; I
H --&amp;gt; I
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬è¯¦ç»†æ¢è®¨ä¸‰ç§ä¸»æµçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ–¹æ¡ˆä¸€redisåŸå­æ“ä½œ"&gt;ğŸ”‘ æ ¸å¿ƒæ–¹æ¡ˆä¸€ï¼šRedisåŸå­æ“ä½œ
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥é«˜æ•ˆçš„æ–¹æ³•ï¼Œç›´æ¥åˆ©ç”¨ Redis å‘½ä»¤çš„åŸå­æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;DECR&lt;/code&gt;æˆ– &lt;code&gt;DECRBY&lt;/code&gt;å‘½ä»¤ç›´æ¥æ‰£å‡åº“å­˜ã€‚è¿™äº›å‘½ä»¤æ˜¯åŸå­æ€§çš„ï¼Œæ„å‘³ç€æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ“ä½œç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# åˆå§‹åŒ–åº“å­˜
SET stock:product_001 100
# æ‰£å‡åº“å­˜1ä»¶
DECR stock:product_001
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœåˆ¤æ–­&lt;/strong&gt;ï¼šå‘½ä»¤çš„è¿”å›å€¼æ˜¯æ‰£å‡åçš„æ–°åº“å­˜å€¼ã€‚ä½ éœ€è¦åˆ¤æ–­è¿™ä¸ªè¿”å›å€¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å€¼ â‰¥ 0&lt;/strong&gt;ï¼šæ‰£å‡æˆåŠŸï¼Œåº“å­˜å……è¶³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å€¼ &amp;lt; 0&lt;/strong&gt;ï¼šæ‰£å‡ååº“å­˜ä¸ºè´Ÿï¼Œè¡¨ç¤ºè¶…å–ã€‚æ­¤æ—¶é€šå¸¸éœ€è¦&lt;strong&gt;å›æ»š&lt;/strong&gt;ï¼ˆç”¨ &lt;code&gt;INCR&lt;/code&gt;åŠ å›å»ï¼‰å¹¶è¿”å›å¤±è´¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå®ç°ç®€å•ï¼Œæ€§èƒ½æé«˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ‰£å‡ååº“å­˜ä¸ºè´Ÿæ—¶éœ€è¦ä¸»åŠ¨å›æ»šï¼Œé€»è¾‘ä¸Šä¸å®Œç¾ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒæ–¹æ¡ˆäºŒluaè„šæœ¬"&gt;ğŸ“œ æ ¸å¿ƒæ–¹æ¡ˆäºŒï¼šLuaè„šæœ¬
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å°†â€œåˆ¤æ–­åº“å­˜â€å’Œâ€œæ‰£å‡åº“å­˜â€ç­‰å¤šä¸ªæ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼ŒLuaè„šæœ¬æ˜¯æœ€ä½³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šRedis ä¼šå°†æ•´ä¸ª Lua è„šæœ¬ä½œä¸ºä¸€ä¸ªå•çº¿ç¨‹ä»»åŠ¡é¡ºåºæ‰§è¡Œï¼ŒæœŸé—´ä¸ä¼šæ’å…¥å…¶ä»–å‘½ä»¤ï¼Œä»è€Œå¤©ç„¶å…·å¤‡åŸå­æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è„šæœ¬ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- KEYS[1]: åº“å­˜keyï¼Œå¦‚ stock:product_001
-- ARGV[1]: è¦æ‰£å‡çš„æ•°é‡ï¼Œå¦‚ 1
local stockKey = KEYS[1]
local decreaseAmount = tonumber(ARGV[1])
-- è·å–å½“å‰åº“å­˜
local currentStock = tonumber(redis.call(&amp;#39;GET&amp;#39;, stockKey) or 0)
-- åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³
if currentStock &amp;gt;= decreaseAmount then
-- åº“å­˜å……è¶³ï¼Œæ‰§è¡Œæ‰£å‡
redis.call(&amp;#39;DECRBY&amp;#39;, stockKey, decreaseAmount)
return currentStock - decreaseAmount -- è¿”å›æ‰£å‡åçš„åº“å­˜ï¼Œä»£è¡¨æˆåŠŸ
else
return -1 -- è¿”å›-1ï¼Œä»£è¡¨åº“å­˜ä¸è¶³
end
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡Œæµç¨‹&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé€šè¿‡ &lt;code&gt;EVAL&lt;/code&gt;æˆ– &lt;code&gt;EVALSHA&lt;/code&gt;å‘½ä»¤æ‰§è¡Œè¯¥è„šæœ¬ï¼Œå¹¶æ ¹æ®è¿”å›å€¼åˆ¤æ–­æˆåŠŸä¸å¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;è¿™æ˜¯è§£å†³è¶…å–é—®é¢˜æœ€æ¨èçš„æ–¹å¼&lt;/strong&gt;ã€‚å®ƒæ—¢ä¿è¯äº†å¤æ‚é€»è¾‘çš„åŸå­æ€§ï¼Œåˆä¿æŒäº†é«˜æ€§èƒ½ï¼Œçµæ´»æ€§å¼ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒæ–¹æ¡ˆä¸‰åˆ†å¸ƒå¼é”"&gt;ğŸ”’ æ ¸å¿ƒæ–¹æ¡ˆä¸‰ï¼šåˆ†å¸ƒå¼é”
&lt;/h3&gt;&lt;p&gt;å½“ä¸šåŠ¡é€»è¾‘éå¸¸å¤æ‚ï¼Œä¸ä»…æ¶‰åŠåº“å­˜æ‰£å‡ï¼Œè¿˜åŒ…æ‹¬ç”Ÿæˆè®¢å•ã€æ›´æ–°ç”¨æˆ·ä¿¡æ¯ç­‰å¤šä¸ªæ­¥éª¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥å¼ºåˆ¶å°†æ•´ä¸ªä¸šåŠ¡æµç¨‹ä¸²è¡ŒåŒ–ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œä¸šåŠ¡å‰ï¼Œå…ˆå°è¯•åœ¨ Redis ä¸­è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„é”é”®ã€‚åªæœ‰è®¾ç½®æˆåŠŸçš„è¯·æ±‚æ‰æœ‰æƒæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå…¶ä»–è¯·æ±‚éœ€ç­‰å¾…æˆ–ç›´æ¥è¿”å›å¤±è´¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®å‘½ä»¤&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;SET key value NX PX timeout&lt;/code&gt;å‘½ä»¤è¿›è¡ŒåŠ é”ï¼Œè¯¥å‘½ä»¤æ˜¯åŸå­æ€§çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NX&lt;/code&gt;ï¼šä»…å½“ key ä¸å­˜åœ¨æ—¶è®¾ç½®æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PX&lt;/code&gt;ï¼šä¸º key è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œé¿å…æ­»é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°è¦ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é”å€¼å”¯ä¸€&lt;/strong&gt;ï¼šé”çš„ value åº”ä½¿ç”¨å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ UUIDï¼‰ï¼Œç¡®ä¿è§£é”æ—¶åªèƒ½ç”±åŠ é”è€…è§£é™¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå­è§£é”&lt;/strong&gt;ï¼šæœ€å¥½ä½¿ç”¨ Lua è„šæœ¬å®ç°åˆ¤æ–­é”å€¼å’Œåˆ é™¤é”çš„åŸå­æ“ä½œï¼Œé˜²æ­¢è¯¯åˆ å…¶ä»–è¯·æ±‚çš„é”ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- è§£é”è„šæœ¬ç¤ºä¾‹
if redis.call(&amp;#34;get&amp;#34;, KEYS[1]) == ARGV[1] then
return redis.call(&amp;#34;del&amp;#34;, KEYS[1])
else
return 0
end
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šèƒ½ä¿è¯è·¨å¤šä¸ªèµ„æºæˆ–æœåŠ¡çš„å¤æ‚ä¸šåŠ¡é€»è¾‘çš„å¼ºä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ€§èƒ½å¼€é”€æœ€å¤§ï¼Œå› ä¸ºè¯·æ±‚éœ€è¦æ’é˜Ÿï¼Œä¸é€‚åˆæåº¦é«˜å¹¶å‘ä¸”é€»è¾‘ç®€å•çš„çº¯æ‰£åº“å­˜åœºæ™¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹å»ºè®®"&gt;ğŸ’¡ æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹å»ºè®®
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ ¹æ®å®é™…åœºæ™¯åšå‡ºé€‰æ‹©ï¼Œä¸‹è¡¨æ€»ç»“äº†ä¸‰ç§æ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ€§èƒ½&lt;/th&gt;
&lt;th&gt;ä¸€è‡´æ€§&lt;/th&gt;
&lt;th&gt;å®ç°å¤æ‚åº¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RedisåŸå­æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡é€»è¾‘ç®€å•ï¼Œä»…éœ€æ‰£å‡åº“å­˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;ç®€å•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Luaè„šæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦åŸå­æ€§æ‰§è¡Œâ€œåˆ¤æ–­+æ‰£å‡â€ç­‰ç»„åˆæ“ä½œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;ä¸­ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡æµç¨‹å¤æ‚ï¼Œæ¶‰åŠå¤šä¸ªæ•°æ®åº“æˆ–æœåŠ¡æ›´æ–°&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼ˆä¸²è¡ŒåŒ–ï¼‰&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºæ ‡å‡†çš„ç§’æ€ã€æŠ¢è´­åœºæ™¯ï¼Œ&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© Lua è„šæœ¬æ–¹æ¡ˆ&lt;/strong&gt;ï¼Œå®ƒåœ¨æ€§èƒ½å’Œæ•°æ®ä¸€è‡´æ€§ä¹‹é—´å–å¾—äº†æœ€ä½³å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸šåŠ¡é€»è¾‘ä»…ä»…æ˜¯æ‰£å‡åº“å­˜ï¼Œ&lt;strong&gt;Redis åŸå­æ“ä½œ&lt;/strong&gt;æ˜¯æœ€è½»é‡ã€æœ€å¿«çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰åœ¨ä¸šåŠ¡é€»è¾‘æå…¶å¤æ‚ï¼Œéœ€è¦ä¿è¯æ•´ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®æˆ˜æ³¨æ„äº‹é¡¹"&gt;âš ï¸ å®æˆ˜æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;æ— è®ºé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œä»¥ä¸‹å‡ ç‚¹éƒ½éœ€è¦ç‰¹åˆ«å…³æ³¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åº“å­˜åˆå§‹åŒ–ä¸åŒæ­¥&lt;/strong&gt;ï¼šæ´»åŠ¨å¼€å§‹å‰ï¼Œéœ€è¦å‡†ç¡®åœ°å°†åº“å­˜æ•°é‡åˆå§‹åŒ–åˆ° Redis ä¸­ã€‚åŒæ—¶ï¼Œè¦è€ƒè™‘å¦‚ä½•ä¸åº•å±‚æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œä¾‹å¦‚é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥æ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†å¤±è´¥ä¸å›æ»š&lt;/strong&gt;ï¼šä»»ä½•æ“ä½œéƒ½å¯èƒ½å¤±è´¥ã€‚å¦‚æœæ‰£å‡ Redis åº“å­˜æˆåŠŸåï¼Œåç»­ä¸‹å•åˆ°æ•°æ®åº“å¤±è´¥ï¼Œéœ€è¦æœ‰è¡¥å¿æœºåˆ¶ï¼ˆå¦‚å»¶æ—¶ä»»åŠ¡ï¼‰å°† Redis åº“å­˜åŠ å›å»ï¼Œé˜²æ­¢å°‘å–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æµä¸é™çº§&lt;/strong&gt;ï¼šåœ¨å…¥å£å¤„è®¾ç½®é™æµï¼ˆå¦‚ä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰ï¼Œé˜²æ­¢è¿œè¶…åº“å­˜æ•°é‡çš„è¯·æ±‚ç›´æ¥å†²å‡»ç³»ç»Ÿã€‚å¹¶å‡†å¤‡å¥½é™çº§æ–¹æ¡ˆï¼Œåœ¨ Redis ä¸å¯ç”¨æ—¶èƒ½å¤Ÿä¿æŠ¤æ ¸å¿ƒä¸šåŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£ç­”èƒ½å¸®åŠ©ä½ ç†è§£å’Œé€‰æ‹©é€‚åˆçš„ Redis é˜²è¶…å–æ–¹æ¡ˆã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨æ›´å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="é—®é¢˜"&gt;é—®é¢˜
&lt;/h2&gt;&lt;p&gt;Redis æ˜¯è§£å†³é«˜å¹¶å‘â€œè¶…å–â€é—®é¢˜çš„åˆ©å™¨ï¼Œä½†å®ƒå¹¶éé“¶å¼¹ã€‚åœ¨äº«å—å…¶é«˜æ€§èƒ½çš„åŒæ—¶ï¼Œä¹Ÿéœ€è¦è­¦æƒ•ä¸€äº›æ½œåœ¨çš„æŒ‘æˆ˜å’Œé£é™©ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å¯èƒ½é‡åˆ°çš„ä¸»è¦é—®é¢˜åŠå…¶æ ¸å¿ƒåŸå› ï¼Œå¸®ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é—®é¢˜ç±»åˆ«&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒé—®é¢˜&lt;/th&gt;
&lt;th&gt;æ½œåœ¨åæœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”„ æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redisä¸æ•°æ®åº“ä¹‹é—´çš„æ•°æ®å¯èƒ½æš‚æ—¶ä¸ä¸€è‡´ã€‚&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ä½“éªŒå—æŸï¼ˆå¦‚çœ‹åˆ°è¶…å”®ï¼‰ï¼Œæ•°æ®ç»Ÿè®¡é”™è¯¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âš¡ æ€§èƒ½ä¸èµ„æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çƒ­Keyï¼ˆå¤§é‡è¯·æ±‚é›†ä¸­è®¿é—®ä¸€ä¸ªKeyï¼‰ã€å¤§Keyï¼ˆå­˜å‚¨çš„Valueè¿‡å¤§ï¼‰ã€è¿æ¥æ•°ç“¶é¢ˆã€‚&lt;/td&gt;
&lt;td&gt;RedisæœåŠ¡å™¨CPUé£™å‡ã€ç½‘ç»œå¸¦å®½å æ»¡ã€å“åº”å˜æ…¢ï¼Œç”šè‡³æœåŠ¡ä¸å¯ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”’ é”çš„å¤æ‚æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ†å¸ƒå¼é”çš„è¯¯ç”¨ï¼ˆå¦‚æœªè®¾ç½®è¶…æ—¶ã€è¯¯é‡Šæ”¾ä»–äººé”ï¼‰ã€é”ç«äº‰æ¿€çƒˆã€‚&lt;/td&gt;
&lt;td&gt;æ­»é”ã€é”å¤±æ•ˆã€ç³»ç»Ÿååé‡ä¸‹é™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“‰ ç³»ç»Ÿå¯ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;RedisæœåŠ¡æœ¬èº«å®•æœºæˆ–ç½‘ç»œåˆ†åŒºã€‚&lt;/td&gt;
&lt;td&gt;æ•´ä¸ªç§’æ€åŠŸèƒ½ä¸å¯ç”¨ï¼Œä¸šåŠ¡ä¸­æ–­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ›¡ï¸ å®‰å…¨ä¸æ²»ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¶æ„è¯·æ±‚ï¼ˆå¦‚è„šæœ¬æ”»å‡»ï¼‰ç»•è¿‡å‰ç«¯æ‹¦æˆªç›´æ¥å†²å‡»Redisã€‚&lt;/td&gt;
&lt;td&gt;èµ„æºè¢«è€—å°½ï¼Œæ­£å¸¸ç”¨æˆ·æ— æ³•è®¿é—®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ•°æ®ä¸€è‡´æ€§é—®é¢˜"&gt;ğŸ”„ æ•°æ®ä¸€è‡´æ€§é—®é¢˜
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€ç»å…¸çš„é—®é¢˜ã€‚ä¸ºäº†æå‡æ€§èƒ½ï¼Œé€šå¸¸é‡‡ç”¨â€œ&lt;strong&gt;Redisé¢„æ‰£åº“å­˜ï¼Œå¼‚æ­¥å†™å…¥æ•°æ®åº“&lt;/strong&gt;â€çš„ç­–ç•¥ã€‚ä½†è¿™ä¼šå¸¦æ¥ä¸€è‡´æ€§çš„æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šç”¨æˆ·åœ¨ä¸‹å•æ—¶ï¼ŒRedisåº“å­˜æ‰£å‡æˆåŠŸï¼Œä½†å°±åœ¨æ­¤æ—¶ï¼Œç³»ç»Ÿå°šæœªå°†è®¢å•æ•°æ®åŒæ­¥åˆ°MySQLæ•°æ®åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å½±å“&lt;/strong&gt;ï¼šåœ¨åŒæ­¥å®Œæˆå‰ï¼Œåå°ç®¡ç†ç³»ç»ŸæŸ¥è¯¢æ•°æ®åº“ä¼šæ˜¾ç¤ºåº“å­˜â€œæœªå‡å°‘â€ï¼Œè€Œå®é™…åº“å­˜å·²åœ¨Redisä¸­æ‰£å‡ã€‚å¦‚æœæ­¤æ—¶æœ‰å…¶ä»–ç®¡ç†æ“ä½œï¼ˆå¦‚å¼ºåˆ¶ä¸‹æ¶å•†å“ï¼‰ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®é”™ä¹±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆæ€è·¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼šæ¥å—çŸ­æš‚çš„å»¶è¿Ÿï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æˆ–å®šæ—¶ä»»åŠ¡ï¼Œç¡®ä¿æ•°æ®æœ€ç»ˆåŒæ­¥ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å¼ºç›‘æ§&lt;/strong&gt;ï¼šå¯¹åŒæ­¥å»¶è¿Ÿå’Œå¤±è´¥è¿›è¡Œç›‘æ§å’Œå‘Šè­¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€§èƒ½ä¸èµ„æºç“¶é¢ˆ"&gt;âš¡ æ€§èƒ½ä¸èµ„æºç“¶é¢ˆ
&lt;/h3&gt;&lt;p&gt;Redisè™½å¿«ï¼Œä½†èµ„æºæ˜¯æœ‰é™çš„ï¼Œè®¾è®¡ä¸å½“å®¹æ˜“å¼•å‘æ€§èƒ½ç“¶é¢ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çƒ­Keyé—®é¢˜&lt;/strong&gt;ï¼šå½“æŸä¸€ä»¶çƒ­é—¨å•†å“ï¼ˆå¦‚iPhoneç§’æ€ï¼‰çš„åº“å­˜æˆä¸ºâ€œçƒ­Keyâ€æ—¶ï¼Œæ‰€æœ‰å¹¶å‘è¯·æ±‚éƒ½æ¥è®¿é—®Redisä¸Šçš„è¿™ä¸€ä¸ªKeyï¼Œä¼šå¯¼è‡´å•ä¸ªRediså®ä¾‹å‹åŠ›å·¨å¤§ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šé‡‡ç”¨&lt;strong&gt;åº“å­˜åˆ†ç‰‡&lt;/strong&gt;ã€‚å°†ä¸€ä»¶å•†å“çš„æ€»åº“å­˜ï¼ˆå¦‚1000ä¸ªï¼‰æ‹†åˆ†åˆ°å¤šä¸ªKeyä¸Šï¼ˆå¦‚ &lt;code&gt;stock:product_1001:shard1&lt;/code&gt;ã€&lt;code&gt;stock:product_1001:shard2&lt;/code&gt;ï¼‰ï¼Œå°†å¹¶å‘è¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªRedisèŠ‚ç‚¹ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§Keyé—®é¢˜&lt;/strong&gt;ï¼šå¦‚æœä½¿ç”¨Listç­‰ç»“æ„å­˜å‚¨å¤§é‡æ•°æ®ï¼ˆå¦‚å°†10000ä¸ªä»¤ç‰Œå­˜å…¥ä¸€ä¸ªListï¼‰ï¼Œæ“ä½œè¿™ä¸ªKeyä¼šéå¸¸è€—æ—¶ï¼Œå¯èƒ½é˜»å¡å…¶ä»–è¯·æ±‚ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä¼˜åŒ–æ•°æ®ç»“æ„ï¼Œæˆ–è€…å°†å¤§Keyæ‹†åˆ†ä¸ºå¤šä¸ªå°Keyã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æ•°è€—å°½&lt;/strong&gt;ï¼šé«˜å¹¶å‘ä¸‹ï¼Œåº”ç”¨æœåŠ¡å™¨å¯èƒ½ä¼šåˆ›å»ºå¤§é‡åˆ°Redisçš„è¿æ¥ï¼Œè¶…è¿‡Redisæœ€å¤§è¿æ¥æ•°é™åˆ¶ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨è¿æ¥æ± ç®¡ç†è¿æ¥ï¼Œå¹¶åˆç†è®¾ç½®è¿æ¥æ± å‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åˆ†å¸ƒå¼é”çš„é™·é˜±"&gt;ğŸ”’ åˆ†å¸ƒå¼é”çš„é™·é˜±
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨Redisåˆ†å¸ƒå¼é”æ¥ä¿è¯â€œä¸€äººä¸€å•â€ç­‰åŸå­æ€§æ“ä½œæ—¶ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œä¼šå¼•å…¥æ–°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯åŠ é”åï¼Œå¦‚æœå› ä¸ºå´©æºƒæˆ–é•¿æ—¶é—´GCï¼ˆåƒåœ¾å›æ”¶ï¼‰è€Œæ— æ³•ä¸»åŠ¨é‡Šæ”¾é”ï¼Œå¹¶ä¸”é”åˆæ²¡æœ‰è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œé‚£ä¹ˆé”å°†æ°¸è¿œæ— æ³•é‡Šæ”¾ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼š&lt;strong&gt;å¿…é¡»ä¸ºé”è®¾ç½®ä¸€ä¸ªåˆç†çš„è¿‡æœŸæ—¶é—´&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯¯é‡Šæ”¾ä»–äººé”&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯AåŠ é”åï¼Œå› æ“ä½œè€—æ—¶è¿‡é•¿ï¼Œé”è¶…æ—¶è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚æ­¤æ—¶å®¢æˆ·ç«¯Bè·å¾—äº†é”ï¼Œä½†éšåAå®Œæˆäº†æ“ä½œï¼Œåˆå»é‡Šæ”¾é”ï¼Œç»“æœé‡Šæ”¾äº†Bçš„é”ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šé”çš„å€¼åº”è®¾ç½®ä¸ºå…¨å±€å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚UUID+çº¿ç¨‹IDï¼‰ï¼Œé‡Šæ”¾é”æ—¶æ ¡éªŒè¯¥æ ‡è¯†ï¼Œç¡®ä¿åªèƒ½é‡Šæ”¾è‡ªå·±åŠ çš„é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”ç»­æœŸéš¾é¢˜&lt;/strong&gt;ï¼šå¦‚æœæ“ä½œæ—¶é—´ä¸ç¡®å®šï¼Œå¾ˆéš¾è®¾ç½®ä¸€ä¸ªå®Œç¾çš„è¶…æ—¶æ—¶é—´ã€‚è®¾ç½®è¿‡çŸ­ï¼Œå®¹æ˜“åœ¨æ“ä½œå®Œæˆå‰é”å°±è¶…æ—¶ï¼›è®¾ç½®è¿‡é•¿ï¼Œä¸‡ä¸€å®¢æˆ·ç«¯å®•æœºï¼Œé”éœ€è¦æ›´é•¿æ—¶é—´æ‰èƒ½è‡ªåŠ¨é‡Šæ”¾ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ç±»ä¼¼Redissonåº“ä¸­çš„ &lt;strong&gt;â€œçœ‹é—¨ç‹—â€ï¼ˆWatchdogï¼‰&lt;/strong&gt; æœºåˆ¶ï¼Œåœ¨åå°çº¿ç¨‹ä¸­å®šæœŸå»¶é•¿é”çš„æŒæœ‰æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸ç³»ç»Ÿæ€§è§£å†³æ€è·¯"&gt;ğŸ’ æ€»ç»“ä¸ç³»ç»Ÿæ€§è§£å†³æ€è·¯
&lt;/h3&gt;&lt;p&gt;è®¤è¯†åˆ°è¿™äº›é—®é¢˜åï¼Œä¸€ä¸ªå¥å£®çš„Redisé˜²è¶…å–æ–¹æ¡ˆåº”è¯¥æ˜¯å¤šç»´åº¦çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯æ•°æ®æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼šé‡‡ç”¨å¯é çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆå¦‚RocketMQã€Kafkaï¼‰æ¥å¼‚æ­¥åŒæ­¥æ•°æ®ï¼Œå¹¶é…å¤‡è¡¥å¿å’Œæ ¸å¯¹æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå‡ç³»ç»Ÿæ€§èƒ½ä¸å¯ç”¨æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;Redis é›†ç¾¤&lt;/strong&gt; å®ç°é«˜å¯ç”¨å’Œå®¹é‡æ‰©å±•ã€‚&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹çƒ­Keyï¼Œé‡‡ç”¨ &lt;strong&gt;åº“å­˜åˆ†ç‰‡&lt;/strong&gt; æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å‰ç«¯æ¥å…¥å±‚ï¼ˆå¦‚Nginxï¼‰å’Œç½‘å…³å±‚ï¼ˆå¦‚Spring Cloud Gatewayï¼‰åšå¥½&lt;strong&gt;é™æµå’Œç†”æ–­&lt;/strong&gt;ï¼Œé˜²æ­¢æµé‡æ‰“å®Redisã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–é”æœºåˆ¶&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨&lt;strong&gt;Luaè„šæœ¬&lt;/strong&gt;å¤„ç†ç®€å•çš„åº“å­˜æ‰£å‡ã€‚å¯¹äºå¤æ‚ä¸šåŠ¡ï¼Œä½¿ç”¨æˆç†Ÿçš„åˆ†å¸ƒå¼é”åº“ï¼ˆå¦‚Redissonï¼‰ï¼Œå¹¶ä»”ç»†å¤„ç†é”çš„è¶…æ—¶å’Œç»­æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®Œå–„ç›‘æ§ä¸æ²»ç†&lt;/strong&gt;ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼Œå¯¹Redisçš„CPUã€å†…å­˜ã€è¿æ¥æ•°ã€æ…¢æŸ¥è¯¢ä»¥åŠå…³é”®ä¸šåŠ¡Keyè¿›è¡Œå®æ—¶ç›‘æ§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£ç­”èƒ½å¸®åŠ©ä½ æ›´å…¨é¢åœ°ç†è§£Redisåœ¨è§£å†³è¶…å–é—®é¢˜æ—¶çš„â€œèƒ½â€ä¸â€œä¸èƒ½â€ï¼Œä»è€Œè®¾è®¡å‡ºæ›´ç¨³å¥çš„ç³»ç»Ÿã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="mysql-è¶…å–"&gt;Mysql è¶…å–
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­è§£å†³é«˜å¹¶å‘åœºæ™¯ä¸‹çš„åº“å­˜è¶…å–é—®é¢˜ï¼Œæ ¸å¿ƒåœ¨äº&lt;strong&gt;ç¡®ä¿åº“å­˜æŸ¥éªŒå’Œæ‰£å‡è¿™ä¸¤ä¸ªæ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ï¼Œé¿å…å¤šä¸ªè¯·æ±‚åŒæ—¶è¯»åˆ°â€œåº“å­˜å……è¶³â€çš„çŠ¶æ€ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸‰ç§ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è§£å†³æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€è·¯&lt;/th&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‚²è§‚é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€œå…ˆé”å†æ”¹â€ï¼Œè®¤ä¸ºå†²çªå¾ˆå¯èƒ½å‘ç”Ÿï¼ŒæŸ¥è¯¢æ—¶ç›´æ¥é”å®šæ•°æ®ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;å¯¹æŸ¥è¯¢è¡ŒåŠ æ’ä»–é”ã€‚&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œä¿è¯å¼ºä¸€è‡´æ€§ã€‚&lt;/td&gt;
&lt;td&gt;å¹¶å‘æ€§èƒ½è¾ƒä½ï¼Œå¤§é‡è¯·æ±‚ä¼šé˜»å¡ç­‰å¾…é”ã€‚&lt;/td&gt;
&lt;td&gt;å†™æ“ä½œæåº¦é¢‘ç¹ï¼Œæ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œä¸”å¯æ¥å—ä¸€å®šæ€§èƒ½æŸè€—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¹è§‚é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€œå…ˆæ”¹åéªŒâ€ï¼Œè®¤ä¸ºå†²çªä¸å¸¸å‘ç”Ÿï¼Œæ›´æ–°æ—¶æ ¡éªŒç‰ˆæœ¬ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ºè¡¨å¢åŠ  &lt;code&gt;version&lt;/code&gt;å­—æ®µï¼Œæ›´æ–°æ—¶å¸¦æ¡ä»¶æ ¡éªŒã€‚&lt;/td&gt;
&lt;td&gt;å¹¶å‘æ€§èƒ½é«˜ï¼Œæ— é”ç­‰å¾…ã€‚&lt;/td&gt;
&lt;td&gt;å¤±è´¥éœ€é‡è¯•ï¼Œé€»è¾‘ç¨å¤æ‚ã€‚&lt;/td&gt;
&lt;td&gt;è¯»å¤šå†™å°‘ï¼Œå¹¶å‘å†²çªä¸æ¿€çƒˆçš„åœºæ™¯ï¼Œæ˜¯äº’è”ç½‘åº”ç”¨é¦–é€‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ— é”æ–¹æ¡ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€œåŸå­æ›´æ–°â€ï¼Œå°†åˆ¤æ–­å’Œæ‰£å‡åˆå¹¶åœ¨ä¸€æ¡SQLä¸­ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE ... SET stock = stock - 1 WHERE id = ? AND stock &amp;gt; 0&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;å®ç°æœ€ç®€æ´ï¼Œæ€§èƒ½æé«˜ã€‚&lt;/td&gt;
&lt;td&gt;æ— æ³•æ„ŸçŸ¥æ‰£å‡æ˜¯å¦æˆåŠŸï¼Œç¼ºä¹ä¸šåŠ¡é€»è¾‘çµæ´»æ€§ã€‚&lt;/td&gt;
&lt;td&gt;ç®€å•çš„æ‰£å‡æ“ä½œï¼Œæ— éœ€å¤æ‚ä¸šåŠ¡é€»è¾‘æ ¡éªŒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ‚²è§‚é”è¯¦è§£"&gt;ğŸ”’ æ‚²è§‚é”è¯¦è§£
&lt;/h3&gt;&lt;p&gt;æ‚²è§‚é”çš„æ€è·¯æ˜¯ï¼Œåœ¨äº‹åŠ¡ä¸­æŸ¥è¯¢å•†å“åº“å­˜æ—¶ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;å¯¹è¿™æ¡è®°å½•åŠ ä¸Šæ’ä»–é”ï¼ˆXé”ï¼‰ã€‚è¿™æ ·ï¼Œåœ¨å½“å‰äº‹åŠ¡æäº¤æˆ–å›æ»šä¹‹å‰ï¼Œå…¶ä»–ä»»ä½•äº‹åŠ¡éƒ½æ— æ³•å†è¯»å–æˆ–ä¿®æ”¹è¿™æ¡è¢«é”å®šçš„è®°å½•ï¼Œä»è€Œä¿è¯äº†æ“ä½œçš„ä¸²è¡ŒåŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒä»£ç ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;START TRANSACTION;
-- å…³é”®ï¼šä½¿ç”¨ FOR UPDATE é”å®šç›®æ ‡è¡Œ
SELECT stock FROM products WHERE id = 1 FOR UPDATE;
-- åœ¨åº”ç”¨å±‚åˆ¤æ–­ stock &amp;gt; 0
UPDATE products SET stock = stock - 1 WHERE id = 1;
COMMIT;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¡å¿…åœ¨äº‹åŠ¡ä¸­ä½¿ç”¨&lt;/strong&gt;ï¼š&lt;code&gt;FOR UPDATE&lt;/code&gt;é”åªæœ‰åœ¨äº‹åŠ¡ä¸­æ‰æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶äº‹åŠ¡ç²’åº¦&lt;/strong&gt;ï¼šé•¿æ—¶é—´æŒæœ‰é”ä¼šä¸¥é‡å½±å“å¹¶å‘ï¼Œå› æ­¤ä¸šåŠ¡é€»è¾‘åº”å°½å¯èƒ½å¿«ï¼Œå®Œæˆåç«‹å³æäº¤äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•&lt;/strong&gt;ï¼š&lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ä¸­çš„åˆ—ï¼ˆé€šå¸¸æ˜¯ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•ï¼‰å¿…é¡»èƒ½æœ‰æ•ˆå‘½ä¸­ç´¢å¼•ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´é”å‡çº§ä¸ºè¡¨é”ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¹è§‚é”è¯¦è§£"&gt;ğŸ”„ ä¹è§‚é”è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”ä¸ç›´æ¥åŠ é”ï¼Œè€Œæ˜¯é€šè¿‡å¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·å­—æ®µï¼ˆæˆ–ä½¿ç”¨åº“å­˜æœ¬èº«ä½œä¸ºç‰ˆæœ¬æ ‡è¯†ï¼‰ï¼Œåœ¨æ›´æ–°æ—¶æ ¡éªŒæ•°æ®æ˜¯å¦è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹è¿‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒä»£ç ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- 1. æŸ¥è¯¢æ—¶è·å–å½“å‰ç‰ˆæœ¬å·
SELECT stock, version FROM products WHERE id = 1;
-- 2. æ›´æ–°æ—¶ï¼Œå°†ç‰ˆæœ¬å·ä½œä¸ºæ¡ä»¶ã€‚å¦‚æœç‰ˆæœ¬å·åŒ¹é…ï¼Œåˆ™æ›´æ–°æˆåŠŸï¼ŒåŒæ—¶ç‰ˆæœ¬å·+1
UPDATE products
SET stock = stock - 1, version = version + 1
WHERE id = 1 AND version = @old_version; -- @old_version æ˜¯ç¬¬ä¸€æ­¥æŸ¥åˆ°çš„å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¦‚ä½•åˆ¤æ–­ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œæ›´æ–°åï¼Œæ£€æŸ¥æ•°æ®åº“è¿”å›çš„&lt;strong&gt;å—å½±å“è¡Œæ•°&lt;/strong&gt;ã€‚å¦‚æœä¸º 1ï¼Œè¡¨ç¤ºæ›´æ–°æˆåŠŸï¼›å¦‚æœä¸º 0ï¼Œåˆ™è¡¨ç¤ºåœ¨æŸ¥è¯¢å’Œæ›´æ–°ä¹‹é—´ï¼Œæ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œå½“å‰æ“ä½œå¤±è´¥ï¼Œéœ€è¦è¿›è¡Œé‡è¯•æˆ–è¿”å›å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;ï¼šä¹è§‚é”é€šå¸¸éœ€è¦é…åˆé‡è¯•æœºåˆ¶ã€‚åœ¨åº”ç”¨å±‚ä»£ç ä¸­ï¼Œå¦‚æœæ£€æµ‹åˆ°æ›´æ–°å¤±è´¥ï¼Œå¯ä»¥è¿›è¡Œæœ‰é™æ¬¡æ•°çš„é‡è¯•ï¼ˆä¾‹å¦‚3æ¬¡ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-æ— é”æ–¹æ¡ˆè¯¦è§£"&gt;âš¡ æ— é”æ–¹æ¡ˆè¯¦è§£
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥é«˜æ•ˆçš„æ–¹æ³•ï¼Œå®ƒåˆ©ç”¨ MySQL &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥æœ¬èº«çš„åŸå­æ€§ï¼Œå°†åº“å­˜åˆ¤æ–­å’Œæ‰£å‡åˆå¹¶ä¸ºä¸€æ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒä»£ç ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE products SET stock = stock - 1 WHERE id = 1 AND stock &amp;gt; 0;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœåˆ¤æ–­&lt;/strong&gt;ï¼šåŒæ ·é€šè¿‡åˆ¤æ–­&lt;strong&gt;å—å½±å“è¡Œæ•°&lt;/strong&gt;æ¥ç¡®è®¤æ“ä½œæ˜¯å¦æˆåŠŸã€‚å¦‚æœä¸º1ï¼Œè¡¨ç¤ºæ‰£å‡æˆåŠŸï¼›å¦‚æœä¸º0ï¼Œåˆ™è¡¨ç¤ºåº“å­˜å·²ä¸è¶³ï¼ˆstock &amp;lt;= 0ï¼‰ã€‚è¿™ç§æ–¹æ³•å®Œå…¨é¿å…äº†åœ¨åº”ç”¨å±‚è¿›è¡Œåº“å­˜åˆ¤æ–­å¯èƒ½äº§ç”Ÿçš„ç«æ€æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id="-å®æˆ˜å»ºè®®ä¸é€‰å‹"&gt;ğŸ’¡ å®æˆ˜å»ºè®®ä¸é€‰å‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¦–é€‰æ— é”æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¦‚æœä½ çš„ä¸šåŠ¡é€»è¾‘éå¸¸ç®€å•ï¼Œä»…ä»…æ˜¯æ‰£å‡åº“å­˜ï¼Œ&lt;strong&gt;å¼ºçƒˆæ¨èä½¿ç”¨æ— é”æ–¹æ¡ˆ&lt;/strong&gt;ã€‚å®ƒæ€§èƒ½æœ€é«˜ï¼Œå®ç°æœ€ç®€å•ï¼Œèƒ½æœ‰æ•ˆé¿å…è¶…å–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚ä¸šåŠ¡ç”¨ä¹è§‚é”&lt;/strong&gt;ï¼šå¦‚æœæ‰£å‡åº“å­˜å‰åè¿˜éœ€è¦è¿›è¡Œå¤æ‚çš„ä¸šåŠ¡é€»è¾‘æ ¡éªŒï¼ˆå¦‚æ ¡éªŒç”¨æˆ·èµ„æ ¼ã€è®¡ç®—ä¼˜æƒ ç­‰ï¼‰ï¼Œå»ºè®®ä½¿ç”¨&lt;strong&gt;ä¹è§‚é”&lt;/strong&gt;ã€‚å®ƒåœ¨ä¿è¯å¹¶å‘æ€§èƒ½çš„åŒæ—¶ï¼Œæä¾›äº†è¶³å¤Ÿçš„çµæ´»æ€§ã€‚è®°å¾—å®ç°é‡è¯•æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨æ‚²è§‚é”&lt;/strong&gt;ï¼šé™¤éä¸šåŠ¡å¯¹æ•°æ®å¼ºä¸€è‡´æ€§æœ‰æè‡´è¦æ±‚ï¼Œä¸”èƒ½æ¥å—æ€§èƒ½æŸè€—ï¼Œå¦åˆ™åœ¨ç§’æ€ç­‰é«˜å¹¶å‘åœºæ™¯ä¸‹åº”é¿å…ä½¿ç”¨æ‚²è§‚é”ï¼Œå› ä¸ºå®ƒå®¹æ˜“æˆä¸ºç³»ç»Ÿç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯ç´¢å¼•æœ‰æ•ˆ&lt;/strong&gt;ï¼šæ— è®ºé‡‡ç”¨å“ªç§æ–¹æ¡ˆï¼Œç¡®ä¿åº“å­˜æŸ¥è¯¢å’Œæ›´æ–°çš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶èƒ½å¤Ÿå‘½ä¸­ç´¢å¼•ï¼Œè¿™æ˜¯é«˜æ€§èƒ½çš„åŸºçŸ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘ç»“åˆ Redis&lt;/strong&gt;ï¼šåœ¨æç«¯é«˜å¹¶å‘ï¼ˆå¦‚ç§’æ€ï¼‰åœºæ™¯ä¸‹ï¼Œå¯ä»¥ç»“åˆ Redis åšåº“å­˜é¢„æ‰£å‡ï¼Œæœ€ç»ˆå†å°†æ•°æ®åŒæ­¥åˆ° MySQLï¼Œä»¥åˆ†æ‹…æ•°æ®åº“çš„ç¬æ—¶å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æ€»ç»“èƒ½å¸®åŠ©ä½ æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯ï¼Œé€‰æ‹©æœ€åˆé€‚çš„ MySQL è¶…å–è§£å†³æ–¹æ¡ˆï¼å¦‚æœä½ å¯¹æŸä¸ªæ–¹æ¡ˆçš„ä»£ç å®ç°æœ‰æ›´å…·ä½“çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="qps-10w---20w-mysql"&gt;QPS 10w - 20w Mysql
&lt;/h2&gt;&lt;p&gt;é¢å¯¹10ä¸‡åˆ°20ä¸‡QPSçš„MySQLå†™æ“ä½œå‹åŠ›ï¼Œå•æœºMySQLå·²æ— æ³•èƒœä»»ï¼Œéœ€è¦ä»&lt;strong&gt;åˆ†å¸ƒå¼æ¶æ„&lt;/strong&gt;ã€&lt;strong&gt;å­˜å‚¨ä¼˜åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;ç³»ç»ŸååŒ&lt;/strong&gt;ä¸‰ä¸ªå±‚é¢è¿›è¡Œç³»ç»Ÿæ€§è®¾è®¡ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒçš„è§£å†³æ–¹æ¡ˆï¼Œå¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä¼˜åŒ–ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæŠ€æœ¯&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç›®æ ‡ä¸æ•ˆæœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ—ï¸ åˆ†å¸ƒå¼æ¶æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»&lt;/td&gt;
&lt;td&gt;å°†å†™å‹åŠ›&lt;strong&gt;æ°´å¹³æ‹†åˆ†&lt;/strong&gt;åˆ°å¤šä¸ªæ•°æ®åº“èŠ‚ç‚¹ï¼Œä»æ ¹æœ¬ä¸Šæå‡ç³»ç»Ÿæ•´ä½“å†™å…¥å®¹é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ’¾ å­˜å‚¨ä¸é…ç½®ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‚æ•°è°ƒä¼˜ã€æ‰¹é‡æ“ä½œã€å¼‚æ­¥å†™å…¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§åŒ–å•ä¸ªMySQLå®ä¾‹çš„å†™å…¥æ•ˆç‡&lt;/strong&gt;ï¼Œé™ä½å•æ¬¡å†™å…¥å¼€é”€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¤ ç³»ç»ŸååŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼•å…¥ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‰Šå³°å¡«è°·&lt;/strong&gt;ï¼Œé¿å…æµé‡ç›´æ¥å†²å‡»æ•°æ®åº“ï¼Œä¿æŠ¤æ•°æ®åº“ç¨³å®šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†æ¢è®¨æ¯ä¸ªå±‚é¢çš„å…·ä½“å®æ–½ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h3 id="-åˆ†å¸ƒå¼æ¶æ„æ”¹é€ "&gt;ğŸ—ï¸ åˆ†å¸ƒå¼æ¶æ„æ”¹é€ 
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯åº”å¯¹è¶…é«˜å¹¶å‘å†™çš„&lt;strong&gt;æ ¹æœ¬æ€§æªæ–½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åº“åˆ†è¡¨ (Sharding)&lt;/strong&gt;ï¼šè¿™æ˜¯æ ¸å¿ƒä¸­çš„æ ¸å¿ƒã€‚å°†ä¸€å¼ å¤§è¡¨çš„æ•°æ®æŒ‰ç…§æŸç§è§„åˆ™ï¼ˆå¦‚ç”¨æˆ·IDå“ˆå¸Œã€æ—¶é—´èŒƒå›´ï¼‰æ°´å¹³æ‹†åˆ†åˆ°å¤šä¸ªæ•°æ®åº“ï¼ˆåˆ†åº“ï¼‰çš„å¤šä¸ªè¡¨ï¼ˆåˆ†è¡¨ï¼‰ä¸­ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®è·µè¦ç‚¹&lt;/strong&gt;ï¼šä½¿ç”¨åˆ†ç‰‡ä¸­é—´ä»¶ï¼ˆå¦‚ &lt;strong&gt;ShardingSphere&lt;/strong&gt;ã€Vitessï¼‰æ¥ç®¡ç†æ•°æ®è·¯ç”±å’Œåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¯¹åº”ç”¨å±‚é€æ˜ã€‚æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©åˆ†ç‰‡é”®ï¼Œç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…çƒ­ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»å†™åˆ†ç¦»&lt;/strong&gt;ï¼šå³ä¾¿è¿›è¡Œäº†åˆ†åº“ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„ä¸»åº“ä¾ç„¶å¯èƒ½é¢ä¸´å†™å…¥å‹åŠ›ã€‚å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›ä¸€æ­¥éƒ¨ç½²&lt;strong&gt;ä¸€ä¸»å¤šä»&lt;/strong&gt;æ¶æ„ï¼Œå†™æ“ä½œæŒ‡å‘ä¸»åº“ï¼Œè¯»æ“ä½œåˆ†æµåˆ°å¤šä¸ªä»åº“ã€‚åœ¨æé«˜å†™åœºæ™¯ä¸‹ï¼Œè¯»å†™åˆ†ç¦»ä¸»è¦ä»·å€¼åœ¨äºä¿è¯è¯»æ€§èƒ½ï¼Œé—´æ¥ä¸ºå†™æ“ä½œç•™å‡ºæ›´å¤šèµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-mysqlå­˜å‚¨ä¸é…ç½®æ·±åº¦ä¼˜åŒ–"&gt;ğŸ’¾ MySQLå­˜å‚¨ä¸é…ç½®æ·±åº¦ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;åœ¨æ¶æ„æ‹†åˆ†çš„åŒæ—¶ï¼Œå¿…é¡»å‹æ¦¨å‡ºæ¯ä¸ªMySQLå®ä¾‹çš„æé™æ€§èƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç»†åŒ–å‚æ•°è°ƒä¼˜&lt;/strong&gt;ï¼šé’ˆå¯¹é«˜å¹¶å‘å†™å…¥åœºæ™¯ï¼Œè°ƒæ•´ä»¥ä¸‹å…³é”®å‚æ•°ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;innodb_buffer_pool_size&lt;/code&gt;ï¼šè®¾ç½®ä¸ºå¯ç”¨ç‰©ç†å†…å­˜çš„70-80%ï¼Œä¿è¯çƒ­ç‚¹æ•°æ®å’Œç´¢å¼•å¸¸é©»å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;innodb_log_file_size&lt;/code&gt;ï¼šå¢å¤§Redoæ—¥å¿—æ–‡ä»¶å¤§å°ï¼ˆå¦‚2GBæˆ–æ›´å¤§ï¼‰ï¼Œå‡å°‘æ—¥å¿—åˆ·ç›˜çš„é¢‘ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;ï¼šæƒè¡¡æ•°æ®å®‰å…¨æ€§ä¸æ€§èƒ½ã€‚è®¾ä¸º &lt;strong&gt;2&lt;/strong&gt; å¯ä»¥å¤§å¹…æå‡æ€§èƒ½ï¼ˆä»…åœ¨æ•°æ®åº“å´©æºƒæ—¶ä¼šä¸¢å¤±æœ€å¤š1ç§’çš„æ•°æ®ï¼‰ï¼Œä½†éœ€è¯„ä¼°ä¸šåŠ¡é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;innodb_autoinc_lock_mode&lt;/code&gt;ï¼šè®¾ç½®ä¸º2ï¼ˆäº¤é”™é”æ¨¡å¼ï¼‰ï¼Œæå‡å¤šçº¿ç¨‹æ’å…¥æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡‡ç”¨æ‰¹é‡å†™å…¥&lt;/strong&gt;ï¼šåŠ¡å¿…ä½¿ç”¨æ‰¹é‡æ’å…¥ï¼ˆ&lt;code&gt;INSERT INTO ... VALUES (...), (...), ...&lt;/code&gt;ï¼‰æˆ–&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;ï¼Œè€Œéå•æ¡æ’å…¥ã€‚è¿™èƒ½æå¤§å‡å°‘ç½‘ç»œå¾€è¿”å’Œäº‹åŠ¡å¼€é”€ã€‚åœ¨åº”ç”¨å±‚ï¼Œé€šè¿‡è¿æ¥æ± ï¼ˆå¦‚HikariCPï¼‰ç®¡ç†æ•°æ®åº“è¿æ¥ï¼Œå¹¶åˆ©ç”¨å…¶æ‰¹é‡æ“ä½œåŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–è¡¨ç»“æ„ä¸ç´¢å¼•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç®€ç´¢å¼•&lt;/strong&gt;ï¼šæ¯ä¸ªéå¿…è¦çš„äºŒçº§ç´¢å¼•éƒ½ä¼šå¢åŠ å†™æ“ä½œçš„æˆæœ¬ã€‚åªä¿ç•™æŸ¥è¯¢å¿…éœ€çš„ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨è‡ªå¢ä¸»é”®&lt;/strong&gt;ï¼šä½¿ç”¨&lt;code&gt;AUTO_INCREMENT&lt;/code&gt;ä¸»é”®å¯ä»¥å‡å°‘B+æ ‘çš„é¡µåˆ†è£‚ï¼Œæå‡æ’å…¥æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç³»ç»Ÿçº§ååŒä¸ç¼“å†²"&gt;ğŸ¤ ç³»ç»Ÿçº§ååŒä¸ç¼“å†²
&lt;/h3&gt;&lt;p&gt;åœ¨æ•°æ®åº“ä¹‹å‰å»ºç«‹é˜²çº¿ï¼Œé¿å…æµé‡ç›´æ¥ã€ç¬æ—¶å†²å‡»æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ— (MQ) å¼‚æ­¥åŒ–&lt;/strong&gt;ï¼šè¿™æ˜¯å®ç°&lt;strong&gt;å‰Šå³°å¡«è°·&lt;/strong&gt;çš„å…³é”®ã€‚å°†åŒæ­¥å†™æ•°æ®åº“çš„æ“ä½œæ”¹ä¸ºï¼šå…ˆå°†å†™è¯·æ±‚å‘é€åˆ°&lt;strong&gt;Kafka&lt;/strong&gt;æˆ–&lt;strong&gt;RocketMQ&lt;/strong&gt;ç­‰é«˜æ€§èƒ½æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åç”±æ¶ˆè´¹è€…æœåŠ¡ä»¥æ•°æ®åº“èƒ½æ‰¿å—çš„é€Ÿç‡å¼‚æ­¥åœ°ä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œå†™å…¥ã€‚è¿™èƒ½ç¡®ä¿æ•°æ®åº“å§‹ç»ˆåœ¨ç¨³å®šå‹åŠ›ä¸‹å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆç†ä½¿ç”¨ç¼“å­˜ (Redis)&lt;/strong&gt;ï¼šè™½ç„¶å†™æ“ä½œæœ€ç»ˆè¦è½åº“ï¼Œä½†å¯ä»¥é€šè¿‡ç¼“å­˜æ¥é¿å…ä¸€äº›ä¸å¿…è¦çš„å†™æˆ–å‡è½»è¯»å‹åŠ›å¯¹å†™èµ„æºçš„æŒ¤å ã€‚ä¾‹å¦‚ï¼Œåœ¨æ‰£å‡åº“å­˜åœºæ™¯ï¼Œå¯ä»¥&lt;strong&gt;åœ¨Redisä¸­é¢„æ‰£å‡&lt;/strong&gt;ï¼Œç„¶åå†å¼‚æ­¥åŒæ­¥åˆ°æ•°æ®åº“ï¼Œè¿™èƒ½æå¤§é™ä½å¯¹æ•°æ®åº“çš„å®æ—¶å†™å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®æ–½è·¯çº¿å›¾ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ å®æ–½è·¯çº¿å›¾ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;è¦è¾¾åˆ°10ä¸‡-20ä¸‡QPSçš„å†™å…¥èƒ½åŠ›ï¼Œé€šå¸¸éœ€è¦åˆ†æ­¥éª¤å®æ–½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ­¥ï¼šä¼˜åŒ–å•å®ä¾‹&lt;/strong&gt;ã€‚å…ˆé€šè¿‡å‚æ•°è°ƒä¼˜ã€æ‰¹é‡æ“ä½œã€å¼‚æ­¥åŒ–ç­‰æ‰‹æ®µï¼Œå°½å¯èƒ½æå‡å•ä¸ªMySQLå®ä¾‹çš„å†™å…¥æ€§èƒ½ï¼Œè¿™èƒ½ä¸ºåç»­æ¶æ„æ”¹é€ äº‰å–æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ­¥ï¼šå¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å†™&lt;/strong&gt;ã€‚è¿™æ˜¯æ€§ä»·æ¯”æé«˜çš„æ–¹æ¡ˆï¼Œèƒ½æœ‰æ•ˆå¹³æ»‘æµé‡å³°å€¼ï¼Œä¿æŠ¤æ•°æ®åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸‰æ­¥ï¼šå®æ–½åˆ†åº“åˆ†è¡¨&lt;/strong&gt;ã€‚å½“å•å®ä¾‹å’Œå¼‚æ­¥åŒ–éƒ½æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œè¿™æ˜¯å¿…é¡»èµ°çš„é“è·¯ã€‚è¿™ä¸€æ­¥æ”¹é€ å·¥ä½œé‡æœ€å¤§ï¼Œéœ€è¦æå‰åšå¥½æ•°æ®è¿ç§»å’Œå…¼å®¹æ€§æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;é‡è¦æé†’&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å…ˆè¡Œ&lt;/strong&gt;ï¼šå¿…é¡»å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼ˆå¦‚Prometheus + Grafanaï¼‰ï¼ŒæŒç»­å…³æ³¨æ•°æ®åº“çš„QPSã€è¿æ¥æ•°ã€æ…¢æŸ¥è¯¢ã€é”ç­‰å¾…ã€ä¸»ä»å»¶è¿Ÿç­‰å…³é”®æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šå¼•å…¥å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—å’Œç¼“å­˜åï¼Œç³»ç»Ÿæ¶æ„å˜ä¸ºæœ€ç»ˆä¸€è‡´æ€§ã€‚éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯è¯„ä¼°æ˜¯å¦å¯æ¥å—ï¼Œå¹¶è®¾è®¡å¯¹è´¦ã€è¡¥å¿ç­‰æœºåˆ¶æ¥ä¿è¯æ•°æ®çš„æœ€ç»ˆæ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½ä»æ¶æ„åˆ°ç»†èŠ‚çš„æ€»ç»“èƒ½ä¸ºæ‚¨æä¾›æ¸…æ™°çš„ä¼˜åŒ–è·¯å¾„ã€‚å¦‚æœæ‚¨å¯¹æŸä¸ªå…·ä½“æŠ€æœ¯æ–¹æ¡ˆï¼ˆå¦‚åˆ†ç‰‡ç­–ç•¥çš„é€‰æ‹©ï¼‰æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="blockingqueue"&gt;BlockingQueue
&lt;/h2&gt;&lt;p&gt;å®ç°ä¸€ä¸ªå®¹é‡æœ‰é™ä¸”çº¿ç¨‹å®‰å…¨çš„ &lt;code&gt;BlockingQueue&lt;/code&gt;ï¼Œæ ¸å¿ƒåœ¨äº&lt;strong&gt;é€šè¿‡é”æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¹¶åˆ©ç”¨æ¡ä»¶å˜é‡ï¼ˆConditionï¼‰å®ç°é˜Ÿåˆ—â€œç©ºâ€ä¸â€œæ»¡â€æ—¶çš„é˜»å¡ç­‰å¾…å’Œå”¤é†’&lt;/strong&gt;ã€‚å…¶åŸºæœ¬æ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç»„ä»¶&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é” (Lock)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œå…¥é˜Ÿæˆ–å‡ºé˜Ÿæ“ä½œï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;â€œéç©ºâ€æ¡ä»¶ (notEmpty)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè®©å°è¯•è·å–å…ƒç´ çš„çº¿ç¨‹åœ¨æ­¤æ¡ä»¶ä¸Šç­‰å¾…ï¼›å½“æœ‰å…ƒç´ å…¥é˜Ÿæ—¶ï¼Œå”¤é†’åœ¨æ­¤æ¡ä»¶ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;â€œéæ»¡â€æ¡ä»¶ (notFull)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œè®©å°è¯•æ’å…¥å…ƒç´ çš„çº¿ç¨‹åœ¨æ­¤æ¡ä»¶ä¸Šç­‰å¾…ï¼›å½“æœ‰å…ƒç´ å‡ºé˜Ÿæ—¶ï¼Œå”¤é†’åœ¨æ­¤æ¡ä»¶ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨æ•°ç»„æˆ–é“¾è¡¨æ¥å®é™…å­˜å‚¨å…ƒç´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥Javaæ ‡å‡†åº“ä¸­çš„ &lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ä¸ºä¾‹ï¼Œæ·±å…¥è§£æå…¶å®ç°æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒå®ç°æœºåˆ¶å‰–æ"&gt;ğŸ”§ æ ¸å¿ƒå®ç°æœºåˆ¶å‰–æ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;æ˜¯ä¸€ä¸ªåŸºäºæ•°ç»„çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œå…¶å†…éƒ¨é€šè¿‡ä¸€ä¸ªå¯é‡å…¥é” (&lt;code&gt;ReentrantLock&lt;/code&gt;) å’Œä¸¤ä¸ªæ¡ä»¶å˜é‡ (&lt;code&gt;Condition&lt;/code&gt;) æ¥ååŒå·¥ä½œã€‚&lt;/p&gt;
&lt;h4 id="1-å…³é”®æˆå‘˜å˜é‡"&gt;1. å…³é”®æˆå‘˜å˜é‡
&lt;/h4&gt;&lt;p&gt;å…¶çº¿ç¨‹å®‰å…¨ä¸é˜»å¡èƒ½åŠ›çš„æ ¹åŸºåœ¨äºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæˆå‘˜å˜é‡ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class ArrayBlockingQueue&amp;lt;E&amp;gt; extends AbstractQueue&amp;lt;E&amp;gt; implements BlockingQueue&amp;lt;E&amp;gt;, java.io.Serializable {
/** å­˜å‚¨å…ƒç´ çš„æœ€ç»ˆæ•°ç»„ */
final Object[] items;
/** ç”¨äºå–å‡ºå…ƒç´ çš„ä½ç½®ç´¢å¼• */
int takeIndex;
/** ç”¨äºæ”¾å…¥å…ƒç´ çš„ä½ç½®ç´¢å¼• */
int putIndex;
/** é˜Ÿåˆ—ä¸­å½“å‰å…ƒç´ çš„ä¸ªæ•° */
int count;
/** ä¿è¯æ‰€æœ‰æ“ä½œçº¿ç¨‹å®‰å…¨çš„ä¸»é” */
final ReentrantLock lock;
/** â€œé˜Ÿåˆ—éç©ºâ€æ¡ä»¶å˜é‡ï¼Œç”¨äºç­‰å¾…å’Œå”¤é†’æ¶ˆè´¹è€… */
private final Condition notEmpty;
/** â€œé˜Ÿåˆ—æœªæ»¡â€æ¡ä»¶å˜é‡ï¼Œç”¨äºç­‰å¾…å’Œå”¤é†’ç”Ÿäº§è€… */
private final Condition notFull;
// ... å…¶ä»–ä»£ç 
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-é˜»å¡å¼æ’å…¥-putæ–¹æ³•"&gt;2. é˜»å¡å¼æ’å…¥ (&lt;code&gt;put&lt;/code&gt;æ–¹æ³•)
&lt;/h4&gt;&lt;p&gt;å½“ç”Ÿäº§è€…çº¿ç¨‹è°ƒç”¨ &lt;code&gt;put(E e)&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œå…¶å†…éƒ¨æ‰§è¡Œæµç¨‹å¦‚ä¸‹ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public void put(E e) throws InterruptedException {
checkNotNull(e); // æ£€æŸ¥å…ƒç´ éç©º
final ReentrantLock lock = this.lock;
lock.lockInterruptibly(); // è·å–é”ï¼Œå¯å“åº”ä¸­æ–­
try {
while (count == items.length) { // 1. æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²æ»¡
notFull.await(); // 2. å¦‚æœå·²æ»¡ï¼Œå°±åœ¨notFullæ¡ä»¶ä¸Šç­‰å¾…
}
enqueue(e); // 3. é˜Ÿåˆ—æœªæ»¡ï¼Œæ‰§è¡Œå…¥é˜Ÿæ“ä½œ
} finally {
lock.unlock(); // æœ€ç»ˆé‡Šæ”¾é”
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æµç¨‹è§£è¯»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;çº¿ç¨‹é¦–å…ˆè·å–é”ï¼Œç¡®ä¿åç»­æ“ä½œçš„åŸå­æ€§ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¾ªç¯ä¸­æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ (&lt;code&gt;count == items.length&lt;/code&gt;)ã€‚&lt;strong&gt;ä½¿ç”¨å¾ªç¯æ£€æŸ¥æ˜¯ä¸ºäº†é˜²æ­¢â€œè™šå‡å”¤é†’â€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œåˆ™è°ƒç”¨ &lt;code&gt;notFull.await()&lt;/code&gt;æŒ‚èµ·å½“å‰çº¿ç¨‹ï¼Œå¹¶é‡Šæ”¾é”ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹æ“ä½œé˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å½“å…¶ä»–çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…ï¼‰ä»é˜Ÿåˆ—ä¸­å–èµ°å…ƒç´ åï¼Œä¼šè°ƒç”¨ &lt;code&gt;notFull.signal()&lt;/code&gt;å”¤é†’åœ¨ &lt;code&gt;notFull&lt;/code&gt;ä¸Šç­‰å¾…çš„ç”Ÿäº§è€…çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;è¢«å”¤é†’çš„ç”Ÿäº§è€…çº¿ç¨‹é‡æ–°è·å–é”ï¼Œå¹¶å†æ¬¡æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼ˆå› ä¸ºå¯èƒ½è¢«å¤šä¸ªæ¶ˆè´¹è€…å”¤é†’ï¼‰ã€‚å¦‚æœä¸æ»¡ï¼Œåˆ™è°ƒç”¨ &lt;code&gt;enqueue(e)&lt;/code&gt;å°†å…ƒç´ æ”¾å…¥æ•°ç»„ &lt;code&gt;putIndex&lt;/code&gt;ä½ç½®ï¼Œå¹¶æ›´æ–° &lt;code&gt;putIndex&lt;/code&gt;å’Œ &lt;code&gt;count&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å…¥é˜ŸæˆåŠŸåï¼Œè°ƒç”¨ &lt;code&gt;notEmpty.signal()&lt;/code&gt;å”¤é†’å¯èƒ½æ­£åœ¨ &lt;code&gt;notEmpty&lt;/code&gt;æ¡ä»¶ä¸Šç­‰å¾…çš„æ¶ˆè´¹è€…çº¿ç¨‹ï¼ˆå› ä¸ºé˜Ÿåˆ—ä¹‹å‰å¯èƒ½æ˜¯ç©ºçš„ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="3-é˜»å¡å¼è·å–-takeæ–¹æ³•"&gt;3. é˜»å¡å¼è·å– (&lt;code&gt;take&lt;/code&gt;æ–¹æ³•)
&lt;/h4&gt;&lt;p&gt;æ¶ˆè´¹è€…çº¿ç¨‹è°ƒç”¨ &lt;code&gt;take()&lt;/code&gt;æ–¹æ³•çš„é€»è¾‘ä¸ &lt;code&gt;put&lt;/code&gt;å¯¹ç§° ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public E take() throws InterruptedException {
final ReentrantLock lock = this.lock;
lock.lockInterruptibly(); // è·å–é”
try {
while (count == 0) { // 1. æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
notEmpty.await(); // 2. å¦‚æœä¸ºç©ºï¼Œå°±åœ¨notEmptyæ¡ä»¶ä¸Šç­‰å¾…
}
return dequeue(); // 3. é˜Ÿåˆ—éç©ºï¼Œæ‰§è¡Œå‡ºé˜Ÿæ“ä½œ
} finally {
lock.unlock();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æµç¨‹è§£è¯»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è·å–é”ã€‚&lt;/li&gt;
&lt;li&gt;å¾ªç¯æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º (&lt;code&gt;count == 0&lt;/code&gt;)ï¼Œè‹¥ç©ºåˆ™ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç”Ÿäº§è€…çº¿ç¨‹æ”¾å…¥æ–°å…ƒç´ åï¼Œä¼šè°ƒç”¨ &lt;code&gt;notEmpty.signal()&lt;/code&gt;å”¤é†’ç­‰å¾…çš„æ¶ˆè´¹è€…ã€‚&lt;/li&gt;
&lt;li&gt;è¢«å”¤é†’çš„æ¶ˆè´¹è€…çº¿ç¨‹æ‰§è¡Œ &lt;code&gt;dequeue()&lt;/code&gt;ï¼Œä» &lt;code&gt;takeIndex&lt;/code&gt;ä½ç½®å–å‡ºå…ƒç´ ï¼Œæ›´æ–° &lt;code&gt;takeIndex&lt;/code&gt;å’Œ &lt;code&gt;count&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å‡ºé˜ŸæˆåŠŸåï¼Œè°ƒç”¨ &lt;code&gt;notFull.signal()&lt;/code&gt;å”¤é†’å¯èƒ½æ­£åœ¨ &lt;code&gt;notFull&lt;/code&gt;æ¡ä»¶ä¸Šç­‰å¾…çš„ç”Ÿäº§è€…çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®ç°å…³é”®è¦ç‚¹ä¸æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ’¡ å®ç°å…³é”®è¦ç‚¹ä¸æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é”çš„é€‰æ‹©ä¸å…¬å¹³æ€§&lt;/strong&gt;ï¼š&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;åœ¨æ„é€ å‡½æ•°ä¸­å…è®¸æŒ‡å®šé”çš„å…¬å¹³æ€§ã€‚å¦‚æœè®¾ç½®ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œåˆ™ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ä¼šä¼˜å…ˆè·å¾—é”ï¼Œé¿å…äº†çº¿ç¨‹é¥¥é¥¿ï¼Œä½†å¯èƒ½ä¼šé™ä½æ•´ä½“ååé‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„&lt;/strong&gt;ï¼šé™¤äº†æ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é“¾è¡¨å®ç°ï¼Œä¾‹å¦‚ &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ã€‚å®ƒé€šå¸¸ä½¿ç”¨&lt;strong&gt;ä¸¤æŠŠé”&lt;/strong&gt;ï¼ˆä¸€æŠŠç”¨äºå…¥é˜Ÿ &lt;code&gt;putLock&lt;/code&gt;ï¼Œä¸€æŠŠç”¨äºå‡ºé˜Ÿ &lt;code&gt;takeLock&lt;/code&gt;ï¼‰ï¼Œä»è€Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¹¶å‘é«˜æ—¶ï¼‰èƒ½å®ç°æ›´é«˜çš„ååé‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶…æ—¶æ“ä½œ&lt;/strong&gt;ï¼šé™¤äº†å®Œå…¨é˜»å¡çš„ &lt;code&gt;put&lt;/code&gt;å’Œ &lt;code&gt;take&lt;/code&gt;ï¼Œé€šå¸¸è¿˜ä¼šæä¾›å¸¦è¶…æ—¶ç­‰å¾…çš„æ–¹æ³•ï¼Œå¦‚ &lt;code&gt;offer(E e, long timeout, TimeUnit unit)&lt;/code&gt;å’Œ &lt;code&gt;poll(long timeout, TimeUnit unit)&lt;/code&gt;ï¼Œè¿™åœ¨æŸäº›éœ€è¦é¿å…æ— é™æœŸé˜»å¡çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å®ç°ä¸€ä¸ªå®¹é‡æœ‰é™ã€çº¿ç¨‹å®‰å…¨çš„ &lt;code&gt;BlockingQueue&lt;/code&gt;ï¼Œå…¶æ ¸å¿ƒæ¨¡å¼å¯ä»¥æ€»ç»“ä¸º &lt;strong&gt;â€œä¸€é”åŒæ¡ä»¶â€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€æŠŠé”&lt;/strong&gt;ä¿è¯æ‰€æœ‰æ“ä½œçš„&lt;strong&gt;åŸå­æ€§å’Œçº¿ç¨‹å®‰å…¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œéæ»¡â€æ¡ä»¶ (&lt;code&gt;notFull&lt;/code&gt;)&lt;/strong&gt; ç”¨äºåè°ƒ&lt;strong&gt;ç”Ÿäº§è€…&lt;/strong&gt;ï¼Œæ»¡æ—¶ç­‰å¾…ï¼Œä¸æ»¡æ—¶å”¤é†’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œéç©ºâ€æ¡ä»¶ (&lt;code&gt;notEmpty&lt;/code&gt;)&lt;/strong&gt; ç”¨äºåè°ƒ&lt;strong&gt;æ¶ˆè´¹è€…&lt;/strong&gt;ï¼Œç©ºæ—¶ç­‰å¾…ï¼Œä¸ç©ºæ—¶å”¤é†’ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§è®¾è®¡å®Œç¾åœ°å®ç°äº†ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œæ˜¯è§£å†³å¤šçº¿ç¨‹ååŒå·¥ä½œçš„ç»å…¸èŒƒå¼ã€‚å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„å‰–æèƒ½å¸®åŠ©ä½ ä¸ä»…ç†è§£å¦‚ä½•ä½¿ç”¨ï¼Œæ›´èƒ½æŒæ¡å…¶åº•å±‚çš„è®¾è®¡æ€æƒ³ã€‚&lt;/p&gt;
&lt;h2 id="ä¸¤é˜¶æ®µæäº¤åè®®"&gt;ä¸¤é˜¶æ®µæäº¤åè®®
&lt;/h2&gt;&lt;p&gt;MySQLçš„ä¸¤é˜¶æ®µæäº¤åè®®æ˜¯ç¡®ä¿æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°¤å…¶åœ¨åˆ†å¸ƒå¼äº‹åŠ¡å’Œä¿è¯å†…éƒ¨æ—¥å¿—ä¸€è‡´æ€§æ–¹é¢è‡³å…³é‡è¦ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†å®ƒçš„ä¸¤ç§ä¸»è¦ç±»å‹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MySQLå†…éƒ¨ä¸¤é˜¶æ®µæäº¤&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;XAä¸¤é˜¶æ®µæäº¤ï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯InnoDBå­˜å‚¨å¼•æ“çš„&lt;strong&gt;redo log&lt;/strong&gt;å’ŒMySQL Serverå±‚çš„&lt;strong&gt;binlog&lt;/strong&gt;å†™å…¥çš„åŸå­æ€§&lt;/td&gt;
&lt;td&gt;ä¿è¯è·¨å¤šä¸ªæ•°æ®åº“æˆ–èµ„æºç®¡ç†å™¨çš„&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡&lt;/strong&gt;çš„åŸå­æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè°ƒè€…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MySQL Serverè‡ªèº«&lt;/td&gt;
&lt;td&gt;åº”ç”¨ç¨‹åºæˆ–ç‹¬ç«‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚ä¸è€…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDBå­˜å‚¨å¼•æ“ï¼ˆredo logï¼‰å’ŒäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰&lt;/td&gt;
&lt;td&gt;å¤šä¸ªç‹¬ç«‹çš„MySQLå®ä¾‹æˆ–å…¶ä»–æ”¯æŒXAçš„èµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ä¸ªMySQLå®ä¾‹å†…ï¼Œç¡®ä¿&lt;strong&gt;Crash-Safe&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;æ•°æ®ä¸€è‡´&lt;/td&gt;
&lt;td&gt;è·¨æ•°æ®åº“ã€è·¨æœåŠ¡çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¦‚é“¶è¡Œè·¨è¡Œè½¬è´¦ã€å¾®æœåŠ¡ä¸‹å•æµç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å†…éƒ¨2pcredo-log-ä¸-binlog-çš„ååŒ"&gt;ğŸ” å†…éƒ¨2PCï¼šRedo Log ä¸ Binlog çš„ååŒ
&lt;/h3&gt;&lt;p&gt;MySQLå†…éƒ¨çš„ä¸¤é˜¶æ®µæäº¤ï¼Œæ ¸å¿ƒæ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šåœ¨å•ä¸ªMySQLå®ä¾‹ä¸­ï¼Œäº‹åŠ¡æäº¤éœ€è¦åŒæ—¶å†™å…¥InnoDBçš„&lt;strong&gt;é‡åšæ—¥å¿—ï¼ˆredo logï¼‰&lt;/strong&gt; å’ŒServerå±‚çš„&lt;strong&gt;äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰&lt;/strong&gt;ã€‚è¿™ä¸¤ç±»æ—¥å¿—èŒè´£ä¸åŒï¼ˆredo logç”¨äºå´©æºƒæ¢å¤ï¼Œbinlogç”¨äºä¸»ä»å¤åˆ¶å’Œæ•°æ®å½’æ¡£ï¼‰ï¼Œå¿…é¡»ä¿è¯å®ƒä»¬çš„ä¸€è‡´æ€§ï¼Œå¦åˆ™åœ¨æ•°æ®åº“å´©æºƒæ¢å¤æˆ–ä¸»ä»å¤åˆ¶æ—¶ä¼šå‡ºç°æ•°æ®é”™ä¹±ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡é˜¶æ®µï¼ˆPrepare Phaseï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨ä½œ&lt;/strong&gt;ï¼šInnoDBå­˜å‚¨å¼•æ“å°†äº‹åŠ¡çš„ä¿®æ”¹å†™å…¥redo logï¼Œå¹¶å°†æ—¥å¿—çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt;ã€‚æ­¤æ—¶ï¼Œäº‹åŠ¡å·²å®Œæˆæ‰€æœ‰æ•°æ®çš„ä¿®æ”¹ï¼Œä½†å°šæœªæäº¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ­¤é˜¶æ®µ&lt;strong&gt;ä¸å†™å…¥binlog&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤é˜¶æ®µï¼ˆCommit Phaseï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨ä½œ&lt;/strong&gt;ï¼šMySQL Serverå°†äº‹åŠ¡çš„æ›´æ”¹å†™å…¥binlogã€‚å†™å…¥æˆåŠŸåï¼Œå†é€šçŸ¥InnoDBå­˜å‚¨å¼•æ“å°†redo logçš„çŠ¶æ€ä» &lt;code&gt;PREPARE&lt;/code&gt;æ”¹ä¸º &lt;strong&gt;&lt;code&gt;COMMIT&lt;/code&gt;&lt;/strong&gt;ï¼Œå®Œæˆäº‹åŠ¡çš„æœ€ç»ˆæäº¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;è¿™ç§â€œå…ˆprepare redo logï¼Œå†write binlogï¼Œæœ€åcommit redo logâ€çš„æœºåˆ¶ï¼Œç¡®ä¿äº†åªæœ‰åœ¨binlogå†™å…¥æˆåŠŸåï¼Œäº‹åŠ¡æ‰ä¼šçœŸæ­£æäº¤ã€‚&lt;/strong&gt; å¦‚æœç¬¬äºŒé˜¶æ®µå†™å…¥binlogå¤±è´¥ï¼ŒMySQLä¼šå›æ»šå·²åœ¨prepareçŠ¶æ€çš„redo logï¼Œä»è€Œä¿è¯äºŒè€…æœ€ç»ˆçŠ¶æ€ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h3 id="-xaä¸¤é˜¶æ®µæäº¤åˆ†å¸ƒå¼äº‹åŠ¡çš„ä¿éšœ"&gt;ğŸŒ XAä¸¤é˜¶æ®µæäº¤ï¼šåˆ†å¸ƒå¼äº‹åŠ¡çš„ä¿éšœ
&lt;/h3&gt;&lt;p&gt;å½“ä¸šåŠ¡éœ€è¦è·¨å¤šä¸ªæ•°æ®åº“å®ä¾‹ï¼ˆæˆ–å…¶å®ƒæ”¯æŒXAçš„èµ„æºï¼‰ä¿è¯åŸå­æ€§æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨XAä¸¤é˜¶æ®µæäº¤åè®®ã€‚å…¶æ ¸å¿ƒè§’è‰²åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼‰&lt;/strong&gt;ï¼šå…¨å±€åè°ƒè€…ï¼Œè´Ÿè´£å‘èµ·å’Œè°ƒåº¦æ•´ä¸ªå…¨å±€äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰&lt;/strong&gt;ï¼šæ¯ä¸ªå‚ä¸äº‹åŠ¡çš„æ•°æ®åº“å®ä¾‹ï¼Œè´Ÿè´£ç®¡ç†æœ¬åœ°äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶å·¥ä½œæµç¨‹ä¹Ÿåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡é˜¶æ®µï¼ˆPrepare Phaseï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼‰å‘æ‰€æœ‰å‚ä¸çš„èµ„æºç®¡ç†å™¨ï¼ˆRMï¼‰å‘é€ &lt;code&gt;XA PREPARE&lt;/code&gt;å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªRMæ‰§è¡Œæœ¬åœ°äº‹åŠ¡æ“ä½œï¼ˆå¦‚æ›´æ–°ã€æ’å…¥ï¼‰ï¼Œå¹¶å°†äº‹åŠ¡çŠ¶æ€æŒä¹…åŒ–åˆ°æ—¥å¿—ä¸­ï¼Œä½†&lt;strong&gt;ä¸è¿›è¡Œæœ€ç»ˆæäº¤&lt;/strong&gt;ï¼Œå¹¶å‘ŠçŸ¥TMå‡†å¤‡ç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤/å›æ»šé˜¶æ®µï¼ˆCommit/Rollback Phaseï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æäº¤&lt;/strong&gt;ï¼šå¦‚æœTMæ”¶åˆ°æ‰€æœ‰RMçš„â€œå‡†å¤‡æˆåŠŸâ€å“åº”ï¼Œåˆ™å‘æ‰€æœ‰RMå‘é€ &lt;code&gt;XA COMMIT&lt;/code&gt;å‘½ä»¤ï¼Œæ‰€æœ‰RMæ­£å¼æäº¤äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ»š&lt;/strong&gt;ï¼šå¦‚æœä»»ä½•ä¸€ä¸ªRMè¿”å›å¤±è´¥æˆ–è¶…æ—¶ï¼ŒTMåˆ™å‘æ‰€æœ‰RMå‘é€ &lt;code&gt;XA ROLLBACK&lt;/code&gt;å‘½ä»¤ï¼Œæ‰€æœ‰RMå›æ»šäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸¤ä¸ªé˜¶æ®µï¼ŒXAåè®®ç¡®ä¿äº†åœ¨æ‰€æœ‰å‚ä¸è€…ä¸Šï¼Œäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤ï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ç†è§£è¿™äº›æœºåˆ¶åï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¿˜éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼šä¸¤é˜¶æ®µæäº¤æ¶‰åŠå¤šæ¬¡ç½‘ç»œé€šä¿¡å’Œç£ç›˜å†™å…¥ï¼Œå°¤å…¶æ˜¯XAäº‹åŠ¡ï¼Œé”æŒæœ‰æ—¶é—´è¾ƒé•¿ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚å»ºè®®ç”¨äºçŸ­äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•…éšœæ¢å¤ä¸æ‚¬æŒ‚äº‹åŠ¡&lt;/strong&gt;ï¼šåœ¨XAäº‹åŠ¡çš„ç¬¬äºŒé˜¶æ®µï¼Œå¦‚æœäº‹åŠ¡ç®¡ç†å™¨ï¼ˆTMï¼‰å‘ç”Ÿå´©æºƒï¼Œå¯èƒ½ä¼šç•™ä¸‹å¤„äº &lt;code&gt;PREPARED&lt;/code&gt;çŠ¶æ€çš„â€œæ‚¬æŒ‚äº‹åŠ¡â€ã€‚æ¢å¤åéœ€è¦ç®¡ç†å‘˜é€šè¿‡ &lt;code&gt;XA RECOVER&lt;/code&gt;å‘½ä»¤æŸ¥è¯¢å¹¶æ‰‹åŠ¨å†³å®šæ˜¯æäº¤è¿˜æ˜¯å›æ»šè¿™äº›äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQLå†…éƒ¨2PCçš„ä¼˜åŒ–&lt;/strong&gt;ï¼šä¸ºè§£å†³æ—©æœŸå†…éƒ¨2PCå­˜åœ¨çš„æ€§èƒ½é—®é¢˜ï¼ˆå¦‚&lt;code&gt;prepare_commit_mutex&lt;/code&gt;é”ç«äº‰ï¼‰ï¼ŒMySQL 5.7åŠä¹‹åç‰ˆæœ¬å¼•å…¥äº†&lt;strong&gt;ç»„æäº¤ï¼ˆGroup Commitï¼‰&lt;/strong&gt; ä¼˜åŒ–ï¼Œå°†å¤šä¸ªäº‹åŠ¡çš„redo logå’Œbinlogå†™å…¥åˆå¹¶å¤„ç†ï¼Œæ˜¾è‘—æå‡äº†å¹¶å‘æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-13"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒMySQLçš„ä¸¤é˜¶æ®µæäº¤åè®®æ˜¯æ•°æ®ä¸€è‡´æ€§çš„â€œå®ˆæŠ¤è€…â€ã€‚&lt;strong&gt;å†…éƒ¨2PC&lt;/strong&gt;ç¡®ä¿äº†å•ä¸ªMySQLå®ä¾‹å†…redo logå’Œbinlogçš„ååŒï¼Œæ˜¯æ•°æ®åº“é«˜å¯é æ€§çš„åŸºçŸ³ï¼›è€Œ&lt;strong&gt;XA 2PC&lt;/strong&gt;åˆ™æ‰©å±•äº†è¿™ç§åŸå­æ€§ä¿è¯ï¼Œæ˜¯å¤„ç†è·¨åº“ã€è·¨æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡çš„ç»å…¸æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£MySQLçš„ä¸¤é˜¶æ®µæäº¤ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å®ç°ç»†èŠ‚æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cookie"&gt;cookie
&lt;/h2&gt;&lt;p&gt;Cookie æ˜¯ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½ã€è¿›è¡Œä¼šè¯è·Ÿè¸ªè€Œå­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­çš„å°å‹æ–‡æœ¬æ•°æ®ã€‚å®ƒä½¿å¾—æœ¬æ˜¯æ— çŠ¶æ€çš„ HTTP åè®®èƒ½å¤Ÿè®°å½•ç¨³å®šçš„çŠ¶æ€ä¿¡æ¯ï¼Œæ˜¯æ„å»ºç°ä»£ Web åº”ç”¨ä½“éªŒï¼ˆå¦‚ä¿æŒç™»å½•ã€è®°å½•åå¥½ï¼‰çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹è¡¨æ¦‚æ‹¬äº† Cookie çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†å’Œå¸¸è§ç±»å‹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¯´æ˜/ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…³é”®ç‰¹ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç»„æˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åç§°(Name)ã€å€¼(Value)ã€åŸŸ(Domain)ã€è·¯å¾„(Path)ã€è¿‡æœŸæ—¶é—´(Expires/Max-Age)ã€å®‰å…¨æ ‡å¿—(Secure/HttpOnly)ç­‰&lt;/td&gt;
&lt;td&gt;å®šä¹‰äº† Cookie çš„å†…å®¹ã€ä½œç”¨èŒƒå›´å’Œç”Ÿå‘½å‘¨æœŸã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼šè¯ Cookie&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶æ€§ï¼Œæœªè®¾ç½®è¿‡æœŸæ—¶é—´&lt;/td&gt;
&lt;td&gt;ä¿å­˜åœ¨æµè§ˆå™¨å†…å­˜ï¼Œå…³é—­æµè§ˆå™¨å³å¤±æ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹… Cookie&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é•¿æœŸæ€§ï¼Œè®¾ç½®äº†æ˜ç¡®çš„è¿‡æœŸæ—¶é—´&lt;/td&gt;
&lt;td&gt;ä¿å­˜åœ¨ç¡¬ç›˜ï¼Œåœ¨åˆ°æœŸå‰ä¸€ç›´æœ‰æ•ˆï¼Œå¯ç”¨äºâ€œè®°ä½æˆ‘â€åŠŸèƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¬ä¸€æ–¹ Cookie&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±ç”¨æˆ·æ­£åœ¨è®¿é—®çš„ç½‘ç«™åŸŸåè®¾ç½®&lt;/td&gt;
&lt;td&gt;é€šå¸¸ç”¨äºç½‘ç«™åŠŸèƒ½ï¼Œå¦‚ç™»å½•çŠ¶æ€ã€åå¥½è®¾ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¬ä¸‰æ–¹ Cookie&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±å½“å‰ç½‘é¡µåµŒå…¥çš„å…¶ä»–ç¬¬ä¸‰æ–¹æœåŠ¡è®¾ç½®&lt;/td&gt;
&lt;td&gt;å¸¸ç”¨äºå¹¿å‘Šè¿½è¸ªå’Œè·¨ç«™è¡Œä¸ºåˆ†æã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-cookie-çš„å·¥ä½œåŸç†"&gt;ğŸ”„ Cookie çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;Cookie çš„å·¥ä½œæœºåˆ¶å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œæœåŠ¡å™¨ä¸‹å‘ï¼Œæµè§ˆå™¨å­˜å‚¨å¹¶éšè¯·æ±‚å‘é€â€ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¦–æ¬¡è¯·æ±‚&lt;/strong&gt;ï¼šå½“ç”¨æˆ·é¦–æ¬¡è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨å‘é€çš„è¯·æ±‚ä¸åŒ…å«ä»»ä½• Cookieã€‚æœåŠ¡å™¨åœ¨è¿”å›çš„ HTTP å“åº”å¤´ä¸­ï¼Œé€šè¿‡ &lt;code&gt;Set-Cookie&lt;/code&gt;å­—æ®µå°†éœ€è¦å­˜å‚¨çš„ä¿¡æ¯å‘é€ç»™æµè§ˆå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµè§ˆå™¨å­˜å‚¨&lt;/strong&gt;ï¼šæµè§ˆå™¨æ¥æ”¶åˆ° &lt;code&gt;Set-Cookie&lt;/code&gt;æŒ‡ä»¤åï¼Œä¼šå°†è¿™äº›æ•°æ®æŒ‰ç…§æŒ‡å®šçš„å±æ€§ï¼ˆå¦‚åŸŸåã€è·¯å¾„ã€æœ‰æ•ˆæœŸï¼‰ä¿å­˜èµ·æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç»­è¯·æ±‚&lt;/strong&gt;ï¼šæ­¤åï¼Œåªè¦è¯·æ±‚çš„ URL ç¬¦åˆ Cookie çš„åŸŸå’Œè·¯å¾„è§„åˆ™ï¼Œæµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨åœ¨ HTTP è¯·æ±‚å¤´ä¸­æ·»åŠ  &lt;code&gt;Cookie&lt;/code&gt;å­—æ®µï¼Œå°†è¿™äº›ä¿¡æ¯å¸¦å›ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨é€šè¿‡è§£æè¿™äº›ä¿¡æ¯æ¥è¯†åˆ«ç”¨æˆ·èº«ä»½æˆ–æ¢å¤ä¼šè¯çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-cookie-çš„å±æ€§ä¸å®‰å…¨"&gt;âš™ï¸ Cookie çš„å±æ€§ä¸å®‰å…¨
&lt;/h3&gt;&lt;p&gt;é€šè¿‡è®¾ç½®å±æ€§ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶ Cookie çš„è¡Œä¸ºï¼Œè¿™å¯¹äºå®‰å…¨å’ŒåŠŸèƒ½è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Domain å’Œ Path&lt;/strong&gt;ï¼šå®šä¹‰äº† Cookie çš„ä½œç”¨èŒƒå›´ã€‚ä¾‹å¦‚ï¼Œè®¾ä¸º &lt;code&gt;.example.com&lt;/code&gt;çš„ Cookie å¯ä»¥è¢« &lt;code&gt;a.example.com&lt;/code&gt;å’Œ &lt;code&gt;b.example.com&lt;/code&gt;å…±äº«ï¼Œè¿™åœ¨å®ç°å•ç‚¹ç™»å½•æ—¶æœ‰ç”¨ï¼Œä½†ä¹Ÿå¢åŠ äº†å®‰å…¨é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Expires å’Œ Max-Age&lt;/strong&gt;ï¼šæ§åˆ¶ Cookie çš„ç”Ÿå‘½å‘¨æœŸã€‚æœªè®¾ç½®åˆ™é»˜è®¤ä¸ºä¼šè¯ Cookieï¼Œå…³é—­æµè§ˆå™¨å³å¤±æ•ˆï¼›è®¾ç½®äº†åˆ™æˆä¸ºæŒä¹… Cookieã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Secure&lt;/strong&gt;ï¼šå¸¦æœ‰æ­¤å±æ€§çš„ Cookie åªä¼šé€šè¿‡ &lt;strong&gt;HTTPS&lt;/strong&gt; åŠ å¯†è¿æ¥ä¼ è¾“ï¼Œé˜²æ­¢åœ¨ç½‘ç»œä¸Šè¢«çªƒå¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HttpOnly&lt;/strong&gt;ï¼šå¸¦æœ‰æ­¤å±æ€§çš„ Cookie æ— æ³•é€šè¿‡ JavaScript çš„ &lt;code&gt;document.cookie&lt;/code&gt;API è®¿é—®ã€‚è¿™èƒ½æœ‰æ•ˆé˜²èŒƒ&lt;strong&gt;è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰&lt;/strong&gt; æ”»å‡»ï¼Œé˜²æ­¢æ¶æ„è„šæœ¬çªƒå– Cookie ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ä¼šè¯æ ‡è¯†ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-1"&gt;ğŸ’¡ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;Cookie çš„æ ¸å¿ƒä»·å€¼åœ¨äºè®©ç½‘ç«™â€œè®°ä½â€ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼šè¯çŠ¶æ€ç®¡ç†&lt;/strong&gt;ï¼šè¿™æ˜¯ Cookie æœ€ç»å…¸çš„ç”¨é€”ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ Session ID å¹¶é€šè¿‡ Cookie ä¸‹å‘ã€‚æµè§ˆå™¨åç»­çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦è¿™ä¸ª IDï¼Œä»è€Œä½¿æœåŠ¡å™¨çŸ¥é“æ˜¯è°åœ¨è®¿é—®ï¼Œæ— éœ€é‡å¤ç™»å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ªæ€§åŒ–ä½“éªŒ&lt;/strong&gt;ï¼šç½‘ç«™åˆ©ç”¨ Cookie ä¿å­˜ç”¨æˆ·çš„è¯­è¨€è®¾ç½®ã€ä¸»é¢˜åå¥½ã€å­—ä½“å¤§å°ç­‰ï¼Œåœ¨ä¸‹æ¬¡è®¿é—®æ—¶è‡ªåŠ¨åº”ç”¨è¿™äº›è®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸ºåˆ†æä¸å¹¿å‘Šå®šå‘&lt;/strong&gt;ï¼šç½‘ç«™å’Œç¬¬ä¸‰æ–¹å¹¿å‘Šå•†é€šè¿‡ Cookie è®°å½•ç”¨æˆ·è®¿é—®äº†å“ªäº›é¡µé¢ã€ç‚¹å‡»äº†å“ªäº›å†…å®¹ï¼Œä»è€Œåˆ†æç”¨æˆ·å…´è¶£ï¼Œç”¨äºä¼˜åŒ–ç½‘ç«™ä½“éªŒæˆ–æ¨é€ç›¸å…³å¹¿å‘Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®‰å…¨éšç§ä¸ä½¿ç”¨å»ºè®®"&gt;ğŸ›¡ï¸ å®‰å…¨éšç§ä¸ä½¿ç”¨å»ºè®®
&lt;/h3&gt;&lt;p&gt;Cookie åœ¨æä¾›ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å®‰å…¨å’Œéšç§æ–¹é¢çš„è€ƒé‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§é£é™©&lt;/strong&gt;ï¼šä¸»è¦åŒ…æ‹¬ &lt;strong&gt;XSS æ”»å‡»&lt;/strong&gt;ï¼ˆçªƒå– Cookieï¼‰ã€&lt;strong&gt;CSRF æ”»å‡»&lt;/strong&gt;ï¼ˆåˆ©ç”¨æµè§ˆå™¨è‡ªåŠ¨æºå¸¦ Cookie çš„æœºåˆ¶è¿›è¡Œéæ³•æ“ä½œï¼‰ä»¥åŠ&lt;strong&gt;ç¬¬ä¸‰æ–¹ Cookie è¿½è¸ª&lt;/strong&gt;å¸¦æ¥çš„éšç§æ‹…å¿§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºå¼€å‘è€…&lt;/strong&gt;ï¼šå¯¹æ•æ„Ÿ Cookie åŠ¡å¿…è®¾ç½® &lt;code&gt;HttpOnly&lt;/code&gt;å’Œ &lt;code&gt;Secure&lt;/code&gt;å±æ€§ï¼›å¯¹é‡è¦æ“ä½œå¢åŠ äºŒæ¬¡éªŒè¯ï¼ˆå¦‚çŸ­ä¿¡éªŒè¯ç ï¼‰ï¼Œé˜²èŒƒ CSRFï¼›éµå¾ªæœ€å°åŒ–åŸåˆ™ï¼Œä¸åœ¨ Cookie ä¸­å­˜å‚¨å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºç”¨æˆ·&lt;/strong&gt;ï¼šå¯ä»¥å®šæœŸæ¸…ç† Cookieï¼Œæˆ–ä½¿ç”¨æµè§ˆå™¨çš„â€œæ— ç—•æ¨¡å¼â€ï¼›å…³æ³¨æµè§ˆå™¨çš„éšç§è®¾ç½®ï¼Œä¾‹å¦‚é€‰æ‹©é˜»æ­¢ç¬¬ä¸‰æ–¹ Cookieï¼›ä»…åœ¨ä¸ä¿¡ä»»çš„ç½‘ç«™ä¸Šç‚¹å‡»â€œè®°ä½æˆ‘â€ç­‰åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»¶ä¼¸"&gt;ğŸ’ æ€»ç»“ä¸å»¶ä¼¸
&lt;/h3&gt;&lt;p&gt;Cookie æ˜¯ Web ç”Ÿæ€çš„åŸºçŸ³ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡ç®€å•çš„â€œä¸‹å‘-å­˜å‚¨-æºå¸¦â€æœºåˆ¶ï¼Œå·§å¦™åœ°è§£å†³äº† HTTP æ— çŠ¶æ€çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ Cookieã€‚å¦‚æœä½ å¯¹ä¸ Cookie ç´§å¯†ç›¸å…³çš„ Session æœºåˆ¶ï¼Œæˆ–è€…å…¶ä»–æµè§ˆå™¨å­˜å‚¨æ–¹æ¡ˆï¼ˆå¦‚ Web Storageï¼‰æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="set-cookie"&gt;Set-cookie
&lt;/h2&gt;&lt;p&gt;Set-Cookie æ˜¯ Web å¼€å‘ä¸­ç»´æŒç”¨æˆ·çŠ¶æ€çš„å…³é”®æœºåˆ¶ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒå±æ€§å’ŒæœåŠ¡å™¨åˆ©ç”¨ Cookie çš„å¸¸è§åœºæ™¯ï¼Œç„¶åæˆ‘ä»¬çœ‹å…·ä½“ä¾‹å­ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒå±æ€§/åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä½œç”¨ä¸ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Expires&lt;/code&gt;/ &lt;code&gt;Max-Age&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰Cookieç”Ÿå‘½å‘¨æœŸã€‚&lt;code&gt;Expires=Wed, 21 Oct 2025 07:28:00 GMT&lt;/code&gt;æˆ– &lt;code&gt;Max-Age=3600&lt;/code&gt;ï¼ˆ1å°æ—¶ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Domain&lt;/code&gt;&amp;amp; &lt;code&gt;Path&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ§åˆ¶Cookieä½œç”¨èŒƒå›´ã€‚&lt;code&gt;Domain=.example.com&lt;/code&gt;ä½¿Cookieåœ¨å­åŸŸåå…±äº«ï¼›&lt;code&gt;Path=/shop&lt;/code&gt;é™åˆ¶Cookieä»…åœ¨&lt;code&gt;/shop&lt;/code&gt;è·¯å¾„ä¸‹å‘é€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Secure&lt;/code&gt;&amp;amp; &lt;code&gt;HttpOnly&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¢å¼ºå®‰å…¨æ€§ã€‚&lt;code&gt;Secure&lt;/code&gt;ç¡®ä¿Cookieä»…é€šè¿‡HTTPSä¼ è¾“ï¼›&lt;code&gt;HttpOnly&lt;/code&gt;é˜»æ­¢JavaScriptè®¿é—®ï¼Œé˜²XSSã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;SameSite&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜²å¾¡CSRFæ”»å‡»ã€‚&lt;code&gt;Strict&lt;/code&gt;å®Œå…¨ç¦æ­¢è·¨ç«™å‘é€ï¼›&lt;code&gt;Lax&lt;/code&gt;å…è®¸éƒ¨åˆ†å¯¼èˆªGETè¯·æ±‚ï¼›&lt;code&gt;None&lt;/code&gt;å…è®¸è·¨ç«™ä½†éœ€é…åˆ&lt;code&gt;Secure&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼šè¯ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨è®¾ç½®åŒ…å«ä¼šè¯IDçš„Cookieï¼ˆå¦‚&lt;code&gt;sessionId=abc123&lt;/code&gt;ï¼‰æ¥è¿½è¸ªç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸ªæ€§åŒ–åå¥½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç”¨æˆ·è¯­è¨€ã€ä¸»é¢˜è®¾ç½®ï¼ˆå¦‚&lt;code&gt;lang=zh-CN&lt;/code&gt;ï¼‰ï¼Œå®ç°ä¸‹æ¬¡è®¿é—®è‡ªåŠ¨åº”ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æœåŠ¡å™¨ç«¯è®¾ç½®-cookie-ç¤ºä¾‹"&gt;ğŸ”‘ æœåŠ¡å™¨ç«¯è®¾ç½® Cookie ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;æœåŠ¡å™¨é€šè¿‡åœ¨HTTPå“åº”å¤´ä¸­æ·»åŠ &lt;code&gt;Set-Cookie&lt;/code&gt;å­—æ®µæ¥æŒ‡ç¤ºæµè§ˆå™¨å­˜å‚¨Cookieã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Node.js (åŸç”ŸHTTPæ¨¡å—) è®¾ç½®ç™»å½•ä¼šè¯Cookie&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;const http = require(&amp;#39;http&amp;#39;);
const server = http.createServer((req, res) =&amp;gt; {
// æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•éªŒè¯æˆåŠŸ
const userId = &amp;#39;user123&amp;#39;;
// è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„ä¼šè¯Cookie
res.setHeader(&amp;#39;Set-Cookie&amp;#39;, [
`sessionId=${userId}; HttpOnly; Secure; SameSite=Strict; Path=/; Max-Age=3600`, // å®‰å…¨çš„æ ¸å¿ƒä¼šè¯ID
`userPreference=darkMode; Path=/; Max-Age=2592000` // å­˜å‚¨ä¸ªæ€§åŒ–è®¾ç½®ï¼Œæœ‰æ•ˆæœŸæ›´é•¿
]);
res.writeHead(200, { &amp;#39;Content-Type&amp;#39;: &amp;#39;text/plain&amp;#39; });
res.end(&amp;#39;Login successful and cookies set!&amp;#39;);
});
server.listen(3000);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªä¾‹å­è®¾ç½®äº†ä¸¤ä¸ªCookieï¼šä¸€ä¸ªå®‰å…¨çš„ä¼šè¯IDå’Œä¸€ä¸ªå­˜å‚¨ç”¨æˆ·åå¥½çš„Cookieã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Nginx ä½œä¸ºåå‘ä»£ç†è®¾ç½®Cookie&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥åœ¨Nginxé…ç½®ä¸­ä¸ºé™æ€èµ„æºæˆ–ç‰¹å®šè·¯ç”±æ·»åŠ Cookieã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;location /special-offer {
add_header Set-Cookie &amp;#34;promo_seen=yes; Path=/; Max-Age=86400&amp;#34;;
# å…¶ä»–ä»£ç†é…ç½®...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœåŠ¡å™¨è¯»å–ä¸éªŒè¯-cookie"&gt;ğŸ” æœåŠ¡å™¨è¯»å–ä¸éªŒè¯ Cookie
&lt;/h3&gt;&lt;p&gt;å½“æµè§ˆå™¨å†æ¬¡å‘åŒä¸€æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨HTTPè¯·æ±‚å¤´çš„&lt;code&gt;Cookie&lt;/code&gt;å­—æ®µä¸­æºå¸¦ä¹‹å‰å­˜å‚¨çš„Cookieã€‚æœåŠ¡å™¨éœ€è¦è§£æè¿™äº›ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Node.js (Expressæ¡†æ¶) è¯»å–å¹¶éªŒè¯Cookie&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;const express = require(&amp;#39;express&amp;#39;);
const cookieParser = require(&amp;#39;cookie-parser&amp;#39;); // å¼•å…¥ä¸­é—´ä»¶
const app = express();
app.use(cookieParser()); // ä½¿ç”¨ä¸­é—´ä»¶è‡ªåŠ¨è§£æCookie
app.get(&amp;#39;/dashboard&amp;#39;, (req, res) =&amp;gt; {
// è¯»å–åä¸º sessionId çš„Cookie
const sessionId = req.cookies.sessionId;
if (sessionId &amp;amp;&amp;amp; isValidSession(sessionId)) { // éªŒè¯ä¼šè¯æœ‰æ•ˆæ€§
// ä¼šè¯æœ‰æ•ˆï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–ä»ªè¡¨æ¿
const userPreference = req.cookies.userPreference || &amp;#39;lightMode&amp;#39;;
res.send(`Welcome back! Your theme is: ${userPreference}`);
} else {
// ä¼šè¯æ— æ•ˆæˆ–ä¸å­˜åœ¨ï¼Œè¦æ±‚é‡æ–°ç™»å½•
res.status(401).send(&amp;#39;Please log in.&amp;#39;);
}
});
function isValidSession(sessionId) {
// è¿™é‡Œåº”æœ‰é€»è¾‘éªŒè¯ä¼šè¯IDæ˜¯å¦æœ‰æ•ˆï¼ˆå¦‚æŸ¥è¯¢æ•°æ®åº“æˆ–ç¼“å­˜ï¼‰
return true; // ç®€åŒ–ç¤ºä¾‹
}
app.listen(3000);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œä½¿ç”¨&lt;code&gt;cookie-parser&lt;/code&gt;ä¸­é—´ä»¶ç®€åŒ–äº†Cookieçš„è¯»å–è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®¢æˆ·ç«¯javascriptæ“ä½œ-cookie-éhttponly"&gt;ğŸ› ï¸ å®¢æˆ·ç«¯JavaScriptæ“ä½œ Cookie (éHttpOnly)
&lt;/h3&gt;&lt;p&gt;å¯¹äº&lt;strong&gt;æ²¡æœ‰è®¾ç½®&lt;code&gt;HttpOnly&lt;/code&gt;å±æ€§&lt;/strong&gt;çš„Cookieï¼Œå®¢æˆ·ç«¯JavaScriptå¯ä»¥é€šè¿‡&lt;code&gt;document.cookie&lt;/code&gt;è¿›è¡Œè¯»å–å’Œè®¾ç½®ï¼Œå¸¸ç”¨äºå‰ç«¯äº¤äº’åå¥½è®¾ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»å–æ‰€æœ‰å¯è®¿é—®çš„Cookie&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;function getCookie(name) {
const cookieString = document.cookie;
const cookies = cookieString.split(&amp;#39;; &amp;#39;);
for (let cookie of cookies) {
const [cookieName, cookieValue] = cookie.split(&amp;#39;=&amp;#39;);
if (cookieName === name) {
return decodeURIComponent(cookieValue);
}
}
return null;
}
const currentTheme = getCookie(&amp;#39;userPreference&amp;#39;);
console.log(&amp;#39;Current theme is:&amp;#39;, currentTheme);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®ä¸€ä¸ªæ–°çš„Cookieï¼ˆå¦‚è®°å½•å­—ä½“å¤§å°ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;function setCookie(name, value, daysToLive) {
const date = new Date();
date.setTime(date.getTime() + (daysToLive * 24 * 60 * 60 * 1000));
const expires = &amp;#39;expires=&amp;#39; + date.toUTCString();
// è®¾ç½®Cookieï¼Œå¯¹å…¶å€¼è¿›è¡Œç¼–ç ä»¥å¤„ç†ç‰¹æ®Šå­—ç¬¦
document.cookie = `${name}=${encodeURIComponent(value)}; ${expires}; path=/`;
}
// ç”¨æˆ·é€‰æ‹©å¤§å­—ä½“åè®¾ç½®Cookie
setCookie(&amp;#39;fontSize&amp;#39;, &amp;#39;large&amp;#39;, 30); // ä¿å­˜30å¤©
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç»¼åˆå®ä¾‹ç™»å½•çŠ¶æ€ä¸åå¥½ç®¡ç†"&gt;ğŸ’¡ ç»¼åˆå®ä¾‹ï¼šç™»å½•çŠ¶æ€ä¸åå¥½ç®¡ç†
&lt;/h3&gt;&lt;p&gt;ç»“åˆä¸Šè¿°çŸ¥è¯†ï¼Œä¸€ä¸ªå…¸å‹çš„åº”ç”¨æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ç™»å½•&lt;/strong&gt;ï¼šæœåŠ¡å™¨éªŒè¯å‡­è¯åï¼Œå‘é€ä¸€ä¸ªå®‰å…¨çš„&lt;code&gt;HttpOnly&lt;/code&gt;çš„ä¼šè¯Cookieã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®å—ä¿æŠ¤é¡µé¢&lt;/strong&gt;ï¼šæµè§ˆå™¨æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨æºå¸¦ä¼šè¯Cookieï¼ŒæœåŠ¡å™¨éªŒè¯åå…è®¸è®¿é—®ï¼Œå¹¶å¯è¯»å–éHttpOnlyçš„åå¥½Cookieï¼ˆå¦‚&lt;code&gt;theme=dark&lt;/code&gt;ï¼‰æ¥ä¸ªæ€§åŒ–é¡µé¢å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ä¸»åŠ¨è®¾ç½®&lt;/strong&gt;ï¼šç”¨æˆ·åœ¨é¡µé¢ä¸Šåˆ‡æ¢è¯­è¨€ï¼Œå‰ç«¯JSè®¾ç½®ä¸€ä¸ªé•¿æœŸæœ‰æ•ˆçš„åå¥½Cookieï¼ˆå¦‚&lt;code&gt;lang=fr&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸‹æ¬¡è®¿é—®&lt;/strong&gt;ï¼šæœåŠ¡å™¨æ ¹æ®ä¼šè¯Cookieè¯†åˆ«ç”¨æˆ·ï¼ŒåŒæ—¶æµè§ˆå™¨å°†è¯­è¨€åå¥½Cookieå‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›æ³•è¯­ç•Œé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦å®‰å…¨ä¸å®è·µå»ºè®®"&gt;âš ï¸ é‡è¦å®‰å…¨ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å®‰å…¨åŸåˆ™&lt;/strong&gt;ï¼šå¯¹äºä¼šè¯IDç­‰æ•æ„Ÿä¿¡æ¯ï¼Œ&lt;strong&gt;åŠ¡å¿…è®¾ç½®&lt;code&gt;HttpOnly&lt;/code&gt;å’Œ&lt;code&gt;Secure&lt;/code&gt;å±æ€§&lt;/strong&gt;ï¼Œå¹¶è€ƒè™‘ä½¿ç”¨&lt;code&gt;SameSite=Strict&lt;/code&gt;æˆ–&lt;code&gt;Lax&lt;/code&gt;æ¥å¢å¼ºé˜²æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•æ„Ÿä¿¡æ¯å‹¿å­˜Cookie&lt;/strong&gt;ï¼šä¸è¦åœ¨Cookieä¸­ç›´æ¥å­˜å‚¨å¯†ç ã€ä¸ªäººèº«ä»½ä¿¡æ¯ç­‰æ•æ„Ÿæ•°æ®ã€‚åº”å­˜å‚¨ç”±æœåŠ¡å™¨ç”Ÿæˆçš„éšæœºä»¤ç‰Œæˆ–ä¼šè¯IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶Cookieæ•°é‡ä¸å¤§å°&lt;/strong&gt;ï¼šæµè§ˆå™¨å¯¹æ¯ä¸ªåŸŸåçš„Cookieæ•°é‡å’Œæ¯ä¸ªCookieçš„å¤§å°éƒ½æœ‰é™åˆ¶ï¼ˆå¦‚æ¯ä¸ªCookieé€šå¸¸ä¸è¶…è¿‡4KBï¼‰ï¼Œè¿‡å¤šè¿‡å¤§çš„Cookieä¼šå½±å“ç½‘ç»œæ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…æ™°çš„ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šä½¿ç”¨&lt;code&gt;Domain&lt;/code&gt;å’Œ&lt;code&gt;Path&lt;/code&gt;å±æ€§ç²¾ç¡®æ§åˆ¶Cookieçš„å‘é€èŒƒå›´ï¼Œé¿å…ä¸å¿…è¦çš„ç½‘ç»œå¼€é”€å’Œå®‰å…¨é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¾‹å­èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¦‚ä½•åœ¨å®è·µä¸­ä½¿ç”¨Set-Cookieå’Œåˆ©ç”¨Cookieã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæ¬¢è¿æå‡ºï¼&lt;/p&gt;
&lt;h2 id="expires"&gt;Expires
&lt;/h2&gt;&lt;p&gt;Cookie é‡Œçš„ &lt;code&gt;Expires&lt;/code&gt;/ &lt;code&gt;Max-Age&lt;/code&gt;å’Œæµè§ˆå™¨ç¼“å­˜è™½ç„¶éƒ½æ¶‰åŠâ€œè¿‡æœŸæ—¶é—´â€çš„æ¦‚å¿µï¼Œä½†å®ƒä»¬æ˜¯&lt;strong&gt;ä¸¤å¥—å®Œå…¨ä¸åŒä¸”ç‹¬ç«‹çš„æœºåˆ¶&lt;/strong&gt;ï¼Œåˆ†åˆ«ç®¡ç†ç€ä¸åŒç±»å‹çš„æ•°æ®ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Cookieï¼ˆç”± &lt;code&gt;Set-Cookie&lt;/code&gt;å¤´ç®¡ç†ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æµè§ˆå™¨ç¼“å­˜ï¼ˆç”± &lt;code&gt;Cache-Control&lt;/code&gt;ç­‰å¤´ç®¡ç†ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºç»´æŠ¤&lt;strong&gt;ç”¨æˆ·çŠ¶æ€&lt;/strong&gt;å’Œ&lt;strong&gt;èº«ä»½è¯†åˆ«&lt;/strong&gt;çš„å°æ®µæ–‡æœ¬æ•°æ®ï¼ˆå¦‚ä¼šè¯IDã€ç”¨æˆ·åå¥½ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;å­˜å‚¨&lt;strong&gt;é™æ€èµ„æº&lt;/strong&gt;çš„å‰¯æœ¬ï¼ˆå¦‚JSã€CSSã€å›¾ç‰‡æ–‡ä»¶ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ§åˆ¶å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Expires&lt;/code&gt;ï¼ˆç»å¯¹æ—¶é—´ï¼‰ã€&lt;code&gt;Max-Age&lt;/code&gt;ï¼ˆç›¸å¯¹ç§’æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Cache-Control&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;max-age&lt;/code&gt;ã€&lt;code&gt;no-cache&lt;/code&gt;ï¼‰ã€&lt;code&gt;Expires&lt;/code&gt;ï¼ˆHTTP/1.0ï¼Œä¼˜å…ˆçº§è¾ƒä½ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿‡æœŸæœºåˆ¶ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†³å®šæµè§ˆå™¨ä½•æ—¶&lt;strong&gt;è‡ªåŠ¨åˆ é™¤&lt;/strong&gt;è¿™ä¸ªCookieã€‚è¿‡æœŸåï¼Œç›¸å…³è¯·æ±‚å°†ä¸å†æºå¸¦æ­¤Cookieã€‚&lt;/td&gt;
&lt;td&gt;å†³å®šæµè§ˆå™¨æ˜¯å¦å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°å‰¯æœ¬è€Œ&lt;strong&gt;æ— éœ€å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚&lt;/strong&gt;ï¼ˆå³â€œå¼ºç¼“å­˜â€å‘½ä¸­ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ä¼ è¾“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåœ¨&lt;code&gt;Cookie&lt;/code&gt;è¯·æ±‚å¤´ä¸­&lt;strong&gt;è‡ªåŠ¨æºå¸¦&lt;/strong&gt;ï¼ˆç¬¦åˆDomainå’ŒPathè§„åˆ™ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;å‘½ä¸­å¼ºç¼“å­˜æ—¶ï¼Œ&lt;strong&gt;å®Œå…¨ä¸å‘é€è¯·æ±‚&lt;/strong&gt;ï¼Œèµ„æºç›´æ¥ä»æœ¬åœ°ç£ç›˜æˆ–å†…å­˜åŠ è½½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦å†…å®¹ã€ä¸ªæ€§åŒ–è®¾ç½®ã€‚&lt;/td&gt;
&lt;td&gt;ç«™ç‚¹çš„LOGOå›¾ç‰‡ã€å…¬å…±çš„CSS/JSåº“æ–‡ä»¶ã€å­—ä½“æ–‡ä»¶ç­‰ä¸å¸¸å˜çš„é™æ€èµ„æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶çš„å·®å¼‚"&gt;ğŸ”„ å·¥ä½œæœºåˆ¶çš„å·®å¼‚
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£è¿™ä¸¤å¥—æœºåˆ¶åœ¨æµè§ˆå™¨ä¸æœåŠ¡å™¨äº¤äº’è¿‡ç¨‹ä¸­çš„ä¸åŒè§’è‰²å’Œå·¥ä½œæµç¨‹ï¼Œä¸‹å›¾å±•ç¤ºäº†å®ƒä»¬å„è‡ªçš„è¿ä½œè·¯å¾„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç”¨æˆ·è®¿é—®ç½‘ç«™] --&amp;gt; B{æœåŠ¡å™¨è¿”å›HTTPå“åº”}
B --&amp;gt; C[å“åº”å¤´åŒ…å«&amp;lt;br&amp;gt;Set-Cookie]
B --&amp;gt; D[å“åº”å¤´åŒ…å«&amp;lt;br&amp;gt;Cache-Control/Expires]
C --&amp;gt; E[æµè§ˆå™¨å­˜å‚¨Cookie&amp;lt;br&amp;gt;å¹¶ä¾æ®Expires/Max-Ageç®¡ç†ç”Ÿå‘½å‘¨æœŸ]
D --&amp;gt; F[æµè§ˆå™¨ç¼“å­˜é™æ€èµ„æº&amp;lt;br&amp;gt;å¹¶ä¾æ®ç¼“å­˜ç­–ç•¥åˆ¤æ–­æœ‰æ•ˆæ€§]
E --&amp;gt; G[åç»­è¯·æ±‚è‡ªåŠ¨åœ¨Cookieå¤´ä¸­&amp;lt;br&amp;gt;æºå¸¦æœªè¿‡æœŸçš„Cookie]
F --&amp;gt; H{åç»­è¯·æ±‚æ£€æŸ¥èµ„æºç¼“å­˜}
H -- ç¼“å­˜æœªè¿‡æœŸ --&amp;gt; I[ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜&amp;lt;br&amp;gt;ï¼ˆçŠ¶æ€ç 200 from cacheï¼‰]
H -- ç¼“å­˜å·²è¿‡æœŸ --&amp;gt; J[å‘æœåŠ¡å™¨å‘é€è¯·æ±‚éªŒè¯]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cookie çš„æ—…ç¨‹&lt;/strong&gt;ï¼šæœåŠ¡å™¨é€šè¿‡ &lt;code&gt;Set-Cookie&lt;/code&gt;å¤´ä¸‹å‘æŒ‡ä»¤ï¼Œæµè§ˆå™¨å­˜å‚¨åï¼Œåœ¨åç»­æ¯ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„è¯·æ±‚ä¸­éƒ½ä¼šä¸»åŠ¨å¸¦ä¸Šè¿™äº›Cookieï¼Œç”¨äºå‘Šè¯‰æœåŠ¡å™¨â€œæˆ‘æ˜¯è°â€ã€â€œæˆ‘çš„åå¥½æ˜¯ä»€ä¹ˆâ€ã€‚å®ƒçš„ &lt;code&gt;Expires&lt;/code&gt;/&lt;code&gt;Max-Age&lt;/code&gt;å†³å®šäº†è¿™ä»½â€œèº«ä»½è¯â€çš„æœ‰æ•ˆæœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµè§ˆå™¨ç¼“å­˜çš„æ—…ç¨‹&lt;/strong&gt;ï¼šæœåŠ¡å™¨é€šè¿‡ &lt;code&gt;Cache-Control&lt;/code&gt;ç­‰å¤´å‘ŠçŸ¥æµè§ˆå™¨é™æ€èµ„æºå¯ä»¥â€œç¦»çº¿â€ä½¿ç”¨å¤šä¹…ã€‚åœ¨æ­¤æœŸé—´ï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨æœ¬åœ°å‰¯æœ¬ï¼Œæ— éœ€ç½‘ç»œè¯·æ±‚ï¼Œæå¤§æå‡åŠ è½½é€Ÿåº¦ã€‚å®ƒçš„è¿‡æœŸæœºåˆ¶æ˜¯ä¸ºäº†å¹³è¡¡åŠ è½½æ€§èƒ½å’Œè·å–æœ€æ–°èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸ºä½•å®¹æ˜“æ··æ·†ä»¥åŠå®ç”¨å»ºè®®"&gt;ğŸ’¡ ä¸ºä½•å®¹æ˜“æ··æ·†ï¼Ÿä»¥åŠå®ç”¨å»ºè®®
&lt;/h3&gt;&lt;p&gt;å°½ç®¡æœºåˆ¶ä¸åŒï¼Œä½†å®ƒä»¬æœ‰æ—¶ä¼šè¢«ä¸€èµ·è®¨è®ºï¼Œä¸»è¦æ˜¯å› ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;éƒ½å—HTTPå¤´æ§åˆ¶&lt;/strong&gt;ï¼šå®ƒä»¬çš„è¡Œä¸ºéƒ½ç”±æœåŠ¡å™¨è¿”å›çš„HTTPå“åº”å¤´å­—æ®µæ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ½æ¶‰åŠâ€œè¿‡æœŸâ€æ¦‚å¿µ&lt;/strong&gt;ï¼šéƒ½ä½¿ç”¨æ—¶é—´æ¥æ§åˆ¶æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ä½œä¸ºå¼€å‘è€…ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦æ··æ·†ç›®çš„&lt;/strong&gt;ï¼šCookie çš„æ ¸å¿ƒæ˜¯ &lt;strong&gt;â€œå¸¦è¿‡å»â€&lt;/strong&gt;ï¼ˆä¼ é€’çŠ¶æ€ä¿¡æ¯ï¼‰ï¼Œè€Œæµè§ˆå™¨ç¼“å­˜çš„æ ¸å¿ƒæ˜¯ &lt;strong&gt;â€œä¸å»æ‹¿â€&lt;/strong&gt;ï¼ˆé¿å…ä¸å¿…è¦çš„è¯·æ±‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨è®¾ç½®&lt;/strong&gt;ï¼šå¯¹äºåŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ä¼šè¯IDï¼‰çš„Cookieï¼ŒåŠ¡å¿…è®¾ç½® &lt;code&gt;HttpOnly&lt;/code&gt;å’Œ &lt;code&gt;Secure&lt;/code&gt;å±æ€§ä»¥å¢å¼ºå®‰å…¨æ€§ã€‚è€Œç¼“å­˜ç­–ç•¥ä¸»è¦å…³æ³¨æ€§èƒ½ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°ç­–ç•¥&lt;/strong&gt;ï¼šå½“ç½‘ç«™é™æ€èµ„æºæ›´æ–°åï¼Œé€šå¸¸éœ€è¦é€šè¿‡æ›´æ”¹æ–‡ä»¶åç§°æˆ–æ·»åŠ ç‰ˆæœ¬å·ç­‰â€œç¼“å­˜ Bustingâ€æŠ€æœ¯æ¥å¼ºåˆ¶æµè§ˆå™¨ä¸‹è½½æ–°èµ„æºï¼Œå› ä¸ºå•çº¯å»¶é•¿ &lt;code&gt;max-age&lt;/code&gt;æ— æ³•ä½¿æ—§ç¼“å­˜ç«‹å³å¤±æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®ä½ å½»åº•åˆ†æ¸…è¿™ä¸¤ä¸ªé‡è¦çš„Webå¼€å‘æ¦‚å¿µã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cookie--session"&gt;cookie &amp;amp; session
&lt;/h2&gt;&lt;p&gt;ç†è§£ Cookie å’Œ Session çš„åŒºåˆ«å¯¹äº Web å¼€å‘è‡³å…³é‡è¦ã€‚å®ƒä»¬ååŒå·¥ä½œï¼Œå…±åŒè§£å†³äº† HTTP åè®®æ— çŠ¶æ€çš„æ ¸å¿ƒé—®é¢˜ï¼Œä½†åœ¨å®ç°æ–¹å¼å’Œé€‚ç”¨åœºæ™¯ä¸Šå„æœ‰ä¾§é‡ã€‚ä¸‹è¡¨ä¸ºä½ æ¸…æ™°æ¢³ç†äº†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Cookie&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Session&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨ç«¯ï¼ˆå¦‚å†…å­˜ã€æ•°æ®åº“ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒä½ï¼Œæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå­˜åœ¨è¢«çªƒå–æˆ–ç¯¡æ”¹çš„é£é™©&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒé«˜ï¼Œæ•æ„Ÿæ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ä»…ä¿å­˜ä¸€ä¸ª Session ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¤§å°é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰ï¼Œé€šå¸¸å•ä¸ª Cookie ä¸è¶…è¿‡ 4KBï¼Œä¸”å¯¹å•ä¸ªåŸŸåçš„ Cookie æ•°é‡ä¹Ÿæœ‰é™åˆ¶&lt;/td&gt;
&lt;td&gt;æ— ç¡¬æ€§é™åˆ¶ï¼Œä½†è¿‡å¤§ä¼šå ç”¨è¾ƒå¤šæœåŠ¡å™¨å†…å­˜ï¼Œå½±å“æ€§èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå³ä½¿å…³é—­æµè§ˆå™¨ä¹Ÿèƒ½æŒä¹…ä¿å­˜ï¼›æœªè®¾ç½®åˆ™éšæµè§ˆå™¨ä¼šè¯ç»“æŸè€Œå¤±æ•ˆ&lt;/td&gt;
&lt;td&gt;é€šå¸¸éšæµè§ˆå™¨å…³é—­ï¼ˆSession Cookie å¤±æ•ˆï¼‰æˆ–ç”¨æˆ·ä¸€æ®µæ—¶é—´ä¸æ´»åŠ¨è€Œå¤±æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨æºå¸¦ï¼Œå ç”¨å¸¦å®½&lt;/td&gt;
&lt;td&gt;æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸å ç”¨å¸¦å®½ï¼Œä½†ä¼šæ¶ˆè€—æœåŠ¡å™¨å†…å­˜èµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»è¦ä¿å­˜å­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;å¯ä»¥å­˜å‚¨å„ç§å¤æ‚çš„æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºã€ä¿å­˜ä¸ªäººåå¥½è®¾ç½®ã€å®ç°â€œè®°ä½æˆ‘â€ç­‰æŒä¹…åŒ–åŠŸèƒ½&lt;/td&gt;
&lt;td&gt;ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€ã€ç»´æŠ¤è´­ç‰©è½¦å†…å®¹ã€å­˜å‚¨æ•æ„Ÿä¿¡æ¯ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶"&gt;ğŸ”§ å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cookie çš„å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨ç”Ÿæˆ&lt;/strong&gt;ï¼šå½“ä½ ç¬¬ä¸€æ¬¡ç™»å½•ç½‘ç«™æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåœ¨ HTTP å“åº”å¤´ä¸­é€šè¿‡ &lt;code&gt;Set-Cookie&lt;/code&gt;æŒ‡ä»¤ï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ª Cookie å‘é€ç»™ä½ çš„æµè§ˆå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯å­˜å‚¨&lt;/strong&gt;ï¼šæµè§ˆå™¨æ¥æ”¶åˆ° Cookie åï¼Œä¼šå°†å…¶ä¿å­˜èµ·æ¥ã€‚ä¿å­˜çš„ä½ç½®å’Œæ—¶é•¿å–å†³äº Cookie çš„ç±»å‹ï¼ˆä¼šè¯ Cookie æˆ–æŒä¹…æ€§ Cookieï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æºå¸¦&lt;/strong&gt;ï¼šæ­¤åï¼Œä½ å¯¹åŒä¸€ç½‘ç«™å‘èµ·çš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œæµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨åœ¨ HTTP è¯·æ±‚å¤´ä¸­é™„ä¸Šç¬¦åˆæ¡ä»¶çš„ Cookieï¼Œå‘é€ç»™æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Session çš„å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»º Session&lt;/strong&gt;ï¼šå½“ä½ é¦–æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ Sessionï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä¸ä¹‹ç»‘å®šçš„ &lt;strong&gt;Session ID&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ é€’ Session ID&lt;/strong&gt;ï¼šè¿™ä¸ª Session ID é€šå¸¸ä¼šé€šè¿‡ä¸€ä¸ªåä¸ºï¼ˆä¾‹å¦‚ï¼‰&lt;code&gt;JSESSIONID&lt;/code&gt;çš„ Cookie å‘é€å¹¶ä¿å­˜åœ¨ä½ çš„æµè§ˆå™¨ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èº«ä»½å‡­è¯&lt;/strong&gt;ï¼šåœ¨ä½ æ¥ä¸‹æ¥çš„æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨æºå¸¦è¿™ä¸ªåŒ…å« Session ID çš„ Cookieã€‚æœåŠ¡å™¨é€šè¿‡è§£æè¿™ä¸ª IDï¼Œå°±èƒ½æ‰¾åˆ°å¯¹åº”ä½ çš„é‚£ä»½ Session æ•°æ®ï¼Œä»è€Œç»´æŒä½ çš„ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦å†…å®¹ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å³ä½¿æµè§ˆå™¨ç¦ç”¨äº† Cookieï¼ŒæœåŠ¡å™¨ä»èƒ½é€šè¿‡ URL é‡å†™ï¼ˆå°† Session ID é™„åŠ åœ¨ç½‘å€å‚æ•°ä¸­ï¼‰ç­‰æ–¹å¼æ¥ç»´æŒä¼šè¯ã€‚&lt;/p&gt;
&lt;h3 id="-å®‰å…¨è€ƒé‡"&gt;ğŸ›¡ï¸ å®‰å…¨è€ƒé‡
&lt;/h3&gt;&lt;p&gt;å®‰å…¨æ€§æ˜¯é€‰æ‹©ä½¿ç”¨ Cookie è¿˜æ˜¯ Session çš„å…³é”®å› ç´ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cookie çš„å®‰å…¨é£é™©&lt;/strong&gt;ï¼šç”±äºæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œä¸»è¦é£é™©åŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰&lt;/strong&gt;ï¼šæ¶æ„è„šæœ¬å¯èƒ½çªƒå– Cookieã€‚å¯é€šè¿‡è®¾ç½® &lt;code&gt;HttpOnly&lt;/code&gt;å±æ€§æ¥é˜²æ­¢ JavaScript è®¿é—®å…³é”® Cookieï¼ˆå¦‚ Session IDï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰&lt;/strong&gt;ï¼šè¯±å¯¼ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥ï¼Œåˆ©ç”¨æµè§ˆå™¨è‡ªåŠ¨æºå¸¦ Cookie çš„æœºåˆ¶è¿›è¡Œéæ³•æ“ä½œã€‚å¯é€šè¿‡è®¾ç½® &lt;code&gt;SameSite&lt;/code&gt;å±æ€§ï¼ˆå¦‚ &lt;code&gt;Strict&lt;/code&gt;æˆ– &lt;code&gt;Lax&lt;/code&gt;ï¼‰æ¥é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œçªƒå¬&lt;/strong&gt;ï¼šåœ¨é HTTPS è¿æ¥ä¸‹ä¼ è¾“çš„ Cookie å¯èƒ½è¢«æˆªè·ã€‚å› æ­¤ï¼Œé‡è¦ Cookie åº”è®¾ç½® &lt;code&gt;Secure&lt;/code&gt;å±æ€§ï¼Œç¡®ä¿ä»…é€šè¿‡ HTTPS åŠ å¯†ä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Session çš„å®‰å…¨ä¼˜åŠ¿ä¸æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼šSession æœ¬èº«æ›´å®‰å…¨ï¼Œå› ä¸ºæ•æ„Ÿæ•°æ®å­˜äºæœåŠ¡å™¨ã€‚ä½†å…¶å®‰å…¨æ ¸å¿ƒåœ¨äºä¿æŠ¤ &lt;strong&gt;Session ID&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Session å›ºå®šæ”»å‡»&lt;/strong&gt;ï¼šæ”»å‡»è€…è¯±ä½¿å—å®³è€…ä½¿ç”¨ä¸€ä¸ªå·²çŸ¥çš„ Session ID ç™»å½•ã€‚é˜²èŒƒæªæ–½æ˜¯åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸåä½¿æ—§çš„ Session ID ç«‹å³å¤±æ•ˆï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Session åŠ«æŒ&lt;/strong&gt;ï¼šå¦‚æœ Session ID è¢«çªƒï¼Œæ”»å‡»è€…å°±èƒ½å†’å……ç”¨æˆ·ã€‚å› æ­¤ï¼Œä½¿ç”¨ HTTPS å’Œä¿æŠ¤ Cookie çš„å®‰å…¨å±æ€§è‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ä¸åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;æ ¹æ®å®ƒä»¬çš„ç‰¹ç‚¹ï¼Œå¯ä»¥è¿™æ ·é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ Cookie çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®°ä½ç™»å½•çŠ¶æ€&lt;/strong&gt;ï¼šç”¨äºâ€œè®°ä½æˆ‘â€åŠŸèƒ½ï¼Œé•¿æœŸä¿å­˜åŠ å¯†åçš„ç™»å½•ä»¤ç‰Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ªæ€§åŒ–è®¾ç½®&lt;/strong&gt;ï¼šä¿å­˜è¯­è¨€ä¸»é¢˜ã€å­—ä½“å¤§å°ç­‰éæ•æ„Ÿçš„ç”¨æˆ·åå¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸ºè·Ÿè¸ª&lt;/strong&gt;ï¼šç”¨äºåŒ¿ååŒ–çš„ç”¨æˆ·è¡Œä¸ºåˆ†ææˆ–å¹¿å‘Šè¿½è¸ªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ Session çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ç™»å½•è®¤è¯&lt;/strong&gt;ï¼šä¿å­˜ç”¨æˆ·çš„ç™»å½•å‡­è¯å’Œæƒé™ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´­ç‰©è½¦&lt;/strong&gt;ï¼šåœ¨ç”¨æˆ·å®Œæˆè´­ä¹°å‰ï¼Œä¸´æ—¶ä¿å­˜è´­ç‰©è½¦ä¸­çš„å•†å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•æ„Ÿä¸´æ—¶æ•°æ®&lt;/strong&gt;ï¼šå¦‚å¤šæ­¥è¡¨å•å¡«å†™è¿‡ç¨‹ä¸­æš‚å­˜çš„ä¸ªäººä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;é€šå¸¸æ˜¯&lt;strong&gt;ç»“åˆä½¿ç”¨ä¸¤è€…&lt;/strong&gt;ï¼šå°†éæ•æ„Ÿã€éœ€è¦æŒä¹…åŒ–çš„ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·ä¸»é¢˜è®¾ç½®ï¼‰å­˜æ”¾åœ¨ Cookie ä¸­ï¼›è€Œå°†æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·IDã€ç™»å½•çŠ¶æ€ï¼‰ä¿å­˜åœ¨ Session é‡Œï¼Œå®¢æˆ·ç«¯åªå­˜å‚¨ä¸€ä¸ªæ— æ³•è¢«è§£å¯†çš„ Session IDã€‚åŒæ—¶ï¼ŒåŠ¡å¿…ä¸º Cookie é…ç½® &lt;code&gt;HttpOnly&lt;/code&gt;ã€&lt;code&gt;Secure&lt;/code&gt;å’Œ &lt;code&gt;SameSite&lt;/code&gt;ç­‰å®‰å…¨å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ Cookie å’Œ Sessionã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¤šæœåŠ¡å™¨é…ç½®-session"&gt;å¤šæœåŠ¡å™¨é…ç½® session
&lt;/h2&gt;&lt;p&gt;åœ¨å¤šæœåŠ¡å™¨é…ç½®ç¯å¢ƒä¸‹ï¼Œ&lt;strong&gt;Sessioné€šå¸¸éœ€è¦åŒæ­¥&lt;/strong&gt;ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·ä¼šè¯çŠ¶æ€åœ¨é›†ç¾¤ä¸­çš„ä¸€è‡´æ€§ï¼Œé¿å…å› è¯·æ±‚è¢«åˆ†å‘åˆ°ä¸åŒæœåŠ¡å™¨è€Œå¯¼è‡´çš„ç™»å½•çŠ¶æ€ä¸¢å¤±ç­‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸»è¦çš„SessionåŒæ­¥æ–¹æ¡ˆåŠå…¶æ ¸å¿ƒç‰¹ç‚¹ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£å’Œå¯¹æ¯”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è§£å†³æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Sessionå¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä¸€å°æœåŠ¡å™¨ä¸Šçš„Sessionæ•°æ®å¹¿æ’­å¤åˆ¶åˆ°é›†ç¾¤ä¸­å…¶ä»–æœåŠ¡å™¨&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œéƒ¨åˆ†WebæœåŠ¡å™¨ï¼ˆå¦‚Tomcatï¼‰æ”¯æŒé…ç½®ï¼›æŸå°æœåŠ¡å™¨å®•æœºä¸å½±å“ç”¨æˆ·ä¼šè¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œå¼€é”€å¤§&lt;/strong&gt;ï¼ŒæœåŠ¡å™¨å¢å¤šæ—¶æ˜“å¼•èµ·å¹¿æ’­é£æš´ï¼›&lt;strong&gt;æ¯ä¸ªæœåŠ¡å™¨éƒ½å­˜å‚¨å…¨éƒ¨Session&lt;/strong&gt;ï¼Œå†…å­˜æ¶ˆè€—éšæœåŠ¡å™¨æ•°é‡å¢åŠ è€Œçº¿æ€§å¢é•¿&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ•°é‡è¾ƒå°‘ï¼ˆå¦‚2-3å°ï¼‰ä¸”ç½‘ç»œæ€§èƒ½è¾ƒå¥½çš„å°å‹é›†ç¾¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Sessionç²˜æ»ï¼ˆSticky Sessionï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡è´Ÿè½½å‡è¡¡å™¨çš„IPå“ˆå¸Œç­‰ç­–ç•¥ï¼Œç¡®ä¿åŒä¸€ç”¨æˆ·è¯·æ±‚å§‹ç»ˆç”±åŒä¸€å°æœåŠ¡å™¨å¤„ç†&lt;/td&gt;
&lt;td&gt;å®ç°ç›¸å¯¹ç®€å•ï¼›æœåŠ¡å™¨æ— éœ€åŒæ­¥Sessionï¼Œ&lt;strong&gt;èŠ‚çœå¸¦å®½å’Œå†…å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼ºä¹å®¹é”™æ€§&lt;/strong&gt;ï¼Œæ‰€æŒ‡æ´¾æœåŠ¡å™¨å®•æœºåˆ™Sessionä¸¢å¤±ï¼›&lt;strong&gt;è´Ÿè½½å¯èƒ½ä¸å‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æ•…éšœè½¬ç§»è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼›æœåŠ¡å™¨æœ¬åœ°çŠ¶æ€å¯å¿«é€Ÿé‡å»º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åç«¯é›†ä¸­å­˜å‚¨&lt;/strong&gt;ï¼ˆå¦‚Redisï¼‰&lt;/td&gt;
&lt;td&gt;å°†Sessionæ•°æ®ç»Ÿä¸€å­˜å‚¨åœ¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚Redisï¼‰æˆ–æ•°æ®åº“ä¸­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§&lt;/strong&gt;ï¼›æœåŠ¡å™¨é‡å¯Sessionä¸ä¸¢å¤±ï¼›é€‚åˆå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;æ¶æ„æ›´å¤æ‚ï¼›&lt;strong&gt;å¢åŠ ä¸€æ¬¡ç½‘ç»œè¯·æ±‚&lt;/strong&gt;ï¼›ä¾èµ–å¤–éƒ¨å­˜å‚¨çš„ç¨³å®šæ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç°ä»£åˆ†å¸ƒå¼åº”ç”¨å’Œå¾®æœåŠ¡æ¶æ„çš„é¦–é€‰æ–¹æ¡ˆ&lt;/strong&gt;ï¼Œå°¤å…¶é€‚ç”¨äºä¸­å¤§å‹é›†ç¾¤&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©sessionåŒæ­¥æ–¹æ¡ˆ"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©SessionåŒæ­¥æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œä¸»è¦çœ‹ä½ çš„åº”ç”¨è§„æ¨¡ã€å¯¹é«˜å¯ç”¨çš„è¦æ±‚ä»¥åŠæŠ€æœ¯æ ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºå°å‹é›†ç¾¤æˆ–åŸå‹å¼€å‘&lt;/strong&gt;ï¼Œå¦‚æœæœåŠ¡å™¨æ•°é‡å°‘ï¼ˆå¦‚2-3å°ï¼‰ï¼Œä¸”ç½‘ç»œçŠ¶å†µè‰¯å¥½ï¼Œ&lt;strong&gt;Sessionå¤åˆ¶&lt;/strong&gt;æˆ–&lt;strong&gt;Sessionç²˜æ»&lt;/strong&gt;æ˜¯ä¸é”™çš„èµ·ç‚¹ï¼Œå› ä¸ºå®ƒä»¬é…ç½®ç®€å•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹äºä¸­å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–å¾®æœåŠ¡æ¶æ„&lt;/strong&gt;ï¼Œ&lt;strong&gt;åŸºäºRedisç­‰åˆ†å¸ƒå¼ç¼“å­˜çš„åç«¯é›†ä¸­å­˜å‚¨æ–¹æ¡ˆ&lt;/strong&gt;æ˜¯æ›´å¯é å’Œå¯æ‰©å±•çš„é€‰æ‹©ã€‚è™½ç„¶å¼•å…¥äº†å¤–éƒ¨ä¾èµ–ï¼Œä½†èƒ½æ›´å¥½åœ°æ”¯æŒæ°´å¹³æ‰©å±•å’Œé«˜å¯ç”¨æ€§ã€‚å¸¸è§çš„å®ç°æ–¹å¼æœ‰&lt;code&gt;Spring Session&lt;/code&gt;é›†æˆRedisã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;ğŸ” æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å®ç°SessionåŒæ­¥æ—¶ï¼Œè¿˜éœ€æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•æ„Ÿä¿¡æ¯å¤„ç†&lt;/strong&gt;ï¼šå°½é‡é¿å…åœ¨Sessionä¸­å­˜å‚¨å¯†ç ç­‰æåº¦æ•æ„Ÿçš„ä¿¡æ¯ã€‚å¦‚æœå¿…é¡»å­˜å‚¨ï¼Œåº”è¿›è¡ŒåŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sessionè¿‡æœŸæ—¶é—´&lt;/strong&gt;ï¼šé›†ä¸­å­˜å‚¨æ—¶ï¼Œæ³¨æ„è®¾ç½®åˆç†çš„Sessionè¿‡æœŸæ—¶é—´ï¼Œå¹¶åœ¨ç¼“å­˜ä¸­é…ç½®ç›¸åº”çš„TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå®‰å…¨æ€§&lt;/strong&gt;ï¼šå¦‚æœSessionæ•°æ®åœ¨æœåŠ¡å™¨å’Œå¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚Redisï¼‰ä¹‹é—´é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œç¡®ä¿ç½‘ç»œç¯å¢ƒå®‰å…¨ï¼Œæˆ–è€ƒè™‘ä½¿ç”¨åŠ å¯†é€šé“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œå†³ç­–å¤šæœåŠ¡å™¨ç¯å¢ƒä¸‹çš„SessionåŒæ­¥é—®é¢˜ã€‚å¦‚æœä½ èƒ½åˆ†äº«æ›´å¤šå…³äºä½ çš„ç³»ç»Ÿè§„æ¨¡æˆ–å…·ä½“ä¸šåŠ¡åœºæ™¯çš„ä¿¡æ¯ï¼Œæˆ–è®¸æˆ‘å¯ä»¥æä¾›æ›´å…·ä½“çš„å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id="linux-æŸ¥çœ‹ç«¯å£"&gt;linux æŸ¥çœ‹ç«¯å£
&lt;/h2&gt;&lt;p&gt;åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ‰å¤šç§å‘½ä»¤å¯ä»¥å¸®åŠ©æ‚¨æŸ¥çœ‹ç«¯å£çš„ä½¿ç”¨æƒ…å†µï¼Œè¿™å¯¹äºç½‘ç»œè°ƒè¯•ã€æœåŠ¡æ’æŸ¥å’Œç³»ç»Ÿå®‰å…¨ç®¡ç†éƒ½éå¸¸é‡è¦ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æœ€å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤å’Œå®ƒä»¬çš„æ ¸å¿ƒç”¨æ³•ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿå¯¹æ¯”å’Œé€‰ç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ss&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç°ä»£é¦–é€‰&lt;/strong&gt;ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ˜¯ &lt;code&gt;netstat&lt;/code&gt;çš„æ›¿ä»£å“ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ss -tuln&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¿«é€ŸæŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;netstat&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»å…¸å·¥å…·&lt;/strong&gt;ï¼Œéå¸¸ç›´è§‚æ˜“æ‡‚ï¼Œä½†åœ¨æ–°ç³»ç»Ÿä¸­å¯èƒ½éœ€è¦å•ç‹¬å®‰è£…ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;netstat -tuln&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¹ æƒ¯ä½¿ç”¨ä¼ ç»Ÿå‘½ä»¤æˆ–ç³»ç»Ÿå·²é¢„è£…æ—¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;lsof&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½å…¨é¢&lt;/strong&gt;ï¼Œä¸ä»…èƒ½çœ‹ç«¯å£ï¼Œè¿˜èƒ½æŸ¥çœ‹æ˜¯å“ªä¸ªè¿›ç¨‹æ‰“å¼€äº†ç‰¹å®šæ–‡ä»¶æˆ–ç«¯å£ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;lsof -i :8080&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç²¾å‡†å®šä½æŸä¸ªç‰¹å®šç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;nmap&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œæ‰«æå™¨&lt;/strong&gt;ï¼Œé€šå¸¸ç”¨äºæ¢æµ‹æœ¬åœ°æˆ–è¿œç¨‹ä¸»æœºä¸Šå¼€æ”¾çš„ç«¯å£ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;nmap -sT 127.0.0.1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®‰å…¨æ‰«æï¼Œæ£€æŸ¥æœ¬æœºæˆ–è¿œç¨‹ä¸»æœºå¼€æ”¾çš„ç«¯å£æœåŠ¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å‘½ä»¤è¯¦è§£ä¸ä½¿ç”¨æŠ€å·§"&gt;ğŸ’¡ å‘½ä»¤è¯¦è§£ä¸ä½¿ç”¨æŠ€å·§
&lt;/h3&gt;&lt;h4 id="1-ä½¿ç”¨"&gt;1. &lt;strong&gt;ä½¿ç”¨ &lt;code&gt;ss&lt;/code&gt;å‘½ä»¤&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ss&lt;/code&gt;(Socket Statistics) æ˜¯å½“å‰æ¨èçš„å·¥å…·ï¼Œå› ä¸ºå®ƒæ¯” &lt;code&gt;netstat&lt;/code&gt;æ›´å¿«é€Ÿã€æ›´é«˜æ•ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ss -tuln
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;ï¼šæ˜¾ç¤º TCP ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-u&lt;/code&gt;ï¼šæ˜¾ç¤º UDP ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt;ï¼šä»…æ˜¾ç¤ºå¤„äºç›‘å¬ (LISTEN) çŠ¶æ€çš„ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n&lt;/code&gt;ï¼šä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºåœ°å€å’Œç«¯å£å·ï¼Œä¸å°è¯•è§£æä¸»æœºåæˆ–æœåŠ¡åï¼Œé€Ÿåº¦æ›´å¿«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾ç‰¹å®šç«¯å£ï¼ˆå¦‚ 80 ç«¯å£ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ss -tuln | grep :80
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ä½¿ç”¨"&gt;2. &lt;strong&gt;ä½¿ç”¨ &lt;code&gt;netstat&lt;/code&gt;å‘½ä»¤&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;netstat&lt;/code&gt;é€æ¸è¢« &lt;code&gt;ss&lt;/code&gt;å–ä»£ï¼Œä½†å…¶è¾“å‡ºæ ¼å¼éå¸¸æ¸…æ™°ï¼Œå¾ˆå¤šç®¡ç†å‘˜ä»ä¹ æƒ¯ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬å®‰è£…&lt;/strong&gt;ï¼šåœ¨ä¸€äº›æœ€æ–°çš„ Linux å‘è¡Œç‰ˆä¸­ï¼Œ&lt;code&gt;netstat&lt;/code&gt;å¯èƒ½æ²¡æœ‰é¢„è£…ï¼Œéœ€è¦å®‰è£… &lt;code&gt;net-tools&lt;/code&gt;åŒ…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu/Debian: &lt;code&gt;sudo apt install net-tools&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CentOS/RHEL: &lt;code&gt;sudo yum install net-tools&lt;/code&gt;æˆ– &lt;code&gt;sudo dnf install net-tools&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ç›‘å¬ç«¯å£&lt;/strong&gt;ï¼šå…¶å‚æ•°ç”¨æ³•ä¸ &lt;code&gt;ss&lt;/code&gt;ç±»ä¼¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;netstat -tuln
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾ç¤ºè¿›ç¨‹åå’ŒPID&lt;/strong&gt;ï¼šåŠ ä¸Š &lt;code&gt;-p&lt;/code&gt;å‚æ•°å¯ä»¥æŸ¥çœ‹æ˜¯å“ªä¸ªè¿›ç¨‹å ç”¨äº†ç«¯å£ï¼ˆé€šå¸¸éœ€è¦ &lt;code&gt;sudo&lt;/code&gt;æƒé™ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo netstat -tulnp
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ä½¿ç”¨"&gt;3. &lt;strong&gt;ä½¿ç”¨ &lt;code&gt;lsof&lt;/code&gt;å‘½ä»¤&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;lsof&lt;/code&gt;(List Open Files) çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½éå¸¸ç²¾ç¡®åœ°å®šä½é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ç‰¹å®šç«¯å£ï¼ˆå¦‚ 3306ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç›´æ¥çš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;lsof -i :3306
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;lsof -i
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰åè®®è¿‡æ»¤&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼ŒåªæŸ¥çœ‹æ‰€æœ‰ TCP è¿æ¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;lsof -i tcp
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-ä½¿ç”¨"&gt;4. &lt;strong&gt;ä½¿ç”¨ &lt;code&gt;nmap&lt;/code&gt;å‘½ä»¤&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;nmap&lt;/code&gt;é€šå¸¸ç”¨äºå†…ç½‘æˆ–å®‰å…¨æ‰«æï¼Œä½†ä¹Ÿå¯ä»¥ç”¨æ¥æ£€æŸ¥æœ¬æœºå¼€æ”¾äº†å“ªäº›ç«¯å£ï¼Œæä¾›ä¸€ä¸ªâ€œå¤–éƒ¨è§†è§’â€çš„è§†å›¾ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰«ææœ¬æœºç«¯å£&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;nmap -sT 127.0.0.1
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨åœºæ™¯ä¸¾ä¾‹"&gt;ğŸ› ï¸ å®ç”¨åœºæ™¯ä¸¾ä¾‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜ï¼šWebæœåŠ¡å™¨ï¼ˆNginx/Apacheï¼‰å¯åŠ¨å¤±è´¥ï¼Œæç¤º80ç«¯å£è¢«å ç”¨ã€‚&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;sudo lsof -i :80&lt;/code&gt;æˆ– &lt;code&gt;sudo ss -tulnp | grep :80&lt;/code&gt;ï¼Œç›´æ¥æ‰¾å‡ºæ­£åœ¨ç›‘å¬80ç«¯å£çš„è¿›ç¨‹åç§°å’ŒPIDï¼Œç„¶åå†³å®šæ˜¯åœæ­¢è¯¥è¿›ç¨‹è¿˜æ˜¯ä¿®æ”¹WebæœåŠ¡å™¨é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜ï¼šæƒ³ç¡®è®¤MySQLæ•°æ®åº“æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨å¹¶åœ¨ç›‘å¬é»˜è®¤ç«¯å£ã€‚&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šè¿è¡Œ &lt;code&gt;ss -tuln | grep :3306&lt;/code&gt;ã€‚å¦‚æœè¾“å‡ºæœ‰æ˜¾ç¤º &lt;code&gt;LISTEN&lt;/code&gt;çŠ¶æ€çš„è¡Œï¼Œåˆ™è¯´æ˜æœåŠ¡æ­£åœ¨è¿è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜ï¼šæ€€ç–‘ç³»ç»Ÿæœ‰å¯ç–‘è¿›ç¨‹å¼€æ”¾äº†åé—¨ç«¯å£ã€‚&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;sudo netstat -tunp&lt;/code&gt;æˆ– &lt;code&gt;sudo ss -tunp&lt;/code&gt;æŸ¥çœ‹æ‰€æœ‰æ´»è·ƒçš„ç½‘ç»œè¿æ¥ï¼ˆåŒ…æ‹¬å·²å»ºç«‹çš„è¿æ¥ï¼‰ï¼Œå…³æ³¨ä¸ç†Ÿæ‚‰çš„è¿›ç¨‹å’Œéå¸¸ç”¨ç«¯å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒé™é—®é¢˜&lt;/strong&gt;ï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„ç«¯å£ä¿¡æ¯é€šå¸¸éœ€è¦ &lt;code&gt;root&lt;/code&gt;æƒé™ã€‚åœ¨å‘½ä»¤å‰åŠ  &lt;code&gt;sudo&lt;/code&gt;å¯ä»¥é¿å…ä¿¡æ¯æ˜¾ç¤ºä¸å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘½ä»¤é€‰æ‹©&lt;/strong&gt;ï¼šå¯¹äºæ—¥å¸¸å¿«é€Ÿæ£€æŸ¥ï¼Œ&lt;strong&gt;&lt;code&gt;ss&lt;/code&gt;æ˜¯é¦–é€‰&lt;/strong&gt;ã€‚å½“éœ€è¦ç²¾ç¡®æŸ¥æ‰¾æŸä¸ªç«¯å£è¢«è°å ç”¨æ—¶ï¼Œ&lt;strong&gt;&lt;code&gt;lsof -i :ç«¯å£å·&lt;/code&gt;æœ€ç›´æ¥&lt;/strong&gt;ã€‚è€Œ &lt;code&gt;nmap&lt;/code&gt;æ›´é€‚åˆç«¯å£æ‰«æå’Œå®‰å…¨å®¡è®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©æ‚¨ç†Ÿç»ƒåœ°åœ¨ Linux ä¸­æŸ¥çœ‹å’Œç®¡ç†ç«¯å£ï¼å¦‚æœæ‚¨åœ¨å®è·µè¿‡ç¨‹ä¸­é‡åˆ°å…·ä½“é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="ç´¢å¼•ä¸‹æ¨"&gt;ç´¢å¼•ä¸‹æ¨
&lt;/h2&gt;&lt;p&gt;ç´¢å¼•ä¸‹æ¨æ˜¯MySQLä¸­ä¸€é¡¹é‡è¦çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒèƒ½æ˜¾è‘—å‡å°‘æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„å›è¡¨æ¬¡æ•°ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£æå®ƒçš„å·¥ä½œåŸç†ã€ä½¿ç”¨æ¡ä»¶ã€å¦‚ä½•éªŒè¯å…¶æ•ˆæœï¼Œå¹¶å¯¹æ¯”å…¶ä¸ç›¸å…³æŠ€æœ¯çš„å¼‚åŒã€‚&lt;/p&gt;
&lt;h3 id="-ç´¢å¼•ä¸‹æ¨æ˜¯ä»€ä¹ˆ"&gt;ğŸ” ç´¢å¼•ä¸‹æ¨æ˜¯ä»€ä¹ˆ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ç´¢å¼•ä¸‹æ¨&lt;/strong&gt;çš„è‹±æ–‡å…¨ç§°æ˜¯ &lt;strong&gt;Index Condition Pushdown&lt;/strong&gt;ï¼Œé€šå¸¸ç®€ç§°ä¸º &lt;strong&gt;ICP&lt;/strong&gt;ã€‚å®ƒæ˜¯ &lt;strong&gt;MySQL 5.6&lt;/strong&gt; ç‰ˆæœ¬å¼•å…¥çš„ä¸€é¡¹å…³é”®ä¼˜åŒ–ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç†è§£ICPä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£MySQLæœåŠ¡å™¨çš„ä¸¤å±‚æ¶æ„ï¼š&lt;strong&gt;æœåŠ¡å±‚&lt;/strong&gt;ï¼ˆè´Ÿè´£SQLè§£æã€ä¼˜åŒ–ç­‰ï¼‰å’Œ&lt;strong&gt;å­˜å‚¨å¼•æ“å±‚&lt;/strong&gt;ï¼ˆå¦‚InnoDBï¼Œè´Ÿè´£æ•°æ®å­˜å‚¨å’Œæ£€ç´¢ï¼‰ã€‚ç®€å•æ¥è¯´ï¼Œç´¢å¼•ä¸‹æ¨çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯&lt;strong&gt;å°†éƒ¨åˆ†åŸæœ¬ç”±æœåŠ¡å±‚è¿›è¡Œçš„æ¡ä»¶è¿‡æ»¤æ“ä½œâ€œä¸‹æ¨â€åˆ°å­˜å‚¨å¼•æ“å±‚å»æ‰§è¡Œ&lt;/strong&gt;ã€‚è¿™æ ·ï¼Œå­˜å‚¨å¼•æ“åœ¨é€šè¿‡ç´¢å¼•æ‰¾åˆ°æ•°æ®åï¼Œå¯ä»¥ç«‹å³åˆ©ç”¨ç´¢å¼•ä¸­çš„åˆ—ä¿¡æ¯è¿›è¡Œåˆæ­¥è¿‡æ»¤ï¼Œåªå°†çœŸæ­£å¯èƒ½æ»¡è¶³æ¡ä»¶çš„è®°å½•è¿”å›ç»™æœåŠ¡å±‚ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„å›è¡¨æ“ä½œï¼ˆå³æ ¹æ®ç´¢å¼•ä¸»é”®å›ä¸»é”®ç´¢å¼•æ ‘æŸ¥æ‰¾å®Œæ•´æ•°æ®è¡Œçš„è¿‡ç¨‹ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œåŸç†æœ‰æ— icpçš„å¯¹æ¯”"&gt;âš™ï¸ å·¥ä½œåŸç†ï¼šæœ‰æ— ICPçš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä¸€ä¸ªå…·ä½“ä¾‹å­èƒ½æ›´ç›´è§‚åœ°ç†è§£å…¶å·¥ä½œæµç¨‹ã€‚å‡è®¾æœ‰ä¸€å¼ ç”¨æˆ·è¡¨ &lt;code&gt;user&lt;/code&gt;ï¼Œå…¶ä¸Šæœ‰ä¸€ä¸ªè”åˆç´¢å¼• &lt;code&gt;(name, age)&lt;/code&gt;ã€‚ç°åœ¨è¦æ‰§è¡Œå¦‚ä¸‹æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM user WHERE name LIKE &amp;#39;å¼ %&amp;#39; AND age = 10;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨æ²¡æœ‰ç´¢å¼•ä¸‹æ¨å’Œå¯ç”¨ç´¢å¼•ä¸‹æ¨çš„æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢è¿‡ç¨‹æˆªç„¶ä¸åŒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŸ¥è¯¢æ­¥éª¤&lt;/th&gt;
&lt;th&gt;æ— ç´¢å¼•ä¸‹æ¨ (MySQL 5.6ä¹‹å‰)&lt;/th&gt;
&lt;th&gt;å¯ç”¨ç´¢å¼•ä¸‹æ¨ (MySQL 5.6+)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;1. å­˜å‚¨å¼•æ“ç´¢å¼•æ‰«æ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨è”åˆç´¢å¼•æœ€å·¦å‰ç¼€è§„åˆ™ï¼ŒæŸ¥æ‰¾ &lt;code&gt;name LIKE 'å¼ %'&lt;/code&gt;çš„æ‰€æœ‰è®°å½•ï¼Œè·å–ä¸»é”®IDã€‚&lt;/td&gt;
&lt;td&gt;åŒæ ·æŸ¥æ‰¾ &lt;code&gt;name LIKE 'å¼ %'&lt;/code&gt;çš„æ‰€æœ‰è®°å½•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2. æ¡ä»¶è¿‡æ»¤æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç«‹å³å›è¡¨&lt;/strong&gt;ã€‚å¯¹äºæ­¥éª¤1æ‰¾åˆ°çš„æ¯ä¸€ä¸ªä¸»é”®IDï¼Œéƒ½è¿›è¡Œä¸€æ¬¡å›è¡¨æ“ä½œï¼Œè¯»å–å®Œæ•´è¡Œè®°å½•ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…ˆè¿‡æ»¤ï¼Œå†å›è¡¨&lt;/strong&gt;ã€‚å­˜å‚¨å¼•æ“ä¼š&lt;strong&gt;ç›´æ¥åˆ©ç”¨è”åˆç´¢å¼•ä¸­åŒ…å«çš„ &lt;code&gt;age&lt;/code&gt;åˆ—ä¿¡æ¯&lt;/strong&gt;ï¼Œåœ¨ç´¢å¼•å±‚å°±å¯¹ &lt;code&gt;age = 10&lt;/code&gt;è¿™ä¸ªæ¡ä»¶è¿›è¡Œåˆ¤æ–­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;3. æ•°æ®è¿”å›ä¸æœåŠ¡å±‚æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å¼•æ“å°†å›è¡¨å¾—åˆ°çš„å®Œæ•´è¡Œè®°å½•è¿”å›ç»™&lt;strong&gt;æœåŠ¡å±‚&lt;/strong&gt;ã€‚æœåŠ¡å±‚å†å¯¹æ•°æ®è¿›è¡Œ &lt;code&gt;age = 10&lt;/code&gt;çš„è¿‡æ»¤ã€‚&lt;/td&gt;
&lt;td&gt;åªæœ‰æ»¡è¶³ &lt;code&gt;age = 10&lt;/code&gt;æ¡ä»¶çš„ç´¢å¼•è®°å½•ï¼Œæ‰ä¼šæ‰§è¡Œå›è¡¨æ“ä½œï¼Œè·å–å®Œæ•´è¡Œè®°å½•åè¿”å›ç»™æœåŠ¡å±‚ã€‚æœåŠ¡å±‚åªéœ€è¿›è¡Œåç»­å…¶ä»–æ¡ä»¶çš„åˆ¤æ–­ï¼ˆå¦‚æœSQLä¸­è¿˜æœ‰çš„è¯ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›è¡¨æ¬¡æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰æ»¡è¶³ &lt;code&gt;name LIKE 'å¼ %'&lt;/code&gt;çš„è®°å½•éƒ½éœ€è¦å›è¡¨ï¼Œ&lt;strong&gt;æ¬¡æ•°å¤š&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ä»…æ»¡è¶³ &lt;code&gt;name LIKE 'å¼ %'&lt;/code&gt;&lt;strong&gt;ä¸”&lt;/strong&gt; &lt;code&gt;age = 10&lt;/code&gt;çš„è®°å½•éœ€è¦å›è¡¨ï¼Œ&lt;strong&gt;æ¬¡æ•°æ˜¾è‘—å‡å°‘&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸é™åˆ¶"&gt;âœ… é€‚ç”¨åœºæ™¯ä¸é™åˆ¶
&lt;/h3&gt;&lt;p&gt;äº†è§£ICPçš„é€‚ç”¨åœºæ™¯å’Œé™åˆ¶ï¼Œèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è®¾è®¡ç´¢å¼•å’Œç¼–å†™SQLã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒé€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è”åˆç´¢å¼•æŸ¥è¯¢&lt;/strong&gt;ï¼šè¿™æ˜¯ICPå‘æŒ¥ä½œç”¨çš„å…¸å‹åœºæ™¯ã€‚å½“æŸ¥è¯¢æ¡ä»¶åŒ…å«äº†è”åˆç´¢å¼•çš„å‰ç¼€åˆ—ï¼ˆå¦‚ &lt;code&gt;name LIKE 'å¼ %'&lt;/code&gt;ï¼‰ä»¥åŠåç»­çš„ç´¢å¼•åˆ—ï¼ˆå¦‚ &lt;code&gt;age = 10&lt;/code&gt;ï¼‰æ—¶ï¼ŒICPå¯ä»¥åˆ©ç”¨åç»­åˆ—è¿›è¡Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒƒå›´æŸ¥è¯¢åçš„è¿‡æ»¤&lt;/strong&gt;ï¼šå³ä½¿è”åˆç´¢å¼•ä¸­çš„æŸä¸€åˆ—ä½¿ç”¨äº†èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;b &amp;gt; 100&lt;/code&gt;ï¼‰ï¼Œå…¶åçš„ç´¢å¼•åˆ—ä»ç„¶å¯ä»¥é€šè¿‡ICPè¿›è¡Œè¿‡æ»¤ã€‚ä¾‹å¦‚ç´¢å¼• &lt;code&gt;(a, b, c)&lt;/code&gt;ï¼ŒæŸ¥è¯¢æ¡ä»¶ &lt;code&gt;a=1 AND b&amp;gt;100 AND c='ok'&lt;/code&gt;ï¼ŒICPå¯ä»¥åœ¨ç´¢å¼•å±‚åº”ç”¨ &lt;code&gt;c='ok'&lt;/code&gt;çš„è¿‡æ»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¦é™åˆ¶æ¡ä»¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»…é€‚ç”¨äºäºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰&lt;/strong&gt;ï¼šICPçš„ç›®çš„æ˜¯å‡å°‘å›è¡¨ï¼Œè€ŒInnoDBçš„èšç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰çš„å¶å­èŠ‚ç‚¹ç›´æ¥å­˜å‚¨äº†æ•°æ®è¡Œï¼Œä¸å­˜åœ¨å›è¡¨çš„æ¦‚å¿µï¼Œå› æ­¤ICPå¯¹èšç°‡ç´¢å¼•æ— æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨äºç‰¹å®šè®¿é—®æ–¹æ³•&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;range&lt;/code&gt;ã€&lt;code&gt;ref&lt;/code&gt;ã€&lt;code&gt;eq_ref&lt;/code&gt;ã€&lt;code&gt;ref_or_null&lt;/code&gt;ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶ä¸èƒ½åŒ…å«å­æŸ¥è¯¢æˆ–å­˜å‚¨å‡½æ•°&lt;/strong&gt;ï¼šå­˜å‚¨å¼•æ“æ— æ³•å¤„ç†è¿™ç±»å¤æ‚çš„æ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿç”Ÿæˆåˆ—ä¸Šçš„äºŒçº§ç´¢å¼•ä¸æ”¯æŒICP&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•éªŒè¯icpç”Ÿæ•ˆ"&gt;ğŸ”¬ å¦‚ä½•éªŒè¯ICPç”Ÿæ•ˆ
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹SQLçš„&lt;strong&gt;æ‰§è¡Œè®¡åˆ’&lt;/strong&gt;æ¥ç¡®è®¤æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ä¸‹æ¨ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤åˆ†æä½ çš„SQLè¯­å¥ï¼Œå¦‚æœè¾“å‡ºç»“æœçš„ &lt;strong&gt;&lt;code&gt;Extra&lt;/code&gt;åˆ—ä¸­å‡ºç°äº† &lt;code&gt;Using index condition&lt;/code&gt;&lt;/strong&gt;ï¼Œå°±è¡¨æ˜è¯¥æŸ¥è¯¢å·²ç»ä½¿ç”¨äº†ç´¢å¼•ä¸‹æ¨ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;EXPLAIN SELECT * FROM user WHERE name LIKE &amp;#39;å¼ %&amp;#39; AND age = 10;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡è®¾ç½®ç³»ç»Ÿå‚æ•° &lt;code&gt;optimizer_switch&lt;/code&gt;æ¥å¼€å¯æˆ–å…³é—­ICPåŠŸèƒ½ï¼Œå¹¶é€šè¿‡æ¯”è¾ƒ &lt;code&gt;Handler_read_next&lt;/code&gt;ç­‰çŠ¶æ€å˜é‡çš„å˜åŒ–æ¥è§‚å¯Ÿå›è¡¨æ¬¡æ•°çš„å·®å¼‚ï¼Œä»è€Œç›´è§‚æ„Ÿå—ICPå¸¦æ¥çš„æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;h3 id="-ç´¢å¼•ä¸‹æ¨-vs-ç›¸å…³æŠ€æœ¯"&gt;âš–ï¸ ç´¢å¼•ä¸‹æ¨ vs. ç›¸å…³æŠ€æœ¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ä¸‹æ¨ vs. è¦†ç›–ç´¢å¼•&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›®æ ‡ä¸åŒ&lt;/strong&gt;ï¼šä¸¤è€…éƒ½æ—¨åœ¨æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œä½†è·¯å¾„ä¸åŒã€‚&lt;strong&gt;è¦†ç›–ç´¢å¼•&lt;/strong&gt;çš„ç›®æ ‡æ˜¯&lt;strong&gt;é¿å…å›è¡¨&lt;/strong&gt;ï¼Œå¦‚æœæŸ¥è¯¢çš„å­—æ®µå…¨éƒ¨åŒ…å«åœ¨æŸä¸ªç´¢å¼•ä¸­ï¼Œåˆ™æ— éœ€å›è¡¨ï¼Œæ•ˆç‡æœ€é«˜ã€‚&lt;strong&gt;ç´¢å¼•ä¸‹æ¨&lt;/strong&gt;çš„ç›®æ ‡æ˜¯&lt;strong&gt;å‡å°‘å›è¡¨æ¬¡æ•°&lt;/strong&gt;ï¼Œå®ƒå¹¶ä¸èƒ½é¿å…å›è¡¨ï¼Œè€Œæ˜¯åœ¨å›è¡¨å‰è¿›è¡Œè¿‡æ»¤ï¼Œå±äºâ€œç²¾æ‰“ç»†ç®—â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§&lt;/strong&gt;ï¼šå¦‚æœèƒ½å¤Ÿé€šè¿‡åˆ›å»ºåˆé€‚çš„è¦†ç›–ç´¢å¼•æ¥é¿å…å›è¡¨ï¼Œå…¶æ€§èƒ½é€šå¸¸ä¼˜äºç´¢å¼•ä¸‹æ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ä¸‹æ¨ vs. ç´¢å¼•åˆå¹¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³ä¸åŒé—®é¢˜&lt;/strong&gt;ï¼š&lt;strong&gt;ç´¢å¼•åˆå¹¶&lt;/strong&gt;å…è®¸æŸ¥è¯¢åŒæ—¶ä½¿ç”¨å¤šä¸ª&lt;strong&gt;å•åˆ—ç´¢å¼•&lt;/strong&gt;ï¼Œç„¶åå¯¹ç»“æœè¿›è¡Œäº¤é›†ã€å¹¶é›†ç­‰æ“ä½œã€‚è€Œ&lt;strong&gt;ç´¢å¼•ä¸‹æ¨&lt;/strong&gt;ä¸»è¦é’ˆå¯¹&lt;strong&gt;è”åˆç´¢å¼•&lt;/strong&gt;çš„æŸ¥è¯¢ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQLç‰ˆæœ¬&lt;/strong&gt;ï¼šç´¢å¼•åˆå¹¶ä»5.1ç‰ˆæœ¬å¼€å§‹æ”¯æŒï¼Œç´¢å¼•ä¸‹æ¨åˆ™æ˜¯5.6å¼•å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-14"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç´¢å¼•ä¸‹æ¨æ˜¯MySQLä¼˜åŒ–å™¨æä¾›çš„ä¸€é¡¹éå¸¸æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äº&lt;strong&gt;å°†éƒ¨åˆ†è¿‡æ»¤æ¡ä»¶ä»æœåŠ¡å±‚ä¸‹æ¨åˆ°å­˜å‚¨å¼•æ“å±‚æ‰§è¡Œï¼Œåˆ©ç”¨ç´¢å¼•ä¸­çš„ä¿¡æ¯æå‰è¿‡æ»¤æ•°æ®ï¼Œä»è€Œæ˜¾è‘—å‡å°‘å›è¡¨æ¬¡æ•°ï¼Œé™ä½I/Oå¼€é”€ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;ã€‚åœ¨è®¾è®¡ç´¢å¼•å’Œç¼–å†™SQLæ—¶ï¼Œç»“åˆè”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œå……åˆ†åˆ©ç”¨ç´¢å¼•ä¸‹æ¨ç‰¹æ€§ï¼Œèƒ½å¤Ÿè®©ä½ çš„æ•°æ®åº“æŸ¥è¯¢æ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ å®Œå…¨ç†è§£ç´¢å¼•ä¸‹æ¨ã€‚å¦‚æœä½ æœ‰å…·ä½“çš„è¡¨ç»“æ„å’ŒæŸ¥è¯¢è¯­å¥ï¼Œæˆ‘å¯ä»¥å¸®ä½ è¿›ä¸€æ­¥åˆ†ææ˜¯å¦å¯ä»¥åˆ©ç”¨è¿™ä¸€ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id="lockinterruptibly"&gt;lockInterruptibly
&lt;/h2&gt;&lt;p&gt;åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œ&lt;code&gt;lockInterruptibly()&lt;/code&gt;æ˜¯ &lt;code&gt;Lock&lt;/code&gt;æ¥å£æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå…è®¸çº¿ç¨‹åœ¨ç­‰å¾…è·å–é”çš„è¿‡ç¨‹ä¸­å“åº”ä¸­æ–­è¯·æ±‚ã€‚è¿™ä¸æ™®é€šçš„ &lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•åœ¨å¤„ç†ä¸­æ–­çš„æ–¹å¼ä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;lock()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;lockInterruptibly()&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŒºåˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å“åº”ä¸­æ–­çš„ç­‰å¾…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯å“åº”ä¸­æ–­çš„ç­‰å¾…&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹ä¸­æ–­çš„å“åº”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿½ç•¥ä¸­æ–­ï¼Œç»§ç»­ç­‰å¾…ï¼Œä»…åœ¨æˆåŠŸè·å–é”å&lt;strong&gt;è®¾ç½®ä¸­æ–­æ ‡å¿—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç«‹å³æŠ›å‡º &lt;code&gt;InterruptedException&lt;/code&gt;ï¼Œ&lt;strong&gt;åœæ­¢ç­‰å¾…&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼‚å¸¸å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸éœ€è¦å¤„ç†ä¸­æ–­å¼‚å¸¸&lt;/td&gt;
&lt;td&gt;å¿…é¡»æ•è·æˆ–å£°æ˜æŠ›å‡º &lt;code&gt;InterruptedException&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…é¡»ç¡®ä¿è·å–é”ï¼Œä¸ä»‹æ„ç­‰å¾…æ—¶é—´&lt;/td&gt;
&lt;td&gt;éœ€è¦æ”¯æŒä»»åŠ¡å–æ¶ˆã€è¶…æ—¶æ§åˆ¶æˆ–æé«˜ç³»ç»Ÿå“åº”æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åº•å±‚åŸç†ç®€æ"&gt;ğŸ”„ åº•å±‚åŸç†ç®€æ
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œè¿™ç§è¡Œä¸ºå·®å¼‚åœ¨æºç å±‚é¢æœ‰æ¸…æ™°çš„ä½“ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•å†…éƒ¨åœ¨è·å–é”å¤±è´¥åï¼Œä¼šè¿›å…¥ä¸€ä¸ªå¾ªç¯ä¸­ä¸æ–­å°è¯•ã€‚å³ä½¿çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€è¢«è®¾ç½®ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œå®ƒä¹Ÿåªæ˜¯è®°å½•ä¸‹è¿™ä¸ªçŠ¶æ€ï¼Œç„¶åç»§ç»­å°è¯•è·å–é”ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚åœ¨æˆåŠŸè·å–é”ä¹‹åï¼Œå®ƒæ‰ä¼šè¡¥ä¸Šä¸­æ–­å“åº”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lockInterruptibly()&lt;/code&gt;æ–¹æ³•åœ¨æ£€æµ‹åˆ°çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¸º &lt;code&gt;true&lt;/code&gt;æ—¶ï¼Œæˆ–åœ¨ç­‰å¾…é”çš„è¿‡ç¨‹ä¸­è¢«å…¶ä»–çº¿ç¨‹ä¸­æ–­æ—¶ï¼Œä¼š&lt;strong&gt;ç«‹å³æŠ›å‡º &lt;code&gt;InterruptedException&lt;/code&gt;&lt;/strong&gt; å¼‚å¸¸ï¼Œä»è€Œè·³å‡ºç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨åœºæ™¯ä¸å»ºè®®"&gt;ğŸ’¡ ä½¿ç”¨åœºæ™¯ä¸å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ &lt;code&gt;lock()&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä½ çš„ä»»åŠ¡&lt;strong&gt;å¿…é¡»æ‰§è¡Œ&lt;/strong&gt;ï¼Œä¸”è·å–é”æ˜¯å…³é”®å‰æï¼Œä¸å¸Œæœ›è¢«æ„å¤–ä¸­æ–­æ‰“æ‰°æ—¶ã€‚ä¾‹å¦‚ï¼Œä¸€äº›å…³é”®çš„æ•°æ®ç»“æ„æ›´æ–°æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ &lt;code&gt;lockInterruptibly()&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä½ çš„ä»»åŠ¡&lt;strong&gt;å¯èƒ½éœ€è¦å–æ¶ˆ&lt;/strong&gt;ï¼Œæˆ–è€…ä¸å¸Œæœ›çº¿ç¨‹é•¿æ—¶é—´æ— æœ›åœ°ç­‰å¾…é”ï¼Œä»¥æå‡ç¨‹åºçš„æ•´ä½“å“åº”æ€§å’Œå¯æ§æ€§æ—¶ã€‚ä¾‹å¦‚ï¼Œå¤„ç†ç”¨æˆ·å‘èµ·çš„å–æ¶ˆæ“ä½œï¼Œæˆ–æ˜¯åœ¨æ‹¥æœ‰å¤šä¸ªèµ„æºç«äº‰æ¿€çƒˆã€å®¹æ˜“å‘ç”Ÿé•¿æ—¶é—´ç­‰å¾…çš„ç³»ç»Ÿé‡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;lockInterruptibly()&lt;/code&gt;æ—¶ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«ç•™å¿ƒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŠ¡å¿…é‡Šæ”¾é”&lt;/strong&gt;ï¼šå’Œ &lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•ä¸€æ ·ï¼Œé€šè¿‡ &lt;code&gt;lockInterruptibly()&lt;/code&gt;è·å–é”åï¼Œå¿…é¡»å°† &lt;code&gt;unlock()&lt;/code&gt;æ“ä½œæ”¾åœ¨ &lt;code&gt;finally&lt;/code&gt;ä»£ç å—ä¸­ï¼Œä»¥ç¡®ä¿é”ä¸€å®šèƒ½è¢«é‡Šæ”¾ï¼Œé¿å…æ­»é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­£ç¡®å¤„ç†ä¸­æ–­å¼‚å¸¸&lt;/strong&gt;ï¼šæ•è·åˆ° &lt;code&gt;InterruptedException&lt;/code&gt;åï¼Œåº”æ ¹æ®å®é™…æƒ…å†µå†³å®šæ˜¯å½»åº•ç»ˆæ­¢ä»»åŠ¡ï¼Œè¿˜æ˜¯æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚æœ‰æ—¶ï¼Œä¸ºäº†ä¸æ©ç›–ä¸­æ–­äº‹å®ï¼Œåœ¨æ•è·å¼‚å¸¸åå†æ¬¡è°ƒç”¨ &lt;code&gt;Thread.currentThread().interrupt()&lt;/code&gt;æ¥æ¢å¤ä¸­æ–­çŠ¶æ€æ˜¯ä¸€ä¸ªå¥½çš„å®è·µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ &lt;code&gt;lockInterruptibly()&lt;/code&gt;ã€‚å¦‚æœä½ æœ‰å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Kafka 2</title><link>https://dyhes.github.io/p/nowcoderkafka-2/</link><pubDate>Thu, 09 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderkafka-2/</guid><description>&lt;h2 id="uncleanleaderelectionenable"&gt;unclean.leader.election.enable
&lt;/h2&gt;&lt;p&gt;ç†è§£ Kafka çš„ &lt;code&gt;unclean.leader.election.enable&lt;/code&gt;å‚æ•°å¯¹äºæ„å»ºç¨³å®šå¯é çš„æ¶ˆæ¯ç³»ç»Ÿè‡³å…³é‡è¦ã€‚è¿™ä¸ªå‚æ•°æ¶‰åŠåˆ†å¸ƒå¼ç³»ç»Ÿæ ¸å¿ƒçš„&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;å¯ç”¨æ€§&lt;/strong&gt;çš„æƒè¡¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸ªå‚æ•°åœ¨ä¸åŒè®¾ç½®ä¸‹çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;unclean.leader.election.enable = true&lt;/code&gt;(å…è®¸)&lt;/th&gt;
&lt;th&gt;&lt;code&gt;unclean.leader.election.enable = false&lt;/code&gt;(ç¦æ­¢)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ç”¨æ€§ä¼˜å…ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§ä¼˜å…ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‰ä¸¾èµ„æ ¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…è®¸é ISR é›†åˆä¸­çš„å‰¯æœ¬ï¼ˆä¸åŒæ­¥å‰¯æœ¬ï¼‰å‚ä¸ Leader é€‰ä¸¾&lt;/td&gt;
&lt;td&gt;åªå…è®¸ ISR é›†åˆä¸­çš„å‰¯æœ¬ï¼ˆåŒæ­¥å‰¯æœ¬ï¼‰å‚ä¸ Leader é€‰ä¸¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æç«¯åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“ ISR åˆ—è¡¨ä¸ºç©ºæ—¶ï¼Œä»å¯é€‰ä¸¾å‡ºæ–° Leaderï¼Œåˆ†åŒºæ¢å¤æœåŠ¡&lt;/td&gt;
&lt;td&gt;å½“ ISR åˆ—è¡¨ä¸ºç©ºæ—¶ï¼Œæ— æ³•é€‰ä¸¾å‡ºæ–° Leaderï¼Œåˆ†åŒºä¸å¯ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½ä¸¢å¤±æ•°æ®&lt;/strong&gt;ï¼ˆå› ä¸ºæ–° Leader å¯èƒ½ç¼ºå°‘è€ Leader å·²ç¡®è®¤çš„æ¶ˆæ¯ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼ˆä¸ä¼šå› é€‰ä¸¾è€Œä¸¢å¤±å·²æäº¤çš„æ¶ˆæ¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯æœåŠ¡å¯ç”¨æ€§&lt;/strong&gt;ï¼ˆåˆ†åŒºä¸ä¼šå› æ— åŒæ­¥å‰¯æœ¬è€Œåœæ­¢æœåŠ¡ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½æœåŠ¡ä¸­æ–­&lt;/strong&gt;ï¼ˆåˆ†åŒºåœ¨æ— åŒæ­¥å‰¯æœ¬æ—¶ä¼šä¸å¯ç”¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CAP ä¾§é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå‘ &lt;strong&gt;AP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå‘ &lt;strong&gt;CP&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒå»ºè®®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä¸å»ºè®®å¼€å¯ï¼Œé™¤éä¸šåŠ¡å¯æ¥å—æ•°æ®ä¸¢å¤±ä¸”å¿…é¡»ä¿è¯å†™å…¥å¯ç”¨æ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºçƒˆå»ºè®®è®¾ç½®ä¸º false&lt;/strong&gt;ï¼Œä»¥ä¿éšœæ•°æ®ä¸€è‡´æ€§ä¸ºæ ¸å¿ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å‚æ•°å·¥ä½œæœºåˆ¶"&gt;ğŸ” å‚æ•°å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;è¦æ·±å…¥ç†è§£è¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kafka å‰¯æœ¬è§’è‰²&lt;/strong&gt;ï¼šKafka åˆ†åŒºçš„å‰¯æœ¬åˆ†ä¸º &lt;strong&gt;Leader&lt;/strong&gt; å’Œ &lt;strong&gt;Follower&lt;/strong&gt;ã€‚æ‰€æœ‰è¯»å†™è¯·æ±‚éƒ½ç”± Leader å¤„ç†ï¼ŒFollower çš„ä»»åŠ¡æ˜¯å¼‚æ­¥åœ°ä» Leader æ‹‰å–æ•°æ®ï¼Œä¿æŒä¸ Leader çš„åŒæ­¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ISR é›†åˆ&lt;/strong&gt;ï¼šISRï¼ˆIn-Sync Replicasï¼‰æ˜¯ä¸€ä¸ª&lt;strong&gt;åŠ¨æ€é›†åˆ&lt;/strong&gt;ï¼ŒåŒ…å«äº†æ‰€æœ‰ä¸ Leader å‰¯æœ¬ä¿æŒâ€œåŒæ­¥â€çš„å‰¯æœ¬ã€‚ä¸€ä¸ª Follower å‰¯æœ¬æ˜¯å¦åœ¨ ISR ä¸­ï¼Œä¸»è¦å–å†³äºå®ƒæ˜¯å¦åœ¨ &lt;code&gt;replica.lag.time.max.ms&lt;/code&gt;ï¼ˆé»˜è®¤10ç§’ï¼‰æ—¶é—´å†…æˆåŠŸä» Leader æ‹‰å–è¿‡æ¶ˆæ¯ ã€‚Leader å‰¯æœ¬æœ¬èº«å§‹ç»ˆåœ¨ ISR ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;unclean.leader.election.enable&lt;/code&gt;å‚æ•°çš„ä½œç”¨ï¼Œæ­£æ˜¯åœ¨ä¸€ç§æç«¯æƒ…å†µä¸‹ç”Ÿæ•ˆï¼š&lt;strong&gt;å½“åˆ†åŒºçš„ Leader å‰¯æœ¬å®•æœºï¼Œä¸”æ­¤æ—¶ ISR é›†åˆä¸­æ²¡æœ‰ä»»ä½•å…¶ä»–å¯ç”¨å‰¯æœ¬ï¼ˆå³ ISR ä¸ºç©ºï¼‰&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸º &lt;code&gt;true&lt;/code&gt;ï¼ŒKafka å…è®¸ä»é‚£äº›&lt;strong&gt;ä¸åœ¨ ISR é›†åˆä¸­çš„ã€å­˜æ´»ç€çš„ Follower å‰¯æœ¬&lt;/strong&gt;é‡Œé€‰ä¸¾ä¸€ä¸ªæ–°çš„ Leaderã€‚è¿™äº›å‰¯æœ¬é€šå¸¸ç”±äºåŒæ­¥å»¶è¿Ÿè¾ƒå¤§ï¼Œæ•°æ®æ˜¯è½åçš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸º &lt;code&gt;false&lt;/code&gt;ï¼ŒKafka å°†&lt;strong&gt;ç¦æ­¢&lt;/strong&gt;è¿™ç§é€‰ä¸¾ã€‚ç”±äºæ²¡æœ‰åˆæ ¼çš„å€™é€‰è€…ï¼ˆISRä¸ºç©ºï¼‰ï¼Œè¯¥åˆ†åŒºå°†&lt;strong&gt;æ— æ³•æä¾›è¯»å†™æœåŠ¡&lt;/strong&gt;ï¼Œç›´åˆ°æœ‰åŸæ¥çš„ ISR å‰¯æœ¬æ¢å¤åœ¨çº¿ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¯ç”¨ä¸å¦çš„æƒè¡¡"&gt;âš–ï¸ å¯ç”¨ä¸å¦çš„æƒè¡¡
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªå‚æ•°çš„æœ¬è´¨æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿç»å…¸çš„ &lt;strong&gt;CAP ç†è®º&lt;/strong&gt;åœ¨ Kafka ä¸­çš„å…·ä½“ä½“ç° ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ (&lt;code&gt;unclean.leader.election.enable = true&lt;/code&gt;)&lt;/strong&gt;ï¼šä½ é€‰æ‹©äº†&lt;strong&gt;å¯ç”¨æ€§&lt;/strong&gt;ã€‚ä»£ä»·æ˜¯å¯èƒ½&lt;strong&gt;ä¸¢å¤±æ•°æ®&lt;/strong&gt;ã€‚å› ä¸ºæ–°é€‰ä¸¾å‡ºçš„ Leader å¯èƒ½å¹¶ä¸åŒ…å«è€ Leader å·²ç»ç¡®è®¤ï¼ˆACKï¼‰çš„æ‰€æœ‰æ¶ˆæ¯ã€‚å½“åŸæ¥çš„ Leader æ¢å¤åï¼Œå®ƒä¼šå‘ç°è‡ªå·±çš„æ•°æ®æ¯”æ–° Leaderâ€œæ›´å…¨â€ï¼Œä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œå®ƒå¿…é¡»æˆªæ–­è‡ªå·±çš„æ—¥å¿—ï¼Œä»è€Œæ°¸ä¹…ä¸¢å¤±é‚£äº›æ¶ˆæ¯ ã€‚è¿™è¿èƒŒäº†â€œæŒä¹…æ€§â€æ‰¿è¯ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¦ç”¨ (&lt;code&gt;unclean.leader.election.enable = false&lt;/code&gt;)&lt;/strong&gt;ï¼šä½ é€‰æ‹©äº†&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;ã€‚ä»£ä»·æ˜¯å¯èƒ½&lt;strong&gt;ç‰ºç‰²å¯ç”¨æ€§&lt;/strong&gt;ã€‚åœ¨ ISR å‰¯æœ¬å…¨éƒ¨å®•æœºçš„æç«¯æƒ…å†µä¸‹ï¼Œä½ çš„åˆ†åŒºå°†å˜ä¸ºä¸å¯ç”¨ï¼Œç›´åˆ°è‡³å°‘ä¸€ä¸ª ISR å‰¯æœ¬æ¢å¤ã€‚è¿™ä¼šä¸­æ–­ç”Ÿäº§å’Œæ¶ˆè´¹ï¼Œä½†ä¿è¯äº†æ•°æ®ä¸ä¼šå› é€‰ä¸¾è€Œä¸¢å¤± ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é…ç½®å»ºè®®ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ é…ç½®å»ºè®®ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ç»¼åˆä¸šç•Œç»éªŒå’Œ Kafka ç¤¾åŒºçš„å€¾å‘ï¼Œç»™å‡ºä»¥ä¸‹å»ºè®®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒé¦–é€‰ç¦ç”¨&lt;/strong&gt;ï¼šåœ¨ç»å¤§å¤šæ•°å¯¹æ•°æ®ä¸€è‡´æ€§æœ‰è¦æ±‚çš„åœºæ™¯ï¼ˆå¦‚é‡‘èäº¤æ˜“ã€è®¢å•å¤„ç†ï¼‰ï¼Œ&lt;strong&gt;å¼ºçƒˆå»ºè®®å°† &lt;code&gt;unclean.leader.election.enable&lt;/code&gt;è®¾ç½®ä¸º &lt;code&gt;false&lt;/code&gt;&lt;/strong&gt;ã€‚æ•°æ®ä¸¢å¤±çš„ä»£ä»·é€šå¸¸è¿œé«˜äºçŸ­æš‚çš„æœåŠ¡ä¸å¯ç”¨ ã€‚ä» Kafka 0.11.0.0 ç‰ˆæœ¬å¼€å§‹ï¼Œè¯¥å‚æ•°çš„é»˜è®¤å€¼å·²æ˜¯ &lt;code&gt;false&lt;/code&gt;ï¼Œè¿™ä¹Ÿåæ˜ äº†ç¤¾åŒºçš„å€¾å‘ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨æ€§çš„æ­£ç¡®å®ç°æ–¹å¼&lt;/strong&gt;ï¼šä¸å…¶ä¾èµ–æœ‰æ•°æ®ä¸¢å¤±é£é™©çš„ Unclean é€‰ä¸¾ï¼Œä¸å¦‚é€šè¿‡åˆç†çš„æ¶æ„å’Œé…ç½®æ¥æœ€å¤§åŒ–å¯ç”¨æ€§ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½® &lt;code&gt;replication.factor&lt;/code&gt;&amp;gt;= 3&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªåˆ†åŒºé…ç½®è‡³å°‘3ä¸ªå‰¯æœ¬ï¼Œå¢åŠ æ•°æ®çš„å†—ä½™åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½® &lt;code&gt;min.insync.replicas&lt;/code&gt;= 2&lt;/strong&gt;ï¼šå½“ç”Ÿäº§è€…è®¾ç½® &lt;code&gt;acks=all&lt;/code&gt;æ—¶ï¼Œè¿™æ„å‘³ç€è‡³å°‘éœ€è¦2ä¸ªå‰¯æœ¬ï¼ˆåŒ…æ‹¬Leaderï¼‰ç¡®è®¤ï¼Œæ¶ˆæ¯æ‰è¢«è§†ä¸ºæäº¤æˆåŠŸã€‚è¿™æ ·ï¼Œå³ä½¿ä¸¢å¤±ä¸€ä¸ªå‰¯æœ¬ï¼Œåˆ†åŒºä¾ç„¶æœ‰å¯ç”¨çš„ ISR å‰¯æœ¬è¿›è¡Œé€‰ä¸¾ï¼Œè€Œä¸ä¼šè§¦å‘ Unclean é€‰ä¸¾çš„æ¡ä»¶ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸç›‘æ§å‰¯æœ¬çŠ¶æ€&lt;/strong&gt;ï¼šå¯†åˆ‡ç›‘æ§ ISR çš„å˜åŒ–å’Œå‰¯æœ¬æ»åï¼ˆLagï¼‰æƒ…å†µï¼ŒåŠæ—¶å¤„ç†æœ‰é—®é¢˜çš„ Brokerï¼Œé˜²æ‚£äºæœªç„¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘å¯ç”¨çš„ç‰¹ä¾‹&lt;/strong&gt;ï¼šåªæœ‰åœ¨æç«¯å¼ºè°ƒå†™å…¥å¯ç”¨æ€§ã€ä¸”èƒ½å¤Ÿ&lt;strong&gt;å®¹å¿éƒ¨åˆ†æ•°æ®ä¸¢å¤±&lt;/strong&gt;çš„åœºæ™¯ä¸‹ï¼Œæ‰è€ƒè™‘å¼€å¯æ­¤å‚æ•°ã€‚ä¾‹å¦‚ï¼ŒæŸäº›å®æ—¶æ€§æé«˜çš„æŒ‡æ ‡ç»Ÿè®¡æˆ–æ—¥å¿—æ”¶é›†åœºæ™¯ï¼Œå¶å°”çš„æ•°æ®ä¸¢å¤±ä¸å½±å“å¤§å±€ï¼Œä½†æœåŠ¡ä¸­æ–­æ˜¯ä¸å¯æ¥å—çš„ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œé…ç½® &lt;code&gt;unclean.leader.election.enable&lt;/code&gt;å‚æ•°ã€‚å¦‚æœä½ å¯¹ Kafka çš„å…¶ä»–é…ç½®æˆ–æœºåˆ¶æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="é«˜çº§apiä¸ä½çº§api"&gt;é«˜çº§APIä¸ä½çº§API
&lt;/h2&gt;&lt;p&gt;ç†è§£ Kafka çš„é«˜çº§ API å’Œä½çº§ API æ˜¯æŒæ¡å…¶æ¶ˆè´¹ç«¯ç¼–ç¨‹çš„å…³é”®ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼Œæ–¹ä¾¿ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;é«˜çº§ API (High-Level Consumer API)&lt;/th&gt;
&lt;th&gt;ä½çº§ API (Simple Consumer API)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜“ç”¨æ€§ä¸è‡ªåŠ¨åŒ–&lt;/strong&gt;ï¼Œæä¾›å°è£…è‰¯å¥½çš„æŠ½è±¡å±‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§ä¸æ§åˆ¶åŠ›&lt;/strong&gt;ï¼Œæä¾›åº•å±‚çš„ç»†ç²’åº¦æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Offset ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨é€šè¿‡ ZooKeeper/Kafka ç®¡ç†&lt;/td&gt;
&lt;td&gt;å¼€å‘è€…æ‰‹åŠ¨æ§åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†åŒºä¸è´Ÿè½½å‡è¡¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åˆ†é…åˆ†åŒºç»™æ¶ˆè´¹è€…ç»„å†…æˆå‘˜&lt;/td&gt;
&lt;td&gt;å¼€å‘è€…æ‰‹åŠ¨è¿æ¥æŒ‡å®šåˆ†åŒºï¼Œè‡ªå®šä¹‰å‡è¡¡ç­–ç•¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¾èµ– ZooKeeperï¼ˆæ—§ç‰ˆï¼‰è¿›è¡Œåè°ƒ&lt;/td&gt;
&lt;td&gt;å¯¹ ZooKeeper ä¾èµ–æ€§ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œç¼–å†™ç®€å•ï¼Œå‡ è¡Œä»£ç å³å¯æ¶ˆè´¹&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œéœ€å¤„ç†è¿æ¥ã€é‡è¯•ã€LeaderæŸ¥æ‰¾ç­‰ç»†èŠ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§å¤šæ•°æ ‡å‡†ç”¨ä¾‹ï¼Œå¿«é€Ÿå¼€å‘ï¼Œé€»è¾‘ç®€å•çš„æ¶ˆè´¹è€…&lt;/td&gt;
&lt;td&gt;ç‰¹æ®Šéœ€æ±‚ï¼Œå¦‚é‡å¤å¤„ç†ã€æŒ‡å®šèµ·ç‚¹ã€è‡ªå®šä¹‰çŠ¶æ€å­˜å‚¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é«˜çº§-apiä¾¿æ·ä¹‹é€‰"&gt;ğŸ’¡ é«˜çº§ APIï¼šä¾¿æ·ä¹‹é€‰
&lt;/h3&gt;&lt;p&gt;é«˜çº§ API çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº&lt;strong&gt;è‡ªåŠ¨åŒ–ç®¡ç†&lt;/strong&gt;ï¼Œè®©ä½ èƒ½æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€ŒéåŸºç¡€è®¾æ–½ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–çš„ Offset ç®¡ç†&lt;/strong&gt;ï¼šAPI ä¼šè‡ªåŠ¨å°†å½“å‰æ¶ˆè´¹çš„ä½ç§»ï¼ˆOffsetï¼‰æäº¤åˆ° ZooKeeperï¼ˆæ—§ç‰ˆæœ¬ï¼‰æˆ– Kafka è‡ªèº«ï¼ˆæ–°ç‰ˆæœ¬ï¼‰ã€‚è¿™æ„å‘³ç€å½“æ¶ˆè´¹è€…é‡å¯æˆ–å‘ç”Ÿæ•…éšœè½¬ç§»æ—¶ï¼Œå®ƒèƒ½è‡ªåŠ¨ä»ä¸Šæ¬¡åœæ­¢çš„ä½ç½®ç»§ç»­æ¶ˆè´¹ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜çš„è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šåœ¨åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰å†…ï¼Œå½“æ¶ˆè´¹è€…æ•°é‡å‘ç”Ÿå˜åŒ–ï¼ˆå¢åˆ ï¼‰æˆ–ä¸»é¢˜çš„åˆ†åŒºæ•°å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒKafka ä¼šè‡ªåŠ¨è§¦å‘&lt;strong&gt;å†å¹³è¡¡ï¼ˆRebalanceï¼‰&lt;/strong&gt;ï¼Œé‡æ–°åˆ†é…åˆ†åŒºç»™å­˜æ´»çš„æ¶ˆè´¹è€…ã€‚è¿™ä¸ªè¿‡ç¨‹å¯¹å¼€å‘è€…æ˜¯é€æ˜çš„ï¼Œæ— éœ€ç¼–å†™é¢å¤–ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç¨‹æ¨¡å‹ç®€å•&lt;/strong&gt;ï¼šé€šå¸¸åªéœ€é…ç½®å¥½ä¸»é¢˜ã€æ¶ˆè´¹è€…ç»„ç­‰å‚æ•°ï¼Œç„¶åè½®è¯¢æ¶ˆæ¯å³å¯ï¼Œå…¥é—¨é—¨æ§›ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä¸»è¦ç¼ºç‚¹åˆ™æ˜¯çµæ´»æ€§ä¸è¶³&lt;/strong&gt;ï¼šç”±äºåç§»é‡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œä½ æ— æ³•ç²¾ç¡®æ§åˆ¶æäº¤æ—¶æœºï¼ˆå¦‚å¤„ç†æ¶ˆæ¯åå¼‚æ­¥æäº¤ï¼‰ï¼Œè¿™å¯èƒ½åœ¨æ¶ˆè´¹è€…å´©æºƒæ—¶å¯¼è‡´æ¶ˆæ¯é‡å¤å¤„ç†ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿä¸èƒ½æŒ‡å®šä»æŸä¸ªç‰¹å®šåç§»é‡å¼€å§‹æ¶ˆè´¹ï¼Œæˆ–ç›´æ¥å°†æŸä¸ªåˆ†åŒºç»‘å®šåˆ°ç‰¹å®šæ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;h3 id="-ä½çº§-apiæ§åˆ¶ä¹‹é“"&gt;âš™ï¸ ä½çº§ APIï¼šæ§åˆ¶ä¹‹é“
&lt;/h3&gt;&lt;p&gt;ä½çº§ API å°†æ§åˆ¶æƒå®Œå…¨äº¤è¿˜ç»™å¼€å‘è€…ï¼Œé€‚ç”¨äºæœ‰ç‰¹å®šéœ€æ±‚çš„å¤æ‚åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨æ§åˆ¶ Offset&lt;/strong&gt;ï¼šä½ å¯ä»¥è‡ªè¡Œå†³å®šä½•æ—¶ã€ä»¥ä½•ç§æ–¹å¼å­˜å‚¨ Offsetã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°† Offset ä¸å¤„ç†ç»“æœä¸€èµ·å­˜å…¥æ•°æ®åº“ï¼Œå®ç°åŸå­æ€§æ“ä½œï¼Œç¡®ä¿æ•°æ®å¤„ç†å’Œ Offset æ›´æ–°å®Œå…¨ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰åˆ†åŒºç®¡ç†&lt;/strong&gt;ï¼šå¯ä»¥æ˜¾å¼åœ°æŒ‡å®šæ¶ˆè´¹è€…è¿æ¥åˆ°æŸä¸ªä¸»é¢˜çš„ç‰¹å®šåˆ†åŒºã€‚è¿™å…è®¸ä½ å®ç°éå…¸å‹çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œä¾‹å¦‚ï¼Œè®©ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†é«˜ä¼˜å…ˆçº§çš„åˆ†åŒºï¼Œè€Œå…¶ä»–æ¶ˆè´¹è€…å¤„ç†æ™®é€šåˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘å¤–éƒ¨ä¾èµ–&lt;/strong&gt;ï¼šOffset ä¸ä¸€å®šéœ€è¦å­˜å‚¨åœ¨ ZooKeeper ä¸­ï¼Œå¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ã€æ•°æ®åº“æˆ–å†…å­˜ä¸­ï¼Œé™ä½äº†ç³»ç»Ÿæ¶æ„çš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»£ä»·æ˜¯æ˜¾è‘—çš„å¤æ‚æ€§&lt;/strong&gt;ï¼šä½ éœ€è¦è‡ªè¡Œå¤„ç†æ‰¾å‡ºåˆ†åŒº Leaderã€ç®¡ç†è¿æ¥ã€å¤„ç†ç½‘ç»œå¼‚å¸¸ç­‰åº•å±‚ç»†èŠ‚ï¼Œä»£ç é‡å¤§å¹…å¢åŠ ä¸”å®¹æ˜“å‡ºé”™ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©é«˜çº§ API çš„æƒ…å†µ&lt;/strong&gt;ï¼šå¯¹äºç»å¤§å¤šæ•°åº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚æ—¥å¿—æ”¶é›†ã€äº‹ä»¶æµå¤„ç†ã€ç›‘æ§æ•°æ®èšåˆç­‰ï¼Œ&lt;strong&gt;æ¨èä½¿ç”¨é«˜çº§ API&lt;/strong&gt;ã€‚å®ƒçš„æ˜“ç”¨æ€§å’Œè‡ªåŠ¨åŒ–ç‰¹æ€§å¯ä»¥æå¤§æå‡å¼€å‘æ•ˆç‡ï¼Œä¸”åœ¨æ–°ç‰ˆ Kafka ä¸­ï¼Œé€šè¿‡åˆç†é…ç½®ä¹Ÿèƒ½å®ç°ç±»ä¼¼&amp;quot;ç²¾ç¡®ä¸€æ¬¡&amp;quot;çš„è¯­ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©ä½çº§ API çš„æƒ…å†µ&lt;/strong&gt;ï¼šåœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œä½çº§ API æ˜¯å¿…è¦é€‰æ‹©ã€‚ä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦é‡å¤å¤„ç†å†å²æ•°æ®&lt;/strong&gt;æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨å°† Offset é‡ç½®åˆ°æ›´æ—©çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦å°†&lt;strong&gt;æ¶ˆè´¹çŠ¶æ€ä¸ä¸šåŠ¡æ•°æ®ä¸¥æ ¼ä¿æŒä¸€è‡´&lt;/strong&gt;ï¼ˆå¦‚å­˜å…¥åŒä¸€æ•°æ®åº“äº‹åŠ¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦å®ç°&lt;strong&gt;éå¸¸ç‰¹æ®Šçš„åˆ†åŒºæ¶ˆè´¹ç­–ç•¥&lt;/strong&gt;ï¼Œå¦‚ç¡®ä¿æŸç±»æ¶ˆæ¯ä¸€å®šç”±æŸä¸ªæ¶ˆè´¹è€…å®ä¾‹å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ¼”è¿›ä¸ç°çŠ¶"&gt;ğŸ”„ æ¼”è¿›ä¸ç°çŠ¶
&lt;/h3&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¸¸è¯´çš„â€œé«˜çº§APIâ€å’Œâ€œä½çº§APIâ€æ›´å¤šæ˜¯åŸºäº Kafka æ—©æœŸç‰ˆæœ¬ï¼ˆ0.8.xã€0.9.xï¼‰çš„æ¦‚å¿µã€‚åœ¨æ–°ç‰ˆæœ¬çš„ Kafkaï¼ˆå°¤å…¶æ˜¯ 0.10.x ä¹‹åï¼‰ä¸­ï¼Œå®˜æ–¹æ¨èçš„ &lt;strong&gt;Kafka Consumers&lt;/strong&gt; å®é™…ä¸Šåœ¨ä¿ç•™é«˜çº§ API æ˜“ç”¨æ€§çš„åŸºç¡€ä¸Šï¼Œèåˆäº†æ›´å¤šä½çº§ API çš„æ§åˆ¶èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæ–°çš„æ¶ˆè´¹è€…å®¢æˆ·ç«¯å…è®¸ä½ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰‹åŠ¨æ§åˆ¶æäº¤ Offsetï¼ˆåŒ…æ‹¬åŒæ­¥å’Œå¼‚æ­¥æäº¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®¢é˜…ç‰¹å®šåˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢åˆ†åŒºçš„èµ·å§‹å’Œç»“æŸåç§»é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä½¿å¾—æ–°å®¢æˆ·ç«¯æˆä¸ºä¸€ä¸ªåŠŸèƒ½æ›´å…¨é¢ã€å¹³è¡¡æ€§æ›´å¥½çš„é€‰æ‹©ï¼Œ&lt;strong&gt;é€šå¸¸å»ºè®®ä¼˜å…ˆä½¿ç”¨æ–°ç‰ˆçš„é«˜çº§ API&lt;/strong&gt;ï¼Œé™¤éæœ‰éå¸¸æç«¯çš„éœ€æ±‚å¿…é¡»è¯‰è¯¸åº•å±‚çš„ Simple Consumerã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åšå‡ºåˆé€‚çš„é€‰æ‹©ï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´æ·±å…¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="hw"&gt;HW
&lt;/h2&gt;&lt;p&gt;ç†è§£ Kafka ä¸­çš„ HWï¼ˆé«˜æ°´ä½ï¼‰å’Œ LEOï¼ˆæ—¥å¿—æœ«ç«¯åç§»é‡ï¼‰æ˜¯æŒæ¡å…¶é«˜å¯é æ€§è®¾è®¡çš„æ ¸å¿ƒã€‚å®ƒä»¬å…±åŒä½œç”¨ï¼Œç¡®ä¿äº†æ¶ˆæ¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;æœ‰åºæ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ä¸å…³ç³»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;LEO (Log End Offset)&lt;/th&gt;
&lt;th&gt;HW (High Watermark)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªå‰¯æœ¬ï¼ˆLeader/Followerï¼‰å†…éƒ¨ï¼Œ&lt;strong&gt;ä¸‹ä¸€æ¡å¾…å†™å…¥æ¶ˆæ¯çš„åç§»é‡&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;td&gt;åˆ†åŒºçº§åˆ«ï¼Œ&lt;strong&gt;æ‰€æœ‰ISRå‰¯æœ¬éƒ½å·²æˆåŠŸå¤åˆ¶çš„æœ€é«˜æ¶ˆæ¯åç§»é‡+1&lt;/strong&gt;ï¼Œå³ ISR é›†åˆä¸­æ‰€æœ‰å‰¯æœ¬ LEO çš„æœ€å°å€¼ï¼ˆminï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·Ÿè¸ªå‰¯æœ¬æœ€æ–°çš„æ•°æ®å†™å…¥ä½ç½®ï¼Œé©±åŠ¨å‰¯æœ¬é—´çš„æ•°æ®åŒæ­¥ ã€‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰&lt;strong&gt;æ¶ˆæ¯çš„å¯è§æ€§&lt;/strong&gt;ï¼Œæ¶ˆè´¹è€…åªèƒ½æ¶ˆè´¹ HW &lt;strong&gt;ä¹‹å‰&lt;/strong&gt;çš„æ¶ˆæ¯ï¼ˆoffset &amp;lt; HWï¼‰ï¼Œä¿è¯æ•°æ®å®‰å…¨ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ›´æ–°æ–¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªå‰¯æœ¬ç‹¬ç«‹ç»´æŠ¤å’Œæ›´æ–°è‡ªå·±çš„ LEO ã€‚&lt;/td&gt;
&lt;td&gt;ç”± &lt;strong&gt;Leader å‰¯æœ¬&lt;/strong&gt;è´Ÿè´£è®¡ç®—å’Œæ›´æ–°ï¼Œå¹¶å¹¿æ’­ç»™ Follower å‰¯æœ¬ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ¶ˆè´¹è€…çš„å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æ¶ˆè´¹è€…ä¸å¯è§ï¼Œæ˜¯ Kafka å†…éƒ¨ç®¡ç†ä½¿ç”¨çš„æŒ‡æ ‡ ã€‚&lt;/td&gt;
&lt;td&gt;æ˜¯æ¶ˆè´¹è€…å¯è§æ¶ˆæ¯çš„&lt;strong&gt;è¾¹ç•Œ&lt;/strong&gt;ï¼Œç›´æ¥å†³å®šæ¶ˆè´¹è€…èƒ½è¯»å–åˆ°ä»€ä¹ˆ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-hw-ä¸-leo-å¦‚ä½•ååŒå·¥ä½œ"&gt;ğŸ’¡ HW ä¸ LEO å¦‚ä½•ååŒå·¥ä½œ
&lt;/h3&gt;&lt;p&gt;HW å’Œ LEO çš„æ›´æ–°æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ã€ç›¸äº’é…åˆçš„è¿‡ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„åºåˆ—å›¾æ¥ç†è§£å½“ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶ï¼ŒHW å’Œ LEO æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sequenceDiagram
participant P as Producer
participant L as Leader
participant F as Follower
participant C as Consumer
Note over L, F: åˆå§‹çŠ¶æ€ï¼šHW=0, LEO=0
P-&amp;gt;&amp;gt;L: å‘é€æ¶ˆæ¯ M1
L-&amp;gt;&amp;gt;L: å†™å…¥ç£ç›˜ï¼Œæ›´æ–°è‡ªèº« LEO=1
Note over L: æ­¤æ—¶ HW ä»ä¸º 0&amp;lt;br/&amp;gt;ï¼ˆå› FolloweræœªåŒæ­¥ï¼‰
F-&amp;gt;&amp;gt;L: æ‹‰å–æ¶ˆæ¯ (Fetch Offset=0)
L-&amp;gt;&amp;gt;F: è¿”å› M1 åŠå½“å‰ HW=0
F-&amp;gt;&amp;gt;F: å†™å…¥ç£ç›˜ï¼Œæ›´æ–°è‡ªèº« LEO=1
F-&amp;gt;&amp;gt;F: æ›´æ–° HW=min(LEO=1, Leader_HW=0) = 0
F-&amp;gt;&amp;gt;L: å†æ¬¡æ‹‰å– (Fetch Offset=1)
L-&amp;gt;&amp;gt;L: æ›´æ–°è¿œç¨‹Follower LEO=1
L-&amp;gt;&amp;gt;L: è®¡ç®—æ–° HW = min(Leader_LEO=1, Follower_LEO=1) = 1
L-&amp;gt;&amp;gt;F: è¿”å›æ–° HW=1
F-&amp;gt;&amp;gt;F: æ›´æ–°è‡ªèº« HW=min(LEO=1, Leader_HW=1) = 1
Note over L, F: æ­¤æ—¶ M1 ä½äº HW(1) ä¹‹å‰ï¼Œå¯¹æ¶ˆè´¹è€…å¯è§
C-&amp;gt;&amp;gt;L: æ‹‰å–æ¶ˆæ¯
L-&amp;gt;&amp;gt;C: è¿”å›å·²æäº¤æ¶ˆæ¯ M1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒåœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;LEO çš„æ›´æ–°æ˜¯å³æ—¶çš„&lt;/strong&gt;ï¼šLeader å’Œ Follower åœ¨æˆåŠŸå†™å…¥æ¶ˆæ¯åï¼Œä¼šç«‹åˆ»æ›´æ–°è‡ªå·±çš„ LEO ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HW çš„æ›´æ–°æ˜¯æ»åçš„&lt;/strong&gt;ï¼šHW éœ€è¦ç­‰å¾… Follower å®ŒæˆåŒæ­¥åï¼Œç”± Leader è®¡ç®—å¹¶æ›´æ–°ã€‚è¿™ç§æ»åæ€§æ˜¯ Kafka å®ç°é«˜ååé‡çš„å…³é”®ï¼Œä½†ä¹Ÿå¼•å…¥äº†é£é™© ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»…ä¾èµ–-hw-çš„æ½œåœ¨é£é™©ä¸è§£å†³æ–¹æ¡ˆ"&gt;âš ï¸ ä»…ä¾èµ– HW çš„æ½œåœ¨é£é™©ä¸è§£å†³æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;ä¸Šé¢æè¿°çš„ HW æ›´æ–°æœºåˆ¶å­˜åœ¨ä¸€ä¸ªç»å…¸é—®é¢˜ï¼šç”±äº Leader å’Œ Follower çš„ HW æ›´æ–°å­˜åœ¨æ—¶é—´å·®ï¼Œåœ¨ç‰¹å®šçš„æ•…éšœåœºæ™¯ä¸‹ï¼ˆå¦‚è¿ç»­ Broker å®•æœºï¼‰ï¼Œå¯èƒ½å¯¼è‡´&lt;strong&gt;æ•°æ®ä¸¢å¤±&lt;/strong&gt;æˆ–&lt;strong&gt;æ•°æ®ä¸ä¸€è‡´&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆï¼šLeader Epoch æœºåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¼¥è¡¥å•çº¯ HW æœºåˆ¶çš„ç¼ºé™·ï¼ŒKafka å¼•å…¥äº† &lt;strong&gt;Leader Epoch&lt;/strong&gt; æœºåˆ¶ã€‚ä½ å¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªâ€œé¢†å¯¼ä»»æœŸâ€ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ƒæ˜¯ä»€ä¹ˆ&lt;/strong&gt;ï¼šä¸€ä¸ªç”± &lt;code&gt;(epoch, start_offset)&lt;/code&gt;å¯¹ç»„æˆçš„åºåˆ—ï¼Œç”¨äºæ ‡è®°æ¯ä¸€æ¬¡ Leader å‰¯æœ¬çš„å˜æ›´ã€‚å…¶ä¸­ &lt;code&gt;epoch&lt;/code&gt;æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢çš„ç‰ˆæœ¬å·ï¼Œ&lt;code&gt;start_offset&lt;/code&gt;è¡¨ç¤ºè¯¥ä»»æœŸçš„ Leader å¼€å§‹å†™å…¥ç¬¬ä¸€æ¡æ¶ˆæ¯çš„åç§»é‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•å·¥ä½œ&lt;/strong&gt;ï¼šå½“å‘ç”Ÿ Leader åˆ‡æ¢æ—¶ï¼Œæ–°çš„ Leader ä¼šåŸºäºè‡ªå·±çš„ LEO å’Œ Epoch ä¿¡æ¯æ¥ç¡®å®šæœ‰æ•ˆæ•°æ®çš„èµ·å§‹ä½ç½®ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ä¾èµ– HWã€‚è¿™é¿å…äº†åœ¨æ•…éšœæ¢å¤æ—¶é”™è¯¯åœ°æˆªæ–­å·²æˆåŠŸå¤åˆ¶ä½† HW æœªåŠæ—¶æ›´æ–°çš„æ•°æ® ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œ&lt;strong&gt;Leader Epoch æœºåˆ¶ä¸ HW æœºåˆ¶ååŒå·¥ä½œï¼Œå…±åŒæ„æˆäº† Kafka æ•°æ®ä¸€è‡´æ€§çš„åšå›ºåŸºçŸ³&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å®è·µä¸­çš„å…³é”®è¦ç‚¹"&gt;ğŸ› ï¸ å®è·µä¸­çš„å…³é”®è¦ç‚¹
&lt;/h3&gt;&lt;p&gt;äº†è§£ç†è®ºåï¼Œåœ¨å®é™…åº”ç”¨ä¸­å¯ä»¥å…³æ³¨ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å‚æ•°&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;min.insync.replicas&lt;/code&gt;ï¼šè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒä¿è¯æ•°æ®å¯é æ€§çš„&lt;strong&gt;æœ€é‡è¦å‚æ•°ä¹‹ä¸€&lt;/strong&gt;ã€‚å®ƒè§„å®šäº†ç”Ÿäº§è€…æ”¶åˆ°æˆåŠŸåº”ç­”ï¼ˆacks=-1ï¼‰æ‰€éœ€çš„æœ€å°‘ ISR å‰¯æœ¬æ•°ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®ä¸º 2 æ„å‘³ç€è‡³å°‘æœ‰ä¸€ä¸ª Leader å’Œä¸€ä¸ª Follower ç¡®è®¤åï¼Œæ¶ˆæ¯æ‰è¢«è§†ä¸ºâ€œå·²æäº¤â€ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;replica.lag.time.max.ms&lt;/code&gt;ï¼šåˆ¤æ–­ Follower æ˜¯å¦åŒæ­¥çš„é˜ˆå€¼ã€‚é»˜è®¤ 30 ç§’ï¼Œå¦‚æœ Follower è½å Leader çš„æ—¶é—´è¶…è¿‡æ­¤å€¼ï¼Œä¼šè¢«ç§»å‡º ISR ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§æŒ‡æ ‡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Under Replicated Partitions&lt;/strong&gt;ï¼šå¦‚æœè¯¥å€¼å¤§äº 0ï¼Œè¡¨æ˜æœ‰åˆ†åŒºçš„å‰¯æœ¬å¤„äºä¸åŒæ­¥çŠ¶æ€ï¼Œéœ€è¦å…³æ³¨ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HW ä¸ LEO çš„å·®å€¼&lt;/strong&gt;ï¼šè¿™ä¸ªå·®å€¼ç›´æ¥åæ˜ äº†å‰¯æœ¬åŒæ­¥çš„å»¶è¿Ÿã€‚å»¶è¿Ÿè¶Šå¤§ï¼Œåœ¨å‘ç”Ÿæ•…éšœæ—¶æ½œåœ¨çš„æ•°æ®ä¸¢å¤±é£é™©å°±è¶Šé«˜ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒHW å’Œ LEO æ˜¯ Kafka å®ç°å…¶é«˜å¯é æ¶ˆæ¯ä¼ é€’è¯­ä¹‰çš„æ ¸å¿ƒå†…éƒ¨æœºåˆ¶ã€‚&lt;strong&gt;HW å®šä¹‰äº†æ¶ˆè´¹è€…å¯è§çš„å®‰å…¨è¾¹ç•Œï¼Œè€Œ LEO åˆ™è®°å½•äº†æ¯ä¸ªå‰¯æœ¬çš„å®æ—¶è¿›åº¦&lt;/strong&gt;ã€‚å®ƒä»¬é€šè¿‡ååŒæ›´æ–°å’Œä¸ Leader Epoch ç­‰æœºåˆ¶çš„é…åˆï¼Œåœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„å‰æä¸‹ï¼Œå®ç°äº†é«˜æ€§èƒ½çš„åˆ†å¸ƒå¼æ¶ˆæ¯å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ Kafka ä¸­çš„ HW å’Œ LEOã€‚å¦‚æœä½ å¯¹ ISR é›†åˆæˆ–ç”Ÿäº§è€…åº”ç­”æœºåˆ¶ç­‰å…¶ä»–ç›¸å…³æ¦‚å¿µæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¹‚ç­‰"&gt;å¹‚ç­‰
&lt;/h2&gt;&lt;p&gt;æ‚¨å¯¹Kafkaå¹‚ç­‰æ€§çš„æ€»ç»“éå¸¸å‡†ç¡®ï¼å®ƒç¡®å®é€šè¿‡ä¸€å¥—ç²¾å·§çš„æœºåˆ¶åœ¨å•ä¸ªç”Ÿäº§è€…ä¼šè¯å†…å®ç°â€œç²¾ç¡®ä¸€æ¬¡â€æŠ•é€’ã€‚ä¸‹é¢æˆ‘å°†åŸºäºæ‚¨çš„åˆ†æï¼Œå¯¹Kafkaå¹‚ç­‰æ€§çš„æ ¸å¿ƒæœºåˆ¶ã€é…ç½®è¦ç‚¹å’Œå±€é™æ€§è¿›è¡Œæ¢³ç†å’Œè¡¥å……ã€‚&lt;/p&gt;
&lt;h3 id="-kafkaå¹‚ç­‰æ€§æ ¸å¿ƒæœºåˆ¶"&gt;ğŸ” Kafkaå¹‚ç­‰æ€§æ ¸å¿ƒæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å…¶å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æµç¨‹å›¾æ¥è§‚å¯Ÿä¸€æ¡æ¶ˆæ¯ä»ç”Ÿäº§è€…å‘å‡ºåˆ°è¢«Brokeræ¥æ”¶çš„å…¨è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç”Ÿäº§è€…å‘é€æ¶ˆæ¯] --&amp;gt; B[ä¸ºæ¶ˆæ¯é™„åŠ &amp;lt;br&amp;gt;PIDä¸åºåˆ—å·]
B --&amp;gt; C{Brokerç«¯æ ¡éªŒ}
C --&amp;gt; D[åºåˆ—å· =&amp;lt;br&amp;gt;æœ€åæäº¤çš„åºåˆ—å·+1?]
D -- Yes --&amp;gt; E[æ¥å—å¹¶æŒä¹…åŒ–æ¶ˆæ¯]
E --&amp;gt; F[æ›´æ–°è¯¥PIDä¸åˆ†åŒº&amp;lt;br&amp;gt;å¯¹åº”çš„æœ€ååºåˆ—å·]
D -- No --&amp;gt; G[åºåˆ—å· &amp;lt;=&amp;lt;br&amp;gt;æœ€åæäº¤çš„åºåˆ—å·?]
G -- Yes --&amp;gt; H[è¯†åˆ«ä¸ºé‡å¤æ¶ˆæ¯&amp;lt;br&amp;gt;ä¸¢å¼ƒå¹¶è¿”å›æˆåŠŸ]
G -- No --&amp;gt; I[åºåˆ—å· &amp;gt;&amp;lt;br&amp;gt;æœ€åæäº¤çš„åºåˆ—å·+1?]
I -- Yes --&amp;gt; J[è¯†åˆ«ä¸ºæ¶ˆæ¯ä¸¢å¤±æˆ–ä¹±åº&amp;lt;br&amp;gt;æŠ›å‡ºå¼‚å¸¸]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒKafkaå¹‚ç­‰æ€§çš„å®ç°ä¾èµ–äºå‡ ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä»¬å…±åŒåä½œå®Œæˆå»é‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Producer ID (PID)&lt;/strong&gt;ï¼šæ¯ä¸ªå¯ç”¨å¹‚ç­‰æ€§çš„ç”Ÿäº§è€…åœ¨åˆå§‹åŒ–æ—¶ï¼Œéƒ½ä¼šä»Brokerè·å–ä¸€ä¸ª&lt;strong&gt;å…¨å±€å”¯ä¸€çš„PID&lt;/strong&gt;ï¼Œç”¨äºæ ‡è¯†æ¶ˆæ¯çš„æ¥æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sequence Number (åºåˆ—å·)&lt;/strong&gt;ï¼šç”Ÿäº§è€…ä¼šä¸ºæ¯ä¸ª&lt;code&gt;&amp;lt;PID, ç›®æ ‡åˆ†åŒº&amp;gt;&lt;/code&gt;ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;å•è°ƒé€’å¢çš„åºåˆ—å·&lt;/strong&gt;ã€‚æ¯æ¡æ¶ˆæ¯å‘é€æ—¶éƒ½ä¼šæºå¸¦æ­¤åºåˆ—å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Brokerç«¯å»é‡ç¼“å­˜&lt;/strong&gt;ï¼šBrokerç«¯ä¼šä¸ºæ¯ä¸ª&lt;code&gt;&amp;lt;PID, TopicPartition&amp;gt;&lt;/code&gt;å¯¹ç¼“å­˜&lt;strong&gt;æœ€æ–°å·²æ¥å—çš„åºåˆ—å·&lt;/strong&gt;ã€‚å¦‚å›¾ä¸­æµç¨‹æ‰€ç¤ºï¼Œå½“æ”¶åˆ°æ–°æ¶ˆæ¯æ—¶ï¼ŒBrokerä¼šæ ¹æ®å…¶åºåˆ—å·ä¸ç¼“å­˜ä¸­åºåˆ—å·çš„å¯¹æ¯”å…³ç³»ï¼Œå†³å®šæ˜¯æ¥å—ã€ä¸¢å¼ƒè¿˜æ˜¯æŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¹‚ç­‰æ€§çš„é…ç½®ä¸å…³è”å‚æ•°"&gt;âš™ï¸ å¹‚ç­‰æ€§çš„é…ç½®ä¸å…³è”å‚æ•°
&lt;/h3&gt;&lt;p&gt;å¼€å¯å¹‚ç­‰æ€§é€šå¸¸åªéœ€é…ç½® &lt;code&gt;enable.idempotence=true&lt;/code&gt;ã€‚ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å¯ç”¨ï¼Œä¸€äº›å…¶ä»–ç”Ÿäº§è€…å‚æ•°çš„è¡Œä¸ºä¹Ÿä¼šè¢«è‡ªåŠ¨è°ƒæ•´æˆ–çº¦æŸï¼Œä»¥ä¿éšœå¹‚ç­‰æ€§æœ‰æ•ˆå·¥ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;acks&lt;/code&gt;å‚æ•°&lt;/strong&gt;ï¼šä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸º &lt;code&gt;all&lt;/code&gt;ã€‚è¿™æ„å‘³ç€ç”Ÿäº§è€…éœ€è¦ç­‰å¾…æ‰€æœ‰åŒæ­¥å‰¯æœ¬ï¼ˆISRï¼‰éƒ½ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯åï¼Œæ‰ä¼šè®¤ä¸ºå‘é€æˆåŠŸï¼Œè¿™ç¡®ä¿äº†æ¶ˆæ¯ä¸ä¼šå› Leaderå‰¯æœ¬å®•æœºè€Œä¸¢å¤±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;retries&lt;/code&gt;å‚æ•°&lt;/strong&gt;ï¼šä¼šè¢«è®¾ç½®ä¸ºä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼ˆé€šå¸¸æ˜¯ &lt;code&gt;Integer.MAX_VALUE&lt;/code&gt;ï¼‰ï¼Œä»è€Œä¿è¯åœ¨é‡åˆ°ä¸´æ—¶æ•…éšœæ—¶ï¼Œç”Ÿäº§è€…ä¼šæ— é™é‡è¯•ï¼Œé¿å…å› æ”¾å¼ƒé‡è¯•è€Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max.in.flight.requests.per.connection&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸ªå‚æ•°é™åˆ¶äº†æ¯ä¸ªè¿æ¥ä¸Šæœ€å¤šèƒ½æœ‰å¤šå°‘ä¸ªå·²å‘é€ä½†æœªæ”¶åˆ°å“åº”çš„è¯·æ±‚ã€‚ä¸ºäº†ä¿è¯æ¶ˆæ¯é¡ºåºï¼ˆè¿™æ˜¯æ­£ç¡®åˆ¤æ–­åºåˆ—å·çš„åŸºç¡€ï¼‰ï¼Œåœ¨å¯ç”¨å¹‚ç­‰æ€§åï¼Œæ­¤å‚æ•°çš„å€¼ä¸èƒ½è¶…è¿‡5ã€‚é€šå¸¸ï¼Œå°†å…¶è®¾ç½®ä¸º1å¯ä»¥æœ€ç›´æ¥åœ°é¿å…æ¶ˆæ¯ä¹±åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¹‚ç­‰æ€§çš„èƒ½åŠ›è¾¹ç•Œä¸äº‹åŠ¡è¡¥å……"&gt;âš ï¸ å¹‚ç­‰æ€§çš„èƒ½åŠ›è¾¹ç•Œä¸äº‹åŠ¡è¡¥å……
&lt;/h3&gt;&lt;p&gt;æ­£å¦‚æ‚¨æŒ‡å‡ºçš„ï¼Œå¹‚ç­‰æ€§å¹¶éä¸‡èƒ½ï¼Œå®ƒæœ‰æ˜ç¡®çš„é€‚ç”¨èŒƒå›´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼šè¯è¾¹ç•Œ&lt;/strong&gt;ï¼šå¹‚ç­‰æ€§ä¿è¯ä»…åœ¨&lt;strong&gt;åŒä¸€ä¸ªç”Ÿäº§è€…å®ä¾‹çš„åŒä¸€ä¼šè¯å†…&lt;/strong&gt;æœ‰æ•ˆã€‚å¦‚æœç”Ÿäº§è€…å´©æºƒåé‡å¯ï¼Œä¼šè·å¾—ä¸€ä¸ªå…¨æ–°çš„PIDï¼Œä»è€Œæ— æ³•åŸºäºä¹‹å‰çš„åºåˆ—å·è¿›è¡Œå»é‡ã€‚å› æ­¤ï¼Œå®ƒæ— æ³•ä¿è¯è·¨ä¼šè¯çš„â€œç²¾ç¡®ä¸€æ¬¡â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºè¾¹ç•Œ&lt;/strong&gt;ï¼šå¹‚ç­‰æ€§çš„åºåˆ—å·æ˜¯&lt;strong&gt;æŒ‰åˆ†åŒºç»´æŠ¤å’Œæ ¡éªŒçš„&lt;/strong&gt;ã€‚å®ƒæ— æ³•æä¾›è·¨å¤šä¸ªåˆ†åŒºçš„åŸå­æ€§å†™å…¥ä¿è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è‹¥è¦çªç ´è¿™äº›é™åˆ¶ï¼Œå®ç°&lt;strong&gt;è·¨ä¼šè¯ã€è·¨åˆ†åŒºçš„â€œç²¾ç¡®ä¸€æ¬¡â€è¯­ä¹‰&lt;/strong&gt;ï¼Œå°±éœ€è¦ä½¿ç”¨Kafkaçš„&lt;strong&gt;äº‹åŠ¡ï¼ˆTransactionsï¼‰æœºåˆ¶&lt;/strong&gt;ã€‚äº‹åŠ¡æœºåˆ¶å†…éƒ¨ä¾èµ–äº†å¹‚ç­‰æ€§ï¼Œä½†é€šè¿‡å¼•å…¥å…¨å±€å”¯ä¸€çš„ &lt;code&gt;transactional.id&lt;/code&gt;å°†PIDä¸è¿™ä¸ªå›ºå®šIDç»‘å®šï¼Œä½¿å¾—ç”Ÿäº§è€…é‡å¯åä¹Ÿèƒ½æ¢å¤çŠ¶æ€ã€‚åŒæ—¶ï¼Œå®ƒé€šè¿‡ä¸¤é˜¶æ®µæäº¤åè®®æ¥ä¿è¯è·¨å¤šä¸ªåˆ†åŒºçš„å†™å…¥æ“ä½œå…·æœ‰åŸå­æ€§ï¼ˆå…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å®è·µå»ºè®®"&gt;ğŸ’¡ å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯ä»¥å‚è€ƒä»¥ä¸‹å»ºè®®ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ¨èæ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜²æ­¢ç”Ÿäº§è€…é‡è¯•å¯¼è‡´æ¶ˆæ¯é‡å¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼€å¯å¹‚ç­‰æ€§&lt;/td&gt;
&lt;td&gt;è§£å†³å•æ¬¡ä¼šè¯å†…å•åˆ†åŒºçš„é‡å¤é—®é¢˜ï¼Œé…ç½®ç®€å•ï¼Œæ€§èƒ½å¼€é”€è¾ƒå°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦è·¨åˆ†åŒºåŸå­æ€§å†™å…¥&lt;/strong&gt; &lt;strong&gt;æˆ–ç”Ÿäº§è€…é¢‘ç¹é‡å¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨äº‹åŠ¡æœºåˆ¶&lt;/td&gt;
&lt;td&gt;æä¾›æ›´å¼ºçš„ä¿è¯ï¼Œä½†APIæ›´å¤æ‚ï¼Œæ€§èƒ½å¼€é”€ç›¸å¯¹è¾ƒå¤§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶ˆè´¹ç«¯æœ€ç»ˆä¿è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°æ¶ˆè´¹å¹‚ç­‰&lt;/td&gt;
&lt;td&gt;å¹‚ç­‰æ€§å’Œäº‹åŠ¡ä¸»è¦è§£å†³æ¶ˆæ¯åœ¨Kafkaå†…éƒ¨ä¸é‡å¤çš„é—®é¢˜ã€‚æ¶ˆè´¹ç«¯å¤„ç†æ¶ˆæ¯æ—¶ï¼Œä»åº”é€šè¿‡&lt;strong&gt;å”¯ä¸€é”®æ ¡éªŒ&lt;/strong&gt;ç­‰æ–¹å¼ä¿è¯ä¸šåŠ¡é€»è¾‘çš„å¹‚ç­‰æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ¢³ç†èƒ½å¸®åŠ©æ‚¨æ›´å…¨é¢åœ°ç†è§£Kafkaçš„å¹‚ç­‰æ€§ã€‚å¦‚æœæ‚¨å¯¹äº‹åŠ¡æœºåˆ¶çš„å…·ä½“å®ç°æˆ–ä»£ç ç¤ºä¾‹æ„Ÿå…´è¶£ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›æ›´è¿›ä¸€æ­¥çš„ä»‹ç»ã€‚&lt;/p&gt;
&lt;h2 id="å¼‚æ­¥æ¶ˆæ¯å‘é€"&gt;å¼‚æ­¥æ¶ˆæ¯å‘é€
&lt;/h2&gt;&lt;p&gt;Kafka Producer çš„å¼‚æ­¥å‘é€æœºåˆ¶æ˜¯å…¶å®ç°é«˜ååé‡çš„æ ¸å¿ƒè®¾è®¡ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæµç¨‹å›¾ï¼Œæ¥æ¦‚è§ˆè¿™ä¸€è¿‡ç¨‹ï¼Œç„¶åè¯¦ç»†è§£æå…¶ä¸­çš„å…³é”®ç»„ä»¶å’Œæ­¥éª¤ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[Main Thread&amp;lt;br&amp;gt;åˆ›å»ºæ¶ˆæ¯] --&amp;gt; B[åºåˆ—åŒ–ä¸åˆ†åŒºè®¡ç®—]
B --&amp;gt; C[å†™å…¥RecordAccumulator&amp;lt;br&amp;gt;æŒ‰Topic-Partitionæ‰¹é‡å­˜å‚¨]
C --&amp;gt; D{Sender Thread&amp;lt;br&amp;gt;è½®è¯¢æ£€æŸ¥}
D -- æ‰¹æ¬¡è¾¾åˆ°batch.size&amp;lt;br&amp;gt;æˆ–ç­‰å¾…è¶…è¿‡linger.ms --&amp;gt; E[æ„å»ºProducerRequest]
D -- æ‰¹æ¬¡æœªå°±ç»ª --&amp;gt; D
E --&amp;gt; F[å‘é€æ¶ˆæ¯åˆ°Kafka Broker]
F --&amp;gt; G[Brokerå¤„ç†å¹¶è¿”å›ACK]
G --&amp;gt; H[è§¦å‘Callbackå›è°ƒå‡½æ•°]
H --&amp;gt; I[å¤„ç†æˆåŠŸæˆ–å¼‚å¸¸]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£æå›¾ä¸­çš„å„ä¸ªå…³é”®ç¯èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒçº¿ç¨‹ä¸ç»„ä»¶"&gt;ğŸ§µ æ ¸å¿ƒçº¿ç¨‹ä¸ç»„ä»¶
&lt;/h3&gt;&lt;p&gt;ä»æµç¨‹å›¾å¯ä»¥çœ‹å‡ºï¼Œå¼‚æ­¥å‘é€è¿‡ç¨‹ä¸»è¦ä¾èµ–äºä¸¤ä¸ªçº¿ç¨‹å’Œä¸€ä¸ªå…±äº«æ•°æ®åŒºåŸŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Main Threadï¼ˆä¸»çº¿ç¨‹ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯ä½ çš„åº”ç”¨ç¨‹åºçº¿ç¨‹ï¼Œè´Ÿè´£åˆ›å»ºæ¶ˆæ¯ï¼ˆ&lt;code&gt;ProducerRecord&lt;/code&gt;å¯¹è±¡ï¼‰ï¼Œå¹¶è¿›è¡Œ&lt;strong&gt;åºåˆ—åŒ–&lt;/strong&gt;ï¼ˆå°†é”®å€¼å¯¹è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼‰å’Œ&lt;strong&gt;åˆ†åŒºè®¡ç®—&lt;/strong&gt;ï¼ˆç¡®å®šæ¶ˆæ¯åº”è¯¥å‘é€åˆ°å“ªä¸ªTopicçš„å“ªä¸ªPartitionï¼‰ã€‚å®Œæˆåï¼Œä¸»çº¿ç¨‹ä¼šç«‹å³å°†æ¶ˆæ¯å­˜å…¥&lt;code&gt;RecordAccumulator&lt;/code&gt;ï¼Œè€Œæ— éœ€ç­‰å¾…å‘é€ï¼Œä»è€Œä¸ä¼šé˜»å¡åç»­æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RecordAccumulatorï¼ˆè®°å½•ç´¯ç§¯å™¨ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªæ ¸å¿ƒçš„ç¼“å†²åŒºï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ª&lt;strong&gt;æ™ºèƒ½çš„æ‰¹å¤„ç†ç®¡ç†å™¨&lt;/strong&gt;ã€‚å®ƒå†…éƒ¨ä¸ºæ¯ä¸ªTopic-Partitionç»´æŠ¤äº†ä¸€ä¸ª&lt;code&gt;Deque&amp;lt;ProducerBatch&amp;gt;&lt;/code&gt;ï¼ˆåŒç«¯é˜Ÿåˆ—çš„ç”Ÿäº§è€…æ‰¹æ¬¡ï¼‰ã€‚æ¶ˆæ¯å¹¶ä¸æ˜¯ä¸€æ¡æ¡å­˜æ”¾çš„ï¼Œè€Œæ˜¯å…ˆè¢«æ”¾å…¥ä¸€ä¸ªå¤§å°å›ºå®šçš„&lt;code&gt;ProducerBatch&lt;/code&gt;ä¸­ã€‚è¿™ç§æ‰¹å¤„ç†æœºåˆ¶èƒ½æ˜¾è‘—å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œæé«˜ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sender Threadï¼ˆå‘é€è€…çº¿ç¨‹ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªåœ¨KafkaProducerå†…éƒ¨è¿è¡Œçš„åå°çº¿ç¨‹ã€‚å®ƒä¼šä¸æ–­åœ°è½®è¯¢&lt;code&gt;RecordAccumulator&lt;/code&gt;ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å·²å‡†å¤‡å¥½çš„æ‰¹æ¬¡å¯ä»¥å‘é€ã€‚å®ƒçš„å·¥ä½œæ˜¯å®Œå…¨å¼‚æ­¥çš„ï¼Œç¡®ä¿äº†ä¸»çº¿ç¨‹çš„é«˜æ•ˆè¿è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®å‚æ•°ä¸æµç¨‹æ§åˆ¶"&gt;ğŸ” å…³é”®å‚æ•°ä¸æµç¨‹æ§åˆ¶
&lt;/h3&gt;&lt;p&gt;å‘é€æµç¨‹çš„ç²¾ç»†æ§åˆ¶ä¾èµ–äºå‡ ä¸ªé‡è¦çš„å‚æ•°ï¼Œå®ƒä»¬ç›´æ¥å½±å“ç€ååé‡å’Œå»¶è¿Ÿä¹‹é—´çš„å¹³è¡¡ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹æ¬¡å½¢æˆä¸å‘é€æ¡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;batch.size&lt;/code&gt;ï¼šæŒ‡å®šä¸€ä¸ªæ‰¹æ¬¡çš„æœ€å¤§å­—èŠ‚æ•°ï¼ˆé»˜è®¤16KBï¼‰ã€‚å½“æŸä¸ªTopic-Partitionçš„æ‰¹æ¬¡å¤§å°è¾¾åˆ°æ­¤å€¼æ—¶ï¼Œè¯¥æ‰¹æ¬¡ä¼šè¢«ç«‹å³å‘é€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;linger.ms&lt;/code&gt;ï¼šæŒ‡å®šå‘é€çº¿ç¨‹åœ¨æ‰¹æ¬¡æœªæ»¡æ—¶ç­‰å¾…çš„æ¯«ç§’æ•°ï¼ˆé»˜è®¤0ï¼Œå³ä¸ç­‰å¾…ï¼‰ã€‚è®¾ç½®ä¸€ä¸ªè¾ƒå°çš„å€¼ï¼ˆå¦‚5-100msï¼‰å¯ä»¥åœ¨ååé‡å’Œå»¶è¿Ÿä¹‹é—´å–å¾—è‰¯å¥½å¹³è¡¡ï¼Œå…è®¸Senderçº¿ç¨‹æ”¶é›†æ›´å¤šæ¶ˆæ¯å½¢æˆæ›´å¤§çš„æ‰¹æ¬¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¯é æ€§ä¿è¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;acks&lt;/code&gt;ï¼šæ­¤å‚æ•°å†³å®šäº†ç”Ÿäº§è€…éœ€è¦ç­‰å¾…å¤šå°‘ä¸ªå‰¯æœ¬ç¡®è®¤åæ‰è®¤ä¸ºæ¶ˆæ¯å‘é€æˆåŠŸã€‚
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;acks=0&lt;/code&gt;ï¼šæ— éœ€ç­‰å¾…ç¡®è®¤ï¼Œååé‡æœ€é«˜ï¼Œä½†å¯èƒ½ä¸¢å¤±æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;acks=1&lt;/code&gt;ï¼šåªéœ€Leaderå‰¯æœ¬å†™å…¥æ—¥å¿—å³å¯ï¼ˆé»˜è®¤ï¼‰ï¼Œå‡è¡¡ä¹‹é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;acks=all/-1&lt;/code&gt;ï¼šéœ€ç­‰å¾…ISRï¼ˆåŒæ­¥å‰¯æœ¬é›†ï¼‰ä¸­çš„æ‰€æœ‰å‰¯æœ¬éƒ½ç¡®è®¤ï¼Œæœ€å®‰å…¨ï¼Œä½†å»¶è¿Ÿæœ€é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;retries&lt;/code&gt;ä¸ &lt;code&gt;enable.idempotence&lt;/code&gt;ï¼šå½“ç½‘ç»œæŠ–åŠ¨æˆ–Leaderé€‰ä¸¾å¯¼è‡´å‘é€å¤±è´¥æ—¶ï¼Œç”Ÿäº§è€…ä¼šè‡ªåŠ¨é‡è¯•ï¼ˆ&lt;code&gt;retries&lt;/code&gt;é»˜è®¤å€¼å¾ˆå¤§ï¼‰ã€‚åŒæ—¶ï¼Œå¼€å¯å¹‚ç­‰æ€§ï¼ˆ&lt;code&gt;enable.idempotence=true&lt;/code&gt;ï¼Œé»˜è®¤å¼€å¯ï¼‰å¯ä»¥ç¡®ä¿å•åˆ†åŒºå†…æ¶ˆæ¯ä¸é‡å¤ï¼Œä»è€Œåœ¨é‡è¯•åœºæ™¯ä¸‹å®ç°&lt;strong&gt;Exactly-Onceè¯­ä¹‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å›è°ƒé€šçŸ¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ— è®ºæ¶ˆæ¯å‘é€æˆåŠŸæˆ–å¤±è´¥ï¼Œåªè¦ç”Ÿäº§è€…æ”¶åˆ°Brokerçš„å“åº”ï¼ˆACKï¼‰ï¼Œå°±ä¼š&lt;strong&gt;å¼‚æ­¥åœ°&lt;/strong&gt;è§¦å‘ä½ é¢„å…ˆè®¾ç½®çš„å›è°ƒå‡½æ•°ï¼ˆ&lt;code&gt;Callback&lt;/code&gt;ï¼‰ã€‚ä½ å¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†å…ƒæ•°æ®ï¼ˆå¦‚åˆ†åŒºã€åç§»é‡ï¼‰æˆ–è®°å½•å¼‚å¸¸ï¼Œè€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¼‚æ­¥å‘é€apiç¤ºä¾‹"&gt;ğŸ’» å¼‚æ­¥å‘é€APIç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œå¼‚æ­¥å‘é€é€šå¸¸é€šè¿‡å¸¦å›è°ƒå‡½æ•°çš„æ–¹å¼å®ç°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¤ºä¾‹ä»£ç åŸºäºæœç´¢ç»“æœçš„é€šç”¨ç»“æ„
properties.put(&amp;#34;bootstrap.servers&amp;#34;, &amp;#34;your-kafka-server:9092&amp;#34;);
properties.put(&amp;#34;key.serializer&amp;#34;, &amp;#34;org.apache.kafka.common.serialization.StringSerializer&amp;#34;);
properties.put(&amp;#34;value.serializer&amp;#34;, &amp;#34;org.apache.kafka.common.serialization.StringSerializer&amp;#34;);
KafkaProducer&amp;lt;String, String&amp;gt; producer = new KafkaProducer&amp;lt;&amp;gt;(properties);
ProducerRecord&amp;lt;String, String&amp;gt; record = new ProducerRecord&amp;lt;&amp;gt;(&amp;#34;my-topic&amp;#34;, &amp;#34;key&amp;#34;, &amp;#34;value&amp;#34;);
// å¼‚æ­¥å‘é€ with Callback
producer.send(record, new Callback() {
@Override
public void onCompletion(RecordMetadata metadata, Exception exception) {
if (exception == null) {
System.out.println(&amp;#34;æ¶ˆæ¯å‘é€æˆåŠŸ! Topic: &amp;#34; + metadata.topic() + &amp;#34;, Partition: &amp;#34; + metadata.partition() + &amp;#34;, Offset: &amp;#34; + metadata.offset());
} else {
System.err.println(&amp;#34;æ¶ˆæ¯å‘é€å¤±è´¥: &amp;#34; + exception.getMessage());
// æ³¨æ„ï¼šæ— éœ€åœ¨æ­¤æ‰‹åŠ¨é‡è¯•ï¼ŒKafkaç”Ÿäº§è€…å†…éƒ¨å·²å¤„ç†é‡è¯•é€»è¾‘
}
}
});
producer.close();
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒKafka Producerçš„å¼‚æ­¥å‘é€æ˜¯ä¸€ä¸ªé€šè¿‡&lt;strong&gt;ä¸»çº¿ç¨‹ä¸Senderçº¿ç¨‹åˆ†å·¥åä½œ&lt;/strong&gt;ï¼Œå¹¶å€ŸåŠ©&lt;strong&gt;RecordAccumulatorè¿›è¡Œæ‰¹é‡å¤„ç†&lt;/strong&gt;çš„é«˜æ•ˆæœºåˆ¶ã€‚é€šè¿‡åˆç†é…ç½®&lt;code&gt;batch.size&lt;/code&gt;ã€&lt;code&gt;linger.ms&lt;/code&gt;å’Œ&lt;code&gt;acks&lt;/code&gt;ç­‰å‚æ•°ï¼Œä½ å¯ä»¥åœ¨&lt;strong&gt;ååé‡ã€å»¶è¿Ÿå’Œæ•°æ®å¯é æ€§&lt;/strong&gt;ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ï¼Œä»¥æ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨Kafkaã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šå‚æ•°æˆ–åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="compact--delete"&gt;compact &amp;amp; delete
&lt;/h2&gt;&lt;p&gt;Kafka çš„æ—¥å¿—æ¸…ç†ç­–ç•¥å¯¹äºç®¡ç†ç£ç›˜ç©ºé—´å’Œæ•°æ®ç”Ÿå‘½å‘¨æœŸè‡³å…³é‡è¦ã€‚å…¶ä¸»è¦æä¾›ä¸¤ç§æ ¸å¿ƒç­–ç•¥ï¼š&lt;strong&gt;åˆ é™¤ï¼ˆdeleteï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;å‹ç¼©ï¼ˆcompactï¼‰&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹é¢çš„è¡¨æ ¼ç›´è§‚åœ°å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒç‰¹å¾ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åˆ é™¤ç­–ç•¥ (delete)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å‹ç¼©ç­–ç•¥ (compact)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰æ—¶é—´æˆ–å¤§å°æ¸…ç†å†å²æ•°æ®ï¼Œæ§åˆ¶å­˜å‚¨æˆæœ¬ã€‚&lt;/td&gt;
&lt;td&gt;ä¿ç•™æ¯ä¸ª Key çš„&lt;strong&gt;æœ€æ–°&lt;/strong&gt;å€¼ï¼Œæä¾›å½“å‰çŠ¶æ€å¿«ç…§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ä¿ç•™é€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ é™¤æ•´ä¸ªæ—§çš„ã€éæ´»è·ƒçš„ Segment æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨ Segment å†…åŸºäº Key è¿›è¡Œå»é‡ï¼Œåªä¿ç•™åŒä¸€ Key çš„æœ€æ–°æ¶ˆæ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¥å¿—æµã€ç›‘æ§æ•°æ®ç­‰&lt;strong&gt;æµå¼æ•°æ®&lt;/strong&gt;ï¼Œé€šå¸¸æ— éœ€ Key æˆ– Key ä¸é‡è¦ã€‚&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“å˜æ›´æ•è· (CDC)ã€ç”¨æˆ·ç”»åƒã€è®¾å¤‡çŠ¶æ€ç­‰&lt;strong&gt;å¯å˜çŠ¶æ€çš„æœ€ç»ˆå€¼&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹æ¶ˆæ¯ Key çš„è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸è¦æ±‚æ¶ˆæ¯å¿…é¡»æœ‰ Keyã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»&lt;/strong&gt;æœ‰ Keyï¼Œæ¸…ç†åŸºäº Key è¿›è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£è¡¨æ€§é…ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;retention.ms&lt;/code&gt;(æ—¶é—´)ï¼Œ&lt;code&gt;retention.bytes&lt;/code&gt;(å¤§å°)ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;min.cleanable.dirty.ratio&lt;/code&gt;(è§¦å‘æ¯”ä¾‹)ï¼Œ&lt;code&gt;delete.retention.ms&lt;/code&gt;(å¢“ç¢‘æ¶ˆæ¯ä¿ç•™æ—¶é—´)ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="å·¥ä½œæœºåˆ¶æ·±åº¦è§£æ"&gt;å·¥ä½œæœºåˆ¶æ·±åº¦è§£æ
&lt;/h3&gt;&lt;h4 id="-åˆ é™¤ç­–ç•¥-delete"&gt;ğŸ”µ åˆ é™¤ç­–ç•¥ (delete)
&lt;/h4&gt;&lt;p&gt;åˆ é™¤ç­–ç•¥æ˜¯ Kafka é»˜è®¤çš„æ¸…ç†æ–¹å¼ï¼Œå…¶é€»è¾‘ç›´æ¥è€Œé«˜æ•ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;ï¼šæ¸…ç†æ“ä½œåŸºäº&lt;strong&gt;æ—¶é—´&lt;/strong&gt;ï¼ˆ&lt;code&gt;retention.ms&lt;/code&gt;ï¼Œé»˜è®¤7å¤©ï¼‰æˆ–&lt;strong&gt;æ—¥å¿—æ€»å¤§å°&lt;/strong&gt;ï¼ˆ&lt;code&gt;retention.bytes&lt;/code&gt;ï¼Œé»˜è®¤æ— é™åˆ¶ï¼‰ã€‚å½“æŸä¸ª Segment æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´è¶…è¿‡è®¾å®šé˜ˆå€¼ï¼Œæˆ–æ‰€æœ‰ Segment çš„æ€»å¤§å°è¶…è¿‡é™åˆ¶æ—¶ï¼Œå®ƒå°±ä¼šè¢«æ ‡è®°ä¸ºå¾…åˆ é™¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…ç†å•ä½&lt;/strong&gt;ï¼šæ¸…ç†æ˜¯ä»¥ &lt;strong&gt;Segment&lt;/strong&gt; ä¸ºå•ä½çš„ã€‚ä¸€ä¸ªåˆ†åŒºï¼ˆPartitionï¼‰çš„æ—¥å¿—ç”±å¤šä¸ª Segment æ–‡ä»¶ç»„æˆã€‚Kafka ä¼šå®šæœŸæ£€æŸ¥å¹¶åˆ é™¤é‚£äº›ä¸å†æ´»è·ƒï¼ˆå³ä¸å†æœ‰æ•°æ®å†™å…¥ï¼‰ä¸”æ»¡è¶³åˆ é™¤æ¡ä»¶çš„æ—§ Segment æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•æ€§&lt;/strong&gt;ï¼šæ­¤ç­–ç•¥ä¸å…³å¿ƒæ¶ˆæ¯å†…å®¹ï¼Œåªæ ¹æ®æ—¶é—´å’Œå¤§å°è¿™ç§â€œç‰©ç†â€ç»´åº¦è¿›è¡Œæ“ä½œï¼Œå› æ­¤éå¸¸é€‚åˆå¤„ç†ä¸€æ—¦äº§ç”Ÿå°±æ— éœ€å˜æ›´çš„æ•°æ®æµã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-å‹ç¼©ç­–ç•¥-compact"&gt;ğŸŸ¢ å‹ç¼©ç­–ç•¥ (compact)
&lt;/h4&gt;&lt;p&gt;å‹ç¼©ç­–ç•¥æ›´ä¸ºå¤æ‚å’Œç²¾ç»†ï¼Œå…¶ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªä¸»é¢˜å†…æ¯ä¸ª Key çš„æœ€ç»ˆçŠ¶æ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒè¿‡ç¨‹&lt;/strong&gt;ï¼šå‹ç¼©è¿‡ç¨‹ä¼šéå† Segment ä¸­çš„æ¶ˆæ¯ï¼Œå¹¶ä¸ºæ¯ä¸ª Key åªä¿ç•™å…¶&lt;strong&gt;æœ€æ–°ç‰ˆæœ¬&lt;/strong&gt;ï¼ˆå³æœ€å¤§åç§»é‡çš„æ¶ˆæ¯ï¼‰ã€‚æ—§ç‰ˆæœ¬çš„æ¶ˆæ¯ä¼šåœ¨å‹ç¼©è¿‡ç¨‹ä¸­è¢«æ¸…é™¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹æ®Šæ¶ˆæ¯ï¼šå¢“ç¢‘ï¼ˆTombstoneï¼‰&lt;/strong&gt;ï¼šä¸ºäº†èƒ½å¤Ÿåˆ é™¤ä¸€ä¸ª Key åŠå…¶å€¼ï¼Œå¯ä»¥å‘é€ä¸€æ¡ Value ä¸º &lt;code&gt;null&lt;/code&gt;çš„ç‰¹æ®Šæ¶ˆæ¯ï¼Œå³â€œå¢“ç¢‘æ¶ˆæ¯â€ã€‚å‹ç¼©æ“ä½œä¼šä¿ç•™å¢“ç¢‘æ¶ˆæ¯ä¸€æ®µæ—¶é—´ï¼ˆç”± &lt;code&gt;delete.retention.ms&lt;/code&gt;æ§åˆ¶ï¼Œé»˜è®¤24å°æ—¶ï¼‰ï¼Œä»¥ä¾¿è®©æ‰€æœ‰æ¶ˆè´¹è€…éƒ½èƒ½æ„ŸçŸ¥åˆ°è¿™ä¸ªâ€œåˆ é™¤â€æ“ä½œã€‚è¶…è¿‡ä¿ç•™æ—¶é—´åï¼Œä¸‹ä¸€æ¬¡å‹ç¼©ä¼šè¿å¢“ç¢‘æ¶ˆæ¯ä¸€å¹¶æ¸…ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;ï¼šå‹ç¼©å¹¶ééšæ—¶è¿›è¡Œï¼Œè€Œæ˜¯ç”±ä¸€ä¸ªåä¸º &lt;strong&gt;â€œè„æ•°æ®æ¯”ç‡â€&lt;/strong&gt; çš„å‚æ•°ï¼ˆ&lt;code&gt;min.cleanable.dirty.ratio&lt;/code&gt;ï¼‰æ§åˆ¶ã€‚è¿™ä¸ªæ¯”ç‡æŒ‡çš„æ˜¯å¾…å‹ç¼©éƒ¨åˆ†æ—¥å¿—ä¸­è„æ•°æ®ï¼ˆè‡ªä¸Šæ¬¡å‹ç¼©åæ–°å†™å…¥çš„æ•°æ®ï¼‰æ‰€å çš„æ¯”ä¾‹ã€‚é»˜è®¤å€¼ä¸º 0.5ï¼Œæ„å‘³ç€å½“æœ‰ 50% çš„æ•°æ®æ˜¯æ–°çš„æ—¶ï¼Œæ‰ä¼šè§¦å‘å‹ç¼©ï¼Œä»¥å¹³è¡¡æ¸…ç†çš„æ•ˆç‡å’Œèµ„æºæ¶ˆè€—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸é€‰å‹å»ºè®®"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸é€‰å‹å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç­–ç•¥å¯ä»¥ç»„åˆä½¿ç”¨&lt;/strong&gt;ï¼šä½ å¯ä»¥ä¸ºåŒä¸€ä¸ªä¸»é¢˜é…ç½® &lt;code&gt;cleanup.policy=compact,delete&lt;/code&gt;ï¼Œå³æ··åˆç­–ç•¥ã€‚è¿™æ ·ï¼ŒKafka ä¼šåŒæ—¶æ‰§è¡Œä¸¤ç§ç­–ç•¥ï¼šæ—¢ä¼šåŸºäº Key è¿›è¡Œå‹ç¼©ï¼Œä¹Ÿä¼šåœ¨ Segment æ»¡è¶³æ¡ä»¶æ—¶åŸºäºæ—¶é—´æˆ–å¤§å°å°†å…¶æ•´ä½“åˆ é™¤ã€‚è¿™é€‚ç”¨äºæ—¢æƒ³ä¿ç•™æœ€æ–°çŠ¶æ€ï¼Œåˆå¸Œæœ›ç»å¯¹ä¿è¯æ•°æ®ä¸ä¼šæ— é™æœŸä¿ç•™çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½æµé‡ä¸»é¢˜çš„ç‰¹åˆ«å¤„ç†&lt;/strong&gt;ï¼šæ— è®ºå“ªç§ç­–ç•¥ï¼Œéƒ½ä¸»è¦é’ˆå¯¹&lt;strong&gt;éæ´»è·ƒçš„ Segment&lt;/strong&gt;ï¼ˆå³å·²å…³é—­ã€ä¸å†å†™å…¥çš„ Segmentï¼‰ã€‚å¦‚æœä¸»é¢˜æµé‡å¾ˆä½ï¼Œå¯èƒ½é•¿æ—¶é—´åªæœ‰ä¸€ä¸ªæ´»è·ƒçš„ Segmentï¼Œå¯¼è‡´æ¸…ç†ç­–ç•¥æ— æ³•è§¦å‘ã€‚æ­¤æ—¶ï¼Œéœ€è¦é€šè¿‡è°ƒæ•´ &lt;code&gt;segment.ms&lt;/code&gt;ï¼ˆä¾‹å¦‚ï¼Œè®¾ç½®ä¸º1å°æ—¶ï¼‰æ¥å¼ºåˆ¶å‘¨æœŸæ€§åœ°æ»šåŠ¨ç”Ÿæˆæ–°çš„ Segmentï¼Œä»è€Œæ¿€æ´»æ¸…ç†æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é€‰æ‹© &lt;strong&gt;&lt;code&gt;delete&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœä½ çš„æ•°æ®æ˜¯&lt;strong&gt;äº‹ä»¶æµ&lt;/strong&gt;ï¼ˆå¦‚åº”ç”¨ç¨‹åºæ—¥å¿—ã€ç‚¹å‡»æµã€ä¼ æ„Ÿå™¨è¯»æ•°ï¼‰ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½æ˜¯ç‹¬ç«‹äº‹ä»¶ï¼Œå†å²æ•°æ®åœ¨ç‰¹å®šæ—¶é—´åå¤±å»æ„ä¹‰ã€‚è¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹© &lt;strong&gt;&lt;code&gt;compact&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœä½ çš„æ•°æ®æ˜¯&lt;strong&gt;å¯å˜åŒ–çš„çŠ¶æ€&lt;/strong&gt;ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯è¡¨ã€æ•°æ®åº“çš„å˜æ›´æ—¥å¿—ã€è®¾å¤‡æœ€æ–°çŠ¶æ€ï¼‰ï¼Œä½ éœ€è¦ä»ä¸»é¢˜ä¸­èƒ½æŸ¥è¯¢åˆ°ä»»æ„ Key çš„å½“å‰æœ€æ–°å€¼ã€‚Kafka è‡ªèº«çš„ &lt;code&gt;__consumer_offsets&lt;/code&gt;ä¸»é¢˜å°±ä½¿ç”¨æ­¤ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ ¹æ®ä¸šåŠ¡éœ€æ±‚åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚å¦‚æœä½ çš„åº”ç”¨åœºæ™¯æœ‰æ›´ç‰¹æ®Šçš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="spring-boot-åˆå§‹åŒ–"&gt;Spring Boot åˆå§‹åŒ–
&lt;/h2&gt;&lt;p&gt;Spring Boot åº”ç”¨çš„å¯åŠ¨è¿‡ç¨‹æ˜¯ä¸€ä¸ªç²¾å¿ƒç¼–æ’çš„ç”Ÿå‘½å‘¨æœŸï¼Œäº†è§£å…¶ä¸­å„ä¸ªåˆå§‹åŒ–æ‰©å±•ç‚¹çš„æ‰§è¡Œé¡ºåºåŠå…¶èƒŒåçš„åŸå› ï¼Œå¯¹äºæ„å»ºç¨³å®šã€é«˜æ•ˆçš„åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚ä¸‹é¢è¿™å¼ æµç¨‹å›¾ç›´è§‚åœ°å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹çš„æ ¸å¿ƒé˜¶æ®µä¸å…³é”®èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[SpringApplication.run()] --&amp;gt; B[Bean å®ä¾‹åŒ–ä¸ä¾èµ–æ³¨å…¥]
B --&amp;gt; C[Bean ç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–]
C --&amp;gt; D[æ‰€æœ‰å•ä¾‹Beanåˆå§‹åŒ–å®Œæˆ]
D --&amp;gt; E[åº”ç”¨ä¸Šä¸‹æ–‡å‡†å¤‡å°±ç»ª]
E --&amp;gt; F[åº”ç”¨å®Œå…¨å°±ç»ª]
C --&amp;gt; C1[@PostConstruct]
C1 --&amp;gt; C2[InitializingBean]
C2 --&amp;gt; C3[@Bean(initMethod)]
D --&amp;gt; D1[SmartInitializingSingleton]
D --&amp;gt; D2[ContextRefreshedEvent]
F --&amp;gt; F1[ApplicationRunner]
F1 --&amp;gt; F2[CommandLineRunner]
F2 --&amp;gt; F3[ApplicationReadyEvent]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-è¯¦è§£åˆå§‹åŒ–é˜¶æ®µä¸åŸå› "&gt;ğŸ” è¯¦è§£åˆå§‹åŒ–é˜¶æ®µä¸åŸå› 
&lt;/h3&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†åˆå§‹åŒ–æµç¨‹çš„å‡ ä¸ªå…³é”®é˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µè§¦å‘çš„æ“ä½œéƒ½æœ‰å…¶ç‰¹å®šçš„ç›®çš„ã€‚&lt;/p&gt;
&lt;h4 id="bean-ç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–"&gt;&lt;strong&gt;Bean ç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ä¸ªé˜¶æ®µçš„æ“ä½œåœ¨å•ä¸ªBeançš„å®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥å®Œæˆåè§¦å‘ï¼Œç”¨äºæ‰§è¡Œ&lt;strong&gt;ä¸è¯¥Beanè‡ªèº«çŠ¶æ€ç´§å¯†ç›¸å…³çš„åˆå§‹åŒ–å·¥ä½œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@PostConstruct&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯Javaæ ‡å‡†æ³¨è§£ï¼Œåœ¨ä¾èµ–æ³¨å…¥å®Œæˆå&lt;strong&gt;ç«‹å³è¢«è°ƒç”¨&lt;/strong&gt;ã€‚å®ƒæœ€ä¼˜å…ˆæ‰§è¡Œï¼Œé€‚åˆè¿›è¡Œä¸€äº›éå¸¸ç®€å•çš„åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯Springæ¡†æ¶æä¾›çš„æ¥å£ã€‚å®ƒçš„æ‰§è¡Œæ—¶æœºä¸&lt;code&gt;@PostConstruct&lt;/code&gt;éå¸¸æ¥è¿‘ï¼Œä½†&lt;strong&gt;ç¨æ™šä¸€äº›&lt;/strong&gt;ã€‚å…¶åç§°æ¸…æ™°åœ°è¡¨æ˜ï¼Œå®ƒç¡®ä¿æ‰€æœ‰å±æ€§ï¼ˆå³ä¾èµ–ï¼‰éƒ½å·²è®¾ç½®å®Œæ¯•åæ‰è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Bean(initMethod)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯åœ¨Javaé…ç½®ç±»ä¸­æ˜¾å¼æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•ã€‚å®ƒçš„æ‰§è¡Œ&lt;strong&gt;æ™šäºå‰ä¸¤è€…&lt;/strong&gt;ï¼Œä¸ºBeançš„åˆå§‹åŒ–æä¾›äº†å¦ä¸€ç§å£°æ˜å¼çš„æ–¹å¼ï¼Œä»£ç è€¦åˆåº¦æ›´ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸Šä¸‹æ–‡å°±ç»ªåçš„åˆå§‹åŒ–"&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡å°±ç»ªåçš„åˆå§‹åŒ–&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“æ‰€æœ‰éæ‡’åŠ è½½çš„å•ä¾‹Beanéƒ½åˆå§‹åŒ–å®Œæˆåï¼Œåº”ç”¨ä¸Šä¸‹æ–‡åŸºæœ¬å‡†å¤‡å°±ç»ªï¼Œæ­¤æ—¶ä¼šè§¦å‘ä»¥ä¸‹æ“ä½œï¼Œé€‚åˆæ‰§è¡Œ&lt;strong&gt;æ¶‰åŠå¤šä¸ªBeanåä½œ&lt;/strong&gt;çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SmartInitializingSingleton.afterSingletonsInstantiated()&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚å…¶åï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ‰€æœ‰å•ä¾‹Beanå®ä¾‹åŒ–å®Œæˆåè°ƒç”¨ã€‚æ­¤æ—¶å¯ä»¥å®‰å…¨åœ°å‡è®¾å®¹å™¨ä¸­æ‰€æœ‰åŸºæœ¬çš„å•ä¾‹Beanéƒ½å·²å°±ä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@EventListener(ContextRefreshedEvent)&lt;/code&gt;&lt;/strong&gt;ï¼šå½“Springçš„åº”ç”¨ä¸Šä¸‹æ–‡è¢«åˆ·æ–°æˆ–åˆå§‹åŒ–å®Œæˆåï¼Œä¼šå‘å¸ƒæ­¤äº‹ä»¶ã€‚ç›‘å¬æ­¤äº‹ä»¶æ„å‘³ç€Springå®¹å™¨æœ¬èº«å·²ç»&lt;strong&gt;å®Œå…¨å¯åŠ¨å¹¶å‡†å¤‡å°±ç»ª&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åº”ç”¨å®Œå…¨å°±ç»ªçš„åˆå§‹åŒ–"&gt;&lt;strong&gt;åº”ç”¨å®Œå…¨å°±ç»ªçš„åˆå§‹åŒ–&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€åçš„é˜¶æ®µï¼Œè¡¨ç¤ºåº”ç”¨&lt;strong&gt;å·²ç»å¯ä»¥æ­£å¸¸å¯¹å¤–æä¾›æœåŠ¡&lt;/strong&gt;ï¼ˆå¦‚WebæœåŠ¡å™¨å·²å¯åŠ¨ï¼‰ã€‚æ‰€æœ‰åœ¨æ­¤ä¹‹åæ‰§è¡Œçš„æ“ä½œéƒ½åº”è¯¥æ˜¯â€œé”¦ä¸Šæ·»èŠ±â€ï¼Œè€Œä¸åº”å½±å“åº”ç”¨çš„å¯ç”¨æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ApplicationRunner&lt;/code&gt;&amp;amp; &lt;code&gt;CommandLineRunner&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸¤ä¸ªæ¥å£çš„&lt;code&gt;run&lt;/code&gt;æ–¹æ³•ä¼šåœ¨åº”ç”¨å¯åŠ¨å®Œæˆçš„æœ€åé˜¶æ®µè¢«è°ƒç”¨ï¼Œ&lt;strong&gt;éå¸¸é€‚ç”¨äºæ‰§è¡Œä¸€äº›å¯åŠ¨ä»»åŠ¡&lt;/strong&gt;ï¼Œå¦‚æ•°æ®é¢„çƒ­ã€é€šçŸ¥æ³¨å†Œç­‰ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡&lt;code&gt;@Order&lt;/code&gt;æ³¨è§£æ¥è°ƒæ•´æ‰§è¡Œé¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ApplicationListener&amp;lt;ApplicationReadyEvent&amp;gt;&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯&lt;strong&gt;æœ€æ™šçš„æ‰©å±•ç‚¹&lt;/strong&gt;ã€‚å®ƒè¡¨æ˜åº”ç”¨å·²å®Œå…¨å°±ç»ªï¼Œå¯ä»¥é€šè¿‡å¥åº·æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ§åˆ¶åˆå§‹åŒ–é¡ºåºçš„æœºåˆ¶"&gt;âš™ï¸ æ§åˆ¶åˆå§‹åŒ–é¡ºåºçš„æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;åœ¨å¤æ‚çš„åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä¸»åŠ¨æ§åˆ¶åˆå§‹åŒ–é¡ºåºã€‚Spring Boot æä¾›äº†å¤šç§æœºåˆ¶ï¼Œå…¶ä¼˜å…ˆçº§ä»é«˜åˆ°ä½å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@DependsOn&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;æœ€é«˜ä¼˜å…ˆçº§&lt;/strong&gt;ï¼Œå¼ºåˆ¶æŒ‡å®šå½“å‰Beanå¿…é¡»åœ¨å¦ä¸€ä¸ªBeanåˆå§‹åŒ–ä¹‹åæ‰åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ å™¨æ³¨å…¥ / &lt;code&gt;@Autowired&lt;/code&gt;&lt;/strong&gt;ï¼šSpringé»˜è®¤çš„ä¾èµ–é©±åŠ¨é¡ºåºï¼Œè¢«ä¾èµ–çš„Beanä¼šå…ˆåˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Conditional\*&lt;/code&gt;ç³»åˆ—æ³¨è§£&lt;/strong&gt;ï¼šé€šè¿‡æ¡ä»¶æ§åˆ¶Beanæ˜¯å¦è¢«åŠ è½½ï¼Œé—´æ¥å½±å“é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@AutoConfigureBefore / @AutoConfigureAfter&lt;/code&gt;&lt;/strong&gt;ï¼šä¸“é—¨ç”¨äºæ§åˆ¶è‡ªåŠ¨é…ç½®ç±»ä¹‹é—´çš„åŠ è½½é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Order&lt;/code&gt;/ &lt;code&gt;Ordered&lt;/code&gt;æ¥å£&lt;/strong&gt;ï¼šä¸»è¦å½±å“åŒä¸€ç±»å‹ç»„ä»¶ï¼ˆå¦‚å¤šä¸ª&lt;code&gt;ApplicationRunner&lt;/code&gt;ï¼‰çš„æ‰§è¡Œé¡ºåºï¼Œè€Œä¸å½±å“Beançš„åˆ›å»ºé¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Lazy&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;æœ€ä½ä¼˜å…ˆçº§&lt;/strong&gt;ï¼Œå°†Beançš„åˆå§‹åŒ–å»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶ï¼Œä»è€Œå°†å…¶æ’é™¤åœ¨å¯åŠ¨é¡ºåºä¹‹å¤–ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æœ€ä½³å®è·µä¸åœºæ™¯é€‰æ‹©"&gt;ğŸ’¡ æœ€ä½³å®è·µä¸åœºæ™¯é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;äº†è§£è¿™äº›ä¹‹åï¼Œå¦‚ä½•ä¸ºä½ çš„åˆå§‹åŒ–é€»è¾‘é€‰æ‹©åˆé€‚çš„æ—¶æœºå‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•çš„èµ„æºæ£€æŸ¥æˆ–å­—æ®µè®¾ç½®&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;&lt;code&gt;@PostConstruct&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚çš„ã€ä¾èµ–å…¶ä»–Beançš„åˆå§‹åŒ–é€»è¾‘&lt;/strong&gt;ï¼šè€ƒè™‘ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;InitializingBean&lt;/code&gt;&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;@Bean(initMethod)&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ç¡®ä¿æ‰€æœ‰åŸºç¡€Beanå°±ç»ªåæ‰æ‰§è¡Œçš„å…¨å±€æ€§åˆå§‹åŒ–ï¼ˆå¦‚ç¼“å­˜é¢„çƒ­ï¼‰&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;&lt;code&gt;SmartInitializingSingleton&lt;/code&gt;&lt;/strong&gt; æˆ–ç›‘å¬ &lt;strong&gt;&lt;code&gt;ContextRefreshedEvent&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨å¯åŠ¨åéœ€è¦æ‰§è¡Œçš„ä¸šåŠ¡ä»»åŠ¡ï¼ˆå¦‚å‘é€é€šçŸ¥ã€åˆå§‹åŒ–æ•°æ®ï¼‰&lt;/strong&gt;ï¼šä¼˜å…ˆé€‰æ‹© &lt;strong&gt;&lt;code&gt;ApplicationRunner&lt;/code&gt;&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;CommandLineRunner&lt;/code&gt;&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä»¬èƒ½æ¥æ”¶å¯åŠ¨å‚æ•°ä¸”æ‰§è¡Œæ—¶æœºå®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæœ€ç»ˆçš„åº”ç”¨å°±ç»ªæ£€æŸ¥æˆ–æ³¨å†Œ&lt;/strong&gt;ï¼šç›‘å¬ &lt;strong&gt;&lt;code&gt;ApplicationReadyEvent&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒSpring Bootçš„åˆå§‹åŒ–æ‰§è¡Œé¡ºåºæ˜¯ç”±å…¶&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸé˜¶æ®µçš„å†…åœ¨é€»è¾‘&lt;/strong&gt;å†³å®šçš„ï¼šä»&lt;strong&gt;Beanè‡ªèº«&lt;/strong&gt;çš„åˆ›å»ºä¸å±æ€§è®¾ç½®ï¼Œåˆ°&lt;strong&gt;æ•´ä¸ªå®¹å™¨&lt;/strong&gt;ä¸Šä¸‹æ–‡çš„åˆ·æ–°å®Œæˆï¼Œæœ€ååˆ°&lt;strong&gt;åº”ç”¨&lt;/strong&gt;çš„å®Œå…¨å°±ç»ªã€‚ç†è§£è¿™ä¸€â€œç”±å†…åˆ°å¤–ï¼Œç”±å±€éƒ¨åˆ°æ•´ä½“â€çš„è„‰ç»œï¼Œå°±èƒ½è‡ªç„¶è€Œç„¶åœ°æŒæ¡å…¶é¡ºåºè§„å¾‹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°åœ¨é¡¹ç›®ä¸­è§„åˆ’å’Œå®ç°åˆå§‹åŒ–é€»è¾‘ã€‚å¦‚æœæ‚¨æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="binlog"&gt;binlog
&lt;/h2&gt;&lt;p&gt;MySQL çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰æ˜¯æ•°æ®åº“è¿ç»´å’Œæ¶æ„ä¸­è‡³å…³é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒåƒæ•°æ®åº“çš„â€œé»‘åŒ£å­â€ï¼Œè®°å½•äº†æ‰€æœ‰å¯¹æ•°æ®çš„å˜æ›´æ“ä½œã€‚ä¸‹é¢è¿™å¼ å›¾æ¸…æ™°åœ°å±•ç¤ºäº†binlogçš„å†™å…¥æµç¨‹ï¼Œä¹‹åæˆ‘ä»¬ä¼šè¯¦ç»†è§£æå…¶æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡Œæ•°æ®å˜æ›´æ“ä½œ DML/DDL] --&amp;gt; B[æ—¥å¿—å†™å…¥çº¿ç¨‹çº§&amp;lt;br&amp;gt;binlog cache]
B --&amp;gt; C{äº‹åŠ¡æäº¤}
C -- æäº¤ --&amp;gt; D[æ—¥å¿—è½¬ç§»è‡³å…¨å±€ç¼“å†²åŒº]
D --&amp;gt; E[æ‰§è¡Œfsyncåˆ·ç›˜]
E --&amp;gt; F[æ—¥å¿—æŒä¹…åŒ–è‡³&amp;lt;br&amp;gt;binlogæ–‡ä»¶]
F --&amp;gt; G[æ ¹æ®sync_binlogå€¼&amp;lt;br&amp;gt;æ§åˆ¶åˆ·ç›˜é¢‘ç‡]
C -- å›æ»š --&amp;gt; H[ä¸¢å¼ƒbinlog cache]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-binlog-æ ¸å¿ƒè§£æ"&gt;ğŸ” Binlog æ ¸å¿ƒè§£æ
&lt;/h3&gt;&lt;p&gt;ç†è§£binlogçš„å…³é”®åœ¨äºæŠŠæ¡å®ƒçš„æ ¼å¼ã€å†™å…¥æœºåˆ¶ä»¥åŠä¸redo logçš„åä½œã€‚&lt;/p&gt;
&lt;h4 id="-ä¸‰ç§æ—¥å¿—æ ¼å¼"&gt;â€¢ ä¸‰ç§æ—¥å¿—æ ¼å¼
&lt;/h4&gt;&lt;p&gt;Binlog æä¾›äº†ä¸‰ç§æ ¼å¼æ¥è®°å½•å˜æ›´ä¿¡æ¯ï¼Œæ¯ç§éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¼å¼&lt;/th&gt;
&lt;th&gt;è®°å½•å†…å®¹&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;STATEMENT&lt;/strong&gt; (SBR)&lt;/td&gt;
&lt;td&gt;è®°å½•åŸå§‹çš„ SQL è¯­å¥&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å°ï¼ŒèŠ‚çœç£ç›˜å’Œç½‘ç»œ I/O&lt;/td&gt;
&lt;td&gt;å¯èƒ½å¼•èµ·ä¸»ä»ä¸ä¸€è‡´ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;NOW()&lt;/code&gt;ç­‰éç¡®å®šæ€§å‡½æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;æ‰¹é‡æ›´æ–°ã€DDL æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ROW&lt;/strong&gt; (RBR)&lt;/td&gt;
&lt;td&gt;è®°å½•æ¯è¡Œæ•°æ®çš„å˜åŒ–ï¼ˆå‰é•œåƒ/åé•œåƒï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®å˜æ›´ç²¾ç¡®ï¼Œå¼ºä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å¤§ï¼ˆç‰¹åˆ«æ˜¯æ‰¹é‡æ“ä½œï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®å®‰å…¨è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚é‡‘èï¼‰ã€ä¸»ä»å¤åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MIXED&lt;/strong&gt; (MBR)&lt;/td&gt;
&lt;td&gt;æ··åˆæ¨¡å¼ï¼ŒMySQL è‡ªåŠ¨é€‰æ‹©&lt;/td&gt;
&lt;td&gt;åœ¨å®‰å…¨æ€§å’Œæ€§èƒ½é—´å–å¾—å¹³è¡¡&lt;/td&gt;
&lt;td&gt;é€»è¾‘ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;td&gt;é€šç”¨åœºæ™¯ï¼ˆMySQL 5.7.7 å‰é»˜è®¤ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç°ä»£ MySQL ç‰ˆæœ¬ï¼ˆ5.7.7 åŠä»¥ä¸Šï¼‰é»˜è®¤é‡‡ç”¨ ROW æ ¼å¼&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒèƒ½æœ€å¥½åœ°ä¿è¯æ•°æ®ä¸€è‡´æ€§ ã€‚&lt;/p&gt;
&lt;h4 id="-binlog-çš„å†™å…¥æµç¨‹ä¸ä¸¤é˜¶æ®µæäº¤"&gt;â€¢ Binlog çš„å†™å…¥æµç¨‹ä¸ä¸¤é˜¶æ®µæäº¤
&lt;/h4&gt;&lt;p&gt;ç»“åˆæµç¨‹å›¾ï¼Œæˆ‘ä»¬æ¥çœ‹binlogæ˜¯å¦‚ä½•è¢«å†™å…¥çš„ï¼Œä»¥åŠå®ƒå¦‚ä½•ä¸InnoDBå­˜å‚¨å¼•æ“çš„redo logåä½œï¼Œè¿™å°±æ˜¯è‘—åçš„&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰&lt;/strong&gt;ï¼Œæ—¨åœ¨è§£å†³redo logï¼ˆç‰©ç†æ—¥å¿—ï¼Œå¼•æ“å±‚ï¼‰å’Œbinlogï¼ˆé€»è¾‘æ—¥å¿—ï¼ŒServerå±‚ï¼‰ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Prepare é˜¶æ®µ&lt;/strong&gt;ï¼šäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒSQLäº§ç”Ÿçš„binlogå…ˆå†™å…¥çº¿ç¨‹ç‹¬æœ‰çš„ &lt;strong&gt;&lt;code&gt;binlog cache&lt;/code&gt;&lt;/strong&gt; ã€‚åŒæ—¶ï¼ŒInnoDBå°†æ•°æ®å˜æ›´å†™å…¥ &lt;strong&gt;&lt;code&gt;redo log buffer&lt;/code&gt;&lt;/strong&gt;ã€‚äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBå…ˆå°†redo logçš„çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Commit é˜¶æ®µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°† &lt;code&gt;binlog cache&lt;/code&gt;ä¸­çš„å…¨éƒ¨å†…å®¹å†™å…¥ç£ç›˜ä¸Šçš„ binlog æ–‡ä»¶ï¼ˆ&lt;code&gt;write&lt;/code&gt;+ &lt;code&gt;fsync&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦ binlog æˆåŠŸè½ç›˜ï¼ŒInnoDB å†å°† redo log çš„çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;COMMIT&lt;/code&gt;&lt;/strong&gt;ï¼Œå®Œæˆäº‹åŠ¡æäº¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æœºåˆ¶ä¿è¯äº†å³ä½¿æ•°æ®åº“åœ¨æäº¤è¿‡ç¨‹ä¸­å´©æºƒï¼Œé‡å¯åä¹Ÿèƒ½æ ¹æ®è¿™ä¸¤ç§æ—¥å¿—çš„çŠ¶æ€å†³å®šå›æ»šè¿˜æ˜¯æäº¤ï¼Œä»è€Œç¡®ä¿ä¸»ä»æ•°æ®ä¸€è‡´ ã€‚&lt;/p&gt;
&lt;h4 id="-å…³é”®å‚æ•°sync_binlog"&gt;â€¢ å…³é”®å‚æ•°ï¼š&lt;code&gt;sync_binlog&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;å®ƒæ§åˆ¶ binlog ä»ç³»ç»Ÿç¼“å­˜ï¼ˆpage cacheï¼‰åˆ·å…¥ç£ç›˜ï¼ˆ&lt;code&gt;fsync&lt;/code&gt;ï¼‰çš„é¢‘ç‡ï¼Œç›´æ¥å½±å“æ•°æ®å®‰å…¨æ€§å’Œæ€§èƒ½ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=0&lt;/code&gt;&lt;/strong&gt;ï¼šä¾èµ–æ“ä½œç³»ç»Ÿåˆ·ç›˜ï¼Œæ€§èƒ½æœ€å¥½ï¼Œä½†å®•æœºå¯èƒ½ä¸¢å¤± binlogã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=1&lt;/code&gt;&lt;/strong&gt;ï¼ˆé»˜è®¤ï¼‰ï¼šæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½åˆ·ç›˜ï¼Œæœ€å®‰å…¨ï¼Œä½† IO å¼€é”€å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=N&lt;/code&gt;&lt;/strong&gt;ï¼ˆN&amp;gt;1ï¼‰ï¼šç´¯ç§¯ N ä¸ªäº‹åŠ¡ååˆ·ç›˜ï¼Œæ˜¯å®‰å…¨ä¸æ€§èƒ½çš„æŠ˜è¡·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åŸºæœ¬æ“ä½œä¸ç®¡ç†"&gt;âš™ï¸ åŸºæœ¬æ“ä½œä¸ç®¡ç†
&lt;/h3&gt;&lt;h4 id="-æŸ¥çœ‹ä¸è§£æ-binlog"&gt;â€¢ æŸ¥çœ‹ä¸è§£æ Binlog
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶åˆ—è¡¨
SHOW BINARY LOGS ;
-- æŸ¥çœ‹å½“å‰æ­£åœ¨å†™å…¥çš„æ—¥å¿—æ–‡ä»¶
SHOW MASTER STATUS ;
-- æŸ¥çœ‹ç‰¹å®šæ—¥å¿—æ–‡ä»¶ä¸­çš„äº‹ä»¶
SHOW BINLOG EVENTS IN &amp;#39;mysql-bin.000001&amp;#39; LIMIT 10 ;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;mysqlbinlog&lt;/code&gt;&lt;/strong&gt; å·¥å…·å¯ä»¥æ›´è¯¦ç»†åœ°è§£æäºŒè¿›åˆ¶å†…å®¹ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æ ¹æ®ä½ç½®ç‚¹è§£æ
mysqlbinlog --start-position=219 --stop-position=398 mysql-bin.000001
# æ ¹æ®æ—¶é—´ç‚¹è§£æ
mysqlbinlog --start-datetime=&amp;#34;2025-02-20 00:00:00&amp;#34; mysql-bin.000001
# è§£æROWæ ¼å¼çš„æ—¥å¿—ï¼ˆè§£ç ä¸ºå¯è¯»å½¢å¼ï¼‰
mysqlbinlog --base64-output=DECODE-ROWS -v mysql-bin.000001
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="-ç®¡ç†-binlog-æ–‡ä»¶"&gt;â€¢ ç®¡ç† Binlog æ–‡ä»¶
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—æ»šåŠ¨&lt;/strong&gt;ï¼šåˆ›å»ºæ–°çš„ binlog æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;FLUSH LOGS ;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¸…ç†æ—¥å¿—&lt;/strong&gt;ï¼š&lt;strong&gt;åŠ¡å¿…åœ¨å¤‡ä»½åæ“ä½œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ é™¤æŒ‡å®šæ–‡ä»¶ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—
PURGE BINARY LOGS TO &amp;#39;mysql-bin.000010&amp;#39; ;
-- è®¾ç½®è‡ªåŠ¨è¿‡æœŸæ—¶é—´ï¼ˆä¾‹å¦‚7å¤©ï¼‰
SET GLOBAL expire_logs_days = 7 ;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒåº”ç”¨åœºæ™¯"&gt;ğŸ’¡ æ ¸å¿ƒåº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯ binlog æœ€æ ¸å¿ƒçš„åº”ç”¨ã€‚ä¸»åº“å°† binlog äº‹ä»¶å‘é€ç»™ä»åº“ï¼Œä»åº“é‡æ”¾è¿™äº›äº‹ä»¶ï¼Œå®ç°æ•°æ®åŒæ­¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¢å¤ä¸å›æ»š&lt;/strong&gt;ï¼šç»“åˆå…¨é‡å¤‡ä»½å’Œ binlogï¼Œå¯ä»¥å°†æ•°æ®åº“æ¢å¤åˆ°æŸä¸ªç²¾ç¡®çš„æ—¶é—´ç‚¹æˆ–ä½ç½®ï¼Œç”¨äºæ•…éšœæ¢å¤æˆ–è¯¯æ“ä½œæ•°æ®ä¿®å¤ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å®¡è®¡&lt;/strong&gt;ï¼šé€šè¿‡åˆ†æ binlogï¼Œå¯ä»¥è¿½è¸ªæ•°æ®çš„å˜æ›´å†å²ï¼Œæ»¡è¶³å®‰å…¨å®¡è®¡éœ€æ±‚ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Redo Log çš„åŒºåˆ«&lt;/strong&gt;ï¼šBinlog æ˜¯ Server å±‚é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ“ä½œé€»è¾‘ï¼ˆå¦‚ SQL è¯­å¥æˆ–è¡Œå˜åŒ–ï¼‰ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½å¯ä½¿ç”¨ã€‚è€Œ Redo Log æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œä¸»è¦ç”¨äºå´©æºƒæ¢å¤ã€‚å®ƒä»¬ååŒå·¥ä½œï¼Œç¡®ä¿æ•°æ®æŒä¹…æ€§å’Œä¸€è‡´æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;ROW æ ¼å¼&lt;/strong&gt;æ—¶ï¼Œæ‰¹é‡æ“ä½œå¯èƒ½äº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚éœ€ç›‘æ§ç£ç›˜ç©ºé—´ï¼Œå¹¶åˆç†è®¾ç½® &lt;code&gt;max_binlog_size&lt;/code&gt;ã€‚é€‚å½“è°ƒæ•´ &lt;code&gt;sync_binlog&lt;/code&gt;å€¼æœ‰åŠ©äºåœ¨æ•°æ®å®‰å…¨æ€§å’Œ IO æ€§èƒ½é—´å–å¾—å¹³è¡¡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL binlogã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ–¹é¢è¿˜æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Mybatis 2</title><link>https://dyhes.github.io/p/nowcodermybatis-2/</link><pubDate>Sat, 04 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcodermybatis-2/</guid><description>&lt;h2 id="-å’Œ-"&gt;#{} å’Œ $
&lt;/h2&gt;&lt;p&gt;MyBatis ä¸­çš„ &lt;code&gt;#{}&lt;/code&gt;å’Œ &lt;code&gt;${}&lt;/code&gt;æ˜¯ç”¨äºåŠ¨æ€ SQL å‚æ•°å¤„ç†çš„ä¸¤ç§é‡è¦è¯­æ³•ï¼Œå®ƒä»¬åœ¨å¤„ç†æ–¹å¼ã€å®‰å…¨æ€§å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰æœ¬è´¨åŒºåˆ«ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;#{}&lt;/code&gt;(&lt;strong&gt;é¢„ç¼–è¯‘å ä½ç¬¦&lt;/strong&gt;)&lt;/th&gt;
&lt;th&gt;&lt;code&gt;${}&lt;/code&gt;(&lt;strong&gt;å­—ç¬¦ä¸²æ‹¼æ¥ç¬¦&lt;/strong&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‚æ•°åŒ–æŸ¥è¯¢ï¼Œç”Ÿæˆé¢„ç¼–è¯‘è¯­å¥ (&lt;code&gt;PreparedStatement&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;ç›´æ¥å­—ç¬¦ä¸²æ›¿æ¢ï¼Œç”Ÿæˆé™æ€è¯­å¥ (&lt;code&gt;Statement&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨&lt;/strong&gt;ï¼Œå¤©ç„¶é˜²æ­¢ SQL æ³¨å…¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å®‰å…¨&lt;/strong&gt;ï¼Œå­˜åœ¨ SQL æ³¨å…¥é£é™©ï¼Œéœ€æ‰‹åŠ¨æ ¡éªŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œé¢„ç¼–è¯‘ SQL å¯ç¼“å­˜å’Œå¤ç”¨æ‰§è¡Œè®¡åˆ’&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œæ¯æ¬¡ç”Ÿæˆæ–° SQLï¼Œéœ€é‡æ–°ç¼–è¯‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼•å·å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨æ ¹æ®å‚æ•°ç±»å‹æ·»åŠ æˆ–çœç•¥å¼•å·ï¼ˆå¦‚å­—ç¬¦ä¸²åŠ å•å¼•å·ï¼Œæ•°å­—ä¸åŠ ï¼‰&lt;/td&gt;
&lt;td&gt;ç›´æ¥æ›¿æ¢ï¼Œä¸å¤„ç†å¼•å·ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼ å…¥ &lt;strong&gt;å‚æ•°å€¼&lt;/strong&gt;ï¼ˆWHERE æ¡ä»¶å€¼ã€INSERT/UPDATE å€¼ç­‰ï¼‰&lt;/td&gt;
&lt;td&gt;åŠ¨æ€ &lt;strong&gt;SQL ç‰‡æ®µ&lt;/strong&gt;ï¼ˆè¡¨åã€åˆ—åã€ORDER BY å­å¥ç­‰ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ ä½¿ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ç†è§£åŒºåˆ«çš„å…³é”®åœ¨äºæ˜ç¡®å®ƒä»¬å„è‡ªçš„é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;#{}&lt;/code&gt;çš„åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ç”±ç”¨æˆ·è¾“å…¥æˆ–å¤–éƒ¨ä¼ å…¥çš„ &lt;strong&gt;å€¼&lt;/strong&gt; éƒ½åº”ä½¿ç”¨ &lt;code&gt;#{}&lt;/code&gt;ã€‚è¿™æ˜¯ä¿è¯åº”ç”¨å®‰å…¨çš„ç¬¬ä¸€åŸåˆ™ã€‚å¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;WHERE æ¡ä»¶ä¸­çš„å€¼&lt;/strong&gt;ï¼š&lt;code&gt;WHERE username = #{name}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;INSERT/UPDATE è¯­å¥ä¸­çš„å€¼&lt;/strong&gt;ï¼š&lt;code&gt;VALUES - **LIKE æ¨¡ç³ŠæŸ¥è¯¢çš„å€¼**ï¼šè™½ç„¶æœ‰æ—¶ä¼šçœ‹åˆ°&lt;/code&gt;LIKE &amp;lsquo;%${value}%&amp;rsquo;&lt;code&gt;ï¼Œä½†è¿™éå¸¸å±é™©ã€‚å®‰å…¨åšæ³•æ˜¯åœ¨ Java ä»£ç ä¸­æ‹¼æ¥å¥½é€šé…ç¬¦&lt;/code&gt;String nameParam = &amp;ldquo;%&amp;rdquo; + name + &amp;ldquo;%&amp;rdquo;;&lt;code&gt;ï¼Œç„¶åä¼ å…¥&lt;/code&gt;LIKE #{nameParam}&lt;code&gt;ï¼Œæˆ–ä½¿ç”¨ SQL å‡½æ•°&lt;/code&gt;LIKE CONCAT(&amp;rsquo;%&amp;rsquo;, #{name}, &amp;lsquo;%&amp;rsquo;)`ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸å¾—å·²ä½¿ç”¨ &lt;code&gt;${}&lt;/code&gt;çš„åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“éœ€è¦åŠ¨æ€æ”¹å˜ SQL è¯­å¥çš„ &lt;strong&gt;ç»“æ„éƒ¨åˆ†&lt;/strong&gt;ï¼Œè€Œè¿™äº›éƒ¨åˆ†ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰æ— æ³•ä½œä¸ºé¢„ç¼–è¯‘å‚æ•°æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ &lt;code&gt;${}&lt;/code&gt;ã€‚ä½¿ç”¨æ—¶ &lt;strong&gt;å¿…é¡»&lt;/strong&gt; å¯¹å‚æ•°å€¼è¿›è¡Œä¸¥æ ¼çš„ç™½åå•æ ¡éªŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è¡¨å/åˆ—å&lt;/strong&gt;ï¼šåœ¨åˆ†è¡¨åœºæ™¯ä¸­ï¼Œå¦‚ &lt;code&gt;SELECT * FROM ${tableName}&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY æ’åºå­—æ®µ&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;ORDER BY ${sortField} ${sortOrder}&lt;/code&gt;ã€‚æ›´å®‰å…¨çš„åšæ³•æ˜¯ç”¨ &lt;code&gt;&amp;lt;choose&amp;gt;&lt;/code&gt;æŒ‡ä»¤æšä¸¾å¯é€‰å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰¹é‡åˆ é™¤çš„ IN è¯­å¥&lt;/strong&gt;ï¼š&lt;code&gt;DELETE FROM t_car WHERE id IN(${ids})&lt;/code&gt;ï¼Œå› ä¸º &lt;code&gt;#{}&lt;/code&gt;ä¼šå°†æ•´ä¸ª ID åºåˆ—è§†ä¸ºä¸€ä¸ªå¸¦å¼•å·çš„å­—ç¬¦ä¸²å¯¼è‡´è¯­æ³•é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®‰å…¨è­¦ç¤ºsqlæ³¨å…¥é£é™©è¯¦è§£"&gt;ğŸ”’ å®‰å…¨è­¦ç¤ºï¼šSQLæ³¨å…¥é£é™©è¯¦è§£
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸¤è€…æœ€æ ¸å¿ƒçš„åŒºåˆ«ï¼Œå€¼å¾—æ·±å…¥ç†è§£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;#{}&lt;/code&gt;ä¸ºä½•å®‰å…¨ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒé‡‡ç”¨ &lt;strong&gt;é¢„ç¼–è¯‘&lt;/strong&gt; æœºåˆ¶ã€‚MyBatis ä¼šå…ˆå°† &lt;code&gt;#{}&lt;/code&gt;è§£æä¸º JDBC çš„ &lt;code&gt;?&lt;/code&gt;å ä½ç¬¦ï¼ŒSQL è¯­å¥ç»“æ„å…ˆè¢«ç¡®å®šã€‚éšåå‚æ•°å€¼é€šè¿‡ &lt;code&gt;PreparedStatement&lt;/code&gt;çš„ &lt;code&gt;setXxx&lt;/code&gt;æ–¹æ³•ä¼ å…¥ï¼Œæ•°æ®åº“é©±åŠ¨ä¼šè´Ÿè´£å¯¹å€¼è¿›è¡Œæ­£ç¡®çš„è½¬ä¹‰å’Œå¤„ç†ï¼Œä»æ ¹æœ¬ä¸Šæœç»äº†æ³¨å…¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;${}&lt;/code&gt;ä¸ºä½•å±é™©ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒåªæ˜¯ç®€å•çš„ &lt;strong&gt;å­—ç¬¦ä¸²æ‹¼æ¥&lt;/strong&gt;ã€‚å‡è®¾æœ‰ä¸€æ¡ SQLï¼š&lt;code&gt;SELECT * FROM users WHERE name = '${name}'&lt;/code&gt;ã€‚å¦‚æœç”¨æˆ·è¾“å…¥çš„ &lt;code&gt;name&lt;/code&gt;å€¼æ˜¯ &lt;code&gt;' OR '1'='1&lt;/code&gt;ï¼Œæ‹¼æ¥åçš„ SQL å°†å˜ä¸ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE name = &amp;#39;&amp;#39; OR &amp;#39;1&amp;#39;=&amp;#39;1&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥ä¼šè¿”å›æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼Œé€ æˆä¸¥é‡çš„ä¿¡æ¯æ³„éœ²ã€‚å¦‚æœå‚æ•°ç”¨äºè¡¨åç­‰åœºæ™¯ï¼Œæ”»å‡»è€…ç”šè‡³å¯èƒ½æ‰§è¡Œåˆ è¡¨ç­‰ç ´åæ€§æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åœ¨é€‰æ‹©ä½¿ç”¨ &lt;code&gt;#{}&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;${}&lt;/code&gt;æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤ä½¿ç”¨ &lt;code&gt;#{}&lt;/code&gt;&lt;/strong&gt;ï¼šå¯¹äºæ‰€æœ‰ä¼ å…¥ &lt;strong&gt;å€¼&lt;/strong&gt; çš„åœºæ™¯ï¼Œè¿™æ˜¯å”¯ä¸€å®‰å…¨çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…è¯„ä¼° &lt;code&gt;${}&lt;/code&gt;&lt;/strong&gt;ï¼šä»…åœ¨éœ€è¦åŠ¨æ€æ”¹å˜ SQL &lt;strong&gt;å…³é”®å­—æˆ–ç»“æ„&lt;/strong&gt;ï¼ˆè¡¨åã€åˆ—åã€æ’åºï¼‰æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ç¬¬ä¸€&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;${}&lt;/code&gt;æ—¶ï¼Œå¿…é¡»å¯¹ä¼ å…¥çš„å‚æ•°å€¼è¿›è¡Œ &lt;strong&gt;ç™½åå•éªŒè¯&lt;/strong&gt;ï¼Œç»ä¸ç›´æ¥å°†ä¸å¯ä¿¡çš„ç”¨æˆ·è¾“å…¥æ‹¼æ¥åˆ° SQL ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å®‰å…¨ã€é«˜æ•ˆåœ°ä½¿ç”¨ MyBatisã€‚å¦‚æœä½ æœ‰å…³äºç‰¹å®šä½¿ç”¨åœºæ™¯çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç¼“å­˜"&gt;ç¼“å­˜
&lt;/h2&gt;&lt;p&gt;MyBatis çš„ç¼“å­˜æœºåˆ¶æ˜¯æå‡æ•°æ®åº“äº¤äº’æ€§èƒ½çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå®ƒé€šè¿‡ä¸¤çº§ç¼“å­˜æœ‰æ•ˆå‡å°‘æ•°æ®åº“è®¿é—®å‹åŠ›ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å…¶æ ¸å¿ƒæ„æˆä¸åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ä¸€çº§ç¼“å­˜&lt;/th&gt;
&lt;th&gt;äºŒçº§ç¼“å­˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SqlSession&lt;/code&gt;çº§åˆ«ï¼ˆåŒä¸€æ•°æ®åº“ä¼šè¯ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Mapper&lt;/code&gt;çº§åˆ«ï¼ˆåŒä¸€å‘½åç©ºé—´ï¼Œè·¨ &lt;code&gt;SqlSession&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å¯æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤å¼€å¯&lt;/strong&gt;ï¼Œæ— éœ€é…ç½®&lt;/td&gt;
&lt;td&gt;éœ€åœ¨å…¨å±€é…ç½®å’Œå…·ä½“ &lt;code&gt;Mapper.xml&lt;/code&gt;ä¸­&lt;strong&gt;æ‰‹åŠ¨å¼€å¯&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;SqlSession&lt;/code&gt;ç»‘å®šï¼Œä¼šè¯å…³é—­åˆ™ç¼“å­˜å¤±æ•ˆ&lt;/td&gt;
&lt;td&gt;ä¸æ•´ä¸ªåº”ç”¨ç»‘å®šï¼Œç”Ÿå‘½å‘¨æœŸæ›´é•¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å…±äº«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éš”ç¦»&lt;/strong&gt;ï¼Œä¸åŒ &lt;code&gt;SqlSession&lt;/code&gt;ç¼“å­˜ä¸å…±äº«&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«&lt;/strong&gt;ï¼Œå¤šä¸ª &lt;code&gt;SqlSession&lt;/code&gt;å¯è®¿é—®åŒä¸€ç¼“å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº &lt;code&gt;HashMap&lt;/code&gt;çš„ &lt;code&gt;PerpetualCache&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯æ‰©å±•ï¼Œæ”¯æŒé›†æˆç¬¬ä¸‰æ–¹ç¼“å­˜ï¼ˆå¦‚ EhCache, Redisï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸€çº§ç¼“å­˜ä¼šè¯çº§åŠ é€Ÿ"&gt;ğŸ’¾ ä¸€çº§ç¼“å­˜ï¼šä¼šè¯çº§åŠ é€Ÿ
&lt;/h3&gt;&lt;p&gt;ä¸€çº§ç¼“å­˜æ˜¯ MyBatis é»˜è®¤æä¾›çš„ï¼Œå…¶è®¾è®¡ç›®æ ‡æ˜¯ä¼˜åŒ–åŒä¸€æ•°æ®åº“ä¼šè¯å†…çš„é‡å¤æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹ä¸ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šå½“ä½ æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢æ—¶ï¼ŒMyBatis ä¼šä¸ºè¿™æ¡æŸ¥è¯¢è¯­å¥ï¼ˆç»“åˆå‚æ•°ç­‰å› ç´ ï¼‰ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„é”®ï¼ˆKeyï¼‰ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœä½œä¸ºå€¼ï¼ˆValueï¼‰å­˜å…¥å½“å‰ &lt;code&gt;SqlSession&lt;/code&gt;å†…éƒ¨çš„ç¼“å­˜æ˜ å°„ï¼ˆMapï¼‰ä¸­ã€‚æ­¤åï¼Œåœ¨åŒä¸€ä¼šè¯ä¸­æ‰§è¡Œå®Œå…¨ç›¸åŒçš„æŸ¥è¯¢æ—¶ï¼ŒMyBatis ä¼šç›´æ¥ä»è¿™ä¸ªæ˜ å°„ä¸­è¿”å›ç»“æœï¼Œè€Œæ— éœ€å†æ¬¡è®¿é—®æ•°æ®åº“ã€‚ä¸€çº§ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸä¸ &lt;code&gt;SqlSession&lt;/code&gt;ç´§å¯†ç»‘å®šï¼Œå½“ä¼šè¯é€šè¿‡ &lt;code&gt;close()&lt;/code&gt;æ–¹æ³•å…³é—­æ—¶ï¼Œç¼“å­˜ä¹Ÿéšä¹‹é”€æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜å¤±æ•ˆæ—¶æœº&lt;/strong&gt;ï¼šä¸ºç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œåœ¨æ‰§è¡Œ &lt;code&gt;INSERT&lt;/code&gt;ã€&lt;code&gt;UPDATE&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt;ç­‰æ•°æ®å˜æ›´æ“ä½œï¼Œæˆ–è°ƒç”¨ &lt;code&gt;commit()&lt;/code&gt;ã€&lt;code&gt;rollback()&lt;/code&gt;æ–¹æ³•ï¼Œä»¥åŠæ˜¾å¼è°ƒç”¨ &lt;code&gt;sqlSession.clearCache()&lt;/code&gt;æ—¶ï¼Œå½“å‰ &lt;code&gt;SqlSession&lt;/code&gt;çš„ä¸€çº§ç¼“å­˜ä¼šè¢«&lt;strong&gt;æ¸…ç©º&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-äºŒçº§ç¼“å­˜åº”ç”¨çº§å…±äº«"&gt;ğŸŒ äºŒçº§ç¼“å­˜ï¼šåº”ç”¨çº§å…±äº«
&lt;/h3&gt;&lt;p&gt;äºŒçº§ç¼“å­˜çš„ä½œç”¨åŸŸæ›´å¹¿ï¼Œæ—¨åœ¨è·¨ä¼šè¯å…±äº«å¸¸ç”¨æ•°æ®ï¼Œé€‚åˆåº”ç”¨çº§åˆ«çš„é«˜é¢‘åªè¯»æ•°æ®ç¼“å­˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ä¸é…ç½®&lt;/strong&gt;ï¼šå¯ç”¨äºŒçº§ç¼“å­˜éœ€è¦ä¸¤æ­¥ï¼š
&lt;ol&gt;
&lt;li&gt;åœ¨ MyBatis å…¨å±€é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;mybatis-config.xml&lt;/code&gt;ï¼‰ä¸­ç¡®ä¿ &lt;code&gt;&amp;lt;setting name=&amp;quot;cacheEnabled&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;&lt;/code&gt;ï¼ˆæ–°ç‰ˆæœ¬é€šå¸¸é»˜è®¤å¼€å¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨éœ€è¦å¯ç”¨äºŒçº§ç¼“å­˜çš„ç‰¹å®š &lt;code&gt;Mapper.xml&lt;/code&gt;æ–‡ä»¶ä¸­æ·»åŠ  &lt;code&gt;&amp;lt;cache/&amp;gt;&lt;/code&gt;æ ‡ç­¾ã€‚ä½ å¯ä»¥åœ¨æ­¤æ ‡ç­¾ä¸­é…ç½®è¯¦ç»†çš„ç¼“å­˜ç­–ç•¥ï¼Œä¾‹å¦‚ &lt;code&gt;eviction&lt;/code&gt;ï¼ˆå›æ”¶ç­–ç•¥ï¼Œå¦‚ LRUã€FIFOï¼‰ã€&lt;code&gt;flushInterval&lt;/code&gt;ï¼ˆè‡ªåŠ¨åˆ·æ–°é—´éš”ï¼‰ã€&lt;code&gt;size&lt;/code&gt;ï¼ˆç¼“å­˜å¼•ç”¨æ•°ç›®ï¼‰å’Œ &lt;code&gt;readOnly&lt;/code&gt;ï¼ˆæ˜¯å¦åªè¯»ï¼‰ç­‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæœºåˆ¶ä¸åºåˆ—åŒ–è¦æ±‚&lt;/strong&gt;ï¼šäºŒçº§ç¼“å­˜çš„å·¥ä½œæœºåˆ¶å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šä¸€ä¸ª &lt;code&gt;SqlSession&lt;/code&gt;æŸ¥è¯¢æ•°æ®åï¼Œåœ¨å®ƒè¢«å…³é—­æˆ–æäº¤æ—¶ï¼ŒæŸ¥è¯¢ç»“æœä¼šä»å…¶ä¸€çº§ç¼“å­˜&lt;strong&gt;è½¬å­˜&lt;/strong&gt;åˆ°å¯¹åº”çš„äºŒçº§ç¼“å­˜åŒºåŸŸï¼ˆä»¥ Mapper çš„å‘½åç©ºé—´åˆ’åˆ†ï¼‰ã€‚ç”±äºè¿™äº›æ•°æ®å¯èƒ½éœ€è¦è¢«åºåˆ—åŒ–åˆ°ç£ç›˜æˆ–åœ¨ä¸åŒä¼šè¯é—´ä¼ è¾“ï¼Œå› æ­¤å¯¹åº”çš„ Java å®ä½“ç±»&lt;strong&gt;å¿…é¡»å®ç° &lt;code&gt;Serializable&lt;/code&gt;æ¥å£&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜åŒæ­¥ä¸æ¸…ç©º&lt;/strong&gt;ï¼šå½“æ‰§è¡ŒåŒå‘½åç©ºé—´ä¸‹çš„å¢ã€åˆ ã€æ”¹æ“ä½œå¹¶æäº¤äº‹åŠ¡åï¼ŒMyBatis ä¼šè‡ªåŠ¨&lt;strong&gt;æ¸…ç©º&lt;/strong&gt;è¯¥å‘½åç©ºé—´ä¸‹çš„äºŒçº§ç¼“å­˜ï¼Œä»¥é˜²æ­¢å‡ºç°è„è¯»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¼“å­˜ååŒå·¥ä½œåŸç†ä¸é¡ºåº"&gt;ğŸ”„ ç¼“å­˜ååŒå·¥ä½œåŸç†ä¸é¡ºåº
&lt;/h3&gt;&lt;p&gt;å½“åŒæ—¶å¯ç”¨ä¸€çº§å’ŒäºŒçº§ç¼“å­˜æ—¶ï¼ŒMyBatis å¤„ç†ä¸€æ¡æŸ¥è¯¢è¯·æ±‚çš„é¡ºåºéµå¾ªä¸€ä¸ªæ ‡å‡†çš„æŸ¥è¯¢æµç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚] --&amp;gt; B{äºŒçº§ç¼“å­˜&amp;lt;br&amp;gt;æ˜¯å¦å‘½ä¸­ï¼Ÿ}
B -- å‘½ä¸­ --&amp;gt; C[ç›´æ¥è¿”å›æ•°æ®]
B -- æœªå‘½ä¸­ --&amp;gt; D{ä¸€çº§ç¼“å­˜&amp;lt;br&amp;gt;æ˜¯å¦å‘½ä¸­ï¼Ÿ}
D -- å‘½ä¸­ --&amp;gt; E[è¿”å›æ•°æ®è‡³äºŒçº§ç¼“å­˜]
D -- æœªå‘½ä¸­ --&amp;gt; F[æŸ¥è¯¢æ•°æ®åº“]
F --&amp;gt; G[æ•°æ®å­˜å…¥ä¸€çº§ç¼“å­˜]
G --&amp;gt; E
E --&amp;gt; C
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Spring Boot ç­‰é›†æˆç¯å¢ƒä¸­ï¼Œç”±äº &lt;code&gt;SqlSession&lt;/code&gt;çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½å—äº‹åŠ¡ç®¡ç†å™¨å½±å“ï¼Œä¸€çº§ç¼“å­˜çš„è¡Œä¸ºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚&lt;/p&gt;
&lt;h3 id="-å®è·µå»ºè®®ä¸å¸¸è§é—®é¢˜"&gt;ğŸ’¡ å®è·µå»ºè®®ä¸å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt;ï¼šæœ€é€‚åˆäºä¼šè¯å†…çŸ­æœŸå†…é‡å¤æŸ¥è¯¢ç›¸åŒæ•°æ®çš„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äºŒçº§ç¼“å­˜&lt;/strong&gt;ï¼šéå¸¸é€‚åˆè¯»å¤šå†™å°‘ã€å¯¹æ•°æ®å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„æ•°æ®ï¼Œä¾‹å¦‚ç³»ç»Ÿé…ç½®é¡¹ã€é™æ€å­—å…¸è¡¨ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§æŒ‘æˆ˜&lt;/strong&gt;ï¼šäºŒçº§ç¼“å­˜çš„ä¸»è¦æŒ‘æˆ˜åœ¨äºæ•°æ®ä¸€è‡´æ€§ã€‚ç”±äºç¼“å­˜æ˜¯ä»¥ &lt;code&gt;namespace&lt;/code&gt;ï¼ˆå‘½åç©ºé—´ï¼‰ä¸ºç²’åº¦ç®¡ç†çš„ï¼Œå¯¹è¡¨ä¸­ä»»ä½•æ•°æ®çš„ä¿®æ”¹éƒ½ä¼šå¯¼è‡´æ•´ä¸ªå‘½åç©ºé—´çš„ç¼“å­˜å¤±æ•ˆã€‚è¿™åœ¨å…³è”æŸ¥è¯¢å¤æ‚çš„åœºæ™¯ä¸‹å¯èƒ½å¯¼è‡´å¤§èŒƒå›´çš„ç¼“å­˜æ¸…ç©ºï¼Œéœ€è¦è°¨æ…è®¾è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰ç¼“å­˜é›†æˆ&lt;/strong&gt;ï¼šMyBatis çš„ç¼“å­˜æ¥å£æ˜¯å¼€æ”¾çš„ï¼Œå…è®¸ä½ è½»æ¾é›†æˆæ›´å¼ºå¤§ã€æ›´é€‚åˆç”Ÿäº§ç¯å¢ƒçš„ç¬¬ä¸‰æ–¹ç¼“å­˜åº“ï¼Œå¦‚ &lt;strong&gt;Redis&lt;/strong&gt;ï¼ˆç”¨äºåˆ†å¸ƒå¼ç¼“å­˜ï¼‰æˆ– &lt;strong&gt;EhCache&lt;/strong&gt;ï¼ˆåŠŸèƒ½ä¸°å¯Œçš„æœ¬åœ°ç¼“å­˜ï¼‰æ¥æ›¿ä»£é»˜è®¤å®ç°ã€‚è¿™ä¸ºåº”å¯¹é«˜å¹¶å‘å’Œåˆ†å¸ƒå¼åœºæ™¯æä¾›äº†çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MyBatis ç¼“å­˜ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æœ‰è¿›ä¸€æ­¥ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç¼“å­˜å±‚çº§"&gt;ç¼“å­˜å±‚çº§
&lt;/h2&gt;&lt;p&gt;MyBatisç¼“å­˜å’ŒSpring Cacheæ˜¯ä¸åŒå±‚é¢çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œå®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºä½œç”¨èŒƒå›´å’ŒæŠ½è±¡å±‚çº§ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MyBatisç¼“å­˜&lt;/strong&gt; (æŒä¹…å±‚ç¼“å­˜)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Spring Cache&lt;/strong&gt; (åº”ç”¨å±‚ç¼“å­˜æŠ½è±¡)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ORMæ¡†æ¶å†…éƒ¨ç¼“å­˜&lt;/strong&gt;ï¼Œä¸“æ³¨äºç¼“å­˜SQLæŸ¥è¯¢ç»“æœï¼Œå‡å°‘æ•°æ®åº“è®¿é—®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜æŠ½è±¡æ¡†æ¶&lt;/strong&gt;ï¼Œæä¾›ç»Ÿä¸€çš„æ³¨è§£å’ŒAPIï¼Œå±è”½ä¸åŒç¼“å­˜å®ç°ï¼ˆå¦‚Redisã€Ehcacheï¼‰çš„å·®å¼‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨å±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹…å±‚ï¼ˆDAOå±‚ï¼‰&lt;/strong&gt;ï¼Œä¸&lt;code&gt;SqlSession&lt;/code&gt;å’Œ&lt;code&gt;Mapper&lt;/code&gt;ç´§å¯†ç»‘å®š&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸šåŠ¡å±‚ï¼ˆServiceå±‚ï¼‰&lt;/strong&gt;ï¼Œç”¨äºç¼“å­˜æ–¹æ³•æ‰§è¡Œç»“æœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜ç²’åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;SQLçº§åˆ«&lt;/strong&gt;ï¼Œä»¥æŸ¥è¯¢è¯­å¥å’Œå‚æ•°ä¸ºé”®ç¼“å­˜ç»“æœé›†&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•çº§åˆ«&lt;/strong&gt;ï¼Œä»¥æ–¹æ³•åå’Œå‚æ•°ä¸ºé”®ç¼“å­˜è¿”å›å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å…±äº«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt;ï¼š&lt;code&gt;SqlSession&lt;/code&gt;å†…å…±äº«ï¼›&lt;strong&gt;äºŒçº§ç¼“å­˜&lt;/strong&gt;ï¼š&lt;code&gt;Mapper&lt;/code&gt;å‘½åç©ºé—´å†…å…±äº«&lt;/td&gt;
&lt;td&gt;å–å†³äºåº•å±‚ç¼“å­˜å®ç°ï¼ˆå¦‚Rediså¯è·¨åº”ç”¨å…±äº«ï¼ŒCaffeineåˆ™æœ¬åœ°ä½¿ç”¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ•°æ®åº“æ“ä½œå¤©ç„¶è”åŠ¨ï¼Œæ‰§è¡ŒåŒå‘½åç©ºé—´çš„å¢åˆ æ”¹æ“ä½œä¼šè‡ªåŠ¨æ¸…ç©ºç›¸å…³ç¼“å­˜&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨é…ç½®ï¼ˆå¦‚ä½¿ç”¨&lt;code&gt;@CacheEvict&lt;/code&gt;æ³¨è§£ï¼‰ï¼Œæ¡†æ¶æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥æ•°æ®å˜æ›´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸ååŒä½¿ç”¨"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ä¸ååŒä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;ç†è§£åŒºåˆ«åï¼Œå…³é”®åœ¨äºæ ¹æ®ä½ çš„ä¸šåŠ¡åœºæ™¯åšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ MyBatis ç¼“å­˜çš„åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜é¢‘é™æ€æ•°æ®æŸ¥è¯¢&lt;/strong&gt;ï¼šéå¸¸é€‚åˆç¼“å­˜å˜åŒ–æå°‘çš„æ•°æ®ï¼Œä¾‹å¦‚&lt;strong&gt;å­—å…¸è¡¨ã€é…ç½®ä¿¡æ¯ã€åŸå¸‚åˆ—è¡¨&lt;/strong&gt;ç­‰ã€‚è¿™äº›æ•°æ®è¯»å¤šå†™å°‘ï¼Œä½¿ç”¨MyBatisäºŒçº§ç¼“å­˜èƒ½æå¤§é™ä½æ•°æ®åº“å‹åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•çš„å•è¡¨æŸ¥è¯¢&lt;/strong&gt;ï¼šå¯¹äºå…³è”å…³ç³»ç®€å•çš„æŸ¥è¯¢ï¼Œå¼€å¯äºŒçº§ç¼“å­˜èƒ½è·å¾—å¾ˆå¥½çš„æ€§èƒ½æå‡ï¼Œä¸”ä¸æ˜“å‡ºç°è„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âš ï¸ æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼šMyBatisé»˜è®¤çš„äºŒçº§ç¼“å­˜æ˜¯&lt;strong&gt;æœ¬åœ°ç¼“å­˜&lt;/strong&gt;ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¼šå­˜åœ¨æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®é€šè¿‡&lt;code&gt;&amp;lt;cache type=&amp;quot;...&amp;quot;&amp;gt;&lt;/code&gt;é…ç½®é›†æˆ&lt;strong&gt;Redis&lt;/strong&gt;æˆ–&lt;strong&gt;Ehcache&lt;/strong&gt;ç­‰åˆ†å¸ƒå¼/é›†ä¸­å¼ç¼“å­˜å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ Spring Cache çš„åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ä¸šåŠ¡è®¡ç®—ç»“æœ&lt;/strong&gt;ï¼šå½“æŸä¸ªServiceæ–¹æ³•éœ€è¦è¿›è¡Œå¤æ‚è®¡ç®—ï¼ˆå¦‚æ•°æ®åˆ†æã€æŠ¥è¡¨ç”Ÿæˆï¼‰ï¼Œä½†å…¶ç»“æœåœ¨ä¸€æ®µæ—¶é—´å†…å¯å¤ç”¨æ—¶ï¼Œä½¿ç”¨&lt;code&gt;@Cacheable&lt;/code&gt;éå¸¸åˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨å¤–éƒ¨APIæˆ–å¤æ‚æŸ¥è¯¢&lt;/strong&gt;ï¼šå¦‚æœæ–¹æ³•å†…éƒ¨éœ€è¦è°ƒç”¨è€—æ—¶çš„ç¬¬ä¸‰æ–¹æ¥å£ï¼Œæˆ–è€…ç»„åˆå¤šä¸ªDAOæŸ¥è¯¢å¾—åˆ°ä¸€ä¸ªå¤æ‚ç»“æœï¼Œç¼“å­˜æ•´ä¸ªæ–¹æ³•çš„è¿”å›å€¼æ¯”åªç¼“å­˜å•ä¸ªDAOæŸ¥è¯¢æ›´é«˜æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´çµæ´»çš„ç¼“å­˜æ§åˆ¶&lt;/strong&gt;ï¼šSpring Cacheçš„&lt;code&gt;unless&lt;/code&gt;ã€&lt;code&gt;condition&lt;/code&gt;ç­‰å±æ€§å…è®¸ä½ æ ¹æ®è¿”å›å€¼æˆ–å‚æ•°åŠ¨æ€å†³å®šæ˜¯å¦ç¼“å­˜ï¼Œæ§åˆ¶ç²’åº¦æ›´ç»†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸¤è€…ååŒå·¥ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒMyBatisç¼“å­˜å’ŒSpring Cacheå®Œå…¨å¯ä»¥ååŒå·¥ä½œï¼Œå½¢æˆå¤šçº§ç¼“å­˜ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚å…¶ååŒå·¥ä½œçš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ä¸šåŠ¡æ–¹æ³•è°ƒç”¨] --&amp;gt; B{Spring Cache&amp;lt;br&amp;gt;æ˜¯å¦å‘½ä¸­?}
B -- å‘½ä¸­ --&amp;gt; C[ç›´æ¥è¿”å›ç»“æœ]
B -- æœªå‘½ä¸­ --&amp;gt; D[æ‰§è¡Œæ–¹æ³•å†…éƒ¨é€»è¾‘]
D --&amp;gt; E[è°ƒç”¨Mapperæ–¹æ³•è¿›è¡ŒæŸ¥è¯¢]
E --&amp;gt; F{MyBatisäºŒçº§ç¼“å­˜&amp;lt;br&amp;gt;æ˜¯å¦å‘½ä¸­?}
F -- å‘½ä¸­ --&amp;gt; G[è¿”å›æŸ¥è¯¢ç»“æœ]
F -- æœªå‘½ä¸­ --&amp;gt; H{MyBatisä¸€çº§ç¼“å­˜&amp;lt;br&amp;gt;æ˜¯å¦å‘½ä¸­?}
H -- å‘½ä¸­ --&amp;gt; G
H -- æœªå‘½ä¸­ --&amp;gt; I[æŸ¥è¯¢æ•°æ®åº“]
I --&amp;gt; G
G --&amp;gt; J[ç»“æœè¿”å›è‡³ä¸šåŠ¡æ–¹æ³•]
J --&amp;gt; K[ç»“æœå­˜å…¥Spring Cache]
K --&amp;gt; C
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªè·å–å•†å“è¯¦æƒ…çš„æ–¹æ³•å¯èƒ½å†…éƒ¨è°ƒç”¨äº†å¤šä¸ªMapperæ¥ç»„åˆä¿¡æ¯ï¼ˆå•†å“åŸºæœ¬ä¿¡æ¯ã€SKUåˆ—è¡¨ã€å•†å®¶ä¿¡æ¯ï¼‰ã€‚ä½ å¯ä»¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨&lt;strong&gt;MyBatisäºŒçº§ç¼“å­˜&lt;/strong&gt;æ¥ç¼“å­˜æ¯ä¸ªMapperå„è‡ªçš„ç®€å•æŸ¥è¯¢ç»“æœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨&lt;strong&gt;Spring Cache&lt;/strong&gt;æ¥ç¼“å­˜æ•´ä¸ªå•†å“è¯¦æƒ…æ–¹æ³•è¿”å›çš„å¤æ‚èšåˆå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·ï¼Œå½“å•†å“åŸºæœ¬ä¿¡æ¯æœªå˜ï¼Œä½†SKUåˆ—è¡¨å˜åŒ–æ—¶ï¼ŒMyBatisç¼“å­˜å¯èƒ½å±€éƒ¨å¤±æ•ˆï¼Œè€ŒSpring Cacheæ•´ä½“å¤±æ•ˆï¼Œç­–ç•¥æ¸…æ™°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä½¿ç”¨ç¼“å­˜çš„é€šç”¨æ³¨æ„äº‹é¡¹"&gt;âš ï¸ ä½¿ç”¨ç¼“å­˜çš„é€šç”¨æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šè¿™æ˜¯ç¼“å­˜å¸¦æ¥çš„æœ€å¤§æŒ‘æˆ˜ã€‚åŠ¡å¿…æ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¸ºç¼“å­˜è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ç©¿é€/å‡»ç©¿/é›ªå´©&lt;/strong&gt;ï¼šé’ˆå¯¹è¿™äº›å…¸å‹é—®é¢˜ï¼Œéœ€è¦é‡‡å–ç›¸åº”æªæ–½ï¼Œå¦‚ä¸ºä¸å­˜åœ¨çš„&lt;code&gt;key&lt;/code&gt;ä¹Ÿè®¾ç½®ç©ºå€¼ã€ä½¿ç”¨äº’æ–¥é”ã€è®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;ï¼šç‰¹åˆ«æ˜¯å¯¹äºæœ¬åœ°ç¼“å­˜ï¼Œè¦è®¾ç½®åˆé€‚çš„å¤§å°å’Œæ·˜æ±°ç­–ç•¥ï¼ˆå¦‚LRUï¼‰ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;MyBatisç¼“å­˜æ˜¯æ•°æ®è®¿é—®å±‚çš„â€œç²¾ç»†åŒ–â€ç¼“å­˜ï¼Œè€ŒSpring Cacheæ˜¯ä¸šåŠ¡å±‚çš„â€œç²—ç²’åº¦â€ç¼“å­˜æŠ½è±¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ çš„ä¼˜åŒ–ç›®æ ‡æ˜¯&lt;strong&gt;å‡å°‘é‡å¤çš„æ•°æ®åº“æŸ¥è¯¢&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯ç®€å•çš„ã€é™æ€çš„æ•°æ®æŸ¥è¯¢ï¼Œåº”ä¼˜å…ˆè€ƒè™‘&lt;strong&gt;MyBatisç¼“å­˜&lt;/strong&gt;ï¼Œå°¤å…¶æ˜¯æ­é…Redisç­‰å®ç°çš„äºŒçº§ç¼“å­˜ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ éœ€è¦ç¼“å­˜çš„æ˜¯&lt;strong&gt;å¤æ‚çš„ä¸šåŠ¡é€»è¾‘è®¡ç®—ç»“æœ&lt;/strong&gt;ï¼Œæˆ–è€…å¸Œæœ›æœ‰ä¸€ä¸ª&lt;strong&gt;ç»Ÿä¸€ã€çµæ´»ã€ä¸åº•å±‚ç¼“å­˜æŠ€æœ¯æ— å…³&lt;/strong&gt;çš„ç¼“å­˜æ–¹å¼ï¼Œé‚£ä¹ˆ&lt;strong&gt;Spring Cache&lt;/strong&gt;æ˜¯æ›´ä½³é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å¾ˆå¤šç°ä»£åº”ç”¨ä¸­ï¼Œä¸€ç§å¸¸è§çš„é«˜æ•ˆæ¨¡å¼æ˜¯ï¼š&lt;strong&gt;åˆ©ç”¨MyBatisï¼ˆæ•´åˆRedisï¼‰å¤„ç†DAOå±‚çš„SQLç»“æœç¼“å­˜ï¼ŒåŒæ—¶ä½¿ç”¨Spring Cacheå¤„ç†Serviceå±‚çš„ä¸šåŠ¡æ–¹æ³•ç¼“å­˜&lt;/strong&gt;ï¼Œä¸¤è€…äº’è¡¥ï¼Œå…±åŒæ„å»ºé«˜æ€§èƒ½çš„åº”ç”¨æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åšå‡ºæ›´åˆé€‚çš„æŠ€æœ¯å†³ç­–ã€‚&lt;/p&gt;
&lt;h2 id="spring-data-jpa-ç¼“å­˜"&gt;Spring DATA JPA ç¼“å­˜
&lt;/h2&gt;&lt;p&gt;Spring Data JPA çš„ç¼“å­˜æœºåˆ¶æ˜¯æå‡åº”ç”¨æ€§èƒ½çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒé€šè¿‡å¤šçº§ç¼“å­˜å‡å°‘æ•°æ®åº“è®¿é—®ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å…¶æ ¸å¿ƒçš„&lt;strong&gt;ä¸‰çº§ç¼“å­˜ç»“æ„&lt;/strong&gt;åŠå…¶å…³é”®ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt; (Sessionç¼“å­˜)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;äºŒçº§ç¼“å­˜&lt;/strong&gt; (SessionFactoryç¼“å­˜)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æŸ¥è¯¢ç¼“å­˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ä¸ª &lt;code&gt;EntityManager&lt;/code&gt;(æˆ–äº‹åŠ¡) å†…éƒ¨&lt;/td&gt;
&lt;td&gt;åº”ç”¨çº§åˆ«ï¼Œè·¨ &lt;code&gt;EntityManager&lt;/code&gt;å…±äº«&lt;/td&gt;
&lt;td&gt;åº”ç”¨çº§åˆ«ï¼Œç¼“å­˜ç‰¹å®šæŸ¥è¯¢çš„ç»“æœåˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å¯æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤å¼€å¯&lt;/strong&gt;ï¼Œæ— éœ€é…ç½®&lt;/td&gt;
&lt;td&gt;éœ€&lt;strong&gt;æ‰‹åŠ¨å¼€å¯&lt;/strong&gt;å¹¶é…ç½®ç¼“å­˜æä¾›å•†ï¼ˆå¦‚EhCacheï¼‰&lt;/td&gt;
&lt;td&gt;éœ€&lt;strong&gt;æ‰‹åŠ¨å¼€å¯&lt;/strong&gt;å¹¶åœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šä½¿ç”¨ &lt;code&gt;@QueryHints&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ä½“å¯¹è±¡&lt;/td&gt;
&lt;td&gt;å®ä½“å¯¹è±¡&lt;/td&gt;
&lt;td&gt;æŸ¥è¯¢è¯­å¥å’Œå‚æ•°ç»„åˆçš„ç»“æœé›†IDåˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;EntityManager&lt;/code&gt;ç»‘å®šï¼Œä¼šè¯ç»“æŸåˆ™ç¼“å­˜å¤±æ•ˆ&lt;/td&gt;
&lt;td&gt;ä¸åº”ç”¨åŒç”Ÿå‘½å‘¨æœŸï¼Œç›´åˆ°ç¼“å­˜è¿‡æœŸæˆ–è¢«é©±é€&lt;/td&gt;
&lt;td&gt;ä¾èµ–äºç¼“å­˜é…ç½®ï¼Œå¯åœ¨æ•°æ®å˜æ›´æ—¶å¤±æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å…±äº«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éš”ç¦»&lt;/strong&gt;ï¼Œæ— æ³•è·¨ä¼šè¯å…±äº«&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«&lt;/strong&gt;ï¼Œæ‰€æœ‰ä¼šè¯å¯è®¿é—®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«&lt;/strong&gt;ï¼Œæ‰€æœ‰ä¼šè¯å¯è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å„çº§ç¼“å­˜"&gt;ğŸ’¾ æ·±å…¥ç†è§£å„çº§ç¼“å­˜
&lt;/h3&gt;&lt;h4 id="ä¸€çº§ç¼“å­˜sessionçº§åˆ«"&gt;ä¸€çº§ç¼“å­˜ï¼ˆSessionçº§åˆ«ï¼‰
&lt;/h4&gt;&lt;p&gt;ä¸€çº§ç¼“å­˜æ˜¯Hibernateï¼ˆJPAçš„é»˜è®¤å®ç°ï¼‰å†…ç½®çš„ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸ä¸€ä¸ª&lt;code&gt;EntityManager&lt;/code&gt;ï¼ˆå¤§è‡´å¯¹åº”ä¸€ä¸ªæ•°æ®åº“ä¼šè¯æˆ–äº‹åŠ¡ï¼‰ç»‘å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæœºåˆ¶&lt;/strong&gt;ï¼šåœ¨åŒä¸€ä¼šè¯ä¸­ï¼Œé¦–æ¬¡æ ¹æ®IDæŸ¥è¯¢æŸä¸ªå®ä½“æ—¶ï¼Œæ•°æ®ä¼šä»æ•°æ®åº“åŠ è½½å¹¶å­˜å…¥ä¸€çº§ç¼“å­˜ã€‚åç»­å†æ¬¡æ ¹æ®ç›¸åŒIDæŸ¥è¯¢æ—¶ï¼Œä¼šç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„åŒä¸€å¯¹è±¡å®ä¾‹ï¼ˆ&lt;code&gt;==&lt;/code&gt;åˆ¤æ–­ä¸ºtrueï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤±æ•ˆä¸æ¸…ç©º&lt;/strong&gt;ï¼šå½“æ‰§è¡Œ&lt;code&gt;em.flush()&lt;/code&gt;ã€äº‹åŠ¡æäº¤æˆ–è°ƒç”¨&lt;code&gt;em.clear()&lt;/code&gt;æ—¶ï¼Œä¸€çº§ç¼“å­˜ä¼šè¢«æ¸…ç©ºã€‚æ‰§è¡Œæ›´æ–°æ“ä½œåï¼ŒHibernateä¼šä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„åŒæ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="äºŒçº§ç¼“å­˜åº”ç”¨çº§åˆ«"&gt;äºŒçº§ç¼“å­˜ï¼ˆåº”ç”¨çº§åˆ«ï¼‰
&lt;/h4&gt;&lt;p&gt;äºŒçº§ç¼“å­˜æ˜¯è¿›ç¨‹æˆ–é›†ç¾¤èŒƒå›´å†…çš„ç¼“å­˜ï¼Œéœ€è¦æ˜¾å¼å¼€å¯å¹¶é…ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨æ­¥éª¤&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ ä¾èµ–&lt;/strong&gt;ï¼šå¦‚&lt;code&gt;hibernate-ehcache&lt;/code&gt;ï¼ˆå¦‚æœä½¿ç”¨EhCacheï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®å¯ç”¨&lt;/strong&gt;ï¼šåœ¨&lt;code&gt;application.properties&lt;/code&gt;ä¸­è®¾ç½®&lt;code&gt;spring.jpa.properties.hibernate.cache.use_second_level_cache=true&lt;/code&gt;å¹¶æŒ‡å®šç¼“å­˜åŒºåŸŸå·¥å‚ï¼ˆå¦‚&lt;code&gt;EhCacheRegionFactory&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‡è®°å¯ç¼“å­˜å®ä½“&lt;/strong&gt;ï¼šåœ¨å®ä½“ç±»ä¸Šæ·»åŠ &lt;code&gt;@Cacheable&lt;/code&gt;å’Œ&lt;code&gt;@org.hibernate.annotations.Cache&lt;/code&gt;æ³¨è§£æ¥å®šä¹‰ç¼“å­˜ç­–ç•¥ï¼ˆå¦‚&lt;code&gt;READ_ONLY&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®ç¤ºä¾‹&lt;/strong&gt;ï¼šåœ¨&lt;code&gt;ehcache.xml&lt;/code&gt;ä¸­å¯ä»¥ä¸ºä¸åŒå®ä½“é…ç½®è¯¦ç»†çš„ç¼“å­˜ç­–ç•¥ï¼Œä¾‹å¦‚è¿‡æœŸæ—¶é—´ã€å†…å­˜ä¸­æœ€å¤§å¯¹è±¡æ•°é‡ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æŸ¥è¯¢ç¼“å­˜"&gt;æŸ¥è¯¢ç¼“å­˜
&lt;/h4&gt;&lt;p&gt;æŸ¥è¯¢ç¼“å­˜ç”¨äºç¼“å­˜æŸ¥è¯¢ç»“æœåˆ—è¡¨ï¼ˆå¦‚&lt;code&gt;List&amp;lt;User&amp;gt;&lt;/code&gt;ï¼‰ï¼Œé€‚ç”¨äºä¸å¸¸å˜åŒ–çš„åˆ—è¡¨æ•°æ®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ä¸ä½¿ç”¨&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;å…¨å±€å¯ç”¨ï¼šè®¾ç½®&lt;code&gt;spring.jpa.properties.hibernate.cache.use_query_cache=true&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æç¤ºï¼šåœ¨Repositoryçš„è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•ä¸Šä½¿ç”¨&lt;code&gt;@QueryHints(@QueryHint(name = &amp;quot;org.hibernate.cacheable&amp;quot;, value = &amp;quot;true&amp;quot;))&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæŸ¥è¯¢ç¼“å­˜ä»…ç¼“å­˜æŸ¥è¯¢ç»“æœçš„ä¸»é”®IDåˆ—è¡¨ã€‚çœŸæ­£çš„å®ä½“å¯¹è±¡ä»ç”±äºŒçº§ç¼“å­˜å­˜å‚¨ï¼Œæˆ–æŒ‰éœ€ä»æ•°æ®åº“åŠ è½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¼“å­˜çš„æŒ‘æˆ˜ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ ç¼“å­˜çš„æŒ‘æˆ˜ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ç¼“å­˜èƒ½æå‡æ€§èƒ½ï¼Œä¹Ÿå¸¦æ¥ä¸€äº›æŒ‘æˆ˜ï¼Œéœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šè¿™æ˜¯æ ¸å¿ƒæŒ‘æˆ˜ã€‚äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç¼“å­˜å¯èƒ½å¯¼è‡´&lt;strong&gt;è„è¯»&lt;/strong&gt;ï¼Œå³ç¼“å­˜æ•°æ®ä¸æ•°æ®åº“å®é™…æ•°æ®ä¸ä¸€è‡´ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨å†™å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ•°æ®æ—¶ï¼Œé€šè¿‡&lt;code&gt;@CacheEvict&lt;/code&gt;ç­‰æ³¨è§£&lt;strong&gt;æ‰‹åŠ¨æ¸…é™¤ç›¸å…³ç¼“å­˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºç¼“å­˜æ•°æ®è®¾ç½®åˆç†çš„&lt;strong&gt;è¿‡æœŸæ—¶é—´&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ä¸å»¶è¿Ÿæäº¤&lt;/strong&gt;ï¼šåœ¨äº‹åŠ¡ä¸­ï¼Œæ•°æ®çš„æœ€ç»ˆæäº¤å¯èƒ½å»¶è¿Ÿåˆ°äº‹åŠ¡ç»“æŸæ—¶ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæ•°æ®åº“çš„çº¦æŸæ£€æŸ¥å¯èƒ½ä¸ä¼šç«‹å³è§¦å‘ï¼Œä½¿ç”¨&lt;code&gt;save&lt;/code&gt;æ–¹æ³•åç«‹å³è¿›è¡Œå…¶ä»–æ“ä½œéœ€ç•™æ„ã€‚å¿…è¦æ—¶å¯ä½¿ç”¨&lt;code&gt;saveAndFlush&lt;/code&gt;æ–¹æ³•ç«‹å³åŒæ­¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç¼“å­˜æœ€é€‚åˆ&lt;strong&gt;è¯»å¤šå†™å°‘&lt;/strong&gt;ã€&lt;strong&gt;æ•°æ®å®æ—¶æ€§è¦æ±‚ä¸é«˜&lt;/strong&gt;çš„åœºæ™¯ï¼ˆå¦‚ç³»ç»Ÿèœå•ã€é…ç½®é¡¹ï¼‰ã€‚å¯¹äº&lt;strong&gt;å†™æ“ä½œé¢‘ç¹&lt;/strong&gt;æˆ–&lt;strong&gt;å¯¹æ•°æ®å¼ºä¸€è‡´æ€§è¦æ±‚æé«˜&lt;/strong&gt;çš„åœºæ™¯ï¼Œéœ€è°¨æ…ä½¿ç”¨æˆ–è€ƒè™‘ç¦ç”¨ç¼“å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åœ¨spring-bootä¸­é…ç½®äºŒçº§ç¼“å­˜"&gt;ğŸ’¡ åœ¨Spring Bootä¸­é…ç½®äºŒçº§ç¼“å­˜
&lt;/h3&gt;&lt;p&gt;åœ¨Spring Booté¡¹ç›®ä¸­ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤å¯ç”¨å’Œé…ç½®äºŒçº§ç¼“å­˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ·»åŠ ä¾èµ–&lt;/strong&gt;ï¼ˆä»¥EhCacheä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;dependency&amp;gt;
&amp;lt;groupId&amp;gt;org.hibernate&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;hibernate-ehcache&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
&amp;lt;groupId&amp;gt;net.sf.ehcache&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;ehcache&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;code&gt;application.properties&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;spring.jpa.properties.hibernate.cache.use_second_level_cache=true
spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory
# æŒ‡å®šEhCacheé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æœéœ€è¦ï¼‰
spring.jpa.properties.hibernate.cache.provider_configuration_file_resource_path=ehcache.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ä½“ç±»é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Entity
@Cacheable
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY) // ä¾‹å¦‚åªè¯»ç­–ç•¥
public class User {
// ... å­—æ®µå®šä¹‰
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æ¢³ç†èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Spring Data JPAçš„ç¼“å­˜æœºåˆ¶ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="mybatis-plus"&gt;Mybatis Plus
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;MyBatis&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;MyBatis-Plus&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;SQL ç¼–å†™&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€æ‰‹åŠ¨ç¼–å†™æ‰€æœ‰ SQLï¼ˆXML æˆ–æ³¨è§£ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…ç½®é€šç”¨ CRUDï¼Œå•è¡¨æ“ä½œæ— éœ€å†™ SQL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ¡ä»¶æ„é€ å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸æ”¯æŒï¼Œéœ€æ‰‹å†™åŠ¨æ€ SQL&lt;/td&gt;
&lt;td style="text-align: left"&gt;æä¾›QueryWrapperã€LambdaQueryWrapperç­‰ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä»£ç ç”Ÿæˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— å†…ç½®æ”¯æŒ&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…ç½®ä»£ç ç”Ÿæˆå™¨ï¼Œå¯å¿«é€Ÿç”Ÿæˆ Modelã€Mapper ç­‰å±‚ä»£ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;Lambda æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æŒ Lambda è¡¨è¾¾å¼ï¼Œé¿å…ç¡¬ç¼–ç å­—æ®µå&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»é”®ç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€æ‰‹åŠ¨é…ç½®&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æŒ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå«åˆ†å¸ƒå¼ ID ç”Ÿæˆå™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;åˆ†é¡µæ’ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€æ‰‹åŠ¨å®ç°æˆ–é›†æˆç¬¬ä¸‰æ–¹æ’ä»¶&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…ç½®ç‰©ç†åˆ†é¡µæ’ä»¶ï¼Œç®€åŒ–åˆ†é¡µé€»è¾‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;SQL æ³¨å…¥é˜²æŠ¤&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¾èµ–å¼€å‘è€…ä½¿ç”¨#{}å ä½ç¬¦&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…ç½® SQL æ³¨å…¥å‰¥ç¦»å™¨ï¼Œè‡ªåŠ¨è¿‡æ»¤å±é™©å­—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å®ä½“æ˜ å°„æ³¨è§£&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€æ‰‹åŠ¨é…ç½® XML æ˜ å°„&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æŒ@TableNameã€@TableIdç­‰æ³¨è§£ï¼Œç®€åŒ–è¡¨ä¸å­—æ®µæ˜ å°„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å…¨å±€æ‹¦æˆªä¸æ’ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€è‡ªå®šä¹‰æ‹¦æˆªå™¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶ï¼ˆå¦‚é˜²å…¨è¡¨åˆ é™¤/æ›´æ–°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¾èµ–æ‰‹åŠ¨ä¼˜åŒ– SQL&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æŒæ‰¹é‡æ“ä½œã€äºŒçº§ç¼“å­˜ç­‰ä¼˜åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;æ¨èæ¡†æ¶&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;ç†ç”±&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¤æ‚ SQL æˆ–å­˜å‚¨è¿‡ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;MyBatis&lt;/td&gt;
&lt;td style="text-align: left"&gt;çµæ´»æ§åˆ¶ SQLï¼Œé€‚åˆå¯¹ SQL æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¿«é€Ÿå¼€å‘å•è¡¨ CRUD&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;MyBatis-Plus&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…ç½®é€šç”¨æ–¹æ³•ï¼Œå‡å°‘é‡å¤ä»£ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¾®æœåŠ¡æˆ–åˆ†å¸ƒå¼é¡¹ç›®&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;MyBatis-Plus&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¯æŒåˆ†å¸ƒå¼ IDã€æ‰¹é‡æ“ä½œç­‰ä¼˜åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;éœ€è¦é«˜åº¦å®šåˆ¶åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;MyBatis&lt;/td&gt;
&lt;td style="text-align: left"&gt;åŸç”Ÿ MyBatis æ›´çµæ´»ï¼Œæ— é¢å¤–çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="åŠ¨æ€-sql"&gt;åŠ¨æ€ sql
&lt;/h2&gt;&lt;p&gt;MyBatis çš„åŠ¨æ€ SQL æ˜¯ä¸€é¡¹å¼ºå¤§è€Œå®ç”¨çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ åœ¨ XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œæ ¹æ®è¿è¡Œæ—¶æ¡ä»¶çµæ´»åœ°æ„å»º SQL è¯­å¥ï¼Œå®Œç¾è§£å†³äº†ä¼ ç»Ÿ JDBC å¼€å‘ä¸­éœ€è¦æ‰‹åŠ¨æ‹¼æ¥ SQL å­—ç¬¦ä¸²çš„ç¹çå’Œå®‰å…¨éšæ‚£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº† MyBatis æ ¸å¿ƒçš„åŠ¨æ€ SQL æ ‡ç­¾ï¼Œå¸®ä½ å¿«é€ŸæŒæ¡å®ƒä»¬çš„ç”¨é€”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ‡ç­¾å&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;th&gt;å…³é”®é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¡ä»¶åˆ¤æ–­ï¼Œæ ¹æ®è¡¨è¾¾å¼ç»“æœå†³å®šæ˜¯å¦åŒ…å«SQLç‰‡æ®µ&lt;/td&gt;
&lt;td&gt;å¯é€‰å­—æ®µçš„æŸ¥è¯¢æ¡ä»¶ã€æ›´æ–°æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;choose&amp;gt;/&amp;lt;when&amp;gt;/&amp;lt;otherwise&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šè·¯é€‰æ‹©ï¼Œç±»ä¼¼ Java çš„ &lt;code&gt;switch-case&lt;/code&gt;è¯­å¥&lt;/td&gt;
&lt;td&gt;å¤šæ¡ä»¶äº’æ–¥ï¼Œåªéœ€æ»¡è¶³å…¶ä¸­ä¸€ä¸ªçš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;where&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ™ºèƒ½å¤„ç† &lt;code&gt;WHERE&lt;/code&gt;å­å¥ï¼Œè‡ªåŠ¨æ·»åŠ /ç§»é™¤å…³é”®å­—&lt;/td&gt;
&lt;td&gt;åŒ…è£¹å¤šä¸ªæ¡ä»¶æŸ¥è¯¢ï¼Œé¿å… &lt;code&gt;WHERE&lt;/code&gt;åç›´æ¥è·Ÿ &lt;code&gt;AND&lt;/code&gt;ç­‰è¯­æ³•é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;set&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ™ºèƒ½å¤„ç† &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ä¸­çš„ &lt;code&gt;SET&lt;/code&gt;å­å¥ï¼Œè‡ªåŠ¨å»é™¤å¤šä½™é€—å·&lt;/td&gt;
&lt;td&gt;åŠ¨æ€æ›´æ–°éç©ºå­—æ®µï¼Œå®ç°éƒ¨åˆ†æ›´æ–°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;foreach&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå†é›†åˆï¼ˆå¦‚ Listã€æ•°ç»„ï¼‰ï¼Œæ‹¼æ¥SQLç‰‡æ®µ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;IN&lt;/strong&gt; æŸ¥è¯¢ã€æ‰¹é‡æ’å…¥ã€æ‰¹é‡åˆ é™¤ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;trim&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªå®šä¹‰ä¿®å‰ªSQLè¯­å¥çš„å‰åç¼€ï¼ŒåŠŸèƒ½æ›´çµæ´»&lt;/td&gt;
&lt;td&gt;å¯æ›¿ä»£ &lt;code&gt;&amp;lt;where&amp;gt;&lt;/code&gt;æˆ– &lt;code&gt;&amp;lt;set&amp;gt;&lt;/code&gt;ï¼Œå¤„ç†æ›´å¤æ‚çš„å­—ç¬¦ä¸²ä¿®å‰ªéœ€æ±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæ ‡ç­¾è¯¦è§£ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ æ ¸å¿ƒæ ‡ç­¾è¯¦è§£ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;æŒæ¡æ¯ä¸ªæ ‡ç­¾çš„å…·ä½“ç”¨æ³•å’Œç»†èŠ‚ï¼Œæ˜¯å†™å‡ºç¨³å¥ã€é«˜æ•ˆåŠ¨æ€ SQL çš„å…³é”®ã€‚&lt;/p&gt;
&lt;h4 id="1"&gt;&lt;strong&gt;1. &lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;æ ‡ç­¾ï¼šåŸºç¡€çš„æ¡ä»¶åˆ¤æ–­&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;æ ‡ç­¾æ˜¯æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„æ ‡ç­¾ï¼Œé€šè¿‡ &lt;code&gt;test&lt;/code&gt;å±æ€§æŒ‡å®šä¸€ä¸ª OGNL è¡¨è¾¾å¼è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;select id=&amp;#34;findUsers&amp;#34; resultType=&amp;#34;User&amp;#34;&amp;gt;
SELECT * FROM users
&amp;lt;where&amp;gt;
&amp;lt;if test=&amp;#34;username != null and username != &amp;#39;&amp;#39;&amp;#34;&amp;gt;
AND username LIKE CONCAT(&amp;#39;%&amp;#39;, #{username}, &amp;#39;%&amp;#39;)
&amp;lt;/if&amp;gt;
&amp;lt;if test=&amp;#34;status != null&amp;#34;&amp;gt;
AND status = #{status}
&amp;lt;/if&amp;gt;
&amp;lt;/where&amp;gt;
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼šå°† &lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;æ ‡ç­¾åŒ…è£¹åœ¨ &lt;code&gt;&amp;lt;where&amp;gt;&lt;/code&gt;æ ‡ç­¾å†…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†å¯èƒ½äº§ç”Ÿçš„å¤šä½™ &lt;code&gt;AND&lt;/code&gt;æˆ– &lt;code&gt;OR&lt;/code&gt;å…³é”®å­—ï¼Œæ— éœ€å†å†™ &lt;code&gt;WHERE 1=1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id="2"&gt;&lt;strong&gt;2. &lt;code&gt;&amp;lt;choose&amp;gt;&lt;/code&gt;æ ‡ç­¾ç»„ï¼šå®ç°å¤šè·¯åˆ†æ”¯&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å½“ä½ çš„ä¸šåŠ¡é€»è¾‘æ˜¯â€œå¤šé€‰ä¸€â€æ—¶ï¼Œ&lt;code&gt;&amp;lt;choose&amp;gt;&lt;/code&gt;æ ‡ç­¾ç»„æ¯”ä¸€è¿ä¸²çš„ &lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;æ ‡ç­¾æ›´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;select id=&amp;#34;findUserByPriority&amp;#34; resultType=&amp;#34;User&amp;#34;&amp;gt;
SELECT * FROM users
&amp;lt;where&amp;gt;
&amp;lt;choose&amp;gt;
&amp;lt;!-- ä¼˜å…ˆçº§1: ä¼˜å…ˆç”¨idç²¾ç¡®æŸ¥æ‰¾ --&amp;gt;
&amp;lt;when test=&amp;#34;id != null&amp;#34;&amp;gt;
id = #{id}
&amp;lt;/when&amp;gt;
&amp;lt;!-- ä¼˜å…ˆçº§2: å…¶æ¬¡ç”¨ç”¨æˆ·åæ¨¡ç³ŠåŒ¹é… --&amp;gt;
&amp;lt;when test=&amp;#34;username != null and username != &amp;#39;&amp;#39;&amp;#34;&amp;gt;
username LIKE CONCAT(&amp;#39;%&amp;#39;, #{username}, &amp;#39;%&amp;#39;)
&amp;lt;/when&amp;gt;
&amp;lt;!-- é»˜è®¤æƒ…å†µ: æŸ¥è¯¢æ´»è·ƒç”¨æˆ· --&amp;gt;
&amp;lt;otherwise&amp;gt;
status = &amp;#39;ACTIVE&amp;#39;
&amp;lt;/otherwise&amp;gt;
&amp;lt;/choose&amp;gt;
&amp;lt;/where&amp;gt;
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š&lt;code&gt;&amp;lt;choose&amp;gt;&lt;/code&gt;ç»“æ„å†…ï¼Œä¸€æ—¦æŸä¸ª &lt;code&gt;&amp;lt;when&amp;gt;&lt;/code&gt;çš„æ¡ä»¶æ»¡è¶³ï¼Œå°±ä¼šæ‰§è¡Œå…¶SQLç‰‡æ®µï¼Œå¹¶ä¸”è·³è¿‡å…¶ä½™åˆ†æ”¯ã€‚&lt;/p&gt;
&lt;h4 id="3"&gt;&lt;strong&gt;3. &lt;code&gt;&amp;lt;set&amp;gt;&lt;/code&gt;æ ‡ç­¾ï¼šä¼˜é›…çš„åŠ¨æ€æ›´æ–°&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;&amp;lt;set&amp;gt;&lt;/code&gt;æ ‡ç­¾ä¸“ç”¨äº &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ï¼Œèƒ½å¤Ÿæ™ºèƒ½åœ°å¤„ç† &lt;code&gt;SET&lt;/code&gt;å­å¥æœ«å°¾å¯èƒ½å›  &lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;æ¡ä»¶ä¸æˆç«‹è€Œäº§ç”Ÿçš„å¤šä½™é€—å·ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;update id=&amp;#34;updateUser&amp;#34; parameterType=&amp;#34;User&amp;#34;&amp;gt;
UPDATE user
&amp;lt;set&amp;gt;
&amp;lt;if test=&amp;#34;username != null&amp;#34;&amp;gt;
username = #{username},
&amp;lt;/if&amp;gt;
&amp;lt;if test=&amp;#34;age != null&amp;#34;&amp;gt;
age = #{age},
&amp;lt;/if&amp;gt;
&amp;lt;if test=&amp;#34;email != null&amp;#34;&amp;gt;
email = #{email},
&amp;lt;/if&amp;gt;
&amp;lt;/set&amp;gt;
WHERE id = #{id}
&amp;lt;/update&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é£é™©æç¤º&lt;/strong&gt;ï¼šåŠ¡å¿…ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ›´æ–°å­—æ®µä¸ä¸ºç©ºï¼Œå¦åˆ™ä¼šç”Ÿæˆ &lt;code&gt;UPDATE user SET WHERE id=?&lt;/code&gt;çš„é”™è¯¯SQLã€‚é€šå¸¸ä¼šåœ¨ä¸šåŠ¡å±‚è¿›è¡Œæ ¡éªŒã€‚&lt;/p&gt;
&lt;h4 id="4"&gt;&lt;strong&gt;4. &lt;code&gt;&amp;lt;foreach&amp;gt;&lt;/code&gt;æ ‡ç­¾ï¼šå¤„ç†é›†åˆæ“ä½œ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;&amp;lt;foreach&amp;gt;&lt;/code&gt;æ ‡ç­¾åŠŸèƒ½å¼ºå¤§ï¼Œå¸¸ç”¨äº &lt;strong&gt;IN&lt;/strong&gt; æŸ¥è¯¢å’Œæ‰¹é‡æ“ä½œã€‚å…¶å±æ€§é…ç½®æ˜¯å…³é”®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;collection&lt;/code&gt;: æŒ‡å®šè¦éå†çš„é›†åˆå‚æ•°åã€‚å¦‚æœæ¥å£æ–¹æ³•å‚æ•°æ˜¯ &lt;code&gt;List&lt;/code&gt;ï¼Œé»˜è®¤åä¸º &lt;code&gt;list&lt;/code&gt;ï¼›æ˜¯æ•°ç»„ï¼Œé»˜è®¤åä¸º &lt;code&gt;array&lt;/code&gt;ã€‚æ¨èä½¿ç”¨ &lt;code&gt;@Param&lt;/code&gt;æ³¨è§£æ˜ç¡®å‘½åã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;item&lt;/code&gt;: å¾ªç¯ä¸­å½“å‰å…ƒç´ çš„å˜é‡åã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;open&lt;/code&gt;/&lt;code&gt;close&lt;/code&gt;: å¾ªç¯å†…å®¹åŒ…è£…çš„å‰ç¼€å’Œåç¼€ç¬¦å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;separator&lt;/code&gt;: å„å…ƒç´ é—´çš„åˆ†éš”ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹é‡ IN æŸ¥è¯¢ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;select id=&amp;#34;selectUserByIds&amp;#34; resultType=&amp;#34;User&amp;#34;&amp;gt;
SELECT * FROM user
WHERE id IN
&amp;lt;foreach collection=&amp;#34;idList&amp;#34; item=&amp;#34;id&amp;#34; open=&amp;#34;(&amp;#34; close=&amp;#34;)&amp;#34; separator=&amp;#34;,&amp;#34;&amp;gt;
#{id}
&amp;lt;/foreach&amp;gt;
&amp;lt;/select&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ‰¹é‡æ’å…¥ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;insert id=&amp;#34;batchInsert&amp;#34;&amp;gt;
INSERT INTO user (name, age) VALUES
&amp;lt;foreach collection=&amp;#34;userList&amp;#34; item=&amp;#34;user&amp;#34; separator=&amp;#34;,&amp;#34;&amp;gt;
(#{user.name}, #{user.age})
&amp;lt;/foreach&amp;gt;
&amp;lt;/insert&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="5"&gt;&lt;strong&gt;5. &lt;code&gt;&amp;lt;trim&amp;gt;&lt;/code&gt;æ ‡ç­¾ï¼šæ›´çµæ´»çš„å­—ç¬¦ä¸²ä¿®å‰ª&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;&amp;lt;trim&amp;gt;&lt;/code&gt;æ ‡ç­¾æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½æ ‡ç­¾ï¼Œå¯ä»¥è‡ªå®šä¹‰åœ°æ·»åŠ å‰ç¼€ã€åç¼€ï¼Œå¹¶è¦†ç›–ï¼ˆç§»é™¤ï¼‰ä¸å¿…è¦çš„å‰åç¼€ï¼Œç”¨å®ƒå¯ä»¥å®ç° &lt;code&gt;&amp;lt;where&amp;gt;&lt;/code&gt;å’Œ &lt;code&gt;&amp;lt;set&amp;gt;&lt;/code&gt;çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”¨ &lt;code&gt;&amp;lt;trim&amp;gt;&lt;/code&gt;æ¨¡æ‹Ÿ &lt;code&gt;&amp;lt;where&amp;gt;&lt;/code&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;trim prefix=&amp;#34;WHERE&amp;#34; prefixOverrides=&amp;#34;AND |OR &amp;#34;&amp;gt;
...
&amp;lt;/trim&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç”¨ &lt;code&gt;&amp;lt;trim&amp;gt;&lt;/code&gt;æ¨¡æ‹Ÿ &lt;code&gt;&amp;lt;set&amp;gt;&lt;/code&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;trim prefix=&amp;#34;SET&amp;#34; suffixOverrides=&amp;#34;,&amp;#34;&amp;gt;
...
&amp;lt;/trim&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ ¸å¿ƒä¼˜åŠ¿ä¸ä½¿ç”¨å»ºè®®"&gt;âš ï¸ æ ¸å¿ƒä¼˜åŠ¿ä¸ä½¿ç”¨å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ ¹æœ¬ä¼˜åŠ¿&lt;/strong&gt;ï¼šåŠ¨æ€ SQL æœ€å¤§çš„ä»·å€¼åœ¨äº&lt;strong&gt;å‡å°‘ä»£ç å†—ä½™&lt;/strong&gt;ã€‚ä¸€ä¸ªåŠ¨æ€ SQL æ¨¡æ¿å¯ä»¥æ›¿ä»£ä¼ ç»Ÿ JDBC ä¸­éœ€è¦ä¸ºä¸åŒæ¡ä»¶ç»„åˆç¼–å†™çš„å¤šä¸ª SQL å˜ä½“ï¼Œæå¤§æé«˜äº†çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨åŸºçŸ³&lt;/strong&gt;ï¼šMyBatis åŠ¨æ€ SQL ä¸ &lt;code&gt;#{}&lt;/code&gt;å‚æ•°å ä½ç¬¦ç´§å¯†ç»“åˆï¼Œæ‰€æœ‰å‚æ•°éƒ½é€šè¿‡é¢„ç¼–è¯‘å¤„ç†ï¼Œä»æ ¹æœ¬ä¸Š&lt;strong&gt;é˜²æ­¢äº† SQL æ³¨å…¥æ”»å‡»&lt;/strong&gt;ï¼Œåˆ‡å‹¿ä½¿ç”¨ &lt;code&gt;${}&lt;/code&gt;è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šè™½ç„¶åŠ¨æ€ SQL å¸¦æ¥äº†çµæ´»æ€§ï¼Œä½†è¿‡äºå¤æ‚çš„åŠ¨æ€ SQL å¯èƒ½ä¼šå½±å“ SQL ä¼˜åŒ–å™¨çš„ç´¢å¼•é€‰æ‹©ã€‚å»ºè®®ç»“åˆæ•°æ®åº“çš„ &lt;strong&gt;&lt;code&gt;EXPLAIN&lt;/code&gt;&lt;/strong&gt; å‘½ä»¤å¯¹ç”Ÿæˆçš„å®é™… SQL è¿›è¡Œæ€§èƒ½åˆ†æã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£å¹¶æœ‰æ•ˆè¿ç”¨ MyBatis çš„åŠ¨æ€ SQLã€‚å¦‚æœä½ åœ¨å…·ä½“å®è·µä¸­æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="åº•å±‚åŸç†"&gt;åº•å±‚åŸç†
&lt;/h2&gt;&lt;p&gt;MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åŠè‡ªåŠ¨åŒ– ORM æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºå°† Java å¯¹è±¡ä¸æ•°æ®åº“æ“ä½œçµæ´»åœ°å…³è”èµ·æ¥ï¼ŒåŒæ—¶å°†å¼€å‘è€…ä»ç¹ççš„ JDBC ä»£ç ä¸­è§£æ”¾å‡ºæ¥ã€‚ä¸ºäº†è®©ä½ å¯¹ MyBatis çš„åº•å±‚åŸç†æœ‰ä¸€ä¸ªå…¨å±€çš„è®¤è¯†ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸‹é¢è¿™å¼ å›¾æ¥äº†è§£å…¶æ ¸å¿ƒæ¶æ„å’Œä¸€æ¬¡ SQL æ‰§è¡Œçš„å®Œæ•´æµç¨‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[é…ç½®æ–‡ä»¶&amp;lt;br&amp;gt;mybatis-config.xml] --&amp;gt; B(Configuration&amp;lt;br&amp;gt;é…ç½®ä¸­å¿ƒ)
C[Mapperæ–‡ä»¶&amp;lt;br&amp;gt;Mapper.xml] --&amp;gt; B
B --&amp;gt; D[SqlSessionFactory&amp;lt;br&amp;gt;ä¼šè¯å·¥å‚]
D --&amp;gt; E[SqlSession&amp;lt;br&amp;gt;ä¼šè¯æ¥å£]
E --&amp;gt; F[Executor&amp;lt;br&amp;gt;æ‰§è¡Œå™¨]
F --&amp;gt; G[MappedStatement&amp;lt;br&amp;gt;SQLå°è£…]
G --&amp;gt; H[StatementHandler&amp;lt;br&amp;gt;è¯­å¥å¤„ç†å™¨]
H --&amp;gt; I[ParameterHandler&amp;lt;br&amp;gt;å‚æ•°å¤„ç†å™¨]
I --&amp;gt; J[(Database)]
J --&amp;gt; K[ResultSetHandler&amp;lt;br&amp;gt;ç»“æœé›†å¤„ç†å™¨]
K --&amp;gt; L[Result Object&amp;lt;br&amp;gt;ç»“æœå¯¹è±¡]
L --&amp;gt; E
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šå›¾æ¸…æ™°åœ°å±•ç¤ºäº† MyBatis å†…éƒ¨å„æ ¸å¿ƒç»„ä»¶çš„åä½œå…³ç³»ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è§£æå›¾ä¸­çš„æ¯ä¸€æ­¥ï¼Œç‰¹åˆ«æ˜¯è¿™äº›æ ¸å¿ƒç»„ä»¶å„è‡ªæ‰®æ¼”çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒç»„ä»¶æ·±åº¦è§£æ"&gt;ğŸ” æ ¸å¿ƒç»„ä»¶æ·±åº¦è§£æ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SqlSessionFactory ä¸ SqlSession&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SqlSessionFactory&lt;/strong&gt; æ˜¯ MyBatis çš„â€œä¼šè¯å·¥å‚â€ï¼Œå…¶èŒè´£æ˜¯åˆ›å»º &lt;code&gt;SqlSession&lt;/code&gt;ã€‚å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé€šå¸¸åœ¨åº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰ï¼Œé€šè¿‡ &lt;code&gt;SqlSessionFactoryBuilder&lt;/code&gt;è§£æå…¨å±€é…ç½®æ–‡ä»¶ï¼ˆ&lt;code&gt;mybatis-config.xml&lt;/code&gt;ï¼‰æ„å»ºè€Œæˆã€‚æ‰€æœ‰é…ç½®ä¿¡æ¯æœ€ç»ˆéƒ½è¢«å°è£…åˆ°ä¸€ä¸ªå…¨å±€çš„ &lt;code&gt;Configuration&lt;/code&gt;å¯¹è±¡ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SqlSession&lt;/strong&gt; æ˜¯ MyBatis æœ€é¡¶å±‚çš„é¢å‘ç”¨æˆ·çš„ APIï¼Œä»£è¡¨äº†ä¸€æ¬¡ä¸æ•°æ®åº“çš„ä¼šè¯ã€‚å®ƒæä¾›äº† &lt;code&gt;selectOne&lt;/code&gt;, &lt;code&gt;insert&lt;/code&gt;ç­‰æ–¹æ³•ã€‚&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt; &lt;code&gt;SqlSession&lt;/code&gt;çš„å®ä¾‹æ˜¯&lt;strong&gt;éçº¿ç¨‹å®‰å…¨&lt;/strong&gt;çš„ï¼Œå› æ­¤å…¶ç”Ÿå‘½å‘¨æœŸåº”å±€é™äºæ–¹æ³•æˆ–è¯·æ±‚å†…éƒ¨ï¼Œä½¿ç”¨å®Œæ¯•åå¿…é¡»æ­£ç¡®å…³é—­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Executor â€“ æ‰§è¡Œå¼•æ“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SqlSession&lt;/code&gt;æœ¬èº«å¹¶ä¸ç›´æ¥æ‰§è¡Œ SQLï¼Œè€Œæ˜¯å°†å·¥ä½œå§”æ‰˜ç»™ &lt;strong&gt;Executor&lt;/strong&gt;ï¼ˆæ‰§è¡Œå™¨ï¼‰ã€‚å®ƒæ˜¯ MyBatis çš„è°ƒåº¦æ ¸å¿ƒï¼Œä¸»è¦è´Ÿè´£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SQL æ‰§è¡Œ&lt;/strong&gt;ï¼šè°ƒç”¨åº•å±‚æ•°æ®åº“æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ç®¡ç†&lt;/strong&gt;ï¼šç»´æŠ¤&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt;ï¼ˆé»˜è®¤å¼€å¯ï¼Œä½œç”¨äºåŒä¸€ä¸ª &lt;code&gt;SqlSession&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸï¼‰å’Œ&lt;strong&gt;äºŒçº§ç¼“å­˜&lt;/strong&gt;ï¼ˆéœ€æ‰‹åŠ¨å¼€å¯ï¼Œä½œç”¨äº &lt;code&gt;SqlSessionFactory&lt;/code&gt;çº§åˆ«ï¼Œå¯è·¨ä¼šè¯å…±äº«ï¼‰ã€‚ä¸Šå›¾æ‰€ç¤ºçš„æ‰§è¡Œæµç¨‹ï¼Œåœ¨ &lt;code&gt;Executor&lt;/code&gt;å±‚é¢ä¼šä¼˜å…ˆæŸ¥è¯¢ç¼“å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MappedStatement â€“ SQL æŒ‡ä»¤åº“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒæ˜¯å¯¹ Mapper XML æ–‡ä»¶ä¸­ä¸€ä¸ª SQL è¯­å¥ï¼ˆå¦‚ &lt;code&gt;&amp;lt;select&amp;gt;&lt;/code&gt;æ ‡ç­¾ï¼‰çš„å®Œæ•´å°è£…ã€‚&lt;code&gt;Executor&lt;/code&gt;æ‰§è¡Œæ—¶ï¼Œä¼šæ ¹æ®è¯­å¥çš„ ID ä» &lt;code&gt;Configuration&lt;/code&gt;ä¸­è·å–å¯¹åº”çš„ &lt;code&gt;MappedStatement&lt;/code&gt;ï¼Œå…¶ä¸­åŒ…å«äº† SQL æºç ã€è¾“å…¥è¾“å‡ºå‚æ•°ç±»å‹ã€ç¼“å­˜ç­–ç•¥ç­‰æ‰€æœ‰å…ƒä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;StatementHandler â€“ SQL è¯­å¥æ“ä½œå‘˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Executor&lt;/code&gt;ä¼šå°†å…·ä½“çš„æ•°æ®åº“æ“ä½œäº¤ç»™ &lt;strong&gt;StatementHandler&lt;/strong&gt;ã€‚å®ƒæ˜¯å¯¹ JDBC &lt;code&gt;Statement&lt;/code&gt;çš„ç›´æ¥å°è£…ï¼Œè´Ÿè´£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘æ•°æ®åº“å‘èµ·è°ƒç”¨ï¼Œæ‰§è¡Œ SQLã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»º &lt;code&gt;ParameterHandler&lt;/code&gt;å’Œ &lt;code&gt;ResultSetHandler&lt;/code&gt;æ¥å¤„ç†å‚æ•°å’Œç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ParameterHandler ä¸ ResultSetHandler â€“ æ•°æ®è½¬æ¢ä¸“å®¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ParameterHandler&lt;/strong&gt;ï¼šè´Ÿè´£å°†ä¼ å…¥çš„ Java å¯¹è±¡å‚æ•°ï¼ŒæŒ‰ç…§è§„åˆ™è½¬æ¢æˆ JDBC &lt;code&gt;PreparedStatement&lt;/code&gt;æ‰€éœ€çš„å‚æ•°å€¼ï¼ˆä¾‹å¦‚ï¼Œå°† &lt;code&gt;java.util.Date&lt;/code&gt;è½¬æ¢ä¸º &lt;code&gt;java.sql.Timestamp&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ResultSetHandler&lt;/strong&gt;ï¼šè´Ÿè´£å°† JDBC è¿”å›çš„ &lt;code&gt;ResultSet&lt;/code&gt;ç»“æœé›†è½¬æ¢ä¸º Java å¯¹è±¡ï¼ˆå¦‚ &lt;code&gt;List&amp;lt;User&amp;gt;&lt;/code&gt;ï¼‰ã€‚è¿™æ˜¯ MyBatis ORM é­”åŠ›çš„æœ€ç»ˆä½“ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åŠ¨æ€-sql-çš„è§£æé­”æ³•"&gt;âš™ï¸ åŠ¨æ€ SQL çš„è§£æé­”æ³•
&lt;/h3&gt;&lt;p&gt;MyBatis çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶åŠ¨æ€ SQL èƒ½åŠ›ã€‚å®ƒå…è®¸åœ¨ XML ä¸­ç¼–å†™åŒ…å«æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰é€»è¾‘çš„ SQL è¯­å¥ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ç”± &lt;code&gt;SqlSource&lt;/code&gt;å’Œ &lt;code&gt;SqlNode&lt;/code&gt;åä½œå®Œæˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹¼æ¥é˜¶æ®µ&lt;/strong&gt;ï¼šMyBatis ä¼šå°† XML ä¸­çš„ SQL æ ‡ç­¾ï¼ˆå¦‚ &lt;code&gt;&amp;lt;if&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;foreach&amp;gt;&lt;/code&gt;ï¼‰å’Œæ–‡æœ¬è§£ææˆä¸€æ£µç”± &lt;strong&gt;SqlNode&lt;/strong&gt; ç»„æˆçš„è¯­æ³•æ ‘ã€‚æ‰§è¡Œæ—¶ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼Œéå†è¿™æ£µæ ‘åŠ¨æ€åœ°æ‹¼æ¥å‡ºæœ€ç»ˆçš„ SQL å­—ç¬¦ä¸²ï¼ˆæ­¤é˜¶æ®µä¼šå¤„ç† &lt;code&gt;${}&lt;/code&gt;å’ŒåŠ¨æ€æ ‡ç­¾ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£æé˜¶æ®µ&lt;/strong&gt;ï¼šæ‹¼æ¥å¥½çš„ SQL å­—ç¬¦ä¸²ï¼ˆæ­¤æ—¶ &lt;code&gt;#{}&lt;/code&gt;ä»ä¿ç•™ï¼‰ä¼šè¢«ä¼ é€’ç»™ &lt;strong&gt;SqlSource&lt;/strong&gt;ï¼Œå®ƒè´Ÿè´£å°† &lt;code&gt;#{}&lt;/code&gt;è§£æä¸º JDBC çš„ &lt;code&gt;?&lt;/code&gt;å ä½ç¬¦ï¼Œå¹¶ç”ŸæˆåŒ…å« SQL å’Œå‚æ•°æ˜ å°„ä¿¡æ¯çš„ &lt;code&gt;BoundSql&lt;/code&gt;å¯¹è±¡ï¼Œä¾› &lt;code&gt;StatementHandler&lt;/code&gt;ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸ä»·å€¼"&gt;ğŸ’¡ æ€»ç»“ä¸ä»·å€¼
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸Šçš„å‰–æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° MyBatis åº•å±‚åŸç†çš„ç²¾é«“åœ¨äºï¼š&lt;strong&gt;é€šè¿‡æ¸…æ™°çš„åˆ†å±‚å’Œç»„ä»¶åŒ–è®¾è®¡ï¼Œå°†å¤æ‚çš„ JDBC æ“ä½œæ ‡å‡†åŒ–ã€æ¨¡å—åŒ–&lt;/strong&gt;ã€‚å®ƒä¸ä»…ä¿ç•™äº† JDBC çš„æ€§èƒ½ä¼˜åŠ¿å’Œå¯¹ SQL çš„ç²¾å‡†æ§åˆ¶åŠ›ï¼Œè¿˜é€šè¿‡åŠ¨æ€ SQLã€ç±»å‹å¤„ç†å™¨ã€æ’ä»¶ç­‰æœºåˆ¶æä¾›äº†æå¤§çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£ MyBatis çš„å·¥ä½œæœºåˆ¶ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="mybatis-æ’ä»¶"&gt;Mybatis æ’ä»¶
&lt;/h2&gt;&lt;p&gt;MyBatis æ’ä»¶æ˜¯å…¶æ¡†æ¶æä¾›çš„ä¸€ç§å¼ºå¤§æ‰©å±•æœºåˆ¶ï¼Œå…è®¸ä½ åœ¨ä¸ä¿®æ”¹æ ¸å¿ƒä»£ç çš„æƒ…å†µä¸‹ï¼Œæ‹¦æˆªå¹¶å¢å¼º MyBatis å†…éƒ¨æ ¸å¿ƒç»„ä»¶çš„è¡Œä¸ºï¼Œä»è€Œå®ç°è‡ªå®šä¹‰åŠŸèƒ½ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒç»„ä»¶å’Œæ‹¦æˆªç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç»„ä»¶&lt;/th&gt;
&lt;th&gt;è§’è‰²æè¿°&lt;/th&gt;
&lt;th&gt;å¯æ‹¦æˆªçš„å…³é”®æ–¹æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Executor&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;SQL æ‰§è¡Œçš„â€œå‘åŠ¨æœºâ€ï¼Œè´Ÿè´£å¢åˆ æ”¹æŸ¥æ“ä½œåŠäº‹åŠ¡ç®¡ç†ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;update&lt;/code&gt;, &lt;code&gt;query&lt;/code&gt;, &lt;code&gt;commit&lt;/code&gt;, &lt;code&gt;rollback&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;StatementHandler&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç† JDBC &lt;code&gt;Statement&lt;/code&gt;çš„â€œç¿»è¯‘å®˜â€ï¼Œè´Ÿè´£ SQL é¢„ç¼–è¯‘å’Œå‚æ•°è®¾ç½®ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;prepare&lt;/code&gt;, &lt;code&gt;parameterize&lt;/code&gt;, &lt;code&gt;batch&lt;/code&gt;, &lt;code&gt;update&lt;/code&gt;, &lt;code&gt;query&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ParameterHandler&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»™ SQL è¯­å¥â€œå–‚å‚æ•°â€çš„â€œå°åŠ©æ‰‹â€ï¼Œå°† Java å¯¹è±¡è½¬æ¢ä¸º JDBC å‚æ•°ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;setParameters&lt;/code&gt;, &lt;code&gt;getParameterObject&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ResultSetHandler&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ç»“æœé›†â€œè½¬æˆ Java å¯¹è±¡â€çš„â€œè½¬æ¢å™¨â€ï¼Œå¤„ç†æŸ¥è¯¢ç»“æœæ˜ å°„ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;handleResultSets&lt;/code&gt;, &lt;code&gt;handleOutputParameters&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸å¼€å‘æ­¥éª¤"&gt;ğŸ”§ å·¥ä½œåŸç†ä¸å¼€å‘æ­¥éª¤
&lt;/h3&gt;&lt;p&gt;MyBatis æ’ä»¶çš„æ ¸å¿ƒåŸç†æ˜¯ &lt;strong&gt;åŠ¨æ€ä»£ç†&lt;/strong&gt;ã€‚å½“ä½ åœ¨é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œä¸€ä¸ªæ’ä»¶åï¼ŒMyBatis åœ¨å¯åŠ¨æ—¶ä¼šä¸ºè¿™äº›æ ¸å¿ƒç»„ä»¶åˆ›å»ºä»£ç†å¯¹è±¡ã€‚å½“æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šå…ˆç»è¿‡æ’ä»¶çš„ &lt;code&gt;intercept&lt;/code&gt;æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œå†å†³å®šæ˜¯å¦ç»§ç»­æ‰§è¡ŒåŸå§‹æ–¹æ³• ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰æ’ä»¶é€šå¸¸åªéœ€ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°æ¥å£ä¸æ³¨è§£é…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªç±»å®ç° &lt;code&gt;org.apache.ibatis.plugin.Interceptor&lt;/code&gt;æ¥å£ï¼Œæ ¸å¿ƒæ˜¯é‡å†™ &lt;code&gt;intercept&lt;/code&gt;æ–¹æ³•ã€‚ä½¿ç”¨ &lt;code&gt;@Intercepts&lt;/code&gt;å’Œ &lt;code&gt;@Signature&lt;/code&gt;æ³¨è§£ç²¾ç¡®æŒ‡å®šè¦æ‹¦æˆªçš„æ–¹æ³• ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Intercepts({
@Signature(type = StatementHandler.class, method = &amp;#34;prepare&amp;#34;, args = {Connection.class, Integer.class})
})
public class SqlStatsInterceptor implements Interceptor {
@Override
public Object intercept(Invocation invocation) throws Throwable {
long startTime = System.currentTimeMillis();
try {
// æ‰§è¡ŒåŸå§‹æ–¹æ³•
return invocation.proceed();
} finally {
long costTime = System.currentTimeMillis() - startTime;
System.out.println(&amp;#34;SQL æ‰§è¡Œè€—æ—¶: &amp;#34; + costTime + &amp;#34;ms&amp;#34;);
// å®é™…é¡¹ç›®ä¸­å¯å°†ç»Ÿè®¡ä¿¡æ¯å‘é€è‡³ç›‘æ§ç³»ç»Ÿ
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨å†Œæ’ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®© MyBatis çŸ¥é“å¹¶åŠ è½½è¿™ä¸ªæ’ä»¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;XML é…ç½®&lt;/strong&gt;ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰ï¼šåœ¨ &lt;code&gt;mybatis-config.xml&lt;/code&gt;ä¸­é…ç½® ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Java ä»£ç é…ç½®&lt;/strong&gt;ï¼ˆSpring Boot é¡¹ç›®ï¼‰ï¼šé€šè¿‡ &lt;code&gt;@Bean&lt;/code&gt;å®šä¹‰ &lt;code&gt;SqlSessionFactory&lt;/code&gt;å¹¶è®¾ç½®æ’ä»¶ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆå¯é€‰ï¼‰æ¥æ”¶é…ç½®å‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ’ä»¶éœ€è¦å¯é…ç½®é¡¹ï¼Œå¯ä»¥é‡å†™ &lt;code&gt;setProperties&lt;/code&gt;æ–¹æ³•ã€‚åœ¨ XML é…ç½®ä¸­é€šè¿‡ &lt;code&gt;&amp;lt;property&amp;gt;&lt;/code&gt;æ ‡ç­¾ä¼ é€’çš„å‚æ•°ä¼šå°è£…åˆ° &lt;code&gt;Properties&lt;/code&gt;å¯¹è±¡å¹¶ä¼ å…¥æ­¤æ–¹æ³• ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¸¸è§åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;æ’ä»¶æœºåˆ¶éå¸¸çµæ´»ï¼Œå¸¸è§çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ç›‘æ§ä¸ SQL æ—¥å¿—è®°å½•&lt;/strong&gt;ï¼šæ‹¦æˆª &lt;code&gt;StatementHandler&lt;/code&gt;çš„ &lt;code&gt;prepare&lt;/code&gt;æ–¹æ³•æˆ– &lt;code&gt;Executor&lt;/code&gt;çš„ &lt;code&gt;query/update&lt;/code&gt;æ–¹æ³•ï¼Œè®°å½•å®Œæ•´çš„ SQL è¯­å¥ã€å‚æ•°å’Œæ‰§è¡Œæ—¶é—´ï¼Œå¸®åŠ©å‘ç°æ…¢æŸ¥è¯¢ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åŠ å¯†ä¸è„±æ•&lt;/strong&gt;ï¼šæ‹¦æˆª &lt;code&gt;ParameterHandler&lt;/code&gt;çš„ &lt;code&gt;setParameters&lt;/code&gt;æ–¹æ³•ï¼Œåœ¨æ•°æ®å…¥åº“å‰è‡ªåŠ¨åŠ å¯†æ•æ„Ÿå­—æ®µï¼ˆå¦‚å¯†ç ï¼‰ï¼›æ‹¦æˆª &lt;code&gt;ResultSetHandler&lt;/code&gt;çš„ &lt;code&gt;handleResultSets&lt;/code&gt;æ–¹æ³•ï¼Œåœ¨æ•°æ®æŸ¥è¯¢å‡ºæ¥åè‡ªåŠ¨è§£å¯† ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é¡µåŠŸèƒ½&lt;/strong&gt;ï¼šæ‹¦æˆª &lt;code&gt;Executor&lt;/code&gt;çš„ &lt;code&gt;query&lt;/code&gt;æ–¹æ³•ï¼Œæ ¹æ®åˆ†é¡µå‚æ•°è‡ªåŠ¨é‡å†™å’Œæ‰§è¡Œç»Ÿè®¡æ€»æ•°çš„ SQL åŠåˆ†é¡µ SQLã€‚çŸ¥åçš„ PageHelper æ’ä»¶å°±æ˜¯åŸºäºæ­¤åŸç† ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ•°æ®æºä¸æƒé™æ§åˆ¶&lt;/strong&gt;ï¼šåœ¨å¤šç§Ÿæˆ·ç­‰åœºæ™¯ä¸‹ï¼Œæ‹¦æˆª SQL æ‰§è¡Œè¿‡ç¨‹ï¼Œæ ¹æ®å½“å‰ä¸Šä¸‹æ–‡åŠ¨æ€æ·»åŠ ç§Ÿæˆ· ID ç­‰è¿‡æ»¤æ¡ä»¶ï¼Œå®ç°æ•°æ®éš”ç¦» ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹¦æˆªç›®æ ‡è¦ç²¾å‡†&lt;/strong&gt;ï¼š&lt;code&gt;@Signature&lt;/code&gt;æ³¨è§£çš„å‚æ•°å¿…é¡»ç²¾ç¡®åŒ¹é…ï¼Œé¿å…æ‹¦æˆªä¸å¿…è¦çš„æ–¹æ³•å½±å“æ€§èƒ½æˆ–å¯¼è‡´é”™è¯¯ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æ’ä»¶æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼šå¤šä¸ªæ’ä»¶ä¼šæŒ‰æ³¨å†Œé¡ºåºå½¢æˆâ€œä»£ç†é“¾â€ã€‚å¦‚æœæ’ä»¶é—´æœ‰ä¾èµ–å…³ç³»ï¼Œéœ€è¦æ³¨æ„å®ƒä»¬çš„æ³¨å†Œé¡ºåº ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒæ’ä»¶é€»è¾‘è½»é‡&lt;/strong&gt;ï¼šæ’ä»¶çš„ &lt;code&gt;intercept&lt;/code&gt;æ–¹æ³•ä¼šåœ¨æ¯æ¬¡ç›®æ ‡æ–¹æ³•è°ƒç”¨æ—¶æ‰§è¡Œï¼Œåº”é¿å…åœ¨æ­¤å¤„è¿›è¡Œå¤æ‚çš„è®¡ç®—æˆ–è¿œç¨‹è°ƒç”¨ï¼Œä»¥å…æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚éæ ¸å¿ƒé€»è¾‘å¯è€ƒè™‘å¼‚æ­¥å¤„ç† ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¾ªç¯ä»£ç†&lt;/strong&gt;ï¼šåœ¨é‡å†™ &lt;code&gt;plugin&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œç¡®ä¿ä¸ä¼šå¯¹åŒä¸€ä¸ªç›®æ ‡å¯¹è±¡è¿›è¡Œé‡å¤ä»£ç†ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ ˆæº¢å‡º ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MyBatis æ’ä»¶æœºåˆ¶é€šè¿‡åŠ¨æ€ä»£ç†ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§éä¾µå…¥å¼çš„ã€å¼ºå¤§çš„æ¡†æ¶æ‰©å±•èƒ½åŠ›ã€‚æ— è®ºæ˜¯ç®€å•çš„ SQL ç›‘æ§ï¼Œè¿˜æ˜¯å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¦‚æ•°æ®åŠ å¯†å’Œåˆ†é¡µï¼Œéƒ½å¯ä»¥é€šè¿‡æ’ä»¶ä¼˜é›…åœ°å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ ç†è§£å’Œè¿ç”¨ MyBatis æ’ä»¶ã€‚å¦‚æœä½ åœ¨å…·ä½“å®ç°è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥éšæ—¶æå‡ºã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Redis 2</title><link>https://dyhes.github.io/p/nowcoderredis-2/</link><pubDate>Sat, 04 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderredis-2/</guid><description>&lt;h2 id="è¿‡æœŸé”®"&gt;è¿‡æœŸé”®
&lt;/h2&gt;&lt;p&gt;Redis æ¢æµ‹å’Œåˆ é™¤è¿‡æœŸé”®ï¼Œä¸»è¦ä¾é  &lt;strong&gt;æƒ°æ€§åˆ é™¤&lt;/strong&gt; å’Œ &lt;strong&gt;å®šæœŸåˆ é™¤&lt;/strong&gt; ä¸¤ç§ç­–ç•¥çš„ç»„åˆæ‹³ï¼Œè¿™æ ·å¯ä»¥åŒæ—¶åœ¨CPUå’Œå†…å­˜æ•ˆç‡ä¸Šå–å¾—å¾ˆå¥½çš„å¹³è¡¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿçœ‹æ¸…è¿™ä¸¤ç§ç­–ç•¥çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æƒ°æ€§åˆ é™¤ (Lazy Expiration)&lt;/th&gt;
&lt;th&gt;å®šæœŸåˆ é™¤ (Periodic Expiration)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…åœ¨&lt;strong&gt;è®¿é—®æŸä¸ªé”®&lt;/strong&gt;æ—¶è§¦å‘æ£€æŸ¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‘¨æœŸæ€§&lt;/strong&gt;åœ°ä¸»åŠ¨éšæœºæŠ½æŸ¥ï¼Œé»˜è®¤æ¯ç§’10æ¬¡ï¼ˆæ¯100msä¸€æ¬¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¿é—®é”®æ—¶æ£€æŸ¥æ˜¯å¦è¿‡æœŸï¼Œè‹¥è¿‡æœŸåˆ™åˆ é™¤å¹¶è¿”å›ç©ºå€¼&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡éšæœºæŠ½å–ä¸€å®šæ•°é‡çš„é”®ï¼ˆé»˜è®¤20ä¸ªï¼‰æ£€æŸ¥ï¼Œè‹¥è¿‡æœŸæ¯”ä¾‹é«˜åˆ™é‡å¤è¯¥è¿‡ç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹CPUå‹å¥½ï¼Œä¸æµªè´¹èµ„æºåœ¨æ— å…³çš„é”®ä¸Š&lt;/td&gt;
&lt;td&gt;å¼¥è¡¥æƒ°æ€§åˆ é™¤çš„ä¸è¶³ï¼Œå‡å°‘å› è¿‡æœŸé”®ä¸è¢«è®¿é—®è€Œé€ æˆçš„å†…å­˜æµªè´¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹å†…å­˜ä¸å‹å¥½ï¼Œè‹¥è¿‡æœŸé”®é•¿æœŸä¸è¢«è®¿é—®ï¼Œä¼šä¸€ç›´å ç”¨å†…å­˜&lt;/td&gt;
&lt;td&gt;éœ€è¦åœ¨CPUæ—¶é—´å’Œå†…å­˜é‡Šæ”¾ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œé¢‘ç‡å’ŒèŒƒå›´æ˜¯è®¾è®¡éš¾ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ä¸¤ç§åˆ é™¤ç­–ç•¥"&gt;ğŸ” æ·±å…¥ä¸¤ç§åˆ é™¤ç­–ç•¥
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æƒ°æ€§åˆ é™¤ï¼šè®¿é—®æ—¶å½“åœºæ£€æŸ¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æƒ°æ€§åˆ é™¤å°±åƒæ˜¯Redisé‡Œçš„ä¸€ä¸ªâ€œé—¨å«â€ã€‚å½“ä½ å°è¯•ç”¨&lt;code&gt;GET&lt;/code&gt;ç­‰å‘½ä»¤è®¿é—®ä¸€ä¸ªé”®æ—¶ï¼Œè¿™ä¸ªé—¨å«ä¼šå…ˆæ‹¦ä½å®ƒï¼Œæ£€æŸ¥å…¶è¿‡æœŸæ—¶é—´ã€‚å¦‚æœå·²ç»è¿‡æœŸï¼Œä¼šç«‹åˆ»åˆ é™¤è¿™ä¸ªé”®ï¼Œå¹¶å‘Šè¯‰ä½ è¿™ä¸ªé”®ä¸å­˜åœ¨ï¼ˆè¿”å›nilï¼‰ã€‚å¦‚æœæ²¡è¿‡æœŸï¼Œæ‰æ”¾è¡Œå¹¶è¿”å›æ•°æ®ã€‚è¿™ç§æ–¹å¼éå¸¸â€œèŠ‚èƒ½â€ï¼Œåªæœ‰åœ¨å¿…è¦æ—¶æ‰å·¥ä½œã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœä¸€ä¸ªè¿‡æœŸé”®æ°¸è¿œä¸å†è¢«è®¿é—®ï¼Œå®ƒå°±ä¼šåƒâ€œå¹½çµâ€ä¸€æ ·æ°¸è¿œå ç”¨ç€å†…å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šæœŸåˆ é™¤ï¼šåå°çš„å®šæ—¶æ¸…æ‰«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ¸…ç†é‚£äº›ä¸è¢«è®¿é—®çš„â€œå¹½çµâ€é”®ï¼ŒRedisè¿˜æœ‰ä¸€ä¸ªåå°çš„â€œæ¸…æ´å·¥â€ï¼Œè¿™å°±æ˜¯å®šæœŸåˆ é™¤ã€‚å®ƒé»˜è®¤æ¯ç§’è¿è¡Œ10æ¬¡ï¼ˆé¢‘ç‡å¯é€šè¿‡é…ç½®å‚æ•°&lt;code&gt;hz&lt;/code&gt;è°ƒæ•´ï¼‰ã€‚æ¯æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒä¸ä¼šå‚»å‚»åœ°æ£€æŸ¥æ‰€æœ‰é”®ï¼ˆé‚£ä¼šéå¸¸è€—CPUï¼‰ï¼Œè€Œæ˜¯&lt;strong&gt;éšæœºåœ°&lt;/strong&gt;ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­æŠ½å–ä¸€æ‰¹ï¼ˆé»˜è®¤20ä¸ªï¼‰è¿›è¡Œæ£€æŸ¥å’Œåˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸ªèªæ˜çš„æœºåˆ¶ï¼šå¦‚æœå‘ç°è¿™æ‰¹éšæœºæŠ½æ ·çš„é”®ä¸­ï¼Œè¿‡æœŸé”®çš„&lt;strong&gt;æ¯”ä¾‹è¶…è¿‡25%&lt;/strong&gt;ï¼Œå®ƒå°±ä¼šç«‹å³å†æŠ½ä¸€æ‰¹æ¥æ£€æŸ¥ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°è¿‡æœŸé”®çš„æ¯”ä¾‹é™ä¸‹æ¥ã€‚è¿™èƒ½ç¡®ä¿ä¸€æ—¦å†…å­˜ä¸­æœ‰å¤§é‡è¿‡æœŸé”®ï¼Œæ¸…æ´å·¥å°±ä¼šæ›´å–åŠ›åœ°å·¥ä½œï¼Œå°½å¿«é‡Šæ”¾å†…å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦è¡¥å……å†…å­˜æ·˜æ±°ç­–ç•¥-eviction-policy"&gt;âš ï¸ é‡è¦è¡¥å……ï¼šå†…å­˜æ·˜æ±°ç­–ç•¥ (Eviction Policy)
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢è®¨è®ºçš„&lt;strong&gt;è¿‡æœŸé”®åˆ é™¤&lt;/strong&gt;å’Œ&lt;strong&gt;å†…å­˜æ·˜æ±°&lt;/strong&gt;æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä½†ç»å¸¸è¢«æ··æ·†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æœŸé”®åˆ é™¤&lt;/strong&gt;ï¼šæ˜¯Redisåœ¨&lt;strong&gt;æ­£å¸¸è¿è¡Œæ—¶&lt;/strong&gt;çš„æ—¥å¸¸ç»´æŠ¤è¡Œä¸ºï¼Œé’ˆå¯¹çš„æ˜¯å·²ç»è¿‡æœŸçš„é”®ï¼Œé€šè¿‡æƒ°æ€§åˆ é™¤å’Œå®šæœŸåˆ é™¤æ¥å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜æ·˜æ±°&lt;/strong&gt;ï¼šæ˜¯å½“Redisä½¿ç”¨çš„&lt;strong&gt;å†…å­˜è¾¾åˆ°è®¾å®šçš„ä¸Šé™ï¼ˆ&lt;code&gt;maxmemory&lt;/code&gt;ï¼‰&lt;/strong&gt; æ—¶ï¼Œä¸ºäº†ç»™æ–°æ•°æ®è…¾å‡ºç©ºé—´è€Œè§¦å‘çš„ç´§æ€¥æœºåˆ¶ã€‚æ­¤æ—¶ï¼Œå®ƒä¼šæ ¹æ®ä½ é…ç½®çš„&lt;code&gt;maxmemory-policy&lt;/code&gt;ï¼ˆå¦‚&lt;code&gt;volatile-lru&lt;/code&gt;, &lt;code&gt;allkeys-lru&lt;/code&gt;, &lt;code&gt;volatile-ttl&lt;/code&gt;ç­‰ï¼‰ï¼Œæ·˜æ±°æ‰ä¸€äº›é”®ï¼ˆå¯èƒ½åŒ…æ‹¬æœªè¿‡æœŸçš„é”®ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œè¿‡æœŸåˆ é™¤æ˜¯â€œä¾‹è¡Œåƒåœ¾å›æ”¶â€ï¼Œè€Œå†…å­˜æ·˜æ±°æ˜¯â€œå†…å­˜ä¸è¶³æ—¶çš„ç´§æ€¥æ•‘æ´â€ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»ä»æ¨¡å¼ä¸‹çš„å¤„ç†"&gt;ğŸ”„ ä¸»ä»æ¨¡å¼ä¸‹çš„å¤„ç†
&lt;/h3&gt;&lt;p&gt;åœ¨Redisä¸»ä»æ¶æ„ä¸­ï¼Œä¸ºäº†ä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œ&lt;strong&gt;è¿‡æœŸé”®çš„åˆ é™¤æ“ä½œç»Ÿä¸€ç”±ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰æ‰§è¡Œ&lt;/strong&gt;ã€‚ä¸»èŠ‚ç‚¹åœ¨åˆ é™¤ä¸€ä¸ªè¿‡æœŸé”®åï¼Œä¼šå‘æ‰€æœ‰ä»èŠ‚ç‚¹ï¼ˆSlaveï¼‰å‘é€ä¸€ä¸ª&lt;code&gt;DEL&lt;/code&gt;å‘½ä»¤ï¼Œä»èŠ‚ç‚¹æ”¶åˆ°åæ‰ä¼šåˆ é™¤æœ¬åœ°çš„å¯¹åº”é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£Redisçš„è¿‡æœŸé”®æ¢æµ‹æœºåˆ¶ã€‚å¦‚æœä½ å¯¹ç‰¹å®šæ·˜æ±°ç­–ç•¥çš„å…·ä½“è¡Œä¸ºæˆ–é…ç½®å‚æ•°æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è¿‡æœŸäº‹ä»¶"&gt;è¿‡æœŸäº‹ä»¶
&lt;/h2&gt;&lt;p&gt;è¦ä¿è¯ Redis è¿‡æœŸäº‹ä»¶èƒ½å¤Ÿå‡†æ—¶è§¦å‘ï¼Œéœ€è¦ç†è§£å…¶å†…åœ¨æœºåˆ¶å¹¶é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº†å¸¸è§å®ç°æ–¹å¼çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;å®ç°åŸç†&lt;/th&gt;
&lt;th&gt;å‡†æ—¶æ€§&lt;/th&gt;
&lt;th&gt;å¯é æ€§&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é”®ç©ºé—´é€šçŸ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¢é˜… Redis çš„ &lt;code&gt;__keyevent@*__:expired&lt;/code&gt;é¢‘é“ï¼Œç›‘å¬é”®è¿‡æœŸäº‹ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€èˆ¬&lt;/strong&gt;ï¼Œå—æƒ°æ€§åˆ é™¤å’Œå®šæœŸåˆ é™¤ç­–ç•¥å½±å“ï¼Œå¯èƒ½æœ‰å»¶è¿Ÿã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½&lt;/strong&gt;ï¼ŒPub/Sub æ¨¡å¼ä¸ä¿è¯æ¶ˆæ¯å¿…è¾¾ï¼Œæ— è®¢é˜…æ—¶æ¶ˆæ¯ä¸¢å¤±ã€‚&lt;/td&gt;
&lt;td&gt;å®æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œå…è®¸å°‘é‡æ¶ˆæ¯ä¸¢å¤±çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰åºé›†åˆ (ZSET) è½®è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ¶ˆæ¯åˆ°æœŸæ—¶é—´æˆ³ä½œä¸º scoreï¼Œä¸šåŠ¡è¿›ç¨‹å®šæ—¶è½®è¯¢è·å–åˆ°æœŸæ¶ˆæ¯ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯æ§&lt;/strong&gt;ï¼Œè½®è¯¢é¢‘ç‡è¶ŠçŸ­ï¼Œå‡†æ—¶æ€§è¶Šé«˜ï¼Œä½† CPU å¼€é”€è¶Šå¤§ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸­&lt;/strong&gt;ï¼Œæ¶ˆæ¯æŒä¹…åŒ–åœ¨ Redis ä¸­ï¼Œä½†éœ€å¤„ç†è½®è¯¢é—´éš”çš„ç²¾åº¦å’Œé‡å¤æ¶ˆè´¹ã€‚&lt;/td&gt;
&lt;td&gt;å»¶è¿Ÿä»»åŠ¡é‡ä¸å¤§ï¼Œå¯¹å®æ—¶æ€§è¦æ±‚å¯æ§çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Redisson å»¶è¿Ÿé˜Ÿåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è£… ZSET å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæä¾›å¼€ç®±å³ç”¨çš„ APIï¼Œå†…éƒ¨é«˜æ•ˆè½¬ç§»åˆ°æœŸæ¶ˆæ¯ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œå†…éƒ¨æœ‰é«˜æ•ˆçš„ä»»åŠ¡è½¬ç§»æœºåˆ¶ï¼Œå®æ—¶æ€§å¥½ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œæ¶ˆæ¯æŒä¹…åŒ–ï¼›ä»é˜»å¡é˜Ÿåˆ—å–æ¶ˆæ¯ï¼Œé¿å…é‡å¤æ¶ˆè´¹ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒæ¨è&lt;/strong&gt;ï¼Œéœ€è¦é«˜å¯é å’Œå‡†å®æ—¶æ€§çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ–¹æ¡ˆé€‰æ‹©ä¸ä¼˜åŒ–å»ºè®®"&gt;ğŸ’¡ æ–¹æ¡ˆé€‰æ‹©ä¸ä¼˜åŒ–å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Œå–å†³äºä½ çš„ä¸šåŠ¡å¯¹&lt;strong&gt;å‡†æ—¶æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;å¯é æ€§&lt;/strong&gt;çš„è¦æ±‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚ç®€å•å¿«é€Ÿï¼Œå¯æ¥å—ç§’çº§å»¶è¿Ÿ&lt;/strong&gt;ï¼šå¯ä»¥è€ƒè™‘ &lt;strong&gt;Redis é”®ç©ºé—´é€šçŸ¥&lt;/strong&gt;ã€‚ä½†åŠ¡å¿…äº†è§£å…¶å±€é™æ€§ï¼šç”±äº Redis è¿‡æœŸé”®åˆ é™¤ç­–ç•¥æ˜¯&lt;strong&gt;æƒ°æ€§åˆ é™¤&lt;/strong&gt;ï¼ˆè®¿é—®æ—¶æ‰æ£€æŸ¥ï¼‰å’Œ&lt;strong&gt;å®šæœŸåˆ é™¤&lt;/strong&gt;ï¼ˆé»˜è®¤æ¯ 100ms éšæœºæ£€æŸ¥ä¸€æ‰¹ï¼‰çš„ç»“åˆï¼Œä¸€ä¸ªé”®è¿‡æœŸåï¼Œå¯èƒ½ä¸ä¼šè¢«ç«‹åˆ»åˆ é™¤ï¼Œå¯¼è‡´äº‹ä»¶é€šçŸ¥æœ‰å»¶è¿Ÿã€‚æ­¤å¤–ï¼ŒRedis çš„ Pub/Sub æ¨¡å¼æ˜¯â€œå‘åå³å¿˜â€çš„ï¼Œå¦‚æœå½“æ—¶æ²¡æœ‰è®¢é˜…è€…ï¼Œè¿‡æœŸæ¶ˆæ¯å°±å½»åº•ä¸¢å¤±äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ›´é«˜å¯é æ€§ï¼Œä¸”æœ‰ä¸€å®šå¼€å‘èƒ½åŠ›&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ &lt;strong&gt;æœ‰åºé›†åˆ (ZSET) è½®è¯¢&lt;/strong&gt;ã€‚ä½ å¯ä»¥é€šè¿‡ç¼©çŸ­è½®è¯¢é—´éš”ï¼ˆå¦‚æ¯ 100ms ä¸€æ¬¡ï¼‰æ¥æé«˜å‡†æ—¶æ€§ã€‚ä¸ºäº†æå‡æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨ Lua è„šæœ¬ä¿è¯æŸ¥è¯¢å’Œåˆ é™¤çš„åŸå­æ€§ï¼Œé¿å…é‡å¤å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒæ¨èï¼Œå¸Œæœ›å¼€ç®±å³ç”¨&lt;/strong&gt;ï¼šç›´æ¥ä½¿ç”¨ &lt;strong&gt;Redisson çš„ RDelayedQueue&lt;/strong&gt;ã€‚å®ƒåœ¨æœ‰åºé›†åˆçš„åŸºç¡€ä¸Šè¿›è¡Œäº†å°è£…ï¼Œå†…éƒ¨é€šè¿‡åå°ä»»åŠ¡é«˜æ•ˆåœ°å°†åˆ°æœŸæ¶ˆæ¯è½¬ç§»åˆ°å¾…å¤„ç†é˜Ÿåˆ—ï¼Œæ—¢ä¿è¯äº†å‡†æ—¶æ€§ï¼Œåˆé€šè¿‡é˜Ÿåˆ—æœºåˆ¶è§£å†³äº†å¯é æ€§å’Œé‡å¤æ¶ˆè´¹é—®é¢˜ï¼Œæ˜¯ Java é¡¹ç›®ä¸­éå¸¸çœå¿ƒçš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æå‡å‡†æ—¶æ€§çš„é€šç”¨é…ç½®"&gt;ğŸ”§ æå‡å‡†æ—¶æ€§çš„é€šç”¨é…ç½®
&lt;/h3&gt;&lt;p&gt;æ— è®ºç”¨å“ªç§æ–¹æ¡ˆï¼Œåˆç†çš„ Redis æœåŠ¡å™¨é…ç½®éƒ½æ˜¯åŸºç¡€ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´ &lt;code&gt;hz&lt;/code&gt;å‚æ•°&lt;/strong&gt;ï¼šè¿™ä¸ªå‚æ•°æ§åˆ¶äº† Redis &lt;strong&gt;å®šæœŸåˆ é™¤&lt;/strong&gt;ä»»åŠ¡æ¯ç§’æ‰§è¡Œçš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯ 10ï¼ˆå³æ¯ 100ms ä¸€æ¬¡ï¼‰ã€‚é€‚å½“è°ƒå¤§ &lt;code&gt;hz&lt;/code&gt;ï¼ˆä¾‹å¦‚è®¾ä¸º 15-20ï¼‰ï¼Œå¯ä»¥è®© Redis æ›´é¢‘ç¹åœ°æ£€æŸ¥å¹¶åˆ é™¤è¿‡æœŸé”®ï¼Œä»è€Œè®©è¿‡æœŸäº‹ä»¶æ›´æ—©è§¦å‘ã€‚æ³¨æ„ï¼Œè°ƒå¾—å¤ªé«˜ä¼šå¢åŠ  CPU å‹åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½® &lt;code&gt;maxmemory-policy&lt;/code&gt;&lt;/strong&gt;ï¼šå½“å†…å­˜ä¸è¶³æ—¶ï¼Œè®¾ç½®åˆç†çš„æ·˜æ±°ç­–ç•¥èƒ½è¾…åŠ©æ¸…ç†ç©ºé—´ã€‚å¦‚æœä½ çš„é”®éƒ½è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;volatile-ttl&lt;/code&gt;æˆ– &lt;code&gt;volatile-lru&lt;/code&gt;ç­‰ç­–ç•¥ï¼Œä¼˜å…ˆæ·˜æ±°è¿‡æœŸé”®æˆ–æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¤§é‡é”®åŒæ—¶è¿‡æœŸ&lt;/strong&gt;ï¼šè¿™å¯èƒ½å¯¼è‡´ç¼“å­˜é›ªå´©ï¼Œå¹¶ç»™äº‹ä»¶å¤„ç†ç³»ç»Ÿå¸¦æ¥å·¨å¤§å‹åŠ›ã€‚è§£å†³æ–¹æ³•æ˜¯ç»™è¿‡æœŸæ—¶é—´åŠ ä¸Šä¸€ä¸ªéšæœºåç§»å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£â€œå‡†æ—¶â€çš„å«ä¹‰&lt;/strong&gt;ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¾ˆéš¾åšåˆ°æ¯«ç§’ä¸å·®çš„â€œç»å¯¹å‡†æ—¶â€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å®ç°â€œ&lt;strong&gt;å‡†å®æ—¶&lt;/strong&gt;â€ï¼Œå°†å»¶è¿Ÿæ§åˆ¶åœ¨ä¸šåŠ¡å¯æ¥å—çš„èŒƒå›´å†…ï¼ˆå¦‚ç§’çº§æˆ–ç™¾æ¯«ç§’çº§ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ è®¾è®¡å‡ºæ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æ–¹æ¡ˆã€‚å¦‚æœä½ èƒ½åˆ†äº«ä¸€ä¸‹å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼ˆæ¯”å¦‚æ˜¯ç”¨äºè®¢å•è¶…æ—¶å…³é—­è¿˜æ˜¯å®šæ—¶é€šçŸ¥ï¼‰ï¼Œæˆ–è®¸æˆ‘å¯ä»¥ç»™å‡ºæ›´å…·ä½“çš„å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id="hyperloglog"&gt;HyperLoglog
&lt;/h2&gt;&lt;p&gt;Redis HyperLogLog æ˜¯ä¸€ç§ç”¨äº&lt;strong&gt;åŸºæ•°ç»Ÿè®¡&lt;/strong&gt;çš„æ¦‚ç‡æ•°æ®ç»“æ„ï¼Œå®ƒèƒ½å¤Ÿä»¥æå°çš„å†…å­˜å¼€é”€ï¼ˆæ¯ä¸ªé”®çº¦12KBï¼‰ä¼°ç®—æµ·é‡æ•°æ®é›†ä¸­&lt;strong&gt;ä¸é‡å¤å…ƒç´ çš„æ•°é‡&lt;/strong&gt;ã€‚è™½ç„¶ç»“æœå­˜åœ¨çº¦0.81%çš„æ ‡å‡†è¯¯å·®ï¼Œä½†å…¶å“è¶Šçš„ç©ºé—´æ•ˆç‡ä½¿å…¶åœ¨å¤§æ•°æ®åœºæ™¯ä¸­æå…·ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒä¼˜åŠ¿ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº† HyperLogLog ä¸ä½¿ç”¨ Set è¿›è¡Œç²¾ç¡®åŸºæ•°ç»Ÿè®¡çš„å…³é”®å·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Redis HyperLogLog&lt;/th&gt;
&lt;th&gt;Redis Set (ç²¾ç¡®è®¡æ•°)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç²¾åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿‘ä¼¼è®¡æ•°&lt;/strong&gt; (æ ‡å‡†è¯¯å·® 0.81%)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®è®¡æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šçº¦ 12KB&lt;/strong&gt;ï¼Œä¸å…ƒç´ æ•°é‡æ— å…³&lt;/td&gt;
&lt;td&gt;éšå…ƒç´ æ•°é‡&lt;strong&gt;çº¿æ€§å¢é•¿&lt;/strong&gt;ï¼Œæ¶ˆè€—å¤§é‡å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…ä¼°ç®—åŸºæ•°æ€»æ•°&lt;/td&gt;
&lt;td&gt;å­˜å‚¨æ‰€æœ‰å”¯ä¸€å…ƒç´ ï¼Œå¯æŸ¥è¯¢å…·ä½“æˆå‘˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æµ·é‡æ•°æ®åŸºæ•°ä¼°ç®— (å¦‚ç½‘ç«™UV)&lt;/td&gt;
&lt;td&gt;éœ€è¦ç²¾ç¡®ç»“æœæˆ–å…ƒç´ æ˜ç»†çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ç®€ä»‹"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ç®€ä»‹
&lt;/h3&gt;&lt;p&gt;HyperLogLog çš„å·§å¦™ä¹‹å¤„åœ¨äºå®ƒä¸å­˜å‚¨æ¯ä¸ªå…ƒç´ æœ¬èº«ï¼Œè€Œæ˜¯é€šè¿‡åˆ†æå…ƒç´ çš„å“ˆå¸Œå€¼æ¥ä¼°ç®—åŸºæ•°ã€‚å…¶æ ¸å¿ƒæ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œä¸è§‚å¯Ÿ&lt;/strong&gt;ï¼šå¯¹æ¯ä¸ªè¾“å…¥å…ƒç´ è®¡ç®—ä¸€ä¸ª64ä½çš„å“ˆå¸Œå€¼ã€‚è¿™ä¸ªå“ˆå¸Œå€¼å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸²éšæœºçš„æ¯”ç‰¹åºåˆ—ï¼ˆä¾‹å¦‚ &lt;code&gt;0101...&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ‰¾è§„å¾‹&lt;/strong&gt;ï¼šç»Ÿè®¡è¿™ä¸ªå“ˆå¸Œå€¼ä»æœ€ä½ä½å¼€å§‹ï¼Œ&lt;strong&gt;è¿ç»­å‡ºç°0çš„æœ€å¤§ä½æ•°&lt;/strong&gt;ã€‚è¿™ç±»ä¼¼äºè¿ç»­æŠ›ç¡¬å¸ç›´åˆ°å‡ºç°æ­£é¢æ‰€éœ€çš„æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ¡¶å¹³å‡&lt;/strong&gt;ï¼šRedis å°†å“ˆå¸Œå€¼ç©ºé—´åˆ’åˆ†ä¸º &lt;strong&gt;16384 ä¸ªæ¡¶&lt;/strong&gt;ã€‚é€šè¿‡å°†ä¸åŒå…ƒç´ å“ˆå¸Œå€¼çš„å‰14ä½ä½œä¸ºæ¡¶ç´¢å¼•ï¼Œåˆ†æ•£åˆ°å„ä¸ªæ¡¶ä¸­ç»Ÿè®¡å…¶æœ€å¤§é›¶ä½æ•°ã€‚æœ€åï¼Œä½¿ç”¨&lt;strong&gt;è°ƒå’Œå¹³å‡æ•°&lt;/strong&gt;ç»¼åˆæ‰€æœ‰æ¡¶çš„ä¿¡æ¯ï¼Œå¾—å‡ºæœ€ç»ˆçš„åŸºæ•°ä¼°è®¡å€¼ã€‚è¿™ç§æ–¹æ³•èƒ½æœ‰æ•ˆé¿å…ä¸ªåˆ«æç«¯å€¼å¯¹æ•´ä½“ä¼°ç®—çš„å½±å“ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦å‘½ä»¤ä¸åº”ç”¨"&gt;ğŸ› ï¸ ä¸»è¦å‘½ä»¤ä¸åº”ç”¨
&lt;/h3&gt;&lt;p&gt;Redis ä¸º HyperLogLog æä¾›äº†ä¸‰ä¸ªç®€æ´çš„å‘½ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PFADD key element [element ...]&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æŒ‡å®šçš„ HyperLogLog ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;PFADD page1:uv user1 user2 user3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PFCOUNT key [key ...]&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šè¿”å›ç»™å®š HyperLogLog çš„åŸºæ•°ä¼°ç®—å€¼ã€‚è‹¥æŒ‡å®šå¤šä¸ªkeyï¼Œåˆ™è¿”å›å®ƒä»¬å¹¶é›†çš„åŸºæ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;PFCOUNT page1:uv&lt;/code&gt;æˆ– &lt;code&gt;PFCOUNT monday-uv tuesday-uv&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PFMERGE destkey sourcekey [sourcekey ...]&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;ï¼šå°†å¤šä¸ª HyperLogLog åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ HyperLogLogï¼Œåˆå¹¶åçš„ HyperLogLog ä¼°ç®—çš„åŸºæ•°æ˜¯æ‰€æœ‰æº HyperLogLog çš„å¹¶é›†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;PFMERGE weekly-uv monday-uv tuesday-uv wednesday-uv&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…¸å‹åº”ç”¨åœºæ™¯"&gt;å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç«™ç‹¬ç«‹è®¿å®¢ï¼ˆUVï¼‰ç»Ÿè®¡&lt;/strong&gt;ï¼šè¿™æ˜¯ HyperLogLog æœ€ç»å…¸çš„åº”ç”¨ã€‚åªéœ€ä¸ºæ¯ä¸ªé¡µé¢æˆ–æ¯ä¸ªæ—¶é—´æ®µï¼ˆå¦‚æ¯å¤©ï¼‰åˆ›å»ºä¸€ä¸ª HyperLogLog é”®ï¼Œå°†è®¿é—®è€…çš„IPåœ°å€æˆ–ç”¨æˆ·IDä½œä¸ºå…ƒç´ æ·»åŠ å³å¯ã€‚å³ä½¿é¢å¯¹æ•°ç™¾ä¸‡è®¿å®¢ï¼Œå†…å­˜å ç”¨ä¹Ÿæå°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§è§„æ¨¡æ•°æ®å»é‡åˆ†æ&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œç»Ÿè®¡æŸå¤§å‹æ´»åŠ¨ä¸­ä¸åŒæ¥æºï¼ˆå¦‚å¤šä¸ªå¹¿å‘Šæ¸ é“ï¼‰å¸¦æ¥çš„æ€»å”¯ä¸€ç”¨æˆ·æ•°ã€‚å¯ä»¥åˆ†åˆ«ä¸ºæ¯ä¸ªæ¸ é“çš„æ•°æ®åˆ›å»ºä¸€ä¸ª HyperLogLogï¼Œæœ€åä½¿ç”¨ &lt;code&gt;PFMERGE&lt;/code&gt;åˆå¹¶å¹¶è®¡ç®—æ€»æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ HyperLogLog æ—¶ï¼Œè¯·åŠ¡å¿…æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœæ˜¯è¿‘ä¼¼çš„&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€é‡è¦çš„å‰æã€‚å¦‚æœä½ çš„ä¸šåŠ¡åœºæ™¯è¦æ±‚100%ç²¾ç¡®çš„è®¡æ•°ï¼ˆå¦‚é‡‘èäº¤æ˜“ç¬”æ•°ï¼‰ï¼Œåˆ™ä¸åº”ä½¿ç”¨ HyperLogLogã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å­˜å‚¨åŸå§‹æ•°æ®&lt;/strong&gt;ï¼šHyperLogLog åªç”¨äºè®¡ç®—åŸºæ•°ï¼Œä½ æ— æ³•ä»ä¸­è·å–æˆ–åˆ—å‡ºæ·»åŠ äº†å“ªäº›å…·ä½“çš„å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨€ç–å­˜å‚¨ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨åŸºæ•°å¾ˆå°çš„æ—¶å€™ï¼ŒRedis ä¼šé‡‡ç”¨ä¸€ç§ç¨€ç–å­˜å‚¨ç»“æ„æ¥è¿›ä¸€æ­¥èŠ‚çœç©ºé—´ã€‚å½“åŸºæ•°å¢å¤§åˆ°ä¸€å®šç¨‹åº¦åï¼Œæ‰ä¼šè½¬æ¢ä¸ºå›ºå®šçš„ç¨ å¯†ç»“æ„ï¼ˆå ç”¨çº¦12KBï¼‰ã€‚è¿™ä¸ªè½¬æ¢é˜ˆå€¼å¯ä»¥é€šè¿‡é…ç½®è°ƒæ•´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒRedis HyperLogLog æ˜¯ä¸€ç§ç”¨å¯æ¥å—çš„ç²¾åº¦è¯¯å·®æ¢å–å·¨å¤§å†…å­˜ç©ºé—´èŠ‚çœçš„å¼ºå¤§å·¥å…·ã€‚å®ƒéå¸¸é€‚åˆå¤„ç†æµ·é‡æ•°æ®çš„åŸºæ•°ä¼°ç®—é—®é¢˜ï¼Œæ˜¯æ¯ä¸€ä½éœ€è¦åº”å¯¹å¤§æ•°æ®åœºæ™¯çš„å¼€å‘è€…éƒ½åº”è¯¥äº†è§£çš„åˆ©å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ Redis HyperLogLogã€‚å¦‚æœä½ å¯¹ç‰¹å®šå‘½ä»¤çš„ç”¨æ³•æˆ–æ›´å¤æ‚çš„åº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="hyperloglog-bitmap"&gt;HyperLoglog, bitmap
&lt;/h2&gt;&lt;p&gt;HyperLogLogã€Bitmapå’Œå¸ƒéš†è¿‡æ»¤å™¨éƒ½æ˜¯Redisä¸­ç”¨äºé«˜æ•ˆå¤„ç†æµ·é‡æ•°æ®çš„åˆ©å™¨ï¼Œä½†å®ƒä»¬çš„è®¾è®¡ç›®æ ‡å’Œä½¿ç”¨åœºæ™¯æœ‰æ˜¾è‘—åŒºåˆ«ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠ“ä½ä¸‰è€…çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;HyperLogLog&lt;/th&gt;
&lt;th&gt;Bitmap (ä½å›¾)&lt;/th&gt;
&lt;th&gt;å¸ƒéš†è¿‡æ»¤å™¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸºæ•°ä¼°ç®—&lt;/strong&gt; (ä¸é‡å¤å…ƒç´ ä¸ªæ•°)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®è®°å½•&lt;/strong&gt;äºŒå€¼çŠ¶æ€ï¼ˆæ˜¯/å¦ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¦‚ç‡æ€§åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šçº¦12KB&lt;/strong&gt;ï¼Œä¸æ•°æ®é‡æ— å…³&lt;/td&gt;
&lt;td&gt;éšæ•°æ®è§„æ¨¡&lt;strong&gt;çº¿æ€§å¢é•¿&lt;/strong&gt;ï¼ˆä½†æ¯”æ™®é€šé›†åˆçœç©ºé—´ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸é¢„æœŸå…ƒç´ æ•°é‡å’Œå¯æ¥å—çš„è¯¯åˆ¤ç‡æœ‰å…³ï¼Œé€šå¸¸æ¯”å­˜å‚¨å®Œæ•´æ•°æ®å°å¾—å¤š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿‘ä¼¼å€¼&lt;/strong&gt;ï¼Œæ ‡å‡†è¯¯å·®çº¦0.81%&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½å­˜åœ¨è¯¯åˆ¤&lt;/strong&gt;ï¼ˆå‡é˜³æ€§ï¼‰ï¼Œä½†&lt;strong&gt;ç»ä¸ä¼šæ¼åˆ¤&lt;/strong&gt;ï¼ˆå‡é˜´æ€§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å­˜å‚¨åŸå§‹æ•°æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ç›´æ¥å­˜å‚¨å…ƒç´ æœ¬èº«ï¼Œè€Œæ˜¯é€šè¿‡ä½åç§»æ ‡è®°&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç½‘ç«™ç‹¬ç«‹è®¿å®¢(UV)ç»Ÿè®¡ã€å¤§è§„æ¨¡å»é‡è®¡æ•°&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ç­¾åˆ°ã€æ˜¯å¦åœ¨çº¿ç­‰äºŒå€¼çŠ¶æ€è®°å½•&lt;/td&gt;
&lt;td&gt;è§£å†³ç¼“å­˜ç©¿é€ã€åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€çˆ¬è™«URLå»é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ç®€ä»‹"&gt;ğŸ’¡ å·¥ä½œåŸç†ç®€ä»‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Bitmap&lt;/strong&gt;ï¼šå¯ä»¥æƒ³è±¡æˆä¸€ä¸ªéå¸¸é•¿çš„ã€åªç”±0å’Œ1ç»„æˆçš„æ ¼å­çº¸ã€‚æ¯ä¸ªæ ¼å­ä»£è¡¨ä¸€ä¸ªæ ‡è¯†ï¼ˆæ¯”å¦‚ç”¨æˆ·IDï¼‰ï¼Œ0è¡¨ç¤ºâ€œå¦â€ï¼ˆå¦‚æœªç­¾åˆ°ï¼‰ï¼Œ1è¡¨ç¤ºâ€œæ˜¯â€ï¼ˆå¦‚å·²ç­¾åˆ°ï¼‰ã€‚å®ƒé€šè¿‡ä½åç§»æ¥å®šä½å’Œæ ‡è®°æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨&lt;/strong&gt;ï¼šå®ƒä½¿ç”¨ä¸€ä¸ªå¤§çš„ä½æ•°ç»„ï¼ˆå¯ç†è§£ä¸ºBitmapï¼‰å’Œå¤šä¸ªç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ã€‚æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œä¼šç”¨è¿™äº›å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºå¤šä¸ªä½ç½®ï¼Œå¹¶å°†ä½æ•°ç»„ä¸­å¯¹åº”çš„ä½è®¾ç½®ä¸º1ã€‚æŸ¥è¯¢æ—¶ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ å¯¹åº”çš„æ‰€æœ‰ä½éƒ½æ˜¯1ï¼Œåˆ™åˆ¤æ–­ä¸ºâ€œå¯èƒ½å­˜åœ¨â€ï¼›å¦‚æœä»»ä½•ä¸€ä¸ªä½æ˜¯0ï¼Œåˆ™åˆ¤æ–­ä¸ºâ€œè‚¯å®šä¸å­˜åœ¨â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HyperLogLog&lt;/strong&gt;ï¼šå®ƒçš„æ ¸å¿ƒæ€æƒ³å¾ˆå·§å¦™ï¼Œé€šè¿‡ç»Ÿè®¡å…ƒç´ å“ˆå¸Œå€¼çš„äºŒè¿›åˆ¶å½¢å¼ä¸­â€œå‰å¯¼é›¶â€çš„åˆ†å¸ƒç‰¹å¾æ¥ä¼°ç®—åŸºæ•°ã€‚ä¸ºäº†é™ä½è¯¯å·®ï¼Œå®ƒé‡‡ç”¨äº†â€œåˆ†æ¡¶å¹³å‡â€çš„ç­–ç•¥ã€‚Redisçš„å®ç°ä¸­ä½¿ç”¨äº†16384ä¸ªæ¡¶ï¼Œè¿™æ­£æ˜¯å…¶å ç”¨12KBå†…å­˜çš„åŸå› ï¼ˆæ¯ä¸ªæ¡¶å 6ä½ï¼Œ16384 * 6 / 8 / 1024 = 12KBï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹å†³ç­–æµç¨‹æ¥é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[éœ€è¦å¤„ç†æµ·é‡æ•°æ®] --&amp;gt; B{æ ¸å¿ƒéœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ}
B --&amp;gt; C[åªéœ€è¦çŸ¥é“ä¸é‡å¤å…ƒç´ çš„&amp;lt;br&amp;gt;å¤§è‡´æ•°é‡]
B --&amp;gt; D[éœ€è¦ç²¾ç¡®åˆ¤æ–­æ¯ä¸ªå…ƒç´ &amp;lt;br&amp;gt;çš„å•ä¸ªäºŒå€¼çŠ¶æ€ï¼ˆæ˜¯/å¦ï¼‰]
B --&amp;gt; E[éœ€è¦é«˜æ•ˆåˆ¤æ–­ä¸€ä¸ªå…ƒç´ &amp;lt;br&amp;gt;æ˜¯å¦å­˜åœ¨äºæŸä¸ªé›†åˆ]
C --&amp;gt; F[æ¨èä½¿ç”¨&amp;lt;br&amp;gt;HyperLogLog]
D --&amp;gt; G[æ¨èä½¿ç”¨&amp;lt;br&amp;gt;Bitmap]
E --&amp;gt; H{æ˜¯å¦å…è®¸å¾®å°è¯¯åˆ¤ï¼Ÿ}
H -- æ˜¯ --&amp;gt; I[æ¨èä½¿ç”¨&amp;lt;br&amp;gt;å¸ƒéš†è¿‡æ»¤å™¨]
H -- å¦ï¼Œå¿…é¡»ç²¾ç¡® --&amp;gt; J[è€ƒè™‘ä½¿ç”¨&amp;lt;br&amp;gt;Redis Setæˆ–Hash]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸æé†’"&gt;ğŸ’ æ€»ç»“ä¸æé†’
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ åªå…³å¿ƒ &lt;strong&gt;â€œå¤§æ¦‚æœ‰å¤šå°‘ä¸ªä¸é‡å¤çš„â€&lt;/strong&gt; -&amp;gt; é€‰æ‹© &lt;strong&gt;HyperLogLog&lt;/strong&gt;ï¼Œå®ƒæœ€çœç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦ç²¾ç¡®çŸ¥é“ &lt;strong&gt;â€œè°æ˜¯å¦åšäº†æŸä»¶äº‹â€&lt;/strong&gt; -&amp;gt; é€‰æ‹© &lt;strong&gt;Bitmap&lt;/strong&gt;ï¼Œå®ƒç®€æ´é«˜æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦åˆ¤æ–­ &lt;strong&gt;â€œæŸä¸ªä¸œè¥¿æ˜¯å¦å¯èƒ½å­˜åœ¨äºä¸€ä¸ªå¾ˆå¤§çš„é›†åˆé‡Œâ€&lt;/strong&gt; ä¸”å…è®¸å°‘é‡è¯¯åˆ¤ -&amp;gt; é€‰æ‹© &lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨&lt;/strong&gt;ï¼Œå®ƒèƒ½å¿«é€Ÿæ’é™¤ç»å¯¹ä¸å­˜åœ¨çš„å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒBitmapå’Œå¸ƒéš†è¿‡æ»¤å™¨åœ¨æ•°æ®ç¨€ç–æ—¶å¯èƒ½ä¼šæœ‰ç©ºé—´æµªè´¹ï¼Œå¯¹æ­¤Bitmapæœ‰RoaringBitmapç­‰ä¼˜åŒ–æ–¹æ¡ˆã€‚æ­¤å¤–ï¼Œå¸ƒéš†è¿‡æ»¤å™¨é€šå¸¸ä¸æ”¯æŒåˆ é™¤å…ƒç´ ï¼Œå› ä¸ºåˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼ˆå°†å…¶å¯¹åº”ä½ç½®ç½®0ï¼‰å¯èƒ½ä¼šå½±å“å…¶ä»–å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½å¯¹æ¯”èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­åšå‡ºæœ€åˆé€‚çš„æŠ€æœ¯é€‰å‹ï¼&lt;/p&gt;
&lt;h2 id="incr"&gt;Incr
&lt;/h2&gt;&lt;p&gt;Redis çš„ &lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤èƒ½å¤Ÿå¯¹ä¸å­˜åœ¨çš„ key è¿›è¡Œæ“ä½œï¼Œæ˜¯å…¶è®¾è®¡ä¸Šçš„ä¸€å¤§ç‰¹ç‚¹ï¼Œä¸»è¦æ˜¯ä¸ºäº†&lt;strong&gt;æ–¹ä¾¿è®¡æ•°å™¨çš„å®ç°&lt;/strong&gt;ï¼Œå¹¶ç¡®ä¿&lt;strong&gt;æ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-incr-å‘½ä»¤çš„åŸºæœ¬è¡Œä¸º"&gt;âš™ï¸ INCR å‘½ä»¤çš„åŸºæœ¬è¡Œä¸º
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤çš„æ ¸å¿ƒè¡Œä¸ºæ˜¯ï¼šå½“æŒ‡å®šçš„ key &lt;strong&gt;ä¸å­˜åœ¨&lt;/strong&gt;æ—¶ï¼ŒRedis ä¼š&lt;strong&gt;è‡ªåŠ¨åˆ›å»ºè¿™ä¸ª keyï¼Œå¹¶å°†å…¶å€¼åˆå§‹åŒ–ä¸º 0&lt;/strong&gt;ï¼Œç„¶ååœ¨è¿™ä¸ªåˆå§‹å€¼ 0 çš„åŸºç¡€ä¸Šæ‰§è¡ŒåŠ  1 æ“ä½œã€‚æ‰€ä»¥ï¼Œå¯¹ä¸€ä¸ªä¸å­˜åœ¨çš„ key é¦–æ¬¡æ‰§è¡Œ &lt;code&gt;INCR&lt;/code&gt;ï¼Œç»“æœä¼šæ˜¯ 1ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ key å·²ç»å­˜åœ¨ï¼Œä½†å…¶å­˜å‚¨çš„å€¼&lt;strong&gt;æ— æ³•è¢«è§£é‡Šä¸ºä¸€ä¸ªæ•´æ•°&lt;/strong&gt;ï¼ˆæ¯”å¦‚æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸² &amp;ldquo;abc&amp;rdquo;ï¼‰ï¼Œé‚£ä¹ˆ &lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–è®¡æ•°å™¨å®ç°&lt;/strong&gt;ï¼š&lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤æœ€å¸¸è§çš„ç”¨é€”å°±æ˜¯å®ç°è®¡æ•°å™¨ï¼Œä¾‹å¦‚ç»Ÿè®¡ç½‘ç«™è®¿é—®é‡ã€ç”¨æˆ·ç‚¹èµæ•°ç­‰ã€‚å¦‚æœæ¯æ¬¡æ“ä½œå‰éƒ½éœ€è¦å…ˆæ£€æŸ¥ key æ˜¯å¦å­˜åœ¨å¹¶æ˜¾å¼åˆå§‹åŒ–ï¼Œä»£ç ä¼šå˜å¾—å¤æ‚ä¸”å®¹æ˜“å‡ºé”™ã€‚&lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤çš„â€œä¸å­˜åœ¨å³åˆå§‹åŒ–â€ç‰¹æ€§è®©è®¡æ•°å™¨çš„å®ç°å˜å¾—éå¸¸ç®€æ´å’Œç›´æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯åŸå­æ€§&lt;/strong&gt;ï¼š&lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤æ˜¯ä¸€ä¸ª&lt;strong&gt;åŸå­æ“ä½œ&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€â€œæ£€æŸ¥ key æ˜¯å¦å­˜åœ¨ã€åˆå§‹åŒ–ä¸º 0ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€æ‰§è¡ŒåŠ  1 æ“ä½œâ€è¿™ä¸€ç³»åˆ—æ­¥éª¤åœ¨ Redis å†…éƒ¨æ˜¯ä½œä¸ºä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“æ‰§è¡Œçš„ã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå³ä½¿å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å¯¹åŒä¸€ä¸ª key æ‰§è¡Œ &lt;code&gt;INCR&lt;/code&gt;ï¼ŒRedis ä¹Ÿèƒ½ç¡®ä¿æ¯ä¸ªæ“ä½œéƒ½æ­£ç¡®æ‰§è¡Œï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯å‡†ç¡®æ— è¯¯çš„ã€‚å¦‚æœè¿™ä¸ªæ“ä½œä¸æ˜¯åŸå­çš„ï¼Œå°±å¯èƒ½å‡ºç°å¹¶å‘é—®é¢˜ï¼Œå¯¼è‡´è®¡æ•°ä¸å‡†ç¡®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº•å±‚å®ç°åŸç†"&gt;ğŸ” åº•å±‚å®ç°åŸç†
&lt;/h3&gt;&lt;p&gt;ä» Redis æºç çš„è§’åº¦æ¥çœ‹ï¼Œ&lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤ï¼ˆä»¥åŠç±»ä¼¼çš„ &lt;code&gt;DECR&lt;/code&gt;, &lt;code&gt;INCRBY&lt;/code&gt;ç­‰ï¼‰æœ€ç»ˆéƒ½ä¼šè°ƒç”¨ä¸€ä¸ªæ ¸å¿ƒå‡½æ•° &lt;code&gt;incrDecrCommand&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°çš„å¤§è‡´é€»è¾‘æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œå®ƒä¼šå°è¯•ä»æ•°æ®åº“ä¸­æŸ¥æ‰¾ç»™å®šçš„ keyã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ key ä¸å­˜åœ¨ï¼ŒRedis ä¼šå°†å…¶è§†ä¸ºä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„æƒ…å†µè¿›è¡Œå¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ç€ï¼Œå®ƒä¼šå°è¯•å°† key å¯¹åº”çš„å€¼è§£æä¸º 64 ä½æœ‰ç¬¦å·æ•´æ•°ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œåœ¨åŸå§‹å€¼çš„åŸºç¡€ä¸ŠåŠ ä¸Šï¼ˆæˆ–å‡å»ï¼‰æŒ‡å®šçš„å¢é‡ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œè¿›è¡Œæº¢å‡ºæ£€æŸ¥ï¼Œå¹¶å°†æ–°çš„å€¼å­˜å›æ•°æ®åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§å°†â€œæ£€æŸ¥å­˜åœ¨æ€§â€å’Œâ€œæ‰§è¡Œè¿ç®—â€å°è£…åœ¨ä¸€èµ·çš„è®¾è®¡ï¼Œæ­£æ˜¯åŸå­æ€§æ“ä½œçš„ä¿éšœã€‚&lt;/p&gt;
&lt;h3 id="-ç›¸å…³å‘½ä»¤å®¶æ—"&gt;ğŸ“Œ ç›¸å…³å‘½ä»¤å®¶æ—
&lt;/h3&gt;&lt;p&gt;é™¤äº† &lt;code&gt;INCR&lt;/code&gt;ï¼ŒRedis è¿˜æä¾›äº†ä¸€ç³»åˆ—ç±»ä¼¼çš„åŸå­æ€§æ“ä½œå‘½ä»¤ï¼Œå®ƒä»¬å¯¹ä¸å­˜åœ¨çš„ key éƒ½æœ‰ç›¸åŒçš„åˆå§‹åŒ–è¡Œä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;th&gt;å¯¹ä¸å­˜åœ¨çš„ key çš„æ“ä½œ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INCR key&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å€¼å¢åŠ  1&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–ä¸º 0ï¼Œç„¶ååŠ  1ï¼Œè¿”å› 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DECR key&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å€¼å‡å°‘ 1&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–ä¸º 0ï¼Œç„¶åå‡ 1ï¼Œè¿”å› -1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INCRBY key increment&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å€¼å¢åŠ æŒ‡å®šæ•´æ•°&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–ä¸º 0ï¼Œç„¶ååŠ ä¸Š &lt;code&gt;increment&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DECRBY key decrement&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å€¼å‡å°‘æŒ‡å®šæ•´æ•°&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–ä¸º 0ï¼Œç„¶åå‡å» &lt;code&gt;decrement&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INCRBYFLOAT key increment&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å€¼å¢åŠ æŒ‡å®šæµ®ç‚¹æ•°&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–ä¸º 0ï¼Œç„¶ååŠ ä¸Š &lt;code&gt;increment&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ &lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤çš„è®¾è®¡å“²å­¦å’Œå…¶å¼ºå¤§çš„å®ç”¨æ€§ã€‚å¦‚æœä½ å¯¹ Redis çš„å…¶ä»–åŸå­æ“ä½œæˆ–è€…é«˜å¹¶å‘åœºæ™¯ä¸‹çš„åº”ç”¨è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="rdb"&gt;RDB
&lt;/h2&gt;&lt;p&gt;åœ¨ Redis çš„ RDB æŒä¹…åŒ–æœºåˆ¶ä¸­ï¼Œé‡‡ç”¨ &lt;code&gt;BGSAVE&lt;/code&gt;å‘½ä»¤åˆ›å»ºå¿«ç…§æ—¶ï¼Œå…¶æ ¸å¿ƒåœ¨äºé€šè¿‡æ“ä½œç³»ç»Ÿçš„ &lt;code&gt;fork()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å’Œ&lt;strong&gt;å†™æ—¶å¤åˆ¶ï¼ˆCopy-On-Write, COWï¼‰&lt;/strong&gt; æŠ€æœ¯ï¼Œå®ç°äº†æ•°æ®æŒä¹…åŒ–ä¸æ­£å¸¸æœåŠ¡è¯·æ±‚çš„å¹¶å‘æ‰§è¡Œã€‚ä¸‹é¢è¿™å¼ å›¾æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹çš„æ ¸å¿ƒæ­¥éª¤ä¸æ•°æ®æµå‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å®¢æˆ·ç«¯è¯·æ±‚] --&amp;gt; B[Redis ä¸»è¿›ç¨‹&amp;lt;br&amp;gt;å¤„ç†å‘½ä»¤]
B --&amp;gt; C{è§¦å‘RDBå¿«ç…§?}
C -- æ˜¯ --&amp;gt; D[ä¸»è¿›ç¨‹è°ƒç”¨ fork()]
C -- å¦ --&amp;gt; B
D --&amp;gt; E[åˆ›å»ºå­è¿›ç¨‹]
E --&amp;gt; F[å­è¿›ç¨‹éå†å†…å­˜æ•°æ®]
F --&amp;gt; G[å†™å…¥ä¸´æ—¶&amp;lt;br&amp;gt;RDBæ–‡ä»¶]
G --&amp;gt; H[æ–‡ä»¶å†™å…¥å®Œæˆ]
H --&amp;gt; I[åŸå­æ›¿æ¢æ—§RDBæ–‡ä»¶]
I --&amp;gt; J[å­è¿›ç¨‹é€€å‡º]
B -- æŒç»­å¤„ç†è¯·æ±‚ --&amp;gt; K{æœ‰å†™æ“ä½œ?}
K -- æ˜¯ --&amp;gt; L[æ“ä½œç³»ç»Ÿè§¦å‘COW&amp;lt;br&amp;gt;å¤åˆ¶å†…å­˜é¡µ]
L --&amp;gt; M[ä¸»è¿›ç¨‹åœ¨å‰¯æœ¬ä¸Šä¿®æ”¹]
K -- å¦ --&amp;gt; B
M --&amp;gt; B
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®é˜¶æ®µï¼š&lt;/p&gt;
&lt;h3 id="1--è§¦å‘å¿«ç…§"&gt;1. ğŸ”‘ è§¦å‘å¿«ç…§
&lt;/h3&gt;&lt;p&gt;RDBå¿«ç…§çš„è§¦å‘ä¸»è¦æœ‰æ‰‹åŠ¨å’Œè‡ªåŠ¨ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨è§¦å‘&lt;/strong&gt;ï¼šåœ¨Rediså®¢æˆ·ç«¯æ‰§è¡Œ &lt;code&gt;BGSAVE&lt;/code&gt;å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨è§¦å‘&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;redis.conf&lt;/code&gt;é…ç½®æ–‡ä»¶ä¸­é¢„è®¾æ¡ä»¶ï¼Œä¾‹å¦‚ &lt;code&gt;save 900 1&lt;/code&gt;ï¼ˆ900ç§’å†…è‡³å°‘æœ‰1ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼‰ã€&lt;code&gt;save 300 10&lt;/code&gt;ï¼ˆ300ç§’å†…è‡³å°‘æœ‰10ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼‰ç­‰ã€‚å½“æ»¡è¶³ä»»ä¸€æ¡ä»¶æ—¶ï¼ŒRedisä¼šè‡ªåŠ¨åœ¨åå°æ‰§è¡Œ &lt;code&gt;BGSAVE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2--æ ¸å¿ƒæœºåˆ¶è¯¦è§£"&gt;2. âš™ï¸ æ ¸å¿ƒæœºåˆ¶è¯¦è§£
&lt;/h3&gt;&lt;h4 id="forkç³»ç»Ÿè°ƒç”¨"&gt;&lt;code&gt;fork()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨
&lt;/h4&gt;&lt;p&gt;å½“ &lt;code&gt;BGSAVE&lt;/code&gt;è¢«è§¦å‘åï¼ŒRedisä¸»è¿›ç¨‹ä¼šè°ƒç”¨æ“ä½œç³»ç»Ÿçš„ &lt;code&gt;fork()&lt;/code&gt;å‡½æ•°ã€‚è¿™ä¸ªè°ƒç”¨ä¼šåˆ›å»ºä¸€ä¸ª&lt;strong&gt;å­è¿›ç¨‹&lt;/strong&gt;ï¼Œè¯¥å­è¿›ç¨‹æ˜¯ä¸»è¿›ç¨‹çš„ä¸€ä¸ªå®Œå…¨å‰¯æœ¬ã€‚è¿™æ„å‘³ç€åœ¨ &lt;code&gt;fork()&lt;/code&gt;å®Œæˆçš„ç¬é—´ï¼Œå­è¿›ç¨‹æ‹¥æœ‰ä¸çˆ¶è¿›ç¨‹å®Œå…¨ç›¸åŒçš„&lt;strong&gt;å†…å­˜æ•°æ®æ˜ åƒ&lt;/strong&gt;ï¼ŒåŒ…æ‹¬æ•°æ®åº“ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®åœ¨äºï¼Œ&lt;code&gt;fork()&lt;/code&gt;åˆ›å»ºå­è¿›ç¨‹çš„è¿‡ç¨‹éå¸¸é«˜æ•ˆã€‚ç°ä»£æ“ä½œç³»ç»Ÿï¼ˆå¦‚Linuxï¼‰åœ¨å®ç° &lt;code&gt;fork()&lt;/code&gt;æ—¶ï¼Œå¹¶éç«‹å³å¤åˆ¶æ•´ä¸ªç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯è®©å­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹å…±äº«ç›¸åŒçš„ç‰©ç†å†…å­˜é¡µï¼Œåªæ˜¯å¤åˆ¶äº†çˆ¶è¿›ç¨‹çš„&lt;strong&gt;å†…å­˜é¡µè¡¨&lt;/strong&gt;ã€‚å› æ­¤ï¼Œè¿™ä¸ªè¿‡ç¨‹é€šå¸¸å¾ˆå¿«ï¼Œåªä¼šåœ¨çŸ­æ—¶é—´å†…é˜»å¡ä¸»è¿›ç¨‹ï¼Œé˜»å¡æ—¶é•¿ä¸»è¦å–å†³äºå†…å­˜é¡µè¡¨çš„å¤§å° ã€‚&lt;/p&gt;
&lt;h4 id="å†™æ—¶å¤åˆ¶-copy-on-write"&gt;å†™æ—¶å¤åˆ¶ (Copy-On-Write)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¿è¯æœåŠ¡ä¸ä¸­æ–­å’Œæ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹çŠ¶æ€&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;fork()&lt;/code&gt;ä¹‹åï¼Œå­è¿›ç¨‹å¼€å§‹è´Ÿè´£å°†å†…å­˜æ•°æ®å†™å…¥ä¸€ä¸ªä¸´æ—¶çš„RDBæ–‡ä»¶ã€‚æ­¤æ—¶ï¼Œçˆ¶å­è¿›ç¨‹å…±äº«æ‰€æœ‰çš„ç‰©ç†å†…å­˜é¡µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†å†™è¯·æ±‚&lt;/strong&gt;ï¼šåœ¨ä¸»è¿›ç¨‹ç»§ç»­æœåŠ¡æœŸé—´ï¼Œå¦‚æœæœ‰å®¢æˆ·ç«¯å‘æ¥&lt;strong&gt;å†™å‘½ä»¤&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;SET&lt;/code&gt;, &lt;code&gt;DEL&lt;/code&gt;ç­‰ï¼‰ï¼Œéœ€è¦ä¿®æ”¹æŸå—å†…å­˜æ•°æ®æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä»‹å…¥ã€‚å®ƒä¼šå°†è¢«ä¿®æ”¹çš„&lt;strong&gt;å†…å­˜é¡µå¤åˆ¶ä¸€ä»½å‰¯æœ¬&lt;/strong&gt;ï¼Œç„¶åä¸»è¿›ç¨‹åœ¨è¿™ä¸ªå‰¯æœ¬ä¸Šè¿›è¡Œä¿®æ”¹ã€‚è€Œå­è¿›ç¨‹è¯»å–çš„ä»ç„¶æ˜¯ &lt;code&gt;fork()&lt;/code&gt;ç¬é—´çš„ã€æœªè¢«ä¿®æ”¹çš„åŸå§‹æ•°æ®é¡µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®éš”ç¦»&lt;/strong&gt;ï¼šé€šè¿‡COWæœºåˆ¶ï¼Œå­è¿›ç¨‹çœ‹åˆ°å’Œå†™å…¥RDBæ–‡ä»¶çš„æ˜¯è§¦å‘å¿«ç…§æ—¶é‚£ä¸ª&lt;strong&gt;é™æ­¢çš„æ•°æ®å¿«ç…§&lt;/strong&gt;ï¼Œä»è€Œä¿è¯äº†RDBæ–‡ä»¶çš„æ•°æ®ä¸€è‡´æ€§ã€‚ä¸»è¿›ç¨‹åˆ™å¯ä»¥æŒç»­å¤„ç†è¯·æ±‚ï¼Œä¿®æ”¹æ•°æ® ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3--ä¼˜åŠ¿ä¸æ½œåœ¨å½±å“"&gt;3. ğŸ’¡ ä¼˜åŠ¿ä¸æ½œåœ¨å½±å“
&lt;/h3&gt;&lt;h4 id="ä¸»è¦ä¼˜åŠ¿"&gt;ä¸»è¦ä¼˜åŠ¿
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡é«˜å¯ç”¨æ€§&lt;/strong&gt;ï¼šç”±äºä¸»è¿›ç¨‹åœ¨å¿«ç…§åˆ›å»ºè¿‡ç¨‹ä¸­ï¼ˆé™¤äº†&lt;code&gt;fork()&lt;/code&gt;çš„çŸ­æš‚ç¬é—´å¤–ï¼‰æ— éœ€é˜»å¡ï¼Œå¯ä»¥ç»§ç»­å¤„ç†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒåŒ…æ‹¬è¯»å†™æ“ä½œå’Œ&lt;strong&gt;æ–°è¿æ¥&lt;/strong&gt;ï¼Œä»è€Œä¿è¯äº†æœåŠ¡çš„é«˜å¯ç”¨æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šRDBæ–‡ä»¶ä¿å­˜çš„æ˜¯&lt;strong&gt;æŸä¸ªç¡®å®šæ—¶é—´ç‚¹&lt;/strong&gt;çš„å®Œæ•´æ•°æ®å¿«ç…§ï¼Œéå¸¸é€‚åˆç”¨äºå¤‡ä»½ã€å®¹ç¾æ¢å¤å’Œä¸»ä»å¤åˆ¶ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ½œåœ¨å½±å“ä¸æ³¨æ„äº‹é¡¹"&gt;æ½œåœ¨å½±å“ä¸æ³¨æ„äº‹é¡¹
&lt;/h4&gt;&lt;p&gt;å°½ç®¡æ­¤æœºåˆ¶è®¾è®¡ç²¾å·§ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä»å¯èƒ½å¯¹ç³»ç»Ÿäº§ç”Ÿå½±å“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å‹åŠ›&lt;/strong&gt;ï¼šå¦‚æœåœ¨RDBç”ŸæˆæœŸé—´ï¼Œä¸»è¿›ç¨‹ä¿®æ”¹äº†å¤§é‡æ•°æ®ï¼Œä¼šè§¦å‘å¤§é‡çš„COWæ“ä½œï¼Œå¯¼è‡´å†…å­˜ä¸­å­˜åœ¨å¤§é‡æ•°æ®å‰¯æœ¬ã€‚ç†è®ºä¸Šï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼ˆæ‰€æœ‰å…±äº«å†…å­˜é¡µéƒ½è¢«ä¿®æ”¹ï¼‰ï¼Œ&lt;strong&gt;å†…å­˜å ç”¨å¯èƒ½æ¥è¿‘ç¿»å€&lt;/strong&gt;ã€‚å¦‚æœç³»ç»Ÿå†…å­˜ç´§å¼ ï¼Œå¯èƒ½ä¼šè§¦å‘Swapï¼Œå½±å“æ€§èƒ½ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Forké˜»å¡&lt;/strong&gt;ï¼šå¯¹äºæ•°æ®é‡å·¨å¤§ï¼ˆä¾‹å¦‚å ç”¨æ•°åGBå†…å­˜ï¼‰çš„Rediså®ä¾‹ï¼Œ&lt;code&gt;fork()&lt;/code&gt;æ“ä½œå¤åˆ¶é¡µè¡¨çš„è¿‡ç¨‹å¯èƒ½ä¼š&lt;strong&gt;é˜»å¡ä¸»è¿›ç¨‹è¾ƒé•¿æ—¶é—´&lt;/strong&gt;ï¼ˆå¯èƒ½è¾¾åˆ°æ¯«ç§’çº§ç”šè‡³æ›´é•¿ï¼‰ï¼Œåœ¨è¿™æœŸé—´æ— æ³•å“åº”è¯·æ±‚ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç£ç›˜I/Oå‹åŠ›&lt;/strong&gt;ï¼šå­è¿›ç¨‹å°†æ•°æ®å†™å…¥RDBæ–‡ä»¶ä¼šæ¶ˆè€—ç£ç›˜I/Oå¸¦å®½ï¼Œå¯èƒ½ä¼šå¯¹åŒæ—¶è¿›è¡Œçš„å…¶ä»–I/Oæ“ä½œäº§ç”Ÿç«äº‰ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4--å…¶ä»–è§¦å‘æ–¹å¼å¯¹æ¯”"&gt;4. ğŸ”„ å…¶ä»–è§¦å‘æ–¹å¼å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒRedisä¹Ÿæä¾›äº† &lt;code&gt;SAVE&lt;/code&gt;å‘½ä»¤ç”¨äºåŒæ­¥ç”ŸæˆRDBå¿«ç…§ã€‚&lt;code&gt;SAVE&lt;/code&gt;å‘½ä»¤ä¼š&lt;strong&gt;ç›´æ¥åœ¨ä¸»è¿›ç¨‹ä¸­æ‰§è¡Œ&lt;/strong&gt;ï¼ŒæœŸé—´ä¼šé˜»å¡æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç›´åˆ°å¿«ç…§å®Œæˆ ã€‚å› æ­¤ï¼Œ&lt;strong&gt;&lt;code&gt;BGSAVE&lt;/code&gt;æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­çš„æ ‡å‡†åšæ³•&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;SAVE&lt;/code&gt;é€šå¸¸ä»…ç”¨äºå†…å­˜æ•°æ®é‡å¾ˆå°æˆ–æ— éœ€æä¾›æœåŠ¡çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ Redis RDB æŒä¹…åŒ–æœºåˆ¶çš„ç²¾å¦™ä¹‹å¤„ã€‚å¦‚æœå¯¹ç‰¹å®šç»†èŠ‚è¿˜æƒ³æ·±å…¥äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åˆ†å¸ƒå¼é”"&gt;åˆ†å¸ƒå¼é”
&lt;/h2&gt;&lt;p&gt;åœ¨ Redis åˆ†å¸ƒå¼é”ä¸­ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´å¹¶ç»“åˆå”¯ä¸€æ ‡è¯†æ ¡éªŒï¼Œæ˜¯é¿å…é”æŒæœ‰è€…å´©æºƒå¯¼è‡´æ­»é”çš„æ ¸å¿ƒè®¾è®¡ã€‚è¿™ä¸¤ä¸ªæœºåˆ¶ç›¸äº’é…åˆï¼Œå…±åŒç¡®ä¿äº†é”çš„&lt;strong&gt;è‡ªåŠ¨é‡Šæ”¾&lt;/strong&gt;å’Œ&lt;strong&gt;é‡Šæ”¾å®‰å…¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†è¿™ä¸¤ä¸ªæœºåˆ¶å¦‚ä½•ååŒå·¥ä½œï¼Œä»¥åŠåœ¨æ•´ä¸ªé”ç”Ÿå‘½å‘¨æœŸä¸­çš„å…³é”®æ­¥éª¤ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å°è¯•è·å–åˆ†å¸ƒå¼é”] --&amp;gt; B{è·å–é”æˆåŠŸ?}
B -- æ˜¯ --&amp;gt; C[è®¾ç½®é”çš„è¿‡æœŸæ—¶é—´&amp;lt;br&amp;gt;ï¼ˆå®‰å…¨é—¸æœºåˆ¶ï¼‰]
C --&amp;gt; D[å°†å”¯ä¸€æ ‡è¯†&amp;lt;br&amp;gt;ï¼ˆå¦‚UUIDï¼‰ä½œä¸ºé”å€¼]
D --&amp;gt; E[æ‰§è¡Œä¸šåŠ¡é€»è¾‘]
E --&amp;gt; F[é‡Šæ”¾é”å‰æ ¡éªŒå”¯ä¸€æ ‡è¯†]
F --&amp;gt; G{æ ‡è¯†åŒ¹é…?}
G -- æ˜¯ --&amp;gt; H[åŸå­æ€§é‡Šæ”¾é”]
G -- å¦ --&amp;gt; I[æ”¾å¼ƒé‡Šæ”¾&amp;lt;br&amp;gt;ï¼ˆé”å·²å½’å±å…¶ä»–å®¢æˆ·ç«¯ï¼‰]
H --&amp;gt; J[æµç¨‹ç»“æŸ]
I --&amp;gt; J
B -- å¦ --&amp;gt; K[è·å–é”å¤±è´¥&amp;lt;br&amp;gt;å¯é€‰æ‹©é‡è¯•æˆ–æ”¾å¼ƒ]
K --&amp;gt; J
L[é”æŒæœ‰è€…å´©æºƒ] --&amp;gt; M[åˆ°è¾¾è¿‡æœŸæ—¶é—´]
M --&amp;gt; N[Redisè‡ªåŠ¨åˆ é™¤é”]
N --&amp;gt; O[å…¶ä»–å®¢æˆ·ç«¯å¯é‡æ–°è·å–é”&amp;lt;br&amp;gt;é¿å…æ­»é”]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è§£æå›¾ä¸­çš„å…³é”®ç¯èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id="-é”çš„è¿‡æœŸæ—¶é—´è‡ªåŠ¨é‡Šæ”¾çš„å®‰å…¨é—¸"&gt;ğŸ”‘ é”çš„è¿‡æœŸæ—¶é—´ï¼šè‡ªåŠ¨é‡Šæ”¾çš„â€œå®‰å…¨é—¸â€
&lt;/h3&gt;&lt;p&gt;é”çš„&lt;strong&gt;è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰&lt;/strong&gt; æ˜¯é¿å…æ­»é”çš„ç¬¬ä¸€é“é˜²çº¿ï¼Œå®ƒç›¸å½“äºä¸€ä¸ªâ€œå®‰å…¨é—¸â€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸç†&lt;/strong&gt;ï¼šåœ¨è·å–é”æ—¶ï¼Œé€šè¿‡Redisçš„ &lt;code&gt;SET&lt;/code&gt;å‘½ä»¤é™„å¸¦ &lt;code&gt;PX&lt;/code&gt;æˆ– &lt;code&gt;EX&lt;/code&gt;å‚æ•°ï¼Œå¯ä»¥&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;åœ°å®Œæˆé”çš„è®¾ç½®å’Œè¿‡æœŸæ—¶é—´çš„æŒ‡å®šï¼ˆä¾‹å¦‚ &lt;code&gt;SET lock_key unique_value NX PX 30000&lt;/code&gt;ï¼‰ã€‚è¿™æ ·ï¼Œå³ä½¿é”çš„æŒæœ‰è€…å´©æºƒï¼Œæ— æ³•ä¸»åŠ¨é‡Šæ”¾é”ï¼ŒRedisä¹Ÿä¼šåœ¨è®¾å®šçš„æ—¶é—´ç‚¹è‡ªåŠ¨åˆ é™¤è¿™ä¸ªé”®ï¼Œä»è€Œè®©å…¶ä»–å®¢æˆ·ç«¯æœ‰æœºä¼šé‡æ–°è·å–é”ï¼Œé¿å…äº†æ°¸ä¹…æ€§æ­»é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®è®¾ç½®&lt;/strong&gt;ï¼šè¿‡æœŸæ—¶é—´çš„è®¾ç½®éœ€è¦æƒè¡¡ã€‚è¿‡çŸ­å¯èƒ½å¯¼è‡´ä¸šåŠ¡æœªå®Œæˆé”å°±å¤±æ•ˆï¼Œå¼•å‘æ•°æ®ä¸ä¸€è‡´ï¼›è¿‡é•¿åˆ™ä¼šåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶å»¶é•¿ç³»ç»Ÿæ¢å¤æ—¶é—´ã€‚ä¸€èˆ¬å»ºè®®è®¾ç½®ä¸ºä¸šåŠ¡å¤„ç†æ—¶é—´çš„&lt;strong&gt;1.5è‡³2å€&lt;/strong&gt;ï¼Œå¹¶è€ƒè™‘ä½¿ç”¨ä¸‹æ–‡å°†æåˆ°çš„é”ç»­æœŸæœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å”¯ä¸€æ ‡è¯†æ ¡éªŒå®‰å…¨é‡Šæ”¾çš„èº«ä»½è¯"&gt;ğŸ†” å”¯ä¸€æ ‡è¯†æ ¡éªŒï¼šå®‰å…¨é‡Šæ”¾çš„â€œèº«ä»½è¯â€
&lt;/h3&gt;&lt;p&gt;ä»…æœ‰è¿‡æœŸæ—¶é—´æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºå®ƒå¯èƒ½å¼•å‘&lt;strong&gt;é”è¯¯åˆ &lt;/strong&gt;é—®é¢˜ã€‚å”¯ä¸€æ ‡è¯†æ ¡éªŒæœºåˆ¶ç¡®ä¿äº†é”åªèƒ½ç”±å®ƒçš„æŒæœ‰è€…é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºä½•éœ€è¦å”¯ä¸€æ ‡è¯†&lt;/strong&gt;ï¼šè€ƒè™‘è¿™ä¸ªåœºæ™¯ï¼šå®¢æˆ·ç«¯Aå› æŸäº›åŸå› ï¼ˆå¦‚GCåœé¡¿ï¼‰å¯¼è‡´ä¸šåŠ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡é”çš„è¿‡æœŸæ—¶é—´ã€‚é”è‡ªåŠ¨é‡Šæ”¾åï¼Œå®¢æˆ·ç«¯Bè·å–äº†é”ã€‚æ­¤æ—¶è‹¥å®¢æˆ·ç«¯Aæ¢å¤æ‰§è¡Œå¹¶å®Œæˆäº†ä¸šåŠ¡ï¼Œå®ƒå°±ä¼šå°è¯•é‡Šæ”¾æœ¬ä¸å±äºå®ƒçš„é”ï¼Œä»è€Œè¯¯åˆ äº†å®¢æˆ·ç«¯Bçš„é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•å®ç°&lt;/strong&gt;ï¼šåœ¨è·å–é”æ—¶ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯éœ€è¦å°†ä¸€ä¸ª&lt;strong&gt;å…¨å±€å”¯ä¸€çš„æ ‡è¯†&lt;/strong&gt;ï¼ˆå¦‚UUIDã€æˆ–ç»“åˆæœºå™¨æ ‡è¯†çš„çº¿ç¨‹IDï¼‰ä½œä¸ºé”çš„&lt;code&gt;value&lt;/code&gt;å­˜å…¥Redisã€‚åœ¨é‡Šæ”¾é”æ—¶ï¼Œä¸èƒ½ç®€å•åœ°ä½¿ç”¨ &lt;code&gt;DEL&lt;/code&gt;å‘½ä»¤ï¼Œè€Œæ˜¯è¦å…ˆæ£€æŸ¥å½“å‰é”çš„&lt;code&gt;value&lt;/code&gt;æ˜¯å¦ä¸è‡ªå·±çš„å”¯ä¸€æ ‡è¯†åŒ¹é…ã€‚åªæœ‰åŒ¹é…æ—¶æ‰æ‰§è¡Œåˆ é™¤æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¿è¯åŸå­æ€§luaè„šæœ¬çš„åº”ç”¨"&gt;âš¡ ä¿è¯åŸå­æ€§ï¼šLuaè„šæœ¬çš„åº”ç”¨
&lt;/h3&gt;&lt;p&gt;â€œæ£€æŸ¥å”¯ä¸€æ ‡è¯†â€å’Œâ€œåˆ é™¤é”â€æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„Redisæ“ä½œã€‚ä¸ºäº†ç¡®ä¿è¿™ä¸¤ä¸ªæ­¥éª¤çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼Œé˜²æ­¢åœ¨æ£€æŸ¥ä¹‹åã€åˆ é™¤ä¹‹å‰å‘ç”Ÿç«æ€æ¡ä»¶ï¼Œå¿…é¡»ä½¿ç”¨&lt;strong&gt;Luaè„šæœ¬&lt;/strong&gt;å°†å®ƒä»¬å°è£…ä¸ºä¸€ä¸ªåŸå­æ“ä½œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;if redis.call(&amp;#34;get&amp;#34;, KEYS[1]) == ARGV[1] then
return redis.call(&amp;#34;del&amp;#34;, KEYS[1])
else
return 0
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ®µè„šæœ¬çš„æ„æ€æ˜¯ï¼šå¦‚æœé”é”®ï¼ˆKEYS[1]ï¼‰çš„å€¼ç­‰äºä¼ å…¥çš„å”¯ä¸€æ ‡è¯†ï¼ˆARGV[1]ï¼‰ï¼Œåˆ™åˆ é™¤è¯¥é”ï¼›å¦åˆ™ï¼Œè¿”å›0è¡¨ç¤ºé‡Šæ”¾å¤±è´¥ã€‚Redisä¼šä¿è¯æ•´ä¸ªLuaè„šæœ¬åœ¨æ‰§è¡Œæ—¶ä¸è¢«å…¶ä»–å‘½ä»¤æ‰“æ–­ã€‚&lt;/p&gt;
&lt;h3 id="-è¿›é˜¶å®è·µé”çš„è‡ªåŠ¨ç»­æœŸ"&gt;ğŸ’¡ è¿›é˜¶å®è·µï¼šé”çš„è‡ªåŠ¨ç»­æœŸ
&lt;/h3&gt;&lt;p&gt;å¯¹äºæ‰§è¡Œæ—¶é—´ä¸ç¡®å®šæˆ–å¯èƒ½å¾ˆé•¿çš„ä¸šåŠ¡ï¼Œå¯ä»¥å¼•å…¥&lt;strong&gt;é”è‡ªåŠ¨ç»­æœŸ&lt;/strong&gt;ï¼ˆWatchdogï¼‰æœºåˆ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šåœ¨è·å–é”æˆåŠŸåï¼Œå®¢æˆ·ç«¯å¯åŠ¨ä¸€ä¸ªåå°å®ˆæŠ¤çº¿ç¨‹æˆ–å®šæ—¶ä»»åŠ¡ï¼Œå®šæœŸï¼ˆä¾‹å¦‚ï¼Œåœ¨è¿‡æœŸæ—¶é—´åˆ°è¾¾å‰ä¸‰åˆ†ä¹‹ä¸€æ—¶ï¼‰æ£€æŸ¥ä¸šåŠ¡æ˜¯å¦è¿˜åœ¨æ‰§è¡Œã€‚å¦‚æœä»åœ¨æ‰§è¡Œï¼Œåˆ™è‡ªåŠ¨å»¶é•¿é”çš„è¿‡æœŸæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼šç»­æœŸæœºåˆ¶éœ€è¦è®¾ç½®ä¸Šé™æ¬¡æ•°æˆ–æœ€å¤§æ—¶é•¿ï¼Œå¹¶é…åˆä¸šåŠ¡è¶…æ—¶æ§åˆ¶ï¼Œé˜²æ­¢å› ä¸šåŠ¡é€»è¾‘çœŸæ­£â€œå¡æ­»â€è€Œå¯¼è‡´é”è¢«æ— é™æœŸå ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¿å…â€œå…ˆSETNXåEXPIREâ€&lt;/strong&gt;ï¼šè¿™ä¸¤ä¸ªå‘½ä»¤çš„éåŸå­æ€§æ“ä½œå¯èƒ½å¯¼è‡´SETNXæˆåŠŸåEXPIREæœªæ‰§è¡Œï¼Œä»è€Œå¼•å‘æ­»é”ã€‚åŠ¡å¿…ä½¿ç”¨Redis 2.6.12ä¹‹åæ”¯æŒçš„ &lt;code&gt;SET key value NX PX milliseconds&lt;/code&gt;åŸå­å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©å¯é çš„Redisç¯å¢ƒ&lt;/strong&gt;ï¼šåœ¨å•èŠ‚ç‚¹Redisä¸Šå®ç°åˆ†å¸ƒå¼é”é€šå¸¸å¯ä»¥æ»¡è¶³å¤šæ•°åœºæ™¯ã€‚è‹¥å¯¹å¯é æ€§è¦æ±‚æé«˜ï¼Œå¯è€ƒè™‘ä½¿ç”¨&lt;strong&gt;Redlockç®—æ³•&lt;/strong&gt;ï¼Œè¯¥ç®—æ³•é€šè¿‡åœ¨å¤šä¸ªç‹¬ç«‹çš„Redisä¸»èŠ‚ç‚¹ä¸Šè·å–é”æ¥æå‡å®¹é”™æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘ä½¿ç”¨æˆç†Ÿå®¢æˆ·ç«¯åº“&lt;/strong&gt;ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç›´æ¥ä½¿ç”¨å¦‚ &lt;strong&gt;Redisson&lt;/strong&gt;ï¼ˆJavaï¼‰æˆ– &lt;strong&gt;Redlock-py&lt;/strong&gt;ï¼ˆPythonï¼‰ç­‰ç»è¿‡å……åˆ†æµ‹è¯•çš„å®¢æˆ·ç«¯åº“ï¼Œå®ƒä»¬å·²ç»å†…ç½®å®ç°äº†ä¸Šè¿°æœºåˆ¶ï¼Œå¯ä»¥é¿å…é‡å¤é€ è½®å­å’Œæ½œåœ¨çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Redisåˆ†å¸ƒå¼é”ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="redis-list"&gt;Redis List
&lt;/h2&gt;&lt;p&gt;Redis List çš„åº•å±‚å®ç°æ˜¯ä¸€ä¸ªæŒç»­æ¼”è¿›çš„è¿‡ç¨‹ï¼Œæ ¸å¿ƒç›®æ ‡å§‹ç»ˆæ˜¯åœ¨å†…å­˜ä½¿ç”¨æ•ˆç‡å’Œæ“ä½œæ€§èƒ½ä¹‹é—´å¯»æ±‚æœ€ä½³å¹³è¡¡ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿäº†è§£å…¶æ¼”è¿›å†ç¨‹å’Œå„ä¸ªå®ç°çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°ç‰ˆæœ¬ä¸æ•°æ®ç»“æ„&lt;/th&gt;
&lt;th&gt;å¼•å…¥ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä¼˜åŠ¿&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç¼ºé™·&lt;/th&gt;
&lt;th&gt;è§¦å‘æ¡ä»¶ / åç»­å‘å±•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—©æœŸç‰ˆæœ¬ï¼šlinkedlistï¼ˆåŒå‘é“¾è¡¨ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis 3.2 å‰&lt;/td&gt;
&lt;td&gt;æ ‡å‡†çš„åŒå‘é“¾è¡¨ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æŒ‡å‘å‰åèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚&lt;/td&gt;
&lt;td&gt;åœ¨åˆ—è¡¨ä¸¤ç«¯çš„æ’å…¥å’Œåˆ é™¤æ“ä½œéå¸¸é«˜æ•ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦ä¿å­˜å‰åæŒ‡é’ˆï¼Œå†…å­˜å¼€é”€è¾ƒå¤§ï¼›èŠ‚ç‚¹åœ¨å†…å­˜ä¸­ä¸è¿ç»­ï¼Œæ— æ³•å……åˆ†åˆ©ç”¨ CPU ç¼“å­˜ã€‚&lt;/td&gt;
&lt;td&gt;å½“åˆ—è¡¨å…ƒç´ è¾ƒå¤šæˆ–å…ƒç´ è¾ƒå¤§æ—¶ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—©æœŸç‰ˆæœ¬ï¼šziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis 3.2 å‰&lt;/td&gt;
&lt;td&gt;ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ‰€æœ‰å…ƒç´ ç´§æŒ¨ç€å­˜å‚¨ï¼Œé‡‡ç”¨å˜é•¿ç¼–ç ä»¥èŠ‚çœå†…å­˜ã€‚&lt;/td&gt;
&lt;td&gt;å†…å­˜å ç”¨å°ï¼Œæ˜¯ä¸€å—è¿ç»­å†…å­˜ï¼Œå¯¹ CPU ç¼“å­˜å‹å¥½ã€‚&lt;/td&gt;
&lt;td&gt;æ’å…¥/åˆ é™¤å…ƒç´ å¯èƒ½å¼•å‘&lt;strong&gt;è¿é”æ›´æ–°&lt;/strong&gt;ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼›æŸ¥è¯¢ä¸­é—´å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚&lt;/td&gt;
&lt;td&gt;å½“åˆ—è¡¨å…ƒç´ æ•°é‡å°‘ï¼ˆé»˜è®¤&amp;lt;512ï¼‰ä¸”æ¯ä¸ªå…ƒç´ å€¼å°ï¼ˆé»˜è®¤&amp;lt;64å­—èŠ‚ï¼‰æ—¶ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»æµå®ç°ï¼šquicklistï¼ˆå¿«é€Ÿåˆ—è¡¨ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis 3.2&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªç”± ziplist ä½œä¸ºèŠ‚ç‚¹çš„åŒå‘é“¾è¡¨ï¼Œå¯é…ç½®æ¯ä¸ª ziplist èŠ‚ç‚¹çš„å¤§å°ã€‚&lt;/td&gt;
&lt;td&gt;ç»“åˆäº† linkedlist å’Œ ziplist çš„ä¼˜ç‚¹ï¼Œåœ¨ä¿è¯ä¸¤ç«¯æ“ä½œé«˜æ€§èƒ½çš„åŒæ—¶ï¼Œå‡å°‘äº†å†…å­˜ç¢ç‰‡å’Œæ€»ä½“å†…å­˜æ¶ˆè€—ã€‚&lt;/td&gt;
&lt;td&gt;ä»éœ€åœ¨å•ä¸ª ziplist èŠ‚ç‚¹å†…è¿›è¡Œå…ƒç´ æŸ¥æ‰¾ï¼›æœ¬è´¨ä¸Šæœªå®Œå…¨è§£å†³ ziplist çš„è¿é”æ›´æ–°é—®é¢˜ï¼Œä½†é€šè¿‡é™åˆ¶æ¯ä¸ª ziplist çš„å¤§å°æ§åˆ¶äº†å½±å“èŒƒå›´ã€‚&lt;/td&gt;
&lt;td&gt;è‡ª Redis 3.2 èµ·æˆä¸º List çš„é»˜è®¤å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœªæ¥æ–¹å‘ï¼šlistpackï¼ˆç´§å‡‘åˆ—è¡¨ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis 5.0ï¼ˆç”¨äº Streamï¼‰7.0ï¼ˆå–ä»£ ziplistï¼‰&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼äº ziplist çš„è¿ç»­å†…å­˜ç»“æ„ï¼Œä½†æ¯ä¸ª entry åªè®°å½•è‡ªèº«çš„é•¿åº¦ï¼Œå½»åº•è§£å†³äº†è¿é”æ›´æ–°é—®é¢˜ã€‚&lt;/td&gt;
&lt;td&gt;å†…å­˜ç´§å‡‘ï¼Œä¸”ä»æ ¹æœ¬ä¸Šé¿å…äº†è¿é”æ›´æ–°é—®é¢˜ï¼Œè®¾è®¡æ›´ç®€å•å¥å£®ã€‚&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;ä» Redis 7.0 å¼€å§‹ï¼Œlistpack å·²å®Œå…¨å–ä»£ ziplistï¼Œç”¨äº Hashã€Sorted Set ç­‰æ•°æ®ç»“æ„çš„åº•å±‚å®ç°ï¼Œä»£è¡¨äº†æœªæ¥æ–¹å‘ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£æ ¸å¿ƒæœºåˆ¶"&gt;âš™ï¸ æ·±å…¥ç†è§£æ ¸å¿ƒæœºåˆ¶
&lt;/h3&gt;&lt;h4 id="-è¿é”æ›´æ–°é—®é¢˜"&gt;ğŸ”„ è¿é”æ›´æ–°é—®é¢˜
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ç†è§£ ziplist ç¼ºé™·å’Œ listpack ä¼˜åŠ¿çš„å…³é”®ã€‚åœ¨ ziplist ä¸­ï¼Œæ¯ä¸ª entry éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;prevlen&lt;/code&gt;å­—æ®µè®°å½•å‰ä¸€ä¸ª entry çš„é•¿åº¦ã€‚è¿™ä¸ªå­—æ®µæœ¬èº«æ˜¯å˜é•¿çš„ï¼ˆå‰ä¸€ä¸ª entry é•¿åº¦ &amp;lt;254 å­—èŠ‚æ—¶ç”¨ 1 å­—èŠ‚ï¼Œå¦åˆ™ç”¨ 5 å­—èŠ‚ï¼‰ã€‚å‡è®¾ä¸€ä¸ª ziplist ä¸­æœ‰å¤šä¸ªé•¿åº¦åœ¨ 250~253 å­—èŠ‚çš„è¿ç»­ entryï¼Œæ­¤æ—¶åœ¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªé•¿åº¦ â‰¥254 å­—èŠ‚çš„æ–° entryï¼Œä¼šå¯¼è‡´å…¶åçš„ç¬¬ä¸€ä¸ª entry çš„ &lt;code&gt;prevlen&lt;/code&gt;ä» 1 å­—èŠ‚æ‰©å±•ä¸º 5 å­—èŠ‚ï¼Œä»è€Œä½¿è¿™ä¸ª entry çš„æ€»é•¿åº¦ä¹Ÿè¶…è¿‡ 254 å­—èŠ‚ã€‚è¿™ç§æ•ˆåº”ä¼šè¿é”æ€§åœ°å‘åä¼ é€’ï¼Œå¯¼è‡´å¤§é‡ entry éœ€è¦é‡æ–°åˆ†é…ç©ºé—´ï¼Œæ€§èƒ½éª¤é™ã€‚è€Œ listpack çš„æ¯ä¸ª entry åªè®°å½•è‡ªèº«é•¿åº¦ï¼Œä¿®æ”¹æ“ä½œåªä¼šå½±å“å½“å‰ entryï¼Œä»è€Œå½»åº•è§£å†³äº†æ­¤é—®é¢˜ã€‚&lt;/p&gt;
&lt;h4 id="-quicklist-çš„é…ç½®ä¼˜åŒ–"&gt;ğŸ§  Quicklist çš„é…ç½®ä¼˜åŒ–
&lt;/h4&gt;&lt;p&gt;Quicklist çš„æ€§èƒ½å¯ä»¥é€šè¿‡ Redis é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°è¿›è¡Œä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;list-max-ziplist-size&lt;/code&gt;ï¼šæ§åˆ¶æ¯ä¸ª quicklist èŠ‚ç‚¹ï¼ˆziplistï¼‰çš„å¤§å°ã€‚å½“å–å€¼ä¸ºè´Ÿæ•°æ—¶ï¼Œæœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä¾‹å¦‚é»˜è®¤å€¼ &lt;code&gt;-2&lt;/code&gt;è¡¨ç¤ºæ¯ä¸ª ziplist èŠ‚ç‚¹çš„å¤§å°ä¸è¶…è¿‡ 8 KBã€‚è¿™æœ‰åŠ©äºåœ¨å†…å­˜æ•ˆç‡å’Œæ“ä½œæ€§èƒ½é—´å–å¾—å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list-compress-depth&lt;/code&gt;ï¼šæ§åˆ¶ quicklist èŠ‚ç‚¹çš„å‹ç¼©æ·±åº¦ï¼Œä¾‹å¦‚é…ç½®ä¸º &lt;code&gt;1&lt;/code&gt;è¡¨ç¤ºä¸å‹ç¼©é“¾è¡¨å¤´å°¾çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œä¿è¯ä¸¤ç«¯æ“ä½œçš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Redis List çš„åº•å±‚å®ç°æ¼”è¿›ï¼Œä» linkedlist å’Œ ziplist çš„ç®€å•åˆ‡æ¢ï¼Œåˆ° quicklist çš„æŠ˜ä¸­èåˆï¼Œå†åˆ° listpack çš„æ ¹æœ¬æ€§é©æ–°ï¼Œä½“ç°äº† Redis ä½œè€…å¯¹æ€§èƒ½ä¸å†…å­˜æ•ˆç‡çš„æè‡´è¿½æ±‚ã€‚äº†è§£è¿™äº›åº•å±‚æœºåˆ¶ï¼Œæœ‰åŠ©äºä½ åœ¨å®é™…å¼€å‘ä¸­æ›´å¥½åœ°ä½¿ç”¨å’Œè°ƒä¼˜ Redisã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»ç†è§£ Redis List çš„åº•å±‚å®ç°ã€‚å¦‚æœä½ å¯¹æŸä¸ªç»†èŠ‚ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="list-æœ‰åº"&gt;List &amp;ldquo;æœ‰åº&amp;rdquo;
&lt;/h2&gt;&lt;p&gt;Redis List ç±»å‹èƒ½ä¿æŒæ•°æ®æœ‰åºï¼Œæ ¸å¿ƒåœ¨äºå…¶&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„åœ¨è®¾è®¡ä¸Šå°±å¤©ç„¶åœ°ç»´æŠ¤äº†å…ƒç´ çš„æ’å…¥é¡ºåº&lt;/strong&gt;ã€‚è¿™ç§æœ‰åºæ€§ä¸æ˜¯é€šè¿‡æ’åºç®—æ³•å®ç°çš„ï¼Œè€Œæ˜¯ç”±æ•°æ®åœ¨ç»“æ„ä¸­çš„ç‰©ç†å­˜å‚¨é¡ºåºå†³å®šçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸åŒåº•å±‚æ•°æ®ç»“æ„æ˜¯å¦‚ä½•å®ç°æœ‰åºçš„ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åº•å±‚æ•°æ®ç»“æ„&lt;/th&gt;
&lt;th&gt;Redis ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœ‰åºæ€§æœºåˆ¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒå‘é“¾è¡¨ (&lt;code&gt;linkedlist&lt;/code&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;3.2 ä¹‹å‰&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªèŠ‚ç‚¹åŒ…å«æŒ‡å‘å‰é©± (&lt;code&gt;prev&lt;/code&gt;) å’Œåç»§ (&lt;code&gt;next&lt;/code&gt;) çš„æŒ‡é’ˆï¼Œè¿™äº›æŒ‡é’ˆæ˜ç¡®è§„å®šäº†èŠ‚ç‚¹é—´çš„é€»è¾‘é¡ºåºï¼Œæ–°å…ƒç´ é€šè¿‡è°ƒæ•´æŒ‡é’ˆæ’å…¥åˆ°æŒ‡å®šä½ç½® ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‹ç¼©åˆ—è¡¨ (&lt;code&gt;ziplist&lt;/code&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;3.2 ä¹‹å‰&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰å…ƒç´ ï¼ˆentryï¼‰ç´§å‡‘åœ°å­˜å‚¨åœ¨ä¸€å—è¿ç»­å†…å­˜ä¸­ï¼Œå…ƒç´ æŒ‰æ’å…¥çš„å…ˆåé¡ºåºç‰©ç†æ’åˆ— ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¿«é€Ÿåˆ—è¡¨ (&lt;code&gt;quicklist&lt;/code&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;3.2 åŠä»¥åï¼ˆå½“å‰é»˜è®¤ï¼‰&lt;/td&gt;
&lt;td&gt;ä½œä¸ºåŒå‘é“¾è¡¨å’Œå‹ç¼©åˆ—è¡¨çš„ç»“åˆä½“ï¼Œå…¶æœ‰åºæ€§ä½“ç°åœ¨ï¼š1ï¼‰å®è§‚ä¸Šï¼Œ&lt;code&gt;quicklistNode&lt;/code&gt;èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆå½¢æˆåŒå‘é“¾è¡¨ï¼Œä¿æŒé¡ºåºï¼›2ï¼‰å¾®è§‚ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹å†…çš„ &lt;code&gt;ziplist&lt;/code&gt;ç»´æŠ¤ç€å…¶å†…éƒ¨å…ƒç´ çš„æ’å…¥é¡ºåº ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£æœ‰åºæ€§çš„å®ç°"&gt;ğŸ” æ·±å…¥ç†è§£æœ‰åºæ€§çš„å®ç°
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;â€œæœ‰åºâ€çš„å«ä¹‰æ˜¯â€œæ’å…¥é¡ºåºâ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Redis List çš„æœ‰åºæ€§ç‰¹æŒ‡å…ƒç´ æŒ‰ç…§è¢«æ’å…¥çš„å…ˆåé¡ºåºè¿›è¡Œæ’åˆ—ï¼Œå³&lt;strong&gt;æ’å…¥é¡ºåºï¼ˆInsertion Orderï¼‰&lt;/strong&gt;ã€‚æœ€æ—©æ’å…¥çš„å…ƒç´ åœ¨å¤´éƒ¨ï¼Œæœ€åæ’å…¥çš„å…ƒç´ åœ¨å°¾éƒ¨ã€‚è¿™ä¸æŒ‰å€¼å¤§å°æ’åºï¼ˆå¦‚ Sorted Setï¼‰æ˜¯æˆªç„¶ä¸åŒçš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»åŒå‘é“¾è¡¨åˆ°å¿«é€Ÿåˆ—è¡¨çš„æ¼”è¿›&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒå‘é“¾è¡¨ (&lt;code&gt;linkedlist&lt;/code&gt;)&lt;/strong&gt;ï¼šåœ¨ Redis 3.2 ç‰ˆæœ¬ä¹‹å‰ï¼Œå½“åˆ—è¡¨å…ƒç´ è¾ƒå¤šæˆ–è¾ƒå¤§æ—¶ï¼Œä¼šä½¿ç”¨åŒå‘é“¾è¡¨ã€‚å…¶ç»“æ„å°±åƒä¸€æ ¹é“¾æ¡ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰éƒ½é€šè¿‡ &lt;code&gt;prev&lt;/code&gt;å’Œ &lt;code&gt;next&lt;/code&gt;æŒ‡é’ˆæ˜ç¡®æŒ‡å‘å®ƒçš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œåœ¨é€»è¾‘ä¸Šå½¢æˆä¸€æ¡ä¸¥æ ¼æœ‰åºçš„é“¾ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‹ç¼©åˆ—è¡¨ (&lt;code&gt;ziplist&lt;/code&gt;)&lt;/strong&gt;ï¼šåœ¨å…ƒç´ è¾ƒå°‘ä¸”è¾ƒå°æ—¶ï¼ŒRedis ä¼šä½¿ç”¨å‹ç¼©åˆ—è¡¨æ¥èŠ‚çœå†…å­˜ã€‚å®ƒæŠŠæ‰€æœ‰å…ƒç´ ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç´§å¯†æ’åˆ—åœ¨ä¸€å—è¿ç»­çš„å†…å­˜å—é‡Œã€‚éå†æ—¶ä»å¤´éƒ¨å¼€å§‹ï¼Œè‡ªç„¶å°±æŒ‰ç…§æ’å…¥é¡ºåºè®¿é—®æ¯ä¸ªå…ƒç´  ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿«é€Ÿåˆ—è¡¨ (&lt;code&gt;quicklist&lt;/code&gt;)&lt;/strong&gt;ï¼šè¿™æ˜¯ Redis 3.2 ä¹‹å List çš„é»˜è®¤å’Œå½“å‰å®ç°ï¼Œå¯ä»¥ç†è§£ä¸ºâ€œç”±å‹ç¼©åˆ—è¡¨æ®µæ„æˆçš„åŒå‘é“¾è¡¨â€ã€‚å®ƒå·§å¦™åœ°å¹³è¡¡äº†å†…å­˜æ•ˆç‡å’Œæ“ä½œæ€§èƒ½ã€‚åœ¨å®è§‚ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¿è¯äº†èŠ‚ç‚¹çš„é¡ºåºï¼›åœ¨æ¯ä¸ªèŠ‚ç‚¹å†…éƒ¨ï¼Œå®ƒåˆä½¿ç”¨ä¸€å—å°çš„å‹ç¼©åˆ—è¡¨æ¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œç»´æŠ¤äº†å…ƒç´ åœ¨å±€éƒ¨èŒƒå›´å†…çš„æ’å…¥é¡ºåºã€‚è¿™æ ·ï¼Œæ— è®ºæ˜¯ä»æ•´ä½“è¿˜æ˜¯å±€éƒ¨çœ‹ï¼Œé¡ºåºéƒ½å¾—åˆ°äº†ä¿æŒ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸ä¸€ç‚¹æé†’"&gt;ğŸ’ æ€»ç»“ä¸ä¸€ç‚¹æé†’
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒRedis List çš„æœ‰åºæ€§æ˜¯å…¶åº•å±‚æ•°æ®ç»“æ„ï¼ˆæ— è®ºæ˜¯æ—©æœŸçš„åŒå‘é“¾è¡¨/å‹ç¼©åˆ—è¡¨ï¼Œè¿˜æ˜¯ç°ä»£çš„å¿«é€Ÿåˆ—è¡¨ï¼‰å†…åœ¨çš„ã€ä¸ç”Ÿä¿±æ¥çš„ç‰¹æ€§ï¼Œé€šè¿‡ç‰©ç†å­˜å‚¨ä½ç½®æˆ–é€»è¾‘æŒ‡é’ˆé“¾æ¥æ¥ä¿è¯å…ƒç´ ä¸¥æ ¼æŒ‰ç…§æ’å…¥çš„å…ˆåé¡ºåºæ’åˆ— ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§åŸºäºæ’å…¥é¡ºåºçš„æœ‰åºæ€§ï¼Œä½¿å¾— List åœ¨éœ€è¦&lt;strong&gt;ä¿æŒè‡ªç„¶æ—¶åº&lt;/strong&gt;çš„åœºæ™¯ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€æ—¶é—´çº¿ã€æ“ä½œæ—¥å¿—ï¼‰ä¸­è¡¨ç°å‡ºè‰² ã€‚ä½†å¦‚æœä½ éœ€è¦æ ¹æ®å…ƒç´ çš„æŸä¸ªå±æ€§æˆ–åˆ†æ•°è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆåº”è¯¥é€‰æ‹© &lt;strong&gt;Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£ Redis List æœ‰åºæ€§çš„åŸç†ã€‚å¦‚æœå¯¹æŸä¸ªç»†èŠ‚è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="lua-è„šæœ¬"&gt;Lua è„šæœ¬
&lt;/h2&gt;&lt;p&gt;Redis Lua è„šæœ¬çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå®ƒèƒ½å°†å¤šä¸ªæ“ä½œæ‰“åŒ…æˆä¸€ä¸ª&lt;strong&gt;åŸå­å•å…ƒ&lt;/strong&gt;æ‰§è¡Œï¼ŒåŒæ—¶å‡å°‘ç½‘ç»œå¼€é”€ï¼Œå¹¶å…è®¸åœ¨æœåŠ¡å™¨ç«¯å®ç°å¤æ‚é€»è¾‘ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒçš„ä¸»è¦ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä¼˜åŠ¿ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;å¸¦æ¥çš„ä»·å€¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âš¡ åŸå­æ€§ (Atomicity)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´ä¼šç‹¬å æ•´ä¸ª Redis æœåŠ¡å™¨ï¼ˆå•çº¿ç¨‹æ¨¡å‹ï¼‰ï¼Œå…¶é—´çš„æ‰€æœ‰å‘½ä»¤ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œ&lt;strong&gt;ä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘½ä»¤æ‰“æ–­&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;å½»åº•é¿å…ç«æ€æ¡ä»¶ï¼Œæ— éœ€ä½¿ç”¨ç¹ççš„ &lt;code&gt;WATCH/MULTI/EXEC&lt;/code&gt;äº‹åŠ¡ç›‘å¬ï¼Œå³å¯å®‰å…¨å®ç°å¦‚&lt;strong&gt;åˆ†å¸ƒå¼é”ã€åº“å­˜æ‰£å‡ã€åŸå­è½¬è´¦&lt;/strong&gt;ç­‰éœ€è¦å¼ºä¸€è‡´æ€§çš„æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸš€ é«˜æ€§èƒ½ (Performance)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å¤šä¸ªå‘½ä»¤ç»„åˆæˆä¸€ä¸ªè„šæœ¬ä¸€æ¬¡æ€§å‘é€åˆ°æœåŠ¡å™¨æ‰§è¡Œï¼Œæå¤§å‡å°‘äº†&lt;strong&gt;ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼ˆRTTï¼‰&lt;/strong&gt;ã€‚å¯¹äºå¤æ‚æ“ä½œï¼Œå®æµ‹å¯å‡å°‘é«˜è¾¾ &lt;strong&gt;80%&lt;/strong&gt; çš„ç½‘ç»œå»¶è¿Ÿã€‚&lt;/td&gt;
&lt;td&gt;æ˜¾è‘—é™ä½æ“ä½œå»¶è¿Ÿï¼Œæå‡ååé‡ï¼Œå°¤å…¶åœ¨é«˜å»¶è¿Ÿç½‘ç»œç¯å¢ƒæˆ–é«˜é¢‘è°ƒç”¨åœºæ™¯ä¸‹æ•ˆæœæä¸ºæ˜æ˜¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¯ çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ (Flexibility)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥åœ¨è„šæœ¬ä¸­ç¼–å†™&lt;strong&gt;æ¡ä»¶åˆ¤æ–­ï¼ˆif-then-elseï¼‰ã€å¾ªç¯ï¼ˆfor/whileï¼‰&lt;/strong&gt; ç­‰å¤æ‚é€»è¾‘ï¼Œå®ç° Redis åŸç”Ÿå‘½ä»¤æ— æ³•ç›´æ¥å®Œæˆçš„ä¸šåŠ¡è§„åˆ™ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ Redis ä»ä¸€ä¸ªç®€å•çš„é”®å€¼å­˜å‚¨å‡çº§ä¸º&lt;strong&gt;å¯ç¼–ç¨‹çš„æ•°æ®å¹³å°&lt;/strong&gt;ï¼Œèƒ½å¤Ÿå®ç°&lt;strong&gt;é™æµå™¨ã€æ’è¡Œæ¦œæ›´æ–°ã€å¤æ‚è®¡ç®—&lt;/strong&gt;ç­‰è‡ªå®šä¹‰åŠŸèƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“š ä»£ç å¤ç”¨ä¸ç®€åŒ– (Reusability)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è„šæœ¬å¯ä»¥é€šè¿‡ &lt;code&gt;SCRIPT LOAD&lt;/code&gt;é¢„åŠ è½½åˆ°æœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡ &lt;code&gt;EVALSHA&lt;/code&gt;å‘½ä»¤ä½¿ç”¨å…¶ SHA1 å“ˆå¸Œå€¼æ¥æ‰§è¡Œï¼Œé¿å…é‡å¤ä¼ è¾“è„šæœ¬å†…å®¹ã€‚&lt;/td&gt;
&lt;td&gt;å®ç°äº†â€œä¸€æ¬¡åŠ è½½ï¼Œå¤šæ¬¡æ‰§è¡Œâ€ï¼ŒèŠ‚çœç½‘ç»œå¸¦å®½ã€‚åŒæ—¶ï¼Œå°†å¤æ‚æ“ä½œå°è£…æˆè„šæœ¬ï¼Œæé«˜äº†ä»£ç çš„&lt;strong&gt;å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¼˜åŠ¿èƒŒåçš„å·¥ä½œåŸç†ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ ä¼˜åŠ¿èƒŒåçš„å·¥ä½œåŸç†ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;è¦å……åˆ†å‘æŒ¥ä¸Šè¿°ä¼˜åŠ¿ï¼Œç†è§£å…¶å·¥ä½œåŸç†å’Œæ³¨æ„äº‹é¡¹è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ€§çš„å®ç°&lt;/strong&gt;ï¼šRedis æ˜¯å•çº¿ç¨‹äº‹ä»¶å¾ªç¯æ¨¡å‹ã€‚å½“æ‰§è¡Œ &lt;code&gt;EVAL&lt;/code&gt;æˆ– &lt;code&gt;EVALSHA&lt;/code&gt;å‘½ä»¤æ—¶ï¼ŒRedis ä¼šå°†æ•´ä¸ª Lua è„šæœ¬ä½œä¸ºä¸€ä¸ªä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œå¹¶ç”±ä¸»çº¿ç¨‹é¡ºåºæ‰§è¡Œã€‚åœ¨æ­¤æœŸé—´ï¼ŒæœåŠ¡å™¨ä¸ä¼šå¤„ç†ä»»ä½•å…¶ä»–å‘½ä»¤ï¼Œç›´åˆ°è„šæœ¬æ‰§è¡Œå®Œæ¯•å¹¶è¿”å›ç»“æœã€‚è¿™ä»æ ¹æœ¬ä¸Šä¿è¯äº†åŸå­æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–çš„å…³é”®&lt;/strong&gt;ï¼šé™¤äº†å‡å°‘ç½‘ç»œå¾€è¿”ï¼Œä½¿ç”¨ &lt;code&gt;EVALSHA&lt;/code&gt;æ˜¯æå‡æ€§èƒ½çš„å…³é”®å®è·µã€‚å®ƒé€šè¿‡è„šæœ¬çš„ SHA1 æ‘˜è¦å€¼æ¥æ‰§è¡Œå·²ç¼“å­˜çš„è„šæœ¬ï¼Œé¿å…äº†æ¯æ¬¡æ‰§è¡Œéƒ½ä¼ è¾“å¤§é‡è„šæœ¬å†…å®¹å¸¦æ¥çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹"&gt;âš ï¸ ä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å°½ç®¡ Lua è„šæœ¬éå¸¸å¼ºå¤§ï¼Œä½†ä½¿ç”¨æ—¶ä¹Ÿéœ€è°¨æ…ï¼Œä»¥é¿å…æ½œåœ¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é˜»å¡&lt;/strong&gt;ï¼šç”±äº Redis æ˜¯å•çº¿ç¨‹ï¼Œ&lt;strong&gt;é•¿æ—¶é—´è¿è¡Œçš„ Lua è„šæœ¬ä¼šé˜»å¡æ•´ä¸ªæœåŠ¡å™¨&lt;/strong&gt;ï¼Œå¯¼è‡´å…¶ä»–è¯·æ±‚è¶…æ—¶ã€‚åŠ¡å¿…ç¡®ä¿è„šæœ¬é€»è¾‘é«˜æ•ˆï¼Œé¿å…è€—æ—¶çš„å¾ªç¯æˆ–å¤§è§„æ¨¡æ•°æ®å¤„ç†ã€‚Redis æä¾›äº† &lt;code&gt;lua-time-limit&lt;/code&gt;é…ç½®ï¼ˆé»˜è®¤ 5 ç§’ï¼‰æ¥é˜²æ­¢è„šæœ¬æ— é™æ‰§è¡Œï¼Œå¿…è¦æ—¶å¯ä½¿ç”¨ &lt;code&gt;SCRIPT KILL&lt;/code&gt;å‘½ä»¤ç»ˆæ­¢è„šæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒè¯•å¤æ‚æ€§&lt;/strong&gt;ï¼šLua è„šæœ¬åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œè°ƒè¯•ä¸å¦‚å®¢æˆ·ç«¯æ–¹ä¾¿ã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;redis.log&lt;/code&gt;å‡½æ•°è¾“å‡ºæ—¥å¿—åˆ° Redis æ—¥å¿—æ–‡ä»¶æ¥è¾…åŠ©è°ƒè¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤ç¯å¢ƒé™åˆ¶&lt;/strong&gt;ï¼šåœ¨ Redis Cluster æ¨¡å¼ä¸‹ï¼Œ&lt;strong&gt;è„šæœ¬ä¸­æ“ä½œçš„æ‰€æœ‰ Key å¿…é¡»ä½äºåŒä¸€ä¸ªå“ˆå¸Œæ§½ï¼ˆhash slotï¼‰ä¸­&lt;/strong&gt;ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨ &lt;strong&gt;hash tag&lt;/strong&gt;ï¼ˆä¾‹å¦‚å°† &lt;code&gt;user123{profile}&lt;/code&gt;å’Œ &lt;code&gt;user123{order}&lt;/code&gt;ä¸­çš„ &lt;code&gt;{user123}&lt;/code&gt;ä½œä¸º tagï¼‰æ¥ç¡®ä¿å¤šä¸ª key è¢«è·¯ç”±åˆ°åŒä¸€èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒRedis Lua è„šæœ¬é€šè¿‡å…¶&lt;strong&gt;åŸå­æ€§ã€é«˜æ€§èƒ½ã€çµæ´»æ€§å’Œå¯å¤ç”¨æ€§&lt;/strong&gt;ï¼Œæˆä¸ºå¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘å’Œæå‡ç³»ç»Ÿæ€§èƒ½çš„åˆ©å™¨ã€‚åœ¨éœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€é™ä½ç½‘ç»œå¼€é”€æˆ–å®ç°å¤æ‚è®¡ç®—çš„åœºæ™¯ï¼ˆå¦‚ç§’æ€ã€åˆ†å¸ƒå¼é”ã€å®æ—¶ç»Ÿè®¡ç­‰ï¼‰ä¸­ï¼Œå®ƒéƒ½æ˜¯é¦–é€‰çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;åªéœ€è®°ä½ä¸€ç‚¹ï¼š&lt;strong&gt;ä¿æŒè„šæœ¬è½»é‡é«˜æ•ˆï¼Œé¿å…é˜»å¡ Redis ä¸»çº¿ç¨‹&lt;/strong&gt;ï¼Œä½ å°±èƒ½å……åˆ†åˆ©ç”¨ Lua è„šæœ¬çš„å¼ºå¤§èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£ Redis Lua è„šæœ¬çš„ä¼˜åŠ¿ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“åº”ç”¨åœºæ™¯æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="mset"&gt;MSET
&lt;/h2&gt;&lt;p&gt;åœ¨ Redis é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œ&lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤è¦æ±‚æ‰€æœ‰é”®ä½äºåŒä¸€ä¸ªå“ˆå¸Œæ§½ï¼Œè¿™æ˜¯ç”±é›†ç¾¤çš„&lt;strong&gt;åˆ†å¸ƒå¼æ¶æ„&lt;/strong&gt;å’Œ&lt;strong&gt;åŸå­æ€§ä¿è¯&lt;/strong&gt;éœ€æ±‚å…±åŒå†³å®šçš„ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒåŸå› å’Œä¸»æµè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒåŸå› &lt;/th&gt;
&lt;th&gt;è§£å†³æ–¹æ¡ˆæ¦‚è§ˆ&lt;/th&gt;
&lt;th&gt;å…³é”®è¦ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®åˆ†ç‰‡&lt;/strong&gt;ï¼šé›†ç¾¤å°†æ•°æ®åˆ†æ•£åˆ°16384ä¸ªæ§½ï¼Œç”±ä¸åŒèŠ‚ç‚¹ç®¡ç†ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1. å“ˆå¸Œæ ‡ç­¾ (Hash Tag)&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;{}&lt;/code&gt;å¼ºåˆ¶å°†å¤šä¸ªé”®æ˜ å°„åˆ°åŒä¸€æ§½ã€‚ä¾‹å¦‚ï¼š&lt;code&gt;MSET user:{123}:name Alice user:{123}:age 30&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§é™åˆ¶&lt;/strong&gt;ï¼šRedis å•çº¿ç¨‹ä¿è¯å•å‘½ä»¤åŸå­æ€§ï¼Œä½†é›†ç¾¤æ— æ³•è·¨èŠ‚ç‚¹ä¿è¯å¤šé”®æ“ä½œçš„åŸå­æ€§ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;2. æ‹†åˆ†å•é”®æ“ä½œ&lt;/strong&gt;ï¼šå°† &lt;code&gt;MSET key1 val1 key2 val2&lt;/code&gt;æ‹†åˆ†ä¸ºä¸¤ä¸ª &lt;code&gt;SET&lt;/code&gt;å‘½ä»¤ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½ä»¤è·¯ç”±&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å°†å‘½ä»¤å‘å¾€æŸä¸ªèŠ‚ç‚¹ï¼Œè‹¥é”®ä¸å±äºè¯¥èŠ‚ç‚¹ï¼Œéœ€è¦é‡å®šå‘ã€‚è·¨æ§½é”®å¯èƒ½å¯¼è‡´å¤šæ¬¡é‡å®šå‘æˆ–æ— æ³•ç¡®å®šç›®æ ‡èŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;3. å®¢æˆ·ç«¯åˆ†ç»„/å¹¶è¡Œ&lt;/strong&gt;ï¼šæ™ºèƒ½å®¢æˆ·ç«¯å¯è®¡ç®—å„é”®çš„æ§½ï¼Œåˆ†ç»„åå¹¶è¡Œå‘é€ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ä¸æ•ˆç‡&lt;/strong&gt;ï¼šè·¨èŠ‚ç‚¹æ“ä½œéœ€è¦å¤šæ¬¡ç½‘ç»œé€šä¿¡ï¼Œæ€§èƒ½è¾ƒä½ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;4. Lua è„šæœ¬&lt;/strong&gt;ï¼šè„šæœ¬åœ¨é›†ç¾¤ä¸­åŸå­æ‰§è¡Œï¼Œä¸”æ‰€æœ‰æ“ä½œä¼šå‘å¾€åŒä¸€ä¸ªèŠ‚ç‚¹ï¼ˆç”±è„šæœ¬ç¬¬ä¸€ä¸ªé”®å†³å®šï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£åŒä¸€ä¸ªå“ˆå¸Œæ§½è¦æ±‚"&gt;ğŸ” æ·±å…¥ç†è§£â€œåŒä¸€ä¸ªå“ˆå¸Œæ§½â€è¦æ±‚
&lt;/h3&gt;&lt;p&gt;Redis é›†ç¾¤é‡‡ç”¨ &lt;strong&gt;å“ˆå¸Œæ§½åˆ†ç‰‡æœºåˆ¶&lt;/strong&gt; å°†æ•°æ®åˆ†å¸ƒåˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚æ•´ä¸ªé›†ç¾¤æœ‰ 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªé”®é€šè¿‡ &lt;code&gt;CRC16(key) mod 16384&lt;/code&gt;è®¡ç®—å¾—å‡ºå®ƒå±äºå“ªä¸ªæ§½ã€‚é›†ç¾¤ä¸­çš„æ¯ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£ç®¡ç†ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½ã€‚å½“ä½ æ‰§è¡Œä¸€ä¸ªæ¶‰åŠå¤šä¸ªé”®çš„å‘½ä»¤æ—¶ï¼ŒRedis é›†ç¾¤éœ€è¦èƒ½å¤Ÿåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå®Œæˆæ‰€æœ‰æ“ä½œã€‚å¦‚æœè¿™äº›é”®æ•£è½åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œé›†ç¾¤å°±æ— æ³•ä¿è¯è¯¥å‘½ä»¤çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼ˆå³æ‰€æœ‰é”®çš„è®¾ç½®è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼‰ï¼Œå› ä¸ºé›†ç¾¤ä¸æ”¯æŒè·¨èŠ‚ç‚¹çš„åˆ†å¸ƒå¼äº‹åŠ¡ã€‚&lt;/p&gt;
&lt;h3 id="-è§£å†³crosssloté”™è¯¯çš„å®ç”¨æ–¹æ¡ˆ"&gt;ğŸ’¡ è§£å†³â€œCROSSSLOTâ€é”™è¯¯çš„å®ç”¨æ–¹æ¡ˆ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨å“ˆå¸Œæ ‡ç­¾ï¼ˆé¦–é€‰æ–¹æ¡ˆï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€ä¼˜é›…å’Œé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ç”¨ &lt;code&gt;{}&lt;/code&gt;åŒ…è£¹é”®çš„ä¸€éƒ¨åˆ†ï¼ŒRedis åœ¨è®¡ç®—å“ˆå¸Œæ§½æ—¶åªä¼šå¯¹ &lt;code&gt;{}&lt;/code&gt;å†…çš„å†…å®¹è¿›è¡Œè®¡ç®—ã€‚ä¾‹å¦‚ï¼Œå‘½ä»¤ &lt;code&gt;MSET {user:100}:name &amp;quot;Alice&amp;quot; {user:100}:age 30&lt;/code&gt;ä¸­çš„ä¸¤ä¸ªé”®ï¼Œå› ä¸º &lt;code&gt;{}&lt;/code&gt;å†…çš„å†…å®¹éƒ½æ˜¯ &lt;code&gt;user:100&lt;/code&gt;ï¼Œæ‰€ä»¥å®ƒä»¬ä¼šè¢«åˆ†é…åˆ°åŒä¸€ä¸ªå“ˆå¸Œæ§½ï¼Œå‘½ä»¤å¯ä»¥æˆåŠŸæ‰§è¡Œã€‚è¿™åœ¨éœ€è¦å°†ä¸€ç»„ç›¸å…³çš„é”®ï¼ˆå¦‚å±äºåŒä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ï¼‰ä¿æŒåœ¨ä¸€èµ·æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‹†åˆ†æ“ä½œä¸ºå•ä¸ª SET å‘½ä»¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœé”®ä¹‹é—´æ²¡æœ‰å¼ºå…³è”æ€§ï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯å°† &lt;code&gt;MSET&lt;/code&gt;æ‹†åˆ†æˆå¤šä¸ª &lt;code&gt;SET&lt;/code&gt;å‘½ä»¤ã€‚ç¼ºç‚¹æ˜¯è¿™ä¼šå¢åŠ ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼Œæ€§èƒ½ä¸Šä¼šæœ‰æŸè€—ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦è®¾ç½®å¤§é‡é”®å€¼æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨æ™ºèƒ½å®¢æˆ·ç«¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€äº›é«˜çº§çš„ Redis å®¢æˆ·ç«¯ï¼ˆå¦‚ Lettuce æˆ–æ”¯æŒé›†ç¾¤æ¨¡å¼çš„ Jedisï¼‰å¯ä»¥åœ¨å†…éƒ¨å®ç°æ›´å¤æ‚çš„é€»è¾‘ã€‚å®ƒä»¬å¯ä»¥å…ˆè®¡ç®—æ¯ä¸ªé”®æ‰€å±çš„æ§½ï¼Œç„¶åå°†å±äºåŒä¸€èŠ‚ç‚¹çš„é”®åˆ†ç»„ï¼Œæœ€åå¹¶è¡Œåœ°å‘ä¸åŒèŠ‚ç‚¹å‘é€åˆ†ç»„åçš„æ‰¹é‡æ“ä½œã€‚è¿™éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ›´å¤šå¤„ç†ï¼Œä½†èƒ½è¾ƒå¥½åœ°å¹³è¡¡åŠŸèƒ½ä¸æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡ Lua è„šæœ¬å®ç°åŸå­æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ Redis é›†ç¾¤ä¸­ï¼ŒLua è„šæœ¬åœ¨æ‰§è¡Œæ—¶ï¼Œå…¶å†…éƒ¨æ“ä½œçš„æ‰€æœ‰é”®å¿…é¡»ä½äºåŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè¿™é€šè¿‡æ£€æŸ¥è„šæœ¬ä¸­ç¬¬ä¸€ä¸ªé”®çš„æ§½ä½æ¥ç¡®å®šã€‚ä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªè„šæœ¬æ‰§è¡Œå¤šä¸ª &lt;code&gt;SET&lt;/code&gt;æ“ä½œã€‚è™½ç„¶è„šæœ¬ä¸­çš„å¤šä¸ª &lt;code&gt;SET&lt;/code&gt;åœ¨æŠ€æœ¯ä¸Šä¸æ˜¯å•å‘½ä»¤åŸå­æ€§ï¼Œä½† Lua è„šæœ¬æœ¬èº«åœ¨æ‰§è¡Œæ—¶æ˜¯åŸå­æ€§çš„ï¼Œä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ–­ï¼Œä»è€Œä¹Ÿèƒ½è¾¾åˆ°ç±»ä¼¼åŸå­çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤åœ¨ Redis é›†ç¾¤ä¸­è¦æ±‚æ‰€æœ‰é”®ä½äºåŒä¸€å“ˆå¸Œæ§½ï¼Œæ˜¯é›†ç¾¤&lt;strong&gt;åˆ†å¸ƒå¼æ¶æ„&lt;/strong&gt;ä¸‹çš„å¿…ç„¶é™åˆ¶ï¼Œæ—¨åœ¨&lt;strong&gt;ä¿è¯å‘½ä»¤çš„åŸå­æ€§å’Œç®€åŒ–è·¯ç”±é€»è¾‘&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§„åˆ’é”®å&lt;/strong&gt;ï¼šåœ¨ç³»ç»Ÿè®¾è®¡åˆæœŸï¼Œå°±è€ƒè™‘ä½¿ç”¨&lt;strong&gt;å“ˆå¸Œæ ‡ç­¾&lt;/strong&gt;å°†æœ‰å¼ºå…³è”å…³ç³»çš„é”®ç»‘å®šåˆ°åŒä¸€æ§½ä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢æ§½ä½&lt;/strong&gt;ï¼šä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;CLUSTER KEYSLOT keyname&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹é”®å¯¹åº”çš„å“ˆå¸Œæ§½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒè¡¡é€‰æ‹©&lt;/strong&gt;ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼ˆæ˜¯å¦éœ€è¦åŸå­æ€§ã€æ€§èƒ½è¦æ±‚ç­‰ï¼‰é€‰æ‹©æœ€åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œæ–¹æ¡ˆèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Redis é›†ç¾¤ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨å“ªç§æ–¹æ¡ˆæ›´é€‚åˆä½ ã€‚&lt;/p&gt;
&lt;h2 id="mset-1"&gt;MSET
&lt;/h2&gt;&lt;p&gt;Redis çš„ &lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤æ˜¯ä¸€ä¸ªç”¨äºæå‡æ•°æ®æ“ä½œæ•ˆç‡çš„å¼ºå¤§å·¥å…·ï¼Œå®ƒå…è®¸æ‚¨åœ¨ä¸€æ¬¡æ“ä½œä¸­è®¾ç½®å¤šä¸ªé”®å€¼å¯¹ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç‰¹æ€§å’Œè¦ç‚¹ï¼Œæ–¹ä¾¿æ‚¨å¿«é€Ÿäº†è§£ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½ä»¤è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;MSET key1 value1 [key2 value2 ...]&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯ã€‚æ‰€æœ‰é”®å€¼å¯¹è¦ä¹ˆå…¨éƒ¨è®¾ç½®æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¦†ç›–è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæŸä¸ªé”®å·²å­˜åœ¨ï¼Œåˆ™å…¶æ—§å€¼ä¼šè¢«æ–°å€¼ç›´æ¥è¦†ç›– ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ€»æ˜¯è¿”å› &lt;code&gt;OK&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(N)ï¼Œå…¶ä¸­ N æ˜¯è¦è®¾ç½®çš„é”®æ•°é‡ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œæ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ã€‚ä¸€æ¬¡ç½‘ç»œå¾€è¿”å³å¯å®Œæˆå¤šä¸ªè®¾ç½®æ“ä½œï¼Œæ˜¾è‘—å‡å°‘å»¶è¿Ÿ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸ä¼˜åŠ¿"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;MSET&lt;/code&gt;çš„æ ¸å¿ƒä»·å€¼åœ¨äºå…¶&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;æ‰¹é‡æ“ä½œ&lt;/strong&gt;èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ€§ä¿è¯&lt;/strong&gt;ï¼šè¿™æ„å‘³ç€åœ¨ä¸€ä¸ª &lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰ç»™å®šé”®éƒ½ä¼šåœ¨åŒä¸€æ—¶é—´å†…è¢«è®¾ç½®ã€‚ä¸ä¼šå‡ºç°éƒ¨åˆ†é”®è®¾ç½®æˆåŠŸè€Œå¦ä¸€éƒ¨åˆ†é”®è®¾ç½®å¤±è´¥çš„æƒ…å†µï¼Œè¿™å¯¹äºéœ€è¦ä¿æŒæ•°æ®ä¸€è‡´æ€§çš„åœºæ™¯è‡³å…³é‡è¦ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;ï¼šä¸ä¾æ¬¡æ‰§è¡Œå¤šä¸ª &lt;code&gt;SET&lt;/code&gt;å‘½ä»¤ç›¸æ¯”ï¼Œä½¿ç”¨ä¸€æ¡ &lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤å¯ä»¥å¤§å¹…å‡å°‘å®¢æˆ·ç«¯ä¸ Redis æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡æ¬¡æ•°ã€‚è¿™åœ¨éœ€è¦åˆå§‹åŒ–å¤§é‡æ•°æ®æˆ–è¿›è¡Œæ‰¹é‡æ›´æ–°æ—¶ï¼Œèƒ½æœ‰æ•ˆé™ä½ç½‘ç»œå»¶è¿Ÿï¼Œæå‡æ•´ä½“ååé‡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨æ–¹æ³•ä¸ç¤ºä¾‹"&gt;ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;MSET&lt;/code&gt;çš„è¯­æ³•ç›´æ¥æ˜äº†ï¼šåªéœ€åœ¨å‘½ä»¤åä¾æ¬¡åˆ—å‡ºé”®å€¼å¯¹å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‘½ä»¤è¡Œç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ä¸€æ¬¡æ€§è®¾ç½®ä¸‰ä¸ªé”®å€¼å¯¹
127.0.0.1:6379&amp;gt; MSET website &amp;#34;Redis.com&amp;#34; language &amp;#34;Python&amp;#34; year &amp;#34;2025&amp;#34;
OK
# éªŒè¯è®¾ç½®ç»“æœ
127.0.0.1:6379&amp;gt; MGET website language year
1) &amp;#34;Redis.com&amp;#34;
2) &amp;#34;Python&amp;#34;
3) &amp;#34;2025&amp;#34;
# è¦†ç›–å·²å­˜åœ¨çš„é”®
127.0.0.1:6379&amp;gt; SET website &amp;#34;Old-Site.com&amp;#34;
OK
127.0.0.1:6379&amp;gt; MSET website &amp;#34;New-Site.com&amp;#34; new_key &amp;#34;new_value&amp;#34;
OK
127.0.0.1:6379&amp;gt; GET website
&amp;#34;New-Site.com&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Python ä»£ç ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ Python ä¸­ä½¿ç”¨ &lt;code&gt;redis&lt;/code&gt;åº“çš„ &lt;code&gt;mset&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import redis
# è¿æ¥åˆ°æœ¬åœ° Redis æœåŠ¡å™¨
r = redis.Redis(host=&amp;#39;localhost&amp;#39;, port=6379, db=0)
# ä½¿ç”¨å­—å…¸æ‰¹é‡è®¾ç½®é”®å€¼å¯¹
data = {
&amp;#39;user:1001:name&amp;#39;: &amp;#39;Alice&amp;#39;,
&amp;#39;user:1001:age&amp;#39;: &amp;#39;30&amp;#39;,
&amp;#39;user:1001:email&amp;#39;: &amp;#39;alice@example.com&amp;#39;
}
r.mset(data)
print(&amp;#34;Data set successfully.&amp;#34;)
# éªŒè¯è®¾ç½®ç»“æœ
print(r.mget(&amp;#39;user:1001:name&amp;#39;, &amp;#39;user:1001:age&amp;#39;, &amp;#39;user:1001:email&amp;#39;))
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æ›¿ä»£å‘½ä»¤"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æ›¿ä»£å‘½ä»¤
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Redis é›†ç¾¤é™åˆ¶&lt;/strong&gt;ï¼šåœ¨ Redis é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œ&lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤è¦æ±‚æ‰€æœ‰æ¶‰åŠçš„é”®å¿…é¡»ä½äºåŒä¸€ä¸ª&lt;strong&gt;å“ˆå¸Œæ§½&lt;/strong&gt;ä¸­ï¼Œå¦åˆ™å‘½ä»¤ä¼šæ‰§è¡Œå¤±è´¥å¹¶è¿”å› &lt;code&gt;CROSSSLOT&lt;/code&gt;é”™è¯¯ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨&lt;strong&gt;å“ˆå¸Œæ ‡ç­¾&lt;/strong&gt;ï¼Œç¡®ä¿éœ€æ‰¹é‡è®¾ç½®çš„é”®æ‹¥æœ‰ç›¸åŒçš„å“ˆå¸Œæ ‡ç­¾éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;MSET {user:1001}:name Alice {user:1001}:age 30&lt;/code&gt;ï¼Œè¿™æ ·é”® &lt;code&gt;{user:1001}:name&lt;/code&gt;å’Œ &lt;code&gt;{user:1001}:age&lt;/code&gt;ä¼šè¢«åˆ†é…åˆ°åŒä¸€ä¸ªæ§½ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— è¿‡æœŸæ—¶é—´è®¾ç½®&lt;/strong&gt;ï¼šåŸç”Ÿ &lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤æ— æ³•ä¸ºé”®è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚å¦‚æœéœ€è¦æœ‰æ‰¹é‡è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;Pipeline&lt;/strong&gt; æˆ– &lt;strong&gt;Lua è„šæœ¬&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç›¸å…³å‘½ä»¤ï¼šMSETNX&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Redis è¿˜æä¾›äº† &lt;code&gt;MSETNX&lt;/code&gt;å‘½ä»¤ï¼Œå…¶è¯­æ³•ä¸ &lt;code&gt;MSET&lt;/code&gt;ç›¸åŒï¼Œä½†å…³é”®åŒºåˆ«åœ¨äºï¼š&lt;strong&gt;åªæœ‰å½“æ‰€æœ‰ç»™å®šé”®éƒ½ä¸å­˜åœ¨æ—¶&lt;/strong&gt;ï¼Œ&lt;code&gt;MSETNX&lt;/code&gt;æ‰ä¼šæ‰§è¡Œè®¾ç½®æ“ä½œã€‚åªè¦æœ‰ä¸€ä¸ªé”®å·²å­˜åœ¨ï¼Œæ•´ä¸ªæ“ä½œéƒ½ä¼šå¤±è´¥ã€‚è¿™é€‚ç”¨äºéœ€è¦åŸå­æ€§åœ°åˆå§‹åŒ–ä¸€æ‰¹æ–°é”®çš„åœºæ™¯ ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤æ˜¯ Redis ä¸­å®ç°é«˜æ•ˆæ‰¹é‡æ•°æ®è®¾ç½®çš„æ ¸å¿ƒå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸå­æ€§æ“ä½œå’Œå‡å°‘ç½‘ç»œå¼€é”€çš„ä¼˜åŠ¿ï¼Œéå¸¸é€‚åˆåˆå§‹åŒ–ç¼“å­˜ã€æ‰¹é‡æ›´æ–°é…ç½®ç­‰åœºæ™¯ã€‚åªéœ€æ³¨æ„å…¶åœ¨é›†ç¾¤ç¯å¢ƒä¸‹çš„å“ˆå¸Œæ§½é™åˆ¶ä»¥åŠæ— æ³•è®¾ç½®è¿‡æœŸæ—¶é—´çš„ç‰¹ç‚¹ï¼Œå³å¯æœ‰æ•ˆå‘æŒ¥å…¶å¨åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;MSET&lt;/code&gt;å‘½ä»¤ã€‚å¦‚æœæ‚¨æœ‰å…¶ä»–ç›¸å…³é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶æå‡ºï¼&lt;/p&gt;
&lt;h2 id="zset"&gt;ZSet
&lt;/h2&gt;&lt;p&gt;Redis ZSetï¼ˆæœ‰åºé›†åˆï¼‰é»˜è®¤é‡‡ç”¨å‡åºæ’åˆ—ï¼Œè¿™èƒŒåæ˜¯ç»¼åˆè€ƒè™‘äº†&lt;strong&gt;è®¾è®¡é€»è¾‘çš„ä¸€è‡´æ€§ã€æ€§èƒ½ä¼˜åŒ–ä»¥åŠç”¨æˆ·ä½“éªŒ&lt;/strong&gt;çš„ç»“æœã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å…¶æ ¸å¿ƒåŸå› ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒåŸå› &lt;/th&gt;
&lt;th&gt;å…·ä½“è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¦åˆè‡ªç„¶è®¤çŸ¥ä¸æ•°å­¦æƒ¯ä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡åºï¼ˆä»å°åˆ°å¤§ï¼‰ç¬¦åˆäººç±»å¯¹æ•°å­—ã€ä¼˜å…ˆçº§ï¼ˆåˆ†æ•°ä½è€…ä¼˜å…ˆï¼‰çš„è‡ªç„¶è®¤çŸ¥é¡ºåºï¼Œä¹Ÿä¸æ•°æ®åº“ &lt;code&gt;ORDER BY&lt;/code&gt;é»˜è®¤è¡Œä¸ºä¸€è‡´ï¼Œé™ä½äº†å­¦ä¹ æˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„çš„å¤©ç„¶é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ZSet çš„ä¸¤ç§åº•å±‚å®ç°ï¼ˆziplist/listpack å’Œ skiplistï¼‰åœ¨ç‰©ç†ä¸Šéƒ½æŒ‰ score å‡åºç»„ç»‡æ•°æ®ã€‚å‡åºæ“ä½œæ˜¯&lt;strong&gt;é¡ºåºéå†&lt;/strong&gt;ï¼Œæ›´ä¸ºç›´æ¥é«˜æ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯æ’åºç»“æœçš„ç¡®å®šæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“å¤šä¸ªå…ƒç´  score ç›¸åŒæ—¶ï¼ŒRedis ä¼šå¼ºåˆ¶æŒ‰ç…§å…ƒç´  value çš„&lt;strong&gt;äºŒè¿›åˆ¶å­—å…¸åºï¼ˆå‡åºï¼‰&lt;/strong&gt; è¿›è¡Œæ’åºã€‚è¿™ç§å›ºå®šçš„æ¬¡çº§è§„åˆ™ç¡®ä¿äº†æ— è®ºæ’å…¥é¡ºåºå¦‚ä½•ï¼Œæ’åºç»“æœéƒ½æ˜¯å”¯ä¸€ä¸”ç¨³å®šçš„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½å®Œå¤‡æ€§ä¸çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Redis æä¾›äº† &lt;code&gt;ZREVRANGE&lt;/code&gt;ã€&lt;code&gt;ZREVRANK&lt;/code&gt;ç­‰å‘½ä»¤è½»æ¾å®ç°é™åºæŸ¥è¯¢ã€‚å°†å‡åºè®¾ä¸ºé»˜è®¤ï¼ŒåŒæ—¶æä¾›é™åºé€‰é¡¹ï¼Œèµ‹äºˆäº†ç”¨æˆ·æœ€å¤§çš„çµæ´»æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£è®¾è®¡é€»è¾‘"&gt;ğŸ’¡ æ·±å…¥ç†è§£è®¾è®¡é€»è¾‘
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ‰åºæ€§çš„æœ¬è´¨&lt;/strong&gt;ï¼šZSet çš„â€œæœ‰åºâ€æ˜¯æŒ‡å…ƒç´ æŒ‰ç…§å…¶å…³è”çš„åˆ†æ•°ï¼ˆscoreï¼‰è¿›è¡Œæ’åºã€‚å‡åºæ˜¯è¿™ç§æœ‰åºæ€§æœ€ç›´è§‚å’ŒåŸºç¡€çš„è¡¨è¾¾æ–¹å¼ã€‚è®¸å¤šç¼–ç¨‹è¯­è¨€å’Œæ•°æ®åº“ç³»ç»Ÿåœ¨å¤„ç†æ’åºæ—¶ï¼Œä¹Ÿæ™®éå°†å‡åºä½œä¸ºé»˜è®¤è¡Œä¸ºï¼Œè¿™æœ‰åŠ©äºä¿æŒæŠ€æœ¯æ ˆä¹‹é—´çš„ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½çš„è€ƒé‡&lt;/strong&gt;ï¼šZSet åœ¨å…ƒç´ æ•°é‡è¾ƒå°‘æ—¶ä¼šä½¿ç”¨ ziplistï¼ˆæˆ–æ›´æ–°çš„ listpackï¼‰å­˜å‚¨ï¼Œæ‰€æœ‰å…ƒç´ æŒ‰ score å‡åºç´§å¯†æ’åˆ—åœ¨è¿ç»­å†…å­˜ä¸­ã€‚åœ¨è¿™ç§ç»“æ„ä¸‹ï¼Œå‡åºèŒƒå›´çš„æŸ¥è¯¢å’Œéå†æ˜¯æœ€é«˜æ•ˆçš„ã€‚å³ä½¿åœ¨å¤§æ•°æ®é‡ä¸‹åˆ‡æ¢ä¸ºè·³è·ƒè¡¨ï¼ˆskiplistï¼‰ï¼Œå…¶å¤šå±‚ç´¢å¼•ç»“æ„ä¹Ÿæ˜¯åŸºäºå‡åºæ„å»ºçš„ï¼Œå‡åºæ“ä½œä¾ç„¶æ˜¯â€œé¡ºåŠ¿è€Œä¸ºâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨³å®šçš„æ¬¡çº§æ’åºè§„åˆ™&lt;/strong&gt;ï¼šé»˜è®¤å‡åºè§„åˆ™è¿˜æœ‰ä¸€ä¸ªé‡è¦ç»†èŠ‚ï¼Œå³å½“åˆ†æ•°ç›¸åŒæ—¶ï¼ŒRedis ä¼šä½¿ç”¨å…ƒç´ å€¼ï¼ˆmemberï¼‰çš„&lt;strong&gt;äºŒè¿›åˆ¶å­—å…¸åºï¼ˆå‡åºï¼‰&lt;/strong&gt; ä½œä¸ºæ¬¡çº§æ’åºè§„åˆ™ã€‚ä¾‹å¦‚ï¼Œscore ç›¸åŒçš„å…ƒç´  &amp;ldquo;apple&amp;rdquo; å’Œ &amp;ldquo;banana&amp;rdquo;ï¼Œ&amp;ldquo;apple&amp;rdquo; ä¼šæ’åœ¨ &amp;ldquo;banana&amp;rdquo; å‰é¢ã€‚è¿™å¥—å›ºå®šçš„è§„åˆ™ç¡®ä¿äº†æ’åºç»“æœçš„ç»å¯¹ç¡®å®šæ€§ï¼Œä¸å—å…ƒç´ æ’å…¥å…ˆåé¡ºåºçš„å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•å®ç°é™åº"&gt;ğŸ”„ å¦‚ä½•å®ç°é™åº
&lt;/h3&gt;&lt;p&gt;å°½ç®¡é»˜è®¤æ˜¯å‡åºï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼ˆå¦‚æ’è¡Œæ¦œï¼‰ï¼Œé™åºéœ€æ±‚éå¸¸æ™®éã€‚Redis ä¸ºæ­¤æä¾›äº†éå¸¸æ–¹ä¾¿çš„å‘½ä»¤ï¼Œä½ å®Œå…¨ä¸éœ€è¦æ‹…å¿ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢æ—¶æŒ‡å®šé™åº&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ZREVRANGE&lt;/code&gt;ï¼ˆæŒ‰æ’åé™åºï¼‰æˆ– &lt;code&gt;ZREVRANGEBYSCORE&lt;/code&gt;ï¼ˆæŒ‰åˆ†æ•°é™åºï¼‰å‘½ä»¤ï¼Œå¯ä»¥è½»æ¾è·å–ä»å¤§åˆ°å°çš„ç»“æœåˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–é™åºæ’å&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ZREVRANK&lt;/code&gt;å‘½ä»¤å¯ä»¥è·å–æŸä¸ªå…ƒç´ åœ¨é™åºæ’åˆ—ä¸­çš„æ’åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒRedis ZSet é»˜è®¤é‡‡ç”¨å‡åºæ’åˆ—ï¼Œæ˜¯å…¶åœ¨&lt;strong&gt;è®¾è®¡é€»è¾‘ã€æ€§èƒ½å®ç°å’Œç”¨æˆ·ä½“éªŒ&lt;/strong&gt;ä¹‹é—´åšå‡ºçš„ä¸€ä¸ªå¹³è¡¡ä¸”åˆç†çš„é€‰æ‹©ã€‚å®ƒç¡®ä¿äº†æœ€åŸºæœ¬æ“ä½œçš„æœ€é«˜æ•ˆç‡ï¼Œå¹¶é€šè¿‡å›ºå®šçš„æ¬¡çº§æ’åºè§„åˆ™ä¿è¯äº†ç»“æœçš„ç¡®å®šæ€§ã€‚åŒæ—¶ï¼ŒRedis å¹¶æ²¡æœ‰ç‰ºç‰²çµæ´»æ€§ï¼Œå®Œæ•´çš„é™åºå‘½ä»¤é›†è®©æ‚¨èƒ½è½»æ¾åº”å¯¹å„ç§åœºæ™¯éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£ Redis ZSet çš„è®¾è®¡å“²å­¦ï¼&lt;/p&gt;
&lt;h2 id="zadd"&gt;ZADD
&lt;/h2&gt;&lt;p&gt;Redis çš„ &lt;code&gt;ZADD&lt;/code&gt;å‘½ä»¤æ˜¯å¤„ç†&lt;strong&gt;æœ‰åºé›†åˆï¼ˆSorted Setï¼‰&lt;/strong&gt; çš„æ ¸å¿ƒå·¥å…·ï¼Œå®ƒå…è®¸ä½ é«˜æ•ˆåœ°æ·»åŠ æˆ–æ›´æ–°æˆå‘˜åŠå…¶åˆ†æ•°ï¼Œå¹¶è‡ªåŠ¨ç»´æŠ¤æ’åºã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒä¿¡æ¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½ä»¤è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ZADD key [NX|XX] [GT|LT] [CH] [INCR] score member [score member &amp;hellip;]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘æœ‰åºé›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ª &lt;strong&gt;æˆå‘˜ï¼ˆmemberï¼‰&lt;/strong&gt; åŠå…¶å…³è”çš„&lt;strong&gt;åˆ†æ•°ï¼ˆscoreï¼‰&lt;/strong&gt;ã€‚å¦‚æœæˆå‘˜å·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶åˆ†æ•°å¹¶é‡æ–°æ’åºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯ã€‚å‘½ä»¤ä¸­çš„æ‰€æœ‰æ“ä½œä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®é€‰é¡¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NX&lt;/code&gt;ï¼ˆä»…æ–°å¢ï¼‰/ &lt;code&gt;XX&lt;/code&gt;ï¼ˆä»…æ›´æ–°ï¼‰ï¼Œ&lt;code&gt;GT&lt;/code&gt;ï¼ˆä»…æ–°åˆ†æ•°å¤§äºå½“å‰åˆ†æ•°æ—¶æ›´æ–°ï¼‰/ &lt;code&gt;LT&lt;/code&gt;ï¼ˆä»…æ–°åˆ†æ•°å°äºå½“å‰åˆ†æ•°æ—¶æ›´æ–°ï¼‰ï¼Œ&lt;code&gt;CH&lt;/code&gt;ï¼ˆè¿”å›å˜æ›´æ•°é‡ï¼‰ï¼Œ&lt;code&gt;INCR&lt;/code&gt;ï¼ˆåˆ†æ•°é€’å¢ï¼Œç±»ä¼¼&lt;code&gt;ZINCRBY&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤è¿”å›&lt;strong&gt;æ–°æ·»åŠ &lt;/strong&gt;çš„æˆå‘˜æ•°é‡ã€‚ä½¿ç”¨ &lt;code&gt;CH&lt;/code&gt;é€‰é¡¹æ—¶ï¼Œè¿”å›&lt;strong&gt;å‘ç”Ÿå˜æ›´&lt;/strong&gt;ï¼ˆæ–°å¢æˆ–åˆ†æ•°æ›´æ–°ï¼‰çš„æˆå‘˜æ€»æ•°ã€‚ä½¿ç”¨ &lt;code&gt;INCR&lt;/code&gt;é€‰é¡¹æ—¶ï¼Œè¿”å›æˆå‘˜çš„æ–°åˆ†æ•°ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(log(N))ï¼Œå…¶ä¸­ N æ˜¯æœ‰åºé›†åˆä¸­çš„å…ƒç´ æ•°é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå‚æ•°è¯¦è§£"&gt;ğŸ’¡ æ ¸å¿ƒå‚æ•°è¯¦è§£
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ZADD&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶ä¸°å¯Œçš„é€‰é¡¹ï¼Œå®ƒä»¬æä¾›äº†ç²¾ç¡®çš„æ“ä½œæ§åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;NX&lt;/code&gt;å’Œ &lt;code&gt;XX&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸¤ä¸ªé€‰é¡¹æ˜¯äº’æ–¥çš„ï¼Œç”¨äºæ§åˆ¶æ“ä½œæ˜¯åŸºäºæ–°æˆå‘˜è¿˜æ˜¯ç°æœ‰æˆå‘˜ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NX&lt;/code&gt;ï¼ˆNot eXistsï¼‰ï¼š&lt;strong&gt;ä»…æ·»åŠ æ–°æˆå‘˜&lt;/strong&gt;ã€‚å¦‚æœæŒ‡å®šçš„æˆå‘˜å·²ç»å­˜åœ¨äºé›†åˆä¸­ï¼Œåˆ™å…¶åˆ†æ•°ä¸ä¼šè¢«æ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XX&lt;/code&gt;ï¼ˆeXists eXistsï¼‰ï¼š&lt;strong&gt;ä»…æ›´æ–°ç°æœ‰æˆå‘˜&lt;/strong&gt;ã€‚å¦‚æœæŒ‡å®šçš„æˆå‘˜ä¸å­˜åœ¨ï¼Œåˆ™ä¸ä¼šè¢«æ·»åŠ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;GT&lt;/code&gt;å’Œ &lt;code&gt;LT&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸¤ä¸ªé€‰é¡¹åœ¨æ›´æ–°å·²å­˜åœ¨æˆå‘˜æ—¶ï¼Œæä¾›äº†æ›´ç»†ç²’åº¦çš„æ¡ä»¶æ§åˆ¶ï¼ˆRedis 6.2.0 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GT&lt;/code&gt;ï¼ˆGreater Thanï¼‰ï¼š&lt;strong&gt;ä»…å½“æ–°åˆ†æ•°å¤§äºå½“å‰åˆ†æ•°æ—¶&lt;/strong&gt;æ‰æ›´æ–°æˆå‘˜åˆ†æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LT&lt;/code&gt;ï¼ˆLess Thanï¼‰ï¼š&lt;strong&gt;ä»…å½“æ–°åˆ†æ•°å°äºå½“å‰åˆ†æ•°æ—¶&lt;/strong&gt;æ‰æ›´æ–°æˆå‘˜åˆ†æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;CH&lt;/code&gt;ï¼ˆChangedï¼‰&lt;/strong&gt;ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code&gt;ZADD&lt;/code&gt;çš„è¿”å›å€¼åªè®¡ç®—æ–°æ·»åŠ çš„æˆå‘˜æ•°é‡ã€‚ä½¿ç”¨ &lt;code&gt;CH&lt;/code&gt;é€‰é¡¹åï¼Œè¿”å›å€¼ä¼šå˜ä¸ºæ‰€æœ‰å‘ç”Ÿå˜åŒ–çš„æˆå‘˜æ•°é‡ï¼Œè¿™åŒ…æ‹¬æ–°æ·»åŠ çš„æˆå‘˜&lt;strong&gt;å’Œ&lt;/strong&gt;åˆ†æ•°è¢«æ›´æ–°çš„å·²å­˜åœ¨æˆå‘˜ã€‚å¦‚æœæˆå‘˜å­˜åœ¨ä¸”æ–°åˆ†æ•°ä¸æ—§åˆ†æ•°ç›¸åŒï¼Œåˆ™ä¸è®¡å…¥å˜æ›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;INCR&lt;/code&gt;ï¼ˆIncrementï¼‰&lt;/strong&gt;ï¼šå½“æŒ‡å®šæ­¤é€‰é¡¹æ—¶ï¼Œ&lt;code&gt;ZADD&lt;/code&gt;çš„è¡Œä¸ºä¼šç±»ä¼¼äº &lt;code&gt;ZINCRBY&lt;/code&gt;å‘½ä»¤ï¼Œå³å¯¹æˆå‘˜çš„åˆ†æ•°è¿›è¡Œå¢åŠ æ“ä½œï¼ˆè€Œä¸æ˜¯è®¾ç½®æ–°åˆ†æ•°ï¼‰ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œ&lt;strong&gt;åªèƒ½æŒ‡å®šä¸€ä¸ªåˆ†æ•°/æˆå‘˜å¯¹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨ç¤ºä¾‹"&gt;ğŸ› ï¸ ä½¿ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›å…·ä½“çš„ä½¿ç”¨åœºæ™¯å’Œå¯¹åº”çš„å‘½ä»¤ç¤ºä¾‹ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£ã€‚&lt;/p&gt;
&lt;h4 id="åŸºç¡€æ“ä½œ"&gt;åŸºç¡€æ“ä½œ
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;# å‘æœ‰åºé›†åˆ &amp;#34;leaderboard&amp;#34; ä¸­æ·»åŠ ä¸‰ä¸ªæˆå‘˜
ZADD leaderboard 100 &amp;#34;Alice&amp;#34; 85 &amp;#34;Bob&amp;#34; 70 &amp;#34;Carol&amp;#34;
# è¿”å›å€¼ï¼š(integer) 3ï¼Œè¡¨ç¤ºæˆåŠŸæ·»åŠ äº†3ä¸ªæ–°æˆå‘˜
# æ›´æ–°å·²å­˜åœ¨æˆå‘˜ &amp;#34;Alice&amp;#34; çš„åˆ†æ•°ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ &amp;#34;David&amp;#34;
ZADD leaderboard 110 &amp;#34;Alice&amp;#34; 90 &amp;#34;David&amp;#34;
# è¿”å›å€¼ï¼š(integer) 1ï¼Œè™½ç„¶ &amp;#34;Alice&amp;#34; çš„åˆ†æ•°è¢«æ›´æ–°ï¼Œä½†é»˜è®¤åªè¿”å›æ–°æˆå‘˜ &amp;#34;David&amp;#34; çš„æ•°é‡
# ä½¿ç”¨ CH é€‰é¡¹ï¼ŒæŸ¥çœ‹å˜æ›´æ€»æ•°
ZADD leaderboard CH 115 &amp;#34;Alice&amp;#34; 95 &amp;#34;Eve&amp;#34;
# è¿”å›å€¼å¯èƒ½æ˜¯ (integer) 2ï¼Œå› ä¸º &amp;#34;Alice&amp;#34; åˆ†æ•°æ›´æ–°ä¸” &amp;#34;Eve&amp;#34; æ˜¯æ–°æ·»åŠ çš„ï¼ˆå‡è®¾ &amp;#34;Eve&amp;#34; ä¹‹å‰ä¸å­˜åœ¨ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ä½¿ç”¨é€‰é¡¹è¿›è¡Œæ¡ä»¶æ“ä½œ"&gt;ä½¿ç”¨é€‰é¡¹è¿›è¡Œæ¡ä»¶æ“ä½œ
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;# ä½¿ç”¨ NXï¼šåªæ·»åŠ ä¸å­˜åœ¨çš„æˆå‘˜ &amp;#34;Frank&amp;#34;ï¼Œå¦‚æœ &amp;#34;Frank&amp;#34; å·²å­˜åœ¨åˆ™å¿½ç•¥
ZADD leaderboard NX 60 &amp;#34;Frank&amp;#34;
# ä½¿ç”¨ XXï¼šåªæ›´æ–°å·²å­˜åœ¨çš„æˆå‘˜ &amp;#34;Alice&amp;#34;ï¼Œå¦‚æœ &amp;#34;Alice&amp;#34; ä¸å­˜åœ¨åˆ™å¿½ç•¥
ZADD leaderboard XX 120 &amp;#34;Alice&amp;#34;
# ä½¿ç”¨ GTï¼šåªæœ‰å½“æ–°åˆ†æ•°ï¼ˆ118ï¼‰å¤§äºå½“å‰åˆ†æ•°æ—¶ï¼Œæ‰æ›´æ–° &amp;#34;Bob&amp;#34;
ZADD leaderboard GT 118 &amp;#34;Bob&amp;#34;
# ä½¿ç”¨ INCRï¼šå°† &amp;#34;Carol&amp;#34; çš„åˆ†æ•°å¢åŠ  10 åˆ†
ZADD leaderboard INCR 10 &amp;#34;Carol&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ•°ç±»å‹&lt;/strong&gt;ï¼šåˆ†æ•°ï¼ˆscoreï¼‰å€¼åº”è¡¨ç¤ºä¸ºåŒç²¾åº¦æµ®ç‚¹æ•°å­—ç¬¦ä¸²ã€‚&lt;code&gt;+inf&lt;/code&gt;å’Œ &lt;code&gt;-inf&lt;/code&gt;ä¹Ÿæ˜¯æœ‰æ•ˆå€¼ï¼Œåˆ†åˆ«ä»£è¡¨æ­£æ— ç©·å’Œè´Ÿæ— ç©·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸åŒåˆ†æ•°çš„æ’åº&lt;/strong&gt;ï¼šå¦‚æœå¤šä¸ªæˆå‘˜æ‹¥æœ‰ç›¸åŒçš„åˆ†æ•°ï¼ŒRedis ä¼šæŒ‰ç…§è¿™äº›æˆå‘˜çš„&lt;strong&gt;å­—å…¸é¡ºåºï¼ˆlexicographical orderï¼‰&lt;/strong&gt; è¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”®çš„ç±»å‹å®‰å…¨&lt;/strong&gt;ï¼šå¦‚æœæŒ‡å®šçš„ &lt;code&gt;key&lt;/code&gt;å·²ç»å­˜åœ¨ï¼Œä½†å…¶æ•°æ®ç±»å‹ä¸æ˜¯æœ‰åºé›†åˆï¼Œ&lt;code&gt;ZADD&lt;/code&gt;å‘½ä»¤å°†è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬æ¼”è¿›&lt;/strong&gt;ï¼šåœ¨ Redis 2.4 ç‰ˆæœ¬ä¹‹å‰ï¼Œ&lt;code&gt;ZADD&lt;/code&gt;æ¯æ¬¡è°ƒç”¨åªèƒ½æ·»åŠ æˆ–æ›´æ–°ä¸€ä¸ªæˆå‘˜ã€‚ä» Redis 2.4 å¼€å§‹ï¼Œæ”¯æŒä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªæˆå‘˜ã€‚&lt;code&gt;GT&lt;/code&gt;å’Œ &lt;code&gt;LT&lt;/code&gt;é€‰é¡¹åˆ™åœ¨ Redis 6.2.0 ç‰ˆæœ¬ä¸­å¼•å…¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ZADD&lt;/code&gt;å‘½ä»¤æ˜¯ Redis æœ‰åºé›†åˆæ“ä½œçš„åŸºçŸ³ï¼Œé€šè¿‡çµæ´»ä½¿ç”¨å…¶é€‰é¡¹ï¼Œä½ å¯ä»¥é«˜æ•ˆåœ°å®ç°æ’è¡Œæ¦œæ›´æ–°ã€å¸¦æ¡ä»¶çš„æ•°æ®æ’å…¥ã€åˆ†æ•°å¢é‡è°ƒæ•´ç­‰å¤šç§å¤æ‚åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;ZADD&lt;/code&gt;å‘½ä»¤ã€‚å¦‚æœæ‚¨å¯¹æœ‰åºé›†åˆçš„å…¶ä»–å‘½ä»¤ï¼ˆå¦‚ &lt;code&gt;ZRANGE&lt;/code&gt;ã€&lt;code&gt;ZRANK&lt;/code&gt;ç­‰ï¼‰ä¹Ÿæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="zrange"&gt;ZRANGE
&lt;/h2&gt;&lt;p&gt;ç†è§£ &lt;code&gt;ZRANGE&lt;/code&gt;å¦‚ä½•æ’åºï¼Œå…³é”®åœ¨äºåˆ†æ¸…å…¶æ’åºçš„&lt;strong&gt;æ ¹æœ¬ä¾æ®&lt;/strong&gt;å’Œæ‚¨ç”¨æ¥&lt;strong&gt;æŒ‡å®šè¿”å›èŒƒå›´&lt;/strong&gt;çš„å‚æ•°ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;ZRANGE&lt;/code&gt;æ˜¯æ ¹æ®æ¯ä¸ª member å…³è”çš„ &lt;strong&gt;scoreï¼ˆåˆ†æ•°ï¼‰&lt;/strong&gt; æ¥æ’åºçš„ï¼Œè€Œå‘½ä»¤ä¸­çš„ &lt;code&gt;start&lt;/code&gt;å’Œ &lt;code&gt;stop&lt;/code&gt;å‚æ•°æ˜¯åŸºäºè¿™ä¸ªæ’åºç»“æœä¸Šçš„&lt;strong&gt;ç´¢å¼•&lt;/strong&gt;ï¼Œç”¨æ¥æˆªå–ç‰¹å®šèŒƒå›´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®æ‚¨å¿«é€ŸæŠŠæ¡æ ¸å¿ƒæ¦‚å¿µï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;th&gt;ä¸æ’åºçš„å…³ç³»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Score (åˆ†æ•°)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ’åºçš„æ ¹æœ¬ä¾æ®&lt;/strong&gt;ã€‚æ¯ä¸ª member éƒ½å…³è”ä¸€ä¸ªåˆ†æ•°ï¼Œ&lt;code&gt;ZRANGE&lt;/code&gt;é»˜è®¤æŒ‰ç…§åˆ†æ•°&lt;strong&gt;ç”±ä½åˆ°é«˜ï¼ˆå‡åºï¼‰&lt;/strong&gt; å¯¹æ‰€æœ‰ member è¿›è¡Œæ’åºã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†³å®šæ€§å› ç´ &lt;/strong&gt;ï¼Œå†³å®šäº†æ¯ä¸ª member åœ¨é›†åˆä¸­çš„æœ€ç»ˆä½ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Member (æˆå‘˜)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“å¤šä¸ª member çš„ &lt;strong&gt;score ç›¸åŒæ—¶&lt;/strong&gt;ï¼Œå®ƒä»¬çš„ç›¸å¯¹é¡ºåºä¼šæŒ‰ç…§ member å€¼çš„&lt;strong&gt;å­—å…¸åºï¼ˆlexicographical orderï¼‰&lt;/strong&gt; è¿›è¡Œæ’åˆ—ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¬¡çº§æ’åºè§„åˆ™&lt;/strong&gt;ï¼Œåœ¨åˆ†æ•°ç›¸åŒçš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Index (ç´¢å¼•)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘½ä»¤ä¸­çš„ &lt;code&gt;start&lt;/code&gt;å’Œ &lt;code&gt;stop&lt;/code&gt;å‚æ•°ã€‚å®ƒä»¬æ˜¯åŸºäºä¸Šè¿°æ’åºè§„åˆ™ç”Ÿæˆçš„æœ‰åºåˆ—è¡¨ä¸Šçš„&lt;strong&gt;ä½ç½®ç¼–å·&lt;/strong&gt;ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œç”¨äº&lt;strong&gt;æŒ‡å®šè¿”å›å“ªä¸€æ®µèŒƒå›´&lt;/strong&gt;çš„ç»“æœã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å‚ä¸æ’åº&lt;/strong&gt;ï¼Œè€Œæ˜¯åœ¨æ’åºå®Œæˆåçš„ç»“æœä¸Šè¿›è¡ŒèŒƒå›´é€‰æ‹©ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£æ’åºæœºåˆ¶"&gt;ğŸ’¡ æ·±å…¥ç†è§£æ’åºæœºåˆ¶
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒæ’åºè§„åˆ™ï¼šScore ä¼˜å…ˆ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ZRANGE&lt;/code&gt;è¿”å›çš„æˆå‘˜åˆ—è¡¨ï¼Œå…¶é¦–è¦ä¸”æ ¹æœ¬çš„æ’åºè§„åˆ™æ˜¯ä¾æ®æ¯ä¸ªæˆå‘˜å…³è”çš„ &lt;strong&gt;score å€¼ï¼Œé»˜è®¤ä¸ºå‡åº&lt;/strong&gt;ï¼ˆä»å°åˆ°å¤§ï¼‰ã€‚è¿™æ˜¯æœ‰åºé›†åˆï¼ˆSorted Setï¼‰æœ€åŸºæœ¬ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„ç‰¹æ€§ã€‚å¦‚æœæ‚¨éœ€è¦é™åºç»“æœï¼Œåº”ä½¿ç”¨ &lt;code&gt;ZREVRANGE&lt;/code&gt;å‘½ä»¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒçº§æ’åºè§„åˆ™ï¼šå­—å…¸åº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ä¸¤ä¸ªæˆ–å¤šä¸ªæˆå‘˜çš„ score å®Œå…¨ç›¸åŒæ—¶ï¼ŒRedis ä¼šé‡‡ç”¨&lt;strong&gt;å­—å…¸åº&lt;/strong&gt;æ¥å†³å®šå®ƒä»¬çš„å…ˆåé¡ºåºã€‚ä¾‹å¦‚ï¼Œscore ç›¸åŒçš„æˆå‘˜ &amp;ldquo;apple&amp;rdquo; å’Œ &amp;ldquo;banana&amp;rdquo;ï¼Œ&amp;ldquo;apple&amp;rdquo; ä¼šæ’åœ¨ &amp;ldquo;banana&amp;rdquo; å‰é¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç´¢å¼•çš„ä½œç”¨ï¼šå®šä½èŒƒå›´&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‚æ•° &lt;code&gt;start&lt;/code&gt;å’Œ &lt;code&gt;stop&lt;/code&gt;æ˜¯åœ¨ä¸Šè¿°æ’åºè§„åˆ™ç”Ÿæˆçš„â€œé˜Ÿä¼â€ä¸­ï¼ŒæŒ‡æ˜æ‚¨è¦æŸ¥çœ‹ä»ç¬¬å‡ ä¸ªåˆ°ç¬¬å‡ ä¸ªæˆå‘˜ã€‚å®ƒä»¬æ”¯æŒè´Ÿæ•°ï¼Œ&lt;code&gt;-1&lt;/code&gt;è¡¨ç¤ºæœ€åä¸€ä¸ªæˆå‘˜ï¼Œ&lt;code&gt;-2&lt;/code&gt;è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;ZRANGE myzset 0 1&lt;/code&gt;è¡¨ç¤ºè·å–æ’åºåæœ€å‰é¢çš„ä¸¤ä¸ªæˆå‘˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç¤ºä¾‹è¯´æ˜"&gt;ğŸ› ï¸ ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ªæœ‰åºé›†åˆ &lt;code&gt;leaderboard&lt;/code&gt;ï¼Œå…¶æ•°æ®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ZADD leaderboard 95 &amp;#34;Charlie&amp;#34; 100 &amp;#34;Alice&amp;#34; 85 &amp;#34;Bob&amp;#34; 100 &amp;#34;Zoe&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªé›†åˆå†…éƒ¨çš„æ’åºç»“æœæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&amp;ldquo;Bob&amp;rdquo; (score: 85) - åˆ†æ•°æœ€ä½ï¼Œæ’ç¬¬ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Charlie&amp;rdquo; (score: 95) - åˆ†æ•°æ¬¡ä¹‹ï¼Œæ’ç¬¬äºŒã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;Alice&amp;rdquo; å’Œ &amp;ldquo;Zoe&amp;rdquo; (score å‡ä¸º 100) - åˆ†æ•°æœ€é«˜ä¸”ç›¸åŒï¼ŒæŒ‰å­—å…¸åºæ’åˆ—ï¼Œ&amp;ldquo;Alice&amp;rdquo; åœ¨ &amp;ldquo;Zoe&amp;rdquo; ä¹‹å‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç°åœ¨æ‰§è¡Œä¸€äº› &lt;code&gt;ZRANGE&lt;/code&gt;å‘½ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ZRANGE leaderboard 0 -1&lt;/code&gt;ï¼šè¿”å›æ‰€æœ‰æˆå‘˜ï¼Œé¡ºåºä¸º &lt;code&gt;&amp;quot;Bob&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Charlie&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Alice&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Zoe&amp;quot;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZRANGE leaderboard 0 1&lt;/code&gt;ï¼šè¿”å›å‰ä¸¤åæˆå‘˜ï¼Œå³ &lt;code&gt;&amp;quot;Bob&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Charlie&amp;quot;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZRANGE leaderboard -2 -1&lt;/code&gt;ï¼šè¿”å›æœ€åä¸¤åæˆå‘˜ï¼Œå³ &lt;code&gt;&amp;quot;Alice&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Zoe&amp;quot;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZRANGE leaderboard 0 -1 WITHSCORES&lt;/code&gt;ï¼šè¿”å›æ‰€æœ‰æˆå‘˜åŠå…¶åˆ†æ•°ï¼Œç»“æœä¼šæ˜¯ &lt;code&gt;&amp;quot;Bob&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;85&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Charlie&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;95&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Alice&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;100&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;Zoe&amp;quot;&lt;/code&gt;, &lt;code&gt;&amp;quot;100&amp;quot;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œè¯·è®°ä½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZRANGE&lt;/code&gt;æ ¹æ® member çš„ score è¿›è¡Œæ’åº&lt;/strong&gt;ï¼Œè¿™æ˜¯æ ¸å¿ƒã€‚&lt;/li&gt;
&lt;li&gt;å½“ score ç›¸åŒæ—¶ï¼ŒæŒ‰ member çš„&lt;strong&gt;å­—å…¸åº&lt;/strong&gt;æ’åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å‘½ä»¤ä¸­çš„ &lt;strong&gt;&lt;code&gt;start&lt;/code&gt;å’Œ &lt;code&gt;stop&lt;/code&gt;æ˜¯ç´¢å¼•å‚æ•°&lt;/strong&gt;ï¼Œç”¨äºåœ¨æ’åºåçš„ç»“æœä¸Šâ€œåˆ‡ç‰‡â€ï¼Œå®ƒæœ¬èº«ä¸å‚ä¸æ’åºé€»è¾‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å½»åº•æ¾„æ¸…æ‚¨çš„ç–‘é—®ï¼å¦‚æœæ‚¨æƒ³äº†è§£å¦‚ä½•æŒ‰åˆ†æ•°èŒƒå›´ï¼ˆè€Œä¸æ˜¯ç´¢å¼•èŒƒå›´ï¼‰æŸ¥è¯¢æˆå‘˜ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹ &lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;å‘½ä»¤æˆ–åœ¨ Redis 6.2 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ä½¿ç”¨ &lt;code&gt;ZRANGE ... BYSCORE&lt;/code&gt;é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h2 id="zrange--byscore"&gt;ZRANGE &amp;amp; BYSCORE
&lt;/h2&gt;&lt;p&gt;ç†è§£ &lt;code&gt;ZRANGE&lt;/code&gt;å’Œ &lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;çš„åŒºåˆ«ï¼Œå…³é”®åœ¨äºå¼„æ¸…å®ƒä»¬ç­›é€‰å…ƒç´ çš„ä¾æ®ï¼šä¸€ä¸ªæ˜¯æŒ‰&lt;strong&gt;æ’åé¡ºåºï¼ˆç´¢å¼•ï¼‰&lt;/strong&gt;ï¼Œå¦ä¸€ä¸ªæ˜¯æŒ‰&lt;strong&gt;åˆ†æ•°å€¼ï¼ˆscoreï¼‰&lt;/strong&gt;ã€‚è¿™ä¸ªæ ¸å¿ƒåŒºåˆ«ä¹Ÿå¯¼è‡´äº†å®ƒä»¬åœ¨å‚æ•°å’Œä½¿ç”¨åœºæ™¯ä¸Šçš„ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;ZRANGE&lt;/th&gt;
&lt;th&gt;ZRANGEBYSCORE&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢ä¾æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…ƒç´ çš„&lt;strong&gt;ç´¢å¼•ï¼ˆæ’åï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…ƒç´ çš„&lt;strong&gt;åˆ†æ•°ï¼ˆscoreï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;start&lt;/code&gt;å’Œ &lt;code&gt;stop&lt;/code&gt;ï¼ˆç´¢å¼•ä½ç½®ï¼Œæ”¯æŒè´Ÿæ•°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;min&lt;/code&gt;å’Œ &lt;code&gt;max&lt;/code&gt;ï¼ˆåˆ†æ•°å€¼ï¼Œæ”¯æŒ &lt;code&gt;-inf&lt;/code&gt;å’Œ &lt;code&gt;+inf&lt;/code&gt;è¡¨ç¤ºæ— ç©·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é¡µæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;æ”¯æŒ &lt;code&gt;LIMIT offset count&lt;/code&gt;å‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·å–æ’è¡Œæ¦œçš„&lt;strong&gt;å‰Nå&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;ZRANGE leaderboard 0 9&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;ç­›é€‰&lt;strong&gt;ç‰¹å®šåˆ†æ•°åŒºé—´&lt;/strong&gt;çš„å…ƒç´ ï¼ˆå¦‚ &lt;code&gt;ZRANGEBYSCORE grades 80 90&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å‘½ä»¤å‚æ•°ä¸ç¤ºä¾‹"&gt;ğŸ’¡ å‘½ä»¤å‚æ•°ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="zrangeæŒ‰æ’åæŸ¥è¯¢"&gt;ZRANGEï¼šæŒ‰æ’åæŸ¥è¯¢
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‚æ•°å«ä¹‰&lt;/strong&gt;ï¼š&lt;code&gt;start&lt;/code&gt;å’Œ &lt;code&gt;stop&lt;/code&gt;æŒ‡çš„æ˜¯å…ƒç´ åœ¨æœ‰åºé›†åˆä¸­çš„ç´¢å¼•ä½ç½®ï¼Œä»0å¼€å§‹ã€‚&lt;code&gt;-1&lt;/code&gt;è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ&lt;code&gt;-2&lt;/code&gt;è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚å‘½ä»¤ &lt;code&gt;ZRANGE myzset 0 -1&lt;/code&gt;ä¼šè¿”å›æ‰€æœ‰å…ƒç´ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# å‡è®¾æœ‰ä¸€ä¸ªæœ‰åºé›†åˆï¼šZADD salary 3500 &amp;#34;peter&amp;#34; 4000 &amp;#34;jack&amp;#34; 5000 &amp;#34;tom&amp;#34;
# è·å–å‰ä¸¤åï¼ˆç´¢å¼•0åˆ°1ï¼‰
ZRANGE salary 0 1 WITHSCORES
# è¿”å›ï¼š1) &amp;#34;peter&amp;#34; 2) &amp;#34;3500&amp;#34; 3) &amp;#34;jack&amp;#34; 4) &amp;#34;4000&amp;#34;
# è·å–æœ€åä¸€åï¼ˆç´¢å¼•-1ï¼‰
ZRANGE salary -1 -1 WITHSCORES
# è¿”å›ï¼š1) &amp;#34;tom&amp;#34; 2) &amp;#34;5000&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="zrangebyscoreæŒ‰åˆ†æ•°æŸ¥è¯¢"&gt;ZRANGEBYSCOREï¼šæŒ‰åˆ†æ•°æŸ¥è¯¢
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‚æ•°å«ä¹‰&lt;/strong&gt;ï¼š&lt;code&gt;min&lt;/code&gt;å’Œ &lt;code&gt;max&lt;/code&gt;å®šä¹‰äº†ä¸€ä¸ªåˆ†æ•°èŒƒå›´ã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;-inf&lt;/code&gt;å’Œ &lt;code&gt;+inf&lt;/code&gt;æ¥ä»£è¡¨æœ€å°å’Œæœ€å¤§åˆ†æ•°ï¼Œé¿å…äº‹å…ˆä¸çŸ¥é“å…·ä½“åˆ†æ•°èŒƒå›´çš„é—®é¢˜ã€‚é»˜è®¤æ˜¯é—­åŒºé—´ï¼ˆåŒ…å«ç«¯ç‚¹å€¼ï¼‰ï¼Œå¯ä»¥åœ¨åˆ†æ•°å‰åŠ  &lt;code&gt;(&lt;/code&gt;æ¥æŒ‡å®šå¼€åŒºé—´ï¼ˆä¸åŒ…å«ç«¯ç‚¹å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æ¥ä¸Šä¾‹ï¼Œè·å–åˆ†æ•°åœ¨3000åˆ°4500ä¹‹é—´çš„æ‰€æœ‰å…ƒç´ ï¼ˆé—­åŒºé—´ï¼‰
ZRANGEBYSCORE salary 3000 4500 WITHSCORES
# è¿”å›ï¼š1) &amp;#34;peter&amp;#34; 2) &amp;#34;3500&amp;#34; 3) &amp;#34;jack&amp;#34; 4) &amp;#34;4000&amp;#34;
# è·å–æ‰€æœ‰åˆ†æ•°å°äº5000çš„å…ƒç´ ï¼ˆå¼€åŒºé—´ï¼Œä¸åŒ…å«5000ï¼‰
ZRANGEBYSCORE salary -inf (5000 WITHSCORES
# è¿”å›ï¼š1) &amp;#34;peter&amp;#34; 2) &amp;#34;3500&amp;#34; 3) &amp;#34;jack&amp;#34; 4) &amp;#34;4000&amp;#34;
# ä½¿ç”¨LIMITè¿›è¡Œåˆ†é¡µï¼šä»ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸­ï¼Œè·³è¿‡å‰1ä¸ªï¼Œå–1ä¸ª
ZRANGEBYSCORE salary 3000 5000 WITHSCORES LIMIT 1 1
# è¿”å›ï¼š1) &amp;#34;jack&amp;#34; 2) &amp;#34;4000&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦ç‰ˆæœ¬å˜åŒ–"&gt;ğŸ”„ é‡è¦ç‰ˆæœ¬å˜åŒ–
&lt;/h3&gt;&lt;p&gt;ä» &lt;strong&gt;Redis 6.2.0&lt;/strong&gt; ç‰ˆæœ¬å¼€å§‹ï¼Œ&lt;code&gt;ZRANGE&lt;/code&gt;å‘½ä»¤é€šè¿‡æ·»åŠ  &lt;code&gt;BYSCORE&lt;/code&gt;é€‰é¡¹æ•´åˆäº† &lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;çš„åŠŸèƒ½ã€‚è¿™æ„å‘³ç€åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„ &lt;code&gt;ZRANGE&lt;/code&gt;å‘½ä»¤è¯­æ³•æ¥å®Œæˆä¸¤ç§æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æŒ‰ç´¢å¼•æŸ¥è¯¢ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
ZRANGE salary 0 -1
# æŒ‰åˆ†æ•°æŸ¥è¯¢ï¼ˆæ–°æ–¹å¼ï¼Œç­‰åŒäº ZRANGEBYSCORE salary 3000 4500ï¼‰
ZRANGE salary 3000 4500 BYSCORE
# åå‘æ’åºæŸ¥è¯¢ï¼ˆæ–°æ–¹å¼ï¼Œç­‰åŒäº ZREVRANGEBYSCOREï¼‰
ZRANGE salary 4500 3000 REV BYSCORE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;åœ¨å¯é¢„è§çš„æœªæ¥ä»èƒ½ä½¿ç”¨ï¼Œä½†å®˜æ–¹æ¨èä½¿ç”¨æ–°çš„ &lt;code&gt;ZRANGE&lt;/code&gt;è¯­æ³•ï¼Œå› ä¸ºå®ƒæ›´ç»Ÿä¸€ã€æ›´å¼ºå¤§ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œé€‰æ‹©å“ªä¸ªå‘½ä»¤å–å†³äºä½ çš„&lt;strong&gt;æŸ¥è¯¢æ„å›¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ æƒ³æ ¹æ®å…ƒç´ çš„&lt;strong&gt;ä½ç½®é¡ºåº&lt;/strong&gt;ï¼ˆæ¯”å¦‚â€œå‰10åâ€ã€â€œç¬¬5åˆ°ç¬¬15åâ€ï¼‰è·å–æ•°æ®æ—¶ï¼Œä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ZRANGE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ æƒ³æ ¹æ®å…ƒç´ çš„&lt;strong&gt;åˆ†æ•°å€¼&lt;/strong&gt;ï¼ˆæ¯”å¦‚â€œåˆ†æ•°åœ¨80åˆ°90ä¹‹é—´çš„æ‰€æœ‰å­¦ç”Ÿâ€ã€â€œåˆ†æ•°è¶…è¿‡100çš„å•†å“â€ï¼‰è¿›è¡Œç­›é€‰æ—¶ï¼Œä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;&lt;/strong&gt;ï¼Œæˆ–è€…åœ¨ Redis 6.2+ ä¸­ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ZRANGE ... BYSCORE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨ Redis æœ‰åºé›†åˆã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„ç”¨æ³•æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="zset-å‘½ä»¤"&gt;ZSet å‘½ä»¤
&lt;/h2&gt;&lt;p&gt;Redis çš„æœ‰åºé›†åˆï¼ˆZsetï¼‰æ˜¯ä¸€ç§éå¸¸å¼ºå¤§çš„æ•°æ®ç»“æ„ï¼Œå®ƒç»“åˆäº†é›†åˆï¼ˆSetï¼‰çš„å”¯ä¸€æ€§å’Œåˆ—è¡¨ï¼ˆListï¼‰çš„æœ‰åºæ€§ã€‚æ¯ä¸ªå…ƒç´ ï¼ˆmemberï¼‰éƒ½å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ï¼Œå¹¶ä¾æ®åˆ†æ•°è¿›è¡Œæ’åºã€‚ä»¥ä¸‹æ˜¯å…¶æ”¯æŒå‘½ä»¤çš„è¯¦ç»†æ€»ç»“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨ä¸ºæ‚¨å¿«é€Ÿæ¢³ç†äº† Zset çš„æ ¸å¿ƒå‘½ä»¤åŠå…¶ç”¨é€”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘½ä»¤ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŠŸèƒ½æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬å¢åˆ æ”¹æŸ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ZADD&lt;/code&gt;, &lt;code&gt;ZREM&lt;/code&gt;, &lt;code&gt;ZSCORE&lt;/code&gt;, &lt;code&gt;ZCARD&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºå…ƒç´ çš„æ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢åˆ†æ•°å’Œè·å–é›†åˆåŸºæ•°ï¼ˆå…ƒç´ æ€»æ•°ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰èŒƒå›´æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ZRANGE&lt;/code&gt;, &lt;code&gt;ZREVRANGE&lt;/code&gt;, &lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®æ’åï¼ˆç´¢å¼•ï¼‰æˆ–åˆ†æ•°èŒƒå›´æŸ¥è¯¢å…ƒç´ ï¼Œæ”¯æŒå‡åºå’Œé™åºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»Ÿè®¡ä¸æ’å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ZCOUNT&lt;/code&gt;, &lt;code&gt;ZRANK&lt;/code&gt;, &lt;code&gt;ZREVRANK&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡åˆ†æ•°åŒºé—´å†…çš„å…ƒç´ æ•°é‡ï¼ŒæŸ¥è¯¢ç‰¹å®šå…ƒç´ çš„æ’åï¼ˆä»0å¼€å§‹ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼¹å‡ºå…ƒç´ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ZPOPMAX&lt;/code&gt;, &lt;code&gt;ZPOPMIN&lt;/code&gt;, &lt;code&gt;BZPOPMAX&lt;/code&gt;, &lt;code&gt;BZPOPMIN&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŸå­æ€§åœ°è·å–å¹¶ç§»é™¤åˆ†æ•°æœ€é«˜æˆ–æœ€ä½çš„å…ƒç´ ï¼Œæä¾›é˜»å¡å’Œéé˜»å¡ç‰ˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é›†åˆè¿ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ZINTERSTORE&lt;/code&gt;, &lt;code&gt;ZUNIONSTORE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¡ç®—å¤šä¸ªZsetçš„äº¤é›†æˆ–å¹¶é›†ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°æ–°çš„Zsetä¸­ï¼Œå¯è®¾ç½®æƒé‡å’Œèšåˆè§„åˆ™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå‘½ä»¤è¯¦è§£"&gt;ğŸ“ æ ¸å¿ƒå‘½ä»¤è¯¦è§£
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. å…ƒç´ æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZADD&lt;/code&gt;&lt;/strong&gt;: æœ€æ ¸å¿ƒçš„æ·»åŠ å‘½ä»¤ã€‚å¯ä»¥å‘æœ‰åºé›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°ã€‚å®ƒæ”¯æŒä¸°å¯Œçš„é€‰é¡¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NX&lt;/code&gt;ï¼šä»…æ·»åŠ æ–°æˆå‘˜ï¼Œä¸æ›´æ–°å·²å­˜åœ¨çš„æˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XX&lt;/code&gt;ï¼šä»…æ›´æ–°å·²å­˜åœ¨æˆå‘˜ï¼Œä¸æ·»åŠ æ–°æˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GT&lt;/code&gt;ï¼šä»…å½“æ–°åˆ†æ•°å¤§äºå½“å‰åˆ†æ•°æ—¶æ‰æ›´æ–°ï¼ˆRedis 6.2+ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LT&lt;/code&gt;ï¼šä»…å½“æ–°åˆ†æ•°å°äºå½“å‰åˆ†æ•°æ—¶æ‰æ›´æ–°ï¼ˆRedis 6.2+ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CH&lt;/code&gt;ï¼šè¿”å›è¢«æ›´æ”¹ï¼ˆåŒ…æ‹¬æ–°å¢å’Œæ›´æ–°ï¼‰çš„æˆå‘˜æ€»æ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–°å¢æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;INCR&lt;/code&gt;ï¼šå°†æˆå‘˜çš„åˆ†æ•°å¢åŠ æŒ‡å®šå€¼ï¼Œç±»ä¼¼äº &lt;code&gt;ZINCRBY&lt;/code&gt;ï¼Œæ­¤æ¨¡å¼ä¸‹åªèƒ½æ“ä½œä¸€ä¸ªæˆå‘˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZREM&lt;/code&gt;&lt;/strong&gt;: ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šæˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZINCRBY&lt;/code&gt;&lt;/strong&gt;: ä¸ºæŒ‡å®šæˆå‘˜çš„åˆ†æ•°å¢åŠ å¢é‡ï¼ˆå¯ä»¥ä¸ºè´Ÿå€¼ï¼‰ã€‚å¦‚æœæˆå‘˜ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶å°†å…¶åˆ†æ•°åˆå§‹åŒ–ä¸ºå¢é‡å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. èŒƒå›´æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZRANGE&lt;/code&gt;&lt;/strong&gt;: è¿”å›æŒ‡å®šæ’ååŒºé—´å†…çš„æˆå‘˜ï¼Œ&lt;strong&gt;é»˜è®¤æŒ‰åˆ†æ•°å‡åºæ’åˆ—&lt;/strong&gt;ï¼ˆä»å°åˆ°å¤§ï¼‰ã€‚ä½¿ç”¨ &lt;code&gt;WITHSCORES&lt;/code&gt;é€‰é¡¹å¯ä»¥åŒæ—¶è¿”å›æˆå‘˜å’Œå…¶åˆ†æ•°ã€‚åœ¨ Redis 6.2 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå®ƒåŠŸèƒ½å¾—åˆ°å¢å¼ºï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;BYSCORE&lt;/code&gt;æˆ– &lt;code&gt;BYLEX&lt;/code&gt;å‚æ•°æŒ‰åˆ†æ•°æˆ–å­—å…¸åºæŸ¥è¯¢ï¼Œå¹¶ä½¿ç”¨ &lt;code&gt;REV&lt;/code&gt;å‚æ•°è¿›è¡Œé™åºæ’åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZREVRANGE&lt;/code&gt;&lt;/strong&gt;: è¿”å›æŒ‡å®šæ’ååŒºé—´å†…çš„æˆå‘˜ï¼Œä½†æŒ‰åˆ†æ•°é™åºæ’åˆ—ï¼ˆä»å¤§åˆ°å°ï¼‰ã€‚åœ¨ Redis 6.2 åï¼Œå…¶åŠŸèƒ½å·²è¢«å¢å¼ºç‰ˆçš„ &lt;code&gt;ZRANGE ... REV&lt;/code&gt;å–ä»£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. ç»Ÿè®¡ä¸æ’å&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZCOUNT&lt;/code&gt;&lt;/strong&gt;: è¿”å›åˆ†æ•°åœ¨ &lt;code&gt;min&lt;/code&gt;å’Œ &lt;code&gt;max&lt;/code&gt;ä¹‹é—´çš„æˆå‘˜æ•°é‡ã€‚æ”¯æŒä½¿ç”¨ &lt;code&gt;-inf&lt;/code&gt;å’Œ &lt;code&gt;+inf&lt;/code&gt;è¡¨ç¤ºè´Ÿæ— ç©·å’Œæ­£æ— ç©·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZRANK&lt;/code&gt;/ &lt;code&gt;ZREVRANK&lt;/code&gt;&lt;/strong&gt;: è¿”å›æŒ‡å®šæˆå‘˜åœ¨é›†åˆä¸­çš„æ’åï¼ˆä»0å¼€å§‹ï¼‰ã€‚&lt;code&gt;ZRANK&lt;/code&gt;æŒ‰åˆ†æ•°å‡åºè®¡ç®—æ’åï¼Œ&lt;code&gt;ZREVRANK&lt;/code&gt;æŒ‰é™åºè®¡ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4. å¼¹å‡ºæ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZPOPMAX&lt;/code&gt;/ &lt;code&gt;ZPOPMIN&lt;/code&gt;&lt;/strong&gt;: åŸå­æ€§åœ°ç§»é™¤å¹¶è¿”å›åˆ†æ•°æœ€é«˜æˆ–æœ€ä½çš„æˆå‘˜ã€‚å¯ä»¥æŒ‡å®š &lt;code&gt;count&lt;/code&gt;å‚æ•°æ¥æ“ä½œå¤šä¸ªå…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;BZPOPMAX&lt;/code&gt;/ &lt;code&gt;BZPOPMIN&lt;/code&gt;&lt;/strong&gt;: ä¸Šè¿°å‘½ä»¤çš„é˜»å¡ç‰ˆæœ¬ã€‚å¦‚æœæŒ‡å®šçš„Zsetä¸ºç©ºï¼Œå®¢æˆ·ç«¯ä¼šé˜»å¡ç›´åˆ°æœ‰å…ƒç´ å¯å¼¹å‡ºæˆ–è¶…æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;5. é›†åˆè¿ç®—&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ZINTERSTORE&lt;/code&gt;/ &lt;code&gt;ZUNIONSTORE&lt;/code&gt;&lt;/strong&gt;: ç”¨äºè®¡ç®—å¤šä¸ªZsetçš„äº¤é›†æˆ–å¹¶é›†ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ &lt;code&gt;destination&lt;/code&gt;é”®ä¸­ã€‚
&lt;ul&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;WEIGHTS&lt;/code&gt;ä¸ºæ¯ä¸ªè¾“å…¥Zsetè®¾ç½®æƒé‡ï¼Œåœ¨è®¡ç®—æ—¶æˆå‘˜çš„åˆ†æ•°ä¼šä¹˜ä»¥ç›¸åº”çš„æƒé‡ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;AGGREGATE&lt;/code&gt;æŒ‡å®šå¦‚ä½•èšåˆç›¸äº¤æˆå‘˜çš„åˆ†æ•°ï¼Œå¯é€‰å€¼ä¸º &lt;code&gt;SUM&lt;/code&gt;ï¼ˆæ±‚å’Œï¼Œé»˜è®¤ï¼‰ã€&lt;code&gt;MIN&lt;/code&gt;ï¼ˆå–æœ€å°å€¼ï¼‰æˆ– &lt;code&gt;MAX&lt;/code&gt;ï¼ˆå–æœ€å¤§å€¼ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åº•å±‚ç¼–ç ä¸åº”ç”¨åœºæ™¯"&gt;âš™ï¸ åº•å±‚ç¼–ç ä¸åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚ç¼–ç &lt;/strong&gt;ï¼šRedis ä¼šæ ¹æ®Zsetçš„å¤§å°åŠ¨æ€é€‰æ‹©ç¼–ç æ–¹å¼ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚å½“å…ƒç´ æ•°é‡å°‘ï¼ˆé»˜è®¤å°‘äº128ä¸ªï¼‰ä¸”æ¯ä¸ªå…ƒç´ å€¼å°ï¼ˆé»˜è®¤å°äº64å­—èŠ‚ï¼‰æ—¶ï¼Œä½¿ç”¨ &lt;strong&gt;ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰&lt;/strong&gt; ä»¥èŠ‚çœå†…å­˜ã€‚å½“ä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æ¢ä¸º &lt;strong&gt;skiplistï¼ˆè·³è·ƒè¡¨ï¼‰&lt;/strong&gt;ï¼Œä»¥ä¿è¯æ’å…¥ã€åˆ é™¤å’ŒèŒƒå›´æŸ¥è¯¢çš„é«˜æ•ˆæ€§ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬ä¸º O(log N)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ’è¡Œæ¦œç³»ç»Ÿ&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„åº”ç”¨ã€‚å¯ä»¥è½»æ¾å®ç°æ ¹æ®æ¸¸æˆç§¯åˆ†ã€ç”¨æˆ·æ´»è·ƒåº¦ã€å•†å“é”€é‡ç­‰è¿›è¡Œçš„å®æ—¶æ’åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¦æƒé‡çš„æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;ï¼šå°†ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´æˆ³ä½œä¸ºåˆ†æ•°ï¼Œä½¿ç”¨ &lt;code&gt;ZPOPMIN&lt;/code&gt;å¯ä»¥è½»æ¾è·å–æœ€æ—©åˆ°æœŸçš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»¶æ—¶ä»»åŠ¡&lt;/strong&gt;ï¼šå°†ä»»åŠ¡åˆ°æœŸæ—¶é—´è®¾ä¸ºåˆ†æ•°ï¼Œé€šè¿‡ &lt;code&gt;ZRANGEBYSCORE&lt;/code&gt;æŸ¥è¯¢å·²åˆ°æœŸçš„ä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒƒå›´æŸ¥è¯¢&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œå¿«é€ŸæŸ¥æ‰¾æˆç»©åœ¨80åˆ°90åˆ†ä¹‹é—´çš„å­¦ç”Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å‘½ä»¤æ€»ç»“èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Redis çš„æœ‰åºé›†åˆã€‚å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šå‘½ä»¤æˆ–åº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­ä¸ºæ‚¨è§£ç­”ã€‚&lt;/p&gt;
&lt;h2 id="bylex"&gt;BYLEX
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;BYLEX&lt;/code&gt;æ˜¯ Redis æœ‰åºé›†åˆï¼ˆZSetï¼‰ä¸­ä¸€ä¸ªç”¨äº&lt;strong&gt;æŒ‰æˆå‘˜ï¼ˆmemberï¼‰çš„å­—å…¸é¡ºåºè¿›è¡ŒèŒƒå›´æŸ¥è¯¢&lt;/strong&gt;çš„å¼ºå¤§å‚æ•°ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒå‚æ•°å’Œè¿”å›å€¼ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°/æ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;è¯´æ˜ä¸å¯é€‰å€¼&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;min&lt;/code&gt;/ &lt;code&gt;max&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰å­—å…¸åºèŒƒå›´çš„èµ·å§‹å’Œç»“æŸç‚¹ã€‚å¿…é¡»ä»¥ç‰¹å®šå­—ç¬¦å¼€å¤´ï¼š â€¢ &lt;code&gt;[&lt;/code&gt;ï¼šåŒ…å«ï¼ˆé—­åŒºé—´ï¼‰ â€¢ &lt;code&gt;(&lt;/code&gt;ï¼šä¸åŒ…å«ï¼ˆå¼€åŒºé—´ï¼‰ â€¢ &lt;code&gt;-&lt;/code&gt;ï¼šè¡¨ç¤ºè´Ÿæ— ç©·ï¼ˆæœ€å°å¯èƒ½å­—ç¬¦ä¸²ï¼‰ â€¢ &lt;code&gt;+&lt;/code&gt;ï¼šè¡¨ç¤ºæ­£æ— ç©·ï¼ˆæœ€å¤§å¯èƒ½å­—ç¬¦ä¸²ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[a&lt;/code&gt;åŒ…å« &amp;ldquo;a&amp;rdquo;ï¼›&lt;code&gt;(a&lt;/code&gt;ä¸åŒ…å« &amp;ldquo;a&amp;rdquo;ï¼›&lt;code&gt;-&lt;/code&gt;å’Œ &lt;code&gt;+&lt;/code&gt;è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;LIMIT offset count&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹ç»“æœè¿›è¡Œåˆ†é¡µã€‚ â€¢ &lt;code&gt;offset&lt;/code&gt;ï¼šè¦è·³è¿‡çš„å…ƒç´ æ•°é‡ â€¢ &lt;code&gt;count&lt;/code&gt;ï¼šè¿”å›çš„æœ€å¤§å…ƒç´ æ•°é‡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;LIMIT 1 2&lt;/code&gt;è·³è¿‡ç¬¬1ä¸ªå…ƒç´ ï¼Œè¿”å›æ¥ä¸‹æ¥çš„2ä¸ªå…ƒç´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;REV&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç»“æœæŒ‰å­—å…¸åºé™åºæ’åˆ—ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ZRANGE myzset [z [a BYLEX REV&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«åœ¨æŒ‡å®šå­—å…¸åºèŒƒå›´å†…çš„æˆå‘˜ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;1) &amp;quot;apple&amp;quot; 2) &amp;quot;banana&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸é€‚ç”¨å‰æ"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ä¸é€‚ç”¨å‰æ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BYLEX&lt;/code&gt;çš„æ ¸å¿ƒæ˜¯&lt;strong&gt;å­—å…¸åºï¼ˆLexicographical Orderï¼‰&lt;/strong&gt;ï¼Œå³æŒ‰ç…§å­—ç¬¦ä¸²çš„äºŒè¿›åˆ¶å€¼é€ä¸ªå­—èŠ‚è¿›è¡Œæ¯”è¾ƒï¼Œç±»ä¼¼äºè®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­å­—ç¬¦ä¸²çš„é»˜è®¤æ’åºæ–¹å¼ï¼ˆä¾‹å¦‚ï¼Œåœ¨ASCIIç ä¸­ï¼Œ&lt;code&gt;'a'&lt;/code&gt;&amp;lt; &lt;code&gt;'b'&lt;/code&gt;ï¼Œ&lt;code&gt;'ab'&lt;/code&gt;&amp;gt; &lt;code&gt;'a'&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;BYLEX&lt;/code&gt;æœ‰ä¸€ä¸ªé‡è¦çš„&lt;strong&gt;å‰ææ¡ä»¶&lt;/strong&gt;ï¼š&lt;strong&gt;å®ƒæœ€é€‚ç”¨äºæ‰€æœ‰æˆå‘˜å…·æœ‰ç›¸åŒåˆ†æ•°ï¼ˆscoreï¼‰çš„æœ‰åºé›†åˆ&lt;/strong&gt;ã€‚è™½ç„¶Rediså¹¶ä¸å¼ºåˆ¶è¦æ±‚åˆ†æ•°å¿…é¡»ç›¸åŒï¼Œä½†å¦‚æœåˆ†æ•°ä¸åŒï¼Œé›†åˆé¦–å…ˆä¼šæŒ‰åˆ†æ•°æ’åºï¼Œè¿™ä¼šå¯¼è‡´å­—å…¸åºæŸ¥è¯¢çš„ç»“æœä¸ç¬¦åˆé¢„æœŸã€‚å› æ­¤ï¼Œé€šå¸¸åœ¨ä½¿ç”¨ &lt;code&gt;BYLEX&lt;/code&gt;å‰ï¼Œæˆ‘ä»¬ä¼šå°†æ‰€æœ‰ç›¸å…³æˆå‘˜çš„åˆ†æ•°è®¾ç½®ä¸ºç›¸åŒçš„å€¼ï¼ˆå¦‚0ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-æ·±å…¥ç†è§£èŒƒå›´æŸ¥è¯¢çš„è¾¹ç•Œ"&gt;ğŸ” æ·±å…¥ç†è§£èŒƒå›´æŸ¥è¯¢çš„è¾¹ç•Œ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;min&lt;/code&gt;å’Œ &lt;code&gt;max&lt;/code&gt;å‚æ•°çš„å®šä¹‰æ˜¯ä½¿ç”¨ &lt;code&gt;BYLEX&lt;/code&gt;çš„å…³é”®ï¼Œå®ƒä»¬å…±åŒå®šä¹‰äº†ä¸€ä¸ªå·¦é—­å³å¼€åŒºé—´ &lt;code&gt;[min, max)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒ…å«ä¸æ’é™¤&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;[&lt;/code&gt;æˆ– &lt;code&gt;(&lt;/code&gt;æ¥æŒ‡æ˜æ˜¯å¦åŒ…å«è¾¹ç•Œå€¼æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;[apple&lt;/code&gt;è¡¨ç¤ºèŒƒå›´åŒ…å«å­—ç¬¦ä¸² &amp;ldquo;apple&amp;rdquo;ï¼Œè€Œ &lt;code&gt;(apple&lt;/code&gt;åˆ™è¡¨ç¤ºèŒƒå›´ä¸åŒ…å« &amp;ldquo;apple&amp;rdquo;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ç©·å¤§çš„è¡¨ç¤º&lt;/strong&gt;ï¼š&lt;code&gt;-&lt;/code&gt;å’Œ &lt;code&gt;+&lt;/code&gt;åˆ†åˆ«ä»£è¡¨å­—å…¸åºçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œå¸¸ç”¨äºæŸ¥è¯¢æ‰€æœ‰æˆå‘˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç»„åˆç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ªæ‰€æœ‰æˆå‘˜åˆ†æ•°å‡ä¸º0çš„ZSetï¼š&lt;code&gt;ZADD myzset 0 apple 0 banana 0 cherry 0 date 0 fig&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ZRANGE myzset [b [d BYLEX&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;è¿”å›ï¼š&lt;code&gt;1) &amp;quot;banana&amp;quot; 2) &amp;quot;cherry&amp;quot; 3) &amp;quot;date&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è§£é‡Šï¼šæŸ¥è¯¢ä»åŒ…å« &amp;ldquo;b&amp;rdquo; åˆ°åŒ…å« &amp;ldquo;d&amp;rdquo; çš„æˆå‘˜ã€‚æ³¨æ„ï¼Œ&amp;ldquo;date&amp;rdquo; ä¹Ÿè¢«åŒ…å«åœ¨å†…ï¼Œå› ä¸º &lt;code&gt;[d&lt;/code&gt;åŒ…å«äº†æ‰€æœ‰ä»¥ &amp;ldquo;d&amp;rdquo; å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZRANGE myzset (b (d BYLEX&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;è¿”å›ï¼š&lt;code&gt;1) &amp;quot;cherry&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è§£é‡Šï¼šæŸ¥è¯¢ä»æ’é™¤ &amp;ldquo;b&amp;rdquo; ååˆ°æ’é™¤ &amp;ldquo;d&amp;rdquo; å‰çš„æˆå‘˜ã€‚å› æ­¤ &amp;ldquo;banana&amp;rdquo; å’Œ &amp;ldquo;date&amp;rdquo; éƒ½è¢«æ’é™¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZRANGE myzset - + BYLEX&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;è¿”å›æ‰€æœ‰æˆå‘˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ZRANGE myzset [c + BYLEX&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;è¿”å›ä» &amp;ldquo;c&amp;rdquo;ï¼ˆåŒ…å«ï¼‰å¼€å§‹çš„æ‰€æœ‰æˆå‘˜ï¼š&lt;code&gt;1) &amp;quot;cherry&amp;quot; 2) &amp;quot;date&amp;quot; 3) &amp;quot;fig&amp;quot;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸ç”¨åœºæ™¯ä¸å‘½ä»¤ç¤ºä¾‹"&gt;ğŸ› ï¸ å¸¸ç”¨åœºæ™¯ä¸å‘½ä»¤ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BYLEX&lt;/code&gt;éå¸¸é€‚åˆéœ€è¦æŒ‰å­—ç¬¦ä¸²å‰ç¼€æˆ–ç‰¹å®šå­—æ¯èŒƒå›´è¿›è¡ŒæŸ¥è¯¢çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰å‰ç¼€æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥æ‰¾æ‰€æœ‰ä»¥ &amp;ldquo;ba&amp;rdquo; å¼€å¤´çš„æˆå‘˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ZRANGE myzset [ba (bb BYLEX
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œï¼Œ&lt;code&gt;[ba&lt;/code&gt;è¡¨ç¤ºåŒ…å«æ‰€æœ‰å¤§äºç­‰äº &amp;ldquo;ba&amp;rdquo; çš„å­—ç¬¦ä¸²ï¼Œ&lt;code&gt;(bb&lt;/code&gt;è¡¨ç¤ºå°äº &amp;ldquo;bb&amp;rdquo;ã€‚è¿™ä¸ªèŒƒå›´æ­£å¥½å›Šæ‹¬äº†æ‰€æœ‰ä»¥ &amp;ldquo;ba&amp;rdquo; å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æœåˆ†é¡µ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…ˆæŸ¥è¯¢æ‰€æœ‰æˆå‘˜ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;LIMIT&lt;/code&gt;è¿›è¡Œåˆ†é¡µï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ç¬¬ä¸€é¡µï¼Œè·å–å‰2ä¸ªæˆå‘˜
ZRANGE myzset - + BYLEX LIMIT 0 2
# ç¬¬äºŒé¡µï¼Œè·³è¿‡å‰2ä¸ªï¼Œè·å–æ¥ä¸‹æ¥çš„2ä¸ªæˆå‘˜
ZRANGE myzset - + BYLEX LIMIT 2 2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™åºæ’åˆ—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;REV&lt;/code&gt;å‚æ•°ä½¿ç»“æœæŒ‰å­—å…¸åºé™åºæ’åˆ—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ZRANGE myzset + - BYLEX REV
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„ï¼Œå½“ä½¿ç”¨ &lt;code&gt;REV&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;min&lt;/code&gt;å’Œ &lt;code&gt;max&lt;/code&gt;çš„ä½ç½®é€šå¸¸ä¹Ÿéœ€è¦äº’æ¢ï¼Œ&lt;code&gt;+&lt;/code&gt;åœ¨å‰ï¼Œ&lt;code&gt;-&lt;/code&gt;åœ¨åï¼Œè¡¨ç¤ºä»æœ€å¤§åˆ°æœ€å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸ç›¸å…³å‘½ä»¤"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸ç›¸å…³å‘½ä»¤
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ•°ä¸€è‡´æ€§é—®é¢˜&lt;/strong&gt;ï¼šå†æ¬¡å¼ºè°ƒï¼Œ&lt;strong&gt;ç¡®ä¿æ‰€æœ‰æˆå‘˜çš„åˆ†æ•°ç›¸åŒæ˜¯ä½¿ç”¨ &lt;code&gt;BYLEX&lt;/code&gt;è·å¾—é¢„æœŸç»“æœçš„å…³é”®&lt;/strong&gt;ã€‚å¦‚æœåˆ†æ•°ä¸ä¸€è‡´ï¼ŒRedisä¼šå…ˆæŒ‰åˆ†æ•°æ’åºï¼Œå¯¼è‡´å­—å…¸åºæŸ¥è¯¢å¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äºŒè¿›åˆ¶æ¯”è¾ƒ&lt;/strong&gt;ï¼šå­—å…¸åºæ¯”è¾ƒæ˜¯åŸºäºå­—èŠ‚çš„äºŒè¿›åˆ¶å€¼ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯&lt;strong&gt;åŒºåˆ†å¤§å°å†™&lt;/strong&gt;çš„ï¼ˆä¾‹å¦‚ï¼Œ&lt;code&gt;&amp;quot;Apple&amp;quot;&lt;/code&gt;ä¼šæ’åœ¨ &lt;code&gt;&amp;quot;apple&amp;quot;&lt;/code&gt;ä¹‹å‰ï¼Œå› ä¸ºå¤§å†™å­—æ¯çš„ASCIIç å€¼å°äºå°å†™å­—æ¯ï¼‰ã€‚å¯¹äºéœ€è¦ä¸åŒºåˆ†å¤§å°å†™çš„åœºæ™¯ï¼Œéœ€è¦åœ¨å­˜å‚¨æˆå‘˜å‰è¿›è¡Œç»Ÿä¸€çš„å¤§å°å†™è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸å…³å‘½ä»¤&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ZLEXCOUNT key min max&lt;/code&gt;ï¼šç”¨äºç»Ÿè®¡ä½äºæŒ‡å®šå­—å…¸åºèŒƒå›´å†…çš„æˆå‘˜æ•°é‡ï¼Œè€Œæ— éœ€è¿”å›æˆå‘˜æœ¬èº«ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Redis 6.2.0 ä¹‹å‰ï¼Œæœ‰ç‹¬ç«‹çš„ &lt;code&gt;ZRANGEBYLEX&lt;/code&gt;å‘½ä»¤ã€‚è‡ª 6.2.0 ç‰ˆæœ¬èµ·ï¼Œå®ƒçš„åŠŸèƒ½è¢«æ•´åˆè¿› &lt;code&gt;ZRANGE&lt;/code&gt;å‘½ä»¤çš„ &lt;code&gt;BYLEX&lt;/code&gt;å‚æ•°ä¸­ï¼Œå®˜æ–¹æ¨èä½¿ç”¨æ–°çš„è¯­æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BYLEX&lt;/code&gt;å‚æ•°ä¸º Redis æœ‰åºé›†åˆæä¾›äº†å¼ºå¤§çš„å­—å…¸åºæŸ¥è¯¢èƒ½åŠ›ï¼Œéå¸¸é€‚åˆç”¨äº&lt;strong&gt;è‡ªåŠ¨è¡¥å…¨ã€æŒ‰å­—æ¯é¡ºåºæ£€ç´¢å’Œåˆ†ç±»æ ‡ç­¾ç®¡ç†&lt;/strong&gt;ç­‰åœºæ™¯ã€‚è¦æœ‰æ•ˆä½¿ç”¨å®ƒï¼Œå…³é”®åœ¨äºç†è§£å…¶&lt;strong&gt;å­—å…¸åºæ¯”è¾ƒè§„åˆ™&lt;/strong&gt;ã€&lt;strong&gt;å¼€é—­åŒºé—´çš„è¾¹ç•Œå®šä¹‰&lt;/strong&gt;ï¼Œå¹¶ç‰¢è®°&lt;strong&gt;åˆ†æ•°ä¸€è‡´æ€§&lt;/strong&gt;çš„å‰ææ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æŒæ¡ &lt;code&gt;BYLEX&lt;/code&gt;çš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;h2 id="hash"&gt;Hash
&lt;/h2&gt;&lt;p&gt;Redis Hash çš„åº•å±‚å®ç°æ˜¯ä¸€ä¸ªå·§å¦™å¹³è¡¡å†…å­˜æ•ˆç‡ä¸è®¿é—®æ€§èƒ½çš„è®¾è®¡ï¼Œå®ƒä¼šæ ¹æ®æ•°æ®é‡çš„å¤§å°å’Œç‰¹å¾ï¼Œåœ¨ &lt;strong&gt;listpackï¼ˆRedis 7.0 ä¹‹å‰ä½¿ç”¨ ziplistï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;å“ˆå¸Œè¡¨ (hashtable)&lt;/strong&gt; ä¸¤ç§ç»“æ„ä¹‹é—´è‡ªåŠ¨è½¬æ¢ã€‚ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸¤ç§ç»“æ„çš„æ ¸å¿ƒç‰¹ç‚¹ä¸è½¬æ¢æœºåˆ¶ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;listpack / ziplist (ç”¨äºå°‘é‡æ•°æ®)&lt;/th&gt;
&lt;th&gt;hashtable (ç”¨äºå¤§é‡æ•°æ®)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´§å‡‘çš„è¿ç»­å†…å­˜å—ï¼Œå­—æ®µ(field)å’Œå€¼(value)äº¤æ›¿å­˜å‚¨&lt;/td&gt;
&lt;td&gt;æ•°ç»„ + é“¾è¡¨ï¼ˆæˆ–çº¢é»‘æ ‘ï¼‰çš„ç»å…¸æ•£åˆ—è¡¨ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œæ— æŒ‡é’ˆå¼€é”€ï¼Œå†…å­˜è¿ç»­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½&lt;/strong&gt;ï¼Œéœ€è¦å­˜å‚¨æŒ‡é’ˆå’Œç»´æŒæ•°ç»„ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹è¾ƒä½&lt;/strong&gt;ï¼ŒæŸ¥è¯¢éœ€çº¿æ€§éå†ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œé€šè¿‡å“ˆå¸Œè®¡ç®—ç›´æ¥å®šä½ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ O(1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®é…ç½®å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;hash-max-listpack-entries&lt;/code&gt;(é»˜è®¤: 512) &lt;code&gt;hash-max-listpack-value&lt;/code&gt;(é»˜è®¤: 64)&lt;/td&gt;
&lt;td&gt;å½“æ•°æ®é‡è¶…å‡ºä¸Šè¿°å‚æ•°é™åˆ¶æ—¶è‡ªåŠ¨å¯ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èŠ‚çœå†…å­˜ï¼Œå°¤å…¶é€‚åˆå­˜å‚¨å°å‹å¯¹è±¡&lt;/td&gt;
&lt;td&gt;é«˜é€Ÿè®¿é—®ï¼Œé€‚åˆå­—æ®µå¤šæˆ–æ•°æ®é‡å¤§çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ½œåœ¨é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥/åˆ é™¤å¯èƒ½å¯¼è‡´è¿é”æ›´æ–°ï¼ˆziplisté—®é¢˜ï¼Œlistpackå·²è§£å†³ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦æ‰©å®¹(rehash)ï¼Œå¯èƒ½çŸ­æš‚å½±å“æ€§èƒ½ï¼ˆRedisä½¿ç”¨æ¸è¿›å¼rehashä¼˜åŒ–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åº•å±‚ç»“æ„çš„è‡ªåŠ¨è½¬æ¢"&gt;ğŸ”„ åº•å±‚ç»“æ„çš„è‡ªåŠ¨è½¬æ¢
&lt;/h3&gt;&lt;p&gt;Redis é€šè¿‡ä¸¤ä¸ªå…³é”®é…ç½®å‚æ•°æ¥æ§åˆ¶ Hash ä½¿ç”¨å“ªç§åº•å±‚ç»“æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢ä¸º hashtable çš„æ¡ä»¶&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;å“ˆå¸Œå¯¹è±¡ä¿å­˜çš„&lt;strong&gt;é”®å€¼å¯¹æ•°é‡&lt;/strong&gt;è¶…è¿‡äº† &lt;code&gt;hash-max-listpack-entries&lt;/code&gt;é…ç½®çš„å€¼ï¼ˆé»˜è®¤ 512ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œå¯¹è±¡ä¸­&lt;strong&gt;ä»»æ„ä¸€ä¸ªé”®æˆ–å€¼&lt;/strong&gt;çš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº† &lt;code&gt;hash-max-listpack-value&lt;/code&gt;é…ç½®çš„å€¼ï¼ˆé»˜è®¤ 64 å­—èŠ‚ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¦ç‰¹æ€§&lt;/strong&gt;ï¼šè½¬æ¢æ˜¯&lt;strong&gt;å•å‘çš„&lt;/strong&gt;ã€‚ä¸€æ—¦ä» listpack/ziplist è½¬æ¢ä¸º hashtableï¼Œå³ä½¿æ•°æ®é‡å‡å°‘åˆ°é˜ˆå€¼ä»¥ä¸‹ï¼Œä¹Ÿä¸ä¼šå†è½¬å›å»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å„ç‰ˆæœ¬æ¼”è¿›ä¸æ ¸å¿ƒæœºåˆ¶"&gt;ğŸ’¡ å„ç‰ˆæœ¬æ¼”è¿›ä¸æ ¸å¿ƒæœºåˆ¶
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä» ziplist åˆ° listpack&lt;/strong&gt;ï¼šåœ¨ Redis 7.0 ä¹‹å‰ï¼Œå°æ•°æ®é‡çš„ Hash ä½¿ç”¨ ziplistã€‚ziplist æœ‰ä¸€ä¸ªâ€œè¿é”æ›´æ–°â€çš„ç¼ºé™·ï¼Œå³æŸä¸ªèŠ‚ç‚¹é•¿åº¦çš„å˜åŒ–å¯èƒ½å¯¼è‡´åç»­å¤šä¸ªèŠ‚ç‚¹éœ€è¦é‡æ–°åˆ†é…ç©ºé—´ã€‚Redis 7.0 å¼•å…¥ &lt;strong&gt;listpack&lt;/strong&gt; å–ä»£ ziplistï¼Œé€šè¿‡æ”¹å˜é•¿åº¦è®°å½•æ–¹å¼ï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œè¡¨ä¸æ¸è¿›å¼ rehash&lt;/strong&gt;ï¼šå½“æ•°æ®é‡å¢å¤§æ—¶ï¼ŒRedis ä¼šåˆ‡æ¢åˆ° hashtableã€‚ä¸ºäº†é¿å…åœ¨æ‰©å®¹ï¼ˆrehashï¼‰æ—¶é˜»å¡æœåŠ¡ï¼ŒRedis é‡‡ç”¨äº†&lt;strong&gt;æ¸è¿›å¼ rehash&lt;/strong&gt; ç­–ç•¥ã€‚å®ƒä¸æ˜¯ä¸€æ¬¡æ€§è¿ç§»æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯åœ¨åç»­çš„æ¯æ¬¡è¯»å†™æ“ä½œä¸­åˆ†æ‰¹å®Œæˆï¼ŒæœŸé—´ä¼šåŒæ—¶æŸ¥è¯¢æ–°æ—§ä¸¤ä¸ªå“ˆå¸Œè¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯å»ºè®®"&gt;ğŸ¯ åº”ç”¨åœºæ™¯å»ºè®®
&lt;/h3&gt;&lt;p&gt;äº†è§£åº•å±‚ç»“æ„æœ‰åŠ©äºä½ æ›´å¥½åœ°ä½¿ç”¨ Redis Hashï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¯¹è±¡&lt;/strong&gt;ï¼šHash éå¸¸é€‚åˆå­˜å‚¨åƒç”¨æˆ·ä¿¡æ¯ã€å•†å“å±æ€§è¿™æ ·çš„å¯¹è±¡ã€‚å¦‚æœä½ çš„å¯¹è±¡å­—æ®µä¸å¤šä¸”å€¼è¾ƒå°ï¼ŒRedis ä¼šè‡ªåŠ¨ä½¿ç”¨ listpackï¼Œéå¸¸èŠ‚çœå†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´­ç‰©è½¦&lt;/strong&gt;ï¼šä»¥ç”¨æˆ·IDä¸ºkeyï¼Œå•†å“IDä¸ºfieldï¼Œå•†å“æ•°é‡ä¸ºvalueï¼Œå¯ä»¥å®Œç¾æ¨¡æ‹Ÿè´­ç‰©è½¦åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢‘ç¹æ›´æ–°çš„é…ç½®æˆ–è®¡æ•°å™¨&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;code&gt;HINCRBY&lt;/code&gt;ç­‰å‘½ä»¤å¯ä»¥å¯¹å•ä¸ªå­—æ®µè¿›è¡ŒåŸå­æ€§æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ Redis Hash çš„å·¥ä½œåŸç†ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç‰ˆæœ¬çš„ç»†èŠ‚æˆ–è€…æŸä¸ªæœºåˆ¶æƒ³æœ‰æ›´æ·±å…¥çš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ask"&gt;ASK
&lt;/h2&gt;&lt;p&gt;åœ¨ Redis Cluster ä¸­ï¼Œ&lt;strong&gt;ASK é‡å®šå‘&lt;/strong&gt;æ˜¯ä¸€ç§å…³é”®æœºåˆ¶ï¼Œå®ƒä¸»è¦åœ¨æ‰§è¡Œæ•°æ®è¿ç§»ï¼ˆå¦‚é›†ç¾¤æ‰©å®¹æˆ–ç¼©å®¹ï¼‰æ—¶è¢«è§¦å‘ï¼Œç”¨äºä¸´æ—¶æŒ‡å¼•å®¢æˆ·ç«¯å°†è¯·æ±‚å‘é€åˆ°æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œä»è€Œä¿è¯æ•°æ®æ“ä½œä¸ä¼šå› æ§½ä½è¿ç§»è€Œä¸­æ–­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹è¡¨å¯¹æ¯”äº† ASK é‡å®šå‘å’Œ MOVED é‡å®šå‘è¿™ä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”é¡¹&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ASK é‡å®šå‘ (ä¸´æ—¶)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MOVED é‡å®šå‘ (æ°¸ä¹…)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œæ§½ï¼ˆHash Slotï¼‰&lt;strong&gt;æ­£åœ¨è¿ç§»è¿‡ç¨‹ä¸­&lt;/strong&gt;ï¼Œæ•°æ®å¯èƒ½åˆ†å±æ–°æ—§ä¸¤ä¸ªèŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œæ§½çš„å½’å±æƒå·²ç»&lt;strong&gt;æ°¸ä¹…æ€§åœ°å˜æ›´&lt;/strong&gt;åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä¾‹å¦‚é›†ç¾¤æ‰©å®¹å®Œæˆæˆ–èŠ‚ç‚¹ä¸‹çº¿åé‡æ–°å¹³è¡¡ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸´æ—¶æ€§&lt;/strong&gt;æŒ‡ä»¤ã€‚ä»…å¯¹å½“å‰è¿™ä¸€æ¬¡å‘½ä»¤è¯·æ±‚æœ‰æ•ˆã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ°¸ä¹…æ€§&lt;/strong&gt;æŒ‡ä»¤ã€‚æ„å‘³ç€å®¢æˆ·ç«¯åº”è¯¥æ›´æ–°æœ¬åœ°ç¼“å­˜çš„æ§½ä½æ˜ å°„å…³ç³»ï¼Œåç»­æ‰€æœ‰å¯¹è¯¥æ§½çš„è¯·æ±‚éƒ½åº”ç›´æ¥å‘å¾€æ–°èŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®¢æˆ·ç«¯è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. å…ˆå‘ç›®æ ‡èŠ‚ç‚¹å‘é€ &lt;code&gt;ASKING&lt;/code&gt;å‘½ä»¤ï¼Œå‘ŠçŸ¥å…¶æ­¤æ¬¡è¯·æ±‚æ˜¯æºäºASKé‡å®šå‘ã€‚ 2. æ¥ç€å‘é€åŸæœ¬çš„å‘½ä»¤ã€‚ 3. &lt;strong&gt;ä¸æ›´æ–°&lt;/strong&gt;æœ¬åœ°ç¼“å­˜çš„æ§½ä½æ˜ å°„è¡¨ã€‚&lt;/td&gt;
&lt;td&gt;1. ç›´æ¥å‘MOVEDå›å¤ä¸­æŒ‡å®šçš„æ–°èŠ‚ç‚¹å‘é€å‘½ä»¤ã€‚ 2. &lt;strong&gt;æ›´æ–°&lt;/strong&gt;æœ¬åœ°ç¼“å­˜çš„æ§½ä½ä¸èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ï¼Œåç»­è¯·æ±‚ç›´æ¥å‘å¾€æ–°èŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£-ask-é‡å®šå‘çš„æµç¨‹"&gt;ğŸ” æ·±å…¥ç†è§£ ASK é‡å®šå‘çš„æµç¨‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾é›†ç¾¤æ­£åœ¨å°†æ§½ 5000 ä»èŠ‚ç‚¹Aè¿ç§»åˆ°èŠ‚ç‚¹Bï¼Œå¹¶ä¸”æŸä¸ªé”® &lt;code&gt;key1&lt;/code&gt;å·²ç»è¢«è¿ç§»åˆ°äº†èŠ‚ç‚¹Bï¼Œä½†é›†ç¾¤å…ƒæ•°æ®å°šæœªæ›´æ–°ï¼Œæ§½5000åœ¨å…¨å±€è§†è§’ä¸‹ä»ç”±èŠ‚ç‚¹Aè´Ÿè´£ã€‚æ­¤æ—¶è‹¥å®¢æˆ·ç«¯è¯·æ±‚ &lt;code&gt;key1&lt;/code&gt;ï¼Œä¼šè§¦å‘ä»¥ä¸‹æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯è¯·æ±‚&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å‘èŠ‚ç‚¹Aå‘é€ &lt;code&gt;GET key1&lt;/code&gt;å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹Aæ£€æŸ¥&lt;/strong&gt;ï¼šèŠ‚ç‚¹Aå‘ç°æ§½5000æ­£åœ¨è¿ç§»ï¼Œä¸” &lt;code&gt;key1&lt;/code&gt;å·²ç»ä¸åœ¨è‡ªå·±è¿™é‡Œäº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›ASKé”™è¯¯&lt;/strong&gt;ï¼šèŠ‚ç‚¹Aå‘å®¢æˆ·ç«¯å›å¤ &lt;code&gt;-ASK 5000 èŠ‚ç‚¹Bçš„IP:ç«¯å£&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯ä¸´æ—¶é‡å®šå‘&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ ¹æ®ASKå“åº”ï¼Œ&lt;strong&gt;ä¸´æ—¶è¿æ¥&lt;/strong&gt;åˆ°èŠ‚ç‚¹Bã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘èŠ‚ç‚¹Bå…ˆå‘é€ä¸€ä¸ª &lt;code&gt;ASKING&lt;/code&gt;å‘½ä»¤ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…è¦çš„æ­¥éª¤ï¼Œç”¨äºå‘Šè¯‰èŠ‚ç‚¹Bâ€œæˆ‘çŸ¥é“è¿™ä¸ªæ§½è¿˜ä¸å½’ä½ ç®¡ï¼Œä½†è¯·ç ´ä¾‹å¤„ç†è¿™æ¬¡è¯·æ±‚â€ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ç€ï¼Œå®¢æˆ·ç«¯å†å‘é€ &lt;code&gt;GET key1&lt;/code&gt;å‘½ä»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹Bå“åº”&lt;/strong&gt;ï¼šèŠ‚ç‚¹Bæ‰§è¡Œå‘½ä»¤å¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒè¦ç‚¹ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ æ ¸å¿ƒè¦ç‚¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸MOVEDçš„åŒºåˆ«æ˜¯å…³é”®&lt;/strong&gt;ï¼šåŠ¡å¿…ç†è§£ASKæ˜¯&lt;strong&gt;ä¸´æ—¶æ€§&lt;/strong&gt;çš„ï¼Œå‘ç”Ÿåœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼›è€ŒMOVEDæ˜¯&lt;strong&gt;æ°¸ä¹…æ€§&lt;/strong&gt;çš„ï¼Œå‘ç”Ÿåœ¨è¿ç§»å®Œæˆã€é›†ç¾¤æ‹“æ‰‘ç¨³å®šåã€‚å®¢æˆ·ç«¯å¤„ç†é€»è¾‘çš„ä¸åŒæ˜¯é¿å…è¯·æ±‚é”™è¯¯çš„æ ¸å¿ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½å®¢æˆ·ç«¯çš„ä½œç”¨&lt;/strong&gt;ï¼šä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„Redisé›†ç¾¤å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å¤„ç†ASKå’ŒMOVEDé‡å®šå‘ã€‚å®ƒä¼šåœ¨æœ¬åœ°ç»´æŠ¤ä¸€ä¸ªâ€œæ§½ä½-èŠ‚ç‚¹â€çš„æ˜ å°„ç¼“å­˜ï¼Œä»¥å°½é‡å‡å°‘é‡å®šå‘çš„å‘ç”Ÿã€‚å½“æ”¶åˆ°MOVEDå“åº”æ—¶ï¼Œå®ƒä¼šæ›´æ–°è¿™ä¸ªç¼“å­˜ï¼›è€Œå½“æ”¶åˆ°ASKå“åº”æ—¶ï¼Œå®ƒåˆ™ä¸ä¼šæ›´æ–°ç¼“å­˜ï¼Œåªæ˜¯ä¸´æ—¶è½¬å‘è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ Redis ASK é‡å®šå‘çš„æœºåˆ¶ï¼å¦‚æœä½ å¯¹é›†ç¾¤æ•°æ®è¿ç§»çš„å…·ä½“æ­¥éª¤æˆ–å…¶ä»–æ–¹é¢è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;p&gt;å½“Redisé›†ç¾¤ä¸­èŠ‚ç‚¹Aå‘ç°æ§½5000æ­£åœ¨è¿ç§»ï¼Œä½†å®¢æˆ·ç«¯è¯·æ±‚çš„&lt;code&gt;key1&lt;/code&gt;ä»ç„¶å­˜åœ¨äºèŠ‚ç‚¹Aä¸Šæ—¶ï¼ŒèŠ‚ç‚¹Aä¼š&lt;strong&gt;ç›´æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚&lt;/strong&gt;ï¼Œå°±åƒè¿ç§»æ²¡æœ‰å‘ç”Ÿä¸€æ ·ã€‚è¿™ä¸ªç²¾å¦™çš„è®¾è®¡ç¡®ä¿äº†åœ¨æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å¯ä»¥æŒç»­ä¸ä¸­æ–­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å¯¹æ¯”äº†åœ¨æ§½è¿ç§»è¿‡ç¨‹ä¸­ï¼ŒæºèŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹Aï¼‰é¢å¯¹ä¸åŒæƒ…å†µæ—¶ä¼šé‡‡å–çš„è¡ŒåŠ¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¯·æ±‚çš„ Key çŠ¶æ€&lt;/th&gt;
&lt;th&gt;æºèŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹Aï¼‰çš„è¡Œä¸º&lt;/th&gt;
&lt;th&gt;å¯¹å®¢æˆ·ç«¯çš„å½±å“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Key ä»åœ¨æºèŠ‚ç‚¹&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;key1&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥å¤„ç†&lt;/strong&gt;è¯»å†™å‘½ä»¤ï¼Œå¹¶è¿”å›æ­£å¸¸ç»“æœã€‚&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯æ— æ„ŸçŸ¥ï¼Œä½“éªŒä¸è¿ç§»å‰å®Œå…¨ä¸€è‡´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Key å·²è¿è‡³ç›®æ ‡èŠ‚ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å› &lt;strong&gt;&lt;code&gt;ASK&lt;/code&gt;é‡å®šå‘&lt;/strong&gt;é”™è¯¯ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯ç›®æ ‡èŠ‚ç‚¹çš„åœ°å€ã€‚&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯éœ€ä¸´æ—¶è½¬å‘ç›®æ ‡èŠ‚ç‚¹æ‰§è¡Œå‘½ä»¤ï¼Œä½†ä¸ä¼šæ›´æ–°æœ¬åœ°ç¼“å­˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Key ä¸å­˜åœ¨äºé›†ç¾¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å¯¹åº”çš„é”™è¯¯å“åº”ï¼ˆå¦‚å¯¹äº &lt;code&gt;GET&lt;/code&gt;å‘½ä»¤ï¼Œè¿”å› &lt;code&gt;(nil)&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯æ”¶åˆ°æ­£å¸¸é”™è¯¯ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-èŠ‚ç‚¹açš„å¤„ç†é€»è¾‘è¯¦è§£"&gt;ğŸ” èŠ‚ç‚¹Açš„å¤„ç†é€»è¾‘è¯¦è§£
&lt;/h3&gt;&lt;p&gt;å½“å®¢æˆ·ç«¯å‘èŠ‚ç‚¹Aå‘é€ä¸€ä¸ªé’ˆå¯¹&lt;code&gt;key1&lt;/code&gt;çš„è¯·æ±‚æ—¶ï¼ŒèŠ‚ç‚¹Aå†…éƒ¨ä¼šè§¦å‘ä¸€ä¸ªä¸¥è°¨çš„æ£€æŸ¥æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—ä¸å®šä½&lt;/strong&gt;ï¼šèŠ‚ç‚¹Aé¦–å…ˆä¼šè®¡ç®—&lt;code&gt;key1&lt;/code&gt;å¯¹åº”çš„å“ˆå¸Œæ§½ï¼Œç¡®è®¤å®ƒå±äºæ­£åœ¨è¿ç§»çš„æ§½5000ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°æŸ¥æ‰¾&lt;/strong&gt;ï¼šæ¥ç€ï¼ŒèŠ‚ç‚¹Aä¼šåœ¨è‡ªå·±çš„æ•°æ®åº“ä¸­æŸ¥æ‰¾&lt;code&gt;key1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›´æ¥å¤„ç†&lt;/strong&gt;ï¼šç”±äº&lt;code&gt;key1&lt;/code&gt;å°šæœªè¿ç§»ï¼Œä»ç„¶å­˜åœ¨äºèŠ‚ç‚¹Aä¸Šï¼ŒèŠ‚ç‚¹Aä¾¿ä¼š&lt;strong&gt;ç›´æ¥æ‰§è¡Œ&lt;/strong&gt;å®¢æˆ·ç«¯å‘æ¥çš„å‘½ä»¤ï¼ˆä¾‹å¦‚è¯»å–&lt;code&gt;key1&lt;/code&gt;çš„å€¼æˆ–æ›´æ–°&lt;code&gt;key1&lt;/code&gt;çš„å€¼ï¼‰ï¼Œå¹¶å°†ç»“æœæ­£å¸¸è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªæœºåˆ¶çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼Œåªè¦æ•°æ®è¿˜åœ¨â€œè€å®¶â€ï¼Œè®¿é—®å°±ä¸ä¼šæœ‰ä»»ä½•é¢å¤–çš„å¼€é”€å’Œå»¶è¿Ÿï¼Œä¸šåŠ¡å¯ä»¥å¹³æ»‘è¿è¡Œã€‚&lt;/p&gt;
&lt;h3 id="-æ·±å…¥ç†è§£askä¸movedçš„åŒºåˆ«"&gt;ğŸ’¡ æ·±å…¥ç†è§£ï¼šASKä¸MOVEDçš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;ç†è§£èŠ‚ç‚¹Açš„ä¸Šè¿°è¡Œä¸ºï¼Œå…³é”®åœ¨äºåŒºåˆ†Redisé›†ç¾¤çš„ä¸¤ç§é‡å®šå‘æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ASK&lt;/code&gt;é‡å®šå‘ï¼ˆä¸´æ—¶æŒ‡è·¯ç‰Œï¼‰&lt;/strong&gt;ï¼šè¿™æ­£æ˜¯åœ¨æ•°æ®&lt;strong&gt;è¿ç§»è¿‡ç¨‹ä¸­&lt;/strong&gt;ä½¿ç”¨çš„æœºåˆ¶ã€‚å®ƒä»…ä»…æ˜¯å‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€œè¿™æ¬¡ä½ è¦çš„æ•°æ®ä¸åœ¨æˆ‘è¿™äº†ï¼Œä½ &lt;strong&gt;ä¸´æ—¶&lt;/strong&gt;å»æ–°èŠ‚ç‚¹é—®é—®çœ‹ã€‚â€ å®¢æˆ·ç«¯ä¼šå¬ä»æŒ‡å¼•ï¼Œä½†å¿ƒé‡Œæ˜ç™½è¿™åªæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸‹æ¬¡è¯·æ±‚åŒæ ·æ§½çš„æ•°æ®ï¼Œè¿˜æ˜¯ä¼šå…ˆæ¥é—®èŠ‚ç‚¹Aï¼Œå› ä¸ºæ§½5000çš„&lt;strong&gt;æ³•å®šè´Ÿè´£äººä¾ç„¶æ˜¯èŠ‚ç‚¹A&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯&lt;strong&gt;ä¸ä¼šæ›´æ–°&lt;/strong&gt;è‡ªå·±æœ¬åœ°ç»´æŠ¤çš„â€œæ§½ä½-èŠ‚ç‚¹â€æ˜ å°„ç¼“å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;MOVED&lt;/code&gt;é‡å®šå‘ï¼ˆæ°¸ä¹…æ¬å®¶é€šçŸ¥ï¼‰&lt;/strong&gt;ï¼šå½“æ•´ä¸ªæ§½5000çš„æ•°æ®&lt;strong&gt;å…¨éƒ¨è¿ç§»å®Œæ¯•&lt;/strong&gt;ï¼Œå¹¶ä¸”é›†ç¾¤å…ƒæ•°æ®æ­£å¼æ›´æ–°åï¼Œå¦‚æœå®¢æˆ·ç«¯å†å‘èŠ‚ç‚¹Aè¯·æ±‚æ§½5000çš„ä»»ä½•æ•°æ®ï¼ŒèŠ‚ç‚¹Aä¼šå›å¤&lt;code&gt;MOVED&lt;/code&gt;é”™è¯¯ã€‚è¿™æ„å‘³ç€ï¼šâ€œè¿™ä¸ªæ§½å·²ç»&lt;strong&gt;æ°¸ä¹…&lt;/strong&gt;åœ°æ¬åˆ°æ–°èŠ‚ç‚¹äº†ï¼Œä½ ä»¥åéƒ½ç›´æ¥å»é‚£å„¿å§ï¼â€ å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œå°±ä¼š&lt;strong&gt;æ›´æ–°æœ¬åœ°ç¼“å­˜&lt;/strong&gt;ï¼Œä¹‹åæ‰€æœ‰é’ˆå¯¹è¯¥æ§½çš„è¯·æ±‚éƒ½ä¼šç›´æ¥å‘å¾€æ–°èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒRedisé›†ç¾¤åœ¨æ•°æ®è¿ç§»æ—¶æ‰®æ¼”äº†ä¸€ä¸ªéå¸¸èªæ˜çš„â€œäº¤é€šæŒ‡æŒ¥å‘˜â€è§’è‰²ã€‚å®ƒçš„åŸºæœ¬åŸåˆ™æ˜¯ï¼š&lt;strong&gt;è°å½“å‰æŒæœ‰æ•°æ®ï¼Œè°å°±è´Ÿè´£å“åº”è¯·æ±‚&lt;/strong&gt;ã€‚åªè¦&lt;code&gt;key1&lt;/code&gt;è¿˜å®‰ç¨³åœ°å¾…åœ¨èŠ‚ç‚¹Aä¸Šï¼ŒèŠ‚ç‚¹Aå°±ä¼šå°½èŒå°½è´£åœ°å®Œæˆæ‰€æœ‰å·¥ä½œï¼Œç¡®ä¿ä½ çš„ä¸šåŠ¡è®¿é—®ä¸å—å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£Redisé›†ç¾¤çš„è¿™éƒ¨åˆ†æœºåˆ¶ï¼å¦‚æœä½ å¯¹è¿ç§»è¿‡ç¨‹çš„å…¶ä»–ç»†èŠ‚æˆ–è€…å®¢æˆ·ç«¯çš„å…·ä½“è¡Œä¸ºæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ziplist"&gt;ziplist
&lt;/h2&gt;&lt;p&gt;Redis çš„ ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰æ˜¯ä¸€ç§ä¸ºæè‡´èŠ‚çœå†…å­˜è€Œè®¾è®¡çš„ç‰¹æ®Šé¡ºåºå‹æ•°æ®ç»“æ„ã€‚å®ƒé€šè¿‡å°†æ•°æ®å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜å—ä¸­ï¼Œæœ‰æ•ˆå‡å°‘äº†å†…å­˜ç¢ç‰‡ï¼Œå¹¶è¢«å¹¿æ³›ç”¨äºå­˜å‚¨å°å‹åˆ—è¡¨ã€å“ˆå¸Œå’Œæœ‰åºé›†åˆã€‚ä»¥ä¸‹æ˜¯å¯¹å…¶ç»“æ„çš„è¯¦ç»†åˆ†è§£ã€‚&lt;/p&gt;
&lt;h3 id="-æ•´ä½“å¸ƒå±€"&gt;ğŸ§  æ•´ä½“å¸ƒå±€
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ª ziplist åœ¨é€»è¾‘ä¸Šæ˜¯ä¸€å¤§å—è¿ç»­çš„å†…å­˜ï¼Œå…¶æ•´ä½“ç»“æ„ç”±äº”ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹è¡¨å¿«é€Ÿäº†è§£å…¶æ¦‚è¦ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»„æˆéƒ¨åˆ†&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é•¿åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç”¨é€”è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;zlbytes&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;uint32_t&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;4 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;è®°å½•æ•´ä¸ª ziplist å ç”¨çš„å†…å­˜æ€»å­—èŠ‚æ•°ã€‚ç”¨äºå†…å­˜é‡åˆ†é…æˆ–å¿«é€Ÿå®šä½æœ«ç«¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;zltail&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;uint32_t&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;4 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;è®°å½•åˆ—è¡¨å°¾èŠ‚ç‚¹ï¼ˆentryï¼‰è·ç¦» ziplist èµ·å§‹åœ°å€çš„åç§»é‡ï¼ˆå­—èŠ‚æ•°ï¼‰ã€‚å€ŸåŠ©æ­¤å­—æ®µï¼Œæ— éœ€éå†å³å¯ç›´æ¥å®šä½è¡¨å°¾ï¼Œä»è€Œåœ¨ O(1) å¤æ‚åº¦ä¸‹è¿›è¡Œ &lt;code&gt;pop&lt;/code&gt;æ“ä½œæˆ–åå‘éå†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;zllen&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;uint16_t&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;2 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;è®°å½• ziplist ä¸­å½“å‰åŒ…å«çš„èŠ‚ç‚¹æ•°é‡ã€‚å½“èŠ‚ç‚¹æ•°å°äº 65535 (UINT16_MAX) æ—¶ï¼Œæ­¤å€¼å³ä¸ºçœŸå®æ•°é‡ï¼›è‹¥ç­‰äº 65535ï¼Œåˆ™éœ€è¦éå†æ•´ä¸ªåˆ—è¡¨æ‰èƒ½è®¡ç®—å‡ºçœŸå®æ•°é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;entryX&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;ä¸å®šé•¿&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å®é™…æ•°æ®çš„èŠ‚ç‚¹ï¼Œå¯ä»¥æœ‰å¤šä¸ªã€‚æ¯ä¸ªèŠ‚ç‚¹çš„é•¿åº¦ç”±å…¶ä¿å­˜çš„å†…å®¹å†³å®šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;zlend&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;uint8_t&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;ziplist çš„ç»“æŸæ ‡è®°ï¼Œå€¼å›ºå®šä¸º &lt;code&gt;0xFF&lt;/code&gt;(255)ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-èŠ‚ç‚¹entryçš„å†…éƒ¨æ„é€ "&gt;ğŸ” èŠ‚ç‚¹ï¼ˆEntryï¼‰çš„å†…éƒ¨æ„é€ 
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ªèŠ‚ç‚¹ï¼ˆentryï¼‰æ˜¯ ziplist çœŸæ­£å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼Œå…¶è‡ªèº«ç»“æ„ä¹Ÿç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œè®¾è®¡å¾—éå¸¸ç²¾å·§ä»¥èŠ‚çœç©ºé—´ï¼š&lt;code&gt;&amp;lt;prevlen&amp;gt; &amp;lt;encoding&amp;gt; &amp;lt;entry-data&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id="1-å‰é©±èŠ‚ç‚¹é•¿åº¦-"&gt;1. &lt;strong&gt;å‰é©±èŠ‚ç‚¹é•¿åº¦ (&lt;code&gt;prevlen&lt;/code&gt;)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ä¸ªå­—æ®µæ˜¯ä¸ºäº†å®ç°ä»å°¾å‘å¤´çš„&lt;strong&gt;åå‘éå†&lt;/strong&gt;è€Œè®¾è®¡çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç è§„åˆ™&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;å‰ä¸€ä¸ªèŠ‚ç‚¹çš„é•¿åº¦å°äº 254 å­—èŠ‚&lt;/strong&gt;ï¼Œåˆ™ &lt;code&gt;prevlen&lt;/code&gt;å ç”¨ &lt;strong&gt;1 ä¸ªå­—èŠ‚&lt;/strong&gt;ï¼Œç›´æ¥å­˜å‚¨è¯¥é•¿åº¦å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;å‰ä¸€ä¸ªèŠ‚ç‚¹çš„é•¿åº¦å¤§äºç­‰äº 254 å­—èŠ‚&lt;/strong&gt;ï¼Œåˆ™ &lt;code&gt;prevlen&lt;/code&gt;å ç”¨ &lt;strong&gt;5 ä¸ªå­—èŠ‚&lt;/strong&gt;ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚è¢«å›ºå®šè®¾ç½®ä¸º &lt;code&gt;0xFE&lt;/code&gt;(254) ä½œä¸ºæ ‡å¿—ï¼Œåç»­å››ä¸ªå­—èŠ‚ç”¨äºå­˜å‚¨å‰ä¸€ä¸ªèŠ‚ç‚¹çš„å®é™…é•¿åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ç¼–ç æ–¹å¼-"&gt;2. &lt;strong&gt;ç¼–ç æ–¹å¼ (&lt;code&gt;encoding&lt;/code&gt;)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;encoding&lt;/code&gt;å­—æ®µæŒ‡æ˜äº†åç»­ &lt;code&gt;entry-data&lt;/code&gt;æ‰€å­˜å‚¨æ•°æ®çš„&lt;strong&gt;ç±»å‹ï¼ˆæ•´æ•°æˆ–å­—èŠ‚æ•°ç»„ï¼‰åŠå…¶é•¿åº¦&lt;/strong&gt;ã€‚Redis ä¸ºæ­¤è®¾è®¡äº†ä¸€å¥—å¤æ‚çš„å˜é•¿ç¼–ç è§„åˆ™ï¼Œä»¥æ ¹æ®æ•°æ®æœ¬èº«çš„å¤§å°æ¥åŠ¨æ€è°ƒæ•´ &lt;code&gt;encoding&lt;/code&gt;å ç”¨çš„å­—èŠ‚æ•°ï¼Œä»è€Œæè‡´åœ°èŠ‚çº¦å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼å±•ç¤ºäº†ä¸»è¦çš„ç¼–ç æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç¼–ç ï¼ˆç¤ºä¾‹ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é•¿åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;00pppppp&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;å 6 ä½ &lt;code&gt;pppppp&lt;/code&gt;è¡¨ç¤ºé•¿åº¦ï¼Œå¯å­˜å‚¨é•¿åº¦ â‰¤ 63 çš„å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;01pppppp qqqqqqqq&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;å…± 14 ä½è¡¨ç¤ºé•¿åº¦ï¼Œå¯å­˜å‚¨é•¿åº¦ â‰¤ 16383 çš„å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;10000000 ...&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;5 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;å 4 å­—èŠ‚è¡¨ç¤ºé•¿åº¦ï¼Œå¯å­˜å‚¨éå¸¸å¤§çš„å­—ç¬¦ä¸²ï¼ˆæœ€å¤§ 2^32-1ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;11000000&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;æ•´æ•°&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºåé¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ª &lt;code&gt;int16_t&lt;/code&gt;ç±»å‹çš„æ•´æ•°ï¼ˆ2 å­—èŠ‚ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;11010000&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;æ•´æ•°&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºåé¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ª &lt;code&gt;int32_t&lt;/code&gt;ç±»å‹çš„æ•´æ•°ï¼ˆ4 å­—èŠ‚ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;11100000&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;æ•´æ•°&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºåé¢å­˜å‚¨çš„æ˜¯ä¸€ä¸ª &lt;code&gt;int64_t&lt;/code&gt;ç±»å‹çš„æ•´æ•°ï¼ˆ8 å­—èŠ‚ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;11110000&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;æ•´æ•°&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ 24 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆ3 å­—èŠ‚ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;11111110&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;æ•´æ•°&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ 8 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆ1 å­—èŠ‚ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;1111xxxx&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;æ•´æ•°&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‰¹æ®Šæƒ…å†µ&lt;/strong&gt;ï¼š&lt;code&gt;xxxx&lt;/code&gt;çš„èŒƒå›´æ˜¯ 0001 åˆ° 1101ï¼Œå®ƒç›´æ¥è¡¨ç¤ºäº†ä¸€ä¸ª 0 åˆ° 12 ä¹‹é—´çš„æ•´æ•°ã€‚ç”±äºæ•°æ®è¢«å†…åµŒåœ¨ç¼–ç ä¸­ï¼Œå› æ­¤&lt;strong&gt;æ²¡æœ‰å•ç‹¬çš„ &lt;code&gt;entry-data&lt;/code&gt;éƒ¨åˆ†&lt;/strong&gt;ï¼Œè¿™æ˜¯éå¸¸æè‡´çš„ä¼˜åŒ–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="3-å®é™…æ•°æ®-"&gt;3. &lt;strong&gt;å®é™…æ•°æ® (&lt;code&gt;entry-data&lt;/code&gt;)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¯¥éƒ¨åˆ†å­˜å‚¨çœŸæ­£çš„æ•°æ®å€¼ï¼Œå¯ä»¥æ˜¯å­—èŠ‚æ•°ç»„ï¼ˆå­—ç¬¦ä¸²ï¼‰æˆ–æ•´æ•°å€¼ï¼Œå…¶ç±»å‹å’Œé•¿åº¦ç”± &lt;code&gt;encoding&lt;/code&gt;å­—æ®µå†³å®šã€‚&lt;/p&gt;
&lt;h3 id="-è¿é”æ›´æ–°é—®é¢˜-1"&gt;âš ï¸ è¿é”æ›´æ–°é—®é¢˜
&lt;/h3&gt;&lt;p&gt;ziplist çš„ä¸€ä¸ªè‘—åç¼ºç‚¹æ˜¯&lt;strong&gt;è¿é”æ›´æ–°&lt;/strong&gt;ã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼šä¸€ä¸ª ziplist ä¸­å­˜åœ¨å¤šä¸ªè¿ç»­çš„ã€é•¿åº¦ä»‹äº 250 å­—èŠ‚åˆ° 253 å­—èŠ‚ä¹‹é—´çš„èŠ‚ç‚¹ï¼ˆE1, E2, &amp;hellip; Enï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ’å…¥æ“ä½œ&lt;/strong&gt;ï¼šå¦‚æœåœ¨åˆ—è¡¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªé•¿åº¦ â‰¥ 254 å­—èŠ‚çš„æ–°èŠ‚ç‚¹ï¼Œç´§æŒ¨å…¶åçš„åŸç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆE1ï¼‰çš„ &lt;code&gt;prevlen&lt;/code&gt;éœ€è¦ä» 1 å­—èŠ‚æ‰©å±•ä¸º 5 å­—èŠ‚ã€‚è¿™å¯¼è‡´ E1 çš„æ€»é•¿åº¦å¢åŠ åˆ° 254-257 å­—èŠ‚ä¹‹é—´ï¼Œè¿›è€Œåˆå¯¼è‡´ E2 çš„ &lt;code&gt;prevlen&lt;/code&gt;éœ€è¦æ‰©å±•â€¦â€¦å¦‚æ­¤è¿é”ååº”ï¼Œå¯èƒ½éœ€è¦å¯¹åç»­å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œå¤šæ¬¡å†…å­˜é‡åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤æ“ä½œ&lt;/strong&gt;ï¼šåˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹åŒæ ·å¯èƒ½å¼•å‘ç±»ä¼¼çš„é—®é¢˜ï¼Œå¦‚æœè¯¥åˆ é™¤æ“ä½œå¯¼è‡´åç»­èŠ‚ç‚¹éœ€è¦æ‰©å±• &lt;code&gt;prevlen&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å°½ç®¡è¿é”æ›´æ–°çš„æœ€åæ—¶é—´å¤æ‚åº¦æ˜¯ O(N^2)ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ&lt;strong&gt;é€ æˆä¸¥é‡æ€§èƒ½é—®é¢˜çš„æ¦‚ç‡å¾ˆä½&lt;/strong&gt;ã€‚å› ä¸ºéœ€è¦æ°å¥½æœ‰å¤šä¸ªè¿ç»­ä¸”é•¿åº¦åœ¨ä¸´ç•Œå€¼é™„è¿‘çš„èŠ‚ç‚¹æ‰å¯èƒ½è§¦å‘ï¼Œä¸”åªè¦éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹æ•°é‡ä¸å¤šï¼Œå½±å“å°±æœ‰é™ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸æ¼”è¿›"&gt;ğŸ’ æ€»ç»“ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;ziplist æ˜¯ Redis è¿½æ±‚å­˜å‚¨æ•ˆç‡çš„å…¸èŒƒï¼Œå®ƒé€šè¿‡&lt;strong&gt;è¿ç»­å­˜å‚¨&lt;/strong&gt;å’Œ&lt;strong&gt;å˜é•¿ç¼–ç &lt;/strong&gt;æå¤§åœ°èŠ‚çº¦äº†å†…å­˜ã€‚ç„¶è€Œï¼Œå…¶ç´§å‡‘çš„ç»“æ„ä¹Ÿå¸¦æ¥äº†ä¿®æ”¹æ•ˆç‡çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯è¿é”æ›´æ–°é£é™©ã€‚&lt;strong&gt;æ­£å› ä¸ºå¦‚æ­¤ï¼Œåœ¨ Redis 7.0 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œziplist å·²è¢«ä¸€ç§åä¸º listpack çš„æ–°æ•°æ®ç»“æ„æ‰€å–ä»£&lt;/strong&gt;ã€‚listpack é€šè¿‡ä¿®æ”¹èŠ‚ç‚¹ç»“æ„ï¼ˆå°†è®°å½•å‰ä¸€ä¸ªèŠ‚ç‚¹é•¿åº¦æ”¹ä¸ºè®°å½•è‡ªèº«ç¼–ç å’Œæ•°æ®çš„é•¿åº¦ï¼‰ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†è¿é”æ›´æ–°çš„é—®é¢˜ï¼Œåœ¨ä¿æŒé«˜å†…å­˜æ•ˆç‡çš„åŒæ—¶æä¾›äº†æ›´ç¨³å®šçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£æèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ ziplistã€‚å¦‚æœå¯¹æŸä¸ªç»†èŠ‚è¿˜æƒ³æ·±å…¥æ¢è®¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­äº¤æµã€‚&lt;/p&gt;
&lt;h2 id="ä¼˜åŒ–ç­–ç•¥"&gt;ä¼˜åŒ–ç­–ç•¥
&lt;/h2&gt;&lt;p&gt;æ‚¨æåˆ°çš„è¿™ä¸ªç°è±¡ç¡®å®æ˜¯ Redis å†…å­˜ä¼˜åŒ–ä¸­çš„ä¸€ä¸ªç»å…¸ç­–ç•¥ã€‚Hash ç±»å‹å¯¹å°é”®å€¼å¯¹ä½¿ç”¨ ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰ç¼–ç ï¼Œä¹‹æ‰€ä»¥èƒ½æ˜¾è‘—é™ä½å†…å­˜å¼€é”€ï¼Œæ ¸å¿ƒåœ¨äºå®ƒç”¨ &lt;strong&gt;â€œç©ºé—´è¿ç»­æ€§â€&lt;/strong&gt; æ¢å–äº† &lt;strong&gt;â€œç»“æ„å…ƒæ•°æ®å¼€é”€â€&lt;/strong&gt;ï¼Œå¹¶ä¸”ä¼˜åŒ–äº†å°å‹æ•°æ®çš„å­˜å‚¨æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å¯¹æ¯”äº† ziplist å’Œ hashtable è¿™ä¸¤ç§åº•å±‚ç¼–ç åœ¨å­˜å‚¨å°é”®å€¼å¯¹æ—¶çš„æ ¸å¿ƒå·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰é”®å€¼å¯¹é¡ºåºå­˜å‚¨åœ¨&lt;strong&gt;ä¸€å—è¿ç»­å†…å­˜&lt;/strong&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨æŒ‡é’ˆè¿æ¥&lt;strong&gt;åˆ†æ•£çš„ç‹¬ç«‹å†…å­˜å—&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒæ•°æ®å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä½ã€‚æ¯ä¸ª entry ä»…éœ€å­˜å‚¨å°‘é‡é•¿åº¦ä¿¡æ¯ï¼Œ&lt;strong&gt;æ— éœ€æŒ‡é’ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¾ˆé«˜ã€‚æ¯ä¸ªé”®å€¼å¯¹éƒ½ä¼´éšå®Œæ•´çš„ &lt;code&gt;redisObject&lt;/code&gt;å’Œå­—å…¸é¡¹ç»“æ„ï¼Œäº§ç”Ÿå¤§é‡å›ºå®šå¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¸ƒå±€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´§å‡‘ï¼Œ&lt;strong&gt;æœ‰æ•ˆå‡å°‘å†…å­˜ç¢ç‰‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ†æ•£ï¼Œå®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¿æ€§éå†ï¼ˆæ•°æ®é‡å°æ—¶æ•ˆç‡å°šå¯ï¼‰&lt;/td&gt;
&lt;td&gt;é€šè¿‡å“ˆå¸Œå‡½æ•°ç›´æ¥å®šä½ï¼ˆO(1)æ—¶é—´å¤æ‚åº¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å…ƒæ•°æ®å¼€é”€å»å“ªäº†"&gt;ğŸ§  æ·±å…¥ç†è§£ï¼šå…ƒæ•°æ®å¼€é”€å»å“ªäº†ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è¦ç†è§£ä¸ºä»€ä¹ˆèŠ‚çœèƒ½è¾¾åˆ°â€œçº¦90å­—èŠ‚â€çš„é‡çº§ï¼Œæˆ‘ä»¬éœ€è¦çœ‹çœ‹åœ¨ä¼ ç»Ÿçš„ hashtable ç¼–ç ä¸‹ï¼Œå†…å­˜éƒ½èŠ±åœ¨äº†å“ªé‡Œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;redisObject å¼€é”€&lt;/strong&gt;ï¼šRedis ä¸­æ¯ä¸ªç‹¬ç«‹çš„é”®å’Œå€¼éƒ½ä¼šè¢«å°è£…æˆä¸€ä¸ª &lt;code&gt;redisObject&lt;/code&gt;ç»“æ„ä½“ã€‚è¿™ä¸ªç»“æ„ä½“æœ¬èº«å°±éœ€è¦å ç”¨çº¦ &lt;strong&gt;16 å­—èŠ‚&lt;/strong&gt; çš„å†…å­˜ï¼Œç”¨äºè®°å½•æ•°æ®ç±»å‹ã€ç¼–ç æ–¹å¼ã€LRUä¿¡æ¯ã€å¼•ç”¨è®¡æ•°ç­‰å…ƒæ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SDS å­—ç¬¦ä¸²å¼€é”€&lt;/strong&gt;ï¼šRedis çš„åŠ¨æ€å­—ç¬¦ä¸²ï¼ˆSDSï¼‰ä¹Ÿæœ‰å¤´éƒ¨ä¿¡æ¯æ¥è®°å½•å­—ç¬¦ä¸²é•¿åº¦å’Œç©ºé—²ç©ºé—´ã€‚å³ä½¿æ˜¯å­˜å‚¨ä¸€ä¸ªå¾ˆçŸ­çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿä¼šæœ‰é¢å¤–çš„å‡ ä¸ªå­—èŠ‚å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œè¡¨é¡¹å¼€é”€&lt;/strong&gt;ï¼šå“ˆå¸Œè¡¨æœ¬èº«çš„ç»“æ„ï¼Œæ¯ä¸ªé”®å€¼å¯¹åœ¨å­—å…¸ä¸­è¿˜éœ€è¦ä¸€ä¸ªå­—å…¸é¡¹ï¼ˆdictEntryï¼‰æ¥å­˜å‚¨æŒ‡å‘é”®å’Œå€¼çš„æŒ‡é’ˆä»¥åŠç”¨äºè§£å†³å“ˆå¸Œå†²çªçš„æŒ‡é’ˆï¼Œè¿™åˆæ˜¯é¢å¤–çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ï¼Œå­˜å‚¨ä¸€ä¸ªéå¸¸å°çš„é”®å€¼å¯¹ï¼ˆæ¯”å¦‚ &lt;code&gt;name: &amp;quot;Tom&amp;quot;&lt;/code&gt;ï¼‰ï¼Œå…¶å®é™…æ•°æ®å¯èƒ½åªæœ‰å‡ ä¸ªå­—èŠ‚ï¼Œä½†å›´ç»•å®ƒåˆ›å»ºçš„å„ä¸ªç»“æ„ä½“ï¼ˆä¸¤ä¸ª &lt;code&gt;redisObject&lt;/code&gt;ï¼Œä¸¤ä¸ª &lt;code&gt;SDS&lt;/code&gt;ï¼Œä¸€ä¸ª &lt;code&gt;dictEntry&lt;/code&gt;ï¼‰å¸¦æ¥çš„&lt;strong&gt;å›ºå®šå…ƒæ•°æ®å¼€é”€å¯èƒ½è½»æ¾è¶…è¿‡ 90 å­—èŠ‚&lt;/strong&gt;ã€‚è€Œ ziplist å½»åº•æ‘’å¼ƒäº†è¿™ç§â€œä¸ºæ¯ä¸ªå…ƒç´ åŒ…è£…ä¸€å±‚å¯¹è±¡â€çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id="-ziplist-çš„èŠ‚çœä¹‹é“"&gt;ğŸ’¾ Ziplist çš„èŠ‚çœä¹‹é“
&lt;/h3&gt;&lt;p&gt;Ziplist é€šè¿‡ä»¥ä¸‹è®¾è®¡å®ç°äº†æè‡´çš„å†…å­˜èŠ‚çœï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿ç»­å­˜å‚¨ï¼Œä¸€åŠ³æ°¸é€¸&lt;/strong&gt;ï¼šæ•´ä¸ª ziplist åªç”³è¯·ä¸€å¤§å—è¿ç»­å†…å­˜ã€‚è¿™å—å†…å­˜çš„å¤´éƒ¨æœ‰å›ºå®šçš„å‡ ä¸ªå­—æ®µï¼ˆ&lt;code&gt;zlbytes&lt;/code&gt;, &lt;code&gt;zltail&lt;/code&gt;, &lt;code&gt;zllen&lt;/code&gt;ï¼‰è®°å½•æ•´ä½“ä¿¡æ¯ï¼Œå¼€é”€æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šéšå…ƒç´ æ•°é‡å¢åŠ è€Œå€å¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç²¾ç®€çš„ Entry ç»“æ„&lt;/strong&gt;ï¼šæ¯ä¸ªé”®å€¼å¯¹ä½œä¸ºä¸€ä¸ª entry ç´§æŒ¨ç€å­˜å‚¨ã€‚entry çš„ç»“æ„éå¸¸ç²¾ç®€ï¼ŒåªåŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;prevlen&lt;/code&gt;ï¼šè®°å½•å‰ä¸€ä¸ª entry çš„é•¿åº¦ï¼Œä¾¿äºåå‘éå†ï¼ˆé€šå¸¸1å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;encoding&lt;/code&gt;ï¼šæ ‡è¯†å½“å‰æ•°æ®çš„ç±»å‹å’Œé•¿åº¦ï¼ˆé€šå¸¸1å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;content&lt;/code&gt;ï¼šå®é™…çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒå®Œå…¨çœå»äº† &lt;code&gt;redisObject&lt;/code&gt;ã€&lt;code&gt;dictEntry&lt;/code&gt;ç­‰å¤§é‡æŒ‡é’ˆå’Œå…ƒæ•°æ®å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å˜é•¿ç¼–ç &lt;/strong&gt;ï¼šå¯¹äºæ•´æ•°ç­‰æ•°æ®ï¼Œziplist ä¼šä½¿ç”¨å˜é•¿ç¼–ç ï¼ˆä¾‹å¦‚ï¼Œå°çš„æ•´æ•°ç”¨1å­—èŠ‚å­˜å‚¨ï¼‰ï¼Œè¿›ä¸€æ­¥æ¦¨å¹²å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æƒè¡¡ä¸é€‚ç”¨åœºæ™¯"&gt;âš–ï¸ æƒè¡¡ä¸é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å½“ç„¶ï¼Œziplist çš„æè‡´èŠ‚çœæ˜¯ä»¥ç‰ºç‰²éƒ¨åˆ†æ€§èƒ½ä¸ºä»£ä»·çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œæ•ˆç‡&lt;/strong&gt;ï¼šå¯¹ ziplist çš„å¢åˆ æ”¹æ“ä½œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œå› ä¸ºå®ƒå¯èƒ½éœ€è¦è¿›è¡Œå†…å­˜é‡åˆ†é…å’Œæ•°æ®æ‹·è´ã€‚è€Œ hashtable çš„æ­¤ç±»æ“ä½œé€šå¸¸æ˜¯ O(1)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿é”æ›´æ–°é£é™©&lt;/strong&gt;ï¼šåœ¨æç«¯æƒ…å†µä¸‹ï¼Œæ’å…¥æˆ–åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½å¯¼è‡´åç»­å¤šä¸ªèŠ‚ç‚¹éœ€è¦æ›´æ–°å…¶ &lt;code&gt;prevlen&lt;/code&gt;å­—æ®µï¼Œå¼•å‘è¿é”æ›´æ–°ï¼Œå½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œziplist &lt;strong&gt;ä»…é€‚ç”¨äºå…ƒç´ æ•°é‡å°‘ã€å…ƒç´ å€¼ä½“ç§¯å°çš„åœºæ™¯&lt;/strong&gt;ã€‚Redis æä¾›äº†é…ç½®å‚æ•°ï¼ˆ&lt;code&gt;hash-max-ziplist-entries&lt;/code&gt;å’Œ &lt;code&gt;hash-max-ziplist-value&lt;/code&gt;ï¼‰è®©æˆ‘ä»¬æ ¹æ®ä¸šåŠ¡æ•°æ®çš„ç‰¹å¾æ¥è®¾å®šä½¿ç”¨ ziplist çš„é˜ˆå€¼ï¼Œåœ¨å†…å­˜å’Œæ€§èƒ½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥ï¼Œæ‚¨çš„æè¿°éå¸¸å‡†ç¡®ã€‚Hash ç±»å‹å¯¹å°é”®å€¼å¯¹ä½¿ç”¨ ziplist ç¼–ç ï¼Œé€šè¿‡&lt;strong&gt;å°†æ•°æ®å­˜å‚¨åœ¨è¿ç»­å†…å­˜ä¸­ï¼Œæ‘’å¼ƒäº†æ¯ä¸ªé”®å€¼å¯¹æ‰€éœ€çš„ç‹¬ç«‹ &lt;code&gt;redisObject&lt;/code&gt;å’Œå­—å…¸é¡¹ç­‰å…ƒæ•°æ®&lt;/strong&gt;ï¼Œå¹¶è¾…ä»¥&lt;strong&gt;å˜é•¿ç¼–ç &lt;/strong&gt;ç­‰ä¼˜åŒ–ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†å¤§é‡å›ºå®šå¼€é”€å’Œå†…å­˜ç¢ç‰‡ï¼Œä»è€Œå®ç°äº†æœ‰æ•ˆçš„å†…å­˜é™ä½ã€‚è¿™æ˜¯ä¸€ç§éå¸¸ç»å…¸çš„ä»¥æ—¶é—´ï¼ˆæ“ä½œæ•ˆç‡ï¼‰æ¢ç©ºé—´ï¼ˆå†…å­˜å ç”¨ï¼‰çš„ä¼˜åŒ–ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id="listpack"&gt;listpack
&lt;/h2&gt;&lt;p&gt;ã€‚listpack æ˜¯ Redis ä¸ºäº†å…‹æœ ziplist çš„ç¼ºé™·è€Œè®¾è®¡çš„å‡çº§ç‰ˆæ•°æ®ç»“æ„ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯&lt;strong&gt;åœ¨ä¿æŒé«˜å†…å­˜æ•ˆç‡çš„åŒæ—¶ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³ ziplist çš„è¿é”æ›´æ–°é—®é¢˜ï¼Œå¹¶æä¾›æ›´ç¨³å®šçš„æ€§èƒ½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å¯¹æ¯”äº† listpack å’Œ ziplist çš„å…³é”®å·®å¼‚ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒæ”¹åŠ¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å¯¹æ¯”ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ziplist (Redis 7.0 å‰)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;listpack (Redis 5.0+ï¼Œ7.0 é»˜è®¤)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ›´æ”¹çš„æ ¸å¿ƒæ„ä¹‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª entry è®°å½•&lt;strong&gt;å‰ä¸€ä¸ª entry çš„é•¿åº¦&lt;/strong&gt; (&lt;code&gt;prevlen&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª entry è®°å½•&lt;strong&gt;è‡ªèº«ç¼–ç å’Œæ•°æ®çš„é•¿åº¦&lt;/strong&gt; (&lt;code&gt;element-tot-len&lt;/code&gt;)ï¼Œé€šå¸¸è¢«ç§°ä¸º &lt;code&gt;backlen&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»æ ¹æœ¬ä¸Šæ¶ˆé™¤è¿é”æ›´æ–°çš„æ ¹æº&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿é”æ›´æ–°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­˜åœ¨&lt;/strong&gt;ã€‚ä¸€ä¸ª entry é•¿åº¦çš„å˜åŒ–å¯èƒ½å¯¼è‡´åç»­å¤šä¸ª entry çš„ &lt;code&gt;prevlen&lt;/code&gt;å­—æ®µéœ€è¦é‡æ–°ç¼–ç å’Œç§»åŠ¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å­˜åœ¨&lt;/strong&gt;ã€‚æ¯ä¸ª entry è‡ªåŒ…å«é•¿åº¦ä¿¡æ¯ï¼Œä¿®æ”¹ä»…å½±å“è‡ªèº«ï¼Œå…ƒç´ ä¹‹é—´å®Œå…¨ç‹¬ç«‹&lt;/td&gt;
&lt;td&gt;ä½¿å¢åˆ æ”¹æ“ä½œæ€§èƒ½æ›´ç¨³å®šï¼Œå°¤å…¶å¯¹äºä¸­å‹æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¸ƒå±€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ…å« &lt;code&gt;zlbytes&lt;/code&gt;, &lt;code&gt;zltail&lt;/code&gt;, &lt;code&gt;zllen&lt;/code&gt;, &lt;code&gt;entries&lt;/code&gt;, &lt;code&gt;zlend&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ…å« &lt;code&gt;total_bytes&lt;/code&gt;, &lt;code&gt;size&lt;/code&gt;, &lt;code&gt;entries&lt;/code&gt;, &lt;code&gt;end&lt;/code&gt;ã€‚&lt;strong&gt;ç§»é™¤äº† &lt;code&gt;zltail&lt;/code&gt;ï¼ˆè®°å½•å°¾éƒ¨åç§»çš„å­—æ®µï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»“æ„æ›´ç®€æ´ï¼Œé€šè¿‡è®¡ç®—å³å¯å®šä½å°¾éƒ¨ï¼ŒèŠ‚çœå°‘é‡å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éå†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ­£å‘éå†ä¾èµ–ç¼–ç ï¼Œåå‘éå†ä¾èµ– &lt;code&gt;prevlen&lt;/code&gt;å’Œ &lt;code&gt;zltail&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­£å‘éå†ç±»ä¼¼ã€‚åå‘éå†æ—¶ï¼Œé€šè¿‡è§£ç å½“å‰ entry å°¾éƒ¨çš„ &lt;code&gt;backlen&lt;/code&gt;å­—æ®µæ¥ç¡®å®šå‰ä¸€ä¸ª entry çš„èµ·å§‹ä½ç½®&lt;/td&gt;
&lt;td&gt;åœ¨å®ç°æ›´ç®€å•ç»“æ„çš„åŒæ—¶ï¼Œä¿æŒäº†åŒå‘éå†çš„èƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼–ç æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒå¤šç§æ•´æ•°å’Œå­—ç¬¦ä¸²ç¼–ç &lt;/td&gt;
&lt;td&gt;ç¼–ç æ–¹æ¡ˆæ›´ç»Ÿä¸€å’Œä¼˜åŒ–ï¼Œå®šä¹‰äº†11ç§ä¸åŒçš„ç¼–ç æ–¹å¼ç”¨äºæ•´æ•°å’Œå­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;è¿›ä¸€æ­¥ä¼˜åŒ–å­˜å‚¨æ•ˆç‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å½»åº•è§£å†³è¿é”æ›´æ–°"&gt;ğŸ’¥ å½»åº•è§£å†³è¿é”æ›´æ–°
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ listpack æœ€å…³é”®çš„æ”¹è¿›ã€‚åœ¨ ziplist ä¸­ï¼Œæ¯ä¸ª entry çš„ &lt;code&gt;prevlen&lt;/code&gt;å­—æ®µé•¿åº¦æ˜¯å˜é•¿çš„ï¼ˆ1å­—èŠ‚æˆ–5å­—èŠ‚ï¼‰ã€‚å¦‚æœæŸä¸ªä½äºä¸­é—´çš„ entry é•¿åº¦å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´å…¶åç»­ entry çš„ &lt;code&gt;prevlen&lt;/code&gt;å­—æ®µé•¿åº¦éœ€è¦ä»1å­—èŠ‚æ‰©å±•ä¸º5å­—èŠ‚ï¼Œè¿™åˆä¼šå¼•èµ·è¯¥åç»­ entry è‡ªèº«é•¿åº¦çš„å˜åŒ–ï¼Œä»è€Œå¯èƒ½åƒå¤šç±³è¯ºéª¨ç‰Œä¸€æ ·å¼•å‘ä¸€è¿ä¸²çš„æ›´æ–°æ“ä½œã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œè¿™ä¼šå¯¼è‡´ O(N^2) çš„æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;p&gt;listpack é€šè¿‡å°†è®°å½•â€œå‰ä¸€ä¸ªentryçš„é•¿åº¦â€æ”¹ä¸ºè®°å½•â€œå½“å‰entryçš„æ€»é•¿åº¦â€ï¼ˆå³ &lt;code&gt;encoding&lt;/code&gt;+ &lt;code&gt;data&lt;/code&gt;+ &lt;code&gt;backlen&lt;/code&gt;æœ¬èº«çš„é•¿åº¦ï¼‰ï¼Œå®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ç”±äºæ¯ä¸ª entry çš„é•¿åº¦ä¿¡æ¯åªç”±è‡ªå·±å†³å®šï¼Œ&lt;strong&gt;ä¿®æ”¹ä»»æ„ä¸€ä¸ª entry éƒ½ä¸ä¼šå½±å“å…¶ä»– entry çš„ç»“æ„&lt;/strong&gt;ï¼Œä»è€Œå°†æœ€åæ—¶é—´å¤æ‚åº¦ç¨³å®šåœ¨ O(1) åˆ° O(N) ä¹‹é—´ã€‚&lt;/p&gt;
&lt;h3 id="-å†…å­˜å¸ƒå±€çš„ä¼˜åŒ–"&gt;ğŸ” å†…å­˜å¸ƒå±€çš„ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;listpack çš„å¤´éƒ¨ä¿¡æ¯æ›´ç²¾ç®€ï¼Œå»æ‰äº†ä¸“é—¨ç”¨äºè®°å½•æœ€åä¸€ä¸ªèŠ‚ç‚¹ä½ç½®åç§»é‡çš„ &lt;code&gt;zltail&lt;/code&gt;å­—æ®µã€‚å½“éœ€è¦åå‘éå†æ—¶ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;total_bytes&lt;/code&gt;ï¼ˆæ•´ä¸ª listpack çš„å­—èŠ‚æ•°ï¼‰å’Œæœ€åä¸€ä¸ªå…ƒç´ çš„ &lt;code&gt;backlen&lt;/code&gt;å­—æ®µè®¡ç®—å¾—å‡ºå‰ä¸€ä¸ªå…ƒç´ çš„èµ·å§‹ä½ç½®ã€‚è¿™ä¸€è®¾è®¡åœ¨ä¿æŒåŠŸèƒ½çš„åŒæ—¶ï¼Œè¿›ä¸€æ­¥èŠ‚çœäº†å†…å­˜ã€‚&lt;/p&gt;
&lt;h3 id="-åœ¨-redis-ä¸­çš„æ¼”è¿›ä¸åº”ç”¨"&gt;ğŸ“š åœ¨ Redis ä¸­çš„æ¼”è¿›ä¸åº”ç”¨
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬æ¼”è¿›&lt;/strong&gt;ï¼šlistpack åœ¨ Redis 5.0 ä¸­é¦–æ¬¡å¼•å…¥ï¼Œæœ€åˆç”¨äº Stream æ•°æ®ç±»å‹ã€‚å› å…¶è¡¨ç°ä¼˜å¼‚ï¼Œåœ¨ &lt;strong&gt;Redis 7.0 ä¸­ï¼Œlistpack å·²ç»å…¨é¢å–ä»£ ziplist&lt;/strong&gt;ï¼Œæˆä¸º Hashã€Sorted Set å’Œ Listï¼ˆåœ¨ quicklist ä¸­ï¼‰ç­‰æ•°æ®ç±»å‹åœ¨å­˜å‚¨å°è§„æ¨¡æ•°æ®æ—¶çš„é»˜è®¤åº•å±‚å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®å‚æ•°&lt;/strong&gt;ï¼šæ§åˆ¶æ˜¯å¦ä½¿ç”¨ listpack çš„é˜ˆå€¼å‚æ•°åç§°ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œä¾‹å¦‚ &lt;code&gt;hash-max-ziplist-entries&lt;/code&gt;å’Œ &lt;code&gt;hash-max-ziplist-value&lt;/code&gt;çš„å®é™…ä½œç”¨å¯¹è±¡åœ¨ Redis 7.0 åå·²å˜ä¸º listpackã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ é€å½»ç†è§£ listpack çš„æ”¹è¿›ä¹‹å¤„ã€‚å¦‚æœä½ å¯¹æŸä¸ªç»†èŠ‚è¿˜æƒ³æ·±å…¥æ¢è®¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­äº¤æµã€‚&lt;/p&gt;
&lt;h2 id="å¤§è§„æ¨¡æ•°æ®"&gt;å¤§è§„æ¨¡æ•°æ®
&lt;/h2&gt;&lt;p&gt;ziplist å’Œ listpack åœ¨è®¾è®¡ä¸Šéƒ½æ˜¯ä¸ºäº†æè‡´åœ°&lt;strong&gt;èŠ‚çœå†…å­˜&lt;/strong&gt;è€Œç”Ÿçš„ç´§å‡‘å‹æ•°æ®ç»“æ„ï¼Œç‰¹åˆ«é€‚åˆå­˜å‚¨&lt;strong&gt;å°‘é‡çš„å°å…ƒç´ &lt;/strong&gt;ã€‚ä½†å½“æ•°æ®è§„æ¨¡å˜å¤§æ—¶ï¼Œå®ƒä»¬å›ºæœ‰çš„è®¾è®¡ç‰¹ç‚¹å°±ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚è™½ç„¶ listpack æ˜¯ ziplist çš„æ”¹è¿›ç‰ˆï¼Œè§£å†³äº†æœ€è‡´å‘½çš„è¿é”æ›´æ–°é—®é¢˜ï¼Œä½†ä¸¤è€…åœ¨é¢å¯¹å¤§è§„æ¨¡æ•°æ®æ—¶ï¼Œä»æœ‰ä¸€äº›å…±åŒçš„æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠ“ä½æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘å…ˆæŠŠå®ƒä»¬çš„ä¸»è¦é™åˆ¶æ€»ç»“åœ¨ä¸‹é¢çš„è¡¨æ ¼é‡Œï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ziplist (å‹ç¼©åˆ—è¡¨)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;listpack (ç´§å‡‘åˆ—è¡¨)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…±åŒç“¶é¢ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¸ƒå±€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿ç»­å†…å­˜&lt;/td&gt;
&lt;td&gt;è¿ç»­å†…å­˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥/åˆ é™¤éœ€è¦ç§»åŠ¨å…ƒç´ &lt;/strong&gt;ï¼Œæ•°æ®é‡å¤§æ—¶å†…å­˜é‡åˆ†é…æˆæœ¬é«˜ï¼Œå¯èƒ½é€ æˆå»¶è¿Ÿã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå†æŸ¥æ‰¾ (O(N))&lt;/td&gt;
&lt;td&gt;éå†æŸ¥æ‰¾ (O(N))&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éšæœºè®¿é—®æ€§èƒ½å·®&lt;/strong&gt;ï¼Œæ— æ³•åƒå“ˆå¸Œè¡¨(O(1))æˆ–è·³è¡¨(O(log N))é‚£æ ·é«˜æ•ˆå®šä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿é”æ›´æ–°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;(listpack é€šè¿‡æ”¹é©è®¾è®¡è§£å†³äº†æ­¤é—®é¢˜)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ç¢ç‰‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒå°‘ï¼ˆè¿ç»­åˆ†é…ï¼‰&lt;/td&gt;
&lt;td&gt;è¾ƒå°‘ï¼ˆè¿ç»­åˆ†é…ï¼‰&lt;/td&gt;
&lt;td&gt;å¤§è§„æ¨¡æ•°æ®é‡æ–°åˆ†é…æ—¶ï¼Œå¯èƒ½äº§ç”ŸçŸ­æš‚ç¢ç‰‡æˆ–æµªè´¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è§„æ¨¡æ•°æ®ï¼ˆå…ƒç´ æ•°é‡å°‘ã€å€¼å°ï¼‰&lt;/td&gt;
&lt;td&gt;å°è§„æ¨¡æ•°æ®ï¼ˆå…ƒç´ æ•°é‡å°‘ã€å€¼å°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤§è§„æ¨¡æ•°æ®&lt;/strong&gt;ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼ŒRedis ä¼šé€šè¿‡é…ç½®å‚æ•°è‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºæ›´åˆé€‚çš„æ•°æ®ç»“æ„ï¼ˆå¦‚ hashtableã€skiplistï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;ä¸ºä½•è¿™äº›ç“¶é¢ˆåœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹å°¤ä¸ºçªå‡ºï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¡¨æ ¼ä¸­åˆ—å‡ºçš„é—®é¢˜ï¼Œåœ¨æ•°æ®é‡å°æ—¶é€šå¸¸å¯ä»¥æ¥å—ï¼Œä½†éšç€æ•°æ®é‡å¢é•¿ï¼Œå½±å“ä¼šéçº¿æ€§æ”¾å¤§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œå»¶è¿Ÿå¢åŠ &lt;/strong&gt;ï¼šä¸€ä¸ªæ‹¥æœ‰å‡ åƒä¸ªå…ƒç´ çš„ listpackï¼Œå…¶ä¸­éƒ¨æ’å…¥æ“ä½œå¯èƒ½éœ€è¦ç§»åŠ¨å‡ åƒå­—èŠ‚çš„æ•°æ®ã€‚è¿™åœ¨æ•°æ®åº“è¿™ç§é«˜å¹¶å‘ã€ä½å»¶è¿Ÿè¦æ±‚çš„ç³»ç»Ÿä¸­ï¼Œå‡ ä¹æ˜¯ä¸å¯æ¥å—çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜åˆ†é…å‹åŠ›&lt;/strong&gt;ï¼šé¢‘ç¹ç”³è¯·å’Œæ‹·è´å¤§å—è¿ç»­å†…å­˜ï¼Œä¼šç»™å†…å­˜åˆ†é…å™¨å¸¦æ¥å·¨å¤§å‹åŠ›ï¼Œä¹Ÿå¢åŠ äº†å†…å­˜ç¢ç‰‡åŒ–çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;å¦‚ä½•åº”å¯¹ä¸æœ€ä½³å®è·µ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç†è§£è¿™äº›é™åˆ¶åï¼Œåœ¨å®è·µä¸­æˆ‘ä»¬åº”è¯¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡ä»»å¹¶åˆç†é…ç½® Redis&lt;/strong&gt;ï¼šRedis å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨è½¬æ¢æœºåˆ¶ã€‚å¯¹äº Hashã€Setã€ZSet ç­‰ç±»å‹ï¼Œå¯ä»¥é€šè¿‡é…ç½® &lt;code&gt;*-max-*-entries&lt;/code&gt;å’Œ &lt;code&gt;*-max-*-value&lt;/code&gt;ç­‰å‚æ•°ï¼ˆåœ¨ Redis 7.0 åŠä»¥åï¼Œè¿™äº›å‚æ•°å®é™…æ§åˆ¶çš„æ˜¯ listpack çš„ä½¿ç”¨é˜ˆå€¼ï¼‰ï¼Œæ¥è®¾å®šä¸€ä¸ªåˆç†çš„é˜ˆå€¼ã€‚&lt;strong&gt;è®© Redis è‡ªåŠ¨ä¸ºå¤§æ•°æ®é€‰æ‹© hashtable æˆ– skiplist ç­‰ç»“æ„&lt;/strong&gt;ï¼Œé€šå¸¸æ˜¯æœ€ä½³ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¹æ®æ•°æ®ç‰¹æ€§é€‰æ‹©ç±»å‹&lt;/strong&gt;ï¼šå¦‚æœä¸šåŠ¡åœºæ™¯éœ€è¦é¢‘ç¹æ ¹æ®é”®è¿›è¡Œç‚¹æŸ¥è¯¢ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ &lt;code&gt;String&lt;/code&gt;ç±»å‹æˆ– &lt;code&gt;Hash&lt;/code&gt;ç±»å‹ï¼ˆåœ¨è½¬æ¢ä¸º hashtable åï¼‰å¯èƒ½æ¯”ä¸€ä¸ªå¤§ listpack ç¼–ç çš„ Hash æ€§èƒ½å¥½å¾—å¤šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ä¸æ‹†åˆ†&lt;/strong&gt;ï¼šå¯¹äº List ç±»å‹ï¼Œå¦‚æœä½¿ç”¨åŒ…å«å¤§é‡å…ƒç´ çš„ quicklistï¼ˆå…¶èŠ‚ç‚¹ä¸º listpackï¼‰ï¼Œå¯ä»¥è€ƒè™‘ç›‘æ§èŠ‚ç‚¹å¤§å°å¹¶è¿›è¡Œé€‚å½“æ‹†åˆ†ï¼Œä»¥å¹³è¡¡å†…å­˜å’Œæ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œziplist å’Œ listpack æ˜¯ Redis ä¸ºäº†&lt;strong&gt;èŠ‚çœå†…å­˜&lt;/strong&gt;è€Œè®¾è®¡çš„&lt;strong&gt;ç²¾å·§&lt;/strong&gt;æ•°æ®ç»“æ„ï¼Œä½†å®ƒä»¬å°±åƒæ˜¯&lt;strong&gt;ç²¾æ‰“ç»†ç®—çš„ç®¡å®¶ï¼Œæ“…é•¿ç®¡ç†ä¸€ä¸ªå°å®¶ï¼Œå½“å®¶æ—å˜å¾—åºå¤§æ—¶ï¼Œå°±éœ€è¦æ›´æ“…é•¿å¤„ç†å’Œåè°ƒçš„ç»ç†äººï¼ˆå¦‚ hashtableã€skiplistï¼‰æ¥æ¥æ‰‹&lt;/strong&gt;ã€‚æ­£ç¡®ç†è§£å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œæ‰èƒ½æ›´å¥½åœ°åˆ©ç”¨ Redis çš„ç‰¹æ€§æ„å»ºé«˜æ€§èƒ½åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Redis çš„åº•å±‚æœºåˆ¶ã€‚å¦‚æœä½ å¯¹ç‰¹å®šæ•°æ®ç±»å‹çš„é…ç½®æˆ–è€…å…·ä½“çš„ä½¿ç”¨åœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­è®¨è®ºã€‚&lt;/p&gt;
&lt;h2 id="åº•å±‚ç»“æ„"&gt;åº•å±‚ç»“æ„
&lt;/h2&gt;&lt;p&gt;Redis ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå…¶åº•å±‚å®ç°ä¼šæ ¹æ®æ•°æ®çš„è§„æ¨¡å’Œç‰¹æ€§ï¼Œè‡ªé€‚åº”åœ°é€‰æ‹©æœ€åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œä»¥è¾¾åˆ°æ€§èƒ½ä¸å†…å­˜æ•ˆç‡çš„å¹³è¡¡ã€‚ä¸‹å›¾æ¦‚æ‹¬äº†å„å¤§ç±»å‹çš„å…¸å‹åº•å±‚ç»“æ„ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[Redis Data Type] --&amp;gt; B[String&amp;lt;br&amp;gt;å­—ç¬¦ä¸²]
A --&amp;gt; C[Hash&amp;lt;br&amp;gt;å“ˆå¸Œ]
A --&amp;gt; D[List&amp;lt;br&amp;gt;åˆ—è¡¨]
A --&amp;gt; E[Set&amp;lt;br&amp;gt;é›†åˆ]
A --&amp;gt; F[Sorted Set&amp;lt;br&amp;gt;æœ‰åºé›†åˆ]
B --&amp;gt; B1[SDS&amp;lt;br&amp;gt;ç®€å•åŠ¨æ€å­—ç¬¦ä¸²]
C --&amp;gt; C1[Small Hash]
C1 --&amp;gt; C11[Listpack]
C --&amp;gt; C2[Large Hash]
C2 --&amp;gt; C21[Hashtable&amp;lt;br&amp;gt;å“ˆå¸Œè¡¨]
D --&amp;gt; D1[Quicklist&amp;lt;br&amp;gt;å¿«é€Ÿåˆ—è¡¨]
D1 --&amp;gt; D11[åŒå‘é“¾è¡¨]
D11 --&amp;gt; D111[Listpack]
E --&amp;gt; E1[Small Set&amp;lt;br&amp;gt;çº¯æ•´æ•°ä¸”å…ƒç´ å°‘]
E1 --&amp;gt; E11[Intset&amp;lt;br&amp;gt;æ•´æ•°é›†åˆ]
E --&amp;gt; E2[Large Set]
E2 --&amp;gt; E21[Hashtable&amp;lt;br&amp;gt;å“ˆå¸Œè¡¨]
F --&amp;gt; F1[Small ZSet]
F1 --&amp;gt; F11[Listpack]
F --&amp;gt; F2[Large ZSet]
F2 --&amp;gt; F21[Skip List&amp;lt;br&amp;gt;è·³è·ƒè¡¨]
F2 --&amp;gt; F22[Hashtable&amp;lt;br&amp;gt;å“ˆå¸Œè¡¨]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯å„ç±»å‹åº•å±‚ç»“æ„çš„è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;h3 id="-stringå­—ç¬¦ä¸²"&gt;ğŸ’¾ Stringï¼ˆå­—ç¬¦ä¸²ï¼‰
&lt;/h3&gt;&lt;p&gt;String æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨æ–‡æœ¬ã€æ•´æ•°æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€åºåˆ—åŒ–å¯¹è±¡ï¼‰ï¼Œæœ€å¤§å®¹é‡ä¸º &lt;strong&gt;512MB&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº•å±‚ç»“æ„&lt;/strong&gt;ï¼š&lt;strong&gt;ç®€å•åŠ¨æ€å­—ç¬¦ä¸²ï¼ˆSDS, Simple Dynamic Stringï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;SDS çš„ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;struct sdshdr {
int len; // è®°å½•å­—ç¬¦ä¸²å·²ä½¿ç”¨çš„å­—èŠ‚é•¿åº¦
int free; // è®°å½•æœªä½¿ç”¨çš„å­—èŠ‚é•¿åº¦
char buf[]; // ç”¨äºä¿å­˜å­—ç¬¦ä¸²çš„å­—èŠ‚æ•°ç»„
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼–ç æ ¼å¼&lt;/strong&gt;ï¼šSDS æ ¹æ®å­˜å‚¨çš„å†…å®¹è‡ªé€‚åº”é€‰æ‹©ç¼–ç ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;int&lt;/strong&gt;ï¼šå½“å­—ç¬¦ä¸²å€¼å¯ç”¨ &lt;strong&gt;64ä½æœ‰ç¬¦å·æ•´æ•°&lt;/strong&gt; è¡¨ç¤ºæ—¶ï¼Œç›´æ¥ä½¿ç”¨æ•´æ•°å­˜å‚¨ï¼Œæå¤§èŠ‚çœå†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;embstr&lt;/strong&gt;ï¼šç”¨äºå­˜å‚¨ &lt;strong&gt;é•¿åº¦ â‰¤ 44 å­—èŠ‚&lt;/strong&gt; çš„å­—ç¬¦ä¸²ã€‚å®ƒå°† RedisObject å¯¹è±¡å…ƒæ•°æ®ä¸ SDS ç»“æ„åœ¨&lt;strong&gt;ä¸€å—è¿ç»­å†…å­˜&lt;/strong&gt;ä¸­åˆ†é…ï¼Œèƒ½æœ‰æ•ˆå‡å°‘å†…å­˜ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;raw&lt;/strong&gt;ï¼šç”¨äºå­˜å‚¨ &lt;strong&gt;é•¿åº¦ &amp;gt; 44 å­—èŠ‚&lt;/strong&gt; çš„å­—ç¬¦ä¸²ã€‚å®ƒä¼šè°ƒç”¨ä¸¤æ¬¡å†…å­˜åˆ†é…å‡½æ•°ï¼Œåˆ†åˆ«åˆ›å»º RedisObject å’Œ SDS ç»“æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-hashå“ˆå¸Œ"&gt;ğŸ—‚ï¸ Hashï¼ˆå“ˆå¸Œï¼‰
&lt;/h3&gt;&lt;p&gt;Hash é€‚åˆå­˜å‚¨å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œæ¯ä¸ª Hash å¯ä»¥å­˜å‚¨å¤§é‡çš„é”®å€¼å¯¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚ç»“æ„&lt;/strong&gt;ï¼š&lt;strong&gt;Listpack&lt;/strong&gt; æˆ– &lt;strong&gt;Hashtable&lt;/strong&gt;ï¼ˆå“ˆå¸Œè¡¨ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Listpack&lt;/strong&gt;ï¼šåœ¨ Redis 7.0 ä¸­å–ä»£äº† ziplistã€‚å½“ &lt;strong&gt;Hash çš„å­—æ®µæ•°é‡&lt;/strong&gt;å’Œ&lt;strong&gt;æ¯ä¸ªå­—æ®µå€¼çš„å¤§å°&lt;/strong&gt;éƒ½å°äºä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤å‡ä¸º 512 ä¸ªå’Œ 64 å­—èŠ‚ï¼‰æ—¶ä½¿ç”¨ã€‚å®ƒå°†å¤šä¸ªé”®å€¼å¯¹ç´§å‡‘åœ°å­˜æ”¾åœ¨ä¸€å—è¿ç»­å†…å­˜ä¸­ï¼Œèƒ½æé«˜åœ°æå‡å†…å­˜ä½¿ç”¨ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hashtable&lt;/strong&gt;ï¼šå½“æ•°æ®é‡è¶…è¿‡ä¸Šè¿°é˜ˆå€¼æ—¶ï¼Œä¼šè½¬ä¸ºä½¿ç”¨å“ˆå¸Œè¡¨ã€‚å®ƒä½¿ç”¨&lt;strong&gt;é“¾è¡¨æ³•&lt;/strong&gt;è§£å†³å“ˆå¸Œå†²çªï¼Œæ”¯æŒ &lt;strong&gt;O(1) æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-liståˆ—è¡¨"&gt;ğŸ“ƒ Listï¼ˆåˆ—è¡¨ï¼‰
&lt;/h3&gt;&lt;p&gt;List æ˜¯ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¯ä»¥åœ¨å¤´éƒ¨æˆ–å°¾éƒ¨æ“ä½œå…ƒç´ ï¼Œå¸¸ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°åˆ—è¡¨ç­‰åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº•å±‚ç»“æ„&lt;/strong&gt;ï¼š&lt;strong&gt;Quicklistï¼ˆå¿«é€Ÿåˆ—è¡¨ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Quicklist æ˜¯ Redis 3.2 åå”¯ä¸€çš„åº•å±‚å®ç°ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ &lt;strong&gt;åŒå‘é“¾è¡¨&lt;/strong&gt; å’Œ &lt;strong&gt;Listpack&lt;/strong&gt; çš„æ··åˆä½“ã€‚å®ƒçš„å®è§‚ç»“æ„æ˜¯åŒå‘é“¾è¡¨ï¼Œä¾¿äºè¿›è¡Œå¤´å°¾èŠ‚ç‚¹çš„æ“ä½œå’Œéå†ã€‚è€Œé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹åˆ™æ˜¯ä¸€ä¸ª Listpack ç»“æ„ï¼Œå¯ä»¥åœ¨å•ä¸ªèŠ‚ç‚¹å†…ç´§å‡‘åœ°å­˜å‚¨å¤šä¸ªå…ƒç´ ã€‚è¿™ç§è®¾è®¡å¾ˆå¥½åœ°ç»“åˆäº†åŒå‘é“¾è¡¨å’Œ Listpack çš„ä¼˜ç‚¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-seté›†åˆ"&gt;ğŸ§® Setï¼ˆé›†åˆï¼‰
&lt;/h3&gt;&lt;p&gt;Set ç”¨äºå­˜å‚¨æ— åºä¸”ä¸é‡å¤çš„å­—ç¬¦ä¸²é›†åˆï¼Œæ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰èšåˆè®¡ç®—ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚ç»“æ„&lt;/strong&gt;ï¼š&lt;strong&gt;Intsetï¼ˆæ•´æ•°é›†åˆï¼‰&lt;/strong&gt; æˆ– &lt;strong&gt;Hashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Intset&lt;/strong&gt;ï¼šå½“ Set ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯&lt;strong&gt;æ•´æ•°&lt;/strong&gt;ï¼Œä¸”&lt;strong&gt;å…ƒç´ æ•°é‡&lt;/strong&gt;å°äºä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤ 512 ä¸ªï¼‰æ—¶ä½¿ç”¨ã€‚å®ƒåœ¨è¿ç»­çš„å†…å­˜ä¸­å­˜å‚¨æ•´æ•°ï¼Œæ˜¯å†…å­˜æ•ˆç‡æœ€é«˜çš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hashtable&lt;/strong&gt;ï¼šå½“å…ƒç´ ä¸å…¨æ˜¯æ•´æ•°æˆ–æ•°é‡è¶…è¿‡é˜ˆå€¼æ—¶ä½¿ç”¨ã€‚å“ˆå¸Œè¡¨çš„æ¯ä¸ªé”®å°±æ˜¯ Set çš„ä¸€ä¸ªå…ƒç´ ï¼Œè€Œå€¼å…¨éƒ¨è®¾ç½®ä¸º &lt;strong&gt;NULL&lt;/strong&gt;ï¼Œä»¥æ­¤å®ç°å…ƒç´ çš„å»é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-sorted-setæœ‰åºé›†åˆ"&gt;ğŸ† Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰
&lt;/h3&gt;&lt;p&gt;ZSet æ¯ä¸ªå…ƒç´ éƒ½å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ï¼Œå…ƒç´ æŒ‰åˆ†æ•°æ’åºï¼Œé€‚ç”¨äºæ’è¡Œæ¦œç­‰åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åº•å±‚ç»“æ„&lt;/strong&gt;ï¼š&lt;strong&gt;Listpack&lt;/strong&gt; æˆ– &lt;strong&gt;Skip Listï¼ˆè·³è·ƒè¡¨ï¼‰ + Hashtable&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Listpack&lt;/strong&gt;ï¼šå½“ &lt;strong&gt;å…ƒç´ æ•°é‡&lt;/strong&gt;ï¼ˆé»˜è®¤ â‰¤ 128ï¼‰å’Œ&lt;strong&gt;æ¯ä¸ªå…ƒç´ çš„å¤§å°&lt;/strong&gt;ï¼ˆé»˜è®¤ â‰¤ 64 å­—èŠ‚ï¼‰è¾ƒå°æ—¶ä½¿ç”¨ï¼Œä»¥èŠ‚çœå†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Skip List + Hashtable&lt;/strong&gt;ï¼šå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œé‡‡ç”¨è¿™ç§ç»„åˆç»“æ„ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è·³è·ƒè¡¨&lt;/strong&gt;ï¼šè´Ÿè´£ç»´æŠ¤å…ƒç´ çš„&lt;strong&gt;æ’åºé¡ºåº&lt;/strong&gt;ï¼Œæ”¯æŒæŒ‰åˆ†æ•°èŒƒå›´è¿›è¡Œé«˜æ•ˆæŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œè¡¨&lt;/strong&gt;ï¼šè´Ÿè´£æä¾› &lt;strong&gt;O(1) å¤æ‚åº¦çš„å…ƒç´ æŸ¥è¯¢&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œæ ¹æ®æˆå‘˜åæŸ¥æ‰¾å…¶åˆ†æ•°ï¼‰ï¼Œå…¶é”®ä¸ºå…ƒç´ æˆå‘˜ï¼Œå€¼ä¸ºå¯¹åº”çš„åˆ†æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;äº†è§£åº•å±‚ç»“æ„èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä½¿ç”¨å’Œä¼˜åŒ– Redisã€‚ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;OBJECT ENCODING keyname&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹æŸä¸ªé”®å½“å‰ä½¿ç”¨çš„åº•å±‚ç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ€»ç»“å¯¹ä½ æœ‰å¸®åŠ©ã€‚å¦‚æœä½ å¯¹ç‰¹å®šæ•°æ®ç±»å‹çš„åº•å±‚ç»†èŠ‚æˆ–ä½¿ç”¨åœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Network 2</title><link>https://dyhes.github.io/p/nowcodernetwork-2/</link><pubDate>Thu, 02 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcodernetwork-2/</guid><description>&lt;h2 id="udp-å¤´"&gt;UDP å¤´
&lt;/h2&gt;&lt;p&gt;UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰çš„å¤´éƒ¨ç»“æ„éå¸¸ç®€æ´ï¼Œå›ºå®šä¸º &lt;strong&gt;8ä¸ªå­—èŠ‚&lt;/strong&gt;ï¼Œç”±4ä¸ªå­—æ®µç»„æˆï¼Œæ¯ä¸ªå­—æ®µå‡ä¸º16ä½ï¼ˆ2å­—èŠ‚ï¼‰ã€‚ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†å…¶æ„æˆï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µåç§°&lt;/th&gt;
&lt;th&gt;é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æºç«¯å£å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;æ ‡è¯†å‘é€æ•°æ®æŠ¥çš„åº”ç”¨ç¨‹åºç«¯å£ã€‚æ¥æ”¶æ–¹å¦‚éœ€å›å¤ï¼Œåˆ™ä½¿ç”¨æ­¤ç«¯å£ã€‚æ­¤ä¸ºå¯é€‰å­—æ®µï¼Œæ— éœ€å›å¤æ—¶å¯ç½®ä¸º0ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®çš„ç«¯å£å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;æ ‡è¯†æ¥æ”¶æ•°æ®æŠ¥çš„ç›®æ ‡åº”ç”¨ç¨‹åºç«¯å£ã€‚è¿™æ˜¯æ•°æ®æŠ¥é€è¾¾çš„å…³é”®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;UDPé•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;æŒ‡æ˜æ•´ä¸ªUDPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ï¼ˆåŒ…æ‹¬å¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†ï¼‰ã€‚æœ€å°å€¼ä¸º8å­—èŠ‚ï¼ˆå³ä»…æœ‰å¤´éƒ¨çš„æƒ…å†µï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¡éªŒå’Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;ç”¨äºæ£€æµ‹UDPå¤´éƒ¨å’Œæ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°é”™è¯¯ã€‚æ­¤å­—æ®µåœ¨IPv4ä¸­æ˜¯å¯é€‰çš„ï¼Œå¯ç½®0è¡¨ç¤ºä¸è®¡ç®—æ ¡éªŒå’Œï¼›ä½†åœ¨IPv6ä¸­å¿…é¡»å¯ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®ç‰¹æ€§ä¸å·¥ä½œæœºåˆ¶"&gt;ğŸ’¡ å…³é”®ç‰¹æ€§ä¸å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼ªé¦–éƒ¨&lt;/strong&gt;ï¼šåœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼ŒUDPä¼šåœ¨æ•°æ®æŠ¥å‰ä¸´æ—¶æ·»åŠ ä¸€ä¸ª12å­—èŠ‚çš„&lt;strong&gt;ä¼ªé¦–éƒ¨&lt;/strong&gt;ã€‚å®ƒåŒ…å«äº†æºIPåœ°å€ã€ç›®çš„IPåœ°å€ã€åè®®å·ï¼ˆ17ï¼Œä»£è¡¨UDPï¼‰å’ŒUDPé•¿åº¦ç­‰ä¿¡æ¯ï¼Œç”¨äºéªŒè¯æ•°æ®æ˜¯å¦å‡†ç¡®é€è¾¾æ­£ç¡®çš„ç›®çš„åœ°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¼ªé¦–éƒ¨ä»…å‚ä¸æ ¡éªŒå’Œè®¡ç®—ï¼Œå¹¶ä¸ä¼šè¢«å®é™…å‘é€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;ï¼šUDPå¤´éƒ¨çš„ç®€å•æ€§åæ˜ äº†å…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡â€”â€”&lt;strong&gt;é«˜æ•ˆä¸ä½å»¶è¿Ÿ&lt;/strong&gt;ã€‚å®ƒä¸åŒ…å«TCPä¸­å¸¸è§çš„åºåˆ—å·ã€ç¡®è®¤å·ã€çª—å£å¤§å°ç­‰ç”¨äºä¿è¯å¯é ä¼ è¾“å’Œæµé‡æ§åˆ¶çš„å¤æ‚å­—æ®µï¼Œå› æ­¤å¼€é”€æå°ï¼Œå¤„ç†é€Ÿåº¦æå¿«ã€‚è¿™ç§â€œæ— è¿æ¥â€å’Œâ€œä¸å¯é â€ï¼ˆæŒ‡ä¸ä¿è¯é€è¾¾ã€ä¸ä¿è¯é¡ºåºï¼‰çš„ç‰¹æ€§ï¼Œä½¿å…¶éå¸¸é€‚åˆå®æ—¶åº”ç”¨ï¼Œå¦‚éŸ³è§†é¢‘æµåª’ä½“ã€åœ¨çº¿æ¸¸æˆã€DNSæŸ¥è¯¢ç­‰ï¼Œè¿™äº›åœºæ™¯ä¸‹é€Ÿåº¦å¾€å¾€æ¯”ç»å¯¹çš„æ•°æ®å®Œæ•´æ€§æ›´ä¸ºé‡è¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ¸…æ™°çš„è¯´æ˜èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£UDPåè®®ã€‚å¦‚æœå¯¹ç‰¹å®šåº”ç”¨åœºæ™¯æˆ–ä¸TCPçš„å¯¹æ¯”æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="tcp-è¿æ¥"&gt;TCP è¿æ¥
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä¸¢å¤±çš„æŠ¥æ–‡&lt;/th&gt;
&lt;th style="text-align: left"&gt;çŠ¶æ€å˜åŒ– &amp;amp; è¡¥æ•‘&lt;/th&gt;
&lt;th style="text-align: left"&gt;ç»“æœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;â‘  &lt;strong&gt;å®¢æˆ·ç«¯ SYN&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;C è¶…æ—¶é‡ä¼  SYNï¼›S æ— æ„ŸçŸ¥&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿æ¥å»¶è¿Ÿå¢åŠ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;â‘¡ &lt;strong&gt;æœåŠ¡å™¨ SYN + ACK&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;C ç­‰ä¸åˆ°å“åº”ï¼Œé‡ä¼  SYNï¼›S æ”¶åˆ°é‡å¤ SYNï¼Œå†å‘ SYN+ACK&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿æ¥å»¶è¿Ÿå¢åŠ ï¼›S é‡ä¼ æ¬¡æ•°å—tcp_synack_retriesæ§åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;â‘¢ &lt;strong&gt;å®¢æˆ·ç«¯æœ€å ACK&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;S ä»å¤„SYN_RCVDï¼Œè¶…æ—¶é‡å‘ SYN+ACKï¼› C å·²ESTABLISHEDï¼Œæ”¶åˆ°åå†å‘ ACK&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€ç»ˆæˆåŠŸï¼›è‹¥ C ä¸å› ACKï¼ŒS ä¼šé‡ä¼ æ•°æ¬¡å &lt;strong&gt;ä¸¢å¼ƒåŠå¼€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä¸¢å¤±çš„æŠ¥æ–‡&lt;/th&gt;
&lt;th style="text-align: left"&gt;çŠ¶æ€å˜åŒ– &amp;amp; è¡¥æ•‘æªæ–½&lt;/th&gt;
&lt;th style="text-align: left"&gt;æœ€ç»ˆç»“æœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‘  ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨æ–¹ FIN&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»åŠ¨æ–¹&lt;/strong&gt;ï¼šå¡åœ¨ &lt;code&gt;FIN_WAIT_1&lt;/code&gt;çŠ¶æ€ï¼Œè§¦å‘è¶…æ—¶é‡ä¼  FIN æŠ¥æ–‡ï¼Œé‡ä¼ æ¬¡æ•°ç”± &lt;code&gt;net.ipv4.tcp_orphan_retries&lt;/code&gt;å‚æ•°æ§åˆ¶ï¼ˆLinuxé»˜è®¤å®é™…é‡è¯•8æ¬¡ï¼‰ã€‚ &lt;strong&gt;è¢«åŠ¨æ–¹&lt;/strong&gt;ï¼šå¤„äº &lt;code&gt;ESTABLISHED&lt;/code&gt;çŠ¶æ€ï¼Œå¯¹FINä¸¢å¤±æ— æ„ŸçŸ¥ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‹¥é‡ä¼ è¾¾åˆ°æœ€å¤§æ¬¡æ•°åä»æœªæ”¶åˆ°ACKï¼Œä¸»åŠ¨æ–¹ä¼šå‘é€RSTæŠ¥æ–‡å¼ºåˆ¶å…³é—­è¿æ¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‘¡ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨æ–¹ ACK&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»åŠ¨æ–¹&lt;/strong&gt;ï¼šæœªæ”¶åˆ°ACKï¼Œä¼šç»§ç»­é‡ä¼ FINæŠ¥æ–‡ã€‚ &lt;strong&gt;è¢«åŠ¨æ–¹&lt;/strong&gt;ï¼šå¤„äº &lt;code&gt;CLOSE_WAIT&lt;/code&gt;çŠ¶æ€ã€‚å½“æ”¶åˆ°é‡å¤çš„FINæŠ¥æ–‡æ—¶ï¼Œä¼šç«‹å³é‡å‘ACKã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;é€šå¸¸èƒ½é€šè¿‡é‡ä¼ æ¢å¤ã€‚è‹¥è¢«åŠ¨æ–¹æ— å“åº”ï¼Œä¸»åŠ¨æ–¹åœ¨é‡ä¼ å¤±è´¥åä¼šè¶…æ—¶é‡ç½®è¿æ¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‘¢ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨æ–¹ FIN&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»åŠ¨æ–¹&lt;/strong&gt;ï¼šå¡åœ¨ &lt;code&gt;FIN_WAIT_2&lt;/code&gt;çŠ¶æ€ã€‚è¯¥çŠ¶æ€æŒç»­æ—¶é—´ç”± &lt;code&gt;net.ipv4.tcp_fin_timeout&lt;/code&gt;æ§åˆ¶ï¼ˆé»˜è®¤60ç§’ï¼‰ã€‚ &lt;strong&gt;è¢«åŠ¨æ–¹&lt;/strong&gt;ï¼šå¡åœ¨ &lt;code&gt;LAST_ACK&lt;/code&gt;çŠ¶æ€ï¼Œä¼šé‡ä¼ FINæŠ¥æ–‡ï¼Œé‡ä¼ æ¬¡æ•°åŒæ ·ç”± &lt;code&gt;tcp_orphan_retries&lt;/code&gt;æ§åˆ¶ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‹¥åœ¨è¶…æ—¶æ—¶é—´å†…ä¸»åŠ¨æ–¹æ”¶åˆ°é‡ä¼ çš„FINï¼Œåˆ™å›å¤ACKï¼›å¦åˆ™ä¸»åŠ¨æ–¹ç›´æ¥å…³é—­ã€‚è¢«åŠ¨æ–¹é‡ä¼ å¤±è´¥åå‘é€RSTå¼ºåˆ¶å…³é—­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;â‘£ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨æ–¹ ACK&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¸»åŠ¨æ–¹&lt;/strong&gt;ï¼šè¿›å…¥ &lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ï¼ˆæŒç»­2MSLï¼ŒLinuxé»˜è®¤60ç§’ï¼‰ã€‚æ­¤çŠ¶æ€ä¸‹å¦‚å†æ¬¡æ”¶åˆ°è¢«åŠ¨æ–¹çš„FINï¼Œä¼šé‡å‘ACKå¹¶é‡ç½®2MSLè®¡æ—¶å™¨ã€‚ &lt;strong&gt;è¢«åŠ¨æ–¹&lt;/strong&gt;ï¼šå¤„äº &lt;code&gt;LAST_ACK&lt;/code&gt;çŠ¶æ€ï¼Œæœªæ”¶åˆ°ACKåˆ™ä¼šé‡ä¼ FINæŠ¥æ–‡ã€‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;TIME_WAIT&lt;/code&gt;çŠ¶æ€ç¡®ä¿ä¸»åŠ¨æ–¹èƒ½å“åº”è¢«åŠ¨æ–¹çš„FINé‡ä¼ ã€‚è¢«åŠ¨æ–¹æœ€ç»ˆåœ¨å¤šæ¬¡é‡ä¼ å¤±è´¥åè¶…æ—¶å…³é—­è¿æ¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="åŠè¿æ¥é˜Ÿåˆ—"&gt;åŠè¿æ¥é˜Ÿåˆ—
&lt;/h2&gt;&lt;p&gt;åŠè¿æ¥é˜Ÿåˆ—ï¼ˆSYN Queueï¼‰æ˜¯TCPåè®®ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ä¸€ä¸ªé‡è¦çš„å†…æ ¸æ•°æ®ç»“æ„ï¼Œç”¨äºç®¡ç†é‚£äº›&lt;strong&gt;å·²åˆå§‹åŒ–ä½†æœªå®Œæˆ&lt;/strong&gt;çš„è¿æ¥ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®˜æ–¹åç§°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;SYN é˜Ÿåˆ— / åŠè¿æ¥é˜Ÿåˆ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨é˜¶æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;TCPä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬äºŒæ¬¡æ¡æ‰‹ä¹‹åï¼ˆSYN-RCVDçŠ¶æ€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨å·²æ”¶åˆ°SYNåŒ…ã€å‘å‡ºSYN-ACKåŒ…ï¼Œä½†å°šæœªæ”¶åˆ°å®¢æˆ·ç«¯ACKåŒ…çš„&lt;strong&gt;åŠå¼€è¿æ¥&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶ç¼“å­˜ä¸­é—´çŠ¶æ€çš„è¿æ¥ï¼Œé¿å…æœåŠ¡å™¨èµ„æºè¢«æœªå®Œæˆçš„è¿æ¥è€—å°½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±å†…æ ¸å‚æ•° &lt;code&gt;net.ipv4.tcp_max_syn_backlog&lt;/code&gt;æ§åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æº¢å‡ºåæœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–°çš„SYNåŒ…è¢«ä¸¢å¼ƒï¼Œå®¢æˆ·ç«¯è¿æ¥è¶…æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæµç¨‹ä¸ä¸‰æ¬¡æ¡æ‰‹"&gt;ğŸ”„ å·¥ä½œæµç¨‹ä¸ä¸‰æ¬¡æ¡æ‰‹
&lt;/h3&gt;&lt;p&gt;åŠè¿æ¥é˜Ÿåˆ—çš„è¿ä½œä¸TCPä¸‰æ¬¡æ¡æ‰‹å¯†ä¸å¯åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¥æ”¶SYN&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å‘é€SYNåŒ…è¯·æ±‚è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºæ¡ç›®å¹¶å“åº”&lt;/strong&gt;ï¼šæœåŠ¡å™¨æ”¶åˆ°SYNåï¼Œåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºè¯¥è¿æ¥çš„æ¡ç›®ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªç®€åŒ–çš„&lt;code&gt;struct request_sock&lt;/code&gt;ï¼Œæ¯”å®Œæ•´çš„socketç»“æ„èŠ‚çœèµ„æºï¼‰ï¼Œå°†å…¶æ”¾å…¥&lt;strong&gt;åŠè¿æ¥é˜Ÿåˆ—&lt;/strong&gt;ï¼Œå¹¶å›å¤SYN-ACKåŒ… ã€‚æ­¤æ—¶è¿æ¥çŠ¶æ€å˜ä¸º&lt;code&gt;SYN_RCVD&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç­‰å¾…ACK&lt;/strong&gt;ï¼šæœåŠ¡å™¨å¯åŠ¨å®šæ—¶å™¨ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ACKåŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®Œæˆæ¡æ‰‹&lt;/strong&gt;ï¼šè‹¥æ”¶åˆ°ACKï¼Œåˆ™ä¸‰æ¬¡æ¡æ‰‹å®Œæˆã€‚å†…æ ¸å°†æ­¤è¿æ¥ç§»å‡ºåŠè¿æ¥é˜Ÿåˆ—ï¼Œä¸ºå…¶åˆ†é…å®Œæ•´çš„èµ„æºï¼Œå¹¶æ”¾å…¥å¦ä¸€ä¸ªé˜Ÿåˆ—â€”â€”&lt;strong&gt;å…¨è¿æ¥é˜Ÿåˆ—ï¼ˆAccept Queueï¼‰&lt;/strong&gt;ï¼Œç­‰å¾…åº”ç”¨ç¨‹åºé€šè¿‡&lt;code&gt;accept()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å–èµ° ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶…æ—¶é‡ä¼ &lt;/strong&gt;ï¼šè‹¥åœ¨è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°ACKï¼ŒæœåŠ¡å™¨ä¼šé‡ä¼ SYN-ACKåŒ…ï¼ˆé‡ä¼ æ¬¡æ•°ç”±&lt;code&gt;tcp_synack_retries&lt;/code&gt;å‚æ•°æ§åˆ¶ï¼‰ï¼Œå¤šæ¬¡å¤±è´¥ååˆ™å°†è¯¥æ¡ç›®ä»åŠè¿æ¥é˜Ÿåˆ—ä¸­ä¸¢å¼ƒ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é˜Ÿåˆ—æº¢å‡ºä¸syn-floodæ”»å‡»"&gt;âš ï¸ é˜Ÿåˆ—æº¢å‡ºä¸SYN Floodæ”»å‡»
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é˜Ÿåˆ—æº¢å‡º&lt;/strong&gt;æ˜¯é«˜å¹¶å‘åœºæ™¯æˆ–é­å—æ”»å‡»æ—¶çš„å¸¸è§é—®é¢˜ã€‚å½“åŠè¿æ¥é˜Ÿåˆ—å·²æ»¡æ—¶ï¼ŒæœåŠ¡å™¨æ— æ³•ä¸ºæ–°çš„SYNè¯·æ±‚åˆ›å»ºæ¡ç›®ï¼Œä¼šç›´æ¥&lt;strong&gt;ä¸¢å¼ƒSYNåŒ…&lt;/strong&gt; ã€‚å®¢æˆ·ç«¯å› æ”¶ä¸åˆ°SYN-ACKä¼šåå¤é‡è¯•ï¼Œè¡¨ç°ä¸ºè¿æ¥è¶…æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å…¸å‹çš„æº¢å‡ºåŸå› æ˜¯&lt;strong&gt;SYN Floodæ”»å‡»&lt;/strong&gt; ã€‚æ”»å‡»è€…å‘é€å¤§é‡ä¼ªé€ æºIPçš„SYNåŒ…ï¼Œä½†ä¸å›å¤ACKã€‚è¿™ä¼šå¯¼è‡´æœåŠ¡å™¨çš„åŠè¿æ¥é˜Ÿåˆ—è¿…é€Ÿè¢«å æ»¡ï¼Œä»è€Œæ— æ³•å“åº”åˆæ³•ç”¨æˆ·çš„è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é˜²å¾¡æœºåˆ¶&lt;/strong&gt;ä¸»è¦æ˜¯å¯ç”¨ &lt;strong&gt;SYN Cookies&lt;/strong&gt;ï¼ˆé€šè¿‡è®¾ç½® &lt;code&gt;net.ipv4.tcp_syncookies=1&lt;/code&gt;ï¼‰ ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå½“é˜Ÿåˆ—å¿«æ»¡æ—¶ï¼ŒæœåŠ¡å™¨ä¸å†åœ¨å†…å­˜ä¸­åˆ›å»ºè¿æ¥æ¡ç›®ï¼Œè€Œæ˜¯åˆ©ç”¨å¯†ç å­¦æ–¹æ³•ç”Ÿæˆä¸€ä¸ª&lt;strong&gt;åºåˆ—å·ï¼ˆCookieï¼‰&lt;/strong&gt; å¹¶æ”¾åœ¨SYN-ACKåŒ…ä¸­ã€‚åªæœ‰æºå¸¦åˆæ³•Cookieçš„ACKåŒ…è¿”å›æ—¶ï¼ŒæœåŠ¡å™¨æ‰åˆ†é…èµ„æºå»ºç«‹è¿æ¥ã€‚è¿™æå¤§åœ°å¢å¼ºäº†æŠ—æ”»å‡»èƒ½åŠ›ï¼Œä½†ä¼šè½»å¾®å¢åŠ CPUå¼€é”€ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•ç›‘æ§ä¸è°ƒä¼˜"&gt;ğŸ” å¦‚ä½•ç›‘æ§ä¸è°ƒä¼˜
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›‘æ§é˜Ÿåˆ—çŠ¶æ€&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥çœ‹åŠè¿æ¥é˜Ÿåˆ—å½“å‰é•¿åº¦&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨å‘½ä»¤ &lt;code&gt;ss -n state syn-recv sport = :&amp;lt;ç«¯å£å·&amp;gt;&lt;/code&gt;æ¥ç»Ÿè®¡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥çœ‹æº¢å‡ºæƒ…å†µ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;netstat -s | grep -i &amp;quot;listen&amp;quot;&lt;/code&gt;æˆ–æ£€æŸ¥ &lt;code&gt;/proc/net/netstat&lt;/code&gt;ä¸­çš„ &lt;code&gt;ListenOverflows&lt;/code&gt;å’Œ &lt;code&gt;ListenDrops&lt;/code&gt;æŒ‡æ ‡ï¼Œå®ƒä»¬è®°å½•äº†å› é˜Ÿåˆ—æ»¡è€Œè¢«ä¸¢å¼ƒçš„è¿æ¥æ•° ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½è°ƒä¼˜å»ºè®®&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¢å¤§é˜Ÿåˆ—å®¹é‡&lt;/strong&gt;ï¼šå¯¹äºé«˜å¹¶å‘æœåŠ¡å™¨ï¼ˆå¦‚WebæœåŠ¡å™¨ï¼‰ï¼Œå¯é€‚å½“å¢å¤§ &lt;code&gt;net.ipv4.tcp_max_syn_backlog&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sysctl -w net.ipv4.tcp_max_syn_backlog=2048
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨SYN Cookies&lt;/strong&gt;ï¼šå»ºè®®å§‹ç»ˆå¯ç”¨ï¼Œä½œä¸ºé‡è¦çš„å®‰å…¨é˜²æŠ¤ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sysctl -w net.ipv4.tcp_syncookies=1
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–åº”ç”¨ç¨‹åº&lt;/strong&gt;ï¼šç¡®ä¿åº”ç”¨ç¨‹åºèƒ½åŠæ—¶è°ƒç”¨&lt;code&gt;accept()&lt;/code&gt;å¤„ç†å·²å»ºç«‹çš„è¿æ¥ï¼Œé˜²æ­¢å…¨è¿æ¥é˜Ÿåˆ—æ»¡ååè¿‡æ¥å½±å“åŠè¿æ¥é˜Ÿåˆ—çš„è½¬ç§» ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åŠè¿æ¥é˜Ÿåˆ—-vs-å…¨è¿æ¥é˜Ÿåˆ—"&gt;âš–ï¸ åŠè¿æ¥é˜Ÿåˆ— vs. å…¨è¿æ¥é˜Ÿåˆ—
&lt;/h3&gt;&lt;p&gt;ç†è§£ä¸¤è€…çš„åŒºåˆ«å¯¹äºè¯Šæ–­ç½‘ç»œé—®é¢˜è‡³å…³é‡è¦ ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŠè¿æ¥é˜Ÿåˆ— (SYN Queue)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¨è¿æ¥é˜Ÿåˆ— (Accept Queue)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨çš„è¿æ¥çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SYN_RCVD&lt;/code&gt;ï¼ˆæ­£åœ¨è¿›è¡Œç¬¬äºŒæ¬¡æ¡æ‰‹ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ESTABLISHED&lt;/code&gt;ï¼ˆå·²å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®¡ç†è¿æ¥çš„&lt;strong&gt;å»ºç«‹è¿‡ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®¡ç†è¿æ¥ç­‰å¾…è¢«&lt;strong&gt;åº”ç”¨ç¨‹åºæ¥å—&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ»¡é˜Ÿåˆ—çš„ç“¶é¢ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ„å‘³ç€&lt;strong&gt;å¤–éƒ¨&lt;/strong&gt;é—®é¢˜ï¼ˆå¦‚æ´ªæ°´æ”»å‡»ã€ç¬é—´è¶…é«˜å¹¶å‘ï¼‰&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ„å‘³ç€&lt;strong&gt;å†…éƒ¨&lt;/strong&gt;é—®é¢˜ï¼ˆåº”ç”¨ç¨‹åºå¤„ç†å¤ªæ…¢ï¼Œ&lt;code&gt;accept()&lt;/code&gt;ä¸åŠæ—¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;net.ipv4.tcp_max_syn_backlog&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;min( listen()å‡½æ•°ä¸­çš„backlogå‚æ•°, net.core.somaxconn )&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒåŠè¿æ¥é˜Ÿåˆ—æ˜¯è¿æ¥è¿›å…¥æœåŠ¡å™¨çš„â€œ&lt;strong&gt;å‰å°æ¥å¾…å¤„&lt;/strong&gt;â€ï¼Œè´Ÿè´£åˆæ­¥æ¥æ´½ï¼›è€Œå…¨è¿æ¥é˜Ÿåˆ—åˆ™æ˜¯â€œ&lt;strong&gt;ç­‰å€™å®¤&lt;/strong&gt;â€ï¼Œè¿æ¥å·²ç¡®è®¤èº«ä»½ï¼Œæ­£ç­‰å¾…è¢«ä¸šåŠ¡éƒ¨é—¨ï¼ˆåº”ç”¨ç¨‹åºï¼‰æ­£å¼æ¥å¾…ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£åŠè¿æ¥é˜Ÿåˆ—çš„å·¥ä½œåŸç†å’Œé‡è¦æ€§ï¼å¦‚æœä½ å¯¹å…·ä½“æŸä¸ªåº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸‰æ¬¡æ¡æ‰‹å®Œæˆåï¼Œè¿æ¥å…ˆæ’åœ¨å…¨è¿æ¥é˜Ÿåˆ—ï¼Œç›´åˆ°åº”ç”¨å±‚è°ƒç”¨accept()æ‰çœŸæ­£å»ºç«‹èµ·å¯¹åº”çš„ socket å¹¶ç§»å‡ºé˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èƒŒå‹åº”ç”¨&lt;/strong&gt;
å¦‚æœåº”ç”¨å¤„ç†ä¸è¿‡æ¥ï¼ˆaccept() è¿Ÿè¿Ÿä¸è°ƒç”¨ï¼‰ï¼Œå…¨è¿æ¥é˜Ÿåˆ—ä¹Ÿä¼šæ»¡ï¼Œä»è€Œè®©å†…æ ¸å‘ŠçŸ¥å®¢æˆ·ç«¯â€œæœåŠ¡å™¨å¿™â€ï¼ˆå¯è§ TCP æ‹’ç»æœåŠ¡çš„å‰¯æ•ˆåº”ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="tcp"&gt;TCP
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¢«åŠ¨æ‰“å¼€ï¼ˆPassive Openï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡è°ƒç”¨listen()ï¼Œå¥—æ¥å­—è¿›å…¥&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CLOSED â†’ LISTEN&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN åæ‰å›å¤ SYN+ACKï¼Œå®Œæˆæ¡æ‰‹åç”±accept()è¿”å›å·²è¿æ¥å¥—æ¥å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸»åŠ¨æ‰“å¼€ï¼ˆActive Openï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡è°ƒç”¨connect()ï¼Œå¥—æ¥å­—ä»&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CLOSED â†’ SYN_SENT&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘å¯¹ç«¯å‘é€ SYNï¼Œç­‰å¾…å¯¹æ–¹ SYN+ACKï¼Œå†å›å¤ ACKï¼Œè¿›å…¥ ESTABLISHED å¹¶è¿”å›æˆåŠŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨å¤§å¤šæ•°å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å‹ä¸­ï¼ŒæœåŠ¡ç«¯ç”¨è¢«åŠ¨æ‰“å¼€ï¼Œå®¢æˆ·ç«¯ç”¨ä¸»åŠ¨æ‰“å¼€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç†è§£ &lt;code&gt;listen()&lt;/code&gt;, &lt;code&gt;accept()&lt;/code&gt;, å’Œ &lt;code&gt;connect()&lt;/code&gt;è¿™ä¸‰ä¸ªå‡½æ•°å¯¹äºæŒæ¡ç½‘ç»œç¼–ç¨‹è‡³å…³é‡è¦ã€‚å®ƒä»¬å…±åŒåä½œï¼Œåœ¨TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ï¼Œä»è€Œå»ºç«‹èµ·å¯é çš„ç½‘ç»œè¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸‰ä¸ªæ ¸å¿ƒå‡½æ•°çš„èŒè´£ä¸ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°&lt;/th&gt;
&lt;th&gt;è°ƒç”¨æ–¹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;th&gt;å…³é”®å‚æ•°&lt;/th&gt;
&lt;th&gt;é˜»å¡/éé˜»å¡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;connect()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åŠ¨å‘æœåŠ¡å™¨å‘èµ·è¿æ¥è¯·æ±‚ï¼Œè§¦å‘TCPä¸‰æ¬¡æ¡æ‰‹ã€‚&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨åœ°å€ä¿¡æ¯&lt;/td&gt;
&lt;td&gt;é€šå¸¸é˜»å¡ï¼Œç›´åˆ°è¿æ¥æˆåŠŸæˆ–å¤±è´¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;listen()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨ç«¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å¥—æ¥å­—ç½®äº&lt;strong&gt;ç›‘å¬&lt;/strong&gt;çŠ¶æ€ï¼Œå¹¶åˆ›å»ºè¿æ¥è¯·æ±‚é˜Ÿåˆ—ï¼ˆåŒ…æ‹¬åŠè¿æ¥é˜Ÿåˆ—å’Œå…¨è¿æ¥é˜Ÿåˆ—ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;backlog&lt;/code&gt;ï¼ˆé˜Ÿåˆ—æœ€å¤§é•¿åº¦ï¼‰&lt;/td&gt;
&lt;td&gt;éé˜»å¡ï¼Œç«‹å³è¿”å›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;accept()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨ç«¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;å…¨è¿æ¥é˜Ÿåˆ—&lt;/strong&gt;ä¸­å–å‡ºä¸€ä¸ªå·²å»ºç«‹çš„è¿æ¥ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ª&lt;strong&gt;æ–°çš„å¥—æ¥å­—&lt;/strong&gt;ç”¨äºæ•°æ®ä¼ è¾“ã€‚&lt;/td&gt;
&lt;td&gt;ç›‘å¬å¥—æ¥å­—æè¿°ç¬¦&lt;/td&gt;
&lt;td&gt;é»˜è®¤é˜»å¡ï¼Œç›´åˆ°æœ‰æ–°çš„è¿æ¥åˆ°è¾¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£åä½œæµç¨‹"&gt;ğŸ”„ æ·±å…¥ç†è§£åä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;è¿™ä¸‰ä¸ªå‡½æ•°ç´§å¯†é…åˆï¼Œå…±åŒå®Œæˆäº†TCPæœåŠ¡å™¨çš„å®¢æˆ·ç«¯è¿æ¥æ¥çº³è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨å‡†å¤‡ (&lt;code&gt;socket()&lt;/code&gt;-&amp;gt; &lt;code&gt;bind()&lt;/code&gt;-&amp;gt; &lt;code&gt;listen()&lt;/code&gt;)&lt;/strong&gt;ï¼šæœåŠ¡å™¨ç¨‹åºé¦–å…ˆè°ƒç”¨ &lt;code&gt;socket()&lt;/code&gt;åˆ›å»ºäº†ä¸€ä¸ª&lt;strong&gt;ç›‘å¬å¥—æ¥å­—&lt;/strong&gt;ã€‚æ¥ç€ï¼Œ&lt;code&gt;bind()&lt;/code&gt;å°†è¿™ä¸ªå¥—æ¥å­—ä¸ä¸€ä¸ªå…·ä½“çš„IPåœ°å€å’Œç«¯å£å·ç»‘å®šï¼Œä½¿å…¶æˆä¸ºå®¢æˆ·ç«¯å¯ä»¥è®¿é—®çš„ç«¯ç‚¹ã€‚æœ€åï¼Œè°ƒç”¨ &lt;code&gt;listen()&lt;/code&gt;ï¼Œå†…æ ¸ä¼šä¸ºè¿™ä¸ªç›‘å¬å¥—æ¥å­—åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—ï¼š&lt;strong&gt;åŠè¿æ¥é˜Ÿåˆ—ï¼ˆSYNé˜Ÿåˆ—ï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;å…¨è¿æ¥é˜Ÿåˆ—ï¼ˆAccepté˜Ÿåˆ—ï¼‰&lt;/strong&gt;ï¼ŒæœåŠ¡å™¨è¿›å…¥ç­‰å¾…è¿æ¥çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯è¿æ¥ (&lt;code&gt;socket()&lt;/code&gt;-&amp;gt; &lt;code&gt;connect()&lt;/code&gt;)&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯ä¹Ÿåˆ›å»ºè‡ªå·±çš„å¥—æ¥å­—ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;connect()&lt;/code&gt;ã€‚è¯¥å‡½æ•°ä¼šå‘æœåŠ¡å™¨å‘é€SYNåŒ…ï¼Œå‘èµ·ä¸‰æ¬¡æ¡æ‰‹ã€‚è¿™ä¸ªè¯·æ±‚ä¼šè¢«æœåŠ¡å™¨æ”¾å…¥å…¶&lt;strong&gt;åŠè¿æ¥é˜Ÿåˆ—&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®Œæˆæ¡æ‰‹ä¸é˜Ÿåˆ—è¿ç§»&lt;/strong&gt;ï¼šå½“æœåŠ¡å™¨æ”¶åˆ°SYNåŒ…å¹¶å›å¤SYN-ACKï¼Œå®¢æˆ·ç«¯æœ€ç»ˆå›å¤ACKåï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæˆã€‚æ­¤æ—¶ï¼Œå†…æ ¸ä¼šå°†è¿™ä¸ªæˆåŠŸçš„è¿æ¥ä»&lt;strong&gt;åŠè¿æ¥é˜Ÿåˆ—&lt;/strong&gt;ç§»è‡³&lt;strong&gt;å…¨è¿æ¥é˜Ÿåˆ—&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨æ¥å—è¿æ¥ (&lt;code&gt;accept()&lt;/code&gt;)&lt;/strong&gt;ï¼šæœåŠ¡å™¨è°ƒç”¨ &lt;code&gt;accept()&lt;/code&gt;å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šä»&lt;strong&gt;å…¨è¿æ¥é˜Ÿåˆ—&lt;/strong&gt;ä¸­å–å‡ºç¬¬ä¸€ä¸ªå·²å»ºç«‹çš„è¿æ¥ã€‚&lt;strong&gt;å…³é”®ç‚¹åœ¨äº&lt;/strong&gt;ï¼š&lt;code&gt;accept()&lt;/code&gt;ä¼šä¸ºè¿™ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ª&lt;strong&gt;å…¨æ–°çš„å¥—æ¥å­—&lt;/strong&gt;ï¼Œä¸“é—¨ç”¨äºå’Œè¿™ä¸ªç‰¹å®šçš„å®¢æˆ·ç«¯é€šä¿¡ã€‚è€Œæœ€åˆçš„&lt;strong&gt;ç›‘å¬å¥—æ¥å­—&lt;/strong&gt;åˆ™ç»§ç»­ä¿æŒç›‘å¬çŠ¶æ€ï¼Œç­‰å¾…å…¶ä»–æ–°çš„è¿æ¥è¯·æ±‚ã€‚è¿™æ˜¯ä¸€ç§å…¸å‹çš„â€œä¸€ä¸ªç›‘å¬ï¼Œå¤šä¸ªé€šä¿¡â€çš„æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ¦‚å¿µä¸å®æˆ˜æç¤º"&gt;ğŸ’¡ é‡è¦æ¦‚å¿µä¸å®æˆ˜æç¤º
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;backlog&lt;/code&gt;å‚æ•°&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;listen()&lt;/code&gt;å‡½æ•°ä¸­ï¼Œè¿™ä¸ªå‚æ•°é™åˆ¶äº†å…¨è¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚å¦‚æœæœåŠ¡å™¨æ¥ä¸åŠè°ƒç”¨ &lt;code&gt;accept()&lt;/code&gt;å¤„ç†è¿æ¥ï¼Œè€Œé˜Ÿåˆ—å·²æ»¡ï¼Œæ–°çš„è¿æ¥è¯·æ±‚å¯èƒ½ä¼šè¢«æ‹’ç»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡ä¸éé˜»å¡I/O&lt;/strong&gt;ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ&lt;code&gt;connect()&lt;/code&gt;ï¼ˆåœ¨å®¢æˆ·ç«¯ï¼‰å’Œ &lt;code&gt;accept()&lt;/code&gt;ï¼ˆåœ¨æœåŠ¡å™¨ç«¯ï¼‰æ˜¯&lt;strong&gt;é˜»å¡&lt;/strong&gt;çš„ï¼Œæ„å‘³ç€ç¨‹åºä¼šæš‚åœæ‰§è¡Œç›´åˆ°æ“ä½œå®Œæˆã€‚åœ¨å®é™…çš„é«˜æ€§èƒ½æœåŠ¡å™¨ä¸­ï¼Œå¸¸ä½¿ç”¨&lt;strong&gt;éé˜»å¡I/O&lt;/strong&gt;æˆ–&lt;strong&gt;I/Oå¤šè·¯å¤ç”¨&lt;/strong&gt;æŠ€æœ¯ï¼ˆå¦‚ &lt;code&gt;select&lt;/code&gt;, &lt;code&gt;poll&lt;/code&gt;, &lt;code&gt;epoll&lt;/code&gt;ï¼‰æ¥åŒæ—¶ç®¡ç†å¤šä¸ªè¿æ¥ï¼Œé¿å…ç¨‹åºåœæ»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥é˜Ÿåˆ—ä¸æ€§èƒ½&lt;/strong&gt;ï¼šç†è§£åŠè¿æ¥é˜Ÿåˆ—å’Œå…¨è¿æ¥é˜Ÿåˆ—å¯¹äºè¯Šæ–­æœåŠ¡å™¨æ€§èƒ½é—®é¢˜éå¸¸é‡è¦ã€‚ä¾‹å¦‚ï¼Œé­é‡SYN Floodæ”»å‡»æ—¶ï¼ŒåŠè¿æ¥é˜Ÿåˆ—å¯èƒ½ä¼šè¢«å¡«æ»¡ï¼›è€Œå¦‚æœåº”ç”¨ç¨‹åºå¤„ç†è¿æ¥è¿‡æ…¢ï¼Œåˆ™ä¼šå¯¼è‡´å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;listen()&lt;/code&gt;, &lt;code&gt;accept()&lt;/code&gt;, å’Œ &lt;code&gt;connect()&lt;/code&gt;è¿™ä¸‰ä¸ªå‡½æ•°åœ¨ç½‘ç»œé€šä¿¡ä¸­çš„æ ¸å¿ƒä½œç”¨ã€‚&lt;/p&gt;
&lt;h2 id="ç½‘ç»œæ¥å£"&gt;ç½‘ç»œæ¥å£
&lt;/h2&gt;&lt;p&gt;å½“æœåŠ¡å™¨ç¨‹åºå°è¯•ç»‘å®šçš„IPåœ°å€ä¸ä¸»æœºè‡ªèº«çš„ç½‘ç»œæ¥å£åœ°å€ä¸åŒ¹é…æ—¶ï¼Œç»‘å®šæ“ä½œé€šå¸¸ä¼šå¤±è´¥ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸»è¦çš„æƒ…å†µå’Œç»“æœã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»‘å®šIPåœ°å€ç±»å‹&lt;/th&gt;
&lt;th&gt;ç³»ç»Ÿåˆ¤å®š&lt;/th&gt;
&lt;th&gt;å…¸å‹ç»“æœ&lt;/th&gt;
&lt;th&gt;å¸¸è§é”™è¯¯æç¤º&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬æœºä¸å­˜åœ¨çš„IP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ°å€æ— æ•ˆ&lt;/td&gt;
&lt;td&gt;ç»‘å®šå¤±è´¥&lt;/td&gt;
&lt;td&gt;&lt;code&gt;bind: The requested address is not valid in its context&lt;/code&gt;æˆ– &lt;code&gt;Errno 99: Cannot assign requested address&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¶ä»–ç½‘ç»œæ¥å£çš„IP&lt;/strong&gt; (å¦‚ç»‘å®š192.168.1.100åˆ°IPä¸º16.158.23.6çš„æ¥å£)&lt;/td&gt;
&lt;td&gt;åœ°å€ä¸å¯ç”¨&lt;/td&gt;
&lt;td&gt;ç»‘å®šå¤±è´¥&lt;/td&gt;
&lt;td&gt;&lt;code&gt;EADDRNOTAVAIL&lt;/code&gt;(Address not available)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šé…ç¬¦åœ°å€&lt;/strong&gt; &lt;code&gt;0.0.0.0&lt;/code&gt;(IPv4)&lt;/td&gt;
&lt;td&gt;æœ‰æ•ˆä¸”å¸¸ç”¨&lt;/td&gt;
&lt;td&gt;ç»‘å®šæˆåŠŸï¼Œç›‘å¬æ‰€æœ‰æ¥å£&lt;/td&gt;
&lt;td&gt;æ— é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é”™è¯¯åŸå› æ·±åº¦è§£æ"&gt;ğŸ” é”™è¯¯åŸå› æ·±åº¦è§£æ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿçš„ä¸¥æ ¼æ ¡éªŒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æ‚¨è°ƒç”¨ &lt;code&gt;bind()&lt;/code&gt;æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ£€æŸ¥æŒ‡å®šçš„IPåœ°å€æ˜¯å¦å±äºä¸»æœºä¸Šçš„æŸä¸ª&lt;strong&gt;æ´»è·ƒç½‘ç»œæ¥å£&lt;/strong&gt;ï¼ˆå¦‚ç‰©ç†ç½‘å¡ã€è™šæ‹Ÿç½‘å¡ã€ç¯å›æ¥å£loï¼‰ã€‚å¦‚æœæ‚¨å°è¯•ç»‘å®šä¸€ä¸ªä¸å±äºä»»ä½•æ¥å£çš„IPåœ°å€ï¼ˆä¾‹å¦‚ï¼Œé…ç½®äº†ä¸€ä¸ªé”™è¯¯çš„æˆ–è™šæ‹Ÿçš„IPï¼‰ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ— æ•ˆè¯·æ±‚å¹¶æ‹’ç»ç»‘å®š ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç½‘ç»œé€šä¿¡çš„é€»è¾‘åŸºç¡€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»ç½‘ç»œé€šä¿¡åŸç†çœ‹ï¼Œä¸€ä¸ªä¸»æœºåªèƒ½æ¥æ”¶å‘å¾€å…¶è‡ªèº«æ¥å£IPåœ°å€çš„æ•°æ®åŒ…ã€‚ç»‘å®šä¸€ä¸ªä¸å±äºè‡ªå·±çš„IPï¼Œæ„å‘³ç€æ“ä½œç³»ç»Ÿéœ€è¦ç›‘å¬å¹¶å¤„ç†å‘å¾€é‚£ä¸ªâ€œä¸å±äºè‡ªå·±â€çš„åœ°å€çš„æ•°æ®åŒ…ï¼Œè¿™è¿èƒŒäº†åŸºæœ¬çš„ç½‘ç»œè§„åˆ™ï¼Œå› æ­¤ä¸è¢«å…è®¸ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è§£å†³æ–¹æ¡ˆä¸å®è·µå»ºè®®"&gt;ğŸ› ï¸ è§£å†³æ–¹æ¡ˆä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨é€šé…ç¬¦åœ°å€ &lt;code&gt;0.0.0.0&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœå¸Œæœ›æœåŠ¡å™¨èƒ½ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šçš„è¿æ¥ï¼Œæœ€å¸¸ç”¨ä¸”æ¨èçš„æ–¹æ³•æ˜¯ç»‘å®š &lt;code&gt;0.0.0.0&lt;/code&gt;ã€‚è¿™æ ·ï¼Œæ— è®ºé€šè¿‡å“ªä¸ªIPï¼ˆåŒ…æ‹¬127.0.0.1ï¼‰è®¿é—®è¯¥æœåŠ¡å™¨çš„æŒ‡å®šç«¯å£ï¼Œéƒ½èƒ½è¢«æ¥æ”¶åˆ° ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»‘å®šå‰è¿›è¡ŒéªŒè¯&lt;/strong&gt;ï¼šåœ¨è°ƒç”¨ &lt;code&gt;bind()&lt;/code&gt;ä¹‹å‰ï¼Œå¯ä»¥å…ˆä½¿ç”¨ &lt;code&gt;ipconfig&lt;/code&gt;ï¼ˆWindowsï¼‰æˆ– &lt;code&gt;ifconfig&lt;/code&gt;/&lt;code&gt;ip addr&lt;/code&gt;ï¼ˆLinuxï¼‰å‘½ä»¤æŸ¥çœ‹æœ¬æœºæ‰€æœ‰æœ‰æ•ˆçš„IPåœ°å€ï¼Œç¡®ä¿ç»‘å®šçš„åœ°å€åœ¨å…¶ä¸­ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥ç½‘ç»œé…ç½®&lt;/strong&gt;ï¼šæœ‰æ—¶IPåœ°å€é…ç½®é”™è¯¯æˆ–ç½‘ç»œæ¥å£æœªå°±ç»ªä¹Ÿä¼šå¯¼è‡´é—®é¢˜ï¼Œç¡®ä¿ç½‘ç»œé…ç½®æ­£ç¡®ä¸”æ¥å£å¤„äºæ´»åŠ¨çŠ¶æ€ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒæ€»ç»“"&gt;ğŸ’ æ ¸å¿ƒæ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒæœåŠ¡å™¨ç»‘å®šçš„IPåœ°å€å¿…é¡»æ˜¯&lt;strong&gt;æœ¬æœºå·²æœ‰çš„&lt;/strong&gt;ï¼Œå¦åˆ™ç»‘å®šä¼šå¤±è´¥ã€‚è¿™æ˜¯ç”±æ“ä½œç³»ç»Ÿå¯¹ç½‘ç»œé€šä¿¡çš„åŸºç¡€ç®¡ç†è§„åˆ™å†³å®šçš„ã€‚ä½¿ç”¨é€šé…ç¬¦åœ°å€ &lt;code&gt;0.0.0.0&lt;/code&gt;æ˜¯é¿å…æ­¤ç±»é—®é¢˜å¹¶è®©æœåŠ¡åœ¨æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šå¯ç”¨çš„æ ‡å‡†åšæ³•ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©æ‚¨ç†è§£èƒŒåçš„åŸç†å¹¶è§£å†³é—®é¢˜ï¼å¦‚æœè¿˜æœ‰å…¶ä»–ç›¸å…³ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="ç½‘ç»œæ¥å£-1"&gt;ç½‘ç»œæ¥å£
&lt;/h2&gt;&lt;p&gt;ä¸»æœºä¸Šçš„ç½‘ç»œæ¥å£æ˜¯è®¡ç®—æœºä¸ç½‘ç»œä¸–ç•Œè¿æ¥çš„æ¡¥æ¢ï¼Œå®ƒä»¬å½¢æ€å„å¼‚ï¼Œå„æœ‰ä¸“é•¿ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸»è¦çš„ç½‘ç»œæ¥å£åˆ†ç±»å’Œå®ƒä»¬çš„æ ¸å¿ƒç‰¹å¾ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†ç±»&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;å…³é”®ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹å¾ / ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‰©ç†æ¥å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰çº¿ä»¥å¤ªç½‘å¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;eth0&lt;/code&gt;, &lt;code&gt;enp0s3&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯¹åº”çœŸå®ç¡¬ä»¶ï¼Œé€šè¿‡ç½‘çº¿ï¼ˆå¦‚RJ-45æ¥å£ï¼‰æˆ–å…‰çº¤ï¼ˆå¦‚SFP+æ¥å£ï¼‰è¿æ¥æœ‰çº¿ç½‘ç»œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ— çº¿ç½‘å¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;wlan0&lt;/code&gt;, &lt;code&gt;wlp2s0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡æ— çº¿ç”µæ³¢ï¼ˆå¦‚Wi-Fiï¼‰è¿æ¥ç½‘ç»œï¼Œæä¾›ç§»åŠ¨ä¾¿åˆ©æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;å¹¿åŸŸç½‘æ¥å£&lt;/td&gt;
&lt;td&gt;ä¸²å£ï¼ˆRS-232ï¼‰ã€å…‰çº¤æ¥å£ï¼ˆLC/SCï¼‰&lt;/td&gt;
&lt;td&gt;ç”¨äºè¿æ¥ä¸åŒåœ°ç†ä½ç½®çš„ç½‘ç»œï¼Œå¸¸è§äºè·¯ç”±å™¨å’Œé˜²ç«å¢™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è™šæ‹Ÿæ¥å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¯å›æ¥å£&lt;/td&gt;
&lt;td&gt;&lt;code&gt;lo&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è™šæ‹Ÿæ¥å£ï¼Œç”¨äºæœ¬æœºå†…éƒ¨è¿›ç¨‹é€šä¿¡å’Œæµ‹è¯•ï¼ŒIPåœ°å€å›ºå®šä¸º127.0.0.1ï¼ˆIPv4ï¼‰å’Œ::1ï¼ˆIPv6ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ¡¥æ¥æ¥å£&lt;/td&gt;
&lt;td&gt;&lt;code&gt;br0&lt;/code&gt;, &lt;code&gt;docker0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è™šæ‹Ÿäº¤æ¢æœºï¼Œç”¨äºè¿æ¥å¤šä¸ªç½‘ç»œæ®µï¼Œä¾‹å¦‚å®ç°è™šæ‹Ÿæœºé—´é€šä¿¡æˆ–Dockerå®¹å™¨ç½‘ç»œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;éš§é“æ¥å£&lt;/td&gt;
&lt;td&gt;&lt;code&gt;tun0&lt;/code&gt;, &lt;code&gt;tap0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºåˆ›å»ºVPNç­‰åŠ å¯†éš§é“ï¼Œå®ç°å®‰å…¨ã€è·¨ç½‘ç»œçš„é€šä¿¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;VLANæ¥å£&lt;/td&gt;
&lt;td&gt;&lt;code&gt;eth0.10&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å•ä¸€ç‰©ç†ç½‘å¡ä¸Šé€»è¾‘åˆ’åˆ†å‡ºå¤šä¸ªç‹¬ç«‹çš„è™šæ‹Ÿå±€åŸŸç½‘ï¼Œå®ç°ç½‘ç»œéš”ç¦»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç‰©ç†ç½‘å¡çœŸå®çš„è¿æ¥å™¨"&gt;ğŸ’» ç‰©ç†ç½‘å¡ï¼šçœŸå®çš„è¿æ¥å™¨
&lt;/h3&gt;&lt;p&gt;ç‰©ç†ç½‘å¡æ˜¯å®å®åœ¨åœ¨çš„ç¡¬ä»¶è®¾å¤‡ï¼Œå®ƒæ˜¯è®¡ç®—æœºæ¥å…¥ç½‘ç»œçš„ç‰©ç†åŸºç¡€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†ä¸è¯†åˆ«&lt;/strong&gt;ï¼šç½‘å¡è´Ÿè´£å°†è®¡ç®—æœºå†…éƒ¨çš„æ•°å­—ä¿¡å·è½¬æ¢æˆå¯ä»¥åœ¨ç½‘çº¿æˆ–ç©ºæ°”ä¸­ä¼ è¾“çš„ä¿¡å·ï¼ˆå¦‚ç”µä¿¡å·ã€å…‰ä¿¡å·æˆ–æ— çº¿ç”µæ³¢ï¼‰ã€‚æ¯å—ç‰©ç†ç½‘å¡åœ¨å‡ºå‚æ—¶éƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªå…¨çƒå”¯ä¸€çš„&lt;strong&gt;MACåœ°å€&lt;/strong&gt;ï¼ˆç‰©ç†åœ°å€ï¼‰ï¼Œç”¨äºåœ¨ç½‘ç»œåº•å±‚æ ‡è¯†è®¾å¤‡èº«ä»½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹ä¸æ¼”è¿›&lt;/strong&gt;ï¼šç‰©ç†ç½‘å¡å¯ä»¥æ ¹æ®&lt;strong&gt;æ€»çº¿ç±»å‹&lt;/strong&gt;ï¼ˆå¦‚æ—©æœŸçš„ISAã€ä¸»æµçš„PCI/PCI-Eã€ç¬”è®°æœ¬çš„PCMCIA/CardBusã€é€šç”¨çš„USBï¼‰ã€&lt;strong&gt;ä¼ è¾“å¸¦å®½&lt;/strong&gt;ï¼ˆå¦‚10Mbpsã€100Mbpsã€1Gbpsã€10Gbpsç”šè‡³æ›´é«˜ï¼‰ä»¥åŠ&lt;strong&gt;ç½‘ç»œæ¥å£&lt;/strong&gt;ï¼ˆæœ€å¸¸è§çš„RJ-45åŒç»çº¿æ¥å£ï¼Œä»¥åŠç”¨äºå…‰çº¤çš„SFPæ¥å£ç­‰ï¼‰è¿›è¡Œåˆ†ç±»ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œç½‘å¡æ¥å£çš„å‘½åè§„åˆ™ä¹Ÿåœ¨æ¼”è¿›ï¼Œä»ä¼ ç»Ÿçš„&lt;code&gt;eth0&lt;/code&gt;ã€&lt;code&gt;eth1&lt;/code&gt;åˆ°æ›´å¯é¢„æµ‹çš„&lt;strong&gt;ä¸€è‡´æ€§å‘½å&lt;/strong&gt;å¦‚&lt;code&gt;enp0s3&lt;/code&gt;ï¼ˆEthernet, PCIæ€»çº¿0, æ’æ§½3ï¼‰ï¼Œè¿™ä½¿å¾—æ¥å£åç§°æ›´ç¨³å®šï¼Œä¸å› ç¡¬ä»¶è¯†åˆ«é¡ºåºè€Œæ”¹å˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è™šæ‹Ÿæ¥å£çµæ´»çš„é€»è¾‘é€šé“"&gt;ğŸ§  è™šæ‹Ÿæ¥å£ï¼šçµæ´»çš„é€»è¾‘é€šé“
&lt;/h3&gt;&lt;p&gt;è™šæ‹Ÿæ¥å£ç”±æ“ä½œç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºé€šè¿‡è½¯ä»¶åˆ›å»ºï¼Œæ²¡æœ‰å¯¹åº”çš„ç‰©ç†ç¡¬ä»¶ï¼Œä½†å´ä¸ºå®ç°å¤æ‚ç½‘ç»œåŠŸèƒ½æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¯å›æ¥å£&lt;/strong&gt;ï¼šè¿™æ˜¯æ¯ä¸ªæ“ä½œç³»ç»Ÿéƒ½è‡ªå¸¦çš„ä¸€ä¸ªè™šæ‹Ÿæ¥å£ã€‚å®ƒå°±åƒä¸€ä¸ªå†…éƒ¨çš„â€œå›å£°å£â€ï¼Œæ‰€æœ‰å‘é€åˆ°ç¯å›æ¥å£çš„æ•°æ®éƒ½ä¼šç«‹åˆ»è¢«æœ¬æœºæ¥æ”¶ã€‚å®ƒæœ€é‡è¦çš„ç”¨é€”æ˜¯ï¼š&lt;strong&gt;æœ¬åœ°æœåŠ¡æµ‹è¯•ä¸é€šä¿¡&lt;/strong&gt;ï¼Œä¾‹å¦‚ï¼Œä½ åœ¨æœ¬æœºæ­å»ºä¸€ä¸ªç½‘ç«™ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;http://127.0.0.1&lt;/code&gt;æ¥è®¿é—®ï¼›&lt;strong&gt;ç³»ç»Ÿå†…éƒ¨è¿›ç¨‹é—´é€šä¿¡&lt;/strong&gt;ï¼Œè®¸å¤šæ•°æ®åº“å’Œåº”ç”¨æœåŠ¡é»˜è®¤ç»‘å®šåˆ°ç¯å›åœ°å€ï¼Œå¢å¼ºå®‰å…¨æ€§ï¼Œé¿å…æš´éœ²ç»™å¤–éƒ¨ç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡¥æ¥æ¥å£&lt;/strong&gt;ï¼šå®ƒåƒä¸€ä¸ªè™šæ‹Ÿçš„&lt;strong&gt;ç½‘ç»œäº¤æ¢æœº&lt;/strong&gt;ï¼Œå¯ä»¥å°†å¤šä¸ªç½‘ç»œæ¥å£ï¼ˆå¯ä»¥æ˜¯ç‰©ç†çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è™šæ‹Ÿçš„ï¼‰è¿æ¥åœ¨åŒä¸€ä¸ªå¹¿æ’­åŸŸå†…ã€‚æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š&lt;strong&gt;è™šæ‹Ÿæœºç½‘ç»œ&lt;/strong&gt;ï¼Œå°†è™šæ‹Ÿæœºçš„è™šæ‹Ÿç½‘å¡ä¸å®¿ä¸»æœºçš„ç‰©ç†ç½‘å¡é€šè¿‡æ¡¥æ¥è¿æ¥ï¼Œä½¿è™šæ‹Ÿæœºå¦‚åŒç›´æ¥æ¥å…¥ç‰©ç†ç½‘ç»œä¸€æ ·ï¼›&lt;strong&gt;å®¹å™¨ç½‘ç»œ&lt;/strong&gt;ï¼ŒDockeré»˜è®¤åˆ›å»ºçš„&lt;code&gt;docker0&lt;/code&gt;å°±æ˜¯ä¸€ä¸ªæ¡¥æ¥æ¥å£ï¼Œè´Ÿè´£æ‰€æœ‰å®¹å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éš§é“æ¥å£&lt;/strong&gt;ï¼šç”¨äºåˆ›å»ºåŠ å¯†çš„é€šä¿¡éš§é“ï¼Œå°†æ•°æ®åŒ…å°è£…åœ¨å¦ä¸€ä¸ªæ•°æ®åŒ…å†…è¿›è¡Œä¼ è¾“ã€‚è¿™å¯¹äºåœ¨å…¬å…±ç½‘ç»œï¼ˆå¦‚äº’è”ç½‘ï¼‰ä¸Šå®‰å…¨åœ°è¿æ¥ä¸¤ä¸ªç§æœ‰ç½‘ç»œï¼ˆå³æ„å»ºVPNï¼‰è‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VLANæ¥å£&lt;/strong&gt;ï¼šå…è®¸ä½ åœ¨ä¸€ä¸ªç‰©ç†ç½‘ç»œè®¾å¤‡ä¸Šåˆ’åˆ†å‡ºå¤šä¸ªé€»è¾‘ä¸Šç‹¬ç«‹çš„ç½‘ç»œï¼Œæœ‰æ•ˆèŠ‚çº¦ç¡¬ä»¶æˆæœ¬å¹¶æé«˜ç½‘ç»œå®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é…ç½®ä¸ç®¡ç†"&gt;ğŸ”§ é…ç½®ä¸ç®¡ç†
&lt;/h3&gt;&lt;p&gt;äº†è§£å¦‚ä½•æŸ¥çœ‹å’Œé…ç½®è¿™äº›æ¥å£æ˜¯è¿›è¡Œç½‘ç»œç®¡ç†çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥çœ‹æ¥å£ä¿¡æ¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;ip addr show&lt;/code&gt;æˆ– &lt;code&gt;ip link show&lt;/code&gt;å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£çš„IPåœ°å€ã€çŠ¶æ€ç­‰è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ä¼ ç»Ÿçš„ &lt;code&gt;ifconfig&lt;/code&gt;å‘½ä»¤ä¹Ÿå¯ä»¥æŸ¥çœ‹ï¼Œä½†å®ƒåœ¨éƒ¨åˆ†æ–°ç³»ç»Ÿä¸­å¯èƒ½éœ€è¦é¢å¤–å®‰è£…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®é…ç½®é¡¹&lt;/strong&gt;ï¼šä¸ºä¸€ä¸ªç½‘ç»œæ¥å£é…ç½®&lt;strong&gt;IPåœ°å€ã€å­ç½‘æ©ç å’Œç½‘å…³&lt;/strong&gt;æ˜¯ä½¿å…¶èƒ½å¤Ÿä¸å…¶ä»–è®¾å¤‡é€šä¿¡çš„åŸºæœ¬æ­¥éª¤ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®&lt;strong&gt;MTU&lt;/strong&gt;ç­‰å‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œç‰©ç†ç½‘å¡æä¾›äº†è¿æ¥ç½‘ç»œçš„&lt;strong&gt;ç¡¬ä»¶åŸºç¡€&lt;/strong&gt;ï¼Œè€Œè™šæ‹Ÿæ¥å£åˆ™æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šé€šè¿‡è½¯ä»¶å®ç°çš„&lt;strong&gt;é€»è¾‘åŠŸèƒ½æ‰©å±•&lt;/strong&gt;ã€‚å®ƒä»¬å…±åŒåä½œï¼Œè®©ä¸€å°ä¸»æœºèƒ½å¤Ÿçµæ´»åœ°é€‚åº”ä»ç®€å•çš„ä¸Šç½‘å†²æµªåˆ°å¤æ‚çš„äº‘è®¡ç®—ã€è™šæ‹ŸåŒ–ç­‰å„ç§ç½‘ç»œç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ä¸»æœºä¸Šçš„ç½‘ç»œæ¥å£ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é…ç½®æˆ–æŸç±»æ¥å£æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="accept"&gt;accept
&lt;/h2&gt;&lt;p&gt;åœ¨ &lt;code&gt;listen(sockfd, backlog)&lt;/code&gt;å‡½æ•°ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;sockfd&lt;/code&gt;&lt;/strong&gt; æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„å‚æ•°ï¼Œå®ƒæ˜¯ç”± &lt;code&gt;socket()&lt;/code&gt;å‡½æ•°è°ƒç”¨æˆåŠŸåè¿”å›çš„&lt;strong&gt;å¥—æ¥å­—æè¿°ç¬¦&lt;/strong&gt;ï¼Œä»£è¡¨äº†æœåŠ¡å™¨å‡†å¤‡å¼€å§‹ç›‘å¬å®¢æˆ·è¿æ¥çš„ç½‘ç»œç«¯ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ &lt;code&gt;sockfd&lt;/code&gt;åœ¨æœåŠ¡å™¨ç¨‹åºä¸­çš„æ¥é¾™å»è„‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æµç¨‹å›¾æ¥æ¦‚è§ˆå…¶ç”Ÿå‘½å‘¨æœŸï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[&amp;#34;socket() åˆ›å»ºå¥—æ¥å­—&amp;#34;] --&amp;gt; B[&amp;#34;bind() ç»‘å®šåœ°å€ç«¯å£&amp;#34;]
B --&amp;gt; C[&amp;#34;listen() å¼€å¯ç›‘å¬&amp;#34;]
C --&amp;gt; D{&amp;#34;accept() æ¥å—è¿æ¥&amp;#34;}
D --&amp;gt; E[&amp;#34;åˆ›å»ºæ–°çš„è¿æ¥å¥—æ¥å­—&amp;lt;br&amp;gt;connfd&amp;#34;]
E --&amp;gt; D
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ·±å…¥ç†è§£-sockfdçš„ç»†èŠ‚"&gt;ğŸ” æ·±å…¥ç†è§£ &lt;code&gt;sockfd&lt;/code&gt;çš„ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;å›¾è¡¨å±•ç¤ºäº†å®è§‚æµç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨ &lt;code&gt;sockfd&lt;/code&gt;çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sockfd&lt;/code&gt;çš„åˆ›å»ºä¸å±æ€§&lt;/strong&gt;ï¼š&lt;code&gt;sockfd&lt;/code&gt;æ˜¯é€šè¿‡ &lt;code&gt;int socket(int domain, int type, int protocol)&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨åˆ›å»ºçš„ã€‚å¯¹äºå…¸å‹çš„TCPæœåŠ¡å™¨ï¼Œåˆ›å»ºæ—¶ä¼šæŒ‡å®š &lt;code&gt;domain&lt;/code&gt;ä¸º &lt;code&gt;AF_INET&lt;/code&gt;ï¼ˆIPv4ï¼‰ï¼Œ&lt;code&gt;type&lt;/code&gt;ä¸º &lt;code&gt;SOCK_STREAM&lt;/code&gt;ã€‚è¿™ä¸ªå¥—æ¥å­—åœ¨åˆå§‹çŠ¶æ€ä¸‹æ˜¯ä¸€ä¸ª&lt;strong&gt;ä¸»åŠ¨å¥—æ¥å­—&lt;/strong&gt;ï¼Œæ„å³å®ƒå¯ä»¥ç”¨äºä¸»åŠ¨å‘èµ·è¿æ¥ï¼ˆå¦‚å®¢æˆ·ç«¯æ‰€åšçš„é‚£æ ·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sockfd&lt;/code&gt;çš„è½¬å˜ä¸ä½¿å‘½&lt;/strong&gt;ï¼šæœåŠ¡å™¨ç¨‹åºé€šè¿‡ &lt;code&gt;bind()&lt;/code&gt;å‡½æ•°å°† &lt;code&gt;sockfd&lt;/code&gt;ä¸ä¸€ä¸ªæœ¬åœ°IPåœ°å€å’Œç«¯å£å·ç»‘å®šåï¼Œå†è°ƒç”¨ &lt;code&gt;listen()&lt;/code&gt;å‡½æ•°ã€‚&lt;code&gt;listen()&lt;/code&gt;å‡½æ•°çš„æ ¸å¿ƒä½œç”¨ä¹‹ä¸€å°±æ˜¯å°† &lt;code&gt;sockfd&lt;/code&gt;ä»&lt;strong&gt;ä¸»åŠ¨å¥—æ¥å­—&lt;/strong&gt;è½¬å˜ä¸º&lt;strong&gt;è¢«åŠ¨å¥—æ¥å­—&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€è¯¥å¥—æ¥å­—ä¸å†ç”¨äºå‘èµ·è¿æ¥ï¼Œè€Œæ˜¯ä¸“ç”¨äº&lt;strong&gt;æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sockfd&lt;/code&gt;ä¸è¿æ¥å¥—æ¥å­—çš„åŒºåˆ«&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚å¦‚æµç¨‹å›¾æ‰€ç¤ºï¼Œ&lt;strong&gt;&lt;code&gt;sockfd&lt;/code&gt;æœ¬èº«å¹¶ä¸ç›´æ¥ç”¨äºä¸å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®äº¤æ¢&lt;/strong&gt;ã€‚å®ƒçš„èŒè´£æ˜¯â€œç›‘å¬â€å’Œâ€œæ¥å—â€ã€‚å½“æ–°çš„è¿æ¥è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œ&lt;code&gt;accept()&lt;/code&gt;å‡½æ•°ä¼š&lt;strong&gt;åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¥—æ¥å­—æè¿°ç¬¦&lt;/strong&gt;ï¼ˆé€šå¸¸ç§°ä¸º &lt;code&gt;connfd&lt;/code&gt;ï¼‰ï¼Œè¿™ä¸ªæ–°å¥—æ¥å­—æ‰ä»£è¡¨äº†ä¸ç‰¹å®šå®¢æˆ·ç«¯å»ºç«‹çš„è¿æ¥é€šé“ï¼ŒæœåŠ¡å™¨éšåä½¿ç”¨è¿™ä¸ª &lt;code&gt;connfd&lt;/code&gt;æ¥ä¸è¯¥å®¢æˆ·ç«¯è¿›è¡Œ &lt;code&gt;send()&lt;/code&gt;å’Œ &lt;code&gt;recv()&lt;/code&gt;æ“ä½œã€‚è€ŒåŸå§‹çš„ &lt;code&gt;sockfd&lt;/code&gt;åˆ™ä¼šç»§ç»­ç•™åœ¨ç›‘å¬é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…æ¥å—ä¸‹ä¸€ä¸ªè¿æ¥è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨æ€»ç»“ä¸è¯¯åŒºæ¾„æ¸…"&gt;ğŸ’¡ å®ç”¨æ€»ç»“ä¸è¯¯åŒºæ¾„æ¸…
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;listen(sockfd, backlog)&lt;/code&gt;ä¸­çš„ &lt;code&gt;sockfd&lt;/code&gt;å°±æ˜¯é‚£ä¸ªè¢«è®¾ç½®ä¸ºç›‘å¬çŠ¶æ€çš„&lt;strong&gt;ä¸»å¥—æ¥å­—&lt;/strong&gt;ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆå…¬å¸å‰å°çš„æ€»æœºå·ç â€”â€”å®ƒçš„å·¥ä½œæ˜¯æ¥å¬æ‰€æœ‰æ‰“å…¥çš„è¯·æ±‚ï¼Œç„¶åå°†æ¯ä¸ªç”µè¯è½¬æ¥åˆ°å¯¹åº”çš„åˆ†æœºï¼ˆå³ &lt;code&gt;accept()&lt;/code&gt;è¿”å›çš„æ–°å¥—æ¥å­—ï¼‰ä¸Šè¿›è¡Œå…·ä½“æ²Ÿé€šã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„è¯¯è§£æ˜¯è®¤ä¸º &lt;code&gt;sockfd&lt;/code&gt;ç›´æ¥ç”¨äºæ•°æ®ä¼ è¾“ã€‚å®é™…ä¸Šï¼Œ&lt;strong&gt;æ•°æ®ä¼ è¾“æ˜¯é€šè¿‡ &lt;code&gt;accept()&lt;/code&gt;è¿”å›çš„æ–°å¥—æ¥å­—å®Œæˆçš„&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;sockfd&lt;/code&gt;çš„å”¯ä¸€ä»»åŠ¡å°±æ˜¯æŒç»­ç›‘å¬å¹¶åˆ›å»ºæ–°çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®ä½ å½»åº•ç†è§£ &lt;code&gt;sockfd&lt;/code&gt;çš„è§’è‰²ï¼å¦‚æœä½ å¯¹æœåŠ¡å™¨ç¼–ç¨‹çš„å…¶ä»–ç¯èŠ‚ï¼Œæ¯”å¦‚ &lt;code&gt;backlog&lt;/code&gt;å‚æ•°çš„å…·ä½“å«ä¹‰æˆ–è€…ä¸‰æ¬¡æ¡æ‰‹ä¸é˜Ÿåˆ—çš„å…³ç³»æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘å°†ä»¥ç»å…¸çš„C/Socket APIä¸ºä¾‹ï¼Œå±•ç¤ºä¸€ä¸ªå®Œæ•´çš„TCPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é€šä¿¡ä»£ç ï¼Œå¹¶å¯¹å…³é”®æ­¥éª¤è¿›è¡Œè§£æã€‚è¿™ä¸ªä¾‹å­èƒ½æ¸…æ™°åœ°å±•ç¤ºä¹‹å‰è®¨è®ºçš„ &lt;code&gt;socket()&lt;/code&gt;, &lt;code&gt;bind()&lt;/code&gt;, &lt;code&gt;listen()&lt;/code&gt;, &lt;code&gt;accept()&lt;/code&gt;, &lt;code&gt;connect()&lt;/code&gt;ç­‰å‡½æ•°æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;h3 id="æ ¸å¿ƒä»£ç ç¤ºä¾‹"&gt;æ ¸å¿ƒä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç®€å•çš„&lt;strong&gt;å›å£°æœåŠ¡å™¨&lt;/strong&gt;ï¼Œå®¢æˆ·ç«¯å‘é€ä»€ä¹ˆæ¶ˆæ¯ï¼ŒæœåŠ¡å™¨å°±åŸæ ·è¿”å›ã€‚&lt;/p&gt;
&lt;h4 id="tcp-æœåŠ¡å™¨ç«¯ä»£ç -cè¯­è¨€"&gt;&lt;strong&gt;TCP æœåŠ¡å™¨ç«¯ä»£ç  (Cè¯­è¨€)&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#define PORT 8080
#define BUFFER_SIZE 1024
#define BACKLOG 5 // å®šä¹‰å…¨è¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦
int main() {
int server_fd, new_socket;
struct sockaddr_in address;
int opt = 1;
int addrlen = sizeof(address);
char buffer[BUFFER_SIZE] = {0};
// 1. åˆ›å»ºå¥—æ¥å­— (Socket Creation)
if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0) {
perror(&amp;#34;socket failed&amp;#34;);
exit(EXIT_FAILURE);
}
// 2. ç»‘å®šåœ°å€å’Œç«¯å£ (Binding)
address.sin_family = AF_INET;
address.sin_addr.s_addr = INADDR_ANY; // ç»‘å®šåˆ°æ‰€æœ‰æœ¬åœ°æ¥å£
address.sin_port = htons(PORT);
if (bind(server_fd, (struct sockaddr *)&amp;amp;address, sizeof(address)) &amp;lt; 0) {
perror(&amp;#34;bind failed&amp;#34;);
close(server_fd);
exit(EXIT_FAILURE);
}
// 3. å¼€å¯ç›‘å¬ (Listening)
if (listen(server_fd, BACKLOG) &amp;lt; 0) {
perror(&amp;#34;listen failed&amp;#34;);
close(server_fd);
exit(EXIT_FAILURE);
}
printf(&amp;#34;Server is listening on port %d...\n&amp;#34;, PORT);
// 4. æ¥å—è¿æ¥ (Accepting Connections)
if ((new_socket = accept(server_fd, (struct sockaddr *)&amp;amp;address, (socklen_t*)&amp;amp;addrlen)) &amp;lt; 0) {
perror(&amp;#34;accept failed&amp;#34;);
close(server_fd);
exit(EXIT_FAILURE);
}
printf(&amp;#34;Client connected!\\n&amp;#34;);
// 5. æ•°æ®äº¤æ¢ (Data Exchange)
int valread = read(new_socket, buffer, BUFFER_SIZE);
printf(&amp;#34;Message from client: %s\n&amp;#34;, buffer);
char *reply = &amp;#34;Hello from server&amp;#34;;
send(new_socket, reply, strlen(reply), 0);
printf(&amp;#34;Echo message sent to client.\n&amp;#34;);
// 6. å…³é—­è¿æ¥ (Closing Connections)
close(new_socket);
close(server_fd);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="tcp-å®¢æˆ·ç«¯ä»£ç -cè¯­è¨€"&gt;&lt;strong&gt;TCP å®¢æˆ·ç«¯ä»£ç  (Cè¯­è¨€)&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;
#define PORT 8080
#define BUFFER_SIZE 1024
int main() {
int sock = 0;
struct sockaddr_in serv_addr;
char *message = &amp;#34;Hello from client&amp;#34;;
char buffer[BUFFER_SIZE] = {0};
// 1. åˆ›å»ºå¥—æ¥å­—
if ((sock = socket(AF_INET, SOCK_STREAM, 0)) &amp;lt; 0) {
printf(&amp;#34;\n Socket creation error \n&amp;#34;);
return -1;
}
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(PORT);
// å°†IPåœ°å€ä»å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ ¼å¼
if(inet_pton(AF_INET, &amp;#34;127.0.0.1&amp;#34;, &amp;amp;serv_addr.sin_addr) &amp;lt;= 0) {
printf(&amp;#34;\nInvalid address/ Address not supported \n&amp;#34;);
return -1;
}
// 2. è¿æ¥æœåŠ¡å™¨
if (connect(sock, (struct sockaddr *)&amp;amp;serv_addr, sizeof(serv_addr)) &amp;lt; 0) {
printf(&amp;#34;\nConnection Failed \n&amp;#34;);
return -1;
}
// 3. æ•°æ®äº¤æ¢
send(sock, message, strlen(message), 0);
printf(&amp;#34;Hello message sent to server.\n&amp;#34;);
int valread = read(sock, buffer, BUFFER_SIZE);
printf(&amp;#34;Server&amp;#39;s reply: %s\n&amp;#34;, buffer);
// 4. å…³é—­è¿æ¥
close(sock);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="å…³é”®æ­¥éª¤è§£æ"&gt;å…³é”®æ­¥éª¤è§£æ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºå¥—æ¥å­— (&lt;code&gt;socket()&lt;/code&gt;)&lt;/strong&gt;ï¼šæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ç¬¬ä¸€æ­¥éƒ½æ˜¯è°ƒç”¨ &lt;code&gt;socket()&lt;/code&gt;åˆ›å»ºä¸€ä¸ªé€šä¿¡ç«¯ç‚¹ã€‚å‚æ•° &lt;code&gt;AF_INET&lt;/code&gt;æŒ‡å®šä½¿ç”¨IPv4ï¼Œ&lt;code&gt;SOCK_STREAM&lt;/code&gt;æŒ‡å®šä½¿ç”¨é¢å‘è¿æ¥çš„TCPåè®®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»‘å®šåœ°å€ (&lt;code&gt;bind()&lt;/code&gt;)&lt;/strong&gt;ï¼šè¿™æ˜¯æœåŠ¡å™¨çš„ä¸“å±æ­¥éª¤ã€‚æœåŠ¡å™¨è°ƒç”¨ &lt;code&gt;bind()&lt;/code&gt;å°†å…¶å¥—æ¥å­—ä¸ä¸€ä¸ªæœ¬åœ°IPåœ°å€å’Œç«¯å£å·ï¼ˆå¦‚8080ï¼‰ç»‘å®šã€‚&lt;code&gt;INADDR_ANY&lt;/code&gt;è¡¨ç¤ºæœåŠ¡å™¨å°†ç›‘å¬æ‰€æœ‰å¯ç”¨çš„ç½‘ç»œæ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€å¯ç›‘å¬ (&lt;code&gt;listen()&lt;/code&gt;)&lt;/strong&gt;ï¼šæœåŠ¡å™¨è°ƒç”¨ &lt;code&gt;listen()&lt;/code&gt;ï¼Œå°†ä¹‹å‰åˆ›å»ºçš„ä¸»åŠ¨å¥—æ¥å­—è½¬å˜ä¸º&lt;strong&gt;è¢«åŠ¨ç›‘å¬å¥—æ¥å­—&lt;/strong&gt;ï¼Œå¹¶è®¾ç½®è¿æ¥è¯·æ±‚é˜Ÿåˆ—ï¼ˆè¿™é‡Œ &lt;code&gt;BACKLOG&lt;/code&gt;è®¾ä¸º5ï¼‰çš„æœ€å¤§é•¿åº¦ã€‚æ­¤æ—¶ï¼ŒæœåŠ¡å™¨è¿›å…¥ç­‰å¾…è¿æ¥çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æœåŠ¡å™¨ (&lt;code&gt;connect()&lt;/code&gt;)&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯é€šè¿‡ &lt;code&gt;connect()&lt;/code&gt;å‡½æ•°ï¼Œæ ¹æ®å·²çŸ¥çš„æœåŠ¡å™¨åœ°å€ï¼ˆå¦‚ &lt;code&gt;127.0.0.1:8080&lt;/code&gt;ï¼‰å‘èµ·è¿æ¥è¯·æ±‚ï¼Œè§¦å‘TCPä¸‰æ¬¡æ¡æ‰‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å—è¿æ¥ (&lt;code&gt;accept()&lt;/code&gt;)&lt;/strong&gt;ï¼šå½“å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚åˆ°è¾¾åï¼ŒæœåŠ¡å™¨è°ƒç”¨ &lt;code&gt;accept()&lt;/code&gt;ã€‚è¯¥å‡½æ•°ä¼šä»å·²å»ºç«‹çš„è¿æ¥é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºä¸€ä¸ª&lt;strong&gt;æ–°çš„å¥—æ¥å­—&lt;/strong&gt;ï¼ˆ&lt;code&gt;new_socket&lt;/code&gt;ï¼‰ã€‚è¿™ä¸ªæ–°å¥—æ¥å­—ä¸“é—¨ç”¨äºä¸è¿™ä¸ªç‰¹å®šçš„å®¢æˆ·ç«¯é€šä¿¡ï¼Œè€Œæœ€åˆçš„ç›‘å¬å¥—æ¥å­—ï¼ˆ&lt;code&gt;server_fd&lt;/code&gt;ï¼‰ç»§ç»­ç­‰å¾…æ–°çš„è¿æ¥è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®äº¤æ¢ (&lt;code&gt;send()/recv()&lt;/code&gt;æˆ– &lt;code&gt;read()/write()&lt;/code&gt;)&lt;/strong&gt;ï¼šè¿æ¥å»ºç«‹åï¼ŒåŒæ–¹å°±å¯ä»¥é€šè¿‡æ–°åˆ›å»ºçš„å¥—æ¥å­—ä½¿ç”¨ &lt;code&gt;send&lt;/code&gt;/&lt;code&gt;recv&lt;/code&gt;ï¼ˆæˆ–é€šç”¨çš„ &lt;code&gt;read&lt;/code&gt;/&lt;code&gt;write&lt;/code&gt;ï¼‰è¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é—­è¿æ¥ (&lt;code&gt;close()&lt;/code&gt;)&lt;/strong&gt;ï¼šé€šä¿¡å®Œæ¯•åï¼ŒåŒæ–¹è°ƒç”¨ &lt;code&gt;close()&lt;/code&gt;å…³é—­å¥—æ¥å­—ï¼Œé‡Šæ”¾èµ„æºï¼Œå®ŒæˆTCPçš„å››æ¬¡æŒ¥æ‰‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="å…¶ä»–è¯­è¨€ç¤ºä¾‹"&gt;å…¶ä»–è¯­è¨€ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;åŒæ ·çš„ç½‘ç»œé€šä¿¡é€»è¾‘ä¹Ÿé€‚ç”¨äºå…¶ä»–ç¼–ç¨‹è¯­è¨€ã€‚ä¾‹å¦‚ï¼Œåœ¨ &lt;strong&gt;Python&lt;/strong&gt; ä¸­ï¼Œä»£ç ä¼šç®€æ´å¾ˆå¤šï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# Python æœåŠ¡å™¨ç«¯ç¤ºä¾‹
import socket
host = &amp;#39;&amp;#39; # ç»‘å®šæ‰€æœ‰æ¥å£
port = 8000
serv_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
serv_sock.bind((host, port))
serv_sock.listen(5) # å¼€å§‹ç›‘å¬ï¼Œbacklog=5
client_sock, client_addr = serv_sock.accept() # æ¥å—è¿æ¥
data = client_sock.recv(1024) # æ¥æ”¶æ•°æ®
client_sock.send(data) # å‘é€æ•°æ®ï¼ˆå›å£°ï¼‰
client_sock.close()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ &lt;strong&gt;Java&lt;/strong&gt; ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨ &lt;code&gt;ServerSocket&lt;/code&gt;å’Œ &lt;code&gt;Socket&lt;/code&gt;ç±»ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// Java æœåŠ¡å™¨ç«¯ç®€è¦ç¤ºä¾‹
int port = 7000;
try (ServerSocket serverSocket = new ServerSocket(port)) {
Socket clientSocket = serverSocket.accept(); // æ¥å—è¿æ¥
// ... è¿›è¡Œæ•°æ®è¾“å…¥è¾“å‡ºæµæ“ä½œ
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="è¿è¡Œä¸æµ‹è¯•"&gt;è¿è¡Œä¸æµ‹è¯•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å°†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä»£ç åˆ†åˆ«ä¿å­˜ä¸º &lt;code&gt;server.c&lt;/code&gt;å’Œ &lt;code&gt;client.c&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨GCCç¼–è¯‘ï¼ˆLinux/macOSç¯å¢ƒï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;gcc server.c -o server
gcc client.c -o client
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…ˆåœ¨ä¸€ä¸ªç»ˆç«¯è¿è¡ŒæœåŠ¡å™¨ï¼š&lt;code&gt;./server&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œå®¢æˆ·ç«¯ï¼š&lt;code&gt;./client&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ å°†åœ¨å®¢æˆ·ç«¯çª—å£çœ‹åˆ°å‘é€ç»™æœåŠ¡å™¨çš„æ¶ˆæ¯ï¼Œä»¥åŠæœåŠ¡å™¨è¿”å›çš„å›å¤ï¼›åœ¨æœåŠ¡å™¨çª—å£åˆ™ä¼šçœ‹åˆ°å®¢æˆ·ç«¯çš„è¿æ¥ä¿¡æ¯å’Œæ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´ç›´è§‚åœ°ç†è§£ç½‘ç»œç¼–ç¨‹çš„å®é™…è¿ä½œã€‚å¦‚æœä½ å¯¹æŸä¸ªç»†èŠ‚æˆ–ç‰¹å®šåœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="so_reuseport"&gt;SO_REUSEPORT
&lt;/h2&gt;&lt;p&gt;SO_REUSEPORT æ˜¯ Linux å†…æ ¸è‡ª 3.9 ç‰ˆæœ¬èµ·å¼•å…¥çš„ä¸€ä¸ªå¼ºå¤§çš„å¥—æ¥å­—é€‰é¡¹ï¼Œå®ƒå…è®¸å¤šä¸ªå¥—æ¥å­—ç»‘å®šåˆ°&lt;strong&gt;å®Œå…¨ç›¸åŒçš„ IP åœ°å€å’Œç«¯å£ç»„åˆ&lt;/strong&gt;ä¸Šï¼Œä»è€Œåœ¨å†…æ ¸å±‚é¢å®ç°è¿æ¥è´Ÿè½½å‡è¡¡ï¼Œæ˜¾è‘—æå‡å¤šæ ¸æœåŠ¡å™¨åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ€»ç»“äº† SO_REUSEPORT çš„æ ¸å¿ƒä¿¡æ¯ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠ“ä½é‡ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šä¹‰ä¸ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…è®¸å¤šä¸ªå¥—æ¥å­—ç›‘å¬ç›¸åŒIPå’Œç«¯å£ï¼Œæ—¨åœ¨æå‡å¤šæ ¸æœåŠ¡å™¨æ€§èƒ½ï¼Œè§£å†³ä¼ ç»Ÿæ¨¡å‹çš„ç“¶é¢ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…æ ¸ç‰ˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Linux 3.9 åŠä»¥ä¸Šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå·¥ä½œåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…æ ¸ä½¿ç”¨å“ˆå¸Œç®—æ³•å¯¹ incoming è¿æ¥è¿›è¡Œåˆ†æµï¼Œå°†è¯·æ±‚å‡åŒ€åˆ†å¸ƒåˆ°ä¸åŒçš„ç›‘å¬å¥—æ¥å­—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è´Ÿè½½å‡è¡¡ã€å‡å°‘é”ç«äº‰ã€é¿å…æƒŠç¾¤æ•ˆåº”ã€æé«˜å¤šæ ¸åˆ©ç”¨ç‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Nginxã€é«˜æ€§èƒ½å¤šçº¿ç¨‹TCP/UDPæœåŠ¡å™¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸ä¼˜åŠ¿"&gt;ğŸ”§ å·¥ä½œåŸç†ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;åœ¨ SO_REUSEPORT å‡ºç°ä¹‹å‰ï¼Œå¤šè¿›ç¨‹/å¤šçº¿ç¨‹æœåŠ¡å™¨æ¨¡å‹ä¸»è¦æœ‰ä¸¤ç§æ¶æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å•ç›‘å¬å™¨å¤šå·¥ä½œè€…&lt;/strong&gt;ï¼šä¸€ä¸ªä¸»è¿›ç¨‹è´Ÿè´£ &lt;code&gt;accept&lt;/code&gt;æ–°è¿æ¥ï¼Œç„¶ååˆ†å‘ç»™å·¥ä½œè¿›ç¨‹å¤„ç†ã€‚ä¸»è¿›ç¨‹å®¹æ˜“æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šè¿›ç¨‹ç«äº‰accept&lt;/strong&gt;ï¼šæ‰€æœ‰å·¥ä½œè¿›ç¨‹åœ¨åŒä¸€ä¸ªç›‘å¬å¥—æ¥å­—ä¸Šç«äº‰ &lt;code&gt;accept&lt;/code&gt;ã€‚å†…æ ¸çš„å”¤é†’æœºåˆ¶å¯èƒ½å¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ï¼ŒæŸäº›è¿›ç¨‹å¤„ç†å¤§é‡è¿æ¥è€Œå…¶ä»–è¿›ç¨‹ç©ºé—²ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;SO_REUSEPORT æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œ&lt;strong&gt;æ¯ä¸ªåº”ç”¨è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰å¯ä»¥åˆ›å»ºè‡ªå·±çš„å¥—æ¥å­—ï¼Œå¹¶è®¾ç½® SO_REUSEPORT é€‰é¡¹åç»‘å®šåˆ°ç›¸åŒçš„åœ°å€å’Œç«¯å£&lt;/strong&gt;ã€‚å½“æ–°çš„è¿æ¥è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œ&lt;strong&gt;å†…æ ¸ä¼šæ ¹æ®ä¸€ä¸ªå“ˆå¸Œç®—æ³•ï¼ˆé€šå¸¸åŸºäºè¿æ¥çš„å››å…ƒç»„ä¿¡æ¯ï¼šæºIPã€æºç«¯å£ã€ç›®æ ‡IPã€ç›®æ ‡ç«¯å£ï¼‰æ¥é€‰æ‹©ä¸€ä¸ªç›‘å¬å¥—æ¥å­—&lt;/strong&gt;ï¼Œä»è€Œå°†è¿æ¥è¯·æ±‚å‡åŒ€åœ°åˆ†å‘åˆ°ä¸åŒçš„è¿›ç¨‹ã€‚è¿™æ„å‘³ç€æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„è¿æ¥é˜Ÿåˆ—ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å¤šä¸ªè¿›ç¨‹ç«äº‰åŒä¸€ä¸ªé”çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æœºåˆ¶å¸¦æ¥äº†å‡ ä¸ªå…³é”®ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸çº§è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šè¿æ¥åˆ†å‘ç”±å†…æ ¸å®Œæˆï¼Œæ›´åŠ å…¬å¹³é«˜æ•ˆï¼Œèƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘é”ç«äº‰&lt;/strong&gt;ï¼šæ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„ç›‘å¬å¥—æ¥å­—å’Œè¿æ¥é˜Ÿåˆ—ï¼Œæ¶ˆé™¤äº†åœ¨ &lt;code&gt;accept&lt;/code&gt;æ—¶çš„æ¿€çƒˆé”ç«äº‰ï¼Œé™ä½äº†CPUå¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºå®¹é”™æ€§&lt;/strong&gt;ï¼šå•ä¸ªè¿›ç¨‹å´©æºƒä¸ä¼šå½±å“å…¶ä»–ç›‘å¬åŒä¸€ç«¯å£çš„è¿›ç¨‹ï¼ŒæœåŠ¡æ•´ä½“å¯ç”¨æ€§æ›´é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–ç¨‹åºè®¾è®¡&lt;/strong&gt;ï¼šå¼€å‘è€…æ— éœ€å†è®¾è®¡å¤æ‚çš„ä¸»ä»è¿›ç¨‹æ¨¡å‹æˆ–å¤„ç†æƒŠç¾¤æ•ˆåº”ï¼Œç¨‹åºé€»è¾‘æ›´æ¸…æ™°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•ä½¿ç”¨"&gt;âš™ï¸ å¦‚ä½•ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;åœ¨ç¨‹åºä¸­ä½¿ç”¨ SO_REUSEPORT éå¸¸ç®€å•ï¼Œåªéœ€åœ¨è°ƒç”¨ &lt;code&gt;bind()&lt;/code&gt;å‡½æ•°ä¹‹å‰ï¼Œå¯¹è¦å¤ç”¨çš„å¥—æ¥å­—è®¾ç½®è¯¥é€‰é¡¹å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cè¯­è¨€ç¤ºä¾‹ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int sfd = socket(AF_INET, SOCK_STREAM, 0);
int optval = 1;
/* å…³é”®æ­¥éª¤ï¼šè®¾ç½® SO_REUSEPORT é€‰é¡¹ */
if (setsockopt(sfd, SOL_SOCKET, SO_REUSEPORT, &amp;amp;optval, sizeof(optval)) == -1) {
perror(&amp;#34;setsockopt&amp;#34;);
exit(EXIT_FAILURE);
}
/* ç„¶åè¿›è¡Œç»‘å®š */
struct sockaddr_in addr;
memset(&amp;amp;addr, 0, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = htonl(INADDR_ANY); // ç»‘å®šæ‰€æœ‰æœ¬åœ°IP
addr.sin_port = htons(8080); // ç»‘å®šç«¯å£8080
if (bind(sfd, (struct sockaddr *) &amp;amp;addr, sizeof(addr)) == -1) {
perror(&amp;#34;bind&amp;#34;);
exit(EXIT_FAILURE);
}
/* ... åç»­ listen(), accept() ç­‰æ“ä½œ */
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é‡è¦ä½¿ç”¨è§„åˆ™ä¸å®‰å…¨é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®‰å…¨æ€§å’Œæ­£ç¡®æ€§ï¼Œä½¿ç”¨æ—¶å¿…é¡»éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰å¥—æ¥å­—éƒ½å¿…é¡»è®¾ç½®SO_REUSEPORT&lt;/strong&gt;ï¼šç¬¬ä¸€ä¸ªç»‘å®šåˆ°è¯¥åœ°å€ç«¯å£çš„å¥—æ¥å­—ä¹Ÿå¿…é¡»è®¾ç½®æ­¤é€‰é¡¹ï¼Œåç»­å¥—æ¥å­—æ‰èƒ½æˆåŠŸç»‘å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸åŒçš„æœ‰æ•ˆç”¨æˆ·ID&lt;/strong&gt;ï¼šæ‰€æœ‰è¯•å›¾ç»‘å®šåˆ°åŒä¸€åœ°å€ç«¯å£çš„è¿›ç¨‹å¿…é¡»å…·æœ‰ç›¸åŒçš„æœ‰æ•ˆç”¨æˆ·IDï¼ˆUIDï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æ¶æ„ç¨‹åºåŠ«æŒç‰¹å®šç«¯å£ä¸Šçš„æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨äºTCPå’ŒUDP&lt;/strong&gt;ï¼šè¯¥é€‰é¡¹å¯¹TCPï¼ˆ&lt;code&gt;SOCK_STREAM&lt;/code&gt;ï¼‰å’ŒUDPï¼ˆ&lt;code&gt;SOCK_DGRAM&lt;/code&gt;ï¼‰å¥—æ¥å­—å‡æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨å®ä¾‹nginx"&gt;ğŸš€ åº”ç”¨å®ä¾‹ï¼šNginx
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªè‘—åçš„æˆåŠŸæ¡ˆä¾‹æ˜¯ &lt;strong&gt;Nginx&lt;/strong&gt;ã€‚ä»ç‰ˆæœ¬ 1.9.1 å¼€å§‹ï¼ŒNginx æ”¯æŒä½¿ç”¨ &lt;code&gt;SO_REUSEPORT&lt;/code&gt;ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåªéœ€åœ¨ &lt;code&gt;listen&lt;/code&gt;æŒ‡ä»¤ååŠ ä¸Š &lt;code&gt;reuseport&lt;/code&gt;å‚æ•°å³å¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;server {
listen 80 reuseport; # å¯ç”¨SO_REUSEPORT
...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ç”¨åï¼ŒNginx çš„æ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½ä¼šç‹¬ç«‹ç›‘å¬ç›¸åŒçš„ç«¯å£ã€‚å†…æ ¸è´Ÿè´£å°†æ–°è¿æ¥å‡è¡¡åœ°åˆ†é…ç»™å„ä¸ªå·¥ä½œè¿›ç¨‹ã€‚è¿™å¤§å¤§å‡å°‘äº†è¿›ç¨‹é—´å¯¹è¿æ¥æ¥å—æƒçš„é”ç«äº‰ï¼Œä½¿å¾— Nginx åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½æå‡éå¸¸æ˜¾è‘—ï¼Œæ®æŠ¥å‘Šå¯è¾¾ &lt;strong&gt;2åˆ°3å€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å±€é™"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸å±€é™
&lt;/h3&gt;&lt;p&gt;å°½ç®¡å¼ºå¤§ï¼Œä½† SO_REUSEPORT ä¹Ÿéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…æ ¸ç‰ˆæœ¬è¦æ±‚&lt;/strong&gt;ï¼šéœ€è¦ Linux å†…æ ¸ 3.9 æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œå‡è¡¡å¯èƒ½ä¸ç»å¯¹&lt;/strong&gt;ï¼šè´Ÿè½½å‡è¡¡åŸºäºå“ˆå¸Œç®—æ³•ï¼Œå¦‚æœå¤§é‡è¿æ¥æ¥è‡ªåŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆIPå’Œç«¯å£ä¸å˜ï¼‰ï¼Œåˆ™ä¼šè¢«å“ˆå¸Œåˆ°åŒä¸€ä¸ªè¿›ç¨‹ã€‚è™½ç„¶è¿™å¯¹äºä¿æŒä¼šè¯å±€éƒ¨æ€§æœ‰ç›Šï¼Œä½†åœ¨æç«¯æƒ…å†µä¸‹å¯èƒ½æ— æ³•å®ç°ç»å¯¹çš„å‡åŒ€åˆ†å¸ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨åŠ¨æ€å˜åŒ–çš„å½±å“&lt;/strong&gt;ï¼šå½“ç›‘å¬å¥—æ¥å­—çš„æ•°é‡å‘ç”Ÿå˜åŒ–ï¼ˆå¦‚æœ‰è¿›ç¨‹å¯åŠ¨æˆ–ç»ˆæ­¢ï¼‰æ—¶ï¼Œå“ˆå¸Œæ˜ å°„ä¼šæ”¹å˜ï¼Œå¯èƒ½å¯¼è‡´å·²å»ºç«‹çš„TCPè¿æ¥åœ¨ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­è¢«é‡ç½®ã€‚ä¸è¿‡ï¼Œè¿™ä¸€æƒ…å†µåœ¨ç°ä»£å†…æ ¸ä¸­å·²å¾—åˆ°æ”¹å–„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;SO_REUSEPORT é€šè¿‡å…è®¸&lt;strong&gt;å¤šä¸ªå¥—æ¥å­—ç»‘å®šåˆ°åŒä¸€ç«¯å£&lt;/strong&gt;ï¼Œå¹¶ç”±&lt;strong&gt;å†…æ ¸è¿›è¡Œè´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼Œä¸ºæ„å»ºé«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨æä¾›äº†ä¸€ç§é«˜æ•ˆã€ç®€æ´çš„æ–¹æ¡ˆã€‚å®ƒèƒ½æœ‰æ•ˆå‡å°‘é”ç«äº‰ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸èƒ½åŠ›ï¼Œå°¤å…¶é€‚ç”¨äºåƒ Nginx è¿™æ ·çš„çŸ­è¿æ¥ã€é«˜å¹¶å‘æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯¹äºæ–°å¼€å‘çš„é«˜æ€§èƒ½ç½‘ç»œæœåŠ¡é¡¹ç›®ï¼Œå¦‚æœè¿è¡Œç¯å¢ƒæ»¡è¶³å†…æ ¸ç‰ˆæœ¬è¦æ±‚ï¼Œå¼ºçƒˆå»ºè®®è€ƒè™‘ä½¿ç”¨ SO_REUSEPORT æ¥æå‡æ€§èƒ½ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦æ³¨æ„å…¶ä½¿ç”¨è§„åˆ™å’Œæ½œåœ¨çš„å±€é™æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ SO_REUSEPORTã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="nagle"&gt;Nagle
&lt;/h2&gt;&lt;p&gt;Nagleç®—æ³•æ˜¯ä¸€ç§åœ¨TCP/IPç½‘ç»œä¸­å¹¿æ³›ä½¿ç”¨çš„æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯é€šè¿‡å‡å°‘ç½‘ç»œä¸­å°æ•°æ®åŒ…çš„æ•°é‡æ¥æé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h3 id="-ç®—æ³•è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜"&gt;ğŸ” ç®—æ³•è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜
&lt;/h3&gt;&lt;p&gt;åœ¨ä»‹ç»ç®—æ³•åŸç†å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹å®ƒè¦è§£å†³çš„é—®é¢˜ã€‚åœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œæ¯ä¸ªæ•°æ®åŒ…éƒ½åŒ…å«å¿…è¦çš„åè®®å¤´ä¿¡æ¯ï¼ˆå¦‚20å­—èŠ‚çš„TCPå¤´å’Œ20å­—èŠ‚çš„IPå¤´ï¼‰ã€‚å¦‚æœåº”ç”¨ç¨‹åºé¢‘ç¹åœ°å‘é€æå°çš„æ•°æ®ï¼ˆä¾‹å¦‚Telnetä¼šè¯ä¸­æ¯æ¬¡åªå‘é€1ä¸ªé”®ç›˜å­—ç¬¦ï¼‰ï¼Œå°±ä¼šå¯¼è‡´ç½‘ç»œå……æ–¥ç€å¤§é‡â€œå¤´é‡è„šè½»â€çš„æ•°æ®åŒ…ã€‚ä¸€ä¸ªåªæºå¸¦1å­—èŠ‚æœ‰æ•ˆæ•°æ®çš„åŒ…ï¼Œæ€»å¤§å°å¯èƒ½è¾¾åˆ°41å­—èŠ‚ï¼Œç½‘ç»œå¸¦å®½çš„æœ‰æ•ˆåˆ©ç”¨ç‡æä½ï¼ˆçº¦2.4%ï¼‰ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸ºâ€œå°åŒ…é—®é¢˜â€ã€‚åœ¨æ…¢é€Ÿæˆ–é«˜è´Ÿè½½ç½‘ç»œä¸­ï¼Œå¤§é‡å°åŒ…è¿˜ä¼šå¢åŠ æ‹¥å¡å’Œä¸¢åŒ…çš„é£é™©ã€‚&lt;/p&gt;
&lt;h3 id="-ç®—æ³•çš„å·¥ä½œåŸç†"&gt;âš™ï¸ ç®—æ³•çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;Nagleç®—æ³•çš„æ ¸å¿ƒè§„åˆ™éå¸¸ç®€å•ï¼š&lt;strong&gt;åœ¨ä»»æ„æ—¶åˆ»ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„å°æ®µï¼ˆå°äºMSSçš„æ•°æ®å—ï¼‰å­˜åœ¨äºç½‘ç»œä¸­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œå½“åº”ç”¨ç¨‹åºå‘é€æ•°æ®æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœå½“å‰æ²¡æœ‰å·²å‘å‡ºä½†æœªæ”¶åˆ°ç¡®è®¤ï¼ˆACKï¼‰çš„æ•°æ®ï¼Œé‚£ä¹ˆå³ä½¿æ•°æ®é‡å¾ˆå°ï¼Œä¹Ÿä¼šè¢«ç«‹å³å‘é€ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå­˜åœ¨æœªè¢«ç¡®è®¤çš„æ•°æ®ï¼Œé‚£ä¹ˆæ–°äº§ç”Ÿçš„å°æ•°æ®å—ä¸ä¼šè¢«ç«‹å³å‘é€ï¼Œè€Œæ˜¯ä¼šè¢«æ”¾å…¥ç¼“å†²åŒºæš‚å­˜ã€‚è¿™äº›æ•°æ®ä¼šåœ¨æ”¶åˆ°ä¹‹å‰æ•°æ®çš„ACKç¡®è®¤åï¼Œæˆ–è€…ç´¯ç§¯åˆ°ä¸€å®šå¤§å°ï¼ˆå¦‚è¾¾åˆ°MSSï¼‰æ—¶ï¼Œå†è¢«ä¸€å¹¶å‘é€å‡ºå»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®—æ³•åœ¨å…·ä½“å®ç°æ—¶ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€å³å¯å‘é€æ•°æ®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åŒ…é•¿åº¦è¾¾åˆ°MSS&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åŒ…åŒ…å«FINæ ‡å¿—&lt;/strong&gt;ï¼ˆè¡¨ç¤ºè¿æ¥å…³é—­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®äº†TCP_NODELAYé€‰é¡¹&lt;/strong&gt;ï¼ˆç¦ç”¨äº†Nagleç®—æ³•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰å·²å‘å‡ºçš„å°æ•°æ®åŒ…å‡å·²è¢«ç¡®è®¤&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘ç”Ÿäº†è¶…æ—¶&lt;/strong&gt;ï¼ˆé€šå¸¸è¶…æ—¶æ—¶é—´çº¦ä¸º200msï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢çš„ä¼ªä»£ç å¯ä»¥æ›´æ¸…æ™°åœ°å±•ç¤ºå…¶å†³ç­–é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;if æœ‰æ–°æ•°æ®è¦å‘é€ï¼š
if å‘é€çª—å£ &amp;gt;= MSS ä¸” å¾…å‘é€æ•°æ® &amp;gt;= MSSï¼š
ç«‹å³å‘é€ä¸€ä¸ªå®Œæ•´çš„MSSå¤§å°çš„æ®µ
elseï¼š
if ç½‘ç»œä¸­è¿˜æœ‰æœªç¡®è®¤çš„æ•°æ®ï¼š
å°†æ–°æ•°æ®æ”¾å…¥ç¼“å†²åŒºï¼Œç›´åˆ°æ”¶åˆ°ä¸€ä¸ªACK
elseï¼š
ç«‹å³å‘é€æ•°æ®
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ç®—æ³•çš„ä¼˜ç¼ºç‚¹ä¸åº”ç”¨è€ƒé‡"&gt;âš–ï¸ ç®—æ³•çš„ä¼˜ç¼ºç‚¹ä¸åº”ç”¨è€ƒé‡
&lt;/h3&gt;&lt;p&gt;Nagleç®—æ³•çš„ä¸»è¦&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;åœ¨äºæ˜¾è‘—&lt;strong&gt;å‡å°‘äº†ç½‘ç»œä¸­å°åŒ…çš„æ•°é‡&lt;/strong&gt;ï¼Œä»è€Œé™ä½äº†ç½‘ç»œå¼€é”€å’Œæ‹¥å¡é£é™©ï¼Œæé«˜äº†æ•´ä½“ååé‡ï¼Œå°¤å…¶é€‚ç”¨äºæ…¢é€Ÿç½‘ç»œæˆ–å¤§é‡å°æ•°æ®åŒ…ä¼ è¾“çš„åœºæ™¯ï¼ˆå¦‚æ—©æœŸçš„Telnetï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå®ƒä¹Ÿå­˜åœ¨æ˜æ˜¾çš„&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;ä¼šå¢åŠ æ•°æ®ä¼ è¾“çš„å»¶è¿Ÿ&lt;/strong&gt;ã€‚å› ä¸ºå°æ•°æ®åŒ…å¯èƒ½éœ€è¦ç­‰å¾…ACKæˆ–è¶…æ—¶åæ‰èƒ½å‘å‡ºã€‚è¿™ç§å»¶è¿Ÿåœ¨ä¸TCPçš„â€œå»¶è¿Ÿç¡®è®¤æœºåˆ¶â€ï¼ˆDelayed ACKï¼Œæ¥æ”¶æ–¹ä¹Ÿå¯èƒ½å»¶è¿Ÿå‘é€ACKä»¥å¸Œæœ›é™„å¸¦æ•°æ®å›ä¼ ï¼‰ç»“åˆæ—¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å°¤ä¸ºæ˜æ˜¾ï¼Œä¾‹å¦‚åœ¨â€œå†™-å†™-è¯»â€æ¨¡å¼ä¸‹ï¼Œå¯èƒ½äº§ç”Ÿé«˜è¾¾200-500æ¯«ç§’çš„å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å¯¹&lt;strong&gt;å®æ—¶æ€§è¦æ±‚å¾ˆé«˜&lt;/strong&gt;çš„åº”ç”¨ä¸­ï¼ˆå¦‚åœ¨çº¿æ¸¸æˆã€å®æ—¶äº¤æ˜“ç³»ç»Ÿã€è¿œç¨‹æ¡Œé¢æ§åˆ¶ï¼‰ï¼Œé€šå¸¸å»ºè®®&lt;strong&gt;ç¦ç”¨Nagleç®—æ³•&lt;/strong&gt;ã€‚è¿™å¯ä»¥é€šè¿‡è®¾ç½®å¥—æ¥å­—çš„ &lt;code&gt;TCP_NODELAY&lt;/code&gt;é€‰é¡¹æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Nagleç®—æ³•é€šè¿‡æš‚å­˜å°æ•°æ®åŒ…å¹¶æ‰¹é‡å‘é€ï¼Œæœ‰æ•ˆæå‡äº†ç½‘ç»œå¸¦å®½åˆ©ç”¨ç‡ï¼Œä½†å…¶ä»£ä»·æ˜¯å¼•å…¥äº†å»¶è¿Ÿã€‚ä¸‹è¡¨æ€»ç»“äº†å…³é”®ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ ¹æ®åº”ç”¨éœ€æ±‚åšå‡ºé€‰æ‹©ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯ç‰¹å¾&lt;/th&gt;
&lt;th&gt;å»ºè®®åšæ³•&lt;/th&gt;
&lt;th&gt;åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰¹é‡æ•°æ®ä¼ è¾“&lt;/strong&gt;ã€&lt;strong&gt;ç½‘ç»œå¸¦å®½æœ‰é™&lt;/strong&gt;ã€&lt;strong&gt;å¯¹å®æ—¶æ€§è¦æ±‚ä¸æ•æ„Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿æŒé»˜è®¤å¼€å¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å……åˆ†åˆ©ç”¨ç®—æ³•ä¼˜åŠ¿ï¼Œæé«˜ç½‘ç»œæ•ˆç‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜äº¤äº’æ€§åº”ç”¨&lt;/strong&gt;ã€&lt;strong&gt;è¦æ±‚ä½å»¶è¿Ÿ&lt;/strong&gt;ï¼ˆå¦‚åœ¨çº¿æ¸¸æˆã€å®æ—¶é€šä¿¡ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¦ç”¨ï¼ˆè®¾ç½®TCP_NODELAYï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¿å…ç®—æ³•å¸¦æ¥çš„å»¶è¿Ÿï¼Œä¿è¯å“åº”é€Ÿåº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘è‡ªå®šä¹‰åº”ç”¨åè®®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ³¨æ„æ•°æ®å‘é€æ¨¡å¼&lt;/strong&gt;ï¼Œé¿å…â€œå†™-å†™-è¯»â€åºåˆ—ï¼›æˆ–è€ƒè™‘åœ¨åº”ç”¨å±‚è¿›è¡Œæ•°æ®ç¼“å†²ã€‚&lt;/td&gt;
&lt;td&gt;é˜²æ­¢Nagleç®—æ³•ä¸å»¶è¿Ÿç¡®è®¤äº§ç”Ÿä¸è‰¯äº¤äº’ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£Nagleç®—æ³•ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œæˆ–è€…æƒ³äº†è§£æ›´å¤šå…³äºå¦‚ä½•ä¼˜åŒ–ç½‘ç»œç¼–ç¨‹çš„ç»†èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="bdp"&gt;BDP
&lt;/h2&gt;&lt;p&gt;BDPç½‘ç»œé€šå¸¸æŒ‡çš„æ˜¯&lt;strong&gt;å¸¦å®½æ—¶å»¶ç§¯ï¼ˆBandwidth-Delay Product, BDPï¼‰&lt;/strong&gt;ï¼Œå®ƒæ˜¯è¡¡é‡ç½‘ç»œæ€§èƒ½çš„ä¸€ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå¸®åŠ©æˆ‘ä»¬ç†è§£æ•°æ®é“¾è·¯çš„å®é™…ä¼ è¾“èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µå¸¦å®½æ—¶å»¶ç§¯bdp"&gt;ğŸ” æ ¸å¿ƒæ¦‚å¿µï¼šå¸¦å®½æ—¶å»¶ç§¯ï¼ˆBDPï¼‰
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥æŠŠç½‘ç»œæ•°æ®ä¼ è¾“æƒ³è±¡æˆä¸€æ ¹æ°´ç®¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¦å®½&lt;/strong&gt; ç›¸å½“äºæ°´ç®¡çš„&lt;strong&gt;æ¨ªæˆªé¢ç§¯&lt;/strong&gt;ï¼Œå†³å®šäº†å•ä½æ—¶é—´å†…èƒ½æµè¿‡å¤šå°‘æ°´ï¼ˆæ•°æ®ï¼‰ï¼Œå•ä½é€šå¸¸æ˜¯Mbpsæˆ–Gbpsã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾€è¿”æ—¶å»¶ï¼ˆRTTï¼‰&lt;/strong&gt; ç›¸å½“äºæ°´ç®¡çš„&lt;strong&gt;é•¿åº¦&lt;/strong&gt;ï¼Œè¡¨ç¤ºæ•°æ®ä»å‘é€ç«¯åˆ°æ¥æ”¶ç«¯å†è¿”å›ç¡®è®¤ä¿¡å·æ‰€éœ€çš„æ€»æ—¶é—´ï¼Œå•ä½é€šå¸¸æ˜¯æ¯«ç§’(ms)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¦å®½æ—¶å»¶ç§¯ï¼ˆBDPï¼‰&lt;/strong&gt; å°±æ˜¯è¿™æ ¹æ°´ç®¡çš„&lt;strong&gt;å®¹ç§¯&lt;/strong&gt;ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š&lt;strong&gt;BDP = å¸¦å®½ (bps) Ã— å¾€è¿”æ—¶å»¶ (Rç§’)&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;BDPçš„å®é™…æ„ä¹‰åœ¨äºï¼Œå®ƒè¡¨ç¤ºäº†åœ¨&lt;strong&gt;æ”¶åˆ°ç¬¬ä¸€ä¸ªæ•°æ®åŒ…çš„ç¡®è®¤ä¿¡å·ä¹‹å‰&lt;/strong&gt;ï¼Œé“¾è·¯ä¸Šæœ€å¤šèƒ½å®¹çº³çš„&lt;strong&gt;å·²å‘é€ä½†æœªè¢«ç¡®è®¤çš„æ•°æ®æ€»é‡&lt;/strong&gt;ï¼ˆä»¥æ¯”ç‰¹æˆ–å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ä¸‹è¡¨é€šè¿‡å‡ ä¸ªä¾‹å­å¯ä»¥å¸®ä½ æ›´ç›´è§‚åœ°ç†è§£ä¸åŒåœºæ™¯ä¸‹çš„BDPï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç½‘ç»œç±»å‹ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;å¸¦å®½&lt;/th&gt;
&lt;th&gt;å¾€è¿”æ—¶å»¶ (RTT)&lt;/th&gt;
&lt;th&gt;BDP (ç²—ç•¥è®¡ç®—)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¸­é€Ÿå«æ˜Ÿç½‘ç»œ&lt;/td&gt;
&lt;td&gt;512 kbit/s&lt;/td&gt;
&lt;td&gt;900 ms&lt;/td&gt;
&lt;td&gt;çº¦ 57.6 KB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä½å®…DSL&lt;/td&gt;
&lt;td&gt;2 Mbit/s&lt;/td&gt;
&lt;td&gt;50 ms&lt;/td&gt;
&lt;td&gt;çº¦ 12.5 KB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é«˜é€Ÿåœ°é¢ç½‘ç»œ&lt;/td&gt;
&lt;td&gt;1 Gbit/s&lt;/td&gt;
&lt;td&gt;1 ms&lt;/td&gt;
&lt;td&gt;çº¦ 125 KB&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é•¿èƒ–ç½‘ç»œlfnä¸bdpçš„é‡è¦æ€§"&gt;ğŸŒ â€œé•¿èƒ–ç½‘ç»œâ€ï¼ˆLFNï¼‰ä¸BDPçš„é‡è¦æ€§
&lt;/h3&gt;&lt;p&gt;å½“ç½‘ç»œçš„å¸¦å®½æ—¶å»¶ç§¯éå¸¸å¤§æ—¶ï¼ˆä¾‹å¦‚æ˜¾è‘—å¤§äº10^5æ¯”ç‰¹æˆ–çº¦12500å­—èŠ‚ï¼‰ï¼Œå®ƒå¸¸è¢«ç§°ä¸º &lt;strong&gt;â€œé•¿èƒ–ç½‘ç»œâ€ï¼ˆLong Fat Network, LFNï¼‰&lt;/strong&gt; ã€‚è¿™ç§ç½‘ç»œå°±åƒä¸€æ¡æ—¢é•¿åˆç²—çš„ç®¡é“ã€‚&lt;/p&gt;
&lt;p&gt;BDPçš„é‡è¦æ€§ä¸»è¦ä½“ç°åœ¨å…¶å¯¹&lt;strong&gt;TCPåè®®æ€§èƒ½&lt;/strong&gt;çš„å…³é”®å½±å“ä¸Šã€‚TCPåè®®ä½¿ç”¨&lt;strong&gt;æ»‘åŠ¨çª—å£æœºåˆ¶&lt;/strong&gt;æ¥æ§åˆ¶æ•°æ®å‘é€é€Ÿç‡ï¼Œè¿™ä¸ªçª—å£å¤§å°é™åˆ¶äº†åœ¨æ”¶åˆ°ç¡®è®¤å‰èƒ½å‘é€çš„æœ€å¤§æ•°æ®é‡ã€‚&lt;strong&gt;åªæœ‰å½“TCPçš„å‘é€çª—å£å¤§å°è‡³å°‘ç­‰äºBDPæ—¶ï¼Œç½‘ç»œå¸¦å®½æ‰èƒ½è¢«å……åˆ†åˆ©ç”¨&lt;/strong&gt;ã€‚å¦‚æœçª—å£å°äºBDPï¼Œå‘é€æ–¹åœ¨ç­‰å¾…ç¡®è®¤æ—¶ç®¡é“å°±ä¼šâ€œç©ºé—²â€ï¼Œå¯¼è‡´å¸¦å®½åˆ©ç”¨ç‡ä¸è¶³å’Œå®é™…ååé‡ä¸‹é™ã€‚å› æ­¤ï¼Œåœ¨é«˜BDPçš„â€œé•¿èƒ–ç½‘ç»œâ€ï¼ˆå¦‚å«æ˜Ÿé“¾è·¯ã€è·¨å¤§é™†é•¿é€”ç½‘ç»œï¼‰ä¸­ï¼Œå¿…é¡»é€šè¿‡&lt;strong&gt;TCPçª—å£ç¼©æ”¾&lt;/strong&gt;ç­‰æœºåˆ¶è°ƒæ•´çª—å£å¤§å°ï¼Œå¦åˆ™å³ä½¿å¸¦å®½å¾ˆé«˜ï¼Œå®é™…ä¼ è¾“é€Ÿåº¦ä¹Ÿä¼šå—é™ã€‚&lt;/p&gt;
&lt;h3 id="-bdpåœ¨ç½‘ç»œä¼˜åŒ–ä¸­çš„åº”ç”¨"&gt;âš™ï¸ BDPåœ¨ç½‘ç»œä¼˜åŒ–ä¸­çš„åº”ç”¨
&lt;/h3&gt;&lt;p&gt;ç†è§£BDPæœ‰åŠ©äºè¿›è¡Œç½‘ç»œæ€§èƒ½è°ƒä¼˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å†²åŒºè®¾ç½®&lt;/strong&gt;ï¼šæ“ä½œç³»ç»Ÿå†…æ ¸ä¸­TCPå¥—æ¥å­—çš„å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºå¤§å°åº”è‡³å°‘è®¾ç½®ä¸ºBDPçš„å€¼ï¼Œä»¥é¿å…æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‹¥å¡æ§åˆ¶ç®—æ³•é€‰æ‹©&lt;/strong&gt;ï¼šåœ¨é«˜BDPç½‘ç»œä¸­ï¼Œåƒ&lt;strong&gt;BBRï¼ˆBottleneck Bandwidth and Round-trip propagation timeï¼‰&lt;/strong&gt; è¿™ç±»è¾ƒæ–°çš„æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯åŠ¨æ€æ¢æµ‹è·¯å¾„çš„BDPï¼ˆç“¶é¢ˆå¸¦å®½ä¸å¾€è¿”æ—¶å»¶çš„ä¹˜ç§¯ï¼‰ï¼Œå¹¶ä»¥æ­¤è°ƒæ•´å‘é€é€Ÿç‡ï¼Œä»¥æœŸè·å¾—æ›´ä½³æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè®®ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹äºè·¨åœ°åŸŸçš„å¾®æœåŠ¡é€šä¿¡ç­‰åœºæ™¯ï¼Œé«˜BDPä¼šæ˜¾è‘—å½±å“æ€§èƒ½ã€‚ä¼˜åŒ–ç­–ç•¥å¯èƒ½åŒ…æ‹¬é€‰æ‹©æ›´é«˜æ•ˆçš„ä¼ è¾“åè®®ï¼ˆå¦‚HTTP/2ã€QUICï¼‰ï¼Œæˆ–æ ¹æ®BDPé¢„æµ‹ç»“æœè¿›è¡ŒåŠ¨æ€æµé‡è°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒBDPç½‘ç»œæ¦‚å¿µçš„æ ¸å¿ƒæ˜¯&lt;strong&gt;å¸¦å®½æ—¶å»¶ç§¯ï¼ˆBDPï¼‰&lt;/strong&gt;ã€‚å®ƒå®šä¹‰äº†ç½‘ç»œé“¾è·¯çš„â€œæ•°æ®ç®¡é“â€å®¹é‡ï¼Œæ˜¯ç†è§£å’Œä¼˜åŒ–ç½‘ç»œæ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¸¦å®½ã€é«˜å»¶è¿Ÿçš„â€œé•¿èƒ–ç½‘ç»œâ€ä¸­æ€§èƒ½çš„å…³é”®æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£BDPç½‘ç»œã€‚å¦‚æœä½ å¯¹ç‰¹å®šç½‘ç»œç¯å¢ƒä¸‹çš„BDPè®¡ç®—æˆ–ä¼˜åŒ–ç­–ç•¥æœ‰è¿›ä¸€æ­¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="127001å’Œlocalhost"&gt;127.0.0.1å’Œlocalhost
&lt;/h2&gt;&lt;p&gt;127.0.0.1 å’Œ localhost åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥äº’æ¢ä½¿ç”¨ï¼Œéƒ½æŒ‡å‘æ‚¨è‡ªå·±çš„è®¡ç®—æœºã€‚ä½†å®ƒä»¬åœ¨æœ€æ ¹æœ¬çš„å±‚é¢ä¸Šæ˜¯ä¸åŒçš„ï¼Œç†è§£è¿™äº›ç»†å¾®å·®åˆ«æœ‰åŠ©äºè§£å†³ä¸€äº›ç‰¹å®šçš„ç½‘ç»œé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;localhost&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;127.0.0.1&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;ä¸»æœºå&lt;/strong&gt;ï¼ˆåŸŸåï¼‰&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;IPv4åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§£ææ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦é€šè¿‡ç³»ç»Ÿ hosts æ–‡ä»¶æˆ–DNSè§£æä¸ºIPåœ°å€åæ‰èƒ½ä½¿ç”¨&lt;/td&gt;
&lt;td&gt;æ˜¯æœ€ç»ˆçš„åœ°å€ï¼Œ&lt;strong&gt;æ— éœ€è§£æ&lt;/strong&gt;ï¼Œå¯ç›´æ¥è¢«ç½‘ç»œåè®®æ ˆè¯†åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè®®æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´&lt;strong&gt;çµæ´»&lt;/strong&gt;ï¼Œé€šå¸¸åŒæ—¶æ˜ å°„åˆ°IPv4ï¼ˆ127.0.0.1ï¼‰å’ŒIPv6ï¼ˆ::1ï¼‰&lt;/td&gt;
&lt;td&gt;ä»…æ”¯æŒ&lt;strong&gt;IPv4&lt;/strong&gt;åè®®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿçš„hostsæ–‡ä»¶ï¼Œæ”¹å˜å…¶æŒ‡å‘çš„IPåœ°å€&lt;/td&gt;
&lt;td&gt;æ˜¯å›ºå®šä¸å˜çš„ä¿ç•™åœ°å€ï¼Œæ— æ³•ä¿®æ”¹å…¶å«ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸æ½œåœ¨å½±å“"&gt;ğŸ’» å·¥ä½œåŸç†ä¸æ½œåœ¨å½±å“
&lt;/h3&gt;&lt;p&gt;è¿™ç§æœ¬è´¨ä¸Šçš„ä¸åŒï¼Œå†³å®šäº†å®ƒä»¬çš„å·¥ä½œæµç¨‹å’Œåœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½å‡ºç°çš„å·®å¼‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼šå½“æ‚¨åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ &lt;strong&gt;&lt;code&gt;localhost&lt;/code&gt;&lt;/strong&gt; æ—¶ï¼Œè®¡ç®—æœºä¼šå…ˆæŸ¥è¯¢æœ¬åœ°çš„ &lt;strong&gt;hostsæ–‡ä»¶&lt;/strong&gt;ï¼ˆå¦‚Windowsä¸‹çš„ &lt;code&gt;C:\Windows\System32\drivers\etc\hosts&lt;/code&gt;æˆ–Linux/macOSä¸‹çš„ &lt;code&gt;/etc/hosts&lt;/code&gt;ï¼‰ï¼Œæ‰¾åˆ°å…¶å¯¹åº”çš„IPåœ°å€ï¼ˆé€šå¸¸æ˜¯127.0.0.1ï¼‰ï¼Œç„¶åå†é€šè¿‡è¯¥IPåœ°å€è®¿é—®æœ¬åœ°æœåŠ¡ã€‚è€Œè¾“å…¥ &lt;strong&gt;&lt;code&gt;127.0.0.1&lt;/code&gt;&lt;/strong&gt; åˆ™çœç•¥äº†åŸŸåè§£æè¿™ä¸€æ­¥ï¼Œç›´æ¥å‘Šè¯‰ç½‘ç»œæ ˆï¼šâ€œè¯·è®¿é—®å›ç¯åœ°å€â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®é™…åœºæ™¯ä¸­çš„å·®å¼‚&lt;/strong&gt;ï¼šæ­£å› ä¸ºä¸Šè¿°æµç¨‹çš„å·®åˆ«ï¼Œåœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œä¸¤è€…å¯èƒ½è¡¨ç°å‡ºä¸åŒï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;IPv6ä¼˜å…ˆçº§&lt;/strong&gt;ï¼šåœ¨æŸäº›ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œé…ç½®ä¸ºä¼˜å…ˆä½¿ç”¨IPv6ã€‚å½“è®¿é—® &lt;code&gt;localhost&lt;/code&gt;æ—¶ï¼Œç³»ç»Ÿå¯èƒ½ä¼šä¼˜å…ˆå°è¯•è¿æ¥IPv6åœ°å€ &lt;code&gt;::1&lt;/code&gt;ã€‚å¦‚æœæ‚¨çš„æœåŠ¡åªç›‘å¬IPv4çš„ &lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œå°±å¯èƒ½å¯¼è‡´è¿æ¥å¤±è´¥ã€‚æ­¤æ—¶ï¼Œæ˜ç¡®ä½¿ç”¨ &lt;code&gt;127.0.0.1&lt;/code&gt;å¯ä»¥ç¡®ä¿è¿æ¥IPv4æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨ç¨‹åºçš„è¯†åˆ«æ–¹å¼&lt;/strong&gt;ï¼šä¸€äº›åº”ç”¨ç¨‹åºï¼ˆæœ€ç»å…¸çš„ä¾‹å­æ˜¯MySQLæ•°æ®åº“ï¼‰å¯¹å¾… &lt;code&gt;localhost&lt;/code&gt;å’Œ &lt;code&gt;127.0.0.1&lt;/code&gt;çš„æ–¹å¼å®Œå…¨ä¸åŒã€‚è¿æ¥ &lt;code&gt;localhost&lt;/code&gt;æ—¶ï¼Œå®ƒå¯èƒ½ä¼šä½¿ç”¨æ›´é«˜æ•ˆçš„&lt;strong&gt;Unixå¥—æ¥å­—&lt;/strong&gt; æ–¹å¼è¿›è¡Œé€šä¿¡ï¼›è€Œè¿æ¥ &lt;code&gt;127.0.0.1&lt;/code&gt;æ—¶ï¼Œåˆ™ä¼šä½¿ç”¨æ ‡å‡†çš„&lt;strong&gt;TCP/IP&lt;/strong&gt; åè®®ã€‚è¿™å¯èƒ½ä¼šåœ¨æ€§èƒ½å’Œè¿æ¥æˆåŠŸç‡ä¸Šäº§ç”Ÿå·®å¼‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸æ€»ç»“"&gt;ğŸ’ å¦‚ä½•é€‰æ‹©ä¸æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;127.0.0.1&lt;/code&gt;æ˜¯å…·ä½“çš„&lt;strong&gt;åœ°å€&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;localhost&lt;/code&gt;æ˜¯ä¾¿äºè®°å¿†çš„&lt;strong&gt;åç§°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é€‰æ‹©ä½¿ç”¨æ—¶ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹å»ºè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€èˆ¬å¼€å‘å’Œæµ‹è¯•&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;localhost&lt;/code&gt;å³å¯ï¼Œå› ä¸ºå®ƒæ›´ç›´è§‚ï¼Œä¸”èƒ½è‡ªåŠ¨é€‚åº”IPv4/IPv6ç¯å¢ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ç²¾ç¡®æ§åˆ¶æ—¶&lt;/strong&gt;ï¼šå½“é‡åˆ°ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œæˆ–éœ€è¦æ˜ç¡®æŒ‡å®šä½¿ç”¨IPv4åè®®æ—¶ï¼ˆä¾‹å¦‚åœ¨è„šæœ¬æˆ–é…ç½®æ–‡ä»¶é‡Œï¼‰ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ &lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œä»¥é¿å…åŸŸåè§£æå¯èƒ½å¸¦æ¥çš„ä¸ç¡®å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥hostsæ–‡ä»¶&lt;/strong&gt;ï¼šå¦‚æœé‡åˆ° &lt;code&gt;localhost&lt;/code&gt;æ— æ³•è®¿é—®è€Œ &lt;code&gt;127.0.0.1&lt;/code&gt;å¯ä»¥çš„æƒ…å†µï¼Œå¯ä»¥æ£€æŸ¥ç³»ç»Ÿçš„hostsæ–‡ä»¶ï¼Œçœ‹ &lt;code&gt;localhost&lt;/code&gt;æ˜¯å¦è¢«é”™è¯¯åœ°æŒ‡å‘äº†å…¶ä»–IPåœ°å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´æ¸…æ™°åœ°ç†è§£è¿™ä¸¤è€…çš„åŒºåˆ«ã€‚å¦‚æœæ‚¨åœ¨æŸä¸ªå…·ä½“åœºæ™¯ä¸‹é‡åˆ°äº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="1"&gt;::1
&lt;/h2&gt;&lt;p&gt;IPv6 çš„ç¯å›åœ°å€è®¾è®¡ä¸º &lt;code&gt;::1&lt;/code&gt;ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨åœ°å€ç»“æ„å’ŒåŠŸèƒ½ä¸Šç»§æ‰¿å¹¶ç®€åŒ– IPv4 ä¸­ &lt;code&gt;127.0.0.1&lt;/code&gt;çš„ç¯å›æœºåˆ¶ï¼ŒåŒæ—¶é€‚åº” IPv6 æ›´å¤§çš„åœ°å€ç©ºé—´ã€‚&lt;/p&gt;
&lt;h3 id="-ipv6-ç¯å›åœ°å€çš„è®¾è®¡é€»è¾‘"&gt;ğŸ” IPv6 ç¯å›åœ°å€çš„è®¾è®¡é€»è¾‘
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;::1&lt;/code&gt;ä½œä¸º IPv6 çš„ç¯å›åœ°å€ï¼Œå…¶è®¾è®¡ä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹è€ƒè™‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€ç©ºé—´çš„æè‡´ç®€åŒ–&lt;/strong&gt;ï¼šIPv6 æ‹¥æœ‰å·¨å¤§çš„ 128 ä½åœ°å€ç©ºé—´ã€‚ç¯å›åœ°å€è¢«å®šä¹‰ä¸ºä¸€é•¿ä¸² 0 åæ¥ä¸€ä¸ª 1ï¼Œå³ &lt;code&gt;0000:0000:0000:0000:0000:0000:0000:0001&lt;/code&gt;ã€‚é€šè¿‡å‹ç¼©å‰å¯¼é›¶å’Œè¿ç»­çš„é›¶ç»„ï¼ˆç”¨ &lt;code&gt;::&lt;/code&gt;è¡¨ç¤ºï¼‰ï¼Œå°±å¾—åˆ°äº†æœ€ç®€å½¢å¼ &lt;code&gt;::1&lt;/code&gt;ã€‚è¿™ç¡®ä¿äº†å…¶å”¯ä¸€æ€§å’Œæœ€ç®€æ´çš„è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½ç»§æ‰¿ä¸åè®®éš”ç¦»&lt;/strong&gt;ï¼šç¯å›åœ°å€çš„æ ¸å¿ƒä½œç”¨æ˜¯è®©è®¾å¤‡èƒ½å¤Ÿå‘è‡ªå·±å‘é€æ•°æ®åŒ…ï¼Œç”¨äºæœ¬åœ°ç½‘ç»œæœåŠ¡çš„æµ‹è¯•å’Œé€šä¿¡ï¼Œè€Œæ•°æ®åŒ…ä¸ä¼šç¦»å¼€ä¸»æœºã€‚&lt;code&gt;::1&lt;/code&gt;åœ¨åŠŸèƒ½ä¸Šå®Œå…¨ç­‰åŒäº IPv4 ä¸­çš„ &lt;code&gt;127.0.0.1&lt;/code&gt;ã€‚ä½¿ç”¨ç‹¬ç«‹çš„ &lt;code&gt;::1&lt;/code&gt;åœ°å€å¯ä»¥å®ç° IPv6 åè®®æ ˆå†…éƒ¨çš„ç¯å›æµ‹è¯•ï¼Œä¸ IPv4 åè®®æ ˆäº’ä¸å¹²æ‰°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åœ°å€å†²çª&lt;/strong&gt;ï¼šåœ¨ IPv4 ä¸­ï¼Œ&lt;code&gt;127.0.0.1&lt;/code&gt;åªæ˜¯ &lt;code&gt;127.0.0.0/8&lt;/code&gt;è¿™ä¸ªç¯å›åœ°å€å—ä¸­çš„ä¸€ä¸ªåœ°å€ã€‚IPv6 çš„åœ°å€ç©ºé—´è¶³å¤Ÿåºå¤§ï¼Œå› æ­¤åªéœ€ä¸€ä¸ªå•ç‹¬çš„åœ°å€ &lt;code&gt;::1/128&lt;/code&gt;æ¥æ ‡è¯†ç¯å›æ¥å£ï¼Œè¿™ç®€åŒ–äº†å®ç°å’Œç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸-ipv4-ç¯å›åœ°å€çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸ IPv4 ç¯å›åœ°å€çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£ï¼Œä¸‹è¡¨å¯¹æ¯”äº† IPv4 å’Œ IPv6 çš„ç¯å›åœ°å€ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”é¡¹&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IPv4 ç¯å›åœ°å€ (&lt;code&gt;127.0.0.1&lt;/code&gt;)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IPv6 ç¯å›åœ°å€ (&lt;code&gt;::1&lt;/code&gt;)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å±äºä¸€ä¸ªåœ°å€å— (&lt;code&gt;127.0.0.0/8&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å•ä¸€åœ°å€ (&lt;code&gt;::1/128&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ç¤ºå½¢å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‚¹åˆ†åè¿›åˆ¶&lt;/td&gt;
&lt;td&gt;åå…­è¿›åˆ¶å‹ç¼©æ ¼å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äº IPv4 åè®®æ ˆçš„æœ¬åœ°ç¯å›æµ‹è¯•&lt;/td&gt;
&lt;td&gt;ç”¨äº IPv6 åè®®æ ˆçš„æœ¬åœ°ç¯å›æµ‹è¯•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸­çš„æ³¨æ„äº‹é¡¹"&gt;ğŸ’» å®é™…åº”ç”¨ä¸­çš„æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ä½¿ç”¨ &lt;code&gt;::1&lt;/code&gt;æ—¶ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®æ ¼å¼&lt;/strong&gt;ï¼šåœ¨æµè§ˆå™¨æˆ–å‘½ä»¤è¡Œå·¥å…·ä¸­ç›´æ¥è®¿é—® &lt;code&gt;::1&lt;/code&gt;æ—¶ï¼Œ&lt;strong&gt;å¿…é¡»ç”¨æ–¹æ‹¬å·å°†å…¶æ‹¬èµ·æ¥&lt;/strong&gt;ï¼Œä¾‹å¦‚ &lt;code&gt;http://[::1]&lt;/code&gt;æˆ– &lt;code&gt;ping [::1]&lt;/code&gt;ã€‚è¿™æ˜¯å› ä¸ºå†’å·æ˜¯ IPv6 åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œæ–¹æ‹¬å·æœ‰åŠ©äºåŒºåˆ†åœ°å€å’Œç«¯å£å·ï¼ˆå¦‚ &lt;code&gt;[::1]:8080&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè§£æä¼˜å…ˆçº§&lt;/strong&gt;ï¼šåœ¨æŸäº›æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Windows 10/11ï¼‰ä¸­ï¼Œå½“æ‚¨ ping &lt;code&gt;localhost&lt;/code&gt;æ—¶ï¼Œç³»ç»Ÿå¯èƒ½ä¼šä¼˜å…ˆå°†å…¶è§£æä¸º IPv6 çš„ &lt;code&gt;::1&lt;/code&gt;è€Œä¸æ˜¯ IPv4 çš„ &lt;code&gt;127.0.0.1&lt;/code&gt;ã€‚è¿™é€šå¸¸æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œè¡¨æ˜ç³»ç»Ÿçš„ IPv6 åè®®æ ˆå·¥ä½œæ­£å¸¸ã€‚å¦‚æœæŸäº›åº”ç”¨å¿…é¡»ä½¿ç”¨ IPv4 åœ°å€ï¼Œå¯ä»¥å°è¯•ç›´æ¥æŒ‡å®š &lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œæˆ–è€…æ£€æŸ¥ç³»ç»Ÿçš„ hosts æ–‡ä»¶ï¼ˆé€šå¸¸ä½äº &lt;code&gt;C:\Windows\System32\drivers\etc\hosts&lt;/code&gt;æˆ– &lt;code&gt;/etc/hosts&lt;/code&gt;ï¼‰ï¼Œç¡®ä¿å…¶ä¸­åŒ…å« &lt;code&gt;127.0.0.1 localhost&lt;/code&gt;çš„æ˜ å°„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´æ·±å…¥åœ°ç†è§£ IPv6 ç¯å›åœ°å€ &lt;code&gt;::1&lt;/code&gt;çš„ç”±æ¥å’Œç”¨é€”ã€‚å¦‚æœæ‚¨å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é…ç½®æœ‰è¿›ä¸€æ­¥ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="nat1"&gt;NAT1
&lt;/h2&gt;&lt;p&gt;å½“å±€åŸŸç½‘å†…çš„ä¸¤å°ä¸»æœºåŒæ—¶è®¿é—®åŒä¸€ä¸ªå¤–éƒ¨æœåŠ¡å™¨çš„ç›¸åŒIPå’Œç«¯å£æ—¶ï¼ŒNATè®¾å¤‡ï¼ˆé€šå¸¸æ˜¯ä½ çš„è·¯ç”±å™¨ï¼‰èƒ½å¤Ÿå‡†ç¡®åœ°å°†è¿”å›çš„æ•°æ®åŒ…â€œå„å½’å…¶ä¸»â€ï¼Œå…¶æ ¸å¿ƒç§˜è¯€åœ¨äºä¸€ç§å«åš &lt;strong&gt;NAPT&lt;/strong&gt; çš„æŠ€æœ¯ï¼Œä»¥åŠå…¶ç»´æŠ¤çš„ä¸€å¼ å…³é”®â€œæ˜ å°„è¡¨â€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹é¢çš„æµç¨‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹çš„æ ¸å¿ƒæ­¥éª¤ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ä¸»æœºAè¯·æ±‚&amp;lt;br&amp;gt;192.168.1.2:5000] --&amp;gt; B{NATè·¯ç”±å™¨&amp;lt;br&amp;gt;å¤„ç†è¯·æ±‚}
C[ä¸»æœºBè¯·æ±‚&amp;lt;br&amp;gt;192.168.1.3:5000] --&amp;gt; B
B --&amp;gt; D[åˆ†é…å”¯ä¸€å…¬ç½‘ç«¯å£]
D --&amp;gt; E[ç”Ÿæˆå¹¶è®°å½•æ˜ å°„å…³ç³»]
E --&amp;gt; F[å“åº”åŒ…æŠµè¾¾&amp;lt;br&amp;gt;å…¬ç½‘IP:62001]
E --&amp;gt; G[å“åº”åŒ…æŠµè¾¾&amp;lt;br&amp;gt;å…¬ç½‘IP:62002]
F --&amp;gt; H{NATè·¯ç”±å™¨&amp;lt;br&amp;gt;æŸ¥è¯¢æ˜ å°„è¡¨}
G --&amp;gt; H
H --&amp;gt; I[è½¬å‘ç»™ä¸»æœºA&amp;lt;br&amp;gt;192.168.1.2:5000]
H --&amp;gt; J[è½¬å‘ç»™ä¸»æœºB&amp;lt;br&amp;gt;192.168.1.3:5000]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…³é”®æœºåˆ¶ç«¯å£è½¬æ¢ä¸æ˜ å°„è¡¨"&gt;ğŸ” å…³é”®æœºåˆ¶ï¼šç«¯å£è½¬æ¢ä¸æ˜ å°„è¡¨
&lt;/h3&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒNATè·¯ç”±å™¨ä¹‹æ‰€ä»¥èƒ½åšå‡ºæ­£ç¡®åˆ¤æ–­ï¼Œä¾èµ–äºä»¥ä¸‹ä¸¤ä¸ªå…³é”®æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç«¯å£è½¬æ¢ï¼ˆPATï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯NAPTçš„æ ¸å¿ƒã€‚å½“æ•°æ®åŒ…ä»å†…ç½‘å‘å‡ºæ—¶ï¼ŒNATè·¯ç”±å™¨ä¸ä»…ä¼šå°†ä½ çš„ç§æœ‰IPåœ°å€ï¼ˆå¦‚&lt;code&gt;192.168.1.2&lt;/code&gt;ï¼‰æ›¿æ¢æˆå…¬ç½‘IPåœ°å€ï¼ˆå¦‚&lt;code&gt;203.0.113.1&lt;/code&gt;ï¼‰ï¼Œ&lt;strong&gt;è¿˜ä¼šä¸ºè¿™æ¬¡ä¼šè¯åˆ†é…ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å…¬ç½‘ç«¯å£å·&lt;/strong&gt;ï¼ˆä¾‹å¦‚å°†ä½ çš„&lt;code&gt;5000&lt;/code&gt;ç«¯å£è½¬æ¢ä¸º&lt;code&gt;62001&lt;/code&gt;ï¼‰ã€‚è¿™æ ·ï¼Œå³ä½¿å†…ç½‘ä¸¤å°ä¸»æœºä½¿ç”¨äº†ç›¸åŒçš„æºç«¯å£ï¼Œç»è¿‡NATè½¬æ¢åï¼Œåœ¨å…¬ç½‘ä¸Šçœ‹åˆ°çš„ä¼šè¯è¿æ¥ä¹Ÿæ˜¯ä¸åŒçš„ï¼ˆ&lt;code&gt;203.0.113.1:62001&lt;/code&gt;vs &lt;code&gt;203.0.113.1:62002&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NATæ˜ å°„è¡¨&lt;/strong&gt;ï¼šNATè·¯ç”±å™¨å†…éƒ¨ç»´æŠ¤ç€ä¸€å¼ åŠ¨æ€çš„â€œæ˜ å°„è¡¨â€ï¼ˆä¹Ÿç§°ä¼šè¯è¡¨ï¼‰ã€‚è¿™å¼ è¡¨è®°å½•äº†æ¯æ¡è¿æ¥è½¬æ¢å‰åçš„å››å…ƒç»„ä¿¡æ¯ï¼š&lt;strong&gt;å†…éƒ¨ä¸»æœºçš„ï¼ˆç§æœ‰IP:ç«¯å£ï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;è½¬æ¢åçš„ï¼ˆå…¬ç½‘IP:ç«¯å£ï¼‰&lt;/strong&gt; çš„å¯¹åº”å…³ç³»ã€‚å½“å¤–éƒ¨æœåŠ¡å™¨çš„å“åº”åŒ…åˆ°è¾¾æ—¶ï¼Œè·¯ç”±å™¨ä¼šæ£€æŸ¥æ•°æ®åŒ…çš„ç›®çš„IPå’Œç›®çš„ç«¯å£ï¼Œç„¶ååœ¨è¿™å¼ è¡¨é‡ŒæŸ¥æ‰¾åŒ¹é…é¡¹ï¼Œå°±èƒ½ç¡®å®šåº”è¯¥å°†æ•°æ®åŒ…è½¬å‘ç»™å“ªå°å†…éƒ¨ä¸»æœºäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„ä¸åŒç±»å‹çš„natè¡Œä¸ºæœ‰å·®å¼‚"&gt;âš ï¸ æ³¨æ„ï¼šä¸åŒç±»å‹çš„NATè¡Œä¸ºæœ‰å·®å¼‚
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶éæ‰€æœ‰NATè®¾å¤‡çš„è¡Œä¸ºéƒ½å®Œå…¨ä¸€è‡´ã€‚æ ¹æ®å…¶ç«¯å£åˆ†é…ç­–ç•¥ï¼Œä¸»è¦å¯åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;NATç±»å‹&lt;/th&gt;
&lt;th&gt;è¡Œä¸ºç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å¯¹ä¸Šè¿°åœºæ™¯çš„å½±å“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é”¥å‹NAT&lt;/strong&gt; ï¼ˆå¦‚å…¨é”¥å½¢ï¼‰&lt;/td&gt;
&lt;td&gt;å†…éƒ¨ä¸»æœºçš„åŒä¸€ï¼ˆIP:ç«¯å£ï¼‰å¯¹æ— è®ºè®¿é—®ä»€ä¹ˆå¤–éƒ¨åœ°å€ï¼Œéƒ½ä¼šè¢«æ˜ å°„åˆ°åŒä¸€ä¸ªå…¬ç½‘ï¼ˆIP:ç«¯å£ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;å¦‚æœä¸¤å°ä¸»æœºæ°å·§ä½¿ç”¨äº†ç›¸åŒçš„æºç«¯å£å»è®¿é—®åŒä¸€ä¸ªæœåŠ¡å™¨ï¼ŒNATå¯èƒ½ä¼šåˆ†é…ç›¸åŒçš„å…¬ç½‘ç«¯å£ï¼Œå¯¼è‡´å†²çªã€‚ä¸è¿‡ï¼Œç°ä»£æ“ä½œç³»ç»Ÿé€šå¸¸ä¼šé¿å…æºç«¯å£é‡å¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹ç§°å‹NAT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…éƒ¨ä¸»æœºè®¿é—®&lt;strong&gt;ä¸åŒçš„å¤–éƒ¨ç›®æ ‡&lt;/strong&gt;æ—¶ï¼Œå³ä½¿æºç«¯å£ç›¸åŒï¼ŒNATä¹Ÿä¼šä¸ºå…¶åˆ†é…&lt;strong&gt;ä¸åŒçš„å…¬ç½‘ç«¯å£&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒNATå‡ ä¹æ€»æ˜¯ä¼šä¸ºè®¿é—®åŒä¸€æœåŠ¡å™¨çš„ä¸¤å°ä¸»æœºåˆ†é…ä¸åŒçš„å…¬ç½‘ç«¯å£ï¼Œä»è€Œå¤©ç„¶åœ°é¿å…äº†å†²çªï¼Œæ˜¯æœ€ä¸¥æ ¼ä½†ä¹Ÿæœ€æ¸…æ™°çš„æ–¹å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒNATè·¯ç”±å™¨å°±åƒä¸€ä½å°½èŒå°½è´£çš„å…¬å¯“ç®¡ç†å‘˜ã€‚å½“æ¥¼é‡Œï¼ˆå±€åŸŸç½‘ï¼‰çš„ä¸¤ä½ä½æˆ·ï¼ˆä¸»æœºAå’ŒBï¼‰åŒæ—¶ç»™åŒä¸€ä½æœ‹å‹ï¼ˆå¤–éƒ¨æœåŠ¡å™¨ï¼‰å¯„ä¿¡æ—¶ï¼Œç®¡ç†å‘˜ä¼šè®°å½•ä¸‹æ¯å°ä¿¡ä»¶å¯¹åº”çš„å‘å‡ºæˆ¿é—´å·ï¼Œå¹¶ç»Ÿä¸€ä½¿ç”¨å…¬å¯“çš„åœ°å€ä½œä¸ºå›ä¿¡åœ°å€ï¼Œä½†ä¼šåœ¨å›ä¿¡åœ°å€ä¸Šæ ‡æ³¨ä¸€ä¸ªç‹¬ç‰¹çš„â€œè½¬äº¤ç â€ï¼ˆå…¬ç½‘ç«¯å£ï¼‰ã€‚å½“æœ‹å‹å›ä¿¡æ—¶ï¼Œç®¡ç†å‘˜æ ¹æ®â€œè½¬äº¤ç â€å°±èƒ½å‡†ç¡®æ— è¯¯åœ°å°†ä¿¡ä»¶é€å›æ­£ç¡®çš„ä½æˆ·æ‰‹ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å®Œå…¨ç†è§£NATçš„å·¥ä½œæœºåˆ¶ï¼å¦‚æœä½ å¯¹ç½‘ç»œä¸­çš„å…¶ä»–æ¦‚å¿µæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="nat"&gt;NAT
&lt;/h2&gt;&lt;p&gt;NATï¼ˆNetwork Address Translationï¼Œç½‘ç»œåœ°å€è½¬æ¢ï¼‰æ˜¯è§£å†³IPv4åœ°å€çŸ­ç¼ºé—®é¢˜çš„å…³é”®æŠ€æœ¯ï¼Œå®ƒå…è®¸ç§æœ‰ç½‘ç»œä¸­çš„è®¾å¤‡å…±äº«ä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ªå…¬ç½‘IPåœ°å€è®¿é—®äº’è”ç½‘ï¼ŒåŒæ—¶ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šéšè—å’Œä¿æŠ¤äº†å†…ç½‘ç»“æ„ã€‚&lt;/p&gt;
&lt;h3 id="-nat-çš„å·¥ä½œåŸç†"&gt;ğŸ”„ NAT çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;NAT é€šå¸¸åœ¨ä½äºç½‘ç»œè¾¹ç•Œçš„è·¯ç”±å™¨æˆ–é˜²ç«å¢™ä¸Šå®ç°ã€‚å…¶æ ¸å¿ƒå·¥ä½œæ˜¯&lt;strong&gt;ä¿®æ”¹ç»è¿‡çš„æ•°æ®åŒ…çš„IPåœ°å€å’Œç«¯å£å·&lt;/strong&gt;ï¼Œå¹¶ç»´æŠ¤ä¸€å¼ &lt;strong&gt;è½¬æ¢æ˜ å°„è¡¨&lt;/strong&gt;ä»¥è·Ÿè¸ªä¼šè¯ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡ºæ–¹å‘ï¼ˆå†…ç½‘åˆ°å…¬ç½‘ï¼‰&lt;/strong&gt;ï¼šå½“å†…ç½‘ä¸»æœºï¼ˆä¾‹å¦‚ &lt;code&gt;192.168.1.100:10000&lt;/code&gt;ï¼‰å‘å…¬ç½‘æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ &lt;code&gt;8.8.8.8:53&lt;/code&gt;ï¼‰å‘é€æ•°æ®åŒ…æ—¶ï¼ŒNAT è®¾å¤‡ä¼šæ‹¦æˆªæ­¤åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€ç«¯å£è½¬æ¢ä¸è®°å½•&lt;/strong&gt;ï¼šNAT è®¾å¤‡å°†æ•°æ®åŒ…çš„æº IP å’Œæºç«¯å£ï¼ˆ&lt;code&gt;192.168.1.100:10000&lt;/code&gt;ï¼‰è½¬æ¢ä¸ºè‡ªå·±å…¬ç½‘ IP å’Œä¸€ä¸ªæ–°åˆ†é…çš„ç«¯å£ï¼ˆä¾‹å¦‚ &lt;code&gt;203.0.113.1:60000&lt;/code&gt;ï¼‰ï¼Œå¹¶å°† &lt;code&gt;192.168.1.100:10000 &amp;lt;-&amp;gt; 203.0.113.1:60000&lt;/code&gt;çš„æ˜ å°„å…³ç³»è®°å½•åœ¨ NAT è¡¨ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬å‘æ•°æ®åŒ…&lt;/strong&gt;ï¼šNAT è®¾å¤‡å°†ä¿®æ”¹åæºåœ°å€ä¸º &lt;code&gt;203.0.113.1:60000&lt;/code&gt;çš„æ•°æ®åŒ…è½¬å‘è‡³å…¬ç½‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¥æ–¹å‘ï¼ˆå…¬ç½‘åˆ°å†…ç½‘ï¼‰&lt;/strong&gt;ï¼šå½“å…¬ç½‘æœåŠ¡å™¨è¿”å›å“åº”æ•°æ®åŒ…ï¼ˆç›®æ ‡åœ°å€ä¸º &lt;code&gt;203.0.113.1:60000&lt;/code&gt;ï¼‰æ—¶ï¼ŒNAT è®¾å¤‡ä¼šæ¥æ”¶è¯¥åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ å°„æŸ¥è¯¢ä¸é€†å‘è½¬æ¢&lt;/strong&gt;ï¼šNAT è®¾å¤‡æ ¹æ®å“åº”åŒ…çš„ç›®æ ‡ IP å’Œç«¯å£ï¼ˆ&lt;code&gt;203.0.113.1:60000&lt;/code&gt;ï¼‰æŸ¥è¯¢ NAT è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„å†…ç½‘ä¸»æœºåœ°å€ï¼ˆ&lt;code&gt;192.168.1.100:10000&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åŒ…é€å›å†…ç½‘&lt;/strong&gt;ï¼šNAT è®¾å¤‡å°†å“åº”æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€ä¿®æ”¹ä¸º &lt;code&gt;192.168.1.100:10000&lt;/code&gt;ï¼Œå¹¶å°†å…¶è½¬å‘å›å†…ç½‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹å¯¹é€šä¿¡åŒæ–¹æ˜¯é€æ˜çš„ã€‚&lt;/p&gt;
&lt;h3 id="-nat-çš„ä¸»è¦ç±»å‹åŠå…¶ç‰¹ç‚¹"&gt;ğŸ“‘ NAT çš„ä¸»è¦ç±»å‹åŠå…¶ç‰¹ç‚¹
&lt;/h3&gt;&lt;p&gt;æ ¹æ®ä¸åŒçš„æ˜ å°„æ–¹å¼å’Œåº”ç”¨åœºæ™¯ï¼ŒNAT ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€ NAT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€å¯¹ä¸€å›ºå®šæ˜ å°„&lt;/td&gt;
&lt;td&gt;æ‰‹åŠ¨é…ç½®ï¼Œå†…ç½‘IPä¸å…¬ç½‘IPç»‘å®šä¸å˜ï¼›&lt;strong&gt;åŒå‘é€šä¿¡&lt;/strong&gt;ï¼Œå¤–éƒ¨å¯ç›´æ¥é€šè¿‡å…¬ç½‘IPè®¿é—®å†…éƒ¨ä¸»æœºã€‚&lt;/td&gt;
&lt;td&gt;å†…ç½‘&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;å¯¹å¤–æä¾›æœåŠ¡ï¼ˆå¦‚Webã€é‚®ä»¶æœåŠ¡å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€ NAT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»å…¬ç½‘IPæ± ä¸­åŠ¨æ€åˆ†é…ä¸€å¯¹ä¸€ä¸´æ—¶æ˜ å°„&lt;/td&gt;
&lt;td&gt;å…¬ç½‘IPåˆ†é…æ˜¯ä¸´æ—¶çš„ï¼Œé€šä¿¡ç»“æŸåé‡Šæ”¾å›æ± ï¼›&lt;strong&gt;ä»…æ”¯æŒå‡ºç«™è¿æ¥&lt;/strong&gt;ï¼Œå¹¶å‘æ•°å—å…¬ç½‘IPæ± å¤§å°é™åˆ¶ã€‚&lt;/td&gt;
&lt;td&gt;ä¼ä¸šå†…ç½‘å¤§é‡ä¸»æœºéœ€è¦ä¸´æ—¶å‡ºç«™è®¿é—®äº’è”ç½‘ï¼ˆç°è¾ƒå°‘ä½¿ç”¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NAPT (PAT)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šå¯¹ä¸€æ˜ å°„ï¼Œé€šè¿‡&lt;strong&gt;ç«¯å£å·&lt;/strong&gt;åŒºåˆ†ä¸åŒè¿æ¥ï¼ˆIP+ç«¯å£è½¬æ¢ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¸¸è§ç±»å‹&lt;/strong&gt;ï¼Œå…è®¸å¤šå°å†…ç½‘è®¾å¤‡&lt;strong&gt;å…±äº«ä¸€ä¸ªå…¬ç½‘IP&lt;/strong&gt;ï¼›æå¤§æé«˜äº†IPåœ°å€åˆ©ç”¨ç‡ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®¶åº­å®½å¸¦è·¯ç”±å™¨&lt;/strong&gt;ã€ä¸­å°ä¼ä¸šç½‘ç»œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NAT Server (ç«¯å£è½¬å‘)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™æ€é…ç½®å…¬ç½‘IPçš„ç‰¹å®šç«¯å£åˆ°å†…ç½‘æœåŠ¡å™¨çš„æ˜ å°„&lt;/td&gt;
&lt;td&gt;ä¸»åŠ¨å°†å†…ç½‘æœåŠ¡çš„&lt;strong&gt;ç‰¹å®šç«¯å£&lt;/strong&gt;æ˜ å°„åˆ°å…¬ç½‘IPçš„ç‰¹å®šç«¯å£ï¼›å…è®¸å¤–éƒ¨ç½‘ç»œä¸»åŠ¨è®¿é—®å†…ç½‘æŒ‡å®šæœåŠ¡ã€‚&lt;/td&gt;
&lt;td&gt;å°†å†…ç½‘çš„WebæœåŠ¡ã€æ‘„åƒå¤´ã€æ¸¸æˆä¸»æœºç­‰æš´éœ²åˆ°å…¬ç½‘ä»¥ä¾›è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-nat-çš„ä¼˜ç¼ºç‚¹"&gt;âš–ï¸ NAT çš„ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚çœå…¬æœ‰IPåœ°å€&lt;/strong&gt;ï¼šè¿™æ˜¯NATæœ€åˆä¹Ÿæ˜¯æœ€é‡è¦çš„ç›®çš„ï¼Œæå¤§åœ°ç¼“è§£äº†IPv4åœ°å€æ¯ç«­é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºå†…éƒ¨ç½‘ç»œå®‰å…¨æ€§&lt;/strong&gt;ï¼šNATéšè—äº†å†…éƒ¨ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„ï¼Œå¤–éƒ¨ä¸»æœºæ— æ³•ç›´æ¥çœ‹åˆ°å†…ç½‘è®¾å¤‡çš„çœŸå®IPï¼Œä»è€Œéš¾ä»¥ç›´æ¥å‘èµ·æ”»å‡»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æä¾›ä¸€å®šç¨‹åº¦çš„çµæ´»æ€§&lt;/strong&gt;ï¼šå†…éƒ¨ç½‘ç»œä½¿ç”¨ç§æœ‰IPåœ°å€ï¼Œæ›´æ”¹ç½‘ç»œç»“æ„æˆ–æ›´æ¢ISPæ—¶ï¼Œå†…éƒ¨åœ°å€æ— éœ€æ”¹å˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç ´åç«¯åˆ°ç«¯é€šä¿¡&lt;/strong&gt;ï¼šNATç ´åäº†IPåè®®æœ€åˆçš„ç«¯åˆ°ç«¯é€šä¿¡æ¨¡å‹ï¼Œä½¿å¾—ä¸€äº›ç½‘ç»œåè®®ï¼ˆå¦‚IPsecï¼‰å’Œåº”ç”¨ï¼ˆå¦‚P2Pä¸‹è½½ã€åœ¨çº¿æ¸¸æˆã€è§†é¢‘ä¼šè®®ï¼‰å˜å¾—å¤æ‚ï¼Œéœ€è¦é¢å¤–çš„&lt;strong&gt;NATç©¿é€ï¼ˆNAT Traversalï¼‰&lt;/strong&gt; æŠ€æœ¯ï¼ˆå¦‚&lt;strong&gt;STUNã€TURNã€ICE&lt;/strong&gt;ï¼‰æ¥è§£å†³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ ç½‘ç»œå¤æ‚åº¦ä¸å»¶è¿Ÿ&lt;/strong&gt;ï¼šNATè®¾å¤‡éœ€è¦ç»´æŠ¤çŠ¶æ€è¡¨å¹¶è¿›è¡Œæ•°æ®åŒ…ä¿®æ”¹ï¼Œè¿™ä¼šå¢åŠ å¤„ç†å¼€é”€ï¼Œå¼•å…¥è½»å¾®å»¶è¿Ÿï¼Œå¹¶å¯èƒ½æˆä¸ºç½‘ç»œæ•…éšœçš„æ½œåœ¨ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸäº›åº”ç”¨å±‚åè®®å…¼å®¹æ€§é—®é¢˜&lt;/strong&gt;ï¼šä¸€äº›åœ¨æ•°æ®åŒ…è½½è·ä¸­åµŒå…¥IPåœ°å€ä¿¡æ¯çš„åè®®ï¼ˆå¦‚FTPçš„ä¸»åŠ¨æ¨¡å¼ã€SIPç­‰ï¼‰ï¼Œéœ€è¦NATè®¾å¤‡å…·å¤‡&lt;strong&gt;ALGï¼ˆåº”ç”¨å±‚ç½‘å…³ï¼‰&lt;/strong&gt; åŠŸèƒ½æ‰èƒ½æ­£å¸¸ workã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-nat-çš„æœªæ¥"&gt;ğŸ”® NAT çš„æœªæ¥
&lt;/h3&gt;&lt;p&gt;å°½ç®¡NATæœ‰æ•ˆç¼“è§£äº†IPv4åœ°å€ä¸è¶³çš„é—®é¢˜ï¼Œä½†å®ƒä¹Ÿå¸¦æ¥äº†å¤æ‚æ€§å’Œæ€§èƒ½å¼€é”€ã€‚éšç€&lt;strong&gt;IPv6&lt;/strong&gt;çš„éƒ¨ç½²å’Œæ™®åŠï¼Œç†è®ºä¸Šæ¯å°è®¾å¤‡éƒ½å¯ä»¥è·å¾—ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„å…¬ç½‘IPåœ°å€ï¼Œè¿™å°†æœ€ç»ˆ&lt;strong&gt;æ¶ˆé™¤å¯¹NATçš„éœ€æ±‚&lt;/strong&gt;ï¼Œå›å½’çœŸæ­£çš„ç«¯åˆ°ç«¯è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½†åœ¨å‘IPv6å®Œå…¨è¿‡æ¸¡çš„æ¼«é•¿æ—¶æœŸå†…ï¼Œä»¥åŠåœ¨IPv4ä¸IPv6ç½‘ç»œå…±å­˜çš„åœºæ™¯ä¸‹ï¼ˆå¸¸ä½¿ç”¨&lt;strong&gt;NAT64&lt;/strong&gt;ç­‰æŠ€æœ¯ï¼‰ï¼ŒNATåŠå…¶å˜ä½“æŠ€æœ¯ä»å°†å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ NATã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„ NAT é…ç½®æˆ–ä»»ä½•ç›¸å…³æŠ€æœ¯ç»†èŠ‚æœ‰è¿›ä¸€æ­¥ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cdn"&gt;CDN
&lt;/h2&gt;&lt;p&gt;ã€‚CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰ä¸­è®©å¤šå°æœºå™¨å…±äº«åŒä¸€ä¸ªIPåœ°å€ï¼Œä¸»è¦ä¾èµ–äºä¸€ç§åä¸º &lt;strong&gt;Anycastï¼ˆä»»æ’­ï¼‰&lt;/strong&gt; çš„ç½‘ç»œè·¯ç”±æŠ€æœ¯ã€‚è¿™å’Œä½ ä¹‹å‰äº†è§£çš„IPv6ç¯å›åœ°å€ &lt;code&gt;::1&lt;/code&gt;æˆ–NATçš„åœ°å€è½¬æ¢æ˜¯æˆªç„¶ä¸åŒçš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿç†è§£Anycastçš„æ ¸å¿ƒï¼Œå¯ä»¥å…ˆçœ‹ä¸‹é¢è¿™ä¸ªç®€åŒ–çš„å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Anycast (ä»»æ’­)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Unicast (å•æ’­)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šå°æœåŠ¡å™¨ â†’ &lt;strong&gt;1ä¸ªIPåœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1å°æœåŠ¡å™¨ â†’ &lt;strong&gt;1ä¸ªIPåœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¯ç”±å†³ç­–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±&lt;strong&gt;ç½‘ç»œè·¯ç”±å™¨&lt;/strong&gt;æ ¹æ®BGPåè®®ï¼Œå°†æ•°æ®åŒ…å‘å¾€â€œæœ€è¿‘â€çš„èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;ç”±&lt;strong&gt;DNSç³»ç»Ÿ&lt;/strong&gt;è§£æå‡ºä¸€ä¸ªå›ºå®šIPï¼Œå®¢æˆ·ç«¯ç›´æ¥å‘è¯¥IPå‘èµ·è¿æ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•…éšœæ¢å¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨ä¸”å¿«é€Ÿ&lt;/strong&gt;ã€‚æŸèŠ‚ç‚¹æ•…éšœï¼ŒBGPè·¯ç”±è¡¨æ›´æ–°ï¼Œæµé‡è‡ªåŠ¨ç»•è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–æ‰‹åŠ¨æˆ–DNSåˆ‡æ¢&lt;/strong&gt;ã€‚éœ€è¦æ›´æ”¹DNSè®°å½•ï¼Œå­˜åœ¨å»¶è¿Ÿå’Œç¼“å­˜é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®ä½“éªŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·è®¿é—®&lt;strong&gt;åŒä¸€ä¸ªIP&lt;/strong&gt;ï¼Œæ€»èƒ½è¢«å¯¼åˆ°å½“å‰â€œæœ€ä¼˜â€çš„èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·è®¿é—®çš„&lt;strong&gt;IPæ˜¯å›ºå®šçš„&lt;/strong&gt;ï¼Œæ— è®ºç½‘ç»œçŠ¶å†µæˆ–æœåŠ¡å™¨çŠ¶æ€å¦‚ä½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-anycast-çš„å·¥ä½œåŸç†"&gt;ğŸ”§ Anycast çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;Anycast çš„å®ç°ä¾èµ–äºäº’è”ç½‘çš„æ ¸å¿ƒè·¯ç”±åè®®â€”â€”&lt;strong&gt;BGPï¼ˆè¾¹ç•Œç½‘å…³åè®®ï¼‰&lt;/strong&gt;ã€‚å…¶å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;IPåœ°å€å®£å‘Š&lt;/strong&gt;ï¼šCDNæœåŠ¡å•†å°†å…¶æ‹¥æœ‰çš„åŒä¸€ä¸ªIPåœ°å€ï¼ˆä¾‹å¦‚ &lt;code&gt;104.16.123.96&lt;/code&gt;ï¼‰ï¼Œä»å…¨çƒå¤šä¸ªåœ°ç‚¹çš„ä¸åŒæ•°æ®ä¸­å¿ƒï¼ˆæ¯ä¸ªæ•°æ®ä¸­å¿ƒéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œèŠ‚ç‚¹ï¼Œé€šå¸¸æ‹¥æœ‰è‡ªå·±çš„&lt;strong&gt;è‡ªæ²»ç³»ç»Ÿå·ASN&lt;/strong&gt;ï¼‰åŒæ—¶é€šè¿‡BGPåè®®å‘äº’è”ç½‘â€œå®£å‘Šâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±æ”¶æ•›&lt;/strong&gt;ï¼šå…¨çƒçš„ç½‘ç»œè·¯ç”±å™¨ä¼šé€šè¿‡BGPåè®®å­¦ä¹ åˆ°é€šå¾€è¿™ä¸ªIPåœ°å€çš„&lt;strong&gt;å¤šæ¡è·¯å¾„&lt;/strong&gt;ã€‚è·¯ç”±å™¨ä¼šæ ¹æ®æŸç§æ ‡å‡†ï¼ˆé€šå¸¸æ˜¯ASè·³æ•°ï¼‰æ¥é€‰æ‹©å®ƒè®¤ä¸ºçš„â€œæœ€ä½³è·¯å¾„â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·è¯·æ±‚è·¯ç”±&lt;/strong&gt;ï¼šå½“ç”¨æˆ·å°è¯•è®¿é—®è¿™ä¸ªAnycast IPæ—¶ï¼Œç”¨æˆ·çš„è¯·æ±‚æ•°æ®åŒ…ä¼šè¿›å…¥äº’è”ç½‘ã€‚&lt;strong&gt;æ²¿é€”çš„ç½‘ç»œè·¯ç”±å™¨ä¼šæ ¹æ®è‡ªå·±å½“æ—¶çš„è·¯ç”±è¡¨ï¼Œè‡ªåŠ¨å°†æ•°æ®åŒ…å¼•å¯¼å‘ç¦»å®ƒï¼ˆæˆ–ç¦»ç”¨æˆ·ï¼‰æœ€è¿‘çš„é‚£ä¸ªCDNèŠ‚ç‚¹&lt;/strong&gt;ã€‚è¿™ä¸ªâ€œæœ€è¿‘â€é€šå¸¸æ˜¯ç½‘ç»œæ‹“æ‰‘ä¸Šçš„è·³æ•°æœ€å°‘ï¼Œè€Œéçº¯ç²¹çš„åœ°ç†è·ç¦»æœ€è¿‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹å“åº”&lt;/strong&gt;ï¼šæœ€ç»ˆï¼Œæ•°æ®åŒ…åˆ°è¾¾é‚£ä¸ªè¢«é€‰ä¸­çš„CDNè¾¹ç¼˜èŠ‚ç‚¹ï¼Œç”±è¯¥èŠ‚ç‚¹å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”æ•°æ®ç»™ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢çš„æµç¨‹å›¾ç›´è§‚åœ°å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯ç½‘ç»œè·¯ç”±å¦‚ä½•å¼•å¯¼æµé‡ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç”¨æˆ·è¯·æ±‚ Anycast IP] --&amp;gt; B{äº’è”ç½‘éª¨å¹²ç½‘è·¯ç”±å™¨}
subgraph CDN_Nodes[CDNä»»æ’­ç½‘ç»œ]
direction LR
N1[èŠ‚ç‚¹ A&amp;lt;br&amp;gt;çº½çº¦æ•°æ®ä¸­å¿ƒ&amp;lt;br&amp;gt;å®£å‘Š IP: 104.16.123.96]
N2[èŠ‚ç‚¹ B&amp;lt;br&amp;gt;æ³•å…°å…‹ç¦æ•°æ®ä¸­å¿ƒ&amp;lt;br&amp;gt;å®£å‘Š IP: 104.16.123.96]
N3[èŠ‚ç‚¹ C&amp;lt;br&amp;gt;æ–°åŠ å¡æ•°æ®ä¸­å¿ƒ&amp;lt;br&amp;gt;å®£å‘Š IP: 104.16.123.96]
end
B -- æ ¹æ®BGPè·¯ç”±è¡¨&amp;lt;br&amp;gt;é€‰æ‹©è‡³â€œèŠ‚ç‚¹Aâ€çš„è·¯å¾„ --&amp;gt; N1
B -- æ ¹æ®BGPè·¯ç”±è¡¨&amp;lt;br&amp;gt;é€‰æ‹©è‡³â€œèŠ‚ç‚¹Bâ€çš„è·¯å¾„ --&amp;gt; N2
B -- æ ¹æ®BGPè·¯ç”±è¡¨&amp;lt;br&amp;gt;é€‰æ‹©è‡³â€œèŠ‚ç‚¹Câ€çš„è·¯å¾„ --&amp;gt; N3
N1 --&amp;gt; U1[ç”¨æˆ·A&amp;lt;br&amp;gt;æ¥è‡ªåŒ—ç¾]
N2 --&amp;gt; U2[ç”¨æˆ·B&amp;lt;br&amp;gt;æ¥è‡ªæ¬§æ´²]
N3 --&amp;gt; U3[ç”¨æˆ·C&amp;lt;br&amp;gt;æ¥è‡ªäºšæ´²]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-anycast-åœ¨-cdn-ä¸­çš„å·¨å¤§ä¼˜åŠ¿"&gt;âœ¨ Anycast åœ¨ CDN ä¸­çš„å·¨å¤§ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;è¿™ç§è®¾è®¡ä¸ºCDNå¸¦æ¥äº†å‡ ä¸ªéå¸¸å…³é”®çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½å»¶è¿Ÿä¸é«˜æ€§èƒ½&lt;/strong&gt;ï¼šç”¨æˆ·çš„è¯·æ±‚æ€»æ˜¯è¢«è‡ªåŠ¨è·¯ç”±åˆ°å½“å‰ç½‘ç»œæ¡ä»¶ä¸‹â€œæœ€è¿‘â€çš„ã€å¯ç”¨çš„CDNèŠ‚ç‚¹ï¼Œä»è€Œæå¤§å‡å°‘äº†ç½‘ç»œå»¶è¿Ÿï¼ŒåŠ å¿«äº†å†…å®¹åŠ è½½é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…ç½®çš„é«˜å¯ç”¨æ€§ä¸å®¹é”™èƒ½åŠ›&lt;/strong&gt;ï¼šå¦‚æœæŸä¸ªCDNèŠ‚ç‚¹å› ä¸ºç¡¬ä»¶æ•…éšœã€ç½‘ç»œä¸­æ–­æˆ–é­å—&lt;strong&gt;DDoSæ”»å‡»&lt;/strong&gt;è€Œç¦»çº¿ï¼Œè¯¥èŠ‚ç‚¹å°±ä¼šåœæ­¢å‘äº’è”ç½‘å®£å‘Šé‚£ä¸ªå…±äº«çš„IPåœ°å€ã€‚å…¨çƒçš„BGPè·¯ç”±è¡¨ä¼šåœ¨å‡ åˆ†é’Ÿå†…ï¼ˆç”šè‡³æ›´å¿«ï¼‰æ”¶æ•›æ›´æ–°ï¼Œä»æ­¤ä»¥åï¼Œæ‰€æœ‰æµé‡å°±ä¼š&lt;strong&gt;è‡ªåŠ¨ç»•è¿‡æ•…éšœèŠ‚ç‚¹&lt;/strong&gt;ï¼Œè¢«å¼•å¯¼åˆ°å…¶ä»–æ­£å¸¸çš„èŠ‚ç‚¹ä¸Šã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹å‡ ä¹æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼ŒæœåŠ¡ä¸ä¼šä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ºå¤§çš„DDoSæ”»å‡»æŠµå¾¡èƒ½åŠ›&lt;/strong&gt;ï¼šAnycast ç½‘ç»œâ€œå¤©ç”Ÿâ€å°±èƒ½å¾ˆå¥½åœ°ç¼“è§£DDoSæ”»å‡»ã€‚å› ä¸ºæ”»å‡»æµé‡ä¹Ÿä¼šè¢«åˆ†æ•£åˆ°å…¨çƒä¼—å¤šçš„CDNèŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹åªæ‰¿æ‹…æ€»æ”»å‡»æµé‡çš„ä¸€å°éƒ¨åˆ†ã€‚è¿™ä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹æ›´å®¹æ˜“å¤„ç†å’Œæ¸…æ´—è¿™äº›æ¶æ„æµé‡ï¼Œé¿å…äº†å•ä¸€æœåŠ¡å™¨è¢«æµé‡æ´ªæµå†²å®çš„é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸€ä¸ªé‡è¦æç¤º"&gt;ğŸ’¡ ä¸€ä¸ªé‡è¦æç¤º
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒAnycast çš„æ•ˆæœä¾èµ–äºå…¨çƒäº’è”ç½‘è·¯ç”±ç³»ç»Ÿçš„åä½œã€‚åœ¨ä¸­å›½å¤§é™†ï¼Œç”±äºç‰¹æ®Šçš„ç½‘ç»œç¯å¢ƒï¼Œå›½é™…CDNæœåŠ¡å•†ï¼ˆå¦‚Cloudflareï¼‰çš„Anycast IPå¯èƒ½æ— æ³•åƒåœ¨å…¨çƒå…¶ä»–åœ°åŒºé‚£æ ·ç†æƒ³åœ°è·¯ç”±åˆ°æœ€è¿‘çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ CDN ä¸­å¤šå°æœºå™¨å…±äº«ä¸€ä¸ª IP çš„å¥¥ç§˜ã€‚å¦‚æœä½ å¯¹ç½‘ç»œä¸­çš„å…¶ä»–æ¦‚å¿µæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="udp-512"&gt;UDP 512
&lt;/h2&gt;&lt;p&gt;UDPåè®®æœ¬èº«å¹¶æ²¡æœ‰ç¡¬æ€§è§„å®š512å­—èŠ‚çš„é™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶ä¸»è¦æºäº&lt;strong&gt;æ—©æœŸäº’è”ç½‘çš„å®è·µæ™ºæ…§&lt;/strong&gt;ï¼Œç›®çš„æ˜¯åœ¨å½“æ—¶çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œå°½å¯èƒ½ä¿è¯UDPæ•°æ®æŠ¥èƒ½å®Œæ•´ã€å¯é åœ°ä¸€æ¬¡é€è¾¾ã€‚&lt;/p&gt;
&lt;h3 id="-é™åˆ¶çš„ç”±æ¥mtuä¸é¿å…åˆ†ç‰‡"&gt;ğŸ” é™åˆ¶çš„ç”±æ¥ï¼šMTUä¸é¿å…åˆ†ç‰‡
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªé™åˆ¶çš„æ ¸å¿ƒæ˜¯ä¸ºäº†&lt;strong&gt;é¿å…IPå±‚åˆ†ç‰‡&lt;/strong&gt;ï¼Œå…¶é€»è¾‘é“¾æ¡å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œçš„æœ€å°é€šè¡Œæ ‡å‡†&lt;/strong&gt;ï¼šäº’è”ç½‘ç”±ä¼—å¤šç½‘ç»œè®¾å¤‡äº’è”è€Œæˆï¼Œä¸ºäº†ç¡®ä¿æ•°æ®åŒ…èƒ½ç•…é€šæ— é˜»ï¼ŒIPv4è§„èŒƒï¼ˆRFC 791ï¼‰è®¾å®šäº†ä¸€ä¸ª&lt;strong&gt;æœ€ä½ä¿éšœ&lt;/strong&gt;ï¼šæ‰€æœ‰ç½‘ç»œéƒ½å¿…é¡»èƒ½å¤Ÿä¼ è¾“è‡³å°‘ &lt;strong&gt;576 å­—èŠ‚&lt;/strong&gt;çš„IPæ•°æ®æŠ¥è€Œæ— éœ€åˆ†ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰£é™¤å¤´æ–‡ä»¶å¼€é”€&lt;/strong&gt;ï¼šä¸€ä¸ªIPæ•°æ®æŠ¥ç”±â€œå¤´éƒ¨â€å’Œâ€œæ•°æ®â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚IPå¤´éƒ¨æœ¬èº«é€šå¸¸å 20å­—èŠ‚ï¼ŒUDPå¤´éƒ¨å 8å­—èŠ‚ã€‚å› æ­¤ï¼Œç•™ç»™UDPæ•°æ®çš„æœ€å¤§å®‰å…¨ç©ºé—´å°±æ˜¯ &lt;code&gt;576 - 20 - 8 = 548&lt;/code&gt;å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢„ç•™å®‰å…¨ä½™é‡&lt;/strong&gt;ï¼šä»548å­—èŠ‚åˆ°æœ€ç»ˆçš„512å­—èŠ‚ï¼Œè¿™ä¸­é—´çš„ç©ºé—´æ˜¯ä½œä¸º&lt;strong&gt;å®‰å…¨ä½™é‡&lt;/strong&gt;ä¿ç•™çš„ï¼Œç”¨äºåº”å¯¹å¯èƒ½å‡ºç°çš„ã€æ¯”æ ‡å‡†20å­—èŠ‚æ›´é•¿çš„IPé€‰é¡¹å¤´éƒ¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ ·åšçš„æ ¹æœ¬åŸå› æ˜¯ï¼ŒUDPæ˜¯&lt;strong&gt;æ— è¿æ¥ã€ä¸å¯é &lt;/strong&gt;çš„åè®®ã€‚å¦‚æœä¸€ä¸ªUDPæ•°æ®æŠ¥åœ¨IPå±‚è¢«æ‹†åˆ†æˆå¤šä¸ªç‰‡æ®µä¼ è¾“ï¼Œåªè¦å…¶ä¸­ä»»ä½•ä¸€ä¸ªç‰‡æ®µä¸¢å¤±ï¼Œæ•´ä¸ªåŸå§‹æ•°æ®æŠ¥å°±æ— æ³•åœ¨æ¥æ”¶ç«¯é‡ç»„ï¼Œä¼šè¢«ç›´æ¥ä¸¢å¼ƒï¼Œä¸”å‘é€æ–¹ä¸ä¼šå¾—åˆ°ä»»ä½•é€šçŸ¥æˆ–è‡ªåŠ¨é‡ä¼ ã€‚å› æ­¤ï¼Œ&lt;strong&gt;å°†æ•°æ®æŠ¥æ§åˆ¶åœ¨512å­—èŠ‚ä»¥å†…ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°ç¡®ä¿å®ƒèƒ½å¤Ÿä½œä¸ºä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ä¸€æ¬¡æ€§é€è¾¾&lt;/strong&gt;ï¼Œä»è€Œæå‡ä¼ è¾“çš„æˆåŠŸç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸åŒç½‘ç»œç¯å¢ƒä¸‹UDPæ•°æ®æŠ¥çš„ç†è®ºæœ€å¤§å€¼å’Œå®‰å…¨å®è·µå€¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç½‘ç»œç¯å¢ƒ&lt;/th&gt;
&lt;th&gt;é“¾è·¯å±‚MTU&lt;/th&gt;
&lt;th&gt;IPæ•°æ®æŠ¥æœ€å¤§é•¿åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;UDPæ•°æ®æŠ¥å®‰å…¨å®è·µå€¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº’è”ç½‘ (æœ€å°ä¿éšœ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;576å­—èŠ‚&lt;/td&gt;
&lt;td&gt;576å­—èŠ‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;â‰¤ 512 å­—èŠ‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éµå¾ªRFCæ ‡å‡†ï¼Œç¡®ä¿å…¨çƒç½‘ç»œå¯è¾¾æ€§ï¼Œé¿å…åˆ†ç‰‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹å±€åŸŸç½‘ (ä»¥å¤ªç½‘)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1500å­—èŠ‚&lt;/td&gt;
&lt;td&gt;1500å­—èŠ‚&lt;/td&gt;
&lt;td&gt;â‰¤ 1472 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;åœ¨å¯æ§çš„å±€åŸŸç½‘å†…ï¼Œå¯é€‚å½“ä½¿ç”¨æ›´å¤§æŠ¥æ–‡ï¼Œä½†ä¸ºå…¼å®¹å¹¿åŸŸç½‘é€šä¿¡ï¼Œé€šå¸¸ä»å»ºè®®ä¿å®ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç»å…¸æ¡ˆä¾‹dnsåè®®"&gt;ğŸŒ ç»å…¸æ¡ˆä¾‹ï¼šDNSåè®®
&lt;/h3&gt;&lt;p&gt;DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰æ˜¯ä½“ç°512å­—èŠ‚é™åˆ¶æœ€è‘—åçš„ä¾‹å­ã€‚å®ƒçš„è®¾è®¡è§„å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ€åˆçš„æŸ¥è¯¢å’Œå“åº”éƒ½é€šè¿‡UDPè¿›è¡Œï¼Œä¸”æŠ¥æ–‡é•¿åº¦è¢«é™åˆ¶åœ¨512å­—èŠ‚ä»¥å†…ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœDNSå“åº”æ•°æ®è¶…è¿‡512å­—èŠ‚ï¼ŒæœåŠ¡å™¨å°†åªè¿”å›å‰512å­—èŠ‚ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªâ€œæˆªæ–­â€ï¼ˆTCï¼‰æ ‡å¿—ä½ã€‚å®¢æˆ·ç«¯åœ¨çœ‹åˆ°è¿™ä¸ªæ ‡å¿—åï¼Œå°±ä¼šæ”¹ç”¨&lt;strong&gt;TCPåè®®&lt;/strong&gt;é‡æ–°å‘èµ·æŸ¥è¯¢ï¼Œå› ä¸ºTCPæ²¡æœ‰è¿™ä¸ªé•¿åº¦é™åˆ¶ï¼Œèƒ½å¯é åœ°ä¼ è¾“å¤§é‡æ•°æ®ï¼ˆå¦‚åŒ…å«DNSSECç­¾åçš„è®°å½•ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç°ä»£å‘å±•"&gt;ğŸ’¡ ç°ä»£å‘å±•
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ512å­—èŠ‚æ˜¯ä¸€ä¸ª&lt;strong&gt;å†å²æ‚ ä¹…çš„ä¿å®ˆå»ºè®®&lt;/strong&gt;ã€‚éšç€æŠ€æœ¯å‘å±•ï¼Œä¹Ÿå‡ºç°äº†ä¸€äº›æ‰©å±•æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;EDNS0&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ç§æ‰©å±•æœºåˆ¶ï¼Œå…è®¸DNSå®¢æˆ·ç«¯åœ¨æŸ¥è¯¢ä¸­å£°æ˜è‡ªå·±èƒ½å¤Ÿæ¥æ”¶å¤§äº512å­—èŠ‚çš„UDPå“åº”ï¼Œä»è€Œåœ¨æ”¯æŒè¯¥æœºåˆ¶çš„æœåŠ¡å™¨é—´ç›´æ¥ä¼ è¾“æ›´å¤§æ•°æ®ï¼Œè€Œæ— éœ€åˆ‡æ¢è‡³TCPã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯æ§ç¯å¢ƒä¸‹çš„æ›´å¤§æŠ¥æ–‡&lt;/strong&gt;ï¼šåœ¨ä½ å®Œå…¨æŒæ§çš„ç¨³å®šç½‘ç»œç¯å¢ƒï¼ˆä¾‹å¦‚æ•°æ®ä¸­å¿ƒå†…éƒ¨ï¼‰ä¸­ï¼Œç”±äºMTUé€šå¸¸ä¸º1500å­—èŠ‚ç”šè‡³9000ï¼ˆå·¨å‹å¸§ï¼‰ï¼Œå¯ä»¥å®‰å…¨åœ°ä½¿ç”¨æ›´å¤§çš„UDPæ•°æ®æŠ¥æ¥æå‡ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£UDP 512å­—èŠ‚é™åˆ¶çš„æ¥é¾™å»è„‰ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç½‘ç»œåº”ç”¨ä¸­çš„ç»†èŠ‚æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="dns-13"&gt;DNS 13
&lt;/h2&gt;&lt;p&gt;æ‚¨æåˆ°çš„è¿™ä¸ªè¯´æ³•ï¼Œç²¾å‡†åœ°æ¦‚æ‹¬äº†æ—©æœŸDNSåè®®è®¾è®¡ä¸­çš„ä¸€ä¸ªç»å…¸æƒè¡¡ã€‚å®ƒæ¶‰åŠç½‘ç»œåŸºç¡€ã€åè®®è®¾è®¡å’Œå†å²èƒŒæ™¯ç­‰å¤šä¸ªå±‚é¢ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†æ—©æœŸDNSå“åº”æŠ¥æ–‡çš„ç»“æ„å’Œç©ºé—´åˆ†é…ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ç›´è§‚åœ°ç†è§£è¿™512å­—èŠ‚æ˜¯å¦‚ä½•è¢«ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;DNS æŠ¥æ–‡ç»„æˆéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;å¤§è‡´å ç”¨ç©ºé—´&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DNS æŠ¥æ–‡å¤´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;12 å­—èŠ‚&lt;/td&gt;
&lt;td&gt;åŒ…å«äº‹åŠ¡IDã€æ ‡å¿—ä½ï¼ˆå¦‚TCæˆªæ–­ä½ï¼‰ç­‰æ§åˆ¶ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DNS é—®é¢˜éƒ¨åˆ†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¦ 4 + åŸŸåé•¿åº¦&lt;/td&gt;
&lt;td&gt;åŒ…å«æŸ¥è¯¢çš„åŸŸåã€ç±»å‹ï¼ˆå¦‚NSï¼‰å’Œç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DNS åº”ç­”èµ„æºè®°å½• (RR)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯å˜ï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ…å«å…·ä½“çš„è®°å½•æ•°æ®ï¼Œå¦‚NSè®°å½•å’Œå¯¹åº”çš„A/AAAAè®°å½•ï¼ˆGlueè®°å½•ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æˆæƒ/é™„åŠ éƒ¨åˆ†èµ„æºè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯å˜ï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒä¸Šï¼Œç”¨äºæ”¾ç½®æˆæƒå’Œé™„åŠ ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€»è®¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;â‰¤ 512 å­—èŠ‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰éƒ¨åˆ†åŠ æ€»åçš„ä¸Šé™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-512å­—èŠ‚é™åˆ¶çš„ç”±æ¥"&gt;ğŸ” 512å­—èŠ‚é™åˆ¶çš„ç”±æ¥
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªé™åˆ¶å¹¶éDNSåè®®æœ¬èº«çš„ç†è®ºæé™ï¼Œè€Œæ˜¯æ—©æœŸä¸ºäº†&lt;strong&gt;é€‚é…ç½‘ç»œç¯å¢ƒå’Œä¿è¯ä¼ è¾“å¯é æ€§&lt;/strong&gt;åšå‡ºçš„ä¸€ä¸ªåŠ¡å®å†³å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œMTUçš„çº¦æŸ&lt;/strong&gt;ï¼šäº’è”ç½‘ä¸Šç‰©ç†é“¾è·¯çš„æœ€å°&lt;strong&gt;MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰&lt;/strong&gt; è¢«è§„å®šä¸º576å­—èŠ‚ã€‚ä¸€ä¸ªæ•°æ®åŒ…è¦é¡ºåˆ©ä¼ è¾“ï¼Œå…¶æ€»é•¿åº¦ï¼ˆIPå¤´ + ä¼ è¾“å±‚å¤´ + æ•°æ®ï¼‰ä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼ã€‚IPv4å¤´é€šå¸¸20å­—èŠ‚ï¼ŒUDPå¤´å›ºå®š8å­—èŠ‚ï¼Œå‰©ä¸‹ç•™ç»™UDPæ•°æ®çš„ç©ºé—´å°±æ˜¯ &lt;code&gt;576 - 20 - 8 = 548&lt;/code&gt;å­—èŠ‚ã€‚DNSè®¾è®¡è€…åœ¨æ­¤åŸºç¡€ä¸Šåˆç•™å‡ºäº†ä¸€å®šçš„å®‰å…¨ä½™é‡ï¼Œæœ€ç»ˆå°†&lt;strong&gt;512å­—èŠ‚å®šä¸ºUDPæŠ¥æ–‡è½½è·çš„ç¡¬æ€§ä¸Šé™&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åˆ†ç‰‡ï¼Œæå‡å¯é æ€§&lt;/strong&gt;ï¼šUDPåè®®æœ¬èº«æ˜¯â€œæ— è¿æ¥â€å’Œâ€œä¸å¯é â€çš„ï¼Œå®ƒæ²¡æœ‰é‡ä¼ æœºåˆ¶ã€‚å¦‚æœä¸€ä¸ªDNSå“åº”æŠ¥æ–‡è¶…è¿‡512å­—èŠ‚ï¼Œå®ƒä¼šåœ¨ç½‘ç»œå±‚è¢«&lt;strong&gt;åˆ†ç‰‡&lt;/strong&gt;æˆå¤šä¸ªIPæ•°æ®åŒ…ä¼ è¾“ã€‚åªè¦å…¶ä¸­ä»»æ„ä¸€ä¸ªåˆ†ç‰‡ä¸¢å¤±ï¼Œæ•´ä¸ªDNSå“åº”å°±ä¼šå› é‡ç»„å¤±è´¥è€Œè¢«ä¸¢å¼ƒï¼Œä¸”å‘é€æ–¹æ— æ³•æ„ŸçŸ¥ã€‚å¼ºåˆ¶é™åˆ¶åœ¨512å­—èŠ‚ä»¥å†…ï¼Œå¯ä»¥ç¡®ä¿ä¸€ä¸ªDNSæŸ¥è¯¢å’Œå“åº”åœ¨ç»å¤§å¤šæ•°ç½‘ç»œç¯å¢ƒä¸‹éƒ½èƒ½åœ¨&lt;strong&gt;å•ä¸ªUDPæ•°æ®åŒ…&lt;/strong&gt;å†…å®Œæˆäº¤æ¢ï¼Œæå¤§åœ°ç®€åŒ–äº†å¤„ç†é€»è¾‘å¹¶æé«˜äº†æˆåŠŸç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-13æ¡nsè®°å½•çš„è®¡ç®—é€»è¾‘"&gt;ğŸ”¢ 13æ¡NSè®°å½•çš„è®¡ç®—é€»è¾‘
&lt;/h3&gt;&lt;p&gt;åœ¨æ ¹åŸŸåæœåŠ¡å™¨çš„å“åº”ä¸­ï¼Œè¿™512å­—èŠ‚éœ€è¦å®¹çº³ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼Œè€Œ13æ¡NSè®°å½•åŠ å¯¹åº”åœ°å€çš„è®°å½•ï¼ˆGlueè®°å½•ï¼‰æ˜¯ä¸€ä¸ªç»éªŒä¸Šâ€œåˆšå¥½â€èƒ½æ”¾ä¸‹çš„æ•°é‡ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å›ºå®šå¼€é”€&lt;/strong&gt;ï¼šé¦–å…ˆæ˜¯&lt;strong&gt;DNSæŠ¥æ–‡å¤´ï¼ˆHeaderï¼‰&lt;/strong&gt;ï¼Œå›ºå®š12å­—èŠ‚ã€‚å…¶æ¬¡æ˜¯&lt;strong&gt;æŸ¥è¯¢é—®é¢˜éƒ¨åˆ†ï¼ˆQuestion Sectionï¼‰&lt;/strong&gt;ï¼Œå®ƒä¼šåŸæ ·å¤åˆ»å®¢æˆ·ç«¯çš„æŸ¥è¯¢å†…å®¹ï¼ˆæ¯”å¦‚æŸ¥è¯¢æ ¹åŸŸâ€œ.â€çš„NSè®°å½•ï¼‰ï¼Œè¿™éƒ¨åˆ†ä¹Ÿä¼šå ç”¨å°‘é‡ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç­”æ•°æ®&lt;/strong&gt;ï¼šæ ¸å¿ƒæ˜¯&lt;strong&gt;æˆæƒå›ç­”éƒ¨åˆ†ï¼ˆAuthority Sectionï¼‰&lt;/strong&gt;ï¼Œè¿™é‡Œåˆ—å‡ºäº†æ‰€æœ‰æ ¹æœåŠ¡å™¨çš„åŸŸåï¼ˆNSè®°å½•ï¼‰ã€‚æ¯æ¡NSè®°å½•é™¤äº†åŸŸåæœ¬èº«ï¼Œè¿˜æœ‰ç±»å‹ã€ç±»ã€TTLå’Œæ•°æ®é•¿åº¦ç­‰å›ºå®šå­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Glueè®°å½•&lt;/strong&gt;ï¼šä¸ºäº†é¿å…å®¢æˆ·ç«¯åœ¨æ‹¿åˆ°æ ¹æœåŠ¡å™¨åŸŸåï¼ˆå¦‚&lt;code&gt;a.root-servers.net&lt;/code&gt;ï¼‰åï¼Œè¿˜è¦å†æ¬¡å‘èµ·æŸ¥è¯¢æ‰èƒ½çŸ¥é“å®ƒçš„IPåœ°å€ï¼ŒDNSå“åº”ä¼šåœ¨&lt;strong&gt;é™„åŠ ä¿¡æ¯éƒ¨åˆ†ï¼ˆAdditional Sectionï¼‰&lt;/strong&gt; ç›´æ¥é™„ä¸Šè¿™äº›åŸŸåå¯¹åº”çš„&lt;strong&gt;IPåœ°å€ï¼ˆAè®°å½•æˆ–AAAAè®°å½•ï¼‰&lt;/strong&gt;ã€‚è¿™äº›é¢å¤–çš„A/AAAAè®°å½•å°±æ˜¯â€œGlueè®°å½•â€ï¼Œå®ƒä»¬è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿå ç”¨äº†å¤§é‡ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç»¼åˆè®¡ç®—æŠ¥æ–‡å¤´ã€é—®é¢˜éƒ¨åˆ†ã€13æ¡NSè®°å½•ä»¥åŠå¯¹åº”çš„13æ¡IPv4åœ°å€ï¼ˆAè®°å½•ï¼‰åï¼Œæ€»å¤§å°ä¼šéå¸¸æ¥è¿‘512å­—èŠ‚è¿™ä¸ªä¸Šé™ã€‚å¦‚æœå†å¢åŠ ä¸€æ¡è®°å½•ï¼Œå°±å¾ˆå¯èƒ½è¶…æ ‡ã€‚å› æ­¤ï¼Œâ€œ13æ¡â€æ˜¯åœ¨å½“æ—¶çš„æŠ€æœ¯çº¦æŸä¸‹ï¼Œæ—¢èƒ½æä¾›å®Œæ•´çš„æ ¹æœåŠ¡å™¨ä¿¡æ¯ï¼Œåˆèƒ½ç¡®ä¿æŠ¥æ–‡ä¸è¢«åˆ†ç‰‡çš„ä¸€ä¸ª&lt;strong&gt;ç²¾å¿ƒè®¾è®¡çš„å¹³è¡¡ç‚¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ç°ä»£dnsçš„æ¼”è¿›"&gt;ğŸ’¡ ç°ä»£DNSçš„æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªâ€œ512å­—èŠ‚â€çš„è§„åˆ™åœ¨ç°ä»£DNSä¸­å·²ç»æœ‰äº†é‡è¦å‘å±•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TCPä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå½“DNSæœåŠ¡å™¨å‘ç°å“åº”è¶…è¿‡512å­—èŠ‚æ—¶ï¼Œä¼šè®¾ç½®æŠ¥æ–‡å¤´ä¸­çš„&lt;strong&gt;TCï¼ˆTruncatedï¼‰æ ‡å¿—ä½&lt;/strong&gt;ï¼Œç„¶ååªè¿”å›å‰512å­—èŠ‚ã€‚å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªæˆªæ–­çš„å“åº”åï¼Œä¼šè½¬è€Œä½¿ç”¨&lt;strong&gt;TCPåè®®&lt;/strong&gt;é‡æ–°å‘èµ·æŸ¥è¯¢ã€‚TCPæ²¡æœ‰512å­—èŠ‚çš„é™åˆ¶ï¼Œå¯ä»¥å¯é åœ°ä¼ è¾“å¤§å‹å“åº”ï¼ˆå¦‚åŒ…å«DNSSECç­¾åçš„å¤§é‡æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;EDNS0ï¼ˆæ‰©å±•æœºåˆ¶ï¼‰&lt;/strong&gt;ï¼šRFC 6891å¼•å…¥çš„&lt;strong&gt;EDNS0&lt;/strong&gt; å…è®¸DNSå®¢æˆ·ç«¯åœ¨æŸ¥è¯¢ä¸­å®£å‘Šè‡ªå·±èƒ½å¤Ÿæ¥æ”¶å¤§äº512å­—èŠ‚çš„UDPæŠ¥æ–‡ã€‚å¦‚æœæœåŠ¡å™¨ä¹Ÿæ”¯æŒEDNS0ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡UDPè¿”å›æ›´å¤§çš„å“åº”ï¼Œæ— éœ€åˆ‡æ¢åˆ°TCPã€‚è¿™ä¼˜åŒ–äº†å¤§å‹æŸ¥è¯¢çš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©æ‚¨å®Œå…¨ç†è§£è¿™ä¸ªç²¾å¦™çš„åè®®è®¾è®¡ç»†èŠ‚ã€‚å¦‚æœæ‚¨å¯¹DNSSECæˆ–EDNS0ç­‰æ‰©å±•æœºåˆ¶æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="hpack"&gt;HPACK
&lt;/h2&gt;&lt;p&gt;HPACK åŠ¨æ€å­—å…¸æ˜¯ HTTP/2 å¤´éƒ¨å‹ç¼©ç®—æ³•çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒé€šè¿‡â€œ&lt;strong&gt;å¢é‡ç´¢å¼•&lt;/strong&gt;â€å’Œâ€œ&lt;strong&gt;ä¸Šä¸‹æ–‡ç›¸å…³&lt;/strong&gt;â€çš„æœºåˆ¶ï¼Œå®ç°äº†å¯¹ HTTP å¤´éƒ¨çš„é«˜æ•ˆå‹ç¼©ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒæµç¨‹ï¼Œä¸‹å›¾æç»˜äº†åŠ¨æ€å­—å…¸åœ¨å•ä¸ª HTTP/2 è¿æ¥ç”Ÿå‘½å‘¨æœŸå†…çš„å…³é”®ç¯èŠ‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[HTTP/2 è¿æ¥å»ºç«‹] --&amp;gt; B[åŠ¨æ€å­—å…¸åˆå§‹åŒ–&amp;lt;br&amp;gt;ï¼ˆä¸ºç©ºï¼‰]
B --&amp;gt; C{å¤„ç†è¯·æ±‚/å“åº”}
C --&amp;gt; D[é¦–æ¬¡å‡ºç°æ–°å¤´éƒ¨&amp;lt;br&amp;gt;ä½¿ç”¨éœå¤«æ›¼ç¼–ç ä¼ è¾“&amp;lt;br&amp;gt;å¹¶æ·»åŠ å…¥å­—å…¸]
D --&amp;gt; E[å†æ¬¡å‡ºç°ç›¸åŒå¤´éƒ¨&amp;lt;br&amp;gt;ä»…ä¼ è¾“ç´¢å¼•å·]
E --&amp;gt; F{è¿æ¥æŒç»­æ´»è·ƒ?}
F --&amp;gt;|æ˜¯| C
F --&amp;gt;|å¦| G[è¿æ¥ç»“æŸ&amp;lt;br&amp;gt;åŠ¨æ€å­—å…¸é”€æ¯]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†åŠ¨æ€å­—å…¸æœ€åŸºæœ¬çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¸‹é¢æˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹å®ƒå…·ä½“çš„å·¥ä½œåŸç†å’Œé«˜çº§ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸å…³é”®æœºåˆ¶"&gt;ğŸ” å·¥ä½œåŸç†ä¸å…³é”®æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;åŠ¨æ€å­—å…¸çš„ç²¾å¦™ä¹‹å¤„åœ¨äºå®ƒå¦‚ä½•ä¸é™æ€å­—å…¸ååŒå·¥ä½œï¼Œå¹¶ç®¡ç†è‡ªèº«ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ååŒé™æ€å­—å…¸&lt;/strong&gt;ï¼šHPACK é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª&lt;strong&gt;é™æ€å­—å…¸&lt;/strong&gt;ï¼Œå®ƒåŒ…å«äº†çº¦ 61 ä¸ªæœ€å¸¸è§çš„ HTTP å¤´éƒ¨å­—æ®µåŠå…¶å¸¸ç”¨å€¼ï¼ˆä¾‹å¦‚ &lt;code&gt;:method: GET&lt;/code&gt;ã€&lt;code&gt;:status: 200&lt;/code&gt;ï¼‰ã€‚å¯¹äºè¿™äº›å­—æ®µï¼Œç¼–ç å™¨ç›´æ¥ä¼ è¾“å¯¹åº”çš„ç´¢å¼•å·å³å¯ï¼Œæ•ˆç‡æœ€é«˜ã€‚åŠ¨æ€å­—å…¸åˆ™ç”¨äºå¤„ç†&lt;strong&gt;é™æ€å­—å…¸ä¸­ä¸å­˜åœ¨&lt;/strong&gt;çš„å¤´éƒ¨å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è¡¨æ›´æ–°æœºåˆ¶&lt;/strong&gt;ï¼šå¦‚æµç¨‹å›¾æ‰€ç¤ºï¼Œå½“ä¸€ä¸ªæ–°çš„å¤´éƒ¨å­—æ®µï¼ˆå¦‚ &lt;code&gt;User-Agent: MyBrowser/1.0&lt;/code&gt;ï¼‰é¦–æ¬¡å‡ºç°æ—¶ï¼Œç¼–ç å™¨ä¼šä½¿ç”¨&lt;strong&gt;éœå¤«æ›¼ç¼–ç &lt;/strong&gt;å¯¹å…¶è¿›è¡Œå‹ç¼©å¹¶ä¼ è¾“ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿™ä¸ªé”®å€¼å¯¹ä¼šè¢«&lt;strong&gt;æ·»åŠ åˆ°åŠ¨æ€å­—å…¸çš„å¼€å¤´&lt;/strong&gt;ã€‚å¦‚æœåŒä¸€ä¸ªè¿æ¥åç»­çš„è¯·æ±‚ä¸­å†æ¬¡å‡ºç°è¿™ä¸ªå®Œå…¨ç›¸åŒçš„ &lt;code&gt;User-Agent&lt;/code&gt;å¤´éƒ¨ï¼Œç¼–ç å™¨åªéœ€ä¼ è¾“è¯¥æ¡ç›®åœ¨å­—å…¸ä¸­çš„&lt;strong&gt;ç´¢å¼•å€¼&lt;/strong&gt;ï¼Œé€šå¸¸ä»…éœ€å‡ ä¸ªå­—èŠ‚ï¼Œå‹ç¼©æ•ˆæœéå¸¸æ˜¾è‘—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åŠ¨æ€å­—å…¸çš„é«˜çº§ç®¡ç†"&gt;âš™ï¸ åŠ¨æ€å­—å…¸çš„é«˜çº§ç®¡ç†
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ä¿è¯æ•ˆç‡ï¼ŒåŠ¨æ€å­—å…¸çš„å¤§å°éœ€è¦è¢«ä¸¥æ ¼ç®¡ç†ï¼Œè¿™ä¸»è¦æ¶‰åŠä¸¤ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¡¨å®¹é‡æ§åˆ¶&lt;/strong&gt;ï¼šç¼–ç å™¨å’Œè§£ç å™¨ä¼šåå•†ä¸€ä¸ª&lt;strong&gt;æœ€å¤§è¡¨å¤§å°&lt;/strong&gt;ã€‚å½“æ–°çš„å¤´éƒ¨å­—æ®µè¢«åŠ å…¥å¯¼è‡´è¡¨å¤§å°è¶…è¿‡ä¸Šé™æ—¶ï¼Œä¼šä»å­—å…¸&lt;strong&gt;æœ«å°¾ï¼ˆå³æœ€æ—§çš„æ¡ç›®ï¼‰å¼€å§‹é€å‡ºæ¡ç›®&lt;/strong&gt;ï¼Œç›´åˆ°æ»¡è¶³å¤§å°é™åˆ¶ã€‚æœåŠ¡å™¨ä¹Ÿå¯ä»¥é€šè¿‡å‘é€æŒ‡ä»¤åŠ¨æ€åœ°è°ƒæ•´è¿™ä¸ªå®¹é‡ä¸Šé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ç›®å¤§å°è®¡ç®—&lt;/strong&gt;ï¼šæ¯ä¸ªå­—å…¸æ¡ç›®çš„å¤§å°å¹¶éç®€å•çš„å­—ç¬¦ä¸²é•¿åº¦ã€‚å…¶è®¡ç®—å…¬å¼ä¸ºï¼š&lt;code&gt;åç§°å­—èŠ‚æ•° + å€¼å­—èŠ‚æ•° + 32å­—èŠ‚çš„é¢å¤–å¼€é”€&lt;/code&gt;ã€‚è¿™ä¸ªå¼€é”€æ˜¯ä¸ºäº†ä¼°ç®—å­˜å‚¨è¯¥æ•°æ®ç»“æ„æœ¬èº«æ‰€éœ€çš„å†…å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒä»·å€¼ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ æ ¸å¿ƒä»·å€¼ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åŠ¨æ€å­—å…¸çš„ä»·å€¼åœ¨é•¿æœŸå­˜åœ¨çš„è¿æ¥ä¸­æœ€ä¸ºçªå‡ºï¼Œå®ƒèƒ½æå¤§åœ°æ¶ˆé™¤å¤´éƒ¨å†—ä½™ã€‚ä½†ä¹Ÿæœ‰ä¸€äº›é‡è¦ç‰¹ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥éš”ç¦»&lt;/strong&gt;ï¼šæ¯ä¸ª HTTP/2 è¿æ¥éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„åŠ¨æ€å­—å…¸ã€‚å®ƒ&lt;strong&gt;ä¸ä¼šåœ¨ä¸åŒè¿æ¥ã€ä¸åŒç”¨æˆ·æˆ–ä¸åŒä¼šè¯é—´å…±äº«&lt;/strong&gt;ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ HTTP/2 ç‰¹åˆ«é¼“åŠ±ä½¿ç”¨&lt;strong&gt;é•¿è¿æ¥ï¼ˆKeep-Aliveï¼‰&lt;/strong&gt; æ¥æœ€å¤§åŒ–å‹ç¼©æ•ˆç›Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šHPACK çš„è®¾è®¡é¿å…äº†åƒæ—©æœŸ SPDY åè®®ä¸­ä½¿ç”¨çš„ DEFLATE ç®—æ³•æ‰€å¯¼è‡´çš„å®‰å…¨æ¼æ´ï¼ˆå¦‚ CRIME æ”»å‡»ï¼‰ã€‚å› ä¸ºåŠ¨æ€å­—å…¸çš„æ›´æ–°å®Œå…¨ç”±ç¼–ç å™¨æ§åˆ¶ï¼Œä¸”ä¸ç‰¹å®šè¿æ¥ç»‘å®šï¼Œæ”»å‡»è€…éš¾ä»¥æ“çºµã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒHPACK åŠ¨æ€å­—å…¸æ˜¯ä¸€ä¸ªç²¾å·§çš„â€œ&lt;strong&gt;æœ‰çŠ¶æ€&lt;/strong&gt;â€å‹ç¼©æœºåˆ¶ã€‚å®ƒé€šè¿‡å»ºç«‹å’Œç»´æŠ¤è¿æ¥åŒæ–¹ç‹¬æœ‰çš„â€œå…±äº«è®°å¿†â€ï¼Œå°†é‡å¤çš„ HTTP å¤´éƒ¨ä»å¯èƒ½çš„ä¸Šç™¾å­—èŠ‚å‹ç¼©åˆ°å¯¥å¯¥æ•°ä¸ªå­—èŠ‚ï¼Œå¯¹é™ä½ç½‘ç»œå»¶è¿Ÿã€æå‡å¸¦å®½åˆ©ç”¨ç‡èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œæ˜¯ HTTP/2 æ€§èƒ½é£è·ƒçš„å…³é”®åŠŸè‡£ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£ HPACK åŠ¨æ€å­—å…¸ã€‚å¦‚æœä½ å¯¹ HTTP/2 çš„å…¶ä»–ç‰¹æ€§ï¼Œå¦‚å¤šè·¯å¤ç”¨æˆ–æœåŠ¡å™¨æ¨é€ä¹Ÿæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="http-status-code"&gt;HTTP STATUS CODE
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä»£ç &lt;/th&gt;
&lt;th style="text-align: left"&gt;å£ä»¤&lt;/th&gt;
&lt;th style="text-align: left"&gt;å«ä¹‰ä¸åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;100 Continue&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œç»§ç»­çŒâ€&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®¢æˆ·ç«¯å¯å…ˆå‘é€è¯·æ±‚é¦–éƒ¨ï¼ˆå«Expect: 100-continueï¼‰ï¼Œæ”¶åˆ° 100 åå†å‘åŒ…ä½“ï¼ˆRFC 7231ï¼‰ï¼Œé€‚ç”¨äºå¤§æ–‡ä»¶åˆ†å—ä¸Šä¼ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;101 Switching Protocols&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ¢é¢‘é“â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;WebSocket å‡çº§ã€HTTP/1.1 â†’ HTTP/2 æ—¶å¸¸è§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä»£ç &lt;/th&gt;
&lt;th style="text-align: left"&gt;å£ä»¤&lt;/th&gt;
&lt;th style="text-align: left"&gt;å«ä¹‰ä¸å…¸å‹ç”¨æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;200 OK&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œä¸€åˆ‡å®‰å¥½â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€å¸¸è§ï¼›GET/POST éƒ½å¯èƒ½è¿”å›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;201 Created&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ–°å»ºå®Œæˆâ€&lt;/td&gt;
&lt;td style="text-align: left"&gt;POST /users åˆ›å»ºç”¨æˆ·ï¼›å“åº”ä¸­ä¸€èˆ¬ç»™ Location å¤´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;202 Accepted&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæˆ‘æ”¶ä¸‹å…ˆâ€&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¼‚æ­¥ä»»åŠ¡æ’é˜Ÿï¼Œå¦‚ä¸Šä¼ è½¬ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;204 No Content&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåŠå®Œäº†ï¼Œæ²¡æ–™â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ é™¤æˆåŠŸã€ä¸éœ€è¦è¿”å›ä½“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;206 Partial Content&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåˆ†æ®µå¯„â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ–­ç‚¹ç»­ä¼ ï¼ŒRange: bytes=&amp;hellip;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä»£ç &lt;/th&gt;
&lt;th style="text-align: left"&gt;å£ä»¤&lt;/th&gt;
&lt;th style="text-align: left"&gt;å«ä¹‰ä¸å·®å¼‚ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;301 Moved Permanently&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ¬å®¶æ°¸ä¹…â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æµè§ˆå™¨ä¼šç¼“å­˜ï¼›SEO å‹å¥½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;302 Found&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œä¸´æ—¶æ¬å®¶â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;è€ç‰ˆæµè§ˆå™¨ç…§æ ·æ”¹æˆ GETï¼›æ—©æœŸæœ€æ»¥ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;303 See Other&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ¢ GET æ‹¿â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;POST åé‡å®šå‘åˆ° GET èµ„æºï¼ˆæ”¯ä»˜å›è·³å¸¸è§ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;304 Not Modified&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œç¼“å­˜å‘½ä¸­â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;Ifâ€‘Noneâ€‘Match / Ifâ€‘Modifiedâ€‘Since åå•†ç¼“å­˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;307 Temporary Redirect&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œä¸´æ—¶æ¬å®¶ä½†ä¿æŒæ–¹æ³•â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¼ºåˆ¶å®¢æˆ·ç«¯ä½¿ç”¨åŸè¯·æ±‚æ–¹æ³•ï¼ˆå¦‚ POST ä»ä¸º POSTï¼‰ï¼Œä¸ 302 çš„å…¼å®¹æ€§å·®å¼‚éœ€æ³¨æ„æ—§ä»£ç†è¡Œä¸ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;308 Permanent Redirect&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ°¸ä¹…æ¬å®¶ä¸”ä¿æŒæ–¹æ³•â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;301 + ä¿ç•™æ–¹æ³•ï¼›HTTP/2 æ¨å¹¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä»£ç &lt;/th&gt;
&lt;th style="text-align: left"&gt;å£ä»¤&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…¸å‹åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;400 Bad Request&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæŠ¥æ–‡çƒ‚äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;JSON è¯­æ³•é”™ã€è¯·æ±‚å¤´è¿‡å¤§ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;401 Unauthorized&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œå…ˆç™»å½•â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç¼ºå¤±/å¤±æ•ˆ Tokenï¼›é…åˆ WWWâ€‘Authenticateã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;403 Forbidden&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæˆ‘è®¤å¾—ä½ ï¼Œä½†ä¸ç»™â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;é‰´æƒé€šè¿‡ä½†æ— æƒé™ï¼›IP é»‘åå•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;404 Not Found&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåœ°å€é”™äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç»å…¸â€œ404 é¡µé¢â€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;405 Method Not Allowed&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåŠ¨æ‰‹æ–¹å¼é”™â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;PUT åˆ°åªå…è®¸ GET çš„ URLã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;408 Request Timeout&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œä½ å¤ªæ…¢äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®¢æˆ·ç«¯æœªåœ¨æ—¶é™å†…å‘å®Œæ•´è¯·æ±‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;409 Conflict&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œç‰ˆæœ¬å†²çªâ€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç¼–è¾‘å†²çªã€èµ„æºé‡å¤åˆ›å»ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;410 Gone&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ°¸åˆ«äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;èµ„æºæ°¸ä¹…åˆ é™¤ï¼Œä¸ä¼šå†æœ‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;413 Payload Too Large&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåŒ…å¤ªå¤§â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸Šä¼ è¶…è¿‡é™åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;415 Unsupported Media Type&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œæ ¼å¼ä¸æ‡‚â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;Contentâ€‘Type ä¸è¢«æ¥å—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;429 Too Many Requests&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåˆ«åˆ·äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;é™æµ/é˜²åˆ·å¿…å¤‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ä»£ç &lt;/th&gt;
&lt;th style="text-align: left"&gt;å£ä»¤&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜ä¸æ’æŸ¥æ–¹å‘&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;500 Internal Server Error&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåå°ç‚¸äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ—¥å¿—ç¬¬ä¸€æ—¶é—´çœ‹ stack traceã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;501 Not Implemented&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œåŠŸèƒ½æœªä¸Šâ€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰æ–¹æ³•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;502 Bad Gateway&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œç½‘å…³ç‚¸äº†â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸Šæ¸¸æœåŠ¡æ— å“åº”ï¼ˆå¦‚è¶…æ—¶ã€åè®®é”™è¯¯ï¼‰æˆ–åå‘ä»£ç†é…ç½®é”™è¯¯ï¼ˆå¦‚ DNS è§£æå¤±è´¥ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;503 Service Unavailable&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œä¸´æ—¶åœä¸šâ€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼ˆå¦‚ç»´æŠ¤ã€é™æµï¼‰ï¼Œéœ€é€šè¿‡Retry-Afterå¤´å‘ŠçŸ¥å®¢æˆ·ç«¯é‡è¯•æ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;504 Gateway Timeout&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œä¸Šæ¸¸è¶…æ—¶â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;åå‘ä»£ç†ç­‰å¾…åç«¯ &amp;gt; timeoutã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;505 HTTP Version Not Supported&lt;/td&gt;
&lt;td style="text-align: left"&gt;â€œç‰ˆæœ¬å¤ªå¤â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚é‡Œçš„ HTTP ç‰ˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="http-header"&gt;HTTP HEADER
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;th style="text-align: left"&gt;é¢è¯•é«˜é¢‘è€ƒç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Host&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¯·æ±‚ä¸»æœºå + ç«¯å£&lt;/td&gt;
&lt;td style="text-align: left"&gt;è™šæ‹Ÿä¸»æœºå¿…éœ€ï¼›HTTP/1.1 å¼ºåˆ¶è¦æ±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Origin&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‘èµ·è·¨åŸŸè¯·æ±‚æ—¶çš„æº&lt;/td&gt;
&lt;td style="text-align: left"&gt;CORSã€CSRF é˜²å¾¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Refererï¼ˆæ ‡å‡†å­—æ®µåï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸Šä¸€ä¸ªé¡µé¢ URL&lt;/td&gt;
&lt;td style="text-align: left"&gt;SEOã€æµé‡ç»Ÿè®¡ã€å¯é€šè¿‡â€²same-originâ€²éšè—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;User-Agent&lt;/td&gt;
&lt;td style="text-align: left"&gt;æµè§ˆå™¨/å®¢æˆ·ç«¯æ ‡è¯†&lt;/td&gt;
&lt;td style="text-align: left"&gt;UA å—…æ¢ã€ç§»åŠ¨ç«¯è‡ªé€‚åº”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…¸å‹å€¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Type&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®ä½“ MIME&lt;/td&gt;
&lt;td style="text-align: left"&gt;text/html; charset=utf-8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Length&lt;/td&gt;
&lt;td style="text-align: left"&gt;å­—èŠ‚å¤§å°&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¿…é¡»æ˜¯åè¿›åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Encoding&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‹ç¼©ç®—æ³•&lt;/td&gt;
&lt;td style="text-align: left"&gt;gzip / br / deflate&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Language&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®ä½“è¯­è¨€&lt;/td&gt;
&lt;td style="text-align: left"&gt;zh-CN / en-US&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Disposition&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸‹è½½æ–‡ä»¶åï¼ˆinlineæ˜¾ç¤ºã€attachmentå¼ºåˆ¶ä¸‹è½½ï¼‰ã€é˜² MIME ç±»å‹å—…æ¢æ”»å‡»ï¼ˆéœ€é…åˆX-Content-Type-Options: nosniffï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;attachment; filename=&amp;ldquo;a.pdf&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Last-Modified&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€åä¿®æ”¹æ—¶é—´&lt;/td&gt;
&lt;td style="text-align: left"&gt;åå•†ç¼“å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ETag&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®ä½“æŒ‡çº¹&lt;/td&gt;
&lt;td style="text-align: left"&gt;&amp;ldquo;abc123&amp;rdquo;ï¼Œå¼º/å¼±æ ¡éªŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Range&lt;/td&gt;
&lt;td style="text-align: left"&gt;å“åº”åˆ†æ®µ&lt;/td&gt;
&lt;td style="text-align: left"&gt;bytes 0-99/300&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä½œç”¨&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…³é”®è¯­æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Cache-Control&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€æ ¸å¿ƒç¼“å­˜ç­–ç•¥&lt;/td&gt;
&lt;td style="text-align: left"&gt;max-age, no-cache, must-revalidate&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Expires&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç»å¯¹è¿‡æœŸæ—¶é—´&lt;/td&gt;
&lt;td style="text-align: left"&gt;HTTP/1.0 é—äº§ï¼Œå— Cache-Control è¦†ç›–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Pragma&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ—§ç‰ˆ no-cache&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸»è¦å…¼å®¹ HTTP/1.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;If-None-Match&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¡ä»¶è¯·æ±‚ï¼ˆETagï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡ç«¯ 200/304&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;If-Modified-Since&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¡ä»¶è¯·æ±‚ï¼ˆæ—¶é—´ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é…åˆ Last-Modified&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Vary&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç¼“å­˜ç»´åº¦&lt;/td&gt;
&lt;td style="text-align: left"&gt;Vary: Accept-Encoding&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;th style="text-align: left"&gt;é¢è¯•åˆ‡å…¥ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Connection&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿æ¥é€‰é¡¹ / Keep-Alive&lt;/td&gt;
&lt;td style="text-align: left"&gt;HTTP/1.x ä¸­å¸¸è®¾keep-alive&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Upgrade&lt;/td&gt;
&lt;td style="text-align: left"&gt;åè®®å‡çº§&lt;/td&gt;
&lt;td style="text-align: left"&gt;WebSocketï¼šUpgrade: websocket&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Transfer-Encoding&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ†å—ç¼–ç &lt;/td&gt;
&lt;td style="text-align: left"&gt;chunkedæ—¶å¯çœ Content-Length&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;TE&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŒ‡æ˜æ¥å—çš„ä¼ è¾“ç¼–ç &lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸ Transfer-Encoding åŒºåˆ†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Range / Accept-Ranges&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ–­ç‚¹ç»­ä¼ &lt;/td&gt;
&lt;td style="text-align: left"&gt;å®¢æˆ·ç«¯ / æœåŠ¡å™¨å„è‡ªä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Location&lt;/td&gt;
&lt;td style="text-align: left"&gt;3xx å“åº”æ–°åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Location&lt;/td&gt;
&lt;td style="text-align: left"&gt;èµ„æºå®é™…åœ°å€ï¼ˆå¼±åŒ–ç‰ˆ Locationï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Allow&lt;/td&gt;
&lt;td style="text-align: left"&gt;405 æ—¶åˆ—å‡ºåˆæ³•æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Link&lt;/td&gt;
&lt;td style="text-align: left"&gt;é¢„åŠ è½½ / èµ„æºæç¤º (HTTP/2 Push)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä½œç”¨&lt;/th&gt;
&lt;th style="text-align: left"&gt;å°è´´å£«&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Authorization&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®¢æˆ·ç«¯å‡­æ®&lt;/td&gt;
&lt;td style="text-align: left"&gt;Basic / Bearer / Digest&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;WWW-Authenticate&lt;/td&gt;
&lt;td style="text-align: left"&gt;401 è¿”å›çš„æŒ‘æˆ˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;Basic realm=&amp;ldquo;xxx&amp;rdquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Cookie&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¼šè¯å‡­è¯&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‘è‡ªå®¢æˆ·ç«¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Set-Cookie&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡ç«¯å†™ Cookie&lt;/td&gt;
&lt;td style="text-align: left"&gt;HttpOnly / Secure / SameSite&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Strict-Transport-Security&lt;/td&gt;
&lt;td style="text-align: left"&gt;HSTS&lt;/td&gt;
&lt;td style="text-align: left"&gt;max-age=&amp;hellip;; includeSubDomains&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Content-Security-Policy&lt;/td&gt;
&lt;td style="text-align: left"&gt;XSS é˜²æŠ¤å¤§æ€å™¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;default-src &amp;lsquo;self&amp;rsquo;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;X-Frame-Options&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç‚¹å‡»åŠ«æŒé˜²æŠ¤&lt;/td&gt;
&lt;td style="text-align: left"&gt;DENY / SAMEORIGIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;X-XSS-Protection&lt;/td&gt;
&lt;td style="text-align: left"&gt;è€ç‰ˆæµè§ˆå™¨ XSS è¿‡æ»¤å™¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;0/1; mode=block&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µï¼ˆå“åº”ç«¯å±…å¤šï¼‰&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Access-Control-Allow-Origin&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…è®¸çš„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Access-Control-Allow-Methods&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…è®¸çš„æ–¹æ³•åˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Access-Control-Allow-Headers&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…è®¸çš„è‡ªå®šä¹‰è¯·æ±‚å¤´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Access-Control-Allow-Credentials&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ˜¯å¦å…è®¸æºå¸¦ Cookie&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Access-Control-Max-Age&lt;/td&gt;
&lt;td style="text-align: left"&gt;é¢„æ£€ç¼“å­˜æ—¶é•¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Access-Control-Expose-Headers&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®¢æˆ·ç«¯å¯è¯»å–çš„é¢å¤–å“åº”å¤´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Server&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡ç«¯è½¯ç¡¬ä»¶æ ‡è¯†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Date&lt;/td&gt;
&lt;td style="text-align: left"&gt;å“åº”ç”Ÿæˆæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Retry-After&lt;/td&gt;
&lt;td style="text-align: left"&gt;503/429 å‘ŠçŸ¥å¤šä¹…åå†è¯•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Via&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¤šå±‚ä»£ç†é“¾è·¯è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="vary"&gt;VARY
&lt;/h2&gt;&lt;p&gt;Vary HTTP å“åº”å¤´åœ¨ Web ç¼“å­˜æœºåˆ¶å’Œå†…å®¹åå•†ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œå®ƒé€šè¿‡æŒ‡ç¤ºç¼“å­˜ä»£ç†åº”å¦‚ä½•åŒ¹é…è¯·æ±‚å¤´ï¼Œæ¥å†³å®šæ˜¯å¦å¯ä½¿ç”¨å·²ç¼“å­˜çš„å“åº”ï¼Œä»è€Œä¼˜åŒ–æ€§èƒ½å¹¶ç¡®ä¿å†…å®¹æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸å·¥ä½œæœºåˆ¶"&gt;ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µä¸å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;Vary å¤´çš„æ ¸å¿ƒä½œç”¨æ˜¯&lt;strong&gt;æ‰©å±•ç¼“å­˜é”®ï¼ˆCache Keyï¼‰&lt;/strong&gt;ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å­˜ç³»ç»Ÿï¼ˆå¦‚æµè§ˆå™¨ã€CDNï¼‰é€šå¸¸ä»…å°†è¯·æ±‚çš„ URL ä½œä¸ºç¼“å­˜é”®ã€‚Vary å¤´å‘ŠçŸ¥ç¼“å­˜ç³»ç»Ÿï¼Œé™¤äº† URL ä¹‹å¤–ï¼Œè¿˜éœ€è¦å°†æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªè¯·æ±‚å¤´å­—æ®µçš„å€¼ä¹Ÿä½œä¸ºç¼“å­˜é”®çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¦–æ¬¡è¯·æ±‚ä¸ç¼“å­˜&lt;/strong&gt;ï¼šå½“ç¼“å­˜æœåŠ¡å™¨ï¼ˆå¦‚CDNï¼‰é¦–æ¬¡æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå®ƒä¼šå°†è¯·æ±‚è½¬å‘ç»™æºæœåŠ¡å™¨ã€‚æºæœåŠ¡å™¨è¿”å›å“åº”ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­åŒ…å« &lt;code&gt;Vary: Header-Name&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºç¼“å­˜é”®&lt;/strong&gt;ï¼šç¼“å­˜æœåŠ¡å™¨åœ¨å­˜å‚¨è¯¥å“åº”æ—¶ï¼Œä¸ä»…ä¼šè®°å½•å…¶URLï¼Œè¿˜ä¼šå°† &lt;code&gt;Vary&lt;/code&gt;å¤´æŒ‡å®šçš„è¯·æ±‚å¤´å­—æ®µå€¼ï¼ˆå¦‚ &lt;code&gt;Accept-Encoding: gzip&lt;/code&gt;ï¼‰å…±åŒä½œä¸ºè¯¥ç¼“å­˜æ¡ç›®çš„å”¯ä¸€æ ‡è¯†ï¼ˆå³ç¼“å­˜é”®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç»­è¯·æ±‚ä¸åŒ¹é…&lt;/strong&gt;ï¼šå½“æœ‰æ–°çš„è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œç¼“å­˜æœåŠ¡å™¨ä¼šæ£€æŸ¥æ–°è¯·æ±‚çš„ URL å’Œ &lt;code&gt;Vary&lt;/code&gt;æŒ‡å®šçš„å¤´å­—æ®µå€¼æ˜¯å¦ä¸æŸä¸ªå·²å­˜å‚¨çš„ç¼“å­˜é”®å®Œå…¨åŒ¹é…ã€‚åªæœ‰å®Œå…¨åŒ¹é…ï¼Œæ‰ä¼šè¿”å›ç¼“å­˜çš„å“åº”ã€‚å¦åˆ™ï¼Œå®ƒå°†å‘æºæœåŠ¡å™¨è¯·æ±‚æ–°èµ„æºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œè®¾ç½® &lt;code&gt;Vary: Accept-Encoding&lt;/code&gt;åï¼Œæ”¯æŒ &lt;code&gt;gzip&lt;/code&gt;å‹ç¼©çš„å®¢æˆ·ç«¯å’Œä¸æ”¯æŒå‹ç¼©çš„å®¢æˆ·ç«¯å¯¹åŒä¸€URLçš„è¯·æ±‚ï¼Œä¼šè¢«ç¼“å­˜ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„èµ„æºï¼Œç¡®ä¿å®¢æˆ·ç«¯æ”¶åˆ°æ­£ç¡®æ ¼å¼çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•ä¸å¸¸è§ç”¨æ³•"&gt;ğŸ“ è¯­æ³•ä¸å¸¸è§ç”¨æ³•
&lt;/h3&gt;&lt;p&gt;Vary å¤´çš„è¯­æ³•å¾ˆç®€å•ï¼Œå…¶å€¼æ˜¯ç”±é€—å·åˆ†éš”çš„è¯·æ±‚å¤´å­—æ®µåç§°åˆ—è¡¨ï¼Œæˆ–æ˜¯ä¸€ä¸ªæ˜Ÿå·ï¼ˆ&lt;code&gt;*&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡ä»¤&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;header-name&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªæˆ–å¤šä¸ªç”¨ä½œç¼“å­˜å†³ç­–ä¾æ®çš„è¯·æ±‚å¤´å­—æ®µåã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Vary: User-Agent&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;*&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªè¯·æ±‚éƒ½è¢«è§†ä¸ºå”¯ä¸€ä¸”å…¨æ–°çš„ï¼Œåº”ç›´æ¥ä»æºæœåŠ¡å™¨è·å–å“åº”ã€‚è¿™å®é™…ä¸Šä¼šç¦ç”¨ç¼“å­˜ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Vary: *&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹è¡¨åˆ—å‡ºäº†å‡ ç§æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨ Vary å€¼&lt;/th&gt;
&lt;th&gt;ä½œç”¨è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å®¹å‹ç¼©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Accept-Encoding&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒºåˆ†å‹ç¼©ï¼ˆå¦‚gzipï¼‰ä¸æœªå‹ç¼©ç‰ˆæœ¬ï¼Œé˜²æ­¢å®¢æˆ·ç«¯æ”¶åˆ°ä¸æ”¯æŒçš„ç¼–ç æ ¼å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šè¯­è¨€ç½‘ç«™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Accept-Language&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®ç”¨æˆ·æµè§ˆå™¨åå¥½è¯­è¨€è¿”å›ä¸åŒç‰ˆæœ¬ï¼Œç¡®ä¿è¯­è¨€å†…å®¹æ­£ç¡®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾å¤‡é€‚é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;User-Agent&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ¡Œé¢ç«¯ã€ç§»åŠ¨ç«¯ç­‰ä¸åŒè®¾å¤‡è¿”å›å®šåˆ¶åŒ–çš„HTMLæˆ–èµ„æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸ªæ€§åŒ–å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Cookie&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯¹äºæ ¹æ®ç”¨æˆ·ç™»å½•çŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹çš„é¡µé¢ï¼Œå¯ç¡®ä¿æœªç™»å½•ç”¨æˆ·ä¸ä¼šçœ‹åˆ°å·²ç™»å½•ç”¨æˆ·çš„ç¼“å­˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é…ç½®æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ é…ç½®æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;æ­£ç¡®é…ç½® Vary å¤´èƒ½æ˜¾è‘—æå‡æ€§èƒ½ï¼Œä½†è‹¥ä½¿ç”¨ä¸å½“ä¹Ÿå¯èƒ½å¸¦æ¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;Vary: User-Agent&lt;/code&gt;&lt;/strong&gt;ï¼šç”±äº &lt;code&gt;User-Agent&lt;/code&gt;å­—ç¬¦ä¸²æå…¶å¤šæ ·ï¼ˆä¸åŒæµè§ˆå™¨ã€ç‰ˆæœ¬ã€è®¾å¤‡å‹å·å‡æœ‰ç»†å¾®å·®åˆ«ï¼‰ï¼Œè¿‡åº¦ä½¿ç”¨ä¼šå¯¼è‡´ç¼“å­˜ç¢ç‰‡åŒ–ï¼Œå³äº§ç”Ÿå¤§é‡ä»…å› UAä¸åŒè€Œé‡å¤çš„ç¼“å­˜å‰¯æœ¬ï¼Œä¸¥é‡é™ä½ç¼“å­˜å‘½ä¸­ç‡ã€‚åº”ä¼˜å…ˆè€ƒè™‘å“åº”å¼è®¾è®¡ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å… &lt;code&gt;Vary: \*&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¼šä½¿æ¯ä¸ªè¯·æ±‚éƒ½è¢«è§†ä¸ºå”¯ä¸€ï¼Œå¯¼è‡´ç¼“å­˜å‡ ä¹å®Œå…¨å¤±æ•ˆï¼Œé€šå¸¸ä¸æ˜¯ç†æƒ³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿ç¼“å­˜ä»£ç†æ”¯æŒ&lt;/strong&gt;ï¼šå¹¶éæ‰€æœ‰ä¸­é—´ç¼“å­˜ï¼ˆå¦‚æŸäº›æ—§å¼ä»£ç†ï¼‰éƒ½èƒ½å®Œå…¨æ­£ç¡®å¤„ç†å¤æ‚çš„ Vary å¤´ã€‚éœ€è¦ç¡®ä¿ä½ çš„CDNæˆ–ç¼“å­˜æœåŠ¡å™¨æ”¯æŒæ‰€éœ€çš„Varyç­–ç•¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨Nginxä¸­é…ç½®&lt;/strong&gt;ï¼šå¯ä»¥é€šè¿‡ &lt;code&gt;add_header&lt;/code&gt;æŒ‡ä»¤è½»æ¾æ·»åŠ Varyå¤´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ä¸ºå‹ç¼©å†…å®¹æ·»åŠ  Vary å¤´
location / {
gzip on;
add_header Vary Accept-Encoding;
}
# æ ¹æ®ä¸åŒæ¡ä»¶è®¾ç½® Vary
location /api/ {
# ä¾‹å¦‚ï¼Œæ ¹æ®Acceptå¤´è¿”å›ä¸åŒæ ¼å¼ï¼ˆJSON/XMLï¼‰
add_header Vary Accept;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Vary HTTP å¤´æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå®ƒé€šè¿‡ä½¿ç¼“å­˜æœºåˆ¶æ„ŸçŸ¥å†…å®¹åå•†ï¼Œç¡®ä¿äº†å¤šç‰ˆæœ¬èµ„æºèƒ½å¤Ÿè¢«æ­£ç¡®ä¸”é«˜æ•ˆåœ°ç¼“å­˜å’Œåˆ†å‘ã€‚ç†è§£å¹¶åˆç†åº”ç”¨ Vary å¤´ï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„ç°ä»£ Web åº”ç”¨çš„å…³é”®ä¸€ç¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ Vary HTTP å¤´ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é…ç½®æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="xss"&gt;XSS
&lt;/h2&gt;&lt;p&gt;XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰æ˜¯Webå®‰å…¨é¢†åŸŸæœ€å¸¸è§ä¸”å±å®³å·¨å¤§çš„æ¼æ´ä¹‹ä¸€ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œï¼Œç‰¹åˆ«æ˜¯ä¸‰ç§æ ¸å¿ƒç±»å‹çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹å¾å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åå°„å‹XSS&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å­˜å‚¨å‹XSS&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;DOMå‹XSS&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å­˜å‚¨äºæœåŠ¡å™¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨æ•°æ®åº“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å­˜å‚¨äºæœåŠ¡å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ç‚¹å‡»&lt;strong&gt;ç²¾å¿ƒæ„é€ çš„æ¶æ„é“¾æ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·è®¿é—®&lt;strong&gt;è¢«æ¤å…¥æ¶æ„ä»£ç çš„æ­£å¸¸é¡µé¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥åï¼Œ&lt;strong&gt;å‰ç«¯JSå¤„ç†URLå‚æ•°ä¸å½“&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹…æ€§ä¸å±å®³èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éæŒä¹…ï¼Œé’ˆå¯¹ç‚¹å‡»é“¾æ¥çš„ä¸ªä½“ç”¨æˆ·&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹…&lt;/strong&gt;ï¼Œå¨èƒæ‰€æœ‰è®¿é—®è¯¥é¡µé¢çš„ç”¨æˆ·&lt;/td&gt;
&lt;td&gt;éæŒä¹…ï¼Œé’ˆå¯¹ç‚¹å‡»é“¾æ¥çš„ä¸ªä½“ç”¨æˆ·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒè´£ä»»æ–¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç«¯æœªå¯¹è¾“å‡ºæ•°æ®è¿‡æ»¤&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç«¯æœªå¯¹&lt;strong&gt;å­˜å‚¨&lt;/strong&gt;å’Œ&lt;strong&gt;è¾“å‡º&lt;/strong&gt;æ•°æ®è¿‡æ»¤&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‰ç«¯JavaScript&lt;/strong&gt; ä¸å®‰å…¨åœ°æ“ä½œDOM&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ”»å‡»åŸç†ä¸æµç¨‹"&gt;ğŸ” æ”»å‡»åŸç†ä¸æµç¨‹
&lt;/h3&gt;&lt;p&gt;XSSçš„æœ¬è´¨æ˜¯æ”»å‡»è€…é€šè¿‡ç½‘ç«™æ¼æ´ï¼Œå°†æ¶æ„è„šæœ¬æ³¨å…¥ç½‘é¡µï¼Œåœ¨ç”¨æˆ·æµè§ˆå™¨æ‰§è¡Œã€‚å…¶æ”»å‡»æµç¨‹å¯æ¦‚æ‹¬ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ‰¾æ³¨å…¥ç‚¹&lt;/strong&gt;ï¼šæ”»å‡»è€…ä¼šå¯»æ‰¾ç½‘ç«™ä¸­æ‰€æœ‰æ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶å°†å…¶è¾“å‡ºåˆ°é¡µé¢çš„åœ°æ–¹ï¼Œå¦‚æœç´¢æ¡†ã€ç•™è¨€æ¿ã€ä¸ªäººä¿¡æ¯å¡«å†™æ ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ å¹¶æäº¤æ¶æ„è½½è·ï¼ˆPayloadï¼‰&lt;/strong&gt;ï¼šæ”»å‡»è€…æ ¹æ®ç½‘ç«™å¯èƒ½å­˜åœ¨çš„è¿‡æ»¤è§„åˆ™ï¼Œç²¾å¿ƒæ„é€ ç»•è¿‡æ£€æµ‹çš„æ¶æ„ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶æ„è„šæœ¬æ‰§è¡Œ&lt;/strong&gt;ï¼šå½“å—å®³è€…è®¿é—®åŒ…å«æ¶æ„ä»£ç çš„é¡µé¢æ—¶ï¼Œè„šæœ¬åœ¨å…¶æµè§ˆå™¨ä¸­æ‰§è¡Œï¼Œè¾¾æˆæ”»å‡»ç›®çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢çš„æµç¨‹å›¾å…·ä½“å±•ç¤ºäº†ä¸‰ç§ä¸»è¦XSSæ”»å‡»ç±»å‹çš„è·¯å¾„å·®å¼‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ”»å‡»è€…æ„é€ æ¶æ„è„šæœ¬] --&amp;gt; B{æ”»å‡»ç±»å‹}
B --&amp;gt; C[åå°„å‹XSS]
C --&amp;gt; D[é€šè¿‡é‚®ä»¶/çŸ­ä¿¡ç­‰&amp;lt;br&amp;gt;è¯±ä½¿ç”¨æˆ·ç‚¹å‡»æ¶æ„é“¾æ¥]
D --&amp;gt; E[æœåŠ¡å™¨ç›´æ¥è¿”å›&amp;lt;br&amp;gt;å«æ¶æ„è„šæœ¬çš„å“åº”]
E --&amp;gt; F[ç”¨æˆ·æµè§ˆå™¨æ‰§è¡Œæ¶æ„è„šæœ¬]
B --&amp;gt; G[å­˜å‚¨å‹XSS]
G --&amp;gt; H[å°†æ¶æ„è„šæœ¬æäº¤åˆ°&amp;lt;br&amp;gt;ç½‘ç«™æ•°æ®åº“ä¿å­˜]
H --&amp;gt; I[ç”¨æˆ·è®¿é—®æ­£å¸¸é¡µé¢]
I --&amp;gt; J[æœåŠ¡å™¨ä»æ•°æ®åº“è¯»å–&amp;lt;br&amp;gt;æ¶æ„è„šæœ¬å¹¶è¿”å›]
J --&amp;gt; F
B --&amp;gt; K[DOMå‹XSS]
K --&amp;gt; L[è¯±ä½¿ç”¨æˆ·è®¿é—®&amp;lt;br&amp;gt;åŒ…å«æ¶æ„å‚æ•°çš„URL]
L --&amp;gt; M[æµè§ˆå™¨JSå¤„ç†URLå‚æ•°&amp;lt;br&amp;gt;å¹¶ç›´æ¥å†™å…¥DOM]
M --&amp;gt; F
F --&amp;gt; N[æ”»å‡»è¾¾æˆ&amp;lt;br&amp;gt;ç›—å–ä¿¡æ¯/ä¼šè¯åŠ«æŒç­‰]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ”»å‡»è½½è·ä¸ç»•è¿‡æŠ€å·§"&gt;âš”ï¸ æ”»å‡»è½½è·ä¸ç»•è¿‡æŠ€å·§
&lt;/h3&gt;&lt;p&gt;æ”»å‡»è€…ä¼šä½¿ç”¨å¤šç§æ‰‹æ®µæ¤å…¥å¹¶æ‰§è¡Œæ¶æ„è„šæœ¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ©ç”¨HTMLæ ‡ç­¾&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;æ ‡ç­¾ç›´æ¥åµŒå…¥è„šæœ¬ï¼Œæˆ–åˆ©ç”¨ &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;ç­‰æ ‡ç­¾çš„ &lt;code&gt;src&lt;/code&gt;å±æ€§æˆ–äº‹ä»¶ï¼ˆå¦‚ &lt;code&gt;onerror&lt;/code&gt;, &lt;code&gt;onload&lt;/code&gt;ï¼‰è§¦å‘æ¶æ„ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ©ç”¨HTMLå±æ€§&lt;/strong&gt;ï¼šåœ¨å…è®¸çš„URLå±æ€§ä¸­ä½¿ç”¨ &lt;code&gt;javascript:&lt;/code&gt;ä¼ªåè®®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç ä¸æ··æ·†&lt;/strong&gt;ï¼šå½“è¾“å…¥è¢«è¿‡æ»¤æ—¶ï¼Œé‡‡ç”¨&lt;strong&gt;å¤§å°å†™å˜æ¢&lt;/strong&gt;ã€&lt;strong&gt;å…³é”®å­—åŒå†™&lt;/strong&gt;ã€&lt;strong&gt;åå…­è¿›åˆ¶/Unicodeç¼–ç &lt;/strong&gt;ç­‰æ–¹å¼ç»•è¿‡æ£€æµ‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¨é¢é˜²å¾¡ç­–ç•¥"&gt;ğŸ›¡ï¸ å…¨é¢é˜²å¾¡ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;é˜²å¾¡XSSéœ€è¦ä»å‰åˆ°åã€å¤šå±‚é¢æ„å»ºçºµæ·±é˜²å¾¡ä½“ç³»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥éªŒè¯ä¸è¿‡æ»¤&lt;/strong&gt;ï¼šå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œ&lt;strong&gt;ç™½åå•&lt;/strong&gt;éªŒè¯ï¼Œåªå…è®¸å®‰å…¨çš„å­—ç¬¦æˆ–æ ¼å¼ã€‚å¯¹å¯ç–‘å†…å®¹è¿›è¡Œä¸¥æ ¼è¿‡æ»¤æˆ–è½¬ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å‡ºç¼–ç &lt;/strong&gt;ï¼šæ ¹æ®æ•°æ®è¾“å‡ºçš„ä¸åŒä½ç½®ï¼ˆHTMLå†…å®¹ã€å±æ€§ã€JavaScriptä»£ç ã€URLï¼‰ï¼Œé‡‡ç”¨ç›¸åº”çš„ç¼–ç æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰&lt;/strong&gt;ï¼šé€šè¿‡è®¾ç½®HTTPå“åº”å¤´ &lt;code&gt;Content-Security-Policy&lt;/code&gt;ï¼Œæ˜ç¡®å‘Šè¯‰æµè§ˆå™¨å…è®¸åŠ è½½å’Œæ‰§è¡Œå“ªäº›æ¥æºçš„èµ„æºï¼Œä»æ ¹æœ¬ä¸Šå‡å°‘XSSé£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨å¼€å‘å®è·µ&lt;/strong&gt;ï¼šé¿å…ä½¿ç”¨ &lt;code&gt;innerHTML&lt;/code&gt;ã€&lt;code&gt;document.write()&lt;/code&gt;ç­‰ä¸å®‰å…¨çš„APIï¼Œè½¬è€Œä½¿ç”¨ &lt;code&gt;textContent&lt;/code&gt;ç­‰å®‰å…¨æ–¹æ³•ã€‚å¯¹Cookieè®¾ç½® &lt;code&gt;HttpOnly&lt;/code&gt;å’Œ &lt;code&gt;Secure&lt;/code&gt;å±æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç†è§£XSSçš„æ”»å‡»åŸç†å’Œé˜²å¾¡æ–¹æ³•ï¼Œå¯¹äºå¼€å‘å®‰å…¨çš„Webåº”ç”¨è‡³å…³é‡è¦ã€‚æ ¸å¿ƒåœ¨äºå§‹ç»ˆå¯¹ç”¨æˆ·è¾“å…¥ä¿æŒ&lt;strong&gt;ä¸ä¿¡ä»»&lt;/strong&gt;åŸåˆ™ï¼Œå¹¶è¿›è¡Œä¸¥æ ¼çš„éªŒè¯ã€è¿‡æ»¤å’Œæ°å½“çš„ç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£æèƒ½å¸®åŠ©ä½ ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„æ”»å‡»åœºæ™¯æˆ–é˜²å¾¡æŠ€æœ¯æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="csp"&gt;CSP
&lt;/h2&gt;&lt;p&gt;Content-Security-Policyï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼Œç®€ç§° CSPï¼‰æ˜¯ä¸€é¡¹æ ¸å¿ƒçš„ Web å®‰å…¨æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å»ºç«‹ä¸€ä¸ªâ€œèµ„æºç™½åå•â€æœºåˆ¶ï¼Œæ¥æœ‰æ•ˆæ£€æµ‹å’Œå‰Šå¼±è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰ç­‰ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼Œä¸ºä½ çš„ç½‘ç«™æä¾›ä¸€ä¸ªå¼ºå¤§çš„é¢å¤–å®‰å…¨å±‚ã€‚&lt;/p&gt;
&lt;h3 id="-csp-å¦‚ä½•ä¿æŠ¤ä½ çš„ç½‘ç«™"&gt;ğŸ” CSP å¦‚ä½•ä¿æŠ¤ä½ çš„ç½‘ç«™
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥å°† CSP ç†è§£ä¸ºä¸€ä½å¿ äºèŒå®ˆçš„ç½‘ç«™â€œå®‰ä¿ä¸»ä»»â€ã€‚å®ƒçš„æ ¸å¿ƒå·¥ä½œæ˜¯ï¼š&lt;strong&gt;åªå…è®¸æ‰§è¡Œæˆ–åŠ è½½æ¥è‡ªä½ æ˜ç¡®è®¤å¯çš„â€œç™½åå•â€ä¸Šçš„èµ„æº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜²å¾¡ XSS æ”»å‡»&lt;/strong&gt;ï¼šè¿™æ˜¯ CSP æœ€ä¸»è¦çš„ç›®æ ‡ã€‚å³ä½¿æ”»å‡»è€…æˆåŠŸå‘ä½ çš„ç½‘é¡µä¸­æ³¨å…¥äº†æ¶æ„è„šæœ¬ï¼Œåªè¦è¯¥è„šæœ¬çš„æ¥æºä¸åœ¨ç™½åå•å†…ï¼ŒCSP å°±ä¼šæŒ‡ä»¤æµè§ˆå™¨&lt;strong&gt;é˜»æ­¢å…¶åŠ è½½å’Œæ‰§è¡Œ&lt;/strong&gt;ï¼Œä»è€Œä»æ ¹æœ¬ä¸ŠåŒ–è§£äº† XSS å¨èƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶èµ„æºåŠ è½½&lt;/strong&gt;ï¼šCSP å¯ä»¥ç²¾ç»†åœ°æ§åˆ¶å„ç§èµ„æºçš„æ¥æºï¼Œä¾‹å¦‚å›¾ç‰‡åªèƒ½ä»æŒ‡å®šçš„å›¾ç‰‡æœåŠ¡å™¨åŠ è½½ï¼Œè„šæœ¬åªèƒ½æ¥è‡ªä½ ä¿¡ä»»çš„ CDN ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ¥å‘Šè¿è§„è¡Œä¸º&lt;/strong&gt;ï¼šCSP å¯ä»¥é…ç½®ä¸ºå°†ä»»ä½•è¯•å›¾è¿åç­–ç•¥çš„è¡Œä¸ºï¼ˆä¾‹å¦‚ï¼Œå°è¯•åŠ è½½è¢«ç¦æ­¢çš„èµ„æºï¼‰è¯¦ç»†æŠ¥å‘Šç»™ä½ æŒ‡å®šçš„æœåŠ¡å™¨ï¼Œå¸®åŠ©ä½ å‘ç°æ½œåœ¨çš„å®‰å…¨æ¼æ´æˆ–é…ç½®é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ CSP çš„è§„åˆ™ä½“ç³»ï¼Œä¸‹è¡¨åˆ—å‡ºäº†å…¶æœ€æ ¸å¿ƒçš„ä¸€äº›æŒ‡ä»¤åŠå…¶ç”¨é€”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡ä»¤&lt;/th&gt;
&lt;th&gt;ä¸»è¦æ§åˆ¶å†…å®¹&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨ç¤ºä¾‹å€¼è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;default-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰æœªå•ç‹¬æŒ‡å®šæŒ‡ä»¤çš„èµ„æºçš„é»˜è®¤åŠ è½½ç­–ç•¥ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'self'&lt;/code&gt;ï¼ˆåªå…è®¸åŒæºèµ„æºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;script-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;JavaScript è„šæœ¬&lt;/strong&gt;çš„æ¥æºï¼Œæ˜¯é˜²å¾¡ XSS çš„&lt;strong&gt;å…³é”®æŒ‡ä»¤&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'self' https://trusted.cdn.com&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;style-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ·å¼è¡¨ï¼ˆCSSï¼‰&lt;/strong&gt; çš„æ¥æºã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'self' 'unsafe-inline'&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;img-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›¾ç‰‡&lt;/strong&gt;çš„æ¥æºã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'self' data: https:&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;connect-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™åˆ¶é€šè¿‡è„šæœ¬å‘èµ·çš„ç½‘ç»œè¯·æ±‚çš„æ¥æºï¼Œå¦‚ AJAXï¼ˆXHRï¼‰ã€WebSocket ç­‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'self' https://api.example.com&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;font-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘é¡µå­—ä½“&lt;/strong&gt;çš„æ¥æºã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'self' https://fonts.gstatic.com&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;frame-src&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;&lt;/strong&gt; ç­‰åµŒå…¥å¼æ¡†æ¶çš„æ¥æºã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'none'&lt;/code&gt;ï¼ˆç¦æ­¢åµŒå…¥ï¼‰æˆ– &lt;code&gt;'self'&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;report-uri&lt;/code&gt;&lt;/strong&gt; (&lt;strong&gt;&lt;code&gt;report-to&lt;/code&gt;&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;æŒ‡å®šä¸€ä¸ª URIï¼Œæµè§ˆå™¨ä¼šå‘æ­¤åœ°å€&lt;strong&gt;å‘é€è¿è§„æŠ¥å‘Š&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;/csp-report-endpoint&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é…ç½®ä¸éƒ¨ç½²-csp"&gt;âš™ï¸ é…ç½®ä¸éƒ¨ç½² CSP
&lt;/h3&gt;&lt;p&gt;é…ç½® CSP ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œé€šå¸¸æ¨èä½¿ç”¨ HTTP å“åº”å¤´ï¼Œå› ä¸ºå®ƒèƒ½ä¿æŠ¤æ‰€æœ‰èµ„æºï¼Œè€Œä¸ä»…é™äº HTML æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. é€šè¿‡ HTTP å“åº”å¤´é…ç½®ï¼ˆæ¨èï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æœåŠ¡å™¨çš„ HTTP å“åº”å¤´ä¸­æ·»åŠ  &lt;code&gt;Content-Security-Policy&lt;/code&gt;å­—æ®µã€‚ä¾‹å¦‚ï¼Œåœ¨ Nginx é…ç½®ä¸­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;add_header Content-Security-Policy &amp;#34;default-src &amp;#39;self&amp;#39;; script-src &amp;#39;self&amp;#39; https://cdn.jsdelivr.net; img-src &amp;#39;self&amp;#39; data:; style-src &amp;#39;self&amp;#39; &amp;#39;unsafe-inline&amp;#39;;&amp;#34;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. é€šè¿‡ HTML &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt;æ ‡ç­¾é…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ— æ³•é…ç½®æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ HTML é¡µé¢çš„ &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt;éƒ¨åˆ†ä½¿ç”¨ &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt;æ ‡ç­¾è®¾ç½®ã€‚ä½†è¯·æ³¨æ„ï¼ŒæŸäº›æŒ‡ä»¤ï¼ˆå¦‚ &lt;code&gt;report-uri&lt;/code&gt;ï¼‰å¯èƒ½æ— æ³•é€šè¿‡æ­¤æ–¹å¼ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;meta http-equiv=&amp;#34;Content-Security-Policy&amp;#34; content=&amp;#34;default-src &amp;#39;self&amp;#39;;&amp;#34;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;éƒ¨ç½²ç­–ç•¥ï¼šå¾ªåºæ¸è¿›&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç›´æ¥éƒ¨ç½²ä¸€ä¸ªä¸¥æ ¼çš„ CSP ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´ç½‘ç«™åŠŸèƒ½æŸåã€‚å®‰å…¨çš„åšæ³•æ˜¯é‡‡ç”¨æ¸è¿›å¼éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æŠ¥å‘Šæ¨¡å¼ï¼ˆReport-Onlyï¼‰&lt;/strong&gt;ï¼šé¦–å…ˆä½¿ç”¨ &lt;code&gt;Content-Security-Policy-Report-Only&lt;/code&gt;å¤´ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œæµè§ˆå™¨åªä¼š&lt;strong&gt;æŠ¥å‘Šè¿è§„è¡Œä¸ºè€Œä¸ä¼šé˜»æ­¢èµ„æºåŠ è½½&lt;/strong&gt;ã€‚è¿™ä¸ºä½ æä¾›äº†ä¸€ä¸ªå®‰å…¨çš„æµ‹è¯•æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ææŠ¥å‘Šå¹¶è°ƒæ•´ç­–ç•¥&lt;/strong&gt;ï¼šæ ¹æ®æŠ¥å‘Šæ¨¡å¼æ”¶é›†åˆ°çš„æ•°æ®ï¼Œåˆ†æå“ªäº›åˆæ³•èµ„æºè¢«é˜»æ­¢ï¼Œå¹¶ç›¸åº”è°ƒæ•´ä½ çš„ç™½åå•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ‡æ¢åˆ°å¼ºåˆ¶æ‰§è¡Œæ¨¡å¼&lt;/strong&gt;ï¼šå½“ç¡®è®¤ç»å¤§å¤šæ•°è¿è§„éƒ½æ˜¯è¯¯æŠ¥ä¸”å·²å¦¥å–„å¤„ç†åï¼Œå°†å“åº”å¤´æ”¹ä¸º &lt;code&gt;Content-Security-Policy&lt;/code&gt;ï¼Œæ­£å¼å¯ç”¨ CSP çš„ä¿æŠ¤åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¤„ç†å†…è”è„šæœ¬ä¸åŠ¨æ€æ‰§è¡Œ"&gt;ğŸ› ï¸ å¤„ç†å†…è”è„šæœ¬ä¸åŠ¨æ€æ‰§è¡Œ
&lt;/h3&gt;&lt;p&gt;CSP é»˜è®¤ä¼šé˜»æ­¢å†…è”è„šæœ¬ï¼ˆå¦‚ &lt;code&gt;&amp;lt;script&amp;gt;...&amp;lt;/script&amp;gt;&lt;/code&gt;ä¸­çš„ä»£ç ï¼‰å’Œ &lt;code&gt;eval()&lt;/code&gt;ç­‰åŠ¨æ€ä»£ç æ‰§è¡Œï¼Œè¿™æ˜¯å…¶å®‰å…¨æ€§çš„é‡è¦ä½“ç°ã€‚ä½†ç°ä»£å‰ç«¯å¼€å‘å¾€å¾€ç¦»ä¸å¼€å®ƒä»¬ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡æ›´å®‰å…¨çš„æ–¹å¼æ¥è§£å†³ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;nonce&lt;/code&gt;ï¼ˆæ•°å­—ä»¤ç‰Œï¼‰&lt;/strong&gt;ï¼šæœåŠ¡å™¨ä¸ºæ¯æ¬¡è¯·æ±‚ç”Ÿæˆä¸€ä¸ªéšæœºçš„ &lt;code&gt;nonce&lt;/code&gt;å€¼ï¼Œå¹¶å°†å…¶åŒæ—¶æ·»åŠ åˆ° CSP ç­–ç•¥å’Œå…è®¸æ‰§è¡Œçš„ &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;æ ‡ç­¾ä¸­ã€‚åªæœ‰åŒ¹é…çš„è„šæœ¬æ‰ä¼šè¢«æ‰§è¡Œã€‚è¿™æ—¢ä¿è¯äº†å®‰å…¨æ€§ï¼Œåˆå…è®¸ç‰¹å®šçš„å†…è”è„šæœ¬è¿è¡Œã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CSP å¤´ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;script-src 'nonce-abc123'&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTML ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;&amp;lt;script nonce=&amp;quot;abc123&amp;quot;&amp;gt;/* å…è®¸æ‰§è¡Œçš„ä»£ç  */&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;hash&lt;/code&gt;ï¼ˆå“ˆå¸Œå€¼ï¼‰&lt;/strong&gt;ï¼šè®¡ç®—å…è®¸æ‰§è¡Œçš„å†…è”è„šæœ¬å†…å®¹çš„å“ˆå¸Œå€¼ï¼ˆå¦‚ SHA-256ï¼‰ï¼Œå¹¶å°†è¯¥å“ˆå¸Œå€¼æ·»åŠ åˆ° &lt;code&gt;script-src&lt;/code&gt;æŒ‡ä»¤ä¸­ã€‚æµè§ˆå™¨åªä¼šæ‰§è¡Œå“ˆå¸Œå€¼åŒ¹é…çš„è„šæœ¬ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CSP å¤´ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;script-src 'sha256-abc123...'&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼šåº”å°½é‡é¿å…ä½¿ç”¨ &lt;code&gt;'unsafe-inline'&lt;/code&gt;å’Œ &lt;code&gt;'unsafe-eval'&lt;/code&gt;è¿™ä¸¤ä¸ªå…³é”®å­—ï¼Œå› ä¸ºå®ƒä»¬ä¼šæ˜¾è‘—é™ä½ CSP çš„å®‰å…¨ä»·å€¼ã€‚&lt;code&gt;nonce&lt;/code&gt;å’Œ &lt;code&gt;hash&lt;/code&gt;æ˜¯æ›´å®‰å…¨ã€æ›´ç°ä»£çš„æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="-æ€»ç»“ä¸å®è·µå»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒContent-Security-Policy æ˜¯ä¸€é¡¹é€šè¿‡å»ºç«‹å¯ä¿¡èµ„æºç™½åå•æ¥æ˜¾è‘—æå‡ Web åº”ç”¨å®‰å…¨æ€§çš„å¼ºå¤§æŠ€æœ¯ã€‚è¦æœ‰æ•ˆè¿ç”¨å®ƒï¼Œå…³é”®åœ¨äº&lt;strong&gt;é‡‡ç”¨æ¸è¿›å¼çš„éƒ¨ç½²ç­–ç•¥&lt;/strong&gt;ï¼Œå¹¶&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© &lt;code&gt;nonce&lt;/code&gt;æˆ– &lt;code&gt;hash&lt;/code&gt;ç­‰å®‰å…¨æœºåˆ¶æ¥å¤„ç†å†…è”å†…å®¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ ç†è§£å’Œåº”ç”¨ CSPã€‚å¦‚æœä½ åœ¨å…·ä½“çš„é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æƒ³äº†è§£ç‰¹å®šåœºæ™¯ä¸‹çš„æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="csrf"&gt;CSRF
&lt;/h2&gt;&lt;p&gt;CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ˜¯ä¸€ç§å¸¸è§çš„ç½‘ç»œæ”»å‡»æ‰‹æ®µï¼Œå®ƒåˆ©ç”¨ç½‘ç«™å¯¹ç”¨æˆ·æµè§ˆå™¨çš„ä¿¡ä»»ï¼Œè¯±ä½¿ç”¨æˆ·åœ¨å·²ç™»å½•ç›®æ ‡ç½‘ç«™çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œéæœ¬æ„çš„æ“ä½œã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡CSRFæ”»å‡»çš„å…¨è²Œï¼ŒåŒ…æ‹¬å…¶æ ¸å¿ƒåŸç†å’Œå…³é”®é˜²å¾¡ç­–ç•¥ï¼Œä¸‹é¢è¿™å¼ æµç¨‹å›¾æä¾›äº†æ¸…æ™°çš„æ¦‚è§ˆï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç”¨æˆ·ç™»å½•å—ä¿¡ä»»ç½‘ç«™A] --&amp;gt; B[ç½‘ç«™AéªŒè¯èº«ä»½&amp;lt;br&amp;gt;è¿”å›ä¼šè¯Cookie]
B --&amp;gt; C[ç”¨æˆ·æœªç™»å‡ºAçš„æƒ…å†µä¸‹&amp;lt;br&amp;gt;è®¿é—®æ¶æ„ç½‘ç«™B]
C --&amp;gt; D[ç½‘ç«™Bè¿”å›æ”»å‡»ä»£ç &amp;lt;br&amp;gt;è‡ªåŠ¨å‘èµ·å¯¹ç½‘ç«™Açš„è¯·æ±‚]
D --&amp;gt; E[æµè§ˆå™¨è‡ªåŠ¨æºå¸¦&amp;lt;br&amp;gt;ç”¨æˆ·Cookieè®¿é—®ç½‘ç«™A]
E --&amp;gt; F{ç½‘ç«™AéªŒè¯è¯·æ±‚}
F --&amp;gt;|ç¼ºä¹CSRFé˜²æŠ¤| G[è¯·æ±‚è¢«è¯¯è®¤ä¸ºç”¨æˆ·æ“ä½œ&amp;lt;br&amp;gt;æ¶æ„æ“ä½œè¢«æ‰§è¡Œ]
F --&amp;gt;|å…·å¤‡æœ‰æ•ˆé˜²æŠ¤| H[è¯·æ±‚è¢«è¯†åˆ«ä¸ºä¼ªé€ &amp;lt;br&amp;gt;æ“ä½œè¢«æ‹’ç»]
I[å…³é”®é˜²å¾¡ç­–ç•¥] --&amp;gt; J[ä½¿ç”¨Anti-CSRF Token]
I --&amp;gt; K[è®¾ç½®SameSite Cookieå±æ€§]
I --&amp;gt; L[éªŒè¯è¯·æ±‚çš„Refererå¤´éƒ¨]
I --&amp;gt; M[å…³é”®æ“ä½œå¼•å…¥äºŒæ¬¡éªŒè¯]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹CSRFæ”»å‡»çš„å…·ä½“ç»†èŠ‚å’Œåº”å¯¹ä¹‹é“ã€‚&lt;/p&gt;
&lt;h3 id="-æ”»å‡»åŸç†ä¸æµç¨‹-1"&gt;ğŸ” æ”»å‡»åŸç†ä¸æµç¨‹
&lt;/h3&gt;&lt;p&gt;CSRFæ”»å‡»çš„æˆåŠŸä¾èµ–äºå‡ ä¸ªå…³é”®æ¡ä»¶ï¼šç”¨æˆ·å·²ç™»å½•ç›®æ ‡ç½‘ç«™å¹¶æŒæœ‰æœ‰æ•ˆçš„ä¼šè¯å‡­è¯ï¼ˆå¦‚Cookieï¼‰ï¼›æ”»å‡»è€…èƒ½è¯±ä½¿ç”¨æˆ·è®¿é—®ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æ¶æ„é¡µé¢ï¼›ç›®æ ‡ç½‘ç«™çš„æ“ä½œè¯·æ±‚ç¼ºä¹æœ‰æ•ˆçš„äºŒæ¬¡éªŒè¯æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å…¸å‹æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·è®¤è¯&lt;/strong&gt;ï¼šç”¨æˆ·ç™»å½•å—ä¿¡ä»»çš„ç½‘ç«™ï¼ˆä¾‹å¦‚ç½‘ä¸Šé“¶è¡Œï¼‰ï¼ŒæœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­è®¾ç½®ä¸€ä¸ªä¼šè¯Cookieã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒç™»å½•çŠ¶æ€&lt;/strong&gt;ï¼šç”¨æˆ·åœ¨æ²¡æœ‰é€€å‡ºç™»å½•çš„æƒ…å†µä¸‹ï¼Œç»§ç»­ä½¿ç”¨åŒä¸€ä¸ªæµè§ˆå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘æ¶æ„è¯·æ±‚&lt;/strong&gt;ï¼šç”¨æˆ·è¢«è¯±å¯¼è®¿é—®æ”»å‡»è€…æ§åˆ¶çš„æ¶æ„ç½‘ç«™ã€‚è¿™ä¸ªç½‘ç«™åŒ…å«ä¸€ä¸ªè‡ªåŠ¨æäº¤çš„éšè—è¡¨å•æˆ–ç‰¹å®šæ ‡ç­¾ï¼ˆå¦‚&lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt;ï¼‰ï¼Œå…¶ç›®æ ‡æ˜¯å‘å—ä¿¡ä»»ç½‘ç«™å‘é€ä¸€ä¸ªæ“ä½œè¯·æ±‚ï¼ˆä¾‹å¦‚è½¬è´¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµè§ˆå™¨è‡ªåŠ¨å‘é€å‡­è¯&lt;/strong&gt;ï¼šæµè§ˆå™¨ä¼šæ ¹æ®åŒæºç­–ç•¥ï¼Œåœ¨å‘ç›®æ ‡ç½‘ç«™å‘èµ·è¯·æ±‚æ—¶è‡ªåŠ¨æºå¸¦è¯¥ç½‘ç«™å¯¹åº”çš„Cookieã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨æ‰§è¡Œæ¶æ„æ“ä½œ&lt;/strong&gt;ï¼šå—ä¿¡ä»»çš„ç½‘ç«™æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼ŒéªŒè¯Cookieæœ‰æ•ˆï¼Œä¾¿è®¤ä¸ºè¿™æ˜¯ç”¨æˆ·çš„åˆæ³•æ“ä½œï¼Œä»è€Œæ‰§è¡Œäº†æ”»å‡»è€…é¢„è®¾çš„æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦æ”»å‡»ç±»å‹ä¸ç¤ºä¾‹"&gt;âš”ï¸ ä¸»è¦æ”»å‡»ç±»å‹ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;æ ¹æ®è¯·æ±‚æ–¹å¼çš„ä¸åŒï¼ŒCSRFæ”»å‡»ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;GETç±»å‹CSRF&lt;/strong&gt;ï¼šåˆ©ç”¨&lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt;ç­‰æ ‡ç­¾çš„&lt;code&gt;src&lt;/code&gt;å±æ€§å¯ä»¥å‘èµ·GETè¯·æ±‚çš„ç‰¹æ€§ã€‚å½“æ¶æ„é¡µé¢åŠ è½½æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è¯·æ±‚é¢„è®¾çš„URLã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè½¬è´¦æ“ä½œå¦‚æœé€šè¿‡GETè¯·æ±‚å®Œæˆï¼Œæ”»å‡»è€…å¯èƒ½æ„é€ è¿™æ ·çš„é“¾æ¥å¹¶è¯±ä½¿ç”¨æˆ·ç‚¹å‡»ï¼š&lt;code&gt;&amp;lt;img src=&amp;quot;http://bank.com/transfer?to=attacker&amp;amp;amount=1000&amp;quot; width=&amp;quot;0&amp;quot; height=&amp;quot;0&amp;quot;&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;POSTç±»å‹CSRF&lt;/strong&gt;ï¼šå¯¹äºä½¿ç”¨POSTè¯·æ±‚çš„æ“ä½œï¼Œæ”»å‡»è€…ä¼šåœ¨æ¶æ„ç½‘ç«™ä¸Šåˆ›å»ºä¸€ä¸ªéšè—çš„è¡¨å•ï¼Œå¹¶é€šè¿‡JavaScriptè‡ªåŠ¨æäº¤ã€‚è¿™ç§æ–¹å¼å¯ä»¥æºå¸¦æ›´å¤šã€æ›´å¤æ‚çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒé˜²å¾¡ç­–ç•¥"&gt;ğŸ›¡ï¸ æ ¸å¿ƒé˜²å¾¡ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;é˜²èŒƒCSRFæ”»å‡»çš„å…³é”®åœ¨äº&lt;strong&gt;ç¡®ä¿è¯·æ±‚æ˜¯ç”¨æˆ·æ˜çŸ¥ä¸”è‡ªæ„¿å‘å‡ºçš„&lt;/strong&gt;ï¼Œè€Œéä¼ªé€ çš„ã€‚ä¸»è¦çš„é˜²å¾¡æªæ–½åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨Anti-CSRF Tokenï¼ˆæœ€æœ‰æ•ˆå’Œå¸¸ç”¨çš„æ–¹æ³•ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·ä¼šè¯ç”Ÿæˆä¸€ä¸ª&lt;strong&gt;éšæœºã€ä¸å¯é¢„æµ‹çš„Token&lt;/strong&gt;ï¼Œå¹¶å°†å…¶åµŒå…¥è¡¨å•æˆ–é¡µé¢çš„éšè—å­—æ®µä¸­ã€‚å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼ŒæœåŠ¡å™¨ä¼šéªŒè¯æäº¤çš„Tokenæ˜¯å¦ä¸ä¼šè¯ä¸­å­˜å‚¨çš„Tokenä¸€è‡´ã€‚å› ä¸ºæ”»å‡»è€…æ— æ³•è·å–æˆ–é¢„æµ‹è¿™ä¸ªTokenï¼ˆå—åŒæºç­–ç•¥ä¿æŠ¤ï¼‰ï¼Œæ‰€ä»¥æ— æ³•æ„é€ å‡ºæœ‰æ•ˆçš„æ¶æ„è¯·æ±‚ã€‚åœ¨Spring Securityç­‰æ¡†æ¶ä¸­ï¼Œè¿™ä¸€æœºåˆ¶é€šå¸¸å·²å†…ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®SameSite Cookieå±æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§ç”±æµè§ˆå™¨æä¾›çš„åŸç”Ÿé˜²æŠ¤ã€‚é€šè¿‡å°†Cookieçš„&lt;code&gt;SameSite&lt;/code&gt;å±æ€§è®¾ç½®ä¸º &lt;code&gt;Strict&lt;/code&gt;æˆ– &lt;code&gt;Lax&lt;/code&gt;ï¼Œå¯ä»¥æŒ‡ç¤ºæµè§ˆå™¨åœ¨è·¨ç«™è¯·æ±‚ä¸­ä¸å‘é€Cookieï¼Œä»è€Œä»æ ¹æœ¬ä¸Šåˆ‡æ–­CSRFæ”»å‡»çš„å‡­è¯æ¥æºã€‚è¿™å·²æˆä¸ºç°ä»£æµè§ˆå™¨ä¸­éå¸¸æœ‰æ•ˆçš„é˜²å¾¡æ‰‹æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éªŒè¯Referer/Originå¤´éƒ¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨å¯ä»¥æ£€æŸ¥HTTPè¯·æ±‚å¤´ä¸­çš„&lt;code&gt;Referer&lt;/code&gt;æˆ–&lt;code&gt;Origin&lt;/code&gt;å­—æ®µï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥æºäºæœ¬ç½‘ç«™çš„é¡µé¢ã€‚å¦‚æœæ¥æºæ˜¯ä¸€ä¸ªæœªçŸ¥çš„æˆ–ä¸ä¿¡ä»»çš„åŸŸåï¼Œåˆ™æ‹’ç»è¯¥è¯·æ±‚ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŸäº›æµè§ˆå™¨é…ç½®æˆ–ç½‘ç»œç¯å¢ƒå¯èƒ½ä¸ä¼šå‘é€è¿™äº›å¤´éƒ¨ï¼Œæˆ–è€…å¯èƒ½è¢«ç¯¡æ”¹ï¼Œå› æ­¤è¿™ç§æ–¹æ³•é€šå¸¸ä½œä¸ºè¾…åŠ©é˜²å¾¡æªæ–½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®æ“ä½œå¼•å…¥äºŒæ¬¡éªŒè¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºè½¬è´¦ã€ä¿®æ”¹å¯†ç ç­‰é«˜æ•æ„Ÿæ€§æ“ä½œï¼Œè¦æ±‚ç”¨æˆ·è¿›è¡ŒäºŒæ¬¡éªŒè¯æ˜¯æœ€å®‰å…¨çš„åšæ³•ä¹‹ä¸€ã€‚ä¾‹å¦‚ï¼Œå¼ºåˆ¶ç”¨æˆ·å†æ¬¡è¾“å…¥å¯†ç æˆ–å›¾å½¢éªŒè¯ç ã€‚ç”±äºæ”»å‡»è€…æ— æ³•è·çŸ¥è¿™äº›äºŒæ¬¡éªŒè¯ä¿¡æ¯ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆé˜»æ­¢CSRFæ”»å‡»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;CSRFæ”»å‡»æ˜¯ä¸€ç§åˆ©ç”¨ç½‘ç«™å¯¹ç”¨æˆ·æµè§ˆå™¨ä¿¡ä»»çš„å®‰å…¨æ¼æ´ã€‚å…¶é˜²å¾¡æ ¸å¿ƒåœ¨äº&lt;strong&gt;æ‰“ç ´â€œæœ‰Cookieçš„è¯·æ±‚å°±ç­‰äºç”¨æˆ·è‡ªæ„¿æ“ä½œâ€çš„é»˜è®¤ä¿¡ä»»å‡è®¾&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç°ä»£Webåº”ç”¨å¼€å‘ï¼Œå»ºè®®ä¼˜å…ˆé‡‡ç”¨ &lt;strong&gt;Anti-CSRF Token&lt;/strong&gt; å’Œ &lt;strong&gt;SameSite Cookie&lt;/strong&gt; ç»„åˆçš„é˜²å¾¡ç­–ç•¥ã€‚åŒæ—¶ï¼Œä¿æŒå¯¹å®‰å…¨çŸ¥è¯†çš„æ›´æ–°ï¼Œå› ä¸ºç½‘ç»œæ”»é˜²æŠ€æœ¯ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å…¨é¢åœ°ç†è§£CSRFã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„æ”»å‡»åœºæ™¯æˆ–é˜²å¾¡æŠ€æœ¯çš„å®ç°ç»†èŠ‚æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="xss--csrf"&gt;XSS &amp;amp; CSRF
&lt;/h2&gt;&lt;p&gt;ç†è§£ XSSã€CSRF å’Œ CORS çš„å…³é”®åœ¨äºæŠ“ä½å…¶æ ¸å¿ƒï¼š&lt;strong&gt;XSS å’Œ CSRF æ˜¯éœ€è¦é˜²å¾¡çš„å®‰å…¨å¨èƒï¼Œè€Œ CORS æ˜¯ä¸€å¥—ç”¨äºå®‰å…¨åœ°å®ç°è·¨åŸŸèµ„æºè®¿é—®çš„è§„åˆ™&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡ä¸‰è€…çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;XSS (è·¨ç«™è„šæœ¬æ”»å‡»)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CSRF (è·¨ç«™è¯·æ±‚ä¼ªé€ )&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CORS (è·¨åŸŸèµ„æºå…±äº«)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€ç§å®‰å…¨æ”»å‡»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€ç§å®‰å…¨æ”»å‡»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€ä»½W3Cæ ‡å‡†/ä¸€ç§æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çªƒå–ç”¨æˆ·æ•°æ®æˆ–å†’å……ç”¨æˆ·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†’å……ç”¨æˆ·å®Œæˆéæœ¬æ„æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨åœ°å®ç°è·¨åŸŸè®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”»å‡»/å·¥ä½œåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘ç½‘ç«™æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œåœ¨ç”¨æˆ·æµè§ˆå™¨æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çš„çŠ¶æ€ï¼Œè¯±éª—å…¶ç‚¹å‡»é“¾æ¥æˆ–è®¿é—®é¡µé¢ï¼Œå‘ç›®æ ‡ç½‘ç«™å‘èµ·ä¼ªé€ è¯·æ±‚&lt;/td&gt;
&lt;td&gt;é€šè¿‡æ–°å¢HTTPå¤´éƒ¨ï¼Œè®©æœåŠ¡å™¨å£°æ˜å“ªäº›å¤–éƒ¨æºæœ‰æƒè®¿é—®èµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´£ä»»æ–¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç«™å¼€å‘è€…éœ€ä¿®å¤æ¼æ´ä»¥é˜²å¾¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç«™å¼€å‘è€…éœ€å¢åŠ éªŒè¯ä»¥é˜²å¾¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç«™å¼€å‘è€…éœ€æ­£ç¡®é…ç½®ä»¥æ”¯æŒåˆæ³•è·¨åŸŸè¯·æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥å‰–æå¨èƒä¸æœºåˆ¶"&gt;ğŸ” æ·±å…¥å‰–æï¼šå¨èƒä¸æœºåˆ¶
&lt;/h3&gt;&lt;h4 id="-xssä»£ç æ³¨å…¥æ”»å‡»"&gt;âš”ï¸ XSSï¼šä»£ç æ³¨å…¥æ”»å‡»
&lt;/h4&gt;&lt;p&gt;XSS æ”»å‡»çš„æ ¸å¿ƒæ˜¯è®©æ¶æ„è„šæœ¬åœ¨å—å®³è€…çš„æµè§ˆå™¨ä¸­è¿è¡Œã€‚æ ¹æ®æ¶æ„ä»£ç å­˜æ”¾å’Œè§¦å‘çš„ä½ç½®ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åå°„å‹XSS&lt;/strong&gt;ï¼šæ¶æ„è„šæœ¬ä½œä¸ºè¯·æ±‚çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚URLå‚æ•°ï¼‰å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°†å…¶ç›´æ¥â€œåå°„â€å›å“åº”é¡µé¢ä¸­æ‰§è¡Œã€‚&lt;strong&gt;é€šå¸¸éœ€è¦è¯±ä½¿ç”¨æˆ·ç‚¹å‡»ç²¾å¿ƒæ„é€ çš„é“¾æ¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å‹XSS&lt;/strong&gt;ï¼šæ¶æ„è„šæœ¬è¢«æäº¤å¹¶&lt;strong&gt;æ°¸ä¹…å­˜å‚¨åœ¨ç›®æ ‡ç½‘ç«™çš„æœåŠ¡å™¨ä¸Š&lt;/strong&gt;ï¼ˆå¦‚æ•°æ®åº“ï¼‰ã€‚å½“å…¶ä»–ç”¨æˆ·è®¿é—®åŒ…å«æ­¤å†…å®¹çš„é¡µé¢æ—¶ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå±å®³èŒƒå›´æ›´å¹¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DOMå‹XSS&lt;/strong&gt;ï¼šæ¼æ´å®Œå…¨ç”±å‰ç«¯JavaScriptä»£ç å¯¹ç”¨æˆ·è¾“å…¥å¤„ç†ä¸å½“å¼•èµ·ï¼Œæ¶æ„è„šæœ¬çš„æ³¨å…¥å’Œæ‰§è¡Œ&lt;strong&gt;ä¸ç»è¿‡æœåŠ¡å™¨&lt;/strong&gt;ï¼Œåªåœ¨æµè§ˆå™¨ç«¯å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;é˜²å¾¡æ ¸å¿ƒ&lt;/strong&gt;æ˜¯å¯¹æ‰€æœ‰ä¸å¯ä¿¡çš„æ•°æ®è¿›è¡Œ&lt;strong&gt;è½¬ä¹‰å’Œè¿‡æ»¤&lt;/strong&gt;ã€‚ ä¾‹å¦‚ï¼Œå°† &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;è½¬ä¹‰ä¸º &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;ï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¸ä¼šå°†å…¶å½“ä½œä»£ç æ‰§è¡Œã€‚æ­¤å¤–ï¼Œè®¾ç½® &lt;strong&gt;&lt;code&gt;Content-Security-Policy&lt;/code&gt;&lt;/strong&gt; å“åº”å¤´å¯ä»¥ä¸¥æ ¼é™åˆ¶é¡µé¢å…è®¸åŠ è½½å’Œæ‰§è¡Œçš„èµ„æºæ¥æºï¼Œä»æ ¹æœ¬ä¸Šå¤§å¹…æå‡æ”»å‡»éš¾åº¦ã€‚&lt;/p&gt;
&lt;h4 id="-csrfä¼šè¯åŠ«æŒæ”»å‡»"&gt;ğŸ­ CSRFï¼šä¼šè¯åŠ«æŒæ”»å‡»
&lt;/h4&gt;&lt;p&gt;CSRF æ”»å‡»åˆ©ç”¨ç½‘ç«™å¯¹ç”¨æˆ·æµè§ˆå™¨çš„ä¿¡ä»»ã€‚æ”»å‡»è€…ä¼ªé€ ä¸€ä¸ªè¯·æ±‚ï¼Œè¯±ä½¿å·²ç™»å½•ç›®æ ‡ç½‘ç«™çš„ç”¨æˆ·å»è§¦å‘ã€‚ç”±äºæµè§ˆå™¨ä¼šè‡ªåŠ¨æºå¸¦ç”¨æˆ·çš„Cookieç­‰å‡­è¯ï¼ŒæœåŠ¡å™¨ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªåˆæ³•çš„ç”¨æˆ·è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é˜²å¾¡æ ¸å¿ƒ&lt;/strong&gt;æ˜¯ç ´åè¿™ç§â€œä¿¡ä»»â€ï¼Œå¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Anti-CSRF Token&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªç”¨æˆ·ä¼šè¯æˆ–è¡¨å•ç”Ÿæˆä¸€ä¸ªéšæœºã€ä¸å¯é¢„æµ‹çš„Tokenã€‚æäº¤è¯·æ±‚æ—¶ï¼Œå¿…é¡»åœ¨è¡¨å•æˆ–è¯·æ±‚å¤´ä¸­æºå¸¦è¯¥Tokenï¼ŒæœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚æ”»å‡»è€…æ— æ³•è·çŸ¥è¿™ä¸ªTokenï¼Œå› æ­¤æ— æ³•ä¼ªé€ æœ‰æ•ˆè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SameSite Cookie å±æ€§&lt;/strong&gt;ï¼šè®¾ç½®Cookieçš„ &lt;code&gt;SameSite&lt;/code&gt;å±æ€§ä¸º &lt;code&gt;Strict&lt;/code&gt;æˆ– &lt;code&gt;Lax&lt;/code&gt;ï¼Œå¯ä»¥æŒ‡ç¤ºæµè§ˆå™¨åœ¨è·¨ç«™è¯·æ±‚ä¸­ä¸è‡ªåŠ¨å‘é€Cookieï¼Œä»è€Œä»æºå¤´åˆ‡æ–­CSRFæ”»å‡»çš„å‡­è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯è¯·æ±‚æ¥æº&lt;/strong&gt;ï¼šæ£€æŸ¥è¯·æ±‚å¤´ä¸­çš„ &lt;code&gt;Origin&lt;/code&gt;æˆ– &lt;code&gt;Referer&lt;/code&gt;å­—æ®µï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªå¯ä¿¡çš„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-corsè·¨åŸŸè®¿é—®æœºåˆ¶"&gt;ğŸŒ‰ CORSï¼šè·¨åŸŸè®¿é—®æœºåˆ¶
&lt;/h4&gt;&lt;p&gt;CORS æ˜¯ç°ä»£æµè§ˆå™¨éµå¾ªçš„ä¸€å¥—è§„åˆ™ï¼Œå…è®¸ç½‘é¡µå‘ä¸åŒæºçš„æœåŠ¡å™¨å‘èµ·åˆæ³•çš„è·¨åŸŸè¯·æ±‚ï¼Œä»è€Œå…‹æœäº†ä¸¥æ ¼çš„â€œåŒæºç­–ç•¥â€é™åˆ¶ã€‚å…¶å…³é”®åœ¨äºæœåŠ¡å™¨é€šè¿‡è®¾ç½®ç‰¹å®šçš„HTTPå“åº”å¤´æ¥æˆæƒã€‚&lt;/p&gt;
&lt;p&gt;CORSå°†è¯·æ±‚åˆ†ä¸ºä¸¤ç±»ï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•è¯·æ±‚&lt;/strong&gt;ï¼šå¯¹äºæ–¹æ³•ä¸ºGETã€HEADã€POSTï¼Œä¸”Content-Typeé™äºä¸‰ç§ç®€å•ç±»å‹çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šç›´æ¥å‘å‡ºè¯·æ±‚ï¼Œå¹¶åœ¨è¯·æ±‚å¤´ä¸­å¸¦ä¸Š &lt;code&gt;Origin&lt;/code&gt;ã€‚æœåŠ¡å™¨æ ¹æ® &lt;code&gt;Origin&lt;/code&gt;å†³å®šæ˜¯å¦åŒæ„ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­è¿”å› &lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éç®€å•è¯·æ±‚&lt;/strong&gt;ï¼ˆå¦‚PUTã€DELETEæˆ–ä½¿ç”¨è‡ªå®šä¹‰å¤´éƒ¨çš„è¯·æ±‚ï¼‰ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ä¸€ä¸ª &lt;strong&gt;&lt;code&gt;OPTIONS&lt;/code&gt;æ–¹æ³•çš„â€œé¢„æ£€è¯·æ±‚â€&lt;/strong&gt; è¯¢é—®æœåŠ¡å™¨æ˜¯å¦å…è®¸è¯¥è·¨åŸŸè¯·æ±‚ã€‚æœåŠ¡å™¨ç¡®è®¤åï¼Œæµè§ˆå™¨æ‰ä¼šå‘é€å®é™…è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸å…³è”"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸å…³è”
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜²å¾¡çš„ååŒ&lt;/strong&gt;ï¼šä¸€ä¸ªå®‰å…¨çš„Webåº”ç”¨éœ€è¦ç»¼åˆè¿ç”¨å¤šç§ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œé˜²å¾¡XSSæœ‰åŠ©äºä¿æŠ¤æ•æ„Ÿçš„Cookieä¸è¢«çªƒå–ï¼Œè€Œè®¾ç½®Cookieä¸º &lt;code&gt;HttpOnly&lt;/code&gt;æ—¢æ˜¯é˜²å¾¡XSSï¼ˆé˜²æ­¢JSè¯»å–Cookieï¼‰çš„é‡è¦ä¸€ç¯ï¼Œä¹Ÿèƒ½å¢åŠ CSRFæ”»å‡»ä¸­åˆ©ç”¨Cookieçš„éš¾åº¦ã€‚ åŒæ—¶ï¼Œæ­£ç¡®é…ç½®CORSç­–ç•¥å¯ä»¥é™åˆ¶ä¸å¯ä¿¡çš„å¤–æºè®¿é—®ï¼Œå‡å°‘æ”»å‡»é¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦æ··æ·†CSRFå’ŒCORS&lt;/strong&gt;ï¼šåŠ¡å¿…è®°ä½ï¼ŒCSRFæ˜¯ä¸€ç§&lt;strong&gt;æ”»å‡»&lt;/strong&gt;ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦é˜²èŒƒçš„åäº‹æƒ…ï¼›è€ŒCORSæ˜¯ä¸€ç§&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼Œæ˜¯æˆ‘ä»¬åœ¨æ§åˆ¶çš„å‰æä¸‹&lt;strong&gt;å®‰å…¨åœ°å®ç°å¥½çš„åŠŸèƒ½ï¼ˆè·¨åŸŸè®¿é—®ï¼‰&lt;/strong&gt; æ‰€ä½¿ç”¨çš„æ ‡å‡†æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£è¿™ä¸‰è€…çš„åŒºåˆ«ä¸è”ç³»ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ”»å‡»çš„é˜²å¾¡å®ç°æˆ–CORSçš„é…ç½®ç»†èŠ‚æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç¼“å­˜"&gt;ç¼“å­˜
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¼ºç¼“å­˜ï¼ˆfreshness cachingï¼‰&lt;/strong&gt;
â€‘ ç¼“å­˜å±‚ç›´æ¥ç”¨æœ¬åœ°å‰¯æœ¬ï¼Œä¸è¯·æ±‚æœåŠ¡å™¨ï¼Œ0 RTTã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åå•†ç¼“å­˜ï¼ˆvalidation cachingï¼‰&lt;/strong&gt;
â€‘ ç¼“å­˜å±‚å¸¦æ¡ä»¶å­—æ®µå»é—®æœåŠ¡å™¨ï¼Œè‹¥æœªå˜è¿”å› 304ï¼Œçœä½“ç§¯ä½†ä» 1 RTTã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æŒ‡ä»¤&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;public / private&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ˜¯å¦å…è®¸ä»£ç†ç¼“å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;no-cache&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»å¯ç¼“å­˜ï¼Œä½†å¿…é¡»åå•†åæ‰èƒ½ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;no-store&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç¦æ­¢ä»»ä½•å±‚å­˜å‚¨ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;must-revalidate&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ°æœŸå&lt;strong&gt;å¿…é¡»&lt;/strong&gt;å»æºæœåŠ¡å™¨é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;stale-while-revalidate=30&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿‡æœŸ â‰¤30s æœŸé—´ä»å¯ç”¨æ—§å‰¯æœ¬å¹¶å¼‚æ­¥åˆ·æ–°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;stale-if-error=3600&lt;/td&gt;
&lt;td style="text-align: left"&gt;æºç«™ 5xx æ—¶ï¼Œæ—§å‰¯æœ¬å¯å†æ’‘ 1 å°æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="è¯·æ±‚é“¾è·¯"&gt;è¯·æ±‚é“¾è·¯
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;#&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…³é”®èŠ‚ç‚¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ç»†è¯´å¯å»¶ä¼¸å†…å®¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;1&lt;/td&gt;
&lt;td style="text-align: left"&gt;åœ°å€æ è§£æ&lt;/td&gt;
&lt;td style="text-align: left"&gt;URL ç»„æˆã€æµè§ˆå™¨ç¼“å­˜ã€Service-Worker æ‹¦æˆªã€HSTS å¼ºå‡ HTTPS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;2&lt;/td&gt;
&lt;td style="text-align: left"&gt;DNS è§£æ&lt;/td&gt;
&lt;td style="text-align: left"&gt;é€’å½’/è¿­ä»£ã€æ ¹/TLD/æƒå¨ã€DoH/DoTã€DNS Cacheã€edns-client-subnet&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;3&lt;/td&gt;
&lt;td style="text-align: left"&gt;å»ºç«‹è¿æ¥&lt;/td&gt;
&lt;td style="text-align: left"&gt;TCP ä¸‰æ¬¡æ¡æ‰‹ã€TLS 1.3/QUIC 0-RTTã€SYN ä¸¢åŒ…/é‡ä¼ ã€SYN Cookies&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;4&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‘é€è¯·æ±‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;HTTP 1.x/2/3ã€è¯·æ±‚â½…æ³•ã€è¯·æ±‚å¤´ã€é•¿è¿æ¥&amp;amp;é˜Ÿå¤´é˜»å¡ã€ä»£ç†é“¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;5&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡å™¨å“åº”&lt;/td&gt;
&lt;td style="text-align: left"&gt;CDN ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ã€çŠ¶æ€ç ã€å‹ç¼©ã€Cookie/Set-Cookieã€ETag&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;6&lt;/td&gt;
&lt;td style="text-align: left"&gt;æµè§ˆå™¨æ¸²æŸ“&lt;/td&gt;
&lt;td style="text-align: left"&gt;HTML Parserã€CSSOMã€JS æ‰§è¡Œã€Layoutâ†’Paintâ†’Compositeã€CLS/LCP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;7&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…³é—­è¿æ¥&lt;/td&gt;
&lt;td style="text-align: left"&gt;TCP å››æ¬¡æŒ¥æ‰‹ã€TIME_WAITã€Keep-Aliveã€HTTP/2 å¤â½¤æ— éœ€æŒ¥æ‰‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="è¯·æ±‚è½¬å‘"&gt;è¯·æ±‚è½¬å‘
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¯¹æ¯”ç‚¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;é‡å®šå‘ (Redirect)&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯·æ±‚è½¬å‘ (Forward)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;HTTP å±‚è¡¨ç°&lt;/td&gt;
&lt;td style="text-align: left"&gt;3xx + Locationï¼Œå®¢æˆ·ç«¯å†å‘ç¬¬äºŒæ¬¡è¯·æ±‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»ä¸º 200ï¼Œä¸€æ¬¡å¾€è¿”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;URL åœ°å€æ &lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¼šæ”¹å˜&lt;/strong&gt;ä¸ºç›®æ ‡ URL&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä¿æŒä¸å˜&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ä½œç”¨åŸŸ&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ–°è¯·æ±‚ï¼šä¸èƒ½ç›´æ¥æ‹¿åˆ°ä¸Šæ¬¡ request ä¸­çš„å±æ€§&lt;/td&gt;
&lt;td style="text-align: left"&gt;åŒä¸€ä¸ª requestï¼Œå¯å…±äº«å±æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç½‘ç»œå¼€é”€&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‡³å°‘å¤š 1 æ¬¡ RTT&lt;/td&gt;
&lt;td style="text-align: left"&gt;0 é¢å¤– RTT&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è·¨åŸŸèƒ½åŠ›&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯ä»¥è·¨åè®®/åŸŸå/ç«¯å£&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»…é™å½“å‰åº”ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å…¸å‹ç”¨é€”&lt;/td&gt;
&lt;td style="text-align: left"&gt;PRG æ¨¡å¼ã€é˜²åˆ·æ–°ã€SEO é“¾æ¥æ¬è¿ã€ç™»å½•è·³ç«™&lt;/td&gt;
&lt;td style="text-align: left"&gt;MVC å†…éƒ¨è§†å›¾æ¸²æŸ“ã€è¿‡æ»¤é“¾ã€ç»Ÿä¸€å¼‚å¸¸é¡µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ä»£ç è°ƒç”¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;response.sendRedirect(&amp;quot;/new&amp;quot;)&lt;/td&gt;
&lt;td style="text-align: left"&gt;dispatcher.forward(req, resp)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="websocket"&gt;WebSocket
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç»´åº¦&lt;/th&gt;
&lt;th style="text-align: left"&gt;HTTP (1.x/2.x)&lt;/th&gt;
&lt;th style="text-align: left"&gt;WebSocket&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;é€šä¿¡æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¯·æ±‚/å“åº”ï¼ŒåŠåŒå·¥&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…¨åŒå·¥ï¼Œä»»æ„ç«¯å¯å…ˆå‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è¿æ¥ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;çŸ­è¿æ¥ï¼ˆæˆ– Keep-Aliveï¼‰ï¼Œä¸€äº‹ä¸€è¿ï¼›HTTP/2 å¯å¤šè·¯å¤ç”¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸€æ¬¡101å‡çº§åé•¿é©»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;é¦–éƒ¨å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¯ä¸ªè¯·æ±‚åŠ¨è¾„ç™¾å­—èŠ‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€å° 2 Byteï¼Œä¸”æ— é‡å¤é¦–éƒ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;çŠ¶æ€ä¿æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— çŠ¶æ€ï¼›é  Cookie / Token ç»´æŠ¤ä¼šè¯&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿æ¥æœ¬èº«å¤©ç„¶æœ‰çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æœåŠ¡å™¨æ¨é€&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;1.x éœ€è½®è¯¢ / SSEï¼›2.x æ”¯æŒ Server Push ä½†ä»…é™èµ„æº&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»»æ„æ—¶åˆ»å¯sendæ¶ˆæ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è·¨åŸŸé™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å—æµè§ˆå™¨åŒæºç­–ç•¥ &amp;amp; CORS&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¡æ‰‹æ—¶ä¸æ£€æŸ¥ Originï¼Œéœ€æœåŠ¡ç«¯è‡ªæ§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å¯é æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;TCP çº§åˆ«å¯é ï¼Œä½†ä¸€æ¬¡è¯·æ±‚ä¸¢åŒ…ä¸å½±å“åç»­è¯·æ±‚&lt;/td&gt;
&lt;td style="text-align: left"&gt;åŒä¸€è¿æ¥ä¸¢åŒ…ä¼šé˜»å¡åŒæ–¹ï¼Œéœ€å¿ƒè·³æ¢æ´»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ä»£ç†/ç¼“å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;HTTP ä»£ç†ã€CDNã€ç¼“å­˜ä¸°å¯Œ&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€æ”¯æŒé€æ˜è½¬å‘æˆ–æ˜¾å¼Connection: Upgradeï¼›ä¸­é—´èŠ‚ç‚¹å¤šåŠæ—è·¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å­—æ®µ&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;FIN (1 bit)&lt;/td&gt;
&lt;td style="text-align: left"&gt;1=æ¶ˆæ¯æœ€åä¸€å¸§ï¼Œå¯åšåˆ†ç‰‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;RSV1-3 (3 bit)&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ‰©å±•ç”¨ï¼Œé€šå¸¸ä¸º 0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Opcode (4 bit)&lt;/td&gt;
&lt;td style="text-align: left"&gt;0=ç»§ç»­å¸§ï¼Œ1=æ–‡æœ¬ï¼Œ2=äºŒè¿›åˆ¶ï¼Œ8=Closeï¼Œ9=Pingï¼ŒA=Pong&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;MASK (1 bit)&lt;/td&gt;
&lt;td style="text-align: left"&gt;æµè§ˆå™¨â†’æœåŠ¡å™¨&lt;strong&gt;å¿…é¡»ä¸º 1&lt;/strong&gt;ï¼ˆå®‰å…¨æ··æ·†ï¼‰ï¼›æœåŠ¡å™¨â†’æµè§ˆå™¨ä¸º 0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Payload Len (7/7+16/7+64)&lt;/td&gt;
&lt;td style="text-align: left"&gt;0â€“125ã€126=åè·Ÿ 16bit é•¿åº¦ã€127=åè·Ÿ 64bit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Mask-Key (4 B)&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»…å½“ MASK=1 æ—¶å‡ºç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Payload Data&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ­£æ–‡ï¼›æµè§ˆå™¨å‘å‡ºçš„å…ˆ XOR Mask-Key å†ä¸Šç½‘&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¸§ç±»å‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;è§¦å‘&lt;/th&gt;
&lt;th style="text-align: left"&gt;ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Ping (opcode 0x9)&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»»æ„ä¸€ç«¯ä¸»åŠ¨å‘&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¢æµ‹å¯¹æ–¹å­˜æ´»ã€æµ‹ RTT&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Pong (0xA)&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¥ Ping æˆ–è‡ªå‘&lt;/td&gt;
&lt;td style="text-align: left"&gt;å›å¤å¿ƒè·³&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜é›…å…³é—­&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;A ç«¯ï¼šå‘é€Closeå¸§ï¼ˆopcode 0x8ï¼Œå« 2 å­—èŠ‚çŠ¶æ€ç  + å¯é€‰åŸå› ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;B ç«¯ï¼šç«‹åˆ»å›ä¸€ä¸ªCloseå¸§ â†’ è¿æ¥è¿›å…¥ &lt;strong&gt;CLOSED&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ–¹å†ç”± TCP äº¤æ¢FIN/ACKå½»åº•é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸æ–­å¼€&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä»»ä½•ä¸€ç«¯ç›´æ¥RSTï¼ç½‘ç»œæ‰çº¿ â†’ æµè§ˆå™¨ä¼šè§¦å‘oncloseï¼Œcode=1006ã€‚&lt;/li&gt;
&lt;li&gt;å‰ç«¯å¸¸ç”¨æŒ‡æ•°é€€é¿åšé‡è¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¸¸ç”¨å…³é—­ç &lt;/th&gt;
&lt;th style="text-align: left"&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;1000&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ­£å¸¸å…³é—­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;1001&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœåŠ¡å™¨ä¸‹çº¿æˆ–é‡å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;1006&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¼‚å¸¸æ–­çº¿ï¼ˆåªåœ¨å®¢æˆ·ç«¯äº‹ä»¶é‡Œå¯è§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;1008&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸šåŠ¡çº§ç­–ç•¥æ‹’ç»ï¼Œå¦‚é‰´æƒå¤±è´¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="mask-key"&gt;MASK-KEY
&lt;/h2&gt;&lt;p&gt;WebSocket åè®®è¦æ±‚å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®å¸§å¿…é¡»åŒ…å« &lt;code&gt;Mask-Key&lt;/code&gt;ï¼ˆæ©ç é”®ï¼‰ï¼Œè€ŒæœåŠ¡å™¨è¿”å›çš„æ•°æ®å¸§åˆ™ä¸éœ€è¦ã€‚è¿™å¹¶éä¸ºäº†æ•°æ®åŠ å¯†ï¼Œè€Œæ˜¯ä¸€é¡¹å…³é”®çš„å®‰å…¨è®¾è®¡ï¼Œä¸»è¦ç›®çš„æ˜¯&lt;strong&gt;é˜²èŒƒæ—©æœŸäº’è”ç½‘ä¸­å­˜åœ¨çš„ä»£ç†ç¼“å­˜æ±¡æŸ“æ”»å‡»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-mask-key-çš„æ ¸å¿ƒä½œç”¨å®‰å…¨"&gt;ğŸ›¡ï¸ Mask-Key çš„æ ¸å¿ƒä½œç”¨ï¼šå®‰å…¨
&lt;/h3&gt;&lt;p&gt;åœ¨ WebSocket åè®®ï¼ˆRFC 6455ï¼‰ç¡®ç«‹ä¹‹å‰ï¼Œäº’è”ç½‘ä¸Šå­˜åœ¨å¤§é‡ä¸ç¬¦åˆæ ‡å‡†çš„ä¸­é—´ä»£ç†æœåŠ¡å™¨ï¼ˆå¦‚ç¼“å­˜ä»£ç†ã€é€æ˜ä»£ç†ç­‰ï¼‰ã€‚è¿™äº›ä»£ç†å¯èƒ½é”™è¯¯åœ°è§£æé€šä¿¡å†…å®¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ”»å‡»åœºæ™¯&lt;/strong&gt;ï¼šå‡è®¾ä¸€ä¸ªæ”»å‡»è€…èƒ½å¤Ÿé€šè¿‡æŸç§æ–¹å¼ï¼ˆä¾‹å¦‚è¯±ä½¿ç”¨æˆ·è®¿é—®æ¶æ„ç½‘é¡µï¼‰å‘ä¸€ä¸ªä¸å®‰å…¨çš„ä»£ç†æœåŠ¡å™¨å‘é€ç²¾å¿ƒæ„é€ çš„ã€å½¢ä¼¼HTTPè¯·æ±‚çš„æ•°æ®ã€‚å¦‚æœä»£ç†æœåŠ¡å™¨è¯¯ä»¥ä¸ºè¿™æ˜¯ä¸€ä¸ªåˆæ³•çš„HTTPè¯·æ±‚ï¼Œå°±å¯èƒ½ä¼šå°†å…¶è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œå¹¶å°†æœåŠ¡å™¨çš„å“åº”ç¼“å­˜ä¸‹æ¥ã€‚è¿™æ ·ï¼Œå½“å…¶ä»–æ­£å¸¸ç”¨æˆ·å°è¯•è®¿é—®åŒä¸€ç›®æ ‡æ—¶ï¼Œä»£ç†ä¼šé”™è¯¯åœ°è¿”å›è¢«ç¼“å­˜çš„æ”»å‡»è€…æ•°æ®ï¼Œé€ æˆå®‰å…¨é£é™©ï¼Œè¿™å°±æ˜¯ä»£ç†ç¼“å­˜æ±¡æŸ“æ”»å‡»ï¼ˆProxy Cache Poisoningï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mask-Key çš„é˜²å¾¡æœºåˆ¶&lt;/strong&gt;ï¼šWebSocket åè®®é€šè¿‡å¼ºåˆ¶å®¢æˆ·ç«¯å¯¹å‘é€ç»™æœåŠ¡å™¨çš„è½½è·æ•°æ®ï¼ˆPayload Dataï¼‰è¿›è¡Œæ©ç å¤„ç†æ¥åº”å¯¹è¿™ä¸€é£é™©ã€‚æ©ç æ“ä½œä½¿ç”¨ä¸€ä¸ªéšæœºç”Ÿæˆçš„32ä½ &lt;code&gt;Mask-Key&lt;/code&gt;ï¼Œå¯¹æ•°æ®è½½è·è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œä»è€Œæ‰“ä¹±æ•°æ®çš„åŸå§‹å­—èŠ‚åºåˆ—ã€‚è¿™ä½¿å¾—æ•°æ®å¸§å¯¹äºä¸ç†è§£ WebSocket åè®®çš„ä¸­é—´è®¾å¤‡æ¥è¯´&lt;strong&gt;çœ‹èµ·æ¥åƒæ˜¯éšæœºçš„ã€æ— æ„ä¹‰çš„å­—èŠ‚æµ&lt;/strong&gt;ï¼Œå¤§å¤§é™ä½äº†è¢«é”™è¯¯è¯†åˆ«å’Œç¼“å­˜çš„å¯èƒ½æ€§ã€‚æœåŠ¡å™¨åœ¨æ”¶åˆ°æ•°æ®åï¼Œä¼šç”¨ç›¸åŒçš„ &lt;code&gt;Mask-Key&lt;/code&gt;æ‰§è¡Œåæ©ç æ“ä½œï¼Œè½»æ¾æ¢å¤åŸå§‹æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;Mask-Key&lt;/code&gt;åƒä¸€ä¸ªå®‰å…¨ä¿¡å°ï¼Œå®ƒä¸èƒ½é˜²æ­¢ä»–äººâ€œçœ‹åˆ°â€ä¿¡å°ï¼Œä½†èƒ½ç¡®ä¿åªæœ‰çŸ¥é“å¦‚ä½•â€œæ‹†ä¿¡â€çš„æœåŠ¡å™¨æ‰èƒ½ç†è§£å†…å®¹ï¼Œä»è€Œé¿å…äº†å†…å®¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ä¸å¯ä¿¡çš„ä¸­é—´è®¾å¤‡è¯¯å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id="-mask-key-çš„å·¥ä½œåŸç†"&gt;âš™ï¸ Mask-Key çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;æ©ç å’Œåæ©ç çš„è¿‡ç¨‹åŸºäº&lt;strong&gt;å¼‚æˆ–ï¼ˆXORï¼‰è¿ç®—&lt;/strong&gt;ï¼Œè¿™æ˜¯ä¸€ç§å¯é€†çš„è¿ç®—ï¼ˆ&lt;code&gt;A ^ B ^ B = A&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯æ©ç ï¼ˆå‘é€æ•°æ®æ—¶ï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯éšæœºç”Ÿæˆä¸€ä¸ª4å­—èŠ‚ï¼ˆ32ä½ï¼‰çš„ &lt;code&gt;Masking-Key&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºè½½è·æ•°æ®çš„æ¯ä¸€ä¸ªå­—èŠ‚ï¼ˆå‡è®¾ç´¢å¼•ä¸º &lt;code&gt;i&lt;/code&gt;ï¼‰ï¼Œå°†å…¶ä¸ &lt;code&gt;Masking-Key[i % 4]&lt;/code&gt;ï¼ˆå³å¯¹ç´¢å¼•å–æ¨¡4åå¯¹åº”çš„é‚£ä¸ªæ©ç é”®å­—èŠ‚ï¼‰è¿›è¡Œå¼‚æˆ–æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å°†æ©ç åçš„æ•°æ®ã€&lt;code&gt;Masking-Key&lt;/code&gt;ä»¥åŠæ ‡å¿—ä½ &lt;code&gt;Mask=1&lt;/code&gt;ä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨åæ©ç ï¼ˆæ¥æ”¶æ•°æ®æ—¶ï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æœåŠ¡å™¨è¯»å–æ•°æ®å¸§å¤´ï¼Œå‘ç° &lt;code&gt;Mask=1&lt;/code&gt;ï¼Œä¾¿æå–å‡ºéšå¸§å‘é€çš„ &lt;code&gt;Masking-Key&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹æ¥æ”¶åˆ°çš„æ©ç åçš„è½½è·æ•°æ®çš„æ¯ä¸€ä¸ªå­—èŠ‚ï¼Œå†æ¬¡ä¸ &lt;code&gt;Masking-Key[i % 4]&lt;/code&gt;è¿›è¡Œå¼‚æˆ–æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºå¼‚æˆ–è¿ç®—çš„å¯é€†æ€§ï¼Œæ•°æ®è¢«å®Œç¾è¿˜åŸä¸ºåŸå§‹å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆè®¾è®¡æˆå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„å•å‘è¦æ±‚"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆè®¾è®¡æˆå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„å•å‘è¦æ±‚ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼ŒæœåŠ¡å™¨å‘ç»™å®¢æˆ·ç«¯çš„æ•°æ®ä¸éœ€è¦æ©ç ã€‚è¿™æ˜¯åŸºäºä¸€ä¸ªåŠ¡å®çš„ä¿¡ä»»å‡è®¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯æ˜¯æ½œåœ¨çš„ä¸å¯ä¿¡æº&lt;/strong&gt;ï¼šåè®®å‡è®¾æœåŠ¡å™¨æ˜¯å¯ä¿¡çš„ã€å®ç°äº†æ­£ç¡® WebSocket åè®®çš„ç«¯ç‚¹ã€‚è€Œå®¢æˆ·ç«¯ï¼ˆå°¤å…¶æ˜¯æµè§ˆå™¨ä¸­çš„ç½‘é¡µï¼‰å¯èƒ½è¿è¡Œç€æ¥è‡ªä¸åŒåŸŸã€ä¸å—æ§çš„ä»£ç ã€‚å¼ºåˆ¶å®¢æˆ·ç«¯æ©ç å¯ä»¥é˜²æ­¢æ¶æ„è„šæœ¬é€šè¿‡ WebSocket è¿æ¥å‘é€ç²¾å¿ƒæ„é€ çš„ã€å¯èƒ½å±å®³ä¸­é—´ç½‘ç»œè®¾å¤‡çš„æ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨æ˜¯å¯ä¿¡çš„&lt;/strong&gt;ï¼šæœåŠ¡å™¨ç«¯ç¯å¢ƒé€šå¸¸æ˜¯å—æ§çš„ï¼Œç”±æœåŠ¡æä¾›å•†ç»´æŠ¤ã€‚å› æ­¤ï¼Œä»æœåŠ¡å™¨å‘å‡ºçš„æ•°æ®è¢«è®¤ä¸ºæ˜¯ç›¸å¯¹å®‰å…¨çš„ï¼Œä¸éœ€è¦é¢å¤–çš„æ©ç å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸ç°ä»£ç½‘ç»œç¯å¢ƒçš„å…³è”"&gt;ğŸ”„ ä¸ç°ä»£ç½‘ç»œç¯å¢ƒçš„å…³è”
&lt;/h3&gt;&lt;p&gt;éšç€æ—¶é—´æ¨ç§»ï¼Œå¤§å¤šæ•°è€æ—§çš„ä¸ç¬¦åˆæ ‡å‡†çš„ä»£ç†æœåŠ¡å™¨å·²è¢«æ·˜æ±°ã€‚ç°ä»£çš„ç½‘ç»œä¸­é—´è®¾å¤‡ï¼ˆå¦‚åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡å™¨ï¼‰å¤§å¤šèƒ½æ­£ç¡®è¯†åˆ«å’Œå¤„ç† WebSocket åè®®ã€‚å› æ­¤ï¼Œ&lt;code&gt;Mask-Key&lt;/code&gt;é˜²å¾¡çš„ç‰¹å®šå†å²é£é™©åœ¨ä»Šå¤©å·²æ˜¾è‘—é™ä½ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œ&lt;code&gt;Mask-Key&lt;/code&gt;æœºåˆ¶ä½œä¸º WebSocket RFC 6455 æ ‡å‡†çš„ä¸€éƒ¨åˆ†è¢«ä¿ç•™ä¸‹æ¥ï¼Œä¸»è¦å‡ºäº&lt;strong&gt;å‘åå…¼å®¹æ€§&lt;/strong&gt;çš„è€ƒè™‘ã€‚ç§»é™¤å®ƒä¼šç ´åä¸ç°æœ‰åˆæ³•å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„äº’æ“ä½œæ€§ã€‚åŒæ—¶ï¼Œå®ƒä»ç„¶æä¾›äº†ä¸€å±‚åŸºç¡€çš„å®‰å…¨é˜²æŠ¤ï¼Œåº”å¯¹é‚£äº›å¯èƒ½ä»ç„¶å­˜åœ¨æˆ–é…ç½®ä¸å½“çš„è€æ—§è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£ WebSocket ä¸­ &lt;code&gt;Mask-Key&lt;/code&gt;çš„å­˜åœ¨æ„ä¹‰ã€‚&lt;/p&gt;
&lt;h2 id="sse"&gt;SSE
&lt;/h2&gt;&lt;p&gt;Server-Sent Events (SSE) å’Œ HTTP çš„å…³ç³»å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;strong&gt;SSE æ˜¯ä¸€ç§åŸºäº HTTP åè®®æ„å»ºçš„ã€ç”¨äºå®ç°æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å•å‘å®æ—¶é€šä¿¡çš„ Web API&lt;/strong&gt;ã€‚å®ƒä¸æ˜¯ä¸€ç§å…¨æ–°çš„åè®®ï¼Œè€Œæ˜¯å¯¹ HTTP ç‰¹æ€§çš„ä¸€ç§åˆ›æ–°è¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;HTTP&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SSE&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè®®å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºç¡€åº”ç”¨å±‚åè®®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ„å»ºäº HTTP ä¹‹ä¸Š&lt;/strong&gt; çš„æŠ€æœ¯è§„èŒƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šä¿¡æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¯·æ±‚-å“åº”&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å‘èµ·ï¼ŒæœåŠ¡å™¨å“åº”åè¿æ¥å…³é—­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨æ¨é€&lt;/strong&gt;ï¼šåŸºäº HTTP é•¿è¿æ¥ï¼ŒæœåŠ¡å™¨å¯ä¸»åŠ¨ã€è¿ç»­æ¨é€æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çŸ­æš‚ï¼ˆéæŒä¹…ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚åé€šå¸¸å…³é—­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹…ï¼ˆé•¿è¿æ¥ï¼‰&lt;/strong&gt;ï¼Œä¸€ä¸ªè¿æ¥ä¿æŒæ‰“å¼€ä»¥è¿›è¡Œå¤šæ¬¡æ¨é€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ ¼å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šæ ·ï¼ˆHTML, JSON, XML ç­‰ï¼‰ï¼Œç”± &lt;code&gt;Content-Type&lt;/code&gt;å¤´å®šä¹‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡†æ–‡æœ¬æ ¼å¼&lt;/strong&gt;ï¼Œæ¯æ¡æ¶ˆæ¯ä»¥ &lt;code&gt;data:&lt;/code&gt;ç­‰å…³é”®å­—å¼€å¤´ï¼Œä»¥ç©ºè¡Œç»“æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç½‘é¡µæµè§ˆã€API è°ƒç”¨ã€è¡¨å•æäº¤ç­‰å¸¸è§„ Web äº¤äº’&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®æ—¶é€šçŸ¥&lt;/strong&gt;ã€æ–°é—»æ¨é€ã€è‚¡ç¥¨è¡Œæƒ…ã€ç›‘æ§ä»ªè¡¨ç›˜ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶sse-å¦‚ä½•åˆ©ç”¨-http"&gt;ğŸ”— å·¥ä½œæœºåˆ¶ï¼šSSE å¦‚ä½•åˆ©ç”¨ HTTP
&lt;/h3&gt;&lt;p&gt;SSE çš„å®ç°ä¾èµ–äºå‡ ä¸ªå…³é”®çš„ HTTP ç‰¹æ€§ï¼Œå…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥å»ºç«‹&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰ä½¿ç”¨æ ‡å‡†çš„ &lt;strong&gt;HTTP GET è¯·æ±‚&lt;/strong&gt; å‘æŒ‡å®šçš„æœåŠ¡å™¨ç«¯ç‚¹å‘èµ·è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨å“åº”&lt;/strong&gt;ï¼šæœåŠ¡å™¨åœ¨å“åº”ä¸­å¿…é¡»è®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„ HTTP å¤´ï¼š&lt;code&gt;Content-Type: text/event-stream&lt;/code&gt;ã€‚è¿™ä¸ªå¤´æ˜¯ä¿¡å·çš„å¼€å…³ï¼Œå®ƒå‘ŠçŸ¥æµè§ˆå™¨åç»­çš„å“åº”ä½“ä¸æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§è¿”å›çš„å®Œæ•´æ–‡æ¡£ï¼Œè€Œæ˜¯ä¸€ä¸ªéµå¾ª SSE æ ¼å¼çš„ã€æŒç»­çš„äº‹ä»¶æµã€‚åŒæ—¶ï¼Œè¿æ¥ä¼šè¢«ä¿æŒæ‰“å¼€çŠ¶æ€ï¼ˆé€šè¿‡ &lt;code&gt;Connection: keep-alive&lt;/code&gt;ç­‰æœºåˆ¶å®ç°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¨é€&lt;/strong&gt;ï¼šé€šè¿‡è¿™ä¸ªæŒä¹…çš„ HTTP è¿æ¥ï¼ŒæœåŠ¡å™¨å¯ä»¥éµå¾ªç®€å•çš„æ–‡æœ¬æ ¼å¼ï¼ˆä¾‹å¦‚ &lt;code&gt;data: è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯\n\n&lt;/code&gt;ï¼‰å¤šæ¬¡å‘é€æ•°æ®å—ã€‚åœ¨åº•å±‚ï¼Œè¿™é€šå¸¸åˆ©ç”¨çš„æ˜¯ HTTP/1.1 çš„&lt;strong&gt;åˆ†å—ä¼ è¾“ç¼–ç &lt;/strong&gt; æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥ç»ˆæ­¢&lt;/strong&gt;ï¼šè¿æ¥ä¼šä¸€ç›´ä¿æŒï¼Œç›´åˆ°æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯ä»»ä½•ä¸€æ–¹ä¸»åŠ¨å…³é—­ï¼Œæˆ–è€…å‘ç”Ÿç½‘ç»œé”™è¯¯ã€‚å¦‚æœè¿æ¥æ„å¤–ä¸­æ–­ï¼ŒSSE å®¢æˆ·ç«¯è¿˜å…·å¤‡&lt;strong&gt;è‡ªåŠ¨é‡è¿&lt;/strong&gt;çš„æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¼˜åŠ¿ä¸å±€é™"&gt;âš–ï¸ ä¼˜åŠ¿ä¸å±€é™
&lt;/h3&gt;&lt;p&gt;äº†è§£ SSE çš„ä¼˜åŠ¿å’Œå±€é™ï¼Œèƒ½å¸®åŠ©ä½ åœ¨å…·ä½“åœºæ™¯ä¸­åšå‡ºåˆé€‚çš„æŠ€æœ¯é€‰å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SSE çš„ä¼˜åŠ¿ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•è½»é‡&lt;/strong&gt;ï¼šç”±äºåŸºäº HTTPï¼Œæ— éœ€åƒ WebSocket é‚£æ ·å¤æ‚çš„æ¡æ‰‹åè®®ï¼Œæ˜“äºå®ç°å’Œé›†æˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…ç½®è‡ªåŠ¨é‡è¿&lt;/strong&gt;ï¼šæµè§ˆå™¨æä¾›çš„ EventSource API è‡ªå¸¦è¿æ¥çŠ¶æ€ç®¡ç†å’Œé‡è¯•æœºåˆ¶ï¼Œæå‡äº†åº”ç”¨çš„å¥å£®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;ï¼šä¸éœ€è¦å®¢æˆ·ç«¯é¢‘ç¹è½®è¯¢çš„ HTTP è½®è¯¢æ–¹æ¡ˆç›¸æ¯”ï¼ŒSSE ä½¿ç”¨ä¸€ä¸ªé•¿è¿æ¥ï¼Œå¤§å¤§å‡å°‘äº†ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚å’Œå»¶è¿Ÿï¼ŒæœåŠ¡å™¨èµ„æºæ¶ˆè€—æ›´ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;SSE çš„å±€é™ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•å‘é€šä¿¡&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ä¸»è¦çš„é™åˆ¶ã€‚SSE åªæ”¯æŒæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„æ¨é€ã€‚å¦‚æœéœ€è¦åœ¨åŒä¸€ä¿¡é“è¿›è¡Œå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„é¢‘ç¹é€šä¿¡ï¼ŒWebSocket æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè®®é™åˆ¶&lt;/strong&gt;ï¼šä¼ ç»Ÿä¸Šä¸»è¦æ”¯æŒæ–‡æœ¬æ•°æ®ä¼ è¾“ã€‚è™½ç„¶å¯ä»¥ç¼–ç åå‘é€äºŒè¿›åˆ¶æ•°æ®ï¼Œä½†ä¸å¦‚ WebSocket åŸç”Ÿæ”¯æŒé«˜æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æ•°é™åˆ¶&lt;/strong&gt;ï¼šåœ¨ HTTP/1.1 ç¯å¢ƒä¸‹ï¼Œæµè§ˆå™¨å¯¹åŒä¸€åŸŸåä¸‹çš„å¹¶å‘è¿æ¥æ•°æœ‰ä¸Šé™ï¼ˆé€šå¸¸æ˜¯6ä¸ªï¼‰ï¼Œè¿™å¯èƒ½æˆä¸ºå¤æ‚åº”ç”¨çš„ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸åº”ç”¨å¯ç¤º"&gt;ğŸ’¡ æ€»ç»“ä¸åº”ç”¨å¯ç¤º
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠ SSE çœ‹ä½œæ˜¯ &lt;strong&gt;HTTP åè®®åœ¨â€œå®æ—¶æ¨é€â€è¿™ä¸€ç‰¹å®šéœ€æ±‚ä¸Šçš„åŠŸèƒ½æ‰©å±•&lt;/strong&gt;ã€‚å®ƒå·§å¦™åœ°åˆ©ç”¨äº† HTTP çš„é•¿è¿æ¥å’Œæµå¼ä¼ è¾“ç‰¹æ€§ï¼Œä¸ºéœ€è¦æœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ•°æ®çš„åœºæ™¯æä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€ç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå½“ä½ éœ€è¦å®ç°æœåŠ¡ç«¯ä¸»å¯¼çš„å®æ—¶æ›´æ–°åŠŸèƒ½æ—¶ï¼ˆå¦‚æ–°é—»æ¨é€ã€å®æ—¶çŠ¶æ€æ˜¾ç¤ºï¼‰ï¼ŒSSE æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—è€ƒè™‘çš„è½»é‡çº§æ–¹æ¡ˆã€‚è€Œåœ¨éœ€è¦å…¨åŒå·¥ã€é«˜é¢‘äº¤äº’çš„åœºæ™¯ï¼ˆå¦‚åœ¨çº¿æ¸¸æˆã€èŠå¤©å®¤ï¼‰ï¼ŒWebSocket åˆ™æ›´å…·ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ SSE å’Œ HTTP çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹ SSE çš„å…·ä½“å®ç°ä»£ç æˆ–ä¸å…¶ä»–å®æ—¶æŠ€æœ¯çš„å¯¹æ¯”æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="spring-webflux"&gt;Spring WebFlux
&lt;/h2&gt;&lt;p&gt;Spring WebFlux &lt;strong&gt;ä¸æ˜¯&lt;/strong&gt;å»ºç«‹åœ¨SSEï¼ˆServer-Sent Eventsï¼‰åŸºç¡€ä¸Šçš„ã€‚æ°æ°ç›¸åï¼ŒSSEæ˜¯Spring WebFluxæ¡†æ¶æ‰€æ”¯æŒçš„&lt;strong&gt;ä¼—å¤šé€šä¿¡åè®®å’Œåœºæ™¯ä¹‹ä¸€&lt;/strong&gt;ã€‚Spring WebFluxæ˜¯ä¸€ä¸ªæ›´ä¸ºåº•å±‚çš„ã€ç”¨äºæ„å»ºå“åº”å¼Webåº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼Œè€ŒSSEæ˜¯å…¶ä¸Šå±‚ä¸€ä¸ªå…·ä½“çš„åº”ç”¨ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒå…³ç³»ä¸åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Spring WebFlux&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SSE (Server-Sent Events)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;å“åº”å¼Webæ¡†æ¶&lt;/strong&gt;ï¼Œæä¾›å¼‚æ­¥éé˜»å¡çš„ç¼–ç¨‹æ¨¡å‹ã€‚&lt;/td&gt;
&lt;td&gt;ä¸€ç§åŸºäºHTTPçš„&lt;strong&gt;æœåŠ¡å™¨æ¨é€æŠ€æœ¯&lt;/strong&gt;æˆ–&lt;strong&gt;åè®®è§„èŒƒ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§’è‰²&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®¹å™¨å’ŒåŸºç¡€æ¶æ„&lt;/strong&gt;ï¼Œæä¾›å¤„ç†è¯·æ±‚å’Œå“åº”æ•°æ®æµçš„èƒ½åŠ›ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½ç‰¹æ€§&lt;/strong&gt;ï¼Œæ˜¯WebFluxå¯ä»¥å®ç°çš„ä¸€ç§å…·ä½“æœåŠ¡å½¢å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šä¿¡æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒå¤šç§æ¨¡å¼ï¼ŒåŒ…æ‹¬è¯·æ±‚-å“åº”ã€åŒå‘æµï¼ˆå¦‚WebSocketï¼‰ä»¥åŠ&lt;strong&gt;æœåŠ¡å™¨æ¨é€ï¼ˆå¦‚SSEï¼‰&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•å‘é€šä¿¡&lt;/strong&gt;ï¼Œä»…æ”¯æŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„æ¨é€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè®®åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒå¤šç§åº•å±‚åè®®ï¼ˆå¦‚HTTP/1.1, HTTP/2, WebSocketï¼‰ï¼Œé»˜è®¤ä½¿ç”¨NettyæœåŠ¡å™¨ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸¥æ ¼åŸºäºHTTPåè®®&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æå‡åº”ç”¨åœ¨&lt;strong&gt;é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å¯ä¼¸ç¼©æ€§å’Œèµ„æºåˆ©ç”¨ç‡&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;å®ç°&lt;strong&gt;è½»é‡çº§çš„æœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„å®æ—¶æ•°æ®æ¨é€&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æŠ€æœ¯å…³ç³»webflux-å¦‚ä½•æ”¯æŒ-sse"&gt;ğŸ”„ æŠ€æœ¯å…³ç³»ï¼šWebFlux å¦‚ä½•æ”¯æŒ SSE
&lt;/h3&gt;&lt;p&gt;Spring WebFlux çš„æ ¸å¿ƒæ˜¯åŸºäº &lt;strong&gt;Reactor é¡¹ç›®&lt;/strong&gt;ï¼ˆç‰¹åˆ«æ˜¯ &lt;code&gt;Flux&lt;/code&gt;å’Œ &lt;code&gt;Mono&lt;/code&gt;è¿™ä¸¤ä¸ªå“åº”å¼æµç±»å‹ï¼‰å’Œé»˜è®¤çš„ &lt;strong&gt;Netty&lt;/strong&gt; éé˜»å¡I/OæœåŠ¡å™¨æ„å»ºçš„å¼‚æ­¥ã€éé˜»å¡è¿è¡Œæ—¶ç¯å¢ƒ ã€‚è¿™ç§æ¶æ„ä½¿å…¶å¤©ç”Ÿå°±éå¸¸é€‚åˆå¤„ç†åƒSSEè¿™æ ·éœ€è¦é•¿æ—¶é—´ä¿æŒè¿æ¥å¹¶æŒç»­æ¨é€æ•°æ®æµçš„åœºæ™¯ ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ åœ¨Spring WebFluxä¸­å®ç°ä¸€ä¸ªSSEæ¥å£æ—¶ï¼Œä½ é€šå¸¸ä¼šå®šä¹‰ä¸€ä¸ªè¿”å› &lt;code&gt;Flux&amp;lt;ServerSentEvent&amp;lt;T&amp;gt;&amp;gt;&lt;/code&gt;ç±»å‹çš„æ–¹æ³•ï¼Œå¹¶è®¾ç½® &lt;code&gt;produces = MediaType.TEXT_EVENT_STREAM_VALUE&lt;/code&gt;ã€‚å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æµåˆ›å»º&lt;/strong&gt;ï¼šæ§åˆ¶å™¨æ–¹æ³•è¿”å›ä¸€ä¸ª &lt;code&gt;Flux&lt;/code&gt;æµï¼Œè¿™ä¸ªæµä¼šæŒç»­ç”Ÿæˆæ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;Flux.interval(Duration.ofSeconds(1))&lt;/code&gt;æ¯ç§’äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè®®é€‚é…&lt;/strong&gt;ï¼šSpring WebFlux æ¡†æ¶ä¼š&lt;strong&gt;æ¥ç®¡&lt;/strong&gt;è¿™ä¸ª &lt;code&gt;Flux&lt;/code&gt;æµï¼Œè‡ªåŠ¨å°†å…¶äº§ç”Ÿçš„æ•°æ®&lt;strong&gt;æŒ‰ç…§SSEåè®®è¦æ±‚çš„æ–‡æœ¬æ ¼å¼è¿›è¡Œå°è£…&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œåœ¨æ¯ä¸ªæ•°æ®å—å‰åŠ ä¸Š &lt;code&gt;data:&lt;/code&gt;å‰ç¼€ï¼Œå¹¶ä»¥ä¸¤ä¸ªæ¢è¡Œç¬¦ &lt;code&gt;\n\n&lt;/code&gt;ç»“å°¾ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥ç®¡ç†&lt;/strong&gt;ï¼šæ¡†æ¶åº•å±‚é€šè¿‡Nettyç»´æŠ¤ä¸€ä¸ªHTTPé•¿è¿æ¥ï¼Œå¹¶ä»¥éé˜»å¡çš„æ–¹å¼å°†æ ¼å¼åŒ–çš„SSEäº‹ä»¶æµæ¨é€ç»™å®¢æˆ·ç«¯ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;SSEè§„å®šäº†â€œæ¨é€ä»€ä¹ˆâ€å’Œâ€œå¦‚ä½•æ¨é€â€çš„æ ¼å¼ï¼Œè€ŒSpring WebFluxæä¾›äº†â€œèƒ½å¤Ÿé«˜æ•ˆã€ç¨³å®šåœ°è¿›è¡Œæ¨é€â€çš„åº•å±‚å‘åŠ¨æœºå’Œæµæ°´çº¿&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä½•é€‰æ‹©-spring-webflux-å®ç°-sse"&gt;ğŸ’¡ ä¸ºä½•é€‰æ‹© Spring WebFlux å®ç° SSEï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨Springç”Ÿæ€ä¸­ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„Spring MVCï¼ˆé€šè¿‡ &lt;code&gt;SseEmitter&lt;/code&gt;ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Spring WebFluxæ¥å®ç°SSEã€‚ä½†åè€…åœ¨å®ç°SSEæ—¶å…·æœ‰å¤©ç„¶ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ•ˆç‡é«˜&lt;/strong&gt;ï¼šWebFluxçš„å¼‚æ­¥éé˜»å¡æ¨¡å‹æ„å‘³ç€å®ƒå¯ä»¥ä½¿ç”¨å°‘é‡å›ºå®šçº¿ç¨‹å¤„ç†å¤§é‡å¹¶å‘çš„SSEè¿æ¥ï¼Œéå¸¸é€‚åˆéœ€è¦åŒæ—¶å‘æˆåƒä¸Šä¸‡ç”¨æˆ·æ¨é€æ¶ˆæ¯çš„é«˜è´Ÿè½½åœºæ™¯ ã€‚è€ŒåŸºäºServletçš„é˜»å¡I/Oæ¨¡å‹ï¼Œæ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªçº¿ç¨‹ç»´æŠ¤ï¼Œèµ„æºæ¶ˆè€—æ›´å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å£°æ˜å¼æµå¤„ç†&lt;/strong&gt;ï¼šé€šè¿‡Reactoræä¾›çš„ä¸°å¯Œæ“ä½œç¬¦ï¼ˆå¦‚ &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;zip&lt;/code&gt;ç­‰ï¼‰ï¼Œä½ å¯ä»¥ä»¥å£°æ˜å¼çš„ã€å‡½æ•°å¼çš„æ–¹å¼è½»æ¾åœ°å¯¹æ•°æ®æµè¿›è¡Œè½¬æ¢ã€ç»„åˆå’ŒèƒŒå‹æ§åˆ¶ï¼Œä»£ç éå¸¸ç®€æ´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ç¼é›†æˆ&lt;/strong&gt;ï¼šå¦‚æœä½ çš„åº”ç”¨æœ¬èº«å°±æ˜¯åŸºäºå“åº”å¼æŠ€æœ¯æ ˆæ„å»ºçš„ï¼ˆä¾‹å¦‚ä½¿ç”¨å“åº”å¼çš„Spring Dataè®¿é—®æ•°æ®åº“ï¼‰ï¼Œé‚£ä¹ˆç”¨WebFluxå®ç°SSEå¯ä»¥å½¢æˆç«¯åˆ°ç«¯çš„éé˜»å¡æ•°æ®æµï¼Œæ€§èƒ½æ›´ä½³ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒSpring WebFluxå’ŒSSEçš„å…³ç³»æ˜¯&lt;strong&gt;åŸºç¡€æ¡†æ¶ä¸ä¸Šå±‚åº”ç”¨&lt;/strong&gt;çš„å…³ç³»ã€‚Spring WebFluxæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€é€šç”¨çš„å“åº”å¼Webæ¡†æ¶ï¼ŒSSEåªæ˜¯å®ƒèƒ½å¤Ÿä¼˜é›…æ”¯æŒçš„ä¼—å¤šå®æ—¶é€šä¿¡æ–¹æ¡ˆä¸­çš„ä¸€ç§ã€‚é€‰æ‹©WebFluxæ¥å®ç°SSEï¼Œå°¤å…¶é€‚åˆé‚£äº›å¯¹&lt;strong&gt;é«˜å¹¶å‘ã€ä½èµ„æºæ¶ˆè€—å’Œæœ‰å¤æ‚æ•°æ®æµå¤„ç†éœ€æ±‚&lt;/strong&gt;çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹å¦‚ä½•åœ¨WebFluxä¸­å…·ä½“ç¼–ç å®ç°SSEåŠŸèƒ½ï¼Œæˆ–è€…å®ƒå’ŒWebSocketç­‰å…¶ä»–å®æ—¶æŠ€æœ¯çš„å¯¹æ¯”æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è·¯å¾„-mtu"&gt;è·¯å¾„ MTU
&lt;/h2&gt;&lt;p&gt;ã€‚è·¯å¾„MTUå‘ç°ï¼ˆPath MTU Discoveryï¼Œç®€ç§°PMTUDï¼‰æ˜¯ä¸€ç§ç”¨äºåŠ¨æ€æ¢æµ‹ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºæ•´æ¡ç½‘ç»œè·¯å¾„ä¸Šæ‰€èƒ½ä¼ è¾“çš„æœ€å¤§æ•°æ®åŒ…å¤§å°çš„æŠ€æœ¯ã€‚è¿™ä¸ªâ€œæœ€å¤§æ•°æ®åŒ…å¤§å°â€å°±æ˜¯&lt;strong&gt;è·¯å¾„MTU&lt;/strong&gt;ï¼Œå®ƒç­‰äºè·¯å¾„ä¸Šæ‰€æœ‰é“¾è·¯MTUä¸­çš„æœ€å°å€¼ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œåŸç†"&gt;ğŸ” å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;è·¯å¾„MTUå‘ç°çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡â€œè¯•æ¢-åé¦ˆ-è°ƒæ•´â€çš„è¿‡ç¨‹æ¥æ‰¾åˆ°æœ€ä¼˜çš„æ•°æ®åŒ…å¤§å°ã€‚å…¶å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹å‘é€&lt;/strong&gt;ï¼šæºä¸»æœºé¦–å…ˆå‡è®¾è·¯å¾„MTUå°±æ˜¯å…¶è‡ªèº«ç½‘ç»œæ¥å£çš„MTUï¼ˆä¾‹å¦‚å¸¸è§çš„1500å­—èŠ‚ï¼‰ï¼Œå¹¶å‘é€ä¸€ä¸ªè®¾ç½®äº†â€œä¸åˆ†ç‰‡â€ï¼ˆDFï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­é—´èŠ‚ç‚¹æ£€æŸ¥&lt;/strong&gt;ï¼šå½“è¿™ä¸ªæ•°æ®åŒ…åˆ°è¾¾è·¯å¾„ä¸ŠæŸä¸ªMTUå°äºåŒ…å¤§å°çš„è·¯ç”±å™¨æ—¶ï¼Œè¯¥è·¯ç”±å™¨ä¼šä¸¢å¼ƒè¿™ä¸ªè¿‡å¤§çš„åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›é”™è¯¯ä¿¡æ¯&lt;/strong&gt;ï¼šåŒæ—¶ï¼Œè¯¥è·¯ç”±å™¨ä¼šå‘æºä¸»æœºè¿”å›ä¸€ä¸ªICMPé”™è¯¯æ¶ˆæ¯ï¼ˆåœ¨IPv4ä¸­ä¸ºâ€œéœ€è¦åˆ†ç‰‡â€æ¶ˆæ¯ï¼Œåœ¨IPv6ä¸­ä¸ºâ€œPacket Too Bigâ€æ¶ˆæ¯ï¼‰ã€‚è¿™ä¸ªæ¶ˆæ¯ä¸­ä¼šåŒ…å«å®ƒæ‰€åœ¨é“¾è·¯çš„MTUå€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»æœºè°ƒæ•´&lt;/strong&gt;ï¼šæºä¸»æœºæ”¶åˆ°è¿™ä¸ªICMPæ¶ˆæ¯åï¼Œå°±çŸ¥é“äº†è·¯å¾„ä¸Šå­˜åœ¨ä¸€ä¸ªæ›´å°çš„â€œç“¶é¢ˆâ€ï¼Œäºæ˜¯å®ƒä¼šé™ä½åç»­å‘é€æ•°æ®åŒ…çš„å¤§å°ï¼Œä½¿ç”¨è¿™ä¸ªæ–°è·çŸ¥çš„ã€æ›´å°çš„MTUå€¼é‡æ–°å‘é€æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯å¾€å¤&lt;/strong&gt;ï¼šè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šé‡å¤å¤šæ¬¡ï¼Œç›´åˆ°æ•°æ®åŒ…èƒ½å¤Ÿé¡ºåˆ©åˆ°è¾¾ç›®çš„åœ°ã€‚æ­¤æ—¶ï¼Œæºä¸»æœºæœ€ç»ˆç¡®è®¤äº†å½“å‰è·¯å¾„çš„MTUã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£è¿™ä¸€è¿‡ç¨‹ï¼Œä¸‹å›¾å±•ç¤ºäº†è·¯å¾„MTUå‘ç°çš„åŠ¨æ€æ¢æµ‹æœºåˆ¶ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æºä¸»æœºå‘é€DFæ•°æ®åŒ…] --&amp;gt; B{ä¸­é—´è·¯ç”±å™¨æ£€æŸ¥}
B --&amp;gt;|åŒ…å¤§å° &amp;gt; è·¯ç”±å™¨MTU| C[è·¯ç”±å™¨ä¸¢å¼ƒæ•°æ®åŒ…&amp;lt;br&amp;gt;å¹¶è¿”å›ICMPé”™è¯¯æ¶ˆæ¯]
C --&amp;gt; D[æºä¸»æœºæ ¹æ®ICMPæ¶ˆæ¯&amp;lt;br&amp;gt;ä¸­çš„MTUå€¼å‡å°åŒ…å¤§å°]
D --&amp;gt; A
B --&amp;gt;|åŒ…å¤§å° â‰¤ è·¯ç”±å™¨MTU| E[æ•°æ®åŒ…é¡ºåˆ©è½¬å‘]
E --&amp;gt; F{æ˜¯å¦åˆ°è¾¾ç›®çš„ä¸»æœº?}
F --&amp;gt;|å¦| B
F --&amp;gt;|æ˜¯| G[è·¯å¾„MTUå‘ç°æˆåŠŸ&amp;lt;br&amp;gt;ç¡®è®¤å½“å‰è·¯å¾„MTU]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ipv4-ä¸-ipv6-çš„å®ç°å·®å¼‚"&gt;âš–ï¸ IPv4 ä¸ IPv6 çš„å®ç°å·®å¼‚
&lt;/h3&gt;&lt;p&gt;è·¯å¾„MTUå‘ç°åœ¨IPv4å’ŒIPv6ç¯å¢ƒä¸­çš„å®ç°æœ‰æ˜¾è‘—ä¸åŒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;IPv4&lt;/th&gt;
&lt;th&gt;IPv6&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†ç‰‡è´£ä»»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­é—´è·¯ç”±å™¨&lt;strong&gt;å¯ä»¥&lt;/strong&gt;è¿›è¡Œåˆ†ç‰‡&lt;/td&gt;
&lt;td&gt;ä¸­é—´è·¯ç”±å™¨&lt;strong&gt;ç¦æ­¢&lt;/strong&gt;åˆ†ç‰‡ï¼Œåˆ†ç‰‡ä»…åœ¨æºèŠ‚ç‚¹è¿›è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾é è®¾ç½®IPå¤´ä¸­çš„ &lt;strong&gt;DFï¼ˆä¸åˆ†ç‰‡ï¼‰&lt;/strong&gt; æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;åœ¨IPv6ä¸­ï¼Œä»»ä½•è¶…è¿‡é“¾è·¯MTUçš„åŒ…éƒ½ä¼šè¢«ç›´æ¥ä¸¢å¼ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ICMPæ¶ˆæ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›â€œéœ€è¦åˆ†ç‰‡â€ï¼ˆFragmentation Neededï¼‰æ¶ˆæ¯&lt;/td&gt;
&lt;td&gt;è¿”å›â€œæ•°æ®åŒ…è¿‡å¤§â€ï¼ˆPacket Too Bigï¼‰æ¶ˆæ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ­£å› ä¸ºIPv6ç½‘ç»œä¸­çš„ä¸­é—´è®¾å¤‡ä¸å¯¹æŠ¥æ–‡è¿›è¡Œåˆ†ç‰‡ï¼Œè·¯å¾„MTUå‘ç°æœºåˆ¶å¯¹äºIPv6æ¥è¯´å°±æ›´ä¸ºå…³é”®å’Œå¿…è¦ã€‚&lt;/p&gt;
&lt;h3 id="-æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;âš ï¸ æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ç½‘ç»œä¸­ï¼Œè·¯å¾„MTUå‘ç°æœºåˆ¶æœ‰æ—¶ä¼šé‡åˆ°é—®é¢˜ã€‚æœ€å¸¸è§çš„æ˜¯ **â€œICMPé»‘æ´â€**é—®é¢˜ï¼šå¦‚æœè·¯å¾„ä¸Šçš„æŸäº›ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚é˜²ç«å¢™ï¼‰å‡ºäºå®‰å…¨è€ƒè™‘é˜»æŒ¡äº†æ‰€æœ‰çš„ICMPæ¶ˆæ¯ï¼Œé‚£ä¹ˆåŒ…å«MTUä¿¡æ¯çš„é”™è¯¯æŠ¥æ–‡å°±æ— æ³•ä¼ å›æºä¸»æœºã€‚è¿™ä¼šå¯¼è‡´æºä¸»æœºä¸æ–­é‡ä¼ å¤§æ•°æ®åŒ…åˆè¢«ä¸¢å¼ƒï¼Œè¿æ¥å°±æ­¤â€œæŒ‚èµ·â€ã€‚&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œä¸»è¦çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åè®®å±‚é€‚é…&lt;/strong&gt;ï¼šå¦‚TCPåè®®ï¼Œå¯ä»¥é€šè¿‡åœ¨è¿æ¥å»ºç«‹æ—¶åå•†ä¸€ä¸ªè¾ƒå°çš„&lt;strong&gt;æœ€å¤§æŠ¥æ–‡æ®µå¤§å°ï¼ˆMSSï¼‰&lt;/strong&gt; æ¥é¿å…åˆ†ç‰‡ï¼Œè¿™è¢«ç§°ä¸ºMSSé’³åˆ¶ï¼ˆMSS Clampingï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨ç­–ç•¥&lt;/strong&gt;ï¼šå¯¹äºUDPç­‰åè®®ï¼Œåº”ç”¨ç¨‹åºè‡ªèº«éœ€è¦è´Ÿè´£æ§åˆ¶æ•°æ®åŒ…å¤§å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é…ç½®ä¸æµ‹è¯•"&gt;ğŸ’¡ é…ç½®ä¸æµ‹è¯•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿæ”¯æŒ&lt;/strong&gt;ï¼šç°ä»£æ“ä½œç³»ç»Ÿé€šå¸¸é»˜è®¤å¯ç”¨è·¯å¾„MTUå‘ç°åŠŸèƒ½ã€‚ä½ å¯ä»¥åœ¨Linuxä¸­ä½¿ç”¨ &lt;code&gt;sysctl&lt;/code&gt;å‘½ä»¤ï¼Œæˆ–åœ¨Windowsä¸­é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨æ¥æ£€æŸ¥æˆ–è°ƒæ•´ç›¸å…³è®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨æµ‹è¯•&lt;/strong&gt;ï¼šä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;ping&lt;/code&gt;å‘½ä»¤å¹¶é…åˆ &lt;code&gt;-f&lt;/code&gt;ï¼ˆç¦æ­¢åˆ†ç‰‡ï¼‰å’Œ &lt;code&gt;-l&lt;/code&gt;ï¼ˆæŒ‡å®šæ•°æ®åŒ…å¤§å°ï¼‰å‚æ•°æ¥æ‰‹åŠ¨æµ‹è¯•åˆ°è¾¾ç‰¹å®šç›®çš„åœ°çš„è·¯å¾„MTUã€‚ä¾‹å¦‚ï¼Œé€šè¿‡é€æ­¥å¢å¤§åŒ…å¤§å°ï¼Œæ‰¾åˆ°ä¸è¢«ä¸¢å¼ƒçš„æœ€å¤§å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è·¯å¾„MTUå‘ç°æ˜¯ä¸€ç§é‡è¦çš„ç½‘ç»œä¼˜åŒ–æœºåˆ¶ï¼Œå®ƒé€šè¿‡åŠ¨æ€æ¢æµ‹è·¯å¾„ä¸Šçš„æœ€å°MTUï¼Œæœ‰æ•ˆé¿å…äº†æ•°æ®åŒ…åˆ†ç‰‡å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œç¡®ä¿äº†æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£è·¯å¾„MTUå‘ç°ã€‚å¦‚æœæ‚¨å¯¹ç‰¹å®šåè®®ï¼ˆå¦‚TCPï¼‰çš„MSSè°ƒæ•´æˆ–å…·ä½“çš„ç½‘ç»œæµ‹è¯•å‘½ä»¤æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­ä¸ºæ‚¨è§£ç­”ã€‚&lt;/p&gt;
&lt;h2 id="ipv4--ipv6"&gt;ipv4 &amp;amp; ipv6
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://lizhicdn.search.qq.com/cdn/ybimages/9002/9002_53a8cd9705c5222241c393024f4c8c2a_21/9962c5b970a23597517a97d7a02772c5.jpg?imageMogr2/format/jpg"
loading="lazy"
alt="img"
&gt;&lt;/p&gt;
&lt;p&gt;IPv4å’ŒIPv6çš„å¤´éƒ¨è®¾è®¡ä½“ç°äº†äº’è”ç½‘åè®®åœ¨ä¸åŒæ—¶ä»£èƒŒæ™¯ä¸‹çš„æ ¸å¿ƒæ€æƒ³ã€‚IPv4å¤´éƒ¨å¤æ‚ä¸”çµæ´»ï¼Œè€ŒIPv6å¤´éƒ¨åˆ™è¿½æ±‚ç®€æ´å’Œé«˜æ•ˆï¼Œä»¥é€‚åº”ç°ä»£ç½‘ç»œçš„éœ€æ±‚ã€‚ä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…åœ¨å…³é”®å­—æ®µä¸Šçš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å¯¹æ¯”ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IPv4 å¤´éƒ¨&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IPv6 å¤´éƒ¨&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•´ä½“ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯å˜é•¿åº¦ (20-60å­—èŠ‚)ï¼Œç»“æ„å¤æ‚&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ (40å­—èŠ‚)ï¼Œç»“æ„ç²¾ç®€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€é•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;32ä½&lt;/td&gt;
&lt;td&gt;128ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†ç‰‡ç›¸å…³å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ…å«æ ‡è¯†(Identification)ã€æ ‡å¿—(Flags)ã€ç‰‡åç§»(Fragment Offset)&lt;/td&gt;
&lt;td&gt;å·²ç§»é™¤ã€‚åˆ†ç‰‡åŠŸèƒ½é€šè¿‡&lt;strong&gt;æ‰©å±•æŠ¥å¤´&lt;/strong&gt;å®ç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¡éªŒå’Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒ…å«å¤´éƒ¨æ ¡éªŒå’Œ(Header Checksum)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å–æ¶ˆ&lt;/strong&gt;è¯¥å­—æ®µï¼Œä¾èµ–ä¸Šå±‚åè®®ä¿éšœæ•°æ®å®Œæ•´æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯é€‰å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é›†æˆåœ¨ä¸»å¤´éƒ¨ä¸­çš„**é€‰é¡¹(Options)**å­—æ®µ&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;strong&gt;â€œä¸‹ä¸€æŠ¥å¤´â€&lt;/strong&gt; é“¾å¼æ‹¼æ¥&lt;strong&gt;æ‰©å±•æŠ¥å¤´&lt;/strong&gt;å®ç°ï¼Œæ›´çµæ´»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;QoSæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡ç±»å‹(Type of Service)å­—æ®µ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æµé‡ç±»åˆ«(Traffic Class)&lt;/strong&gt; å’Œæ–°å¢çš„ &lt;strong&gt;æµæ ‡ç­¾(Flow Label)&lt;/strong&gt; å­—æ®µï¼Œå¢å¼ºäº†å¯¹æ•°æ®æµçš„è¯†åˆ«èƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå­˜æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿå­˜æ—¶é—´(TTL)&lt;/td&gt;
&lt;td&gt;è·³æ•°é™åˆ¶(Hop Limit)ï¼ŒåŠŸèƒ½ç›¸åŒä½†åç§°æ›´è´´åˆ‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸Šå±‚åè®®æ ‡è¯†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åè®®(Protocol)å­—æ®µ&lt;/td&gt;
&lt;td&gt;ä¸‹ä¸€æŠ¥å¤´(Next Header)å­—æ®µï¼ŒåŒæ—¶ç”¨äºæŒ‡ç¤ºæ‰©å±•æŠ¥å¤´æˆ–ä¸Šå±‚åè®®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è®¾è®¡å“²å­¦ä¸æ ¸å¿ƒå·®å¼‚è§£æ"&gt;ğŸ’¡ è®¾è®¡å“²å­¦ä¸æ ¸å¿ƒå·®å¼‚è§£æ
&lt;/h3&gt;&lt;h4 id="ipv4çµæ´»ä½†å¤æ‚"&gt;&lt;strong&gt;IPv4ï¼šçµæ´»ä½†å¤æ‚&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;IPv4è¯ç”Ÿäºç½‘ç»œç¯å¢ƒç›¸å¯¹ç®€å•ã€å¯¹å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„å¹´ä»£ã€‚å…¶å¤´éƒ¨çš„è®¸å¤šè®¾è®¡å¸¦æ¥äº†çµæ´»æ€§ï¼Œä½†ä¹Ÿå¢åŠ äº†å¤„ç†å’Œè½¬å‘çš„è´Ÿæ‹…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç‰‡æœºåˆ¶&lt;/strong&gt;ï¼šç”±äºæ—©æœŸç½‘ç»œè®¾å¤‡MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰å·®å¼‚å¾ˆå¤§ï¼ŒIPv4å°†åˆ†ç‰‡åŠŸèƒ½å†…ç½®äºä¸»å¤´éƒ¨ã€‚è·¯ç”±å™¨éœ€è¦è´Ÿè´£æ£€æŸ¥æ•°æ®åŒ…æ˜¯å¦è¶…è¿‡å‡ºæ¥å£MTUå¹¶è¿›è¡Œåˆ†ç‰‡ï¼Œè¿™æ¶ˆè€—äº†è·¯ç”±å™¨å®è´µçš„å¤„ç†èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤´éƒ¨æ ¡éªŒ&lt;/strong&gt;ï¼šIPv4å¤´éƒ¨åŒ…å«æ ¡éªŒå’Œï¼Œè·¯ç”±å™¨æ¯ç»è¿‡ä¸€è·³éƒ½éœ€è¦é‡æ–°è®¡ç®—è¯¥å€¼ï¼Œä»¥é˜²å¤´éƒ¨åœ¨ä¼ è¾“ä¸­æŸåã€‚è¿™åœ¨å½“æ—¶æ˜¯å¿…è¦çš„ï¼Œä½†éšç€é“¾è·¯å±‚å¯é æ€§çš„æå‡ï¼Œå®ƒæˆäº†å½±å“è½¬å‘æ•ˆç‡çš„ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é€‰é€‰é¡¹&lt;/strong&gt;ï¼šé€‰é¡¹å­—æ®µä¸ä¸»å¤´éƒ¨æ··æ‚åœ¨ä¸€èµ·ï¼Œæ„å‘³ç€è·¯ç”±å™¨å¤„ç†æ¯ä¸ªåŒ…æ—¶éƒ½å¿…é¡»æ£€æŸ¥æ˜¯å¦æœ‰é€‰é¡¹ï¼Œè¿™é™ä½äº†è½¬å‘æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ipv6ç®€æ´ä¸”é«˜æ•ˆ"&gt;&lt;strong&gt;IPv6ï¼šç®€æ´ä¸”é«˜æ•ˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;IPv6çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯æé«˜è·¯ç”±å™¨çš„å¤„ç†æ•ˆç‡ï¼Œå¹¶æ›´å¥½åœ°æ”¯æŒç°ä»£åº”ç”¨ï¼ˆå¦‚å¤šåª’ä½“æµã€ç§»åŠ¨è®¾å¤‡ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å›ºå®šé•¿åº¦ä¸å–æ¶ˆå­—æ®µ&lt;/strong&gt;ï¼šå›ºå®š40å­—èŠ‚çš„å¤´éƒ¨ä½¿ç¡¬ä»¶å¤„ç†æ›´ç®€å•ã€å¿«é€Ÿã€‚å–æ¶ˆæ ¡éªŒå’Œä¸åˆ†ç‰‡å­—æ®µï¼Œæ˜¯åŸºäºâ€œç›¸ä¿¡åº•å±‚é“¾è·¯å¯é æ€§â€å’Œâ€œè·¯å¾„MTUå‘ç°â€æœºåˆ¶ï¼Œå°†å¤æ‚åŠŸèƒ½ä»æ ¸å¿ƒè·¯å¾„ä¸­ç§»å‡ºï¼Œæå¤§æå‡äº†è½¬å‘æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æŠ¥å¤´&lt;/strong&gt;ï¼šè¿™æ˜¯IPv6çš„ä¸€é¡¹é©å‘½æ€§è®¾è®¡ã€‚é€šè¿‡â€œä¸‹ä¸€æŠ¥å¤´â€å­—æ®µï¼Œå¯ä»¥åƒé“¾æ¡ä¸€æ ·è¿æ¥å¤šä¸ªä¸“ç”¨æ‰©å±•æŠ¥å¤´ï¼ˆå¦‚ç”¨äºå®‰å…¨æ€§çš„IPsecã€ç”¨äºåˆ†ç‰‡çš„åˆ†æ®µæŠ¥å¤´ç­‰ï¼‰ã€‚&lt;strong&gt;å…³é”®ä¼˜åŠ¿åœ¨äºï¼šä¸­é—´è·¯ç”±å™¨é€šå¸¸æ— éœ€å¤„ç†è¿™äº›æ‰©å±•æŠ¥å¤´ï¼ˆé€è·³é€‰é¡¹æŠ¥å¤´é™¤å¤–ï¼‰ï¼Œåªéœ€è¯»å–åŸºæœ¬å¤´éƒ¨å³å¯è¿›è¡Œè½¬å‘&lt;/strong&gt;ï¼Œå®ç°äº†åŠŸèƒ½ä¸°å¯Œæ€§ä¸è½¬å‘é«˜æ•ˆæ€§çš„ç»Ÿä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµæ ‡ç­¾&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„å­—æ®µï¼Œå…è®¸ä¸ºä¸€ç³»åˆ—ç›¸å…³çš„æ•°æ®åŒ…ï¼ˆå¦‚ä¸€ä¸ªè§†é¢‘é€šè¯çš„æ‰€æœ‰åŒ…ï¼‰æ ‡è®°åŒä¸€ä¸ªâ€œæµâ€æ ‡è¯†ã€‚ç½‘ç»œè®¾å¤‡å¯ä»¥è¯†åˆ«è¿™ä¸ªæµï¼Œå¹¶æä¾›æ›´ä¸€è‡´çš„æœåŠ¡è´¨é‡ï¼ˆå¦‚æ›´ä½çš„æŠ–åŠ¨ï¼‰ï¼Œè¿™å¯¹å®æ—¶åº”ç”¨è‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åœ°å€è¡¨ç¤ºæ³•çš„ä¸åŒ"&gt;ğŸ”„ åœ°å€è¡¨ç¤ºæ³•çš„ä¸åŒ
&lt;/h3&gt;&lt;p&gt;é™¤äº†å¤´éƒ¨ç»“æ„ï¼Œåœ°å€çš„ä¹¦å†™æ–¹å¼ä¹Ÿå®Œå…¨ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;IPv4&lt;/strong&gt;ï¼šé‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶ï¼Œå¦‚ &lt;code&gt;192.0.2.1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPv6&lt;/strong&gt;ï¼šé‡‡ç”¨å†’åˆ†åå…­è¿›åˆ¶ï¼Œå¹¶æ”¯æŒå‹ç¼©è¡¨ç¤ºï¼Œå¦‚å°† &lt;code&gt;2001:0db8:0000:0000:0000:ff00:0042:8329&lt;/code&gt;å‹ç¼©ä¸º &lt;code&gt;2001:db8::ff00:42:8329&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©æ‚¨æ›´æ·±å…¥åœ°ç†è§£IPv4å’ŒIPv6çš„è®¾è®¡å·®å¼‚ã€‚å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šåŠŸèƒ½ï¼ˆå¦‚æ‰©å±•æŠ¥å¤´çš„å¤„ç†é¡ºåºæˆ–æµæ ‡ç­¾çš„å…·ä½“åº”ç”¨ï¼‰æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="é›†çº¿å™¨"&gt;é›†çº¿å™¨
&lt;/h2&gt;&lt;p&gt;é›†çº¿å™¨ï¼ˆHubï¼‰æ˜¯æ—©æœŸå±€åŸŸç½‘ä¸­çš„é‡è¦åŸºç¡€è®¾å¤‡ï¼Œå®ƒå·¥ä½œäºOSIå‚è€ƒæ¨¡å‹çš„ç‰©ç†å±‚ï¼Œä¸»è¦åŠŸèƒ½æ˜¯å¯¹æ¥æ”¶åˆ°çš„ç”µä¿¡å·è¿›è¡Œå†ç”Ÿã€æ•´å½¢å’Œæ”¾å¤§ï¼Œä»¥æ‰©å¤§ç½‘ç»œçš„ä¼ è¾“è·ç¦»ï¼Œå¹¶å°†æ‰€æœ‰è¿æ¥åˆ°å®ƒçš„ç½‘ç»œè®¾å¤‡é›†ä¸­åœ¨ä»¥å®ƒä¸ºä¸­å¿ƒçš„èŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;
&lt;h3 id="-é›†çº¿å™¨çš„å·¥ä½œåŸç†ä¸ç‰¹ç‚¹"&gt;ğŸ”Œ é›†çº¿å™¨çš„å·¥ä½œåŸç†ä¸ç‰¹ç‚¹
&lt;/h3&gt;&lt;p&gt;é›†çº¿å™¨æ ¸å¿ƒçš„å·¥ä½œæ–¹å¼æ˜¯&lt;strong&gt;å¹¿æ’­&lt;/strong&gt;ã€‚å½“å®ƒçš„ä»»æ„ä¸€ä¸ªç«¯å£æ”¶åˆ°æ•°æ®ä¿¡å·æ—¶ï¼Œå¹¶ä¸è¯†åˆ«æ•°æ®çš„ç›®çš„åœ°å€ï¼Œè€Œæ˜¯ç®€å•åœ°å°†ä¿¡å·æ”¾å¤§åï¼Œè½¬å‘åˆ°&lt;strong&gt;æ‰€æœ‰å…¶ä»–ç«¯å£&lt;/strong&gt;ã€‚è¿™å¯¼è‡´äº†ä¸€äº›å…³é”®ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…±äº«å¸¦å®½&lt;/strong&gt;ï¼šæ‰€æœ‰è¿æ¥åˆ°åŒä¸€é›†çº¿å™¨çš„è®¾å¤‡å…±äº«æ€»çš„ç½‘ç»œå¸¦å®½ã€‚è¿æ¥è®¾å¤‡è¶Šå¤šï¼Œæ¯ä¸ªè®¾å¤‡åˆ†é…åˆ°çš„å¹³å‡å¸¦å®½å°±è¶Šå°‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠåŒå·¥é€šä¿¡&lt;/strong&gt;ï¼šåŒä¸€æ—¶åˆ»ï¼Œæ¯ä¸ªç«¯å£åªèƒ½è¿›è¡Œå•ä¸€æ“ä½œï¼ˆè¦ä¹ˆå‘é€æ•°æ®ï¼Œè¦ä¹ˆæ¥æ”¶æ•°æ®ï¼‰ï¼Œè€Œä¸èƒ½åŒæ—¶è¿›è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†²çªåŸŸ&lt;/strong&gt;ï¼šç”±äºé‡‡ç”¨å¹¿æ’­æœºåˆ¶ï¼Œå®¹æ˜“é€ æˆæ•°æ®ä¿¡å·åœ¨ä¼ è¾“ä»‹è´¨ä¸­å‘ç”Ÿç¢°æ’ï¼ˆå†²çªï¼‰ã€‚é›†çº¿å™¨ä½¿ç”¨CSMA/CDï¼ˆå¸¦å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®æŠ€æœ¯ï¼‰åè®®æ¥åº”å¯¹å†²çªï¼Œä½†è¿™ä¼šé™ä½ç½‘ç»œæ•ˆç‡ã€‚æ•´ä¸ªé›†çº¿å™¨åŠå…¶è¿æ¥çš„æ‰€æœ‰è®¾å¤‡æ„æˆä¸€ä¸ªå†²çªåŸŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„æµç¨‹å›¾ç›´è§‚å±•ç¤ºäº†é›†çº¿å™¨å¤„ç†æ•°æ®çš„å…¸å‹è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç«¯å£æ¥æ”¶æ•°æ®ä¿¡å·] --&amp;gt; B{ä¿¡å·è¡°å‡?}
B -- æ˜¯ --&amp;gt; C[ä¿¡å·æ•´å½¢æ”¾å¤§]
B -- å¦ --&amp;gt; C
C --&amp;gt; D[å‘æ‰€æœ‰ç«¯å£å¹¿æ’­æ•°æ®]
D --&amp;gt; E[å„ç«¯å£è®¾å¤‡æ¥æ”¶æ•°æ®]
E --&amp;gt; F{ç›®çš„è®¾å¤‡?}
F -- æ˜¯ --&amp;gt; G[æ¥æ”¶å¹¶å¤„ç†æ•°æ®]
F -- å¦ --&amp;gt; H[ä¸¢å¼ƒæ•°æ®åŒ…]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é›†çº¿å™¨çš„ç±»å‹"&gt;ğŸ“Š é›†çº¿å™¨çš„ç±»å‹
&lt;/h3&gt;&lt;p&gt;æ ¹æ®ä¸åŒçš„æ ‡å‡†ï¼Œé›†çº¿å™¨æœ‰å¤šç§åˆ†ç±»æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†ç±»ä¾æ®&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡å·å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— æºé›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;ä¸å¯¹ä¿¡å·åšä»»ä½•å¤„ç†ï¼Œå¯¹ä¼ è¾“è·ç¦»æ²¡æœ‰æ‰©å±•ï¼Œä¿¡å·è´¨é‡å¯èƒ½å—å½±å“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æœ‰æºé›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;èƒ½å¯¹ä¿¡å·è¿›è¡Œæ”¾å¤§å’Œå†ç”Ÿï¼Œæœ‰æ•ˆå»¶é•¿ä¼ è¾“è·ç¦»ï¼Œæ˜¯æœ€å¸¸è§çš„ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ™ºèƒ½é›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;å…·å¤‡æœ‰æºé›†çº¿å™¨åŠŸèƒ½ï¼Œè¿˜å¢åŠ äº†ç½‘ç»œç®¡ç†ã€è·¯å¾„é€‰æ‹©ç­‰æ™ºèƒ½åŠŸèƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æ„åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‹¬ç«‹å‹é›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;ç»“æ„ç®€å•ï¼Œç«¯å£æ•°å›ºå®šï¼Œé€‚ç”¨äºéå¸¸å°å‹çš„ç½‘ç»œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;å †å å¼é›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;é€šè¿‡ä¸“ç”¨ç”µç¼†å’Œç«¯å£å°†å¤šä¸ªé›†çº¿å™¨å †å ï¼Œè§†ä¸ºä¸€ä¸ªæ•´ä½“ç®¡ç†ï¼Œç”¨äºæ‰©å±•ç«¯å£æ•°é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;æ¨¡å—åŒ–é›†çº¿å™¨ï¼ˆåº•ç›˜å‹ï¼‰&lt;/td&gt;
&lt;td&gt;é‡‡ç”¨æœºç®±ç»“æ„ï¼Œå¯æ’å…¥ä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ç½‘å¡ã€è·¯ç”±æ¨¡å—ï¼‰ï¼Œç”¨äºå¤æ‚çš„ç½‘ç»œç¯å¢ƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç«¯å£é€Ÿç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10Mbpsé›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;æ—©æœŸå¸¸è§ï¼Œé€‚ç”¨äºä½æµé‡ç½‘ç»œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;100Mbpsé›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;æä¾›æ›´å¿«çš„ä¼ è¾“é€Ÿç‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;10/100Mbpsè‡ªé€‚åº”é›†çº¿å™¨&lt;/td&gt;
&lt;td&gt;èƒ½è‡ªåŠ¨æ£€æµ‹å¹¶åŒ¹é…è¿æ¥è®¾å¤‡çš„é€Ÿç‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é›†çº¿å™¨çš„ä¼˜ç¼ºç‚¹ä¸ç°çŠ¶"&gt;âš–ï¸ é›†çº¿å™¨çš„ä¼˜ç¼ºç‚¹ä¸ç°çŠ¶
&lt;/h3&gt;&lt;p&gt;é›†çº¿å™¨çš„ä¼˜ç‚¹åœ¨äº&lt;strong&gt;æˆæœ¬ä½å»‰&lt;/strong&gt;ã€&lt;strong&gt;éƒ¨ç½²ç®€å•&lt;/strong&gt;ï¼Œå¹¶ä¸”å½“ç½‘ç»œä¸­æŸä¸ªèŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶ï¼Œé€šå¸¸ä¸ä¼šå½±å“é›†çº¿å™¨ä¸Šå…¶ä»–èŠ‚ç‚¹çš„æ­£å¸¸å·¥ä½œã€‚ä½†å…¶ç¼ºç‚¹ä¹Ÿéå¸¸çªå‡ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆç‡ä½ä¸‹&lt;/strong&gt;ï¼šå¹¿æ’­æ–¹å¼å’Œå…±äº«å¸¦å®½æœºåˆ¶åœ¨ç½‘ç»œè®¾å¤‡è¾ƒå¤šæ—¶ææ˜“å¯¼è‡´æ‹¥å µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§å·®&lt;/strong&gt;ï¼šæ•°æ®åŒ…å‘æ‰€æœ‰èŠ‚ç‚¹å‘é€ï¼Œå®¹æ˜“è¢«çªƒå¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•éš”ç¦»å†²çª&lt;/strong&gt;ï¼šæ‰€æœ‰ç«¯å£å¤„äºåŒä¸€ä¸ªå†²çªåŸŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­£å› å¦‚æ­¤ï¼Œéšç€æŠ€æœ¯å‘å±•ï¼Œ&lt;strong&gt;äº¤æ¢æœºï¼ˆSwitchï¼‰å·²å‡ ä¹å®Œå…¨å–ä»£äº†é›†çº¿å™¨&lt;/strong&gt;ã€‚äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥è¯†åˆ«MACåœ°å€ï¼Œå®ç°æ•°æ®çš„æœ‰ç›®çš„è½¬å‘ï¼Œæ¯ä¸ªç«¯å£æ‹¥æœ‰ç‹¬ç«‹çš„å¸¦å®½ï¼Œå¹¶èƒ½å®ç°å…¨åŒå·¥é€šä¿¡ï¼Œä»è€Œæå¤§åœ°æå‡äº†ç½‘ç»œæ€§èƒ½å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œé›†çº¿å™¨ä½œä¸ºç½‘ç»œæŠ€æœ¯å‘å±•è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºé€šè¿‡ç®€å•çš„å¹¿æ’­åŸç†å®ç°è®¾å¤‡äº’è”ã€‚è™½ç„¶å› å…¶å›ºæœ‰ç¼ºé™·å·²æ·¡å‡ºä¸»æµåº”ç”¨ï¼Œä½†äº†è§£å…¶å·¥ä½œåŸç†æœ‰åŠ©äºç†è§£ç½‘ç»œæŠ€æœ¯çš„åŸºç¡€æ¦‚å¿µå’Œå‘å±•è„‰ç»œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©æ‚¨å…¨é¢äº†è§£é›†çº¿å™¨ã€‚å¦‚æœæ‚¨å¯¹ä¸ä¹‹ç›¸å…³çš„äº¤æ¢æœºã€è·¯ç”±å™¨ç­‰è®¾å¤‡ä¹Ÿæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è·¯ç”±å™¨"&gt;è·¯ç”±å™¨
&lt;/h2&gt;&lt;p&gt;è·¯ç”±å™¨ã€äº¤æ¢æœºå’Œé›†çº¿å™¨æ˜¯ç½‘ç»œä¸­çš„å…³é”®è®¾å¤‡ï¼Œå®ƒä»¬åœ¨OSIæ¨¡å‹çš„ä¸åŒå±‚çº§ä¸Šå·¥ä½œï¼ŒåŠŸèƒ½å„æœ‰ä¾§é‡ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥ç›´è§‚å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”"&gt;ğŸ“Š æ ¸å¿ƒç‰¹æ€§å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;é›†çº¿å™¨ (HUB)&lt;/th&gt;
&lt;th&gt;äº¤æ¢æœº (Switch)&lt;/th&gt;
&lt;th&gt;è·¯ç”±å™¨ (Router)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œå±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;OSI &lt;strong&gt;ç‰©ç†å±‚&lt;/strong&gt; (ç¬¬ä¸€å±‚)&lt;/td&gt;
&lt;td&gt;OSI &lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt; (ç¬¬äºŒå±‚)&lt;/td&gt;
&lt;td&gt;OSI &lt;strong&gt;ç½‘ç»œå±‚&lt;/strong&gt; (ç¬¬ä¸‰å±‚)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿¡å·æ”¾å¤§å’Œä¸­è½¬ï¼Œè¿æ¥è®¾å¤‡ç»„æˆå±€åŸŸç½‘&lt;/td&gt;
&lt;td&gt;åœ¨å±€åŸŸç½‘å†…è¿›è¡Œ&lt;strong&gt;é«˜é€Ÿæ•°æ®äº¤æ¢&lt;/strong&gt;ï¼Œè¿æ¥å¤šä¸ªè®¾å¤‡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥ä¸åŒçš„ç½‘ç»œ&lt;/strong&gt;ï¼ˆå¦‚å®¶åº­ç½‘ç»œå’Œäº’è”ç½‘ï¼‰ï¼Œè¿›è¡Œè·¯ç”±é€‰æ‹©å’Œå¯»å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¤„ç†å•ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç”µä¿¡å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¸§&lt;/strong&gt; (Frame) - åŸºäºMACåœ°å€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®åŒ…&lt;/strong&gt; (Packet) - åŸºäºIPåœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯»å€ä¾æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— æ™ºèƒ½å¯»å€ï¼Œçº¯ç¡¬ä»¶å¹¿æ’­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;MACåœ°å€&lt;/strong&gt;ï¼ˆç‰©ç†åœ°å€ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;IPåœ°å€&lt;/strong&gt;ï¼ˆé€»è¾‘åœ°å€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼ è¾“æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¿æ’­&lt;/strong&gt;ï¼šæ•°æ®å‘é€ç»™æ‰€æœ‰ç«¯å£&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•æ’­/å¤šæ’­&lt;/strong&gt;ï¼šé€šè¿‡MACåœ°å€è¡¨ç²¾å‡†è½¬å‘åˆ°ç›®æ ‡ç«¯å£&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·¯ç”±è½¬å‘&lt;/strong&gt;ï¼šæ ¹æ®è·¯ç”±è¡¨é€‰æ‹©æœ€ä½³è·¯å¾„è·¨ç½‘ç»œä¼ è¾“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¦å®½å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«å¸¦å®½&lt;/strong&gt;ï¼šæ‰€æœ‰ç«¯å£å…±äº«åŒä¸€å¸¦å®½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬äº«å¸¦å®½&lt;/strong&gt;ï¼šæ¯ä¸ªç«¯å£æ‹¥æœ‰ç‹¬ç«‹å¸¦å®½&lt;/td&gt;
&lt;td&gt;ç‹¬äº«å¸¦å®½ï¼Œå¹¶è´Ÿè´£ç½‘ç»œé—´æ•°æ®æµè½¬å‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼ è¾“æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠåŒå·¥&lt;/strong&gt;ï¼šåŒä¸€æ—¶åˆ»åªèƒ½æ”¶æˆ–å‘&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…¨åŒå·¥&lt;/strong&gt;ï¼šå¯åŒæ—¶è¿›è¡Œæ•°æ®çš„æ¥æ”¶å’Œå‘é€&lt;/td&gt;
&lt;td&gt;å…¨åŒå·¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ™ºèƒ½ç¨‹åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éæ™ºèƒ½è®¾å¤‡&lt;/strong&gt;ï¼šæ— æ³•å­¦ä¹ æˆ–è¿‡æ»¤æ•°æ®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ™ºèƒ½è®¾å¤‡&lt;/strong&gt;ï¼šå…·å¤‡MACåœ°å€å­¦ä¹ èƒ½åŠ›&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜æ™ºèƒ½è®¾å¤‡&lt;/strong&gt;ï¼šè¿è¡Œå¤æ‚ç®—æ³•ï¼Œå†³ç­–æœ€ä½³è·¯å¾„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†æ·±æ"&gt;ğŸ” å·¥ä½œåŸç†æ·±æ
&lt;/h3&gt;&lt;p&gt;äº†è§£è¡¨æ ¼ä¸­çš„åŸºæœ¬åŒºåˆ«åï¼Œæˆ‘ä»¬å†æ¥æ·±å…¥çœ‹çœ‹å®ƒä»¬å„è‡ªæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é›†çº¿å™¨çš„å·¥ä½œæ–¹å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é›†çº¿å™¨å°±åƒä¸€ä¸ªâ€œå¤§å–‡å­â€ã€‚å½“å®ƒä»ä¸€ä¸ªç«¯å£æ”¶åˆ°æ•°æ®ä¿¡å·æ—¶ï¼Œå¹¶ä¸å…³å¿ƒæ•°æ®è¦å‘ç»™è°ï¼Œè€Œæ˜¯ç®€å•åœ°å°†ä¿¡å·æ”¾å¤§æ•´å½¢åï¼Œ&lt;strong&gt;å‘æ‰€æœ‰å…¶ä»–ç«¯å£å¹¿æ’­&lt;/strong&gt;ã€‚è¿™å¯¼è‡´æ‰€æœ‰è¿æ¥è®¾å¤‡éƒ½èƒ½æ”¶åˆ°æ•°æ®ï¼Œä½†åªæœ‰ç›®æ ‡è®¾å¤‡ä¼šæ¥æ”¶ï¼Œå…¶ä»–è®¾å¤‡åˆ™ä¸¢å¼ƒã€‚è¿™ç§å…±äº«é€šé“çš„æ–¹å¼ææ˜“é€ æˆæ•°æ®å†²çªï¼Œæ•ˆç‡ä½ä¸‹ï¼Œè¿™ä¹Ÿæ˜¯å®ƒè¢«æ·˜æ±°çš„ä¸»è¦åŸå›  ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº¤æ¢æœºçš„å·¥ä½œæ–¹å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;äº¤æ¢æœºåˆ™æ˜¯ä¸€ä¸ªâ€œèªæ˜çš„é‚®å·®â€ã€‚å®ƒå†…éƒ¨ç»´æŠ¤ç€ä¸€å¼  &lt;strong&gt;MACåœ°å€è¡¨&lt;/strong&gt;ï¼Œè®°å½•äº†æ¯ä¸ªç«¯å£å¯¹åº”è¿æ¥ç€å“ªä¸ªMACåœ°å€çš„è®¾å¤‡ ã€‚å½“æ•°æ®å¸§åˆ°è¾¾æ—¶ï¼Œäº¤æ¢æœºä¼šæŸ¥çœ‹ç›®æ ‡MACåœ°å€ï¼Œç„¶å&lt;strong&gt;ç›´æ¥ã€ç²¾å‡†åœ°å°†æ•°æ®å¸§è½¬å‘åˆ°å¯¹åº”çš„ç«¯å£&lt;/strong&gt;ï¼Œä¸å½±å“å…¶ä»–ç«¯å£ ã€‚å¦‚æœåœ°å€è¡¨ä¸­æ‰¾ä¸åˆ°ç›®æ ‡åœ°å€ï¼Œæ‰ä¼šè¿›è¡Œä¸€æ¬¡å¹¿æ’­ï¼Œå¹¶åœ¨å¾—åˆ°å›åº”åâ€œå­¦ä¹ â€è¿™ä¸ªæ–°åœ°å€ï¼Œæ›´æ–°åœ°å€è¡¨ ã€‚è¿™ç§æ–¹å¼æå¤§åœ°æé«˜äº†å±€åŸŸç½‘å†…çš„é€šä¿¡æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¯ç”±å™¨çš„å·¥ä½œæ–¹å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è·¯ç”±å™¨æ˜¯ç½‘ç»œä¸–ç•Œçš„â€œäº¤é€šæ¢çº½â€å’Œâ€œè·¨åŸå¿«é€’æ€»ç«™â€ã€‚å®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯è¿æ¥ä¸åŒçš„ç½‘ç»œã€‚è·¯ç”±å™¨å†…éƒ¨æœ‰ä¸€å¼ &lt;strong&gt;è·¯ç”±è¡¨&lt;/strong&gt;ï¼Œç›¸å½“äºä¸€å¼ åœ°å›¾ï¼Œè®°å½•äº†é€šå¾€å…¶ä»–ç½‘ç»œçš„è·¯å¾„ä¿¡æ¯ ã€‚å½“æ•°æ®åŒ…åˆ°è¾¾è·¯ç”±å™¨æ—¶ï¼Œå®ƒä¼šæ‹†åŒ…æŸ¥çœ‹ç›®æ ‡&lt;strong&gt;IPåœ°å€&lt;/strong&gt;ï¼Œç„¶åæ ¹æ®è·¯ç”±è¡¨é€‰æ‹©ä¸€æ¡æœ€ä½³è·¯å¾„ï¼Œå°†æ•°æ®åŒ…è½¬å‘åˆ°ä¸‹ä¸€ä¸ªç½‘ç»œï¼Œç›´è‡³åˆ°è¾¾æœ€ç»ˆç›®çš„åœ° ã€‚è·¯ç”±å™¨è¿˜èƒ½é€šè¿‡&lt;strong&gt;NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰&lt;/strong&gt; æŠ€æœ¯ï¼Œå°†å±€åŸŸç½‘å†…éƒ¨çš„ç§æœ‰IPåœ°å€è½¬æ¢ä¸ºå…¬ç½‘IPåœ°å€ï¼Œä½¿å¤šå°è®¾å¤‡å¯ä»¥å…±äº«ä¸€ä¸ªå…¬ç½‘IPä¸Šç½‘ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®æ¦‚å¿µä¸é€‰æ‹©å»ºè®®"&gt;ğŸ’¡ å…³é”®æ¦‚å¿µä¸é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;p&gt;æŒæ¡ä»¥ä¸‹å‡ ä¸ªå…³é”®æ¦‚å¿µï¼Œèƒ½å¸®ä½ æ›´å¥½åœ°ç†è§£å®ƒä»¬çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†²çªåŸŸä¸å¹¿æ’­åŸŸ&lt;/strong&gt;ï¼šé›†çº¿å™¨æ‰€æœ‰ç«¯å£åœ¨åŒä¸€å†²çªåŸŸå’Œå¹¿æ’­åŸŸï¼›äº¤æ¢æœºçš„æ¯ä¸ªç«¯å£æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å†²çªåŸŸï¼Œä½†æ‰€æœ‰ç«¯å£é»˜è®¤åœ¨åŒä¸€å¹¿æ’­åŸŸï¼›&lt;strong&gt;è·¯ç”±å™¨çš„æ¯ä¸ªç«¯å£éƒ½èƒ½åˆ†å‰²å¹¿æ’­åŸŸ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VLANï¼ˆè™šæ‹Ÿå±€åŸŸç½‘ï¼‰&lt;/strong&gt;ï¼šé«˜çº§äº¤æ¢æœºæ”¯æŒVLANåŠŸèƒ½ï¼Œå¯ä»¥åœ¨é€»è¾‘ä¸Šåˆ’åˆ†ä¸åŒçš„å¹¿æ’­åŸŸï¼Œä½†ä¸åŒVLANä¹‹é—´çš„é€šä¿¡ä»éœ€å€ŸåŠ©è·¯ç”±å™¨æˆ–ä¸‰å±‚äº¤æ¢æœº ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰å±‚äº¤æ¢æœº&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ç§å…¼å…·äº¤æ¢æœºå’Œè·¯ç”±å™¨éƒ¨åˆ†åŠŸèƒ½çš„è®¾å¤‡ï¼Œèƒ½åœ¨å±€åŸŸç½‘å†…éƒ¨å®ç°ä¸åŒVLANæˆ–å­ç½‘ä¹‹é—´çš„é«˜é€Ÿè·¯ç”±ï¼Œæ€§èƒ½é€šå¸¸ä¼˜äºä¼ ç»Ÿè·¯ç”±å™¨ï¼Œå¸¸ç”¨äºå¤§å‹ä¼ä¸šç½‘ç»œçš„æ ¸å¿ƒå±‚ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç°ä»£ç½‘ç»œä¸­çš„åº”ç”¨ä¸é€‰æ‹©ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é›†çº¿å™¨&lt;/strong&gt;ï¼šå·²åŸºæœ¬è¢«äº¤æ¢æœºå–ä»£ï¼Œä»…åœ¨éå¸¸è€æ—§æˆ–ç‰¹æ®Šçš„åœºæ™¯ä¸­å¯è§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº¤æ¢æœº&lt;/strong&gt;ï¼šæ˜¯ç°ä»£&lt;strong&gt;å±€åŸŸç½‘ï¼ˆLANï¼‰çš„ç»å¯¹æ ¸å¿ƒ&lt;/strong&gt;ï¼Œç”¨äºè¿æ¥ç”µè„‘ã€æ‰“å°æœºã€æ‘„åƒå¤´ç­‰ç»ˆç«¯è®¾å¤‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±å™¨&lt;/strong&gt;ï¼šæ˜¯&lt;strong&gt;è¿æ¥å†…éƒ¨ç½‘ç»œå’Œå¤–éƒ¨äº’è”ç½‘ï¼ˆå¦‚Internetï¼‰çš„ç½‘å…³è®¾å¤‡&lt;/strong&gt;ï¼Œå¸¸è§äºå®¶åº­å’Œå°å‹ä¼ä¸šç½‘ç»œçš„å‡ºå£ ã€‚åœ¨å¤§å‹ç½‘ç»œä¸­ï¼Œè·¯ç”±å™¨ç”¨äºè¿æ¥ä¸åŒçš„å±€åŸŸç½‘æˆ–å¹¿åŸŸç½‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£è¿™ä¸‰ç±»ç½‘ç»œè®¾å¤‡ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„è®¾å¤‡é€‰å‹æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å†²çªåŸŸ--å¹¿æ’­åŸŸ"&gt;å†²çªåŸŸ &amp;amp; å¹¿æ’­åŸŸ
&lt;/h2&gt;&lt;p&gt;ç†è§£å†²çªåŸŸå’Œå¹¿æ’­åŸŸæ˜¯æŒæ¡ç½‘ç»œåŸºç¡€æ¶æ„å¦‚ä½•å·¥ä½œçš„å…³é”®ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å†²çªåŸŸ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¹¿æ’­åŸŸ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½å‘ç”Ÿ&lt;strong&gt;æ•°æ®ç¢°æ’&lt;/strong&gt;çš„ç½‘ç»œèŒƒå›´&lt;/td&gt;
&lt;td&gt;èƒ½æ¥æ”¶ç›¸åŒ&lt;strong&gt;å¹¿æ’­æ¶ˆæ¯&lt;/strong&gt;çš„æ‰€æœ‰è®¾å¤‡çš„é›†åˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;OSIå‚è€ƒæ¨¡å‹å±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‰©ç†å±‚&lt;/strong&gt;ï¼ˆç¬¬ä¸€å±‚ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt;ï¼ˆç¬¬äºŒå±‚ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šä¸ªè®¾å¤‡åœ¨&lt;strong&gt;åŒä¸€æ—¶åˆ»&lt;/strong&gt;å‘é€æ•°æ®å¯¼è‡´å†²çªï¼Œé™ä½æ•ˆç‡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¿æ’­æµé‡è¿‡å¤š&lt;/strong&gt;ä¼šæ¶ˆè€—å¸¦å®½ï¼Œå¯èƒ½å¼•èµ·ç½‘ç»œæ‹¥å¡ç”šè‡³é£æš´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†éš”è®¾å¤‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;äº¤æ¢æœº&lt;/strong&gt;ã€ç½‘æ¡¥ã€è·¯ç”±å™¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·¯ç”±å™¨&lt;/strong&gt;ã€ä¸‰å±‚äº¤æ¢æœºã€VLANï¼ˆè™šæ‹Ÿå±€åŸŸç½‘ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å·¥ä½œåŸç†"&gt;ğŸ” æ·±å…¥ç†è§£å·¥ä½œåŸç†
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†²çªåŸŸçš„äº§ç”Ÿä¸è§£å†³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥æŠŠå†²çªåŸŸæƒ³è±¡æˆä¸€æ¡å•è½¦é“ã€‚åœ¨åŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸ä¸€è¾†è½¦ï¼ˆæ•°æ®åŒ…ï¼‰é€šè¿‡ã€‚å¦‚æœä¸¤è¾†è½¦åŒæ—¶é©¶å…¥ï¼Œå°±ä¼šå‘ç”Ÿç¢°æ’ï¼ˆå†²çªï¼‰ï¼Œå¯¼è‡´åŒæ–¹éƒ½éœ€è¦é€€å›é‡è¯•ã€‚&lt;strong&gt;é›†çº¿å™¨&lt;/strong&gt; å°±æ˜¯è¿™ç§è®¾å¤‡çš„å…¸å‹ä»£è¡¨ï¼Œå®ƒåªæ˜¯ç®€å•åœ°å°†ä¿¡å·å¹¿æ’­åˆ°æ‰€æœ‰ç«¯å£ï¼Œå…¶æ‰€æœ‰ç«¯å£å…±åŒæ„æˆä¸€ä¸ªå¤§çš„å†²çªåŸŸã€‚è€Œ &lt;strong&gt;äº¤æ¢æœº&lt;/strong&gt; åˆ™åƒä¸€ä¸ªç«‹äº¤æ¡¥ï¼Œå®ƒçš„æ¯ä¸ªç«¯å£éƒ½æä¾›ä¸€æ¡ç‹¬ç«‹è½¦é“ã€‚å½“æ•°æ®åŒ…ä»æŸä¸ªç«¯å£è¿›å…¥æ—¶ï¼Œäº¤æ¢æœºä¼šæ ¹æ®ç›®æ ‡åœ°å€ï¼Œåªå°†æ•°æ®åŒ…è½¬å‘åˆ°å¯¹åº”çš„ç›®æ ‡ç«¯å£ï¼Œè€Œä¸æ˜¯æ‰€æœ‰ç«¯å£ã€‚è¿™æ ·ï¼Œè¿æ¥åœ¨äº¤æ¢æœºä¸åŒç«¯å£ä¸Šçš„è®¾å¤‡ä¹‹é—´å°±ä¸ä¼šäº§ç”Ÿå†²çªï¼Œä»è€Œå®ç°äº†å†²çªåŸŸçš„åˆ†éš”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¿æ’­åŸŸçš„èŒƒç•´ä¸æ§åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹¿æ’­åŸŸåˆ™åƒä¸€ä¸ªå°åŒºé‡Œçš„å¹¿æ’­ç³»ç»Ÿã€‚å½“å°åŒºç‰©ä¸šå‘å¸ƒä¸€åˆ™é€šçŸ¥ï¼ˆå¹¿æ’­åŒ…ï¼‰æ—¶ï¼Œå°åŒºå†…çš„æ‰€æœ‰ä½æˆ·ï¼ˆç½‘ç»œè®¾å¤‡ï¼‰éƒ½èƒ½å¬åˆ°ã€‚&lt;strong&gt;äº¤æ¢æœº&lt;/strong&gt; çš„æ‰€æœ‰ç«¯å£é»˜è®¤å¤„äºåŒä¸€ä¸ªå¹¿æ’­åŸŸå†…ï¼Œå®ƒä¼šå°†å¹¿æ’­åŒ…è½¬å‘ç»™é™¤æ¥æ”¶ç«¯å£å¤–çš„æ‰€æœ‰å…¶ä»–ç«¯å£ã€‚ä¸ºäº†æ§åˆ¶å¹¿æ’­çš„èŒƒå›´ï¼Œé˜²æ­¢å¹¿æ’­æµé‡æ¶ˆè€—è¿‡å¤šèµ„æºï¼Œéœ€è¦ä½¿ç”¨ &lt;strong&gt;è·¯ç”±å™¨&lt;/strong&gt;ã€‚è·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼ŒåŸºäºIPåœ°å€è¿›è¡Œå¯»å€ï¼Œå®ƒä¸ä¼šè½¬å‘å¹¿æ’­åŒ…åˆ°å…¶ä»–ç½‘ç»œæ¥å£ã€‚å› æ­¤ï¼Œè·¯ç”±å™¨çš„æ¯ä¸ªæ¥å£éƒ½è¿æ¥ç€ä¸€ä¸ªç‹¬ç«‹çš„å¹¿æ’­åŸŸï¼Œæœ‰æ•ˆåœ°å°†ä¸€ä¸ªå¤§å¹¿æ’­åŸŸåˆ†å‰²æˆå¤šä¸ªå°çš„éƒ¨åˆ†ã€‚æ­¤å¤–ï¼Œ&lt;strong&gt;VLANæŠ€æœ¯&lt;/strong&gt; ä¹Ÿå¯ä»¥åœ¨äºŒå±‚äº¤æ¢æœºä¸Šé€»è¾‘åœ°åˆ’åˆ†å‡ºå¤šä¸ªå¹¿æ’­åŸŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹è®¾å¤‡çš„å½±å“"&gt;ğŸŒ å…¸å‹è®¾å¤‡çš„å½±å“
&lt;/h3&gt;&lt;p&gt;ä¸åŒå±‚çº§çš„ç½‘ç»œè®¾å¤‡å¯¹å†²çªåŸŸå’Œå¹¿æ’­åŸŸçš„å¤„ç†æ–¹å¼å„ä¸ç›¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é›†çº¿å™¨&lt;/strong&gt;ï¼šæ‰€æœ‰ç«¯å£å¤„äº&lt;strong&gt;åŒä¸€ä¸ªå†²çªåŸŸ&lt;/strong&gt;å’Œ&lt;strong&gt;åŒä¸€ä¸ªå¹¿æ’­åŸŸ&lt;/strong&gt;ä¸­ã€‚å®ƒæ— æ³•åˆ†éš”ä»»ä½•ä¸€ç§åŸŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº¤æ¢æœº&lt;/strong&gt;ï¼šæ¯ä¸ªç«¯å£æ˜¯ä¸€ä¸ª&lt;strong&gt;ç‹¬ç«‹çš„å†²çªåŸŸ&lt;/strong&gt;ï¼Œä½†æ‰€æœ‰ç«¯å£é»˜è®¤åœ¨&lt;strong&gt;åŒä¸€ä¸ªå¹¿æ’­åŸŸ&lt;/strong&gt;å†…ã€‚å› æ­¤ï¼Œäº¤æ¢æœºå¯ä»¥åˆ†éš”å†²çªåŸŸï¼Œä½†ä¸èƒ½åˆ†éš”å¹¿æ’­åŸŸï¼ˆé™¤éé…ç½®VLANï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±å™¨&lt;/strong&gt;ï¼šæ¯ä¸ªç½‘ç»œæ¥å£éƒ½è¿æ¥ç€&lt;strong&gt;ç‹¬ç«‹çš„å†²çªåŸŸ&lt;/strong&gt;å’Œ&lt;strong&gt;ç‹¬ç«‹çš„å¹¿æ’­åŸŸ&lt;/strong&gt;ã€‚è·¯ç”±å™¨æ—¢èƒ½åˆ†éš”å†²çªåŸŸï¼Œä¹Ÿèƒ½åˆ†éš”å¹¿æ’­åŸŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…ç½‘ç»œä¸­çš„åº”ç”¨"&gt;ğŸ’¡ å®é™…ç½‘ç»œä¸­çš„åº”ç”¨
&lt;/h3&gt;&lt;p&gt;åœ¨ç°ä»£ç½‘ç»œè®¾è®¡ä¸­ï¼Œæœ‰æ•ˆç®¡ç†å†²çªåŸŸå’Œå¹¿æ’­åŸŸè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ä½¿ç”¨äº¤æ¢æœºï¼Œå¯ä»¥æå¤§åœ°&lt;strong&gt;ç¼©å°å†²çªåŸŸçš„è§„æ¨¡&lt;/strong&gt;ï¼Œä»è€Œå‡å°‘æ•°æ®ç¢°æ’ï¼Œæ˜¾è‘—æå‡ç½‘ç»œæ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨é«˜è´Ÿè½½ç¯å¢ƒä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡è·¯ç”±å™¨å’ŒVLANæŠ€æœ¯æ¥&lt;strong&gt;åˆ’åˆ†å¹¿æ’­åŸŸ&lt;/strong&gt;ï¼Œå¯ä»¥é™åˆ¶å¹¿æ’­åŒ…ä¼ æ’­çš„èŒƒå›´ã€‚è¿™èƒ½æœ‰æ•ˆæ§åˆ¶ç½‘ç»œä¸­çš„å¹¿æ’­æµé‡ï¼Œé¿å…å¹¿æ’­é£æš´ï¼Œå¢å¼ºç½‘ç»œçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å†²çªåŸŸå’Œå¹¿æ’­åŸŸè¿™ä¸¤ä¸ªåŸºç¡€è€Œé‡è¦çš„æ¦‚å¿µã€‚å¦‚æœä½ å¯¹ç‰¹å®šç½‘ç»œè®¾å¤‡ï¼ˆæ¯”å¦‚ä¸‰å±‚äº¤æ¢æœºï¼‰å¦‚ä½•å…·ä½“æ“ä½œè¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¸‰å±‚äº¤æ¢æœº"&gt;ä¸‰å±‚äº¤æ¢æœº
&lt;/h2&gt;&lt;p&gt;ä¸‰å±‚äº¤æ¢æœºæ˜¯ä¸€ç§åŒæ—¶å…·å¤‡æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰äº¤æ¢å’Œç½‘ç»œå±‚ï¼ˆç¬¬ä¸‰å±‚ï¼‰è·¯ç”±åŠŸèƒ½çš„é«˜æ€§èƒ½ç½‘ç»œè®¾å¤‡ï¼Œæ ¸å¿ƒç›®çš„æ˜¯ä¸ºäº†åœ¨å¤§å‹å±€åŸŸç½‘ï¼ˆå¦‚ä¼ä¸šå†…ç½‘ã€æ ¡å›­ç½‘ï¼‰å†…éƒ¨å®ç°ä¸åŒå­ç½‘æˆ–VLANï¼ˆè™šæ‹Ÿå±€åŸŸç½‘ï¼‰ä¹‹é—´çš„é«˜é€Ÿæ•°æ®äº¤æ¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†ä¸åŒå±‚æ•°äº¤æ¢æœºçš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸€å±‚äº¤æ¢æœº (é›†çº¿å™¨ HUB)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;äºŒå±‚äº¤æ¢æœº (ä¼ ç»Ÿäº¤æ¢æœº)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸‰å±‚äº¤æ¢æœº&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œå±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;OSI &lt;strong&gt;ç‰©ç†å±‚&lt;/strong&gt; (ç¬¬ä¸€å±‚)&lt;/td&gt;
&lt;td&gt;OSI &lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt; (ç¬¬äºŒå±‚)&lt;/td&gt;
&lt;td&gt;OSI &lt;strong&gt;ç½‘ç»œå±‚&lt;/strong&gt; (ç¬¬ä¸‰å±‚)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯»å€ä¾æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— æ™ºèƒ½å¯»å€ï¼Œå¤„ç†&lt;strong&gt;ç”µä¿¡å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;MACåœ°å€&lt;/strong&gt; (ç‰©ç†åœ°å€)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;IPåœ°å€&lt;/strong&gt; (é€»è¾‘åœ°å€)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿¡å·æ”¾å¤§å’Œä¸­è½¬ï¼Œ&lt;strong&gt;å¹¿æ’­&lt;/strong&gt;æ‰€æœ‰æ•°æ®&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;åŒä¸€å±€åŸŸç½‘/VLANå†…&lt;/strong&gt;åŸºäºMACåœ°å€è¿›è¡Œé«˜é€Ÿæ•°æ®äº¤æ¢&lt;/td&gt;
&lt;td&gt;å®ç°&lt;strong&gt;ä¸åŒVLANæˆ–å­ç½‘é—´&lt;/strong&gt;çš„é€šä¿¡ï¼Œå…¼å…·é«˜é€Ÿäº¤æ¢å’Œè·¯ç”±åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å·²åŸºæœ¬è¢«æ·˜æ±°&lt;/td&gt;
&lt;td&gt;ç½‘ç»œ&lt;strong&gt;æ¥å…¥å±‚&lt;/strong&gt;ï¼Œè¿æ¥ç”µè„‘ã€æ‰“å°æœºç­‰ç»ˆç«¯è®¾å¤‡&lt;/td&gt;
&lt;td&gt;ç½‘ç»œ&lt;strong&gt;æ ¸å¿ƒå±‚&lt;/strong&gt;æˆ–&lt;strong&gt;æ±‡èšå±‚&lt;/strong&gt;ï¼Œä½œä¸ºVLANé—´é€šä¿¡çš„æ¢çº½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸‰å±‚äº¤æ¢æœºå¦‚ä½•å·¥ä½œ"&gt;ğŸ”„ ä¸‰å±‚äº¤æ¢æœºå¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;ä¸‰å±‚äº¤æ¢æœºçš„ç²¾é«“åœ¨äºå…¶â€œ&lt;strong&gt;ä¸€æ¬¡è·¯ç”±ï¼Œå¤šæ¬¡äº¤æ¢&lt;/strong&gt;â€çš„å·¥ä½œæœºåˆ¶ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¦–æ¬¡é€šä¿¡ï¼ˆè·¯ç”±ï¼‰&lt;/strong&gt;ï¼šå½“ä¸¤ä¸ªä¸åŒVLANæˆ–å­ç½‘çš„è®¾å¤‡ï¼ˆä¾‹å¦‚ï¼Œå¸‚åœºéƒ¨çš„ç”µè„‘å’Œè´¢åŠ¡éƒ¨çš„æœåŠ¡å™¨ï¼‰é¦–æ¬¡é€šä¿¡æ—¶ï¼Œæ•°æ®åŒ…åˆ°è¾¾ä¸‰å±‚äº¤æ¢æœºã€‚äº¤æ¢æœºä¼šåƒä¼ ç»Ÿè·¯ç”±å™¨ä¸€æ ·ï¼Œæ£€æŸ¥IPåœ°å€ï¼ŒæŸ¥è¯¢è·¯ç”±è¡¨ï¼Œç¡®å®šæœ€ä½³è·¯å¾„ã€‚è¿™ä¸ªâ€œè·¯ç”±â€è¿‡ç¨‹ç”±è½¯ä»¶å‚ä¸ï¼Œç›¸å¯¹å¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»ºç«‹è½¬å‘æ·å¾„&lt;/strong&gt;ï¼šå®Œæˆé¦–æ¬¡è·¯ç”±åï¼Œäº¤æ¢æœºä¼šå°†è¿™æ¬¡é€šä¿¡çš„å…³é”®ä¿¡æ¯ï¼ˆå¦‚æº/ç›®çš„IPåœ°å€ã€å¯¹åº”çš„MACåœ°å€å’Œå‡ºå£ç«¯å£ï¼‰è®°å½•åœ¨ä¸€å¼ ç‰¹æ®Šçš„ç¡¬ä»¶è½¬å‘è¡¨ä¸­ï¼ˆå¦‚CEFè¡¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç»­é€šä¿¡ï¼ˆäº¤æ¢ï¼‰&lt;/strong&gt;ï¼šå½“åŒä¸€å¯¹è®¾å¤‡å†æ¬¡é€šä¿¡ï¼Œæˆ–å­˜åœ¨ç›¸åŒè·¯å¾„çš„æ•°æ®æµæ—¶ï¼Œäº¤æ¢æœºä¸å†è¿›è¡Œå¤æ‚çš„è·¯ç”±æŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç¡¬ä»¶æŸ¥è¡¨å¹¶é«˜é€Ÿè½¬å‘æ•°æ®åŒ…ã€‚è¿™ä¸ªè¿‡ç¨‹é€Ÿåº¦æå¿«ï¼Œæ¥è¿‘äºŒå±‚äº¤æ¢çš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œä¸‰å±‚äº¤æ¢æœºå®Œç¾åœ°èåˆäº†è·¯ç”±å™¨çš„æ™ºèƒ½æ§åˆ¶å’ŒäºŒå±‚äº¤æ¢æœºçš„é«˜é€Ÿè½¬å‘ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä½•éœ€è¦ä¸‰å±‚äº¤æ¢æœº"&gt;ğŸ’¡ ä¸ºä½•éœ€è¦ä¸‰å±‚äº¤æ¢æœºï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨å¤§å‹ç½‘ç»œä¸­ï¼Œå‡ºäºç®¡ç†å’Œå®‰å…¨çš„è€ƒè™‘ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨VLANæŠ€æœ¯å°†ç½‘ç»œåˆ’åˆ†ä¸ºå¤šä¸ªé€»è¾‘å¹¿æ’­åŸŸã€‚è¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼š&lt;strong&gt;äºŒå±‚äº¤æ¢æœºæ— æ³•å®ç°ä¸åŒVLANä¹‹é—´çš„é€šä¿¡&lt;/strong&gt;ã€‚ä¼ ç»Ÿä¸Šï¼Œå¿…é¡»ä½¿ç”¨è·¯ç”±å™¨æ¥è¿æ¥è¿™äº›VLANã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œè·¯ç”±å™¨çš„ç«¯å£æ•°é‡æœ‰é™ï¼Œä¸”åŸºäºè½¯ä»¶çš„è·¯ç”±è¿‡ç¨‹é€Ÿåº¦è¾ƒæ…¢ï¼Œå®¹æ˜“åœ¨æ•°æ®æµé‡å¤§çš„VLANé—´é€šä¿¡æ—¶å½¢æˆç½‘ç»œç“¶é¢ˆã€‚ä¸‰å±‚äº¤æ¢æœºçš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†åœ¨ä»¥VLANåˆ’åˆ†çš„å¤§å‹å±€åŸŸç½‘ä¸­ï¼Œæä¾›&lt;strong&gt;é«˜é€Ÿã€ä½æˆæœ¬&lt;/strong&gt;çš„VLANé—´è·¯ç”±è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id="-ä¼˜åŠ¿ä¸å±€é™-1"&gt;âš–ï¸ ä¼˜åŠ¿ä¸å±€é™
&lt;/h3&gt;&lt;p&gt;ä¸‰å±‚äº¤æ¢æœºçš„æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜é€Ÿè½¬å‘&lt;/strong&gt;ï¼šåŸºäºç¡¬ä»¶ASICèŠ¯ç‰‡çš„â€œå¤šæ¬¡äº¤æ¢â€æœºåˆ¶ï¼Œå…¶è½¬å‘é€Ÿåº¦è¿œè¶…ä¾èµ–CPUè¿›è¡Œè½¯ä»¶è·¯ç”±çš„ä¼ ç»Ÿè·¯ç”±å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™ä½ç½‘ç»œç“¶é¢ˆ&lt;/strong&gt;ï¼šé«˜æ•ˆå¤„ç†å±€åŸŸç½‘å†…éƒ¨ä¸åŒå­ç½‘é—´çš„é€šä¿¡ï¼Œé¿å…ä¼ ç»Ÿè·¯ç”±å™¨æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆæœ¬æ•ˆç›Š&lt;/strong&gt;ï¼šä¸€å°è®¾å¤‡åŒæ—¶æ›¿ä»£äº†äºŒå±‚äº¤æ¢æœºå’Œè·¯ç”±å™¨çš„åŠŸèƒ½ï¼Œç®€åŒ–ç½‘ç»œç»“æ„ï¼Œé™ä½é‡‡è´­å’Œç»´æŠ¤æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºç½‘ç»œæ§åˆ¶&lt;/strong&gt;ï¼šæ”¯æŒåŸºäºIPçš„è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ã€æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ç­‰é«˜çº§åŠŸèƒ½ï¼Œèƒ½æ›´å¥½åœ°å®æ–½å®‰å…¨ç­–ç•¥å’Œæµé‡ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†å®ƒä¹Ÿæœ‰å…¶é€‚ç”¨èŒƒå›´ï¼Œ&lt;strong&gt;å¹¶ä¸èƒ½å®Œå…¨å–ä»£ä¸“ä¸šè·¯ç”±å™¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±åŠŸèƒ½ç›¸å¯¹ç®€åŒ–&lt;/strong&gt;ï¼šé€šå¸¸ä¸æ”¯æŒBGPç­‰å¤æ‚çš„å¹¿åŸŸç½‘è·¯ç”±åè®®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨åŠŸèƒ½æœ‰é™&lt;/strong&gt;ï¼šç¼ºä¹åƒä¸“ä¸šé˜²ç«å¢™é‚£æ ·çš„æ·±åº¦åŒ…æ£€æµ‹ç­‰é«˜çº§å®‰å…¨åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¿åŸŸç½‘æ¥å…¥èƒ½åŠ›&lt;/strong&gt;ï¼šåœ¨è¿æ¥äº’è”ç½‘ã€å¤„ç†NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰ç­‰åœºæ™¯ä¸‹ï¼Œæ€§èƒ½å¯èƒ½ä¸å¦‚é«˜ç«¯è·¯ç”±å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ›´é«˜å±‚çš„äº¤æ¢æœº"&gt;ğŸŒ æ›´é«˜å±‚çš„äº¤æ¢æœº
&lt;/h3&gt;&lt;p&gt;é™¤äº†å¸¸è§çš„äºŒå±‚å’Œä¸‰å±‚ï¼Œäº¤æ¢æœºè¿˜å‘å±•å‡ºäº†å·¥ä½œåœ¨æ›´ä¸Šå±‚çš„å‹å·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å››å±‚äº¤æ¢æœº&lt;/strong&gt;ï¼šå·¥ä½œäº&lt;strong&gt;ä¼ è¾“å±‚&lt;/strong&gt;ï¼Œå¯ä»¥ä¾æ®TCP/UDPç«¯å£å·è¯†åˆ«åº”ç”¨ç±»å‹ï¼ˆå¦‚HTTPã€FTPï¼‰ï¼Œä»è€Œå®ç°åŸºäºåº”ç”¨çš„æµé‡è´Ÿè½½å‡è¡¡å’Œæ›´ç²¾ç»†çš„QoSç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ƒå±‚äº¤æ¢æœº&lt;/strong&gt;ï¼šå·¥ä½œäº&lt;strong&gt;åº”ç”¨å±‚&lt;/strong&gt;ï¼Œèƒ½å¤Ÿæ·±åº¦è§£ææ•°æ®åŒ…å†…å®¹ï¼Œå®ç°åŸºäºå…·ä½“åº”ç”¨æˆ–æœåŠ¡ï¼ˆå¦‚è§†é¢‘æµã€ç½‘é¡µå†…å®¹ï¼‰çš„æ™ºèƒ½äº¤æ¢å’Œå†…å®¹ä¼˜åŒ–ï¼Œå¸¸ç”¨äºå¤§å‹æ•°æ®ä¸­å¿ƒå’Œå¤æ‚åº”ç”¨äº¤ä»˜ç½‘ç»œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰å‹å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸é€‰å‹å»ºè®®
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œäº¤æ¢æœºçš„â€œå±‚æ•°â€è¶Šé«˜ï¼Œå…¶æ™ºèƒ½åŒ–å’Œæ§åˆ¶èƒ½åŠ›å°±è¶Šå¼ºã€‚ä¸€å±‚äº¤æ¢æœºæ˜¯â€œä¿¡å·å–‡å­â€ï¼ŒäºŒå±‚äº¤æ¢æœºæ˜¯â€œæœ¬åœ°é‚®å·®â€ï¼Œè€Œä¸‰å±‚äº¤æ¢æœºåˆ™æ˜¯â€œå¸‚å†…äº¤é€šæ¢çº½â€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…ç½‘ç»œè®¾è®¡å’Œè®¾å¤‡é€‰å‹æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ€è·¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¶åº­/å°å‹åŠå…¬å®¤&lt;/strong&gt;ï¼šä½¿ç”¨&lt;strong&gt;äºŒå±‚äº¤æ¢æœº&lt;/strong&gt;å³å¯æ»¡è¶³éœ€æ±‚ï¼Œå¯åˆ’åˆ†VLANéš”ç¦»ä¸šåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­å‹åŠä»¥ä¸Šä¼ä¸šç½‘ç»œ&lt;/strong&gt;ï¼šåœ¨æ¥å…¥å±‚ä½¿ç”¨&lt;strong&gt;äºŒå±‚äº¤æ¢æœº&lt;/strong&gt;è¿æ¥ç»ˆç«¯ï¼›åœ¨ç½‘ç»œæ ¸å¿ƒæˆ–æ±‡èšå±‚éƒ¨ç½²&lt;strong&gt;ä¸‰å±‚äº¤æ¢æœº&lt;/strong&gt;ï¼Œä½œä¸ºæ‰€æœ‰VLANçš„ç½‘å…³ï¼Œè´Ÿè´£é«˜é€Ÿçš„è·¯ç”±è½¬å‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§å‹æ•°æ®ä¸­å¿ƒ/å¤æ‚ç½‘ç»œ&lt;/strong&gt;ï¼šåœ¨æ ¸å¿ƒå±‚å¯èƒ½è¿˜ä¼šç”¨åˆ°&lt;strong&gt;å››å±‚&lt;/strong&gt;æˆ–&lt;strong&gt;ä¸ƒå±‚äº¤æ¢æœº&lt;/strong&gt;ï¼Œä»¥å®ç°æ›´ç²¾ç»†çš„æµé‡ç®¡ç†å’Œåº”ç”¨ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ä¸‰å±‚äº¤æ¢æœºã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„ç½‘ç»œè®¾è®¡æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ³¢åˆ†--ç åˆ†"&gt;æ³¢åˆ† &amp;amp; ç åˆ†
&lt;/h2&gt;&lt;p&gt;æ³¢åˆ†å¤ç”¨ï¼ˆWDMï¼‰å’Œç åˆ†å¤ç”¨ï¼ˆCDMï¼‰æ˜¯ä¸¤ç§æˆªç„¶ä¸åŒçš„ä¿¡é“å…±äº«æŠ€æœ¯ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚å·¥ä½œï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äºå…±äº«ä¿¡é“çš„æ–¹å¼ï¼šWDMæ˜¯&lt;strong&gt;åˆ†å‰²å…‰çš„æ³¢é•¿ï¼ˆé¢‘ç‡ï¼‰&lt;/strong&gt;ï¼Œè€ŒCDMæ˜¯&lt;strong&gt;åˆ†é…ç‹¬ç‰¹çš„ç¼–ç &lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ æ›´ç›´è§‚åœ°æŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ³¢åˆ†å¤ç”¨ (WDM)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç åˆ†å¤ç”¨ (CDM)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬åŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ä¸€æ ¹å…‰çº¤ä¸­åŒæ—¶ä¼ è¾“&lt;strong&gt;å¤šä¸ªä¸åŒæ³¢é•¿&lt;/strong&gt;çš„å…‰è½½æ³¢ä¿¡å·ã€‚&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨&lt;strong&gt;ç›¸åŒçš„é¢‘ç‡å’Œæ—¶é—´&lt;/strong&gt;ï¼Œé &lt;strong&gt;å”¯ä¸€çš„ç ç‰‡åºåˆ—&lt;/strong&gt;æ¥åŒºåˆ†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«ç»´åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å…±äº«ï¼ˆä¸€æ ¹å…‰çº¤ï¼‰ï¼Œé¢‘ç‡åˆ†å‰²&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é¢‘ç‡å…±äº«ï¼Œæ—¶é—´å…±äº«ï¼Œç¼–ç åˆ†å‰²&lt;/strong&gt;ã€‚æ‰€æœ‰ç”¨æˆ·å®Œå…¨å…±äº«ç›¸åŒçš„é¢‘å¸¦å’Œæ™‚é–“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œå±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;OSIå‚è€ƒæ¨¡å‹çš„&lt;strong&gt;ç‰©ç†å±‚&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;OSIå‚è€ƒæ¨¡å‹çš„&lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®è®¾å¤‡/æŠ€æœ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆæ³¢å™¨/åˆ†æ³¢å™¨ã€å…‰æ”¾å¤§å™¨ã€‚&lt;/td&gt;
&lt;td&gt;ç‹¬ç‰¹çš„ç ç‰‡åºåˆ—ã€æ‰©é¢‘é€šä¿¡æŠ€æœ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…‰çº¤é€šä¿¡&lt;/strong&gt;éª¨å¹²ç½‘ï¼Œå¤§å¹…æå‡å•æ ¹å…‰çº¤çš„ä¼ è¾“å®¹é‡ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— çº¿é€šä¿¡&lt;/strong&gt;ï¼ˆå¦‚3Gç§»åŠ¨ç½‘ç»œï¼‰ã€æ— çº¿å±€åŸŸç½‘ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å½¢è±¡æ¯”å–»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä¸€æ¡å®½é˜”çš„å¤§é“åˆ’åˆ†æˆ&lt;strong&gt;å¤šæ¡å¹¶è¡Œçš„ç‹¬ç«‹è½¦é“&lt;/strong&gt;ï¼Œæ¯è¾†è½¦ï¼ˆå…‰ä¿¡å·ï¼‰åœ¨è‡ªå·±çš„è½¦é“ä¸Šäº’ä¸å¹²æ‰°åœ°è¡Œé©¶ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨ä¸€ä¸ªå˜ˆæ‚çš„æˆ¿é—´é‡Œï¼Œå¤šäººåŒæ—¶ç”¨&lt;strong&gt;ä¸åŒçš„è¯­è¨€&lt;/strong&gt;è¿›è¡Œå¯¹è¯ï¼Œå°½ç®¡å£°éŸ³æ··æ‚ï¼Œä½†æ‡‚æŸç§è¯­è¨€çš„äººèƒ½ä»ä¸­æå–å‡ºå¯¹åº”çš„å¯¹è¯å†…å®¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸æŠ€æœ¯ç‰¹ç‚¹"&gt;ğŸ’¡ å·¥ä½œåŸç†ä¸æŠ€æœ¯ç‰¹ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³¢åˆ†å¤ç”¨ï¼ˆWDMï¼‰&lt;/strong&gt;ï¼šå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨ã€‚å®ƒåˆ©ç”¨å•æ¨¡å…‰çº¤å·¨å¤§çš„å¸¦å®½èµ„æºï¼ˆä½æŸè€—æ³¢æ®µï¼Œå¦‚1310nm-1550nmçª—å£ï¼‰ï¼Œå°†ä¸åŒæ³¢é•¿çš„å…‰ä¿¡å·é€šè¿‡åˆæ³¢å™¨è€¦åˆåˆ°åŒä¸€æ ¹å…‰çº¤ä¸­ä¼ è¾“ï¼Œåœ¨æ¥æ”¶ç«¯å†ç”¨åˆ†æ³¢å™¨å°†å®ƒä»¬åˆ†ç¦»å‡ºæ¥ã€‚ç”±äºä¸åŒæ³¢é•¿çš„å…‰ä¿¡å·äº’ä¸å¹²æ‰°ï¼Œå› æ­¤å¯ä»¥å®ç°å¤šè·¯ä¿¡å·çš„åŒæ­¥ä¼ è¾“ã€‚æ ¹æ®ä¿¡é“é—´éš”çš„ç–å¯†ï¼ŒWDMåˆå¯åˆ†ä¸º&lt;strong&gt;ç²—æ³¢åˆ†å¤ç”¨ï¼ˆCWDMï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;å¯†é›†æ³¢åˆ†å¤ç”¨ï¼ˆDWDMï¼‰&lt;/strong&gt;ã€‚DWDMèƒ½å¤Ÿåœ¨ä¸€æ ¹å…‰çº¤ä¸Šå¤ç”¨å‡ åç”šè‡³ä¸Šç™¾ä¸ªæ³¢é•¿ï¼Œä»è€Œå®ç°&lt;strong&gt;å¤ªæ¯”ç‰¹æ¯ç§’ï¼ˆTbpsï¼‰çº§åˆ«&lt;/strong&gt;çš„è¶…å¤§å®¹é‡ä¼ è¾“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç åˆ†å¤ç”¨ï¼ˆCDMï¼‰&lt;/strong&gt;ï¼šæ›´å¸¸ç”¨çš„æœ¯è¯­æ˜¯&lt;strong&gt;ç åˆ†å¤šå€ï¼ˆCDMAï¼‰&lt;/strong&gt;ã€‚å®ƒçš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;æ‰©é¢‘&lt;/strong&gt;æŠ€æœ¯å’Œ&lt;strong&gt;ç åˆ†å¤šå€&lt;/strong&gt;ã€‚æ¯ä¸ªç«™ç‚¹è¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„&lt;strong&gt;ç ç‰‡åºåˆ—&lt;/strong&gt;ï¼Œè¿™ä¸ªåºåˆ—å…·æœ‰è‡ªç›¸å…³æ€§å¼ºã€äº’ç›¸å…³æ€§å¼±çš„ç‰¹ç‚¹ï¼ˆå³ç ç‰‡åºåˆ—ä¹‹é—´æ˜¯&lt;strong&gt;æ­£äº¤&lt;/strong&gt;çš„ï¼‰ã€‚å‘é€æ¯”ç‰¹1æ—¶ï¼Œç«™ç‚¹å‘é€å…¶ç ç‰‡åºåˆ—æœ¬èº«ï¼›å‘é€æ¯”ç‰¹0æ—¶ï¼Œåˆ™å‘é€è¯¥ç ç‰‡åºåˆ—çš„åç ã€‚æ‰€æœ‰ç«™ç‚¹çš„ä¿¡å·åœ¨ç›¸åŒçš„é¢‘å¸¦å’Œæ—¶é—´ä¸Šå åŠ ä¼ è¾“ã€‚æ¥æ”¶ç«¯åªè¦çŸ¥é“å‘é€ç«™çš„ç ç‰‡åºåˆ—ï¼Œå°±å¯ä»¥é€šè¿‡è®¡ç®—è§„æ ¼åŒ–å†…ç§¯ï¼Œä»å åŠ çš„ä¿¡å·ä¸­å”¯ä¸€åœ°è§£è°ƒå‡ºç›®æ ‡ä¿¡å·ï¼Œè€Œå…¶ä»–ç«™çš„ä¿¡å·ç”±äºç ç‰‡ä¸ç›¸å…³ï¼Œåœ¨å†…ç§¯è¿ç®—åç»“æœä¸ºé›¶ï¼Œä»è€Œè¢«è¿‡æ»¤æ‰ã€‚è¿™ç§æ–¹å¼ä½¿å…¶å¤©ç”Ÿå…·å¤‡&lt;strong&gt;æŠ—å¹²æ‰°èƒ½åŠ›å¼ºã€ä¿å¯†æ€§é«˜&lt;/strong&gt;çš„ä¼˜ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸æ¼”è¿›"&gt;ğŸŒ åº”ç”¨åœºæ™¯ä¸æ¼”è¿›
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³¢åˆ†å¤ç”¨çš„åº”ç”¨&lt;/strong&gt;ï¼šWDMæ˜¯ç°ä»£&lt;strong&gt;å…‰çº¤é€šä¿¡éª¨å¹²ç½‘&lt;/strong&gt;çš„åŸºçŸ³ã€‚å®ƒæå¤§åœ°æŒ–æ˜äº†ç°æœ‰å…‰çº¤çš„æ½œåŠ›ï¼Œæ— éœ€é“ºè®¾æ–°å…‰ç¼†å°±èƒ½æˆå€å¢åŠ ä¼ è¾“å®¹é‡ï¼Œæ˜¾è‘—é™ä½äº†æˆæœ¬ã€‚æ— è®ºæ˜¯é•¿é€”å¹²çº¿ç½‘ç»œã€åŸåŸŸç½‘ï¼Œè¿˜æ˜¯æ•°æ®ä¸­å¿ƒäº’è¿ï¼ˆDCIï¼‰ï¼ŒWDMéƒ½æ˜¯æ”¯æ’‘é«˜é€Ÿä¿¡æ¯ä¼ è¾“çš„å…³é”®æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç åˆ†å¤ç”¨çš„åº”ç”¨&lt;/strong&gt;ï¼šCDM/CDMAæ˜¯&lt;strong&gt;ç¬¬äºŒä»£å’Œç¬¬ä¸‰ä»£ç§»åŠ¨é€šä¿¡ï¼ˆå¦‚CDMA2000ã€WCDMAï¼‰&lt;/strong&gt; çš„æ ¸å¿ƒæŠ€æœ¯ã€‚å®ƒä¹Ÿå¹¿æ³›åº”ç”¨äºå†›ç”¨é€šä¿¡ã€å«æ˜Ÿé€šä¿¡ä»¥åŠæ— çº¿å±€åŸŸç½‘ï¼ˆå¦‚Wi-Fiæ ‡å‡†çš„æŸäº›å±‚é¢ï¼‰ç­‰é¢†åŸŸï¼Œå› å…¶åœ¨å¤šç”¨æˆ·åŒæ—¶æ¥å…¥å’ŒæŠ—è¡°è½æ–¹é¢çš„ä¼˜åŠ¿è€Œå¤‡å—é’çã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£æ³¢åˆ†å¤ç”¨å’Œç åˆ†å¤ç”¨çš„åŒºåˆ«ã€‚å¦‚æœä½ å¯¹å…¶ä¸­æŸä¸ªæŠ€æœ¯çš„ç»†èŠ‚ï¼Œæ¯”å¦‚ç ç‰‡åºåˆ—çš„æ­£äº¤æ€§åŸç†æˆ–DWDMçš„å…·ä½“å®ç°è¿˜æƒ³æ·±å…¥äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç åˆ†"&gt;ç åˆ†
&lt;/h2&gt;&lt;p&gt;ç åˆ†å¤ç”¨ï¼ˆCDMï¼‰æ˜¯ä¸€é¡¹å·§å¦™çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå®ƒå…è®¸è®¸å¤šç”¨æˆ·åŒæ—¶åœ¨åŒä¸€é¢‘æ®µä¸Šé€šä¿¡ï¼Œè€Œå½¼æ­¤é—´ä¸ä¼šäº§ç”Ÿå¹²æ‰°ã€‚ä¸ºäº†å¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº†CDMä¸å…¶ä»–ä¸»æµå¤ç”¨æŠ€æœ¯çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç åˆ†å¤ç”¨ï¼ˆCDMï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é¢‘åˆ†å¤ç”¨ï¼ˆFDMï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«åŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼–ç ç»´åº¦&lt;/strong&gt;ï¼šæ‰€æœ‰ç”¨æˆ·å…±äº«åŒä¸€é¢‘ç‡å’Œæ—¶é—´ï¼Œé å”¯ä¸€çš„&lt;strong&gt;åœ°å€ç &lt;/strong&gt;åŒºåˆ†ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é¢‘ç‡ç»´åº¦&lt;/strong&gt;ï¼šæ¯ä¸ªç”¨æˆ·ç‹¬å ä¸€ä¸ª&lt;strong&gt;å›ºå®šçš„é¢‘æ®µ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´ç»´åº¦&lt;/strong&gt;ï¼šæ¯ä¸ªç”¨æˆ·ç‹¬å ä¸€ä¸ª&lt;strong&gt;å¾ªç¯å‡ºç°çš„æ—¶éš™&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºä½¿ç”¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠ¨æ€å…±äº«å…¨éƒ¨é¢‘ç‡å’Œæ—¶é—´èµ„æºã€‚&lt;/td&gt;
&lt;td&gt;é™æ€åˆ’åˆ†é¢‘ç‡èµ„æºã€‚&lt;/td&gt;
&lt;td&gt;é™æ€åˆ’åˆ†æ—¶é—´èµ„æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå…³é”®è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ°å€ç ã€æ­£äº¤æ€§ã€æ‰©é¢‘ã€‚&lt;/td&gt;
&lt;td&gt;é˜²æŠ¤é¢‘å¸¦ã€æ¨¡æ‹Ÿä¿¡å·ã€‚&lt;/td&gt;
&lt;td&gt;æ—¶éš™ã€TDMå¸§ã€æ•°å­—ä¿¡å·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;3Gç§»åŠ¨é€šä¿¡ï¼ˆCDMAï¼‰ã€GPSã€‚&lt;/td&gt;
&lt;td&gt;æœ‰çº¿ç”µè§†ã€æ— çº¿ç”µå¹¿æ’­ã€‚&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿçš„ç”µè¯ç¨‹æ§äº¤æ¢æœºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†æ­£äº¤çš„é­”æ³•"&gt;ğŸ”¬ å·¥ä½œåŸç†ï¼šæ­£äº¤çš„é­”æ³•
&lt;/h3&gt;&lt;p&gt;CDMçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨äº†ç åºåˆ—çš„&lt;strong&gt;æ­£äº¤æ€§&lt;/strong&gt;ã€‚å¯ä»¥æƒ³è±¡åœ¨ä¸€ä¸ªå˜ˆæ‚çš„æˆ¿é—´é‡Œï¼Œè®¸å¤šäººæ­£åœ¨ç”¨ä¸åŒçš„è¯­è¨€ä¸¤ä¸¤å¯¹è¯ã€‚å°½ç®¡å£°éŸ³æ··æ‚ï¼Œä½†ä½ çš„å¤§è„‘èƒ½è‡ªåŠ¨è¿‡æ»¤æ‰ä¸ç†Ÿæ‚‰çš„è¯­è¨€ï¼Œåªä¸“æ³¨äºä½ æ‡‚çš„é‚£ç§ã€‚åœ¨è¿™é‡Œï¼Œæ¯ç§â€œè¯­è¨€â€å°±ç›¸å½“äºä¸€ä¸ªç‹¬ç‰¹çš„â€œåœ°å€ç â€ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æŠ€æœ¯å®ç°ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªç¯èŠ‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€ç åˆ†é…&lt;/strong&gt;ï¼šç³»ç»Ÿä¸ºæ¯ä¸ªç”¨æˆ·åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ã€&lt;strong&gt;ç›¸äº’æ­£äº¤&lt;/strong&gt;çš„äºŒè¿›åˆ¶ç ç‰‡åºåˆ—ä½œä¸ºåœ°å€ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©é¢‘ä¸å‘é€&lt;/strong&gt;ï¼šåœ¨å‘é€ç«¯ï¼Œç”¨æˆ·çš„åŸå§‹æ•°æ®ä¿¡å·ï¼ˆä¾‹å¦‚äºŒè¿›åˆ¶æ¯”ç‰¹æµï¼‰ä¼šä¸è‡ªå·±çš„åœ°å€ç è¿›è¡Œè¿ç®—ã€‚å‘é€æ¯”ç‰¹â€˜1â€™æ—¶ï¼Œå°±å‘é€åœ°å€ç æœ¬èº«ï¼›å‘é€æ¯”ç‰¹â€˜0â€™æ—¶ï¼Œåˆ™å‘é€åœ°å€ç çš„åç ã€‚è¿™ä¸ªè¿‡ç¨‹å°†åŸå§‹ä¿¡å·çš„é¢‘è°±&lt;strong&gt;æå¤§åœ°æ‰©å±•&lt;/strong&gt;äº†ï¼Œå› æ­¤CDMä¹Ÿå±äº&lt;strong&gt;æ‰©é¢‘é€šä¿¡&lt;/strong&gt;çš„ä¸€ç§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å åŠ ä¼ è¾“&lt;/strong&gt;ï¼šæ‰€æœ‰ç”¨æˆ·ç»è¿‡æ‰©é¢‘åçš„ä¿¡å·åœ¨åŒä¸€é¢‘ç‡ã€åŒä¸€æ—¶é—´ä¸Šçº¿æ€§å åŠ ï¼Œç„¶åé€šè¿‡å…¬å…±ä¿¡é“ä¼ è¾“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸å…³æ¥æ”¶ä¸è§£æ‰©&lt;/strong&gt;ï¼šåœ¨æ¥æ”¶ç«¯ï¼Œä¸ºäº†è§£å‡ºç‰¹å®šç”¨æˆ·ï¼ˆå‡è®¾ç”¨æˆ·Aï¼‰å‘é€çš„æ•°æ®ï¼Œæ¥æ”¶æœºä½¿ç”¨ä¸ç”¨æˆ·A&lt;strong&gt;å®Œå…¨ç›¸åŒçš„åœ°å€ç &lt;/strong&gt;ä¸æ¥æ”¶åˆ°çš„æ··åˆä¿¡å·è¿›è¡Œ&lt;strong&gt;ç›¸å…³è¿ç®—&lt;/strong&gt;ã€‚ç”±äºåœ°å€ç çš„æ­£äº¤æ€§ï¼Œåªæœ‰ç”¨æˆ·Açš„ä¿¡å·ä¼šäº§ç”Ÿå¼ºç›¸å…³è¾“å‡ºï¼Œæ¢å¤å‡ºåŸå§‹æ•°æ®ï¼›å…¶ä»–ç”¨æˆ·çš„ä¿¡å·å› ä¸ºåœ°å€ç ä¸åŒ¹é…ï¼Œç›¸å…³è¿ç®—ç»“æœè¿‘ä¹ä¸ºé›¶ï¼Œè¢«è§†ä¸ºå™ªå£°è¿‡æ»¤æ‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æŠ€æœ¯ä¼˜åŠ£åˆ†æ"&gt;âš–ï¸ æŠ€æœ¯ä¼˜åŠ£åˆ†æ
&lt;/h3&gt;&lt;p&gt;CDMæŠ€æœ¯çš„ä¼˜åŠ¿ååˆ†çªå‡ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŠ—å¹²æ‰°èƒ½åŠ›å¼º&lt;/strong&gt;ï¼šå¾—ç›Šäºæ‰©é¢‘ç‰¹æ€§ï¼Œçª„å¸¦å¹²æ‰°åªä¼šå½±å“æ‰©å±•åé¢‘è°±çš„ä¸€å°éƒ¨åˆ†ï¼Œç³»ç»Ÿå…·æœ‰å¾ˆå¼ºçš„æŠ—å¹²æ‰°èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿å¯†æ€§é«˜&lt;/strong&gt;ï¼šä¸äº†è§£ç³»ç»Ÿæ‰€ç”¨çš„åœ°å€ç ï¼Œå°±æ— æ³•è§£è°ƒå‡ºä¿¡å·ï¼Œé€šä¿¡å†…å®¹ä¸æ˜“è¢«çªƒå¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿå®¹é‡çµæ´»&lt;/strong&gt;ï¼šç†è®ºä¸Šï¼Œé€šè¿‡å¢åŠ ä¸åŒçš„æ­£äº¤ç æ•°é‡ï¼Œå°±å¯ä»¥å¢åŠ ç”¨æˆ·æ•°ï¼Œç³»ç»Ÿé…ç½®çµæ´»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯å®¹é‡å’Œè½¯åˆ‡æ¢&lt;/strong&gt;ï¼šåœ¨ç§»åŠ¨é€šä¿¡ä¸­ï¼Œç”¨æˆ·æ•°çš„å¢åŠ åªä¼šå¯¼è‡´æ‰€æœ‰ç”¨æˆ·é€šè¯è´¨é‡çš„å¹³ç¼“ä¸‹é™ï¼ˆè½¯å®¹é‡ï¼‰ï¼›æ‰‹æœºå¯ä»¥åœ¨ä¸æ–°åŒºå»ºç«‹è¿æ¥åå†æ–­å¼€æ—§åŒºçš„è¿æ¥ï¼Œå®ç°æ— ç¼çš„è½¯åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†å…¶æŒ‘æˆ˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ç°å¤æ‚&lt;/strong&gt;ï¼šéœ€è¦ç²¾å¯†çš„åŒæ­¥ç³»ç»Ÿå’Œå¤æ‚çš„æ•°å­—ä¿¡å·å¤„ç†æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿œè¿‘æ•ˆåº”&lt;/strong&gt;ï¼šå¦‚æœè·ç¦»åŸºç«™è¿‘çš„æ‰‹æœºä¿¡å·è¿‡å¼ºï¼Œä¼šâ€œæ·¹æ²¡â€è¿œå¤„æ‰‹æœºçš„å¼±ä¿¡å·ã€‚è¿™éœ€è¦é€šè¿‡ä¸¥æ ¼çš„åŠŸç‡æ§åˆ¶æ¥è§£å†³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸŒ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;CDMæŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯ä»¥å…¶å¤šå€æ¥å…¥å½¢å¼&lt;strong&gt;CDMA&lt;/strong&gt;ï¼Œå·²å¹¿æ³›åº”ç”¨äºå¤šä¸ªé¢†åŸŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç§»åŠ¨é€šä¿¡&lt;/strong&gt;ï¼šè¿™æ˜¯CDMæœ€å¹¿ä¸ºäººçŸ¥çš„åº”ç”¨ã€‚&lt;strong&gt;CDMA&lt;/strong&gt;æ˜¯ç¬¬ä¸‰ä»£ï¼ˆ3Gï¼‰ç§»åŠ¨é€šä¿¡çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¾‹å¦‚CDMA2000å’ŒW-CDMAæ ‡å‡†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨çƒå®šä½ç³»ç»Ÿï¼ˆGPSï¼‰&lt;/strong&gt;ï¼šGPSå«æ˜ŸåŒæ—¶å‘é€ä¿¡å·ï¼Œåœ°é¢æ¥æ”¶æœºé€šè¿‡ä¸åŒçš„ä¼ªéšæœºç æ¥åŒºåˆ†ä¸åŒå«æ˜Ÿï¼Œå¹¶åˆ©ç”¨ä¿¡å·ä¼ æ’­æ—¶é—´è®¡ç®—ç²¾ç¡®è·ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— çº¿å±€åŸŸç½‘ï¼ˆWi-Fiï¼‰&lt;/strong&gt;ï¼šæŸäº›Wi-Fiæ ‡å‡†ï¼ˆå¦‚IEEE 802.11bï¼‰çš„ç‰©ç†å±‚å°±é‡‡ç”¨äº†åŸºäºCDMAçš„ç›´åºæ‰©é¢‘ï¼ˆDSSSï¼‰æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å«æ˜Ÿé€šä¿¡å’Œå…‰çº¤é€šä¿¡&lt;/strong&gt;ï¼šåœ¨èµ„æºå®è´µçš„å«æ˜Ÿé€šä¿¡å’Œè¿½æ±‚æé«˜å®¹é‡çš„å…‰çº¤é€šä¿¡ä¸­ï¼ŒCDMåŠå…¶å…‰åŸŸç‰ˆæœ¬ï¼ˆOCDMï¼‰ä¹Ÿè¢«ç”¨äºæé«˜é¢‘è°±åˆ©ç”¨ç‡å’Œç³»ç»Ÿå®¹é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç åˆ†å¤ç”¨æ˜¯ä¸€é¡¹é€šè¿‡&lt;strong&gt;ç¼–ç ç»´åº¦&lt;/strong&gt;æ¥åŒºåˆ†ä¿¡é“çš„é«˜æ˜æŠ€æœ¯ã€‚å®ƒå‡­å€Ÿå…¶æŠ—å¹²æ‰°ã€é«˜ä¿å¯†æ€§å’Œçµæ´»ç»„ç½‘çš„ä¼˜åŠ¿ï¼Œå°¤å…¶åœ¨ç§»åŠ¨é€šä¿¡é¢†åŸŸç•™ä¸‹äº†æ·±åˆ»çš„å°è®°ã€‚è™½ç„¶åœ¨æ–°ä¸€ä»£é€šä¿¡æ ‡å‡†ä¸­é‡‡ç”¨äº†æ›´å¤æ‚çš„æŠ€æœ¯ï¼Œä½†CDMæ‰€ä¾èµ–çš„æ‰©é¢‘å’Œæ­£äº¤ç åˆ†æ€æƒ³ä¾ç„¶æ˜¯é€šä¿¡åŸç†ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ç åˆ†å¤ç”¨ã€‚å¦‚æœä½ å¯¹ä¸ä¹‹ç»“åˆçš„ç‰¹å®šæŠ€æœ¯ï¼ˆå¦‚CDMAçš„å…·ä½“å®ç°ï¼‰è¿˜æƒ³æ·±å…¥äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="dns"&gt;DNS
&lt;/h2&gt;&lt;p&gt;DNSè®°å½•æ˜¯åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰ä¸­ç”¨äºæŒ‡å¯¼åŸŸåè§£æçš„æ ¸å¿ƒæŒ‡ä»¤ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„åŠŸèƒ½ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æœ€å¸¸è§çš„DNSè®°å½•ç±»å‹ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è®°å½•ç±»å‹&lt;/th&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Aè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ°å€è®°å½•&lt;/td&gt;
&lt;td&gt;å°†åŸŸåæŒ‡å‘ä¸€ä¸ª&lt;strong&gt;IPv4åœ°å€&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;192.0.2.1&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;example.com&lt;/code&gt;â†’ &lt;code&gt;192.0.2.1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;AAAAè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;IPv6åœ°å€è®°å½•&lt;/td&gt;
&lt;td&gt;å°†åŸŸåæŒ‡å‘ä¸€ä¸ª&lt;strong&gt;IPv6åœ°å€&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;2001:db8::1&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;example.com&lt;/code&gt;â†’ &lt;code&gt;2001:db8::1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CNAMEè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§„èŒƒåç§°è®°å½•&lt;/td&gt;
&lt;td&gt;ä¸ºåŸŸåè®¾ç½®ä¸€ä¸ª&lt;strong&gt;åˆ«å&lt;/strong&gt;ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªåŸŸå&lt;/td&gt;
&lt;td&gt;&lt;code&gt;www.example.com&lt;/code&gt;â†’ &lt;code&gt;example.com&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MXè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é‚®ä»¶äº¤æ¢è®°å½•&lt;/td&gt;
&lt;td&gt;æŒ‡å®šè´Ÿè´£æ¥æ”¶è¯¥åŸŸåé‚®ä»¶çš„&lt;strong&gt;é‚®ä»¶æœåŠ¡å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;example.com&lt;/code&gt;â†’ &lt;code&gt;mail.example.com&lt;/code&gt;ï¼ˆä¼˜å…ˆçº§10ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;TXTè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–‡æœ¬è®°å½•&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ä»»æ„æ–‡æœ¬ä¿¡æ¯ï¼Œå¸¸ç”¨äº&lt;strong&gt;åŸŸåéªŒè¯&lt;/strong&gt;ã€&lt;strong&gt;é‚®ä»¶å®‰å…¨ç­–ç•¥&lt;/strong&gt;ï¼ˆSPF, DKIMï¼‰ç­‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;quot;v=spf1 include:_spf.google.com ~all&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NSè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸŸåæœåŠ¡å™¨è®°å½•&lt;/td&gt;
&lt;td&gt;æŒ‡å®šç”±å“ªä¸ª&lt;strong&gt;æƒå¨DNSæœåŠ¡å™¨&lt;/strong&gt;æ¥ç®¡ç†è¯¥åŸŸåçš„è§£æ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;example.com&lt;/code&gt;â†’ &lt;code&gt;ns1.example.com&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SRVè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å®šä½è®°å½•&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæä¾›ç‰¹å®š&lt;strong&gt;æœåŠ¡&lt;/strong&gt;ï¼ˆå¦‚VoIPã€å³æ—¶é€šè®¯ï¼‰çš„æœåŠ¡å™¨åœ°å€å’Œç«¯å£&lt;/td&gt;
&lt;td&gt;å®šä¹‰&lt;code&gt;_sip._tcp.example.com&lt;/code&gt;æœåŠ¡çš„ç«¯å£ä¸º5060&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PTRè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡é’ˆè®°å½•&lt;/td&gt;
&lt;td&gt;ç”¨äº&lt;strong&gt;åå‘DNSè§£æ&lt;/strong&gt;ï¼Œé€šè¿‡IPåœ°å€æŸ¥è¯¢å¯¹åº”çš„åŸŸå&lt;/td&gt;
&lt;td&gt;&lt;code&gt;1.2.0.192.in-addr.arpa&lt;/code&gt;â†’ &lt;code&gt;example.com&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SOAè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æˆæƒè®°å½•&lt;/td&gt;
&lt;td&gt;å­˜å‚¨DNSåŒºåŸŸçš„&lt;strong&gt;å…¨å±€ç®¡ç†ä¿¡æ¯&lt;/strong&gt;ï¼Œå¦‚ä¸»æœåŠ¡å™¨ã€ç®¡ç†å‘˜é‚®ç®±ã€åˆ·æ–°æ—¶é—´ç­‰&lt;/td&gt;
&lt;td&gt;å®šä¹‰åŒºåŸŸ&lt;code&gt;example.com&lt;/code&gt;çš„æƒå¨èµ·ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CAAè®°å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¯ä¹¦é¢å‘æœºæ„æˆæƒ&lt;/td&gt;
&lt;td&gt;æŒ‡å®šå…è®¸ä¸ºè¯¥åŸŸåé¢å‘SSL/TLSè¯ä¹¦çš„&lt;strong&gt;è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;example.com&lt;/code&gt;ä»…å…è®¸ &lt;code&gt;&amp;quot;letsencrypt.org&amp;quot;&lt;/code&gt;é¢å‘è¯ä¹¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒè®°å½•è¯¦è§£ä¸åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ æ ¸å¿ƒè®°å½•è¯¦è§£ä¸åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;äº†è§£æ¯ç§è®°å½•çš„å…·ä½“ä½œç”¨èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°é…ç½®å’Œç®¡ç†åŸŸåã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Aè®°å½•ä¸AAAAè®°å½•ï¼šç½‘ç«™è®¿é—®çš„åŸºç¡€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æ ¸å¿ƒçš„è®°å½•ç±»å‹ã€‚å½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€æ—¶ï¼ŒDNSç³»ç»Ÿæœ€ç»ˆå°±æ˜¯é€šè¿‡Aè®°å½•ï¼ˆå¯¹åº”IPv4ï¼‰æˆ–AAAAè®°å½•ï¼ˆå¯¹åº”IPv6ï¼‰æ¥æ‰¾åˆ°ç½‘ç«™æœåŠ¡å™¨çš„çœŸå®IPåœ°å€ã€‚ä¸€ä¸ªåŸŸåå¯ä»¥é…ç½®å¤šä¸ªAæˆ–AAAAè®°å½•ï¼Œä»¥å®ç°æµé‡çš„è´Ÿè½½å‡è¡¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CNAMEè®°å½•ï¼šåˆ«åä¸çµæ´»æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒå…è®¸ä½ ä¸ºä¸€ä¸ªåŸŸååˆ›å»ºåˆ«åã€‚å¸¸è§çš„ç”¨æ³•æ˜¯å°† &lt;code&gt;www.example.com&lt;/code&gt;æŒ‡å‘ &lt;code&gt;example.com&lt;/code&gt;ï¼Œè¿™æ ·æ— è®ºç”¨æˆ·è®¿é—®å“ªä¸ªåœ°å€ï¼Œéƒ½èƒ½åˆ°è¾¾åŒä¸€ä¸ªç½‘ç«™ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œ&lt;strong&gt;CDNæœåŠ¡&lt;/strong&gt;çš„æ¥å…¥ä¹Ÿå¹¿æ³›ä¾èµ–CNAMEè®°å½•ï¼Œä½ éœ€è¦å°†åŠ é€ŸåŸŸåæŒ‡å‘CDNæä¾›å•†æä¾›çš„åˆ«åï¼Œä»è€Œå°†æµé‡å¼•å¯¼è‡³CDNç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šCNAMEè®°å½•ä¸èƒ½ä¸MXæˆ–TXTè®°å½•å…±å­˜äºåŒä¸€å­åŸŸåä¸‹ï¼Œå¹¶ä¸”MXè®°å½•ç¦æ­¢æŒ‡å‘CNAMEè®°å½•ï¼Œå¿…é¡»ç›´æ¥æŒ‡å‘Aæˆ–AAAAè®°å½•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MXè®°å½•ä¸TXTè®°å½•ï¼šé‚®ä»¶äº¤ä»˜ä¸å®‰å…¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MXè®°å½•ä¸“é—¨ç”¨äºç”µå­é‚®ä»¶è·¯ç”±ï¼Œå®ƒæŒ‡æ˜äº†å‘é€åˆ°è¯¥åŸŸåçš„é‚®ä»¶åº”è¯¥æŠ•é€’åˆ°å“ªå°æœåŠ¡å™¨ã€‚é…ç½®æ—¶å¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå½“ä¸»é‚®ä»¶æœåŠ¡å™¨æ•…éšœæ—¶ï¼Œé‚®ä»¶ä¼šè¢«å‘é€åˆ°å¤‡ç”¨æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;TXTè®°å½•åˆ™åƒæ˜¯ä¸€ä¸ªâ€œå¤‡æ³¨æ â€ï¼Œç”¨é€”å¹¿æ³›ã€‚ç›®å‰æœ€é‡è¦çš„åŠŸèƒ½æ˜¯é…ç½®&lt;strong&gt;é‚®ä»¶å®‰å…¨ç­–ç•¥&lt;/strong&gt;ï¼Œå¦‚SPFè®°å½•ç”¨äºé˜²æ­¢ä»–äººä¼ªé€ ä½ çš„åŸŸåå‘é€åƒåœ¾é‚®ä»¶ï¼ŒDKIMç”¨äºé‚®ä»¶åŠ å¯†ç­¾åéªŒè¯ï¼Œè¿™äº›éƒ½é€šè¿‡TXTè®°å½•å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NSä¸SOAè®°å½•ï¼šDNSç³»ç»Ÿçš„ç®¡ç†æ ¸å¿ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;NSè®°å½•å®šä¹‰äº†ç”±å“ªå°æˆ–å¤šå°DNSæœåŠ¡å™¨æ‹¥æœ‰å¯¹è¯¥åŸŸåçš„è§£ææƒã€‚å½“ä½ æ›´æ”¹åŸŸåæ³¨å†Œå•†æˆ–DNSæœåŠ¡å•†æ—¶ï¼Œå°±éœ€è¦æ›´æ–°NSè®°å½•ã€‚SOAè®°å½•åˆ™åŒ…å«äº†è¯¥DNSåŒºåŸŸï¼ˆZoneï¼‰çš„å…¨å±€å‚æ•°ï¼Œå¦‚ä¸»DNSæœåŠ¡å™¨ã€ç®¡ç†å‘˜è”ç³»æ–¹å¼ã€åŒºåŸŸæ•°æ®åŒæ­¥çš„åˆ·æ–°é—´éš”ç­‰ï¼Œæ˜¯åŒºåŸŸä¼ è¾“å’Œç®¡ç†çš„ä¾æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SRVã€PTRå’ŒCAAè®°å½•ï¼šç‰¹å®šåœºæ™¯çš„å…³é”®è§’è‰²&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SRVè®°å½•&lt;/strong&gt;ç”¨äºå®šä¹‰ç‰¹å®šæœåŠ¡çš„ä½ç½®ï¼Œä¾‹å¦‚VoIPï¼ˆå¦‚SIPåè®®ï¼‰æˆ–å³æ—¶é€šè®¯ï¼ˆå¦‚XMPPåè®®ï¼‰ï¼Œå®ƒä¸ä»…èƒ½æŒ‡å®šæœåŠ¡å™¨åœ°å€ï¼Œè¿˜èƒ½æŒ‡å®šç«¯å£å·å’Œä¼˜å…ˆçº§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PTRè®°å½•&lt;/strong&gt;ä¸»è¦ç”¨äºåå‘DNSæŸ¥æ‰¾ï¼Œå³é€šè¿‡IPåœ°å€åæŸ¥åŸŸåï¼Œå¸¸è§äºé‚®ä»¶æœåŠ¡å™¨éªŒè¯å’Œç½‘ç»œæ•…éšœæ’æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CAAè®°å½•&lt;/strong&gt;æ˜¯ä¸€ç§å®‰å…¨è®°å½•ï¼Œç”¨äºé™åˆ¶å“ªäº›è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰å¯ä»¥ä¸ºä½ çš„åŸŸåç­¾å‘SSLè¯ä¹¦ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢é”™è¯¯æˆ–æ¶æ„çš„è¯ä¹¦ç­¾å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…é…ç½®ä¸­çš„å…³é”®è¦ç‚¹"&gt;âš™ï¸ å®é™…é…ç½®ä¸­çš„å…³é”®è¦ç‚¹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…æ“ä½œä¸­ï¼Œæœ‰å‡ ä¸ªæ¦‚å¿µè‡³å…³é‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TTLï¼ˆç”Ÿå­˜æ—¶é—´ï¼‰&lt;/strong&gt;ï¼šè¿™ä¸ªå€¼å†³å®šäº†DNSè®°å½•åœ¨é€’å½’DNSæœåŠ¡å™¨å’Œæœ¬åœ°ç¼“å­˜ä¸­å­˜æ´»çš„æ—¶é—´ã€‚è¾ƒçŸ­çš„TTLæ„å‘³ç€å˜æ›´ç”Ÿæ•ˆå¿«ï¼Œä½†ä¼šå¢åŠ æŸ¥è¯¢è´Ÿè½½ï¼›è¾ƒé•¿çš„TTLåˆ™èƒ½åŠ é€Ÿè§£æä½†å˜æ›´ç”Ÿæ•ˆæ…¢ã€‚åœ¨å‡†å¤‡è¿›è¡Œè®°å½•å˜æ›´æ—¶ï¼Œå¯ä»¥æå‰è°ƒä½TTLå€¼ï¼Œä»¥ä¾¿åœ¨å˜æ›´åå¿«é€Ÿç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§é…ç½®è¯¯åŒº&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CNAMEå†²çª&lt;/strong&gt;ï¼šé¿å…è®©CNAMEè®°å½•ä¸å…¶ä»–è®°å½•ç±»å‹ï¼ˆå¦‚MXè®°å½•ï¼‰æŒ‡å‘åŒä¸€å­åŸŸåã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MXè®°å½•æŒ‡å‘&lt;/strong&gt;ï¼šMXè®°å½•åº”ç›´æ¥æŒ‡å‘Aæˆ–AAAAè®°å½•ï¼Œè€ŒéCNAMEè®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šå°å¿ƒé¿å…CNAMEè®°å½•å½¢æˆå¾ªç¯æŒ‡å‘ï¼ˆä¾‹å¦‚a.comæŒ‡å‘b.comï¼Œè€Œb.comåˆæŒ‡å‘a.comï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨DNSè®°å½•ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é…ç½®æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="tcp-æµé‡æ§åˆ¶"&gt;TCP æµé‡æ§åˆ¶
&lt;/h2&gt;&lt;p&gt;TCPæµé‡æ§åˆ¶ç¡®å®æ˜¯ä¸€ç§ç”¨äº&lt;strong&gt;æ§åˆ¶å‘é€æ–¹æ•°æ®å‘é€é€Ÿç‡&lt;/strong&gt;çš„æœºåˆ¶ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯&lt;strong&gt;ç¡®ä¿å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸ä¼šè¶…è¿‡æ¥æ”¶æ–¹çš„å¤„ç†èƒ½åŠ›&lt;/strong&gt;ï¼Œä»è€Œé˜²æ­¢æ•°æ®ä¸¢å¤±å’Œèµ„æºæµªè´¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™å¼ æµç¨‹å›¾ç›´è§‚åœ°å±•ç¤ºäº†TCPæµé‡æ§åˆ¶çš„åŸºæœ¬å·¥ä½œè¿‡ç¨‹ï¼Œä½ å¯ä»¥ç»“åˆåç»­çš„è¯¦ç»†è¯´æ˜æ¥ç†è§£ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ¥æ”¶æ–¹ç¼“å†²åŒºæ•°æ®è¢«åº”ç”¨å±‚è¯»å–] --&amp;gt; B[æ¥æ”¶æ–¹è®¡ç®—æ–°æ¥æ”¶çª—å£]
B --&amp;gt; C[æ¥æ”¶æ–¹é€šè¿‡ACKæŠ¥æ–‡&amp;lt;br&amp;gt;å°†æ–°çª—å£é€šå‘Šå‘é€æ–¹]
C --&amp;gt; D{æ¥æ”¶çª—å£å¤§å°}
D -- çª—å£ &amp;gt; 0 --&amp;gt; E[å‘é€æ–¹æ ¹æ®çª—å£å¤§å°&amp;lt;br&amp;gt;ç»§ç»­å‘é€æ•°æ®]
D -- çª—å£ = 0 --&amp;gt; F[å‘é€æ–¹å¯åŠ¨æŒç»­è®¡æ—¶å™¨]
F --&amp;gt; G{è®¡æ—¶å™¨è¶…æ—¶}
G -- æœªè¶…æ—¶ --&amp;gt; F
G -- è¶…æ—¶ --&amp;gt; H[å‘é€æ–¹å‘é€çª—å£æ¢æµ‹æŠ¥æ–‡]
H --&amp;gt; I[æ¥æ”¶æ–¹å›åº”å½“å‰çª—å£å¤§å°]
I --&amp;gt; D
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æµé‡æ§åˆ¶çš„åŸç†ä¸å®ç°æœºåˆ¶"&gt;ğŸ” æµé‡æ§åˆ¶çš„åŸç†ä¸å®ç°æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;æµé‡æ§åˆ¶ä¸»è¦è§£å†³çš„æ˜¯&lt;strong&gt;ç‚¹å¯¹ç‚¹&lt;/strong&gt;çš„é€šä¿¡å¹³è¡¡é—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ¥æ”¶æ–¹çš„åº”ç”¨ç¨‹åºå› ä¸ºè´Ÿè½½è¿‡é«˜è€Œå¤„ç†æ•°æ®å˜æ…¢ï¼Œä½†å…¶æ¥æ”¶ç¼“å†²åŒºå·²è¢«å¡«æ»¡ï¼Œæ­¤æ—¶å‘é€æ–¹è‹¥ç»§ç»­é«˜é€Ÿå‘é€æ•°æ®ï¼Œæ–°åˆ°çš„æ•°æ®åŒ…å°†å› æ— å¤„å­˜æ”¾è€Œè¢«ä¸¢å¼ƒï¼Œè¿›è€Œè§¦å‘ä¸å¿…è¦çš„é‡ä¼ ï¼Œè¿›ä¸€æ­¥åŠ å‰§ç½‘ç»œå’Œæ¥æ”¶æ–¹çš„è´Ÿæ‹…ã€‚&lt;/p&gt;
&lt;p&gt;TCPåè®®ä¸»è¦é€šè¿‡ä»¥ä¸‹æœºåˆ¶å®ç°æµé‡æ§åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£åè®®&lt;/strong&gt;ï¼šè¿™æ˜¯å®ç°æµé‡æ§åˆ¶çš„æ ¸å¿ƒã€‚æ¥æ”¶æ–¹ä¼šé€šè¿‡TCPæŠ¥æ–‡é¦–éƒ¨çš„ &lt;strong&gt;&lt;code&gt;win&lt;/code&gt;ï¼ˆçª—å£å¤§å°ï¼‰&lt;/strong&gt; å­—æ®µï¼ŒåŠ¨æ€åœ°å‘å‘é€æ–¹é€šå‘Šè‡ªå·±æ¥æ”¶ç¼“å†²åŒºä¸­å‰©ä½™çš„ç©ºé—´å¤§å°ï¼Œè¿™ä¸ªå€¼å°±æ˜¯&lt;strong&gt;æ¥æ”¶çª—å£ï¼ˆRWNDï¼‰&lt;/strong&gt;ã€‚å‘é€æ–¹åˆ™æ ¹æ®è¿™ä¸ªé€šå‘Šå€¼æ¥è°ƒæ•´è‡ªå·±çš„&lt;strong&gt;å‘é€çª—å£ï¼ˆSWNDï¼‰&lt;/strong&gt;ï¼Œç¡®ä¿å·²å‘é€ä½†æœªç¡®è®¤çš„æ•°æ®é‡ä¸ä¼šè¶…è¿‡æ¥æ”¶çª—å£çš„å¤§å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è°ƒæ•´&lt;/strong&gt;ï¼šæ¥æ”¶çª—å£çš„å€¼å¹¶éå›ºå®šä¸å˜ã€‚éšç€æ¥æ”¶æ–¹åº”ç”¨ç¨‹åºä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®ï¼Œç©ºé—²ç©ºé—´ä¼šå˜å¤§ï¼Œæ¥æ”¶æ–¹ä¼šåœ¨åç»­çš„ç¡®è®¤ï¼ˆACKï¼‰æŠ¥æ–‡ä¸­å°†æ–°çš„ã€æ›´å¤§çš„çª—å£å€¼é€šå‘Šç»™å‘é€æ–¹ï¼Œå‘é€æ–¹éšä¹‹å¢åŠ å‘é€çª—å£ï¼Œæé«˜å‘é€é€Ÿç‡ã€‚åä¹‹ï¼Œå¦‚æœç¼“å†²åŒºç©ºé—´ç´§å¼ ï¼Œæ¥æ”¶æ–¹ä¼šé€šå‘Šä¸€ä¸ªæ›´å°çš„çª—å£å€¼ï¼Œå‘é€æ–¹åˆ™éœ€å‡å°å‘é€çª—å£ï¼Œé™ä½é€Ÿç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç‰¹æ®Šæƒ…å†µçš„å¤„ç†"&gt;âš ï¸ ç‰¹æ®Šæƒ…å†µçš„å¤„ç†
&lt;/h3&gt;&lt;p&gt;åœ¨æµé‡æ§åˆ¶è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°ä¸€äº›æç«¯æƒ…å†µï¼ŒTCPåè®®ä¹Ÿæœ‰ç›¸åº”çš„åº”å¯¹ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é›¶çª—å£ä¸æ­»é”é¿å…&lt;/strong&gt;ï¼šå½“æ¥æ”¶æ–¹çš„ç¼“å†²åŒºæ»¡æ—¶ï¼Œå®ƒä¼šé€šå‘Šä¸€ä¸ª&lt;strong&gt;çª—å£å¤§å°ä¸º0&lt;/strong&gt;çš„æŠ¥æ–‡ï¼Œå‘é€æ–¹æ”¶åˆ°åå¿…é¡»&lt;strong&gt;åœæ­¢å‘é€æ•°æ®&lt;/strong&gt;ã€‚ä½†å¦‚æœä¹‹åæ¥æ”¶æ–¹ç¼“å†²åŒºæœ‰ç©ºä½™ï¼ˆçª—å£å˜å¤§ï¼‰çš„é€šå‘ŠæŠ¥æ–‡ä¸¢å¤±äº†ï¼ŒåŒæ–¹å°±ä¼šé™·å…¥ç­‰å¾…æ­»é”ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCPè®¾ç½®äº†&lt;strong&gt;æŒç»­è®¡æ—¶å™¨&lt;/strong&gt;ã€‚å½“å‘é€æ–¹æ”¶åˆ°é›¶çª—å£é€šçŸ¥åï¼Œä¼šå¯åŠ¨è¿™ä¸ªè®¡æ—¶å™¨ã€‚è®¡æ—¶å™¨è¶…æ—¶ï¼Œå‘é€æ–¹å°±ä¼šä¸»åŠ¨å‘é€ä¸€ä¸ª&lt;strong&gt;çª—å£æ¢æµ‹æŠ¥æ–‡&lt;/strong&gt;ï¼ˆä»…æºå¸¦1å­—èŠ‚æ•°æ®ï¼‰æ¥æŸ¥è¯¢æ¥æ”¶æ–¹å½“å‰çš„çª—å£å¤§å°ï¼Œä»è€Œæ‰“ç ´åƒµå±€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³Šæ¶‚çª—å£ç»¼åˆå¾&lt;/strong&gt;ï¼šå¦‚æœæ¥æ”¶æ–¹æ¯æ¬¡åªé€šå‘Šå¾ˆå°çš„çª—å£ï¼Œè€Œå‘é€æ–¹ä¹Ÿé…åˆåœ°å‘é€å¾ˆå°‘é‡çš„æ•°æ®ï¼Œå°±ä¼šå¯¼è‡´ç½‘ç»œæ•ˆç‡æä½ï¼ˆä¼ é€å¤§é‡å°æŠ¥æ–‡ï¼‰ã€‚è§£å†³æ–¹æ¡ˆé€šå¸¸æ˜¯ä»å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¸¤ç«¯å…¥æ‰‹ï¼Œä¾‹å¦‚è®©æ¥æ”¶æ–¹ä¸é€šå‘Šå¤ªå°çš„çª—å£ï¼Œè€Œå‘é€æ–¹ä½¿ç”¨&lt;strong&gt;Nagleç®—æ³•&lt;/strong&gt;ç­‰ç­–ç•¥æ¥é¿å…å‘é€å¤ªå°çš„æ•°æ®æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¤ºä¾‹ä¸æ ¸å¿ƒè¿‡ç¨‹"&gt;ğŸ’¡ ç¤ºä¾‹ä¸æ ¸å¿ƒè¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾åœ¨ä¸€æ¬¡é€šä¿¡ä¸­ï¼ŒåŒæ–¹åˆå§‹çª—å£å‡ä¸º400å­—èŠ‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‘é€æ–¹å‘é€200å­—èŠ‚æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;æ¥æ”¶æ–¹æ”¶åˆ°åï¼Œç¼“å†²åŒºå ç”¨200å­—èŠ‚ï¼Œäºæ˜¯é€šå‘Šæ–°çª—å£ä¸º200å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;å‘é€æ–¹æ ¹æ®æ–°çª—å£ï¼Œåˆå‘é€200å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;æ¥æ”¶æ–¹å¯èƒ½å› å¤„ç†æ…¢ï¼Œåªä»ç¼“å†²åŒºå–èµ°äº†100å­—èŠ‚ï¼Œæ­¤æ—¶é€šå‘Šçª—å£å˜ä¸º100å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;å‘é€æ–¹å†å‘é€100å­—èŠ‚åï¼Œæ¥æ”¶æ–¹ç¼“å†²åŒºæ»¡ï¼Œé€šå‘Šçª—å£å˜ä¸º0ã€‚&lt;/li&gt;
&lt;li&gt;å‘é€æ–¹åœæ­¢å‘é€å¹¶å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚åç»­é€šè¿‡çª—å£æ¢æµ‹å¾—çŸ¥çª—å£æ¢å¤åï¼Œå†ç»§ç»­å‘é€æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶çš„åŒºåˆ«"&gt;ğŸ”„ æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTCPæµé‡æ§åˆ¶å¸¸ä¸&lt;strong&gt;æ‹¥å¡æ§åˆ¶&lt;/strong&gt;ä¸€åŒè¢«è®¨è®ºï¼Œä½†ä¸¤è€…ç›®æ ‡ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµé‡æ§åˆ¶&lt;/strong&gt;ä¸»è¦å…³å¿ƒ&lt;strong&gt;æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›&lt;/strong&gt;ï¼Œæ˜¯ç«¯åˆ°ç«¯çš„æ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‹¥å¡æ§åˆ¶&lt;/strong&gt;åˆ™å…³æ³¨&lt;strong&gt;ç½‘ç»œçš„æ‰¿è½½èƒ½åŠ›&lt;/strong&gt;ï¼Œé˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥ç½‘ç»œå¯¼è‡´è·¯ç”±å™¨æˆ–é“¾è·¯è¿‡è½½ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å®é™…çš„TCPé€šä¿¡ä¸­ï¼Œå‘é€æ–¹çš„å®é™…å‘é€çª—å£å¤§å°æ˜¯ç”±æ¥æ”¶çª—å£å’Œæ‹¥å¡çª—å£å…±åŒå†³å®šçš„ï¼Œå–ä¸¤è€…ä¸­çš„è¾ƒå°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£TCPæµé‡æ§åˆ¶ã€‚å¦‚æœä½ å¯¹å®ç°æœºåˆ¶ä¸­çš„æŸä¸ªç»†èŠ‚ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç½‘æ¡¥"&gt;ç½‘æ¡¥
&lt;/h2&gt;&lt;p&gt;ç½‘æ¡¥å’Œäº¤æ¢æœºéƒ½æ˜¯è®¡ç®—æœºç½‘ç»œä¸­ç”¨äºè¿æ¥è®¾å¤‡çš„å…³é”®è®¾å¤‡ï¼Œå®ƒä»¬éƒ½å·¥ä½œåœ¨OSIæ¨¡å‹çš„&lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt;ï¼Œæ ¹æ®&lt;strong&gt;MACåœ°å€&lt;/strong&gt;è¿›è¡Œæ•°æ®è½¬å‘ï¼Œå¹¶èƒ½æœ‰æ•ˆéš”ç¦»å†²çªåŸŸã€‚ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»æ ¸å¿ƒå¯¹æ¯”ç‚¹ï¼Œç„¶åå†æ·±å…¥èŠèŠç»†èŠ‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ğŸ—ï¸ ç½‘æ¡¥&lt;/th&gt;
&lt;th&gt;ğŸš€ äº¤æ¢æœº&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç«¯å£æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸åªæœ‰&lt;strong&gt;2-4ä¸ªç«¯å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç«¯å£å¯†åº¦é«˜ï¼Œå¸¸è§&lt;strong&gt;24æˆ–48ä¸ªç«¯å£&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºæœ¬å¸§è½¬å‘ã€å¸§è¿‡æ»¤ã€è¿æ¥ä¸¤ä¸ªç½‘æ®µ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šç«¯å£ç½‘æ¡¥åŠŸèƒ½çš„é›†åˆ&lt;/strong&gt;ï¼Œæ”¯æŒVLANã€QoSç­‰é«˜çº§åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¤„ç†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸºäºè½¯ä»¶çš„å­˜å‚¨è½¬å‘&lt;/strong&gt;ï¼Œé€Ÿåº¦è¾ƒæ…¢&lt;/td&gt;
&lt;td&gt;å¤šé‡‡ç”¨&lt;strong&gt;ä¸“ç”¨ç¡¬ä»¶èŠ¯ç‰‡&lt;/strong&gt;ï¼Œæ”¯æŒå­˜å‚¨è½¬å‘å’Œ&lt;strong&gt;ç›´é€šè½¬å‘&lt;/strong&gt;ï¼Œé€Ÿåº¦æ›´å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ä¸æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç«¯å£å°‘ï¼Œå…±äº«æ€»çº¿å¸¦å®½ï¼Œ&lt;strong&gt;æ˜“æˆç“¶é¢ˆ&lt;/strong&gt;ï¼Œå»¶è¿Ÿè¾ƒé«˜&lt;/td&gt;
&lt;td&gt;ç«¯å£æœ‰ç‹¬ç«‹å¸¦å®½ï¼Œ&lt;strong&gt;å…¨åŒå·¥é€šä¿¡&lt;/strong&gt;ï¼Œååé‡é«˜ï¼Œå»¶è¿Ÿä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€è¡¨å­¦ä¹ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è½¯ä»¶ç»´æŠ¤MACåœ°å€è¡¨&lt;/strong&gt;ï¼Œå®¹é‡è¾ƒå°ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ…¢&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶ç»´æŠ¤MACåœ°å€è¡¨&lt;/strong&gt;ï¼Œå®¹é‡å¤§ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—©æœŸç½‘ç»œï¼Œç”¨äº&lt;strong&gt;è¿æ¥ä¸¤ä¸ªç‰¹å®šçš„å±€åŸŸç½‘æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç°ä»£å±€åŸŸç½‘æ ¸å¿ƒ&lt;/strong&gt;ï¼Œç”¨äºè¿æ¥å¤§é‡ç»ˆç«¯è®¾å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“ä¸å…³ç³»"&gt;ğŸ’ æ€»ç»“ä¸å…³ç³»
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠ&lt;strong&gt;äº¤æ¢æœºçœ‹ä½œæ˜¯ç½‘æ¡¥çš„å¤šç«¯å£å’Œé«˜æ€§èƒ½å‡çº§ç‰ˆ&lt;/strong&gt;ã€‚ç½‘æ¡¥çš„è®¾è®¡åˆè¡·ä¸»è¦æ˜¯è¿æ¥ä¸¤ä¸ªå±€åŸŸç½‘æ®µï¼Œè€Œäº¤æ¢æœºåˆ™å‡­å€Ÿå…¶é«˜å¯†åº¦ç«¯å£å’Œç¡¬ä»¶åŠ é€Ÿä¼˜åŠ¿ï¼Œæˆä¸ºäº†æ„å»ºç°ä»£å±€åŸŸç½‘çš„åŸºç¡€è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ç½‘æ¡¥å’Œäº¤æ¢æœºã€‚å¦‚æœä½ å¯¹ç½‘ç»œä¸­çš„å…¶ä»–è®¾å¤‡ï¼ˆæ¯”å¦‚è·¯ç”±å™¨æˆ–ç½‘å…³ï¼‰ä¹Ÿæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="pop3--imap"&gt;POP3 &amp;amp; IMAP
&lt;/h2&gt;&lt;p&gt;POP3å’ŒIMAPæ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„ç”µå­é‚®ä»¶æ¥æ”¶åè®®ï¼Œå®ƒä»¬åœ¨é‚®ä»¶ç®¡ç†æ–¹å¼ä¸Šæœ‰ç€æ ¹æœ¬çš„ä¸åŒã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;IMAPæ›´é€‚åˆåœ¨å¤šå°è®¾å¤‡ä¸Šç®¡ç†é‚®ä»¶çš„ç°ä»£ç”¨æˆ·ï¼Œè€ŒPOP3åˆ™æ›´é€‚ç”¨äºä¹ æƒ¯åœ¨å•ä¸€è®¾å¤‡ä¸Šè¿›è¡Œç¦»çº¿é‚®ä»¶ç®¡ç†çš„åœºæ™¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;POP3 (é‚®å±€åè®®ç¬¬3ç‰ˆ)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IMAP (äº’è”ç½‘æ¶ˆæ¯è®¿é—®åè®®)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•å‘ä¸‹è½½&lt;/strong&gt;ã€‚å¦‚åŒä»ä¿¡ç®±é‡Œå–ä¿¡ï¼Œé‚®ä»¶è¢«ä¸‹è½½åˆ°ä½ çš„è®¾å¤‡ä¸Šã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŒå‘åŒæ­¥&lt;/strong&gt;ã€‚å¦‚åŒé€šè¿‡ç»ç’ƒçª—æŸ¥çœ‹ä¿¡ç®±ï¼Œé‚®ä»¶å§‹ç»ˆä¿ç•™åœ¨æœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯æ“ä½œä¼šåŒæ­¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‚®ä»¶å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤ä¸‹è½½åä»æœåŠ¡å™¨&lt;strong&gt;åˆ é™¤&lt;/strong&gt;ï¼ˆå¯é…ç½®ä¸ºä¿ç•™ï¼‰ã€‚é‚®ä»¶ä¸»è¦å­˜å‚¨åœ¨&lt;strong&gt;æœ¬åœ°è®¾å¤‡&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;é‚®ä»¶å§‹ç»ˆå­˜å‚¨åœ¨&lt;strong&gt;è¿œç¨‹æœåŠ¡å™¨&lt;/strong&gt;ä¸Šï¼Œå®¢æˆ·ç«¯çœ‹åˆ°çš„æ˜¯æœåŠ¡å™¨çš„é•œåƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šè®¾å¤‡æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å·®&lt;/strong&gt;ã€‚é‚®ä»¶è¢«ä¸‹è½½åˆ°ç‰¹å®šè®¾å¤‡åï¼Œåœ¨å…¶ä»–è®¾å¤‡ä¸Šå¯èƒ½æ— æ³•å†çœ‹åˆ°æˆ–çŠ¶æ€ä¸ä¸€è‡´ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜&lt;/strong&gt;ã€‚åœ¨ä»»ä½•è®¾å¤‡ä¸Šçš„æ“ä½œï¼ˆå·²è¯»ã€åˆ é™¤ã€ç§»åŠ¨ï¼‰éƒ½ä¼š&lt;strong&gt;å®æ—¶åŒæ­¥&lt;/strong&gt;åˆ°æ‰€æœ‰è®¾å¤‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·²å‘é‚®ä»¶åŒæ­¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å·²å‘é€çš„é‚®ä»¶åªèƒ½ä¿å­˜åœ¨&lt;strong&gt;å‘é€æ—¶æ‰€ç”¨çš„è®¾å¤‡&lt;/strong&gt;ä¸Šï¼Œæ— æ³•åŒæ­¥ã€‚&lt;/td&gt;
&lt;td&gt;å·²å‘é€çš„é‚®ä»¶ä¼šåŒæ­¥åˆ°æœåŠ¡å™¨ï¼Œå¯åœ¨&lt;strong&gt;æ‰€æœ‰è®¾å¤‡&lt;/strong&gt;ä¸ŠæŸ¥çœ‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–‡ä»¶å¤¹ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æœ¬åœ°å®¢æˆ·ç«¯åˆ›å»ºçš„æ–‡ä»¶å¤¹&lt;strong&gt;ä¸ä¼šä¸æœåŠ¡å™¨åŒæ­¥&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼ˆå¦‚â€œå·¥ä½œâ€ã€â€œæ—…è¡Œâ€ï¼‰ä¼šåœ¨&lt;strong&gt;æ‰€æœ‰è®¾å¤‡&lt;/strong&gt;ä¸ŠåŒæ­¥æ˜¾ç¤ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œä¾èµ–ä¸æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¦»çº¿è®¿é—®å·²ä¸‹è½½é‚®ä»¶&lt;strong&gt;æ€§èƒ½å¥½&lt;/strong&gt;ã€‚ä½†æ£€æŸ¥æ–°é‚®ä»¶éœ€å®¢æˆ·ç«¯å®šæœŸè¯·æ±‚ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥&lt;/strong&gt;ã€‚æœåŠ¡å™¨ç«¯é‚®ä»¶ç§¯ç´¯è¿‡å¤šå¯èƒ½å½±å“å®¢æˆ·ç«¯åŠ è½½é€Ÿåº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–SSL/TLSåŠ å¯†ï¼ˆå¦‚POP3Sç«¯å£995ï¼‰ä¿éšœå®‰å…¨ã€‚&lt;/td&gt;
&lt;td&gt;åŒæ ·æ”¯æŒSSL/TLSåŠ å¯†ï¼ˆå¦‚IMAPSç«¯å£993ï¼‰ï¼Œå¹¶æä¾›æ›´ä¸€è‡´çš„å®‰å…¨åŸºç¡€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•è®¾å¤‡ã€ç½‘ç»œä¸ç¨³å®šã€æ³¨é‡ç¦»çº¿è®¿é—®ã€éœ€è¦é•¿æœŸæœ¬åœ°å­˜æ¡£çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;å¤šè®¾å¤‡ï¼ˆæ‰‹æœºã€ç”µè„‘ã€å¹³æ¿ï¼‰ã€éœ€è¦éšæ—¶éšåœ°ä¸€è‡´è®¿é—®é‚®ç®±ã€å›¢é˜Ÿåä½œç®¡ç†é‚®ä»¶çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§åè®®ï¼Œå®Œå…¨å–å†³äºä½ çš„ä¸ªäººä½¿ç”¨ä¹ æƒ¯å’Œéœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹© POP3ï¼Œå¦‚æœ&lt;/strong&gt;ï¼šä½ &lt;strong&gt;ä¸»è¦åªä½¿ç”¨ä¸€å°å›ºå®šçš„ç”µè„‘&lt;/strong&gt;æ¥å¤„ç†é‚®ä»¶ï¼Œå¸Œæœ›å°†é‚®ä»¶&lt;strong&gt;å®‰å…¨åœ°ä¿å­˜åœ¨æœ¬åœ°&lt;/strong&gt;ï¼Œå¹¶ä¸”ç½‘ç»œè¿æ¥å¯èƒ½ä¸å¤ªç¨³å®šï¼Œéœ€è¦å¼ºå¤§çš„ç¦»çº¿é‚®ä»¶è®¿é—®èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹© IMAPï¼Œå¦‚æœ&lt;/strong&gt;ï¼šä½ ä¹ æƒ¯åœ¨&lt;strong&gt;æ‰‹æœºã€ç¬”è®°æœ¬ç”µè„‘ã€å¹³æ¿ç”µè„‘ç­‰å¤šå°è®¾å¤‡&lt;/strong&gt;ä¸Šåˆ‡æ¢ä½¿ç”¨é‚®ç®±ï¼Œå¹¶ä¸”å¸Œæœ›åœ¨ä»»ä½•åœ°æ–¹ç™»å½•éƒ½èƒ½çœ‹åˆ°å®Œå…¨ä¸€è‡´çš„é‚®ä»¶çŠ¶æ€ï¼ˆå·²è¯»ã€æ–‡ä»¶å¤¹åˆ†ç±»ç­‰ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ç›®å‰ç»å¤§å¤šæ•°ä¸»æµé‚®ä»¶æœåŠ¡ï¼ˆå¦‚Gmailã€QQé‚®ç®±ã€163é‚®ç®±ç­‰ï¼‰çš„æ¨èè®¾ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šé‚®ç®±çš„å…·ä½“è®¾ç½®æ–¹æ³•æœ‰ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„æä¾›è¿›ä¸€æ­¥çš„å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2 id="mac-åè®®"&gt;MAC åè®®
&lt;/h2&gt;&lt;p&gt;ä»‹è´¨è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰åè®®æ˜¯è®¡ç®—æœºç½‘ç»œä¸­åè°ƒå¤šä¸ªè®¾å¤‡åœ¨å…±äº«ä¿¡é“ä¸Šä¼ è¾“æ•°æ®çš„â€œäº¤é€šè­¦å¯Ÿâ€ï¼Œå®ƒé€šè¿‡ä¸€å¥—è§„åˆ™ç¡®ä¿æ•°æ®æœ‰åºã€å…¬å¹³ã€é«˜æ•ˆåœ°ä¼ è¾“ï¼Œæ˜¯æ•°æ®é“¾è·¯å±‚çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸»æµMACåè®®çš„æ ¸å¿ƒç‰¹å¾ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åè®®ç±»åˆ«&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;å…¸å‹åè®®&lt;/th&gt;
&lt;th&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;å…³é”®ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡é“åˆ’åˆ†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä¿¡é“èµ„æºï¼ˆé¢‘ç‡ã€æ—¶é—´ã€ç å‹ï¼‰é™æ€åˆ’åˆ†&lt;/td&gt;
&lt;td&gt;FDMA, TDMA, CDMA&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿæœ‰çº¿ç”µè§†ã€2G/3Gç§»åŠ¨é€šä¿¡ã€å«æ˜Ÿé€šä¿¡&lt;/td&gt;
&lt;td&gt;æ— å†²çªï¼Œä½†èµ„æºåˆ†é…ä¸çµæ´»ï¼Œéœ€è¦ç²¾ç¡®åŒæ­¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éšæœºè®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¾å¤‡ç«äº‰ä¿¡é“ï¼Œå¯èƒ½å‘ç”Ÿå†²çªï¼Œå¹¶é€šè¿‡æœºåˆ¶å¤„ç†&lt;/td&gt;
&lt;td&gt;ALOHA, &lt;strong&gt;CSMA/CD&lt;/strong&gt;, &lt;strong&gt;CSMA/CA&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿå…±äº«å¼ä»¥å¤ªç½‘(CSMA/CD)ï¼Œç°ä»£Wi-Fi(CSMA/CA)&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œä½è´Ÿè½½æ—¶é«˜æ•ˆï¼›é«˜è´Ÿè½½æ—¶å†²çªå¯èƒ½åŠ å‰§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½®è½¬è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¾å¤‡æŒ‰é¡ºåºè·å¾—å‘é€æƒé™&lt;/td&gt;
&lt;td&gt;ä»¤ç‰Œä¼ é€’, è½®è¯¢&lt;/td&gt;
&lt;td&gt;ä»¤ç‰Œç¯ç½‘ã€FDDIç½‘ç»œ&lt;/td&gt;
&lt;td&gt;æ— å†²çªï¼Œé«˜è´Ÿè½½ä¸‹å…¬å¹³æ€§å¥½ï¼›ä½†æ§åˆ¶æœºåˆ¶å¤æ‚ï¼Œå•ç‚¹æ•…éšœå½±å“å¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å·¥ä½œæœºåˆ¶"&gt;âš™ï¸ æ·±å…¥ç†è§£å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;h4 id="-éšæœºè®¿é—®åè®®"&gt;ğŸ”„ éšæœºè®¿é—®åè®®
&lt;/h4&gt;&lt;p&gt;è¿™ç±»åè®®çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œå…ˆç›‘å¬ï¼Œå†å‘é€ï¼›å†²çªåˆ™å¤„ç†â€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CSMA/CDï¼ˆè½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®/å†²çªæ£€æµ‹ï¼‰&lt;/strong&gt;ï¼šä¸»è¦åº”ç”¨äº&lt;strong&gt;ä¼ ç»Ÿå…±äº«å¼ä»¥å¤ªç½‘&lt;/strong&gt;ï¼ˆå¦‚ä½¿ç”¨é›†çº¿å™¨çš„ç½‘ç»œ)ã€‚
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è½½æ³¢ç›‘å¬&lt;/strong&gt;ï¼šè®¾å¤‡å‘é€å‰å…ˆæ£€æµ‹ä¿¡é“æ˜¯å¦ç©ºé—²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘é€ä¸æ£€æµ‹&lt;/strong&gt;ï¼šè‹¥ç©ºé—²åˆ™å‘é€ï¼Œå¹¶åœ¨å‘é€è¿‡ç¨‹ä¸­æŒç»­æ£€æµ‹å†²çªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†²çªå¤„ç†&lt;/strong&gt;ï¼šä¸€æ—¦æ£€æµ‹åˆ°å†²çªï¼Œç«‹å³åœæ­¢å‘é€ï¼Œå¹¶å‘é€ä¸€ä¸ªå¹²æ‰°ä¿¡å·ï¼Œç„¶åç­‰å¾…ä¸€æ®µ&lt;strong&gt;éšæœºæ—¶é—´&lt;/strong&gt;åé‡ä¼ ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—åœ¨é«˜è´Ÿè½½ç½‘ç»œä¸­å†²çªé¢‘ç¹ï¼Œæ•ˆç‡ä¼šä¸‹é™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CSMA/CAï¼ˆè½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®/å†²çªé¿å…ï¼‰&lt;/strong&gt;ï¼šä¸»è¦åº”ç”¨äº&lt;strong&gt;æ— çº¿å±€åŸŸç½‘ï¼ˆWi-Fiï¼‰&lt;/strong&gt;ã€‚ç”±äºæ— çº¿ä¿¡å·ç‰¹æ€§ï¼Œæ— æ³•å¯é æ£€æµ‹å†²çªï¼Œå› æ­¤é‡ç‚¹åœ¨äºâ€œé¿å…â€ã€‚
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿè½½æ³¢ç›‘å¬&lt;/strong&gt;ï¼šé™¤äº†ç‰©ç†ç›‘å¬ï¼Œè¿˜ä½¿ç”¨&lt;strong&gt;ç½‘ç»œåˆ†é…å‘é‡ï¼ˆNAVï¼‰&lt;/strong&gt; æ¥è®°å½•ä¿¡é“å°†è¢«å ç”¨çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RTS/CTSæ¡æ‰‹&lt;/strong&gt;ï¼ˆå¯é€‰ä½†é‡è¦ï¼‰ï¼šå‘é€æ–¹å…ˆå‘é€ä¸€ä¸ªRTSï¼ˆè¯·æ±‚å‘é€ï¼‰å¸§ï¼Œæ¥æ”¶æ–¹å›å¤CTSï¼ˆæ¸…é™¤å‘é€ï¼‰å¸§ã€‚è¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºå‘èŒƒå›´å†…çš„æ‰€æœ‰è®¾å¤‡â€œå¹¿æ’­â€å®ƒä»¬å°†è¦é€šä¿¡ï¼Œä½¿å…¶ä»–è®¾å¤‡åœ¨ç›¸åº”æ—¶é—´å†…ä¿æŒé™é»˜ï¼Œæœ‰æ•ˆè§£å†³â€œéšè”½ç»ˆç«¯â€é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®è®¤ï¼ˆACKï¼‰&lt;/strong&gt;ï¼šæ¥æ”¶æ–¹æˆåŠŸæ”¶åˆ°æ•°æ®åï¼Œå¿…é¡»å›å¤ACKå¸§ï¼Œå¦åˆ™å‘é€æ–¹ä¼šè®¤ä¸ºä¼ è¾“å¤±è´¥å¹¶é‡ä¼ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-å—æ§è®¿é—®åè®®"&gt;ğŸ”’ å—æ§è®¿é—®åè®®
&lt;/h4&gt;&lt;p&gt;è¿™ç±»åè®®é€šè¿‡é¢„å…ˆå®‰æ’çš„é¡ºåºåˆ†é…ä¿¡é“ä½¿ç”¨æƒï¼Œä»æ ¹æœ¬ä¸Šé¿å…å†²çªã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»¤ç‰Œä¼ é€’&lt;/strong&gt;ï¼šä¸€ä¸ªç‰¹æ®Šçš„&lt;strong&gt;ä»¤ç‰Œ&lt;/strong&gt;å¸§åœ¨ç½‘ç»œä¸­æ²¿é€»è¾‘ç¯ä¾æ¬¡ä¼ é€’ã€‚åªæœ‰æŒæœ‰ä»¤ç‰Œçš„è®¾å¤‡æ‰æœ‰æƒå‘é€æ•°æ®ï¼Œå‘é€å®Œæ¯•åå°†ä»¤ç‰Œä¼ é€’ç»™ä¸‹ä¸€ä¸ªè®¾å¤‡ã€‚è¿™ç§æ–¹å¼åœ¨é«˜è´Ÿè½½ç½‘ç»œä¸‹è¡¨ç°ç¨³å®šï¼Œä½†è‹¥ä»¤ç‰Œä¸¢å¤±æˆ–æŒæœ‰ä»¤ç‰Œçš„è®¾å¤‡æ•…éšœï¼Œä¼šå¯¼è‡´æ•´ä¸ªç½‘ç»œç˜«ç—ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½®è¯¢&lt;/strong&gt;ï¼šæŒ‡å®šä¸€ä¸ªä¸»è®¾å¤‡ï¼Œä¾æ¬¡è¯¢é—®æ¯ä¸ªä»è®¾å¤‡æ˜¯å¦æœ‰æ•°æ®éœ€è¦å‘é€ã€‚è¿™ç§æ–¹å¼ç”±ä¸­å¿ƒèŠ‚ç‚¹æ§åˆ¶ï¼Œä½†ä¸»è®¾å¤‡æˆä¸ºå•ç‚¹æ•…éšœç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-macå±‚å…¶ä»–å…³é”®æ¦‚å¿µ"&gt;ğŸ” MACå±‚å…¶ä»–å…³é”®æ¦‚å¿µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MACåœ°å€&lt;/strong&gt;ï¼šä¹Ÿç§°ä¸ºç‰©ç†åœ°å€æˆ–ç¡¬ä»¶åœ°å€ï¼Œæ˜¯ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„48ä½æ ‡è¯†ç¬¦ï¼Œå›ºåŒ–åœ¨ç½‘å¡ä¸­ã€‚å®ƒç”¨äºåœ¨æœ¬åœ°ç½‘ç»œä¸­ç›´æ¥è¯†åˆ«è®¾å¤‡ï¼Œæ ¼å¼é€šå¸¸ä¸º&lt;code&gt;00-1A-2B-3C-4D-5E&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MACå¸§&lt;/strong&gt;ï¼šMACåè®®è´Ÿè´£å°†ä¸Šå±‚ä¼ æ¥çš„æ•°æ®å°è£…æˆç‰¹å®šçš„å¸§æ ¼å¼è¿›è¡Œä¼ è¾“ã€‚ä»¥ä»¥å¤ªç½‘å¸§ä¸ºä¾‹ï¼Œå®ƒåŒ…å«äº†ç›®æ ‡MACåœ°å€ã€æºMACåœ°å€ã€ç±»å‹/é•¿åº¦ã€æ•°æ®è½½è·å’Œå¸§æ ¡éªŒåºåˆ—ç­‰å­—æ®µã€‚å¸§æ ¡éªŒåºåˆ—ç”¨äºæ£€æµ‹æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºé”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æ¼”è¿›"&gt;ğŸ’ æ€»ç»“ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;MACåè®®æ˜¯ç½‘ç»œè®¾å¤‡åœ¨å…±äº«ä»‹è´¨ä¸Šâ€œè¯´è¯â€çš„è§„åˆ™ï¼Œå…¶æ ¹æœ¬ä»»åŠ¡æ˜¯è§£å†³å¤šè®¾å¤‡è®¿é—®ä¿¡é“æ—¶çš„å†²çªé—®é¢˜ã€‚é€‰æ‹©åˆé€‚çš„MACåè®®å¯¹ç½‘ç»œæ€§èƒ½è‡³å…³é‡è¦ã€‚éšç€æŠ€æœ¯å‘å±•ï¼ŒMACåè®®ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼Œä¾‹å¦‚åœ¨æ— çº¿é¢†åŸŸä¸ºæ”¯æŒæœåŠ¡è´¨é‡ï¼ˆQoSï¼‰è€Œå¼•å…¥çš„å¢å¼ºåè®®ï¼ˆå¦‚IEEE 802.11eï¼‰ï¼Œä»¥åŠé’ˆå¯¹ç‰©è”ç½‘ï¼ˆIoTï¼‰ä½åŠŸè€—ã€çŸ­è·ç¦»é€šä¿¡ä¼˜åŒ–çš„åè®®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£MACåè®®è¿™ä¸€è®¡ç®—æœºç½‘ç»œçš„å…³é”®åŸºçŸ³ã€‚&lt;/p&gt;
&lt;h2 id="ç‰¹æ®Šåœ°å€"&gt;ç‰¹æ®Šåœ°å€
&lt;/h2&gt;&lt;p&gt;IPv4 åœ°å€ä¸­æœ‰è®¸å¤šç‰¹æ®Šç”¨é€”çš„åœ°å€æ®µï¼Œå®ƒä»¬çš„å­˜åœ¨æ˜¯ä¸ºäº†æ»¡è¶³ç½‘ç»œç®¡ç†ã€æµ‹è¯•ã€éš”ç¦»å’Œæœªæ¥æ‰©å±•ç­‰ç‰¹å®šéœ€æ±‚ã€‚ä¸‹é¢æˆ‘å°†ç”¨è¡¨æ ¼æ–¹å¼æ±‡æ€»è¿™äº›ç‰¹æ®Šåœ°å€ï¼Œå¹¶è§£é‡Šå®ƒä»¬å¦‚æ­¤è®¾è®¡çš„åŸå› ã€‚&lt;/p&gt;
&lt;h3 id="-ipv4-ç‰¹æ®Šåœ°å€é€ŸæŸ¥è¡¨"&gt;ğŸ“Š IPv4 ç‰¹æ®Šåœ°å€é€ŸæŸ¥è¡¨
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€ç±»å‹&lt;/th&gt;
&lt;th&gt;åœ°å€èŒƒå›´ (CIDRè¡¨ç¤ºæ³•)&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;th&gt;æ˜¯å¦å¯å…¨å±€è·¯ç”±&lt;/th&gt;
&lt;th&gt;è®¾è®¡åŸå› ä¸å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Aç±»åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1.0.0.0 - 126.255.255.255 (/8)&lt;/td&gt;
&lt;td&gt;å¤§å‹ç½‘ç»œ&lt;/td&gt;
&lt;td&gt;æ˜¯ (å…¬ç½‘åœ°å€)&lt;/td&gt;
&lt;td&gt;æ—©æœŸåˆ†é…ç»™å¤§å‹æœºæ„ï¼Œç½‘ç»œéƒ¨åˆ†ä»…å ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œä¸»æœºéƒ¨åˆ†åºå¤§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bç±»åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;128.0.0.0 - 191.255.255.255 (/16)&lt;/td&gt;
&lt;td&gt;ä¸­å‹ç½‘ç»œ&lt;/td&gt;
&lt;td&gt;æ˜¯ (å…¬ç½‘åœ°å€)&lt;/td&gt;
&lt;td&gt;ç”¨äºä¸­å‹è§„æ¨¡ç½‘ç»œï¼Œåœ¨ä¸»æœºæ•°é‡å’Œç½‘ç»œæ•°é‡é—´å–å¾—å¹³è¡¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Cç±»åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;192.0.0.0 - 223.255.255.255 (/24)&lt;/td&gt;
&lt;td&gt;å°å‹ç½‘ç»œ&lt;/td&gt;
&lt;td&gt;æ˜¯ (å…¬ç½‘åœ°å€)&lt;/td&gt;
&lt;td&gt;ç”¨äºå°å‹ç½‘ç»œï¼Œæä¾›å¤§é‡ç½‘ç»œä½†æ¯ä¸ªç½‘ç»œä¸»æœºæ•°è¾ƒå°‘ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Dç±»åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;224.0.0.0 - 239.255.255.255 (/4)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»„æ’­ï¼ˆå¤šæ’­ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯ (ä½†ç›®çš„éå•æ’­)&lt;/td&gt;
&lt;td&gt;ç”¨äºä¸€å¯¹å¤šé€šä¿¡ï¼Œé«˜æ•ˆä¼ è¾“æ•°æ®ï¼ˆå¦‚è§†é¢‘æµã€ç½‘ç»œå‘ç°åè®®ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Eç±»åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;240.0.0.0 - 255.255.255.254&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç ”ç©¶ã€å®éªŒä¿ç•™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;é¢„ç•™ç”¨äºæœªæ¥åè®®å¼€å‘æˆ–å®éªŒï¼Œä¸åœ¨å…¬å…±äº’è”ç½‘ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RFC 1918 ç§æœ‰åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†…éƒ¨ç½‘ç»œï¼ˆå±€åŸŸç½‘ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è§£å†³IPv4åœ°å€è€—å°½&lt;/strong&gt;ï¼Œå…è®¸ä¸åŒå†…ç½‘é‡å¤ä½¿ç”¨è¿™äº›åœ°å€ï¼Œé€šè¿‡NATä¸å…¬ç½‘äº’è”ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¯å›åœ°å€ (Loopback)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;127.0.0.0/8 (å¸¸ç”¨127.0.0.1)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ¬æœºæµ‹è¯•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;ç”¨äºæµ‹è¯•æœ¬æœºç½‘ç»œåè®®æ ˆï¼Œæ•°æ®åŒ…ä¸ç¦»å¼€ä¸»æœºï¼Œé¿å…ä¾èµ–å¤–éƒ¨ç½‘ç»œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é“¾è·¯æœ¬åœ°åœ°å€ (Link-Local)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;169.254.0.0/16&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨ç§æœ‰IPåˆ†é… (APIPA)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;å½“DHCPå¤±è´¥æ—¶ï¼Œæ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ†é…æ­¤èŒƒå›´å†…åœ°å€ï¼Œå®ç°å±€åŸŸç½‘ä¸´æ—¶é€šä¿¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–‡æ¡£/ç¤ºä¾‹åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;192.0.2.0/24, 198.51.100.0/24, 203.0.113.0/24&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ€æœ¯æ–‡æ¡£ç¤ºä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;é¿å…åœ¨æ–‡æ¡£å’Œç¤ºä¾‹ä¸­ä½¿ç”¨çœŸå®å…¬ç½‘æˆ–ç§ç½‘åœ°å€ï¼Œé˜²æ­¢æ··æ·†å’Œæ„å¤–é…ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºå‡†æµ‹è¯•åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;198.18.0.0/15&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œè®¾å¤‡æ€§èƒ½æµ‹è¯•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;ç”¨äºå®éªŒå®¤ç¯å¢ƒæµ‹è¯•ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ã€é˜²ç«å¢™ï¼‰æ€§èƒ½ï¼Œé¿å…ä¸ç”Ÿäº§ç½‘ç»œå†²çªã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¥å•†çº§ NAT (CGN) å…±äº«åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;100.64.0.0/10&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ISPå†…éƒ¨ä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;ä¸ºè¿è¥å•†çº§NATè®¾è®¡ï¼Œç¼“è§£IPv4å‹åŠ›ï¼ŒåŒºåˆ†äºç”¨æˆ·ç§æœ‰ç½‘ç»œï¼Œé¿å…åœ°å€é‡å ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¿æ’­åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;255.255.255.255 (å—é™å¹¿æ’­)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ¬åœ°ç½‘ç»œå¹¿æ’­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;å‘æœ¬åœ°ç‰©ç†ç½‘æ®µæ‰€æœ‰ä¸»æœºå‘é€æ•°æ®åŒ…ï¼ˆå¦‚ARPè¯·æ±‚ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®è®¾è®¡åŸå› å‰–æ"&gt;ğŸ’¡ å…³é”®è®¾è®¡åŸå› å‰–æ
&lt;/h3&gt;&lt;p&gt;IPv4 ç‰¹æ®Šåœ°å€çš„è®¾è®¡ä¸»è¦åŸºäºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³åœ°å€æ¯ç«­ä¸æé«˜åˆ©ç”¨ç‡&lt;/strong&gt;ï¼šIPv4 åœ°å€ç©ºé—´æœ‰é™ï¼ˆçº¦ 43 äº¿ä¸ªï¼‰ã€‚&lt;strong&gt;ç§æœ‰åœ°å€ (RFC 1918)&lt;/strong&gt; çš„è®¾è®¡å…è®¸æ— æ•°ä¸ªå†…éƒ¨ç½‘ç»œé‡å¤ä½¿ç”¨ç›¸åŒçš„åœ°å€å—ï¼ˆå¦‚ä½ å®¶å’Œå…¬å¸éƒ½å¯ä»¥ç”¨ &lt;code&gt;192.168.1.0/24&lt;/code&gt;ï¼‰ï¼Œåªéœ€é€šè¿‡ &lt;strong&gt;NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰&lt;/strong&gt; æŠ€æœ¯å…±äº«ä¸€ä¸ªæˆ–å°‘æ•°å…¬ç½‘IPè®¿é—®äº’è”ç½‘ã€‚è¿™æå¤§åœ°å‡ç¼“äº†å…¬ç½‘IPv4åœ°å€çš„æ¶ˆè€—é€Ÿåº¦ï¼Œæ˜¯IPv4èƒ½æ”¯æ’‘äº’è”ç½‘å‘å±•åˆ°ä»Šå¤©çš„å…³é”®ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒç½‘ç»œæµ‹è¯•ä¸ç»´æŠ¤&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¯å›åœ°å€ (127.0.0.1)&lt;/strong&gt;ï¼šå…è®¸åœ¨ä¸å®‰è£…ç‰©ç†ç½‘å¡æˆ–è¿æ¥å¤–éƒ¨ç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œæµ‹è¯•æœ¬æœºç½‘ç»œæœåŠ¡å’Œåè®®æ ˆæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚æ•°æ®åŒ…åœ¨ç³»ç»Ÿå†…éƒ¨â€œæ‰“è½¬â€ï¼Œä¸ä¾èµ–ä»»ä½•å¤–éƒ¨ç¡¬ä»¶æˆ–é“¾è·¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£/ç¤ºä¾‹åœ°å€&lt;/strong&gt;ï¼šåœ¨æŠ€æœ¯æ–‡æ¡£ã€ä¹¦ç±ã€é…ç½®ç¤ºä¾‹ä¸­ä½¿ç”¨ä¸“ç”¨åœ°å€ï¼ˆå¦‚ &lt;code&gt;192.0.2.1&lt;/code&gt;ï¼‰ï¼Œå¯ä»¥é¿å…è¯»è€…è¯¯å°†ç¤ºä¾‹åœ°å€é…ç½®åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯¼è‡´ä¸çœŸå®ç½‘ç»œå†²çªæˆ–å®‰å…¨é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°é«˜æ•ˆç¾¤ç»„é€šä¿¡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Dç±»ç»„æ’­åœ°å€&lt;/strong&gt;ï¼šä¼ ç»Ÿçš„â€œå•æ’­â€ï¼ˆä¸€å¯¹ä¸€ï¼‰å’Œâ€œå¹¿æ’­â€ï¼ˆä¸€å¯¹æ‰€æœ‰ï¼‰åœ¨ä¼ è¾“è§†é¢‘ã€éŸ³é¢‘ç­‰éœ€è¦ä¸€å¯¹å¤šå‘é€çš„æ•°æ®æ—¶æ•ˆç‡ä½ä¸‹ã€‚ç»„æ’­å…è®¸æ•°æ®æºåªå‘é€ä¸€ä»½æ•°æ®åŒ…ï¼Œç”±ç½‘ç»œè®¾å¤‡åœ¨éœ€è¦æ—¶è¿›è¡Œå¤åˆ¶å¹¶è½¬å‘ç»™åŠ å…¥ç‰¹å®šç»„æ’­ç»„çš„æ‰€æœ‰æ¥æ”¶è€…ï¼ŒèŠ‚çœäº†å¤§é‡å¸¦å®½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿éšœç½‘ç»œè‡ªåŠ¨é…ç½®ä¸å®¹é”™&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é“¾è·¯æœ¬åœ°åœ°å€ (169.254.0.0/16)&lt;/strong&gt;ï¼šå½“è®¾å¤‡æ— æ³•é€šè¿‡DHCPæœåŠ¡å™¨è‡ªåŠ¨è·å–IPåœ°å€æ—¶ï¼ˆä¾‹å¦‚æœåŠ¡å™¨å®•æœºæˆ–ç½‘ç»œæ•…éšœï¼‰ï¼Œæ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨æ­¤èŒƒå›´å†…é€‰æ‹©ä¸€ä¸ªåœ°å€åˆ†é…ç»™è‡ªå·±ã€‚è¿™ä½¿å¾—è®¾å¤‡ä»ç„¶èƒ½åœ¨æœ¬åœ°ç½‘æ®µå†…è¿›è¡Œä¸´æ—¶é€šä¿¡ï¼Œæä¾›äº†æ•…éšœæƒ…å†µä¸‹çš„åŸºæœ¬è¿é€šæ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿ç•™æœªæ¥ä¸å®éªŒç©ºé—´&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Eç±»åœ°å€&lt;/strong&gt;ï¼šå°†ä¸€éƒ¨åˆ†åœ°å€ç©ºé—´ï¼ˆ240.0.0.0/4ï¼‰æ˜ç¡®ä¿ç•™ä¸‹æ¥ï¼Œç”¨äºæœªæ¥çš„åè®®å®éªŒã€ç ”ç©¶æˆ–å¼€å‘ï¼Œé¿å…äº†å› åœ°å€åˆ†é…æ®†å°½è€Œæ— æ³•è¿›è¡Œæ–°æŠ€æœ¯æµ‹è¯•çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®åœ°å€ç”¨é€”ä¸éš”ç¦»&lt;/strong&gt;ï¼šé€šè¿‡åˆ’åˆ†ä¸åŒçš„åœ°å€å—å¹¶è§„å®šå…¶ç”¨é€”ï¼ˆå¦‚æµ‹è¯•ã€ç§æœ‰ã€ç»„æ’­ï¼‰ï¼Œä½¿å¾—ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ï¼‰èƒ½å¤Ÿæ ¹æ®IPåœ°å€å¿«é€Ÿåˆ¤æ–­æ•°æ®åŒ…çš„å¤„ç†æ–¹å¼ï¼ˆä¾‹å¦‚ï¼Œä¸åº”å°†ç§æœ‰åœ°å€çš„è·¯ç”±ä¿¡æ¯å‘å¸ƒåˆ°å…¨çƒäº’è”ç½‘ä¸Šï¼‰ï¼Œç®€åŒ–äº†è·¯ç”±å†³ç­–ï¼Œå¢å¼ºäº†ç½‘ç»œçš„å®‰å…¨æ€§å’Œå¯ç®¡ç†æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æ€»ç»“èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ IPv4 åœ°å€çš„è®¾è®¡æ™ºæ…§ï¼&lt;/p&gt;
&lt;h2 id="tcp-ç²˜åŒ…"&gt;TCP ç²˜åŒ…
&lt;/h2&gt;&lt;p&gt;TCPç²˜åŒ…é—®é¢˜æ˜¯ç½‘ç»œç¼–ç¨‹ä¸­ä¸€ä¸ªå¸¸è§ä¸”é‡è¦çš„æ¦‚å¿µï¼Œç†è§£å®ƒæœ‰åŠ©äºä½ ç¼–å†™æ›´å¥å£®çš„é€šä¿¡ç¨‹åºã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†è§£é‡Šå®ƒçš„å®šä¹‰ã€æˆå› ã€å¤„ç†æ—¶æœºå’Œè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h1 id="-tcpç²˜åŒ…é—®é¢˜è¯¦è§£"&gt;ğŸ” TCPç²˜åŒ…é—®é¢˜è¯¦è§£
&lt;/h1&gt;&lt;h2 id="-ç›®å½•"&gt;ğŸ”® ç›®å½•
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TCPç²˜åŒ…çš„å®šä¹‰ä¸æœ¬è´¨&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²˜åŒ…äº§ç”Ÿçš„åŸå› &lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶éœ€è¦å¤„ç†ç²˜åŒ…&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»æµçš„è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UDPä¸ºä½•æ²¡æœ‰ç²˜åŒ…é—®é¢˜&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€»ç»“ä¸å»ºè®®&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-ä»€ä¹ˆæ˜¯tcpç²˜åŒ…"&gt;1. ä»€ä¹ˆæ˜¯TCPç²˜åŒ…ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;TCPç²˜åŒ…æ˜¯æŒ‡å‘é€æ–¹å‘é€çš„å¤šä¸ªæ•°æ®åŒ…ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«åˆå¹¶æˆä¸€ä¸ªæˆ–å¤šä¸ªæ›´å¤§çš„æ•°æ®åŒ…åˆ°è¾¾æ¥æ”¶æ–¹ã€‚ä»æ¥æ”¶æ–¹çš„ç¼“å†²åŒºçœ‹ï¼Œåä¸€åŒ…æ•°æ®çš„å¤´éƒ¨ç´§æ¥ç€å‰ä¸€åŒ…æ•°æ®çš„å°¾éƒ¨ï¼Œå¯¼è‡´æ¥æ”¶æ–¹æ— æ³•æ­£ç¡®åŒºåˆ†åŸå§‹çš„æ•°æ®è¾¹ç•Œã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ˜ç¡®çš„æ˜¯ï¼ŒTCPæœ¬èº«æ˜¯&lt;strong&gt;é¢å‘å­—èŠ‚æµçš„åè®®&lt;/strong&gt;ï¼Œæ•°æ®åƒæ°´æµä¸€æ ·æ²¡æœ‰å›ºå®šçš„â€œåŒ…â€è¾¹ç•Œã€‚â€œç²˜åŒ…â€è¿™ä¸ªè¯´æ³•æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬å½¢è±¡åœ°ç†è§£æ•°æ®åœ¨æµå¼ä¼ è¾“ä¸­å¯èƒ½å‡ºç°çš„ç°è±¡ã€‚&lt;/p&gt;
&lt;h2 id="2-ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿç²˜åŒ…"&gt;2. ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿç²˜åŒ…ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;ç²˜åŒ…ç°è±¡çš„äº§ç”Ÿå¯ä»¥ä»å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¸¤ä¸ªè§’åº¦æ¥åˆ†æã€‚&lt;/p&gt;
&lt;h3 id="21-å‘é€æ–¹çš„åŸå› "&gt;2.1 å‘é€æ–¹çš„åŸå› 
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Nagleç®—æ³•&lt;/strong&gt;ï¼šTCPé»˜è®¤ä½¿ç”¨Nagleç®—æ³•æ¥ä¼˜åŒ–ç½‘ç»œä¼ è¾“ã€‚è¯¥ç®—æ³•ä¼šæ”¶é›†å¤šä¸ªé—´éš”æ—¶é—´çŸ­ã€æ•°æ®é‡å°çš„åˆ†ç»„ï¼Œç­‰å¾…ä¸Šä¸€ä¸ªåˆ†ç»„ç¡®è®¤åˆ°è¾¾åï¼Œæˆ–å°†å¤šä¸ªå°åˆ†ç»„åˆå¹¶æˆä¸€ä¸ªè¾ƒå¤§çš„åˆ†ç»„å†å‘é€å‡ºå»ã€‚è™½ç„¶æé«˜äº†ä¼ è¾“æ•ˆç‡ï¼Œä½†å¯èƒ½å¯¼è‡´ç²˜åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å†²åŒºæœºåˆ¶&lt;/strong&gt;ï¼šå½“å¾…å‘é€çš„æ•°æ®å¤§äºTCPå‘é€ç¼“å†²åŒºå‰©ä½™ç©ºé—´ã€å¤§äºMSSï¼ˆæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼‰æˆ–å—MTUï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰é™åˆ¶æ—¶ï¼ŒTCPä¼šå¯¹æ•°æ®åŒ…è¿›è¡Œæ‹†åˆ†ï¼ˆæ‹†åŒ…ï¼‰ï¼Œè¿™äº›æ‹†åˆ†åçš„éƒ¨åˆ†å¯èƒ½ä¸åç»­çš„å°æ•°æ®åŒ…åˆå¹¶å‘é€ï¼Œå¯¼è‡´ç²˜åŒ…å’Œæ‹†åŒ…æ··åˆå‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="22-æ¥æ”¶æ–¹çš„åŸå› "&gt;2.2 æ¥æ”¶æ–¹çš„åŸå› 
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†ä¸åŠæ—¶&lt;/strong&gt;ï¼šæ¥æ”¶æ–¹å°†æ•°æ®åŒ…ä¿å­˜åœ¨ç³»ç»Ÿæ¥æ”¶ç¼“å†²åŒºä¸­ï¼Œå¦‚æœåº”ç”¨ç¨‹åºè¯»å–æ•°æ®çš„é€Ÿåº¦è·Ÿä¸ä¸Šæ•°æ®åˆ°è¾¾ç¼“å†²åŒºçš„é€Ÿåº¦ï¼Œå¤šä¸ªæ•°æ®åŒ…å°±ä¼šåœ¨ç¼“å†²åŒºä¸­ç´¯ç§¯ã€‚å½“åº”ç”¨ç¨‹åºä¸‹ä¸€æ¬¡è¯»å–æ—¶ï¼Œå°±å¯èƒ½ä¸€æ¬¡è¯»åˆ°å¤šä¸ªâ€œç²˜â€åœ¨ä¸€èµ·çš„æ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3-ä»€ä¹ˆæ—¶å€™éœ€è¦å¤„ç†ç²˜åŒ…"&gt;3. ä»€ä¹ˆæ—¶å€™éœ€è¦å¤„ç†ç²˜åŒ…ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;å¹¶éæ‰€æœ‰æƒ…å†µéƒ½éœ€è¦å¤„ç†ç²˜åŒ…é—®é¢˜ï¼Œåœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸‹å¯ä»¥å¿½ç•¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿ç»­å‘é€åŒä¸€æ•°æ®çš„ç»„æˆéƒ¨åˆ†&lt;/strong&gt;ï¼šä¾‹å¦‚ä¼ è¾“ä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œæ–‡ä»¶è¢«åˆ†å—å‘é€ï¼Œæ¥æ”¶æ–¹æœ€ç»ˆåªéœ€è¦å°†æ‰€æœ‰æ•°æ®å—æŒ‰é¡ºåºç»„åˆæˆå®Œæ•´æ–‡ä»¶å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ç»“æ„çš„åŸå§‹æ•°æ®æµ&lt;/strong&gt;ï¼šå¦‚å•çº¯çš„æ–‡ä»¶ä¼ è¾“ï¼Œå‘é€æ–¹åªç®¡å‘é€ï¼Œæ¥æ”¶æ–¹åªç®¡æ¥æ”¶å’Œå­˜å‚¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è€Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹&lt;strong&gt;å¿…é¡»å¤„ç†&lt;/strong&gt;ç²˜åŒ…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å‘é€çš„&lt;strong&gt;å¤šä¸ªæ•°æ®åŒ…åœ¨é€»è¾‘ä¸Šç›¸äº’ç‹¬ç«‹&lt;/strong&gt;ï¼Œä»£è¡¨ä¸åŒçš„å‘½ä»¤ã€æ¶ˆæ¯æˆ–ä¸šåŠ¡å®ä½“æ—¶ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªèŠå¤©ç¨‹åºè¿ç»­å‘é€å¤šæ¡ç‹¬ç«‹æ¶ˆæ¯ï¼Œæˆ–è€…ä¸€ä¸ªæ¸¸æˆæœåŠ¡å™¨è¿ç»­å‘é€å¤šä¸ªç©å®¶çš„çŠ¶æ€æ›´æ–°åŒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="4-å¦‚ä½•è§£å†³ç²˜åŒ…é—®é¢˜"&gt;4. å¦‚ä½•è§£å†³ç²˜åŒ…é—®é¢˜ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;ç”±äºTCPåè®®æœ¬èº«ä¸æä¾›æ¶ˆæ¯è¾¹ç•Œï¼Œè§£å†³ç²˜åŒ…é—®é¢˜éœ€è¦åœ¨&lt;strong&gt;åº”ç”¨å±‚&lt;/strong&gt;è®¾è®¡åè®®æ¥å¤„ç†ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;h3 id="41-å®šé•¿æ¶ˆæ¯"&gt;4.1 å®šé•¿æ¶ˆæ¯
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ªæ•°æ®åŒ…éƒ½å°è£…æˆå›ºå®šçš„é•¿åº¦ï¼ˆä¾‹å¦‚100å­—èŠ‚ï¼‰ã€‚å¦‚æœå®é™…æ•°æ®ä¸è¶³é•¿åº¦ï¼Œåˆ™é€šè¿‡è¡¥0ã€ç©ºæ ¼ç­‰æ–¹å¼å¡«å……åˆ°æŒ‡å®šé•¿åº¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå®ç°ç®€å•ï¼Œè§£ææ•ˆç‡é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šä¸å¤Ÿçµæ´»ï¼Œå¯¹äºè¿œå°äºå®šé•¿çš„æ¶ˆæ¯ä¼šé€ æˆç½‘ç»œå¸¦å®½çš„æµªè´¹ï¼›å¯¹äºè¶…è¿‡å®šé•¿çš„æ¶ˆæ¯éœ€è¦é¢å¤–å¤„ç†ã€‚&lt;strong&gt;é€‚ç”¨äºæ¶ˆæ¯é•¿åº¦éå¸¸å›ºå®šçš„åœºæ™¯&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="42-åˆ†éš”ç¬¦æ³•"&gt;4.2 åˆ†éš”ç¬¦æ³•
&lt;/h3&gt;&lt;p&gt;åœ¨æ¯ä¸ªæ•°æ®åŒ…çš„æœ«å°¾æ·»åŠ ç‰¹å®šçš„åˆ†éš”ç¬¦ï¼ˆå¦‚æ¢è¡Œç¬¦&lt;code&gt;\r\n&lt;/code&gt;æˆ–ç‰¹æ®Šå­—ç¬¦ï¼‰ã€‚æ¥æ”¶æ–¹é€šè¿‡è¯†åˆ«è¿™äº›åˆ†éš”ç¬¦æ¥æ‹†åˆ†æ•°æ®åŒ…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ–¹æ³•ç›´è§‚ï¼Œå¸¸ç”¨äºæ–‡æœ¬åè®®ï¼ˆå¦‚FTPã€HTTPå¤´éƒ¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå¿…é¡»ç¡®ä¿åˆ†éš”ç¬¦ä¸ä¼šå‡ºç°åœ¨æ­£å¸¸çš„æ•°æ®æ­£æ–‡ä¸­ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯åˆ†åŒ…ã€‚å¦‚æœåˆ†éš”ç¬¦å‡ºç°åœ¨æ•°æ®ä¸­ï¼Œéœ€è¦è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œå¢åŠ å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="43-æ¶ˆæ¯å¤´æ¶ˆæ¯ä½“é•¿åº¦å­—æ®µæ¨è"&gt;4.3 æ¶ˆæ¯å¤´+æ¶ˆæ¯ä½“é•¿åº¦å­—æ®µï¼ˆæ¨èï¼‰
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨ä¸”çµæ´»çš„æ–¹æ¡ˆã€‚åœ¨å‘é€æ¯ä¸ªæ¶ˆæ¯æ—¶ï¼Œåœ¨æ¶ˆæ¯çš„å¤´éƒ¨åŒ…å«ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å­—æ®µï¼ˆé€šå¸¸æ˜¯4å­—èŠ‚ï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¶ˆæ¯ä½“çš„é•¿åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œæµç¨‹å¦‚ä¸‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‘é€æ–¹ï¼šå…ˆè®¡ç®—åº”ç”¨å±‚æ•°æ®çš„é•¿åº¦ï¼Œå°†å…¶å¡«å…¥å›ºå®šå¤§å°çš„æ¶ˆæ¯å¤´ï¼Œç„¶åå…ˆå‘é€æ¶ˆæ¯å¤´ï¼Œå†å‘é€æ¶ˆæ¯ä½“ã€‚&lt;/li&gt;
&lt;li&gt;æ¥æ”¶æ–¹ï¼šå…ˆè¯»å–å›ºå®šé•¿åº¦çš„æ¶ˆæ¯å¤´ï¼Œä»ä¸­è§£æå‡ºåç»­æ¶ˆæ¯ä½“çš„å®é™…é•¿åº¦Nï¼Œç„¶åç²¾ç¡®åœ°è¯»å–æ¥ä¸‹æ¥çš„Nä¸ªå­—èŠ‚ï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨å±‚æ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šèƒ½å‡†ç¡®ç•Œå®šæ¶ˆæ¯è¾¹ç•Œï¼Œçµæ´»é€‚åº”ä¸åŒé•¿åº¦çš„æ¶ˆæ¯ï¼Œä¸ä¼šä¼ è¾“å†—ä½™æ•°æ®ï¼Œæ•ˆç‡é«˜ã€‚ç‰¹åˆ«é€‚ç”¨äºäºŒè¿›åˆ¶åè®®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šåè®®è®¾è®¡ç¨å¤æ‚ï¼Œéœ€è¦å¤„ç†å­—èŠ‚åºï¼ˆå¤§ç«¯/å°ç«¯ï¼‰é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼å¯¹æ¯”äº†è¿™ä¸‰ç§ä¸»æµæ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è§£å†³æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;åŸç†&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šé•¿æ¶ˆæ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªæ•°æ®åŒ…é•¿åº¦å›ºå®šï¼Œä¸è¶³æ—¶å¡«å……&lt;/td&gt;
&lt;td&gt;æ¶ˆæ¯é•¿åº¦å›ºå®šçš„ç®€å•åè®®&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œè§£æé«˜æ•ˆ&lt;/td&gt;
&lt;td&gt;çµæ´»æ€§å·®ï¼Œæµªè´¹å¸¦å®½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†éš”ç¬¦æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨åŒ…æœ«å°¾æ·»åŠ ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚&lt;code&gt;\r\n&lt;/code&gt;ï¼‰ä½œä¸ºè¾¹ç•Œ&lt;/td&gt;
&lt;td&gt;æ–‡æœ¬åè®®ï¼ˆå¦‚FTPï¼‰&lt;/td&gt;
&lt;td&gt;ç›´è§‚ï¼Œæ˜“äºç†è§£&lt;/td&gt;
&lt;td&gt;éœ€é¿å…åˆ†éš”ç¬¦å‡ºç°åœ¨æ•°æ®ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•¿åº¦å‰ç¼€æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æ¶ˆæ¯å¤´ä¸­å®šä¹‰é•¿åº¦å­—æ®µæŒ‡æ˜æ¶ˆæ¯ä½“å¤§å°&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶åè®®ã€éœ€è¦é«˜æ•ˆä¼ è¾“çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;çµæ´»é«˜æ•ˆï¼Œè¾¹ç•Œæ¸…æ™°&lt;/td&gt;
&lt;td&gt;åè®®è®¾è®¡ç¨å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="5-udpä¸ºä»€ä¹ˆæ²¡æœ‰ç²˜åŒ…é—®é¢˜"&gt;5. UDPä¸ºä»€ä¹ˆæ²¡æœ‰ç²˜åŒ…é—®é¢˜ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;ä¸TCPä¸åŒï¼ŒUDPæ˜¯&lt;strong&gt;é¢å‘æ¶ˆæ¯çš„ã€æ— è¿æ¥&lt;/strong&gt;çš„ä¼ è¾“åè®®ã€‚æ¯ä¸ªUDPæ•°æ®æŠ¥ï¼ˆDatagramï¼‰éƒ½æ„æˆäº†ä¸€ä¸ªç‹¬ç«‹çš„ã€æœ‰è¾¹ç•Œçš„æ¶ˆæ¯ã€‚å³ä½¿åº”ç”¨ç¨‹åºä¸€æ¬¡å‘é€å¾ˆå°çš„æ•°æ®ï¼ŒUDPä¹Ÿä¼šå°†å…¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¶ˆæ¯å°è£…å¹¶å‘é€ã€‚æ¥æ”¶æ–¹çš„&lt;code&gt;recvfrom&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨æ¯æ¬¡åªèƒ½æ¥æ”¶ä¸€ä¸ªå®Œæ•´çš„UDPæ•°æ®æŠ¥ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¯”å–»ï¼šTCPåƒä¸€æ ¹æ°´ç®¡ï¼Œæ•°æ®åƒæ°´ä¸€æ ·è¿ç»­æµåŠ¨ï¼›è€ŒUDPåƒé‚®å¯„æ˜ä¿¡ç‰‡ï¼Œæ¯å¼ æ˜ä¿¡ç‰‡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒã€‚å› æ­¤ï¼ŒUDPæœ¬èº«å…·æœ‰&lt;strong&gt;æ¶ˆæ¯ä¿æŠ¤è¾¹ç•Œ&lt;/strong&gt;ï¼Œä¸ä¼šå‘ç”Ÿç²˜åŒ…ç°è±¡ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒUDPä¸ä¿è¯å¯é ä¼ è¾“ï¼Œå¯èƒ½ä¼šä¸¢åŒ…ã€‚&lt;/p&gt;
&lt;h2 id="-æ€»ç»“ä¸å»ºè®®-1"&gt;ğŸ’ æ€»ç»“ä¸å»ºè®®
&lt;/h2&gt;&lt;p&gt;TCPç²˜åŒ…é—®é¢˜æœ¬è´¨ä¸Šæ˜¯ç”±äºTCPä½œä¸ºæµå¼åè®®ï¼Œä¸ç»´æŠ¤æ¶ˆæ¯è¾¹ç•Œï¼Œè€Œæ“ä½œç³»ç»Ÿä¸ºäº†ä¼˜åŒ–æ€§èƒ½å¯¹æ•°æ®è¿›è¡Œäº†ç¼“å†²å’Œé‡ç»„æ‰€å¯¼è‡´çš„ã€‚è§£å†³æ­¤é—®é¢˜çš„å…³é”®åœ¨äºåœ¨åº”ç”¨å±‚åè®®ä¸­&lt;strong&gt;æ˜¾å¼åœ°å®šä¹‰æ¶ˆæ¯çš„è¾¹ç•Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§å¤šæ•°æ–°è®¾è®¡çš„é¡¹ç›®ï¼Œå°¤å…¶æ˜¯äºŒè¿›åˆ¶åè®®ï¼Œæˆ‘æ¨èä½¿ç”¨&lt;strong&gt;æ¶ˆæ¯å¤´+æ¶ˆæ¯ä½“é•¿åº¦å­—æ®µ&lt;/strong&gt;çš„æ–¹æ¡ˆï¼Œè¿™æ˜¯æœ€é€šç”¨å’Œå¯é çš„æ–¹æ³•ã€‚è®¸å¤šç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼ˆå¦‚Java Nettyã€Python Twistedï¼‰ä¹Ÿå†…ç½®äº†ç›¸åº”çš„è§£ç å™¨ï¼ˆå¦‚&lt;code&gt;LengthFieldBasedFrameDecoder&lt;/code&gt;ï¼‰æ¥å¸®åŠ©å¼€å‘è€…å¤„ç†ç²˜åŒ…é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£TCPç²˜åŒ…é—®é¢˜ã€‚å¦‚æœä½ åœ¨å…·ä½“çš„å®ç°ç¯å¢ƒä¸­ï¼ˆä¾‹å¦‚ä½¿ç”¨æŸç§ç‰¹å®šçš„ç¼–ç¨‹è¯­è¨€æˆ–æ¡†æ¶ï¼‰ï¼Œæˆ‘å¯ä»¥æä¾›æ›´å…·é’ˆå¯¹æ€§çš„å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id="vlan"&gt;VLAN
&lt;/h2&gt;&lt;p&gt;VLANï¼ˆè™šæ‹Ÿå±€åŸŸç½‘ï¼‰æ˜¯ä¸€é¡¹åŸºç¡€ä¸”é‡è¦çš„ç½‘ç»œæŠ€æœ¯ï¼Œå®ƒèƒ½å°†å•ä¸€çš„ç‰©ç†ç½‘ç»œåœ¨é€»è¾‘ä¸Šåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¹¿æ’­åŸŸã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠ“ä½VLANçš„æ ¸å¿ƒè¦ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§åˆ†ç±»&lt;/th&gt;
&lt;th&gt;å…³é”®è¦ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä¸€ä¸ªç‰©ç†å±€åŸŸç½‘é€»è¾‘åˆ’åˆ†ä¸ºå¤šä¸ªå¹¿æ’­åŸŸï¼Œå®ç°è™šæ‹Ÿå·¥ä½œç»„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸš€ ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™åˆ¶å¹¿æ’­åŸŸã€å¢å¼ºå®‰å…¨æ€§ã€æé«˜ç½‘ç»œå¥å£®æ€§ã€çµæ´»ç»„å»ºè™šæ‹Ÿå·¥ä½œç»„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ·ï¸ å…³é”®æŠ€æœ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;IEEE 802.1Qåè®®æ ‡å‡†ï¼Œåœ¨ä»¥å¤ªç½‘å¸§ä¸­æ’å…¥4å­—èŠ‚VLANæ ‡ç­¾ï¼ˆTagï¼‰è¿›è¡Œæ ‡è¯†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“ å¸¸è§åˆ’åˆ†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºç«¯å£ã€åŸºäºMACåœ°å€ã€åŸºäºç½‘ç»œå±‚ï¼ˆå¦‚IPï¼‰ã€åŸºäºIPç»„æ’­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”Œ ç«¯å£ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Accessæ¥å£ï¼ˆè¿æ¥ç»ˆç«¯ï¼‰ã€Trunkæ¥å£ï¼ˆè®¾å¤‡äº’è”ï¼‰ã€Hybridæ¥å£ï¼ˆæ··åˆç‰¹æ€§ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£vlançš„å·¥ä½œåŸç†"&gt;ğŸ’¡ ç†è§£VLANçš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;VLANçš„æ ¸å¿ƒåœ¨äºâ€œæ‰“æ ‡ç­¾â€å’Œç«¯å£å¤„ç†è§„åˆ™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;VLANæ ‡ç­¾ä¸å¸§æ ¼å¼&lt;/strong&gt;ï¼šè¦ä½¿äº¤æ¢æœºè¯†åˆ«ä¸åŒVLANçš„æµé‡ï¼Œéœ€è¦éµå¾ªIEEE 802.1Qåè®®ã€‚è¯¥åè®®åœ¨æ ‡å‡†çš„ä»¥å¤ªç½‘æ•°æ®å¸§çš„æºMACåœ°å€å’Œç±»å‹å­—æ®µä¹‹é—´ï¼Œæ’å…¥äº†4ä¸ªå­—èŠ‚çš„VLANæ ‡ç­¾ã€‚è¿™ä¸ªæ ‡ç­¾é‡Œæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯12ä½çš„VLAN IDï¼Œå®ƒå”¯ä¸€åœ°æ ‡è¯†äº†æ•°æ®å¸§å±äºå“ªä¸ªVLANï¼Œæœ‰æ•ˆå€¼èŒƒå›´æ˜¯1-4094ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç«¯å£å¤„ç†è§„åˆ™&lt;/strong&gt;ï¼šäº¤æ¢æœºç«¯å£å¯¹æ•°æ®å¸§çš„å¤„ç†æ–¹å¼å†³å®šäº†VLANçš„è¾¹ç•Œã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Accessç«¯å£&lt;/strong&gt;ï¼šé€šå¸¸è¿æ¥ç”µè„‘ã€æ‰“å°æœºç­‰ç»ˆç«¯è®¾å¤‡ã€‚å½“æ”¶åˆ°ä¸å¸¦æ ‡ç­¾çš„å¸§æ—¶ï¼Œå®ƒä¼šæ‰“ä¸Šè¯¥ç«¯å£çš„é»˜è®¤VLAN IDã€‚å‘é€å¸§æ—¶ï¼Œåˆ™å‰¥ç¦»VLANæ ‡ç­¾ï¼Œä¿è¯ç»ˆç«¯æ”¶åˆ°çš„æ˜¯æ ‡å‡†ä»¥å¤ªç½‘å¸§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Trunkç«¯å£&lt;/strong&gt;ï¼šç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨äº’è”ï¼Œå…è®¸å¤šä¸ªVLANçš„æµé‡é€šè¿‡ã€‚è¿™äº›å¸§åœ¨Trunké“¾è·¯ä¸Šä¼ è¾“æ—¶&lt;strong&gt;å¿…é¡»æºå¸¦VLANæ ‡ç­¾&lt;/strong&gt;ï¼Œä»¥ä¾¿å¯¹ç«¯è®¾å¤‡èƒ½æ­£ç¡®è¯†åˆ«å¹¶å°†å…¶è½¬å‘åˆ°ç›¸åº”çš„VLANä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-vlané—´çš„é€šä¿¡"&gt;ğŸŒ VLANé—´çš„é€šä¿¡
&lt;/h3&gt;&lt;p&gt;ç”±äºVLANåœ¨äºŒå±‚éš”ç¦»äº†å¹¿æ’­åŸŸï¼Œ&lt;strong&gt;ä¸åŒVLANä¹‹é—´çš„è®¾å¤‡æ— æ³•ç›´æ¥è¿›è¡ŒäºŒå±‚é€šä¿¡&lt;/strong&gt;ã€‚è¦å®ç°VLANé—´çš„é€šä¿¡ï¼Œå¿…é¡»å€ŸåŠ©&lt;strong&gt;ä¸‰å±‚ï¼ˆç½‘ç»œå±‚ï¼‰è®¾å¤‡&lt;/strong&gt;ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰å±‚äº¤æ¢æœº&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å¸¸ç”¨å’Œé«˜æ•ˆçš„æ–¹æ³•ã€‚åœ¨ä¸‰å±‚äº¤æ¢æœºä¸Šï¼Œå¯ä»¥ä¸ºæ¯ä¸ªVLANåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ¥å£ï¼ˆVLAN Interfaceï¼‰ï¼Œå¹¶ä¸ºå…¶åˆ†é…IPåœ°å€ã€‚è¿™ä¸ªæ¥å£å……å½“è¯¥VLANå†…æ‰€æœ‰è®¾å¤‡çš„ç½‘å…³ã€‚å½“ä¸åŒVLANçš„è®¾å¤‡éœ€è¦é€šä¿¡æ—¶ï¼Œæ•°æ®åŒ…ä¼šå‘é€åˆ°è‡ªå·±çš„ç½‘å…³ï¼Œç„¶åç”±ä¸‰å±‚äº¤æ¢æœºæ ¹æ®IPåœ°å€è¿›è¡Œè·¯ç”±è½¬å‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±å™¨&lt;/strong&gt;ï¼šä¹Ÿå¯ä»¥ä½¿ç”¨è·¯ç”±å™¨å®ç°VLANé—´è·¯ç”±ï¼Œä¾‹å¦‚é€šè¿‡â€œå•è‡‚è·¯ç”±â€æ–¹å¼ï¼Œå³è·¯ç”±å™¨çš„å•ä¸ªç‰©ç†æ¥å£é€šè¿‡å¤šä¸ªå­æ¥å£å¤„ç†å¤šä¸ªVLANçš„æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ‰©å±•ä¸æ¼”è¿›"&gt;ğŸ”„ æ‰©å±•ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;éšç€ç½‘ç»œè§„æ¨¡æ‰©å¤§ï¼ŒVLANçš„4094ä¸ªIDå¯èƒ½ä¸å¤Ÿç”¨ï¼Œäºæ˜¯å‡ºç°äº†&lt;strong&gt;QinQ&lt;/strong&gt;æŠ€æœ¯ï¼Œåœ¨802.1Qæ ‡ç­¾å¤–å†å°è£…ä¸€å±‚æ ‡ç­¾ï¼Œæå¤§æ‰©å±•äº†VLANç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¤§å‹æ•°æ®ä¸­å¿ƒï¼Œè™šæ‹Ÿæœºéœ€è¦å¤§èŒƒå›´åŠ¨æ€è¿ç§»ï¼ŒVLANçš„äºŒå±‚èŒƒå›´å—é™ã€‚å› æ­¤å‡ºç°äº†&lt;strong&gt;VXLAN&lt;/strong&gt;æŠ€æœ¯ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§å åŠ ç½‘ç»œæŠ€æœ¯ï¼Œé€šè¿‡å°†åŸå§‹äºŒå±‚å¸§å°è£…åœ¨UDPæ•°æ®æŠ¥ä¸­ï¼Œåœ¨ä¸‰å±‚IPç½‘ç»œä¹‹ä¸Šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„äºŒå±‚ç½‘ç»œï¼Œä»è€Œæ”¯æŒæ›´å¤§è§„æ¨¡çš„ç§Ÿæˆ·éš”ç¦»å’Œæ›´çµæ´»çš„è™šæ‹Ÿæœºè¿ç§»ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£VLANã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„VLANé…ç½®æˆ–ä¸å…¶ä»–ç½‘ç»œæŠ€æœ¯çš„ç»“åˆåº”ç”¨æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¤šå€æŠ€æœ¯"&gt;å¤šå€æŠ€æœ¯
&lt;/h2&gt;&lt;p&gt;å¤šå€æŠ€æœ¯ä¸»è¦å½’å±äº&lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt;çš„&lt;strong&gt;åª’è´¨æ¥å…¥æ§åˆ¶ï¼ˆMACï¼‰å­å±‚&lt;/strong&gt;ï¼Œä½†å®ƒä¸&lt;strong&gt;ç‰©ç†å±‚&lt;/strong&gt;çš„å…³ç³»å¯†ä¸å¯åˆ†ï¼Œéœ€è¦ä¸¤è€…çš„ç´§å¯†é…åˆæ‰èƒ½å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ¢³ç†äº†å„ä»£é€šä¿¡ç³»ç»Ÿä¸­å…¸å‹çš„å¤šå€æŠ€æœ¯åŠå…¶ä¸åè®®å±‚çš„å¯¹åº”å…³ç³»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é€šä¿¡ä¸–ä»£&lt;/th&gt;
&lt;th&gt;å…¸å‹å¤šå€æŠ€æœ¯&lt;/th&gt;
&lt;th&gt;æ•°æ®é“¾è·¯å±‚ï¼ˆMACå­å±‚ï¼‰çš„æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;th&gt;ç‰©ç†å±‚çš„æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;1G&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢‘åˆ†å¤šå€ (FDMA)&lt;/td&gt;
&lt;td&gt;å†³å®šä½•æ—¶åˆ†é…æˆ–ä½¿ç”¨ç‰¹å®šé¢‘ç‚¹èµ„æº&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä¸åŒé¢‘ç‡çš„è½½æ³¢ä¿¡å·ã€è°ƒåˆ¶/è§£è°ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2G (å¦‚GSM)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¶åˆ†å¤šå€ (TDMA) + FDMA&lt;/td&gt;
&lt;td&gt;ä¸ºç”¨æˆ·åˆ†é…ç‰¹å®šçš„æ—¶éš™ï¼Œå¹¶æ§åˆ¶å…¶åœ¨è§„å®šæ—¶éš™å†…å‘é€æ•°æ®&lt;/td&gt;
&lt;td&gt;æä¾›ç²¾ç¡®çš„æ—¶é—´åŒæ­¥ã€æ—¶éš™åˆ’åˆ†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;3G (å¦‚CDMA)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç åˆ†å¤šå€ (CDMA)&lt;/td&gt;
&lt;td&gt;ä¸ºç”¨æˆ·åˆ†é…å”¯ä¸€çš„ç åºåˆ—ï¼Œå¹¶æ§åˆ¶å…¶ä½¿ç”¨è¯¥ç åºåˆ—è¿›è¡Œé€šä¿¡&lt;/td&gt;
&lt;td&gt;å®ç°æ‰©é¢‘/è§£æ‰©ã€ç åºåˆ—ç”Ÿæˆä¸ç›¸å…³æ£€æµ‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;4G / 5G&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ­£äº¤é¢‘åˆ†å¤šå€ (OFDMA)&lt;/td&gt;
&lt;td&gt;å°†èµ„æºå—ï¼ˆå­è½½æ³¢é›†åˆï¼‰åŠ¨æ€åˆ†é…ç»™ä¸åŒç”¨æˆ·&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆæ­£äº¤çš„å­è½½æ³¢ã€è¿›è¡ŒOFDMè°ƒåˆ¶/è§£è°ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸¤å±‚å¦‚ä½•åˆ†å·¥åä½œ"&gt;ğŸ’¡ ä¸¤å±‚å¦‚ä½•åˆ†å·¥åä½œ
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥è¿™æ ·ç†è§£å®ƒä»¬çš„åˆ†å·¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®é“¾è·¯å±‚ï¼ˆMACå­å±‚ï¼‰çš„è§’è‰²ï¼šåƒæ˜¯äº¤é€šæŒ‡æŒ¥ä¸­å¿ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MACå­å±‚è´Ÿè´£åˆ¶å®šâ€œè§„åˆ™â€å’Œâ€œè°ƒåº¦â€ã€‚å®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯&lt;strong&gt;è§£å†³â€œä»€ä¹ˆæ—¶å€™ï¼Œè°å¯ä»¥å‘é€æ•°æ®â€çš„é—®é¢˜&lt;/strong&gt;ï¼Œç¡®ä¿å¤šä¸ªç”¨æˆ·èƒ½å¤Ÿå…¬å¹³ã€é«˜æ•ˆä¸”æ— å†²çªåœ°å…±äº«åŒä¸€ç‰©ç†ä¼ è¾“ä»‹è´¨ã€‚ä¾‹å¦‚ï¼Œåœ¨TDMAä¸­ï¼ŒMACå±‚å†³å®šç”¨æˆ·Aä½¿ç”¨ç¬¬1ä¸ªæ—¶éš™ï¼Œç”¨æˆ·Bä½¿ç”¨ç¬¬2ä¸ªæ—¶éš™ï¼›åœ¨CSMA/CAï¼ˆè½½æ³¢ä¾¦å¬å¤šå€æ¥å…¥/ç¢°æ’é¿å…ï¼‰ä¸­ï¼ŒMACå±‚è§„å®šäº†è®¾å¤‡åœ¨å‘é€æ•°æ®å‰éœ€è¦å…ˆç›‘å¬ä¿¡é“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰©ç†å±‚çš„è§’è‰²ï¼šåƒæ˜¯å®é™…ä¿®å»ºå’Œç»´æŠ¤é“è·¯çš„æ–½å·¥é˜Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç‰©ç†å±‚è´Ÿè´£å°†MACå±‚çš„å†³ç­–&lt;strong&gt;è½¬åŒ–ä¸ºå®é™…çš„ç”µä¿¡å·æˆ–ç”µç£æ³¢&lt;/strong&gt;è¿›è¡Œä¼ è¾“ã€‚å®ƒæä¾›å¤šå€æŠ€æœ¯æ‰€éœ€çš„&lt;strong&gt;åº•å±‚ç¡¬ä»¶æ”¯æŒå’Œä¿¡å·å¤„ç†èƒ½åŠ›&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼ŒFDMAè¦æ±‚ç‰©ç†å±‚èƒ½äº§ç”Ÿå’Œè¯†åˆ«ä¸åŒé¢‘ç‡çš„è½½æ³¢ï¼›CDMAè¦æ±‚ç‰©ç†å±‚èƒ½ç”Ÿæˆå’Œè¯†åˆ«å¤æ‚çš„ä¼ªéšæœºç åºåˆ—ï¼›OFDMAåˆ™è¦æ±‚ç‰©ç†å±‚èƒ½äº§ç”Ÿå¤§é‡ç²¾ç¡®æ­£äº¤çš„å­è½½æ³¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦"&gt;ğŸŒ ä¸ºä»€ä¹ˆç†è§£è¿™ä¸€ç‚¹å¾ˆé‡è¦
&lt;/h3&gt;&lt;p&gt;æ˜ç¡®å¤šå€æŠ€æœ¯çš„è·¨å±‚ç‰¹æ€§ï¼Œæœ‰åŠ©äºä½ æ›´æ·±å…¥åœ°ç†è§£ç½‘ç»œé€šä¿¡çš„å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯æ¼”è¿›&lt;/strong&gt;ï¼šä»1Gåˆ°5Gï¼Œå¤šå€æŠ€æœ¯çš„æ¯ä¸€æ¬¡é©æ–°ï¼ˆFDMA -&amp;gt; TDMA -&amp;gt; CDMA -&amp;gt; OFDMAï¼‰éƒ½ä¸ä»…ä»…æ˜¯ç‰©ç†å±‚ä¿¡å·å¤„ç†æ–¹å¼çš„å‡çº§ï¼Œä¹Ÿå¿…ç„¶ä¼´éšç€MACå±‚è°ƒåº¦ç®—æ³•å’Œåè®®çš„æ·±åˆ»å˜é©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè®¾è®¡ä¸ä¼˜åŒ–&lt;/strong&gt;åœ¨å®é™…é€šä¿¡ç³»ç»Ÿï¼ˆå¦‚Wi-Fiã€èœ‚çªç½‘ç»œï¼‰çš„è®¾è®¡å’Œä¼˜åŒ–ä¸­ï¼Œéœ€è¦åŒæ—¶è€ƒè™‘ç‰©ç†å±‚ï¼ˆå¦‚ä¿¡é“ç¼–ç ã€è°ƒåˆ¶æ–¹å¼ï¼‰å’ŒMACå±‚ï¼ˆå¦‚è°ƒåº¦ç­–ç•¥ã€å†²çªè§£å†³æœºåˆ¶ï¼‰çš„ååŒè®¾è®¡ï¼Œæ‰èƒ½è¾¾åˆ°æœ€ä½³æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å˜æ¸…å¤šå€æŠ€æœ¯åœ¨ç½‘ç»œåè®®æ ˆä¸­çš„ä½ç½®ã€‚å¦‚æœä½ å¯¹æŸä¸€ç§ç‰¹å®šçš„å¤šå€æŠ€æœ¯ï¼ˆæ¯”å¦‚Wi-Fiä¸­çš„CSMA/CAæˆ–5G NRä¸­çš„OFDMAï¼‰çš„å…·ä½“å·¥ä½œæµç¨‹ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cdma"&gt;CDMA
&lt;/h2&gt;&lt;p&gt;ç åˆ†å¤šå€ï¼ˆCDMAï¼‰æ˜¯ä¸€é¡¹å…è®¸ä¼—å¤šç”¨æˆ·åœ¨åŒä¸€é¢‘ç‡ã€åŒä¸€æ—¶é—´è¿›è¡Œé€šä¿¡çš„æ— çº¿æŠ€æœ¯ï¼Œå®ƒé€šè¿‡ç‹¬ç‰¹çš„â€œç¼–ç â€æ–¹å¼æ¥åŒºåˆ†ä¸åŒç”¨æˆ·ï¼Œæ˜¯ç¬¬ä¸‰ä»£ï¼ˆ3Gï¼‰ç§»åŠ¨é€šä¿¡çš„æ ¸å¿ƒæŠ€æœ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¦‚æ‹¬äº†CDMAçš„æ ¸å¿ƒç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ç åˆ†å¤šå€ (CDMA) çš„æ ¸å¿ƒç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¯ æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨&lt;strong&gt;å„è‡ªç‹¬ç‰¹çš„ç¼–ç åºåˆ—&lt;/strong&gt;æ¥åŒºåˆ†ç”¨æˆ·ï¼Œæ‰€æœ‰ç”¨æˆ·å…±äº«åŒä¸€é¢‘ç‡å’Œæ—¶æ®µã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸš€ ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿå®¹é‡å¤§&lt;/strong&gt;ï¼ˆç†è®ºä¸Šä¸ºGSMçš„4-5å€ï¼‰ã€&lt;strong&gt;é€šè¯è´¨é‡ä½³&lt;/strong&gt;ï¼ˆæ”¯æŒæ›´é«˜è´¨é‡çš„è¯­éŸ³ç¼–ç å’Œè½¯åˆ‡æ¢ï¼‰ã€&lt;strong&gt;é¢‘ç‡è§„åˆ’ç®€å•&lt;/strong&gt;ï¼ˆç›¸é‚»å°åŒºå¯ä½¿ç”¨ç›¸åŒé¢‘ç‡ï¼‰ã€&lt;strong&gt;ä¿å¯†æ€§å¼º&lt;/strong&gt;ã€&lt;strong&gt;ç»ˆç«¯å‘å°„åŠŸç‡ä½&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ› ï¸ å®ç°åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‰©é¢‘é€šä¿¡æŠ€æœ¯&lt;/strong&gt;ï¼šå°†åŸå§‹ä¿¡å·çš„é¢‘è°±æ‰©å±•åˆ°ä¸€ä¸ªæ›´å®½çš„é¢‘å¸¦ä¸Šè¿›è¡Œä¼ è¾“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“ å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸‰ä»£ç§»åŠ¨é€šä¿¡æ ‡å‡†ï¼ˆå¦‚CDMA2000ã€W-CDMAï¼‰ã€å…¨çƒå®šä½ç³»ç»Ÿ(GPS)ã€å«æ˜Ÿé€šä¿¡ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ”§ å…³é”®æŠ€æœ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠŸç‡æ§åˆ¶ã€RAKEæ¥æ”¶ã€è½¯åˆ‡æ¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-cdmaæ˜¯å¦‚ä½•å·¥ä½œçš„"&gt;ğŸ’¡ CDMAæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥æŠŠCDMAçš„å·¥ä½œæ–¹å¼æƒ³è±¡åœ¨ä¸€ä¸ªå˜ˆæ‚çš„é¸¡å°¾é…’ä¼šä¸Šã€‚è®¸å¤šäººï¼ˆç”¨æˆ·ï¼‰åœ¨åŒä¸€ä¸ªæˆ¿é—´ï¼ˆé¢‘æ®µï¼‰é‡ŒåŒæ—¶è¯´è¯ï¼Œä½†å› ä¸ºä½ åªæ‡‚ä¸€ç§ç‰¹å®šçš„è¯­è¨€æˆ–æš—å·ï¼ˆåœ°å€ç ï¼‰ï¼Œæ‰€ä»¥ä½ åªèƒ½å¬æ‡‚å’Œä½ ä½¿ç”¨åŒä¸€ç§è¯­è¨€çš„äººå¯¹è¯ï¼Œå…¶ä»–äººçš„è°ˆè¯å¯¹ä½ æ¥è¯´åªæ˜¯èƒŒæ™¯å™ªéŸ³ã€‚CDMAæ­£æ˜¯é€šè¿‡è¿™ç§åŸç†å®ç°é€šä¿¡çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æŠ€æœ¯å®ç°ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š&lt;strong&gt;ç¼–ç ã€æ··åˆã€åˆ†ç¦»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç &lt;/strong&gt;ï¼šæ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯æ•°æ®ä¼šè¢«ä¸€ä¸ª&lt;strong&gt;ç‹¬ä¸€æ— äºŒçš„ã€é«˜é€Ÿçš„ä¼ªéšæœºç ï¼ˆPNç ï¼‰&lt;/strong&gt; è¿›è¡Œè°ƒåˆ¶ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šå°†åŸå§‹çª„å¸¦ä¿¡å·çš„é¢‘è°±å¤§å¤§æ‰©å±•ï¼Œå› æ­¤CDMAä¹Ÿè¢«ç§°ä¸º&lt;strong&gt;æ‰©é¢‘å¤šå€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆä¼ è¾“&lt;/strong&gt;ï¼šæ‰€æœ‰ç»è¿‡æ‰©é¢‘çš„ç”¨æˆ·ä¿¡å·åœ¨åŒä¸€é¢‘ç‡ã€åŒä¸€æ—¶é—´è¢«å‘é€å‡ºå»ï¼Œåœ¨ä¿¡é“ä¸­æ··åˆåœ¨ä¸€èµ·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç¦»è§£è°ƒ&lt;/strong&gt;ï¼šåœ¨æ¥æ”¶ç«¯ï¼Œæ¥æ”¶æœºä½¿ç”¨ä¸å‘é€ç«¯&lt;strong&gt;å®Œå…¨ç›¸åŒçš„æœ¬åœ°ä¼ªéšæœºç &lt;/strong&gt; å¯¹æ”¶åˆ°çš„æ··åˆä¿¡å·è¿›è¡Œâ€œç›¸å…³æ£€æµ‹â€ã€‚åªæœ‰åŒ¹é…çš„ä¿¡å·æ‰èƒ½è¢«è¿˜åŸï¼ˆè§£æ‰©ï¼‰æˆåŸå§‹ä¿¡æ¯ï¼Œè€Œä¸åŒ¹é…çš„ä¿¡å·åˆ™è¢«è§†ä¸ºèƒŒæ™¯å™ªå£°è¢«è¿‡æ»¤æ‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-cdmaçš„å…³é”®æŠ€æœ¯ä¸ç‹¬ç‰¹ä¼˜åŠ¿"&gt;ğŸŒ CDMAçš„å…³é”®æŠ€æœ¯ä¸ç‹¬ç‰¹ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†é«˜æ•ˆç¨³å®šåœ°å·¥ä½œï¼ŒCDMAä¾èµ–å‡ é¡¹æ ¸å¿ƒæŠ€æœ¯ï¼Œè¿™ä¹Ÿæ„æˆäº†å…¶æ˜¾è‘—ä¼˜åŠ¿çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸç‡æ§åˆ¶æŠ€æœ¯&lt;/strong&gt;ï¼šè¿™æ˜¯CDMAçš„&lt;strong&gt;æ ¸å¿ƒæŠ€æœ¯&lt;/strong&gt;ã€‚ç”±äºæ‰€æœ‰ç”¨æˆ·å…±äº«åŒä¸€é¢‘ç‡ï¼Œå¦‚æœç¦»åŸºç«™è¿‘çš„æ‰‹æœºå‘å°„åŠŸç‡è¿‡å¤§ï¼Œä¼šâ€œæ·¹æ²¡â€è¿œå¤„æ‰‹æœºçš„ä¿¡å·ï¼ˆâ€œè¿œè¿‘æ•ˆåº”â€ï¼‰ã€‚åŠŸç‡æ§åˆ¶èƒ½åŠ¨æ€è°ƒæ•´æ¯éƒ¨æ‰‹æœºçš„å‘å°„åŠŸç‡ï¼Œç¡®ä¿æ‰€æœ‰ä¿¡å·åˆ°è¾¾åŸºç«™æ—¶å¼ºåº¦åŸºæœ¬ä¸€è‡´ï¼Œä»è€Œä¿è¯é€šè¯è´¨é‡å¹¶æœ€å¤§åŒ–ç³»ç»Ÿå®¹é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯åˆ‡æ¢æŠ€æœ¯&lt;/strong&gt;ï¼šå½“æ‰‹æœºåœ¨åŸºç«™ä¹‹é—´ç§»åŠ¨æ—¶ï¼ŒCDMAé‡‡ç”¨â€œ&lt;strong&gt;å…ˆè¿æ¥ï¼Œå†æ–­å¼€&lt;/strong&gt;â€çš„è½¯åˆ‡æ¢æ–¹å¼ã€‚æ‰‹æœºä¼šå…ˆä¸ç›®æ ‡åŸºç«™å»ºç«‹è¿æ¥ï¼Œç„¶åå†æ–­å¼€ä¸åŸåŸºç«™çš„è¿æ¥ï¼Œæœ‰æ•ˆé¿å…äº†é€šè¯ä¸­æ–­ï¼ˆâ€œæ‰è¯â€ï¼‰ï¼Œæ˜¾è‘—æé«˜äº†é€šè¯è´¨é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RAKEæ¥æ”¶æŠ€æœ¯&lt;/strong&gt;ï¼šæ— çº¿ç”µæ³¢åœ¨ä¼ æ’­ä¸­ä¼šäº§ç”Ÿå¤šå¾„ä¿¡å·ï¼ˆå¦‚ç»è¿‡å»ºç­‘ç‰©åå°„çš„ä¿¡å·ï¼‰ã€‚RAKEæ¥æ”¶æœºå¯ä»¥åƒè€™å­ä¸€æ ·ï¼Œåˆ†åˆ«æ¥æ”¶è¿™äº›ä¸åŒè·¯å¾„çš„ä¿¡å·ï¼Œç„¶åå°†å®ƒä»¬åˆå¹¶ï¼Œåè€Œèƒ½å¢å¼ºä¿¡å·å¼ºåº¦ï¼Œå¯¹æŠ—å¤šå¾„è¡°è½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-cdmaçš„åº”ç”¨ä¸å‘å±•å†ç¨‹"&gt;ğŸ“¡ CDMAçš„åº”ç”¨ä¸å‘å±•å†ç¨‹
&lt;/h3&gt;&lt;p&gt;CDMAæŠ€æœ¯æºäº20ä¸–çºª50å¹´ä»£çš„å†›äº‹é€šä¿¡ï¼Œå› å…¶&lt;strong&gt;æŠ—å¹²æ‰°èƒ½åŠ›å¼º&lt;/strong&gt;å’Œ&lt;strong&gt;ä¿å¯†æ€§é«˜&lt;/strong&gt;è€Œå—åˆ°é‡è§†ã€‚ç›´åˆ°20ä¸–çºª90å¹´ä»£ï¼Œéšç€é«˜é€šå…¬å¸å°†å…¶æ¨å‘æ°‘ç”¨ï¼ŒCDMAæ‰è¿æ¥å¤§å‘å±•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•†ç”¨åŒ–&lt;/strong&gt;ï¼š1995å¹´ï¼Œç¬¬ä¸€ä¸ªçª„å¸¦CDMAæ ‡å‡†IS-95æŠ•å…¥å•†ç”¨ï¼Œæˆä¸ºç¬¬äºŒä»£ï¼ˆ2Gï¼‰ç§»åŠ¨é€šä¿¡çš„é‡è¦åŠ›é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;3Gæ ¸å¿ƒ&lt;/strong&gt;ï¼šCDMAæˆä¸ºç¬¬ä¸‰ä»£ç§»åŠ¨é€šä¿¡ï¼ˆ3Gï¼‰çš„ç©ºä¸­æ¥å£æ ‡å‡†æ ¸å¿ƒæŠ€æœ¯ï¼Œè¡ç”Ÿå‡º&lt;strong&gt;CDMA2000&lt;/strong&gt;ï¼ˆç”±ç¾å›½æå‡ºï¼‰å’Œ&lt;strong&gt;W-CDMA&lt;/strong&gt;ï¼ˆç”±æ¬§æ´²å’Œæ—¥æœ¬æå‡ºï¼‰ç­‰ä¸»è¦æ ‡å‡†ã€‚ä¸­å›½æå‡ºçš„&lt;strong&gt;TD-SCDMA&lt;/strong&gt;æ ‡å‡†ä¹Ÿé‡‡ç”¨äº†CDMAæŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¿æ³›åº”ç”¨&lt;/strong&gt;ï¼šé™¤äº†ç§»åŠ¨é€šä¿¡ï¼ŒCDMAæŠ€æœ¯è¿˜å¹¿æ³›åº”ç”¨äº&lt;strong&gt;å…¨çƒå®šä½ç³»ç»Ÿï¼ˆGPSï¼‰&lt;/strong&gt;ã€å«æ˜Ÿç”µè¯ï¼ˆå¦‚å…¨çƒæ˜Ÿç³»ç»Ÿï¼‰ç­‰é¢†åŸŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸å…¶ä»–å¤šå€æŠ€æœ¯çš„æ¯”è¾ƒ"&gt;ğŸ”„ ä¸å…¶ä»–å¤šå€æŠ€æœ¯çš„æ¯”è¾ƒ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´å¥½åœ°ç†è§£CDMAï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä¸å¦å¤–ä¸¤ç§ç»å…¸çš„å¤šå€æŠ€æœ¯è¿›è¡Œç®€å•æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¢‘åˆ†å¤šå€ï¼ˆFDMAï¼‰&lt;/strong&gt;ï¼šå°†æ€»é¢‘å¸¦åˆ’åˆ†æˆå¤šä¸ª&lt;strong&gt;äº’ä¸é‡å çš„å­é¢‘å¸¦&lt;/strong&gt;ï¼Œæ¯ä¸ªç”¨æˆ·ç‹¬å ä¸€ä¸ªé¢‘å¸¦è¿›è¡Œé€šä¿¡ã€‚å°±åƒä¸€æ¡å¤§è·¯è¢«åˆ†å‰²æˆå¤šæ¡ç‹¬ç«‹è½¦é“ã€‚æ—©æœŸçš„æ¨¡æ‹Ÿèœ‚çªç³»ç»Ÿï¼ˆ1Gï¼‰é‡‡ç”¨æ­¤æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶åˆ†å¤šå€ï¼ˆTDMAï¼‰&lt;/strong&gt;ï¼šå°†æ—¶é—´åˆ†å‰²æˆå‘¨æœŸæ€§çš„&lt;strong&gt;å¸§ï¼Œæ¯ä¸€å¸§å†åˆ†å‰²æˆè‹¥å¹²ä¸ªæ—¶éš™&lt;/strong&gt;ï¼Œæ¯ä¸ªç”¨æˆ·åœ¨ä¸€ä¸ªæŒ‡å®šçš„æ—¶éš™å†…é€šä¿¡ã€‚å°±åƒä¸€æ¡å•è½¦é“ä¸Šï¼Œè½¦è¾†è¢«è§„å®šæŒ‰æ—¶é—´é¡ºåºä¾æ¬¡é€šè¿‡ã€‚GSMï¼ˆ2Gï¼‰ç³»ç»Ÿé‡‡ç”¨äº†FDMAå’ŒTDMAçš„ç»“åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç åˆ†å¤šå€ï¼ˆCDMAï¼‰&lt;/strong&gt;ï¼šæ‰€æœ‰ç”¨æˆ·&lt;strong&gt;åŒæ—¶ä½¿ç”¨æ•´ä¸ªé¢‘å¸¦&lt;/strong&gt;ï¼Œä½†é ä¸åŒçš„ç å‹æ¥åŒºåˆ†ã€‚å°±åƒæ‰€æœ‰äººåœ¨åŒä¸€ä¸ªæˆ¿é—´é‡ŒåŒæ—¶äº¤è°ˆï¼Œä½†å„è‡ªä½¿ç”¨ä¸åŒçš„è¯­è¨€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢äº†è§£ç åˆ†å¤šå€é€šä¿¡æŠ€æœ¯ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„åº”ç”¨æ ‡å‡†ï¼ˆå¦‚CDMA2000ï¼‰æˆ–å…¶å…³é”®æŠ€æœ¯æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cdma-æ•ˆç‡"&gt;CDMA æ•ˆç‡
&lt;/h2&gt;&lt;p&gt;æ‚¨è¿™ä¸ªé—®é¢˜ç¡®å®ç‚¹åˆ°äº†CDMAæŠ€æœ¯çš„ä¸€ä¸ªæ ¸å¿ƒç‰¹ç‚¹ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å°†å•ä¸ªç å…ƒæ‰©å±•ä¸ºå¤šä¸ªç ç‰‡ï¼Œä»å•ä¸€ä¿¡æ¯ä¼ è¾“çš„è§’åº¦çœ‹ï¼Œç¡®å®ä¼šå ç”¨æ›´å®½çš„é¢‘å¸¦ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ç§â€œæ•ˆç‡ç‰ºç‰²â€&lt;/strong&gt;ã€‚ç„¶è€Œï¼ŒCDMAçš„ç²¾å¦™ä¹‹å¤„åœ¨äºï¼Œå®ƒé€šè¿‡è¿™ç§æ‰©å±•ï¼Œæ¢æ¥äº†æ•´ä¸ªé€šä¿¡ç³»ç»Ÿåœ¨&lt;strong&gt;æŠ—å¹²æ‰°èƒ½åŠ›ã€ç³»ç»Ÿå®¹é‡å’Œçµæ´»æ€§&lt;/strong&gt;ä¸Šçš„å·¨å¤§æå‡ï¼Œæœ€ç»ˆå®ç°äº†æ›´é«˜æ•ˆçš„ç³»ç»Ÿçº§é¢‘è°±åˆ©ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®æ‚¨å¿«é€Ÿæ¢³ç†å…¶ä¸­çš„æƒè¡¡ä¸æ”¶ç›Šï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;å¸¦æ¥çš„â€œç‰ºç‰²â€æˆ–â€œä»£ä»·â€&lt;/th&gt;
&lt;th&gt;ç”±æ­¤æ¢å–çš„â€œç³»ç»Ÿçº§æ”¶ç›Šâ€&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é¢‘å¸¦åˆ©ç”¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ä¸ªç”¨æˆ·ä¼ è¾“å ç”¨&lt;strong&gt;æ›´å®½é¢‘è°±&lt;/strong&gt;ï¼ˆä¾‹å¦‚1.25MHzï¼‰&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰ç”¨æˆ·&lt;strong&gt;å…±äº«åŒä¸€é¢‘æ®µ&lt;/strong&gt;ï¼Œæ— éœ€å¤æ‚çš„é¢‘ç‡è§„åˆ’ï¼Œæé«˜äº†é¢‘è°±å¤ç”¨ç‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŠ—å¹²æ‰°èƒ½åŠ›&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰ç”¨ä¿¡å·çš„åŠŸç‡è°±å¯†åº¦è¢«å¤§å¹…&lt;strong&gt;é™ä½&lt;/strong&gt;ï¼Œä»¿ä½›â€œéšè—â€åœ¨å™ªå£°ä¸­&lt;/td&gt;
&lt;td&gt;é€šè¿‡æ¥æ”¶ç«¯çš„&lt;strong&gt;ç›¸å…³è§£æ‰©&lt;/strong&gt;ï¼Œèƒ½å°†å¹²æ‰°ä¿¡å·åˆ†æ•£æŠ‘åˆ¶ï¼Œæå¤§å¢å¼ºæŠ—çª„å¸¦å¹²æ‰°å’Œå¤šå¾„å¹²æ‰°çš„èƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿå®¹é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿæˆä¸º&lt;strong&gt;è‡ªå¹²æ‰°ç³»ç»Ÿ&lt;/strong&gt;ï¼Œç”¨æˆ·å¢å¤šä¼šå¯¼è‡´èƒŒæ™¯å™ªå£°ï¼ˆå¹²æ‰°ï¼‰æŠ¬å‡&lt;/td&gt;
&lt;td&gt;å…·å¤‡&lt;strong&gt;è½¯å®¹é‡&lt;/strong&gt;ç‰¹æ€§ï¼šå¯é€šè¿‡è½»å¾®é™ä½é€šè¯è´¨é‡æ¥å®¹çº³æ›´å¤šç”¨æˆ·ï¼›é‡‡ç”¨&lt;strong&gt;è¯éŸ³æ¿€æ´»&lt;/strong&gt;å’Œ&lt;strong&gt;å¿«é€ŸåŠŸç‡æ§åˆ¶&lt;/strong&gt;ç­‰æŠ€æœ¯ï¼Œæœ‰æ•ˆé™ä½å¹³å‡å¹²æ‰°ï¼Œä»è€Œæå‡æ•´ä½“å®¹é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£å¤„ç†å¢ç›Šæ˜¯å…³é”®"&gt;ğŸ’¡ ç†è§£â€œå¤„ç†å¢ç›Šâ€æ˜¯å…³é”®
&lt;/h3&gt;&lt;p&gt;æ‚¨æåˆ°çš„â€œä¸€ä¸ªç å…ƒæ‹“å±•ä¸ºå¤šä¸ªç ç‰‡â€ï¼Œè¿™ä¸ªâ€œå¤šä¸ªâ€çš„å€æ•°ï¼Œæ­£æ˜¯CDMAç³»ç»Ÿ&lt;strong&gt;å¤„ç†å¢ç›Š&lt;/strong&gt;çš„ä½“ç°ã€‚ä¾‹å¦‚ï¼Œè‹¥å°†æ•°æ®æ‰©å±•100å€ï¼Œåˆ™å¤„ç†å¢ç›Šä¸º20dBã€‚è¿™ä¸ªå¢ç›Šæ„å‘³ç€ï¼Œåœ¨æ¥æ”¶ç«¯ï¼Œç»è¿‡è§£æ‰©å¤„ç†ï¼Œæœ‰ç”¨ä¿¡å·çš„ä¿¡å™ªæ¯”ç†è®ºä¸Šèƒ½æå‡100å€ã€‚è¿™å°±ä½¿å¾—CDMAç³»ç»Ÿåœ¨æ¶åŠ£çš„ä¿¡é“ç¯å¢ƒä¸‹ä¾ç„¶èƒ½ä¿æŒå¯é é€šä¿¡ã€‚&lt;/p&gt;
&lt;h3 id="-ç³»ç»Ÿçº§çš„é«˜æ•ˆç‰¹æ€§"&gt;ğŸŒ ç³»ç»Ÿçº§çš„é«˜æ•ˆç‰¹æ€§
&lt;/h3&gt;&lt;p&gt;é™¤äº†ä¸Šè¿°åŸç†ï¼ŒCDMAè¿˜é€šè¿‡ä¸€äº›ç‹¬ç‰¹çš„æœºåˆ¶æ¥å®ç°ç³»ç»Ÿæ•´ä½“æ•ˆç‡çš„ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½¯å®¹é‡&lt;/strong&gt;ï¼šåœ¨è¯åŠ¡é‡é«˜å³°æ—¶æ®µï¼ŒCDMAç½‘ç»œå¯ä»¥å…è®¸é€šè¯è´¨é‡æœ‰è½»å¾®ä¸‹é™ï¼ˆé€‚å½“æé«˜è¯¯å¸§ç‡ï¼‰ï¼Œä»¥æ­¤æ¥æ¥çº³æ›´å¤šçš„ç”¨æˆ·é€šè¯ï¼Œè¿™è¢«ç§°ä¸ºâ€œè½¯å®¹é‡â€ã€‚ä¼ ç»Ÿçš„TDMAæˆ–FDMAç³»ç»Ÿæ¯ä¸ªä¿¡é“åªèƒ½æœåŠ¡ä¸€ä¸ªç”¨æˆ·ï¼Œä¸€æ—¦ä¿¡é“å æ»¡å°±ä¼šäº§ç”Ÿå‘¼æŸï¼Œè€ŒCDMAçš„è¿™ç§å¼¹æ€§ä½¿å…¶åœ¨åº”å¯¹çªå‘æµé‡æ—¶æ›´åŠ çµæ´»é«˜æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯åˆ‡æ¢&lt;/strong&gt;ï¼šç§»åŠ¨å°åœ¨åˆ‡æ¢æ—¶å¯ä»¥ä¸æ–°æ—§ä¸¤ä¸ªåŸºç«™åŒæ—¶é€šä¿¡ï¼Œå®ç°â€œå…ˆè¿æ¥ï¼Œåæ–­å¼€â€ã€‚è¿™ä¸ä»…é™ä½äº†æ‰è¯ç‡ï¼Œæå‡äº†ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿå› ä¸ºåœ¨åˆ‡æ¢åŒºåŸŸç§»åŠ¨å°å¯ä»¥é™ä½å‘å°„åŠŸç‡ï¼Œä»è€Œå‡å°‘äº†å¯¹ç³»ç»Ÿçš„æ•´ä½“å¹²æ‰°ï¼Œé—´æ¥æå‡äº†ç½‘ç»œå®¹é‡å’Œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´å…¨é¢åœ°ç†è§£CDMAæŠ€æœ¯çš„æ•ˆç‡é€»è¾‘ã€‚å®ƒçš„è®¾è®¡å“²å­¦å¹¶éè¿½æ±‚å•ä¸ªä¿¡å·ä¼ è¾“çš„æé™æ•ˆç‡ï¼Œè€Œæ˜¯é€šè¿‡æ‰©é¢‘æŠ€æœ¯å®ç°ç³»ç»Ÿæ•´ä½“æ€§èƒ½å’Œå®¹é‡çš„æœ€ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id="é™æ€ä¿¡é“åˆ’åˆ†"&gt;é™æ€ä¿¡é“åˆ’åˆ†
&lt;/h2&gt;&lt;p&gt;ç‰©ç†ä¿¡é“èƒ½åŒæ—¶ä¼ è¾“å¤šæ¡ä¿¡æ¯è€Œä¸ç›¸äº’å¹²æ‰°ï¼Œä¸»è¦ä¾é ä¸€ç³»åˆ—å·§å¦™çš„ &lt;strong&gt;â€œå¤šè·¯å¤ç”¨â€&lt;/strong&gt; æŠ€æœ¯ã€‚è¿™äº›æŠ€æœ¯å°±åƒä¸€ä½é«˜æ•ˆçš„äº¤é€šæŒ‡æŒ¥ï¼Œé€šè¿‡&lt;strong&gt;åˆ†æ—¶ã€åˆ†é¢‘ã€åˆ†ç &lt;/strong&gt;ç­‰æ–¹å¼ï¼Œè®©å¤šæ¡æ•°æ®æµæœ‰åºåœ°å…±äº«åŒä¸€æ¡ç‰©ç†ä¿¡é“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†å››ç§ä¸»æµçš„å¤ç”¨æŠ€æœ¯ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„æ ¸å¿ƒæ€æƒ³ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¤ç”¨æŠ€æœ¯&lt;/th&gt;
&lt;th&gt;åˆ’åˆ†ä¿¡é“çš„ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€æƒ³ï¼ˆæ¯”å–»ï¼‰&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é¢‘åˆ†å¤ç”¨ (FDM)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢‘ç‡&lt;/td&gt;
&lt;td&gt;å°†ä¸€æ¡å®½é˜”çš„å¤§é“åˆ’åˆ†æˆå¤šæ¡å¹¶è¡Œçš„&lt;strong&gt;å•è½¦é“è·¯&lt;/strong&gt;ï¼Œæ¯è¾†è½¦ï¼ˆä¿¡å·ï¼‰åœ¨è‡ªå·±çš„è½¦é“ä¸Šè¡Œé©¶ã€‚&lt;/td&gt;
&lt;td&gt;å¹¿æ’­ç”µå°ã€æœ‰çº¿ç”µè§†ã€æ—©æœŸçš„æ¨¡æ‹Ÿç”µè¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶åˆ†å¤ç”¨ (TDM)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¶é—´&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰è½¦è¾†ï¼ˆä¿¡å·ï¼‰å…±äº«ä¸€æ¡å•è½¦é“ï¼Œä½†&lt;strong&gt;æŒ‰æ—¶é—´ç‰‡è½®æµ&lt;/strong&gt;é€šè¿‡ï¼Œå°±åƒç¯å½¢è·‘é“ä¸Šçš„è¿åŠ¨å‘˜ä¾æ¬¡è·‘æ­¥ã€‚&lt;/td&gt;
&lt;td&gt;æ•°å­—ç”µè¯ç½‘ç»œï¼ˆå¦‚E1/T1çº¿è·¯ï¼‰ã€æ•°å­—é€šä¿¡ç³»ç»Ÿã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç åˆ†å¤ç”¨ (CDM)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–ç &lt;/td&gt;
&lt;td&gt;æ‰€æœ‰è½¦è¾†ï¼ˆä¿¡å·ï¼‰åœ¨åŒä¸€æ—¶é—´ã€åŒä¸€å®½é˜”é©¬è·¯ä¸Šè¡Œé©¶ï¼Œä½†æ¯è¾†è½¦éƒ½ä½¿ç”¨ä¸€ç§&lt;strong&gt;ç‹¬ä¸€æ— äºŒçš„â€œè¯­è¨€â€ï¼ˆç¼–ç ï¼‰&lt;/strong&gt;ï¼Œæ¥æ”¶ç«¯åªèƒ½å¬æ‡‚æŒ‡å®šçš„è¯­è¨€ã€‚&lt;/td&gt;
&lt;td&gt;3Gç§»åŠ¨é€šä¿¡ï¼ˆCDMAï¼‰ã€GPSå¯¼èˆªç³»ç»Ÿã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¢åˆ†å¤ç”¨ (WDM)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…‰æ³¢é•¿&lt;/td&gt;
&lt;td&gt;è¿™æ˜¯å…‰çº¤é¢†åŸŸçš„é¢‘åˆ†å¤ç”¨ï¼Œè®©ä¸åŒ&lt;strong&gt;é¢œè‰²ï¼ˆæ³¢é•¿ï¼‰çš„å…‰&lt;/strong&gt;åœ¨åŒä¸€æ ¹å…‰çº¤ä¸­ä¼ è¾“ã€‚&lt;/td&gt;
&lt;td&gt;ç°ä»£å…‰çº¤éª¨å¹²ç½‘ç»œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥äº†è§£å„ç§å¤ç”¨æŠ€æœ¯"&gt;ğŸ” æ·±å…¥äº†è§£å„ç§å¤ç”¨æŠ€æœ¯
&lt;/h3&gt;&lt;h4 id="-é¢‘åˆ†å¤ç”¨-fdm"&gt;ğŸ“¡ é¢‘åˆ†å¤ç”¨ (FDM)
&lt;/h4&gt;&lt;p&gt;è¿™ç§æ–¹å¼å°†ä¿¡é“çš„æ€»å¸¦å®½åˆ’åˆ†ä¸ºå¤šä¸ª&lt;strong&gt;äº’ä¸é‡å çš„é¢‘æ®µ&lt;/strong&gt;ï¼Œæ¯ä¸ªä¿¡å·åˆ†é…ä¸€ä¸ªå›ºå®šçš„å­é¢‘å¸¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šå‘é€ç«¯å°†æ¯è·¯ä¿¡å·è°ƒåˆ¶åˆ°ä¸åŒçš„è½½æ³¢é¢‘ç‡ä¸Šï¼ˆä¾‹å¦‚ï¼Œç”µå°Aä½¿ç”¨90.0MHzï¼Œç”µå°Bä½¿ç”¨105.0MHzï¼‰ï¼Œç„¶ååœ¨ä¿¡é“ä¸Šåˆå¹¶ä¼ è¾“ã€‚æ¥æ”¶ç«¯ä½¿ç”¨&lt;strong&gt;å¸¦é€šæ»¤æ³¢å™¨&lt;/strong&gt;ï¼Œåƒæ”¶éŸ³æœºè°ƒå°ä¸€æ ·ï¼Œåªâ€œå¬å–â€ç‰¹å®šé¢‘ç‡çš„ä¿¡å·ï¼Œå¹¶å°†å…¶è§£è°ƒè¿˜åŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šä¸ºäº†é˜²æ­¢ç›¸é‚»ä¿¡å·å¹²æ‰°ï¼Œå„å­é¢‘å¸¦ä¹‹é—´éœ€è¦è®¾ç½®&lt;strong&gt;ä¿æŠ¤é¢‘å¸¦&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-æ—¶åˆ†å¤ç”¨-tdm"&gt;â±ï¸ æ—¶åˆ†å¤ç”¨ (TDM)
&lt;/h4&gt;&lt;p&gt;è¿™ç§æ–¹å¼å°†ä¼ è¾“æ—¶é—´åˆ’åˆ†ä¸ºä¸€ç³»åˆ—ç­‰é•¿çš„&lt;strong&gt;æ—¶éš™&lt;/strong&gt;ï¼Œæ¯è·¯ä¿¡å·åœ¨å›ºå®šçš„æ—¶éš™å†…ç‹¬å æ•´ä¸ªä¿¡é“çš„å¸¦å®½è¿›è¡Œä¼ è¾“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šæ—¶é—´è¢«ç»„ç»‡æˆå¾ªç¯çš„â€œå¸§â€ï¼Œæ¯ä¸€å¸§åŒ…å«å¤šä¸ªæ—¶éš™ï¼Œå›ºå®šåˆ†é…ç»™å„ä¸ªä¿¡å·ã€‚å³ä½¿æŸä¸ªä¿¡å·æºæš‚æ—¶æ²¡æœ‰æ•°æ®å‘é€ï¼Œå¯¹åº”çš„æ—¶éš™ä¹Ÿä¼š&lt;strong&gt;ç©ºä¼ &lt;/strong&gt;ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šé€ æˆä¿¡é“èµ„æºçš„æµªè´¹ã€‚å…¶æ”¹è¿›ç‰ˆâ€œç»Ÿè®¡æ—¶åˆ†å¤ç”¨â€å¯ä»¥åŠ¨æ€åˆ†é…æ—¶éš™ï¼Œæé«˜äº†æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šè¦æ±‚ä¸¥æ ¼çš„&lt;strong&gt;æ—¶é’ŸåŒæ­¥&lt;/strong&gt;ï¼Œç¡®ä¿å‘é€å’Œæ¥æ”¶ç«¯å¯¹æ—¶éš™çš„åˆ’åˆ†ä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-ç åˆ†å¤ç”¨-cdm"&gt;ğŸ’» ç åˆ†å¤ç”¨ (CDM)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç§æ›´æ™ºèƒ½çš„æ–¹å¼ï¼Œå…è®¸æ‰€æœ‰ä¿¡å·åœ¨åŒä¸€æ—¶é—´ã€åŒä¸€é¢‘æ®µä¸Šä¼ è¾“ï¼Œé€šè¿‡ç‹¬ç‰¹çš„ç¼–ç æ¥åŒºåˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªç”¨æˆ·åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ã€&lt;strong&gt;ç›¸äº’æ­£äº¤çš„ç ç‰‡åºåˆ—&lt;/strong&gt;ã€‚å‘é€æ–¹ç”¨è¿™ä¸ªåºåˆ—å¯¹æ•°æ®è¿›è¡Œç¼–ç ï¼Œæ¥æ”¶æ–¹ç”¨ç›¸åŒçš„åºåˆ—è¿›è¡Œè§£ç ã€‚åªæœ‰åŒ¹é…çš„ä¿¡å·æ‰èƒ½è¢«æ­£ç¡®è¿˜åŸï¼Œå…¶ä»–ä¿¡å·åˆ™è¢«è§†ä¸ºèƒŒæ™¯å™ªå£°ã€‚è¿™å°±åƒåœ¨ä¸€ä¸ªå˜ˆæ‚çš„èšä¼šä¸Šï¼Œä½ ä»ç„¶èƒ½ä¸“æ³¨äºå’Œä½ ç”¨åŒä¸€ç§è¯­è¨€äº¤è°ˆçš„æœ‹å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šå…·æœ‰å¾ˆå¼ºçš„&lt;strong&gt;æŠ—å¹²æ‰°èƒ½åŠ›&lt;/strong&gt;å’Œ&lt;strong&gt;ä¿å¯†æ€§&lt;/strong&gt;ï¼Œæ˜¯3Gç§»åŠ¨é€šä¿¡çš„åŸºç¡€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-æ³¢åˆ†å¤ç”¨-wdm"&gt;ğŸŒˆ æ³¢åˆ†å¤ç”¨ (WDM)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯å…‰çº¤é€šä¿¡ä¸­ç‰¹æœ‰çš„å¤ç”¨æŠ€æœ¯ï¼Œæœ¬è´¨ä¸Šæ˜¯å…‰é¢‘ç‡ä¸Šçš„é¢‘åˆ†å¤ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šåœ¨å‘é€ç«¯å°†ä¸åŒæ³¢é•¿çš„å…‰ä¿¡å·è€¦åˆåˆ°åŒä¸€æ ¹å…‰çº¤ä¸­ä¼ è¾“ï¼›åœ¨æ¥æ”¶ç«¯ï¼Œå†é€šè¿‡è§£å¤ç”¨å™¨å°†ä¸åŒæ³¢é•¿çš„å…‰ä¿¡å·åˆ†ç¦»å¼€æ¥ã€‚è¿™å°±åƒè®©ä¸åŒé¢œè‰²çš„å…‰ï¼ˆå¦‚çº¢å…‰ã€è“å…‰ã€ç»¿å…‰ï¼‰åœ¨åŒä¸€æ¡â€œå…‰è·¯â€ä¸Šå¥”è·‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šæå¤§åœ°æå‡äº†å•æ ¹å…‰çº¤çš„ä¼ è¾“å®¹é‡ï¼Œæ˜¯æ„å»ºç°ä»£ä¿¡æ¯é«˜é€Ÿå…¬è·¯éª¨å¹²ç½‘çš„æ ¸å¿ƒæŠ€æœ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸èåˆåº”ç”¨"&gt;ğŸ’ æ€»ç»“ä¸èåˆåº”ç”¨
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™äº›æŠ€æœ¯å¸¸å¸¸&lt;strong&gt;ç»„åˆä½¿ç”¨&lt;/strong&gt;ä»¥å‘æŒ¥æ›´å¤§æ•ˆèƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨4G/5Gç§»åŠ¨é€šä¿¡ä¸­ï¼Œä¼šåŒæ—¶ç»“åˆFDMï¼ˆåˆ’åˆ†ä¸åŒé¢‘æ®µï¼‰ã€TDMï¼ˆåˆ’åˆ†ä¸åŒæ—¶éš™ï¼‰å’ŒCDMï¼ˆä½¿ç”¨ä¸åŒç¼–ç ï¼‰æ¥æœåŠ¡æµ·é‡ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£é€šä¿¡æŠ€æœ¯ä¸­è¿™ä¸ªæ—¢åŸºç¡€åˆç²¾å¦™çš„æ ¸å¿ƒæ¦‚å¿µï¼å¦‚æœä½ å¯¹å…¶ä¸­æŸé¡¹æŠ€æœ¯ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åŠ¨æ€éšæœºè®¿é—®"&gt;åŠ¨æ€éšæœºè®¿é—®
&lt;/h2&gt;&lt;p&gt;éšæœºè®¿é—®MACåè®®æ˜¯è®¡ç®—æœºç½‘ç»œä¸­ä¸€ç±»é‡è¦çš„ä»‹è´¨è®¿é—®æ§åˆ¶åè®®ï¼Œå®ƒå…è®¸å¤šä¸ªç½‘ç»œèŠ‚ç‚¹å…±äº«ç›¸åŒçš„é€šä¿¡ä¿¡é“ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é‡‡ç”¨åˆ†å¸ƒå¼ç®—æ³•æ¥åè°ƒå„ä¸ªèŠ‚ç‚¹å¯¹ä¿¡é“çš„è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹è¡¨å¯¹æ¯”äº†å‡ ç§ä¸»è¦éšæœºè®¿é—®MACåè®®çš„æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åè®®åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ALOHA&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æƒ³å‘å°±å‘ï¼Œå†²çªåéšæœºé€€é¿é‡ä¼ &lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œå®Œå…¨åˆ†å¸ƒå¼&lt;/td&gt;
&lt;td&gt;ä¿¡é“åˆ©ç”¨ç‡æä½ï¼ˆçº¯ALOHAçº¦18%ï¼Œæ—¶éš™ALOHAçº¦37%ï¼‰&lt;/td&gt;
&lt;td&gt;æ—©æœŸæ— çº¿ç½‘ç»œï¼Œå«æ˜Ÿé€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CSMA&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…ˆå¬åè¯´ï¼Œå‘é€å‰å…ˆç›‘å¬ä¿¡é“&lt;/td&gt;
&lt;td&gt;å‡å°‘äº†å†²çªæ¦‚ç‡ï¼Œæ¯”ALOHAæ•ˆç‡é«˜&lt;/td&gt;
&lt;td&gt;ä»å­˜åœ¨ä¼ æ’­å»¶è¿Ÿå¯¼è‡´çš„å†²çª&lt;/td&gt;
&lt;td&gt;æ—©æœŸä»¥å¤ªç½‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CSMA/CD&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾¹å¬è¾¹è¯´ï¼Œå‘é€æ—¶æŒç»­æ£€æµ‹å†²çª&lt;/td&gt;
&lt;td&gt;å†²çªåèƒ½å¿«é€Ÿç»ˆæ­¢å‘é€ï¼ŒèŠ‚çœä¿¡é“èµ„æº&lt;/td&gt;
&lt;td&gt;ä¸é€‚ç”¨äºæ— çº¿ç¯å¢ƒï¼ŒåŠåŒå·¥é€šä¿¡&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿæœ‰çº¿ä»¥å¤ªç½‘ï¼ˆIEEE 802.3ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CSMA/CA&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¿å…å†²çªï¼Œé‡‡ç”¨æ¡æ‰‹å’Œé¢„çº¦æœºåˆ¶&lt;/td&gt;
&lt;td&gt;æœ‰æ•ˆè§£å†³æ— çº¿ç½‘ç»œä¸­çš„éšè—ç»ˆç«¯é—®é¢˜&lt;/td&gt;
&lt;td&gt;å¼€é”€è¾ƒå¤§ï¼Œè¿‡ç¨‹ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;td&gt;æ— çº¿å±€åŸŸç½‘ï¼ˆWi-Fi, IEEE 802.11ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åè®®è¯¦è§£"&gt;ğŸ”Œ åè®®è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-alohaåè®®"&gt;&lt;strong&gt;1. ALOHAåè®®&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ALOHAåè®®æ˜¯æœ€æ—©çš„éšæœºè®¿é—®åè®®ï¼Œéå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çº¯ALOHA&lt;/strong&gt;ï¼šèŠ‚ç‚¹æœ‰æ•°æ®è¦å‘é€æ—¶ï¼Œ&lt;strong&gt;ç«‹å³å‘é€&lt;/strong&gt;ã€‚å¦‚æœå‘ç”Ÿå†²çªï¼ˆå³æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼‰ï¼ŒèŠ‚ç‚¹ä¼šç­‰å¾…ä¸€æ®µ&lt;strong&gt;éšæœºæ—¶é—´&lt;/strong&gt;åé‡ä¼ ã€‚å…¶ä¿¡é“åˆ©ç”¨ç‡å¤§çº¦åªæœ‰18%ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶éš™ALOHA&lt;/strong&gt;ï¼šå¯¹çº¯ALOHAçš„æ”¹è¿›ï¼Œå°†æ—¶é—´åˆ’åˆ†ä¸ºç­‰é•¿çš„&lt;strong&gt;æ—¶éš™&lt;/strong&gt;ï¼ŒèŠ‚ç‚¹åªèƒ½åœ¨æ¯ä¸ªæ—¶éš™çš„å¼€å§‹æ—¶åˆ»å‘é€æ•°æ®ã€‚è¿™ä½¿å†²çªçª—å£å‡åŠï¼Œä¿¡é“åˆ©ç”¨ç‡æœ€é«˜å¯æå‡è‡³çº¦37%ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-csmaåè®®"&gt;&lt;strong&gt;2. CSMAåè®®&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;CSMAåè®®åœ¨ALOHAçš„åŸºç¡€ä¸Šå¢åŠ äº†â€œ&lt;strong&gt;è½½æ³¢ç›‘å¬&lt;/strong&gt;â€æœºåˆ¶ï¼Œå³â€œ&lt;strong&gt;å…ˆå¬åè¯´&lt;/strong&gt;â€ã€‚èŠ‚ç‚¹åœ¨å‘é€æ•°æ®å‰ï¼Œä¼šå…ˆæ£€æµ‹ä¿¡é“æ˜¯å¦ç©ºé—²ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç›‘å¬åˆ°ä¿¡é“ç¹å¿™åçš„å¤„ç†ç­–ç•¥ä¸åŒï¼ŒCSMAä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;1-åšæŒCSMA&lt;/strong&gt;ï¼šç›‘å¬ä¿¡é“ï¼Œè‹¥ç©ºé—²ç«‹å³å‘é€ï¼›è‹¥å¿™åˆ™&lt;strong&gt;æŒç»­ç›‘å¬&lt;/strong&gt;ï¼Œä¸€æ—¦ç©ºé—²ç«‹å³å‘é€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éåšæŒCSMA&lt;/strong&gt;ï¼šç›‘å¬ä¿¡é“ï¼Œè‹¥ç©ºé—²ç«‹å³å‘é€ï¼›è‹¥å¿™åˆ™&lt;strong&gt;æ”¾å¼ƒç›‘å¬&lt;/strong&gt;ï¼Œç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å°è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;P-åšæŒCSMA&lt;/strong&gt;ï¼šé€‚ç”¨äºæ—¶éš™ä¿¡é“ã€‚è‹¥ä¿¡é“ç©ºé—²ï¼Œåˆ™ä»¥æ¦‚ç‡&lt;code&gt;P&lt;/code&gt;åœ¨å½“å‰æ—¶éš™å‘é€ï¼Œä»¥æ¦‚ç‡&lt;code&gt;1-P&lt;/code&gt;æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªæ—¶éš™å‘é€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-csmacd"&gt;&lt;strong&gt;3. CSMA/CD&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;CSMA/CDåœ¨CSMAçš„åŸºç¡€ä¸Šå¢åŠ äº†â€œ&lt;strong&gt;å†²çªæ£€æµ‹&lt;/strong&gt;â€åŠŸèƒ½ï¼Œå³â€œ&lt;strong&gt;è¾¹å¬è¾¹è¯´&lt;/strong&gt;â€ã€‚èŠ‚ç‚¹åœ¨å‘é€æ•°æ®çš„åŒæ—¶&lt;strong&gt;æŒç»­ç›‘å¬ä¿¡é“&lt;/strong&gt;ï¼Œå¦‚æœæ£€æµ‹åˆ°å†²çªï¼Œåˆ™&lt;strong&gt;ç«‹å³åœæ­¢å‘é€&lt;/strong&gt;ï¼Œå¹¶å‘é€ä¸€ä¸ªçŸ­çš„é˜»å¡ä¿¡å·ä»¥é€šçŸ¥æ‰€æœ‰èŠ‚ç‚¹å†²çªå·²å‘ç”Ÿï¼Œç„¶åç­‰å¾…ä¸€æ®µéšæœºæ—¶é—´ï¼ˆé‡‡ç”¨&lt;strong&gt;äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•&lt;/strong&gt;ï¼‰åé‡ä¼ ã€‚è¿™ç§æ–¹å¼å¹¿æ³›åº”ç”¨äºä¼ ç»Ÿçš„&lt;strong&gt;æœ‰çº¿ä»¥å¤ªç½‘ï¼ˆIEEE 802.3æ ‡å‡†ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id="4-csmaca"&gt;&lt;strong&gt;4. CSMA/CA&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;CSMA/CAä¸»è¦ç”¨äº&lt;strong&gt;æ— çº¿ç½‘ç»œ&lt;/strong&gt;ï¼ˆå¦‚Wi-Fiï¼ŒIEEE 802.11æ ‡å‡†ï¼‰ã€‚ç”±äºæ— çº¿ç¯å¢ƒä¸­ä¿¡å·è¡°å‡ã€éšè—ç»ˆç«¯å’Œæš´éœ²ç»ˆç«¯ç­‰é—®é¢˜ï¼Œå†²çªæ£€æµ‹éš¾ä»¥å®ç°ï¼Œå› æ­¤CSMA/CAé‡‡ç”¨â€œ&lt;strong&gt;å†²çªé¿å…&lt;/strong&gt;â€çš„ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ ¸å¿ƒæœºåˆ¶åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿè½½æ³¢ç›‘å¬&lt;/strong&gt;ï¼šé€šè¿‡RTSï¼ˆè¯·æ±‚å‘é€ï¼‰å’ŒCTSï¼ˆæ¸…é™¤å‘é€ï¼‰å¸§æ¥é¢„çº¦ä¿¡é“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸§é—´é—´éš”&lt;/strong&gt;ï¼šé€šè¿‡è®¾ç½®ä¸åŒçš„å¸§é—´é—´éš”æ¥åŒºåˆ†å¸§çš„ä¼˜å…ˆçº§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€€é¿ç®—æ³•&lt;/strong&gt;ï¼šå½“ä¿¡é“ä»å¿™è½¬ä¸ºç©ºé—²æ—¶ï¼ŒèŠ‚ç‚¹å¿…é¡»ç­‰å¾…ä¸€ä¸ªDIFSæ—¶é—´ï¼Œç„¶åè¿›å…¥é€€é¿é˜¶æ®µï¼Œä»ä¸€ä¸ªç«äº‰çª—å£ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæ—¶éš™è¿›è¡Œç­‰å¾…ï¼Œæ—¶éš™æ•°å‡åˆ°0æ—¶æ‰å°è¯•å‘é€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æ¼”è¿›-1"&gt;ğŸ’ æ€»ç»“ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;éšæœºè®¿é—®MACåè®®ä»ç®€å•çš„ALOHAå‘å±•åˆ°å¤æ‚çš„CSMA/CAï¼Œå…¶æ¼”è¿›è¿‡ç¨‹ä½“ç°äº†ç½‘ç»œæŠ€æœ¯å¯¹&lt;strong&gt;æ•ˆç‡ã€å…¬å¹³æ€§å’Œé€‚åº”æ€§&lt;/strong&gt;çš„ä¸æ‡ˆè¿½æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£éšæœºè®¿é—®MACåè®®ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåè®®æˆ–åº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å…¨åŒå·¥"&gt;å…¨åŒå·¥
&lt;/h2&gt;&lt;p&gt;å…¨åŒå·¥ä¿¡é“å…è®¸é€šä¿¡åŒæ–¹åŒæ—¶è¿›è¡Œæ•°æ®çš„å‘é€å’Œæ¥æ”¶ï¼Œè¿™å°±åƒä¸¤ä¸ªäººæ‰“ç”µè¯ï¼Œå¯ä»¥åŒæ—¶è¯´è¯å’Œå¬å¯¹æ–¹è¯´è¯ï¼Œä¸éœ€è¦è½®æµè¿›è¡Œã€‚å®ç°è¿™ç§åŒå‘åŒæ­¥é€šä¿¡ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯&lt;strong&gt;ä¸ºä¸¤ä¸ªæ–¹å‘çš„æ•°æ®æµæä¾›ç‹¬ç«‹çš„ä¼ è¾“è·¯å¾„ï¼Œå¹¶ç¡®ä¿å®ƒä»¬äº’ä¸å¹²æ‰°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å®ç°å…¨åŒå·¥ä¿¡é“çš„å‡ ç§ä¸»è¦æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;å¸¸è§åº”ç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹ç‰©ç†ä¿¡é“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;ä¸¤æ¡å®Œå…¨ç‹¬ç«‹çš„ç‰©ç†çº¿è·¯&lt;/strong&gt;ï¼ˆå¦‚ä¸¤å¯¹çº¿ç¼†ï¼‰ï¼Œä¸€æ¡ä¸“ç”¨äºå‘é€ï¼ˆTxï¼‰ï¼Œä¸€æ¡ä¸“ç”¨äºæ¥æ”¶ï¼ˆRxï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;æ—©æœŸç”µè¯ç½‘ç»œï¼ˆå››çº¿åˆ¶ï¼‰ã€è®¡ç®—æœºä¸²å£ï¼ˆå¦‚RS-422ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é¢‘åˆ†åŒå·¥ (FDD)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;åŒä¸€ç‰©ç†ä»‹è´¨&lt;/strong&gt;ä¸Šï¼Œä¸ºå‘é€å’Œæ¥æ”¶åˆ†é…&lt;strong&gt;ä¸åŒçš„é¢‘ç‡æ³¢æ®µ&lt;/strong&gt;ã€‚é€šè¿‡æ»¤æ³¢å™¨åˆ†ç¦»é¢‘ç‡ã€‚&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿèœ‚çªç½‘ç»œï¼ˆå¦‚4G LTEï¼‰ã€å¹¿æ’­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶åˆ†åŒå·¥ (TDD)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;åŒä¸€é¢‘ç‡&lt;/strong&gt;ä¸Šï¼Œå°†æ—¶é—´åˆ†æˆæçŸ­çš„æ—¶éš™ï¼Œäº¤æ›¿è¿›è¡Œå‘é€å’Œæ¥æ”¶ã€‚&lt;/td&gt;
&lt;td&gt;Wi-Fiã€5G NRéƒ¨åˆ†é¢‘æ®µã€è“ç‰™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¦å†…å…¨åŒå·¥ (IBFD)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;åŒä¸€é¢‘ç‡ã€åŒä¸€æ—¶é—´&lt;/strong&gt;å‘é€å’Œæ¥æ”¶ã€‚é€šè¿‡&lt;strong&gt;è‡ªå¹²æ‰°æ¶ˆé™¤ (SIC)&lt;/strong&gt; æŠ€æœ¯æŠµæ¶ˆè‡ªèº«å‘å‡ºçš„å¼ºä¿¡å·ã€‚&lt;/td&gt;
&lt;td&gt;5G/6Gå‰æ²¿ç ”ç©¶ã€é«˜çº§æ— çº¿ç½‘ç»œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®æŠ€æœ¯ç»†èŠ‚"&gt;ğŸ”§ å…³é”®æŠ€æœ¯ç»†èŠ‚
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‹¬ç«‹ç‰©ç†ä¿¡é“ (æœ€ç›´æ¥çš„æ–¹æ³•)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æ˜“äºç†è§£çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨å…¨åŒå·¥ä»¥å¤ªç½‘ä¸­ï¼Œä½¿ç”¨åŒç»çº¿ä¸­çš„&lt;strong&gt;ä¸¤å¯¹çº¿ç¼†&lt;/strong&gt;ï¼Œä¸€å¯¹å§‹ç»ˆç”¨äºå‘é€æ•°æ®ï¼Œå¦ä¸€å¯¹å§‹ç»ˆç”¨äºæ¥æ”¶æ•°æ®ã€‚è¿™æ ·ï¼Œå‘é€å’Œæ¥æ”¶çš„ä¿¡å·åœ¨ç‰©ç†ä¸Šå°±åˆ†å¼€äº†ï¼Œè‡ªç„¶ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚RS-422è¿™ç±»ä¸²è¡Œé€šä¿¡æ ‡å‡†ä¹Ÿé‡‡ç”¨ç±»ä¼¼åŸç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¢‘åˆ†åŒå·¥ (FDD) - ç”¨é¢‘ç‡åŒºåˆ†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FDDä¸ºä¸Šè¡Œï¼ˆè®¾å¤‡å‘é€ï¼‰å’Œä¸‹è¡Œï¼ˆè®¾å¤‡æ¥æ”¶ï¼‰åˆ†é…äº†&lt;strong&gt;ä¸¤ä¸ªå¯¹ç§°ä¸”åˆ†ç¦»çš„é¢‘æ®µ&lt;/strong&gt;ã€‚è®¾å¤‡ç«¯åŒæ—¶è£…æœ‰&lt;strong&gt;å¸¦é€šæ»¤æ³¢å™¨&lt;/strong&gt;ï¼Œåªå…è®¸ç‰¹å®šé¢‘ç‡çš„ä¿¡å·é€šè¿‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæŠ€æœ¯æˆç†Ÿï¼Œå»¶è¿Ÿä½ï¼Œå¹²æ‰°å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šéœ€è¦æˆå¯¹çš„é¢‘è°±èµ„æºï¼Œä¸å¤Ÿçµæ´»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¶åˆ†åŒå·¥ (TDD) - ç”¨æ—¶é—´åŒºåˆ†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TDDåªä½¿ç”¨ä¸€ä¸ªé¢‘ç‡ï¼Œä½†å°†æ—¶é—´åˆ†å‰²æˆå‘¨æœŸæ€§çš„å¸§ï¼Œæ¯ä¸ªå¸§å†ç»†åˆ†ä¸ºæ›´çŸ­çš„æ—¶éš™ã€‚æŸä¸ªæ—¶é—´æ®µåˆ†é…ç»™å‘é€ï¼ˆTxï¼‰ï¼Œç´§æ¥ç€çš„ä¸‹ä¸€ä¸ªæ—¶é—´æ®µå°±åˆ†é…ç»™æ¥æ”¶ï¼ˆRxï¼‰ï¼Œå¦‚æ­¤äº¤æ›¿è¿›è¡Œã€‚ç”±äºåˆ‡æ¢é€Ÿåº¦æå¿«ï¼Œå®è§‚ä¸Šæ„Ÿè§‰åƒæ˜¯åŒæ—¶è¿›è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;é¢‘è°±åˆ©ç”¨é«˜æ•ˆ&lt;/strong&gt;ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚çµæ´»è°ƒæ•´ä¸Šä¸‹è¡Œæ—¶éš™æ¯”ä¾‹ï¼ˆä¾‹å¦‚ï¼Œä¸‹è½½å¤šæ—¶å°±ç»™ä¸‹è½½åˆ†é…æ›´å¤šæ—¶é—´ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šéœ€è¦æ•´ä¸ªç½‘ç»œ&lt;strong&gt;ä¸¥æ ¼çš„æ—¶é—´åŒæ­¥&lt;/strong&gt;ï¼Œå¹¶ä¸”ç”±äºäº¤æ›¿è¿›è¡Œï¼Œä¼šå¸¦æ¥ä¸€å®šçš„å¤„ç†å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¦å†…å…¨åŒå·¥ (IBFD) / åŒæ—¶åŒé¢‘å…¨åŒå·¥ - æœ€å…ˆè¿›çš„æŠ€æœ¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;IBFDæ˜¯å½“å‰é€šä¿¡é¢†åŸŸçš„å‰æ²¿ï¼Œå®ƒå…è®¸è®¾å¤‡åœ¨&lt;strong&gt;ç›¸åŒçš„é¢‘ç‡ä¸ŠåŒæ—¶å‘é€å’Œæ¥æ”¶ä¿¡å·&lt;/strong&gt;ã€‚è¿™å¬èµ·æ¥ä¼¼ä¹ä¸å¯èƒ½ï¼Œå› ä¸ºè‡ªå·±å‘å‡ºçš„å¼ºä¿¡å·ä¼šæ·¹æ²¡å¯¹æ–¹ä¼ æ¥çš„å¼±ä¿¡å·ã€‚å…¶æ ¸å¿ƒæŒ‘æˆ˜åœ¨äº&lt;strong&gt;å·¨å¤§çš„åŠŸç‡å·®&lt;/strong&gt;ï¼šå‘å°„ä¿¡å·åŠŸç‡å¯èƒ½é«˜è¾¾+20dBmè‡³+50dBmï¼Œè€Œæ¥æ”¶ä¿¡å·å¯èƒ½å¾®å¼±åˆ°åªæœ‰-50dBmè‡³-100dBmã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼ŒIBFDä¾èµ–äºå¤æ‚çš„&lt;strong&gt;è‡ªå¹²æ‰°æ¶ˆé™¤ (SIC)&lt;/strong&gt; æŠ€æœ¯ï¼Œå…¶è¿‡ç¨‹é€šå¸¸åˆ†ä¸ºä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤©çº¿éš”ç¦»&lt;/strong&gt;ï¼šé€šè¿‡å¤©çº¿è®¾è®¡ï¼ˆå¦‚äº¤å‰æåŒ–ã€ç©ºé—´åˆ†ç¦»ï¼‰é¦–å…ˆæŠ‘åˆ¶ä¸€éƒ¨åˆ†å¹²æ‰°ä¿¡å·ï¼ˆå¯è¾¾60dBï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¨¡æ‹ŸåŸŸæ¶ˆé™¤&lt;/strong&gt;ï¼šåœ¨ä¿¡å·è¢«æ¥æ”¶æœºæ”¾å¤§å™¨é¥±å’Œä¹‹å‰ï¼Œåœ¨å°„é¢‘/æ¨¡æ‹Ÿé˜¶æ®µäº§ç”Ÿä¸€ä¸ªä¸è‡ªå¹²æ‰°ä¿¡å·&lt;strong&gt;å¹…åº¦ç›¸åŒã€ç›¸ä½ç›¸å&lt;/strong&gt;çš„æŠµæ¶ˆä¿¡å·ï¼Œå°†å…¶ä»æ€»æ¥æ”¶ä¿¡å·ä¸­å‡å»ã€‚è¿™ä¸€æ­¥èƒ½è¿›ä¸€æ­¥æŠ‘åˆ¶å¹²æ‰°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°å­—åŸŸæ¶ˆé™¤&lt;/strong&gt;ï¼šç»è¿‡å‰ä¸¤æ­¥åï¼Œæ®‹ä½™çš„å°‘é‡è‡ªå¹²æ‰°ä¿¡å·å¯ä»¥é€šè¿‡æ•°å­—ä¿¡å·å¤„ç†ç®—æ³•åœ¨æ•°å­—åŸŸä¸­è¢«ä¼°è®¡å’Œå‡å»ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¤šçº§SICæŠ€æœ¯çš„ç»“åˆï¼Œæ‰èƒ½å®ç°è¶³å¤Ÿé«˜çš„å¹²æ‰°æŠ‘åˆ¶ï¼ˆä¾‹å¦‚122.1dBï¼‰ï¼Œä»è€Œåˆ†ç¦»å‡ºæœŸæœ›æ¥æ”¶çš„å¾®å¼±ä¿¡å·ã€‚&lt;strong&gt;å­å¸¦å…¨åŒå·¥ (SBFD)&lt;/strong&gt; æ˜¯IBFDçš„ä¸€ç§æ¼”è¿›å½¢å¼ï¼Œé€šè¿‡åœ¨é¢‘åŸŸä¸Šè¿›è¡Œæ›´ç²¾ç»†çš„åˆ’åˆ†æ¥é™ä½SICçš„éš¾åº¦ï¼Œæ˜¯è¿ˆå‘çœŸæ­£IBFDå•†ç”¨çš„å…³é”®æ­¥éª¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸é…ç½®"&gt;ğŸ› ï¸ å¦‚ä½•é€‰æ‹©ä¸é…ç½®
&lt;/h3&gt;&lt;p&gt;å®ç°å…¨åŒå·¥é€šä¿¡ï¼Œé€šä¿¡è®¾å¤‡å¿…é¡»å…·å¤‡ç‹¬ç«‹çš„å‘é€å™¨å’Œæ¥æ”¶å™¨ã€‚åœ¨å®é™…çš„ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚äº¤æ¢æœºã€ç½‘å¡ï¼‰ä¸­ï¼Œ&lt;strong&gt;å…¨åŒå·¥æ¨¡å¼é€šå¸¸éœ€è¦æ‰‹åŠ¨é…ç½®æˆ–è‡ªåŠ¨åå•†å¼€å¯&lt;/strong&gt;ï¼Œå¹¶ä¸”&lt;strong&gt;é€šä¿¡åŒæ–¹å¿…é¡»å·¥ä½œåœ¨å…¨åŒå·¥æ¨¡å¼&lt;/strong&gt;ä¸‹ï¼Œå¦åˆ™å¯èƒ½äº§ç”Ÿä¸¥é‡çš„å†²çªå’Œä¸¢åŒ…ã€‚&lt;/p&gt;
&lt;h3 id="-ä¼˜åŠ¿ä¸æŒ‘æˆ˜"&gt;ğŸ’ ä¼˜åŠ¿ä¸æŒ‘æˆ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šå…¨åŒå·¥é€šä¿¡&lt;strong&gt;æ¶ˆé™¤äº†åŠåŒå·¥å›ºæœ‰çš„æ–¹å‘åˆ‡æ¢å»¶è¿Ÿ&lt;/strong&gt;ï¼Œç†è®ºä¸Šå¯ä»¥ä½¿&lt;strong&gt;ååé‡ç¿»å€&lt;/strong&gt;ï¼Œå¹¶ä¸”éå¸¸é€‚ç”¨äºéœ€è¦ä½å»¶è¿Ÿå®æ—¶äº¤äº’çš„åº”ç”¨ï¼ˆå¦‚è¯­éŸ³ã€è§†é¢‘ä¼šè®®ã€è¿œç¨‹æ§åˆ¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;/strong&gt;ï¼šå®ç°æˆæœ¬è¾ƒé«˜ï¼ˆéœ€è¦æ›´å¤šç¡¬ä»¶æˆ–æ›´å¤æ‚çš„ä¿¡å·å¤„ç†ç®—æ³•ï¼‰ã€‚ç‰¹åˆ«æ˜¯å¯¹äºIBFDï¼Œ&lt;strong&gt;è‡ªå¹²æ‰°æ¶ˆé™¤&lt;/strong&gt;æŠ€æœ¯æ˜¯æœ€å¤§æŒ‘æˆ˜ï¼Œéœ€è¦æé«˜çš„ç²¾åº¦å’Œå®æ—¶å¤„ç†èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£å…¨åŒå·¥ä¿¡é“æ˜¯å¦‚ä½•å®ç°çš„ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Operating System 2</title><link>https://dyhes.github.io/p/nowcoderoperating-system-2/</link><pubDate>Thu, 02 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderoperating-system-2/</guid><description>&lt;h2 id="çº¿ç¨‹æ ˆ"&gt;çº¿ç¨‹æ ˆ
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œåœ¨ Linux ç­‰ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹çš„æ ˆé€šå¸¸æ˜¯ä»è¿›ç¨‹çš„å †å†…å­˜ä¸­åŠ¨æ€åˆ’åˆ†å‡ºæ¥çš„ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿäº†è§£è¿›ç¨‹æ ˆå’Œçº¿ç¨‹æ ˆçš„æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¿›ç¨‹æ ˆ (ä¸»çº¿ç¨‹æ ˆ)&lt;/th&gt;
&lt;th&gt;çº¿ç¨‹æ ˆ (å­çº¿ç¨‹æ ˆ)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜æ¥æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­å›ºå®šçš„æ ˆåŒºåŸŸ&lt;/td&gt;
&lt;td&gt;ä»è¿›ç¨‹çš„&lt;strong&gt;å †å†…å­˜&lt;/strong&gt;ä¸­é€šè¿‡ &lt;code&gt;mmap&lt;/code&gt;åŠ¨æ€åˆ†é…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§å°å¯åœ¨è¿è¡Œæ—¶åŠ¨æ€å¢é•¿ï¼ˆç›´è‡³è¾¾åˆ°ä¸Šé™ &lt;code&gt;RLIMIT_STACK&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šå¤§å°&lt;/strong&gt;ï¼Œåˆ›å»ºæ—¶ç¡®å®šï¼Œæ— æ³•åŠ¨æ€æ‰©å±•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å— &lt;code&gt;RLIMIT_STACK&lt;/code&gt;èµ„æºé™åˆ¶ï¼ˆé€šå¸¸é»˜è®¤ 8 MBï¼‰&lt;/td&gt;
&lt;td&gt;é»˜è®¤å¤§å°ä¸ &lt;code&gt;RLIMIT_STACK&lt;/code&gt;ç›¸å…³ï¼Œä½†å¯å•ç‹¬è®¾ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®¡ç†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±æ“ä½œç³»ç»Ÿå†…æ ¸è‡ªåŠ¨ç®¡ç†&lt;/td&gt;
&lt;td&gt;ç”±ç¨‹åºçš„çº¿ç¨‹åº“ï¼ˆå¦‚ glibc çš„ pthreadsï¼‰ç®¡ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿æŠ¤æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å†…å­˜é¡µä¿æŠ¤æœºåˆ¶åŠ¨æ€æ‰©å±•&lt;/td&gt;
&lt;td&gt;é€šå¸¸åœ¨çº¿ç¨‹æ ˆæœ«å°¾è®¾æœ‰ &lt;strong&gt;ä¿æŠ¤é¡µ&lt;/strong&gt;ï¼Œç”¨äºæ£€æµ‹æ ˆæº¢å‡º&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-çº¿ç¨‹æ ˆçš„åˆ›å»ºä¸ç»†èŠ‚"&gt;ğŸ” çº¿ç¨‹æ ˆçš„åˆ›å»ºä¸ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;çº¿ç¨‹æ ˆä»è¿›ç¨‹å †ä¸­åˆ†é…ï¼Œä¸»è¦æ˜¯é€šè¿‡ &lt;code&gt;mmap&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å®Œæˆçš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ glibc åº“ä¸­åˆ›å»ºçº¿ç¨‹æ—¶ï¼Œä¼šè°ƒç”¨ç±»ä¼¼çš„ä»£ç æ¥åˆ†é…æ ˆç©ºé—´ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mem = mmap(NULL, size, prot, MAP_PRIVATE | MAP_ANONYMOUS | MAP_STACK, -1, 0);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™è¡Œä»£ç ä»è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­åˆ’å‡ºä¸€å—åŒ¿åå†…å­˜ï¼ˆä¸æ˜ å°„ä»»ä½•æ–‡ä»¶ï¼‰ä¸“ä¾›æ ˆä½¿ç”¨ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆç©ºé—´ï¼Œç”¨äºä¿å­˜å‡½æ•°è°ƒç”¨é“¾ã€å±€éƒ¨å˜é‡ç­‰ã€‚ä¸ºäº†é¿å…çº¿ç¨‹æ ˆä¹‹é—´ç›¸äº’è¸©è¸ï¼Œåˆ†é…æ ˆç©ºé—´æ—¶é€šå¸¸è¿˜ä¼šåœ¨æ ˆçš„æœ«å°¾è®¾ç½®ä¸€å—ä¸å¯è®¿é—®çš„&lt;strong&gt;ä¿æŠ¤é¡µ&lt;/strong&gt;ã€‚ä¸€æ—¦æ ˆä½¿ç”¨è¿‡åº¦è§¦åŠä¿æŠ¤é¡µï¼Œå°±ä¼šè§¦å‘æ®µé”™è¯¯ï¼Œä»è€Œé˜²æ­¢å†…å­˜æ•°æ®è¢«ç ´å ã€‚&lt;/p&gt;
&lt;h3 id="-è¿›ç¨‹åœ°å€ç©ºé—´å¸ƒå±€"&gt;ğŸ—ºï¸ è¿›ç¨‹åœ°å€ç©ºé—´å¸ƒå±€
&lt;/h3&gt;&lt;p&gt;ç†è§£çº¿ç¨‹æ ˆçš„ä½ç½®ï¼Œéœ€è¦å¯¹è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´æœ‰ä¸ªæ•´ä½“æ¦‚å¿µã€‚ä¸€ä¸ªå…¸å‹çš„è¿›ç¨‹åœ°å€ç©ºé—´å¸ƒå±€å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç æ®µ&lt;/strong&gt;ï¼šå­˜æ”¾ç¨‹åºæŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ®µ&lt;/strong&gt;ï¼šå­˜æ”¾å…¨å±€å˜é‡ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å †&lt;/strong&gt;ï¼šåŠ¨æ€å†…å­˜åˆ†é…åŒºï¼Œ&lt;strong&gt;å‘é«˜åœ°å€å¢é•¿&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜æ˜ å°„æ®µ&lt;/strong&gt;ï¼šå­˜æ”¾åŠ¨æ€åº“ã€æ–‡ä»¶æ˜ å°„ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ˆ&lt;/strong&gt;ï¼šä¸»çº¿ç¨‹çš„æ ˆï¼Œ&lt;strong&gt;å‘ä½åœ°å€å¢é•¿&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œå­çº¿ç¨‹çš„æ ˆï¼Œæ­£æ˜¯ä»&lt;strong&gt;å †å’Œå†…å­˜æ˜ å°„æ®µä¹‹é—´çš„åŒºåŸŸ&lt;/strong&gt;åŠ¨æ€åˆ’åˆ†å‡ºæ¥çš„ ã€‚æ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µå’Œå †ï¼Œè¿™ä½¿å¾—çº¿ç¨‹é—´æ•°æ®å…±äº«éå¸¸é«˜æ•ˆï¼Œä½†ä¹Ÿå¸¦æ¥äº†åŒæ­¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id="-å®é™…ç¼–ç¨‹æ³¨æ„ç‚¹"&gt;âš ï¸ å®é™…ç¼–ç¨‹æ³¨æ„ç‚¹
&lt;/h3&gt;&lt;p&gt;äº†è§£çº¿ç¨‹æ ˆçš„æ¥æºå’Œç‰¹æ€§ï¼Œå¯¹ç¼–ç¨‹æœ‰ç›´æ¥æŒ‡å¯¼æ„ä¹‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ ˆæº¢å‡ºé£é™©&lt;/strong&gt;ï¼šçº¿ç¨‹æ ˆå¤§å°å›ºå®šã€‚å¦‚æœè¿›è¡Œæ·±å±‚æ¬¡é€’å½’æˆ–å®šä¹‰è¶…å¤§å±€éƒ¨å˜é‡ï¼Œå¯èƒ½è€—å°½æ ˆç©ºé—´ï¼Œè§¦å‘æ®µé”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆç†è®¾ç½®æ ˆå¤§å°&lt;/strong&gt;ï¼šåˆ›å»ºçº¿ç¨‹æ—¶å¯é€šè¿‡ &lt;code&gt;pthread_attr_setstacksize()&lt;/code&gt;è®¾ç½®åˆé€‚çš„æ ˆå¤§å°ã€‚è¿‡å°æ˜“æº¢å‡ºï¼Œè¿‡å¤§ä¼šæµªè´¹å†…å­˜ï¼Œå°¤å…¶åœ¨éœ€è¦åˆ›å»ºå¤§é‡çº¿ç¨‹æ—¶ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹æ€»æ•°é™åˆ¶&lt;/strong&gt;ï¼šçº¿ç¨‹æ ˆæ€»å’Œå—è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´å¤§å°é™åˆ¶ã€‚åˆ›å»ºè¿‡å¤šçº¿ç¨‹å¯èƒ½å¯¼è‡´å†…å­˜ä¸è¶³ï¼ˆå³ä½¿ç‰©ç†å†…å­˜å……è¶³ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°ç†è§£çº¿ç¨‹æ ˆå’Œè¿›ç¨‹å †çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„æ ˆå¤§å°è°ƒä¼˜æˆ–è€…æ›´æ·±å±‚çš„æœºåˆ¶æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åƒµå°¸è¿›ç¨‹"&gt;åƒµå°¸è¿›ç¨‹
&lt;/h2&gt;&lt;p&gt;åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œçˆ¶è¿›ç¨‹å¿…é¡»è°ƒç”¨ &lt;code&gt;wait&lt;/code&gt;æˆ– &lt;code&gt;waitpid&lt;/code&gt;æ¥å›æ”¶å­è¿›ç¨‹ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†&lt;strong&gt;é¿å…äº§ç”Ÿâ€œåƒµå°¸è¿›ç¨‹â€&lt;/strong&gt;ï¼Œå¹¶ç¡®ä¿ç³»ç»Ÿèµ„æºå¾—åˆ°æœ‰æ•ˆé‡Šæ”¾å’Œè¿›ç¨‹æ‰§è¡Œç»“æœçš„æœ‰æ•ˆä¼ é€’ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒåŸå› å’Œåæœã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒåŸå› &lt;/th&gt;
&lt;th&gt;åæœè¯´æ˜&lt;/th&gt;
&lt;th&gt;ç³»ç»Ÿè®¾è®¡é€»è¾‘&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›æ”¶è¿›ç¨‹èµ„æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­è¿›ç¨‹é€€å‡ºåï¼Œå…¶å¤§éƒ¨åˆ†èµ„æºï¼ˆå¦‚å†…å­˜ã€æ‰“å¼€çš„æ–‡ä»¶ï¼‰è¢«é‡Šæ”¾ï¼Œä½†å…¶&lt;strong&gt;è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰&lt;/strong&gt; å¿…é¡»ä¿ç•™ï¼Œä»¥ä¾›çˆ¶è¿›ç¨‹æŸ¥è¯¢æœ€ç»ˆçŠ¶æ€ã€‚å¦‚æœçˆ¶è¿›ç¨‹ä¸å›æ”¶ï¼Œè¿™äº›æ®‹ç•™çš„PCBå°†ä¸€ç›´å ç”¨ç³»ç»Ÿè¿›ç¨‹è¡¨é¡¹ï¼Œå¯èƒ½å¯¼è‡´èµ„æºè€—å°½ã€‚&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿéœ€è¦ä¸€ç§æœºåˆ¶ç¡®ä¿çˆ¶è¿›ç¨‹çŸ¥æ™“å­è¿›ç¨‹çš„æœ€ç»ˆçŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥/å¼‚å¸¸ï¼‰ï¼Œå› æ­¤å­è¿›ç¨‹é€€å‡ºæ—¶ï¼Œå…¶é€€å‡ºçŠ¶æ€ç­‰ä¿¡æ¯å¿…é¡»æš‚å­˜åœ¨PCBä¸­ï¼Œç­‰å¾…çˆ¶è¿›ç¨‹è¯»å–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·å–å­è¿›ç¨‹é€€å‡ºçŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çˆ¶è¿›ç¨‹å¯èƒ½éœ€è¦çŸ¥é“å­è¿›ç¨‹æ˜¯&lt;strong&gt;æ­£å¸¸é€€å‡º&lt;/strong&gt;ï¼ˆåŠé€€å‡ºç ï¼‰è¿˜æ˜¯&lt;strong&gt;å› ä¿¡å·å¼‚å¸¸ç»ˆæ­¢&lt;/strong&gt;ï¼ˆåŠä¿¡å·ç¼–å·ï¼‰ï¼Œä»¥å†³å®šåç»­æ“ä½œã€‚&lt;/td&gt;
&lt;td&gt;è¿™æ˜¯çˆ¶å­è¿›ç¨‹é—´é€šä¿¡çš„æœ€åä¸€é“æ¡¥æ¢ã€‚å­è¿›ç¨‹çš„â€œé—è¨€â€ï¼ˆé€€å‡ºçŠ¶æ€ï¼‰å­˜æ”¾åœ¨å…¶PCBé‡Œï¼Œçˆ¶è¿›ç¨‹é€šè¿‡&lt;code&gt;wait&lt;/code&gt;/&lt;code&gt;waitpid&lt;/code&gt;è¯»å–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»´æŠ¤ç³»ç»Ÿç¨³å®šæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥çˆ¶è¿›ç¨‹ä¸å›æ”¶ï¼Œå­è¿›ç¨‹å°†é•¿æœŸå¤„äº&lt;strong&gt;åƒµå°¸çŠ¶æ€ï¼ˆZçŠ¶æ€ï¼‰&lt;/strong&gt;ã€‚å¤§é‡åƒµå°¸è¿›ç¨‹ä¼šå ç”¨æœ‰é™çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿæ— æ³•åˆ›å»ºæ–°è¿›ç¨‹ã€‚&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿé€šè¿‡å°†å›æ”¶è´£ä»»èµ‹äºˆçˆ¶è¿›ç¨‹ï¼Œå®ç°äº†èµ„æºçš„ç²¾ç¡®å’Œæœ‰åºé‡Šæ”¾ã€‚å½“çˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹é€€å‡ºæ—¶ï¼Œå…¶æ‰€æœ‰å­è¿›ç¨‹ä¼šè¢« init è¿›ç¨‹ï¼ˆPID=1ï¼‰æ¥ç®¡ï¼Œinit ä¼šå‘¨æœŸæ€§åœ°è°ƒç”¨ &lt;code&gt;wait&lt;/code&gt;æ¸…ç†è¿™äº›â€œå­¤å„¿â€åƒµå°¸è¿›ç¨‹ï¼Œä½œä¸ºæœ€åçš„ä¿éšœæœºåˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿä¸å½±å“"&gt;ğŸ” åƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿä¸å½±å“
&lt;/h3&gt;&lt;p&gt;å½“ä¸€ä¸ªå­è¿›ç¨‹è¿è¡Œç»“æŸæ—¶ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šç«‹å³é‡Šæ”¾å®ƒå ç”¨çš„ç»å¤§éƒ¨åˆ†èµ„æºï¼Œå¦‚å†…å­˜å’Œæ‰“å¼€çš„æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œ&lt;strong&gt;è¯¥å­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ï¼ˆPCBï¼‰å¹¶ä¸ä¼šè¢«ç«‹å³é”€æ¯&lt;/strong&gt;ã€‚è¿™ä¸ªè¿›ç¨‹æè¿°ç¬¦ä¸­è®°å½•äº†å­è¿›ç¨‹çš„&lt;strong&gt;é€€å‡ºçŠ¶æ€&lt;/strong&gt;ã€&lt;strong&gt;è¿›ç¨‹IDï¼ˆPIDï¼‰&lt;/strong&gt; ä»¥åŠ&lt;strong&gt;è¿è¡Œæ—¶é—´&lt;/strong&gt;ç­‰å…³é”®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œè¿™ä¸ªå·²ç»ç»ˆæ­¢ä½†PCBæœªè¢«çˆ¶è¿›ç¨‹è¯»å–çš„å­è¿›ç¨‹å°±è¿›å…¥äº†â€œ&lt;strong&gt;åƒµå°¸çŠ¶æ€ï¼ˆZombie Stateï¼Œç®€ç§°ZçŠ¶æ€ï¼‰&lt;/strong&gt;â€ã€‚åƒµå°¸è¿›ç¨‹æœ¬èº«ä¸å†è¿è¡Œï¼Œä¸æ¶ˆè€—CPUæ—¶é—´ï¼Œä¹Ÿæ— æ³•è¢«â€œæ€æ­»â€ï¼ˆå³ä½¿ä½¿ç”¨ &lt;code&gt;kill -9&lt;/code&gt;å‘½ä»¤ï¼‰ï¼Œå› ä¸ºå®ƒå·²ç»æ­»äº†ã€‚å®ƒçš„å”¯ä¸€å­˜åœ¨ä»·å€¼å°±æ˜¯&lt;strong&gt;ä¿ç•™å…¶é€€å‡ºä¿¡æ¯ï¼Œç­‰å¾…çˆ¶è¿›ç¨‹æ¥â€œéªŒå°¸â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœçˆ¶è¿›ç¨‹å§‹ç»ˆä¸è°ƒç”¨ &lt;code&gt;wait&lt;/code&gt;æˆ– &lt;code&gt;waitpid&lt;/code&gt;ï¼Œè¿™äº›åƒµå°¸è¿›ç¨‹å°±ä¼šä¸€ç›´å­˜åœ¨ã€‚è™½ç„¶å•ä¸ªåƒµå°¸è¿›ç¨‹å ç”¨èµ„æºæå°‘ï¼Œä½†å¦‚æœå¤§é‡äº§ç”Ÿï¼Œå°±ä¼šè€—å°½ç³»ç»Ÿä¸­æœ‰é™çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼Œå¯¼è‡´æ–°çš„è¿›ç¨‹æ— æ³•è¢«åˆ›å»ºï¼Œä»è€Œå½±å“ç³»ç»Ÿç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;h3 id="-çˆ¶è¿›ç¨‹çš„è´£ä»»ä¸ç³»ç»Ÿä¿éšœæœºåˆ¶"&gt;âš™ï¸ çˆ¶è¿›ç¨‹çš„è´£ä»»ä¸ç³»ç»Ÿä¿éšœæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;å°†å›æ”¶å­è¿›ç¨‹çš„è´£ä»»äº¤ç»™çˆ¶è¿›ç¨‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿä¸€ç§ç²¾å·§çš„è®¾è®¡ã€‚è¿™ç¡®ä¿äº†çˆ¶å­è¿›ç¨‹ä¹‹é—´çš„æ‰§è¡ŒååŒå’Œä¿¡æ¯ä¼ é€’ã€‚çˆ¶è¿›ç¨‹å¯ä»¥é€šè¿‡ &lt;code&gt;wait&lt;/code&gt;æˆ– &lt;code&gt;waitpid&lt;/code&gt;è·å–å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œå¹¶æ®æ­¤åˆ¤æ–­ä»»åŠ¡æ‰§è¡Œç»“æœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€ä¿¡æ¯çš„è¯»å–&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;wait&lt;/code&gt;æˆ– &lt;code&gt;waitpid&lt;/code&gt;çš„ &lt;code&gt;status&lt;/code&gt;å‚æ•°ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥å€ŸåŠ©ä¸€ç³»åˆ—å®ï¼ˆå¦‚ &lt;code&gt;WIFEXITED(status)&lt;/code&gt;, &lt;code&gt;WEXITSTATUS(status)&lt;/code&gt;, &lt;code&gt;WIFSIGNALED(status)&lt;/code&gt;ï¼‰æ¥è§£æå­è¿›ç¨‹æ˜¯æ­£å¸¸é€€å‡ºè¿˜æ˜¯è¢«ä¿¡å·ç»ˆæ­¢ï¼Œä»¥åŠå…·ä½“çš„é€€å‡ºç æˆ–ä¿¡å·ç¼–å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€åçš„ä¿éšœï¼šinit è¿›ç¨‹&lt;/strong&gt;ï¼šå¦‚æœçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹é€€å‡ºä¹‹å‰è‡ªå·±å…ˆé€€å‡ºäº†ï¼Œé‚£ä¹ˆè¿™äº›å­è¿›ç¨‹å°±ä¼šæˆä¸ºâ€œå­¤å„¿è¿›ç¨‹â€ã€‚æ­¤æ—¶ï¼Œinit è¿›ç¨‹ï¼ˆPID=1ï¼‰ä¼šæ¥ç®¡å®ƒä»¬ï¼Œæˆä¸ºå®ƒä»¬çš„æ–°çˆ¶è¿›ç¨‹ã€‚å½“è¿™äº›å­è¿›ç¨‹é€€å‡ºæ—¶ï¼Œinit è¿›ç¨‹ä¼šè´Ÿè´£ä»»åœ°è°ƒç”¨ &lt;code&gt;wait&lt;/code&gt;æ¥å›æ”¶å®ƒä»¬ï¼Œä»è€Œé¿å…åƒµå°¸è¿›ç¨‹é•¿æœŸå­˜åœ¨ã€‚è¿™æ˜¯ä¸€ç§ç³»ç»Ÿçº§åˆ«çš„å…œåº•æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é¿å…åƒµå°¸è¿›ç¨‹"&gt;ğŸ’¡ å¦‚ä½•é¿å…åƒµå°¸è¿›ç¨‹
&lt;/h3&gt;&lt;p&gt;åœ¨ç¼–ç¨‹ä¸­ï¼Œä½ å¯ä»¥é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥æ¥é¿å…åƒµå°¸è¿›ç¨‹çš„äº§ç”Ÿï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼è°ƒç”¨ wait/waitpid&lt;/strong&gt;ï¼šåœ¨çˆ¶è¿›ç¨‹ä»£ç ä¸­ï¼Œå¯¹äºåˆ›å»ºçš„å­è¿›ç¨‹ï¼Œç¡®ä¿åœ¨é€‚å½“çš„ä½ç½®è°ƒç”¨ &lt;code&gt;wait&lt;/code&gt;æˆ– &lt;code&gt;waitpid&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡ç­‰å¾…&lt;/strong&gt;ï¼šä½¿ç”¨é»˜è®¤å‚æ•°çš„ &lt;code&gt;wait(&amp;amp;status)&lt;/code&gt;æˆ– &lt;code&gt;waitpid(pid, &amp;amp;status, 0)&lt;/code&gt;ï¼Œçˆ¶è¿›ç¨‹ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°æœ‰ä¸€ä¸ªï¼ˆæˆ–æŒ‡å®šçš„ï¼‰å­è¿›ç¨‹é€€å‡ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éé˜»å¡è½®è¯¢&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;waitpid(pid, &amp;amp;status, WNOHANG)&lt;/code&gt;ã€‚å¦‚æœå­è¿›ç¨‹å°šæœªé€€å‡ºï¼Œå‡½æ•°ä¼šç«‹å³è¿”å›0ï¼Œè€Œä¸ä¼šé˜»å¡çˆ¶è¿›ç¨‹ã€‚çˆ¶è¿›ç¨‹å¯ä»¥åœ¨å¾ªç¯ä¸­å®šæœŸæ£€æŸ¥ï¼ŒåŒæ—¶å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç† SIGCHLD ä¿¡å·&lt;/strong&gt;ï¼šå½“å­è¿›ç¨‹çŠ¶æ€æ”¹å˜ï¼ˆå¦‚é€€å‡ºï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ª &lt;code&gt;SIGCHLD&lt;/code&gt;ä¿¡å·ã€‚çˆ¶è¿›ç¨‹å¯ä»¥æ•è·è¿™ä¸ªä¿¡å·ï¼Œå¹¶åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ &lt;code&gt;waitpid&lt;/code&gt;æ¥å›æ”¶å­è¿›ç¨‹ã€‚è¿™æ˜¯ä¸€ç§å¼‚æ­¥çš„é«˜æ•ˆæ–¹æ³•ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦å¤„ç†å¤§é‡å­è¿›ç¨‹çš„åœºæ™¯ã€‚åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­ï¼Œé€šå¸¸ä½¿ç”¨å¾ªç¯å’Œ &lt;code&gt;WNOHANG&lt;/code&gt;é€‰é¡¹æ¥ç¡®ä¿å›æ”¶æ‰€æœ‰å·²é€€å‡ºçš„å­è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œçˆ¶è¿›ç¨‹è°ƒç”¨ &lt;code&gt;wait&lt;/code&gt;æˆ– &lt;code&gt;waitpid&lt;/code&gt;æ¥å›æ”¶å­è¿›ç¨‹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè®¾è®¡ä¸Šçš„ä¸€ç§&lt;strong&gt;æƒè´£å¯¹ç­‰&lt;/strong&gt;æœºåˆ¶ï¼šçˆ¶è¿›ç¨‹åˆ›å»ºäº†å­è¿›ç¨‹ï¼Œä¹Ÿå°±æ‰¿æ‹…äº†ä¸ºå…¶â€œå–„åâ€çš„è´£ä»»ã€‚è¿™ä¸ä»…æ˜¯&lt;strong&gt;é˜²æ­¢èµ„æºæ³„æ¼&lt;/strong&gt;ã€&lt;strong&gt;ç»´æŠ¤ç³»ç»Ÿå¥åº·&lt;/strong&gt;çš„å…³é”®ï¼Œä¹Ÿæ˜¯å®ç°&lt;strong&gt;è¿›ç¨‹é—´å¯é é€šä¿¡&lt;/strong&gt;çš„é‡è¦æ‰‹æ®µã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£è¿™ä¸ªé—®é¢˜ï¼å¦‚æœä½ å¯¹ &lt;code&gt;wait&lt;/code&gt;å’Œ &lt;code&gt;waitpid&lt;/code&gt;çš„å…·ä½“ç”¨æ³•æˆ–è€…ä¿¡å·å¤„ç†æœºåˆ¶æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="linux-cfs"&gt;Linux CFS
&lt;/h2&gt;&lt;p&gt;Linux CFSï¼ˆCompletely Fair Schedulerï¼Œå®Œå…¨å…¬å¹³è°ƒåº¦å™¨ï¼‰æ˜¯Linuxå†…æ ¸ä¸­ç”¨äºæ™®é€šè¿›ç¨‹çš„é»˜è®¤è°ƒåº¦å™¨ï¼Œè‡ª2.6.23ç‰ˆæœ¬å¼•å…¥ã€‚å®ƒçš„æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯&lt;strong&gt;åœ¨æ‰€æœ‰å¯è¿è¡Œè¿›ç¨‹ä¹‹é—´å…¬å¹³åœ°åˆ†é…CPUæ—¶é—´&lt;/strong&gt;ï¼ŒåŒæ—¶ä¿è¯è‰¯å¥½çš„äº¤äº’ä½“éªŒå’Œç³»ç»Ÿååé‡ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;CFS (Completely Fair Scheduler)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æ‰€æœ‰å¯è¿è¡Œä»»åŠ¡ï¼ˆè¿›ç¨‹/çº¿ç¨‹ï¼‰é—´å®ç°&lt;strong&gt;è¿‘ä¹ç»å¯¹çš„å…¬å¹³æ€§&lt;/strong&gt;ï¼ŒåŒæ—¶ä¿è¯é«˜ç³»ç»Ÿååé‡å’Œä½å»¶è¿Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è™šæ‹Ÿè¿è¡Œæ—¶é—´ï¼ˆvruntimeï¼‰&lt;/strong&gt;ã€&lt;strong&gt;è¿›ç¨‹æƒé‡ï¼ˆåŸºäºniceå€¼ï¼‰&lt;/strong&gt;ã€&lt;strong&gt;çº¢é»‘æ ‘ï¼ˆRed-Black Treeï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒåº¦ç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é‡‡ç”¨&lt;strong&gt;åŠ¨æ€ä¼˜å…ˆçº§&lt;/strong&gt;è°ƒåº¦ï¼Œä¼˜å…ˆçº§ç”±vruntimeå’Œæƒé‡å…±åŒå†³å®šï¼Œè€Œéé™æ€æ—¶é—´ç‰‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;ç®¡ç†å°±ç»ªé˜Ÿåˆ—ï¼Œä»¥vruntimeä¸ºé”®å€¼ï¼Œç¡®ä¿èƒ½å¿«é€Ÿæ‰¾åˆ°ä¸‹ä¸€ä¸ªå¾…è°ƒåº¦çš„ä»»åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»è¦æ“ä½œï¼ˆå¦‚æ’å…¥ã€åˆ é™¤ã€é€‰å–ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(log N)&lt;/strong&gt;ï¼ŒNä¸ºå¯è¿è¡Œä»»åŠ¡æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹¿æ³›çš„é€šç”¨è®¡ç®—åœºæ™¯ï¼ŒåŒ…æ‹¬äº¤äº’å¼åº”ç”¨ã€æ‰¹å¤„ç†ä»»åŠ¡ã€é«˜å¹¶å‘æœåŠ¡å™¨åŠç°ä»£è®¡ç®—ç¯å¢ƒï¼ˆå¦‚AIã€è¾¹ç¼˜è®¡ç®—ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸å·¥ä½œæœºåˆ¶"&gt;ğŸ”§ æ ¸å¿ƒåŸç†ä¸å·¥ä½œæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;CFS çš„å…¬å¹³æ€§æ˜¯é€šè¿‡å‡ ä¸ªç²¾å¦™çš„æ ¸å¿ƒæ¦‚å¿µå’Œç®—æ³•å…±åŒå®ç°çš„ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è™šæ‹Ÿè¿è¡Œæ—¶é—´ï¼ˆvruntimeï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯CFSçš„çµé­‚ã€‚CFSä¸ºæ¯ä¸ªè°ƒåº¦å®ä½“ï¼ˆå¦‚è¿›ç¨‹æˆ–çº¿ç¨‹ï¼‰ç»´æŠ¤ä¸€ä¸ª&lt;code&gt;vruntime&lt;/code&gt;å˜é‡ã€‚å®ƒå¹¶éå®é™…æµé€çš„ç‰©ç†æ—¶é—´ï¼Œè€Œæ˜¯ç»è¿‡&lt;strong&gt;æƒé‡è°ƒæ•´åçš„â€œå…¬å¹³æ—¶é—´â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—å…¬å¼&lt;/strong&gt;ï¼š&lt;code&gt;vruntime += å®é™…è¿è¡Œæ—¶é—´ * (NICE_0_LOAD / å½“å‰è¿›ç¨‹æƒé‡)&lt;/code&gt;ã€‚å…¶ä¸­ï¼Œ&lt;code&gt;NICE_0_LOAD&lt;/code&gt;æ˜¯åŸºå‡†æƒé‡ï¼ˆé€šå¸¸ä¸º1024ï¼Œå¯¹åº”niceå€¼0ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä½œç”¨&lt;/strong&gt;ï¼šå¯¹äºä¸€ä¸ªé«˜ä¼˜å…ˆçº§ï¼ˆæƒé‡é«˜ï¼‰çš„è¿›ç¨‹ï¼ŒåŒæ ·çš„å®é™…è¿è¡Œæ—¶é—´ï¼Œå…¶&lt;code&gt;vruntime&lt;/code&gt;å¢é•¿å¾—&lt;strong&gt;æ›´æ…¢&lt;/strong&gt;ï¼›åä¹‹ï¼Œä½ä¼˜å…ˆçº§è¿›ç¨‹çš„&lt;code&gt;vruntime&lt;/code&gt;å¢é•¿å¾—&lt;strong&gt;æ›´å¿«&lt;/strong&gt;ã€‚è¿™æ ·ï¼ŒCFSåœ¨æŒ‘é€‰ä¸‹ä¸€ä¸ªè¿è¡Œä»»åŠ¡æ—¶ï¼Œåªéœ€é€‰æ‹©&lt;code&gt;vruntime&lt;/code&gt;æœ€å°çš„é‚£ä¸ªï¼Œå°±èƒ½è‡ªç„¶ä¿è¯é«˜ä¼˜å…ˆçº§ä»»åŠ¡è·å¾—æ›´å¤šCPUæ—¶é—´ï¼ŒåŒæ—¶æ‰€æœ‰ä»»åŠ¡çš„â€œè™šæ‹Ÿè¿›åº¦â€ä¿æŒä¸€è‡´ï¼Œå®ç°å®è§‚å…¬å¹³ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æƒé‡ä¸niceå€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿›ç¨‹çš„ä¼˜å…ˆçº§é€šè¿‡&lt;strong&gt;niceå€¼&lt;/strong&gt;ï¼ˆé€šå¸¸èŒƒå›´-20åˆ°19ï¼Œå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰æ¥ä½“ç°ã€‚CFSå†…æ ¸ä¸­ç»´æŠ¤ä¸€å¼ &lt;strong&gt;æƒé‡è½¬æ¢è¡¨&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;prio_to_weight&lt;/code&gt;ï¼‰ï¼Œå°†niceå€¼æ˜ å°„ä¸ºå…·ä½“çš„æƒé‡å€¼ã€‚è¿™ç§æ˜ å°„å…³ç³»æ˜¯&lt;strong&gt;æŒ‡æ•°çº§&lt;/strong&gt;çš„ï¼Œæ„å‘³ç€niceå€¼æ¯é™ä½1ï¼Œæƒé‡å¢åŠ çº¦25%ï¼Œä»è€Œè·å¾—çº¦10%æ›´å¤šçš„CPUæ—¶é—´ä»½é¢ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çº¢é»‘æ ‘ä¸è°ƒåº¦å†³ç­–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CFSä¸ºæ¯ä¸ªCPUæ ¸å¿ƒç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;çº¢é»‘æ ‘ï¼ˆrbtreeï¼‰&lt;/strong&gt;ï¼Œä½œä¸ºå…¶å°±ç»ªé˜Ÿåˆ—ã€‚æ‰€æœ‰å¯è¿è¡Œä»»åŠ¡æŒ‰å…¶&lt;code&gt;vruntime&lt;/code&gt;ä¸ºé”®å€¼æ’å…¥æ ‘ä¸­ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©ä¸‹ä¸€ä¸ªä»»åŠ¡&lt;/strong&gt;ï¼šè°ƒåº¦å™¨åªéœ€å–å‡ºçº¢é»‘æ ‘ä¸­æœ€å·¦ä¾§ï¼ˆå³&lt;code&gt;vruntime&lt;/code&gt;æœ€å°ï¼‰çš„èŠ‚ç‚¹å¯¹åº”çš„ä»»åŠ¡å³å¯ï¼Œæ“ä½œéå¸¸é«˜æ•ˆ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»»åŠ¡ç®¡ç†&lt;/strong&gt;ï¼šå½“ä»»åŠ¡è¢«åˆ›å»ºã€å”¤é†’æˆ–ç”±I/Oæ“ä½œè¿”å›å¯è¿è¡ŒçŠ¶æ€æ—¶ï¼Œå®ƒä¼šè¢«ä»¥å…¶å½“å‰çš„&lt;code&gt;vruntime&lt;/code&gt;å€¼æ’å…¥çº¢é»‘æ ‘ã€‚å½“ä»»åŠ¡è¢«è°ƒåº¦æ‰§è¡Œã€é˜»å¡æˆ–ç»ˆæ­¢æ—¶ï¼Œåˆ™ä»æ ‘ä¸­ç§»é™¤ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³é”®å‚æ•°ä¸è°ƒä¼˜"&gt;âš™ï¸ å…³é”®å‚æ•°ä¸è°ƒä¼˜
&lt;/h3&gt;&lt;p&gt;CFSæä¾›äº†ä¸€äº›å¯è°ƒèŠ‚çš„å†…æ ¸å‚æ•°ï¼Œå…è®¸ç³»ç»Ÿç®¡ç†å‘˜æ ¹æ®å·¥ä½œè´Ÿè½½ç‰¹æ€§è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦å»¶è¿Ÿï¼ˆ&lt;code&gt;sched_latency_ns&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šç›®æ ‡æ˜¯åœ¨æ­¤æ—¶é—´å‘¨æœŸå†…ï¼Œè®©æ‰€æœ‰å¯è¿è¡Œä»»åŠ¡éƒ½è‡³å°‘è¿è¡Œä¸€æ¬¡ã€‚é»˜è®¤å€¼é€šå¸¸ä¸º20æ¯«ç§’ã€‚å¦‚æœå¯è¿è¡Œä»»åŠ¡æ•°è¶…è¿‡ &lt;code&gt;sched_latency_ns / sched_min_granularity_ns&lt;/code&gt;ï¼Œåˆ™è°ƒåº¦å‘¨æœŸä¼šå»¶é•¿ä¸º &lt;code&gt;ä»»åŠ¡æ•° * sched_min_granularity_ns&lt;/code&gt;ï¼Œä»¥ç¡®ä¿æ¯ä¸ªä»»åŠ¡éƒ½èƒ½è·å¾—ä¸€ä¸ªæœ‰æ„ä¹‰çš„æœ€å°æ—¶é—´ç‰‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å°è°ƒåº¦ç²’åº¦ï¼ˆ&lt;code&gt;sched_min_granularity_ns&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šæ¯ä¸ªä»»åŠ¡è¢«è°ƒåº¦åè‡³å°‘åº”è¿è¡Œçš„æ—¶é—´ï¼Œé˜²æ­¢å› åˆ‡æ¢è¿‡äºé¢‘ç¹è€Œå¼•å…¥è¿‡å¤šå¼€é”€ã€‚é»˜è®¤å€¼é€šå¸¸ä¸º4æ¯«ç§’ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å”¤é†’æŠ¢å ç²’åº¦ï¼ˆ&lt;code&gt;sched_wakeup_granularity_ns&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªè¢«å”¤é†’çš„ä»»åŠ¡ï¼ˆå¦‚ç­‰å¾…I/Oå®Œæˆçš„ä»»åŠ¡ï¼‰å°è¯•æŠ¢å å½“å‰è¿è¡Œä»»åŠ¡æ—¶ï¼Œå…¶&lt;code&gt;vruntime&lt;/code&gt;å¿…é¡»æ¯”å½“å‰ä»»åŠ¡å°è¶…è¿‡è¿™ä¸ªç²’åº¦å€¼ï¼Œæ‰èƒ½æˆåŠŸæŠ¢å ã€‚è¿™æœ‰åŠ©äºå¹³è¡¡å…¬å¹³æ€§å’Œç¼“å­˜å±€éƒ¨æ€§ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸å…¶ä»–è°ƒåº¦å™¨å¯¹æ¯”"&gt;ğŸ“Š ä¸å…¶ä»–è°ƒåº¦å™¨å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;äº†è§£CFSä¸å†å²ä¸Šå…¶ä»–è°ƒåº¦å™¨çš„åŒºåˆ«ï¼Œèƒ½æ›´å¥½åœ°ç†è§£å…¶è®¾è®¡å“²å­¦ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;O(n) è°ƒåº¦å™¨&lt;/strong&gt; (æ—©æœŸç‰ˆæœ¬)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;O(1) è°ƒåº¦å™¨&lt;/strong&gt; (2.6å†…æ ¸æ—©æœŸ)&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CFS è°ƒåº¦å™¨&lt;/strong&gt; (2.6.23åŠä»¥å)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå†å…¨å±€ä»»åŠ¡åˆ—è¡¨ï¼Œé€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡&lt;/td&gt;
&lt;td&gt;ä¸ºæ¯ä¸ªCPUç»´æŠ¤æ´»åŠ¨/è¿‡æœŸåŒé˜Ÿåˆ—æ•°ç»„ï¼Œå®ç°O(1)è°ƒåº¦&lt;/td&gt;
&lt;td&gt;åŸºäº&lt;strong&gt;vruntime&lt;/strong&gt;å’Œçº¢é»‘æ ‘ï¼Œè¿½æ±‚ç»å¯¹å…¬å¹³&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¬å¹³æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒå·®ï¼Œéš¾ä»¥å¤„ç†åŠ¨æ€ä¼˜å…ˆçº§&lt;/td&gt;
&lt;td&gt;å°šå¯ï¼Œä½†é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¯èƒ½é¥¿æ­»ä½ä¼˜å…ˆçº§ä»»åŠ¡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¾ˆå¥½&lt;/strong&gt;ï¼Œé€šè¿‡vruntimeå¤©ç„¶é˜²æ­¢é¥¥é¥¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(N)ï¼Œä»»åŠ¡å¤šæ—¶æ€§èƒ½å·®&lt;/td&gt;
&lt;td&gt;O(1)ï¼Œä½†ä»£ç å¤æ‚ï¼Œå¯å‘å¼ç­–ç•¥å¯èƒ½ä¸å‡†ç¡®&lt;/td&gt;
&lt;td&gt;O(log N)ï¼Œåœ¨å…¬å¹³å’Œæ•ˆç‡é—´å–å¾—è‰¯å¥½å¹³è¡¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº¤äº’æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€èˆ¬&lt;/td&gt;
&lt;td&gt;è¾ƒå¥½ï¼Œä½†ä¾èµ–äºå¤æ‚çš„äº¤äº’æ€§åˆ¤æ–­å¯å‘å¼ç®—æ³•&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜ç§€&lt;/strong&gt;ï¼Œå¯¹äº¤äº’å¼ä»»åŠ¡å“åº”çµæ•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Linux CFSè°ƒåº¦å™¨é€šè¿‡å¼•å…¥&lt;strong&gt;è™šæ‹Ÿè¿è¡Œæ—¶é—´ï¼ˆvruntimeï¼‰&lt;/strong&gt; çš„æ¦‚å¿µï¼Œå¹¶ç»“åˆ&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;è¿™ä¸€é«˜æ•ˆæ•°æ®ç»“æ„ï¼ŒæˆåŠŸå®ç°äº†å…¶â€œå®Œå…¨å…¬å¹³â€çš„è®¾è®¡ç›®æ ‡ã€‚å®ƒä¸ä»…ä¿è¯äº†ç³»ç»Ÿåœ¨å®è§‚ä¸Šçš„å…¬å¹³æ€§ï¼Œè¿˜é€šè¿‡å¯è°ƒèŠ‚çš„å‚æ•°æä¾›äº†è‰¯å¥½çš„äº¤äº’ä½“éªŒå’Œç³»ç»Ÿååé‡ï¼Œé€‚åº”äº†ä»æ¡Œé¢åˆ°æœåŠ¡å™¨ã€ä¹ƒè‡³ç°ä»£AIå’Œè¾¹ç¼˜è®¡ç®—ç­‰å¤šæ ·åŒ–çš„å·¥ä½œè´Ÿè½½éœ€æ±‚ ã€‚å…¶è®¾è®¡æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦é¢†åŸŸçš„ä¸€ä¸ªå…¸èŒƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£Linux CFSã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ–¹é¢ï¼Œå¦‚ç»„è°ƒåº¦ï¼ˆCFS in group schedulingï¼‰æˆ–ä¸å®æ—¶è°ƒåº¦å™¨çš„ååŒå·¥ä½œç­‰æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å…±äº«å†…å­˜"&gt;å…±äº«å†…å­˜
&lt;/h2&gt;&lt;p&gt;è¿›ç¨‹é—´å…±äº«å†…å­˜é€šä¿¡ç¡®å®å¯ä»¥é€šè¿‡ &lt;code&gt;mmap&lt;/code&gt;å®ç°ï¼Œä½†å®ƒå¹¶éå”¯ä¸€çš„æ–¹å¼ã€‚åœ¨ Linux ä¸­ï¼Œä½ æœ‰å‡ ç§é€‰æ‹©æ¥å®ç°å…±äº«å†…å­˜ï¼Œ&lt;code&gt;mmap&lt;/code&gt;æ˜¯å…¶ä¸­éå¸¸æ ¸å¿ƒå’Œçµæ´»çš„ä¸€ç§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿäº†è§£å‡ ç§ä¸»è¦çš„å…±äº«å†…å­˜å®ç°æ–¹å¼åŠå…¶ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;å…³é”®ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;mmap&lt;/code&gt;(æ–‡ä»¶æ˜ å°„)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ™®é€šæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œå¤šä¸ªè¿›ç¨‹æ˜ å°„åŒä¸€æ–‡ä»¶å³å¯å…±äº«å†…å­˜ã€‚&lt;/td&gt;
&lt;td&gt;æ—¢éœ€è¿›ç¨‹é€šä¿¡ï¼Œåˆéœ€æ•°æ®æŒä¹…åŒ–çš„åœºæ™¯ï¼›éäº²ç¼˜å…³ç³»è¿›ç¨‹é—´é€šä¿¡ã€‚&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¼šåŒæ­¥åˆ°ç£ç›˜æ–‡ä»¶ï¼›é€‚ç”¨äºä»»æ„è¿›ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;mmap&lt;/code&gt;(åŒ¿åæ˜ å°„)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºä¸ä¸æ–‡ä»¶å…³è”çš„å…±äº«å†…å­˜åŒºï¼Œé€šå¸¸éœ€é…åˆ &lt;code&gt;MAP_ANONYMOUS&lt;/code&gt;æˆ– &lt;code&gt;MAP_SHARED&lt;/code&gt;æ ‡å¿—ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;äº²ç¼˜å…³ç³»è¿›ç¨‹&lt;/strong&gt;ï¼ˆå¦‚çˆ¶å­è¿›ç¨‹ï¼‰é—´çš„é«˜æ•ˆé€šä¿¡ã€‚&lt;/td&gt;
&lt;td&gt;æ— éœ€å®é™…æ–‡ä»¶ï¼Œçº¯å†…å­˜æ“ä½œï¼Œé€Ÿåº¦æ›´å¿«ï¼›é€šå¸¸é™äºæœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;POSIX å…±äº«å†…å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;shm_open()&lt;/code&gt;åˆ›å»ºå…·åå¯¹è±¡ï¼Œå†ä½¿ç”¨ &lt;code&gt;mmap&lt;/code&gt;æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦è·¨ä»»æ„è¿›ç¨‹è®¿é—®çš„å…±äº«å†…å­˜ï¼›ç¬¦åˆPOSIXæ ‡å‡†ã€‚&lt;/td&gt;
&lt;td&gt;å¯¹è±¡ä½äº &lt;code&gt;/dev/shm&lt;/code&gt;ï¼ˆtmpfsæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œæ€§èƒ½å¥½ï¼›æ¥å£ç°ä»£ç®€æ´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;System V å…±äº«å†…å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;shmget&lt;/code&gt;, &lt;code&gt;shmat&lt;/code&gt;ç­‰ä¸€å¥—ç³»ç»Ÿè°ƒç”¨ã€‚&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿçš„è·¨è¿›ç¨‹å…±äº«å†…å­˜ï¼›ç³»ç»ŸVç¯å¢ƒã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨é”®å€¼ï¼ˆkeyï¼‰æ ‡è¯†å’Œè·å–å…±äº«å†…å­˜æ®µï¼›å†å²è¾ƒä¹…ï¼Œå¹¿æ³›æ”¯æŒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£-mmapçš„ä¸¤ç§å…±äº«å†…å­˜æ¨¡å¼"&gt;ğŸ”§ ç†è§£ &lt;code&gt;mmap&lt;/code&gt;çš„ä¸¤ç§å…±äº«å†…å­˜æ¨¡å¼
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;mmap&lt;/code&gt;å®ç°å…±äº«å†…å­˜ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºæ˜¯å¦å…³è”ä¸€ä¸ªå®é™…çš„æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºäºæ–‡ä»¶çš„æ˜ å°„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ &lt;code&gt;mmap&lt;/code&gt;çš„åŸºæœ¬åŠŸèƒ½ã€‚ä¸€ä¸ªè¿›ç¨‹é€šè¿‡ &lt;code&gt;mmap&lt;/code&gt;å°†æ–‡ä»¶çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨æ˜ å°„åˆ°è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å½“å¤šä¸ªè¿›ç¨‹ä½¿ç”¨ &lt;code&gt;MAP_SHARED&lt;/code&gt;æ ‡å¿—æ˜ å°„&lt;strong&gt;åŒä¸€ä¸ªæ–‡ä»¶&lt;/strong&gt;æ—¶ï¼Œå®ƒä»¬å°±èƒ½çœ‹åˆ°å¯¹åŒä¸€å—ç‰©ç†å†…å­˜çš„ä¿®æ”¹ï¼Œä»è€Œå®ç°å…±äº«å†…å­˜é€šä¿¡ã€‚ä¿®æ”¹æœ€ç»ˆä¼šå†™å›æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿå…·æœ‰æ•°æ®æŒä¹…åŒ–çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒ¿åæ˜ å°„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹å¼ä¸ä¾èµ–ç£ç›˜æ–‡ä»¶ã€‚è¿›ç¨‹é€šè¿‡è®¾ç½® &lt;code&gt;MAP_ANONYMOUS&lt;/code&gt;æ ‡å¿—å¹¶æŒ‡å®š &lt;code&gt;fd&lt;/code&gt;å‚æ•°ä¸º &lt;code&gt;-1&lt;/code&gt;ï¼Œæ¥åˆ›å»ºä¸€å—â€œåŒ¿åâ€çš„å…±äº«å†…å­˜åŒºåŸŸã€‚è¿™å—å†…å­˜åŒºåŸŸæœ€åˆç”±å…¨é›¶å¡«å……ã€‚å®ƒä¸»è¦ç”¨äº&lt;strong&gt;å…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡&lt;/strong&gt;ï¼ˆä¾‹å¦‚çˆ¶å­è¿›ç¨‹ï¼‰ã€‚çˆ¶è¿›ç¨‹åœ¨è°ƒç”¨ &lt;code&gt;fork()&lt;/code&gt;ä¹‹å‰åˆ›å»ºåŒ¿åå…±äº«å†…å­˜ï¼Œå­è¿›ç¨‹ä¼šç»§æ‰¿è¿™å—æ˜ å°„ï¼Œä»è€Œå…±äº«å†…å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;æ— è®ºé€‰æ‹©å“ªç§å…±äº«å†…å­˜æ–¹å¼ï¼Œä»¥ä¸‹å‡ ç‚¹éƒ½éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æœºåˆ¶æ˜¯å¿…é¡»çš„&lt;/strong&gt;ï¼šå…±äº«å†…å­˜æœ¬èº«ä¸æä¾›ä»»ä½•åŒæ­¥æœºåˆ¶ã€‚å½“å¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»å†™åŒä¸€å—å†…å­˜æ—¶ï¼Œä¼šäº§ç”Ÿ&lt;strong&gt;ç«æ€æ¡ä»¶&lt;/strong&gt;ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚ä½ å¿…é¡»é…åˆä½¿ç”¨&lt;strong&gt;ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ã€äº’æ–¥é”ï¼ˆMutexï¼‰&lt;/strong&gt; ç­‰åŒæ­¥å·¥å…·æ¥ç¡®ä¿æ•°æ®è®¿é—®çš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å¯¹é½ä¸å¤§å°&lt;/strong&gt;ï¼š&lt;code&gt;mmap&lt;/code&gt;çš„æ“ä½œå•ä½æ˜¯&lt;strong&gt;å†…å­˜é¡µ&lt;/strong&gt;ï¼ˆé€šå¸¸ä¸º4KBï¼‰ã€‚æ˜ å°„çš„å¤§å°æœ€å¥½æ˜¯é¡µå¤§å°çš„æ•´æ•°å€ã€‚å¦‚æœæ–‡ä»¶å¤§å°ä¸æ˜¯é¡µçš„æ•´æ•°å€ï¼Œæœ€åæœªä½¿ç”¨çš„éƒ¨åˆ†ä¼šè¢«æ¸…é›¶ï¼Œä¸”è®¿é—®è¶…å‡ºæ–‡ä»¶å®é™…å¤§å°çš„æ˜ å°„åŒºåŸŸå¯èƒ½ä¼šå¼•å‘æ®µé”™è¯¯ï¼ˆSIGSEGVï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºç®¡ç†&lt;/strong&gt;ï¼šä½¿ç”¨å®Œæ¯•åï¼Œåº”ä½¿ç”¨ &lt;code&gt;munmap&lt;/code&gt;è§£é™¤æ˜ å°„ã€‚å¯¹äº POSIX å…±äº«å†…å­˜ï¼Œè¿˜éœ€è¦ &lt;code&gt;shm_unlink&lt;/code&gt;æ¥åˆ é™¤å…±äº«å†…å­˜å¯¹è±¡ï¼›å¯¹äº System V å…±äº«å†…å­˜ï¼Œåˆ™éœ€è¦ &lt;code&gt;shmctl&lt;/code&gt;è¿›è¡Œç®¡ç†ï¼Œé˜²æ­¢èµ„æºæ³„æ¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©å…±äº«å†…å­˜æ–¹å¼"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©å…±äº«å†…å­˜æ–¹å¼
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§å…±äº«å†…å­˜æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚æ¥å†³å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥éœ€è¦åœ¨&lt;strong&gt;äº²ç¼˜è¿›ç¨‹&lt;/strong&gt;ï¼ˆå¦‚çˆ¶å­è¿›ç¨‹ï¼‰é—´è¿›è¡Œ&lt;strong&gt;é«˜æ•ˆã€ä¸´æ—¶æ€§&lt;/strong&gt;çš„é€šä¿¡ï¼Œ&lt;strong&gt;åŒ¿åå†…å­˜æ˜ å°„&lt;/strong&gt;é€šå¸¸æ˜¯ç®€å•ç›´æ¥çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥éœ€è¦åœ¨&lt;strong&gt;ä»»æ„è¿›ç¨‹&lt;/strong&gt;ï¼ˆæ— äº²ç¼˜å…³ç³»ï¼‰é—´å…±äº«æ•°æ®ï¼Œä¸”å¯èƒ½å¸Œæœ›æ•°æ®æŒä¹…åŒ–ï¼Œå¯è€ƒè™‘&lt;strong&gt;åŸºäºæ–‡ä»¶çš„ &lt;code&gt;mmap&lt;/code&gt;æ˜ å°„&lt;/strong&gt;æˆ– &lt;strong&gt;POSIX å…±äº«å†…å­˜&lt;/strong&gt;ï¼ˆ&lt;code&gt;shm_open&lt;/code&gt;+ &lt;code&gt;mmap&lt;/code&gt;ï¼‰ã€‚POSIX å…±äº«å†…å­˜æ¥å£æ›´ç°ä»£ï¼Œä¸”åŸºäºtmpfsï¼Œæ€§èƒ½é€šå¸¸å¾ˆå¥½ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€äº›ä¼ ç»Ÿæˆ–éœ€è¦ä¸ç°æœ‰System V IPCäº¤äº’çš„é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šé€‰æ‹© &lt;strong&gt;System V å…±äº«å†…å­˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ &lt;code&gt;mmap&lt;/code&gt;åœ¨è¿›ç¨‹é—´å…±äº«å†…å­˜é€šä¿¡ä¸­çš„ä½œç”¨ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å®ç°ç»†èŠ‚æˆ–åŒæ­¥æœºåˆ¶æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ipc"&gt;IPC
&lt;/h2&gt;&lt;p&gt;System V IPC å’Œ POSIX IPC æ˜¯ Linux/UNIX ç³»ç»Ÿä¸Šä¸¤å¥—é‡è¦çš„è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°è¿›è¡ŒæŠ€æœ¯é€‰å‹ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;System V IPC&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;POSIX IPC&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†å²ä¸èµ·æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æºè‡ª AT&amp;amp;T çš„ UNIX System Vï¼Œæ˜¯&lt;strong&gt;ä¼ ç»Ÿ&lt;/strong&gt;çš„ IPC æœºåˆ¶ï¼Œå†å²ä¹…è¿œ ã€‚&lt;/td&gt;
&lt;td&gt;æºè‡ª IEEE çš„ POSIX æ ‡å‡†ï¼Œæ˜¯&lt;strong&gt;ç°ä»£&lt;/strong&gt;çš„ã€ä¸ºæ ‡å‡†åŒ–å’Œå¯ç§»æ¤æ€§è€Œè®¾è®¡çš„ IPC æœºåˆ¶ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½åä¸æ ‡è¯†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨é€šè¿‡ &lt;code&gt;ftok()&lt;/code&gt;ç”Ÿæˆçš„&lt;strong&gt;é”®å€¼ï¼ˆkey_tï¼‰&lt;/strong&gt; æ¥æ ‡è¯†å¯¹è±¡ï¼Œæ˜“äº§ç”Ÿå‘½åå†²çª ã€‚&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨&lt;strong&gt;æ–‡ä»¶ç³»ç»Ÿè·¯å¾„&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;/my_shm&lt;/code&gt;ï¼‰æ¥å‘½åå¯¹è±¡ï¼Œæ›´ç›´è§‚ï¼Œå”¯ä¸€æ€§æ›´å¥½ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;API è®¾è®¡ä¸æ˜“ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;API è¾ƒä¸º&lt;strong&gt;åº•å±‚å’Œå¤æ‚&lt;/strong&gt;ï¼Œä¸åŒåŠŸèƒ½ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ã€å…±äº«å†…å­˜ï¼‰çš„å‡½æ•°é£æ ¼ä¸ç»Ÿä¸€ ã€‚&lt;/td&gt;
&lt;td&gt;API è®¾è®¡&lt;strong&gt;æ›´ç°ä»£ã€ä¸€è‡´&lt;/strong&gt;ï¼Œç±»ä¼¼æ–‡ä»¶æ“ä½œï¼ˆ&lt;code&gt;open&lt;/code&gt;, &lt;code&gt;close&lt;/code&gt;, &lt;code&gt;unlink&lt;/code&gt;ï¼‰ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œæ˜“äºä½¿ç”¨ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†…æ ¸æŒä¹…åŒ–&lt;/strong&gt;ã€‚å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œé™¤éè¢«æ˜¾å¼åˆ é™¤æˆ–ç³»ç»Ÿé‡å¯ï¼Œå¦åˆ™ä¼šä¸€ç›´å­˜åœ¨äºå†…æ ¸ä¸­ ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿›ç¨‹æŒä¹…åŒ–&lt;/strong&gt;ã€‚å½“æ‰€æœ‰è¿›ç¨‹éƒ½å…³é—­è¿æ¥åï¼Œå¯¹è±¡é€šå¸¸ä¼šè¢«è‡ªåŠ¨å›æ”¶ï¼ˆé™¤éè®¾ç½®ä¸ºæŒä¹…åŒ–ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½ä¸çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠŸèƒ½ç›¸å¯¹åŸºç¡€ï¼Œä¾‹å¦‚ä¿¡å·é‡æ“ä½œæ”¯æŒä»»æ„æ•°å€¼å¢å‡ï¼Œä½†ç»“æ„è¾ƒä¸ºå¤æ‚ï¼ˆä¿¡å·é‡é›†ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;é€šå¸¸æä¾›æ›´ä¸°å¯Œçš„ç‰¹æ€§å’Œæ›´çµæ´»çš„é€‰é¡¹ï¼Œä¾‹å¦‚æ¶ˆæ¯é˜Ÿåˆ—æ”¯æŒä¼˜å…ˆçº§å’Œå¼‚æ­¥é€šçŸ¥ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å¤§å¤šæ•°ç±» UNIX ç³»ç»Ÿä¸Šå¯ç”¨ï¼Œä½†ä¸åŒç³»ç»Ÿé—´çš„å®ç°ç»†èŠ‚å¯èƒ½å­˜åœ¨å·®å¼‚ ã€‚&lt;/td&gt;
&lt;td&gt;åœ¨ç¬¦åˆ POSIX æ ‡å‡†çš„ç³»ç»Ÿï¼ˆå¦‚ Linux, macOS, BSDï¼‰ä¸Šå…·æœ‰&lt;strong&gt;å¾ˆå¥½çš„å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼Œæ¥å£ç»Ÿä¸€ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå·®å¼‚æ·±åº¦è§£è¯»"&gt;ğŸ”‘ æ ¸å¿ƒå·®å¼‚æ·±åº¦è§£è¯»
&lt;/h3&gt;&lt;h4 id="1-å‘½åæ–¹å¼é”®å€¼-vs-è·¯å¾„"&gt;&lt;strong&gt;1. å‘½åæ–¹å¼ï¼šé”®å€¼ vs. è·¯å¾„&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸¤è€…æœ€ç›´è§‚çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;System V&lt;/strong&gt; çš„é”®å€¼ç”Ÿæˆä¾èµ–æ–‡ä»¶è·¯å¾„å’Œé¡¹ç›®IDï¼Œå¦‚æœä¸¤ä¸ªä¸ç›¸å…³çš„ç¨‹åºæ°å·§ä½¿ç”¨äº†ç›¸åŒçš„å‚æ•°è°ƒç”¨ &lt;code&gt;ftok()&lt;/code&gt;ï¼Œå°±å¯èƒ½æ„å¤–åœ°è®¿é—®åˆ°åŒä¸€ä¸ªIPCå¯¹è±¡ï¼Œå¸¦æ¥å®‰å…¨å’Œç®¡ç†ä¸Šçš„éšæ‚£ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;POSIX&lt;/strong&gt; çš„è·¯å¾„åæ–¹å¼åˆ™æ¸…æ™°å¾—å¤šï¼Œå°±åƒç®¡ç†æ™®é€šæ–‡ä»¶ä¸€æ ·ã€‚ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;ls /dev/shm&lt;/code&gt;æŸ¥çœ‹å¤§å¤šæ•°POSIXå…±äº«å†…å­˜å¯¹è±¡ï¼Œç®¡ç†èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä¹Ÿå‡å°‘äº†å†²çªçš„å¯èƒ½æ€§ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-api-é£æ ¼å¤æ‚-vs-ç®€æ´"&gt;&lt;strong&gt;2. API é£æ ¼ï¼šå¤æ‚ vs. ç®€æ´&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;System V&lt;/strong&gt; çš„APIæ˜¯å†å²é—ç•™çš„äº§ç‰©ï¼Œä¸åŒæ¨¡å—çš„å‡½æ•°åå’Œå‚æ•°é£æ ¼ä¸ä¸€ï¼Œéœ€è¦è®°å¿†çš„ç»†èŠ‚è¾ƒå¤šã€‚ä¾‹å¦‚ï¼Œç®¡ç†å…±äº«å†…å­˜éœ€è¦ &lt;code&gt;shmget&lt;/code&gt;, &lt;code&gt;shmat&lt;/code&gt;, &lt;code&gt;shmdt&lt;/code&gt;, &lt;code&gt;shmctl&lt;/code&gt;ç­‰å¤šä¸ªå‡½æ•° ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;POSIX&lt;/strong&gt; çš„APIåˆ™é«˜åº¦ç»Ÿä¸€ï¼Œéµå¾ª &lt;code&gt;*_open&lt;/code&gt;, &lt;code&gt;*_close&lt;/code&gt;, &lt;code&gt;*_unlink&lt;/code&gt;çš„æ¨¡å¼ï¼Œå¦‚æœä½ ä¼šæ“ä½œæ–‡ä»¶ï¼Œå°±èƒ½å¾ˆå¿«ä¸Šæ‰‹POSIX IPCã€‚è¿™ç§ä¸€è‡´æ€§å¤§å¤§é™ä½äº†ç¼–ç¨‹çš„å¤æ‚åº¦ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ç”Ÿå‘½å‘¨æœŸæŒä¹…åŒ–-vs-è‡ªåŠ¨å›æ”¶"&gt;&lt;strong&gt;3. ç”Ÿå‘½å‘¨æœŸï¼šæŒä¹…åŒ– vs. è‡ªåŠ¨å›æ”¶&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;System V&lt;/strong&gt; å¯¹è±¡çš„â€œå†…æ ¸æŒä¹…åŒ–â€ç‰¹æ€§æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚å¥½å¤„æ˜¯åˆ›å»ºå®ƒçš„è¿›ç¨‹é€€å‡ºåï¼Œå…¶ä»–è¿›ç¨‹ä¾ç„¶å¯ä»¥è¿æ¥ä½¿ç”¨ï¼›åå¤„æ˜¯å¦‚æœç¨‹åºå¼‚å¸¸é€€å‡ºè€Œæ²¡æœ‰æ¸…ç†ï¼Œè¿™äº›å¯¹è±¡å°±ä¼šæˆä¸ºâ€œåƒµå°¸IPCâ€ï¼Œå ç”¨ç³»ç»Ÿèµ„æºï¼Œéœ€è¦æ‰‹åŠ¨å‘½ä»¤ï¼ˆå¦‚ &lt;code&gt;ipcs&lt;/code&gt;/&lt;code&gt;ipcrm&lt;/code&gt;ï¼‰æ¥æ¸…ç† ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;POSIX&lt;/strong&gt; å¯¹è±¡çš„â€œè¿›ç¨‹æŒä¹…åŒ–â€æ›´è‡ªåŠ¨åŒ–ã€‚å½“æœ€åä¸€ä¸ªä½¿ç”¨è¯¥å¯¹è±¡çš„è¿›ç¨‹å…³é—­å®ƒåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›æ”¶èµ„æºï¼Œè¿™æœ‰åŠ©äºé˜²æ­¢èµ„æºæ³„æ¼ã€‚å½“ç„¶ï¼ŒPOSIXä¹Ÿæ”¯æŒé€šè¿‡è®¾ç½®ä½¿å¯¹è±¡æŒä¹…åŒ– ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ &lt;strong&gt;é‡è¦æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒæ­¥æ˜¯å¿…é¡»çš„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ— è®ºæ˜¯System Vè¿˜æ˜¯POSIXçš„&lt;strong&gt;å…±äº«å†…å­˜&lt;/strong&gt;ï¼Œéƒ½åªæä¾›äº†å†…å­˜å…±äº«çš„èƒ½åŠ›ï¼Œ&lt;strong&gt;æœ¬èº«ä¸å…·å¤‡ä»»ä½•åŒæ­¥æœºåˆ¶&lt;/strong&gt;ã€‚å½“å¤šä¸ªè¿›ç¨‹åŒæ—¶è¯»å†™åŒä¸€å—å†…å­˜æ—¶ï¼Œå¿…é¡»é…åˆä½¿ç”¨&lt;strong&gt;ä¿¡å·é‡ï¼ˆSemaphoreï¼‰&lt;/strong&gt; æˆ–&lt;strong&gt;äº’æ–¥é”ï¼ˆMutexï¼‰&lt;/strong&gt; ç­‰åŒæ­¥å·¥å…·æ¥é¿å…æ•°æ®æ··ä¹± ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Linuxå†…æ ¸å®ç°çš„åº•å±‚è”ç³»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨Linuxåº•å±‚ï¼Œ&lt;strong&gt;System Vå…±äº«å†…å­˜å’ŒPOSIXå…±äº«å†…å­˜éƒ½æ˜¯åŸºäºtmpfsï¼ˆä¸€ç§å†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼‰å®ç°çš„&lt;/strong&gt; ã€‚ä½†å®ƒä»¬ä½¿ç”¨çš„æ˜¯å†…æ ¸ä¸­ä¸¤ä¸ªä¸åŒçš„tmpfså®ä¾‹ã€‚è¿™å¯¼è‡´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;System Vå…±äº«å†…å­˜çš„å¤§å°ä¸»è¦å— &lt;code&gt;/proc/sys/kernel/shmmax&lt;/code&gt;å‚æ•°é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;POSIXå…±äº«å†…å­˜çš„å¤§å°åˆ™å—æŒ‚è½½ç‚¹ï¼ˆé€šå¸¸æ˜¯ &lt;code&gt;/dev/shm&lt;/code&gt;ï¼‰çš„å®¹é‡é™åˆ¶ï¼Œé»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„ä¸€åŠ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ“ &lt;strong&gt;å¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© POSIX IPC çš„åœºæ™¯ï¼š&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°é¡¹ç›®å¼€å‘&lt;/strong&gt;ï¼Œå°¤å…¶æ³¨é‡ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;è‰¯å¥½çš„å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼Œå¸Œæœ›ä»£ç èƒ½åœ¨ä¸åŒUNIX-likeç³»ç»Ÿï¼ˆå¦‚Linux, macOS, BSDï¼‰ä¸Šå¹³æ»‘è¿ç§»æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;é¡¹ç›®ç»“æ„å¤æ‚ï¼Œéœ€è¦&lt;strong&gt;æ¸…æ™°ã€ä¸€è‡´çš„API&lt;/strong&gt;æ¥é™ä½å¼€å‘éš¾åº¦æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘ä½¿ç”¨ System V IPC çš„åœºæ™¯ï¼š&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç»´æŠ¤&lt;strong&gt;é—ç•™ç³»ç»Ÿï¼ˆLegacy Systemï¼‰&lt;/strong&gt;ï¼Œå¿…é¡»ä¿æŒå…¼å®¹æ€§æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€äº›&lt;strong&gt;ç‰¹å®šçš„åµŒå…¥å¼æˆ–è€æ—§UNIXç¯å¢ƒ&lt;/strong&gt;ä¸­ï¼Œå¯èƒ½åªæ”¯æŒSystem Vã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦æ‰§è¡Œä¿¡å·é‡çš„å¤æ‚æ“ä½œï¼ˆå¦‚ä¸€æ¬¡æ€§å¢å‡å¤šä¸ªå€¼ï¼‰ï¼ŒSystem Vä¿¡å·é‡é›†å¯èƒ½æ›´ç›´æ¥ï¼ˆä½†è¿™ç§æƒ…å†µè¾ƒå°‘è§ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œ&lt;strong&gt;POSIX IPC åœ¨è®¾è®¡ä¸Šæ›´ç°ä»£ã€æ›´ä¼˜é›…ï¼Œæ˜¯å¤§å¤šæ•°æ–°é¡¹ç›®çš„é¦–é€‰&lt;/strong&gt;ã€‚è€Œ &lt;strong&gt;System V IPC ä¸»è¦ä»·å€¼åœ¨äºå…¶å¯¹ä¼ ç»Ÿç³»ç»Ÿçš„å…¼å®¹æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åšå‡ºæ¸…æ™°çš„æŠ€æœ¯å†³ç­–ï¼å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„IPCæœºåˆ¶ï¼ˆæ¯”å¦‚ä¿¡å·é‡æˆ–æ¶ˆæ¯é˜Ÿåˆ—ï¼‰æœ‰æ›´æ·±å…¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="posix"&gt;POSIX
&lt;/h2&gt;&lt;p&gt;POSIXï¼ˆPortable Operating System Interfaceï¼Œå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼‰æ˜¯ä¸€ç³»åˆ—ç”±IEEEå’ŒThe Open Groupåˆ¶å®šçš„æ ‡å‡†ï¼Œæ—¨åœ¨&lt;strong&gt;ç¡®ä¿ä¸åŒæ“ä½œç³»ç»Ÿï¼ˆå°¤å…¶æ˜¯ç±»Unixç³»ç»Ÿï¼‰ä¸ºåº”ç”¨ç¨‹åºæä¾›ç»Ÿä¸€çš„æ¥å£&lt;/strong&gt;ï¼Œä»è€Œå®ç°è½¯ä»¶çš„è·¨å¹³å°å¯ç§»æ¤æ€§ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è®©å¼€å‘è€…ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œå°±èƒ½åœ¨å„ç§å…¼å®¹POSIXçš„ç³»ç»Ÿä¸Šç¼–è¯‘å’Œè¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡POSIXçš„å…¨è²Œï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å…¶æ ¸å¿ƒè¦ç´ ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç»´åº¦&lt;/th&gt;
&lt;th&gt;POSIX çš„å…³é”®ä¿¡æ¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¹æœ¬ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°&lt;strong&gt;æºä»£ç çº§å¯ç§»æ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡†ç¼–å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ­£å¼ç§°å‘¼ä¸º &lt;strong&gt;IEEE Std 1003&lt;/strong&gt;ï¼Œå›½é™…æ ‡å‡†åç§°ä¸º &lt;strong&gt;ISO/IEC 9945&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ“ä½œç³»ç»Ÿæ¥å£ã€å·¥å…·å’Œè¡Œä¸ºæä¾›&lt;strong&gt;ç»Ÿä¸€è§„èŒƒ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶µç›–èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿè°ƒç”¨APIã€Shellä¸å‘½ä»¤è¡Œå·¥å…·ã€æ–‡ä»¶ç³»ç»Ÿå¸ƒå±€ã€çº¿ç¨‹æ¨¡å‹ï¼ˆPthreadsï¼‰ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Linux&lt;/strong&gt;ï¼ˆé«˜åº¦å…¼å®¹ï¼‰ã€&lt;strong&gt;macOS&lt;/strong&gt;ï¼ˆå·²è®¤è¯ï¼‰ã€&lt;strong&gt;FreeBSD&lt;/strong&gt;ç­‰ç±»Unixç³»ç»Ÿï¼›Windowså¯é€šè¿‡WSLã€Cygwinç­‰å…¼å®¹å±‚æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-posix-çš„æ ¸å¿ƒç»„ä»¶"&gt;ğŸ”§ POSIX çš„æ ¸å¿ƒç»„ä»¶
&lt;/h3&gt;&lt;p&gt;POSIXæ ‡å‡†æ˜¯ä¸€ä¸ªåºå¤§çš„ä½“ç³»ï¼Œä¸»è¦è§„èŒƒäº†ä»¥ä¸‹å…³é”®é¢†åŸŸï¼Œè¿™äº›éƒ½æ˜¯ç¨‹åºå‘˜æ—¥å¸¸ä¼šæ¥è§¦åˆ°çš„æ¥å£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè°ƒç”¨ä¸Cè¯­è¨€API&lt;/strong&gt;ï¼šè¿™æ˜¯POSIXæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—ç”¨äºä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œç”¨äºæ–‡ä»¶æ“ä½œçš„ &lt;code&gt;open&lt;/code&gt;ã€&lt;code&gt;read&lt;/code&gt;ã€&lt;code&gt;write&lt;/code&gt;ï¼›ç”¨äºè¿›ç¨‹ç®¡ç†çš„ &lt;code&gt;fork&lt;/code&gt;ã€&lt;code&gt;exec&lt;/code&gt;ã€&lt;code&gt;wait&lt;/code&gt;ï¼›ç”¨äºç½‘ç»œé€šä¿¡çš„ &lt;code&gt;socket&lt;/code&gt;ã€&lt;code&gt;bind&lt;/code&gt;ã€&lt;code&gt;connect&lt;/code&gt;ï¼›ä»¥åŠç”¨äºå¤šçº¿ç¨‹ç¼–ç¨‹çš„Pthreadså‡½æ•°ï¼ˆå¦‚ &lt;code&gt;pthread_create&lt;/code&gt;ã€&lt;code&gt;pthread_mutex_lock&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shellä¸å‘½ä»¤è¡Œå·¥å…·&lt;/strong&gt;ï¼šPOSIXæ ‡å‡†åŒ–äº†Shellï¼ˆå‘½ä»¤è§£é‡Šå™¨ï¼‰çš„è¯­æ³•å’Œè¡Œä¸ºï¼Œä»¥åŠä¸€ç³»åˆ—å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚ &lt;code&gt;ls&lt;/code&gt;ã€&lt;code&gt;grep&lt;/code&gt;ã€&lt;code&gt;awk&lt;/code&gt;ã€&lt;code&gt;sed&lt;/code&gt;ï¼‰ã€‚è¿™ç¡®ä¿äº†åœ¨ä¸åŒç³»ç»Ÿä¸Šç¼–å†™çš„Shellè„šæœ¬èƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ç³»ç»Ÿè§„èŒƒ&lt;/strong&gt;ï¼šå¯¹ç›®å½•ç»“æ„ï¼ˆå¦‚ &lt;code&gt;/bin&lt;/code&gt;, &lt;code&gt;/etc&lt;/code&gt;, &lt;code&gt;/dev&lt;/code&gt;ç­‰ç›®å½•çš„ç”¨é€”ï¼‰ã€æ–‡ä»¶æƒé™æ¨¡å‹ï¼ˆå¦‚ &lt;code&gt;chmod&lt;/code&gt;çš„æƒé™è®¾ç½®ï¼‰å’Œæ“ä½œè¡Œä¸ºè¿›è¡Œäº†ç»Ÿä¸€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å†å²èƒŒæ™¯ä¸æ¼”è¿›"&gt;ğŸ“œ å†å²èƒŒæ™¯ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;POSIXçš„è¯ç”Ÿä¸Unixçš„å‘å±•å¯†ä¸å¯åˆ†ã€‚20ä¸–çºª80å¹´ä»£ï¼ŒUnixå‡ºç°äº†å¤šä¸ªå˜ä½“ï¼ˆå¦‚AT&amp;amp;Tçš„System Vå’Œä¼¯å…‹åˆ©çš„BSDï¼‰ï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨å·®å¼‚ï¼Œå¯¼è‡´ä¸ºä¸€ä¸ªç³»ç»Ÿç¼–å†™çš„ç¨‹åºéš¾ä»¥ç›´æ¥åœ¨å¦ä¸€ä¸ªç³»ç»Ÿä¸Šè¿è¡Œã€‚ä¸ºäº†ç»“æŸè¿™ç§ç¢ç‰‡åŒ–å±€é¢ï¼ŒIEEEåœ¨80å¹´ä»£ä¸­æœŸå¯åŠ¨äº†POSIXé¡¹ç›®ï¼Œé¦–ä¸ªæ ‡å‡†IEEE 1003.1-1988äº1988å¹´å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;å¤šå¹´æ¥ï¼ŒPOSIXæ ‡å‡†ä¸æ–­æ¼”è¿›ï¼Œå¸çº³äº†å®æ—¶æ‰©å±•ï¼ˆPOSIX.1bï¼‰ã€çº¿ç¨‹ï¼ˆPOSIX.1cï¼‰ç­‰æ–°ç‰¹æ€§ï¼Œå¹¶é€æ¸æ•´åˆä¸ºæ›´å…¨é¢çš„æ ‡å‡†é›†ï¼Œå¦‚POSIX.1-2001ã€POSIX.1-2008ä»¥åŠæœ€æ–°çš„POSIX.1-2017ã€‚&lt;/p&gt;
&lt;h3 id="-å®é™…åº”ç”¨åœºæ™¯"&gt;âš¡ï¸ å®é™…åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;ç†è§£POSIXçš„æœ€å¥½æ–¹å¼æ˜¯çœ‹å®ƒå¦‚ä½•åœ¨ç°ä»£è®¡ç®—ä¸­å‘æŒ¥ä½œç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹³å°å¼€å‘&lt;/strong&gt;ï¼šéµå¾ªPOSIXæ ‡å‡†ç¼–å†™çš„C/C++ç¨‹åºï¼Œåªéœ€åœ¨ç›®æ ‡ç³»ç»Ÿä¸Šé‡æ–°ç¼–è¯‘ï¼Œå°±èƒ½å¤Ÿåœ¨Linuxã€macOSã€FreeBSDç­‰å¤šç§ç³»ç»Ÿä¸Šè¿è¡Œï¼Œæå¤§é™ä½äº†ç§»æ¤æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è„šæœ¬çš„å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼šä½¿ç”¨POSIXæ ‡å‡†Shellè¯­æ³•ç¼–å†™çš„è„šæœ¬ï¼Œæ¯”ä¾èµ–ç‰¹å®šShellï¼ˆå¦‚Bashï¼‰æ‰©å±•çš„è„šæœ¬å…·æœ‰æ›´å¥½çš„å¯ç§»æ¤æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç°ä»£æŠ€æœ¯åŸºçŸ³&lt;/strong&gt;ï¼šè®¸å¤šé‡è¦æŠ€æœ¯å»ºç«‹åœ¨POSIXæä¾›çš„åŸºç¡€ä¹‹ä¸Šã€‚ä¾‹å¦‚ï¼Œå®¹å™¨æŠ€æœ¯ï¼ˆå¦‚Dockerï¼‰çš„è¿è¡Œæ—¶ï¼ˆå¦‚runcï¼‰ä¾èµ–POSIXçš„ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ &lt;code&gt;fork&lt;/code&gt;ã€&lt;code&gt;execve&lt;/code&gt;ï¼‰æ¥å®ç°è¿›ç¨‹éš”ç¦»å’Œç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-posix-çš„å±€é™æ€§ä¸æŒ‘æˆ˜"&gt;âš–ï¸ POSIX çš„å±€é™æ€§ä¸æŒ‘æˆ˜
&lt;/h3&gt;&lt;p&gt;å°½ç®¡POSIXéå¸¸é‡è¦ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éUnixç³»ç»Ÿçš„å…¼å®¹æ€§&lt;/strong&gt;ï¼šå¾®è½¯Windowsçš„åŸç”ŸAPIå¹¶ä¸ç¬¦åˆPOSIXæ ‡å‡†ã€‚è™½ç„¶å¯ä»¥é€šè¿‡WSLï¼ˆWindows Subsystem for Linuxï¼‰ã€Cygwinã€MinGWç­‰å…¼å®¹å±‚æ¥æ”¯æŒPOSIXç¨‹åºï¼Œä½†è¿™å¹¶éåŸç”Ÿæ”¯æŒï¼Œå¯èƒ½æœ‰æ•ˆèƒ½æˆ–åŠŸèƒ½ä¸Šçš„æŠ˜è¡·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éæ ‡å‡†æ‰©å±•çš„å­˜åœ¨&lt;/strong&gt;ï¼šä¸€äº›æ“ä½œç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯Linuxï¼Œæä¾›äº†å¤§é‡é«˜æ€§èƒ½ä½†éPOSIXæ ‡å‡†çš„ç‰¹æ€§ï¼ˆå¦‚ &lt;code&gt;epoll&lt;/code&gt;ã€&lt;code&gt;inotify&lt;/code&gt;ï¼‰ã€‚å¼€å‘è€…å¦‚æœä½¿ç”¨äº†è¿™äº›ç‰¹æ€§ï¼Œå°±ä¼šç‰ºç‰²ç¨‹åºçš„å¯ç§»æ¤æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‡å‡†çš„å¤æ‚æ€§&lt;/strong&gt;ï¼šPOSIXæœ¬èº«æ˜¯ä¸€ä¸ªåºå¤§çš„æ ‡å‡†æ—ï¼Œå®Œå…¨æŒæ¡æ‰€æœ‰ç»†èŠ‚å…·æœ‰ç›¸å½“é«˜çš„å­¦ä¹ æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒPOSIXé€šè¿‡å®šä¹‰ä¸€å¥—ç»Ÿä¸€çš„æ¥å£è§„èŒƒï¼ŒæˆåŠŸ&lt;strong&gt;å‡å°‘äº†æ“ä½œç³»ç»Ÿå·®å¼‚ç»™è½¯ä»¶å¼€å‘å¸¦æ¥çš„éšœç¢&lt;/strong&gt;ï¼Œæ˜¯å®ç°è½¯ä»¶å¯ç§»æ¤æ€§çš„åŸºçŸ³ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œç†è§£å’Œè¿ç”¨POSIXæ ‡å‡†ï¼Œæ„å‘³ç€èƒ½å†™å‡ºé€‚åº”æ€§æ›´å¼ºã€æ›´æ˜“äºç»´æŠ¤çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½ä»‹ç»èƒ½å¸®åŠ©ä½ å»ºç«‹èµ·å¯¹POSIXçš„æ¸…æ™°è®¤è¯†ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„POSIXæ¥å£ï¼ˆå¦‚çº¿ç¨‹æˆ–ä¿¡å·å¤„ç†ï¼‰æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="socket"&gt;Socket
&lt;/h2&gt;&lt;p&gt;Socketï¼ˆå¥—æ¥å­—ï¼‰æ˜¯ç½‘ç»œé€šä¿¡çš„åŸºçŸ³ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯&lt;strong&gt;åº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´çš„æ¥å£&lt;/strong&gt;ï¼Œæ˜¯ç½‘ç»œé€šä¿¡è¿‡ç¨‹ä¸­ç«¯ç‚¹çš„æŠ½è±¡è¡¨ç¤ºã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆç½‘ç»œä¸–ç•Œçš„â€œç”µè¯å¬ç­’â€ï¼šè¦æƒ³å’Œè¿œæ–¹çš„æœ‹å‹é€šè¯ï¼Œä½ éœ€è¦ä¸€éƒ¨ç”µè¯ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼Œè€ŒSocketå°±æ˜¯é‚£ä¸ªä½ æ‹¿åœ¨æ‰‹é‡Œã€è´Ÿè´£æ”¶å‘å£°éŸ³çš„å¬ç­’ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¯¹Socketé€šä¿¡çš„å…¨è²Œï¼Œç‰¹åˆ«æ˜¯æœ€å¸¸ç”¨çš„&lt;strong&gt;TCP Socket&lt;/strong&gt;æµç¨‹æœ‰ä¸ªç›´è§‚å°è±¡ï¼Œæˆ‘æ¢³ç†äº†å®ƒçš„å…¸å‹å·¥ä½œæ­¥éª¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æœåŠ¡å™¨ç«¯] --&amp;gt; B1[socket&amp;lt;br&amp;gt;åˆ›å»ºå¥—æ¥å­—]
B1 --&amp;gt; C1[bind&amp;lt;br&amp;gt;ç»‘å®šåœ°å€ç«¯å£]
C1 --&amp;gt; D1[listen&amp;lt;br&amp;gt;å¼€å¯ç›‘å¬]
D1 --&amp;gt; E1[accept&amp;lt;br&amp;gt;æ¥å—è¿æ¥&amp;lt;br&amp;gt;ï¼ˆé˜»å¡ç­‰å¾…ï¼‰]
F[å®¢æˆ·ç«¯] --&amp;gt; G1[socket&amp;lt;br&amp;gt;åˆ›å»ºå¥—æ¥å­—]
G1 --&amp;gt; H1[connect&amp;lt;br&amp;gt;å‘èµ·è¿æ¥&amp;lt;br&amp;gt;ï¼ˆè§¦å‘TCPä¸‰æ¬¡æ¡æ‰‹ï¼‰]
E1 -- è¿æ¥è¯·æ±‚åˆ°è¾¾ --&amp;gt; H1
H1 -- è¿æ¥ç¡®è®¤ --&amp;gt; E1
subgraph â€œæ•°æ®ä¼ è¾“ï¼ˆå¯å¤šæ¬¡å¾€è¿”ï¼‰â€
direction LR
E1 --&amp;gt; I1[send/recv&amp;lt;br&amp;gt;å‘é€/æ¥æ”¶æ•°æ®]
I1 --&amp;gt; J1[send/recv&amp;lt;br&amp;gt;å‘é€/æ¥æ”¶æ•°æ®]
end
I1 --&amp;gt; K1[close&amp;lt;br&amp;gt;å…³é—­è¿æ¥&amp;lt;br&amp;gt;ï¼ˆè§¦å‘TCPå››æ¬¡æŒ¥æ‰‹ï¼‰]
J1 --&amp;gt; K1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†TCP Socketé€šä¿¡çš„æ ¸å¿ƒæ­¥éª¤ã€‚å®é™…ä¸Šï¼Œæ ¹æ®ä½¿ç”¨çš„åè®®ä¸åŒï¼ŒSocketä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼Œå®ƒä»¬å„æœ‰é€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Socket ç±»å‹&lt;/th&gt;
&lt;th&gt;åº•å±‚åè®®&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æµå¼ Socket&lt;/strong&gt; (SOCK_STREAM)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;TCP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é¢å‘è¿æ¥&lt;/strong&gt;ã€&lt;strong&gt;å¯é ä¼ è¾“&lt;/strong&gt;ã€æ•°æ®æŒ‰&lt;strong&gt;é¡ºåºåˆ°è¾¾&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;Webæµè§ˆï¼ˆHTTP/HTTPSï¼‰ã€æ–‡ä»¶ä¼ è¾“ï¼ˆFTPï¼‰ã€é‚®ä»¶ï¼ˆSMTPï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æŠ¥ Socket&lt;/strong&gt; (SOCK_DGRAM)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;UDP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— è¿æ¥&lt;/strong&gt;ã€&lt;strong&gt;ä¸å¯é ä¼ è¾“&lt;/strong&gt;ï¼ˆå¯èƒ½ä¸¢å¤±æˆ–ä¹±åºï¼‰ã€&lt;strong&gt;å»¶è¿Ÿä½&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;è§†é¢‘ä¼šè®®ã€åœ¨çº¿æ¸¸æˆã€DNSæŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå§‹ Socket&lt;/strong&gt; (SOCK_RAW)&lt;/td&gt;
&lt;td&gt;åº•å±‚åè®®&lt;/td&gt;
&lt;td&gt;å¯ç›´æ¥æ“ä½œç½‘ç»œå±‚/æ•°æ®é“¾è·¯å±‚æ•°æ®åŒ…ï¼Œ&lt;strong&gt;åŠŸèƒ½å¼ºå¤§ä½†éœ€æƒé™&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç½‘ç»œæ¢æµ‹å·¥å…·ï¼ˆå¦‚pingï¼‰ã€è‡ªå®šä¹‰åè®®å¼€å‘&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®æœºåˆ¶ä¸æ¦‚å¿µ"&gt;ğŸ”§ å…³é”®æœºåˆ¶ä¸æ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;è¦æ·±å…¥ç†è§£Socketï¼Œè¿˜éœ€è¦æŒæ¡å‡ ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;TCPä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾è¡¨æ‰€ç¤ºï¼Œå®¢æˆ·ç«¯é€šè¿‡ &lt;code&gt;connect&lt;/code&gt;å‘èµ·è¿æ¥æ—¶ï¼Œä¼šè§¦å‘TCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¬¬ä¸€æ¬¡æ¡æ‰‹&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆåŒæ­¥åºåˆ—ç¼–å·ï¼‰åˆ°æœåŠ¡å™¨ï¼Œè¿›å…¥SYN_SENTçŠ¶æ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¬¬äºŒæ¬¡æ¡æ‰‹&lt;/strong&gt;ï¼šæœåŠ¡å™¨æ”¶åˆ°SYNåŒ…åï¼Œå‘é€ä¸€ä¸ªSYN-ACKåŒ…è¿›è¡Œç¡®è®¤ï¼Œè¿›å…¥SYN_RECVçŠ¶æ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¬¬ä¸‰æ¬¡æ¡æ‰‹&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯æ”¶åˆ°SYN-ACKåŒ…åï¼Œå‘é€ACKåŒ…ç¡®è®¤ï¼ŒåŒæ–¹è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œè¿æ¥å»ºç«‹æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹ç¡®ä¿äº†åŒæ–¹éƒ½çŸ¥é“é€šä¿¡çº¿è·¯æ˜¯ç•…é€šçš„ï¼Œä¸ºå¯é ä¼ è¾“æ‰“ä¸‹åŸºç¡€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;TCPå››æ¬¡æŒ¥æ‰‹é‡Šæ”¾è¿æ¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šä¿¡ç»“æŸæ—¶ï¼Œä»»æ„ä¸€æ–¹è°ƒç”¨ &lt;code&gt;close&lt;/code&gt;ä¼šè§¦å‘TCPçš„å››æ¬¡æŒ¥æ‰‹æ¥æ–­å¼€è¿æ¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸»åŠ¨å…³é—­æ–¹å‘é€FINåŒ…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¢«åŠ¨å…³é—­æ–¹å‘é€ACKåŒ…ç¡®è®¤ï¼Œå¹¶å¯èƒ½ç»§ç»­å‘é€æœªå®Œæˆçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¢«åŠ¨å…³é—­æ–¹æ•°æ®å‘é€å®Œæ¯•åï¼Œå‘é€è‡ªå·±çš„FINåŒ…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸»åŠ¨å…³é—­æ–¹å‘é€æœ€åçš„ACKåŒ…ç¡®è®¤ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´ç­‰å¾…åè¿æ¥å½»åº•å…³é—­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œæ¯ä¸ªæ–¹å‘å¿…é¡»å•ç‹¬å…³é—­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç«¯å£ï¼ˆPortï¼‰çš„ä½œç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç«¯å£æ˜¯&lt;strong&gt;åŒºåˆ†åŒä¸€ä¸»æœºä¸Šä¸åŒåº”ç”¨ç¨‹åºçš„æ ‡è¯†&lt;/strong&gt;ã€‚IPåœ°å€å¸®ä½ æ‰¾åˆ°æ­£ç¡®çš„å»ºç­‘ï¼ˆä¸»æœºï¼‰ï¼Œç«¯å£å·åˆ™å¸®ä½ æ‰¾åˆ°å»ºç­‘é‡Œæ­£ç¡®çš„æˆ¿é—´ï¼ˆå…·ä½“çš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘å¤„ç†æ¨¡å‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æœåŠ¡å™¨éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œç®€å•çš„å•çº¿ç¨‹é˜»å¡æ¨¡å¼å°±ä¸å¤Ÿäº†ã€‚å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šè¿›ç¨‹/å¤šçº¿ç¨‹æ¨¡å‹&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªæ–°è¿æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹æˆ–çº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;I/Oå¤šè·¯å¤ç”¨&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;select&lt;/code&gt;ã€&lt;code&gt;poll&lt;/code&gt;æˆ– &lt;code&gt;epoll&lt;/code&gt;ï¼ˆLinuxï¼‰ç­‰æŠ€æœ¯ï¼Œ&lt;strong&gt;å•ä¸ªçº¿ç¨‹å¯ä»¥ç›‘æ§å¤šä¸ªSocketçš„æè¿°ç¬¦&lt;/strong&gt;ï¼Œå½“æŸä¸ªSocketå°±ç»ªï¼ˆå¯è¯»/å¯å†™ï¼‰æ—¶å†è¿›è¡Œå¤„ç†ï¼Œèƒ½&lt;strong&gt;é«˜æ•ˆå¤„ç†é«˜å¹¶å‘è¿æ¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ä½¿ç”¨Socketç¼–ç¨‹æ—¶ï¼Œè¯·ç•™æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­—èŠ‚åºè½¬æ¢&lt;/strong&gt;ï¼šä¸åŒè®¡ç®—æœºä½“ç³»ç»“æ„å¯èƒ½ä½¿ç”¨ä¸åŒçš„å­—èŠ‚åºï¼ˆå¤§ç«¯/å°ç«¯ï¼‰ã€‚ç½‘ç»œæ ‡å‡†æ˜¯&lt;strong&gt;å¤§ç«¯å­—èŠ‚åº&lt;/strong&gt;ï¼Œå› æ­¤åœ¨å‘é€æ•°æ®å‰ï¼Œéœ€è¦ä½¿ç”¨ &lt;code&gt;htonl()&lt;/code&gt;, &lt;code&gt;htons()&lt;/code&gt;, &lt;code&gt;ntohl()&lt;/code&gt;, &lt;code&gt;ntohs()&lt;/code&gt;ç­‰å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯å¤„ç†ä¸èµ„æºé‡Šæ”¾&lt;/strong&gt;ï¼šæ¯ä¸ªSocket APIè°ƒç”¨åéƒ½åº”æ£€æŸ¥è¿”å›å€¼ï¼Œè¿›è¡Œé”™è¯¯å¤„ç†ã€‚é€šä¿¡ç»“æŸåï¼Œ&lt;strong&gt;åŠ¡å¿…å…³é—­Socket&lt;/strong&gt;ä»¥é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥ä¸å¼‚æ­¥æ¨¡å¼&lt;/strong&gt;ï¼šSocketé»˜è®¤æ˜¯&lt;strong&gt;é˜»å¡æ¨¡å¼&lt;/strong&gt;ï¼ˆè°ƒç”¨å‡½æ•°ä¼šä¸€ç›´ç­‰å¾…æ“ä½œå®Œæˆï¼‰ã€‚å¯ä»¥è®¾ç½®ä¸º&lt;strong&gt;éé˜»å¡æ¨¡å¼&lt;/strong&gt;ï¼Œæˆ–ä½¿ç”¨å¼‚æ­¥I/Oæ¨¡å‹ï¼Œæé«˜ç¨‹åºå“åº”æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸ä»·å€¼"&gt;ğŸ’ æ€»ç»“ä¸ä»·å€¼
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒSocketä½œä¸ºç½‘ç»œé€šä¿¡çš„æŠ½è±¡æ¥å£ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å°è£…å¤æ‚åè®®&lt;/strong&gt;ï¼šå°†åº•å±‚TCP/IPç­‰åè®®çš„å¤æ‚æ€§éšè—èµ·æ¥ï¼Œä¸ºåº”ç”¨å±‚æä¾›äº†ç®€å•æ˜“ç”¨çš„ç¼–ç¨‹æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°è¿›ç¨‹é—´é€šä¿¡&lt;/strong&gt;ï¼šä¸ä»…æ˜¯ç½‘ç»œé€šä¿¡ï¼ŒSocketä¹Ÿå¯ç”¨äº&lt;strong&gt;åŒä¸€å°ä¸»æœºä¸Šä¸åŒè¿›ç¨‹é—´çš„é€šä¿¡&lt;/strong&gt;ï¼ˆå¦‚Unix Domain Socketï¼‰ï¼Œæä¾›äº†ä¸€ç§é«˜æ•ˆçš„IPCæœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æ’‘ç°ä»£åº”ç”¨&lt;/strong&gt;ï¼šä»ç½‘é¡µæµè§ˆåˆ°å³æ—¶é€šè®¯ï¼Œä»äº‘è®¡ç®—åˆ°ç‰©è”ç½‘ï¼Œç»å¤§å¤šæ•°ç½‘ç»œåº”ç”¨éƒ½ç›´æ¥æˆ–é—´æ¥åœ°æ„å»ºåœ¨Socketä¹‹ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£Socketçš„åŸç†ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç±»å‹çš„Socketï¼ˆå¦‚UDPæˆ–åŸå§‹Socketï¼‰æˆ–è€…æ›´æ·±å…¥çš„ç¼–ç¨‹ç»†èŠ‚ï¼ˆå¦‚I/Oå¤šè·¯å¤ç”¨çš„å…·ä½“å®ç°ï¼‰æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¿¡å·é‡"&gt;ä¿¡å·é‡
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œä¿¡å·é‡çš„åº•å±‚æ“ä½œç¡®å®ä¸¥é‡ä¾èµ–&lt;strong&gt;äº’æ–¥æŒ‡ä»¤&lt;/strong&gt;ï¼ˆæˆ–æ›´å¹¿ä¹‰çš„&lt;strong&gt;åŸå­æŒ‡ä»¤&lt;/strong&gt;ï¼‰æ¥å®ç°å…¶æœ€å…³é”®çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ã€‚è¿™ç¡®ä¿äº†ä¿¡å·é‡çš„æ ¸å¿ƒæ“ä½œï¼ˆå¦‚ P/V æ“ä½œï¼Œå³ &lt;code&gt;wait&lt;/code&gt;å’Œ &lt;code&gt;signal&lt;/code&gt;ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«ä¸­æ–­ï¼Œä»è€Œåœ¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹ç¯å¢ƒä¸‹å®‰å…¨åœ°åŒæ­¥å¯¹å…±äº«èµ„æºçš„è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ï¼Œä¸‹è¡¨æ¦‚æ‹¬äº†ä¿¡å·é‡å®ç°ä¸­å‡ ä¸ªå…³é”®å±‚çº§çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å±‚çº§&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç»„ä»¶/æœºåˆ¶&lt;/th&gt;
&lt;th&gt;åœ¨ä¿¡å·é‡å®ç°ä¸­çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶å±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æŒ‡ä»¤&lt;/strong&gt;ï¼ˆå¦‚CAS, TASï¼‰&lt;/td&gt;
&lt;td&gt;æä¾›åŸºç¡€çš„ã€ä¸å¯ä¸­æ–­çš„è¯»-æ”¹-å†™æ“ä½œï¼Œæ˜¯ä¿è¯ä¿¡å·é‡è®¡æ•°å™¨æ“ä½œåŸå­æ€§çš„åŸºçŸ³ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿå†…æ ¸å±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…³ä¸­æ–­/è‡ªæ—‹é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å•æ ¸CPUæˆ–å†…æ ¸ä¸´ç•ŒåŒºä¸­ï¼Œä¿æŠ¤ä¿¡å·é‡å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆå¦‚ç­‰å¾…é˜Ÿåˆ—ï¼‰çš„å®Œæ•´æ€§ï¼Œé¿å…ç«æ€æ¡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ç»“æ„å±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç­‰å¾…é˜Ÿåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®¡ç†é‚£äº›å› æ— æ³•ç«‹å³è·å–ä¿¡å·é‡è€Œéœ€è¦é˜»å¡çš„çº¿ç¨‹/è¿›ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¥å£å±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;P/V æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä¾›ç»™åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ ‡å‡†ä¿¡å·é‡æ“ä½œæ¥å£ï¼Œå…¶å†…éƒ¨ç»¼åˆè¿ç”¨äº†ä¸Šè¿°æ‰€æœ‰æœºåˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åº•å±‚å®ç°æœºåˆ¶è¯¦è§£"&gt;ğŸ”§ åº•å±‚å®ç°æœºåˆ¶è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ä¿¡å·é‡çš„å®‰å…¨è¿ä½œï¼Œæ˜¯ç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿå†…æ ¸å’Œæ•°æ®ç»“æ„ååŒå·¥ä½œçš„ç»“æœã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡¬ä»¶åŸºçŸ³ï¼šåŸå­æŒ‡ä»¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€åº•å±‚çš„ä¿éšœã€‚åœ¨å¤šæ ¸å¤„ç†å™¨ç¯å¢ƒä¸‹ï¼Œä¸ºäº†ç¡®ä¿ä¸€ä¸ªæ ¸å¿ƒåœ¨æ‰§è¡Œâ€œè¯»å–-ä¿®æ”¹-å†™å›â€è¿™ä¸€åºåˆ—æŒ‡ä»¤æ—¶ï¼Œå…¶ä»–æ ¸å¿ƒä¸ä¼šåŒæ—¶ä¿®æ”¹åŒä¸€å†…å­˜åœ°å€ï¼ŒCPUæä¾›äº†ä¸“é—¨çš„&lt;strong&gt;åŸå­æŒ‡ä»¤&lt;/strong&gt;ï¼Œä¾‹å¦‚ &lt;strong&gt;CAS&lt;/strong&gt; å’Œ &lt;strong&gt;TAS&lt;/strong&gt;ã€‚è¿™äº›æŒ‡ä»¤åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šé”å®šå†…å­˜æ€»çº¿æˆ–ç¼“å­˜è¡Œï¼Œç¡®ä¿æ“ä½œçš„ç‹¬å æ€§å’ŒåŸå­æ€§ã€‚ä¿¡å·é‡å†…éƒ¨å¯¹è®¡æ•°å™¨ï¼ˆ&lt;code&gt;count&lt;/code&gt;ï¼‰çš„åŠ å‡æ“ä½œï¼Œå°±æ˜¯é€šè¿‡è¿™ç±»æŒ‡ä»¤å®Œæˆçš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…æ ¸ä¿éšœï¼šä¸­æ–­æ§åˆ¶ä¸è‡ªæ—‹é”&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å®ç°ä¿¡å·é‡çš„å®Œæ•´è¯­ä¹‰æ—¶ï¼Œä»…ä¿è¯è®¡æ•°å™¨æ“ä½œçš„åŸå­æ€§æ˜¯ä¸å¤Ÿçš„ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ P æ“ä½œå‘ç°èµ„æºä¸è¶³ï¼ˆè®¡æ•°å™¨ â‰¤ 0ï¼‰æ—¶ï¼Œéœ€è¦å°†è‡ªèº«åŠ å…¥ç­‰å¾…é˜Ÿåˆ—å¹¶ç¡çœ ã€‚è¿™ä¸ªâ€œæ£€æŸ¥è®¡æ•°å™¨ã€ä¿®æ”¹é˜Ÿåˆ—ã€ä¿®æ”¹çº¿ç¨‹çŠ¶æ€â€çš„è¿‡ç¨‹å¿…é¡»æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œå¦åˆ™ä¼šå¯¼è‡´çº¿ç¨‹ä¸¢å¤±å”¤é†’ä¿¡å·æˆ–é˜Ÿåˆ—çŠ¶æ€é”™ä¹±ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨&lt;strong&gt;å•æ ¸CPU&lt;/strong&gt;ä¸Šï¼Œå†…æ ¸é€šå¸¸é€šè¿‡&lt;strong&gt;ä¸´æ—¶å…³é—­ä¸­æ–­&lt;/strong&gt;æ¥å®ç°ä¸´ç•ŒåŒºçš„ä¿æŠ¤ï¼Œé˜²æ­¢åœ¨å…³é”®æ“ä½œè¿‡ç¨‹ä¸­è¢«ä¸­æ–­å¤„ç†ç¨‹åºæ‰“æ–­ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨&lt;strong&gt;å¤šæ ¸CPU&lt;/strong&gt;æˆ–æ›´å¤æ‚çš„åœºæ™¯ä¸‹ï¼Œå†…æ ¸ä¼šä½¿ç”¨&lt;strong&gt;è‡ªæ—‹é”&lt;/strong&gt;æ¥ä¿æŠ¤ä¿¡å·é‡çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆå¦‚ç­‰å¾…é˜Ÿåˆ—ï¼‰ã€‚è‡ªæ—‹é”æœ¬èº«ä¹Ÿæ˜¯åŸºäºåŸå­æŒ‡ä»¤å®ç°çš„ã€‚æ­£å¦‚Linuxå†…æ ¸ä¿¡å·é‡å®ç°ä¸­æ‰€è§ï¼Œå…¶ç»“æ„ä½“ &lt;code&gt;struct semaphore&lt;/code&gt;ä¸­å°±åŒ…å«ä¸€ä¸ª &lt;code&gt;lock&lt;/code&gt;è‡ªæ—‹é”ï¼Œä¸“é—¨ç”¨äºä¿æŠ¤è¯¥ä¿¡å·é‡çš„ &lt;code&gt;count&lt;/code&gt;å’Œ &lt;code&gt;wait_list&lt;/code&gt;ï¼ˆç­‰å¾…é˜Ÿåˆ—ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘ï¼šç­‰å¾…é˜Ÿåˆ—ä¸è°ƒåº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¿¡å·é‡åŒºåˆ«äºç®€å•åŸå­å˜é‡çš„å…³é”®åœ¨äºå®ƒå…·å¤‡è®©çº¿ç¨‹&lt;strong&gt;é˜»å¡ï¼ˆç¡çœ ï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;å”¤é†’&lt;/strong&gt;çš„èƒ½åŠ›ã€‚å½“çº¿ç¨‹æ‰§è¡Œ P æ“ä½œè€Œèµ„æºä¸å¯ç”¨æ—¶ï¼Œå†…æ ¸ä¼šå°†è¯¥çº¿ç¨‹çš„çŠ¶æ€è®¾ç½®ä¸ºç¡çœ ï¼ˆå¦‚ &lt;code&gt;TASK_UNINTERRUPTIBLE&lt;/code&gt;ï¼‰ï¼Œå¹¶å°†å…¶åŠ å…¥ä¿¡å·é‡çš„ç­‰å¾…é˜Ÿåˆ—ã€‚å½“å…¶ä»–çº¿ç¨‹æ‰§è¡Œ V æ“ä½œé‡Šæ”¾èµ„æºæ—¶ï¼Œä¼šæ£€æŸ¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶å”¤é†’å…¶ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªç­‰å¾…çº¿ç¨‹ã€‚è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—çš„ç®¡ç†ï¼Œæ­£æ˜¯åœ¨åŸå­æ“ä½œæˆ–è‡ªæ—‹é”çš„ä¿æŠ¤ä¸‹è¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¿¡å·é‡ä¸å…¶ä»–åŒæ­¥æœºåˆ¶"&gt;âš–ï¸ ä¿¡å·é‡ä¸å…¶ä»–åŒæ­¥æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;ç†è§£ä¿¡å·é‡å¦‚ä½•é€šè¿‡äº’æ–¥æŒ‡ä»¤å®ç°ï¼Œä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬å˜æ¸…å®ƒå’Œå…¶ä»–åŒæ­¥åŸè¯­ï¼ˆå¦‚äº’æ–¥é”ã€è‡ªæ—‹é”ï¼‰çš„å…³ç³»ä¸åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœºåˆ¶&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç›®çš„&lt;/th&gt;
&lt;th&gt;åº•å±‚ä¾èµ–&lt;/th&gt;
&lt;th&gt;å…³é”®è¡Œä¸ºå·®å¼‚&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡å·é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ§åˆ¶å¯¹&lt;strong&gt;ä¸€ç±»èµ„æº&lt;/strong&gt;çš„å¹¶å‘è®¿é—®æ•°é‡ï¼ˆå¯å¤§äº1ï¼‰&lt;/td&gt;
&lt;td&gt;åŸå­æŒ‡ä»¤ã€è‡ªæ—‹é”ï¼ˆä¿æŠ¤å†…éƒ¨ç»“æ„ï¼‰ã€ç­‰å¾…é˜Ÿåˆ—&lt;/td&gt;
&lt;td&gt;èµ„æºä¸å¯ç”¨æ—¶ï¼Œçº¿ç¨‹ä¼š&lt;strong&gt;ç¡çœ ç­‰å¾…&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº’æ–¥é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯å¯¹&lt;strong&gt;ä¸€ä¸ªä¸´ç•ŒåŒº&lt;/strong&gt;çš„&lt;strong&gt;ç‹¬å è®¿é—®&lt;/strong&gt;ï¼ˆå®è´¨æ˜¯è®¡æ•°å€¼ä¸º1çš„ä¿¡å·é‡ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸ä¿¡å·é‡ç±»ä¼¼ï¼ˆåŸå­æŒ‡ä»¤ã€è‡ªæ—‹é”ã€ç­‰å¾…é˜Ÿåˆ—ï¼‰&lt;/td&gt;
&lt;td&gt;èµ„æºä¸å¯ç”¨æ—¶ï¼Œçº¿ç¨‹åŒæ ·ä¼š&lt;strong&gt;ç¡çœ ç­‰å¾…&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªæ—‹é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯å¯¹&lt;strong&gt;ä¸€ä¸ªä¸´ç•ŒåŒº&lt;/strong&gt;çš„&lt;strong&gt;ç‹¬å è®¿é—®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»è¦ä¾èµ–&lt;strong&gt;åŸå­æŒ‡ä»¤&lt;/strong&gt;ï¼ˆå¦‚TASï¼‰&lt;/td&gt;
&lt;td&gt;èµ„æºä¸å¯ç”¨æ—¶ï¼Œçº¿ç¨‹ä¼šåœ¨ä¸€ä¸ªå¾ªç¯ä¸­&lt;strong&gt;å¿™ç­‰ï¼ˆè‡ªæ—‹ï¼‰&lt;/strong&gt;ï¼Œä¸ä¼šç¡çœ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯å¯¹&lt;strong&gt;ä¸€ä¸ªç®€å•å˜é‡&lt;/strong&gt;çš„&lt;strong&gt;å•ä¸€æ“ä½œ&lt;/strong&gt;ï¼ˆå¦‚åŠ å‡ï¼‰çš„åŸå­æ€§&lt;/td&gt;
&lt;td&gt;çº¯ç²¹ä¾èµ–ç¡¬ä»¶æä¾›çš„&lt;strong&gt;åŸå­æŒ‡ä»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…æä¾›æœ€åŸºç¡€çš„åŸå­æ“ä½œï¼Œä¸å…·å¤‡è®©çº¿ç¨‹é˜»å¡/å”¤é†’çš„é«˜çº§åŒæ­¥åŠŸèƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº’æ–¥é”å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¿¡å·é‡ï¼ˆäºŒå€¼ä¿¡å·é‡ï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡å·é‡å’Œäº’æ–¥é”åœ¨èµ„æºä¸å¯ç”¨æ—¶ï¼Œä¼šé€‰æ‹©è®©çº¿ç¨‹ç¡çœ ä»¥èŠ‚çœCPUèµ„æº&lt;/strong&gt;ï¼Œè¿™é€‚åˆå¯èƒ½ç­‰å¾…æ—¶é—´è¾ƒé•¿çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªæ—‹é”åœ¨èµ„æºä¸å¯ç”¨æ—¶ï¼Œä¼šè®©çº¿ç¨‹å¿™ç­‰&lt;/strong&gt;ï¼Œè¿™é¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œä½†ä¼šæŒç»­å ç”¨CPUï¼Œä»…é€‚ç”¨äºç­‰å¾…æ—¶é—´æçŸ­çš„ä¸´ç•ŒåŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œä¿¡å·é‡çš„åº•å±‚å®ç°æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡ååŒå·¥ä½œçš„ç³»ç»Ÿï¼š&lt;strong&gt;ç¡¬ä»¶æä¾›çš„åŸå­æŒ‡ä»¤&lt;/strong&gt;ç¡®ä¿äº†è®¡æ•°å™¨ä¿®æ”¹çš„åŸå­æ€§ï¼›&lt;strong&gt;æ“ä½œç³»ç»Ÿå†…æ ¸åˆ©ç”¨è‡ªæ—‹é”æˆ–å…³ä¸­æ–­ç­‰æ‰‹æ®µ&lt;/strong&gt;ä¿æŠ¤äº†ä¿¡å·é‡å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆå¦‚ç­‰å¾…é˜Ÿåˆ—ï¼‰æ“ä½œçš„å®Œæ•´æ€§ï¼›è€Œ&lt;strong&gt;ç­‰å¾…é˜Ÿåˆ—æœºåˆ¶&lt;/strong&gt;åˆ™èµ‹äºˆäº†ä¿¡å·é‡è®©çº¿ç¨‹é˜»å¡å’Œå”¤é†’çš„èƒ½åŠ›ï¼Œä»è€Œå®ç°äº†é«˜æ•ˆçš„åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ä¿¡å·é‡çš„åº•å±‚åŸç†ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šçš„åŒæ­¥æœºåˆ¶æˆ–è€…æ›´åº•å±‚çš„ç¡¬ä»¶ç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ®µé¡µå¼"&gt;æ®µé¡µå¼
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;é—®é¢˜&lt;/th&gt;
&lt;th style="text-align: left"&gt;åˆ†æ®µèƒ½è§£&lt;/th&gt;
&lt;th style="text-align: left"&gt;åˆ†é¡µèƒ½è§£&lt;/th&gt;
&lt;th style="text-align: left"&gt;æ®µé¡µæ··åˆæ•ˆæœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ¨¡å—åŒ–/é€»è¾‘éš”ç¦»&lt;/td&gt;
&lt;td style="text-align: left"&gt;âœ…&lt;/td&gt;
&lt;td style="text-align: left"&gt;âŒ&lt;/td&gt;
&lt;td style="text-align: left"&gt;âœ…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;é¿å…å¤–éƒ¨ç¢ç‰‡&lt;/td&gt;
&lt;td style="text-align: left"&gt;âŒ&lt;/td&gt;
&lt;td style="text-align: left"&gt;âœ…&lt;/td&gt;
&lt;td style="text-align: left"&gt;âœ…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç²’åº¦ä¿æŠ¤ï¼ˆæ®µç•Œé™ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;âœ…&lt;/td&gt;
&lt;td style="text-align: left"&gt;âš ï¸(é¡µçº§)&lt;/td&gt;
&lt;td style="text-align: left"&gt;âœ…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å¤§åœ°å€ç©ºé—´é¡µè¡¨å ç”¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;âŒ&lt;/td&gt;
&lt;td style="text-align: left"&gt;âš ï¸(éœ€å¤šçº§)&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ®µå…ˆç²—åˆ†ï¼ŒèŠ‚çœé¡µè¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="slab"&gt;SLAB
&lt;/h2&gt;&lt;p&gt;Linuxå†…æ ¸çš„Slabåˆ†é…å™¨æ˜¯ä¸€ç§é«˜æ•ˆç®¡ç†å°å—å†…å­˜çš„æœºåˆ¶ï¼Œå®ƒå¾ˆå¥½åœ°è§£å†³äº†å†…æ ¸ä¸­é¢‘ç¹åˆ†é…å’Œé‡Šæ”¾å°å¯¹è±¡æ—¶çš„æ€§èƒ½ä¸ç¢ç‰‡é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id="-slabåˆ†é…å™¨è§£å†³çš„æ ¸å¿ƒé—®é¢˜"&gt;ğŸ” Slabåˆ†é…å™¨è§£å†³çš„æ ¸å¿ƒé—®é¢˜
&lt;/h3&gt;&lt;p&gt;åœ¨å†…æ ¸è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåƒè¿›ç¨‹æè¿°ç¬¦ï¼ˆ&lt;code&gt;task_struct&lt;/code&gt;ï¼‰ã€æ–‡ä»¶å¯¹è±¡ï¼ˆ&lt;code&gt;struct file&lt;/code&gt;ï¼‰è¿™æ ·çš„æ•°æ®ç»“æ„ä¼šä¸æ–­åœ°è¢«åˆ›å»ºå’Œé”€æ¯ã€‚å¦‚æœæ¯æ¬¡éƒ½ç›´æ¥å‘&lt;strong&gt;ä¼™ä¼´ç³»ç»Ÿ&lt;/strong&gt;ï¼ˆä»¥é¡µä¸ºå•ä½åˆ†é…ç‰©ç†å†…å­˜ï¼‰ç”³è¯·ï¼Œä¼šäº§ç”Ÿä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨ç¢ç‰‡&lt;/strong&gt;ï¼šå³ä½¿åªéœ€è¦å‡ åå­—èŠ‚ï¼Œä¹Ÿè¦åˆ†é…ä¸€æ•´é¡µï¼ˆå¦‚4KBï¼‰ï¼Œé€ æˆä¸¥é‡æµªè´¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šé¢‘ç¹åœ°ä¸ä¼™ä¼´ç³»ç»Ÿäº¤äº’ï¼Œåˆå§‹åŒ–/æ¸…ç†å¯¹è±¡çš„æˆæœ¬å¾ˆé«˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Slabåˆ†é…å™¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯&lt;strong&gt;å¯¹è±¡å¤ç”¨&lt;/strong&gt;å’Œ&lt;strong&gt;ç¼“å­˜&lt;/strong&gt;ã€‚å®ƒé¢„å…ˆä»ä¼™ä¼´ç³»ç»Ÿç”³è¯·ä¸€æ‰¹è¿ç»­çš„ç‰©ç†é¡µï¼ˆç§°ä¸ºä¸€ä¸ª&lt;code&gt;slab&lt;/code&gt;ï¼‰ï¼Œå¹¶å°†å…¶åˆ†å‰²æˆå¤šä¸ªå¤§å°å›ºå®šçš„&lt;strong&gt;å¯¹è±¡&lt;/strong&gt;ã€‚å½“å†…æ ¸éœ€è¦æŸä¸ªå¯¹è±¡æ—¶ï¼ŒSlabåˆ†é…å™¨ä¼šä»å¯¹åº”çš„ç¼“å­˜ä¸­å¿«é€Ÿåˆ†é…ä¸€ä¸ªå·²ç»åˆå§‹åŒ–è¿‡çš„å¯¹è±¡ï¼›é‡Šæ”¾æ—¶ï¼Œå¹¶ä¸ç«‹å³å°†å†…å­˜å½’è¿˜ç»™ä¼™ä¼´ç³»ç»Ÿï¼Œè€Œæ˜¯æ ‡è®°ä¸ºç©ºé—²ï¼Œç•™åœ¨ç¼“å­˜ä¸­ä»¥å¤‡ä¸‹æ¬¡ä½¿ç”¨ã€‚è¿™æå¤§åœ°å‡å°‘äº†å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„å¼€é”€ã€‚&lt;/p&gt;
&lt;h3 id="-slabåˆ†é…å™¨çš„ä¸‰å±‚ç»“æ„"&gt;ğŸ—ï¸ Slabåˆ†é…å™¨çš„ä¸‰å±‚ç»“æ„
&lt;/h3&gt;&lt;p&gt;Slabåˆ†é…å™¨çš„ç®¡ç†ç»“æ„å¯ä»¥ç†è§£ä¸ºä¸‰ä¸ªå±‚çº§ï¼Œå®ƒä»¬ååŒå·¥ä½œä»¥å®ç°é«˜æ•ˆçš„å†…å­˜ç®¡ç†ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»“æ„å±‚çº§&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ•°æ®ç»“æ„&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜å±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;kmem_cache&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¯ç§å¯¹è±¡ç±»å‹ï¼ˆå¦‚&lt;code&gt;task_struct&lt;/code&gt;ï¼‰å¯¹åº”ä¸€ä¸ªç¼“å­˜ã€‚å®ƒæ˜¯ç®¡ç†çš„é¡¶å±‚ç»“æ„ï¼Œå®šä¹‰äº†å¯¹è±¡å¤§å°ã€å¯¹é½æ–¹å¼ç­‰è§„åˆ™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Slabå±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;slab&lt;/code&gt;(ç”±&lt;code&gt;struct page&lt;/code&gt;ä»£è¡¨)&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªSlabæ˜¯ä»ä¼™ä¼´ç³»ç»Ÿç”³è¯·å¾—æ¥çš„ä¸€å—&lt;strong&gt;è¿ç»­ç‰©ç†é¡µ&lt;/strong&gt;ï¼Œè¢«åˆ’åˆ†æˆå¤šä¸ªåŒç­‰å¤§å°çš„å¯¹è±¡ã€‚ä¸€ä¸ªç¼“å­˜ç”±å¤šä¸ªSlabç»„æˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹è±¡å±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;Slabä¸­çš„æ¯ä¸ªæœ€å°å†…å­˜å•å…ƒå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯å®é™…åˆ†é…å’Œå›æ”¶çš„åŸºæœ¬å•ä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸ºäº†æå‡å¤šæ ¸ç¯å¢ƒä¸‹çš„æ€§èƒ½ï¼ŒSlabåˆ†é…å™¨è¿˜å¼•å…¥äº†&lt;strong&gt;æ¯CPUç¼“å­˜&lt;/strong&gt;ã€‚æ¯ä¸ªCPUéƒ½æœ‰ä¸€ä¸ªæœ¬åœ°çš„å¯¹è±¡æ•°ç»„ã€‚åˆ†é…å†…å­˜æ—¶ï¼Œä¼˜å…ˆä»å½“å‰CPUçš„æœ¬åœ°ç¼“å­˜ä¸­è·å–ï¼Œé¿å…äº†é”ç«äº‰ï¼›é‡Šæ”¾æ—¶ä¹Ÿæ˜¯å…ˆæ”¾å›æœ¬åœ°ç¼“å­˜ã€‚è¿™å¤§å¤§å‡å°‘äº†è®¿é—®å…¨å±€Slabé“¾è¡¨çš„æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;h3 id="-slabçš„çŠ¶æ€ä¸åˆ†é…æµç¨‹"&gt;ğŸ”„ Slabçš„çŠ¶æ€ä¸åˆ†é…æµç¨‹
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ªSlabåœ¨ç¼“å­˜ä¸­æ ¹æ®å…¶å¯¹è±¡çš„å ç”¨æƒ…å†µï¼Œå¤„äºä»¥ä¸‹ä¸‰ç§çŠ¶æ€é“¾è¡¨ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;full&lt;/code&gt;ï¼ˆæ»¡ï¼‰&lt;/strong&gt;ï¼šæ‰€æœ‰å¯¹è±¡éƒ½å·²è¢«åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;partial&lt;/code&gt;ï¼ˆéƒ¨åˆ†æ»¡ï¼‰&lt;/strong&gt;ï¼šéƒ¨åˆ†å¯¹è±¡å·²åˆ†é…ï¼Œéƒ¨åˆ†ç©ºé—²ã€‚&lt;strong&gt;åˆ†é…å™¨ä¼šä¼˜å…ˆä»è¯¥é“¾è¡¨åˆ†é…å¯¹è±¡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;free&lt;/code&gt;ï¼ˆç©ºï¼‰&lt;/strong&gt;ï¼šæ‰€æœ‰å¯¹è±¡éƒ½ç©ºé—²ã€‚å½“å†…å­˜ç´§å¼ æ—¶ï¼Œè¿™äº›Slabå¯èƒ½è¢«å›æ”¶ï¼Œå†…å­˜å½’è¿˜ç»™ä¼™ä¼´ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„å†…å­˜åˆ†é…è¯·æ±‚ï¼ˆå¦‚è°ƒç”¨ &lt;code&gt;kmem_cache_alloc()&lt;/code&gt;ï¼‰éµå¾ªä»¥ä¸‹ä¼˜å…ˆçº§è·¯å¾„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¯CPUç¼“å­˜&lt;/strong&gt;ï¼šé¦–å…ˆæ£€æŸ¥å½“å‰CPUçš„æœ¬åœ°ç¼“å­˜ï¼Œè¿™æ˜¯æœ€å¿«çš„è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Partial Slabé“¾è¡¨&lt;/strong&gt;ï¼šå¦‚æœæœ¬åœ°ç¼“å­˜ä¸ºç©ºï¼Œåˆ™åˆ°å…¨å±€çš„&lt;code&gt;partial&lt;/code&gt;é“¾è¡¨ä¸­å¯»æ‰¾ä¸€ä¸ªæœ‰ç©ºé—²å¯¹è±¡çš„Slabã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Free Slabé“¾è¡¨&lt;/strong&gt;ï¼šå¦‚æœ&lt;code&gt;partial&lt;/code&gt;é“¾è¡¨ä¹Ÿä¸ºç©ºï¼Œåˆ™ä»&lt;code&gt;free&lt;/code&gt;é“¾è¡¨åˆ†é…ä¸€ä¸ªå…¨æ–°çš„Slabã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼™ä¼´ç³»ç»Ÿ&lt;/strong&gt;ï¼šå¦‚æœè¿ç©ºçš„Slabéƒ½æ²¡æœ‰ï¼Œåˆ™å‘ä¼™ä¼´ç³»ç»Ÿç”³è¯·æ–°çš„ç‰©ç†é¡µæ¥åˆ›å»ºæ–°çš„Slabã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³é”®ç‰¹æ€§ç¼“å­˜ç€è‰²"&gt;âš™ï¸ å…³é”®ç‰¹æ€§ï¼šç¼“å­˜ç€è‰²
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç”¨äºæå‡CPUç¼“å­˜å‘½ä¸­ç‡çš„ä¼˜åŒ–æŠ€æœ¯ã€‚ç”±äºCPUç¼“å­˜å®¹é‡æœ‰é™ï¼Œå¦‚æœä¸åŒSlabä¸­ç›¸åŒåç§»é‡çš„å¯¹è±¡æ€»æ˜¯æ˜ å°„åˆ°ç¼“å­˜ä¸­çš„åŒä¸€è¡Œï¼Œå°±ä¼šå¯¼è‡´ç¼“å­˜è¡Œé¢‘ç¹å¤±æ•ˆï¼ˆå³&lt;strong&gt;ç¼“å­˜å†²çª&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Slabç€è‰²é€šè¿‡åœ¨æ¯ä¸ªSlabçš„èµ·å§‹ä½ç½®å¢åŠ ä¸€ä¸ªéšæœºçš„&lt;strong&gt;é¢œè‰²åç§»&lt;/strong&gt;ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç¼“å­˜è¡Œçš„å¤§å°ï¼‰ï¼Œä½¿å¾—åŒä¸€ä¸ªç¼“å­˜ä¸­ä¸åŒSlabå†…çš„å¯¹è±¡åœ¨CPUç¼“å­˜ä¸­çš„èµ·å§‹ä½ç½®é”™å¼€ï¼Œä»è€Œå‡å°‘å†²çªï¼Œæé«˜ç¼“å­˜åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;h3 id="-ç¼–ç¨‹æ¥å£ä¸ç›‘æ§"&gt;ğŸ› ï¸ ç¼–ç¨‹æ¥å£ä¸ç›‘æ§
&lt;/h3&gt;&lt;p&gt;Slabåˆ†é…å™¨æä¾›äº†ä¸¤å¥—ä¸»è¦APIï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;APIç±»å‹&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨å‡½æ•°&lt;/th&gt;
&lt;th&gt;ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸“ç”¨ç¼“å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;kmem_cache_create()&lt;/code&gt;, &lt;code&gt;kmem_cache_alloc()&lt;/code&gt;, &lt;code&gt;kmem_cache_free()&lt;/code&gt;, &lt;code&gt;kmem_cache_destroy()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºç‰¹å®šå¯¹è±¡ï¼ˆå¦‚æŸä¸ªç»“æ„ä½“ï¼‰åˆ›å»ºä¸“ç”¨çš„ç¼“å­˜ï¼Œå¯¹è±¡å¤§å°å›ºå®šï¼Œç®¡ç†æœ€ç²¾ç»†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šç”¨ç¼“å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;kmalloc()&lt;/code&gt;, &lt;code&gt;kfree()&lt;/code&gt;, &lt;code&gt;krealloc()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºä¸çŸ¥é“å…·ä½“ç±»å‹æˆ–å¤§å°ä¸å›ºå®šçš„é€šç”¨å†…å­˜åˆ†é…ã€‚å†…æ ¸é¢„å…ˆåˆ›å»ºäº†ä¸€ç³»åˆ—ä¸åŒå¤§å°ï¼ˆå¦‚64B, 128B&amp;hellip;ï¼‰çš„é€šç”¨ç¼“å­˜ï¼Œ&lt;code&gt;kmalloc&lt;/code&gt;ä¼šæ ¹æ®è¯·æ±‚çš„å¤§å°é€‰æ‹©æœ€åˆé€‚çš„ç¼“å­˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;/proc/slabinfo&lt;/code&gt;æ–‡ä»¶æˆ–ä½¿ç”¨ &lt;code&gt;slabtop&lt;/code&gt;å‘½ä»¤æ¥å®æ—¶æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰Slabç¼“å­˜çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯¹è±¡æ•°é‡ã€ä½¿ç”¨æƒ…å†µã€å†…å­˜å ç”¨ç­‰ï¼Œè¿™å¯¹äºæ€§èƒ½åˆ†æå’Œè°ƒä¼˜éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="-æ¼”å˜ä¸æ€»ç»“"&gt;âš–ï¸ æ¼”å˜ä¸æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æœ€åˆçš„Slabåˆ†é…å™¨åŠŸèƒ½å¼ºå¤§ä½†è®¾è®¡å¤æ‚ã€‚åæ¥ï¼ŒLinuxå†…æ ¸æ¨å‡ºäº†ä¸¤ç§ä¼˜åŒ–çš„æ›¿ä»£å“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SLUB&lt;/strong&gt;ï¼šç®€åŒ–äº†è®¾è®¡ï¼Œå‡å°‘äº†å…ƒæ•°æ®å¼€é”€ï¼Œæ˜¯&lt;strong&gt;å½“å‰å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆçš„é»˜è®¤åˆ†é…å™¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SLOB&lt;/strong&gt;ï¼šè®¾è®¡æå…¶ç®€å•ï¼Œé€‚ç”¨äºå†…å­˜èµ„æºæåº¦ç´§å¼ çš„åµŒå…¥å¼ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒSlabåˆ†é…å™¨é€šè¿‡&lt;strong&gt;å¯¹è±¡ç¼“å­˜ã€é¢„åˆ†é…ã€æ¯CPUç¼“å­˜å’Œç¼“å­˜ç€è‰²&lt;/strong&gt;ç­‰æœºåˆ¶ï¼Œå·§å¦™åœ°åœ¨å°å†…å­˜åˆ†é…é—®é¢˜ä¸Šå®ç°äº†&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;å’Œ&lt;strong&gt;ç¢ç‰‡å‡å°‘&lt;/strong&gt;çš„å¹³è¡¡ï¼Œæ˜¯Linuxå†…æ ¸å†…å­˜ç®¡ç†ä¸­è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£Linux Slabåˆ†é…å™¨ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ–¹é¢ï¼Œæ¯”å¦‚SLUBä¸Slabçš„è¯¦ç»†åŒºåˆ«ï¼Œæˆ–è€…æ›´æ·±å…¥çš„å®ç°ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¿¡å·æœºåˆ¶--äº‹ä»¶æœºåˆ¶"&gt;ä¿¡å·æœºåˆ¶ &amp;amp; äº‹ä»¶æœºåˆ¶
&lt;/h2&gt;&lt;p&gt;ä¿¡å·æœºåˆ¶å’Œäº‹ä»¶æœºåˆ¶æ˜¯è½¯ä»¶è®¾è®¡ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„ä¸¤ç§é‡è¦æ¨¡å¼ï¼Œå®ƒä»¬åœ¨å·¥ä½œå±‚çº§ã€è§¦å‘æ–¹å¼å’Œåº”ç”¨åœºæ™¯ä¸Šæœ‰ç€æœ¬è´¨çš„ä¸åŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¿¡å·æœºåˆ¶ (Signals)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;äº‹ä»¶æœºåˆ¶ (Events)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨ä¸å±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¿›ç¨‹çº§çš„å¼‚æ­¥ä¸­æ–­é€šçŸ¥&lt;/strong&gt;ï¼Œæ˜¯æ“ä½œç³»ç»Ÿåº•å±‚æœºåˆ¶ï¼Œç±»ä¼¼äºâ€œè½¯ä¸­æ–­â€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨å±‚çš„çŠ¶æ€å˜æ›´æ¶ˆæ¯&lt;/strong&gt;ï¼Œé€šå¸¸æ˜¯ç¼–ç¨‹æ¡†æ¶æˆ–è¯­è¨€æä¾›çš„é«˜çº§æŠ½è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°è¿›ç¨‹æ§åˆ¶ã€å¼‚å¸¸å¤„ç†å’Œç®€å•çš„è¿›ç¨‹é—´é€šä¿¡(IPC)ï¼Œå¼ºè°ƒå³æ—¶å“åº”&lt;/td&gt;
&lt;td&gt;å®ç°å¯¹è±¡æˆ–æ¨¡å—é—´çš„æ¾è€¦åˆé€šä¿¡ï¼Œæ”¯æ’‘äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œå¼ºè°ƒå¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§è§¦å‘æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…æ ¸ï¼ˆå¦‚éæ³•å†…å­˜è®¿é—®ï¼‰ã€ç¡¬ä»¶ï¼ˆå¦‚Ctrl+Cï¼‰ã€å…¶ä»–è¿›ç¨‹ï¼ˆé€šè¿‡killï¼‰&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·äº¤äº’ï¼ˆå¦‚ç‚¹å‡»é¼ æ ‡ï¼‰ã€ç³»ç»ŸçŠ¶æ€å˜åŒ–ï¼ˆå¦‚å®šæ—¶å™¨åˆ°æœŸï¼‰ã€å…¶ä»–å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼‚æ­¥å¤„ç†&lt;/strong&gt;ã€‚ä¿¡å·å¤„ç†å‡½æ•°åœ¨ä¿¡å·åˆ°è¾¾æ—¶è¢«å†…æ ¸ç›´æ¥è°ƒç”¨ï¼Œä¸­æ–­è¿›ç¨‹çš„å½“å‰æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŒæ­¥é˜Ÿåˆ—å¤„ç†&lt;/strong&gt;ã€‚äº‹ä»¶è¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ï¼Œç”±äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æŒ‰é¡ºåºåˆ†å‘å’Œå¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡æ¯ä¼ é€’&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸åªæºå¸¦ä¿¡å·ç¼–å·ï¼ˆå¦‚SIGINTï¼‰ï¼Œä¿¡æ¯é‡å°‘&lt;/td&gt;
&lt;td&gt;å¯æºå¸¦ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚é¼ æ ‡ç‚¹å‡»åæ ‡ã€æŒ‰é”®å€¼ï¼‰ï¼Œå°è£…åœ¨äº‹ä»¶å¯¹è±¡ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹ç»ˆæ­¢ã€å¤„ç†ç¨‹åºå¼‚å¸¸ã€å­è¿›ç¨‹çŠ¶æ€åŒæ­¥ï¼ˆSIGCHLDï¼‰&lt;/td&gt;
&lt;td&gt;å›¾å½¢ç”¨æˆ·ç•Œé¢(GUI)ç¼–ç¨‹ã€ç½‘ç»œæœåŠ¡å™¨ï¼ˆå¦‚é«˜å¹¶å‘è¿æ¥ç®¡ç†ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šä¿¡æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ˜¯&lt;strong&gt;ä¸€å¯¹ä¸€&lt;/strong&gt;æˆ–&lt;strong&gt;ä¸€å¯¹å¤š&lt;/strong&gt;çš„ç®€å•é€šçŸ¥ï¼Œç¼ºä¹å¤æ‚çš„äº¤äº’æ¨¡å¼&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ˜¯&lt;strong&gt;å‘å¸ƒ-è®¢é˜…æ¨¡å‹&lt;/strong&gt;(Pub-Sub)ï¼Œæ”¯æŒå¤šå¯¹å¤šçš„å¤æ‚é€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®å·®å¼‚è¯¦è§£"&gt;ğŸ” å…³é”®å·®å¼‚è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è®©ä½ æ›´æ·±å…¥åœ°ç†è§£ï¼Œä¸‹é¢å†è¡¥å……å‡ ç‚¹è¡¨æ ¼ä¹‹å¤–çš„ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶æƒä¸å“åº”æ—¶æœº&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¸å¿ƒçš„ä½“éªŒå·®å¼‚ã€‚ä¿¡å·æœºåˆ¶æ˜¯&lt;strong&gt;å¼ºå å¼&lt;/strong&gt;çš„ã€‚å½“ä¿¡å·åˆ°è¾¾æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸­æ–­è¿›ç¨‹çš„å½“å‰å·¥ä½œæµï¼Œç«‹å³è·³è½¬åˆ°ä¿¡å·å¤„ç†å‡½æ•°ã€‚è¿™ä¿è¯äº†å…³é”®äº‹ä»¶ï¼ˆå¦‚ç¨‹åºå´©æºƒï¼‰èƒ½è¢«åŠæ—¶å“åº”ï¼Œä½†æ‰“ä¹±äº†ç¨‹åºçš„æ­£å¸¸é€»è¾‘ã€‚äº‹ä»¶æœºåˆ¶æ˜¯&lt;strong&gt;åä½œå¼&lt;/strong&gt;çš„ã€‚äº‹ä»¶è¢«æäº¤åˆ°é˜Ÿåˆ—åï¼Œç¨‹åºä¼šåœ¨äº‹ä»¶å¾ªç¯çš„ä¸‹ä¸€è½®æˆ–æŸä¸ªåˆé€‚çš„æ—¶é—´ç‚¹å¤„ç†å®ƒï¼Œä¸ä¼šä¸­æ–­å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¿è¯äº†ç¨‹åºæµçš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡æ¯é‡ä¸çµæ´»æ€§&lt;/strong&gt;ï¼šä¿¡å·ä¼ é€’çš„ä¿¡æ¯éå¸¸æœ‰é™ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªç¼–å·ã€‚äº‹ä»¶åˆ™çµæ´»å¾—å¤šï¼Œå¯ä»¥æºå¸¦ä»»æ„å¤šçš„è‡ªå®šä¹‰æ•°æ®ï¼ˆé€šè¿‡äº‹ä»¶å¯¹è±¡ï¼‰ï¼Œè¿™ä½¿å¾—äº‹ä»¶å¤„ç†å‡½æ•°èƒ½å¤ŸåŸºäºæ›´å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯åšå‡ºå†³ç­–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯å¤„ç†ä¸å¯é æ€§&lt;/strong&gt;ï¼šåœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­ï¼Œèƒ½å¤Ÿå®‰å…¨è°ƒç”¨çš„ç³»ç»Ÿå‡½æ•°éå¸¸æœ‰é™ï¼ˆå³æ‰€è°“çš„â€œå¼‚æ­¥ä¿¡å·å®‰å…¨â€å‡½æ•°ï¼‰ï¼Œä¸å½“æ“ä½œå®¹æ˜“å¯¼è‡´ç¨‹åºæ­»é”æˆ–å´©æºƒã€‚äº‹ä»¶å¤„ç†å‡½æ•°åˆ™è¿è¡Œåœ¨æ­£å¸¸çš„ç¨‹åºä¸Šä¸‹æ–‡ä¸­ï¼Œå‡ ä¹æ²¡æœ‰æ­¤ç±»é™åˆ¶ï¼Œç¼–ç¨‹æ¨¡å‹æ›´ç®€å•ã€å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©-1"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;äº†è§£å®ƒä»¬çš„åŒºåˆ«åï¼Œå¦‚ä½•åœ¨å®è·µä¸­åšå‡ºé€‰æ‹©å°±æ˜¾å¾—æ¸…æ™°äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹©ä¿¡å·æœºåˆ¶ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ éœ€è¦å¤„ç†æ“ä½œç³»ç»Ÿåº•å±‚çš„&lt;strong&gt;å¼‚å¸¸æˆ–ä¸­æ–­&lt;/strong&gt;ï¼ˆå¦‚æ®µé”™è¯¯SIGSEGVã€å®šæ—¶å™¨SIGALRMï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦è¿›è¡Œ&lt;strong&gt;è¿›ç¨‹ç®¡ç†&lt;/strong&gt;ï¼ˆå¦‚ç»ˆæ­¢å­è¿›ç¨‹SIGKILLã€é€šçŸ¥çˆ¶è¿›ç¨‹å­é€€å‡ºSIGCHLDï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦å®ç°ä¸€ç§éå¸¸&lt;strong&gt;ç®€å•ã€å¿«é€Ÿçš„è¿›ç¨‹é—´é€šçŸ¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®åŸåˆ™&lt;/strong&gt;ï¼šä¿¡å·ç”¨äºå¤„ç†é‚£äº›ä¸ç¨‹åºæ­£å¸¸ä¸šåŠ¡é€»è¾‘å…³ç³»ä¸å¤§ï¼Œä½†å¿…é¡»ç”±æ“ä½œç³»ç»Ÿå±‚é¢å¤„ç†çš„ç´§æ€¥æˆ–å¼‚å¸¸æƒ…å†µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹©äº‹ä»¶æœºåˆ¶ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ å¼€å‘&lt;strong&gt;å›¾å½¢ç•Œé¢åº”ç”¨&lt;/strong&gt;ï¼Œéœ€è¦å“åº”ç”¨æˆ·çš„é¼ æ ‡ã€é”®ç›˜ç­‰äº¤äº’æ“ä½œæ—¶ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ æ„å»º&lt;strong&gt;é«˜å¹¶å‘çš„ç½‘ç»œæœåŠ¡å™¨&lt;/strong&gt;ï¼ˆå¦‚Node.jsã€Nginxï¼‰ï¼Œéœ€è¦é«˜æ•ˆç®¡ç†å¤§é‡è¿æ¥å’ŒI/Oæ“ä½œæ—¶ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ è®¾è®¡ä¸€ä¸ª&lt;strong&gt;æ¨¡å—åŒ–ç¨‹åº&lt;/strong&gt;ï¼Œå¸Œæœ›ä¸åŒæ¨¡å—ä¹‹é—´èƒ½å¤Ÿè§£è€¦ï¼Œé€šè¿‡æ¶ˆæ¯è¿›è¡Œé€šä¿¡æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®åŸåˆ™&lt;/strong&gt;ï¼šäº‹ä»¶ç”¨äºæ„å»ºç¨‹åºæœ¬èº«çš„ä¸šåŠ¡é€»è¾‘å’Œäº¤äº’æµç¨‹ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åº”ç”¨å±‚å¼€å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ååŒå·¥ä½œ"&gt;ğŸ”„ ååŒå·¥ä½œ
&lt;/h3&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…çš„å¤æ‚ç³»ç»Ÿä¸­ï¼Œä¿¡å·å’Œäº‹ä»¶æœºåˆ¶å¸¸å¸¸ååŒå·¥ä½œã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªGUIåº”ç”¨ç¨‹åºï¼ˆå¦‚Qtç¨‹åºï¼‰ä¸­ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·æŒ‰ä¸‹ &lt;code&gt;Ctrl+C&lt;/code&gt;ï¼ˆè¿™æ˜¯ä¸€ä¸ªé”®ç›˜äº‹ä»¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œç³»ç»Ÿé¦–å…ˆæ•è·è¿™ä¸ªç»„åˆé”®ï¼Œå¹¶&lt;strong&gt;å‘åº”ç”¨ç¨‹åºè¿›ç¨‹å‘é€ä¸€ä¸ªSIGINTä¿¡å·&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºçš„ä¿¡å·å¤„ç†å‡½æ•°ï¼ˆå¯èƒ½æ˜¯Qtæ¡†æ¶å†…å»ºçš„ï¼‰æ¥æ”¶åˆ°SIGINTã€‚&lt;/li&gt;
&lt;li&gt;è¯¥å¤„ç†å‡½æ•°å¹¶ä¸ç›´æ¥é€€å‡ºç¨‹åºï¼Œè€Œæ˜¯å¯èƒ½&lt;strong&gt;å‘ä¸»äº‹ä»¶å¾ªç¯æäº¤ä¸€ä¸ªâ€œé€€å‡ºè¯·æ±‚â€äº‹ä»¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;äº‹ä»¶å¾ªç¯åœ¨ä¸‹ä¸€è½®å¤„ç†ä¸­æ”¶åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œç„¶åå®‰å…¨ã€æœ‰åºåœ°æ‰§è¡Œå…³é—­çª—å£ã€ä¿å­˜æ•°æ®ç­‰æ¸…ç†å·¥ä½œï¼Œæœ€åé€€å‡ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹æ¸…æ™°åœ°å±•ç¤ºäº†ä¿¡å·ä½œä¸ºåº•å±‚è§¦å‘ï¼Œäº‹ä»¶ä½œä¸ºä¸Šå±‚ä¸šåŠ¡é€»è¾‘è½½ä½“çš„åˆ†å·¥ä¸åˆä½œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ä¿¡å·æœºåˆ¶å’Œäº‹ä»¶æœºåˆ¶çš„å¼‚åŒï¼Œå¹¶åœ¨ä½ çš„é¡¹ç›®ä¸­åšå‡ºæ°å½“çš„æŠ€æœ¯é€‰å‹ã€‚&lt;/p&gt;
&lt;h2 id="é›¶æ‹·è´"&gt;é›¶æ‹·è´
&lt;/h2&gt;&lt;p&gt;åœ¨è¿½æ±‚æè‡´æ€§èƒ½çš„åœºæ™¯ä¸‹ï¼Œé¿å…ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´çš„æ•°æ®æ‹·è´æ˜¯å…³é”®ã€‚Linux æä¾›äº†å¤šç§æŠ€æœ¯æ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯è®©æ•°æ®ç›´æ¥åœ¨ç¡¬ä»¶ï¼ˆå¦‚ç£ç›˜ã€ç½‘å¡ï¼‰å’Œå†…æ ¸ç¼“å†²åŒºä¹‹é—´ä¼ è¾“ï¼Œæˆ–è€…é€šè¿‡å†…å­˜æ˜ å°„ç­‰æ–¹å¼è®©ç”¨æˆ·è¿›ç¨‹ç›´æ¥è®¿é—®å†…æ ¸æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨å¯¹æ¯”äº†å‡ ç§ä¸»æµçš„é›¶æ‹·è´æŠ€æœ¯ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å…¶ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŠ€æœ¯åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;æœ€ä½³é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;å…³é”®ä¼˜åŠ¿&lt;/th&gt;
&lt;th&gt;ä¸»è¦é™åˆ¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;mmap() + write()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ–‡ä»¶æ˜ å°„åˆ°ç”¨æˆ·è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå®ç°ç”¨æˆ·ç©ºé—´ç›´æ¥è¯»å†™å†…æ ¸ç¼“å†²åŒºã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œè¯»å–æˆ–ä¿®æ”¹çš„åœºåˆã€‚&lt;/td&gt;
&lt;td&gt;å‡å°‘ä¸€æ¬¡ä»å†…æ ¸åˆ°ç”¨æˆ·æ€çš„æ‹·è´æ“ä½œã€‚&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶è¢«æˆªæ–­æ—¶å¯èƒ½å¼•å‘ &lt;code&gt;SIGBUS&lt;/code&gt;ä¿¡å·ï¼›æ˜ å°„å¤§æ–‡ä»¶æœ‰åœ°å€ç©ºé—´å’ŒTLBå‹åŠ›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;sendfile()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨å®Œæˆä»æ–‡ä»¶æè¿°ç¬¦åˆ°ç½‘ç»œå¥—æ¥å­—çš„æ•°æ®ä¼ è¾“ï¼Œæ•°æ®å…¨ç¨‹åœ¨å†…æ ¸ä¸­å¤„ç†ã€‚&lt;/td&gt;
&lt;td&gt;é«˜æ€§èƒ½é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼ˆå¦‚Nginxã€Apacheï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°å‡åŠï¼›å¯ç»“åˆSG-DMAå®ç°çœŸæ­£çš„é›¶æ‹·è´ã€‚&lt;/td&gt;
&lt;td&gt;æ—©æœŸç‰ˆæœ¬åªèƒ½æ–‡ä»¶åˆ°å¥—æ¥å­—ï¼›è¾“å…¥æ–‡ä»¶æè¿°ç¬¦å¿…é¡»æ”¯æŒ &lt;code&gt;mmap&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;splice()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ç®¡é“åœ¨å†…æ ¸å†…éƒ¨ç§»åŠ¨æ•°æ®ï¼Œå¯ä»¥åœ¨ä»»æ„ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆå¦‚å¥—æ¥å­—ä¹‹é—´ï¼‰ä¼ è¾“æ•°æ®ã€‚&lt;/td&gt;
&lt;td&gt;ä»£ç†æœåŠ¡å™¨ã€æ•°æ®è½¬å‘ç­‰éœ€è¦åœ¨ä»»æ„æè¿°ç¬¦é—´ç§»åŠ¨æ•°æ®çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;éå¸¸çµæ´»ï¼Œä¸é™åˆ¶äºæ–‡ä»¶åˆ°å¥—æ¥å­—ã€‚&lt;/td&gt;
&lt;td&gt;ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå¿…é¡»æ˜¯ç®¡é“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;MSG_ZEROCOPY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®å¥—æ¥å­—é€‰é¡¹åï¼Œ&lt;code&gt;send()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ç›´æ¥å¼•ç”¨ç”¨æˆ·ç¼“å†²åŒºçš„é¡µé¢ï¼Œé¿å…æ‹·è´ã€‚&lt;/td&gt;
&lt;td&gt;å‘é€å¤§é‡æ•°æ®çš„åœºæ™¯ï¼ˆå¦‚â‰¥10KBçš„å¤§åŒ…ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ç¼“å†²åŒºæ•°æ®ç›´æ¥å‘é€ï¼Œæ— éœ€æ‹·è´ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦Linux 4.14+ï¼›éœ€è¦ç½‘å¡æ”¯æŒï¼›æœ‰å¼‚æ­¥é”™è¯¯é€šçŸ¥æœºåˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;io_uring&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å…±äº«çš„ç¯å½¢é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥I/Oæ“ä½œï¼Œæå¤§å‡å°‘ç³»ç»Ÿè°ƒç”¨å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦æé«˜ååé‡å’Œä½å»¶è¿Ÿçš„ç°ä»£å¼‚æ­¥åº”ç”¨ï¼ˆå¦‚æ•°æ®åº“ã€é«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;çœŸæ­£çš„å¼‚æ­¥é›¶æ‹·è´ï¼›å‡å°‘ç³»ç»Ÿè°ƒç”¨å¼€é”€ï¼›åŠŸèƒ½å¼ºå¤§ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦Linux 5.1+ï¼›ç¼–ç¨‹æ¨¡å‹ç›¸å¯¹å¤æ‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é€‰æ‹©ä¸è¿›é˜¶å»ºè®®"&gt;ğŸ’¡ é€‰æ‹©ä¸è¿›é˜¶å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§æŠ€æœ¯å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨æ–‡ä»¶ä¼ è¾“&lt;/strong&gt;ï¼šä¼˜å…ˆè€ƒè™‘ &lt;strong&gt;&lt;code&gt;sendfile()&lt;/code&gt;&lt;/strong&gt;ï¼Œå®ƒåœ¨æ€§èƒ½å’Œå…¼å®¹æ€§ä¸Šå–å¾—äº†å¾ˆå¥½çš„å¹³è¡¡ï¼Œå°¤å…¶é€‚åˆåƒNginxè¿™æ ·çš„é™æ€å†…å®¹æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦å¤„ç†æ•°æ®æˆ–çµæ´»ä¼ è¾“&lt;/strong&gt;ï¼š&lt;strong&gt;&lt;code&gt;mmap()&lt;/code&gt;&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;splice()&lt;/code&gt;&lt;/strong&gt; æ˜¯æ›´ä½³é€‰æ‹©ã€‚&lt;code&gt;mmap&lt;/code&gt;é€‚åˆéœ€è¦è¯»å–æˆ–ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„åœºæ™¯ï¼Œè€Œ&lt;code&gt;splice&lt;/code&gt;åˆ™æ“…é•¿åœ¨ä»»æ„æè¿°ç¬¦ï¼ˆå¦‚ä¸¤ä¸ªå¥—æ¥å­—ï¼‰é—´é«˜æ•ˆç§»åŠ¨æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æè‡´ç½‘ç»œæ€§èƒ½&lt;/strong&gt;ï¼šè‹¥ä½ çš„åº”ç”¨ä¸»è¦æ¶‰åŠå¤§é‡æ•°æ®å‘é€ä¸”è¿è¡Œåœ¨è¾ƒæ–°çš„å†…æ ¸ä¸Šï¼Œå¯ä»¥æ¢ç´¢ &lt;strong&gt;&lt;code&gt;MSG_ZEROCOPY&lt;/code&gt;&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºæ–°ä¸€ä»£é«˜æ€§èƒ½åº”ç”¨&lt;/strong&gt;ï¼šå¯¹äºå…¨æ–°çš„ã€å¯¹æ€§èƒ½æœ‰è‹›åˆ»è¦æ±‚çš„é¡¹ç›®ï¼Œ&lt;strong&gt;&lt;code&gt;io_uring&lt;/code&gt;&lt;/strong&gt; æ˜¯å€¼å¾—æ·±å…¥ç ”ç©¶çš„æœªæ¥æ–¹å‘ï¼Œå®ƒä»£è¡¨äº†Linux I/Oçš„æ¼”è¿›è¶‹åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å®ç°é›¶æ‹·è´å¹¶éæ²¡æœ‰ä»£ä»·ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æ˜¯å…³é”®&lt;/strong&gt;ï¼šé›¶æ‹·è´æŠ€æœ¯é€šå¸¸æ„å‘³ç€å¤šä¸ªè¿›ç¨‹æˆ–å†…æ ¸çº¿ç¨‹å¯èƒ½åŒæ—¶è®¿é—®åŒä¸€å—å†…å­˜ã€‚ä½ å¿…é¡»ä½¿ç”¨é€‚å½“çš„åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä¿¡å·é‡ã€äº’æ–¥é”ï¼‰æ¥é˜²æ­¢æ•°æ®ç«äº‰ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒè¡¡ä¸å¼€é”€&lt;/strong&gt;ï¼š&lt;code&gt;mmap&lt;/code&gt;å»ºç«‹æ˜ å°„æœ¬èº«æœ‰ä¸€å®šå¼€é”€ï¼Œå¤„ç†å¤§æ–‡ä»¶æ—¶å¯èƒ½å¯¹å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰å’ŒTLBäº§ç”Ÿå‹åŠ›ã€‚å› æ­¤ï¼Œå¯¹äºå°æ•°æ®é‡çš„ä¼ è¾“ï¼Œä¼ ç»Ÿçš„è¯»å†™æ–¹å¼å¯èƒ½åè€Œæ›´ç®€å•é«˜æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶ä¸å†…æ ¸ä¾èµ–&lt;/strong&gt;ï¼šä¸€äº›é«˜çº§ç‰¹æ€§å¦‚ &lt;code&gt;MSG_ZEROCOPY&lt;/code&gt;å’Œ &lt;code&gt;io_uring&lt;/code&gt;å¯¹Linuxå†…æ ¸ç‰ˆæœ¬æœ‰è¦æ±‚ã€‚æ­¤å¤–ï¼Œ&lt;code&gt;sendfile&lt;/code&gt;çš„SG-DMAä¼˜åŒ–ç­‰åŠŸèƒ½éœ€è¦ç‰¹å®šç¡¬ä»¶æ”¯æŒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©æ‚¨æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„é›¶æ‹·è´æŠ€æœ¯ã€‚å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šæŠ€æœ¯çš„å®ç°ç»†èŠ‚æˆ–åº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="bss-æ®µ"&gt;BSS æ®µ
&lt;/h2&gt;&lt;p&gt;BSSæ®µï¼ˆBlock Started by Symbolï¼‰æ˜¯ç¨‹åºå†…å­˜å¸ƒå±€ä¸­ä¸€ä¸ªä¸“é—¨ç”¨äºå­˜æ”¾&lt;strong&gt;æœªåˆå§‹åŒ–å…¨å±€å˜é‡å’Œé™æ€å˜é‡&lt;/strong&gt;çš„åŒºåŸŸã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºä¼˜åŒ–å¯æ‰§è¡Œæ–‡ä»¶çš„ä½“ç§¯ï¼Œå¹¶åœ¨ç¨‹åºåŠ è½½æ—¶è‡ªåŠ¨å°†å†…å­˜åˆå§‹åŒ–ä¸ºé›¶ï¼Œç¡®ä¿äº†ç¨‹åºçš„ç¡®å®šæ€§è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠ“ä½BSSæ®µçš„å…³é”®ç‰¹å¾ï¼Œå¹¶ä¸ç›¸ä¼¼æ¦‚å¿µè¿›è¡ŒåŒºåˆ†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;BSSæ®µ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¨ç§°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Block Started by Symbolï¼ˆä»¥ç¬¦å·å¼€å§‹çš„å—ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;å¯æ‰§è¡Œæ–‡ä»¶ä¸­ä¸å ç”¨å®é™…å­˜å‚¨ç©ºé—´&lt;/strong&gt;ï¼Œä»…è®°å½•æ‰€éœ€å†…å­˜å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹åŒ–æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¨‹åº&lt;strong&gt;åŠ è½½æ—¶ç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨æ¸…é›¶&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ•°æ®æ®µåŒºåˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®æ®µå­˜å‚¨å·²åˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡ï¼Œå¹¶ç›´æ¥å ç”¨å¯æ‰§è¡Œæ–‡ä»¶ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸ä»·å€¼"&gt;ğŸ’¾ å·¥ä½œåŸç†ä¸ä»·å€¼
&lt;/h3&gt;&lt;p&gt;BSSæ®µçš„è®¾è®¡ä½“ç°äº†è®¡ç®—æœºç§‘å­¦ä¸­ä¸€ç§ç»å…¸çš„â€œç©ºé—´æ¢æ—¶é—´â€ä¼˜åŒ–ç­–ç•¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ–‡ä»¶ä½“ç§¯&lt;/strong&gt;ï¼šç”±äºæœªåˆå§‹åŒ–çš„å˜é‡æœ€ç»ˆéƒ½ä¼šè¢«è®¾ç½®ä¸ºé›¶ï¼Œåœ¨ç¼–è¯‘é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œæ²¡æœ‰å¿…è¦ä¸ºè¿™äº›é›¶å€¼åœ¨ç£ç›˜ä¸Šåˆ†é…ç©ºé—´ã€‚ç¼–è¯‘å™¨åªæ˜¯åœ¨æ–‡ä»¶ä¸­è®°å½•ä¸‹â€œéœ€è¦ä¸€å—å¤§å°ä¸ºXçš„å†…å­˜ï¼Œå¹¶åˆå§‹åŒ–ä¸ºé›¶â€ã€‚åªæœ‰å½“ç¨‹åºè¢«åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šçœŸæ­£åˆ†é…è¿™å—ç‰©ç†å†…å­˜å¹¶ç«‹å³æ¸…é›¶ã€‚è¿™å¯¹äºæœ‰å¤§é‡æœªåˆå§‹åŒ–æ•°ç»„çš„ç¨‹åºæ¥è¯´ï¼Œèƒ½æ˜¾è‘—å‡å°å¯æ‰§è¡Œæ–‡ä»¶çš„ä½“ç§¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯ç¨‹åºç¡®å®šæ€§&lt;/strong&gt;ï¼šåœ¨C/C++è¯­è¨€æ ‡å‡†ä¸­è§„å®šï¼Œæœªæ˜¾å¼åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡å¿…é¡»è¢«åˆå§‹åŒ–ä¸ºé›¶ã€‚BSSæ®µçš„è‡ªåŠ¨æ¸…é›¶æœºåˆ¶æ­£æ˜¯è¿™ä¸€è¯­è¨€ç‰¹æ€§çš„åº•å±‚å®ç°ä¿éšœï¼Œç¡®ä¿äº†æ— è®ºç¨‹åºåœ¨ä½•ç§ç¯å¢ƒä¸‹è¿è¡Œï¼Œè¿™äº›å˜é‡çš„åˆå§‹çŠ¶æ€éƒ½æ˜¯ä¸€è‡´çš„ï¼Œé¿å…äº†å› è¯»å–åˆ°éšæœºå†…å­˜åƒåœ¾å€¼è€Œå¼•å‘çš„ä¸å¯é¢„çŸ¥è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å­˜å‚¨äº†å“ªäº›å˜é‡"&gt;ğŸ“ å­˜å‚¨äº†å“ªäº›å˜é‡ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå­˜æ”¾åœ¨BSSæ®µçš„å˜é‡ä¸»è¦æœ‰ä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡&lt;/strong&gt;ï¼šåœ¨æ‰€æœ‰å‡½æ•°ä¹‹å¤–å®šä¹‰çš„ã€æ²¡æœ‰èµ‹åˆå€¼çš„å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªåˆå§‹åŒ–çš„é™æ€å˜é‡&lt;/strong&gt;ï¼šåŒ…æ‹¬åœ¨å‡½æ•°å†…éƒ¨ç”¨ &lt;code&gt;static&lt;/code&gt;å£°æ˜çš„å±€éƒ¨å˜é‡ï¼Œä»¥åŠåœ¨æ–‡ä»¶ä½œç”¨åŸŸç”¨ &lt;code&gt;static&lt;/code&gt;å£°æ˜çš„å˜é‡ï¼Œåªè¦å®ƒä»¬æ²¡æœ‰æ˜¾å¼åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€äº›ç¼–è¯‘å™¨ä¹Ÿä¼šå°†&lt;strong&gt;æ˜¾å¼åˆå§‹åŒ–ä¸ºé›¶&lt;/strong&gt;çš„å…¨å±€å’Œé™æ€å˜é‡æ”¾å…¥BSSæ®µï¼Œå› ä¸ºè¿™å’Œâ€œæœªåˆå§‹åŒ–â€åœ¨æ¸…é›¶æ“ä½œä¸Šæ˜¯ç­‰ä»·çš„ã€‚&lt;/p&gt;
&lt;h3 id="-ç¨‹åºåŠ è½½è¿‡ç¨‹ä¸­çš„è§’è‰²"&gt;ğŸ”„ ç¨‹åºåŠ è½½è¿‡ç¨‹ä¸­çš„è§’è‰²
&lt;/h3&gt;&lt;p&gt;å½“æ‚¨ç‚¹å‡»è¿è¡Œä¸€ä¸ªç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿçš„åŠ è½½å™¨ï¼ˆLoaderï¼‰ä¼šæ‰§è¡Œä»¥ä¸‹å…³é”®æ­¥éª¤æ¥å¤„ç†BSSæ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£æå¯æ‰§è¡Œæ–‡ä»¶&lt;/strong&gt;ï¼šè¯»å–æ–‡ä»¶å¤´éƒ¨ä¿¡æ¯ï¼Œæ‰¾åˆ°BSSæ®µçš„å¤§å°æè¿°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…å†…å­˜&lt;/strong&gt;ï¼šåœ¨è¿›ç¨‹çš„æ•°æ®åŒºåæ–¹ï¼Œä¸ºBSSæ®µåˆ†é…æŒ‡å®šå¤§å°çš„å†…å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…é›¶åˆå§‹åŒ–&lt;/strong&gt;ï¼šå°†è¿™å—åˆšåˆ†é…çš„å†…å­˜å…¨éƒ¨å¡«å……ä¸ºé›¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨ä¸»å‡½æ•° &lt;code&gt;main&lt;/code&gt;æ‰§è¡Œä¹‹å‰ï¼Œå› æ­¤å½“æ‚¨çš„ä»£ç å¼€å§‹è¿è¡Œæ—¶ï¼Œæ‰€æœ‰BSSæ®µä¸­çš„å˜é‡éƒ½å·²ç»å¤„äºç¡®å®šçš„é›¶å€¼çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åµŒå…¥å¼ç³»ç»Ÿçš„ç‰¹æ®Šå¤„ç†&lt;/strong&gt;ï¼šåœ¨åµŒå…¥å¼å¼€å‘ä¸­ï¼Œç¨‹åºé€šå¸¸è¢«çƒ§å½•åˆ°åªè¯»å­˜å‚¨å™¨ï¼ˆå¦‚Flashï¼‰ä¸­ã€‚ç”±äºBSSæ®µåœ¨å¯æ‰§è¡Œæ–‡ä»¶é•œåƒä¸­ä¸å­˜åœ¨ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶éœ€è¦æœ‰ä¸“é—¨çš„å¼•å¯¼ä»£ç ï¼ˆå¦‚Bootloaderï¼‰åœ¨å°†ç¨‹åºåŠ è½½åˆ°å†…å­˜åï¼Œæ‰‹åŠ¨æ‰§è¡Œæ¸…é›¶BSSæ®µçš„æ“ä½œã€‚å¦‚æœè¿™ä¸€æ­¥ç¼ºå¤±ï¼Œå˜é‡å°†ä¸ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¦å·çš„å¼ºå¼±æ€§&lt;/strong&gt;ï¼šä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚æ˜¯ï¼Œåˆå§‹åŒ–ä¸ºé›¶çš„å…¨å±€å˜é‡æ˜¯â€œå¼ºç¬¦å·â€ï¼Œè€Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡æ˜¯â€œå¼±ç¬¦å·â€ã€‚å¦‚æœåœ¨å¤šä¸ªç¼–è¯‘å•å…ƒä¸­å®šä¹‰äº†åŒåå…¨å±€å˜é‡ï¼Œé“¾æ¥å™¨ä¼šé€‰æ‹©å¼ºç¬¦å·ã€‚å› æ­¤ï¼Œå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–ä¸ºé›¶çš„å…¨å±€å˜é‡æ¯”å®Œå…¨ä¸åˆå§‹åŒ–æ›´èƒ½é¿å…æ„å¤–çš„é“¾æ¥å†²çªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒBSSæ®µæ˜¯ç¨‹åºå†…å­˜ç®¡ç†ä¸­ä¸€ä¸ªå·§å¦™çš„è®¾è®¡ï¼Œå®ƒé€šè¿‡å°†æœªåˆå§‹åŒ–å˜é‡çš„å­˜å‚¨éœ€æ±‚æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ï¼Œæœ‰æ•ˆå‡å°äº†å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ï¼Œå¹¶é€šè¿‡å¼ºåˆ¶æ¸…é›¶æœºåˆ¶ä¿éšœäº†ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§ã€‚ç†è§£BSSæ®µæœ‰åŠ©äºä½ æ›´æ·±å…¥åœ°æ´å¯Ÿç¨‹åºä»ç¼–è¯‘ã€é“¾æ¥åˆ°åŠ è½½è¿è¡Œçš„å…¨è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£BSSæ®µã€‚å¦‚æœä½ å¯¹ç¨‹åºå†…å­˜å¸ƒå±€çš„å…¶ä»–éƒ¨åˆ†ï¼Œå¦‚å †ã€æ ˆæˆ–ä»£ç æ®µä¹Ÿæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æŠ¢å å¼è°ƒåº¦"&gt;æŠ¢å å¼è°ƒåº¦
&lt;/h2&gt;&lt;p&gt;æŠ¢å å¼è°ƒåº¦æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒè°ƒåº¦æœºåˆ¶ï¼Œå®ƒå…è®¸é«˜ä¼˜å…ˆçº§ä»»åŠ¡åœ¨ä»»ä½•æ—¶å€™ä¸­æ–­ï¼ˆæŠ¢å ï¼‰æ­£åœ¨è¿è¡Œçš„ä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œä»è€Œç¡®ä¿ç³»ç»Ÿèƒ½åŠæ—¶å“åº”å…³é”®äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒè¦ç´ çš„å¯¹æ¯”è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;æŠ¢å å¼è°ƒåº¦&lt;/th&gt;
&lt;th&gt;éæŠ¢å å¼è°ƒåº¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒåº¦åŸåˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼˜å…ˆçº§é©±åŠ¨ã€æ—¶é—´ç‰‡è½®è½¬&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡è¿è¡Œç›´è‡³å®Œæˆæˆ–ä¸»åŠ¨æ”¾å¼ƒCPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»»åŠ¡åˆ‡æ¢æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ä¼˜å…ˆçº§ä»»åŠ¡å°±ç»ªã€æ—¶é—´ç‰‡è€—å°½ã€ç³»ç»Ÿäº‹ä»¶&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡ç»ˆæ­¢ã€ä»»åŠ¡ä¸»åŠ¨è¿›å…¥é˜»å¡çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿå¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé«˜&lt;/strong&gt;ï¼ˆé¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½&lt;/strong&gt;ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°å°‘ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å“åº”æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çŸ­ä¸”å¯é¢„æµ‹&lt;/strong&gt;ï¼Œé€‚åˆå®æ—¶ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé•¿ä¸”ä¸ç¡®å®š&lt;/strong&gt;ï¼Œå¯èƒ½å‘ç”Ÿé˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¬å¹³æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒå¥½ï¼Œé˜²æ­¢å•ä¸€ä»»åŠ¡é•¿æ—¶é—´ç‹¬å CPU&lt;/td&gt;
&lt;td&gt;è¾ƒå·®ï¼Œé•¿ä»»åŠ¡å¯èƒ½å¯¼è‡´çŸ­ä»»åŠ¡é¥¥é¥¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼ˆéœ€å¤„ç†å¹¶å‘åŒæ­¥ã€ä¼˜å…ˆçº§åè½¬ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼ˆé€»è¾‘ç®€å•ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®æ—¶ç³»ç»Ÿï¼ˆå¦‚èˆªç©ºèˆªå¤©ã€å·¥ä¸šæ§åˆ¶ï¼‰ã€é€šç”¨OSï¼ˆå¦‚Linuxã€Windowsï¼‰&lt;/td&gt;
&lt;td&gt;æ—©æœŸç³»ç»Ÿæˆ–ä¸“ç”¨æ‰¹å¤„ç†ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸å…³é”®æŠ€æœ¯"&gt;âš™ï¸ å·¥ä½œåŸç†ä¸å…³é”®æŠ€æœ¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§¦å‘æŠ¢å çš„æ—¶æœº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŠ¢å çš„å‘ç”Ÿé€šå¸¸ç”±ä»¥ä¸‹ä¸‰ç§äº‹ä»¶è§¦å‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜ä¼˜å…ˆçº§ä»»åŠ¡å°±ç»ª&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å¸¸è§çš„è§¦å‘æ¡ä»¶ã€‚å½“ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡è¿›å…¥å°±ç»ªçŠ¶æ€æ—¶ï¼Œè°ƒåº¦å™¨ä¼šç«‹å³è¿›è¡ŒæŠ¢å ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´ç‰‡è€—å°½&lt;/strong&gt;ï¼šåœ¨åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œå³ä½¿æ‰€æœ‰ä»»åŠ¡ä¼˜å…ˆçº§ç›¸åŒï¼Œæ¯ä¸ªä»»åŠ¡ä¹Ÿä¼šè¢«åˆ†é…ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ç‰‡ï¼ˆTime Sliceï¼‰ã€‚å½“ä»»åŠ¡ç”¨å®Œå…¶æ—¶é—´ç‰‡åï¼Œä¼šè¢«å¼ºåˆ¶å‰¥å¤ºCPUï¼Œè°ƒåº¦å™¨é€‰æ‹©ä¸‹ä¸€ä¸ªä»»åŠ¡è¿è¡Œï¼Œä»¥å®ç°å¤šä»»åŠ¡çš„å…¬å¹³è½®è½¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿäº‹ä»¶&lt;/strong&gt;ï¼šå¦‚I/Oæ“ä½œå®Œæˆï¼Œå¯èƒ½ä¼šå”¤é†’ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„é˜»å¡ä»»åŠ¡ï¼Œä»è€Œè§¦å‘æŠ¢å ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŠ¢å å‘ç”Ÿæ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦æ‰§è¡Œ&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ä¿å­˜å½“å‰ä»»åŠ¡çš„è¿è¡Œç¯å¢ƒï¼ˆå¦‚å¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰åˆ°å…¶ä»»åŠ¡æ§åˆ¶å—ä¸­ï¼Œç„¶åæ¢å¤ä¸‹ä¸€ä¸ªè¦è¿è¡Œä»»åŠ¡çš„ä¸Šä¸‹æ–‡ã€‚è™½ç„¶è¿™ä¼šå¸¦æ¥å¼€é”€ï¼Œä½†å®ƒæ˜¯å®ç°å¤šä»»åŠ¡å¹¶å‘çš„å…³é”®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³ä¼˜å…ˆçº§åè½¬&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¼˜å…ˆçº§åè½¬æ˜¯æŠ¢å å¼è°ƒåº¦ä¸­ä¸€ä¸ªç»å…¸é—®é¢˜ï¼šä¸€ä¸ªé«˜ä¼˜å…ˆçº§ä»»åŠ¡å› ç­‰å¾…è¢«ä½ä¼˜å…ˆçº§ä»»åŠ¡å æœ‰çš„å…±äº«èµ„æºè€Œè¢«é˜»å¡ï¼Œè€Œè¯¥ä½ä¼˜å…ˆçº§ä»»åŠ¡åˆå¯èƒ½è¢«ä¸­ç­‰ä¼˜å…ˆçº§ä»»åŠ¡æŠ¢å ï¼Œå¯¼è‡´é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ— é™æœŸå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§ç»§æ‰¿&lt;/strong&gt;ï¼šå½“ä½ä¼˜å…ˆçº§ä»»åŠ¡æŒæœ‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ‰€éœ€çš„èµ„æºæ—¶ï¼Œä¸´æ—¶å°†å…¶ä¼˜å…ˆçº§æå‡åˆ°ä¸é«˜ä¼˜å…ˆçº§ä»»åŠ¡ç›¸åŒï¼Œä»¥é˜²æ­¢è¢«ä¸­ç­‰ä¼˜å…ˆçº§ä»»åŠ¡æŠ¢å ï¼Œä»è€ŒåŠ é€Ÿå…¶æ‰§è¡Œå¹¶é‡Šæ”¾èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§å¤©èŠ±æ¿&lt;/strong&gt;ï¼šä¸ºèµ„æºé¢„å…ˆè®¾å®šä¸€ä¸ªæœ€é«˜ä¼˜å…ˆçº§ï¼ˆå¤©èŠ±æ¿ä¼˜å…ˆçº§ï¼‰ï¼Œä»»ä½•ä»»åŠ¡åœ¨è·å–è¯¥èµ„æºåï¼Œå…¶ä¼˜å…ˆçº§å³è¢«æå‡è‡³è¿™ä¸ªå¤©èŠ±æ¿ä¼˜å…ˆçº§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦ç®—æ³•å®ç°"&gt;ğŸ’» ä¸»è¦ç®—æ³•å®ç°
&lt;/h3&gt;&lt;p&gt;åŸºäºä¸åŒçš„è®¾è®¡ç›®æ ‡ï¼ŒæŠ¢å å¼è°ƒåº¦è¡ç”Ÿå‡ºå¤šç§ç®—æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦&lt;/strong&gt;ï¼šæœ€æ ¸å¿ƒçš„ç­–ç•¥ã€‚ç³»ç»Ÿä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ä¸€ä¸ªé™æ€æˆ–åŠ¨æ€çš„ä¼˜å…ˆçº§ï¼Œè°ƒåº¦å™¨æ€»æ˜¯è®©å°±ç»ªé˜Ÿåˆ—ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆ&lt;/strong&gt;ï¼šå¸¸ç”¨äºç¡¬å®æ—¶ç³»ç»Ÿã€‚ä»»åŠ¡çš„ä¼˜å…ˆçº§æ ¹æ®å…¶æˆªæ­¢æ—¶é—´çš„ç´§è¿«ç¨‹åº¦åŠ¨æ€åˆ†é…ï¼Œæˆªæ­¢æ—¶é—´è¶Šæ—©ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚è°ƒåº¦å™¨ä¼˜å…ˆæ‰§è¡Œæˆªæ­¢æ—¶é—´æœ€æ—©çš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ&lt;/strong&gt;ï¼šå¯çœ‹ä½œæ˜¯SJFçš„æŠ¢å å¼ç‰ˆæœ¬ã€‚è°ƒåº¦å™¨æ€»æ˜¯é€‰æ‹©å‰©ä½™è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä»»åŠ¡æ¥æ‰§è¡Œï¼Œä»¥æœ€å°åŒ–å¹³å‡ç­‰å¾…æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦&lt;/strong&gt;ï¼šç»“åˆäº†æŠ¢å å’Œå…¬å¹³æ€§çš„ç®—æ³•ã€‚ä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ç‰‡ï¼Œæ—¶é—´ç‰‡ç”¨å®Œåå³è¢«æŠ¢å ï¼Œä»»åŠ¡è¢«æ”¾å›å°±ç»ªé˜Ÿåˆ—æœ«å°¾ï¼Œç­‰å¾…ä¸‹ä¸€è½®è°ƒåº¦ã€‚è¿™ä¿è¯äº†æ‰€æœ‰ç›¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡éƒ½èƒ½è·å¾—å…¬å¹³çš„CPUæ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸŒ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶æ“ä½œç³»ç»Ÿ&lt;/strong&gt;ï¼šåœ¨ç¡¬å®æ—¶å’Œè½¯å®æ—¶ç³»ç»Ÿä¸­ï¼ŒæŠ¢å å¼è°ƒåº¦æ˜¯æ»¡è¶³ä¸¥æ ¼æ—¶é™è¦æ±‚çš„åŸºçŸ³ï¼Œå¹¿æ³›åº”ç”¨äºèˆªç©ºèˆªå¤©ã€å·¥ä¸šè‡ªåŠ¨åŒ–ã€æ±½è½¦ç”µå­ï¼ˆå¦‚ABSç³»ç»Ÿï¼‰å’ŒåŒ»ç–—è®¾å¤‡ç­‰é¢†åŸŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨æ“ä½œç³»ç»Ÿ&lt;/strong&gt;ï¼šç°ä»£æ¡Œé¢å’ŒæœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼ˆå¦‚Windowsã€Linuxï¼‰æ™®éé‡‡ç”¨åŸºäºä¼˜å…ˆçº§å’Œæ—¶é—´ç‰‡è½®è½¬çš„æŠ¢å å¼å¤šä»»åŠ¡ï¼Œä»¥å®ç°ç³»ç»Ÿçš„é«˜å“åº”é€Ÿåº¦å’Œæµç•…çš„å¤šä»»åŠ¡ä½“éªŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æŒ‘æˆ˜ä¸ä¼˜åŒ–"&gt;âš ï¸ æŒ‘æˆ˜ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;å®ç°æŠ¢å å¼è°ƒåº¦ä¹Ÿé¢ä¸´æŒ‘æˆ˜ï¼Œä¸»è¦æ˜¯&lt;strong&gt;è°ƒåº¦å¼€é”€&lt;/strong&gt;å’Œ&lt;strong&gt;ç³»ç»Ÿå¤æ‚æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼€é”€æ§åˆ¶&lt;/strong&gt;ï¼šé¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šæ¶ˆè€—CPUå‘¨æœŸã€‚ä¼˜åŒ–æ–¹æ³•åŒ…æ‹¬ä½¿ç”¨æ›´é«˜æ•ˆçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ç®—æ³•ã€åˆç†è®¾ç½®æ—¶é—´ç‰‡å¤§å°ï¼ˆI/Oå¯†é›†å‹ä»»åŠ¡ç”¨çŸ­æ—¶é—´ç‰‡ï¼ŒCPUå¯†é›†å‹ä»»åŠ¡ç”¨é•¿æ—¶é—´ç‰‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿå¤æ‚æ€§&lt;/strong&gt;ï¼šéœ€è¦ç²¾å¿ƒå¤„ç†ä»»åŠ¡é—´çš„åŒæ­¥ä¸é€šä¿¡ï¼Œé¿å…ç«æ€æ¡ä»¶å’Œæ­»é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£æŠ¢å å¼è°ƒåº¦ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„è°ƒåº¦ç®—æ³•æˆ–å…¶åœ¨ç‰¹å®šç³»ç»Ÿï¼ˆå¦‚FreeRTOSæˆ–Linuxï¼‰ä¸­çš„å®ç°ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è™šæ‹Ÿå†…å­˜"&gt;è™šæ‹Ÿå†…å­˜
&lt;/h2&gt;&lt;p&gt;è™šæ‹Ÿå†…å­˜ï¼ˆVirtual Memoryï¼‰æŠ€æœ¯ä¸­â€œä»¥æ—¶é—´æ¢ç©ºé—´â€çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ˜¯é€šè¿‡æ¶ˆè€—æ›´å¤šçš„æ—¶é—´èµ„æºï¼ˆä¸»è¦æ˜¯å¤„ç†å™¨è®¡ç®—æ—¶é—´å’Œç£ç›˜I/Oæ—¶é—´ï¼‰ï¼Œæ¥æ¢å–ç¨‹åºèƒ½å¤Ÿä½¿ç”¨çš„ã€æ¯”å®é™…ç‰©ç†å†…å­˜å¤§å¾—å¤šçš„é€»è¾‘åœ°å€ç©ºé—´ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿç†è§£è¿™ç§äº¤æ¢æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;äº¤æ¢ç»´åº¦&lt;/th&gt;
&lt;th&gt;â€œæ¢â€æ¥äº†ä»€ä¹ˆâ€œç©ºé—´â€ï¼Ÿ&lt;/th&gt;
&lt;th&gt;â€œä»˜å‡ºâ€äº†ä»€ä¹ˆâ€œæ—¶é—´â€ä»£ä»·ï¼Ÿ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€è½¬æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹ã€è¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ— éœ€å…³å¿ƒç‰©ç†å†…å­˜çš„å®é™…å¸ƒå±€ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè¿›è¡Œ&lt;strong&gt;è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢&lt;/strong&gt;ï¼Œæ¯æ¬¡å†…å­˜è®¿é—®éƒ½å¢åŠ é¢å¤–è®¡ç®—æ­¥éª¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰éœ€è°ƒé¡µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¨‹åºæ— éœ€å…¨éƒ¨è£…å…¥å†…å­˜å³å¯è¿è¡Œï¼Œç‰©ç†å†…å­˜å¾—ä»¥æ‰¿è½½&lt;strong&gt;è¿œè¶…è‡ªèº«å®¹é‡&lt;/strong&gt;çš„å¤šä¸ªç¨‹åºã€‚&lt;/td&gt;
&lt;td&gt;å½“è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜æ—¶ï¼ˆç¼ºé¡µï¼‰ï¼Œä¼šè§¦å‘&lt;strong&gt;ç¼ºé¡µä¸­æ–­&lt;/strong&gt;ï¼Œéœ€è¦æ‰§è¡Œè€—æ—¶çš„&lt;strong&gt;ç£ç›˜I/Oæ“ä½œ&lt;/strong&gt;å°†é¡µé¢è°ƒå…¥ï¼Œå¯¼è‡´ç¨‹åºæš‚åœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é¡µé¢ç½®æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å°†æš‚æ—¶ä¸ç”¨çš„é¡µé¢æ¢å‡ºåˆ°ç£ç›˜ï¼Œä¸ºæ€¥éœ€çš„é¡µé¢&lt;strong&gt;è…¾å‡ºç‰©ç†å†…å­˜ç©ºé—´&lt;/strong&gt;ï¼Œå®ç°å†…å­˜ç©ºé—´çš„åŠ¨æ€å¤ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;é€‰æ‹©æ¢å‡ºé¡µé¢ã€æ‰§è¡Œæ¢å‡ºæ“ä½œä»¥åŠåç»­å¯èƒ½çš„æ¢å…¥æ“ä½œï¼Œéƒ½éœ€è¦&lt;strong&gt;æ¶ˆè€—CPUæ—¶é—´&lt;/strong&gt;å’Œå¤§é‡çš„&lt;strong&gt;ç£ç›˜I/Oæ—¶é—´&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£æ—¶é—´æ¢ç©ºé—´çš„è¿ä½œæœºåˆ¶"&gt;ğŸ” æ·±å…¥ç†è§£â€œæ—¶é—´æ¢ç©ºé—´â€çš„è¿ä½œæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;è¡¨æ ¼å±•ç¤ºäº†åŸºæœ¬çš„äº¤æ¢å…³ç³»ï¼Œæˆ‘ä»¬å†æ¥æ·±å…¥çœ‹çœ‹è¿™äº›è¿‡ç¨‹æ˜¯å¦‚ä½•å…·ä½“è¿ä½œçš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ°å€è½¬æ¢çš„æ—¶ç©ºäº¤æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¸­ï¼Œç¨‹åºä½¿ç”¨çš„æ˜¯è™šæ‹Ÿåœ°å€ï¼Œå¤„ç†å™¨éœ€è¦å€ŸåŠ©ç”±æ“ä½œç³»ç»Ÿç»´æŠ¤çš„&lt;strong&gt;é¡µè¡¨&lt;/strong&gt;ï¼Œå°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºå®é™…çš„ç‰©ç†åœ°å€ã€‚è¿™ä¸ªè¿‡ç¨‹ç”±å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰ç¡¬ä»¶å®Œæˆã€‚è™½ç„¶MMUåŠ é€Ÿäº†è½¬æ¢ï¼Œä½†æ¯æ¬¡å†…å­˜è®¿é—®éƒ½éœ€è¦ç»å†ä¸€æ¬¡ç”šè‡³å¤šæ¬¡ï¼ˆå¦‚å¤šçº§é¡µè¡¨ï¼‰æŸ¥è¡¨è¿‡ç¨‹ï¼Œè¿™å¼•å…¥äº†é¢å¤–çš„è®¡ç®—å¼€é”€ï¼Œæ˜¯ç”¨&lt;strong&gt;è®¡ç®—æ—¶é—´&lt;/strong&gt;æ¢æ¥äº†å†…å­˜ç®¡ç†çš„çµæ´»æ€§å’Œç¼–ç¨‹çš„ä¾¿åˆ©æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰éœ€è°ƒé¡µçš„æ—¶ç©ºäº¤æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯â€œæ—¶é—´æ¢ç©ºé—´â€æœ€å…¸å‹çš„ä½“ç°ã€‚ç¨‹åºå¯åŠ¨æ—¶ï¼Œæ“ä½œç³»ç»Ÿåªå°†å…¶ä¸€å°éƒ¨åˆ†ä»£ç å’Œæ•°æ®ï¼ˆé€šå¸¸å°±æ˜¯ç¬¬ä¸€é¡µï¼‰è£…å…¥ç‰©ç†å†…å­˜ï¼Œå…¶ä»–éƒ¨åˆ†ä»ç•™åœ¨ç£ç›˜ä¸Šã€‚å½“ç¨‹åºæ‰§è¡Œåˆ°ä¸åœ¨å†…å­˜çš„ä»£ç æˆ–è®¿é—®ä¸åœ¨å†…å­˜çš„æ•°æ®æ—¶ï¼Œå°±ä¼šè§¦å‘&lt;strong&gt;ç¼ºé¡µä¸­æ–­&lt;/strong&gt;ã€‚æ­¤æ—¶ï¼Œæ“ä½œç³»ç»Ÿè¢«ä¸­æ–­ï¼Œéœ€è¦ä»ç£ç›˜ä¸­æ‰¾åˆ°æ‰€éœ€é¡µé¢å¹¶å°†å…¶è¯»å…¥ä¸€ä¸ªç©ºé—²çš„ç‰©ç†é¡µæ¡†ä¸­ã€‚è¿™ä¸ªç£ç›˜I/Oæ“ä½œç›¸æ¯”å†…å­˜è®¿é—®é€Ÿåº¦ææ…¢ï¼Œå¯èƒ½ä½¿è¿›ç¨‹é˜»å¡æ•°æ¯«ç§’ï¼ˆå¯¹CPUè€Œè¨€æ˜¯å·¨å¤§çš„æ—¶é—´æµªè´¹ï¼‰ã€‚ç¨‹åºæ­£æ˜¯ä»¥å¿å—è¿™ç§&lt;strong&gt;å¶å°”çš„å»¶è¿Ÿ&lt;/strong&gt;ä¸ºä»£ä»·ï¼Œæ¢å–äº†è¿è¡Œæ‰€éœ€å†…å­˜å¯ä»¥&lt;strong&gt;è¿œè¶…ç‰©ç†å†…å­˜å®¹é‡&lt;/strong&gt;çš„å·¨å¤§ç©ºé—´æ”¶ç›Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡µé¢ç½®æ¢çš„æ—¶ç©ºäº¤æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ç‰©ç†å†…å­˜ä¸è¶³ï¼Œåˆéœ€è¦è°ƒå…¥æ–°é¡µé¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¿…é¡»é€‰æ‹©ä¸€ä¸ªå½“å‰åœ¨å†…å­˜ä¸­çš„é¡µé¢å°†å…¶æ¢å‡ºåˆ°ç£ç›˜ä¸Šçš„äº¤æ¢åŒºï¼ˆswap areaï¼‰ã€‚è¿™ä¸ªé€‰æ‹©è¿‡ç¨‹ç”±&lt;strong&gt;é¡µé¢ç½®æ¢ç®—æ³•&lt;/strong&gt;ï¼ˆå¦‚LRUã€FIFOç­‰ï¼‰å†³å®šï¼Œç®—æ³•æœ¬èº«çš„æ‰§è¡Œéœ€è¦CPUæ—¶é—´ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœè¢«é€‰ä¸­çš„é¡µé¢åœ¨è¢«æ¢å‡ºååˆè¢«ç¨‹åºè®¿é—®ï¼Œåˆ™åˆéœ€è¦ä¸€æ¬¡ç¼ºé¡µä¸­æ–­å’Œç£ç›˜I/Oå°†å…¶æ¢å…¥ã€‚è¿™ç§åœ¨å†…å­˜å’Œç£ç›˜ä¹‹é—´æ¥å›æ¬è¿æ•°æ®çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”¨&lt;strong&gt;å¤§é‡çš„I/Oæ—¶é—´&lt;/strong&gt;æ¢å–äº†ç‰©ç†å†…å­˜ç©ºé—´çš„&lt;strong&gt;é«˜æ•ˆå¾ªç¯åˆ©ç”¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æƒè¡¡ä¸ä¼˜åŒ–"&gt;âš–ï¸ æƒè¡¡ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;â€œä»¥æ—¶é—´æ¢ç©ºé—´â€å¹¶éæ²¡æœ‰ä»£ä»·ï¼Œä¸å½“çš„ä½¿ç”¨ä¼šå¯¼è‡´ç³»ç»Ÿæ€§èƒ½æ˜¾è‘—ä¸‹é™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŠ–åŠ¨ï¼ˆThrashingï¼‰ç°è±¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…çš„ç‰©ç†é¡µæ¡†å¤ªå°‘ï¼Œæ— æ³•å®¹çº³å…¶å½“å‰æ´»è·ƒçš„é¡µé¢é›†åˆï¼ˆå³å·¥ä½œé›†ï¼‰ï¼Œå°±ä¼šå¯¼è‡´è¿›ç¨‹é¢‘ç¹å‘ç”Ÿç¼ºé¡µä¸­æ–­ã€‚é¡µé¢åˆšè¢«æ¢å‡ºå¯èƒ½å¾ˆå¿«åˆéœ€è¦è¢«æ¢å…¥ï¼Œå¤§é‡çš„æ—¶é—´è¢«èŠ±åœ¨é¡µé¢çš„æ¢å…¥æ¢å‡ºä¸Šï¼Œè€Œè¿›ç¨‹æœ¬èº«å‡ ä¹æ— æ³•å‘å‰æ¨è¿›ï¼ŒCPUåˆ©ç”¨ç‡æ€¥å‰§ä¸‹é™ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºâ€œæŠ–åŠ¨â€ã€‚è¿™æ˜¯â€œæ—¶é—´æ¢ç©ºé—´â€ç­–ç•¥å¤±æ§çš„å…¸å‹è¡¨ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç¼“è§£æ—¶é—´ä»£ä»·ï¼Œç°ä»£æ“ä½œç³»ç»Ÿé‡‡ç”¨äº†å¤šç§ä¼˜åŒ–æŠ€æœ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢æ£€æµ‹ç¼“å†²åŒºï¼ˆTLBï¼‰&lt;/strong&gt;ï¼šä¸€ä¸ªç”¨äºç¼“å­˜å¸¸ç”¨é¡µè¡¨é¡¹çš„é«˜é€Ÿç¼“å­˜ï¼Œå¯ä»¥æå¤§åŠ é€Ÿåœ°å€è½¬æ¢è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–çš„é¡µé¢ç½®æ¢ç®—æ³•&lt;/strong&gt;ï¼šå¦‚Clockç®—æ³•ã€LRUçš„è¿‘ä¼¼å®ç°ç­‰ï¼ŒåŠ›æ±‚ä»¥è¾ƒå°å¼€é”€é€‰å‡ºæœ€åˆé€‚çš„ç½®æ¢é¡µé¢ï¼Œå‡å°‘æœªæ¥ç¼ºé¡µçš„å‘ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œé›†æ¨¡å‹ä¸ç¼ºé¡µç‡è°ƒæ•´&lt;/strong&gt;ï¼šæ“ä½œç³»ç»Ÿä¼šåŠ¨æ€ç›‘æµ‹è¿›ç¨‹çš„ç¼ºé¡µç‡ï¼Œå¹¶æ®æ­¤è°ƒæ•´åˆ†é…ç»™å®ƒçš„ç‰©ç†é¡µæ¡†æ•°é‡ï¼Œè¯•å›¾å°†ç¼ºé¡µç‡ç»´æŒåœ¨ä¸€ä¸ªåˆç†æ°´å¹³ï¼Œé¿å…æŠ–åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œè™šæ‹Ÿå†…å­˜çš„â€œä»¥æ—¶é—´æ¢ç©ºé—´â€æ˜¯ä¸€ç§æ·±åˆ»çš„è®¾è®¡æƒè¡¡ã€‚å®ƒé€šè¿‡å·§å¦™åœ°åˆ©ç”¨ç¨‹åºè¿è¡Œçš„&lt;strong&gt;å±€éƒ¨æ€§åŸç†&lt;/strong&gt;ï¼Œè®©å¤§å¤šæ•°æƒ…å†µä¸‹å¯¹â€œæ—¶é—´â€çš„æ¶ˆè€—æ§åˆ¶åœ¨å¯æ¥å—èŒƒå›´å†…ï¼Œä»è€ŒæˆåŠŸåœ°ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªè¿‘ä¹æ— é™çš„ã€æ˜“äºç®¡ç†çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ˜¯ç°ä»£å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿèƒ½å¤Ÿé¡ºç•…è¿è¡Œçš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£è¿™ä¸€æ ¸å¿ƒæ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id="spooling"&gt;spooling
&lt;/h2&gt;&lt;p&gt;SPOOLing æŠ€æœ¯æ˜¯ä¸€é¡¹ç»å…¸ä¸”å®ç”¨çš„ç³»ç»Ÿèµ„æºè°ƒåº¦æŠ€æœ¯ï¼Œä¸‹é¢è¿™å¼ è¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SPOOLing æŠ€æœ¯çš„å…³é”®ä¿¡æ¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¨ç§°ä¸åˆ«å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Simultaneous Peripheral Operations On-Line / å‡è„±æœºæŠ€æœ¯ã€æ’é˜Ÿè½¬å‚¨æŠ€æœ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§£å†³é«˜é€ŸCPUä¸ä½é€ŸI/Oè®¾å¤‡ä¹‹é—´çš„é€Ÿåº¦ä¸åŒ¹é…çŸ›ç›¾ï¼Œå°†ç‹¬å è®¾å¤‡æ”¹é€ ä¸ºå…±äº«è®¾å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç»„ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾“å…¥äº•/è¾“å‡ºäº•ï¼ˆç£ç›˜åŒºåŸŸï¼‰ã€è¾“å…¥/è¾“å‡ºç¼“å†²åŒºï¼ˆå†…å­˜åŒºåŸŸï¼‰ã€è¾“å…¥/è¾“å‡ºç®¡ç†è¿›ç¨‹ï¼ˆä¸“ç”¨è½¯ä»¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¸ç›´æ¥ä¸æ…¢é€Ÿå¤–è®¾äº¤äº’ï¼Œè€Œæ˜¯å…ˆåœ¨é«˜é€Ÿç£ç›˜ï¼ˆäº•ï¼‰ä¸­ç¼“å†²ï¼Œç”±åå°è¿›ç¨‹å¼‚æ­¥å®Œæˆå®é™…I/Oæ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨æ•ˆæœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°äº†è®¾å¤‡çš„è™šæ‹ŸåŒ–ï¼Œè®©æ¯ä¸ªç”¨æˆ·è¿›ç¨‹éƒ½æ„Ÿè§‰è‡ªå·±ç‹¬å äº†ä¸€å°è®¾å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰“å°æœºå…±äº«ã€æ‰¹å¤„ç†ä½œä¸šè°ƒåº¦ã€æ•°æ®åº“æŠ¥è¡¨ç”Ÿæˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸æ ¸å¿ƒç»„ä»¶"&gt;ğŸ” å·¥ä½œåŸç†ä¸æ ¸å¿ƒç»„ä»¶
&lt;/h3&gt;&lt;p&gt;SPOOLingç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹æ­¥éª¤ï¼Œä¸‹å›¾ç›´è§‚å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[åº”ç”¨ç¨‹åºå‘å‡ºI/Oè¯·æ±‚] --&amp;gt; B[æ•°æ®å†™å…¥ç£ç›˜&amp;lt;br&amp;gt;è¾“å…¥äº•/è¾“å‡ºäº•]
B --&amp;gt; C[ç®¡ç†è¿›ç¨‹è¿›è¡Œ&amp;lt;br&amp;gt;æ’é˜Ÿä¸è°ƒåº¦]
C --&amp;gt; D[åå°è¿›ç¨‹å°†æ•°æ®&amp;lt;br&amp;gt;ä¼ è¾“è‡³ç‰©ç†è®¾å¤‡]
D --&amp;gt; E[ç‰©ç†è®¾å¤‡&amp;lt;br&amp;gt;å¤„ç†æ•°æ®]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹ä¾èµ–äºä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶çš„ååŒå·¥ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥äº•å’Œè¾“å‡ºäº•&lt;/strong&gt;ï¼šè¿™æ˜¯åœ¨&lt;strong&gt;ç£ç›˜&lt;/strong&gt;ä¸Šå¼€è¾Ÿçš„ä¸¤ä¸ªå¤§å‹å­˜å‚¨åŒºåŸŸï¼Œåˆ†åˆ«ç”¨äºæš‚å­˜å¾…è¾“å…¥çš„ä½œä¸šæ•°æ®å’Œå¾…è¾“å‡ºçš„ç»“æœæ•°æ®ã€‚å®ƒä»¬æ˜¯å®ç°â€œè„±æœºâ€æ•ˆæœçš„å…³é”®ï¼Œæ‰€æœ‰I/Oæ“ä½œéƒ½å…ˆåœ¨è¿™é‡Œé«˜é€Ÿå®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥ç¼“å†²åŒºå’Œè¾“å‡ºç¼“å†²åŒº&lt;/strong&gt;ï¼šè¿™æ˜¯åœ¨&lt;strong&gt;å†…å­˜&lt;/strong&gt;ä¸­å¼€è¾Ÿçš„è¾ƒå°åŒºåŸŸï¼Œç”¨äºåœ¨ç£ç›˜ï¼ˆäº•ï¼‰å’Œç‰©ç†I/Oè®¾å¤‡ä¹‹é—´è¿›è¡Œæ•°æ®ä¸­è½¬ï¼Œä»¥è¿›ä¸€æ­¥å¹³æ»‘æ•°æ®æµã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥è¿›ç¨‹å’Œè¾“å‡ºè¿›ç¨‹&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸¤ä¸ªå¸¸é©»å†…å­˜çš„&lt;strong&gt;åå°å®ˆæŠ¤è¿›ç¨‹&lt;/strong&gt;ï¼ˆDaemonï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥è¿›ç¨‹&lt;/strong&gt;è´Ÿè´£æ§åˆ¶è¾“å…¥è®¾å¤‡ï¼Œå°†ç”¨æˆ·æäº¤çš„ä½œä¸šæ•°æ®é¢„å…ˆè¯»å…¥åˆ°è¾“å…¥äº•ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å‡ºè¿›ç¨‹&lt;/strong&gt;è´Ÿè´£ç®¡ç†è¾“å‡ºè®¾å¤‡ï¼Œå°†è¾“å‡ºäº•ä¸­çš„ç»“æœæ•°æ®æŒ‰é¡ºåºä¼ é€’ç»™å®é™…çš„ç‰©ç†è®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºï¼‰è¿›è¡Œè¾“å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æŠ€æœ¯ç‰¹ç‚¹ä¸ä¼˜åŠ¿"&gt;ğŸ’¡ æŠ€æœ¯ç‰¹ç‚¹ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;SPOOLingæŠ€æœ¯é€šè¿‡ç‹¬ç‰¹çš„æœºåˆ¶ï¼Œå¸¦æ¥äº†å¤šæ–¹é¢çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æé«˜I/Oé€Ÿåº¦&lt;/strong&gt;ï¼šå°†å¯¹ä½é€Ÿè®¾å¤‡çš„æ“ä½œè½¬å˜ä¸ºå¯¹ç£ç›˜äº•çš„æ“ä½œï¼Œé€Ÿåº¦å¤§å¤§æå‡ï¼Œæœ‰æ•ˆç¼“å’Œäº†CPUä¸I/Oè®¾å¤‡é—´çš„é€Ÿåº¦çŸ›ç›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°†ç‹¬å è®¾å¤‡æ”¹é€ ä¸ºå…±äº«è®¾å¤‡&lt;/strong&gt;ï¼šè¿™æ˜¯SPOOLingæœ€æ ¸å¿ƒçš„åŠŸèƒ½ä¹‹ä¸€ã€‚åƒæ‰“å°æœºè¿™ç±»è®¾å¤‡æœ¬è´¨ä¸Šæ˜¯ç‹¬å çš„ï¼Œä½†SPOOLingç³»ç»Ÿé€šè¿‡ä¸ºæ¯ä¸ªè¿›ç¨‹åœ¨ç£ç›˜ä¸Šåˆ†é…å­˜å‚¨ç©ºé—´å’ŒI/Oè¯·æ±‚è¡¨ï¼Œè®©å¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶æäº¤æ‰“å°ä»»åŠ¡ï¼Œä»è€Œâ€œè™šæ‹Ÿâ€å‡ºäº†å¤šå°æ‰“å°æœºï¼Œå®ç°äº†ç‰©ç†è®¾å¤‡çš„å…±äº«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ•°æ®æ··ä¹±å’Œå†²çª&lt;/strong&gt;ï¼šé€šè¿‡é˜Ÿåˆ—æœºåˆ¶ï¼ˆå¦‚å…ˆæ¥å…ˆæœåŠ¡ï¼‰ï¼Œç³»ç»Ÿèƒ½å¤Ÿæœ‰åºåœ°å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œç¡®ä¿æ¯ä¸ªä»»åŠ¡éƒ½èƒ½è¢«æ­£ç¡®ã€å®Œæ•´åœ°æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸŒ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰“å°ä»»åŠ¡ç®¡ç†ï¼ˆæ‰“å°å‡è„±æœºï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯SPOOLingæŠ€æœ¯æœ€ç»å…¸å’Œå¸¸è§çš„åº”ç”¨ã€‚å½“ä½ ç‚¹å‡»â€œæ‰“å°â€åï¼Œæ–‡æ¡£å¹¶ä¸ä¼šç›´æ¥å‘é€ç»™æ‰“å°æœºï¼Œè€Œæ˜¯è¢«æ“ä½œç³»ç»Ÿç”Ÿæˆä¸€ä¸ªæ‰“å°æ–‡ä»¶ï¼Œå­˜å…¥ç£ç›˜çš„æ‰“å°é˜Ÿåˆ—ï¼ˆè¾“å‡ºäº•ï¼‰ã€‚æ‰“å°å®ˆæŠ¤è¿›ç¨‹ä¼šæŒ‰é¡ºåºå°†é˜Ÿåˆ—ä¸­çš„æ–‡æ¡£å‘é€ç»™æ‰“å°æœºã€‚è¿™æ ·ï¼Œä½ å¯ä»¥ç«‹å³ç»§ç»­å·¥ä½œï¼Œè€Œæ— éœ€ç­‰å¾…æ–‡æ¡£æ‰“å°å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰¹å¤„ç†ç³»ç»Ÿ&lt;/strong&gt;ï¼šåœ¨æ—©æœŸçš„å¤§å‹æœºæˆ–ç°ä»£çš„æ•°æ®å¤„ç†ä¸­ï¼Œç”¨æˆ·å¯ä»¥å°†å¤§é‡ä½œä¸šï¼ˆå¦‚æ•°æ®è®¡ç®—ã€æŠ¥è¡¨ç”Ÿæˆï¼‰æäº¤åˆ°ç³»ç»Ÿçš„è¾“å…¥äº•ã€‚ç³»ç»Ÿä¼šæŒ‰é¡ºåºè‡ªåŠ¨è°ƒåº¦å¤„ç†è¿™äº›ä½œä¸šï¼Œè€Œæ— éœ€ç”¨æˆ·æ¯ä¸ªä½œä¸šéƒ½è¿›è¡Œå¹²é¢„ï¼Œæå¤§åœ°æé«˜äº†ç³»ç»Ÿååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–åº”ç”¨&lt;/strong&gt;ï¼šè¯¥æŠ€æœ¯çš„æ€æƒ³ä¹Ÿå¹¿æ³›åº”ç”¨äºæ•°æ®åº“ç®¡ç†ï¼ˆç¼“å­˜æŸ¥è¯¢ç»“æœï¼‰ã€åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä»»åŠ¡åˆ†å‘ç­‰é¢†åŸŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å±€é™æ€§ä¸ç°ä»£æ„ä¹‰"&gt;âš ï¸ å±€é™æ€§ä¸ç°ä»£æ„ä¹‰
&lt;/h3&gt;&lt;p&gt;å°½ç®¡å¼ºå¤§ï¼ŒSPOOLingæŠ€æœ¯ä¹Ÿæœ‰å…¶å±€é™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;ï¼šå®ƒéœ€è¦å ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ä½œä¸ºè¾“å…¥/è¾“å‡ºäº•ï¼ŒåŒæ—¶è¿è¡Œå®ˆæŠ¤è¿›ç¨‹ä¹Ÿä¼šæ¶ˆè€—ä¸€å®šçš„å†…å­˜å’ŒCPUèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ½œåœ¨å»¶è¿Ÿ&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦æä½å»¶è¿Ÿçš„å®æ—¶ä»»åŠ¡ï¼Œæ•°æ®åœ¨äº•ä¸­æ’é˜Ÿå’Œè½¬å‚¨çš„è¿‡ç¨‹å¯èƒ½ä¼šå¼•å…¥ä¸å¯æ¥å—çš„å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚æ€§&lt;/strong&gt;ï¼šå®ç°ä¸€ä¸ªå®Œæ•´çš„SPOOLingç³»ç»Ÿå¢åŠ äº†æ“ä½œç³»ç»Ÿçš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶è€Œï¼Œå…¶æ ¸å¿ƒæ€æƒ³â€”â€”&lt;strong&gt;â€œç¼“å†²â€å’Œâ€œå¼‚æ­¥å¤„ç†â€â€”â€”å·²æˆä¸ºç°ä»£è®¡ç®—ç³»ç»Ÿè®¾è®¡çš„åŸºçŸ³&lt;/strong&gt;ã€‚ä»ç½‘ç»œæ•°æ®åŒ…çš„å¤„ç†åˆ°äº‘è®¡ç®—ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½ éƒ½èƒ½çœ‹åˆ°SPOOLingæ€æƒ³çš„å½±å­ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£SPOOLingæŠ€æœ¯ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯æˆ–æŠ€æœ¯ç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="raid"&gt;RAID
&lt;/h2&gt;&lt;p&gt;RAIDï¼ˆç‹¬ç«‹ç£ç›˜å†—ä½™é˜µåˆ—ï¼‰æ˜¯ä¸€é¡¹æ ¸å¿ƒçš„å­˜å‚¨æŠ€æœ¯ï¼Œé€šè¿‡å°†å¤šå—ç‰©ç†ç£ç›˜ç»„åˆæˆä¸€ä¸ªé€»è¾‘å•å…ƒï¼Œæ—¨åœ¨æå‡å­˜å‚¨ç³»ç»Ÿçš„æ€§èƒ½ã€å¯é æ€§å’Œå®¹é‡ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼æ±‡æ€»äº†å¸¸è§RAIDçº§åˆ«çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå¯ä»¥å¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;RAIDçº§åˆ«&lt;/th&gt;
&lt;th&gt;æœ€ä½ç£ç›˜æ•°&lt;/th&gt;
&lt;th&gt;å®¹é‡åˆ©ç”¨ç‡&lt;/th&gt;
&lt;th&gt;è¯»æ€§èƒ½&lt;/th&gt;
&lt;th&gt;å†™æ€§èƒ½&lt;/th&gt;
&lt;th&gt;å®‰å…¨æ€§ï¼ˆå®¹é”™èƒ½åŠ›ï¼‰&lt;/th&gt;
&lt;th&gt;å…³é”®ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RAID 0&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;100%&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;æ— ï¼ˆä½ï¼‰&lt;/td&gt;
&lt;td&gt;çº¯æ€§èƒ½å¯¼å‘ï¼Œä¸€å—ç£ç›˜æŸåå³å¯¼è‡´å…¨éƒ¨æ•°æ®ä¸¢å¤±ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RAID 1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;50%&lt;/td&gt;
&lt;td&gt;ä¸­ç­‰&lt;/td&gt;
&lt;td&gt;ä¸­ç­‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå…è®¸1å—ç£ç›˜æ•…éšœï¼‰&lt;/td&gt;
&lt;td&gt;é€šè¿‡ç£ç›˜é•œåƒæä¾›æ•°æ®å†—ä½™ï¼Œæ•°æ®å®‰å…¨æ€§é«˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RAID 5&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;(n-1)/n&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;è¾ƒä½&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå…è®¸1å—ç£ç›˜æ•…éšœï¼‰&lt;/td&gt;
&lt;td&gt;å…¼é¡¾æ€§èƒ½ã€å®¹é‡å’Œå®‰å…¨çš„å‡è¡¡æ–¹æ¡ˆï¼Œé‡‡ç”¨åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RAID 6&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;(n-2)/n&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;éå¸¸é«˜ï¼ˆå…è®¸2å—ç£ç›˜æ•…éšœï¼‰&lt;/td&gt;
&lt;td&gt;åŒå¥‡å¶æ ¡éªŒï¼Œæä¾›æ›´é«˜å®¹é”™èƒ½åŠ›ï¼Œä½†å†™æ€§èƒ½è¾ƒä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RAID 10&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;50%&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä¸­ç­‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå…è®¸åŠæ•°ç£ç›˜æ•…éšœï¼Œç‰¹å®šæ¡ä»¶ï¼‰&lt;/td&gt;
&lt;td&gt;RAID 1ï¼ˆé•œåƒï¼‰ä¸RAID 0ï¼ˆæ¡å¸¦ï¼‰çš„ç»„åˆï¼Œå…¼é¡¾é€Ÿåº¦å’Œå®‰å…¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-raidçš„æ ¸å¿ƒæŠ€æœ¯ä¸ä»·å€¼"&gt;ğŸ’½ RAIDçš„æ ¸å¿ƒæŠ€æœ¯ä¸ä»·å€¼
&lt;/h3&gt;&lt;p&gt;RAIDæŠ€æœ¯ä¸»è¦åŸºäºä¸‰ç§å…³é”®æŠ€æœ¯å®ç°å…¶ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¡å¸¦åŒ–&lt;/strong&gt;ï¼šè¿™æ˜¯RAID 0çš„åŸºç¡€ã€‚æ•°æ®è¢«åˆ†å‰²æˆå°å—ï¼ˆæ¡å¸¦ï¼‰ï¼Œç„¶åè½®æµå†™å…¥å¤šä¸ªç£ç›˜ã€‚è¿™ä½¿å¾—è¯»å†™æ“ä½œå¯ä»¥åœ¨æ‰€æœ‰ç£ç›˜ä¸Šå¹¶è¡Œè¿›è¡Œï¼Œä»è€Œ&lt;strong&gt;æ˜¾è‘—æå‡æ•°æ®ä¼ è¾“é€Ÿç‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç£ç›˜é•œåƒ&lt;/strong&gt;ï¼šè¿™æ˜¯RAID 1çš„åŸºç¡€ã€‚å°†ç›¸åŒçš„æ•°æ®åŒæ—¶å†™å…¥ä¸¤å—æˆ–æ›´å¤šçš„ç£ç›˜ï¼Œå½¢æˆå®Œå…¨çš„å‰¯æœ¬ã€‚è¿™æä¾›äº†æé«˜çš„&lt;strong&gt;æ•°æ®å†—ä½™æ€§&lt;/strong&gt;ï¼Œä¸€æ—¦ä¸€ä¸ªç£ç›˜æ•…éšœï¼Œç³»ç»Ÿå¯ä»¥ç«‹å³åˆ‡æ¢åˆ°é•œåƒç£ç›˜å·¥ä½œï¼Œå®ç°æ•…éšœå®¹é”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ ¡éªŒ&lt;/strong&gt;ï¼šç”¨äºRAID 5ã€RAID 6ç­‰çº§åˆ«ã€‚é€šè¿‡è®¡ç®—å¥‡å¶æ ¡éªŒä¿¡æ¯ï¼Œå¹¶å°†å…¶ä¸æ•°æ®ä¸€èµ·åˆ†å¸ƒå­˜å‚¨åœ¨é˜µåˆ—ä¸­çš„æ‰€æœ‰ç£ç›˜ä¸Šï¼Œå½“æŸå—ç£ç›˜å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¹¸å­˜ç£ç›˜ä¸Šçš„æ•°æ®å’Œæ ¡éªŒä¿¡æ¯æ¥&lt;strong&gt;é‡å»ºä¸¢å¤±çš„æ•°æ®&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ç§ä»¥è®¡ç®—å¼€é”€æ¢å–å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡çš„å†—ä½™æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;RAIDçš„ä¸»è¦ä»·å€¼åœ¨äºï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®ä¸åŒçš„éœ€æ±‚ä¾§é‡ç‚¹ï¼ˆå¦‚æ›´çœ‹é‡é€Ÿåº¦ã€å®‰å…¨æ€§è¿˜æ˜¯æˆæœ¬æ•ˆç›Šï¼‰ï¼Œé€šè¿‡ä»¥ä¸ŠæŠ€æœ¯çš„ç»„åˆï¼Œä¸ºå„ç§åº”ç”¨åœºæ™¯æä¾›ä¼˜åŒ–çš„å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§çš„ç»„åˆraid"&gt;ğŸ”„ å¸¸è§çš„ç»„åˆRAID
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å…‹æœå•ä¸€æ ‡å‡†RAIDçº§åˆ«çš„å±€é™æ€§ï¼Œç»„åˆRAIDåº”è¿è€Œç”Ÿã€‚å®ƒä»¬é€šè¿‡å°†ä¸åŒçº§åˆ«çš„RAIDè¿›è¡ŒåµŒå¥—ï¼Œå®ç°ä¼˜åŠ¿äº’è¡¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;RAID 10ï¼ˆå…ˆé•œåƒåæ¡å¸¦ï¼‰&lt;/strong&gt;ï¼šé¦–å…ˆå°†ç£ç›˜ä¸¤ä¸¤ç»„æˆRAID 1ï¼ˆé•œåƒï¼‰ï¼Œç„¶åå°†è¿™äº›RAID 1ç»„å†ç»„æˆRAID 0ï¼ˆæ¡å¸¦ï¼‰ã€‚å®ƒåŒæ—¶æä¾›äº†RAID 1çš„é«˜å®‰å…¨æ€§å’ŒRAID 0çš„é«˜æ€§èƒ½ï¼Œè¯»å†™æ€§èƒ½éƒ½å¾ˆå¥½ã€‚ç¼ºç‚¹æ˜¯ç£ç›˜åˆ©ç”¨ç‡è¾ƒä½ï¼Œä¸º50%ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRAID 10å’ŒRAID 01ï¼ˆå…ˆæ¡å¸¦åé•œåƒï¼‰ä¸åŒï¼ŒRAID 10çš„å®¹é”™èƒ½åŠ›æ›´å¼ºï¼Œåªè¦åŒä¸€ä¸ªé•œåƒç»„å†…çš„ç£ç›˜ä¸åŒæ—¶æŸåï¼Œé˜µåˆ—å°±èƒ½æ­£å¸¸è¿è¡Œï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­è¿œæ¯”RAID 01å¸¸è§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RAID 50&lt;/strong&gt;ï¼šç”±å¤šä¸ªRAID 5å­é˜µåˆ—å†ç»„åˆæˆä¸€ä¸ªRAID 0ã€‚å®ƒåœ¨æä¾›æ¯”å•ä¸ªRAID 5æ›´å¤§å®¹é‡çš„åŒæ—¶ï¼Œæ‹¥æœ‰æ›´é«˜çš„è¯»å†™æ€§èƒ½ï¼ˆå› ä¸ºæ¡å¸¦åŒ–ç¨‹åº¦æ›´æ·±ï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªRAID 5å­é˜µåˆ—éƒ½èƒ½å®¹å¿ä¸€å—ç£ç›˜æ•…éšœã€‚é€‚ç”¨äºéœ€è¦å¤§å®¹é‡ã€é«˜è¯»å–æ€§èƒ½å’Œä¸€äº›å®¹é”™èƒ½åŠ›çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RAID 60&lt;/strong&gt;ï¼šç”±å¤šä¸ªRAID 6å­é˜µåˆ—å†ç»„åˆæˆä¸€ä¸ªRAID 0ã€‚å®ƒç»§æ‰¿äº†RAID 6çš„åŒé‡å®¹é”™èƒ½åŠ›ï¼ˆæ¯ä¸ªå­é˜µåˆ—å¯åä¸¤å—ç›˜ï¼‰ï¼ŒåŒæ—¶é€šè¿‡æ¡å¸¦åŒ–æå‡äº†æ€§èƒ½ã€‚æä¾›äº†éå¸¸é«˜çš„æ•°æ®å¯é æ€§ï¼Œä½†ç£ç›˜åˆ©ç”¨ç‡è¾ƒä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-raidçš„å®ç°æ–¹å¼"&gt;âš™ï¸ RAIDçš„å®ç°æ–¹å¼
&lt;/h3&gt;&lt;p&gt;æ ¹æ®RAIDåŠŸèƒ½ç”±ä»€ä¹ˆç¡¬ä»¶æ¥å®ç°ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬RAID&lt;/strong&gt;ï¼šé€šè¿‡ä¸“ç”¨çš„&lt;strong&gt;RAIDæ§åˆ¶å¡&lt;/strong&gt;ï¼ˆRAID Cardï¼‰æ¥å®ç°ã€‚è¯¥å¡ä¸Šæœ‰ä¸“ç”¨çš„å¤„ç†å™¨å’Œå†…å­˜ï¼Œç‹¬ç«‹ç®¡ç†RAIDè¿ç®—ï¼Œä¸å ç”¨æœåŠ¡å™¨ä¸»æœºçš„CPUå’Œå†…å­˜èµ„æºã€‚æ€§èƒ½æœ€ä½³ï¼ŒåŠŸèƒ½æœ€å…¨é¢ï¼Œä½†æˆæœ¬ä¹Ÿæœ€é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯RAID&lt;/strong&gt;ï¼šå®Œå…¨ç”±&lt;strong&gt;ä¸»æœºçš„æ“ä½œç³»ç»ŸCPU&lt;/strong&gt;é€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿå®ç°ã€‚æˆæœ¬æœ€ä½ï¼Œä½†ä¼šæ¶ˆè€—å¤§é‡ç³»ç»Ÿèµ„æºï¼Œæ€§èƒ½å’ŒåŠŸèƒ½æœ‰é™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶è¾…åŠ©RAIDæˆ–è½¯ç¡¬æ··åˆRAID&lt;/strong&gt;ï¼šæŠ˜ä¸­æ–¹æ¡ˆã€‚é€šå¸¸ä¸»æ¿èŠ¯ç‰‡ç»„é›†æˆä¸€ä¸ªåŸºç¡€RAIDæ§åˆ¶å™¨ï¼ˆä½†æ— ä¸“ç”¨I/Oå¤„ç†å™¨ï¼‰ï¼Œä»éœ€é©±åŠ¨ç¨‹åºå’Œéƒ¨åˆ†CPUå‚ä¸è®¡ç®—ã€‚æ€§èƒ½å’Œæˆæœ¬ä»‹äºç¡¬RAIDå’Œè½¯RAIDä¹‹é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;åœ¨é€‰æ‹©RAIDçº§åˆ«æ—¶ï¼Œå…³é”®åœ¨äºæƒè¡¡&lt;strong&gt;æ€§èƒ½ã€å®¹é‡ã€æ•°æ®å®‰å…¨æ€§å’Œæˆæœ¬&lt;/strong&gt;è¿™å‡ å¤§å› ç´ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿½æ±‚&lt;strong&gt;æè‡´æ€§èƒ½&lt;/strong&gt;ä¸”å¯æ¥å—æ•°æ®ä¸¢å¤±é£é™©ï¼ˆå¦‚ç¼“å­˜ã€ä¸´æ—¶æ–‡ä»¶ï¼‰ï¼Œå¯é€‰RAID 0ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;æé«˜æ•°æ®å®‰å…¨æ€§&lt;/strong&gt;ï¼ˆå¦‚æ“ä½œç³»ç»Ÿç›˜ã€å…³é”®æ•°æ®åº“ï¼‰ï¼ŒRAID 1æˆ–RAID 10æ˜¯å¯é é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;å¸Œæœ›&lt;strong&gt;å¹³è¡¡å®¹é‡ã€æ€§èƒ½å’Œå®‰å…¨&lt;/strong&gt;ï¼ˆå¦‚æ–‡ä»¶æœåŠ¡å™¨ã€åº”ç”¨æœåŠ¡å™¨ï¼‰ï¼ŒRAID 5æ˜¯ç»å…¸æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;è¦æ±‚&lt;strong&gt;æ›´é«˜çº§åˆ«å®¹é”™&lt;/strong&gt;ï¼ˆå¦‚å½’æ¡£å­˜å‚¨ã€å¤§å®¹é‡æœåŠ¡å™¨ï¼‰ï¼Œå¯è€ƒè™‘RAID 6æˆ–RAID 60ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;ä¼ä¸šå…³é”®åº”ç”¨&lt;/strong&gt;ï¼Œé€šå¸¸å»ºè®®é€‰æ‹©ç¡¬RAIDæ–¹æ¡ˆä»¥è·å¾—æœ€ä½³æ€§èƒ½å’Œå¯é æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£RAIDæŠ€æœ¯ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨æœ€é€‚åˆçš„RAIDæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id="endian"&gt;Endian
&lt;/h2&gt;&lt;p&gt;å¤§ç«¯åºï¼ˆBig Endianï¼‰å’Œå°ç«¯åºï¼ˆLittle Endianï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„å¤šå­—èŠ‚æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜å‚¨è§„åˆ™ï¼Œç†è§£å®ƒä»¬çš„åŒºåˆ«å¯¹å¤„ç†æ•°æ®å­˜å‚¨ã€ç½‘ç»œé€šä¿¡å’Œè·¨å¹³å°å¼€å‘è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨ç›´è§‚åœ°å±•ç¤ºäº†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;å¤§ç«¯åº (Big Endian)&lt;/th&gt;
&lt;th&gt;å°ç«¯åº (Little Endian)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒè§„åˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ä½å­—èŠ‚å­˜å‚¨åœ¨ä½åœ°å€&lt;/td&gt;
&lt;td&gt;ä½ä½å­—èŠ‚å­˜å‚¨åœ¨ä½åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äººç±»å¯è¯»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œä¸ä¹¦å†™ä¹ æƒ¯ä¸€è‡´ï¼ˆå¦‚&lt;code&gt;0x1234&lt;/code&gt;å­˜ä¸º&lt;code&gt;12 34&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œä¸ä¹¦å†™ä¹ æƒ¯ç›¸åï¼ˆå¦‚&lt;code&gt;0x1234&lt;/code&gt;å­˜ä¸º&lt;code&gt;34 12&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¦å·ä½åˆ¤æ–­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿«&lt;/strong&gt;ï¼Œç¬¦å·ä½ï¼ˆæœ€é«˜ä½ï¼‰åœ¨ç¬¬ä¸€ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ…¢&lt;/strong&gt;ï¼Œéœ€è¦æ‰¾åˆ°é«˜åœ°å€å­—èŠ‚æ‰èƒ½åˆ¤æ–­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;PowerPC, IBM, Sun SPARC, æ—©æœŸMac&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸»æµ&lt;/strong&gt;ï¼šIntel x86, x64, AMD, &lt;strong&gt;å¤šæ•°ARM&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œåè®®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡†&lt;/strong&gt;ï¼ˆç½‘ç»œå­—èŠ‚åºï¼‰ï¼Œç›´æ¥ä½¿ç”¨&lt;/td&gt;
&lt;td&gt;éœ€è½¬æ¢ä¸ºå¤§ç«¯åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»å‹è½¬æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦è°ƒæ•´å­—èŠ‚&lt;/td&gt;
&lt;td&gt;ä½å­—èŠ‚åœ°å€ä¸å˜ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢æ–¹ä¾¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ‰©å±•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠ¨æ€æ‰©å±•æ•°æ®æ—¶æ•ˆç‡è¾ƒä½&lt;/td&gt;
&lt;td&gt;åŠ¨æ€æ‰©å±•æ•°æ®ï¼ˆå¦‚å¤§æ•´æ•°è¿ç®—ï¼‰æ•ˆç‡é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬æ¦‚å¿µä¸å†…å­˜å¸ƒå±€"&gt;ğŸ’¾ åŸºæœ¬æ¦‚å¿µä¸å†…å­˜å¸ƒå±€
&lt;/h3&gt;&lt;p&gt;å­—èŠ‚åºçš„é—®é¢˜æºäºè®¡ç®—æœºä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œå¯»å€ï¼Œä½†å¯¹äºå¦‚16ä½ï¼ˆshortï¼‰ã€32ä½ï¼ˆintï¼‰ç­‰å¤šå­—èŠ‚æ•°æ®ï¼Œéœ€è¦å†³å®šå…¶å„ä¸ªå­—èŠ‚åœ¨å†…å­˜ä¸­çš„æ’åˆ—é¡ºåºã€‚&lt;/p&gt;
&lt;p&gt;ä»¥32ä½æ•´æ•° &lt;code&gt;0x12345678&lt;/code&gt;ä¸ºä¾‹ï¼Œå…¶æœ€é«˜æœ‰æ•ˆå­—èŠ‚ï¼ˆMSBï¼‰æ˜¯&lt;code&gt;0x12&lt;/code&gt;ï¼Œæœ€ä½æœ‰æ•ˆå­—èŠ‚ï¼ˆLSBï¼‰æ˜¯&lt;code&gt;0x78&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤§ç«¯åº&lt;/strong&gt;ï¼š&lt;strong&gt;é«˜&lt;/strong&gt;ä½å­—èŠ‚å­˜å…¥&lt;strong&gt;ä½&lt;/strong&gt;åœ°å€ã€‚è¿™ç±»ä¼¼äºæˆ‘ä»¬é˜…è¯»å’Œä¹¦å†™æ•°å­—çš„é¡ºåºï¼Œä»å·¦ï¼ˆé«˜ä½ï¼‰åˆ°å³ï¼ˆä½ä½ï¼‰ã€‚å†…å­˜å¸ƒå±€å¦‚ä¸‹ï¼ˆä»ä½åœ°å€åˆ°é«˜åœ°å€ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;åœ°å€ï¼š0x1000 | 0x1001 | 0x1002 | 0x1003
æ•°æ®ï¼š 0x12 | 0x34 | 0x56 | 0x78
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°ç«¯åº&lt;/strong&gt;ï¼š&lt;strong&gt;ä½&lt;/strong&gt;ä½å­—èŠ‚å­˜å…¥&lt;strong&gt;ä½&lt;/strong&gt;åœ°å€ã€‚è¿™ç§é¡ºåºä¸æˆ‘ä»¬çš„é˜…è¯»ä¹ æƒ¯ç›¸åï¼Œä½†ç¡¬ä»¶å¤„ç†æ—¶é€šå¸¸æ›´é«˜æ•ˆã€‚å†…å­˜å¸ƒå±€å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;åœ°å€ï¼š0x1000 | 0x1001 | 0x1002 | 0x1003
æ•°æ®ï¼š 0x78 | 0x56 | 0x34 | 0x12
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;ä¸¤ç§å­—èŠ‚åºå„æœ‰ä¼˜åŠ£ï¼Œå…¶å­˜åœ¨æœ‰å†å²å’Œç°å®åŸå› ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤§ç«¯åºçš„ä¼˜åŠ¿ä¸åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›´è§‚æ˜“è¯»&lt;/strong&gt;ï¼šå†…å­˜æ•°æ®è½¬å‚¨åï¼Œå…¶æ’åˆ—é¡ºåºä¸æ•°å€¼çš„åå…­è¿›åˆ¶è¡¨ç¤ºå®Œå…¨ä¸€è‡´ï¼Œä¾¿äºäººå·¥è°ƒè¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œä¼ è¾“æ ‡å‡†&lt;/strong&gt;ï¼š&lt;strong&gt;TCP/IPåè®®æ—&lt;/strong&gt;ç­‰ç½‘ç»œåè®®è§„å®šä½¿ç”¨å¤§ç«¯åºä½œä¸º&lt;strong&gt;ç½‘ç»œå­—èŠ‚åº&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå¤§ç«¯åºè®¾å¤‡åœ¨ç½‘ç»œé€šä¿¡æ—¶æ— éœ€è½¬æ¢ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿«é€Ÿåˆ¤æ–­ç¬¦å·å’Œå¤§å°&lt;/strong&gt;ï¼šç”±äºæœ€é«˜æœ‰æ•ˆå­—èŠ‚åœ¨å‰ï¼Œèƒ½æ›´å¿«åœ°åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯æ­£è¿˜æ˜¯è´Ÿï¼Œæˆ–è€…æ¯”è¾ƒä¸¤ä¸ªæ•°çš„å¤§å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°ç«¯åºçš„ä¼˜åŠ¿ä¸åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶å¤„ç†é«˜æ•ˆ&lt;/strong&gt;ï¼šCPUè¿›è¡Œç®—æœ¯è¿ç®—ï¼ˆå¦‚åŠ æ³•ã€ä¹˜æ³•ï¼‰é€šå¸¸ä»æœ€ä½ä½å¼€å§‹ï¼Œå°ç«¯åºä½¿å¾—ä½å­—èŠ‚åœ¨ä½åœ°å€ï¼Œä¾¿äºç¡¬ä»¶ç”µè·¯è®¾è®¡ï¼Œå‡å°‘æŒ‡ä»¤å‘¨æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»çš„ç±»å‹è½¬æ¢&lt;/strong&gt;ï¼šå½“å°†32ä½æ•´æ•°å¼ºåˆ¶è½¬æ¢ä¸º16ä½æ•´æ•°æ—¶ï¼Œç”±äºä½åœ°å€å­˜å‚¨çš„å°±æ˜¯ä½ä½æ•°æ®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€è°ƒæ•´åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»æµæ¶æ„æ”¯æŒ&lt;/strong&gt;ï¼š&lt;strong&gt;x86/x64æ¶æ„&lt;/strong&gt;ï¼ˆIntel/AMD CPUï¼‰å’Œé»˜è®¤çŠ¶æ€ä¸‹çš„&lt;strong&gt;å¤šæ•°ARMå¤„ç†å™¨&lt;/strong&gt;éƒ½é‡‡ç”¨å°ç«¯åºï¼Œè¿™ä½¿å¾—å°ç«¯åºæˆä¸ºç°ä»£è®¡ç®—æœºå’Œç§»åŠ¨è®¾å¤‡çš„ä¸»æµã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸ç¼–ç¨‹å¤„ç†"&gt;ğŸ”§ å®é™…åº”ç”¨ä¸ç¼–ç¨‹å¤„ç†
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘ç»œç¼–ç¨‹å’Œè·¨å¹³å°æ•°æ®äº¤æ¢æ—¶ï¼Œå¿…é¡»è€ƒè™‘å­—èŠ‚åºé—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç½‘ç»œç¼–ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯ä¸åŒå­—èŠ‚åºçš„è®¾å¤‡èƒ½æ­£ç¡®é€šä¿¡ï¼Œè§„åˆ™æ˜¯ï¼š&lt;strong&gt;å‘é€å‰å°†æ•°æ®ä»ä¸»æœºå­—èŠ‚åºè½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚åºï¼ˆå¤§ç«¯åºï¼‰ï¼Œæ¥æ”¶åå†è½¬æ¢å›ä¸»æœºå­—èŠ‚åº&lt;/strong&gt;ã€‚åœ¨Cè¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç»„æ ‡å‡†å‡½æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;htons()&lt;/code&gt;ï¼šå°†16ä½çŸ­æ•´å‹ä»ä¸»æœºåºè½¬æ¢åˆ°ç½‘ç»œåºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;htonl()&lt;/code&gt;ï¼šå°†32ä½é•¿æ•´å‹ä»ä¸»æœºåºè½¬æ¢åˆ°ç½‘ç»œåºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ntohs()&lt;/code&gt;ï¼šå°†16ä½çŸ­æ•´å‹ä»ç½‘ç»œåºè½¬æ¢åˆ°ä¸»æœºåºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ntohl()&lt;/code&gt;ï¼šå°†32ä½é•¿æ•´å‹ä»ç½‘ç»œåºè½¬æ¢åˆ°ä¸»æœºåºã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå°ç«¯ä¸»æœºï¼Œè¿™äº›å‡½æ•°ä¼šè¿›è¡Œå­—èŠ‚äº¤æ¢ï¼›å¯¹äºå¤§ç«¯ä¸»æœºï¼Œåˆ™å¯èƒ½å®šä¹‰ä¸ºç©ºæ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­ç³»ç»Ÿå­—èŠ‚åº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨C/C++ä¸­ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„ä»£ç åˆ¤æ–­å½“å‰ç³»ç»Ÿçš„å­—èŠ‚åºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
int main() {
int num = 1;
// å°†intæŒ‡é’ˆå¼ºåˆ¶è½¬æ¢ä¸ºcharæŒ‡é’ˆï¼Œå–ä½åœ°å€çš„ä¸€ä¸ªå­—èŠ‚
if (*(char *)&amp;amp;num == 1) {
printf(&amp;#34;Little-Endian\n&amp;#34;);
} else {
printf(&amp;#34;Big-Endian\n&amp;#34;);
}
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶åŸç†æ˜¯ï¼šå¦‚æœç³»ç»Ÿæ˜¯å°ç«¯åºï¼Œæ•°å­—&lt;code&gt;1&lt;/code&gt;ï¼ˆä½å­—èŠ‚æ˜¯&lt;code&gt;0x01&lt;/code&gt;ï¼‰çš„ä½åœ°å€å­—èŠ‚å°±æ˜¯&lt;code&gt;1&lt;/code&gt;ï¼›å¦‚æœæ˜¯å¤§ç«¯åºï¼Œä½åœ°å€å­—èŠ‚æ˜¯&lt;code&gt;0&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ–‡ä»¶æ ¼å¼ä¸æ•°æ®äº¤æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€äº›è·¨å¹³å°çš„æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚PNGã€JPEGï¼‰ä¼šæ˜ç¡®è§„å®šå…¶æ•°æ®çš„å­—èŠ‚åºã€‚åœ¨è¯»å†™è¿™ç±»äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–åœ¨ä¸åŒæ¶æ„çš„è®¾å¤‡é—´ä¼ é€’æ•°æ®æ—¶ï¼Œéœ€è¦æ˜ç¡®çº¦å®šå¹¶å¤„ç†å­—èŠ‚åºï¼Œé€šå¸¸çš„åšæ³•æ˜¯çº¦å®šä½¿ç”¨ä¸€ç§å›ºå®šçš„å­—èŠ‚åºï¼ˆå¦‚å¤§ç«¯åºï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æ ¸å¿ƒå»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸æ ¸å¿ƒå»ºè®®
&lt;/h3&gt;&lt;p&gt;å¤§ç«¯åºå’Œå°ç«¯åºæ˜¯è®¡ç®—æœºç³»ç»Ÿåº•å±‚çš„è®¾è®¡é€‰æ‹©ï¼Œæ— ç»å¯¹ä¼˜åŠ£ä¹‹åˆ†ã€‚å…³é”®åœ¨äºæ„è¯†åˆ°å®ƒä»¬çš„å­˜åœ¨ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ­£ç¡®å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒå»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•æœºå¤„ç†æœ¬åœ°æ•°æ®&lt;/strong&gt;ï¼šé€šå¸¸æ— éœ€å…³å¿ƒå­—èŠ‚åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œé€šä¿¡æˆ–è·¨å¹³å°æ•°æ®äº¤æ¢&lt;/strong&gt;ï¼š&lt;strong&gt;å¿…é¡»ä½¿ç”¨ç½‘ç»œå­—èŠ‚åºï¼ˆå¤§ç«¯åºï¼‰ä½œä¸ºç»Ÿä¸€æ ‡å‡†&lt;/strong&gt;ï¼Œå¹¶åœ¨å‘é€å’Œæ¥æ”¶ç«¯ç”¨&lt;code&gt;htonl&lt;/code&gt;ç­‰å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†æ–‡ä»¶æˆ–æ•°æ®åè®®&lt;/strong&gt;ï¼šæŸ¥é˜…è§„èŒƒï¼Œæ˜ç¡®å…¶è§„å®šçš„å­—èŠ‚åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨å­—èŠ‚åºã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è¿›ç¨‹çŠ¶æ€"&gt;è¿›ç¨‹çŠ¶æ€
&lt;/h2&gt;&lt;p&gt;ç†è§£è¿›ç¨‹çš„çŠ¶æ€ä»¥åŠå®ƒä»¬å¦‚ä½•ä¸å†…å­˜ç®¡ç†é…åˆï¼Œæ˜¯æŒæ¡æ“ä½œç³»ç»Ÿå·¥ä½œåŸç†çš„å…³é”®ä¸€ç¯ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†è¿›ç¨‹çš„ä¸»è¦çŠ¶æ€åŠå…¶å†…å­˜å ç”¨æƒ…å†µï¼Œå¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤è¯†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¿›ç¨‹çŠ¶æ€&lt;/th&gt;
&lt;th&gt;æ˜¯å¦åœ¨å†…å­˜ä¸­&lt;/th&gt;
&lt;th&gt;æè¿°ä¸å†…å­˜ç®¡ç†æ–¹å¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œæ€ (Running)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ˜¯&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹æ­£åœ¨CPUä¸Šæ‰§è¡Œï¼Œå…¶ä»£ç ã€æ•°æ®å’Œå †æ ˆå¿…ç„¶å…¨éƒ¨åœ¨å†…å­˜ä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å°±ç»ªæ€ (Ready)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ˜¯&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å·²å‡†å¤‡å¥½è¿è¡Œï¼Œåªç­‰è°ƒåº¦å™¨åˆ†é…CPUã€‚æ‰€æœ‰èµ„æºä¹Ÿåœ¨å†…å­˜ä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜»å¡æ€ (Blocked)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ˜¯&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å› ç­‰å¾…äº‹ä»¶ï¼ˆå¦‚I/Oæ“ä½œï¼‰è€Œæš‚åœï¼Œå…¶å†…å­˜ç©ºé—´é€šå¸¸è¢«ä¿ç•™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ›å»ºæ€ (New)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš ï¸ éƒ¨åˆ†&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹æ­£è¢«åˆ›å»ºï¼ŒPCBå·²ç”Ÿæˆï¼Œä½†æ‰€éœ€èµ„æºå¯èƒ½è¿˜æœªå®Œå…¨åŠ è½½åˆ°å†…å­˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»ˆæ­¢æ€ (Exit)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš ï¸ éƒ¨åˆ†&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å·²ç»“æŸï¼Œé‡Šæ”¾äº†å¤§éƒ¨åˆ†èµ„æºï¼Œä½†PCBç­‰çŠ¶æ€ä¿¡æ¯ä»æš‚å­˜ï¼Œä¾›çˆ¶è¿›ç¨‹æŸ¥è¯¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‚èµ·æ€ (Suspended)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ å¦&lt;/td&gt;
&lt;td&gt;ä¸ºè…¾å‡ºå†…å­˜ï¼Œè¿›ç¨‹çš„&lt;strong&gt;æ•´ä¸ªå®ä½“è¢«äº¤æ¢åˆ°ç£ç›˜&lt;/strong&gt;ï¼Œæ­¤æ—¶ä¸åœ¨ç‰©ç†å†…å­˜ä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£è¿›ç¨‹çŠ¶æ€"&gt;ğŸ’¡ æ·±å…¥ç†è§£è¿›ç¨‹çŠ¶æ€
&lt;/h3&gt;&lt;p&gt;è¿›ç¨‹çš„çŠ¶æ€å˜è¿ç”ŸåŠ¨åœ°åˆ»ç”»äº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿä½“ç°äº†æ“ä½œç³»ç»Ÿå¦‚ä½•è¿›è¡Œè°ƒåº¦å’Œèµ„æºç®¡ç†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä¸‰æ€åŠå…¶è½¬æ¢&lt;/strong&gt;ï¼šè¿è¡Œã€å°±ç»ªã€é˜»å¡æ˜¯è¿›ç¨‹æœ€åŸºæœ¬çš„çŠ¶æ€ã€‚å®ƒä»¬ä¹‹é—´çš„è½¬æ¢ä½“ç°äº†æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒè°ƒåº¦é€»è¾‘ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å°±ç»ª â†’ è¿è¡Œ&lt;/strong&gt;ï¼šå½“CPUç©ºé—²æ—¶ï¼Œè°ƒåº¦ç¨‹åºä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ¥æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œ â†’ å°±ç»ª&lt;/strong&gt;ï¼šæœ€å¸¸è§çš„åŸå› æ˜¯è¿›ç¨‹ç”¨å®Œç³»ç»Ÿåˆ†é…ç»™å®ƒçš„æ—¶é—´ç‰‡ï¼Œæˆ–è€…æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹éœ€è¦è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œ â†’ é˜»å¡&lt;/strong&gt;ï¼šå½“è¿›ç¨‹éœ€è¦ç­‰å¾…æŸä¸ªäº‹ä»¶æ—¶ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€ç£ç›˜è¯»å–æ•°æ®ï¼‰ï¼Œå®ƒä¼šä¸»åŠ¨æ”¾å¼ƒCPUã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡ â†’ å°±ç»ª&lt;/strong&gt;ï¼šå½“è¿›ç¨‹ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿï¼ˆå¦‚æ•°æ®è¯»å–å®Œæˆï¼‰ï¼Œå®ƒå°±è¢«é‡æ–°æ”¾å›å°±ç»ªé˜Ÿåˆ—ï¼Œç­‰å¾…CPUè°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‚èµ·çŠ¶æ€ï¼šå†…å­˜ä¸è¶³çš„åº”å¯¹ç­–ç•¥&lt;/strong&gt;ï¼šå½“ç³»ç»Ÿå†…å­˜èµ„æºç´§å¼ æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå¼•å…¥&lt;strong&gt;æŒ‚èµ·çŠ¶æ€&lt;/strong&gt;ã€‚å¤„äºæŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹ï¼Œå…¶æ•´ä¸ªåœ°å€ç©ºé—´ä¼šè¢«ä»å†…å­˜ç§»å‡ºï¼ˆæ¢å‡ºï¼‰åˆ°ç¡¬ç›˜çš„äº¤æ¢åŒºï¼Œä»¥é‡Šæ”¾å†…å­˜ç©ºé—´ç»™å…¶ä»–è¿›ç¨‹ä½¿ç”¨ã€‚æŒ‚èµ·çŠ¶æ€å¸¸ä¸é˜»å¡æˆ–å°±ç»ªçŠ¶æ€ç»„åˆå‡ºç°ï¼Œå½¢æˆâ€œé˜»å¡æŒ‚èµ·â€å’Œâ€œå°±ç»ªæŒ‚èµ·â€ã€‚å½“äº‹ä»¶å‘ç”Ÿæˆ–å†…å­˜æœ‰ç©ºä½™æ—¶ï¼Œè¿›ç¨‹å¯ä»¥è¢«é‡æ–°æ¢å…¥å†…å­˜ï¼Œå›åˆ°å¯¹åº”çš„æ´»åŠ¨çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-çŠ¶æ€èƒŒåçš„ç®¡ç†æœºåˆ¶"&gt;âš™ï¸ çŠ¶æ€èƒŒåçš„ç®¡ç†æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;è¿›ç¨‹çŠ¶æ€çš„å®ç°ä¾èµ–äºä¸€äº›å…³é”®çš„æ•°æ®ç»“æ„å’Œæœºåˆ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿›ç¨‹æ§åˆ¶å—&lt;/strong&gt;ï¼šæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªç§°ä¸º&lt;strong&gt;è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰&lt;/strong&gt; çš„æ•°æ®ç»“æ„ã€‚PCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡è¯†ï¼Œå®ƒåŒ…å«äº†è¿›ç¨‹æè¿°ä¿¡æ¯ï¼ˆå¦‚å”¯ä¸€æ ‡è¯†ç¬¦PIDï¼‰ã€è¿›ç¨‹æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯ï¼ˆå¦‚å½“å‰çŠ¶æ€ã€ä¼˜å…ˆçº§ï¼‰ã€èµ„æºåˆ†é…æ¸…å•ï¼ˆå¦‚å†…å­˜åœ°å€ç©ºé—´ã€æ‰“å¼€çš„æ–‡ä»¶ï¼‰ä»¥åŠCPUç°åœºä¿¡æ¯ï¼ˆå¦‚å¯„å­˜å™¨å€¼ï¼‰ã€‚æ­£æ˜¯é€šè¿‡PCBï¼Œæ“ä½œç³»ç»Ÿæ‰èƒ½æœ‰æ•ˆåœ°ç®¡ç†å’Œè°ƒåº¦è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€é˜Ÿåˆ—ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ï¼šæ“ä½œç³»ç»Ÿé€šå¸¸ä½¿ç”¨&lt;strong&gt;é“¾è¡¨&lt;/strong&gt;å°†å…·æœ‰ç›¸åŒçŠ¶æ€çš„PCBç»„ç»‡æˆé˜Ÿåˆ—ï¼Œå¦‚å°±ç»ªé˜Ÿåˆ—å’Œå„ç§è®¾å¤‡é˜»å¡é˜Ÿåˆ—ã€‚å½“å‘ç”Ÿè¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œä¼šè¿›è¡Œ&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/strong&gt;ï¼šå°†å½“å‰è¿è¡Œè¿›ç¨‹çš„CPUçŠ¶æ€ï¼ˆå¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰ä¿å­˜åˆ°å…¶PCBä¸­ï¼Œç„¶ååŠ è½½ä¸‹ä¸€ä¸ªè¦è¿è¡Œè¿›ç¨‹çš„ä¸Šä¸‹æ–‡ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰å¼€é”€çš„æ“ä½œï¼Œä½†ä¸ºå®ç°å¤šä»»åŠ¡æ‰€å¿…éœ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£è¿›ç¨‹çš„çŠ¶æ€ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šçš„çŠ¶æ€æˆ–è€…æ“ä½œç³»ç»Ÿçš„å…¶ä»–æœºåˆ¶æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="unix"&gt;Unix
&lt;/h2&gt;&lt;p&gt;åœ¨ Unix åŠç±» Unix æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Linuxï¼‰ä¸­ï¼Œç”¨æˆ·ç¡®å®å¯ä»¥ç›´æ¥åœ¨æ±‡ç¼–è¯­è¨€ç¨‹åºä¸­ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ã€‚è¿™ä¸ºå¼€å‘è€…æä¾›äº†æœ€é«˜çº§åˆ«çš„åº•å±‚æ§åˆ¶èƒ½åŠ›ï¼Œæ˜¯ç†è§£æ“ä½œç³»ç»Ÿå¦‚ä½•ä¸ç¡¬ä»¶äº¤äº’çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™å¼ è¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº† 32 ä½å’Œ 64 ä½ x86 æ¶æ„ä¸‹ Linux ç³»ç»Ÿè°ƒç”¨çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;x86 (32ä½)&lt;/th&gt;
&lt;th&gt;x86-64 (64ä½)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æŒ‡ä»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int $0x80&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;syscall&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨å·å¯„å­˜å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%eax&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%rax&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°å¯„å­˜å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%ebx&lt;/code&gt;, &lt;code&gt;%ecx&lt;/code&gt;, &lt;code&gt;%edx&lt;/code&gt;, &lt;code&gt;%esi&lt;/code&gt;, &lt;code&gt;%edi&lt;/code&gt;, &lt;code&gt;%ebp&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%rdi&lt;/code&gt;, &lt;code&gt;%rsi&lt;/code&gt;, &lt;code&gt;%rdx&lt;/code&gt;, &lt;code&gt;%r10&lt;/code&gt;, &lt;code&gt;%r8&lt;/code&gt;, &lt;code&gt;%r9&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼å¯„å­˜å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%eax&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%rax&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç³»ç»Ÿè°ƒç”¨è¯¦è§£"&gt;ğŸ” ç³»ç»Ÿè°ƒç”¨è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸ºè¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´çš„åº”ç”¨ç¨‹åºæä¾›çš„ç¼–ç¨‹æ¥å£ã€‚å®ƒä»¬å°±åƒæ˜¯ç”¨æˆ·ç¨‹åºå’Œå†…æ ¸ä¹‹é—´çš„â€œå®‰å…¨é—¨â€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½æ¡¥æ¢&lt;/strong&gt;ï¼šå½“ç¨‹åºéœ€è¦æ‰§è¡Œåªæœ‰å†…æ ¸æ‰æœ‰æƒé™æ‰§è¡Œçš„æ“ä½œæ—¶ï¼ˆå¦‚è¯»å†™æ–‡ä»¶ã€åˆ›å»ºè¿›ç¨‹ã€ç½‘ç»œé€šä¿¡ï¼‰ï¼Œå°±å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘å†…æ ¸å‘èµ·è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™ä¸å®‰å…¨&lt;/strong&gt;ï¼šå†…æ ¸åœ¨æ¥åˆ°è¯·æ±‚åï¼Œä¼šè¿›è¡Œå®‰å…¨æ£€æŸ¥å¹¶ä»£ä¸ºæ‰§è¡Œï¼Œæœ€åå°†ç»“æœè¿”å›ç»™ç”¨æˆ·ç¨‹åºã€‚è¿™ç§æœºåˆ¶æœ‰æ•ˆéš”ç¦»äº†ç”¨æˆ·ç¨‹åºä¸åº•å±‚ç¡¬ä»¶ï¼Œä¿éšœäº†ç³»ç»Ÿçš„ç¨³å®šå’Œå®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šä¸æ™®é€šçš„å‡½æ•°è°ƒç”¨ç›¸æ¯”ï¼Œç³»ç»Ÿè°ƒç”¨éœ€è¦ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œå†åˆ‡æ¢å›æ¥ï¼Œè¿™ä¼šäº§ç”Ÿä¸€å®šçš„å¼€é”€ã€‚å› æ­¤ï¼Œåœ¨æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘ä¸å¿…è¦çš„ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°æ˜¯ä¸€ç§å¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ±‡ç¼–ä¸­çš„ç³»ç»Ÿè°ƒç”¨å®è·µ"&gt;ğŸ’» æ±‡ç¼–ä¸­çš„ç³»ç»Ÿè°ƒç”¨å®è·µ
&lt;/h3&gt;&lt;p&gt;åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼Œç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹éå¸¸ç›´æ¥ï¼šè®¾ç½®å¥½å‚æ•°ï¼Œç„¶åæ‰§è¡Œä¸€æ¡ç‰¹æ®Šçš„æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;h4 id="ä¸€ä¸ªç®€å•çš„ä¾‹å­hello-world"&gt;ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šHello World
&lt;/h4&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»å…¸çš„ 64 ä½ Linux æ±‡ç¼–ç¨‹åºï¼Œä½¿ç”¨ &lt;code&gt;write&lt;/code&gt;å’Œ &lt;code&gt;exit&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;section .data
msg db &amp;#39;Hello, World!&amp;#39;, 0xA ; è¦è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼Œ0xAæ˜¯æ¢è¡Œç¬¦
len equ $ - msg ; è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦
section .text
global _start
_start:
; ç³»ç»Ÿè°ƒç”¨: sys_write (ç¼–å·ä¸º1)
mov rax, 1 ; å°†ç³»ç»Ÿè°ƒç”¨å·1ï¼ˆsys_writeï¼‰æ”¾å…¥rax
mov rdi, 1 ; ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶æè¿°ç¬¦1ï¼ˆæ ‡å‡†è¾“å‡ºï¼‰
mov rsi, msg ; ç¬¬äºŒä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²åœ°å€
mov rdx, len ; ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²é•¿åº¦
syscall ; è§¦å‘ç³»ç»Ÿè°ƒç”¨
; ç³»ç»Ÿè°ƒç”¨: sys_exit (ç¼–å·ä¸º60)
mov rax, 60 ; å°†ç³»ç»Ÿè°ƒç”¨å·60ï¼ˆsys_exitï¼‰æ”¾å…¥rax
mov rdi, 0 ; ç¬¬ä¸€ä¸ªå‚æ•°ï¼šé€€å‡ºçŠ¶æ€ç 0ï¼ˆè¡¨ç¤ºæˆåŠŸï¼‰
syscall ; è§¦å‘ç³»ç»Ÿè°ƒç”¨
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªç¨‹åºæ¸…æ™°åœ°å±•ç¤ºäº†ç³»ç»Ÿè°ƒç”¨çš„æ­¥éª¤ï¼šå°†è°ƒç”¨å·å’Œå‚æ•°æ”¾å…¥çº¦å®šå¥½çš„å¯„å­˜å™¨ï¼Œç„¶åæ‰§è¡Œ &lt;code&gt;syscall&lt;/code&gt;æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;h4 id="åˆ›å»ºç›®å½•çš„ä¾‹å­"&gt;åˆ›å»ºç›®å½•çš„ä¾‹å­
&lt;/h4&gt;&lt;p&gt;å¦ä¸€ä¸ªä¾‹å­æ˜¯åˆ›å»ºç›®å½•çš„ç³»ç»Ÿè°ƒç”¨ &lt;code&gt;sys_mkdir&lt;/code&gt;ã€‚åœ¨ x86 32 ä½ç³»ç»Ÿä¸­ï¼Œå®ƒå¯èƒ½è¿™æ ·å®ç°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;section .data
dir_path db &amp;#39;/new/directory&amp;#39;, 0 ; ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„ç›®å½•è·¯å¾„
dir_perm equ 0755 ; ç›®å½•æƒé™ï¼ˆå…«è¿›åˆ¶ï¼‰
section .text
global _start
_start:
mov eax, 83 ; sys_mkdir çš„ç³»ç»Ÿè°ƒç”¨å· (83)
mov ebx, dir_path ; ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®å½•è·¯å¾„åœ°å€
mov ecx, dir_perm ; ç¬¬äºŒä¸ªå‚æ•°ï¼šæƒé™æ¨¡å¼
int 0x80 ; è§¦å‘ç³»ç»Ÿè°ƒç”¨ (32ä½æ–¹å¼)
; ... è¿™é‡Œå¯ä»¥æ£€æŸ¥è¿”å›å€¼å¹¶å¤„ç†é”™è¯¯
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é«˜çº§åº”ç”¨æ··åˆç¼–ç¨‹ä¸ä¼˜åŒ–"&gt;ğŸ”„ é«˜çº§åº”ç”¨ï¼šæ··åˆç¼–ç¨‹ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;p&gt;é™¤äº†ç¼–å†™çº¯æ±‡ç¼–ç¨‹åºï¼Œç³»ç»Ÿè°ƒç”¨è¿˜å¸¸ç”¨äºæ›´é«˜çº§çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cè¯­è¨€å†…è”æ±‡ç¼–&lt;/strong&gt;ï¼šä¸ºäº†åœ¨å…³é”®ä»£ç è·¯å¾„ä¸Šè·å¾—æè‡´æ€§èƒ½ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ C è¯­è¨€ä»£ç ä¸­ç›´æ¥åµŒå…¥æ±‡ç¼–æŒ‡ä»¤æ¥è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ã€‚GCC ç¼–è¯‘å™¨ä½¿ç”¨ &lt;code&gt;__asm__&lt;/code&gt;å…³é”®å­—æ¥æ”¯æŒå†…è”æ±‡ç¼–ï¼Œè¿™ç»“åˆäº† C è¯­è¨€çš„ä¾¿åˆ©æ€§å’Œæ±‡ç¼–çš„ç²¾ç¡®æ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šæ±‡ç¼–çº§çš„ç³»ç»Ÿè°ƒç”¨å…è®¸å¼€å‘è€…è¿›è¡Œé«˜åº¦ä¼˜åŒ–ï¼Œä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯å±•å¼€&lt;/strong&gt;ï¼šå‡å°‘å¾ªç¯æ§åˆ¶å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡ä»¤é‡æ’&lt;/strong&gt;ï¼šæ›´å¥½åœ°åˆ©ç”¨ CPU çš„æµæ°´çº¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨é«˜çº§æŒ‡ä»¤é›†&lt;/strong&gt;ï¼šå¦‚ SSE æˆ– AVX æŒ‡ä»¤è¿›è¡Œå•æŒ‡ä»¤å¤šæ•°æ®æµæ“ä½œï¼ŒåŠ é€Ÿæ•°æ®å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯­æ³•å·®å¼‚&lt;/strong&gt;ï¼šLinux æ±‡ç¼–ä¸»è¦ä½¿ç”¨ &lt;strong&gt;AT&amp;amp;T è¯­æ³•&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;movl $1, %eax&lt;/code&gt;ï¼‰ï¼Œè¿™ä¸ Windows ç¯å¢ƒä¸‹å¸¸è§çš„ &lt;strong&gt;Intel è¯­æ³•&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;mov eax, 1&lt;/code&gt;ï¼‰åœ¨æ“ä½œæ•°é¡ºåºã€å¯„å­˜å™¨å‰ç¼€ç­‰æ–¹é¢æœ‰æ˜¾è‘—åŒºåˆ«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯å¤„ç†&lt;/strong&gt;ï¼šç³»ç»Ÿè°ƒç”¨å¯èƒ½å› å„ç§åŸå› å¤±è´¥ã€‚å†…æ ¸é€šå¸¸é€šè¿‡è®¾ç½®è¿›ä½æ ‡å¿—æˆ–åœ¨è¿”å›å€¼å¯„å­˜å™¨ä¸­è¿”å›ä¸€ä¸ªè´Ÿæ•°ï¼ˆé”™è¯¯ç ï¼‰æ¥æŒ‡ç¤ºå¤±è´¥ã€‚å¥å£®çš„ç¨‹åºåº”è¯¥æ£€æŸ¥è¿™äº›ä¿¡æ¯å¹¶è¿›è¡Œé€‚å½“å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶æ„å…¼å®¹æ€§&lt;/strong&gt;ï¼š32 ä½å’Œ 64 ä½ç¨‹åºçš„æ“ä½œæ–¹å¼ä¸åŒã€‚åœ¨ 64 ä½ç³»ç»Ÿä¸Šç¼–è¯‘è¿è¡Œ 32 ä½æ±‡ç¼–ä»£ç å¯èƒ½éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å’Œé“¾æ¥é€‰é¡¹ï¼Œä¾‹å¦‚ &lt;code&gt;ld -m elf_i386&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ Unix ç³»ç»Ÿçš„æ±‡ç¼–è¯­è¨€ä¸­ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œæ˜¯å¼€å‘è€…ç›´æ¥ä¸æ“ä½œç³»ç»Ÿå†…æ ¸å¯¹è¯çš„å¼ºå¤§æ–¹å¼ã€‚è™½ç„¶ç°ä»£ç¼–ç¨‹ä¸­å¤šæ•°æƒ…å†µä¸‹ä¼šä½¿ç”¨æ›´é«˜çº§è¯­è¨€å°è£…çš„åº“å‡½æ•°ï¼Œä½†ç†è§£å¹¶æŒæ¡åº•å±‚ç³»ç»Ÿè°ƒç”¨ï¼Œå¯¹äºå®ç°æè‡´æ€§èƒ½ä¼˜åŒ–ã€å¼€å‘ç³»ç»Ÿè½¯ä»¶æˆ–æ·±å…¥ç†è§£æ“ä½œç³»ç»Ÿå·¥ä½œåŸç†è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„ç³»ç»Ÿè°ƒç”¨æˆ–ç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="é¡µæ˜ å°„"&gt;é¡µæ˜ å°„
&lt;/h2&gt;&lt;p&gt;æ ¹æ®é—®é¢˜æè¿°ï¼Œé€»è¾‘ç©ºé—´ç”±64ä¸ªé¡µé¢ç»„æˆï¼Œæ¯é¡µå¤§å°ä¸º2KBï¼Œç‰©ç†å—æœ‰256ä¸ªã€‚ç‰©ç†åœ°å€çš„ä½æ•°éœ€è¦æ ¹æ®ç‰©ç†å†…å­˜çš„æ€»å¤§å°æ¥ç¡®å®šã€‚&lt;/p&gt;
&lt;h3 id="è®¡ç®—è¿‡ç¨‹"&gt;è®¡ç®—è¿‡ç¨‹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªç‰©ç†å—çš„å¤§å°ä¸é¡µé¢å¤§å°ç›¸åŒï¼Œå³2KBã€‚2KB = 2 Ã— 1024 å­—èŠ‚ = 2048 å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;ç‰©ç†å†…å­˜æ€»å¤§å° = ç‰©ç†å—æ•° Ã— æ¯ä¸ªå—çš„å¤§å° = 256 Ã— 2048 å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;è®¡ç®—æ€»å­—èŠ‚æ•°ï¼š256 = 2^8ï¼Œ2048 = 2^11ï¼Œæ‰€ä»¥æ€»å­—èŠ‚æ•° = 2^8 Ã— 2^11 = 2^19 å­—èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;ç‰©ç†åœ°å€éœ€è¦èƒ½å¯»å€æ¯ä¸ªå­—èŠ‚ï¼Œå› æ­¤éœ€è¦è¶³å¤Ÿçš„äºŒè¿›åˆ¶ä½æ¥è¡¨ç¤º2^19ä¸ªåœ°å€ã€‚2^19éœ€è¦19ä½äºŒè¿›åˆ¶æ•°ï¼ˆå› ä¸º2^19 = 524,288ï¼Œè€Œ19ä½äºŒè¿›åˆ¶æ•°å¯ä»¥è¡¨ç¤º0åˆ°524,287ä¹‹é—´çš„å€¼ï¼Œæ­£å¥½è¦†ç›–2^19ä¸ªåœ°å€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ–è€…ï¼Œä»åˆ†é¡µç³»ç»Ÿçš„åœ°å€ç»“æ„åˆ†æï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‰©ç†å—å·éœ€è¦è¡¨ç¤º256ä¸ªå—ï¼Œå› æ­¤éœ€è¦8ä½ï¼ˆå› ä¸º2^8 = 256ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å—å†…åç§»é‡ç”±é¡µé¢å¤§å°å†³å®šï¼Œé¡µé¢å¤§å°ä¸º2KBï¼Œå› æ­¤åç§»é‡éœ€è¦11ä½ï¼ˆå› ä¸º2^11 = 2048ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç‰©ç†åœ°å€æ€»ä½æ•° = ç‰©ç†å—å·ä½æ•° + å—å†…åç§»ä½æ•° = 8ä½ + 11ä½ = 19ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç»“è®º"&gt;ç»“è®ºï¼š
&lt;/h3&gt;&lt;p&gt;ç‰©ç†åœ°å€éœ€è¦19ä½äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå› æ­¤æ­£ç¡®ç­”æ¡ˆæ˜¯é€‰é¡¹Cã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç­”æ¡ˆï¼šC. 19ä½&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="å¼‚æ­¥-io"&gt;å¼‚æ­¥ IO
&lt;/h2&gt;&lt;p&gt;å¼‚æ­¥ I/Oï¼ˆAsynchronous I/Oï¼‰ä¹‹æ‰€ä»¥ä¸éœ€è¦åº”ç”¨ç¨‹åºçº¿ç¨‹äº²è‡ªå°†æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºè¯»å–åˆ°ç”¨æˆ·ç¼“å†²åŒºï¼Œæ˜¯å› ä¸ºå®ƒå°†æ•´ä¸ª I/O æ“ä½œï¼ˆåŒ…æ‹¬æ•°æ®å‡†å¤‡å’Œ&lt;strong&gt;æ•°æ®æ‹·è´&lt;/strong&gt;ï¼‰éƒ½å§”æ‰˜ç»™äº†æ“ä½œç³»ç»Ÿå†…æ ¸æ¥å®Œæˆã€‚åº”ç”¨ç¨‹åºçº¿ç¨‹åªéœ€å‘èµ·è¯·æ±‚ï¼Œå†…æ ¸ä¼šåœ¨&lt;strong&gt;åå°&lt;/strong&gt;ç‹¬ç«‹å¤„ç†æ‰€æœ‰å·¥ä½œï¼Œå¹¶åœ¨å…¨éƒ¨æ“ä½œå®Œæˆåé€šçŸ¥åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å¼‚æ­¥ I/O ä¸å…¶ä»– I/O æ¨¡å‹çš„å…³é”®åŒºåˆ«ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†å®ƒä»¬åœ¨å†…æ ¸æ•°æ®å‡†å¤‡å’Œæ•°æ®æ‹·è´é˜¶æ®µçš„è¡Œä¸ºå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;I/O æ¨¡å‹&lt;/th&gt;
&lt;th&gt;å†…æ ¸æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/th&gt;
&lt;th&gt;æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´é˜¶æ®µ&lt;/th&gt;
&lt;th&gt;åº”ç”¨ç¨‹åºçº¿ç¨‹çŠ¶æ€&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒæ­¥é˜»å¡ I/O&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ç”¨ç¨‹åºçº¿ç¨‹&lt;strong&gt;é˜»å¡&lt;/strong&gt;ç­‰å¾…&lt;/td&gt;
&lt;td&gt;åº”ç”¨ç¨‹åºçº¿ç¨‹&lt;strong&gt;é˜»å¡&lt;/strong&gt;å¹¶å‚ä¸æ‹·è´&lt;/td&gt;
&lt;td&gt;å…¨ç¨‹è¢«åŠ¨é˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒæ­¥éé˜»å¡ I/O&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ç”¨ç¨‹åºçº¿ç¨‹&lt;strong&gt;è½®è¯¢&lt;/strong&gt;æ£€æŸ¥çŠ¶æ€&lt;/td&gt;
&lt;td&gt;åº”ç”¨ç¨‹åºçº¿ç¨‹&lt;strong&gt;é˜»å¡&lt;/strong&gt;å¹¶å‚ä¸æ‹·è´&lt;/td&gt;
&lt;td&gt;è½®è¯¢é˜¶æ®µæ´»è·ƒï¼Œæ‹·è´é˜¶æ®µé˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;I/O å¤šè·¯å¤ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ç”¨ç¨‹åºçº¿ç¨‹é˜»å¡åœ¨ &lt;code&gt;select/epoll&lt;/code&gt;ä¸Š&lt;/td&gt;
&lt;td&gt;å°±ç»ªåï¼Œåº”ç”¨ç¨‹åºçº¿ç¨‹&lt;strong&gt;é˜»å¡&lt;/strong&gt;å¹¶å‚ä¸æ‹·è´&lt;/td&gt;
&lt;td&gt;ç›‘æ§é˜¶æ®µå¯é˜»å¡ï¼Œæ‹·è´é˜¶æ®µé˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼‚æ­¥ I/O (AIO)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†…æ ¸&lt;/strong&gt;ç‹¬ç«‹å®Œæˆ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†…æ ¸&lt;/strong&gt;ç‹¬ç«‹å®Œæˆæ‹·è´åé€šçŸ¥åº”ç”¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…¨ç¨‹éé˜»å¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="æ ¸å¿ƒæœºåˆ¶è§£æ"&gt;æ ¸å¿ƒæœºåˆ¶è§£æ
&lt;/h3&gt;&lt;p&gt;å¼‚æ­¥ I/O å®ç°â€œå…¨ç¨‹éé˜»å¡â€çš„å…³é”®åœ¨äºå…¶ç‹¬ç‰¹çš„å·¥ä½œæµç¨‹å’Œè§’è‰²åˆ†å·¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨å‘èµ·è¯·æ±‚ï¼Œå†…æ ¸å…¨æƒè´Ÿè´£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºè°ƒç”¨å¼‚æ­¥ I/O æ¥å£ï¼ˆå¦‚ Linux çš„ &lt;code&gt;aio_read&lt;/code&gt;ï¼‰å‘èµ·ä¸€ä¸ªè¯»å–è¯·æ±‚ã€‚è¿™ä¸ªè¯·æ±‚ä¼šæ˜ç¡®å‘Šè¯‰å†…æ ¸ï¼šâ€œè¯·æŠŠæ•°æ®è¯»å–åˆ°&lt;strong&gt;è¿™ä¸ªç”¨æˆ·ç¼“å†²åŒº&lt;/strong&gt;â€ã€‚æäº¤è¯·æ±‚åï¼Œåº”ç”¨ç¨‹åºçº¿ç¨‹&lt;strong&gt;ç«‹å³è¿”å›&lt;/strong&gt;ï¼Œä¸ä¼šè¢«æŒ‚èµ·ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–è®¡ç®—ä»»åŠ¡ã€‚æ‰€æœ‰å…·ä½“çš„ I/O æ“ä½œï¼ŒåŒ…æ‹¬ç­‰å¾…æ•°æ®åˆ°è¾¾ç½‘ç»œå¡æˆ–ç£ç›˜ï¼Œä»¥åŠå°†æ•°æ®ä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°åº”ç”¨ç¨‹åºæŒ‡å®šçš„ç”¨æˆ·ç©ºé—´ç¼“å†²åŒºï¼Œéƒ½äº¤ç”±å†…æ ¸åœ¨åå°é»˜é»˜å®Œæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…æ ¸ä¸»åŠ¨é€šçŸ¥æ“ä½œå®Œæˆ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“å†…æ ¸å®Œæˆäº†æ‰€æœ‰å·¥ä½œï¼ˆæ•°æ®å·²å°±ç»ªå¹¶ä¸”å·²ç»æ‹·è´åˆ°äº†ç”¨æˆ·ç¼“å†²åŒºï¼‰ï¼Œå®ƒä¼šé€šè¿‡é¢„å…ˆè®¾å®šçš„æœºåˆ¶ï¼ˆå¦‚ä¿¡å·ã€å›è°ƒå‡½æ•°æˆ–äº‹ä»¶å®Œæˆé˜Ÿåˆ—ï¼‰ä¸»åŠ¨é€šçŸ¥åº”ç”¨ç¨‹åºï¼šâ€œæ‚¨ä¹‹å‰å§”æ‰˜çš„ I/O ä»»åŠ¡å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œæ•°æ®å°±åœ¨æ‚¨æŒ‡å®šçš„ç¼“å†²åŒºé‡Œï¼Œè¯·å¤„ç†å§ã€‚â€ è¿™ä¸â€œä¿¡å·é©±åŠ¨ I/Oâ€æ¨¡å‹æœ‰æœ¬è´¨åŒºåˆ«ï¼Œä¿¡å·é©±åŠ¨ I/O åªæ˜¯é€šçŸ¥åº”ç”¨ç¨‹åºâ€œæ•°æ®å·²å°±ç»ªï¼Œå¯ä»¥å¼€å§‹è¯»äº†â€ï¼ŒçœŸæ­£çš„æ•°æ®æ‹·è´å·¥ä½œä»ç„¶éœ€è¦åº”ç”¨ç¨‹åºçº¿ç¨‹ä¸»åŠ¨å‘èµ·ç³»ç»Ÿè°ƒç”¨æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦ä¼˜åŠ¿"&gt;ğŸš€ ä¸»è¦ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;è¿™ç§è®¾è®¡å¸¦æ¥äº†æ˜¾è‘—çš„å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æé«˜çš„èµ„æºåˆ©ç”¨ç‡&lt;/strong&gt;ï¼šåº”ç”¨ç¨‹åºçº¿ç¨‹ï¼ˆç‰¹åˆ«æ˜¯ä¸»çº¿ç¨‹ï¼‰åœ¨ I/O ç­‰å¾…æœŸé—´ä¸ä¼šè¢«é˜»å¡ï¼Œå¯ä»¥æœ€å¤§åŒ–åœ°åˆ©ç”¨ CPU æ—¶é—´å¤„ç†ä¸šåŠ¡é€»è¾‘æˆ–å“åº”å…¶ä»–äº‹ä»¶ï¼Œç‰¹åˆ«é€‚åˆ&lt;strong&gt;é«˜å¹¶å‘ã€I/O å¯†é›†å‹&lt;/strong&gt;çš„åº”ç”¨åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–çš„ç¼–ç¨‹æ¨¡å‹&lt;/strong&gt;ï¼šåŸºäºå›è°ƒæˆ–äº‹ä»¶å®Œæˆçš„é€šçŸ¥æœºåˆ¶ï¼Œæœ‰åŠ©äºç¼–å†™å‡ºæ›´æ¸…æ™°ã€é«˜æ•ˆçš„å¼‚æ­¥ä»£ç ç»“æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å®ç°"&gt;ğŸ’¡ æ³¨æ„äº‹é¡¹ä¸å®ç°
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿæ”¯æŒ&lt;/strong&gt;ï¼šçœŸæ­£çš„å¼‚æ­¥ I/O éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å±‚é¢çš„æ”¯æŒã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œè™½ç„¶å­˜åœ¨ &lt;code&gt;libaio&lt;/code&gt;ç­‰æœºåˆ¶ï¼Œä½†å…¶å¯¹å¼‚æ­¥æ“ä½œï¼ˆç‰¹åˆ«æ˜¯ç½‘ç»œ I/Oï¼‰çš„æ”¯æŒå®Œå–„åº¦æ›¾ä¸€åº¦ä¸å¦‚ Windows çš„ IOCPã€‚ä¸è¿‡ï¼Œç°ä»£ Linux å†…æ ¸ä¸­çš„ &lt;code&gt;io_uring&lt;/code&gt;æŠ€æœ¯æ­£æœç€æä¾›æ›´å¼ºå¤§å’Œå®Œæ•´çš„å¼‚æ­¥ I/O æ”¯æŒæ–¹å‘å‘å±•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ I/O å¤šè·¯å¤ç”¨çš„åŒºåˆ«&lt;/strong&gt;ï¼šåŠ¡å¿…å°†å¼‚æ­¥ I/O ä¸ I/O å¤šè·¯å¤ç”¨ï¼ˆå¦‚ &lt;code&gt;select&lt;/code&gt;, &lt;code&gt;poll&lt;/code&gt;, &lt;code&gt;epoll&lt;/code&gt;ï¼‰åŒºåˆ†å¼€ã€‚I/O å¤šè·¯å¤ç”¨è§£å†³çš„æ˜¯â€œåŒæ—¶ç›‘æ§å¤šä¸ª I/O é€šé“æ˜¯å¦å°±ç»ªâ€çš„é—®é¢˜ï¼Œä¸€æ—¦å°±ç»ªï¼Œ&lt;strong&gt;æ•°æ®æ‹·è´çš„å·¥ä½œä»ç„¶éœ€è¦åº”ç”¨ç¨‹åºçº¿ç¨‹æ¥åŒæ­¥å®Œæˆ&lt;/strong&gt;ï¼Œå› æ­¤é€šå¸¸ä»è¢«å½’ä¸ºåŒæ­¥ I/Oã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£å¼‚æ­¥ I/O çš„å·¥ä½œåŸç†ã€‚å¦‚æœå¯¹æŸä¸ªå…·ä½“çš„å®ç°ä¾‹å­æˆ–ä¸å…¶ä»–æ¨¡å‹çš„å¯¹æ¯”æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç¨‹åºçŠ¶æ€å­—"&gt;ç¨‹åºçŠ¶æ€å­—
&lt;/h2&gt;&lt;p&gt;ç¨‹åºçŠ¶æ€å­—ï¼ˆProgram Status Word, PSWï¼‰æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­ä¸€ä¸ªéå¸¸å…³é”®çš„éƒ¨ä»¶ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º &lt;strong&gt;CPUçš„â€œèº«ä»½è¯â€å’Œâ€œæ§åˆ¶ä¸­å¿ƒâ€&lt;/strong&gt;ï¼Œå®ƒå®æ—¶è®°å½•ç€å½“å‰æ‰§è¡Œç¨‹åºçš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶æ§åˆ¶ç€å¤„ç†å™¨çš„è¿è¡Œæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†PSWä¸­ä¸€äº›å¸¸è§çš„æ ‡å¿—ä½åŠå…¶å«ä¹‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ‡å¿—ä½&lt;/th&gt;
&lt;th&gt;åç§°&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ä½æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;è¿ç®—ç»“æœçš„æœ€é«˜ä½æœ‰è¿›ä½æˆ–å€Ÿä½æ—¶ç½®1ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;AC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŠè¿›ä½æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;è¿ç®—ä¸­ä½4ä½å‘é«˜4ä½æœ‰è¿›ä½æˆ–å€Ÿä½æ—¶ç½®1ï¼Œå¸¸ç”¨äºBCDç è¿ç®—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ZF&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é›¶æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;è¿ç®—ç»“æœä¸ºé›¶æ—¶ç½®1ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;OV&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æº¢å‡ºæ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;æœ‰ç¬¦å·æ•°è¿ç®—ç»“æœè¶…å‡ºè¡¨ç¤ºèŒƒå›´æ—¶ç½®1ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;P&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¥‡å¶æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;ç»“æœä¸­1çš„ä¸ªæ•°ä¸ºå¥‡æ•°æ—¶ç½®1ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SF&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¬¦å·æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;è®°å½•è¿ç®—ç»“æœçš„ç¬¦å·ï¼ˆæ­£/è´Ÿï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;IF&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­æ–­å…è®¸æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;æ§åˆ¶CPUæ˜¯å¦å“åº”å¯å±è”½ä¸­æ–­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;TF&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™·é˜±æ ‡å¿—ä½&lt;/td&gt;
&lt;td&gt;ç”¨äºè°ƒè¯•ï¼Œç½®ä½æ—¶ä½¿CPUè¿›å…¥å•æ­¥æ‰§è¡Œæ–¹å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-pswé‡Œæœ‰ä»€ä¹ˆ"&gt;ğŸ” PSWé‡Œæœ‰ä»€ä¹ˆ
&lt;/h3&gt;&lt;p&gt;PSWæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸“é—¨çš„å¯„å­˜å™¨ï¼Œå®ƒå­˜æ”¾çš„ä¿¡æ¯å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çŠ¶æ€æ ‡å¿—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç±»ä¿¡æ¯æ˜¯&lt;strong&gt;æŒ‡ä»¤æ‰§è¡Œåè‡ªåŠ¨äº§ç”Ÿçš„ç»“æœç‰¹å¾&lt;/strong&gt;ï¼Œå°±åƒæ¯æ¬¡è®¡ç®—åç•™ä¸‹çš„â€œç—•è¿¹â€ã€‚CPUæ ¹æ®è¿™äº›æ ‡å¿—æ¥å†³å®šåç»­æ“ä½œï¼Œæ¯”å¦‚æ¡ä»¶è·³è½¬ã€‚å¸¸è§çš„çŠ¶æ€æ ‡å¿—åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿›ä½æ ‡å¿— (CY)&lt;/strong&gt;ï¼šè¡¨ç¤ºåŠ æ³•è¿ç®—ä¸­çš„è¿›ä½å’Œå‡æ³•è¿ç®—ä¸­çš„å€Ÿä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›¶æ ‡å¿— (ZF)&lt;/strong&gt;ï¼šè¿ç®—ç»“æœä¸ºé›¶æ—¶ç½®1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æº¢å‡ºæ ‡å¿— (OV)&lt;/strong&gt;ï¼šæœ‰ç¬¦å·æ•°è¿ç®—ç»“æœè¶…å‡ºè¡¨ç¤ºèŒƒå›´æ—¶ç½®1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¥‡å¶æ ‡å¿— (P)&lt;/strong&gt;ï¼šåæ˜ ç´¯åŠ å™¨ACCå†…å®¹çš„å¥‡å¶æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ§åˆ¶çŠ¶æ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç±»ä¿¡æ¯&lt;strong&gt;ç”±ç¨‹åºæˆ–æ“ä½œç³»ç»Ÿä¸»åŠ¨è®¾ç½®&lt;/strong&gt;ï¼Œç”¨äºæ§åˆ¶CPUçš„å·¥ä½œæ–¹å¼ã€‚å¸¸è§çš„æ§åˆ¶çŠ¶æ€åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­å…è®¸æ ‡å¿— (IF)&lt;/strong&gt;ï¼šæ§åˆ¶CPUæ˜¯å¦å“åº”å¯å±è”½ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™·é˜±æ ‡å¿— (TF)&lt;/strong&gt;ï¼šç”¨äºç¨‹åºè°ƒè¯•ã€‚è‹¥ç½®ä½ï¼ŒCPUæ¯æ‰§è¡Œä¸€æ¡æŒ‡ä»¤å°±äº§ç”Ÿä¸€ä¸ªé™·é˜±ä¸­æ–­ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜è·Ÿè¸ªæŒ‡ä»¤æ‰§è¡Œæƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œå¯„å­˜å™¨ç»„é€‰æ‹©ä½ (RS1, RS0)&lt;/strong&gt;ï¼šä¾‹å¦‚åœ¨8051å•ç‰‡æœºä¸­ï¼Œè¿™ä¸¤ä½ç”¨äºé€‰æ‹©å½“å‰ä½¿ç”¨å“ªä¸€ç»„å·¥ä½œå¯„å­˜å™¨ï¼Œè¿™åœ¨è°ƒç”¨å­ç¨‹åºæˆ–ä¸­æ–­æœåŠ¡æ—¶ï¼Œä¸ºå¿«é€Ÿä¿æŠ¤ç°åœºæä¾›äº†æå¤§æ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-pswçš„æ ¸å¿ƒä½œç”¨ä¸å·¥ä½œåŸç†"&gt;ğŸ’¡ PSWçš„æ ¸å¿ƒä½œç”¨ä¸å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;PSWçš„æ ¸å¿ƒä½œç”¨å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°ç¨‹åºçŠ¶æ€çš„ä¿æŠ¤ä¸æ¢å¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯PSWåœ¨æ“ä½œç³»ç»Ÿä¸­æœ€é‡è¦çš„ä½œç”¨ä¹‹ä¸€ã€‚å½“å‘ç”Ÿä¸­æ–­æˆ–éœ€è¦è¿›è¡Œè¿›ç¨‹åˆ‡æ¢æ—¶ï¼ŒCPUåœ¨ç¦»å¼€å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºå‰ï¼Œä¼š&lt;strong&gt;å°†å½“å‰çš„PSWï¼ˆç§°ä¸ºç°è¡Œç¨‹åºçŠ¶æ€å­—æˆ–è€PSWï¼‰ä¿å­˜åˆ°å†…å­˜ä¸­&lt;/strong&gt;ã€‚å½“å†æ¬¡è°ƒåº¦è¯¥ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå†å°†ä¹‹å‰ä¿å­˜çš„PSWé‡æ–°è½½å…¥PSWå¯„å­˜å™¨ã€‚è¿™ä¸€å­˜ä¸€å–ï¼Œå°±å®Œç¾æ¢å¤äº†ç¨‹åºè¢«æ‰“æ–­æ—¶çš„ç²¾ç¡®çŠ¶æ€ï¼ˆåŒ…æ‹¬ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ç­‰ï¼‰ï¼Œä»è€Œèƒ½è®©ç¨‹åºä»æ–­ç‚¹å¤„ç»§ç»­æ­£ç¡®è¿è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ§åˆ¶æŒ‡ä»¤æ‰§è¡Œæµç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CPUé€šè¿‡æ£€æµ‹PSWä¸­çš„æ¡ä»¶ç ï¼ˆå¦‚ZFã€OVç­‰ï¼‰æ¥å†³å®šæ˜¯å¦è¿›è¡Œæ¡ä»¶è½¬ç§»ã€‚ä¾‹å¦‚ï¼Œåœ¨é«˜çº§è¯­è¨€ä¸­çš„ &lt;code&gt;if (a == b)&lt;/code&gt;è¯­å¥ï¼Œç¼–è¯‘æˆæœºå™¨æŒ‡ä»¤åï¼Œæœ€ç»ˆå°±æ˜¯é€šè¿‡å‡æ³•è¿ç®—å¹¶æ£€æŸ¥é›¶æ ‡å¿—ï¼ˆZFï¼‰æ¥åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†å¤„ç†å™¨ç‰¹æƒçº§åˆ«ä¸ä¸­æ–­&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;PSWä¸­åŒ…å«&lt;strong&gt;ç‰¹æƒçŠ¶æ€ä½&lt;/strong&gt;ï¼ˆå¦‚ç®¡æ€/ç›®æ€ä½ï¼‰ï¼Œç”¨äºæ ‡è¯†CPUå½“å‰æ˜¯å¤„äºæ“ä½œç³»ç»Ÿå†…æ ¸ä½¿ç”¨çš„ç‰¹æƒçŠ¶æ€ï¼ˆç®¡æ€ï¼‰è¿˜æ˜¯æ™®é€šåº”ç”¨ç¨‹åºä½¿ç”¨çš„éç‰¹æƒçŠ¶æ€ï¼ˆç›®æ€ï¼‰ã€‚è¿™ä¸€æœºåˆ¶æ˜¯æ“ä½œç³»ç»Ÿå®ç°èµ„æºä¿æŠ¤å’Œç³»ç»Ÿå®‰å…¨çš„åŸºç¡€ã€‚åŒæ—¶ï¼Œ&lt;strong&gt;ä¸­æ–­å±è”½ä½&lt;/strong&gt;ç­‰æ§åˆ¶ç€CPUå¯¹ä¸­æ–­äº‹ä»¶çš„å“åº”è¡Œä¸ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸åŒå¤„ç†å™¨ä¸­çš„psw"&gt;ğŸ”„ ä¸åŒå¤„ç†å™¨ä¸­çš„PSW
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;PSWçš„å…·ä½“ç»“æ„å’Œå†…å®¹å› å¤„ç†å™¨æ¶æ„è€Œå¼‚&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œç»å…¸çš„8051å•ç‰‡æœºçš„PSWæ˜¯ä¸€ä¸ª8ä½å¯„å­˜å™¨ï¼Œè€Œx86æ¶æ„çš„å¤„ç†å™¨åˆ™æœ‰æ›´å¤æ‚çš„æ ‡å¿—å¯„å­˜å™¨ï¼ˆEFLAGS/RFLAGSï¼‰ã€‚åœ¨ä¸€äº›ç°ä»£å¤„ç†å™¨è®¾è®¡ä¸­ï¼Œå¯èƒ½å¹¶æ²¡æœ‰ä¸€ä¸ªåä¸ºâ€œPSWâ€çš„å•ä¸€å¯„å­˜å™¨ï¼Œè€Œæ˜¯ç”±&lt;strong&gt;ä¸€ç»„æ§åˆ¶ä¸çŠ¶æ€å¯„å­˜å™¨å…±åŒæ‰¿æ‹…å…¶åŠŸèƒ½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ç¨‹åºçŠ¶æ€å­—è¿™ä¸€è®¡ç®—æœºç§‘å­¦ä¸­çš„é‡è¦æ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id="ä¸­æ–­"&gt;ä¸­æ–­
&lt;/h2&gt;&lt;p&gt;ä¸­æ–­å±è”½ä½å’Œä¸­æ–­ç æ˜¯è®¡ç®—æœºä¸­æ–­ç³»ç»Ÿä¸­ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼Œå®ƒä»¬åˆ†åˆ«æ‰¿æ‹…ç€&lt;strong&gt;æ§åˆ¶&lt;/strong&gt;å’Œ&lt;strong&gt;æ ‡è¯†&lt;/strong&gt;çš„é‡ä»»ã€‚ä¸ºäº†å¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒç‰¹å¾ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸­æ–­å±è”½ä½ (Interrupt Mask)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸­æ–­ç  (Interrupt Code)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèŒè´£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶ä¸å¼€å…³&lt;/strong&gt; - å†³å®šCPUæ˜¯å¦å“åº”ç‰¹å®šä¸­æ–­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡è¯†ä¸å¯»å€&lt;/strong&gt; - è®°å½•å½“å‰å‘ç”Ÿçš„æ˜¯å“ªä¸ªä¸­æ–­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ç§&lt;strong&gt;æ§åˆ¶æ¡ä»¶&lt;/strong&gt;ï¼ˆå…è®¸æˆ–ç¦æ­¢ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;æ ‡è¯†ä¿¡æ¯&lt;/strong&gt;ï¼ˆä¸­æ–­æºç¼–å·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰€åœ¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¨‹åºçŠ¶æ€å­—ï¼ˆPSWï¼‰æˆ–ä¸­æ–­æ§åˆ¶å™¨ï¼ˆå¦‚8259Açš„IMRï¼‰&lt;/td&gt;
&lt;td&gt;ç¨‹åºçŠ¶æ€å­—ï¼ˆPSWï¼‰æˆ–ç‰¹å®šå¯„å­˜å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å®¹ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ˜¯å¤šä½äºŒè¿›åˆ¶ä½ï¼Œæ¯ä½å¯¹åº”ä¸€ä¸ªä¸­æ–­æºæˆ–ä¸€ç±»ä¸­æ–­&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªæ•°å­—ä»£ç ï¼ˆä¸­æ–­ç±»å‹å·ï¼‰ï¼Œå”¯ä¸€å¯¹åº”ä¸€ä¸ªä¸­æ–­æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾ç½®æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±ç¨‹åºï¼ˆå¦‚æ“ä½œç³»ç»Ÿï¼‰é€šè¿‡ç‰¹æƒæŒ‡ä»¤åŠ¨æ€è®¾ç½®&lt;/td&gt;
&lt;td&gt;ç”±æå‡ºè¯·æ±‚çš„ä¸­æ–­æºç¡¬ä»¶åœ¨ä¸­æ–­å“åº”å‘¨æœŸè‡ªåŠ¨æä¾›ç»™CPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è°ƒæ•´ä¸­æ–­å¤„ç†é¡ºåºã€ä¿æŠ¤ä¸´ç•ŒåŒºã€å®ç°å¤šé‡ä¸­æ–­&lt;/td&gt;
&lt;td&gt;åœ¨ä¸­æ–­å‘é‡è¡¨ä¸­ç´¢å¼•ï¼Œæ‰¾åˆ°å¯¹åº”çš„ä¸­æ–­æœåŠ¡ç¨‹åºå…¥å£åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£ä¸­æ–­å±è”½ä½"&gt;ğŸ” è¯¦è§£ä¸­æ–­å±è”½ä½
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­å±è”½ä½çš„ä¸»è¦ä½œç”¨æ˜¯&lt;strong&gt;ç²¾ç»†æ§åˆ¶CPUå¯¹ä¸­æ–­è¯·æ±‚çš„å“åº”&lt;/strong&gt;ï¼Œå°±åƒä¸€ä¸ªæ™ºèƒ½å¼€å…³ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šæ¯ä¸ªä¸­æ–­æºé€šå¸¸å¯¹åº”ä¸€ä¸ªå±è”½ä½ã€‚å½“è¯¥ä½è¢«è®¾ç½®ä¸ºâ€œå±è”½â€çŠ¶æ€ï¼ˆé€šå¸¸ä¸ºé€»è¾‘1ï¼‰æ—¶ï¼Œå³ä½¿å¯¹åº”çš„ä¸­æ–­æºäº§ç”Ÿäº†è¯·æ±‚ä¿¡å·ï¼Œè¿™ä¸ªè¯·æ±‚ä¹Ÿä¼šè¢«&lt;strong&gt;é˜»å¡&lt;/strong&gt;ï¼Œæ— æ³•é€è¾¾CPUæˆ–ä¸ä¼šè¢«CPUå“åº”ã€‚åä¹‹ï¼Œè‹¥è®¾ç½®ä¸ºâ€œå…è®¸â€çŠ¶æ€ï¼ˆé€šå¸¸ä¸ºé€»è¾‘0ï¼‰ï¼Œåˆ™ä¸­æ–­è¯·æ±‚å¯ä»¥è¢«æ­£å¸¸å“åº”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒåº”ç”¨&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´ä¸­æ–­å¤„ç†é¡ºåº&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸­æ–­å±è”½ä½ä¸€ä¸ªéå¸¸å·§å¦™çš„åº”ç”¨ã€‚ç³»ç»Ÿçš„ä¸­æ–­å“åº”é¡ºåºç”±ç¡¬ä»¶ç”µè·¯å›ºå®šï¼Œä½†é€šè¿‡&lt;strong&gt;åŠ¨æ€ç¼–ç¨‹è®¾ç½®å±è”½å­—&lt;/strong&gt;ï¼Œå¯ä»¥æ”¹å˜å®é™…çš„ä¸­æ–­å¤„ç†é¡ºåºã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç¡¬ä»¶å“åº”é¡ºåºæ˜¯A&amp;gt;B&amp;gt;Cï¼Œä½†å¦‚æœæˆ‘ä»¬å¸Œæœ›å¤„ç†é¡ºåºæ˜¯A-&amp;gt;C-&amp;gt;Bã€‚å¯ä»¥åœ¨å¤„ç†å®Œä¸­æ–­Aåï¼Œè®¾ç½®ä¸€ä¸ªå±è”½å­—ï¼Œåªå…è®¸ä¸­æ–­Cæ‰“æ–­å½“å‰ç¨‹åºï¼Œè€Œä¸å…è®¸ä¸­æ–­Bæ‰“æ–­ã€‚è¿™æ ·ï¼Œå³ä½¿ä¸­æ–­Bçš„å“åº”ä¼˜å…ˆçº§æ›´é«˜ï¼Œå®ƒä¹Ÿä¼šè¢«æš‚æ—¶å±è”½ï¼Œä»è€Œè®©ä¼˜å…ˆçº§è¾ƒä½ä½†æ›´æ€¥éœ€å¤„ç†çš„ä¸­æ–­Cå…ˆè¢«å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŠ¤ä¸´ç•ŒåŒº&lt;/strong&gt;ï¼šå½“æ“ä½œç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºæ­£åœ¨æ‰§è¡Œä¸€æ®µ&lt;strong&gt;ä¸å¯è¢«ä¸­æ–­çš„ä¸´ç•Œä»£ç &lt;/strong&gt;ï¼ˆå¦‚ä¿®æ”¹å…³é”®æ•°æ®ç»“æ„ï¼‰æ—¶ï¼Œä¼šé€šè¿‡â€œå…³ä¸­æ–­â€ï¼ˆå³è®¾ç½®å±è”½ä½ç¦æ­¢æ‰€æœ‰å¯å±è”½ä¸­æ–­ï¼‰æˆ–å±è”½ç›¸å…³ä¸­æ–­çš„æ–¹å¼ï¼Œæ¥é˜²æ­¢è¢«æ‰“æ‰°ï¼Œç¡®ä¿æ“ä½œçš„åŸå­æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°å¤šé‡ä¸­æ–­ï¼ˆä¸­æ–­åµŒå¥—ï¼‰&lt;/strong&gt;ï¼šä¸ºäº†å…è®¸æ›´é«˜çº§åˆ«çš„ä¸­æ–­å¯ä»¥æ‰“æ–­å½“å‰æ­£åœ¨å¤„ç†çš„ä¸­æ–­æœåŠ¡ç¨‹åºï¼Œéœ€è¦åœ¨å½“å‰ä¸­æ–­æœåŠ¡ç¨‹åºçš„å¼€å§‹ï¼Œ&lt;strong&gt;ä¿å­˜ç°åœºåç«‹å³è®¾ç½®æ–°çš„å±è”½å­—ï¼Œå¼€æ”¾æ›´é«˜çº§åˆ«ä¸­æ–­çš„å±è”½&lt;/strong&gt;ï¼Œä»è€Œå®ç°ä¸­æ–­åµŒå¥—ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¯¦è§£ä¸­æ–­ç "&gt;ğŸ” è¯¦è§£ä¸­æ–­ç 
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­ç çš„æ ¸å¿ƒä½œç”¨æ˜¯&lt;strong&gt;å‡†ç¡®å‘Šè¯‰CPUâ€œå‘ç”Ÿäº†ä»€ä¹ˆä¸­æ–­â€&lt;/strong&gt;ï¼Œä»è€Œèƒ½å¿«é€Ÿæ‰¾åˆ°å¤„ç†åŠæ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šCPUåœ¨å“åº”ä¸€ä¸ªä¸­æ–­åï¼Œéœ€è¦çŸ¥é“è¯¥æ‰§è¡Œå“ªä¸€æ®µä¸­æ–­æœåŠ¡ç¨‹åºã€‚ä¸­æ–­æºä¼šæä¾›ä¸€ä¸ª&lt;strong&gt;ä¸­æ–­ç±»å‹ç &lt;/strong&gt;ï¼ˆæˆ–ç§°ä¸­æ–­å‘é‡å·ï¼‰ã€‚CPUåˆ©ç”¨è¿™ä¸ªå·ç ä½œä¸ºç´¢å¼•ï¼Œå»æŸ¥è¯¢&lt;strong&gt;ä¸­æ–­å‘é‡è¡¨&lt;/strong&gt;ï¼Œä»ä¸­æ‰¾åˆ°å¯¹åº”çš„ä¸­æ–­æœåŠ¡ç¨‹åºçš„å…¥å£åœ°å€ï¼Œç„¶åè·³è½¬è¿‡å»æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œåœ¨x86æ¶æ„ä¸­ï¼Œä¸­æ–­ç ä¸ä¸­æ–­å‘é‡è¡¨çš„å…³ç³»æ˜¯æ ‡å‡†åŒ–çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–æ–¹å¼&lt;/strong&gt;ï¼šåœ¨ä¸­æ–­å“åº”å‘¨æœŸå†…ï¼Œ&lt;strong&gt;ç”±æå‡ºè¯·æ±‚çš„ä¸­æ–­æºé€šè¿‡æ•°æ®æ€»çº¿è‡ªåŠ¨æä¾›ç»™CPU&lt;/strong&gt;ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸ç”±ä¸­æ–­æ§åˆ¶å™¨ï¼ˆå¦‚Intel 8259Aï¼‰ååŠ©å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-äºŒè€…å¦‚ä½•ååŒå·¥ä½œ"&gt;ğŸ¤ äºŒè€…å¦‚ä½•ååŒå·¥ä½œ
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­å±è”½ä½å’Œä¸­æ–­ç åœ¨ä¸€ä¸ªå®Œæ•´çš„ä¸­æ–­å¤„ç†æµç¨‹ä¸­ååŒå·¥ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­è¯·æ±‚&lt;/strong&gt;ï¼šå¤–éƒ¨è®¾å¤‡äº§ç”Ÿä¸­æ–­è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±è”½åˆ¤æ–­&lt;/strong&gt;ï¼šä¸­æ–­è¯·æ±‚é¦–å…ˆä¼šç»è¿‡&lt;strong&gt;ä¸­æ–­å±è”½å¯„å­˜å™¨&lt;/strong&gt;çš„è¿‡æ»¤ã€‚å¦‚æœè¯¥ä¸­æ–­æºå¯¹åº”çš„å±è”½ä½è¢«è®¾ç½®ï¼Œåˆ™è¯·æ±‚è¢«å¿½ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§åˆ¤ä¼˜&lt;/strong&gt;ï¼šå¯¹äºæœªè¢«å±è”½çš„ä¸­æ–­è¯·æ±‚ï¼Œç¡¬ä»¶æ’é˜Ÿç”µè·¯ä¼šæ ¹æ®å›ºå®šçš„&lt;strong&gt;ä¸­æ–­å“åº”ä¼˜å…ˆçº§&lt;/strong&gt;è¿›è¡Œè£å†³ï¼Œé€‰å‡ºå½“å‰æœ€é«˜ä¼˜å…ˆçº§çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CPUå“åº”&lt;/strong&gt;ï¼šCPUæ»¡è¶³å“åº”æ¡ä»¶ï¼ˆå¦‚ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œä¸”å¤„äºå¼€ä¸­æ–­çŠ¶æ€ï¼‰åï¼Œå¼€å§‹å“åº”æœ€é«˜ä¼˜å…ˆçº§çš„ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æä¾›ä¸­æ–­ç &lt;/strong&gt;ï¼šè¢«å“åº”çš„ä¸­æ–­æºå°†å…¶&lt;strong&gt;ä¸­æ–­ç &lt;/strong&gt;å‘é€ç»™CPUã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨‹åºè·³è½¬&lt;/strong&gt;ï¼šCPUæ ¹æ®&lt;strong&gt;ä¸­æ–­ç &lt;/strong&gt;æŸ¥æ‰¾ä¸­æ–­å‘é‡è¡¨ï¼Œæ‰¾åˆ°å¹¶æ‰§è¡Œç›¸åº”çš„ä¸­æ–­æœåŠ¡ç¨‹åºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä¸­æ–­å±è”½ä½æ˜¯ä¸­æ–­ç³»ç»Ÿçš„ &lt;strong&gt;â€œè°ƒåº¦å‘˜â€&lt;/strong&gt; ï¼Œè´Ÿè´£ç®¡ç†å“ªäº›ä¸­æ–­å¯ä»¥å‚åŠ â€œç«é€‰â€ï¼›è€Œä¸­æ–­ç åˆ™æ˜¯ä¸­æ–­æºçš„ &lt;strong&gt;â€œèº«ä»½è¯â€&lt;/strong&gt; ï¼Œå½“ä¸­æ–­è¢«å“åº”åï¼Œå‡­æ­¤èº«ä»½è¯é¢†å–â€œå¤„ç†èµ„æ ¼â€ï¼ˆæ‰¾åˆ°å¤„ç†ç¨‹åºï¼‰ã€‚å®ƒä»¬ä¸€æ§ä¸€æ ‡è¯†ï¼Œå…±åŒç¡®ä¿äº†ä¸­æ–­ç³»ç»Ÿèƒ½å¤Ÿæœ‰æ¡ä¸ç´Šåœ°å¤„ç†å„ç§éšæœºäº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£è¿™ä¸¤ä¸ªé‡è¦æ¦‚å¿µï¼&lt;/p&gt;
&lt;h2 id="ä¸­æ–­ç "&gt;ä¸­æ–­ç 
&lt;/h2&gt;&lt;p&gt;ä¸­æ–­ç ï¼ˆInterrupt Codeï¼‰ï¼Œä¹Ÿå¸¸è¢«ç§°ä¸º&lt;strong&gt;ä¸­æ–­ç±»å‹ç &lt;/strong&gt;ï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­ç”¨äº&lt;strong&gt;å”¯ä¸€æ ‡è¯†ä¸åŒä¸­æ–­æºçš„ä¸€ä¸ªæ•°å­—ç¼–ç &lt;/strong&gt;ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ¯ä¸ªä¸­æ–­æºçš„â€œèº«ä»½è¯å·ç â€ï¼ŒCPU é€šè¿‡è¿™ä¸ªå·ç å°±èƒ½å¿«é€ŸçŸ¥é“æ˜¯å“ªä¸ªè®¾å¤‡æˆ–äº‹ä»¶å‘å‡ºäº†ä¸­æ–­è¯·æ±‚ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„å¤„ç†ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¯¹ä¸­æ–­ç æœ‰ä¸ªå¿«é€Ÿçš„å…¨å±€è®¤è¯†ï¼Œä¸‹è¡¨æ±‡æ€»äº†åœ¨å…¸å‹ x86 ä½“ç³»ç»“æ„ï¼ˆå¦‚ 8086ï¼‰ä¸­çš„å…³é”®ç‰¹æ€§å’Œä¸€äº›å¸¸è§çš„ä¸­æ–­ç åˆ†é…ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§/åˆ†ç±»&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹æˆ–èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å®½åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;8 ä½äºŒè¿›åˆ¶æ•°&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å–å€¼èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;0 - 255ï¼ˆåè¿›åˆ¶ï¼‰æˆ– 0x00 - 0xFFï¼ˆåå…­è¿›åˆ¶ï¼‰&lt;/td&gt;
&lt;td&gt;å…± 256 ä¸ªå¯èƒ½çš„ä¸­æ–­ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹é¢„å®šä¹‰ä¸­æ–­ç &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”± CPU æˆ–ç³»ç»Ÿä¿ç•™ï¼Œç”¨äºå¤„ç†ç‰¹å®šå†…éƒ¨äº‹ä»¶æˆ–å¼‚å¸¸&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;0x00&lt;/strong&gt;: é™¤æ³•é”™è¯¯ï¼ˆé™¤é›¶ï¼‰ &lt;strong&gt;0x01&lt;/strong&gt;: å•æ­¥è°ƒè¯• &lt;strong&gt;0x02&lt;/strong&gt;: éå±è”½ä¸­æ–­ (NMI) &lt;strong&gt;0x03&lt;/strong&gt;: æ–­ç‚¹ä¸­æ–­ &lt;strong&gt;0x04&lt;/strong&gt;: æº¢å‡ºä¸­æ–­ (INTO)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶ä¸­æ–­ (IRQ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ç”±å¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨ï¼ˆå¦‚ 8259Aï¼‰ç®¡ç†&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;0x08&lt;/strong&gt; - &lt;strong&gt;0x0F&lt;/strong&gt;: ä¸» 8259A ç®¡ç†çš„ç¡¬ä»¶ä¸­æ–­ï¼ˆå¦‚æ—¶é’Ÿã€é”®ç›˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½¯ä»¶ä¸­æ–­ (INT n)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±ç¨‹åºä¸­çš„ &lt;code&gt;INT n&lt;/code&gt;æŒ‡ä»¤è§¦å‘ï¼Œ&lt;code&gt;n&lt;/code&gt;å³ä¸ºä¸­æ–­ç &lt;/td&gt;
&lt;td&gt;ç”¨æˆ·å¯è‡ªå®šä¹‰ä½¿ç”¨æœªè¢«ç³»ç»Ÿå ç”¨çš„ä¸­æ–­ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿ/BIOS ä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ“ä½œç³»ç»Ÿæˆ–åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿä¿ç•™çš„ä¸­æ–­æœåŠ¡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;0x10&lt;/strong&gt; - &lt;strong&gt;0x1F&lt;/strong&gt;: å¸¸ç”¨äº BIOS åŠŸèƒ½è°ƒç”¨ï¼ˆå¦‚å±å¹•è¾“å‡ºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”¨æˆ·å¯ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä¾›åº”ç”¨ç¨‹åºæˆ–é©±åŠ¨ç¨‹åºè‡ªç”±ä½¿ç”¨çš„ä¸­æ–­ç èŒƒå›´&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;0x40&lt;/strong&gt; - &lt;strong&gt;0xFF&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸­æ–­ç å¦‚ä½•å·¥ä½œ"&gt;ğŸ” ä¸­æ–­ç å¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­ç çš„æ ¸å¿ƒä½œç”¨åœ¨äºå®ƒä¸ä¸€ä¸ªå«åš &lt;strong&gt;ä¸­æ–­å‘é‡è¡¨&lt;/strong&gt; çš„æ•°æ®ç»“æ„ç´§å¯†é…åˆã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸­æ–­å‘é‡è¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å°†ä¸­æ–­å‘é‡è¡¨ç†è§£ä¸ºä¸€å¼ å­˜å‚¨åœ¨å†…å­˜å›ºå®šä½ç½®çš„â€œ&lt;strong&gt;ç´§æ€¥ç”µè¯ç°¿&lt;/strong&gt;â€ã€‚åœ¨ 8086 æ¶æ„ä¸­ï¼Œè¿™å¼ è¡¨ä½äºå†…å­˜æœ€ä½ç«¯çš„ 1KB ç©ºé—´ï¼ˆåœ°å€ä» &lt;code&gt;0000:0000&lt;/code&gt;åˆ° &lt;code&gt;0000:03FF&lt;/code&gt;ï¼‰ã€‚è¿™ä¸ªç”µè¯ç°¿ä¸€å…±æœ‰ 256 ä¸ªæ¡ç›®ï¼ˆå¯¹åº” 256 ä¸ªå¯èƒ½çš„ä¸­æ–­ç ï¼‰ï¼Œæ¯ä¸ªæ¡ç›®å  4 ä¸ªå­—èŠ‚ï¼Œå­˜å‚¨ç€ä¸€ä¸ªä¸­æ–­æœåŠ¡ç¨‹åºçš„å…¥å£åœ°å€ï¼ˆåŒ…æ‹¬ 16 ä½çš„æ®µåœ°å€ CS å’Œ 16 ä½çš„åç§»åœ°å€ IPï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥æ‰¾å¤„ç†ç¨‹åº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ CPU å“åº”ä¸€ä¸ªä¸­æ–­æ—¶ï¼Œå®ƒä¼šè·å¾—è¯¥ä¸­æ–­å¯¹åº”çš„ä¸­æ–­ç ï¼ˆä¾‹å¦‚ &lt;code&gt;n&lt;/code&gt;ï¼‰ã€‚ç„¶åï¼ŒCPU é€šè¿‡ä¸€ä¸ªç®€å•çš„å…¬å¼è®¡ç®—å‡ºè¯¥ä¸­æ–­å¯¹åº”çš„å…¥å£åœ°å€åœ¨â€œç”µè¯ç°¿â€ä¸­çš„ä½ç½®ï¼š&lt;strong&gt;ä¸­æ–­å‘é‡åœ°å€ = n Ã— 4&lt;/strong&gt; ã€‚æ¥ç€ï¼ŒCPU ä»åœ°å€ &lt;code&gt;nÃ—4&lt;/code&gt;å¤„è¯»å‡ºåç§»åœ°å€ï¼ˆIPï¼‰ï¼Œä» &lt;code&gt;nÃ—4+2&lt;/code&gt;å¤„è¯»å‡ºæ®µåœ°å€ï¼ˆCSï¼‰ï¼Œæœ€åå°† CS:IP æŒ‡å‘çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ä¸­æ–­æœåŠ¡ç¨‹åºçš„èµ·ç‚¹ï¼Œå¼€å§‹æ‰§è¡ŒçœŸæ­£çš„å¤„ç†ä»£ç  ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸­æ–­å“åº”æµç¨‹"&gt;ğŸ”„ ä¸­æ–­å“åº”æµç¨‹
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªå®Œæ•´çš„ä¸­æ–­å“åº”è¿‡ç¨‹å¯ä»¥ç®€åŒ–ä¸ºä»¥ä¸‹æ­¥éª¤ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­è¯·æ±‚&lt;/strong&gt;ï¼šä¸­æ–­æºï¼ˆç¡¬ä»¶æˆ–è½¯ä»¶ï¼‰å‘ CPU å‘å‡ºè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–ä¸­æ–­ç &lt;/strong&gt;ï¼šCPU ç¡®å®šå½“å‰éœ€è¦å“åº”çš„æœ€é«˜ä¼˜å…ˆçº§ä¸­æ–­ï¼Œå¹¶è·å–å…¶ä¸­æ–­ç±»å‹ç  &lt;code&gt;n&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŠ¤ç°åœº&lt;/strong&gt;ï¼šCPU è‡ªåŠ¨å°†å½“å‰çš„æ ‡å¿—å¯„å­˜å™¨ï¼ˆFLAGS/PSWï¼‰å’Œæ–­ç‚¹åœ°å€ï¼ˆCS å’Œ IPï¼‰å‹å…¥å †æ ˆä¿å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é—­ä¸­æ–­&lt;/strong&gt;ï¼ˆå¯é€‰ï¼‰ï¼šCPU ä¼šè‡ªåŠ¨æ¸…é™¤æ ‡å¿—å¯„å­˜å™¨ä¸­çš„ä¸­æ–­å…è®¸æ ‡å¿—ï¼ˆIFï¼‰å’Œé™·é˜±æ ‡å¿—ï¼ˆTFï¼‰ï¼Œä»¥é˜²æ­¢åœ¨å¤„ç†å½“å‰ä¸­æ–­æ—¶è¢«æ–°çš„å¯å±è”½ä¸­æ–­æˆ–å•æ­¥ä¸­æ–­æ‰“æ–­ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥æ‰¾å…¥å£&lt;/strong&gt;ï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œåˆ©ç”¨ä¸­æ–­ç  &lt;code&gt;n&lt;/code&gt;åœ¨ä¸­æ–­å‘é‡è¡¨ä¸­æ‰¾åˆ°ä¸­æ–­æœåŠ¡ç¨‹åºçš„å…¥å£åœ°å€ï¼Œå¹¶è®¾ç½® CS å’Œ IPã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡ŒæœåŠ¡ç¨‹åº&lt;/strong&gt;ï¼šCPU å¼€å§‹æ‰§è¡Œä¸­æ–­æœåŠ¡ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­è¿”å›&lt;/strong&gt;ï¼šæœåŠ¡ç¨‹åºæ‰§è¡Œå®Œæ¯•åï¼Œé€šè¿‡ &lt;code&gt;IRET&lt;/code&gt;æŒ‡ä»¤æ¢å¤ä¹‹å‰ä¿å­˜çš„ç°åœºï¼ˆå¼¹å‡º IP, CS å’Œæ ‡å¿—å¯„å­˜å™¨ï¼‰ï¼ŒCPU ç»§ç»­æ‰§è¡Œè¢«ä¸­æ–­çš„ç¨‹åº ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸­æ–­ç çš„æ¥æº"&gt;ğŸ’¡ ä¸­æ–­ç çš„æ¥æº
&lt;/h3&gt;&lt;p&gt;ä¸åŒç±»å‹çš„ä¸­æ–­ï¼Œå…¶ä¸­æ–­ç çš„è·å–æ–¹å¼ä¹Ÿä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰&lt;/strong&gt;ï¼šå¦‚é™¤æ³•é”™è¯¯ã€å•æ­¥ä¸­æ–­ç­‰ï¼Œå…¶ä¸­æ–­ç æ˜¯ç”± &lt;strong&gt;CPU å†…éƒ¨ç¡¬ä»¶è‡ªåŠ¨äº§ç”Ÿ&lt;/strong&gt;çš„å›ºå®šå€¼ï¼ˆå¦‚ 0, 1ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯ä»¶ä¸­æ–­&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;INT n&lt;/code&gt;æŒ‡ä»¤æ—¶ï¼Œä¸­æ–­ç  &lt;code&gt;n&lt;/code&gt;ç”±&lt;strong&gt;æŒ‡ä»¤æœ¬èº«ç›´æ¥ç»™å‡º&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–éƒ¨å¯å±è”½ä¸­æ–­&lt;/strong&gt;ï¼šæ¥è‡ªå¤–éƒ¨è®¾å¤‡çš„ä¸­æ–­è¯·æ±‚ï¼Œå…¶ä¸­æ–­ç æ˜¯ç”±&lt;strong&gt;å¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨ï¼ˆå¦‚ 8259Aï¼‰&lt;/strong&gt; åœ¨ CPU å“åº”ä¸­æ–­æ—¶æä¾›ç»™ CPU çš„ ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥ç¼–ç¨‹è®¾å®š 8259Aï¼Œä½¿ä¸åŒçš„ä¸­æ–­è¯·æ±‚çº¿ï¼ˆIRQï¼‰å¯¹åº”ä¸åŒçš„ä¸­æ–­ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éå±è”½ä¸­æ–­&lt;/strong&gt;ï¼šä¸­æ–­ç ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚åœ¨ x86 ç³»ç»Ÿä¸­é€šå¸¸ä¸º &lt;strong&gt;2&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç°ä»£ç³»ç»Ÿä¸­çš„æ¼”è¿›"&gt;ğŸ†š ç°ä»£ç³»ç»Ÿä¸­çš„æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;åœ¨ç°ä»£æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Linuxï¼‰å’Œ x86-64 ç­‰æ›´å…ˆè¿›çš„æ¶æ„ä¸­ï¼Œä¸­æ–­å¤„ç†çš„åŸºæœ¬æ€æƒ³å¾—ä»¥å»¶ç»­ï¼Œä½†å…·ä½“å®ç°æ›´ä¸ºå¤æ‚å’Œå¼ºå¤§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­æè¿°ç¬¦è¡¨&lt;/strong&gt;ï¼šå–ä»£äº†ä¸­æ–­å‘é‡è¡¨ï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œè¡¨é¡¹ç§°ä¸ºâ€œé—¨â€ï¼ŒåŒ…å«äº†æ›´å¤šçš„æ§åˆ¶ä¿¡æ¯ï¼ˆå¦‚ç‰¹æƒçº§ DPLï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­æ ˆè¡¨&lt;/strong&gt;ï¼šæ”¯æŒä¸ºä¸åŒçš„ä¸­æ–­åˆ†é…ç‹¬ç«‹çš„å†…æ ¸æ ˆï¼Œå¢å¼ºäº†ç³»ç»Ÿçš„ç¨³å¥æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜çº§å¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨&lt;/strong&gt;ï¼šå–ä»£äº†ä¼ ç»Ÿçš„ 8259Aï¼Œæ”¯æŒæ›´å¤šæ•°é‡çš„ä¸­æ–­æºå’Œæ›´å¤æ‚çš„ä¼˜å…ˆçº§ç®¡ç†ï¼Œç‰¹åˆ«é€‚åˆå¤šå¤„ç†å™¨ç³»ç»Ÿ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£â€œä¸­æ–­ç â€è¿™ä¸€è®¡ç®—æœºç³»ç»Ÿä¸­çš„æ ¸å¿ƒæ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id="è®¾å¤‡åˆ†é…"&gt;è®¾å¤‡åˆ†é…
&lt;/h2&gt;&lt;p&gt;è®¾å¤‡åˆ†é…æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒå†³å®šäº†å¦‚ä½•å°†æœ‰é™çš„ç¡¬ä»¶èµ„æºé«˜æ•ˆã€å…¬å¹³åœ°åˆ†é…ç»™å¤šä¸ªè¿›ç¨‹ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å¸¸ç”¨çš„è®¾å¤‡åˆ†é…ç®—æ³•åŠå…¶æ ¸å¿ƒç‰¹æ€§ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç®—æ³•åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;æ½œåœ¨ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ˆæ¥å…ˆæœåŠ¡ (FCFS)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸¥æ ¼æŒ‰ç…§è¿›ç¨‹è¯·æ±‚è®¾å¤‡çš„å…ˆåé¡ºåºæ’é˜Ÿåˆ†é…ã€‚&lt;/td&gt;
&lt;td&gt;è´Ÿè½½è¾ƒè½»ã€å¯¹å…¬å¹³æ€§è¦æ±‚é«˜çš„ç¯å¢ƒã€‚&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œä¿è¯å…¬å¹³æ€§ã€‚&lt;/td&gt;
&lt;td&gt;æ— æ³•æ»¡è¶³ç´§æ€¥ä»»åŠ¡çš„éœ€æ±‚ï¼Œå¹³å‡ç­‰å¾…æ—¶é—´å¯èƒ½è¾ƒé•¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆ (HPF)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿæˆ–ç”¨æˆ·ä¸ºè¿›ç¨‹åˆ†é…ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜å…ˆçº§è¿›ç¨‹çš„I/Oè¯·æ±‚ä¼˜å…ˆè¢«æ»¡è¶³ã€‚&lt;/td&gt;
&lt;td&gt;å®æ—¶ç³»ç»Ÿã€æœ‰ç´§æ€¥ä»»åŠ¡çš„å…³é”®ä¸šåŠ¡ç³»ç»Ÿã€‚&lt;/td&gt;
&lt;td&gt;å…³é”®ä»»åŠ¡èƒ½è·å¾—å¿«é€Ÿå“åº”ã€‚&lt;/td&gt;
&lt;td&gt;å¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¿›ç¨‹â€œé¥¥é¥¿â€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ (SSTF)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€‰æ‹©è·ç¦»å½“å‰ç£å¤´ä½ç½®æœ€è¿‘çš„è¯·æ±‚è¿›è¡ŒæœåŠ¡ï¼Œä»¥å‡å°‘ç£å¤´ç§»åŠ¨ã€‚&lt;/td&gt;
&lt;td&gt;ç£ç›˜è°ƒåº¦ã€‚&lt;/td&gt;
&lt;td&gt;èƒ½æœ‰æ•ˆæé«˜ç£ç›˜çš„ååé‡ï¼Œå‡å°‘å¹³å‡å¯»é“æ—¶é—´ã€‚&lt;/td&gt;
&lt;td&gt;å¹¶éæœ€ä¼˜ï¼Œå¯èƒ½å¯¼è‡´æŸäº›è¾¹ç¼˜ä½ç½®çš„è¯·æ±‚é•¿æ—¶é—´ç­‰å¾…ï¼ˆé¥¥é¥¿ç°è±¡ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰«æç®—æ³• (SCAN, ç”µæ¢¯ç®—æ³•)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç£å¤´åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šç§»åŠ¨ï¼ŒæœåŠ¡æ²¿é€”çš„è¯·æ±‚ï¼Œåˆ°è¾¾ç£ç›˜æœ«ç«¯åå†åå‘æ‰«æã€‚&lt;/td&gt;
&lt;td&gt;ç£ç›˜è°ƒåº¦ã€‚&lt;/td&gt;
&lt;td&gt;é¿å…äº†é¥¥é¥¿ç°è±¡ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚&lt;/td&gt;
&lt;td&gt;åå‘ç§»åŠ¨å‰ï¼Œæœ«ç«¯ä½ç½®çš„è¯·æ±‚ç­‰å¾…æ—¶é—´å¯èƒ½è¾ƒé•¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¾ªç¯æ‰«æç®—æ³• (C-SCAN)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼SCANï¼Œä½†åˆ°è¾¾æœ«ç«¯åç«‹å³è¿”å›èµ·ç‚¹é‡æ–°æ‰«æï¼Œè§†ä¸ºä¸€ä¸ªå¾ªç¯ã€‚&lt;/td&gt;
&lt;td&gt;ç£ç›˜è°ƒåº¦ã€‚&lt;/td&gt;
&lt;td&gt;æ¯”SCANç®—æ³•æä¾›æ›´å‡åŒ€çš„ç­‰å¾…æ—¶é—´ã€‚&lt;/td&gt;
&lt;td&gt;è¿”å›èµ·ç‚¹çš„ç©ºç¨‹ä¸æœåŠ¡ä»»ä½•è¯·æ±‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é“¶è¡Œå®¶ç®—æ³• (Bankerâ€˜s Algorithm)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ†é…å‰é¢„æµ‹ç³»ç»Ÿæ˜¯å¦ä¼šè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œä»…åœ¨å®‰å…¨æ—¶æ‰åˆ†é…ï¼Œç”¨äºé¿å…æ­»é”ã€‚&lt;/td&gt;
&lt;td&gt;å¯¹å®‰å…¨æ€§è¦æ±‚æé«˜çš„ç³»ç»Ÿï¼Œå¸¸ç”¨äºæ•™å­¦å’Œç†è®ºæ¨¡å‹ã€‚&lt;/td&gt;
&lt;td&gt;ä¸€ç§æœ‰æ•ˆçš„æ­»é”é¿å…ç®—æ³•ã€‚&lt;/td&gt;
&lt;td&gt;è®¡ç®—å¼€é”€å¤§ï¼Œè¦æ±‚è¿›ç¨‹æå‰ç”³æ˜æœ€å¤§èµ„æºéœ€æ±‚ï¼Œå®è·µä¸­è¾ƒå¤æ‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SPOOLing æŠ€æœ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ç£ç›˜ä½œä¸ºé«˜é€Ÿç¼“å­˜ï¼Œå°†æ…¢é€Ÿç‹¬å è®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºï¼‰æ”¹é€ æˆå¯è¢«å¤šä¸ªè¿›ç¨‹å…±äº«çš„â€œè™šæ‹Ÿè®¾å¤‡â€ã€‚&lt;/td&gt;
&lt;td&gt;æ‰“å°æœºå…±äº«ç­‰å°†ç‹¬å è®¾å¤‡è™šæ‹ŸåŒ–çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;å°†ç‹¬å è®¾å¤‡æ”¹é€ ä¸ºå…±äº«è®¾å¤‡ï¼Œæé«˜äº†è®¾å¤‡åˆ©ç”¨ç‡å’ŒCPUå¹¶è¡Œåº¦ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦å ç”¨é¢å¤–çš„ç£ç›˜ç©ºé—´ä½œä¸ºè¾“å…¥äº•å’Œè¾“å‡ºäº•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£ç®—æ³•èƒŒåçš„å…³é”®æ¦‚å¿µ"&gt;ğŸ’¡ ç†è§£ç®—æ³•èƒŒåçš„å…³é”®æ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;è¦æ·±å…¥ç†è§£è¿™äº›ç®—æ³•ï¼Œéœ€è¦å…ˆäº†è§£å‡ ä¸ªåŸºç¡€æ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡çš„å›ºæœ‰å±æ€§&lt;/strong&gt;ï¼šè®¾å¤‡æŒ‰å…¶å±æ€§å¯åˆ†ä¸ºç‹¬å è®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºï¼Œä¸€æ®µæ—¶é—´å†…åªèƒ½ç”±ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼‰ã€å…±äº«è®¾å¤‡ï¼ˆå¦‚ç£ç›˜ï¼Œå¯è¢«å¤šä¸ªè¿›ç¨‹äº¤æ›¿ä½¿ç”¨ï¼‰å’Œè™šæ‹Ÿè®¾å¤‡ï¼ˆé€šè¿‡SPOOLingç­‰æŠ€æœ¯å°†ç‹¬å è®¾å¤‡æ¨¡æ‹Ÿæˆçš„å…±äº«è®¾å¤‡ï¼‰ã€‚åˆ†é…ç®—æ³•éœ€è¦æ ¹æ®è®¾å¤‡çš„ä¸åŒå±æ€§è¿›è¡Œè°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡åˆ†é…çš„å®‰å…¨æ€§&lt;/strong&gt;ï¼šåˆ†é…ç­–ç•¥éœ€è¦è€ƒè™‘æ˜¯å¦ä¼šå¼•å‘æ­»é”ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨åˆ†é…æ–¹å¼&lt;/strong&gt;ï¼šè¿›ç¨‹å‘å‡ºI/Oè¯·æ±‚åç«‹å³è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°I/Oæ“ä½œå®Œæˆæ‰è¢«å”¤é†’ã€‚è¿™ç§æ–¹å¼ç ´åäº†â€œè¯·æ±‚å’Œä¿æŒâ€æ¡ä»¶ï¼Œä¸ä¼šå¯¼è‡´æ­»é”ï¼Œä½†CPUä¸I/Oè®¾å¤‡ä¸²è¡Œå·¥ä½œï¼Œæ•ˆç‡è¾ƒä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å®‰å…¨åˆ†é…æ–¹å¼&lt;/strong&gt;ï¼šè¿›ç¨‹å‘å‡ºI/Oè¯·æ±‚åå¯ç»§ç»­è¿è¡Œï¼Œå¯ä»¥è¿ç»­è¯·æ±‚å¤šä¸ªè®¾å¤‡ã€‚è¿™ç§æ–¹å¼æ•ˆç‡é«˜ï¼Œä½†å¯èƒ½äº§ç”Ÿæ­»é”ï¼Œéœ€è¦é…å¥—çš„æ­»é”æ£€æµ‹æˆ–é¿å…æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡ç‹¬ç«‹æ€§ï¼ˆè®¾å¤‡æ— å…³æ€§ï¼‰&lt;/strong&gt;ï¼šä¸ºäº†æé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç§»æ¤æ€§ï¼Œç°ä»£æ“ä½œç³»ç»Ÿè®©ç”¨æˆ·ç¨‹åºä½¿ç”¨&lt;strong&gt;é€»è¾‘è®¾å¤‡å&lt;/strong&gt;ï¼ˆå¦‚â€œæ‰“å°æœº1â€ï¼‰æ¥è¯·æ±‚è®¾å¤‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨&lt;strong&gt;ç‰©ç†è®¾å¤‡å&lt;/strong&gt;ï¼ˆå¦‚â€œUSB001â€ï¼‰ã€‚æ“ä½œç³»ç»Ÿé€šè¿‡&lt;strong&gt;é€»è¾‘è®¾å¤‡è¡¨ï¼ˆLUTï¼‰&lt;/strong&gt; æ¥å®Œæˆä»é€»è¾‘è®¾å¤‡ååˆ°ç‰©ç†è®¾å¤‡ååŠé©±åŠ¨ç¨‹åºçš„æ˜ å°„ã€‚è¿™ä½¿å¾—æ›´æ¢ç‰©ç†è®¾å¤‡æ—¶æ— éœ€ä¿®æ”¹åº”ç”¨ç¨‹åºï¼Œä¹Ÿä¾¿äºç³»ç»Ÿçµæ´»åˆ†é…åŒç±»è®¾å¤‡ä¸­çš„ä»»æ„ç©ºé—²è®¾å¤‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è®¾å¤‡åˆ†é…çš„æ•°æ®ç»“æ„ä¸æµç¨‹"&gt;âš™ï¸ è®¾å¤‡åˆ†é…çš„æ•°æ®ç»“æ„ä¸æµç¨‹
&lt;/h3&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿé€šè¿‡ä¸€ç³»åˆ—æ•°æ®ç»“æ„æ¥è·Ÿè¸ªå’Œç®¡ç†è®¾å¤‡çŠ¶æ€ï¼Œè¿™æ˜¯ç®—æ³•å¾—ä»¥æ‰§è¡Œçš„åŸºç¡€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡æ§åˆ¶è¡¨ (DCT)&lt;/strong&gt;ï¼šæ¯ä¸ªè®¾å¤‡ä¸€å¼ ï¼Œè®°å½•è®¾å¤‡çŠ¶æ€ï¼ˆå¿™/é—²ï¼‰ã€ç­‰å¾…é˜Ÿåˆ—ã€ç›¸è¿çš„æ§åˆ¶å™¨ç­‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶å™¨æ§åˆ¶è¡¨ (COCT)&lt;/strong&gt;ï¼šæ¯ä¸ªè®¾å¤‡æ§åˆ¶å™¨ä¸€å¼ ï¼Œè®°å½•æ§åˆ¶å™¨çŠ¶æ€åŠå…¶ç›¸è¿çš„é€šé“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šé“æ§åˆ¶è¡¨ (CHCT)&lt;/strong&gt;ï¼šæ¯ä¸ªé€šé“ä¸€å¼ ï¼Œç®¡ç†é€šé“çš„çŠ¶æ€å’Œæ§åˆ¶å™¨çš„è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè®¾å¤‡è¡¨ (SDT)&lt;/strong&gt;ï¼šå…¨å±€è¡¨æ ¼ï¼Œè®°å½•ç³»ç»Ÿä¸­æ‰€æœ‰è®¾å¤‡çš„ä¿¡æ¯ï¼Œæ˜¯è®¾å¤‡åˆ†é…çš„å…¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ï¼ˆæ”¹è¿›åçš„ï¼‰è®¾å¤‡åˆ†é…æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿›ç¨‹ä½¿ç”¨&lt;strong&gt;é€»è¾‘è®¾å¤‡å&lt;/strong&gt;æå‡ºI/Oè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»ŸæŸ¥è¯¢SDTï¼Œæ‰¾åˆ°è¯¥ç±»å‹çš„æ‰€æœ‰è®¾å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿæ£€æŸ¥è¿™äº›è®¾å¤‡çš„DCTï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²è®¾å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡DCTæ‰¾åˆ°å¯¹åº”çš„COCTï¼Œåˆ†é…æ§åˆ¶å™¨ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡COCTæ‰¾åˆ°å¯¹åº”çš„CHCTï¼Œåˆ†é…é€šé“ã€‚&lt;/li&gt;
&lt;li&gt;è®¾å¤‡ã€æ§åˆ¶å™¨ã€é€šé“å‡åˆ†é…æˆåŠŸåï¼Œå¯åŠ¨I/Oæ“ä½œã€‚è‹¥ä»»ä½•ä¸€æ­¥èµ„æºå¿™ç¢Œï¼Œè¿›ç¨‹å¯èƒ½ä¼šè¢«æ”¾å…¥ç›¸åº”çš„ç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£è®¾å¤‡åˆ†é…çš„å¸¸ç”¨ç®—æ³•ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç®—æ³•æˆ–åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘JAVA 2</title><link>https://dyhes.github.io/p/nowcoderjava-2/</link><pubDate>Wed, 01 Oct 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderjava-2/</guid><description>&lt;h2 id="è‡ªåŠ¨è£…ç®±"&gt;è‡ªåŠ¨è£…ç®±
&lt;/h2&gt;&lt;p&gt;è‡ªåŠ¨è£…ç®±ï¼ˆAutoboxingï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆAuto-unboxingï¼‰æ˜¯ Java 5 å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒä»¬ç®€åŒ–äº†åŸºæœ¬æ•°æ®ç±»å‹ä¸å…¶å¯¹åº”åŒ…è£…ç±»ä¹‹é—´çš„è½¬æ¢ï¼Œè®©ä»£ç æ›´ç®€æ´ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;å®šä¹‰&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;åº•å±‚åŸç†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨è£…ç®±&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹å€¼è½¬æ¢ä¸ºå¯¹åº”çš„åŒ…è£…ç±»å¯¹è±¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Integer i = 100;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å™¨è°ƒç”¨ &lt;code&gt;Integer.valueOf(100)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨æ‹†ç®±&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨å°†åŒ…è£…ç±»å¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int j = i;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å™¨è°ƒç”¨ &lt;code&gt;i.intValue()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•éœ€è¦è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±"&gt;ğŸ’¡ ä¸ºä½•éœ€è¦è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±
&lt;/h3&gt;&lt;p&gt;åœ¨ Java è¿™æ ·çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œå¾ˆå¤šåœ°æ–¹ï¼ˆæ¯”å¦‚é›†åˆæ¡†æ¶ &lt;code&gt;ArrayList&lt;/code&gt;ã€&lt;code&gt;HashMap&lt;/code&gt;ï¼‰åªèƒ½æ“ä½œå¯¹è±¡ã€‚è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ä½¿å¾—æˆ‘ä»¬æ—¢èƒ½åˆ©ç”¨åŸºæœ¬æ•°æ®ç±»å‹çš„é«˜æ•ˆï¼Œåˆèƒ½åœ¨éœ€è¦å¯¹è±¡çš„åœºåˆæ— ç¼ä½¿ç”¨å®ƒä»¬ï¼Œæå¤§åœ°æå‡äº†ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§ ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸ç»†èŠ‚"&gt;ğŸ” å·¥ä½œåŸç†ä¸ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±æ˜¯ Java ç¼–è¯‘å™¨æä¾›çš„â€œè¯­æ³•ç³–â€ï¼Œç¼–è¯‘æ—¶ç¼–è¯‘å™¨ä¼šå¸®ä½ æ’å…¥å¿…è¦çš„è½¬æ¢ä»£ç  ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨è£…ç®±çš„åº•å±‚&lt;/strong&gt;ï¼šå®é™…è°ƒç”¨çš„æ˜¯åŒ…è£…ç±»çš„ &lt;code&gt;valueOf()&lt;/code&gt;æ–¹æ³•ï¼Œä¾‹å¦‚ &lt;code&gt;Integer.valueOf()&lt;/code&gt;ï¼Œè€Œä¸æ˜¯ &lt;code&gt;new Integer()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æ‹†ç®±çš„åº•å±‚&lt;/strong&gt;ï¼šå®é™…è°ƒç”¨çš„æ˜¯åŒ…è£…ç±»çš„ &lt;code&gt;xxxValue()&lt;/code&gt;æ–¹æ³•ï¼Œä¾‹å¦‚ &lt;code&gt;Integer.intValue()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;åŒ…è£…ç±»çš„ç¼“å­˜æœºåˆ¶&lt;/strong&gt;ã€‚ä»¥ &lt;code&gt;Integer&lt;/code&gt;ä¸ºä¾‹ï¼Œå¯¹äº &lt;strong&gt;-128 åˆ° 127&lt;/strong&gt; ä¹‹é—´çš„æ•´æ•°ï¼Œ&lt;code&gt;valueOf()&lt;/code&gt;æ–¹æ³•ä¼šè¿”å›é¢„å…ˆåˆ›å»ºå¥½çš„ç¼“å­˜å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°å¯¹è±¡ ã€‚å› æ­¤ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…ç”¨ &lt;code&gt;==&lt;/code&gt;æ¯”è¾ƒå¯èƒ½ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œä½†è¶…å‡ºæ­¤èŒƒå›´åˆ™ç»“æœä¸º &lt;code&gt;false&lt;/code&gt;ã€‚&lt;strong&gt;è¿›è¡Œå€¼æ¯”è¾ƒæ—¶ï¼Œæ›´å¯é çš„æ–¹å¼æ˜¯ä½¿ç”¨ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Integer a = 127;
Integer b = 127;
System.out.println(a == b); // true, å› ä¸ºå‘½ä¸­äº†ç¼“å­˜
Integer c = 128;
Integer d = 128;
System.out.println(c == d); // false, å› ä¸ºè¶…å‡ºäº†ç¼“å­˜èŒƒå›´ï¼Œæ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡
System.out.println(c.equals(d)); // true, æ¯”è¾ƒçš„æ˜¯å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä½¿ç”¨æ³¨æ„äº‹é¡¹"&gt;âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å°½ç®¡è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡è£…ç®±éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ˆå°½ç®¡å°æ•´æ•°æœ‰ç¼“å­˜ï¼‰ï¼Œè€Œæ‹†ç®±éœ€è¦è°ƒç”¨æ–¹æ³•ã€‚åœ¨&lt;strong&gt;å¤§é‡å¾ªç¯æˆ–æ€§èƒ½æ•æ„Ÿçš„ä»£ç &lt;/strong&gt;ä¸­ï¼Œé¢‘ç¹çš„è£…ç®±/æ‹†ç®±å¯èƒ½ä¼šå¸¦æ¥ä¸å¿…è¦çš„å†…å­˜å¼€é”€å’Œåƒåœ¾å›æ”¶å‹åŠ›ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œç›´æ¥ä½¿ç”¨åŸºæœ¬ç±»å‹é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹© ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºæŒ‡é’ˆé£é™©&lt;/strong&gt;ï¼šåŒ…è£…ç±»å¯¹è±¡å¯ä»¥ä¸º &lt;code&gt;null&lt;/code&gt;ï¼Œè€ŒåŸºæœ¬ç±»å‹ä¸èƒ½ã€‚å¦‚æœå¯¹ä¸€ä¸ªå€¼ä¸º &lt;code&gt;null&lt;/code&gt;çš„åŒ…è£…ç±»å¯¹è±¡è¿›è¡Œè‡ªåŠ¨æ‹†ç®±ï¼Œä¼šæŠ›å‡º &lt;code&gt;NullPointerException&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Integer nullInteger = null;
int num = nullInteger; // è¿è¡Œæ—¶æŠ›å‡º NullPointerException
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼“å­˜æœºåˆ¶çš„å½±å“&lt;/strong&gt;ï¼šå¦‚ä¸Šæ–‡æ‰€è¿°ï¼ŒåŒ…è£…ç±»çš„ç¼“å­˜æœºåˆ¶ä¼šå½±å“ &lt;code&gt;==&lt;/code&gt;è¿ç®—ç¬¦çš„æ¯”è¾ƒç»“æœã€‚å¯¹äºå€¼çš„æ¯”è¾ƒï¼Œåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³• ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±æ˜¯ Java å¼€å‘ä¸­çš„å®ç”¨ç‰¹æ€§ï¼Œå®ƒä»¬é€šè¿‡åœ¨åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»ä¹‹é—´æ¶èµ·ä¸€åº§è‡ªåŠ¨åŒ–çš„æ¡¥æ¢ï¼Œè®©ä»£ç ç¼–å†™æ›´åŠ ä¾¿æ·ã€‚ç†è§£å…¶èƒŒåçš„åŸç†å’Œæ³¨æ„äº‹é¡¹ï¼Œèƒ½å¸®åŠ©ä½ åœ¨äº«å—ä¾¿åˆ©çš„åŒæ—¶ï¼Œå†™å‡ºæ›´å¥å£®ã€é«˜æ•ˆçš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ å¯¹æŸä¸ªç»†èŠ‚è¿˜æƒ³æ·±å…¥äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="èŒƒå‹"&gt;èŒƒå‹
&lt;/h2&gt;&lt;p&gt;æ³›å‹ã€é€†å˜å’Œåå˜æ˜¯ç±»å‹ç³»ç»Ÿä¸­æ—¢é‡è¦åˆå®¹æ˜“è®©äººå›°æƒ‘çš„æ¦‚å¿µã€‚ä¸ºäº†å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒç‰¹å¾å’Œè®¾è®¡è€ƒé‡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒå®šä¹‰&lt;/th&gt;
&lt;th&gt;å…¸å‹è¯­æ³•/åœºæ™¯&lt;/th&gt;
&lt;th&gt;å…³é”®çº¦æŸä¸è®¾è®¡è€ƒé‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³›å‹ (Generics)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‚æ•°åŒ–ç±»å‹ï¼Œåˆ›å»ºå¯å¤ç”¨ä¸”ç±»å‹å®‰å…¨çš„ä»£ç ç»„ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;List&amp;lt;String&amp;gt;&lt;/code&gt;, &lt;code&gt;Box&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è§£å†³åŸå§‹ç±»å‹çš„ç±»å‹å®‰å…¨é—®é¢˜ï¼›Javaé€šè¿‡ç±»å‹æ“¦é™¤å®ç°ï¼Œå¯èƒ½å¯¼è‡´è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ä¸¢å¤±ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åå˜ (Covariance)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœ &lt;code&gt;Cat&lt;/code&gt;æ˜¯ &lt;code&gt;Animal&lt;/code&gt;çš„å­ç±»å‹ï¼Œåˆ™ &lt;code&gt;Generic&amp;lt;Cat&amp;gt;&lt;/code&gt;ä¹Ÿæ˜¯ &lt;code&gt;Generic&amp;lt;Animal&amp;gt;&lt;/code&gt;çš„å­ç±»å‹ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;? extends Animal&amp;gt;&lt;/code&gt;(Java)ï¼Œ&lt;code&gt;out T&lt;/code&gt;(Kotlin)ï¼Œæ•°ç»„ï¼ˆJavaä¸­&lt;code&gt;String[]&lt;/code&gt;å¯èµ‹å€¼ç»™&lt;code&gt;Object[]&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åªè¯»å®‰å…¨&lt;/strong&gt;ã€‚å…è®¸è¯»å–ï¼ˆè¿”å›æ›´å…·ä½“çš„ç±»å‹ï¼‰ï¼Œä½†ç¦æ­¢å†™å…¥ï¼ˆæ— æ³•ä¿è¯ç±»å‹å®‰å…¨ï¼‰ã€‚Javaæ•°ç»„çš„åå˜æ˜¯å†å²è®¾è®¡ï¼Œå¯èƒ½å¯¼è‡´&lt;code&gt;ArrayStoreException&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€†å˜ (Contravariance)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœ &lt;code&gt;Cat&lt;/code&gt;æ˜¯ &lt;code&gt;Animal&lt;/code&gt;çš„å­ç±»å‹ï¼Œåˆ™ &lt;code&gt;Generic&amp;lt;Animal&amp;gt;&lt;/code&gt;æ˜¯ &lt;code&gt;Generic&amp;lt;Cat&amp;gt;&lt;/code&gt;çš„å­ç±»å‹ï¼ˆç»§æ‰¿å…³ç³»åè½¬ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;? super Cat&amp;gt;&lt;/code&gt;(Java)ï¼Œ&lt;code&gt;in T&lt;/code&gt;(Kotlin)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†™å…¥å®‰å…¨&lt;/strong&gt;ã€‚å…è®¸å†™å…¥ï¼ˆæ¥å—å…·ä½“ç±»å‹åŠå…¶å­ç±»ï¼‰ï¼Œä½†è¯»å–ä¸å®‰å…¨ï¼ˆåªèƒ½è¯»å–ä¸º&lt;code&gt;Object&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•éœ€è¦æ³›å‹"&gt;ğŸ’¡ ä¸ºä½•éœ€è¦æ³›å‹
&lt;/h3&gt;&lt;p&gt;åœ¨æ³›å‹å‡ºç°ä¹‹å‰ï¼Œä½¿ç”¨é›†åˆç±»ç­‰é€šç”¨æ•°æ®ç»“æ„æ—¶ï¼Œéœ€è¦å°†å…ƒç´ è§†ä¸º &lt;code&gt;Object&lt;/code&gt;ç±»å‹ã€‚è¿™å¸¦æ¥äº†ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹ä¸å®‰å…¨&lt;/strong&gt;ï¼šç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥æ·»åŠ çš„å…ƒç´ ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Œåªèƒ½ä¾èµ–ç¨‹åºå‘˜è‡ªå·±ä¿è¯ï¼Œå®¹æ˜“åœ¨è¿è¡Œæ—¶å‡ºç° &lt;code&gt;ClassCastException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¹ççš„ç±»å‹è½¬æ¢&lt;/strong&gt;ï¼šæ¯æ¬¡ä»é›†åˆä¸­å–å‡ºå…ƒç´ ï¼Œéƒ½éœ€è¦è¿›è¡Œæ˜¾å¼çš„å‘ä¸‹ç±»å‹è½¬æ¢ï¼Œä»£ç å†—é•¿ä¸”å®¹æ˜“å‡ºé”™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ³›å‹é€šè¿‡åœ¨ç¼–è¯‘æœŸå¼ºåˆ¶æ‰§è¡Œç±»å‹çº¦æŸï¼Œå®Œç¾åœ°è§£å†³äº†è¿™äº›é—®é¢˜ã€‚å®ƒè®©ç±»å‹æˆä¸ºå‚æ•°ï¼Œä½¿å¾—ç±»ã€æ¥å£å’Œæ–¹æ³•å¯ä»¥åœ¨ä¸åŒç±»å‹çš„å¯¹è±¡ä¸Šæ“ä½œï¼ŒåŒæ—¶ä¿è¯ç¼–è¯‘æ—¶çš„ç±»å‹å®‰å…¨ ã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£åå˜æ”¾å®½è¯»å–çš„é™åˆ¶"&gt;ğŸ”„ ç†è§£åå˜ï¼šæ”¾å®½è¯»å–çš„é™åˆ¶
&lt;/h3&gt;&lt;p&gt;åå˜çš„æ ¸å¿ƒç›´è§‰æ˜¯ &lt;strong&gt;&amp;ldquo;æ˜¯ä¸€ç§&amp;quot;çš„å…³ç³»å¯ä»¥ä¼ é€’&lt;/strong&gt;ã€‚å¦‚æœ &lt;code&gt;Dog&lt;/code&gt;æ˜¯ä¸€ç§ &lt;code&gt;Animal&lt;/code&gt;ï¼Œé‚£ä¹ˆä¸€ç¯®å­ &lt;code&gt;Dog&lt;/code&gt;ï¼ˆ&lt;code&gt;List&amp;lt;Dog&amp;gt;&lt;/code&gt;ï¼‰ä¹Ÿåº”è¯¥å¯ä»¥è¢«è§†ä¸ºä¸€ç¯®å­ &lt;code&gt;Animal&lt;/code&gt;ï¼ˆ&lt;code&gt;List&amp;lt;Animal&amp;gt;&lt;/code&gt;ï¼‰æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚è¯»å–å…¶ä¸­çš„å…ƒç´  ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œè¿™ç§æ”¾å®½æ˜¯æœ‰ä»£ä»·çš„ï¼š&lt;strong&gt;åå˜ç»“æ„æ˜¯åªè¯»çš„&lt;/strong&gt;ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå¦‚æœå…è®¸å†™å…¥ï¼Œå°±ä¼šç ´åç±»å‹å®‰å…¨ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;Dog&amp;gt; dogs = new ArrayList&amp;lt;&amp;gt;();
List&amp;lt;? extends Animal&amp;gt; animals = dogs; // åå˜ï¼Œåˆæ³•
animals.add(new Cat()); // ç¼–è¯‘é”™è¯¯ï¼å¦åˆ™ dogs é‡Œä¼šæ··å…¥ Cat
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¼–è¯‘å™¨ä¼šé˜»æ­¢ &lt;code&gt;add&lt;/code&gt;æ“ä½œï¼Œå› ä¸ºå®ƒæ— æ³•ç¡®å®š &lt;code&gt;animals&lt;/code&gt;å®é™…å¼•ç”¨çš„é›†åˆå…·ä½“å…è®¸æ·»åŠ å“ªç§ &lt;code&gt;Animal&lt;/code&gt;çš„å­ç±»ï¼ˆå¯èƒ½æ˜¯ &lt;code&gt;Dog&lt;/code&gt;ï¼Œä¹Ÿå¯èƒ½æ˜¯ &lt;code&gt;Cat&lt;/code&gt;ï¼‰ã€‚å› æ­¤ï¼Œå¯¹å£°æ˜ä¸ºåå˜çš„æ³›å‹é›†åˆï¼Œåªèƒ½ä»ä¸­å®‰å…¨åœ° &lt;strong&gt;è¯»å–&lt;/strong&gt; å…ƒç´ ï¼ˆè¯»å‡ºçš„ç±»å‹æ˜¯ &lt;code&gt;Animal&lt;/code&gt;ï¼‰ï¼Œè€Œä¸èƒ½ &lt;strong&gt;å†™å…¥&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;Java ä¸­çš„æ•°ç»„è¢«è®¾è®¡ä¸ºåå˜çš„ï¼Œä½†è¿™è¢«æ™®éè®¤ä¸ºæ˜¯ä¸€ä¸ªå†å²æ€§çš„è®¾è®¡ç¼ºé™·ï¼Œå› ä¸ºå®ƒä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡º &lt;code&gt;ArrayStoreException&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£é€†å˜æ”¾å®½å†™å…¥çš„é™åˆ¶"&gt;ğŸ”ƒ ç†è§£é€†å˜ï¼šæ”¾å®½å†™å…¥çš„é™åˆ¶
&lt;/h3&gt;&lt;p&gt;é€†å˜ç›´è§‚ä¸Šä¸é‚£ä¹ˆå¥½ç†è§£ã€‚å®ƒåè½¬äº†å­ç±»å‹å…³ç³»ï¼šå¦‚æœ &lt;code&gt;Dog&lt;/code&gt;æ˜¯ä¸€ç§ &lt;code&gt;Animal&lt;/code&gt;ï¼Œé‚£ä¹ˆä¸€ä¸ªå¤„ç† &lt;code&gt;Animal&lt;/code&gt;çš„å®¹å™¨ï¼ˆ&lt;code&gt;List&amp;lt;Animal&amp;gt;&lt;/code&gt;ï¼‰åè€Œå¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªå¤„ç† &lt;code&gt;Dog&lt;/code&gt;çš„å®¹å™¨ï¼ˆ&lt;code&gt;List&amp;lt;Dog&amp;gt;&lt;/code&gt;ï¼‰æ¥ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ &lt;strong&gt;å†™å…¥&lt;/strong&gt; æ“ä½œä¸Š ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¿™æ ·æœ‰ç”¨ï¼Ÿå› ä¸ºè¿™æ ·çš„å®¹å™¨èƒ½å¤Ÿæ¥å— &lt;code&gt;Dog&lt;/code&gt;ä»¥åŠä»»ä½• &lt;code&gt;Dog&lt;/code&gt;çš„å­ç±»ã€‚é€†å˜çš„æ ¸å¿ƒåœ¨äº &lt;strong&gt;æ”¯æŒå®‰å…¨å†™å…¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;Animal&amp;gt; animals = new ArrayList&amp;lt;&amp;gt;();
List&amp;lt;? super Dog&amp;gt; dogConsumer = animals; // é€†å˜ï¼Œåˆæ³•
dogConsumer.add(new Dog()); // å®‰å…¨ï¼ŒDog å¯ä»¥è¢«åŠ å…¥ Animal é›†åˆ
dogConsumer.add(new Labrador()); // å®‰å…¨ï¼ŒLabrador æ˜¯ Dog çš„å­ç±»
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†æ˜¯ï¼Œä»é€†å˜ç»“æ„ä¸­ &lt;strong&gt;è¯»å–&lt;/strong&gt; æ•°æ®æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæ— æ³•ç¡®å®šå–å‡ºçš„å¯¹è±¡å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œåªèƒ½çŸ¥é“å®ƒæ˜¯ &lt;code&gt;Object&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨åŸåˆ™ä¸å¤šè¯­è¨€è§†è§’"&gt;ğŸ“š åº”ç”¨åŸåˆ™ä¸å¤šè¯­è¨€è§†è§’
&lt;/h3&gt;&lt;p&gt;ç†è§£è¿™äº›æ¦‚å¿µåï¼Œå…³é”®åœ¨äºåº”ç”¨ã€‚&lt;strong&gt;PECS åŸåˆ™&lt;/strong&gt;ï¼ˆProducer-Extends, Consumer-Superï¼‰æ˜¯ Java ä¸­ä½¿ç”¨é€šé…ç¬¦çš„é‡è¦æŒ‡å— ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§è€…ï¼ˆProducerï¼‰&lt;/strong&gt;ï¼šå¦‚æœä½ éœ€è¦ä¸€ä¸ªæä¾› &lt;code&gt;T&lt;/code&gt;ç±»å‹æ•°æ®çš„å¯¹è±¡ï¼ˆç”Ÿäº§è€…ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;&amp;lt;? extends T&amp;gt;&lt;/code&gt;ï¼ˆåå˜ï¼‰ï¼Œå› ä¸ºä½ åªä»ä¸­è¯»å–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰&lt;/strong&gt;ï¼šå¦‚æœä½ éœ€è¦ä¸€ä¸ªæ¥æ”¶ &lt;code&gt;T&lt;/code&gt;ç±»å‹æ•°æ®çš„å¯¹è±¡ï¼ˆæ¶ˆè´¹è€…ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;&amp;lt;? super T&amp;gt;&lt;/code&gt;ï¼ˆé€†å˜ï¼‰ï¼Œå› ä¸ºä½ åªå‘å®ƒå†™å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;java.util.Collections&lt;/code&gt;çš„ &lt;code&gt;copy&lt;/code&gt;æ–¹æ³•æ˜¯ä¸€ä¸ªç»å…¸ä¾‹å­ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public static &amp;lt;T&amp;gt; void copy(List&amp;lt;? super T&amp;gt; dest, List&amp;lt;? extends T&amp;gt; src)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œï¼Œ&lt;code&gt;src&lt;/code&gt;æ˜¯ç”Ÿäº§è€…ï¼Œæ•…ç”¨ &lt;code&gt;extends&lt;/code&gt;ï¼›&lt;code&gt;dest&lt;/code&gt;æ˜¯æ¶ˆè´¹è€…ï¼Œæ•…ç”¨ &lt;code&gt;super&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸åŒè¯­è¨€å¯¹å‹å˜çš„å¤„ç†å„æœ‰ç‰¹è‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kotlin&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;out&lt;/code&gt;ï¼ˆåå˜ï¼‰å’Œ &lt;code&gt;in&lt;/code&gt;ï¼ˆé€†å˜ï¼‰å…³é”®å­—åœ¨&lt;strong&gt;å£°æ˜å¤„&lt;/strong&gt;æŒ‡å®šå‹å˜ï¼Œæ›´åŠ ç®€æ´ç›´è§‚ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;C#&lt;/strong&gt;ï¼šä¸ Java ç±»ä¼¼ï¼Œä¹Ÿæ”¯æŒä½¿ç”¨æ¥å£ï¼ˆå¦‚ &lt;code&gt;IEnumerable&amp;lt;out T&amp;gt;&lt;/code&gt;ï¼‰åœ¨å£°æ˜å¤„å®šä¹‰å‹å˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scala&lt;/strong&gt;ï¼šåŒæ ·æ”¯æŒå£°æ˜å¤„å‹å˜ï¼Œä½¿ç”¨ &lt;code&gt;[+T]&lt;/code&gt;è¡¨ç¤ºåå˜ï¼Œ&lt;code&gt;[-T]&lt;/code&gt;è¡¨ç¤ºé€†å˜ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ³›å‹æä¾›äº†ç±»å‹å®‰å…¨çš„æŠ½è±¡ï¼Œè€Œé€†å˜å’Œåå˜åˆ™æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ çš„çµæ´»æ€§ï¼Œå…è®¸æ›´æ™ºèƒ½çš„ç±»å‹å…³ç³»ä¼ é€’ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³›å‹&lt;/strong&gt;ï¼šè®©ä»£ç åœ¨ç¼–è¯‘æ—¶æ›´å®‰å…¨ï¼Œåœ¨è¡¨è¾¾ä¸Šæ›´æ¸…æ™°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åå˜(&lt;code&gt;extends&lt;/code&gt;/&lt;code&gt;out&lt;/code&gt;)&lt;/strong&gt;ï¼šå…³æ³¨äº&lt;strong&gt;å®‰å…¨åœ°ä»æ³›å‹ç»“æ„ä¸­è¯»å–&lt;/strong&gt;æ•°æ®ï¼Œé€‚ç”¨äºç”Ÿäº§è€…åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€†å˜(&lt;code&gt;super&lt;/code&gt;/&lt;code&gt;in&lt;/code&gt;)&lt;/strong&gt;ï¼šå…³æ³¨äº&lt;strong&gt;å®‰å…¨åœ°å‘æ³›å‹ç»“æ„ä¸­å†™å…¥&lt;/strong&gt;æ•°æ®ï¼Œé€‚ç”¨äºæ¶ˆè´¹è€…åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ ç†æ¸…è¿™äº›é‡è¦æ¦‚å¿µã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šè¯­è¨€ï¼ˆå¦‚ Java æˆ– Kotlinï¼‰çš„å®ç°ç»†èŠ‚æˆ–åº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="èŒƒå‹æ“¦é™¤"&gt;èŒƒå‹æ“¦é™¤
&lt;/h2&gt;&lt;p&gt;æ³›å‹æ“¦é™¤æ˜¯Javaæ³›å‹å®ç°çš„æ ¸å¿ƒæœºåˆ¶ï¼Œç†è§£å®ƒå¯¹äºç¼–å†™æ­£ç¡®ã€é«˜æ•ˆçš„Javaä»£ç è‡³å…³é‡è¦ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¦‚æ‹¬äº†æ³›å‹æ“¦é™¤çš„æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæ–¹é¢&lt;/th&gt;
&lt;th&gt;å…³é”®å†…å®¹&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘é˜¶æ®µå°†æ³›å‹ç±»å‹å‚æ•°ä»å­—èŠ‚ç ä¸­ç§»é™¤çš„è¿‡ç¨‹ï¼Œæ˜¯Javaå®ç°æ³›å‹çš„æ–¹å¼ ã€‚&lt;/td&gt;
&lt;td&gt;æºç ä¸­çš„ &lt;code&gt;List&amp;lt;String&amp;gt;&lt;/code&gt;åœ¨ç¼–è¯‘åå˜ä¸ºåŸå§‹ç±»å‹ &lt;code&gt;List&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰æ³›å‹å‚æ•°è¢«æ›¿æ¢ä¸ºå…¶&lt;strong&gt;æœ€å·¦è¾¹ç•Œ&lt;/strong&gt;ï¼šæ— ç•Œæ›¿æ¢ä¸º &lt;code&gt;Object&lt;/code&gt;ï¼Œæœ‰ç•Œï¼ˆå¦‚ &lt;code&gt;&amp;lt;T extends Number&amp;gt;&lt;/code&gt;ï¼‰åˆ™æ›¿æ¢ä¸ºè¾¹ç•Œç±»å‹ï¼ˆå¦‚ &lt;code&gt;Number&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Box&amp;lt;T&amp;gt;&lt;/code&gt;æ“¦é™¤åå˜ä¸º &lt;code&gt;Box&amp;lt;Object&amp;gt;&lt;/code&gt;ï¼›&lt;code&gt;Box&amp;lt;T extends Number&amp;gt;&lt;/code&gt;æ“¦é™¤åå˜ä¸º &lt;code&gt;Box&amp;lt;Number&amp;gt;&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿è¡Œæ—¶æ— æ³•è·å–æ³›å‹å‚æ•°çš„å…·ä½“ç±»å‹ï¼Œ&lt;code&gt;List&amp;lt;String&amp;gt;.class&lt;/code&gt;ä¸ &lt;code&gt;List&amp;lt;Integer&amp;gt;.class&lt;/code&gt;æ˜¯åŒä¸€ä¸ªClasså¯¹è±¡ ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;System.out.println(List&amp;lt;String&amp;gt;.class == List&amp;lt;Integer&amp;gt;.class); // è¾“å‡ºï¼štrue&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åŸå› &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‘åå…¼å®¹æ€§&lt;/strong&gt;ï¼šç¡®ä¿JDK 5å¼•å…¥çš„æ³›å‹èƒ½ä¸ä¹‹å‰ç‰ˆæœ¬çš„éæ³›å‹ä»£ç ï¼ˆå¦‚åŸå§‹ç±»å‹ &lt;code&gt;List&lt;/code&gt;ï¼‰æ— ç¼åä½œï¼Œæ— éœ€ä¿®æ”¹JVM ã€‚&lt;/td&gt;
&lt;td&gt;å¯ä»¥å°† &lt;code&gt;List&amp;lt;String&amp;gt;&lt;/code&gt;èµ‹å€¼ç»™åŸå§‹ç±»å‹ &lt;code&gt;List&lt;/code&gt;çš„å˜é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¼è‡´ä¸€ç³»åˆ—ä½¿ç”¨é™åˆ¶ï¼Œå¦‚ä¸èƒ½ç›´æ¥åˆ›å»ºæ³›å‹æ•°ç»„ã€æ— æ³•å®ä¾‹åŒ–ç±»å‹å‚æ•°ç­‰ ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;T[] array = new T[10]; // ç¼–è¯‘é”™è¯¯``T obj = new T(); // ç¼–è¯‘é”™è¯¯&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ³›å‹æ“¦é™¤çš„å·¥ä½œåŸç†ä¸æ¡¥æ–¹æ³•"&gt;ğŸ’¡ æ³›å‹æ“¦é™¤çš„å·¥ä½œåŸç†ä¸æ¡¥æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;æ³›å‹æ“¦é™¤ä¸ä»…ä»…æ˜¯ç®€å•åœ°å°†ç±»å‹å‚æ•° &lt;code&gt;T&lt;/code&gt;æ›¿æ¢ä¸º &lt;code&gt;Object&lt;/code&gt;æˆ–å…¶ä¸Šç•Œã€‚ä¸ºäº†ä¿æŒå¤šæ€æ€§ï¼Œç¼–è¯‘å™¨è¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆ&lt;strong&gt;æ¡¥æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªå®ç°äº† &lt;code&gt;Comparable&amp;lt;T&amp;gt;&lt;/code&gt;æ¥å£çš„ç±» ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¼–è¯‘å‰
class MyInt implements Comparable&amp;lt;MyInt&amp;gt; {
@Override
public int compareTo(MyInt other) { ... }
}
// ç¼–è¯‘åï¼ˆæ¦‚å¿µä¸Šï¼‰
class MyInt implements Comparable { // ç±»å‹å‚æ•°è¢«æ“¦é™¤
// ç¼–è¯‘å™¨ç”Ÿæˆçš„æ¡¥æ–¹æ³•ï¼Œä»¥ç»´æŒä¸æ¥å£çš„å¥‘çº¦
public int compareTo(Object other) {
return compareTo((MyInt) other); // è°ƒç”¨æˆ‘ä»¬é‡å†™çš„ç‰ˆæœ¬
}
// æˆ‘ä»¬å®é™…é‡å†™çš„æ–¹æ³•
public int compareTo(MyInt other) { ... }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¡¥æ–¹æ³•çš„å­˜åœ¨ç¡®ä¿äº†åœ¨ç±»å‹æ“¦é™¤åï¼Œå­ç±»ä¾ç„¶èƒ½æ­£ç¡®é‡å†™æ³›å‹æ¥å£æˆ–çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼Œä¿è¯äº†å¤šæ€æ€§çš„æ­£å¸¸å·¥ä½œ ã€‚&lt;/p&gt;
&lt;h3 id="-æ³›å‹æ“¦é™¤å¸¦æ¥çš„é™åˆ¶"&gt;âš ï¸ æ³›å‹æ“¦é™¤å¸¦æ¥çš„é™åˆ¶
&lt;/h3&gt;&lt;p&gt;ç”±äºè¿è¡Œæ—¶ç±»å‹ä¿¡æ¯çš„ç¼ºå¤±ï¼Œæ³›å‹æ“¦é™¤ç»™Javaç¼–ç¨‹å¸¦æ¥äº†ä¸€äº›é™åˆ¶ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬ç±»å‹ä¸èƒ½ä½œä¸ºç±»å‹å‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ³›å‹å‚æ•°å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½ä½¿ç”¨ &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;double&lt;/code&gt;ç­‰åŸºæœ¬ç±»å‹ã€‚å¿…é¡»ä½¿ç”¨å…¶åŒ…è£…ç±»ï¼ˆå¦‚ &lt;code&gt;Integer&lt;/code&gt;, &lt;code&gt;Double&lt;/code&gt;ï¼‰ã€‚è¿™å¯¼è‡´äº†è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„å¼€é”€ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ— æ³•è¿›è¡Œè¿è¡Œæ—¶çš„ç±»å‹æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºè¿è¡Œæ—¶æ³›å‹ä¿¡æ¯å·²æ“¦é™¤ï¼Œæ— æ³•ä½¿ç”¨ &lt;code&gt;instanceof&lt;/code&gt;æ“ä½œç¬¦æ£€æŸ¥æ³›å‹ç±»å‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¼–è¯‘é”™è¯¯
if (list instanceof List&amp;lt;String&amp;gt;) { ... }
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸èƒ½åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ &lt;code&gt;List&amp;lt;String&amp;gt;[] array = new ArrayList&amp;lt;String&amp;gt;[10];&lt;/code&gt;æ˜¯éæ³•çš„ã€‚ä¸»è¦åŸå› æ˜¯æ•°ç»„éœ€è¦åœ¨è¿è¡Œæ—¶çŸ¥é“å…¶å…ƒç´ çš„ç¡®åˆ‡ç±»å‹ä»¥ä¿è¯ç±»å‹å®‰å…¨ï¼Œè€Œæ³›å‹æ“¦é™¤ä½¿è¿™ä¸€ç‚¹æ— æ³•å®ç° ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸èƒ½å®ä¾‹åŒ–ç±»å‹å‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸èƒ½åœ¨ä»£ç ä¸­ä½¿ç”¨ &lt;code&gt;new T()&lt;/code&gt;æ¥åˆ›å»ºå®ä¾‹ï¼Œå› ä¸ºæ“¦é™¤å &lt;code&gt;T&lt;/code&gt;å˜æˆäº† &lt;code&gt;Object&lt;/code&gt;æˆ–ä¸€ä¸ªå¯èƒ½ä¸ºæŠ½è±¡ç±»çš„ä¸Šç•Œ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™æ€ä¸Šä¸‹æ–‡çš„é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é™æ€å˜é‡å’Œé™æ€æ–¹æ³•ä¸èƒ½å¼•ç”¨ç±»çš„ç±»å‹å‚æ•°ï¼Œå› ä¸ºé™æ€æˆå‘˜å±äºç±»æœ¬èº«ï¼Œè€Œç±»å‹å‚æ•°ä¸å…·ä½“çš„å®ä¾‹ç›¸å…³ã€‚æ‰€æœ‰æ³›å‹ç±»çš„å®ä¾‹å…±äº«åŒä¸€ä¸ªé™æ€æˆå‘˜ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸ºä½•javaé€‰æ‹©æ³›å‹æ“¦é™¤"&gt;ğŸ”„ ä¸ºä½•Javaé€‰æ‹©æ³›å‹æ“¦é™¤
&lt;/h3&gt;&lt;p&gt;Javaé‡‡ç”¨ç±»å‹æ“¦é™¤ä½œä¸ºæ³›å‹çš„å®ç°æ–¹å¼ï¼Œä¸»è¦æ˜¯å‡ºäº&lt;strong&gt;å‘åå…¼å®¹æ€§&lt;/strong&gt;çš„è€ƒè™‘ ã€‚æ³›å‹åœ¨JDK 5ä¸­æ‰è¢«å¼•å…¥ï¼Œè€Œå½“æ—¶å·²ç»å­˜åœ¨å¤§é‡ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆå¦‚ &lt;code&gt;List&lt;/code&gt;, &lt;code&gt;Map&lt;/code&gt;ï¼‰çš„æ—§ä»£ç ã€‚é€šè¿‡æ“¦é™¤æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³›å‹ä»£ç å’Œéæ³›å‹ä»£ç å¯ä»¥äº’æ“ä½œ&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†ä¸€ä¸ª &lt;code&gt;List&amp;lt;String&amp;gt;&lt;/code&gt;ä¼ é€’ç»™ä¸€ä¸ªæ¥å—åŸå§‹ &lt;code&gt;List&lt;/code&gt;å‚æ•°çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸éœ€è¦ä¿®æ”¹JVM&lt;/strong&gt;ã€‚è™šæ‹Ÿæœºæ— éœ€ä¸ºæ”¯æŒæ³›å‹è€Œè¿›è¡Œé‡å¤§æ”¹å˜ï¼Œæ‰€æœ‰æ³›å‹æ£€æŸ¥å’Œå·¥ä½œéƒ½åœ¨ç¼–è¯‘æœŸç”±ç¼–è¯‘å™¨å®Œæˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§æƒè¡¡ï¼Œå®ƒåœ¨&lt;strong&gt;ç¼–è¯‘æ—¶æä¾›äº†ç±»å‹å®‰å…¨&lt;/strong&gt;ï¼Œå¹¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¿æŒäº†ä¸æ—§ç‰ˆæœ¬Javaçš„å…¼å®¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ³›å‹æ“¦é™¤æ˜¯Javaæ³›å‹çš„åŸºçŸ³ã€‚å®ƒé€šè¿‡åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥å’Œç±»å‹æ“¦é™¤ï¼Œåœ¨è¿è¡Œæ—¶è½¬æ¢ä¸ºåŸå§‹ç±»å‹ï¼Œå®ç°äº†æ³›å‹çš„ä¸»è¦ç‰¹æ€§ã€‚è™½ç„¶è¿™ç§è®¾è®¡å¸¦æ¥äº†è¯¸å¦‚è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ç¼ºå¤±ç­‰é™åˆ¶ï¼Œä½†å®ƒæˆåŠŸåœ°å®ç°äº†ç¼–è¯‘æ—¶çš„ç±»å‹å®‰å…¨ï¼Œå¹¶æœ€å¤§é™åº¦åœ°ä¿è¯äº†ä¸æ—§ä»£ç çš„å…¼å®¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£Javaæ³›å‹ã€‚å¦‚æœä½ å¯¹æ³›å‹é€šé…ç¬¦ï¼ˆ&lt;code&gt;?&lt;/code&gt;, &lt;code&gt;? extends T&lt;/code&gt;, &lt;code&gt;? super T&lt;/code&gt;ï¼‰æˆ–è€…å¦‚ä½•åœ¨å®é™…ç¼–ç ä¸­è§„é¿æ“¦é™¤å¸¦æ¥çš„é™åˆ¶æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h3 id="cas-ä¸é˜»å¡"&gt;CAS ä¸é˜»å¡
&lt;/h3&gt;&lt;p&gt;æ‚¨æå‡ºäº†ä¸€ä¸ªéå¸¸æ·±åˆ»çš„è§‚å¯Ÿç‚¹ã€‚ç¡®å®ï¼ŒCASï¼ˆCompare-And-Swapï¼‰çš„â€œå¾ªç¯é‡è¯•â€å¾ˆå®¹æ˜“è®©äººè”æƒ³åˆ°é˜»å¡ã€‚ä½†å…³é”®åœ¨äºï¼Œ&lt;strong&gt;â€œéé˜»å¡â€ç‰¹æŒ‡çº¿ç¨‹ä¸ä¼šè¢«æ“ä½œç³»ç»Ÿå¼ºåˆ¶æŒ‚èµ·ï¼ˆå³ä¸å‘ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰&lt;/strong&gt;ã€‚CASé€šè¿‡ä¸€ç§ç§°ä¸ºâ€œè‡ªæ—‹â€çš„æŠ€æœ¯é¿å…äº†è¿™ç§æŒ‚èµ·ï¼Œä»è€Œå®ç°äº†éé˜»å¡ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å…¶ä¸­çš„æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„å¯¹æ¯”è¡¨æ ¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CASï¼ˆéé˜»å¡ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼ ç»Ÿé”ï¼ˆå¦‚ synchronizedï¼Œé˜»å¡ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;RUNNABLE&lt;/strong&gt;ï¼ˆå¯è¿è¡Œï¼‰ï¼Œå§‹ç»ˆæ´»è·ƒï¼Œä¸ä¼šè¢«æŒ‚èµ·ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;BLOCKED&lt;/strong&gt; æˆ– &lt;strong&gt;WAITING&lt;/strong&gt;ï¼ˆé˜»å¡/ç­‰å¾…ï¼‰ï¼Œè¢«æ“ä½œç³»ç»ŸæŒ‚èµ·ï¼Œæ”¾å¼ƒCPUã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CPUä½¿ç”¨æƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¿ç¨‹&lt;strong&gt;ä¿æŒCPUæ—¶é—´ç‰‡&lt;/strong&gt;ï¼ŒæŒç»­é‡è¯•ç›´åˆ°æˆåŠŸã€‚&lt;/td&gt;
&lt;td&gt;çº¿ç¨‹&lt;strong&gt;ä¸»åŠ¨æ”¾å¼ƒCPUæ—¶é—´ç‰‡&lt;/strong&gt;ï¼Œç”±æ“ä½œç³»ç»Ÿè°ƒåº¦å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªæ—‹å¼€é”€&lt;/strong&gt;ï¼šæ¶ˆè€—CPUå‘¨æœŸè¿›è¡Œå¾ªç¯ï¼Œåœ¨é«˜ç«äº‰æ—¶å¯èƒ½ç©ºè½¬ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€&lt;/strong&gt;ï¼šçº¿ç¨‹æŒ‚èµ·å’Œå”¤é†’éœ€è¦åœ¨å†…æ ¸æ€å®Œæˆï¼Œå¼€é”€è¾ƒå¤§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¹è§‚é”&lt;/strong&gt;ï¼šå‡è®¾å†²çªå¾ˆå°‘å‘ç”Ÿï¼Œå…ˆå°è¯•æ“ä½œï¼Œå‘ç”Ÿå†²çªæ—¶é‡è¯•å³å¯ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‚²è§‚é”&lt;/strong&gt;ï¼šå‡è®¾å†²çªç»å¸¸å‘ç”Ÿï¼Œå…ˆç‹¬å èµ„æºï¼Œç¡®ä¿å®‰å…¨åå†æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½è‡³ä¸­åº¦çº¿ç¨‹ç«äº‰&lt;/strong&gt;ï¼Œæ“ä½œæœ¬èº«æ‰§è¡Œå¾ˆå¿«ï¼ˆå¦‚å¢å‡è®¡æ•°å™¨ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ç«äº‰åœºæ™¯&lt;/strong&gt;æˆ–&lt;strong&gt;ä¸´ç•ŒåŒºä»£ç æ‰§è¡Œè¾ƒæ…¢&lt;/strong&gt;ï¼Œè®©å‡ºCPUæ›´åˆç†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£è‡ªæ—‹ä¸é˜»å¡çš„æœ¬è´¨åŒºåˆ«"&gt;ğŸ’¡ æ·±å…¥ç†è§£â€œè‡ªæ—‹â€ä¸â€œé˜»å¡â€çš„æœ¬è´¨åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;è¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºçº¿ç¨‹çŠ¶æ€å’ŒCPUä½¿ç”¨æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CASçš„â€œå¾ªç¯é‡è¯•â€ï¼ˆè‡ªæ—‹ï¼‰&lt;/strong&gt;ï¼šå°±åƒä¸€ä¸ªä¸æ–­æŸ¥çœ‹é‚®ç®±æ˜¯å¦æ¥ä¿¡çš„äººã€‚ä»–è™½ç„¶ä¸€ç›´åœ¨ç­‰å¾…ï¼Œä½†&lt;strong&gt;èº«ä½“æ˜¯æ´»åŠ¨çš„&lt;/strong&gt;ï¼Œå¯ä»¥éšæ—¶å»åšåˆ«çš„äº‹ï¼ˆè™½ç„¶ä»–ç°åœ¨é€‰æ‹©ä¸åœæŸ¥çœ‹ï¼‰ã€‚åœ¨CPUçœ‹æ¥ï¼Œè¿™ä¸ªçº¿ç¨‹ä¸€ç›´å¤„äºâ€œå¯è¿è¡Œâ€çŠ¶æ€ï¼Œåªæ˜¯åœ¨æ‰§è¡Œä¸€ä¸ªç®€å•çš„å¾ªç¯æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ ç»Ÿé”çš„â€œé˜»å¡â€&lt;/strong&gt;ï¼šåˆ™åƒåœ¨é“¶è¡ŒæŸœå°å‰æ‹¿å·åï¼Œä½ é€‰æ‹©ååœ¨æ¤…å­ä¸Š&lt;strong&gt;ç¡ç€ï¼ˆè¢«æŒ‚èµ·ï¼‰&lt;/strong&gt;ã€‚ç›´åˆ°æŸœå‘˜å«åˆ°ä½ çš„å·ï¼ˆé”è¢«é‡Šæ”¾ï¼‰ï¼Œä½ æ‰è¢«å”¤é†’ï¼ˆçº¿ç¨‹è¢«è°ƒåº¦ï¼‰å»åŠç†ä¸šåŠ¡ã€‚è¿™ä¸ªâ€œç¡ç€-å”¤é†’â€çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€æ¬¡æ˜‚è´µçš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼ŒCASçš„éé˜»å¡æ€§åœ¨äºå…¶â€œ&lt;strong&gt;å¿™ç­‰å¾…&lt;/strong&gt;â€çš„ç‰¹æ€§â€”â€”çº¿ç¨‹å§‹ç»ˆåœ¨â€œå¿™â€ï¼ˆå ç”¨CPUï¼‰ï¼Œè€Œä¸æ˜¯â€œç­‰â€ï¼ˆè¢«æŒ‚èµ·ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-casçš„å±€é™ä¸æ­£ç¡®ä½¿ç”¨å§¿åŠ¿"&gt;âš ï¸ CASçš„å±€é™ä¸æ­£ç¡®ä½¿ç”¨å§¿åŠ¿
&lt;/h3&gt;&lt;p&gt;å°½ç®¡CASæœ‰æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†äº†è§£å…¶å±€é™æ€§è‡³å…³é‡è¦ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ABAé—®é¢˜&lt;/strong&gt;ï¼šè¿™æ˜¯CASçš„ä¸€ä¸ªç»å…¸é™·é˜±ã€‚å‡è®¾å˜é‡å€¼ä»Aå˜ä¸ºBåˆå˜å›Aï¼ŒCASä¼šè¯¯ä»¥ä¸ºå®ƒä»æœªè¢«ä¿®æ”¹è¿‡ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨&lt;strong&gt;ç‰ˆæœ¬å·&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;AtomicStampedReference&lt;/code&gt;ï¼‰ï¼Œä¸ä»…æ¯”è¾ƒå€¼ï¼Œä¹Ÿæ¯”è¾ƒç‰ˆæœ¬å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜ç«äº‰ä¸‹çš„æ€§èƒ½ç“¶é¢ˆ&lt;/strong&gt;ï¼šå½“å¤§é‡çº¿ç¨‹åŒæ—¶ç«äº‰ä¸€ä¸ªå˜é‡æ—¶ï¼ŒCASä¼šå¯¼è‡´å¤§é‡çº¿ç¨‹é•¿æ—¶é—´ç©ºè½¬ï¼Œç™½ç™½æ¶ˆè€—CPUèµ„æºã€‚æ­¤æ—¶ï¼Œä¼ ç»Ÿçš„é”æœºåˆ¶å› ä¸ºä¼šè®©çº¿ç¨‹æ’é˜Ÿç­‰å¾…ï¼Œåè€Œå¯èƒ½æ˜¯æ›´é«˜æ•ˆçš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªèƒ½ä¿è¯ä¸€ä¸ªå˜é‡çš„åŸå­æ€§&lt;/strong&gt;ï¼šCASæ“ä½œæ˜¯é’ˆå¯¹å•ä¸ªå†…å­˜åœ°å€çš„ã€‚å¦‚æœéœ€è¦ä¿è¯å¤šä¸ªå˜é‡å…±åŒæ“ä½œçš„åŸå­æ€§ï¼ŒCASæ— æ³•ç›´æ¥å®ç°ï¼Œé€šå¸¸éœ€è¦å€ŸåŠ©é”æˆ–å°†è¿™äº›å˜é‡å°è£…æˆä¸€ä¸ªå¯¹è±¡å¹¶ä½¿ç”¨&lt;code&gt;AtomicReference&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒCASçš„â€œéé˜»å¡â€æ˜¯æŒ‡çº¿ç¨‹&lt;strong&gt;ä¸ä¼šè¢«å¼ºåˆ¶æŒ‚èµ·å’Œåˆ‡æ¢&lt;/strong&gt;ï¼Œè€Œæ˜¯é€šè¿‡&lt;strong&gt;å ç”¨CPUå¾ªç¯å°è¯•&lt;/strong&gt;çš„æ–¹å¼æ¥åº”å¯¹å†²çªã€‚è¿™å°±åƒåœ¨è·¯å£é‡åˆ°çº¢ç¯æ—¶ï¼ŒCASæ˜¯â€œç¼“æ…¢æ»‘è¡Œå¹¶éšæ—¶å‡†å¤‡åŠ é€Ÿé€šè¿‡â€ï¼ˆè‡ªæ—‹ï¼‰ï¼Œè€Œä¼ ç»Ÿé”æ˜¯â€œç›´æ¥ç†„ç«åœè½¦ç­‰å¾…â€ï¼ˆé˜»å¡ï¼‰ã€‚å‰è€…å“åº”æ›´å¿«ä½†è´¹æ²¹ï¼ˆCPUï¼‰ï¼Œåè€…æ›´çœæ²¹ä½†å¯åŠ¨æ…¢ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£è¿™ä¸€ç»†å¾®å·®åˆ«ï¼Œèƒ½å¸®åŠ©æ‚¨æ ¹æ®å…·ä½“çš„ç«äº‰æ¿€çƒˆç¨‹åº¦å’Œæ€§èƒ½è¦æ±‚ï¼Œåœ¨â€œä¹è§‚â€çš„CASå’Œâ€œæ‚²è§‚â€çš„é”ä¹‹é—´åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©æ‚¨å½»åº•ç†è§£CASçš„éé˜»å¡ç‰¹æ€§ï¼å¦‚æœæ‚¨å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="concurrentlinkedqueue"&gt;ConcurrentLinkedQueue
&lt;/h2&gt;&lt;p&gt;ConcurrentLinkedQueue æ˜¯ Java å¹¶å‘åŒ… (&lt;code&gt;java.util.concurrent&lt;/code&gt;) ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„çº¿ç¨‹å®‰å…¨ã€æ— ç•Œã€éé˜»å¡é˜Ÿåˆ—ã€‚å®ƒé‡‡ç”¨é«˜æ•ˆçš„ &lt;strong&gt;FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰&lt;/strong&gt; åŸåˆ™è¿›è¡Œå…ƒç´ æ’åºï¼Œç‰¹åˆ«é€‚åˆåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹æ›¿ä»£ä¼ ç»Ÿçš„åŒæ­¥é˜Ÿåˆ—ï¼ˆå¦‚ &lt;code&gt;Vector&lt;/code&gt;æˆ–ä½¿ç”¨ &lt;code&gt;synchronized&lt;/code&gt;åŒ…è£…çš„ &lt;code&gt;LinkedList&lt;/code&gt;ï¼‰ï¼Œä»¥æå‡ç¨‹åºæ€§èƒ½ ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç‰¹å¾å’Œè®¾è®¡è€ƒé‡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ConcurrentLinkedQueue çš„æ ¸å¿ƒç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;strong&gt;CASï¼ˆCompare-And-Swapï¼‰æ— é”ç®—æ³•&lt;/strong&gt; å®ç°ï¼Œä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å®‰å…¨è®¿é—® ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾¹ç•Œæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— ç•Œé˜Ÿåˆ—&lt;/strong&gt;ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™æ‰©å®¹ï¼Œå› æ­¤æ’å…¥æ“ä½œï¼ˆ&lt;code&gt;add&lt;/code&gt;/&lt;code&gt;offer&lt;/code&gt;ï¼‰æ°¸è¿œä¸ä¼šå› é˜Ÿåˆ—æ»¡è€Œé˜»å¡æˆ–è¿”å› &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜»å¡è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éé˜»å¡&lt;/strong&gt;ã€‚å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè·å–å…ƒç´ çš„æ–¹æ³•ï¼ˆå¦‚ &lt;code&gt;poll&lt;/code&gt;ï¼‰ä¼šç«‹å³è¿”å› &lt;code&gt;null&lt;/code&gt;ï¼Œä¸ä¼šè®©çº¿ç¨‹ç­‰å¾… ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æ³•åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº &lt;strong&gt;Michael-Scott éé˜»å¡é˜Ÿåˆ—ç®—æ³•&lt;/strong&gt;ï¼Œæ˜¯ä¸€ç§â€œwait-freeâ€çš„é«˜æ•ˆå®ç° ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº&lt;strong&gt;å•å‘é“¾è¡¨&lt;/strong&gt;å®ç°ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰åŒ…å«å…ƒç´ é¡¹ï¼ˆitemï¼‰å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆnextï¼‰ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL çº¦æŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å…è®¸æ’å…¥ &lt;code&gt;null&lt;/code&gt;å…ƒç´ &lt;/strong&gt;ï¼Œå› ä¸º &lt;code&gt;null&lt;/code&gt;è¢«ç”¨ä½œç‰¹å®šçš„æ ‡è®°å€¼ï¼ˆå¦‚ poll æ–¹æ³•è¿”å› &lt;code&gt;null&lt;/code&gt;è¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©ºï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸å®ç°æœºåˆ¶"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ä¸å®ç°æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;ConcurrentLinkedQueue çš„é«˜æ€§èƒ½æºäºå…¶ç²¾å¦™çš„æ— é”è®¾è®¡å’Œå‡ ä¸ªå…³é”®ç­–ç•¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ— é”ç®—æ³•ä¸ CAS&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å…¶çº¿ç¨‹å®‰å…¨çš„åŸºç¡€ã€‚å®ƒé¿å…äº†ä½¿ç”¨é‡é‡çº§çš„åŒæ­¥é”ï¼ˆ&lt;code&gt;synchronized&lt;/code&gt;ï¼‰ï¼Œè€Œæ˜¯ä¾èµ–åº•å±‚ç¡¬ä»¶æ”¯æŒçš„ CAS åŸå­æ“ä½œã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹é˜Ÿåˆ—ï¼ˆå¦‚å…¥é˜Ÿï¼‰æ—¶ï¼ŒCAS ä¼šç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸæ›´æ–°æŒ‡é’ˆï¼ˆå¦‚å°¾èŠ‚ç‚¹çš„ &lt;code&gt;next&lt;/code&gt;æŒ‡é’ˆï¼‰ï¼Œå…¶ä»–å¤±è´¥çš„çº¿ç¨‹ä¼šé€šè¿‡è‡ªæ—‹ï¼ˆå¾ªç¯é‡è¯•ï¼‰çš„æ–¹å¼å†æ¬¡å°è¯•ï¼Œä»è€Œé¿å…äº†çº¿ç¨‹çš„é˜»å¡å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;â€œå¼±ä¸€è‡´æ€§â€è¿­ä»£å™¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;iterator()&lt;/code&gt;æ–¹æ³•è¿”å›çš„è¿­ä»£å™¨æ˜¯&lt;strong&gt;å¼±ä¸€è‡´æ€§çš„&lt;/strong&gt; ã€‚è¿™æ„å‘³ç€å®ƒä¸ä¼šæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ã€‚è¿­ä»£å™¨åœ¨åˆ›å»ºæ—¶ä¼šå¯¹é˜Ÿåˆ—çŠ¶æ€åšä¸€ä¸ªâ€œå¿«ç…§â€ï¼Œä½†å®ƒä¹Ÿå¯èƒ½ï¼ˆå¹¶ä¸ä¿è¯ï¼‰åæ˜ è¿­ä»£å™¨åˆ›å»ºåå‘ç”Ÿçš„ä¸€äº›æ›´æ–°ã€‚å› æ­¤ï¼Œå®ƒé€‚åˆéå†ï¼Œä½†ä¸é€‚åˆåœ¨éå†æ—¶åšç²¾ç¡®çš„é€»è¾‘åˆ¤æ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤´å°¾èŠ‚ç‚¹çš„å»¶è¿Ÿæ›´æ–°ç­–ç•¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¼˜åŒ–ç‚¹ã€‚ä¸ºäº†å‡å°‘ CAS æ“ä½œçš„ç«äº‰ï¼Œ&lt;code&gt;head&lt;/code&gt;å’Œ &lt;code&gt;tail&lt;/code&gt;æŒ‡é’ˆçš„æ›´æ–°å¹¶éåœ¨æ¯æ¬¡å…¥é˜Ÿæˆ–å‡ºé˜Ÿæ“ä½œæ—¶éƒ½è¿›è¡Œï¼Œè€Œæ˜¯é‡‡ç”¨**â€œè·³ä¸¤æ­¥â€**çš„å»¶è¿Ÿæ›´æ–°ç­–ç•¥ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°¾èŠ‚ç‚¹ï¼ˆ&lt;code&gt;tail&lt;/code&gt;ï¼‰æ›´æ–°&lt;/strong&gt;ï¼šå¹¶éæ¯æ¬¡æ’å…¥æ–°èŠ‚ç‚¹åéƒ½ç«‹åˆ»æ›´æ–° &lt;code&gt;tail&lt;/code&gt;æŒ‡å‘æ–°èŠ‚ç‚¹ã€‚è€Œæ˜¯å½“ &lt;code&gt;tail&lt;/code&gt;èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆ&lt;code&gt;next&lt;/code&gt;ï¼‰ä¸ä¸º &lt;code&gt;null&lt;/code&gt;æ—¶ï¼ˆå³ &lt;code&gt;tail&lt;/code&gt;å·²ç»è½åäºå®é™…çš„é˜Ÿå°¾ï¼‰ï¼Œæ‰é€šè¿‡ä¸€æ¬¡ CAS æ“ä½œå°† &lt;code&gt;tail&lt;/code&gt;æ›´æ–°åˆ°æ­£ç¡®ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤´èŠ‚ç‚¹ï¼ˆ&lt;code&gt;head&lt;/code&gt;ï¼‰æ›´æ–°&lt;/strong&gt;ï¼šç±»ä¼¼åœ°ï¼Œå‡ºé˜Ÿæ—¶ï¼Œå½“ &lt;code&gt;head&lt;/code&gt;èŠ‚ç‚¹çš„å…ƒç´ è¢«å–å‡ºåï¼Œä¹Ÿä¸ä¼šç«‹åˆ»ç§»åŠ¨ &lt;code&gt;head&lt;/code&gt;ï¼Œè€Œæ˜¯ç­‰åˆ° &lt;code&gt;head&lt;/code&gt;èŠ‚ç‚¹çš„å…ƒç´ ä¸º &lt;code&gt;null&lt;/code&gt;æ—¶ï¼Œæ‰ä¸€æ¬¡æ€§è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç­–ç•¥è™½ç„¶å¯èƒ½å¢åŠ å•æ¬¡æ“ä½œå®šä½çœŸæ­£å¤´/å°¾èŠ‚ç‚¹çš„å¼€é”€ï¼Œä½†æ˜¾è‘—å‡å°‘äº† CAS ç«äº‰ï¼Œåœ¨é«˜å¹¶å‘ä¸‹æ•´ä½“æ€§èƒ½æ›´é«˜ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒæ–¹æ³•è¯¦è§£"&gt;ğŸ“– æ ¸å¿ƒæ–¹æ³•è¯¦è§£
&lt;/h3&gt;&lt;p&gt;äº†è§£å…¶å†…éƒ¨æœºåˆ¶åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®æ–¹æ³•çš„è¡Œä¸ºç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¥é˜Ÿæ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;add(E e)&lt;/code&gt;å’Œ &lt;code&gt;offer(E e)&lt;/code&gt;åŠŸèƒ½å®Œå…¨ä¸€æ ·ï¼Œéƒ½æ˜¯å°†å…ƒç´ æ’å…¥é˜Ÿå°¾ã€‚ç”±äºé˜Ÿåˆ—æ— ç•Œï¼Œå®ƒä»¬&lt;strong&gt;æ°¸è¿œä¸ä¼šè¿”å› &lt;code&gt;false&lt;/code&gt;æˆ–æŠ›å‡ºå¼‚å¸¸&lt;/strong&gt;ï¼ˆé™¤äº† &lt;code&gt;NullPointerException&lt;/code&gt;ï¼‰ã€‚é€šå¸¸æ›´æ¨èä½¿ç”¨ &lt;code&gt;offer&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡ºé˜Ÿæ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;poll()&lt;/code&gt;æ£€ç´¢å¹¶ç§»é™¤é˜Ÿåˆ—çš„å¤´å…ƒç´ ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› &lt;code&gt;null&lt;/code&gt;ã€‚è¿™æ˜¯å…¶&lt;strong&gt;éé˜»å¡&lt;/strong&gt;ç‰¹æ€§çš„ç›´æ¥ä½“ç° ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£€æŸ¥æ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;peek()&lt;/code&gt;æ£€ç´¢ä½†ä¸ç§»é™¤é˜Ÿåˆ—çš„å¤´å…ƒç´ ã€‚é˜Ÿåˆ—ä¸ºç©ºæ—¶åŒæ ·è¿”å› &lt;code&gt;null&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§å°æ“ä½œ&lt;/strong&gt;ï¼š&lt;strong&gt;&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼&lt;/strong&gt; ç”±äºé˜Ÿåˆ—çš„å¼‚æ­¥å¹¶å‘ç‰¹æ€§ï¼Œè·å–å…ƒç´ æ•°é‡éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ª &lt;strong&gt;O(n)&lt;/strong&gt; æ—¶é—´å¤æ‚åº¦çš„æ“ä½œï¼Œä¸”ç»“æœåœ¨éå†è¿‡ç¨‹ä¸­å¯èƒ½å·²ç»ä¸å‡† ã€‚å› æ­¤ï¼Œåœ¨é«˜å¹¶å‘åº”ç”¨ä¸­ï¼Œæ­¤æ–¹æ³•é€šå¸¸&lt;strong&gt;ä¸å®ç”¨&lt;/strong&gt;ã€‚åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;isEmpty()&lt;/code&gt;æ–¹æ³•ï¼Œå®ƒçš„æ•ˆç‡æ›´é«˜ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©ä½¿ç”¨ ConcurrentLinkedQueue å‰ï¼Œè¯·æ˜ç¡®å…¶é€‚ç”¨åœºæ™¯å’Œæ½œåœ¨é£é™©ã€‚&lt;/p&gt;
&lt;h4 id="å…¸å‹é€‚ç”¨åœºæ™¯-"&gt;**å…¸å‹é€‚ç”¨åœºæ™¯ **
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹&lt;/strong&gt;ï¼šå½“æœ‰å¤§é‡çº¿ç¨‹åŒæ—¶ç”Ÿäº§ä»»åŠ¡å’Œæ¶ˆè´¹ä»»åŠ¡æ—¶ï¼Œå…¶éé˜»å¡ç‰¹æ€§å¯ä»¥å¸¦æ¥æé«˜çš„ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½äº‹ä»¶æ€»çº¿æˆ–æ¶ˆæ¯ä¼ é€’&lt;/strong&gt;ï¼šé€‚ç”¨äºéœ€è¦å¿«é€Ÿåˆ†å‘äº‹ä»¶çš„ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ç•Œä»»åŠ¡æ± &lt;/strong&gt;ï¼šå½“ä»»åŠ¡é‡ä¸å¯é¢„æµ‹ä¸”ä¸å¸Œæœ›ç”Ÿäº§è€…è¢«é˜»å¡æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é‡è¦æ³¨æ„äº‹é¡¹ä¸é™åˆ¶"&gt;&lt;strong&gt;é‡è¦æ³¨æ„äº‹é¡¹ä¸é™åˆ¶&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜æ¶ˆè€—é£é™©&lt;/strong&gt;ï¼šç”±äºæ˜¯æ— ç•Œé˜Ÿåˆ—ï¼Œå¦‚æœæ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦è¿œæ…¢äºç”Ÿäº§è€…ï¼Œé˜Ÿåˆ—ä¼šæŒç»­å¢é•¿ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´ &lt;strong&gt;&lt;code&gt;OutOfMemoryError&lt;/code&gt;&lt;/strong&gt; ã€‚ä½¿ç”¨æ—¶éœ€æœ‰ç›¸åº”çš„ç›‘æ§æˆ–æµé‡æ§åˆ¶ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éé˜»å¡ç‰¹æ€§çš„å½±å“&lt;/strong&gt;ï¼šæ¶ˆè´¹è€…çº¿ç¨‹è°ƒç”¨ &lt;code&gt;poll()&lt;/code&gt;è·å–åˆ° &lt;code&gt;null&lt;/code&gt;æ—¶ï¼Œéœ€è¦è‡ªè¡Œå¤„ç†â€œé˜Ÿåˆ—ä¸ºç©ºâ€çš„çŠ¶æ€ï¼Œé€šå¸¸éœ€è¦é€šè¿‡å¾ªç¯æˆ–é…åˆå…¶ä»–æœºåˆ¶ï¼ˆå¦‚ &lt;code&gt;BlockingQueue&lt;/code&gt;çš„ &lt;code&gt;take()&lt;/code&gt;æ–¹æ³•ä¼šé˜»å¡ç­‰å¾…ï¼‰æ¥é¿å…ç©ºè½¬æ¶ˆè€— CPU ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦ä½¿ç”¨ &lt;code&gt;size()&lt;/code&gt;è¿›è¡Œåˆ¤æ–­&lt;/strong&gt;ï¼šå†æ¬¡å¼ºè°ƒï¼Œä¸è¦ä¾èµ– &lt;code&gt;size()&lt;/code&gt;çš„ç»“æœæ¥åšè¯¸å¦‚â€œé˜Ÿåˆ—æ˜¯å¦è¶…è¿‡é˜ˆå€¼â€ä¹‹ç±»çš„åˆ¤æ–­ï¼Œå› ä¸ºç»“æœæä¸å‡†ç¡®ã€‚åº”ä½¿ç”¨ &lt;code&gt;isEmpty()&lt;/code&gt;æ£€æŸ¥æ˜¯å¦ä¸ºç©º ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ConcurrentLinkedQueue æ˜¯ Java å¹¶å‘ç¼–ç¨‹ä¸­ä¸€æ¬¾å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒé€šè¿‡æ— é”ç®—æ³•å®ç°äº†é«˜å¹¶å‘ä¸‹çš„é«˜æ€§èƒ½ã€‚å…¶&lt;strong&gt;æ— ç•Œã€éé˜»å¡ã€å¼±ä¸€è‡´æ€§&lt;/strong&gt;çš„ç‰¹ç‚¹ï¼Œå†³å®šäº†å®ƒéå¸¸é€‚åˆ&lt;strong&gt;é«˜ååé‡ã€å¯¹å»¶è¿Ÿæ•æ„Ÿã€ä¸”ç”Ÿäº§è€…é€Ÿåº¦å¯èƒ½å¿«äºæ¶ˆè´¹è€…çš„åœºæ™¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œä½ ä¹Ÿéœ€è¦è­¦æƒ•å…¶æ— ç•Œæ€§å¸¦æ¥çš„å†…å­˜é£é™©ï¼Œå¹¶ç†è§£å…¶ &lt;code&gt;size()&lt;/code&gt;æ–¹æ³•çš„å±€é™æ€§ã€‚åœ¨éœ€è¦é˜»å¡ç­‰å¾…åŠŸèƒ½æˆ–æœ‰ç•Œå®¹é‡çš„åœºæ™¯ä¸‹ï¼Œåˆ™åº”è€ƒè™‘ &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;æˆ– &lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ ConcurrentLinkedQueueã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="éé˜»å¡"&gt;éé˜»å¡
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œ&lt;strong&gt;ConcurrentLinkedQueue çš„æ‰€æœ‰æ ¸å¿ƒæ“ä½œéƒ½æ˜¯éé˜»å¡çš„&lt;/strong&gt;ã€‚å®ƒé€šè¿‡ä¸€ç§å·§å¦™çš„æ— é”ç®—æ³•ï¼ˆLock-freeï¼‰æ¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œé¿å…äº†ä½¿ç”¨ä¼ ç»Ÿé”æœºåˆ¶å¸¦æ¥çš„çº¿ç¨‹é˜»å¡å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒæ“ä½œçš„ç‰¹ç‚¹ï¼Œä¸‹è¡¨è¿›è¡Œäº†è¯¦ç»†çš„æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œç±»å‹&lt;/th&gt;
&lt;th&gt;æ–¹æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;æ˜¯å¦éé˜»å¡ï¼Ÿ&lt;/th&gt;
&lt;th&gt;è¡Œä¸ºè¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¥é˜Ÿæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;offer(E e)&lt;/code&gt;, &lt;code&gt;add(E e)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å…ƒç´ æ’å…¥é˜Ÿåˆ—å°¾éƒ¨ã€‚ç”±äºé˜Ÿåˆ—æ˜¯æ— ç•Œçš„ï¼Œè¿™äº›æ“ä½œ&lt;strong&gt;æ€»ä¼šæˆåŠŸ&lt;/strong&gt;å¹¶ç«‹å³è¿”å›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡ºé˜Ÿæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;poll()&lt;/code&gt;, &lt;code&gt;remove()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ£€ç´¢å¹¶ç§»é™¤é˜Ÿåˆ—çš„å¤´å…ƒç´ ã€‚å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™&lt;strong&gt;ç«‹å³è¿”å› &lt;code&gt;null&lt;/code&gt;&lt;/strong&gt;ï¼Œä¸ä¼šç­‰å¾…ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ£€æŸ¥æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;peek()&lt;/code&gt;, &lt;code&gt;element()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ£€ç´¢ä½†ä¸ç§»é™¤é˜Ÿåˆ—çš„å¤´å…ƒç´ ã€‚é˜Ÿåˆ—ä¸ºç©ºæ—¶&lt;strong&gt;ç«‹å³è¿”å› &lt;code&gt;null&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ£€æŸ¥é˜Ÿåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;isEmpty()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¹¶ç«‹å³è¿”å›ç»“æœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰¹é‡æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;iterator()&lt;/code&gt;, &lt;code&gt;size()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âš ï¸ &lt;strong&gt;æ˜¯ï¼Œä½†æœ‰ç‰¹æ®Šæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿­ä»£å™¨æ˜¯&lt;strong&gt;å¼±ä¸€è‡´æ€§&lt;/strong&gt;çš„ï¼Œ&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•éœ€è¦éå†é“¾è¡¨ï¼Œè€—æ—¶å¯èƒ½è¾ƒé•¿ï¼Œä½†éƒ½ä¸ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-éé˜»å¡çš„åŸºçŸ³cas-ç®—æ³•"&gt;ğŸ’¡ éé˜»å¡çš„åŸºçŸ³ï¼šCAS ç®—æ³•
&lt;/h3&gt;&lt;p&gt;ConcurrentLinkedQueue çš„éé˜»å¡ç‰¹æ€§æºäºå…¶åº•å±‚å®ç°ä¸ä½¿ç”¨ä»»ä½•ä¼ ç»Ÿçš„é”ï¼ˆå¦‚ &lt;code&gt;synchronized&lt;/code&gt;æˆ– &lt;code&gt;ReentrantLock&lt;/code&gt;ï¼‰ï¼Œè€Œæ˜¯ä¾èµ–äº &lt;strong&gt;CASï¼ˆCompare-And-Swapï¼‰&lt;/strong&gt; åŸå­æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŸºæœ¬å·¥ä½œæµç¨‹æ˜¯ï¼šå½“å¤šä¸ªçº¿ç¨‹å°è¯•åŒæ—¶ä¿®æ”¹é˜Ÿåˆ—ï¼ˆä¾‹å¦‚æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼‰æ—¶ï¼Œå®ƒä»¬ä¼šé€šè¿‡å¾ªç¯ CAS ä¸æ–­é‡è¯•ã€‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸæ‰§è¡Œ CAS æ“ä½œï¼Œå…¶ä»–å¤±è´¥çš„çº¿ç¨‹ä¼šç«‹å³å¾—çŸ¥å¤±è´¥ï¼Œç„¶åè¿›è¡Œé‡è¯•ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ä¼šå¯¼è‡´çº¿ç¨‹è¢«æŒ‚èµ·ï¼ˆé˜»å¡ï¼‰ã€‚è¿™ç§æœºåˆ¶è™½ç„¶å¯èƒ½å¯¼è‡´çº¿ç¨‹åœ¨ç«äº‰æ¿€çƒˆæ—¶â€œç©ºè½¬â€ï¼ˆè‡ªæ—‹ï¼‰ï¼Œä½†é¿å…äº†æ˜‚è´µçš„çº¿ç¨‹é˜»å¡å’Œå”¤é†’æ“ä½œï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹é€šå¸¸èƒ½è·å¾—æ›´å¥½çš„ååé‡ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦ç‰¹æ€§ä¸ä½¿ç”¨è€ƒé‡"&gt;âš ï¸ é‡è¦ç‰¹æ€§ä¸ä½¿ç”¨è€ƒé‡
&lt;/h3&gt;&lt;p&gt;äº†è§£å…¶éé˜»å¡æœ¬è´¨åï¼Œè¿˜æœ‰ä¸€äº›å…³é”®ç‰¹æ€§éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ— ç•Œé˜Ÿåˆ—&lt;/strong&gt;ï¼šConcurrentLinkedQueue æ²¡æœ‰å®¹é‡ä¸Šé™ï¼Œä¼šéšç€å…ƒç´ çš„æ·»åŠ è€ŒåŠ¨æ€å¢é•¿ã€‚è¿™æ„å‘³ç€å¦‚æœç”Ÿäº§è€…é€Ÿåº¦è¿œå¿«äºæ¶ˆè´¹è€…ï¼Œé˜Ÿåˆ—å¯èƒ½æ— é™è†¨èƒ€ï¼Œæœ€ç»ˆå¯¼è‡´ &lt;strong&gt;&lt;code&gt;OutOfMemoryError&lt;/code&gt;&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå®ƒé€‚åˆèƒ½å¤Ÿå¿«é€Ÿå¤„ç†ä»»åŠ¡çš„åœºæ™¯ï¼Œè‹¥ç”Ÿäº§æ¶ˆè´¹é€Ÿåº¦æ— æ³•ä¿è¯ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼ˆå¦‚ &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼±ä¸€è‡´æ€§è¿­ä»£å™¨&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;iterator()&lt;/code&gt;æ–¹æ³•è¿”å›çš„è¿­ä»£å™¨æ˜¯&lt;strong&gt;å¼±ä¸€è‡´æ€§&lt;/strong&gt;çš„ã€‚å®ƒåæ˜ çš„æ˜¯è¿­ä»£å™¨åˆ›å»ºæ—¶æˆ–ä¹‹åæŸä¸ªæ—¶é—´ç‚¹çš„é˜Ÿåˆ—çŠ¶æ€ï¼Œä¸ä¼šæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ï¼Œä½†ä¸ä¿è¯èƒ½éå†åˆ°è¿­ä»£è¿‡ç¨‹ä¸­è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹çš„æ‰€æœ‰å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ…ç”¨ &lt;code&gt;size()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼š&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•éœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ¥è®¡æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ª &lt;strong&gt;O(n)&lt;/strong&gt; æ—¶é—´å¤æ‚åº¦çš„æ“ä½œï¼Œè€Œä¸”åœ¨éå†è¿‡ç¨‹ä¸­é˜Ÿåˆ—å¯èƒ½å·²å‘ç”Ÿå˜åŒ–ï¼Œè¿”å›çš„ç»“æœå¯èƒ½å¹¶ä¸ç²¾ç¡®ã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œåº”é¿å…é¢‘ç¹è°ƒç”¨æ­¤æ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;isEmpty()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒConcurrentLinkedQueue çš„æ‰€æœ‰æ“ä½œç¡®å®éƒ½æ˜¯éé˜»å¡çš„ï¼Œå®ƒé€šè¿‡ CAS æ— é”ç®—æ³•åœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„åŒæ—¶ï¼Œæä¾›äº†é«˜æ€§èƒ½çš„å¹¶å‘è®¿é—®èƒ½åŠ›ã€‚å…¶&lt;strong&gt;æ— ç•Œ&lt;/strong&gt;å’Œ&lt;strong&gt;éé˜»å¡&lt;/strong&gt;çš„ç‰¹æ€§ï¼Œä½¿å…¶éå¸¸é€‚ç”¨äº&lt;strong&gt;é«˜ååé‡ã€ç”Ÿäº§è€…é€Ÿåº¦è¾ƒå¿«ä¸”ä»»åŠ¡å¤„ç†åŠæ—¶&lt;/strong&gt;çš„åœºæ™¯ï¼Œä¾‹å¦‚é«˜å¹¶å‘ä»»åŠ¡è°ƒåº¦ã€äº‹ä»¶é©±åŠ¨ç³»ç»Ÿæˆ–æ—¥å¿—è®°å½•ç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;p&gt;ä½†åŠ¡å¿…æ³¨æ„å…¶æ— ç•Œæ€§å¯èƒ½å¸¦æ¥çš„å†…å­˜é£é™©ï¼Œä»¥åŠ &lt;code&gt;size()&lt;/code&gt;æ–¹æ³•çš„æ€§èƒ½å¼€é”€ã€‚å¦‚æœä½ çš„åœºæ™¯éœ€è¦é˜»å¡ç­‰å¾…ï¼ˆå¦‚ç»å…¸çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰ï¼Œé‚£ä¹ˆ &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;è¿™ç±»é˜»å¡é˜Ÿåˆ—å¯èƒ½æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ ConcurrentLinkedQueueã€‚&lt;/p&gt;
&lt;h2 id="blockingqueue"&gt;BlockingQueue
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;å®ç°ç±»&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;å®¹é‡&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;ç‰¹ç‚¹ä¸é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ArrayBlockingQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ•°ç»„&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ‰ç•Œ&lt;/td&gt;
&lt;td style="text-align: left"&gt;åŸºäºæ•°ç»„çš„å›ºå®šå®¹é‡é˜Ÿåˆ—ï¼Œå…¬å¹³é”å¯é€‰ï¼Œååé‡è¾ƒä½ä½†å†…å­˜ç´§å‡‘ã€‚é€‚åˆå›ºå®šèµ„æºæ± åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;LinkedBlockingQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;é“¾è¡¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯é€‰æœ‰ç•Œ/æ— ç•Œ&lt;/td&gt;
&lt;td style="text-align: left"&gt;é»˜è®¤æ— ç•Œï¼ˆInteger.MAX_VALUEï¼‰ï¼Œé«˜å¹¶å‘ä¸‹ååé‡æ›´é«˜ï¼Œä½†å†…å­˜å ç”¨è¾ƒå¤§ã€‚é€‚åˆä»»åŠ¡é˜Ÿåˆ—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;PriorityBlockingQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å †ï¼ˆæ•°ç»„ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— ç•Œ&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…ƒç´ æŒ‰ä¼˜å…ˆçº§æ’åºï¼ˆéœ€å®ç°Comparableæˆ–æä¾›Comparatorï¼‰ã€‚é€‚åˆä»»åŠ¡è°ƒåº¦ç³»ç»Ÿã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;SynchronousQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— å­˜å‚¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®¹é‡ä¸º 0&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸å­˜å‚¨å…ƒç´ ï¼Œç›´æ¥ä¼ é€’ä»»åŠ¡ç»™æ¶ˆè´¹è€…çº¿ç¨‹ã€‚é€‚åˆçº¿ç¨‹é—´ç›´æ¥äº¤æ¢æ•°æ®çš„åœºæ™¯ï¼ˆå¦‚çº¿ç¨‹æ± ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;DelayQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¼˜å…ˆçº§å †&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— ç•Œ&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…ƒç´ éœ€å®ç°Delayedæ¥å£ï¼ŒæŒ‰å»¶è¿Ÿæ—¶é—´å‡ºé˜Ÿã€‚é€‚åˆå®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼ˆå¦‚ç¼“å­˜è¿‡æœŸï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;LinkedTransferQueue&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;é“¾è¡¨&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— ç•Œ&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç»“åˆäº†é˜»å¡é˜Ÿåˆ—å’ŒåŒæ­¥é˜Ÿåˆ—çš„ç‰¹æ€§ï¼Œæ”¯æŒtransfer()ç›´æ¥ä¼ é€’æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="concurrentlinkedqueue--blockingqueue"&gt;ConcurrentLinkedQueue &amp;amp; BlockingQueue
&lt;/h2&gt;&lt;p&gt;ConcurrentLinkedQueue å’Œ BlockingQueue æ˜¯ Java å¹¶å‘åŒ…ä¸­ä¸¤ç±»ä¸åŒè®¾è®¡å“²å­¦çš„çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ConcurrentLinkedQueue&lt;/th&gt;
&lt;th&gt;BlockingQueue (ä»¥å…¸å‹å®ç°ä¸ºä¾‹)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éé˜»å¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é˜»å¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°åŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº &lt;strong&gt;CAS çš„æ— é”ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸åŸºäº &lt;strong&gt;é”æœºåˆ¶&lt;/strong&gt; (å¦‚ &lt;code&gt;ReentrantLock&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾¹ç•Œæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— ç•Œé˜Ÿåˆ—&lt;/strong&gt;ï¼Œåªå—å†…å­˜é™åˆ¶&lt;/td&gt;
&lt;td&gt;æ—¢æœ‰&lt;strong&gt;æœ‰ç•Œ&lt;/strong&gt;å®ç°ï¼ˆå¦‚ &lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ï¼‰ï¼Œä¹Ÿæœ‰&lt;strong&gt;æ— ç•Œ&lt;/strong&gt;å®ç°ï¼ˆå¦‚ &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹é˜»å¡è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œ&lt;strong&gt;æ°¸ä¸é˜»å¡&lt;/strong&gt;çº¿ç¨‹ï¼Œç«‹å³è¿”å›ç»“æœ&lt;/td&gt;
&lt;td&gt;å½“é˜Ÿåˆ—æ»¡æˆ–ç©ºæ—¶ï¼Œ&lt;code&gt;put()&lt;/code&gt;å’Œ &lt;code&gt;take()&lt;/code&gt;ç­‰æ–¹æ³•ä¼š&lt;strong&gt;é˜»å¡&lt;/strong&gt;çº¿ç¨‹ï¼Œç›´åˆ°æ¡ä»¶æ»¡è¶³&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;API å·®å¼‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä¾› &lt;code&gt;offer()&lt;/code&gt;, &lt;code&gt;poll()&lt;/code&gt;, &lt;code&gt;peek()&lt;/code&gt;ç­‰&lt;strong&gt;éé˜»å¡&lt;/strong&gt;æ–¹æ³•&lt;/td&gt;
&lt;td&gt;é™¤äº†éé˜»å¡æ–¹æ³•ï¼Œé¢å¤–æä¾›äº† &lt;code&gt;put()&lt;/code&gt;, &lt;code&gt;take()&lt;/code&gt;ç­‰ä¼š&lt;strong&gt;é˜»å¡ç­‰å¾…&lt;/strong&gt;çš„æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ã€é«˜ååé‡ï¼Œå°¤å…¶é€‚åˆçŸ­å°é¢‘ç¹çš„æ“ä½œ&lt;/td&gt;
&lt;td&gt;ååé‡é€šå¸¸ä½äºæ— é”å®ç°ï¼Œä½†æä¾›äº†æµé‡æ§åˆ¶å’Œç”Ÿäº§-æ¶ˆè´¹çš„åè°ƒèƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ååé‡ä»»åŠ¡åˆ†å‘ã€æ¶ˆæ¯ä¼ é€’ã€ä¸å¸Œæœ›ç”Ÿäº§è€…è¢«é˜»å¡çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;ç»å…¸çš„&lt;strong&gt;ç”Ÿäº§è€…-æ¶ˆè´¹è€…&lt;/strong&gt;æ¨¡å‹ï¼Œéœ€è¦ç²¾ç¡®çš„æµé‡æ§åˆ¶å’Œçº¿ç¨‹é—´åè°ƒçš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸è®¾è®¡å“²å­¦"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ä¸è®¾è®¡å“²å­¦
&lt;/h3&gt;&lt;p&gt;ç†è§£å®ƒä»¬èƒŒåçš„åŸç†ï¼Œèƒ½å¸®ä½ æ›´å¥½åœ°åšå‡ºé€‰æ‹©ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ConcurrentLinkedQueue çš„æ— é”ä¹‹é“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒçš„é«˜æ€§èƒ½æºäºå…¶ç²¾å¦™çš„æ— é”è®¾è®¡ï¼Œä¸»è¦åŸºäº &lt;strong&gt;CAS&lt;/strong&gt; æ“ä½œã€‚å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹é˜Ÿåˆ—æ—¶ï¼Œä¸ä¼šä½¿ç”¨ä¼ ç»Ÿçš„é”ï¼Œè€Œæ˜¯é€šè¿‡å¾ªç¯ CAS ä¸æ–­é‡è¯•ã€‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸæ›´æ–°ï¼Œå…¶ä»–çº¿ç¨‹ä¼šç«‹å³å¾—çŸ¥å¤±è´¥å¹¶é‡è¯•ï¼Œè¿™ä¸ªè¿‡ç¨‹&lt;strong&gt;ä¸ä¼šå¯¼è‡´çº¿ç¨‹è¢«æŒ‚èµ·ï¼ˆé˜»å¡ï¼‰&lt;/strong&gt;ï¼Œé¿å…äº†æ˜‚è´µçš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚æ­¤å¤–ï¼Œå®ƒé‡‡ç”¨äº† &lt;strong&gt;&amp;ldquo;æ¾å¼›ä¸å˜é‡&amp;rdquo;&lt;/strong&gt; è®¾è®¡ï¼Œå³ &lt;code&gt;head&lt;/code&gt;å’Œ &lt;code&gt;tail&lt;/code&gt;æŒ‡é’ˆå¹¶ä¸æ€»æ˜¯ç²¾ç¡®æŒ‡å‘å¤´å’Œå°¾èŠ‚ç‚¹ï¼Œè¿™å‡å°‘äº† CAS æ“ä½œçš„ç«äº‰æ¬¡æ•°ï¼Œè¿›ä¸€æ­¥æå‡äº†é«˜å¹¶å‘ä¸‹çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BlockingQueue çš„é”ä¸åè°ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;BlockingQueue&lt;/code&gt;åŠå…¶å®ç°ï¼ˆå¦‚ &lt;code&gt;ArrayBlockingQueue&lt;/code&gt;, &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ï¼‰é€šå¸¸ä¾èµ–äº&lt;strong&gt;é”æœºåˆ¶&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;ReentrantLock&lt;/code&gt;ï¼‰æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å…¶é˜»å¡è¡Œä¸ºæ˜¯é€šè¿‡ä¸é”ç»‘å®šçš„ &lt;strong&gt;&lt;code&gt;Condition&lt;/code&gt;&lt;/strong&gt; æ¡ä»¶å˜é‡å®ç°çš„ã€‚å½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œç”Ÿäº§è€…çº¿ç¨‹ä¼šåœ¨ä¸€ä¸ªæ¡ä»¶ä¸Šç­‰å¾…ï¼›å½“æ¶ˆè´¹è€…æ¶ˆè´¹ä¸€ä¸ªå…ƒç´ åï¼Œä¼šé€šçŸ¥ï¼ˆsignalï¼‰è¿™ä¸ªæ¡ä»¶ï¼Œå”¤é†’ç­‰å¾…çš„ç”Ÿäº§è€…ã€‚åä¹‹äº¦ç„¶ã€‚è¿™ç§æœºåˆ¶å¤©ç„¶åœ°å®ç°äº†&lt;strong&gt;çº¿ç¨‹é—´çš„åè°ƒå’Œæµé‡æ§åˆ¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åœºæ™¯å†³å®šä¸€åˆ‡"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ï¼šåœºæ™¯å†³å®šä¸€åˆ‡
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªä¸€ä¸ªï¼Œå®Œå…¨å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© ConcurrentLinkedQueue å½“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æé«˜çš„ååé‡&lt;/strong&gt;ï¼šåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œéœ€è¦å¤„ç†å¤§é‡çŸ­å°çš„ä»»åŠ¡ï¼Œæ— é”è®¾è®¡èƒ½å¸¦æ¥æ›´é«˜çš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§è€…é€Ÿåº¦é€šå¸¸è¾ƒå¿«ï¼Œä¸”ä¸å¸Œæœ›è¢«é˜»å¡&lt;/strong&gt;ï¼šä¾‹å¦‚åœ¨äº‹ä»¶å¤„ç†ç³»ç»Ÿæˆ–å®æ—¶æ¶ˆæ¯ä¼ é€’ä¸­ï¼Œä¿æŒç”Ÿäº§è€…çš„å“åº”æ€§è‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— éœ€ä¸¥æ ¼çš„æµé‡æ§åˆ¶&lt;/strong&gt;ï¼šæˆ–è€…è¯´ï¼Œä½ ç¡®ä¿¡æ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›èƒ½å¤Ÿè·Ÿä¸Šç”Ÿäº§é€Ÿåº¦ï¼Œæˆ–è€…æœ‰å…¶ä»–æ–¹å¼é˜²æ­¢é˜Ÿåˆ—æ— é™è†¨èƒ€ï¼ˆå¦‚å†…å­˜ç›‘æ§ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© BlockingQueue å½“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºç»å…¸çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼&lt;/strong&gt;ï¼šè¿™æ˜¯ &lt;code&gt;BlockingQueue&lt;/code&gt;æœ€å…¸å‹çš„ç”¨æ­¦ä¹‹åœ°ã€‚&lt;code&gt;put()&lt;/code&gt;å’Œ &lt;code&gt;take()&lt;/code&gt;çš„é˜»å¡ç‰¹æ€§å®Œç¾åœ°åè°ƒäº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„èŠ‚å¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ç²¾ç¡®çš„æµé‡æ§åˆ¶ï¼ˆèƒŒå‹, Backpressureï¼‰&lt;/strong&gt;ï¼šä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼ˆå¦‚ &lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ï¼‰å¯ä»¥é˜²æ­¢ç”Ÿäº§è€…ç”Ÿäº§è¿‡å¿«å¯¼è‡´å†…å­˜è€—å°½ï¼Œé˜Ÿåˆ—æ»¡æ—¶ç”Ÿäº§è€…ä¼šè‡ªåŠ¨é˜»å¡ï¼Œä»è€Œé™ä½ç”Ÿäº§é€Ÿåº¦ï¼Œå½¢æˆèƒŒå‹æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦çº¿ç¨‹é—´ç®€å•å¯é çš„åè°ƒ&lt;/strong&gt;ï¼šé˜»å¡ç­‰å¾…çš„è¯­ä¹‰éå¸¸æ¸…æ™°ç›´è§‚ï¼Œä½¿å¾—ä»£ç æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ConcurrentLinkedQueue çš„ &lt;code&gt;size()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼šç”±äºå®ƒçš„æ— é”å’Œå¼±ä¸€è‡´æ€§è®¾è®¡ï¼Œ&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•éœ€è¦éå†é“¾è¡¨ï¼Œæ˜¯ä¸€ä¸ª &lt;strong&gt;O(n)&lt;/strong&gt; æ“ä½œï¼Œä¸”ç»“æœå¯èƒ½ä¸å‡†ç¡®ã€‚åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;isEmpty()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ConcurrentLinkedQueue çš„æ— ç•Œæ€§&lt;/strong&gt;ï¼šä½œä¸ºæ— ç•Œé˜Ÿåˆ—ï¼Œå¦‚æœæ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦è¿œæ…¢äºç”Ÿäº§è€…ï¼Œæœ‰å¯¼è‡´å†…å­˜æº¢å‡ºçš„é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BlockingQueue çš„å¤šæ ·æ€§&lt;/strong&gt;ï¼š&lt;code&gt;BlockingQueue&lt;/code&gt;æ˜¯ä¸€ä¸ªæ¥å£ï¼Œé™¤äº†å¸¸ç”¨çš„ &lt;code&gt;ArrayBlockingQueue&lt;/code&gt;å’Œ &lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ï¼Œè¿˜æœ‰ &lt;code&gt;PriorityBlockingQueue&lt;/code&gt;ï¼ˆæ”¯æŒä¼˜å…ˆçº§æ’åºï¼‰ã€&lt;code&gt;DelayQueue&lt;/code&gt;ï¼ˆåŸºäºå»¶è¿Ÿæ—¶é—´ï¼‰å’Œ &lt;code&gt;SynchronousQueue&lt;/code&gt;ï¼ˆä¸å­˜å‚¨å…ƒç´ ï¼Œç›´æ¥ä¼ é€’ï¼‰ç­‰ç‰¹æ®Šå®ç°ï¼Œå¯æ ¹æ®ç‰¹å®šåœºæ™¯é€‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ConcurrentLinkedQueue åƒæ˜¯ä¸€æ¡æ°¸ä¸å µå¡çš„é«˜é€Ÿå…¬è·¯ï¼Œè¿½æ±‚çš„æ˜¯æé«˜çš„é€šè¡Œæ•ˆç‡ï¼ˆååé‡ï¼‰ï¼Œä½†éœ€è¦é©¾é©¶å‘˜ï¼ˆå¼€å‘è€…ï¼‰è‡ªå·±æ³¨æ„å®‰å…¨ï¼Œé˜²æ­¢è½¦è¾†ï¼ˆä»»åŠ¡ï¼‰æ— é™å¢å¤šï¼›è€Œ BlockingQueue æ›´åƒæ˜¯ä¸€ä¸ªæœ‰äº¤é€šç¯å’Œå®¹é‡çš„äº¤å‰è·¯å£ï¼Œé€šè¿‡æš‚æ—¶çš„ç­‰å¾…ï¼ˆé˜»å¡ï¼‰æ¥ç¡®ä¿äº¤é€šï¼ˆç”Ÿäº§æ¶ˆè´¹ï¼‰æœ‰åºã€å®‰å…¨ï¼Œä¸ä¼šå¤±æ§ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ åšå‡ºæœ€åˆé€‚çš„æŠ€æœ¯é€‰å‹ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´å¤šç»†èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="concurrentskiplist"&gt;ConcurrentSkipList
&lt;/h2&gt;&lt;p&gt;ConcurrentSkipListSet æ˜¯ Java å¹¶å‘åŒ…ä¸­ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ã€åŸºäºè·³è·ƒè¡¨å®ç°çš„æœ‰åºé›†åˆã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„å…³é”®ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ConcurrentSkipListSet çš„æ ¸å¿ƒç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;strong&gt;CAS æ— é”ç®—æ³•&lt;/strong&gt; å®ç°ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘å®‰å…¨è®¿é—® ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰åºæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…ƒç´ é»˜è®¤æŒ‰&lt;strong&gt;è‡ªç„¶é¡ºåº&lt;/strong&gt;æˆ–åˆ›å»ºæ—¶æä¾›çš„ &lt;strong&gt;Comparator&lt;/strong&gt; æ’åºï¼Œå®ç° &lt;code&gt;NavigableSet&lt;/code&gt;æ¥å£ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº &lt;strong&gt;è·³è·ƒè¡¨&lt;/strong&gt;ï¼Œä¸€ç§æ¦‚ç‡æ€§çš„åˆ†å±‚ç´¢å¼•ç»“æ„ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(log n)&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾¹ç•Œæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— ç•Œé›†åˆ&lt;/strong&gt;ï¼Œåªå—å†…å­˜é™åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL çº¦æŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å…è®¸æ’å…¥ &lt;code&gt;null&lt;/code&gt;å…ƒç´ &lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿­ä»£å™¨ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼±ä¸€è‡´æ€§&lt;/strong&gt;ï¼Œä¸ä¼šæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ï¼Œä½†ä¸ä¿è¯åæ˜ éå†è¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ›´æ–° ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éæ’å®šæ—¶é—´æ“ä½œ&lt;/strong&gt;ï¼Œéœ€è¦éå†è®¡æ•°ï¼Œé«˜å¹¶å‘ä¸‹ç»“æœå¯èƒ½ä¸å‡†ç¡®ï¼Œé€šå¸¸ä¸å®ç”¨ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†è·³è·ƒè¡¨ä¸å¹¶å‘æ§åˆ¶"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ï¼šè·³è·ƒè¡¨ä¸å¹¶å‘æ§åˆ¶
&lt;/h3&gt;&lt;p&gt;ConcurrentSkipListSet çš„é«˜æ€§èƒ½æºäºå…¶ç²¾å¦™çš„åº•å±‚è®¾è®¡ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·³è·ƒè¡¨çš„ç»“æ„ä¸æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è·³è·ƒè¡¨å¯ä»¥ç†è§£ä¸º&lt;strong&gt;å¤šå±‚é“¾è¡¨&lt;/strong&gt;çš„ç»„åˆ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº•å±‚&lt;/strong&gt;ï¼šä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ çš„æœ‰åºé“¾è¡¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šå±‚&lt;/strong&gt;ï¼šä½œä¸ºåº•å±‚é“¾è¡¨çš„â€œå¿«é€Ÿé€šé“â€æˆ–ç´¢å¼•ï¼Œå±‚æ•°è¶Šé«˜ï¼ŒèŠ‚ç‚¹è¶Šç¨€ç–ã€‚æ¯ä¸ªèŠ‚ç‚¹æ’å…¥æ—¶ï¼Œå…¶å±‚çº§ç”±éšæœºç®—æ³•å†³å®šï¼ˆå¦‚ç±»ä¼¼æŠ›ç¡¬å¸ï¼Œæœ‰50%çš„æ¦‚ç‡æå‡ä¸€å±‚ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿›è¡ŒæŸ¥æ‰¾æ—¶ï¼Œç®—æ³•ä»æœ€é«˜å±‚å¼€å§‹ï¼Œå‘å³å‰è¿›ç›´åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å€¼å¤§äºç›®æ ‡ï¼Œç„¶åä¸‹é™ä¸€å±‚ç»§ç»­æŸ¥æ‰¾ï¼Œå¦‚æ­¤åå¤ï¼Œä»è€Œè·³è¿‡å¤§é‡ä¸å¿…è¦çš„æ¯”è¾ƒï¼Œå®ç°é«˜æ•ˆè®¿é—® ã€‚æ’å…¥å’Œåˆ é™¤æ“ä½œä¹ŸåŸºäºç±»ä¼¼çš„æŸ¥æ‰¾é€»è¾‘ï¼Œå¹¶æ›´æ–°ç›¸å…³å±‚çš„æŒ‡é’ˆ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘å®‰å…¨å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ConcurrentSkipListSet çš„çº¿ç¨‹å®‰å…¨ä¸æ˜¯é€šè¿‡ä¼ ç»Ÿçš„é”æœºåˆ¶ï¼Œè€Œæ˜¯ä¾èµ–äº &lt;strong&gt;CAS æ“ä½œ&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹é˜Ÿåˆ—æ—¶ï¼ŒCAS ä¼šç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸæ›´æ–°æŒ‡é’ˆï¼Œå…¶ä»–å¤±è´¥çš„çº¿ç¨‹ä¼šç«‹å³é‡è¯•ã€‚è¿™ä¸ªè¿‡ç¨‹&lt;strong&gt;ä¸ä¼šå¯¼è‡´çº¿ç¨‹è¢«æŒ‚èµ·ï¼ˆé˜»å¡ï¼‰&lt;/strong&gt;ï¼Œé¿å…äº†æ˜‚è´µçš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå› æ­¤åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹èƒ½å®ç°å¾ˆé«˜çš„ååé‡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦æ–¹æ³•ä¸ä½¿ç”¨ç¤ºä¾‹"&gt;ğŸ“– ä¸»è¦æ–¹æ³•ä¸ä½¿ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;äº†è§£åŸç†åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ä¸»è¦æ–¹æ³•å’Œå¦‚ä½•ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;add(E e)&lt;/code&gt;, &lt;code&gt;contains(Object o)&lt;/code&gt;, &lt;code&gt;remove(Object o)&lt;/code&gt;ç­‰å•å…ƒç´ æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(log n) ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒƒå›´è§†å›¾æ“ä½œ&lt;/strong&gt;ï¼šå¾—ç›Šäºæœ‰åºæ€§ï¼Œå®ƒæä¾›äº† &lt;code&gt;subSet&lt;/code&gt;, &lt;code&gt;headSet&lt;/code&gt;, &lt;code&gt;tailSet&lt;/code&gt;ç­‰æ–¹æ³•ï¼Œå¯ä»¥é«˜æ•ˆåœ°è·å–æŸä¸ªåŒºé—´å†…çš„å…ƒç´ è§†å›¾ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¼èˆªæ“ä½œ&lt;/strong&gt;ï¼šä½œä¸º &lt;code&gt;NavigableSet&lt;/code&gt;ï¼Œå®ƒæ”¯æŒ &lt;code&gt;ceiling&lt;/code&gt;ï¼ˆå¤§äºç­‰äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ ï¼‰ã€&lt;code&gt;floor&lt;/code&gt;ï¼ˆå°äºç­‰äºç»™å®šå…ƒç´ çš„æœ€å¤§å…ƒç´ ï¼‰ã€&lt;code&gt;higher&lt;/code&gt;ã€&lt;code&gt;lower&lt;/code&gt;ç­‰å¯¼èˆªæ–¹æ³• ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ä»£ç ï¼šåŸºæœ¬ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.concurrent.ConcurrentSkipListSet;
public class Example {
public static void main(String[] args) {
// åˆ›å»ºé›†åˆï¼ŒæŒ‰è‡ªç„¶é¡ºåºæ’åº
ConcurrentSkipListSet&amp;lt;Integer&amp;gt; set = new ConcurrentSkipListSet&amp;lt;&amp;gt;();
// æ·»åŠ å…ƒç´ 
set.add(5);
set.add(2);
set.add(8);
// è¾“å‡ºä¼šè‡ªåŠ¨æ’åºï¼š[2, 5, 8]
System.out.println(&amp;#34;Set contents: &amp;#34; + set);
// è·å–å­é›† [2, 5]
System.out.println(&amp;#34;HeadSet (&amp;lt;5): &amp;#34; + set.headSet(5));
// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼ˆä¾‹å¦‚ï¼Œé™åºï¼‰
ConcurrentSkipListSet&amp;lt;Integer&amp;gt; descendingSet =
new ConcurrentSkipListSet&amp;lt;&amp;gt;(Comparator.reverseOrder());
descendingSet.addAll(set);
// è¾“å‡ºï¼š[8, 5, 2]
System.out.println(&amp;#34;Descending set: &amp;#34; + descendingSet);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹-1"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©ä½¿ç”¨ ConcurrentSkipListSet å‰ï¼Œè¯·æ˜ç¡®å…¶é€‚ç”¨åœºæ™¯å’Œæ½œåœ¨é™åˆ¶ã€‚&lt;/p&gt;
&lt;h4 id="å…¸å‹é€‚ç”¨åœºæ™¯--1"&gt;**å…¸å‹é€‚ç”¨åœºæ™¯ **
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘æœ‰åºé›†åˆ&lt;/strong&gt;ï¼šå¦‚å®æ—¶&lt;strong&gt;æ’è¡Œæ¦œ&lt;/strong&gt;ã€&lt;strong&gt;ç§¯åˆ†æ¦œ&lt;/strong&gt;ç­‰ï¼Œéœ€è¦å¤šçº¿ç¨‹å®‰å…¨åœ°æ’å…¥ã€æ›´æ–°å’ŒæŒ‰é¡ºåºè¯»å–æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦é«˜æ•ˆèŒƒå›´æŸ¥è¯¢çš„åœºæ™¯&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œéœ€è¦é¢‘ç¹æŸ¥æ‰¾æŸä¸ªåˆ†æ•°æ®µæˆ–IDåŒºé—´çš„æ‰€æœ‰å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›¿ä»£ &lt;code&gt;TreeSet&lt;/code&gt;çš„å¹¶å‘ç‰ˆæœ¬&lt;/strong&gt;ï¼šå½“éœ€è¦ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ä¸”æœ‰åºçš„é›†åˆæ—¶ï¼Œ&lt;code&gt;ConcurrentSkipListSet&lt;/code&gt;æ˜¯ &lt;code&gt;TreeSet&lt;/code&gt;çš„ç†æƒ³æ›¿ä»£å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é‡è¦æ³¨æ„äº‹é¡¹ä¸é™åˆ¶-1"&gt;&lt;strong&gt;é‡è¦æ³¨æ„äº‹é¡¹ä¸é™åˆ¶&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;ï¼šè·³è·ƒè¡¨çš„å¤šå±‚ç´¢å¼•ç»“æ„å¯¼è‡´å…¶&lt;strong&gt;å†…å­˜å ç”¨é«˜äº &lt;code&gt;HashSet&lt;/code&gt;æˆ–æ™®é€šçš„é“¾è¡¨&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ…ç”¨ &lt;code&gt;size()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼š&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•éœ€è¦éå†æ•´ä¸ªé›†åˆè®¡æ•°ï¼Œæ˜¯ &lt;strong&gt;O(n)&lt;/strong&gt; æ“ä½œï¼Œä¸”åœ¨å¹¶å‘ç¯å¢ƒä¸‹ç»“æœå¯èƒ½ä¸å‡†ç¡®ã€‚åˆ¤æ–­æ˜¯å¦ä¸ºç©ºåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;isEmpty()&lt;/code&gt;æ–¹æ³• ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼±ä¸€è‡´æ€§è¿­ä»£å™¨&lt;/strong&gt;ï¼šè¿­ä»£å™¨åæ˜ çš„æ˜¯åˆ›å»ºæ—¶åˆ»æˆ–ä¹‹åæŸä¸ªç‚¹çš„é›†åˆçŠ¶æ€ï¼Œä¸ä¿è¯èƒ½éå†åˆ°è¿­ä»£è¿‡ç¨‹ä¸­æ‰€æœ‰æ–°åŠ å…¥æˆ–åˆ é™¤çš„å…ƒç´ ï¼Œä½†ä¹Ÿä¸ä¼šæŠ›å‡ºå¼‚å¸¸ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–é›†åˆçš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–é›†åˆçš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°è¿›è¡ŒæŠ€æœ¯é€‰å‹ï¼Œä¸‹é¢æ˜¯ä¸å…¶å®ƒå¸¸ç”¨ Set çš„å¯¹æ¯” ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ConcurrentSkipListSet&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;TreeSet&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;CopyOnWriteArraySet&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ConcurrentHashMap.KeySetView&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰åºæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·³è·ƒè¡¨&lt;/td&gt;
&lt;td&gt;çº¢é»‘æ ‘&lt;/td&gt;
&lt;td&gt;åŠ¨æ€æ•°ç»„&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œè¡¨+é“¾è¡¨/æ ‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ï¼ˆæ— é”ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆéœ€å¤–éƒ¨åŒæ­¥ï¼‰&lt;/td&gt;
&lt;td&gt;å†™æ“ä½œæ€§èƒ½å·®ï¼ˆéœ€å¤åˆ¶ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éå¸¸é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¹¶å‘+æœ‰åº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•çº¿ç¨‹æœ‰åº&lt;/td&gt;
&lt;td&gt;è¯»å¤šå†™æå°‘&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¹¶å‘+æ— åº&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ConcurrentSkipListSet&lt;/code&gt;æ˜¯ Java å¹¶å‘ç¼–ç¨‹ä¸­ä¸€æ¬¾å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒåœ¨&lt;strong&gt;é«˜ååé‡ã€éœ€è¦å…ƒç´ æœ‰åºä¸”å¹¶å‘è®¿é—®&lt;/strong&gt;çš„åœºæ™¯ä¸‹è¡¨ç°å‡ºè‰²ã€‚å…¶&lt;strong&gt;æ— é”ã€åŸºäºè·³è·ƒè¡¨&lt;/strong&gt;çš„è®¾è®¡ä½¿å…¶åœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„åŒæ—¶ï¼Œæä¾›äº†è‰¯å¥½çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œä½ ä¹Ÿéœ€è¦äº†è§£å…¶&lt;strong&gt;å†…å­˜å¼€é”€è¾ƒé«˜&lt;/strong&gt;ã€&lt;strong&gt;&lt;code&gt;size()&lt;/code&gt;æ–¹æ³•æ•ˆç‡ä½&lt;/strong&gt;ç­‰ç‰¹ç‚¹ã€‚å¦‚æœä½ çš„åœºæ™¯ä¸éœ€è¦å…ƒç´ æœ‰åºï¼Œé‚£ä¹ˆ &lt;code&gt;ConcurrentHashMap.KeySetView&lt;/code&gt;å¯èƒ½ä¼šæ˜¯æ€§èƒ½æ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£å¹¶æ­£ç¡®ä½¿ç”¨ &lt;code&gt;ConcurrentSkipListSet&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="hashmap"&gt;HashMap
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th style="text-align: left"&gt;JDK7 å®ç°&lt;/th&gt;
&lt;th style="text-align: left"&gt;JDK8 å®ç°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;åº•å±‚ç»“æ„&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ•°ç»„ + é“¾è¡¨ï¼ˆEntry èŠ‚ç‚¹ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘ï¼ˆNode/TreeNode èŠ‚ç‚¹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å†²çªè§£å†³&lt;/td&gt;
&lt;td style="text-align: left"&gt;é“¾è¡¨ï¼ˆé•¿åº¦æ— é™åˆ¶ï¼ŒæŸ¥æ‰¾ O(n)ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é“¾è¡¨é•¿åº¦ â‰¥8 ä¸”æ•°ç»„é•¿åº¦ â‰¥64 æ—¶è½¬ä¸ºçº¢é»‘æ ‘ï¼ˆæŸ¥æ‰¾ O(logn)ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ’å…¥æ–¹å¼&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¤´æ’æ³•ï¼ˆæ–°èŠ‚ç‚¹æ’å…¥é“¾è¡¨å¤´éƒ¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å°¾æ’æ³•ï¼ˆæ–°èŠ‚ç‚¹æ’å…¥é“¾è¡¨å°¾éƒ¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ‰©å®¹æ—¶å“ˆå¸Œè®¡ç®—&lt;/td&gt;
&lt;td style="text-align: left"&gt;é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼ˆhash()æ–¹æ³•ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é€šè¿‡hash &amp;amp; oldCapåˆ¤æ–­æ˜¯å¦éœ€è¦ç§»åŠ¨ï¼ˆæ— éœ€é‡æ–°è®¡ç®—å“ˆå¸Œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ­»å¾ªç¯é—®é¢˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¤šçº¿ç¨‹æ‰©å®¹æ—¶å¯èƒ½å¯¼è‡´é“¾è¡¨æˆç¯ï¼ˆæ­»å¾ªç¯ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å°¾æ’æ³•é¿å…äº†æ­»å¾ªç¯ï¼Œä½†ä»å­˜åœ¨æ•°æ®è¦†ç›–é—®é¢˜ï¼ˆçº¿ç¨‹ä¸å®‰å…¨æœ¬è´¨æœªå˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="concurrenthashmap"&gt;ConcurrentHashMap
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç»´åº¦&lt;/th&gt;
&lt;th style="text-align: left"&gt;JDK 7&lt;/th&gt;
&lt;th style="text-align: left"&gt;JDK 8&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;åº•å±‚ç»“æ„&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ•°ç»„ + é“¾è¡¨ + åˆ†æ®µé”ï¼ˆSegmentï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘ + CAS + synchronized&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;é”ç²’åº¦&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ®µçº§é”ï¼ˆæ¯ä¸ª Segment ç‹¬ç«‹åŠ é”ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;èŠ‚ç‚¹çº§é”ï¼ˆä»…é”å®šé“¾è¡¨å¤´æˆ–çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å¹¶å‘æ€§èƒ½&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸­ç­‰ï¼ˆæ”¯æŒå¤šæ®µå¹¶å‘ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é«˜ï¼ˆç»†ç²’åº¦é” + æ— é”è¯»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ‰©å®¹æœºåˆ¶&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…¨é‡æ‰©å®¹ï¼ˆå•çº¿ç¨‹å®Œæˆï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¹¶å‘æ‰©å®¹ï¼ˆå¤šçº¿ç¨‹åä½œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å®ç°ç±»&lt;/th&gt;
&lt;th style="text-align: left"&gt;çº¿ç¨‹å®‰å…¨æœºåˆ¶&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯»æ€§èƒ½&lt;/th&gt;
&lt;th style="text-align: left"&gt;å†™æ€§èƒ½&lt;/th&gt;
&lt;th style="text-align: left"&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ConcurrentHashMap&lt;/td&gt;
&lt;td style="text-align: left"&gt;CAS + ç»†ç²’åº¦é”&lt;/td&gt;
&lt;td style="text-align: left"&gt;æé«˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;é«˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;é«˜å¹¶å‘è¯»å†™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Hashtable&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…¨å±€é”ï¼ˆsynchronizedï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä½&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä½&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä½å¹¶å‘åœºæ™¯ï¼ˆå·²æ·˜æ±°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;Collections.synchronizedMap&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ–¹æ³•çº§åŒæ­¥é”&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸­ç­‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸­ç­‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç®€å•åŒæ­¥éœ€æ±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;CopyOnWriteç³»åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†™æ—¶å¤åˆ¶&lt;/td&gt;
&lt;td style="text-align: left"&gt;æé«˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;æä½&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¯»å¤šå†™å°‘ï¼ˆå¦‚é…ç½®ç¼“å­˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="concurrentskiplistmap"&gt;ConcurrentSkipListMap
&lt;/h2&gt;&lt;p&gt;ã€‚æœ‰çš„ã€‚åœ¨Javaä¸­ï¼Œå¦‚æœä½ éœ€è¦ä¸€ä¸ªæ—¢&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;åˆèƒ½ä¿æŒå…ƒç´ &lt;strong&gt;é¡ºåº&lt;/strong&gt;çš„Mapï¼Œä¸»è¦æœ‰ä¸¤ä¸ªæ ¸å¿ƒé€‰æ‹©ï¼š&lt;code&gt;ConcurrentSkipListMap&lt;/code&gt;å’Œé€šè¿‡åŒ…è£…&lt;code&gt;LinkedHashMap&lt;/code&gt;å¾—åˆ°çš„åŒæ­¥Mapã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„ä¸»è¦ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ConcurrentSkipListMap&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Collections.synchronizedMap(new LinkedHashMap&amp;lt;&amp;gt;())&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰åºæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰&lt;strong&gt;é”®çš„è‡ªç„¶é¡ºåº&lt;/strong&gt;æˆ–&lt;strong&gt;è‡ªå®šä¹‰æ¯”è¾ƒå™¨&lt;/strong&gt;æ’åº&lt;/td&gt;
&lt;td&gt;æŒ‰&lt;strong&gt;å…ƒç´ çš„æ’å…¥é¡ºåº&lt;/strong&gt;æ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨åŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— é”ç®—æ³•ï¼ˆCASï¼‰&lt;/strong&gt;ï¼Œé«˜å¹¶å‘ä¸‹æ€§èƒ½æ›´å¥½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŒæ­¥é”ï¼ˆsynchronizedï¼‰&lt;/strong&gt;ï¼Œé”ä½æ•´ä¸ªMapå¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·³è·ƒè¡¨ï¼ˆSkip Listï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å“ˆå¸Œè¡¨ + åŒå‘é“¾è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¯»å†™çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º &lt;strong&gt;O(log n)&lt;/strong&gt;ï¼Œé«˜å¹¶å‘ååé‡é«˜&lt;/td&gt;
&lt;td&gt;è¯»å†™å¹³å‡æ—¶é—´å¤æ‚åº¦è¿‘ &lt;strong&gt;O(1)&lt;/strong&gt;ï¼Œä½†åœ¨é«˜å¹¶å‘ä¸‹é”ç«äº‰å¯èƒ½æˆä¸ºç“¶é¢ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ä¸”éœ€è¦&lt;strong&gt;é”®æ’åº&lt;/strong&gt;çš„åœºæ™¯ï¼ˆå¦‚å®æ—¶æ’è¡Œæ¦œã€å¸¦é¡ºåºçš„è°ƒåº¦ç³»ç»Ÿï¼‰&lt;/td&gt;
&lt;td&gt;å¹¶å‘åº¦ä¸é«˜ä½†éœ€è¦&lt;strong&gt;ä¿æŒæ’å…¥é¡ºåº&lt;/strong&gt;çš„åœºæ™¯ï¼ˆå¦‚é¡ºåºæ—¥å¿—è®°å½•ã€ç¼“å­˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹© &lt;code&gt;ConcurrentSkipListMap&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä½ çš„åº”ç”¨åœºæ™¯æ˜¯&lt;strong&gt;é«˜å¹¶å‘&lt;/strong&gt;çš„ï¼Œå¹¶ä¸”éœ€è¦&lt;strong&gt;é”®ï¼ˆKeyï¼‰æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åˆ—&lt;/strong&gt;æ—¶ï¼Œå®ƒæ˜¯ç†æƒ³é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå®ç°ä¸€ä¸ªå¤šçº¿ç¨‹æ›´æ–°çš„å®æ—¶ç§¯åˆ†æ¦œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©åŒæ­¥çš„ &lt;code&gt;LinkedHashMap&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä½ çš„å¹¶å‘å‹åŠ›&lt;strong&gt;ä¸å¤§&lt;/strong&gt;ï¼Œä½†éå¸¸çœ‹é‡&lt;strong&gt;å…ƒç´ æ’å…¥çš„é¡ºåº&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œéœ€è¦ç¡®ä¿éå†Mapæ—¶çš„é¡ºåºå’Œæ”¾å…¥æ—¶çš„é¡ºåºå®Œå…¨ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æƒè¡¡&lt;/strong&gt;ï¼š&lt;code&gt;ConcurrentSkipListMap&lt;/code&gt;ç”±äºåŸºäºè·³è¡¨å®ç°ï¼Œåœ¨éå¹¶å‘æˆ–ä½å¹¶å‘æƒ…å†µä¸‹ï¼Œå…¶æ€§èƒ½å¯èƒ½ä¸å¦‚æ™®é€šçš„&lt;code&gt;HashMap&lt;/code&gt;ã€‚è€ŒåŒæ­¥çš„&lt;code&gt;LinkedHashMap&lt;/code&gt;åœ¨é«˜å¹¶å‘ä¸‹ä¼šå› é”ç«äº‰å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULLé”®å€¼&lt;/strong&gt;ï¼š&lt;code&gt;ConcurrentSkipListMap&lt;/code&gt;&lt;strong&gt;ä¸å…è®¸&lt;/strong&gt;ä½¿ç”¨&lt;code&gt;null&lt;/code&gt;ä½œä¸ºé”®æˆ–å€¼ã€‚åœ¨ä½¿ç”¨æ—¶éœ€è¦ç•™æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´ç°ä»£çš„é€‰æ‹©&lt;/strong&gt;ï¼šå¯¹äºé«˜å¹¶å‘ä½†ä¸éœ€è¦æ’åºçš„åœºæ™¯ï¼Œ&lt;code&gt;ConcurrentHashMap&lt;/code&gt;é€šå¸¸æ˜¯æ€§èƒ½æœ€å¥½çš„é€‰æ‹©ï¼Œä½†å®ƒä¸ä¿è¯é¡ºåºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ¢³ç†èƒ½å¸®åŠ©ä½ æ ¹æ®å…·ä½“éœ€æ±‚åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´å¤šç»†èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="object-ç±»"&gt;Object ç±»
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;æ–¹æ³•&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;å¸¸è§åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;toString()&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼&lt;/td&gt;
&lt;td style="text-align: left"&gt;è°ƒè¯•ã€æ—¥å¿—è¾“å‡º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;equals(Object obj)&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦â€œé€»è¾‘ç›¸ç­‰â€&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‡ªå®šä¹‰å¯¹è±¡å†…å®¹æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;hashCode()&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿”å›å¯¹è±¡çš„å“ˆå¸Œç ï¼ˆç”¨äºå“ˆå¸Œè¡¨å­˜å‚¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é›†åˆç±»ï¼ˆå¦‚HashMapã€HashSetï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;getClass()&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¿”å›å¯¹è±¡çš„è¿è¡Œæ—¶ç±»ï¼ˆClasså¯¹è±¡ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;åå°„ã€ç±»å‹æ£€æŸ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;clone()&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ›å»ºå¹¶è¿”å›å¯¹è±¡çš„å‰¯æœ¬ï¼ˆæµ…æ‹·è´ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯¹è±¡å¤åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;finalize()&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯¹è±¡è¢«åƒåœ¾å›æ”¶å‰è°ƒç”¨ï¼ˆå·²åºŸå¼ƒï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;èµ„æºæ¸…ç†ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;wait()ã€wait(long timeout)ã€wait(long timeout, int nanos)&lt;/td&gt;
&lt;td style="text-align: left"&gt;è®©å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ˆéœ€åœ¨åŒæ­¥å—ä¸­ä½¿ç”¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;çº¿ç¨‹é—´é€šä¿¡ï¼ˆç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;notify()ã€notifyAll()&lt;/td&gt;
&lt;td style="text-align: left"&gt;å”¤é†’ç­‰å¾…è¯¥å¯¹è±¡é”çš„çº¿ç¨‹ï¼ˆéœ€åœ¨åŒæ­¥å—ä¸­ä½¿ç”¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;çº¿ç¨‹é—´é€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;registerNatives()&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ¬åœ°æ–¹æ³•ï¼Œç”¨äºæ³¨å†Œæœ¬åœ°æ–¹æ³•å®ç°ï¼ˆç”± JVM å†…éƒ¨ä½¿ç”¨ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¾ˆå°‘ç”¨ï¼Œæ— éœ€å…³æ³¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="å¼•ç”¨æ‹·è´--æµ…æ‹·è´"&gt;å¼•ç”¨æ‹·è´ &amp;amp; æµ…æ‹·è´
&lt;/h2&gt;&lt;p&gt;åœ¨Javaä¸­ï¼Œå¼•ç”¨æ‹·è´å’Œæµ…æ‹·è´æ˜¯ä¸¤ç§ä¸åŒçš„å¯¹è±¡å¤åˆ¶æ–¹å¼ï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äº&lt;strong&gt;æ˜¯å¦åˆ›å»ºäº†æ–°å¯¹è±¡&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;å¯¹åŸå§‹å¯¹è±¡å†…éƒ¨å¼•ç”¨ç±»å‹å­—æ®µçš„å¤„ç†æ–¹å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;å¼•ç”¨æ‹·è´&lt;/th&gt;
&lt;th&gt;æµ…æ‹·è´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–°å¯¹è±¡åˆ›å»º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åˆ›å»ºæ–°å¯¹è±¡ï¼Œä»…å¤åˆ¶å¼•ç”¨&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ–°å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜å¯¹è±¡&lt;/td&gt;
&lt;td&gt;æ–°å¯¹è±¡å’ŒåŸå¯¹è±¡çš„åŸºæœ¬ç±»å‹å­—æ®µç‹¬ç«‹ï¼Œä½†å¼•ç”¨ç±»å‹å­—æ®µæŒ‡å‘åŒä¸€å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹è±¡ç‹¬ç«‹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®Œå…¨å…±äº«ï¼Œä¿®æ”¹ä»»ä¸€å¼•ç”¨éƒ½ä¼šå½±å“å¦ä¸€æ–¹&lt;/td&gt;
&lt;td&gt;åŸºæœ¬ç±»å‹å­—æ®µç‹¬ç«‹ï¼Œä¿®æ”¹å¼•ç”¨ç±»å‹å­—æ®µä¼šç›¸äº’å½±å“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥èµ‹å€¼ï¼ˆ&lt;code&gt;=&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;å®ç°&lt;code&gt;Cloneable&lt;/code&gt;æ¥å£å¹¶é‡å†™&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— é¢å¤–å¼€é”€&lt;/td&gt;
&lt;td&gt;å¼€é”€è¾ƒä½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹ä¸è§£æ"&gt;ğŸ’» ä»£ç ç¤ºä¾‹ä¸è§£æ
&lt;/h3&gt;&lt;p&gt;é€šè¿‡å…·ä½“çš„ä»£ç å¯ä»¥æ›´ç›´è§‚åœ°ç†è§£å®ƒä»¬çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼•ç”¨æ‹·è´ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¼•ç”¨æ‹·è´åªæ˜¯ç»™å·²æœ‰çš„å¯¹è±¡å¢åŠ äº†ä¸€ä¸ªâ€œåˆ«åâ€ï¼Œä¸¤ä¸ªå˜é‡å®é™…ä¸Šæ“ä½œçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Person p1 = new Person(&amp;#34;Alice&amp;#34;, new Address(&amp;#34;åŒ—äº¬&amp;#34;));
Person p2 = p1; // å¼•ç”¨æ‹·è´ï¼šp1 å’Œ p2 æŒ‡å‘å†…å­˜ä¸­çš„åŒä¸€ä¸ªPersonå¯¹è±¡
p2.setName(&amp;#34;Bob&amp;#34;); // ä¿®æ”¹p2çš„name
p2.getAddress().setCity(&amp;#34;ä¸Šæµ·&amp;#34;); // ä¿®æ”¹p2çš„address
System.out.println(p1.getName()); // è¾“å‡º &amp;#34;Bob&amp;#34;ï¼Œp1çš„nameä¹Ÿè¢«ä¿®æ”¹äº†
System.out.println(p1.getAddress().getCity()); // è¾“å‡º &amp;#34;ä¸Šæµ·&amp;#34;ï¼Œp1çš„addressä¹Ÿè¢«ä¿®æ”¹äº†
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æµ…æ‹·è´ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æµ…æ‹·è´åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä½†å¯¹äºå¯¹è±¡å†…éƒ¨çš„å¼•ç”¨ç±»å‹å­—æ®µï¼ˆå¦‚&lt;code&gt;Address&lt;/code&gt;ï¼‰ï¼Œå®ƒåªå¤åˆ¶äº†å¼•ç”¨åœ°å€ã€‚å› æ­¤ï¼Œæ–°æ—§å¯¹è±¡å…±äº«åŒä¸€ä¸ª&lt;code&gt;Address&lt;/code&gt;å®ä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å‡è®¾Personç±»å®ç°äº†Cloneableæ¥å£ï¼Œå¹¶é‡å†™äº†clone()æ–¹æ³•
Person p1 = new Person(&amp;#34;Alice&amp;#34;, new Address(&amp;#34;åŒ—äº¬&amp;#34;));
Person p2 = (Person) p1.clone(); // æµ…æ‹·è´ï¼šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Personå¯¹è±¡
p2.setName(&amp;#34;Bob&amp;#34;); // ä¿®æ”¹p2çš„nameï¼ˆåŸºæœ¬ç±»å‹æˆ–Stringï¼‰ï¼Œä¸å½±å“p1
p2.getAddress().setCity(&amp;#34;ä¸Šæµ·&amp;#34;); // ä¿®æ”¹p2çš„addressï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œp1çš„addressä¹Ÿéšä¹‹æ”¹å˜ï¼
System.out.println(p1.getName()); // è¾“å‡º &amp;#34;Alice&amp;#34;ï¼Œp1çš„nameæœªå—å½±å“
System.out.println(p1.getAddress().getCity()); // è¾“å‡º &amp;#34;ä¸Šæµ·&amp;#34;ï¼Œp1çš„addressè¢«ä¿®æ”¹äº†
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå¼•ç”¨æ‹·è´æ˜¯&lt;strong&gt;å¤šä¸ªæ ‡ç­¾è´´åœ¨åŒä¸€ä»½å®ç‰©ä¸Š&lt;/strong&gt;ï¼Œè€Œæµ…æ‹·è´æ˜¯&lt;strong&gt;å¤å°äº†ä¸€ä»½è¡¨å•ï¼Œä½†è¡¨å•ä¸Šâ€œç´§æ€¥è”ç³»äººâ€çš„ç”µè¯è¿˜æ˜¯åŸæ¥é‚£ä¸ª&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹å¼æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼•ç”¨æ‹·è´&lt;/strong&gt;ï¼šå½“ä½ ç¡®å®éœ€è¦å…±äº«åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä»»ä½•ä¸€æ–¹å¯¹å¯¹è±¡çš„ä¿®æ”¹éƒ½éœ€è¦å¯¹å¦ä¸€æ–¹å¯è§æ—¶ä½¿ç”¨ï¼ˆä½†éœ€è°¨æ…ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ï¼šå½“éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½†å¯¹è±¡å†…éƒ¨åŒ…å«çš„å¼•ç”¨æ•°æ®æ˜¯åªè¯»çš„ã€ä¸å¯å˜çš„ï¼Œæˆ–è€…ä½ æ„¿æ„å…±äº«è¿™äº›å†…éƒ¨æ•°æ®æ—¶ï¼Œä½¿ç”¨æµ…æ‹·è´æ˜¯é«˜æ•ˆä¸”åˆé€‚çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä½ å¸Œæœ›æ–°æ—§å¯¹è±¡å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ï¼Œåˆ™éœ€è¦ä½¿ç”¨&lt;strong&gt;æ·±æ‹·è´&lt;/strong&gt;æ¥é€’å½’åœ°å¤åˆ¶æ‰€æœ‰å±‚çº§çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£å¼•ç”¨æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«ã€‚å¦‚æœä½ å¯¹æ·±æ‹·è´çš„å…·ä½“å®ç°ï¼ˆå¦‚é€šè¿‡åºåˆ—åŒ–æˆ–å·¥å…·åº“ï¼‰æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="registernatives"&gt;registerNatives
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;registerNatives&lt;/code&gt;æ˜¯ Java åº•å±‚å¼€å‘ä¸­ä¸€ä¸ªå…³é”®æœºåˆ¶ï¼Œå®ƒè´Ÿè´£åœ¨ Java ä»£ç å’Œæœ¬åœ°ä»£ç ï¼ˆå¦‚ C/C++ï¼‰ä¹‹é—´å»ºç«‹æ¡¥æ¢ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒç‰¹ç‚¹ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä¸ä¼ ç»Ÿæ–¹å¼çš„ä¸»è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼ ç»Ÿé™æ€æ³¨å†Œ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;registerNatives&lt;/code&gt;åŠ¨æ€æ³¨å†Œ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»‘å®šæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–å›ºå®šçš„ JNI å‡½æ•°åè§„åˆ™è‡ªåŠ¨ç»‘å®š&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;code&gt;RegisterNatives&lt;/code&gt;å‡½æ•°æ‰‹åŠ¨ç»‘å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†—é•¿ä¸”ä¸¥æ ¼ï¼Œå¿…é¡»éµå¾ª &lt;code&gt;Java_åŒ…å_ç±»å_æ–¹æ³•å&lt;/code&gt;æ ¼å¼&lt;/td&gt;
&lt;td&gt;è‡ªç”±å‘½åï¼Œæ— éœ€éµå¾ªç‰¹å®šè§„åˆ™&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è¡¨ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¦–æ¬¡è°ƒç”¨æ—¶ï¼ŒJVM éœ€æŸ¥æ‰¾ç¬¦å·è¡¨ï¼Œæœ‰å»¶è¿Ÿ&lt;/td&gt;
&lt;td&gt;é¢„å…ˆç»‘å®šï¼Œ&lt;strong&gt;æ— é¦–æ¬¡è°ƒç”¨å»¶è¿Ÿ&lt;/strong&gt;ï¼Œæ€§èƒ½æ›´ä¼˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ŒJava æ–¹æ³•åæˆ–ç­¾åå˜æ›´éœ€é‡æ–°ç”Ÿæˆå¤´æ–‡ä»¶å¹¶ç¼–è¯‘&lt;/td&gt;
&lt;td&gt;é«˜ï¼Œå¯åœ¨è¿è¡Œæ—¶æ›´æ–°æ˜ å°„å…³ç³»ï¼Œ&lt;strong&gt;è§£è€¦æ€§å¼º&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ¬åœ°å‡½æ•°åæš´éœ²å®ç°ç»†èŠ‚&lt;/td&gt;
&lt;td&gt;éšè—å®é™…å®ç°å‡½æ•°åï¼Œå¢å¼ºå®‰å…¨æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸å·¥ä½œæµç¨‹"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ä¸å·¥ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;registerNatives&lt;/code&gt;çš„æœ¬è´¨æ˜¯ &lt;strong&gt;â€œåŠ¨æ€æ³¨å†Œâ€&lt;/strong&gt; ã€‚å®ƒé€šè¿‡åœ¨ Java ç±»åŠ è½½æ—¶ï¼Œä¸»åŠ¨å»ºç«‹ Java å£°æ˜çš„ &lt;code&gt;native&lt;/code&gt;æ–¹æ³•ä¸æœ¬åœ°å‡½æ•°å®ç°çš„æ˜ å°„å…³ç³»ï¼Œå–ä»£äº† JVM é»˜è®¤çš„æŒ‰åç§°æŸ¥æ‰¾è§„åˆ™ ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Java å±‚å£°æ˜ä¸è§¦å‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ Java ç±»ï¼ˆå¦‚ &lt;code&gt;java.lang.Object&lt;/code&gt;ï¼‰ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç‰¹æ®Šçš„é™æ€åˆå§‹åŒ–å—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class Object {
private static native void registerNatives(); // 1. å£°æ˜æœ¬åœ°æ³¨å†Œæ–¹æ³•
static {
registerNatives(); // 2. ç±»åŠ è½½æ—¶è‡ªåŠ¨æ‰§è¡Œ
}
// å…¶ä»–æœ¬åœ°æ–¹æ³•ï¼Œå¦‚ hashCodeã€wait ç­‰
public native int hashCode();
public final native void notify();
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“ JVM åŠ è½½è¿™ä¸ªç±»æ—¶ï¼Œä¼šæ‰§è¡Œé™æ€å—ï¼Œè°ƒç”¨ &lt;code&gt;registerNatives()&lt;/code&gt;æ–¹æ³• ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ¬åœ°å±‚çš„æ˜ å°„æ³¨å†Œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬åœ°ä»£ç ï¼ˆC/C++ï¼‰ä¸­ï¼Œéœ€è¦å®ç°è¿™ä¸ª &lt;code&gt;registerNatives&lt;/code&gt;å‡½æ•°ã€‚å…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;JNINativeMethod&lt;/code&gt;&lt;/strong&gt; ç»“æ„ä½“æ•°ç»„æ¥å®šä¹‰æ˜ å°„å…³ç³»ï¼Œç„¶åè°ƒç”¨ &lt;strong&gt;&lt;code&gt;JNIEnv-&amp;gt;RegisterNatives()&lt;/code&gt;&lt;/strong&gt; å‡½æ•°å®Œæˆæ³¨å†Œ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;JNINativeMethod&lt;/code&gt;ç»“æ„ä½“&lt;/strong&gt;ï¼šè¿™æ˜¯æ˜ å°„å…³ç³»çš„â€œè”ç³»äººç™»è®°è¡¨â€ï¼ŒåŒ…å«ä¸‰ä¸ªå­—æ®µ ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;: Java ä¸­çš„ native æ–¹æ³•åï¼ˆå¦‚ &lt;code&gt;&amp;quot;hashCode&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;signature&lt;/code&gt;: æ–¹æ³•çš„ JNI ç­¾åï¼Œæè¿°å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼ˆå¦‚ &lt;code&gt;&amp;quot;()I&amp;quot;&lt;/code&gt;è¡¨ç¤ºæ— å‚è¿”å› intï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fnPtr&lt;/code&gt;: æŒ‡å‘æœ¬åœ°å®ç°å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å†Œè¿‡ç¨‹&lt;/strong&gt;ï¼šé€šå¸¸åœ¨ JNI åº“è¢«åŠ è½½æ—¶æ‰§è¡Œçš„ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°ä¸­å®Œæˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®ç°æµç¨‹ä¸ç¤ºä¾‹"&gt;ğŸ”§ å®ç°æµç¨‹ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨ &lt;code&gt;registerNatives&lt;/code&gt;è¿›è¡ŒåŠ¨æ€æ³¨å†Œçš„å…¸å‹æ­¥éª¤å’Œä»£ç æ¡†æ¶ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Java ä»£ç å±‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ çš„ Java ç±»å£°æ˜ native æ–¹æ³•å¹¶åŠ è½½åº“ï¼Œè¿™ä¸é™æ€æ³¨å†Œæ— å¼‚ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class MyNativeClass {
public native String getNativeString(); // å£°æ˜nativeæ–¹æ³•
static {
System.loadLibrary(&amp;#34;mynativelib&amp;#34;); // åŠ è½½åŒ…å«å®ç°çš„æœ¬åœ°åº“
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. æœ¬åœ°ä»£ç ï¼ˆC/C++ï¼‰å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯åŠ¨æ€æ³¨å†Œçš„æ ¸å¿ƒæ‰€åœ¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;jni.h&amp;gt;
// 1. å®ç°æœ¬åœ°å‡½æ•°ï¼ˆå‡½æ•°åå¯è‡ªç”±å®šä¹‰ï¼‰
jstring getString(JNIEnv* env, jobject thisObj) {
return env-&amp;gt;NewStringUTF(&amp;#34;Hello from dynamic registration!&amp;#34;);
}
// 2. å®šä¹‰æ–¹æ³•æ˜ å°„è¡¨
static JNINativeMethod methodMappings[] = {
{&amp;#34;getNativeString&amp;#34;, &amp;#34;()Ljava/lang/String;&amp;#34;, (void*)&amp;amp;getString} // å»ºç«‹æ˜ å°„
};
// 3. å®ç° JNI_OnLoad å‡½æ•°ï¼ˆåº“åŠ è½½å…¥å£ï¼‰
JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved) {
JNIEnv* env;
if (vm-&amp;gt;GetEnv((void**)&amp;amp;env, JNI_VERSION_1_6) != JNI_OK) {
return JNI_ERR; // è·å–JNIç¯å¢ƒå¤±è´¥
}
// æ‰¾åˆ°è¦æ³¨å†Œçš„Javaç±»
jclass clazz = env-&amp;gt;FindClass(&amp;#34;com/example/MyNativeClass&amp;#34;);
if (clazz == NULL) {
return JNI_ERR;
}
// æ‰§è¡Œæ³¨å†Œï¼å°†æ˜ å°„è¡¨ä¸Javaç±»å…³è”
if (env-&amp;gt;RegisterNatives(clazz, methodMappings,
sizeof(methodMappings) / sizeof(methodMappings[0])) &amp;lt; 0) {
return JNI_ERR; // æ³¨å†Œå¤±è´¥
}
return JNI_VERSION_1_6; // è¿”å›JNIç‰ˆæœ¬å·
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå½“ &lt;code&gt;System.loadLibrary(&amp;quot;mynativelib&amp;quot;)&lt;/code&gt;æ‰§è¡Œæ—¶ï¼Œ&lt;code&gt;JNI_OnLoad&lt;/code&gt;è¢«è°ƒç”¨ï¼Œ&lt;code&gt;getNativeString&lt;/code&gt;æ–¹æ³•ä¾¿æˆåŠŸç»‘å®šåˆ°æœ¬åœ°çš„ &lt;code&gt;getString&lt;/code&gt;å‡½æ•° ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;registerNatives&lt;/code&gt;æœºåˆ¶æ˜¯ JNI ç¼–ç¨‹ä¸­ä¸€é¡¹æå‡æ€§èƒ½ã€çµæ´»æ€§å’Œä»£ç ç»´æŠ¤æ€§çš„é‡è¦æŠ€æœ¯ã€‚å®ƒé€šè¿‡ä¸»åŠ¨æ³¨å†Œå–ä»£è¢«åŠ¨æŸ¥æ‰¾ï¼Œä½¿å¾— Java ä¸æœ¬åœ°ä»£ç çš„åä½œæ›´åŠ é«˜æ•ˆå’Œå¯æ§ã€‚å¯¹äºéœ€è¦é¢‘ç¹è°ƒç”¨æœ¬åœ°æ–¹æ³•æˆ–å¯¹æ€§èƒ½æœ‰è¾ƒé«˜è¦æ±‚çš„é¡¹ç›®ï¼Œ&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ &lt;code&gt;registerNatives&lt;/code&gt;è¿›è¡ŒåŠ¨æ€æ³¨å†Œ&lt;/strong&gt; æ˜¯éå¸¸å€¼å¾—æ¨èçš„åšæ³• ã€‚è€Œå¯¹äºç®€å•çš„ã€ä¸€æ¬¡æ€§è°ƒç”¨çš„åœºæ™¯ï¼Œä¼ ç»Ÿçš„é™æ€æ³¨å†Œæ–¹å¼åˆ™å› å…¶ç®€å•æ€§ä»æ˜¯ä¸€ä¸ªå¯é€‰æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£ &lt;code&gt;registerNatives&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹ JNI æ–¹æ³•ç­¾åç­‰ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="c-static"&gt;C++ static
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œ&lt;code&gt;static&lt;/code&gt;æ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½å…³é”®å­—ï¼Œå®ƒçš„ä½œç”¨æ ¹æ®ä½¿ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒï¼Œä¸»è¦ç›®çš„åœ¨äºæ”¹å˜å˜é‡æˆ–å‡½æ•°çš„&lt;strong&gt;å­˜å‚¨å‘¨æœŸ&lt;/strong&gt;å’Œ&lt;strong&gt;å¯è§æ€§ï¼ˆä½œç”¨åŸŸï¼‰&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç”¨é€”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä½œç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;å…³é”®ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å±€éƒ¨å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å»¶é•¿ç”Ÿå‘½å‘¨æœŸï¼Œä¿æŒå€¼æŒä¹…&lt;/td&gt;
&lt;td&gt;åªåœ¨å‡½æ•°å†…å¯è§ï¼Œä½†ç”Ÿå‘½å‘¨æœŸè´¯ç©¿æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¨å±€å˜é‡/å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™åˆ¶ä½œç”¨åŸŸï¼Œéšè—ç¬¦å·&lt;/td&gt;
&lt;td&gt;å°†å˜é‡æˆ–å‡½æ•°çš„ä½œç”¨åŸŸé™åˆ¶åœ¨&lt;strong&gt;å½“å‰æ–‡ä»¶å†…&lt;/strong&gt;ï¼Œé¿å…ä¸å…¶ä»–æ–‡ä»¶çš„åŒåç¬¦å·å†²çªã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»æˆå‘˜å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°æ‰€æœ‰å¯¹è±¡é—´æ•°æ®å…±äº«&lt;/td&gt;
&lt;td&gt;å±äºç±»æœ¬èº«ï¼Œè€ŒéæŸä¸ªå¯¹è±¡å®ä¾‹ã€‚æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®ï¼Œå¯é€šè¿‡ç±»åç›´æ¥è®¿é—®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»æˆå‘˜å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ä¸ç±»ç›¸å…³è€Œéå¯¹è±¡ç›¸å…³çš„æ“ä½œ&lt;/td&gt;
&lt;td&gt;æ²¡æœ‰ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆï¼Œå› æ­¤&lt;strong&gt;åªèƒ½è®¿é—®&lt;/strong&gt;ç±»çš„é™æ€æˆå‘˜å˜é‡å’Œå‡½æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å±€éƒ¨å˜é‡ä¸­çš„-static"&gt;ğŸ’¡ å±€éƒ¨å˜é‡ä¸­çš„ Static
&lt;/h3&gt;&lt;p&gt;å½“ &lt;code&gt;static&lt;/code&gt;ç”¨äºå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡æ—¶ï¼Œå®ƒæ”¹å˜äº†å˜é‡çš„å­˜å‚¨ä½ç½®ï¼ˆä»æ ˆç§»åˆ°å…¨å±€æ•°æ®åŒºï¼‰å’Œç”Ÿå‘½å‘¨æœŸï¼Œä½†&lt;strong&gt;ä¸æ”¹å˜å…¶ä½œç”¨åŸŸ&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€è¿™ä¸ªå˜é‡ä»ç„¶åªèƒ½åœ¨å®šä¹‰å®ƒçš„å‡½æ•°å†…éƒ¨è¢«è®¿é—®ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void counter() {
static int count = 0; // é™æ€å±€éƒ¨å˜é‡ï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡
count++;
std::cout &amp;lt;&amp;lt; &amp;#34;Count: &amp;#34; &amp;lt;&amp;lt; count &amp;lt;&amp;lt; std::endl;
}
int main() {
counter(); // è¾“å‡º &amp;#34;Count: 1&amp;#34;
counter(); // è¾“å‡º &amp;#34;Count: 2&amp;#34;
counter(); // è¾“å‡º &amp;#34;Count: 3&amp;#34;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ&lt;code&gt;count&lt;/code&gt;åœ¨æ¯æ¬¡è°ƒç”¨ &lt;code&gt;counter()&lt;/code&gt;æ—¶éƒ½èƒ½ä¿æŒä¸Šä¸€æ¬¡çš„å€¼ï¼Œå› ä¸ºå®ƒåªåœ¨ç¨‹åºå¼€å§‹è¿è¡Œæ—¶åˆå§‹åŒ–ä¸€æ¬¡ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ‰è¢«é”€æ¯ã€‚&lt;/p&gt;
&lt;h3 id="-å…¨å±€å˜é‡å’Œå‡½æ•°ä¸­çš„-static"&gt;ğŸ”’ å…¨å±€å˜é‡å’Œå‡½æ•°ä¸­çš„ Static
&lt;/h3&gt;&lt;p&gt;åœ¨å…¨å±€å˜é‡æˆ–å‡½æ•°å‰åŠ ä¸Š &lt;code&gt;static&lt;/code&gt;ï¼Œæ„å‘³ç€å®ƒä»¬æˆä¸ºå½“å‰æ–‡ä»¶çš„â€œç§æœ‰â€æˆå‘˜ã€‚è¿™å¯ä»¥æœ‰æ•ˆé¿å…åœ¨å¤§å‹é¡¹ç›®æˆ–å¤šæ–‡ä»¶ç¼–è¯‘æ—¶äº§ç”Ÿçš„å‘½åå†²çªé—®é¢˜ï¼Œæ˜¯å°è£…æ€§å’Œæ¨¡å—åŒ–è®¾è®¡çš„é‡è¦å·¥å…·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ™®é€šå…¨å±€å˜é‡&lt;/strong&gt;ï¼šé»˜è®¤å…·æœ‰&lt;strong&gt;å¤–éƒ¨é“¾æ¥æ€§&lt;/strong&gt;ï¼Œå…¶ä»–æ–‡ä»¶å¯ä»¥é€šè¿‡ &lt;code&gt;extern&lt;/code&gt;å…³é”®å­—å£°æ˜å¹¶ä½¿ç”¨å®ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æ€å…¨å±€å˜é‡&lt;/strong&gt;ï¼šå…·æœ‰&lt;strong&gt;å†…éƒ¨é“¾æ¥æ€§&lt;/strong&gt;ï¼Œå…¶ä»–æ–‡ä»¶æ— æ³•è®¿é—®ï¼Œå³ä½¿ä½¿ç”¨ &lt;code&gt;extern&lt;/code&gt;ä¹Ÿä¸è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºå‡½æ•°ä¹Ÿæ˜¯åŒç†ï¼Œé™æ€å‡½æ•°åªèƒ½åœ¨å®šä¹‰å®ƒçš„æ–‡ä»¶ä¸­è¢«è°ƒç”¨ã€‚&lt;/p&gt;
&lt;h3 id="-ç±»æˆå‘˜ä¸­çš„-static"&gt;ğŸ‘¥ ç±»æˆå‘˜ä¸­çš„ Static
&lt;/h3&gt;&lt;p&gt;åœ¨ç±»ä¸­ä½¿ç”¨ &lt;code&gt;static&lt;/code&gt;æ˜¯æœ€å…·ç‰¹è‰²çš„ç”¨æ³•ä¹‹ä¸€ï¼Œå®ƒä½¿å¾—æˆå‘˜å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„æŸä¸ªå¯¹è±¡å®ä¾‹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™æ€æˆå‘˜å˜é‡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é™æ€æˆå‘˜å˜é‡åœ¨ç¨‹åºæ•°æ®åŒºå­˜å‚¨ï¼Œæ‰€æœ‰ç±»çš„å¯¹è±¡å…±äº«è¿™ä¸€ä»½æ•°æ®ã€‚å®ƒå¿…é¡»åœ¨&lt;strong&gt;ç±»å†…å£°æ˜ï¼Œåœ¨ç±»å¤–è¿›è¡Œå®šä¹‰å’Œåˆå§‹åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Player {
public:
static int playerCount; // ç±»å†…å£°æ˜
std::string name;
Player(std::string n) : name(n) { playerCount++; }
~Player() { playerCount--; }
};
int Player::playerCount = 0; // ç±»å¤–å®šä¹‰å¹¶åˆå§‹åŒ–
int main() {
Player p1(&amp;#34;Alice&amp;#34;);
Player p2(&amp;#34;Bob&amp;#34;);
std::cout &amp;lt;&amp;lt; Player::playerCount; // è¾“å‡º 2ï¼Œé€šè¿‡ç±»åè®¿é—®
std::cout &amp;lt;&amp;lt; p1.playerCount; // åŒæ ·è¾“å‡º 2ï¼Œé€šè¿‡å¯¹è±¡è®¿é—®
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™æ€æˆå‘˜å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆï¼Œå› æ­¤å®ƒæ— æ³•è®¿é—®ç±»çš„éé™æ€æˆå‘˜ï¼ˆå› ä¸ºéé™æ€æˆå‘˜éœ€è¦é€šè¿‡ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆæ¥è®¿é—®ï¼‰ã€‚å®ƒé€šå¸¸ç”¨äºå¤„ç†é™æ€æˆå‘˜å˜é‡æˆ–æ‰§è¡Œä¸ç±»ç›¸å…³ä½†ä¸ä¾èµ–äºç‰¹å®šå¯¹è±¡çŠ¶æ€çš„æ“ä½œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class MathUtils {
public:
static double pi() { // é™æ€æˆå‘˜å‡½æ•°
return 3.14159;
}
static int add(int a, int b) {
return a + b;
}
};
int main() {
double circleArea = MathUtils::pi() * 10 * 10; // ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨
int sum = MathUtils::add(5, 3);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–é¡ºåº&lt;/strong&gt;ï¼šä¸åŒç¼–è¯‘å•å…ƒï¼ˆå³ä¸åŒçš„ &lt;code&gt;.cpp&lt;/code&gt;æ–‡ä»¶ï¼‰ä¸­çš„é™æ€å¯¹è±¡ï¼ˆåŒ…æ‹¬å…¨å±€é™æ€å˜é‡å’Œç±»çš„é™æ€æˆå‘˜å˜é‡ï¼‰çš„åˆå§‹åŒ–é¡ºåºæ˜¯&lt;strong&gt;ä¸ç¡®å®šçš„&lt;/strong&gt;ã€‚å¦‚æœä¸€ä¸ªé™æ€å¯¹è±¡çš„åˆå§‹åŒ–ä¾èµ–äºå¦ä¸€ä¸ªé™æ€å¯¹è±¡ï¼Œä¸”å®ƒä»¬åˆ†å±ä¸åŒæ–‡ä»¶ï¼Œå¯èƒ½ä¼šå¸¦æ¥é—®é¢˜ã€‚ä¸€ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨â€œå‡½æ•°å†…çš„é™æ€å±€éƒ¨å˜é‡â€ï¼ˆMeyer&amp;rsquo;s Singletonï¼‰æ¥ç¡®ä¿åœ¨ä½¿ç”¨æ—¶è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Singleton {
public:
static Singleton&amp;amp; getInstance() {
static Singleton instance; // ä¿è¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–
return instance;
}
private:
Singleton() {} // æ„é€ å‡½æ•°ç§æœ‰åŒ–
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;ï¼šåœ¨ C++11 åŠä»¥åçš„æ ‡å‡†ä¸­ï¼Œå‡½æ•°å†…é™æ€å±€éƒ¨å˜é‡çš„åˆå§‹åŒ–æ˜¯&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;çš„ã€‚ä½†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è®¿é—®å’Œä¿®æ”¹å…¨å±€é™æ€å˜é‡æˆ–ç±»é™æ€æˆå‘˜å˜é‡æ—¶ï¼Œä½ éœ€è¦è‡ªå·±è´Ÿè´£ä½¿ç”¨äº’æ–¥é”ç­‰æœºåˆ¶æ¥ä¿è¯æ•°æ®åŒæ­¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;static&lt;/code&gt;å…³é”®å­—åœ¨ C++ ä¸­å°±åƒä¸€ä¸ªâ€œå¼€å…³â€ï¼Œä¸»è¦ç”¨æ¥æ§åˆ¶å˜é‡å’Œå‡½æ•°çš„â€œæŒä¹…æ€§â€å’Œâ€œå¯è§èŒƒå›´â€ã€‚åœ¨å±€éƒ¨å˜é‡å‰ä½¿ç”¨ï¼Œè®©å®ƒâ€œè®°ä½â€ä¸Šæ¬¡çš„å€¼ï¼›åœ¨å…¨å±€å˜é‡æˆ–å‡½æ•°å‰ä½¿ç”¨ï¼ŒæŠŠå®ƒâ€œå…³â€åœ¨å½“å‰æ–‡ä»¶é‡Œï¼›åœ¨ç±»æˆå‘˜å‰ä½¿ç”¨ï¼Œåˆ™è®©å®ƒæˆä¸ºæ‰€æœ‰å¯¹è±¡â€œå…±äº«â€çš„èµ„æºå’Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ &lt;code&gt;static&lt;/code&gt;å…³é”®å­—ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç”¨æ³•æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="jniexport-jint-jnicall-jni_onload"&gt;JNIEXPORT jint JNICALL JNI_OnLoad
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved)&lt;/code&gt;æ˜¯ JNI ç¼–ç¨‹ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„å‡½æ•°ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å…¶å…¨è²Œï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å…¶å„ä¸ªéƒ¨åˆ†çš„æ ¸å¿ƒå«ä¹‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»„æˆéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒå«ä¹‰ä¸ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;JNIEXPORT&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªç¼–è¯‘å™¨ç›¸å…³çš„å®ï¼Œç”¨äºæŒ‡ç¤ºè¯¥å‡½æ•°éœ€è¦&lt;strong&gt;å¯¹å¤–å¯¼å‡º&lt;/strong&gt;ï¼Œä»¥ä¾¿ Java è™šæ‹Ÿæœºèƒ½å¤Ÿæ‰¾åˆ°å¹¶è°ƒç”¨å®ƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;jint&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;JNI ä¸­å®šä¹‰çš„æ•´æ•°ç±»å‹ï¼Œç­‰åŒäº C/C++ ä¸­çš„ &lt;code&gt;int&lt;/code&gt;ã€‚ä½œä¸ºè¯¥å‡½æ•°çš„&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;ï¼Œç”¨äºæŒ‡å®šæ‰€éœ€çš„ JNI ç‰ˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;JNICALL&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦ä¸€ä¸ªç¼–è¯‘å™¨ç›¸å…³çš„å®ï¼Œç”¨äºæŒ‡å®šå‡½æ•°çš„&lt;strong&gt;è°ƒç”¨çº¦å®š&lt;/strong&gt;ï¼Œç¡®ä¿åœ¨ä¸åŒç¼–è¯‘ç¯å¢ƒä¸‹å‡½æ•°è°ƒç”¨æ–¹å¼çš„æ­£ç¡®æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;JNI_OnLoad&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°å&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªç”± JNI è§„èŒƒå®šä¹‰çš„&lt;strong&gt;ä¿ç•™åç§°&lt;/strong&gt;ã€‚å½“å…±äº«åº“è¢«åŠ è½½æ—¶ï¼ŒJVM ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶è°ƒç”¨æ­¤å‡½æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;JavaVM\* vm&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°&lt;/strong&gt;ï¼šä¸€ä¸ªæŒ‡å‘ &lt;code&gt;JavaVM&lt;/code&gt;ç»“æ„ä½“çš„æŒ‡é’ˆã€‚è¿™æ˜¯ Java è™šæ‹Ÿæœºåœ¨ JNI å±‚é¢çš„ä»£è¡¨ï¼Œæ˜¯æ•´ä¸ª JNI ç¯å¢ƒçš„å¥æŸ„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;void\* reserved&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°&lt;/strong&gt;ï¼šä¸€ä¸ªä¿ç•™å‚æ•°ï¼Œç›®å‰æœªè¢«ä½¿ç”¨ã€‚åœ¨å®ç°ä¸­åº”å°†å…¶è§†ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œä¸ºæœªæ¥å¯èƒ½çš„æ‰©å±•é¢„ç•™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å‡½æ•°çš„ä½œç”¨ä¸è°ƒç”¨æ—¶æœº"&gt;ğŸ’¡ å‡½æ•°çš„ä½œç”¨ä¸è°ƒç”¨æ—¶æœº
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;JNI_OnLoad&lt;/code&gt;æ˜¯ JNI åº“çš„&lt;strong&gt;åˆå§‹åŒ–å…¥å£ç‚¹&lt;/strong&gt;ã€‚å½“ä½ åœ¨ Java ä»£ç ä¸­è°ƒç”¨ &lt;code&gt;System.loadLibrary(&amp;quot;your-lib&amp;quot;)&lt;/code&gt;æ—¶ï¼ŒJVM åœ¨æˆåŠŸåŠ è½½å¯¹åº”çš„æœ¬åœ°å…±äº«åº“ï¼ˆå¦‚ &lt;code&gt;.so&lt;/code&gt;æ–‡ä»¶ï¼‰åï¼Œä¼š&lt;strong&gt;ç«‹å³è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt;è¯¥åº“ä¸­å®šä¹‰çš„ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•° ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒçš„æ ¸å¿ƒä½œç”¨åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬åå•†&lt;/strong&gt;ï¼šå‘ JVM å‘ŠçŸ¥è¯¥æœ¬åœ°åº“æœŸæœ›ä½¿ç”¨çš„ JNI ç‰ˆæœ¬ï¼ˆå¦‚ &lt;code&gt;JNI_VERSION_1_6&lt;/code&gt;ï¼‰ã€‚å¦‚æœè¿”å›çš„ç‰ˆæœ¬ä¸è¢« VM æ”¯æŒï¼ŒVM ä¼šå¸è½½è¯¥åº“å¹¶è§†ä¸ºåŠ è½½å¤±è´¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œåˆå§‹åŒ–&lt;/strong&gt;ï¼šè¿™æ˜¯è¿›è¡Œ&lt;strong&gt;åŠ¨æ€æ–¹æ³•æ³¨å†Œ&lt;/strong&gt;ï¼ˆä½¿ç”¨ &lt;code&gt;RegisterNatives&lt;/code&gt;ï¼‰çš„ç†æƒ³åœºæ‰€ï¼Œä¼˜äºä¼ ç»Ÿçš„é™æ€æ³¨å†Œæ–¹å¼ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆä¸”çµæ´» ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ JavaVM æŒ‡é’ˆ&lt;/strong&gt;ï¼šå°†ä¼ å…¥çš„ &lt;code&gt;JavaVM*&lt;/code&gt;æŒ‡é’ˆä¿å­˜ä¸ºå…¨å±€å˜é‡ï¼ˆå¦‚ &lt;code&gt;gJavaVM&lt;/code&gt;ï¼‰ï¼Œä»¥ä¾¿åœ¨åç»­ä»»ä½•çº¿ç¨‹ä¸­éƒ½èƒ½é€šè¿‡å®ƒè·å– &lt;code&gt;JNIEnv*&lt;/code&gt;æŒ‡é’ˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ‡å‡†å®ç°æµç¨‹ä¸ç¤ºä¾‹"&gt;ğŸ“ æ ‡å‡†å®ç°æµç¨‹ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹ä¸”å¥å£®çš„ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å®ç°éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·å– JNIEnv&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;JavaVM::GetEnv&lt;/code&gt;æ–¹æ³•è·å–å½“å‰çº¿ç¨‹çš„ &lt;code&gt;JNIEnv&lt;/code&gt;æŒ‡é’ˆã€‚&lt;code&gt;JNIEnv&lt;/code&gt;æ˜¯å¤§å¤šæ•° JNI æ“ä½œçš„å…¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ JavaVM&lt;/strong&gt;ï¼šå°†ä¼ å…¥çš„ &lt;code&gt;vm&lt;/code&gt;ä¿å­˜åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸­ï¼Œä»¥å¤‡åç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ³¨å†Œæœ¬åœ°æ–¹æ³•&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;FindClass&lt;/code&gt;æ‰¾åˆ°ç›®æ ‡ Java ç±»ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;RegisterNatives&lt;/code&gt;å°†æœ¬åœ°å‡½æ•°å®ç°ç»‘å®šåˆ°Javaç±»çš„nativeæ–¹æ³•ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å› JNI ç‰ˆæœ¬&lt;/strong&gt;ï¼šè¿”å›åº“æ‰€éœ€çš„ JNI ç‰ˆæœ¬å·ï¼ˆå¦‚ &lt;code&gt;JNI_VERSION_1_6&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•å®ç° &lt;code&gt;JNI_OnLoad&lt;/code&gt;å¹¶å®ŒæˆåŠ¨æ€æ–¹æ³•æ³¨å†Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;jni.h&amp;gt;
// 1. å£°æ˜æœ¬åœ°æ–¹æ³•å°†è¦å¯¹åº”çš„C/C++å‡½æ•°
jint native_add(JNIEnv* env, jobject thiz, jint a, jint b) {
return a + b;
}
// 2. å®šä¹‰æ–¹æ³•æ˜ å°„è¡¨
static JNINativeMethod gMethods[] = {
{&amp;#34;add&amp;#34;, &amp;#34;(II)I&amp;#34;, (void*)native_add}, // Javaæ–¹æ³•å | æ–¹æ³•ç­¾å | æœ¬åœ°å‡½æ•°æŒ‡é’ˆ
};
// 3. ç¼“å­˜ JavaVM å®ä¾‹çš„å…¨å±€å˜é‡
JavaVM* gJavaVM = nullptr;
// 4. å®ç° JNI_OnLoad
JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved) {
JNIEnv* env = nullptr;
jint result = -1;
// 4.1 è·å– JNIEnv*
if (vm-&amp;gt;GetEnv((void**)&amp;amp;env, JNI_VERSION_1_6) != JNI_OK) {
return JNI_ERR; // è·å–å¤±è´¥ï¼Œè¿”å›é”™è¯¯
}
// 4.2 ç¼“å­˜ JavaVM
gJavaVM = vm;
// 4.3 æ‰¾åˆ°ç›®æ ‡Javaç±»
const char* className = &amp;#34;com/example/MyJniClass&amp;#34;;
jclass clazz = env-&amp;gt;FindClass(className);
if (clazz == nullptr) {
return JNI_ERR; // æ‰¾ä¸åˆ°ç±»ï¼Œè¿”å›é”™è¯¯
}
// 4.4 æ³¨å†Œæœ¬åœ°æ–¹æ³•
if (env-&amp;gt;RegisterNatives(clazz, gMethods, sizeof(gMethods)/sizeof(gMethods[0])) &amp;lt; 0) {
return JNI_ERR; // æ³¨å†Œå¤±è´¥ï¼Œè¿”å›é”™è¯¯
}
// 4.5 è¿”å›æˆåŠŸå¹¶æŒ‡æ˜JNIç‰ˆæœ¬
return JNI_VERSION_1_6;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä»£ç è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;JNINativeMethod&lt;/code&gt;ç»“æ„ä½“&lt;/strong&gt;ï¼šè¿™æ˜¯åŠ¨æ€æ³¨å†Œçš„æ ¸å¿ƒï¼Œå®ƒåƒä¸€ä¸ªâ€œè”ç»œè¡¨â€ï¼Œæ˜ç¡®æŒ‡å‡ºäº† Java ä¸­çš„å“ªä¸ªæ–¹æ³•ï¼ˆ&lt;code&gt;&amp;quot;add&amp;quot;&lt;/code&gt;ï¼‰å¯¹åº”åˆ°æœ¬åœ°çš„å“ªä¸ªå‡½æ•°ï¼ˆ&lt;code&gt;(void*)native_add&lt;/code&gt;ï¼‰ï¼Œå¹¶é€šè¿‡&lt;strong&gt;æ–¹æ³•ç­¾å&lt;/strong&gt; &lt;code&gt;&amp;quot;(II)I&amp;quot;&lt;/code&gt;ï¼ˆè¡¨ç¤ºæ¥å—ä¸¤ä¸ªæ•´å‹å‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ•´å‹ï¼‰æ¥ç¡®ä¿ç±»å‹åŒ¹é… ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ &lt;code&gt;JavaVM&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;code&gt;gJavaVM&lt;/code&gt;æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¿å­˜äº† &lt;code&gt;JavaVM&lt;/code&gt;æŒ‡é’ˆã€‚ä¹‹ååœ¨ä»»ä½•çº¿ç¨‹ä¸­ï¼Œéƒ½å¯ä»¥é€šè¿‡ &lt;code&gt;gJavaVM-&amp;gt;AttachCurrentThread(&amp;amp;env, nullptr)&lt;/code&gt;æ¥è·å–å±äºè¯¥çº¿ç¨‹çš„ &lt;code&gt;JNIEnv*&lt;/code&gt;ï¼Œè¿™å¯¹äºå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„ JNI æ“ä½œè‡³å…³é‡è¦ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿”å›å€¼çš„é‡è¦æ€§&lt;/strong&gt;ï¼šå¿…é¡»è¿”å›ä¸€ä¸ª JNI ç‰ˆæœ¬å·ï¼ˆå¦‚ &lt;code&gt;JNI_VERSION_1_6&lt;/code&gt;ï¼‰ã€‚å¦‚æœè¿”å› &lt;code&gt;JNI_ERR&lt;/code&gt;æˆ–è´Ÿæ•°ï¼Œæˆ–è€…è¿”å›äº†ä¸€ä¸ª VM ä¸æ”¯æŒçš„ç‰ˆæœ¬ï¼ŒVM ä¼šè®¤ä¸ºåº“åˆå§‹åŒ–å¤±è´¥å¹¶å°†å…¶å¸è½½ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;reserved&lt;/code&gt;å‚æ•°&lt;/strong&gt;ï¼šæ­¤å‚æ•°ç›®å‰ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œä¿ç•™ç»™æœªæ¥ä½¿ç”¨ï¼Œåœ¨ä»£ç ä¸­æ— éœ€å¤„ç†å®ƒ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”™è¯¯å¤„ç†&lt;/strong&gt;ï¼šåŠ¡å¿…æ£€æŸ¥ &lt;code&gt;GetEnv&lt;/code&gt;, &lt;code&gt;FindClass&lt;/code&gt;, &lt;code&gt;RegisterNatives&lt;/code&gt;ç­‰å…³é”®è°ƒç”¨çš„è¿”å›å€¼ï¼Œä¸€æ—¦å¤±è´¥åº”ç«‹å³è¿”å› &lt;code&gt;JNI_ERR&lt;/code&gt;ï¼Œé¿å…åç»­æ“ä½œå¯¼è‡´å´©æºƒ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;C++ åç§°æ”¹ç¼–ï¼ˆName Manglingï¼‰&lt;/strong&gt;ï¼šå¦‚æœä½¿ç”¨ C++ ç¼–å†™ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨å‡½æ•°å£°æ˜å¤„ä½¿ç”¨ &lt;code&gt;extern &amp;quot;C&amp;quot;&lt;/code&gt;ï¼Œå‡½æ•°åå¯èƒ½ä¼šè¢«ç¼–è¯‘å™¨æ”¹ç¼–ï¼Œå¯¼è‡´ JVM æ‰¾ä¸åˆ° &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°ã€‚é€šå¸¸éœ€è¦å¦‚ä¸‹å£°æ˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;extern &amp;#34;C&amp;#34; JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved)&lt;/code&gt;æ˜¯ JNI åº“çš„â€œå¯åŠ¨é’¥åŒ™â€ã€‚JVM åœ¨åŠ è½½åº“æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒï¼Œå®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯&lt;strong&gt;å‘Šè¯‰ JVM æ‰€éœ€çš„ç‰ˆæœ¬å·&lt;/strong&gt;å¹¶&lt;strong&gt;å®Œæˆåº“çš„åˆå§‹åŒ–å·¥ä½œ&lt;/strong&gt;ï¼ˆå°¤å…¶æ˜¯åŠ¨æ€æ–¹æ³•æ³¨å†Œï¼‰ã€‚æˆåŠŸå®ç°å¹¶æ­£ç¡®è¿”å›ç‰ˆæœ¬å·æ˜¯ç¡®ä¿ä½ çš„æœ¬åœ°æ–¹æ³•èƒ½è¢« Java ä»£ç æˆåŠŸè°ƒç”¨çš„å…³é”®ç¬¬ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°ã€‚å¦‚æœä½ å¯¹åŠ¨æ€æ³¨å†Œçš„å…·ä½“æ­¥éª¤æˆ–æ–¹æ³•ç­¾åæœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è¿”å›å€¼"&gt;è¿”å›å€¼
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œ&lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°çš„è¿”å›å€¼ç±»å‹ç¡®å®æ˜¯ &lt;strong&gt;&lt;code&gt;jint&lt;/code&gt;&lt;/strong&gt;ã€‚è¿™ä¸ªè¿”å›å€¼çš„ä¸»è¦ä½œç”¨æ˜¯&lt;strong&gt;å‘Šè¯‰ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰è¯¥æœ¬åœ°åº“éœ€è¦ä½¿ç”¨çš„ JNI ç‰ˆæœ¬&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ æ›´æ¸…æ™°åœ°äº†è§£å¸¸è§çš„ JNI ç‰ˆæœ¬å¸¸é‡ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰ˆæœ¬å¸¸é‡&lt;/th&gt;
&lt;th&gt;å¯¹åº”å€¼&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;JNI_VERSION_1_1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0x00010001&lt;/td&gt;
&lt;td&gt;JNI 1.1 ç‰ˆæœ¬ï¼ˆæ—©æœŸç‰ˆæœ¬ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;JNI_VERSION_1_2&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0x00010002&lt;/td&gt;
&lt;td&gt;JNI 1.2 ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;JNI_VERSION_1_4&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0x00010004&lt;/td&gt;
&lt;td&gt;JNI 1.4 ç‰ˆæœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;JNI_VERSION_1_6&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;0x00010006&lt;/td&gt;
&lt;td&gt;JNI 1.6 ç‰ˆæœ¬ï¼ˆç›®å‰å¸¸ç”¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¿”å›å€¼çš„å…³é”®ä½œç”¨"&gt;ğŸ’¡ è¿”å›å€¼çš„å…³é”®ä½œç”¨
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ª &lt;code&gt;jint&lt;/code&gt;ç±»å‹çš„è¿”å›å€¼åœ¨ JNI åº“çš„åŠ è½½è¿‡ç¨‹ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬åå•†&lt;/strong&gt;ï¼šå½“ä½ çš„æœ¬åœ°åº“è¢«åŠ è½½æ—¶ï¼ˆä¾‹å¦‚é€šè¿‡ &lt;code&gt;System.loadLibrary&lt;/code&gt;ï¼‰ï¼ŒJVM ä¼šè°ƒç”¨ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°ã€‚ä½ é€šè¿‡è¿”å›å€¼æŒ‡æ˜ä½ çš„åº“æ˜¯åŸºäºå“ªä¸ª JNI è§„èŒƒç‰ˆæœ¬ç¼–å†™çš„ã€‚JVM ä¼šæ£€æŸ¥è¿™ä¸ªç‰ˆæœ¬å·æ˜¯å¦åœ¨å…¶æ”¯æŒçš„èŒƒå›´ä¹‹å†…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ è½½æˆè´¥&lt;/strong&gt;ï¼šå¦‚æœ JVM è¯†åˆ«å¹¶æ”¯æŒä½ è¿”å›çš„ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚è¿”å› &lt;code&gt;JNI_VERSION_1_6&lt;/code&gt;ï¼‰ï¼Œé‚£ä¹ˆåº“ä¼šæˆåŠŸåŠ è½½ã€‚åä¹‹ï¼Œå¦‚æœ JVM ä¸æ”¯æŒè¯¥ç‰ˆæœ¬ï¼ˆä¾‹å¦‚é”™è¯¯åœ°è¿”å›äº† &lt;code&gt;JNI_VERSION_1_1&lt;/code&gt;ï¼‰ï¼ŒJVM ä¼šè®¤ä¸ºåº“ä¸å…¼å®¹å¹¶å°†å…¶&lt;strong&gt;å¸è½½&lt;/strong&gt;ï¼Œåç»­çš„æœ¬åœ°æ–¹æ³•è°ƒç”¨å°†ä¼šå¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼šå¦‚æœä½ çš„æœ¬åœ°åº“ä¸­æ²¡æœ‰å®šä¹‰ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°ï¼ŒJVM ä¼šé»˜è®¤è¯¥åº“åªè¦æ±‚æœ€åŸºç¡€çš„ &lt;strong&gt;JNI_VERSION_1_1&lt;/strong&gt; è§„èŒƒã€‚ä¸ºäº†ä½¿ç”¨æ›´æ–°çš„ JNI åŠŸèƒ½ï¼Œæ˜¾å¼å®ç° &lt;code&gt;JNI_OnLoad&lt;/code&gt;å¹¶è¿”å›åˆé€‚çš„ç‰ˆæœ¬å·æ˜¯å¿…è¦çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹"&gt;ğŸ“ ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ &lt;code&gt;JNI_OnLoad&lt;/code&gt;å‡½æ•°å®ç°çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved) {
// ... å†…éƒ¨å¯ä»¥æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œä¾‹å¦‚åŠ¨æ€æ³¨å†Œæœ¬åœ°æ–¹æ³• ...
// æœ€åï¼Œè¿”å›æ‰€éœ€çš„JNIç‰ˆæœ¬
return JNI_VERSION_1_6; // æˆ–è€… JNI_VERSION_1_4 ç­‰
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;JNI_OnLoad&lt;/code&gt;çš„è¿”å›å€¼ç¡®å®æ˜¯ä¸€ä¸ª &lt;code&gt;jint&lt;/code&gt;ç±»å‹çš„æ•´æ•°ï¼Œå®ƒä½œä¸ºæœ¬åœ°åº“ä¸ JVM ä¹‹é—´çš„â€œæ¡æ‰‹ä¿¡å·â€ï¼Œç”¨äºç¡®è®¤åŒæ–¹ä½¿ç”¨çš„ JNI æ¥å£ç‰ˆæœ¬æ˜¯å¦å…¼å®¹ã€‚æ­£ç¡®è¿”å›ä¸€ä¸ªå—æ”¯æŒçš„ç‰ˆæœ¬å·æ˜¯ç¡®ä¿ä½ çš„æœ¬åœ°åº“èƒ½è¢«æˆåŠŸåŠ è½½å’Œä½¿ç”¨çš„å…³é”®ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;JNI_OnLoad&lt;/code&gt;çš„è¿”å›å€¼ï¼å¦‚æœä½ å¯¹ JNI çš„å…¶ä»–æ–¹é¢è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="jvm"&gt;JVM
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://uploadfiles.nowcoder.com/images/20250429/59_1745914623180/E08786FBF0AB0E881EDED47C9B0B4B68"
loading="lazy"
alt="img"
&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;åŒºåŸŸ&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;çº¿ç¨‹å…±äº«&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;å¼‚å¸¸&lt;/strong&gt;&lt;/th&gt;
&lt;th style="text-align: left"&gt;&lt;strong&gt;é…ç½®å‚æ•°&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç¨‹åºè®¡æ•°å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç§æœ‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å½“å‰æŒ‡ä»¤åœ°å€&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— &lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;è™šæ‹Ÿæœºæ ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç§æœ‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ–¹æ³•æ ˆå¸§ï¼ˆå±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;StackOverflowError/OOM&lt;/td&gt;
&lt;td style="text-align: left"&gt;-Xssï¼ˆæ ˆå¤§å°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æœ¬åœ°æ–¹æ³•æ ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç§æœ‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;Native æ–¹æ³•æ ˆå¸§&lt;/td&gt;
&lt;td style="text-align: left"&gt;StackOverflowError/OOM&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;å †&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…±äº«&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯¹è±¡å®ä¾‹ã€æ•°ç»„&lt;/td&gt;
&lt;td style="text-align: left"&gt;OOM: Java heap space&lt;/td&gt;
&lt;td style="text-align: left"&gt;-Xms,-Xmx,-XX:NewRatio&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…±äº«&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç±»å…ƒæ•°æ®ã€å¸¸é‡ã€é™æ€å˜é‡&lt;/td&gt;
&lt;td style="text-align: left"&gt;OOM: Metaspace&lt;/td&gt;
&lt;td style="text-align: left"&gt;-XX:MetaspaceSize,-XX:MaxMetaspaceSize&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;strong&gt;ç›´æ¥å†…å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å…±äº«&lt;/td&gt;
&lt;td style="text-align: left"&gt;å †å¤–ç¼“å†²æ•°æ®&lt;/td&gt;
&lt;td style="text-align: left"&gt;OOM: Direct buffer memory&lt;/td&gt;
&lt;td style="text-align: left"&gt;-XX:MaxDirectMemorySize&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="åƒåœ¾å›æ”¶"&gt;åƒåœ¾å›æ”¶
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç®—æ³•&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ ‡è®°-æ¸…é™¤&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ†æ ‡è®°ï¼ˆéå†å¯¹è±¡å›¾ï¼‰å’Œæ¸…é™¤ï¼ˆå›æ”¶æœªæ ‡è®°å¯¹è±¡ï¼‰ä¸¤é˜¶æ®µ&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®ç°ç®€å•&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…å­˜ç¢ç‰‡åŒ–ï¼Œå¯èƒ½è§¦å‘Full GC&lt;/td&gt;
&lt;td style="text-align: left"&gt;è€å¹´ä»£ï¼ˆCMSæ”¶é›†å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ ‡è®°-æ•´ç†&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ ‡è®°åæ•´ç†å­˜æ´»å¯¹è±¡è‡³å†…å­˜ä¸€ç«¯ï¼Œæ¸…ç†è¾¹ç•Œå¤–ç©ºé—´&lt;/td&gt;
&lt;td style="text-align: left"&gt;é¿å…ç¢ç‰‡ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ•´ç†è€—æ—¶ï¼Œå¯èƒ½å¼•å‘STW&lt;/td&gt;
&lt;td style="text-align: left"&gt;è€å¹´ä»£ï¼ˆSerial Oldï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;å¤åˆ¶ç®—æ³•&lt;/td&gt;
&lt;td style="text-align: left"&gt;å°†å †åˆ†ä¸ºä¸¤å—ï¼Œå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—åæ¸…ç©ºåŸåŒºåŸŸ&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— ç¢ç‰‡ï¼Œæ•ˆç‡é«˜&lt;/td&gt;
&lt;td style="text-align: left"&gt;å†…å­˜åˆ©ç”¨ç‡ä½ï¼ˆä»…ç”¨50%ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¹´è½»ä»£ï¼ˆSerial/Parallelï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;åˆ†ä»£æ”¶é›†&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŒ‰å¯¹è±¡ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†æ–°ç”Ÿä»£ï¼ˆå¤åˆ¶ç®—æ³•ï¼‰å’Œè€å¹´ä»£ï¼ˆæ ‡è®°-æ¸…é™¤/æ•´ç†ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é’ˆå¯¹æ€§ä¼˜åŒ–æ•ˆç‡&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€åè°ƒå¤šä»£ç­–ç•¥&lt;/td&gt;
&lt;td style="text-align: left"&gt;é€šç”¨æ–¹æ¡ˆï¼ˆG1/Parallel GCï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="åƒåœ¾æ”¶é›†å™¨"&gt;åƒåœ¾æ”¶é›†å™¨
&lt;/h2&gt;&lt;p&gt;åŸºäºåŸç†å’Œç°ä»£åŒ–ç¨‹åº¦å¯¹ JVM åƒåœ¾æ”¶é›†å™¨è¿›è¡Œåˆ†ç±»ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å®ƒä»¬çš„è®¾è®¡å“²å­¦å’Œæ¼”è¿›è·¯çº¿ã€‚ä¸‹é¢æˆ‘å°†ä»è¿™ä¸¤ä¸ªç»´åº¦è¿›è¡Œæ¢³ç†å’Œæ€»ç»“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨ç›´è§‚åœ°å±•ç¤ºäº†ä¸»æµåƒåœ¾æ”¶é›†å™¨åœ¨è¿™äº›æ ¸å¿ƒç»´åº¦ä¸Šçš„å®šä½ä¸å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;JDK 1.0 -1.2 ä½¿ç”¨ç®€å•çš„&lt;strong&gt;æ ‡è®°-æ¸…é™¤ç®—æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†ç±»&lt;/th&gt;
&lt;th&gt;æ”¶é›†å™¨åç§°&lt;/th&gt;
&lt;th&gt;å·¥ä½œåŸç† / ç®—æ³•&lt;/th&gt;
&lt;th&gt;çº¿ç¨‹/å·¥ä½œæ¨¡å¼&lt;/th&gt;
&lt;th&gt;ç›®æ ‡ä¼˜åŒ–&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼ ç»Ÿåˆ†ä»£æ”¶é›†å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Serial&lt;/td&gt;
&lt;td&gt;å¹´è½»ä»£ï¼š&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ï¼›è€å¹´ä»£ï¼š&lt;strong&gt;æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;STW&lt;/strong&gt;ã€&lt;strong&gt;å•çº¿ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•é«˜æ•ˆï¼Œæ— çº¿ç¨‹äº¤äº’å¼€é”€&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯æ¨¡å¼ã€èµ„æºå—é™ç¯å¢ƒã€åµŒå…¥å¼ç³»ç»Ÿï¼ˆ&lt;strong&gt;JDK1.3&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;Parallel Scavenge / Parallel Old&lt;/td&gt;
&lt;td&gt;å¹´è½»ä»£ï¼š&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ï¼›è€å¹´ä»£ï¼š&lt;strong&gt;æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;STW&lt;/strong&gt;ã€&lt;strong&gt;å¤šçº¿ç¨‹å¹¶è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå°è®¡ç®—ã€æ‰¹å¤„ç†ä»»åŠ¡ï¼ˆ&lt;strong&gt;JDK 8é»˜è®¤&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ParNew&lt;/td&gt;
&lt;td&gt;å¹´è½»ä»£ï¼š&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;STW&lt;/strong&gt;ã€&lt;strong&gt;å¤šçº¿ç¨‹å¹¶è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸ºCMSçš„å¹´è½»ä»£æ­æ¡£ï¼Œç¼©çŸ­å¹´è½»ä»£åœé¡¿&lt;/td&gt;
&lt;td&gt;ä¸CMSé…åˆçš„Webåº”ç”¨ï¼ˆ&lt;strong&gt;å·²åºŸå¼ƒ&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;CMS&lt;/td&gt;
&lt;td&gt;è€å¹´ä»£ï¼š&lt;strong&gt;å¹¶å‘æ ‡è®°-æ¸…é™¤ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;ï¼ˆæ ‡è®°ã€æ¸…é™¤ï¼‰ä¸&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;ï¼ˆåˆå§‹æ ‡è®°ã€é‡æ–°æ ‡è®°ï¼‰ç»“åˆ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½å»¶è¿Ÿ&lt;/strong&gt;ï¼Œå‡å°‘STWæ—¶é—´&lt;/td&gt;
&lt;td&gt;å¯¹å“åº”é€Ÿåº¦æ•æ„Ÿçš„æœåŠ¡ï¼ˆå¦‚WebæœåŠ¡ï¼‰ï¼Œ&lt;strong&gt;JDK 5 å¼•å…¥ï¼ŒJDK9è¢«æ ‡è®°åºŸå¼ƒï¼ŒJDK14æ­£å¼ç§»é™¤ï¼Œå·²è¢«G1ç­‰å–ä»£&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç°ä»£åŒºåŸŸåŒ–æ”¶é›†å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;G1 (Garbage-First)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡è®°-æ•´ç†&lt;/strong&gt;ä¸ºä¸»ï¼ˆæ•´ä½“ï¼‰ï¼Œ&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ä¸ºè¾…ï¼ˆå±€éƒ¨Regionï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt; + &lt;strong&gt;å¹¶å‘&lt;/strong&gt; + &lt;strong&gt;STW&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹³è¡¡ååé‡ä¸å»¶è¿Ÿ&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¯é¢„æµ‹çš„åœé¡¿æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§å†…å­˜ï¼ˆ&amp;gt;4GBï¼‰æœåŠ¡ç«¯åº”ç”¨ï¼Œ&lt;strong&gt;JDK 9åŠä»¥åé»˜è®¤æ”¶é›†å™¨&lt;/strong&gt;ï¼ˆ&lt;strong&gt;ä¸»æµ&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é©å‘½æ€§ä½å»¶è¿Ÿæ”¶é›†å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ZGC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº&lt;strong&gt;Region&lt;/strong&gt;çš„&lt;strong&gt;å¹¶å‘æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt;ï¼ˆä½¿ç”¨&lt;strong&gt;æŸ“è‰²æŒ‡é’ˆ&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡ ä¹å…¨å¹¶å‘&lt;/strong&gt;ï¼ŒSTWæ—¶é—´æçŸ­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¶…ä½åœé¡¿&lt;/strong&gt;ï¼ˆ&amp;lt;10msï¼‰ï¼Œåœé¡¿æ—¶é—´ä¸éšå †å¤§å°å¢é•¿&lt;/td&gt;
&lt;td&gt;å¤§å †ï¼ˆTBçº§ï¼‰ã€å¯¹å»¶è¿Ÿæå…¶æ•æ„Ÿçš„åº”ç”¨ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰ï¼ˆ&lt;strong&gt;JDK11å¼•å…¥&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Shenandoah&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº&lt;strong&gt;Region&lt;/strong&gt;çš„&lt;strong&gt;å¹¶å‘æ ‡è®°-å¤åˆ¶/æ•´ç†ç®—æ³•&lt;/strong&gt;ï¼ˆä½¿ç”¨&lt;strong&gt;è½¬å‘æŒ‡é’ˆ&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡ ä¹å…¨å¹¶å‘&lt;/strong&gt;ï¼ŒSTWæ—¶é—´æçŸ­&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¶…ä½åœé¡¿&lt;/strong&gt;ï¼ˆ&amp;lt;10msï¼‰ï¼Œåœé¡¿æ—¶é—´ä¸éšå †å¤§å°å¢é•¿&lt;/td&gt;
&lt;td&gt;ä¸ZGCç±»ä¼¼ï¼Œé€‚ç”¨äºä½å»¶è¿Ÿå¤§å†…å­˜åœºæ™¯ï¼ˆ&lt;strong&gt;JDK12å¼•å…¥&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åƒåœ¾æ”¶é›†å™¨"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©åƒåœ¾æ”¶é›†å™¨
&lt;/h3&gt;&lt;p&gt;äº†è§£åˆ†ç±»åï¼Œå…³é”®åœ¨äºå¦‚ä½•æ ¹æ®ä½ çš„åº”ç”¨éœ€æ±‚åšå‡ºé€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„é€‰å‹å»ºè®®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æœ€å¤§ååé‡&lt;/strong&gt;ï¼šå¦‚æœæ‚¨çš„åº”ç”¨æ˜¯åå°è¿ç®—å‹ä»»åŠ¡ï¼Œä¸å…³å¿ƒå•æ¬¡åœé¡¿é•¿çŸ­ï¼Œåªå¸Œæœ›åœ¨ä¸€å®šæ—¶é—´å†…æ€»è¿ç®—æ—¶é—´æœ€é•¿ï¼Œ&lt;strong&gt;Parallel GC&lt;/strong&gt; å¯èƒ½ä»ç„¶æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ±‚å¹³è¡¡ä¸å¯é¢„æµ‹æ€§&lt;/strong&gt;ï¼šå¯¹äºå¤§å¤šæ•°é€šç”¨æœåŠ¡ç«¯åº”ç”¨ï¼Œ&lt;strong&gt;G1&lt;/strong&gt; æ˜¯é»˜è®¤ä¸”ç¨³å¦¥çš„é€‰æ‹©ã€‚å®ƒåœ¨ååé‡å’Œå»¶è¿Ÿä¹‹é—´å–å¾—äº†å¾ˆå¥½çš„å¹³è¡¡ï¼Œå¹¶ä¸”å…è®¸ä½ è®¾ç½®æœ€å¤§åœé¡¿æ—¶é—´ç›®æ ‡ï¼ˆ&lt;code&gt;-XX:MaxGCPauseMillis&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¦æ±‚æä½å»¶è¿Ÿ&lt;/strong&gt;ï¼šå¦‚æœæ‚¨çš„åº”ç”¨å¯¹å»¶è¿Ÿæå…¶æ•æ„Ÿï¼Œå¦‚å®æ—¶äº¤æ˜“ç³»ç»Ÿã€å¤§æ•°æ®æµå¤„ç†ï¼Œå¹¶ä¸”å †å†…å­˜å¾ˆå¤§ï¼Œé‚£ä¹ˆ &lt;strong&gt;ZGC&lt;/strong&gt; æˆ– &lt;strong&gt;Shenandoah&lt;/strong&gt; æ˜¯ç†æƒ³é€‰æ‹©ã€‚å®ƒä»¬èƒ½æä¾›å‡ ä¹æ— æ„ŸçŸ¥çš„åƒåœ¾æ”¶é›†ä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæåº¦å—é™&lt;/strong&gt;ï¼šåœ¨å¾®æœåŠ¡æˆ–åµŒå…¥å¼ç­‰å•æ ¸æˆ–å°å†…å­˜ç¯å¢ƒä¸­ï¼Œ&lt;strong&gt;Serial GC&lt;/strong&gt; å› å…¶æä½çš„å¼€é”€åè€Œå¯èƒ½è¡¨ç°æœ€ä½³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æ¼”è¿›è¶‹åŠ¿"&gt;ğŸ’ æ€»ç»“ä¸æ¼”è¿›è¶‹åŠ¿
&lt;/h3&gt;&lt;p&gt;ä»å‘å±•è„‰ç»œæ¥çœ‹ï¼ŒJVMåƒåœ¾æ”¶é›†å™¨çš„æ¼”è¿›æ¸…æ™°åœ°ä½“ç°äº†ä» &lt;strong&gt;â€œç®€å•ç²—æš´â€&lt;/strong&gt; åˆ° &lt;strong&gt;â€œç²¾ç»†å¹¶å‘â€&lt;/strong&gt; ï¼Œä» &lt;strong&gt;â€œå…³æ³¨ååâ€&lt;/strong&gt; åˆ° &lt;strong&gt;â€œå¹³è¡¡å»¶è¿Ÿâ€&lt;/strong&gt; çš„å†ç¨‹ã€‚å…¶æ ¸å¿ƒé©±åŠ¨åŠ›æ˜¯ä¸æ–­çªç ´åœé¡¿æ—¶é—´ä¸å †å†…å­˜å¤§å°çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒè¶‹åŠ¿&lt;/strong&gt;ï¼š&lt;strong&gt;å¹¶å‘åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;åŒºåŸŸåŒ–&lt;/strong&gt;æ˜¯ç°ä»£é«˜æ€§èƒ½åƒåœ¾æ”¶é›†å™¨çš„ä¸¤å¤§æ ‡å¿—æ€§æŠ€æœ¯ã€‚ZGCå’ŒShenandoahé€šè¿‡é©å‘½æ€§çš„æŒ‡é’ˆæŠ€æœ¯ï¼Œå°†å¹¶å‘èƒ½åŠ›æ¨å‘æè‡´ï¼ŒåŸºæœ¬å®ç°äº†åœé¡¿æ—¶é—´ä¸å †å¤§å°æ— å…³çš„ç›®æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤é€‰æ‹©&lt;/strong&gt;ï¼šå¯¹äºå¤§å¤šæ•°ä»JDK 8å‡çº§åˆ°ç°ä»£ç‰ˆæœ¬ï¼ˆJDK 9+ï¼‰çš„åº”ç”¨ï¼Œåˆ‡æ¢åˆ° &lt;strong&gt;G1&lt;/strong&gt; æ”¶é›†å™¨é€šå¸¸æ˜¯ä¸€ä¸ªæ— éœ€å¤æ‚è°ƒä¼˜å°±èƒ½è·å¾—æ”¶ç›Šçš„èµ·ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªæ¥æ–¹å‘&lt;/strong&gt;ï¼š&lt;strong&gt;ä½å»¶è¿Ÿ&lt;/strong&gt; ä»æ˜¯æ ¸å¿ƒæ–¹å‘ã€‚ZGCå’ŒShenandoahä»åœ¨å¿«é€Ÿå‘å±•ï¼Œä¾‹å¦‚ZGCæ­£åœ¨ç§¯æå¼€å‘&lt;strong&gt;åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰&lt;/strong&gt;ï¼Œé€šè¿‡å¼•å…¥åˆ†ä»£æ€æƒ³æ¥è¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½ä»åŸç†åˆ°ç°ä»£æ€§çš„åˆ†ç±»æ€»ç»“èƒ½å¸®åŠ©ä½ æ„å»ºèµ·æ¸…æ™°çš„çŸ¥è¯†æ¡†æ¶ã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨æ›´å…·ä½“çš„è°ƒä¼˜å‚æ•°ã€‚&lt;/p&gt;
&lt;h2 id="å‘å±•å†ç¨‹"&gt;å‘å±•å†ç¨‹
&lt;/h2&gt;&lt;p&gt;ä» JDK 1.0 åˆ° JDK 21ï¼ŒJava åƒåœ¾æ”¶é›†å™¨ (GC) çš„æ¼”è¿›æ˜¯ä¸€éƒ¨è¿½æ±‚æ›´é«˜æ€§èƒ½ã€æ›´ä½å»¶è¿Ÿå’Œæ›´å¤§è§„æ¨¡å†…å­˜ç®¡ç†çš„åˆ›æ–°å²ã€‚å…¶æ ¸å¿ƒçªç ´åœ¨äº&lt;strong&gt;ä¸æ–­çªç ´åœé¡¿æ—¶é—´ä¸å †å†…å­˜å¤§å°ä¹‹é—´çš„å›ºæœ‰çŸ›ç›¾&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ¸…æ™°åœ°å‹¾å‹’å‡ºè¿™ä¸€æŠ€æœ¯æ¼”è¿›çš„å…³é”®é‡Œç¨‹ç¢‘ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JDK ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒé‡Œç¨‹ç¢‘ / å¼•å…¥çš„æ”¶é›†å™¨&lt;/th&gt;
&lt;th&gt;æŠ€æœ¯çªç ´çš„å…³é”®ç‚¹&lt;/th&gt;
&lt;th&gt;è®¾è®¡ç›®æ ‡ä¸æ„ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 1.3&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Serial GC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸€æ¬¾çœŸæ­£çš„åƒåœ¾å›æ”¶å™¨ï¼Œé‡‡ç”¨&lt;strong&gt;å•çº¿ç¨‹ STW (Stop-The-World)&lt;/strong&gt; æœºåˆ¶ ã€‚&lt;/td&gt;
&lt;td&gt;å®ç°äº†è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œä¸ºåç»­å‘å±•å¥ å®šåŸºç¡€ï¼Œé€‚ç”¨äºå®¢æˆ·ç«¯æˆ–èµ„æºå—é™ç¯å¢ƒ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 1.4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Parallel GC&lt;/strong&gt; (å¹¶è¡Œæ”¶é›†å™¨) å’Œ &lt;strong&gt;CMS&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Parallel GC&lt;/strong&gt;: å¤šçº¿ç¨‹å¹¶è¡Œæ¸…ç†ï¼Œæå‡ååé‡ ã€‚&lt;strong&gt;CMS&lt;/strong&gt;: é¦–æ¬¡å¼•å…¥&lt;strong&gt;å¹¶å‘æ ‡è®°&lt;/strong&gt;ç†å¿µï¼Œæ—¨åœ¨å‡å°‘ STW æ—¶é—´ ã€‚&lt;/td&gt;
&lt;td&gt;é€‚åº”å¤šæ ¸å¤„ç†å™¨è¶‹åŠ¿ï¼Œæ»¡è¶³æœåŠ¡ç«¯é«˜ååæˆ–å¯¹å»¶è¿Ÿæ•æ„Ÿåº”ç”¨çš„æ—©æœŸéœ€æ±‚ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 5 - JDK 6&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Parallel Scavenge + Parallel Old&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½¢æˆå®Œæ•´çš„å¹¶è¡Œæ”¶é›†ç»„åˆï¼Œå¹¶åœ¨ &lt;strong&gt;JDK 6 æˆä¸ºé»˜è®¤ GC&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;td&gt;æ­£å¼ç¡®ç«‹&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;ä¸ºé»˜è®¤ä¼˜åŒ–ç›®æ ‡ï¼Œé€‚åˆåå°è®¡ç®—ä»»åŠ¡ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 7&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;G1 (Garbage-First)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼•å…¥&lt;strong&gt;åˆ†åŒºæ¨¡å‹ (Region)&lt;/strong&gt;ï¼Œå°†å †åˆ’åˆ†ä¸ºå¤šä¸ªå°å—ï¼Œå¹¶åŸºäº &lt;strong&gt;SATB (Snapshot-At-The-Beginning)&lt;/strong&gt; ç­‰ç®—æ³•è¿›è¡Œå¹¶å‘æ ‡è®°ï¼Œå…¼é¡¾ååé‡ä¸&lt;strong&gt;å¯é¢„æµ‹çš„åœé¡¿&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;td&gt;å–ä»£ CMS çš„åºå¹•æ‹‰å¼€ï¼Œæ—¨åœ¨ä¸ºå¤§å †å†…å­˜åº”ç”¨æä¾›æ›´å¹³è¡¡çš„è§£å†³æ–¹æ¡ˆ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 9&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;G1 æˆä¸ºé»˜è®¤æ”¶é›†å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ‡å¿—æ€§äº‹ä»¶ï¼Œ&lt;strong&gt;é»˜è®¤ GC ä»ååé‡ä¼˜å…ˆ (Parallel) æ­£å¼è½¬å‘ä½å»¶è¿Ÿä¼˜å…ˆ (G1)&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;td&gt;å“åº”ç°ä»£åº”ç”¨å¯¹å“åº”é€Ÿåº¦çš„æ™®éè¦æ±‚ï¼Œæ˜¯ GC å‘å±•å²ä¸Šçš„é‡è¦è½¬æŠ˜ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 11&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ZGC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é‡‡ç”¨&lt;strong&gt;æŸ“è‰²æŒ‡é’ˆ&lt;/strong&gt; ç­‰é©å‘½æ€§æŠ€æœ¯ï¼Œå®ç°å‡ ä¹å…¨è¿‡ç¨‹çš„å¹¶å‘ï¼Œç›®æ ‡å°†åœé¡¿æ—¶é—´æ§åˆ¶åœ¨ &lt;strong&gt;10 æ¯«ç§’&lt;/strong&gt; ä»¥å†…ï¼Œä¸”ä¸éšå †å¤§å°å¢é•¿ ã€‚&lt;/td&gt;
&lt;td&gt;ä¸º TB çº§å¤§å †å’Œè¶…ä½å»¶è¿Ÿåœºæ™¯ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰è€Œè®¾è®¡ï¼Œä»£è¡¨äº†ä½å»¶è¿ŸæŠ€æœ¯çš„é‡å¤§é£è·ƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 12&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Shenandoah&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é‡‡ç”¨ &lt;strong&gt;è½¬å‘æŒ‡é’ˆ&lt;/strong&gt; æŠ€æœ¯ï¼Œä¸ ZGC ç±»ä¼¼ï¼Œè‡´åŠ›äºå®ç°æä½åœé¡¿ï¼Œå…¶å¼€å‘ä¸»è¦ç”± RedHat ç¤¾åŒºæ¨åŠ¨ ã€‚&lt;/td&gt;
&lt;td&gt;æä¾›äº†å¦ä¸€ä¸ªä½å»¶è¿Ÿé€‰æ‹©ï¼Œä½“ç°äº†æŠ€æœ¯è·¯çº¿çš„å¤šæ ·æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JDK 17 åŠä»¥å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ZGC &amp;amp; Shenandoah ç”Ÿäº§å°±ç»ª&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒç»­ä¼˜åŒ–ï¼Œä¾‹å¦‚ ZGC æ”¯æŒæ›´å¤§çš„å †å†…å­˜ ã€‚åœ¨ &lt;strong&gt;JDK 21&lt;/strong&gt; ä¸­ï¼ŒZGC è¿˜å¼•å…¥äº†&lt;strong&gt;åˆ†ä»£ ZGC&lt;/strong&gt; çš„å®éªŒæ€§åŠŸèƒ½ï¼Œé€šè¿‡åˆ†ä»£å‡è®¾è¿›ä¸€æ­¥æå‡æ€§èƒ½ ã€‚&lt;/td&gt;
&lt;td&gt;æ ‡å¿—ç€è¿™äº›æ–°ä¸€ä»£æ”¶é›†å™¨è¿›å…¥æˆç†Ÿç¨³å®šæœŸï¼Œæˆä¸ºè‹›åˆ»åœºæ™¯ä¸‹çš„å¯é é€‰æ‹©ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ¼”è¿›çš„æ ¸å¿ƒè¶‹åŠ¿"&gt;ğŸ’¡ æ¼”è¿›çš„æ ¸å¿ƒè¶‹åŠ¿
&lt;/h3&gt;&lt;p&gt;çºµè§‚è¿™äº›é‡Œç¨‹ç¢‘ï¼Œå¯ä»¥æ€»ç»“å‡ºå‡ æ¡æ¸…æ™°çš„æ¼”è¿›ä¸»çº¿ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¹¶è¡ŒåŒ– â†’ å¹¶å‘åŒ–&lt;/strong&gt;ï¼šä» Serial GC çš„å•çº¿ç¨‹ï¼Œåˆ° Parallel GC çš„å¤šçº¿ç¨‹å¹¶è¡Œï¼ˆä½†ä»æœ‰è¾ƒé•¿çš„ STW åœé¡¿ï¼‰ï¼Œå†åˆ° CMSã€G1 çš„éƒ¨åˆ†å¹¶å‘ï¼Œæœ€ç»ˆåˆ° ZGC/Shenandoah çš„&lt;strong&gt;è¿‘ä¹å…¨å¹¶å‘&lt;/strong&gt;ã€‚è¿™æ˜¯å‡å°‘åº”ç”¨åœé¡¿æ—¶é—´çš„å…³é”®è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•ä¸æ•°æ®ç»“æ„çš„é©æ–°&lt;/strong&gt;ï¼šæ”¯æ’‘å¹¶å‘èƒ½åŠ›çš„æ˜¯åº•å±‚ç®—æ³•çš„ä¸æ–­çªç ´ï¼Œå¦‚ CMS çš„å¹¶å‘æ ‡è®°æ¸…é™¤ã€G1 çš„ SATB å’Œä¸‰è‰²æ ‡è®°æ³•ï¼Œä»¥åŠ ZGC çš„&lt;strong&gt;æŸ“è‰²æŒ‡é’ˆ&lt;/strong&gt;å’Œ Shenandoah çš„&lt;strong&gt;è½¬å‘æŒ‡é’ˆ&lt;/strong&gt;ï¼Œè¿™äº›æŠ€æœ¯è§£å†³äº†åœ¨å¹¶å‘è¿‡ç¨‹ä¸­å‡†ç¡®æ ‡è®°å’Œç§»åŠ¨å¯¹è±¡çš„ä¸–ç•Œæ€§éš¾é¢˜ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å †ç®¡ç†æ¨¡å‹çš„æ¼”å˜&lt;/strong&gt;ï¼šä»ç®€å•çš„è¿ç»­åˆ†ä»£æ¨¡å‹ï¼ˆæ–°ç”Ÿä»£/è€å¹´ä»£ï¼‰ï¼Œå‘å±•åˆ° G1 çš„&lt;strong&gt;åˆ†åŒºæ¨¡å‹&lt;/strong&gt;ï¼Œå†åˆ° ZGC/Shenandoah çš„&lt;strong&gt;åŠ¨æ€åˆ†åŒºæˆ–ä¸åˆ†ä»£æ¨¡å‹&lt;/strong&gt;ã€‚è¿™ä½¿å¾— GC å¯ä»¥æ›´çµæ´»ã€é«˜æ•ˆåœ°ç®¡ç†è¶…å¤§å †å†…å­˜ï¼Œå‡å°‘ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡çš„å˜è¿&lt;/strong&gt;ï¼šé»˜è®¤æ”¶é›†å™¨çš„å˜è¿ï¼ˆParallel â†’ G1ï¼‰æ¸…æ™°åœ°åæ˜ äº†ç¤¾åŒºéœ€æ±‚çš„è½¬å˜ï¼šä»æè‡´è¿½æ±‚&lt;strong&gt;ååé‡&lt;/strong&gt;ï¼Œè½¬å‘åœ¨ä¿è¯ä¸€å®šååé‡çš„å‰æä¸‹ï¼Œä¼˜å…ˆæ»¡è¶³&lt;strong&gt;ä½å»¶è¿Ÿå’Œå¯é¢„æµ‹çš„åœé¡¿&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ¢³ç†èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ JVM åƒåœ¾æ”¶é›†å™¨çš„æŠ€æœ¯æ¼”è¿›è„‰ç»œã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šçš„æ”¶é›†å™¨æˆ–å…¶æŠ€æœ¯ç»†èŠ‚æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="zgc--shenandoah"&gt;ZGC &amp;amp; Shenandoah
&lt;/h2&gt;&lt;p&gt;å…³äº ZGC å’Œ Shenandoah çš„æµè¡Œç¨‹åº¦ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒä»¬ç›®å‰ä»å±äº&lt;strong&gt;å°ä¼—ä½†å‰æ™¯å¹¿é˜”çš„æŠ€æœ¯å…ˆé”‹&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¯¹ä¸»æµåƒåœ¾å›æ”¶å™¨çš„ä½¿ç”¨æƒ…å†µæœ‰ä¸ªç›´è§‚çš„äº†è§£ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åƒåœ¾å›æ”¶å™¨&lt;/th&gt;
&lt;th&gt;2021å¹´å¸‚åœºä½¿ç”¨ç‡ (æ•°æ®æ¥æº)&lt;/th&gt;
&lt;th&gt;æŠ€æœ¯å®šä½&lt;/th&gt;
&lt;th&gt;æµè¡Œåº¦è¯„ä»·&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Parallel / Parallel Old&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;57.77%&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ååé‡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»å¯¹ä¸»æµ&lt;/strong&gt;ï¼Œå°¤å…¶é€‚ç”¨äºåå°è®¡ç®—ä»»åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;G1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;24.99%&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³è¡¡ååé‡ä¸å»¶è¿Ÿ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸»æµé€‰æ‹©&lt;/strong&gt;ï¼ŒJDK 9åŠä»¥åçš„é»˜è®¤å›æ”¶å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CMS&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;17.20%&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½å»¶è¿Ÿ (å·²åºŸå¼ƒ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€æ¸æ·˜æ±°&lt;/strong&gt;ï¼Œä½†åœ¨æ—§ç³»ç»Ÿä¸­ä»æœ‰ä¸€å®šå­˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ZGC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;0.04%&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¶…ä½å»¶è¿Ÿ (&amp;lt;1ms)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‰æ²¿æŠ€æœ¯&lt;/strong&gt;ï¼Œåœ¨ç‰¹å®šåœºæ™¯å¢é•¿è¿…é€Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Shenandoah&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt; 0.01%&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¶…ä½å»¶è¿Ÿ (&amp;lt;1ms)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å°ä¼—é€‰æ‹©&lt;/strong&gt;ï¼Œç¤¾åŒºé©±åŠ¨ï¼Œä¸ZGCç›®æ ‡ç±»ä¼¼&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•æ›²é«˜å’Œå¯¡"&gt;ğŸ” ä¸ºä½•â€œæ›²é«˜å’Œå¯¡â€ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;å°½ç®¡ ZGC å’Œ Shenandoah åœ¨æŠ€æœ¯ä¸Šéå¸¸å…ˆè¿›ï¼Œä½†å…¶è¾ƒä½çš„å¸‚åœºå æœ‰ç‡ä¸»è¦å—ä»¥ä¸‹å‡ ä¸ªå› ç´ å½±å“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†å²ç‰ˆæœ¬ä¸ç”Ÿæ€æƒ¯æ€§&lt;/strong&gt;ï¼šç›´åˆ°2021å¹´ï¼Œ&lt;strong&gt;Java 8&lt;/strong&gt; åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„å æœ‰ç‡ä»è¶…è¿‡80%ã€‚è€Œ ZGC å’Œ Shenandoah åˆ†åˆ«æ˜¯åœ¨ &lt;strong&gt;JDK 11&lt;/strong&gt; å’Œ &lt;strong&gt;JDK 12&lt;/strong&gt; ä¸­æ‰æ­£å¼å¼•å…¥çš„ã€‚å°†åºå¤§çš„ç°æœ‰ç³»ç»Ÿå‡çº§JDKç‰ˆæœ¬éœ€è¦æˆæœ¬å’Œå‹‡æ°”ï¼Œè¿™å¯¼è‡´äº†æ–°æŠ€æœ¯æ™®åŠçš„æ»åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯çš„é’ˆå¯¹æ€§&lt;/strong&gt;ï¼šè¿™ä¸¤æ¬¾å›æ”¶å™¨çš„æ ¸å¿ƒç›®æ ‡æ˜¯&lt;strong&gt;äºšæ¯«ç§’çº§çš„è¶…ä½åœé¡¿æ—¶é—´&lt;/strong&gt;ï¼Œè¿™å¯¹äºç»å¤§å¤šæ•°å¯¹å»¶è¿Ÿä¸æ•æ„Ÿçš„åº”ç”¨ï¼ˆå¦‚æ•°æ®å¤„ç†ã€å†…éƒ¨ç®¡ç†ç³»ç»Ÿï¼‰æ¥è¯´æ˜¯â€œæ€é¸¡ç”¨ç‰›åˆ€â€ã€‚ä¼ ç»Ÿçš„ Parallel æˆ– G1 åœ¨ååé‡ä¸Šå¯èƒ½è¡¨ç°æ›´å¥½ï¼Œä¸”æ›´æ˜“äºè°ƒä¼˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯å¤æ‚æ€§ä¸è®¤çŸ¥åº¦&lt;/strong&gt;ï¼šå®ƒä»¬é‡‡ç”¨äº†æŸ“è‰²æŒ‡é’ˆã€è¯»å±éšœç­‰å¤æ‚æŠ€æœ¯ï¼Œç†è§£å’Œè°ƒä¼˜çš„é—¨æ§›ç›¸å¯¹è¾ƒé«˜ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒG1ç­‰æ›´æˆç†Ÿçš„å›æ”¶å™¨æœ‰æ›´ä¸°å¯Œçš„å®è·µèµ„æ–™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœªæ¥è¶‹åŠ¿ä¸å‰æ™¯"&gt;ğŸš€ æœªæ¥è¶‹åŠ¿ä¸å‰æ™¯
&lt;/h3&gt;&lt;p&gt;å°½ç®¡å½“å‰ä»½é¢å¾ˆå°ï¼Œä½† ZGC å’Œ Shenandoah çš„æœªæ¥éå¸¸å€¼å¾—æœŸå¾…ï¼Œå°¤å…¶æ˜¯åœ¨ &lt;strong&gt;JDK 21 å¼•å…¥åˆ†ä»£ ZGCï¼ˆGenerational ZGCï¼‰&lt;/strong&gt; ä¹‹åã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¤§å¹…æå‡&lt;/strong&gt;ï¼šåˆ†ä»£ ZGC é€šè¿‡æ›´é¢‘ç¹åœ°å›æ”¶æ–°ç”Ÿä»£å¯¹è±¡ï¼Œæ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚ä¸€äº›å¤§å‚çš„å®è·µæ¡ˆä¾‹ï¼ˆå¦‚è½¬è½¬ã€äº¬ä¸œï¼‰æ˜¾ç¤ºï¼Œå‡çº§åˆ°åˆ†ä»£ZGCåï¼Œ&lt;strong&gt;åº”ç”¨ååé‡æå‡äº†æ•°å€ï¼ŒGCåœé¡¿æ—¶é—´é™ä½äº†20å€ä»¥ä¸Š&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å‡çº§çš„æ¨åŠ¨&lt;/strong&gt;ï¼šéšç€ Spring Boot 3.0 ç­‰ä¸»æµæ¡†æ¶å°†æœ€ä½æ”¯æŒç‰ˆæœ¬è®¾ä¸º JDK 17ï¼Œä»¥åŠ &lt;strong&gt;JDK 21 ä½œä¸ºæ–°çš„LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬&lt;/strong&gt;è¢«æ›´å¤šä¼ä¸šæ¥å—ï¼ŒZGC çš„æ™®åŠé€Ÿåº¦é¢„è®¡ä¼šåŠ å¿«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‘åŸç”Ÿä¸ä½å»¶è¿Ÿéœ€æ±‚&lt;/strong&gt;ï¼šåœ¨å¾®æœåŠ¡ã€é‡‘èäº¤æ˜“ã€å®æ—¶å¤§æ•°æ®å¤„ç†ç­‰åœºæ™¯ä¸‹ï¼Œå¯¹æœåŠ¡ç¨³å®šæ€§å’Œå“åº”æ—¶é—´çš„è¦æ±‚æé«˜ï¼Œè¿™æ­£å¥½æ˜¯ZGCå’ŒShenandoahå‘æŒ¥ä¼˜åŠ¿çš„èˆå°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒZGC å’Œ Shenandoah ç›®å‰æ˜¯åƒåœ¾å›æ”¶æŠ€æœ¯é¢†åŸŸçš„â€œé«˜æ€§èƒ½è·‘è½¦â€ï¼Œå°šæœªæˆä¸ºå¤§ä¼—æ—¥å¸¸ä»£æ­¥çš„å·¥å…·ï¼Œä½†æ— ç–‘æ˜¯æœªæ¥å‘å±•çš„æ–¹å‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•é€‰æ‹©ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ çš„åº”ç”¨è¿è¡Œåœ¨ &lt;strong&gt;JDK 11+&lt;/strong&gt; ä¸Šï¼Œä¸”å¯¹&lt;strong&gt;æœåŠ¡å“åº”å»¶è¿Ÿæœ‰æå…¶è‹›åˆ»çš„è¦æ±‚&lt;/strong&gt;ï¼ˆä¾‹å¦‚è¦æ±‚99.99%çš„è¯·æ±‚å“åº”æ—¶é—´åœ¨100æ¯«ç§’ä»¥å†…ï¼‰ï¼Œé‚£ä¹ˆéå¸¸å€¼å¾—è€ƒè™‘å¯ç”¨ ZGC æˆ– Shenandoahã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ–°å»ºé¡¹ç›®ï¼Œå¦‚æœè®¡åˆ’é‡‡ç”¨ &lt;strong&gt;JDK 21 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ï¼Œå¹¶é¢ä¸´é«˜å¹¶å‘ã€å¤§å†…å­˜çš„æŒ‘æˆ˜ï¼Œ&lt;strong&gt;åˆ†ä»£ ZGC æ˜¯ä¸€ä¸ªéå¸¸ç†æƒ³çš„é€‰æ‹©&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºå¤§å¤šæ•°é€šç”¨ä¸šåŠ¡ç³»ç»Ÿï¼ŒG1 åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…ä¾ç„¶æ˜¯ä¸€ä¸ªç¨³å®šã€å¹³è¡¡çš„é»˜è®¤é€‰é¡¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½åˆ†æèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å®ƒä»¬çš„ç°çŠ¶å’Œæœªæ¥ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç‰ˆæœ¬çš„å‚æ•°è°ƒä¼˜æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="gc-ç±»å‹"&gt;GC ç±»å‹
&lt;/h2&gt;&lt;p&gt;ç†è§£ Minor GCã€Major GC å’Œ Full GC æ˜¯æŒæ¡ JVM æ€§èƒ½è°ƒä¼˜çš„å…³é”®ä¸€æ­¥ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äº&lt;strong&gt;å›æ”¶çš„åŒºåŸŸå’Œè§¦å‘çš„æ¡ä»¶&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒæ¦‚å¿µã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Minor GC / Young GC&lt;/th&gt;
&lt;th&gt;Major GC&lt;/th&gt;
&lt;th&gt;Full GC&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›æ”¶åŒºåŸŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åªå›æ”¶æ–°ç”Ÿä»£&lt;/strong&gt; (EdenåŒº + SurvivoråŒº)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å›æ”¶è€å¹´ä»£&lt;/strong&gt;ï¼Œé€šå¸¸ä¼´éšè‡³å°‘ä¸€æ¬¡Minor GC&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›æ”¶æ•´ä¸ªå †ç©ºé—´&lt;/strong&gt; (æ–°ç”Ÿä»£ + è€å¹´ä»£) + &lt;strong&gt;æ–¹æ³•åŒºï¼ˆå…ƒç©ºé—´ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;EdenåŒºç©ºé—´ä¸è¶³&lt;/strong&gt;æ—¶è§¦å‘ (SurvivoråŒºæ»¡ä¸ä¼šè§¦å‘)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è€å¹´ä»£ç©ºé—´ä¸è¶³&lt;/strong&gt;æ—¶è§¦å‘&lt;/td&gt;
&lt;td&gt;æƒ…å†µå¤šæ ·ï¼šå¦‚è€å¹´ä»£æˆ–æ–¹æ³•åŒºç©ºé—´ä¸è¶³ã€&lt;code&gt;System.gc()&lt;/code&gt;è°ƒç”¨ã€ç©ºé—´åˆ†é…æ‹…ä¿å¤±è´¥ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é‡‡ç”¨&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ï¼Œä¼šå¼•å‘&lt;strong&gt;STWï¼ˆStop-The-Worldï¼‰&lt;/strong&gt;ï¼Œä½†é€Ÿåº¦éå¸¸å¿«&lt;/td&gt;
&lt;td&gt;é€Ÿåº¦é€šå¸¸æ¯” Minor GC &lt;strong&gt;æ…¢10å€ä»¥ä¸Š&lt;/strong&gt;ï¼ŒSTWæ—¶é—´æ›´é•¿&lt;/td&gt;
&lt;td&gt;å›æ”¶æ•´ä¸ªå †å’Œæ–¹æ³•åŒºï¼Œ&lt;strong&gt;åœé¡¿æ—¶é—´ï¼ˆSTWï¼‰æœ€é•¿&lt;/strong&gt;ï¼Œå¯¹åº”ç”¨æ€§èƒ½å½±å“æœ€å¤§ï¼Œåº”å°½é‡é¿å…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘ç”Ÿé¢‘ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éå¸¸é¢‘ç¹&lt;/strong&gt;ï¼Œå› ä¸ºç»å¤§å¤šæ•°Javaå¯¹è±¡éƒ½å…·æœ‰â€œæœç”Ÿå¤•æ­»â€çš„ç‰¹ç‚¹&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒå°‘ï¼Œå–å†³äºå¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£çš„æƒ…å†µ&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒå°‘ï¼Œæ˜¯åº”å°½åŠ›é¿å…çš„å…¨å±€æ€§åƒåœ¾æ”¶é›†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³è”å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Major GC æˆ– Full GC çš„è§¦å‘&lt;strong&gt;é€šå¸¸ä¼´éš&lt;/strong&gt;ç€ä¸€æ¬¡ Minor GC&lt;/td&gt;
&lt;td&gt;å¸¸ä¸ Full GC æ··æ·†ä½¿ç”¨ï¼Œéœ€æ³¨æ„åŒºåˆ†æ˜¯ä»…å›æ”¶è€å¹´ä»£è¿˜æ˜¯æ•´å †å›æ”¶&lt;/td&gt;
&lt;td&gt;å¯çœ‹ä½œæ˜¯ &lt;strong&gt;Major GC å’Œ Minor GC çš„ç»“åˆ&lt;/strong&gt;ï¼Œä½†èŒƒå›´æ›´å¹¿&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®æ¦‚å¿µè¾¨æ"&gt;ğŸ” å…³é”®æ¦‚å¿µè¾¨æ
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ä½¿ç”¨å’Œèµ„æ–™é˜…è¯»ä¸­ï¼Œæœ‰å‡ ä¸ªç»†èŠ‚éœ€è¦ä½ ç‰¹åˆ«ç•™æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Major GC ä¸ Full GC çš„æ··ç”¨&lt;/strong&gt;ï¼šåœ¨ä¸€äº›éæ­£å¼çš„ä¸Šä¸‹æ–‡æˆ–æ—§çš„èµ„æ–™ä¸­ï¼ŒMajor GC æœ‰æ—¶ä¼šè¢«ç”¨æ¥æŒ‡ä»£ Full GCã€‚ä½ éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯æ¥åˆ¤æ–­ï¼šå¦‚æœä¸Šä¸‹æ–‡æ˜ç¡®æåˆ°äº†å›æ”¶â€œæ•´ä¸ªå †â€æˆ–ä¼´éšæ–¹æ³•åŒºçš„å›æ”¶ï¼Œé‚£ä¹ˆå®ƒå®é™…æŒ‡çš„æ˜¯ Full GCã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒMajor GC ç‰¹æŒ‡åªå‘ç”Ÿåœ¨è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼ˆä¾‹å¦‚ CMS æ”¶é›†å™¨çš„è¡Œä¸ºï¼‰ï¼Œè€Œ Full GC çš„èŒƒå›´æ›´å¤§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡æ™‹å‡çš„é˜ˆå€¼&lt;/strong&gt;ï¼šä¸€ä¸ªå¯¹è±¡ä»æ–°ç”Ÿä»£æ™‹å‡åˆ°è€å¹´ä»£ä¸»è¦æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼šä¸€æ˜¯å¯¹è±¡åœ¨ Survivor åŒºä¸­ç»å†çš„ Minor GC æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼ˆ&lt;code&gt;-XX:MaxTenuringThreshold&lt;/code&gt;è®¾ç½®ï¼Œé»˜è®¤15ï¼‰ï¼›äºŒæ˜¯ Survivor åŒºä¸­ç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äº Survivor ç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ï¼ˆåŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤æ–­ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è°ƒä¼˜å¯ç¤º"&gt;ğŸ’¡ è°ƒä¼˜å¯ç¤º
&lt;/h3&gt;&lt;p&gt;äº†è§£è¿™äº›æ¦‚å¿µçš„æ ¹æœ¬ç›®çš„æ˜¯ä¸ºäº†ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨ Minor GC&lt;/strong&gt;ï¼šå› ä¸º Minor GC å‘ç”Ÿé¢‘ç‡æœ€é«˜ï¼Œå®ƒçš„æ•ˆç‡å’Œåœé¡¿æ—¶é—´ç›´æ¥å½±å“åº”ç”¨çš„å“åº”é€Ÿåº¦ã€‚ä¼˜åŒ–ç›®æ ‡é€šå¸¸æ˜¯å‡å°‘å•æ¬¡ Minor GC çš„åœé¡¿æ—¶é—´ï¼Œå¹¶é™ä½å…¶å‘ç”Ÿé¢‘ç‡ã€‚æ ¸å¿ƒæ€è·¯æ˜¯&lt;strong&gt;åˆç†è®¾ç½®æ–°ç”Ÿä»£å¤§å°&lt;/strong&gt;ã€‚æ–°ç”Ÿä»£è¿‡å¤§ï¼Œä¼šå¯¼è‡´å•æ¬¡ Minor GC æ—¶é—´å˜é•¿ï¼›è¿‡å°åˆ™ä¼šå¯¼è‡´ Minor GC è¿‡äºé¢‘ç¹ï¼ŒçŸ­æœŸå­˜æ´»çš„å¯¹è±¡å¯èƒ½ç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£ï¼Œä»è€Œè§¦å‘æ›´è€—æ—¶çš„ Major GC æˆ– Full GCã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°½åŠ›é¿å… Full GC&lt;/strong&gt;ï¼šFull GC çš„é•¿æ—¶é—´åœé¡¿å¯¹ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿååé‡æ˜¯è‡´å‘½çš„ã€‚ä½ éœ€è¦å¯†åˆ‡å…³æ³¨ Full GC çš„å‘ç”Ÿé¢‘ç‡å’ŒåŸå› ã€‚å¸¸è§çš„è°ƒä¼˜æ‰‹æ®µåŒ…æ‹¬ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä»£ç ä¸­æ˜¾å¼è°ƒç”¨ &lt;code&gt;System.gc()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–è€å¹´ä»£å¤§å°&lt;/strong&gt;ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´å®¹çº³ä»æ–°ç”Ÿä»£æ™‹å‡è¿‡æ¥çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®åº”ç”¨ç‰¹æ€§ï¼ˆå¦‚å¯¹è±¡ç”Ÿå‘½å‘¨æœŸåˆ†å¸ƒï¼‰&lt;strong&gt;é€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨&lt;/strong&gt;ï¼ˆå¦‚ G1ã€CMSã€ZGCç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ç›‘æ§"&gt;ğŸ”§ å¦‚ä½•ç›‘æ§
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ JVM å‚æ•°å¼€å¯ GC æ—¥å¿—ï¼Œæ¥è§‚å¯Ÿå’Œåˆ†æå„ç§ GC äº‹ä»¶çš„å‘ç”Ÿæƒ…å†µï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:gc.log
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ†æ GC æ—¥å¿—å¯ä»¥å¸®åŠ©ä½ ç¡®è®¤æ¯æ¬¡ GC çš„ç±»å‹ã€å‘ç”Ÿæ—¶é—´ã€å†…å­˜å›æ”¶æƒ…å†µä»¥åŠè€—æ—¶ï¼Œæ˜¯æ€§èƒ½è°ƒä¼˜çš„åŸºç¡€ ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½æ¢³ç†èƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šçš„åƒåœ¾æ”¶é›†å™¨ï¼ˆå¦‚ G1 æˆ– ZGCï¼‰å¦‚ä½•ç®¡ç†è¿™äº› GC äº‹ä»¶æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="serial"&gt;Serial
&lt;/h2&gt;&lt;p&gt;Serial GCï¼ˆä¸²è¡Œåƒåœ¾æ”¶é›†å™¨ï¼‰æ˜¯JVMä¸­æœ€å¤è€ã€ä¹Ÿæ˜¯æœ€åŸºç¡€çš„åƒåœ¾æ”¶é›†å™¨ã€‚å®ƒé‡‡ç”¨å•çº¿ç¨‹æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œåœ¨å·¥ä½œæ—¶ä¼šæš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹ï¼ˆStop-The-World, STWï¼‰ã€‚å°½ç®¡åœ¨ç°ä»£å¤šæ ¸ç³»ç»Ÿä¸­å·²éä¸»æµï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä»æœ‰å…¶ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†Serial GCçš„æ ¸å¿ƒç‰¹æ€§ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Serial GC è¯¦æƒ…&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œæ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•çº¿ç¨‹ä¸²è¡Œå›æ”¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åƒåœ¾å›æ”¶æ—¶è§¦å‘ &lt;strong&gt;Stop-The-World (STW)&lt;/strong&gt;ï¼Œæš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–°ç”Ÿä»£ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt; (Copying)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è€å¹´ä»£ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt; (Mark-Compact)ï¼ŒSerial Oldä¸“ç”¨äºè€å¹´ä»£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•é«˜æ•ˆã€ä½å†…å­˜å¼€é”€ã€é€‚ç”¨äºå•æ ¸æˆ–å°å†…å­˜ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ã€æ— çº¿ç¨‹äº¤äº’å¼€é”€ã€èµ„æºæ¶ˆè€—ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å±€é™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;STWåœé¡¿æ—¶é—´é•¿ã€æ— æ³•åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿ã€ä¸é€‚åˆå¤§å†…å­˜é«˜å¹¶å‘åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸åˆ†ä»£å›æ”¶"&gt;ğŸ”§ å·¥ä½œæœºåˆ¶ä¸åˆ†ä»£å›æ”¶
&lt;/h3&gt;&lt;p&gt;Serial GCéµå¾ªJVMçš„åˆ†ä»£åƒåœ¾å›æ”¶æ€æƒ³ï¼Œå¯¹æ–°ç”Ÿä»£å’Œè€å¹´ä»£é‡‡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ–°ç”Ÿä»£å›æ”¶ä¸å¤åˆ¶ç®—æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Serial GCå°†æ–°ç”Ÿä»£åˆ’åˆ†ä¸ºä¸€ä¸ªEdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºï¼ˆS0å’ŒS1ï¼‰ã€‚æ–°åˆ›å»ºçš„å¯¹è±¡é€šå¸¸ä¼˜å…ˆåœ¨EdenåŒºåˆ†é…ã€‚å½“EdenåŒºç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡Minor GCã€‚GCè¿‡ç¨‹ä¼šæš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹ï¼Œç„¶åä½¿ç”¨&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ï¼šå°†EdenåŒºå’Œä¸€ä¸ªSurvivoråŒºï¼ˆä¾‹å¦‚FromåŒºï¼‰ä¸­ä»ç„¶å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªç©ºçš„SurvivoråŒºï¼ˆToåŒºï¼‰ï¼ŒåŒæ—¶å¯¹è±¡çš„å¹´é¾„åŠ 1ã€‚å¦‚æœå­˜æ´»å¯¹è±¡çš„å¹´é¾„è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º15ï¼‰ï¼Œæˆ–è€…ToåŒºç©ºé—´ä¸è¶³ï¼Œè¿™äº›å¯¹è±¡ä¼šè¢«&lt;strong&gt;æ™‹å‡&lt;/strong&gt;ï¼ˆPromoteï¼‰åˆ°è€å¹´ä»£ã€‚æœ€åï¼Œæ¸…ç©ºEdenåŒºå’Œåˆšæ‰ä½¿ç”¨çš„FromåŒºã€‚SurvivoråŒºçš„å­˜åœ¨ç»™äº†å¯¹è±¡ä¸€ä¸ªâ€œç¼“å†²â€çš„æœºä¼šï¼Œé¿å…é‚£äº›ç”Ÿå‘½å‘¨æœŸçŸ­æš‚çš„å¯¹è±¡è¿‡æ—©è¿›å…¥è€å¹´ä»£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è€å¹´ä»£å›æ”¶ä¸æ ‡è®°-æ•´ç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“è€å¹´ä»£ç©ºé—´ä¸è¶³æˆ–è¾¾åˆ°ç‰¹å®šæ¡ä»¶æ—¶ï¼Œä¼šè§¦å‘Full GCï¼ŒSerial GCä¼šä½¿ç”¨Serial Oldæ”¶é›†å™¨æ¥å›æ”¶è€å¹´ä»£ã€‚å®ƒé‡‡ç”¨&lt;strong&gt;æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt;ï¼Œæ•´ä¸ªè¿‡ç¨‹åŒæ ·éœ€è¦STWã€‚é¦–å…ˆ&lt;strong&gt;æ ‡è®°&lt;/strong&gt;å‡ºè€å¹´ä»£ä¸­æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ã€‚ç„¶åå°†è¿™äº›å­˜æ´»å¯¹è±¡å‘å†…å­˜ç©ºé—´çš„ä¸€ç«¯&lt;strong&gt;ç§»åŠ¨&lt;/strong&gt;ï¼ˆæ•´ç†ï¼‰ï¼Œä»è€Œæ¶ˆé™¤å†…å­˜ç¢ç‰‡ã€‚æœ€åï¼Œæ¸…ç†æ‰å­˜æ´»å¯¹è±¡è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚è¿™ä¸ªè¿‡ç¨‹æœ‰æ•ˆé¿å…äº†å†…å­˜ç¢ç‰‡åŒ–ï¼Œä½†ç”±äºéœ€è¦ç§»åŠ¨å¯¹è±¡ä¸”æ˜¯å•çº¿ç¨‹æ“ä½œï¼Œåœ¨å¤§å †å†…å­˜ä¸‹åœé¡¿æ—¶é—´ä¼šè¾ƒé•¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†è·¨ä»£å¼•ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºå­˜åœ¨è€å¹´ä»£å¯¹è±¡å¼•ç”¨æ–°ç”Ÿä»£å¯¹è±¡çš„æƒ…å†µï¼ˆè·¨ä»£å¼•ç”¨ï¼‰ï¼ŒSerial GCä½¿ç”¨&lt;strong&gt;å¡è¡¨&lt;/strong&gt;ä½œä¸ºä¸€ç§&lt;strong&gt;è®°å¿†é›†&lt;/strong&gt;æ¥é«˜æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¡è¡¨å°†è€å¹´ä»£å†…å­˜åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„å¡é¡µï¼ˆå¦‚512å­—èŠ‚ï¼‰ï¼Œå½“è€å¹´ä»£ä¸­çš„å¯¹è±¡å¼•ç”¨æ–°ç”Ÿä»£å¯¹è±¡æ—¶ï¼ŒJVMä¼šé€šè¿‡&lt;strong&gt;å†™å±éšœ&lt;/strong&gt;æŠ€æœ¯å°†å¯¹åº”å¡é¡µæ ‡è®°ä¸ºâ€œè„â€ã€‚åœ¨Minor GCæ—¶ï¼Œåƒåœ¾æ”¶é›†å™¨åªéœ€æ‰«æè¿™äº›â€œè„â€é¡µï¼Œè€Œæ— éœ€éå†æ•´ä¸ªè€å¹´ä»£ï¼Œä»è€Œæå‡äº†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¼˜ç‚¹ä¸å±€é™"&gt;âš–ï¸ ä¼˜ç‚¹ä¸å±€é™
&lt;/h3&gt;&lt;p&gt;ç†è§£Serial GCçš„ä¼˜ç¼ºç‚¹ï¼Œæ˜¯åˆ¤æ–­å…¶æ˜¯å¦é€‚ç”¨çš„å…³é”®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä¼˜åŠ¿&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•é«˜æ•ˆ&lt;/strong&gt;ï¼šå•çº¿ç¨‹è®¾è®¡é¿å…äº†å¤šçº¿ç¨‹åŒæ­¥å¸¦æ¥çš„å¤æ‚æ€§å’Œå¼€é”€ï¼Œåœ¨å•æ ¸CPUæˆ–å°å†…å­˜åœºæ™¯ä¸‹ï¼Œå› å…¶ä¸“æ³¨æ€§è€Œè¡¨ç°è‰¯å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½å†…å­˜å ç”¨&lt;/strong&gt;ï¼šæ— éœ€ä¸ºå¤šçº¿ç¨‹ç»´æŠ¤å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè‡ªèº«å†…å­˜å¼€é”€éå¸¸å°ï¼Œé€‚åˆèµ„æºæåº¦å—é™çš„ç¯å¢ƒï¼Œå¦‚åµŒå…¥å¼è®¾å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é¢„æµ‹æ€§&lt;/strong&gt;ï¼šè¡Œä¸ºç›¸å¯¹ç®€å•ï¼Œåœ¨ç¨³å®šçš„å°å‹åº”ç”¨ä¸­ï¼Œå…¶GCè¡Œä¸ºæ›´å®¹æ˜“é¢„æµ‹å’Œè°ƒè¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜æ˜¾å±€é™&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;STWåœé¡¿&lt;/strong&gt;ï¼šè¿™æ˜¯å…¶æœ€æ˜¾è‘—çš„ç¼ºç‚¹ã€‚åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šå®Œå…¨æš‚åœï¼Œå¦‚æœå †å†…å­˜è¾ƒå¤§æˆ–å­˜æ´»å¯¹è±¡è¾ƒå¤šï¼Œåœé¡¿æ—¶é—´ä¼šå¾ˆé•¿ï¼Œå¯¹ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿå®æ—¶æ€§å½±å“å·¨å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•åˆ©ç”¨å¤šæ ¸&lt;/strong&gt;ï¼šåœ¨ç°ä»£å¤šæ ¸å¤„ç†å™¨æˆä¸ºæ ‡é…çš„æƒ…å†µä¸‹ï¼ŒSerial GCçš„å•çº¿ç¨‹æ¨¡å¼æ— æ³•å……åˆ†åˆ©ç”¨ç¡¬ä»¶èµ„æºï¼Œå›æ”¶æ•ˆç‡ä¼šæˆä¸ºç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸é€‚åˆå¤§è§„æ¨¡åº”ç”¨&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦é«˜ååã€ä½å»¶è¿Ÿçš„å¤§å‹åº”ç”¨æˆ–å¾®æœåŠ¡ï¼ŒSerial GCçš„é•¿æ—¶é—´åœé¡¿é€šå¸¸æ˜¯ä¸å¯æ¥å—çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å°½ç®¡æœ‰å…¶å±€é™æ€§ï¼ŒSerial GCåœ¨ä»¥ä¸‹ç‰¹å®šåœºæ™¯ä¸­ä»æ˜¯åˆç†ç”šè‡³æœ€ä½³çš„é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿæˆ–ç‰©è”ç½‘è®¾å¤‡&lt;/strong&gt;ï¼šå†…å­˜å’ŒCPUæ ¸å¿ƒæ•°æœ‰é™ï¼ŒSerial GCçš„ä½å¼€é”€æ˜¯ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€å•çš„å•çº¿ç¨‹å®¢æˆ·ç«¯åº”ç”¨æˆ–å‘½ä»¤è¡Œå·¥å…·&lt;/strong&gt;ï¼šåº”ç”¨æœ¬èº«æ˜¯å•çº¿ç¨‹çš„ï¼Œä¸”å †å†…å­˜ä¸å¤§ï¼Œå¯¹åœé¡¿ä¸æ•æ„Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€å‘ã€æµ‹è¯•å’Œè°ƒè¯•ç¯å¢ƒ&lt;/strong&gt;ï¼šå…¶ç®€å•æ€§æœ‰åŠ©äºå¼€å‘è€…ç†è§£GCåŸºç¡€åŸç†å’Œæ’æŸ¥å†…å­˜ç›¸å…³é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é…ç½®ä¸ç›‘æ§"&gt;âš™ï¸ é…ç½®ä¸ç›‘æ§
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡JVMå‚æ•°è¿›è¡Œé…ç½®å’Œç›‘æ§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨ä¸åŸºç¡€é…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¦æ˜¾å¼å¯ç”¨Serial GCï¼Œå¯ä»¥ä½¿ç”¨JVMå¯åŠ¨å‚æ•°ï¼š&lt;code&gt;-XX:+UseSerialGC&lt;/code&gt;ã€‚è¿˜å¯ä»¥é…åˆå…¶ä»–å‚æ•°è°ƒæ•´å †å†…å­˜å¤§å°ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-Xms64m -Xmx64m&lt;/code&gt;ï¼šè®¾ç½®å †åˆå§‹å’Œæœ€å¤§å†…å­˜ä¸º64MBã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-Xmn32m&lt;/code&gt;ï¼šè®¾ç½®æ–°ç”Ÿä»£å¤§å°ä¸º32MBã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:SurvivorRatio=8&lt;/code&gt;ï¼šè®¾ç½®EdenåŒºä¸ä¸€ä¸ªSurvivoråŒºçš„æ¯”ä¾‹ï¼ˆé»˜è®¤ä¸º8ï¼Œå³Eden:Survivor=8:1:1ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›‘æ§GCæ—¥å¿—&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¼€å¯GCæ—¥å¿—å¯¹äºç›‘æ§å’Œè°ƒä¼˜è‡³å…³é‡è¦ã€‚å¯ä»¥æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:gc.log&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ—¥å¿—ä¼šè®°å½•æ¯æ¬¡GCçš„ç±»å‹ã€å‘ç”Ÿæ—¶é—´ã€å†…å­˜å›æ”¶å‰åå˜åŒ–ä»¥åŠè€—æ—¶ï¼Œå¸®åŠ©ä½ åˆ†æGCè¡Œä¸ºæ˜¯å¦å¥åº·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Serial GCä½œä¸ºJVMåƒåœ¾å›æ”¶æŠ€æœ¯çš„èµ·ç‚¹ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äº&lt;strong&gt;ç®€å•å’Œä½å¼€é”€&lt;/strong&gt;ã€‚è™½ç„¶å®ƒå·²æ— æ³•æ»¡è¶³ç°ä»£å¤§è§„æ¨¡ã€ä½å»¶è¿Ÿåº”ç”¨çš„éœ€æ±‚ï¼Œä½†åœ¨ç‰¹å®šçš„èµ„æºæ•æ„Ÿå‹åœºæ™¯ä¸‹ï¼Œå®ƒä¾ç„¶æ˜¯ä¸€ä¸ªå®ç”¨ä¸”æœ‰æ•ˆçš„é€‰æ‹©ã€‚ç†è§£Serial GCæœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°æŠŠæ¡JVMåƒåœ¾å›æ”¶å™¨çš„æ¼”è¿›é€»è¾‘å’Œè®¾è®¡æƒè¡¡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£Serial GCã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„è°ƒä¼˜æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="parellel-gc"&gt;Parellel GC
&lt;/h2&gt;&lt;p&gt;Parallel GCï¼ˆå¹¶è¡Œåƒåœ¾æ”¶é›†å™¨ï¼‰æ˜¯JVMä¸­ä¸€æ¬¾ä»¥&lt;strong&gt;æœ€å¤§åŒ–ç³»ç»Ÿååé‡&lt;/strong&gt;ä¸ºæ ¸å¿ƒç›®æ ‡çš„åƒåœ¾æ”¶é›†å™¨ã€‚å®ƒé€šè¿‡&lt;strong&gt;å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œ&lt;/strong&gt;åƒåœ¾å›æ”¶ä»»åŠ¡æ¥å……åˆ†åˆ©ç”¨å¤šæ ¸CPUä¼˜åŠ¿ï¼Œç‰¹åˆ«é€‚åˆå¯¹ååé‡è¦æ±‚é«˜ã€å¯¹åœé¡¿æ—¶é—´ç›¸å¯¹ä¸æ•æ„Ÿçš„åº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†Parallel GCçš„æ ¸å¿ƒç‰¹æ€§ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯¦æƒ…&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;ï¼ˆåº”ç”¨ç¨‹åºè¿è¡Œæ—¶é—´å æ€»æ—¶é—´çš„æ¯”ä¾‹æœ€å¤§åŒ–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œæ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šçº¿ç¨‹å¹¶è¡Œå›æ”¶&lt;/strong&gt;ï¼Œä½†ä¼šå‘ç”Ÿ &lt;strong&gt;Stop-The-World (STW)&lt;/strong&gt; åœé¡¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–°ç”Ÿä»£ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ï¼ˆParallel Scavengeï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è€å¹´ä»£ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt;ï¼ˆParallel Oldï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ååé‡é«˜ã€å¤šæ ¸CPUåˆ©ç”¨ç‡é«˜ã€æ”¯æŒè‡ªé€‚åº”è°ƒä¼˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å±€é™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;STWåœé¡¿æ—¶é—´ç›¸å¯¹è¾ƒé•¿ï¼Œä¸é€‚åˆä½å»¶è¿Ÿåœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤ç‰ˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;JDK 8åŠä¹‹å‰ç‰ˆæœ¬çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ï¼ˆJDK 9åŠä»¥åé»˜è®¤æ˜¯G1ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸åˆ†ä»£å›æ”¶-1"&gt;ğŸ”§ å·¥ä½œæœºåˆ¶ä¸åˆ†ä»£å›æ”¶
&lt;/h3&gt;&lt;p&gt;Parallel GCéµå¾ªåˆ†ä»£æ”¶é›†ç†è®ºï¼Œå¯¹æ–°ç”Ÿä»£å’Œè€å¹´ä»£é‡‡ç”¨ä¸åŒçš„å¹¶è¡Œå›æ”¶ç­–ç•¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹´è½»ä»£å›æ”¶ï¼ˆMinor GCï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Parallel GCä½¿ç”¨ &lt;strong&gt;Parallel Scavenge&lt;/strong&gt; æ”¶é›†å™¨è´Ÿè´£å¹´è½»ä»£çš„å›æ”¶ã€‚å½“EdenåŒºç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡Minor GCã€‚å…¶è¿‡ç¨‹æ˜¯ï¼šåœ¨STWåœé¡¿åï¼Œå¤šä¸ªGCçº¿ç¨‹å¹¶è¡Œåœ°å°†EdenåŒºå’ŒFrom SurvivoråŒºä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°To SurvivoråŒºã€‚å¦‚æœå¯¹è±¡å­˜æ´»å¹´é¾„è¶…è¿‡é˜ˆå€¼ï¼ˆé»˜è®¤15æ¬¡ï¼‰ï¼Œæˆ–To SurvivoråŒºç©ºé—´ä¸è¶³ï¼Œåˆ™å¯¹è±¡ä¼šæ™‹å‡åˆ°è€å¹´ä»£ã€‚æœ€åï¼Œæ¸…ç©ºEdenåŒºå’Œå·²ä½¿ç”¨çš„From SurvivoråŒºã€‚è¯¥ç®—æ³•é«˜æ•ˆï¼Œä½†STWåœé¡¿æ—¶é—´ä¼šéšå¹´è½»ä»£å¤§å°å¢é•¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è€å¹´ä»£å›æ”¶ï¼ˆMajor GC / Full GCï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è€å¹´ä»£ç”± &lt;strong&gt;Parallel Old&lt;/strong&gt; æ”¶é›†å™¨è´Ÿè´£ï¼Œå®ƒé‡‡ç”¨&lt;strong&gt;æ ‡è®°-æ•´ç†ç®—æ³•&lt;/strong&gt;ã€‚å½“è€å¹´ä»£ç©ºé—´ä¸è¶³æ—¶ä¼šè§¦å‘Full GCï¼Œè¿‡ç¨‹åŒæ ·ä¼šSTWï¼šå¤šä¸ªGCçº¿ç¨‹å¹¶è¡Œåœ°æ ‡è®°å‡ºæ‰€æœ‰å­˜æ´»å¯¹è±¡ï¼Œç„¶åå°†è¿™äº›å¯¹è±¡å‘å†…å­˜ä¸€ç«¯ç§»åŠ¨ï¼ˆæ•´ç†ï¼‰ï¼Œä»è€Œå›æ”¶ç¢ç‰‡ç©ºé—´ã€‚è™½ç„¶å¹¶è¡Œå¤„ç†æå‡äº†æ•ˆç‡ï¼Œä½†ç”±äºéœ€è¦å¤„ç†æ•´ä¸ªè€å¹´ä»£å¹¶ç§»åŠ¨å¯¹è±¡ï¼ŒFull GCçš„STWåœé¡¿æ—¶é—´é€šå¸¸æ¯”Minor GCé•¿å¾—å¤šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸€ä¸ªé‡è¦çš„ç»†èŠ‚ï¼šScavengeBeforeFullGC&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨Parallel GCä¸­ï¼Œé»˜è®¤å¯ç”¨äº† &lt;code&gt;-XX:+ScavengeBeforeFullGC&lt;/code&gt;å‚æ•°ã€‚è¿™æ„å‘³ç€åœ¨è§¦å‘ä¸€æ¬¡Full GCä¹‹å‰ï¼ŒJVMä¼š&lt;strong&gt;å…ˆå°è¯•æ‰§è¡Œä¸€æ¬¡Young GC&lt;/strong&gt;ï¼Œä»¥æ¸…ç†æ‰å¹´è½»ä»£ä¸­ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œä»è€Œå‡å°‘éœ€è¦æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡æ•°é‡ï¼Œæœ‰æ—¶å¯èƒ½å› æ­¤é¿å…äº†ä¸å¿…è¦çš„Full GCã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒç‰¹æ€§ä¸å‚æ•°è°ƒä¼˜"&gt;âš™ï¸ æ ¸å¿ƒç‰¹æ€§ä¸å‚æ•°è°ƒä¼˜
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ååé‡ä¼˜å…ˆ&lt;/strong&gt;ï¼šParallel GCçš„æ ¸å¿ƒç›®æ ‡æ˜¯æœ€å¤§åŒ–ååé‡ï¼Œå³åº”ç”¨ç¨‹åºè¿è¡Œæ—¶é—´å æ€»ï¼ˆåº”ç”¨ç¨‹åºè¿è¡Œæ—¶é—´ + GCæ—¶é—´ï¼‰çš„æ¯”ä¾‹ã€‚å¯é€šè¿‡ &lt;code&gt;-XX:GCTimeRatio&lt;/code&gt;å‚æ•°ç›´æ¥è®¾å®šç›®æ ‡ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªé€‚åº”ç­–ç•¥&lt;/strong&gt;ï¼šParallel GCæ”¯æŒå¼ºå¤§çš„è‡ªé€‚åº”è°ƒä¼˜ç­–ç•¥ï¼ˆé€šè¿‡ &lt;code&gt;-XX:+UseAdaptiveSizePolicy&lt;/code&gt;å¼€å¯ï¼Œé»˜è®¤é€šå¸¸å¯ç”¨ï¼‰ã€‚JVMä¼šæ ¹æ®è¿è¡Œæ—¶çš„ç›‘æ§æ•°æ®ï¼ˆå¦‚GCåœé¡¿æ—¶é—´ã€æ™‹å‡å¤§å°ç­‰ï¼‰ï¼Œ&lt;strong&gt;åŠ¨æ€è°ƒæ•´&lt;/strong&gt;æ–°ç”Ÿä»£å¤§å°ã€Edenä¸SurvivoråŒºçš„æ¯”ä¾‹ã€æ™‹å‡å¹´é¾„é˜ˆå€¼ç­‰å‚æ•°ï¼Œä»¥å°½å¯èƒ½æ¥è¿‘è®¾å®šçš„ååé‡æˆ–åœé¡¿æ—¶é—´ç›®æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®è°ƒä¼˜å‚æ•°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-XX:MaxGCPauseMillis&lt;/code&gt;&lt;/strong&gt;ï¼šè®¾ç½®æœŸæœ›çš„&lt;strong&gt;æœ€å¤§GCåœé¡¿æ—¶é—´&lt;/strong&gt;ï¼ˆæ¯«ç§’ï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ª&amp;quot;ç›®æ ‡å€¼&amp;rdquo;ï¼ŒJVMä¼šå°½åŠ›å®ç°ä½†ä¸ä¿è¯ç»å¯¹æ»¡è¶³ã€‚è®¾ç½®è¿‡å°å¯èƒ½å¯¼è‡´é¢‘ç¹GCæˆ–å¹´è½»ä»£ç¼©å¾—å¤ªå°ï¼Œåè€Œé™ä½ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-XX:GCTimeRatio&lt;/code&gt;&lt;/strong&gt;ï¼šè®¾ç½®&lt;strong&gt;ååé‡ç›®æ ‡å€¼&lt;/strong&gt;ã€‚å…¬å¼ä¸º &lt;code&gt;åº”ç”¨è¿è¡Œæ—¶é—´ / (åº”ç”¨è¿è¡Œæ—¶é—´ + GCæ—¶é—´)&lt;/code&gt;ï¼Œé»˜è®¤å€¼99è¡¨ç¤ºç›®æ ‡ä¸ºGCæ—¶é—´ä¸è¶…è¿‡æ€»æ—¶é—´çš„1% (&lt;code&gt;1/(1+99)&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-XX:ParallelGCThreads&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®š&lt;strong&gt;å¹¶è¡ŒGCçº¿ç¨‹æ•°&lt;/strong&gt;ã€‚é€šå¸¸é»˜è®¤å€¼ï¼ˆä¸CPUæ ¸å¿ƒæ•°ç›¸å…³ï¼‰å·²è¶³å¤Ÿï¼Œåœ¨CPUèµ„æºç´§å¼ æˆ–éœ€ä¸¥æ ¼æ§åˆ¶GCçº¿ç¨‹æ•°æ—¶è°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;-XX:+UseParallelGC&lt;/code&gt;&lt;/strong&gt; ä¸ &lt;strong&gt;&lt;code&gt;-XX:+UseParallelOldGC&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨JDK 7u4åŠä»¥åç‰ˆæœ¬ï¼Œå¯ç”¨å…¶ä¸­ä¸€ä¸ªå³åŒæ—¶å¯ç”¨æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å¹¶è¡Œæ”¶é›†å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;ï¼šåœ¨å¤šæ ¸æœåŠ¡å™¨ä¸Šèƒ½æå¤§æå‡æ•°æ®å¤„ç†èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ ¸ä¼˜åŒ–&lt;/strong&gt;ï¼šå¹¶è¡Œå›æ”¶èƒ½æœ‰æ•ˆé™ä½å•æ¬¡GCçš„ç»å¯¹æ—¶é—´ï¼ˆå°½ç®¡STWä¾ç„¶å­˜åœ¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªé€‚åº”è°ƒä¼˜&lt;/strong&gt;ï¼šé™ä½äº†æ‰‹åŠ¨ç²¾ç»†è°ƒä¼˜çš„é—¨æ§›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;STWåœé¡¿&lt;/strong&gt;ï¼šæ— è®ºæ˜¯Minor GCè¿˜æ˜¯Full GCéƒ½ä¼šå¯¼è‡´åº”ç”¨çº¿ç¨‹æš‚åœï¼ŒFull GCçš„åœé¡¿æ—¶é—´å¯èƒ½è¾ƒé•¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿä¸æ•æ„Ÿ&lt;/strong&gt;ï¼šä¸é€‚åˆå¯¹å“åº”æ—¶é—´æœ‰ä¸¥æ ¼è¦æ±‚çš„å®æ—¶æˆ–äº¤äº’å¼åº”ç”¨ï¼ˆå¦‚WebæœåŠ¡ã€äº¤æ˜“ç³»ç»Ÿï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åå°&lt;strong&gt;æ‰¹å¤„ç†ä»»åŠ¡&lt;/strong&gt;ï¼ˆå¦‚æ•°æ®è®¡ç®—ã€æŠ¥è¡¨ç”Ÿæˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—å¯†é›†å‹&lt;/strong&gt;åº”ç”¨ï¼ˆå¦‚ç§‘å­¦è®¡ç®—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹&lt;strong&gt;ååé‡è¦æ±‚é«˜äºå»¶è¿Ÿè¦æ±‚&lt;/strong&gt;çš„ä¸šåŠ¡ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸å…¶ä»–æ”¶é›†å™¨çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ”¶é›†å™¨çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;äº†è§£Parallel GCä¸å…¶ä»–ä¸»æµæ”¶é›†å™¨çš„åŒºåˆ«æœ‰åŠ©äºæ›´å¥½åœ°è¿›è¡ŒæŠ€æœ¯é€‰å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ”¶é›†å™¨&lt;/th&gt;
&lt;th&gt;è®¾è®¡ç›®æ ‡&lt;/th&gt;
&lt;th&gt;çº¿ç¨‹/å·¥ä½œæ¨¡å¼&lt;/th&gt;
&lt;th&gt;å…³é”®ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Parallel GC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶è¡ŒSTW&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…³æ³¨æ•´ä½“ååé‡ï¼ŒSTWåœé¡¿æ—¶é—´ç›¸å¯¹è¾ƒé•¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CMS GC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½å»¶è¿Ÿ&lt;/strong&gt;ï¼ˆå·²åºŸå¼ƒï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;ï¼ˆéƒ¨åˆ†é˜¶æ®µï¼‰&lt;/td&gt;
&lt;td&gt;å°è¯•å‡å°‘åœé¡¿æ—¶é—´ï¼Œä½†ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œä¸”æ˜“å‘ç”Ÿ&amp;quot;Concurrent Mode Failure&amp;quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;G1 GC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹³è¡¡ååé‡ä¸å»¶è¿Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶è¡Œ + å¹¶å‘ + STW&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é¢„æµ‹çš„åœé¡¿æ¨¡å‹ï¼Œé€‚ç”¨äºå¤§å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ZGC/Shenandoah&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¶…ä½å»¶è¿Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡ ä¹å…¨å¹¶å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœé¡¿æ—¶é—´æçŸ­ï¼Œä¸”å‡ ä¹ä¸éšå †å¤§å°å¢é•¿ï¼Œé€‚ç”¨äºTBçº§å¤§å †å’Œæè‡´å»¶è¿Ÿè¦æ±‚çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-13"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Parallel GCæ˜¯ä¸€æ¬¾éå¸¸æˆç†Ÿä¸”é«˜æ•ˆçš„&lt;strong&gt;ååé‡ä¼˜å…ˆå‹&lt;/strong&gt;åƒåœ¾æ”¶é›†å™¨ã€‚å®ƒåœ¨å¤šæ ¸ç¯å¢ƒä¸‹èƒ½æœ€å¤§åŒ–åº”ç”¨ç¨‹åºçš„ååé‡ï¼Œå°¤å…¶é€‚åˆåå°å¤„ç†ã€å¤§æ•°æ®è®¡ç®—ç­‰å¯¹å»¶è¿Ÿä¸æ•æ„Ÿä½†å¯¹æ•´ä½“å¤„ç†é€Ÿåº¦è¦æ±‚é«˜çš„åœºæ™¯ã€‚å…¶&lt;strong&gt;å¹¶è¡Œå›æ”¶&lt;/strong&gt;å’Œ&lt;strong&gt;è‡ªé€‚åº”è°ƒæ•´&lt;/strong&gt;æ˜¯å…¶æ ¸å¿ƒä¼˜åŠ¿ï¼Œä½†éœ€è¦æ¥å—å…¶å¯èƒ½å¸¦æ¥çš„&lt;strong&gt;STWåœé¡¿&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£Parallel GCã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å‚æ•°è°ƒä¼˜æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="serial-gc--parallel-gc"&gt;Serial GC &amp;amp; Parallel GC
&lt;/h2&gt;&lt;p&gt;Parallel GC å’Œ Serial GC çš„åŒºåˆ«è¿œä¸æ­¢äºæ˜¯å¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œè¿™ä»…ä»…æ˜¯å®ƒä»¬æœ€è¡¨è±¡çš„å·®å¼‚ã€‚å®ƒä»¬åœ¨å†…æ ¸è®¾è®¡ç›®æ ‡ã€æ€§èƒ½ç‰¹æ€§ä»¥åŠé€‚ç”¨åœºæ™¯ä¸Šéƒ½æœ‰ç€æ ¹æœ¬çš„ä¸åŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;Serial GC (ä¸²è¡Œæ”¶é›†å™¨)&lt;/th&gt;
&lt;th&gt;Parallel GC (å¹¶è¡Œ/ååé‡æ”¶é›†å™¨)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç®€å•é«˜æ•ˆã€ä½å†…å­˜å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§åŒ–ç³»ç»Ÿååé‡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•çº¿ç¨‹&lt;/strong&gt;æ‰§è¡ŒGCï¼ŒSTWæ—¶åªèƒ½åˆ©ç”¨ä¸€ä¸ªCPUæ ¸å¿ƒ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šçº¿ç¨‹å¹¶è¡Œ&lt;/strong&gt;æ‰§è¡ŒGCï¼ŒSTWæ—¶èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPUèµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;STWåœé¡¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœé¡¿æ—¶é—´è¾ƒé•¿ï¼Œä¸”éšå †å¤§å°å¢é•¿è€Œæ˜¾è‘—å¢åŠ &lt;/td&gt;
&lt;td&gt;åœ¨å¤šæ ¸ç¯å¢ƒä¸‹ï¼Œå…¶å¹¶è¡Œå›æ”¶æœºåˆ¶èƒ½&lt;strong&gt;ç¼©çŸ­å•æ¬¡GCçš„ç»å¯¹åœé¡¿æ—¶é—´&lt;/strong&gt;ï¼ˆç›¸æ¯”Serial GCï¼‰ï¼Œä½†åœé¡¿ä¾ç„¶å­˜åœ¨ä¸”å¯èƒ½éšå †å¢å¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ååé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å•æ ¸CPUç¯å¢ƒä¸‹ç›¸å¯¹é«˜æ•ˆ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ååé‡&lt;/strong&gt;ï¼Œå•ä½æ—¶é—´å†…åº”ç”¨ç¨‹åºå·¥ä½œæ—¶é—´å æ¯”é«˜ï¼Œé€‚åˆåå°è¿ç®—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ä¸èµ„æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªèº«å†…å­˜å¼€é”€æä½ï¼Œå‡ ä¹æ— é¢å¤–çº¿ç¨‹å¼€é”€&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¸ºå¤šä¸ªGCçº¿ç¨‹ç»´æŠ¤çŠ¶æ€ï¼Œæœ‰é¢å¤–å¼€é”€ï¼›èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸CPU&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å †å†…å­˜æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸é€‚ç”¨äºå †å†…å­˜ &amp;lt; 1GB çš„å°å‹åº”ç”¨&lt;/td&gt;
&lt;td&gt;æ”¯æŒä¸­ç­‰å †å†…å­˜ï¼ˆçº¦1GB ~ 10GBï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒä¼˜ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡Œä¸ºç®€å•ï¼Œå¯è°ƒå‚æ•°å°‘&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;strong&gt;è‡ªé€‚åº”è°ƒä¼˜ç­–ç•¥&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;-XX:+UseAdaptiveSizePolicy&lt;/code&gt;ï¼‰ï¼Œå¯æ ¹æ®è¿è¡ŒçŠ¶å†µåŠ¨æ€è°ƒæ•´æ–°ç”Ÿä»£å¤§å°ã€æ™‹å‡é˜ˆå€¼ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç”¨å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-XX:+UseSerialGC&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-XX:+UseParallelGC&lt;/code&gt;æˆ– &lt;code&gt;-XX:+UseParallelOldGC&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯æ¨¡å¼ã€åµŒå…¥å¼è®¾å¤‡ã€å•æ ¸ç¯å¢ƒæˆ–å†…å­˜å—é™çš„ç®€å•åº”ç”¨&lt;/td&gt;
&lt;td&gt;ç§‘å­¦è®¡ç®—ã€å¤§æ•°æ®æ‰¹å¤„ç†ä»»åŠ¡ç­‰å¯¹&lt;strong&gt;ååé‡&lt;/strong&gt;è¦æ±‚é«˜ã€å¯¹åœé¡¿ä¸æ•æ„Ÿçš„åå°åº”ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å·®å¼‚"&gt;ğŸ” æ·±å…¥ç†è§£å·®å¼‚
&lt;/h3&gt;&lt;p&gt;è¡¨æ ¼å±•ç¤ºäº†æ ¸å¿ƒåŒºåˆ«ï¼Œä»¥ä¸‹å‡ ç‚¹èƒ½å¸®ä½ æ›´æ·±å…¥åœ°ç†è§£ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡å“²å­¦çš„æ ¹æœ¬ä¸åŒ&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…³é”®çš„å·®å¼‚ã€‚Serial GC çš„è®¾è®¡åˆè¡·æ˜¯&lt;strong&gt;ç®€å•å’Œä½å¼€é”€&lt;/strong&gt;ï¼Œå®ƒæ˜¯JVMåƒåœ¾å›æ”¶çš„â€œåŸºç¡€å½¢æ€â€ã€‚è€ŒParallel GC çš„è¯ç”Ÿæ˜¯ä¸ºäº†åœ¨å¤šæ ¸æœåŠ¡å™¨æˆä¸ºä¸»æµçš„æ—¶ä»£ï¼Œ&lt;strong&gt;æœ€å¤§é™åº¦åœ°å‹æ¦¨CPUèµ„æºï¼Œæå‡ç¨‹åºçš„æ•´ä½“è¿ç®—æ•ˆç‡&lt;/strong&gt;ï¼Œå³ååé‡ã€‚æ˜¯å¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ˜¯å®ç°è¿™ä¸€æ ¸å¿ƒç›®æ ‡çš„æ‰‹æ®µè€Œéæœ¬è´¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœé¡¿æ—¶é—´çš„è¾©è¯çœ‹å¾…&lt;/strong&gt;ï¼šè™½ç„¶Parallel GCåˆ©ç”¨å¤šçº¿ç¨‹åŠ é€Ÿäº†å•æ¬¡GCè¿‡ç¨‹ï¼Œä»è€Œç¼©çŸ­äº†å•æ¬¡STWçš„ç»å¯¹æ—¶é—´ï¼Œä½†å®ƒå¹¶æ²¡æœ‰åƒG1ã€ZGCé‚£æ ·é‡‡ç”¨å¤æ‚çš„å¹¶å‘æŠ€æœ¯æ¥å°è¯•ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹ä¸€èµ·å·¥ä½œã€‚å› æ­¤ï¼Œå®ƒä»ç„¶ä¼šäº§ç”Ÿ&lt;strong&gt;å¯æ„ŸçŸ¥çš„åœé¡¿&lt;/strong&gt;ã€‚åœ¨å †å†…å­˜éå¸¸å¤§æ—¶ï¼ŒFull GCçš„åœé¡¿æ—¶é—´å¯èƒ½ä¾ç„¶å¾ˆé•¿ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºåœ¨ç»™å®šçš„åœé¡¿æ—¶é—´å†…ï¼Œåˆ©ç”¨å¤šæ ¸èƒ½åŠ›æ¸…ç†äº†æ›´å¤šåƒåœ¾ï¼Œä»è€Œæå‡äº†ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªé€‚åº”è°ƒä¼˜&lt;/strong&gt;ï¼šParallel GC æ‹¥æœ‰ä¸€é¡¹Serial GCä¸å…·å¤‡çš„é«˜çº§èƒ½åŠ›â€”â€”è‡ªé€‚åº”è°ƒä¼˜ç­–ç•¥ï¼ˆé»˜è®¤å¼€å¯ï¼‰ã€‚JVMä¼šæ ¹æ®å®é™…çš„GCè¡¨ç°ï¼ˆå¦‚åœé¡¿æ—¶é—´ã€æ™‹å‡å¤§å°ï¼‰åŠ¨æ€è°ƒæ•´å †å†…å„ä»£çš„å¤§å°ç­‰å‚æ•°ï¼Œä»¥å°½å¯èƒ½æ¥è¿‘å¼€å‘è€…è®¾å®šçš„ååé‡æˆ–åœé¡¿æ—¶é—´ç›®æ ‡ï¼ˆå¦‚é€šè¿‡&lt;code&gt;-XX:GCTimeRatio&lt;/code&gt;å’Œ&lt;code&gt;-XX:MaxGCPauseMillis&lt;/code&gt;è®¾å®šï¼‰ã€‚è¿™ä½¿å¾—å®ƒåœ¨å¤æ‚ç¯å¢ƒä¸‹çš„è¡¨ç°æ¯”Serial GCæ›´æ™ºèƒ½ã€æ›´çµæ´»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©-1"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªä¸ªæ”¶é›†å™¨ï¼Œæœ€ç»ˆå–å†³äºä½ çš„åº”ç”¨éœ€æ±‚å’Œè¿è¡Œç¯å¢ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ çš„åº”ç”¨æ˜¯&lt;strong&gt;ç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ã€è¿è¡Œåœ¨èµ„æºå—é™çš„åµŒå…¥å¼è®¾å¤‡æˆ–å•æ ¸CPUä¸Š&lt;/strong&gt;ï¼Œæˆ–è€…ä½ å¸Œæœ›GCè¡Œä¸ºå°½å¯èƒ½ç®€å•å¯æ§ï¼Œ&lt;strong&gt;Serial GC&lt;/strong&gt;æ˜¯åˆé€‚çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ çš„åº”ç”¨æ˜¯&lt;strong&gt;è¿è¡Œåœ¨å¤šæ ¸æœåŠ¡å™¨ä¸Šçš„åå°è®¡ç®—ã€æ•°æ®åˆ†ææˆ–æ‰¹å¤„ç†ä»»åŠ¡&lt;/strong&gt;ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯åœ¨å°½å¯èƒ½çŸ­çš„æ—¶é—´å†…å®Œæˆå¤§é‡è¿ç®—ï¼Œè€Œå¯¹ç”¨æˆ·æ“ä½œå“åº”çš„åŠæ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œé‚£ä¹ˆ&lt;strong&gt;Parallel GC&lt;/strong&gt;çš„é«˜ååé‡ç‰¹æ€§å°†å¸¦æ¥å·¨å¤§ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å…¨é¢åœ°ç†è§£Serial GCå’ŒParallel GCçš„å¼‚åŒã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é€‰æ‹©æˆ–è°ƒä¼˜æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="parnew--cms"&gt;Parnew &amp;amp; CMS
&lt;/h2&gt;&lt;p&gt;ParNew å’Œ CMS æ˜¯ Java 8 åŠä¹‹å‰ç‰ˆæœ¬ä¸­ä¸€ä¸ªéå¸¸ç»å…¸çš„åƒåœ¾æ”¶é›†å™¨ç»„åˆï¼Œå°¤å…¶åœ¨å¯¹æœåŠ¡å“åº”é€Ÿåº¦æœ‰è¦æ±‚çš„åº”ç”¨ä¸­å¾ˆå¸¸è§ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒç‰¹ç‚¹å’Œåä½œå…³ç³»ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ParNew æ”¶é›†å™¨ (æ–°ç”Ÿä»£)&lt;/th&gt;
&lt;th&gt;CMS æ”¶é›†å™¨ (è€å¹´ä»£)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼©çŸ­æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´ (STW)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½åœé¡¿&lt;/strong&gt;ï¼Œè¿½æ±‚æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œåŒºåŸŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–°ç”Ÿä»£&lt;/td&gt;
&lt;td&gt;è€å¹´ä»£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šçº¿ç¨‹å¹¶è¡Œ&lt;/strong&gt;æ”¶é›†ï¼Œä¼šå‘ç”Ÿ STW&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;æ ‡è®°å’Œæ¸…é™¤ï¼ˆéƒ¨åˆ†é˜¶æ®µä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¶é›†ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡è®°-æ¸…é™¤ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šæ ¸CPUä¸‹æ–°ç”Ÿä»£å›æ”¶æ•ˆç‡é«˜ï¼›æ˜¯&lt;strong&gt;ä¸CMSé…åˆçš„å”¯ä¸€å¤šçº¿ç¨‹æ–°ç”Ÿä»£æ”¶é›†å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹¶å‘æ”¶é›†ï¼Œå¤§éƒ¨åˆ†å·¥ä½œæ— éœ€æš‚åœåº”ç”¨çº¿ç¨‹ï¼Œåœé¡¿æ—¶é—´çŸ­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å±€é™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»å±äºSTWæ”¶é›†å™¨ï¼Œåœé¡¿æ—¶é—´éšå †å¤§å°å¢é•¿&lt;/td&gt;
&lt;td&gt;äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼›å¯¹CPUèµ„æºæ•æ„Ÿï¼›å­˜åœ¨&amp;quot;å¹¶å‘æ¨¡å¼å¤±è´¥&amp;quot;é£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶è¯¦è§£"&gt;ğŸ”§ å·¥ä½œæœºåˆ¶è¯¦è§£
&lt;/h3&gt;&lt;h4 id="parnewæ–°ç”Ÿä»£çš„å¹¶è¡Œæ¸…é“å¤«"&gt;&lt;strong&gt;ParNewï¼šæ–°ç”Ÿä»£çš„å¹¶è¡Œæ¸…é“å¤«&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ParNew æœ¬è´¨ä¸Šæ˜¯ Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†å¤–ï¼Œå…¶ä½™è¡Œä¸ºï¼ˆå¦‚é‡‡ç”¨çš„å¤åˆ¶ç®—æ³•ã€STWæœºåˆ¶ã€å¯¹è±¡åˆ†é…è§„åˆ™ç­‰ï¼‰éƒ½ä¸ Serial æ”¶é›†å™¨ä¸€è‡´ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼šå½“æ–°ç”Ÿä»£çš„ Eden åŒºç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡ Minor GCã€‚ParNew ä¼šæš‚åœæ‰€æœ‰åº”ç”¨çº¿ç¨‹ï¼ˆSTWï¼‰ï¼Œç„¶åä½¿ç”¨å¤šä¸ª GC çº¿ç¨‹å¹¶è¡Œåœ°å°† Eden åŒºå’Œå…¶ä¸­ä¸€ä¸ª Survivorï¼ˆFromåŒºï¼‰ä¸­å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªç©ºçš„ Survivorï¼ˆToåŒºï¼‰ã€‚å­˜æ´»å¹´é¾„è¶…è¿‡é˜ˆå€¼ï¼ˆé»˜è®¤15ï¼‰æˆ– To åŒºç©ºé—´ä¸è¶³çš„å¯¹è±¡ä¼šè¢«æ™‹å‡åˆ°è€å¹´ä»£ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹é…ç½®&lt;/strong&gt;ï¼šé»˜è®¤å¼€å¯çš„æ”¶é›†çº¿ç¨‹æ•°ä¸ CPU æ ¸å¿ƒæ•°ç›¸åŒã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;-XX:ParallelGCThreads&lt;/code&gt;å‚æ•°æ¥è°ƒæ•´çº¿ç¨‹æ•°é‡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="cmsè€å¹´ä»£çš„å¹¶å‘ä½å»¶è¿Ÿå…ˆé”‹"&gt;&lt;strong&gt;CMSï¼šè€å¹´ä»£çš„å¹¶å‘ä½å»¶è¿Ÿå…ˆé”‹&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;CMS çš„è®¾è®¡ç›®æ ‡æ˜¯ä¸ºäº†è·å–æœ€çŸ­çš„å›æ”¶åœé¡¿æ—¶é—´ï¼Œå…¶å·¥ä½œè¿‡ç¨‹æ¯” ParNew å¤æ‚ï¼Œåˆ†ä¸ºå››ä¸ªæ ¸å¿ƒé˜¶æ®µ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹æ ‡è®°&lt;/strong&gt;ï¼šæ ‡è®° GC Roots èƒ½&lt;strong&gt;ç›´æ¥å…³è”&lt;/strong&gt;åˆ°çš„å¯¹è±¡ã€‚æ­¤é˜¶æ®µéœ€è¦ STWï¼Œä½†é€Ÿåº¦æå¿« ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ ‡è®°&lt;/strong&gt;ï¼šä»åˆå§‹æ ‡è®°çš„å¯¹è±¡å¼€å§‹ï¼Œ&lt;strong&gt;éå†æ•´ä¸ªå¯¹è±¡å›¾&lt;/strong&gt;ã€‚æ­¤é˜¶æ®µ&lt;strong&gt;ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œ&lt;/strong&gt;ï¼Œè€—æ—¶è¾ƒé•¿ï¼Œä½†ä¸ä¼šæš‚åœåº”ç”¨ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡æ–°æ ‡è®°&lt;/strong&gt;ï¼šä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´çš„&lt;strong&gt;æ ‡è®°å˜åŠ¨&lt;/strong&gt;ã€‚æ­¤é˜¶æ®µéœ€è¦ STWï¼Œæ—¶é—´é€šå¸¸æ¯”åˆå§‹æ ‡è®°é•¿ï¼Œä½†è¿œçŸ­äºå¹¶å‘æ ‡è®° ã€‚ä¸ºäº†å‡å°‘è¯¥é˜¶æ®µçš„æ‰«æå¼€é”€ï¼Œå¯ä»¥å¯ç”¨ &lt;code&gt;-XX:+CMSScavengeBeforeRemark&lt;/code&gt;å‚æ•°ï¼Œåœ¨é‡æ–°æ ‡è®°å‰å…ˆæ‰§è¡Œä¸€æ¬¡ Minor GC ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ¸…é™¤&lt;/strong&gt;ï¼šæ¸…ç†å¹¶å›æ”¶è¢«æ ‡è®°ä¸ºå¯å›æ”¶çš„å¯¹è±¡ã€‚æ­¤é˜¶æ®µä¹Ÿæ˜¯ä¸ç”¨æˆ·çº¿ç¨‹&lt;strong&gt;å¹¶å‘æ‰§è¡Œ&lt;/strong&gt;çš„ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¼˜ç¼ºç‚¹åˆ†æ"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ
&lt;/h3&gt;&lt;p&gt;äº†è§£å®ƒä»¬çš„å±€é™æ€§å¯¹äºæ­£ç¡®ä½¿ç”¨å’Œè°ƒä¼˜è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ParNew çš„ä¼˜ç¼ºç‚¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåœ¨å¤šæ ¸CPUç¯å¢ƒä¸‹èƒ½æœ‰æ•ˆç¼©çŸ­å•æ¬¡Minor GCçš„åœé¡¿æ—¶é—´ï¼›æˆç†Ÿç¨³å®šï¼Œæ˜¯ä¸CMSæ­é…çš„ä¸äºŒä¹‹é€‰ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå®ƒä»ç„¶æ˜¯STWæ”¶é›†å™¨ï¼Œåœ¨å †å†…å­˜è¾ƒå¤§æˆ–å¯¹è±¡å­˜æ´»ç‡è¾ƒé«˜æ—¶ï¼Œåœé¡¿æ—¶é—´ä¾ç„¶å¯è§‚ï¼›å¹¶ä¸”åªè´Ÿè´£æ–°ç”Ÿä»£ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CMS çš„ä¼˜ç¼ºç‚¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå…¶&lt;strong&gt;ä½åœé¡¿&lt;/strong&gt;ç‰¹æ€§ä½¿å…¶éå¸¸é€‚åˆWebæœåŠ¡å™¨ã€åˆ†å¸ƒå¼ç³»ç»Ÿç­‰å¯¹å“åº”é€Ÿåº¦æ•æ„Ÿçš„åº”ç”¨ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç¢ç‰‡&lt;/strong&gt;ï¼šç”±äºä½¿ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚å¯ä»¥é€šè¿‡å‚æ•° &lt;code&gt;-XX:+UseCMSCompactAtFullCollection&lt;/code&gt;ï¼ˆé»˜è®¤å¼€å¯ï¼‰åœ¨Full GCæ—¶è¿›è¡Œç¢ç‰‡æ•´ç†ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;-XX:CMSFullGCsBeforeCompaction&lt;/code&gt;è®¾ç½®æ‰§è¡Œå¤šå°‘æ¬¡ä¸å‹ç¼©çš„Full GCåå†è¿›è¡Œä¸€æ¬¡å¸¦å‹ç¼©çš„Full GC ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹CPUèµ„æºæ•æ„Ÿ&lt;/strong&gt;ï¼šå¹¶å‘é˜¶æ®µä¼šä¸ç”¨æˆ·çº¿ç¨‹äº‰æŠ¢CPUèµ„æºï¼Œå¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºååé‡é™ä½ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&amp;ldquo;å¹¶å‘æ¨¡å¼å¤±è´¥&amp;rdquo;&lt;/strong&gt;ï¼šåœ¨å¹¶å‘å‘¨æœŸæ‰§è¡ŒæœŸé—´ï¼Œå¦‚æœè€å¹´ä»£ç©ºé—´è¢«å¿«é€Ÿå¡«æ»¡ï¼Œå¯èƒ½æ¥ä¸åŠæ”¶é›†ï¼Œä¼šè§¦å‘&amp;quot;Concurrent Mode Failure&amp;quot;ï¼Œæ­¤æ—¶JVMä¼šä¸´æ—¶å¯ç”¨Serial Oldæ”¶é›†å™¨è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¯¼è‡´é•¿æ—¶é—´åœé¡¿ã€‚å¯é€šè¿‡ &lt;code&gt;-XX:CMSInitiatingOccupancyFraction&lt;/code&gt;å‚æ•°ï¼ˆå¦‚è®¾ç½®ä¸º70ï¼‰æå‰è§¦å‘CMS GCï¼Œä¸ºæµ®åŠ¨åƒåœ¾é¢„ç•™ç©ºé—´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ®åŠ¨åƒåœ¾&lt;/strong&gt;ï¼šå¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹äº§ç”Ÿçš„åƒåœ¾åªèƒ½ç•™åˆ°ä¸‹ä¸€æ¬¡GCæ‰èƒ½è¢«æ¸…ç† ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åä½œä¸è°ƒä¼˜"&gt;ğŸ¤ åä½œä¸è°ƒä¼˜
&lt;/h3&gt;&lt;p&gt;ParNew å’Œ CMS çš„ååŒå·¥ä½œï¼Œæ—¨åœ¨é™ä½æ•´ä¸ªGCè¿‡ç¨‹ä¸­çš„åœé¡¿æ—¶é—´ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åä½œæ¨¡å¼&lt;/strong&gt;ï¼šé€šå¸¸ç”± ParNew è´Ÿè´£æ–°ç”Ÿä»£çš„å›æ”¶ï¼Œå­˜æ´»åˆ°ä¸€å®šå¹´é¾„çš„å¯¹è±¡è¢«æ™‹å‡åˆ°è€å¹´ä»£ã€‚CMS åˆ™åœ¨åå°å¹¶å‘åœ°ç®¡ç†è€å¹´ä»£ç©ºé—´ï¼Œå°½å¯èƒ½å‡å°‘Full GCçš„å‘ç”Ÿ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬é…ç½®å‚æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# å¯ç”¨CMSï¼ˆä¼šè‡ªåŠ¨å¯ç”¨ParNewä½œä¸ºæ–°ç”Ÿä»£æ”¶é›†å™¨ï¼‰
-XX:+UseConcMarkSweepGC
# è®¾ç½®CMSå¹¶è¡Œçº¿ç¨‹æ•°
-XX:ParallelGCThreads=4
# åœ¨CMSé‡æ–°æ ‡è®°å‰æ‰§è¡Œä¸€æ¬¡Minor GCï¼Œä»¥å‡å°‘é‡æ–°æ ‡è®°é˜¶æ®µçš„æ‰«æèŒƒå›´
-XX:+CMSScavengeBeforeRemark
# è®¾ç½®è€å¹´ä»£ç©ºé—´ä½¿ç”¨ç‡è¾¾åˆ°å¤šå°‘æ—¶è§¦å‘CMSæ”¶é›†
-XX:CMSInitiatingOccupancyFraction=70
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¼€å¯GCæ—¥å¿—ï¼ˆ&lt;code&gt;-XX:+PrintGCDetails -XX:+PrintGCDateStamps&lt;/code&gt;ï¼‰æ˜¯ç›‘æ§å’Œè°ƒä¼˜çš„åŸºç¡€ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç°çŠ¶ä¸é€‰æ‹©"&gt;ğŸ’¡ ç°çŠ¶ä¸é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;ä»JDK 9å¼€å§‹ï¼ŒCMSå·²è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ˆDeprecatedï¼‰ï¼Œå¹¶åœ¨åç»­ç‰ˆæœ¬ä¸­è¢«ç§»é™¤&lt;/strong&gt; ã€‚å…¶æ ¹æœ¬åŸå› åœ¨äºå…¶å¤æ‚çš„ä»£ç å®ç°å’Œæ— æ³•é¿å…çš„å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œä½¿å¾—ç»´æŠ¤å’Œè¿›ä¸€æ­¥ä¼˜åŒ–å˜å¾—å›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç°ä»£Javaåº”ç”¨ä¸­ï¼Œ&lt;strong&gt;G1 (Garbage-First)&lt;/strong&gt; æ”¶é›†å™¨é€šå¸¸è¢«è§†ä¸ºCMSçš„ç»§ä»»è€…ï¼Œå®ƒåœ¨å»¶è¿Ÿå’Œååé‡ä¹‹é—´æä¾›äº†æ›´å¥½çš„å¹³è¡¡ï¼Œå¹¶ä¸”é€‚ç”¨äºæ›´å¤§çš„å †å†…å­˜ã€‚è€Œå¯¹äºè¿½æ±‚æè‡´ä½å»¶è¿Ÿçš„åº”ç”¨ï¼Œ&lt;strong&gt;ZGC&lt;/strong&gt; æˆ– &lt;strong&gt;Shenandoah&lt;/strong&gt; æ˜¯æ›´å‰æ²¿çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ ParNew å’Œ CMSã€‚å¦‚æœä½ å¯¹ä» ParNew+CMS è¿ç§»åˆ°ç°ä»£åƒåœ¾æ”¶é›†å™¨æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="cms"&gt;CMS
&lt;/h2&gt;&lt;p&gt;ç†è§£ CMS çš„ &lt;strong&gt;â€œå¹¶å‘â€ä¸â€œå¹¶è¡Œâ€ç»“åˆ&lt;/strong&gt; ç¡®å®æ˜¯æŒæ¡å…¶è®¾è®¡ç²¾é«“çš„å…³é”®ã€‚ç®€å•æ¥è¯´ï¼Œè¿™æŒ‡çš„æ˜¯ CMS åœ¨åƒåœ¾å›æ”¶çš„ä¸åŒé˜¶æ®µï¼Œ&lt;strong&gt;çµæ´»è¿ç”¨äº†ä¸¤ç§ä¸åŒçš„å¤šçº¿ç¨‹å·¥ä½œæ¨¡å¼&lt;/strong&gt;ï¼Œä»¥è¾¾åˆ°å…¶æ ¸å¿ƒç›®æ ‡â€”â€”æœ€å°åŒ–åº”ç”¨çº¿ç¨‹çš„åœé¡¿æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ ä¸€ç›®äº†ç„¶ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†CMSå„ä¸ªé˜¶æ®µæ˜¯å¦‚ä½•è¿ç”¨å¹¶å‘å’Œå¹¶è¡Œç­–ç•¥çš„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é˜¶æ®µ&lt;/th&gt;
&lt;th&gt;å·¥ä½œæ¨¡å¼&lt;/th&gt;
&lt;th&gt;æ˜¯å¦ STW&lt;/th&gt;
&lt;th&gt;çº¿ç¨‹å…³ç³»ä¸ç›®æ ‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹æ ‡è®°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šä¸ªGCçº¿ç¨‹å¹¶è¡Œå·¥ä½œ&lt;/strong&gt;ï¼Œåº”ç”¨çº¿ç¨‹æš‚åœã€‚ç›®æ ‡æ˜¯å¿«é€Ÿæ ‡è®°å®Œç›´æ¥å…³è”å¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘æ ‡è®°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GCçº¿ç¨‹ä¸åº”ç”¨çº¿ç¨‹å¹¶å‘æ‰§è¡Œ&lt;/strong&gt;ã€‚ç›®æ ‡æ˜¯éå†å¯¹è±¡å›¾ï¼Œæ­¤é˜¶æ®µè€—æ—¶è¾ƒé•¿ä½†ä¸æš‚åœåº”ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‡æ–°æ ‡è®°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šä¸ªGCçº¿ç¨‹å¹¶è¡Œå·¥ä½œ&lt;/strong&gt;ï¼Œåº”ç”¨çº¿ç¨‹æš‚åœã€‚ç›®æ ‡æ˜¯ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å˜åŠ¨çš„å¼•ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘æ¸…é™¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GCçº¿ç¨‹ä¸åº”ç”¨çº¿ç¨‹å¹¶å‘æ‰§è¡Œ&lt;/strong&gt;ã€‚ç›®æ ‡æ˜¯æ¸…ç†åƒåœ¾å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸¤ç§æ¨¡å¼"&gt;ğŸ” æ·±å…¥ç†è§£ä¸¤ç§æ¨¡å¼
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªè®¾è®¡èƒŒåçš„é€»è¾‘éå¸¸å·§å¦™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶è¡Œçš„ä»·å€¼ï¼šé€Ÿæˆ˜é€Ÿå†³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CMS çŸ¥é“å®Œå…¨é¿å…åœé¡¿æ˜¯ä¸ç°å®çš„ï¼Œä½†å®ƒè¿½æ±‚å°†å¿…è¦çš„åœé¡¿æ—¶é—´å‹ç¼©åˆ°æè‡´ã€‚åœ¨&lt;strong&gt;åˆå§‹æ ‡è®°&lt;/strong&gt;å’Œ&lt;strong&gt;é‡æ–°æ ‡è®°&lt;/strong&gt;è¿™ä¸¤ä¸ªä¸å¾—ä¸æš‚åœåº”ç”¨çº¿ç¨‹çš„é˜¶æ®µï¼Œå®ƒé‡‡ç”¨äº†&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;ç­–ç•¥ã€‚è¿™æ„å‘³ç€ JVM ä¼šå¯åŠ¨&lt;strong&gt;å¤šä¸ªåƒåœ¾æ”¶é›†çº¿ç¨‹&lt;/strong&gt;åŒæ—¶å¹²æ´»ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿ï¼Œä»¥æœ€å¿«é€Ÿåº¦å®Œæˆæ ‡è®°ä»»åŠ¡ï¼Œä»è€Œå°†è¿™ä¸¤æ¬¡åœé¡¿çš„æ—¶é—´ç¼©è‡³æœ€çŸ­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘çš„ä»·å€¼ï¼šååŒå·¥ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è€Œæœ€è€—æ—¶çš„&lt;strong&gt;æ ‡è®°&lt;/strong&gt;å’Œ&lt;strong&gt;æ¸…é™¤&lt;/strong&gt;å·¥ä½œï¼ŒCMS åˆ™é‡‡ç”¨äº†&lt;strong&gt;å¹¶å‘&lt;/strong&gt;ç­–ç•¥ã€‚åœ¨è¿™ä¸¤ä¸ªé˜¶æ®µï¼Œ&lt;strong&gt;åƒåœ¾æ”¶é›†çº¿ç¨‹å’Œåº”ç”¨çº¿ç¨‹æ˜¯åŒæ—¶è¿è¡Œçš„&lt;/strong&gt;ã€‚ä½ çš„ç¨‹åºå¯ä»¥ç»§ç»­å“åº”ç”¨æˆ·è¯·æ±‚ã€å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè€ŒGCåˆ™åœ¨åå°é»˜é»˜åœ°è¿½è¸ªå­˜æ´»å¯¹è±¡ã€æ¸…ç†åƒåœ¾å†…å­˜ã€‚è¿™æå¤§åœ°å‡å°‘äº†åƒåœ¾æ”¶é›†å¯¹åº”ç”¨å“åº”é€Ÿåº¦çš„å½±å“ï¼Œæ˜¯CMSå®ç°ä½å»¶è¿Ÿç›®æ ‡çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è®¾è®¡æƒè¡¡ä¸å½±å“"&gt;âš–ï¸ è®¾è®¡æƒè¡¡ä¸å½±å“
&lt;/h3&gt;&lt;p&gt;è¿™ç§å·§å¦™çš„ç»“åˆä¹Ÿå¸¦æ¥äº†ä¸€äº›ç‰¹æœ‰çš„æƒè¡¡å’ŒæŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPUèµ„æºç«äº‰&lt;/strong&gt;ï¼šå¹¶å‘é˜¶æ®µGCçº¿ç¨‹ä¼šä¸åº”ç”¨çº¿ç¨‹äº‰æŠ¢CPUæ—¶é—´ç‰‡ï¼Œå¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºçš„&lt;strong&gt;ååé‡æœ‰æ‰€ä¸‹é™&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ®åŠ¨åƒåœ¾&lt;/strong&gt;ï¼šå› ä¸ºåœ¨å¹¶å‘æ¸…ç†è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·çº¿ç¨‹è¿˜åœ¨è¿è¡Œï¼Œä¼šæŒç»­äº§ç”Ÿæ–°çš„åƒåœ¾å¯¹è±¡ã€‚è¿™äº›â€œæµ®åŠ¨åƒåœ¾â€æ— æ³•åœ¨æœ¬æ¬¡æ”¶é›†ä¸­è¢«æ¸…é™¤ï¼Œåªèƒ½ç­‰å¾…ä¸‹ä¸€æ¬¡GCã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç¢ç‰‡&lt;/strong&gt;ï¼šç”±äºCMSçš„æ¸…é™¤é˜¶æ®µæ˜¯å¹¶å‘è¿›è¡Œçš„ï¼Œä¸ºäº†é¿å…ç§»åŠ¨å¯¹è±¡å¸¦æ¥çš„å¤æ‚åŒæ­¥é—®é¢˜ï¼Œå®ƒé‡‡ç”¨äº†&lt;strong&gt;æ ‡è®°-æ¸…é™¤ç®—æ³•&lt;/strong&gt;è€Œéæ ‡è®°-æ•´ç†ç®—æ³•ã€‚è¿™ä¼šå¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Œå¯èƒ½åœ¨æœªæ¥è§¦å‘ä¸€æ¬¡æ›´è€—æ—¶çš„Full GCã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æ¼”è¿›"&gt;ğŸ“š æ€»ç»“ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒCMSé€šè¿‡å°†è€—æ—¶æœ€é•¿çš„&lt;strong&gt;æ ‡è®°&lt;/strong&gt;å’Œ&lt;strong&gt;æ¸…é™¤&lt;/strong&gt;ä»»åŠ¡ä¸åº”ç”¨ç¨‹åº&lt;strong&gt;å¹¶å‘æ‰§è¡Œ&lt;/strong&gt;ï¼Œå¹¶å°†ä¸¤æ¬¡å¿…è¦çš„åœé¡¿ï¼ˆ&lt;strong&gt;åˆå§‹æ ‡è®°&lt;/strong&gt;å’Œ&lt;strong&gt;é‡æ–°æ ‡è®°&lt;/strong&gt;ï¼‰è®¾è®¡æˆ&lt;strong&gt;å¹¶è¡Œå¤„ç†&lt;/strong&gt;ï¼Œå®ç°äº†åœ¨åƒåœ¾å›æ”¶æœŸé—´çš„ä½åœé¡¿ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºä¸Šè¿°çš„ä¸€äº›å›ºæœ‰ç¼ºç‚¹ï¼ˆå¦‚å†…å­˜ç¢ç‰‡ã€å¯¹CPUæ•æ„Ÿï¼‰ï¼Œ&lt;strong&gt;CMSåœ¨JDK 9ä¸­å·²è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ˆDeprecatedï¼‰ï¼Œå¹¶åœ¨JDK 14ä¸­è¢«ç§»é™¤&lt;/strong&gt;ã€‚ å®ƒçš„è®¾è®¡æ€æƒ³è¢«æ›´å…ˆè¿›çš„åƒåœ¾æ”¶é›†å™¨å¦‚ &lt;strong&gt;G1&lt;/strong&gt; å’Œ &lt;strong&gt;ZGC&lt;/strong&gt; æ‰€ç»§æ‰¿å’Œå‘å±•ã€‚G1åŒæ ·é‡‡ç”¨äº†å¹¶è¡Œä¸å¹¶å‘ç»“åˆçš„æ€è·¯ï¼Œä½†é€šè¿‡åˆ†åŒºå’Œé¢„æµ‹æ¨¡å‹æä¾›äº†æ›´å¯é¢„æµ‹çš„åœé¡¿ï¼›è€ŒZGCå’ŒShenandoahåˆ™è‡´åŠ›äºå®ç°å‡ ä¹å…¨æµç¨‹çš„å¹¶å‘ï¼Œå°†åœé¡¿æ—¶é—´è¿›ä¸€æ­¥æ¨å‘æè‡´ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£CMSçš„å·¥ä½œæœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="å¹¶å‘--å¹¶è¡Œ"&gt;å¹¶å‘ &amp;amp; å¹¶è¡Œ
&lt;/h2&gt;&lt;p&gt;å¹¶å‘å’Œå¹¶è¡Œæ˜¯è®¡ç®—æœºç§‘å­¦ä¸­ä¸¤ä¸ªå¯†åˆ‡ç›¸å…³ä½†æœ¬è´¨ä¸åŒçš„æ¦‚å¿µï¼Œå®ƒä»¬æè¿°äº†ä»»åŠ¡æ‰§è¡Œçš„ä¸¤ç§ä¸åŒæ–¹å¼ã€‚ä¸ºäº†å¸®ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»å®ƒä»¬çš„ä¸»è¦ç‰¹ç‚¹ï¼Œç„¶åå†æ·±å…¥èŠèŠç»†èŠ‚å’Œåº”ç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªå¤„ç†å™¨&lt;strong&gt;äº¤æ›¿å¤„ç†&lt;/strong&gt;å¤šä¸ªä»»åŠ¡&lt;/td&gt;
&lt;td&gt;å¤šä¸ªå¤„ç†å™¨&lt;strong&gt;åŒæ—¶å¤„ç†&lt;/strong&gt;å¤šä¸ªä»»åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®è§‚ä¸ŠåŒæ—¶å‘ç”Ÿ&lt;/strong&gt;ï¼Œå¾®è§‚ä¸Šä»»åŠ¡äº¤æ›¿æ‰§è¡Œï¼Œå…·å¤‡å¤„ç†å¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‰©ç†ä¸Šçš„åŒæ—¶æ‰§è¡Œ&lt;/strong&gt;ï¼Œæ‹¥æœ‰åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶ä¾èµ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ä¾èµ–å¤šæ ¸ï¼Œå•æ ¸CPUå³å¯å®ç°ï¼ˆé€šè¿‡æ—¶é—´ç‰‡è½®è½¬ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜åº¦ä¾èµ–å¤šæ ¸CPUæˆ–å¤šå°å¤„ç†å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³æ³¨ç„¦ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…³æ³¨çš„æ˜¯&lt;strong&gt;ä»»åŠ¡çš„ç»„ç»‡ä¸è°ƒåº¦&lt;/strong&gt;ï¼Œå³å¦‚ä½•åº”å¯¹å¤šä»»åŠ¡çš„èƒ½åŠ›&lt;/td&gt;
&lt;td&gt;å…³æ³¨çš„æ˜¯&lt;strong&gt;ä»»åŠ¡çš„æ‰§è¡Œ&lt;/strong&gt;ï¼Œå³å¦‚ä½•åˆ©ç”¨å¤šæ ¸èµ„æºåŠ é€Ÿè®¡ç®—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»»åŠ¡æ‰§è¡Œæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡åœ¨æ—¶é—´ä¸Šäº¤æ›¿æ‰§è¡Œï¼Œ&lt;strong&gt;åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨è¿è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡å¯ä»¥åœ¨&lt;strong&gt;åŒä¸€æ—¶åˆ»è¢«ä¸åŒçš„å¤„ç†å™¨æ ¸å¿ƒåŒæ—¶æ‰§è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æé«˜ç³»ç»Ÿ&lt;strong&gt;å“åº”èƒ½åŠ›&lt;/strong&gt;å’Œ&lt;strong&gt;èµ„æºåˆ©ç”¨ç‡&lt;/strong&gt;ï¼ˆå¦‚ä¸€ä¸ªä»»åŠ¡ç­‰å¾…IOæ—¶ï¼ŒCPUå¯æ‰§è¡Œå¦ä¸€ä¸ªä»»åŠ¡ï¼‰&lt;/td&gt;
&lt;td&gt;æé«˜ç³»ç»Ÿçš„&lt;strong&gt;è®¡ç®—é€Ÿåº¦&lt;/strong&gt;å’Œ&lt;strong&gt;ååé‡&lt;/strong&gt;ï¼Œç¼©çŸ­å•ä¸ªå¤§å‹ä»»åŠ¡çš„å®Œæˆæ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹æ¯”å–»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªäººï¼ˆå•æ ¸CPUï¼‰&lt;strong&gt;äº¤æ›¿ç…§çœ‹&lt;/strong&gt;ä¸¤å£é”…åšé¥­&lt;/td&gt;
&lt;td&gt;ä¸¤ä¸ªäººï¼ˆåŒæ ¸CPUï¼‰&lt;strong&gt;åŒæ—¶å„è‡ªç‚’&lt;/strong&gt;ä¸€é“èœ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸¤è€…çš„å†…æ¶µä¸å…³ç³»"&gt;ğŸ’¡ æ·±å…¥ç†è§£ä¸¤è€…çš„å†…æ¶µä¸å…³ç³»
&lt;/h3&gt;&lt;p&gt;ç†è§£äº†åŸºæœ¬åŒºåˆ«åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒä»¬å„è‡ªçš„å†…æ¶µä»¥åŠç›¸äº’ä¹‹é—´æœ‰è¶£çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘çš„æ ¸å¿ƒæ˜¯â€œä»»åŠ¡äº¤æ›¿â€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹¶å‘æ˜¯ä¸ºäº†è®©ç³»ç»Ÿèƒ½å¤Ÿâ€œåŒæ—¶â€å¤„ç†å¤šä¸ªä»»åŠ¡è€Œæå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å•æ ¸CPUæ—¶ä»£ï¼Œé€šè¿‡&lt;strong&gt;æ—¶é—´ç‰‡è½®è½¬&lt;/strong&gt;ç­‰æŠ€æœ¯ï¼ŒCPUå¿«é€Ÿåœ°åœ¨å¤šä¸ªä»»åŠ¡é—´åˆ‡æ¢ã€‚ç”±äºåˆ‡æ¢é€Ÿåº¦æå¿«ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥è¿™äº›ä»»åŠ¡åƒæ˜¯åœ¨åŒæ—¶å‰è¿›ï¼Œä½†æœ¬è´¨ä¸Šï¼Œåœ¨ä»»ä½•ä¸€ä¸ªç²¾ç¡®çš„æ—¶é—´ç‚¹ä¸Šï¼Œåªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨å ç”¨CPUèµ„æºã€‚å®ƒçš„ä¸»è¦ä»·å€¼åœ¨äº&lt;strong&gt;é¿å…CPUèµ„æºå› ç­‰å¾…ï¼ˆå¦‚ç­‰å¾…ç£ç›˜I/Oã€ç½‘ç»œå“åº”ï¼‰è€Œé—²ç½®&lt;/strong&gt;ï¼Œä»è€Œæå‡ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡å’Œå“åº”é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶è¡Œçš„æ ¸å¿ƒæ˜¯â€œåŒæ—¶æ‰§è¡Œâ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹¶è¡Œåˆ™å»ºç«‹åœ¨å¤šæ ¸CPUæˆ–åˆ†å¸ƒå¼ç³»ç»Ÿçš„ç¡¬ä»¶åŸºç¡€ä¸Šï¼Œå®ƒè¿½æ±‚çš„æ˜¯å°†ä¸€ä¸ªå¤§ä»»åŠ¡åˆ†è§£æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶åˆ†é…ç»™ä¸åŒçš„è®¡ç®—å•å…ƒ&lt;strong&gt;çœŸæ­£åŒæ—¶å¤„ç†&lt;/strong&gt;ï¼Œä»è€Œç¼©çŸ­æ•´ä½“è®¡ç®—æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ªåŒ…å«å¤§é‡æ•°æ®çš„æ•°ç»„è¿›è¡Œè¿ç®—ï¼Œå¯ä»¥å°†å…¶åˆ†æˆå‡ éƒ¨åˆ†ï¼Œç”±ä¸åŒçš„CPUæ ¸å¿ƒåŒæ—¶è®¡ç®—ï¼Œæœ€åæ±‡æ€»ç»“æœã€‚å®ƒçš„ç›®æ ‡æ˜¯&lt;strong&gt;æœ€å¤§åŒ–è®¡ç®—æ•ˆç‡&lt;/strong&gt;ï¼Œå¸¸ç”¨äºç§‘å­¦è®¡ç®—ã€å¤§æ•°æ®åˆ†æç­‰è®¡ç®—å¯†é›†å‹åœºæ™¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸¤è€…çš„å…³ç³»ï¼šå¹¶è¡Œæ˜¯å¹¶å‘çš„â€œçœŸå­é›†â€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š&lt;strong&gt;å¹¶è¡Œæ˜¯å¹¶å‘çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œä½†å¹¶å‘ä¸ä¸€å®šåŒ…å«å¹¶è¡Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘è€Œä¸å¹¶è¡Œ&lt;/strong&gt;ï¼šåœ¨å•æ ¸CPUä¸Šï¼Œä½ å¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼ˆå¹¶å‘ï¼‰ï¼Œä½†è¿™äº›çº¿ç¨‹åªèƒ½äº¤æ›¿æ‰§è¡Œï¼Œæ— æ³•çœŸæ­£åšåˆ°åŒä¸€æ—¶åˆ»ä¸€èµ·è¿è¡Œï¼ˆä¸å¹¶è¡Œï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘ä¸”å¹¶è¡Œ&lt;/strong&gt;ï¼šåœ¨å¤šæ ¸CPUä¸Šï¼Œå¤šä¸ªçº¿ç¨‹ä¸ä»…å¯ä»¥è¢«å¹¶å‘åœ°è°ƒåº¦ç®¡ç†ï¼Œè¿˜å¯ä»¥è¢«åˆ†é…åˆ°ä¸åŒçš„æ ¸å¿ƒä¸Šå¹¶è¡Œæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå¹¶è¡Œçš„å®ç°é€šå¸¸éœ€è¦å¹¶å‘çš„è°ƒåº¦ç®¡ç†ä½œä¸ºæ”¯æ’‘ï¼Œè€Œå¹¶å‘çš„èƒ½åŠ›åˆ™é€šè¿‡å¹¶è¡Œå¾—ä»¥çœŸæ­£å‘æŒ¥ç¡¬ä»¶æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸­çš„ä½“ç°"&gt;ğŸ› ï¸ å®é™…åº”ç”¨ä¸­çš„ä½“ç°
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ç¼–ç¨‹å’Œç³»ç»Ÿè®¾è®¡ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µæ— å¤„ä¸åœ¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ç¼–ç¨‹æ¨¡å‹ä¸­&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šçº¿ç¨‹ç¼–ç¨‹&lt;/strong&gt;æ˜¯å®ç°å¹¶å‘æœ€å¸¸è§çš„æ‰‹æ®µã€‚ä¸€ä¸ªè¿›ç¨‹å†…çš„å¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´ï¼Œä½¿å¾—é€šä¿¡ä¾¿æ·ï¼Œä½†ä¹Ÿå¸¦æ¥äº†çº¿ç¨‹å®‰å…¨ã€æ­»é”ç­‰æŒ‘æˆ˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥ç¼–ç¨‹&lt;/strong&gt;ï¼ˆå¦‚ä½¿ç”¨å›è°ƒã€Promiseã€async/awaitï¼‰æ˜¯å¦ä¸€ç§å¤„ç†é«˜å¹¶å‘I/Oæ“ä½œçš„é«˜æ•ˆæ¨¡å‹ï¼Œå®ƒé¿å…äº†çº¿ç¨‹é˜»å¡ï¼Œç”¨æ›´å°‘çš„èµ„æºå¤„ç†å¤§é‡è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ç³»ç»Ÿæ¶æ„ä¸Š&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼ç³»ç»Ÿ&lt;/strong&gt;æ˜¯å¹¶å‘çš„ç»ˆæä½“ç°ï¼Œå°†åºå¤§çš„ä»»åŠ¡åˆ†å¸ƒåˆ°ç½‘ç»œä¸­æˆåƒä¸Šä¸‡çš„è®¡ç®—æœºä¸Šå¹¶è¡Œå¤„ç†ï¼Œå¦‚Hadoop/MapReduceæ¡†æ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-14"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;å¹¶å‘æ˜¯å…³äºâ€œç»“æ„â€çš„æ¦‚å¿µï¼Œè§£å†³çš„æ˜¯å¦‚ä½•è®¾è®¡ç¨‹åºä»¥ä¾¿èƒ½å¤„ç†å¤šä¸ªä»»åŠ¡ï¼›è€Œå¹¶è¡Œæ˜¯å…³äºâ€œæ‰§è¡Œâ€çš„æ¦‚å¿µï¼Œè§£å†³çš„æ˜¯å¦‚ä½•åˆ©ç”¨å¤šæ ¸èµ„æºæ¥åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç°ä»£å¤šæ ¸å¤„ç†å™¨æˆä¸ºæ ‡é…çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬ç¼–å†™çš„ç¨‹åºå¾€å¾€éœ€è¦åŒæ—¶è€ƒè™‘å¹¶å‘å’Œå¹¶è¡Œï¼šå…ˆé€šè¿‡å¹¶å‘è®¾è®¡ï¼ˆå¦‚å¤šçº¿ç¨‹ï¼‰è®©ç¨‹åºå…·å¤‡å¤„ç†å¤šä»»åŠ¡çš„èƒ½åŠ›ï¼Œç„¶åä¾é ç¡¬ä»¶å¹¶è¡Œæ€§æ¥çœŸæ­£æå‡æ‰§è¡Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£è¿™ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼å¦‚æœä½ å¯¹å…·ä½“çš„ç¼–ç¨‹å®ç°æˆ–æŸä¸ªåº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åƒåœ¾å›æ”¶ä¸­çš„å¹¶è¡Œä¸å¹¶å‘"&gt;åƒåœ¾å›æ”¶ä¸­çš„å¹¶è¡Œä¸å¹¶å‘
&lt;/h2&gt;&lt;p&gt;æ‚¨å¯¹åƒåœ¾æ”¶é›†å™¨ä¸­â€œå¹¶è¡Œâ€å’Œâ€œå¹¶å‘â€æ¦‚å¿µçš„ç†è§£åŸºæœ¬æ˜¯æ­£ç¡®çš„ï¼Œè¿™ç¡®å®æ˜¯ç†è§£ç°ä»£åƒåœ¾æ”¶é›†å™¨å·¥ä½œåŸç†çš„å…³é”®ã€‚ä¸ºäº†æ›´æ¸…æ™°åœ°å±•ç¤ºå®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«å’Œè”ç³»ï¼Œæˆ‘å‡†å¤‡äº†ä¸‹é¢è¿™ä¸ªè¡¨æ ¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡&lt;strong&gt;å¤šæ¡åƒåœ¾æ”¶é›†å™¨çº¿ç¨‹&lt;/strong&gt;ä¹‹é—´çš„å…³ç³»ï¼Œå³è¿™äº›çº¿ç¨‹&lt;strong&gt;åŒæ—¶å·¥ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡&lt;strong&gt;åƒåœ¾æ”¶é›†å™¨çº¿ç¨‹&lt;/strong&gt;ä¸&lt;strong&gt;ç”¨æˆ·åº”ç”¨ç¨‹åºçº¿ç¨‹&lt;/strong&gt;ä¹‹é—´çš„å…³ç³»ï¼Œå³å®ƒä»¬&lt;strong&gt;åŒæ—¶è¿è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œæ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šæ¡GCçº¿ç¨‹ååŒå·¥ä½œï¼Œä½†æ­¤æ—¶&lt;strong&gt;ç”¨æˆ·çº¿ç¨‹é€šå¸¸å¤„äºç­‰å¾…çŠ¶æ€ï¼ˆSTWï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;GCçº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹&lt;strong&gt;äº¤æ›¿æˆ–åŒæ—¶æ‰§è¡Œ&lt;/strong&gt;ï¼Œç”¨æˆ·çº¿ç¨‹æ— éœ€å®Œå…¨æš‚åœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨å¤šæ ¸CPUèµ„æºï¼Œ&lt;strong&gt;åŠ é€Ÿå•æ¬¡åƒåœ¾å›æ”¶è¿‡ç¨‹&lt;/strong&gt;ï¼Œæå‡å›æ”¶æ•ˆç‡&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡å°‘åƒåœ¾æ”¶é›†å¯¼è‡´çš„åº”ç”¨ç¨‹åºåœé¡¿æ—¶é—´&lt;/strong&gt;ï¼Œæå‡ç³»ç»Ÿå“åº”é€Ÿåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³æ³¨ç„¦ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…³æ³¨åƒåœ¾æ”¶é›†ä»»åŠ¡æœ¬èº«çš„&lt;strong&gt;æ‰§è¡Œæ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…³æ³¨åƒåœ¾æ”¶é›†è¿‡ç¨‹å¯¹åº”ç”¨ç¨‹åº&lt;strong&gt;å“åº”çš„å¹²æ‰°ç¨‹åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯”å–»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¢æ´¾å¤šåæ¸…æ´å·¥ï¼ˆå¤šçº¿ç¨‹ï¼‰ä¸€èµ·&lt;strong&gt;å¿«é€Ÿ&lt;/strong&gt;æ‰“æ‰«ä¸€ä¸ªæˆ¿é—´ï¼Œä½†æ‰“æ‰«æ—¶æˆ¿é—´æš‚åœä½¿ç”¨ï¼ˆSTWï¼‰&lt;/td&gt;
&lt;td&gt;å®‰æ’æ¸…æ´å·¥åœ¨åŠå…¬å®¤æœ‰äººå·¥ä½œæ—¶&lt;strong&gt;ç©¿æ’è¿›è¡Œ&lt;/strong&gt;ä¿æ´ï¼Œå°½é‡ä¸å½±å“å¤§å®¶å·¥ä½œï¼ˆä½åœé¡¿ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¹¶è¡Œä¸å¹¶å‘å¦‚ä½•åä½œ"&gt;ğŸ”„ å¹¶è¡Œä¸å¹¶å‘å¦‚ä½•åä½œ
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…çš„åƒåœ¾æ”¶é›†å™¨ä¸­ï¼Œ&lt;strong&gt;å¹¶è¡Œå’Œå¹¶å‘å¾€å¾€æ˜¯ååŒå·¥ä½œçš„&lt;/strong&gt;ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„æ€§èƒ½æ•ˆæœã€‚ä»¥ç»å…¸çš„CMSæ”¶é›†å™¨ä¸ºä¾‹ï¼Œå®ƒçš„å·¥ä½œæµç¨‹å°±æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ç§åä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹æ ‡è®°å’Œé‡æ–°æ ‡è®°&lt;/strong&gt;é˜¶æ®µï¼šè¿™ä¸¤ä¸ªé˜¶æ®µæ˜¯ &lt;strong&gt;â€œå¹¶è¡Œâ€&lt;/strong&gt; çš„ã€‚å®ƒä»¬éœ€è¦æš‚åœæ‰€æœ‰ç”¨æˆ·çº¿ç¨‹ï¼ˆSTWï¼‰ï¼Œä½†ä¼šå¯ç”¨å¤šä¸ªGCçº¿ç¨‹æ¥å¿«é€Ÿå®Œæˆæ ‡è®°å·¥ä½œï¼Œä»¥ç¼©çŸ­åœé¡¿æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤&lt;/strong&gt;é˜¶æ®µï¼šè¿™ä¸¤ä¸ªé˜¶æ®µæ˜¯ &lt;strong&gt;â€œå¹¶å‘â€&lt;/strong&gt; çš„ã€‚GCçº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œè™½ç„¶è¿™ä¼šå› ä¸ºçº¿ç¨‹åˆ‡æ¢å ç”¨ä¸€éƒ¨åˆ†ç³»ç»Ÿèµ„æºï¼Œå¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºååé‡ç•¥æœ‰ä¸‹é™ï¼Œä½†å¥½å¤„æ˜¯åº”ç”¨ç¨‹åºåœ¨æ­¤æœŸé—´ä¸ä¼šå®Œå…¨å¡ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;G1æ”¶é›†å™¨ä»¥åŠæ›´å…ˆè¿›çš„ZGCç­‰ï¼Œä¹Ÿéƒ½åœ¨ä¸åŒç¨‹åº¦ä¸Šç»“åˆäº†å¹¶è¡Œå’Œå¹¶å‘æŠ€æœ¯ï¼Œç›®æ ‡éƒ½æ˜¯åœ¨ä¿è¯é«˜ååé‡çš„åŒæ—¶ï¼Œå°½å¯èƒ½é™ä½åœé¡¿æ—¶é—´å¯¹ç”¨æˆ·ä½“éªŒçš„å½±å“ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸å…³ç³»è¾¨æ"&gt;ğŸ’ æ€»ç»“ä¸å…³ç³»è¾¨æ
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œæ‚¨çš„ç†è§£æ˜¯å‡†ç¡®çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹¶è¡Œ&lt;/strong&gt;å…³ä¹&lt;strong&gt;é€Ÿåº¦&lt;/strong&gt;ï¼Œå³â€œå¦‚ä½•åˆ©ç”¨æ›´å¤šèµ„æºï¼ˆå¤šçº¿ç¨‹ï¼‰æ›´å¿«åœ°å®ŒæˆGCä»»åŠ¡â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘&lt;/strong&gt;å…³ä¹&lt;strong&gt;åœé¡¿&lt;/strong&gt;ï¼Œå³â€œå¦‚ä½•åœ¨è¿›è¡ŒGCæ—¶ï¼Œå°½å¯èƒ½åœ°ä¸å½±å“åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¿è¡Œâ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éœ€è¦ç‰¹åˆ«ç•™æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå¹¶éäº’æ–¥ã€‚&lt;strong&gt;å¹¶è¡Œæè¿°çš„æ˜¯GCçº¿ç¨‹é—´çš„å…³ç³»ï¼Œè€Œå¹¶å‘æè¿°çš„æ˜¯GCçº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹é—´çš„å…³ç³»&lt;/strong&gt;ã€‚ä¸€ä¸ªåƒåœ¾æ”¶é›†å™¨å¯ä»¥åŒæ—¶æ˜¯å¹¶è¡Œçš„å’Œå¹¶å‘çš„ï¼Œä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä½¿ç”¨å¤šä¸ªçº¿ç¨‹ï¼ˆå¹¶è¡Œï¼‰æ¥æ‰§è¡Œä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿è¡Œçš„ï¼ˆå¹¶å‘ï¼‰åƒåœ¾å›æ”¶ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´é€å½»åœ°ç†è§£è¿™ä¸¤ä¸ªé‡è¦æ¦‚å¿µï¼å¦‚æœæ‚¨å¯¹æŸä¸ªå…·ä½“çš„åƒåœ¾æ”¶é›†å™¨ï¼ˆå¦‚G1æˆ–ZGCï¼‰æ˜¯å¦‚ä½•å®ç°å¹¶è¡Œå’Œå¹¶å‘çš„æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="g1"&gt;G1
&lt;/h2&gt;&lt;p&gt;G1ï¼ˆGarbage-Firstï¼‰åƒåœ¾æ”¶é›†å™¨æ˜¯JVMä¸­ä¸€æ¬¾é‡Œç¨‹ç¢‘å¼çš„æ”¶é›†å™¨ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯åœ¨å¤§å†…å­˜ã€å¤šå¤„ç†å™¨çš„æœåŠ¡å™¨ç¯å¢ƒä¸‹ï¼Œ&lt;strong&gt;å¹³è¡¡é«˜ååé‡ä¸ä½åœé¡¿æ—¶é—´&lt;/strong&gt;ã€‚è‡ªJDK 9èµ·ï¼ŒG1å·²æˆä¸ºé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡G1çš„æ ¸å¿ƒè½®å»“ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;G1 (Garbage-First) åƒåœ¾æ”¶é›†å™¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´&lt;/strong&gt;ï¼ŒåŒæ—¶å…¼é¡¾é«˜ååé‡ï¼Œé€‚ç”¨äºå¤§å †å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å †å†…å­˜å¸ƒå±€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ &lt;strong&gt;Region&lt;/strong&gt;ï¼Œæ‰“ç ´ä¼ ç»Ÿç‰©ç†åˆ†ä»£çš„è¿ç»­å†…å­˜å¸ƒå±€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–°ç”Ÿä»£ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;ï¼ˆåœ¨Regionå†…éƒ¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è€å¹´ä»£ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•´ä½“æ¥çœ‹æ˜¯&lt;strong&gt;æ ‡è®°-æ•´ç†&lt;/strong&gt;ï¼Œå±€éƒ¨ï¼ˆRegionä¹‹é—´ï¼‰æ˜¯&lt;strong&gt;å¤åˆ¶ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è®°å¿†é›†ï¼ˆRSetï¼‰&lt;/strong&gt;ã€&lt;strong&gt;SATBï¼ˆSnapshot-At-The-Beginningï¼‰&lt;/strong&gt;ã€&lt;strong&gt;æ”¶é›†é›†åˆï¼ˆCSetï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œæ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹¶è¡Œ + å¹¶å‘ + STW&lt;/strong&gt;ï¼Œé€šè¿‡æ··åˆå›æ”¶ï¼ˆMixed GCï¼‰å›æ”¶éƒ¨åˆ†è€å¹´ä»£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼˜å…ˆå›æ”¶åƒåœ¾æ¯”ä¾‹æœ€é«˜ï¼ˆå³â€œä»·å€¼â€æœ€å¤§ï¼‰çš„Regionï¼Œæ•…åGarbage-First&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶è§£æ"&gt;ğŸ”§ æ ¸å¿ƒæœºåˆ¶è§£æ
&lt;/h3&gt;&lt;p&gt;G1èƒ½å®ç°å…¶è®¾è®¡ç›®æ ‡ï¼Œå¾—ç›Šäºä»¥ä¸‹å‡ é¡¹æ ¸å¿ƒæœºåˆ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Regionåˆ†åŒºæ¨¡å‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;G1å°†å †å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°å›ºå®šï¼ˆé€šå¸¸ä¸º1MBè‡³32MBï¼‰çš„Regionã€‚æ¯ä¸ªRegionå¯ä»¥è¢«åŠ¨æ€æŒ‡å®šä¸ºEdenã€Survivorã€Oldæˆ–ç‰¹æ®Šçš„&lt;strong&gt;HumongousåŒºåŸŸ&lt;/strong&gt;ï¼ˆç”¨äºå­˜æ”¾å¤§å°è¶…è¿‡Regionå®¹é‡50%çš„å¤§å¯¹è±¡ï¼‰ã€‚è¿™ç§åˆ†åŒºä½¿å¾—G1å¯ä»¥é¿å…æ¯æ¬¡å›æ”¶æ•´ä¸ªå †ï¼Œè€Œæ˜¯æ ¹æ®è®¾å®šçš„åœé¡¿æ—¶é—´ç›®æ ‡ï¼Œé€‰æ‹©ä¸€éƒ¨åˆ†Regionè¿›è¡Œæ”¶é›†ï¼Œä»è€Œå®ç°åœé¡¿æ—¶é—´çš„å¯æ§æ€§ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®°å¿†é›†ï¼ˆRemembered Set, RSetï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºå¯¹è±¡å¯èƒ½è·¨Regionå¼•ç”¨ï¼Œä¸ºé¿å…æ¯æ¬¡GCæ—¶æ‰«ææ•´ä¸ªå †ï¼ŒG1ä¸ºæ¯ä¸ªRegionç»´æŠ¤äº†ä¸€ä¸ªè®°å¿†é›†ï¼ˆRSetï¼‰ã€‚RSetæœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºç²¾ç¡®è®°å½•&lt;strong&gt;æ¥è‡ªå…¶ä»–Regionçš„å¯¹å½“å‰Regionå†…å¯¹è±¡çš„å¼•ç”¨&lt;/strong&gt;ã€‚å½“è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œåªéœ€æ‰«æRSetå³å¯ç¡®å®šå½“å‰Regionå†…å­˜æ´»å¯¹è±¡çš„å¼•ç”¨å…³ç³»ï¼Œå¤§å¤§æå‡äº†æ•ˆç‡ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SATBï¼ˆSnapshot-At-The-Beginningï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¹¶å‘æ ‡è®°é˜¶æ®µï¼ŒG1é‡‡ç”¨SATBç®—æ³•ã€‚å®ƒåœ¨æ ‡è®°å¼€å§‹æ—¶ä¸ºå­˜æ´»å¯¹è±¡å»ºç«‹ä¸€ä¸ªé€»è¾‘å¿«ç…§ã€‚åœ¨å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰æ–°çš„å¼•ç”¨å…³ç³»äº§ç”Ÿï¼ˆå³å¯¹è±¡â€œç”±æ­»å˜æ´»â€ï¼‰ï¼Œ&lt;strong&gt;å†™å±éšœï¼ˆWrite Barrierï¼‰&lt;/strong&gt; ä¼šå°†è¿™äº›æ”¹å˜è®°å½•åˆ°SATBç¼“å†²åŒºã€‚åœ¨æœ€ç»ˆçš„é‡æ–°æ ‡è®°é˜¶æ®µï¼ŒG1ä¼šå¤„ç†è¿™äº›ç¼“å†²åŒºï¼Œç¡®ä¿ä¸ä¼šé”™è¯¯åœ°å›æ”¶åœ¨å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­æ–°äº§ç”Ÿçš„å­˜æ´»å¯¹è±¡ï¼Œä»è€Œä¿è¯äº†æ ‡è®°çš„æ­£ç¡®æ€§ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¶é›†é›†åˆï¼ˆCollection Set, CSetï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CSetæ˜¯&lt;strong&gt;å•æ¬¡GCæš‚åœä¸­è¦å›æ”¶çš„Regionçš„é›†åˆ&lt;/strong&gt;ã€‚G1ä¼šæ ¹æ®æ¯ä¸ªRegionä¸­åƒåœ¾çš„å¤šå°‘ï¼ˆå³å›æ”¶ä»·å€¼ï¼‰å’Œå›æ”¶æ‰€éœ€æˆæœ¬ï¼Œåœ¨ç”¨æˆ·è®¾å®šçš„æœ€å¤§åœé¡¿æ—¶é—´ï¼ˆ&lt;code&gt;-XX:MaxGCPauseMillis&lt;/code&gt;ï¼‰å†…ï¼Œé€‰æ‹©å›æ”¶ä»·å€¼æœ€é«˜çš„Regionç»„æˆCSetè¿›è¡Œå›æ”¶ã€‚è¿™æ­£æ˜¯â€œGarbage-Firstâ€åå­—çš„ç”±æ¥ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-g1çš„å·¥ä½œæµç¨‹"&gt;ğŸ”„ G1çš„å·¥ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;G1çš„åƒåœ¾å›æ”¶æ´»åŠ¨ä¸»è¦åˆ†ä¸ºå‡ ç§ç±»å‹ï¼Œå…¶æ ¸å¿ƒæ˜¯&lt;strong&gt;å¹¶å‘æ ‡è®°å‘¨æœŸ&lt;/strong&gt;å’Œéšä¹‹è€Œæ¥çš„&lt;strong&gt;æ··åˆå›æ”¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹´è½»ä»£å›æ”¶ï¼ˆYoung GCï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“EdenåŒºè¢«å æ»¡æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡Young GCã€‚è¿™æ˜¯ä¸€ä¸ª&lt;strong&gt;STW&lt;/strong&gt;äº‹ä»¶ï¼Œé‡‡ç”¨å¤åˆ¶ç®—æ³•å°†EdenåŒºå’ŒSurvivoråŒºä¸­çš„å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°æ–°çš„SurvivoråŒºï¼Œå¹´é¾„è¶³å¤Ÿå¤§çš„å¯¹è±¡åˆ™ä¼šæ™‹å‡åˆ°è€å¹´ä»£Region ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘æ ‡è®°å‘¨æœŸï¼ˆConcurrent Marking Cycleï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æ•´ä¸ªå †çš„ä½¿ç”¨ç‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼ï¼ˆé»˜è®¤45%ï¼Œé€šè¿‡&lt;code&gt;-XX:InitiatingHeapOccupancyPercent&lt;/code&gt;è®¾ç½®ï¼‰æ—¶ï¼ŒG1ä¼šå¯åŠ¨ä¸€ä¸ªå¹¶å‘æ ‡è®°å‘¨æœŸã€‚è¿™ä¸ªå‘¨æœŸå¹¶ä¸ç«‹å³è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè€Œæ˜¯ä¸ºåç»­çš„æ··åˆå›æ”¶åšå‡†å¤‡ï¼Œç›®çš„æ˜¯æ‰¾å‡ºè€å¹´ä»£ä¸­å“ªäº›Regionçš„åƒåœ¾æœ€å¤šã€‚å®ƒåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹æ ‡è®°&lt;/strong&gt;ï¼š&lt;strong&gt;STW&lt;/strong&gt;ï¼Œæ ‡è®°ä»GC Rootsç›´æ¥å¯è¾¾çš„å¯¹è±¡ã€‚è¿™ä¸ªé˜¶æ®µé€šå¸¸å€Ÿé“äºä¸€æ¬¡Young GCï¼Œåœé¡¿æ—¶é—´å¾ˆçŸ­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¹åŒºåŸŸæ‰«æ&lt;/strong&gt;ï¼šæ‰«æSurvivoråŒºï¼ˆæ ¹åŒºåŸŸï¼‰ä¸­å¯¹è€å¹´ä»£çš„å¼•ç”¨ã€‚æ­¤é˜¶æ®µå¿…é¡»åœ¨ä¸‹ä¸€æ¬¡Young GCå‘ç”Ÿå‰å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ ‡è®°&lt;/strong&gt;ï¼šä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œéå†æ•´ä¸ªå¯¹è±¡å›¾ï¼Œæ ‡è®°æ‰€æœ‰å­˜æ´»å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆæ ‡è®°&lt;/strong&gt;ï¼š&lt;strong&gt;STW&lt;/strong&gt;ï¼Œå¤„ç†SATBç¼“å†²åŒºä¸­çš„è®°å½•ï¼Œå®Œæˆå­˜æ´»å¯¹è±¡çš„æœ€ç»ˆæ ‡è®°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…ç†&lt;/strong&gt;ï¼š&lt;strong&gt;STW&lt;/strong&gt;ï¼Œç»Ÿè®¡å„Regionçš„å­˜æ´»å¯¹è±¡æ¯”ä¾‹ï¼ˆæ´»è·ƒåº¦ï¼‰ï¼Œå¹¶å®Œå…¨æ¸…ç©ºçš„Regionä¼šç«‹åˆ»è¢«å›æ”¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ··åˆå›æ”¶ï¼ˆMixed GCï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹¶å‘æ ‡è®°å‘¨æœŸç»“æŸåï¼ŒG1å¹¶ä¸ä¼šç«‹å³å›æ”¶æ‰€æœ‰è¢«æ ‡è®°ä¸ºå¯å›æ”¶çš„è€å¹´ä»£Regionã€‚ç›¸åï¼Œå®ƒä¼šå¯åŠ¨ä¸€ç³»åˆ—çš„Mixed GCã€‚åœ¨Mixed GCä¸­ï¼ŒCSetä¸ä»…åŒ…å«æ‰€æœ‰çš„å¹´è½»ä»£Regionï¼Œè¿˜ä¼šæ ¹æ®å¹¶å‘æ ‡è®°å‘¨æœŸå¾—åˆ°çš„æ•°æ®ï¼Œé€‰æ‹©ä¸€éƒ¨åˆ†&lt;strong&gt;åƒåœ¾æ¯”ä¾‹é«˜ï¼ˆå›æ”¶ä»·å€¼å¤§ï¼‰çš„è€å¹´ä»£Region&lt;/strong&gt;è¿›è¡Œå›æ”¶ã€‚G1ä¼šæŒç»­è¿›è¡ŒMixed GCï¼Œç›´åˆ°å‡ ä¹å›æ”¶æ‰æ‰€æœ‰åœ¨å¹¶å‘æ ‡è®°å‘¨æœŸä¸­è¯†åˆ«å‡ºçš„åƒåœ¾Regionï¼Œæˆ–è€…å¿«è¦è§¦å‘Full GCä¸ºæ­¢ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Full GC&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“G1åœ¨è¿›è¡Œåƒåœ¾å›æ”¶ï¼ˆå¦‚å¯¹è±¡å¤åˆ¶ï¼‰æ—¶é€Ÿåº¦è·Ÿä¸ä¸Šå¯¹è±¡åˆ†é…çš„é€Ÿåº¦ï¼Œæˆ–è€…å¹¶å‘æ ‡è®°å‘¨æœŸæœªèƒ½åŠæ—¶å®Œæˆå¯¼è‡´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—²Regionæ—¶ï¼ŒG1ä¼šé€€åŒ–ä¸ºå•çº¿ç¨‹çš„Serial Oldæ”¶é›†å™¨è¿›è¡Œ&lt;strong&gt;Full GC&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€æ¬¡&lt;strong&gt;é•¿æ—¶é—´çš„STW&lt;/strong&gt;äº‹ä»¶ï¼Œä¼šå¯¹æ•´ä¸ªå †è¿›è¡Œæ ‡è®°-æ•´ç†ï¼Œåº”å°½åŠ›é€šè¿‡è°ƒä¼˜é¿å… ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯-1"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯é¢„æµ‹çš„åœé¡¿&lt;/strong&gt;ï¼šé€šè¿‡&lt;code&gt;-XX:MaxGCPauseMillis&lt;/code&gt;å‚æ•°è®¾å®šç›®æ ‡åœé¡¿æ—¶é—´ï¼ŒG1ä¼šå°½åŠ›è¾¾æˆ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜ååé‡ä¸ä½å»¶è¿Ÿçš„å¹³è¡¡&lt;/strong&gt;ï¼šåœ¨æä¾›ä½åœé¡¿çš„åŒæ—¶ï¼Œä¹Ÿä¿æŒäº†ä¸é”™çš„ååé‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ‰æ•ˆå¤„ç†å¤§å †&lt;/strong&gt;ï¼šRegionæ¨¡å‹å’Œå±€éƒ¨å¤åˆ¶ç®—æ³•ä½¿å…¶èƒ½æ›´é«˜æ•ˆåœ°ç®¡ç†å¤§å†…å­˜ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;ï¼šç»´æŠ¤RSetå’Œå¡è¡¨éœ€è¦å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œé€šå¸¸çº¦ä¸ºå †å¤§å°çš„10%åˆ°20% ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Full GCé£é™©&lt;/strong&gt;ï¼šåœ¨æç«¯æƒ…å†µä¸‹ï¼ˆå¦‚å¹¶å‘æ¨¡å¼å¤±è´¥ã€æ™‹å‡å¤±è´¥ï¼‰ï¼Œä»å¯èƒ½è§¦å‘è€—æ—¶çš„Full GC ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ååé‡ç•¥ä½&lt;/strong&gt;ï¼šä¸ä¸“æ³¨äºååé‡çš„Parallel GCç›¸æ¯”ï¼ŒG1çš„ååé‡ä¼šç•¥æœ‰æŸå¤± ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å †å†…å­˜è¾ƒå¤§ï¼ˆå¦‚&lt;strong&gt;6GBä»¥ä¸Š&lt;/strong&gt;ï¼‰çš„åº”ç”¨ ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹&lt;strong&gt;å“åº”æ—¶é—´æ•æ„Ÿ&lt;/strong&gt;ï¼Œå¸Œæœ›åƒåœ¾æ”¶é›†çš„åœé¡¿æ—¶é—´å¯æ§ï¼ˆå¦‚ç›®æ ‡åœ¨å‡ ç™¾æ¯«ç§’ä»¥å†…ï¼‰çš„æœåŠ¡ç«¯åº”ç”¨ ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ä¸­å¯èƒ½å­˜åœ¨&lt;strong&gt;å¤§å¯¹è±¡åˆ†é…&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®è°ƒä¼˜å‚æ•°"&gt;âš™ï¸ å…³é”®è°ƒä¼˜å‚æ•°
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;å«ä¹‰ä¸ä½œç”¨&lt;/th&gt;
&lt;th&gt;å»ºè®®&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-XX:+UseG1GC&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯ç”¨G1åƒåœ¾æ”¶é›†å™¨&lt;/td&gt;
&lt;td&gt;å¿…å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-XX:MaxGCPauseMillis=200&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¾å®š&lt;strong&gt;ç›®æ ‡æœ€å¤§åœé¡¿æ—¶é—´&lt;/strong&gt;ï¼ˆæ¯«ç§’ï¼‰ã€‚G1ä¼šå°½åŠ›å®ç°ï¼Œä½†ä¸ä¿è¯ã€‚&lt;/td&gt;
&lt;td&gt;é€šå¸¸è®¾ä¸º100-200msï¼Œéœ€æ ¹æ®å®é™…æ•ˆæœè°ƒæ•´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-XX:InitiatingHeapOccupancyPercent=45&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®è§¦å‘å¹¶å‘æ ‡è®°å‘¨æœŸçš„&lt;strong&gt;å †å ç”¨é˜ˆå€¼&lt;/strong&gt;ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;è‹¥å¹¶å‘æ ‡è®°é¢‘ç¹è¢«è§¦å‘ï¼Œå¯é€‚å½“é™ä½æ­¤å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-XX:G1HeapRegionSize=16m&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®æ¯ä¸ª&lt;strong&gt;Regionçš„å¤§å°&lt;/strong&gt;ã€‚å¿…é¡»æ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚&lt;/td&gt;
&lt;td&gt;é€šå¸¸JVMè‡ªåŠ¨è®¡ç®—ï¼Œå¤§å¯¹è±¡å¤šçš„åº”ç”¨å¯è€ƒè™‘å¢å¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;-XX:G1NewSizePercent=5&lt;/code&gt; &lt;code&gt;-XX:G1MaxNewSizePercent=60&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®&lt;strong&gt;å¹´è½»ä»£å æ¯”&lt;/strong&gt;çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼ˆç›¸å¯¹äºå †çš„ç™¾åˆ†æ¯”ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;G1ä¼šæ ¹æ®åœé¡¿ç›®æ ‡åŠ¨æ€è°ƒæ•´å¹´è½»ä»£å¤§å°åœ¨æ­¤èŒƒå›´å†…&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-15"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;G1åƒåœ¾æ”¶é›†å™¨é€šè¿‡å…¶é©å‘½æ€§çš„&lt;strong&gt;Regionåˆ†åŒºæ¨¡å‹&lt;/strong&gt;ã€&lt;strong&gt;åŸºäºä¼˜å…ˆçº§çš„å›æ”¶ç­–ç•¥&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;å¹¶å‘æ ‡è®°å‘¨æœŸ&lt;/strong&gt;ï¼ŒæˆåŠŸåœ°åœ¨å¤§å†…å­˜ç¯å¢ƒä¸‹å®ç°äº†&lt;strong&gt;å¯é¢„æµ‹çš„ä½åœé¡¿&lt;/strong&gt;ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„ååé‡ã€‚å®ƒæ˜¯CMSæ”¶é›†å™¨çš„ç°ä»£æ›¿ä»£è€…ï¼Œå¯¹äºå¤§å¤šæ•°éœ€è¦å¹³è¡¡ååé‡å’Œå»¶è¿Ÿçš„æœåŠ¡ç«¯åº”ç”¨æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªç¨³å¥è€Œé«˜æ•ˆçš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£G1åƒåœ¾æ”¶é›†å™¨ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„è°ƒä¼˜æˆ–ä¸å…¶ä»–æ”¶é›†å™¨çš„å¯¹æ¯”æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="aqs"&gt;AQS
&lt;/h2&gt;&lt;p&gt;AbstractQueuedSynchronizerï¼ˆAQSï¼‰æ˜¯Javaå¹¶å‘åŒ…ï¼ˆ&lt;code&gt;java.util.concurrent.locks&lt;/code&gt;ï¼‰çš„æ ¸å¿ƒåŸºç¡€æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç”¨äºæ„å»ºé”å’Œå…¶ä»–åŒæ­¥å™¨ï¼ˆå¦‚Semaphoreã€CountDownLatchç­‰ï¼‰çš„åº•å±‚åŸºç¡€è®¾æ–½ã€‚JUCåŒ…ä¸­å¤§å¤šæ•°åŒæ­¥å™¨éƒ½æ˜¯åŸºäºAQSå®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†AQSçš„æ ¸å¿ƒæ„æˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç»„ä»¶&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ–¹æ³•ä¸æœºåˆ¶&lt;/th&gt;
&lt;th&gt;è®¾è®¡æ¨¡å¼ä¸æ€æƒ³&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒæ­¥çŠ¶æ€ï¼ˆstateï¼‰&lt;/strong&gt;ï¼šä¸€ä¸ª&lt;code&gt;volatile int&lt;/code&gt;å˜é‡ï¼Œè¡¨ç¤ºå…±äº«èµ„æºçš„çŠ¶æ€ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡æ¿æ–¹æ³•&lt;/strong&gt;ï¼šå¦‚&lt;code&gt;acquire(int arg)&lt;/code&gt;å’Œ&lt;code&gt;release(int arg)&lt;/code&gt;ï¼Œå®šä¹‰äº†åŒæ­¥é€»è¾‘çš„éª¨æ¶ï¼Œå°è£…äº†çº¿ç¨‹æ’é˜Ÿã€é˜»å¡å”¤é†’ç­‰é€šç”¨é€»è¾‘ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡æ¿æ–¹æ³•æ¨¡å¼&lt;/strong&gt;ï¼šå­ç±»åªéœ€å®ç°ç‰¹å®šæ–¹æ³•ï¼ˆå¦‚&lt;code&gt;tryAcquire&lt;/code&gt;ï¼‰æ¥æ§åˆ¶å¯¹stateçš„è®¿é—®ï¼ŒåŒæ­¥é˜Ÿåˆ—çš„ç»´æŠ¤ç­‰å¤æ‚å·¥ä½œç”±AQSåœ¨é¡¶å±‚å®Œæˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CLHåŒæ­¥é˜Ÿåˆ—&lt;/strong&gt;ï¼šä¸€ä¸ªFIFOçš„åŒå‘é˜Ÿåˆ—ï¼Œç”¨äºç®¡ç†è·å–èµ„æºå¤±è´¥çš„çº¿ç¨‹ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯é‡å†™æ–¹æ³•&lt;/strong&gt;ï¼šå¦‚&lt;code&gt;tryAcquire(int)&lt;/code&gt;ã€&lt;code&gt;tryRelease(int)&lt;/code&gt;ï¼Œéœ€è¦å­ç±»æ ¹æ®å…±äº«æ¨¡å¼ï¼ˆç‹¬å æˆ–å…±äº«ï¼‰å®ç°ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…³æ³¨ç‚¹åˆ†ç¦»&lt;/strong&gt;ï¼šå°†é€šç”¨çš„åŒæ­¥é˜Ÿåˆ—ç®¡ç†ï¼ˆAQSè´Ÿè´£ï¼‰ä¸ç‰¹å®šçš„èµ„æºè®¿é—®ç­–ç•¥ï¼ˆå­ç±»è´Ÿè´£ï¼‰åˆ†ç¦»ï¼Œæå¤§ç®€åŒ–äº†åŒæ­¥å™¨çš„å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ConditionObject&lt;/strong&gt;ï¼šAQSçš„å†…éƒ¨ç±»ï¼Œç”¨äºå®ç°æ¡ä»¶å˜é‡ï¼Œæ”¯æŒå¤šä¸ªç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;CASæ“ä½œ&lt;/strong&gt;ï¼šé€šè¿‡&lt;code&gt;compareAndSetState&lt;/code&gt;ç­‰æ–¹æ³•åŸå­æ€§åœ°æ›´æ–°stateï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†æ·±åº¦è§£æ"&gt;ğŸ”§ æ ¸å¿ƒåŸç†æ·±åº¦è§£æ
&lt;/h3&gt;&lt;p&gt;AQSçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶é”å®šèµ„æºã€‚å¦‚æœèµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—æœºåˆ¶æ¥é˜»å¡ç­‰å¾…çš„çº¿ç¨‹ä»¥åŠåˆ†é…èµ„æºã€‚è¿™å¥—æœºåˆ¶ä¸»è¦ä¾èµ–äº&lt;strong&gt;åŒæ­¥çŠ¶æ€ï¼ˆstateï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;CLHåŒæ­¥é˜Ÿåˆ—&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒæ­¥çŠ¶æ€ï¼ˆStateï¼‰çš„ç®¡ç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Stateæ˜¯AQSçš„çµé­‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªä½¿ç”¨&lt;code&gt;volatile&lt;/code&gt;ä¿®é¥°çš„intå˜é‡ï¼Œè¡¨ç¤ºå…±äº«èµ„æºçš„çŠ¶æ€ã€‚AQSæä¾›äº†ä¸‰ç§åŸå­æ“ä½œæ–¹æ³•ä¾†è¯»å†™stateï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;getState()&lt;/code&gt;: è·å–å½“å‰åŒæ­¥çŠ¶æ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;setState(int newState)&lt;/code&gt;: è®¾ç½®æ–°çš„åŒæ­¥çŠ¶æ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;compareAndSetState(int expect, int update)&lt;/code&gt;: ä½¿ç”¨CASï¼ˆCompare-And-Swapï¼‰æ“ä½œåŸå­æ€§åœ°è®¾ç½®çŠ¶æ€ï¼Œè¿™æ˜¯å®ç°æ— é”å¹¶å‘æ§åˆ¶çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸åŒçš„åŒæ­¥å™¨å¯¹stateçš„è¯­ä¹‰è§£é‡Šä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨&lt;code&gt;ReentrantLock&lt;/code&gt;ä¸­ï¼Œstateè¡¨ç¤ºçº¿ç¨‹é‡å…¥é”çš„æ¬¡æ•°ï¼›åœ¨&lt;code&gt;Semaphore&lt;/code&gt;ä¸­ï¼Œstateè¡¨ç¤ºå¯ç”¨çš„è®¸å¯è¯æ•°é‡ï¼›åœ¨&lt;code&gt;CountDownLatch&lt;/code&gt;ä¸­ï¼Œstateè¡¨ç¤ºå€’è®¡æ•°çš„æ•°å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CLHåŒæ­¥é˜Ÿåˆ—çš„å·¥ä½œæœºåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“çº¿ç¨‹å°è¯•è·å–èµ„æºå¤±è´¥æ—¶ï¼ŒAQSä¼šå°†è¯¥çº¿ç¨‹å°è£…æˆä¸€ä¸ª&lt;strong&gt;NodeèŠ‚ç‚¹&lt;/strong&gt;ï¼Œå¹¶é€šè¿‡CASæ“ä½œå°†å…¶åŠ å…¥åˆ°CLHé˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œç„¶åè¯¥çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼ˆé€šè¿‡&lt;code&gt;LockSupport.park&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;CLHé˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—ï¼ˆå­˜åœ¨å¤´å°¾æŒ‡é’ˆï¼‰ã€‚æ¯ä¸ªNodeèŠ‚ç‚¹ä¿å­˜ç€çº¿ç¨‹çš„å¼•ç”¨å’ŒçŠ¶æ€ï¼ˆ&lt;code&gt;waitStatus&lt;/code&gt;ï¼‰ï¼ŒçŠ¶æ€åŒ…æ‹¬&lt;code&gt;SIGNAL&lt;/code&gt;ï¼ˆåç»§èŠ‚ç‚¹éœ€è¦è¢«å”¤é†’ï¼‰ã€&lt;code&gt;CANCELLED&lt;/code&gt;ï¼ˆçº¿ç¨‹å·²å–æ¶ˆï¼‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å½“æŒæœ‰é”çš„çº¿ç¨‹é‡Šæ”¾èµ„æºåï¼Œä¼šå”¤é†’ï¼ˆé€šè¿‡&lt;code&gt;LockSupport.unpark&lt;/code&gt;ï¼‰é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯å¤´èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ï¼‰ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹ä¼šå†æ¬¡å°è¯•è·å–èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸¤ç§èµ„æºå…±äº«æ¨¡å¼"&gt;ğŸ”„ ä¸¤ç§èµ„æºå…±äº«æ¨¡å¼
&lt;/h3&gt;&lt;p&gt;AQSå®šä¹‰äº†ä¸¤ç§èµ„æºå…±äº«æ–¹å¼ï¼Œè¿™æ˜¯æ‰€æœ‰åŸºäºAQSçš„åŒæ­¥å™¨çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‹¬å æ¨¡å¼ï¼ˆExclusiveï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰èµ„æºï¼Œå¦‚&lt;code&gt;ReentrantLock&lt;/code&gt;ã€‚å­ç±»éœ€è¦å®ç°&lt;code&gt;tryAcquire(int)&lt;/code&gt;å’Œ&lt;code&gt;tryRelease(int)&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ç‹¬å æ¨¡å¼åˆå¯åˆ†ä¸º&lt;strong&gt;å…¬å¹³é”&lt;/strong&gt;å’Œ&lt;strong&gt;éå…¬å¹³é”&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¬å¹³é”&lt;/strong&gt;ï¼šåœ¨&lt;code&gt;tryAcquire&lt;/code&gt;æ—¶ï¼Œä¼šå…ˆæ£€æŸ¥CLHé˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰å‰é©±èŠ‚ç‚¹åœ¨ç­‰å¾…ã€‚å¦‚æœæœ‰ï¼Œåˆ™å½“å‰çº¿ç¨‹ç›´æ¥å…¥é˜Ÿç­‰å¾…ï¼Œä¿è¯&amp;quot;å…ˆæ¥ååˆ°&amp;quot;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éå…¬å¹³é”&lt;/strong&gt;ï¼šåœ¨&lt;code&gt;tryAcquire&lt;/code&gt;æ—¶ï¼Œæ— è®ºé˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œéƒ½ä¼šå…ˆå°è¯•ç›´æ¥è·å–èµ„æºã€‚è¿™å¯èƒ½å¯¼è‡´&amp;quot;æ’é˜Ÿ&amp;quot;ç°è±¡ï¼Œä½†ååé‡é€šå¸¸æ›´é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…±äº«æ¨¡å¼ï¼ˆShareï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŒä¸€æ—¶é—´å…è®¸å¤šä¸ªçº¿ç¨‹è®¿é—®èµ„æºï¼Œå¦‚&lt;code&gt;Semaphore&lt;/code&gt;ã€&lt;code&gt;CountDownLatch&lt;/code&gt;ã€‚å­ç±»éœ€è¦å®ç°&lt;code&gt;tryAcquireShared(int)&lt;/code&gt;å’Œ&lt;code&gt;tryReleaseShared(int)&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;Semaphore&lt;/code&gt;åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®stateä¸ºè®¸å¯è¯æ•°é‡ã€‚æ¯ä¸ªçº¿ç¨‹è·å–è®¸å¯è¯æ—¶ï¼Œstateå‡å°‘ï¼›é‡Šæ”¾æ—¶ï¼Œstateå¢åŠ ã€‚å½“stateä¸º0æ—¶ï¼Œåç»­çº¿ç¨‹æ— æ³•è·å–è®¸å¯è¯ï¼Œéœ€è¦ç­‰å¾…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åŸºäºaqsçš„åŒæ­¥å™¨å®ä¾‹"&gt;ğŸ› ï¸ åŸºäºAQSçš„åŒæ­¥å™¨å®ä¾‹
&lt;/h3&gt;&lt;p&gt;è®¸å¤šå¸¸ç”¨çš„JUCåŒæ­¥å·¥å…·éƒ½æ˜¯åŸºäºAQSæ„å»ºçš„ï¼Œå®ƒä»¬é€šè¿‡å®ç°ç‰¹å®šçš„&lt;code&gt;tryAcquire&lt;/code&gt;å’Œ&lt;code&gt;tryRelease&lt;/code&gt;æ–¹æ³•æ¥å®šä¹‰è‡ªå·±çš„åŒæ­¥è¯­ä¹‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŒæ­¥å™¨&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;AQSåŒæ­¥çŠ¶æ€ï¼ˆstateï¼‰çš„è¯­ä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ReentrantLock&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‹¬å &lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºæŒæœ‰é”çš„çº¿ç¨‹çš„é‡å…¥æ¬¡æ•°ã€‚ä¸º0æ—¶è¡¨ç¤ºé”æœªè¢«ä»»ä½•çº¿ç¨‹æŒæœ‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Semaphore&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…±äº«&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºå¯ç”¨çš„è®¸å¯è¯æ•°é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CountDownLatch&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…±äº«&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºéœ€è¦ç­‰å¾…çš„è®¡æ•°ã€‚å½“è®¡æ•°å‡è‡³0æ—¶ï¼Œæ‰€æœ‰ç­‰å¾…çº¿ç¨‹è¢«é‡Šæ”¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ReentrantReadWriteLock&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸¤è€…ç»“åˆ&lt;/td&gt;
&lt;td&gt;stateçš„é«˜16ä½è¡¨ç¤ºè¯»é”çš„æŒæœ‰æ•°ï¼ˆå…±äº«ï¼‰ï¼Œä½16ä½è¡¨ç¤ºå†™é”çš„é‡å…¥æ¬¡æ•°ï¼ˆç‹¬å ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“ä¸ä»·å€¼"&gt;ğŸ’¡ æ€»ç»“ä¸ä»·å€¼
&lt;/h3&gt;&lt;p&gt;AQSä½œä¸ºJavaå¹¶å‘ç¼–ç¨‹çš„åŸºçŸ³ï¼Œå…¶ä»·å€¼åœ¨äºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æä¾›äº†å¼ºå¤§çš„åŸºç¡€è®¾æ–½&lt;/strong&gt;ï¼šé€šè¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå°†å¤æ‚çš„çº¿ç¨‹æ’é˜Ÿã€é˜»å¡/å”¤é†’ç­‰åº•å±‚æ“ä½œå°è£…èµ·æ¥ï¼Œå¤§å¤§é™ä½äº†æ„å»ºå¯é ã€é«˜æ€§èƒ½åŒæ­¥å™¨çš„é—¨æ§›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿è¯äº†é«˜æ€§èƒ½&lt;/strong&gt;ï¼šå†…éƒ¨å¤§é‡ä½¿ç”¨CASæ“ä½œç­‰æ— é”æŠ€æœ¯ï¼Œå‡å°‘äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œä½¿å¾—åŸºäºAQSæ„å»ºçš„åŒæ­¥å™¨ï¼ˆå¦‚&lt;code&gt;ReentrantLock&lt;/code&gt;ï¼‰åœ¨å¤šæ•°åœºæ™¯ä¸‹æ€§èƒ½ä¼˜äºä¼ ç»Ÿçš„&lt;code&gt;synchronized&lt;/code&gt;å…³é”®å­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æä¾›äº†ä¸°å¯Œçš„çµæ´»æ€§&lt;/strong&gt;ï¼šæ”¯æŒç‹¬å å’Œå…±äº«ä¸¤ç§æ¨¡å¼ï¼Œä»¥åŠå…¬å¹³/éå…¬å¹³ç­–ç•¥ï¼Œå¯ä»¥çµæ´»åº”å¯¹å„ç§å¤æ‚çš„åŒæ­¥éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ·±å…¥ç†è§£AQSã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šçš„åŒæ­¥å™¨ï¼ˆå¦‚&lt;code&gt;ReentrantLock&lt;/code&gt;æˆ–&lt;code&gt;CountDownLatch&lt;/code&gt;ï¼‰æ˜¯å¦‚ä½•åŸºäºAQSå®ç°çš„æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="clh-é˜Ÿåˆ—"&gt;CLH é˜Ÿåˆ—
&lt;/h2&gt;&lt;p&gt;CLHé˜Ÿåˆ—ï¼ˆCraig, Landin, and Hagersten lock queueï¼‰æ˜¯AQSï¼ˆAbstractQueuedSynchronizerï¼‰å†…éƒ¨ç”¨äºå®ç°çº¿ç¨‹åŒæ­¥çš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª&lt;strong&gt;FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„åŒå‘é“¾è¡¨&lt;/strong&gt;ï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰ç­‰å¾…è·å–é”çš„çº¿ç¨‹ã€‚å…¶æ ¸å¿ƒä½¿å‘½æ˜¯ï¼Œå½“çº¿ç¨‹æ— æ³•ç«‹å³è·å–é”æ—¶ï¼Œèƒ½å¤Ÿå…¬å¹³ã€é«˜æ•ˆåœ°è®©çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶åœ¨é”é‡Šæ”¾æ—¶æŒ‰åºå”¤é†’ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¯¹CLHé˜Ÿåˆ—çš„è¿ä½œæœ‰ä¸ªå¿«é€Ÿçš„æ•´ä½“å°è±¡ï¼Œä¸‹è¡¨æ¦‚æ‹¬äº†å…¶æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ ¸å¿ƒæ­¥éª¤ä¸ç›®æ ‡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ–¹æ³•&lt;/th&gt;
&lt;th&gt;å…³é”®æ­¥éª¤ä¸ç›®æ ‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥ (å…¥é˜Ÿ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;addWaiter(Node mode)&lt;/code&gt;å’Œ &lt;code&gt;enq(final Node node)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;åˆ›å»ºèŠ‚ç‚¹&lt;/strong&gt;ï¼šå°†å½“å‰çº¿ç¨‹åŒ…è£…æˆä¸€ä¸ªNodeèŠ‚ç‚¹ã€‚ 2. &lt;strong&gt;æ¥å…¥é˜Ÿåˆ—&lt;/strong&gt;ï¼šé€šè¿‡CASæ“ä½œå°†æ–°èŠ‚ç‚¹å®‰å…¨åœ°æ·»åŠ åˆ°é˜Ÿåˆ—å°¾éƒ¨ã€‚ 3. &lt;strong&gt;åˆå§‹åŒ–é˜Ÿåˆ—&lt;/strong&gt;ï¼ˆè‹¥å¿…è¦ï¼‰ï¼šå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™å…ˆåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ é™¤ (å‡ºé˜Ÿ)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;setHead(Node node)&lt;/code&gt;å’Œ &lt;code&gt;unparkSuccessor(Node node)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;è®¾ç½®æ–°å¤´&lt;/strong&gt;ï¼šè·å–é”æˆåŠŸçš„çº¿ç¨‹å¯¹åº”çš„èŠ‚ç‚¹æˆä¸ºæ–°çš„å¤´èŠ‚ç‚¹ï¼ˆ&lt;code&gt;setHead&lt;/code&gt;ï¼‰ã€‚ 2. &lt;strong&gt;å”¤é†’ç»§ä»»è€…&lt;/strong&gt;ï¼šæ–°çš„å¤´èŠ‚ç‚¹ä¼šå”¤é†’å…¶åç»§èŠ‚ç‚¹ä¸­çš„çº¿ç¨‹ï¼ˆ&lt;code&gt;unparkSuccessor&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ’å…¥æ“ä½œè¯¦è§£"&gt;ğŸ”§ æ’å…¥æ“ä½œè¯¦è§£
&lt;/h3&gt;&lt;p&gt;å½“çº¿ç¨‹å°è¯•è·å–é”ï¼ˆåŒæ­¥çŠ¶æ€ï¼‰å¤±è´¥æ—¶ï¼Œå°±éœ€è¦å°†è‡ªå·±åŠ å…¥åˆ°CLHé˜Ÿåˆ—çš„æœ«å°¾è¿›è¡Œç­‰å¾…ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ç”± &lt;code&gt;addWaiter&lt;/code&gt;æ–¹æ³•å®Œæˆã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºèŠ‚ç‚¹&lt;/strong&gt;ï¼šé¦–å…ˆï¼ŒAQSä¼šä¸ºå½“å‰çº¿ç¨‹åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;Node&lt;/code&gt;å¯¹è±¡ã€‚è¿™ä¸ªèŠ‚ç‚¹æ ‡å¿—ç€è¯¥çº¿ç¨‹æ­£åœ¨æ’é˜Ÿç­‰å¾…ã€‚æ„é€ èŠ‚ç‚¹æ—¶ä¼šæŒ‡æ˜å…¶æ¨¡å¼æ˜¯ç‹¬å ï¼ˆ&lt;code&gt;Node.EXCLUSIVE&lt;/code&gt;ï¼‰è¿˜æ˜¯å…±äº«ï¼ˆ&lt;code&gt;Node.SHARED&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å°è¯•å¿«é€Ÿå…¥é˜Ÿ&lt;/strong&gt;ï¼š&lt;code&gt;addWaiter&lt;/code&gt;æ–¹æ³•ä¼šå…ˆå°è¯•ä¸€ä¸ªå¿«é€Ÿè·¯å¾„ã€‚å®ƒæ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²ç»åˆå§‹åŒ–ï¼ˆå³ &lt;code&gt;tail&lt;/code&gt;æ˜¯å¦ä¸ä¸ºnullï¼‰ã€‚å¦‚æœå·²åˆå§‹åŒ–ï¼Œå®ƒä¼šå°è¯•é€šè¿‡&lt;strong&gt;CASï¼ˆCompare-And-Swapï¼‰&lt;/strong&gt; æ“ä½œ &lt;code&gt;compareAndSetTail&lt;/code&gt;ï¼Œå°†æ–°èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°çš„å°¾èŠ‚ç‚¹ã€‚è¿™æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œç¡®ä¿åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸåœ°å°†è‡ªå·±çš„èŠ‚ç‚¹è®¾ä¸ºå°¾èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä»£ç é€»è¾‘ç¤ºæ„
Node node = new Node(Thread.currentThread(), mode);
Node pred = tail;
if (pred != null) {
node.prev = pred;
if (compareAndSetTail(pred, node)) {
pred.next = node;
return node;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®Œæ•´å…¥é˜Ÿï¼ˆå«åˆå§‹åŒ–ï¼‰&lt;/strong&gt;ï¼šå¦‚æœå¿«é€Ÿè·¯å¾„å¤±è´¥ï¼ˆä¾‹å¦‚ï¼Œé˜Ÿåˆ—ä¸ºç©ºï¼Œæˆ–è€…CASæ“ä½œå› ç«äº‰å¤±è´¥ï¼‰ï¼Œåˆ™ä¼šè°ƒç”¨ &lt;code&gt;enq&lt;/code&gt;æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•é‡‡ç”¨&lt;strong&gt;è‡ªæ—‹ï¼ˆå¾ªç¯ï¼‰&lt;/strong&gt; çš„æ–¹å¼ï¼Œç›´åˆ°æˆåŠŸå…¥é˜Ÿã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–é˜Ÿåˆ—&lt;/strong&gt;ï¼šå¦‚æœå‘ç°é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼ˆ&lt;code&gt;tail == null&lt;/code&gt;ï¼‰ï¼Œå®ƒä¼šå…ˆé€šè¿‡CASæ“ä½œåˆ›å»ºä¸€ä¸ªä¸åŒ…å«çº¿ç¨‹ä¿¡æ¯çš„&lt;strong&gt;è™šæ‹ŸèŠ‚ç‚¹ï¼ˆDummy Nodeï¼‰&lt;/strong&gt; ä½œä¸ºå¤´èŠ‚ç‚¹ï¼ˆ&lt;code&gt;head&lt;/code&gt;ï¼‰ï¼Œå¹¶è®©å°¾æŒ‡é’ˆï¼ˆ&lt;code&gt;tail&lt;/code&gt;ï¼‰ä¹ŸæŒ‡å‘è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹ã€‚è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹èµ·åˆ°äº†å ä½å’Œæ ‡è¯†é˜Ÿåˆ—èµ·å§‹çš„ä½œç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CASè®¾ç½®å°¾èŠ‚ç‚¹&lt;/strong&gt;ï¼šåœ¨é˜Ÿåˆ—åˆå§‹åŒ–åæˆ–æœ¬èº«å·²å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œ&lt;code&gt;enq&lt;/code&gt;æ–¹æ³•ä¼šä¸æ–­åœ°å°è¯•ç”¨CASå°†æ–°èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°çš„å°¾èŠ‚ç‚¹ï¼Œå¹¶å»ºç«‹å¥½ &lt;code&gt;prev&lt;/code&gt;å’Œ &lt;code&gt;next&lt;/code&gt;æŒ‡é’ˆå…³ç³»ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åˆ é™¤æ“ä½œè¯¦è§£"&gt;ğŸš€ åˆ é™¤æ“ä½œè¯¦è§£
&lt;/h3&gt;&lt;p&gt;å½“æŒæœ‰é”çš„çº¿ç¨‹é‡Šæ”¾èµ„æºåï¼Œéœ€è¦å°†CLHé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªç­‰å¾…çº¿ç¨‹å”¤é†’ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ¶‰åŠå‡ºé˜Ÿæ“ä½œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾ç½®æ–°çš„å¤´èŠ‚ç‚¹&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ï¼ˆé€šå¸¸æ˜¯ç”±å¤´èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹æ‰€ä»£è¡¨çš„çº¿ç¨‹ï¼‰æˆåŠŸè·å–åˆ°é”æ—¶ï¼ŒAQSä¼šè°ƒç”¨ &lt;code&gt;setHead(Node node)&lt;/code&gt;æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†å½“å‰è·å–é”çš„çº¿ç¨‹å¯¹åº”çš„èŠ‚ç‚¹æå‡ä¸ºæ–°çš„å¤´èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;private void setHead(Node node) {
head = node;
node.thread = null; // å› ä¸ºè¯¥çº¿ç¨‹å·²ç»è·å–é”ï¼Œä¸å†éœ€è¦è®°å½•åœ¨æ­¤
node.prev = null;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ“ä½œå®é™…ä¸Šæ˜¯&lt;strong&gt;ä¸€ç§é€»è¾‘ä¸Šçš„åˆ é™¤&lt;/strong&gt;ã€‚åŸæ¥çš„å¤´èŠ‚ç‚¹ï¼ˆè™šæ‹ŸèŠ‚ç‚¹æˆ–å‰ä¸€ä¸ªå·²å¤„ç†å®Œæ¯•çš„èŠ‚ç‚¹ï¼‰ä¼šè„±ç¦»é˜Ÿåˆ—ï¼Œè€Œæ–°è®¾ç½®çš„å¤´èŠ‚ç‚¹åˆ™æˆä¸ºäº†æ–°çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ˆå…¶ &lt;code&gt;thread&lt;/code&gt;å±æ€§è¢«ç½®ä¸ºnullï¼‰ã€‚è¿™ç¡®ä¿äº†é˜Ÿåˆ—æ€»æ˜¯æœ‰ä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œè€Œè·å–é”çš„çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å”¤é†’åç»§çº¿ç¨‹&lt;/strong&gt;ï¼šé‡Šæ”¾é”çš„çº¿ç¨‹åœ¨æˆåŠŸé‡Šæ”¾èµ„æºåï¼Œä¼šè°ƒç”¨ &lt;code&gt;unparkSuccessor(Node node)&lt;/code&gt;æ–¹æ³•æ¥å”¤é†’é˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç­‰å¾…çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯¥æ–¹æ³•é¦–å…ˆä¼šæ£€æŸ¥å½“å‰èŠ‚ç‚¹çš„ç­‰å¾…çŠ¶æ€ï¼ˆ&lt;code&gt;waitStatus&lt;/code&gt;ï¼‰ï¼Œå¦‚æœä¸ºè´Ÿå€¼ï¼ˆå¦‚ &lt;code&gt;SIGNAL&lt;/code&gt;ï¼‰ï¼Œä¼šå°è¯•å°†å…¶é‡ç½®ä¸º0ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œå®ƒä¼šä»å°¾èŠ‚ç‚¹å¼€å§‹&lt;strong&gt;å‘å‰éå†&lt;/strong&gt;ï¼ˆ&lt;code&gt;t = tail; t != null &amp;amp;&amp;amp; t != node; t = t.prev&lt;/code&gt;ï¼‰ï¼Œå¯»æ‰¾è·ç¦»å½“å‰èŠ‚ç‚¹æœ€è¿‘çš„ä¸€ä¸ªæœªè¢«å–æ¶ˆï¼ˆ&lt;code&gt;waitStatus &amp;lt;= 0&lt;/code&gt;ï¼‰çš„åç»§èŠ‚ç‚¹ã€‚ä¹‹æ‰€ä»¥ä»åå¾€å‰éå†ï¼Œæ˜¯å› ä¸ºåœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œä»å‰å¾€åéå†å¯èƒ½å› èŠ‚ç‚¹åˆšè¢«æ·»åŠ æˆ–&lt;code&gt;next&lt;/code&gt;æŒ‡é’ˆè¿˜æœªæ­£ç¡®è®¾ç½®è€Œé‡åˆ°é—®é¢˜ï¼Œå‘å‰éå†åˆ©ç”¨å·²ç¨³å®šçš„ &lt;code&gt;prev&lt;/code&gt;æŒ‡é’ˆæ›´å¯é ã€‚&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„åç»§èŠ‚ç‚¹åï¼Œä¾¿è°ƒç”¨ &lt;code&gt;LockSupport.unpark(s.thread)&lt;/code&gt;å”¤é†’è¯¥èŠ‚ç‚¹å¯¹åº”çš„çº¿ç¨‹ã€‚è¢«å”¤é†’çš„çº¿ç¨‹ä¼šå†æ¬¡å°è¯•è·å–é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶ä¸è®¾è®¡ä»·å€¼"&gt;ğŸ’ æ ¸å¿ƒæœºåˆ¶ä¸è®¾è®¡ä»·å€¼
&lt;/h3&gt;&lt;p&gt;CLHé˜Ÿåˆ—çš„æ’å…¥å’Œåˆ é™¤æ“ä½œç´§å¯†å›´ç»•ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼Œè¿™ä¹Ÿæ˜¯å…¶é«˜æ•ˆå’Œå…¬å¹³çš„åŸºçŸ³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CASæ“ä½œä¸çº¿ç¨‹å®‰å…¨&lt;/strong&gt;ï¼šå…¥é˜Ÿå’Œå‡ºé˜Ÿè¿‡ç¨‹ä¸­çš„å…³é”®æ­¥éª¤ï¼ˆå¦‚è®¾ç½®å°¾èŠ‚ç‚¹ã€ä¿®æ”¹èŠ‚ç‚¹çŠ¶æ€ï¼‰éƒ½ä¾èµ–äºCASæ“ä½œã€‚è¿™æ˜¯ä¸€ç§ä¹è§‚é”æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨æ— é”çš„æƒ…å†µä¸‹ä¿è¯å¹¶å‘ä¿®æ”¹çš„å®‰å…¨æ€§ï¼Œé¿å…äº†ä½¿ç”¨é‡é‡çº§åŒæ­¥å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªæ—‹é‡è¯•&lt;/strong&gt;ï¼šå½“CASæ“ä½œå¤±è´¥æ—¶ï¼Œçº¿ç¨‹å¹¶ä¸ä¼šè¢«æŒ‚èµ·ï¼Œè€Œæ˜¯ä¼šåœ¨å¾ªç¯ä¸­ä¸æ–­é‡è¯•ï¼ˆè‡ªæ—‹ï¼‰ï¼Œç›´åˆ°æˆåŠŸã€‚è¿™åœ¨å¤šæ ¸CPUç¯å¢ƒä¸‹ï¼Œå¯¹äºçŸ­æ—¶é—´çš„ç«äº‰éå¸¸é«˜æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FIFOä¸å…¬å¹³æ€§&lt;/strong&gt;ï¼šç”±äºé˜Ÿåˆ—æ˜¯ä¸¥æ ¼æŒ‰FIFOé¡ºåºå¤„ç†çš„ï¼Œå®ƒä¿è¯äº†ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ä¼šæœ€å…ˆè·å¾—é”ï¼Œå®ç°äº†å…¬å¹³çš„é”è·å–ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿå¤´èŠ‚ç‚¹&lt;/strong&gt;ï¼šåˆå§‹åŒ–æ—¶çš„è™šæ‹Ÿå¤´èŠ‚ç‚¹ç®€åŒ–äº†è¾¹ç•Œæ¡ä»¶çš„å¤„ç†ï¼Œä½¿å¾—æ— è®ºé˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¯¹å¤´èŠ‚ç‚¹çš„æ“ä½œéƒ½æœ‰ä¸€è‡´çš„é€»è¾‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒCLHé˜Ÿåˆ—é€šè¿‡ç²¾å·§çš„é“¾è¡¨ç»“æ„å’Œæ— é”ç¼–ç¨‹æŠ€æœ¯ï¼ˆä¸»è¦æ˜¯CASï¼‰ï¼Œä¸ºAQSæä¾›äº†ä¸€å¥—é«˜æ•ˆã€å…¬å¹³ä¸”å¯æ‰©å±•çš„çº¿ç¨‹æ’é˜Ÿæœºåˆ¶ã€‚ç†è§£å…¶æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œæ˜¯æ·±å…¥æŒæ¡Javaå¹¶å‘åŒ…ä¸­å„ç§åŒæ­¥å·¥å…·ï¼ˆå¦‚ &lt;code&gt;ReentrantLock&lt;/code&gt;, &lt;code&gt;Semaphore&lt;/code&gt;ï¼‰å·¥ä½œåŸç†çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£CLHé˜Ÿåˆ—çš„è¿ä½œæœºåˆ¶ã€‚å¦‚æœä½ å¯¹AQSçš„å…¶ä»–æ–¹é¢æˆ–è€…ä¸ç‰¹å®šåŒæ­¥å™¨çš„ç»“åˆåº”ç”¨æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="çº¿ç¨‹æ± "&gt;çº¿ç¨‹æ± 
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å‚æ•°&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä½œç”¨&lt;/th&gt;
&lt;th style="text-align: left"&gt;é…ç½®å»ºè®®&lt;/th&gt;
&lt;th style="text-align: left"&gt;å…¸å‹åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;corePoolSize&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± é•¿æœŸä¿æŒçš„æœ€å°çº¿ç¨‹æ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;CPU å¯†é›†å‹ä»»åŠ¡è®¾ä¸º CPU æ ¸å¿ƒæ•°ï¼›I/O å¯†é›†å‹ä»»åŠ¡è®¾ä¸º2 * CPU æ ¸å¿ƒæ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;é«˜å¹¶å‘ I/O ä»»åŠ¡ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;maximumPoolSize&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€å¤§çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± å…è®¸çš„æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ ¹æ®ç³»ç»Ÿèµ„æºï¼ˆå†…å­˜ã€CPUï¼‰å’Œä»»åŠ¡ç±»å‹è°ƒæ•´ï¼Œé¿å…èµ„æºè€—å°½&lt;/td&gt;
&lt;td style="text-align: left"&gt;çªå‘æµé‡åœºæ™¯ï¼ˆå¦‚ç§’æ€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;keepAliveTime&lt;/td&gt;
&lt;td style="text-align: left"&gt;éæ ¸å¿ƒçº¿ç¨‹ç©ºé—²å­˜æ´»æ—¶é—´&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç»“åˆä»»åŠ¡é—´éš”è®¾ç½®ï¼ˆå¦‚ 60 ç§’ï¼‰ï¼ŒåŠæ—¶å›æ”¶ç©ºé—²çº¿ç¨‹&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä½é¢‘ä»»åŠ¡ï¼ˆå¦‚å®šæ—¶ä»»åŠ¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;unit&lt;/td&gt;
&lt;td style="text-align: left"&gt;keepAliveTimeçš„æ—¶é—´å•ä½&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¸¸ç”¨TimeUnit.SECONDSæˆ–TimeUnit.MILLISECONDS&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸ä¸šåŠ¡éœ€æ±‚åŒ¹é…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;workQueue&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»»åŠ¡é˜Ÿåˆ—ï¼Œå­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¼˜å…ˆä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼ˆå¦‚LinkedBlockingQueueï¼‰ï¼Œé¿å…å†…å­˜æº¢å‡º&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»»åŠ¡é‡æ³¢åŠ¨è¾ƒå¤§çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;threadFactory&lt;/td&gt;
&lt;td style="text-align: left"&gt;çº¿ç¨‹å·¥å‚ï¼Œç”¨äºåˆ›å»ºçº¿ç¨‹&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‡ªå®šä¹‰çº¿ç¨‹åç§°ã€ä¼˜å…ˆçº§ç­‰ï¼Œä¾¿äºç›‘æ§å’Œè°ƒè¯•&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€è¿½è¸ªçº¿ç¨‹æ¥æºçš„ç”Ÿäº§ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;handler&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ‹’ç»ç­–ç•¥ï¼Œå½“é˜Ÿåˆ—æ»¡ä¸”çº¿ç¨‹æ•°è¾¾ä¸Šé™æ—¶çš„å¤„ç†æ–¹å¼&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ç­–ç•¥ï¼ˆå¦‚ä¸¢å¼ƒã€æŠ›å‡ºå¼‚å¸¸ã€ç”±è°ƒç”¨çº¿ç¨‹æ‰§è¡Œï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;é«˜è´Ÿè½½ä¸‹çš„å®¹é”™å¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç­–ç•¥&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¡Œä¸º&lt;/th&gt;
&lt;th style="text-align: left"&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;AbortPolicyï¼ˆé»˜è®¤ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€å¿«é€Ÿå¤±è´¥å¹¶è®°å½•æ—¥å¿—çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;CallerRunsPolicy&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç”±æäº¤ä»»åŠ¡çš„çº¿ç¨‹ç›´æ¥æ‰§è¡Œä»»åŠ¡&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»»åŠ¡å¯é™çº§å¤„ç†çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;DiscardPolicy&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç›´æ¥ä¸¢å¼ƒä»»åŠ¡ï¼Œä¸æŠ›å‡ºå¼‚å¸¸&lt;/td&gt;
&lt;td style="text-align: left"&gt;å¯å®¹å¿ä»»åŠ¡ä¸¢å¤±çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;DiscardOldestPolicy&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸¢å¼ƒé˜Ÿåˆ—å¤´éƒ¨ä»»åŠ¡ï¼Œå°è¯•é‡æ–°æäº¤å½“å‰ä»»åŠ¡&lt;/td&gt;
&lt;td style="text-align: left"&gt;éœ€ä¼˜å…ˆå¤„ç†æ–°ä»»åŠ¡çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="jvm-çº¿ç¨‹"&gt;JVM çº¿ç¨‹
&lt;/h2&gt;&lt;p&gt;ç°ä»£ä¸»æµå®ç°ï¼ˆå¦‚HotSpotï¼‰é‡‡ç”¨1:1æ¨¡å‹ç›´æ¥æ˜ å°„æ“ä½œç³»ç»Ÿå†…æ ¸çº¿ç¨‹ã€‚åŒºåˆ«åœ¨äºï¼š1.æŠ½è±¡å±‚æ¬¡ä¸åŒï¼ˆJVMç®¡ç†çŠ¶æ€/ä¼˜å…ˆçº§ï¼Œæ“ä½œç³»ç»Ÿå®é™…è°ƒåº¦ï¼‰ï¼›2.éƒ¨åˆ†ç‰¹æ€§ä¸å®Œå…¨å¯¹åº”ï¼ˆå¦‚ä¸­æ–­æœºåˆ¶ï¼‰ï¼›3.JVMå¯èƒ½ä¼˜åŒ–çº¿ç¨‹åˆ›å»º/é”€æ¯è¿‡ç¨‹ã€‚æœ€ç»ˆæ‰§è¡Œä»ä¾èµ–æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼Œä½†æä¾›è·¨å¹³å°ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;ç»´åº¦&lt;/th&gt;
&lt;th style="text-align: left"&gt;Java çº¿ç¨‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;æ“ä½œç³»ç»Ÿçº¿ç¨‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è°ƒåº¦ä¸»ä½“&lt;/td&gt;
&lt;td style="text-align: left"&gt;JVM è´Ÿè´£çº¿ç¨‹çŠ¶æ€ç®¡ç†ï¼ˆå¦‚start()/stop()ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ“ä½œç³»ç»Ÿå†…æ ¸ç›´æ¥è°ƒåº¦ï¼ˆé€šè¿‡æ—¶é—´ç‰‡è½®è½¬ã€ä¼˜å…ˆçº§ç­‰ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;èµ„æºå¼€é”€&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ›å»º/é”€æ¯æˆæœ¬ä½ï¼ˆJVM æŠ½è±¡å°è£…ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆ›å»º/é”€æ¯æˆæœ¬é«˜ï¼ˆéœ€å†…æ ¸åˆ†é… TCBã€æ ˆç©ºé—´ç­‰ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;åŒæ­¥æœºåˆ¶&lt;/td&gt;
&lt;td style="text-align: left"&gt;æä¾›synchronizedã€Lockç­‰é«˜çº§æ¥å£&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¾èµ–ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ä¿¡å·é‡ã€äº’æ–¥é”ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è·¨å¹³å°æ€§&lt;/td&gt;
&lt;td style="text-align: left"&gt;çº¿ç¨‹è¡Œä¸ºä¸æ“ä½œç³»ç»Ÿæ— å…³ï¼ˆJVM å±è”½å·®å¼‚ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¡Œä¸ºä¾èµ–å…·ä½“å†…æ ¸å®ç°ï¼ˆå¦‚ Linux çš„è°ƒåº¦ç­–ç•¥ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç”± JVM ç®¡ç†ï¼ˆå¦‚ GC å›æ”¶çº¿ç¨‹æ ˆï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç”±å†…æ ¸ç®¡ç†ï¼ˆå¦‚çº¿ç¨‹é˜»å¡ã€ç»ˆæ­¢ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;Java çº¿ç¨‹çŠ¶æ€&lt;/th&gt;
&lt;th style="text-align: left"&gt;å¯¹åº”æ“ä½œç³»ç»Ÿçº¿ç¨‹çŠ¶æ€&lt;/th&gt;
&lt;th style="text-align: left"&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;NEW&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœªåˆ›å»º&lt;/td&gt;
&lt;td style="text-align: left"&gt;Java çº¿ç¨‹å¯¹è±¡å·²å®ä¾‹åŒ–ï¼Œä½†æœªè°ƒç”¨start()ï¼Œåº•å±‚å†…æ ¸çº¿ç¨‹æœªåˆ›å»ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;RUNNABLE&lt;/td&gt;
&lt;td style="text-align: left"&gt;å°±ç»ªï¼ˆReadyï¼‰æˆ–è¿è¡Œï¼ˆRunningï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¡¨ç¤º Java çº¿ç¨‹å·²å¯åŠ¨ï¼Œå¯èƒ½æ­£åœ¨ CPU ä¸Šæ‰§è¡Œï¼ˆè¿è¡Œï¼‰æˆ–ç­‰å¾…è°ƒåº¦ï¼ˆå°±ç»ªï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;BLOCKED&lt;/td&gt;
&lt;td style="text-align: left"&gt;é˜»å¡ï¼ˆBlockedï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å› ç«äº‰é”ï¼ˆå¦‚synchronizedï¼‰è¢«æŒ‚èµ·ï¼Œç­‰å¾…é”é‡Šæ”¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;WAITING/TIMED_WAITING&lt;/td&gt;
&lt;td style="text-align: left"&gt;é˜»å¡ï¼ˆBlockedï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;å› wait()ã€join()ã€sleep()ç­‰æ–¹æ³•ä¸»åŠ¨æŒ‚èµ·ï¼Œç­‰å¾…ç‰¹å®šæ¡ä»¶ï¼ˆå¦‚è¶…æ—¶ã€é€šçŸ¥ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;TERMINATED&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç»ˆæ­¢ï¼ˆTerminatedï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œåº•å±‚å†…æ ¸çº¿ç¨‹å·²é”€æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="interrupted"&gt;Interrupted
&lt;/h2&gt;&lt;p&gt;Java çš„ &lt;code&gt;InterruptedException&lt;/code&gt;è¢«è®¾è®¡ä¸ºå—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰ï¼Œè¿™èƒŒåä½“ç°äº† Java è¯­è¨€å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­&lt;strong&gt;åä½œå¼ä¸­æ–­æœºåˆ¶&lt;/strong&gt;å’Œ&lt;strong&gt;ä»£ç å¥å£®æ€§&lt;/strong&gt;çš„è€ƒé‡ã€‚ä¸‹é¢çš„è¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†å—æ£€å¼‚å¸¸ä¸éå—æ£€å¼‚å¸¸çš„æ ¸å¿ƒåŒºåˆ«ï¼Œè¿™æœ‰åŠ©äºç†è§£ &lt;code&gt;InterruptedException&lt;/code&gt;çš„å®šä½ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;å—æ£€å¼‚å¸¸ (Checked Exception)&lt;/th&gt;
&lt;th&gt;éå—æ£€å¼‚å¸¸ (Unchecked Exception)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡åˆè¡·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç†&lt;strong&gt;å¯é¢„è§çš„ã€å¯æ¢å¤çš„&lt;/strong&gt;å¤–éƒ¨é—®é¢˜&lt;/td&gt;
&lt;td&gt;ä»£è¡¨é€šå¸¸æ˜¯&lt;strong&gt;ç¨‹åºå‘˜çš„ç¼–ç é”™è¯¯&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å™¨å¼ºåˆ¶è¦æ±‚æ•è·æˆ–å£°æ˜æŠ›å‡º&lt;/td&gt;
&lt;td&gt;ä¸å¼ºåˆ¶å¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶æœªæ‰¾åˆ°ã€ç½‘ç»œä¸­æ–­ã€æ•°æ®åº“è¿æ¥å¤±è´¥&lt;/td&gt;
&lt;td&gt;ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œã€ç±»å‹è½¬æ¢é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•æ˜¯å—æ£€å¼‚å¸¸"&gt;ğŸ’¡ ä¸ºä½•æ˜¯å—æ£€å¼‚å¸¸
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;InterruptedException&lt;/code&gt;è¢«å®šä¹‰ä¸ºå—æ£€å¼‚å¸¸ï¼Œä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹æ ¸å¿ƒåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼ºåˆ¶å¤„ç†ï¼Œé¿å…å¿½ç•¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸­æ–­ä¿¡å·æ˜¯çº¿ç¨‹é—´ä¸€ç§é‡è¦çš„åä½œé€šä¿¡æœºåˆ¶ï¼Œç”¨äºè¯·æ±‚ç›®æ ‡çº¿ç¨‹ä¼˜é›…åœæ­¢ã€‚å¦‚æœ &lt;code&gt;InterruptedException&lt;/code&gt;æ˜¯éå—æ£€å¼‚å¸¸ï¼Œå¼€å‘è€…å¾ˆå¯èƒ½ä¼šåœ¨ç¼–å†™ä»£ç æ—¶å¿½ç•¥å®ƒï¼Œæˆ–è€…ç”¨å®½æ³›çš„ &lt;code&gt;catch (Exception e)&lt;/code&gt;å°†å…¶æ— å£°åœ°â€œåå™¬â€æ‰ã€‚è¿™ä¼šå¯¼è‡´ä¸­æ–­è¯·æ±‚è¢«å¿½ç•¥ï¼Œçº¿ç¨‹æ— æ³•æ­£ç¡®å“åº”åœæ­¢è¯·æ±‚ï¼Œå¯èƒ½é€ æˆèµ„æºæ— æ³•é‡Šæ”¾æˆ–ä»»åŠ¡æ— æ³•æ­£å¸¸ç»“æŸã€‚ç¼–è¯‘å™¨å¼ºåˆ¶ä½ å¤„ç†å®ƒï¼Œå°±æ˜¯ä¸ºäº†æé†’ä½ ï¼š&lt;strong&gt;â€œè¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦çš„å¤–éƒ¨äº‹ä»¶ï¼ˆä¸­æ–­è¯·æ±‚ï¼‰å‘ç”Ÿï¼Œä½ å¿…é¡»è€ƒè™‘å¦‚ä½•åº”å¯¹â€&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜ç¡®çš„æ¢å¤è¯­ä¹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹è¢«ä¸­æ–­æ˜¯ä¸€ä¸ª&lt;strong&gt;å¯é¢„æœŸçš„å¤–éƒ¨äº‹ä»¶&lt;/strong&gt;ï¼Œè€Œéç¨‹åºå†…éƒ¨çš„é€»è¾‘é”™è¯¯ã€‚å®ƒé€šå¸¸æ„å‘³ç€å¤–éƒ¨ç¯å¢ƒå¸Œæœ›å½“å‰ä»»åŠ¡èƒ½åœæ­¢ï¼Œä¾‹å¦‚ç”¨æˆ·å–æ¶ˆäº†æ“ä½œã€ç³»ç»Ÿæ­£åœ¨å…³é—­æˆ–çº¿ç¨‹æ± éœ€è¦ç»ˆæ­¢ä»»åŠ¡ã€‚è¿™å±äºä¸€ç§å¯ä»¥ä¸”åº”è¯¥è¢«ç®¡ç†çš„â€œæ­£å¸¸â€å¼‚å¸¸æƒ…å†µã€‚å°†å…¶è®¾ä¸ºå—æ£€å¼‚å¸¸ï¼Œç¬¦åˆå…¶â€œå¯æ¢å¤â€çš„ç‰¹æ€§å®šä½ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿éšœèµ„æºæ¸…ç†ä¸çŠ¶æ€å®‰å…¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ &lt;code&gt;Thread.stop()&lt;/code&gt;è¿™ç§è¢«åºŸå¼ƒçš„å¼ºåˆ¶ç»ˆæ­¢æ–¹å¼ä¸åŒï¼Œä¸­æ–­æœºåˆ¶æ˜¯åä½œå¼çš„ã€‚ç›®æ ‡çº¿ç¨‹æ”¶åˆ°ä¸­æ–­ä¿¡å·åï¼Œæœ‰æœºä¼šæ‰§è¡Œæ¸…ç†å·¥ä½œï¼ˆå¦‚å…³é—­æ–‡ä»¶ã€é‡Šæ”¾é”ã€å›æ»šäº‹åŠ¡ç­‰ï¼‰ï¼Œä»è€Œå®‰å…¨åœ°ç»“æŸä»»åŠ¡ã€‚å—æ£€å¼‚å¸¸çš„ç‰¹æ€§å¼ºåˆ¶å¼€å‘è€…å¿…é¡»ç¼–å†™å¤„ç†ä»£ç ï¼ˆé€šå¸¸åœ¨ &lt;code&gt;catch&lt;/code&gt;å—ä¸­ï¼‰ï¼Œè¿™ä¸ºæ‰§è¡Œè¿™äº›æ¸…ç†æ“ä½œæä¾›äº†å¤©ç„¶çš„å…¥å£ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ­£ç¡®çš„å¤„ç†æ–¹å¼"&gt;ğŸ› ï¸ æ­£ç¡®çš„å¤„ç†æ–¹å¼
&lt;/h3&gt;&lt;p&gt;å½“ä½ çš„ä»£ç æ•è·åˆ° &lt;code&gt;InterruptedException&lt;/code&gt;æ—¶ï¼Œæ­£ç¡®çš„å¤„ç†æ–¹å¼è‡³å…³é‡è¦ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯&lt;strong&gt;ä¸å¿½ç•¥ã€ä¿çŠ¶æ€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µï¼šæ¢å¤ä¸­æ–­çŠ¶æ€å¹¶é€€å‡º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€å¸¸è§ä¸”æ¨èçš„åšæ³•æ˜¯ï¼šåœ¨ &lt;code&gt;catch&lt;/code&gt;å—ä¸­ç«‹å³å†æ¬¡è®¾ç½®ä¸­æ–­çŠ¶æ€ï¼Œç„¶åé€€å‡ºå½“å‰ä»»åŠ¡ã€‚è¿™æ˜¯å› ä¸ºå½“ &lt;code&gt;InterruptedException&lt;/code&gt;è¢«æŠ›å‡ºæ—¶ï¼Œçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¼šè¢«æ¸…é™¤ï¼ˆé‡ç½®ä¸º &lt;code&gt;false&lt;/code&gt;ï¼‰ã€‚è°ƒç”¨ &lt;code&gt;Thread.currentThread().interrupt()&lt;/code&gt;å¯ä»¥é‡æ–°è®¾ç½®ä¸­æ–­çŠ¶æ€ï¼Œè¿™æ ·ä¸Šå±‚è°ƒç”¨è€…ä¹Ÿèƒ½æ„ŸçŸ¥åˆ°ä¸­æ–­å‘ç”Ÿäº† ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;try {
// å¯èƒ½æŠ›å‡º InterruptedException çš„æ“ä½œï¼Œå¦‚ï¼š
Thread.sleep(1000);
} catch (InterruptedException e) {
// 1. æ¢å¤ä¸­æ–­çŠ¶æ€
Thread.currentThread().interrupt();
// 2. æ‰§è¡Œå¿…è¦çš„æ¸…ç†å·¥ä½œ
// 3. é€€å‡ºå½“å‰ä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ return æˆ–æŠ›å‡ºå¼‚å¸¸ï¼‰
return;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éœ€è¦é¿å…çš„åšæ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€å±é™©çš„åšæ³•æ˜¯æ•è·å¼‚å¸¸åä»€ä¹ˆéƒ½ä¸åšï¼ˆç©º &lt;code&gt;catch&lt;/code&gt;å—ï¼‰ï¼Œè¿™ç›¸å½“äºå®Œå…¨åæ²¡äº†ä¸­æ–­è¯·æ±‚ï¼Œå¯èƒ½å¯¼è‡´çº¿ç¨‹æ— æ³•åœæ­¢ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ &lt;code&gt;InterruptedException&lt;/code&gt;èƒŒåçš„è®¾è®¡å“²å­¦ã€‚å¦‚æœä½ å¯¹ç‰¹å®šçš„å¤„ç†åœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ–è€…æƒ³äº†è§£æ›´å¤æ‚çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="threadlocal"&gt;ThreadLocal
&lt;/h2&gt;&lt;p&gt;ThreadLocal å˜é‡æœ¬èº«ï¼ˆå³ ThreadLocal å¯¹è±¡ï¼‰çš„åˆ›å»ºæ—¶æœºç”±å¼€å‘è€…æ§åˆ¶ï¼Œè€Œå®ƒå¯¹åº”çš„çº¿ç¨‹å±€éƒ¨å˜é‡å‰¯æœ¬ä»¥åŠåº•å±‚å­˜å‚¨ç»“æ„ï¼ˆThreadLocalMapï¼‰é€šå¸¸æ˜¯åœ¨çº¿ç¨‹&lt;strong&gt;åˆæ¬¡è°ƒç”¨&lt;/strong&gt; &lt;code&gt;set&lt;/code&gt;æˆ– &lt;code&gt;get&lt;/code&gt;æ–¹æ³•æ—¶è¢«åˆ›å»ºå’Œåˆå§‹åŒ–çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£è¿™ä¸€è¿‡ç¨‹ï¼Œä¸‹å›¾å±•ç¤ºäº† ThreadLocal åœ¨åˆæ¬¡ä½¿ç”¨æ—¶çš„åˆ›å»ºæµç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[çº¿ç¨‹è°ƒç”¨&amp;lt;br&amp;gt;ThreadLocal.set() æˆ– get()] --&amp;gt; B{å½“å‰çº¿ç¨‹çš„&amp;lt;br&amp;gt;ThreadLocalMap æ˜¯å¦å­˜åœ¨ï¼Ÿ}
B -- å¦ --&amp;gt; C[åˆ›å»º ThreadLocalMap]
B -- æ˜¯ --&amp;gt; D[åœ¨Mapä¸­æŸ¥æ‰¾&amp;lt;br&amp;gt;å¯¹åº”Entry]
C --&amp;gt; E[åˆ›å»ºæ–°çš„Entry&amp;lt;br&amp;gt;ï¼ˆé”®ä¸ºThreadLocalå¯¹è±¡ï¼Œå€¼ä¸ºsetçš„å€¼æˆ–initialValueï¼‰]
E --&amp;gt; F[å°†Entryå­˜å…¥Map]
D --&amp;gt; G{æ‰¾åˆ°æœ‰æ•ˆEntryï¼Ÿ}
G -- æ˜¯ --&amp;gt; H[è·å–æˆ–æ›´æ–°å€¼]
G -- å¦ --&amp;gt; E
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªåˆ›å»ºè¿‡ç¨‹åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®ç¯èŠ‚ï¼š&lt;/p&gt;
&lt;h3 id="-1-çº¿ç¨‹å±€éƒ¨å˜é‡å‰¯æœ¬ä¸å­˜å‚¨ç»“æ„çš„åˆ›å»º"&gt;ğŸ” 1. çº¿ç¨‹å±€éƒ¨å˜é‡å‰¯æœ¬ä¸å­˜å‚¨ç»“æ„çš„åˆ›å»º
&lt;/h3&gt;&lt;p&gt;å¦‚æµç¨‹å›¾æ‰€ç¤ºï¼Œå½“çº¿ç¨‹ç¬¬ä¸€æ¬¡è°ƒç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt;çš„ &lt;code&gt;set(T value)&lt;/code&gt;æˆ– &lt;code&gt;get()&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œä¼šæ£€æŸ¥å½“å‰çº¿ç¨‹ï¼ˆThread å¯¹è±¡ï¼‰å†…éƒ¨çš„ &lt;code&gt;threadLocals&lt;/code&gt;æˆå‘˜å˜é‡æ˜¯å¦ä¸º &lt;code&gt;null&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœä¸º &lt;code&gt;null&lt;/code&gt;&lt;/strong&gt;ï¼šè¯´æ˜çº¿ç¨‹æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ä»»ä½• &lt;code&gt;ThreadLocal&lt;/code&gt;å˜é‡ï¼Œä¼šå…ˆä¸ºå…¶åˆ›å»ºä¸€ä¸ª &lt;code&gt;ThreadLocalMap&lt;/code&gt;ï¼ˆè¿™æ˜¯ &lt;code&gt;ThreadLocal&lt;/code&gt;çš„ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¸“ä¸ºçº¿ç¨‹å±€éƒ¨å˜é‡è®¾è®¡çš„ç®€æ˜“ Mapï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éšååˆ›å»ºæ¡ç›®&lt;/strong&gt;ï¼šåœ¨æ–°å»ºçš„ &lt;code&gt;ThreadLocalMap&lt;/code&gt;ä¸­ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ¡ç›®ï¼ˆEntryï¼‰ã€‚è¿™ä¸ª Entry çš„ &lt;strong&gt;Key&lt;/strong&gt; æ˜¯å½“å‰çš„ &lt;code&gt;ThreadLocal&lt;/code&gt;å¯¹è±¡æœ¬èº«ï¼ˆçš„å¼±å¼•ç”¨ï¼‰ï¼Œè€Œ &lt;strong&gt;Value&lt;/strong&gt; åˆ™æ˜¯ä½ é€šè¿‡ &lt;code&gt;set&lt;/code&gt;æ–¹æ³•è®¾ç½®çš„å€¼ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ &lt;code&gt;get()&lt;/code&gt;ï¼Œåˆ™ Value æ˜¯ &lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•è¿”å›çš„åˆå§‹å€¼ï¼ˆé»˜è®¤æ˜¯ &lt;code&gt;null&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-2-å…³é”®æ–¹æ³•ä¸åˆå§‹åŒ–æ—¶æœº"&gt;ğŸ’¡ 2. å…³é”®æ–¹æ³•ä¸åˆå§‹åŒ–æ—¶æœº
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;set(T value)&lt;/code&gt;&lt;/strong&gt;ï¼šç›´æ¥è®¾ç½®å€¼ï¼Œå¦‚æœ &lt;code&gt;ThreadLocalMap&lt;/code&gt;ä¸å­˜åœ¨åˆ™ä¼šè§¦å‘åˆ›å»ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;get()&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;ThreadLocalMap&lt;/code&gt;å°šæœªåˆ›å»ºï¼Œæˆ–è€… Map ä¸­å°šæœªå­˜åœ¨ä¸å½“å‰ &lt;code&gt;ThreadLocal&lt;/code&gt;å¯¹è±¡å¯¹åº”çš„æœ‰æ•ˆ Entryï¼Œåˆ™ä¼šå…ˆè°ƒç”¨ &lt;code&gt;setInitialValue()&lt;/code&gt;æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šè°ƒç”¨ &lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•æ¥è·å–åˆå§‹å€¼ï¼Œå¹¶å®Œæˆ Map å’Œ Entry çš„åˆ›å»ºã€‚ä½ å¯ä»¥é€šè¿‡é‡å†™ &lt;code&gt;protected T initialValue()&lt;/code&gt;æ–¹æ³•æ¥æä¾›è‡ªå®šä¹‰çš„åˆå§‹å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-3-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ 3. é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;ï¼šæ¯ä¸ªçº¿ç¨‹çš„ &lt;code&gt;ThreadLocalMap&lt;/code&gt;ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°çº¿ç¨‹ç»“æŸã€‚å¦‚æœåœ¨çº¿ç¨‹æ± ç¯å¢ƒä¸­ï¼Œçº¿ç¨‹ä¼šè¢«å¤ç”¨è€Œä¸ä¼šç»“æŸï¼Œé‚£ä¹ˆå…¶ä¸­å­˜å‚¨çš„ &lt;code&gt;ThreadLocal&lt;/code&gt;å˜é‡å°±å¯èƒ½ä¸€ç›´å ç”¨å†…å­˜ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•å&lt;strong&gt;åŠ¡å¿…ä¸»åŠ¨è°ƒç”¨ &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;æ¥æ¸…ç†å½“å‰çº¿ç¨‹çš„å±€éƒ¨å˜é‡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å˜é‡ç‹¬ç«‹æ€§&lt;/strong&gt;ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰å„è‡ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ã€‚è¿™æ„å‘³ç€åŒä¸€ä¸ª &lt;code&gt;ThreadLocal&lt;/code&gt;å¯¹è±¡åœ¨ä¸åŒçº¿ç¨‹ä¸­æ“ä½œçš„æ˜¯å®Œå…¨ä¸åŒçš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å®Œå…¨ç†è§£ ThreadLocal çš„åˆ›å»ºæœºåˆ¶ã€‚å¦‚æœå¯¹ç‰¹å®šä½¿ç”¨åœºæ™¯è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="initvalue"&gt;initValue()
&lt;/h2&gt;&lt;p&gt;é‡å†™ &lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•æ˜¯ä¸º ThreadLocal å˜é‡æä¾›åˆå§‹å€¼çš„å…³é”®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¯¦ç»†çš„æŒ‡å—ï¼ŒåŒ…å«æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-é‡å†™-initialvalue-çš„ä¸¤ç§æ–¹æ³•"&gt;ğŸ› ï¸ é‡å†™ initialValue() çš„ä¸¤ç§æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§ä¸»æµæ–¹å¼æ¥ä¸ºä½ çš„ ThreadLocal å˜é‡è®¾ç½®åˆå§‹å€¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;ä»£ç ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åå†…éƒ¨ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ThreadLocal&amp;lt;String&amp;gt; threadLocal = new ThreadLocal&amp;lt;String&amp;gt;() {&lt;/code&gt; &lt;code&gt;@Override&lt;/code&gt; &lt;code&gt;protected String initialValue() {&lt;/code&gt; &lt;code&gt;return &amp;quot;é»˜è®¤å€¼&amp;quot;;&lt;/code&gt; &lt;code&gt;}&lt;/code&gt; &lt;code&gt;};&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿæ–¹å¼ï¼Œé€šè¿‡é‡å†™æ–¹æ³•è¿”å›åˆå§‹å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Lambdaè¡¨è¾¾å¼&lt;/strong&gt; (æ¨è)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ThreadLocal&amp;lt;String&amp;gt; threadLocal = ThreadLocal.withInitial(() -&amp;gt; &amp;quot;é»˜è®¤å€¼&amp;quot;);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Java 8 å¼•å…¥çš„è¯­æ³•ï¼Œæ›´ç®€æ´ã€‚åº•å±‚åˆ›å»º&lt;code&gt;SuppliedThreadLocal&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®è¦ç‚¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ å…³é”®è¦ç‚¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿ŸåŠ è½½&lt;/strong&gt;ï¼š&lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•å¹¶éåœ¨åˆ›å»º &lt;code&gt;ThreadLocal&lt;/code&gt;å¯¹è±¡æ—¶æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨çº¿ç¨‹&lt;strong&gt;é¦–æ¬¡è°ƒç”¨&lt;/strong&gt; &lt;code&gt;get()&lt;/code&gt;æ–¹æ³•ä¸”ä¹‹å‰æœªè°ƒç”¨è¿‡ &lt;code&gt;set()&lt;/code&gt;æ–¹æ³•æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚è¿™æ˜¯ä¸€ç§å»¶è¿ŸåŠ è½½æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤è¿”å›null&lt;/strong&gt;ï¼šå¦‚æœä½ ä¸é‡å†™ &lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•ï¼Œé»˜è®¤å®ç°ä¼šè¿”å› &lt;code&gt;null&lt;/code&gt;ã€‚å› æ­¤ï¼Œç›´æ¥è°ƒç”¨ &lt;code&gt;get()&lt;/code&gt;æ–¹æ³•å¯èƒ½ä¼šå¾—åˆ° &lt;code&gt;null&lt;/code&gt;ï¼Œåœ¨åç»­ä½¿ç”¨ä¸­å¯èƒ½å¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;set() çš„ä¼˜å…ˆçº§&lt;/strong&gt;ï¼šå¦‚æœçº¿ç¨‹å…ˆè°ƒç”¨äº† &lt;code&gt;set(T value)&lt;/code&gt;æ–¹æ³•ï¼Œé‚£ä¹ˆ &lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ï¼Œ&lt;code&gt;get()&lt;/code&gt;ä¼šè¿”å›ä½ è®¾ç½®çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…åˆ remove() ä½¿ç”¨&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨å®Œ ThreadLocal åï¼ˆå°¤å…¶æ˜¯åœ¨çº¿ç¨‹æ± ç­‰ä¼šå¤ç”¨çº¿ç¨‹çš„åœºæ™¯ä¸‹ï¼‰ï¼ŒåŠ¡å¿…è°ƒç”¨ &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•æ¸…ç†å½“å‰çº¿ç¨‹çš„å˜é‡å‰¯æœ¬ã€‚è¿™æ ·ï¼Œå¦‚æœä¹‹åè¯¥çº¿ç¨‹å†æ¬¡è°ƒç”¨ &lt;code&gt;get()&lt;/code&gt;ï¼Œ&lt;code&gt;initialValue()&lt;/code&gt;åˆä¼šè¢«è§¦å‘ï¼Œæä¾›ä¸€ä¸ªå…¨æ–°çš„åˆå§‹å€¼ï¼ŒåŒæ—¶ä¹Ÿèƒ½æœ‰æ•ˆé¿å…å†…å­˜æ³„æ¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜æ¡ˆä¾‹"&gt;ğŸ’¡ ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜æ¡ˆä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿç”¨æˆ·ç™»å½•ä¸Šä¸‹æ–‡çš„å®Œæ•´ç¤ºä¾‹ï¼Œå±•ç¤ºäº† ThreadLocal çš„å…¸å‹ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class UserContextHolder {
// ä½¿ç”¨ withInitial æ–¹æ³•é‡å†™ initialValueï¼Œåˆå§‹ä¸º &amp;#34;æœªçŸ¥ç”¨æˆ·&amp;#34;
private static final ThreadLocal&amp;lt;String&amp;gt; currentUser = ThreadLocal.withInitial(() -&amp;gt; &amp;#34;æœªçŸ¥ç”¨æˆ·&amp;#34;);
public static void setCurrentUser(String username) {
currentUser.set(username);
}
public static String getCurrentUser() {
return currentUser.get();
}
public static void clear() {
// é‡è¦ï¼šä½¿ç”¨åæ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œæ—§æ•°æ®å¹²æ‰°
currentUser.remove();
}
// ç¤ºä¾‹ï¼šåœ¨ä¸šåŠ¡æ–¹æ³•ä¸­ä½¿ç”¨
public void businessMethod() {
try {
// å¯ä»¥ç›´æ¥è·å–å½“å‰çº¿ç¨‹çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ— éœ€å‚æ•°ä¼ é€’
System.out.println(&amp;#34;å½“å‰æ“ä½œç”¨æˆ·: &amp;#34; + UserContextHolder.getCurrentUser());
// ... å…¶ä»–ä¸šåŠ¡é€»è¾‘
} finally {
// ç¡®ä¿åœ¨finallyå—ä¸­æ¸…ç†ï¼Œä¾‹å¦‚åœ¨Webè¯·æ±‚å¤„ç†ç»“æŸæ—¶
UserContextHolder.clear();
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ ThreadLocal çš„ &lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="fqn"&gt;FQN
&lt;/h2&gt;&lt;p&gt;åœ¨Javaä¸­ï¼Œå†…éƒ¨ç±»çš„&lt;strong&gt;å®Œå…¨é™å®šå&lt;/strong&gt; æ ¼å¼éå¸¸æ˜ç¡®ï¼Œå®ƒæ¸…æ™°åœ°åæ˜ äº†å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»ä¹‹é—´çš„ä»å±å…³ç³»ã€‚å…¶åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h3 id="å®Œå…¨é™å®šåçš„ç»„æˆ"&gt;å®Œå…¨é™å®šåçš„ç»„æˆ
&lt;/h3&gt;&lt;p&gt;å†…éƒ¨ç±»çš„å®Œå…¨é™å®šåï¼ˆFully Qualified Name, FQNï¼‰éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;å¤–éƒ¨ç±»çš„å®Œå…¨é™å®šå&amp;gt;$&amp;lt;å†…éƒ¨ç±»åç§°&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;å¤–éƒ¨ç±»çš„å®Œå…¨é™å®šå&amp;gt;&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡çš„æ˜¯åŒ…å«å†…éƒ¨ç±»çš„é‚£ä¸ªå¤–éƒ¨ç±»çš„å®Œæ•´åŒ…è·¯å¾„å’Œç±»åã€‚ä¾‹å¦‚ &lt;code&gt;com.example.OuterClass&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;$&lt;/code&gt;ç¬¦å·&lt;/strong&gt;ï¼šè¿™æ˜¯è¿æ¥å¤–éƒ¨ç±»åå’Œå†…éƒ¨ç±»åçš„å›ºå®šåˆ†éš”ç¬¦ï¼Œç”±Javaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;lt;å†…éƒ¨ç±»åç§°&amp;gt;&lt;/code&gt;&lt;/strong&gt;ï¼šå°±æ˜¯å†…éƒ¨ç±»è‡ªå·±å®šä¹‰çš„åç§°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å†…éƒ¨ç±»å®Œå…¨é™å®šåç¤ºä¾‹"&gt;å†…éƒ¨ç±»å®Œå…¨é™å®šåç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼é€šè¿‡å…·ä½“ä¾‹å­å±•ç¤ºäº†ä¸åŒç±»å‹å†…éƒ¨ç±»çš„å®Œå…¨é™å®šåï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å†…éƒ¨ç±»ç±»å‹&lt;/th&gt;
&lt;th&gt;ä»£ç ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;å®Œå…¨é™å®šåç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ™®é€šæˆå‘˜å†…éƒ¨ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;class Outer { class Inner {} }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;com.example.Outer$Inner&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€å†…éƒ¨ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;class Outer { static class StaticNested {} }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;com.example.Outer$StaticNested&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å±€éƒ¨å†…éƒ¨ç±»&lt;/strong&gt; (å®šä¹‰åœ¨æ–¹æ³•å†…)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;void method() { class Local {} }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;com.example.Outer$1Local&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åå†…éƒ¨ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;new Runnable() { ... }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;com.example.Outer$1&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šå±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»çš„åç§°ä¸­çš„æ•°å­—ï¼ˆå¦‚ &lt;code&gt;$1Local&lt;/code&gt;å’Œ &lt;code&gt;$1&lt;/code&gt;ï¼‰æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ç¼–å·ï¼Œç”¨ä»¥åŒºåˆ†åœ¨åŒä¸€ä½œç”¨åŸŸå†…å®šä¹‰çš„å¤šä¸ªåŒç±»å†…éƒ¨ç±»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="åœ¨ä»£ç ä¸­ä½¿ç”¨å†…éƒ¨ç±»çš„å®Œå…¨é™å®šå"&gt;åœ¨ä»£ç ä¸­ä½¿ç”¨å†…éƒ¨ç±»çš„å®Œå…¨é™å®šå
&lt;/h3&gt;&lt;p&gt;äº†è§£å®Œå…¨é™å®šååœ¨å®é™…ç¼–ç¨‹ä¸­å¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨åå°„æ—¶ã€‚ä»¥ä¸‹æ˜¯ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡å¤–éƒ¨ç±»å®ä¾‹åˆ›å»º&lt;/strong&gt;ï¼šè¿™æ˜¯æ›´å¸¸è§çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// é¦–å…ˆåˆ›å»ºå¤–éƒ¨ç±»å®ä¾‹
com.example.OuterClass outerObject = new com.example.OuterClass();
// ç„¶åé€šè¿‡å¤–éƒ¨ç±»å®ä¾‹åˆ›å»ºå†…éƒ¨ç±»å®ä¾‹
com.example.OuterClass$InnerClass innerObject = outerObject.new InnerClass();
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€šè¿‡åå°„åŠ è½½&lt;/strong&gt;ï¼šä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å†…éƒ¨ç±»çš„å®Œå…¨é™å®šåæ¥è·å–å…¶ &lt;code&gt;Class&lt;/code&gt;å¯¹è±¡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;try {
Class&amp;lt;?&amp;gt; innerClazz = Class.forName(&amp;#34;com.example.OuterClass$InnerClass&amp;#34;);
} catch (ClassNotFoundException e) {
e.printStackTrace();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å†…éƒ¨ç±»å®Œå…¨é™å®šåçš„å½¢æˆé€»è¾‘"&gt;å†…éƒ¨ç±»å®Œå…¨é™å®šåçš„å½¢æˆé€»è¾‘
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å†…éƒ¨ç±»å®Œå…¨é™å®šåçš„ç”Ÿæˆè§„åˆ™ï¼Œä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†å…¶æ„æˆé€»è¾‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å†…éƒ¨ç±»å®Œå…¨é™å®šå&amp;lt;br&amp;gt;com.example.OuterClass$InnerClass] --&amp;gt; B1[å¤–éƒ¨ç±»å®Œå…¨é™å®šå&amp;lt;br&amp;gt;com.example.OuterClass]
A --&amp;gt; B2[åˆ†éš”ç¬¦&amp;lt;br&amp;gt;$]
A --&amp;gt; B3[å†…éƒ¨ç±»æœ¬å&amp;lt;br&amp;gt;InnerClass]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="é‡è¦è¯´æ˜"&gt;é‡è¦è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æºæ–‡ä»¶ä¸classæ–‡ä»¶&lt;/strong&gt;ï¼šåœ¨Javaæºä»£ç ï¼ˆ.javaæ–‡ä»¶ï¼‰ä¸­å¼•ç”¨å†…éƒ¨ç±»æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç‚¹å·ï¼ˆ.ï¼‰ï¼Œä¾‹å¦‚ &lt;code&gt;OuterClass.InnerClass&lt;/code&gt;ã€‚ä½†ç¼–è¯‘å™¨åœ¨å¤„ç†åä¼šç”Ÿæˆå¯¹åº”çš„classæ–‡ä»¶ï¼Œå…¶æ–‡ä»¶åå’Œå†…éƒ¨ç±»åœ¨JVMä¸­çš„æ­£å¼åç§°ä½¿ç”¨çš„å°±æ˜¯**ç¾å…ƒç¬¦å·ï¼ˆï¼‰âˆ—âˆ—ã€‚â€˜OuterClass.InnerClassâ€˜æ›´åƒæ˜¯Javaè¯­æ³•æä¾›çš„ç®€å†™å½¢å¼ï¼Œè€Œâ€˜OuterClassInnerClass` æ˜¯å…¶åœ¨JVMä¸­çš„â€œçœŸåâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆéœ€è¦å®Œå…¨é™å®šå&lt;/strong&gt;ï¼šå®Œå…¨é™å®šåçš„ä¸»è¦ä½œç”¨æ˜¯&lt;strong&gt;å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç±»&lt;/strong&gt;ï¼Œé¿å…åœ¨å¤§å‹é¡¹ç›®æˆ–ä½¿ç”¨ä¸åŒåº“æ—¶ï¼Œå› ç±»åç›¸åŒï¼ˆä¾‹å¦‚å¤šä¸ª &lt;code&gt;Utils&lt;/code&gt;ç±»ï¼‰è€Œå¼•å‘å†²çªã€‚åŒ…æœºåˆ¶é€šè¿‡å‘½åç©ºé—´å®ç°äº†ç±»çš„éš”ç¦»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ å®Œå…¨ç†è§£Javaå†…éƒ¨ç±»çš„å®Œå…¨é™å®šåã€‚&lt;/p&gt;
&lt;h2 id="switch-case"&gt;switch case
&lt;/h2&gt;&lt;p&gt;åœ¨ Java ç¼–ç¨‹ä¸­ï¼Œä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸º &lt;code&gt;switch&lt;/code&gt;è¯­å¥çš„æ¡ä»¶å¯ä»¥è®©å¤šåˆ†æ”¯é€»è¾‘å˜å¾—æ›´åŠ æ¸…æ™°å’Œç›´è§‚ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»å…¶ç”¨æ³•ã€æ³¨æ„äº‹é¡¹å’Œåº•å±‚åŸç†ã€‚&lt;/p&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•ä¸è¦æ±‚"&gt;ğŸ” åŸºæœ¬è¯­æ³•ä¸è¦æ±‚
&lt;/h3&gt;&lt;p&gt;åœ¨ Java ä¸­ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸º &lt;code&gt;switch&lt;/code&gt;è¯­å¥çš„æ¡ä»¶ï¼Œéœ€è¦ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ”¯æŒ &lt;strong&gt;Java 7 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ã€‚è¿™æ˜¯å­—ç¬¦ä¸²æ”¯æŒ &lt;code&gt;switch&lt;/code&gt;è¯­å¥çš„èµ·å§‹ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String fruit = &amp;#34;apple&amp;#34;;
switch (fruit) {
case &amp;#34;apple&amp;#34;:
System.out.println(&amp;#34;è¿™æ˜¯ä¸€ä¸ªè‹¹æœã€‚&amp;#34;);
break;
case &amp;#34;banana&amp;#34;:
System.out.println(&amp;#34;è¿™æ˜¯ä¸€ä¸ªé¦™è•‰ã€‚&amp;#34;);
break;
case &amp;#34;orange&amp;#34;:
System.out.println(&amp;#34;è¿™æ˜¯ä¸€ä¸ªæ©™å­ã€‚&amp;#34;);
break;
default:
System.out.println(&amp;#34;æœªçŸ¥æ°´æœã€‚&amp;#34;);
break;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨æ—¶æœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡¨è¾¾å¼ç±»å‹&lt;/strong&gt;ï¼š&lt;code&gt;switch&lt;/code&gt;åé¢çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼ˆ&lt;code&gt;String&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Case å€¼&lt;/strong&gt;ï¼šæ¯ä¸ª &lt;code&gt;case&lt;/code&gt;æ ‡ç­¾åé¢å¿…é¡»è·Ÿä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡æˆ–å­—é¢é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Break è¯­å¥&lt;/strong&gt;ï¼šé€šå¸¸æ¯ä¸ª &lt;code&gt;case&lt;/code&gt;åˆ†æ”¯çš„æœ«å°¾éƒ½éœ€è¦ä½¿ç”¨ &lt;code&gt;break&lt;/code&gt;è¯­å¥æ¥é˜²æ­¢â€œcaseç©¿é€â€ï¼ˆå³ç»§ç»­æ‰§è¡Œåç»­ &lt;code&gt;case&lt;/code&gt;åˆ†æ”¯çš„ä»£ç ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹"&gt;âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å… Case ç©¿é€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¿˜è®°å†™ &lt;code&gt;break&lt;/code&gt;æ˜¯å¸¸è§çš„é”™è¯¯ã€‚å¦‚æœæ•…æ„åˆ©ç”¨ç©¿é€æ•ˆåº”ï¼ˆä¾‹å¦‚å¤šä¸ª &lt;code&gt;case&lt;/code&gt;æ‰§è¡Œç›¸åŒä»£ç ï¼‰ï¼Œè¯·åŠ¡å¿…æ·»åŠ æ³¨é‡Šè¯´æ˜ï¼Œä»¥æé«˜ä»£ç å¯è¯»æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String color = &amp;#34;red&amp;#34;;
switch (color) {
case &amp;#34;red&amp;#34;:
case &amp;#34;pink&amp;#34;: // æ•…æ„ä¸å†™ breakï¼Œè®© &amp;#34;red&amp;#34; å’Œ &amp;#34;pink&amp;#34; æ‰§è¡Œç›¸åŒä»£ç 
System.out.println(&amp;#34;è¿™æ˜¯çº¢è‰²ç³»ã€‚&amp;#34;);
break;
case &amp;#34;blue&amp;#34;:
System.out.println(&amp;#34;è¿™æ˜¯è“è‰²ã€‚&amp;#34;);
break;
default:
System.out.println(&amp;#34;æœªçŸ¥é¢œè‰²ã€‚&amp;#34;);
break;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†å¤§å°å†™æ•æ„Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­—ç¬¦ä¸²æ¯”è¾ƒåœ¨ &lt;code&gt;switch&lt;/code&gt;è¯­å¥ä¸­æ˜¯&lt;strong&gt;åŒºåˆ†å¤§å°å†™&lt;/strong&gt;çš„ã€‚å¦‚æœå¸Œæœ›å¿½ç•¥å¤§å°å†™ï¼Œå¯ä»¥å…ˆå°†å­—ç¬¦ä¸²ç»Ÿä¸€è½¬æ¢ä¸ºå°å†™ï¼ˆæˆ–å¤§å†™ï¼‰ï¼Œä½†åŠ¡å¿…ç¡®ä¿ &lt;code&gt;case&lt;/code&gt;æ ‡ç­¾çš„å€¼ä¹Ÿä½¿ç”¨ç›¸åŒçš„å¤§å°å†™å½¢å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String input = &amp;#34;YES&amp;#34;;
switch (input.toLowerCase()) { // è½¬æ¢ä¸ºå°å†™
case &amp;#34;yes&amp;#34;: // case æ ‡ç­¾ä¹Ÿä½¿ç”¨å°å†™
System.out.println(&amp;#34;ç”¨æˆ·ç¡®è®¤äº†ã€‚&amp;#34;);
break;
case &amp;#34;no&amp;#34;:
System.out.println(&amp;#34;ç”¨æˆ·æ‹’ç»äº†ã€‚&amp;#34;);
break;
default:
System.out.println(&amp;#34;è¾“å…¥æ— æ•ˆã€‚&amp;#34;);
break;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å–„ç”¨ Default åˆ†æ”¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å³ä½¿ä½ è®¤ä¸ºå·²ç»è¦†ç›–æ‰€æœ‰æƒ…å†µï¼Œä¹Ÿå»ºè®®ä½¿ç”¨ &lt;code&gt;default&lt;/code&gt;åˆ†æ”¯æ¥å¤„ç†æ„å¤–å€¼ï¼Œè¿™èƒ½ä½¿ç¨‹åºæ›´å¥å£®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç† Null å€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;switch&lt;/code&gt;è¯­å¥çš„è¡¨è¾¾å¼ä¸èƒ½ä¸º &lt;code&gt;null&lt;/code&gt;ï¼Œå¦åˆ™ä¼šæŠ›å‡º &lt;code&gt;NullPointerException&lt;/code&gt;ã€‚å¦‚æœå˜é‡æœ‰å¯èƒ½ä¸º &lt;code&gt;null&lt;/code&gt;ï¼Œåº”å…ˆè¿›è¡Œåˆ¤æ–­ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;if (myString != null) {
switch (myString) {
// ... case åˆ†æ”¯
}
} else {
// å¤„ç† null æƒ…å†µ
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº•å±‚åŸç†ä¸æ€§èƒ½"&gt;ğŸ”§ åº•å±‚åŸç†ä¸æ€§èƒ½
&lt;/h3&gt;&lt;p&gt;ä» Java 7 å¼€å§‹ï¼Œç¼–è¯‘å™¨æ”¯æŒåœ¨ &lt;code&gt;switch&lt;/code&gt;è¯­å¥ä¸­ä½¿ç”¨å­—ç¬¦ä¸²ã€‚å…¶åº•å±‚æ˜¯é€šè¿‡è°ƒç”¨å­—ç¬¦ä¸²çš„ &lt;code&gt;hashCode()&lt;/code&gt;æ–¹æ³•å¾—åˆ°ä¸€ä¸ªæ•´æ•°ï¼Œç„¶ååŸºäºè¿™ä¸ªæ•´æ•°å€¼è¿›è¡Œ &lt;code&gt;switch&lt;/code&gt;åˆ¤æ–­ã€‚å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼ç›¸åŒï¼ˆå³å“ˆå¸Œå†²çªï¼‰ï¼Œè¿˜ä¼šä½¿ç”¨ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•è¿›è¡Œç²¾ç¡®çš„å­—ç¬¦ä¸²æ¯”è¾ƒä»¥ç¡®ä¿å‡†ç¡®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ€§èƒ½ä¸Šï¼Œå¯¹äºåˆ†æ”¯è¾ƒå¤šçš„æƒ…å†µï¼Œä½¿ç”¨ &lt;code&gt;switch&lt;/code&gt;è¯­å¥é€šå¸¸æ¯”ä¸€è¿ä¸²çš„ &lt;code&gt;if-else-if&lt;/code&gt;è¯­å¥æ•ˆç‡æ›´é«˜ï¼Œå› ä¸º &lt;code&gt;switch&lt;/code&gt;é€šå¸¸åŸºäºå“ˆå¸Œå€¼å®ç°è·³è½¬ã€‚&lt;/p&gt;
&lt;h3 id="-æœ€ä½³å®è·µä¸æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ’¡ æœ€ä½³å®è·µä¸æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶å­—ç¬¦ä¸² &lt;code&gt;switch&lt;/code&gt;å¾ˆæ–¹ä¾¿ï¼Œä½†å¹¶éæ‰€æœ‰æƒ…å†µéƒ½æ˜¯æœ€ä½³é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ”¯éå¸¸å¤šæˆ–å¤æ‚&lt;/strong&gt;ï¼šå¦‚æœåˆ†æ”¯æ•°é‡æå¤§ï¼Œæˆ–è€…åŒ¹é…é€»è¾‘éå¸¸å¤æ‚ï¼Œè€ƒè™‘ä½¿ç”¨ &lt;strong&gt;Map&lt;/strong&gt; ç»“æ„å°†å­—ç¬¦ä¸²æ˜ å°„åˆ°ç›¸åº”çš„å¤„ç†é€»è¾‘ï¼ˆå¦‚ Runnable æˆ– Consumerï¼‰ï¼Œå¯èƒ½æ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ›´çµæ´»çš„æ¨¡å¼åŒ¹é…&lt;/strong&gt;ï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Java 14 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¯ä»¥å…³æ³¨ &lt;strong&gt;Switch è¡¨è¾¾å¼&lt;/strong&gt; å’Œ &lt;strong&gt;æ¨¡å¼åŒ¹é…&lt;/strong&gt; çš„ç‰¹æ€§ï¼Œå®ƒä»¬æä¾›äº†æ›´å¼ºå¤§å’Œç®€æ´çš„å†™æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-16"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åœ¨ Java 7 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸º &lt;code&gt;switch&lt;/code&gt;è¯­å¥çš„æ¡ä»¶ï¼Œè¿™èƒ½è®©ä»£ç æ›´æ¸…æ™°ã€‚å…³é”®æ˜¯è¦æ³¨æ„ &lt;code&gt;break&lt;/code&gt;çš„ä½¿ç”¨ã€å¤§å°å†™æ•æ„Ÿé—®é¢˜ï¼Œå¹¶å¦¥å–„å¤„ç† &lt;code&gt;null&lt;/code&gt;å€¼å’Œæœªé¢„è§åˆ°çš„æƒ…å†µã€‚ç†è§£å…¶åŸºäºå“ˆå¸Œå€¼çš„å®ç°åŸç†æœ‰åŠ©äºä½ æ›´å¥½åœ°ä½¿ç”¨è¿™ä¸€ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åœ¨ç¨‹åºä¸­ä½¿ç”¨å­—ç¬¦ä¸²å¼€å…³è¯­å¥ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨è¿˜æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­äº¤æµã€‚&lt;/p&gt;
&lt;h2 id="å¤šä¸ªæ¥å£"&gt;å¤šä¸ªæ¥å£
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼ŒJava å®Œå…¨å…è®¸å¤šä¸ªæ¥å£å®šä¹‰å…·æœ‰ç›¸åŒç­¾åçš„æ–¹æ³•ï¼Œå¹¶ä¸”ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°è¿™äº›æ¥å£ã€‚è¿™ç§è®¾è®¡æ˜¯ Java å®ç°å¤šç»§æ‰¿ç‰¹æ€§çš„æ ¸å¿ƒæœºåˆ¶ã€‚å…¶å¤„ç†æ–¹å¼éå¸¸ç›´è§‚ï¼š&lt;strong&gt;å®ç°ç±»åªéœ€æä¾›ä¸€ä¸ªè¯¥æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œå³å¯åŒæ—¶æ»¡è¶³æ‰€æœ‰åŒ…å«æ­¤ç›¸åŒç­¾åæ–¹æ³•çš„æ¥å£çš„è¦æ±‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼æ¸…æ™°åœ°æ€»ç»“äº†åœ¨ä¸åŒæƒ…å†µä¸‹ï¼ŒJava ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†å¤šä¸ªæ¥å£ä¸­çš„æ–¹æ³•ç­¾åå†²çªã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯æè¿°&lt;/th&gt;
&lt;th&gt;ç¼–è¯‘å™¨å¤„ç†æ–¹å¼&lt;/th&gt;
&lt;th&gt;å®ç°ç±»éœ€è¦åšä»€ä¹ˆï¼Ÿ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•ç­¾åä¸è¿”å›ç±»å‹å®Œå…¨ç›¸åŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§†ä¸ºåŒä¸€ä¸ªæ–¹æ³•ï¼ˆ&lt;code&gt;@Override&lt;/code&gt;ç­‰æ•ˆï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åªéœ€æä¾›ä¸€ä¸ªå®ç°&lt;/strong&gt;ï¼Œè¯¥å®ç°é€‚ç”¨äºæ‰€æœ‰ç›¸å…³æ¥å£ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•ç­¾åç›¸åŒä½†è¿”å›ç±»å‹ä¸åŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼–è¯‘é”™è¯¯&lt;/strong&gt;ã€‚è¿åäº†æ–¹æ³•é‡å†™çš„åŸºæœ¬è§„åˆ™ã€‚&lt;/td&gt;
&lt;td&gt;æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå¿…é¡»ä¿®æ”¹æ¥å£æˆ–ç±»è®¾è®¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¥å£æä¾›äº†å†²çªçš„&lt;code&gt;default&lt;/code&gt;æ–¹æ³•å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘å™¨ä¼šæŠ¥å‘Šå†²çªã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»åœ¨è¯¥å®ç°ç±»ä¸­é‡å†™è¿™ä¸ªå†²çªæ–¹æ³•&lt;/strong&gt;ï¼Œä»¥æ¶ˆé™¤æ­§ä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="å…·ä½“åœºæ™¯ä¸ä»£ç ç¤ºä¾‹"&gt;å…·ä½“åœºæ™¯ä¸ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®Œç¾å…¼å®¹ï¼šç­¾åå’Œè¿”å›ç±»å‹ç›¸åŒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§ä¸”ç†æƒ³çš„æƒ…å†µã€‚ç”±äºæ–¹æ³•åœ¨å„ä¸ªæ–¹é¢éƒ½å®Œå…¨ä¸€è‡´ï¼Œç¼–è¯‘å™¨è®¤ä¸ºå®ƒä»¬å°±æ˜¯åŒä¸€ä¸ªæ–¹æ³•çº¦å®šã€‚å®ç°ç±»åªéœ€ä¸€æ¬¡å®ç°ï¼Œå³å¯å±¥è¡Œæ‰€æœ‰æ¥å£çš„å¥‘çº¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å®šä¹‰ä¸¤ä¸ªæ¥å£ï¼Œå®ƒä»¬æ‹¥æœ‰å®Œå…¨ç›¸åŒçš„æ–¹æ³•
interface Animal {
void makeSound(); // æ–¹æ³•ç­¾åï¼šmakeSound()
}
interface Machine {
void makeSound(); // æ–¹æ³•ç­¾åï¼šmakeSound()
}
// Robotç±»åŒæ—¶å®ç°ä¸¤ä¸ªæ¥å£
class Robot implements Animal, Machine {
// åªéœ€è¦ä¸€ä¸ªå®ç°ï¼Œå³å¯åŒæ—¶æ»¡è¶³Animalå’ŒMachineæ¥å£çš„è¦æ±‚
@Override
public void makeSound() {
System.out.println(&amp;#34;Beep Boop!&amp;#34;);
}
}
public class Main {
public static void main(String[] args) {
Robot r = new Robot();
r.makeSound(); // è¾“å‡º: Beep Boop!
// é€šè¿‡ä¸åŒæ¥å£ç±»å‹å¼•ç”¨ï¼Œè°ƒç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ç°
Animal a = r;
a.makeSound(); // è¾“å‡º: Beep Boop!
Machine m = r;
m.makeSound(); // è¾“å‡º: Beep Boop!
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ— æ³•è°ƒå’Œï¼šç­¾åç›¸åŒä½†è¿”å›ç±»å‹ä¸åŒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ç›¸åŒä½†è¿”å›ç±»å‹ä¸åŒï¼Œè¿™å°†äº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚å› ä¸ºåœ¨ Java çš„æ–¹æ³•é‡è½½è§„åˆ™ä¸­ï¼Œè¿”å›ç±»å‹ä¸åŒä¸è¶³ä»¥åŒºåˆ†ä¸¤ä¸ªæ–¹æ³•ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šåº”è¯¥å®ç°å“ªä¸ªç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;interface Gift {
void present(); // è¿”å›ç±»å‹ä¸º void
}
interface Guest {
boolean present(); // è¿”å›ç±»å‹ä¸º boolean
}
// ç¼–è¯‘é”™è¯¯ï¼šClass &amp;#39;Presentable&amp;#39; must either be declared abstract
// or implement abstract method &amp;#39;present()&amp;#39; in &amp;#39;Guest&amp;#39;
// å®é™…ä¸Šæ˜¯å› ä¸ºä¸¤ä¸ªpresent()æ–¹æ³•å†²çªï¼Œå¯¼è‡´æ— æ³•å®ç°ã€‚
class Presentable implements Gift, Guest {
// æ— æ³•åŒæ—¶å®ç° void present() å’Œ boolean present()
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Java 8+ ç‰¹æ€§ï¼šå¤„ç†é»˜è®¤æ–¹æ³•å†²çª&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä» Java 8 å¼€å§‹ï¼Œæ¥å£å¯ä»¥åŒ…å«å¸¦æœ‰å…·ä½“å®ç°çš„é»˜è®¤æ–¹æ³•ï¼ˆ&lt;code&gt;default&lt;/code&gt;æ–¹æ³•ï¼‰ã€‚å¦‚æœä¸¤ä¸ªæ¥å£æä¾›äº†ç›¸åŒç­¾åçš„é»˜è®¤æ–¹æ³•ï¼Œå°±ä¼šåœ¨å®ç°ç±»ä¸­å¼•å‘å†²çªã€‚è§£å†³æ–¹æ³•æ˜¯&lt;strong&gt;å¼ºåˆ¶å®ç°ç±»é‡å†™è¯¥é»˜è®¤æ–¹æ³•&lt;/strong&gt;ã€‚åœ¨é‡å†™æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æä¾›å…¨æ–°çš„å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨æŸä¸ªç‰¹å®šæ¥å£çš„é»˜è®¤å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;interface Flyable {
default void activate() {
System.out.println(&amp;#34;Flying high!&amp;#34;);
}
}
interface Swimmable {
default void activate() {
System.out.println(&amp;#34;Diving deep!&amp;#34;);
}
}
// Duckç±»å¿…é¡»é‡å†™å†²çªçš„activateæ–¹æ³•
class Duck implements Flyable, Swimmable {
@Override
public void activate() {
// è§£å†³æ–¹æ¡ˆ1ï¼šé€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ¥å£çš„é»˜è®¤å®ç°
Flyable.super.activate(); // æ˜ç¡®è°ƒç”¨Flyableçš„activate
// è§£å†³æ–¹æ¡ˆ2ï¼šæˆ–è€…å®Œå…¨è‡ªå·±å®ç°
System.out.println(&amp;#34;The duck is quacking and ready for action!&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒè¦ç‚¹ä¸è®¾è®¡å“²å­¦"&gt;ğŸ’¡ æ ¸å¿ƒè¦ç‚¹ä¸è®¾è®¡å“²å­¦
&lt;/h3&gt;&lt;p&gt;Java çš„è¿™ç§è®¾è®¡ä½“ç°äº†å…¶â€œå¥‘çº¦ä¼˜å…ˆâ€çš„æ€æƒ³ã€‚æ¥å£å®šä¹‰çš„æ˜¯â€œèƒ½åšä»€ä¹ˆâ€ï¼ˆè¡Œä¸ºå¥‘çº¦ï¼‰ï¼Œè€Œç±»åˆ™è´Ÿè´£â€œæ€ä¹ˆåšâ€ï¼ˆå…·ä½“å®ç°ï¼‰ã€‚å½“å¤šä¸ªæ¥å£å®šä¹‰äº†ç›¸åŒçš„è¡Œä¸ºå¥‘çº¦æ—¶ï¼Œå®ç°ç±»ç”¨ä¸€ä¸ªç»Ÿä¸€çš„è¡Œä¸ºæ¥å±¥è¡Œæ‰€æœ‰è¿™äº›å¥‘çº¦ï¼Œè¿™åœ¨é€»è¾‘ä¸Šæ˜¯å®Œå…¨åˆç†ä¸”é«˜æ•ˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ Java ä¸­å¤šæ¥å£æ–¹æ³•ç»§æ‰¿çš„æœºåˆ¶ï¼&lt;/p&gt;
&lt;h2 id="æ„é€ æ–¹æ³•"&gt;æ„é€ æ–¹æ³•
&lt;/h2&gt;&lt;p&gt;åœ¨Javaä¸­ï¼Œå­ç±»ä¸ä¼šç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œè¿™æ˜¯ç”±Javaçš„è¯­æ³•è§„åˆ™å’Œé¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™å…±åŒå†³å®šçš„ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿäº†è§£æ ¸å¿ƒåŸå› å’ŒèƒŒåçš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒè¦ç‚¹&lt;/th&gt;
&lt;th&gt;å…·ä½“è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¹æœ¬åŸå› ï¼šè¯­æ³•å†²çª&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ„é€ æ–¹æ³•å¿…é¡»ä¸ç±»åå®Œå…¨ç›¸åŒã€‚çˆ¶ç±»æ„é€ æ–¹æ³•åæ˜¯çˆ¶ç±»åï¼Œå­ç±»æ„é€ æ–¹æ³•åæ˜¯å­ç±»åï¼Œä¸¤è€…æ–¹æ³•åä¸åŒï¼Œä¸ç¬¦åˆæ–¹æ³•ç»§æ‰¿çš„â€œæ–¹æ³•åç›¸åŒâ€çš„åŸºæœ¬è¦æ±‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æœºåˆ¶ï¼šè°ƒç”¨è€Œéç»§æ‰¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­ç±»è™½ä¸ç»§æ‰¿çˆ¶ç±»æ„é€ æ–¹æ³•ï¼Œä½†å¿…é¡»ï¼ˆæ˜¾å¼æˆ–éšå¼ï¼‰è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†åˆå§‹åŒ–ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„æˆå‘˜å˜é‡ï¼Œç¡®ä¿çˆ¶ç±»éƒ¨åˆ†è¢«æ­£ç¡®è®¾ç½®åå†åˆå§‹åŒ–å­ç±»ç‰¹æœ‰éƒ¨åˆ†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼ï¼šsuperå…³é”®å­—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å­ç±»çš„æ„é€ æ–¹æ³•ä¸­ï¼Œé€šè¿‡ &lt;code&gt;super(...)&lt;/code&gt;æ¥è°ƒç”¨çˆ¶ç±»æŒ‡å®šçš„æ„é€ æ–¹æ³•ã€‚è¿™æ¡è¯­å¥å¿…é¡»æ˜¯å­ç±»æ„é€ æ–¹æ³•çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡åŸåˆ™ï¼šå°è£…ä¸å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¿å…å­ç±»æ„å¤–è¦†ç›–æˆ–å¹²æ‰°çˆ¶ç±»çš„åˆå§‹åŒ–é€»è¾‘ï¼Œä¿è¯æ¯ä¸ªç±»éƒ½èƒ½æ§åˆ¶è‡ªå·±çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œå¢å¼ºä»£ç çš„å¥å£®æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£è°ƒç”¨çš„è¿‡ç¨‹"&gt;ğŸ’¡ ç†è§£â€œè°ƒç”¨â€çš„è¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ä¸ç»§æ‰¿ï¼Œä½†å­ç±»å¯¹è±¡å®ä¾‹åŒ–æ—¶ï¼Œçˆ¶ç±»çš„æ„é€ æ–¹æ³•ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯è‡ªåŠ¨çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éšå¼è°ƒç”¨&lt;/strong&gt;ï¼šå¦‚æœå­ç±»çš„æ„é€ æ–¹æ³•æ²¡æœ‰æ˜ç¡®ä½¿ç”¨ &lt;code&gt;super(...)&lt;/code&gt;è°ƒç”¨çˆ¶ç±»çš„æŸä¸ªæ„é€ æ–¹æ³•ï¼ŒJavaç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ¨å­ç±»æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œæ’å…¥ &lt;code&gt;super()&lt;/code&gt;ï¼Œå³è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼è°ƒç”¨&lt;/strong&gt;ï¼šå¦‚æœçˆ¶ç±»æ²¡æœ‰æ— å‚æ„é€ æ–¹æ³•ï¼Œæˆ–è€…ä½ å¸Œæœ›è°ƒç”¨çˆ¶ç±»çš„æœ‰å‚æ„é€ æ–¹æ³•ï¼Œåˆ™å¿…é¡»åœ¨å­ç±»æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œæ˜¾å¼åœ°ä½¿ç”¨ &lt;code&gt;super(å‚æ•°)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªè°ƒç”¨è¿‡ç¨‹å½¢æˆäº†â€œ&lt;strong&gt;æ„é€ é“¾&lt;/strong&gt;â€ï¼šåˆ›å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œä¼šå…ˆä»é¡¶å±‚çš„çˆ¶ç±»å¼€å§‹åˆå§‹åŒ–ï¼Œé€å±‚å‘ä¸‹ï¼Œç›´åˆ°å½“å‰å­ç±»ã€‚è¿™ç¡®ä¿äº†æ‰€æœ‰ç¥–å…ˆç±»çš„åˆå§‹åŒ–å·¥ä½œéƒ½å·²å®Œæˆï¼Œå¯¹è±¡å¤„äºä¸€ä¸ªå®Œæ•´ã€ä¸€è‡´çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h3 id="-æŠ½è±¡ç±»çš„æ„é€ æ–¹æ³•"&gt;ğŸ§© æŠ½è±¡ç±»çš„æ„é€ æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„ç–‘é—®æ˜¯ï¼šæŠ½è±¡ç±»ï¼ˆ&lt;code&gt;abstract class&lt;/code&gt;ï¼‰ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œä¸ºä»€ä¹ˆå®ƒä¹Ÿæœ‰æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”å­ç±»ä¹Ÿèƒ½è°ƒç”¨ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æŠ½è±¡ç±»çš„æ„é€ æ–¹æ³•å­˜åœ¨çš„æ„ä¹‰ï¼Œæ­£æ˜¯ä¸ºäº†åœ¨å­ç±»å®ä¾‹åŒ–æ—¶è¢«è°ƒç”¨ï¼Œä»¥å®ŒæˆæŠ½è±¡ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡çš„åˆå§‹åŒ–ã€‚å®ƒçš„æ„é€ æ–¹æ³•è°ƒç”¨æœºåˆ¶ä¸æ™®é€šçˆ¶ç±»å®Œå…¨ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-17"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå­ç±»ä¸ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œæ˜¯å› ä¸º&lt;strong&gt;è¯­æ³•ä¸Šä¸å…è®¸&lt;/strong&gt;ï¼ˆåå­—å¿…é¡»ä¸ç±»ç›¸åŒï¼‰å’Œ&lt;strong&gt;è®¾è®¡ä¸Šæ›´å®‰å…¨&lt;/strong&gt;ï¼ˆå„è‡ªæ§åˆ¶åˆå§‹åŒ–ï¼‰ã€‚ä½†é€šè¿‡&lt;strong&gt;å¼ºåˆ¶è°ƒç”¨&lt;/strong&gt;çš„æœºåˆ¶ï¼Œåˆä¿è¯äº†å¯¹è±¡åˆå§‹åŒ–çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚å¦‚æœä½ å¯¹ &lt;code&gt;super&lt;/code&gt;å…³é”®å­—çš„å…·ä½“ç”¨æ³•æˆ–æ–¹æ³•é‡å†™æœ‰å…¶ä»–ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­ä¸ºä½ è§£ç­”ã€‚&lt;/p&gt;
&lt;h2 id="stack"&gt;Stack
&lt;/h2&gt;&lt;p&gt;åœ¨Javaä¸­ï¼Œæ ˆï¼ˆStackï¼‰æ˜¯ä¸€ç§éå¸¸é‡è¦çš„åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰æ•°æ®ç»“æ„ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“ Java ä¸­å®ç°æ ˆåŠŸèƒ½çš„ä¸»è¦æ–¹å¼åŠå…¶ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Stack&lt;/code&gt;ç±» (ä¼ ç»Ÿ)&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Deque&lt;/code&gt;æ¥å£ (ç°ä»£æ¨è)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰€å±æ¡†æ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Java Collections Framework&lt;/td&gt;
&lt;td&gt;Java Collections Framework&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»§æ‰¿è‡ª &lt;code&gt;Vector&lt;/code&gt;(åŸºäºæ•°ç»„)&lt;/td&gt;
&lt;td&gt;å¸¸ç”¨ &lt;code&gt;ArrayDeque&lt;/code&gt;(åŸºäºæ•°ç»„) æˆ– &lt;code&gt;LinkedList&lt;/code&gt;(åŸºäºé“¾è¡¨)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯ (æ–¹æ³•åŒæ­¥)&lt;/td&gt;
&lt;td&gt;å¦ (&lt;code&gt;ArrayDeque&lt;/code&gt;, &lt;code&gt;LinkedList&lt;/code&gt;éçº¿ç¨‹å®‰å…¨)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è¡¨ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒå·® (å› åŒæ­¥å¼€é”€)&lt;/td&gt;
&lt;td&gt;æ›´ä¼˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®˜æ–¹æ¨è&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å·²è¿‡æ—¶ï¼Œä¸æ¨èåœ¨æ–°ä»£ç ä¸­ä½¿ç”¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨è&lt;/strong&gt; ç”¨äºå®ç°æ ˆåŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;push(E)&lt;/code&gt;, &lt;code&gt;pop()&lt;/code&gt;, &lt;code&gt;peek()&lt;/code&gt;, &lt;code&gt;empty()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;push(E)&lt;/code&gt;, &lt;code&gt;pop()&lt;/code&gt;, &lt;code&gt;peek()&lt;/code&gt;, &lt;code&gt;isEmpty()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-stackçš„æ ¸å¿ƒæ“ä½œ"&gt;ğŸ§± Stackçš„æ ¸å¿ƒæ“ä½œ
&lt;/h3&gt;&lt;p&gt;æ— è®ºä½¿ç”¨å“ªç§å®ç°ï¼Œæ ˆçš„åŸºæœ¬æ“ä½œæ˜¯ç›¸åŒçš„ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒæ–¹æ³•çš„åŠŸèƒ½ã€è¿”å›å€¼åŠæ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•å&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;th&gt;è¿”å›å€¼&lt;/th&gt;
&lt;th&gt;æ ˆç©ºæ—¶çš„è¡Œä¸º&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;push(E item)&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å…ƒç´ å‹å…¥æ ˆé¡¶&lt;/td&gt;
&lt;td&gt;å…¥æ ˆçš„å…ƒç´ &lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;pop()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ &lt;/td&gt;
&lt;td&gt;è¢«ç§»é™¤çš„æ ˆé¡¶å…ƒç´ &lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ›å‡º &lt;code&gt;EmptyStackException&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;peek()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹æ ˆé¡¶å…ƒç´ ï¼ˆä¸ç§»é™¤ï¼‰&lt;/td&gt;
&lt;td&gt;æ ˆé¡¶å…ƒç´ &lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ›å‡º &lt;code&gt;EmptyStackException&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;empty()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º&lt;/td&gt;
&lt;td&gt;&lt;code&gt;true&lt;/code&gt;(ç©º) / &lt;code&gt;false&lt;/code&gt;(éç©º)&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•æ¨èä½¿ç”¨-deque-æ›¿ä»£-stack"&gt;ğŸ’¡ ä¸ºä½•æ¨èä½¿ç”¨ Deque æ›¿ä»£ Stack
&lt;/h3&gt;&lt;p&gt;å®˜æ–¹æ–‡æ¡£å’Œå»ºè®®éƒ½æ¨èä½¿ç”¨ &lt;code&gt;Deque&lt;/code&gt;æ¥å£æ¥æ›¿ä»£ä¼ ç»Ÿçš„ &lt;code&gt;Stack&lt;/code&gt;ç±»ï¼Œä¸»è¦åŸå› å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡æ›´ç°ä»£ã€ä¸€è‡´&lt;/strong&gt;ï¼š&lt;code&gt;Deque&lt;/code&gt;æ˜¯ Java é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†æ›´å®Œæ•´å’Œä¸€è‡´çš„ LIFO æ ˆæ“ä½œæ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æ›´ä¼˜&lt;/strong&gt;ï¼š&lt;code&gt;Stack&lt;/code&gt;ç”±äºç»§æ‰¿è‡ª &lt;code&gt;Vector&lt;/code&gt;ï¼Œå…¶æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œè¿™åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸­ä¼šå¸¦æ¥ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚è€Œ &lt;code&gt;ArrayDeque&lt;/code&gt;ç­‰å®ç°æ²¡æœ‰åŒæ­¥å¼€é”€ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä¸å½“ä½¿ç”¨&lt;/strong&gt;ï¼š&lt;code&gt;Stack&lt;/code&gt;ç»§æ‰¿è‡ª &lt;code&gt;Vector&lt;/code&gt;ï¼Œå› æ­¤æš´éœ²äº†æŒ‰ç´¢å¼•è®¿é—®ç­‰ä¸å±äºæ ˆæ“ä½œçš„æ–¹æ³•ï¼Œè¿™å¯èƒ½ç ´åæ ˆçš„ LIFO åŸåˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹-1"&gt;ğŸ› ï¸ ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="ä½¿ç”¨ä¼ ç»Ÿçš„-stack-ç±»"&gt;ä½¿ç”¨ä¼ ç»Ÿçš„ Stack ç±»
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.Stack;
public class LegacyStackExample {
public static void main(String[] args) {
Stack&amp;lt;String&amp;gt; stack = new Stack&amp;lt;&amp;gt;();
// å…¥æ ˆ
stack.push(&amp;#34;Java&amp;#34;);
stack.push(&amp;#34;Python&amp;#34;);
stack.push(&amp;#34;C++&amp;#34;);
System.out.println(&amp;#34;æ ˆé¡¶å…ƒç´ : &amp;#34; + stack.peek()); // è¾“å‡º: C++
// å‡ºæ ˆ
String popped = stack.pop();
System.out.println(&amp;#34;å‡ºæ ˆå…ƒç´ : &amp;#34; + popped); // è¾“å‡º: C++
System.out.println(&amp;#34;æ ˆæ˜¯å¦ä¸ºç©º: &amp;#34; + stack.empty()); // è¾“å‡º: false
System.out.println(&amp;#34;æ ˆçš„å¤§å°: &amp;#34; + stack.size()); // è¾“å‡º: 2
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æ¨èçš„-deque-å®ç°æ–¹å¼"&gt;æ¨èçš„ Deque å®ç°æ–¹å¼
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.ArrayDeque;
import java.util.Deque;
public class ModernStackExample {
public static void main(String[] args) {
// ä½¿ç”¨ ArrayDeque ä½œä¸ºæ ˆ
Deque&amp;lt;String&amp;gt; stack = new ArrayDeque&amp;lt;&amp;gt;();
stack.push(&amp;#34;Java&amp;#34;);
stack.push(&amp;#34;Python&amp;#34;);
stack.push(&amp;#34;C++&amp;#34;);
System.out.println(&amp;#34;æ ˆé¡¶å…ƒç´ : &amp;#34; + stack.peek()); // è¾“å‡º: C++
String popped = stack.pop();
System.out.println(&amp;#34;å‡ºæ ˆå…ƒç´ : &amp;#34; + popped); // è¾“å‡º: C++
System.out.println(&amp;#34;æ ˆæ˜¯å¦ä¸ºç©º: &amp;#34; + stack.isEmpty()); // è¾“å‡º: false
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä½¿ç”¨æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç©ºæ ˆæ“ä½œ&lt;/strong&gt;ï¼šè°ƒç”¨ç©ºæ ˆçš„ &lt;code&gt;pop()&lt;/code&gt;æˆ– &lt;code&gt;peek()&lt;/code&gt;æ–¹æ³•ä¼šæŠ›å‡º &lt;code&gt;EmptyStackException&lt;/code&gt;ï¼ˆå¯¹äº &lt;code&gt;Stack&lt;/code&gt;ç±»ï¼‰æˆ–è¿”å› &lt;code&gt;null&lt;/code&gt;ï¼ˆå¯¹äº &lt;code&gt;Deque&lt;/code&gt;çš„ &lt;code&gt;pop()&lt;/code&gt;å’Œ &lt;code&gt;peek()&lt;/code&gt;ï¼Œä½† &lt;code&gt;Deque&lt;/code&gt;çš„ &lt;code&gt;pop()&lt;/code&gt;ä»ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œé€šå¸¸ä½¿ç”¨ &lt;code&gt;poll()&lt;/code&gt;æ¥å®‰å…¨åœ°è¿”å› nullï¼‰ã€‚æ“ä½œå‰æœ€å¥½ä½¿ç”¨ &lt;code&gt;empty()&lt;/code&gt;æˆ– &lt;code&gt;isEmpty()&lt;/code&gt;è¿›è¡Œæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;ï¼š&lt;code&gt;Stack&lt;/code&gt;æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½† &lt;code&gt;ArrayDeque&lt;/code&gt;å’Œ &lt;code&gt;LinkedList&lt;/code&gt;ä¸æ˜¯ã€‚å¦‚æœåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­éœ€è¦ä½¿ç”¨æ ˆï¼Œåº”è€ƒè™‘ä½¿ç”¨ &lt;code&gt;ConcurrentLinkedDeque&lt;/code&gt;ç­‰çº¿ç¨‹å®‰å…¨çš„å®ç°ï¼Œæˆ–é€šè¿‡å¤–éƒ¨åŒæ­¥æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ˆçš„å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸŒ æ ˆçš„å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;æ ˆåœ¨è®¡ç®—æœºç§‘å­¦å’Œç¼–ç¨‹ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡½æ•°è°ƒç”¨æ ˆ&lt;/strong&gt;ï¼šå­˜å‚¨å‡½æ•°è°ƒç”¨æ—¶çš„è¿”å›åœ°å€ã€å±€éƒ¨å˜é‡ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨è¾¾å¼æ±‚å€¼&lt;/strong&gt;ï¼šå¦‚å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ï¼ˆé€†æ³¢å…°è¡¨è¾¾å¼ï¼‰å¹¶è¿›è¡Œæ±‚å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‹¬å·åŒ¹é…&lt;/strong&gt;ï¼šæ£€æŸ¥ä»£ç æˆ–è¡¨è¾¾å¼ä¸­çš„æ‹¬å·æ˜¯å¦æ­£ç¡®åµŒå¥—å’Œé—­åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æº¯ç®—æ³•&lt;/strong&gt;ï¼šä¾‹å¦‚æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ã€è¿·å®«æ±‚è§£ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’¤é”€ï¼ˆUndoï¼‰åŠŸèƒ½&lt;/strong&gt;ï¼šè®¸å¤šç¼–è¾‘å™¨ä¸­çš„æ’¤é”€æ“ä½œå¯ä»¥ç”¨æ ˆæ¥ä¿å­˜å†å²çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Java ä¸­çš„æ ˆã€‚å¦‚æœä½ å¯¹ç‰¹å®šåº”ç”¨åœºæ™¯æˆ–æ›´æ·±å…¥çš„å®ç°ç»†èŠ‚æœ‰ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æœ¬åœ°ç±»"&gt;æœ¬åœ°ç±»
&lt;/h2&gt;&lt;p&gt;Java ä¸­çš„æœ¬åœ°ç±»ï¼ˆLocal Classï¼‰æ˜¯ä¸€ç§å®šä¹‰åœ¨ä»£ç å—ï¼ˆå¦‚æ–¹æ³•ä½“ã€æ„é€ å‡½æ•°æˆ–é™æ€åˆå§‹åŒ–å—ï¼‰å†…éƒ¨çš„ç±»ã€‚å®ƒå…è®¸ä½ å°†ç±»çš„å®šä¹‰ç´§æŒ¨ç€å…¶ä½¿ç”¨ä½ç½®ï¼Œä»è€Œæå‡ä»£ç çš„å°è£…æ€§å’Œå¯è¯»æ€§ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šä¹‰ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•ã€æ„é€ å‡½æ•°æˆ–ä»»ä½•ä»£ç å—å†…éƒ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®æƒé™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªèƒ½åœ¨å…¶å®šä¹‰çš„ä»£ç å—å†…ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿®é¥°ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸èƒ½ä½¿ç”¨ &lt;code&gt;public&lt;/code&gt;, &lt;code&gt;private&lt;/code&gt;, &lt;code&gt;protected&lt;/code&gt;æˆ– &lt;code&gt;static&lt;/code&gt;ä¿®é¥°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®å¤–éƒ¨å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªèƒ½è®¿é—®æ‰€åœ¨ä½œç”¨åŸŸä¸­å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;æˆ– &lt;strong&gt;effectively final&lt;/strong&gt; çš„å±€éƒ¨å˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€æˆå‘˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸èƒ½å£°æ˜é™æ€æˆå‘˜ï¼ˆé™æ€å¸¸é‡ &lt;code&gt;static final&lt;/code&gt;é™¤å¤–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€»è¾‘åˆ†ç»„ã€å¢å¼ºå°è£…ã€ä»£ç æ›´è´´è¿‘ä½¿ç”¨ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£è¯­æ³•ä¸è§„åˆ™"&gt;ğŸ” ç†è§£è¯­æ³•ä¸è§„åˆ™
&lt;/h3&gt;&lt;p&gt;è¦æœ‰æ•ˆä½¿ç”¨æœ¬åœ°ç±»ï¼Œéœ€è¦äº†è§£å…¶å…·ä½“çš„è¯­æ³•å’Œå¿…é¡»éµå®ˆçš„è§„åˆ™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ç»“æ„&lt;/strong&gt;ï¼šæœ¬åœ°ç±»ç›´æ¥å®šä¹‰åœ¨ä»£ç å—ä¸­ã€‚ä»¥ä¸‹æ˜¯åœ¨æ–¹æ³•å†…å®šä¹‰çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class OuterClass {
public void someMethod() {
// æœ¬åœ°ç±»å®šä¹‰å¼€å§‹
class LocalClass {
private String message;
public LocalClass(String msg) {
this.message = msg;
}
public void printMessage() {
System.out.println(message);
}
}
// æœ¬åœ°ç±»å®šä¹‰ç»“æŸ
// åœ¨æ–¹æ³•å†…ä½¿ç”¨æœ¬åœ°ç±»
LocalClass local = new LocalClass(&amp;#34;Hello from local class!&amp;#34;);
local.printMessage();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®è§„åˆ™ä¸é™åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸå—é™&lt;/strong&gt;ï¼šæœ¬åœ°ç±»åªåœ¨å®šä¹‰å®ƒçš„ä»£ç å—å†…å¯è§ï¼Œä¹‹å¤–æ— æ³•è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®å¤–éƒ¨å˜é‡&lt;/strong&gt;ï¼šè¿™æ˜¯æœ¬åœ°ç±»ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ã€‚å®ƒåªèƒ½è®¿é—®å…¶æ‰€åœ¨ä½œç”¨åŸŸä¸­å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;æˆ– &lt;strong&gt;effectively final&lt;/strong&gt;ï¼ˆå³åˆå§‹åŒ–åå€¼ä»æœªæ”¹å˜çš„å˜é‡ï¼‰çš„å±€éƒ¨å˜é‡æˆ–å‚æ•°ã€‚è¿™æ˜¯å› ä¸ºæœ¬åœ°ç±»çš„å®ä¾‹ç”Ÿå‘½å‘¨æœŸå¯èƒ½æ¯”åˆ›å»ºå®ƒçš„æ–¹æ³•æ›´é•¿ï¼ŒJava é€šè¿‡å¤åˆ¶è¿™äº›å˜é‡çš„å€¼æ¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿®é¥°ç¬¦ä¸é™æ€æˆå‘˜&lt;/strong&gt;ï¼šæœ¬åœ°ç±»æœ¬èº«ä¸èƒ½æœ‰è®¿é—®ä¿®é¥°ç¬¦ï¼ˆå¦‚ &lt;code&gt;public&lt;/code&gt;ï¼‰ï¼Œä¹Ÿä¸èƒ½å£°æ˜ä¸º &lt;code&gt;static&lt;/code&gt;ã€‚åŒæ—¶ï¼Œå®ƒå†…éƒ¨ä¸èƒ½æœ‰é™æ€æ–¹æ³•æˆ–å­—æ®µï¼ˆé™¤äº†é™æ€å¸¸é‡ &lt;code&gt;static final&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœ¬åœ°ç±»å®æˆ˜ç¤ºä¾‹"&gt;ğŸ“ æœ¬åœ°ç±»å®æˆ˜ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ›´å…·ä½“çš„ä¾‹å­çœ‹çœ‹æœ¬åœ°ç±»å¦‚ä½•å·¥ä½œã€‚è¿™ä¸ªä¾‹å­æ¨¡æ‹ŸéªŒè¯ç”µè¯å·ç æ ¼å¼ï¼Œæœ¬åœ°ç±»è´Ÿè´£å…·ä½“çš„æ ¼å¼æ ¡éªŒé€»è¾‘ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class PhoneNumberValidator {
// å¤–éƒ¨ç±»çš„é™æ€å˜é‡ï¼Œæœ¬åœ°ç±»å¯ä»¥è®¿é—®
private static final String DIGITS_REGEX = &amp;#34;[â°-9]&amp;#34;;
public void validatePhoneNumbers(String number1, String number2) {
// æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼Œæœ¬åœ°ç±»å¯ä»¥è®¿é—®ï¼ˆeffectively finalï¼‰
final int requiredLength = 10;
// å®šä¹‰æœ¬åœ°ç±»
class PhoneNumber {
private String formattedNumber;
public PhoneNumber(String rawNumber) {
// è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å˜é‡ DIGITS_REGEX
// è®¿é—®å¤–éƒ¨æ–¹æ³•çš„ effectively final å±€éƒ¨å˜é‡ requiredLength
String digitsOnly = rawNumber.replaceAll(DIGITS_REGEX, &amp;#34;&amp;#34;);
if (digitsOnly.length() == requiredLength) {
this.formattedNumber = digitsOnly;
} else {
this.formattedNumber = null;
}
}
public String getFormattedNumber() {
return formattedNumber;
}
}
// ä½¿ç”¨æœ¬åœ°ç±»
PhoneNumber pn1 = new PhoneNumber(number1);
PhoneNumber pn2 = new PhoneNumber(number2);
System.out.println(&amp;#34;First number is &amp;#34; +
(pn1.getFormattedNumber() != null ? &amp;#34;valid&amp;#34; : &amp;#34;invalid&amp;#34;));
System.out.println(&amp;#34;Second number is &amp;#34; +
(pn2.getFormattedNumber() != null ? &amp;#34;valid&amp;#34; : &amp;#34;invalid&amp;#34;));
}
public static void main(String[] args) {
PhoneNumberValidator validator = new PhoneNumberValidator();
validator.validatePhoneNumbers(&amp;#34;123-456-7890&amp;#34;, &amp;#34;555-123&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ¬åœ°ç±» &lt;code&gt;PhoneNumber&lt;/code&gt;å°è£…äº†ç”µè¯å·ç çš„éªŒè¯é€»è¾‘ï¼Œç›´æ¥ä½¿ç”¨äº†å¤–éƒ¨æ–¹æ³•çš„å‚æ•° (&lt;code&gt;number1&lt;/code&gt;, &lt;code&gt;number2&lt;/code&gt;)ã€å±€éƒ¨å˜é‡ (&lt;code&gt;requiredLength&lt;/code&gt;) å’Œå¤–éƒ¨ç±»çš„é™æ€å¸¸é‡ (&lt;code&gt;DIGITS_REGEX&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹"&gt;ğŸ’¡ åº”ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;p&gt;æœ¬åœ°ç±»å¹¶éä¸‡èƒ½å·¥å…·ï¼Œäº†è§£å…¶é€‚ç”¨åœºæ™¯å’Œå±€é™æ€§å¾ˆé‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘åˆ†ç»„ä¸å°è£…&lt;/strong&gt;ï¼šå½“æŸä¸ªç±»åªåœ¨ä¸€ä¸ªæ–¹æ³•å†…éƒ¨æœ‰ç‰¹å®šç”¨é€”ï¼Œä¸å…·å¤‡é€šç”¨æ€§æ—¶ï¼Œä½¿ç”¨æœ¬åœ°ç±»å¯ä»¥é¿å…æ±¡æŸ“å¤–éƒ¨å‘½åç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶ç›‘å¬ä¸å¤„ç†å™¨&lt;/strong&gt;ï¼šåœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰ç¼–ç¨‹ä¸­ï¼Œä¼ ç»Ÿä¸Šä¼šä½¿ç”¨æœ¬åœ°ç±»ï¼ˆæˆ–åŒ¿åç±»ï¼‰æ¥åˆ›å»ºç‰¹å®šäºæŸä¸ªç»„ä»¶çš„äº‹ä»¶å¤„ç†å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾…åŠ©åŠŸèƒ½å®ç°&lt;/strong&gt;ï¼šå¦‚æœæŸä¸ªæ–¹æ³•å†…éƒ¨éœ€è¦å¤æ‚çš„è¾…åŠ©é€»è¾‘ï¼Œå°†å…¶å°è£…åœ¨ä¸€ä¸ªæœ¬åœ°ç±»ä¸­å¯ä»¥ä½¿ä¸»æ–¹æ³•æ›´æ¸…æ™°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿ä¸å±€é™&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå¢å¼ºä»£ç çš„&lt;strong&gt;å¯è¯»æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ç»´æŠ¤æ€§&lt;/strong&gt;ï¼Œå°†ç›¸å…³ä»£ç ç´§å¯†ç»„ç»‡åœ¨ä¸€èµ·ï¼›å®ç°æ›´å¥½çš„&lt;strong&gt;å°è£…&lt;/strong&gt;ï¼Œéšè—å®ç°ç»†èŠ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;ä½œç”¨åŸŸéå¸¸æœ‰é™&lt;/strong&gt;ï¼Œæ— æ³•åœ¨å®šä¹‰å®ƒçš„ä»£ç å—ä¹‹å¤–é‡ç”¨ï¼›ä¸ &lt;strong&gt;Lambda è¡¨è¾¾å¼&lt;/strong&gt; ç›¸æ¯”ï¼Œè¯­æ³•å¯èƒ½ç¨æ˜¾å†—é•¿ï¼Œç‰¹åˆ«æ˜¯åœ¨å®ç°åªæœ‰ä¸€ä¸ªæ–¹æ³•çš„æ¥å£æ—¶ï¼ˆæ­¤æ—¶ Lambda è¡¨è¾¾å¼æ›´ç®€æ´ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ä½¿ç”¨æœ¬åœ°ç±»æ—¶ï¼Œè¯·ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å˜é‡æ•è·ä¸ Effectively Final&lt;/strong&gt;ï¼šåŠ¡å¿…ç¡®ä¿æœ¬åœ°ç±»è®¿é—®çš„å±€éƒ¨å˜é‡æ˜¯ &lt;code&gt;final&lt;/code&gt;æˆ– effectively finalã€‚å°è¯•ä¿®æ”¹æ–¹æ³•å†…çš„é final å˜é‡ç„¶ååœ¨æœ¬åœ°ç±»ä¸­ä½¿ç”¨ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸åŒ¿åç±»çš„é€‰æ‹©&lt;/strong&gt;ï¼šå¦‚æœè¿™ä¸ªç±»åªéœ€è¦&lt;strong&gt;ä¸€ä¸ªå®ä¾‹&lt;/strong&gt;ï¼Œå¹¶ä¸”å®ç°çš„æ˜¯ä¸€ä¸ª&lt;strong&gt;ç®€å•çš„æ¥å£&lt;/strong&gt;æˆ–&lt;strong&gt;æŠ½è±¡ç±»&lt;/strong&gt;ï¼Œæœ‰æ—¶ä½¿ç”¨&lt;strong&gt;åŒ¿åå†…éƒ¨ç±»&lt;/strong&gt;å¯èƒ½æ›´ç®€æ´ã€‚ä½†æœ¬åœ°ç±»çš„ä¼˜åŠ¿åœ¨äºå®ƒæœ‰åå­—ï¼Œå¯è¯»æ€§æ›´å¥½ï¼Œå¹¶ä¸”å¯ä»¥æœ‰å¤šä¸ªæ„é€ æ–¹æ³•æˆ–æ›´å¤æ‚çš„æˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åºåˆ—åŒ–è­¦å‘Š&lt;/strong&gt;ï¼šå¼ºçƒˆä¸å»ºè®®å¯¹æœ¬åœ°ç±»ï¼ˆä»¥åŠåŒ¿åå†…éƒ¨ç±»ï¼‰è¿›è¡Œåºåˆ—åŒ–ã€‚å› ä¸º Java ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿™äº›ç±»æ—¶ä¼šç”Ÿæˆä¸€äº›åˆæˆç»“æ„ï¼ˆSynthetic Constructsï¼‰ï¼Œè¿™äº›ç»“æ„åœ¨ä¸åŒç‰ˆæœ¬çš„ Java ç¼–è¯‘å™¨ä¸­å¯èƒ½å­˜åœ¨å·®å¼‚ï¼Œä»è€Œåœ¨ååºåˆ—åŒ–æ—¶å¼•å‘å…¼å®¹æ€§é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–å†…éƒ¨ç±»çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–å†…éƒ¨ç±»çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´å…¨é¢åœ°ç†è§£æœ¬åœ°ç±»ï¼Œå¯ä»¥å°†å…¶ä¸Javaä¸­å…¶ä»–ç±»å‹çš„å†…éƒ¨ç±»è¿›è¡Œç®€å•æ¯”è¾ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;å®šä¹‰ä½ç½®&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç‰¹å¾&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æˆå‘˜å†…éƒ¨ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼Œä¸å­—æ®µã€æ–¹æ³•å¹³çº§&lt;/td&gt;
&lt;td&gt;ä¸å¤–éƒ¨ç±»å®ä¾‹å…³è”ï¼Œå¯ç›´æ¥è®¿é—®å¤–éƒ¨ç±»æ‰€æœ‰æˆå‘˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€åµŒå¥—ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼Œç”¨ &lt;code&gt;static&lt;/code&gt;ä¿®é¥°&lt;/td&gt;
&lt;td&gt;ä¸ä¸å¤–éƒ¨ç±»å®ä¾‹å…³è”ï¼Œè®¿é—®å¤–éƒ¨ç±»æˆå‘˜éœ€é€šè¿‡å¯¹è±¡å¼•ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬åœ°ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•æˆ–ä»£ç å—å†…éƒ¨&lt;/td&gt;
&lt;td&gt;ä½œç”¨åŸŸå—é™ï¼Œå¯è®¿é—® final/effectively final å±€éƒ¨å˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨è¾¾å¼å†…éƒ¨ï¼Œæ— æ˜¾å¼ç±»å&lt;/td&gt;
&lt;td&gt;ç”¨äºä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œå®ç°æ¥å£æˆ–ç»§æ‰¿ç±»ï¼Œè¯­æ³•æ›´ç´§å‡‘&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œæœ¬åœ°ç±»æ˜¯Javaä¸­ä¸€ç§ç”¨äºå¢å¼ºä»£ç å°è£…æ€§å’Œç»„ç»‡æ€§çš„æœ‰ç”¨å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆåœ¨å•ä¸ªæ–¹æ³•æˆ–ä»£ç å—å†…ç»„ç»‡ä¸“ç”¨çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£Javaæœ¬åœ°ç±»ï¼å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚è¿˜æƒ³æ·±å…¥äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºæ‚¨æå‡ºçš„â€œä¸ºä»€ä¹ˆæœ¬åœ°ç±»æ²¡æœ‰FQNï¼ˆå…¨é™å®šåï¼‰â€è¿™ä¸ªé—®é¢˜ï¼Œå…¶æ ¸å¿ƒåŸå› åœ¨äº&lt;strong&gt;æœ¬åœ°ç±»çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸä¸æ ‡å‡†çš„é¡¶çº§ç±»æœ‰æœ¬è´¨åŒºåˆ«&lt;/strong&gt;ï¼Œè¿™å†³å®šäº†å®ƒä¸éœ€è¦ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£fqnä¸æœ¬åœ°ç±»çš„æœ¬è´¨"&gt;ğŸ” ç†è§£FQNä¸æœ¬åœ°ç±»çš„æœ¬è´¨
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®FQNçš„å«ä¹‰å’Œä½œç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;FQNï¼ˆå…¨é™å®šåï¼‰&lt;/strong&gt;ï¼šä¸€ä¸ªç±»çš„FQNç”±å…¶&lt;strong&gt;åŒ…å&lt;/strong&gt;å’Œ&lt;strong&gt;ç±»å&lt;/strong&gt;å…±åŒç»„æˆï¼ˆä¾‹å¦‚ &lt;code&gt;java.util.ArrayList&lt;/code&gt;ï¼‰ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯åœ¨ä¸€ä¸ªJavaç¨‹åºä¸­&lt;strong&gt;å…¨å±€æ€§åœ°ã€å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªç±»&lt;/strong&gt;ã€‚ç±»åŠ è½½å™¨æ­£æ˜¯é€šè¿‡FQNåœ¨ç±»è·¯å¾„ï¼ˆClasspathï¼‰ä¸Šå®šä½å¹¶åŠ è½½å¯¹åº”çš„ &lt;code&gt;.class&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°ç±»ï¼ˆLocal Classï¼‰&lt;/strong&gt;ï¼šæœ¬åœ°ç±»è¢«å®šä¹‰åœ¨ä¸€ä¸ªä»£ç å—å†…éƒ¨ï¼ˆå¦‚æ–¹æ³•ã€æ„é€ å‡½æ•°æˆ–é™æ€åˆå§‹åŒ–å—ä¸­ï¼‰ã€‚å®ƒçš„&lt;strong&gt;ä½œç”¨åŸŸè¢«ä¸¥æ ¼é™åˆ¶åœ¨å®šä¹‰å®ƒçš„é‚£ä¸ªä»£ç å—ä¹‹å†…&lt;/strong&gt;ï¼Œåœ¨ä»£ç å—å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¸å¤–éƒ¨ç±»çš„å®ä¾‹ä»¥åŠè¯¥ä»£ç å—çš„æ‰§è¡Œç´§å¯†ç›¸å…³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒFQNæ˜¯ä¸ºé‚£äº›éœ€è¦åœ¨å…¨å±€èŒƒå›´å†…è¢«å”¯ä¸€è¯†åˆ«å’Œè®¿é—®çš„â€œå…¬æ°‘â€ï¼ˆé¡¶çº§ç±»ï¼‰è®¾è®¡çš„èº«ä»½è¯ã€‚è€Œæœ¬åœ°ç±»æ›´åƒæ˜¯ä¸€ä¸ªåœ¨ç‰¹å®šåŒºåŸŸï¼ˆæ–¹æ³•å†…éƒ¨ï¼‰ä¸´æ—¶å·¥ä½œçš„â€œå†…éƒ¨æˆå‘˜â€ï¼Œå¤–ç•Œä¸éœ€è¦ã€ä¹Ÿä¸åº”è¯¥ç›´æ¥çŸ¥é“å®ƒçš„å…¨åã€‚&lt;/p&gt;
&lt;h3 id="-ç¼–è¯‘è§†è§’åˆæˆä¸é‡å‘½å"&gt;ğŸ§± ç¼–è¯‘è§†è§’ï¼šåˆæˆä¸é‡å‘½å
&lt;/h3&gt;&lt;p&gt;ä»Javaç¼–è¯‘å™¨çš„å®ç°è§’åº¦æ¥çœ‹ï¼Œä¸ºäº†ç®¡ç†æœ¬åœ°ç±»ç‹¬ç‰¹çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯èƒ½å¯¹&lt;strong&gt;å¤–éƒ¨æœ‰æ•ˆç»ˆç»“å˜é‡ï¼ˆeffectively final variablesï¼‰&lt;/strong&gt; çš„è®¿é—®ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œä¸€äº›è‡ªåŠ¨åŒ–å¤„ç†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆåˆæˆæ–¹æ³•ï¼ˆSynthetic Methodsï¼‰&lt;/strong&gt;ï¼šå¦‚æœæœ¬åœ°ç±»è®¿é—®äº†å…¶å¤–éƒ¨ä½œç”¨åŸŸçš„å±€éƒ¨å˜é‡ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨å¤–éƒ¨ç±»ä¸­ç”Ÿæˆä¸€äº›â€œåˆæˆâ€æ–¹æ³•ï¼Œä»¥ä¾¿æœ¬åœ°ç±»å¯ä»¥å®‰å…¨åœ°è®¿é—®è¿™äº›æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç§°æ”¹å†™ï¼ˆName Manglingï¼‰&lt;/strong&gt;ï¼šä¸ºäº†è§£å†³å¯èƒ½çš„å‘½åå†²çªï¼Œå°¤å…¶æ˜¯åœ¨å¤šä¸ªæ–¹æ³•ä¸­å®šä¹‰äº†ç›¸åŒåç§°çš„æœ¬åœ°ç±»æ—¶ï¼Œç¼–è¯‘å™¨ä¼š&lt;strong&gt;ä¸ºæœ¬åœ°ç±»ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„å†…éƒ¨åç§°&lt;/strong&gt;ã€‚è¿™ä¸ªåç§°é€šå¸¸ä¼šåŒ…å«å¤–éƒ¨ç±»åã€ä¸€ä¸ªç¾å…ƒç¬¦å· &lt;code&gt;$&lt;/code&gt;ã€ä¸€ä¸ªæ•°å­—åºå·ä»¥åŠæœ¬åœ°ç±»å£°æ˜çš„åç§°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ &lt;code&gt;OuterClass&lt;/code&gt;çš„ &lt;code&gt;aMethod&lt;/code&gt;ä¸­å®šä¹‰äº†ä¸€ä¸ªæœ¬åœ°ç±» &lt;code&gt;LocalClass&lt;/code&gt;ï¼Œç¼–è¯‘åç”Ÿæˆçš„ç±»æ–‡ä»¶å¯èƒ½ç±»ä¼¼äº &lt;code&gt;OuterClass$1LocalClass.class&lt;/code&gt;ã€‚è¿™ä¸ªåç§°æ˜¯ç¼–è¯‘å™¨å†…éƒ¨ä½¿ç”¨çš„ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªåœ¨Javaæºä»£ç å±‚é¢å¯ä»¥ä½¿ç”¨çš„ã€ç¬¦åˆè¯­è¨€è§„èŒƒçš„FQNã€‚&lt;/p&gt;
&lt;h3 id="-è®¾è®¡å“²å­¦å°è£…ä¸å®‰å…¨"&gt;ğŸ’¡ è®¾è®¡å“²å­¦ï¼šå°è£…ä¸å®‰å…¨
&lt;/h3&gt;&lt;p&gt;ä»è½¯ä»¶è®¾è®¡è§’åº¦çœ‹ï¼Œä¸ç»™æœ¬åœ°ç±»èµ‹äºˆFQNä¹Ÿç¬¦åˆ&lt;strong&gt;å°è£…&lt;/strong&gt;çš„åŸåˆ™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éšè—å®ç°ç»†èŠ‚&lt;/strong&gt;ï¼šæœ¬åœ°ç±»é€šå¸¸ç”¨äºå®ç°æŸä¸ªæ–¹æ³•å†…éƒ¨ç‰¹å®šçš„ã€å±€éƒ¨çš„é€»è¾‘ã€‚å°†å…¶â€œéšè—â€åœ¨æ–¹æ³•å†…éƒ¨ï¼Œä¸æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œï¼Œæœ‰åŠ©äºä¿æŒä»£ç çš„æ¨¡å—åŒ–å’Œç®€æ´æ€§ï¼Œé¿å…ä¸å¿…è¦çš„è€¦åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜²æ­¢è¯¯ç”¨&lt;/strong&gt;ï¼šç”±äºæ²¡æœ‰FQNï¼Œå…¶ä»–åœ°æ–¹çš„ä»£ç æ— æ³•ç›´æ¥å¼•ç”¨æˆ–å®ä¾‹åŒ–è¿™ä¸ªæœ¬åœ°ç±»ã€‚è¿™ä»è¯­è¨€å±‚é¢å¼ºåˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´ï¼Œé¿å…äº†å¼€å‘è€…åœ¨ä¸æ°å½“çš„ä¸Šä¸‹æ–‡ä¸­è¯¯ç”¨å®ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸å…¶ä»–å†…éƒ¨ç±»çš„å¯¹æ¯”-1"&gt;ğŸ”„ ä¸å…¶ä»–å†…éƒ¨ç±»çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£æœ¬åœ°ç±»çš„ç‰¹æ®Šæ€§ï¼Œå¯ä»¥å°†å…¶ä¸Javaä¸­å…¶ä»–ç±»å‹çš„å†…éƒ¨ç±»è¿›è¡Œç®€å•æ¯”è¾ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å†…éƒ¨ç±»ç±»å‹&lt;/th&gt;
&lt;th&gt;æ˜¯å¦æœ‰FQN&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æˆå‘˜å†…éƒ¨ç±»ï¼ˆMember Inner Classï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ‰&lt;/strong&gt; (å¦‚ &lt;code&gt;OuterClass$InnerClass&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å®ƒæ˜¯å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œä¸å¤–éƒ¨ç±»å®ä¾‹å…³è”ï¼Œä½†ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå¤–éƒ¨ç±»ï¼Œéœ€è¦åœ¨å¤–éƒ¨ç±»èŒƒå›´å†…è¢«å”¯ä¸€æ ‡è¯†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€åµŒå¥—ç±»ï¼ˆStatic Nested Classï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ‰&lt;/strong&gt; (å¦‚ &lt;code&gt;OuterClass$StaticNestedClass&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å®ƒæ˜¯é™æ€çš„ï¼Œä¸å¤–éƒ¨ç±»å®ä¾‹æ— å…³ï¼Œè¡Œä¸ºä¸Šæ›´æ¥è¿‘ä¸€ä¸ªç‹¬ç«‹çš„é¡¶çº§ç±»ï¼Œåªæ˜¯è¢«åµŒå¥—åœ¨å¦ä¸€ä¸ªç±»å†…éƒ¨ä»¥ä¾¿äºç»„ç»‡ç®¡ç†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬åœ°ç±»ï¼ˆLocal Classï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½œç”¨åŸŸä»…é™äºæ–¹æ³•æˆ–ä»£ç å—å†…éƒ¨ï¼Œç”Ÿå‘½å‘¨æœŸä¸´æ—¶ï¼Œç”±ç¼–è¯‘å™¨è¿›è¡Œåç§°æ”¹å†™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åç±»ï¼ˆAnonymous Classï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿åå­—éƒ½æ²¡æœ‰ï¼Œæ›´è°ˆä¸ä¸ŠFQNã€‚å®ƒç”¨äºä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œç¼–è¯‘ååç§°ç±»ä¼¼ &lt;code&gt;OuterClass$1&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œæœ¬åœ°ç±»æ²¡æœ‰FQNï¼Œæ ¹æœ¬ä¸Šæ˜¯ç”±äºå…¶&lt;strong&gt;å—é™çš„ä½œç”¨åŸŸã€ä¸´æ—¶çš„ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ä»¥åŠJavaç¼–è¯‘å™¨ä¸ºå®ç°è¿™äº›ç‰¹æ€§è€Œè¿›è¡Œçš„&lt;strong&gt;å†…éƒ¨å¤„ç†ï¼ˆå¦‚åç§°æ”¹å†™ï¼‰&lt;/strong&gt; æ‰€å…±åŒå†³å®šçš„ã€‚è¿™å¹¶éä¸€ç§â€œç¼ºé™·â€ï¼Œè€Œæ˜¯Javaè¯­è¨€è®¾è®¡ä¸Šä¸ºäº†æ”¯æŒæ›´å¥½çš„å°è£…å’Œä»£ç ç»„ç»‡è€Œåšå‡ºçš„ä¸€ç§æƒè¡¡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©æ‚¨ä»æ ¹æœ¬ä¸Šç†è§£è¿™ä¸ªé—®é¢˜ï¼å¦‚æœæ‚¨å¯¹Javaç±»åŠ è½½æœºåˆ¶æˆ–å…¶ä»–ç›¸å…³è¯é¢˜è¿˜æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯çš„ï¼ŒJavaä¸­çš„æœ¬åœ°ç±»å®Œå…¨å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»æˆ–è€…å®ç°æ¥å£ã€‚è¿™ä¸ªç‰¹æ€§è®©æœ¬åœ°ç±»åœ¨å°è£…ç‰¹å®šé€»è¾‘æ—¶éå¸¸çµæ´»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿäº†è§£æœ¬åœ°ç±»åœ¨ç»§æ‰¿å’Œå®ç°æ–¹é¢çš„æ ¸å¿ƒèƒ½åŠ›ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»§æ‰¿ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»ï¼ˆä½¿ç”¨ &lt;code&gt;extends&lt;/code&gt;å…³é”®å­—ï¼‰ï¼Œä½†Javaçš„å•ç»§æ‰¿è§„åˆ™åŒæ ·é€‚ç”¨ï¼Œå› æ­¤åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼ˆä½¿ç”¨ &lt;code&gt;implements&lt;/code&gt;å…³é”®å­—ï¼‰ï¼Œä»è€Œå®ç°â€œå¤šé‡ç»§æ‰¿â€çš„æ•ˆæœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å®šä¹‰æœ¬åœ°ç±»æ—¶ï¼Œç±»å£°æ˜ä¸­åŒæ—¶ä½¿ç”¨ &lt;code&gt;extends&lt;/code&gt;å’Œ &lt;code&gt;implements&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»§æ‰¿å’Œå®ç°çš„èƒ½åŠ›ä»…é™äºè¯¥æœ¬åœ°ç±»å†…éƒ¨ä½¿ç”¨ï¼Œå—é™äºå…¶æ‰€åœ¨çš„ä»£ç å—ï¼ˆå¦‚æ–¹æ³•ä½“ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•ä¸ä»£ç ç¤ºä¾‹"&gt;ğŸ“ è¯­æ³•ä¸ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;æœ¬åœ°ç±»ç»§æ‰¿æˆ–å®ç°çš„è¯­æ³•ï¼Œä¸å¸¸è§„çš„ç±»å®šä¹‰åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯ä½ç½®ç‰¹æ®Šã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨æ–¹æ³•ä¸­å®šä¹‰çš„æœ¬åœ°ç±»ç¤ºä¾‹ï¼Œå®ƒåŒæ—¶ç»§æ‰¿äº†ä¸€ä¸ªç±»å¹¶å®ç°äº†ä¸€ä¸ªæ¥å£ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä¸€ä¸ªè¢«ç»§æ‰¿çš„åŸºç±»
class Animal {
public void eat() {
System.out.println(&amp;#34;Animal is eating.&amp;#34;);
}
}
// ä¸€ä¸ªæ¥å£
interface Runnable {
void run();
}
public class OuterClass {
public void someMethod() {
// æ–¹æ³•å†…çš„æœ¬åœ°ç±»
class Dog extends Animal implements Runnable {
@Override
public void run() {
System.out.println(&amp;#34;Dog is running.&amp;#34;);
}
}
// åœ¨æ–¹æ³•å†…ä½¿ç”¨è¿™ä¸ªæœ¬åœ°ç±»
Dog myDog = new Dog();
myDog.eat(); // ç»§æ‰¿è‡ªAnimalç±»çš„æ–¹æ³•
myDog.run(); // å®ç°è‡ªRunnableæ¥å£çš„æ–¹æ³•
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦è§„åˆ™ä¸é™åˆ¶"&gt;âš ï¸ é‡è¦è§„åˆ™ä¸é™åˆ¶
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨æœ¬åœ°ç±»æ—¶ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®å±€éƒ¨å˜é‡&lt;/strong&gt;ï¼šæœ¬åœ°ç±»ï¼ˆåŒ…æ‹¬åŒ¿åç±»ï¼‰åªèƒ½è®¿é—®å…¶æ‰€åœ¨ä½œç”¨åŸŸä¸­å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;æˆ– &lt;strong&gt;effectively final&lt;/strong&gt;ï¼ˆå³åˆå§‹åŒ–åå€¼ä»æœªæ”¹å˜çš„å˜é‡ï¼‰çš„å±€éƒ¨å˜é‡æˆ–å‚æ•°ã€‚è¿™æ˜¯å› ä¸ºæœ¬åœ°ç±»å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½æ¯”åˆ›å»ºå®ƒçš„æ–¹æ³•æ›´é•¿ï¼Œä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ŒJavaé€šè¿‡å¤åˆ¶è¿™äº›å˜é‡çš„å€¼æ¥å®ç°è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æ€æˆå‘˜&lt;/strong&gt;ï¼šæœ¬åœ°ç±»å†…éƒ¨ä¸èƒ½å£°æ˜é™æ€æ–¹æ³•æˆ–éå¸¸é‡çš„é™æ€å­—æ®µã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å¯ä»¥å£°æ˜é™æ€å¸¸é‡ï¼ˆå³ &lt;code&gt;static final&lt;/code&gt;ä¸”ä½¿ç”¨ç¼–è¯‘æ—¶å¸¸é‡å€¼åˆå§‹åŒ–çš„å­—æ®µï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£å®šä¹‰&lt;/strong&gt;ï¼šä½ ä¸èƒ½åœ¨æ–¹æ³•ä½“ç­‰ä»£ç å—å†…å®šä¹‰æ¥å£ï¼Œå› ä¸ºæ¥å£æœ¬è´¨ä¸Šæ˜¯é™æ€çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;æœ¬åœ°ç±»çš„è¿™ç§èƒ½åŠ›ä½¿å…¶ç‰¹åˆ«é€‚åˆåœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç­–ç•¥æ¨¡å¼çš„å…·ä½“å®ç°&lt;/strong&gt;ï¼šå½“æŸä¸ªç®—æ³•æˆ–ç­–ç•¥åªåœ¨ä¸€ä¸ªæ–¹æ³•å†…éƒ¨éœ€è¦ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦ç‰¹å®šçš„ç±»ç»“æ„ï¼ˆç»§æ‰¿æŸä¸ªåŸºç±»æˆ–å®ç°æŸä¸ªæ¥å£ï¼‰æ—¶ï¼Œä½¿ç”¨æœ¬åœ°ç±»å¯ä»¥å¾ˆå¥½åœ°å°è£…è¯¥å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶ç›‘å¬å™¨&lt;/strong&gt;ï¼šåœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰ç¼–ç¨‹ä¸­ï¼Œä¼ ç»Ÿä¸Šä¼šä½¿ç”¨æœ¬åœ°ç±»ï¼ˆæˆ–åŒ¿åç±»ï¼‰æ¥åˆ›å»ºç‰¹å®šäºæŸä¸ªç»„ä»¶çš„äº‹ä»¶å¤„ç†å™¨ï¼Œè¿™äº›å¤„ç†å™¨é€šå¸¸éœ€è¦å®ç°ç‰¹å®šçš„ç›‘å¬æ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸åŒ¿åç±»çš„ç®€å•å¯¹æ¯”"&gt;ğŸ”„ ä¸åŒ¿åç±»çš„ç®€å•å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;æœ¬åœ°ç±»å’ŒåŒ¿åç±»éƒ½å¯ä»¥ç»§æ‰¿ç±»æˆ–å®ç°æ¥å£ã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°ç±»&lt;/strong&gt;ï¼šæœ‰æ˜ç¡®çš„ç±»åï¼Œå¯è¯»æ€§æ›´å¥½ï¼Œå¯ä»¥é‡è½½å¤šä¸ªæ„é€ æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒ¿åç±»&lt;/strong&gt;ï¼šæ²¡æœ‰ç±»åï¼Œè¯­æ³•æ›´ç´§å‡‘ï¼Œé€šå¸¸ç”¨äºåªéœ€åˆ›å»ºä¸€æ¬¡å®ä¾‹çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨æœ¬åœ°ç±»ï¼å¦‚æœä½ è¿˜æœ‰å…¶ä»–å…³äºJavaå†…éƒ¨ç±»çš„é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Kafka</title><link>https://dyhes.github.io/p/nowcoderkafka/</link><pubDate>Thu, 11 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderkafka/</guid><description>&lt;h2 id="rebalance"&gt;Rebalance
&lt;/h2&gt;&lt;p&gt;Kafka æ¶ˆè´¹ç»„çš„ &lt;strong&gt;Rebalanceï¼ˆé‡å¹³è¡¡ï¼‰&lt;/strong&gt; æ˜¯å…¶å®ç°&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;å’Œ&lt;strong&gt;å®¹é”™&lt;/strong&gt;çš„æ ¸å¿ƒæœºåˆ¶ã€‚å½“æ¶ˆè´¹è€…ç»„çš„æˆå‘˜æˆ–è®¢é˜…èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒKafka ä¼šé‡æ–°åˆ†é…åˆ†åŒºï¼ˆPartitionï¼‰ä¸æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œä»¥ç¡®ä¿æ‰€æœ‰åˆ†åŒºéƒ½èƒ½è¢«æ¶ˆè´¹ï¼Œä¸”è´Ÿè½½å°½å¯èƒ½å‡è¡¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘å°†è¯¦ç»†è§£é‡Šå…¶è§¦å‘æ—¶æœºã€è¿‡ç¨‹ã€å½±å“ä»¥åŠä¼˜åŒ–ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€è§¦å‘-rebalance-çš„æ—¶æœº"&gt;âš™ï¸ ä¸€ã€è§¦å‘ Rebalance çš„æ—¶æœº
&lt;/h3&gt;&lt;p&gt;Rebalance ä¼šåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹è¢«è§¦å‘ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹è€…ç»„æˆå‘˜æ•°é‡å˜åŒ–&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°æ¶ˆè´¹è€…åŠ å…¥&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œä¸€ä¸ªæ–°çš„æ¶ˆè´¹è€…å®ä¾‹å¯åŠ¨å¹¶åŠ å…¥åˆ°ç»„ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹è€…ç¦»å¼€&lt;/strong&gt;ï¼šåŒ…æ‹¬æ¶ˆè´¹è€…ä¸»åŠ¨å…³é—­ (&lt;code&gt;close()&lt;/code&gt;) ã€å´©æºƒå®•æœºï¼Œæˆ–å› ç½‘ç»œé—®é¢˜ã€é•¿æ—¶é—´GCç­‰åŸå› &lt;strong&gt;æœªèƒ½åŠæ—¶å‘é€å¿ƒè·³&lt;/strong&gt;ï¼ˆè¶…è¿‡ &lt;code&gt;session.timeout.ms&lt;/code&gt;é…ç½®çš„æ—¶é—´ï¼‰ï¼Œè¢«åè°ƒè€…ï¼ˆCoordinatorï¼‰è®¤ä¸ºå·²å¤±æ•ˆè€Œè¸¢å‡ºç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¢é˜…çš„ä¸»é¢˜ï¼ˆTopicï¼‰æ•°é‡å‘ç”Ÿå˜åŒ–&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å½“æ¶ˆè´¹è€…ç»„ä½¿ç”¨&lt;strong&gt;æ­£åˆ™è¡¨è¾¾å¼&lt;/strong&gt;è®¢é˜…ä¸»é¢˜æ—¶ï¼Œå¦‚æœæ­¤æ—¶åˆ›å»ºäº†åŒ¹é…è¯¥æ­£åˆ™æ¨¡å¼çš„æ–°ä¸»é¢˜ï¼Œå°±ä¼šè§¦å‘ Rebalanceã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¢é˜…ä¸»é¢˜çš„åˆ†åŒºæ•°å‘ç”Ÿå˜åŒ–&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç®¡ç†å‘˜é€šè¿‡å‘½ä»¤&lt;strong&gt;å¢åŠ äº†æŸä¸ªä¸»é¢˜çš„åˆ†åŒºæ•°&lt;/strong&gt;ï¼ˆKafka æ”¯æŒåŠ¨æ€å¢åŠ åˆ†åŒºï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„åè°ƒè€…ï¼ˆGroup Coordinatorï¼‰å˜æ›´&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è´Ÿè´£ç®¡ç†è¯¥æ¶ˆè´¹è€…ç»„çš„åè°ƒè€…æ‰€åœ¨çš„ Broker å‘ç”Ÿæ•…éšœï¼Œå¯¼è‡´ç»„éœ€è¦é‡æ–°è¿æ¥åˆ°æ–°çš„åè°ƒè€…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ å…¶ä¸­ï¼Œ&lt;strong&gt;æ¶ˆè´¹è€…ç»„æˆå‘˜æ•°é‡çš„å˜åŒ–&lt;/strong&gt;æ˜¯æœ€å¸¸è§å’Œæœ€ä¸»è¦çš„è§¦å‘åŸå› ï¼Œå°¤å…¶æ˜¯æ¶ˆè´¹è€…å› è¶…æ—¶è¢«è¯¯åˆ¤ç¦»å¼€çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="-äºŒrebalance-çš„è¿‡ç¨‹"&gt;ğŸ”„ äºŒã€Rebalance çš„è¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;Rebalance çš„è¿‡ç¨‹ä¸»è¦æ¶‰åŠ &lt;strong&gt;Group Coordinator&lt;/strong&gt;ï¼ˆæœåŠ¡ç«¯çš„åè°ƒè€…ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª Brokerï¼‰å’Œ &lt;strong&gt;Consumer Coordinator&lt;/strong&gt;ï¼ˆæ¶ˆè´¹è€…ç«¯çš„åè°ƒå™¨ï¼‰ã€‚å…¶å¤§è‡´æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[Rebalanceè§¦å‘æ¡ä»¶æ»¡è¶³] --&amp;gt; B[æ‰€æœ‰æ¶ˆè´¹è€…åœæ­¢æ¶ˆè´¹&amp;lt;br&amp;gt;è¿›å…¥REBALANCINGçŠ¶æ€]
B --&amp;gt; C[æ¶ˆè´¹è€…å‘Coordinator&amp;lt;br&amp;gt;å‘é€JoinGroupè¯·æ±‚]
C --&amp;gt; D[Coordinatoré€‰ä¸¾Leaderæ¶ˆè´¹è€…]
D --&amp;gt; E[Leaderæ¶ˆè´¹è€…åˆ¶å®šåˆ†åŒºåˆ†é…æ–¹æ¡ˆ]
E --&amp;gt; F[Leaderé€šè¿‡SyncGroupè¯·æ±‚&amp;lt;br&amp;gt;å°†æ–¹æ¡ˆå‘é€ç»™Coordinator]
F --&amp;gt; G[Coordinatorå°†åˆ†é…ç»“æœ&amp;lt;br&amp;gt;åŒæ­¥ç»™æ‰€æœ‰æ¶ˆè´¹è€…]
G --&amp;gt; H[æ¶ˆè´¹è€…æ ¹æ®æ–°åˆ†é…çš„åˆ†åŒº&amp;lt;br&amp;gt;æ¢å¤æ¶ˆè´¹]
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€‰ä¸¾ Leader Consumer&lt;/strong&gt;ï¼šCoordinator ä¼šä»æ‰€æœ‰å‘é€äº† &lt;code&gt;JoinGroup&lt;/code&gt;è¯·æ±‚çš„æ¶ˆè´¹è€…ä¸­é€‰ä¸¾ä¸€ä¸ªä½œä¸º Leaderï¼ˆé€šå¸¸ç¬¬ä¸€ä¸ªåŠ å…¥çš„æ¶ˆè´¹è€…ä¼šæˆä¸º Leaderï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ¶å®šåˆ†é…æ–¹æ¡ˆ&lt;/strong&gt;ï¼šLeader Consumer æ ¹æ®ç»„å†…æ‰€æœ‰æ¶ˆè´¹è€…è®¢é˜…çš„ä¸»é¢˜ä¿¡æ¯å’Œé¢„è®¾çš„&lt;strong&gt;åˆ†åŒºåˆ†é…ç­–ç•¥&lt;/strong&gt;ï¼ˆå¦‚ Rangeã€RoundRobinã€Stickyï¼‰ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæ–°çš„åˆ†åŒºåˆ†é…æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æ–¹æ¡ˆ&lt;/strong&gt;ï¼šLeader Consumer å°†åˆ†é…æ–¹æ¡ˆé€šè¿‡ &lt;code&gt;SyncGroup&lt;/code&gt;è¯·æ±‚å‘é€ç»™ Coordinatorï¼ŒCoordinator å†å°†å…¶åŒæ­¥ç»™ç»„å†…çš„æ¯ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚æ¯ä¸ªæ¶ˆè´¹è€…åªçŸ¥é“è‡ªå·±æ‰€åˆ†é…åˆ°çš„åˆ†åŒºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸‰rebalance-çš„å½±å“"&gt;âš ï¸ ä¸‰ã€Rebalance çš„å½±å“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ Rebalance ä¿è¯äº†ç³»ç»Ÿçš„å®¹é”™æ€§å’Œæ‰©å±•æ€§ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥ä¸€äº›è´Ÿé¢å½±å“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å½±å“ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶ˆè´¹æš‚åœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ Rebalance æœŸé—´ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…éƒ½ä¼šåœæ­¢æ¶ˆè´¹æ¶ˆæ¯ï¼Œé€ æˆ&lt;strong&gt;çŸ­æš‚çš„ä¸šåŠ¡ä¸­æ–­&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‡å¤æ¶ˆè´¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥ Rebalance å‰æ¶ˆè´¹è€…æœªåŠæ—¶æäº¤åç§»é‡ï¼ˆOffsetï¼‰ï¼Œå¯èƒ½å¯¼è‡´æ¶ˆæ¯è¢«&lt;strong&gt;é‡å¤å¤„ç†&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Rebalance è¿‡ç¨‹æœ¬èº«éœ€è¦å¤šæ¬¡ç½‘ç»œé€šä¿¡å’Œåè°ƒï¼Œé¢‘ç¹å‘ç”Ÿä¼š&lt;strong&gt;æ¶ˆè€—é¢å¤–çš„CPUå’Œå¸¦å®½&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰©å±•æ€§ç“¶é¢ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹äºéå¸¸å¤§çš„æ¶ˆè´¹è€…ç»„ï¼ˆå¦‚æœ‰æ•°ç™¾ä¸ªæ¶ˆè´¹è€…ï¼‰ï¼Œä¸€æ¬¡å®Œæ•´çš„ Rebalance å¯èƒ½&lt;strong&gt;è€—æ—¶æé•¿&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å››ä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ"&gt;ğŸ› ï¸ å››ã€ä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å‡å°‘ Rebalance çš„è´Ÿé¢å½±å“ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´å…³é”®å‚æ•°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;session.timeout.ms&lt;/code&gt;&lt;/strong&gt;ï¼šå¢å¤§ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤10ç§’ï¼‰ï¼Œå…è®¸æ¶ˆè´¹è€…æœ‰æ›´é•¿æ—¶é—´æ¥å‘é€å¿ƒè·³ï¼Œé¿å…å› ç½‘ç»œæŠ–åŠ¨æˆ–çŸ­æš‚GCè€Œè¢«è¯¯åˆ¤ç¦»çº¿ã€‚å¯å°è¯•è°ƒæ•´ä¸º &lt;strong&gt;20-30ç§’&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;heartbeat.interval.ms&lt;/code&gt;&lt;/strong&gt;ï¼šç¡®ä¿å¿ƒè·³é—´éš”æ˜æ˜¾å°äºä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œé€šå¸¸è®¾ç½®ä¸º &lt;code&gt;session.timeout.ms&lt;/code&gt;çš„ &lt;strong&gt;1/3&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œä¼šè¯è¶…æ—¶ä¸º30ç§’æ—¶ï¼Œå¿ƒè·³é—´éš”å¯è®¾ä¸º &lt;strong&gt;10ç§’&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max.poll.interval.ms&lt;/code&gt;&lt;/strong&gt;ï¼šå¢å¤§æ¯æ¬¡æ‹‰å–æ¶ˆæ¯å¤„ç†çš„æœ€å¤§å…è®¸æ—¶é—´ï¼ˆé»˜è®¤5åˆ†é’Ÿï¼‰ã€‚å¦‚æœä¸šåŠ¡å¤„ç†é€»è¾‘è€—æ—¶è¾ƒé•¿ï¼ŒåŠ¡å¿…å°†æ­¤å‚æ•°è®¾ç½®å¾—&lt;strong&gt;å¤§äºå¤„ç†ä¸€æ‰¹æ¶ˆæ¯çš„æœ€å¤§è€—æ—¶&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šè¢«åè°ƒè€…è®¤ä¸ºæ¶ˆè´¹èƒ½åŠ›ä¸è¶³è€Œè¸¢å‡ºç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©åˆé€‚çš„åˆ†é…ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;StickyAssignor&lt;/strong&gt; æˆ– &lt;strong&gt;CooperativeStickyAssignor&lt;/strong&gt;ï¼ˆå¢é‡Rebalanceï¼‰ã€‚è¿™äº›ç­–ç•¥èƒ½åœ¨ Rebalance æ—¶&lt;strong&gt;å°½é‡ä¿æŒåŸæœ‰çš„åˆ†é…å…³ç³»&lt;/strong&gt;ï¼Œåªè¿›è¡Œæœ€å°å¿…è¦çš„è°ƒæ•´ï¼Œä»è€Œå‡å°‘åˆ†åŒºè¿ç§»çš„æˆæœ¬å’Œæ•´ä½“å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä¸å¿…è¦çš„è®¢é˜…å˜æ›´&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è°¨æ…ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è®¢é˜…ä¸»é¢˜ï¼Œé¿å…é¢‘ç¹åŠ¨æ€åˆ›å»ºåŒ¹é…æ¨¡å¼çš„æ–°ä¸»é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ä¸å‘Šè­¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç›‘æ§æ¶ˆè´¹è€…ç»„çš„ Rebalance é¢‘ç‡ï¼ˆ&lt;code&gt;kafka-consumer-groups.sh&lt;/code&gt;è„šæœ¬ï¼‰ã€æ¶ˆæ¯å¤„ç†å»¶è¿Ÿç­‰æŒ‡æ ‡ï¼Œè®¾ç½®å‘Šè­¦ä»¥ä¾¿åŠæ—¶å‘ç°å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Kafka çš„ Rebalance æœºåˆ¶æ˜¯ä¿éšœæ¶ˆè´¹è€…ç»„é«˜å¯ç”¨å’Œå¯æ‰©å±•çš„åŸºçŸ³ï¼Œä½†å®ƒæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚ç†è§£å…¶è§¦å‘æ¡ä»¶ã€è¿‡ç¨‹å’Œæ½œåœ¨å½±å“ï¼Œå¹¶é€šè¿‡åˆç†çš„å‚æ•°é…ç½®ã€ç­–ç•¥é€‰æ‹©å’Œåº”ç”¨è®¾è®¡æ¥&lt;strong&gt;å°½é‡å‡å°‘éå¿…è¦çš„ Rebalance&lt;/strong&gt;ï¼Œæ˜¯ä¿è¯ Kafka æ¶ˆè´¹ç«¯ç¨³å®šæ€§å’Œé«˜æ€§èƒ½çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Kafka Rebalanceã€‚&lt;/p&gt;
&lt;h2 id="é‡å¤æ¶ˆè´¹"&gt;é‡å¤æ¶ˆè´¹
&lt;/h2&gt;&lt;p&gt;Kafka çš„ Rebalance æœºåˆ¶è™½ç„¶ä¿è¯äº†æ¶ˆè´¹è€…ç»„çš„å®¹é”™æ€§å’Œæ‰©å±•æ€§ï¼Œä½†ç¡®å®å¯èƒ½å¼•èµ·&lt;strong&gt;é‡å¤æ¶ˆè´¹&lt;/strong&gt;é—®é¢˜ã€‚ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°åº”å¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°†ä»åŸå› ã€è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µç­‰æ–¹é¢ä¸ºä½ è¯´æ˜ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¿«é€Ÿäº†è§£ä¸»è¦çš„è§£å†³æ–¹æ¡ˆå’Œé€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è§£å†³æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€è·¯&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰‹åŠ¨æäº¤ä½ç§»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡å¤„ç†æˆåŠŸåæ‰‹åŠ¨æäº¤ä½ç§»ï¼Œé¿å…æ¶ˆæ¯æœªå¤„ç†å°±æäº¤&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰éœ€è¦é¿å…é‡å¤æ¶ˆè´¹çš„åœºæ™¯ï¼Œå°¤å…¶æ˜¯æ¶ˆæ¯å¤„ç†è€—æ—¶æˆ–ä¸šåŠ¡é€»è¾‘é‡è¦çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;å¯æœ€å¤§ç¨‹åº¦é¿å…æ¶ˆæ¯ä¸¢å¤±å’Œé‡å¤æ¶ˆè´¹&lt;/td&gt;
&lt;td&gt;éœ€åœ¨ä»£ç ä¸­æ˜¾å¼æ§åˆ¶æäº¤æ—¶æœºï¼Œå¢åŠ å¤æ‚åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹‚ç­‰æ€§å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ä¸šåŠ¡é€»è¾‘å¯¹é‡å¤æ¶ˆæ¯å…ç–«&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰å¯èƒ½é‡å¤æ¶ˆè´¹çš„åœºæ™¯ï¼Œä½œä¸ºå…œåº•æ–¹æ¡ˆ&lt;/td&gt;
&lt;td&gt;æœ€æ ¹æœ¬çš„è§£å†³ä¹‹é“ï¼Œå¯é æ€§é«˜&lt;/td&gt;
&lt;td&gt;éœ€æ ¹æ®ä¸šåŠ¡é€»è¾‘å®ç°ï¼Œå¯èƒ½å¢åŠ ç³»ç»Ÿå¤æ‚æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒæ•´å…³é”®å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡å°‘ä¸å¿…è¦çš„ Rebalance&lt;/td&gt;
&lt;td&gt;å› å‚æ•°é…ç½®ä¸å½“ï¼ˆå¦‚å¿ƒè·³è¶…æ—¶ã€å¤„ç†è¶…æ—¶ï¼‰å¯¼è‡´ Rebalance çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;ä»æºå¤´é™ä½ Rebalance æ¦‚ç‡ï¼Œæ•ˆæœç›´æ¥&lt;/td&gt;
&lt;td&gt;éœ€æ ¹æ®å®é™…ç¯å¢ƒè°ƒæ•´ï¼Œå‚æ•°è®¾ç½®éœ€è°¨æ…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½¿ç”¨äº‹åŠ¡ç”Ÿäº§è€…/æ¶ˆè´¹è€…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ Kafka çš„ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰ï¼ˆEOSï¼‰&lt;/td&gt;
&lt;td&gt;é‡‘èã€äº¤æ˜“ç­‰å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;Kafka åŸç”Ÿæ”¯æŒï¼Œæä¾›å¼ºä¸€è‡´æ€§ä¿è¯&lt;/td&gt;
&lt;td&gt;æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œé…ç½®ç¨å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç° Rebalance ç›‘å¬å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ Rebalance å‘ç”Ÿæ—¶ä¸»åŠ¨æäº¤ä½ç§»æˆ–ä¿å­˜çŠ¶æ€&lt;/td&gt;
&lt;td&gt;éœ€è¦ç²¾ç»†æ§åˆ¶ Rebalance å‰åè¡Œä¸ºçš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;æä¾›æ›´ç»†ç²’åº¦çš„æ§åˆ¶æœºä¼š&lt;/td&gt;
&lt;td&gt;å®ç°ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ç†è§£é‡å¤æ¶ˆè´¹çš„åŸå› "&gt;âš ï¸ ç†è§£é‡å¤æ¶ˆè´¹çš„åŸå› 
&lt;/h3&gt;&lt;p&gt;Rebalance è¿‡ç¨‹ä¸­ï¼Œæ¶ˆè´¹è€…ç»„ä¼šé‡æ–°åˆ†é…åˆ†åŒºã€‚å¦‚æœ&lt;strong&gt;ä½ç§»æäº¤æ˜¯å¼‚æ­¥çš„æˆ–æ—¶æœºä¸å½“&lt;/strong&gt;ï¼Œæˆ–è€…æ¶ˆè´¹è€…&lt;strong&gt;å¤„ç†æ¶ˆæ¯çš„æ—¶é—´è¿‡é•¿&lt;/strong&gt;å¯¼è‡´è¢«è¯¯åˆ¤æ­»äº¡ï¼Œéƒ½å¯èƒ½é€ æˆé‡å¤æ¶ˆè´¹ ã€‚&lt;/p&gt;
&lt;h3 id="-åº”å¯¹ç­–ç•¥ä¸æœ€ä½³å®è·µ"&gt;ğŸ› ï¸ åº”å¯¹ç­–ç•¥ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;h4 id="1-æ‘’å¼ƒè‡ªåŠ¨æäº¤é‡‡ç”¨æ‰‹åŠ¨æäº¤ä½ç§»"&gt;1. æ‘’å¼ƒè‡ªåŠ¨æäº¤ï¼Œé‡‡ç”¨æ‰‹åŠ¨æäº¤ä½ç§»
&lt;/h4&gt;&lt;p&gt;é»˜è®¤çš„è‡ªåŠ¨æäº¤ï¼ˆ&lt;code&gt;enable.auto.commit=true&lt;/code&gt;ï¼‰ä¼šåœ¨å›ºå®šçš„æ—¶é—´é—´éš”ï¼ˆå¦‚5ç§’ï¼‰æäº¤ä½ç§»ï¼Œè¿™ææ˜“å¯¼è‡´&lt;strong&gt;æ¶ˆæ¯å¤„ç†å®Œæˆå‰ä½ç§»å·²è¢«æäº¤&lt;/strong&gt;ï¼Œæˆ–åœ¨Rebalanceå‘ç”Ÿæ—¶&lt;strong&gt;æ¥ä¸åŠæäº¤ä½ç§»&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼šè®¾ç½® &lt;code&gt;enable.auto.commit=false&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æäº¤ (&lt;code&gt;commitSync()&lt;/code&gt;)&lt;/strong&gt;ï¼šç¡®ä¿æäº¤æˆåŠŸåå†ç»§ç»­ï¼Œä½†ä¼šé˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥æäº¤ (&lt;code&gt;commitAsync()&lt;/code&gt;)&lt;/strong&gt;ï¼šä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ï¼Œä½†éœ€é…åˆå›è°ƒå‡½æ•°å¤„ç†å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èåšæ³•&lt;/strong&gt;ï¼šåœ¨æ¶ˆæ¯å¤„ç†é€»è¾‘å®Œæˆåï¼Œ&lt;strong&gt;æ‰‹åŠ¨æäº¤ä½ç§»&lt;/strong&gt;ã€‚è¿™å¯ä»¥ç¡®ä¿åªæœ‰æˆåŠŸå¤„ç†çš„æ¶ˆæ¯æ‰ä¼šè¢«æäº¤ä½ç§» ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-å®ç°ä¸šåŠ¡é€»è¾‘çš„å¹‚ç­‰æ€§"&gt;2. å®ç°ä¸šåŠ¡é€»è¾‘çš„å¹‚ç­‰æ€§
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯åº”å¯¹é‡å¤æ¶ˆè´¹çš„&lt;strong&gt;ç»ˆæä¿é™©&lt;/strong&gt;ã€‚å³ä½¿æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Œä¹Ÿèƒ½ä¿è¯æœ€ç»ˆç»“æœä¸€è‡´ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¸ç”¨æ–¹æ³•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸ºæ¶ˆæ¯åˆ†é…å…¨å±€å”¯ä¸€IDï¼ˆå¦‚ä¸šåŠ¡IDã€è¯·æ±‚IDï¼‰ï¼Œå¹¶åœ¨å¤„ç†å‰åœ¨æ•°æ®åº“æˆ–ç¼“å­˜ä¸­æŸ¥è¯¢è¯¥IDæ˜¯å¦å·²å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨æ•°æ®åº“çš„å”¯ä¸€é”®çº¦æŸæˆ–ä¹è§‚é”æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ä¼˜åŒ–æ¶ˆè´¹è€…é…ç½®å‡å°‘ä¸å¿…è¦çš„rebalance"&gt;3. ä¼˜åŒ–æ¶ˆè´¹è€…é…ç½®ï¼Œå‡å°‘ä¸å¿…è¦çš„Rebalance
&lt;/h4&gt;&lt;p&gt;è®¸å¤šRebalanceæ˜¯ç”±äºå‚æ•°é…ç½®ä¸å½“ï¼Œæ¶ˆè´¹è€…è¢«&lt;strong&gt;è¯¯åˆ¤ä¸ºå¤±æ•ˆ&lt;/strong&gt;è€Œè§¦å‘çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;session.timeout.ms&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;å¢åŠ ä¼šè¯è¶…æ—¶æ—¶é—´&lt;/strong&gt;ï¼ˆä¾‹å¦‚è®¾ç½®ä¸º30ç§’ï¼‰ï¼Œå…è®¸æ¶ˆè´¹è€…æœ‰æ›´é•¿æ—¶é—´å‘é€å¿ƒè·³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;heartbeat.interval.ms&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;ä¿æŒå¿ƒè·³é—´éš”ç¨³å®š&lt;/strong&gt;ï¼Œé€šå¸¸è®¾ä¸º &lt;code&gt;session.timeout.ms&lt;/code&gt;çš„ä¸‰åˆ†ä¹‹ä¸€ï¼ˆä¾‹å¦‚10ç§’ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max.poll.interval.ms&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;å¢åŠ å¤„ç†æ¶ˆæ¯çš„æœ€å¤§å…è®¸æ—¶é—´&lt;/strong&gt;ã€‚å¦‚æœä¸šåŠ¡å¤„ç†é€»è¾‘è€—æ—¶è¾ƒé•¿ï¼ŒåŠ¡å¿…å¢å¤§æ­¤å€¼ï¼ˆä¾‹å¦‚10-15åˆ†é’Ÿï¼‰ï¼Œé˜²æ­¢æ¶ˆè´¹è€…å› å¤„ç†æ…¢è€Œè¢«è¸¢å‡ºç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max.poll.records&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;é™åˆ¶å•æ¬¡æ‹‰å–çš„æ¶ˆæ¯æ•°&lt;/strong&gt;ã€‚å‡å°‘æ¯æ¬¡å¤„ç†çš„æ¶ˆæ¯é‡ï¼Œæœ‰åŠ©äºåœ¨ &lt;code&gt;max.poll.interval.ms&lt;/code&gt;å†…å®Œæˆå¤„ç†ï¼Œé¿å…è§¦å‘Rebalanceã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-ä½¿ç”¨kafkaçš„äº‹åŠ¡æœºåˆ¶"&gt;4. ä½¿ç”¨Kafkaçš„äº‹åŠ¡æœºåˆ¶
&lt;/h4&gt;&lt;p&gt;å¯¹äºè¦æ±‚&lt;strong&gt;æé«˜ä¸€è‡´æ€§&lt;/strong&gt;çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨Kafkaçš„äº‹åŠ¡ï¼ˆTransactionï¼‰æœºåˆ¶æ¥å®ç°&lt;strong&gt;ç²¾ç¡®ä¸€æ¬¡ï¼ˆExactly-Onceï¼‰&lt;/strong&gt; è¯­ä¹‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿäº§è€…é…ç½®&lt;/strong&gt;ï¼šå¯ç”¨å¹‚ç­‰æ€§ &lt;code&gt;enable.idempotence=true&lt;/code&gt;å¹¶è®¾ç½® &lt;code&gt;transactional.id&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¶ˆè´¹è€…é…ç½®&lt;/strong&gt;ï¼šè®¾ç½® &lt;code&gt;isolation.level=read_committed&lt;/code&gt;ï¼Œåªæ¶ˆè´¹å·²æäº¤çš„äº‹åŠ¡æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ–¹æ¡ˆæ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œéœ€æ ¹æ®ä¸šåŠ¡é‡è¦æ€§æƒè¡¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-å®ç°consumerrebalancelistener"&gt;5. å®ç°ConsumerRebalanceListener
&lt;/h4&gt;&lt;p&gt;é€šè¿‡å®ç°&lt;code&gt;ConsumerRebalanceListener&lt;/code&gt;æ¥å£ï¼Œä½ å¯ä»¥åœ¨Rebalance&lt;strong&gt;å‘ç”Ÿå‰å&lt;/strong&gt;æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œä»è€Œæ›´ç²¾ç»†åœ°æ§åˆ¶ä½ç§»æäº¤å’ŒçŠ¶æ€æ¢å¤ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;onPartitionsRevoked&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨åˆ†åŒºè¢«å›æ”¶&lt;strong&gt;å‰&lt;/strong&gt;è§¦å‘ã€‚è¿™æ˜¯&lt;strong&gt;åŒæ­¥æäº¤å½“å‰å¤„ç†ä½ç§»çš„æœ€ä½³æ—¶æœº&lt;/strong&gt;ï¼Œå¯ä»¥æå¤§å‡å°‘é‡å¤æ¶ˆè´¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;onPartitionsAssigned&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨åˆ†åŒºè¢«åˆ†é…&lt;strong&gt;å&lt;/strong&gt;è§¦å‘ã€‚å¯åœ¨è¿™é‡Œä»å¤–éƒ¨å­˜å‚¨ä¸­æ¢å¤ä½ç§»æˆ–åˆå§‹åŒ–çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;è¦æœ‰æ•ˆé¿å…Rebalanceå¯¼è‡´çš„é‡å¤æ¶ˆè´¹ï¼Œé€šå¸¸éœ€è¦&lt;strong&gt;ç»„åˆç­–ç•¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¦–è¦æ­¥éª¤&lt;/strong&gt;ï¼š&lt;strong&gt;ç¦ç”¨è‡ªåŠ¨æäº¤ï¼Œæ”¹ç”¨æ‰‹åŠ¨æäº¤&lt;/strong&gt;ã€‚å¹¶åœ¨å¤„ç†å®Œæ¶ˆæ¯åæäº¤ä½ç§»ï¼Œè¿™æ˜¯åŸºç¡€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®é…ç½®&lt;/strong&gt;ï¼š&lt;strong&gt;åˆç†è°ƒæ•´ &lt;code&gt;session.timeout.ms&lt;/code&gt;ã€&lt;code&gt;max.poll.interval.ms&lt;/code&gt;å’Œ &lt;code&gt;max.poll.records&lt;/code&gt;&lt;/strong&gt;ï¼Œå‡å°‘éå¿…è¦çš„Rebalanceã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¹æœ¬ä¿éšœ&lt;/strong&gt;ï¼š&lt;strong&gt;å°½é‡å®ç°ä¸šåŠ¡çš„å¹‚ç­‰æ€§&lt;/strong&gt;ã€‚è¿™æ˜¯æœ€å®‰å…¨å¯é çš„å…œåº•æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜çº§ä¿éšœ&lt;/strong&gt;ï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œå¯è€ƒè™‘&lt;strong&gt;ä½¿ç”¨Kafkaäº‹åŠ¡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç»†æ§åˆ¶&lt;/strong&gt;ï¼šé€šè¿‡&lt;strong&gt;å®ç° &lt;code&gt;ConsumerRebalanceListener&lt;/code&gt;&lt;/strong&gt;ï¼Œåœ¨Rebalanceå‘ç”Ÿæ—¶ä¸»åŠ¨æäº¤ä½ç§»ï¼Œè¿›ä¸€æ­¥é™ä½é‡å¤æ¶ˆè´¹é£é™©ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›æ–¹æ¡ˆèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°é©¾é©­Kafkaï¼Œæ„å»ºæ›´ç¨³å®šå¯é çš„æ•°æ®å¤„ç†ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2 id="ç”Ÿäº§è€…åˆ†åŒº"&gt;ç”Ÿäº§è€…åˆ†åŒº
&lt;/h2&gt;&lt;p&gt;Kafka ç”Ÿäº§è€…çš„åˆ†åŒºç­–ç•¥æ˜¯ä¸€ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒå†³å®šäº†æ¶ˆæ¯å¦‚ä½•è¢«å†™å…¥åˆ° Topic çš„å„ä¸ªåˆ†åŒºä¸­ï¼Œç›´æ¥å½±å“ç€ç³»ç»Ÿçš„&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;ã€&lt;strong&gt;æ¶ˆæ¯é¡ºåºæ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ååæ€§èƒ½&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£æä¸»è¦çš„ç­–ç•¥ç±»å‹ã€å·¥ä½œåŸç†ä»¥åŠå¦‚ä½•æ ¹æ®ä¸šåŠ¡åœºæ™¯è¿›è¡Œé€‰æ‹©ã€‚&lt;/p&gt;
&lt;h3 id="-åˆ†åŒºç­–ç•¥çš„æ ¸å¿ƒä»·å€¼"&gt;ğŸ§  åˆ†åŒºç­–ç•¥çš„æ ¸å¿ƒä»·å€¼
&lt;/h3&gt;&lt;p&gt;åœ¨ Kafka ä¸­ï¼Œä¸€ä¸ª Topic å¯ä»¥è¢«åˆ†ä¸ºå¤šä¸ªåˆ†åŒºï¼ˆPartitionï¼‰ï¼Œè¿™æ˜¯ Kafka å®ç°&lt;strong&gt;æ°´å¹³æ‰©å±•&lt;/strong&gt;å’Œ&lt;strong&gt;é«˜å¹¶å‘&lt;/strong&gt;çš„åŸºç¡€ã€‚ç”Ÿäº§è€…åˆ†åŒºç­–ç•¥çš„æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨å¤šä¸ªåˆ†åŒºä¸Šåˆç†åˆ†å¸ƒæ¶ˆæ¯ï¼Œæ—¢è¦é¿å…æŸäº›åˆ†åŒºè¿‡è½½ï¼ˆçƒ­ç‚¹ï¼‰ï¼Œåˆè¦ä¿è¯å…·æœ‰é€»è¾‘ç›¸å…³æ€§çš„æ¶ˆæ¯ï¼ˆå¦‚åŒä¸€ä¸ªè®¢å•çš„æ‰€æœ‰æ¶ˆæ¯ï¼‰èƒ½æŒ‰é¡ºåºè¢«å¤„ç†ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-åˆ†åŒºç­–ç•¥æ¦‚è§ˆ"&gt;ğŸ“Š åˆ†åŒºç­–ç•¥æ¦‚è§ˆ
&lt;/h3&gt;&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº† Kafka ç”Ÿäº§è€…ä¸»è¦çš„å‡ ç§åˆ†åŒºç­–ç•¥åŠå…¶æ ¸å¿ƒç‰¹æ€§ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç­–ç•¥åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;é¡ºåºæ€§ä¿è¯&lt;/th&gt;
&lt;th&gt;è´Ÿè½½å‡è¡¡æ•ˆæœ&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤ç­–ç•¥ (DefaultPartitioner)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰ Key åˆ™å“ˆå¸Œå–æ¨¡ï¼Œæ—  Key åˆ™è½®è¯¢ï¼ˆæ–°ç‰ˆæœ¬ä¸ºç²˜æ€§è½®è¯¢ï¼‰&lt;/td&gt;
&lt;td&gt;åŒä¸€ Key ä¿è¯é¡ºåº&lt;/td&gt;
&lt;td&gt;å¯èƒ½å›  Key å€¾æ–œè€Œä¸å‡&lt;/td&gt;
&lt;td&gt;é€šç”¨åœºæ™¯ï¼›éœ€æŒ‰ Key ä¿åºæˆ–å‡åŒ€åˆ†å¸ƒæ—  Key æ¶ˆæ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç²˜æ€§åˆ†åŒºç­–ç•¥ (Sticky Partitioner)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—  Key æ—¶ï¼Œä¼˜å…ˆå°†æ¶ˆæ¯æ‰¹é‡å¡«å……è‡³åŒä¸€åˆ†åŒºï¼Œæ»¡æ‰¹æ¬¡åå†â€œç²˜â€åˆ°ä¸‹ä¸€ä¸ªåˆ†åŒº&lt;/td&gt;
&lt;td&gt;ä¸ä¿è¯&lt;/td&gt;
&lt;td&gt;æ‰¹æ¬¡å±‚é¢å‡è¡¡ï¼Œæ•´ä½“å‡åŒ€&lt;/td&gt;
&lt;td&gt;é«˜åååœºæ™¯ï¼›è¿½æ±‚æœ€å¤§ç”Ÿäº§æ•ˆç‡å’Œå‡å°‘ç½‘ç»œå¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‡å®šåˆ†åŒº (Explicit Partition)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥åœ¨ä»£ç ä¸­æŒ‡å®šç›®æ ‡åˆ†åŒºå·&lt;/td&gt;
&lt;td&gt;æŒ‡å®šåˆ†åŒºå†…ä¿è¯é¡ºåº&lt;/td&gt;
&lt;td&gt;ä¾èµ–äººå·¥åˆ†é…ï¼Œææ˜“ä¸å‡&lt;/td&gt;
&lt;td&gt;ç‰¹æ®Šè·¯ç”±éœ€æ±‚ï¼›è°ƒè¯•æˆ–æµ‹è¯•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰ç­–ç•¥ (Custom Partitioner)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼€å‘è€…å®ç°æ¥å£ï¼Œæ ¹æ®ä»»æ„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚åœ°åŒºã€ç”¨æˆ·ç±»å‹ï¼‰è®¡ç®—åˆ†åŒºå·&lt;/td&gt;
&lt;td&gt;æŒ‰è‡ªå®šä¹‰é€»è¾‘ä¿è¯&lt;/td&gt;
&lt;td&gt;å¯è®¾è®¡ä¸ºå‡è¡¡ï¼Œä¹Ÿå¯èƒ½å€¾æ–œ&lt;/td&gt;
&lt;td&gt;å¤æ‚ä¸šåŠ¡éœ€æ±‚ï¼›é»˜è®¤ç­–ç•¥æ— æ³•æ»¡è¶³çš„ç‰¹æ®Šåˆ†å‘è§„åˆ™&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å„ç§ç­–ç•¥"&gt;ğŸ” æ·±å…¥ç†è§£å„ç§ç­–ç•¥
&lt;/h3&gt;&lt;h4 id="1-é»˜è®¤åˆ†åŒºç­–ç•¥-defaultpartitioner"&gt;1. é»˜è®¤åˆ†åŒºç­–ç•¥ (DefaultPartitioner)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨ä¸”æ— éœ€ç‰¹æ®Šé…ç½®çš„ç­–ç•¥ã€‚å®ƒçš„è¡Œä¸ºé€»è¾‘æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯æŒ‡å®šäº† Key&lt;/strong&gt;ï¼šå¯¹ Key è¿›è¡Œ &lt;strong&gt;å“ˆå¸Œè®¡ç®—&lt;/strong&gt;ï¼ˆé€šå¸¸ä½¿ç”¨ Murmur2Hash ç®—æ³•ï¼‰ï¼Œç„¶åå¯¹åˆ†åŒºæ€»æ•°&lt;strong&gt;å–æ¨¡&lt;/strong&gt;ï¼Œå¾—åˆ°ç›®æ ‡åˆ†åŒºå·ï¼š&lt;code&gt;partition = hash(key) % numPartitions&lt;/code&gt;ã€‚&lt;strong&gt;è¿™ç¡®ä¿äº†ç›¸åŒ Key çš„æ‰€æœ‰æ¶ˆæ¯ä¸€å®šä¼šè¢«å‘é€åˆ°åŒä¸€ä¸ªåˆ†åŒºï¼Œä»è€Œä¿è¯äº†è¯¥åˆ†åŒºå†…è¿™äº›æ¶ˆæ¯çš„ä¸¥æ ¼é¡ºåº&lt;/strong&gt;ï¼Œè¿™å¯¹äºè®¢å•æµæ°´ã€ç”¨æˆ·è¡Œä¸ºè¿½è¸ªç­‰åœºæ™¯è‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯æœªæŒ‡å®š Key (null)&lt;/strong&gt;ï¼šåœ¨æ—§ç‰ˆæœ¬ä¸­ï¼Œä¼šé‡‡ç”¨ç®€å•çš„è½®è¯¢ï¼ˆRound-Robinï¼‰ã€‚ä½†åœ¨ &lt;strong&gt;Kafka 2.4+&lt;/strong&gt; ä¸­ï¼Œé»˜è®¤è¡Œä¸ºå˜ä¸ºäº† &lt;strong&gt;ç²˜æ€§åˆ†åŒºç­–ç•¥&lt;/strong&gt;ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œä»¥æ˜¾è‘—æå‡ç”Ÿäº§ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ç²˜æ€§åˆ†åŒºç­–ç•¥-sticky-partitioner"&gt;2. ç²˜æ€§åˆ†åŒºç­–ç•¥ (Sticky Partitioner)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç§ä¼˜åŒ–ç­–ç•¥ï¼Œæ—¨åœ¨å‡å°‘ç”Ÿäº§è€…ä¸ Broker ä¹‹é—´è¿æ¥å’Œæ‰¹æ¬¡åˆ›å»ºçš„å¼€é”€ï¼Œå°¤å…¶åœ¨æ¶ˆæ¯æ²¡æœ‰ Key æ—¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šå½“æ¶ˆæ¯æ²¡æœ‰ Key æ—¶ï¼Œç”Ÿäº§è€…ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªåˆ†åŒºï¼Œç„¶ååœ¨&lt;strong&gt;ä¸€æ®µæ—¶é—´å†…æˆ–ç§¯æ”’è¶³å¤Ÿå¤šæ¶ˆæ¯ï¼ˆå½¢æˆä¸€ä¸ªæ‰¹æ¬¡ï¼‰ä¹‹å‰&lt;/strong&gt;ï¼Œå°†æ‰€æœ‰æ¶ˆæ¯éƒ½å‘å¾€è¿™ä¸ª&lt;strong&gt;ç›¸åŒ&lt;/strong&gt;çš„åˆ†åŒºã€‚ç›´åˆ°æ»¡è¶³æŸä¸ªæ¡ä»¶ï¼ˆå¦‚æ‰¹æ¬¡å·²æ»¡æˆ–è¶…æ—¶ï¼‰ï¼Œå®ƒæ‰ä¼šâ€œç²˜â€åˆ°ä¸‹ä¸€ä¸ªéšæœºé€‰æ‹©çš„åˆ†åŒºã€‚è¿™é¿å…äº†é¢‘ç¹åˆ‡æ¢åˆ†åŒºå¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šé€šè¿‡&lt;strong&gt;æ‰¹é‡å‘é€&lt;/strong&gt;å‡å°‘äº†ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œé™ä½äº† CPU ä½¿ç”¨ç‡ï¼Œä»è€Œæå¤§åœ°æå‡äº†&lt;strong&gt;ååé‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šéå¸¸é€‚åˆæ—¥å¿—æ”¶é›†ã€æŒ‡æ ‡ä¸ŠæŠ¥ç­‰å¯¹é¡ºåºæ€§æ— è¦æ±‚ä½†è¦æ±‚æé«˜ååçš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-æŒ‡å®šåˆ†åŒº-explicit-partition"&gt;3. æŒ‡å®šåˆ†åŒº (Explicit Partition)
&lt;/h4&gt;&lt;p&gt;ç”Ÿäº§è€…å¯ä»¥åœ¨åˆ›å»º &lt;code&gt;ProducerRecord&lt;/code&gt;æ—¶ç›´æ¥æŒ‡å®šä¸€ä¸ªåˆ†åŒºå·ã€‚æ­¤ç­–ç•¥&lt;strong&gt;å®Œå…¨ç»•è¿‡åˆ†åŒºå™¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;ï¼šé€šå¸¸ç”¨äºç‰¹æ®Šçš„è°ƒè¯•ã€æµ‹è¯•åœºæ™¯ï¼Œæˆ–è€…æœ‰éå¸¸ç‰¹å®šçš„è·¯ç”±éœ€æ±‚ï¼Œä½†&lt;strong&gt;ä¸æ¨è&lt;/strong&gt;åœ¨å¸¸è§„ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼Œå› ä¸ºå®ƒææ˜“å¯¼è‡´ä¸¥é‡çš„&lt;strong&gt;æ•°æ®å€¾æ–œ&lt;/strong&gt;ï¼Œä½¿è´Ÿè½½å‡è¡¡å¤±æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-è‡ªå®šä¹‰åˆ†åŒºç­–ç•¥-custom-partitioner"&gt;4. è‡ªå®šä¹‰åˆ†åŒºç­–ç•¥ (Custom Partitioner)
&lt;/h4&gt;&lt;p&gt;å½“ä¸Šè¿°æ‰€æœ‰ç­–ç•¥éƒ½æ— æ³•æ»¡è¶³ä½ çš„ä¸šåŠ¡éœ€æ±‚æ—¶ï¼Œä½ å¯ä»¥å®ç° &lt;code&gt;org.apache.kafka.clients.producer.Partitioner&lt;/code&gt;æ¥å£ï¼Œç¼–å†™å®Œå…¨è‡ªå®šä¹‰çš„åˆ†åŒºé€»è¾‘ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºä¸šåŠ¡å­—æ®µ&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œæ ¹æ®æ¶ˆæ¯ä½“ä¸­çš„â€œç”¨æˆ·åœ°åŸŸâ€å­—æ®µï¼Œå°†ä¸åŒåœ°åŒºçš„ç”¨æˆ·æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„åˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…çƒ­ç‚¹&lt;/strong&gt;ï¼šå½“æŸä¸ª Key ç‰¹åˆ«å¤§ï¼ˆå¦‚ç½‘çº¢ç”¨æˆ·ï¼‰ï¼Œé€šè¿‡è‡ªå®šä¹‰é€»è¾‘å°†å…¶æ•£åˆ—åˆ°å¤šä¸ªåˆ†åŒºï¼Œé¿å…å•ä¸ªåˆ†åŒºè¿‡çƒ­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§é˜Ÿåˆ—&lt;/strong&gt;ï¼šå°†é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯ï¼ˆå¦‚ VIP è®¢å•ï¼‰å›ºå®šå‘é€åˆ°æŸä¸ªç‰¹å®šåˆ†åŒºï¼Œä»¥ä¾¿æ¶ˆè´¹è€…ä¼˜å…ˆå¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ­¥éª¤&lt;/strong&gt;ï¼š
&lt;ol&gt;
&lt;li&gt;å®ç° &lt;code&gt;Partitioner&lt;/code&gt;æ¥å£ï¼Œä¸»è¦åœ¨ &lt;code&gt;partition()&lt;/code&gt;æ–¹æ³•ä¸­ç¼–å†™é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç”Ÿäº§è€…é…ç½®ä¸­é€šè¿‡ &lt;code&gt;partitioner.class&lt;/code&gt;å±æ€§æŒ‡å®šä½ çš„è‡ªå®šä¹‰ç±»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç­–ç•¥é€‰æ‹©ä¸æœ€ä½³å®è·µ"&gt;âš–ï¸ ç­–ç•¥é€‰æ‹©ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•é€‰æ‹©ç­–ç•¥ï¼Ÿ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æŒ‰ Key ä¿è¯æ¶ˆæ¯é¡ºåº&lt;/strong&gt;ï¼ˆå¦‚è®¢å•çŠ¶æ€å˜æ›´ï¼‰ï¼šä½¿ç”¨&lt;strong&gt;é»˜è®¤ç­–ç•¥&lt;/strong&gt;ï¼Œå¹¶ä¸ºç›¸å…³æ¶ˆæ¯è®¾ç½®&lt;strong&gt;ç›¸åŒçš„ Key&lt;/strong&gt;ã€‚è¿™æ˜¯æœ€å¸¸è§çš„æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªéœ€æœ€å¤§åŒ–ååï¼Œæ— é¡ºåºè¦æ±‚&lt;/strong&gt;ï¼ˆå¦‚æ—¥å¿—ã€æŒ‡æ ‡ï¼‰ï¼šä½¿ç”¨&lt;strong&gt;ç²˜æ€§åˆ†åŒºç­–ç•¥&lt;/strong&gt;ï¼ˆKafka 2.4+ åæ—  Key é»˜è®¤å³æ˜¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ‰å¤æ‚çš„åˆ†åŒºéœ€æ±‚&lt;/strong&gt;ï¼ˆå¦‚æŒ‰åœ°åŸŸã€ä¸šåŠ¡ç±»å‹ï¼‰ï¼šå¼€å‘&lt;strong&gt;è‡ªå®šä¹‰åˆ†åŒºå™¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å€¾æ–œï¼ˆçƒ­ç‚¹ï¼‰é—®é¢˜&lt;/strong&gt;ï¼šå¦‚æœä½ çš„ Key åˆ†å¸ƒæä¸å‡åŒ€ï¼ˆä¾‹å¦‚ï¼ŒæŸä¸ª Key çš„æ¶ˆæ¯é‡ç‰¹åˆ«å¤§ï¼‰ï¼Œä¼šå¯¼è‡´å¤§éƒ¨åˆ†æ¶ˆæ¯æ¶Œå…¥å°‘æ•°å‡ ä¸ªåˆ†åŒºï¼Œé€ æˆ&lt;strong&gt;çƒ­ç‚¹é—®é¢˜&lt;/strong&gt;ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼šå¯¹ Key è¿›è¡ŒåŠ ç›ï¼ˆæ·»åŠ éšæœºåç¼€ï¼‰ã€ä½¿ç”¨å¤åˆ Keyæˆ–åœ¨è‡ªå®šä¹‰åˆ†åŒºå™¨ä¸­å®ç°å‡è¡¡é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºæ•°è§„åˆ’&lt;/strong&gt;ï¼šTopic çš„åˆ†åŒºæ•°&lt;strong&gt;ä¸€æ—¦å¢åŠ ï¼Œå°±æ— æ³•å‡å°‘&lt;/strong&gt;ã€‚å¢åŠ åˆ†åŒºä¼šæ”¹å˜å“ˆå¸Œå–æ¨¡çš„åŸºæ•°ï¼Œå¯èƒ½å¯¼è‡´ç›¸åŒ Key çš„æ¶ˆæ¯è¢«è·¯ç”±åˆ°ä¸åŒçš„åˆ†åŒºï¼Œ&lt;strong&gt;ç ´åé¡ºåºæ€§&lt;/strong&gt;ã€‚å› æ­¤ï¼Œåˆå§‹è®¾ç½®æ—¶éœ€è¦æ ¹æ®é¢„æœŸååé‡å’Œæ¶ˆè´¹è€…æ•°é‡è°¨æ…è§„åˆ’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šä½¿ç”¨ Kafka å·¥å…·ï¼ˆå¦‚ &lt;code&gt;kafka-consumer-groups.sh&lt;/code&gt;ï¼‰ç›‘æ§å„åˆ†åŒºçš„æ¶ˆæ¯ç§¯å‹é‡ï¼ˆLagï¼‰ï¼ŒåŠæ—¶å‘ç°å€¾æ–œé—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Kafka ç”Ÿäº§è€…çš„åˆ†åŒºç­–ç•¥æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè®©ä½ èƒ½åœ¨&lt;strong&gt;æ¶ˆæ¯é¡ºåºæ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ç³»ç»Ÿååé‡/è´Ÿè½½å‡è¡¡&lt;/strong&gt;ä¹‹é—´åšå‡ºçµæ´»çš„æƒè¡¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‰¢è®° &lt;strong&gt;Key&lt;/strong&gt; æ˜¯æ§åˆ¶æ¶ˆæ¯å»å‘å’Œé¡ºåºçš„é’¥åŒ™ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨&lt;strong&gt;é»˜è®¤ç­–ç•¥&lt;/strong&gt;å¹¶è®¾ç½®å¥½ Key å°±èƒ½æ»¡è¶³éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¿½æ±‚æè‡´ååä¸”æ— é¡ºåºè¦æ±‚çš„åœºæ™¯ä¸‹ï¼Œ&lt;strong&gt;ç²˜æ€§åˆ†åŒº&lt;/strong&gt;æ˜¯æ€§èƒ½åˆ©å™¨ã€‚&lt;/li&gt;
&lt;li&gt;é¢å¯¹ç‹¬ç‰¹å¤æ‚çš„ä¸šåŠ¡è§„åˆ™æ—¶ï¼Œä¸è¦çŠ¹è±«ï¼Œ&lt;strong&gt;è‡ªå®šä¹‰åˆ†åŒºå™¨&lt;/strong&gt;ä¼šç»™ä½ å……åˆ†çš„æ§åˆ¶æƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ Kafka çš„ç”Ÿäº§è€…åˆ†åŒºç­–ç•¥ã€‚&lt;/p&gt;
&lt;h2 id="æ´»é”é—®é¢˜"&gt;æ´»é”é—®é¢˜
&lt;/h2&gt;&lt;p&gt;Kafkaçš„æ´»é”é—®é¢˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„ç°è±¡ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»æ´»é”çš„å…³é”®æ–¹é¢ï¼Œç„¶åæˆ‘ä»¬å†æ·±å…¥æ¢è®¨å…¶æœºç†å’Œè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹é¢&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é—®é¢˜æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¶ˆè´¹è€…è¿›ç¨‹çœ‹ä¼¼â€œå­˜æ´»â€ï¼ˆèƒ½å‘é€å¿ƒè·³ï¼‰ï¼Œä½†å®é™…æ— æ³•æœ‰æ•ˆæ¶ˆè´¹æ¶ˆæ¯ï¼Œå¯¼è‡´æ¶ˆæ¯å †ç§¯ï¼Œç³»ç»Ÿæ€§èƒ½ä¸‹é™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ­»é”åŒºåˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ­»é”ï¼šçº¿ç¨‹ç›¸äº’ç­‰å¾…èµ„æºï¼Œå®Œå…¨å¡ä½ã€‚æ´»é”ï¼šçº¿ç¨‹ä»åœ¨è¿è¡Œï¼ˆå¦‚å‘é€å¿ƒè·³ã€å°è¯•å¤„ç†ï¼‰ï¼Œä½†æ— æ³•æ¨è¿›å®é™…å·¥ä½œï¼ˆæ¶ˆè´¹æ¶ˆæ¯ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ£€æµ‹å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max.poll.interval.ms&lt;/code&gt;ï¼šæ§åˆ¶æ¶ˆè´¹è€…ä¸¤æ¬¡è°ƒç”¨ &lt;code&gt;poll()&lt;/code&gt;æ–¹æ³•çš„æœ€å¤§æ—¶é—´é—´éš”ã€‚è¶…è¿‡æ­¤é—´éš”ï¼ŒKafkaä¼šè®¤ä¸ºæ¶ˆè´¹è€…å·²â€œåƒµæ­»â€å¹¶è§¦å‘é‡å¹³è¡¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. ä¼˜åŒ–æ¶ˆæ¯å¤„ç†é€»è¾‘ä¸æ€§èƒ½ 2. åˆç†é…ç½®æ¶ˆè´¹è€…å‚æ•°ï¼ˆå¦‚ &lt;code&gt;max.poll.interval.ms&lt;/code&gt;, &lt;code&gt;max.poll.records&lt;/code&gt;ï¼‰ 3. é‡‡ç”¨å¼‚æ­¥å¤„ç†æˆ–æ‰¹å¤„ç† 4. å®Œå–„é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£æ´»é”çš„æœºç†ä¸å½±å“"&gt;ğŸ” ç†è§£æ´»é”çš„æœºç†ä¸å½±å“
&lt;/h3&gt;&lt;p&gt;æ´»é”å‘ç”Ÿæ—¶ï¼Œæ¶ˆè´¹è€…å®ä¾‹å¹¶&lt;strong&gt;æ²¡æœ‰å´©æºƒ&lt;/strong&gt;ï¼Œå®ƒå¯èƒ½ä»åœ¨å‘Kafkaé›†ç¾¤å‘é€å¿ƒè·³ï¼Œå› æ­¤è¢«åè°ƒè€…è®¤ä¸ºæ˜¯â€œå­˜æ´»â€çš„ã€‚ç„¶è€Œï¼Œç”±äºæŸäº›åŸå› ï¼Œå®ƒ&lt;strong&gt;æ— æ³•æˆåŠŸå¤„ç†&lt;/strong&gt;åˆ†é…ç»™å®ƒçš„åˆ†åŒºä¸­çš„æ¶ˆæ¯ï¼Œæˆ–è€…å¤„ç†é€Ÿåº¦æå…¶ç¼“æ…¢ã€‚è¿™ä¼šå¯¼è‡´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯ç§¯å‹&lt;/strong&gt;ï¼šè¯¥æ¶ˆè´¹è€…è´Ÿè´£çš„åˆ†åŒºæ¶ˆæ¯å †ç§¯è¶Šæ¥è¶Šå¤šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæµªè´¹&lt;/strong&gt;ï¼šCPUã€å†…å­˜ç­‰èµ„æºè¢«å ç”¨ï¼Œå´æ²¡æœ‰äº§ç”Ÿå®é™…æ•ˆç›Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸šåŠ¡å—é˜»&lt;/strong&gt;ï¼šä¾èµ–è¿™äº›æ¶ˆæ¯çš„ä¸‹æ¸¸ä¸šåŠ¡æ— æ³•æ­£å¸¸è¿›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®ƒä¸æ­»é”çš„å…³é”®åŒºåˆ«åœ¨äºï¼šæ­»é”ä¸­çš„çº¿ç¨‹æ˜¯&lt;strong&gt;å®Œå…¨é˜»å¡&lt;/strong&gt;ã€åœæ­¢å·¥ä½œçš„ï¼›è€Œæ´»é”ä¸­çš„çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…ï¼‰&lt;strong&gt;ä»åœ¨æ‰§è¡ŒæŸäº›åŠ¨ä½œ&lt;/strong&gt;ï¼ˆå¦‚å‘é€å¿ƒè·³ã€ç”šè‡³å¯èƒ½åœ¨è¿›è¡Œæ— æ•ˆçš„é‡è¯•ï¼‰ï¼Œä½†æ•´ä¸ªç³»ç»Ÿåœ¨æ¶ˆæ¯æ¶ˆè´¹ä¸Šæ²¡æœ‰å®è´¨æ€§è¿›å±•ã€‚&lt;/p&gt;
&lt;h3 id="-å¯¼è‡´æ´»é”çš„å¸¸è§åŸå› "&gt;ğŸš¦ å¯¼è‡´æ´»é”çš„å¸¸è§åŸå› 
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½æ•ˆçš„æ¶ˆæ¯å¤„ç†é€»è¾‘&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å¸¸è§çš„åŸå› ã€‚å¦‚æœæ¶ˆè´¹è€…å¤„ç†å•æ¡æ¶ˆæ¯çš„ä»£ç éå¸¸è€—æ—¶ï¼Œä¾‹å¦‚åŒ…å«å¤æ‚çš„è®¡ç®—ã€ä½æ•ˆçš„æ•°æ®åº“æŸ¥è¯¢æˆ–åŒæ­¥çš„ç½‘ç»œIOè°ƒç”¨ï¼Œå°±ä¼šå¯¼è‡´æ¶ˆè´¹é€Ÿåº¦è¿œä½äºæ¶ˆæ¯æ‹‰å–é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ‰ç¼ºé™·çš„ä¸šåŠ¡é€»è¾‘&lt;/strong&gt;ï¼šä»£ç ä¸­å¯èƒ½å­˜åœ¨æ— é™å¾ªç¯ã€æ­»å¾ªç¯ï¼Œæˆ–è€…å¯¹ç‰¹å®šæ ¼å¼çš„å¼‚å¸¸æ¶ˆæ¯æ— æ³•å¤„ç†è€Œé™·å…¥åå¤é‡è¯•çš„é™·é˜±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢‘ç¹çš„æ¶ˆè´¹è€…ç»„é‡å¹³è¡¡&lt;/strong&gt;ï¼šå¦‚æœæ¶ˆè´¹è€…å› ä¸ºç½‘ç»œæŠ–åŠ¨ç­‰åŸå› é¢‘ç¹åœ°ä¸åè°ƒè€…æ–­å¼€è¿æ¥åˆé‡è¿ï¼Œä¼šä¸æ–­è§¦å‘é‡å¹³è¡¡ã€‚åœ¨é‡å¹³è¡¡æœŸé—´ï¼Œæ•´ä¸ªæ¶ˆè´¹è€…ç»„ä¼šæš‚åœæ¶ˆæ¯æ¶ˆè´¹ï¼Œé¢‘ç¹çš„é‡å¹³è¡¡ä¼šå¯¼è‡´æ¶ˆè´¹å·¥ä½œé¢‘ç¹ä¸­æ–­ï¼Œå½¢ä¼¼â€œæ´»é”â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ°å½“çš„åç§»é‡æäº¤&lt;/strong&gt;ï¼šå¦‚æœä½¿ç”¨äº†è‡ªåŠ¨æäº¤åç§»é‡ï¼Œå¯èƒ½åœ¨æ¶ˆæ¯å°šæœªå¤„ç†å®Œæˆæ—¶å°±æäº¤äº†ã€‚è‹¥æ­¤æ—¶æ¶ˆè´¹è€…å´©æºƒåé‡å¯ï¼Œä¼šä»å·²æäº¤çš„åç§»é‡åå¼€å§‹æ¶ˆè´¹ï¼Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€‚å¦‚æœä¸ºäº†ç¡®ä¿ä¸ä¸¢å¤±è€Œé‡‡ç”¨æ‰‹åŠ¨æäº¤ï¼Œä½†æäº¤æ—¶æœºä¸å½“æˆ–æäº¤å¤±è´¥ï¼Œåˆå¯èƒ½å¯¼è‡´æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹ï¼Œæ¶ˆè´¹è€…é™·å…¥â€œæ¶ˆè´¹-å¤±è´¥-é‡å¤æ¶ˆè´¹â€çš„å¾ªç¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è§£å†³æ´»é”é—®é¢˜çš„å®ç”¨ç­–ç•¥"&gt;ğŸ› ï¸ è§£å†³æ´»é”é—®é¢˜çš„å®ç”¨ç­–ç•¥
&lt;/h3&gt;&lt;h4 id="1-ä¼˜åŒ–æ¶ˆè´¹è€…é…ç½®å‚æ•°"&gt;1. ä¼˜åŒ–æ¶ˆè´¹è€…é…ç½®å‚æ•°
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥å’Œæœ‰æ•ˆçš„è°ƒæ•´æ‰‹æ®µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´ &lt;code&gt;max.poll.interval.ms&lt;/code&gt;&lt;/strong&gt;ï¼šæ ¹æ®ä¸šåŠ¡é€»è¾‘å¤„ç†çš„æœ€é•¿æ—¶é—´ï¼Œé€‚å½“è°ƒå¤§æ­¤å‚æ•°å€¼ï¼Œç»™æ¶ˆè´¹è€…è¶³å¤Ÿçš„å¤„ç†æ—¶é—´ï¼Œé¿å…è¢«è¯¯åˆ¤ä¸ºå¤±è´¥è€Œè§¦å‘é‡å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§åˆ¶ &lt;code&gt;max.poll.records&lt;/code&gt;&lt;/strong&gt;ï¼šé™åˆ¶æ¯æ¬¡è°ƒç”¨ &lt;code&gt;poll()&lt;/code&gt;æ–¹æ³•è¿”å›çš„æœ€å¤§æ¶ˆæ¯æ•°é‡ã€‚è¿™æœ‰åŠ©äºæ§åˆ¶å•æ¬¡å¤„ç†çš„æ•°æ®é‡ï¼Œæ›´å®¹æ˜“é¢„æµ‹å’Œå¤„ç†å‘¨æœŸï¼Œé¿å…ä¸€æ‰¹æ¶ˆæ¯å¤ªå¤šå¯¼è‡´å¤„ç†è¶…æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ä¼˜åŒ–æ¶ˆæ¯å¤„ç†é€»è¾‘ä¸æ¶æ„"&gt;2. ä¼˜åŒ–æ¶ˆæ¯å¤„ç†é€»è¾‘ä¸æ¶æ„
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šå®¡æŸ¥å¹¶ä¼˜åŒ–æ¶ˆè´¹ç«¯ä¸šåŠ¡ä»£ç ï¼Œä¾‹å¦‚ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ã€ä½¿ç”¨ç¼“å­˜ã€å‡å°‘ä¸å¿…è¦çš„IOæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥ä¸éé˜»å¡å¤„ç†&lt;/strong&gt;ï¼šå°†è€—æ—¶çš„æ“ä½œï¼ˆå¦‚è°ƒç”¨å¤–éƒ¨APIã€å›¾åƒå¤„ç†ï¼‰æ”¾å…¥å•ç‹¬çš„çº¿ç¨‹æ± æˆ–ä½¿ç”¨å¼‚æ­¥æ–¹å¼å¤„ç†ï¼Œç¡®ä¿æ¶ˆè´¹è€…ä¸»çº¿ç¨‹èƒ½å¤ŸåŠæ—¶è°ƒç”¨ &lt;code&gt;poll()&lt;/code&gt;ã€‚ä½†éœ€æ³¨æ„ç¡®ä¿åç§»é‡æäº¤çš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰¹é‡å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœä¸šåŠ¡å…è®¸ï¼Œå¯ä»¥å°è¯•æ‰¹é‡å¤„ç†æ¶ˆæ¯ï¼Œå‡å°‘äº¤äº’å¼€é”€ï¼Œæé«˜ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-å®Œå–„é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶"&gt;3. å®Œå–„é”™è¯¯å¤„ç†ä¸é‡è¯•æœºåˆ¶
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¥å£®çš„å¼‚å¸¸æ•è·&lt;/strong&gt;ï¼šåœ¨æ¶ˆæ¯å¤„ç†é€»è¾‘å‘¨å›´ä½¿ç”¨ &lt;code&gt;try-catch&lt;/code&gt;ï¼Œå¯¹å¯é‡è¯•çš„é”™è¯¯ï¼ˆå¦‚ç½‘ç»œæš‚æ—¶ä¸å¯ç”¨ï¼‰è¿›è¡Œæœ‰é™æ¬¡æ•°çš„é‡è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­»ä¿¡é˜Ÿåˆ—&lt;/strong&gt;ï¼šå¯¹äºé‡è¯•å¤šæ¬¡åä»æ— æ³•å¤„ç†çš„æ¶ˆæ¯ï¼Œå¯ä»¥å°†å…¶å‘é€åˆ°ä¸€ä¸ªä¸“é—¨çš„â€œæ­»ä¿¡é˜Ÿåˆ—â€ï¼Œå¹¶è®°å½•æ—¥å¿—å‘Šè­¦ï¼Œç”±åç»­æµç¨‹è¿›è¡Œäººå·¥æˆ–ç‰¹æ®Šå¤„ç†ï¼Œé¿å…å•æ¡åæ¶ˆæ¯é˜»å¡æ•´ä¸ªæ¶ˆè´¹æµç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-ç¡®ä¿åç§»é‡æäº¤çš„å¯é æ€§"&gt;4. ç¡®ä¿åç§»é‡æäº¤çš„å¯é æ€§
&lt;/h4&gt;&lt;p&gt;å»ºè®®&lt;strong&gt;ç¦ç”¨è‡ªåŠ¨æäº¤&lt;/strong&gt;ï¼Œé‡‡ç”¨&lt;strong&gt;æ‰‹åŠ¨æäº¤&lt;/strong&gt;åç§»é‡ï¼Œå¹¶åœ¨æ¶ˆæ¯è¢«æˆåŠŸå¤„ç†åå†æäº¤ã€‚å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åŒæ­¥æäº¤æˆ–å¼‚æ­¥æäº¤ï¼Œå¹¶å¤„ç†å¥½æäº¤å¤±è´¥çš„é‡è¯•é€»è¾‘ï¼Œä»¥ç¡®ä¿ &lt;code&gt;at-least-once&lt;/code&gt;æˆ– &lt;code&gt;exactly-once&lt;/code&gt;çš„è¯­ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œç­–ç•¥èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”å¯¹Kafkaä¸­çš„æ´»é”é—®é¢˜ã€‚å¦‚æœä½ åœ¨å…·ä½“å®è·µä¸­é‡åˆ°æ›´ç»†è‡´çš„æƒ…å†µï¼Œæ¬¢è¿éšæ—¶æå‡ºï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¢“ç¢‘æ¶ˆæ¯"&gt;å¢“ç¢‘æ¶ˆæ¯
&lt;/h2&gt;&lt;p&gt;å¢“ç¢‘æ¶ˆæ¯æ˜¯ Apache Kafka ä¸­ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ¶ˆæ¯ï¼Œå®ƒæœ¬èº«ä¸æºå¸¦æœ‰æ•ˆæ•°æ®ï¼ˆå…¶å€¼ä¸º &lt;code&gt;null&lt;/code&gt;ï¼‰ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªâ€œåˆ é™¤æ ‡è®°â€ä½¿ç”¨ï¼Œä¸»è¦åœ¨ä½¿ç”¨&lt;strong&gt;æ—¥å¿—å‹ç¼©&lt;/strong&gt;ç­–ç•¥çš„ä¸»é¢˜ä¸­ï¼ŒæŒ‡ç¤ºç³»ç»Ÿæ°¸ä¹…åˆ é™¤å…·æœ‰ç‰¹å®šé”®çš„æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹è¡¨æ¦‚æ‹¬äº† Kafka å¢“ç¢‘æ¶ˆæ¯çš„æ ¸å¿ƒç‰¹æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ç§ Value ä¸º &lt;code&gt;null&lt;/code&gt;çš„ç‰¹æ®Šæ¶ˆæ¯ï¼Œå……å½“åˆ é™¤æ ‡è®°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿäº§è€…ä¸»åŠ¨å‘é€é”®ä¸ä¸ºç©ºä½†å€¼ä¸º &lt;code&gt;null&lt;/code&gt;çš„æ¶ˆæ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æ—¥å¿—å‹ç¼©è¿‡ç¨‹ä¸­ï¼Œæ°¸ä¹…åˆ é™¤æŒ‡å®šé”®åŠå…¶æ‰€æœ‰å†å²å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†™å…¥æ—¥å¿—åä¸ä¼šç«‹å³åˆ é™¤ï¼Œä¼šä¿ç•™ä¸€æ®µå¯é…ç½®çš„æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤–è§‚ç‰¹å¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ™®é€šæ¶ˆæ¯ç»“æ„ç›¸åŒï¼Œä½† Value éƒ¨åˆ†ä¸ºç©º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨å‰æ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…å¯¹å¯ç”¨æ—¥å¿—å‹ç¼©ä¸”æ¶ˆæ¯æ‹¥æœ‰æœ‰æ•ˆé”®çš„ä¸»é¢˜æœ‰æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸ç”Ÿå‘½å‘¨æœŸ"&gt;ğŸ’¡ å·¥ä½œåŸç†ä¸ç”Ÿå‘½å‘¨æœŸ
&lt;/h3&gt;&lt;p&gt;å¢“ç¢‘æ¶ˆæ¯çš„å®ç°ä¾èµ–äº Kafka çš„&lt;strong&gt;æ—¥å¿—å‹ç¼©&lt;/strong&gt;æœºåˆ¶ã€‚ç†è§£å…¶å·¥ä½œæµç¨‹ï¼Œå…³é”®åœ¨äºå¼„æ¸…æ¥šä»æ¶ˆæ¯äº§ç”Ÿåˆ°æœ€ç»ˆè¢«æ¸…ç†çš„å®Œæ•´å‘¨æœŸã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼Œä¸‹å›¾æç»˜äº†å¢“ç¢‘æ¶ˆæ¯ä»äº§ç”Ÿåˆ°å®Œæˆä½¿å‘½çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[åº”ç”¨å‘é€é”®ä¸ºKçš„å¢“ç¢‘æ¶ˆæ¯] --&amp;gt; B[å¢“ç¢‘æ¶ˆæ¯ä»¥æ™®é€šæ¶ˆæ¯å½¢å¼&amp;lt;br&amp;gt;å†™å…¥Kafkaåˆ†åŒºæ—¥å¿—]
B --&amp;gt; C{æ—¥å¿—å‹ç¼©çº¿ç¨‹å¯åŠ¨}
C --&amp;gt; D[å‹ç¼©çº¿ç¨‹æ‰«ææ—¥å¿—&amp;lt;br&amp;gt;å¹¶æ„å»ºæ¯ä¸ªé”®çš„åç§»é‡æ˜ å°„]
D --&amp;gt; E{å‘ç°é”®Kå¯¹åº”çš„&amp;lt;br&amp;gt;æœ€æ–°æ¶ˆæ¯æ˜¯å¢“ç¢‘æ¶ˆæ¯?}
E -- æ˜¯ --&amp;gt; F[ä¿ç•™å¢“ç¢‘æ¶ˆæ¯&amp;lt;br&amp;gt;å¹¶åˆ é™¤è¯¥é”®æ‰€æœ‰å†å²å€¼]
E -- å¦ --&amp;gt; G[ä»…ä¿ç•™é”®Kçš„æœ€æ–°æ¶ˆæ¯]
F --&amp;gt; H[å¢“ç¢‘æ¶ˆæ¯åœ¨ä¿ç•™æœŸå†…&amp;lt;br&amp;gt;å¯¹æ¶ˆè´¹è€…å¯è§]
H --&amp;gt; I{å¢“ç¢‘æ¶ˆæ¯ä¿ç•™æœŸå·²åˆ°?}
I -- æ˜¯ --&amp;gt; J[åœ¨åç»­å‹ç¼©ä¸­&amp;lt;br&amp;gt;ç§»é™¤å¢“ç¢‘æ¶ˆæ¯æœ¬èº«]
I -- å¦ --&amp;gt; H
G --&amp;gt; K[å‹ç¼©å®Œæˆ]
J --&amp;gt; K
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæµç¨‹çš„å…³é”®é˜¶æ®µåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥é˜¶æ®µ&lt;/strong&gt;ï¼šåº”ç”¨ç¨‹åºé€šè¿‡ç”Ÿäº§è€…å®¢æˆ·ç«¯ï¼Œå‘é€ä¸€æ¡&lt;strong&gt;é”®ï¼ˆKeyï¼‰ä¸ºéœ€è¦åˆ é™¤çš„ç›®æ ‡é”®ï¼Œå€¼ï¼ˆValueï¼‰ä¸º &lt;code&gt;null&lt;/code&gt;&lt;/strong&gt; çš„æ¶ˆæ¯ã€‚Kafka Broker ä¼šåƒå¤„ç†ä»»ä½•æ™®é€šæ¶ˆæ¯ä¸€æ ·ï¼Œå°†è¿™æ¡å¢“ç¢‘æ¶ˆæ¯è¿½åŠ åˆ°å¯¹åº”åˆ†åŒºçš„æ—¥å¿—æœ«å°¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‹ç¼©ä¸åˆ é™¤é˜¶æ®µ&lt;/strong&gt;ï¼šKafka çš„æ—¥å¿—æ¸…ç†çº¿ç¨‹ä¼šå®šæœŸå¯¹æ—¥å¿—è¿›è¡Œå‹ç¼©ã€‚å‹ç¼©çš„æ ¸å¿ƒé€»è¾‘æ˜¯&lt;strong&gt;ä¸ºæ¯ä¸ªé”®åªä¿ç•™å…¶æœ€æ–°ç‰ˆæœ¬çš„å€¼&lt;/strong&gt;ã€‚å½“æ¸…ç†çº¿ç¨‹é‡åˆ°ä¸€æ¡å¢“ç¢‘æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šè¢«è§†ä¸ºè¯¥é”®çš„â€œæœ€æ–°å€¼â€ã€‚ç”±äºè¿™ä¸ªâ€œå€¼â€æ˜¯ &lt;code&gt;null&lt;/code&gt;ï¼Œæ¸…ç†çº¿ç¨‹çš„æ“ä½œæ˜¯ï¼š&lt;strong&gt;ä¿ç•™è¿™æ¡å¢“ç¢‘æ¶ˆæ¯ï¼Œå¹¶åˆ é™¤è¯¥é”®ä¹‹å‰æ‰€æœ‰çš„å†å²æ¶ˆæ¯&lt;/strong&gt;ã€‚è¿™æ ·ï¼Œè¿™ä¸ªé”®åŠå…¶å…³è”çš„æ•°æ®å°±è¢«æœ‰æ•ˆåœ°æ ‡è®°ä¸ºâ€œå·²åˆ é™¤â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿ç•™ä¸æœ€ç»ˆæ¸…ç†é˜¶æ®µ&lt;/strong&gt;ï¼šå¢“ç¢‘æ¶ˆæ¯è¢«ä¿ç•™ä¸€æ®µæ—¶é—´ï¼ˆé€šè¿‡ &lt;code&gt;delete.retention.ms&lt;/code&gt;å‚æ•°é…ç½®ï¼Œé»˜è®¤é€šå¸¸ä¸º24å°æ—¶ï¼‰ï¼Œä»¥ç¡®ä¿æ‰€æœ‰æ¶ˆè´¹è€…éƒ½æœ‰è¶³å¤Ÿçš„æ—¶é—´çœ‹åˆ°è¿™æ¡åˆ é™¤æ ‡è®°ã€‚åœ¨æ­¤æœŸé—´ï¼Œæ¶ˆè´¹è€…ä»ç„¶å¯ä»¥è¯»å–åˆ°è¿™æ¡å¢“ç¢‘æ¶ˆæ¯ã€‚ä¸€æ—¦è¶…è¿‡ä¿ç•™æœŸï¼Œåœ¨ä¸‹ä¸€æ¬¡æ—¥å¿—å‹ç¼©æ—¶ï¼Œ&lt;strong&gt;å¢“ç¢‘æ¶ˆæ¯æœ¬èº«ä¹Ÿä¼šè¢«æ¸…é™¤&lt;/strong&gt;ï¼Œè¿™ä¸ªé”®å°†å½»åº•ä»åˆ†åŒºæ—¥å¿—ä¸­æ¶ˆå¤±ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ¯ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;å¢“ç¢‘æ¶ˆæ¯çš„è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³ä»¥ä¸‹ä¸¤ç§å…¸å‹éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®æ•°æ®åˆ é™¤&lt;/strong&gt;ï¼šå½“éœ€è¦ä»Kafkaä¸­æ°¸ä¹…åˆ é™¤ä¸æŸä¸ªç‰¹å®šé”®ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯æ—¶ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æ³¨é”€è´¦å·åï¼Œéœ€è¦åˆ é™¤è¯¥ç”¨æˆ·çš„å…¨éƒ¨ä¸ªäººä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒæœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨è¯»å†™Kafkaçš„ç³»ç»Ÿä¸­ï¼Œé€šè¿‡å¢“ç¢‘æ¶ˆæ¯ç¡®ä¿å·²åˆ é™¤çš„æ•°æ®ä¸ä¼šåœ¨å‹ç¼©åå› â€œæœ€ç»ˆåªä¿ç•™æœ€æ–°å€¼â€çš„æœºåˆ¶è€Œæ„å¤–é‡ç°ï¼Œç»´æŠ¤æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦å®è·µè€ƒé‡"&gt;âš ï¸ é‡è¦å®è·µè€ƒé‡
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨å¢“ç¢‘æ¶ˆæ¯æ—¶ï¼Œæœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹è€…éœ€æ„ŸçŸ¥å¢“ç¢‘æ¶ˆæ¯&lt;/strong&gt;ï¼šä½ çš„æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºå¿…é¡»èƒ½å¤Ÿè¯†åˆ«å’Œå¤„ç†Valueä¸º&lt;code&gt;null&lt;/code&gt;çš„æ¶ˆæ¯ã€‚è¿™æ„å‘³ç€å½“è¯»åˆ°å¢“ç¢‘æ¶ˆæ¯æ—¶ï¼Œæ¶ˆè´¹è€…åº”æ‰§è¡Œç›¸åº”çš„åˆ é™¤é€»è¾‘ï¼ˆä¾‹å¦‚ï¼Œä»æœ¬åœ°æ•°æ®åº“æˆ–ç¼“å­˜ä¸­åˆ é™¤å¯¹åº”é”®çš„æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿ä¿ç•™æ—¶é—´è¶³å¤Ÿé•¿&lt;/strong&gt;ï¼šåŠ¡å¿…ä¸ºå¢“ç¢‘æ¶ˆæ¯è®¾ç½®è¶³å¤Ÿé•¿çš„ä¿ç•™æ—¶é—´ï¼ˆ&lt;code&gt;delete.retention.ms&lt;/code&gt;ï¼‰ï¼Œç¡®ä¿å³ä½¿æœ‰æ¶ˆè´¹è€…çŸ­æš‚ç¦»çº¿ï¼Œåœ¨é‡æ–°ä¸Šçº¿åä¹Ÿæœ‰æœºä¼šè¯»åˆ°å¢“ç¢‘æ¶ˆæ¯ï¼Œé¿å…å› é”™è¿‡åˆ é™¤æ ‡è®°è€Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»…é€‚ç”¨äºæœ‰é”®çš„æ¶ˆæ¯&lt;/strong&gt;ï¼šå¢“ç¢‘æ¶ˆæ¯åªå¯¹æ¶ˆæ¯é”®æœ‰æ•ˆã€‚å¦‚æœæ¶ˆæ¯çš„é”®ä¸º&lt;code&gt;null&lt;/code&gt;ï¼Œå¢“ç¢‘æœºåˆ¶å°†ä¸èµ·ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£Kafkaçš„å¢“ç¢‘æ¶ˆæ¯ã€‚å¦‚æœä½ å¯¹æ—¥å¿—å‹ç¼©çš„å…·ä½“å®ç°ç»†èŠ‚æˆ–å…¶ä»–Kafkaæ¦‚å¿µæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ—¥å¿—å‹ç¼©"&gt;æ—¥å¿—å‹ç¼©
&lt;/h2&gt;&lt;p&gt;Kafka çš„æ—¥å¿—å‹ç¼©ï¼ˆLog Compactionï¼‰æ˜¯ä¸€ç§éå¸¸ç²¾å·§çš„è®¾è®¡ï¼Œå®ƒé€šè¿‡åœ¨åå°ä¸æ–­æ•´ç†æ•°æ®ï¼Œç¡®ä¿æ¯ä¸ª Key åªä¿ç•™å…¶æœ€æ–°çš„ Valueï¼Œä»è€Œåœ¨æä¾›å®Œæ•´æ•°æ®å†å²çš„åŒæ—¶ï¼Œæå¤§åœ°èŠ‚çœäº†å­˜å‚¨ç©ºé—´å¹¶æå‡äº†è¯»å–æ•ˆç‡ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹è¡¨æ±‡æ€»äº†å®ç°è¿™ä¸€æœºåˆ¶çš„æ ¸å¿ƒç»„ä»¶ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç»„ä»¶&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒèŒè´£ä¸æœºåˆ¶&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥å¿—åˆ†æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¥å¿—åœ¨ç‰©ç†ä¸Šç”±å¤šä¸ªé¡ºåºå†™å…¥çš„æ—¥å¿—åˆ†æ®µæ–‡ä»¶ç»„æˆï¼Œå‹ç¼©ä»¥åˆ†æ®µä¸ºåŸºæœ¬æ“ä½œå•å…ƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶ˆæ¯é”®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¡æ¶ˆæ¯çš„å¯é€‰é”®æ˜¯å‹ç¼©æ“ä½œçš„ä¾æ®ï¼Œç›¸åŒé”®çš„æ¶ˆæ¯è¢«è§†ä¸ºåŒä¸€æ•°æ®çš„ä¸åŒç‰ˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‹ç¼©çº¿ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå°çš„æ¸…ç†çº¿ç¨‹æ± è´Ÿè´£æ‰§è¡Œå‹ç¼©ä»»åŠ¡ï¼Œä¼šé€‰æ‹©â€œæœ€è„â€çš„æ—¥å¿—åˆ†æ®µè¿›è¡Œå¤„ç†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è„æ•°æ®æ¯”ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§¦å‘å‹ç¼©çš„å…³é”®é˜ˆå€¼ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š&lt;code&gt;è„æ•°æ®æ¯”ç‡ = å¯æ¸…ç†æ•°æ®å¤§å° / æ—¥å¿—åˆ†æ®µæ€»å¤§å°&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ é™¤æ ‡è®°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ç§ç‰¹æ®Šçš„ Value ä¸º &lt;code&gt;null&lt;/code&gt;çš„æ¶ˆæ¯ï¼Œç”¨äºæ ‡è®°æŸä¸ª Key çš„æ•°æ®éœ€è¦è¢«åˆ é™¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ—¥å¿—å‹ç¼©çš„å·¥ä½œåŸç†"&gt;ğŸ’¡ æ—¥å¿—å‹ç¼©çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;æ—¥å¿—å‹ç¼©çš„æ ¸å¿ƒç›®æ ‡æ˜¯éå†æ—¥å¿—ï¼Œä¸ºæ¯ä¸ª Key åªä¿ç•™å…¶æœ€æ–°ç‰ˆæœ¬çš„å€¼ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œ&lt;strong&gt;ä¸¤éæ‰«æï¼Œä¸€éå†™å…¥&lt;/strong&gt;â€ï¼Œå…¶å…·ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å¯åŠ¨æ—¥å¿—å‹ç¼©] --&amp;gt; B[é€‰æ‹©è„æ•°æ®æ¯”ç‡æœ€é«˜çš„æ—¥å¿—åˆ†æ®µ]
B --&amp;gt; C[ç¬¬ä¸€éæ‰«æ&amp;lt;br&amp;gt;å»ºç«‹é”®ä¸æœ€æ–°åç§»é‡çš„æ˜ å°„]
C --&amp;gt; D[ç¬¬äºŒéæ‰«æ&amp;lt;br&amp;gt;æ£€æŸ¥é”®æ˜¯å¦åœ¨æ˜ å°„ä¸­ä¸”ä¸ºæœ€æ–°]
D --&amp;gt; E{å½“å‰è®°å½•æ˜¯å¦ä¸º&amp;lt;br&amp;gt;è¯¥é”®çš„æœ€æ–°ç‰ˆæœ¬?}
E -- æ˜¯ --&amp;gt; F[å°†è®°å½•å†™å…¥æ–°çš„åˆ†æ®µæ–‡ä»¶]
E -- å¦ --&amp;gt; G[è·³è¿‡/ä¸¢å¼ƒè¯¥è®°å½•]
F --&amp;gt; H[æ‰€æœ‰è®°å½•å¤„ç†å®Œæ¯•?]
G --&amp;gt; H
H -- å¦ --&amp;gt; D
H -- æ˜¯ --&amp;gt; I[ç”¨æ–°çš„åˆ†æ®µæ–‡ä»¶&amp;lt;br&amp;gt;åŸå­æ›¿æ¢æ—§çš„åˆ†æ®µæ–‡ä»¶]
I --&amp;gt; J[å¼‚æ­¥åˆ é™¤æ—§çš„åˆ†æ®µæ–‡ä»¶]
J --&amp;gt; K[å‹ç¼©å®Œæˆ]
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©å‹ç¼©ç›®æ ‡&lt;/strong&gt;ï¼šKafka çš„æ¸…ç†çº¿ç¨‹ä¼šå®šæœŸæ£€æŸ¥æ‰€æœ‰æ—¥å¿—åˆ†æ®µï¼Œå¹¶é€‰æ‹©å…¶ä¸­â€œè„æ•°æ®æ¯”ç‡â€æœ€é«˜çš„åˆ†æ®µè¿›è¡Œå‹ç¼©ã€‚è„æ•°æ®æ¯”ç‡æ˜¯æŒ‡è¯¥åˆ†æ®µä¸­å¯ä»¥è¢«æ¸…ç†çš„æ—§æ•°æ®æ‰€å çš„æ¯”ä¾‹ã€‚å½“è¿™ä¸ªæ¯”ç‡è¶…è¿‡é…ç½®çš„é˜ˆå€¼ï¼ˆç”± &lt;code&gt;min.cleanable.dirty.ratio&lt;/code&gt;æ§åˆ¶ï¼Œé»˜è®¤0.5ï¼‰æ—¶ï¼Œå‹ç¼©å°±ä¼šè¢«è§¦å‘ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸¤éæ‰«æ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€éæ‰«æï¼ˆå»ºç«‹æ‘˜è¦ï¼‰&lt;/strong&gt;ï¼šæ¸…ç†çº¿ç¨‹ä¼šæ‰«æé€‰å®šçš„æ—¥å¿—åˆ†æ®µï¼Œå¹¶æ„å»ºä¸€ä¸ªâ€œé”® -&amp;gt; è¯¥é”®æœ€æ–°æ¶ˆæ¯åç§»é‡â€çš„æ˜ å°„å…³ç³»ã€‚è¿™ä¸ªæ˜ å°„ç›¸å½“äºä¸€ä¸ªæ¸…å•ï¼ŒæŒ‡æ˜äº†å“ªäº›è®°å½•æ˜¯éœ€è¦ä¿ç•™çš„æœ€ç»ˆç‰ˆæœ¬ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒéæ‰«æï¼ˆå¤åˆ¶å†™å›ï¼‰&lt;/strong&gt;ï¼šçº¿ç¨‹å†æ¬¡ä»å¤´æ‰«æè¯¥åˆ†æ®µã€‚å¯¹äºæ¯ä¸€æ¡è®°å½•ï¼Œå®ƒä¼šæ£€æŸ¥å…¶é”®æ˜¯å¦å‡ºç°åœ¨åˆšæ‰å»ºç«‹çš„æ˜ å°„ä¸­ï¼Œå¹¶ä¸”å½“å‰çš„åç§»é‡æ˜¯å¦å°±æ˜¯æ˜ å°„ä¸­è®°å½•çš„æœ€æ–°åç§»é‡ã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;æ˜¯&lt;/strong&gt;ï¼Œåˆ™è¯´æ˜è¿™æ¡è®°å½•æ˜¯è¯¥é”®çš„æœ€æ–°å€¼ï¼Œå°†å…¶å¤åˆ¶åˆ°æ–°çš„ã€å‹ç¼©åçš„åˆ†æ®µæ–‡ä»¶ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;ä¸æ˜¯&lt;/strong&gt;ï¼Œåˆ™è¯´æ˜è¿™æ¡è®°å½•æ˜¯æ—§ç‰ˆæœ¬ï¼Œå°†è¢«è·³è¿‡å’Œä¸¢å¼ƒ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ›¿æ¢&lt;/strong&gt;ï¼šå½“æ•´ä¸ªåˆ†æ®µå‹ç¼©å®Œæˆåï¼ŒKafka ä¼šè¿›è¡Œä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼šå°†æ—§çš„ã€åŒ…å«å†—ä½™æ•°æ®çš„åˆ†æ®µæ–‡ä»¶æ›¿æ¢ä¸ºæ–°çš„ã€ç²¾ç®€åçš„åˆ†æ®µæ–‡ä»¶ã€‚è¿™ä¸ªæ“ä½œå¯¹ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ˜¯å®Œå…¨é€æ˜çš„ï¼Œç¡®ä¿äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚æ—§æ–‡ä»¶éšåä¼šè¢«å¼‚æ­¥åˆ é™¤ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³é”®é…ç½®ä¸é«˜çº§ç‰¹æ€§"&gt;âš™ï¸ å…³é”®é…ç½®ä¸é«˜çº§ç‰¹æ€§
&lt;/h3&gt;&lt;p&gt;è¦è®©æ—¥å¿—å‹ç¼©æŒ‰é¢„æœŸå·¥ä½œï¼Œéœ€è¦å…³æ³¨å‡ ä¸ªå…³é”®é…ç½®å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;cleanup.policy=compact&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯å¯ç”¨æ—¥å¿—å‹ç¼©çš„æ ¸å¿ƒå¼€å…³ï¼Œéœ€è¦åœ¨ä¸»é¢˜çº§åˆ«è¿›è¡Œé…ç½® ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;min.cleanable.dirty.ratio&lt;/code&gt;&lt;/strong&gt;ï¼šæ§åˆ¶è§¦å‘å‹ç¼©çš„â€œè„åº¦â€é˜ˆå€¼ã€‚æ¯”å€¼è¶Šå°ï¼Œå‹ç¼©è§¦å‘è¶Šé¢‘ç¹ï¼Œå­˜å‚¨ç©ºé—´æ›´èŠ‚çœï¼Œä½†CPUå’ŒIOå¼€é”€æ›´å¤§ï¼›æ¯”å€¼è¶Šå¤§åˆ™ç›¸å ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;delete.retention.ms&lt;/code&gt;&lt;/strong&gt;ï¼šé…ç½®åˆ é™¤æ ‡è®°ï¼ˆTombstoneï¼‰åœ¨æ—¥å¿—ä¸­ä¿ç•™çš„æ—¶é—´ï¼ˆé»˜è®¤24å°æ—¶ï¼‰ã€‚åœ¨è¿™æœŸé—´ï¼Œæ¶ˆè´¹è€…èƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªåˆ é™¤æ ‡è®°ï¼Œä»è€ŒçŸ¥é“æŸä¸ªKeyå·²è¢«åˆ é™¤ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;min.compaction.lag.ms&lt;/code&gt;&lt;/strong&gt;ï¼šè§„å®šä¸€æ¡æ¶ˆæ¯åœ¨å†™å…¥åå¿…é¡»ç»è¿‡å¤šé•¿æ—¶é—´æ‰èƒ½è¢«å‹ç¼©ã€‚è¿™ç¡®ä¿äº†æ¶ˆæ¯æœ‰è¶³å¤Ÿçš„æ—¶é—´è¢«æ‰€æœ‰æ¶ˆè´¹è€…è¯»å–ï¼Œé€‚ç”¨äºå¯¹å®æ—¶æ€§æœ‰è¦æ±‚çš„åœºæ™¯ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ"&gt;ğŸ¯ åº”ç”¨åœºæ™¯ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;æ—¥å¿—å‹ç¼©å¹¶éé€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œå®ƒæœ€é€‚åˆä»¥ä¸‹ç±»å‹çš„åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å˜æ›´æ•°æ®æ•è·&lt;/strong&gt;ï¼šå°†æ•°æ®åº“çš„å˜æ›´æµåŒæ­¥åˆ°Kafkaæ—¶ï¼Œæ¯ä¸ªè¡¨è¡Œçš„ä¸»é”®ä½œä¸ºæ¶ˆæ¯Keyã€‚å‹ç¼©èƒ½ä¿è¯æ¯ä¸ªè¡Œæœ€ç»ˆåªä¿ç•™æœ€æ–°çš„çŠ¶æ€ï¼Œæå¤§èŠ‚çœç©ºé—´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®ç®¡ç†&lt;/strong&gt;ï¼šå­˜å‚¨ç³»ç»Ÿæˆ–åº”ç”¨çš„é…ç½®é¡¹ï¼Œä»¥é…ç½®IDä¸ºKeyã€‚å‹ç¼©èƒ½ç¡®ä¿ä»»ä½•æ—¶å€™è¯»å–åˆ°çš„éƒ½æ˜¯æœ€æ–°é…ç½® ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€å­˜å‚¨&lt;/strong&gt;ï¼šåœ¨æµå¤„ç†ä¸­ï¼Œå°†è®¡ç®—çš„ä¸­é—´çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ä¼šè¯ï¼‰å­˜å…¥Kafkaã€‚æ•…éšœæ¢å¤æ—¶ï¼Œåªéœ€è¯»å–å‹ç¼©åçš„æœ€æ–°çŠ¶æ€ï¼Œèƒ½æå¤§åŠ å¿«æ¢å¤é€Ÿåº¦ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µå»ºè®®ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿æ¶ˆæ¯æœ‰é”®&lt;/strong&gt;ï¼šåªæœ‰å¸¦é”®çš„æ¶ˆæ¯æ‰ä¼šè¢«å‹ç¼©å¤„ç† ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å‹ç¼©è¿›åº¦&lt;/strong&gt;ï¼šå…³æ³¨ &lt;code&gt;dirty.records.ratio&lt;/code&gt;å’Œ &lt;code&gt;compaction.lag.time&lt;/code&gt;ç­‰æŒ‡æ ‡ï¼Œç¡®ä¿å‹ç¼©å·¥ä½œæ­£å¸¸ï¼Œæ²¡æœ‰æ»å ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆç†è®¾ç½®åˆ†æ®µå¤§å°&lt;/strong&gt;ï¼šè¿‡å¤§çš„åˆ†æ®µå¯èƒ½å»¶é•¿å•æ¬¡å‹ç¼©æ—¶é—´ï¼Œè¿‡å°çš„åˆ†æ®µåˆ™ä¼šäº§ç”Ÿå¤ªå¤šæ–‡ä»¶ã€‚é»˜è®¤1GBé€šå¸¸æ˜¯ä¸ªä¸é”™çš„èµ·ç‚¹ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£Kafkaæ—¥å¿—å‹ç¼©çš„å®ç°åŸç†ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯ä¸‹çš„é…ç½®æˆ–å†…éƒ¨æœºåˆ¶æœ‰æ›´è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ—¥å¿—åˆ é™¤--æ—¥å¿—å‹ç¼©"&gt;æ—¥å¿—åˆ é™¤ &amp;amp; æ—¥å¿—å‹ç¼©
&lt;/h2&gt;&lt;p&gt;ç†è§£ Kafka æ—¥å¿—å‹ç¼©ä¸æ™®é€šæ—¥å¿—åˆ é™¤ç­–ç•¥åœ¨æ€§èƒ½ä¸Šçš„å·®å¼‚ï¼Œå…³é”®åœ¨äºè®¤è¯†åˆ°å®ƒä»¬çš„è®¾è®¡ç›®æ ‡ä¸åŒï¼š&lt;strong&gt;åˆ é™¤ç­–ç•¥è¿½æ±‚ç®€å•é«˜æ•ˆåœ°æ¸…ç†æ•°æ®ï¼Œè€Œå‹ç¼©ç­–ç•¥åˆ™é€šè¿‡æ¶ˆè€—é¢å¤–è®¡ç®—èµ„æºæ¥æ¢å–å­˜å‚¨æ•ˆç‡å’ŒçŠ¶æ€ç»´æŠ¤èƒ½åŠ›&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ€§èƒ½å½±å“ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ—¥å¿—åˆ é™¤ç­–ç•¥&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ—¥å¿—å‹ç¼©ç­–ç•¥&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥åˆ é™¤æ•´ä¸ªè¿‡æœŸçš„æ—¥å¿—åˆ†æ®µæ–‡ä»¶&lt;/td&gt;
&lt;td&gt;æ‰«ææ—¥å¿—å†…å®¹ï¼Œä¿ç•™æ¯ä¸ªKeyçš„æœ€æ–°å€¼ï¼Œé‡å†™æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CPUå¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ã€‚ä»…éœ€æ£€æŸ¥æ–‡ä»¶æ—¶é—´æˆ–å¤§å°å¹¶åˆ é™¤ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ã€‚éœ€æ‰«æã€æ¯”è¾ƒé”®å€¼å¯¹å¹¶é‡å†™æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç£ç›˜I/O&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½ä¸”ç®€å•&lt;/strong&gt;ã€‚ä¸»è¦æ˜¯åˆ é™¤æ–‡ä»¶çš„æ“ä½œã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜ä¸”å¤æ‚&lt;/strong&gt;ã€‚æ¶‰åŠå¤§é‡æ•°æ®çš„è¯»å–å’Œå†™å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡ ä¹ä¸å ç”¨é¢å¤–å†…å­˜ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé«˜&lt;/strong&gt;ã€‚éœ€åœ¨å†…å­˜ä¸­æ„å»ºâ€œé”®-æœ€æ–°åç§»é‡â€çš„æ˜ å°„è¡¨ï¼ˆå¦‚SkimpyOffsetMapï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹ç”Ÿäº§/æ¶ˆè´¹çš„å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½±å“å°ã€‚åå°åˆ é™¤æ“ä½œä¸ä¸»æµç¨‹åŸºæœ¬éš”ç¦»ã€‚&lt;/td&gt;
&lt;td&gt;å¯èƒ½å¼•èµ·è½»å¾®å»¶è¿Ÿã€‚å‹ç¼©è¿‡ç¨‹ä¸­çš„I/Oå’ŒCPUæ¶ˆè€—å¯èƒ½ä¸æ­£å¸¸è¯»å†™ç«äº‰èµ„æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ¨¡å‹ä¸é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äº&lt;strong&gt;äº‹ä»¶æµæ•°æ®&lt;/strong&gt;ï¼ˆå¦‚æ—¥å¿—è®°å½•ï¼‰ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½æ˜¯ç‹¬ç«‹äº‹ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äº&lt;strong&gt;çŠ¶æ€æµæ•°æ®&lt;/strong&gt;ï¼ˆå¦‚æ•°æ®åº“å˜æ›´ï¼‰ï¼Œéœ€è¦ç»´æŠ¤é”®çš„æœ€æ–°çŠ¶æ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥è§£ææ€§èƒ½å·®å¼‚çš„æ ¹æº"&gt;ğŸ’¡ æ·±å…¥è§£ææ€§èƒ½å·®å¼‚çš„æ ¹æº
&lt;/h3&gt;&lt;p&gt;è¿™ä¸¤ç§ç­–ç•¥æ€§èƒ½å·®å¼‚çš„æ ¹æºåœ¨äºå®ƒä»¬è§£å†³é—®é¢˜çš„é€»è¾‘å®Œå…¨ä¸åŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—åˆ é™¤çš„ç­–ç•¥é€»è¾‘æ˜¯â€œè¿‡æœŸä¸¢å¼ƒâ€&lt;/strong&gt;ï¼šå®ƒæŠŠæ—¥å¿—çœ‹ä½œæŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„äº‹ä»¶æµã€‚å…¶æ ¸å¿ƒä»»åŠ¡æ˜¯&lt;strong&gt;åŸºäºæ—¶é—´ï¼ˆå¦‚é»˜è®¤ä¿ç•™7å¤©ï¼‰æˆ–æ—¥å¿—æ€»å¤§å°æ¥åˆ¤æ–­å“ªäº›æ•´ä¸ªçš„æ—¥å¿—åˆ†æ®µæ–‡ä»¶å¯ä»¥è¢«å®‰å…¨åœ°ç§»é™¤&lt;/strong&gt;ã€‚è¿™ä¸ªæ“ä½œéå¸¸è½»é‡ï¼Œç±»ä¼¼äºæ¸…ç†ç”µè„‘ä¸Šè¿‡æœŸçš„ä¸´æ—¶æ–‡ä»¶ï¼Œç›´æ¥åˆ é™¤å³å¯ï¼Œå¯¹ç³»ç»Ÿæ€§èƒ½å½±å“å¾®ä¹å…¶å¾®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—å‹ç¼©çš„ç­–ç•¥é€»è¾‘æ˜¯â€œç²¾ç›Šæ±‚ç²¾â€&lt;/strong&gt;ï¼šå®ƒæŠŠæ—¥å¿—çœ‹ä½œä¸€ä¸ªé”®å€¼å¯¹å­˜å‚¨ç³»ç»Ÿã€‚å…¶ç›®æ ‡æ˜¯åœ¨æµ·é‡å†å²æ•°æ®ä¸­&lt;strong&gt;ä¸ºæ¯ä¸ªé”®ï¼ˆKeyï¼‰ä¿ç•™æœ€æ–°çš„å€¼ï¼ˆValueï¼‰&lt;/strong&gt;ã€‚ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œå‹ç¼©çº¿ç¨‹éœ€è¦æ‰§è¡Œä¸€ç³»åˆ—å¤æ‚æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰«æä¸æ˜ å°„&lt;/strong&gt;ï¼šéå†æ—¥å¿—åˆ†æ®µï¼Œä¸ºæ¯ä¸ªé”®è®°å½•å…¶æœ€åå‡ºç°çš„ä½ç½®ï¼ˆåç§»é‡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¯”è¾ƒä¸é‡å†™&lt;/strong&gt;ï¼šå†æ¬¡éå†ï¼Œåªå°†æ¯ä¸ªé”®çš„æœ€æ–°ç‰ˆæœ¬æ•°æ®å†™å…¥ä¸€ä¸ªæ–°çš„ã€å‹ç¼©åçš„æ—¥å¿—åˆ†æ®µæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸå­æ›¿æ¢&lt;/strong&gt;ï¼šç”¨æ–°çš„ã€æ›´ç²¾ç‚¼çš„æ–‡ä»¶æ›¿æ¢æ—§çš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹å°±åƒæ•´ç†ä¸€ä¸ªä¸æ–­æ›´æ–°çš„æ¡£æ¡ˆåº“ï¼Œéœ€è¦ä»”ç»†ç”„åˆ«æ¯ä¸€ä»½æ–‡ä»¶ï¼Œåªä¿ç•™æœ€ç»ˆç‰ˆæœ¬ï¼Œå…¶è®¡ç®—å’ŒI/Oå¼€é”€è‡ªç„¶è¿œé«˜äºç®€å•çš„â€œæ•´ç®±ä¸¢å¼ƒâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¼˜åŒ–ç­–ç•¥ä¸é€‰å‹å»ºè®®"&gt;ğŸ”§ ä¼˜åŒ–ç­–ç•¥ä¸é€‰å‹å»ºè®®
&lt;/h3&gt;&lt;p&gt;äº†è§£äº†æ ¹æœ¬åŒºåˆ«ï¼Œä½ å°±å¯ä»¥æ ¹æ®å®é™…åœºæ™¯è¿›è¡Œé€‰æ‹©å’Œä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•é€‰æ‹©ç­–ç•¥ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©æ—¥å¿—åˆ é™¤ç­–ç•¥ï¼Œå¦‚æœ&lt;/strong&gt;ï¼šä½ çš„æ•°æ®æ˜¯&lt;strong&gt;äº‹ä»¶æµ&lt;/strong&gt;ï¼ˆå¦‚ç”¨æˆ·ç‚¹å‡»æ—¥å¿—ã€åº”ç”¨ç¨‹åºè¾“å‡ºæ—¥å¿—ï¼‰ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸”ä½ åªå…³å¿ƒæœ€è¿‘ä¸€æ®µæ—¶é—´çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‰æ‹©æ—¥å¿—å‹ç¼©ç­–ç•¥ï¼Œå¦‚æœ&lt;/strong&gt;ï¼šä½ çš„æ•°æ®æ˜¯&lt;strong&gt;çŠ¶æ€æµ&lt;/strong&gt;ï¼ˆå¦‚æ•°æ®åº“çš„å˜æ›´è®°å½•ã€ç”¨æˆ·çš„é…ç½®ä¿¡æ¯ã€è®¾å¤‡çš„æœ€æ–°çŠ¶æ€ï¼‰ï¼Œæ¶ˆæ¯æœ‰é‡å¤çš„é”®ï¼Œä¸”ä½ å…³å¿ƒæ¯ä¸ªé”®çš„æœ€æ–°çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•ä¼˜åŒ–å‹ç¼©æ€§èƒ½ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç¡®å®šéœ€è¦ä½¿ç”¨å‹ç¼©ç­–ç•¥ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´ä»¥ä¸‹å‚æ•°æ¥å¹³è¡¡æ€§èƒ½å’Œæ•ˆæœï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;log.cleaner.threads&lt;/code&gt;&lt;/strong&gt;ï¼šå¢åŠ å‹ç¼©çº¿ç¨‹æ•°ï¼Œå¯ä»¥åŠ å¿«å‹ç¼©é€Ÿåº¦ï¼ˆå¦‚æœCPUèµ„æºå……è¶³ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;min.cleanable.dirty.ratio&lt;/code&gt;&lt;/strong&gt;ï¼šæé«˜è¿™ä¸ªæ¯”å€¼ï¼ˆé»˜è®¤0.5ï¼‰ï¼Œæ„å‘³ç€å…è®¸æ—¥å¿—ä¸­æœ‰æ›´å¤šâ€œè„æ•°æ®â€ï¼Œä»è€Œå‡å°‘å‹ç¼©è§¦å‘çš„é¢‘ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;log.cleaner.dedupe.buffer.size&lt;/code&gt;&lt;/strong&gt;ï¼šå¢å¤§ç”¨äºæ„å»ºé”®å€¼æ˜ å°„çš„å†…å­˜ç¼“å†²åŒºå¤§å°ï¼Œå¯ä»¥æå‡å•æ¬¡å‹ç¼©èƒ½å¤„ç†çš„æ—¥å¿—é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œæ—¥å¿—åˆ é™¤ç­–ç•¥ä»¥å…¶&lt;strong&gt;ä½å¼€é”€ã€é«˜æ—¶æ•ˆ&lt;/strong&gt;çš„ç‰¹ç‚¹ï¼Œéå¸¸é€‚åˆå¤„ç†æµ·é‡ã€ä¸´æ—¶çš„æµå¼æ•°æ®ã€‚è€Œæ—¥å¿—å‹ç¼©ç­–ç•¥åˆ™é€šè¿‡&lt;strong&gt;ä»¥è®¡ç®—æ¢å­˜å‚¨&lt;/strong&gt;çš„æ–¹å¼ï¼Œä¸ºéœ€è¦ç»´æŠ¤ç²¾ç¡®æœ€æ–°çŠ¶æ€çš„åœºæ™¯æä¾›äº†å¼ºå¤§æ”¯æŒï¼Œä½†å…¶æ€§èƒ½ä»£ä»·ä¹Ÿæ›´é«˜ï¼Œéœ€è¦ä»”ç»†è°ƒä¼˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ ¹æ®ä¸šåŠ¡éœ€æ±‚åšå‡ºæœ€åˆé€‚çš„æŠ€æœ¯é€‰å‹ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Spring</title><link>https://dyhes.github.io/p/nowcoderspring/</link><pubDate>Thu, 11 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderspring/</guid><description>&lt;h2 id="conditional"&gt;@Conditional
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œä½ è¯´çš„æ²¡é”™ã€‚&lt;strong&gt;&lt;code&gt;@Conditional&lt;/code&gt;æ³¨è§£æœ¬èº«å±äº Spring Framework&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ Spring Bootã€‚å®ƒæ˜¯åœ¨ Spring Framework 4.0 ç‰ˆæœ¬ä¸­å¼•å…¥çš„æ ¸å¿ƒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ æ›´æ¸…æ™°åœ°ç†è§£å®ƒä»¬çš„å…³ç³»å’ŒåŒºåˆ«ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªè¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Spring Framework çš„ &lt;code&gt;@Conditional&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;Spring Boot çš„æ¡ä»¶æ³¨è§£ (å¦‚ &lt;code&gt;@ConditionalOnClass&lt;/code&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¥æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Spring Framework (&lt;code&gt;org.springframework.context.annotation&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;Spring Boot (&lt;code&gt;org.springframework.boot.autoconfigure.condition&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€å®ç° &lt;code&gt;Condition&lt;/code&gt;æ¥å£ï¼Œåœ¨ &lt;code&gt;matches&lt;/code&gt;æ–¹æ³•ä¸­ç¼–å†™è‡ªå®šä¹‰æ¡ä»¶åˆ¤æ–­é€»è¾‘&lt;/td&gt;
&lt;td&gt;å·²å°è£…å¥½å¸¸è§æ¡ä»¶çš„åˆ¤æ–­é€»è¾‘ï¼Œå¼€ç®±å³ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æé«˜ï¼Œå¯å®ç°ä»»ä½•å¤æ‚æ¡ä»¶&lt;/td&gt;
&lt;td&gt;é’ˆå¯¹å¸¸è§åœºæ™¯ï¼Œçµæ´»æ€§ä¸å¦‚è‡ªå®šä¹‰ï¼Œä½†æ›´æ–¹ä¾¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§£å†³æ¡†æ¶å±‚é¢çš„æ¡ä»¶åŒ–è£…é…é—®é¢˜&lt;/td&gt;
&lt;td&gt;ç®€åŒ– Spring Boot åº”ç”¨çš„è‡ªåŠ¨é…ç½®ï¼Œå®ç°â€œçº¦å®šä¼˜äºé…ç½®â€å’Œæ¨¡å—åŒ–åŠ è½½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜“ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒä½ï¼Œéœ€ç¼–å†™ä»£ç &lt;/td&gt;
&lt;td&gt;é«˜ï¼Œé€šå¸¸åªéœ€å‡ ä¸ªå±æ€§å³å¯å®Œæˆæ¡ä»¶å£°æ˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-spring-boot-çš„æ¡ä»¶æ³¨è§£"&gt;ğŸ› ï¸ Spring Boot çš„æ¡ä»¶æ³¨è§£
&lt;/h3&gt;&lt;p&gt;Spring Boot åœ¨ &lt;code&gt;@Conditional&lt;/code&gt;çš„åŸºç¡€ä¸Šï¼Œä¸º&lt;strong&gt;å¸¸è§çš„æ¡ä»¶åŒ–åœºæ™¯&lt;/strong&gt;æä¾›äº†ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„æ´¾ç”Ÿæ³¨è§£ï¼Œå®ƒä»¬ä½äº &lt;code&gt;org.springframework.boot.autoconfigure.condition&lt;/code&gt;åŒ…ä¸‹ã€‚è¿™äº›æ³¨è§£æå¤§åœ°ç®€åŒ–äº†è‡ªåŠ¨é…ç½®çš„ç¼–å†™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnClass&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ç±»è·¯å¾„ä¸‹å­˜åœ¨æŒ‡å®šçš„ç±»æ—¶ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;&lt;/strong&gt;ï¼šå½“å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šç±»å‹çš„ Bean æ—¶ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnProperty&lt;/code&gt;&lt;/strong&gt;ï¼šå½“æŒ‡å®šçš„é…ç½®å±æ€§æ»¡è¶³è¦æ±‚æ—¶ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnWebApplication&lt;/code&gt;&lt;/strong&gt;ï¼šå½“åº”ç”¨æ˜¯ä¸€ä¸ª Web åº”ç”¨æ—¶ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnExpression&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ SpEL è¡¨è¾¾å¼è®¡ç®—ç»“æœä¸º &lt;code&gt;true&lt;/code&gt;æ—¶ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥æŠŠè¿™äº› Spring Boot æ¡ä»¶æ³¨è§£ç†è§£ä¸º &lt;strong&gt;&lt;code&gt;@Conditional&lt;/code&gt;çš„â€œè¯­æ³•ç³–â€æˆ–ç‰¹å®šå®ç°&lt;/strong&gt;ã€‚å®ƒä»¬çš„åº•å±‚ä¾ç„¶ä¾èµ–äº Spring Framework çš„ &lt;code&gt;@Conditional&lt;/code&gt;æœºåˆ¶ï¼Œåªæ˜¯ Spring Boot å¸®ä½ æå‰å†™å¥½äº†é‚£äº›é€šç”¨çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘ï¼ˆæ¯”å¦‚æ£€æŸ¥ç±»è·¯å¾„ã€æ£€æŸ¥é…ç½®å±æ€§ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸€ä¸‹"&gt;ğŸ’¡ æ€»ç»“ä¸€ä¸‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Conditional&lt;/code&gt;æ˜¯åŸºçŸ³&lt;/strong&gt;ï¼šå®ƒæ¥è‡ª Spring Frameworkï¼Œæä¾›äº†æ¡ä»¶è£…é…çš„åŸºæœ¬æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Spring Boot æ³¨è§£æ˜¯é«˜æ•ˆå·¥å…·&lt;/strong&gt;ï¼šSpring Boot åœ¨æ­¤åŸºç¡€ä¸Šå°è£…äº†ä¸€ç³»åˆ—å¸¸ç”¨æ¡ä»¶æ³¨è§£ï¼Œæ—¨åœ¨ç®€åŒ–è‡ªåŠ¨é…ç½®ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰å¤æ‚æ¡ä»¶&lt;/strong&gt;ï¼šå½“ Spring Boot æä¾›çš„æ³¨è§£æ— æ³•æ»¡è¶³ä½ çš„ç‰¹æ®Šæ¡ä»¶åˆ¤æ–­éœ€æ±‚æ—¶ï¼Œä½ ä»ç„¶å¯ä»¥å›å½’æœ¬æºï¼Œé€šè¿‡å®ç° &lt;code&gt;Condition&lt;/code&gt;æ¥å£å¹¶ç»“åˆ &lt;code&gt;@Conditional&lt;/code&gt;æ³¨è§£æ¥å®ç°é«˜åº¦è‡ªå®šä¹‰çš„æ¡ä»¶è£…é…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°ç†è§£å®ƒä»¬çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;h2 id="resource--autowired"&gt;@Resource &amp;amp; @Autowired
&lt;/h2&gt;&lt;p&gt;äº†è§£ &lt;code&gt;@Resource&lt;/code&gt;å’Œ &lt;code&gt;@Autowired&lt;/code&gt;çš„åŒºåˆ«å¯¹Springåº”ç”¨å¼€å‘å¾ˆé‡è¦ã€‚ä¸‹é¢ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿæ¢³ç†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ï¼Œç„¶åæˆ‘ä¼šè¿›ä¸€æ­¥è§£é‡Šå…³é”®ç‚¹å’Œä½¿ç”¨å»ºè®®ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;@Autowired&lt;/th&gt;
&lt;th&gt;@Resource&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¥æºä¸è§„èŒƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Spring æ¡†æ¶ç‰¹æœ‰ (&lt;code&gt;org.springframework.beans.factory.annotation&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;Java æ ‡å‡† (JSR-250) (&lt;code&gt;javax.annotation&lt;/code&gt;)ï¼Œè·¨æ¡†æ¶æ”¯æŒæ›´å¥½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤æ³¨å…¥æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰ç±»å‹ (byType)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰åç§° (byName)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‡å®šåç§°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€é…åˆ &lt;code&gt;@Qualifier(&amp;quot;beanName&amp;quot;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥ä½¿ç”¨ &lt;code&gt;name&lt;/code&gt;å±æ€§ (å¦‚ &lt;code&gt;@Resource(name=&amp;quot;myBean&amp;quot;)&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„é€ å™¨æ³¨å…¥æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒ&lt;/td&gt;
&lt;td&gt;âŒ ä¸æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¿…éœ€æ€§æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒ &lt;code&gt;@Autowired(required=false)&lt;/code&gt;å…è®¸æ³¨å…¥ &lt;code&gt;null&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ— ç›´æ¥é…ç½®ï¼Œä¾èµ–å¿…é¡»å­˜åœ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†å¤šBeanå†²çª&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»“åˆ &lt;code&gt;@Qualifier&lt;/code&gt;æˆ–ä½¿ç”¨ &lt;code&gt;@Primary&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¼˜å…ˆæŒ‰åç§°åŒ¹é…ï¼Œå¤±è´¥åˆ™å›é€€åˆ°æŒ‰ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é›†åˆç±»å‹æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒ&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¯ Spring é¡¹ç›®ã€æ„é€ å™¨æ³¨å…¥ã€å¯é€‰ä¾èµ–&lt;/td&gt;
&lt;td&gt;éœ€æŒ‰åç§°æ³¨å…¥ã€é Spring ç¯å¢ƒã€å¸Œæœ›å‡å°‘æ³¨è§£&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£ä¸ä½¿ç”¨åœºæ™¯"&gt;ğŸ” è¯¦è§£ä¸ä½¿ç”¨åœºæ™¯
&lt;/h3&gt;&lt;h4 id="1-æ¥æºä¸è§„èŒƒ"&gt;1. æ¥æºä¸è§„èŒƒ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Autowired&lt;/code&gt;&lt;/strong&gt; æ˜¯ &lt;strong&gt;Spring æ¡†æ¶çš„åŸç”Ÿæ³¨è§£&lt;/strong&gt;ï¼Œå› æ­¤æ·±åº¦é›†æˆäº Spring çš„ IOC å®¹å™¨ã€‚å¦‚æœä½ çš„åº”ç”¨å®Œå…¨åŸºäº Spring ç”Ÿæ€ï¼Œä½¿ç”¨å®ƒéå¸¸è‡ªç„¶ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Resource&lt;/code&gt;&lt;/strong&gt; æºäº &lt;strong&gt;JSR-250 æ ‡å‡†&lt;/strong&gt;ï¼ˆJava è§„èŒƒè¯·æ±‚ï¼‰ã€‚è¿™æ„å‘³ç€å®ƒä¸ä»…èƒ½åœ¨ Spring ä¸­ä½¿ç”¨ï¼Œè¿˜èƒ½åœ¨å…¶ä»–æ”¯æŒ JSR-250 çš„ JavaEE/Jakarta EE å®¹å™¨ä¸­å·¥ä½œï¼Œ&lt;strong&gt;è·¨æ¡†æ¶å…¼å®¹æ€§æ›´å¥½&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-é»˜è®¤æ³¨å…¥æœºåˆ¶"&gt;2. é»˜è®¤æ³¨å…¥æœºåˆ¶
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸¤è€…æœ€æ˜¾è‘—çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Autowired&lt;/code&gt;&lt;/strong&gt; é»˜è®¤&lt;strong&gt;æŒ‰ç±»å‹åŒ¹é…&lt;/strong&gt;ã€‚å½“å­˜åœ¨å¤šä¸ªåŒç±»å‹ Bean æ—¶ï¼Œå®ƒä¼šå°è¯•é€šè¿‡å­—æ®µæˆ–å‚æ•°åç§°è¿›è¡ŒäºŒæ¬¡åŒ¹é…ã€‚è‹¥ä»æ— æ³•ç¡®å®šï¼Œéœ€ä½¿ç”¨ &lt;code&gt;@Qualifier&lt;/code&gt;æ˜ç¡®æŒ‡å®š Bean åç§°ï¼Œå¦åˆ™æŠ›å‡º &lt;code&gt;NoUniqueBeanDefinitionException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Resource&lt;/code&gt;&lt;/strong&gt; é»˜è®¤&lt;strong&gt;æŒ‰åç§°åŒ¹é…&lt;/strong&gt;ï¼ˆå…ˆçœ‹ &lt;code&gt;name&lt;/code&gt;å±æ€§ï¼Œè‹¥æ— åˆ™ç”¨å­—æ®µ/æ–¹æ³•åï¼‰ã€‚å¦‚æœæŒ‰åç§°æ‰¾ä¸åˆ°ï¼Œ&lt;strong&gt;æ‰ä¼šå›é€€åˆ°æŒ‰ç±»å‹åŒ¹é…&lt;/strong&gt;ã€‚ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;name&lt;/code&gt;æˆ– &lt;code&gt;type&lt;/code&gt;å±æ€§æ˜¾å¼å®šä¹‰åŒ¹é…è§„åˆ™ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ä¾èµ–å¿…éœ€æ€§"&gt;3. ä¾èµ–å¿…éœ€æ€§
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Autowired&lt;/code&gt;&lt;/strong&gt; æä¾›äº† &lt;code&gt;required&lt;/code&gt;å±æ€§ï¼Œ&lt;code&gt;@Autowired(required=false)&lt;/code&gt;å…è®¸ä¾èµ–é¡¹ä¸º &lt;code&gt;null&lt;/code&gt;ï¼Œé€‚ç”¨äº&lt;strong&gt;å¯é€‰ä¾èµ–&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Resource&lt;/code&gt;&lt;/strong&gt; &lt;strong&gt;æ²¡æœ‰&lt;/strong&gt;ç±»ä¼¼çš„å¿…éœ€æ€§é…ç½®å±æ€§ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„ Beanï¼Œå®ƒé€šå¸¸ä¼šæŠ›å‡ºå¼‚å¸¸ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-æ³¨å…¥æ–¹å¼æ”¯æŒ"&gt;4. æ³¨å…¥æ–¹å¼æ”¯æŒ
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Autowired&lt;/code&gt;&lt;/strong&gt; æ”¯æŒæ›´å¹¿æ³›çš„æ³¨å…¥æ–¹å¼ï¼š&lt;strong&gt;å­—æ®µã€æ„é€ å™¨ã€Setter æ–¹æ³•ã€æ™®é€šæ–¹æ³•&lt;/strong&gt;ã€‚å®˜æ–¹æ¨èä½¿ç”¨&lt;strong&gt;æ„é€ å™¨æ³¨å…¥&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºå®ç°ä¸å¯å˜å¯¹è±¡å’Œæé«˜å¯æµ‹è¯•æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Resource&lt;/code&gt;&lt;/strong&gt; é€šå¸¸ç”¨äº&lt;strong&gt;å­—æ®µæ³¨å…¥å’Œ Setter æ–¹æ³•æ³¨å…¥&lt;/strong&gt;ï¼Œ&lt;strong&gt;ä¸æ”¯æŒæ„é€ å™¨æ³¨å…¥&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-å¤„ç†å¤šä¸ªåŒç±»å‹bean"&gt;5. å¤„ç†å¤šä¸ªåŒç±»å‹Bean
&lt;/h4&gt;&lt;p&gt;å½“åŒä¸€ç±»å‹æœ‰å¤šä¸ªå®ç°æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;@Autowired&lt;/code&gt;&lt;/strong&gt;ï¼šéœ€è¦ç»“åˆ &lt;strong&gt;&lt;code&gt;@Qualifier(&amp;quot;specificBeanName&amp;quot;)&lt;/code&gt;&lt;/strong&gt; æ¥æŒ‡å®šå…·ä½“çš„ Beanï¼Œæˆ–è€…ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;@Primary&lt;/code&gt;&lt;/strong&gt; æ ‡è®°é»˜è®¤ä¼˜å…ˆæ³¨å…¥çš„ Bean ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;@Resource&lt;/code&gt;&lt;/strong&gt;ï¼šå¯ä»¥ç›´æ¥é€šè¿‡å…¶ &lt;strong&gt;&lt;code&gt;name&lt;/code&gt;&lt;/strong&gt; å±æ€§æŒ‡å®š Bean åç§°ï¼Œå¦‚ &lt;code&gt;@Resource(name=&amp;quot;specificBeanName&amp;quot;)&lt;/code&gt;ï¼Œæ›´åŠ ç›´æ¥ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¡¹ç›®ç¯å¢ƒå†³å®šåŸºç¡€é€‰æ‹©&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ˜¯&lt;strong&gt;çº¯ Spring é¡¹ç›®&lt;/strong&gt;ï¼Œä¸¤è€…çš†å¯ï¼Œä½†å›¢é˜Ÿåº”ç»Ÿä¸€é£æ ¼ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦&lt;strong&gt;è·¨æ¡†æ¶å…¼å®¹&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œä»£ç å¯èƒ½è¿ç§»åˆ°å…¶ä»–JavaEEå®¹å™¨ï¼‰ï¼Œä¼˜å…ˆè€ƒè™‘ &lt;code&gt;@Resource&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…·ä½“åœºæ™¯çš„è€ƒé‡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ„é€ å™¨æ³¨å…¥&lt;/strong&gt;ï¼šé€‰æ‹© &lt;code&gt;@Autowired&lt;/code&gt;ï¼Œå› ä¸ºå®ƒæ”¯æŒæ„é€ å™¨æ³¨å…¥ï¼Œè¿™è¢«è®¤ä¸ºæ˜¯æ›´å®‰å…¨ã€æ›´æ¨èçš„æ–¹å¼ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®æŒ‰åç§°æ³¨å…¥&lt;/strong&gt;ï¼š&lt;code&gt;@Resource&lt;/code&gt;çš„ &lt;code&gt;name&lt;/code&gt;å±æ€§è®©æŒ‰åæ³¨å…¥éå¸¸ç›´æ¥ï¼Œæ— éœ€é¢å¤–æ³¨è§£ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¾èµ–å¯ä¸ºç©º&lt;/strong&gt;ï¼šé€‰æ‹© &lt;code&gt;@Autowired(required=false)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå°½é‡é¿å…æ··ç”¨ä¸¤ç§æ³¨è§£ï¼Œé€‰æ‹©ä¸€ç§å¹¶åšæŒä½¿ç”¨ï¼Œä»¥&lt;strong&gt;ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç°ä»£Springçš„é»˜è®¤é€‰æ‹©&lt;/strong&gt;ï¼šåœ¨è®¸å¤šç°ä»£çš„Springï¼ˆç‰¹åˆ«æ˜¯Spring Bootï¼‰é¡¹ç›®ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;@Autowired&lt;/code&gt;ç»“åˆæ„é€ å™¨æ³¨å…¥&lt;/strong&gt;å·²æˆä¸ºä¸€ç§äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œå› ä¸ºå®ƒèƒ½æ˜ç¡®ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”ä¾¿äºæµ‹è¯•ã€‚&lt;code&gt;@Resource&lt;/code&gt;åˆ™åœ¨éœ€è¦æŒ‰åç§°ç²¾ç¡®åŒ¹é…æ—¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¤‡é€‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šæ— è®ºä½¿ç”¨å“ªä¸ªæ³¨è§£ï¼Œéƒ½è¦æ³¨æ„é¿å…å¾ªç¯ä¾èµ–ï¼ˆAä¾èµ–Bï¼ŒBåˆä¾èµ–Aï¼‰ã€‚è™½ç„¶Springå®¹å™¨é€šè¿‡ä¸‰çº§ç¼“å­˜ç­‰æ‰‹æ®µå°è¯•è§£å†³æ„é€ å™¨å¾ªç¯ä¾èµ–ï¼Œä½†ä»åº”&lt;strong&gt;ä»è®¾è®¡ä¸Šé¿å…&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨è§£æ‰«æ&lt;/strong&gt;ï¼šç¡®ä¿ä½ çš„é…ç½®ï¼ˆå¦‚XMLä¸­çš„ &lt;code&gt;&amp;lt;context:component-scan&amp;gt;&lt;/code&gt;æˆ–Javaé…ç½®ä¸­çš„ &lt;code&gt;@ComponentScan&lt;/code&gt;ï¼‰èƒ½æ‰«æåˆ°è¿™äº›æ³¨è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸¤ä¸ªæ³¨è§£ã€‚&lt;/p&gt;
&lt;h2 id="bean"&gt;@Bean
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ã€‚&lt;code&gt;@Bean&lt;/code&gt;æ³¨è§£çš„ä½¿ç”¨å¹¶ä¸å¼ºåˆ¶ä¾èµ–äº &lt;code&gt;@Configuration&lt;/code&gt;æ³¨è§£ã€‚ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥å¯¹æ¯” &lt;code&gt;@Bean&lt;/code&gt;åœ¨ä¸åŒæ³¨è§£ç±»ä¸­çš„è¡Œä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@Bean&lt;/code&gt;åœ¨ &lt;code&gt;@Configuration&lt;/code&gt;ç±»ä¸­ (Full æ¨¡å¼)&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@Bean&lt;/code&gt;åœ¨ &lt;code&gt;@Component&lt;/code&gt;/&lt;code&gt;@Service&lt;/code&gt;ç­‰ç±»ä¸­ (Lite æ¨¡å¼)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®ç±»ä»£ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ˜¯ï¼Œé€šè¿‡ CGLIB ä»£ç†å¢å¼º&lt;/td&gt;
&lt;td&gt;âŒ å¦ï¼ŒåŸå§‹ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•é—´è°ƒç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¢«ä»£ç†æ‹¦æˆªï¼Œè¿”å›å®¹å™¨ç®¡ç†çš„&lt;strong&gt;åŒä¸€å®ä¾‹&lt;/strong&gt; (å•ä¾‹)&lt;/td&gt;
&lt;td&gt;æ™®é€š Java æ–¹æ³•è°ƒç”¨ï¼Œæ¯æ¬¡æ‰§è¡Œæ–¹æ³•ä½“ï¼Œ&lt;strong&gt;å¯èƒ½åˆ›å»ºæ–°å®ä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bean å•ä¾‹ä¿è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… ä¸¥æ ¼ä¿è¯&lt;/td&gt;
&lt;td&gt;âš ï¸ æ— æ³•ä¿è¯ï¼Œæœ‰é‡å¤åˆ›å»ºé£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•å£°æ˜é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä¸º &lt;code&gt;private&lt;/code&gt;æˆ– &lt;code&gt;final&lt;/code&gt;(ä½†ä¸æ¨è)&lt;/td&gt;
&lt;td&gt;ä¸èƒ½æ˜¯ &lt;code&gt;private&lt;/code&gt;æˆ– &lt;code&gt;final&lt;/code&gt;(éœ€å¯è¢«æ™®é€šè°ƒç”¨)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…éƒ¨ä¾èµ–å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å®¹å™¨ç®¡ç†ä¾èµ–ï¼Œæ”¯æŒ &lt;code&gt;@Autowired&lt;/code&gt;ç­‰&lt;/td&gt;
&lt;td&gt;ä¾èµ–éœ€æ˜¾å¼é€šè¿‡&lt;strong&gt;æ–¹æ³•å‚æ•°&lt;/strong&gt;ä¼ é€’ (ç”± Spring æ³¨å…¥)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ Bean åŠ Bean é—´&lt;strong&gt;å¤æ‚ä¾èµ–å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»„ä»¶å†…éƒ¨&lt;/strong&gt;æ³¨å†Œè¾…åŠ© Beanï¼Œä¸”è¯¥ Bean é€šå¸¸&lt;strong&gt;ä¸ä¸å…¶ä»–ç»„ä»¶å…±äº«&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸¤ç§æ¨¡å¼è¯¦è§£"&gt;ğŸ” ä¸¤ç§æ¨¡å¼è¯¦è§£
&lt;/h3&gt;&lt;p&gt;Spring å¤„ç† &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œä¼šæ ¹æ®å…¶æ‰€åœ¨çš„ç±»æ˜¯å¦è¢« &lt;code&gt;@Configuration&lt;/code&gt;æ³¨è§£æ ‡æ³¨ï¼Œåˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Full æ¨¡å¼ï¼ˆå®Œæ•´æ¨¡å¼ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä½äº &lt;code&gt;@Configuration&lt;/code&gt;æ ‡æ³¨çš„ç±»ä¸­æ—¶ï¼ŒSpring ä¼šä½¿ç”¨ &lt;strong&gt;CGLIB åŠ¨æ€ä»£ç†&lt;/strong&gt;å¯¹è¯¥é…ç½®ç±»è¿›è¡Œå¢å¼ºã€‚&lt;strong&gt;è¿™æ˜¯ç¡®ä¿è·¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•å¼•ç”¨ä¿æŒå•ä¾‹çš„å…³é”®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç†è¡Œä¸º&lt;/strong&gt;ï¼šå½“åœ¨ä¸€ä¸ª &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•å†…éƒ¨è°ƒç”¨å¦ä¸€ä¸ª &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œä»£ç†ä¼šæ‹¦æˆªæ­¤è°ƒç”¨ã€‚å®ƒé¦–å…ˆæ£€æŸ¥ Spring å®¹å™¨ä¸­æ˜¯å¦å·²å­˜åœ¨è¯¥ Bean çš„å®ä¾‹ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿”å›å®¹å™¨ä¸­çš„å®ä¾‹ï¼Œå¦‚æœä¸å­˜åœ¨æ‰æ‰§è¡Œæ–¹æ³•ä½“åˆ›å»ºå®ä¾‹å¹¶æ³¨å†Œåˆ°å®¹å™¨åè¿”å›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;ä¸¥æ ¼ä¿è¯å•ä¾‹è¯­ä¹‰&lt;/strong&gt;ï¼Œæ— è®ºä¸€ä¸ª Bean è¢«å…¶ä»– &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä¾èµ–å¤šå°‘æ¬¡ï¼Œåœ¨å®¹å™¨ä¸­éƒ½åªæœ‰å”¯ä¸€å®ä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class FullConfig {
@Bean
public ServiceA serviceA() {
// è¿™é‡Œçš„ serviceB() è°ƒç”¨ä¼šè¢«ä»£ç†æ‹¦æˆªï¼Œè¿”å›å®¹å™¨ä¸­å”¯ä¸€çš„ ServiceB å®ä¾‹
return new ServiceA(serviceB());
}
@Bean
public ServiceB serviceB() {
return new ServiceB();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Lite æ¨¡å¼ï¼ˆè½»é‡æ¨¡å¼ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä½äº &lt;code&gt;@Component&lt;/code&gt;, &lt;code&gt;@Service&lt;/code&gt;, &lt;code&gt;@Repository&lt;/code&gt;ç­‰æ³¨è§£æ ‡æ³¨çš„ç±»ä¸­ï¼Œæˆ–ç”šè‡³æ˜¯ä¸€ä¸ªæ™®é€šç±»ä¸­æ—¶ï¼ŒSpring &lt;strong&gt;ä¸ä¼š&lt;/strong&gt;ä½¿ç”¨ CGLIB ä»£ç†è¿™äº›ç±»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ–¹æ³•è°ƒç”¨è¡Œä¸º&lt;/strong&gt;ï¼š&lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä¹‹é—´çš„è°ƒç”¨æ˜¯&lt;strong&gt;æ ‡å‡†çš„ Java æ–¹æ³•è°ƒç”¨&lt;/strong&gt;ï¼Œæ²¡æœ‰ä»»ä½• Spring å®¹å™¨å±‚é¢çš„æ‹¦æˆªã€‚æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ‰§è¡Œæ–¹æ³•ä½“ä¸­çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é£é™©&lt;/strong&gt;ï¼šè¿™ææ˜“å¯¼è‡´&lt;strong&gt;æ— æ„ä¸­åˆ›å»ºå¤šä¸ªå®ä¾‹&lt;/strong&gt;ï¼Œç ´åå•ä¾‹è¯­ä¹‰ï¼Œå¯èƒ½å¼•å‘èµ„æºæµªè´¹ã€çŠ¶æ€ä¸ä¸€è‡´æˆ–çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­£ç¡®ç”¨æ³•&lt;/strong&gt;ï¼šåœ¨ Lite æ¨¡å¼ä¸‹ï¼Œå¦‚æœä¸€ä¸ª &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•éœ€è¦ä¾èµ–å¦ä¸€ä¸ª Beanï¼Œ&lt;strong&gt;å”¯ä¸€å®‰å…¨å¯é çš„æ–¹å¼æ˜¯é€šè¿‡æ–¹æ³•å‚æ•°å£°æ˜ä¾èµ–&lt;/strong&gt;ï¼Œè®© Spring å®¹å™¨åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶è‡ªåŠ¨æ³¨å…¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
public class LiteComponent {
// æ­£ç¡®ï¼šä¾èµ–é€šè¿‡å‚æ•°æ³¨å…¥
@Bean
public ServiceA serviceA(ServiceB serviceB) { // Spring æ³¨å…¥ serviceB
return new ServiceA(serviceB);
}
@Bean
public ServiceB serviceB() {
return new ServiceB();
}
// é”™è¯¯ï¼šç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œåœ¨ Lite æ¨¡å¼ä¸‹ä¼šå¯¼è‡´å¤šæ¬¡åˆ›å»º ServiceB
// @Bean
// public ServiceA serviceA() {
// return new ServiceA(serviceB()); // è¿™æ˜¯æ™®é€šæ–¹æ³•è°ƒç”¨ï¼
// }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©æ¨¡å¼"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©æ¨¡å¼
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»å¤§å¤šæ•°åœºæ™¯æ¨èä½¿ç”¨ Full æ¨¡å¼ (&lt;code&gt;@Configuration&lt;/code&gt;+ &lt;code&gt;@Bean&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ Spring å®˜æ–¹æ¨èçš„æ ‡å‡†æ–¹å¼ï¼Œèƒ½å®‰å…¨ã€æ¸…æ™°ã€æ–¹ä¾¿åœ°è¡¨è¾¾ Bean å®šä¹‰åŠå…¶é—´çš„å¤æ‚ä¾èµ–å…³ç³»ï¼Œé¿å…æ„å¤–çš„å•ä¾‹ç ´åã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ Lite æ¨¡å¼ (åœ¨ &lt;code&gt;@Component&lt;/code&gt;ç­‰ç±»ä¸­ä½¿ç”¨ &lt;code&gt;@Bean&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šå¸¸ä»…é€‚ç”¨äºä»¥ä¸‹ç‰¹å®šæƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»„ä»¶å†…éƒ¨æ³¨å†Œè¾…åŠ© Bean&lt;/strong&gt;ï¼šå½“ä¸€ä¸ª &lt;code&gt;@Component&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;@Service&lt;/code&gt;ï¼‰ç±»è‡ªèº«æ˜¯ä¸šåŠ¡é€»è¾‘ Beanï¼Œä½†å®ƒå†…éƒ¨éœ€è¦æ³¨å†Œä¸€ä¸¤ä¸ª&lt;strong&gt;éå¸¸ç®€å•ä¸”ä»…æœåŠ¡äºè‡ªèº«&lt;/strong&gt;çš„å·¥å…·ç±» Beanï¼ˆä¸”è¯¥å·¥å…· Bean &lt;strong&gt;ä¸éœ€è¦è¢«å…¶ä»–ä»»ä½• Bean ä¾èµ–&lt;/strong&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºç¬¬ä¸‰æ–¹åº“ç±»æ·»åŠ  Bean&lt;/strong&gt;ï¼šå½“ä½ æ— æ³•ä¿®æ”¹ä¸€ä¸ªå·²æœ‰çš„ &lt;code&gt;@Component&lt;/code&gt;ç±»ï¼ˆå¦‚æ¥è‡ªç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œä½†éœ€è¦åœ¨è¿™ä¸ªç±»ä¸­é€šè¿‡ &lt;code&gt;@Bean&lt;/code&gt;æ·»åŠ ä¸€ä¸ª Bean å®šä¹‰æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¦åŸåˆ™&lt;/strong&gt;ï¼šåœ¨ Lite æ¨¡å¼ä¸‹ï¼ŒåŠ¡å¿…éµå®ˆâ€œ&lt;strong&gt;é€šè¿‡æ–¹æ³•å‚æ•°æ³¨å…¥ä¾èµ–&lt;/strong&gt;â€çš„é“å¾‹ï¼Œç»å¯¹é¿å…åœ¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä½“å†…ç›´æ¥è°ƒç”¨å…¶ä»– &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@Bean&lt;/code&gt;æ³¨è§£çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„çµæ´»æ€§ï¼Œå®ƒä¸ä»…å¯ä»¥ä¸ &lt;code&gt;@Configuration&lt;/code&gt;æ­é…æä¾›å¼ºä¸€è‡´æ€§çš„å•ä¾‹ä¿è¯ï¼ˆFull æ¨¡å¼ï¼‰ï¼Œä¹Ÿèƒ½åœ¨ &lt;code&gt;@Component&lt;/code&gt;ç­‰ç»„ä»¶ç±»ä¸­ä½¿ç”¨ä»¥å®ç°æ›´è½»é‡çš„é…ç½®ï¼ˆLite æ¨¡å¼ï¼‰ã€‚ç†è§£è¿™ä¸¤ç§æ¨¡å¼çš„æ ¸å¿ƒå·®å¼‚â€”â€”&lt;strong&gt;CGLIB ä»£ç†å¸¦æ¥çš„æ‹¦æˆªè¡Œä¸º&lt;/strong&gt;â€”â€”æ˜¯æ­£ç¡®ä½¿ç”¨å®ƒä»¬çš„å…³é”®ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸ºäº†ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå»ºè®®ä¼˜å…ˆé€‰æ‹© &lt;code&gt;@Configuration&lt;/code&gt;æ³¨è§£çš„ Full æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h2 id="spring-scope"&gt;Spring Scope
&lt;/h2&gt;&lt;p&gt;Spring Bean çš„ä½œç”¨åŸŸï¼ˆScopeï¼‰æ˜¯ Spring æ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„æ¦‚å¿µï¼Œå®ƒå†³å®šäº† Bean &lt;strong&gt;å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€åˆ›å»ºæ–¹å¼ä»¥åŠåœ¨å®¹å™¨ä¸­çš„å¯è§æ€§&lt;/strong&gt;ã€‚äº†è§£å¹¶æ­£ç¡®ä½¿ç”¨ä½œç”¨åŸŸï¼Œå¯¹äºæ„å»ºé«˜æ•ˆã€ç¨³å®šä¸”çº¿ç¨‹å®‰å…¨çš„ Spring åº”ç”¨è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº† Spring æ”¯æŒçš„ 6 ç§æ ¸å¿ƒä½œç”¨åŸŸåŠå…¶ä¸»è¦ç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä½œç”¨åŸŸ (Scope)&lt;/th&gt;
&lt;th&gt;é€‚ç”¨ç¯å¢ƒ&lt;/th&gt;
&lt;th&gt;å®ä¾‹æ•°é‡ä¸ç”Ÿå‘½å‘¨æœŸ&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;singleton&lt;/strong&gt; (é»˜è®¤)&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰&lt;/td&gt;
&lt;td&gt;æ•´ä¸ª IoC å®¹å™¨ä¸­&lt;strong&gt;åªæœ‰ä¸€ä¸ª&lt;/strong&gt;å®ä¾‹ï¼Œç”Ÿå‘½å‘¨æœŸä¸å®¹å™¨ç›¸åŒ&lt;/td&gt;
&lt;td&gt;æ— çŠ¶æ€æœåŠ¡ã€å·¥å…·ç±»ã€æ•°æ®è®¿é—®å±‚ï¼ˆDAOã€Serviceï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;prototype&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¯æ¬¡è¯·æ±‚&lt;/strong&gt;éƒ½åˆ›å»ºä¸€ä¸ª&lt;strong&gt;æ–°&lt;/strong&gt;å®ä¾‹ï¼Œç”Ÿå‘½å‘¨æœŸç”±è°ƒç”¨æ–¹ç®¡ç†&lt;/td&gt;
&lt;td&gt;æœ‰çŠ¶æ€å¯¹è±¡ã€éœ€è¦éš”ç¦»çš„ä¸Šä¸‹æ–‡ï¼ˆå¦‚ DTOã€ä»»åŠ¡å¤„ç†å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;request&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Web (Spring MVC)&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª &lt;strong&gt;HTTP è¯·æ±‚&lt;/strong&gt;ä¸€ä¸ªå®ä¾‹ï¼Œè¯·æ±‚ç»“æŸå³é”€æ¯&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚è¡¨å•æ•°æ®ã€è¯·æ±‚IDï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;session&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Web (Spring MVC)&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª &lt;strong&gt;HTTP ä¼šè¯&lt;/strong&gt;ä¸€ä¸ªå®ä¾‹ï¼Œä¼šè¯ç»“æŸå³é”€æ¯&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼ˆå¦‚ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;application&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Web (Spring MVC)&lt;/td&gt;
&lt;td&gt;æ•´ä¸ª &lt;strong&gt;Web åº”ç”¨&lt;/strong&gt;ä¸€ä¸ªå®ä¾‹ï¼Œåº”ç”¨å…³é—­æ‰é”€æ¯&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å…¨å±€é…ç½®ã€åº”ç”¨çº§ç¼“å­˜ï¼ˆå¦‚åº”ç”¨åç§°ã€ç‰ˆæœ¬å·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;websocket&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Web (WebSocket)&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª &lt;strong&gt;WebSocket ä¼šè¯&lt;/strong&gt;ä¸€ä¸ªå®ä¾‹ï¼Œä¼šè¯ç»“æŸå³é”€æ¯&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ WebSocket è¿æ¥çŠ¶æ€ã€ä¼šè¯ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="è¯¦ç»†è§£æå„ä½œç”¨åŸŸ"&gt;è¯¦ç»†è§£æå„ä½œç”¨åŸŸ
&lt;/h3&gt;&lt;h4 id="1-singletonå•ä¾‹"&gt;1. Singletonï¼ˆå•ä¾‹ï¼‰
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ Spring å®¹å™¨&lt;strong&gt;é»˜è®¤&lt;/strong&gt;çš„ä½œç”¨åŸŸï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šåœ¨æ•´ä¸ª Spring IoC å®¹å™¨ä¸­ï¼Œè¯¥ Bean å®šä¹‰&lt;strong&gt;åªå¯¹åº”ä¸€ä¸ªå®ä¾‹&lt;/strong&gt;ã€‚æ‰€æœ‰é€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆå¦‚ &lt;code&gt;@Autowired&lt;/code&gt;ï¼‰æˆ– &lt;code&gt;getBean()&lt;/code&gt;æ–¹æ³•è·å–è¯¥ Bean çš„è¯·æ±‚ï¼Œå¾—åˆ°çš„éƒ½æ˜¯&lt;strong&gt;åŒä¸€ä¸ªå…±äº«å®ä¾‹&lt;/strong&gt;ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸å®¹å™¨ç»‘å®šï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºï¼ˆå¯é…ç½®æ‡’åŠ è½½ï¼‰ï¼Œå®¹å™¨å…³é—­æ—¶é”€æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼šæ— éœ€ç‰¹æ®Šé…ç½®å³ä¸º Singletonã€‚ä¹Ÿå¯æ˜¾å¼æŒ‡å®šï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@Scope(&amp;#34;singleton&amp;#34;) // æˆ– @Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)
public class MyService {
// ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;strong&gt;æ— çŠ¶æ€&lt;/strong&gt;çš„ Beanï¼Œä¾‹å¦‚æœåŠ¡å±‚ï¼ˆServiceï¼‰ã€æ•°æ®è®¿é—®å±‚ï¼ˆRepository/Daoï¼‰ã€å·¥å…·ç±»ç­‰ã€‚è¿™äº› Bean é€šå¸¸ä¸ä¿å­˜ä¼šå˜åŒ–çš„æˆå‘˜å˜é‡ï¼Œå› æ­¤å¯ä»¥å®‰å…¨å…±äº«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ­£å› ä¸ºå®ä¾‹æ˜¯å…±äº«çš„ï¼ŒSingleton Bean æ˜¯&lt;strong&gt;çº¿ç¨‹ä¸å®‰å…¨çš„&lt;/strong&gt;ã€‚å¦‚æœå®ƒåŒ…å«å¯ä¿®æ”¹çš„çŠ¶æ€ï¼ˆæˆå‘˜å˜é‡ï¼‰ï¼Œä½ éœ€è¦è‡ªè¡Œå¤„ç†å¹¶å‘è®¿é—®é—®é¢˜ï¼ˆå¦‚ä½¿ç”¨åŒæ­¥é”æˆ– &lt;code&gt;ThreadLocal&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-prototypeåŸå‹"&gt;2. Prototypeï¼ˆåŸå‹ï¼‰
&lt;/h4&gt;&lt;p&gt;ä¸ Singleton ç›¸åï¼Œæ¯æ¬¡è·å–éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šæ¯æ¬¡é€šè¿‡å®¹å™¨&lt;strong&gt;è¯·æ±‚&lt;/strong&gt;ï¼ˆæ³¨å…¥æˆ–è°ƒç”¨ &lt;code&gt;getBean()&lt;/code&gt;ï¼‰è¯¥ Bean æ—¶ï¼ŒSpring éƒ½ä¼š&lt;strong&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹&lt;/strong&gt;ç»™ä½ ã€‚Spring å®¹å™¨åªè´Ÿè´£åˆ›å»ºï¼Œ&lt;strong&gt;ä¸ç®¡ç†å…¶å®Œæ•´ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼Œå³ä¸ä¼šè°ƒç”¨å…¶ &lt;code&gt;@PreDestroy&lt;/code&gt;æ–¹æ³•ã€‚å®ä¾‹çš„é”€æ¯ç”± GC è´Ÿè´£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@Scope(&amp;#34;prototype&amp;#34;) // æˆ– @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)
public class OrderDto {
// æ¯æ¬¡ä½¿ç”¨éƒ½éœ€è¦æ–°å®ä¾‹çš„æœ‰çŠ¶æ€å¯¹è±¡
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;strong&gt;æœ‰çŠ¶æ€çš„&lt;/strong&gt; Beanï¼Œæ¯ä¸ªä½¿ç”¨è€…éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å®ä¾‹æ¥ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€ï¼Œä¾‹å¦‚æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰ã€è¡¨å•å¯¹è±¡ã€ä»»åŠ¡å¤„ç†å™¨ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¢‘ç¹åˆ›å»ºæ–°å®ä¾‹ä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Singleton Bean ä¸­ç›´æ¥æ³¨å…¥ Prototype Bean å¯èƒ½æ— æ³•è¾¾åˆ°é¢„æœŸæ•ˆæœã€‚å› ä¸ºæ³¨å…¥åªå‘ç”Ÿä¸€æ¬¡ï¼ŒSingleton Bean å°†å§‹ç»ˆæŒæœ‰æœ€åˆæ³¨å…¥çš„é‚£ä¸ª Prototype å®ä¾‹ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ &lt;code&gt;ObjectFactory&lt;/code&gt;æˆ– &lt;code&gt;Provider&lt;/code&gt;æ¥å»¶è¿ŸæŸ¥æ‰¾ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Autowired
private ObjectFactory&amp;lt;PrototypeBean&amp;gt; prototypeBeanFactory;
public void someMethod() {
PrototypeBean newInstance = prototypeBeanFactory.getObject();
// ... ä½¿ç”¨æ–°å®ä¾‹
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-request"&gt;3. Request
&lt;/h4&gt;&lt;p&gt;ä¸“ä¸º Web åº”ç”¨è®¾è®¡ï¼Œç”Ÿå‘½å‘¨æœŸä¸ HTTP è¯·æ±‚ç»‘å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šæ¯ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„ &lt;strong&gt;HTTP è¯·æ±‚&lt;/strong&gt;éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ Bean å®ä¾‹ã€‚å½“è¿™ä¸ªè¯·æ±‚å¤„ç†å®Œæ¯•å¹¶è¿”å›å“åº”åï¼Œè¯¥å®ä¾‹å°±ä¼šè¢«é”€æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼ˆéœ€åœ¨ Web ç¯å¢ƒä¸­ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@RequestScope // æˆ– @Scope(value = WebApplicationContext.SCOPE_REQUEST)
public class RequestContext {
private String requestId;
// ... å­˜å‚¨è¯·æ±‚ç›¸å…³ä¿¡æ¯
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç”¨äºå­˜å‚¨åªåœ¨ä¸€æ¬¡è¯·æ±‚å†…æœ‰æ•ˆçš„ä¸´æ—¶æ•°æ®ï¼Œä¾‹å¦‚ HTTP è¯·æ±‚å‚æ•°ã€æœ¬æ¬¡è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-session"&gt;4. Session
&lt;/h4&gt;&lt;p&gt;ä¸“ä¸º Web åº”ç”¨è®¾è®¡ï¼Œç”Ÿå‘½å‘¨æœŸä¸ HTTP ä¼šè¯ç»‘å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šæ¯ä¸€ä¸ªç”¨æˆ·çš„ &lt;strong&gt;HTTP ä¼šè¯&lt;/strong&gt;ï¼ˆSessionï¼‰å¯¹åº”ä¸€ä¸ª Bean å®ä¾‹ã€‚åŒä¸€ä¸ªç”¨æˆ·åœ¨ä¸åŒè¯·æ±‚ä¸­è®¿é—®çš„æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚å½“ä¼šè¯è¶…æ—¶æˆ–å¤±æ•ˆï¼ˆå¦‚ç”¨æˆ·æ³¨é”€ï¼‰æ—¶ï¼Œè¯¥å®ä¾‹è¢«é”€æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼ˆéœ€åœ¨ Web ç¯å¢ƒä¸­ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@SessionScope // æˆ– @Scope(value = WebApplicationContext.SCOPE_SESSION)
public class UserSession {
private Long userId;
private String username;
// ... å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¿¡æ¯
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç”¨äºå­˜å‚¨ç”¨æˆ·çº§åˆ«çš„çŠ¶æ€ä¿¡æ¯ï¼Œæœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯&lt;strong&gt;è´­ç‰©è½¦&lt;/strong&gt;å’Œç”¨æˆ·ç™»å½•å‡­è¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-application"&gt;5. Application
&lt;/h4&gt;&lt;p&gt;ä¸“ä¸º Web åº”ç”¨è®¾è®¡ï¼Œç”Ÿå‘½å‘¨æœŸä¸ &lt;code&gt;ServletContext&lt;/code&gt;ç»‘å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šåœ¨æ•´ä¸ª &lt;strong&gt;Web åº”ç”¨ç¨‹åº&lt;/strong&gt;ä¸­åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ &lt;code&gt;ServletContext&lt;/code&gt;ç›¸åŒï¼Œä»åº”ç”¨å¯åŠ¨åˆ°å…³é—­ã€‚å®ƒå’Œ Singleton å¾ˆåƒï¼Œä½†å®ƒæ˜¯ &lt;strong&gt;ServletContext çº§åˆ«&lt;/strong&gt;çš„å•ä¾‹ï¼Œè€Œé Spring å®¹å™¨çº§åˆ«ã€‚å¦‚æœä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ª Spring å®¹å™¨ï¼ŒSingleton ä¼šæœ‰å¤šä¸ªå®ä¾‹ï¼Œè€Œ Application åªæœ‰ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼ˆéœ€åœ¨ Web ç¯å¢ƒä¸­ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@ApplicationScope // æˆ– @Scope(value = WebApplicationContext.SCOPE_APPLICATION)
public class AppConfig {
private String appName;
private String appVersion;
// ... å­˜å‚¨å…¨å±€é…ç½®ä¿¡æ¯
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå­˜æ”¾æ•´ä¸ªåº”ç”¨å…±äº«çš„å…¨å±€é…ç½®ä¿¡æ¯æˆ–ç¼“å­˜æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="6-websocket"&gt;6. Websocket
&lt;/h4&gt;&lt;p&gt;ä¸“ä¸º WebSocket åº”ç”¨è®¾è®¡ï¼Œç”Ÿå‘½å‘¨æœŸä¸ WebSocket ä¼šè¯ç»‘å®šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šæ¯ä¸ª &lt;strong&gt;WebSocket ä¼šè¯&lt;/strong&gt;å¯¹åº”ä¸€ä¸ª Bean å®ä¾‹ã€‚å½“ WebSocket è¿æ¥å…³é—­åï¼Œè¯¥å®ä¾‹è¢«é”€æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®&lt;/strong&gt;ï¼ˆéœ€é›†æˆ Spring WebSocketï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@Scope(value = &amp;#34;websocket&amp;#34;)
public class WebSocketSessionHandler {
private String sessionId;
// ... å­˜å‚¨WebSocketä¼šè¯ä¿¡æ¯
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¤„ç† WebSocket è¿æ¥æ—¶çš„çŠ¶æ€ç®¡ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½œç”¨åŸŸé€‰æ‹©åŸåˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— çŠ¶æ€ Bean&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨ &lt;strong&gt;Singleton&lt;/strong&gt;ï¼Œè¿™æ˜¯æ€§èƒ½æœ€ä¼˜çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ‰çŠ¶æ€ Bean&lt;/strong&gt;ï¼šæ ¹æ®çŠ¶æ€çš„ç”Ÿå‘½å‘¨æœŸé€‰æ‹© &lt;strong&gt;Prototype&lt;/strong&gt;ï¼ˆçº¿ç¨‹å†…ï¼‰ã€&lt;strong&gt;Request&lt;/strong&gt;ï¼ˆä¸€æ¬¡è¯·æ±‚ï¼‰ã€&lt;strong&gt;Session&lt;/strong&gt;ï¼ˆä¸€æ¬¡ä¼šè¯ï¼‰æˆ– &lt;strong&gt;Websocket&lt;/strong&gt;ï¼ˆä¸€æ¬¡è¿æ¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é…ç½®&lt;/strong&gt;ï¼šåœ¨ Web ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ &lt;strong&gt;Application&lt;/strong&gt; ä½œç”¨åŸŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å•ä¾‹ Bean ä¸­æ³¨å…¥åŸå‹ Bean çš„é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ Singleton Bean ä¸­ç›´æ¥ &lt;code&gt;@Autowired&lt;/code&gt;ä¸€ä¸ª Prototype Beanï¼Œç”±äºä¾èµ–æ³¨å…¥åªåœ¨ Singleton Bean åˆå§‹åŒ–æ—¶å‘ç”Ÿä¸€æ¬¡ï¼Œå¯¼è‡´åè€…å³ä½¿å®šä¹‰ä¸º Prototypeï¼Œä¹Ÿåªä¼šè¢«æ³¨å…¥ä¸€æ¬¡ï¼Œæ— æ³•æ¯æ¬¡è·å¾—æ–°å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ObjectFactory&lt;/code&gt;ï¼ˆSpring æä¾›ï¼‰æˆ– &lt;code&gt;Provider&lt;/code&gt;ï¼ˆJSR-330 æ ‡å‡†ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Service
public class SingletonService {
// ä½¿ç”¨ ObjectFactory å»¶è¿Ÿè·å–
@Autowired
private ObjectFactory&amp;lt;PrototypeBean&amp;gt; prototypeBeanFactory;
public void doSomething() {
// æ¯æ¬¡è°ƒç”¨ getObject() éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ PrototypeBean å®ä¾‹
PrototypeBean newInstance = prototypeBeanFactory.getObject();
// ...
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Web ä½œç”¨åŸŸçš„ä¾èµ–æ³¨å…¥é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é Web ç¯å¢ƒçš„ Beanï¼ˆå¦‚æ™®é€šçš„ Singleton Serviceï¼‰æ— æ³•ç›´æ¥æ³¨å…¥ Requestã€Session ç­‰ Web ä½œç”¨åŸŸçš„ Beanï¼Œå› ä¸º Web ä¸Šä¸‹æ–‡åœ¨å®ƒä»¬åˆå§‹åŒ–æ—¶å¯èƒ½ä¸å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä¸º Web ä½œç”¨åŸŸçš„ Bean é…ç½®&lt;strong&gt;ä»£ç†ï¼ˆProxyï¼‰&lt;/strong&gt;ã€‚Spring ä¼šæ³¨å…¥ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œåœ¨å®é™…è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä»£ç†ä¼šå»å½“å‰è¯·æ±‚/ä¼šè¯ä¸­æŸ¥æ‰¾çœŸæ­£çš„ç›®æ ‡ Beanã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)
public class RequestScopedBean {
// ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·ï¼Œåœ¨ Singleton Service ä¸­å°±å¯ä»¥æ­£å¸¸ &lt;code&gt;@Autowired&lt;/code&gt;è¿™ä¸ª &lt;code&gt;RequestScopedBean&lt;/code&gt;äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Spring Bean Scopeã€‚&lt;/p&gt;
&lt;h2 id="å•ä¾‹åŸå‹å¤±æ•ˆ"&gt;å•ä¾‹åŸå‹å¤±æ•ˆ
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£æ˜¯ Spring æ¡†æ¶ä¸­ä¸€é¡¹&lt;strong&gt;æ–¹æ³•çº§åˆ«ä¾èµ–æ³¨å…¥&lt;/strong&gt;çš„é«˜çº§ç‰¹æ€§ã€‚å®ƒä¸»è¦ç”¨äºè§£å†³ &lt;strong&gt;å•ä¾‹ Bean éœ€è¦ä¾èµ–åŸå‹ï¼ˆPrototypeï¼‰Bean&lt;/strong&gt; æ—¶çš„ç»å…¸é—®é¢˜ï¼Œç¡®ä¿æ¯æ¬¡éƒ½èƒ½è·å¾—&lt;strong&gt;æ–°çš„åŸå‹å®ä¾‹&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯è¢«å•ä¾‹ç¼“å­˜çš„é‚£ä¸ªå›ºå®šå®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº† &lt;code&gt;@Lookup&lt;/code&gt;çš„æ ¸å¿ƒä¿¡æ¯ï¼Œå¸®ä½ å¿«é€Ÿäº†è§£å®ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹é¢&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å•ä¾‹ Bean ä¸­&lt;strong&gt;åŠ¨æ€è·å–&lt;/strong&gt;åŸå‹ä½œç”¨åŸŸï¼ˆPrototypeï¼‰Bean çš„æ–°å®ä¾‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. å•ä¾‹ Bean ä¸­éœ€è¦é¢‘ç¹åˆ›å»ºçŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ã€‚ 2. å¤šçº¿ç¨‹ç¯å¢ƒä¸­è·å–çº¿ç¨‹ä¸å®‰å…¨çš„åŸå‹ Beanã€‚ 3. éœ€è¦é¿å…å¾ªç¯ä¾èµ–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Spring é€šè¿‡ &lt;strong&gt;CGLIB åŠ¨æ€ä»£ç†&lt;/strong&gt;ç”Ÿæˆå­ç±»ï¼Œé‡å†™è¢« &lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ï¼Œä½¿å…¶æ¯æ¬¡è°ƒç”¨éƒ½ä»å®¹å™¨ä¸­è·å–æ–°å®ä¾‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•ä¸èƒ½æ˜¯ &lt;code&gt;private&lt;/code&gt;, &lt;code&gt;final&lt;/code&gt;æˆ– &lt;code&gt;static&lt;/code&gt;ã€‚æ¨èä½¿ç”¨ &lt;code&gt;protected&lt;/code&gt;æŠ½è±¡æ–¹æ³•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°å®ä¾‹å’Œå¯èƒ½çš„ä»£ç†å¼€é”€ï¼Œéœ€æ³¨æ„åœ¨é«˜é¢‘åœºæ™¯ä¸‹çš„æ€§èƒ½å½±å“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦æ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. &lt;code&gt;ObjectFactory&lt;/code&gt;/ &lt;code&gt;Provider&lt;/code&gt; 2. æ‰‹åŠ¨ä» &lt;code&gt;ApplicationContext&lt;/code&gt;è·å–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®ä½¿ç”¨-lookup"&gt;ğŸ”§ å¦‚ä½•æ­£ç¡®ä½¿ç”¨ @Lookup
&lt;/h3&gt;&lt;h4 id="1-åŸºæœ¬ç”¨æ³•"&gt;1. åŸºæœ¬ç”¨æ³•
&lt;/h4&gt;&lt;p&gt;å‡è®¾ä½ æœ‰ä¸€ä¸ªåŸå‹ Bean å’Œä¸€ä¸ªå•ä¾‹ Beanã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šä¹‰åŸå‹ Bean&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;@Scope(&amp;quot;prototype&amp;quot;)&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
@Scope(&amp;#34;prototype&amp;#34;) // å…³é”®ï¼šå£°æ˜ä¸ºåŸå‹ä½œç”¨åŸŸ
public class TaskExecutor {
private String taskId;
// æ¯æ¬¡ä½¿ç”¨éƒ½åº”æ˜¯æ–°çš„å®ä¾‹ï¼Œå¯èƒ½åŒ…å«çŠ¶æ€
public void execute() {
System.out.println(&amp;#34;Executing task with ID: &amp;#34; + taskId + &amp;#34; on instance: &amp;#34; + this);
}
// ... çœç•¥ getter å’Œ setter
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨å•ä¾‹ Bean ä¸­ä½¿ç”¨ &lt;code&gt;@Lookup&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
public abstract class TaskService { // æ³¨æ„ï¼šç±»å¿…é¡»æ˜¯æŠ½è±¡ç±»æˆ–æœ‰å¯é‡å†™çš„æ–¹æ³•
// ä½¿ç”¨ @Lookup æ³¨è§£ä¸€ä¸ªæ–¹æ³•
@Lookup // value å¯æŒ‡å®š Bean åï¼Œè‹¥çœç•¥åˆ™æŒ‰è¿”å›ç±»å‹æŸ¥æ‰¾
protected abstract TaskExecutor getTaskExecutor(); // æ–¹æ³•ä½“è¿”å› null å³å¯
public void processTask(String taskId) {
TaskExecutor executor = getTaskExecutor(); // æ¯æ¬¡è°ƒç”¨éƒ½è·å–æ–°å®ä¾‹
executor.setTaskId(taskId);
executor.execute();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-æµ‹è¯•ä¸æ•ˆæœ"&gt;2. æµ‹è¯•ä¸æ•ˆæœ
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;@SpringBootTest
public class TaskServiceTest {
@Autowired
private TaskService taskService;
@Test
public void testLookup() {
taskService.processTask(&amp;#34;Task-1&amp;#34;);
taskService.processTask(&amp;#34;Task-2&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é¢„æœŸè¾“å‡º&lt;/strong&gt;ï¼ˆå®ä¾‹çš„å“ˆå¸Œå€¼æ¯æ¬¡ä¸åŒï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Executing task with ID: Task-1 on instance: com.example.TaskExecutor@5e8c92f4
Executing task with ID: Task-2 on instance: com.example.TaskExecutor@2f0a87c5
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å·¥ä½œåŸç†cglib-ä»£ç†"&gt;âš™ï¸ å·¥ä½œåŸç†ï¼šCGLIB ä»£ç†
&lt;/h3&gt;&lt;p&gt;Spring åœ¨å¯åŠ¨æ—¶ï¼Œå¦‚æœå‘ç°æŸä¸ª Bean çš„æ–¹æ³•ä¸Šæœ‰ &lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£ï¼Œå®ƒä¼šä¸ºè¯¥ Bean åŠ¨æ€ç”Ÿæˆä¸€ä¸ª &lt;strong&gt;CGLIB ä»£ç†å­ç±»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£ææ³¨è§£&lt;/strong&gt;ï¼šSpring å®¹å™¨åœ¨åˆå§‹åŒ–å•ä¾‹ Beanï¼ˆå¦‚ &lt;code&gt;TaskService&lt;/code&gt;ï¼‰æ—¶ï¼Œä¼šæ‰«æå…¶æ–¹æ³•ã€‚å‘ç° &lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£åï¼ŒSpring ä¼šå°†æ­¤æ–¹æ³•ä¿¡æ¯å°è£…ä¸ºä¸€ä¸ª &lt;code&gt;LookupOverride&lt;/code&gt;å¯¹è±¡ï¼Œå¹¶å­˜å‚¨åˆ°è¯¥ Bean çš„ &lt;code&gt;BeanDefinition&lt;/code&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºä»£ç†&lt;/strong&gt;ï¼šç”±äº &lt;code&gt;TaskService&lt;/code&gt;çš„ &lt;code&gt;BeanDefinition&lt;/code&gt;ä¸­åŒ…å«äº†éœ€è¦é‡å†™çš„æ–¹æ³•ï¼ˆ&lt;code&gt;LookupOverride&lt;/code&gt;ï¼‰ï¼ŒSpring ä¸ä¼šç›´æ¥å®ä¾‹åŒ–åŸå§‹çš„ &lt;code&gt;TaskService&lt;/code&gt;ï¼Œè€Œæ˜¯é€šè¿‡ &lt;code&gt;CglibSubclassingInstantiationStrategy&lt;/code&gt;åˆ›å»ºä¸€ä¸ª CGLIB å¢å¼ºçš„å­ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ³•æ‹¦æˆª&lt;/strong&gt;ï¼šåœ¨è¿™ä¸ªä»£ç†å­ç±»ä¸­ï¼Œè¢« &lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ï¼ˆå¦‚ &lt;code&gt;getTaskExecutor()&lt;/code&gt;ï¼‰ä¼šè¢«é‡å†™ã€‚å…¶é€»è¾‘ç”± &lt;code&gt;LookupOverrideMethodInterceptor&lt;/code&gt;æ‹¦æˆªå™¨å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è·å– Bean&lt;/strong&gt;ï¼šå½“è°ƒç”¨ &lt;code&gt;getTaskExecutor()&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œæ‹¦æˆªå™¨ä¼šä»‹å…¥æ‰§è¡Œã€‚å®ƒä¼šæ ¹æ®æ³¨è§£ä¸ŠæŒ‡å®šçš„ Bean åç§°ï¼ˆæˆ–æ–¹æ³•çš„è¿”å›ç±»å‹ï¼‰&lt;strong&gt;è°ƒç”¨ &lt;code&gt;beanFactory.getBean(...)&lt;/code&gt;&lt;/strong&gt; æ–¹æ³•ï¼Œä» Spring å®¹å™¨ä¸­å®æ—¶è·å–ä¸€ä¸ªæ–°çš„ &lt;code&gt;TaskExecutor&lt;/code&gt;å®ä¾‹å¹¶è¿”å›ã€‚è¿™æ ·å°±ä¿è¯äº†æ¯æ¬¡è°ƒç”¨éƒ½è·å¾—çš„æ˜¯æœ€æ–°çš„åŸå‹ Bean å®ä¾‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¸¸è§åº”ç”¨åœºæ™¯"&gt;ğŸ“Œ å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…å•ä¾‹ä¸­çš„åŸå‹å¤±æ•ˆ&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„åœºæ™¯ã€‚å½“ä¸€ä¸ªå•ä¾‹ Bean éœ€è¦é€šè¿‡ä¾èµ–æ³¨å…¥ä½¿ç”¨ä¸€ä¸ªåŸå‹ Beanï¼Œä¸”å¸Œæœ›&lt;strong&gt;æ¯æ¬¡æ“ä½œéƒ½ä½¿ç”¨ä¸€ä¸ªæ–°çš„åŸå‹å®ä¾‹&lt;/strong&gt;æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ›¿ä»£æ–¹æ¡ˆçš„é€‰æ‹©&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ObjectFactory&lt;/code&gt;/ &lt;code&gt;Provider&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æ›´ç°ä»£å’Œçµæ´»çš„é€‰æ‹©ï¼Œæ— éœ€æŠ½è±¡ç±»æˆ–æ–¹æ³•æ³¨å…¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
public class TaskService {
@Autowired
private ObjectFactory&amp;lt;TaskExecutor&amp;gt; taskExecutorFactory; // æˆ– Provider&amp;lt;TaskExecutor&amp;gt;
public void processTask(String taskId) {
TaskExecutor executor = taskExecutorFactory.getObject(); // æ¯æ¬¡è°ƒç”¨ getObject()
executor.setTaskId(taskId);
executor.execute();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›´æ¥æ³¨å…¥ &lt;code&gt;ApplicationContext&lt;/code&gt;&lt;/strong&gt;ï¼šè™½ç„¶çµæ´»ï¼Œä½†ä¼šä½¿ä»£ç ä¸ Spring API è€¦åˆï¼Œä¸æ¨èä½œä¸ºé¦–é€‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Autowired
private ApplicationContext applicationContext;
public void processTask() {
TaskExecutor executor = applicationContext.getBean(TaskExecutor.class);
// ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç±»ä¸æ–¹æ³•è®¾è®¡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åŒ…å« &lt;code&gt;@Lookup&lt;/code&gt;æ–¹æ³•çš„ç±»&lt;strong&gt;ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™æ— æ³•è¢« CGLIB ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;è¢«æ³¨è§£çš„æ–¹æ³•&lt;strong&gt;ä¸èƒ½æ˜¯ &lt;code&gt;private&lt;/code&gt;, &lt;code&gt;final&lt;/code&gt;æˆ– &lt;code&gt;static&lt;/code&gt;&lt;/strong&gt;ã€‚Spring éœ€è¦èƒ½é‡å†™è¯¥æ–¹æ³•ã€‚é€šå¸¸å°†å…¶å®šä¹‰ä¸º &lt;strong&gt;&lt;code&gt;protected abstract&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ–¹æ³•çš„å…·ä½“å®ç°ï¼ˆå³ä½¿è¿”å› &lt;code&gt;null&lt;/code&gt;ï¼‰&lt;strong&gt;åœ¨è¿è¡Œæ—¶ä¸ä¼šè¢«è°ƒç”¨&lt;/strong&gt;ï¼Œå› ä¸ºä»£ç†ä¼šå®Œå…¨è¦†ç›–å®ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸è®¾è®¡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡è°ƒç”¨ &lt;code&gt;@Lookup&lt;/code&gt;æ–¹æ³•éƒ½ä¼šè§¦å‘ä¸€æ¬¡ä»å®¹å™¨ä¸­è·å– Bean çš„æ“ä½œï¼ˆæœ¬è´¨æ˜¯ &lt;code&gt;getBean()&lt;/code&gt;ï¼‰ï¼Œè¿™å¯èƒ½å¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨é«˜æ€§èƒ½æˆ–å¾ªç¯ä¸­é¢‘ç¹è°ƒç”¨çš„åœºæ™¯ã€‚åŒæ—¶ï¼ŒCGLIB ä»£ç†çš„åˆ›å»ºæœ¬èº«ä¹Ÿæœ‰æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡è€ƒé‡&lt;/strong&gt;ï¼š&lt;code&gt;@Lookup&lt;/code&gt;ä¼šå¼•å…¥ &lt;strong&gt;â€œé­”æ³•â€&lt;/strong&gt; ï¼ˆMagicï¼‰ï¼Œå³ä»£ç è¡Œä¸ºå¹¶éç›´æ¥æ˜¾è€Œæ˜“è§ï¼Œè¿™å¯èƒ½å¢åŠ ä»£ç çš„ç†è§£å’Œç»´æŠ¤éš¾åº¦ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ &lt;code&gt;ObjectFactory&lt;/code&gt;æˆ– &lt;code&gt;Provider&lt;/code&gt;&lt;/strong&gt; ä½œä¸ºæ›´æ˜ç¡®ä¸”ä¾µå…¥æ€§æ›´ä½çš„æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¸æ­§ä¹‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è¢«æŸ¥æ‰¾çš„ Beanï¼ˆå¦‚ &lt;code&gt;TaskExecutor&lt;/code&gt;ï¼‰&lt;strong&gt;å¿…é¡»æ˜ç¡®é…ç½®ä¸ºåŸå‹ä½œç”¨åŸŸ&lt;/strong&gt;ï¼ˆ&lt;code&gt;@Scope(&amp;quot;prototype&amp;quot;)&lt;/code&gt;ï¼‰ï¼Œå¦åˆ™ &lt;code&gt;@Lookup&lt;/code&gt;å°†å¤±æ•ˆï¼Œæ¯æ¬¡è¿”å›çš„è¿˜æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå®¹å™¨ä¸­å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ Beanï¼ˆä¾‹å¦‚ &lt;code&gt;TaskExecutor&lt;/code&gt;æœ‰å¤šä¸ªå®ç°ï¼‰ï¼Œ&lt;strong&gt;å¿…é¡»åœ¨ &lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£çš„ &lt;code&gt;value&lt;/code&gt;å±æ€§ä¸­æŒ‡å®šå…·ä½“çš„ Bean åç§°&lt;/strong&gt;ï¼Œå¦åˆ™ Spring ä¼šå› æ— æ³•ç¡®å®šæ³¨å…¥å“ªä¸ª Bean è€ŒæŠ›å‡º &lt;code&gt;NoUniqueBeanDefinitionException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;&lt;code&gt;@Lookup&lt;/code&gt;æ³¨è§£æ˜¯ Spring æä¾›çš„ä¸€ç§å¼ºå¤§ä½†&lt;strong&gt;è¾ƒä¸ºç‰¹æ®Š&lt;/strong&gt;çš„ä¾èµ–æ³¨å…¥æœºåˆ¶ã€‚å®ƒèƒ½ä¼˜é›…åœ°è§£å†³å•ä¾‹ Bean ä¾èµ–åŸå‹ Bean æ—¶çš„å®ä¾‹å¤±æ•ˆé—®é¢˜ï¼Œå…¶æ ¸å¿ƒåŸç†æ˜¯åŸºäº CGLIB ä»£ç†è¿›è¡Œæ–¹æ³•é‡å†™å’ŒåŠ¨æ€æŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œåœ¨ç°ä»£ Spring å¼€å‘ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;ObjectFactory&lt;/code&gt;æˆ– &lt;code&gt;Provider&lt;/code&gt;é€šå¸¸æ˜¯æ›´è¢«æ¨èçš„é€‰æ‹©&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä»¬æ›´ç®€å•ã€æ›´çµæ´»ï¼Œä¸”ä¸ä¼šè¦æ±‚å°†ç±»å®šä¹‰ä¸ºæŠ½è±¡ç±»ã€‚è¯·æ ¹æ®ä½ çš„å…·ä½“åœºæ™¯å’Œæ¶æ„åå¥½åšå‡ºé€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2 id="bean-åˆ›å»ºé¡ºåº"&gt;@Bean åˆ›å»ºé¡ºåº
&lt;/h2&gt;&lt;p&gt;ç†è§£ Spring ä¸­ &lt;code&gt;@Bean&lt;/code&gt;çš„åˆå§‹åŒ–é¡ºåºç¡®å®å¾ˆé‡è¦ï¼Œå®ƒå…³ç³»åˆ°ä¾èµ–æ³¨å…¥æ˜¯å¦æ­£ç¡®å’Œåº”ç”¨ç¨‹åºèƒ½å¦æ­£å¸¸å¯åŠ¨ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;p&gt;å½±å“ &lt;code&gt;@Bean&lt;/code&gt;åˆå§‹åŒ–é¡ºåºçš„å› ç´ ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼ŒæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ’åˆ—ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å½±å“å› ç´ &lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;ä¼˜å…ˆçº§&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¾å¼ä¾èµ– (&lt;code&gt;@DependsOn&lt;/code&gt;)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡æ³¨è§£ç›´æ¥ã€æ˜ç¡®åœ°æŒ‡å®š Bean çš„ä¾èµ–å…³ç³»ï¼Œå¼ºåˆ¶è¢«ä¾èµ–çš„ Bean å…ˆåˆå§‹åŒ–ã€‚&lt;/td&gt;
&lt;td&gt;æœ€é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éšå¼ä¾èµ– (æ„é€ å™¨å‚æ•°)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸­å£°æ˜ä¾èµ–ï¼ŒSpring ä¼šè‡ªåŠ¨å…ˆåˆå§‹åŒ–è¿™äº›å‚æ•°ä»£è¡¨çš„ Beanã€‚&lt;/td&gt;
&lt;td&gt;å¾ˆé«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®ç±»åŠ è½½é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åŒé…ç½®ç±»ä¸­çš„ &lt;code&gt;@Bean&lt;/code&gt;ï¼Œå…¶åˆå§‹åŒ–é¡ºåºä¸é…ç½®ç±»æœ¬èº«çš„åŠ è½½é¡ºåºæœ‰å…³ã€‚&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒé…ç½®ç±»ä¸­çš„å£°æ˜é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€šå¸¸&lt;/strong&gt;æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªé…ç½®ç±»ä¸­çš„ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä¼šæŒ‰ç…§å…¶&lt;strong&gt;å®šä¹‰é¡ºåº&lt;/strong&gt;ä»ä¸Šåˆ°ä¸‹è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/td&gt;
&lt;td&gt;è¾ƒä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@Order&lt;/code&gt;æ³¨è§£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»è¦ç”¨äºå½±å“æŸäº›&lt;strong&gt;é›†åˆ&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;List&lt;/code&gt;ï¼‰ä¸­ Bean çš„&lt;strong&gt;æ³¨å…¥é¡ºåº&lt;/strong&gt;ï¼Œè€Œé Bean çš„&lt;strong&gt;åˆå§‹åŒ–é¡ºåº&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ä¸é€‚ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹è¿™äº›æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h3 id="-æ§åˆ¶åˆå§‹åŒ–é¡ºåºçš„ä¸»è¦æ–¹å¼"&gt;ğŸ”§ æ§åˆ¶åˆå§‹åŒ–é¡ºåºçš„ä¸»è¦æ–¹å¼
&lt;/h3&gt;&lt;h4 id="1-æ˜¾å¼ä¾èµ–å…³ç³»-dependson"&gt;1. æ˜¾å¼ä¾èµ–å…³ç³» (&lt;code&gt;@DependsOn&lt;/code&gt;)
&lt;/h4&gt;&lt;p&gt;å½“ Bean A ä¾èµ–äº Bean Bï¼Œä½†è¿™ç§ä¾èµ–å…³ç³»&lt;strong&gt;æ— æ³•é€šè¿‡æ„é€ å™¨å‚æ•°æˆ–Setteræ–¹æ³•ç›´è§‚ä½“ç°&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒBean A çš„åˆå§‹åŒ–éœ€è¦ Bean B å…ˆå®ŒæˆæŸäº›é™æ€é…ç½®æˆ–åå°çº¿ç¨‹å¯åŠ¨ï¼‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;@DependsOn&lt;/code&gt;æ³¨è§£æ¥æ˜¾å¼æŒ‡å®šã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class AppConfig {
@Bean
public BeanB beanB() {
return new BeanB();
}
@Bean
@DependsOn(&amp;#34;beanB&amp;#34;) // æ˜ç¡®æŒ‡å®š beanB å¿…é¡»åœ¨ beanA ä¹‹å‰åˆå§‹åŒ–
public BeanA beanA() {
return new BeanA();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;beanB&lt;/code&gt;â†’ &lt;code&gt;beanA&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="2-éšå¼ä¾èµ–å…³ç³»æ„é€ å™¨å‚æ•°"&gt;2. éšå¼ä¾èµ–å…³ç³»ï¼ˆæ„é€ å™¨å‚æ•°ï¼‰
&lt;/h4&gt;&lt;p&gt;æœ€è‡ªç„¶ã€æœ€æ¨èçš„æ–¹å¼ã€‚é€šè¿‡åœ¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸­å£°æ˜ä¾èµ–ï¼ŒSpring ä¼š&lt;strong&gt;è‡ªåŠ¨&lt;/strong&gt;å…ˆåˆå§‹åŒ–è¿™äº›å‚æ•°æ‰€ä»£è¡¨çš„ Beanã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class DatabaseConfig {
@Bean
public DataSource dataSource() {
// åˆå§‹åŒ–æ•°æ®æº
return new DataSource();
}
// dataSource å‚æ•°ä¼šä¿ƒä½¿Springå…ˆåˆå§‹åŒ–dataSource() Bean
@Bean
public JdbcTemplate jdbcTemplate(DataSource dataSource) {
// ä¾èµ–æ³¨å…¥ dataSource
return new JdbcTemplate(dataSource);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;dataSource&lt;/code&gt;â†’ &lt;code&gt;jdbcTemplate&lt;/code&gt;&lt;/p&gt;
&lt;h4 id="3-é…ç½®ç±»åŠ è½½ä¸åŒé…ç½®ç±»ä¸­çš„é¡ºåº"&gt;3. é…ç½®ç±»åŠ è½½ä¸åŒé…ç½®ç±»ä¸­çš„é¡ºåº
&lt;/h4&gt;&lt;p&gt;Spring åœ¨åŠ è½½é…ç½®ç±»æ—¶ï¼Œå…¶å†…éƒ¨çš„ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•&lt;strong&gt;é€šå¸¸&lt;/strong&gt;ä¼šæŒ‰ç…§å…¶åœ¨ä»£ç ä¸­çš„&lt;strong&gt;å£°æ˜é¡ºåº&lt;/strong&gt;ï¼ˆä»ä¸Šè‡³ä¸‹ï¼‰è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class ConfigOrderExample {
@Bean
public FirstBean firstBean() {
return new FirstBean(); // é€šå¸¸å…ˆåˆå§‹åŒ–
}
@Bean
public SecondBean secondBean() {
return new SecondBean(); // é€šå¸¸ååˆå§‹åŒ–
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ­¤è¡Œä¸ºå¹¶éç»å¯¹ç”± Spring è§„èŒƒä¿è¯ï¼Œä½†åœ¨å®è·µä¸­ï¼ŒSpring é€šè¿‡ &lt;code&gt;LinkedHashSet&lt;/code&gt;å­˜å‚¨æ–¹æ³•å…ƒæ•°æ®ï¼Œä»è€Œç»´æŠ¤äº†å£°æ˜é¡ºåºã€‚&lt;strong&gt;æ›´å¯é çš„åšæ³•æ˜¯ä½¿ç”¨æ„é€ å™¨å‚æ•°æˆ– &lt;code&gt;@DependsOn&lt;/code&gt;æ¥æ˜ç¡®ä¾èµ–ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id="4-ä½¿ç”¨-orderæ³¨è§£"&gt;4. ä½¿ç”¨ &lt;code&gt;@Order&lt;/code&gt;æ³¨è§£
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼š&lt;code&gt;@Order&lt;/code&gt;æ³¨è§£ä¸»è¦ç”¨æ¥æŒ‡å®šä¸€ä¸ª&lt;strong&gt;é›†åˆ&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;List&lt;/code&gt;ï¼‰ä¸­å¤šä¸ª Bean çš„&lt;strong&gt;æ’åºæˆ–ä¼˜å…ˆçº§&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œå¤šä¸ª &lt;code&gt;HandlerInterceptor&lt;/code&gt;çš„æ‰§è¡Œé¡ºåºï¼‰ï¼Œæˆ–è€…å½±å“ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•åœ¨é…ç½®ç±»ä¸­çš„æ£€ç´¢é¡ºåºï¼ˆåº•å±‚ä½¿ç”¨ &lt;code&gt;LinkedHashSet&lt;/code&gt;ï¼Œä½†æ•ˆæœä¸ç›´è§‚ï¼‰ã€‚&lt;strong&gt;å®ƒå¹¶ä¸ç›´æ¥æˆ–å¯é åœ°æ§åˆ¶ Bean çš„åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸé¡ºåº&lt;/strong&gt;ã€‚å¯¹äºåˆå§‹åŒ–é¡ºåºï¼Œåº”ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;@DependsOn&lt;/code&gt;æˆ–æ„é€ å™¨å‚æ•°ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šæœ€å…³é”®çš„æ³¨æ„äº‹é¡¹ã€‚å¦‚æœ Bean A ä¾èµ– Bean Bï¼Œè€Œ Bean B åˆä¾èµ– Bean Aï¼ŒSpring è™½ç„¶èƒ½é€šè¿‡ä¸‰çº§ç¼“å­˜æœºåˆ¶è§£å†³&lt;strong&gt;å•ä¾‹Bean&lt;/strong&gt;çš„&lt;strong&gt;Setteræ³¨å…¥&lt;/strong&gt;å¾ªç¯ä¾èµ–ï¼Œä½†&lt;strong&gt;æ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–æ— æ³•è§£å†³&lt;/strong&gt;ï¼Œä¼šå¯¼è‡´å®¹å™¨å¯åŠ¨å¤±è´¥ã€‚åœ¨è®¾è®¡æ—¶åº”å°½é‡é¿å…å¾ªç¯ä¾èµ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£â€œåˆå§‹åŒ–â€çš„å«ä¹‰&lt;/strong&gt;ï¼šè¿™é‡Œçš„â€œåˆå§‹åŒ–é¡ºåºâ€æŒ‡çš„æ˜¯ Bean &lt;strong&gt;å®ä¾‹è¢«åˆ›å»ºã€å±æ€§è¢«æ³¨å…¥ã€ä»¥åŠå„ç§åˆå§‹åŒ–å›è°ƒï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;ï¼‰è¢«æ‰§è¡Œ&lt;/strong&gt;çš„æ—¶æœºã€‚ä¸€ä¸ª Bean åªæœ‰å®Œå…¨åˆå§‹åŒ–åï¼Œæ‰èƒ½è¢«æ³¨å…¥åˆ°å…¶ä»–ä¾èµ–å®ƒçš„ Bean ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå‹ Bean (Prototype)&lt;/strong&gt;ï¼šå¯¹äºä½œç”¨åŸŸä¸º &lt;code&gt;prototype&lt;/code&gt;çš„ Beanï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚å®ƒä»¬çš„â€œåˆå§‹åŒ–â€å‘ç”Ÿåœ¨æ¯æ¬¡è¢«è·å–æ—¶ï¼Œå› æ­¤å…¶é¡ºåºæ›´ä¾èµ–äºåº”ç”¨ç¨‹åºçš„è°ƒç”¨é€»è¾‘ï¼Œè€Œä¸æ˜¯å®¹å™¨å¯åŠ¨æ—¶çš„é¢„å®šä¹‰é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§é€‰æ‹©&lt;/strong&gt;ï¼š&lt;strong&gt;éšå¼ä¾èµ–ï¼ˆæ„é€ å™¨å‚æ•°ï¼‰æ˜¯æœ€ç›´æ¥å’Œæ¨èçš„æ–¹å¼&lt;/strong&gt;ã€‚åªæœ‰åœ¨æ— æ³•é€šè¿‡æ„é€ å™¨å‚æ•°è¡¨è¾¾ä¾èµ–å…³ç³»æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ &lt;code&gt;@DependsOn&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è¦å¯é åœ°æ§åˆ¶ &lt;code&gt;@Bean&lt;/code&gt;çš„åˆå§‹åŒ–é¡ºåºï¼Œè®°ä½ä»¥ä¸‹åŸåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¦–é€‰æ„é€ å™¨å‚æ•°&lt;/strong&gt;ï¼šè®© Spring è‡ªåŠ¨å¤„ç†ä¾èµ–ï¼Œè¿™æ˜¯æœ€è‡ªç„¶ä¸”ä¸æ˜“å‡ºé”™çš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿…è¦æ—¶ç”¨ &lt;code&gt;@DependsOn&lt;/code&gt;&lt;/strong&gt;ï¼šå½“å­˜åœ¨éç›´æ¥çš„ã€éšå¼çš„åˆå§‹åŒ–ä¾èµ–æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;@DependsOn&lt;/code&gt;è¿›è¡Œæ˜¾å¼å£°æ˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦ä¾èµ–åŒé…ç½®ç±»ä¸­çš„å£°æ˜é¡ºåº&lt;/strong&gt;ï¼šè™½ç„¶é€šå¸¸æœ‰æ•ˆï¼Œä½†å¹¶éç»å¯¹å¯é ï¼Œä¸åº”ä½œä¸ºä¿è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦ç”¨ &lt;code&gt;@Order&lt;/code&gt;æ§åˆ¶åˆå§‹åŒ–é¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;@Order&lt;/code&gt;ä¸»è¦ç”¨äºé›†åˆæ’åºï¼Œè€Œéç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œæ§åˆ¶ Spring Bean çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id="å•ä¸ª-bean-åˆå§‹åŒ–"&gt;å•ä¸ª Bean åˆå§‹åŒ–
&lt;/h2&gt;&lt;p&gt;ã€‚äº†è§£ Spring Bean çš„åˆå§‹åŒ–é¡ºåºå¯¹ç¼–å†™å¯é ä»£ç å¾ˆé‡è¦ã€‚é€šè¿‡ä¸‹é¢çš„è¡¨æ ¼ï¼Œä½ å¯ä»¥å¿«é€Ÿäº†è§£è¿™ä¸‰ç§åˆå§‹åŒ–æ–¹å¼çš„æ ¸å¿ƒç‰¹å¾å’ŒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@PostConstruct&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;init-method&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€å…ˆæ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;å…¶æ¬¡æ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;æœ€åæ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäº &lt;strong&gt;JSR-250&lt;/strong&gt; Java æ ‡å‡†æ³¨è§£&lt;/td&gt;
&lt;td&gt;å®ç° Spring ç‰¹å®šçš„ &lt;strong&gt;InitializingBean&lt;/strong&gt; æ¥å£&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;strong&gt;XML&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;@Bean(initMethod=&amp;quot;...&amp;quot;)&lt;/code&gt;&lt;/strong&gt; é…ç½®æŒ‡å®šæ–¹æ³•å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾µå…¥æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt; (ä»…éœ€æ³¨è§£ï¼Œä¸æ¡†æ¶è§£è€¦)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (éœ€å®ç° Spring æ¥å£ï¼Œä¸æ¡†æ¶è€¦åˆ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— &lt;/strong&gt; (æ— éœ€ä¿®æ”¹Beanæºç )&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»æ„&lt;/td&gt;
&lt;td&gt;å›ºå®šä¸º &lt;strong&gt;&lt;code&gt;afterPropertiesSet()&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šæ–¹æ³•æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒ (æŒ‰å£°æ˜é¡ºåºæ‰§è¡Œ)&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ (ä»…æ­¤ä¸€ä¸ªæ–¹æ³•)&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ (æ¯ä¸ªBeané€šå¸¸æŒ‡å®šä¸€ä¸ªæ–¹æ³•)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨èçš„é¦–é€‰æ–¹å¼&lt;/strong&gt;ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åˆå§‹åŒ–åœºæ™¯&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¸Springç”Ÿå‘½å‘¨æœŸç´§å¯†é›†æˆæˆ–å…¼å®¹æ—§ä»£ç çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–&lt;strong&gt;ç¬¬ä¸‰æ–¹åº“&lt;/strong&gt;çš„Beanæˆ–æ— æ³•ä¿®æ”¹æºç çš„ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰ç§åˆå§‹åŒ–æ–¹å¼è¯¦è§£"&gt;ğŸ› ï¸ ä¸‰ç§åˆå§‹åŒ–æ–¹å¼è¯¦è§£
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;@PostConstruct&lt;/code&gt;æ³¨è§£ (JSR-250æ ‡å‡†)&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æ³•&lt;/strong&gt;ï¼šåœ¨æ–¹æ³•ä¸Šæ·»åŠ  &lt;code&gt;@PostConstruct&lt;/code&gt;æ³¨è§£ã€‚è¯¥æ–¹æ³•åº”åœ¨ä¾èµ–æ³¨å…¥å®Œæˆåæ‰§è¡Œä»»ä½•åˆå§‹åŒ–é€»è¾‘ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import javax.annotation.PostConstruct;
@Component
public class CacheService {
@PostConstruct
public void initCache() {
System.out.println(&amp;#34;1. @PostConstruct: ç¼“å­˜é¢„çƒ­å®Œæˆï¼&amp;#34;);
// åˆå§‹åŒ–é€»è¾‘ï¼Œå¦‚åŠ è½½é…ç½®ã€å»ºç«‹æ•°æ®è¿æ¥ç­‰
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºJavaæ ‡å‡†ï¼Œä¸Springæ¡†æ¶&lt;strong&gt;è§£è€¦&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ–¹æ³•åå¯ä»»æ„ï¼Œä½†å¿…é¡»ä¸º&lt;strong&gt;æ— å‚&lt;/strong&gt;æ–¹æ³•ï¼Œè¿”å›ç±»å‹é€šå¸¸ä¸º &lt;code&gt;void&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;InitializingBean&lt;/code&gt;æ¥å£&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æ³•&lt;/strong&gt;ï¼šBean å®ç° &lt;code&gt;InitializingBean&lt;/code&gt;æ¥å£å¹¶é‡å†™ &lt;code&gt;afterPropertiesSet()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.factory.InitializingBean;
@Component
public class DatabaseConnector implements InitializingBean {
@Override
public void afterPropertiesSet() throws Exception {
System.out.println(&amp;#34;2. InitializingBean: æ•°æ®åº“è¿æ¥å·²å»ºç«‹ï¼&amp;#34;);
// åˆå§‹åŒ–é€»è¾‘ï¼Œå¦‚æ ¡éªŒæ³¨å…¥çš„å±æ€§ç­‰
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¾èµ–&lt;/strong&gt;Springæ¡†æ¶æ¥å£ï¼Œ&lt;strong&gt;ä¾µå…¥æ€§è¾ƒé«˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€‚ç”¨äºéœ€è¦ç¡®ä¿åˆå§‹åŒ–é€»è¾‘åœ¨ç‰¹å®šæ—¶æœºæ‰§è¡Œçš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;init-method&lt;/code&gt;é…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æ³•&lt;/strong&gt;ï¼šåœ¨é…ç½®ç±»ä¸­ä½¿ç”¨ &lt;code&gt;@Bean(initMethod = &amp;quot;...&amp;quot;)&lt;/code&gt;æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class AppConfig {
@Bean(initMethod = &amp;#34;setup&amp;#34;)
public ExternalService externalService() {
return new ExternalService();
}
}
public class ExternalService { // è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ— éœ€Springæ³¨è§£
public void setup() { // æ–¹æ³•åå¯ä»»æ„
System.out.println(&amp;#34;3. init-method: å¤–éƒ¨æœåŠ¡åˆå§‹åŒ–å®Œæˆï¼&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®Œå…¨è§£è€¦&lt;/strong&gt;ï¼ŒBeanç±»æœ¬èº«æ— éœ€ä»»ä½•Springä¾èµ–æˆ–æ³¨è§£ã€‚&lt;/li&gt;
&lt;li&gt;éå¸¸é€‚ç”¨äº&lt;strong&gt;åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ä¸­çš„ç±»&lt;/strong&gt;ï¼Œæˆ–è€…éœ€è¦é€šè¿‡å¤–éƒ¨é…ç½®çµæ´»æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ‰§è¡Œé¡ºåºèƒŒåçš„åŸç†"&gt;âš™ï¸ æ‰§è¡Œé¡ºåºèƒŒåçš„åŸç†
&lt;/h3&gt;&lt;p&gt;Spring Bean çš„åˆå§‹åŒ–è¿‡ç¨‹æ˜¯ç²¾å¿ƒè®¾è®¡çš„ã€‚ä¸Šè¿°é¡ºåºä¹‹æ‰€ä»¥å›ºå®šï¼Œæ˜¯å› ä¸ºå®ƒä»¬åœ¨ Spring å®¹å™¨çš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@PostConstruct&lt;/code&gt;&lt;/strong&gt;ï¼šç”± &lt;code&gt;CommonAnnotationBeanPostProcessor&lt;/code&gt;å¤„ç†ã€‚å®ƒæ˜¯ä¸€ä¸ª &lt;code&gt;BeanPostProcessor&lt;/code&gt;ï¼Œå…¶ &lt;code&gt;postProcessBeforeInitialization&lt;/code&gt;æ–¹æ³•ä¼šåœ¨&lt;strong&gt;åˆå§‹åŒ–é˜¶æ®µçš„æœ€å¼€å§‹&lt;/strong&gt;æ‰«æå¹¶æ‰§è¡Œæ‰€æœ‰å¸¦ &lt;code&gt;@PostConstruct&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;BeanPostProcessor&lt;/code&gt;å‰ç½®å¤„ç†å®Œæˆåï¼ŒSpring ä¼šæ£€æŸ¥ Bean æ˜¯å¦å®ç°äº† &lt;code&gt;InitializingBean&lt;/code&gt;æ¥å£ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥è°ƒç”¨å…¶ &lt;code&gt;afterPropertiesSet()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;init-method&lt;/code&gt;&lt;/strong&gt;ï¼šæœ€åï¼ŒSpring ä¼šæ£€æŸ¥ Bean çš„å®šä¹‰ï¼ˆ&lt;code&gt;BeanDefinition&lt;/code&gt;ï¼‰ä¸­æ˜¯å¦é…ç½®äº†è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦‚æœæœ‰åˆ™é€šè¿‡åå°„è°ƒç”¨å®ƒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š&lt;code&gt;BeanPostProcessor&lt;/code&gt;æ˜¯â€œå…¨å±€æ’ä»¶â€ï¼Œå®ƒçš„é€»è¾‘æœ€å…ˆæ‰§è¡Œã€‚ç„¶åæ‰æ˜¯å¤„ç† Bean è‡ªèº«çš„ç‰¹å®šæ¥å£ï¼ˆ&lt;code&gt;InitializingBean&lt;/code&gt;ï¼‰ï¼Œæœ€åæ˜¯å¤„ç†ç”¨æˆ·é€šè¿‡é…ç½®ä»»æ„æŒ‡å®šçš„æ–¹æ³•ï¼ˆ&lt;code&gt;init-method&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-é€‰æ‹©å»ºè®®ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ é€‰æ‹©å»ºè®®ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç°ä»£ Spring åº”ç”¨çš„é¦–é€‰æ˜¯ &lt;code&gt;@PostConstruct&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒä»£ç ç®€æ´ã€ä¾µå…¥æ€§ä½ï¼Œå¹¶ä¸”ç¬¦åˆ Java æ ‡å‡†ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;InitializingBean&lt;/code&gt;æ¥å£åœ¨ç°ä»£åº”ç”¨ä¸­å·²ä¸å¸¸ç”¨&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´ä»£ç ä¸ Spring æ¡†æ¶ç´§è€¦åˆã€‚é€šå¸¸ä»…åœ¨éœ€è¦ä¸æ—§ä»£ç å…¼å®¹æˆ–æ¡†æ¶æ˜ç¡®è¦æ±‚æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;init-method&lt;/code&gt;åœ¨ä¸æ— æ³•ä¿®æ”¹æºç çš„ç¬¬ä¸‰æ–¹åº“é…åˆæ—¶éå¸¸æœ‰ç”¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åœ¨åŒä¸€ä¸ª Bean ä¸­æ··åˆä½¿ç”¨å¤šç§æ–¹å¼&lt;/strong&gt;ï¼Œé™¤éä½ éå¸¸æ¸…æ¥šå®ƒä»¬ä¹‹é—´çš„é¡ºåºå’Œé€»è¾‘ï¼Œå¦åˆ™ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰åˆå§‹åŒ–æ–¹æ³•ä¸­éƒ½åº”å¦¥å–„å¤„ç†å¼‚å¸¸&lt;/strong&gt;ã€‚å¦‚æœåˆå§‹åŒ–å¤±è´¥ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œä¼šå¯¼è‡´ Bean åˆ›å»ºå¤±è´¥ï¼Œè¿›è€Œå¯èƒ½å½±å“åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„å¯åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é‡è¦æé†’"&gt;âš ï¸ é‡è¦æé†’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¾èµ–æ³¨å…¥å®Œæˆ&lt;/strong&gt;ï¼šæ‰€æœ‰è¿™äº›åˆå§‹åŒ–æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå…±åŒå‰æï¼š&lt;strong&gt;Bean çš„ä¾èµ–æ³¨å…¥ï¼ˆä¾‹å¦‚é€šè¿‡ &lt;code&gt;@Autowired&lt;/code&gt;æ³¨å…¥çš„å±æ€§ï¼‰å·²ç»å®Œæˆ&lt;/strong&gt;ã€‚ä½ å¯ä»¥åœ¨è¿™äº›æ–¹æ³•ä¸­å®‰å…¨åœ°ä½¿ç”¨å…¶ä»–ä¾èµ–çš„ Beanã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šè¦è­¦æƒ• Bean ä¹‹é—´çš„å¾ªç¯ä¾èµ–é—®é¢˜ã€‚å¦‚æœä¸¤ä¸ª Bean ç›¸äº’ä¾èµ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆå§‹åŒ–é€»è¾‘å‡ºç°æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œç”šè‡³é˜»æ­¢åº”ç”¨ä¸Šä¸‹æ–‡æ­£å¸¸å¯åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°ç†è§£ Spring Bean çš„åˆå§‹åŒ–é¡ºåºå’Œæœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="beanpostprocessor"&gt;BeanPostProcessor
&lt;/h2&gt;&lt;p&gt;BeanPostProcessor æ˜¯ Spring æ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸é‡è¦ä¸”å¼ºå¤§çš„æ‰©å±•æ¥å£ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ Spring å®¹å™¨åˆ›å»º Bean å®ä¾‹çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ Bean åˆå§‹åŒ–å‰åæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œå®ç°å¯¹ Bean çš„ä¿®æ”¹æˆ–å¢å¼ºã€‚ä¸‹é¢æˆ‘å°†ä»å¤šä¸ªæ–¹é¢ä¸ºä½ è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸ä½œç”¨"&gt;ğŸ§  æ ¸å¿ƒæ¦‚å¿µä¸ä½œç”¨
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;BeanPostProcessor&lt;/strong&gt; æ˜¯ Spring æä¾›çš„ä¸€ä¸ªæ ¸å¿ƒæ‰©å±•ç‚¹ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œ&lt;strong&gt;å¼€æ”¾-å°é—­åŸåˆ™&lt;/strong&gt;â€ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚å®ƒå…è®¸ä½ åœ¨ä¸ä¿®æ”¹ Spring æºç å’ŒåŸæœ‰ Bean å®šä¹‰çš„æƒ…å†µä¸‹ï¼Œä»‹å…¥ Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿›è¡Œå®šåˆ¶åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•&lt;/strong&gt;ï¼šè¯¥æ¥å£å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;postProcessBeforeInitialization(Object bean, String beanName)&lt;/code&gt;: åœ¨ Bean çš„&lt;strong&gt;åˆå§‹åŒ–æ–¹æ³•ï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;ã€&lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;æˆ–è‡ªå®šä¹‰çš„ &lt;code&gt;init-method&lt;/code&gt;ï¼‰ä¹‹å‰&lt;/strong&gt;è°ƒç”¨ã€‚å¸¸ç”¨äºæ‰§è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œå¦‚ä¿®æ”¹å±æ€§å€¼ã€èµ„æºæ³¨å…¥æˆ–æ ¡éªŒæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;postProcessAfterInitialization(Object bean, String beanName)&lt;/code&gt;: åœ¨ Bean çš„&lt;strong&gt;åˆå§‹åŒ–æ–¹æ³•ä¹‹å&lt;/strong&gt;è°ƒç”¨ã€‚é€šå¸¸ç”¨äºè¿”å›ä»£ç†å¯¹è±¡ï¼ˆå¦‚ AOP ä»£ç†ï¼‰æˆ–æ‰§è¡Œæœ€ç»ˆçš„åç½®å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡åˆè¡·&lt;/strong&gt;ï¼šBeanPostProcessor çš„è®¾è®¡ä½“ç°äº† Spring æ¡†æ¶çš„â€œ&lt;strong&gt;å¼€æ”¾å°é—­åŸåˆ™&lt;/strong&gt;â€ã€‚Spring å®¹å™¨è´Ÿè´£ Bean çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œä½†åŒæ—¶é€šè¿‡ BeanPostProcessor è¿™ç§æ‰©å±•ç‚¹ï¼Œè®©å¼€å‘è€…å¯ä»¥åœ¨ä¸ä¿®æ”¹ Spring æºç çš„æƒ…å†µä¸‹ï¼Œå®ç°å¯¹ Bean ç”Ÿå‘½å‘¨æœŸçš„è‡ªå®šä¹‰æ“ä½œï¼Œå¤§å¤§æå‡äº† Spring çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ‰§è¡Œæ—¶æœºä¸æµç¨‹"&gt;â° æ‰§è¡Œæ—¶æœºä¸æµç¨‹
&lt;/h3&gt;&lt;p&gt;BeanPostProcessor çš„æ‰§è¡ŒåµŒå…¥åœ¨ Bean çš„åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œå…¶æ•´ä½“æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ä¾‹åŒ– Bean&lt;/strong&gt;ï¼ˆé€šè¿‡æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¡«å…… Bean å±æ€§&lt;/strong&gt;ï¼ˆä¾èµ–æ³¨å…¥ï¼ŒPopulateï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BeanPostProcessor.postProcessBeforeInitialization()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;, &lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;, è‡ªå®šä¹‰ &lt;code&gt;init-method&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BeanPostProcessor.postProcessAfterInitialization()&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bean å‡†å¤‡å°±ç»ª&lt;/strong&gt;ï¼Œå¯ä½¿ç”¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Spring å®¹å™¨ä¼šéå†æ‰€æœ‰æ³¨å†Œçš„ &lt;code&gt;BeanPostProcessor&lt;/code&gt;ï¼Œå¹¶æŒ‰é¡ºåºä¾æ¬¡è°ƒç”¨å®ƒä»¬çš„å‰ç½®å’Œåç½®æ–¹æ³•ã€‚å¤šä¸ª &lt;code&gt;BeanPostProcessor&lt;/code&gt;å¯ä»¥é€šè¿‡å®ç° &lt;code&gt;Ordered&lt;/code&gt;æ¥å£æˆ–ä½¿ç”¨ &lt;code&gt;@Order&lt;/code&gt;æ³¨è§£æ¥æ§åˆ¶æ‰§è¡Œé¡ºåºã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§çš„å†…ç½®å®ç°"&gt;ğŸ”§ å¸¸è§çš„å†…ç½®å®ç°
&lt;/h3&gt;&lt;p&gt;Spring æ¡†æ¶å†…éƒ¨å¤§é‡ä½¿ç”¨äº† &lt;code&gt;BeanPostProcessor&lt;/code&gt;æ¥å®ç°å…¶æ ¸å¿ƒåŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°ç±»&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŠŸèƒ½&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ApplicationContextAwareProcessor&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç†å„ç§ &lt;code&gt;Aware&lt;/code&gt;æ¥å£ï¼ˆå¦‚ &lt;code&gt;ApplicationContextAware&lt;/code&gt;ï¼‰ï¼Œç”¨äºå‘ Bean æ³¨å…¥å®¹å™¨ä¸Šä¸‹æ–‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;InitDestroyAnnotationBeanPostProcessor&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç† &lt;code&gt;@PostConstruct&lt;/code&gt;å’Œ &lt;code&gt;@PreDestroy&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸæ³¨è§£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;AutowiredAnnotationBeanPostProcessor&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç† &lt;code&gt;@Autowired&lt;/code&gt;å’Œ &lt;code&gt;@Value&lt;/code&gt;æ³¨è§£ï¼Œå®ç°è‡ªåŠ¨ä¾èµ–æ³¨å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CommonAnnotationBeanPostProcessor&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç† JSR-250 æ³¨è§£ï¼ˆå¦‚ &lt;code&gt;@Resource&lt;/code&gt;ã€&lt;code&gt;@PostConstruct&lt;/code&gt;ã€&lt;code&gt;@PreDestroy&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;AbstractAutoProxyCreator&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;AOP è‡ªåŠ¨ä»£ç†åˆ›å»ºå™¨ï¼Œä¸º Bean åˆ›å»ºåŠ¨æ€ä»£ç†ï¼Œæ˜¯å®ç° Spring AOP çš„å…³é”®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•è‡ªå®šä¹‰-beanpostprocessor"&gt;ğŸ› ï¸ å¦‚ä½•è‡ªå®šä¹‰ BeanPostProcessor
&lt;/h3&gt;&lt;p&gt;å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ &lt;code&gt;BeanPostProcessor&lt;/code&gt;é€šå¸¸åªéœ€ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªç±»å®ç° &lt;code&gt;BeanPostProcessor&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å†™æ–¹æ³•&lt;/strong&gt;ï¼šæ ¹æ®éœ€æ±‚åœ¨ &lt;code&gt;postProcessBeforeInitialization&lt;/code&gt;æˆ– &lt;code&gt;postProcessAfterInitialization&lt;/code&gt;ä¸­ç¼–å†™é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å†Œåˆ°å®¹å™¨&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;@Component&lt;/code&gt;æ³¨è§£æˆ– &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•å°†å…¶æ³¨å†Œä¸º Spring Beanï¼ŒSpring å®¹å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶åº”ç”¨å®ƒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸‹é¢çš„ &lt;code&gt;BeanPostProcessor&lt;/code&gt;ä¼šå°†æ‰€æœ‰ä»¥ &amp;ldquo;user&amp;rdquo; å¼€å¤´çš„ Bean çš„ String ç±»å‹å±æ€§å€¼è½¬ä¸ºå¤§å†™ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.stereotype.Component;
import java.lang.reflect.Field;
@Component
public class UpperCaseBeanPostProcessor implements BeanPostProcessor {
@Override
public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
if (beanName.startsWith(&amp;#34;user&amp;#34;)) {
Field[] fields = bean.getClass().getDeclaredFields();
for (Field field : fields) {
if (field.getType() == String.class) {
try {
field.setAccessible(true);
Object value = field.get(bean);
if (value instanceof String) {
field.set(bean, ((String) value).toUpperCase());
}
} catch (Exception e) {
throw new BeansException(&amp;#34;Failed to process String field&amp;#34;, e);
}
}
}
}
return bean;
}
@Override
public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
return bean;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BeanPostProcessor&lt;/code&gt;çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AOP ä¸åŠ¨æ€ä»£ç†&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;postProcessAfterInitialization&lt;/code&gt;ä¸­ä¸ºç‰¹å®š Bean åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå®ç°æ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§ã€äº‹åŠ¡ç®¡ç†ç­‰åŠŸèƒ½ï¼ˆè¿™æ˜¯ Spring AOP çš„åº•å±‚åŸç†ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±æ€§å¤„ç†ä¸åŠ å¯†&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;postProcessBeforeInitialization&lt;/code&gt;ä¸­å¯¹ Bean çš„æ•æ„Ÿå±æ€§ï¼ˆå¦‚æ•°æ®åº“å¯†ç ï¼‰è¿›è¡Œè§£å¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰æ³¨è§£å¤„ç†&lt;/strong&gt;ï¼šè¯†åˆ« Bean ä¸Šçš„è‡ªå®šä¹‰æ³¨è§£ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼ˆå¦‚æ–¹æ³•çº§åˆ«çš„æƒé™æ£€æŸ¥æˆ–æ—¥å¿—è®°å½•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¾èµ–æ£€æŸ¥ä¸éªŒè¯&lt;/strong&gt;ï¼šåœ¨åˆå§‹åŒ–å‰åæ£€æŸ¥å¿…éœ€çš„ä¾èµ–æ˜¯å¦å·²æ³¨å…¥ï¼Œæˆ–éªŒè¯å±æ€§å€¼çš„åˆæ³•æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ³¨å…¥ä¸åˆå§‹åŒ–&lt;/strong&gt;ï¼šåœ¨åˆå§‹åŒ–åä¸º Bean åŠ¨æ€æ³¨å…¥æŸäº›èµ„æºæˆ–æ‰§è¡Œé¢å¤–çš„åˆå§‹åŒ–æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯¹æ‰€æœ‰ Bean ç”Ÿæ•ˆ&lt;/strong&gt;ï¼šè‡ªå®šä¹‰çš„ &lt;code&gt;BeanPostProcessor&lt;/code&gt;ä¼š&lt;strong&gt;å¯¹å®¹å™¨ä¸­æ‰€æœ‰çš„ Bean ç”Ÿæ•ˆ&lt;/strong&gt;ã€‚å› æ­¤ï¼Œåœ¨å¤„ç†æ—¶åº”é€šè¿‡ &lt;code&gt;beanName&lt;/code&gt;æˆ– &lt;code&gt;bean.getClass()&lt;/code&gt;è¿›è¡Œè¿‡æ»¤ï¼Œé¿å…ä¸å¿…è¦çš„å¤„ç†å½±å“æ€§èƒ½å’Œå‡ºç°æ„å¤–é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼š&lt;code&gt;BeanPostProcessor&lt;/code&gt;ä¼šåœ¨æ¯ä¸ª Bean çš„åˆ›å»ºè¿‡ç¨‹ä¸­éƒ½è¢«è°ƒç”¨ï¼Œå› æ­¤å…¶ä¸­çš„é€»è¾‘åº”&lt;strong&gt;å°½å¯èƒ½é«˜æ•ˆ&lt;/strong&gt;ï¼Œé¿å…å¤æ‚è€—æ—¶çš„æ“ä½œï¼Œä»¥å…æ‹–æ…¢åº”ç”¨å¯åŠ¨é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼šå¤šä¸ª &lt;code&gt;BeanPostProcessor&lt;/code&gt;çš„æ‰§è¡Œé¡ºåºå¾ˆé‡è¦ã€‚å¯ä»¥é€šè¿‡å®ç° &lt;code&gt;Ordered&lt;/code&gt;æ¥å£æˆ–ä½¿ç”¨ &lt;code&gt;@Order&lt;/code&gt;æ³¨è§£æ¥æ˜ç¡®æŒ‡å®šå…¶é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ BeanFactoryPostProcessor çš„åŒºåˆ«&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BeanPostProcessor&lt;/code&gt;ï¼šæ“ä½œå¯¹è±¡æ˜¯ &lt;strong&gt;Bean å®ä¾‹&lt;/strong&gt;ï¼Œåœ¨ Bean&lt;strong&gt;å®ä¾‹åŒ–å&lt;/strong&gt;ä»‹å…¥ç”Ÿå‘½å‘¨æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;ï¼šæ“ä½œå¯¹è±¡æ˜¯ &lt;strong&gt;BeanDefinition&lt;/strong&gt;ï¼ˆå…ƒæ•°æ®ï¼‰ï¼Œåœ¨ Bean&lt;strong&gt;å®ä¾‹åŒ–å‰&lt;/strong&gt;ä»‹å…¥ï¼Œç”¨äºä¿®æ”¹ Bean çš„å®šä¹‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-beanpostprocessor-ä¸å…¶å®ƒæ‰©å±•ç‚¹å¯¹æ¯”"&gt;ğŸ“Š BeanPostProcessor ä¸å…¶å®ƒæ‰©å±•ç‚¹å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´å…¨é¢åœ°ç†è§£ BeanPostProcessor åœ¨ Spring å®¹å™¨ä¸­çš„å®šä½ï¼Œä¸‹è¡¨å°†å…¶ä¸ä¸€äº›æ˜“æ··æ·†çš„æ¥å£è¿›è¡Œäº†å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§/æ¥å£&lt;/th&gt;
&lt;th&gt;BeanPostProcessor&lt;/th&gt;
&lt;th&gt;BeanFactoryPostProcessor&lt;/th&gt;
&lt;th&gt;InitializingBean / @PostConstruct&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å·²å®ä¾‹åŒ–çš„ &lt;strong&gt;Bean å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Bean çš„å…ƒæ•°æ® &lt;strong&gt;BeanDefinition&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Bean &lt;strong&gt;è‡ªèº«&lt;/strong&gt;çš„åˆå§‹åŒ–é€»è¾‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»‹å…¥æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Bean &lt;strong&gt;å®ä¾‹åŒ–å&lt;/strong&gt;ï¼Œåˆå§‹åŒ–å‰å&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰ BeanDefinition &lt;strong&gt;åŠ è½½å&lt;/strong&gt;ï¼Œå®ä¾‹åŒ–å‰&lt;/td&gt;
&lt;td&gt;Bean è‡ªèº«åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œæ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹/ä»£ç† Beanã€AOPã€é€šç”¨å¢å¼º&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹ Bean å®šä¹‰å±æ€§ã€å ä½ç¬¦æ›¿æ¢&lt;/td&gt;
&lt;td&gt;ç¼–å†™ Bean è‡ªèº«ç‰¹å®šçš„åˆå§‹åŒ–ä»£ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å½±å“æ‰€æœ‰ Bean&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;å¦ (åªå½±å“å®ç°æ¥å£/æ³¨è§£çš„ Bean)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;BeanPostProcessor æ˜¯ Spring æ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ‰©å±•ç‚¹ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ Bean ç”Ÿå‘½å‘¨æœŸçš„å…³é”®èŠ‚ç‚¹è¿›è¡Œè‡ªå®šä¹‰å¤„ç†ï¼Œä»è€Œå®ç°å„ç§é«˜çº§åŠŸèƒ½ã€‚é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œä½ å¯ä»¥ä¿®æ”¹ Bean çš„å±æ€§ã€åˆ›å»ºä»£ç†ã€å¤„ç†è‡ªå®šä¹‰æ³¨è§£ç­‰ï¼Œè€Œæ— éœ€ä¿®æ”¹åŸå§‹ Bean çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ BeanPostProcessorã€‚&lt;/p&gt;
&lt;h2 id="beanfactorypostprocessor"&gt;BeanFactoryPostProcessor
&lt;/h2&gt;&lt;p&gt;BeanFactoryPostProcessor æ˜¯ Spring æ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸å¼ºå¤§ä¸”å…³é”®çš„æ‰©å±•ç‚¹ï¼Œå®ƒå…è®¸ä½ åœ¨ Spring å®¹å™¨åŠ è½½äº† Bean çš„å®šä¹‰ï¼ˆBeanDefinitionï¼‰ä¹‹åï¼Œä½†åœ¨çœŸæ­£åˆ›å»º Bean å®ä¾‹&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼Œå¯¹ Bean çš„é…ç½®å…ƒæ•°æ®è¿›è¡Œä¿®æ”¹æˆ–å®šåˆ¶ã€‚è¿™ä¸ºæ¡†æ¶çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§æä¾›äº†å·¨å¤§ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¿«é€Ÿç†è§£å®ƒçš„æ ¸å¿ƒç‰¹è´¨ï¼Œç‰¹åˆ«æ˜¯ä¸å¦ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„æ¥å£ &lt;code&gt;BeanPostProcessor&lt;/code&gt;çš„åŒºåˆ«ï¼Œæˆ‘ä¸ºä½ å‡†å¤‡äº†ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;BeanFactoryPostProcessor&lt;/th&gt;
&lt;th&gt;BeanPostProcessor&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Bean çš„å®šä¹‰ä¿¡æ¯&lt;/strong&gt; (&lt;code&gt;BeanDefinition&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Bean çš„å®ä¾‹&lt;/strong&gt; (å¯¹è±¡æœ¬èº«)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰ &lt;code&gt;BeanDefinition&lt;/code&gt;&lt;strong&gt;åŠ è½½å&lt;/strong&gt;ï¼ŒBean&lt;strong&gt;å®ä¾‹åŒ–ä¹‹å‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ª Bean &lt;strong&gt;å®ä¾‹åŒ–ä¹‹å&lt;/strong&gt;ï¼Œåˆå§‹åŒ–&lt;strong&gt;å‰å&lt;/strong&gt; (&lt;code&gt;@PostConstruct&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹ Bean çš„å…ƒä¿¡æ¯ï¼ˆå¦‚ç±»åã€å±æ€§å€¼ã€ä½œç”¨åŸŸï¼‰ã€åŠ¨æ€æ³¨å†Œæˆ–ç§»é™¤ Bean å®šä¹‰&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹æˆ–å¢å¼º Bean å®ä¾‹æœ¬èº«ï¼ˆå¦‚ AOP ä»£ç†ã€å±æ€§æ³¨å…¥ã€æ—¥å¿—å¢å¼ºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å½±å“å®¹å™¨ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt;ï¼Œå¯ä»¥æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ &lt;code&gt;BeanDefinition&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;å¦&lt;/strong&gt;ï¼Œåªå½±å“ Bean å®ä¾‹çš„è¡Œä¸ºæˆ–å±æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å±æ€§å ä½ç¬¦è§£æã€åŠ¨æ€ Bean æ³¨å†Œã€æ¡ä»¶åŒ–é…ç½®ã€ä¿®æ”¹ Bean å±æ€§é»˜è®¤å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@Autowired&lt;/code&gt;æ³¨å…¥ã€AOP ä»£ç†ã€&lt;code&gt;@PostConstruct&lt;/code&gt;å¤„ç†ã€æ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶ä¸æ‰§è¡Œæ—¶æœº"&gt;âš™ï¸ æ ¸å¿ƒæœºåˆ¶ä¸æ‰§è¡Œæ—¶æœº
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;æ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Spring å®¹å™¨ï¼ˆé€šå¸¸æ˜¯ &lt;code&gt;ApplicationContext&lt;/code&gt;ï¼‰åœ¨å¯åŠ¨æ—¶ï¼Œä¼šç»å†ä»¥ä¸‹å‡ ä¸ªå…³é”®é˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŠ è½½é…ç½®ä¿¡æ¯&lt;/strong&gt;ï¼ˆXMLã€æ³¨è§£ã€Java Configï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£æé…ç½®&lt;/strong&gt;ï¼Œå°†å…¶è½¬æ¢ä¸ºå†…éƒ¨çš„ &lt;code&gt;BeanDefinition&lt;/code&gt;å¯¹è±¡ï¼ˆå³ Bean çš„å®šä¹‰å…ƒæ•°æ®ï¼‰ï¼Œå¹¶æ³¨å†Œåˆ° &lt;code&gt;BeanFactory&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚åœ¨æ‰€æœ‰ &lt;code&gt;BeanDefinition&lt;/code&gt;è¢«åŠ è½½åˆ°å·¥å‚ä¹‹åï¼Œä½†åœ¨ä»»ä½• Bean è¢«å®ä¾‹åŒ–ä¹‹å‰ï¼ŒSpring ä¼š&lt;strong&gt;è‡ªåŠ¨æ£€æµ‹å¹¶è°ƒç”¨æ‰€æœ‰å®ç°äº† &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;æ¥å£çš„ Bean çš„ &lt;code&gt;postProcessBeanFactory&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ä¾‹åŒ–å¹¶åˆå§‹åŒ– Bean&lt;/strong&gt;ï¼šæ‰§è¡Œå®Œæ‰€æœ‰ &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;åï¼Œå®¹å™¨æ‰ä¼šå¼€å§‹åˆ›å»ºéå»¶è¿ŸåŠ è½½çš„å•ä¾‹ Beanã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™å°±æ„å‘³ç€ï¼Œ&lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;æ‹¥æœ‰åœ¨ Beanâ€œè¯ç”Ÿâ€å‰ä¿®æ”¹å…¶â€œè“å›¾â€ï¼ˆ&lt;code&gt;BeanDefinition&lt;/code&gt;ï¼‰çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§çš„å†…ç½®å®ç°-1"&gt;ğŸ› ï¸ å¸¸è§çš„å†…ç½®å®ç°
&lt;/h3&gt;&lt;p&gt;Spring æ¡†æ¶æœ¬èº«å°±å¤§é‡ä½¿ç”¨äº† &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;æ¥å®ç°å…¶æ ¸å¿ƒåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PropertySourcesPlaceholderConfigurer&lt;/code&gt;&lt;/strong&gt; / &lt;strong&gt;&lt;code&gt;PropertyPlaceholderConfigurer&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„ä¾‹å­ã€‚å®ƒè´Ÿè´£å¤„ç†é…ç½®æ–‡ä»¶ä¸­çš„å ä½ç¬¦ï¼ˆå¦‚ &lt;code&gt;${jdbc.url}&lt;/code&gt;ï¼‰ï¼Œåœ¨ Bean å±æ€§æ³¨å…¥å‰ï¼Œå°†è¿™äº›å ä½ç¬¦æ›¿æ¢ä¸ºå®é™…é…ç½®çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ConfigurationClassPostProcessor&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯ Spring æ³¨è§£é©±åŠ¨çš„æ ¸å¿ƒã€‚å®ƒè´Ÿè´£è§£æ &lt;code&gt;@Configuration&lt;/code&gt;é…ç½®ç±»ã€å¤„ç† &lt;code&gt;@ComponentScan&lt;/code&gt;ï¼ˆæ‰«ææ³¨è§£ï¼‰ã€&lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ç­‰ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯è½¬æ¢ä¸ºæ ‡å‡†çš„ &lt;code&gt;BeanDefinition&lt;/code&gt;æ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;MapperScannerConfigurer&lt;/code&gt;&lt;/strong&gt;ï¼ˆMyBatis-Spring æ•´åˆï¼‰ï¼šç”¨äºæ‰«ææŒ‡å®šçš„åŒ…è·¯å¾„ï¼Œå°† MyBatis çš„ Mapper æ¥å£åŠ¨æ€æ³¨å†Œä¸º Spring çš„ Beanã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•è‡ªå®šä¹‰-beanfactorypostprocessor"&gt;ğŸ”§ å¦‚ä½•è‡ªå®šä¹‰ BeanFactoryPostProcessor
&lt;/h3&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;éå¸¸ç®€å•ï¼Œåªéœ€ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªç±»å®ç° &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å†™æ–¹æ³•&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;postProcessBeanFactory&lt;/code&gt;æ–¹æ³•ä¸­ç¼–å†™ä½ çš„è‡ªå®šä¹‰é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å†Œåˆ°å®¹å™¨&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;@Component&lt;/code&gt;æ³¨è§£æˆ– &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•å°†å…¶æ³¨å†Œä¸º Spring Beanã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="ç¤ºä¾‹ä¿®æ”¹å·²æ³¨å†Œ-bean-çš„å®šä¹‰"&gt;ç¤ºä¾‹ï¼šä¿®æ”¹å·²æ³¨å†Œ Bean çš„å®šä¹‰
&lt;/h4&gt;&lt;p&gt;ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•å°†ä¸€ä¸ªå·²å®šä¹‰çš„ Bean çš„é»˜è®¤ä½œç”¨åŸŸä¿®æ”¹ä¸ºåŸå‹ï¼ˆprototypeï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.beans.factory.config.BeanFactoryPostProcessor;
import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;
import org.springframework.stereotype.Component;
@Component
public class MyBeanFactoryPostProcessor implements BeanFactoryPostProcessor {
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
// é€šè¿‡åç§°è·å–ç‰¹å®šBeançš„å®šä¹‰
BeanDefinition bd = beanFactory.getBeanDefinition(&amp;#34;myService&amp;#34;);
// å°†å…¶ä½œç”¨åŸŸä¿®æ”¹ä¸º prototype
bd.setScope(BeanDefinition.SCOPE_PROTOTYPE);
// ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹å…¶ä»–å±æ€§ï¼Œä¾‹å¦‚ï¼š
// bd.getPropertyValues().add(&amp;#34;defaultName&amp;#34;, &amp;#34;Custom Default&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ç¤ºä¾‹åŠ¨æ€æ³¨å†Œæ–°çš„-beandefinition"&gt;ç¤ºä¾‹ï¼šåŠ¨æ€æ³¨å†Œæ–°çš„ BeanDefinition
&lt;/h4&gt;&lt;p&gt;ä½ ç”šè‡³å¯ä»¥å®Œå…¨åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®šä¹‰å¹¶æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.factory.config.BeanFactoryPostProcessor;
import org.springframework.beans.factory.support.BeanDefinitionBuilder;
import org.springframework.beans.factory.support.BeanDefinitionRegistry;
import org.springframework.beans.factory.support.GenericBeanDefinition;
public class DynamicBeanRegistrationPostProcessor implements BeanFactoryPostProcessor {
@Override
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {
// å°† beanFactory å‘ä¸‹è½¬å‹ä¸º BeanDefinitionRegistryï¼Œå› ä¸ºå®ƒæä¾›äº†æ³¨å†Œæ–°å®šä¹‰çš„æ–¹æ³•
if (beanFactory instanceof BeanDefinitionRegistry) {
BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;
// ä½¿ç”¨ Builder åˆ›å»ºæ–°çš„ BeanDefinition
GenericBeanDefinition newBeanDef = (GenericBeanDefinition) BeanDefinitionBuilder
.genericBeanDefinition(MyDynamicService.class) // æŒ‡å®šBeançš„Class
.setScope(BeanDefinition.SCOPE_SINGLETON) // è®¾ç½®ä½œç”¨åŸŸ
.addPropertyValue(&amp;#34;url&amp;#34;, &amp;#34;https://example.com&amp;#34;) // è®¾ç½®å±æ€§å€¼
.getBeanDefinition();
// å°†æ–°å®šä¹‰æ³¨å†Œåˆ°å®¹å™¨ä¸­
registry.registerBeanDefinition(&amp;#34;myDynamicService&amp;#34;, newBeanDef);
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼šä½ å¯ä»¥é€šè¿‡å®ç° &lt;code&gt;Ordered&lt;/code&gt;æ¥å£æˆ–ä½¿ç”¨ &lt;code&gt;@Order&lt;/code&gt;æ³¨è§£æ¥æ§åˆ¶å¤šä¸ª &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;çš„æ‰§è¡Œé¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è¿‡æ—©å®ä¾‹åŒ–&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;postProcessBeanFactory&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œ&lt;strong&gt;ä¸è¦ç¼–å†™ä¼šå¯¼è‡´ Bean è¢«æå‰å®ä¾‹åŒ–çš„ä»£ç &lt;/strong&gt;ï¼ˆä¾‹å¦‚ç›´æ¥è°ƒç”¨ &lt;code&gt;beanFactory.getBean(...)&lt;/code&gt;ï¼‰ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šç ´åå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¹¶å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;BeanDefinitionRegistryPostProcessor&lt;/code&gt;çš„å…³ç³»&lt;/strong&gt;ï¼š&lt;code&gt;BeanDefinitionRegistryPostProcessor&lt;/code&gt;æ˜¯ &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;çš„ä¸€ä¸ªå­æ¥å£ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ›´æ—©çš„æ‰©å±•ç‚¹ &lt;code&gt;postProcessBeanDefinitionRegistry&lt;/code&gt;ï¼Œå…è®¸ä½ åœ¨&lt;strong&gt;å¸¸è§„çš„ &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;æ‰§è¡Œä¹‹å‰&lt;/strong&gt;å°±æ“ä½œ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;ï¼Œéå¸¸é€‚åˆè¿›è¡Œå¤§é‡çš„åŠ¨æ€ Bean å®šä¹‰æ³¨å†Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-1"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;è‡ªå®šä¹‰ &lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;çš„ç”¨é€”éå¸¸å¹¿æ³›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒæ•æ„Ÿçš„é…ç½®&lt;/strong&gt;ï¼šæ ¹æ®ä¸åŒçš„æ¿€æ´» profileï¼ˆå¦‚ dev, test, prodï¼‰ï¼ŒåŠ¨æ€ä¿®æ”¹ Bean çš„å±æ€§é»˜è®¤å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶åŒ–æ³¨å†Œ Bean&lt;/strong&gt;ï¼šæ ¹æ®æŸä¸ªæ¡ä»¶ï¼ˆå¦‚ç³»ç»Ÿå±æ€§ã€ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŸä¸ªç±»ï¼‰æ¥å†³å®šæ˜¯å¦æ³¨å†ŒæŸä¸ª Beanã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†æˆç¬¬ä¸‰æ–¹åº“&lt;/strong&gt;ï¼šä¸ºé‚£äº›æ²¡æœ‰æä¾› Spring æ³¨è§£çš„ç±»åŠ¨æ€åˆ›å»ºå’Œæ³¨å†Œ &lt;code&gt;BeanDefinition&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å¯†å±æ€§è§£å¯†&lt;/strong&gt;ï¼šåœ¨å±æ€§æ³¨å…¥å‰ï¼Œè¯†åˆ«å¹¶è§£å¯†é…ç½®ä¸­ç»è¿‡åŠ å¯†çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“å¯†ç ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ BeanFactoryPostProcessor åœ¨ Spring æ¡†æ¶ä¸­çš„ä½œç”¨å’Œå¨åŠ›ã€‚&lt;/p&gt;
&lt;h2 id="aware-æ¥å£"&gt;Aware æ¥å£
&lt;/h2&gt;&lt;p&gt;Spring çš„ &lt;strong&gt;Aware æ¥å£&lt;/strong&gt;æ˜¯ä¸€ç»„éå¸¸é‡è¦çš„&lt;strong&gt;æ ‡è®°æ¥å£ï¼ˆMarker Interfacesï¼‰&lt;/strong&gt;ï¼Œå®ƒä»¬å…è®¸ Bean åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­**&amp;ldquo;æ„ŸçŸ¥&amp;quot;å¹¶è·å– Spring å®¹å™¨æä¾›çš„ç‰¹å®šèµ„æºæˆ–ä¸Šä¸‹æ–‡ä¿¡æ¯**ã€‚è¿™ç›¸å½“äºç»™ Bean èµ‹äºˆäº†ä¸å®¹å™¨ç›´æ¥äº¤äº’çš„&amp;quot;è¶…èƒ½åŠ›&amp;rdquo;ï¼Œä½¿å…¶ä¸å†æ˜¯ä¸€ä¸ªè¢«åŠ¨çš„å—ç®¡å¯¹è±¡ï¼Œè€Œèƒ½ä¸»åŠ¨äº†è§£æ‰€åœ¨ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿäº†è§£ï¼Œå…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“ä¸€äº›å¸¸è§çš„ Aware æ¥å£åŠå…¶æ ¸å¿ƒä½œç”¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¥å£åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;th&gt;å¯è·å–çš„èµ„æºæˆ–ä¿¡æ¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;BeanNameAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥è‡ªå·±åœ¨å®¹å™¨ä¸­çš„åç§°&lt;/td&gt;
&lt;td&gt;Bean åœ¨å®¹å™¨ä¸­çš„åç§° (String)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;BeanFactoryAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥åº•å±‚çš„ Bean å·¥å‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BeanFactory&lt;/code&gt;å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ApplicationContextAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥åº”ç”¨ä¸Šä¸‹æ–‡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EnvironmentAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥ç¯å¢ƒé…ç½®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Environment&lt;/code&gt;å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ResourceLoaderAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥èµ„æºåŠ è½½å™¨&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ResourceLoader&lt;/code&gt;å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ApplicationEventPublisherAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥äº‹ä»¶å‘å¸ƒå™¨&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ApplicationEventPublisher&lt;/code&gt;å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MessageSourceAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®© Bean æ„ŸçŸ¥å›½é™…åŒ–æ¶ˆæ¯æº&lt;/td&gt;
&lt;td&gt;&lt;code&gt;MessageSource&lt;/code&gt;å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ‰§è¡Œæ—¶æœºä¸å·¥ä½œåŸç†"&gt;âš™ï¸ æ‰§è¡Œæ—¶æœºä¸å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;Spring å®¹å™¨åœ¨åˆ›å»º Bean çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨&lt;strong&gt;å±æ€§æ³¨å…¥ä¹‹åã€åˆå§‹åŒ–å›è°ƒï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;ï¼‰ä¹‹å‰&lt;/strong&gt;ï¼Œæ£€æŸ¥ Bean æ˜¯å¦å®ç°äº†ä»»ä½• Aware æ¥å£ã€‚å¦‚æœå®ç°äº†ï¼Œå®¹å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„ setter æ–¹æ³•ï¼Œå°†ç›¸å…³çš„èµ„æºæˆ–ä¿¡æ¯æ³¨å…¥åˆ° Bean ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ç”± Spring çš„ &lt;strong&gt;&lt;code&gt;BeanPostProcessor&lt;/code&gt;&lt;/strong&gt; å®ç°ï¼ˆä¾‹å¦‚ &lt;code&gt;ApplicationContextAwareProcessor&lt;/code&gt;ï¼‰æ¥å®Œæˆçš„ã€‚è¿™äº›åå¤„ç†å™¨ä¼šæ‹¦æˆª Bean çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œå¹¶è´Ÿè´£è°ƒç”¨ç›¸åº”çš„ Aware æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ç”Ÿå‘½å‘¨æœŸç®€è¦é¡ºåºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Bean å®ä¾‹åŒ–ï¼ˆé€šè¿‡æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•ï¼‰&lt;/li&gt;
&lt;li&gt;å±æ€§å¡«å……ï¼ˆä¾èµ–æ³¨å…¥ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Aware æ¥å£å›è°ƒ&lt;/strong&gt;ï¼ˆæœ¬æ–‡é‡ç‚¹ï¼‰&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–æ–¹æ³•ï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;ã€&lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;Bean å‡†å¤‡å°±ç»ª&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å¸¸è§-aware-æ¥å£è¯¦è§£"&gt;ğŸ› ï¸ å¸¸è§ Aware æ¥å£è¯¦è§£
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BeanNameAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…è®¸ Bean è·å–å…¶åœ¨ Spring å®¹å™¨ä¸­çš„åç§°ï¼ˆå³åœ¨é…ç½®æ–‡ä»¶æˆ–æ³¨è§£ä¸­å®šä¹‰çš„ Bean IDæˆ–åç§°ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.factory.BeanNameAware;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements BeanNameAware {
private String beanName;
@Override
public void setBeanName(String name) {
this.beanName = name; // å®¹å™¨ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•å¹¶ä¼ å…¥Beançš„åç§°
System.out.println(&amp;#34;My bean name is: &amp;#34; + beanName);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæ—¥å¿—è®°å½•ã€ç›‘æ§ï¼Œæˆ–åœ¨éœ€è¦æ ¹æ® Bean åç§°æ‰§è¡Œç‰¹å®šé€»è¾‘æ—¶ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;BeanFactoryAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…è®¸ Bean è·å–å¯¹ &lt;strong&gt;&lt;code&gt;BeanFactory&lt;/code&gt;&lt;/strong&gt; çš„å¼•ç”¨ï¼Œä»è€Œå¯ä»¥åŠ¨æ€åœ°è·å–å…¶ä»– Bean æˆ–æŸ¥è¯¢å®¹å™¨ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements BeanFactoryAware {
private BeanFactory beanFactory;
@Override
public void setBeanFactory(BeanFactory beanFactory) {
this.beanFactory = beanFactory;
}
public void useOtherBean() {
// åŠ¨æ€è·å–å…¶ä»–Bean
AnotherBean otherBean = beanFactory.getBean(AnotherBean.class);
otherBean.doSomething();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶åŠ¨æ€åŠ è½½ä¸åŒ Bean å®ç°çš„æ’ä»¶åŒ–æ¶æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ApplicationContextAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨çš„ Aware æ¥å£ä¹‹ä¸€ã€‚å®ƒå…è®¸ Bean è·å–å¯¹ &lt;strong&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;&lt;/strong&gt; çš„å¼•ç”¨ï¼Œä»è€Œå¯ä»¥è®¿é—®å®¹å™¨çš„å‡ ä¹æ‰€æœ‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements ApplicationContextAware {
private ApplicationContext applicationContext;
@Override
public void setApplicationContext(ApplicationContext applicationContext) {
this.applicationContext = applicationContext;
}
// è·å–å…¶ä»–Bean
public void getAnotherBean() {
AnotherBean otherBean = applicationContext.getBean(AnotherBean.class);
}
// å‘å¸ƒåº”ç”¨äº‹ä»¶
public void publishEvent() {
applicationContext.publishEvent(new MyCustomEvent(this, &amp;#34;Event Data&amp;#34;));
}
// è·å–ç¯å¢ƒå±æ€§
public String getProperty(String key) {
return applicationContext.getEnvironment().getProperty(key);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šäº‹ä»¶å‘å¸ƒã€åŠ¨æ€è·å– Beanã€è®¿é—®ç¯å¢ƒå±æ€§æˆ–èµ„æºæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;EnvironmentAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…è®¸ Bean è·å– &lt;strong&gt;&lt;code&gt;Environment&lt;/code&gt;&lt;/strong&gt; å¯¹è±¡ï¼Œç”¨äºè®¿é—®é…ç½®å±æ€§ã€ç¯å¢ƒå˜é‡ç­‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.context.EnvironmentAware;
import org.springframework.core.env.Environment;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements EnvironmentAware {
private Environment environment;
@Override
public void setEnvironment(Environment environment) {
this.environment = environment;
}
public String getConfigValue(String key) {
return environment.getProperty(key);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦è¯»å–é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;application.properties&lt;/code&gt;ï¼‰ä¸­çš„å±æ€§å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ResourceLoaderAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…è®¸ Bean è·å– &lt;strong&gt;&lt;code&gt;ResourceLoader&lt;/code&gt;&lt;/strong&gt; å¯¹è±¡ï¼Œç”¨äºåŠ è½½ç±»è·¯å¾„æˆ–æ–‡ä»¶ç³»ç»Ÿèµ„æºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.context.ResourceLoaderAware;
import org.springframework.core.io.Resource;
import org.springframework.core.io.ResourceLoader;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements ResourceLoaderAware {
private ResourceLoader resourceLoader;
@Override
public void setResourceLoader(ResourceLoader resourceLoader) {
this.resourceLoader = resourceLoader;
}
public void loadResource() {
Resource resource = resourceLoader.getResource(&amp;#34;classpath:config.json&amp;#34;);
// ä½¿ç”¨èµ„æº...
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šåŠ è½½æ¨¡æ¿æ–‡ä»¶ã€é…ç½®æ–‡ä»¶æˆ–å…¶ä»–å¤–éƒ¨èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ApplicationEventPublisherAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…è®¸ Bean è·å– &lt;strong&gt;&lt;code&gt;ApplicationEventPublisher&lt;/code&gt;&lt;/strong&gt; å¯¹è±¡ï¼Œç”¨äºå‘å¸ƒåº”ç”¨äº‹ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.context.ApplicationEventPublisher;
import org.springframework.context.ApplicationEventPublisherAware;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements ApplicationEventPublisherAware {
private ApplicationEventPublisher eventPublisher;
@Override
public void setApplicationEventPublisher(ApplicationEventPublisher eventPublisher) {
this.eventPublisher = eventPublisher;
}
public void publishEvent() {
eventPublisher.publishEvent(new MyCustomEvent(this, &amp;#34;Something happened!&amp;#34;));
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå®ç°äº‹ä»¶é©±åŠ¨æ¶æ„ä¸­çš„äº‹ä»¶å‘å¸ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MessageSourceAware&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…è®¸ Bean è·å– &lt;strong&gt;&lt;code&gt;MessageSource&lt;/code&gt;&lt;/strong&gt; å¯¹è±¡ï¼Œç”¨äºæ”¯æŒå›½é™…åŒ–æ¶ˆæ¯å¤„ç†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.context.MessageSource;
import org.springframework.context.MessageSourceAware;
import org.springframework.stereotype.Component;
@Component
public class MyBean implements MessageSourceAware {
private MessageSource messageSource;
@Override
public void setMessageSource(MessageSource messageSource) {
this.messageSource = messageSource;
}
public String getMessage(String code, Object[] args, Locale locale) {
return messageSource.getMessage(code, args, locale);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦æ”¯æŒå›½é™…åŒ–çš„åº”ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ï¼Œé¿å…è¿‡åº¦è€¦åˆ&lt;/strong&gt;ï¼šAware æ¥å£è™½ç„¶å¼ºå¤§ï¼Œä½†ä¼šè®©ä½ çš„ä»£ç ä¸ Spring æ¡†æ¶ç´§å¯†è€¦åˆï¼Œé™ä½å¯æµ‹è¯•æ€§å’Œå¯ç§»æ¤æ€§ã€‚&lt;strong&gt;åº”ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ä¾èµ–æ³¨å…¥&lt;/strong&gt;ï¼ˆ&lt;code&gt;@Autowired&lt;/code&gt;ï¼‰ï¼Œåªæœ‰åœ¨ä¾èµ–æ³¨å…¥æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶æ‰è€ƒè™‘ä½¿ç”¨ Aware æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šAware æ¥å£çš„æ–¹æ³•è°ƒç”¨å‘ç”Ÿåœ¨ Bean ç”Ÿå‘½å‘¨æœŸçš„ç‰¹å®šé˜¶æ®µï¼ˆå±æ€§æ³¨å…¥ä¹‹åï¼Œåˆå§‹åŒ–å›è°ƒä¹‹å‰ï¼‰ï¼Œç¡®ä¿åœ¨ä½¿ç”¨æ³¨å…¥çš„èµ„æºæ—¶å®ƒä»¬å·²ç»å‡†å¤‡å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶éæ‰€æœ‰ Aware æ¥å£éƒ½éœ€å®ç°&lt;/strong&gt;ï¼šæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„ Aware æ¥å£ï¼Œä¸éœ€è¦å®ç°æ‰€æœ‰æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¯¹äº &lt;code&gt;ApplicationContextAware&lt;/code&gt;ï¼Œè®¸å¤šåŠŸèƒ½å¯ä»¥é€šè¿‡ç›´æ¥æ³¨å…¥ç‰¹å®šå¯¹è±¡å®ç°ï¼ˆå¦‚ç›´æ¥æ³¨å…¥ &lt;code&gt;Environment&lt;/code&gt;ã€&lt;code&gt;ResourceLoader&lt;/code&gt;æˆ– &lt;code&gt;ApplicationEventPublisher&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº &lt;code&gt;BeanFactoryAware&lt;/code&gt;ï¼ŒåŠ¨æ€è·å– Bean çš„éœ€æ±‚é€šå¸¸å¯ä»¥é€šè¿‡ &lt;code&gt;ObjectProvider&lt;/code&gt;æˆ– &lt;code&gt;@Lazy&lt;/code&gt;æ³¨è§£æ›´å¥½åœ°è§£å†³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Spring çš„ Aware æ¥å£æä¾›äº†ä¸€ç§è®© Bean ä¸å®¹å™¨äº¤äº’çš„å¼ºå¤§æœºåˆ¶ï¼Œèµ‹äºˆäº† Bean æ›´é«˜çš„çµæ´»æ€§å’Œä¸»åŠ¨æ€§ã€‚å®ƒä»¬å°±åƒæ˜¯ä¸º Bean å¼€å¯çš„&amp;quot;ä¸Šå¸è§†è§’&amp;quot;ï¼Œä½¿å…¶èƒ½å¤Ÿæ„ŸçŸ¥å¹¶åˆ©ç”¨å®¹å™¨çš„å„ç§æœåŠ¡å’Œèµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œæ­£å¦‚èœ˜è››ä¾ çš„å”å”æ‰€è¯´ï¼š&amp;ldquo;èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚&amp;rdquo; è™½ç„¶ Aware æ¥å£åŠŸèƒ½å¼ºå¤§ï¼Œä½†åº”å½“&lt;strong&gt;è°¨æ…ä¸”æœ‰èŠ‚åˆ¶åœ°ä½¿ç”¨&lt;/strong&gt;ã€‚åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œä¼ ç»Ÿçš„ä¾èµ–æ³¨å…¥ä»ç„¶æ˜¯æ›´ç®€æ´ã€æ›´è§£è€¦çš„é€‰æ‹©ã€‚åªæœ‰å½“æ ‡å‡†ä¾èµ–æ³¨å…¥æ— æ³•æ»¡è¶³ä½ çš„ç‰¹å®šéœ€æ±‚æ—¶ï¼ŒAware æ¥å£æ‰æ˜¯ä½ è¯¥æå‡ºçš„é‚£æŠŠ&amp;quot;ç‘å£«å†›åˆ€&amp;quot;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Spring çš„ Aware æ¥å£ã€‚&lt;/p&gt;
&lt;h2 id="applicationcontextaware"&gt;ApplicationContextAware
&lt;/h2&gt;&lt;p&gt;ApplicationContextAware æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªå…³é”®æ‰©å±•æ¥å£ï¼Œå®ƒå…è®¸ Bean &lt;strong&gt;è·å–åˆ° Spring å®¹å™¨çš„å¼•ç”¨&lt;/strong&gt;ï¼Œä»è€Œèƒ½å¤Ÿä¸å®¹å™¨è¿›è¡Œäº¤äº’ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒçš„å·¥ä½œåŸç†ã€ä½¿ç”¨æ–¹æ³•å’Œé€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸ä½œç”¨-1"&gt;ğŸ§  æ ¸å¿ƒæ¦‚å¿µä¸ä½œç”¨
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ApplicationContextAware&lt;/strong&gt; æ˜¯ Spring ä¼—å¤š &lt;code&gt;Aware&lt;/code&gt;æ¥å£ä¸­çš„ä¸€ç§ï¼Œå…¶æ ¸å¿ƒä½œç”¨æ˜¯&lt;strong&gt;è®© Bean æ„ŸçŸ¥åˆ° Spring å®¹å™¨çš„å­˜åœ¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•&lt;/strong&gt;ï¼šè¯¥æ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void setApplicationContext(ApplicationContext applicationContext) throws BeansException;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾è®¡åˆè¡·&lt;/strong&gt;ï¼šå½“ä¸€ä¸ª Bean å®ç°äº† &lt;code&gt;ApplicationContextAware&lt;/code&gt;æ¥å£åï¼ŒSpring å®¹å™¨ä¼šåœ¨è¯¥ Bean çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œ&lt;strong&gt;è‡ªåŠ¨è°ƒç”¨&lt;/strong&gt; &lt;code&gt;setApplicationContext&lt;/code&gt;æ–¹æ³•ï¼Œå¹¶å°†å½“å‰å®¹å™¨çš„å¼•ç”¨ï¼ˆ&lt;code&gt;ApplicationContext&lt;/code&gt;å¯¹è±¡ï¼‰ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚è¿™æ ·ï¼Œè¯¥ Bean å°±è·å¾—äº†ä¸ Spring å®¹å™¨äº¤äº’çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸æ‰§è¡Œæ—¶æœº"&gt;âš™ï¸ å·¥ä½œåŸç†ä¸æ‰§è¡Œæ—¶æœº
&lt;/h3&gt;&lt;p&gt;Spring å®¹å™¨é€šè¿‡ä¸€ä¸ªåä¸º &lt;strong&gt;&lt;code&gt;ApplicationContextAwareProcessor&lt;/code&gt;&lt;/strong&gt; çš„ &lt;strong&gt;&lt;code&gt;BeanPostProcessor&lt;/code&gt;&lt;/strong&gt; æ¥å¤„ç†æ‰€æœ‰ &lt;code&gt;Aware&lt;/code&gt;æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ‰§è¡Œæ—¶æœºåµŒå…¥åœ¨ Bean çš„åˆ›å»ºç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ä¾‹åŒ– Bean&lt;/strong&gt;ï¼ˆé€šè¿‡æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¡«å…… Bean å±æ€§&lt;/strong&gt;ï¼ˆä¾èµ–æ³¨å…¥ï¼ŒPopulateï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç† Aware æ¥å£&lt;/strong&gt;ï¼š&lt;code&gt;ApplicationContextAwareProcessor&lt;/code&gt;ä¼šæ£€æµ‹å½“å‰ Bean æ˜¯å¦å®ç°äº† &lt;code&gt;ApplicationContextAware&lt;/code&gt;ç­‰æ¥å£ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨ç›¸åº”çš„ &lt;code&gt;setApplicationContext&lt;/code&gt;æ–¹æ³•ï¼Œå°† &lt;code&gt;ApplicationContext&lt;/code&gt;æ³¨å…¥åˆ° Bean ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;, &lt;code&gt;InitializingBean.afterPropertiesSet()&lt;/code&gt;, è‡ªå®šä¹‰ &lt;code&gt;init-method&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bean å‡†å¤‡å°±ç»ª&lt;/strong&gt;ï¼Œå¯ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ä½¿ç”¨"&gt;ğŸ“ å¦‚ä½•ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;å®ç° &lt;code&gt;ApplicationContextAware&lt;/code&gt;æ¥å£é€šå¸¸åªéœ€ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªç±»å®ç° &lt;code&gt;ApplicationContextAware&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å†™æ–¹æ³•&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;setApplicationContext&lt;/code&gt;æ–¹æ³•ä¸­ä¿å­˜å®¹å™¨å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å†Œåˆ°å®¹å™¨&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;@Component&lt;/code&gt;æ³¨è§£æˆ– XML é…ç½®å°†å…¶æ³¨å†Œä¸º Spring Beanã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œæä¾›é™æ€æ–¹æ³•æ¥è·å– Beanï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;
@Component
public class SpringContextUtil implements ApplicationContextAware {
private static ApplicationContext applicationContext;
@Override
public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
SpringContextUtil.applicationContext = applicationContext; // ä¿å­˜å®¹å™¨å¼•ç”¨
}
// æä¾›é™æ€æ–¹æ³•é€šè¿‡åç§°è·å–Bean
public static Object getBean(String name) {
return applicationContext.getBean(name);
}
// æä¾›é™æ€æ–¹æ³•é€šè¿‡ç±»å‹è·å–Bean
public static &amp;lt;T&amp;gt; T getBean(Class&amp;lt;T&amp;gt; clazz) {
return applicationContext.getBean(clazz);
}
// å…¶ä»–å®ç”¨æ–¹æ³•ï¼Œå¦‚è·å–æ‰€æœ‰Beanå®šä¹‰åç§°ã€åˆ¤æ–­æ˜¯å¦åŒ…å«Beanç­‰
public static String[] getBeanDefinitionNames() {
return applicationContext.getBeanDefinitionNames();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹‹åï¼Œåœ¨ä»£ç ä¸­å³å¯é€šè¿‡ &lt;code&gt;SpringContextUtil.getBean(MyService.class)&lt;/code&gt;çš„æ–¹å¼è·å–å®¹å™¨ç®¡ç†çš„ Beanã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§åº”ç”¨åœºæ™¯-1"&gt;ğŸ¯ å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ApplicationContextAware&lt;/code&gt;é€šå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ¨æ€è·å– Bean&lt;/strong&gt;ï¼šåœ¨æ— æ³•é€šè¿‡å¸¸è§„ä¾èµ–æ³¨å…¥ï¼ˆå¦‚ &lt;code&gt;@Autowired&lt;/code&gt;ï¼‰è·å– Bean çš„åœºæ™¯ä¸‹ï¼ˆä¾‹å¦‚åœ¨é™æ€æ–¹æ³•ä¸­ã€åœ¨å·¥å…·ç±»ä¸­ã€åœ¨æŸäº›é Spring æ‰˜ç®¡çš„ç±»ä¸­ï¼‰ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;ApplicationContextAware&lt;/code&gt;å·¥å…·ç±»åŠ¨æ€æŸ¥æ‰¾å¹¶è·å– Beanã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‘å¸ƒåº”ç”¨äº‹ä»¶&lt;/strong&gt;ï¼šSpring çš„ &lt;code&gt;ApplicationContext&lt;/code&gt;æ”¯æŒäº‹ä»¶å‘å¸ƒ/è®¢é˜…æœºåˆ¶ã€‚å®ç°äº† &lt;code&gt;ApplicationContextAware&lt;/code&gt;çš„ Bean å¯ä»¥è·å– &lt;code&gt;ApplicationContext&lt;/code&gt;æ¥å‘å¸ƒäº‹ä»¶ï¼Œå…¶ä»– Bean å¯ä»¥ç›‘å¬å¹¶å¤„ç†è¿™äº›äº‹ä»¶ï¼Œå®ç°è§£è€¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// åœ¨æŸä¸ªå®ç°äº†ApplicationContextAwareçš„Beanä¸­
applicationContext.publishEvent(new MyCustomEvent(this, eventData));
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¿é—®å®¹å™¨ä¿¡æ¯ä¸ç¯å¢ƒå±æ€§&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;ApplicationContext&lt;/code&gt;ï¼Œå¯ä»¥è·å–ç¯å¢ƒé…ç½®ä¿¡æ¯ã€å½“å‰æ¿€æ´»çš„ Profileã€å›½é™…åŒ–æ¶ˆæ¯ç­‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è·å–ç¯å¢ƒå˜é‡ä¸­çš„é…ç½®
String propertyValue = applicationContext.getEnvironment().getProperty(&amp;#34;my.config.key&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;ApplicationContextAware&lt;/code&gt;å¼ºå¤§ï¼Œä½†åº”è°¨æ…ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è¿‡åº¦ä½¿ç”¨ä¸è€¦åˆ&lt;/strong&gt;ï¼š&lt;strong&gt;å®˜æ–¹æ¨èä¼˜å…ˆä½¿ç”¨ä¾èµ–æ³¨å…¥&lt;/strong&gt;ã€‚ç›´æ¥ä½¿ç”¨ &lt;code&gt;ApplicationContextAware&lt;/code&gt;å¹¶è°ƒç”¨ &lt;code&gt;getBean()&lt;/code&gt;ä¼šä½¿ä»£ç ä¸ Spring æ¡†æ¶è€¦åˆï¼Œè¿åâ€œæ§åˆ¶åè½¬â€ï¼ˆIoCï¼‰åŸåˆ™ï¼Œé™ä½ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„ç©ºæŒ‡é’ˆå¼‚å¸¸&lt;/strong&gt;ï¼šç¡®ä¿åœ¨ Bean å®Œå…¨åˆå§‹åŒ–åå†ä½¿ç”¨ä¿å­˜çš„ &lt;code&gt;ApplicationContext&lt;/code&gt;å¼•ç”¨ï¼Œä¾‹å¦‚é¿å…åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æ€å˜é‡é™·é˜±&lt;/strong&gt;ï¼šä¸Šé¢å·¥å…·ç±»ç¤ºä¾‹ä¸­ä½¿ç”¨äº†é™æ€å˜é‡æŒæœ‰ &lt;code&gt;ApplicationContext&lt;/code&gt;ã€‚è¿™åœ¨ç®€å•çš„å•åº”ç”¨ä¸­æ˜¯å¯è¡Œçš„ï¼Œä½†åœ¨æŸäº›å¤æ‚åœºæ™¯ï¼ˆå¦‚æŸäº›çƒ­éƒ¨ç½²ã€ç‰¹å®šå®¹å™¨ç¯å¢ƒï¼‰å¯èƒ½éœ€è¦è€ƒè™‘å…¶ç”Ÿå‘½å‘¨æœŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨èæ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¯¹äºè·å– Beanï¼š&lt;strong&gt;å°½é‡ä½¿ç”¨ä¾èµ–æ³¨å…¥&lt;/strong&gt;ï¼ˆ&lt;code&gt;@Autowired&lt;/code&gt;, &lt;code&gt;@Resource&lt;/code&gt;ï¼‰ã€‚å¦‚æœå¿…é¡»åœ¨éæ‰˜ç®¡ç±»ä¸­ä½¿ç”¨ï¼Œå¯ä»¥è€ƒè™‘&lt;strong&gt;æ–¹æ³•å‚æ•°ä¼ é€’&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºäº‹ä»¶å‘å¸ƒï¼šå¯ä»¥ç›´æ¥æ³¨å…¥ &lt;code&gt;ApplicationEventPublisher&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºç¯å¢ƒå±æ€§ï¼šå¯ä»¥ç›´æ¥æ³¨å…¥ &lt;code&gt;Environment&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸å…¶ä»–-aware-æ¥å£çš„å…³ç³»"&gt;ğŸ” ä¸å…¶ä»– Aware æ¥å£çš„å…³ç³»
&lt;/h3&gt;&lt;p&gt;Spring æä¾›äº†ä¸°å¯Œçš„ &lt;code&gt;Aware&lt;/code&gt;æ¥å£å®¶æ—ï¼Œè®© Bean å¯ä»¥æ„ŸçŸ¥ä¸åŒæ–¹é¢çš„å®¹å™¨ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¥å£åç§°&lt;/th&gt;
&lt;th&gt;æ³¨å…¥çš„ä¾èµ–&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ApplicationContextAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–å®¹å™¨ä¸Šä¸‹æ–‡ï¼ŒåŠ¨æ€è·å–Beanï¼Œå‘å¸ƒäº‹ä»¶ï¼Œè®¿é—®ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;BeanNameAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Bean åœ¨å®¹å™¨ä¸­çš„åç§° (String)&lt;/td&gt;
&lt;td&gt;è®© Bean çŸ¥é“è‡ªå·±åœ¨å®¹å™¨ä¸­çš„åå­—ï¼Œç”¨äºæ—¥å¿—æˆ–è°ƒè¯•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;BeanFactoryAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BeanFactory&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å– Bean å·¥å‚ï¼Œç”¨äºæ›´åº•å±‚çš„å®¹å™¨æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EnvironmentAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Environment&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–ç¯å¢ƒé…ç½®ã€å±æ€§æ–‡ä»¶ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ApplicationEventPublisherAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ApplicationEventPublisher&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–äº‹ä»¶å‘å¸ƒå™¨ï¼Œç”¨äºå‘å¸ƒåº”ç”¨äº‹ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ResourceLoaderAware&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ResourceLoader&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–èµ„æºåŠ è½½å™¨ï¼Œç”¨äºåŠ è½½ç±»è·¯å¾„æˆ–æ–‡ä»¶ç³»ç»Ÿèµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ApplicationContextAware&lt;/code&gt;æ˜¯ Spring æä¾›çš„ä¸€ç§è®© Bean æ„ŸçŸ¥å¹¶è·å–å®¹å™¨å¼•ç”¨çš„æœºåˆ¶ã€‚å®ƒä¸»è¦ç”¨äºéœ€è¦&lt;strong&gt;åŠ¨æ€ä¸å®¹å™¨äº¤äº’&lt;/strong&gt;çš„åœºæ™¯ï¼Œå¦‚åŠ¨æ€è·å– Beanã€å‘å¸ƒäº‹ä»¶ã€è®¿é—®ç¯å¢ƒä¿¡æ¯ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æ ‡å‡†ä¸šåŠ¡é€»è¾‘å¼€å‘ä¸­ï¼Œ&lt;strong&gt;åº”ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ä¾èµ–æ³¨å…¥&lt;/strong&gt;ç­‰æ›´ç¬¦åˆ IoC åŸåˆ™çš„æ–¹å¼ã€‚å°† &lt;code&gt;ApplicationContextAware&lt;/code&gt;è§†ä¸ºä¸€ä¸ªåœ¨ç‰¹å®šåœºæ™¯ä¸‹æœ‰ç”¨çš„&lt;strong&gt;é«˜çº§å·¥å…·&lt;/strong&gt;ï¼Œè€Œéå¸¸è§„æ‰‹æ®µã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ ApplicationContextAwareã€‚&lt;/p&gt;
&lt;h2 id="scopeproxymodetarget_class"&gt;ScopeProxyMode.TARGET_CLASS
&lt;/h2&gt;&lt;p&gt;ã€‚åœ¨ Spring æœåŠ¡ä¸Šä½¿ç”¨ &lt;code&gt;@RequestScope&lt;/code&gt;å¹¶è®¾ç½® &lt;code&gt;proxyMode = ScopedProxyMode.TARGET_CLASS&lt;/code&gt;ï¼Œæ˜¯ä¸ºäº†è§£å†³ Bean ç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…çš„é—®é¢˜ï¼Œå¹¶ç¡®ä¿åœ¨ Web åº”ç”¨ä¸­èƒ½æ­£ç¡®è·å–å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¸‹é¢æˆ‘æ¥è¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;h3 id="-ç†è§£-requestscope"&gt;ğŸ¯ ç†è§£ @RequestScope
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@RequestScope&lt;/code&gt;æ˜¯ Spring ä¸º Web åº”ç”¨æä¾›çš„ä¸€ç§ Bean ä½œç”¨åŸŸæ³¨è§£ã€‚å®ƒè¡¨æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸç»‘å®š&lt;/strong&gt;ï¼šè¯¥ Bean çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€ä¸ª &lt;strong&gt;HTTP è¯·æ±‚&lt;/strong&gt; ç»‘å®šã€‚æ¯æ¬¡æœ‰æ–°çš„ HTTP è¯·æ±‚åˆ°æ¥æ—¶ï¼ŒSpring éƒ½ä¼šä¸ºæ­¤ Bean åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚å½“è¿™ä¸ªè¯·æ±‚å¤„ç†å®Œæ¯•å¹¶è¿”å›å“åº”åï¼Œè¿™ä¸ªå®ä¾‹å°±ä¼šè¢«é”€æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹ç”¨é€”&lt;/strong&gt;ï¼šéå¸¸é€‚åˆå­˜å‚¨ä¸&lt;strong&gt;å•ä¸ªè¯·æ±‚å¯†åˆ‡ç›¸å…³&lt;/strong&gt;çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼ˆä» Token æˆ– Session ä¸­è§£æå‡ºçš„ç”¨æˆ· IDã€ç”¨æˆ·åç­‰ï¼‰ã€æœ¬æ¬¡è¯·æ±‚çš„ç‰¹å®šå‚æ•°ç­‰ã€‚è¿™æ ·å°±ä¸éœ€è¦åœ¨æ–¹æ³•é—´æ˜¾å¼ä¼ é€’è¿™äº›å‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸ºä½•éœ€è¦-proxymodescopedproxymodetarget_class"&gt;ğŸ”§ ä¸ºä½•éœ€è¦ proxyMode=ScopedProxyMode.TARGET_CLASS
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªé…ç½®çš„æ ¸å¿ƒç›®çš„æ˜¯ä¸ºäº†è§£å†³&lt;strong&gt;ä¸åŒç”Ÿå‘½å‘¨æœŸçš„ Bean ä¹‹é—´çš„ä¾èµ–é—®é¢˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯å‡è®¾&lt;/strong&gt;ï¼šä½ æœ‰ä¸€ä¸ªå•ä¾‹ï¼ˆSingletonï¼‰çš„ Serviceï¼ˆä¾‹å¦‚ &lt;code&gt;OrderService&lt;/code&gt;ï¼‰ï¼Œå®ƒéœ€è¦ä¾èµ–ä¸€ä¸ª &lt;code&gt;@RequestScope&lt;/code&gt;çš„ Beanï¼ˆä¾‹å¦‚ &lt;code&gt;CurrentUserContext&lt;/code&gt;ï¼Œç”¨äºè·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜æ‰€åœ¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å•ä¾‹ Bean (&lt;code&gt;OrderService&lt;/code&gt;) åœ¨ Spring å®¹å™¨å¯åŠ¨æ—¶å°±ä¼šè¢«åˆ›å»ºå¹¶åˆå§‹åŒ–ï¼Œæ­¤æ—¶å®ƒéœ€è¦æ³¨å…¥æ‰€æœ‰ä¾èµ–é¡¹ã€‚&lt;/li&gt;
&lt;li&gt;ä½† &lt;code&gt;@RequestScope&lt;/code&gt;çš„ Bean (&lt;code&gt;CurrentUserContext&lt;/code&gt;) åªæœ‰åœ¨ HTTP è¯·æ±‚åˆ°æ¥æ—¶æ‰ä¼šè¢«åˆ›å»ºã€‚åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œæ ¹æœ¬æ²¡æœ‰è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ŒSpring æ— æ³•ç›´æ¥åˆ›å»ºä¸€ä¸ª &lt;code&gt;CurrentUserContext&lt;/code&gt;å®ä¾‹æ¥æ³¨å…¥åˆ° &lt;code&gt;OrderService&lt;/code&gt;ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼š&lt;code&gt;proxyMode = ScopedProxyMode.TARGET_CLASS&lt;/code&gt;å°±æ˜¯å‘Šè¯‰ Springï¼šâ€œ&lt;strong&gt;ä¸è¦ç›´æ¥æ³¨å…¥ä¸€ä¸ªçœŸå®çš„ &lt;code&gt;CurrentUserContext&lt;/code&gt;å®ä¾‹ï¼Œè€Œæ˜¯æ³¨å…¥ä¸€ä¸ªå®ƒçš„ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰&lt;/strong&gt;ã€‚â€&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-scopedproxymodetarget_class-çš„å«ä¹‰"&gt;âš™ï¸ ScopedProxyMode.TARGET_CLASS çš„å«ä¹‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ScopedProxyMode&lt;/code&gt;å†³å®šäº†ä»£ç†çš„æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TARGET_CLASS&lt;/strong&gt;ï¼šæŒ‡å®šä½¿ç”¨ &lt;strong&gt;CGLIB åº“&lt;/strong&gt; æ¥åˆ›å»ºä»£ç†ã€‚è¿™ç§æ–¹å¼ä¼šç”Ÿæˆä¸€ä¸ªç›®æ ‡ç±»ï¼ˆå³è¢«ä»£ç†çš„ &lt;code&gt;@RequestScope&lt;/code&gt;Beanï¼‰çš„&lt;strong&gt;å­ç±»&lt;/strong&gt;ä½œä¸ºä»£ç†å¯¹è±¡ã€‚å®ƒ&lt;strong&gt;ä¸è¦æ±‚&lt;/strong&gt;ç›®æ ‡ Bean å®ç°ä»»ä½•æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦ä¸€ç§é€‰é¡¹æ˜¯ INTERFACES&lt;/strong&gt;ï¼šä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ã€‚è¿™è¦æ±‚ç›®æ ‡ Bean&lt;strong&gt;å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£&lt;/strong&gt;ï¼Œä»£ç†å¯¹è±¡ä¼šå®ç°è¿™äº›æ¥å£ã€‚å¦‚æœ Bean æ²¡æœ‰å®ç°æ¥å£ï¼Œåˆ™æ— æ³•ä½¿ç”¨æ­¤æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç†å¯¹è±¡å¦‚ä½•å·¥ä½œ"&gt;ğŸš€ ä»£ç†å¯¹è±¡å¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;å½“ä½ é€šè¿‡ &lt;code&gt;@Autowired&lt;/code&gt;åœ¨å•ä¾‹ Bean ä¸­æ³¨å…¥ä¸€ä¸ªé…ç½®äº† &lt;code&gt;proxyMode = ScopedProxyMode.TARGET_CLASS&lt;/code&gt;çš„ &lt;code&gt;@RequestScope&lt;/code&gt;Bean æ—¶ï¼Œå®é™…æ³¨å…¥çš„æ˜¯ä¸€ä¸ª CGLIB ä»£ç†å¯¹è±¡ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å…¥ä»£ç†&lt;/strong&gt;ï¼šSpring å®¹å™¨åœ¨å¯åŠ¨æ—¶ï¼Œä¼šåˆ›å»ºè¿™ä¸ªä»£ç†å¯¹è±¡ï¼ˆå®ƒæ˜¯å•ä¾‹çš„ï¼‰ï¼Œå¹¶å°†å…¶æˆåŠŸæ³¨å…¥åˆ°å•ä¾‹ Bean ä¸­ï¼Œè§£å†³äº†å¯åŠ¨æ—¶çš„ä¾èµ–é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ³•è°ƒç”¨è¢«æ‹¦æˆª&lt;/strong&gt;ï¼šå½“å•ä¾‹ Bean çš„ä¸šåŠ¡æ–¹æ³•è¢«è°ƒç”¨ï¼ˆä¾‹å¦‚ &lt;code&gt;orderService.placeOrder()&lt;/code&gt;ï¼‰ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•å†…éƒ¨è°ƒç”¨äº† &lt;code&gt;currentUserContext.getUserId()&lt;/code&gt;æ—¶ï¼š
&lt;ul&gt;
&lt;li&gt;è¿™ä¸ªè°ƒç”¨å®é™…ä¸Šå‘ç”Ÿåœ¨ä»£ç†å¯¹è±¡ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;ä»£ç†å¯¹è±¡ä¼š&lt;strong&gt;æ‹¦æˆª&lt;/strong&gt;è¿™æ¬¡æ–¹æ³•è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è·å–çœŸå®å®ä¾‹&lt;/strong&gt;ï¼šä»£ç†å¯¹è±¡ä¼š&lt;strong&gt;åœ¨å½“å‰æœ‰æ•ˆçš„ HTTP è¯·æ±‚ä¸Šä¸‹æ–‡ä¸­&lt;/strong&gt;ï¼Œå‘ Spring å®¹å™¨è¯·æ±‚è·å–&lt;strong&gt;å½“å‰è¯·æ±‚å¯¹åº”çš„ã€çœŸå®çš„&lt;/strong&gt; &lt;code&gt;CurrentUserContext&lt;/code&gt;Bean å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å§”æ‰˜è°ƒç”¨&lt;/strong&gt;ï¼šä»£ç†å¯¹è±¡å°†æ–¹æ³•è°ƒç”¨ï¼ˆ&lt;code&gt;getUserId()&lt;/code&gt;ï¼‰&lt;strong&gt;å§”æ‰˜&lt;/strong&gt;ç»™åˆšåˆšè·å–åˆ°çš„çœŸå®å®ä¾‹å»æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›ç»“æœ&lt;/strong&gt;ï¼šçœŸå®å®ä¾‹æ‰§è¡Œå®Œæ¯•åï¼Œå°†ç»“æœè¿”å›ç»™ä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å†å°†å…¶è¿”å›ç»™æœ€åˆçš„è°ƒç”¨è€…ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹å¯¹å¼€å‘è€…æ˜¯é€æ˜çš„ï¼Œä½ æ„Ÿè§‰å°±åƒåœ¨ç›´æ¥æ“ä½œä¸€ä¸ªæ™®é€šçš„ Beanï¼Œä½†å®é™…ä¸Šæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½å¯èƒ½èƒŒåå…³è”ç€ä¸åŒçš„è¯·æ±‚å®ä¾‹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸åŒä½œç”¨åŸŸçš„ç‰¹å¾"&gt;ğŸ“Š ä¸åŒä½œç”¨åŸŸçš„ç‰¹å¾
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä½œç”¨åŸŸ (Scope)&lt;/th&gt;
&lt;th&gt;ç”Ÿå‘½å‘¨æœŸä¸èŒƒå›´&lt;/th&gt;
&lt;th&gt;å…¸å‹ä½¿ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ˜¯å¦éœ€è¦ä»£ç†è§£å†³æ³¨å…¥é—®é¢˜ï¼Ÿ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;singleton&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Spring IoC å®¹å™¨ (é»˜è®¤)&lt;/td&gt;
&lt;td&gt;æ— çŠ¶æ€æœåŠ¡ã€å·¥å…·ç±»ã€é…ç½®ç±»&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;prototype&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡é€šè¿‡å®¹å™¨è·å–æ—¶&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¿æŒç‹¬ç«‹çŠ¶æ€çš„å¯¹è±¡&lt;/td&gt;
&lt;td&gt;æ˜¯ (å½“è¢«å•ä¾‹Beanä¾èµ–æ—¶)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;request&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€æ¬¡ HTTP è¯·æ±‚&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å½“å‰è¯·æ±‚ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·èº«ä»½ã€è¯·æ±‚å‚æ•°&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯ (å½“è¢«æ›´é•¿ç”Ÿå‘½å‘¨æœŸçš„Beanå¦‚å•ä¾‹ä¾èµ–æ—¶)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;session&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªç”¨æˆ·ä¼šè¯ (Session)&lt;/td&gt;
&lt;td&gt;è´­ç‰©è½¦ã€ç”¨æˆ·ç™»å½•çŠ¶æ€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯ (å½“è¢«æ›´é•¿ç”Ÿå‘½å‘¨æœŸçš„Beanå¦‚å•ä¾‹ä¾èµ–æ—¶)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;application&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•´ä¸ª Web åº”ç”¨ (ServletContext)&lt;/td&gt;
&lt;td&gt;å…¨å±€é…ç½®ã€åº”ç”¨çº§ç¼“å­˜&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä¸éœ€è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;websocket&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª WebSocket ä¼šè¯&lt;/td&gt;
&lt;td&gt;å®æ—¶é€šä¿¡ï¼Œå¦‚èŠå¤©å®¤&lt;/td&gt;
&lt;td&gt;è§†æƒ…å†µè€Œå®š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CGLIB é™åˆ¶&lt;/strong&gt;ï¼šç”±äº &lt;code&gt;TARGET_CLASS&lt;/code&gt;ä½¿ç”¨ CGLIB é€šè¿‡ç”Ÿæˆå­ç±»æ¥åˆ›å»ºä»£ç†ï¼Œå› æ­¤&lt;strong&gt;è¢«ä»£ç†çš„ç±»ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;ç±»&lt;/strong&gt;ï¼Œå¹¶ä¸”&lt;strong&gt;è¦è¢«é‡å†™çš„æ–¹æ³•ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¾®å°å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½éœ€è¦é€šè¿‡ä»£ç†é—´æ¥è·å–çœŸå®å®ä¾‹ï¼Œä¼šæœ‰éå¸¸å¾®å°çš„æ€§èƒ½å¼€é”€ï¼Œä½†åœ¨å¤§å¤šæ•° Web åº”ç”¨ä¸­é€šå¸¸å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒè¯•&lt;/strong&gt;ï¼šåœ¨æ—¥å¿—æˆ–è°ƒè¯•å™¨ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ° Bean çš„ç±»å‹æ˜¯ç±»ä¼¼ &lt;code&gt;CurrentUserContext$$EnhancerBySpringCGLIB$$...&lt;/code&gt;è¿™æ ·çš„åç§°ï¼Œè¿™è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ª CGLIB ä»£ç†å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä¸º &lt;code&gt;@RequestScope&lt;/code&gt;Bean è®¾ç½® &lt;code&gt;proxyMode = ScopedProxyMode.TARGET_CLASS&lt;/code&gt;ï¼Œå®è´¨ä¸Šæ˜¯ Spring æä¾›çš„ä¸€ç§ &lt;strong&gt;â€œå»¶è¿ŸæŸ¥æ‰¾â€&lt;/strong&gt; æœºåˆ¶ã€‚å®ƒé€šè¿‡æ³¨å…¥ä¸€ä¸ª&lt;strong&gt;ä»£ç†å¯¹è±¡&lt;/strong&gt;æ¥è§£å†³é•¿ç”Ÿå‘½å‘¨æœŸ Beanï¼ˆå¦‚ Singletonï¼‰ä¾èµ–çŸ­ç”Ÿå‘½å‘¨æœŸ Beanï¼ˆå¦‚ Requestï¼‰æ—¶çš„çŸ›ç›¾ï¼Œç¡®ä¿æ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½èƒ½&lt;strong&gt;å®‰å…¨ä¸”é€æ˜åœ°è·å–åˆ°å½“å‰è¯·æ±‚å¯¹åº”çš„çœŸå®å®ä¾‹&lt;/strong&gt;ï¼Œä»è€Œåœ¨ Web åº”ç”¨ä¸­ä¼˜é›…åœ°å¤„ç†è¯·æ±‚èŒƒå›´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h2 id="scopedproxymode"&gt;ScopedProxyMode
&lt;/h2&gt;&lt;p&gt;ScopedProxyMode æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºæŒ‡å®š&lt;strong&gt;ä½œç”¨åŸŸä»£ç†æ¨¡å¼&lt;/strong&gt;çš„å…³é”®æšä¸¾ï¼Œå®ƒå†³å®šäº† Spring å¦‚ä½•è§£å†³ä¸åŒç”Ÿå‘½å‘¨æœŸ Bean ä¹‹é—´çš„ä¾èµ–é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨å°†çŸ­ç”Ÿå‘½å‘¨æœŸï¼ˆå¦‚ requestã€sessionï¼‰çš„ Bean æ³¨å…¥åˆ°é•¿ç”Ÿå‘½å‘¨æœŸï¼ˆå¦‚ singletonï¼‰çš„ Bean ä¸­æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ‰€æœ‰ &lt;code&gt;ScopedProxyMode&lt;/code&gt;æšä¸¾å€¼çš„è¯¦ç»†ä»‹ç»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä»£ç†æ¨¡å¼ (ScopedProxyMode)&lt;/th&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DEFAULT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ç­‰åŒäº &lt;code&gt;NO&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–é»˜è®¤é…ç½®çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;å…¶è¡Œä¸ºå–å†³äºç»„ä»¶æ‰«æçº§åˆ«é…ç½®çš„é»˜è®¤å€¼ï¼Œé€šå¸¸å›é€€ä¸º &lt;code&gt;NO&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NO&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åˆ›å»ºä»»ä½•ä»£ç†&lt;/td&gt;
&lt;td&gt;ç›¸åŒæˆ–å…¼å®¹ä½œç”¨åŸŸ Bean é—´çš„ä¾èµ–ï¼ˆå¦‚ singleton æ³¨å…¥ singletonï¼‰&lt;/td&gt;
&lt;td&gt;ç›´æ¥æ³¨å…¥ç›®æ ‡ Bean çš„å®ä¾‹ã€‚&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šè‹¥å°†çŸ­ç”Ÿå‘½å‘¨æœŸ Bean æ³¨å…¥é•¿ç”Ÿå‘½å‘¨æœŸ Bean ä¸”ä¸ä½¿ç”¨ä»£ç†ï¼Œå¯èƒ½å¯¼è‡´é•¿ç”Ÿå‘½å‘¨æœŸ Bean å§‹ç»ˆæŒæœ‰çŸ­ç”Ÿå‘½å‘¨æœŸ Bean çš„&lt;strong&gt;åŒä¸€ä¸ªå®ä¾‹&lt;/strong&gt;ï¼Œæ— æ³•æŒ‰é¢„æœŸå·¥ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;INTERFACES&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;strong&gt;JDK åŠ¨æ€ä»£ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»£ç†çš„ç›®æ ‡å¯¹è±¡&lt;strong&gt;å®ç°äº†è‡³å°‘ä¸€ä¸ªæ¥å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆçš„ä»£ç†å¯¹è±¡å®ç°äº†ç›®æ ‡å¯¹è±¡çš„æ‰€æœ‰æ¥å£ã€‚&lt;strong&gt;é™åˆ¶&lt;/strong&gt;ï¼šå¦‚æœè¢«ä»£ç†çš„ç±»æœªå®ç°ä»»ä½•æ¥å£ï¼Œä½¿ç”¨æ­¤æ¨¡å¼ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;TARGET_CLASS&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;strong&gt;CGLIB åº“&lt;/strong&gt;ç”Ÿæˆå­ç±»è¿›è¡Œä»£ç†&lt;/td&gt;
&lt;td&gt;ä»£ç†çš„ç›®æ ‡å¯¹è±¡æ˜¯&lt;strong&gt;ç±»&lt;/strong&gt;ï¼ˆæ— è®ºæ˜¯å¦å®ç°æ¥å£ï¼‰&lt;/td&gt;
&lt;td&gt;é€šè¿‡ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»æ¥åˆ›å»ºä»£ç†ã€‚è¿™æ˜¯ &lt;code&gt;@RefreshScope&lt;/code&gt;ç­‰æ³¨è§£çš„&lt;strong&gt;é»˜è®¤æ¨¡å¼&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒé€‚ç”¨æ€§æ›´å¹¿ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä»¥-target_class-ä¸ºä¾‹"&gt;ğŸ”§ å·¥ä½œåŸç†ï¼ˆä»¥ TARGET_CLASS ä¸ºä¾‹ï¼‰
&lt;/h3&gt;&lt;p&gt;å½“ä½ å°†ä¸€ä¸ª &lt;code&gt;@RequestScope&lt;/code&gt;Beanï¼ˆçŸ­ç”Ÿå‘½å‘¨æœŸï¼‰æ³¨å…¥åˆ°ä¸€ä¸ª Singleton Beanï¼ˆé•¿ç”Ÿå‘½å‘¨æœŸï¼‰æ—¶ï¼Œå¹¶è®¾ç½®äº† &lt;code&gt;proxyMode = ScopedProxyMode.TARGET_CLASS&lt;/code&gt;ï¼ŒSpring å®é™…æ³¨å…¥çš„æ˜¯ä¸€ä¸ª &lt;strong&gt;CGLIB ä»£ç†å¯¹è±¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç†å¯¹è±¡æ³¨å…¥&lt;/strong&gt;ï¼šSingleton Bean åœ¨åˆå§‹åŒ–æ—¶ï¼ŒæˆåŠŸæ³¨å…¥çš„æ˜¯è¿™ä¸ªä»£ç†å¯¹è±¡ï¼ˆå®ƒæœ¬èº«æ˜¯å•ä¾‹çš„ï¼‰ï¼Œè§£å†³äº†å®¹å™¨å¯åŠ¨æ—¶çŸ­ç”Ÿå‘½å‘¨æœŸ Bean å®ä¾‹å°šæœªå­˜åœ¨çš„çŸ›ç›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ³•è°ƒç”¨æ‹¦æˆª&lt;/strong&gt;ï¼šå½“ Singleton Bean çš„ä¸šåŠ¡æ–¹æ³•è¢«è°ƒç”¨ï¼Œå¹¶è¿›è€Œè°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼ˆå¦‚ &lt;code&gt;userPreferences.getSettings()&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶è·å–ç›®æ ‡&lt;/strong&gt;ï¼šä»£ç†å¯¹è±¡ä¼šæ‹¦æˆªæ­¤æ¬¡è°ƒç”¨ï¼Œå¹¶å‘ Spring å®¹å™¨&lt;strong&gt;å®æ—¶è¯·æ±‚&lt;/strong&gt;å½“å‰ HTTP è¯·æ±‚å¯¹åº”çš„ã€çœŸæ­£çš„ &lt;code&gt;@RequestScope&lt;/code&gt;Bean å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å§”æ‰˜æ‰§è¡Œ&lt;/strong&gt;ï¼šä»£ç†å¯¹è±¡å°†æ–¹æ³•è°ƒç”¨&lt;strong&gt;å§”æ‰˜&lt;/strong&gt;ç»™åˆšåˆšè·å–åˆ°çš„çœŸå®å®ä¾‹æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›ç»“æœ&lt;/strong&gt;ï¼šæœ€ç»ˆå°†çœŸå®å®ä¾‹æ‰§è¡Œçš„ç»“æœè¿”å›ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹å¯¹å¼€å‘è€…æ˜¯é€æ˜çš„ï¼Œè®©ä½ æ„Ÿè§‰åƒæ˜¯åœ¨ç›´æ¥æ“ä½œä¸€ä¸ªæ™®é€šçš„ Beanã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šä½¿ç”¨ä»£ç†ï¼ˆç‰¹åˆ«æ˜¯ &lt;code&gt;TARGET_CLASS&lt;/code&gt;ï¼‰ä¼šå¸¦æ¥å¾®å°çš„æ€§èƒ½å¼€é”€ï¼Œå› ä¸ºæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½å¯èƒ½æ¶‰åŠä»£ç†æ‹¦æˆªå’Œä»å®¹å™¨ä¸­è·å–ç›®æ ‡å®ä¾‹çš„æ“ä½œã€‚ä½†å¯¹äºå¤§å¤šæ•° Web åº”ç”¨ï¼Œè¿™ç‚¹å¼€é”€é€šå¸¸å¯ä»¥æ¥å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç±»è®¾è®¡çº¦æŸ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨ &lt;code&gt;TARGET_CLASS&lt;/code&gt;ï¼Œè¢«ä»£ç†çš„&lt;strong&gt;ç±»ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;&lt;/strong&gt; çš„ï¼Œå› ä¸º CGLIB éœ€è¦é€šè¿‡ç»§æ‰¿æ¥ç”Ÿæˆå­ç±»ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;è¢«ä»£ç†çš„&lt;strong&gt;æ–¹æ³•ä¹Ÿä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;&lt;/strong&gt; çš„ï¼Œå¦åˆ™æ— æ³•è¢«é‡å†™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒè¯•&lt;/strong&gt;ï¼šåœ¨è°ƒè¯•æ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°æ³¨å…¥çš„ Bean ç±»å‹æ˜¯ç±»ä¼¼ &lt;code&gt;MyBean$$EnhancerBySpringCGLIB$$...&lt;/code&gt;è¿™æ ·çš„å½¢å¼ï¼Œè¿™è¡¨æ˜å®ƒæ˜¯ä¸€ä¸ª CGLIB ä»£ç†å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¾èµ–&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;TARGET_CLASS&lt;/code&gt;æ¨¡å¼éœ€è¦é¡¹ç›®ä¸­æœ‰ CGLIB åº“ã€‚å¦‚æœä½ ä½¿ç”¨ Spring Bootï¼Œå®ƒå·²ç»è‡ªåŠ¨åŒ…å«äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä»£ç†æ¨¡å¼"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ä»£ç†æ¨¡å¼
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤æˆ–ç®€å•åœºæ™¯&lt;/strong&gt;ï¼šå¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œé€šå¸¸ä½¿ç”¨ &lt;code&gt;@Scope&lt;/code&gt;æ³¨è§£çš„ &lt;strong&gt;&lt;code&gt;proxyMode&lt;/code&gt;é»˜è®¤å€¼&lt;/strong&gt;å³å¯ã€‚ä¾‹å¦‚ &lt;code&gt;@RefreshScope&lt;/code&gt;é»˜è®¤å°±æ˜¯ &lt;code&gt;TARGET_CLASS&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æ˜ç¡®æ€§&lt;/strong&gt;ï¼šè‹¥å¸Œæœ›æ˜¾å¼æ§åˆ¶ï¼Œå¯æ ¹æ®ç›®æ ‡ Bean ç±»å‹é€‰æ‹©ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ Bean&lt;strong&gt;å®ç°äº†æ¥å£&lt;/strong&gt;ï¼Œä¸”ä½ å¸Œæœ›åŸºäºæ¥å£ç¼–ç¨‹ï¼Œå¯ä»¥è€ƒè™‘ &lt;code&gt;INTERFACES&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ Beanæ˜¯&lt;strong&gt;ç±»&lt;/strong&gt;ï¼ˆå°¤å…¶æ˜¯æœªå®ç°æ¥å£çš„ï¼‰ï¼Œæˆ–è€…æƒ³è¦æœ€å¹¿æ³›çš„å…¼å®¹æ€§ï¼Œ&lt;strong&gt;&lt;code&gt;TARGET_CLASS&lt;/code&gt;æ˜¯æœ€å®‰å…¨å¯é çš„é€‰æ‹©&lt;/strong&gt;ï¼Œè¿™ä¹Ÿæ˜¯è®¸å¤š Spring æ³¨è§£çš„é»˜è®¤è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ„å¤–&lt;/strong&gt;ï¼šé™¤éä½ éå¸¸æ¸…æ¥šä¸å­˜åœ¨ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸä¸åŒ¹é…çš„é—®é¢˜ï¼Œå¦åˆ™&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;NO&lt;/code&gt;&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´éš¾ä»¥å¯Ÿè§‰çš„ Bugã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ£€æŸ¥ä»£ç†å¯¹è±¡"&gt;ğŸ” æ£€æŸ¥ä»£ç†å¯¹è±¡
&lt;/h3&gt;&lt;p&gt;Spring æä¾›äº† &lt;code&gt;AopUtils&lt;/code&gt;å·¥å…·ç±»æ¥å¸®åŠ©åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä»£ç†ä»¥åŠæ˜¯ä½•ç§ä»£ç†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import org.springframework.aop.support.AopUtils;
// æ£€æŸ¥æ˜¯å¦æ˜¯ JDK åŠ¨æ€ä»£ç†
AopUtils.isJdkDynamicProxy(bean);
// æ£€æŸ¥æ˜¯å¦æ˜¯ CGLIB ä»£ç†
AopUtils.isCglibProxy(bean);
// è·å–ä»£ç†å¯¹è±¡èƒŒåçš„ç›®æ ‡ç±»
AopUtils.getTargetClass(bean);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç†è§£ &lt;code&gt;ScopedProxyMode&lt;/code&gt;çš„ä¸åŒæ¨¡å¼åŠå…¶é€‚ç”¨åœºæ™¯ï¼Œèƒ½å¸®åŠ©ä½ åœ¨ Spring åº”ç”¨ä¸­æ›´ä¼˜é›…åœ°ç®¡ç† Bean çš„ä½œç”¨åŸŸå’Œä¾èµ–å…³ç³»ï¼Œé¿å…å¸¸è§çš„é™·é˜±ã€‚&lt;/p&gt;
&lt;h2 id="configuration-çš„-proxybeanmethods"&gt;@Configuration çš„ proxyBeanMethods
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;@Configuration&lt;/code&gt;æ³¨è§£ä¸­çš„ &lt;code&gt;proxyBeanMethods&lt;/code&gt;å±æ€§æ˜¯ Spring Boot 2.2 åŠä»¥ä¸Šç‰ˆæœ¬å¼•å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå®ƒå†³å®šäº†é…ç½®ç±»ä¸­ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•æ˜¯å¦è¢«ä»£ç†ï¼Œç›´æ¥å½±å“ Bean çš„åˆ›å»ºæ–¹å¼å’Œåº”ç”¨æ€§èƒ½ã€‚ä¸ºäº†å¸®ä½ å¿«é€Ÿç†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å®ƒçš„ä¸¤ç§æ¨¡å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Full å…¨æ¨¡å¼ (&lt;code&gt;proxyBeanMethods = true&lt;/code&gt;) ğŸŒŸ&lt;/th&gt;
&lt;th&gt;Lite è½»é‡çº§æ¨¡å¼ (&lt;code&gt;proxyBeanMethods = false&lt;/code&gt;) âš¡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;strong&gt;CGLIB ä»£ç†&lt;/strong&gt;é…ç½®ç±»&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— ä»£ç†&lt;/strong&gt;ï¼Œé…ç½®ç±»ä¸ºæ™®é€šç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bean å®ä¾‹ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®ä¿é€šè¿‡é…ç½®ç±»æ–¹æ³•è°ƒç”¨è·å–çš„æ˜¯ &lt;strong&gt;Spring å®¹å™¨ä¸­çš„å•ä¾‹ Bean&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡è°ƒç”¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•éƒ½&lt;strong&gt;æ‰§è¡Œæ–¹æ³•ä½“&lt;/strong&gt;ï¼Œé€šå¸¸&lt;strong&gt;åˆ›å»ºæ–°å®ä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bean ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼šèµ° Bean çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸ä¼šèµ°&lt;/strong&gt; Bean çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•è°ƒç”¨çº¦æŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¢«ä»£ç†çš„é…ç½®ç±»åŠå…¶ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•&lt;strong&gt;ä¸èƒ½å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®ç±»å’Œæ–¹æ³•å¯å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰&lt;strong&gt;ä»£ç†åˆ›å»ºå’Œè¿è¡Œæ—¶æ‹¦æˆªçš„å¼€é”€&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¯åŠ¨ç¨æ…¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— ä»£ç†å¼€é”€&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¯åŠ¨æ›´å¿«&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒé€šè¿‡&lt;strong&gt;æ–¹æ³•è°ƒç”¨&lt;/strong&gt;åœ¨é…ç½®ç±»å†…éƒ¨&lt;strong&gt;ç›´æ¥å¼•ç”¨å…¶ä»– &lt;code&gt;@Bean&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®ç±»å†…éƒ¨&lt;strong&gt;æ— æ³•é€šè¿‡æ–¹æ³•è°ƒç”¨ä¾èµ–å…¶ä»– &lt;code&gt;@Bean&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®ç±»ä¸­çš„ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•&lt;strong&gt;å­˜åœ¨ç›¸äº’ä¾èµ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®ç±»ä¸­çš„ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•&lt;strong&gt;ç›¸äº’ç‹¬ç«‹&lt;/strong&gt;ï¼Œæ— è°ƒç”¨å…³ç³»&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“Š &lt;strong&gt;å…³äºæ€§èƒ½çš„è¡¥å……è¯´æ˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Full æ¨¡å¼&lt;/strong&gt;ï¼šä»£ç†å¼€é”€åŒ…æ‹¬ç”Ÿæˆ CGLIB å­ç±»ã€è¿è¡Œæ—¶æ–¹æ³•æ‹¦æˆªå’Œæ£€æŸ¥å®¹å™¨ä¸­æ˜¯å¦å­˜åœ¨ Bean å®ä¾‹ã€‚è¿™åœ¨æœ‰è®¸å¤šé…ç½®ç±»æ—¶å¯èƒ½å¯¹å¯åŠ¨æ€§èƒ½æœ‰å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lite æ¨¡å¼&lt;/strong&gt;ï¼šè™½æ— ä»£ç†å¼€é”€ï¼Œä½†è‹¥ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•è¢«é¢‘ç¹è°ƒç”¨ä¸”åŒ…å«å¤æ‚é€»è¾‘ï¼Œæ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹ä¹Ÿå¯èƒ½å¸¦æ¥æ€§èƒ½è´Ÿæ‹…ã€‚é€šå¸¸å…¶å¯åŠ¨é€Ÿåº¦ä¼˜äº Full æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©æ¨¡å¼-1"&gt;ğŸ§© å¦‚ä½•é€‰æ‹©æ¨¡å¼ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©çš„å…³é”®åœ¨äºåˆ¤æ–­é…ç½®ç±»å†…éƒ¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä¹‹é—´æ˜¯å¦å­˜åœ¨è°ƒç”¨å…³ç³»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ Full æ¨¡å¼ (&lt;code&gt;proxyBeanMethods = true&lt;/code&gt;) çš„æƒ…å†µ&lt;/strong&gt;ï¼šå½“ä½ çš„é…ç½®ç±»ä¸­ï¼Œä¸€ä¸ª &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•éœ€è¦è°ƒç”¨å¦ä¸€ä¸ª &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•æ¥è·å–ä¾èµ–é¡¹æ—¶ã€‚è¿™æ˜¯ &lt;strong&gt;Spring Boot 2.2 ä¹‹åçš„é»˜è®¤è¡Œä¸º&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration(proxyBeanMethods = true) // é»˜è®¤å€¼ï¼Œæ˜¾å¼å†™å‡ºä¾¿äºç†è§£
public class AppConfig {
@Bean
public DataSource dataSource() {
// åˆ›å»ºå¹¶é…ç½® DataSource
return new HikariDataSource();
}
@Bean
public JdbcTemplate jdbcTemplate() {
// ç›´æ¥è°ƒç”¨ dataSource() æ–¹æ³•ï¼Œè·å–çš„æ˜¯å®¹å™¨ä¸­å”¯ä¸€çš„ DataSource Bean
return new JdbcTemplate(dataSource());
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ Lite æ¨¡å¼ (&lt;code&gt;proxyBeanMethods = false&lt;/code&gt;) çš„æƒ…å†µ&lt;/strong&gt;ï¼šå½“é…ç½®ç±»ä¸­çš„æ¯ä¸ª &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•éƒ½æ˜¯è‡ªåŒ…å«çš„ï¼Œå½¼æ­¤ä¹‹é—´æ²¡æœ‰è°ƒç”¨å…³ç³»æ—¶ã€‚&lt;strong&gt;Spring Boot è‡ªèº«çš„è®¸å¤šè‡ªåŠ¨é…ç½®ç±»é‡‡ç”¨æ­¤æ¨¡å¼ä»¥ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration(proxyBeanMethods = false) // æ˜¾å¼è®¾ç½®ä¸º Lite æ¨¡å¼
public class UtilsConfig {
@Bean
public MyUtility myUtility() {
return new MyUtility();
}
@Bean
public MyTool myTool() {
return new MyTool();
}
// myUtility() å’Œ myTool() ç›¸äº’ç‹¬ç«‹
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è‹¥åœ¨ Lite æ¨¡å¼çš„é…ç½®ç±»ä¸­éœ€è¦å»ºç«‹ Bean ä¹‹é—´çš„ä¾èµ–ï¼Œåº”é€šè¿‡æ–¹æ³•&lt;strong&gt;å‚æ•°&lt;/strong&gt;è®© Spring è‡ªåŠ¨æ³¨å…¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration(proxyBeanMethods = false)
public class AppConfig {
@Bean
public DataSource dataSource() {
return new HikariDataSource();
}
@Bean
// é€šè¿‡å‚æ•°å£°æ˜ä¾èµ–ï¼ŒSpringä¼šè‡ªåŠ¨ä»å®¹å™¨ä¸­æä¾›DataSource Bean
public JdbcTemplate jdbcTemplate(DataSource dataSource) {
return new JdbcTemplate(dataSource);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦çš„ä½¿ç”¨çº¦æŸ"&gt;âš ï¸ é‡è¦çš„ä½¿ç”¨çº¦æŸ
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ Full æ¨¡å¼æ—¶ï¼Œè¯·æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”±äº Spring æ˜¯é€šè¿‡ CGLIB ç”Ÿæˆç›®æ ‡é…ç½®ç±»çš„å­ç±»æ¥åˆ›å»ºä»£ç†çš„ï¼Œå› æ­¤&lt;strong&gt;é…ç½®ç±»æœ¬èº«ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;çš„&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®ç±»ä¸­&lt;strong&gt;è¢« &lt;code&gt;@Bean&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ä¹Ÿä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;æˆ– &lt;code&gt;private&lt;/code&gt;çš„&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦è¢«é‡å†™ä»¥å®ç°ä»£ç†é€»è¾‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç®€å•æ¥è¯´"&gt;ğŸ’¡ ç®€å•æ¥è¯´
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒ³è¦åœ¨é…ç½®ç±»å†…éƒ¨é€šè¿‡æ–¹æ³•è°ƒç”¨ç›´æ¥å¼•ç”¨å…¶ä»– &lt;code&gt;@Bean&lt;/code&gt;ï¼Œå¹¶ç¡®ä¿æ‹¿åˆ°çš„æ˜¯å•ä¾‹ â†’ ç”¨ &lt;code&gt;proxyBeanMethods = true&lt;/code&gt;(Fullæ¨¡å¼)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦ï¼Œä¸”é…ç½®ç±»ä¸­çš„ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ç›¸äº’ç‹¬ç«‹ï¼Œæˆ–é€šè¿‡æ–¹æ³•å‚æ•°æ³¨å…¥ä¾èµ– â†’ ç”¨ &lt;code&gt;proxyBeanMethods = false&lt;/code&gt;(Liteæ¨¡å¼)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœä½ ä¸ç¡®å®šï¼Œéµå¾ª Spring çš„é»˜è®¤è®¾ç½® &lt;code&gt;proxyBeanMethods = true&lt;/code&gt;æ˜¯å®‰å…¨çš„é€‰æ‹©ã€‚å½“ä½ æ˜ç¡®é…ç½®ç±»ä¸­æ— å†…éƒ¨æ–¹æ³•è°ƒç”¨ä¸”å…³æ³¨å¯åŠ¨æ€§èƒ½æ—¶ï¼Œå¯ä»¥æ˜¾å¼è®¾ç½®ä¸º &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="componentscan"&gt;@ComponentScan
&lt;/h2&gt;&lt;p&gt;è¿™å¥è¯å¾ˆå¥½åœ°æ¦‚æ‹¬äº† &lt;code&gt;@ComponentScan&lt;/code&gt;çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶ã€‚å®ƒå°±åƒ Spring åœ¨å¯åŠ¨æ—¶çš„ä¸€ä½â€œä¾¦å¯Ÿå…µâ€ï¼Œä½ å‘Šè¯‰å®ƒå»å“ªäº›åŒºåŸŸï¼ˆæ‰«æèŒƒå›´ï¼‰æœå¯»ï¼Œå¹¶ä¸”åªæŠŠå¸¦æœ‰ç‰¹å®šæ ‡è¯†ï¼ˆç‰¹å®šæ³¨è§£ï¼‰çš„ç›®æ ‡å¸¦å›å¤§æœ¬è¥ï¼ˆSpring å®¹å™¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“è¿™ä¸¤ä¸ªå…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;th&gt;å¦‚ä½•è®¾ç½®&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰«æèŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ Spring è¦å»&lt;strong&gt;å“ªäº›åŒ…åŠå…¶å­åŒ…&lt;/strong&gt;ä¸‹æŸ¥æ‰¾ç±»æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;&lt;code&gt;basePackages&lt;/code&gt;: ç›´æ¥æŒ‡å®šåŒ…åå­—ç¬¦ä¸² &lt;code&gt;basePackageClasses&lt;/code&gt;: é€šè¿‡ç±»åæ¨å…¶æ‰€åœ¨åŒ…&lt;/td&gt;
&lt;td&gt;å®šä¹‰äº†â€œç‰©ç†æœç´¢ç©ºé—´â€ï¼Œä¸åœ¨æ­¤èŒƒå›´å†…çš„ç±»æ–‡ä»¶æ ¹æœ¬ä¸ä¼šè¢« Spring è€ƒè™‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‰¹å®šæ³¨è§£ (è½½å…¥æ¡ä»¶)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰åœ¨æ‰«æèŒƒå›´å†…ï¼Œ&lt;strong&gt;å“ªäº›ç±»åº”è¯¥è¢«è¯†åˆ«&lt;/strong&gt;å¹¶æ³¨å†Œä¸º Bean&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤è¯†åˆ«&lt;/strong&gt;: &lt;code&gt;@Component&lt;/code&gt;, &lt;code&gt;@Service&lt;/code&gt;, &lt;code&gt;@Repository&lt;/code&gt;, &lt;code&gt;@Controller&lt;/code&gt;ç­‰ &lt;strong&gt;è‡ªå®šä¹‰è¿‡æ»¤&lt;/strong&gt;: ä½¿ç”¨ &lt;code&gt;includeFilters&lt;/code&gt;/ &lt;code&gt;excludeFilters&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰äº†â€œé€»è¾‘å…¥é€‰æ ‡å‡†â€ï¼Œå³ä½¿ç±»åœ¨æ‰«æèŒƒå›´å†…ï¼Œæ²¡æœ‰ç‰¹å®šæ³¨è§£ä¹Ÿä¸ä¼šè¢«è‡ªåŠ¨è½½å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä½œåŸç†åˆ†æ­¥è§£æ"&gt;ğŸ” å·¥ä½œåŸç†åˆ†æ­¥è§£æ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ’å®šèŒƒå›´ï¼ˆæ‰«æèŒƒå›´ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;Spring é¦–å…ˆæ ¹æ® &lt;code&gt;@ComponentScan&lt;/code&gt;æ³¨è§£ä¸­å®šä¹‰çš„ &lt;code&gt;basePackages&lt;/code&gt;æˆ– &lt;code&gt;basePackageClasses&lt;/code&gt;å±æ€§æ¥ç¡®å®šè¦æ‰«æçš„åŒ…è·¯å¾„ã€‚å¦‚æœä¸æ˜¾å¼æŒ‡å®šï¼Œåˆ™&lt;strong&gt;é»˜è®¤æ‰«ææ ‡æ³¨äº† &lt;code&gt;@ComponentScan&lt;/code&gt;çš„è¿™ä¸ªé…ç½®ç±»æ‰€åœ¨çš„åŒ…åŠå…¶æ‰€æœ‰å­åŒ…&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€ä¸€æ’æŸ¥ï¼ˆæ‰«æè¿‡ç¨‹ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;Spring ä¼šéå†æ‰«æèŒƒå›´å†…çš„æ‰€æœ‰ &lt;code&gt;.class&lt;/code&gt;æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ£€æŸ¥æ ‡è¯†ï¼ˆè¿‡æ»¤æ¡ä»¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å¯¹äºæ¯ä¸€ä¸ªç±»ï¼ŒSpring ä¼šæ£€æŸ¥å…¶æ˜¯å¦å¸¦æœ‰ç‰¹å®šçš„æ³¨è§£ã€‚&lt;strong&gt;é»˜è®¤æƒ…å†µä¸‹&lt;/strong&gt;ï¼ŒSpring ä¼šè¯†åˆ«æ ‡æ³¨äº† &lt;code&gt;@Component&lt;/code&gt;ã€&lt;code&gt;@Service&lt;/code&gt;ã€&lt;code&gt;@Repository&lt;/code&gt;ã€&lt;code&gt;@Controller&lt;/code&gt;ç­‰æ³¨è§£çš„ç±» ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½½å…¥å®¹å™¨ï¼ˆæ³¨å†ŒBeanï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦å‘ç°ç¬¦åˆæ¡ä»¶çš„ç±»ï¼ŒSpring å°±ä¼šå°†å…¶æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ï¼Œæˆä¸ºä¸€ä¸ªå¯ä¾›ä½¿ç”¨çš„ Beanã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é€šè¿‡è¿‡æ»¤å™¨ç²¾ç»†æ§åˆ¶"&gt;âš™ï¸ é€šè¿‡è¿‡æ»¤å™¨ç²¾ç»†æ§åˆ¶
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@ComponentScan&lt;/code&gt;æä¾›äº†å¼ºå¤§çš„ &lt;code&gt;includeFilters&lt;/code&gt;å’Œ &lt;code&gt;excludeFilters&lt;/code&gt;å±æ€§ï¼Œå…è®¸ä½ è¶…è¶Šé»˜è®¤çš„æ³¨è§£è§„åˆ™ï¼Œè¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;includeFilters&lt;/code&gt;&lt;/strong&gt;ï¼šç”¨äº&lt;strong&gt;åŒ…å«&lt;/strong&gt;é‚£äº›å³ä½¿æ²¡æœ‰é»˜è®¤æ³¨è§£ï¼ˆå¦‚ &lt;code&gt;@Component&lt;/code&gt;ï¼‰çš„ç±»ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®åªåŒ…å«æ‰€æœ‰å®ç°äº†æŸä¸ªæ¥å£çš„ç±»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
@ComponentScan(
basePackages = &amp;#34;com.example&amp;#34;,
includeFilters = @ComponentScan.Filter(
type = FilterType.ASSIGNABLE_TYPE, // æŒ‰ç±»å‹åˆ†é…
classes = MyCustomInterface.class // åŒ…å«æ‰€æœ‰å®ç°äº†æ­¤æ¥å£çš„ç±»
),
useDefaultFilters = false // å…³é—­é»˜è®¤è¿‡æ»¤è§„åˆ™ï¼
)
public class AppConfig {
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;excludeFilters&lt;/code&gt;&lt;/strong&gt;ï¼šç”¨äº&lt;strong&gt;æ’é™¤&lt;/strong&gt;é‚£äº›è™½ç„¶ç¬¦åˆé»˜è®¤è§„åˆ™ä½†ä½ ä¸æƒ³æ³¨å†Œçš„ç±»ã€‚ä¾‹å¦‚ï¼Œæ’é™¤æ‰€æœ‰æ ‡æ³¨äº† &lt;code&gt;@Controller&lt;/code&gt;çš„ç±»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
@ComponentScan(
basePackages = &amp;#34;com.example&amp;#34;,
excludeFilters = @ComponentScan.Filter(
type = FilterType.ANNOTATION, // æŒ‰æ³¨è§£æ’é™¤
classes = Controller.class // æ’é™¤æ‰€æœ‰@Controlleræ³¨è§£çš„ç±»
)
)
public class AppConfig {
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;FilterType çš„ç±»å‹åŒ…æ‹¬&lt;/strong&gt; ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ANNOTATION&lt;/code&gt;ï¼šæ ¹æ®æ³¨è§£è¿›è¡Œè¿‡æ»¤ï¼ˆé»˜è®¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ASSIGNABLE_TYPE&lt;/code&gt;ï¼šæ ¹æ®ç»™å®šçš„ç±»å‹ï¼ˆç±»æˆ–æ¥å£ï¼‰è¿›è¡Œè¿‡æ»¤ï¼Œå…¶å­ç±»æˆ–å®ç°ç±»ä¹Ÿä¼šè¢«åŒ…å«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ASPECTJ&lt;/code&gt;ï¼šä½¿ç”¨ AspectJ è¡¨è¾¾å¼è¿›è¡Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;REGEX&lt;/code&gt;ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç±»åè¿›è¡Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CUSTOM&lt;/code&gt;ï¼šè‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ï¼Œéœ€è¦å®ç° &lt;code&gt;TypeFilter&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç®€å•æ€»ç»“"&gt;ğŸ’¡ ç®€å•æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥ï¼Œâ€œ&lt;code&gt;@ComponentScan&lt;/code&gt;æ³¨è§£åªæ˜¯å®šä¹‰äº†æ‰«æèŒƒå›´ï¼Œåœ¨æ­¤èŒƒå›´å†…å¸¦æœ‰ç‰¹å®šæ³¨è§£çš„Beanæ‰ä¼šè¢«è½½å…¥å®¹å™¨â€è¿™å¥è¯å¯ä»¥è¿™æ ·ç†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;â€œæ‰«æèŒƒå›´â€&lt;/strong&gt;ï¼šè§£å†³äº†â€œ&lt;strong&gt;å»å“ªå„¿æ‰¾&lt;/strong&gt;â€çš„é—®é¢˜ï¼Œç¡®å®šäº†æœç´¢çš„ç‰©ç†è¾¹ç•Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œç‰¹å®šæ³¨è§£â€&lt;/strong&gt;ï¼šè§£å†³äº†â€œ&lt;strong&gt;æ‰¾ä»€ä¹ˆ&lt;/strong&gt;â€çš„é—®é¢˜ï¼Œå®šä¹‰äº†ç­›é€‰ç›®æ ‡çš„é€»è¾‘è§„åˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¤è€…ç¼ºä¸€ä¸å¯ã€‚åªæœ‰åœ¨æ‰«æèŒƒå›´å†…ä¸”ç¬¦åˆè¿‡æ»¤æ¡ä»¶ï¼ˆé€šå¸¸æ˜¯å¸¦æœ‰ç‰¹å®šæ³¨è§£ï¼‰çš„ç±»ï¼Œæ‰ä¼šè¢« Spring è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œä¸º Beanã€‚&lt;/p&gt;
&lt;h2 id="transactional-rollbackfor"&gt;@Transactional rollbackfor
&lt;/h2&gt;&lt;p&gt;Spring çš„ &lt;code&gt;@Transactional&lt;/code&gt;æ³¨è§£å¯¹&lt;strong&gt;è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰å’Œ Error&lt;/strong&gt;é»˜è®¤å›æ»šï¼Œè€Œå¯¹&lt;strong&gt;å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰&lt;/strong&gt; é»˜è®¤ä¸å›æ»šï¼Œè¿™ä¸»è¦æ˜¯åŸºäº Java çš„å¼‚å¸¸è®¾è®¡å“²å­¦å’Œ Spring å¯¹äº‹åŠ¡å¤„ç†çš„å¹³è¡¡è€ƒé‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿç†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¼‚å¸¸ç±»å‹&lt;/th&gt;
&lt;th&gt;é»˜è®¤å›æ»šè¡Œä¸º&lt;/th&gt;
&lt;th&gt;è®¾è®¡åˆè¡·ä¸å¸¸è§åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ˜¯å¦éœ€è¦æ˜¾å¼æ•è·æˆ–å£°æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œæ—¶å¼‚å¸¸&lt;/strong&gt; (RuntimeException)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›æ»š&lt;/strong&gt; âœ…&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä»£è¡¨&lt;strong&gt;ç¼–ç¨‹é”™è¯¯&lt;/strong&gt;æˆ–&lt;strong&gt;ä¸å¯æ¢å¤çš„ç³»ç»Ÿå¼‚å¸¸&lt;/strong&gt;ï¼ˆå¦‚ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œã€é™¤é›¶é”™è¯¯ï¼‰ã€‚è¿™äº›å¼‚å¸¸ä¸åº”è¢«æ•è·ï¼Œè€Œåº”é€šè¿‡ä¿®æ”¹ä»£ç æ¥é¿å…ï¼Œå›æ»šäº‹åŠ¡æ˜¯å®‰å…¨çš„ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸éœ€è¦&lt;/strong&gt;åœ¨ä»£ç ä¸­æ˜¾å¼æ•è·æˆ–å£°æ˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é”™è¯¯&lt;/strong&gt; (Error)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›æ»š&lt;/strong&gt; âœ…&lt;/td&gt;
&lt;td&gt;è¡¨ç¤º&lt;strong&gt;ä¸¥é‡çš„ç³»ç»Ÿé—®é¢˜&lt;/strong&gt;ï¼ˆå¦‚å†…å­˜æº¢å‡ºã€è™šæ‹Ÿæœºé”™è¯¯ï¼‰ã€‚åº”ç”¨ç¨‹åºé€šå¸¸æ— æ³•å¤„ç†ï¼Œå›æ»šæ˜¯åˆç†çš„ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸éœ€è¦&lt;/strong&gt;åœ¨ä»£ç ä¸­æ˜¾å¼æ•è·æˆ–å£°æ˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å—æ£€å¼‚å¸¸&lt;/strong&gt; (Checked Exception)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å›æ»š&lt;/strong&gt; âŒ&lt;/td&gt;
&lt;td&gt;ä»£è¡¨&lt;strong&gt;å¯é¢„è§çš„ä¸šåŠ¡å¼‚å¸¸&lt;/strong&gt;ï¼ˆå¦‚æ–‡ä»¶æœªæ‰¾åˆ°ã€æ•°æ®åº“è¿æ¥å¤±è´¥ã€ç½‘ç»œä¸­æ–­ï¼‰ã€‚è°ƒç”¨æ–¹&lt;strong&gt;æœŸæœ›&lt;/strong&gt;å¹¶èƒ½&lt;strong&gt;å¤„ç†&lt;/strong&gt;è¿™äº›å¼‚å¸¸ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œä¸šåŠ¡é€»è¾‘ä¸Šçš„è¡¥æ•‘è€Œéç®€å•å›æ»šã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»&lt;/strong&gt;åœ¨ä»£ç ä¸­æ˜¾å¼æ•è·æˆ–ç”¨ &lt;code&gt;throws&lt;/code&gt;å£°æ˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•æ§åˆ¶å›æ»šè¡Œä¸º"&gt;âš™ï¸ å¦‚ä½•æ§åˆ¶å›æ»šè¡Œä¸º
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ Spring è®¾ç½®äº†é»˜è®¤è¡Œä¸ºï¼Œä½†ä½ å®Œå…¨å¯ä»¥æŒ‰éœ€å®šåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®©å—æ£€å¼‚å¸¸è§¦å‘å›æ»š&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;rollbackFor&lt;/code&gt;å±æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Transactional(rollbackFor = Exception.class) // æ‰€æœ‰å¼‚å¸¸éƒ½å›æ»š
@Transactional(rollbackFor = IOException.class) // ç‰¹å®šå—æ£€å¼‚å¸¸å›æ»š
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®©è¿è¡Œæ—¶å¼‚å¸¸ä¸è§¦å‘å›æ»š&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;noRollbackFor&lt;/code&gt;å±æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Transactional(noRollbackFor = NullPointerException.class) // ç©ºæŒ‡é’ˆå¼‚å¸¸ä¸å›æ»š
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸å¿…é¡»è¢«æŠ›å‡º&lt;/strong&gt;ï¼š&lt;code&gt;@Transactional&lt;/code&gt;æ˜¯åœ¨&lt;strong&gt;ä»£ç†æ¨¡å¼&lt;/strong&gt;ä¸‹å·¥ä½œçš„ï¼Œå®ƒé€šè¿‡ AOP æ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œåªæœ‰åœ¨æ–¹æ³•&lt;strong&gt;æŠ›å‡ºå¼‚å¸¸&lt;/strong&gt;æ—¶ï¼Œä»£ç†æ‰èƒ½æ•è·åˆ°å¹¶å†³å®šæ˜¯å¦å›æ»šã€‚å¦‚æœä½ åœ¨æ–¹æ³•å†…éƒ¨ç”¨ &lt;code&gt;try-catch&lt;/code&gt;æ•è·äº†å¼‚å¸¸å¹¶â€œåæ‰â€ï¼ˆæ²¡æœ‰é‡æ–°æŠ›å‡ºï¼‰ï¼Œäº‹åŠ¡ç®¡ç†å™¨å°±ä¸çŸ¥é“å‘ç”Ÿäº†å¼‚å¸¸ï¼Œè‡ªç„¶ä¸ä¼šå›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨è§£åº”ç”¨äº &lt;code&gt;public&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼šSpring çš„äº‹åŠ¡ä»£ç†é€šå¸¸åªå¯¹ &lt;code&gt;public&lt;/code&gt;æ–¹æ³•ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è®¾è®¡åˆè¡·å¹³è¡¡ä¸¥æ ¼æ€§ä¸çµæ´»æ€§"&gt;ğŸ’¡ è®¾è®¡åˆè¡·ï¼šå¹³è¡¡ä¸¥æ ¼æ€§ä¸çµæ´»æ€§
&lt;/h3&gt;&lt;p&gt;Spring å›¢é˜Ÿè¿™æ ·è®¾è®¡é»˜è®¤è¡Œä¸ºï¼Œæ˜¯ä¸ºäº†åœ¨&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸šåŠ¡çµæ´»æ€§&lt;/strong&gt;ä¹‹é—´å–å¾—å¹³è¡¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œæ—¶å¼‚å¸¸å’Œé”™è¯¯&lt;/strong&gt;é€šå¸¸æ„å‘³ç€æ— æ³•é¢„æ–™çš„æ•…éšœï¼Œæ­¤æ—¶å›æ»šäº‹åŠ¡æ˜¯&lt;strong&gt;æœ€å®‰å…¨&lt;/strong&gt;çš„é€‰æ‹©ï¼Œå¯ä»¥é˜²æ­¢è„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å—æ£€å¼‚å¸¸&lt;/strong&gt;åˆ™å¸¸è¢«ç”¨äº&lt;strong&gt;ä¸šåŠ¡é€»è¾‘&lt;/strong&gt;çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æ³¨å†Œæ—¶â€œç”¨æˆ·åå·²å­˜åœ¨â€å¯ä»¥æŠ›å‡ºå—æ£€å¼‚å¸¸ &lt;code&gt;UserAlreadyExistsException&lt;/code&gt;ã€‚æ­¤æ—¶ä¸šåŠ¡é€»è¾‘å¯èƒ½å¸Œæœ›æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œç„¶åæç¤ºç”¨æˆ·æ¢ä¸€ä¸ªç”¨æˆ·åï¼Œ&lt;strong&gt;è€Œä¸æ˜¯ç®€å•åœ°å›æ»šæ•´ä¸ªäº‹åŠ¡&lt;/strong&gt;ï¼ˆå¯èƒ½è¿˜æœ‰å…¶ä»–æœ‰æ•ˆæ“ä½œéœ€è¦æäº¤ï¼‰ã€‚å¦‚æœæ‰€æœ‰å—æ£€å¼‚å¸¸éƒ½é»˜è®¤å›æ»šï¼Œå°±ä¼šå‰¥å¤ºå¼€å‘è€…æ ¹æ®ä¸šåŠ¡éœ€æ±‚çµæ´»å¤„ç†çš„æƒåŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ—‚ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒSpring &lt;code&gt;@Transactional&lt;/code&gt;çš„é»˜è®¤å›æ»šè§„åˆ™æ˜¯åŸºäºè¿™æ ·ä¸€ä¸ªç†å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡åˆ°â€œåâ€çš„ã€æ„å¤–çš„å¼‚å¸¸ï¼ˆRuntimeException/Errorï¼‰&lt;/strong&gt; â†’ è‡ªåŠ¨å›æ»šï¼Œä¿æŠ¤æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡åˆ°â€œå·²çŸ¥â€çš„ã€å¯å¤„ç†çš„å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰&lt;/strong&gt; â†’ äº¤ç»™ä½ æ¥å†³å®šå¦‚ä½•å¤„ç†ï¼ˆå›æ»šè¿˜æ˜¯ç»§ç»­ï¼‰ï¼Œä¿æŒçµæ´»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ &lt;code&gt;rollbackFor&lt;/code&gt;å’Œ &lt;code&gt;noRollbackFor&lt;/code&gt;å±æ€§è½»æ¾è¦†ç›–è¿™äº›é»˜è®¤è¡Œä¸ºï¼Œä½¿å…¶å®Œç¾é€‚é…ä½ çš„ä¸šåŠ¡åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id="propagation_requires_new"&gt;PROPAGATION_REQUIRES_NEW
&lt;/h2&gt;&lt;p&gt;ç†è§£ Spring ä¸­ &lt;code&gt;PROPAGATION_REQUIRES_NEW&lt;/code&gt;å’Œ &lt;code&gt;PROPAGATION_NESTED&lt;/code&gt;çš„åŒºåˆ«å¯¹å¤„ç†å¤æ‚äº‹åŠ¡åœºæ™¯å¾ˆé‡è¦ã€‚æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å’Œè¯¦ç»†è§£é‡Šå¸®ä½ æ¢³ç†æ¸…æ¥šã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;PROPAGATION_REQUIRES_NEW&lt;/th&gt;
&lt;th&gt;PROPAGATION_NESTED&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº‹åŠ¡ç‹¬ç«‹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œå…¨ç‹¬ç«‹çš„æ–°äº‹åŠ¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤–éƒ¨äº‹åŠ¡çš„çœŸæ­£å­äº‹åŠ¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¤–éƒ¨äº‹åŠ¡å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‹¬ç«‹æäº¤æˆ–å›æ»šï¼Œä¸å—å¤–éƒ¨äº‹åŠ¡å½±å“&lt;/td&gt;
&lt;td&gt;æ˜¯å¤–éƒ¨äº‹åŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œå¤–éƒ¨äº‹åŠ¡æäº¤å®ƒæ‰æäº¤ï¼Œå¤–éƒ¨äº‹åŠ¡å›æ»šå®ƒå¿…å›æ»š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›æ»šå½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…éƒ¨äº‹åŠ¡å·²æäº¤ï¼Œåˆ™å¤–éƒ¨äº‹åŠ¡å›æ»š&lt;strong&gt;ä¸å½±å“&lt;/strong&gt;å®ƒ&lt;/td&gt;
&lt;td&gt;å†…éƒ¨äº‹åŠ¡å›æ»š&lt;strong&gt;ä¸å½±å“&lt;/strong&gt;å¤–éƒ¨äº‹åŠ¡ï¼ˆå¤–éƒ¨äº‹åŠ¡å¯å†³å®šç»§ç»­æˆ–å›æ»šåˆ°ä¿å­˜ç‚¹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤–éƒ¨äº‹åŠ¡å›æ»š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤–éƒ¨äº‹åŠ¡å›æ»š&lt;strong&gt;ä¸å½±å“&lt;/strong&gt;å·²æäº¤çš„å†…éƒ¨äº‹åŠ¡&lt;/td&gt;
&lt;td&gt;å¤–éƒ¨äº‹åŠ¡å›æ»š&lt;strong&gt;å¯¼è‡´&lt;/strong&gt;å†…éƒ¨äº‹åŠ¡å›æ»š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‹¬ç«‹çš„æ–°äº‹åŠ¡ï¼Œæ‹¥æœ‰è‡ªå·±çš„æ•°æ®åº“è¿æ¥å’Œé”&lt;/td&gt;
&lt;td&gt;åŸºäºæ•°æ®åº“&lt;strong&gt;ä¿å­˜ç‚¹ (Savepoint)&lt;/strong&gt; å®ç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ–°è¿æ¥å’Œäº‹åŠ¡ä¸Šä¸‹æ–‡ï¼Œå¼€é”€ç›¸å¯¹è¾ƒå¤§&lt;/td&gt;
&lt;td&gt;åŸºäºä¿å­˜ç‚¹ï¼Œå¼€é”€é€šå¸¸è¾ƒå°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¥å¿—è®°å½•ã€å®¡è®¡è·Ÿè¸ªï¼ˆå³ä½¿ä¸»ä¸šåŠ¡å¤±è´¥ï¼Œæ—¥å¿—ä»éœ€ä¿ç•™ï¼‰&lt;/td&gt;
&lt;td&gt;æ‰¹é‡å¤„ç†ã€å¤æ‚ä¸šåŠ¡ï¼ˆå…è®¸éƒ¨åˆ†æ“ä½œå¤±è´¥è€Œä¸å½±å“æ•´ä½“ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŠ€æœ¯æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦äº‹åŠ¡ç®¡ç†å™¨æ”¯æŒï¼ˆé€šå¸¸éƒ½å¯ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦æ•°æ®åº“å’ŒJDBCé©±åŠ¨æ”¯æŒä¿å­˜ç‚¹ï¼ˆJDBC 3.0ä»¥ä¸Šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“ &lt;strong&gt;ç®€è¦æ€»ç»“&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;REQUIRES_NEW&lt;/strong&gt;ï¼šåƒä¸€ä¸ª&lt;strong&gt;ç‹¬ç«‹å…¬å¸&lt;/strong&gt;ï¼Œå®ƒçš„æˆåŠŸæˆ–å¤±è´¥ä¸æ¯å…¬å¸ï¼ˆå¤–éƒ¨äº‹åŠ¡ï¼‰æ— å…³ï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NESTED&lt;/strong&gt;ï¼šåƒæ¯å…¬å¸çš„&lt;strong&gt;ä¸€ä¸ªéƒ¨é—¨&lt;/strong&gt;ã€‚éƒ¨é—¨å®äº†ï¼ˆå›æ»šï¼‰ï¼Œå…¬å¸å¯èƒ½è¿˜èƒ½ç»§ç»­è¿è¥ï¼ˆå¤–éƒ¨äº‹åŠ¡æäº¤ï¼‰ï¼›ä½†æ•´ä¸ªå…¬å¸å®äº†ï¼ˆå¤–éƒ¨äº‹åŠ¡å›æ»šï¼‰ï¼Œéƒ¨é—¨å¿…ç„¶ä¸å¤å­˜åœ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸ç»†èŠ‚"&gt;ğŸ” å·¥ä½œæœºåˆ¶ä¸ç»†èŠ‚
&lt;/h3&gt;&lt;h4 id="propagation_requires_new-1"&gt;PROPAGATION_REQUIRES_NEW
&lt;/h4&gt;&lt;p&gt;å½“æ–¹æ³•è®¾ç½®ä¸º &lt;code&gt;PROPAGATION_REQUIRES_NEW&lt;/code&gt;æ—¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŒ‚èµ·å¤–éƒ¨äº‹åŠ¡&lt;/strong&gt;ï¼šå¦‚æœå½“å‰å·²å­˜åœ¨äº‹åŠ¡ï¼ˆç§°ä¸ºå¤–éƒ¨äº‹åŠ¡ï¼‰ï¼ŒSpring ä¼š&lt;strong&gt;æŒ‚èµ·&lt;/strong&gt;è¿™ä¸ªäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯åŠ¨æ–°äº‹åŠ¡&lt;/strong&gt;ï¼šéšå³&lt;strong&gt;å¯åŠ¨ä¸€ä¸ªå…¨æ–°çš„ã€å®Œå…¨ç‹¬ç«‹çš„äº‹åŠ¡&lt;/strong&gt;ã€‚è¿™ä¸ªæ–°äº‹åŠ¡æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥ã€éš”ç¦»çº§åˆ«å’Œé”æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ–¹æ³•&lt;/strong&gt;ï¼šåœ¨æ–°äº‹åŠ¡çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤/å›æ»š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è‹¥æ–¹æ³•æ‰§è¡ŒæˆåŠŸï¼Œ&lt;strong&gt;æ–°äº‹åŠ¡ç‹¬ç«‹æäº¤&lt;/strong&gt;ï¼Œå…¶ç»“æœç«‹å³æŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥æ–¹æ³•æ‰§è¡Œå¤±è´¥ï¼Œæ–°äº‹åŠ¡å›æ»šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¢å¤å¤–éƒ¨äº‹åŠ¡&lt;/strong&gt;ï¼šæ— è®ºæ–°äº‹åŠ¡å¦‚ä½•ç»“æŸï¼Œä¹‹å‰è¢«æŒ‚èµ·çš„&lt;strong&gt;å¤–éƒ¨äº‹åŠ¡éƒ½ä¼šæ¢å¤&lt;/strong&gt;æ‰§è¡Œã€‚å¤–éƒ¨äº‹åŠ¡çš„æäº¤æˆ–å›æ»šå¯¹æ–°äº‹åŠ¡å·²æäº¤çš„ç»“æœ&lt;strong&gt;ä¸äº§ç”Ÿä»»ä½•å½±å“&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="propagation_nested"&gt;PROPAGATION_NESTED
&lt;/h4&gt;&lt;p&gt;å½“æ–¹æ³•è®¾ç½®ä¸º &lt;code&gt;PROPAGATION_NESTED&lt;/code&gt;ä¸”å½“å‰å·²å­˜åœ¨äº‹åŠ¡æ—¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºä¿å­˜ç‚¹&lt;/strong&gt;ï¼šSpring å’Œåº•å±‚æ•°æ®åº“åä½œï¼Œåœ¨å¤–éƒ¨äº‹åŠ¡çš„å½“å‰çŠ¶æ€è®¾ç½®ä¸€ä¸ª&lt;strong&gt;ä¿å­˜ç‚¹ (Savepoint)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ–¹æ³•&lt;/strong&gt;ï¼šç›®æ ‡æ–¹æ³•å°±åœ¨è¿™ä¸ªåŸºäºä¿å­˜ç‚¹çš„&lt;strong&gt;åµŒå¥—äº‹åŠ¡&lt;/strong&gt;ä¸­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨åˆ†å›æ»š&lt;/strong&gt;ï¼šå¦‚æœåµŒå¥—äº‹åŠ¡ï¼ˆæ–¹æ³•æ‰§è¡Œï¼‰ä¸­å‘ç”Ÿå›æ»šï¼Œæ•°æ®åº“æ“ä½œ&lt;strong&gt;ä»…å›æ»šåˆ°ä¹‹å‰è®¾ç½®çš„ä¿å­˜ç‚¹&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€åµŒå¥—äº‹åŠ¡å†…çš„æ“ä½œè¢«æ’¤é”€ï¼Œä½†&lt;strong&gt;å¤–éƒ¨äº‹åŠ¡åœ¨ä¿å­˜ç‚¹ä¹‹å‰çš„æ‰€æœ‰æ“ä½œä¾ç„¶æœ‰æ•ˆ&lt;/strong&gt;ï¼Œå¤–éƒ¨äº‹åŠ¡å¯ä»¥é€‰æ‹©ç»§ç»­æ‰§è¡Œæˆ–æ•´ä½“å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•´ä½“æäº¤/å›æ»š&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœå¤–éƒ¨äº‹åŠ¡æœ€ç»ˆ&lt;strong&gt;æäº¤&lt;/strong&gt;ï¼ŒåµŒå¥—äº‹åŠ¡ä¸­çš„æ“ä½œä¹Ÿå°†è¢«ä¸€å¹¶æäº¤ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå¤–éƒ¨äº‹åŠ¡æœ€ç»ˆ&lt;strong&gt;å›æ»š&lt;/strong&gt;ï¼Œåˆ™&lt;strong&gt;æ‰€æœ‰æ“ä½œ&lt;/strong&gt;ï¼ŒåŒ…æ‹¬åµŒå¥—äº‹åŠ¡å†…çš„æ“ä½œï¼Œéƒ½å°†å›æ»šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-2"&gt;ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;PROPAGATION_REQUIRES_NEW é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—è®°å½•/å®¡è®¡è·Ÿè¸ª&lt;/strong&gt;ï¼šæ— è®ºä¸»ä¸šåŠ¡äº‹åŠ¡æˆåŠŸä¸å¦ï¼ˆå³ä½¿å›æ»šï¼‰ï¼Œæ“ä½œæ—¥å¿—éƒ½å¿…é¡»è¢«ç‹¬ç«‹è®°å½•å¹¶æŒä¹…åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥æ¶ˆæ¯å‘é€&lt;/strong&gt;ï¼šä¸»äº‹åŠ¡å¤±è´¥å›æ»šï¼Œä½†æ¶ˆæ¯å¯èƒ½å·²å‘å‡ºï¼Œéœ€ç‹¬ç«‹äº‹åŠ¡ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ›´é«˜æˆ–æ›´ä½éš”ç¦»çº§åˆ«çš„æ“ä½œ&lt;/strong&gt;ï¼šç‹¬ç«‹äº‹åŠ¡å¯ä»¥è®¾ç½®è‡ªå·±çš„éš”ç¦»çº§åˆ«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PROPAGATION_NESTED é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰¹é‡æ•°æ®å¤„ç†&lt;/strong&gt;ï¼šå¤„ç†100æ¡æ•°æ®ï¼Œå³ä½¿å…¶ä¸­ç¬¬99æ¡å¤±è´¥ï¼Œä¹Ÿå¸Œæœ›å‰98æ¡æˆåŠŸï¼Œæœ€å1æ¡å¯ä»¥ä¸å¤„ç†æˆ–ç¨åé‡è¯•ã€‚NESTED å…è®¸éƒ¨åˆ†å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚ä¸šåŠ¡ä¸­çš„éæ ¸å¿ƒæ­¥éª¤&lt;/strong&gt;ï¼šä¾‹å¦‚ä¸‹å•æµç¨‹ä¸­ï¼Œæ ¸å¿ƒæ˜¯æ‰£åº“å­˜å’Œåˆ›å»ºè®¢å•ï¼Œè€Œå‘é€ä¼˜æƒ åˆ¸æ›´æ–°ç§¯åˆ†å¯ä»¥æ˜¯NESTEDäº‹åŠ¡ã€‚å¦‚æœæ›´æ–°ç§¯åˆ†å¤±è´¥ï¼Œä¸åº”å¯¼è‡´æ•´ä¸ªè®¢å•å¤±è´¥ï¼Œä½†è‹¥è®¢å•æœ€ç»ˆæ”¯ä»˜å¤±è´¥ï¼ˆå¤–éƒ¨äº‹åŠ¡å›æ»šï¼‰ï¼Œç§¯åˆ†æ“ä½œä¹Ÿä¼šè¢«å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œè¯•ä¸€è¯•â€æ“ä½œ&lt;/strong&gt;ï¼šä¸€äº›å¯èƒ½å¤±è´¥ä½†ä¸å½±å“ä¸»æµç¨‹çš„æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯æ”¯æŒ&lt;/strong&gt;ï¼š&lt;code&gt;PROPAGATION_NESTED&lt;/code&gt;éœ€è¦&lt;strong&gt;æ•°æ®åº“å’ŒJDBCé©±åŠ¨ç¨‹åºæ”¯æŒä¿å­˜ç‚¹&lt;/strong&gt;ï¼ˆé€šå¸¸éœ€è¦ JDBC 3.0 åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ã€‚å¹¶éæ‰€æœ‰æ•°æ®åº“éƒ½åŒç­‰æ”¯æŒæ‰€æœ‰ä¿å­˜ç‚¹åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸å¤„ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¯¹äº &lt;code&gt;REQUIRES_NEW&lt;/code&gt;ï¼Œå¦‚æœå†…éƒ¨äº‹åŠ¡å·²æäº¤ï¼Œå³ä½¿å¤–éƒ¨äº‹åŠ¡å› å¼‚å¸¸å›æ»šï¼Œå†…éƒ¨äº‹åŠ¡çš„ç»“æœ&lt;strong&gt;ä¹Ÿä¸ä¼šè¢«æ’¤é”€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº &lt;code&gt;NESTED&lt;/code&gt;ï¼Œå¦‚æœåµŒå¥—äº‹åŠ¡å› å¼‚å¸¸å›æ»šï¼Œé»˜è®¤æƒ…å†µä¸‹&lt;strong&gt;å¼‚å¸¸ä¼šä¼ æ’­åˆ°å¤–éƒ¨äº‹åŠ¡&lt;/strong&gt;ã€‚å¦‚æœä½ ä¸å¸Œæœ›å¤–éƒ¨äº‹åŠ¡å› åµŒå¥—äº‹åŠ¡çš„å¼‚å¸¸è€Œå›æ»šï¼Œå¿…é¡»åœ¨è°ƒç”¨åµŒå¥—äº‹åŠ¡çš„æ–¹æ³•ä¸­ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;try...catch&lt;/code&gt;&lt;/strong&gt; å¤„ç†å¼‚å¸¸ï¼Œå¹¶å†³å®šå¤–éƒ¨äº‹åŠ¡æ˜¯ç»§ç»­è¿˜æ˜¯å›æ»šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªè°ƒç”¨é—®é¢˜&lt;/strong&gt;ï¼šåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œä¸€ä¸ªæ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªæœ‰ &lt;code&gt;@Transactional&lt;/code&gt;æ³¨è§£çš„æ–¹æ³•ï¼Œ&lt;strong&gt;äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå¯èƒ½ä¼šå¤±æ•ˆ&lt;/strong&gt;ã€‚è¿™æ˜¯å› ä¸º Spring çš„äº‹åŠ¡ç®¡ç†é€šå¸¸é€šè¿‡ä»£ç†å®ç°ï¼Œè‡ªè°ƒç”¨ä¼šç»•è¿‡ä»£ç†ã€‚å»ºè®®å°†éœ€è¦ä¸åŒäº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„æ–¹æ³•æ”¾åœ¨ä¸åŒçš„ Service ç±»ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é€‰æ‹©å»ºè®®"&gt;ğŸ’¡ é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©çš„å…³é”®åœ¨äºä½ å¸Œæœ›çš„&lt;strong&gt;ç‹¬ç«‹æ€§ç¨‹åº¦&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;å®Œå…¨ç‹¬ç«‹&lt;/strong&gt;ï¼Œæˆè´¥ä¸å¦ä¸ä¸»ä¸šåŠ¡äº’ä¸å¹²æ‰°ï¼Ÿ -&amp;gt; &lt;strong&gt;PROPAGATION_REQUIRES_NEW&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å¸Œæœ›æ˜¯ä¸»ä¸šåŠ¡çš„ä¸€éƒ¨åˆ†ï¼Œä½†å…è®¸&lt;strong&gt;éƒ¨åˆ†å¤±è´¥&lt;/strong&gt;è€Œä¸å½±å“å…¨å±€ï¼Ÿ -&amp;gt; &lt;strong&gt;PROPAGATION_NESTED&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2 id="ä¸‰çº§ç¼“å­˜"&gt;ä¸‰çº§ç¼“å­˜
&lt;/h2&gt;&lt;p&gt;Spring æ¡†æ¶é€šè¿‡ä¸€å¥—ç²¾å·§çš„&lt;strong&gt;ä¸‰çº§ç¼“å­˜&lt;/strong&gt;æœºåˆ¶ï¼Œç¡®å®èƒ½å¤Ÿé»˜è®¤è§£å†³å•ä¾‹æ¨¡å¼ä¸‹é€šè¿‡å­—æ®µæ³¨å…¥æˆ– Setter æ³¨å…¥å¼•å‘çš„å¾ªç¯ä¾èµ–é—®é¢˜ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ &lt;strong&gt;â€œæå‰æš´éœ²â€&lt;/strong&gt; ä¸€ä¸ªå°šæœªå®Œæˆåˆå§‹åŒ–çš„ Bean å¼•ç”¨ï¼Œä»è€Œæ‰“ç ´ç›¸äº’ç­‰å¾…çš„åƒµå±€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿç†è§£ä¸‰çº§ç¼“å­˜å„è‡ªçš„åˆ†å·¥ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç¼“å­˜åç§° (æºç ä¸­çš„ Map)&lt;/th&gt;
&lt;th&gt;å±‚çº§&lt;/th&gt;
&lt;th&gt;å­˜å‚¨å†…å®¹ä¸ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;singletonObjects&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€çº§ç¼“å­˜&lt;/td&gt;
&lt;td&gt;å­˜æ”¾å·²ç»å®Œå…¨åˆå§‹åŒ–å¥½çš„ Beanï¼ˆ&lt;strong&gt;æˆå“&lt;/strong&gt;ï¼‰ã€‚æˆ‘ä»¬å¹³æ—¶ä» Spring å®¹å™¨ä¸­è·å–åˆ°çš„å°±æ˜¯è¿™é‡Œçš„å¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;earlySingletonObjects&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äºŒçº§ç¼“å­˜&lt;/td&gt;
&lt;td&gt;å­˜æ”¾æå‰æš´éœ²å‡ºæ¥çš„ Bean æ—©æœŸå¼•ç”¨ï¼ˆ&lt;strong&gt;åŠæˆå“&lt;/strong&gt;ï¼‰ã€‚å®ƒçš„ä½œç”¨æ˜¯ç¡®ä¿åœ¨æ•´ä¸ªå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå¯¹åŒä¸€ä¸ª Bean çš„æ—©æœŸå¼•ç”¨æ˜¯å”¯ä¸€çš„ï¼Œä¸»è¦ç”¨äºé˜²æ­¢é‡å¤åˆ›å»ºä»£ç†å¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;singletonFactories&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸‰çº§ç¼“å­˜&lt;/td&gt;
&lt;td&gt;å­˜æ”¾ç”¨äºç”Ÿæˆ Bean æ—©æœŸå¼•ç”¨çš„ &lt;strong&gt;&lt;code&gt;ObjectFactory&lt;/code&gt;&lt;/strong&gt; å·¥å‚å¯¹è±¡ã€‚è¿™æ˜¯å®ç°â€œæå‰æš´éœ²â€æœ€å…³é”®çš„ä¸€æ­¥ï¼Œå®ƒå°è£…äº†ç”Ÿæˆæ—©æœŸå¼•ç”¨çš„é€»è¾‘ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è§£å†³æµç¨‹è¯¦è§£"&gt;ğŸ”„ è§£å†³æµç¨‹è¯¦è§£
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬ä»¥ä¸€ä¸ªç»å…¸çš„åœºæ™¯ä¸ºä¾‹ï¼šBean A ä¾èµ– Bean Bï¼Œè€Œ Bean B åˆä¾èµ– Bean Aã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¼€å§‹åˆ›å»º Bean A&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ä¾‹åŒ–&lt;/strong&gt;ï¼šSpring é¦–å…ˆè°ƒç”¨ Bean A çš„æ„é€ å™¨ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…å¯¹è±¡ç©ºé—´ï¼ˆæ­¤æ—¶ A å¯¹è±¡å·²å­˜åœ¨ï¼Œä½†æ‰€æœ‰ä¾èµ–å­—æ®µå¦‚ &lt;code&gt;B b&lt;/code&gt;éƒ½ä¸º &lt;code&gt;null&lt;/code&gt;ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªâ€œåŠæˆå“â€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æš´éœ²å·¥å‚ï¼ˆå…³é”®æ­¥éª¤ï¼‰&lt;/strong&gt;ï¼šå®ä¾‹åŒ–åï¼ŒSpring ä¸ä¼šç«‹å³ä¸º A æ³¨å…¥å±æ€§ï¼Œè€Œæ˜¯å°†ä¸€ä¸ªèƒ½ç”Ÿäº§ A æ—©æœŸå¼•ç”¨çš„ &lt;code&gt;ObjectFactory&lt;/code&gt;å·¥å‚å¯¹è±¡æ”¾å…¥ &lt;strong&gt;ä¸‰çº§ç¼“å­˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å…¥å±æ€§&lt;/strong&gt;ï¼šæ¥ä¸‹æ¥ï¼ŒSpring å‡†å¤‡ä¸º A æ³¨å…¥å±æ€§ Bã€‚å®ƒå‘ç°éœ€è¦ä¾èµ– Bean Bã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬è€Œåˆ›å»º Bean B&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ä¾‹åŒ–&lt;/strong&gt;ï¼šä¸ A ç±»ä¼¼ï¼ŒSpring å…ˆå®ä¾‹åŒ– Bean Bï¼ˆå¾—åˆ°ä¸€ä¸ªåŠæˆå“çš„ Bï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æš´éœ²å·¥å‚&lt;/strong&gt;ï¼šåŒæ ·ï¼Œå°† B çš„ &lt;code&gt;ObjectFactory&lt;/code&gt;å·¥å‚æ”¾å…¥&lt;strong&gt;ä¸‰çº§ç¼“å­˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å…¥å±æ€§&lt;/strong&gt;ï¼šå½“ Spring å°è¯•ä¸º B æ³¨å…¥å±æ€§ A æ—¶ï¼Œå…³é”®çš„è½¬æŠ˜ç‚¹å‡ºç°äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç ´è§£å¾ªç¯çš„å…³é”®æ—¶åˆ»&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Spring å‘ç° B éœ€è¦ Aï¼Œäºæ˜¯å¼€å§‹æŸ¥æ‰¾ Aã€‚å®ƒé¦–å…ˆæ£€æŸ¥&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt;ï¼ˆæˆå“æ± ï¼‰ï¼Œæ²¡æœ‰æ‰¾åˆ° Aã€‚&lt;/li&gt;
&lt;li&gt;æ¥ç€æ£€æŸ¥&lt;strong&gt;äºŒçº§ç¼“å­˜&lt;/strong&gt;ï¼ˆåŠæˆå“æ± ï¼‰ï¼Œæ­¤æ—¶ä¹Ÿæ²¡æœ‰ Aã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆï¼Œå®ƒåœ¨&lt;strong&gt;ä¸‰çº§ç¼“å­˜&lt;/strong&gt;ä¸­æ‰¾åˆ°äº†ä¹‹å‰å­˜æ”¾çš„ A çš„ &lt;code&gt;ObjectFactory&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;Spring ç«‹å³è°ƒç”¨è¿™ä¸ªå·¥å‚çš„ &lt;code&gt;getObject()&lt;/code&gt;æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæ‰§è¡Œä¸€ä¸ªå…³é”®æ“ä½œï¼š&lt;strong&gt;&lt;code&gt;getEarlyBeanReference()&lt;/code&gt;&lt;/strong&gt;ã€‚å¦‚æœ Bean A éœ€è¦è¢« AOP ä»£ç†ï¼ˆä¾‹å¦‚è¢« &lt;code&gt;@Transactional&lt;/code&gt;æ ‡è®°ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šåœ¨æ­¤åˆ»è¿”å›ä¸€ä¸ª&lt;strong&gt;ä»£ç†å¯¹è±¡&lt;/strong&gt;ï¼›å¦‚æœä¸éœ€è¦ï¼Œåˆ™è¿”å›åŸå§‹å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;å°†è¿™ä¸ªè·å–åˆ°çš„ A çš„æ—©æœŸå¼•ç”¨ï¼ˆå¯èƒ½æ˜¯ä»£ç†å¯¹è±¡ï¼‰æ”¾å…¥&lt;strong&gt;äºŒçº§ç¼“å­˜&lt;/strong&gt;ï¼Œå¹¶å°†å…¶ä»&lt;strong&gt;ä¸‰çº§ç¼“å­˜&lt;/strong&gt;ä¸­ç§»é™¤ã€‚ç„¶åï¼Œå°†è¿™ä¸ªæ—©æœŸå¼•ç”¨æ³¨å…¥åˆ° Bean B ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡³æ­¤ï¼Œå¾ªç¯è¢«æ‰“ç ´&lt;/strong&gt;ï¼šBean B æˆåŠŸè·å¾—äº† A çš„å¼•ç”¨ï¼ˆå°½ç®¡ A è¿˜ä¸å®Œæ•´ï¼‰ï¼Œä»è€Œå¯ä»¥ç»§ç»­å®Œæˆ B åç»­çš„åˆå§‹åŒ–æµç¨‹ï¼ˆå¦‚ &lt;code&gt;@PostConstruct&lt;/code&gt;æ–¹æ³•ï¼‰ã€‚B åˆå§‹åŒ–å®Œæˆåï¼Œè¢«æ”¾å…¥&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®Œæˆ Bean A çš„åˆ›å»º&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“ Bean B åˆ›å»ºå®Œæ¯•ï¼Œæµç¨‹è¿”å›åˆ°è¿˜åœ¨ç­‰å¾…ä¾èµ–çš„ Bean Aã€‚æ­¤æ—¶ï¼ŒSpring å¯ä»¥é¡ºåˆ©åœ°ä»ä¸€çº§ç¼“å­˜ä¸­è·å–åˆ°å·²ç»å®Œå…¨åˆå§‹åŒ–çš„ Bean Bï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ° Bean A ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;Bean A éšåå®Œæˆè‡ªå·±çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæœ€ç»ˆä¹Ÿæ™‹å‡ä¸ºâ€œæˆå“â€ï¼Œè¢«ç§»åŠ¨åˆ°&lt;strong&gt;ä¸€çº§ç¼“å­˜&lt;/strong&gt;ã€‚åŒæ—¶ï¼ŒSpring ä¼šæ¸…ç†æ‰äºŒçº§ç¼“å­˜ä¸­å…³äº A çš„ä¸´æ—¶æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸ºä½•éœ€è¦ä¸‰çº§ç¼“å­˜"&gt;âš ï¸ ä¸ºä½•éœ€è¦ä¸‰çº§ç¼“å­˜ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜ï¼Œä¸¤çº§ä¸å¤Ÿå—ï¼Ÿè¿™ä¸»è¦æ˜¯ä¸ºäº†&lt;strong&gt;ä¼˜é›…åœ°å¤„ç† AOP ä»£ç†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœåªæœ‰ä¸¤çº§ç¼“å­˜ï¼ˆä¸€çº§å’ŒäºŒçº§ï¼‰&lt;/strong&gt;ï¼šåœ¨å®ä¾‹åŒ– Bean A åï¼Œæˆ‘ä»¬å°±å¿…é¡»ç«‹å³åˆ¤æ–­æ˜¯å¦éœ€è¦ä¸ºå…¶åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¹¶å°†è¿™ä¸ªä»£ç†å¯¹è±¡ç›´æ¥æ”¾å…¥äºŒçº§ç¼“å­˜ã€‚ä½†è¿™è¿èƒŒäº† Spring çš„è®¾è®¡åŸåˆ™ï¼šä»£ç†å¯¹è±¡é€šå¸¸åº”è¯¥åœ¨ Bean å®Œå…¨åˆå§‹åŒ–ä¹‹åæ‰ç”Ÿæˆï¼ˆåœ¨ &lt;code&gt;postProcessAfterInitialization&lt;/code&gt;é˜¶æ®µï¼‰ã€‚å¦‚æœæå‰ç”Ÿæˆï¼Œå¯èƒ½ä¼šå½±å“ Bean ç”Ÿå‘½å‘¨æœŸçš„æ­£å¸¸æ‰§è¡Œï¼Œå¸¦æ¥ä¸ç¡®å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰çº§ç¼“å­˜çš„ä¼˜åŠ¿&lt;/strong&gt;ï¼šä¸‰çº§ç¼“å­˜å­˜æ”¾çš„æ˜¯ä¸€ä¸ª&lt;strong&gt;å·¥å‚ï¼ˆ&lt;code&gt;ObjectFactory&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼Œè¿™ä¸ªå·¥å‚æ˜¯â€œæ‡’åŠ è½½â€çš„ã€‚åªæœ‰å½“å‘ç”Ÿå¾ªç¯ä¾èµ–ã€çœŸçš„æœ‰å…¶ä»– Bean éœ€è¦æ³¨å…¥è¿™ä¸ªæ—©æœŸå¼•ç”¨æ—¶ï¼Œå·¥å‚æ‰ä¼šè¢«è°ƒç”¨å¹¶ç”Ÿæˆä»£ç†ï¼ˆæˆ–è¿”å›åŸå§‹å¯¹è±¡ï¼‰ã€‚è¿™æ ·æ—¢è§£å†³äº†å¾ªç¯ä¾èµ–ï¼Œåˆä¿è¯äº† Beanï¼ˆåŒ…æ‹¬å…¶ä»£ç†å¯¹è±¡ï¼‰çš„ç”Ÿå‘½å‘¨æœŸä¸å—ç ´åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-spring-æ— æ³•è§£å†³çš„å¾ªç¯ä¾èµ–åœºæ™¯"&gt;ğŸš« Spring æ— æ³•è§£å†³çš„å¾ªç¯ä¾èµ–åœºæ™¯
&lt;/h3&gt;&lt;p&gt;éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œä¸‰çº§ç¼“å­˜å¹¶éä¸‡èƒ½è¯ï¼Œå®ƒåœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä¼šå¤±æ•ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šå› ä¸ºæ„é€ å™¨æ³¨å…¥è¦æ±‚åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„åŒæ—¶å°±å¿…é¡»å®Œæˆæ‰€æœ‰ä¾èµ–çš„æ³¨å…¥ã€‚æ­¤æ—¶å¯¹è±¡éƒ½è¿˜æ²¡åˆ›å»ºå‡ºæ¥ï¼Œæ ¹æœ¬æ— æ³•è¿›è¡Œâ€œæå‰æš´éœ²â€ï¼ŒSpring ä¼šç›´æ¥æŠ›å‡º &lt;code&gt;BeanCurrentlyInCreationException&lt;/code&gt;å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå‹ï¼ˆPrototypeï¼‰Bean çš„å¾ªç¯ä¾èµ–&lt;/strong&gt;ï¼šSpring ä¸ç¼“å­˜åŸå‹ Bean çš„å®ä¾‹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚å› æ­¤ï¼Œä¸‰çº§ç¼“å­˜æœºåˆ¶æ— æ³•ç”¨äºè§£å†³åŸå‹ Bean çš„å¾ªç¯ä¾èµ–ï¼ŒåŒæ ·ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºè¿™äº›æ— æ³•è§£å†³çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;@Lazy&lt;/code&gt;æ³¨è§£&lt;/strong&gt; å°†ä¾èµ–æ ‡è®°ä¸ºæ‡’åŠ è½½ï¼Œæˆ–è€…ä»ä»£ç è®¾è®¡å±‚é¢&lt;strong&gt;é‡æ„&lt;/strong&gt;ä»¥æ¶ˆé™¤å¾ªç¯ä¾èµ–ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ Spring è§£å†³å¾ªç¯ä¾èµ–çš„å·§å¦™æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="æ—¶æœº"&gt;æ—¶æœº
&lt;/h2&gt;&lt;p&gt;Spring æ¡†æ¶ä¸­æ„é€ å™¨æ³¨å…¥ã€å­—æ®µæ³¨å…¥å’Œ Setter æ³¨å…¥çš„&lt;strong&gt;æ ¸å¿ƒåŒºåˆ«ä¹‹ä¸€å°±åœ¨äºå®ƒä»¬çš„æ³¨å…¥æ—¶æœº&lt;/strong&gt;ï¼Œè¿™ç›´æ¥å½±å“äº†ä»£ç çš„å¯é æ€§ã€å®‰å…¨æ€§å’Œè®¾è®¡æ¨¡å¼ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æ„é€ å™¨æ³¨å…¥ (Constructor Injection)&lt;/th&gt;
&lt;th&gt;Setter æ³¨å…¥ (Setter Injection)&lt;/th&gt;
&lt;th&gt;å­—æ®µæ³¨å…¥ (Field Injection)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘ç”Ÿæ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®ä¾‹åŒ–é˜¶æ®µ&lt;/strong&gt;ï¼Œå¯¹è±¡åˆ›å»ºæ—¶&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹åŒ–é˜¶æ®µ&lt;/strong&gt;ï¼Œå¯¹è±¡åˆ›å»ºå&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆå§‹åŒ–é˜¶æ®µ&lt;/strong&gt;ï¼Œå¯¹è±¡åˆ›å»ºå&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è±¡åˆ›å»ºåå³å¤„äº&lt;strong&gt;å®Œå…¨åˆå§‹åŒ–&lt;/strong&gt;çŠ¶æ€&lt;/td&gt;
&lt;td&gt;å¯¹è±¡å¯èƒ½å¤„äº&lt;strong&gt;éƒ¨åˆ†åˆå§‹åŒ–&lt;/strong&gt;çŠ¶æ€&lt;/td&gt;
&lt;td&gt;å¯¹è±¡å¯èƒ½å¤„äº&lt;strong&gt;éƒ¨åˆ†åˆå§‹åŒ–&lt;/strong&gt;çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯å˜æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–å¯å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;ï¼Œ&lt;strong&gt;æ”¯æŒä¸å¯å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–å¯å˜ï¼Œ&lt;strong&gt;ä¸æ”¯æŒä¸å¯å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–å¯å˜ï¼Œ&lt;strong&gt;ä¸æ”¯æŒä¸å¯å˜&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼ºåˆ¶æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºåˆ¶&lt;/strong&gt;ä¾èµ–ï¼Œå¿…é¡»æä¾›&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯é€‰&lt;/strong&gt;ä¾èµ–ï¼Œå¯ä¸æä¾›&lt;/td&gt;
&lt;td&gt;é»˜è®¤å¼ºåˆ¶ï¼Œå¯è®¾ä¸ºå¯é€‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¾ªç¯ä¾èµ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— æ³•&lt;/strong&gt;è§£å†³æ„é€ å™¨å¾ªç¯ä¾èµ–&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥&lt;/strong&gt;è§£å†³ï¼ˆå€ŸåŠ©ä¸‰çº§ç¼“å­˜ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥&lt;/strong&gt;è§£å†³ï¼ˆå€ŸåŠ©ä¸‰çº§ç¼“å­˜ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­â­â­â­â­ (&lt;strong&gt;Spring å®˜æ–¹æ¨è&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;â­â­â­â­ (é€‚ç”¨äºå¯é€‰ä¾èµ–)&lt;/td&gt;
&lt;td&gt;â­â­ (ä¸æ¨èç”¨äºä¸šåŠ¡ä»£ç )&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å„æ³¨å…¥æ–¹å¼è¯¦è§£ä¸å½±å“"&gt;ğŸ’¡ å„æ³¨å…¥æ–¹å¼è¯¦è§£ä¸å½±å“
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ·±å…¥çœ‹çœ‹æ¯ç§æ³¨å…¥æ–¹å¼çš„å…·ä½“æ—¶æœºå’Œå…¶å¸¦æ¥çš„å½±å“ã€‚&lt;/p&gt;
&lt;h4 id="1-æ„é€ å™¨æ³¨å…¥"&gt;1. æ„é€ å™¨æ³¨å…¥
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶æœº&lt;/strong&gt;ï¼šåœ¨ Bean çš„&lt;strong&gt;å®ä¾‹åŒ–ï¼ˆInstantiationï¼‰&lt;/strong&gt; è¿‡ç¨‹ä¸­ï¼ŒSpring å®¹å™¨é€šè¿‡åå°„è°ƒç”¨ç±»çš„æ„é€ å™¨æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œæ­¤æ—¶ä¾èµ–é¡¹ä½œä¸ºå‚æ•°ç›´æ¥ä¼ å…¥ã€‚è¿™æ˜¯ç”Ÿå‘½å‘¨æœŸä¸­&lt;strong&gt;æœ€æ—©&lt;/strong&gt;çš„æ³¨å…¥ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒå½±å“&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®Œå…¨åˆå§‹åŒ–çš„å¯¹è±¡&lt;/strong&gt;ï¼šå¯¹è±¡ä¸€æ—¦è¢«åˆ›å»ºå‡ºæ¥ï¼Œå…¶æ‰€æœ‰å¿…éœ€çš„ä¾èµ–å°±å·²ç»å°±ä½ï¼Œå¯ä»¥ç«‹å³å®‰å…¨ä½¿ç”¨ï¼Œé¿å…äº†ç©ºæŒ‡é’ˆå¼‚å¸¸çš„é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰&lt;/strong&gt;ï¼šä¾èµ–é¡¹å¯ä»¥è¢«å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå†…ä¸å¯æ”¹å˜ã€‚è¿™å¤§å¤§æå‡äº†&lt;strong&gt;çº¿ç¨‹å®‰å…¨æ€§&lt;/strong&gt;ï¼Œå› ä¸ºå¯¹è±¡çš„çŠ¶æ€æ˜¯å›ºå®šçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼å¥‘çº¦&lt;/strong&gt;ï¼šæ„é€ å™¨æ¸…æ™°åœ°å®šä¹‰äº†åˆ›å»ºä¸€ä¸ªæœ‰æ•ˆå¯¹è±¡æ‰€å¿…éœ€çš„å…¨éƒ¨ä¾èµ–ï¼Œæ˜¯ä¸€ç§&lt;strong&gt;è‡ªæˆ‘æ–‡æ¡£åŒ–&lt;/strong&gt;çš„ä»£ç è®¾è®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-setter-æ³¨å…¥"&gt;2. Setter æ³¨å…¥
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶æœº&lt;/strong&gt;ï¼šåœ¨ Bean å®ä¾‹åŒ–&lt;strong&gt;ä¹‹å&lt;/strong&gt;ï¼Œ&lt;strong&gt;åˆå§‹åŒ–ï¼ˆInitializationï¼‰&lt;/strong&gt; é˜¶æ®µä¹‹å‰ï¼ŒSpring å®¹å™¨é€šè¿‡è°ƒç”¨å¯¹åº”çš„ setter æ–¹æ³•æ¥å®Œæˆä¾èµ–æ³¨å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒå½±å“&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;ï¼šå…è®¸åœ¨å¯¹è±¡åˆ›å»ºåé‡æ–°é…ç½®æˆ–æ›¿æ¢ä¾èµ–ï¼Œé€‚ç”¨äºé‚£äº›ç¡®å®æ˜¯å¯é€‰çš„ä¾èµ–é¡¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨åˆ†åˆå§‹åŒ–é£é™©&lt;/strong&gt;ï¼šå¯¹è±¡åœ¨æ„é€ åã€setter è°ƒç”¨å‰ï¼Œå…¶ä¾èµ–é¡¹æ˜¯ &lt;code&gt;null&lt;/code&gt;æˆ–æœªå®šä¹‰çŠ¶æ€ã€‚å¦‚æœå…¶ä»–æ–¹æ³•è¯¯åœ¨ setter è°ƒç”¨å‰ä½¿ç”¨äº†è¿™äº›ä¾èµ–ï¼Œä¼šå¯¼è‡´é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-å­—æ®µæ³¨å…¥"&gt;3. å­—æ®µæ³¨å…¥
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶æœº&lt;/strong&gt;ï¼šä¸ Setter æ³¨å…¥ç±»ä¼¼ï¼Œå‘ç”Ÿåœ¨ Bean å®ä¾‹åŒ–ä¹‹åã€åˆå§‹åŒ–ä¹‹å‰ã€‚Spring å®¹å™¨é€šè¿‡&lt;strong&gt;åå°„ï¼ˆReflectionï¼‰&lt;/strong&gt; æœºåˆ¶ç›´æ¥ä¸ºæ ‡æ³¨äº† &lt;code&gt;@Autowired&lt;/code&gt;çš„å­—æ®µèµ‹å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒå½±å“&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç ç®€æ´æ€§&lt;/strong&gt;ï¼šè¡¨é¢ä¸Šä»£ç éå¸¸ç®€æ´ï¼Œä¸éœ€è¦æ„é€ å™¨æˆ– setter æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸¥é‡ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éšè—ä¾èµ–&lt;/strong&gt;ï¼šä¾èµ–å…³ç³»æ²¡æœ‰é€šè¿‡å…¬å…±æ¥å£ï¼ˆæ„é€ å™¨æˆ–æ–¹æ³•ï¼‰æš´éœ²ï¼Œè¿åäº†&lt;strong&gt;ä¾èµ–æ˜ç¡®&lt;/strong&gt;çš„åŸåˆ™ï¼Œä½¿ä»£ç æ›´éš¾ç†è§£å’Œæµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç ´åå°è£…&lt;/strong&gt;ï¼šé€šè¿‡åå°„ç›´æ¥æ“ä½œç§æœ‰å­—æ®µï¼Œç ´åäº†å¯¹è±¡çš„å°è£…æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Spring å¼ºè€¦åˆ&lt;/strong&gt;ï¼šå› ä¸ºæ³¨å…¥é€»è¾‘å®Œå…¨ä¾èµ–äº Spring çš„æ³¨è§£ï¼Œä½¿å¾—è¿™ä¸ªç±»éš¾ä»¥è„±ç¦» Spring å®¹å™¨è¿›è¡Œç‹¬ç«‹çš„å•å…ƒæµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;ç†è§£æ³¨å…¥æ—¶æœºçš„åŒºåˆ«ï¼Œå…³é”®åœ¨äºè®¤è¯†åˆ°å®ƒå¦‚ä½•å½±å“å¯¹è±¡çš„&lt;strong&gt;çŠ¶æ€å®Œæ•´æ€§å’Œä»£ç çš„å¥å£®æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ„é€ å™¨æ³¨å…¥&lt;/strong&gt; ç¡®ä¿äº†å¯¹è±¡çš„&lt;strong&gt;ä¸å˜æ€§å’Œå³æ—¶å¯ç”¨æ€§&lt;/strong&gt;ï¼Œæ˜¯ç°ä»£ Spring åº”ç”¨ä¸­çš„&lt;strong&gt;é¦–é€‰æ–¹å¼&lt;/strong&gt;ï¼Œå°¤å…¶é€‚ç”¨äºæ‰€æœ‰å¿…éœ€çš„ã€ä¸å¯å˜çš„ä¾èµ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Setter æ³¨å…¥&lt;/strong&gt; é€‚ç”¨äºçœŸæ­£çš„&lt;strong&gt;å¯é€‰ä¾èµ–&lt;/strong&gt;ï¼Œæˆ–è€…é‚£äº›åœ¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå†…å¯èƒ½éœ€è¦æ”¹å˜çš„ä¾èµ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—æ®µæ³¨å…¥&lt;/strong&gt; å°½ç®¡ä¹¦å†™ç®€ä¾¿ï¼Œä½†ç”±äºå…¶å›ºæœ‰çš„ç¼ºç‚¹ï¼Œåœ¨æ­£å¼çš„ä¸šåŠ¡ä»£ç ä¸­åº”&lt;strong&gt;é¿å…ä½¿ç”¨&lt;/strong&gt;ï¼Œå®ƒå¯èƒ½æ›´é€‚åˆä¸€äº›éå¸¸ç®€å•çš„é…ç½®ç±»æˆ–é—ç•™ä»£ç ç»´æŠ¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ä¸åŒæ³¨å…¥æ–¹å¼çš„æ—¶æœºå’Œå½±å“ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é€‰æ‹©è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="conditionalonmissingbean--datasource"&gt;@ConditionalOnMissingBean &amp;amp; DataSource
&lt;/h2&gt;&lt;p&gt;ã€‚DataSource çš„è‡ªåŠ¨é…ç½®ç¡®å®æ˜¯åŸºäº &lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;æœºåˆ¶çš„ï¼Œè¿™æ˜¯ Spring Boot â€œ&lt;strong&gt;çº¦å®šä¼˜äºé…ç½®&lt;/strong&gt;â€å’Œâ€œ&lt;strong&gt;ç”¨æˆ·è‡ªå®šä¹‰ä¼˜å…ˆ&lt;/strong&gt;â€ç†å¿µçš„å®Œç¾ä½“ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;strong&gt;æ˜¯çš„ï¼ŒSpring Boot é»˜è®¤æä¾›çš„ DataSource Bean æ˜¯ä½¿ç”¨ &lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;æ¡ä»¶æ³¨è§£çš„&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€åªæœ‰åœ¨æ‚¨æ²¡æœ‰è‡ªå·±æ˜¾å¼é…ç½® DataSource Bean çš„æƒ…å†µä¸‹ï¼ŒSpring Boot çš„è‡ªåŠ¨é…ç½®æ‰ä¼šç”Ÿæ•ˆï¼Œä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ•°æ®æºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ä¸åŒåœºæ™¯ä¸‹çš„è¡Œä¸ºï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡ä»¶åœºæ™¯&lt;/th&gt;
&lt;th&gt;DataSource åˆ›å»ºç»“æœ&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®¹å™¨ä¸­ä¸å­˜åœ¨ä»»ä½• DataSource ç±»å‹çš„ Bean&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;åˆ›å»º&lt;/strong&gt; é»˜è®¤ DataSource&lt;/td&gt;
&lt;td&gt;Spring Boot è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆï¼Œæ ¹æ® &lt;code&gt;application.properties&lt;/code&gt;æˆ– &lt;code&gt;application.yml&lt;/code&gt;ä¸­çš„è¿æ¥é…ç½®åˆ›å»ºæ•°æ®æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”¨æˆ·å·²è‡ªå®šä¹‰å¹¶æ³¨å†Œäº† DataSource Bean&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸åˆ›å»º&lt;/strong&gt; é»˜è®¤ DataSource&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;æ£€æµ‹åˆ°å·²æœ‰åŒåBeanï¼Œè‡ªåŠ¨é…ç½®&lt;strong&gt;ä¸ç”Ÿæ•ˆ&lt;/strong&gt;ï¼Œä¼˜å…ˆä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„Beanã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸å…¶ä»–æ¡ä»¶æ³¨è§£ç»„åˆä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€&lt;strong&gt;åŒæ—¶æ»¡è¶³&lt;/strong&gt;æ‰€æœ‰æ¡ä»¶&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨é…ç½®ç±»é€šå¸¸è¿˜ç»„åˆäº† &lt;code&gt;@ConditionalOnClass&lt;/code&gt;ç­‰æ³¨è§£ï¼Œç¡®ä¿åªåœ¨å¼•å…¥æ•°æ®åº“ä¾èµ–ç­‰æ­£ç¡®ç¯å¢ƒä¸‹è¿è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æºç ä¸æœºåˆ¶æµ…æ"&gt;ğŸ” æºç ä¸æœºåˆ¶æµ…æ
&lt;/h3&gt;&lt;p&gt;åœ¨ Spring Boot çš„è‡ªåŠ¨é…ç½®ç±» &lt;code&gt;DataSourceAutoConfiguration&lt;/code&gt;ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ç±»ä¼¼çš„ä»£ç é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration(proxyBeanMethods = false)
@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })
@ConditionalOnMissingBean(type = &amp;#34;dataSource&amp;#34;) // å…³é”®æ¡ä»¶æ³¨è§£
@EnableConfigurationProperties(DataSourceProperties.class)
public class DataSourceAutoConfiguration {
@Bean
@ConditionalOnMissingBean // è¿™é‡Œå†æ¬¡å£°æ˜ï¼Œé’ˆå¯¹æ–¹æ³•çº§åˆ«çš„Beanæ³¨å†Œ
public DataSource dataSource(DataSourceProperties properties) {
return properties.initializeDataSourceBuilder().build();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ®µä»£ç æ­ç¤ºäº†å…¶å·¥ä½œæ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;@ConditionalOnClass({ DataSource.class, ... })&lt;/code&gt;ï¼šç¡®ä¿ç±»è·¯å¾„ä¸‹å­˜åœ¨æ•°æ®åº“ç›¸å…³çš„ç±»ï¼ˆå³æ‚¨å·²ç»å¼•å…¥äº†åƒ &lt;code&gt;spring-boot-starter-jdbc&lt;/code&gt;æˆ–æ•°æ®åº“é©±åŠ¨è¿™æ ·çš„ä¾èµ–ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnMissingBean(type = &amp;quot;dataSource&amp;quot;)&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä¸Šçš„ &lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æ ¸å¿ƒã€‚å®ƒä»¬æ£€æŸ¥æ•´ä¸ª Spring å®¹å™¨ä¸­æ˜¯å¦å·²ç»å­˜åœ¨åä¸º &lt;code&gt;dataSource&lt;/code&gt;æˆ–ç±»å‹ä¸º &lt;code&gt;DataSource&lt;/code&gt;çš„ Beanã€‚åªæœ‰åœ¨&lt;strong&gt;æ‰¾ä¸åˆ°&lt;/strong&gt;çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæ‰§è¡Œè¿™ä¸ªé…ç½®ç±»ä¸­çš„ &lt;code&gt;dataSource()&lt;/code&gt;æ–¹æ³•æ¥åˆ›å»ºé»˜è®¤çš„ DataSource Beanã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@EnableConfigurationProperties(DataSourceProperties.class)&lt;/code&gt;ï¼šå°†é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;application.yml&lt;/code&gt;ï¼‰ä¸­ä»¥ &lt;code&gt;spring.datasource&lt;/code&gt;ä¸ºå‰ç¼€çš„å±æ€§ç»‘å®šåˆ° &lt;code&gt;DataSourceProperties&lt;/code&gt;å¯¹è±¡ä¸Šï¼Œç”¨äºé…ç½®æ•°æ®æºè¿æ¥ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒä»·å€¼ä¸å¯ç¤º"&gt;ğŸ’¡ æ ¸å¿ƒä»·å€¼ä¸å¯ç¤º
&lt;/h3&gt;&lt;p&gt;ç†è§£è¿™ä¸ªæœºåˆ¶éå¸¸é‡è¦ï¼Œå®ƒå¸¦æ¥äº†ä¸¤å¤§å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å†²çª&lt;/strong&gt;ï¼šé˜²æ­¢ Spring Boot çš„è‡ªåŠ¨é…ç½®æ„å¤–è¦†ç›–æ‚¨æ‰‹åŠ¨å®šä¹‰çš„ã€æ›´ç¬¦åˆç‰¹å®šéœ€æ±‚çš„ DataSource Beanã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æä¾›é»˜è®¤å€¼&lt;/strong&gt;ï¼šåœ¨æ‚¨æ²¡æœ‰è¿›è¡Œä»»ä½•é¢å¤–é…ç½®æ—¶ï¼Œæä¾›ä¸€ä¸ªå¼€ç®±å³ç”¨çš„åŸºæœ¬æ•°æ®æºï¼Œæå¤§ç®€åŒ–äº†é¡¹ç›®çš„åˆå§‹é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®è·µå»ºè®®"&gt;ğŸ› ï¸ å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;äº†è§£æ­¤æœºåˆ¶åï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°ç®¡ç†æ•°æ®æºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦è‡ªå®šä¹‰æ•°æ®æºï¼ˆå¦‚ä½¿ç”¨ DBCP2ã€HikariCP é…ç½®ç‹¬ç«‹æ•°æ®æºï¼‰&lt;/strong&gt;ï¼šåªéœ€åœ¨æ‚¨çš„é…ç½®ç±»ä¸­ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•å®šä¹‰è¿”å›ç›¸åº”çš„ &lt;code&gt;DataSource&lt;/code&gt;å®ä¾‹å³å¯ï¼ŒSpring Boot ä¼šè‡ªåŠ¨â€œè®©è·¯â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ•°æ®æºé…ç½®&lt;/strong&gt;ï¼šåœ¨é…ç½®å¤šæ•°æ®æºæ—¶ï¼Œæ‚¨éœ€è¦å®Œå…¨æ¥ç®¡ DataSource çš„åˆ›å»ºï¼Œæ¯ä¸ªæ•°æ®æºéƒ½åº”æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ &lt;code&gt;@Bean&lt;/code&gt;ã€‚è‡ªåŠ¨é…ç½®ä¼šå› æ£€æµ‹åˆ°å·²æœ‰ DataSource Bean è€Œå¤±æ•ˆï¼Œä¹‹åæ‚¨éœ€è¦é€šè¿‡ &lt;code&gt;@Primary&lt;/code&gt;ç­‰æ³¨è§£æ¥æŒ‡å®šä¸»æ•°æ®æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£ Spring Boot çš„è®¾è®¡å“²å­¦ã€‚&lt;/p&gt;
&lt;h2 id="bean-æ¡ä»¶æ³¨è§£"&gt;@Bean æ¡ä»¶æ³¨è§£
&lt;/h2&gt;&lt;p&gt;Spring Boot æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§çš„æ¡ä»¶æ³¨è§£ï¼Œå¯ä»¥æ ‡æ³¨åœ¨ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ä¸Šï¼Œå®ç° Bean çš„æŒ‰æ¡ä»¶åŠ è½½ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿæ¦‚è§ˆï¼Œä¸‹è¡¨æ±‡æ€»äº†è¿™äº›æ ¸å¿ƒæ³¨è§£åŠå…¶ä¸»è¦ç”¨é€”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨è§£&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;th&gt;å…³é”®å±æ€§è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnBean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“å®¹å™¨ä¸­å­˜åœ¨&lt;/strong&gt;æŒ‡å®šçš„ Bean æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;/&lt;code&gt;name&lt;/code&gt;: æŒ‡å®šéœ€è¦å­˜åœ¨çš„ Bean çš„ç±»å‹æˆ–åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“å®¹å™¨ä¸­ä¸å­˜åœ¨&lt;/strong&gt;æŒ‡å®šçš„ Bean æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;/&lt;code&gt;name&lt;/code&gt;: æŒ‡å®šéœ€è¦ä¸å­˜åœ¨çš„ Bean çš„ç±»å‹æˆ–åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnClass&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨&lt;/strong&gt;æŒ‡å®šçš„ç±»æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;/&lt;code&gt;name&lt;/code&gt;: æŒ‡å®šéœ€è¦å­˜åœ¨çš„ç±»çš„ Class å¯¹è±¡æˆ–å…¨é™å®šåã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnMissingClass&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“ç±»è·¯å¾„ä¸‹ä¸å­˜åœ¨&lt;/strong&gt;æŒ‡å®šçš„ç±»æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;: æŒ‡å®šéœ€è¦ä¸å­˜åœ¨çš„ç±»çš„å…¨é™å®šåã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnProperty&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“é…ç½®å±æ€§&lt;/strong&gt;æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;prefix&lt;/code&gt;, &lt;code&gt;name&lt;/code&gt;: æŒ‡å®šå±æ€§ã€‚&lt;code&gt;havingValue&lt;/code&gt;: åŒ¹é…å€¼ã€‚&lt;code&gt;matchIfMissing&lt;/code&gt;: å±æ€§ç¼ºå¤±æ—¶æ˜¯å¦åŒ¹é…ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnResource&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨&lt;/strong&gt;æŒ‡å®šçš„èµ„æºæ–‡ä»¶æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;resources&lt;/code&gt;: æŒ‡å®šéœ€è¦å­˜åœ¨çš„èµ„æºè·¯å¾„ï¼Œä¾‹å¦‚ &lt;code&gt;&amp;quot;classpath:config.properties&amp;quot;&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnExpression&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“ SpEL è¡¨è¾¾å¼&lt;/strong&gt;çš„è®¡ç®—ç»“æœä¸º &lt;code&gt;true&lt;/code&gt;æ—¶ï¼Œæ‰åˆ›å»ºå½“å‰ Beanã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;: é…ç½® SpEL è¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;@Conditional&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€šç”¨æ¡ä»¶æ³¨è§£&lt;/strong&gt;ï¼Œéœ€é…åˆè‡ªå®šä¹‰çš„ &lt;code&gt;Condition&lt;/code&gt;æ¥å£å®ç°ç±»ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;value&lt;/code&gt;: æŒ‡å®šå®ç°äº† &lt;code&gt;Condition&lt;/code&gt;æ¥å£çš„ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæ³¨è§£è¯¦è§£ä¸ä»£ç ç¤ºä¾‹"&gt;ğŸ’¡ æ ¸å¿ƒæ³¨è§£è¯¦è§£ä¸ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€äº›ä»£ç ç‰‡æ®µæ¥å…·ä½“äº†è§£è¿™äº›æ³¨è§£çš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;h4 id="1-bean-æ¡ä»¶æ³¨è§£"&gt;1. Bean æ¡ä»¶æ³¨è§£
&lt;/h4&gt;&lt;p&gt;è¿™ç±»æ³¨è§£æ ¹æ®å®¹å™¨ä¸­å…¶ä»– Bean çš„å­˜åœ¨ä¸å¦æ¥å†³å®šæ˜¯å¦å®ä¾‹åŒ–å½“å‰ Beanã€‚å®ƒä»¬æ˜¯å®ç° &lt;strong&gt;â€œç”¨æˆ·é…ç½®ä¼˜å…ˆâ€&lt;/strong&gt; åŸåˆ™çš„å…³é”®ï¼Œå¸¸ç”¨äºæä¾›é»˜è®¤é…ç½®æˆ–è¦†ç›–è‡ªåŠ¨é…ç½®ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class MyAutoConfiguration {
// åªæœ‰å½“å®¹å™¨ä¸­æ²¡æœ‰ SomeService ç±»å‹çš„ Bean æ—¶ï¼Œæ‰ä¼šåˆ›å»ºè¿™ä¸ªé»˜è®¤çš„
@Bean
@ConditionalOnMissingBean(SomeService.class)
public SomeService someService() {
return new DefaultSomeService();
}
// åªæœ‰å½“å®¹å™¨ä¸­å­˜åœ¨åä¸º &amp;#34;dataSource&amp;#34; çš„ Bean æ—¶ï¼Œæ‰ä¼šåˆ›å»º JdbcTemplate
@Bean
@ConditionalOnBean(name = &amp;#34;dataSource&amp;#34;)
public JdbcTemplate jdbcTemplate(DataSource dataSource) {
return new JdbcTemplate(dataSource);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;âš ï¸ æ³¨æ„&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;@ConditionalOnBean&lt;/code&gt;å’Œ &lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;æ—¶éœ€ç•™æ„ Bean çš„åŠ è½½é¡ºåºï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ ¹æ®ç›®å‰å·²å¤„ç†è¿‡çš„ Bean å®šä¹‰æ¥è¯„ä¼°çš„ã€‚&lt;/p&gt;
&lt;h4 id="2-ç±»æ¡ä»¶æ³¨è§£"&gt;2. ç±»æ¡ä»¶æ³¨è§£
&lt;/h4&gt;&lt;p&gt;è¿™ç±»æ³¨è§£é€šè¿‡æ£€æŸ¥ç±»è·¯å¾„ä¸‹ç‰¹å®šç±»çš„å­˜åœ¨ä¸å¦æ¥æ§åˆ¶ Bean çš„åŠ è½½ï¼Œæ˜¯ Spring Boot è‡ªåŠ¨é…ç½®çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class MyAutoConfiguration {
// åªæœ‰å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨ com.fasterxml.jackson.databind.ObjectMapper ç±»æ—¶ï¼Œæ‰é…ç½®è¯¥ Bean
@Bean
@ConditionalOnClass(name = &amp;#34;com.fasterxml.jackson.databind.ObjectMapper&amp;#34;)
public MyJsonService myJsonService() {
return new MyJsonService();
}
// åªæœ‰å½“ç±»è·¯å¾„ä¸‹ä¸å­˜åœ¨ org.springframework.transaction.PlatformTransactionManager æ—¶ï¼Œæ‰é…ç½®è¿™ä¸ªç®€å•çš„å®ç°
@Bean
@ConditionalOnMissingClass(&amp;#34;org.springframework.transaction.PlatformTransactionManager&amp;#34;)
public TransactionManager simpleTransactionManager() {
return new SimpleTransactionManager();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-å±æ€§ä¸èµ„æºæ¡ä»¶æ³¨è§£"&gt;3. å±æ€§ä¸èµ„æºæ¡ä»¶æ³¨è§£
&lt;/h4&gt;&lt;p&gt;è¿™ç±»æ³¨è§£è®© Bean çš„åŠ è½½ä¾èµ–äºå¤–éƒ¨é…ç½®æˆ–èµ„æºï¼Œæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class MyAutoConfiguration {
// å½“é…ç½®æ–‡ä»¶ä¸­ feature.x.enabled çš„å€¼ä¸º true æ—¶ï¼ˆæˆ–è¯¥é…ç½®ç¼ºå¤±æ—¶ï¼‰ï¼Œæ‰å¯ç”¨è¯¥ç‰¹æ€§
@Bean
@ConditionalOnProperty(prefix = &amp;#34;feature.x&amp;#34;, name = &amp;#34;enabled&amp;#34;, havingValue = &amp;#34;true&amp;#34;, matchIfMissing = true)
public FeatureXService featureXService() {
return new FeatureXService();
}
// åªæœ‰å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨ config/special.properties æ–‡ä»¶æ—¶ï¼Œæ‰åˆ›å»ºè¯¥ Bean
@Bean
@ConditionalOnResource(resources = &amp;#34;classpath:config/special.properties&amp;#34;)
public SpecialService specialService() {
return new SpecialService();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="4-è¡¨è¾¾å¼ä¸è‡ªå®šä¹‰æ¡ä»¶æ³¨è§£"&gt;4. è¡¨è¾¾å¼ä¸è‡ªå®šä¹‰æ¡ä»¶æ³¨è§£
&lt;/h4&gt;&lt;p&gt;å½“å†…ç½®æ³¨è§£æ— æ³•æ»¡è¶³å¤æ‚æ¡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ SpEL è¡¨è¾¾å¼æˆ–è‡ªå®šä¹‰æ¡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
public class MyAutoConfiguration {
// ä½¿ç”¨ SpEL è¡¨è¾¾å¼è¿›è¡Œå¤æ‚æ¡ä»¶åˆ¤æ–­
@Bean
@ConditionalOnExpression(&amp;#34;#{environment.getProperty(&amp;#39;app.mode&amp;#39;) == &amp;#39;cluster&amp;#39; &amp;amp;&amp;amp; environment.getProperty(&amp;#39;app.role&amp;#39;) == &amp;#39;master&amp;#39;}&amp;#34;)
public ClusterMasterService clusterMasterService() {
return new ClusterMasterService();
}
// ä½¿ç”¨è‡ªå®šä¹‰æ¡ä»¶ï¼ˆä¾‹å¦‚ï¼Œåˆ¤æ–­æ“ä½œç³»ç»Ÿï¼‰
@Bean
@Conditional(OnWindowsCondition.class) // OnWindowsCondition éœ€å®ç° Condition æ¥å£
public WindowsSpecificService windowsService() {
return new WindowsSpecificService();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-è¿›é˜¶ä½¿ç”¨ä¸æœ€ä½³å®è·µ"&gt;ğŸ› ï¸ è¿›é˜¶ä½¿ç”¨ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç»„åˆæ¡ä»¶&lt;/strong&gt;ï¼šSpring Boot è¿˜æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„â€œå…ƒæ¡ä»¶â€æ³¨è§£ï¼Œå¦‚ &lt;code&gt;@AnyNestedCondition&lt;/code&gt;ï¼ˆä»»ä¸€åµŒå¥—æ¡ä»¶æ»¡è¶³å³åŒ¹é…ï¼‰æˆ– &lt;code&gt;@AllNestedConditions&lt;/code&gt;ï¼ˆæ‰€æœ‰åµŒå¥—æ¡ä»¶éƒ½éœ€æ»¡è¶³ï¼‰ï¼Œç”¨äºç»„åˆå¤šä¸ªç®€å•æ¡ä»¶å½¢æˆå¤æ‚é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šè™½ç„¶è¿™äº›æ³¨è§£ä¸»è¦ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œä½†å…¶ä¸­è®¸å¤šï¼ˆå¦‚ &lt;code&gt;@ConditionalOnClass&lt;/code&gt;ï¼‰ä¹Ÿå¯ä»¥æ ‡æ³¨åœ¨ç±»ä¸Šã€‚å½“æ ‡æ³¨åœ¨ç±»ä¸Šæ—¶ï¼Œå°†å¯¹ç±»ä¸­æ‰€æœ‰ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨é…ç½®&lt;/strong&gt;ï¼šç†è§£è¿™äº›æ³¨è§£æ˜¯æ·±å…¥æŒæ¡ Spring Boot è‡ªåŠ¨é…ç½®åŸç†çš„å…³é”®ã€‚Spring Boot è‡ªèº«çš„ &lt;code&gt;@Configuration&lt;/code&gt;ç±»å¤§é‡ä½¿ç”¨è¿™äº›æ¡ä»¶æ³¨è§£ï¼Œç¡®ä¿åªæœ‰åœ¨åˆé€‚çš„æ¡ä»¶ä¸‹æ‰å¯ç”¨ç›¸åº”çš„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æ¢³ç†èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¿ç”¨ Spring Boot çš„æ¡ä»¶æ³¨è§£ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ³¨è§£çš„ç”¨æ³•æˆ–ç»„åˆä½¿ç”¨çš„åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç±»ä¸Š"&gt;ç±»ä¸Š
&lt;/h2&gt;&lt;p&gt;Spring Boot çš„æ¡ä»¶æ³¨è§£ä¸­ï¼Œç¡®å®æœ‰å°‘æ•°å‡ ä¸ªé€šå¸¸å»ºè®®æˆ–&lt;strong&gt;ä»…é™äºåœ¨ç±»çº§åˆ«ä½¿ç”¨&lt;/strong&gt;ï¼Œè¿™ä¸»è¦æ˜¯ç”±å®ƒä»¬æ‰€è¦åˆ¤æ–­çš„æ¡ä»¶æ€§è´¨å†³å®šçš„ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ•´ç†äº†å¸¸è§æ¡ä»¶æ³¨è§£çš„ä½œç”¨èŒƒå›´ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨è§£&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä½œç”¨&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨ä½œç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnWarDeployment&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­åº”ç”¨æ˜¯å¦ä»¥&lt;strong&gt;ä¼ ç»Ÿ WAR åŒ…&lt;/strong&gt;æ–¹å¼éƒ¨ç½²&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»…ç±»ä¸Š&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnCloudPlatform&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­åº”ç”¨æ˜¯å¦è¿è¡Œåœ¨æŒ‡å®šçš„&lt;strong&gt;äº‘å¹³å°&lt;/strong&gt;ä¸Š&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»…ç±»ä¸Š&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnWebApplication&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦ä¸º &lt;strong&gt;Web åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»æˆ–æ–¹æ³•ä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnNotWebApplication&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦&lt;strong&gt;é Web åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»æˆ–æ–¹æ³•ä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnJava&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­å½“å‰ &lt;strong&gt;JVM ç‰ˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»æˆ–æ–¹æ³•ä¸Š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£ç±»çº§åˆ«æ³¨è§£"&gt;ğŸ¯ è¯¦è§£ç±»çº§åˆ«æ³¨è§£
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹ä¸¤ä¸ªæ³¨è§£ç”±äºå…¶åˆ¤æ–­æ¡ä»¶çš„å…¨å±€æ€§ï¼Œé€šå¸¸åªç”¨äºç±»çº§åˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnWarDeployment&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸ªæ³¨è§£ç”¨äºåˆ¤æ–­åº”ç”¨ç¨‹åºæ˜¯å¦ä»¥ä¼ ç»Ÿçš„ &lt;strong&gt;WAR åŒ…å½¢å¼éƒ¨ç½²åˆ°å¤–éƒ¨ Servlet å®¹å™¨&lt;/strong&gt;ï¼ˆå¦‚ Tomcatï¼‰ä¸­è¿è¡Œã€‚å¯¹äºä½¿ç”¨åµŒå…¥å¼æœåŠ¡å™¨ï¼ˆå¦‚ Spring Boot å†…åµŒçš„ Tomcatï¼‰çš„ Spring Boot å¯æ‰§è¡Œ JAR åº”ç”¨ï¼Œæ­¤æ¡ä»¶å°†ä¸åŒ¹é…ã€‚å› ä¸ºè¿™ä¸ªæ¡ä»¶å…³ä¹æ•´ä¸ªåº”ç”¨çš„&lt;strong&gt;æ‰“åŒ…å’Œéƒ¨ç½²æ–¹å¼&lt;/strong&gt;ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€çš„ã€é¡¶å±‚çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å®ƒé€šå¸¸è¢«æ ‡æ³¨åœ¨è‡ªåŠ¨é…ç½®ç±»ä¸Šï¼Œä»¥æ§åˆ¶æ•´ä¸ªé…ç½®æ¨¡å—æ˜¯å¦ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnCloudPlatform&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸ªæ³¨è§£ç”¨äºåˆ¤æ–­åº”ç”¨å½“å‰æ˜¯å¦è¿è¡Œåœ¨æŒ‡å®šçš„&lt;strong&gt;äº‘å¹³å°&lt;/strong&gt;ï¼ˆå¦‚ Kubernetesï¼‰ä¸Šã€‚è¯¥åˆ¤æ–­ä¾èµ–äºäº‘å¹³å°æ³¨å…¥çš„ç¯å¢ƒå˜é‡æˆ–å…¶ä»–å…¨å±€æŒ‡æ ‡ï¼ŒåŒæ ·æ˜¯åº”ç”¨çº§åˆ«çš„å…¨å±€æ¡ä»¶ã€‚å› æ­¤ï¼Œå®ƒä¹Ÿ&lt;strong&gt;æ›´é€‚åˆåœ¨ç±»çº§åˆ«ä½¿ç”¨&lt;/strong&gt;ï¼Œä»¥å†³å®šä¸€æ•´å¥—ä¸ç‰¹å®šäº‘ç¯å¢ƒç›¸å…³çš„é…ç½®æ˜¯å¦åº”è¯¥è¢«åŠ è½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½œç”¨èŒƒå›´ä¸ä½¿ç”¨è€ƒé‡"&gt;ğŸ’¡ ä½œç”¨èŒƒå›´ä¸ä½¿ç”¨è€ƒé‡
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;@ConditionalOnWebApplication&lt;/code&gt;ã€&lt;code&gt;@ConditionalOnNotWebApplication&lt;/code&gt;å’Œ &lt;code&gt;@ConditionalOnJava&lt;/code&gt;è¿™äº›æ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œä½†å°†å®ƒä»¬ç”¨äº&lt;strong&gt;ç±»çº§åˆ«å¾€å¾€æ›´å¸¸è§ä¸”æ›´é«˜æ•ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆç‡ä¸é€»è¾‘åˆ†ç»„&lt;/strong&gt;ï¼šå°†ä¸€ä¸ªæ¡ä»¶æ³¨è§£æ”¾åœ¨ç±»ä¸Šï¼Œå¯ä»¥ä¸€æ¬¡æ€§å†³å®šæ•´ä¸ªé…ç½®ç±»ï¼ˆåŒ…æ‹¬å…¶ä¸­æ‰€æœ‰çš„ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ã€&lt;code&gt;@Import&lt;/code&gt;å’Œ &lt;code&gt;@ComponentScan&lt;/code&gt;ï¼‰æ˜¯å¦éœ€è¦è¢«å¤„ç†ã€‚è¿™é¿å…äº†åœ¨å¤šä¸ªæ–¹æ³•ä¸Šé‡å¤ç›¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ï¼Œä¹Ÿç¬¦åˆå°†ç›¸å…³é…ç½®é€»è¾‘åˆ†ç»„çš„åŸåˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨é…ç½®çš„å¸¸è§æ¨¡å¼&lt;/strong&gt;ï¼šSpring Boot è‡ªèº«çš„è‡ªåŠ¨é…ç½®å¤§é‡é‡‡ç”¨äº†è¿™ç§æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œè®¸å¤šä¸ Web ç›¸å…³çš„é…ç½®ç±»éƒ½ä¼šä½¿ç”¨ &lt;code&gt;@ConditionalOnWebApplication&lt;/code&gt;è¿›è¡Œæ ‡è®°ï¼Œç¡®ä¿åªæœ‰åœ¨ Web åº”ç”¨ä¸­æ‰å¯ç”¨è¿™äº›é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨å»ºè®®ä¸æœ€ä½³å®è·µ"&gt;ğŸ› ï¸ ä½¿ç”¨å»ºè®®ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨æ¡ä»¶æ€§è´¨&lt;/strong&gt;ï¼šåœ¨é€‰æ‹©å°†æ¡ä»¶æ³¨è§£æ”¾åœ¨ç±»ä¸Šè¿˜æ˜¯æ–¹æ³•ä¸Šæ—¶ï¼Œè€ƒè™‘æ¡ä»¶çš„&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ã€‚åƒåˆ¤æ–­åº”ç”¨ç±»å‹ã€éƒ¨ç½²æ–¹å¼ã€äº‘ç¯å¢ƒã€Java ç‰ˆæœ¬ç­‰å…¨å±€æ€§æ¡ä»¶ï¼Œæ”¾åœ¨ç±»ä¸Šé€šå¸¸æ›´åˆé€‚ã€‚è€Œåˆ¤æ–­ç‰¹å®š Bean æ˜¯å¦å­˜åœ¨ã€æŸä¸ªå…·ä½“å±æ€§å€¼ç­‰æ›´ç»†ç²’åº¦çš„æ¡ä»¶ï¼Œåˆ™å¯èƒ½æ›´é€‚åˆæ”¾åœ¨æ–¹æ³•ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥é˜…å®˜æ–¹æ–‡æ¡£&lt;/strong&gt;ï¼šå½“ä¸ç¡®å®šæŸä¸ªæ³¨è§£çš„æœ€ä½³ä½¿ç”¨èŒƒå›´æ—¶ï¼Œæœ€å¯é çš„æ–¹æ³•æ˜¯æŸ¥é˜… Spring Boot çš„å®˜æ–¹ API æ–‡æ¡£ï¼Œå…¶ä¸­ä¼šæ˜ç¡®è¯´æ˜æ¯ä¸ªæ³¨è§£çš„å¯ç”¨ç›®æ ‡ï¼ˆ&lt;code&gt;@Target&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ Spring Boot æ¡ä»¶æ³¨è§£çš„ä½œç”¨èŒƒå›´ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ³¨è§£çš„ç”¨æ³•è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="springfactoriesloader"&gt;SpringFactoriesLoader
&lt;/h2&gt;&lt;p&gt;SpringFactoriesLoader æ˜¯ Spring æ¡†æ¶å†…éƒ¨ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„å·¥å…·ç±»ï¼Œå®ƒå®ç°äº†ä¸€ç§å¢å¼ºçš„ SPIï¼ˆService Provider Interfaceï¼‰æœºåˆ¶ï¼Œæ˜¯ Spring Boot è‡ªåŠ¨é…ç½®çš„åŸºçŸ³ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£å®ƒã€‚&lt;/p&gt;
&lt;h3 id="ä¸€æ ¸å¿ƒæ¦‚å¿µä¸è§’è‰²"&gt;&lt;strong&gt;ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸è§’è‰²&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;SpringFactoriesLoader&lt;/code&gt;çš„æ ¸å¿ƒå·¥ä½œæ˜¯&lt;strong&gt;æ‰«ææ•´ä¸ªç±»è·¯å¾„ï¼ˆClasspathï¼‰ä¸­æ‰€æœ‰ JAR åŒ…å†…çš„ &lt;code&gt;META-INF/spring.factories&lt;/code&gt;æ–‡ä»¶&lt;/strong&gt;ï¼Œè§£æå…¶ä¸­çš„é…ç½®ï¼Œå¹¶æ ¹æ®æ¥å£ç±»å‹åŠ è½½å¹¶å®ä¾‹åŒ–å¯¹åº”çš„å®ç°ç±»ã€‚å®ƒæ˜¯ä¸€ç§çº¦å®šä¼˜äºé…ç½®çš„å·¥å‚åŠ è½½æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä¸ Java åŸç”Ÿçš„ SPI æœºåˆ¶æ€æƒ³ç±»ä¼¼ï¼Œä½†æ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œï¼Œä¸‹è¡¨å¯¹æ¯”äº†å®ƒçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒè§’è‰²&lt;/th&gt;
&lt;th&gt;èŒè´£è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;spring.factories&lt;/code&gt;æ–‡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®æ–‡ä»¶ï¼Œå¿…é¡»æ”¾åœ¨ &lt;code&gt;META-INF/&lt;/code&gt;ç›®å½•ä¸‹ã€‚å†…å®¹ä¸º Properties æ ¼å¼ï¼ˆkey=valueï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡æ¥å£ï¼ˆKeyï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®æ–‡ä»¶çš„ keyï¼Œæ˜¯æ¥å£æˆ–æŠ½è±¡ç±»çš„å…¨é™å®šåï¼ˆå¦‚ &lt;code&gt;org.springframework.context.ApplicationContextInitializer&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°ç±»ï¼ˆValueï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®æ–‡ä»¶çš„ valueï¼Œæ˜¯å®ç°ç±»çš„å…¨é™å®šåã€‚å¤šä¸ªå®ç°ç±»ç”¨é€—å·åˆ†éš”ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;SpringFactoriesLoader&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¸å¿ƒåŠ è½½å™¨ï¼Œè´Ÿè´£å®šä½æ–‡ä»¶ã€è§£æå†…å®¹ã€åŠ è½½ç±»å¹¶å®ä¾‹åŒ–å¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ &lt;code&gt;spring.factories&lt;/code&gt;æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ç¤ºä¾‹ï¼šSpring Boot è‡ªåŠ¨é…ç½®çš„ä¸€éƒ¨åˆ†
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.MyAutoConfiguration,\
com.example.AnotherAutoConfiguration
# ç¤ºä¾‹ï¼šåº”ç”¨åˆå§‹åŒ–å™¨
org.springframework.context.ApplicationContextInitializer=\
com.example.MyInitializer
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="äºŒå·¥ä½œæœºåˆ¶ä¸æºç è§£æ"&gt;&lt;strong&gt;äºŒã€å·¥ä½œæœºåˆ¶ä¸æºç è§£æ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SpringFactoriesLoader&lt;/code&gt;çš„å·¥ä½œæµç¨‹å¯ä»¥æ¸…æ™°åœ°åˆ†ä¸º&lt;strong&gt;èµ„æºå®šä½ã€é…ç½®è§£æã€ç¼“å­˜æœºåˆ¶å’Œå®ä¾‹åŒ–&lt;/strong&gt;å››ä¸ªé˜¶æ®µã€‚&lt;/p&gt;
&lt;h4 id="1-èµ„æºå®šä½"&gt;&lt;strong&gt;1. èµ„æºå®šä½&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;é€šè¿‡å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆ&lt;code&gt;ClassLoader&lt;/code&gt;ï¼‰ï¼Œè°ƒç”¨å…¶ &lt;code&gt;getResources(&amp;quot;META-INF/spring.factories&amp;quot;)&lt;/code&gt;æ–¹æ³•ï¼Œè·å–ç±»è·¯å¾„ä¸‹æ‰€æœ‰ JAR åŒ…ä¸­è¯¥æ–‡ä»¶çš„ URL æšä¸¾ã€‚è¿™ç¡®ä¿äº†èƒ½å¤Ÿå‘ç°æ‰€æœ‰ä¾èµ–åŒ…ä¸­å£°æ˜çš„æ‰©å±•ç‚¹ã€‚&lt;/p&gt;
&lt;h4 id="2-é…ç½®è§£æä¸ç¼“å­˜"&gt;&lt;strong&gt;2. é…ç½®è§£æä¸ç¼“å­˜&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æ­¥éª¤ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜æ£€æŸ¥&lt;/strong&gt;ï¼šé¦–å…ˆæ£€æŸ¥ä¸€ä¸ªé™æ€çš„ &lt;code&gt;ConcurrentReferenceHashMap&lt;/code&gt;ç¼“å­˜ï¼ˆkey ä¸º &lt;code&gt;ClassLoader&lt;/code&gt;ï¼Œvalue ä¸ºè§£æç»“æœï¼‰ã€‚å¦‚æœå­˜åœ¨ï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼Œé¿å…é‡å¤çš„ I/O æ“ä½œå’Œè§£æå¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£ææ–‡ä»¶&lt;/strong&gt;ï¼šå¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™éå†ç¬¬ä¸€æ­¥è·å–çš„æ‰€æœ‰ URLï¼Œä½¿ç”¨ &lt;code&gt;PropertiesLoaderUtils&lt;/code&gt;å°†æ¯ä¸ª &lt;code&gt;spring.factories&lt;/code&gt;æ–‡ä»¶å†…å®¹åŠ è½½ä¸º &lt;code&gt;Properties&lt;/code&gt;å¯¹è±¡ã€‚ç„¶åï¼Œå°†é”®å€¼å¯¹è§£æåˆ°ä¸€ä¸ª &lt;code&gt;MultiValueMap&amp;lt;String, String&amp;gt;&lt;/code&gt;ä¸­ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªæ¥å£åå¯¹åº”ä¸€ä¸ªå®ç°ç±»åçš„åˆ—è¡¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥ç¼“å­˜&lt;/strong&gt;ï¼šå°†æœ€ç»ˆçš„è§£æç»“æœæ”¾å…¥ç¼“å­˜ï¼Œä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-å®ä¾‹åŒ–"&gt;&lt;strong&gt;3. å®ä¾‹åŒ–&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æ ¸å¿ƒæ–¹æ³•æ˜¯ &lt;code&gt;loadFactories(Class&amp;lt;T&amp;gt; factoryType, ClassLoader classLoader)&lt;/code&gt;ï¼Œå…¶æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·å–ç±»ååˆ—è¡¨&lt;/strong&gt;ï¼šå†…éƒ¨è°ƒç”¨ &lt;code&gt;loadFactoryNames&lt;/code&gt;æ–¹æ³•ï¼Œä»ç¼“å­˜æˆ–ä¸Šè¿°æµç¨‹ä¸­è·å–æŒ‡å®šæ¥å£çš„æ‰€æœ‰å®ç°ç±»çš„å…¨é™å®šååˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åå°„åˆ›å»ºå®ä¾‹&lt;/strong&gt;ï¼šéå†ç±»ååˆ—è¡¨ï¼Œé€šè¿‡åå°„ï¼ˆ&lt;code&gt;ClassUtils.forName&lt;/code&gt;å’Œ &lt;code&gt;ReflectionUtils.accessibleConstructor&lt;/code&gt;ï¼‰å®ä¾‹åŒ–æ¯ä¸ªç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’åº&lt;/strong&gt;ï¼šæœ€åï¼Œä½¿ç”¨ &lt;code&gt;AnnotationAwareOrderComparator.sort(result)&lt;/code&gt;å¯¹å®ä¾‹åŒ–åçš„å¯¹è±¡åˆ—è¡¨è¿›è¡Œæ’åºã€‚è¿™ä½¿å¾—å®ç°ç±»å¯ä»¥é€šè¿‡ &lt;code&gt;@Order&lt;/code&gt;æ³¨è§£æˆ–å®ç° &lt;code&gt;Ordered&lt;/code&gt;æ¥å£æ¥å®šä¹‰æ‰§è¡Œé¡ºåºï¼Œéå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä¸‰ä¸»è¦æ–¹æ³•"&gt;&lt;strong&gt;ä¸‰ã€ä¸»è¦æ–¹æ³•&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SpringFactoriesLoader&lt;/code&gt;æä¾›äº†ä¸¤ä¸ªæœ€å¸¸ç”¨çš„é™æ€æ–¹æ³•ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;List&amp;lt;String&amp;gt; loadFactoryNames(Class&amp;lt;?&amp;gt; factoryType, ClassLoader classLoader)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®æ¥å£ç±»å‹ï¼Œè·å–æ‰€æœ‰å®ç°ç±»çš„&lt;strong&gt;å…¨é™å®šå&lt;/strong&gt;ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰ã€‚æ­¤è¿‡ç¨‹&lt;strong&gt;ä¸ä¼šå®ä¾‹åŒ–&lt;/strong&gt;è¿™äº›ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; loadFactories(Class&amp;lt;T&amp;gt; factoryType, ClassLoader classLoader)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®æ¥å£ç±»å‹ï¼Œ&lt;strong&gt;åŠ è½½ã€å®ä¾‹åŒ–å¹¶è¿”å›&lt;/strong&gt;æ‰€æœ‰å®ç°ç±»çš„å¯¹è±¡åˆ—è¡¨ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="å››åœ¨-spring-boot-ä¸­çš„å…³é”®åº”ç”¨"&gt;&lt;strong&gt;å››ã€åœ¨ Spring Boot ä¸­çš„å…³é”®åº”ç”¨&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SpringFactoriesLoader&lt;/code&gt;åœ¨ Spring Boot çš„å¯åŠ¨è¿‡ç¨‹ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œæ˜¯è‡ªåŠ¨é…ç½®çš„çµé­‚ã€‚åœ¨ &lt;code&gt;SpringApplication&lt;/code&gt;çš„æ„é€ æ–¹æ³•ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å…³é”®è°ƒç”¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public SpringApplication(ResourceLoader resourceLoader, Class&amp;lt;?&amp;gt;... primarySources) {
// ...
// è®¾ç½®åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨
setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));
// è®¾ç½®ç›‘å¬å™¨
setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
// ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;getSpringFactoriesInstances&lt;/code&gt;æ–¹æ³•å†…éƒ¨å°±è°ƒç”¨äº† &lt;code&gt;SpringFactoriesLoader.loadFactories&lt;/code&gt;ã€‚å…·ä½“åº”ç”¨åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨é…ç½®ï¼ˆ&lt;code&gt;EnableAutoConfiguration&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šæœ€è‘—åçš„åº”ç”¨ã€‚Spring Boot ä» &lt;code&gt;spring-boot-autoconfigure&lt;/code&gt;jar åŒ…çš„ &lt;code&gt;spring.factories&lt;/code&gt;ä¸­åŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆå¦‚ &lt;code&gt;DataSourceAutoConfiguration&lt;/code&gt;ï¼‰ï¼Œæ ¹æ®æ¡ä»¶ï¼ˆå¦‚ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŸä¸ªç±»ï¼‰è‡ªåŠ¨é…ç½® Beanã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨ä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨ï¼ˆ&lt;code&gt;ApplicationContextInitializer&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šåœ¨å®¹å™¨åˆ·æ–°ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘å¬å™¨ï¼ˆ&lt;code&gt;ApplicationListener&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šç›‘å¬ Spring Boot å¯åŠ¨è¿‡ç¨‹ä¸­çš„å„ç§äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–æ‰©å±•ç‚¹&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;EnvironmentPostProcessor&lt;/code&gt;ï¼ˆç”¨äºè‡ªå®šä¹‰ç¯å¢ƒå˜é‡å¤„ç†ï¼‰ã€&lt;code&gt;FailureAnalyzer&lt;/code&gt;ï¼ˆç”¨äºå¯åŠ¨å¤±è´¥åˆ†æï¼‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="äº”ä¸-java-spi-çš„å¯¹æ¯”"&gt;&lt;strong&gt;äº”ã€ä¸ Java SPI çš„å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ç†è§£ Spring SPI ä¸ Java åŸç”Ÿ SPI çš„å·®å¼‚ï¼Œèƒ½æ›´å¥½åœ°ä½“ä¼šå…¶è®¾è®¡ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Java SPI&lt;/th&gt;
&lt;th&gt;Spring SPI (&lt;code&gt;SpringFactoriesLoader&lt;/code&gt;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªæ¥å£ä¸€ä¸ªæ–‡ä»¶ï¼Œè·¯å¾„ä¸º &lt;code&gt;META-INF/services/æ¥å£å…¨é™å®šå&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªç»Ÿä¸€çš„ &lt;code&gt;META-INF/spring.factories&lt;/code&gt;æ–‡ä»¶ï¼ŒProperties æ ¼å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ è½½æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;java.util.ServiceLoader&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;org.springframework.core.io.support.SpringFactoriesLoader&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡è·å–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªèƒ½é€šè¿‡è¿­ä»£å™¨éå†è·å–æ‰€æœ‰å®ç°å®ä¾‹&lt;/td&gt;
&lt;td&gt;å¯ç›´æ¥é€šè¿‡æ¥å£ç±»å‹è·å–æ‰€æœ‰å®ç°å®ä¾‹çš„åˆ—è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’åºæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒï¼ŒåŠ è½½é¡ºåºä¸ç¡®å®š&lt;/td&gt;
&lt;td&gt;æ”¯æŒï¼Œä½¿ç”¨ &lt;code&gt;AnnotationAwareOrderComparator&lt;/code&gt;è¿›è¡Œæ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Java æ ‡å‡†æœåŠ¡å‘ç°ï¼ˆå¦‚ JDBC é©±åŠ¨åŠ è½½ï¼‰&lt;/td&gt;
&lt;td&gt;Spring æ¡†æ¶åŠ Spring Boot çš„æ‰©å±•å’Œè‡ªåŠ¨é…ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="å…­æ³¨æ„äº‹é¡¹"&gt;&lt;strong&gt;å…­ã€æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨å·¥å…·ç±»&lt;/strong&gt;ï¼šå°½ç®¡åŠŸèƒ½å¼ºå¤§ï¼Œä½† &lt;code&gt;SpringFactoriesLoader&lt;/code&gt;åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¢«æ ‡è®°ä¸ºâ€œæ¡†æ¶å†…éƒ¨ä½¿ç”¨â€çš„å·¥å…·ç±»ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨å®ƒçš„æƒ…å†µç›¸å¯¹è¾ƒå°‘ï¼Œæ›´å¸¸è§çš„åšæ³•æ˜¯é€šè¿‡ Spring æä¾›çš„æ›´é«˜çº§çš„æ‰©å±•ç‚¹ï¼ˆå¦‚ &lt;code&gt;@Configuration&lt;/code&gt;ã€&lt;code&gt;BeanPostProcessor&lt;/code&gt;ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä» Spring Boot 2.4 å¼€å§‹&lt;/strong&gt;ï¼šæ”¯æŒåœ¨ &lt;code&gt;spring.factories&lt;/code&gt;ä¸­ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;org.springframework.boot.autoconfigure.EnableAutoConfiguration&lt;/code&gt;&lt;/strong&gt; ä½œä¸º keyï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒåœ¨æ–°çš„ &lt;code&gt;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports&lt;/code&gt;æ–‡ä»¶ä¸­ç›´æ¥åˆ—å‡ºè‡ªåŠ¨é…ç½®ç±»ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰ï¼Œåè€…æ›´ä¸ºç®€æ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ &lt;code&gt;SpringFactoriesLoader&lt;/code&gt;ã€‚å®ƒæ˜¯æ·±å…¥æŒæ¡ Spring Boot è‡ªåŠ¨é…ç½®å’Œæ¡†æ¶æ‰©å±•æœºåˆ¶çš„å…³é”®ä¸€ç¯ã€‚&lt;/p&gt;
&lt;h2 id="enableautoconfiguration"&gt;@EnableAutoConfiguration
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;æ˜¯ Spring Boot è‡ªåŠ¨é…ç½®æœºåˆ¶çš„æ ¸å¿ƒæ³¨è§£ï¼Œå®ƒä½¿å¾— Spring Boot èƒ½å¤Ÿæ ¹æ®ä½ æ·»åŠ çš„ä¾èµ–è‡ªåŠ¨é…ç½®åº”ç”¨ç¨‹åºã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;h3 id="ä¸€æ ¸å¿ƒæœºåˆ¶ä¸€è§ˆ"&gt;&lt;strong&gt;ä¸€ã€æ ¸å¿ƒæœºåˆ¶ä¸€è§ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥æ¢³ç† &lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæœºåˆ¶ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;å…³é”®ç»„ä»¶/æ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¨è§£é©±åŠ¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;, &lt;code&gt;@Import&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯ç”¨è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œå¹¶å¯¼å…¥æ ¸å¿ƒé€‰æ‹©å™¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®å‘ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;AutoConfigurationImportSelector&lt;/code&gt;, &lt;code&gt;spring.factories&lt;/code&gt;/ &lt;code&gt;AutoConfiguration.imports&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰«æç±»è·¯å¾„ï¼Œå‘ç°æ‰€æœ‰æ½œåœ¨çš„è‡ªåŠ¨é…ç½®ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¡ä»¶è¿‡æ»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@ConditionalOnClass&lt;/code&gt;, &lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;ç­‰&lt;/td&gt;
&lt;td&gt;æ ¹æ®å½“å‰ç¯å¢ƒï¼ˆä¾èµ–ã€é…ç½®ã€å·²å­˜åœ¨çš„Beanï¼‰ç­›é€‰å‡ºæœ€ç»ˆç”Ÿæ•ˆçš„é…ç½®ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®åŠ è½½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¡ä»¶æ³¨è§£åŒ¹é…æˆåŠŸçš„é…ç½®ç±»&lt;/td&gt;
&lt;td&gt;å°†ç¬¦åˆæ¡ä»¶çš„é…ç½®ç±»åŠ è½½åˆ°Springå®¹å™¨ï¼Œåˆ›å»ºæ‰€éœ€çš„Beanã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="äºŒæ³¨è§£å®šä¹‰ä¸å…ƒæ³¨è§£"&gt;&lt;strong&gt;äºŒã€æ³¨è§£å®šä¹‰ä¸å…ƒæ³¨è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;æœ¬èº«æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œå®ƒçš„å®šä¹‰æ­ç¤ºäº†å…¶å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage // å…³é”®å…ƒæ³¨è§£ä¹‹ä¸€
@Import(AutoConfigurationImportSelector.class) // æœ€æ ¸å¿ƒçš„å…ƒæ³¨è§£
public @interface EnableAutoConfiguration {
String ENABLED_OVERRIDE_PROPERTY = &amp;#34;spring.boot.enableautoconfiguration&amp;#34;;
Class&amp;lt;?&amp;gt;[] exclude() default {};
String[] excludeName() default {};
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ä¸¤ä¸ªå…ƒæ³¨è§£å°¤ä¸ºå…³é”®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@AutoConfigurationPackage&lt;/code&gt;&lt;/strong&gt;ï¼šå®ƒçš„ä½œç”¨æ˜¯&lt;strong&gt;è®°å½•ä¸»é…ç½®ç±»ï¼ˆå³æ ‡æ³¨äº†&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;çš„ç±»ï¼‰æ‰€åœ¨çš„åŒ…è·¯å¾„&lt;/strong&gt;ã€‚è¿™ä¸ªä¿¡æ¯ä¸»è¦ç”¨äºåç»­çš„ç»„ä»¶æ‰«æï¼ˆå¦‚JPAå®ä½“æ‰«æï¼‰ï¼Œé»˜è®¤ä¼šæ‰«æè¯¥åŒ…åŠå…¶å­åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@Import(AutoConfigurationImportSelector.class)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯è‡ªåŠ¨é…ç½®çš„&lt;strong&gt;çµé­‚&lt;/strong&gt;ã€‚å®ƒé€šè¿‡Springçš„&lt;code&gt;@Import&lt;/code&gt;æœºåˆ¶ï¼Œå¯¼å…¥äº†&lt;code&gt;AutoConfigurationImportSelector&lt;/code&gt;è¿™ä¸ªç±»ï¼Œç”±å®ƒæ¥è´Ÿè´£å†³å®šå…·ä½“å“ªäº›é…ç½®ç±»åº”è¯¥è¢«åŠ è½½åˆ°Springå®¹å™¨ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ä¸‰è‡ªåŠ¨é…ç½®çš„åŠ è½½æµç¨‹"&gt;&lt;strong&gt;ä¸‰ã€è‡ªåŠ¨é…ç½®çš„åŠ è½½æµç¨‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AutoConfigurationImportSelector&lt;/code&gt;æ˜¯å®ç°è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒç±»ï¼Œå…¶åŠ è½½æµç¨‹çš„ç²¾é«“åœ¨äº &lt;strong&gt;â€œå€™é€‰â€&lt;/strong&gt; ä¸ &lt;strong&gt;â€œæ¡ä»¶â€&lt;/strong&gt; è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚&lt;/p&gt;
&lt;h4 id="1-è·å–å€™é€‰é…ç½®ç±»"&gt;&lt;strong&gt;1. è·å–å€™é€‰é…ç½®ç±»&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹å°±åƒæ˜¯å…ˆå‡†å¤‡ä¸€ä»½æ‰€æœ‰å¯èƒ½çš„â€œèœå•â€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AutoConfigurationImportSelector&lt;/code&gt;å®ç°äº† &lt;code&gt;DeferredImportSelector&lt;/code&gt;æ¥å£ï¼Œè¿™æ„å‘³ç€å®ƒçš„ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•ä¼šåœ¨æ‰€æœ‰å¸¸è§„çš„ &lt;code&gt;@Configuration&lt;/code&gt;ç±»å¤„ç†å®Œæˆä¹‹åæ‰è¢«è°ƒç”¨ï¼Œç¡®ä¿è‡ªåŠ¨é…ç½®ä¸ä¼šå¹²æ‰°ç”¨æˆ·çš„æ‰‹åŠ¨é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œå®ƒä¼šé€šè¿‡ &lt;code&gt;SpringFactoriesLoader&lt;/code&gt;æœºåˆ¶ï¼Œ&lt;strong&gt;æ‰«ææ•´ä¸ªç±»è·¯å¾„ä¸‹æ‰€æœ‰JARåŒ…ä¸­çš„ &lt;code&gt;META-INF/spring.factories&lt;/code&gt;æ–‡ä»¶ï¼ˆSpring Boot 2.xï¼‰æˆ– &lt;code&gt;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports&lt;/code&gt;æ–‡ä»¶ï¼ˆSpring Boot 3.xï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¿™äº›æ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾ &lt;strong&gt;&lt;code&gt;org.springframework.boot.autoconfigure.EnableAutoConfiguration&lt;/code&gt;&lt;/strong&gt; è¿™ä¸ªé”®ï¼ˆkeyï¼‰å¯¹åº”çš„æ‰€æœ‰é…ç½®ç±»çš„å…¨é™å®šåã€‚è¿™äº›ç±»å°±æ˜¯â€œå€™é€‰â€çš„è‡ªåŠ¨é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-æ¡ä»¶åŒ–ç­›é€‰"&gt;&lt;strong&gt;2. æ¡ä»¶åŒ–ç­›é€‰&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æœ‰äº†â€œå€™é€‰èœå•â€ï¼Œæ¥ä¸‹æ¥å°±è¦æ ¹æ®â€œé£Ÿå®¢â€çš„å®é™…æƒ…å†µï¼ˆå½“å‰åº”ç”¨çš„ç¯å¢ƒã€ä¾èµ–ç­‰ï¼‰æ¥å†³å®šæœ€ç»ˆä¸Šå“ªäº›èœã€‚è¿™æ˜¯é€šè¿‡ä¸€ç³»åˆ— &lt;strong&gt;&lt;code&gt;@ConditionalOn...&lt;/code&gt;&lt;/strong&gt; æ³¨è§£å®Œæˆçš„ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡ä»¶æ³¨è§£&lt;/th&gt;
&lt;th&gt;ç”Ÿæ•ˆæ¡ä»¶&lt;/th&gt;
&lt;th&gt;ä¸¾ä¾‹è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnClass&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»è·¯å¾„ä¸‹å­˜åœ¨æŒ‡å®šçš„ç±»&lt;/td&gt;
&lt;td&gt;åªæœ‰åœ¨å­˜åœ¨ &lt;code&gt;DataSource.class&lt;/code&gt;æ—¶ï¼Œæ•°æ®æºè‡ªåŠ¨é…ç½®æ‰ç”Ÿæ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šç±»å‹çš„Bean&lt;/td&gt;
&lt;td&gt;å¦‚æœç”¨æˆ·æ²¡æœ‰è‡ªå·±å®šä¹‰ &lt;code&gt;DataSource&lt;/code&gt;Beanï¼Œåˆ™è‡ªåŠ¨é…ç½®æä¾›ä¸€ä¸ªé»˜è®¤çš„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnProperty&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨æŒ‡å®šçš„å±æ€§ä¸”å€¼åŒ¹é…&lt;/td&gt;
&lt;td&gt;å¦‚ &lt;code&gt;@ConditionalOnProperty(prefix=&amp;quot;my.service&amp;quot;, name=&amp;quot;enabled&amp;quot;, havingValue=&amp;quot;true&amp;quot;)&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnWebApplication&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“å‰åº”ç”¨æ˜¯Webåº”ç”¨&lt;/td&gt;
&lt;td&gt;ç”¨äºWebç›¸å…³çš„è‡ªåŠ¨é…ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹ç¡®ä¿äº†&lt;strong&gt;è‡ªåŠ¨é…ç½®æ˜¯â€œæŒ‰éœ€â€åŠ è½½çš„&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œåªæœ‰åœ¨ä½ çš„pom.xmlä¸­å¼•å…¥äº†&lt;code&gt;spring-boot-starter-web&lt;/code&gt;ï¼ˆæ„å‘³ç€ç±»è·¯å¾„ä¸‹æœ‰Spring MVCçš„ç›¸å…³ç±»ï¼‰ï¼ŒSpring Bootæ‰ä¼šè‡ªåŠ¨é…ç½®å†…åµŒTomcatå’ŒSpring MVCçš„æ ¸å¿ƒç»„ä»¶ã€‚&lt;/p&gt;
&lt;h3 id="å››"&gt;&lt;strong&gt;å››ã€&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;ä¸ &lt;code&gt;@SpringBootApplication&lt;/code&gt;&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œåœ¨å¤§å¤šæ•°Spring Booté¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;ï¼Œè€Œæ˜¯ä½¿ç”¨äº†&lt;code&gt;@SpringBootApplication&lt;/code&gt;æ³¨è§£ã€‚è¿™æ˜¯å› ä¸º&lt;code&gt;@SpringBootApplication&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;å¤åˆæ³¨è§£&lt;/strong&gt;ï¼Œå®ƒå·²ç»åŒ…å«äº†&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration // è¢«åŒ…å«åœ¨å†…
@ComponentScan
public @interface SpringBootApplication {
// ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å› æ­¤ï¼Œä½¿ç”¨&lt;code&gt;@SpringBootApplication&lt;/code&gt;å°±ç­‰ä»·äºåŒæ—¶ä½¿ç”¨äº†&lt;code&gt;@Configuration&lt;/code&gt;, &lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;å’Œ&lt;code&gt;@ComponentScan&lt;/code&gt;ï¼Œè¿™æ˜¯Spring Bootæ¨èçš„æ ‡å‡†ç”¨æ³•ã€‚&lt;/p&gt;
&lt;h3 id="äº”å®é™…åº”ç”¨ä¸é…ç½®æ§åˆ¶"&gt;&lt;strong&gt;äº”ã€å®é™…åº”ç”¨ä¸é…ç½®æ§åˆ¶&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="1-æ’é™¤ç‰¹å®šçš„è‡ªåŠ¨é…ç½®"&gt;&lt;strong&gt;1. æ’é™¤ç‰¹å®šçš„è‡ªåŠ¨é…ç½®&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å¦‚æœæŸäº›è‡ªåŠ¨é…ç½®ä¸ç¬¦åˆä½ çš„éœ€æ±‚ï¼Œæˆ–è€…ä½ æƒ³å®Œå…¨æ‰‹åŠ¨æ§åˆ¶ï¼Œå¯ä»¥è½»æ¾åœ°æ’é™¤å®ƒä»¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ³¨è§£å±æ€§æ’é™¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})
public class MyApplication {
// ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨é…ç½®æ–‡ä»¶æ’é™¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-è°ƒè¯•è‡ªåŠ¨é…ç½®"&gt;&lt;strong&gt;2. è°ƒè¯•è‡ªåŠ¨é…ç½®&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å¦‚æœæƒ³çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆäº†ï¼Œå“ªäº›æ²¡æœ‰ç”Ÿæ•ˆä»¥åŠåŸå› ï¼Œå¯ä»¥å¼€å¯è°ƒè¯•æ¨¡å¼ã€‚åœ¨&lt;code&gt;application.properties&lt;/code&gt;ä¸­è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;debug=true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯åŠ¨åº”ç”¨åï¼Œæ§åˆ¶å°ä¼šæ‰“å°ä¸€ä»½è¯¦ç»†çš„è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œåˆ†ä¸ºâ€œPositive Matchesâ€ï¼ˆåŒ¹é…æˆåŠŸçš„é…ç½®ï¼‰å’Œâ€œNegative Matchesâ€ï¼ˆæœªåŒ¹é…çš„é…ç½®åŠåŸå› ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="å…­æ€»ç»“"&gt;&lt;strong&gt;å…­ã€æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;æ˜¯Spring Bootâ€œçº¦å®šä¼˜äºé…ç½®â€ç†å¿µçš„æ ¸å¿ƒä½“ç°ã€‚å…¶å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯åŠ¨è§¦å‘&lt;/strong&gt;ï¼šé€šè¿‡&lt;code&gt;@SpringBootApplication&lt;/code&gt;æ³¨è§£é—´æ¥å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€™é€‰å‘ç°&lt;/strong&gt;ï¼šç”±&lt;code&gt;AutoConfigurationImportSelector&lt;/code&gt;æ‰«æ&lt;code&gt;spring.factories&lt;/code&gt;æˆ–&lt;code&gt;AutoConfiguration.imports&lt;/code&gt;æ–‡ä»¶ï¼Œè·å–æ‰€æœ‰å¯èƒ½çš„è‡ªåŠ¨é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶è¿‡æ»¤&lt;/strong&gt;ï¼šåˆ©ç”¨&lt;code&gt;@ConditionalOn...&lt;/code&gt;ç³»åˆ—æ³¨è§£ï¼Œæ ¹æ®å½“å‰åº”ç”¨çš„ç±»è·¯å¾„ã€å·²æœ‰Beanã€é…ç½®å±æ€§ç­‰æ¡ä»¶è¿›è¡Œç­›é€‰ï¼Œæœ€ç»ˆç¡®å®šéœ€è¦åŠ è½½çš„é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Beanæ³¨å†Œ&lt;/strong&gt;ï¼šå°†ç­›é€‰åçš„é…ç½®ç±»ä¸­å®šä¹‰çš„Beanæ³¨å†Œåˆ°Springå®¹å™¨ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è§£è¿™ä¸€æœºåˆ¶ï¼Œä¸ä»…èƒ½è®©ä½ æ›´å¥½åœ°ä½¿ç”¨Spring Bootï¼Œä¹Ÿèƒ½åœ¨éœ€è¦å®šåˆ¶å’Œæ‰©å±•æ—¶å¾—å¿ƒåº”æ‰‹ã€‚&lt;/p&gt;
&lt;h2 id="import"&gt;@Import
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;@Import&lt;/code&gt;æ³¨è§£æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºå®ç°&lt;strong&gt;æ¨¡å—åŒ–é…ç½®&lt;/strong&gt;å’Œ&lt;strong&gt;çµæ´»æ³¨å†Œ Bean&lt;/strong&gt; çš„æ ¸å¿ƒå·¥å…·ä¹‹ä¸€ã€‚å®ƒå…è®¸ä½ å°†ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®ç±»ã€æ™®é€šç»„ä»¶æˆ–åŠ¨æ€é€‰æ‹©çš„é…ç½®å¯¼å…¥åˆ°å½“å‰çš„ Spring åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ï¼Œä»è€Œå¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†åº”ç”¨çš„é…ç½®ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™å¼ è¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº† &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£çš„å››ç§æ ¸å¿ƒç”¨æ³•åŠå…¶å…¸å‹åº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤è¯†ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¼å…¥ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ™®é€šç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Spring è‡ªåŠ¨å°†ç±»å®ä¾‹åŒ–å¹¶æ³¨å†Œä¸º Bean&lt;/td&gt;
&lt;td&gt;ç®€å•ç›´æ¥ï¼Œé€‚åˆå¿«é€Ÿæ³¨å†Œ&lt;/td&gt;
&lt;td&gt;æ•´åˆç¬¬ä¸‰æ–¹åº“ä¸­çš„ç®€å•å·¥å…·ç±»æˆ–æœåŠ¡ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;@Configuration&lt;/code&gt;é…ç½®ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€’å½’å¤„ç†ç›®æ ‡é…ç½®ç±»ä¸­çš„æ‰€æœ‰ &lt;code&gt;@Bean&lt;/code&gt;æ–¹æ³•ç­‰&lt;/td&gt;
&lt;td&gt;å®ç°é…ç½®çš„æ¨¡å—åŒ–ï¼Œæ‰¹é‡æ³¨å†Œ Bean&lt;/td&gt;
&lt;td&gt;æŒ‰åŠŸèƒ½æ¨¡å—ï¼ˆå¦‚æ•°æ®æºã€å®‰å…¨ï¼‰æ‹†åˆ†é…ç½®ï¼Œå¹¶åœ¨ä¸»é…ç½®ä¸­ç»„åˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ImportSelector&lt;/code&gt;å®ç°ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•åŠ¨æ€è¿”å›è¦å¯¼å…¥çš„ç±»åæ•°ç»„&lt;/td&gt;
&lt;td&gt;æä¾›&lt;strong&gt;æ¡ä»¶åŒ–ã€åŠ¨æ€åŒ–&lt;/strong&gt;çš„å¯¼å…¥èƒ½åŠ›&lt;/td&gt;
&lt;td&gt;Spring Boot çš„è‡ªåŠ¨é…ç½®ã€æ ¹æ®ç¯å¢ƒæˆ–æ³¨è§£å±æ€§åŠ è½½ä¸åŒé…ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;å®ç°ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;code&gt;registerBeanDefinitions&lt;/code&gt;æ–¹æ³•ç›´æ¥ç¼–ç¨‹å¼æ³¨å†Œ Bean å®šä¹‰&lt;/td&gt;
&lt;td&gt;æä¾›&lt;strong&gt;æœ€é«˜çº§åˆ«çš„çµæ´»æ€§&lt;/strong&gt;ï¼Œå¯è‡ªå®šä¹‰ Bean çš„å„ç±»å±æ€§&lt;/td&gt;
&lt;td&gt;é›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆå¦‚ MyBatisï¼‰ã€éœ€è¦ç²¾ç»†æ§åˆ¶ Bean å®šä¹‰çš„åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶ä¸æºç ç®€æ"&gt;ğŸ”§ æ ¸å¿ƒæœºåˆ¶ä¸æºç ç®€æ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@Import&lt;/code&gt;æ³¨è§£çš„å¤„ç†ä¸»è¦ç”± Spring çš„ &lt;code&gt;ConfigurationClassPostProcessor&lt;/code&gt;åŠå…¶å†…éƒ¨çš„ &lt;code&gt;ConfigurationClassParser&lt;/code&gt;å®Œæˆã€‚å…¶åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£æå…¥å£&lt;/strong&gt;ï¼šSpring å®¹å™¨åœ¨å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨ &lt;code&gt;ConfigurationClassPostProcessor&lt;/code&gt;æ¥å¤„ç†æ‰€æœ‰é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç† &lt;code&gt;@Import&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ &lt;code&gt;ConfigurationClassParser&lt;/code&gt;è§£æåˆ°ä¸€ä¸ªé…ç½®ç±»ä¸Šå­˜åœ¨ &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£æ—¶ï¼Œå®ƒä¼šæ ¹æ® &lt;code&gt;value&lt;/code&gt;å±æ€§ä¸­æŒ‡å®šçš„ç±»ç±»å‹ï¼Œè¿›å…¥ä¸åŒçš„å¤„ç†åˆ†æ”¯ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ˜¯æ™®é€šç±»ï¼Œåˆ™ç›´æ¥å°†å…¶æ³¨å†Œä¸º Bean å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ &lt;code&gt;ImportSelector&lt;/code&gt;å®ç°ç±»ï¼Œåˆ™ä¼šå®ä¾‹åŒ–è¯¥é€‰æ‹©å™¨ï¼Œå¹¶è°ƒç”¨å…¶ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•æ¥è·å–éœ€è¦å¯¼å…¥çš„ç±»åæ•°ç»„ï¼Œç„¶åé€’å½’å¤„ç†è¿™äº›ç±»ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;å®ç°ç±»ï¼Œåˆ™ä¼šå®ä¾‹åŒ–è¯¥æ³¨å†Œå™¨ï¼Œå¹¶å°†å…¶æš‚å­˜èµ·æ¥ï¼Œå¾…æ‰€æœ‰é…ç½®ç±»è§£æå®Œæˆåï¼Œå†è°ƒç”¨å…¶ &lt;code&gt;registerBeanDefinitions&lt;/code&gt;æ–¹æ³•è¿›è¡Œç¼–ç¨‹å¼æ³¨å†Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹åˆ«æœºåˆ¶ï¼š&lt;code&gt;DeferredImportSelector&lt;/code&gt;&lt;/strong&gt; è¿™æ˜¯ &lt;code&gt;ImportSelector&lt;/code&gt;çš„ä¸€ä¸ªå­æ¥å£ã€‚å®ç°è¯¥æ¥å£çš„é€‰æ‹©å™¨ä¼šè¢«&lt;strong&gt;å»¶è¿Ÿå¤„ç†&lt;/strong&gt;ï¼Œç›´åˆ°æ‰€æœ‰å…¶ä»–çš„é…ç½®ç±»ï¼ˆåŒ…æ‹¬é€šè¿‡ &lt;code&gt;@Import&lt;/code&gt;å¯¼å…¥çš„æ™®é€šé…ç½®ç±»ï¼‰éƒ½å¤„ç†å®Œæ¯•åæ‰æ‰§è¡Œã€‚è¿™ä¸ºå¤„ç†é…ç½®ç±»ä¹‹é—´çš„ä¾èµ–å’Œé¡ºåºé—®é¢˜æä¾›äº†ä¾¿åˆ©ï¼ŒSpring Boot çš„è‡ªåŠ¨é…ç½®å°±åˆ©ç”¨äº†è¿™ä¸€æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="1-æ¨¡å—åŒ–é…ç½®"&gt;1. æ¨¡å—åŒ–é…ç½®
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ &lt;code&gt;@Import&lt;/code&gt;æœ€å¸¸ç”¨çš„åœºæ™¯ï¼Œå¯ä»¥å°†åºå¤§çš„é…ç½®æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// æ•°æ®åº“é…ç½®æ¨¡å—
@Configuration
public class DatabaseConfig {
@Bean
public DataSource dataSource() {
return new HikariDataSource();
}
}
// å®‰å…¨é…ç½®æ¨¡å—
@Configuration
public class SecurityConfig {
@Bean
public SecurityFilter securityFilter() {
return new SecurityFilter();
}
}
// ä¸»é…ç½®ç±»ï¼šç»„åˆæ‰€æœ‰æ¨¡å—
@Configuration
@Import({DatabaseConfig.class, SecurityConfig.class}) // å¯¼å…¥å¤šä¸ªé…ç½®æ¨¡å—
public class AppConfig {
// ä¸»é…ç½®...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-æ¡ä»¶åŒ–ä¸åŠ¨æ€é…ç½®"&gt;2. æ¡ä»¶åŒ–ä¸åŠ¨æ€é…ç½®
&lt;/h4&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;ImportSelector&lt;/code&gt;ï¼Œå¯ä»¥æ ¹æ®è¿è¡Œæ—¶çš„æ¡ä»¶ï¼ˆå¦‚ç¯å¢ƒå˜é‡ã€æ³¨è§£å±æ€§ï¼‰åŠ¨æ€å†³å®šåŠ è½½å“ªäº›é…ç½®ï¼Œè¿™æ˜¯ Spring Boot &lt;strong&gt;è‡ªåŠ¨é…ç½®çš„åŸºçŸ³&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è‡ªå®šä¹‰é€‰æ‹©å™¨ï¼šæ ¹æ®ç³»ç»Ÿç¯å¢ƒå†³å®šå¯¼å…¥çš„é…ç½®
public class EnvironmentImportSelector implements ImportSelector {
@Override
public String[] selectImports(AnnotationMetadata importingClassMetadata) {
// ä¾‹å¦‚ï¼Œæ ¹æ®ç¯å¢ƒå˜é‡åˆ¤æ–­
if (&amp;#34;prod&amp;#34;.equals(System.getProperty(&amp;#34;app.env&amp;#34;))) {
return new String[] { ProdDatabaseConfig.class.getName() };
} else {
return new String[] { DevDatabaseConfig.class.getName() };
}
}
}
// åœ¨å¯åŠ¨ç±»æˆ–é…ç½®ç±»ä¸Šä½¿ç”¨
@Configuration
@Import(EnvironmentImportSelector.class)
public class AppConfig {
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-ç¼–ç¨‹å¼æ³¨å†Œä¸ç¬¬ä¸‰æ–¹é›†æˆ"&gt;3. ç¼–ç¨‹å¼æ³¨å†Œä¸ç¬¬ä¸‰æ–¹é›†æˆ
&lt;/h4&gt;&lt;p&gt;å½“éœ€è¦æ›´ç²¾ç»†åœ°æ§åˆ¶ Bean çš„æ³¨å†Œè¿‡ç¨‹ï¼Œæˆ–é›†æˆé‚£äº›æ²¡æœ‰ä½¿ç”¨ Spring æ³¨è§£çš„ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œ&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ˜¯ç†æƒ³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è‡ªå®šä¹‰æ³¨å†Œå™¨ï¼Œç¼–ç¨‹å¼åœ°æ³¨å†ŒBean
public class MyCustomRegistrar implements ImportBeanDefinitionRegistrar {
@Override
public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {
// åˆ›å»ºBeanå®šä¹‰
RootBeanDefinition beanDefinition = new RootBeanDefinition(MyExternalService.class);
// å¯ä»¥è®¾ç½®æ„é€ å™¨å‚æ•°ã€å±æ€§ç­‰
beanDefinition.getConstructorArgumentValues().addGenericArgumentValue(&amp;#34;someParameter&amp;#34;);
// å°†Beanå®šä¹‰æ³¨å†Œåˆ°å®¹å™¨ä¸­
registry.registerBeanDefinition(&amp;#34;myExternalService&amp;#34;, beanDefinition);
}
}
// é€šè¿‡@Importå¼•å…¥
@Configuration
@Import(MyCustomRegistrar.class)
public class AppConfig {
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä½¿ç”¨æ³¨æ„äº‹é¡¹"&gt;âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¾ªç¯å¯¼å…¥&lt;/strong&gt;ï¼šé…ç½®ç±» A å¯¼å…¥é…ç½®ç±» Bï¼Œè€Œé…ç½®ç±» B åˆå¯¼å…¥é…ç½®ç±» Aï¼Œè¿™å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºæˆ–å¯åŠ¨å¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ™®é€šçš„ &lt;code&gt;@Import&lt;/code&gt;æŒ‰å£°æ˜é¡ºåºæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DeferredImportSelector&lt;/code&gt;çš„å®ç°ä¼šåœ¨æœ€åæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥é€šè¿‡å®ç° &lt;code&gt;Ordered&lt;/code&gt;æ¥å£æˆ–ä½¿ç”¨ &lt;code&gt;@Order&lt;/code&gt;æ³¨è§£æ¥è°ƒæ•´å¤šä¸ª &lt;code&gt;ImportSelector&lt;/code&gt;æˆ– &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;çš„æ‰§è¡Œé¡ºåºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;@ComponentScan&lt;/code&gt;çš„å…³ç³»&lt;/strong&gt;ï¼š&lt;code&gt;@Import&lt;/code&gt;æ˜¯ä¸€ç§&lt;strong&gt;æ˜¾å¼å¯¼å…¥&lt;/strong&gt;çš„æ–¹å¼ï¼Œå®ƒä¸ä¾èµ–äºåŒ…æ‰«æã€‚è¿™å¯¹äºå¼•å…¥é‚£äº›ä¸åœ¨ &lt;code&gt;@ComponentScan&lt;/code&gt;æŒ‡å®šåŒ…è·¯å¾„ä¸‹çš„ç±»éå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@Import&lt;/code&gt;æ³¨è§£æ˜¯ Spring æ¡†æ¶ä¸­å®ç°&lt;strong&gt;æ¨¡å—åŒ–ã€æ¡ä»¶åŒ–å’Œå¯æ‰©å±•é…ç½®&lt;/strong&gt;çš„å¼ºå¤§å·¥å…·ã€‚ä»ç®€å•çš„ç»„åˆé…ç½®ï¼Œåˆ°æ”¯æ’‘èµ· Spring Boot åºå¤§çš„è‡ªåŠ¨é…ç½®ç”Ÿæ€ï¼Œå…¶é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚ç†è§£å¹¶ç†Ÿç»ƒè¿ç”¨å®ƒçš„å››ç§ç”¨æ³•ï¼Œå°†å¸®åŠ©ä½ æ„å»ºå‡ºæ›´æ¸…æ™°ã€æ›´çµæ´»ã€æ›´æ˜“äºç»´æŠ¤çš„ Spring åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡ &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£ï¼&lt;/p&gt;
&lt;h2 id="importselector"&gt;ImportSelector
&lt;/h2&gt;&lt;p&gt;Spring æ¡†æ¶ä¸­çš„ &lt;code&gt;ImportSelector&lt;/code&gt;æ¥å£æ˜¯ä¸€ä¸ªç”¨äº&lt;strong&gt;åŠ¨æ€é€‰æ‹©å’Œç»„ç»‡é…ç½®ç±»&lt;/strong&gt;çš„æ ¸å¿ƒæ‰©å±•ç‚¹ï¼Œå®ƒèƒ½è®©ä½ æ ¹æ®ç‰¹å®šæ¡ä»¶ï¼ˆå¦‚æ³¨è§£å±æ€§ã€ç³»ç»Ÿç¯å¢ƒç­‰ï¼‰åœ¨è¿è¡Œæ—¶çµæ´»å†³å®šå‘ Spring å®¹å™¨ä¸­æ³¨å†Œå“ªäº›ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸ä»·å€¼"&gt;ğŸ¯ æ ¸å¿ƒæ¦‚å¿µä¸ä»·å€¼
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;ImportSelector&lt;/code&gt;è§£å†³äº† Spring é…ç½®ä¸­â€œ&lt;strong&gt;é™æ€&lt;/strong&gt;â€å£°æ˜çš„é™åˆ¶ã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥å®ç°é…ç½®çš„&lt;strong&gt;åŠ¨æ€åŒ–&lt;/strong&gt;å’Œ&lt;strong&gt;æ¡ä»¶åŒ–&lt;/strong&gt;ï¼Œè¿™æ˜¯è®¸å¤šé«˜çº§ç‰¹æ€§ï¼ˆå¦‚ Spring Boot çš„è‡ªåŠ¨é…ç½®ï¼‰çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼å¯¹æ¯”äº†ä½¿ç”¨æ™®é€š &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£å’Œä½¿ç”¨ &lt;code&gt;ImportSelector&lt;/code&gt;çš„å…³é”®åŒºåˆ«ï¼Œå¸®åŠ©ä½ ç›´è§‚ç†è§£å…¶ä»·å€¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æ™®é€š &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ImportSelector&lt;/code&gt;æ¥å£&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™æ€ï¼Œåœ¨ç¼–è¯‘æ—¶ç¡®å®š&lt;/td&gt;
&lt;td&gt;åŠ¨æ€ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®æ¡ä»¶ç¡®å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›ºå®šï¼Œæ— æ³•æ ¹æ®æ¡ä»¶å˜åŒ–&lt;/td&gt;
&lt;td&gt;é«˜ï¼Œå¯æ ¹æ®æ³¨è§£å…ƒæ•°æ®ã€ç¯å¢ƒå˜é‡ç­‰çµæ´»é€‰æ‹©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥å¯¼å…¥å·²çŸ¥çš„é…ç½®ç±»&lt;/td&gt;
&lt;td&gt;æ¨¡å—åŒ–è£…é…ã€æ¡ä»¶åŒ–é…ç½®ã€è‡ªåŠ¨é…ç½®ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— ï¼ˆç›´æ¥åœ¨æ³¨è§£ä¸­å£°æ˜ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;selectImports(AnnotationMetadata)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶ä¸ä½¿ç”¨æ–¹æ³•"&gt;ğŸ”§ æ ¸å¿ƒæœºåˆ¶ä¸ä½¿ç”¨æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ImportSelector&lt;/code&gt;æ¥å£çš„æ ¸å¿ƒåœ¨äºå…¶å®šä¹‰çš„ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public interface ImportSelector {
String[] selectImports(AnnotationMetadata importingClassMetadata);
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;AnnotationMetadata importingClassMetadata&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸ªå‚æ•°éå¸¸å…³é”®ï¼Œå®ƒèƒ½è®©ä½ è·å–åˆ°&lt;strong&gt;æ ‡æ³¨äº† &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£çš„é‚£ä¸ªç±»çš„æ‰€æœ‰æ³¨è§£ä¿¡æ¯&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒè¯»å–è‡ªå®šä¹‰å¯ç”¨æ³¨è§£ä¸Šçš„å±æ€§å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›å€¼ &lt;code&gt;String[]&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªç”±&lt;strong&gt;éœ€è¦å¯¼å…¥åˆ° Spring å®¹å™¨ä¸­çš„é…ç½®ç±»çš„å…¨é™å®šå&lt;/strong&gt;ç»„æˆçš„æ•°ç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªç±»å®ç° &lt;code&gt;ImportSelector&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–å†™é€‰æ‹©é€»è¾‘&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•ä¸­ç¼–å†™ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„é…ç½®ç±»å…¨åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šè¿‡ &lt;code&gt;@Import&lt;/code&gt;å¼•å…¥&lt;/strong&gt;ï¼šåœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Šä½¿ç”¨ &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£ï¼Œå…¶å€¼å°±æ˜¯ä½ å®ç°çš„ &lt;code&gt;ImportSelector&lt;/code&gt;ç±»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-3"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ImportSelector&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„ä½“ç°åœ¨å¤šç§åœºæ™¯ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºç¯å¢ƒçš„æ¡ä»¶é…ç½®&lt;/strong&gt;ï¼šæ ¹æ®ä¸åŒçš„ç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€ç”Ÿäº§ï¼‰è‡ªåŠ¨åŠ è½½ä¸åŒçš„é…ç½®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ ¹æ®ç³»ç»Ÿå±æ€§æˆ–é…ç½®æ–‡ä»¶å†³å®šä½¿ç”¨å“ªç§æ•°æ®æºé…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å—åŒ–åŠŸèƒ½å¼€å…³&lt;/strong&gt;ï¼šç»“åˆè‡ªå®šä¹‰çš„ &lt;code&gt;@EnableXXX&lt;/code&gt;æ³¨è§£ï¼Œå®ç°åŠŸèƒ½çš„æŒ‰éœ€å¼€å¯ã€‚æ³¨è§£ä¸­çš„å±æ€§ï¼ˆå¦‚ &lt;code&gt;@EnableModule(cache = true)&lt;/code&gt;ï¼‰å¯ä»¥è¢« &lt;code&gt;ImportSelector&lt;/code&gt;è¯»å–ï¼Œä»è€Œå†³å®šæ˜¯å¦å¯¼å…¥ç¼“å­˜æ¨¡å—çš„é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Spring Boot è‡ªåŠ¨é…ç½®&lt;/strong&gt;ï¼šè¿™æ˜¯ &lt;code&gt;ImportSelector&lt;/code&gt;æœ€è‘—åçš„åº”ç”¨ã€‚Spring Boot çš„ &lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;æ³¨è§£èƒŒåä½¿ç”¨çš„æ˜¯ &lt;code&gt;AutoConfigurationImportSelector&lt;/code&gt;ï¼Œå®ƒä» &lt;code&gt;spring.factories&lt;/code&gt;æ–‡ä»¶ä¸­è¯»å–å¤§é‡è‡ªåŠ¨é…ç½®ç±»ï¼Œå¹¶æ ¹æ®æ¡ä»¶ï¼ˆå¦‚ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŸä¸ªç±»ï¼‰æœ€ç»ˆç­›é€‰å‡ºéœ€è¦ç”Ÿæ•ˆçš„é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¿›é˜¶ç”¨æ³•"&gt;âš™ï¸ è¿›é˜¶ç”¨æ³•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å»¶è¿Ÿå¯¼å…¥ï¼š&lt;code&gt;DeferredImportSelector&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ &lt;code&gt;ImportSelector&lt;/code&gt;çš„ä¸€ä¸ªå­æ¥å£ã€‚å®ç°å®ƒå¯ä»¥å°†é…ç½®ç±»çš„å¯¼å…¥å†³ç­–&lt;strong&gt;æ¨è¿Ÿåˆ°æ‰€æœ‰å…¶ä»– &lt;code&gt;@Configuration&lt;/code&gt;ç±»éƒ½è¢«å¤„ç†ä¹‹åå†è¿›è¡Œ&lt;/strong&gt;ã€‚è¿™å¯¹äºå¤„ç†é…ç½®ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»æˆ–ç¡®ä¿æŸäº›è‡ªåŠ¨é…ç½®åœ¨ç‰¹å®šé¡ºåºä¸‹æ‰§è¡Œéå¸¸æœ‰ç”¨ï¼ŒSpring Boot çš„è‡ªåŠ¨é…ç½®å°±ä¾èµ–äºæ­¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–å®¹å™¨ä¿¡æ¯ï¼šå®ç° &lt;code&gt;Aware&lt;/code&gt;æ¥å£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„ &lt;code&gt;ImportSelector&lt;/code&gt;å®ç°ç±»è¿˜éœ€è¦æ„ŸçŸ¥ Spring å®¹å™¨çš„ç¯å¢ƒï¼ˆ&lt;code&gt;Environment&lt;/code&gt;ï¼‰ã€èµ„æºåŠ è½½å™¨ï¼ˆ&lt;code&gt;ResourceLoader&lt;/code&gt;ï¼‰ç­‰ä¿¡æ¯ï¼Œå¯ä»¥åŒæ—¶å®ç°ç›¸åº”çš„ &lt;code&gt;Aware&lt;/code&gt;æ¥å£ï¼ˆå¦‚ &lt;code&gt;EnvironmentAware&lt;/code&gt;ã€&lt;code&gt;ResourceLoaderAware&lt;/code&gt;ï¼‰ã€‚Spring ä¼šåœ¨è°ƒç”¨ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•ä¹‹å‰ï¼Œå…ˆè°ƒç”¨è¿™äº› &lt;code&gt;Aware&lt;/code&gt;æ¥å£çš„æ–¹æ³•ï¼Œå°†æ‰€éœ€èµ„æºæ³¨å…¥ç»™ä½ çš„ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç®€å•ä»£ç ç¤ºä¾‹"&gt;ğŸ“ ç®€å•ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¨¡æ‹ŸåŠŸèƒ½å¼€å…³çš„ç®€å•ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šä¹‰åŠŸèƒ½å¼€å…³æ³¨è§£&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
@Import(MyFeatureSelector.class) // å…³è”ä¸‹é¢çš„Selector
public @interface EnableMyFeature {
boolean cacheEnabled() default false;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç° ImportSelector&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class MyFeatureSelector implements ImportSelector {
@Override
public String[] selectImports(AnnotationMetadata importingClassMetadata) {
// è·å–å¯ç”¨æ³¨è§£çš„å±æ€§
Map&amp;lt;String, Object&amp;gt; attrs = importingClassMetadata
.getAnnotationAttributes(EnableMyFeature.class.getName());
boolean cacheEnabled = (Boolean) attrs.get(&amp;#34;cacheEnabled&amp;#34;);
if (cacheEnabled) {
return new String[]{&amp;#34;com.example.CacheConfig&amp;#34;};
}
return new String[0]; // è¿”å›ç©ºæ•°ç»„ï¼Œè¡¨ç¤ºä¸å¯¼å…¥ä»»ä½•é¢å¤–é…ç½®
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ¨é…ç½®ç±»ä¸Šä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Configuration
@EnableMyFeature(cacheEnabled = true) // å¼€å¯ç¼“å­˜åŠŸèƒ½
public class AppConfig {
// ... å…¶ä»–é…ç½®
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ImportSelector&lt;/code&gt;æ˜¯ Spring æ¡†æ¶ä¸­å®ç°&lt;strong&gt;çµæ´»é…ç½®å’Œæ¨¡å—åŒ–é©±åŠ¨&lt;/strong&gt;çš„å…³é”®ã€‚å½“ä½ çš„åº”ç”¨éœ€è¦æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶åŠ¨æ€ç»„è£…ç»„ä»¶ï¼Œæˆ–è€…æ­£åœ¨è®¾è®¡ä¸€ä¸ªéœ€è¦è¢«å…¶ä»–åº”ç”¨é›†æˆçš„åŠŸèƒ½æ¨¡å—æˆ– Starter æ—¶ï¼Œ&lt;code&gt;ImportSelector&lt;/code&gt;æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ—¶ï¼Œæœ‰å‡ ç‚¹æœ€ä½³å®è·µå€¼å¾—æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿æŒ &lt;code&gt;selectImports&lt;/code&gt;æ–¹æ³•å†…çš„é€»è¾‘&lt;strong&gt;è½»é‡ä¸”é«˜æ•ˆ&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“åº”ç”¨å¯åŠ¨æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç»“åˆ &lt;code&gt;@Conditional&lt;/code&gt;ç³»åˆ—æ³¨è§£è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ¡ä»¶æ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;å……åˆ†ç†è§£å’Œåˆ©ç”¨ &lt;code&gt;AnnotationMetadata&lt;/code&gt;å‚æ•°ï¼Œå®ƒæä¾›äº†å†³ç­–æ‰€éœ€çš„å…³é”®ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ Spring ä¸­çš„ &lt;code&gt;ImportSelector&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯æˆ–å®ç°ç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="importbeandefinitionregistrar"&gt;ImportBeanDefinitionRegistrar
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ˜¯ Spring æ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ‰©å±•æ¥å£ï¼Œå®ƒå…è®¸ä½ åœ¨ Spring å®¹å™¨åˆå§‹åŒ–æ—¶ï¼Œ&lt;strong&gt;ä»¥ç¼–ç¨‹æ–¹å¼åŠ¨æ€åœ°å‘å®¹å™¨ä¸­æ³¨å†Œ Bean å®šä¹‰&lt;/strong&gt;ã€‚è¿™ä¸ºéœ€è¦ç²¾ç»†æ§åˆ¶ Bean æ³¨å†Œæµç¨‹çš„åœºæ™¯æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œæ˜¯æ„å»ºå¯æ‰©å±•æ¡†æ¶å’Œæ’ä»¶åŒ–ç³»ç»Ÿçš„åˆ©å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼Œä¸‹è¡¨å¯¹æ¯”äº† &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;ä¸å…¶ä»–å‡ ç§å¸¸è§çš„ Bean æ³¨å†Œæ–¹å¼çš„æ ¸å¿ƒå·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@Component&lt;/code&gt;ç­‰æ³¨è§£&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@Bean&lt;/code&gt;æ³¨è§£&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ImportSelector&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜å¼&lt;/td&gt;
&lt;td&gt;å£°æ˜å¼&lt;/td&gt;
&lt;td&gt;åŠ¨æ€é€‰æ‹©ç±»å&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼–ç¨‹å¼ã€åŠ¨æ€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶ç²’åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»çº§åˆ«&lt;/td&gt;
&lt;td&gt;æ–¹æ³•çº§åˆ«&lt;/td&gt;
&lt;td&gt;ç±»åæ•°ç»„çº§åˆ«&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;BeanDefinition çº§åˆ«ï¼ˆå¯è®¾ç½®å±æ€§ã€æ„é€ å‚æ•°ç­‰ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›ºå®š&lt;/td&gt;
&lt;td&gt;å›ºå®š&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜ï¼Œå¯æ¡ä»¶åŒ–è¿”å›ç±»å&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€é«˜ï¼Œå¯åŸºäºå¤æ‚æ¡ä»¶é€»è¾‘æ³¨å†Œ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ³¨å†Œè‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶&lt;/td&gt;
&lt;td&gt;æ³¨å†Œç¬¬ä¸‰æ–¹åº“ç»„ä»¶&lt;/td&gt;
&lt;td&gt;Spring Boot è‡ªåŠ¨é…ç½®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¡†æ¶é›†æˆã€æ’ä»¶ç³»ç»Ÿã€åŠ¨æ€æ•°æ®æº&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶ä¸ä½¿ç”¨æ–¹æ³•-1"&gt;ğŸ”§ æ ¸å¿ƒæœºåˆ¶ä¸ä½¿ç”¨æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ¥å£çš„æ ¸å¿ƒæ˜¯ &lt;code&gt;registerBeanDefinitions&lt;/code&gt;æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public interface ImportBeanDefinitionRegistrar {
void registerBeanDefinitions(AnnotationMetadata importingClassMetadata,
BeanDefinitionRegistry registry);
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;AnnotationMetadata importingClassMetadata&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™ä¸ªå‚æ•°æä¾›äº†&lt;strong&gt;å¯¼å…¥è¯¥ Registrar çš„é…ç½®ç±»ï¼ˆå³ä½¿ç”¨äº† &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£çš„ç±»ï¼‰çš„æ‰€æœ‰æ³¨è§£å…ƒæ•°æ®&lt;/strong&gt;ã€‚ä½ å¯ä»¥åˆ©ç”¨å®ƒæ¥è¯»å–é…ç½®ç±»ä¸Šçš„æ³¨è§£å±æ€§ï¼Œä»è€Œå®ç°é«˜åº¦å¯é…ç½®çš„åŠ¨æ€æ³¨å†Œé€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;BeanDefinitionRegistry registry&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯ &lt;strong&gt;Spring å®¹å™¨ä¸­ Bean å®šä¹‰çš„æ³¨å†Œä¸­å¿ƒ&lt;/strong&gt;ã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥æ‰§è¡Œ &lt;code&gt;registerBeanDefinition&lt;/code&gt;æ¥æ³¨å†Œæ–°çš„ Beanï¼Œæˆ–è€…æŸ¥è¯¢å®¹å™¨ä¸­å·²å­˜åœ¨çš„ Bean å®šä¹‰ï¼ˆ&lt;code&gt;containsBeanDefinition&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä½¿ç”¨æ–¹å¼å›ºå®šä¸”ç®€å•ï¼Œé€šå¸¸åªéœ€ä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªç±»å®ç° &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–å†™æ³¨å†Œé€»è¾‘&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;registerBeanDefinitions&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;æ¥æ³¨å†Œä½ çš„ Bean å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šè¿‡ &lt;code&gt;@Import&lt;/code&gt;å¼•å…¥&lt;/strong&gt;ï¼šåœ¨ä¸€ä¸ªé…ç½®ç±»ï¼ˆæ ‡æ³¨äº† &lt;code&gt;@Configuration&lt;/code&gt;çš„ç±»ï¼‰ä¸Šä½¿ç”¨ &lt;code&gt;@Import&lt;/code&gt;æ³¨è§£ï¼Œå°†ä½ å®ç°çš„ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;ç±»å¯¼å…¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-4"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½å¤Ÿåº”å¯¹å„ç§å¤æ‚çš„ã€éœ€è¦åŠ¨æ€æ§åˆ¶çš„æ³¨å†Œåœºæ™¯ã€‚&lt;/p&gt;
&lt;h4 id="1-æ¡ä»¶åŒ–-bean-æ³¨å†Œ"&gt;1. æ¡ä»¶åŒ– Bean æ³¨å†Œ
&lt;/h4&gt;&lt;p&gt;æ ¹æ®æŸäº›ç‰¹å®šæ¡ä»¶ï¼ˆå¦‚æŸä¸ªç±»æ˜¯å¦å­˜åœ¨ã€æŸä¸ª Bean æ˜¯å¦å·²å®šä¹‰ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰æ¥å†³å®šæ˜¯å¦æ³¨å†ŒæŸä¸ª Beanã€‚è¿™åœ¨æ¨¡å—åŒ–å¼€å‘å’Œæ¡†æ¶é›†æˆä¸­éå¸¸å¸¸è§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Override
public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {
// æ£€æŸ¥å®¹å™¨ä¸­æ˜¯å¦å·²å­˜åœ¨æŸä¸ªå…³é”®çš„ Bean æˆ–ç±»
boolean conditionMet = registry.containsBeanDefinition(&amp;#34;someRequiredBean&amp;#34;) ||
ClassUtils.isPresent(&amp;#34;some.RequiredClass&amp;#34;, null);
if (conditionMet) {
RootBeanDefinition beanDefinition = new RootBeanDefinition(MyConditionalBean.class);
registry.registerBeanDefinition(&amp;#34;myConditionalBean&amp;#34;, beanDefinition);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-æ³¨è§£é©±åŠ¨ä¸è‡ªåŠ¨æ‰«æ"&gt;2. æ³¨è§£é©±åŠ¨ä¸è‡ªåŠ¨æ‰«æ
&lt;/h4&gt;&lt;p&gt;ä½ å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼ˆå¦‚ &lt;code&gt;@MyService&lt;/code&gt;ï¼‰ï¼Œç„¶åé€šè¿‡ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ‰«æç‰¹å®šçš„åŒ…è·¯å¾„ï¼Œå°†æ‰€æœ‰æ ‡æ³¨äº†è¯¥æ³¨è§£çš„ç±»è‡ªåŠ¨æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ã€‚è¿™ç§æ–¹å¼å¸¸ç”¨äºä¸ºè‡ªå®šä¹‰æ¡†æ¶æˆ– Starter æä¾›è‡ªåŠ¨é…ç½®èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è‡ªå®šä¹‰æ³¨è§£
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface MyService {}
// åœ¨ Registrar ä¸­æ‰«æå¹¶æ³¨å†Œ
@Override
public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {
ClassPathBeanDefinitionScanner scanner = new ClassPathBeanDefinitionScanner(registry, false);
// æ·»åŠ åŒ…å«è¿‡æ»¤å™¨ï¼ŒåªåŒ…å«å¸¦æœ‰ @MyService æ³¨è§£çš„ç±»
scanner.addIncludeFilter(new AnnotationTypeFilter(MyService.class));
// æ‰«ææŒ‡å®šåŒ…
scanner.scan(&amp;#34;com.example.mypackage&amp;#34;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-é›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶"&gt;3. é›†æˆç¬¬ä¸‰æ–¹æ¡†æ¶
&lt;/h4&gt;&lt;p&gt;è®¸å¤šè‘—åçš„æ¡†æ¶ï¼Œå¦‚ Spring Cloud Feignã€MyBatis-Spring ç­‰ï¼Œéƒ½åˆ©ç”¨ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ¥å°†é Spring ç®¡ç†çš„ç»„ä»¶ï¼ˆå¦‚ Feign å®¢æˆ·ç«¯æ¥å£ã€MyBatis Mapper æ¥å£ï¼‰åŠ¨æ€åœ°ç”Ÿæˆä»£ç† Bean å¹¶æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ï¼Œä»è€Œå®ç°æ— ç¼é›†æˆã€‚&lt;/p&gt;
&lt;h3 id="-è¿›é˜¶ç”¨æ³•ä¸æœ€ä½³å®è·µ"&gt;âš™ï¸ è¿›é˜¶ç”¨æ³•ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;h4 id="å®ç°-awareæ¥å£è·å–æ›´å¤šä¸Šä¸‹æ–‡"&gt;å®ç° &lt;code&gt;Aware&lt;/code&gt;æ¥å£è·å–æ›´å¤šä¸Šä¸‹æ–‡
&lt;/h4&gt;&lt;p&gt;ä¸ºäº†è®©ä½ çš„ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;å®ç°æ›´å¼ºå¤§ï¼Œä½ å¯ä»¥è®©å®ƒå®ç°ä¸€äº› &lt;code&gt;Aware&lt;/code&gt;æ¥å£ï¼ˆå¦‚ &lt;code&gt;EnvironmentAware&lt;/code&gt;ã€&lt;code&gt;ResourceLoaderAware&lt;/code&gt;ï¼‰ï¼Œä»è€Œè·å– Spring å®¹å™¨çš„ç¯å¢ƒä¿¡æ¯ã€èµ„æºåŠ è½½å™¨ç­‰ï¼Œä½¿ä½ çš„æ³¨å†Œé€»è¾‘æ›´åŠ æ™ºèƒ½ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class AdvancedRegistrar implements ImportBeanDefinitionRegistrar, EnvironmentAware {
private Environment environment;
@Override
public void setEnvironment(Environment environment) {
this.environment = environment; // è·å–ç¯å¢ƒä¿¡æ¯ï¼Œå¦‚é…ç½®å±æ€§
}
@Override
public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {
// å¯ä»¥ä½¿ç”¨ environment ä¸­çš„å±æ€§æ¥å½±å“æ³¨å†Œé€»è¾‘
String someProperty = environment.getProperty(&amp;#34;my.config.property&amp;#34;);
// ... åŸºäºå±æ€§çš„åŠ¨æ€æ³¨å†Œé€»è¾‘
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ç²¾ç»†æ§åˆ¶-bean-å®šä¹‰"&gt;ç²¾ç»†æ§åˆ¶ Bean å®šä¹‰
&lt;/h4&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;GenericBeanDefinition&lt;/code&gt;ã€&lt;code&gt;RootBeanDefinition&lt;/code&gt;ç­‰ï¼Œä½ å¯ä»¥å¯¹è¦æ³¨å†Œçš„ Bean è¿›è¡Œéå¸¸ç²¾ç»†çš„æ§åˆ¶ï¼Œä¾‹å¦‚è®¾ç½®ä½œç”¨åŸŸã€æ‡’åŠ è½½ã€åˆå§‹åŒ–æ–¹æ³•ã€æ„é€ å™¨å‚æ•°ã€å±æ€§å€¼ç­‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Override
public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {
GenericBeanDefinition beanDefinition = new GenericBeanDefinition();
beanDefinition.setBeanClass(MyComplexBean.class);
beanDefinition.setScope(BeanDefinition.SCOPE_SINGLETON);
beanDefinition.setLazyInit(true);
// è®¾ç½®æ„é€ å™¨å‚æ•°
ConstructorArgumentValues cav = new ConstructorArgumentValues();
cav.addIndexedArgumentValue(0, &amp;#34;constructorArg1&amp;#34;);
beanDefinition.setConstructorArgumentValues(cav);
// è®¾ç½®å±æ€§å€¼
MutablePropertyValues pvs = new MutablePropertyValues();
pvs.add(&amp;#34;propertyName&amp;#34;, &amp;#34;propertyValue&amp;#34;);
beanDefinition.setPropertyValues(pvs);
registry.registerBeanDefinition(&amp;#34;myComplexBean&amp;#34;, beanDefinition);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„äº‹é¡¹-5"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ—¶æœº&lt;/strong&gt;ï¼š&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;çš„æ‰§è¡Œæ˜¯åœ¨ Spring å®¹å™¨è§£æé…ç½®ç±»çš„æ—©æœŸé˜¶æ®µã€‚æ­¤æ—¶ï¼Œå®¹å™¨ä¸­å¤§éƒ¨åˆ†çš„ Bean å®šä¹‰å¯èƒ½è¿˜æœªè¢«åˆ›å»ºæˆ Bean å®ä¾‹ï¼Œä½†ä½ &lt;strong&gt;å¯ä»¥æŸ¥è¯¢åˆ°å…¶ä»– &lt;code&gt;BeanDefinition&lt;/code&gt;æ˜¯å¦å­˜åœ¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è¿‡åº¦ä½¿ç”¨&lt;/strong&gt;ï¼šè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†åº”&lt;strong&gt;é¿å…åœ¨æ‰€æœ‰åœºæ™¯ä¸‹æ»¥ç”¨&lt;/strong&gt;ã€‚å¯¹äºç®€å•çš„é™æ€ Bean æ³¨å†Œï¼Œä½¿ç”¨ &lt;code&gt;@Bean&lt;/code&gt;æˆ– &lt;code&gt;@Component&lt;/code&gt;ç­‰æ³¨è§£é€šå¸¸æ›´ç®€æ´æ˜äº†ã€‚åªæœ‰åœ¨çœŸæ­£éœ€è¦åŠ¨æ€é€»è¾‘æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;ï¼Œä»¥ä¿æŒä»£ç çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£åº•å±‚åŸç†&lt;/strong&gt;ï¼šæ·±å…¥ä½¿ç”¨ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;éœ€è¦å¯¹ Spring çš„ &lt;code&gt;BeanDefinition&lt;/code&gt;ä½“ç³»æœ‰è¾ƒå¥½çš„ç†è§£ï¼Œå› ä¸ºè¿™æœ¬è´¨ä¸Šæ˜¯ç›´æ¥åœ¨æ“ä½œå®¹å™¨æœ€æ ¸å¿ƒçš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªåº•å±‚ä¸”å¼ºå¤§çš„æ‰©å±•ç‚¹ï¼Œå®ƒå°† Bean æ³¨å†Œçš„æ§åˆ¶æƒå®Œå…¨äº¤ç»™äº†å¼€å‘è€…ã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥å®ç°ä»ç®€å•çš„æ¡ä»¶æ³¨å†Œåˆ°å¤æ‚çš„æ¡†æ¶é›†æˆç­‰å„ç§é«˜çº§åŠŸèƒ½ã€‚ç†è§£å¹¶æ°å½“è¿ç”¨å®ƒï¼Œå°†æå¤§æå‡ä½ åº”å¯¹å¤æ‚ Spring åº”ç”¨æ¶æ„çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æŒæ¡ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;çš„ç²¾é«“ï¼å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„åº”ç”¨åœºæ™¯æˆ–å®ç°ç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="beandefinitionregistry"&gt;BeanDefinitionRegistry
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;æ˜¯ Spring IoC å®¹å™¨çš„æ ¸å¿ƒæ¥å£ä¹‹ä¸€ï¼Œä½ å¯ä»¥å°†å®ƒç†è§£æˆ &lt;strong&gt;Spring å®¹å™¨ä¸­ä¸“é—¨ç®¡ç† Bean å®šä¹‰ï¼ˆ&lt;code&gt;BeanDefinition&lt;/code&gt;ï¼‰çš„â€œæˆ·ç±ç®¡ç†ä¸­å¿ƒâ€&lt;/strong&gt;ã€‚å®ƒè´Ÿè´£æ³¨å†Œã€å­˜å‚¨å’Œç®¡ç†æ‰€æœ‰ Bean çš„é…ç½®å…ƒæ•°æ®ï¼Œæ˜¯ Spring æ¡†æ¶å®ç°æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹è¡¨æ¦‚æ‹¬äº† &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å…±åŒæ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„ Bean å®šä¹‰ç”Ÿå‘½å‘¨æœŸç®¡ç†ä½“ç³»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/th&gt;
&lt;th&gt;å¯¹åº”æ–¹æ³•&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¨å†Œ Bean å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;registerBeanDefinition(String beanName, BeanDefinition beanDefinition)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°† Bean çš„é…ç½®å…ƒæ•°æ®ï¼ˆ&lt;code&gt;BeanDefinition&lt;/code&gt;ï¼‰æ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç§»é™¤ Bean å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;removeBeanDefinition(String beanName)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»å®¹å™¨ä¸­ç§»é™¤æŒ‡å®šåç§°çš„ Bean å®šä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢ Bean å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;getBeanDefinition(String beanName)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®åç§°è·å–å¯¹åº”çš„ Bean å®šä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ£€æŸ¥æ˜¯å¦å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;containsBeanDefinition(String beanName)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦å·²åŒ…å«æŒ‡å®šåç§°çš„ Bean å®šä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·å–æ‰€æœ‰åç§°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;getBeanDefinitionNames()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å®¹å™¨ä¸­æ‰€æœ‰å·²æ³¨å†Œçš„ Bean å®šä¹‰åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»Ÿè®¡æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;getBeanDefinitionCount()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å®¹å™¨ä¸­å·²æ³¨å†Œçš„ Bean å®šä¹‰æ€»æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ£€æŸ¥åç§°æ˜¯å¦å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;isBeanNameInUse(String beanName)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ£€æŸ¥ç»™å®šçš„åç§°æ˜¯å¦å·²è¢«æ³¨å†Œä¸º Bean å®šä¹‰æˆ–åˆ«åã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶ä¸å®ç°åŸç†"&gt;ğŸ”§ æ ¸å¿ƒæœºåˆ¶ä¸å®ç°åŸç†
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;æœ¬èº«æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å…·ä½“å®ç°å†³å®šäº†å…¶å†…éƒ¨è¿ä½œæœºåˆ¶ã€‚&lt;/p&gt;
&lt;h4 id="1-åº•å±‚æ•°æ®ç»“æ„"&gt;&lt;strong&gt;1. åº•å±‚æ•°æ®ç»“æ„&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;æœ€å…³é”®çš„å®ç°ç±»æ˜¯ &lt;code&gt;DefaultListableBeanFactory&lt;/code&gt;ã€‚å…¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ª &lt;strong&gt;&lt;code&gt;ConcurrentHashMap&lt;/code&gt;&lt;/strong&gt; æ¥å­˜å‚¨ Bean å®šä¹‰ï¼Œé”®æ˜¯ Bean çš„åç§°ï¼ˆ&lt;code&gt;beanName&lt;/code&gt;ï¼‰ï¼Œå€¼å°±æ˜¯ &lt;code&gt;BeanDefinition&lt;/code&gt;å¯¹è±¡ã€‚è¿™ç§ç»“æ„ç¡®ä¿äº†é«˜æ•ˆçš„æŸ¥æ‰¾å’Œå­˜å‚¨ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// åœ¨ DefaultListableBeanFactory å†…éƒ¨
private final Map&amp;lt;String, BeanDefinition&amp;gt; beanDefinitionMap = new ConcurrentHashMap&amp;lt;&amp;gt;(256);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-æ³¨å†Œæµç¨‹è¯¦è§£"&gt;&lt;strong&gt;2. æ³¨å†Œæµç¨‹è¯¦è§£&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ä»¥ &lt;code&gt;DefaultListableBeanFactory.registerBeanDefinition()&lt;/code&gt;æ–¹æ³•ä¸ºä¾‹ï¼Œæ³¨å†Œä¸€ä¸ª Bean å®šä¹‰å¹¶éç®€å•æ”¾å…¥ Mapï¼Œè¿˜åŒ…å«ä¸€ç³»åˆ—ä¸¥è°¨çš„æ­¥éª¤ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœ‰æ•ˆæ€§æ ¡éªŒ&lt;/strong&gt;ï¼šæ£€æŸ¥ &lt;code&gt;beanName&lt;/code&gt;å’Œ &lt;code&gt;beanDefinition&lt;/code&gt;æ˜¯å¦ä¸ºç©ºï¼Œå¹¶å¯¹ &lt;code&gt;AbstractBeanDefinition&lt;/code&gt;è¿›è¡Œé¢å¤–çš„éªŒè¯ï¼ˆå¦‚æ ¡éªŒæ–¹æ³•è¦†ç›–&lt;code&gt;methodOverrides&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†è¦†ç›–æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;beanName&lt;/code&gt;å·²å­˜åœ¨ï¼Œä¼šæ ¹æ®é…ç½®å†³å®šæ˜¯æŠ›å‡ºå¼‚å¸¸ï¼ˆä¸å…è®¸è¦†ç›–æ—¶ï¼‰è¿˜æ˜¯ç”¨æ–°å®šä¹‰è¦†ç›–æ—§å®šä¹‰ï¼ˆå…è®¸è¦†ç›–æ—¶ï¼‰ï¼Œå¹¶è®°å½•ç›¸åº”æ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘å®‰å…¨å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœ Bean çš„åˆ›å»ºè¿‡ç¨‹å·²ç»å¼€å§‹ï¼Œæ³¨å†Œæ“ä½œä¼šè¿›è¡ŒåŒæ­¥æ§åˆ¶ï¼ˆåŠ é”ï¼‰ï¼Œä»¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°ç¼“å­˜&lt;/strong&gt;ï¼šå°†æ–°çš„ Bean å®šä¹‰æ”¾å…¥ &lt;code&gt;beanDefinitionMap&lt;/code&gt;ï¼Œå¹¶æ›´æ–°ç›¸å…³çš„è¾…åŠ©åˆ—è¡¨ï¼ˆå¦‚ &lt;code&gt;beanDefinitionNames&lt;/code&gt;ï¼‰ã€‚å¦‚æœå­˜åœ¨åŒåçš„å•ä¾‹ Beanï¼Œä¼šé‡ç½®ç›¸å…³ç¼“å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="3-ä¸»è¦å®ç°ç±»"&gt;&lt;strong&gt;3. ä¸»è¦å®ç°ç±»&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Spring æä¾›äº†å‡ ä¸ªé‡è¦çš„å®ç°ç±»ï¼Œç”¨äºä¸åŒåœºæ™¯ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;DefaultListableBeanFactory&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;strong&gt;æœ€æ ¸å¿ƒã€æœ€å¸¸ç”¨çš„å®ç°&lt;/strong&gt;ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€åŠŸèƒ½å®Œæ•´çš„ Bean å·¥å‚ï¼ŒåŒæ—¶å®ç°äº† &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;GenericApplicationContext&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„åº”ç”¨ä¸Šä¸‹æ–‡ã€‚å®ƒå†…éƒ¨æŒæœ‰ä¸€ä¸ª &lt;code&gt;DefaultListableBeanFactory&lt;/code&gt;å®ä¾‹ï¼Œå¹¶å°†æ‰€æœ‰ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;æ¥å£çš„æ–¹æ³•è°ƒç”¨&lt;strong&gt;å§”æ‰˜&lt;/strong&gt;ç»™è¿™ä¸ªå†…éƒ¨å·¥å‚å»æ‰§è¡Œ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SimpleBeanDefinitionRegistry&lt;/code&gt;&lt;/strong&gt;ï¼šä¸€ä¸ªç®€å•çš„å®ç°ï¼Œä»…æä¾›æ³¨å†Œè¡¨åŠŸèƒ½ï¼Œä¸åŒ…å«å®Œæ•´çš„ Bean å·¥å‚èƒ½åŠ›ï¼Œé€šå¸¸ç”¨äºæµ‹è¯•æˆ–ç®€å•çš„é›†æˆåœºæ™¯ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-5"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒæ”¯æŒ Spring çš„å¤šç§é«˜çº§ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h4 id="1-åŠ¨æ€æ³¨å†Œ-bean"&gt;&lt;strong&gt;1. åŠ¨æ€æ³¨å†Œ Bean&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€ç»å…¸çš„åº”ç”¨ã€‚ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®æ¡ä»¶ç¼–ç¨‹å¼åœ°å‘ Spring å®¹å™¨ä¸­æ·»åŠ  Beanã€‚è¿™é€šå¸¸é€šè¿‡å®ç° &lt;strong&gt;&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;&lt;/strong&gt; æ¥å£æ¥å®Œæˆï¼Œè¯¥æ¥å£çš„å›è°ƒæ–¹æ³•ä¼šä¼ å…¥ä¸€ä¸ª &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;å®ä¾‹ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class MyDynamicRegistrar implements ImportBeanDefinitionRegistrar {
@Override
public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) {
// åŠ¨æ€åˆ›å»ºBeanå®šä¹‰
RootBeanDefinition beanDefinition = new RootBeanDefinition(MyService.class);
// æ ¹æ®æ¡ä»¶åˆ¤æ–­ï¼ŒåŠ¨æ€æ³¨å†ŒBean
if (someCondition) {
registry.registerBeanDefinition(&amp;#34;myService&amp;#34;, beanDefinition);
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæ¡†æ¶é›†æˆï¼ˆå¦‚ MyBatis çš„ Mapper æ¥å£æ‰«æï¼‰ã€æ ¹æ®é…ç½®ä¿¡æ¯åŠ¨æ€å¼€å¯æŸäº›åŠŸèƒ½æ¨¡å—ã€‚&lt;/p&gt;
&lt;h4 id="2-ä¸"&gt;&lt;strong&gt;2. ä¸ &lt;code&gt;BeanDefinitionRegistryPostProcessor&lt;/code&gt;é›†æˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ Spring å®¹å™¨æ‰©å±•çš„ä¸€ä¸ªå…³é”®æ¥å£ã€‚å®ƒå…è®¸åœ¨&lt;strong&gt;æ‰€æœ‰å¸¸è§„çš„ Bean å®šä¹‰è¢«åŠ è½½ä¹‹åã€ä½†å°šæœªå®ä¾‹åŒ–ä»»ä½• Bean ä¹‹å‰&lt;/strong&gt;ï¼Œå¯¹ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;è¿›è¡Œä¿®æ”¹ã€‚ä½ å¯ä»¥æ·»åŠ ã€ç§»é™¤ç”šè‡³ä¿®æ”¹å·²æœ‰çš„ Bean å®šä¹‰ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Component
public class MyBeanDefinitionRegistryPostProcessor implements BeanDefinitionRegistryPostProcessor {
@Override
public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {
// æ­¤æ—¶å¯ä»¥å¹²é¢„BeanDefinitionRegistry
if (registry.containsBeanDefinition(&amp;#34;someBean&amp;#34;)) {
// ä¾‹å¦‚ï¼Œç§»é™¤æŸä¸ªBeanå®šä¹‰
// registry.removeBeanDefinition(&amp;#34;someBean&amp;#34;);
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šè‡ªåŠ¨åŒ–é…ç½®ï¼ˆSpring Boot çš„è‡ªåŠ¨é…ç½®æ ¸å¿ƒæœºåˆ¶ï¼‰ã€æ›¿æ¢æ‰å®¹å™¨ä¸­æŸä¸ªé»˜è®¤çš„ Bean å®šä¹‰ã€‚&lt;/p&gt;
&lt;h3 id="-ä½¿ç”¨æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;ï¼šè™½ç„¶ &lt;code&gt;DefaultListableBeanFactory&lt;/code&gt;åœ¨å…³é”®æ“ä½œä¸Šä½¿ç”¨äº†å¹¶å‘å®¹å™¨å’ŒåŒæ­¥å—ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç›´æ¥æ“ä½œ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;ä»éœ€è°¨æ…ï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨å¯åŠ¨é˜¶æ®µ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ç›´æ¥æ“ä½œ&lt;/strong&gt;ï¼šå¯¹äºå¤§å¤šæ•°å¸¸è§„åº”ç”¨å¼€å‘ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ Spring æä¾›çš„é«˜çº§æŠ½è±¡ï¼ˆå¦‚ &lt;code&gt;@Component&lt;/code&gt;, &lt;code&gt;@Bean&lt;/code&gt;, &lt;code&gt;@Configuration&lt;/code&gt;ï¼‰æ¥å£°æ˜ Beanï¼Œè€Œéç›´æ¥æ“ä½œ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;ã€‚ç›´æ¥æ“ä½œæ˜¯åº•å±‚ APIï¼Œä½¿ç”¨ä¸å½“å¯èƒ½å¯¼è‡´å®¹å™¨çŠ¶æ€æ··ä¹± ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šBean çš„æ³¨å†Œï¼ˆ&lt;code&gt;BeanDefinition&lt;/code&gt;é˜¶æ®µï¼‰å’Œå®ä¾‹åŒ–ï¼ˆè·å– Bean å¯¹è±¡é˜¶æ®µï¼‰æ˜¯åˆ†å¼€çš„ã€‚&lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;åªè´Ÿè´£å‰åŠéƒ¨åˆ†ï¼ŒBean çš„åˆ›å»ºå’Œä¾èµ–æ³¨å…¥ç”± &lt;code&gt;BeanFactory&lt;/code&gt;å®Œæˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;æ˜¯ Spring IoC å®¹å™¨åº•å±‚è´Ÿè´£ç®¡ç† Bean å®šä¹‰çš„æ ¸å¿ƒ Registryã€‚å®ƒé€šè¿‡é«˜æ•ˆçš„ Map ç»“æ„å­˜å‚¨ Bean çš„å…ƒæ•°æ®ï¼Œæä¾›äº†å®Œæ•´çš„å¢åˆ æ”¹æŸ¥ APIï¼Œå¹¶æ”¯æŒé€šè¿‡ &lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;å’Œ &lt;code&gt;BeanDefinitionRegistryPostProcessor&lt;/code&gt;ç­‰æœºåˆ¶å®ç°å¼ºå¤§çš„åŠ¨æ€æ‰©å±•èƒ½åŠ›ã€‚ç†è§£ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;ï¼Œæœ‰åŠ©äºä½ æ›´æ·±å…¥åœ°æŒæ¡ Spring å®¹å™¨çš„å·¥ä½œåŸç†å’Œæ‰©å±•æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»ç†è§£ &lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;ï¼&lt;/p&gt;
&lt;h2 id="autoconfiguration"&gt;@AutoConfiguration
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼ŒSpring Boot ä¸­ç¡®å®å­˜åœ¨ &lt;code&gt;@AutoConfiguration&lt;/code&gt;æ³¨è§£ã€‚å®ƒæ˜¯ Spring Boot &lt;strong&gt;2.7 ç‰ˆæœ¬&lt;/strong&gt;å¼•å…¥çš„ä¸€ä¸ªæ ¸å¿ƒæ³¨è§£ï¼Œä¸“é—¨ç”¨äºæ ‡è®°&lt;strong&gt;è‡ªåŠ¨é…ç½®ç±»&lt;/strong&gt;ï¼Œæ˜¯ Spring Boot è‡ªåŠ¨åŒ–é…ç½®æœºåˆ¶çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œï¼Œä¸‹è¡¨å¯¹æ¯”äº† &lt;code&gt;@AutoConfiguration&lt;/code&gt;ä¸æ ‡å‡† &lt;code&gt;@Configuration&lt;/code&gt;æ³¨è§£çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@AutoConfiguration&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;@Configuration&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼•å…¥ç‰ˆæœ¬/èƒŒæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Spring Boot 2.7+ï¼Œä¸“ä¸ºè‡ªåŠ¨é…ç½®è®¾è®¡&lt;/td&gt;
&lt;td&gt;Spring Frameworkï¼Œç”¨äºé€šç”¨é…ç½®ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨é…ç½®&lt;/strong&gt;ï¼šä¸ºç¬¬ä¸‰æ–¹åº“æˆ–é€šç”¨åŠŸèƒ½æä¾›&amp;quot;å¼€ç®±å³ç”¨&amp;quot;çš„é»˜è®¤é…ç½®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‰‹åŠ¨é…ç½®&lt;/strong&gt;ï¼šç”±å¼€å‘è€…æ˜¾å¼å®šä¹‰å’Œæ§åˆ¶çš„é…ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ è½½æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;code&gt;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports&lt;/code&gt;æ–‡ä»¶æ³¨å†Œï¼Œç”± Spring Boot è‡ªåŠ¨å‘ç°å’ŒåŠ è½½&lt;/td&gt;
&lt;td&gt;é€šè¿‡ç»„ä»¶æ‰«æï¼ˆå¦‚&lt;code&gt;@ComponentScan&lt;/code&gt;ï¼‰æˆ–ä½¿ç”¨&lt;code&gt;@Import&lt;/code&gt;æ³¨è§£æ˜¾å¼å¯¼å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¡ä»¶åŒ–æ§åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºçƒˆä¾èµ–&lt;/strong&gt;æ¡ä»¶æ³¨è§£ï¼ˆå¦‚&lt;code&gt;@ConditionalOnClass&lt;/code&gt;ï¼‰ï¼Œå®ç°&amp;quot;æŒ‰éœ€åŠ è½½&amp;quot;&lt;/td&gt;
&lt;td&gt;å¯ä»¥ç»“åˆæ¡ä»¶æ³¨è§£ä½¿ç”¨ï¼Œä½†éå¿…é¡»ï¼Œå¸¸ç”¨äºç¡®å®šæ€§é…ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼€å‘ &lt;strong&gt;Starter&lt;/strong&gt;ã€é›†æˆç¬¬ä¸‰æ–¹åº“ã€æä¾›é€šç”¨æ¨¡å—çš„é»˜è®¤é…ç½®&lt;/td&gt;
&lt;td&gt;å®šä¹‰åº”ç”¨ç‰¹å®šçš„ä¸šåŠ¡ Beanã€è¿›è¡Œå®šåˆ¶åŒ–é…ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒä»·å€¼ä¸å·¥ä½œåŸç†"&gt;ğŸ’¡ æ ¸å¿ƒä»·å€¼ä¸å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@AutoConfiguration&lt;/code&gt;æ³¨è§£çš„æ ¸å¿ƒä»·å€¼åœ¨äºå®ç°äº† Spring Boot &lt;strong&gt;&amp;ldquo;çº¦å®šä¼˜äºé…ç½®&amp;rdquo;&lt;/strong&gt; çš„ç†å¿µã€‚å®ƒå…è®¸æ¡†æ¶æˆ–ç¬¬ä¸‰æ–¹åº“çš„å¼€å‘è€…é¢„å…ˆå®šä¹‰å¥½ä¸€å¥—é…ç½®é€»è¾‘ï¼Œå½“åº”ç”¨ç¨‹åºå¼•å…¥äº†ç‰¹å®šçš„ä¾èµ–ï¼ˆStarterï¼‰æ—¶ï¼ŒSpring Boot å°±èƒ½è‡ªåŠ¨æ¿€æ´»è¿™äº›é…ç½®ï¼Œä»è€Œå¤§å¹…å‡å°‘å¼€å‘è€…çš„æ‰‹åŠ¨é…ç½®å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;å…¶å·¥ä½œæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å£°æ˜é…ç½®ç±»&lt;/strong&gt;ï¼šå¼€å‘è€…ä½¿ç”¨ &lt;code&gt;@AutoConfiguration&lt;/code&gt;æ³¨è§£æ ‡è®°ä¸€ä¸ªç±»ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨ &lt;code&gt;@Bean&lt;/code&gt;ç­‰æ–¹æ³•å®šä¹‰éœ€è¦è‡ªåŠ¨é…ç½®çš„ç»„ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨å†Œé…ç½®ç±»&lt;/strong&gt;ï¼šåœ¨è¯¥ç»„ä»¶ Jar åŒ…çš„ &lt;code&gt;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports&lt;/code&gt;æ–‡ä»¶ä¸­ï¼Œå†™å…¥è¯¥è‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šåã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŠ è½½&lt;/strong&gt;ï¼šSpring Boot åº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šæ‰«æç±»è·¯å¾„ä¸‹æ‰€æœ‰ Jar åŒ…ä¸­çš„ &lt;code&gt;AutoConfiguration.imports&lt;/code&gt;æ–‡ä»¶ï¼Œå¹¶åŠ è½½å…¶ä¸­å£°æ˜çš„è‡ªåŠ¨é…ç½®ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ä»¶åŒ–ç­›é€‰&lt;/strong&gt;ï¼šåœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼ŒSpring Boot ä¼šæ£€æŸ¥è‡ªåŠ¨é…ç½®ç±»ä¸Šçš„&lt;strong&gt;æ¡ä»¶æ³¨è§£&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;@ConditionalOnClass&lt;/code&gt;ï¼‰ï¼Œåªæœ‰æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„é…ç½®æ‰ä¼šæœ€ç»ˆç”Ÿæ•ˆï¼Œä»è€Œå°† Bean æ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ä½¿ç”¨-autoconfiguration"&gt;ğŸ› ï¸ å¦‚ä½•ä½¿ç”¨ &lt;code&gt;@AutoConfiguration&lt;/code&gt;
&lt;/h3&gt;&lt;h4 id="1-å®šä¹‰è‡ªåŠ¨é…ç½®ç±»"&gt;1. å®šä¹‰è‡ªåŠ¨é…ç½®ç±»
&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„è‡ªåŠ¨é…ç½®ç±»å¦‚ä¸‹æ‰€ç¤ºï¼Œå®ƒå¤§é‡ä½¿ç”¨äº†æ¡ä»¶æ³¨è§£æ¥ç¡®ä¿åªåœ¨åˆé€‚çš„ç¯å¢ƒä¸‹ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å¼•å…¥ç‰ˆæœ¬ï¼šSpring Boot 2.7+
package com.example.mystarter;
import org.springframework.boot.autoconfigure.AutoConfiguration;
import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.context.annotation.Bean;
@AutoConfiguration // æ ‡è®°æ­¤ä¸ºè‡ªåŠ¨é…ç½®ç±»
@ConditionalOnClass(MyService.class) // æ¡ä»¶1ï¼šç±»è·¯å¾„ä¸‹å­˜åœ¨ MyService ç±»
@ConditionalOnProperty(prefix = &amp;#34;my.starter&amp;#34;, name = &amp;#34;enabled&amp;#34;, havingValue = &amp;#34;true&amp;#34;, matchIfMissing = true) // æ¡ä»¶2ï¼šé…ç½®å±æ€§åŒ¹é…
public class MyStarterAutoConfiguration {
@Bean
@ConditionalOnMissingBean // å…³é”®æ³¨è§£ï¼šåªæœ‰å½“ç”¨æˆ·æ²¡æœ‰è‡ªå·±å®šä¹‰ MyService ç±»å‹çš„ Bean æ—¶ï¼Œæ‰æ³¨å…¥æ­¤é»˜è®¤ Bean
public MyService myService() {
return new DefaultMyService();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-æ³¨å†Œé…ç½®ç±»"&gt;2. æ³¨å†Œé…ç½®ç±»
&lt;/h4&gt;&lt;p&gt;åœ¨é¡¹ç›®çš„ &lt;code&gt;src/main/resources&lt;/code&gt;ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶è·¯å¾„&lt;/strong&gt;ï¼š&lt;code&gt;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶å†…å®¹&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;com.example.mystarter.MyStarterAutoConfiguration
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®Œæˆä»¥ä¸Šä¸¤æ­¥å¹¶æ‰“åŒ…åï¼Œå…¶ä»–é¡¹ç›®åªéœ€å¼•å…¥è¿™ä¸ª Jar åŒ…ä¾èµ–ï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨å®Œæˆ &lt;code&gt;MyService&lt;/code&gt;Bean çš„é…ç½®ï¼ˆå¦‚æœæ»¡è¶³æ¡ä»¶çš„è¯ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-6"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ä¸ &lt;code&gt;@ComponentScan&lt;/code&gt;å†²çª&lt;/strong&gt;ï¼šè‡ªåŠ¨é…ç½®ç±»&lt;strong&gt;ä¸åº”è¯¥&lt;/strong&gt;è¢« &lt;code&gt;@ComponentScan&lt;/code&gt;æ‰«æåˆ°ã€‚æœ€å¥½å°†å®ƒä»¬æ”¾åœ¨ç‹¬ç«‹çš„åŒ…ä¸­ï¼Œä¸ä¸ä¸»åº”ç”¨çš„æ ¹åŒ…é‡å ï¼Œä»¥é˜²æ­¢è¢«æ„å¤–æ‰«æå’Œé‡å¤åŠ è½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;çš„é‡è¦æ€§&lt;/strong&gt;ï¼šåœ¨è‡ªåŠ¨é…ç½®ç±»ä¸­å®šä¹‰ Bean æ—¶ï¼Œé€šå¸¸å»ºè®®åŠ ä¸Š &lt;code&gt;@ConditionalOnMissingBean&lt;/code&gt;æ³¨è§£ã€‚è¿™ç¡®ä¿äº†å¦‚æœåº”ç”¨å¼€å‘è€…å·²ç»è‡ªå®šä¹‰äº†è¯¥ç±»å‹çš„ Beanï¼Œåˆ™è‡ªåŠ¨é…ç½®æä¾›çš„é»˜è®¤ Bean ä¸ä¼šç”Ÿæ•ˆï¼Œä»è€Œ&lt;strong&gt;é¿å…å†²çªå¹¶å°Šé‡ç”¨æˆ·çš„è‡ªå®šä¹‰é…ç½®&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ è½½é¡ºåºæ§åˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;@AutoConfiguration&lt;/code&gt;æ³¨è§£æä¾›äº† &lt;code&gt;before&lt;/code&gt;, &lt;code&gt;after&lt;/code&gt;, &lt;code&gt;beforeName&lt;/code&gt;, &lt;code&gt;afterName&lt;/code&gt;ç­‰å±æ€§ï¼Œå¯ä»¥ç”¨æ¥ç²¾ç»†æ§åˆ¶å¤šä¸ªè‡ªåŠ¨é…ç½®ç±»ä¹‹é—´çš„åŠ è½½é¡ºåºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;@AutoConfiguration&lt;/code&gt;æ³¨è§£æ˜¯ Spring Boot è‡ªåŠ¨åŒ–é…ç½®èƒ½åŠ›çš„æ ¸å¿ƒä½“ç°ã€‚å®ƒé€šè¿‡å£°æ˜å¼çš„æ³¨è§£å’Œçº¦å®šå¥½çš„æ–‡ä»¶æ³¨å†Œæœºåˆ¶ï¼Œè®©æ¡†æ¶å’Œåº“çš„é›†æˆå˜å¾—å¼‚å¸¸ç®€å•å’Œé«˜æ•ˆã€‚ç†è§£å¹¶æ­£ç¡®ä½¿ç”¨å®ƒï¼Œæ˜¯å¼€å‘å’Œå®šåˆ¶é«˜è´¨é‡ Spring Boot Starter çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ &lt;code&gt;@AutoConfiguration&lt;/code&gt;æ³¨è§£ï¼&lt;/p&gt;
&lt;h2 id="request_new-å¹¶å‘é£é™©"&gt;REQUEST_NEW å¹¶å‘é£é™©
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡ä¼ æ’­è¡Œä¸ºåœ¨å¹¶å‘ç¯å¢ƒä¸‹ç¡®å®ä¼šå¼•å…¥ä¸€äº›ç‰¹å®šçš„é£é™©ï¼Œç†è§£è¿™äº›é£é™©å¯¹äºè®¾è®¡é«˜å¹¶å‘ã€é«˜å¯é æ€§çš„ç³»ç»Ÿè‡³å…³é‡è¦ã€‚ä¸‹é¢è¿™ä¸ªæµç¨‹å›¾æ¦‚æ‹¬äº†ä¸»è¦çš„å¹¶å‘é£é™©åœºæ™¯åŠå…¶æˆå› ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å¹¶å‘è°ƒç”¨REQUIRES_NEWæ–¹æ³•] --&amp;gt; B{ä¸»è¦é£é™©åœºæ™¯}
B --&amp;gt; C[æ•°æ®ä¸ä¸€è‡´é£é™©]
B --&amp;gt; D[é”ç«äº‰ä¸æ­»é”é£é™©]
B --&amp;gt; E[æ€§èƒ½ä¸èµ„æºè€—å°½é£é™©]
C --&amp;gt; C1[å¤–å±‚äº‹åŠ¡å›æ»š&amp;lt;br&amp;gt;å†…å±‚äº‹åŠ¡æäº¤]
C1 --&amp;gt; C2[ä¸šåŠ¡æ•°æ®éƒ¨åˆ†æäº¤]
D --&amp;gt; D1[å¤–å±‚äº‹åŠ¡æŒæœ‰é”]
D1 --&amp;gt; D2[REQUIRES_NEWäº‹åŠ¡&amp;lt;br&amp;gt;è¯·æ±‚ç›¸åŒèµ„æºé”]
D2 --&amp;gt; D3[ç›¸äº’ç­‰å¾…å¯¼è‡´æ­»é”]
E --&amp;gt; E1[é¢‘ç¹åˆ›å»ºæ–°äº‹åŠ¡]
E1 --&amp;gt; E2[æ•°æ®åº“è¿æ¥å ç”¨å¢é•¿]
E2 --&amp;gt; E3[è¿æ¥æ± è€—å°½é£é™©]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¦ç»†å‰–æè¿™äº›é£é™©çš„å…·ä½“è¡¨ç°å’Œæ ¹æºã€‚&lt;/p&gt;
&lt;h3 id="-æ•°æ®ä¸ä¸€è‡´é£é™©"&gt;ğŸ’¥ æ•°æ®ä¸ä¸€è‡´é£é™©
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;æœ€æ ¸å¿ƒçš„å¹¶å‘é£é™©ï¼Œä¸»è¦ä½“ç°åœ¨äº‹åŠ¡ç»“æœçš„éƒ¨åˆ†æäº¤ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤–å±‚å›æ»šï¼Œå†…å±‚æäº¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æ–¹æ³•Aï¼ˆ&lt;code&gt;PROPAGATION_REQUIRED&lt;/code&gt;ï¼‰è°ƒç”¨æ–¹æ³•Bï¼ˆ&lt;code&gt;PROPAGATION_REQUIRES_NEW&lt;/code&gt;ï¼‰æ—¶ï¼Œå¦‚æœæ–¹æ³•Bæ‰§è¡ŒæˆåŠŸå¹¶æäº¤ï¼Œä½†æ–¹æ³•Aåœ¨åç»­æ“ä½œä¸­å¤±è´¥å¹¶å›æ»šï¼Œæ–¹æ³•Bå·²æäº¤çš„æ“ä½œå°†æ— æ³•æ’¤å›ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œä¸‹å•æ“ä½œï¼ˆæ–¹æ³•Aï¼‰ä¸­è®°å½•äº†å®¡è®¡æ—¥å¿—ï¼ˆæ–¹æ³•Bï¼‰ï¼Œå³ä½¿è®¢å•æœ€ç»ˆå¤±è´¥å›æ»šï¼Œå®¡è®¡æ—¥å¿—å´å·²æ°¸ä¹…ä¿å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éš”ç¦»çº§åˆ«ä¸â€œå¹»è¯»â€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚æœ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸å½“ï¼ˆå¦‚ &lt;code&gt;READ_COMMITTED&lt;/code&gt;ï¼‰ï¼Œè€Œå¤–å±‚äº‹åŠ¡éš”ç¦»çº§åˆ«æ›´é«˜ï¼ˆå¦‚ &lt;code&gt;REPEATABLE_READ&lt;/code&gt;ï¼‰ï¼Œå¯èƒ½äº§ç”Ÿå¹»è¯»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼ˆ&lt;code&gt;REQUIRES_NEW&lt;/code&gt;ï¼‰æ’å…¥æ•°æ®å¹¶æäº¤åï¼Œä¸€ä¸ªå¹¶å‘çš„å¤–å±‚äº‹åŠ¡å¯èƒ½åœ¨ä¸¤æ¬¡æŸ¥è¯¢é—´å‘ç°æ•°æ®è¡Œæ•°å˜åŒ–ï¼Œå³ä½¿å¤–å±‚äº‹åŠ¡å°šæœªç»“æŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é”ç«äº‰ä¸æ­»é”é£é™©"&gt;ğŸ”’ é”ç«äº‰ä¸æ­»é”é£é™©
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REQUIRES_NEW&lt;/code&gt;ä¼šåˆ›å»ºç‹¬ç«‹çš„æ–°äº‹åŠ¡ï¼Œè¿™æ„å‘³ç€å®ƒå¯èƒ½ä»¥ç‹¬ç«‹çš„æ–¹å¼è·å–å’ŒæŒæœ‰æ•°æ®åº“é”ï¼Œä»è€Œå¼•å‘å¤æ‚çš„é”é—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­»é”ï¼ˆDeadlockï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„é”é—®é¢˜ã€‚è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡A&lt;/strong&gt;ï¼ˆå¤–å±‚äº‹åŠ¡ï¼‰é”å®šäº†èµ„æºXã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡B&lt;/strong&gt;ï¼ˆå¦ä¸€ä¸ª &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡ï¼‰éœ€è¦èµ„æºXï¼Œä½†è¢«Aé˜»å¡ï¼ŒåŒæ—¶å®ƒé”å®šäº†èµ„æºYã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡A&lt;/strong&gt;åç»­éœ€è¦èµ„æºYï¼Œä½†è¢«Bé˜»å¡ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œäº‹åŠ¡Aå’Œäº‹åŠ¡Bç›¸äº’ç­‰å¾…ï¼Œå½¢æˆæ­»é”ã€‚ç”±äº &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡ç‹¬ç«‹è¿è¡Œï¼Œæ•°æ®åº“æ— æ³•è‡ªåŠ¨åŒ–è§£è¿™ç§è·¨äº‹åŠ¡çš„å¾ªç¯ä¾èµ–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”ç²’åº¦æ‰©å¤§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡éœ€è¦ä¿®æ”¹å¤§é‡æ•°æ®ï¼Œå®ƒä¼šé•¿æ—¶é—´æŒæœ‰è¿™äº›æ•°æ®ä¸Šçš„æ’ä»–é”ã€‚è¿™å¯èƒ½å¯¼è‡´å…¶ä»–éœ€è¦è®¿é—®ç›¸åŒæ•°æ®çš„äº‹åŠ¡è¢«é˜»å¡ï¼Œé™ä½ç³»ç»Ÿæ•´ä½“ååé‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€§èƒ½ä¸èµ„æºæ¶ˆè€—"&gt;â±ï¸ æ€§èƒ½ä¸èµ„æºæ¶ˆè€—
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REQUIRES_NEW&lt;/code&gt;çš„è¡Œä¸ºæ¨¡å¼å†³å®šäº†å®ƒåœ¨é«˜å¹¶å‘ä¸‹å¯èƒ½å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½å¼€é”€ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¢‘ç¹äº‹åŠ¡åˆ›å»º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç‰©ç†äº‹åŠ¡ï¼Œè¿™æ¶‰åŠä»æ•°æ®åº“è¿æ¥æ± è·å–è¿æ¥ã€è®¾ç½®äº‹åŠ¡çŠ¶æ€ã€ç®¡ç†ä¿å­˜ç‚¹ç­‰æ“ä½œã€‚åœ¨é«˜é¢‘è°ƒç”¨åœºæ™¯ä¸‹ï¼Œè¿™ä¼šæ¶ˆè€—å¤§é‡CPUå’Œå†…å­˜èµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®åº“è¿æ¥å‹åŠ›&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªæ–°äº‹åŠ¡éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥ã€‚åœ¨å¹¶å‘é«˜çš„ç³»ç»Ÿä¸­ï¼Œå¤§é‡ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡å¯èƒ½å¿«é€Ÿè€—å°½è¿æ¥æ± ï¼Œå¯¼è‡´å…¶ä»–è¯·æ±‚æ— æ³•è·å–è¿æ¥è€Œè¶…æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸åŒæ­¥é”synchronizedçš„é”™è¯¯ç»“åˆ"&gt;ğŸ”„ ä¸åŒæ­¥é”ï¼ˆsynchronizedï¼‰çš„é”™è¯¯ç»“åˆ
&lt;/h3&gt;&lt;p&gt;å½“å¼€å‘è€…è¯•å›¾ç”¨ &lt;code&gt;synchronized&lt;/code&gt;å…³é”®å­—ä¿è¯æ–¹æ³•çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ—¶æ–¹æ³•å†…éƒ¨åˆä½¿ç”¨äº† &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡æ—¶ï¼Œä¼šå¼•å‘ä¸€ä¸ªå…¸å‹é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é£é™©åœºæ™¯&lt;/strong&gt;ï¼šå°†åŒæ­¥é”æ”¾åœ¨äº‹åŠ¡å†…éƒ¨ã€‚å‡è®¾æ–¹æ³•AåŠ é”ï¼Œå¹¶åœ¨é”å†…è°ƒç”¨ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;çš„æ–¹æ³•Bã€‚
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹Aè¿›å…¥é”ï¼Œåˆ›å»ºæ–°äº‹åŠ¡T1ï¼Œä½†æ•°æ®ä¿®æ”¹å°šæœªæäº¤ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹Bè¿›å…¥é”ï¼Œåˆ›å»ºå¦ä¸€ä¸ªæ–°äº‹åŠ¡T2ã€‚ç”±äºT1è¿˜æœªæäº¤ï¼ŒT2è¯»å–åˆ°çš„å¯èƒ½æ˜¯æ—§æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­£ç¡®åšæ³•&lt;/strong&gt;ï¼š&lt;strong&gt;é”åº”ç½®äºäº‹åŠ¡å¤–å±‚&lt;/strong&gt;ã€‚å…ˆé€šè¿‡é”ä¿è¯ä¸²è¡ŒåŒ–è®¿é—®ï¼Œå†è¿›å…¥äº‹åŠ¡è¾¹ç•Œã€‚è¿™æ ·èƒ½ç¡®ä¿ä¸€ä¸ªäº‹åŠ¡å®Œå…¨æ‰§è¡Œå¹¶æäº¤åï¼Œä¸‹ä¸€ä¸ªäº‹åŠ¡æ‰èƒ½å¼€å§‹ï¼Œä»è€Œè¯»åˆ°æœ€æ–°æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœ€ä½³å®è·µä¸æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ’¡ æœ€ä½³å®è·µä¸æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;äº†è§£äº†é£é™©åï¼Œå…³é”®åœ¨äºå¦‚ä½•è§„é¿æˆ–å®‰å…¨ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®è·µ/æ–¹æ¡ˆ&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®¡æ…è¯„ä¼°éœ€æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¦–å…ˆé—®è‡ªå·±ï¼šè¿™ä¸ªæ“ä½œæ˜¯å¦&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ç‹¬ç«‹äºä¸»äº‹åŠ¡æäº¤ï¼Ÿ&lt;/td&gt;
&lt;td&gt;å®¡è®¡æ—¥å¿—ã€é€šçŸ¥æ¶ˆæ¯ç­‰å³ä½¿ä¸»ä¸šåŠ¡å¤±è´¥ä¹Ÿéœ€è®°å½•çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒæ•´éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®ä¸šåŠ¡ä¸€è‡´æ€§è¦æ±‚ï¼Œä¸º &lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡è®¾ç½®åˆé€‚çš„éš”ç¦»çº§åˆ«ï¼ˆå¦‚ &lt;code&gt;REPEATABLE_READ&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦é˜²æ­¢å¹»è¯»ï¼Œä¸”æ•°æ®åº“æ”¯æŒï¼ˆå¦‚MySQL InnoDBï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½¿ç”¨ç¼–ç¨‹å¼äº‹åŠ¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨ &lt;code&gt;TransactionTemplate&lt;/code&gt;ç²¾ç¡®æ§åˆ¶äº‹åŠ¡è¾¹ç•Œï¼Œé¿å…å£°æ˜å¼äº‹åŠ¡çš„éšæ€§é™·é˜±ï¼ˆå¦‚è‡ªè°ƒç”¨å¤±æ•ˆï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦ç»†ç²’åº¦äº‹åŠ¡æ§åˆ¶æˆ–ä¸é”å¤æ‚äº¤äº’çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è€ƒè™‘ &lt;code&gt;NESTED&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæ•°æ®åº“æ”¯æŒï¼Œ&lt;code&gt;PROPAGATION_NESTED&lt;/code&gt;ä½¿ç”¨ä¿å­˜ç‚¹ï¼ˆSavepointï¼‰ã€‚å†…å±‚æ“ä½œå¯ç‹¬ç«‹å›æ»šï¼Œä½†å¤–å±‚å›æ»šä¼šè§¦å‘å†…å±‚å›æ»šï¼Œèƒ½æ›´å¥½åœ°ä¿è¯åŸå­æ€§ã€‚&lt;/td&gt;
&lt;td&gt;å¸Œæœ›å†…å±‚æ“ä½œå¯å›æ»šï¼Œä½†å¤–å±‚å¤±è´¥æ—¶å…¨éƒ¨å›æ»šçš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REQUIRES_NEW&lt;/code&gt;æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚å®ƒé€šè¿‡åˆ›å»ºç‹¬ç«‹äº‹åŠ¡æä¾›äº†çµæ´»æ€§ï¼Œä½†ä¹Ÿå¼•å…¥äº†æ•°æ®ä¸ä¸€è‡´ã€æ­»é”å’Œæ€§èƒ½æŸè€—ç­‰å¹¶å‘é£é™©ã€‚&lt;strong&gt;æ ¸å¿ƒä½¿ç”¨åŸåˆ™æ˜¯ï¼šé™¤éä½ èƒ½æ¸…æ™°ç†è§£å¹¶æ¥å—å…¶å¸¦æ¥çš„é£é™©ï¼Œå¦åˆ™åº”è°¨æ…ä½¿ç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è®¾è®¡å’Œç¼–ç æ—¶ï¼ŒåŠ¡å¿…æ˜ç¡®äº‹åŠ¡è¾¹ç•Œï¼Œé¿å…ä¸å¿…è¦çš„é•¿äº‹åŠ¡å’Œé”ç«äº‰ï¼Œå¹¶ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ä¿å­˜ç‚¹ç­‰æ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆæ¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°é©¾é©­ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="requires_new"&gt;REQUIRES_NEW
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;REQUIRES_NEW&lt;/code&gt;äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯&lt;strong&gt;åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„äº‹åŠ¡&lt;/strong&gt;ï¼Œå¹¶æŒ‚èµ·å½“å‰å­˜åœ¨çš„äº‹åŠ¡ã€‚è¿™ä¸ªæ–°äº‹åŠ¡æ‹¥æœ‰ç‹¬ç«‹çš„æäº¤å’Œå›æ»šæœºåˆ¶ï¼Œå…¶æˆè´¥ä¸ä¼šå½±å“å¤–å±‚äº‹åŠ¡ï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹è¡¨æ ¼æ±‡æ€»äº†å®ƒæœ€å…¸å‹çš„é€‚ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒä»·å€¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒä»·å€¼&lt;/th&gt;
&lt;th&gt;å…·ä½“æ¡ˆä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ“ä½œç‹¬ç«‹æŒä¹…åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®ä¿å…³é”®è®°å½•ï¼ˆå¦‚æ—¥å¿—ã€å®¡è®¡çº¿ç´¢ï¼‰å³ä½¿ä¸»ä¸šåŠ¡å¤±è´¥ä¹Ÿèƒ½ä¿ç•™ã€‚&lt;/td&gt;
&lt;td&gt;è®¢å•å¤±è´¥ï¼Œä½†æ“ä½œæ—¥å¿—å¿…é¡»è®°å½•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨å¤–éƒ¨ç³»ç»Ÿæˆ–æœåŠ¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¿å…ç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨å»¶è¿Ÿæˆ–å¤±è´¥å¯¼è‡´ä¸»äº‹åŠ¡é•¿æ—¶é—´é”å®šèµ„æºã€‚&lt;/td&gt;
&lt;td&gt;è°ƒç”¨æ”¯ä»˜ç½‘å…³ã€å‘é€çŸ­ä¿¡/é‚®ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦ç‹¬ç«‹é‡è¯•çš„è¡¥å¿æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»äº‹åŠ¡å¤±è´¥åï¼Œå·²ç‹¬ç«‹æäº¤çš„å­äº‹åŠ¡å¯ä½œä¸ºè¡¥å¿æ“ä½œçš„ä¾æ®ã€‚&lt;/td&gt;
&lt;td&gt;è®¢å•å–æ¶ˆåï¼ŒåŸºäºå·²ç‹¬ç«‹æäº¤çš„è®°å½•å‘èµ·é€€æ¬¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸å…¶ä»–ä¼ æ’­è¡Œä¸ºçš„åŒºåˆ«"&gt;ğŸ’¡ ä¸å…¶ä»–ä¼ æ’­è¡Œä¸ºçš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´å‡†ç¡®åœ°ä½¿ç”¨ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;ï¼Œç†è§£å®ƒå’Œå…¶ä»–ç›¸ä¼¼ä¼ æ’­è¡Œä¸ºçš„åŒºåˆ«å¾ˆé‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;REQUIRED&lt;/code&gt;çš„åŒºåˆ«&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚&lt;code&gt;REQUIRED&lt;/code&gt;æ˜¯&lt;strong&gt;åŠ å…¥&lt;/strong&gt;å½“å‰äº‹åŠ¡ï¼Œæ‰€æœ‰æ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡å•å…ƒé‡Œï¼Œä¸€è£ä¿±è£ï¼Œä¸€æŸä¿±æŸã€‚è€Œ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;æ˜¯&lt;strong&gt;åˆ›å»º&lt;/strong&gt;æ–°äº‹åŠ¡ï¼Œä¸¤è€…å®Œå…¨ç‹¬ç«‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;NESTED&lt;/code&gt;çš„åŒºåˆ«&lt;/strong&gt;ï¼š&lt;code&gt;NESTED&lt;/code&gt;æ˜¯ä¸€ç§åµŒå¥—äº‹åŠ¡ï¼ŒåŸºäºæ•°æ®åº“çš„ä¿å­˜ç‚¹ï¼ˆSavepointï¼‰å®ç°ã€‚å®ƒçš„å…³é”®ç‰¹æ€§æ˜¯&lt;strong&gt;éƒ¨åˆ†å›æ»š&lt;/strong&gt;ï¼šå¦‚æœåµŒå¥—äº‹åŠ¡å¤±è´¥ï¼Œå¯ä»¥å›æ»šåˆ°ä¿å­˜ç‚¹è€Œä¸å½±å“å¤–å±‚äº‹åŠ¡ï¼›ä½†æ˜¯ï¼Œå¦‚æœå¤–å±‚äº‹åŠ¡å›æ»šï¼Œåˆ™åµŒå¥—äº‹åŠ¡ä¹Ÿ&lt;strong&gt;å¿…ç„¶å›æ»š&lt;/strong&gt;ã€‚è€Œ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;å³ä½¿åœ¨å¤–éƒ¨äº‹åŠ¡å›æ»šæ—¶ï¼Œå†…éƒ¨äº‹åŠ¡åªè¦æäº¤äº†å°±ä¸€å®šä¼šæŒä¹…åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ éœ€è¦å†…å±‚æ“ä½œçš„æäº¤ç»“æœ&lt;strong&gt;å®Œå…¨ä¸ä¾èµ–äº&lt;/strong&gt;å¤–å±‚äº‹åŠ¡çš„æœ€ç»ˆç»“æœï¼Œå°±ç”¨ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;ï¼›å¦‚æœä½ å¸Œæœ›å†…å±‚æ“ä½œå¯ä»¥å•ç‹¬å›æ»šï¼Œä½†å¤–å±‚å¤±è´¥æ—¶å†…å±‚ä¹Ÿåº”å›æ»šä»¥ä¿æŒåŸå­æ€§ï¼Œåˆ™ç”¨ &lt;code&gt;NESTED&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸ä»£ä»·"&gt;âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸ä»£ä»·
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REQUIRES_NEW&lt;/code&gt;è™½ç„¶å¼ºå¤§ï¼Œä½†å¹¶éé“¶å¼¹ï¼Œä½¿ç”¨æ—¶éœ€æ³¨æ„ä»¥ä¸‹æˆæœ¬å’Œé£é™©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„äº‹åŠ¡ï¼Œæ„å‘³ç€éœ€è¦ä»æ•°æ®åº“è¿æ¥æ± è·å–æ–°çš„è¿æ¥ï¼Œæ¶‰åŠäº‹åŠ¡ç®¡ç†å™¨çš„é¢å¤–å·¥ä½œã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œè¿™ä¼šå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æŸè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºè€—å°½é£é™©&lt;/strong&gt;ï¼šæ¯ä¸ªæ–°äº‹åŠ¡é€šå¸¸éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥ã€‚å¦‚æœé¢‘ç¹è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®åº“è¿æ¥æ± è¢«è¿…é€Ÿè€—å°½ï¼Œå½±å“ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§è€ƒé‡&lt;/strong&gt;ï¼šæ­£å› ä¸ºå†…å¤–äº‹åŠ¡ç‹¬ç«‹ï¼Œå¯èƒ½å¯¼è‡´&lt;strong&gt;æ•°æ®ä¸ä¸€è‡´&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œä¸»ä¸šåŠ¡å›æ»šäº†ï¼Œä½†è®°å½•æ—¥å¿—çš„å­äº‹åŠ¡å´æˆåŠŸäº†ã€‚è®¾è®¡æ—¶å¿…é¡»ç¡®è®¤è¿™ç§ä¸ä¸€è‡´æ˜¯å¦æ˜¯ä¸šåŠ¡æ‰€èƒ½æ¥å—çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”é£é™©&lt;/strong&gt;ï¼šæ–°äº‹åŠ¡å¯èƒ½ä¼šä»¥ä¸åŒçš„é¡ºåºè·å–é”ï¼Œä¸æŒ‚èµ·çš„å¤–å±‚äº‹åŠ¡å½¢æˆå¾ªç¯ç­‰å¾…ï¼Œä»è€Œå¢åŠ æ­»é”çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®æˆ˜ä»£ç ç¤ºä¾‹"&gt;ğŸ“ å®æˆ˜ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº† &lt;code&gt;REQUIRES_NEW&lt;/code&gt;çš„ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@Service
public class OrderService {
@Autowired
private AuditLogService auditLogService;
@Transactional // é»˜è®¤æ˜¯ PROPAGATION_REQUIRED
public void createOrder(Order order) {
// 1. ä¿å­˜è®¢å•æ ¸å¿ƒä¸šåŠ¡æ•°æ®
orderRepository.save(order);
try {
// 2. è®°å½•å®¡è®¡æ—¥å¿—ï¼Œä½¿ç”¨ REQUIRES_NEW ç¡®ä¿ç‹¬ç«‹æäº¤
auditLogService.logAction(&amp;#34;ORDER_CREATED&amp;#34;, order.getId());
} catch (Exception e) {
// å³ä½¿æ—¥å¿—è®°å½•å¤±è´¥ï¼Œä¹Ÿä¸åº”å½±å“ä¸»è®¢å•çš„åˆ›å»º
logger.error(&amp;#34;å®¡è®¡æ—¥å¿—è®°å½•å¤±è´¥ï¼Œä½†è®¢å•åˆ›å»ºç»§ç»­&amp;#34;, e);
}
// 3. å…¶ä»–å¯èƒ½å¤±è´¥çš„ä¸šåŠ¡é€»è¾‘...
// å¦‚æœè¿™é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè®¢å•åˆ›å»ºä¼šå›æ»šï¼Œä½†å®¡è®¡æ—¥å¿—è®°å½•æ“ä½œï¼ˆå¦‚æœæˆåŠŸï¼‰å·²ç‹¬ç«‹æäº¤ã€‚
}
}
@Service
public class AuditLogService {
@Transactional(propagation = Propagation.REQUIRES_NEW) // å§‹ç»ˆå¼€å¯æ–°äº‹åŠ¡
public void logAction(String action, Long orderId) {
AuditLog log = new AuditLog(action, orderId);
auditLogRepository.save(log);
// è¿™ä¸ªæ–¹æ³•çš„æäº¤å’Œå›æ»šç‹¬ç«‹äº createOrder æ–¹æ³•çš„äº‹åŠ¡
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸å†³ç­–å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å†³ç­–å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©æ˜¯å¦ä½¿ç”¨ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹å†³ç­–æ€è·¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ¤æ–­æ ¸å¿ƒéœ€æ±‚&lt;/strong&gt;ï¼šé—®è‡ªå·±ï¼Œ&lt;strong&gt;è¿™ä¸ªå­æ“ä½œæ˜¯å¦å¿…é¡»åœ¨ä¸»ä¸šåŠ¡å¤±è´¥æ—¶ä¾ç„¶æˆåŠŸï¼Ÿ&lt;/strong&gt; å¦‚æœç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€å¿…é¡»çš„ï¼Œé‚£ä¹ˆ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;æ˜¯åˆé€‚çš„å€™é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯„ä¼°ä¸€è‡´æ€§è¦æ±‚&lt;/strong&gt;ï¼šæ¥å—è¿™ç§â€œéƒ¨åˆ†æˆåŠŸâ€æ‰€å¸¦æ¥çš„æ•°æ®ä¸ä¸€è‡´æ€§æ˜¯å¦æ˜¯ä¸šåŠ¡è®¾è®¡çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘æ€§èƒ½ä¸èµ„æº&lt;/strong&gt;ï¼šè¯„ä¼°ç³»ç»Ÿçš„å¹¶å‘é‡å’Œæ•°æ®åº“è¿æ¥èµ„æºï¼Œç¡®ä¿ä¸ä¼šå› æ­¤æˆä¸ºç“¶é¢ˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;REQUIRES_NEW&lt;/code&gt;æ˜¯ä¸€æŠŠåŠŸèƒ½å¼ºå¤§ä½†éœ€è¦è°¨æ…ä½¿ç”¨çš„åˆ©å™¨ã€‚å®ƒéå¸¸é€‚åˆé‚£äº›éœ€è¦ä¸ä¸»ä¸šåŠ¡è§£è€¦ã€ç¡®ä¿æœ€ç»ˆæ‰§è¡Œçš„è¾…åŠ©æ€§æˆ–è¡¥å¿æ€§æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ &lt;code&gt;REQUIRES_NEW&lt;/code&gt;ã€‚å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘CPP</title><link>https://dyhes.github.io/p/nowcodercpp/</link><pubDate>Tue, 09 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcodercpp/</guid><description>&lt;h2 id="è¿ç®—ç¬¦é‡è½½"&gt;è¿ç®—ç¬¦é‡è½½
&lt;/h2&gt;&lt;p&gt;C++ çš„è¿ç®—ç¬¦é‡è½½åŠŸèƒ½å…è®¸ä½ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼ˆå¦‚ç±»æˆ–ç»“æ„ä½“ï¼‰èµ‹äºˆä¸å†…ç½®ç±»å‹ç›¸ä¼¼çš„æ“ä½œè¡Œä¸ºã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»äº†å¯é‡è½½ä¸ä¸å¯é‡è½½çš„è¿ç®—ç¬¦ï¼Œå¹¶è§£é‡Šäº†ç›¸å…³è§„åˆ™å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å¯é‡è½½çš„è¿ç®—ç¬¦&lt;/th&gt;
&lt;th&gt;ä¸å¯é‡è½½çš„è¿ç®—ç¬¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æœ¯è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;+&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;, &lt;code&gt;%&lt;/code&gt;, &lt;code&gt;++&lt;/code&gt;, &lt;code&gt;--&lt;/code&gt;, &lt;code&gt;+=&lt;/code&gt;, &lt;code&gt;-=&lt;/code&gt;, &lt;code&gt;*=&lt;/code&gt;, &lt;code&gt;/=&lt;/code&gt;, &lt;code&gt;%=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³ç³»è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;==&lt;/code&gt;, &lt;code&gt;!=&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;amp;&lt;/code&gt;, `&lt;/td&gt;
&lt;td&gt;&lt;code&gt;,&lt;/code&gt;^&lt;code&gt;ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰,&lt;/code&gt;~&lt;code&gt;ï¼ˆæŒ‰ä½å–åï¼‰,&lt;/code&gt;&amp;laquo;&lt;code&gt;ï¼ˆå·¦ç§»ï¼‰,&lt;/code&gt;&amp;raquo;&lt;code&gt;ï¼ˆå³ç§»ï¼‰,&lt;/code&gt;&amp;amp;=&lt;code&gt;,&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€»è¾‘è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;!&lt;/code&gt;ï¼ˆé€»è¾‘éï¼‰, &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;ï¼ˆé€»è¾‘ä¸ï¼‰, `&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¶ä»–è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;[]&lt;/code&gt;ï¼ˆä¸‹æ ‡ï¼‰, &lt;code&gt;()&lt;/code&gt;ï¼ˆå‡½æ•°è°ƒç”¨ï¼‰, &lt;code&gt;-&amp;gt;&lt;/code&gt;ï¼ˆæˆå‘˜æŒ‡é’ˆè®¿é—®ï¼‰, &lt;code&gt;,&lt;/code&gt;ï¼ˆé€—å·ï¼‰, &lt;code&gt;=&lt;/code&gt;ï¼ˆèµ‹å€¼ï¼‰, &lt;code&gt;new&lt;/code&gt;, &lt;code&gt;delete&lt;/code&gt;, &lt;code&gt;new[]&lt;/code&gt;, &lt;code&gt;delete[]&lt;/code&gt;, &lt;code&gt;.*&lt;/code&gt;ï¼ˆæˆå‘˜æŒ‡é’ˆè®¿é—®ï¼Œ&lt;strong&gt;åªèƒ½ä½œä¸ºæˆå‘˜å‡½æ•°é‡è½½&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯é‡è½½è¿ç®—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;::&lt;/code&gt;ï¼ˆä½œç”¨åŸŸè§£æï¼‰, &lt;code&gt;.*&lt;/code&gt;ï¼ˆæˆå‘˜å¯¹è±¡é€‰æ‹©ï¼Ÿï¼‰, &lt;code&gt;.&lt;/code&gt;ï¼ˆæˆå‘˜è®¿é—®ï¼‰, &lt;code&gt;?:&lt;/code&gt;ï¼ˆä¸‰ç›®æ¡ä»¶ï¼‰, &lt;code&gt;sizeof&lt;/code&gt;, &lt;code&gt;typeid&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;é‡è½½è¿ç®—ç¬¦çš„æ ¸å¿ƒè§„åˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ”¹å˜ä¼˜å…ˆçº§å’Œç»“åˆæ€§&lt;/strong&gt;ï¼šé‡è½½ä¸ä¼šæ”¹å˜è¿ç®—ç¬¦åŸæœ‰çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ”¹å˜æ“ä½œæ•°ä¸ªæ•°&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œé‡è½½çš„ &lt;code&gt;+&lt;/code&gt;è¿ç®—ç¬¦ä»ç„¶æ˜¯äºŒå…ƒè¿ç®—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡³å°‘ä¸€ä¸ªç”¨æˆ·å®šä¹‰ç±»å‹&lt;/strong&gt;ï¼šé‡è½½è¿ç®—ç¬¦çš„å‡½æ•°å…¶å‚æ•°ä¸­å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹ï¼ˆç±»æˆ–ç»“æ„ä½“ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸èƒ½åˆ›å»ºæ–°è¿ç®—ç¬¦&lt;/strong&gt;ï¼šåªèƒ½é‡è½½ C++ è¯­è¨€ä¸­å·²æœ‰çš„ã€å…è®¸é‡è½½çš„è¿ç®—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒè¯­ä¹‰ä¸€è‡´æ€§&lt;/strong&gt;ï¼šé‡è½½çš„è¿ç®—ç¬¦åº”ä¸å…¶åŸæœ‰åŠŸèƒ½ç±»ä¼¼ï¼Œé¿å…æ»¥ç”¨å¯¼è‡´ä»£ç å¯è¯»æ€§ä¸‹é™ï¼ˆä¾‹å¦‚ï¼Œä¸åº”ä½¿ç”¨ &lt;code&gt;+&lt;/code&gt;è¿ç®—ç¬¦æ¥å®ç°å‡æ³•æ“ä½œï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ“ &lt;strong&gt;å¦‚ä½•é‡è½½è¿ç®—ç¬¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿ç®—ç¬¦é‡è½½å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æˆå‘˜å‡½æ•°å½¢å¼&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;äºŒå…ƒè¿ç®—ç¬¦çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªæ˜¾å¼å‚æ•°ï¼ˆå¦ä¸€ä¸ªæ˜¯éšå«çš„ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆï¼‰ï¼Œä¸€å…ƒè¿ç®—ç¬¦åˆ™æ²¡æœ‰æ˜¾å¼å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼š&lt;code&gt;ClassName operator+(const ClassName&amp;amp; other) const;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;èµ‹å€¼è¿ç®—ç¬¦(&lt;code&gt;=&lt;/code&gt;)ã€ä¸‹æ ‡è¿ç®—ç¬¦(&lt;code&gt;[]&lt;/code&gt;)ã€å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦(&lt;code&gt;()&lt;/code&gt;)ã€æˆå‘˜è®¿é—®è¿ç®—ç¬¦(&lt;code&gt;-&amp;gt;&lt;/code&gt;) &lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½œä¸ºæˆå‘˜å‡½æ•°é‡è½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éæˆå‘˜å‡½æ•°å½¢å¼ï¼ˆé€šå¸¸å£°æ˜ä¸ºå‹å…ƒï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;äºŒå…ƒè¿ç®—ç¬¦éœ€è¦ä¸¤ä¸ªæ˜¾å¼å‚æ•°ï¼Œä¸€å…ƒè¿ç®—ç¬¦éœ€è¦ä¸€ä¸ªæ˜¾å¼å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;é€šå¸¸éœ€è¦å°†å…¶å£°æ˜ä¸ºç±»çš„ &lt;code&gt;å‹å…ƒï¼ˆfriendï¼‰&lt;/code&gt;å‡½æ•°ä»¥ä¾¿è®¿é—®ç§æœ‰æˆå‘˜ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ç§å½¢å¼å¯¹äºéœ€è¦&lt;strong&gt;å¯¹ç§°æ€§&lt;/strong&gt;çš„æ“ä½œï¼ˆå¦‚ &lt;code&gt;(ä½ çš„ç±»å¯¹è±¡ + æ•´æ•°)&lt;/code&gt;å’Œ &lt;code&gt;(æ•´æ•° + ä½ çš„ç±»å¯¹è±¡)&lt;/code&gt;ï¼‰æˆ–å½“å·¦æ“ä½œæ•°ä¸æ˜¯è¯¥ç±»å¯¹è±¡æ—¶ï¼ˆå¦‚é‡è½½ &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;ç”¨äºè¾“å‡ºï¼‰éå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;ä¸€äº›å®ç”¨å»ºè®®&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æˆå¯¹é‡è½½&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œå¦‚æœé‡è½½äº† &lt;code&gt;==&lt;/code&gt;ï¼Œé€šå¸¸ä¹Ÿåº”é‡è½½ &lt;code&gt;!=&lt;/code&gt;ï¼›é‡è½½äº† &lt;code&gt;&amp;lt;&lt;/code&gt;ï¼Œå¾€å¾€ä¹Ÿåº”è€ƒè™‘é‡è½½ &lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;=&lt;/code&gt;ã€&lt;code&gt;&amp;gt;=&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„è¿”å›å€¼&lt;/strong&gt;ï¼šèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;+=&lt;/code&gt;, &lt;code&gt;-=&lt;/code&gt;ç­‰ï¼‰é€šå¸¸åº”è¿”å›å½“å‰å¯¹è±¡çš„å¼•ç”¨ï¼ˆ&lt;code&gt;ClassName&amp;amp;&lt;/code&gt;ï¼‰ä»¥æ”¯æŒé“¾å¼èµ‹å€¼ï¼ˆå¦‚ &lt;code&gt;a = b = c&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰åç¼€åŒºåˆ†&lt;/strong&gt;ï¼šé‡è½½å‰ç½® &lt;code&gt;++&lt;/code&gt;å’Œåç½® &lt;code&gt;++&lt;/code&gt;æ—¶ï¼Œåç½®ç‰ˆæœ¬æ¥å—ä¸€ä¸ªé¢å¤–çš„ &lt;code&gt;int&lt;/code&gt;ç±»å‹å ä½å‚æ•°ä»¥ç¤ºåŒºåˆ†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿ç®—ç¬¦é‡è½½èƒ½æå¤§æå‡ä»£ç çš„å¯è¯»æ€§å’Œæ˜“ç”¨æ€§ï¼Œä½†åŠ¡å¿…è°¨æ…ä½¿ç”¨ï¼Œç¡®ä¿å…¶è¡Œä¸ºç¬¦åˆç›´è§‰ï¼Œå¹¶ä¸¥æ ¼éµå®ˆ C++ çš„è§„åˆ™ã€‚&lt;/p&gt;
&lt;h2 id="å‹å…ƒè¿ç®—ç¬¦"&gt;å‹å…ƒè¿ç®—ç¬¦
&lt;/h2&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œå°†è¿ç®—ç¬¦é‡è½½ä¸º&lt;strong&gt;å‹å…ƒå‡½æ•°&lt;/strong&gt;è¿˜æ˜¯&lt;strong&gt;æˆå‘˜å‡½æ•°&lt;/strong&gt;ï¼Œä¸»è¦åŒºåˆ«åœ¨äºå°è£…æ€§ã€å‚æ•°ä¼ é€’æ–¹å¼ä»¥åŠå¯¹æ“ä½œæ•°ä½ç½®çš„çµæ´»æ€§ä¸Šã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒå·®å¼‚ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;å‹å…ƒè¿ç®—ç¬¦é‡è½½ (Friend Operator Overloading)&lt;/th&gt;
&lt;th&gt;æˆå‘˜å‡½æ•°è¿ç®—ç¬¦é‡è½½ (Member Function Operator Overloading)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨å±€å‡½æ•°ï¼Œä½¿ç”¨ &lt;code&gt;friend&lt;/code&gt;å…³é”®å­—åœ¨ç±»å†…å£°æ˜&lt;/td&gt;
&lt;td&gt;ç±»çš„æˆå‘˜å‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ²¡æœ‰ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆ&lt;/td&gt;
&lt;td&gt;éšå« &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆï¼ŒæŒ‡å‘å·¦æ“ä½œæ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°ä¸ªæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒç›®è¿ç®—ç¬¦éœ€ä¸¤ä¸ªæ˜¾å¼å‚æ•°ï¼Œå•ç›®è¿ç®—ç¬¦éœ€ä¸€ä¸ªæ˜¾å¼å‚æ•°&lt;/td&gt;
&lt;td&gt;åŒç›®è¿ç®—ç¬¦éœ€ä¸€ä¸ªæ˜¾å¼å‚æ•°ï¼ˆå·¦æ“ä½œæ•°ç”± &lt;code&gt;this&lt;/code&gt;æŒ‡å‡ºï¼‰ï¼Œå•ç›®è¿ç®—ç¬¦æ— éœ€å‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¦æ“ä½œæ•°ç±»å‹é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆåŒ…æ‹¬éç±»ç±»å‹ï¼‰&lt;/td&gt;
&lt;td&gt;å¿…é¡»æ˜¯è¯¥ç±»çš„å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹ç§°æ€§æ“ä½œæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­ æ”¯æŒï¼ˆå¦‚ &lt;code&gt;obj + 3&lt;/code&gt;å’Œ &lt;code&gt;3 + obj&lt;/code&gt;éƒ½å¯è¡Œï¼‰&lt;/td&gt;
&lt;td&gt;âŒ ä¸æ”¯æŒï¼ˆè‹¥å·¦æ“ä½œæ•°éè¯¥ç±»å¯¹è±¡åˆ™æ— æ³•ç¼–è¯‘ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®ç§æœ‰æˆå‘˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜ä¸ºå‹å…ƒåå¯ä»¥è®¿é—®&lt;/td&gt;
&lt;td&gt;å¤©ç„¶å¯ä»¥è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å°è£…æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼šç ´åå°è£…æ€§ï¼ˆå› å…¶ä¸æ˜¯æˆå‘˜å‡½æ•°å´å¯è®¿é—®ç§æœ‰éƒ¨åˆ†ï¼‰&lt;/td&gt;
&lt;td&gt;è‰¯å¥½åœ°å°è£…åœ¨ç±»å†…éƒ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸäº›è¿ç®—ç¬¦çš„é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸èƒ½é‡è½½ &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;()&lt;/code&gt;, &lt;code&gt;[]&lt;/code&gt;, &lt;code&gt;-&amp;gt;&lt;/code&gt;ä¸ºå‹å…ƒå‡½æ•°&lt;/td&gt;
&lt;td&gt;èµ‹å€¼è¿ç®—ç¬¦(&lt;code&gt;=&lt;/code&gt;)ã€ä¸‹æ ‡è¿ç®—ç¬¦(&lt;code&gt;[]&lt;/code&gt;)ã€å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦(&lt;code&gt;()&lt;/code&gt;)ã€æˆå‘˜è®¿é—®è¿ç®—ç¬¦(&lt;code&gt;-&amp;gt;&lt;/code&gt;) &lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½œä¸ºæˆå‘˜å‡½æ•°é‡è½½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“Œ &lt;strong&gt;å¦‚ä½•é€‰æ‹©å‹å…ƒè¿˜æ˜¯æˆå‘˜å‡½æ•°å½¢å¼&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘å‹å…ƒå‡½æ•°çš„æƒ…å†µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;æ”¯æŒå¯¹ç§°æ€§è¿ç®—&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;a + b&lt;/code&gt;å’Œ &lt;code&gt;b + a&lt;/code&gt;éƒ½åº”æœ‰æ•ˆï¼‰ï¼Œå°¤å…¶æ˜¯å·¦æ“ä½œæ•°å¯èƒ½æ˜¯åŸºæœ¬ç±»å‹æˆ–å…¶ä»–ç±»ç±»å‹æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;è¿ç®—ç¬¦çš„&lt;strong&gt;å·¦æ“ä½œæ•°ä¸æ˜¯å½“å‰ç±»çš„å¯¹è±¡&lt;/strong&gt;ï¼ˆä¾‹å¦‚é‡è½½ &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;ç”¨äºè¾“å‡ºæ—¶ï¼Œå·¦æ“ä½œæ•°æ˜¯ &lt;code&gt;std::ostream&lt;/code&gt;å¯¹è±¡ï¼Œå¿…é¡»ä½¿ç”¨å‹å…ƒæˆ–éæˆå‘˜å‡½æ•°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³ç³»è¿ç®—ç¬¦&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;==&lt;/code&gt;, &lt;code&gt;!=&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;ç­‰ï¼‰é€šå¸¸ä¹Ÿå»ºè®®é‡è½½ä¸ºå‹å…ƒå‡½æ•°ä»¥å®ç°å¯¹ç§°æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘æˆå‘˜å‡½æ•°çš„æƒ…å†µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ‹å€¼ç±»è¿ç®—ç¬¦&lt;/strong&gt;ï¼Œå¦‚ &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;+=&lt;/code&gt;, &lt;code&gt;-=&lt;/code&gt;, &lt;code&gt;*=&lt;/code&gt;, &lt;code&gt;/=&lt;/code&gt;ç­‰ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ç›´æ¥ä¿®æ”¹å·¦æ“ä½œæ•°å¯¹è±¡çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€å…ƒè¿ç®—ç¬¦&lt;/strong&gt;ï¼Œå¦‚ &lt;code&gt;++&lt;/code&gt;ï¼ˆå‰ç½®å’Œåç½®ï¼‰ã€&lt;code&gt;--&lt;/code&gt;ï¼ˆå‰ç½®å’Œåç½®ï¼‰ã€&lt;code&gt;*&lt;/code&gt;ï¼ˆè§£å¼•ç”¨ï¼‰ã€&lt;code&gt;-&amp;gt;&lt;/code&gt;ï¼ˆæˆå‘˜è®¿é—®ï¼‰ç­‰ï¼Œé€šå¸¸ä¹Ÿä½¿ç”¨æˆå‘˜å‡½æ•°å½¢å¼é‡è½½ã€‚&lt;/li&gt;
&lt;li&gt;å½“è¿ç®—ç¬¦&lt;strong&gt;è‡ªç„¶åœ°å°†å·¦æ“ä½œæ•°ä½œä¸ºå½“å‰å¯¹è±¡&lt;/strong&gt;ï¼Œä¸”ä¸éœ€è¦å¯¹ç§°æ€§æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;å¸Œæœ›&lt;strong&gt;ä¿æŒè‰¯å¥½çš„å°è£…æ€§&lt;/strong&gt;ï¼Œé¿å…å‹å…ƒæœºåˆ¶å¸¦æ¥çš„å°è£…çªç ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;ä¸€ä¸ªç®€å•ä¾‹å­&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
class MyNumber {
private:
int value;
public:
MyNumber(int v = 0) : value(v) {}
// æˆå‘˜å‡½æ•°é‡è½½ï¼šMyNumber + int
MyNumber operator+(int rhs) const {
return MyNumber(value + rhs);
}
// å‹å…ƒå‡½æ•°é‡è½½ï¼šint + MyNumber (éœ€è¦è®¿é—®ç§æœ‰æˆå‘˜valueï¼Œæ•…å£°æ˜ä¸ºå‹å…ƒ)
friend MyNumber operator+(int lhs, const MyNumber&amp;amp; rhs);
void print() const {
std::cout &amp;lt;&amp;lt; value &amp;lt;&amp;lt; std::endl;
}
};
// å‹å…ƒå‡½æ•°å®ç°ï¼šint + MyNumber
MyNumber operator+(int lhs, const MyNumber&amp;amp; rhs) {
return MyNumber(lhs + rhs.value);
}
int main() {
MyNumber num(5);
MyNumber result1 = num + 10; // ä½¿ç”¨æˆå‘˜è¿ç®—ç¬¦ï¼šMyNumber + int
MyNumber result2 = 10 + num; // ä½¿ç”¨å‹å…ƒè¿ç®—ç¬¦ï¼šint + MyNumber
result1.print(); // è¾“å‡º 15
result2.print(); // è¾“å‡º 15
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;âš¡ &lt;strong&gt;é‡è¦æé†’&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨å‹å…ƒ&lt;/strong&gt;ï¼šå‹å…ƒå…³ç³»ä¼š&lt;strong&gt;ç ´åå°è£…æ€§&lt;/strong&gt;ï¼Œåº”ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•é‡è½½ä¸ºå‹å…ƒçš„è¿ç®—ç¬¦&lt;/strong&gt;ï¼š&lt;code&gt;=&lt;/code&gt;ã€&lt;code&gt;()&lt;/code&gt;ã€&lt;code&gt;[]&lt;/code&gt;ã€&lt;code&gt;-&amp;gt;&lt;/code&gt;è¿™äº›è¿ç®—ç¬¦&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;è¢«é‡è½½ä¸ºå‹å…ƒå‡½æ•°ï¼Œå®ƒä»¬&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½œä¸ºç±»çš„æˆå‘˜å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;ï¼šé‡è½½è¿ç®—ç¬¦æ—¶ï¼Œåº”ç¡®ä¿å…¶è¡Œä¸ºç¬¦åˆè¯¥è¿ç®—ç¬¦çš„ç›´è§‚å«ä¹‰ï¼Œé¿å…æ»¥ç”¨å¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ C++ ä¸­å‹å…ƒè¿ç®—ç¬¦é‡è½½å’Œæˆå‘˜å‡½æ•°è¿ç®—ç¬¦é‡è½½çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="ç±»å‹è½¬æ¢"&gt;ç±»å‹è½¬æ¢
&lt;/h2&gt;&lt;p&gt;C++ ä¸­çš„ç±»å‹è½¬æ¢æœºåˆ¶ä¸°å¯Œä¸”å„æœ‰å…¶ç‰¹å®šç”¨é€”ï¼Œç†è§£å®ƒä»¬å¯¹ç¼–å†™å®‰å…¨ä¸”é«˜æ•ˆçš„ä»£ç è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ ç³»ç»Ÿä»‹ç» C++ ä¸­çš„å„ç§ç±»å‹è½¬æ¢æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€éšå¼ç±»å‹è½¬æ¢-implicit-conversion"&gt;ğŸ”„ ä¸€ã€éšå¼ç±»å‹è½¬æ¢ (Implicit Conversion)
&lt;/h3&gt;&lt;p&gt;éšå¼è½¬æ¢ç”±&lt;strong&gt;ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆ&lt;/strong&gt;ï¼Œæ— éœ€ç¨‹åºå‘˜æ˜¾å¼æŒ‡å®šã€‚å¸¸è§äºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®—æœ¯è½¬æ¢ (Arithmetic Conversion)&lt;/strong&gt;ï¼šåœ¨è¡¨è¾¾å¼ä¸­ä¸åŒç±»å‹æ•°æ®è¿ç®—æ—¶ï¼Œç²¾åº¦è¾ƒä½çš„ç±»å‹é€šå¸¸ä¼šè½¬æ¢ä¸ºç²¾åº¦è¾ƒé«˜çš„ç±»å‹ã€‚ä¾‹å¦‚ &lt;code&gt;int&lt;/code&gt;ä¸ &lt;code&gt;double&lt;/code&gt;è¿ç®—æ—¶ï¼Œ&lt;code&gt;int&lt;/code&gt;ä¼šè¢«è½¬æ¢ä¸º &lt;code&gt;double&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ‹å€¼è½¬æ¢&lt;/strong&gt;ï¼šå°†ä¸€ç§ç±»å‹çš„å€¼èµ‹ç»™å¦ä¸€ç§ç±»å‹çš„å˜é‡æ—¶å‘ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡½æ•°è°ƒç”¨è½¬æ¢&lt;/strong&gt;ï¼šä¼ é€’å®å‚ç»™å½¢å‚æ—¶ï¼Œè‹¥ç±»å‹ä¸åŒ¹é…ï¼Œä¼šå°è¯•éšå¼è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–è½¬æ¢&lt;/strong&gt;ï¼šç”¨ä¸åŒç±»å‹åˆå§‹åŒ–å˜é‡æ—¶å¯èƒ½å‘ç”Ÿè½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ´¾ç”Ÿç±»å‘åŸºç±»è½¬æ¢&lt;/strong&gt;ï¼šåœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ´¾ç”Ÿç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨å¯ä»¥å®‰å…¨åœ°è½¬æ¢ä¸ºåŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼ˆå‘ä¸Šè½¬å‹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šéšå¼è½¬æ¢è™½ç„¶æ–¹ä¾¿ï¼Œä½†å¯èƒ½å¯¼è‡´&lt;strong&gt;ç²¾åº¦æŸå¤±&lt;/strong&gt;æˆ–&lt;strong&gt;æ„æƒ³ä¸åˆ°çš„è¡Œä¸º&lt;/strong&gt;ï¼Œåº”å¯†åˆ‡å…³æ³¨ã€‚&lt;/p&gt;
&lt;h3 id="-äºŒæ˜¾å¼ç±»å‹è½¬æ¢-explicit-conversion"&gt;âŒ¨ï¸ äºŒã€æ˜¾å¼ç±»å‹è½¬æ¢ (Explicit Conversion)
&lt;/h3&gt;&lt;p&gt;å½“éœ€è¦æ˜ç¡®æ§åˆ¶è½¬æ¢è¿‡ç¨‹æ—¶ï¼Œéœ€ä½¿ç”¨æ˜¾å¼è½¬æ¢ã€‚&lt;/p&gt;
&lt;h4 id="1-c-é£æ ¼è½¬æ¢-typeexpression"&gt;1. C é£æ ¼è½¬æ¢ [(type)expression]
&lt;/h4&gt;&lt;p&gt;C é£æ ¼è½¬æ¢ä½¿ç”¨ &lt;code&gt;(ç›®æ ‡ç±»å‹)&lt;/code&gt;çš„è¯­æ³•ï¼ŒåŠŸèƒ½å¼ºå¤§ä½†&lt;strong&gt;ä¸å¤Ÿå®‰å…¨&lt;/strong&gt;ï¼Œå› å…¶å‡ ä¹å…è®¸ä»»ä½•ç±»å‹é—´çš„è½¬æ¢ï¼Œå®¹æ˜“å¼•å‘æœªå®šä¹‰è¡Œä¸ºï¼Œä¸”è½¬æ¢æ„å›¾ä¸å¤Ÿæ¸…æ™°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;double d = 3.14;
int i = (int)d; // C é£æ ¼è½¬æ¢ï¼Œå°† double è½¬æ¢ä¸º int
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-å‡½æ•°å¼è½¬æ¢-typeexpression"&gt;2. å‡½æ•°å¼è½¬æ¢ [type(expression)]
&lt;/h4&gt;&lt;p&gt;å‡½æ•°å¼è½¬æ¢åœ¨ C++ ä¸­ä¹Ÿå¯ç”¨ï¼Œä½†ä¸ C é£æ ¼è½¬æ¢å­˜åœ¨ç±»ä¼¼çš„å®‰å…¨æ€§é—®é¢˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int i = int(d); // å‡½æ•°å¼é£æ ¼è½¬æ¢
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-c-å‘½åå¼ºåˆ¶è½¬æ¢è¿ç®—ç¬¦-named-cast-operators"&gt;3. C++ å‘½åå¼ºåˆ¶è½¬æ¢è¿ç®—ç¬¦ (Named Cast Operators)
&lt;/h4&gt;&lt;p&gt;C++ å¼•å…¥äº†å››ç§æ˜¾å¼çš„å¼ºåˆ¶è½¬æ¢è¿ç®—ç¬¦ï¼Œæ›´å®‰å…¨ä¸”æ„å›¾æ›´æ¸…æ™°ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è½¬æ¢è¿ç®—ç¬¦&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;th&gt;æ£€æŸ¥æ—¶æœº&lt;/th&gt;
&lt;th&gt;å®‰å…¨æ€§&lt;/th&gt;
&lt;th&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;static_cast&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å…³ç±»å‹é—´çš„è½¬æ¢&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘æ—¶&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹å®‰å…¨ï¼Œä½†ä¸‹è¡Œè½¬æ¢ï¼ˆåŸºç±»â†’æ´¾ç”Ÿç±»ï¼‰å¯èƒ½ä¸å®‰å…¨&lt;/td&gt;
&lt;td&gt;åŸºæœ¬ç±»å‹è½¬æ¢ã€å‘ä¸Šè½¬å‹ã€ç©ºæŒ‡é’ˆè½¬æ¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;dynamic_cast&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šæ€ç±»å‹é—´çš„å®‰å…¨å‘ä¸‹è½¬æ¢å’Œäº¤å‰è½¬æ¢&lt;/td&gt;
&lt;td&gt;è¿è¡Œæ—¶&lt;/td&gt;
&lt;td&gt;å®‰å…¨ï¼Œè½¬æ¢å¤±è´¥è¿”å› &lt;code&gt;nullptr&lt;/code&gt;ï¼ˆæŒ‡é’ˆï¼‰æˆ–æŠ›å‡º &lt;code&gt;bad_cast&lt;/code&gt;å¼‚å¸¸ï¼ˆå¼•ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;åœ¨ç»§æ‰¿å±‚æ¬¡ä¸­è¿›è¡Œå®‰å…¨çš„å‘ä¸‹è½¬å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;const_cast&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ·»åŠ æˆ–ç§»é™¤ &lt;code&gt;const&lt;/code&gt;æˆ– &lt;code&gt;volatile&lt;/code&gt;é™å®šç¬¦&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘æ—¶&lt;/td&gt;
&lt;td&gt;éœ€è°¨æ…ä½¿ç”¨ï¼Œä¿®æ”¹åŸå¸¸é‡å¯¹è±¡æ˜¯æœªå®šä¹‰è¡Œä¸º&lt;/td&gt;
&lt;td&gt;å»é™¤å¸¸é‡æ€§ä»¥é€‚é…å‡½æ•°å‚æ•°ï¼ˆä½†ä¸åº”ä¿®æ”¹å¸¸é‡å¯¹è±¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;reinterpret_cast&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½çº§åˆ«çš„é‡æ–°è§£é‡Šä½æ¨¡å¼ï¼Œå‡ ä¹ä¸å—é™åˆ¶çš„ç±»å‹è½¬æ¢&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘æ—¶&lt;/td&gt;
&lt;td&gt;éå¸¸ä¸å®‰å…¨ï¼Œé«˜åº¦ä¾èµ–å¹³å°å’Œç¼–è¯‘å™¨&lt;/td&gt;
&lt;td&gt;æŒ‡é’ˆä¸æ•´æ•°é—´çš„è½¬æ¢ã€ä¸åŒç±»å‹æŒ‡é’ˆé—´çš„è½¬æ¢ï¼ˆå¦‚ç½‘ç»œæ•°æ®åŒ…å¤„ç†ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯è¿™å››ç§è½¬æ¢çš„è¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;static_cast&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨äºç›¸å…³ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œæ˜¯æœ€é€šç”¨ä¸”æœ€å¸¸ç”¨çš„ C++ è½¬æ¢æ–¹å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;double d = 3.14;
int i = static_cast&amp;lt;int&amp;gt;(d); // åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢
class Base {};
class Derived : public Base {};
Derived* derivedPtr = new Derived;
Base* basePtr = static_cast&amp;lt;Base*&amp;gt;(derivedPtr); // å‘ä¸Šè½¬å‹ï¼Œå®‰å…¨
// Base* basePtr2 = new Base;
// Derived* derivedPtr2 = static_cast&amp;lt;Derived*&amp;gt;(basePtr2); // å‘ä¸‹è½¬å‹ï¼Œä¸å®‰å…¨ï¼
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;dynamic_cast&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸“é—¨ç”¨äº&lt;strong&gt;å«æœ‰è™šå‡½æ•°&lt;/strong&gt;çš„å¤šæ€ç±»ä½“ç³»ï¼Œåœ¨è¿è¡Œæ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œç¡®ä¿è½¬æ¢å®‰å…¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Base { virtual void dummy() {} }; // è‡³å°‘æœ‰ä¸€ä¸ªè™šå‡½æ•°
class Derived : public Base {};
Base* basePtr = new Derived;
Derived* derivedPtr = dynamic_cast&amp;lt;Derived*&amp;gt;(basePtr); // å®‰å…¨å‘ä¸‹è½¬å‹
if (derivedPtr) { // æ£€æŸ¥æ˜¯å¦è½¬æ¢æˆåŠŸ
// è½¬æ¢æˆåŠŸï¼Œä½¿ç”¨ derivedPtr
} else {
// è½¬æ¢å¤±è´¥
}
delete basePtr;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;const_cast&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸»è¦ç”¨äº&lt;strong&gt;æ·»åŠ æˆ–ç§»é™¤ &lt;code&gt;const&lt;/code&gt;&lt;/strong&gt;ï¼ˆæˆ– &lt;code&gt;volatile&lt;/code&gt;ï¼‰é™å®šç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;const int ci = 10;
int* modifiable = const_cast&amp;lt;int*&amp;gt;(&amp;amp;ci); // ç§»é™¤ const é™å®š
// *modifiable = 20; // å±é™©ï¼åŸå¯¹è±¡æ˜¯å¸¸é‡ï¼Œè¿™æ˜¯æœªå®šä¹‰è¡Œä¸º
void print(char* str);
const char* msg = &amp;#34;hello&amp;#34;;
print(const_cast&amp;lt;char*&amp;gt;(msg)); // åˆæ³•ä½¿ç”¨ï¼šé€‚é…å‡½æ•°å‚æ•°ï¼ˆä½†å‡½æ•°ä¸åº”ä¿®æ”¹ msgï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;reinterpret_cast&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æä¾›ä½çº§åˆ«çš„é‡æ–°è§£é‡Šï¼Œ&lt;strong&gt;ä¸è¿›è¡Œä»»ä½•ç±»å‹æ£€æŸ¥&lt;/strong&gt;ï¼Œæå…¶ä¸å®‰å…¨ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int i = 42;
int* p = &amp;amp;i;
uintptr_t addr = reinterpret_cast&amp;lt;uintptr_t&amp;gt;(p); // å°†æŒ‡é’ˆè½¬æ¢ä¸ºæ•´æ•°
char* charPtr = reinterpret_cast&amp;lt;char*&amp;gt;(p); // å°† int* é‡æ–°è§£é‡Šä¸º char*
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸‰ç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢-user-defined-conversions"&gt;ğŸ§ª ä¸‰ã€ç”¨æˆ·å®šä¹‰çš„ç±»å‹è½¬æ¢ (User-Defined Conversions)
&lt;/h3&gt;&lt;p&gt;ç”¨æˆ·å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹ï¼ˆç±»ï¼‰å®šä¹‰è½¬æ¢è¡Œä¸ºï¼Œä¸»è¦é€šè¿‡ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;h4 id="1-è½¬æ¢æ„é€ å‡½æ•°-conversion-constructor"&gt;1. è½¬æ¢æ„é€ å‡½æ•° (Conversion Constructor)
&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå‚æ•°ï¼ˆæˆ–å¤šä¸ªå‚æ•°ä½†åªæœ‰ç¬¬ä¸€ä¸ªæ— é»˜è®¤å€¼ï¼‰çš„é explicit æ„é€ å‡½æ•°ï¼Œå¯ä»¥ä»å‚æ•°ç±»å‹éšå¼è½¬æ¢ä¸ºè¯¥ç±»ç±»å‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Meter {
public:
Meter(double value) : m_value(value) {} // å…è®¸ä» double åˆ° Meter çš„è½¬æ¢
double getValue() const { return m_value; }
private:
double m_value;
};
void printLength(Meter m) {
std::cout &amp;lt;&amp;lt; m.getValue() &amp;lt;&amp;lt; &amp;#34; meters&amp;#34; &amp;lt;&amp;lt; std::endl;
}
int main() {
Meter m = 5.5; // éšå¼è½¬æ¢ï¼šdouble -&amp;gt; Meter
printLength(10.2); // éšå¼è½¬æ¢ï¼šdouble -&amp;gt; Meter
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;explicit&lt;/code&gt;å…³é”®å­—å¯ä»¥é˜²æ­¢éšå¼è½¬æ¢ï¼Œé¿å…æ„å¤–è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h4 id="2-ç±»å‹è½¬æ¢è¿ç®—ç¬¦-type-conversion-operator"&gt;2. ç±»å‹è½¬æ¢è¿ç®—ç¬¦ (Type Conversion Operator)
&lt;/h4&gt;&lt;p&gt;å…è®¸å°†ç±»ç±»å‹å¯¹è±¡è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Inch {
public:
Inch(double value) : m_value(value) {}
explicit operator double() const { // æ˜¾å¼å®šä¹‰ä» Inch åˆ° double çš„è½¬æ¢
return m_value;
}
operator Meter() const { // éšå¼å®šä¹‰ä» Inch åˆ° Meter çš„è½¬æ¢ï¼ˆå¯èƒ½ä¸æ¨èï¼‰
return Meter(m_value * 0.0254);
}
private:
double m_value;
};
int main() {
Inch i(12);
double d = static_cast&amp;lt;double&amp;gt;(i); // æ˜¾å¼è°ƒç”¨ operator double()
Meter m = i; // éšå¼è°ƒç”¨ operator Meter()
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŒæ ·ï¼Œ&lt;code&gt;explicit&lt;/code&gt;å…³é”®å­—å¯ç”¨äºè½¬æ¢è¿ç®—ç¬¦ä»¥é˜²æ­¢éšå¼è½¬æ¢ã€‚&lt;/p&gt;
&lt;h3 id="-å››ç±»å‹è½¬æ¢çš„é€‰æ‹©æŒ‡å—ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ å››ã€ç±»å‹è½¬æ¢çš„é€‰æ‹©æŒ‡å—ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ C++ é£æ ¼è½¬æ¢&lt;/strong&gt;ï¼šç›¸æ¯” C é£æ ¼è½¬æ¢ï¼Œ&lt;code&gt;static_cast&lt;/code&gt;, &lt;code&gt;dynamic_cast&lt;/code&gt;, &lt;code&gt;const_cast&lt;/code&gt;, &lt;code&gt;reinterpret_cast&lt;/code&gt;æ›´å®‰å…¨ï¼Œæ„å›¾æ›´æ¸…æ™°ï¼Œä¾¿äºæ£€æŸ¥å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨éšå¼è½¬æ¢&lt;/strong&gt;ï¼šæ³¨æ„éšå¼è½¬æ¢å¯èƒ½å¸¦æ¥çš„ç²¾åº¦æŸå¤±æˆ–æ„æƒ³ä¸åˆ°è¡Œä¸ºï¼Œå¯¹å•å‚æ•°æ„é€ å‡½æ•°è€ƒè™‘ä½¿ç”¨ &lt;code&gt;explicit&lt;/code&gt;å…³é”®å­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘ä¸‹è½¬å‹æ—¶ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;dynamic_cast&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ç»§æ‰¿å±‚æ¬¡ä¸­è¿›è¡Œå‘ä¸‹è½¬å‹æ—¶ï¼Œ&lt;code&gt;dynamic_cast&lt;/code&gt;æä¾›è¿è¡Œæ—¶æ£€æŸ¥ï¼Œæ¯” &lt;code&gt;static_cast&lt;/code&gt;æ›´å®‰å…¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•¬ç• &lt;code&gt;reinterpret_cast&lt;/code&gt;&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ä¸å®‰å…¨çš„è½¬æ¢ï¼Œé™¤éåº•å±‚ç¼–ç¨‹ï¼ˆå¦‚ç¡¬ä»¶äº¤äº’ã€ç‰¹å®šç³»ç»Ÿç¼–ç¨‹ï¼‰ç­‰å¿…éœ€åœºæ™¯ï¼Œå¦åˆ™å°½é‡é¿å…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°Šé‡ &lt;code&gt;const&lt;/code&gt;æ­£ç¡®æ€§&lt;/strong&gt;ï¼šä¸è¦è½»æ˜“ä½¿ç”¨ &lt;code&gt;const_cast&lt;/code&gt;æ¥ä¿®æ”¹å¸¸é‡å¯¹è±¡ï¼Œè¿™å¸¸å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚ä¸»è¦ç”¨äºé€‚é…æ—§æ¥å£ç­‰ç‰¹æ®Šåœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è½¬æ¢æ­§ä¹‰&lt;/strong&gt;ï¼šä¸ºç”¨æˆ·è‡ªå®šä¹‰ç±»å‹å®šä¹‰è½¬æ¢å‡½æ•°æ—¶ï¼Œç¡®ä¿è½¬æ¢è·¯å¾„å”¯ä¸€ï¼Œé¿å…ç¼–è¯‘å™¨å› å¤šä¸ªè½¬æ¢è·¯å¾„è€Œæ— æ³•æŠ‰æ‹©ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-äº”å…¶ä»–ç±»å‹è½¬æ¢å·¥å…·"&gt;âš™ï¸ äº”ã€å…¶ä»–ç±»å‹è½¬æ¢å·¥å…·
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;std::any_cast&lt;/code&gt;&lt;/strong&gt; (C++17 å¼•å…¥)ï¼šä¸ &lt;code&gt;std::any&lt;/code&gt;é…åˆä½¿ç”¨ï¼Œå®‰å…¨åœ°è·å– &lt;code&gt;std::any&lt;/code&gt;å¯¹è±¡ä¸­å­˜å‚¨çš„å€¼ã€‚å¦‚æœç±»å‹ä¸åŒ¹é…ï¼Œä¼šæŠ›å‡º &lt;code&gt;std::bad_any_cast&lt;/code&gt;å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;any&amp;gt;
#include &amp;lt;string&amp;gt;
std::any a = std::string(&amp;#34;hello&amp;#34;);
try {
std::string s = std::any_cast&amp;lt;std::string&amp;gt;(a);
} catch(const std::bad_any_cast&amp;amp; e) {
// å¤„ç†ç±»å‹ä¸åŒ¹é…
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ‡å‡†åº“å­—ç¬¦ä¸²ä¸æ•°å€¼çš„è½¬æ¢&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;std::stoi&lt;/code&gt;(string to int), &lt;code&gt;std::stod&lt;/code&gt;(string to double), &lt;code&gt;std::to_string&lt;/code&gt;(number to string) ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŒæ¡ C++ çš„ç±»å‹è½¬æ¢æœºåˆ¶ï¼Œèƒ½å¸®åŠ©ä½ åœ¨ä»£ç çš„çµæ´»æ€§ã€å®‰å…¨æ€§å’Œæ¸…æ™°åº¦ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h2 id="ç±»å‹è½¬æ¢å‡½æ•°"&gt;ç±»å‹è½¬æ¢å‡½æ•°
&lt;/h2&gt;&lt;p&gt;C++ ä¸­çš„&lt;strong&gt;ç±»å‹è½¬æ¢å‡½æ•°&lt;/strong&gt;ï¼ˆType Conversion Functionï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå®ƒå…è®¸ä½ å°†&lt;strong&gt;ç±»ç±»å‹çš„å¯¹è±¡&lt;/strong&gt;éšå¼æˆ–æ˜¾å¼åœ°è½¬æ¢ä¸º&lt;strong&gt;å…¶ä»–æŒ‡å®šç±»å‹&lt;/strong&gt;ï¼ˆåŸºæœ¬ç±»å‹æˆ–å…¶ä»–ç±»ç±»å‹ï¼‰ã€‚è¿™å¢å¼ºäº†ç±»çš„äº’æ“ä½œæ€§å’Œçµæ´»æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿå¯¹æ¯”ï¼Œå¸®åŠ©ä½ ç†è§£ç±»å‹è½¬æ¢å‡½æ•°ä¸å…¶ä»–ç›¸å…³æ¦‚å¿µï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ç±»å‹è½¬æ¢å‡½æ•° (Type Conversion Function)&lt;/th&gt;
&lt;th&gt;è½¬æ¢æ„é€ å‡½æ•° (Conversion Constructor)&lt;/th&gt;
&lt;th&gt;C++é£æ ¼å¼ºåˆ¶è½¬æ¢ (static_castç­‰)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®šä¹‰ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»çš„æˆå‘˜å‡½æ•°&lt;/td&gt;
&lt;td&gt;ç±»çš„æ„é€ å‡½æ•°&lt;/td&gt;
&lt;td&gt;è¯­è¨€å†…ç½®å…³é”®å­—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½¬æ¢æ–¹å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»ç±»ç±»å‹&lt;/strong&gt;è½¬æ¢ä¸ºå…¶ä»–ç±»å‹&lt;/td&gt;
&lt;td&gt;ä»å…¶ä»–ç±»å‹&lt;strong&gt;è½¬æ¢ä¸ºç±»ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»æ„ç±»å‹é—´ï¼ˆéœ€æœ‰å…³è”ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;operator TargetType() const { ... }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ClassName(SourceType value) { ... }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;static_cast&amp;lt;TargetType&amp;gt;(expression)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éšå¼æˆ–æ˜¾å¼ï¼ˆè‹¥ä¸º &lt;code&gt;explicit&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;éšå¼æˆ–æ˜¾å¼ï¼ˆè‹¥ä¸º &lt;code&gt;explicit&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;å¿…é¡»æ˜¾å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶æƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;æºç±»&lt;/strong&gt;ä¸­å®šä¹‰&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;ç›®æ ‡ç±»&lt;/strong&gt;ä¸­å®šä¹‰&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;ä½¿ç”¨æ–¹&lt;/strong&gt;ä»£ç ä¸­æŒ‡å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç±»å‹è½¬æ¢å‡½æ•°çš„ç‰¹ç‚¹"&gt;ğŸ’¡ ç±»å‹è½¬æ¢å‡½æ•°çš„ç‰¹ç‚¹
&lt;/h3&gt;&lt;p&gt;ç±»å‹è½¬æ¢å‡½æ•°æœ‰å‡ ä¸ªéå¸¸é‡è¦çš„è¯­æ³•è§„å®šå’Œç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æˆå‘˜å‡½æ•°&lt;/strong&gt;ï¼šå®ƒå¿…é¡»æ˜¯ç±»çš„&lt;strong&gt;æˆå‘˜å‡½æ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— è¿”å›ç±»å‹&lt;/strong&gt;ï¼šåœ¨å‡½æ•°å£°æ˜ä¸­&lt;strong&gt;ä¸éœ€è¦æŒ‡å®šè¿”å›ç±»å‹&lt;/strong&gt;ï¼Œå› ä¸ºè¿”å›ç±»å‹å·²ç»ç”± &lt;code&gt;operator&lt;/code&gt;åé¢çš„ç›®æ ‡ç±»å‹æ˜ç¡®æŒ‡å‡ºäº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— å‚æ•°&lt;/strong&gt;ï¼šå®ƒ&lt;strong&gt;ä¸èƒ½æœ‰ä»»ä½•å‚æ•°&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒçš„æ“ä½œå¯¹è±¡æ˜¯å½“å‰ç±»å®ä¾‹ï¼ˆé€šè¿‡ &lt;code&gt;this&lt;/code&gt;æŒ‡é’ˆè®¿é—®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸å‡½æ•°&lt;/strong&gt;ï¼šå®ƒé€šå¸¸ä¸åº”ä¿®æ”¹å½“å‰å¯¹è±¡çš„å†…å®¹ï¼Œå› æ­¤æœ€å¥½è¢«å£°æ˜ä¸º &lt;strong&gt;&lt;code&gt;const&lt;/code&gt;&lt;/strong&gt; æˆå‘˜å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç»§æ‰¿å’Œè™šå‡½æ•°&lt;/strong&gt;ï¼šç±»å‹è½¬æ¢å‡½æ•°å¯ä»¥è¢«ç»§æ‰¿ï¼Œä¹Ÿå¯ä»¥è¢«å£°æ˜ä¸ºè™šå‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•å®šä¹‰ç±»å‹è½¬æ¢å‡½æ•°"&gt;ğŸ“ å¦‚ä½•å®šä¹‰ç±»å‹è½¬æ¢å‡½æ•°
&lt;/h3&gt;&lt;p&gt;å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class SourceClass {
public:
operator TargetType() const { // TargetType æ˜¯ä½ è¦è½¬æ¢åˆ°çš„ç›®æ ‡ç±»å‹
// ... è½¬æ¢é€»è¾‘
return data; // è¿”å›ä¸€ä¸ª TargetType ç±»å‹çš„å€¼
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä»£ç ç¤ºä¾‹"&gt;ğŸ§ª ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
class Number {
private:
int value;
public:
Number(int v) : value(v) {}
// ç±»å‹è½¬æ¢å‡½æ•°ï¼šå°† Number å¯¹è±¡è½¬æ¢ä¸º int
operator int() const {
return value;
}
// ç±»å‹è½¬æ¢å‡½æ•°ï¼šå°† Number å¯¹è±¡è½¬æ¢ä¸º doubleï¼ˆæ˜¾å¼è½¬æ¢ï¼‰
explicit operator double() const {
return static_cast&amp;lt;double&amp;gt;(value);
}
};
int main() {
Number num(42);
// éšå¼è½¬æ¢ï¼šè°ƒç”¨ operator int()
int x = num;
std::cout &amp;lt;&amp;lt; &amp;#34;Converted to int: &amp;#34; &amp;lt;&amp;lt; x &amp;lt;&amp;lt; std::endl;
// æ˜¾å¼è½¬æ¢ï¼šè°ƒç”¨ operator double() (å› ä¸ºä½¿ç”¨äº†explicitå…³é”®å­—)
double d = static_cast&amp;lt;double&amp;gt;(num);
std::cout &amp;lt;&amp;lt; &amp;#34;Converted to double: &amp;#34; &amp;lt;&amp;lt; d &amp;lt;&amp;lt; std::endl;
// åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨éšå¼è½¬æ¢
int sum = num + 10; // Number -&amp;gt; int, ç„¶å 42 + 10
std::cout &amp;lt;&amp;lt; &amp;#34;Sum: &amp;#34; &amp;lt;&amp;lt; sum &amp;lt;&amp;lt; std::endl;
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Converted to int: 42
Converted to double: 42
Sum: 52
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„è¦ç‚¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ æ³¨æ„è¦ç‚¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨éšå¼è½¬æ¢&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;éšå¼è½¬æ¢è™½ç„¶æ–¹ä¾¿ï¼Œä½†å¯èƒ½ä¼šè®©ä»£ç çš„æ„å›¾å˜å¾—ä¸æ¸…æ™°ï¼Œç”šè‡³åœ¨æŸäº›æƒ…å†µä¸‹å¯¼è‡´æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºæˆ–éš¾ä»¥å‘ç°çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨ä½ æœªå¯Ÿè§‰çš„æƒ…å†µä¸‹è°ƒç”¨è½¬æ¢å‡½æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;explicit&lt;/code&gt;å…³é”®å­—&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ C++11 ä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;explicit&lt;/code&gt;&lt;/strong&gt; å…³é”®å­—æ¥ä¿®é¥°ç±»å‹è½¬æ¢å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥&lt;strong&gt;é˜²æ­¢éšå¼è½¬æ¢&lt;/strong&gt;ï¼Œåªå…è®¸é€šè¿‡æ˜¾å¼ç±»å‹è½¬æ¢ï¼ˆå¦‚ &lt;code&gt;static_cast&lt;/code&gt;ï¼‰æ¥è°ƒç”¨å®ƒã€‚è¿™èƒ½æœ‰æ•ˆå¢åŠ ä»£ç çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;explicit operator TargetType() const { ... }
// ä½¿ç”¨æ—¶å¿…é¡»æ˜¾å¼ï¼šTargetType t = static_cast&amp;lt;TargetType&amp;gt;(myObject);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…äºŒä¹‰æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªç±»å®šä¹‰äº†å¤šä¸ªè½¬æ¢ç›®æ ‡ç±»å‹&lt;strong&gt;ç›¸è¿‘&lt;/strong&gt;çš„ç±»å‹è½¬æ¢å‡½æ•°ï¼ˆä¾‹å¦‚åŒæ—¶å­˜åœ¨ &lt;code&gt;operator int()&lt;/code&gt;å’Œ &lt;code&gt;operator double()&lt;/code&gt;ï¼‰ï¼Œåœ¨æŸäº›è¡¨è¾¾å¼ä¸­æœ‰å¯èƒ½è®©ç¼–è¯‘å™¨æ— æ³•å†³å®šä½¿ç”¨å“ªä¸€ä¸ªï¼Œä»è€Œå¼•å‘&lt;strong&gt;äºŒä¹‰æ€§é”™è¯¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class AmbiguousClass {
public:
operator int() const { return 1; }
operator double() const { return 1.5; }
};
void foo(double d) {}
void foo(int i) {}
AmbiguousClass obj;
// foo(obj); // é”™è¯¯ï¼è°ƒç”¨å…·æœ‰äºŒä¹‰æ€§
foo(static_cast&amp;lt;int&amp;gt;(obj)); // æ­£ç¡®ï¼šæ˜¾å¼æŒ‡å®š
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸è½¬æ¢æ„é€ å‡½æ•°çš„åŒºåˆ«&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç±»å‹è½¬æ¢å‡½æ•°&lt;/strong&gt;ï¼šå°†&lt;strong&gt;å½“å‰ç±»ç±»å‹&lt;/strong&gt;è½¬æ¢ä¸º&lt;strong&gt;å…¶ä»–ç±»å‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½¬æ¢æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå°†&lt;strong&gt;å…¶ä»–ç±»å‹&lt;/strong&gt;è½¬æ¢ä¸º&lt;strong&gt;å½“å‰ç±»ç±»å‹&lt;/strong&gt;ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä»¬å…±åŒå†³å®šäº†ç±»ä¸å¤–éƒ¨ç±»å‹ä¹‹é—´ç›¸äº’è½¬æ¢çš„è§„åˆ™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç±»å‹è½¬æ¢å‡½æ•°æ˜¯ C++ ä¸­å®ç°ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹è½¬æ¢çš„å¼ºå¤§å·¥å…·ä¹‹ä¸€ã€‚å®ƒå…è®¸ç±»å¯¹è±¡åœ¨å¿…è¦æ—¶è‡ªåŠ¨æˆ–å¼ºåˆ¶è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ã€‚ä½¿ç”¨æ—¶è¯·ç‰¢è®°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;operator TargetType() const&lt;/code&gt;è¯­æ³•åœ¨ç±»å†…å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ &lt;code&gt;explicit&lt;/code&gt;å…³é”®å­—&lt;/strong&gt;æ¥é¿å…å¯èƒ½å¸¦æ¥é—®é¢˜çš„éšå¼è½¬æ¢ï¼Œæé«˜ä»£ç å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;æ³¨æ„é¿å…å› å¤šä¸ªè½¬æ¢å‡½æ•°å¯èƒ½å¯¼è‡´çš„äºŒä¹‰æ€§é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒä¸è½¬æ¢æ„é€ å‡½æ•°ç›¸è¾…ç›¸æˆï¼Œå…±åŒå®šä¹‰äº†ç±»ä¸ç±»å‹ç³»ç»Ÿäº¤äº’çš„æ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ C++ ä¸­çš„ç±»å‹è½¬æ¢å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="è±å½¢ç»§æ‰¿"&gt;è±å½¢ç»§æ‰¿
&lt;/h2&gt;&lt;p&gt;è±å½¢ç»§æ‰¿æ˜¯ C++ ç­‰å¤šé‡ç»§æ‰¿è¯­è¨€ä¸­ä¸€ä¸ªç»å…¸åˆæ£˜æ‰‹çš„é—®é¢˜ã€‚å®ƒä¼šå¯¼è‡´&lt;strong&gt;æ•°æ®å†—ä½™&lt;/strong&gt;å’Œ&lt;strong&gt;è®¿é—®äºŒä¹‰æ€§&lt;/strong&gt;è¿™ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ä¼ ç»Ÿçš„è±å½¢ç»§æ‰¿æ¶æ„åŠå…¶é—®é¢˜ï¼Œä»¥åŠè™šç»§æ‰¿å¦‚ä½•ä»ç»“æ„ä¸Šæ”¹å˜è¿™ä¸€å±€é¢ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„å¯¹æ¯”ç¤ºæ„å›¾ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
subgraph A [ä¼ ç»Ÿè±å½¢ç»§æ‰¿ç»“æ„]
A1[Base&amp;lt;br&amp;gt;åŸºç±»]
B1[Derived1&amp;lt;br&amp;gt;æ´¾ç”Ÿç±»1]
B2[Derived2&amp;lt;br&amp;gt;æ´¾ç”Ÿç±»2]
C1[MostDerived&amp;lt;br&amp;gt;æœ€ç»ˆæ´¾ç”Ÿç±»]
A1 -- ç»§æ‰¿ --&amp;gt; B1
A1 -- ç»§æ‰¿ --&amp;gt; B2
B1 -- ç»§æ‰¿ --&amp;gt; C1
B2 -- ç»§æ‰¿ --&amp;gt; C1
subgraph C1_Mem[MostDerived å¯¹è±¡å†…å­˜å¸ƒå±€]
D1[Derived1 éƒ¨åˆ†&amp;lt;br&amp;gt;åŒ…å« Base å®ä¾‹ 1]
D2[Derived2 éƒ¨åˆ†&amp;lt;br&amp;gt;åŒ…å« Base å®ä¾‹ 2]
D3[MostDerived è‡ªèº«æˆå‘˜]
end
end
subgraph B [è™šç»§æ‰¿è§£å†³åç»“æ„]
A2[Base&amp;lt;br&amp;gt;åŸºç±»ï¼ˆè™šåŸºç±»ï¼‰]
B3[Derived1&amp;lt;br&amp;gt;æ´¾ç”Ÿç±»1ï¼ˆè™šç»§æ‰¿ï¼‰]
B4[Derived2&amp;lt;br&amp;gt;æ´¾ç”Ÿç±»2ï¼ˆè™šç»§æ‰¿ï¼‰]
C2[MostDerived&amp;lt;br&amp;gt;æœ€ç»ˆæ´¾ç”Ÿç±»]
A2 -- è™šç»§æ‰¿ --&amp;gt; B3
A2 -- è™šç»§æ‰¿ --&amp;gt; B4
B3 -- ç»§æ‰¿ --&amp;gt; C2
B4 -- ç»§æ‰¿ --&amp;gt; C2
subgraph C2_Mem[MostDerived å¯¹è±¡å†…å­˜å¸ƒå±€ï¼ˆè™šç»§æ‰¿ï¼‰]
D4[Derived1 éƒ¨åˆ†]
D5[Derived2 éƒ¨åˆ†]
D6[MostDerived è‡ªèº«æˆå‘˜]
D7[å…±äº«çš„ Base å®ä¾‹]
end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¼ ç»Ÿçš„è±å½¢ç»§æ‰¿ä¼šå¯¼è‡´æœ€ç»ˆæ´¾ç”Ÿç±»(&lt;code&gt;MostDerived&lt;/code&gt;)ä¸­åŒ…å«ä¸¤ä»½åŸºç±»(&lt;code&gt;Base&lt;/code&gt;)çš„å®ä¾‹ï¼Œä»è€Œå¼•å‘ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;h3 id="-1-æ•°æ®å†—ä½™-data-redundancy"&gt;âš ï¸ 1. æ•°æ®å†—ä½™ (Data Redundancy)
&lt;/h3&gt;&lt;p&gt;å¦‚ä¼ ç»Ÿè±å½¢ç»§æ‰¿ç»“æ„æ‰€ç¤ºï¼Œæœ€ç»ˆæ´¾ç”Ÿç±» (&lt;code&gt;MostDerived&lt;/code&gt;) ä¼šé€šè¿‡ä¸¤æ¡ä¸åŒçš„ç»§æ‰¿è·¯å¾„ï¼ˆç»ç”± &lt;code&gt;Derived1&lt;/code&gt;å’Œ &lt;code&gt;Derived2&lt;/code&gt;ï¼‰ç»§æ‰¿åŸºç±» (&lt;code&gt;Base&lt;/code&gt;)ã€‚è¿™æ„å‘³ç€ &lt;code&gt;MostDerived&lt;/code&gt;ç±»çš„å¯¹è±¡å†…éƒ¨ä¼š&lt;strong&gt;åŒ…å«ä¸¤ä»½ &lt;code&gt;Base&lt;/code&gt;ç±»çš„æˆå‘˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œè‹¥ &lt;code&gt;Base&lt;/code&gt;ç±»æœ‰ä¸€ä¸ª &lt;code&gt;int data;&lt;/code&gt;æˆå‘˜ï¼Œé‚£ä¹ˆä¸€ä¸ª &lt;code&gt;MostDerived&lt;/code&gt;å¯¹è±¡é‡Œå°±ä¼šæœ‰ä¸¤ä¸ª &lt;code&gt;data&lt;/code&gt;å˜é‡ã€‚è¿™ä¸ä»…ä»…æ˜¯å†…å­˜æµªè´¹çš„é—®é¢˜ï¼Œæ›´ä¸¥é‡çš„æ˜¯é€»è¾‘ä¸Šçš„æ··ä¹±ï¼šä½ å®é™…ä¸Šå¹¶ä¸éœ€è¦ä¸¤ä»½ç›¸åŒçš„æ•°æ®ï¼Œä½†ç»§æ‰¿æœºåˆ¶å´å¯¼è‡´äº†è¿™ç§å†—ä½™ã€‚&lt;/p&gt;
&lt;h3 id="-2-è®¿é—®çš„äºŒä¹‰æ€§-ambiguity"&gt;â“ 2. è®¿é—®çš„äºŒä¹‰æ€§ (Ambiguity)
&lt;/h3&gt;&lt;p&gt;å½“ä½ æƒ³åœ¨ &lt;code&gt;MostDerived&lt;/code&gt;å¯¹è±¡ä¸­è®¿é—® &lt;code&gt;Base&lt;/code&gt;çš„æˆå‘˜ï¼ˆä¾‹å¦‚ &lt;code&gt;data&lt;/code&gt;ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šä½ å¸Œæœ›ä½¿ç”¨å“ªä¸€æ¡ç»§æ‰¿è·¯å¾„ä¸Šçš„ &lt;code&gt;Base&lt;/code&gt;æˆå‘˜â€”â€”æ˜¯æ¥è‡ª &lt;code&gt;Derived1&lt;/code&gt;çš„è¿˜æ˜¯æ¥è‡ª &lt;code&gt;Derived2&lt;/code&gt;çš„ï¼Ÿ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;MostDerived obj;
obj.data = 10; // ç¼–è¯‘é”™è¯¯ï¼šå¯¹æˆå‘˜â€˜dataâ€™çš„è¯·æ±‚ä¸æ˜ç¡®
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°±å¯¼è‡´äº†&lt;strong&gt;ç¼–è¯‘é”™è¯¯&lt;/strong&gt;ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªäºŒä¹‰æ€§ï¼Œä½ ä¸å¾—ä¸é€šè¿‡ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦ &lt;code&gt;::&lt;/code&gt;æ¥æ˜¾å¼æŒ‡å®šè·¯å¾„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;obj.Derived1::data = 10; // æŒ‡å®šé€šè¿‡ Derived1 ç»§æ‰¿æ¥çš„ data
obj.Derived2::data = 20; // æŒ‡å®šé€šè¿‡ Derived2 ç»§æ‰¿æ¥çš„ data
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†è¿™ä¸ä»…è®©ä»£ç å˜å¾—å†—é•¿å’Œéš¾ä»¥ç»´æŠ¤ï¼Œè€Œä¸”ä»é€»è¾‘ä¸Šçœ‹ï¼Œç»™ä¸¤ä¸ªæœ¬è´¨ä¸Šåº”è¯¥ç›¸åŒçš„ &lt;code&gt;data&lt;/code&gt;æˆå‘˜åˆ†åˆ«èµ‹ä¸åŒçš„å€¼ï¼Œé€šå¸¸ä¹Ÿè¿èƒŒäº†ä¸šåŠ¡é€»è¾‘çš„åˆè¡·ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦çš„è§£å†³æ–¹æ¡ˆè™šç»§æ‰¿-virtual-inheritance"&gt;ğŸ’¡ ä¸»è¦çš„è§£å†³æ–¹æ¡ˆï¼šè™šç»§æ‰¿ (Virtual Inheritance)
&lt;/h3&gt;&lt;p&gt;åœ¨ C++ ä¸­ï¼Œè§£å†³è±å½¢ç»§æ‰¿é—®é¢˜çš„æ ‡å‡†æ–¹æ³•æ˜¯ä½¿ç”¨&lt;strong&gt;è™šç»§æ‰¿ (Virtual Inheritance)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åšæ³•&lt;/strong&gt;ï¼šåœ¨ä¸­é—´æ´¾ç”Ÿç±»ï¼ˆ&lt;code&gt;Derived1&lt;/code&gt;å’Œ &lt;code&gt;Derived2&lt;/code&gt;ï¼‰ç»§æ‰¿åŸºç±»ï¼ˆ&lt;code&gt;Base&lt;/code&gt;ï¼‰æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;virtual&lt;/code&gt;å…³é”®å­—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Derived1 : virtual public Base { /* ... */ }; // è™šç»§æ‰¿
class Derived2 : virtual public Base { /* ... */ }; // è™šç»§æ‰¿
class MostDerived : public Derived1, public Derived2 { /* ... */ };
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•ˆæœ&lt;/strong&gt;ï¼šå¦‚è™šç»§æ‰¿è§£å†³åçš„ç»“æ„æ‰€ç¤ºï¼Œ&lt;strong&gt;è™šç»§æ‰¿ç¡®ä¿äº†åœ¨æœ€ç»ˆçš„æ´¾ç”Ÿç±» &lt;code&gt;MostDerived&lt;/code&gt;ä¸­ï¼Œæ— è®ºåŸºç±» &lt;code&gt;Base&lt;/code&gt;åœ¨ç»§æ‰¿å±‚æ¬¡ä¸­å‡ºç°å¤šå°‘æ¬¡ï¼Œéƒ½åªä¼šåŒ…å«å®ƒçš„ä¸€ä¸ªå®ä¾‹&lt;/strong&gt;ã€‚&lt;code&gt;Derived1&lt;/code&gt;å’Œ &lt;code&gt;Derived2&lt;/code&gt;ä¼šå…±äº«è¿™å”¯ä¸€çš„åŸºç¡€å®ä¾‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ä»·ä¸æ³¨æ„&lt;/strong&gt;ï¼šè™šç»§æ‰¿é€šå¸¸é€šè¿‡&lt;strong&gt;è™šåŸºç±»è¡¨æŒ‡é’ˆ&lt;/strong&gt;æ¥å®ç°ï¼Œè¿™ä¼šå¸¦æ¥å°‘é‡çš„å†…å­˜å¼€é”€ï¼ˆå­˜å‚¨æŒ‡é’ˆï¼‰å’Œé—´æ¥è®¿é—®çš„å¼€é”€ï¼ˆé€šè¿‡æŒ‡é’ˆæ‰¾åˆ°å”¯ä¸€çš„åŸºç±»å®ä¾‹ï¼‰ã€‚å¹¶ä¸”ï¼Œ&lt;strong&gt;æœ€åº•å±‚çš„æ´¾ç”Ÿç±»ï¼ˆå¦‚ &lt;code&gt;MostDerived&lt;/code&gt;ï¼‰éœ€è¦è´Ÿè´£ç›´æ¥åˆå§‹åŒ–è™šåŸºç±»&lt;/strong&gt;ï¼ˆ&lt;code&gt;Base&lt;/code&gt;ï¼‰ï¼Œå³ä½¿ &lt;code&gt;Base&lt;/code&gt;å¹¶ä¸æ˜¯å®ƒçš„ç›´æ¥çˆ¶ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¼–ç¨‹å¯ç¤º"&gt;ğŸ§  ç¼–ç¨‹å¯ç¤º
&lt;/h3&gt;&lt;p&gt;è±å½¢ç»§æ‰¿åŠå…¶é—®é¢˜ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆè®¸å¤šç°ä»£ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ &lt;strong&gt;Java&lt;/strong&gt;ã€&lt;strong&gt;C#&lt;/strong&gt;ï¼‰&lt;strong&gt;åˆ»æ„ä¸æ”¯æŒç±»çš„å¤šé‡ç»§æ‰¿&lt;/strong&gt;ï¼Œè€Œåªå…è®¸å®ç°å¤šä¸ªæ¥å£ï¼ˆInterfaceï¼‰ã€‚æ¥å£é€šå¸¸åªå®šä¹‰è¡Œä¸ºå¥‘çº¦è€Œä¸åŒ…å«çŠ¶æ€ï¼ˆæ•°æ®æˆå‘˜ï¼‰ï¼Œä»è€Œä»æ ¹æºä¸Šé¿å…äº†æ•°æ®å†—ä½™å’ŒäºŒä¹‰æ€§çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ C++ å¼€å‘ä¸­ï¼Œä¸€ä¸ªè‰¯å¥½çš„å®è·µæ˜¯ï¼š&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ç»„åˆï¼ˆCompositionï¼‰è€Œä¸æ˜¯ç»§æ‰¿ï¼ˆå°¤å…¶æ˜¯å¤šé‡ç»§æ‰¿ï¼‰æ¥æ„å»ºå¤æ‚å¯¹è±¡&lt;/strong&gt;ã€‚å¦‚æœç¡®å®éœ€è¦å¤šé‡ç»§æ‰¿ï¼Œå¹¶ä¸”é‡åˆ°äº†è±å½¢ç»§æ‰¿é—®é¢˜ï¼Œåº”è°¨æ…ä½¿ç”¨è™šç»§æ‰¿ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šçš„è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£è±å½¢ç»§æ‰¿çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id="è™šç»§æ‰¿"&gt;è™šç»§æ‰¿
&lt;/h2&gt;&lt;p&gt;C++ ä¸­çš„ &lt;strong&gt;è™šç»§æ‰¿&lt;/strong&gt;ï¼ˆVirtual Inheritanceï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»§æ‰¿æœºåˆ¶ï¼Œä¸»è¦ç”¨äºè§£å†³å¤šé‡ç»§æ‰¿ä¸­çš„ &lt;strong&gt;â€œè±å½¢ç»§æ‰¿â€&lt;/strong&gt;ï¼ˆDiamond Inheritanceï¼‰é—®é¢˜ï¼Œç¡®ä¿åœ¨å¤æ‚çš„ç»§æ‰¿ä½“ç³»ç»“æ„ä¸­ï¼Œå…¬å…±åŸºç±»ï¼ˆè™šåŸºç±»ï¼‰çš„å­å¯¹è±¡åœ¨æœ€ç»ˆæ´¾ç”Ÿç±»ä¸­åªå­˜åœ¨ä¸€ä»½å‰¯æœ¬ï¼Œä»è€Œé¿å…æ•°æ®å†—ä½™å’Œæˆå‘˜è®¿é—®çš„äºŒä¹‰æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£æè™šç»§æ‰¿çš„å„ä¸ªæ–¹é¢ã€‚&lt;/p&gt;
&lt;h1 id="-c-è™šç»§æ‰¿è¯¦è§£"&gt;ğŸ§© C++ è™šç»§æ‰¿è¯¦è§£
&lt;/h1&gt;&lt;h2 id="-åº”å¯¹è±å½¢ç»§æ‰¿é—®é¢˜çš„å…³é”®æœºåˆ¶"&gt;â†³ åº”å¯¹è±å½¢ç»§æ‰¿é—®é¢˜çš„å…³é”®æœºåˆ¶
&lt;/h2&gt;&lt;h3 id="1-ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿é—®é¢˜"&gt;1. ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿é—®é¢˜ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è±å½¢ç»§æ‰¿é—®é¢˜æ˜¯å¤šé‡ç»§æ‰¿ä¸­ä¸€ä¸ªç»å…¸ä¸”æ£˜æ‰‹çš„åœºæ™¯ã€‚å®ƒå‘ç”Ÿåœ¨ä»¥ä¸‹ç»§æ‰¿ç»“æ„ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªæ´¾ç”Ÿç±»åŒæ—¶ç»§æ‰¿è‡ªä¸¤ä¸ªæˆ–å¤šä¸ªåŸºç±»ã€‚&lt;/li&gt;
&lt;li&gt;è€Œè¿™äº›åŸºç±»åˆéƒ½ç»§æ‰¿è‡ªåŒä¸€ä¸ªå…±åŒçš„åŸºç±»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å°†å¯¼è‡´æœ€ç»ˆçš„æ´¾ç”Ÿç±»ä¸­åŒ…å«å¤šä»½å…±åŒåŸºç±»çš„å­å¯¹è±¡ï¼Œå¼•å‘&lt;strong&gt;æ•°æ®å†—ä½™&lt;/strong&gt;å’Œ&lt;strong&gt;è®¿é—®äºŒä¹‰æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæœ‰ä»¥ä¸‹ç±»ç»“æ„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal { public: int age; };
class Mammal : public Animal {};
class Bird : public Animal {};
class Bat : public Mammal, public Bird {};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€ä¸ª &lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡å†…éƒ¨å°†åŒ…å«&lt;strong&gt;ä¸¤ä»½&lt;/strong&gt; &lt;code&gt;Animal&lt;/code&gt;å­å¯¹è±¡ï¼ˆåˆ†åˆ«æ¥è‡ª &lt;code&gt;Mammal&lt;/code&gt;å’Œ &lt;code&gt;Bird&lt;/code&gt;çš„ç»§æ‰¿è·¯å¾„ï¼‰ã€‚è¿™ä¼šå¯¼è‡´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å†—ä½™&lt;/strong&gt;ï¼š&lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡ä¸­æœ‰ä¸¤ä¸ª &lt;code&gt;age&lt;/code&gt;æˆå‘˜ï¼Œæµªè´¹å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®äºŒä¹‰æ€§&lt;/strong&gt;ï¼šç›´æ¥è°ƒç”¨ &lt;code&gt;bat.age&lt;/code&gt;æˆ– &lt;code&gt;bat.functionInAnimal()&lt;/code&gt;æ—¶ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šåº”ä½¿ç”¨å“ªä¸€æ¡ç»§æ‰¿è·¯å¾„ä¸Šçš„ &lt;code&gt;Animal&lt;/code&gt;æˆå‘˜ï¼Œä»è€Œå¼•å‘ç¼–è¯‘é”™è¯¯ã€‚å¿…é¡»ä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æ¥æ˜ç¡®æŒ‡å®šï¼Œå¦‚ &lt;code&gt;bat.Mammal::age&lt;/code&gt;æˆ– &lt;code&gt;bat.Bird::age&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-è™šç»§æ‰¿å¦‚ä½•è§£å†³è±å½¢é—®é¢˜"&gt;2. è™šç»§æ‰¿å¦‚ä½•è§£å†³è±å½¢é—®é¢˜ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è™šç»§æ‰¿é€šè¿‡ &lt;code&gt;virtual&lt;/code&gt;å…³é”®å­—å£°æ˜ã€‚&lt;strong&gt;è®©ä¸­é—´æ´¾ç”Ÿç±»ï¼ˆå¦‚ &lt;code&gt;Mammal&lt;/code&gt;å’Œ &lt;code&gt;Bird&lt;/code&gt;ï¼‰è™šæ‹Ÿç»§æ‰¿è‡ªå…±åŒåŸºç±»ï¼ˆå¦‚ &lt;code&gt;Animal&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼Œä»è€Œé€šçŸ¥ç¼–è¯‘å™¨ï¼šå¸Œæœ›è¿™ä¸ªåŸºç±»åœ¨æœ€ç»ˆçš„æ´¾ç”Ÿç±»ä¸­è¢«å…±äº«ã€‚&lt;/p&gt;
&lt;p&gt;å°†ä¸Šè¿°ä¾‹å­æ”¹ä¸ºè™šç»§æ‰¿ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal { public: int age; };
class Mammal : virtual public Animal {}; // è™šç»§æ‰¿
class Bird : virtual public Animal {}; // è™šç»§æ‰¿
class Bat : public Mammal, public Bird {};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç°åœ¨ï¼Œ&lt;strong&gt;&lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡ä¸­åªåŒ…å«ä¸€ä»½ &lt;code&gt;Animal&lt;/code&gt;å­å¯¹è±¡çš„å‰¯æœ¬&lt;/strong&gt;ã€‚æ‰€æœ‰å¯¹ &lt;code&gt;Animal&lt;/code&gt;æˆå‘˜çš„è®¿é—®éƒ½æŒ‡å‘è¿™åŒä¸€ä¸ªå®ä¾‹ï¼Œä»è€Œå½»åº•æ¶ˆé™¤äº†æ•°æ®å†—ä½™å’Œè®¿é—®çš„äºŒä¹‰æ€§ã€‚&lt;/p&gt;
&lt;h3 id="3-è™šç»§æ‰¿çš„å®ç°åŸç†ç¼–è¯‘å™¨å¹•ååšçš„äº‹"&gt;3. è™šç»§æ‰¿çš„å®ç°åŸç†ï¼ˆç¼–è¯‘å™¨å¹•ååšçš„äº‹ï¼‰
&lt;/h3&gt;&lt;p&gt;è™šç»§æ‰¿çš„å®ç°é€šå¸¸ä¾èµ–äº &lt;strong&gt;è™šåŸºç±»è¡¨æŒ‡é’ˆï¼ˆvbptr&lt;/strong&gt;ï¼‰å’Œ &lt;strong&gt;è™šåŸºç±»è¡¨ï¼ˆvbtableï¼‰&lt;/strong&gt; çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è™šåŸºç±»æŒ‡é’ˆï¼ˆvbptrï¼‰&lt;/strong&gt;ï¼šç¼–è¯‘å™¨ä¼šä¸ºæ¯ä¸ªè™šç»§æ‰¿çš„æ´¾ç”Ÿç±»å¯¹è±¡æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªéšè—çš„ &lt;strong&gt;è™šåŸºç±»æŒ‡é’ˆï¼ˆvbptrï¼‰&lt;/strong&gt;ã€‚è¿™äº›æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ª &lt;strong&gt;è™šåŸºç±»è¡¨ï¼ˆvbtableï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šåŸºç±»è¡¨ï¼ˆvbtableï¼‰&lt;/strong&gt;ï¼šè¯¥è¡¨ä¸­å­˜å‚¨äº†&lt;strong&gt;è™šåŸºç±»å­å¯¹è±¡ç›¸å¯¹äºå½“å‰å¯¹è±¡èµ·å§‹åœ°å€çš„åç§»é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¿é—®å…±äº«æˆå‘˜&lt;/strong&gt;ï¼šå½“é€šè¿‡ä¸€ä¸ªå¯èƒ½ä¸ºè™šç»§æ‰¿çš„è·¯å¾„è®¿é—®åŸºç±»æˆå‘˜æ—¶ï¼Œä»£ç ä¼šé€šè¿‡å¯¹è±¡çš„ vbptr æŸ¥æ‰¾ vbtableï¼Œè·å¾—åç§»é‡ï¼Œç„¶åè®¡ç®—å‡ºè™šåŸºç±»å­å¯¹è±¡çš„å®é™…åœ°å€ï¼Œä»è€Œè¿›è¡Œè®¿é—®ã€‚è¿™æ˜¯ä¸€ä¸ªé—´æ¥å¯»å€çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸€ä¸ª &lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡çš„å†…å­˜å¸ƒå±€å¯èƒ½å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;+-------------------+
| Mammal éƒ¨åˆ† |
| vbptr_Mammal | --&amp;gt; æŒ‡å‘Mammalçš„è™šåŸºç±»è¡¨ï¼ˆè®°å½•Animalçš„åç§»ï¼‰
+-------------------+
| Bird éƒ¨åˆ† |
| vbptr_Bird | --&amp;gt; æŒ‡å‘Birdçš„è™šåŸºç±»è¡¨ï¼ˆè®°å½•Animalçš„åç§»ï¼‰
+-------------------+
| Animal éƒ¨åˆ† | &amp;lt;-- å…±äº«çš„å”¯ä¸€å®ä¾‹
| age |
+-------------------+
| Bat è‡ªèº«æˆå‘˜ï¼ˆå¦‚æœæœ‰ï¼‰|
+-------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æœºåˆ¶ç¡®ä¿äº†æ— è®ºé€šè¿‡ &lt;code&gt;Mammal&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;Bird&lt;/code&gt;çš„è·¯å¾„å»è®¿é—® &lt;code&gt;Animal&lt;/code&gt;çš„æˆå‘˜ï¼Œæœ€ç»ˆéƒ½èƒ½å®šä½åˆ°åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚&lt;/p&gt;
&lt;h3 id="4-è™šç»§æ‰¿å¯¹æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºçš„å½±å“"&gt;4. è™šç»§æ‰¿å¯¹æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºçš„å½±å“
&lt;/h3&gt;&lt;p&gt;è™šç»§æ‰¿&lt;strong&gt;æ”¹å˜äº†æ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåº&lt;/strong&gt;ï¼Œæœ‰ä¸€æ¡éå¸¸é‡è¦çš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è™šåŸºç±»çš„æ„é€ å‡½æ•°ç”±æœ€åº•å±‚æ´¾ç”Ÿç±»ï¼ˆMost Derived Classï¼‰ç›´æ¥è°ƒç”¨ï¼Œè€Œéç”±ä¸­é—´æ´¾ç”Ÿç±»è°ƒç”¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ™®é€šç»§æ‰¿ä¸­ï¼Œæ¯ä¸ªæ´¾ç”Ÿç±»è´Ÿè´£è°ƒç”¨å…¶ç›´æ¥åŸºç±»çš„æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è™šç»§æ‰¿ä¸­ï¼Œ&lt;strong&gt;æ‰€æœ‰è™šåŸºç±»çš„æ„é€ å‡½æ•°éƒ½ä¼šæœ€å…ˆè¢«è°ƒç”¨&lt;/strong&gt;ï¼ˆä¼˜å…ˆäºä»»ä½•éè™šåŸºç±»ï¼‰ï¼Œå¹¶ä¸”æ˜¯ç”±æœ€ç»ˆåˆ›å»ºå¯¹è±¡çš„é‚£ä¸ªæ´¾ç”Ÿç±»ç›´æ¥è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ä¸­é—´æ´¾ç”Ÿç±»ï¼ˆå¦‚ &lt;code&gt;Mammal&lt;/code&gt;æˆ– &lt;code&gt;Bird&lt;/code&gt;ï¼‰çš„æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä¸­å¯¹äºè™šåŸºç±»ï¼ˆ&lt;code&gt;Animal&lt;/code&gt;ï¼‰çš„æ„é€ å‡½æ•°è°ƒç”¨ä¼šè¢«ç¼–è¯‘å™¨å¿½ç•¥ï¼Œä»¥é¿å…å¤šæ¬¡åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class Animal {
public:
Animal(int a) : age(a) {}
int age;
};
class Mammal : virtual public Animal {
public:
Mammal() : Animal(10) {} // è¿™é‡Œçš„ Animal(10) åœ¨åˆ›å»º Bat æ—¶ä¼šè¢«å¿½ç•¥
};
class Bird : virtual public Animal {
public:
Bird() : Animal(20) {} // è¿™é‡Œçš„ Animal(20) åœ¨åˆ›å»º Bat æ—¶ä¹Ÿä¼šè¢«å¿½ç•¥
};
class Bat : public Mammal, public Bird {
public:
Bat(int age) : Animal(age) {} // å¿…é¡»ç”± Bat ç›´æ¥åˆå§‹åŒ–è™šåŸºç±» Animal
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“åˆ›å»º &lt;code&gt;Bat&lt;/code&gt;å¯¹è±¡æ—¶ï¼Œæ„é€ é¡ºåºæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Animal&lt;/code&gt;çš„æ„é€ å‡½æ•°ï¼ˆç”± &lt;code&gt;Bat&lt;/code&gt;ç›´æ¥è°ƒç”¨ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Mammal&lt;/code&gt;çš„æ„é€ å‡½æ•°ï¼ˆä½†å…¶å¯¹ &lt;code&gt;Animal&lt;/code&gt;çš„åˆå§‹åŒ–è¢«å¿½ç•¥ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Bird&lt;/code&gt;çš„æ„é€ å‡½æ•°ï¼ˆä½†å…¶å¯¹ &lt;code&gt;Animal&lt;/code&gt;çš„åˆå§‹åŒ–è¢«å¿½ç•¥ï¼‰&lt;/li&gt;
&lt;li&gt;æœ€åæ˜¯ &lt;code&gt;Bat&lt;/code&gt;è‡ªèº«çš„æ„é€ å‡½æ•°ä½“&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœ &lt;code&gt;Animal&lt;/code&gt;æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼Œè€Œ &lt;code&gt;Bat&lt;/code&gt;åˆæ²¡æœ‰æ˜¾å¼è°ƒç”¨ &lt;code&gt;Animal&lt;/code&gt;çš„æ„é€ å‡½æ•°ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id="5-è™šç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ä¸ä½¿ç”¨å»ºè®®"&gt;5. è™šç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ä¸ä½¿ç”¨å»ºè®®
&lt;/h3&gt;&lt;h4 id="-ä¼˜ç‚¹"&gt;âœ… ä¼˜ç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ ¸å¿ƒé—®é¢˜&lt;/strong&gt;ï¼šä¼˜é›…åœ°è§£å†³äº†è±å½¢ç»§æ‰¿å¸¦æ¥çš„æ•°æ®å†—ä½™å’ŒäºŒä¹‰æ€§é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚çœç©ºé—´&lt;/strong&gt;ï¼šå½“å…¬å…±åŸºç±»ä½“ç§¯è¾ƒå¤§ä¸”ç»§æ‰¿è·¯å¾„å¾ˆå¤šæ—¶ï¼Œå…±äº«ä¸€ä»½å®ä¾‹å¯ä»¥æ˜¾è‘—èŠ‚çœå†…å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-ç¼ºç‚¹ä¸å¼€é”€"&gt;âŒ ç¼ºç‚¹ä¸å¼€é”€
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šæ¯æ¬¡è®¿é—®è™šåŸºç±»çš„æˆå‘˜éƒ½éœ€è¦é€šè¿‡è™šåŸºç±»æŒ‡é’ˆå’Œè™šåŸºç±»è¡¨è¿›è¡Œé—´æ¥å¯»å€ï¼Œæ¯”ç›´æ¥è®¿é—®å¤šä¸€æ¬¡æŒ‡é’ˆè·³è½¬ï¼Œæœ‰é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;ï¼šæ¯ä¸ªè™šç»§æ‰¿çš„æ´¾ç”Ÿç±»å¯¹è±¡éƒ½éœ€è¦å­˜å‚¨è‡³å°‘ä¸€ä¸ªé¢å¤–çš„è™šåŸºç±»æŒ‡é’ˆï¼ˆvbptrï¼‰ï¼Œå¢åŠ äº†å¯¹è±¡çš„å†…å­˜å ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚æ€§&lt;/strong&gt;ï¼šå†…å­˜å¸ƒå±€å˜å¾—æ›´å¤æ‚ï¼Œç»™è°ƒè¯•å’Œæ·±å…¥ç†è§£å¸¦æ¥ä¸€å®šå›°éš¾ã€‚æ„é€ é¡ºåºçš„è§„åˆ™ä¹Ÿæ›´å®¹æ˜“è®©äººæ··æ·†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-ä½¿ç”¨å»ºè®®"&gt;ğŸ’¡ ä½¿ç”¨å»ºè®®
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨&lt;/strong&gt;ï¼š&lt;strong&gt;ä¸è¦æ»¥ç”¨è™šç»§æ‰¿&lt;/strong&gt;ã€‚ä»…åœ¨æ˜ç¡®é¢ä¸´è±å½¢ç»§æ‰¿é—®é¢˜ä¸”ç¡®å®éœ€è¦å…±äº«åŸºç±»çŠ¶æ€æ—¶æ‰ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ç»„åˆ&lt;/strong&gt;ï¼šåœ¨è®¾è®¡ç±»ä½“ç³»æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨&lt;strong&gt;ç»„åˆï¼ˆCompositionï¼‰&lt;/strong&gt;ï¼ˆå³å°†ä¸€ä¸ªç±»ä½œä¸ºå¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡ï¼‰è€Œä¸æ˜¯å¤šé‡ç»§æ‰¿æ¥å¤ç”¨ä»£ç ï¼Œè¿™é€šå¸¸èƒ½å¸¦æ¥æ›´æ¸…æ™°ã€æ›´çµæ´»çš„è®¾è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£ç»§æ‰¿&lt;/strong&gt;ï¼šè™šç»§æ‰¿å¸¸ç”¨äº&lt;strong&gt;æ¥å£ç±»&lt;/strong&gt;ï¼ˆå³åªåŒ…å«çº¯è™šå‡½æ•°çš„æŠ½è±¡ç±»ï¼‰ã€‚å› ä¸ºæ¥å£é€šå¸¸æ²¡æœ‰æ•°æ®æˆå‘˜ï¼Œä¸»è¦ç›®çš„æ˜¯å®ç°å¤šæ€ï¼Œæ­¤æ—¶ä½¿ç”¨è™šç»§æ‰¿å¯ä»¥é¿å…è±å½¢ç»§æ‰¿å¸¦æ¥çš„äºŒä¹‰æ€§ï¼Œè€Œåˆä¸ä¼šæœ‰æ•°æ®å†—ä½™å’Œå¤ªå¤§çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="6-ä»£ç ç¤ºä¾‹"&gt;6. ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å±•ç¤ºäº†è™šç»§æ‰¿å¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
class Animal {
public:
Animal(int a) : age(a) {
std::cout &amp;lt;&amp;lt; &amp;#34;Animal constructed with age: &amp;#34; &amp;lt;&amp;lt; age &amp;lt;&amp;lt; std::endl;
}
void breathe() {
std::cout &amp;lt;&amp;lt; &amp;#34;Animal is breathing...\n&amp;#34;;
}
int age;
};
class Mammal : virtual public Animal { // è™šç»§æ‰¿
public:
Mammal() : Animal(10) { // æ­¤åˆå§‹åŒ–åœ¨æ„å»ºæœ€ç»ˆå¯¹è±¡æ—¶å¯èƒ½è¢«å¿½ç•¥
std::cout &amp;lt;&amp;lt; &amp;#34;Mammal constructed\n&amp;#34;;
}
};
class Bird : virtual public Animal { // è™šç»§æ‰¿
public:
Bird() : Animal(20) { // æ­¤åˆå§‹åŒ–åœ¨æ„å»ºæœ€ç»ˆå¯¹è±¡æ—¶å¯èƒ½è¢«å¿½ç•¥
std::cout &amp;lt;&amp;lt; &amp;#34;Bird constructed\n&amp;#34;;
}
};
class Bat : public Mammal, public Bird {
public:
Bat(int a) : Animal(a) { // å¿…é¡»ç”±æœ€åº•å±‚æ´¾ç”Ÿç±»ç›´æ¥åˆå§‹åŒ–è™šåŸºç±»
std::cout &amp;lt;&amp;lt; &amp;#34;Bat constructed\n&amp;#34;;
}
};
int main() {
Bat bat(5); // è¾“å‡ºæ„é€ é¡ºåº
std::cout &amp;lt;&amp;lt; &amp;#34;\nBat&amp;#39;s age is: &amp;#34; &amp;lt;&amp;lt; bat.age &amp;lt;&amp;lt; std::endl; // è®¿é—®æ— äºŒä¹‰æ€§
bat.breathe(); // è°ƒç”¨æ— äºŒä¹‰æ€§
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Animal constructed with age: 5
Mammal constructed
Bird constructed
Bat constructed
Bat&amp;#39;s age is: 5
Animal is breathing...
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="7-è™šç»§æ‰¿-vs-æ™®é€šç»§æ‰¿"&gt;7. è™šç»§æ‰¿ vs. æ™®é€šç»§æ‰¿
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æ™®é€šç»§æ‰¿&lt;/th&gt;
&lt;th&gt;è™šç»§æ‰¿&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»§æ‰¿è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;class B : public A {}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;class B : virtual public A {}&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‰¯æœ¬æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šä¸ªå‰¯æœ¬ï¼ˆå¯èƒ½æ•°æ®å†—ä½™ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•ä¸ªå…±äº«å‰¯æœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®äºŒä¹‰æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½å­˜åœ¨ï¼ˆéœ€ä½œç”¨åŸŸè§£æï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— &lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¸ƒå±€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹ç®€å•&lt;/td&gt;
&lt;td&gt;å¤æ‚ï¼ˆå«è™šåŸºç±»æŒ‡é’ˆ/è¡¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„é€ é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±ç›´æ¥æ´¾ç”Ÿç±»åˆå§‹åŒ–&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç”±æœ€åº•å±‚æ´¾ç”Ÿç±»ç›´æ¥åˆå§‹åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€èˆ¬çš„&amp;quot;is-a&amp;quot;å…³ç³»ï¼Œå•ç»§æ‰¿&lt;/td&gt;
&lt;td&gt;è§£å†³è±å½¢ç»§æ‰¿é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="æ€»ç»“"&gt;æ€»ç»“
&lt;/h3&gt;&lt;p&gt;C++ ä¸­çš„è™šç»§æ‰¿æ˜¯ä¸€ç§å¼ºå¤§çš„å·¥å…·ï¼Œä¸“é—¨ç”¨äºè§£å†³å¤šé‡ç»§æ‰¿ä¸­çš„è±å½¢é—®é¢˜ã€‚å®ƒé€šè¿‡å…±äº«å…¬å…±åŸºç±»çš„å®ä¾‹ï¼Œç¡®ä¿äº†å†…å­˜ä¸­åªæœ‰ä¸€ä»½å‰¯æœ¬ï¼Œæ¶ˆé™¤äº†æ•°æ®å†—ä½™å’Œè®¿é—®äºŒä¹‰æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œè¿™ç§å¼ºå¤§åŠŸèƒ½ä¹Ÿå¸¦æ¥äº†é¢å¤–çš„å¤æ‚æ€§å’Œæ€§èƒ½å¼€é”€ï¼ŒåŒ…æ‹¬é—´æ¥å¯»å€å’Œå†…å­˜ä¸­çš„è™šåŸºç±»æŒ‡é’ˆå¼€é”€ã€‚å› æ­¤ï¼Œåœ¨å®é™…å¼€å‘ä¸­åº”è°¨æ…ä½¿ç”¨è™šç»§æ‰¿ï¼Œä»”ç»†è¯„ä¼°å…¶å¿…è¦æ€§ï¼Œå¹¶ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ç»„åˆç­‰æ›¿ä»£è®¾è®¡æ¨¡å¼ã€‚å½“ä½ ç¡®å®éœ€è¦è®©å¤šä¸ªæ´¾ç”Ÿç±»å…±äº«ä¸€ä¸ªå…±åŒåŸºç±»çš„å”¯ä¸€å®ä¾‹æ—¶ï¼Œè™šç»§æ‰¿æ‰æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Design Pattern</title><link>https://dyhes.github.io/p/nowcoderdesign-pattern/</link><pubDate>Tue, 09 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderdesign-pattern/</guid><description>&lt;h2 id="è®¾è®¡æ¨¡å¼"&gt;è®¾è®¡æ¨¡å¼
&lt;/h2&gt;&lt;p&gt;â€œè®¾è®¡æ¨¡å¼ä¸€èˆ¬ç”¨æ¥è§£å†³åŒä¸€é—®é¢˜çš„ä¸åŒè¡¨ç›¸â€ è¿™å¥è¯ç²¾å¦™åœ°æ¦‚æ‹¬äº†è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼å’Œåº”ç”¨é€»è¾‘ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è§£é‡Šè¿™å¥è¯çš„å«ä¹‰ï¼Œå¹¶æ¢è®¨å…¶èƒŒåçš„æ€æƒ³ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ€æƒ³è§£è¯»"&gt;ğŸ§  æ ¸å¿ƒæ€æƒ³è§£è¯»
&lt;/h3&gt;&lt;p&gt;è¿™å¥è¯çš„å…³é”®åœ¨äºç†è§£ &lt;strong&gt;â€œåŒä¸€é—®é¢˜â€&lt;/strong&gt; å’Œ &lt;strong&gt;â€œä¸åŒè¡¨ç›¸â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;â€œåŒä¸€é—®é¢˜â€&lt;/strong&gt;ï¼šæŒ‡çš„æ˜¯åœ¨è½¯ä»¶è®¾è®¡ä¸­åå¤å‡ºç°çš„é‚£äº›&lt;strong&gt;æ ¸å¿ƒçš„ã€æœ¬è´¨æ€§çš„è®¾è®¡æŒ‘æˆ˜&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•çµæ´»ã€é«˜æ•ˆåœ°åˆ›å»ºå¯¹è±¡&lt;/strong&gt;ï¼ˆåˆ›å»ºå‹æ¨¡å¼è¦è§£å†³çš„é—®é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•ç»„åˆç±»æˆ–å¯¹è±¡ä»¥å½¢æˆæ›´å¤§ã€æ›´åˆç†çš„ç»“æ„&lt;/strong&gt;ï¼ˆç»“æ„å‹æ¨¡å¼è¦è§£å†³çš„é—®é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•é«˜æ•ˆåœ°åˆ†é…èŒè´£å’Œè¡Œä¸ºï¼Œä½¿å¯¹è±¡èƒ½å¤Ÿæ›´å¥½åœ°åä½œ&lt;/strong&gt;ï¼ˆè¡Œä¸ºå‹æ¨¡å¼è¦è§£å†³çš„é—®é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œä¸åŒè¡¨ç›¸â€&lt;/strong&gt;ï¼šæŒ‡çš„æ˜¯è¿™äº›æ ¸å¿ƒé—®é¢˜åœ¨&lt;strong&gt;å„ç§å„æ ·çš„å…·ä½“ä¸šåŠ¡åœºæ™¯ä¸­&lt;/strong&gt;æ‰€è¡¨ç°å‡ºæ¥çš„å…·ä½“å½¢æ€ã€‚ä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;åŒæ ·æ˜¯â€œåˆ›å»ºå¯¹è±¡â€çš„é—®é¢˜ï¼Œåœ¨å¿«é¤åº—ç‚¹é¤ç³»ç»Ÿé‡Œæ˜¯åˆ›å»ºä¸åŒå¥—é¤ï¼Œåœ¨å®¶å…·åº—æ˜¯åˆ›å»ºä¸åŒé£æ ¼çš„ä¸€å¥—å®¶å…·ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ ·æ˜¯â€œåè°ƒå¯¹è±¡è¡Œä¸ºâ€çš„é—®é¢˜ï¼Œåœ¨å®¢æœç³»ç»Ÿæ˜¯å¤šçº§æŠ•è¯‰å¤„ç†ï¼Œåœ¨æœºåœºæ˜¯åè°ƒèˆªç­èµ·é™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å› æ­¤ï¼Œè®¾è®¡æ¨¡å¼çš„ä»·å€¼å°±åœ¨äºï¼šå®ƒæç‚¼å‡ºäº†ä¸€å¥—é’ˆå¯¹è¿™äº›â€œåŒä¸€é—®é¢˜â€çš„ã€ç»è¿‡éªŒè¯çš„è§£å†³æ–¹æ¡ˆâ€œæ¨¡æ¿â€ã€‚å½“æˆ‘ä»¬åœ¨â€œä¸åŒè¡¨ç›¸â€çš„å…·ä½“åœºæ™¯ä¸­é‡åˆ°è¿™äº›é—®é¢˜çš„æœ¬è´¨æ—¶ï¼Œå°±å¯ä»¥åº”ç”¨ç›¸åº”çš„è®¾è®¡æ¨¡å¼ï¼Œè€Œä¸éœ€è¦æ¯æ¬¡éƒ½ä»å¤´å¼€å§‹è®¾è®¡ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•ç†è§£ä¸åº”ç”¨"&gt;ğŸ“Š å¦‚ä½•ç†è§£ä¸åº”ç”¨
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè¡¨æ ¼ï¼Œå®ƒå±•ç¤ºäº†&lt;strong&gt;åŒä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰&lt;/strong&gt; å¦‚ä½•åœ¨ä¸åŒåœºæ™¯ï¼ˆè¡¨ç›¸ï¼‰ä¸‹ï¼Œé€šè¿‡ä¸åŒçš„è®¾è®¡æ¨¡å¼æ¥è§£å†³ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒé—®é¢˜ (åŒä¸€é—®é¢˜)&lt;/th&gt;
&lt;th&gt;åœºæ™¯ (ä¸åŒè¡¨ç›¸)&lt;/th&gt;
&lt;th&gt;é€‚ç”¨çš„è®¾è®¡æ¨¡å¼&lt;/th&gt;
&lt;th&gt;æ¨¡å¼å¦‚ä½•è§£å†³è¯¥åœºæ™¯ä¸‹çš„é—®é¢˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¦‚ä½•åˆ›å»ºå¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå¦‚æ‰“å°æœºæœåŠ¡ã€é…ç½®ç®¡ç†å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å•ä¾‹æ¨¡å¼ (Singleton)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç§æœ‰åŒ–æ„é€ å™¨ï¼Œæä¾›å…¨å±€è®¿é—®ç‚¹ &lt;code&gt;getInstance()&lt;/code&gt;ï¼Œç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦åˆ›å»ºå¤šç§ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œä½†ä¸æƒ³ä¾èµ–å…·ä½“ç±»ï¼ˆå¦‚ç‚¹é¤ç³»ç»Ÿã€æ—¥å¿—è®°å½•å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å·¥å‚æ–¹æ³•æ¨¡å¼ (Factory Method)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦åˆ›å»ºä¸€æ•´æ—ç›¸å…³æˆ–ä¾èµ–çš„å¯¹è±¡ï¼ˆå¦‚æ­é…ä¸åŒé£æ ¼çš„å®¶å…·ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä¾›ä¸€ä¸ªæ¥å£æ¥åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œä¸æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦åˆ†æ­¥éª¤æ„å»ºä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼ˆå¦‚ç»„è£…ç”µè„‘ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å»ºé€ è€…æ¨¡å¼ (Builder)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œé€šè¿‡ç›¸åŒçš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦é«˜æ•ˆåœ°åˆ›å»ºæˆæœ¬è¾ƒé«˜çš„å¯¹è±¡å®ä¾‹ï¼ˆå¦‚å¤åˆ¶å¤æ‚å¯¹è±¡ã€æ¸¸æˆä¸­çš„å¤§é‡ç›¸ä¼¼å¯¹è±¡ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸå‹æ¨¡å¼ (Prototype)&lt;/strong&gt; / &lt;strong&gt;äº«å…ƒæ¨¡å¼ (Flyweight)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸå‹æ¨¡å¼&lt;/strong&gt;ï¼šé€šè¿‡å…‹éš†ç°æœ‰å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚&lt;strong&gt;äº«å…ƒæ¨¡å¼&lt;/strong&gt;ï¼šé€šè¿‡å…±äº«ç›¸ä¼¼å¯¹è±¡çš„éƒ¨åˆ†çŠ¶æ€ï¼Œæ¥æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä»è¿™ä¸ªè¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œ&lt;strong&gt;â€œåˆ›å»ºå¯¹è±¡â€&lt;/strong&gt; è¿™ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œåœ¨ä¸åŒçš„ä¸šåŠ¡&lt;strong&gt;è¡¨ç›¸&lt;/strong&gt;ä¸‹ï¼Œè¡ç”Ÿå‡ºäº†å¤šç§ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼ˆæ¨¡å¼ï¼‰ã€‚æ¯ç§æ¨¡å¼éƒ½æä¾›äº†è§£å†³è¯¥ç‰¹å®šè¡¨ç›¸ä¸‹ç—›ç‚¹çš„æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;h3 id="-æ¨¡å¼é€‰æ‹©çš„å…³é”®è¯†åˆ«åŒä¸€é—®é¢˜"&gt;ğŸ’¡ æ¨¡å¼é€‰æ‹©çš„å…³é”®ï¼šè¯†åˆ«â€œåŒä¸€é—®é¢˜â€
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©åˆé€‚è®¾è®¡æ¨¡å¼çš„å…³é”®ï¼Œåœ¨äº&lt;strong&gt;æ‹¨å¼€â€œä¸åŒè¡¨ç›¸â€çš„è¿·é›¾ï¼Œæ´å¯ŸèƒŒåâ€œåŒä¸€é—®é¢˜â€çš„æœ¬è´¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¦åªçœ‹è¡¨é¢&lt;/strong&gt;ï¼šä¸è¦å› ä¸ºä¸šåŠ¡åœºæ™¯æ˜¯â€œç‚¹é¤â€å°±ç”Ÿæ¬ç¡¬å¥—â€œå·¥å‚æ¨¡å¼â€ï¼Œè€Œæ˜¯è¦çœ‹å½“å‰ä»£ç é¢ä¸´çš„æ ¸å¿ƒç—›ç‚¹æ˜¯å¦æ˜¯â€œéœ€è¦éš”ç¦»å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨ï¼Œé¿å…å¯¹å…·ä½“ç±»çš„ä¾èµ–â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£æ¨¡å¼æ„å›¾&lt;/strong&gt;ï¼šæ·±å…¥å­¦ä¹ æ¯ä¸ªè®¾è®¡æ¨¡å¼è¦è§£å†³çš„&lt;strong&gt;æœ¬è´¨é—®é¢˜&lt;/strong&gt;ï¼ˆIntentï¼‰ã€‚ä¾‹å¦‚ï¼Œé€‚é…å™¨æ¨¡å¼è§£å†³&lt;strong&gt;æ¥å£ä¸å…¼å®¹&lt;/strong&gt;çš„é—®é¢˜ï¼Œè§‚å¯Ÿè€…æ¨¡å¼è§£å†³&lt;strong&gt;ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜éœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡&lt;/strong&gt;çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒè¡¡ä¸é€‰æ‹©&lt;/strong&gt;ï¼šé€šå¸¸ï¼ŒåŒä¸€ä¸ªé—®é¢˜å¯èƒ½æœ‰å¤šä¸ªæ¨¡å¼çœ‹ä¼¼éƒ½å¯é€‰ã€‚è¿™å°±éœ€è¦æƒè¡¡å®ƒä»¬çš„&lt;strong&gt;åæœï¼ˆConsequencesï¼‰&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†æ‰©å±•å¯¹è±¡åŠŸèƒ½ï¼Œæ˜¯é€‰æ‹©è£…é¥°å™¨æ¨¡å¼ï¼ˆåŠ¨æ€æ·»åŠ èŒè´£ï¼‰è¿˜æ˜¯ç»§æ‰¿ï¼ˆé™æ€æ‰©å±•ï¼‰ï¼Ÿè£…é¥°å™¨æ¨¡å¼æ›´çµæ´»ï¼Œä½†ä¼šå¼•å…¥æ›´å¤šå°å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ‡å¿Œè¿‡åº¦è®¾è®¡&lt;/strong&gt;ï¼šä¸æ˜¯æ‰€æœ‰æƒ…å†µéƒ½éœ€è¦ä½¿ç”¨è®¾è®¡æ¨¡å¼ã€‚&lt;strong&gt;å¯¹äºç®€å•ã€ç¨³å®šã€ä¸ä¼šå˜åŒ–çš„é€»è¾‘ï¼Œç›´æ¥å®ç°å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©&lt;/strong&gt;ã€‚è®¾è®¡æ¨¡å¼æ˜¯ç”¨æ¥åº”å¯¹å˜åŒ–çš„å¤æ‚æ€§ï¼Œå¦‚æœæœ¬èº«æ²¡æœ‰å˜åŒ–ï¼Œå¼•å…¥æ¨¡å¼åè€Œä¼šå¢åŠ ä¸å¿…è¦çš„å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£ä¼˜å…ˆäºå¥—ç”¨&lt;/strong&gt;ï¼šåœ¨ç†è§£æ¨¡å¼èƒŒåçš„æ€æƒ³å’ŒåŸåˆ™ï¼ˆå¦‚å¼€é—­åŸåˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™ç­‰ï¼‰ä¹‹å‰ï¼Œç›²ç›®å¥—ç”¨æ¨¡å¼åç§°å’Œä»£ç ç»“æ„æ˜¯å±é™©çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼æ˜¯æ‰‹æ®µï¼Œä¸æ˜¯ç›®æ ‡&lt;/strong&gt;ï¼šåº”ç”¨çš„ç»ˆæç›®æ ‡æ˜¯å†™å‡º&lt;strong&gt;é«˜å†…èšã€ä½è€¦åˆã€å¯å¤ç”¨ã€å¯ç»´æŠ¤&lt;/strong&gt;çš„ä»£ç ã€‚è®¾è®¡æ¨¡å¼åªæ˜¯è¾¾æˆè¿™äº›ç›®æ ‡çš„ä¸€ç§ä¼˜ç§€æ‰‹æ®µã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;â€œè®¾è®¡æ¨¡å¼ä¸€èˆ¬ç”¨æ¥è§£å†³åŒä¸€é—®é¢˜çš„ä¸åŒè¡¨ç›¸â€ è¿™å¥è¯å‘Šè¯‰æˆ‘ä»¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¾è®¡æ¨¡å¼æ˜¯&lt;strong&gt;å¯¹é€šç”¨è®¾è®¡é—®é¢˜çš„æŠ½è±¡å’Œæ€»ç»“&lt;/strong&gt;ï¼Œå®ƒè¶…è¶Šäº†å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œé‡è¦çš„æ˜¯ç†è§£æ¯ç§æ¨¡å¼æ‰€è¦è§£å†³çš„&lt;strong&gt;æ ¸å¿ƒé—®é¢˜ï¼ˆIntentï¼‰&lt;/strong&gt;ï¼Œè€Œä¸ä»…ä»…æ˜¯è®°ä½å®ƒçš„ç»“æ„æˆ–ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦&lt;strong&gt;é€è¿‡å…·ä½“ä¸šåŠ¡çš„â€œè¡¨ç›¸â€ï¼Œè¯†åˆ«å‡ºæ·±å±‚æ¬¡çš„â€œåŒä¸€é—®é¢˜â€&lt;/strong&gt;ï¼Œç„¶åé€‰æ‹©åˆé€‚çš„æ¨¡å¼æ¥è§£å†³å®ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šçš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™å¥å……æ»¡æ™ºæ…§çš„è¯ã€‚&lt;/p&gt;
&lt;h2 id="åŠ¨æ€ä»£ç†-vs-è£…é¥°å™¨"&gt;åŠ¨æ€ä»£ç† vs. è£…é¥°å™¨
&lt;/h2&gt;&lt;p&gt;åŠ¨æ€ä»£ç†æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼éƒ½æ˜¯ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒä»¬éƒ½é€šè¿‡åŒ…è£…å¯¹è±¡æ¥å®ç°åŠŸèƒ½çš„æ‰©å±•æˆ–æ§åˆ¶ï¼Œä½†å®ƒä»¬çš„æ ¸å¿ƒç›®çš„ã€å®ç°æ–¹å¼å’Œåº”ç”¨åœºæ™¯æœ‰æ˜¾è‘—åŒºåˆ«ã€‚ä¸‹é¢æˆ‘å°†ä»å¤šä¸ªç»´åº¦ä¸ºä½ è¯¦ç»†å¯¹æ¯”è¿™ä¸¤ç§æ¨¡å¼ï¼Œå¹¶æä¾›ä¸€ä¸ªæ€»ç»“è¡¨æ ¼å¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»´åº¦&lt;/th&gt;
&lt;th&gt;åŠ¨æ€ä»£ç†æ¨¡å¼ (Dynamic Proxy)&lt;/th&gt;
&lt;th&gt;è£…é¥°å™¨æ¨¡å¼ (Decorator)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶å¯¹å¯¹è±¡çš„è®¿é—®&lt;/strong&gt; (å¦‚æƒé™ã€å»¶è¿ŸåŠ è½½ã€ç¼“å­˜)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€åœ°ä¸ºå¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–èŒè´£&lt;/strong&gt; (å¦‚æ—¥å¿—ã€åŠ å¯†)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ï¼Œéšè—å…·ä½“ä»£ç†é€»è¾‘&lt;/td&gt;
&lt;td&gt;é€šè¿‡å®ç°ç›¸åŒæ¥å£æˆ–ç»§æ‰¿ï¼ŒæŒæœ‰è¢«è£…é¥°å¯¹è±¡å¼•ç”¨ï¼Œå¯å¤šå±‚åµŒå¥—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹è±¡å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»£ç†ä¸ç›®æ ‡å¯¹è±¡å…³ç³»é€šå¸¸è¾ƒå›ºå®šï¼Œä¸€ä¸€å¯¹åº”&lt;/td&gt;
&lt;td&gt;è£…é¥°å™¨ä¸è¢«è£…é¥°å¯¹è±¡å…³ç³»åŠ¨æ€ï¼Œå¯é€’å½’ç»„åˆå¤šå±‚åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½ç®¡ç†&lt;/strong&gt;ç›®æ ‡å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ (å¦‚å»¶è¿ŸåŠ è½½)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸ç®¡ç†&lt;/strong&gt;è¢«è£…é¥°å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»…æ‰©å±•åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡é‡ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¿é—®æ§åˆ¶ã€é—´æ¥è°ƒç”¨ã€å¢å¼ºéåŠŸèƒ½æ€§éœ€æ±‚&lt;/td&gt;
&lt;td&gt;åŠŸèƒ½ç»„åˆã€é€æ˜æ‰©å±•ã€å¢å¼ºå¯¹è±¡æœ¬èº«è¡Œä¸º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æƒé™æ§åˆ¶ã€å»¶è¿ŸåŠ è½½ã€è¿œç¨‹è°ƒç”¨ã€ç¼“å­˜ã€AOPï¼ˆæ—¥å¿—ã€äº‹åŠ¡ï¼‰&lt;/td&gt;
&lt;td&gt;IOæµå¤„ç†ã€UIç»„ä»¶å¢å¼ºã€åŠ¨æ€æ·»åŠ æ—¥å¿—æˆ–åŠ å¯†ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒç›®çš„ä¸æœ¬è´¨"&gt;ğŸ¯ æ ¸å¿ƒç›®çš„ä¸æœ¬è´¨
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä»£ç†æ¨¡å¼&lt;/strong&gt;çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;æ§åˆ¶å¯¹åŸå§‹å¯¹è±¡çš„è®¿é—®&lt;/strong&gt;ã€‚å®ƒåƒä¸€ä¸ª&amp;quot;é—¨å«&amp;quot;æˆ–&amp;quot;ä¸­ä»‹&amp;quot;ï¼Œå†³å®šå®¢æˆ·ç«¯æ˜¯å¦å¯ä»¥è®¿é—®åŸå§‹å¯¹è±¡ã€ä½•æ—¶è®¿é—®ï¼Œä»¥åŠåœ¨è®¿é—®å‰åæ‰§è¡Œå“ªäº›é¢å¤–é€»è¾‘ï¼ˆå¦‚æƒé™æ£€æŸ¥ã€å»¶è¿Ÿåˆå§‹åŒ–ã€ç¼“å­˜ç»“æœç­‰ï¼‰ã€‚åŠ¨æ€ä»£ç†é€šå¸¸&lt;strong&gt;ä¸æ”¹å˜åŸå§‹å¯¹è±¡çš„æ ¸å¿ƒè¡Œä¸º&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è£…é¥°å™¨æ¨¡å¼&lt;/strong&gt;çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;åŠ¨æ€åœ°ä¸ºåŸå§‹å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½æˆ–èŒè´£&lt;/strong&gt;ã€‚å®ƒåƒä¸€ä¸ª&amp;quot;åŒ…è£…çº¸&amp;quot;ï¼Œå¯ä»¥ä¸€å±‚ä¸€å±‚åœ°ç»™åŸå§‹å¯¹è±¡å¢æ·»æ–°çš„èƒ½åŠ›ï¼Œæ¯ä¸€å±‚éƒ½å¯èƒ½å¢åŠ æ–°çš„è¡Œä¸ºã€‚è£…é¥°å™¨æ¨¡å¼&lt;strong&gt;å…³æ³¨çš„æ˜¯å¢å¼ºå¯¹è±¡æœ¬èº«çš„åŠŸèƒ½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç°æ–¹å¼ä¸å…³ç³»"&gt;âš™ï¸ å®ç°æ–¹å¼ä¸å…³ç³»
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä»£ç†æ¨¡å¼&lt;/strong&gt;é€šå¸¸åœ¨&lt;strong&gt;è¿è¡Œæ—¶&lt;/strong&gt;åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ï¼ˆå¦‚åˆ©ç”¨ Java çš„ &lt;code&gt;Proxy&lt;/code&gt;å’Œ &lt;code&gt;InvocationHandler&lt;/code&gt;ï¼‰ã€‚ä»£ç†ç±»ä¸ç›®æ ‡å¯¹è±¡å®ç°ç›¸åŒçš„æ¥å£ã€‚å®¢æˆ·ç«¯é€šå¸¸æ„ŸçŸ¥ä¸åˆ°ä»£ç†èƒŒåçš„å…·ä½“ç›®æ ‡å¯¹è±¡ï¼Œå› ä¸ºä»£ç†å¯¹è±¡æœ¬èº«&amp;quot;ä»£è¡¨&amp;quot;äº†ç›®æ ‡å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è£…é¥°å™¨æ¨¡å¼&lt;/strong&gt;åˆ™éœ€è¦&lt;strong&gt;æ˜¾å¼&lt;/strong&gt;åœ°åˆ›å»ºè£…é¥°å™¨ç±»ï¼Œè¿™äº›è£…é¥°å™¨ç±»&lt;strong&gt;å®ç°ä¸è¢«è£…é¥°å¯¹è±¡ç›¸åŒçš„æ¥å£&lt;/strong&gt;æˆ–&lt;strong&gt;ç»§æ‰¿ç›¸åŒçš„çˆ¶ç±»&lt;/strong&gt;ï¼Œå¹¶åœ¨å†…éƒ¨æŒæœ‰è¢«è£…é¥°å¯¹è±¡çš„å¼•ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡å¤šå±‚åµŒå¥—è£…é¥°å™¨æ¥ç»„åˆå¤šç§åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸš€ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä»£ç†æ¨¡å¼&lt;/strong&gt;å¸¸ç”¨äºï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰&lt;/strong&gt;ï¼šå¦‚æ—¥å¿—è®°å½•ã€æ€§èƒ½ç›‘æ§ã€äº‹åŠ¡ç®¡ç†ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿä»£ç†&lt;/strong&gt;ï¼šå»¶è¿Ÿå¤§å¼€é”€å¯¹è±¡çš„åˆ›å»ºï¼Œå¦‚å›¾ç‰‡æ‡’åŠ è½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŠ¤ä»£ç†&lt;/strong&gt;ï¼šæ§åˆ¶è®¿é—®æƒé™ï¼Œè¿›è¡Œå®‰å…¨å®¡æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿œç¨‹ä»£ç†&lt;/strong&gt;ï¼šéšè—è¿œç¨‹æ–¹æ³•è°ƒç”¨çš„å¤æ‚æ€§ï¼Œå¦‚ RPCã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è£…é¥°å™¨æ¨¡å¼&lt;/strong&gt;å¸¸ç”¨äºï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Java I/O æµ&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;BufferedInputStream&lt;/code&gt;åŒ…è£… &lt;code&gt;FileInputStream&lt;/code&gt;æ·»åŠ ç¼“å†²åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºUIç»„ä»¶åŠ¨æ€æ·»åŠ åŠŸèƒ½&lt;/strong&gt;ï¼šå¦‚ä¸ºæ–‡æœ¬æ¡†æ·»åŠ æ»šåŠ¨æ¡ã€è¾¹æ¡†ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€é€æ˜åœ°æ‰©å±•å¯¹è±¡åŠŸèƒ½&lt;/strong&gt;ï¼šå¦‚ä¸ºä¸šåŠ¡å¯¹è±¡æ·»åŠ æ—¥å¿—ã€åŠ å¯†ç­‰åŠŸèƒ½ï¼Œä¸”è¿™äº›åŠŸèƒ½å¯ä»¥çµæ´»ç»„åˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;æ§åˆ¶å¯¹æŸä¸ªå¯¹è±¡çš„è®¿é—®&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œæ£€æŸ¥æƒé™ã€å»¶è¿ŸåŠ è½½èµ„æºã€è®°å½•æ—¥å¿—ã€ç®¡ç†äº‹åŠ¡æˆ–æä¾›è¿œç¨‹æ¥å£ï¼‰æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘&lt;strong&gt;åŠ¨æ€ä»£ç†æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;åŠ¨æ€ã€é€æ˜åœ°ä¸ºä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½&lt;/strong&gt;ï¼Œå¹¶ä¸”å¸Œæœ›è¿™äº›åŠŸèƒ½å¯ä»¥çµæ´»åœ°ç»„åˆä½¿ç”¨æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘&lt;strong&gt;è£…é¥°å™¨æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-éœ€è¦æ³¨æ„çš„ç‚¹"&gt;âš ï¸ éœ€è¦æ³¨æ„çš„ç‚¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä»£ç†çš„å±€é™æ€§&lt;/strong&gt;ï¼šåœ¨ Java ä¸­ï¼ŒJDK åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°æ¥å£ã€‚å¯¹äºæœªå®ç°æ¥å£çš„ç±»ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ CGLIB ç­‰å­—èŠ‚ç å¢å¼ºåº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è£…é¥°å™¨çš„é¡ºåº&lt;/strong&gt;ï¼šå¤šå±‚è£…é¥°å™¨åŒ…è£…æ—¶ï¼ŒåŠŸèƒ½çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¼šå› åŒ…è£…é¡ºåºä¸åŒè€Œäº§ç”Ÿä¸åŒæ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šåŠ¨æ€ä»£ç†é€šå¸¸æ¶‰åŠåå°„è°ƒç”¨ï¼Œå¯èƒ½å¸¦æ¥è½»å¾®çš„æ€§èƒ½å¼€é”€ï¼Œä½†åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚è£…é¥°å™¨æ¨¡å¼ç”±äºä¼šå¢åŠ å¯¹è±¡å±‚æ¬¡ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥è½»å¾®çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£åŠ¨æ€ä»£ç†æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h2 id="åŠ¨æ€ä»£ç†æ¨¡å¼"&gt;åŠ¨æ€ä»£ç†æ¨¡å¼
&lt;/h2&gt;&lt;p&gt;åŠ¨æ€ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡çš„æŠ€æœ¯ï¼Œå®ƒå…è®¸åœ¨ä¸ä¿®æ”¹åŸå§‹ç±»ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ‹¦æˆªå¹¶å¢å¼ºç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ã€‚è¿™ç§æ¨¡å¼ä¸»è¦ç”¨äºå®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰ä¸ä¸šåŠ¡é€»è¾‘çš„è§£è€¦ã€‚ä»¥ä¸‹æ˜¯åŠ¨æ€ä»£ç†æ¨¡å¼çš„è¯¦ç»†ä»‹ç»ï¼š&lt;/p&gt;
&lt;h2 id="1-åŸºæœ¬æ¦‚å¿µä¸æ ¸å¿ƒç»„ä»¶"&gt;1. åŸºæœ¬æ¦‚å¿µä¸æ ¸å¿ƒç»„ä»¶
&lt;/h2&gt;&lt;p&gt;åŠ¨æ€ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒé€šè¿‡åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†å¯¹è±¡åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´å……å½“ä¸­ä»‹ï¼Œç”¨äºåœ¨æ–¹æ³•è°ƒç”¨å‰åæ·»åŠ é¢å¤–çš„å¤„ç†é€»è¾‘ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Javaä¸­çš„åŠ¨æ€ä»£ç†ä¸»è¦ä¾èµ–äºä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Proxy&lt;/code&gt;ç±»&lt;/strong&gt;ï¼šä½äº &lt;code&gt;java.lang.reflect&lt;/code&gt;åŒ…ä¸­ï¼Œç”¨äºåŠ¨æ€åˆ›å»ºä»£ç†å®ä¾‹ã€‚å…¶ &lt;code&gt;newProxyInstance()&lt;/code&gt;æ–¹æ³•æ˜¯åˆ›å»ºä»£ç†å¯¹è±¡çš„å…³é”®ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰ã€ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£æ•°ç»„ï¼ˆClass&lt;?&gt;[]ï¼‰ä»¥åŠè°ƒç”¨å¤„ç†å™¨ï¼ˆInvocationHandlerï¼‰å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;InvocationHandler&lt;/code&gt;æ¥å£&lt;/strong&gt;ï¼šè¿™æ˜¯å®ç°åŠ¨æ€ä»£ç†å¿…é¡»å®ç°çš„æ¥å£ï¼Œå®ƒåŒ…å«ä¸€ä¸ª &lt;code&gt;invoke()&lt;/code&gt;æ–¹æ³•ã€‚å½“ä»£ç†å¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ&lt;code&gt;invoke()&lt;/code&gt;æ–¹æ³•ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œã€‚å¼€å‘è€…å¯ä»¥åœ¨æ­¤æ–¹æ³•ä¸­æ·»åŠ è‡ªå®šä¹‰é€»è¾‘æ¥æ‹¦æˆªå’Œå¢å¼ºåŸå§‹æ–¹æ³•è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-å®ç°åŸç†ä¸æ­¥éª¤"&gt;2. å®ç°åŸç†ä¸æ­¥éª¤
&lt;/h2&gt;&lt;p&gt;å®ç°åŠ¨æ€ä»£ç†é€šå¸¸éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰ä¸šåŠ¡æ¥å£&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œå£°æ˜éœ€è¦è¢«ä»£ç†çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°çœŸå®ä¸»é¢˜ï¼ˆç›®æ ‡ç±»ï¼‰&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªç±»æ¥å®ç°ä¸Šè¿°æ¥å£ï¼Œè¯¥ç±»åŒ…å«å®é™…çš„ä¸šåŠ¡é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºè°ƒç”¨å¤„ç†å™¨ï¼ˆInvocationHandlerï¼‰&lt;/strong&gt;ï¼šå®ç° &lt;code&gt;InvocationHandler&lt;/code&gt;æ¥å£ï¼Œå¹¶åœ¨å…¶ &lt;code&gt;invoke()&lt;/code&gt;æ–¹æ³•ä¸­ç¼–å†™å¢å¼ºé€»è¾‘ï¼ˆå¦‚æ–¹æ³•è°ƒç”¨å‰åçš„æ—¥å¿—è®°å½•ã€æƒé™æ£€æŸ¥ç­‰ï¼‰ã€‚è¯¥æ–¹æ³•ä¼šé€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„åŸå§‹æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆä»£ç†å¯¹è±¡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;Proxy.newProxyInstance()&lt;/code&gt;æ–¹æ³•ï¼Œä¼ å…¥ç›®æ ‡ç±»çš„ç±»åŠ è½½å™¨ã€å®ç°çš„æ¥å£ä»¥åŠè°ƒç”¨å¤„ç†å™¨å®ä¾‹ï¼ŒåŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸ºä¸€ä¸ªç®€å•çš„æœåŠ¡æ¥å£åˆ›å»ºä»£ç†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// 1. å®šä¹‰æ¥å£
interface Service {
void execute();
}
// 2. å®ç°çœŸå®ä¸»é¢˜
class RealService implements Service {
public void execute() {
// ä¸šåŠ¡é€»è¾‘
}
}
// 3. åˆ›å»ºè°ƒç”¨å¤„ç†å™¨
class LogHandler implements InvocationHandler {
private final Object target;
public LogHandler(Object target) { this.target = target; }
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
System.out.println(&amp;#34;Before method: &amp;#34; + method.getName());
Object result = method.invoke(target, args); // è°ƒç”¨ç›®æ ‡æ–¹æ³•
System.out.println(&amp;#34;After method: &amp;#34; + method.getName());
return result;
}
}
// 4. ç”Ÿæˆä»£ç†å¯¹è±¡
Service realService = new RealService();
InvocationHandler handler = new LogHandler(realService);
Service proxy = (Service) Proxy.newProxyInstance(
Service.class.getClassLoader(),
new Class&amp;lt;?&amp;gt;[]{Service.class},
handler
);
// ä½¿ç”¨ä»£ç†å¯¹è±¡
proxy.execute(); // è¾“å‡ºå‰ç½®/åç½®æ—¥å¿—å¹¶æ‰§è¡Œä¸šåŠ¡é€»è¾‘
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="3-åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼"&gt;3. åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼
&lt;/h2&gt;&lt;p&gt;Javaç”Ÿæ€ä¸­ä¸»è¦æœ‰ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;JDKåŠ¨æ€ä»£ç†&lt;/th&gt;
&lt;th&gt;CGLIBåŠ¨æ€ä»£ç†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºæ¥å£å®ç°&lt;/td&gt;
&lt;td&gt;åŸºäºç»§æ‰¿å®ç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›®æ ‡ç±»å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£&lt;/td&gt;
&lt;td&gt;ç›®æ ‡ç±»ä¸èƒ½æ˜¯finalçš„ï¼Œæ–¹æ³•ä¸èƒ½æ˜¯finalæˆ–privateçš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå°„è°ƒç”¨ï¼Œæœ‰ä¸€å®šæ€§èƒ½å¼€é”€&lt;/td&gt;
&lt;td&gt;é€šè¿‡å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆå­ç±»ï¼Œé€šå¸¸æ¯”JDKåŠ¨æ€ä»£ç†å¿«ä¸€äº›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºæ¥å£é©±åŠ¨çš„åœºæ™¯ï¼Œå¦‚Spring AOPï¼ˆé»˜è®¤ç­–ç•¥ï¼‰&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºä»£ç†æ²¡æœ‰å®ç°æ¥å£çš„ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;JDKåŠ¨æ€ä»£ç†&lt;/strong&gt;æ˜¯Javaæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒè¦æ±‚ç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ã€‚ä»£ç†å¯¹è±¡ä¼šå®ç°è¿™äº›ç›¸åŒçš„æ¥å£ï¼Œå¹¶å°†æ–¹æ³•è°ƒç”¨å§”æ‰˜ç»™ &lt;code&gt;InvocationHandler&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CGLIBåŠ¨æ€ä»£ç†&lt;/strong&gt;æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚è¢«Spring AOPä½¿ç”¨ï¼‰ï¼Œå®ƒé€šè¿‡ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»æ¥åˆ›å»ºä»£ç†ã€‚è¿™ä½¿å¾—å®ƒèƒ½å¤Ÿä»£ç†é‚£äº›æ²¡æœ‰å®ç°æ¥å£çš„ç±»ã€‚CGLIBé€šè¿‡æ–¹æ³•é‡å†™æ¥æ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œå› æ­¤æ— æ³•ä»£ç†finalç±»æˆ–final/privateæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id="4-åº”ç”¨åœºæ™¯"&gt;4. åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;p&gt;åŠ¨æ€ä»£ç†åœ¨è®¸å¤šæ¡†æ¶å’Œå®é™…å¼€å‘ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰&lt;/strong&gt;ï¼šåŠ¨æ€ä»£ç†æ˜¯å®ç°AOPçš„åŸºçŸ³ï¼Œç”¨äºå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€æ€§èƒ½ç›‘æ§ï¼‰æ¨¡å—åŒ–ï¼Œå¹¶ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚Springæ¡†æ¶çš„AOPæ¨¡å—å°±å¤§é‡ä½¿ç”¨äº†åŠ¨æ€ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼ˆRPCï¼‰&lt;/strong&gt;ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒåŠ¨æ€ä»£ç†å¯ä»¥éšè—ç½‘ç»œé€šä¿¡çš„å¤æ‚æ€§ï¼Œä½¿å®¢æˆ·ç«¯åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡ï¼ˆå¦‚Dubboã€gRPCç­‰æ¡†æ¶çš„å®ç°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å£°æ˜å¼äº‹åŠ¡ç®¡ç†&lt;/strong&gt;ï¼šSpringæ¡†æ¶ä½¿ç”¨åŠ¨æ€ä»£ç†æ¥å®ç° &lt;code&gt;@Transactional&lt;/code&gt;æ³¨è§£ï¼Œåœ¨æ–¹æ³•è°ƒç”¨å‰åè‡ªåŠ¨ç®¡ç†äº‹åŠ¡çš„å¼€å¯ã€æäº¤æˆ–å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿ŸåŠ è½½&lt;/strong&gt;ï¼šHibernateç­‰ORMæ¡†æ¶ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç°å»¶è¿ŸåŠ è½½ï¼Œåªæœ‰å½“å®ä½“ç±»çš„å±æ€§è¢«å®é™…è®¿é—®æ—¶æ‰ä»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ§åˆ¶ä¸æƒé™æ£€æŸ¥&lt;/strong&gt;ï¼šåœ¨æ–¹æ³•è°ƒç”¨å‰ï¼Œé€šè¿‡ä»£ç†è¿›è¡Œæƒé™éªŒè¯ï¼Œç¡®ä¿è°ƒç”¨è€…æ‹¥æœ‰è¶³å¤Ÿçš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜&lt;/strong&gt;ï¼šä»£ç†å¯ä»¥æ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œå…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ç»“æœï¼Œå­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œä¸å­˜åœ¨åˆ™è°ƒç”¨ç›®æ ‡æ–¹æ³•å¹¶å°†ç»“æœå­˜å…¥ç¼“å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="5-ä¼˜ç¼ºç‚¹åˆ†æ"&gt;5. ä¼˜ç¼ºç‚¹åˆ†æ
&lt;/h2&gt;&lt;h3 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£è€¦ä¸å¢å¼ºéä¾µå…¥æ€§&lt;/strong&gt;ï¼šæ— éœ€ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„ä»£ç ï¼Œå³å¯ä¸ºå…¶æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ€§ä¸å¯å¤ç”¨æ€§&lt;/strong&gt;ï¼šä»£ç†é€»è¾‘ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ï¼‰å¯ä»¥å¤ç”¨äºå¤šä¸ªç›®æ ‡ç±»ï¼Œå‡å°‘äº†ä»£ç é‡å¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–ç³»ç»Ÿæ¶æ„&lt;/strong&gt;ï¼šé€šè¿‡AOPç­‰æ€æƒ³ï¼Œä½¿ä¸šåŠ¡é€»è¾‘ä¸é€šç”¨æ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç¼ºç‚¹ä¸å±€é™æ€§"&gt;ç¼ºç‚¹ä¸å±€é™æ€§ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šç”±äºåŠ¨æ€ä»£ç†é€šå¸¸æ¶‰åŠåå°„è°ƒç”¨å’Œå­—èŠ‚ç ç”Ÿæˆï¼Œå…¶æ€§èƒ½é€šå¸¸ç•¥ä½äºç›´æ¥çš„æ–¹æ³•è°ƒç”¨ï¼ˆä½†ç°ä»£JVMå’Œæ¡†æ¶å·²é€šè¿‡å„ç§ä¼˜åŒ–æ‰‹æ®µå‡å°‘äº†è¿™ç§å¼€é”€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JDKåŠ¨æ€ä»£ç†çš„æ¥å£ä¾èµ–&lt;/strong&gt;ï¼šJDKåŸç”ŸåŠ¨æ€ä»£ç†åªèƒ½åŸºäºæ¥å£åˆ›å»ºä»£ç†ï¼Œä¸èƒ½ä»£ç†æœªå®ç°ä»»ä½•æ¥å£çš„ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CGLIBçš„é™åˆ¶&lt;/strong&gt;ï¼šCGLIBæ— æ³•ä»£ç†finalç±»æˆ–final/privateæ–¹æ³•ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒè¯•å¤æ‚æ€§&lt;/strong&gt;ï¼šç”±äºä»£ç†æœºåˆ¶å¼•å…¥äº†é¢å¤–çš„é—´æ¥å±‚ï¼Œåœ¨è°ƒè¯•æ—¶å¯èƒ½ä¼šå¢åŠ ä¸€å®šçš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="6-æ€»ç»“"&gt;6. æ€»ç»“
&lt;/h2&gt;&lt;p&gt;åŠ¨æ€ä»£ç†æ˜¯ä¸€ç§å¼ºå¤§çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œæ˜¯è®¸å¤šé«˜çº§ç‰¹æ€§å’Œæ¡†æ¶ï¼ˆå¦‚Spring AOPã€Hibernateã€RPCæ¡†æ¶ç­‰ï¼‰çš„åŸºç¡€ã€‚å®ƒé€šè¿‡è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä¼˜é›…åœ°å®ç°äº†åŠŸèƒ½çš„å¢å¼ºå’Œé€»è¾‘çš„è§£è€¦ã€‚&lt;/p&gt;
&lt;p&gt;æŒæ¡åŠ¨æ€ä»£ç†æ¨¡å¼ï¼Œç†è§£å…¶åŸç†ã€å®ç°æ–¹å¼ä»¥åŠé€‚ç”¨åœºæ™¯ï¼Œå¯¹äºJavaå¼€å‘è€…è®¾è®¡å’Œæ„å»ºæ›´çµæ´»ã€å¯ç»´æŠ¤ä¸”æ‰©å±•æ€§è‰¯å¥½çš„ç³»ç»Ÿè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;h2 id="æ¡¥æ¥æ¨¡å¼"&gt;æ¡¥æ¥æ¨¡å¼
&lt;/h2&gt;&lt;p&gt;æ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„&lt;strong&gt;ç»“æ„å‹è®¾è®¡æ¨¡å¼&lt;/strong&gt;ï¼Œå®ƒé€šè¿‡â€œç»„åˆä¼˜äºç»§æ‰¿â€çš„æ€æƒ³ï¼Œå·§å¦™åœ°&lt;strong&gt;å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–&lt;/strong&gt;ï¼Œä»è€Œæœ‰æ•ˆè§£å†³å¤šç»´åº¦å˜åŒ–å¸¦æ¥çš„ç±»çˆ†ç‚¸é—®é¢˜ï¼Œæå‡ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å…ˆå¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒä»·å€¼ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº†ä½¿ç”¨ä¼ ç»Ÿç»§æ‰¿å’Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼çš„ä¸åŒã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;ä¼ ç»Ÿçš„å¤šå±‚ç»§æ‰¿æ–¹å¼&lt;/th&gt;
&lt;th&gt;ä½¿ç”¨æ¡¥æ¥æ¨¡å¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»§æ‰¿ (is-a)&lt;/td&gt;
&lt;td&gt;ç»„åˆ (has-a)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è€¦åˆåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜è€¦åˆï¼ˆçˆ¶ç±»ä¸å­ç±»ç´§å¯†ç»‘å®šï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½è€¦åˆ&lt;/strong&gt;ï¼ˆæŠ½è±¡ä¸å®ç°å®Œå…¨åˆ†ç¦»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»çš„æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ææ˜“å‘ç”Ÿ &lt;strong&gt;â€œç±»çˆ†ç‚¸â€&lt;/strong&gt; (äº§å“ Ã— å“ç‰Œ Ã— åŠŸèƒ½&amp;hellip;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç±»æ•°é‡çº¿æ€§å¢é•¿&lt;/strong&gt;ï¼Œè€Œéä¹˜æ•°å¢é•¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰©å±•æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å·®ã€‚å¢åŠ ä¸€ä¸ªæ–°ç»´åº¦ï¼ˆå¦‚æ–°å“ç‰Œï¼‰éœ€ä¿®æ”¹æ‰€æœ‰ç›¸å…³ç±»æˆ–åˆ›å»ºå¤§é‡å­ç±»ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¥½&lt;/strong&gt;ã€‚æŠ½è±¡å’Œå®ç°ç»´åº¦å¯ç‹¬ç«‹æ‰©å±•ï¼Œ&lt;strong&gt;ç¬¦åˆå¼€é—­åŸåˆ™&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™æ€ï¼Œå…³ç³»åœ¨ç¼–è¯‘æ—¶ç¡®å®š&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€&lt;/strong&gt;ï¼Œå¯åœ¨è¿è¡Œæ—¶åˆ‡æ¢å®ç°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å˜åŒ–ç»´åº¦è¾ƒå°‘ã€å…³ç³»ç¨³å®šçš„ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤šä¸ªç»´åº¦ç‹¬ç«‹å˜åŒ–&lt;/strong&gt;çš„å¤æ‚ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ¡¥æ¥æ¨¡å¼çš„è®¾è®¡æ€æƒ³ä¸ç»“æ„"&gt;ğŸ§  æ¡¥æ¥æ¨¡å¼çš„è®¾è®¡æ€æƒ³ä¸ç»“æ„
&lt;/h3&gt;&lt;p&gt;æ¡¥æ¥æ¨¡å¼çš„æ ¸å¿ƒæ˜¯&lt;strong&gt;è§£è€¦&lt;/strong&gt;ã€‚å®ƒé€šè¿‡ä¸€ä¸ª&lt;strong&gt;ç»„åˆå…³ç³»&lt;/strong&gt;ï¼ˆæ¡¥ï¼‰ï¼Œå°†â€œä»€ä¹ˆâ€ï¼ˆæŠ½è±¡ï¼‰å’Œâ€œæ€ä¹ˆåšâ€ï¼ˆå®ç°ï¼‰è¿æ¥èµ·æ¥ï¼Œè€Œä¸æ˜¯è®©â€œä»€ä¹ˆâ€ç›´æ¥ç»§æ‰¿â€œæ€ä¹ˆåšâ€ã€‚&lt;/p&gt;
&lt;h4 id="-æ¨¡å¼ç»“æ„"&gt;ğŸ”§ æ¨¡å¼ç»“æ„
&lt;/h4&gt;&lt;p&gt;æ¡¥æ¥æ¨¡å¼é€šå¸¸åŒ…å«ä»¥ä¸‹å››ä¸ªå…³é”®è§’è‰²ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Implementor&lt;/code&gt;(å®ç°å™¨æ¥å£)&lt;/strong&gt;ï¼šå®šä¹‰&lt;strong&gt;å®ç°éƒ¨åˆ†&lt;/strong&gt;çš„æ¥å£ã€‚è¿™äº›æ¥å£é€šå¸¸æ˜¯ä¸æŠ½è±¡éƒ¨åˆ†æ“ä½œç›¸å…³çš„åŸºæœ¬æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ConcreteImplementor&lt;/code&gt;(å…·ä½“å®ç°å™¨)&lt;/strong&gt;ï¼šå®ç° &lt;code&gt;Implementor&lt;/code&gt;æ¥å£ï¼Œç»™å‡ºå…·ä½“æ“ä½œçš„å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Abstraction&lt;/code&gt;(æŠ½è±¡ç±»)&lt;/strong&gt;ï¼šå®šä¹‰&lt;strong&gt;æŠ½è±¡éƒ¨åˆ†&lt;/strong&gt;çš„æ¥å£ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘ &lt;code&gt;Implementor&lt;/code&gt;ç±»å‹å¯¹è±¡çš„å¼•ç”¨ï¼ˆå³é‚£åº§â€œæ¡¥â€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;RefinedAbstraction&lt;/code&gt;(ä¼˜åŒ–çš„æŠ½è±¡ç±»)&lt;/strong&gt;ï¼šæ‰©å±• &lt;code&gt;Abstraction&lt;/code&gt;å®šä¹‰çš„æ¥å£ï¼Œé€šå¸¸å®ƒä¸å†ç›´æ¥æ“ä½œå®ç°éƒ¨åˆ†ï¼Œè€Œæ˜¯é€šè¿‡ &lt;code&gt;Abstraction&lt;/code&gt;å®šä¹‰çš„é«˜çº§æ¥å£æ¥ä½¿ç”¨ &lt;code&gt;Implementor&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®ƒä»¬ä¹‹é—´çš„å…³ç³»å¯ä»¥é€šè¿‡ä¸‹é¢çš„ UML ç±»å›¾æ¥ç›´è§‚å±•ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;classDiagram
class Abstraction {
+implementor: Implementor
+operation()
}
class RefinedAbstraction {
+operation()
}
class Implementor {
&amp;lt;&amp;lt;interface&amp;gt;&amp;gt;
+operationImpl()
}
class ConcreteImplementorA {
+operationImpl()
}
class ConcreteImplementorB {
+operationImpl()
}
Abstraction &amp;lt;|-- RefinedAbstraction : ç»§æ‰¿
Abstraction o-- Implementor : ç»„åˆ/æ¡¥æ¥
Implementor &amp;lt;|.. ConcreteImplementorA : å®ç°
Implementor &amp;lt;|.. ConcreteImplementorB : å®ç°
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä¼˜ç¼ºç‚¹"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;h4 id="-ä¼˜ç‚¹"&gt;âœ… ä¼˜ç‚¹
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç¦»æŠ½è±¡ä¸å®ç°&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¸å¿ƒçš„ä¼˜ç‚¹ï¼Œä½¿å¾—æŠ½è±¡å’Œå®ç°å¯ä»¥ç‹¬ç«‹åœ°æ‰©å±•å’Œä¿®æ”¹ï¼Œäº’ä¸å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æé«˜å¯æ‰©å±•æ€§&lt;/strong&gt;ï¼šå¯ä»¥ç‹¬ç«‹åœ°å¯¹ &lt;code&gt;Abstraction&lt;/code&gt;å’Œ &lt;code&gt;Implementor&lt;/code&gt;å±‚æ¬¡ç»“æ„è¿›è¡Œæ‰©å±•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ç»§æ‰¿çˆ†ç‚¸&lt;/strong&gt;ï¼šæå¤§åœ°å‡å°‘äº†ä¸ºå¤„ç†å¤šç»´åº¦å˜åŒ–è€Œäº§ç”Ÿçš„å­ç±»æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¦åˆè®¾è®¡åŸåˆ™&lt;/strong&gt;ï¼šç¬¦åˆâ€œå¼€é—­åŸåˆ™â€å’Œâ€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼ˆä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="-ç¼ºç‚¹"&gt;âŒ ç¼ºç‚¹
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ ç³»ç»Ÿå¤æ‚åº¦&lt;/strong&gt;ï¼šå¼•å…¥äº†é¢å¤–çš„ç±»å’Œæ¥å£ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡ï¼Œç†è§£å’Œè®¾è®¡çš„éš¾åº¦æœ‰æ‰€å¢åŠ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ­£ç¡®è¯†åˆ«ç»´åº¦&lt;/strong&gt;ï¼šè¦æ±‚å¼€å‘è€…èƒ½æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œå¦åˆ™ä¼šé€‚å¾—å…¶åã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ› ï¸ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;æ¡¥æ¥æ¨¡å¼åœ¨ä»¥ä¸‹æƒ…å†µä¸­éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½“ä¸€ä¸ªç±»å­˜åœ¨å¤šä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦&lt;/strong&gt;ï¼Œä¸”è¿™äº›ç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿&lt;/strong&gt;æˆ–å› ä¸ºå¤šå±‚ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦åœ¨æŠ½è±¡å’Œå®ç°ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§&lt;/strong&gt;ï¼Œä¾‹å¦‚éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§çš„å…·ä½“åº”ç”¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹³å°åº”ç”¨å¼€å‘&lt;/strong&gt;ï¼šæŠ½è±¡éƒ¨åˆ†å®šä¹‰é€šç”¨åŠŸèƒ½ï¼Œä¸åŒå¹³å°æä¾›å…·ä½“å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GUI æ¡†æ¶&lt;/strong&gt;ï¼šå°†çª—å£æŠ½è±¡ä¸ä¸åŒæ“ä½œç³»ç»Ÿçš„å…·ä½“å®ç°åˆ†ç¦»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“é©±åŠ¨ä¸è¿æ¥æ± &lt;/strong&gt;ï¼šJDBC å°±æ˜¯ä¸€ä¸ªç»å…¸çš„æ¡¥æ¥æ¨¡å¼åº”ç”¨ï¼Œ&lt;code&gt;Connection&lt;/code&gt;æ˜¯æŠ½è±¡ï¼Œå„ç±»æ•°æ®åº“çš„é©±åŠ¨æ˜¯å…·ä½“å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒå¤šä¸»é¢˜åˆ‡æ¢çš„åº”ç”¨ç¨‹åº&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯å‘é€ç³»ç»Ÿ&lt;/strong&gt;ï¼šæ¶ˆæ¯ç±»å‹ï¼ˆæ™®é€šã€åŠ æ€¥ï¼‰å’Œå‘é€æ–¹å¼ï¼ˆçŸ­ä¿¡ã€é‚®ä»¶ã€ç«™å†…ä¿¡ï¼‰æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ç»´åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹"&gt;ğŸ“Ÿ ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Java ä»£ç ç¤ºä¾‹ï¼Œæ¨¡æ‹Ÿäº†æ‰‹æœºå“ç‰Œä¸æ‰‹æœºè½¯ä»¶ä¸¤ä¸ªç»´åº¦ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// 1. å®ç°éƒ¨åˆ†æ¥å£ï¼šæ‰‹æœºè½¯ä»¶
interface App {
void open();
}
// 2. å…·ä½“å®ç°ç±»ï¼šå¾®ä¿¡ã€YouTube
class WeChat implements App {
@Override
public void open() {
System.out.println(&amp;#34;æ‰“å¼€å¾®ä¿¡&amp;#34;);
}
}
class YouTube implements App {
@Override
public void open() {
System.out.println(&amp;#34;æ‰“å¼€YouTube&amp;#34;);
}
}
// 3. æŠ½è±¡ç±»ï¼šæ‰‹æœºå“ç‰Œ
abstract class Phone {
protected App app; // æ¡¥æ¥çš„å…³é”®ï¼šæŒæœ‰å®ç°éƒ¨åˆ†çš„å¼•ç”¨
public Phone(App app) {
this.app = app;
}
abstract void run();
}
// 4. ä¼˜åŒ–çš„æŠ½è±¡ç±»ï¼šå…·ä½“å“ç‰Œ
class Xiaomi extends Phone {
public Xiaomi(App app) {
super(app);
}
@Override
void run() {
System.out.print(&amp;#34;å°ç±³æ‰‹æœºï¼š&amp;#34;);
app.open(); // å§”æ‰˜ç»™å®ç°éƒ¨åˆ†
}
}
class Huawei extends Phone {
public Huawei(App app) {
super(app);
}
@Override
void run() {
System.out.print(&amp;#34;åä¸ºæ‰‹æœºï¼š&amp;#34;);
app.open();
}
}
// 5. å®¢æˆ·ç«¯ä½¿ç”¨
public class Client {
public static void main(String[] args) {
// ç»„åˆå‡ºâ€œå°ç±³æ‰‹æœºè¿è¡Œå¾®ä¿¡â€
Phone xiaomiWithWeChat = new Xiaomi(new WeChat());
xiaomiWithWeChat.run(); // è¾“å‡ºï¼šå°ç±³æ‰‹æœºï¼šæ‰“å¼€å¾®ä¿¡
// ç»„åˆå‡ºâ€œåä¸ºæ‰‹æœºè¿è¡ŒYouTubeâ€
Phone huaweiWithYouTube = new Huawei(new YouTube());
huaweiWithYouTube.run(); // è¾“å‡ºï¼šåä¸ºæ‰‹æœºï¼šæ‰“å¼€YouTube
// è½»æ¾æ‰©å±•ï¼šæ–°å¢ä¸€ä¸ªæŠ–éŸ³Appï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•å“ç‰Œç±»
// class Douyin implements App { ... }
// Phone xiaomiWithDouyin = new Xiaomi(new Douyin());
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ¡¥æ¥æ¨¡å¼é€šè¿‡&lt;strong&gt;è§£è€¦æŠ½è±¡å’Œå®ç°&lt;/strong&gt;ï¼Œå¹¶ç”¨&lt;strong&gt;ç»„åˆå…³ç³»ä»£æ›¿ç»§æ‰¿å…³ç³»&lt;/strong&gt;ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å¤„ç†å¤šç»´åº¦å˜åŒ–çš„ä¼˜é›…æ–¹æ¡ˆã€‚è™½ç„¶å®ƒå¯èƒ½ä¼šåœ¨åˆæœŸå¢åŠ ä¸€äº›ç³»ç»Ÿè®¾è®¡çš„å¤æ‚åº¦ï¼Œä½†åœ¨éœ€æ±‚å¯èƒ½å˜åŒ–ã€éœ€è¦æ›´å¤šæ‰©å±•æ€§çš„åœºæ™¯ä¸‹ï¼Œå®ƒèƒ½æœ‰æ•ˆé¿å…ä»£ç åƒµåŒ–ï¼Œè®©ç³»ç»Ÿæ›´å…·çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ¡¥æ¥æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h2 id="çŠ¶æ€æ¨¡å¼"&gt;çŠ¶æ€æ¨¡å¼
&lt;/h2&gt;&lt;p&gt;çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒ&lt;strong&gt;å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º&lt;/strong&gt;ï¼Œä½¿å¾—è¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†çŠ¶æ€æŠ½è±¡ä¸ºç‹¬ç«‹çš„å¯¹è±¡ï¼Œå¹¶å°†ä¸ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºéƒ½å°è£…åˆ°å¯¹åº”çš„ç±»ä¸­ï¼Œä»è€Œæ¶ˆé™¤äº†åºå¤§çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µï¼Œä¸‹æ–¹å›¾è¡¨å±•ç¤ºäº†çŠ¶æ€æ¨¡å¼ä¸­ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼ˆç¯å¢ƒç±»ã€æŠ½è±¡çŠ¶æ€ã€å…·ä½“çŠ¶æ€ï¼‰å¦‚ä½•åä½œï¼Œä»¥åŠçŠ¶æ€å¦‚ä½•æµè½¬ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å®¢æˆ·ç«¯ Client] --&amp;gt; B[ç¯å¢ƒç±» Context&amp;lt;br&amp;gt;ç»´æŠ¤ä¸€ä¸ªå¯¹å½“å‰çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨]
B --&amp;gt; C[æŠ½è±¡çŠ¶æ€ State&amp;lt;br&amp;gt;å®šä¹‰çŠ¶æ€æ¥å£]
C --&amp;gt; D[å…·ä½“çŠ¶æ€ ConcreteStateA&amp;lt;br&amp;gt;å®ç°AçŠ¶æ€ä¸‹çš„è¡Œä¸º&amp;lt;br&amp;gt;å¹¶çŸ¥æ‚‰ä¸‹ä¸€ä¸ªçŠ¶æ€]
C --&amp;gt; E[å…·ä½“çŠ¶æ€ ConcreteStateB&amp;lt;br&amp;gt;å®ç°BçŠ¶æ€ä¸‹çš„è¡Œä¸º&amp;lt;br&amp;gt;å¹¶çŸ¥æ‚‰ä¸‹ä¸€ä¸ªçŠ¶æ€]
C --&amp;gt; F[å…·ä½“çŠ¶æ€ ConcreteStateN&amp;lt;br&amp;gt;...]
B -- å§”æ‰˜è¯·æ±‚ --&amp;gt; D
B -- å§”æ‰˜è¯·æ±‚ --&amp;gt; E
B -- å§”æ‰˜è¯·æ±‚ --&amp;gt; F
D --&amp;gt; H[åœ¨é€‚å½“æ¡ä»¶ä¸‹&amp;lt;br&amp;gt;è°ƒç”¨Context.setState&amp;lt;br&amp;gt;å°†çŠ¶æ€åˆ‡æ¢è‡³Bæˆ–å…¶ä»–çŠ¶æ€]
E --&amp;gt; I[åœ¨é€‚å½“æ¡ä»¶ä¸‹&amp;lt;br&amp;gt;è°ƒç”¨Context.setState&amp;lt;br&amp;gt;å°†çŠ¶æ€åˆ‡æ¢è‡³Aæˆ–å…¶ä»–çŠ¶æ€]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»å›¾è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œ&lt;strong&gt;ç¯å¢ƒç±»ï¼ˆContextï¼‰&lt;/strong&gt; æ˜¯çŠ¶æ€æ¨¡å¼çš„â€œå¤§è„‘â€ï¼Œå®ƒæŒæœ‰ä¸€ä¸ªçŠ¶æ€å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶å°†æ‰€æœ‰çŠ¶æ€ç›¸å…³çš„è¯·æ±‚å§”æ‰˜ç»™å½“å‰çŠ¶æ€å¯¹è±¡å¤„ç†ã€‚è€Œæ¯ä¸ª&lt;strong&gt;å…·ä½“çŠ¶æ€ï¼ˆConcreteStateï¼‰&lt;/strong&gt; ç±»åˆ™ä¸ä»…çŸ¥é“è‡ªèº«çŠ¶æ€ä¸‹è¯¥åšä»€ä¹ˆï¼Œè¿˜çŸ¥é“æ¥ä¸‹æ¥åº”è¯¥åˆ‡æ¢åˆ°ä»€ä¹ˆçŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥æ·±å…¥çœ‹çœ‹çŠ¶æ€æ¨¡å¼çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h3 id="-çŠ¶æ€æ¨¡å¼çš„æ ¸å¿ƒè§’è‰²"&gt;ğŸ”§ çŠ¶æ€æ¨¡å¼çš„æ ¸å¿ƒè§’è‰²
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€æ¨¡å¼é€šå¸¸åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼Œå®ƒä»¬å…±åŒåä½œï¼Œå®ç°äº†å¯¹è±¡è¡Œä¸ºçš„åŠ¨æ€å˜åŒ–ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒç±» (Context)&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å®ƒå®šä¹‰äº†å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤ä¸€ä¸ªå½“å‰çŠ¶æ€å¯¹è±¡ï¼ˆStateï¼‰çš„å®ä¾‹&lt;/strong&gt;ï¼Œè¿™ä¸ªå®ä¾‹å®šä¹‰äº†å½“å‰çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;è´Ÿè´£åœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œ&lt;strong&gt;å°†è¯·æ±‚å§”æ‰˜ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡æ¥å¤„ç†&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ½è±¡çŠ¶æ€ (State)&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒå®šä¹‰äº†æ‰€æœ‰å…·ä½“çŠ¶æ€ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•é€šå¸¸å¯¹åº”ç€å¯¹è±¡åœ¨è¯¥çŠ¶æ€ä¸‹å¯èƒ½çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…·ä½“çŠ¶æ€ (Concrete State)&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è¿™äº›ç±»å®ç°äº†æŠ½è±¡çŠ¶æ€æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯ä¸ªå…·ä½“çŠ¶æ€ç±»å°è£…äº†åœ¨ç‰¹å®šçŠ¶æ€ä¸‹çš„è¡Œä¸ºå®ç°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œ&lt;strong&gt;å…·ä½“çŠ¶æ€å¯¹è±¡å¯èƒ½ä¼šæ ¹æ®éœ€è¦æ”¹å˜ç¯å¢ƒå¯¹è±¡å½“å‰çš„çŠ¶æ€&lt;/strong&gt;ï¼ˆå³åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå…·ä½“çŠ¶æ€å¯¹è±¡ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-çŠ¶æ€æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"&gt;âš–ï¸ çŠ¶æ€æ¨¡å¼çš„ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;h4 id="-ä¼˜ç‚¹-1"&gt;âœ… ä¼˜ç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¸…æ™°çš„ç»“æ„ä¸å•ä¸€èŒè´£&lt;/strong&gt;ï¼šå°†ä¸åŒçŠ¶æ€çš„è¡Œä¸ºåˆ†æ•£åˆ°ä¸åŒçš„çŠ¶æ€ç±»ä¸­ï¼Œé¿å…äº†åºå¤§çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼ˆå¦‚ &lt;code&gt;if-else&lt;/code&gt;æˆ– &lt;code&gt;switch-case&lt;/code&gt;ï¼‰ï¼Œä»£ç æ›´æ¸…æ™°ï¼Œæ¯ä¸ªçŠ¶æ€ç±»èŒè´£æ˜ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/strong&gt;ï¼šå¢åŠ æ–°çš„çŠ¶æ€éå¸¸ç®€å•ï¼Œåªéœ€åˆ›å»ºæ–°çš„å…·ä½“çŠ¶æ€ç±»å³å¯ï¼Œé€šå¸¸&lt;strong&gt;æ— éœ€ä¿®æ”¹ç°æœ‰çŠ¶æ€ç±»æˆ–ä¸Šä¸‹æ–‡&lt;/strong&gt;ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€è½¬æ¢é€»è¾‘æ˜¾å¼åŒ–&lt;/strong&gt;ï¼šçŠ¶æ€ä¹‹é—´çš„è½¬æ¢é€»è¾‘å¯ä»¥åˆ†å¸ƒåœ¨å…·ä½“çŠ¶æ€ç±»ä¸­ï¼Œä½¿å¾—è½¬æ¢çš„ç›®çš„å’Œè·¯å¾„æ›´åŠ æ˜ç¡®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-ç¼ºç‚¹-1"&gt;âŒ ç¼ºç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯èƒ½å¢åŠ ç±»çš„æ•°é‡&lt;/strong&gt;ï¼šå¦‚æœçŠ¶æ€éå¸¸å¤šï¼Œä¼šå¯¼è‡´ç³»ç»Ÿä¸­æœ‰å¤§é‡çš„å…·ä½“çŠ¶æ€ç±»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€è½¬æ¢åˆ†æ•£&lt;/strong&gt;ï¼šçŠ¶æ€è½¬æ¢çš„é€»è¾‘åˆ†å¸ƒåœ¨å„ä¸ªå…·ä½“çŠ¶æ€ç±»ä¸­ï¼Œè€Œä¸æ˜¯é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæœ‰æ—¶å¯èƒ½ä½¿çŠ¶æ€è½¬æ¢çš„é€»è¾‘å˜å¾—åˆ†æ•£è€Œä¸æ˜“æ•´ä½“æŠŠæ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-çŠ¶æ€æ¨¡å¼çš„åº”ç”¨åœºæ™¯"&gt;ğŸ› ï¸ çŠ¶æ€æ¨¡å¼çš„åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€æ¨¡å¼åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡çš„è¡Œä¸ºä¸¥é‡ä¾èµ–äºå®ƒçš„çŠ¶æ€&lt;/strong&gt;ï¼Œå¹¶ä¸”å¿…é¡»åœ¨è¿è¡Œæ—¶æ ¹æ®çŠ¶æ€æ”¹å˜å…¶è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªæ“ä½œä¸­åŒ…å«åºå¤§çš„åˆ†æ”¯ç»“æ„&lt;/strong&gt;ï¼Œå¹¶ä¸”è¿™äº›åˆ†æ”¯å–å†³äºå¯¹è±¡çš„çŠ¶æ€ã€‚ä½¿ç”¨çŠ¶æ€æ¨¡å¼å¯ä»¥æ¶ˆé™¤è¿™äº›æ¡ä»¶åˆ†æ”¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§çš„å…·ä½“åº”ç”¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¢å•/å·¥ä½œæµç³»ç»Ÿ&lt;/strong&gt;ï¼šå¦‚ç”µå•†è®¢å•çš„â€œå¾…æ”¯ä»˜â€ã€â€œå·²æ”¯ä»˜â€ã€â€œå·²å‘è´§â€ã€â€œå·²å®Œæˆâ€ç­‰çŠ¶æ€æµè½¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸¸æˆå¼€å‘&lt;/strong&gt;ï¼šç®¡ç†æ¸¸æˆè§’è‰²çš„ä¸åŒçŠ¶æ€ï¼ˆå¦‚ç«™ç«‹ã€å¥”è·‘ã€è·³è·ƒã€æ”»å‡»ï¼‰ï¼Œæ¯ç§çŠ¶æ€å¯¹åº”ä¸åŒçš„è¡Œä¸ºå’ŒåŠ¨ç”»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œè¿æ¥/çº¿ç¨‹ç®¡ç†&lt;/strong&gt;ï¼šç®¡ç†TCPè¿æ¥çš„çŠ¶æ€ï¼ˆå¦‚å»ºç«‹è¿æ¥ã€ç›‘å¬ã€å·²å…³é—­ï¼‰æˆ–çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼ˆæ–°å»ºã€å°±ç»ªã€è¿è¡Œã€é˜»å¡ã€æ­»äº¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ç•Œé¢äº¤äº’&lt;/strong&gt;ï¼šç®¡ç†UIç»„ä»¶åœ¨ä¸åŒäº¤äº’çŠ¶æ€ä¸‹çš„æ˜¾ç¤ºå’Œè¡Œä¸ºï¼ˆå¦‚æŒ‰é’®çš„ç¦ç”¨ã€æ‚¬åœã€æŒ‰ä¸‹çŠ¶æ€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹è®¢å•çŠ¶æ€æµè½¬"&gt;ğŸ“Ÿ ä»£ç ç¤ºä¾‹ï¼šè®¢å•çŠ¶æ€æµè½¬
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªç”¨ Java å®ç°çš„ç®€åŒ–ç‰ˆè®¢å•çŠ¶æ€ç®¡ç†ç¤ºä¾‹ï¼Œå±•ç¤ºäº†çŠ¶æ€æ¨¡å¼å¦‚ä½•ä¼˜é›…åœ°å¤„ç†çŠ¶æ€è½¬æ¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// 1. æŠ½è±¡çŠ¶æ€æ¥å£
public interface OrderState {
void pay(OrderContext context);
void cancel(OrderContext context);
// å¯æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–æ“ä½œï¼Œå¦‚ ship(), confirm() ç­‰
}
// 2. å…·ä½“çŠ¶æ€ç±»ï¼šå¾…æ”¯ä»˜çŠ¶æ€
public class UnpaidState implements OrderState {
@Override
public void pay(OrderContext context) {
System.out.println(&amp;#34;æ”¯ä»˜æˆåŠŸï¼Œè®¢å•çŠ¶æ€å˜ä¸ºå·²æ”¯ä»˜ã€‚&amp;#34;);
context.setState(new PaidState()); // çŠ¶æ€è½¬æ¢ï¼šå¾…æ”¯ä»˜ -&amp;gt; å·²æ”¯ä»˜
}
@Override
public void cancel(OrderContext context) {
System.out.println(&amp;#34;å–æ¶ˆè®¢å•æˆåŠŸï¼Œè®¢å•å·²å…³é—­ã€‚&amp;#34;);
context.setState(new CancelledState()); // çŠ¶æ€è½¬æ¢ï¼šå¾…æ”¯ä»˜ -&amp;gt; å·²å–æ¶ˆ
}
}
// 3. å…·ä½“çŠ¶æ€ç±»ï¼šå·²æ”¯ä»˜çŠ¶æ€
public class PaidState implements OrderState {
@Override
public void pay(OrderContext context) {
System.out.println(&amp;#34;è®¢å•å·²æ”¯ä»˜ï¼Œè¯·å‹¿é‡å¤æ”¯ä»˜ã€‚&amp;#34;);
// ä¸å†è¿›è¡ŒçŠ¶æ€è½¬æ¢
}
@Override
public void cancel(OrderContext context) {
System.out.println(&amp;#34;ç”³è¯·å–æ¶ˆå·²æ”¯ä»˜çš„è®¢å•ï¼Œè¿›å…¥é€€æ¬¾æµç¨‹ã€‚&amp;#34;);
context.setState(new RefundingState()); // çŠ¶æ€è½¬æ¢ï¼šå·²æ”¯ä»˜ -&amp;gt; é€€æ¬¾ä¸­
}
}
// 4. ç¯å¢ƒç±»ï¼šè®¢å•ä¸Šä¸‹æ–‡
public class OrderContext {
private OrderState currentState;
public OrderContext() {
this.currentState = new UnpaidState(); // åˆå§‹çŠ¶æ€ä¸ºâ€œå¾…æ”¯ä»˜â€
}
public void setState(OrderState state) {
this.currentState = state;
}
// å°†æ“ä½œå§”æ‰˜ç»™å½“å‰çŠ¶æ€å¯¹è±¡
public void pay() {
currentState.pay(this);
}
public void cancel() {
currentState.cancel(this);
}
}
// 5. å®¢æˆ·ç«¯ä½¿ç”¨
public class Client {
public static void main(String[] args) {
OrderContext order = new OrderContext();
order.pay(); // è¾“å‡º: æ”¯ä»˜æˆåŠŸï¼Œè®¢å•çŠ¶æ€å˜ä¸ºå·²æ”¯ä»˜ã€‚
order.cancel(); // è¾“å‡º: ç”³è¯·å–æ¶ˆå·²æ”¯ä»˜çš„è®¢å•ï¼Œè¿›å…¥é€€æ¬¾æµç¨‹ã€‚
// æ­¤æ—¶ order çš„å½“å‰çŠ¶æ€æ˜¯ RefundingState
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;åœ¨è¿™ä¸ªç®€åŒ–çš„ä¾‹å­ä¸­ï¼Œ&lt;code&gt;RefundingState&lt;/code&gt;ï¼ˆé€€æ¬¾ä¸­ï¼‰å’Œ &lt;code&gt;CancelledState&lt;/code&gt;ï¼ˆå·²å–æ¶ˆï¼‰ç­‰å…·ä½“çŠ¶æ€ç±»éœ€è¦ä½ æ ¹æ®ä¸Šè¿°æ¨¡å¼è‡ªè¡Œè¡¥å……å®Œæ•´ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="-çŠ¶æ€è½¬æ¢çš„è§¦å‘æ–¹å¼"&gt;ğŸ’¡ çŠ¶æ€è½¬æ¢çš„è§¦å‘æ–¹å¼
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€è½¬æ¢é€šå¸¸ç”±ä¸‰ç§æ–¹å¼è§¦å‘ï¼Œå…·ä½“å–å†³äºè®¾è®¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”±å…·ä½“çŠ¶æ€ç±»è§¦å‘ï¼ˆæ¨èï¼‰&lt;/strong&gt;ï¼šå¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œæ¯ä¸ªå…·ä½“çŠ¶æ€ç±»åœ¨å¤„ç†å®Œè‡ªå·±çš„è¡Œä¸ºåï¼Œ&lt;strong&gt;è´Ÿè´£æŒ‡å®šå¹¶åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€&lt;/strong&gt;ã€‚è¿™ç§æ–¹å¼å°†çŠ¶æ€è½¬æ¢é€»è¾‘åˆ†å¸ƒåˆ°å„ä¸ªçŠ¶æ€ç±»ä¸­ï¼Œç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”±ç¯å¢ƒç±»è§¦å‘&lt;/strong&gt;ï¼šç¯å¢ƒç±»æŒæœ‰æ‰€æœ‰çŠ¶æ€å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶æ ¹æ®ä¸€å®šçš„æ¡ä»¶ï¼ˆå¯èƒ½æ˜¯æŸäº›å±æ€§å€¼çš„å˜åŒ–ï¼‰æ¥&lt;strong&gt;å†³å®šåˆ‡æ¢åˆ°å“ªä¸ªçŠ¶æ€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”±å®¢æˆ·ç«¯è§¦å‘ï¼ˆä¸æ¨èï¼‰&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯ç›´æ¥è®¾ç½®ç¯å¢ƒå¯¹è±¡çš„çŠ¶æ€ã€‚è¿™ç§æ–¹å¼ç ´åäº†å°è£…æ€§ï¼Œå› ä¸ºå®¢æˆ·ç«¯éœ€è¦çŸ¥é“å…·ä½“çŠ¶æ€ç±»ï¼Œå¹¶ä½¿çŠ¶æ€è½¬æ¢é€»è¾‘åˆ†æ•£åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼çš„åŒºåˆ«"&gt;ğŸ”„ çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼åœ¨ç»“æ„ä¸Šéå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä»¬çš„ç›®çš„ä¸åŒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;çŠ¶æ€æ¨¡å¼ (State Pattern)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç­–ç•¥æ¨¡å¼ (Strategy Pattern)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç®¡ç†çŠ¶æ€æµè½¬&lt;/strong&gt;ï¼Œè¡Œä¸ºéš&lt;strong&gt;å†…éƒ¨çŠ¶æ€&lt;/strong&gt;è‡ªåŠ¨å˜åŒ–ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ›¿æ¢ç®—æ³•&lt;/strong&gt;ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨é€‰æ‹©æˆ–æ›´æ¢ç­–ç•¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çŠ¶æ€/ç­–ç•¥çŸ¥æ™“æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…·ä½“çŠ¶æ€ç±»é€šå¸¸&lt;strong&gt;çŸ¥é“ä¸‹ä¸€ä¸ªçŠ¶æ€æ˜¯ä»€ä¹ˆ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç­–ç•¥ä¹‹é—´&lt;strong&gt;ç›¸äº’ç‹¬ç«‹&lt;/strong&gt;ï¼Œä¸çŸ¥é“å…¶ä»–ç­–ç•¥çš„å­˜åœ¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½¬æ¢è§¦å‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çŠ¶æ€è½¬æ¢å¯ç”±&lt;strong&gt;å†…éƒ¨çŠ¶æ€è‡ªåŠ¨è§¦å‘&lt;/strong&gt;ï¼ˆå¦‚åœ¨å…·ä½“çŠ¶æ€ç±»ä¸­åˆ‡æ¢ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;ç­–ç•¥é€šå¸¸ç”±&lt;strong&gt;å®¢æˆ·ç«¯åœ¨å¤–éƒ¨æ˜¾å¼æŒ‡å®šå’Œæ›´æ¢&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå…³æ³¨ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å°è£…ä¸çŠ¶æ€ç›¸å…³çš„è¡Œä¸º&lt;/strong&gt;å’Œ&lt;strong&gt;çŠ¶æ€è½¬æ¢é€»è¾‘&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å°è£…å¯äº’æ¢çš„ç®—æ³•&lt;/strong&gt;ï¼Œä½¿ç®—æ³•ç‹¬ç«‹äºå®¢æˆ·ç«¯è€Œå˜åŒ–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•ç†è§£ï¼šçŠ¶æ€æ¨¡å¼æ˜¯ &lt;strong&gt;â€œçŠ¶æ€â€é©±åŠ¨â€œè¡Œä¸ºâ€&lt;/strong&gt;ï¼Œè€Œç­–ç•¥æ¨¡å¼æ˜¯ &lt;strong&gt;â€œç­–ç•¥â€ï¼ˆç®—æ³•ï¼‰æœ¬èº«å°±æ˜¯â€œè¡Œä¸ºâ€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€æ¨¡å¼é€šè¿‡å°†&lt;strong&gt;çŠ¶æ€æŠ½è±¡ä¸ºå¯¹è±¡&lt;/strong&gt;ï¼Œå¹¶å°†&lt;strong&gt;è¡Œä¸ºå°è£…åˆ°å¯¹åº”çš„çŠ¶æ€ç±»ä¸­&lt;/strong&gt;ï¼Œå·§å¦™åœ°è§£å†³äº†å¯¹è±¡è¡Œä¸ºä¾èµ–äºå…¶å†…éƒ¨çŠ¶æ€çš„é—®é¢˜ã€‚å®ƒæ¶ˆé™¤äº†ç¹ççš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œä½¿ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ çš„å¯¹è±¡æ‹¥æœ‰å¤šä¸ªçŠ¶æ€ï¼Œä¸”è¡Œä¸ºéšç€çŠ¶æ€æ”¹å˜è€Œæ”¹å˜ï¼Œç‰¹åˆ«æ˜¯çŠ¶æ€è½¬æ¢é€»è¾‘æ¯”è¾ƒå¤æ‚æ—¶ï¼ŒçŠ¶æ€æ¨¡å¼æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—è€ƒè™‘çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id="è¡Œä¸ºå‹æ¨¡å¼"&gt;è¡Œä¸ºå‹æ¨¡å¼
&lt;/h2&gt;&lt;p&gt;è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡ä¹‹é—´çš„èŒè´£åˆ†é…å’Œé€šä¿¡æ–¹å¼ï¼Œå®ƒä»¬å¸®åŠ©å¯¹è±¡ä¹‹é—´æ›´å¥½åœ°åä½œï¼Œä½¿ç³»ç»Ÿæ›´çµæ´»ã€å¯ç»´æŠ¤ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ æ¢³ç†è¿™äº›æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ã€å¸¸è§ç±»å‹åŠåº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;h3 id="-è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼æ¦‚è§ˆ"&gt;ğŸ§  è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼æ¦‚è§ˆ
&lt;/h3&gt;&lt;p&gt;è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;ç®¡ç†å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€é€šä¿¡å’ŒèŒè´£åˆ†é…&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯èšç„¦äºå¯¹è±¡çš„åˆ›å»ºæˆ–ç»“æ„ç»„åˆã€‚å®ƒä»¬é€šè¿‡å®šä¹‰æ¸…æ™°çš„é€šä¿¡æ¨¡å¼ï¼Œä½¿ç³»ç»Ÿåœ¨åº”å¯¹å˜åŒ–æ—¶æ›´åŠ çµæ´»ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®å¯¹è±¡é—´äº¤äº’æ–¹å¼çš„ä¸åŒï¼Œè¡Œä¸ºå‹æ¨¡å¼å¯å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸ºç±»æ¨¡å¼&lt;/strong&gt;ï¼šä¸»è¦ä½¿ç”¨&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;æœºåˆ¶åœ¨ç±»é—´åˆ†é…è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡Œä¸ºå¯¹è±¡æ¨¡å¼&lt;/strong&gt;ï¼šä¸»è¦ä½¿ç”¨&lt;strong&gt;å¯¹è±¡ç»„åˆ&lt;/strong&gt;ï¼ˆå¦‚ä¸€ä¸ªå¯¹è±¡æŒæœ‰å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼‰æ¥è¿›è¡Œè¡Œä¸ºåˆ†é…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤šæ•°å¸¸è§çš„è¡Œä¸ºå‹æ¨¡å¼å±äºâ€œè¡Œä¸ºå¯¹è±¡æ¨¡å¼â€ï¼Œå®ƒä»¬æ›´å¼ºè°ƒè¿è¡Œæ—¶çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦è¡Œä¸ºå‹æ¨¡å¼é€Ÿè§ˆè¡¨"&gt;ğŸ“Š ä¸»è¦è¡Œä¸ºå‹æ¨¡å¼é€Ÿè§ˆè¡¨
&lt;/h3&gt;&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†11ç§ç»å…¸è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³ä¸å…¸å‹åœºæ™¯ï¼Œå¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¨¡å¼åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€æƒ³&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡æ¿æ–¹æ³•æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ç®—æ³•éª¨æ¶ï¼Œå°†æ­¥éª¤å®ç°å»¶è¿Ÿåˆ°å­ç±»ï¼Œé¿å…é‡å¤ä»£ç &lt;/td&gt;
&lt;td&gt;å¤šä¸ªç±»æœ‰ç›¸ä¼¼è¡Œä¸ºé€»è¾‘ï¼›éœ€è¦å­ç±»å®ç°ç‰¹å®šæ­¥éª¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç­–ç•¥æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è£…ä¸€ç³»åˆ—ç®—æ³•ï¼Œä½¿å®ƒä»¬èƒ½ç›¸äº’æ›¿æ¢ï¼Œè®©ç®—æ³•ç‹¬ç«‹äºå®¢æˆ·ç«¯å˜åŒ–&lt;/td&gt;
&lt;td&gt;éœ€åŠ¨æ€é€‰æ‹©ç®—æ³•ï¼›é¿å…å¤šé‡æ¡ä»¶åˆ¤æ–­ï¼ˆå¦‚æ”¯ä»˜æ–¹å¼ã€æ’åºç­–ç•¥ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§‚å¯Ÿè€…æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä¸»é¢˜çŠ¶æ€å˜åŒ–æ—¶è‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªå¯¹è±¡å˜åŒ–éœ€é€šçŸ¥å…¶ä»–å¤šä¸ªå¯¹è±¡ï¼›äº‹ä»¶é©±åŠ¨ç³»ç»Ÿï¼ˆå¦‚æ¶ˆæ¯è®¢é˜…ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çŠ¶æ€æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜è¡Œä¸ºï¼Œå°†çŠ¶æ€å°è£…ä¸ºç‹¬ç«‹ç±»&lt;/td&gt;
&lt;td&gt;å¯¹è±¡è¡Œä¸ºä¾èµ–äºå…¶çŠ¶æ€ï¼›éœ€é€šè¿‡çŠ¶æ€æ§åˆ¶è¡Œä¸ºï¼ˆå¦‚è®¢å•çŠ¶æ€æµè½¬ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒè´£é“¾æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºè¯·æ±‚åˆ›å»ºæ¥æ”¶é“¾ï¼Œå¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œé¿å…å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆ&lt;/td&gt;
&lt;td&gt;å¤šä¸ªå¯¹è±¡å¯å¤„ç†åŒä¸€è¯·æ±‚ï¼›éœ€åŠ¨æ€æŒ‡å®šå¤„ç†è€…ï¼ˆå¦‚å®¡æ‰¹æµç¨‹ã€è¿‡æ»¤å™¨é“¾ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½ä»¤æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡ï¼Œä»è€Œæ”¯æŒå‚æ•°åŒ–ã€æ’é˜Ÿã€è®°å½•æ—¥å¿—åŠæ’¤é”€æ“ä½œ&lt;/td&gt;
&lt;td&gt;éœ€æ”¯æŒæ“ä½œæ’¤é”€/é‡åšï¼›éœ€å°†è¯·æ±‚æ’é˜Ÿæˆ–è®°å½•æ—¥å¿—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§£é‡Šå™¨æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰ä¸€ç§è¯­è¨€çš„æ–‡æ³•ï¼Œå¹¶æä¾›ä¸€ä¸ªè§£é‡Šå™¨æ¥è§£é‡Šå¥å­&lt;/td&gt;
&lt;td&gt;éœ€è¦è§£é‡Šç‰¹å®šè§„åˆ™æˆ–è¡¨è¾¾å¼ï¼ˆå¦‚æ­£åˆ™è¡¨è¾¾å¼ã€ç®€å•è¯­æ³•è§£æï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿­ä»£å™¨æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®èšåˆå¯¹è±¡å…ƒç´ ï¼Œè€Œä¸æš´éœ²å…¶å†…éƒ¨è¡¨ç¤º&lt;/td&gt;
&lt;td&gt;éœ€è¦éå†èšåˆå¯¹è±¡ï¼›éœ€æä¾›å¤šç§éå†æ–¹å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸­ä»‹è€…æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡å°è£…ä¸€ç³»åˆ—å¯¹è±¡çš„äº¤äº’ï¼Œä½¿å®ƒä»¬ä¸éœ€è¦æ˜¾å¼ç›¸äº’å¼•ç”¨ï¼Œé™ä½è€¦åˆ&lt;/td&gt;
&lt;td&gt;å¯¹è±¡é—´å­˜åœ¨å¤æ‚å¼•ç”¨å…³ç³»ï¼›éœ€ç»Ÿä¸€ç®¡ç†ç½‘çŠ¶èµ„æºï¼ˆå¦‚èŠå¤©å®¤ã€GUIç»„ä»¶äº¤äº’ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤‡å¿˜å½•æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ä¸ç ´åå°è£…å‰æä¸‹ï¼Œæ•è·å¹¶å¤–éƒ¨åŒ–å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»¥ä¾¿æ—¥åæ¢å¤&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¿å­˜å’Œæ¢å¤å¯¹è±¡çŠ¶æ€ï¼›éœ€æä¾›æ’¤é”€æ“ä½œï¼ˆå¦‚æ–‡æœ¬ç¼–è¾‘å™¨æ’¤é”€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®è€…æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä½œç”¨äºæŸæ•°æ®ç»“æ„ä¸­å„å…ƒç´ çš„æ“ä½œå°è£…èµ·æ¥ï¼Œå…è®¸åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„å‰æä¸‹æ·»åŠ æ–°æ“ä½œ&lt;/td&gt;
&lt;td&gt;éœ€å¯¹å¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ æ‰§è¡Œè®¸å¤šä¸ç›¸å…³æ“ä½œï¼›é¿å…è¿™äº›æ“ä½œâ€œæ±¡æŸ“â€å…ƒç´ ç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å‡ ç§é‡è¦æ¨¡å¼çš„æ·±å…¥ç†è§£"&gt;ğŸ’¡ å‡ ç§é‡è¦æ¨¡å¼çš„æ·±å…¥ç†è§£
&lt;/h3&gt;&lt;h4 id="-1-èŒè´£é“¾æ¨¡å¼-chain-of-responsibility"&gt;ğŸ”— 1. èŒè´£é“¾æ¨¡å¼ (Chain of Responsibility)
&lt;/h4&gt;&lt;p&gt;æ­¤æ¨¡å¼å°†å¤šä¸ªå¤„ç†è¯·æ±‚çš„å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œè¯·æ±‚æ²¿é“¾ä¼ é€’ç›´è‡³è¢«å¤„ç†ã€‚&lt;strong&gt;å‘é€è€…ä¸æ¥æ”¶è€…è§£è€¦&lt;/strong&gt;æ˜¯å…¶ä¸»è¦ä¼˜ç‚¹ï¼Œæ¯ä¸ªå¤„ç†å¯¹è±¡åªéœ€å…³æ³¨è‡ªå·±åç»­çš„å¤„ç†è€…ï¼Œæ— éœ€çŸ¥é“æ•´æ¡é“¾çš„ç»“æ„ã€‚å®ƒå¸¸ç”¨äºå®¡æ‰¹æµç¨‹ã€å¼‚å¸¸å¤„ç†é“¾æˆ–è¿‡æ»¤å™¨é“¾ç­‰åœºæ™¯ã€‚&lt;/p&gt;
&lt;h4 id="-2-å‘½ä»¤æ¨¡å¼-command"&gt;ğŸ“‹ 2. å‘½ä»¤æ¨¡å¼ (Command)
&lt;/h4&gt;&lt;p&gt;æ­¤æ¨¡å¼å°†è¯·æ±‚å°è£…ä¸ºå¯¹è±¡ï¼Œä½¿ä½ å¯ç”¨ä¸åŒè¯·æ±‚å‚æ•°åŒ–å…¶ä»–å¯¹è±¡ï¼Œå¹¶æ”¯æŒ&lt;strong&gt;å¯æ’¤é”€æ“ä½œã€è¯·æ±‚æ’é˜Ÿå’Œæ—¥å¿—è®°å½•&lt;/strong&gt;ã€‚é€šè¿‡å¼•å…¥&lt;code&gt;Command&lt;/code&gt;æ¥å£ã€&lt;code&gt;ConcreteCommand&lt;/code&gt;ã€&lt;code&gt;Invoker&lt;/code&gt;å’Œ&lt;code&gt;Receiver&lt;/code&gt;è§’è‰²ï¼Œå®ƒè§£è€¦äº†è¯·æ±‚å‘é€è€…å’Œæ‰§è¡Œè€…ã€‚&lt;/p&gt;
&lt;h4 id="-3-çŠ¶æ€æ¨¡å¼-state"&gt;ğŸ”„ 3. çŠ¶æ€æ¨¡å¼ (State)
&lt;/h4&gt;&lt;p&gt;æ­¤æ¨¡å¼å…è®¸å¯¹è±¡åœ¨å…¶&lt;strong&gt;å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º&lt;/strong&gt;ï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚å®ƒå°†ç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºå±€éƒ¨åŒ–ï¼Œå¹¶ä¸”å°†ä¸åŒçŠ¶æ€çš„è¡Œä¸ºåˆ†å‰²å¼€æ¥ï¼Œé€šè¿‡å®šä¹‰æ–°çš„å­ç±»å¯ä»¥å¾ˆå®¹æ˜“åœ°å¢åŠ æ–°çš„çŠ¶æ€å’Œè½¬æ¢ã€‚çŠ¶æ€æ¨¡å¼åœ¨è®¢å•çŠ¶æ€æµè½¬ã€æ¸¸æˆè§’è‰²çŠ¶æ€æœºç­‰åœºæ™¯ä¸­éå¸¸å®ç”¨ã€‚&lt;/p&gt;
&lt;h4 id="-4-è§‚å¯Ÿè€…æ¨¡å¼-observer"&gt;ğŸ“¢ 4. è§‚å¯Ÿè€…æ¨¡å¼ (Observer)
&lt;/h4&gt;&lt;p&gt;æ­¤æ¨¡å¼å®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§&lt;strong&gt;ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»&lt;/strong&gt;ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸»é¢˜ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…ï¼‰éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§&lt;strong&gt;å‘å¸ƒ-è®¢é˜…&lt;/strong&gt;æœºåˆ¶å®ç°äº†ä¸»é¢˜ä¸è§‚å¯Ÿè€…ä¹‹é—´çš„è§£è€¦ï¼Œä½†éœ€æ³¨æ„ç®¡ç†è§‚å¯Ÿè€…çš„æ³¨å†Œä¸æ³¨é”€ï¼Œä»¥é˜²å†…å­˜æ³„æ¼ã€‚&lt;/p&gt;
&lt;h4 id="-5-ç­–ç•¥æ¨¡å¼-strategy"&gt;ğŸ§  5. ç­–ç•¥æ¨¡å¼ (Strategy)
&lt;/h4&gt;&lt;p&gt;æ­¤æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥&lt;strong&gt;äº’ç›¸æ›¿æ¢&lt;/strong&gt;ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯è€Œå˜åŒ–ã€‚é€šè¿‡å®šä¹‰ç­–ç•¥æ¥å£ã€å…·ä½“ç­–ç•¥ç±»å’Œä¸€ä¸ªæŒæœ‰ç­–ç•¥å¼•ç”¨çš„ä¸Šä¸‹æ–‡ç±»ï¼Œå®ƒ&lt;strong&gt;é¿å…äº†å¤§é‡çš„æ¡ä»¶åˆ¤æ–­è¯­å¥&lt;/strong&gt;ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-è¡Œä¸ºå‹æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"&gt;âš–ï¸ è¡Œä¸ºå‹æ¨¡å¼çš„ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;h4 id="-ä¼˜ç‚¹-2"&gt;âœ… ä¼˜ç‚¹ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£è€¦å¯¹è±¡&lt;/strong&gt;ï¼šæœ‰æ•ˆé™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£æ¸…æ™°&lt;/strong&gt;ï¼šæ˜ç¡®äº†å¯¹è±¡é—´çš„èŒè´£åˆ†é…ï¼Œæ¯ä¸ªç±»æˆ–å¯¹è±¡ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜“äºæ‰©å±•&lt;/strong&gt;ï¼šè®¸å¤šæ¨¡å¼éƒ½æ”¯æŒå¼€é—­åŸåˆ™ï¼Œæ˜“äºå¢åŠ æ–°çš„è¡Œä¸ºæˆ–ç»„ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-ç¼ºç‚¹-2"&gt;âŒ ç¼ºç‚¹ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚åº¦å¢åŠ &lt;/strong&gt;ï¼šå¼•å…¥æ–°æ¨¡å¼å¯èƒ½ä¼šå¢åŠ ç±»å’Œå¯¹è±¡çš„æ•°é‡ï¼Œä½¿ç³»ç»Ÿç»“æ„æ›´å¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šæŸäº›æ¨¡å¼ï¼ˆå¦‚ä¸­ä»‹è€…æ¨¡å¼ï¼‰è‹¥è®¾è®¡ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£æˆæœ¬&lt;/strong&gt;ï¼šéœ€è¦å¼€å‘è€…ç†è§£æ¨¡å¼æ„å›¾å’Œé€‚ç”¨åœºæ™¯ï¼Œæ»¥ç”¨å¯èƒ½é€‚å¾—å…¶åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åˆé€‚çš„è¡Œä¸ºå‹æ¨¡å¼"&gt;ğŸ’ å¦‚ä½•é€‰æ‹©åˆé€‚çš„è¡Œä¸ºå‹æ¨¡å¼
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§è¡Œä¸ºå‹æ¨¡å¼ï¼Œå–å†³äºä½ é¢ä¸´çš„å…·ä½“é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;åŠ¨æ€é€‰æ‹©å¤šç§ç®—æ³•&lt;/strong&gt;ï¼Ÿâ†’ è€ƒè™‘&lt;strong&gt;ç­–ç•¥æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹è±¡è¡Œä¸º&lt;strong&gt;éšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜&lt;/strong&gt;ï¼Ÿâ†’ &lt;strong&gt;çŠ¶æ€æ¨¡å¼&lt;/strong&gt;å¾ˆåˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;å¤„ç†ä¸€ä¸ªå¯èƒ½ç”±å¤šä¸ªå¯¹è±¡å¤„ç†çš„è¯·æ±‚&lt;/strong&gt;ï¼Ÿâ†’ &lt;strong&gt;èŒè´£é“¾æ¨¡å¼&lt;/strong&gt;èƒ½æ´¾ä¸Šç”¨åœºã€‚&lt;/li&gt;
&lt;li&gt;æƒ³è¦&lt;strong&gt;å®ç°æ’¤é”€/é‡åšåŠŸèƒ½&lt;/strong&gt;æˆ–&lt;strong&gt;å°†æ“ä½œæ’é˜Ÿ&lt;/strong&gt;ï¼Ÿâ†’ çœ‹çœ‹&lt;strong&gt;å‘½ä»¤æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å­˜åœ¨&lt;strong&gt;ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»&lt;/strong&gt;ï¼Œä¸€å¯¹è±¡å˜æ›´éœ€é€šçŸ¥å¤šæ–¹ï¼Ÿâ†’ &lt;strong&gt;è§‚å¯Ÿè€…æ¨¡å¼&lt;/strong&gt;æ˜¯ç»å…¸é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸŒŸ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼é€šè¿‡&lt;strong&gt;ä¼˜åŒ–å¯¹è±¡é—´çš„äº¤äº’å’ŒèŒè´£åˆ†é…&lt;/strong&gt;ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³å¤æ‚åä½œé—®é¢˜çš„ä¼˜é›…æ–¹æ¡ˆã€‚å®ƒä»¬&lt;strong&gt;è§£è€¦äº†å¯¹è±¡ä¹‹é—´ç›¸äº’é€šä¿¡å’Œè°ƒç”¨çš„æ–¹å¼&lt;/strong&gt;ï¼Œä½¿ç³»ç»Ÿæ›´æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£è¿™äº›æ¨¡å¼çš„&lt;strong&gt;æ„å›¾&lt;/strong&gt;å’Œ&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼Œæ¯”æ­»è®°ç¡¬èƒŒå…¶ç»“æ„æ›´é‡è¦ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚&lt;strong&gt;çµæ´»é€‰ç”¨ç”šè‡³ç»„åˆä½¿ç”¨&lt;/strong&gt;å¤šç§æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Linux</title><link>https://dyhes.github.io/p/nowcoderlinux/</link><pubDate>Tue, 09 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderlinux/</guid><description>&lt;h2 id="tcpdump"&gt;tcpdump
&lt;/h2&gt;&lt;p&gt;tcpdump æ˜¯ä¸€æ¬¾å¼ºå¤§ä¸”å¹¿æ³›ä½¿ç”¨çš„å‘½ä»¤è¡Œç½‘ç»œæ•°æ®åŒ…æ•è·å’Œåˆ†æå·¥å…·ï¼Œå®ƒå…è®¸ç”¨æˆ·æ‹¦æˆªå’Œæ˜¾ç¤ºå‘é€æˆ–ç»è¿‡è®¡ç®—æœºç½‘ç»œæ¥å£çš„æ•°æ®åŒ…ï¼Œæ˜¯ç½‘ç»œæ•…éšœæ’æŸ¥ã€æ€§èƒ½åˆ†æå’Œå®‰å…¨ç›‘æ§çš„åˆ©å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿäº†è§£ tcpdump å¸¸ç”¨å‘½ä»¤çš„è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŠŸèƒ½ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å‘½ä»¤ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬æ•è·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;tcpdump -i eth0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ•è·æŒ‡å®šæ¥å£ (&lt;code&gt;eth0&lt;/code&gt;) çš„æ‰€æœ‰æ•°æ®åŒ…ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™åˆ¶ä¸ä¿å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;tcpdump -i any -c 10 -w file.pcap&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ•è·æ‰€æœ‰æ¥å£çš„ 10 ä¸ªåŒ…å¹¶ä¿å­˜åˆ° &lt;code&gt;file.pcap&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»æœºä¸ç«¯å£è¿‡æ»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;tcpdump host 192.168.1.1&lt;/code&gt; &lt;code&gt;tcpdump port 80&lt;/code&gt; &lt;code&gt;tcpdump src host 192.168.1.1 and dst port 443&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿‡æ»¤ç‰¹å®šä¸»æœºã€ç«¯å£ï¼Œæˆ–ç»„åˆæ¡ä»¶ï¼ˆå¦‚æºä¸»æœº+ç›®æ ‡ç«¯å£ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè®®è¿‡æ»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;tcpdump icmp&lt;/code&gt; &lt;code&gt;tcpdump tcp&lt;/code&gt; &lt;code&gt;tcpdump udp&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä»…æ•è·ç‰¹å®šåè®®çš„æ•°æ®åŒ…ï¼ˆå¦‚ ICMP, TCP, UDPï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜çº§è¿‡æ»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;tcpdump 'net 192.168.1.0/24'&lt;/code&gt; &lt;code&gt;tcpdump 'tcp port 80 and (tcp[((tcp[12:1] &amp;amp; 0xf0) &amp;gt;&amp;gt; 2):4] = 0x47455420)'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ CIDR è¿‡æ»¤ç½‘æ®µï¼Œæˆ–åŸºäºæŠ¥æ–‡å†…å®¹ï¼ˆå¦‚ HTTP GET è¯·æ±‚ï¼‰è¿›è¡Œè¿‡æ»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ“œ æ ¸å¿ƒåŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;tcpdump çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åŒ…æ•è·&lt;/strong&gt;ï¼šå®æ—¶æ•è·æµç»ç½‘ç»œæ¥å£çš„åŸå§‹ç½‘ç»œæ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾å‡†è¿‡æ»¤&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;BPF (Berkeley Packet Filter)&lt;/strong&gt; è¯­æ³•ï¼Œå¯ä»¥æ ¹æ®æº/ç›®æ ‡ IPã€ç«¯å£ã€åè®®ç±»å‹ç”šè‡³ç‰¹å®šæŠ¥æ–‡å†…å®¹è¿›è¡Œè¿‡æ»¤ï¼Œæå¤§æå‡åˆ†ææ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯¦ç»†è§£æ&lt;/strong&gt;ï¼šå¯¹å¤šç§ç½‘ç»œåè®®ï¼ˆå¦‚ Ethernet, IP, TCP, UDP, ICMP ç­‰ï¼‰è¿›è¡Œè§£æï¼Œå¹¶ä»¥å¯è¯»æ ¼å¼æ˜¾ç¤ºæŠ¥æ–‡å¤´ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¿å­˜ä¸ç¦»çº¿åˆ†æ&lt;/strong&gt;ï¼šå¯å°†æ•è·çš„æ•°æ®åŒ…ä¿å­˜ä¸º &lt;code&gt;.pcap&lt;/code&gt;æ–‡ä»¶ï¼Œä¾¿äºæ—¥åä½¿ç”¨ Wireshark ç­‰å›¾å½¢åŒ–å·¥å…·è¿›è¡Œæ·±å…¥åˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨"&gt;ğŸ› ï¸ å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£… tcpdump&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è®¸å¤š Linux å‘è¡Œç‰ˆä¸­ï¼Œå¯ä»¥ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Debian/Ubuntu: &lt;code&gt;sudo apt install tcpdump&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;RHEL/CentOS: &lt;code&gt;sudo yum install tcpdump&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;macOS (ä½¿ç”¨ Homebrew): &lt;code&gt;brew install tcpdump&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬å‘½ä»¤æ ¼å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;tcpdump çš„åŸºæœ¬å‘½ä»¤æ ¼å¼ä¸ºï¼š&lt;code&gt;sudo tcpdump [é€‰é¡¹] [è¿‡æ»¤è¡¨è¾¾å¼]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-i &amp;lt;æ¥å£&amp;gt;&lt;/code&gt;: æŒ‡å®šç½‘ç»œæ¥å£ï¼Œå¦‚ &lt;code&gt;eth0&lt;/code&gt;, &lt;code&gt;wlan0&lt;/code&gt;, æˆ– &lt;code&gt;any&lt;/code&gt;ï¼ˆæ‰€æœ‰æ¥å£ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-c &amp;lt;æ•°é‡&amp;gt;&lt;/code&gt;: æ•è·æŒ‡å®šæ•°é‡çš„æ•°æ®åŒ…ååœæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-w &amp;lt;æ–‡ä»¶&amp;gt;&lt;/code&gt;: å°†æ•è·çš„æ•°æ®åŒ…å†™å…¥æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-r &amp;lt;æ–‡ä»¶&amp;gt;&lt;/code&gt;: ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n&lt;/code&gt;: ä¸å°† IP åœ°å€è§£æä¸ºä¸»æœºåã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-nn&lt;/code&gt;: ä¸è§£æä¸»æœºåå’Œç«¯å£å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt;, &lt;code&gt;-vv&lt;/code&gt;, &lt;code&gt;-vvv&lt;/code&gt;: æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-X&lt;/code&gt;: ä»¥åå…­è¿›åˆ¶å’Œ ASCII ç å½¢å¼æ˜¾ç¤ºæ•°æ®åŒ…å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-A&lt;/code&gt;: ä»¥ ASCII æ ¼å¼æ‰“å°æ•°æ®åŒ…å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-s &amp;lt;é•¿åº¦&amp;gt;&lt;/code&gt;: è®¾ç½®è¦æ•è·çš„æ•°æ®åŒ…é•¿åº¦ï¼ˆ&lt;code&gt;-s0&lt;/code&gt;è¡¨ç¤ºæ•è·å®Œæ•´æ•°æ®åŒ…ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¸¸ç”¨è¿‡æ»¤è¡¨è¾¾å¼"&gt;ğŸ”§ å¸¸ç”¨è¿‡æ»¤è¡¨è¾¾å¼
&lt;/h3&gt;&lt;p&gt;tcpdump çš„å¨åŠ›åœ¨äºå…¶çµæ´»çš„è¿‡æ»¤è¡¨è¾¾å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰ä¸»æœºè¿‡æ»¤&lt;/strong&gt;ï¼š&lt;code&gt;host 192.168.1.1&lt;/code&gt;(è¿‡æ»¤è¯¥ IP çš„æµé‡)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰æ–¹å‘è¿‡æ»¤&lt;/strong&gt;ï¼š&lt;code&gt;src host 192.168.1.1&lt;/code&gt;(æºåœ°å€), &lt;code&gt;dst host 192.168.1.1&lt;/code&gt;(ç›®æ ‡åœ°å€)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰ç«¯å£è¿‡æ»¤&lt;/strong&gt;ï¼š&lt;code&gt;port 80&lt;/code&gt;, &lt;code&gt;dst port 53&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‰åè®®è¿‡æ»¤&lt;/strong&gt;ï¼š&lt;code&gt;tcp&lt;/code&gt;, &lt;code&gt;udp&lt;/code&gt;, &lt;code&gt;icmp&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é€»è¾‘ç»„åˆ&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;and&lt;/code&gt;(ä¸), &lt;code&gt;or&lt;/code&gt;(æˆ–), &lt;code&gt;not&lt;/code&gt;(é) ç»„åˆæ¡ä»¶ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;src host 192.168.1.100 and (dst port 80 or dst port 443)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ’¡ å®ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•è·ç‰¹å®šä¸»æœºçš„ ICMP åŒ… (å¦‚ Ping)&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo tcpdump -i any -nn icmp and host 192.168.1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•è· HTTP æµé‡å¹¶æ˜¾ç¤ºå†…å®¹&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo tcpdump -i any -A -s0 port 80
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•è·ç‰¹å®šç«¯å£çš„æµé‡å¹¶ä¿å­˜åˆ°æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo tcpdump -i eth0 -w web_traffic.pcap port 80 or port 443
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»ä¿å­˜çš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®åŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo tcpdump -r web_traffic.pcap
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•è· TCP ä¸‰æ¬¡æ¡æ‰‹ (SYN, SYN-ACK, ACK)&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sudo tcpdump -nn &amp;#39;tcp[tcpflags] &amp;amp; (tcp-syn|tcp-ack) != 0&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒé™è¦æ±‚&lt;/strong&gt;ï¼štcpdump éœ€è¦ root æƒé™ï¼ˆé€šå¸¸ä½¿ç”¨ &lt;code&gt;sudo&lt;/code&gt;ï¼‰æ¥è®¿é—®ç½‘ç»œæ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼šåœ¨é«˜æµé‡ç½‘ç»œä¸Šæ•è·æ‰€æœ‰æ•°æ®åŒ…å¯èƒ½æ¶ˆè€—å¤§é‡ CPU å’Œå†…å­˜ã€‚åŠ¡å¿…ä½¿ç”¨è¿‡æ»¤æ¡ä»¶ç¼©å°èŒƒå›´ï¼Œæˆ–ç”¨ &lt;code&gt;-c&lt;/code&gt;é™åˆ¶åŒ…æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éšç§ä¸å®‰å…¨&lt;/strong&gt;ï¼štcpdump å¯èƒ½æ•è·æ˜æ–‡ä¼ è¾“çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ã€‚è¯·ä»…åœ¨æˆæƒèŒƒå›´å†…ä½¿ç”¨ï¼Œå¹¶å¦¥å–„å¤„ç†æ•è·çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ”„ æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ tcpdump åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå…¶ä»–å·¥å…·å¯èƒ½æ›´åˆé€‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Wireshark/tshark&lt;/strong&gt;: æä¾›å¼ºå¤§çš„å›¾å½¢åŒ–ç•Œé¢å’Œæ›´æ·±å…¥çš„åˆ†æåŠŸèƒ½ï¼Œtshark æ˜¯å…¶å‘½ä»¤è¡Œç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹åŠ å¯†åè®®çš„åˆ†æ&lt;/strong&gt;ï¼štcpdump æ— æ³•è§£å¯† HTTPS ç­‰åŠ å¯†æµé‡çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å­¦ä¹ å»ºè®®"&gt;ğŸ“– å­¦ä¹ å»ºè®®
&lt;/h3&gt;&lt;p&gt;æŒæ¡ tcpdump çš„æœ€ä½³æ–¹å¼æ˜¯&lt;strong&gt;ç»“åˆå®è·µ&lt;/strong&gt;ã€‚å¯ä»¥å…ˆä»ç®€å•çš„è¿‡æ»¤æ¡ä»¶å¼€å§‹ï¼Œå¦‚æ•è·ç‰¹å®š IP æˆ–ç«¯å£çš„æµé‡ï¼Œå†é€æ­¥å°è¯•æ›´å¤æ‚çš„è¡¨è¾¾å¼ã€‚ä½¿ç”¨ &lt;code&gt;-w&lt;/code&gt;é€‰é¡¹ä¿å­˜æ•°æ®åŒ…ï¼Œç„¶åç”¨ Wireshark æ‰“å¼€è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œè¿™èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ç½‘ç»œåè®®å’Œ tcpdump çš„è¾“å‡ºã€‚&lt;/p&gt;
&lt;p&gt;tcpdump æ˜¯ç½‘ç»œå·¥ä½œè€…å·¥å…·ç®±ä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ï¼Œå¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;h2 id="è½¯ç¡¬é“¾æ¥"&gt;è½¯ç¡¬é“¾æ¥
&lt;/h2&gt;&lt;p&gt;ç†è§£ Linux ä¸­çš„ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥å¯¹äºé«˜æ•ˆç®¡ç†æ–‡ä»¶ç³»ç»Ÿè‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†é€šè¿‡ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼å’Œè¯¦ç»†è§£é‡Šï¼Œå¸®ä½ å½»åº•ææ¸…æ¥šå®ƒä»¬çš„åŒºåˆ«ã€å·¥ä½œåŸç†ä»¥åŠå¦‚ä½•é€‰æ‹©ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¡¬é“¾æ¥ (Hard Link)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è½¯é“¾æ¥ (Symbolic Link / Soft Link)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯æ–‡ä»¶çš„ä¸€ä¸ª&lt;strong&gt;åˆ«å&lt;/strong&gt;ï¼Œä¸æºæ–‡ä»¶å…±äº«ç›¸åŒçš„ &lt;strong&gt;inode&lt;/strong&gt; å’Œæ•°æ®å—&lt;/td&gt;
&lt;td&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;ç‹¬ç«‹çš„æ–‡ä»¶&lt;/strong&gt;ï¼Œå…¶å†…å®¹æ˜¯ç›®æ ‡æ–‡ä»¶çš„&lt;strong&gt;è·¯å¾„å­—ç¬¦ä¸²&lt;/strong&gt;ï¼Œæ‹¥æœ‰è‡ªå·±çš„ inode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;inode å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æºæ–‡ä»¶&lt;strong&gt;ç›¸åŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ç›®æ ‡æ–‡ä»¶&lt;strong&gt;ä¸åŒ&lt;/strong&gt;ï¼Œæ˜¯ç‹¬ç«‹çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¨æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ”¯æŒ&lt;/strong&gt;ï¼ˆå› ä¸º inode æ˜¯æ–‡ä»¶ç³»ç»Ÿå†…å”¯ä¸€çš„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é“¾æ¥ç›®å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ï¼ˆä¸ºé˜²æ­¢å¾ªç¯å¼•ç”¨ï¼Œæ™®é€šç”¨æˆ·æ— æ³•åˆ›å»ºç›®å½•çš„ç¡¬é“¾æ¥ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå§‹æ–‡ä»¶åˆ é™¤å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å—å½±å“&lt;/strong&gt;ï¼ˆæ•°æ®ä»å¯é€šè¿‡ä»»ä½•ç¡¬é“¾æ¥è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰ç¡¬é“¾æ¥è¢«åˆ é™¤ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤±æ•ˆ&lt;/strong&gt;ï¼ˆå˜æˆâ€œæ‚¬ç©ºé“¾æ¥â€æˆ–â€œæ–­é“¾â€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥æŒ‡å‘æ–‡ä»¶æ•°æ®çš„&lt;strong&gt;ç£ç›˜å—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç›®æ ‡æ–‡ä»¶çš„&lt;strong&gt;è·¯å¾„ä¿¡æ¯&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–‡ä»¶ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºä¸ºæ™®é€šæ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;-rw-r--r--&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºä¸ºé“¾æ¥æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;lrwxrwxrwx&lt;/code&gt;ï¼‰ï¼Œå¹¶ä»¥ &lt;code&gt;-&amp;gt;&lt;/code&gt;æŒ‡ç¤ºç›®æ ‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ›å»ºå‘½ä»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ln &amp;lt;æºæ–‡ä»¶&amp;gt; &amp;lt;é“¾æ¥å&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ln -s &amp;lt;ç›®æ ‡æ–‡ä»¶&amp;gt; &amp;lt;é“¾æ¥å&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸é¢å¤–å ç”¨ç£ç›˜ç©ºé—´ï¼ˆä»…å¢åŠ ä¸€ä¸ªç›®å½•é¡¹ï¼‰&lt;/td&gt;
&lt;td&gt;å ç”¨å°‘é‡ç©ºé—´ï¼ˆç”¨äºå­˜å‚¨è·¯å¾„å­—ç¬¦ä¸²ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒå¿«ï¼ˆç›´æ¥è®¿é—®æ•°æ®å—ï¼‰&lt;/td&gt;
&lt;td&gt;ç¨æ…¢ï¼ˆéœ€é¢å¤–è§£æè·¯å¾„ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•åˆ›å»ºä¸æŸ¥çœ‹"&gt;ğŸ“ å¦‚ä½•åˆ›å»ºä¸æŸ¥çœ‹
&lt;/h3&gt;&lt;h4 id="åˆ›å»ºé“¾æ¥"&gt;åˆ›å»ºé“¾æ¥
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;# åˆ›å»ºç¡¬é“¾æ¥
ln original.txt hardlink.txt
# åˆ›å»ºè½¯é“¾æ¥ï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„æ›´å¯é ï¼‰
ln -s /absolute/path/to/original.txt softlink.txt
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æŸ¥çœ‹é“¾æ¥ä¿¡æ¯"&gt;æŸ¥çœ‹é“¾æ¥ä¿¡æ¯
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ls -li&lt;/code&gt;å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„ inode å·å’Œé“¾æ¥ä¿¡æ¯ã€‚ç¡¬é“¾æ¥ä¸åŸæ–‡ä»¶ inode å·ç›¸åŒï¼Œè½¯é“¾æ¥åˆ™ä¸åŒä¸”ä¼šæ˜¾ç¤ºæŒ‡å‘è·¯å¾„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ls -li original.txt hardlink.txt softlink.txt
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;25869085 -rw-r--r-- 2 user group 27 7æœˆ 8 17:39 hardlink.txt
25869085 -rw-r--r-- 2 user group 27 7æœˆ 8 17:39 original.txt
25869216 lrwxrwxrwx 1 user group 6 7æœˆ 8 17:47 softlink.txt -&amp;gt; original.txt
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-åº•å±‚åŸç†ä¸è¡Œä¸ºå·®å¼‚"&gt;âš™ï¸ åº•å±‚åŸç†ä¸è¡Œä¸ºå·®å¼‚
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;inode æ˜¯å…³é”®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;inode æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œè®°å½•æ–‡ä»¶çš„å…ƒæ•°æ®ï¼ˆæƒé™ã€å¤§å°ã€æ—¶é—´æˆ³ç­‰ï¼‰åŠæ•°æ®å—ä½ç½®ã€‚&lt;strong&gt;ç¡¬é“¾æ¥&lt;/strong&gt;é€šè¿‡å…±äº«åŒä¸€ inode å®ç°ï¼Œè€Œ&lt;strong&gt;è½¯é“¾æ¥&lt;/strong&gt;æ‹¥æœ‰ç‹¬ç«‹ inodeï¼Œä»…å­˜å‚¨è·¯å¾„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤è¡Œä¸ºçš„æœ¬è´¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Linux ä¸­ï¼Œåˆ é™¤æ–‡ä»¶ (&lt;code&gt;rm&lt;/code&gt;) çš„å®é™…è¡Œä¸ºæ˜¯&lt;strong&gt;å‡å°‘å…¶ inode çš„é“¾æ¥è®¡æ•°&lt;/strong&gt;ã€‚åªæœ‰å½“é“¾æ¥è®¡æ•°é™ä¸º 0 æ—¶ï¼Œæ–‡ä»¶çš„æ•°æ®å—æ‰ä¼šè¢«æ ‡è®°ä¸ºå¯è¦†ç›–ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œåˆ é™¤ä¸€ä¸ª&lt;strong&gt;ç¡¬é“¾æ¥&lt;/strong&gt;åªæ˜¯å‡å°‘äº†ä¸€ä¸ªè®¡æ•°ï¼Œæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚è€Œåˆ é™¤&lt;strong&gt;è½¯é“¾æ¥&lt;/strong&gt;æŒ‡å‘çš„åŸå§‹æ–‡ä»¶ï¼Œæ•°æ®å¯èƒ½è¢«çœŸæ­£åˆ é™¤ï¼Œå¯¼è‡´è½¯é“¾æ¥å¤±æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é“¾æ¥è®¡æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ls -l&lt;/code&gt;çœ‹åˆ°çš„ç¬¬äºŒåˆ—æ•°å­—å°±æ˜¯ç¡¬é“¾æ¥çš„è®¡æ•°ã€‚æ–°å»ºæ™®é€šæ–‡ä»¶çš„é“¾æ¥è®¡æ•°é€šå¸¸ä¸º 1ï¼Œæ¯åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥ï¼Œè®¡æ•°å°±ä¼š +1ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åº”ç”¨åœºæ™¯"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ï¼šåº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬é“¾æ¥çš„å…¸å‹ç”¨é€”&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶å¤‡ä»½ä¸å¿«ç…§&lt;/strong&gt;ï¼šç”¨äºåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿçš„å¿«ç…§ï¼ˆå¦‚ &lt;code&gt;rsync --link-dest&lt;/code&gt;ï¼‰ï¼Œé¿å…é‡å¤å­˜å‚¨ç›¸åŒæ•°æ®ï¼ŒèŠ‚çœç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¦æ–‡ä»¶é˜²è¯¯åˆ &lt;/strong&gt;ï¼šä¸ºé‡è¦æ–‡ä»¶åˆ›å»ºç¡¬é“¾æ¥ï¼Œå³ä½¿åŸå§‹è·¯å¾„è¢«åˆ ï¼Œæ•°æ®ä¾ç„¶å¯é€šè¿‡ç¡¬é“¾æ¥è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒä¸€æ–‡ä»¶ç³»ç»Ÿå†…å¤šè·¯å¾„è®¿é—®&lt;/strong&gt;ï¼šå½“éœ€è¦åœ¨åŒä¸€æ–‡ä»¶ç³»ç»Ÿå†…é€šè¿‡å¤šä¸ªä¸åŒè·¯å¾„è®¿é—®åŒä¸€ä»½æ•°æ®æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯é“¾æ¥çš„å…¸å‹ç”¨é€”&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿«æ·æ–¹å¼ä¸åŠ¨æ€å¼•ç”¨&lt;/strong&gt;ï¼šä¸ºå®‰è£…åœ¨ä¸åŒä½ç½®çš„è½¯ä»¶åˆ›å»ºç»Ÿä¸€å…¥å£ï¼ˆå¦‚ &lt;code&gt;/usr/bin/python&lt;/code&gt;-&amp;gt; &lt;code&gt;/usr/bin/python3.10&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨æ–‡ä»¶ç³»ç»Ÿæˆ–æŒ‚è½½ç‚¹é“¾æ¥&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œå°†å®¶ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹é“¾æ¥åˆ°å¦ä¸€ä¸ªç¡¬ç›˜åˆ†åŒºä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®å½•é“¾æ¥&lt;/strong&gt;ï¼šä¸ºæ·±å±‚ç›®å½•åˆ›å»ºæ–¹ä¾¿çš„å¿«æ·è®¿é—®æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬ç®¡ç†&lt;/strong&gt;ï¼šçµæ´»åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„è½¯ä»¶æˆ–é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;node&lt;/code&gt;-&amp;gt; &lt;code&gt;/opt/node-v18/bin/node&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬é“¾æ¥çš„é™åˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ä» ext4 é“¾æ¥åˆ° NTFSï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ™®é€šç”¨æˆ·ä¸èƒ½ä¸ºç›®å½•åˆ›å»ºç¡¬é“¾æ¥ï¼ˆä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æ–‡ä»¶ç³»ç»Ÿéå†æ—¶å‡ºç°å¾ªç¯å¼•ç”¨é—®é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯é“¾æ¥çš„é™·é˜±&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‚¬ç©ºé“¾æ¥&lt;/strong&gt;ï¼šç›®æ ‡æ–‡ä»¶è¢«ç§»åŠ¨æˆ–åˆ é™¤åï¼Œè½¯é“¾æ¥ä¼šå¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸å¯¹è·¯å¾„é—®é¢˜&lt;/strong&gt;ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„åˆ›å»ºçš„è½¯é“¾æ¥ï¼Œå¦‚æœå…¶æœ¬èº«è¢«ç§»åŠ¨ï¼Œå¯èƒ½ä¼šè§£æå¤±è´¥ã€‚&lt;strong&gt;å»ºè®®åˆ›å»ºæ—¶ä½¿ç”¨ç»å¯¹è·¯å¾„&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯é“¾æ¥&lt;/strong&gt;ï¼šè™½ç„¶ç½•è§ï¼Œä½†è½¯é“¾æ¥å¯ä»¥å½¢æˆå¾ªç¯ï¼ˆå¦‚ A -&amp;gt; B, B -&amp;gt; Aï¼‰ï¼ŒæŸäº›å·¥å…·å¯èƒ½æ— æ³•æ­£ç¡®å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤æ“ä½œ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åˆ é™¤è½¯é“¾æ¥ä½¿ç”¨ &lt;code&gt;rm softlink_name&lt;/code&gt;ï¼Œè¿™&lt;strong&gt;åªä¼šåˆ é™¤é“¾æ¥æœ¬èº«&lt;/strong&gt;ï¼Œä¸ä¼šå½±å“ç›®æ ‡æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;åˆ é™¤ç¡¬é“¾æ¥ä½¿ç”¨ &lt;code&gt;rm hardlink_name&lt;/code&gt;ï¼Œè¿™ä¼šå‡å°‘ inode çš„é“¾æ¥è®¡æ•°ï¼Œ&lt;strong&gt;åªæœ‰æ‰€æœ‰ç¡¬é“¾æ¥è¢«åˆ é™¤åæ•°æ®æ‰ä¼šè¢«é‡Šæ”¾&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ç¡¬é“¾æ¥åƒæ˜¯ç»™æ–‡ä»¶èµ·äº†ä¸ªåˆ«å&lt;/strong&gt;ï¼Œè€Œ&lt;strong&gt;è½¯é“¾æ¥æ›´åƒæ˜¯æ–‡ä»¶çš„å¿«æ·æ–¹å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©æ—¶è®°ä½ä¸€ä¸ªåŸåˆ™ï¼šå¦‚æœä½ çš„éœ€æ±‚é›†ä¸­åœ¨&lt;strong&gt;åŒä¸€æ–‡ä»¶ç³»ç»Ÿå†…&lt;/strong&gt;çš„æ•°æ®ä¿æŠ¤ã€èŠ‚çœç©ºé—´å’Œæ•ˆç‡ä¸Šï¼Œä¼˜å…ˆè€ƒè™‘&lt;strong&gt;ç¡¬é“¾æ¥&lt;/strong&gt;ã€‚å¦‚æœä½ éœ€è¦&lt;strong&gt;è·¨æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt;ã€ä¸ºç›®å½•åˆ›å»ºé“¾æ¥æˆ–è€…æ›´çµæ´»çš„è·¯å¾„ç®¡ç†ï¼Œ&lt;strong&gt;è½¯é“¾æ¥&lt;/strong&gt;æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£å¹¶çµæ´»è¿ç”¨å®ƒä»¬ï¼&lt;/p&gt;
&lt;h2 id="tail--last"&gt;tail &amp;amp; last
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;tail&lt;/code&gt;å’Œ &lt;code&gt;last&lt;/code&gt;æ˜¯ Linux ä¸­ä¸¤ä¸ªåç§°ç›¸ä¼¼ä½†åŠŸèƒ½å®Œå…¨ä¸åŒçš„å‘½ä»¤ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;tail&lt;/code&gt;ç”¨äº&lt;strong&gt;æŸ¥çœ‹æ–‡ä»¶çš„å°¾éƒ¨å†…å®¹&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;last&lt;/code&gt;ç”¨äº&lt;strong&gt;æŸ¥çœ‹ç³»ç»Ÿçš„ç”¨æˆ·ç™»å½•å†å²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;tail&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;last&lt;/code&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹&lt;strong&gt;æ–‡ä»¶æœ«å°¾&lt;/strong&gt;çš„å†…å®¹ï¼Œæ”¯æŒå®æ—¶è¿½è¸ª&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹&lt;strong&gt;ç”¨æˆ·ç™»å½•å†å²&lt;/strong&gt;ï¼ˆæˆåŠŸã€å¤±è´¥ã€é‡å¯äº‹ä»¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤„ç†å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä»»æ„æ–‡æœ¬æ–‡ä»¶&lt;/strong&gt;ï¼ˆå¦‚æ—¥å¿—ã€é…ç½®æ–‡ä»¶ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»ŸäºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶&lt;/strong&gt;ï¼ˆ&lt;code&gt;/var/log/wtmp&lt;/code&gt;, &lt;code&gt;/var/log/btmp&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ€§è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™æ€æ–‡ä»¶å†…å®¹&lt;/td&gt;
&lt;td&gt;åŠ¨æ€ç”Ÿæˆçš„ç³»ç»Ÿç™»å½•è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-n &amp;lt;N&amp;gt;&lt;/code&gt;(æ˜¾ç¤ºæœ€åNè¡Œ), &lt;code&gt;-f&lt;/code&gt;(å®æ—¶è¿½è¸ª), &lt;code&gt;-c &amp;lt;N&amp;gt;&lt;/code&gt;(æ˜¾ç¤ºæœ€åNå­—èŠ‚)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-n &amp;lt;N&amp;gt;&lt;/code&gt;(æ˜¾ç¤ºæœ€è¿‘Næ¡è®°å½•), &lt;code&gt;-x&lt;/code&gt;(æ˜¾ç¤ºå…³æœºé‡å¯), &lt;code&gt;-a&lt;/code&gt;(æ˜¾ç¤ºç™»å½•IP/ä¸»æœºå)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®æ—¶ç›‘æ§æ—¥å¿—ã€æŸ¥çœ‹æœ€æ–°è®°å½•ã€æå–æ–‡ä»¶å°¾éƒ¨ç‰‡æ®µ&lt;/td&gt;
&lt;td&gt;å®¡è®¡å®‰å…¨ã€æ’æŸ¥æ•…éšœã€æŸ¥çœ‹ç”¨æˆ·æ´»åŠ¨æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾“å‡ºç¤ºä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Line 998&lt;/code&gt; &lt;code&gt;Line 999&lt;/code&gt; &lt;code&gt;Line 1000&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;user1 pts/0 192.168.1.100 Mon 10:30 - 11:30 (01:00)&lt;/code&gt; &lt;code&gt;reboot system boot 5.4.0-72-generic Mon Nov 8 09:10 - 11:35 (02:25)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å‘½ä»¤è¯¦è§£ä¸ä½¿ç”¨åœºæ™¯"&gt;ğŸ“ å‘½ä»¤è¯¦è§£ä¸ä½¿ç”¨åœºæ™¯
&lt;/h3&gt;&lt;h4 id="1-tailæŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨"&gt;1. &lt;code&gt;tail&lt;/code&gt;ï¼šæŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;tail&lt;/code&gt;å‘½ä»¤è¯»å–&lt;strong&gt;ä»»æ„æ–‡æœ¬æ–‡ä»¶&lt;/strong&gt;çš„æœ«å°¾éƒ¨åˆ†ï¼Œé»˜è®¤æ˜¾ç¤ºæœ€å10è¡Œã€‚å®ƒåœ¨è¿ç»´å’Œå¼€å‘ä¸­æé«˜é¢‘ç‡ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½ä¸å‚æ•°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tail -n &amp;lt;N&amp;gt; &amp;lt;file&amp;gt;&lt;/code&gt;ï¼šæ˜¾ç¤ºæ–‡ä»¶æœ€å &lt;code&gt;N&lt;/code&gt;è¡Œã€‚ä¾‹å¦‚ &lt;code&gt;tail -n 20 system.log&lt;/code&gt;æ˜¾ç¤ºæœ€å20è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tail -f &amp;lt;file&amp;gt;&lt;/code&gt;ï¼š&lt;strong&gt;å®æ—¶è¿½è¸ª&lt;/strong&gt;æ–‡ä»¶çš„æ–°å¢å†…å®¹ã€‚è¿™æ˜¯ç›‘æ§æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚åº”ç”¨æ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ï¼‰çš„åˆ©å™¨ã€‚ç›‘æ§æ—¶ä¼šæŒç»­åˆ·æ–°æ˜¾ç¤ºæ–°å†…å®¹ï¼Œç›´åˆ°ç”¨ &lt;code&gt;Ctrl+C&lt;/code&gt;æ‰‹åŠ¨ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tail -c &amp;lt;N&amp;gt; &amp;lt;file&amp;gt;&lt;/code&gt;ï¼šæ˜¾ç¤ºæ–‡ä»¶æœ€å &lt;code&gt;N&lt;/code&gt;ä¸ªå­—èŠ‚çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶ç›‘æ§æ—¥å¿—&lt;/strong&gt;ï¼šæ•…éšœæ’æŸ¥æ—¶ï¼Œå¸¸ç”¨ &lt;code&gt;tail -f /var/log/syslog&lt;/code&gt;æˆ– &lt;code&gt;tail -f application.log&lt;/code&gt;æ¥å®æ—¶è§‚å¯Ÿæœ€æ–°æ—¥å¿—è¾“å‡ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥çœ‹æœ€æ–°è®°å½•&lt;/strong&gt;ï¼šæ£€æŸ¥ä½œä¸šæ‰§è¡Œç»“æœæˆ–æ–‡ä»¶æœ€è¿‘æ›´æ–°ï¼Œå¦‚ &lt;code&gt;tail -n 50 output.txt&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå–æ–‡ä»¶ç‰‡æ®µ&lt;/strong&gt;ï¼šç»“åˆé‡å®šå‘ï¼Œä¿å­˜æ–‡ä»¶å°¾éƒ¨å†…å®¹ï¼Œå¦‚ &lt;code&gt;tail -n 100 largefile.log &amp;gt; last100.log&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-lastæŸ¥çœ‹ç™»å½•å†å²"&gt;2. &lt;code&gt;last&lt;/code&gt;ï¼šæŸ¥çœ‹ç™»å½•å†å²
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;last&lt;/code&gt;å‘½ä»¤æŸ¥è¯¢çš„æ˜¯ç³»ç»Ÿ&lt;strong&gt;é¢„å®šä¹‰çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶&lt;/strong&gt;ï¼Œä¸“é—¨è®°å½•ç”¨æˆ·ç™»å½•ã€æ³¨é”€ã€é‡å¯ç­‰ä¿¡æ¯ã€‚ä¸»è¦ç”¨äºç³»ç»Ÿç®¡ç†å’Œå®‰å…¨å®¡è®¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½ä¸å‚æ•°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;last&lt;/code&gt;ï¼šé»˜è®¤æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·æœ€è¿‘çš„ç™»å½•è®°å½•ï¼ŒæŒ‰æ—¶é—´å€’åºæ’åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last -n &amp;lt;N&amp;gt;&lt;/code&gt;ï¼šä»…æ˜¾ç¤ºæœ€è¿‘ &lt;code&gt;N&lt;/code&gt;æ¡è®°å½•ã€‚å¦‚ &lt;code&gt;last -n 5&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last &amp;lt;username&amp;gt;&lt;/code&gt;ï¼šæŸ¥çœ‹ç‰¹å®šç”¨æˆ·çš„ç™»å½•å†å²ã€‚å¦‚ &lt;code&gt;last root&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last -x&lt;/code&gt;ï¼šæ˜¾ç¤º&lt;strong&gt;ç³»ç»Ÿå…³æœºï¼ˆhaltï¼‰å’Œé‡å¯ï¼ˆrebootï¼‰&lt;/strong&gt; è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last -a&lt;/code&gt;ï¼šåœ¨æœ€åä¸€åˆ—æ˜¾ç¤ºç™»å½•çš„&lt;strong&gt;IPåœ°å€æˆ–ä¸»æœºå&lt;/strong&gt;ï¼Œä½¿å¾—è¾“å‡ºæ›´æ˜“è¯»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last -f &amp;lt;file&amp;gt;&lt;/code&gt;ï¼šæŒ‡å®šè¯»å–çš„æ—¥å¿—æ–‡ä»¶ï¼ˆé»˜è®¤ä¸º &lt;code&gt;/var/log/wtmp&lt;/code&gt;ï¼‰ï¼Œé«˜çº§ç”¨æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¥æº&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/var/log/wtmp&lt;/code&gt;ï¼šè®°å½•&lt;strong&gt;æˆåŠŸçš„&lt;/strong&gt;ç”¨æˆ·ç™»å½•ä¼šè¯ï¼ˆç™»å½•ã€æ³¨é”€ã€æŒç»­æ—¶é—´ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/var/log/btmp&lt;/code&gt;ï¼šè®°å½•&lt;strong&gt;å¤±è´¥çš„&lt;/strong&gt;ç™»å½•å°è¯•ï¼ˆéœ€è¦æŒ‡å®š &lt;code&gt;-f /var/log/btmp&lt;/code&gt;æˆ–ä½¿ç”¨ &lt;code&gt;lastb&lt;/code&gt;å‘½ä»¤ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨å®¡è®¡&lt;/strong&gt;ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸æ—¶é—´æˆ–æ¥æºçš„ç™»å½•ï¼Œæ’æŸ¥æ½œåœ¨å…¥ä¾µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•…éšœæ’æŸ¥&lt;/strong&gt;ï¼šæŸ¥çœ‹ç³»ç»Ÿé‡å¯æ—¶é—´æ˜¯å¦ä¸æ•…éšœæ—¶é—´å»åˆï¼Œæˆ–ç”¨æˆ·æ˜¯å¦æˆåŠŸç™»å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·è¡Œä¸ºæŸ¥çœ‹&lt;/strong&gt;ï¼šäº†è§£ç‰¹å®šç”¨æˆ·ï¼ˆå¦‚ç¦»èŒå‘˜å·¥ï¼‰è¿‘æœŸçš„ç³»ç»Ÿæ´»åŠ¨æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æƒé™è¦æ±‚&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tail&lt;/code&gt;ï¼šé€šå¸¸åªéœ€æœ‰å¯¹ç›®æ ‡æ–‡ä»¶çš„è¯»å–æƒé™å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last&lt;/code&gt;ï¼šæ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹åˆ°ä¸è‡ªå·±ç›¸å…³çš„ç™»å½•å†å²ï¼ˆæŸäº›ç³»ç»Ÿé…ç½®ä¸‹ï¼‰ã€‚æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„å®Œæ•´å†å²é€šå¸¸éœ€è¦ &lt;code&gt;root&lt;/code&gt;æƒé™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tail -f&lt;/code&gt;å¯ä»¥å®æ—¶çœ‹åˆ°æ–‡ä»¶çš„æœ€æ–°å†™å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last&lt;/code&gt;æŸ¥è¯¢çš„æ˜¯å†å²è®°å½•æ–‡ä»¶ï¼Œå…¶æ›´æ–°é€šå¸¸æœ‰è½»å¾®å»¶è¿Ÿï¼Œå¹¶ä¸”éœ€è¦ç™»å½•ä¼šè¯å®Œå…¨ç»“æŸï¼ˆç”¨æˆ·æ³¨é”€æˆ–è¿æ¥æ–­å¼€ï¼‰åï¼Œè®°å½•æ‰ä¼šå®Œæ•´å†™å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶æ ¼å¼&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tail&lt;/code&gt;å¤„ç†çš„æ˜¯å¯è¯»çš„çº¯æ–‡æœ¬æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;last&lt;/code&gt;è¯»å–çš„ &lt;code&gt;/var/log/wtmp&lt;/code&gt;å’Œ &lt;code&gt;/var/log/btmp&lt;/code&gt;æ˜¯&lt;strong&gt;äºŒè¿›åˆ¶æ ¼å¼&lt;/strong&gt;ï¼Œä¸èƒ½ç”¨ &lt;code&gt;cat&lt;/code&gt;æˆ– &lt;code&gt;vi&lt;/code&gt;ç›´æ¥æŸ¥çœ‹ï¼Œå¿…é¡»é€šè¿‡ &lt;code&gt;last&lt;/code&gt;æˆ–ä¸“ç”¨å·¥å…·ï¼ˆå¦‚ &lt;code&gt;utmpdump&lt;/code&gt;ï¼‰è§£æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;è®°ä½ä¸€ä¸ªç®€å•çš„åŸåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ æƒ³&lt;strong&gt;æŸ¥çœ‹ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯æ—¥å¿—ï¼‰çš„æœ€åéƒ¨åˆ†å†…å®¹ï¼Œæˆ–è€…å®æ—¶ç›‘æ§å®ƒçš„å¢é•¿&lt;/strong&gt;æ—¶ï¼Œå°±ç”¨ &lt;strong&gt;&lt;code&gt;tail&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ æƒ³&lt;strong&gt;æŸ¥çœ‹è°åœ¨ä»€ä¹ˆæ—¶å€™ç™»å½•äº†ç³»ç»Ÿã€ç³»ç»Ÿä½•æ—¶é‡å¯è¿‡ï¼Œæˆ–è€…æ˜¯å¦æœ‰å¤±è´¥çš„ç™»å½•å°è¯•&lt;/strong&gt;æ—¶ï¼Œå°±ç”¨ &lt;strong&gt;&lt;code&gt;last&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>ã€NowCoderã€‘Computer Architecture</title><link>https://dyhes.github.io/p/nowcodercomputer-architecture/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcodercomputer-architecture/</guid><description>&lt;h2 id="å¢é‡æ–¹å¼çš„å¾®æŒ‡ä»¤è®¾è®¡"&gt;å¢é‡æ–¹å¼çš„å¾®æŒ‡ä»¤è®¾è®¡
&lt;/h2&gt;&lt;p&gt;é‡‡ç”¨å¢é‡æ–¹å¼çš„å¾®æŒ‡ä»¤è®¾è®¡æ˜¯å¾®ç¨‹åºæ§åˆ¶å™¨ä¸­å®ç°å¾®æŒ‡ä»¤é¡ºåºæ‰§è¡Œçš„ä¸€ç§é‡è¦æ–¹æ³•ã€‚å®ƒé€šè¿‡&lt;strong&gt;å¾®ç¨‹åºè®¡æ•°å™¨ï¼ˆÎ¼PCï¼‰&lt;/strong&gt; è‡ªåŠ¨é€’å¢æ¥ç”Ÿæˆä¸‹ä¸€æ¡å¾®æŒ‡ä»¤çš„åœ°å€ï¼Œéå¸¸é€‚åˆçº¿æ€§å¾®åºåˆ—çš„æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œæ±‡æ€»äº†å¢é‡æ–¹å¼çš„æ ¸å¿ƒç‰¹ç‚¹ä¸å…³é”®è®¾è®¡è€ƒé‡ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹é¢&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡&lt;strong&gt;å¾®ç¨‹åºè®¡æ•°å™¨ï¼ˆÎ¼PCï¼‰&lt;/strong&gt; è‡ªåŠ¨é€’å¢ï¼ˆé€šå¸¸æ˜¯+1ï¼‰æ¥ç”Ÿæˆä¸‹ä¸€æ¡å¾®æŒ‡ä»¤çš„åœ°å€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶æ ¸å¿ƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Î¼PC&lt;/strong&gt;ï¼ˆå¾®ç¨‹åºè®¡æ•°å™¨ï¼‰ã€åœ°å€é€‰æ‹©é€»è¾‘ã€è½¬ç§»æ¡ä»¶æµ‹è¯•ç½‘ç»œï¼ˆç”¨äºå¤„ç†åˆ†æ”¯ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¾®æŒ‡ä»¤æ ¼å¼ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¾®æŒ‡ä»¤ä¸­é€šå¸¸&lt;strong&gt;æ— éœ€åŒ…å«å®Œæ•´çš„ä¸‹åœ°å€å­—æ®µ&lt;/strong&gt;ï¼Œæˆ–è¯¥å­—æ®µè¾ƒçŸ­ï¼Œä»…ç”¨äºæä¾›è½¬ç§»ç›®æ ‡åœ°å€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶ç®€å•ã€å¾®æŒ‡ä»¤å­—é•¿çŸ­ã€æ§å­˜ç©ºé—´åˆ©ç”¨ç‡é«˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†æ”¯çµæ´»æ€§è¾ƒå·®&lt;/strong&gt;ï¼Œå¤„ç†å¤æ‚æ§åˆ¶æµï¼ˆå¦‚å¤šè·¯åˆ†æ”¯ã€å¾ªç¯ï¼‰æ—¶å¯èƒ½éœ€è¦é¢å¤–å¾®æ­¥éª¤ï¼Œæ•ˆç‡è¾ƒä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å–æŒ‡å…¬æ“ä½œã€ç®€å•å›ºå®šçš„å¾®ç¨‹åºåºåˆ—ã€ä½œä¸ºæ··åˆåœ°å€ç”Ÿæˆç­–ç•¥çš„ä¸€éƒ¨åˆ†ï¼ˆä¸æ–­å®šæ–¹å¼ç­‰ç»“åˆï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç¡¬ä»¶ç»„æˆä¸å·¥ä½œæµç¨‹"&gt;ğŸ”§ ç¡¬ä»¶ç»„æˆä¸å·¥ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;å¢é‡æ–¹å¼å¾®åœ°å€ç”Ÿæˆçš„ç¡¬ä»¶æ ¸å¿ƒæ˜¯&lt;strong&gt;å¾®ç¨‹åºè®¡æ•°å™¨ï¼ˆÎ¼PC, Microprogram Counterï¼‰&lt;/strong&gt;ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸ºæ§åˆ¶å­˜å‚¨å™¨åœ°å€å¯„å­˜å™¨ï¼ˆCMARï¼‰ã€‚å…¶åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åœ°å€åŠ è½½&lt;/strong&gt;ï¼šå½“ä¸€æ¡æ–°æœºå™¨æŒ‡ä»¤å¼€å§‹æ‰§è¡Œæ—¶ï¼Œç”±&lt;strong&gt;å¾®åœ°å€å½¢æˆéƒ¨ä»¶&lt;/strong&gt;æ ¹æ®è¯¥æŒ‡ä»¤çš„æ“ä½œç ï¼Œç”Ÿæˆå…¶å¯¹åº”å¾®ç¨‹åºçš„&lt;strong&gt;å…¥å£åœ°å€&lt;/strong&gt;ï¼Œå¹¶åŠ è½½åˆ°Î¼PCä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»å–ä¸æ‰§è¡Œ&lt;/strong&gt;ï¼šæ§åˆ¶å­˜å‚¨å™¨ï¼ˆCMï¼‰æ ¹æ®Î¼PCä¸­çš„åœ°å€&lt;strong&gt;è¯»å–å¾®æŒ‡ä»¤&lt;/strong&gt;åˆ°å¾®æŒ‡ä»¤å¯„å­˜å™¨ï¼ˆÎ¼IRï¼‰ã€‚å¾®æŒ‡ä»¤çš„&lt;strong&gt;æ“ä½œæ§åˆ¶å­—æ®µ&lt;/strong&gt;è¢«è¯‘ç ï¼Œäº§ç”Ÿç›¸åº”çš„&lt;strong&gt;å¾®å‘½ä»¤&lt;/strong&gt;æ§åˆ¶æ•°æ®é€šè·¯å®Œæˆæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€é€’å¢&lt;/strong&gt;ï¼šåœ¨å¤§å¤šæ•°é¡ºåºæ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œå½“å‰å¾®æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•åï¼ŒÎ¼PCç®€å•åœ°&lt;strong&gt;è‡ªåŠ¨é€’å¢&lt;/strong&gt;ï¼ˆé€šå¸¸æ˜¯+1ï¼‰ï¼ŒæŒ‡å‘æ§åˆ¶å­˜å‚¨å™¨ä¸­çš„ä¸‹ä¸€ä¸ªåœ°å€ï¼Œä¸ºå–ä¸‹æ¡å¾®æŒ‡ä»¤åšå¥½å‡†å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†åˆ†æ”¯&lt;/strong&gt;ï¼šå½“å¾®ç¨‹åºéœ€è¦åˆ†æ”¯ï¼ˆå¦‚å¾ªç¯ã€æ¡ä»¶è½¬ç§»ï¼‰æ—¶ï¼Œ&lt;strong&gt;å½“å‰å¾®æŒ‡ä»¤çš„é¡ºåºæ§åˆ¶å­—æ®µ&lt;/strong&gt;ä¼šåŒ…å«åˆ†æ”¯ä¿¡æ¯ï¼ˆå¦‚è½¬ç§»æ¡ä»¶ã€è½¬ç§»ç›®æ ‡åœ°å€çš„ä½ä½æˆ–åç§»ï¼‰ã€‚&lt;strong&gt;åœ°å€é€‰æ‹©é€»è¾‘&lt;/strong&gt;ä¼šæ ¹æ®æµ‹è¯•ç½‘ç»œï¼ˆå¦‚ALUçš„çŠ¶æ€æ ‡å¿—ï¼‰çš„åˆ¤æ–­ç»“æœï¼Œé€‰æ‹©æ˜¯è®©Î¼PCç»§ç»­é€’å¢ï¼Œè¿˜æ˜¯å°†ä¸€ä¸ªæ–°çš„åœ°å€ï¼ˆç”±å¾®æŒ‡ä»¤æä¾›çš„éƒ¨åˆ†åœ°å€ä¸Î¼PCçš„å½“å‰é«˜ä½ç»„åˆè€Œæˆï¼‰åŠ è½½åˆ°Î¼PCä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¢é‡æ–¹å¼çš„ç‰¹ç‚¹"&gt;ğŸ’¡ å¢é‡æ–¹å¼çš„ç‰¹ç‚¹
&lt;/h3&gt;&lt;h4 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶ç®€å•&lt;/strong&gt;ï¼šçœå»äº†å¤æ‚çš„ä¸‹ä¸€åœ°å€ç”Ÿæˆé€»è¾‘ï¼Œä¸»è¦ä¾èµ–Î¼PCå’Œç®€å•çš„å¢é‡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾®æŒ‡ä»¤å­—é•¿çŸ­&lt;/strong&gt;ï¼šå› ä¸ºä¸éœ€è¦åœ¨æ¯æ¡å¾®æŒ‡ä»¤ä¸­éƒ½åŒ…å«ä¸€ä¸ªå®Œæ•´çš„ä¸‹åœ°å€å­—æ®µï¼Œæ˜¾è‘—ç¼©çŸ­äº†å¾®æŒ‡ä»¤çš„é•¿åº¦ï¼Œå‡å°‘äº†æ§åˆ¶å­˜å‚¨å™¨çš„æ€»ä½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ§å­˜ç©ºé—´åˆ©ç”¨ç‡é«˜&lt;/strong&gt;ï¼šå¾®æŒ‡ä»¤é¡ºåºå­˜æ”¾ï¼Œåœ°å€è¿ç»­ï¼Œç©ºé—´åˆ©ç”¨æ•ˆç‡é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¼ºç‚¹"&gt;ç¼ºç‚¹ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ”¯çµæ´»æ€§è¾ƒå·®&lt;/strong&gt;ï¼šå¤„ç†å¤æ‚æˆ–å¤šè·¯åˆ†æ”¯æ—¶ä¸å¤Ÿçµæ´»ï¼Œæ•ˆç‡å¯èƒ½è¾ƒä½ã€‚æ¡ä»¶åˆ†æ”¯éœ€è¦é¢å¤–çš„å¾®æŒ‡ä»¤è¿›è¡Œåˆ¤æ–­å’Œè·³è½¬ï¼Œå¯èƒ½ä¼šå¢åŠ å¾®ç¨‹åºæ‰§è¡Œçš„å¹³å‡å‘¨æœŸæ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸å…¶ä»–æ–¹å¼çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ–¹å¼çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;å¾®æŒ‡ä»¤ä¸‹åœ°å€çš„ç”Ÿæˆè¿˜æœ‰å¦ä¸€ç§ä¸»è¦æ–¹å¼â€”â€”&lt;strong&gt;ä¸‹å€å­—æ®µæ³•ï¼ˆæ–­å®šæ–¹å¼ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”æ–¹é¢&lt;/th&gt;
&lt;th&gt;å¢é‡æ–¹å¼ (è®¡æ•°å™¨æ–¹å¼)&lt;/th&gt;
&lt;th&gt;ä¸‹å€å­—æ®µæ³• (æ–­å®šæ–¹å¼)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±Î¼PCè‡ªåŠ¨+1ç”Ÿæˆé¡ºåºåœ°å€&lt;/td&gt;
&lt;td&gt;ç”±å¾®æŒ‡ä»¤ä¸­çš„&lt;strong&gt;ä¸‹å€å­—æ®µç›´æ¥æ˜¾å¼æŒ‡å®š&lt;/strong&gt;ä¸‹æ¡å¾®æŒ‡ä»¤çš„å…¨åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¾®æŒ‡ä»¤å­—é•¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒçŸ­&lt;/strong&gt;ï¼ˆæ— éœ€æˆ–åªéœ€çŸ­çš„ä¸‹å€å­—æ®µï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé•¿&lt;/strong&gt;ï¼ˆéœ€åŒ…å«è¶³å¤Ÿä½æ•°çš„ä¸‹å€å­—æ®µï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†æ”¯çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒå·®ï¼Œå¤„ç†å¤æ‚åˆ†æ”¯æ—¶å¯èƒ½éœ€æ›´å¤šæ­¥éª¤&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æå¼º&lt;/strong&gt;ï¼Œå¯è½»æ¾å®ç°ä»»æ„è·³è½¬å’Œå¤æ‚æ§åˆ¶æµ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼ˆä¸»è¦ç¡¬ä»¶æ˜¯Î¼PCå’Œå¢é‡å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜ï¼ˆéœ€è¦åœ°å€åŠ è½½å’Œé€‰æ‹©é€»è¾‘ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¡ºåºæ€§å¼ºçš„å¾®ç¨‹åºæ®µï¼ˆå¦‚å–æŒ‡å‘¨æœŸï¼‰&lt;/td&gt;
&lt;td&gt;æ§åˆ¶æµå¤æ‚çš„å¾®ç¨‹åºï¼ˆå¦‚å«æœ‰å¤§é‡åˆ†æ”¯ã€å¾ªç¯çš„æŒ‡ä»¤æ‰§è¡Œå‘¨æœŸï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç°ä»£æ§åˆ¶å™¨è®¾è®¡å¸¸é‡‡ç”¨&lt;strong&gt;æ··åˆç­–ç•¥&lt;/strong&gt;ï¼šå¯¹å–æŒ‡ç­‰å…¬å…±æ“ä½œå’Œé¡ºåºæ‰§è¡Œéƒ¨åˆ†ä½¿ç”¨&lt;strong&gt;å¢é‡æ–¹å¼&lt;/strong&gt;ä»¥èŠ‚çœæ§å­˜ç©ºé—´ï¼›è€Œå¯¹ç”±ä¸åŒæœºå™¨æŒ‡ä»¤æ“ä½œç å¯¼å‡ºçš„ä¸åŒå¾®ç¨‹åºå…¥å£ã€ä»¥åŠå¾®ç¨‹åºå†…éƒ¨çš„æ¡ä»¶åˆ†æ”¯ç­‰ï¼Œåˆ™é‡‡ç”¨&lt;strong&gt;æ–­å®šæ–¹å¼&lt;/strong&gt;æˆ–&lt;strong&gt;æ“ä½œç æ˜ å°„æ³•&lt;/strong&gt;ä»¥ä¿è¯çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-è®¾è®¡å®ä¾‹è¯´æ˜"&gt;ğŸ§ª è®¾è®¡å®ä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;å‡è®¾æŸæ¡æœºå™¨æŒ‡ä»¤çš„å¾®ç¨‹åºéœ€è¦å®Œæˆä¸€ä¸ªå¾ªç¯æ“ä½œï¼ˆä¾‹å¦‚ï¼Œä¹˜æ³•æŒ‡ä»¤ä¸­çš„é‡å¤åŠ æ³•å’Œç§»ä½ï¼‰ï¼Œå…¶å¾®ç¨‹åºåœ¨æ§å­˜ä¸­ä»åœ°å€ &lt;code&gt;010h&lt;/code&gt;å¼€å§‹å­˜æ”¾ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;å¾®åœ°å€ (Î¼PC) | å¾®æŒ‡ä»¤ (ç®€åŒ–è¡¨ç¤º) | è¯´æ˜
-----------|------------------------|------------------------------------------------
010h | åŠ è½½æ“ä½œæ•°, åˆå§‹åŒ–è®¡æ•°å™¨ | å¾®ç¨‹åºå…¥å£ï¼Œæ‰§è¡Œä¸€äº›å‡†å¤‡æ“ä½œ
011h | æ‰§è¡ŒåŠ æ³• | Î¼PC+1 (012h)
012h | æ‰§è¡Œç§»ä½ | Î¼PC+1 (013h)
013h | è®¡æ•°å™¨-1, è‹¥ç»“æœéé›¶åˆ™è·³è½¬ | æ£€æŸ¥å¾ªç¯æ¡ä»¶ã€‚è‹¥æ¡ä»¶æ»¡è¶³ï¼Œå°†Î¼PCç½®ä¸º010hï¼›å¦åˆ™Î¼PC+1 (014h)
014h | å­˜å‚¨ç»“æœ | å¾ªç¯ç»“æŸï¼Œæ‰§è¡Œåç»­æ“ä½œ
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ°å€ &lt;code&gt;010h&lt;/code&gt;åˆ° &lt;code&gt;012h&lt;/code&gt;æ˜¯é¡ºåºæ‰§è¡Œï¼Œç”±Î¼PCè‡ªåŠ¨é€’å¢ã€‚åœ¨ &lt;code&gt;013h&lt;/code&gt;å¤„ï¼Œå¾®æŒ‡ä»¤åŒ…å«äº†&lt;strong&gt;åˆ†æ”¯é€»è¾‘&lt;/strong&gt;ï¼šå®ƒæ§åˆ¶ç¡¬ä»¶æ£€æŸ¥è®¡æ•°å™¨çš„å€¼ï¼Œå¹¶æ ¹æ®ç»“æœå†³å®šæ˜¯å°†Î¼PCé‡ç½®ä¸º &lt;code&gt;010h&lt;/code&gt;ï¼ˆç»§ç»­å¾ªç¯ï¼‰è¿˜æ˜¯é€’å¢åˆ° &lt;code&gt;014h&lt;/code&gt;ï¼ˆé€€å‡ºå¾ªç¯ï¼‰ã€‚è¿™å±•ç¤ºäº†å¢é‡æ–¹å¼å¦‚ä½•å¤„ç†ç®€å•çš„æ¡ä»¶åˆ†æ”¯ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å¢é‡æ–¹å¼é€šè¿‡&lt;strong&gt;å¾®ç¨‹åºè®¡æ•°å™¨ï¼ˆÎ¼PCï¼‰&lt;/strong&gt; è‡ªåŠ¨é€’å¢ç”Ÿæˆåç»­å¾®åœ°å€ï¼Œæ˜¯å®ç°å¾®ç¨‹åº&lt;strong&gt;é¡ºåºæ§åˆ¶&lt;/strong&gt;çš„ä¸€ç§ç®€å•ã€é«˜æ•ˆçš„æ–¹æ³•ã€‚è™½ç„¶å…¶åœ¨&lt;strong&gt;å¤æ‚åˆ†æ”¯&lt;/strong&gt;å¤„ç†ä¸Šçµæ´»æ€§ä¸åŠæ–­å®šæ–¹å¼ï¼Œä½†ç”±äºå…¶&lt;strong&gt;ç¡¬ä»¶ç®€å•ã€å¾®æŒ‡ä»¤å­—é•¿çŸ­&lt;/strong&gt;çš„ä¼˜åŠ¿ï¼Œä½¿å…¶åœ¨å¾®ç¨‹åºæ§åˆ¶å™¨è®¾è®¡ä¸­ä»å æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œå¹¶å¸¸ä¸å…¶ä»–åœ°å€ç”Ÿæˆæ–¹å¼ç»“åˆä½¿ç”¨ï¼Œä»¥é€‚åº”ä¸åŒçš„æ§åˆ¶éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£é‡‡ç”¨å¢é‡æ–¹å¼çš„å¾®æŒ‡ä»¤è®¾è®¡ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘DB</title><link>https://dyhes.github.io/p/nowcoderdb/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderdb/</guid><description>&lt;h2 id="insert-overwrite"&gt;INSERT OVERWRITE
&lt;/h2&gt;&lt;p&gt;INSERT OVERWRITE æ˜¯ Hive SQL ä¸­ç”¨äº&lt;strong&gt;è¦†ç›–å†™å…¥&lt;/strong&gt;æ•°æ®çš„å…³é”®æ“ä½œã€‚å®ƒä¼šå…ˆåˆ é™¤ç›®æ ‡è¡¨æˆ–æŒ‡å®šåˆ†åŒºä¸­çš„ç°æœ‰æ•°æ®ï¼Œç„¶åå†æ’å…¥æ–°çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯å…³äº INSERT OVERWRITE çš„è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µ"&gt;âœ¨ æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE æ˜¯ä¸€ç§æ•°æ®å†™å…¥æ“ä½œï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯&lt;strong&gt;å…ˆåˆ é™¤åå†™å…¥&lt;/strong&gt;ã€‚å½“æ‰§è¡Œè¯¥è¯­å¥æ—¶ï¼ŒHive ä¼šé¦–å…ˆæ¸…é™¤ç›®æ ‡è¡¨æˆ–æŒ‡å®šåˆ†åŒºä¸­çš„æ‰€æœ‰ç°æœ‰æ•°æ®ï¼Œç„¶åå°†æ–°æ•°æ®æ’å…¥å…¶ä¸­ã€‚è¿™æ„å‘³ç€æ“ä½œå®Œæˆåï¼Œç›®æ ‡è¡¨æˆ–åˆ†åŒºä¸­å°†åªåŒ…å«æ–°æ’å…¥çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•å½¢å¼"&gt;ğŸ“ åŸºæœ¬è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE çš„è¯­æ³•æ ¹æ®ä¸åŒåœºæ™¯æœ‰æ‰€å˜åŒ–ï¼š&lt;/p&gt;
&lt;h4 id="1-è¦†ç›–æ•´ä¸ªéåˆ†åŒºè¡¨"&gt;1. è¦†ç›–æ•´ä¸ªéåˆ†åŒºè¡¨
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT OVERWRITE TABLE target_table
SELECT * FROM source_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§å½¢å¼ä¼š&lt;strong&gt;å®Œå…¨æ›¿æ¢&lt;/strong&gt; &lt;code&gt;target_table&lt;/code&gt;ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚&lt;/p&gt;
&lt;h4 id="2-è¦†ç›–åˆ†åŒºè¡¨çš„ç‰¹å®šåˆ†åŒºé™æ€åˆ†åŒº"&gt;2. è¦†ç›–åˆ†åŒºè¡¨çš„ç‰¹å®šåˆ†åŒºï¼ˆé™æ€åˆ†åŒºï¼‰
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT OVERWRITE TABLE target_table PARTITION (dt=&amp;#39;20250908&amp;#39;)
SELECT * FROM source_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™åªä¼šè¦†ç›– &lt;code&gt;target_table&lt;/code&gt;ä¸­ &lt;code&gt;dt='20250908'&lt;/code&gt;è¿™ä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œè€Œå…¶ä»–åˆ†åŒºçš„æ•°æ®ä¿æŒä¸å˜ã€‚&lt;/p&gt;
&lt;h4 id="3-åŠ¨æ€åˆ†åŒºè¦†ç›–"&gt;3. åŠ¨æ€åˆ†åŒºè¦†ç›–
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SET hive.exec.dynamic.partition=true;
SET hive.exec.dynamic.partition.mode=nonstrict;
INSERT OVERWRITE TABLE target_table PARTITION (department)
SELECT id, name, department FROM source_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æ–¹å¼æ ¹æ®æŸ¥è¯¢ç»“æœè‡ªåŠ¨ç¡®å®šè¦è¦†ç›–çš„åˆ†åŒºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨åŠ¨æ€åˆ†åŒºä¸­ï¼Œ&lt;strong&gt;é™æ€åˆ†åŒºå¿…é¡»ä½äºåŠ¨æ€åˆ†åŒºä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸ç¤ºä¾‹"&gt;ğŸ” å·¥ä½œåŸç†ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„å‘˜å·¥è¡¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE employee (
id INT,
name STRING,
department STRING
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆå§‹æ’å…¥ä¸€äº›æ•°æ®åï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO TABLE employee VALUES
(1, &amp;#39;Alice&amp;#39;, &amp;#39;HR&amp;#39;),
(2, &amp;#39;Bob&amp;#39;, &amp;#39;Engineering&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œè¦†ç›–æ“ä½œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT OVERWRITE TABLE employee
SELECT 3, &amp;#39;Charlie&amp;#39;, &amp;#39;Marketing&amp;#39;
UNION ALL
SELECT 4, &amp;#39;David&amp;#39;, &amp;#39;Sales&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œåï¼Œemployee è¡¨ä¸­çš„æ•°æ®å°†å˜ä¸ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;| id | name | department |
|----|---------|------------|
| 3 | Charlie | Marketing |
| 4 | David | Sales |
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŸæœ‰çš„æ•°æ®ï¼ˆAlice å’Œ Bobï¼‰å·²è¢«å®Œå…¨åˆ é™¤å’Œæ›¿æ¢ã€‚&lt;/p&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å…¨é‡æ›´æ–°&lt;/strong&gt;ï¼šéœ€è¦å®šæœŸåˆ·æ–°æ•´ä¸ªæ•°æ®é›†ï¼Œå¦‚æ¯æ—¥å…¨é‡ç”¨æˆ·ç”»åƒè¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é‡è½½&lt;/strong&gt;ï¼šé‡æ–°åŠ è½½è¡¨ä¸­çš„æ•°æ®ï¼Œå¸¸è§äºæ•°æ®ä»“åº“æˆ–æ•°æ®åˆ†æä»»åŠ¡ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¸…ç†&lt;/strong&gt;ï¼šé€šè¿‡è¦†ç›–ä¸€ä¸ªç©ºè¡¨æ¥æ¸…ç©ºç›®æ ‡è¡¨ä¸­çš„æ•°æ®å¹¶é‡Šæ”¾å­˜å‚¨ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºç®¡ç†&lt;/strong&gt;ï¼šé’ˆå¯¹åˆ†åŒºè¡¨ä¸­çš„ç‰¹å®šåˆ†åŒºè¿›è¡Œæ•°æ®æ›´æ–°ï¼Œå®ç°æ›´ç²¾ç»†åŒ–çš„æ•°æ®ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸¢å¤±é£é™©&lt;/strong&gt;ï¼šINSERT OVERWRITE æ˜¯&lt;strong&gt;ç ´åæ€§æ“ä½œ&lt;/strong&gt;ï¼Œä¼šæ°¸ä¹…åˆ é™¤ç›®æ ‡è¡¨æˆ–åˆ†åŒºä¸­çš„ç°æœ‰æ•°æ®ã€‚æ‰§è¡Œå‰åŠ¡å¿…&lt;strong&gt;ç¡®è®¤æ“ä½œæ„å›¾&lt;/strong&gt;ï¼Œå¹¶å¯¹é‡è¦æ•°æ®è¿›è¡Œ&lt;strong&gt;å¤‡ä»½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æ„ä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¡®ä¿ SELECT æŸ¥è¯¢è¿”å›çš„&lt;strong&gt;åˆ—æ•°ã€åˆ—é¡ºåºå’Œæ•°æ®ç±»å‹&lt;/strong&gt;ä¸ç›®æ ‡è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰çš„å®šä¹‰å®Œå…¨åŒ¹é…ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šå¯¹äºå¤§è§„æ¨¡æ•°æ®é›†ï¼Œè¦†ç›–æ“ä½œå¯èƒ½æ¶ˆè€—å¤§é‡è®¡ç®—èµ„æºå’Œæ—¶é—´ã€‚å»ºè®®åœ¨ç³»ç»Ÿè´Ÿè½½è¾ƒä½æ—¶æ‰§è¡Œæ­¤ç±»æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å¤„ç†&lt;/strong&gt;ï¼šåœ¨æ”¯æŒäº‹åŠ¡çš„ Hive è¡¨ä¸­ï¼Œç¡®ä¿æ“ä½œåœ¨åˆç†çš„äº‹åŠ¡èŒƒå›´å†…è¿›è¡Œï¼Œä»¥ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–å†™å…¥æ–¹å¼çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–å†™å…¥æ–¹å¼çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;Hive ä¸»è¦æä¾›äº†å››ç§æ•°æ®å†™å…¥æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å†™å…¥æ–¹å¼&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;INSERT OVERWRITE TABLE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¦†ç›–æ—§æ•°æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨é‡æ•°æ®æ›´æ–°ï¼ˆå¦‚æ¯æ—¥å¿«ç…§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INSERT INTO TABLE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿½åŠ æ–°æ•°æ®&lt;/td&gt;
&lt;td&gt;å¢é‡æ•°æ®ï¼ˆå¦‚æ—¥å¿—ã€æµæ°´ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INSERT OVERWRITE DIRECTORY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯¼å‡ºæ•°æ®åˆ°æ–‡ä»¶ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;æ•°æ®å¤‡ä»½ã€æä¾›ç»™å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CREATE TABLE AS SELECT&lt;/code&gt;(CTAS)&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ–°è¡¨å¹¶å†™å…¥æ•°æ®&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶åˆ†æè¡¨ã€ETL ä¸­é—´è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE æ˜¯ Hive ä¸­ä¸€ä¸ªå¼ºå¤§ä½†éœ€è¦è°¨æ…ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå®ƒé€šè¿‡&lt;strong&gt;å…ˆåˆ é™¤åæ’å…¥&lt;/strong&gt;çš„æœºåˆ¶å®ç°æ•°æ®çš„å…¨é‡è¦†ç›–ã€‚å®ƒéå¸¸é€‚åˆäº&lt;strong&gt;å®šæœŸå…¨é‡æ›´æ–°æ•°æ®&lt;/strong&gt;ã€&lt;strong&gt;ç»´æŠ¤æœ€æ–°æ•°æ®å¿«ç…§&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;ç®¡ç†åˆ†åŒºæ•°æ®&lt;/strong&gt;çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ—¶æœ€å…³é”®çš„æ˜¯è¦&lt;strong&gt;æ—¶åˆ»æ„è¯†åˆ°å…¶ç ´åæ€§&lt;/strong&gt;ï¼Œæ˜ç¡®æ“ä½œèŒƒå›´ï¼ˆæ•´è¡¨è¿˜æ˜¯ç‰¹å®šåˆ†åŒºï¼‰ï¼Œå¹¶ç¡®ä¿æ•°æ®ç»“æ„çš„ä¸€è‡´æ€§ã€‚åˆç†åˆ©ç”¨ INSERT OVERWRITE å¯ä»¥æœ‰æ•ˆç®¡ç†æ•°æ®ï¼Œä½†ç–å¿½ä¹Ÿå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ INSERT OVERWRITEã€‚&lt;/p&gt;
&lt;h2 id="å¢åˆ æ”¹æŸ¥"&gt;å¢åˆ æ”¹æŸ¥
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰æ“ä½œæ˜¯ä¸æ•°æ®åº“äº¤äº’çš„åŸºç¡€ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»å…¶æ ¸å¿ƒè¯­æ³•å’Œè¦ç‚¹ï¼Œå¹¶é™„ä¸Šè¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ï¼ŒåŠ©ä½ å¿«é€ŸæŒæ¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œ&lt;/th&gt;
&lt;th&gt;å…³é”®å­—&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒè¯­æ³•&lt;/th&gt;
&lt;th&gt;å…³é”®ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¢ (Create)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSERT INTO&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSERT INTO è¡¨å (åˆ—1, åˆ—2, ...) VALUES (å€¼1, å€¼2, ...);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;éœ€æŒ‡å®šåˆ—å’Œå€¼ï¼Œæ”¯æŒæ‰¹é‡æ’å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ  (Delete)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DELETE FROM&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DELETE FROM è¡¨å [WHERE æ¡ä»¶];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¡å¿…è°¨æ…ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½æ¸…ç©ºå…¨è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¹ (Update)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE è¡¨å SET åˆ—1=å€¼1, åˆ—2=å€¼2 [WHERE æ¡ä»¶];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¡å¿…è°¨æ…ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šæ›´æ–°å…¨è¡¨æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥ (Retrieve)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT åˆ—1, åˆ—2 FROM è¡¨å [WHERE æ¡ä»¶];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯ä½¿ç”¨ &lt;code&gt;*&lt;/code&gt;æŸ¥è¯¢æ‰€æœ‰åˆ—ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;ç”¨äºè¿‡æ»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ¯ä¸ªæ“ä½œçš„è¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;h3 id="-å¢insert"&gt;ğŸ“Œ å¢ï¼ˆINSERTï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;INSERT&lt;/code&gt;è¯­å¥ç”¨äºå‘è¡¨ä¸­æ·»åŠ æ–°è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœæ‰“ç®—ä¸ºè¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½æ·»åŠ å€¼ï¼Œå¯ä»¥çœç•¥åˆ—åï¼Œä½†å€¼çš„é¡ºåºå¿…é¡»ä¸è¡¨ä¸­çš„åˆ—é¡ºåºå®Œå…¨ä¸€è‡´ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO table_name
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå‘ &lt;code&gt;users&lt;/code&gt;è¡¨æ’å…¥ä¸€æ¡æ–°è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (name, age, email)
VALUES (&amp;#39;å¼ ä¸‰&amp;#39;, 25, &amp;#39;zhangsan@example.com&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹é‡æ’å…¥&lt;/strong&gt;ï¼šä¸€æ¡è¯­å¥æ’å…¥å¤šè¡Œæ•°æ®ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (name, age, email)
VALUES
(&amp;#39;æå››&amp;#39;, 30, &amp;#39;lisi@example.com&amp;#39;),
(&amp;#39;ç‹äº”&amp;#39;, 28, &amp;#39;wangwu@example.com&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åˆ delete"&gt;âŒ åˆ ï¼ˆDELETEï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;DELETE&lt;/code&gt;è¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­çš„è®°å½•ã€‚&lt;strong&gt;è¯·åŠ¡å¿…è°¨æ…ä½¿ç”¨ï¼Œå°¤å…¶æ³¨æ„ &lt;code&gt;WHERE&lt;/code&gt;å­å¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DELETE FROM table_name [WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šåˆ é™¤ &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ &lt;code&gt;name&lt;/code&gt;ä¸º &amp;lsquo;å¼ ä¸‰&amp;rsquo; çš„è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DELETE FROM users WHERE name = &amp;#39;å¼ ä¸‰&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¸…ç©ºè¡¨&lt;/strong&gt;ï¼šå¦‚éœ€æ¸…ç©ºæ•´ä¸ªè¡¨çš„æ•°æ®ï¼ˆåˆ é™¤æ‰€æœ‰è¡Œï¼Œä½†ä¿ç•™è¡¨ç»“æ„ï¼‰ï¼Œå¯ä»¥ä¸ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DELETE FROM table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„ &lt;code&gt;TRUNCATE TABLE&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;TRUNCATE TABLE table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;TRUNCATE&lt;/code&gt;ä¸ä»…åˆ é™¤æ•°æ®ï¼Œè¿˜ä¼šé‡ç½®è¡¨çš„è‡ªå¢è®¡æ•°å™¨ï¼Œä¸”æ“ä½œé€šå¸¸ä¸å¯å›æ»š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ”¹update"&gt;ğŸ”„ æ”¹ï¼ˆUPDATEï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ç”¨äºä¿®æ”¹è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚&lt;strong&gt;åŒæ ·ï¼Œè¯·åŠ¡å¿…è°¨æ…ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE table_name
SET column1 = value1, column2 = value2, ...
[WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°† &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ &lt;code&gt;name&lt;/code&gt;ä¸º &amp;lsquo;æå››&amp;rsquo; çš„è®°å½•çš„ &lt;code&gt;age&lt;/code&gt;æ›´æ–°ä¸º 31ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE users SET age = 31 WHERE name = &amp;#39;æå››&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–°å¤šåˆ—&lt;/strong&gt;ï¼šåŒæ—¶æ›´æ–°å¤šä¸ªå­—æ®µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE users
SET age = 31, email = &amp;#39;new_lisi@example.com&amp;#39;
WHERE name = &amp;#39;æå››&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æŸ¥select"&gt;ğŸ” æŸ¥ï¼ˆSELECTï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ç”¨äºä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œæ˜¯å…¶ä¸­æœ€å¤æ‚ä¹Ÿæœ€å¸¸ç”¨çš„æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column1, column2, ...
FROM table_name
[WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;*&lt;/code&gt;é€šé…ç¬¦å¯ä»¥é€‰æ‹©æ‰€æœ‰åˆ—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹æŸ¥è¯¢&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥è¯¢ users è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®
SELECT * FROM users;
-- æŸ¥è¯¢ users è¡¨ä¸­ age å¤§äº 25 çš„æ‰€æœ‰ç”¨æˆ·çš„ name å’Œ email
SELECT name, email FROM users WHERE age &amp;gt; 25;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨å­å¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt;: è¿‡æ»¤è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE name LIKE &amp;#39;å¼ %&amp;#39;; -- æŸ¥è¯¢å§“å¼ çš„ç”¨æˆ·
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;: å¯¹ç»“æœé›†æ’åºï¼ˆ&lt;code&gt;ASC&lt;/code&gt;å‡åºï¼ˆé»˜è®¤ï¼‰ï¼Œ&lt;code&gt;DESC&lt;/code&gt;é™åºï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users ORDER BY age DESC; -- æŒ‰å¹´é¾„é™åºæ’åˆ—
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LIMIT&lt;/code&gt;&lt;/strong&gt;: é™åˆ¶è¿”å›çš„è®°å½•æ•°ï¼Œå¸¸ç”¨äºåˆ†é¡µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users LIMIT 5; -- è¿”å›å‰5æ¡è®°å½•
SELECT * FROM users LIMIT 5, 10; -- ä»ç¬¬6æ¡è®°å½•å¼€å§‹ï¼ˆè·³è¿‡5æ¡ï¼‰ï¼Œè¿”å›10æ¡è®°å½•
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;&lt;/strong&gt;: ç»“åˆèšåˆå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;AVG&lt;/code&gt;ï¼‰ï¼Œç”¨äºå°†æ•°æ®æŒ‰æŸäº›åˆ—åˆ†ç»„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS employee_count
FROM employees
GROUP BY department; -- ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥æ•°é‡
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;HAVING&lt;/code&gt;&lt;/strong&gt;: å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS employee_count
FROM employees
GROUP BY department
HAVING COUNT(*) &amp;gt; 5; -- åªæ˜¾ç¤ºå‘˜å·¥æ•°é‡å¤§äº5çš„éƒ¨é—¨
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¡ä»¶å­å¥ (&lt;code&gt;WHERE&lt;/code&gt;) æ˜¯å®‰å…¨ç»³&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œ &lt;code&gt;UPDATE&lt;/code&gt;å’Œ &lt;code&gt;DELETE&lt;/code&gt;æ“ä½œæ—¶ï¼Œ&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä»”ç»†æ£€æŸ¥ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ã€‚é—æ¼ &lt;code&gt;WHERE&lt;/code&gt;å­å¥å°†å¯¼è‡´æ“ä½œåº”ç”¨äºè¡¨ä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;è®°å½•ï¼Œå¯èƒ½é€ æˆæ— æ³•æŒ½å›çš„æ•°æ®ä¸¢å¤±æˆ–é”™è¯¯æ›´æ–°ã€‚ä¸€ä¸ªå¥½ä¹ æƒ¯æ˜¯ï¼Œå…ˆä½¿ç”¨ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥å’Œç›¸åŒçš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ç¡®è®¤ç›®æ ‡æ•°æ®ï¼Œç„¶åå†æ‰§è¡Œå†™æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜²èŒƒ SQL æ³¨å…¥&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ç¼–å†™ SQL æ—¶ï¼Œ&lt;strong&gt;ç»å¯¹ä¸è¦&lt;/strong&gt;ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å°†ç”¨æˆ·è¾“å…¥ç›´æ¥åµŒå…¥ SQL è¯­å¥ã€‚åº”å§‹ç»ˆä½¿ç”¨&lt;strong&gt;å‚æ•°åŒ–æŸ¥è¯¢&lt;/strong&gt;ï¼ˆPrepared Statementsï¼‰æ¥ä»æ ¹æœ¬ä¸Šé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡å¤„ç†&lt;/strong&gt;ï¼šå¯¹äºå¤šä¸ªç›¸å…³è”çš„å†™æ“ä½œï¼ˆä¾‹å¦‚å…ˆåˆ é™¤Aå†æ’å…¥Bï¼‰ï¼Œå»ºè®®ä½¿ç”¨&lt;strong&gt;äº‹åŠ¡&lt;/strong&gt;æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œè¿™æ ·å¯ä»¥ç»´æŠ¤æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;START TRANSACTION;
DELETE FROM orders WHERE user_id = 1001;
INSERT INTO order_logs (user_id, action) VALUES (1001, &amp;#39;Deleted orders&amp;#39;);
COMMIT; -- å¦‚æœä¸­é—´å‡ºé”™ï¼Œå¯ä»¥æ‰§è¡Œ ROLLBACK å›æ»š
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æŒæ¡è¿™äº›åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥è¯­æ³•ï¼Œæ˜¯ä½ å¼€å§‹ä½¿ç”¨ MySQL è¿›è¡Œæ•°æ®æ“ä½œçš„å…³é”®ç¬¬ä¸€æ­¥ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQLã€‚åœ¨å®é™…æ“ä½œä¸­ï¼ŒåŠ¡å¿…è°¨æ…å°å¿ƒï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œä¿®æ”¹å’Œåˆ é™¤æ“ä½œæ—¶ã€‚&lt;/p&gt;
&lt;h2 id="é‡å¤æ’å…¥"&gt;é‡å¤æ’å…¥
&lt;/h2&gt;&lt;p&gt;äº†è§£ MySQL ä¸­å¦‚ä½•å¤„ç†æ’å…¥æ—¶å¯èƒ½å‡ºç°çš„é‡å¤æ•°æ®å†²çªéå¸¸é‡è¦ã€‚&lt;code&gt;REPLACE INTO&lt;/code&gt;å’Œ &lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;æ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œå®ƒä»¬éƒ½èƒ½å¤„ç†å†²çªï¼Œä½†è¡Œä¸ºå’Œé€‚ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒã€‚æˆ‘ä¼šä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒä»¬ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ"&gt;âœ¨ æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ
&lt;/h3&gt;&lt;p&gt;MySQL æä¾›äº†ä¸¤ç§å¼ºå¤§çš„è¯­å¥æ¥å¤„ç†æ’å…¥æ•°æ®æ—¶å¯èƒ½é‡åˆ°çš„ä¸»é”®æˆ–å”¯ä¸€é”®å†²çªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;/strong&gt;ï¼šé‡‡ç”¨&amp;quot;&lt;strong&gt;å…ˆåˆ é™¤å†æ’å…¥&lt;/strong&gt;&amp;ldquo;çš„ç­–ç•¥ã€‚å‘ç°å†²çªæ—¶ï¼Œå®ƒä¼š&lt;strong&gt;å…ˆåˆ é™¤&lt;/strong&gt;å·²å­˜åœ¨çš„å†²çªè®°å½•ï¼Œç„¶å&lt;strong&gt;æ’å…¥&lt;/strong&gt;æ–°è®°å½•ã€‚è¿™æ˜¯ä¸€ä¸ª&lt;strong&gt;ç ´åæ€§&lt;/strong&gt;ç›¸å¯¹è¾ƒå¤§çš„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;/strong&gt;ï¼šé‡‡ç”¨&amp;rdquo;&lt;strong&gt;å°è¯•æ’å…¥ï¼Œå†²çªåˆ™æ›´æ–°&lt;/strong&gt;&amp;ldquo;çš„ç­–ç•¥ã€‚å‘ç°å†²çªæ—¶ï¼Œå®ƒä¼šåœ¨&lt;strong&gt;åŸæœ‰è®°å½•çš„åŸºç¡€ä¸Š&lt;/strong&gt;ç›´æ¥&lt;strong&gt;æ›´æ–°&lt;/strong&gt;æŒ‡å®šçš„å­—æ®µï¼Œæ˜¯ä¸€ç§&lt;strong&gt;éç ´åæ€§&lt;/strong&gt;çš„æ›´æ–°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼å¿«é€Ÿå¯¹æ¯”äº†å®ƒä»¬çš„ä¸»è¦ç‰¹æ€§ï¼Œå¸®åŠ©ä½ å½¢æˆåˆæ­¥å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†²çªæ—¶&lt;strong&gt;æ›´æ–°&lt;/strong&gt;ç°æœ‰è®°å½•&lt;/td&gt;
&lt;td&gt;å†²çªæ—¶&lt;strong&gt;å…ˆåˆ é™¤å†æ’å…¥&lt;/strong&gt;æ–°è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹åŸæœ‰æ•°æ®çš„å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªæ›´æ–°æ˜ç¡®æŒ‡å®šçš„åˆ—ï¼Œå…¶ä»–åˆ—å€¼&lt;strong&gt;ä¿ç•™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œå…¨æ›¿æ¢&lt;/strong&gt;æ•´è¡Œï¼ŒæœªæŒ‡å®šçš„åˆ—è¢«è®¾ç½®ä¸º&lt;strong&gt;é»˜è®¤å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œçš„æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 æ¬¡ &lt;code&gt;INSERT&lt;/code&gt;&lt;strong&gt;æˆ–&lt;/strong&gt; 1 æ¬¡ &lt;code&gt;UPDATE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1 æ¬¡ &lt;code&gt;DELETE&lt;/code&gt;&lt;strong&gt;åŠ &lt;/strong&gt; 1 æ¬¡ &lt;code&gt;INSERT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§¦å‘ &lt;code&gt;INSERT&lt;/code&gt;æˆ– &lt;code&gt;UPDATE&lt;/code&gt;è§¦å‘å™¨&lt;/td&gt;
&lt;td&gt;è§¦å‘ &lt;code&gt;DELETE&lt;/code&gt;å’Œ &lt;code&gt;INSERT&lt;/code&gt;è§¦å‘å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå¢ID (AUTO_INCREMENT)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿æŒä¸å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½ä¼šå˜åŒ–&lt;/strong&gt;ï¼ˆæ–°è®°å½•ä¼šåˆ†é…æ–°çš„è‡ªå¢IDï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸&lt;strong&gt;æ›´é«˜æ•ˆ&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯è¡¨æœ‰å¤šä¸ªç´¢å¼•æ—¶&lt;/td&gt;
&lt;td&gt;åˆ é™¤å’Œæ’å…¥æ“ä½œå¯èƒ½å¯¼è‡´&lt;strong&gt;æ›´å¤šå¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼ï¼ˆå½±å“è¡Œæ•°ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥æ–°è¡Œï¼š&lt;strong&gt;1&lt;/strong&gt;ï¼›æ›´æ–°å·²æœ‰è¡Œï¼š&lt;strong&gt;2&lt;/strong&gt;ï¼›æ›´æ–°ä½†å€¼æ— å˜åŒ–ï¼š&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥æ–°è¡Œï¼š&lt;strong&gt;1&lt;/strong&gt;ï¼›æ›¿æ¢å·²æœ‰è¡Œï¼š&lt;strong&gt;2&lt;/strong&gt; (1åˆ é™¤ + 1æ’å…¥)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è¯¦è§£-replace-into"&gt;ğŸ“˜ è¯¦è§£ REPLACE INTO
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;æ˜¯ MySQL çš„ä¸€ä¸ªæ‰©å±•åŠŸèƒ½ï¼Œå…¶å·¥ä½œæ–¹å¼éå¸¸ç›´æ¥ï¼šæœ‰å†²çªå°±æ›¿æ¢ï¼Œæ²¡å†²çªå°±æ’å…¥ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•å½¢å¼"&gt;ğŸ”§ è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;æœ‰ä¸‰ç§å¸¸ç”¨çš„è¯­æ³•å½¢å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‡å®šåˆ—åå’Œå€¼&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REPLACE INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ SET å­å¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REPLACE INTO table_name
SET column1 = value1, column2 = value2, column3 = value3, ...;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»å…¶ä»–è¡¨æŸ¥è¯¢æ’å…¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REPLACE INTO table_name (column1, column2, ...)
SELECT column1, column2, ...
FROM another_table
WHERE ...;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å·¥ä½œåŸç†"&gt;âš™ï¸ å·¥ä½œåŸç†
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;MySQL å°è¯•æ‰§è¡Œä¸€ä¸ªæ™®é€šçš„ &lt;code&gt;INSERT&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ–°æ•°æ®ä¸ç°æœ‰è®°å½•çš„&lt;strong&gt;ä¸»é”®&lt;/strong&gt;æˆ–&lt;strong&gt;å”¯ä¸€ç´¢å¼•&lt;/strong&gt;å†²çªï¼š
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“ä¼š&lt;strong&gt;å…ˆåˆ é™¤&lt;/strong&gt;å·²æœ‰çš„é‚£æ¡å†²çªè®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶å&lt;strong&gt;å†æ’å…¥&lt;/strong&gt;æ–°çš„è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰å‘ç”Ÿä»»ä½•å†²çªï¼Œåˆ™ç›´æ¥æ’å…¥æ–°è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;ï¼šå¯ä»¥å°†å…¶ç†è§£ä¸º &lt;code&gt;DELETE FROM ... WHERE ...&lt;/code&gt;ï¼ˆåˆ é™¤å†²çªè¡Œï¼‰å’Œ &lt;code&gt;INSERT INTO ...&lt;/code&gt;ï¼ˆæ’å…¥æ–°è¡Œï¼‰ä¸¤ä¸ªæ“ä½œçš„ç»„åˆã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿…éœ€çš„å”¯ä¸€çº¦æŸ&lt;/strong&gt;ï¼š&lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;strong&gt;åªæœ‰åœ¨è¡¨å­˜åœ¨ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ—¶æ‰æœ‰æ„ä¹‰&lt;/strong&gt;ã€‚å¦åˆ™ï¼Œå®ƒçš„è¡Œä¸ºå°±å’Œæ™®é€š &lt;code&gt;INSERT&lt;/code&gt;ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´é‡å¤æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸¢å¤±é£é™©&lt;/strong&gt;ï¼šç”±äºå®ƒä¼š&lt;strong&gt;ç›´æ¥åˆ é™¤&lt;/strong&gt;æ•´æ¡æ—§è®°å½•ï¼Œæ‰€ä»¥å¦‚æœæ–°è®°å½•ä¸­æ²¡æœ‰åŒ…å«æ—§è®°å½•çš„æ‰€æœ‰å­—æ®µï¼Œé‚£äº›æœªæŒ‡å®šçš„å­—æ®µå°±ä¼šè¢«è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆå¦‚ NULLï¼‰ï¼Œ&lt;strong&gt;é€ æˆæ•°æ®ä¸¢å¤±&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå¢IDå˜åŒ–&lt;/strong&gt;ï¼šå¦‚æœè¡¨æœ‰è‡ªå¢ä¸»é”®ï¼Œæ›¿æ¢æ“ä½œåï¼Œ&lt;strong&gt;æ–°è®°å½•ä¼šè·å¾—ä¸€ä¸ªå…¨æ–°çš„è‡ªå¢ID&lt;/strong&gt;ï¼Œè¿™å¯èƒ½ä¼šç ´åä¸å…¶ä»–è¡¨çš„å¤–é”®å…³è”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;ï¼šæ­¤æ“ä½œä¼šè§¦å‘ &lt;code&gt;DELETE&lt;/code&gt;å’Œ &lt;code&gt;INSERT&lt;/code&gt;è§¦å‘å™¨ï¼Œä½†&lt;strong&gt;ä¸ä¼šè§¦å‘&lt;/strong&gt; &lt;code&gt;UPDATE&lt;/code&gt;è§¦å‘å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯-1"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦å®Œå…¨æ›¿æ¢æ—§è®°å½•&lt;/strong&gt;ï¼Œä¸å…³å¿ƒæ—§æ•°æ®çš„å…¶ä»–å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¯¼å…¥æˆ–æ‰¹é‡å¤„ç†&lt;/strong&gt;ï¼Œç¡®ä¿æœ€ç»ˆæ•°æ®æ˜¯æŒ‡å®šçš„ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œé€»è¾‘ç®€å•ï¼Œ&lt;strong&gt;ä¸éœ€è¦ä¿ç•™ä»»ä½•å†å²å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-è¯¦è§£-insert--on-duplicate-key-update-odku"&gt;ğŸ“— è¯¦è§£ INSERT &amp;hellip; ON DUPLICATE KEY UPDATE (ODKU)
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªè¯­å¥æä¾›äº†æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚å®ƒçš„ç­–ç•¥æ˜¯ï¼šèƒ½æ’å…¥å°±æ’å…¥ï¼Œä¸èƒ½æ’å…¥å°±æ›´æ–°ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•å½¢å¼-1"&gt;ğŸ”§ è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...)
ON DUPLICATE KEY UPDATE
column1 = value1,
column2 = value2,
...;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é«˜çº§æŠ€å·§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;VALUES()&lt;/code&gt;å‡½æ•°å¼•ç”¨åŸè®¡åˆ’æ’å…¥çš„å€¼ï¼Œéå¸¸é€‚ç”¨äºå¢é‡æ“ä½œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO page_views (page_id, view_count)
VALUES (101, 1)
ON DUPLICATE KEY UPDATE
view_count = view_count + VALUES(view_count); -- å†²çªæ—¶ view_count = view_count + 1
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒæ¡ä»¶æ›´æ–°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO products (id, price)
VALUES (1, 150)
ON DUPLICATE KEY UPDATE
price = IF(VALUES(price) &amp;gt; price, VALUES(price), price); -- ä»…å½“æ–°ä»·æ ¼æ›´é«˜æ—¶æ›´æ–°
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å·¥ä½œåŸç†-1"&gt;âš™ï¸ å·¥ä½œåŸç†
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;MySQL å°è¯•æ‰§è¡Œä¸€ä¸ªæ™®é€šçš„ &lt;code&gt;INSERT&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ–°æ•°æ®ä¸ç°æœ‰è®°å½•çš„&lt;strong&gt;ä¸»é”®&lt;/strong&gt;æˆ–&lt;strong&gt;å”¯ä¸€ç´¢å¼•&lt;/strong&gt;å†²çªï¼š
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“&lt;strong&gt;ä¸ä¼šåˆ é™¤&lt;/strong&gt;æ—§è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;è€Œæ˜¯æ‰§è¡Œ &lt;code&gt;UPDATE&lt;/code&gt;å­å¥ï¼Œ&lt;strong&gt;ä»…ä¿®æ”¹&lt;/strong&gt;ä½ æ˜ç¡®æŒ‡å®šçš„é‚£äº›åˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰å‘ç”Ÿä»»ä½•å†²çªï¼Œåˆ™ç›´æ¥æ’å…¥æ–°è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ª&lt;strong&gt;åŸå­æ“ä½œ&lt;/strong&gt;ï¼Œè¦ä¹ˆæ’å…¥ï¼Œè¦ä¹ˆæ›´æ–°ï¼Œé¿å…äº†å…ˆæŸ¥è¯¢ååˆ¤æ–­å¯èƒ½äº§ç”Ÿçš„ç«æ€æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿…éœ€çš„å”¯ä¸€çº¦æŸ&lt;/strong&gt;ï¼šå’Œ &lt;code&gt;REPLACE INTO&lt;/code&gt;ä¸€æ ·ï¼Œ&lt;strong&gt;éœ€è¦ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ‰èƒ½è§¦å‘æ›´æ–°è¡Œä¸º&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨åˆ†æ›´æ–°&lt;/strong&gt;ï¼šä½ å¯ä»¥&lt;strong&gt;åªæ›´æ–°éœ€è¦æ”¹å˜çš„å­—æ®µ&lt;/strong&gt;ï¼Œå…¶ä»–å­—æ®µä¼šä¿æŒåŸæ ·ã€‚è¿™æ˜¯å®ƒä¸ &lt;code&gt;REPLACE INTO&lt;/code&gt;çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸é”&lt;/strong&gt;ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œæ­¤æ“ä½œå¯èƒ½ä¼šå¼•å‘è¡Œé”ç”šè‡³é—´éš™é”ï¼ˆå–å†³äºéš”ç¦»çº§åˆ«ï¼‰ï¼Œæœ‰&lt;strong&gt;æ­»é”é£é™©&lt;/strong&gt;ï¼Œéœ€æ³¨æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;ï¼šæ­¤æ“ä½œä¼šè§¦å‘ &lt;code&gt;BEFORE UPDATE&lt;/code&gt;å’Œ &lt;code&gt;AFTER UPDATE&lt;/code&gt;è§¦å‘å™¨ï¼ˆå¦‚æœå‘ç”Ÿæ›´æ–°ï¼‰ï¼Œä½†&lt;strong&gt;ä¸ä¼šè§¦å‘&lt;/strong&gt; &lt;code&gt;DELETE&lt;/code&gt;è§¦å‘å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯-2"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°è®¡æ•°å™¨æˆ–ç´¯åŠ å€¼&lt;/strong&gt;ï¼Œå¦‚æ–‡ç« é˜…è¯»é‡ã€å•†å“åº“å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°è®°å½•çš„éƒ¨åˆ†å­—æ®µ&lt;/strong&gt;ï¼Œå¦‚ç”¨æˆ·æ›´æ”¹é‚®ç®±ï¼Œä½†éœ€è¦ä¿ç•™æ³¨å†Œæ—¶é—´ç­‰åŸæœ‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å»é‡ä¸åˆå¹¶&lt;/strong&gt;ï¼Œç¡®ä¿æ•°æ®çš„å”¯ä¸€æ€§çš„åŒæ—¶æ›´æ–°çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»»ä½•éœ€è¦ä¿ç•™åŸæœ‰è®°å½•å¤§éƒ¨åˆ†æ•°æ®çš„åœºæ™¯&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="-å¦‚ä½•é€‰æ‹©å†³ç­–æŒ‡å—"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼šå†³ç­–æŒ‡å—
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„è¯­å¥ï¼Œä¸‹é¢è¿™ä¸ªå†³ç­–æµç¨‹æ¢³ç†äº†å…³é”®è€ƒé‡ç‚¹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[é‡åˆ°æ•°æ®é‡å¤æ’å…¥é—®é¢˜] --&amp;gt; B{å¦‚ä½•é€‰æ‹©è§£å†³æ–¹æ¡ˆ?}
B -- éœ€è¦åŸå­æ€§çš„&amp;lt;br&amp;gt;æ’å…¥æˆ–æ›´æ–° --&amp;gt; C{å†²çªæ—¶å¦‚ä½•å¤„ç†åŸæœ‰æ•°æ®?}
C -- å®Œå…¨æ›¿æ¢æ•´è¡Œæ•°æ®&amp;lt;br&amp;gt;ä¸å…³å¿ƒæ—§æ•°æ® --&amp;gt; D[REPLACE INTO]
C -- ä»…æ›´æ–°éƒ¨åˆ†å­—æ®µ&amp;lt;br&amp;gt;ä¿ç•™å…¶ä»–å­—æ®µåŸæœ‰å€¼ --&amp;gt; E[INSERT ... ON DUPLICATE KEY UPDATE]
C -- å¿½ç•¥é‡å¤é¡¹&amp;lt;br&amp;gt;ä¿ç•™æ—§æ•°æ®ä¸åšä»»ä½•æ“ä½œ --&amp;gt; F[INSERT IGNORE]
B -- æ— éœ€åŸå­æ€§æ“ä½œ&amp;lt;br&amp;gt;å¯æ¥å—ä¸¤æ¬¡æ•°æ®åº“äº¤äº’ --&amp;gt; G[åº”ç”¨å±‚ç¨‹åºåˆ¤æ–­]
subgraph D [ ]
D1[ä¼˜ç‚¹: æ“ä½œç®€å•]
D2[ç¼ºç‚¹: ç ´åæ€§æ“ä½œ, å¯èƒ½ä¸¢å¤±æ•°æ®, è‡ªå¢IDä¼šå˜]
end
subgraph E [ ]
E1[ä¼˜ç‚¹: å¯éƒ¨åˆ†æ›´æ–°, æ€§èƒ½é€šå¸¸æ›´å¥½]
E2[ç¼ºç‚¹: è¯­æ³•ç¨å¤æ‚, é«˜å¹¶å‘ä¸‹æœ‰é”é£é™©]
end
subgraph F [ ]
F1[ä¼˜ç‚¹: ç®€å•å¿½ç•¥]
F2[ç¼ºç‚¹: æ— æ³•æ›´æ–°, ä»…å¿½ç•¥]
end
subgraph G [ ]
G1[ä¼˜ç‚¹: æœ€çµæ´»]
G2[ç¼ºç‚¹: å­˜åœ¨ç«æ€æ¡ä»¶é£é™©]
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€‰æ‹©æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹è¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨å¤§å¤šæ•°éœ€è¦&amp;quot;å­˜åœ¨åˆ™æ›´æ–°&amp;quot;çš„åœºæ™¯ä¸‹ï¼Œå®ƒéƒ½æ˜¯&lt;strong&gt;æ›´ä¼˜çš„é€‰æ‹©&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆä¸”ä¸ä¼šæ— æ„ä¸­ç ´åå…¶ä»–æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;/strong&gt;ï¼šæ¸…æ¥šåœ°çŸ¥é“å®ƒä¼š&lt;strong&gt;åˆ é™¤æ•´è¡Œæ•°æ®&lt;/strong&gt;ã€‚ä»…åœ¨éœ€è¦å®Œå…¨æ›¿æ¢æ•´æ¡è®°å½•ã€ä¸å…³å¿ƒä¸¢å¤±å…¶ä»–å­—æ®µæ•°æ®æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å¾—è¿˜æœ‰ &lt;code&gt;INSERT IGNORE&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœä½ çš„éœ€æ±‚æ˜¯&amp;quot;å­˜åœ¨åˆ™è·³è¿‡ï¼Œä¸æ’å…¥ä¹Ÿä¸æ›´æ–°&amp;rdquo;ï¼Œé‚£ä¹ˆ &lt;code&gt;INSERT IGNORE&lt;/code&gt;æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå®ƒä¼šå¿½ç•¥å¯¼è‡´é‡å¤çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘åœºæ™¯&lt;/strong&gt;ï¼šå¯¹äºå¹¶å‘è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œå³ä½¿æ˜¯ &lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;ä¹Ÿå¯èƒ½æœ‰é”ç«äº‰é—®é¢˜ï¼Œæœ‰æ—¶åœ¨åº”ç”¨å±‚åšé€»è¾‘åˆ¤æ–­ï¼ˆå…ˆæŸ¥è¯¢ï¼Œå†å†³å®šæ’å…¥æˆ–æ›´æ–°ï¼‰å¯èƒ½æ˜¯æ›´ç¨³å¦¥çš„æ–¹æ¡ˆï¼Œå°½ç®¡è¿™ä¼šå¢åŠ ä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå¼ºå¤§çš„ MySQL åŠŸèƒ½ï¼&lt;/p&gt;
&lt;h2 id="full-join"&gt;full join
&lt;/h2&gt;&lt;p&gt;SQL ä¸­çš„ &lt;code&gt;FULL JOIN&lt;/code&gt;ï¼ˆå…¨è¿æ¥ï¼‰æ˜¯ä¸€ç§è¿æ¥æ“ä½œï¼Œå®ƒèƒ½å¤Ÿè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰è¡Œï¼Œæ— è®ºè¿™äº›è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ˜¯å¦æœ‰åŒ¹é…çš„è®°å½•ã€‚å½“æŸä¸€è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…æ—¶ï¼Œå¯¹åº”çš„å­—æ®µä¼šç”¨ &lt;code&gt;NULL&lt;/code&gt;å€¼å¡«å……ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å®ƒçš„æ•ˆæœï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Persons&lt;/code&gt;è¡¨&lt;/strong&gt;ï¼šå­˜å‚¨äººå‘˜ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Orders&lt;/code&gt;è¡¨&lt;/strong&gt;ï¼šå­˜å‚¨è®¢å•ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ &lt;code&gt;Id_P&lt;/code&gt;å­—æ®µä¸ &lt;code&gt;Persons&lt;/code&gt;è¡¨å…³è”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart LR
Persons[Persons è¡¨]
Orders[Orders è¡¨]
subgraph P [Persons è¡¨æ•°æ®]
direction LR
P1[Id_P: 1&amp;lt;br&amp;gt;LastName: Adams]
P2[Id_P: 2&amp;lt;br&amp;gt;LastName: Bush]
P3[Id_P: 3&amp;lt;br&amp;gt;LastName: Carter]
end
subgraph O [Orders è¡¨æ•°æ®]
direction LR
O1[Id_O: 1&amp;lt;br&amp;gt;OrderNo: 77895&amp;lt;br&amp;gt;Id_P: 3]
O2[Id_O: 2&amp;lt;br&amp;gt;OrderNo: 44678&amp;lt;br&amp;gt;Id_P: 3]
O3[Id_O: 3&amp;lt;br&amp;gt;OrderNo: 22456&amp;lt;br&amp;gt;Id_P: 1]
O4[Id_O: 4&amp;lt;br&amp;gt;OrderNo: 24562&amp;lt;br&amp;gt;Id_P: 1]
O5[Id_O: 5&amp;lt;br&amp;gt;OrderNo: 34764&amp;lt;br&amp;gt;Id_P: 65]
end
Persons --&amp;gt; P
Orders --&amp;gt; O
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;FULL JOIN&lt;/code&gt;æŸ¥è¯¢ï¼Œå¸Œæœ›åˆ—å‡ºæ‰€æœ‰çš„äººå’Œæ‰€æœ‰çš„è®¢å•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
FULL JOIN Orders ON Persons.Id_P = Orders.Id_P
ORDER BY Persons.LastName;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥è¯¢ç»“æœå°†ä¼šæ˜¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;LastName&lt;/th&gt;
&lt;th&gt;FirstName&lt;/th&gt;
&lt;th&gt;OrderNo&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Adams&lt;/td&gt;
&lt;td&gt;John&lt;/td&gt;
&lt;td&gt;22456&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Adams&lt;/td&gt;
&lt;td&gt;John&lt;/td&gt;
&lt;td&gt;24562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Bush&lt;/td&gt;
&lt;td&gt;George&lt;/td&gt;
&lt;td&gt;&lt;em&gt;NULL&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Carter&lt;/td&gt;
&lt;td&gt;Thomas&lt;/td&gt;
&lt;td&gt;77895&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Carter&lt;/td&gt;
&lt;td&gt;Thomas&lt;/td&gt;
&lt;td&gt;44678&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;NULL&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;em&gt;NULL&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;34764&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä»è¿™ä¸ªç»“æœä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Adams&lt;/strong&gt; å’Œ &lt;strong&gt;Carter&lt;/strong&gt; æ—¢æœ‰äººå‘˜ä¿¡æ¯ä¹Ÿæœ‰è®¢å•ä¿¡æ¯ï¼Œæ­£å¸¸æ˜¾ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bush&lt;/strong&gt; åœ¨ &lt;code&gt;Persons&lt;/code&gt;è¡¨ä¸­å­˜åœ¨ï¼Œä½†åœ¨ &lt;code&gt;Orders&lt;/code&gt;è¡¨ä¸­æ²¡æœ‰ä»–çš„è®¢å•ï¼ˆ&lt;code&gt;OrderNo&lt;/code&gt;ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®¢å•å· &lt;strong&gt;34764&lt;/strong&gt; åœ¨ &lt;code&gt;Orders&lt;/code&gt;è¡¨ä¸­å­˜åœ¨ï¼Œä½†å¯¹åº”çš„ &lt;code&gt;Id_P&lt;/code&gt;(65) åœ¨ &lt;code&gt;Persons&lt;/code&gt;è¡¨ä¸­æ‰¾ä¸åˆ°ï¼ˆ&lt;code&gt;LastName&lt;/code&gt;å’Œ &lt;code&gt;FirstName&lt;/code&gt;ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦ç”¨é€”"&gt;ğŸ¯ ä¸»è¦ç”¨é€”
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;FULL JOIN&lt;/code&gt;é€šå¸¸ç”¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå¹¶ä¸¤ä¸ªè¡¨çš„æ•°æ®&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦åŒæ—¶çœ‹åˆ°ä¸¤ä¸ªè¡¨çš„å…¨éƒ¨è®°å½•æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¯”å¯¹å’ŒæŸ¥æ‰¾å·®å¼‚&lt;/strong&gt;ï¼šéå¸¸é€‚åˆç”¨æ¥å‘ç°ä¸¤ä¸ªè¡¨ä¹‹é—´çš„ä¸åŒ¹é…è®°å½•ã€‚ä¾‹å¦‚ï¼Œæ‰¾å‡ºæ²¡æœ‰è®¢å•çš„å®¢æˆ·ï¼Œæˆ–è€…æ‰¾ä¸åˆ°å¯¹åº”å®¢æˆ·çš„è®¢å•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„mysql-ä¸­çš„ç‰¹æ®Šæƒ…å†µ"&gt;âš ï¸ æ³¨æ„ï¼šMySQL ä¸­çš„ç‰¹æ®Šæƒ…å†µ
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;MySQL æ•°æ®åº“æœ¬èº«å¹¶ä¸ç›´æ¥æ”¯æŒ &lt;code&gt;FULL JOIN&lt;/code&gt;è¯­æ³•&lt;/strong&gt;ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€æ— æ³•å®ç°å…¨è¿æ¥çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å°† &lt;strong&gt;&lt;code&gt;LEFT JOIN&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;RIGHT JOIN&lt;/code&gt;&lt;/strong&gt; çš„ç»“æœç”¨ &lt;strong&gt;&lt;code&gt;UNION&lt;/code&gt;&lt;/strong&gt; æ“ä½œç¬¦åˆå¹¶èµ·æ¥**æ¥æ¨¡æ‹Ÿ &lt;code&gt;FULL JOIN&lt;/code&gt;çš„æ•ˆæœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
LEFT JOIN Orders ON Persons.Id_P = Orders.Id_P
UNION
SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
RIGHT JOIN Orders ON Persons.Id_P = Orders.Id_P;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡æŸ¥è¯¢è¯­å¥ä¼šè¾¾åˆ°ä¸ &lt;code&gt;FULL JOIN&lt;/code&gt;ç›¸åŒçš„ç»“æœã€‚&lt;/p&gt;
&lt;h3 id="-ä¸å…¶ä»–-join-æ“ä½œçš„å¯¹æ¯”"&gt;ğŸ“Š ä¸å…¶ä»– JOIN æ“ä½œçš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ &lt;code&gt;FULL JOIN&lt;/code&gt;åœ¨ SQL è¿æ¥æ“ä½œä¸­çš„ä½ç½®ï¼Œè¿™ä¸ªè¡¨æ ¼ç®€è¦å¯¹æ¯”äº†ä¸»è¦çš„ JOIN ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JOIN ç±»å‹&lt;/th&gt;
&lt;th&gt;ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;INNER JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­&lt;strong&gt;åŒ¹é…&lt;/strong&gt;çš„è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LEFT JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å·¦è¡¨&lt;/strong&gt;çš„å…¨éƒ¨è¡Œï¼Œä»¥åŠå³è¡¨ä¸­åŒ¹é…çš„è¡Œï¼ˆå³è¡¨æ— åŒ¹é…åˆ™è¡¥NULLï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RIGHT JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å³è¡¨&lt;/strong&gt;çš„å…¨éƒ¨è¡Œï¼Œä»¥åŠå·¦è¡¨ä¸­åŒ¹é…çš„è¡Œï¼ˆå·¦è¡¨æ— åŒ¹é…åˆ™è¡¥NULLï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;FULL JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å·¦å³ä¸¤è¡¨&lt;/strong&gt;çš„å…¨éƒ¨è¡Œï¼Œæ— è®ºæ˜¯å¦åŒ¹é…ï¼ˆæ— åŒ¹é…éƒ¨åˆ†å‡è¡¥NULLï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CROSS JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›ä¸¤è¡¨çš„&lt;strong&gt;ç¬›å¡å°”ç§¯&lt;/strong&gt;ï¼ˆæ¯ä¸€è¡Œéƒ½ä¸å¦ä¸€è¡¨çš„æ¯ä¸€è¡Œç»„åˆï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ ç†è§£ &lt;code&gt;FULL JOIN&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="concat"&gt;Concat
&lt;/h2&gt;&lt;p&gt;CONCATå‡½æ•°åœ¨ä»»ä½•ä¸€ä¸ªå‚æ•°ä¸ºnullæ—¶éƒ½ä¼šè¿”å›null&lt;/p&gt;
&lt;h2 id="null-å€¼æ¯”è¾ƒ"&gt;NULL å€¼æ¯”è¾ƒ
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æ¯”è¾ƒç¡®å®æ˜¯ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼š&lt;strong&gt;åœ¨ MySQL ä¸­ï¼Œä¸¤ä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼åœ¨ä½¿ç”¨ &lt;code&gt;=&lt;/code&gt;æ“ä½œç¬¦åˆ¤æ–­æ—¶å¹¶ä¸ç›¸ç­‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠ“ä½æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ MySQL ä¸­ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æ¯”è¾ƒè¡Œä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¯”è¾ƒåœºæ™¯&lt;/th&gt;
&lt;th&gt;ä½¿ç”¨æ“ä½œç¬¦&lt;/th&gt;
&lt;th&gt;ç»“æœ&lt;/th&gt;
&lt;th&gt;åŸå› è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL = NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸¤ä¸ªæœªçŸ¥å€¼æ— æ³•åˆ¤å®šæ˜¯å¦ç›¸ç­‰ï¼Œç»“æœä¹Ÿæ˜¯æœªçŸ¥ (&lt;code&gt;NULL&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL IS NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;IS NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TRUE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜ç¡®åˆ¤æ–­æ˜¯å¦ä¸º &lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éNULLå€¼ = NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å·²çŸ¥å€¼ä¸æœªçŸ¥å€¼æ— æ³•æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL &amp;lt;=&amp;gt; NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TRUE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨ç­‰äº&lt;/strong&gt;æ“ä½œç¬¦ï¼Œä¸“é—¨å¤„ç† &lt;code&gt;NULL&lt;/code&gt;æ¯”è¾ƒï¼Œè®¤ä¸ºä¸¤ä¸ª &lt;code&gt;NULL&lt;/code&gt;ç›¸ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆ-null-ä¸-null-ä¸ç›¸ç­‰"&gt;âš ï¸ ä¸ºä»€ä¹ˆ NULL ä¸ NULL ä¸ç›¸ç­‰ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œ&lt;code&gt;NULL&lt;/code&gt;è¡¨ç¤ºä¸€ä¸ª&lt;strong&gt;ç¼ºå¤±çš„ã€æœªçŸ¥çš„å€¼&lt;/strong&gt;ã€‚ ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå ä½ç¬¦ï¼Œä»£è¡¨â€œè¿™é‡Œæœ‰ä¸€ä¸ªå€¼ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆâ€ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ® SQL æ ‡å‡†ï¼ˆMySQL éµå¾ªæ­¤æ ‡å‡†ï¼‰ï¼Œ&lt;strong&gt;ä»»ä½•ä¸ &lt;code&gt;NULL&lt;/code&gt;çš„æ¯”è¾ƒæ“ä½œï¼ˆå³ä½¿æ˜¯ä¸å¦ä¸€ä¸ª &lt;code&gt;NULL&lt;/code&gt;æ¯”è¾ƒï¼‰çš„ç»“æœéƒ½æ˜¯ &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼Œè¿™è¡¨ç¤ºâ€œæœªçŸ¥â€ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå½“ä½ å°è¯• &lt;code&gt;SELECT NULL = NULL;&lt;/code&gt;æ—¶ï¼Œå¾—åˆ°çš„ç»“æœä¸ä¼šæ˜¯ &lt;code&gt;TRUE&lt;/code&gt;(1)ï¼Œè€Œæ˜¯ &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®åˆ¤æ–­-null"&gt;ğŸ” å¦‚ä½•æ­£ç¡®åˆ¤æ–­ NULLï¼Ÿ
&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶ä¸èƒ½ç”¨ &lt;code&gt;=&lt;/code&gt;å’Œ &lt;code&gt;!=&lt;/code&gt;æ¥åˆ¤æ–­ &lt;code&gt;NULL&lt;/code&gt;ï¼ŒMySQL æä¾›äº†ä¸“é—¨çš„æ“ä½œç¬¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IS NULL&lt;/code&gt;&lt;/strong&gt;: å½“åˆ—çš„å€¼æ˜¯ &lt;code&gt;NULL&lt;/code&gt;æ—¶ï¼Œæ­¤è¿ç®—ç¬¦è¿”å› &lt;code&gt;TRUE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IS NOT NULL&lt;/code&gt;&lt;/strong&gt;: å½“åˆ—çš„å€¼ä¸ä¸º &lt;code&gt;NULL&lt;/code&gt;æ—¶ï¼Œæ­¤è¿ç®—ç¬¦è¿”å› &lt;code&gt;TRUE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœä½ æƒ³åˆ¤æ–­ä¸¤ä¸ªå­—æ®µæ˜¯å¦éƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM your_table
WHERE column1 IS NULL AND column2 IS NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å¤„ç†-null-æ¯”è¾ƒçš„å®ç”¨æ–¹æ³•"&gt;ğŸ› ï¸ å¤„ç† NULL æ¯”è¾ƒçš„å®ç”¨æ–¹æ³•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°è½¬æ¢åå†æ¯”è¾ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°ä¼šè¿”å›å…¶å‚æ•°åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªé &lt;code&gt;NULL&lt;/code&gt;çš„å€¼ã€‚ ä½ å¯ä»¥ç”¨å®ƒæŠŠ &lt;code&gt;NULL&lt;/code&gt;è½¬æ¢æˆä¸€ä¸ªå…·ä½“çš„é»˜è®¤å€¼å†æ¯”è¾ƒï¼Œè¿™åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°† NULL è§†ä¸ºç©ºå­—ç¬¦ä¸² &amp;#39;&amp;#39; è¿›è¡Œæ¯”è¾ƒ
SELECT *
FROM your_table
WHERE COALESCE(column1, &amp;#39;&amp;#39;) = COALESCE(column2, &amp;#39;&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;æ“ä½œç¬¦ï¼ˆå®‰å…¨ç­‰äºï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„ &lt;strong&gt;&lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;&lt;/strong&gt; æ“ä½œç¬¦ï¼ˆå®‰å…¨ç­‰äºï¼‰ã€‚&lt;strong&gt;å®ƒä¸ä»…èƒ½åœ¨ä¸¤ä¸ªå€¼ç›¸ç­‰æ—¶è¿”å› &lt;code&gt;TRUE&lt;/code&gt;ï¼Œåœ¨ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯ &lt;code&gt;NULL&lt;/code&gt;æ—¶ä¹Ÿä¼šè¿”å› &lt;code&gt;TRUE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨å®‰å…¨ç­‰äºåˆ¤æ–­ï¼Œä¸¤ä¸ª NULL ä¼šè¿”å› TRUE
SELECT NULL &amp;lt;=&amp;gt; NULL; -- è¿”å› 1 (TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ å…¶ä»–æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšåˆå‡½æ•°å¿½ç•¥ &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;COUNT()&lt;/code&gt;ã€&lt;code&gt;SUM()&lt;/code&gt;ã€&lt;code&gt;AVG()&lt;/code&gt;ç­‰èšåˆå‡½æ•°æ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å¿½ç•¥ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚ ä¾‹å¦‚ï¼Œ&lt;code&gt;COUNT(column_name)&lt;/code&gt;ä¸ä¼šç»Ÿè®¡è¯¥åˆ—ä¸­ä¸º &lt;code&gt;NULL&lt;/code&gt;çš„è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’åºä¸­çš„ &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å¯¹æŸåˆ—æ’åºæ—¶ï¼Œ&lt;code&gt;NULL&lt;/code&gt;å€¼é»˜è®¤ä¼šè¢«æ”¾åœ¨ç»“æœé›†çš„æœ€å‰é¢ï¼ˆ&lt;code&gt;ASC&lt;/code&gt;å‡åºæ—¶ï¼‰æˆ–æœ€åé¢ï¼ˆ&lt;code&gt;DESC&lt;/code&gt;é™åºæ—¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;NULL&lt;/code&gt;ä¸ç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;ä¸åŒ&lt;/strong&gt;ï¼š&lt;code&gt;NULL&lt;/code&gt;è¡¨ç¤ºæœªçŸ¥ï¼Œè€Œç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;æ˜¯ä¸€ä¸ªç¡®å®šçš„ã€é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸²å€¼ã€‚ åœ¨å®šä¹‰ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;çš„åˆ—ä¸­ï¼Œå¯ä»¥æ’å…¥ç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;ï¼Œä½†ä¸èƒ½æ’å…¥ &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;h2 id="conv"&gt;CONV
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°æ˜¯ä¸€ä¸ªç”¨äº&lt;strong&gt;è¿›åˆ¶è½¬æ¢&lt;/strong&gt;çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å°†æ•°å­—ä»ä¸€ç§è¿›åˆ¶è¡¨ç¤ºè½¬æ¢ä¸ºå¦ä¸€ç§è¿›åˆ¶è¡¨ç¤ºã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å’Œç¤ºä¾‹æ¥å¸®ä½ å¿«é€Ÿäº†è§£å®ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŠŸèƒ½ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ•°å­—ä»ä¸€ç§è¿›åˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§è¿›åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CONV(number, from_base, to_base)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°è¯´æ˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;number&lt;/code&gt;: è¦è½¬æ¢çš„æ•°å­—ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å€¼ &lt;code&gt;from_base&lt;/code&gt;: åŸå§‹è¿›åˆ¶ (2-36) &lt;code&gt;to_base&lt;/code&gt;: ç›®æ ‡è¿›åˆ¶ (2-36)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æˆåŠŸæ—¶è¿”å›è¡¨ç¤ºç›®æ ‡è¿›åˆ¶æ•°å­—çš„å­—ç¬¦ä¸²ï¼›å¦‚æœä»»ä¸€å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œæˆ–è¿›åˆ¶è¶…å‡ºèŒƒå›´ï¼Œæˆ–æ•°å­—åŒ…å«éæ³•å­—ç¬¦ï¼Œåˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;æˆ– &lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°å†™æ•æ„Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹äºè¶…è¿‡10çš„è¿›åˆ¶ï¼ˆå¦‚åå…­è¿›åˆ¶ï¼‰ï¼Œå­—æ¯ &lt;code&gt;A-F&lt;/code&gt;å’Œ &lt;code&gt;a-f&lt;/code&gt;è¢«è§†ä¸ºç­‰æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•ä¸å‚æ•°"&gt;ğŸ§® åŸºæœ¬è¯­æ³•ä¸å‚æ•°
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CONV(number, from_base, to_base)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;number&lt;/strong&gt;ï¼š è¦è½¬æ¢çš„æ•°å­—ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„æ•°å­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;from_base&lt;/strong&gt;ï¼š &lt;code&gt;number&lt;/code&gt;å½“å‰æ‰€å¤„çš„è¿›åˆ¶ã€‚&lt;strong&gt;å–å€¼èŒƒå›´æ˜¯ 2 åˆ° 36&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;to_base&lt;/strong&gt;ï¼š ä½ å¸Œæœ›å°† &lt;code&gt;number&lt;/code&gt;è½¬æ¢åˆ°çš„ç›®æ ‡è¿›åˆ¶ã€‚&lt;strong&gt;å–å€¼èŒƒå›´åŒæ ·æ˜¯ 2 åˆ° 36&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨ç¤ºä¾‹"&gt;ğŸ“Š ä½¿ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åå…­è¿›åˆ¶è½¬åè¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;5F&amp;#39;, 16, 10); -- ç»“æœ: &amp;#39;95&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è®¡ç®—è¿‡ç¨‹ï¼šåå…­è¿›åˆ¶çš„ &lt;code&gt;5F&lt;/code&gt;= 5Ã—16Â¹ + 15Ã—16â° = 80 + 15 = 95ï¼ˆåè¿›åˆ¶ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åè¿›åˆ¶è½¬äºŒè¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(95, 10, 2); -- ç»“æœ: &amp;#39;1011111&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äºŒè¿›åˆ¶è½¬å…«è¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;1011111&amp;#39;, 2, 8); -- ç»“æœ: &amp;#39;137&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…«è¿›åˆ¶è½¬åå…­è¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;77&amp;#39;, 8, 16); -- ç»“æœ: &amp;#39;3F&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†å¤§å†™å­—æ¯ï¼ˆä¸‰åå…­è¿›åˆ¶è½¬åè¿›åˆ¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;Z&amp;#39;, 36, 10); -- ç»“æœ: &amp;#39;35&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ä¸‰åå…­è¿›åˆ¶ä¸­ï¼Œ&lt;code&gt;Z&lt;/code&gt;è¡¨ç¤º 35ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†è´Ÿæ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;-10&amp;#39;, 10, 2); -- ç»“æœ: &amp;#39;-1010&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›åˆ¶èŒƒå›´&lt;/strong&gt;ï¼š&lt;code&gt;from_base&lt;/code&gt;å’Œ &lt;code&gt;to_base&lt;/code&gt;éƒ½å¿…é¡»åœ¨ &lt;strong&gt;2 åˆ° 36&lt;/strong&gt; ä¹‹é—´ã€‚å¦‚æœè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œå‡½æ•°ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;10&amp;#39;, 1, 10); -- ç»“æœ: NULL (from_base &amp;lt; 2)
SELECT CONV(&amp;#39;10&amp;#39;, 37, 10); -- ç»“æœ: NULL (from_base &amp;gt; 36)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éæ³•å­—ç¬¦&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;number&lt;/code&gt;ä¸­åŒ…å«å¯¹äºç»™å®šçš„ &lt;code&gt;from_base&lt;/code&gt;æ¥è¯´éæ³•çš„å­—ç¬¦ï¼Œå‡½æ•°ä¼šè¿”å› &lt;code&gt;0&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;2&amp;#39;, 2, 10); -- ç»“æœ: &amp;#39;0&amp;#39; (æ•°å­—2åœ¨äºŒè¿›åˆ¶ä¸­éæ³•)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœä»»ä½•å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œå‡½æ•°ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(NULL, 10, 2); -- ç»“æœ: NULL
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿”å›ç±»å‹&lt;/strong&gt;ï¼šè¿”å›å€¼æ€»æ˜¯ä¸€ä¸ª&lt;strong&gt;å­—ç¬¦ä¸²&lt;/strong&gt;ï¼Œå³ä½¿è½¬æ¢ç»“æœçœ‹èµ·æ¥åƒä¸€ä¸ªæ•°å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MySQL ç‰ˆæœ¬&lt;/strong&gt;ï¼šåœ¨ MySQL 8.0 ä¹‹å‰ï¼Œ&lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°å¯¹éå¸¸å¤§çš„ &lt;code&gt;BIGINT&lt;/code&gt;å€¼çš„æ”¯æŒå¯èƒ½æœ‰é™ï¼Œå¤§æ•°å¯èƒ½ä¼šè¢«æˆªæ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°åœ¨ä»¥ä¸‹åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¤„ç†ä¸è½¬æ¢&lt;/strong&gt;ï¼šå½“éœ€è¦å°†å­˜å‚¨ä¸ºç‰¹å®šè¿›åˆ¶ï¼ˆå¦‚åå…­è¿›åˆ¶ï¼‰çš„æ•°æ®è½¬æ¢ä¸ºå¦ä¸€ç§è¿›åˆ¶ï¼ˆå¦‚åè¿›åˆ¶ï¼‰è¿›è¡Œè®¡ç®—æˆ–æ˜¾ç¤ºæ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶ç›¸å…³ç¼–ç¨‹&lt;/strong&gt;ï¼šå¤„ç†å¯„å­˜å™¨åœ°å€ã€é¢œè‰²ä»£ç ç­‰é€šå¸¸ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºçš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å¯†ä¸å®‰å…¨&lt;/strong&gt;ï¼šæŸäº›åŠ å¯†ç®—æ³•æˆ–å“ˆå¸Œå€¼ä¼šä»¥ç‰¹å®šè¿›åˆ¶å½¢å¼è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œåè®®åˆ†æ&lt;/strong&gt;ï¼šåˆ†æç½‘ç»œæ•°æ®åŒ…æ—¶ï¼Œéƒ¨åˆ†å­—æ®µå¯èƒ½é‡‡ç”¨éåè¿›åˆ¶è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;CONV()&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸€ä¸ªå®ç”¨çš„å‡½æ•°ï¼Œç”¨äºä¸åŒè¿›åˆ¶æ•°ä¹‹é—´çš„è½¬æ¢ã€‚ä½¿ç”¨æ—¶åªéœ€æ³¨æ„è¿›åˆ¶çš„æœ‰æ•ˆèŒƒå›´ã€éæ³•å­—ç¬¦çš„å¤„ç†ä»¥åŠè¿”å›å€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹è¿™äº›ç»†èŠ‚å³å¯ã€‚&lt;/p&gt;
&lt;h2 id="corss-join"&gt;CORSS JOIN
&lt;/h2&gt;&lt;p&gt;CROSS JOINä¸å…è®¸ONæ¡ä»¶ï¼Œä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚&lt;/p&gt;
&lt;h2 id="å­æŸ¥è¯¢"&gt;å­æŸ¥è¯¢
&lt;/h2&gt;&lt;p&gt;å­æŸ¥è¯¢æ˜¯ MySQL ä¸­ä¸€é¡¹å¼ºå¤§ä¸”å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ª SQL æŸ¥è¯¢è¯­å¥ä¸­åµŒå¥—å¦ä¸€ä¸ªæŸ¥è¯¢ï¼Œä»è€Œæ„å»ºå‡ºæ›´å¤æ‚ã€æ›´çµæ´»çš„æ•°æ®æ£€ç´¢é€»è¾‘ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»å­æŸ¥è¯¢çš„å„ç§ç±»å‹ã€åº”ç”¨åœºæ™¯å’Œä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h3 id="-å­æŸ¥è¯¢ç±»å‹æ¦‚è§ˆ"&gt;ğŸ“Š å­æŸ¥è¯¢ç±»å‹æ¦‚è§ˆ
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥å¿«é€Ÿäº†è§£ä¸»è¦çš„å­æŸ¥è¯¢ç±»å‹åŠå…¶æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŸ¥è¯¢ç±»å‹&lt;/th&gt;
&lt;th&gt;å…³é”®è¯/ä½ç½®&lt;/th&gt;
&lt;th&gt;è¿”å›ç»“æœ&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨æ“ä½œç¬¦/åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡é‡å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE, SELECT, HAVING å­å¥&lt;/td&gt;
&lt;td&gt;å•ä¸€å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE å­å¥&lt;/td&gt;
&lt;td&gt;å•åˆ—å¤šè¡Œ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;IN&lt;/code&gt;, &lt;code&gt;NOT IN&lt;/code&gt;, &lt;code&gt;ANY&lt;/code&gt;/&lt;code&gt;SOME&lt;/code&gt;, &lt;code&gt;ALL&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡Œå­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE å­å¥&lt;/td&gt;
&lt;td&gt;å•è¡Œå¤šåˆ—&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;ï¼ˆé…åˆè¡Œæ„é€ å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨å­æŸ¥è¯¢/æ´¾ç”Ÿè¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;FROM å­å¥&lt;/td&gt;
&lt;td&gt;å¤šè¡Œå¤šåˆ—ï¼ˆè™šæ‹Ÿè¡¨ï¼‰&lt;/td&gt;
&lt;td&gt;å¿…é¡»è¦æœ‰åˆ«åï¼Œå¯å‚ä¸ JOIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EXISTS å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE å­å¥&lt;/td&gt;
&lt;td&gt;å¸ƒå°”å€¼ï¼ˆTrue/Falseï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;EXISTS&lt;/code&gt;, &lt;code&gt;NOT EXISTS&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰ç»“æœé›†ç±»å‹åˆ†ç±»"&gt;ğŸ” æŒ‰ç»“æœé›†ç±»å‹åˆ†ç±»
&lt;/h3&gt;&lt;h4 id="1-æ ‡é‡å­æŸ¥è¯¢scalar-subquery"&gt;1. æ ‡é‡å­æŸ¥è¯¢ï¼ˆScalar Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;æ ‡é‡å­æŸ¥è¯¢æ˜¯æœ€å¸¸è§çš„å½¢å¼ï¼Œå®ƒ&lt;strong&gt;åªè¿”å›ä¸€ä¸ªå•ä¸€çš„å€¼&lt;/strong&gt;ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰ï¼Œå¯ä»¥åƒä½¿ç”¨å¸¸é‡ä¸€æ ·ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¸¸ç”¨äºæ¯”è¾ƒæ“ä½œã€è®¡ç®—æˆ–ä½œä¸º SELECT åˆ—è¡¨ä¸­çš„è¾“å‡ºå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT employee_name, salary
FROM employees
WHERE salary &amp;gt; (SELECT AVG(salary) FROM employees);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;(SELECT AVG(salary) FROM employees)&lt;/code&gt;å°±æ˜¯ä¸€ä¸ªæ ‡é‡å­æŸ¥è¯¢ï¼Œå®ƒè¿”å›ä¸€ä¸ªå…·ä½“çš„å¹³å‡å€¼ç”¨äºå¤–éƒ¨æŸ¥è¯¢çš„æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-åˆ—å­æŸ¥è¯¢column-subquery"&gt;2. åˆ—å­æŸ¥è¯¢ï¼ˆColumn Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;åˆ—å­æŸ¥è¯¢ä¼š&lt;strong&gt;è¿”å›ä¸€åˆ—æ•°æ®&lt;/strong&gt;ï¼ˆå•åˆ—å¤šè¡Œï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé€šå¸¸ä¸ &lt;code&gt;IN&lt;/code&gt;, &lt;code&gt;NOT IN&lt;/code&gt;, &lt;code&gt;ANY&lt;/code&gt;/&lt;code&gt;SOME&lt;/code&gt;, &lt;code&gt;ALL&lt;/code&gt;è¿™äº›æ“ä½œç¬¦é…åˆä½¿ç”¨ï¼Œæ¥åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦åœ¨å­æŸ¥è¯¢è¿”å›çš„åˆ—å€¼ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢åœ¨ &amp;ldquo;é”€å”®éƒ¨&amp;rdquo; æˆ– &amp;ldquo;ç ”å‘éƒ¨&amp;rdquo; å·¥ä½œçš„å‘˜å·¥å§“åã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT employee_name
FROM employees
WHERE department_id IN (
SELECT department_id
FROM departments
WHERE department_name IN (&amp;#39;é”€å”®éƒ¨&amp;#39;, &amp;#39;ç ”å‘éƒ¨&amp;#39;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å­æŸ¥è¯¢ &lt;code&gt;(SELECT department_id ...)&lt;/code&gt;ä¼šè¿”å› &amp;lsquo;é”€å”®éƒ¨&amp;rsquo; å’Œ &amp;lsquo;ç ”å‘éƒ¨&amp;rsquo; å¯¹åº”çš„éƒ¨é—¨IDé›†åˆï¼Œç„¶åå¤–éƒ¨æŸ¥è¯¢é€šè¿‡ &lt;code&gt;IN&lt;/code&gt;æ“ä½œç¬¦è¿›è¡ŒåŒ¹é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-è¡Œå­æŸ¥è¯¢row-subquery"&gt;3. è¡Œå­æŸ¥è¯¢ï¼ˆRow Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;è¡Œå­æŸ¥è¯¢&lt;strong&gt;è¿”å›ä¸€è¡Œæ•°æ®&lt;/strong&gt;ï¼ˆå•è¡Œå¤šåˆ—ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦åŒæ—¶æ¯”è¾ƒå¤šä¸ªåˆ—çš„å€¼æ—¶ä½¿ç”¨ï¼Œç›¸å¯¹å°‘è§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥æ‰¾ä¸å‘˜å·¥IDä¸º101çš„å‘˜å·¥éƒ¨é—¨å’ŒèŒä½éƒ½ç›¸åŒçš„å…¶ä»–å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT employee_name, department_id, job_title
FROM employees
WHERE (department_id, job_title) = (
SELECT department_id, job_title
FROM employees
WHERE employee_id = 101
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å­æŸ¥è¯¢è¿”å›äº†IDä¸º101çš„å‘˜å·¥çš„ &lt;code&gt;department_id&lt;/code&gt;å’Œ &lt;code&gt;job_title&lt;/code&gt;ï¼Œå¤–éƒ¨æŸ¥è¯¢é€šè¿‡è¡Œæ„é€ å™¨ &lt;code&gt;(department_id, job_title)&lt;/code&gt;è¿›è¡Œæ•´ä½“æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-è¡¨å­æŸ¥è¯¢æ´¾ç”Ÿè¡¨table-subquery--derived-table"&gt;4. è¡¨å­æŸ¥è¯¢/æ´¾ç”Ÿè¡¨ï¼ˆTable Subquery / Derived Tableï¼‰
&lt;/h4&gt;&lt;p&gt;è¡¨å­æŸ¥è¯¢&lt;strong&gt;è¿”å›ä¸€ä¸ªè™šæ‹Ÿè¡¨&lt;/strong&gt;ï¼ˆå¤šè¡Œå¤šåˆ—ï¼‰ï¼Œå¹¶ä¸”å¿…é¡»å‡ºç°åœ¨ &lt;strong&gt;FROM&lt;/strong&gt; å­å¥ä¸­ï¼Œ&lt;strong&gt;å¿…é¡»ä¸ºå…¶æŒ‡å®šåˆ«å&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦ä¸€ä¸ªä¸´æ—¶æ€§çš„ç»“æœé›†å‚ä¸è¿›ä¸€æ­¥æŸ¥è¯¢ã€è¿æ¥æˆ–èšåˆè®¡ç®—æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼Œå¹¶ç­›é€‰å‡ºå¹³å‡å·¥èµ„é«˜äº60000çš„éƒ¨é—¨åŠå…¶åç§°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT d.department_name, ds.avg_salary
FROM departments d
JOIN (
SELECT department_id, AVG(salary) AS avg_salary
FROM employees
GROUP BY department_id
HAVING AVG(salary) &amp;gt; 60000
) AS ds
ON d.department_id = ds.department_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;(SELECT department_id ...)&lt;/code&gt;ä½œä¸ºä¸€ä¸ªæ´¾ç”Ÿè¡¨ &lt;code&gt;ds&lt;/code&gt;ï¼Œå…ˆè®¡ç®—å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å¹¶è¿›è¡Œç­›é€‰ï¼Œç„¶åä¸ &lt;code&gt;departments&lt;/code&gt;è¡¨è¿›è¡Œè¿æ¥è·å–éƒ¨é—¨åç§°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰ä¸å¤–éƒ¨æŸ¥è¯¢çš„å…³ç³»åˆ†ç±»"&gt;ğŸ”— æŒ‰ä¸å¤–éƒ¨æŸ¥è¯¢çš„å…³ç³»åˆ†ç±»
&lt;/h3&gt;&lt;h4 id="1-ç‹¬ç«‹å­æŸ¥è¯¢éç›¸å…³å­æŸ¥è¯¢"&gt;1. ç‹¬ç«‹å­æŸ¥è¯¢ï¼ˆéç›¸å…³å­æŸ¥è¯¢ï¼‰
&lt;/h4&gt;&lt;p&gt;ç‹¬ç«‹å­æŸ¥è¯¢çš„æ‰§è¡Œ&lt;strong&gt;ä¸ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢&lt;/strong&gt;ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œå¹¶å¾—å‡ºç»“æœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šå­æŸ¥è¯¢ä»…æ‰§è¡Œä¸€æ¬¡ï¼Œç»“æœè¢«ç¼“å­˜å¹¶ä¼ é€’ç»™å¤–éƒ¨æŸ¥è¯¢ã€‚&lt;strong&gt;å¤šæ•°æ ‡é‡å­æŸ¥è¯¢å’Œæ´¾ç”Ÿè¡¨éƒ½å±äºæ­¤ç±»&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šä¸Šé¢æåˆ°çš„â€œæŸ¥è¯¢å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„å‘˜å·¥â€å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹å­æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ç›¸å…³å­æŸ¥è¯¢correlated-subquery"&gt;2. ç›¸å…³å­æŸ¥è¯¢ï¼ˆCorrelated Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;ç›¸å…³å­æŸ¥è¯¢çš„æ‰§è¡Œ&lt;strong&gt;ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œæ•°æ®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šå­æŸ¥è¯¢ä¼š&lt;strong&gt;ä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œä¸€æ¬¡&lt;/strong&gt;ã€‚å­æŸ¥è¯¢ä¸­ä¼šå¼•ç”¨å¤–éƒ¨æŸ¥è¯¢çš„å­—æ®µã€‚å¦‚æœå¤–éƒ¨æŸ¥è¯¢è¿”å›å¤§é‡è¡Œï¼Œ&lt;strong&gt;å¯èƒ½å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼ˆ&amp;ldquo;N+1&amp;quot;æŸ¥è¯¢é—®é¢˜ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥æ‰¾æ¯ä¸ªéƒ¨é—¨ä¸­å·¥èµ„é«˜äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT e1.employee_name, e1.department_id, e1.salary
FROM employees e1
WHERE e1.salary &amp;gt; (
SELECT AVG(salary)
FROM employees e2
WHERE e2.department_id = e1.department_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„å­æŸ¥è¯¢ä¸­çš„ &lt;code&gt;WHERE e2.department_id = e1.department_id&lt;/code&gt;ï¼Œå®ƒå¼•ç”¨äº†å¤–éƒ¨æŸ¥è¯¢ &lt;code&gt;e1&lt;/code&gt;è¡¨çš„ &lt;code&gt;department_id&lt;/code&gt;ã€‚å¯¹äº &lt;code&gt;e1&lt;/code&gt;è¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œå­æŸ¥è¯¢éƒ½ä¼šæ ¹æ®è¯¥è¡Œæ‰€åœ¨çš„éƒ¨é—¨IDè®¡ç®—ä¸€æ¬¡å¹³å‡å·¥èµ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç‰¹å®šå…³é”®å­—å­æŸ¥è¯¢"&gt;âš™ï¸ ç‰¹å®šå…³é”®å­—å­æŸ¥è¯¢
&lt;/h3&gt;&lt;h4 id="1-exists--not-exists-å­æŸ¥è¯¢"&gt;1. EXISTS / NOT EXISTS å­æŸ¥è¯¢
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;EXISTS&lt;/code&gt;ç”¨äºæ£€æŸ¥å­æŸ¥è¯¢&lt;strong&gt;æ˜¯å¦è‡³å°‘è¿”å›ä¸€è¡Œæ•°æ®&lt;/strong&gt;ã€‚å®ƒè¿”å›çš„æ˜¯å¸ƒå°”å€¼ï¼ˆTRUE æˆ– FALSEï¼‰ï¼Œ&lt;strong&gt;ä¸å…³å¿ƒå­æŸ¥è¯¢å…·ä½“è¿”å›ä»€ä¹ˆæ•°æ®å†…å®¹&lt;/strong&gt;ï¼Œå› æ­¤é€šå¸¸å†™æˆ &lt;code&gt;SELECT 1&lt;/code&gt;æˆ– &lt;code&gt;SELECT *&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¸¸ç”¨äºæ£€æŸ¥å­˜åœ¨æ€§ï¼Œä¾‹å¦‚â€œæ˜¯å¦å­˜åœ¨è®¢å•çš„å®¢æˆ·â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢æœ‰è®¢å•çš„å®¢æˆ·ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT customer_id, customer_name
FROM customers c
WHERE EXISTS (
SELECT 1
FROM orders o
WHERE o.customer_id = c.customer_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ &lt;code&gt;IN&lt;/code&gt;ç›¸æ¯”ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;åœ¨å¤„ç†å¤§æ•°æ®é›†ä¸”å­æŸ¥è¯¢æ•ˆç‡é«˜æ—¶ï¼Œ&lt;strong&gt;æ€§èƒ½é€šå¸¸æ›´å¥½&lt;/strong&gt;ï¼Œå› ä¸ºä¸€æ—¦æ‰¾åˆ°ä¸€æ¡åŒ¹é…è®°å½•å°±ä¼šåœæ­¢æ‰«æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-anysome-å’Œ-all-å­æŸ¥è¯¢"&gt;2. ANY/SOME å’Œ ALL å­æŸ¥è¯¢
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ANY&lt;/code&gt;ï¼ˆåŒ &lt;code&gt;SOME&lt;/code&gt;ï¼‰å’Œ &lt;code&gt;ALL&lt;/code&gt;æ“ä½œç¬¦ç”¨äºå°†æŸä¸ªå€¼ä¸å­æŸ¥è¯¢è¿”å›çš„ä¸€åˆ—å€¼è¿›è¡Œæ¯”è¾ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ANY&lt;/code&gt;/&lt;code&gt;SOME&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨ç¤ºå¤–éƒ¨æŸ¥è¯¢çš„æ¡ä»¶åªè¦æ»¡è¶³å­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;ä»»æ„ä¸€ä¸ª&lt;/strong&gt;å³å¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºä»»æ„ä¸€ä¸ªï¼ˆæŸäº›ï¼‰&amp;lsquo;Engineering&amp;rsquo; éƒ¨é—¨å‘˜å·¥çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT name, salary
FROM employees
WHERE salary &amp;gt; ANY (
SELECT salary
FROM employees
WHERE dept_id = (SELECT id FROM departments WHERE dept_name = &amp;#39;Engineering&amp;#39;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ALL&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨ç¤ºå¤–éƒ¨æŸ¥è¯¢çš„æ¡ä»¶å¿…é¡»æ»¡è¶³å­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºæ‰€æœ‰ &amp;lsquo;Engineering&amp;rsquo; éƒ¨é—¨å‘˜å·¥çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT name, salary
FROM employees
WHERE salary &amp;gt; ALL (
SELECT salary
FROM employees
WHERE dept_id = (SELECT id FROM departments WHERE dept_name = &amp;#39;Engineering&amp;#39;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ALL&lt;/code&gt;æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœå­æŸ¥è¯¢ç»“æœé›†åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªæ¡ä»¶åˆ¤æ–­ä¸ºæœªçŸ¥ï¼ˆUNKNOWNï¼‰ï¼Œä»è€Œä¸è¿”å›ä»»ä½•è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;å­æŸ¥è¯¢è™½ç„¶å¼ºå¤§ï¼Œä½†ä½¿ç”¨ä¸å½“å®¹æ˜“å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯&lt;strong&gt;ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;ï¼ˆä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œæ‰§è¡Œä¸€æ¬¡ï¼‰å’Œè¿”å›å¤§é‡ç»“æœçš„ &lt;code&gt;IN&lt;/code&gt;å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ &lt;code&gt;JOIN&lt;/code&gt;æ“ä½œ&lt;/strong&gt;ï¼šå¾ˆå¤šå­æŸ¥è¯¢ï¼ˆå°¤å…¶æ˜¯ &lt;code&gt;IN&lt;/code&gt;å’Œ &lt;code&gt;EXISTS&lt;/code&gt;å­æŸ¥è¯¢ï¼‰å¯ä»¥æ”¹å†™æˆ &lt;code&gt;JOIN&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;INNER JOIN&lt;/code&gt;, &lt;code&gt;LEFT JOIN ... IS NULL&lt;/code&gt;ï¼‰ï¼Œ&lt;code&gt;JOIN&lt;/code&gt;é€šå¸¸èƒ½æ›´å¥½åœ°åˆ©ç”¨ç´¢å¼•ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;IN&lt;/code&gt;è½¬ &lt;code&gt;JOIN&lt;/code&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å­æŸ¥è¯¢æ–¹å¼
SELECT product_name FROM products
WHERE product_id IN (SELECT product_id FROM order_details WHERE quantity &amp;gt; 10);
-- JOINæ–¹å¼ï¼ˆé€šå¸¸æ›´é«˜æ•ˆï¼‰
SELECT DISTINCT p.product_name
FROM products p
JOIN order_details od ON p.product_id = od.product_id
WHERE od.quantity &amp;gt; 10;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;EXISTS&lt;/code&gt;è½¬ &lt;code&gt;JOIN&lt;/code&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- EXISTSæ–¹å¼
SELECT customer_name FROM customers c
WHERE EXISTS (SELECT 1 FROM orders o WHERE o.customer_id = c.customer_id AND o.order_date &amp;gt; &amp;#39;2023-01-01&amp;#39;);
-- JOINæ–¹å¼ï¼ˆå¯èƒ½æ›´é«˜æ•ˆï¼‰
SELECT DISTINCT c.customer_name
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
WHERE o.order_date &amp;gt; &amp;#39;2023-01-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›¸å…³å­æŸ¥è¯¢è½¬æ´¾ç”Ÿè¡¨ &lt;code&gt;JOIN&lt;/code&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åŸå§‹ç›¸å…³å­æŸ¥è¯¢ï¼šæ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨è–ªèµ„æœ€é«˜çš„å‘˜å·¥
SELECT e.employee_name, e.salary, e.department_id
FROM employees e
WHERE e.salary = (SELECT MAX(salary) FROM employees WHERE department_id = e.department_id);
-- ä¼˜åŒ–åï¼šä½¿ç”¨JOINå’Œæ´¾ç”Ÿè¡¨
SELECT e.employee_name, e.salary, e.department_id
FROM employees e
INNER JOIN (
SELECT department_id, MAX(salary) AS max_dept_salary
FROM employees
GROUP BY department_id
) AS max_salaries_per_dept
ON e.department_id = max_salaries_per_dept.department_id
AND e.salary = max_salaries_per_dept.max_dept_salary;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…é€‰æ‹© &lt;code&gt;IN&lt;/code&gt;ä¸ &lt;code&gt;EXISTS&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å­æŸ¥è¯¢ç»“æœé›†&lt;strong&gt;å¾ˆå¤§&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;IN&lt;/code&gt;åˆ—è¡¨å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å½“å­æŸ¥è¯¢ç»“æœé›†&lt;strong&gt;å¾ˆå°&lt;/strong&gt;ï¼Œä½†å¤–éƒ¨æŸ¥è¯¢è¡¨å¾ˆå¤§æ—¶ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;ï¼ˆå°¤å…¶æ˜¯å…³è”å­æŸ¥è¯¢ï¼‰å¯èƒ½æ•ˆç‡æ›´ä½ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œæ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;çš„è¯­ä¹‰é€šå¸¸æ›´æ¸…æ™°ï¼Œä¸”åœ¨å…¶èƒ½åˆ©ç”¨ç´¢å¼•æ—¶æ•ˆç‡å¾ˆé«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿ç´¢å¼•çš„æœ‰æ•ˆæ€§&lt;/strong&gt;ï¼šä¸ºå­æŸ¥è¯¢çš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶åˆ—ã€è¿æ¥æ¡ä»¶åˆ—ä»¥åŠ &lt;code&gt;GROUP BY&lt;/code&gt;ã€&lt;code&gt;ORDER BY&lt;/code&gt;çš„åˆ—åˆ›å»ºåˆé€‚çš„ç´¢å¼•ï¼Œèƒ½æå¤§æå‡å­æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…è¿‡åº¦åµŒå¥—&lt;/strong&gt;ï¼šå¤šå±‚åµŒå¥—çš„å­æŸ¥è¯¢éš¾ä»¥é˜…è¯»ã€ç»´æŠ¤ä¸”æ€§èƒ½å¯èƒ½è¾ƒå·®ã€‚è€ƒè™‘ä½¿ç”¨&lt;strong&gt;ä¸´æ—¶è¡¨&lt;/strong&gt;æˆ– &lt;strong&gt;Common Table Expressions (CTE)&lt;/strong&gt;ï¼ˆMySQL 8.0+ æ”¯æŒ &lt;code&gt;WITH&lt;/code&gt;è¯­å¥ï¼‰æ¥åˆ†æ­¥å¤„ç†å¤æ‚é€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„å½±å“&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;NOT IN&lt;/code&gt;å­æŸ¥è¯¢æ—¶ï¼Œå¦‚æœå­æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œæ•´ä¸ª &lt;code&gt;NOT IN&lt;/code&gt;æ¡ä»¶å¯èƒ½ä¼šä¸ä¼šè¿”å›ä»»ä½•è¡Œã€‚åŠ¡å¿…å°å¿ƒå¤„ç†æˆ–ä½¿ç”¨ &lt;code&gt;NOT EXISTS&lt;/code&gt;æ›¿ä»£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h2 id="å”¯ä¸€ç´¢å¼•"&gt;å”¯ä¸€ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;ã€‚MySQL ä¸­çš„ &lt;strong&gt;Unique ç´¢å¼•ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰å…è®¸ç´¢å¼•åˆ—åŒ…å«å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼&lt;/strong&gt;ã€‚è¿™æ˜¯å› ä¸º SQL æ ‡å‡†å°† &lt;code&gt;NULL&lt;/code&gt;è§†ä¸ºä¸€ä¸ªæœªçŸ¥æˆ–ç¼ºå¤±çš„å€¼ï¼Œä»»ä½•ä¸¤ä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼è¿›è¡Œæ¯”è¾ƒçš„ç»“æœéƒ½ä¸æ˜¯â€œç›¸ç­‰â€çš„ã€‚å› æ­¤ï¼Œå”¯ä¸€ç´¢å¼•çº¦æŸä¸ä¼šå°†å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼è§†ä¸ºé‡å¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ Unique ç´¢å¼•å¯¹ NULL å€¼çš„å¤„ç†ï¼Œä»¥åŠä¸ä¸»é”®çš„åŒºåˆ«ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Unique ç´¢å¼•&lt;/th&gt;
&lt;th&gt;ä¸»é”® (Primary Key)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å…è®¸ NULL å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt; (å¤šæ•°DBMSå…è®¸å¤šä¸ªNULL)&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL å€¼æ˜¯å¦å¿…é¡»å”¯ä¸€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;å¦&lt;/strong&gt; (ä¸è§†ä¸ºé‡å¤)&lt;/td&gt;
&lt;td&gt;- (ä¸å…è®¸å­˜åœ¨)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°é‡é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨å¯åˆ›å»º&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨&lt;strong&gt;åªèƒ½æœ‰&lt;/strong&gt;ä¸€ä¸ª&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®ä¿&lt;strong&gt;ä¸šåŠ¡æ•°æ®&lt;/strong&gt;çš„å”¯ä¸€æ€§ (å¦‚é‚®ç®±ã€æ‰‹æœºå·)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å”¯ä¸€æ ‡è¯†&lt;/strong&gt;æ¯ä¸€è¡Œè®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å…³äºæ­¤è§„åˆ™çš„ä¸€äº›è¯¦ç»†è¯´æ˜å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸ç¤ºä¾‹"&gt;ğŸ” å·¥ä½œæœºåˆ¶ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå”¯ä¸€ç´¢å¼•çº¦æŸæ£€æŸ¥çš„æ˜¯é &lt;code&gt;NULL&lt;/code&gt;å€¼çš„å”¯ä¸€æ€§ã€‚å¯¹äº &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œåˆ™å…è®¸å­˜åœ¨å¤šä¸ªã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹è¡¨ç»“æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE users (
id INT AUTO_INCREMENT PRIMARY KEY,
email VARCHAR(255) UNIQUE, -- å”¯ä¸€ç´¢å¼•
username VARCHAR(50) UNIQUE -- å”¯ä¸€ç´¢å¼•
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¯ä»¥æˆåŠŸæ‰§è¡Œçš„æ’å…¥æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (email, username) VALUES (NULL, &amp;#39;user1&amp;#39;); -- æˆåŠŸ
INSERT INTO users (email, username) VALUES (NULL, &amp;#39;user2&amp;#39;); -- æˆåŠŸ
INSERT INTO users (email, username) VALUES (&amp;#39;admin@example.com&amp;#39;, NULL); -- æˆåŠŸ
INSERT INTO users (email, username) VALUES (&amp;#39;user@example.com&amp;#39;, NULL); -- æˆåŠŸ
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™äº›æ’å…¥æ“ä½œéƒ½èƒ½æˆåŠŸï¼Œå› ä¸º &lt;code&gt;NULL&lt;/code&gt;ä¸ &lt;code&gt;NULL&lt;/code&gt;ä¸è¢«è§†ä¸ºç›¸ç­‰ï¼Œå› æ­¤ä¸è¿åå”¯ä¸€æ€§çº¦æŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼šå¤±è´¥çš„æ’å…¥æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (email, username) VALUES (&amp;#39;admin@example.com&amp;#39;, &amp;#39;alice&amp;#39;); -- å¤±è´¥ï¼Œè¿åå”¯ä¸€ç´¢å¼•ï¼šDuplicate entry &amp;#39;admin@example.com&amp;#39; for key &amp;#39;email&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤æ“ä½œå¤±è´¥æ˜¯å› ä¸ºé &lt;code&gt;NULL&lt;/code&gt;å€¼ &lt;code&gt;'admin@example.com'&lt;/code&gt;å·²ç»å­˜åœ¨ï¼Œè¿åäº† &lt;code&gt;email&lt;/code&gt;åˆ—çš„å”¯ä¸€æ€§çº¦æŸã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®åº“å®ç°å·®å¼‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;è™½ç„¶ MySQL å’Œ PostgreSQL ç­‰æ•°æ®åº“å…è®¸å”¯ä¸€ç´¢å¼•ä¸­æœ‰å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä½† &lt;strong&gt;SQL Server ç­‰æ•°æ®åº“ä¸­çš„å”¯ä¸€ç´¢å¼•åªå…è®¸ä¸€ä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼&lt;/strong&gt;ã€‚åœ¨è¿›è¡Œæ•°æ®åº“è¿ç§»æˆ–è®¾è®¡è·¨å¹³å°åº”ç”¨æ—¶ï¼ŒåŠ¡å¿…æ³¨æ„è¿™ä¸€å·®å¼‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸šåŠ¡é€»è¾‘è€ƒè™‘&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä»æŠ€æœ¯è§’åº¦çœ‹ï¼ŒMySQL å…è®¸å”¯ä¸€ç´¢å¼•åˆ—å­˜åœ¨å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;ï¼Œä½†&lt;strong&gt;ä»ä¸šåŠ¡é€»è¾‘è§’åº¦ï¼Œä½ éœ€è¦è€ƒè™‘è¿™æ˜¯å¦åˆç†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;email&lt;/code&gt;å­—æ®µè®¾ä¸ºå”¯ä¸€ç´¢å¼•ä½†å…è®¸ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œå¯èƒ½æœ¬æ„æ˜¯å¸Œæœ›æ¯ä¸ªç”¨æˆ·åªèƒ½ç»‘å®šä¸€ä¸ªé‚®ç®±ï¼Œä½†â€œæœªç»‘å®šâ€çŠ¶æ€éƒ½ç”¨ &lt;code&gt;NULL&lt;/code&gt;è¡¨ç¤ºï¼Œå¯¼è‡´å¤šä¸ªç”¨æˆ·éƒ½å¤„äºâ€œæœªç»‘å®šâ€çŠ¶æ€ã€‚è¿™ç¬¦åˆæŠ€æœ¯è§„åˆ™ï¼Œä½†å¯èƒ½ä¼šå½±å“ä¸šåŠ¡æ•°æ®çš„å‡†ç¡®æ€§å’Œåç»­ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæœ‰æ—¶å°†åˆ—å®šä¹‰ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;å¹¶æä¾›ä¸€ä¸ªç‰¹æ®Šçš„é»˜è®¤å€¼ï¼ˆå¦‚ç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;ï¼‰æ¥è¡¨ç¤ºâ€œæœªç»‘å®šâ€æˆ–â€œæœªçŸ¥â€ï¼Œå¯èƒ½æ˜¯æ›´æ¸…æ™°çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ä¸ç´¢å¼•æ€§èƒ½&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;è™½ç„¶ &lt;code&gt;NULL&lt;/code&gt;å€¼å¯ä»¥å­˜åœ¨äºç´¢å¼•ä¸­ï¼Œä½†æŸ¥è¯¢åŒ…å«å¤§é‡ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„åˆ—æ—¶ï¼ŒMySQL ä¼˜åŒ–å™¨å¯èƒ½ä¼šå› ä¸ºæ•°æ®åˆ†å¸ƒé—®é¢˜è€Œé€‰æ‹©ä¸ä½¿ç”¨ç´¢å¼•è¿›è¡Œå…¨è¡¨æ‰«æï¼Œå°¤å…¶æ˜¯æ‰§è¡Œ &lt;code&gt;IS NULL&lt;/code&gt;æˆ– &lt;code&gt;IS NOT NULL&lt;/code&gt;æ¡ä»¶æŸ¥è¯¢æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è®¾è®¡å»ºè®®"&gt;ğŸ’¡ è®¾è®¡å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¡æ…ä½¿ç”¨ NULL&lt;/strong&gt;ï¼šåœ¨è®¾è®¡è¡¨ç»“æ„æ—¶ï¼Œä»”ç»†è¯„ä¼°æ¯ä¸ªå­—æ®µæ˜¯å¦çœŸçš„éœ€è¦å…è®¸ä¸º &lt;code&gt;NULL&lt;/code&gt;ã€‚å¦‚æœä¸šåŠ¡è¦æ±‚æŸå­—æ®µå¿…é¡»æœ‰å€¼ï¼Œå°±å°†å…¶è®¾ç½®ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨é»˜è®¤å€¼&lt;/strong&gt;ï¼šå¯¹äºä¸€äº›ç”¨äºæ ‡è¯†çŠ¶æ€çš„å­—æ®µï¼Œè€ƒè™‘ä½¿ç”¨ &lt;code&gt;NOT NULL&lt;/code&gt;çº¦æŸå¹¶ç»“åˆæœ‰æ„ä¹‰çš„é»˜è®¤å€¼ï¼ˆå¦‚ &lt;code&gt;DEFAULT ''&lt;/code&gt;æˆ– &lt;code&gt;DEFAULT 0&lt;/code&gt;ï¼‰ï¼Œè¿™é€šå¸¸æ¯”å…è®¸ &lt;code&gt;NULL&lt;/code&gt;æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®å”¯ä¸€æ€§èŒƒå›´&lt;/strong&gt;ï¼šå®šä¹‰å”¯ä¸€ç´¢å¼•å‰ï¼Œæƒ³æ¸…æ¥šæ˜¯å¸Œæœ›æ‰€æœ‰è®°å½•ï¼ˆåŒ…æ‹¬&lt;code&gt;NULL&lt;/code&gt;ï¼‰åœ¨ä¸šåŠ¡ä¸Šéƒ½å”¯ä¸€ï¼Œè¿˜æ˜¯ä»…ä»…é™åˆ¶é&lt;code&gt;NULL&lt;/code&gt;å€¼çš„å”¯ä¸€æ€§ã€‚MySQLçš„é»˜è®¤è¡Œä¸ºæ˜¯åè€…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„ã€‚&lt;/p&gt;
&lt;h2 id="å…¨æ–‡ç´¢å¼•"&gt;å…¨æ–‡ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;MySQL è§„å®šä¸€ä¸ªè¡¨åªèƒ½åˆ›å»ºä¸€ä¸ªå…¨æ–‡ç´¢å¼•ï¼Œè¿™ä¸»è¦æ˜¯åŸºäº&lt;strong&gt;æŠ€æœ¯å®ç°ã€æ€§èƒ½è€ƒé‡å’Œç®¡ç†æ•ˆç‡&lt;/strong&gt;çš„ç»¼åˆæƒè¡¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£æ ¸å¿ƒåŸå› ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è€ƒé‡ç»´åº¦&lt;/th&gt;
&lt;th&gt;å…·ä½“åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¤– æŠ€æœ¯å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨æ–‡ç´¢å¼•ä½¿ç”¨&lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;ç»“æ„ï¼Œå¹¶é€šè¿‡&lt;strong&gt;å”¯ä¸€çš„ &lt;code&gt;FTS_DOC_ID&lt;/code&gt;&lt;/strong&gt; åˆ—æ¥å…³è”æ‰€æœ‰è¢«ç´¢å¼•çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸš€ æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ç´¢å¼•&lt;strong&gt;å‡å°‘å­˜å‚¨å¼€é”€&lt;/strong&gt;å’Œ&lt;strong&gt;æå‡ç»´æŠ¤æ•ˆç‡&lt;/strong&gt;ï¼ˆå¦‚åˆ†è¯ã€ç¼“å­˜åˆ·æ–°ã€äº‹åŠ¡å¤„ç†ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ› ï¸ ç®¡ç†æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç®€åŒ–è®¾è®¡&lt;/strong&gt;ï¼Œé¿å…å¤šä¸ªç´¢å¼•å¯èƒ½å¸¦æ¥çš„å†²çªå’Œå¤æ‚æ€§ï¼Œ&lt;strong&gt;å•ç´¢å¼•å·²èƒ½æ»¡è¶³å¤šå­—æ®µæœç´¢éœ€æ±‚&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™äº›åŸå› ã€‚&lt;/p&gt;
&lt;h3 id="-1-æŠ€æœ¯å®ç°å€’æ’ç´¢å¼•ä¸ç»Ÿä¸€æ–‡æ¡£æ ‡è¯†"&gt;ğŸ¤– 1. æŠ€æœ¯å®ç°ï¼šå€’æ’ç´¢å¼•ä¸ç»Ÿä¸€æ–‡æ¡£æ ‡è¯†
&lt;/h3&gt;&lt;p&gt;å…¨æ–‡ç´¢å¼•çš„èƒŒåæ˜¯&lt;strong&gt;å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰&lt;/strong&gt;ã€‚å®ƒä¸åƒæ™®é€šç´¢å¼•é‚£æ ·ç›´æ¥æŒ‡å‘æ•°æ®è¡Œï¼Œè€Œæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹†åˆ†æ–‡æœ¬&lt;/strong&gt;ï¼šå°†æ‰€æœ‰éœ€è¦ç´¢å¼•çš„æ–‡æœ¬å†…å®¹&lt;strong&gt;åˆ†è¯&lt;/strong&gt;ï¼Œå¾—åˆ°ä¸€ä¸ªä¸ªç‹¬ç«‹çš„è¯æ±‡å•å…ƒï¼ˆTokenï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»ºç«‹æ˜ å°„&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªè¯æ±‡å•å…ƒå»ºç«‹ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•åŒ…å«å®ƒçš„æ‰€æœ‰æ–‡æ¡£ï¼ˆæ•°æ®è¡Œï¼‰çš„IDä»¥åŠä½ç½®ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†é«˜æ•ˆç®¡ç†æ‰€æœ‰è¿™äº›è¯æ±‡åˆ°æ–‡æ¡£çš„æ˜ å°„ï¼ŒInnoDB å¼•æ“ï¼ˆMySQL 5.6åå…¨æ–‡ç´¢å¼•çš„ä¸»æµå¼•æ“ï¼‰ä¼šä¸ºæ¯ä¸ªæœ‰å…¨æ–‡ç´¢å¼•çš„è¡¨ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;ç»Ÿä¸€çš„å”¯ä¸€æ–‡æ¡£æ ‡è¯†ç¬¦ &lt;code&gt;FTS_DOC_ID&lt;/code&gt;&lt;/strong&gt;ã€‚è¿™ä¸ªåˆ—è¦ä¹ˆç”±ä½ åœ¨è¡¨è®¾è®¡æ—¶æ˜¾å¼åˆ›å»ºï¼Œè¦ä¹ˆç”± InnoDB è‡ªåŠ¨ä¸ºä½ åˆ›å»ºä¸€ä¸ªéšè—çš„ &lt;code&gt;FTS_DOC_ID&lt;/code&gt;åˆ—ã€‚æ‰€æœ‰çš„åˆ†è¯å’Œä½ç½®ä¿¡æ¯éƒ½é€šè¿‡è¿™ä¸ªå”¯ä¸€çš„ &lt;code&gt;DOC_ID&lt;/code&gt;å…³è”å›åŸå§‹æ•°æ®è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå…è®¸åˆ›å»ºå¤šä¸ªå…¨æ–‡ç´¢å¼•ï¼Œå°±éœ€è¦ç»´æŠ¤å¤šå¥—è¿™æ ·çš„å€’æ’ç´¢å¼•ç»“æ„å’Œå¤šä¸ª &lt;code&gt;FTS_DOC_ID&lt;/code&gt;åˆ—ï¼Œè¿™ä¼šåœ¨æŠ€æœ¯å®ç°ä¸Šå˜å¾—éå¸¸å¤æ‚å’Œå†—ä½™ã€‚&lt;/p&gt;
&lt;h3 id="-2-æ€§èƒ½ä¸å­˜å‚¨å•ç´¢å¼•æ›´é«˜æ•ˆ"&gt;ğŸš€ 2. æ€§èƒ½ä¸å­˜å‚¨ï¼šå•ç´¢å¼•æ›´é«˜æ•ˆ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘å­˜å‚¨å¼€é”€&lt;/strong&gt;ï¼šå€’æ’ç´¢å¼•æœ¬èº«å¯èƒ½æ¯”åŸå§‹æ•°æ®è¿˜è¦å¤§ã€‚&lt;strong&gt;å•ä¸ªç»„åˆå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼ˆç´¢å¼•å¤šä¸ªåˆ—ï¼‰ç›¸æ¯”&lt;strong&gt;å¤šä¸ªç‹¬ç«‹å…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼Œå…¶æ€»ä½“å­˜å‚¨å ç”¨é€šå¸¸ä¼šæ›´å°‘ã€‚å› ä¸ºä¸€äº›å…¬å…±çš„è¯æ±‡å’Œå…ƒæ•°æ®å¯ä»¥å…±äº«ï¼Œé¿å…äº†é‡å¤å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå‡ç»´æŠ¤æ•ˆç‡&lt;/strong&gt;ï¼šå½“æ•°æ®æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ—¶ï¼Œæ•°æ®åº“éœ€è¦æ›´æ–°ç´¢å¼•ã€‚ç»´æŠ¤ä¸€ä¸ªå¤§çš„å…¨æ–‡ç´¢å¼•æ¯”ç»´æŠ¤å¤šä¸ªå°çš„å…¨æ–‡ç´¢å¼•æ›´é«˜æ•ˆã€‚è¿™å‡å°‘äº†åœ¨æ‰¹é‡æ•°æ®æ“ä½œæˆ–é«˜å¹¶å‘å†™å…¥æ—¶å¯èƒ½å‘ç”Ÿçš„&lt;strong&gt;ç£ç›˜I/Oäº‰ç”¨å’Œç¼“å­˜åˆ·æ–°æ¬¡æ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œå…¨æ–‡æœç´¢æ—¶ï¼ŒMySQL ä¼˜åŒ–å™¨åªéœ€è¦å¤„ç†ä¸€ä¸ªç´¢å¼•ç»“æ„ã€‚å¦‚æœè¦å¤„ç†å¤šä¸ªç´¢å¼•ï¼Œä¼˜åŒ–å™¨å¯èƒ½è¿˜éœ€è¦è€ƒè™‘å¦‚ä½•åˆå¹¶ä¸åŒç´¢å¼•çš„æœç´¢ç»“æœï¼ˆè¿™å¹¶éå…¨æ–‡æœç´¢çš„å¼ºé¡¹ï¼‰ï¼Œåè€Œä¼šå¢åŠ æŸ¥è¯¢çš„å¤æ‚æ€§å’Œå»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-3-è®¾è®¡ä¸ç®¡ç†çš„ç®€åŒ–"&gt;ğŸ› ï¸ 3. è®¾è®¡ä¸ç®¡ç†çš„ç®€åŒ–
&lt;/h3&gt;&lt;p&gt;MySQL çš„è®¾è®¡ç†å¿µåœ¨æ­¤å€¾å‘äºç®€åŒ–å’Œå®ç”¨ä¸»ä¹‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªç´¢å¼•ï¼Œå¤šå­—æ®µæ”¯æŒ&lt;/strong&gt;ï¼šä½ å®Œå…¨å¯ä»¥åœ¨&lt;strong&gt;ä¸€ä¸ªå…¨æ–‡ç´¢å¼•ä¸­åŒ…å«å¤šä¸ªåˆ—&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;FULLTEXT(title, content, author_bio)&lt;/code&gt;ï¼‰ã€‚è¿™å®é™…ä¸Šå®ç°äº†ä¸€ä¸ªâ€œå¤šåŠŸèƒ½â€çš„ç´¢å¼•ï¼Œå¯ä»¥åŒæ—¶é’ˆå¯¹è¿™äº›åˆ—çš„ä»»ä½•ç»„åˆè¿›è¡Œæœç´¢ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™å·²ç»è¶³å¤Ÿæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œæ— éœ€ä¸ºæ¯ä¸ªåˆ—å•ç‹¬å»ºç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å†²çªä¸æ··æ·†&lt;/strong&gt;ï¼šé™åˆ¶ä¸€ä¸ªç´¢å¼•é¿å…äº†å¤šä¸ªç´¢å¼•å¯èƒ½å¸¦æ¥çš„æ½œåœ¨å†²çªå’Œç®¡ç†å¤æ‚æ€§ï¼Œä¾‹å¦‚éœ€è¦å†³å®šåœ¨æŸ¥è¯¢æ—¶ä¼˜å…ˆä½¿ç”¨å“ªä¸ªç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é«˜æ•ˆä½¿ç”¨å•ä¸ªå…¨æ–‡ç´¢å¼•"&gt;ğŸ’¡ å¦‚ä½•é«˜æ•ˆä½¿ç”¨å•ä¸ªå…¨æ–‡ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶åªèƒ½åˆ›å»ºä¸€ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥æŠŠå®ƒç”¨å¥½ã€‚æœ€ä½³å®è·µæ˜¯&lt;strong&gt;åˆ›å»ºä¸€ä¸ªè¦†ç›–æ‰€æœ‰éœ€è¦è¿›è¡Œæ–‡æœ¬æœç´¢åˆ—çš„è”åˆå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE articles (
id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
title VARCHAR(200),
content TEXT,
author VARCHAR(100),
-- åˆ›å»ºä¸€ä¸ªè¦†ç›– title, content, author ä¸‰åˆ—çš„å…¨æ–‡ç´¢å¼•
FULLTEXT idx_fulltext (title, content, author)
) ENGINE=InnoDB;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ›å»ºåï¼Œä½ å¯ä»¥çµæ´»åœ°æœç´¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰å­—æ®µ&lt;/strong&gt;ï¼š&lt;code&gt;MATCH (title, content, author) AGAINST ('keyword')&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹å®šå­—æ®µ&lt;/strong&gt;ï¼ˆè™½ç„¶è¯­æ³•ä¸Šä¸æ”¯æŒç›´æ¥æŒ‡å®šï¼Œä½†å¯é€šè¿‡æŸ¥è¯¢æ¡ä»¶æ¨¡æ‹Ÿä¾§é‡æŸä¸ªå­—æ®µçš„æœç´¢ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;âš–ï¸ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒMySQL é™åˆ¶ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªå…¨æ–‡ç´¢å¼•ï¼Œå°±åƒæ˜¯ç»™äº†ä½ ä¸€ä¸ª&lt;strong&gt;åŠŸèƒ½å¼ºå¤§çš„å¤šåŠŸèƒ½å·¥å…·ç®±&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ä¸€å †åˆ†æ•£çš„å•åŠŸèƒ½å·¥å…·ã€‚è¿™æ ·è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿éšœæ€§èƒ½&lt;/strong&gt;ï¼šé™ä½äº†å­˜å‚¨æˆæœ¬å’Œç´¢å¼•ç»´æŠ¤çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–ç®¡ç†&lt;/strong&gt;ï¼šé¿å…äº†å¤šç´¢å¼•å¸¦æ¥çš„å¤æ‚æ€§å’Œæ½œåœ¨é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ»¡è¶³éœ€æ±‚&lt;/strong&gt;ï¼šé€šè¿‡&lt;strong&gt;åˆ›å»ºç»„åˆç´¢å¼•&lt;/strong&gt;ï¼ˆç´¢å¼•å¤šä¸ªåˆ—ï¼‰ï¼Œè¿™ä¸€ä¸ªç´¢å¼•å°±èƒ½æ»¡è¶³ç»å¤§å¤šæ•°åœºæ™¯ä¸‹çš„å¤šå­—æ®µå…¨æ–‡æœç´¢éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªé™åˆ¶æ˜¯æ•°æ®åº“å¼•æ“åœ¨æƒè¡¡äº†åŠŸèƒ½ã€æ€§èƒ½å’Œå¤æ‚æ€§ä¹‹ååšå‡ºçš„åˆç†è®¾è®¡ã€‚&lt;/p&gt;
&lt;h2 id="éèšé›†ç´¢å¼•"&gt;éèšé›†ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;ä½ æå‡ºçš„è¿™ä¸ªé—®é¢˜éå¸¸ä¸“ä¸šï¼Œè§¦åŠäº†éèšé›†ç´¢å¼•çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶ã€‚è¿™å¥è¯æ˜¯&lt;strong&gt;é”™è¯¯çš„&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæ··æ·†äº†&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;å’Œ&lt;strong&gt;éèšé›†ç´¢å¼•&lt;/strong&gt;æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h3 id="-å¿«é€Ÿå¯¹æ¯”èšé›†-vs-éèšé›†ç´¢å¼•"&gt;ğŸ“š å¿«é€Ÿå¯¹æ¯”ï¼šèšé›† vs. éèšé›†ç´¢å¼•
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;èšé›†ç´¢å¼• (Clustered Index)&lt;/th&gt;
&lt;th&gt;éèšé›†ç´¢å¼• (Non-Clustered Index)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥&lt;/strong&gt;å†³å®šæ•°æ®è¡Œçš„&lt;strong&gt;ç‰©ç†é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹&lt;/strong&gt;äºæ•°æ®è¡Œçš„ç‰©ç†é¡ºåºï¼Œåˆ›å»º&lt;strong&gt;é¢å¤–çš„ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°é‡é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨&lt;strong&gt;åªèƒ½æœ‰&lt;/strong&gt;ä¸€ä¸ª&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨&lt;strong&gt;å¯ä»¥æœ‰å¤š&lt;/strong&gt;ä¸ª&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¶å­èŠ‚ç‚¹å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥å­˜å‚¨&lt;/strong&gt;å®Œæ•´çš„&lt;strong&gt;æ•°æ®è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç´¢å¼•é”®å€¼ + &lt;strong&gt;æŒ‡å‘æ•°æ®è¡Œçš„æŒ‡é’ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»æ¯”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ±‰è¯­å­—å…¸æŒ‰&lt;strong&gt;æ‹¼éŸ³é¡ºåº&lt;/strong&gt;æ’åˆ—çš„æ­£æ–‡æœ¬èº«&lt;/td&gt;
&lt;td&gt;å­—å…¸æŒ‰&lt;strong&gt;éƒ¨é¦–æˆ–ç¬”ç”»&lt;/strong&gt;æŸ¥å­—çš„&lt;strong&gt;ç›®å½•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£éèšé›†ç´¢å¼•"&gt;ğŸ” è¯¦è§£éèšé›†ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;éèšé›†ç´¢å¼•æ˜¯ä¸€ç§&lt;strong&gt;ç‹¬ç«‹äºè¡¨æ•°æ®å­˜å‚¨ç»“æ„&lt;/strong&gt;çš„ç´¢å¼•ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æœ¬ä¹¦&lt;strong&gt;æœ€åçš„ç‹¬ç«‹ç´¢å¼•ç›®å½•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“åˆ›å»ºä¸€ä¸ªéèšé›†ç´¢å¼•æ—¶ï¼ˆä¾‹å¦‚åœ¨ &lt;code&gt;last_name&lt;/code&gt;åˆ—ä¸Šï¼‰ï¼Œæ•°æ®åº“ä¼š&lt;strong&gt;ç”Ÿæˆä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼ˆé€šå¸¸æ˜¯B+æ ‘ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¯¹ç´¢å¼•åˆ—ï¼ˆ&lt;code&gt;last_name&lt;/code&gt;ï¼‰çš„å€¼è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†æ’åºåçš„é”®å€¼ä¸æ¯ä¸ªæ•°æ®è¡Œä½ç½®çš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ä¸€èµ·å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šè¿™ä¸ªæ“ä½œ&lt;strong&gt;åªå¯¹ç´¢å¼•åˆ—çš„å€¼è¿›è¡Œæ’åº&lt;/strong&gt;ï¼Œå¹¶&lt;strong&gt;ä¸ä¼šç§»åŠ¨æˆ–é‡æ–°ç»„ç»‡&lt;/strong&gt;åŸå§‹è¡¨æ•°æ®é¡µä¸­çš„å®é™…æ•°æ®è¡Œã€‚åŸå§‹æ•°æ®çš„ç‰©ç†é¡ºåºä¿æŒä¸å˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢æ—¶å¦‚ä½•å·¥ä½œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ æ‰§è¡Œ &lt;code&gt;SELECT * FROM employees WHERE last_name = 'Smith'&lt;/code&gt;æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“å¼•æ“&lt;strong&gt;é¦–å…ˆæŸ¥æ‰¾&lt;/strong&gt; &lt;code&gt;last_name&lt;/code&gt;ä¸Šçš„éèšé›†ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ‰¾åˆ° &lt;code&gt;'Smith'&lt;/code&gt;å’Œå¯¹åº”çš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åæ ¹æ®è¿™ä¸ª&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;å»åŸå§‹æ•°æ®é¡µçš„&lt;strong&gt;ç‰©ç†ä½ç½®&lt;/strong&gt;è¯»å–å®Œæ•´çš„æ•°æ®è¡Œã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º&lt;strong&gt;å›è¡¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¿™å¥è¯ä¸ºä»€ä¹ˆé”™è¯¯"&gt;âŒ è¿™å¥è¯ä¸ºä»€ä¹ˆé”™è¯¯ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;â€œä½¿ç”¨éèšé›†ç´¢å¼•éœ€è¦å°†ç‰©ç†æ•°æ®é¡µä¸­çš„æ•°æ®æŒ‰åˆ—é‡æ–°æ’åºâ€ çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºå®ƒé”™è¯¯åœ°æè¿°äº†éèšé›†ç´¢å¼•çš„åˆ›å»ºè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çœŸç›¸&lt;/strong&gt;ï¼šåˆ›å»ºéèšé›†ç´¢å¼•æ—¶ï¼Œ&lt;strong&gt;åªä¼šå¯¹ç´¢å¼•é”®åˆ—è¿›è¡Œæ’åº&lt;/strong&gt;ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª&lt;strong&gt;ç‹¬ç«‹çš„ã€æœ‰åºçš„ç´¢å¼•ç»“æ„&lt;/strong&gt;ã€‚è¿™ä¸ªæ“ä½œ&lt;strong&gt;å®Œå…¨ä¸ä¼šå½±å“&lt;/strong&gt;åŸå§‹æ•°æ®é¡µä¸­æ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåºã€‚åŸå§‹æ•°æ®å¯ä»¥æ˜¯ä»¥ä»»ä½•é¡ºåºï¼ˆæ¯”å¦‚æŒ‰ç…§ä¸»é”®æˆ–æ’å…¥é¡ºåºï¼‰å­˜æ”¾çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹æ¯”&lt;/strong&gt;ï¼šçœŸæ­£éœ€è¦&lt;strong&gt;å°†ç‰©ç†æ•°æ®é¡µä¸­çš„æ•°æ®æŒ‰åˆ—é‡æ–°æ’åº&lt;/strong&gt;çš„æ˜¯&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;ã€‚å› ä¸ºèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å°±æ˜¯æ•°æ®è¡Œæœ¬èº«ï¼Œæ‰€ä»¥åˆ›å»ºèšé›†ç´¢å¼•ä¼šçœŸæ­£åœ°&lt;strong&gt;é‡æ–°ç»„ç»‡ç£ç›˜ä¸Šæ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåº&lt;/strong&gt;ï¼Œä½¿å…¶ä¸ç´¢å¼•é”®çš„é¡ºåºä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸€ä¸ªé‡è¦ä¾‹å¤–è¦†ç›–ç´¢å¼•"&gt;ğŸ’¡ ä¸€ä¸ªé‡è¦ä¾‹å¤–ï¼šè¦†ç›–ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;è™½ç„¶éèšé›†ç´¢å¼•é€šå¸¸éœ€è¦â€œå›è¡¨â€æ“ä½œï¼Œä½†æœ‰ä¸€ä¸ªä¼˜åŒ–æŠ€å·§å¯ä»¥é¿å…å®ƒï¼š&lt;strong&gt;è¦†ç›–ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„æŸ¥è¯¢&lt;strong&gt;åªéœ€è¦&lt;/strong&gt;ä»éèšé›†ç´¢å¼•ä¸­è·å–çš„åˆ—ï¼ˆä¾‹å¦‚ &lt;code&gt;SELECT last_name FROM employees WHERE last_name = 'Smith'&lt;/code&gt;ï¼‰ï¼Œé‚£ä¹ˆç´¢å¼•æœ¬èº«å°±å·²ç»åŒ…å«äº†æ‰€æœ‰éœ€è¦çš„æ•°æ®ã€‚æ•°æ®åº“å¼•æ“&lt;strong&gt;æ— éœ€å›è¡¨&lt;/strong&gt;æŸ¥æ‰¾ï¼Œå¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è¿”å›ç»“æœï¼Œè¿™ä¼šæå¤§åœ°æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è®°ä½è¿™ä¸ªæ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;ï¼šæ˜¯&lt;strong&gt;æ•°æ®æœ¬èº«&lt;/strong&gt;çš„ç‰©ç†æ’åºã€‚ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éèšé›†ç´¢å¼•&lt;/strong&gt;ï¼šæ˜¯&lt;strong&gt;ç‹¬ç«‹ç›®å½•&lt;/strong&gt;çš„é€»è¾‘æ’åºï¼Œå…¶å¶å­èŠ‚ç‚¹åŒ…å«çš„æ˜¯æŒ‡å‘æ•°æ®è¡Œçš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ï¼Œ&lt;strong&gt;ä¸ä¼š&lt;/strong&gt;æ”¹å˜æ•°æ®çš„ç‰©ç†é¡ºåºã€‚ä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®ä½ å½»åº•ç†è§£è¿™ä¸ªæ¦‚å¿µï¼&lt;/p&gt;
&lt;h2 id="order-by-null"&gt;order by null
&lt;/h2&gt;&lt;p&gt;ç†è§£ MySQL ä¸­ &lt;code&gt;GROUP BY&lt;/code&gt;çš„é»˜è®¤æ’åºè¡Œä¸ºå’Œ &lt;code&gt;ORDER BY NULL&lt;/code&gt;çš„ç”¨é€”ï¼Œå¯¹äºç¼–å†™é«˜æ•ˆä¸”ç¬¦åˆé¢„æœŸçš„ SQL æŸ¥è¯¢å¾ˆé‡è¦ã€‚è¿™å…¶ä¸­ MySQL ç‰ˆæœ¬æ˜¯ä¸€ä¸ªå…³é”®å› ç´ ã€‚æˆ‘ä¼šé€šè¿‡ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼å’Œè¯¦ç»†è§£é‡Šæ¥è¯´æ˜å®ƒä»¬åœ¨ä¸åŒç‰ˆæœ¬ä¸­çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;MySQL 5.7 åŠæ›´æ—©ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;MySQL 8.0 åŠæ›´æ–°ç‰ˆæœ¬&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GROUP BY é»˜è®¤è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹åˆ†ç»„å­—æ®µè¿›è¡Œ&lt;strong&gt;éšå¼æ’åº&lt;/strong&gt;ï¼ˆé€šå¸¸å‡åºï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å†è¿›è¡Œä»»ä½•éšå¼æ’åº&lt;/strong&gt;ï¼Œç»“æœé›†é¡ºåºä¸ç¡®å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ORDER BY NULL çš„ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ‘åˆ¶&lt;/strong&gt; GROUP BY çš„éšå¼æ’åºï¼Œ&lt;strong&gt;æå‡æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;ï¼ˆé¿å… filesortï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬æ— æ•ˆæœ&lt;/strong&gt;ï¼ˆå› ä¸ºéšå¼æ’åºå·²ç§»é™¤ï¼‰ï¼Œä½†è¯­æ³•ä»åˆæ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èåšæ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾å¼ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;ä¿è¯é¡ºåºï¼Œæˆ–ç”¨ &lt;code&gt;ORDER BY NULL&lt;/code&gt;è¿½æ±‚æ€§èƒ½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»&lt;/strong&gt;æ˜¾å¼ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥æŒ‡å®šä»»ä½•éœ€è¦çš„æ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-group-by-çš„éšå¼æ’åºåŠå…¶æ¼”å˜"&gt;ğŸ“Š GROUP BY çš„éšå¼æ’åºåŠå…¶æ¼”å˜
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;strong&gt;MySQL 5.7 åŠæ›´æ—©ç‰ˆæœ¬&lt;/strong&gt;ä¸­ï¼Œå½“ä½ ä½¿ç”¨ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥æ—¶ï¼ŒMySQL é»˜è®¤ä¼šå¯¹åˆ†ç»„å­—æ®µè¿›è¡Œ&lt;strong&gt;éšå¼æ’åº&lt;/strong&gt;ï¼ˆImplicit Sortingï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ä½ çš„ SQL è¯­å¥ä¸­æ²¡æœ‰åŒ…å« &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ï¼Œ&lt;code&gt;GROUP BY&lt;/code&gt;çš„ç»“æœé›†é€šå¸¸ä¼šæŒ‰ç…§åˆ†ç»„å­—æ®µçš„å‡åºï¼ˆASCï¼‰æ’åˆ—ã€‚è¿™ç§è¡Œä¸ºåœ¨æŸäº›æƒ…å†µä¸‹ç®€åŒ–äº†æŸ¥è¯¢ï¼Œä½†å¯èƒ½ä¼šå¸¦æ¥ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œå› ä¸ºæ•°æ®åº“éœ€è¦æ‰§è¡Œæ’åºæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä» &lt;strong&gt;MySQL 8.0&lt;/strong&gt; å¼€å§‹ï¼Œå¼€å‘å›¢é˜Ÿç§»é™¤äº† &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åºç‰¹æ€§ã€‚&lt;strong&gt;åœ¨ MySQL 8.0 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;code&gt;GROUP BY&lt;/code&gt;ä¸å†ä¿è¯ç»“æœé›†çš„ä»»ä½•ç‰¹å®šé¡ºåº&lt;/strong&gt;ï¼Œé™¤éä½ æ˜¾å¼åœ°ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ã€‚è¿™ä¸€å˜æ›´æ˜¯ä¸ºäº†éµå¾ª SQL æ ‡å‡†ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„æ’åºæ“ä½œä»¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id="-order-by-null-çš„ç”¨é€”ä¸ç‰ˆæœ¬å·®å¼‚"&gt;âš™ï¸ ORDER BY NULL çš„ç”¨é€”ä¸ç‰ˆæœ¬å·®å¼‚
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;strong&gt;MySQL 5.7 æ—¶ä»£&lt;/strong&gt;ï¼Œ&lt;code&gt;ORDER BY NULL&lt;/code&gt;æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç”¨é€”ï¼š&lt;strong&gt;æ˜¾å¼åœ°å‘ŠçŸ¥ä¼˜åŒ–å™¨ä¸è¦å¯¹ &lt;code&gt;GROUP BY&lt;/code&gt;çš„ç»“æœè¿›è¡Œéšå¼æ’åº&lt;/strong&gt;ã€‚åœ¨ä¸€äº›å¤æ‚çš„æŸ¥è¯¢ä¸­ï¼Œå³ä½¿æ²¡æœ‰ &lt;code&gt;GROUP BY&lt;/code&gt;ï¼Œä¼˜åŒ–å™¨ä¹Ÿå¯èƒ½å¼•å…¥æ’åºæ“ä½œã€‚ä½¿ç”¨ &lt;code&gt;ORDER BY NULL&lt;/code&gt;å¯ä»¥æŠ‘åˆ¶è¿™ç§ä¸å¿…è¦çš„æ’åºï¼Œä»è€Œå‡å°‘ &lt;code&gt;Using filesort&lt;/code&gt;çš„å‡ºç°ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;MySQL 8.0+&lt;/strong&gt; ä¸­ï¼Œç”±äº &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åºå·²è¢«ç§»é™¤ï¼Œ&lt;code&gt;ORDER BY NULL&lt;/code&gt;åŸå…ˆçš„æ ¸å¿ƒä½œç”¨ï¼ˆæŠ‘åˆ¶éšå¼æ’åºï¼‰ä¹Ÿå°±å¤±å»äº†æ„ä¹‰ã€‚è™½ç„¶è¯­å¥ä¸ä¼šæŠ¥é”™ï¼Œä½†å®ƒé€šå¸¸ä¸ä¼šäº§ç”Ÿä»»ä½•å®é™…æ•ˆæœï¼Œå› ä¸ºæ•°æ®åº“æœ¬æ¥å°±ä¸ä¼šè¿›è¡Œéšå¼æ’åºäº†ã€‚æ­¤æ—¶ï¼Œä»»ä½•éœ€è¦çš„æ’åºéƒ½å¿…é¡»é€šè¿‡æ˜¾å¼çš„ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®æ§åˆ¶æ’åº"&gt;ğŸ› ï¸ å¦‚ä½•æ­£ç¡®æ§åˆ¶æ’åº
&lt;/h3&gt;&lt;p&gt;æ— è®ºä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ MySQLï¼Œéµå¾ªä»¥ä¸‹å®è·µéƒ½èƒ½è®©ä½ çš„æŸ¥è¯¢æ›´æ¸…æ™°ã€é«˜æ•ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜ç¡®éœ€æ±‚&lt;/strong&gt;ï¼šé¦–å…ˆæƒ³æ¸…æ¥šä½ æ˜¯å¦çœŸçš„éœ€è¦æ’åºåçš„ç»“æœã€‚å¯¹äºåªæ˜¯è¿›è¡Œåˆ†ç»„èšåˆã€è€Œåç«¯ç¨‹åºæˆ–ä¸­é—´ä»¶ä¸å…³å¿ƒé¡ºåºçš„åœºæ™¯ï¼Œæ¥å—å…¶è‡ªç„¶é¡ºåºå³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼ä½¿ç”¨ ORDER BY&lt;/strong&gt;ï¼šå½“ä½ &lt;strong&gt;ç¡®å®éœ€è¦&lt;/strong&gt;å¯¹ç»“æœè¿›è¡Œæ’åºæ—¶ï¼Œæ— è®ºä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ MySQLï¼Œæœ€å¯é å’Œæ¨èçš„åšæ³•å§‹ç»ˆæ˜¯&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ˜ç¡®æŒ‡å®šæ’åºçš„å­—æ®µå’Œæ–¹å‘ï¼ˆASC æˆ– DESCï¼‰&lt;/strong&gt;ã€‚è¿™æ˜¯ä¿è¯ç»“æœé¡ºåºçš„å”¯ä¸€æ ‡å‡†æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS emp_count
FROM employees
GROUP BY department
ORDER BY department ASC; -- æ˜¾å¼æŒ‡å®šæŒ‰éƒ¨é—¨åç§°å‡åºæ’åˆ—
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬é€‚é…ä¸ä»£ç è¿ç§»&lt;/strong&gt;ï¼šå¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠä» MySQL 5.7 è¿ç§»åˆ° 8.0ï¼Œéœ€è¦æ£€æŸ¥æ‰€æœ‰ä¾èµ– &lt;code&gt;GROUP BY&lt;/code&gt;éšå¼æ’åºçš„ SQL è¯­å¥ï¼Œå¹¶&lt;strong&gt;æ·»åŠ æ˜¾å¼çš„ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½å‡ºç°ç»“æœé¡ºåºä¸ä¸€è‡´çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³äº-null-å€¼åœ¨æ’åºä¸­çš„å¤„ç†"&gt;ğŸ’ å…³äº NULL å€¼åœ¨æ’åºä¸­çš„å¤„ç†
&lt;/h3&gt;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“ä½ ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å¯¹æŸä¸ªå­—æ®µè¿›è¡Œæ’åºæ—¶ï¼Œå¦‚æœè¯¥å­—æ®µå­˜åœ¨ NULL å€¼ï¼Œ&lt;strong&gt;MySQL é»˜è®¤å°† NULL å€¼è§†ä¸ºæœ€å°å€¼&lt;/strong&gt;ï¼Œåœ¨å‡åºæ’åºï¼ˆ&lt;code&gt;ASC&lt;/code&gt;ï¼‰ä¸­ä¼šæ’åœ¨æœ€å‰é¢ï¼Œåœ¨é™åºæ’åºï¼ˆ&lt;code&gt;DESC&lt;/code&gt;ï¼‰ä¸­ä¼šæ’åœ¨æœ€åé¢ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦æ”¹å˜ NULL å€¼çš„é»˜è®¤æ’åºä½ç½®ï¼Œå¯ä»¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ MySQL 8.0+ ä¸­&lt;/strong&gt;ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;ORDER BY column_name ASC NULLS LAST&lt;/code&gt;æˆ– &lt;code&gt;ORDER BY column_name DESC NULLS FIRST&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨æ›´æ—©çš„ç‰ˆæœ¬ä¸­&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡æŠ€å·§å®ç°ï¼Œä¾‹å¦‚ &lt;code&gt;ORDER BY IS NULL(column_name), column_name&lt;/code&gt;æ¥å°† NULL å€¼æ’åœ¨æœ€åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;GROUP BY&lt;/code&gt;å’Œ &lt;code&gt;ORDER BY&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="set-constraints"&gt;SET CONSTRAINTS
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;æ˜¯ä¸€ä¸ª SQL å‘½ä»¤ï¼Œç”¨äº&lt;strong&gt;è®¾ç½®å½“å‰äº‹åŠ¡ä¸­çº¦æŸæ£€æŸ¥çš„æ—¶æœº&lt;/strong&gt;ã€‚å®ƒå…è®¸ä½ æ§åˆ¶æŸäº›çº¦æŸæ˜¯åœ¨æ¯æ¡ SQL è¯­å¥æ‰§è¡Œåç«‹å³æ£€æŸ¥ï¼Œè¿˜æ˜¯å»¶è¿Ÿåˆ°æ•´ä¸ªäº‹åŠ¡æäº¤æ—¶å†ç»Ÿä¸€æ£€æŸ¥ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºå¤„ç†å¤æ‚çš„ã€å¯èƒ½å­˜åœ¨ä¸´æ—¶æ€§çº¦æŸè¿åçš„äº‹åŠ¡éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒæœºåˆ¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IMMEDIATE (ç«‹å³æ¨¡å¼)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;DEFERRED (å»¶è¿Ÿæ¨¡å¼)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ£€æŸ¥æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¯æ¡è¯­å¥æ‰§è¡Œå®Œæ¯•å&lt;/strong&gt;ç«‹å³æ£€æŸ¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;äº‹åŠ¡æäº¤æ—¶&lt;/strong&gt;æ‰ç»Ÿä¸€æ£€æŸ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼Œè¦æ±‚å•æ¡è¯­å¥å°±å¿…é¡»æ»¡è¶³æ‰€æœ‰çº¦æŸ&lt;/td&gt;
&lt;td&gt;é«˜ï¼Œå…è®¸äº‹åŠ¡å†…éƒ¨ä¸´æ—¶è¿åçº¦æŸï¼Œåªè¦æœ€ç»ˆæäº¤æ—¶æ»¡è¶³å³å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ¨¡å¼ï¼Œé€‚åˆå¤§å¤šæ•°ç®€å•æ“ä½œ&lt;/td&gt;
&lt;td&gt;å­˜åœ¨æ“ä½œé—´å¾ªç¯ä¾èµ–æˆ–éœ€è¦ç‰¹å®šé¡ºåºçš„å¤æ‚äº‹åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿæ•ˆæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;SET CONSTRAINTS ... IMMEDIATE&lt;/code&gt;è®¾ç½®&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;SET CONSTRAINTS ... DEFERRED&lt;/code&gt;è®¾ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å…³äº &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;çš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id="-çº¦æŸçš„åˆå§‹ç‰¹æ€§"&gt;ğŸ“Œ çº¦æŸçš„åˆå§‹ç‰¹æ€§
&lt;/h3&gt;&lt;p&gt;åœ¨æ•°æ®åº“ä¸­ï¼Œçº¦æŸï¼ˆå¦‚å¤–é”®çº¦æŸï¼‰åœ¨åˆ›å»ºæ—¶å°±è¢«å®šä¹‰äº†å…¶é»˜è®¤è¡Œä¸ºï¼Œè¿™è¢«ç§°ä¸ºå…¶â€œåˆå§‹ç‰¹æ€§â€ã€‚ä¸»è¦æœ‰ä¸‰ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DEFERRABLE INITIALLY DEFERRED&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;çº¦æŸæ˜¯&lt;strong&gt;å¯å»¶è¿Ÿçš„&lt;/strong&gt;ï¼Œå¹¶ä¸”æ¯ä¸ªæ–°äº‹åŠ¡å¼€å§‹æ—¶ï¼Œè¯¥çº¦æŸ&lt;strong&gt;é»˜è®¤å¤„äº &lt;code&gt;DEFERRED&lt;/code&gt;ï¼ˆå»¶è¿Ÿæ£€æŸ¥ï¼‰æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DEFERRABLE INITIALLY IMMEDIATE&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;çº¦æŸæ˜¯&lt;strong&gt;å¯å»¶è¿Ÿçš„&lt;/strong&gt;ï¼Œä½†æ¯ä¸ªæ–°äº‹åŠ¡å¼€å§‹æ—¶ï¼Œè¯¥çº¦æŸ&lt;strong&gt;é»˜è®¤å¤„äº &lt;code&gt;IMMEDIATE&lt;/code&gt;ï¼ˆç«‹å³æ£€æŸ¥ï¼‰æ¨¡å¼&lt;/strong&gt;ã€‚è¿™æ˜¯å¸¸è§æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;NOT DEFERRABLE&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;çº¦æŸ&lt;strong&gt;ä¸å¯å»¶è¿Ÿ&lt;/strong&gt;ï¼Œå¿…é¡»ç«‹å³æ£€æŸ¥ã€‚&lt;strong&gt;æ­¤ç±»çº¦æŸä¸å— &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;å‘½ä»¤çš„å½±å“&lt;/strong&gt;ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ PostgreSQLã€GaussDB ç­‰æ•°æ®åº“ä¸­ï¼Œ&lt;strong&gt;æ£€æŸ¥å’Œå”¯ä¸€çº¦æŸé€šå¸¸æ€»æ˜¯ &lt;code&gt;NOT DEFERRABLE&lt;/code&gt;&lt;strong&gt;çš„ï¼Œè€Œæ­¤å‘½ä»¤&lt;/strong&gt;ä¸»è¦å½±å“å¤–é”®çº¦æŸ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¯­æ³•ä¸å‚æ•°"&gt;âš™ï¸ è¯­æ³•ä¸å‚æ•°
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET CONSTRAINTS { ALL | name [, ...] } { DEFERRED | IMMEDIATE }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ALL&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šå½“å‰äº‹åŠ¡ä¸­&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å¯å»¶è¿Ÿçš„çº¦æŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;name&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª&lt;strong&gt;å…·ä½“çš„çº¦æŸåç§°&lt;/strong&gt;ã€‚è¿™äº›çº¦æŸå¿…é¡»æ˜¯å¯å»¶è¿Ÿçš„ï¼ˆ&lt;code&gt;DEFERRABLE&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;DEFERRED&lt;/code&gt;&lt;/strong&gt;ï¼šå°†æŒ‡å®šçº¦æŸçš„æ¨¡å¼è®¾ç½®ä¸º&lt;strong&gt;å»¶è¿Ÿæ£€æŸ¥&lt;/strong&gt;ï¼Œå³ç­‰åˆ°äº‹åŠ¡æäº¤æ—¶å†æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IMMEDIATE&lt;/code&gt;&lt;/strong&gt;ï¼šå°†æŒ‡å®šçº¦æŸçš„æ¨¡å¼è®¾ç½®ä¸º&lt;strong&gt;ç«‹å³æ£€æŸ¥&lt;/strong&gt;ï¼Œå³åœ¨æ¯æ¡è¯­å¥ç»“æŸåæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœºåˆ¶"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœºåˆ¶
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å†…æœ‰æ•ˆ&lt;/strong&gt;ï¼š&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;çš„è®¾ç½®&lt;strong&gt;ä»…å¯¹å½“å‰äº‹åŠ¡æœ‰æ•ˆ&lt;/strong&gt;ã€‚äº‹åŠ¡ç»“æŸåï¼Œæ‰€æœ‰çº¦æŸçš„è¡Œä¸ºå°†æ¢å¤ä¸ºå…¶åˆå§‹ç‰¹æ€§ã€‚åœ¨äº‹åŠ¡å—å¤–æ‰§è¡Œæ­¤å‘½ä»¤æ˜¯æ— æ•ˆçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼åˆ‡æ¢çš„å³æ—¶æ£€æŸ¥&lt;/strong&gt;ï¼šå½“ä½ ä½¿ç”¨ &lt;code&gt;SET CONSTRAINTS ... IMMEDIATE&lt;/code&gt;å°†çº¦æŸä» &lt;code&gt;DEFERRED&lt;/code&gt;æ¨¡å¼åˆ‡æ¢å› &lt;code&gt;IMMEDIATE&lt;/code&gt;æ¨¡å¼æ—¶ï¼Œä¼šå‘ç”Ÿä¸€ä¸ª&lt;strong&gt;å…³é”®è¡Œä¸º&lt;/strong&gt;ï¼šæ•°æ®åº“ä¼š&lt;strong&gt;ç«‹å³&lt;/strong&gt;æ£€æŸ¥æ‰€æœ‰æœ¬è¯¥åœ¨å»¶è¿Ÿæ¨¡å¼ä¸‹ç­‰åˆ°æäº¤æ—¶æ‰æ£€æŸ¥çš„çº¦æŸæ¡ä»¶ã€‚å¦‚æœæ­¤æ—¶å­˜åœ¨ä»»ä½•è¿åçº¦æŸçš„æƒ…å†µï¼Œè¿™ä¸ª &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;å‘½ä»¤å°±ä¼š&lt;strong&gt;å¤±è´¥&lt;/strong&gt;ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜çº¦æŸçš„æ¨¡å¼ã€‚è¿™å…è®¸ä½ åœ¨äº‹åŠ¡ä¸­çš„ç‰¹å®šæ—¶é—´ç‚¹å¼ºåˆ¶è¿›è¡Œçº¦æŸæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ”„ å…¸å‹ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼š&lt;code&gt;invoices&lt;/code&gt;(å‘ç¥¨) å’Œ &lt;code&gt;invoice_items&lt;/code&gt;(å‘ç¥¨æ˜ç»†é¡¹)ã€‚&lt;code&gt;invoice_items&lt;/code&gt;è¡¨æœ‰ä¸€ä¸ªå¤–é”® &lt;code&gt;invoice_id&lt;/code&gt;æŒ‡å‘ &lt;code&gt;invoices&lt;/code&gt;è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šä½ éœ€è¦åŒæ—¶æ’å…¥ä¸€å¼ å‘ç¥¨åŠå…¶å¤šä¸ªæ˜ç»†é¡¹ã€‚åœ¨ä¼ ç»Ÿçš„ç«‹å³æ£€æŸ¥æ¨¡å¼ä¸‹ï¼Œä½ å¿…é¡»å…ˆæ’å…¥ä¸»å‘ç¥¨è®°å½•ï¼ˆ&lt;code&gt;invoices&lt;/code&gt;ï¼‰ï¼Œç„¶åæ‰èƒ½æ’å…¥æ˜ç»†è®°å½•ï¼ˆ&lt;code&gt;invoice_items&lt;/code&gt;ï¼‰ã€‚ä½†å¦‚æœä½¿ç”¨å»¶è¿Ÿçº¦æŸï¼Œæ“ä½œé¡ºåºå¯ä»¥æ›´çµæ´»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å¼€å§‹ä¸€ä¸ªäº‹åŠ¡
BEGIN;
-- 1. å…ˆå°†å¤–é”®çº¦æŸè®¾ç½®ä¸ºå»¶è¿Ÿæ¨¡å¼ã€‚å‡è®¾å¤–é”®çº¦æŸåä¸º &amp;#39;fk_invoice_items_invoice_id&amp;#39;
SET CONSTRAINTS fk_invoice_items_invoice_id DEFERRED;
-- 2. ç°åœ¨å¯ä»¥å…ˆæ’å…¥æ˜ç»†é¡¹ï¼ˆæ­¤æ—¶å¯¹åº”çš„å‘ç¥¨ä¸»è®°å½•å¯èƒ½è¿˜ä¸å­˜åœ¨ï¼‰
INSERT INTO invoice_items (invoice_id, item_name, amount) VALUES (1001, &amp;#39;Product A&amp;#39;, 99.99);
INSERT INTO invoice_items (invoice_id, item_name, amount) VALUES (1001, &amp;#39;Product B&amp;#39;, 149.99);
-- 3. ç„¶åæ’å…¥å‘ç¥¨ä¸»è®°å½•
INSERT INTO invoices (id, customer_id, total_amount) VALUES (1001, 555, 249.98);
-- 4. åœ¨æäº¤å‰ï¼Œå¯ä»¥é€‰æ‹©åˆ‡æ¢å›ç«‹å³æ¨¡å¼æ¥è¿›è¡Œæå‰æ£€æŸ¥
-- æ­¤ä¸¾ä¼šç«‹å³éªŒè¯å½“å‰æ•°æ®æ˜¯å¦æ»¡è¶³å¤–é”®çº¦æŸï¼Œå¦‚æœæ˜ç»†é¡¹ä¸­çš„ invoice_id 1001 åœ¨ invoices è¡¨ä¸­ä¸å­˜åœ¨ï¼Œæ­¤å¤„ä¼šæŠ¥é”™ã€‚
SET CONSTRAINTS fk_invoice_items_invoice_id IMMEDIATE;
-- 5. æäº¤äº‹åŠ¡ã€‚æäº¤æ—¶ï¼Œæ•°æ®åº“ä¼šæœ€ç»ˆæ£€æŸ¥æ‰€æœ‰è®¾ç½®ä¸º DEFERRED çš„çº¦æŸã€‚
COMMIT;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;æ˜¯ä¸€ä¸ªé«˜çº§ SQL å‘½ä»¤ï¼Œä¸»è¦ç”¨äºç®¡ç†å¤æ‚äº‹åŠ¡ä¸­çš„å¤–é”®çº¦æŸæ£€æŸ¥æ—¶æœºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼šå®ƒæä¾›äº†çµæ´»æ€§ï¼Œå…è®¸åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­ä¸´æ—¶ç»•è¿‡æŸäº›çº¦æŸï¼Œåªè¦æœ€ç»ˆæäº¤æ—¶æ•°æ®ä¿æŒä¸€è‡´å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»è¦é™åˆ¶&lt;/strong&gt;ï¼šé€šå¸¸åªé€‚ç”¨äº&lt;strong&gt;å¤–é”®çº¦æŸ&lt;/strong&gt;ï¼›æ£€æŸ¥å’Œå”¯ä¸€çº¦æŸå¾€å¾€ä¸å¯å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®æé†’&lt;/strong&gt;ï¼šè®¾ç½®ä»…åœ¨&lt;strong&gt;å½“å‰äº‹åŠ¡å†…æœ‰æ•ˆ&lt;/strong&gt;ï¼›ä» &lt;code&gt;DEFERRED&lt;/code&gt;åˆ‡æ¢åˆ° &lt;code&gt;IMMEDIATE&lt;/code&gt;æ¨¡å¼ä¼šè§¦å‘å³æ—¶æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="set-transaction"&gt;SET TRANSACTION
&lt;/h2&gt;&lt;p&gt;ä½ æ­£åœ¨æ·±å…¥äº†è§£ SQL ä¸­çš„ &lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºç²¾ç»†æ§åˆ¶äº‹åŠ¡è¡Œä¸ºçš„é‡è¦å‘½ä»¤ã€‚æˆ‘ä¼šè¯¦ç»†ä¸ºä½ è§£é‡Šå®ƒçš„åŠŸèƒ½ã€è¯­æ³•ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥ä¸»è¦ç”¨äºè®¾ç½®&lt;strong&gt;å½“å‰äº‹åŠ¡&lt;/strong&gt;çš„éš”ç¦»çº§åˆ«ã€è®¿é—®æ¨¡å¼ï¼ˆåªè¯»æˆ–è¯»å†™ï¼‰ï¼Œå¹¶å¯ä¸ºå…¶æŒ‡å®šå›æ»šæ®µæˆ–åç§°ã€‚å®ƒå…è®¸ä½ æ ¹æ®ç‰¹å®šéœ€æ±‚è°ƒæ•´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œè¯»å†™å±æ€§ï¼Œä»è€Œåœ¨æ•°æ®ä¸€è‡´æ€§ã€å¹¶å‘æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h3 id="-set-transaction-çš„æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ“Œ SET TRANSACTION çš„æ ¸å¿ƒåŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;å…è®¸ä½ å¯¹å½“å‰äº‹åŠ¡è¿›è¡Œä»¥ä¸‹å‡ é¡¹é‡è¦è®¾ç½®ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾ç½®éš”ç¦»çº§åˆ« (ISOLATION LEVEL)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ§åˆ¶äº‹åŠ¡ä¹‹é—´çš„å¯è§æ€§å’Œå¹¶å‘å½±å“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾ç½®è®¿é—®æ¨¡å¼ (READ ONLY / READ WRITE)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†³å®šäº‹åŠ¡æ˜¯å¦å…è®¸ä¿®æ”¹æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é…å›æ»šæ®µ (USE ROLLBACK SEGMENT)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ï¼ˆé€‚ç”¨äºä½¿ç”¨å›æ»šæ®µç®¡ç†çš„æ•°æ®åº“ï¼‰ä¸ºäº‹åŠ¡æŒ‡å®šç‰¹å®šçš„å›æ»šæ®µã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½åäº‹åŠ¡ (NAME)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºäº‹åŠ¡åˆ†é…ä¸€ä¸ªåç§°ï¼Œä¾¿äºåœ¨åˆ†å¸ƒå¼ç¯å¢ƒæˆ–ç›‘æ§å·¥å…·ä¸­è¯†åˆ«ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•ä¸å‚æ•°è¯¦è§£"&gt;ğŸ› ï¸ è¯­æ³•ä¸å‚æ•°è¯¦è§£
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET TRANSACTION
[ ISOLATION LEVEL { isolation_level } ]
[ { READ ONLY | READ WRITE } ]
[ USE ROLLBACK SEGMENT rollback_segment ]
[ NAME &amp;#39;transaction_name&amp;#39; ];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¸»è¦å‚æ•°è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ISOLATION LEVEL&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œè¿™æ˜¯è¯¥è¯­å¥æœ€æ ¸å¿ƒçš„åŠŸèƒ½ä¹‹ä¸€ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ UNCOMMITTED&lt;/code&gt;&lt;/strong&gt;ï¼šå…è®¸è¯»å–å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ›´æ”¹ï¼ˆè„è¯»ï¼‰ã€‚&lt;strong&gt;ä¸€è‡´æ€§æœ€å¼±ï¼Œå¹¶å‘æ€§æœ€é«˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ COMMITTED&lt;/code&gt;&lt;/strong&gt;ï¼šåªèƒ½è¯»å–å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ›´æ”¹ã€‚è¿™æ˜¯ &lt;strong&gt;Oracle ç­‰è®¸å¤šæ•°æ®åº“çš„é»˜è®¤çº§åˆ«&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;REPEATABLE READ&lt;/code&gt;&lt;/strong&gt;ï¼šä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®çš„ç»“æœä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SERIALIZABLE&lt;/code&gt;&lt;/strong&gt;ï¼šæœ€é«˜éš”ç¦»çº§åˆ«ï¼Œä¿è¯äº‹åŠ¡å®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œã€‚&lt;strong&gt;ä¸€è‡´æ€§æœ€å¼ºï¼Œå¹¶å‘æ€§æœ€ä½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ ONLY&lt;/code&gt;/ &lt;code&gt;READ WRITE&lt;/code&gt;&lt;/strong&gt;ï¼šå®šä¹‰äº‹åŠ¡çš„è®¿é—®æ¨¡å¼ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ ONLY&lt;/code&gt;&lt;/strong&gt;ï¼šå°†äº‹åŠ¡è®¾ç½®ä¸º&lt;strong&gt;åªè¯»&lt;/strong&gt;ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œåªèƒ½æ‰§è¡ŒæŸ¥è¯¢ï¼ˆ&lt;code&gt;SELECT&lt;/code&gt;ï¼‰ï¼Œä¸èƒ½æ‰§è¡Œä»»ä½•æ•°æ®æ“ä½œè¯­è¨€ï¼ˆDMLï¼‰è¯­å¥ï¼ˆå¦‚ &lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;ï¼‰ã€‚è¿™å¯¹äºéœ€è¦&lt;strong&gt;ç”Ÿæˆç¨³å®šæŠ¥å‘Š&lt;/strong&gt;çš„åœºæ™¯éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒç¡®ä¿åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®è§†å›¾æ˜¯ä¸€è‡´ä¸”ä¸å—å…¶ä»–äº‹åŠ¡å†™æ“ä½œå½±å“çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ WRITE&lt;/code&gt;&lt;/strong&gt;ï¼šå°†äº‹åŠ¡è®¾ç½®ä¸º&lt;strong&gt;è¯»å†™&lt;/strong&gt;ï¼ˆè¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼‰ã€‚å…è®¸åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ DML è¯­å¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;&lt;/strong&gt;ï¼šï¼ˆä¸»è¦ç”¨äº Oracle ä¸”ä½¿ç”¨å›æ»šæ®µç®¡ç† undo æ—¶ï¼‰æ‰‹åŠ¨å°†äº‹åŠ¡åˆ†é…ç»™æŒ‡å®šçš„å›æ»šæ®µã€‚&lt;strong&gt;æ³¨æ„ï¼šOracle å¼ºçƒˆæ¨èä½¿ç”¨è‡ªåŠ¨æ’¤é”€ç®¡ç†ï¼ˆAUMï¼‰&lt;/strong&gt;ï¼Œåœ¨ AUM æ¨¡å¼ä¸‹æ­¤å­å¥ä¼šè¢«å¿½ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;NAME&lt;/code&gt;&lt;/strong&gt;ï¼šä¸ºäº‹åŠ¡æŒ‡å®šä¸€ä¸ªåç§°ï¼ˆæœ€å¤š 255 å­—èŠ‚ï¼‰ã€‚è¿™åœ¨&lt;strong&gt;ç›‘æ§å’Œè¯Šæ–­é•¿æ—¶é—´è¿è¡Œæˆ–åˆ†å¸ƒå¼äº‹åŠ¡&lt;/strong&gt;æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºä½ å¯ä»¥é€šè¿‡åç§°è½»æ¾è¯†åˆ«ç‰¹å®šäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸ä½¿ç”¨è§„åˆ™"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸ä½¿ç”¨è§„åˆ™
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;SET TRANSACTION&lt;/code&gt;æ—¶ï¼Œå¿…é¡»éµå®ˆä¸€äº›å…³é”®è§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥&lt;/strong&gt;ï¼š&lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥&lt;strong&gt;å¿…é¡»æ˜¯å½“å‰äº‹åŠ¡å—ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥&lt;/strong&gt;ï¼ˆé™¤äº†å…¶ä»– &lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥æˆ–åœ¨éš”ç¦»çº§åˆ« NC ä¸‹æ‰§è¡Œçš„è¯­å¥ï¼‰ã€‚äº‹åŠ¡é€šå¸¸ä»¥ &lt;code&gt;BEGIN&lt;/code&gt;æˆ– &lt;code&gt;START TRANSACTION&lt;/code&gt;å¼€å§‹ï¼Œæˆ–è€…ä»ä¸Šä¸€æ¬¡ &lt;code&gt;COMMIT&lt;/code&gt;/&lt;code&gt;ROLLBACK&lt;/code&gt;ä¹‹åå¼€å§‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¸æœ‰æ•ˆæœŸ&lt;/strong&gt;ï¼šè¯¥è¯­å¥çš„è®¾ç½®&lt;strong&gt;ä»…å¯¹å½“å‰äº‹åŠ¡æœ‰æ•ˆ&lt;/strong&gt;ã€‚äº‹åŠ¡ç»“æŸæ—¶ï¼ˆé€šè¿‡ &lt;code&gt;COMMIT&lt;/code&gt;æˆ– &lt;code&gt;ROLLBACK&lt;/code&gt;ï¼‰ï¼Œæ‰€æœ‰è®¾ç½®å¤±æ•ˆï¼Œæ–°äº‹åŠ¡å°†æ¢å¤é»˜è®¤è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼å†²çª&lt;/strong&gt;ï¼šä¸èƒ½åœ¨åŒä¸€è¯­å¥æˆ–åŒä¸€äº‹åŠ¡ä¸­åŒæ—¶ä½¿ç”¨ &lt;code&gt;READ ONLY&lt;/code&gt;å’Œ &lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;ï¼Œå› ä¸ºåªè¯»äº‹åŠ¡ä¸ç”Ÿæˆå›æ»šä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Oracle SYS ç”¨æˆ·çš„ç‰¹æ®Šæ€§&lt;/strong&gt;ï¼šåœ¨ Oracle ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;SYS&lt;/code&gt;ç”¨æˆ·æ‰§è¡Œçš„äº‹åŠ¡æ— æ³•è®¾ç½®ä¸ºçœŸæ­£çš„åªè¯»&lt;/strong&gt;ã€‚å³ä½¿è®¾ç½®äº† &lt;code&gt;READ ONLY&lt;/code&gt;ï¼Œ&lt;code&gt;SYS&lt;/code&gt;ç”¨æˆ·çš„æŸ¥è¯¢ä»ç„¶ä¼šçœ‹åˆ°äº‹åŠ¡è¿‡ç¨‹ä¸­å…¶ä»–æ“ä½œæ‰€åšçš„æ›´æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ¯ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿æŠ¥å‘Šæ•°æ®çš„ç¨³å®šæ€§&lt;/strong&gt;ï¼šå½“éœ€è¦è¿è¡Œä¸€ä¸ªåŒ…å«å¤šä¸ªæŸ¥è¯¢çš„é•¿æŠ¥å‘Šï¼Œå¹¶ä¸”å¸Œæœ›è¿™äº›æŸ¥è¯¢åŸºäº&lt;strong&gt;å®Œå…¨ç›¸åŒçš„æ•°æ®å¿«ç…§&lt;/strong&gt;æ—¶ï¼Œä¼šä½¿ç”¨ &lt;code&gt;SET TRANSACTION READ ONLY&lt;/code&gt;ã€‚è¿™å¯ä»¥é¿å…åœ¨ç”ŸæˆæŠ¥å‘Šçš„è¿‡ç¨‹ä¸­ï¼Œå› å…¶ä»–ç”¨æˆ·æ›´æ–°æ•°æ®è€Œå¯¼è‡´æŠ¥å‘Šå‰åæ•°æ®ä¸ä¸€è‡´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;COMMIT; -- ç»“æŸä¹‹å‰çš„äº‹åŠ¡ï¼Œç¡®ä¿SET TRANSACTIONæ˜¯ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„ç¬¬ä¸€æ¡è¯­å¥
SET TRANSACTION READ ONLY NAME &amp;#39;Monthly_Report&amp;#39;;
SELECT COUNT(*) FROM orders;
SELECT SUM(amount) FROM orders;
COMMIT; -- ç»“æŸåªè¯»äº‹åŠ¡ï¼Œä¸æäº¤ä»»ä½•æ•°æ®æ›´æ”¹
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ§åˆ¶å¹¶å‘ä¸ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨å¤æ‚çš„äº‹åŠ¡å¤„ç†ä¸­ï¼Œæ ¹æ®éœ€è¦å¯¹ç‰¹å®šäº‹åŠ¡æé«˜æˆ–é™ä½éš”ç¦»çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œåœ¨éœ€è¦æœ€é«˜æ•°æ®ä¸€è‡´æ€§ä¸”èƒ½æ¥å—è¾ƒä½å¹¶å‘æ€§çš„åœºæ™¯ä¸‹ï¼Œè®¾ç½® &lt;code&gt;ISOLATION LEVEL SERIALIZABLE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†å¤§å‹äº‹åŠ¡&lt;/strong&gt;ï¼šåœ¨ä»ä½¿ç”¨å›æ»šæ®µç®¡ç†çš„ Oracle æ•°æ®åº“ä¸­ï¼Œå¤§å‹ DML æ“ä½œå¯ä»¥é€šè¿‡ &lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;è¢«åˆ†é…åˆ°è¶³å¤Ÿå¤§çš„å›æ»šæ®µï¼Œä»¥é˜²æ­¢è‘—åçš„ &lt;strong&gt;&amp;ldquo;ORA-01555: snapshot too old&amp;rdquo;&lt;/strong&gt; é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡ç›‘æ§ä¸è¯Šæ–­&lt;/strong&gt;ï¼šä¸ºé‡è¦çš„æˆ–é•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡è®¾ç½® &lt;code&gt;NAME&lt;/code&gt;ï¼Œä¾¿äºæ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰åœ¨ç›‘æ§å·¥å…·ï¼ˆå¦‚ &lt;code&gt;V$TRANSACTION&lt;/code&gt;ï¼‰ä¸­å¿«é€Ÿè¯†åˆ«å’Œæ’æŸ¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ•°æ®åº“å®ç°å·®å¼‚"&gt;ğŸ”„ æ•°æ®åº“å®ç°å·®å¼‚
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ &lt;code&gt;SET TRANSACTION&lt;/code&gt;æ˜¯ SQL æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸åŒæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰åœ¨å®ç°å’Œæ”¯æŒçš„é€‰é¡¹ä¸Šå¯èƒ½å­˜åœ¨å·®å¼‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Oracle&lt;/strong&gt;ï¼šæ”¯æŒ &lt;code&gt;READ ONLY&lt;/code&gt;, &lt;code&gt;READ WRITE&lt;/code&gt;, &lt;code&gt;ISOLATION LEVEL&lt;/code&gt;, &lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;, &lt;code&gt;NAME&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IBM Db2&lt;/strong&gt;ï¼šæ”¯æŒè®¾ç½®éš”ç¦»çº§åˆ«å’Œè¯Šæ–­åŒºåŸŸå¤§å°ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL&lt;/strong&gt;ï¼š&lt;code&gt;SET TRANSACTION&lt;/code&gt;ä¸»è¦ç”¨äºè®¾ç½®éš”ç¦»çº§åˆ«ï¼ˆå¦‚ &lt;code&gt;SET TRANSACTION ISOLATION LEVEL SERIALIZABLE&lt;/code&gt;ï¼‰ã€‚è®¿é—®æ¨¡å¼ç­‰åŠŸèƒ½å¯èƒ½æœ‰ä¸åŒçš„å®ç°æ–¹å¼æˆ–ä¸æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼ŒåŠ¡å¿…æŸ¥é˜…ä½ æ‰€ä½¿ç”¨çš„ç‰¹å®šæ•°æ®åº“çš„å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè®©ä½ èƒ½å¤Ÿç²¾ç»†åœ°æ§åˆ¶äº‹åŠ¡çš„å…³é”®å±æ€§ï¼Œå¦‚&lt;strong&gt;éš”ç¦»çº§åˆ«&lt;/strong&gt;å’Œ&lt;strong&gt;è®¿é—®æ¨¡å¼&lt;/strong&gt;ã€‚å®ƒçš„æ­£ç¡®ä½¿ç”¨æœ‰åŠ©äºç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ»¡è¶³ç‰¹å®šåœºæ™¯ï¼ˆå¦‚ç¨³å®šæŠ¥å‘Šï¼‰çš„éœ€æ±‚ï¼Œå¹¶è¾…åŠ©è¿›è¡Œäº‹åŠ¡ç›‘æ§å’Œæ€§èƒ½ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒè¦ç‚¹åŒ…æ‹¬ï¼šè¯¥è¯­å¥&lt;strong&gt;å¿…é¡»æ˜¯äº‹åŠ¡çš„ç¬¬ä¸€ä¸ªè¯­å¥&lt;/strong&gt;ã€è®¾ç½®&lt;strong&gt;ä»…å¯¹å½“å‰äº‹åŠ¡æœ‰æ•ˆ&lt;/strong&gt;ã€&lt;strong&gt;åªè¯»æ¨¡å¼&lt;/strong&gt;å¯¹äºç”Ÿæˆä¸€è‡´æ€§è§†å›¾éå¸¸æœ‰ç”¨ï¼Œä»¥åŠä¸åŒæ•°æ®åº“åœ¨å®ç°ä¸Šå¯èƒ½å­˜åœ¨å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="show-global-status"&gt;SHOW GLOBAL STATUS
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„è¯­å¥ï¼Œç”¨äºæŸ¥çœ‹æ•°æ®åº“æœåŠ¡å™¨çš„&lt;strong&gt;å…¨å±€æ€§èƒ½è®¡æ•°å™¨å’ŒçŠ¶æ€ä¿¡æ¯&lt;/strong&gt;ã€‚è¿™äº›ä¿¡æ¯å¯¹äºæ•°æ®åº“æ€§èƒ½ç›‘æ§ã€æ•…éšœæ’æŸ¥å’Œä¼˜åŒ–è‡³å…³é‡è¦ã€‚æˆ‘ä¼šå…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¿«é€Ÿä»‹ç»ä¸€äº›å…³é”®çŠ¶æ€å˜é‡ï¼Œç„¶åå†è¯¦ç»†è§£é‡Šå…¶ç”¨æ³•å’Œè§£è¯»æ–¹æ³•ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;çŠ¶æ€å˜é‡&lt;/th&gt;
&lt;th&gt;å«ä¹‰ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;th&gt;å¦‚ä½•è§£è¯»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Aborted_connects&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è¯•è¿æ¥åˆ° MySQL æœåŠ¡å™¨ä½†&lt;strong&gt;å¤±è´¥çš„è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼è¾ƒé«˜å¯èƒ½æ„å‘³ç€ç½‘ç»œé—®é¢˜ã€è®¤è¯é”™è¯¯æˆ– &lt;code&gt;max_connections&lt;/code&gt;å·²æ»¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Aborted_clients&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±äºå®¢æˆ·ç«¯æ²¡æœ‰æ­£ç¡®å…³é—­è¿æ¥è€Œ&lt;strong&gt;ä¸­æ­¢çš„è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼è¾ƒé«˜å¯èƒ½æ„å‘³ç€å®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´è®¾ç½®ä¸åˆç†æˆ–å®¢æˆ·ç«¯ç¨‹åºå¼‚å¸¸é€€å‡ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Bytes_received&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;æ‰€æœ‰å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„æ€»å­—èŠ‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºç›‘æ§ç½‘ç»œè¾“å…¥æµé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Bytes_sent&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘é€ç»™&lt;strong&gt;æ‰€æœ‰å®¢æˆ·ç«¯çš„æ€»å­—èŠ‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºç›‘æ§ç½‘ç»œè¾“å‡ºæµé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Connections&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è¯•è¿æ¥åˆ° MySQL æœåŠ¡å™¨çš„&lt;strong&gt;æ€»è¿æ¥æ•°&lt;/strong&gt;ï¼ˆæ— è®ºæˆåŠŸä¸å¦ï¼‰&lt;/td&gt;
&lt;td&gt;ç»“åˆ &lt;code&gt;Uptime&lt;/code&gt;å¯è®¡ç®—å¹³å‡è¿æ¥é¢‘ç‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Threads_connected&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“å‰æ‰“å¼€çš„è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®æ—¶è¿æ¥æ•°ï¼Œå¯ç”¨äºåˆ¤æ–­å½“å‰è´Ÿè½½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Threads_running&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆéç¡çœ ï¼‰çš„çº¿ç¨‹æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœè¯¥å€¼æŒç»­è¾ƒé«˜ï¼Œå¯èƒ½è¡¨ç¤ºæœåŠ¡å™¨è´Ÿè½½è¾ƒé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Queries&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨&lt;strong&gt;æ‰§è¡Œçš„è¯­å¥æ€»æ•°&lt;/strong&gt;ï¼ˆåŒ…æ‹¬å­˜å‚¨è¿‡ç¨‹ä¸­çš„è¯­å¥ï¼‰&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æœåŠ¡å™¨çš„æ€»æŸ¥è¯¢è´Ÿè½½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Questions&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ¥æ”¶åˆ°çš„ç”±å®¢æˆ·ç«¯å‘é€çš„&lt;strong&gt;æŸ¥è¯¢è¯­å¥æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;Queries&lt;/code&gt;ç±»ä¼¼ï¼Œä½†é€šå¸¸ä¸åŒ…æ‹¬å­˜å‚¨è¿‡ç¨‹å†…éƒ¨çš„è¯­å¥ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Slow_queries&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œæ—¶é—´è¶…è¿‡ &lt;code&gt;long_query_time&lt;/code&gt;ç§’çš„&lt;strong&gt;æ…¢æŸ¥è¯¢æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦é‡ç‚¹å…³æ³¨&lt;/strong&gt;ã€‚æ•°å€¼å¢é•¿å¿«æ„å‘³ç€å¯èƒ½å­˜åœ¨éœ€è¦ä¼˜åŒ–çš„æŸ¥è¯¢ã€‚é€šå¸¸éœ€å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—æ¥å®šä½å…·ä½“æŸ¥è¯¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_read&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;è¯»å–çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®è®¿é—®çš„é¢‘ç¹ç¨‹åº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_inserted&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;æ’å…¥çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®æ’å…¥çš„ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_updated&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;æ›´æ–°çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®æ›´æ–°çš„ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_deleted&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;åˆ é™¤çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®åˆ é™¤çš„ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Created_tmp_disk_tables&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ‰§è¡Œè¯­å¥æ—¶&lt;strong&gt;åœ¨ç£ç›˜ä¸Šåˆ›å»ºçš„ä¸´æ—¶è¡¨æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæ­¤å€¼è¾ƒå¤§ï¼Œå¯èƒ½éœ€è€ƒè™‘ä¼˜åŒ–æŸ¥è¯¢æˆ–å¢åŠ  &lt;code&gt;tmp_table_size&lt;/code&gt;å’Œ &lt;code&gt;max_heap_table_size&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Created_tmp_tables&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ‰§è¡Œè¯­å¥æ—¶&lt;strong&gt;åˆ›å»ºçš„ä¸´æ—¶è¡¨æ€»æ•°&lt;/strong&gt;ï¼ˆåŒ…æ‹¬å†…å­˜å’Œç£ç›˜ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶è¡¨åˆ›å»ºé¢‘ç¹å¯èƒ½æ„å‘³ç€ä½¿ç”¨äº†å¾ˆå¤š &lt;code&gt;GROUP BY&lt;/code&gt;ã€&lt;code&gt;ORDER BY&lt;/code&gt;æˆ–ä¸´æ—¶ç»“æœé›†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Select_scan&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹ç¬¬ä¸€ä¸ªè¡¨è¿›è¡Œ&lt;strong&gt;å…¨è¡¨æ‰«æçš„è”æ¥æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼è¾ƒé«˜å¯èƒ½æ„å‘³ç€è”æ¥æŸ¥è¯¢ç¼ºä¹æœ‰æ•ˆç´¢å¼•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_buffer_pool_hit_rate&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;InnoDB ç¼“å†²æ± çš„å‘½ä¸­ç‡&lt;/strong&gt;ï¼ˆéœ€è®¡ç®—ï¼š&lt;code&gt;(1 - Innodb_buffer_pool_reads/Innodb_buffer_pool_read_requests) * 100&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ€§èƒ½æŒ‡æ ‡&lt;/strong&gt;ã€‚ç†æƒ³æƒ…å†µä¸‹åº”æ¥è¿‘ 100%ã€‚å‘½ä¸­ç‡ä½è¯´æ˜ç¼“å†²æ± å¤§å°å¯èƒ½ä¸è¶³ï¼Œå¯¼è‡´é¢‘ç¹ä»ç£ç›˜è¯»å–æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨"&gt;ğŸ“Š è¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;è¯­å¥ç”¨äºæŸ¥çœ‹å…¨å±€çŠ¶æ€å˜é‡ï¼ŒåŠ ä¸Š &lt;code&gt;LIKE&lt;/code&gt;å­å¥å¯ä»¥è¿‡æ»¤å‡ºä½ å…³å¿ƒçš„ç‰¹å®šå˜é‡æˆ–æŸä¸€ç±»å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS [LIKE &amp;#39;pattern&amp;#39;];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LIKE 'pattern'&lt;/code&gt;: å¯é€‰å­å¥ï¼Œç”¨äºåŒ¹é…å˜é‡åã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;%&lt;/code&gt;é€šé…ç¬¦æ¥åŒ¹é…å¤šä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ‰€æœ‰å…¨å±€çŠ¶æ€å˜é‡&lt;/strong&gt;ï¼ˆè¾“å‡ºä¼šå¾ˆé•¿ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹åŒ…å«ç‰¹å®šå…³é”®è¯çš„å˜é‡&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥çœ‹ä¸ InnoDB ç¼“å†²æ± ç›¸å…³çš„çŠ¶æ€ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE &amp;#39;Innodb_buffer_pool%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹å•ä¸ªç‰¹å®šå˜é‡&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥çœ‹æ…¢æŸ¥è¯¢æ•°é‡ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE &amp;#39;Slow_queries&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æŸä¸€ç±»å˜é‡&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥çœ‹æ‰€æœ‰ä»¥ &amp;ldquo;Com_&amp;rdquo; å¼€å¤´çš„å‘½ä»¤è®¡æ•°å™¨ï¼Œå¦‚ &lt;code&gt;Com_select&lt;/code&gt;, &lt;code&gt;Com_insert&lt;/code&gt;, &lt;code&gt;Com_delete&lt;/code&gt;, &lt;code&gt;Com_update&lt;/code&gt;ç­‰ï¼Œè¿™äº›å˜é‡ç»Ÿè®¡äº†å„ç§ç±»å‹è¯­å¥çš„æ‰§è¡Œæ¬¡æ•°ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE &amp;#39;Com_%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•è§£è¯»çŠ¶æ€å˜é‡"&gt;ğŸ” å¦‚ä½•è§£è¯»çŠ¶æ€å˜é‡
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€å˜é‡çš„å€¼é€šå¸¸æ˜¯&lt;strong&gt;ä»æœåŠ¡å™¨å¯åŠ¨å¼€å§‹ç´¯ç§¯çš„è®¡æ•°å™¨&lt;/strong&gt;ã€‚å•çº¯çœ‹ä¸€ä¸ªé™æ€å€¼æ„ä¹‰ä¸å¤§ï¼Œæ›´æœ‰ä»·å€¼çš„æ˜¯&lt;strong&gt;è§‚å¯Ÿä¸€æ®µæ—¶é—´å†…çš„å˜åŒ–é‡æˆ–å¢é•¿ç‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨æ–¹æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šæ—¶é‡‡æ ·å·®å€¼&lt;/strong&gt;ï¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆå¦‚ 60 ç§’ï¼‰æŸ¥è¯¢ä¸€æ¬¡çŠ¶æ€å˜é‡ï¼Œè®¡ç®—ä¸ä¸Šä¸€æ¬¡çš„å·®å€¼ã€‚è¿™æ ·å¯ä»¥äº†è§£è¯¥æ—¶é—´æ®µå†…çš„ç³»ç»Ÿæ´»åŠ¨æƒ…å†µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¬¬ä¸€æ¬¡æŸ¥è¯¢
SHOW GLOBAL STATUS LIKE &amp;#39;Questions&amp;#39;;
-- ç­‰å¾…60ç§’åç¬¬äºŒæ¬¡æŸ¥è¯¢
SHOW GLOBAL STATUS LIKE &amp;#39;Questions&amp;#39;;
-- ç”¨ç¬¬äºŒæ¬¡çš„å€¼å‡å»ç¬¬ä¸€æ¬¡çš„å€¼ï¼Œå†é™¤ä»¥æ—¶é—´é—´éš”ï¼Œå³å¯å¾—åˆ°å¹³å‡æ¯ç§’æŸ¥è¯¢é‡ï¼ˆQPSï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡ç‚¹å…³æ³¨æ¯”ç‡&lt;/strong&gt;ï¼šè®¸å¤šæ¯”ç‡æ€§çš„æŒ‡æ ‡æ¯”å•çº¯çš„è®¡æ•°å™¨æ›´èƒ½è¯´æ˜é—®é¢˜ï¼Œä¾‹å¦‚ä¸Šé¢è¡¨æ ¼ä¸­æåˆ°çš„ &lt;strong&gt;InnoDB ç¼“å†²æ± å‘½ä¸­ç‡&lt;/strong&gt;ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯&lt;strong&gt;æ¯ç§’æŸ¥è¯¢é‡ï¼ˆQPSï¼‰&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡è®¡ç®— &lt;code&gt;Questions&lt;/code&gt;æˆ– &lt;code&gt;Queries&lt;/code&gt;åœ¨å•ä½æ—¶é—´å†…çš„å·®å€¼æ¥å¾—åˆ°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“åˆå…¶ä»–å·¥å…·&lt;/strong&gt;ï¼š&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;æä¾›äº†ä¸€ä¸ªå®è§‚çš„è§†è§’ã€‚è¦æ·±å…¥åˆ†æå…·ä½“é—®é¢˜ï¼Œé€šå¸¸éœ€è¦ç»“åˆ &lt;strong&gt;æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆSlow Query Logï¼‰&lt;/strong&gt;ã€&lt;strong&gt;EXPLAIN&lt;/strong&gt; å‘½ä»¤åˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼Œä»¥åŠ &lt;strong&gt;Performance Schema&lt;/strong&gt; ç­‰æ›´ç»†è‡´çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼š&lt;code&gt;GLOBAL&lt;/code&gt;å…³é”®å­—è¡¨ç¤ºæŸ¥çœ‹å…¨å±€èŒƒå›´çš„çŠ¶æ€ï¼ˆè‡ªæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥æ‰€æœ‰è¿æ¥æ´»åŠ¨çš„ç»Ÿè®¡æ±‡æ€»ï¼‰ã€‚å¦‚æœä½¿ç”¨ &lt;code&gt;SESSION&lt;/code&gt;æˆ–çœç•¥ä½œç”¨åŸŸï¼Œåˆ™æ˜¾ç¤ºçš„æ˜¯&lt;strong&gt;å½“å‰ä¼šè¯&lt;/strong&gt;çš„çŠ¶æ€ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ€§&lt;/strong&gt;ï¼šçŠ¶æ€å˜é‡æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„ç»“æœåæ˜ çš„æ˜¯&lt;strong&gt;å½“å‰æ—¶åˆ»çš„ç´¯ç§¯å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡ç½®&lt;/strong&gt;ï¼šç»å¤§å¤šæ•°çŠ¶æ€å˜é‡&lt;strong&gt;åªèƒ½åœ¨æœåŠ¡å™¨é‡å¯åé‡ç½®&lt;/strong&gt;ã€‚ä½†æœ‰äº›å˜é‡å¯ä»¥é€šè¿‡æ‰§è¡Œ &lt;strong&gt;&lt;code&gt;FLUSH STATUS;&lt;/code&gt;&lt;/strong&gt; è¯­å¥é‡ç½®ä¸ºå½“å‰å€¼ï¼ˆæ³¨æ„ï¼šå¹¶éå½’é›¶ï¼Œè€Œæ˜¯ä»¥å½“å‰å€¼ä¸ºæ–°èµ·ç‚¹ç»§ç»­ç´¯ç§¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼š&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;è¯­å¥æœ¬èº«ä¼šä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ä¸´æ—¶è¡¨ï¼Œå¹¶ä¼šå¢åŠ  &lt;code&gt;Created_tmp_tables&lt;/code&gt;çš„å…¨å±€å€¼ã€‚ä½†å…¶å¼€é”€é€šå¸¸å¾ˆå°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¥æº&lt;/strong&gt;ï¼šåœ¨ MySQL 5.7 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;çš„å®ç°å®é™…ä¸Šæ˜¯é€šè¿‡æŸ¥è¯¢ &lt;code&gt;performance_schema.global_status&lt;/code&gt;è¡¨æ¥è·å–æ•°æ®çš„ã€‚ä½†ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œç›´æ¥æŸ¥è¯¢ &lt;code&gt;performance_schema.global_status&lt;/code&gt;è¡¨è¿”å›çš„å˜é‡æ•°é‡å¯èƒ½å°‘äº &lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;ï¼Œè¿™é€šå¸¸æ˜¯å› ä¸ºä¸€äº› Com ç›¸å…³çš„å˜é‡åœ¨é &lt;code&gt;SHOW&lt;/code&gt;å‘½ä»¤æŸ¥è¯¢æ—¶è¢«è¿‡æ»¤æ‰äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE&lt;/code&gt;æ˜¯å¿«é€Ÿäº†è§£ MySQL æœåŠ¡å™¨æ•´ä½“è¿è¡ŒçŠ¶å†µå’Œæ€§èƒ½è¡¨ç°çš„å…¥å£ã€‚è¦çœŸæ­£å‘æŒ¥å…¶ä½œç”¨ï¼Œéœ€è¦ä½ å®šæœŸæ•è·è¿™äº›æ•°æ®å¹¶è¿›è¡Œåˆ†æï¼Œä»è€Œå‘ç°æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆæˆ–å¼‚å¸¸ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;SHOW GLOBAL STATUS LIKE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="åˆ›å»ºç´¢å¼•"&gt;åˆ›å»ºç´¢å¼•
&lt;/h2&gt;&lt;p&gt;CREATE [UNIQUE] INDEX index_name ON table_name (column_name)&lt;/p&gt;
&lt;h2 id="to_days"&gt;TO_DAYS
&lt;/h2&gt;&lt;p&gt;TO_DAYS() æ˜¯ MySQL ä¸­ä¸€ä¸ªå®ç”¨çš„æ—¥æœŸå‡½æ•°ï¼Œä¸»è¦ç”¨äºå°†æ—¥æœŸè½¬æ¢ä¸ºä¸€ä¸ªè¡¨ç¤ºå¤©æ•°çš„æ•´æ•°å€¼ï¼Œä»¥ä¾¿è¿›è¡Œæ—¥æœŸæ¯”è¾ƒå’Œè®¡ç®—ã€‚ä¸‹é¢æ˜¯å…³äºå®ƒçš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æŒ‡å®šæ—¥æœŸè½¬æ¢ä¸º&lt;strong&gt;è·ç¦»å…¬å…ƒ0å¹´1æœˆ1æ—¥ï¼ˆ0000-01-01ï¼‰çš„å¤©æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TO_DAYS(date)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°è¯´æ˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;date&lt;/code&gt;: è¦è½¬æ¢çš„æ—¥æœŸå€¼ï¼Œå¯ä»¥æ˜¯ &lt;strong&gt;DATE&lt;/strong&gt;ã€&lt;strong&gt;DATETIME&lt;/strong&gt; ç±»å‹æˆ–ç¬¦åˆæ ¼å¼çš„&lt;strong&gt;æ—¥æœŸå­—ç¬¦ä¸²&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;æ•´æ•°&lt;/strong&gt;ï¼Œä»£è¡¨ä»å…¬å…ƒ0å¹´1æœˆ1æ—¥åˆ°ç»™å®šæ—¥æœŸç»è¿‡çš„æ€»å¤©æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¥æœŸæ ¼å¼éœ€æœ‰æ•ˆï¼Œå¦åˆ™å¯èƒ½è¿”å› &lt;strong&gt;NULL&lt;/strong&gt; æˆ–æŠ¥é”™ã€‚å¯¹ &lt;strong&gt;DATETIME&lt;/strong&gt; ç±»å‹ï¼Œå‡½æ•°ä¼šè‡ªåŠ¨å¿½ç•¥æ—¶é—´éƒ¨åˆ†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬ç”¨æ³•ä¸ç¤ºä¾‹"&gt;ğŸ“Š åŸºæœ¬ç”¨æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. è½¬æ¢å•ä¸ªæ—¥æœŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT TO_DAYS(&amp;#39;2023-07-12&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼š&lt;code&gt;739078&lt;/code&gt;(è¡¨ç¤º &amp;lsquo;2023-07-12&amp;rsquo; è·ç¦»å…¬å…ƒ0å¹´1æœˆ1æ—¥æœ‰ 739078 å¤©)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. è®¡ç®—æ—¥æœŸå·®å€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´ç›¸å·®çš„å¤©æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT TO_DAYS(&amp;#39;2023-07-12&amp;#39;) - TO_DAYS(&amp;#39;2023-07-01&amp;#39;) AS day_difference;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼š&lt;code&gt;11&lt;/code&gt;(è¡¨ç¤ºä¸¤ä¸ªæ—¥æœŸç›¸å·®11å¤©)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥æ‰¾æŒ‡å®šæ—¥æœŸä¹‹åçš„è®¢å•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM orders
WHERE TO_DAYS(order_date) &amp;gt; TO_DAYS(&amp;#39;2022-01-02&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-5"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸæœ‰æ•ˆæ€§&lt;/strong&gt;ï¼šä¼ å…¥çš„æ—¥æœŸå¿…é¡»æ˜¯MySQLèƒ½è¯†åˆ«çš„æœ‰æ•ˆæ—¥æœŸæ ¼å¼ï¼Œå¦åˆ™å‡½æ•°å¯èƒ½è¿”å› &lt;code&gt;NULL&lt;/code&gt;æˆ–äº§ç”Ÿé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå°è¯•è½¬æ¢æ— æ•ˆæ—¥æœŸ &amp;lsquo;0000-00-00&amp;rsquo; æˆ– &amp;lsquo;0000-01-01&amp;rsquo; ä¼šå¯¼è‡´é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸèŒƒå›´&lt;/strong&gt;ï¼šTO_DAYS() é€‚ç”¨äºMySQLæ”¯æŒçš„æ—¥æœŸèŒƒå›´ï¼ˆçº¦å…¬å…ƒ1000-01-01è‡³9999-12-31ï¼‰ï¼Œè¶…å‡ºæ­¤èŒƒå›´çš„æ—¥æœŸå¯èƒ½æ— æ³•å‡†ç¡®è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†æ³•è§„åˆ™&lt;/strong&gt;ï¼šTO_DAYS() å‡½æ•°çš„è®¡ç®—åŸºäº&lt;strong&gt;å…¬å†ï¼ˆæ ¼é‡Œé«˜åˆ©å†ï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´éƒ¨åˆ†å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœå‚æ•°æ˜¯ DATETIME æˆ– TIMESTAMP ç±»å‹ï¼Œ&lt;strong&gt;TO_DAYS() ä¼šè‡ªåŠ¨å¿½ç•¥æ—¶é—´éƒ¨åˆ†&lt;/strong&gt;ï¼Œåªæ ¹æ®æ—¥æœŸéƒ¨åˆ†è¿›è¡Œè®¡ç®—ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–æ—¥æœŸå‡½æ•°çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ—¥æœŸå‡½æ•°çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;TO_DAYS() ä¸“æ³¨äºå°†æ—¥æœŸè½¬æ¢ä¸ºç»å¯¹å¤©æ•°ï¼Œé€‚ç”¨äºè®¡ç®—ç»å¯¹å·®å€¼ã€‚MySQLè¿˜æä¾›äº†å…¶ä»–æ—¥æœŸå‡½æ•°ç”¨äºä¸åŒåœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°å&lt;/th&gt;
&lt;th&gt;ä½œç”¨æè¿°&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DATEDIFF()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATEDIFF('2023-07-12', '2023-07-01');&lt;/code&gt;â†’ &lt;code&gt;11&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DATE_ADD()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ—¥æœŸæ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATE_ADD('2023-07-01', INTERVAL 11 DAY);&lt;/code&gt;â†’ &lt;code&gt;'2023-07-12'&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DAYOFWEEK()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ˜¯æ˜ŸæœŸå‡ ï¼ˆ1=å‘¨æ—¥, 2=å‘¨ä¸€, &amp;hellip;, 7=å‘¨å…­ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DAYOFWEEK('2023-07-12');&lt;/code&gt;â†’ &lt;code&gt;4&lt;/code&gt;(å‘¨ä¸‰)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DAYOFYEAR()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ˜¯è¯¥å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼ˆ1-366ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DAYOFYEAR('2023-07-12');&lt;/code&gt;â†’ &lt;code&gt;193&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-1"&gt;ğŸ’¡ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—æ—¥æœŸå·®å€¼&lt;/strong&gt;ï¼šè¿™æ˜¯ TO_DAYS() æœ€å¸¸è§çš„ç”¨é€”ï¼Œä¾‹å¦‚è®¡ç®—è®¢å•å¤„ç†æ—¶é•¿ã€ç”¨æˆ·å¹´é¾„ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸèŒƒå›´è¿‡æ»¤&lt;/strong&gt;ï¼šåœ¨ WHERE å­å¥ä¸­åŸºäºå¤©æ•°è¿›è¡Œæ—¥æœŸæ¯”è¾ƒå’Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–æ—¥æœŸè®¡ç®—&lt;/strong&gt;ï¼šå°†æ—¥æœŸè½¬æ¢ä¸ºå¤©æ•°åï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ‰§è¡Œå„ç§ç®—æœ¯è¿ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;TO_DAYS() å‡½æ•°é€šè¿‡å°†æ—¥æœŸè½¬æ¢ä¸ºè‡ªå›ºå®šèµ·ç‚¹ï¼ˆ0000-01-01ï¼‰ä»¥æ¥çš„å¤©æ•°ï¼Œä¸º&lt;strong&gt;æ—¥æœŸæ¯”è¾ƒå’Œå·®å€¼è®¡ç®—&lt;/strong&gt;æä¾›äº†å¾ˆå¤§ä¾¿åˆ©ã€‚å®ƒåœ¨å¤„ç†éœ€è¦è®¡ç®—ç»å¯¹å¤©æ•°çš„åœºæ™¯æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQL 5.6+ çš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;strong&gt;DATEDIFF()&lt;/strong&gt; å‡½æ•°ä¹Ÿèƒ½ç›´æ¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®ï¼Œå¹¶ä¸”è¯­æ³•æ›´ç®€æ´ã€‚åœ¨é€‰æ‹©ä½¿ç”¨ TO_DAYS() è¿˜æ˜¯ DATEDIFF() æ—¶ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å’Œä»£ç æ¸…æ™°åº¦æ¥å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ TO_DAYS() å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="åˆ†åŒº"&gt;åˆ†åŒº
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„åˆ†åŒºè¡¨åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ å°†ä¸€å¼ å¤§è¡¨çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªç‰©ç†å­˜å‚¨å•å…ƒï¼ˆåˆ†åŒºï¼‰ä¸­ï¼Œä½†åœ¨é€»è¾‘ä¸Šä»ä¿æŒä¸ºä¸€å¼ è¡¨ã€‚é™¤äº† &lt;strong&gt;RANGE&lt;/strong&gt; åˆ†åŒºï¼ŒMySQL è¿˜æ”¯æŒå…¶ä»–å‡ ç§åˆ†åŒºç±»å‹ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„æ¦‚è§ˆè¡¨æ ¼ï¼Œå¸®åŠ©ä½ ç›´è§‚åœ°äº†è§£ MySQL çš„ä¸»è¦åˆ†åŒºç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†åŒºç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RANGE&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºç»™å®š&lt;strong&gt;è¿ç»­åŒºé—´&lt;/strong&gt;çš„åˆ—å€¼è¿›è¡Œåˆ’åˆ†&lt;/td&gt;
&lt;td&gt;æ—¶é—´åºåˆ—æ•°æ®ï¼ˆå¦‚æŒ‰å¹´ã€æœˆåˆ†åŒºï¼‰ã€æ•°å€¼èŒƒå›´ï¼ˆå¦‚æŒ‰é‡‘é¢ã€å¹´é¾„åˆ†åŒºï¼‰&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿæ–¹å¼è¦æ±‚åˆ†åŒºè¡¨è¾¾å¼æœ€ç»ˆè®¡ç®—å‡ºä¸€ä¸ª&lt;strong&gt;æ•´æ•°å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LIST&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºåˆ—çš„&lt;strong&gt;ç¦»æ•£å€¼åˆ—è¡¨&lt;/strong&gt;è¿›è¡Œåˆ’åˆ†&lt;/td&gt;
&lt;td&gt;å…·æœ‰æ˜ç¡®åˆ†ç±»çš„æ•°æ®ï¼ˆå¦‚æŒ‰åœ°åŒºã€çŠ¶æ€ç ã€éƒ¨é—¨IDåˆ†åŒºï¼‰&lt;/td&gt;
&lt;td&gt;æ’å…¥çš„å€¼å¿…é¡»å±äºæŸä¸ªå·²å®šä¹‰çš„åˆ†åŒºåˆ—è¡¨ï¼Œå¦åˆ™ä¼šå¤±è´¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;HASH&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®ç”¨æˆ·å®šä¹‰è¡¨è¾¾å¼çš„&lt;strong&gt;å“ˆå¸Œå€¼&lt;/strong&gt;å‡åŒ€åˆ†å¸ƒæ•°æ®&lt;/td&gt;
&lt;td&gt;æ—¨åœ¨&lt;strong&gt;å‡åŒ€åˆ†å¸ƒæ•°æ®&lt;/strong&gt;ï¼Œé¿å…çƒ­ç‚¹ï¼Œæ— ç‰¹å®šä¸šåŠ¡é€»è¾‘å€¾å‘&lt;/td&gt;
&lt;td&gt;é€šå¸¸åªéœ€æŒ‡å®šåˆ†åŒº&lt;strong&gt;æ•°é‡&lt;/strong&gt;ï¼ŒMySQL ä¼šè®¡ç®—å“ˆå¸Œå¹¶å–æ¨¡æ¥å†³å®šæ•°æ®å­˜æ”¾çš„åˆ†åŒº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;KEY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼äº HASH åˆ†åŒºï¼Œä½†ä½¿ç”¨ MySQL &lt;strong&gt;å†…ç½®çš„å“ˆå¸Œå‡½æ•°&lt;/strong&gt;ï¼ˆåŸºäº PASSWORD() ç®—æ³•ï¼‰ï¼Œä¸”åˆ†åŒºé”®å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—&lt;/td&gt;
&lt;td&gt;ç®€åŒ–é…ç½®ï¼Œå½“æ²¡æœ‰æ˜æ˜¾åˆ†åŒºé”®æˆ–æƒ³åŸºäºè¡¨çš„ä¸»é”®è¿›è¡Œå‡åŒ€åˆ†å¸ƒæ—¶&lt;/td&gt;
&lt;td&gt;è‹¥åˆ†åŒºé”®æœªæ˜¾å¼æŒ‡å®šï¼Œä¸”è¡¨å­˜åœ¨ä¸»é”®ï¼Œåˆ™&lt;strong&gt;é»˜è®¤ä½¿ç”¨ä¸»é”®&lt;/strong&gt;ä½œä¸ºåˆ†åŒºé”®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆä¼ ç»Ÿrange-åˆ†åŒºè¦æ±‚æ˜¯æ•´æ•°"&gt;ğŸ“Œ ä¸ºä»€ä¹ˆï¼ˆä¼ ç»Ÿï¼‰RANGE åˆ†åŒºè¦æ±‚æ˜¯æ•´æ•°ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä¼ ç»Ÿçš„ &lt;code&gt;RANGE&lt;/code&gt;åˆ†åŒºæœ‰ä¸€ä¸ªå…³é”®è¦æ±‚ï¼š&lt;strong&gt;åˆ†åŒºè¡¨è¾¾å¼å¿…é¡»è¿”å›ä¸€ä¸ªæ•´æ•°å€¼&lt;/strong&gt;ï¼ˆæˆ–è€…èƒ½è¢«è®¡ç®—æˆ–è½¬æ¢ä¸ºæ•´æ•°å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™èƒŒåçš„ä¸»è¦åŸå› ä¸ &lt;strong&gt;MySQL å†…éƒ¨éœ€è¦å¿«é€Ÿã€æ˜ç¡®åœ°æ¯”è¾ƒå’Œåˆ’åˆ†æ•°æ®èŒƒå›´&lt;/strong&gt; çš„æœºåˆ¶æœ‰å…³ã€‚æ•´æ•°åœ¨è®¡ç®—å’Œæ¯”è¾ƒæ—¶éå¸¸é«˜æ•ˆï¼Œèƒ½å¤Ÿæ¸…æ™°åœ°å®šä¹‰â€œå°äºâ€æˆ–â€œå¤§äºâ€çš„è¾¹ç•Œï¼ˆä¾‹å¦‚ &lt;code&gt;VALUES LESS THAN (10)&lt;/code&gt;ï¼‰ã€‚è¿™ç§æ˜ç¡®çš„æ¯”è¾ƒæ˜¯èŒƒå›´åˆ’åˆ†çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ»¡è¶³è¿™ä¸ªè¦æ±‚ï¼Œå½“ä½ æƒ³è¦åŸºäº&lt;strong&gt;æ—¥æœŸ&lt;/strong&gt;æˆ–&lt;strong&gt;æ—¶é—´&lt;/strong&gt;è¿™ç±»éæ•´æ•°å­—æ®µè¿›è¡Œ &lt;code&gt;RANGE&lt;/code&gt;åˆ†åŒºæ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ç‰¹å®šçš„å‡½æ•°å°†å…¶è½¬æ¢ä¸ºæ•´æ•°ã€‚MySQL ä¼˜åŒ–å™¨å¯¹æ­¤æœ‰æ˜ç¡®æ”¯æŒï¼Œå¸¸ç”¨çš„å‡½æ•°åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;YEAR()&lt;/code&gt;: æå–å¹´ä»½ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PARTITION BY RANGE ( YEAR(sale_date) )
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;TO_DAYS()&lt;/code&gt;: å°†æ—¥æœŸè½¬æ¢ä¸ºè‡ªå…¬å…ƒ0å¹´1æœˆ1æ—¥ä»¥æ¥çš„å¤©æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PARTITION BY RANGE ( TO_DAYS(sale_date) )
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;UNIX_TIMESTAMP()&lt;/code&gt;: å°†æ—¥æœŸæ—¶é—´è½¬æ¢ä¸ºè‡ª &amp;lsquo;1970-01-01 00:00:00&amp;rsquo; UTC ä»¥æ¥çš„ç§’æ•°ï¼ˆæ—¶é—´æˆ³ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PARTITION BY RANGE ( UNIX_TIMESTAMP(created_at) )
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-range-columns-åˆ†åŒºå¯¹ä¼ ç»Ÿ-range-åˆ†åŒºçš„æ‰©å±•"&gt;ğŸ”„ RANGE COLUMNS åˆ†åŒºï¼šå¯¹ä¼ ç»Ÿ RANGE åˆ†åŒºçš„æ‰©å±•
&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ è§‰å¾—æ¯æ¬¡éƒ½è¦ç”¨å‡½æ•°è½¬æ¢å¾ˆéº»çƒ¦ï¼Œæˆ–è€…å°±æ˜¯æƒ³ç›´æ¥ç”¨éæ•´æ•°ç±»å‹ï¼ˆå¦‚ &lt;code&gt;DATE&lt;/code&gt;, &lt;code&gt;DATETIME&lt;/code&gt;, &lt;code&gt;CHAR&lt;/code&gt;, &lt;code&gt;VARCHAR&lt;/code&gt;ï¼‰çš„åˆ—è¿›è¡ŒèŒƒå›´åˆ†åŒºï¼ŒMySQL æä¾›äº† &lt;strong&gt;&lt;code&gt;RANGE COLUMNS&lt;/code&gt;&lt;/strong&gt; åˆ†åŒºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RANGE COLUMNS&lt;/code&gt;å…è®¸ä½ &lt;strong&gt;ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—&lt;/strong&gt;æ¥è¿›è¡ŒèŒƒå›´åˆ’åˆ†ï¼Œè€Œæ— éœ€å°†å…¶è½¬æ¢ä¸ºæ•´æ•°ã€‚å®ƒåœ¨åº•å±‚ç›´æ¥æ¯”è¾ƒåˆ—çš„å®é™…å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ï¼šç›´æ¥ä½¿ç”¨ &lt;code&gt;DATE&lt;/code&gt;åˆ—è¿›è¡Œ &lt;code&gt;RANGE COLUMNS&lt;/code&gt;åˆ†åŒº&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE sales (
id INT NOT NULL,
sale_date DATE NOT NULL,
amount DECIMAL(10, 2)
)
PARTITION BY RANGE COLUMNS(sale_date) (
PARTITION p2023_q1 VALUES LESS THAN (&amp;#39;2023-04-01&amp;#39;),
PARTITION p2023_q2 VALUES LESS THAN (&amp;#39;2023-07-01&amp;#39;),
PARTITION p2023_q3 VALUES LESS THAN (&amp;#39;2023-10-01&amp;#39;),
PARTITION p2023_q4 VALUES LESS THAN (&amp;#39;2024-01-01&amp;#39;),
PARTITION p_future VALUES LESS THAN (MAXVALUE)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ &lt;code&gt;sale_date&lt;/code&gt;è¿™ä¸ª &lt;code&gt;DATE&lt;/code&gt;ç±»å‹çš„åˆ—æ¥å®šä¹‰åˆ†åŒºèŒƒå›´ï¼Œè¯­æ³•æ›´ç›´è§‚æ˜“æ‡‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;RANGE&lt;/code&gt;ä¸ &lt;code&gt;RANGE COLUMNS&lt;/code&gt;çš„ä¸»è¦åŒºåˆ«&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;RANGE&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;RANGE COLUMNS&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†åŒºé”®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºè¡¨è¾¾å¼ï¼ˆå¦‚ &lt;code&gt;YEAR(date_col)&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—åç›´æ¥æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒçš„æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨è¾¾å¼æœ€ç»ˆé¡»ä¸ºæ•´æ•°&lt;/td&gt;
&lt;td&gt;æ”¯æŒæ•´æ•°ã€å­—ç¬¦ä¸²ã€æ—¥æœŸæ—¶é—´ç­‰å¤šç§ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šåˆ—åˆ†åŒº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åˆ†åŒºç±»å‹"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©åˆ†åŒºç±»å‹
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§åˆ†åŒºæ–¹å¼ä¸»è¦å–å†³äºä½ çš„&lt;strong&gt;ä¸šåŠ¡éœ€æ±‚å’Œæ•°æ®è®¿é—®æ¨¡å¼&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢å’Œå½’æ¡£&lt;/strong&gt;ï¼š&lt;code&gt;RANGE&lt;/code&gt;æˆ– &lt;code&gt;RANGE COLUMNS&lt;/code&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;sale_date&lt;/code&gt;ï¼‰æ˜¯é¦–é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰ç±»åˆ«ç®¡ç†æ•°æ®&lt;/strong&gt;ï¼š&lt;code&gt;LIST&lt;/code&gt;åˆ†åŒºï¼ˆä¾‹å¦‚ &lt;code&gt;region&lt;/code&gt;æˆ– &lt;code&gt;product_category&lt;/code&gt;ï¼‰æ›´åˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºäº†å‡åŒ€åˆ†å¸ƒæ•°æ®ï¼Œæé«˜å¹¶è¡Œæ€§èƒ½&lt;/strong&gt;ï¼š&lt;code&gt;HASH&lt;/code&gt;æˆ– &lt;code&gt;KEY&lt;/code&gt;åˆ†åŒºï¼ˆä¾‹å¦‚ &lt;code&gt;user_id&lt;/code&gt;ï¼‰æ˜¯å¸¸è§é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åˆ†åŒºè¡¨çš„é€šç”¨é™åˆ¶"&gt;âš ï¸ åˆ†åŒºè¡¨çš„é€šç”¨é™åˆ¶
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ä»»ä½•åˆ†åŒºç±»å‹æ—¶ï¼Œéƒ½éœ€è¦æ³¨æ„ä¸€äº›é€šç”¨é™åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºé”®ä¸ä¸»é”®&lt;/strong&gt;ï¼šå¦‚æœè¡¨æœ‰ä¸»é”®ï¼Œ&lt;strong&gt;åˆ†åŒºé”®å¿…é¡»æ˜¯ä¸»é”®çš„ä¸€éƒ¨åˆ†&lt;/strong&gt;ï¼Œæˆ–è€…ä¸»é”®æœ¬èº«å¿…é¡»åŒ…å«åˆ†åŒºé”®ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿ä¸€è¡Œæ•°æ®èƒ½å”¯ä¸€åœ°ç¡®å®šå±äºå“ªä¸ªåˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–é”®çº¦æŸ&lt;/strong&gt;ï¼šåˆ†åŒºè¡¨&lt;strong&gt;ä¸æ”¯æŒå¤–é”®çº¦æŸ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“&lt;/strong&gt;ï¼šæ‰€æœ‰åˆ†åŒºå¿…é¡»ä½¿ç”¨&lt;strong&gt;ç›¸åŒçš„å­˜å‚¨å¼•æ“&lt;/strong&gt;ï¼ˆä¾‹å¦‚å…¨éƒ¨æ˜¯ InnoDBï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼šåˆ†åŒºè¡¨&lt;strong&gt;ä¸æ”¯æŒå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼ˆFULLTEXT indexï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ MySQL çš„åˆ†åŒºåŠŸèƒ½ï¼Œå¹¶ä¸ºä½ çš„æ•°æ®åº“è®¾è®¡åšå‡ºåˆé€‚çš„å†³ç­–ã€‚&lt;/p&gt;
&lt;h2 id="sql-æ‰§è¡Œé¡ºåº"&gt;SQL æ‰§è¡Œé¡ºåº
&lt;/h2&gt;&lt;p&gt;ç†è§£ MySQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œèƒ½å¸®ä½ å†™å‡ºæ›´é«˜æ•ˆç‡ã€æ›´å‡†ç¡®çš„ SQLï¼Œå°¤å…¶åœ¨ä¼˜åŒ–æŸ¥è¯¢å’Œæ’é™¤é”™è¯¯æ—¶éå¸¸æœ‰ç”¨ã€‚è™½ç„¶æˆ‘ä»¬å†™ SQL æ—¶æ˜¯æŒ‰ &lt;code&gt;SELECT -&amp;gt; FROM -&amp;gt; WHERE -&amp;gt; GROUP BY -&amp;gt; HAVING -&amp;gt; ORDER BY -&amp;gt; LIMIT&lt;/code&gt;çš„é€»è¾‘æ¥å†™ï¼Œä½† MySQL æ‰§è¡Œå®ƒä»¬çš„é¡ºåºå´å¾ˆä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ MySQL æŸ¥è¯¢ä¸­å„ä¸ªå…³é”®å­—çš„&lt;strong&gt;é€»è¾‘æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿæ¦‚è§ˆï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é¡ºåº&lt;/th&gt;
&lt;th&gt;å…³é”®å­—/é˜¶æ®µ&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä½œç”¨&lt;/th&gt;
&lt;th&gt;å¯ä½¿ç”¨çš„é˜¶æ®µ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;FROM&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®å®šæŸ¥è¯¢çš„ä¸»è¦è¡¨ï¼Œå¹¶åŠ è½½æ•°æ®&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥å…¶ä»–è¡¨ï¼Œæ ¹æ®ONæ¡ä»¶ç”Ÿæˆä¸­é—´ç»“æœ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ON&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ç”¨JOINçš„è¿æ¥æ¡ä»¶ï¼Œè¿‡æ»¤ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;WHERE&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è¡Œæ•°æ®è¿›è¡Œè¿‡æ»¤&lt;/td&gt;
&lt;td&gt;ä¸èƒ½ä½¿ç”¨SELECTä¸­çš„åˆ«å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è¿‡æ»¤åçš„æ•°æ®è¿›è¡Œåˆ†ç»„&lt;/td&gt;
&lt;td&gt;ä¸èƒ½ä½¿ç”¨SELECTä¸­çš„åˆ«å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;HAVING&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹åˆ†ç»„åçš„ç»„è¿›è¡Œè¿‡æ»¤&lt;/td&gt;
&lt;td&gt;å¯ä½¿ç”¨èšåˆå‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;SELECT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€‰æ‹©è¦è¿”å›çš„åˆ—ã€è®¡ç®—è¡¨è¾¾å¼ã€æŒ‡å®šåˆ«å&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å»é™¤ç»“æœä¸­çš„é‡å¤è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æœ€ç»ˆç»“æœé›†è¿›è¡Œæ’åº&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥ä½¿ç”¨&lt;/strong&gt;SELECTä¸­çš„åˆ«å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;LIMIT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™åˆ¶è¿”å›ç»“æœçš„è¡Œæ•°ï¼ˆåˆ†é¡µï¼‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;ç®€è¦è®°å¿†å£è¯€&lt;/strong&gt;ï¼š&lt;strong&gt;F&lt;/strong&gt;rom -&amp;gt; &lt;strong&gt;J&lt;/strong&gt;oin -&amp;gt; &lt;strong&gt;O&lt;/strong&gt;n -&amp;gt; &lt;strong&gt;W&lt;/strong&gt;here -&amp;gt; &lt;strong&gt;G&lt;/strong&gt;roup by -&amp;gt; &lt;strong&gt;H&lt;/strong&gt;aving -&amp;gt; &lt;strong&gt;S&lt;/strong&gt;elect -&amp;gt; &lt;strong&gt;D&lt;/strong&gt;istinct -&amp;gt; &lt;strong&gt;O&lt;/strong&gt;rder by -&amp;gt; &lt;strong&gt;L&lt;/strong&gt;imit ï¼ˆå¯è®°ä¸ºâ€œF-J-O-W-G-H-S-D-O-Lâ€ï¼‰&lt;/p&gt;
&lt;h3 id="è¯¦ç»†é˜¶æ®µè§£æ"&gt;è¯¦ç»†é˜¶æ®µè§£æ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;FROM å’Œ JOIN&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æŸ¥è¯¢çš„èµ·ç‚¹ã€‚MySQL é¦–å…ˆç¡®å®šè¦ä»å“ªäº›è¡¨è·å–æ•°æ®ï¼ˆ&lt;code&gt;FROM&lt;/code&gt;å­å¥ï¼‰ï¼Œç„¶åæ ¹æ®&lt;code&gt;JOIN&lt;/code&gt;ç±»å‹ï¼ˆå¦‚ &lt;code&gt;LEFT JOIN&lt;/code&gt;, &lt;code&gt;INNER JOIN&lt;/code&gt;ï¼‰å’Œ&lt;code&gt;ON&lt;/code&gt;æ¡ä»¶è¿æ¥è¿™äº›è¡¨ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸ä¼šå…ˆäº§ç”Ÿä¸€ä¸ªç¬›å¡å°”ç§¯ï¼Œç„¶åç”¨&lt;code&gt;ON&lt;/code&gt;æ¡ä»¶è¿›è¡Œè¿‡æ»¤ï¼Œç”Ÿæˆç¬¬ä¸€å¼ è™šæ‹Ÿä¸­é—´è¡¨ï¼ˆVT1ï¼‰ã€‚&lt;strong&gt;å¤šè¡¨è¿æ¥æ—¶ï¼Œä¼šé‡å¤è¿™ä¸ªè¿‡ç¨‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ON&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åº”ç”¨&lt;code&gt;JOIN&lt;/code&gt;æ¡ä»¶ï¼Œè¿‡æ»¤æ‰ä¸æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT2ã€‚å¯¹äº&lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼Œå¦‚æœå³è¡¨æ— åŒ¹é…è¡Œï¼Œåˆ™ä¼šç”¨&lt;code&gt;NULL&lt;/code&gt;å¡«å……å³è¡¨åˆ—ï¼Œä½†å·¦è¡¨è®°å½•ä»ä¼šä¿ç•™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;WHERE&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹VT2ä¸­çš„&lt;strong&gt;æ¯ä¸€è¡Œ&lt;/strong&gt;æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚åªæœ‰æ»¡è¶³&lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶çš„è¡Œæ‰ä¼šè¿›å…¥ä¸‹ä¸€æ­¥ã€‚&lt;strong&gt;è¿™é‡Œä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;SUM&lt;/code&gt;ï¼‰ï¼Œå› ä¸ºå®ƒä½œç”¨äºåˆ†ç»„å‰çš„å•è¡Œè®°å½•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†&lt;code&gt;WHERE&lt;/code&gt;è¿‡æ»¤åçš„æ•°æ®ï¼ˆVT3ï¼‰æŒ‰ç…§æŒ‡å®šçš„åˆ—è¿›è¡Œåˆ†ç»„ã€‚æ¯ç»„ä¼šç”Ÿæˆä¸€è¡Œè®°å½•ï¼Œä¸ºåç»­çš„èšåˆè®¡ç®—ï¼ˆå¦‚&lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;AVG&lt;/code&gt;ï¼‰åšå‡†å¤‡ï¼Œç”ŸæˆVT4ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;HAVING&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹&lt;code&gt;GROUP BY&lt;/code&gt;åˆ†ç»„åçš„ç»“æœï¼ˆVT4ï¼‰è¿›è¡Œè¿‡æ»¤ã€‚&lt;strong&gt;ä¸&lt;code&gt;WHERE&lt;/code&gt;ä¸åŒï¼Œ&lt;code&gt;HAVING&lt;/code&gt;ä½œç”¨äºåˆ†ç»„ï¼ˆç»„çº§è¿‡æ»¤ï¼‰&lt;/strong&gt;ï¼Œå› æ­¤&lt;strong&gt;å¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;HAVING COUNT(*) &amp;gt; 5&lt;/code&gt;ï¼‰ï¼Œç”ŸæˆVT5ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SELECT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¡®å®šæœ€ç»ˆç»“æœé›†è¦åŒ…å«å“ªäº›åˆ—ã€‚å¯ä»¥è®¡ç®—è¡¨è¾¾å¼ï¼ˆå¦‚ &lt;code&gt;salary * 12&lt;/code&gt;ï¼‰ã€ä½¿ç”¨èšåˆå‡½æ•°ï¼Œå¹¶ä¸ºåˆ—æŒ‡å®šåˆ«åã€‚&lt;strong&gt;æ³¨æ„ï¼šåœ¨æ­¤é˜¶æ®µå®šä¹‰çš„åˆ«åï¼Œåœ¨æ­¤å‰çš„é˜¶æ®µï¼ˆå¦‚&lt;code&gt;WHERE&lt;/code&gt;, &lt;code&gt;GROUP BY&lt;/code&gt;ï¼‰ä¸­ä¸å¯ç”¨&lt;/strong&gt;ï¼Œç”ŸæˆVT6ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»SELECTçš„ç»“æœï¼ˆVT6ï¼‰ä¸­å»é™¤é‡å¤çš„è¡Œï¼Œç”ŸæˆVT7ã€‚å¦‚æœæŸ¥è¯¢åŒ…å«äº†&lt;code&gt;GROUP BY&lt;/code&gt;ï¼Œé€šå¸¸å·²ç»å®ç°äº†éšå¼çš„å»é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹å¤„ç†å®Œçš„æ•°æ®ï¼ˆVT7ï¼‰æŒ‰ç…§æŒ‡å®šçš„åˆ—è¿›è¡Œæ’åºï¼ˆå‡åºASCæˆ–é™åºDESCï¼‰ã€‚&lt;strong&gt;è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªå¯ä»¥ä½¿ç”¨&lt;code&gt;SELECT&lt;/code&gt;å­å¥ä¸­å®šä¹‰çš„åˆ«åçš„åœ°æ–¹&lt;/strong&gt;ï¼Œç”Ÿæˆä¸€ä¸ªæœ‰åºçš„è™šæ‹Ÿè¡¨VT8ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;LIMIT / OFFSET&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæ ¹æ®é™åˆ¶æ¡ä»¶è¿”å›æŒ‡å®šæ•°é‡çš„è¡Œï¼ˆä¾‹å¦‚ï¼Œç”¨äºåˆ†é¡µï¼‰ã€‚è¿™æ˜¯æŸ¥è¯¢å¤„ç†çš„æœ€åä¸€æ­¥ï¼Œç”Ÿæˆæœ€ç»ˆçš„VT9å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç¤ºä¾‹è¯´æ˜"&gt;ğŸ“– ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£è¿™ä¸ªé¡ºåºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
department,
COUNT(*) AS emp_count
FROM
employees
WHERE
salary &amp;gt; 6000
GROUP BY
department
HAVING
COUNT(*) &amp;gt; 2
ORDER BY
emp_count DESC
LIMIT 10;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶æ‰§è¡Œé¡ºåºä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FROM employees&lt;/strong&gt;: åŠ è½½å‘˜å·¥è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WHERE salary &amp;gt; 6000&lt;/strong&gt;: è¿‡æ»¤å‡ºå·¥èµ„é«˜äº6000çš„å‘˜å·¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GROUP BY department&lt;/strong&gt;: å°†è¿‡æ»¤åçš„å‘˜å·¥æŒ‰éƒ¨é—¨åˆ†ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HAVING COUNT(*) &amp;gt; 2&lt;/strong&gt;: è¿‡æ»¤å‡ºå‘˜å·¥æ•°é‡å¤§äº2çš„éƒ¨é—¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SELECT department, COUNT(*) AS emp_count&lt;/strong&gt;: é€‰æ‹©éƒ¨é—¨åç§°å’Œè®¡ç®—å‡ºçš„å‘˜å·¥æ•°ï¼Œå¹¶ä¸ºè®¡æ•°ç»“æœèµ·åˆ«å&lt;code&gt;emp_count&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY emp_count DESC&lt;/strong&gt;: ä½¿ç”¨åˆ«å&lt;code&gt;emp_count&lt;/code&gt;å¯¹ç»“æœè¿›è¡Œé™åºæ’åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LIMIT 10&lt;/strong&gt;: è¿”å›å‰10æ¡è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€§èƒ½å»ºè®®å’Œå¸¸è§è¯¯åŒº"&gt;ğŸ’¡ æ€§èƒ½å»ºè®®å’Œå¸¸è§è¯¯åŒº
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å–„ç”¨ WHERE å’Œ HAVING&lt;/strong&gt;ï¼š&lt;strong&gt;å°½å¯èƒ½åœ¨&lt;code&gt;WHERE&lt;/code&gt;é˜¶æ®µè¿‡æ»¤æ‰æ›´å¤šæ•°æ®&lt;/strong&gt;ï¼Œè¿™æ ·èƒ½å‡å°‘&lt;code&gt;GROUP BY&lt;/code&gt;éœ€è¦å¤„ç†çš„æ•°æ®é‡ï¼Œæå‡æ€§èƒ½ã€‚&lt;code&gt;HAVING&lt;/code&gt;åªåº”ç”¨äºæ— æ³•ç”¨&lt;code&gt;WHERE&lt;/code&gt;å®Œæˆçš„ã€é’ˆå¯¹åˆ†ç»„çš„è¿‡æ»¤æ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ«åçš„ä½œç”¨åŸŸ&lt;/strong&gt;ï¼š&lt;code&gt;SELECT&lt;/code&gt;ä¸­å®šä¹‰çš„åˆ«å&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;åœ¨ &lt;code&gt;WHERE&lt;/code&gt;ã€&lt;code&gt;GROUP BY&lt;/code&gt;æˆ– &lt;code&gt;HAVING&lt;/code&gt;ä¸­ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨è¿™äº›é˜¶æ®µä¹‹åæ‰æ‰§è¡Œçš„ã€‚ä½†&lt;strong&gt;å¯ä»¥&lt;/strong&gt;åœ¨ &lt;code&gt;ORDER BY&lt;/code&gt;ä¸­ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ SELECT *&lt;/strong&gt;ï¼šæ˜ç¡®åˆ—å‡ºéœ€è¦çš„åˆ—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨&lt;code&gt;SELECT *&lt;/code&gt;ï¼Œè¿™å¯ä»¥å‡å°‘æ•°æ®ä¼ è¾“é‡å’Œå†…å­˜æ¶ˆè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY å¼€é”€&lt;/strong&gt;ï¼šæ’åºå¯èƒ½æˆæœ¬å¾ˆé«˜ï¼Œå°¤å…¶æ˜¯å¯¹å¤§è¡¨ã€‚å¦‚æœå¯èƒ½ï¼Œå°è¯•é€šè¿‡ç´¢å¼•æ¥ä¼˜åŒ–æ’åºæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LIMIT ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹äºæ·±åº¦åˆ†é¡µï¼ˆå¦‚ &lt;code&gt;LIMIT 100000, 10&lt;/code&gt;ï¼‰ï¼Œé¿å…ä½¿ç”¨å¤§çš„&lt;code&gt;OFFSET&lt;/code&gt;ã€‚å¯ä»¥å°è¯•ç”¨&lt;code&gt;WHERE [ç´¢å¼•åˆ—] &amp;gt; [ä¸Šæ¬¡æœ€å¤§å€¼] ORDER BY [ç´¢å¼•åˆ—] LIMIT 10&lt;/code&gt;çš„æ–¹å¼æ¥ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æŸ¥è¯¢çš„å®Œæ•´æ‰§è¡Œè¿‡ç¨‹"&gt;æŸ¥è¯¢çš„å®Œæ•´æ‰§è¡Œè¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šè¿°çš„é€»è¾‘æ‰§è¡Œé¡ºåºä¸»è¦æ˜¯&lt;strong&gt;ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’åï¼Œæ‰§è¡Œå™¨å¤§è‡´çš„å·¥ä½œæµç¨‹&lt;/strong&gt;ã€‚ä¸€æ¡SQLæŸ¥è¯¢åœ¨MySQLä¸­å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸè¿˜åŒ…æ‹¬æ›´å‰æœŸçš„é˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥å™¨&lt;/strong&gt;ï¼šç®¡ç†å®¢æˆ·ç«¯è¿æ¥ã€èº«ä»½è®¤è¯å’Œæƒé™éªŒè¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢ç¼“å­˜&lt;/strong&gt;ï¼šï¼ˆ&lt;strong&gt;åœ¨MySQL 8.0ä¸­å·²ç§»é™¤&lt;/strong&gt;ï¼‰å¦‚æœå¯ç”¨ï¼Œä¼šå…ˆæ£€æŸ¥æŸ¥è¯¢æ˜¯å¦å®Œå…¨åŒ¹é…ç¼“å­˜ï¼ŒåŒ¹é…åˆ™ç›´æ¥è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æå™¨&lt;/strong&gt;ï¼šè¿›è¡Œè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æï¼Œæ£€æŸ¥SQLè¯­å¥æ˜¯å¦æ­£ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–å™¨&lt;/strong&gt;ï¼š&lt;strong&gt;æ ¸å¿ƒé˜¶æ®µ&lt;/strong&gt;ã€‚æ ¹æ®ç»Ÿè®¡ä¿¡æ¯å’Œå†…éƒ¨ç®—æ³•ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ã€å¤šè¡¨è¿æ¥çš„é¡ºåºç­‰ï¼Œç”Ÿæˆä¸€ä¸ªå®ƒè®¤ä¸ºæœ€é«˜æ•ˆçš„&lt;strong&gt;æ‰§è¡Œè®¡åˆ’&lt;/strong&gt;ã€‚æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„â€œé€»è¾‘æ‰§è¡Œé¡ºåºâ€åœ¨ä¼˜åŒ–å™¨è¿™é‡Œå¯èƒ½ä¼šè¢«è°ƒæ•´ä»¥æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œå™¨&lt;/strong&gt;ï¼šè°ƒç”¨å­˜å‚¨å¼•æ“æ¥å£ï¼Œ&lt;strong&gt;æŒ‰ç…§ä¼˜åŒ–å™¨ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’&lt;/strong&gt;é€æ­¥æ‰§è¡ŒæŸ¥è¯¢ã€è·å–æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›ç»“æœ&lt;/strong&gt;ï¼šå°†æœ€ç»ˆç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è§£é€»è¾‘æ‰§è¡Œé¡ºåºå’ŒMySQLçš„å®é™…å®Œæ•´æµç¨‹ï¼Œèƒ½è®©ä½ æ›´æ·±å…¥åœ°æ´å¯Ÿæ•°æ®åº“çš„å·¥ä½œæ–¹å¼ã€‚&lt;/p&gt;
&lt;h2 id="ä¸æ’åºçš„è¿ç®—"&gt;ä¸æ’åºçš„è¿ç®—
&lt;/h2&gt;&lt;p&gt;äº†è§£ SQL ä¸­å„ç±»è¿ç®—ï¼ˆå¦‚ &lt;code&gt;GROUP BY&lt;/code&gt;ã€èšåˆå‡½æ•°ã€&lt;code&gt;BETWEEN&lt;/code&gt;ï¼‰æ˜¯å¦ä»¥åŠå¦‚ä½•å½±å“æ’åºï¼Œå¯¹ç¼–å†™æ­£ç¡®å’Œé«˜æ•ˆçš„æŸ¥è¯¢è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ æ¢³ç†è¿™äº›è¿ç®—ä¸æ’åºçš„å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»è¿™äº›è¿ç®—ä¸æ’åºçš„å…³ç³»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¿ç®—/å­å¥&lt;/th&gt;
&lt;th&gt;æ˜¯å¦é»˜è®¤å¯¼è‡´æ’åº&lt;/th&gt;
&lt;th&gt;æ’åºçš„ä¸»è¦å½±å“å› ç´ åŠè¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å› æ•°æ®åº“ç‰ˆæœ¬è€Œå¼‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;MySQL 5.7 åŠä»¥å‰&lt;/strong&gt;: é»˜è®¤å¯¹åˆ†ç»„é”®è¿›è¡Œéšå¼æ’åºã€‚&lt;strong&gt;MySQL 8.0+ åŠå…¶ä»–å¸¸è§æ•°æ®åº“ (å¦‚ PostgreSQL, SQL Server)&lt;/strong&gt;: ä¸å†é»˜è®¤æ’åºï¼Œé™¤éä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èšåˆå‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èšåˆå‡½æ•°æœ¬èº«åªè®¡ç®—æ±‡æ€»å€¼ï¼Œä¸ä¿è¯ç»“æœé¡ºåºã€‚ä½†å…¶æŸäº›&lt;strong&gt;ç‰¹å®šå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;array_agg&lt;/code&gt;ï¼‰å¯é€šè¿‡å†…éƒ¨ &lt;code&gt;ORDER BY&lt;/code&gt;æ§åˆ¶è¾“å‡ºå…ƒç´ çš„é¡ºåºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;BETWEEN&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BETWEEN&lt;/code&gt;ç”¨äºç­›é€‰èŒƒå›´ï¼Œä¸å½±å“ç»“æœçš„æ˜¾ç¤ºé¡ºåºã€‚ç»“æœçš„é¡ºåºæœ€ç»ˆç”± &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥å†³å®šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ” è¯¦è§£ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;h4 id="1-group-by-ä¸æ’åº"&gt;1. GROUP BY ä¸æ’åº
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;GROUP BY&lt;/code&gt;çš„æ’åºè¡Œä¸ºåœ¨ &lt;strong&gt;MySQL ä¸åŒç‰ˆæœ¬ä¸­æœ‰æ˜¾è‘—å·®å¼‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MySQL 5.7 åŠæ›´ä½ç‰ˆæœ¬&lt;/strong&gt;ï¼š&lt;code&gt;GROUP BY&lt;/code&gt;é»˜è®¤ä¼šå¯¹åˆ†ç»„å­—æ®µè¿›è¡Œ&lt;strong&gt;éšå¼æ’åº&lt;/strong&gt;ï¼ˆ&lt;code&gt;GROUP BY col&lt;/code&gt;ç­‰æ•ˆäº &lt;code&gt;GROUP BY col ORDER BY col&lt;/code&gt;ï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šæ’åºæ–¹å‘ï¼ˆå¦‚ &lt;code&gt;GROUP BY col DESC&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL 8.0 åŠæ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ï¼šä¸ºäº†ç¬¦åˆ SQL æ ‡å‡†å¹¶æå‡æ€§èƒ½ï¼Œ&lt;strong&gt;ç§»é™¤äº† &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åº&lt;/strong&gt;ã€‚æ‰§è¡Œ &lt;code&gt;GROUP BY&lt;/code&gt;åï¼Œç»“æœé›†çš„é¡ºåºæ˜¯&lt;strong&gt;ä¸ç¡®å®šçš„&lt;/strong&gt;ã€‚ä½ å¿…é¡»ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥ç¡®ä¿ç‰¹å®šçš„é¡ºåºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ°¸è¿œä¸è¦ä¾èµ– &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åº&lt;/strong&gt;ã€‚æ— è®ºä½¿ç”¨ä½•ç§æ•°æ®åº“ï¼Œå¦‚æœä½ å…³å¿ƒç»“æœçš„é¡ºåºï¼Œè¯·æ˜¾å¼ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS emp_count
FROM employees
GROUP BY department
ORDER BY emp_count DESC; -- æ˜¾å¼æ’åº
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-èšåˆå‡½æ•°ä¸æ’åº"&gt;2. èšåˆå‡½æ•°ä¸æ’åº
&lt;/h4&gt;&lt;p&gt;å¸¸è§çš„èšåˆå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;SUM()&lt;/code&gt;, &lt;code&gt;COUNT()&lt;/code&gt;, &lt;code&gt;AVG()&lt;/code&gt;, &lt;code&gt;MAX()&lt;/code&gt;, &lt;code&gt;MIN()&lt;/code&gt;ï¼‰æœ¬èº«&lt;strong&gt;ä»…è´Ÿè´£è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªæ±‡æ€»å€¼ï¼Œå¹¶ä¸ä¿è¯ä»»ä½•é¡ºåº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œä¸€äº›&lt;strong&gt;ç‰¹æ®Šçš„èšåˆå‡½æ•°å…è®¸ä½ æ§åˆ¶å…¶å†…éƒ¨èšåˆçš„é¡ºåº&lt;/strong&gt;ï¼Œè¿™ä¼šå½±å“è¿”å›å€¼çš„ç»“æ„ï¼ˆä½†ä¸ä¼šå½±å“ç»“æœé›†è¡Œçš„é¡ºåºï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œåœ¨ PostgreSQL æˆ–ä¸€äº›å…¶ä»–æ•°æ®åº“ä¸­ï¼Œ&lt;code&gt;array_agg()&lt;/code&gt;å‡½æ•°å¯ä»¥é…åˆ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ï¼Œç¡®ä¿èšåˆåˆ°æ•°ç»„ä¸­çš„å…ƒç´ æŒ‰ç‰¹å®šé¡ºåºæ’åˆ—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, array_agg(name ORDER BY salary DESC) AS top_earners
FROM employees
GROUP BY department;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°†è¿”å›æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥å§“åæ•°ç»„ï¼Œæ•°ç»„å†…çš„å§“åæŒ‰å·¥èµ„é™åºæ’åˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå‡½æ•°å†…éƒ¨çš„ &lt;code&gt;ORDER BY&lt;/code&gt;åªå½±å“å‡½æ•°è¾“å‡ºçš„å€¼ï¼Œä¸å½±å“æœ€ç»ˆç»“æœé›†ä¸­è¡Œçš„æ’åˆ—é¡ºåºã€‚è¡Œçš„é¡ºåºä»éœ€å¤–éƒ¨çš„ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ§åˆ¶ã€‚&lt;/p&gt;
&lt;h4 id="3-between-ä¸æ’åº"&gt;3. BETWEEN ä¸æ’åº
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;BETWEEN&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;æ¡ä»¶è¿ç®—ç¬¦&lt;/strong&gt;ï¼Œç”¨äºåœ¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­ç­›é€‰å‡ºè½åœ¨æŒ‡å®šèŒƒå›´å†…çš„è¡Œã€‚å®ƒ&lt;strong&gt;åªè´Ÿè´£è¿‡æ»¤æ•°æ®ï¼Œå®Œå…¨ä¸å½±å“ç»“æœçš„æ˜¾ç¤ºé¡ºåº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç»“æœçš„é¡ºåºå§‹ç»ˆç”± &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥å†³å®šï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM products
WHERE price BETWEEN 10 AND 50 -- ç­›é€‰å‡ºä»·æ ¼åœ¨10åˆ°50ä¹‹é—´çš„äº§å“
ORDER BY price DESC; -- å†³å®šè¿™äº›äº§å“å¦‚ä½•æ’åºæ˜¾ç¤º
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BETWEEN&lt;/code&gt;çš„è¾¹ç•Œé—®é¢˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;BETWEEN&lt;/code&gt;æ˜¯&lt;strong&gt;åŒ…å«æ€§&lt;/strong&gt;çš„ï¼Œå³åŒ…å«ä¸¤ç«¯çš„å€¼ã€‚å¯¹äºæ—¥æœŸç±»å‹è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸º &lt;code&gt;BETWEEN '2023-01-01' AND '2023-01-31'&lt;/code&gt;åªåŒ…å«åˆ° &amp;lsquo;2023-01-31 00:00:00&amp;rsquo; ä¹‹å‰çš„æ•°æ®ã€‚è‹¥è¦åŒ…å«ä¸€æ•´å¤©ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ &lt;code&gt;BETWEEN '2023-01-01' AND '2023-02-01'&lt;/code&gt;å¹¶é…åˆå…¶ä»–æ¡ä»¶ï¼Œæˆ–ä½¿ç”¨æ›´ç²¾ç¡®çš„æ—¶é—´æˆ³ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ€»ç»“ä¸å»ºè®®"&gt;ğŸ’¡ æ ¸å¿ƒæ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ’åºçš„å”¯ä¸€æƒå¨æ˜¯ &lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼šSQL ä¸­ï¼Œé™¤éä½ æ˜ç¡®ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ï¼Œå¦åˆ™&lt;strong&gt;ç»ä¸èƒ½å‡å®š&lt;/strong&gt;æŸ¥è¯¢ç»“æœçš„é¡ºåºã€‚ä»»ä½•å…¶ä»–å­å¥æˆ–å‡½æ•°çš„é»˜è®¤æ’åºè¡Œä¸ºéƒ½æ˜¯ä¸å¯é ä¸”ä¾èµ–äºå…·ä½“å®ç°çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡çº§ MySQL éœ€æ³¨æ„&lt;/strong&gt;ï¼šå¦‚æœä½ çš„é¡¹ç›®ä» MySQL 5.7 è¿ç§»åˆ° 8.0ï¼Œå¹¶ä¸”ä¹‹å‰ä¾èµ– &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åºï¼Œé‚£ä¹ˆ&lt;strong&gt;å¿…é¡»ä¿®æ”¹æŸ¥è¯¢ï¼Œæ·»åŠ æ˜¾å¼çš„ &lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½å‡ºç°é¡ºåºé”™ä¹±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šæ’åºï¼ˆå°¤å…¶æ˜¯å¯¹å¤§å‹ç»“æœé›†ï¼‰æ˜¯ä¸€é¡¹æ˜‚è´µçš„æ“ä½œã€‚åº”åœ¨å¿…è¦æ—¶æ‰ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;ï¼Œå¹¶è€ƒè™‘ä¸ºæ’åºå­—æ®µå»ºç«‹ç´¢å¼•ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ SQL ä¸­è¿ç®—ä¸æ’åºçš„å…³ç³»&lt;/p&gt;
&lt;h2 id="é¢„å¤„ç†è¯­å¥"&gt;é¢„å¤„ç†è¯­å¥
&lt;/h2&gt;&lt;p&gt;MySQL çš„é¢„å¤„ç†è¯­å¥ï¼ˆPrepared Statementsï¼‰æ˜¯ä¸€ç§å°† SQL è¯­å¥çš„ç»“æ„ä¸å®é™…å‚æ•°å€¼åˆ†ç¦»çš„æœºåˆ¶ï¼Œå®ƒèƒ½æ˜¾è‘—æå‡æ•°æ®åº“æ“ä½œçš„&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;å’Œ&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šå…¶å·¥ä½œåŸç†ã€ä¼˜åŠ¿ã€ä½¿ç”¨æ–¹æ³•ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-é¢„å¤„ç†è¯­å¥çš„æ ¸å¿ƒä»·å€¼"&gt;ğŸ¯ é¢„å¤„ç†è¯­å¥çš„æ ¸å¿ƒä»·å€¼
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä¼˜åŠ¿ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€æ¬¡ç¼–è¯‘ï¼Œå¤šæ¬¡æ‰§è¡Œï¼Œå‡å°‘æ•°æ®åº“è§£æå’Œä¼˜åŒ–å¼€é”€ï¼Œå°¤å…¶é€‚åˆé‡å¤æ€§æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§å¢å¼º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤©ç„¶é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Œå› ä¸ºå‚æ•°å€¼ä¸ä¼šè¢«è§£æä¸º SQL ä»£ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç æ¸…æ™°åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;SQL é€»è¾‘ä¸æ•°æ®åˆ†ç¦»ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œä¼ è¾“ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼ è¾“å‚æ•°ï¼Œæ¯”ä¼ ç»Ÿå­—ç¬¦ä¸²æ ¼å¼æ›´é«˜æ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é¢„å¤„ç†è¯­å¥çš„ä½¿ç”¨"&gt;ğŸ”§ é¢„å¤„ç†è¯­å¥çš„ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;MySQL ä¸»è¦é€šè¿‡ä¸‰ä¸ª SQL è¯­å¥æ¥ç®¡ç†é¢„å¤„ç†è¯­å¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt;ï¼šå‡†å¤‡é¢„å¤„ç†è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;EXECUTE&lt;/code&gt;&lt;/strong&gt;ï¼šæ‰§è¡Œé¢„å¤„ç†è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;&lt;/strong&gt;ï¼šé‡Šæ”¾é¢„å¤„ç†è¯­å¥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…¶å…¸å‹å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;code&gt;PREPARE&lt;/code&gt;-&amp;gt; (å¤šæ¬¡) &lt;code&gt;EXECUTE&lt;/code&gt;-&amp;gt; &lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id="1-åŸºæœ¬è¯­æ³•ç¤ºä¾‹"&gt;1. åŸºæœ¬è¯­æ³•ç¤ºä¾‹
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- 1. å‡†å¤‡ä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼Œç”¨ ? ä½œä¸ºå‚æ•°å ä½ç¬¦
PREPARE stmt_name FROM &amp;#39;SELECT * FROM users WHERE id = ? AND name = ?&amp;#39;;
-- 2. å£°æ˜ç”¨æˆ·å˜é‡å¹¶èµ‹å€¼
SET @id_val = 1;
SET @name_val = &amp;#39;Alice&amp;#39;;
-- 3. æ‰§è¡Œé¢„å¤„ç†è¯­å¥ï¼Œå¹¶ä½¿ç”¨ USING å­å¥ä¼ é€’å‚æ•°
EXECUTE stmt_name USING @id_val, @name_val;
-- 4. é‡Šæ”¾é¢„å¤„ç†è¯­å¥ï¼ˆè‰¯å¥½ä¹ æƒ¯ï¼‰
DEALLOCATE PREPARE stmt_name;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä»¥-java-ä¸ºä¾‹"&gt;2. åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼ˆä»¥ Java ä¸ºä¾‹ï¼‰
&lt;/h4&gt;&lt;p&gt;åœ¨ Java ç­‰ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé€šå¸¸é€šè¿‡æ•°æ®åº“è¿æ¥åº“ï¼ˆå¦‚ JDBCï¼‰æ¥ä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼Œå…¶åº•å±‚æœºåˆ¶ä¸ç›´æ¥ä½¿ç”¨ SQL è¯­å¥ç›¸ä¼¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¤ºä¾‹ï¼šJava ä¸­ä½¿ç”¨ JDBC çš„ PreparedStatement
String sql = &amp;#34;INSERT INTO products (name, price) VALUES (?, ?)&amp;#34;; // ? æ˜¯å ä½ç¬¦
PreparedStatement pstmt = connection.prepareStatement(sql);
// è®¾ç½®å‚æ•°ï¼ˆç±»å‹å®‰å…¨ï¼‰
pstmt.setString(1, &amp;#34;Laptop&amp;#34;); // ç¬¬ä¸€ä¸ª ? æ›¿æ¢ä¸º &amp;#34;Laptop&amp;#34;
pstmt.setBigDecimal(2, new BigDecimal(&amp;#34;999.99&amp;#34;)); // ç¬¬äºŒä¸ª ? æ›¿æ¢ä¸º 999.99
// æ‰§è¡Œè¯­å¥
pstmt.executeUpdate();
// å…³é—­è¯­å¥ï¼ˆé‡Šæ”¾èµ„æºï¼‰
pstmt.close();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼šä»£ç ä¸­çš„ &lt;code&gt;setString&lt;/code&gt;å’Œ &lt;code&gt;setBigDecimal&lt;/code&gt;ç­‰æ–¹æ³•ç”¨äºä¸ºé¢„ç¼–è¯‘çš„ SQL è¯­å¥ä¸­çš„å ä½ç¬¦ï¼ˆ&lt;code&gt;?&lt;/code&gt;ï¼‰ç»‘å®šå…·ä½“å‚æ•°å€¼ï¼Œå¹¶ç¡®ä¿ç±»å‹å®‰å…¨ã€‚&lt;/p&gt;
&lt;h3 id="-é¢„å¤„ç†è¯­å¥çš„å·¥ä½œè¿‡ç¨‹"&gt;ğŸ“Š é¢„å¤„ç†è¯­å¥çš„å·¥ä½œè¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£é¢„å¤„ç†è¯­å¥çš„å„ä¸ªé˜¶æ®µï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹åºåˆ—å›¾ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sequenceDiagram
participant Client
participant MySQL Server
Client-&amp;gt;&amp;gt;MySQL Server: PREPARE stmt FROM&amp;lt;br&amp;gt;&amp;#39;INSERT INTO t (col) VALUES (?)&amp;#39;
Note right of MySQL Server: è§£æã€æ£€æŸ¥ã€ä¼˜åŒ–SQL&amp;lt;br&amp;gt;ç”Ÿæˆæ‰§è¡Œè®¡åˆ’å¹¶ç¼“å­˜
MySQL Server--&amp;gt;&amp;gt;Client: OK (Statement Prepared)
Client-&amp;gt;&amp;gt;MySQL Server: SET @value = &amp;#39;data&amp;#39;
Client-&amp;gt;&amp;gt;MySQL Server: EXECUTE stmt USING @value
Note right of MySQL Server: ä½¿ç”¨ç¼“å­˜çš„æ‰§è¡Œè®¡åˆ’&amp;lt;br&amp;gt;å¹¶ç»‘å®šå‚æ•°å€¼&amp;#39;data&amp;#39;
MySQL Server--&amp;gt;&amp;gt;Client: OK (Row Inserted)
Client-&amp;gt;&amp;gt;MySQL Server: SET @value = &amp;#39;more_data&amp;#39;
Client-&amp;gt;&amp;gt;MySQL Server: EXECUTE stmt USING @value
Note right of MySQL Server: å¤ç”¨ç¼“å­˜çš„æ‰§è¡Œè®¡åˆ’&amp;lt;br&amp;gt;å¹¶ç»‘å®šå‚æ•°å€¼&amp;#39;more_data&amp;#39;
MySQL Server--&amp;gt;&amp;gt;Client: OK (Row Inserted)
Client-&amp;gt;&amp;gt;MySQL Server: DEALLOCATE PREPARE stmt
Note right of MySQL Server: é‡Šæ”¾ç¼“å­˜çš„æ‰§è¡Œè®¡åˆ’ç­‰èµ„æº
MySQL Server--&amp;gt;&amp;gt;Client: OK (Statement Deallocated)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œé¢„å¤„ç†è¯­å¥é¦–å…ˆåœ¨æœåŠ¡å™¨ç«¯&lt;strong&gt;é¢„ç¼–è¯‘&lt;/strong&gt;ï¼ˆParsing &amp;amp; Optimizationï¼‰ï¼Œç”Ÿæˆå¹¶ç¼“å­˜æ‰§è¡Œè®¡åˆ’ã€‚åç»­æ¯æ¬¡æ‰§è¡Œï¼ˆEXECUTEï¼‰åªéœ€ç»‘å®šæ–°çš„å‚æ•°å€¼å³å¯&lt;strong&gt;å¤ç”¨&lt;/strong&gt;æ­¤è®¡åˆ’ï¼Œé¿å…äº†é‡å¤è§£æå’Œä¼˜åŒ–çš„å¼€é”€ã€‚æœ€åï¼Œé€šè¿‡ &lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;&lt;strong&gt;é‡Šæ”¾&lt;/strong&gt;èµ„æºã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-2"&gt;ğŸŒŸ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹é‡æ•°æ®æ“ä½œ&lt;/strong&gt;ï¼šéœ€è¦å¤§é‡æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤è®°å½•æ—¶ï¼Œä½¿ç”¨é¢„å¤„ç†è¯­å¥æ€§èƒ½æå‡æ˜¾è‘—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PREPARE insert_product FROM &amp;#39;INSERT INTO products (name, price) VALUES (?, ?)&amp;#39;;
-- ç„¶ååœ¨å¾ªç¯ä¸­å¤šæ¬¡ EXECUTEï¼Œæ¯æ¬¡ç»‘å®šä¸åŒçš„å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å¤æŸ¥è¯¢&lt;/strong&gt;ï¼šé¢‘ç¹æ‰§è¡Œç›¸åŒç»“æ„ï¼Œä»…å‚æ•°ä¸åŒçš„æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PREPARE get_user FROM &amp;#39;SELECT * FROM users WHERE email = ?&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ¨æ€æŸ¥è¯¢æ„å»º&lt;/strong&gt;ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ŒåŒæ—¶ä¿éšœå®‰å…¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ŒåŒæ—¶ä¿éšœå®‰å…¨
SET @sql = CONCAT(&amp;#39;SELECT * FROM orders WHERE status = ? AND create_date &amp;gt; ?&amp;#39;);
PREPARE dynamic_query FROM @sql;
SET @status = &amp;#39;processed&amp;#39;;
SET @date = &amp;#39;2023-01-01&amp;#39;;
EXECUTE dynamic_query USING @status, @date;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜²æ­¢ SQL æ³¨å…¥&lt;/strong&gt;ï¼šä»»ä½•æ¥å—ç”¨æˆ·è¾“å…¥å¹¶ç»„æˆæŸ¥è¯¢çš„åœºæ™¯éƒ½åº”ä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼Œè¿™æ˜¯æœ€é‡è¦çš„å®‰å…¨æªæ–½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¸ä¼šè¯&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥æ˜¯&lt;strong&gt;ä¼šè¯çº§åˆ«&lt;/strong&gt;çš„å¯¹è±¡ã€‚å®ƒåœ¨åˆ›å»ºå®ƒçš„æ•°æ®åº“è¿æ¥ä¸­æœ‰æ•ˆï¼Œè¿æ¥å…³é—­åä¼šè‡ªåŠ¨é”€æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºç®¡ç†&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥ä¼šå ç”¨æœåŠ¡å™¨èµ„æºï¼ˆå†…å­˜ï¼‰ã€‚åº”ä½¿ç”¨ &lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;åŠæ—¶é‡Šæ”¾ä¸å†ä½¿ç”¨çš„è¯­å¥ï¼Œæˆ–åœ¨ä¼šè¯ç»“æŸæ—¶ç¡®ä¿è¿æ¥å…³é—­ã€‚ å¯é€šè¿‡ç³»ç»Ÿå˜é‡ &lt;code&gt;max_prepared_stmt_count&lt;/code&gt;é™åˆ¶å…¨å±€æ€»æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;SQL è¯­å¥ä¸­çš„&lt;strong&gt;è¡¨åã€åˆ—åç­‰æ ‡è¯†ç¬¦&lt;/strong&gt;ä¸èƒ½ä½¿ç”¨å‚æ•°å ä½ç¬¦ (&lt;code&gt;?&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;æå…¶å¤æ‚&lt;/strong&gt;æˆ–&lt;strong&gt;åŠ¨æ€æ€§éå¸¸å¼º&lt;/strong&gt;ï¼ˆæ¯æ¬¡ç»“æ„éƒ½å®Œå…¨ä¸åŒï¼‰çš„ SQLï¼Œé¢„å¤„ç†è¯­å¥çš„ä¼˜åŠ¿å¯èƒ½ä¸æ˜æ˜¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹ä¸€è‡´æ€§&lt;/strong&gt;ï¼šå¤šæ¬¡æ‰§è¡ŒåŒä¸€é¢„å¤„ç†è¯­å¥æ—¶ï¼Œä¼ é€’çš„å‚æ•°åº”å°½é‡ä¿æŒ&lt;strong&gt;æ•°æ®ç±»å‹ä¸€è‡´&lt;/strong&gt;ï¼Œé¿å…å› ç±»å‹è½¬æ¢å¯¼è‡´ä¸å¿…è¦çš„é‡æ–°ç¼–è¯‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„é¢„å¤„ç†è¯­å¥æ˜¯ä¸€ç§&lt;strong&gt;æå‡æ€§èƒ½&lt;/strong&gt;ï¼ˆå‡å°‘è§£æç¼–è¯‘å¼€é”€ã€ä¼˜åŒ–ç½‘ç»œä¼ è¾“ï¼‰å’Œ&lt;strong&gt;ä¿éšœå®‰å…¨&lt;/strong&gt;ï¼ˆæœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥ï¼‰çš„å¼ºå¤§å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¼ºçƒˆå»ºè®®&lt;/strong&gt;ä½ åœ¨å¼€å‘ä¸­å…»æˆä¹ æƒ¯ï¼šåªè¦ SQL è¯­å¥ä¸­åŒ…å«äº†æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–å¤–éƒ¨æ•°æ®çš„&lt;strong&gt;å˜é‡å€¼&lt;/strong&gt;ï¼Œå°±ä¼˜å…ˆä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼ˆå¦‚ JDBC ä¸­çš„ &lt;code&gt;PreparedStatement&lt;/code&gt;ï¼‰æ¥ç¼–å†™æ•°æ®åº“æ“ä½œä»£ç ï¼Œè¿™é€šå¸¸æ˜¯æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL é¢„å¤„ç†è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="using"&gt;using
&lt;/h2&gt;&lt;p&gt;USING è¯­å¥æ˜¯ SQL ä¸­ç”¨äºç®€åŒ– JOIN æ“ä½œçš„ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒä¸»è¦åœ¨&lt;strong&gt;å¤šè¡¨è¿æ¥æ—¶ï¼Œå½“ä¸¤ä¸ªè¡¨å…·æœ‰ç›¸åŒåç§°çš„åˆ—&lt;/strong&gt;çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ USING ä¸ä¼ ç»Ÿ ON çš„åŒºåˆ«ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;USING è¯­å¥&lt;/th&gt;
&lt;th&gt;ä¼ ç»Ÿ ON å­å¥&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ç®€æ´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ›´ç®€æ´ï¼Œç›´æ¥æŒ‡å®šå…±æœ‰çš„åˆ—åå³å¯ &lt;code&gt;USING(column_name)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âŒ éœ€æ˜¾å¼å†™æ˜ä¸¤ä¸ªè¡¨çš„åˆ—å…³ç³» &lt;code&gt;ON table1.column_name = table2.column_name&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†å»é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;è‡ªåŠ¨å»é™¤é‡å¤çš„è¿æ¥åˆ—&lt;/strong&gt;ï¼Œç»“æœé›†ä¸­åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;âŒ è¿æ¥åˆ—ä¼šåœ¨ç»“æœé›†ä¸­&lt;strong&gt;å‡ºç°ä¸¤æ¬¡&lt;/strong&gt;ï¼ˆåˆ†åˆ«æ¥è‡ªä¸¤ä¸ªè¡¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—åå‰ç¼€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ åœ¨ SELECTã€GROUP BYã€ORDER BY ä¸­å¼•ç”¨è¿æ¥åˆ—æ—¶ï¼Œ&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ä½¿ç”¨è¡¨åå‰ç¼€ï¼Œç›´æ¥ä½¿ç”¨åˆ—åå³å¯&lt;/td&gt;
&lt;td&gt;âœ… åœ¨ SELECTã€GROUP BYã€ORDER BY ä¸­å¼•ç”¨åˆ—æ—¶ï¼Œ&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½¿ç”¨è¡¨åå‰ç¼€æ¥é¿å…æ­§ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;ä¸“ç”¨äºä¸¤ä¸ªè¡¨å…·æœ‰ç›¸åŒåç§°çš„è¿æ¥åˆ—&lt;/strong&gt;æ—¶&lt;/td&gt;
&lt;td&gt;âœ… å¯ç”¨äº&lt;strong&gt;ä»»ä½•ç­‰å€¼è¿æ¥&lt;/strong&gt;ï¼ŒåŒ…æ‹¬è¿æ¥åˆ—åä¸åŒä½†é€»è¾‘ç›¸åŒçš„æƒ…å†µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šåˆ—è¿æ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒï¼Œè¯­æ³•ä¸º &lt;code&gt;USING (col1, col2)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒï¼Œè¯­æ³•ä¸º &lt;code&gt;ON table1.col1 = table2.col1 AND table1.col2 = table2.col2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-using-çš„å·¥ä½œåŸç†ä¸è¯­æ³•"&gt;ğŸ” USING çš„å·¥ä½œåŸç†ä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;å­å¥ç”¨äºåœ¨ JOIN æ“ä½œä¸­æŒ‡å®šä¸¤ä¸ªè¡¨ä¸­&lt;strong&gt;åŒåçš„è¿æ¥åˆ—&lt;/strong&gt;ã€‚å…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT ...
FROM table1
[JOIN_TYPE] JOIN table2 USING (common_column_name);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼Œ&lt;code&gt;JOIN_TYPE&lt;/code&gt;å¯ä»¥æ˜¯ &lt;code&gt;INNER JOIN&lt;/code&gt;ã€&lt;code&gt;LEFT JOIN&lt;/code&gt;ã€&lt;code&gt;RIGHT JOIN&lt;/code&gt;ç­‰ã€‚&lt;/p&gt;
&lt;h4 id="è‡ªåŠ¨å»é‡é‡å¤åˆ—"&gt;è‡ªåŠ¨å»é‡é‡å¤åˆ—
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ &lt;code&gt;USING&lt;/code&gt;ä¸€ä¸ªéå¸¸å®ç”¨çš„ç‰¹æ€§ã€‚å½“ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;è¿›è¡Œè¿æ¥æ—¶ï¼Œåœ¨æœ€ç»ˆçš„ç»“æœé›†ä¸­ï¼Œ&lt;strong&gt;è¿æ¥åˆ—åªä¼šå‡ºç°ä¸€æ¬¡&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯åƒ &lt;code&gt;ON&lt;/code&gt;å­å¥é‚£æ ·åˆ†åˆ«æ˜¾ç¤ºä¸¤ä¸ªè¡¨çš„åˆ—ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM Orders
JOIN OrderItems USING (order_id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;cust_id&lt;/th&gt;
&lt;th&gt;item_id&lt;/th&gt;
&lt;th&gt;product&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1001&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2001&lt;/td&gt;
&lt;td&gt;iPhone&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;ON&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM Orders
JOIN OrderItems ON Orders.order_id = OrderItems.order_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Orders.order_id&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;OrderItems.order_id&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;cust_id&lt;/th&gt;
&lt;th&gt;item_id&lt;/th&gt;
&lt;th&gt;product&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1001&lt;/td&gt;
&lt;td&gt;1001&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2001&lt;/td&gt;
&lt;td&gt;iPhone&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸-group-byorder-by-ç»“åˆä½¿ç”¨"&gt;ä¸ GROUP BYã€ORDER BY ç»“åˆä½¿ç”¨
&lt;/h4&gt;&lt;p&gt;å½“åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;æˆ– &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ä¸­å¼•ç”¨ &lt;code&gt;USING&lt;/code&gt;æŒ‡å®šçš„è¿æ¥åˆ—æ—¶ï¼Œ&lt;strong&gt;ç›´æ¥ä½¿ç”¨åˆ—åå³å¯&lt;/strong&gt;ï¼Œæ— éœ€è¡¨åå‰ç¼€ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT order_id, COUNT(*) -- ç›´æ¥ä½¿ç”¨order_idï¼Œæ— éœ€è¡¨åå‰ç¼€
FROM Orders
JOIN OrderItems USING (order_id)
GROUP BY order_id; -- ç›´æ¥ä½¿ç”¨order_idï¼Œæ— éœ€è¡¨åå‰ç¼€
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="å¤šåˆ—-using"&gt;å¤šåˆ— USING
&lt;/h4&gt;&lt;p&gt;å¦‚æœä¸¤ä¸ªè¡¨éœ€è¦é€šè¿‡å¤šä¸ªåŒåå­—æ®µè¿›è¡Œè¿æ¥ï¼Œ&lt;code&gt;USING&lt;/code&gt;æ”¯æŒæŒ‡å®šå¤šä¸ªåˆ—ï¼Œç”¨é€—åˆ†éš”ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM Employees
JOIN Departments USING (dept_id, location); -- å‡è®¾ä¸¤è¡¨éƒ½æœ‰ dept_id å’Œ location åˆ—
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-using-çš„åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ› ï¸ USING çš„åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;éå¸¸é€‚åˆåœ¨&lt;strong&gt;ä¸¤ä¸ªè¡¨å…·æœ‰ç›¸åŒåç§°çš„è¿æ¥åˆ—&lt;/strong&gt;æ—¶ç®€åŒ–æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h4 id="1-ç®€å•çš„ç­‰å€¼è¿æ¥"&gt;1. ç®€å•çš„ç­‰å€¼è¿æ¥
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œä¾‹å¦‚å…³è”æŸ¥è¯¢å‘˜å·¥å’Œéƒ¨é—¨ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å‡è®¾ employees å’Œ departments è¡¨éƒ½æœ‰ department_id åˆ—
SELECT e.employee_id, e.name, d.department_name
FROM employees e
JOIN departments d USING (department_id);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-ä¸-update-è¯­å¥ç»“åˆ"&gt;2. ä¸ UPDATE è¯­å¥ç»“åˆ
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;ä¹Ÿå¯ç”¨äº &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ä¸­ï¼Œç®€åŒ–åŸºäºè¿æ¥çš„æ¡ä»¶æ›´æ–°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨ USING åœ¨ UPDATE è¯­å¥ä¸­ç®€åŒ– JOIN
UPDATE Employees e
JOIN Departments d USING (department_id)
SET e.salary = e.salary * 1.1
WHERE d.department_name = &amp;#39;Sales&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-ç»“åˆ-where-å­å¥æ·»åŠ è¿‡æ»¤æ¡ä»¶"&gt;3. ç»“åˆ WHERE å­å¥æ·»åŠ è¿‡æ»¤æ¡ä»¶
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;å¯ä»¥ä¸å…¶ä»–å­å¥ï¼ˆå¦‚ &lt;code&gt;WHERE&lt;/code&gt;ï¼‰æ— ç¼åä½œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT e.name, d.department_name
FROM employees e
JOIN departments d USING (department_id)
WHERE d.department_name = &amp;#39;Engineering&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-using-çš„æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§"&gt;âš ï¸ USING çš„æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§
&lt;/h3&gt;&lt;p&gt;å°½ç®¡ &lt;code&gt;USING&lt;/code&gt;å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä¹Ÿéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒååˆ—è¦æ±‚&lt;/strong&gt;ï¼š&lt;code&gt;USING&lt;/code&gt;æŒ‡å®šçš„åˆ—å¿…é¡»åœ¨&lt;strong&gt;ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸”åç§°å®Œå…¨ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹å…¼å®¹&lt;/strong&gt;ï¼šè¿æ¥åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹ã€‚å¦‚æœä¸€ä¸ªæ˜¯ &lt;code&gt;INT&lt;/code&gt;ï¼Œå¦ä¸€ä¸ªæ˜¯ &lt;code&gt;VARCHAR&lt;/code&gt;ï¼Œå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯æˆ–æ„å¤–çš„éšå¼è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ”¯æŒä¸åŒååˆ—&lt;/strong&gt;ï¼šå¦‚æœè¿æ¥åˆ—åç§°ä¸åŒï¼Œå³ä½¿é€»è¾‘ç›¸åŒï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;ï¼Œå¿…é¡»ä½¿ç”¨ &lt;code&gt;ON&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•ç”¨è¿æ¥åˆ—&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;SELECT&lt;/code&gt;åˆ—è¡¨ä¸­å¼•ç”¨ &lt;code&gt;USING&lt;/code&gt;çš„è¿æ¥åˆ—æ—¶ï¼Œ&lt;strong&gt;ä¸èƒ½ä½¿ç”¨è¡¨åˆ«åæˆ–è¡¨åä½œä¸ºå‰ç¼€&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨-using"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ USINGï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ç¬¦åˆä½¿ç”¨æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œ&lt;code&gt;USING&lt;/code&gt;è¯­å¥æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–æŸ¥è¯¢è¯­å¥&lt;/strong&gt;ï¼šä½¿ SQL æ›´åŠ ç®€æ´ï¼Œå‡å°‘å†—ä½™ï¼Œæé«˜&lt;strong&gt;å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ç»“æœé›†æ­§ä¹‰&lt;/strong&gt;ï¼šè‡ªåŠ¨å»é™¤é‡å¤çš„è¿æ¥åˆ—ï¼Œè®©ç»“æœé›†æ›´åŠ æ¸…æ™°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æé«˜æ€§èƒ½çš„å¯èƒ½æ€§&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“å®ç°ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;å¯èƒ½è®©ä¼˜åŒ–å™¨æ›´å®¹æ˜“è¯†åˆ«è¿æ¥æ¡ä»¶ï¼Œä½†æ€§èƒ½æå‡å¹¶éç»å¯¹ï¼Œæœ€ç»ˆä»å–å†³äºç´¢å¼•ã€è¡¨å¤§å°ç­‰å› ç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;æ˜¯ SQL ä¸­ä¸€ä¸ªç”¨äºç®€åŒ–è¿æ¥æŸ¥è¯¢çš„å®ç”¨å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºä¸¤ä¸ªè¡¨å…·æœ‰åŒåå­—æ®µçš„ç­‰å€¼è¿æ¥ã€‚å®ƒçš„&lt;strong&gt;è‡ªåŠ¨å»é‡&lt;/strong&gt;å’Œ&lt;strong&gt;ç®€æ´è¯­æ³•&lt;/strong&gt;æ˜¯æœ€å¤§äº®ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä¸¤ä¸ªè¡¨çš„è¿æ¥åˆ—&lt;strong&gt;åç§°å®Œå…¨ç›¸åŒ&lt;/strong&gt;ï¼Œä¸”ä½ å¸Œæœ›æŸ¥è¯¢ç®€æ´ã€ç»“æœé›†é¿å…é‡å¤åˆ—æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ &lt;code&gt;ON&lt;/code&gt;&lt;/strong&gt;ï¼šå½“è¿æ¥åˆ—åç§°ä¸åŒï¼Œæˆ–è¿æ¥æ¡ä»¶ä¸æ˜¯ç®€å•çš„ç­‰å€¼åŒ¹é…ï¼ˆå¦‚ &lt;code&gt;ON table1.col1 &amp;gt; table2.col2&lt;/code&gt;ï¼‰æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æŒæ¡ &lt;code&gt;USING&lt;/code&gt;ï¼Œèƒ½è®©ä½ çš„ SQL ä»£ç æ›´åŠ ä¼˜é›…å’Œä¸“ä¸šã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="using-é¢„å¤„ç†"&gt;USING é¢„å¤„ç†
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;åœ¨ SQL é¢„å¤„ç†è¯­å¥ä¸­ï¼Œä¸»è¦ä¸ &lt;code&gt;EXECUTE&lt;/code&gt;è¯­å¥æ­é…ï¼Œ&lt;strong&gt;ç”¨äºåœ¨æ‰§è¡Œæ—¶ç»‘å®šå…·ä½“å‚æ•°å€¼åˆ°é¢„å¤„ç†è¯­å¥çš„å ä½ç¬¦ä¸Š&lt;/strong&gt;ã€‚å®ƒå……å½“äº†â€œå‚æ•°ä¼ é€’æ¡¥æ¢â€çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ¸…æ™°åœ°äº†è§£ &lt;code&gt;USING&lt;/code&gt;åœ¨é¢„å¤„ç†è¯­å¥ä¸­çš„ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æµç¨‹å›¾æ¥è§‚å¯Ÿå…¶åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­çš„ä½ç½®å’ŒåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[PREPARE stmt_name FROM&amp;lt;br&amp;gt;å¸¦å ä½ç¬¦?çš„SQL] --&amp;gt; B[SET @variable = value];
B --&amp;gt; C[EXECUTE stmt_name&amp;lt;br&amp;gt;USING @variable];
C --&amp;gt; D[DEALLOCATE PREPARE stmt_name];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œ&lt;code&gt;USING&lt;/code&gt;å­å¥ç´§éš &lt;code&gt;EXECUTE&lt;/code&gt;è¯­å¥ï¼Œè´Ÿè´£å°†ä¹‹å‰å®šä¹‰çš„ç”¨æˆ·å˜é‡ï¼ˆå¦‚ &lt;code&gt;@variable&lt;/code&gt;ï¼‰çš„å€¼ï¼Œä¼ é€’ç»™å·²é¢„ç¼–è¯‘çš„è¯­å¥ &lt;code&gt;stmt_name&lt;/code&gt;ä¸­çš„å ä½ç¬¦ &lt;code&gt;?&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-åŸºæœ¬å·¥ä½œæµç¨‹"&gt;ğŸ”„ åŸºæœ¬å·¥ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;é¢„å¤„ç†è¯­å¥çš„å…¸å‹ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡ (&lt;code&gt;PREPARE&lt;/code&gt;)&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼Œä½¿ç”¨ &lt;code&gt;?&lt;/code&gt;ä½œä¸ºå‚æ•°å ä½ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®å˜é‡ (&lt;code&gt;SET&lt;/code&gt;)&lt;/strong&gt;ï¼šä¸ºç”¨æˆ·å˜é‡èµ‹å€¼ï¼Œè¿™äº›å€¼å°†ä¼ é€’ç»™å ä½ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ (&lt;code&gt;EXECUTE ... USING&lt;/code&gt;)&lt;/strong&gt;ï¼šæ‰§è¡Œé¢„å¤„ç†è¯­å¥ï¼Œå¹¶é€šè¿‡ &lt;code&gt;USING&lt;/code&gt;å­å¥ä¼ é€’å·²èµ‹å€¼çš„å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡Šæ”¾ (&lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;)&lt;/strong&gt;ï¼ˆå¯é€‰ï¼‰ï¼šæ˜¾å¼é‡Šæ”¾é¢„å¤„ç†è¯­å¥èµ„æºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç¤ºä¾‹ä½¿ç”¨-usingä¼ é€’å‚æ•°"&gt;ğŸ“ ç¤ºä¾‹ï¼šä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;ä¼ é€’å‚æ•°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- 1. å‡†å¤‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œ&amp;#39;?&amp;#39; æ˜¯å¾…ä¼ å…¥å‚æ•°çš„å ä½ç¬¦
PREPARE getUser FROM &amp;#39;SELECT * FROM users WHERE department_id = ? AND salary &amp;gt; ?&amp;#39;;
-- 2. å£°æ˜ç”¨æˆ·å˜é‡å¹¶èµ‹å€¼
SET @dept_id = 3;
SET @min_salary = 50000;
-- 3. æ‰§è¡Œé¢„å¤„ç†è¯­å¥ï¼Œå¹¶é€šè¿‡ USING å­å¥ä¼ é€’å˜é‡å€¼
EXECUTE getUser USING @dept_id, @min_salary;
-- 4. å¯ä»¥ä¸ºå˜é‡èµ‹æ–°å€¼ï¼Œå†æ¬¡æ‰§è¡Œç›¸åŒçš„é¢„å¤„ç†è¯­å¥ï¼Œé«˜æ•ˆæŸ¥è¯¢ä¸åŒæ¡ä»¶
SET @dept_id = 5;
SET @min_salary = 60000;
EXECUTE getUser USING @dept_id, @min_salary;
-- 5. (å¯é€‰) æœ€åé‡Šæ”¾é¢„å¤„ç†è¯­å¥
DEALLOCATE PREPARE getUser;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ ¸å¿ƒä»·å€¼"&gt;ğŸ’¡ æ ¸å¿ƒä»·å€¼
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥åªéœ€&lt;strong&gt;ç¼–è¯‘ä¸€æ¬¡&lt;/strong&gt;ï¼ˆ&lt;code&gt;PREPARE&lt;/code&gt;é˜¶æ®µï¼‰ï¼Œä¹‹åæ¯æ¬¡æ‰§è¡Œï¼ˆ&lt;code&gt;EXECUTE&lt;/code&gt;ï¼‰åªéœ€ä¼ é€’ä¸åŒå‚æ•°å³å¯ï¼Œé¿å…äº†é‡å¤è§£æå’Œä¼˜åŒ– SQL çš„å¼€é”€ã€‚å¯¹äºéœ€é¢‘ç¹æ‰§è¡Œçš„åŒç±»æŸ¥è¯¢ï¼Œæ€§èƒ½æå‡æ˜¾è‘—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ä¸é˜²æ³¨å…¥&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;å­å¥ä¼ é€’å‚æ•°å€¼ï¼Œèƒ½&lt;strong&gt;æœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»&lt;/strong&gt;ã€‚å› ä¸ºå‚æ•°å€¼å§‹ç»ˆè¢«å½“ä½œæ•°æ®å¤„ç†ï¼Œè€Œä¸ä¼šè¢«è§£æä¸º SQL ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç æ¸…æ™°ä¸å¤ç”¨&lt;/strong&gt;ï¼šå°† SQL é€»è¾‘ä¸å‚æ•°å€¼åˆ†ç¦»ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ï¼Œå¹¶&lt;strong&gt;æå¤§æé«˜äº† SQL è¯­å¥çš„å¤ç”¨æ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-6"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å˜é‡ä¸å ä½ç¬¦çš„é¡ºåºå’Œæ•°é‡å¿…é¡»åŒ¹é…&lt;/strong&gt;ï¼š&lt;code&gt;USING&lt;/code&gt;å­å¥ä¸­å˜é‡çš„&lt;strong&gt;é¡ºåº&lt;/strong&gt;å¿…é¡»ä¸é¢„å¤„ç† SQL ä¸­ &lt;code&gt;?&lt;/code&gt;å ä½ç¬¦å‡ºç°çš„é¡ºåºä¸€è‡´ï¼Œä¸”&lt;strong&gt;æ•°é‡å¿…é¡»ç›¸ç­‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ç”¨æˆ·å˜é‡&lt;/strong&gt;ï¼š&lt;code&gt;USING&lt;/code&gt;å­å¥åé¢åº”è·Ÿ&lt;strong&gt;ç”¨æˆ·å˜é‡&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;@var_name&lt;/code&gt;ï¼‰ï¼Œè€Œä¸èƒ½ç›´æ¥ä½¿ç”¨å­—é¢é‡æˆ–è¡¨è¾¾å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥åŠå…¶å‚æ•°ç»‘å®šé€šå¸¸åœ¨&lt;strong&gt;å½“å‰ä¼šè¯&lt;/strong&gt;æœ‰æ•ˆã€‚ä¼šè¯ç»“æŸæˆ–è¿æ¥æ–­å¼€åï¼Œé¢„å¤„ç†è¯­å¥ä¼šè‡ªåŠ¨é”€æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ &lt;code&gt;USING&lt;/code&gt;åœ¨ SQL é¢„å¤„ç†è¯­å¥ä¸­çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;h2 id="æ·»åŠ å¤–é”®çº¦æŸ"&gt;æ·»åŠ å¤–é”®çº¦æŸ
&lt;/h2&gt;&lt;p&gt;æ•°æ®åº“å¤–é”®çº¦æŸæ˜¯ç»´æŠ¤æ•°æ®å®Œæ•´æ€§å’Œè¡¨é—´å…³ç³»çš„é‡è¦å·¥å…·ã€‚ä¸‹é¢ä¸ºä½ è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨å»ºè¡¨åæ·»åŠ å¤–é”®çº¦æŸã€‚&lt;/p&gt;
&lt;h3 id="-å„æ•°æ®åº“ç³»ç»Ÿæ·»åŠ å¤–é”®çº¦æŸçš„è¯­å¥"&gt;ğŸ“Š å„æ•°æ®åº“ç³»ç»Ÿæ·»åŠ å¤–é”®çº¦æŸçš„è¯­å¥
&lt;/h3&gt;&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†åœ¨ä¸åŒæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ &lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥æ·»åŠ å¤–é”®çº¦æŸçš„é€šç”¨è¯­æ³•å’Œæ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ•°æ®åº“ç³»ç»Ÿ&lt;/th&gt;
&lt;th&gt;åŸºæœ¬è¯­æ³•&lt;/th&gt;
&lt;th&gt;å¯é€‰çº¦æŸè¡Œä¸ºï¼ˆON DELETE / ON UPDATEï¼‰&lt;/th&gt;
&lt;th&gt;æ³¨æ„è¦ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;, &lt;code&gt;RESTRICT&lt;/code&gt;(é»˜è®¤), &lt;code&gt;NO ACTION&lt;/code&gt;, &lt;code&gt;SET DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. å­˜å‚¨å¼•æ“éœ€ä¸º &lt;strong&gt;InnoDB&lt;/strong&gt; 2. å­—æ®µæ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PostgreSQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;, &lt;code&gt;RESTRICT&lt;/code&gt;, &lt;code&gt;NO ACTION&lt;/code&gt;, &lt;code&gt;SET DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. æ”¯æŒ&lt;strong&gt;å»¶è¿Ÿçº¦æŸ&lt;/strong&gt;æ£€æŸ¥ï¼ˆ&lt;code&gt;DEFERRABLE&lt;/code&gt;ï¼‰ 2. å¼•ç”¨å­—æ®µå¿…é¡»æ˜¯ä¸»é”®æˆ–å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SQL Server&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;, &lt;code&gt;NO ACTION&lt;/code&gt;(é»˜è®¤), &lt;code&gt;SET DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. å¼•ç”¨å­—æ®µå¿…é¡»æ˜¯ä¸»é”®æˆ–å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Oracle&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. å¼•ç”¨å­—æ®µå¿…é¡»æ˜¯ä¸»é”®æˆ–å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•è¯´æ˜"&gt;ğŸ” è¯­æ³•è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­è¡¨å&lt;/strong&gt;ï¼šéœ€è¦æ·»åŠ å¤–é”®çº¦æŸçš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¦æŸå&lt;/strong&gt;ï¼šä¸ºå¤–é”®çº¦æŸèµ·ä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œä¾¿äºåç»­ç®¡ç†å’Œç»´æŠ¤ï¼ˆå¦‚åˆ é™¤ã€ç¦ç”¨ï¼‰ã€‚&lt;strong&gt;æ¨èå‘½åè§„åˆ™&lt;/strong&gt;ï¼š&lt;code&gt;fk_å­è¡¨å_çˆ¶è¡¨å_å­—æ®µå&lt;/code&gt;ï¼Œä¾‹å¦‚ &lt;code&gt;fk_orders_customers_customerid&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–é”®å­—æ®µ&lt;/strong&gt;ï¼šå­è¡¨ä¸­ç”¨äºå¼•ç”¨çˆ¶è¡¨çš„å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶è¡¨å&lt;/strong&gt;ï¼šè¢«å¼•ç”¨çš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶è¡¨ä¸»é”®&lt;/strong&gt;ï¼šçˆ¶è¡¨ä¸­è¢«å¼•ç”¨çš„ä¸»é”®å­—æ®µæˆ–å”¯ä¸€çº¦æŸå­—æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-çº¦æŸè¡Œä¸ºå¯é€‰"&gt;âš™ï¸ çº¦æŸè¡Œä¸ºï¼ˆå¯é€‰ï¼‰
&lt;/h3&gt;&lt;p&gt;å®šä¹‰çˆ¶è¡¨è®°å½•è¢«åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œå­è¡¨åº”å¦‚ä½•å“åº”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ON DELETE CASCADE&lt;/code&gt;ï¼š&lt;strong&gt;çº§è”åˆ é™¤&lt;/strong&gt;ã€‚å½“çˆ¶è¡¨ä¸­çš„æŸæ¡è®°å½•è¢«åˆ é™¤æ—¶ï¼Œå­è¡¨ä¸­æ‰€æœ‰å¼•ç”¨äº†è¯¥è®°å½•çš„å¤–é”®è®°å½•ä¹Ÿä¼š&lt;strong&gt;è¢«è‡ªåŠ¨åˆ é™¤&lt;/strong&gt;ã€‚é€‚ç”¨äºâ€œæ•´ä½“-éƒ¨åˆ†â€å…³ç³»ï¼ˆå¦‚åˆ é™¤éƒ¨é—¨ï¼Œå…¶ä¸‹å±å‘˜å·¥è‡ªåŠ¨åˆ é™¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON DELETE SET NULL&lt;/code&gt;ï¼š&lt;strong&gt;ç½®ç©º&lt;/strong&gt;ã€‚å½“çˆ¶è¡¨ä¸­çš„æŸæ¡è®°å½•è¢«åˆ é™¤æ—¶ï¼Œå­è¡¨ä¸­æ‰€æœ‰å¼•ç”¨äº†è¯¥è®°å½•çš„å¤–é”®å­—æ®µçš„å€¼ä¼šè¢«&lt;strong&gt;è‡ªåŠ¨è®¾ç½®ä¸º NULL&lt;/strong&gt;ã€‚è¦æ±‚è¯¥å¤–é”®å­—æ®µå…è®¸ä¸ºNULLã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON DELETE RESTRICT&lt;/code&gt;æˆ– &lt;code&gt;ON DELETE NO ACTION&lt;/code&gt;ï¼š&lt;strong&gt;é™åˆ¶åˆ é™¤/æ— æ“ä½œ&lt;/strong&gt;ï¼ˆ&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼‰ã€‚å¦‚æœå­è¡¨ä¸­è¿˜æœ‰è®°å½•å¼•ç”¨çˆ¶è¡¨ä¸­çš„æŸæ¡è®°å½•ï¼Œåˆ™&lt;strong&gt;ç¦æ­¢åˆ é™¤&lt;/strong&gt;çˆ¶è¡¨çš„è¯¥è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON UPDATE CASCADE&lt;/code&gt;ï¼š&lt;strong&gt;çº§è”æ›´æ–°&lt;/strong&gt;ã€‚å½“çˆ¶è¡¨çš„ä¸»é”®å€¼è¢«æ›´æ–°æ—¶ï¼Œå­è¡¨ä¸­å¯¹åº”å¤–é”®çš„å€¼ä¹Ÿä¼š&lt;strong&gt;è‡ªåŠ¨æ›´æ–°&lt;/strong&gt;ä¸ºæ–°çš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›é€‰é¡¹åŒæ ·é€‚ç”¨äº &lt;code&gt;ON UPDATE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨ç¤ºä¾‹"&gt;ğŸ› ï¸ åº”ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥å¸¸è§çš„â€œè®¢å•â€(&lt;code&gt;orders&lt;/code&gt;) è¡¨å¼•ç”¨â€œå®¢æˆ·â€(&lt;code&gt;customers&lt;/code&gt;) è¡¨ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. åŸºæœ¬å¤–é”®çº¦æŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE orders
ADD CONSTRAINT fk_orders_customers_customerid
FOREIGN KEY (customer_id) REFERENCES customers(customer_id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. å¸¦çº§è”åˆ é™¤çš„å¤–é”®çº¦æŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE orders
ADD CONSTRAINT fk_orders_customers_customerid
FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
ON DELETE CASCADE;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;3. å¸¦ç½®ç©ºæ“ä½œçš„å¤–é”®çº¦æŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE orders
ADD CONSTRAINT fk_orders_customers_customerid
FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
ON DELETE SET NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-7"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹åŒ¹é…&lt;/strong&gt;ï¼šå¤–é”®å­—æ®µå’Œå®ƒå¼•ç”¨çš„çˆ¶è¡¨ä¸»é”®å­—æ®µçš„&lt;strong&gt;æ•°æ®ç±»å‹å¿…é¡»å®Œå…¨ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é¢„å…ˆå­˜åœ¨&lt;/strong&gt;ï¼šåœ¨æ·»åŠ å¤–é”®çº¦æŸå‰ï¼Œè¯·ç¡®ä¿å­è¡¨ä¸­å¤–é”®å­—æ®µçš„&lt;strong&gt;æ‰€æœ‰ç°æœ‰å€¼&lt;/strong&gt;ï¼Œéƒ½å¿…é¡»åœ¨çˆ¶è¡¨çš„ä¸»é”®å­—æ®µä¸­å­˜åœ¨å¯¹åº”å€¼ã€‚å¦åˆ™ï¼Œæ·»åŠ çº¦æŸçš„æ“ä½œä¼šå¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ€§èƒ½&lt;/strong&gt;ï¼šä¸ºå¤–é”®å­—æ®µ&lt;strong&gt;åˆ›å»ºç´¢å¼•&lt;/strong&gt;é€šå¸¸æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œèƒ½æ˜¾è‘—æé«˜å…³è”æŸ¥è¯¢ï¼ˆJOINï¼‰å’Œçº§è”æ“ä½œçš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨çº§è”æ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;ON DELETE CASCADE&lt;/code&gt;å’Œ &lt;code&gt;ON UPDATE CASCADE&lt;/code&gt;è™½èƒ½è‡ªåŠ¨ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´&lt;strong&gt;æ„å¤–çš„å¤§è§„æ¨¡æ•°æ®åˆ é™¤æˆ–ä¿®æ”¹&lt;/strong&gt;ã€‚ä½¿ç”¨æ—¶åŠ¡å¿…æ˜ç¡®å…¶å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“æ”¯æŒ&lt;/strong&gt;ï¼šåœ¨ MySQL ä¸­ï¼Œåªæœ‰ &lt;strong&gt;InnoDB&lt;/strong&gt; å­˜å‚¨å¼•æ“æ”¯æŒå¤–é”®çº¦æŸã€‚å…¶ä»–å¦‚ MyISAM å¼•æ“ä¸æ”¯æŒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–æ“ä½œ"&gt;ğŸ”§ å…¶ä»–æ“ä½œ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤å¤–é”®çº¦æŸ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE å­è¡¨å DROP FOREIGN KEY çº¦æŸå; -- MySQL
ALTER TABLE å­è¡¨å DROP CONSTRAINT çº¦æŸå; -- PostgreSQL/SQL Server/Oracle
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¦ç”¨/å¯ç”¨çº¦æŸ&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“ï¼ˆå¦‚ Oracleï¼‰ä¸­ï¼Œå¯ä»¥ä¸´æ—¶ç¦ç”¨çº¦æŸä»¥è¿›è¡Œå¤§æ•°æ®é‡æ“ä½œï¼Œç„¶åå†å¯ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœ€ä½³å®è·µ"&gt;ğŸ’¡ æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å§‹ç»ˆä¸ºçº¦æŸå‘½å&lt;/strong&gt;ï¼šä½¿ç”¨æ¸…æ™°çš„å‘½åè§„åˆ™ï¼Œä¸è¦ä¾èµ–ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„åå­—ï¼Œè¿™ä¾¿äºåç»­ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§„åˆ’å¼•ç”¨å®Œæ•´æ€§&lt;/strong&gt;ï¼šåœ¨æ•°æ®åº“è®¾è®¡é˜¶æ®µå°±è§„åˆ’å¥½è¡¨ä¹‹é—´çš„å…³ç³»å’Œçº¦æŸç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘æ€§èƒ½å½±å“&lt;/strong&gt;ï¼šå¤–é”®çº¦æŸä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œåœ¨é«˜å¹¶å‘å†™å…¥åœºæ™¯éœ€æƒè¡¡ä¸€è‡´æ€§ä¸æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ é¡ºåˆ©åœ°åœ¨æ•°æ®åº“ä¸­æ·»åŠ å¤–é”®çº¦æŸã€‚&lt;/p&gt;
&lt;h2 id="datediff"&gt;DateDiff
&lt;/h2&gt;&lt;p&gt;DATEDIF å’Œ DATEDIFF éƒ½æ˜¯ç”¨äºè®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´å·®å€¼çš„å‡½æ•°ï¼Œä½†å®ƒä»¬åœ¨&lt;strong&gt;ä¸åŒçš„å¹³å°ï¼ˆExcel å’Œ SQLï¼‰&lt;/strong&gt; ä¸Šä½¿ç”¨ï¼Œè¯­æ³•å’ŒåŠŸèƒ½ä¸Šä¹Ÿæœ‰æ‰€ä¸åŒã€‚è®©æˆ‘ä¸ºä½ è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ DATEDIF (Excel) å’Œ DATEDIFF (SQL) çš„å¯¹æ¯”è¡¨æ ¼ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;DATEDIF (Excel)&lt;/th&gt;
&lt;th&gt;DATEDIFF (SQL)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å¹³å°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Excel&lt;/td&gt;
&lt;td&gt;SQL (SQL Server, MySQL ç­‰)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATEDIF(start_date, end_date, unit)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;SQL Server: &lt;code&gt;DATEDIF(datepart, startdate, enddate)&lt;/code&gt; MySQL: &lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼ (æ•´æ•°)&lt;/td&gt;
&lt;td&gt;æ•°å€¼ (æ•´æ•°)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨å•ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&amp;ldquo;Y&amp;rdquo; (å¹´), &amp;ldquo;M&amp;rdquo; (æœˆ), &amp;ldquo;D&amp;rdquo; (æ—¥), &amp;ldquo;YD&amp;rdquo;, &amp;ldquo;YM&amp;rdquo;, &amp;ldquo;MD&amp;rdquo;&lt;/td&gt;
&lt;td&gt;SQL Server: year, quarter, month, day, week, hour ç­‰ MySQL: å¤©æ•° (ä¸æ”¯æŒå¤šå•ä½ç›´æ¥è®¡ç®—)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿½ç•¥æ—¶é—´éƒ¨åˆ†ï¼Œåªå¤„ç†æ—¥æœŸ&lt;/td&gt;
&lt;td&gt;é€šå¸¸å¿½ç•¥æ—¶é—´éƒ¨åˆ†ï¼Œåªè®¡ç®—æ—¥æœŸå·®å¼‚ (å…·ä½“å–å†³äºæ•°æ®åº“å®ç°)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;éšè—å‡½æ•°&lt;/strong&gt;ï¼Œè™½æœªåœ¨æ’å…¥å‡½æ•°åˆ—è¡¨ä¸­ç›´æ¥åˆ—å‡ºï¼Œä½†å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;SQL ä¸­çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;&lt;strong&gt;å…·ä½“è¯­æ³•å’Œæ”¯æŒçš„æ—¥æœŸéƒ¨åˆ†å› æ•°æ®åº“ç³»ç»Ÿè€Œå¼‚&lt;/strong&gt;ï¼ˆä¾‹å¦‚ SQL Server å’Œ MySQL å°±ä¸å¤ªä¸€æ ·ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-datedif-åœ¨-excel-ä¸­çš„å•ä½-unit"&gt;ğŸ“Š DATEDIF åœ¨ Excel ä¸­çš„å•ä½ (unit)
&lt;/h3&gt;&lt;p&gt;Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;å‡½æ•°é€šè¿‡ &lt;code&gt;unit&lt;/code&gt;å‚æ•°æŒ‡å®šè®¡ç®—å•ä½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;unit&lt;/th&gt;
&lt;th&gt;å«ä¹‰ä¸è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹ (å‡è®¾ start_date=&amp;ldquo;2020-1-1&amp;rdquo;, end_date=&amp;ldquo;2021-3-4&amp;rdquo;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;Y&amp;rdquo;&lt;/td&gt;
&lt;td&gt;æ—¶é—´æ®µä¸­çš„&lt;strong&gt;æ•´å¹´æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 1 (2020-1-1 åˆ° 2021-3-4 ä¹‹é—´å®Œæ•´çš„1å¹´)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;M&amp;rdquo;&lt;/td&gt;
&lt;td&gt;æ—¶é—´æ®µä¸­çš„&lt;strong&gt;æ•´æœˆæ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 14 (1å¹´é›¶2ä¸ªæœˆï¼Œå…±14ä¸ªæœˆ)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;D&amp;rdquo;&lt;/td&gt;
&lt;td&gt;æ—¶é—´æ®µä¸­çš„&lt;strong&gt;æ€»å¤©æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 428&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;YD&amp;rdquo;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æ—¥æœŸä¸ç»“æŸæ—¥æœŸçš„&lt;strong&gt;åŒå¹´é—´éš”å¤©æ•°&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¿½ç•¥å¹´ä»½&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 63 (å³ 2021-1-1 åˆ° 2021-3-4 ä¹‹é—´çš„å¤©æ•°)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;YM&amp;rdquo;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æ—¥æœŸä¸ç»“æŸæ—¥æœŸçš„&lt;strong&gt;åŒå¹´é—´éš”æœˆæ•°&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¿½ç•¥å¹´ä»½å’Œå¤©æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 2 (1æœˆåˆ°3æœˆï¼Œç›¸å·®2ä¸ªæœˆ)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;MD&amp;rdquo;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æ—¥æœŸä¸ç»“æŸæ—¥æœŸçš„&lt;strong&gt;åŒæœˆé—´éš”å¤©æ•°&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¿½ç•¥å¹´ä»½å’Œæœˆä»½&lt;/strong&gt;ã€‚ &lt;strong&gt;è®¡ç®—ç»“æœå¯èƒ½å› æœˆä»½å’Œé—°å¹´è€Œæœ‰æ„å¤–æƒ…å†µï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»“æœ: 3 (1å·åˆ°4å·ï¼Œç›¸å·®3å¤©)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-datedif-åœ¨-excel-ä¸­çš„ç”¨æ³•ç¤ºä¾‹"&gt;âŒ¨ï¸ DATEDIF åœ¨ Excel ä¸­çš„ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾ A1 å•å…ƒæ ¼æ˜¯èµ·å§‹æ—¥æœŸ (2000-01-01)ï¼ŒB1 å•å…ƒæ ¼æ˜¯ç»“æŸæ—¥æœŸ (2025-09-15)ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆæ³¨æ„æ—¥æœŸæ ¼å¼è¦ç¬¦åˆä½ çš„ Excel è®¾ç½®ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—æ•´å¹´æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;Y&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(&amp;#34;2000-01-01&amp;#34;, &amp;#34;2025-09-15&amp;#34;, &amp;#34;Y&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°†è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å®Œæ•´å¹´æ•°å·®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—æ•´æœˆæ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;M&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ€»å®Œæ•´æœˆæ•°å·®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¤©æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;D&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ€»å¤©æ•°å·®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¿½ç•¥å¹´ä»½çš„å¤©æ•°å·® (&amp;ldquo;YD&amp;rdquo;)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;YD&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›åŒä¸€å¹´å†…ä»èµ·å§‹æ—¥æœŸçš„æœˆæ—¥åˆ°ç»“æŸæ—¥æœŸçš„æœˆæ—¥ä¹‹é—´çš„å¤©æ•°ï¼ˆå¿½ç•¥å¹´ä»½ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¿½ç•¥å¹´ä»½çš„æœˆæ•°å·® (&amp;ldquo;YM&amp;rdquo;)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;YM&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›åŒä¸€å¹´å†…ä»èµ·å§‹æ—¥æœŸçš„æœˆä»½åˆ°ç»“æŸæ—¥æœŸçš„æœˆä»½ä¹‹é—´çš„å®Œæ•´æœˆæ•°ï¼ˆå¿½ç•¥å¹´ä»½å’Œå¤©æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¿½ç•¥å¹´ä»½å’Œæœˆä»½çš„å¤©æ•°å·® (&amp;ldquo;MD&amp;rdquo;)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;MD&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›åŒä¸€æœˆå†…ä»èµ·å§‹æ—¥æœŸçš„æ—¥åˆ°ç»“æŸæ—¥æœŸçš„æ—¥ä¹‹é—´çš„å¤©æ•°ï¼ˆå¿½ç•¥å¹´ä»½å’Œæœˆä»½ï¼‰ã€‚&lt;strong&gt;æ­¤å‚æ•°è®¡ç®—ç»“æœå¯èƒ½å› æœˆä»½å¤©æ•°ä¸åŒå’Œé—°å¹´è€Œæœ‰è¯¯ï¼Œéœ€ç‰¹åˆ«ç•™æ„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»„åˆä½¿ç”¨è®¡ç®—ç²¾ç¡®æ—¶é—´å·®&lt;/strong&gt;ï¼ˆä¾‹å¦‚å¹´é¾„çš„è®¡ç®—ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, TODAY(), &amp;#34;Y&amp;#34;) &amp;amp; &amp;#34;å², &amp;#34; &amp;amp; DATEDIF(A1, TODAY(), &amp;#34;YM&amp;#34;) &amp;amp; &amp;#34;ä¸ªæœˆ, &amp;#34; &amp;amp; DATEDIF(A1, TODAY(), &amp;#34;MD&amp;#34;) &amp;amp; &amp;#34;å¤©&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªå…¬å¼ä¼šè®¡ç®—å‡ºä» A1 æ—¥æœŸåˆ°ä»Šå¤©çš„å…·ä½“å¹´é™ã€æœˆæ•°å’Œå¤©æ•°ï¼Œç»“æœæ ¼å¼å¦‚ &amp;ldquo;25å², 8ä¸ªæœˆ, 14å¤©&amp;rdquo; (å…·ä½“å€¼å–å†³äºå½“å‰æ—¥æœŸ)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-datediff-åœ¨-sql-ä¸­çš„ç”¨æ³•ç¤ºä¾‹"&gt;ğŸ“‹ DATEDIFF åœ¨ SQL ä¸­çš„ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;SQL ä¸­çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;å‡½æ•°å› æ•°æ®åº“ç³»ç»Ÿä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. SQL Server&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;DATEDIFF ( datepart , startdate , enddate )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;datepart&lt;/code&gt;æŒ‡å®šå·®å€¼çš„å•ä½ï¼ˆå¦‚ &lt;code&gt;year&lt;/code&gt;, &lt;code&gt;quarter&lt;/code&gt;, &lt;code&gt;month&lt;/code&gt;, &lt;code&gt;day&lt;/code&gt;, &lt;code&gt;week&lt;/code&gt;, &lt;code&gt;hour&lt;/code&gt;, &lt;code&gt;minute&lt;/code&gt;, &lt;code&gt;second&lt;/code&gt;ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(day, &amp;#39;2022-01-01&amp;#39;, &amp;#39;2023-01-01&amp;#39;) AS DaysDifference;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å› 364ï¼ˆå‡è®¾2022å¹´ä¸æ˜¯é—°å¹´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æœˆæ•°å·®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(month, &amp;#39;2022-01-15&amp;#39;, &amp;#39;2023-03-10&amp;#39;) AS MonthsDifference;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å› 14ï¼ˆè·¨è¶Šçš„æœˆä»½è¾¹ç•Œæ•°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢å‘˜å·¥å…¥èŒå¹´é™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT EmployeeName, DATEDIFF(year, HireDate, GETDATE()) AS YearsSinceHire FROM Employees;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. MySQL&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;MySQL çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;å‡½æ•°&lt;strong&gt;åªè¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®&lt;/strong&gt;ï¼ˆ&lt;code&gt;date1 - date2&lt;/code&gt;ï¼‰ï¼Œå¹¶ä¸”å¿½ç•¥æ—¶é—´éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¤©æ•°å·®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(&amp;#39;2022-04-30&amp;#39;, &amp;#39;2022-04-29&amp;#39;) AS DayDiff; -- è¿”å› 1
SELECT DATEDIFF(&amp;#39;2022-04-29&amp;#39;, &amp;#39;2022-04-30&amp;#39;) AS DayDiff; -- è¿”å› -1
SELECT DATEDIFF(&amp;#39;2022-04-30&amp;#39;, &amp;#39;2022-04-30 14:00:00&amp;#39;) AS DayDiff; -- è¿”å› 0
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸé¡ºåº&lt;/strong&gt;ï¼šå¯¹äº Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;ï¼Œ&lt;strong&gt;ç»“æŸæ—¥æœŸ (&lt;code&gt;end_date&lt;/code&gt;) å¿…é¡»æ™šäºæˆ–ç­‰äºèµ·å§‹æ—¥æœŸ (&lt;code&gt;start_date&lt;/code&gt;)&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šè¿”å› &lt;code&gt;#NUM!&lt;/code&gt;é”™è¯¯ã€‚ å¯¹äº SQL Server çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;ï¼Œå¦‚æœ &lt;code&gt;startdate&lt;/code&gt;æ™šäº &lt;code&gt;enddate&lt;/code&gt;ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚ MySQL çš„ &lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;ç»“æœä¹Ÿä¸º &lt;code&gt;date1 - date2&lt;/code&gt;ï¼Œæ•…æ—¥æœŸé¡ºåºå½±å“ç»“æœæ­£è´Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Excel ä¸­çš„éšè—å‡½æ•°&lt;/strong&gt;ï¼š&lt;code&gt;DATEDIF&lt;/code&gt;åœ¨ Excel çš„å‡½æ•°åˆ—è¡¨ä¸­å¯èƒ½æ‰¾ä¸åˆ°ï¼Œéœ€è¦æ‰‹åŠ¨è¾“å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&amp;ldquo;MD&amp;rdquo; å‚æ•°çš„æ½œåœ¨é—®é¢˜&lt;/strong&gt;ï¼šåœ¨ Excel ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;&amp;quot;MD&amp;quot;&lt;/code&gt;å‚æ•°æ—¶ï¼Œç”±äºç®—æ³•ç‰¹æ€§ï¼Œåœ¨æŸäº›ç‰¹å®šæ—¥æœŸï¼ˆä¾‹å¦‚å½“èµ·å§‹æ—¥æ˜¯ä¸€ä¸ªæœˆçš„æœ€åä¸€å¤©æ—¶ï¼‰å¯èƒ½ä¼šå¾—åˆ°æ„å¤–ç»“æœï¼ˆ0æˆ–è´Ÿæ•°ï¼‰ï¼Œå»ºè®®è°¨æ…ä½¿ç”¨æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ³•æ›¿ä»£è®¡ç®—å¤©æ•°å·®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SQL ä¸­çš„æ•°æ®åº“å·®å¼‚&lt;/strong&gt;ï¼šä¸åŒæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ SQL Server, MySQL, Oracle ç­‰ï¼‰å¯¹ &lt;code&gt;DATEDIFF&lt;/code&gt;æˆ–å…¶ç±»ä¼¼å‡½æ•°çš„å®ç°å¯èƒ½æœ‰å¾ˆå¤§ä¸åŒï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°é¡ºåºã€æ”¯æŒçš„æ—¥æœŸå•ä½ç­‰ã€‚ä½¿ç”¨æ—¶åŠ¡å¿…æŸ¥é˜…ç›¸åº”æ•°æ®åº“çš„å®˜æ–¹æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´éƒ¨åˆ†å¤„ç†&lt;/strong&gt;ï¼šæ— è®ºæ˜¯ Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;è¿˜æ˜¯ SQL çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;ï¼Œåœ¨è®¡ç®—æ—¥æœŸå·®å€¼æ—¶é€šå¸¸&lt;strong&gt;ä¼šå¿½ç•¥æ—¶é—´éƒ¨åˆ†&lt;/strong&gt;ï¼ŒåªåŸºäºæ—¥æœŸéƒ¨åˆ†è¿›è¡Œè®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SQL Server çš„è¾¹ç•Œè®¡ç®—&lt;/strong&gt;ï¼šåœ¨ SQL Server ä¸­ï¼Œ&lt;code&gt;DATEDIFF&lt;/code&gt;è®¡ç®—çš„æ˜¯æŒ‡å®šçš„ &lt;code&gt;datepart&lt;/code&gt;&lt;strong&gt;è¾¹ç•Œè·¨è¶Šçš„æ¬¡æ•°&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ç²¾ç¡®çš„æ—¶é—´å·®ã€‚ ä¾‹å¦‚ï¼Œ&lt;code&gt;SELECT DATEDIFF(month, '2023-01-31', '2023-02-01')&lt;/code&gt;ä¼šè¿”å› 1ï¼Œå› ä¸ºè·¨è¶Šäº†1æœˆåˆ°2æœˆçš„è¾¹ç•Œï¼Œå°½ç®¡å®é™…åªç›¸å·®1å¤©ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ ä¸»è¦åœ¨ &lt;strong&gt;Excel&lt;/strong&gt; ä¸­å¤„ç†æ—¥æœŸè®¡ç®—ï¼Œ&lt;strong&gt;&lt;code&gt;DATEDIF&lt;/code&gt;&lt;/strong&gt; æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„å·¥å…·ï¼Œæä¾›äº†å¤šç§è®¡ç®—å¹´æœˆæ—¥æ–¹å¼çš„é€‰æ‹©ï¼Œä½†è¦ç•™æ„å…¶å‚æ•°ç‰¹æ€§å’Œæ½œåœ¨é™·é˜±ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ åœ¨ &lt;strong&gt;SQL&lt;/strong&gt; ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œ&lt;strong&gt;&lt;code&gt;DATEDIFF&lt;/code&gt;&lt;/strong&gt; å‡½æ•°ï¼ˆæˆ–å…¶å˜ä½“/ç±»ä¼¼åŠŸèƒ½ï¼‰æ˜¯è¿›è¡Œæ—¥æœŸå·®å€¼ç»Ÿè®¡çš„åˆ©å™¨ï¼Œä½†ä¸€å®šè¦ç‰¢è®°&lt;strong&gt;ä¸åŒæ•°æ®åº“ç³»ç»Ÿçš„è¯­æ³•å’ŒåŠŸèƒ½å­˜åœ¨å·®å¼‚&lt;/strong&gt;ï¼Œå…·ä½“ç”¨æ³•éœ€å‚è€ƒä½ æ‰€ä½¿ç”¨æ•°æ®åº“çš„è§„èŒƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ DATEDIF/DATEDIFF å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="all"&gt;ALL
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;ALL&lt;/code&gt;å…³é”®å­—æ˜¯ä¸€ä¸ªç”¨äº&lt;strong&gt;å­æŸ¥è¯¢ä¸­è¿›è¡Œæ¯”è¾ƒæ“ä½œ&lt;/strong&gt;çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œå®ƒè¦æ±‚ä¸»æŸ¥è¯¢ä¸­çš„æŸä¸ªå€¼å¿…é¡»æ»¡è¶³ä¸å­æŸ¥è¯¢è¿”å›çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼ä¹‹é—´çš„æ¯”è¾ƒæ¡ä»¶ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»å®ƒçš„ç”¨æ³•ã€åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“Š &lt;strong&gt;ALL çš„åŸºæœ¬è¯­æ³•ä¸å«ä¹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ALL&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column_name(s)
FROM table_name
WHERE column_name operator ALL (SELECT column_name FROM table_name WHERE condition);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ &lt;code&gt;operator&lt;/code&gt;å¯ä»¥æ˜¯ä»»ä½•æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¦‚ &lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&lt;/code&gt;ã€&lt;code&gt;&amp;gt;=&lt;/code&gt;ã€&lt;code&gt;&amp;lt;=&lt;/code&gt;ã€&lt;code&gt;=&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;æˆ– &lt;code&gt;!=&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒå«ä¹‰&lt;/strong&gt;ï¼šåªæœ‰å½“ &lt;code&gt;column_name&lt;/code&gt;ä¸å­æŸ¥è¯¢è¿”å›çš„&lt;strong&gt;æ¯ä¸€ä¸ª&lt;/strong&gt;å€¼éƒ½æ»¡è¶³æ¯”è¾ƒæ¡ä»¶æ—¶ï¼Œè¯¥è¡Œçš„æ¡ä»¶æ‰è¢«è®¤å®šä¸ºçœŸï¼ˆTrueï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;ALL ä¸æ¯”è¾ƒè¿ç®—ç¬¦ç»“åˆçš„ä½¿ç”¨åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ALL&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥ä¸ä¸åŒçš„æ¯”è¾ƒè¿ç®—ç¬¦ç»“åˆï¼Œå®ç°çµæ´»çš„æŸ¥è¯¢é€»è¾‘ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¯”è¾ƒç±»å‹&lt;/th&gt;
&lt;th&gt;è¯­ä¹‰è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹ï¼ˆå‡è®¾å­æŸ¥è¯¢è¿”å›å¤šå€¼ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;gt; ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§äºå­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;gt; å­æŸ¥è¯¢æœ€å¤§å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt; ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°äºå­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;lt; å­æŸ¥è¯¢æœ€å°å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;= ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç­‰äºå­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä»…å½“å­æŸ¥è¯¢æ‰€æœ‰å€¼ç›¸ç­‰ä¸”ä¸»æŸ¥è¯¢å€¼ä¸ä¹‹ç›¸ç­‰æ—¶ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;gt;= ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§äºç­‰äºå­æŸ¥è¯¢çš„æ‰€æœ‰å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;gt;= å­æŸ¥è¯¢æœ€å¤§å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt;= ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°äºç­‰äºå­æŸ¥è¯¢çš„æ‰€æœ‰å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;lt;= å­æŸ¥è¯¢æœ€å°å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt;&amp;gt; ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ç­‰äºå­æŸ¥è¯¢çš„&lt;strong&gt;ä»»ä½•&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;ç­‰ä»·äº &lt;code&gt;NOT IN&lt;/code&gt;(ä½†æ³¨æ„å¤„ç†NULLå€¼)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;ALL çš„åº”ç”¨å®ä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id="1-æŸ¥æ‰¾é”€å”®é¢è¶…è¿‡æ‰€æœ‰åŒºåŸŸå¹³å‡é”€å”®é¢çš„äº§å“"&gt;1. æŸ¥æ‰¾é”€å”®é¢è¶…è¿‡æ‰€æœ‰åŒºåŸŸå¹³å‡é”€å”®é¢çš„äº§å“
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT product_id
FROM sales
WHERE total_sales &amp;gt; ALL (
SELECT AVG(total_sales)
FROM sales
GROUP BY region_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæŸ¥è¯¢èƒ½æ‰¾å‡ºé‚£äº›é”€å”®é¢æ¯”æ¯ä¸ªåŒºåŸŸå¹³å‡é”€å”®é¢éƒ½é«˜çš„äº§å“ã€‚&lt;/p&gt;
&lt;h4 id="2-æŸ¥æ‰¾æˆç»©æœ€é«˜çš„å­¦ç”Ÿ"&gt;2. æŸ¥æ‰¾æˆç»©æœ€é«˜çš„å­¦ç”Ÿ
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT id, score
FROM students
WHERE score &amp;gt;= ALL (SELECT score FROM students);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤æŸ¥è¯¢è¿”å›æˆç»©ä¸ä½äºæ‰€æœ‰å…¶ä»–å­¦ç”Ÿçš„å­¦ç”Ÿï¼Œå³æœ€é«˜åˆ†æˆ–å¹¶åˆ—æœ€é«˜åˆ†çš„å­¦ç”Ÿã€‚&lt;/p&gt;
&lt;h4 id="3-æŸ¥æ‰¾ä»·æ ¼ä¸ç­‰äºä»»ä½•ä¿ƒé”€äº§å“ä»·æ ¼çš„äº§å“"&gt;3. æŸ¥æ‰¾ä»·æ ¼ä¸ç­‰äºä»»ä½•ä¿ƒé”€äº§å“ä»·æ ¼çš„äº§å“
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT ProductName, Price
FROM Products
WHERE Price &amp;lt;&amp;gt; ALL (SELECT Price FROM Products WHERE IsOnSale = 1);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤æŸ¥è¯¢å¯æ‰¾å‡ºæ‰€æœ‰ä»·æ ¼ä¸åœ¨ä¿ƒé”€äº§å“ä»·æ ¼åˆ—è¡¨ä¸­çš„äº§å“ã€‚&lt;/p&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;ä½¿ç”¨ ALL çš„æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ALL&lt;/code&gt;æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­æŸ¥è¯¢è¿”å›ç©ºé›†çš„æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœå­æŸ¥è¯¢æ²¡æœ‰è¿”å›ä»»ä½•è¡Œï¼Œ&lt;code&gt;ALL&lt;/code&gt;å‰çš„æ¡ä»¶ä¼š&lt;strong&gt;æ€»æ˜¯ä¸ºçœŸ&lt;/strong&gt;ã€‚ è¿™æ˜¯å› ä¸ºâ€œä¸ç©ºé›†ä¸­çš„æ‰€æœ‰å…ƒç´ æ¯”è¾ƒâ€çš„é€»è¾‘è¢«å®šä¹‰ä¸ºçœŸã€‚åŠ¡å¿…ç¡®ä¿å­æŸ¥è¯¢èƒ½è¿”å›é¢„æœŸæ•°æ®ï¼Œæˆ–åœ¨å­æŸ¥è¯¢ä¸­ä½¿ç”¨ &lt;code&gt;COALESCE&lt;/code&gt;ç­‰å‡½æ•°å¤„ç†ç©ºå€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULL å€¼çš„å½±å“&lt;/strong&gt;ï¼šå¦‚æœå­æŸ¥è¯¢è¿”å›çš„ç»“æœé›†ä¸­åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä¸ &lt;code&gt;ALL&lt;/code&gt;è¿›è¡Œçš„æ¯”è¾ƒå¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœï¼ˆå¦‚ &lt;code&gt;&amp;gt; ALL (1, 2, NULL)&lt;/code&gt;é€šå¸¸ä¸º &lt;code&gt;UNKNOWN&lt;/code&gt;ï¼Œå¯¼è‡´è¡Œè¢«æ’é™¤ï¼‰ã€‚æŸ¥è¯¢æ—¶éœ€æ³¨æ„æ•°æ®ä¸­æ˜¯å¦å­˜åœ¨NULLã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½é—®é¢˜&lt;/strong&gt;ï¼šå½“å­æŸ¥è¯¢è¿”å›çš„æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œ&lt;code&gt;ALL&lt;/code&gt;å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºå®ƒéœ€è¦é€è¡Œè¿›è¡Œæ¯”è¾ƒã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºå­æŸ¥è¯¢ä¸­çš„å…³è”å­—æ®µå’Œæ¡ä»¶å­—æ®µæ·»åŠ ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°è¯•&lt;strong&gt;ä¼˜åŒ–å­æŸ¥è¯¢æœ¬èº«&lt;/strong&gt;ï¼Œå‡å°‘å…¶è¿”å›çš„æ•°æ®é‡ã€‚&lt;/li&gt;
&lt;li&gt;è€ƒè™‘ä½¿ç”¨ &lt;code&gt;EXISTS&lt;/code&gt;æˆ– &lt;code&gt;NOT EXISTS&lt;/code&gt;ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº &lt;code&gt;&amp;gt; ALL&lt;/code&gt;å’Œ &lt;code&gt;&amp;lt; ALL&lt;/code&gt;è¿™ç±»æ“ä½œï¼Œæœ‰æ—¶å¯ä»¥ç”¨ &lt;code&gt;MAX()&lt;/code&gt;æˆ– &lt;code&gt;MIN()&lt;/code&gt;èšåˆå‡½æ•°é‡å†™æŸ¥è¯¢ï¼Œå¾€å¾€èƒ½è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;SELECT ... WHERE column &amp;gt; ALL (SELECT ...)&lt;/code&gt;æœ‰æ—¶å¯æ”¹å†™ä¸º &lt;code&gt;SELECT ... WHERE column &amp;gt; (SELECT MAX(...) FROM ...)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;âš–ï¸ &lt;strong&gt;ALL ä¸ SOME/ANY çš„åŒºåˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ALL&lt;/code&gt;è¦æ±‚æ¡ä»¶ä¸å­æŸ¥è¯¢çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SOME&lt;/code&gt;æˆ– &lt;code&gt;ANY&lt;/code&gt;ï¼ˆä¸¤è€…åŸºæœ¬åŒä¹‰ï¼‰åˆ™è¦æ±‚æ¡ä»¶ä¸å­æŸ¥è¯¢çš„&lt;strong&gt;ä»»æ„ä¸€ä¸ª&lt;/strong&gt;å€¼åŒ¹é…å³å¯ã€‚
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;salary &amp;gt; ANY (å­æŸ¥è¯¢)&lt;/code&gt;è¡¨ç¤ºå·¥èµ„é«˜äºå­æŸ¥è¯¢ç»“æœä¸­è‡³å°‘ä¸€ä¸ªå€¼å³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;ALL&lt;/code&gt;å…³é”®å­—æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºæ‰§è¡Œéœ€è¦ä¸å­æŸ¥è¯¢ç»“æœé›†ä¸­æ‰€æœ‰å€¼è¿›è¡Œæ¯”è¾ƒçš„å¤æ‚æŸ¥è¯¢ã€‚ç†Ÿç»ƒæŒæ¡å…¶è¯­æ³•ã€åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ï¼Œèƒ½å¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°ä»æ•°æ®åº“ä¸­æå–æ‰€éœ€ä¿¡æ¯ã€‚ä½†åœ¨ä½¿ç”¨æ—¶ï¼ŒåŠ¡å¿…æ³¨æ„å…¶å¯èƒ½å¸¦æ¥çš„æ€§èƒ½å½±å“å’Œç©ºå­æŸ¥è¯¢é›†å¸¦æ¥çš„é€»è¾‘å˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id="mysql-æ±‰å­—å­—ç¬¦"&gt;Mysql æ±‰å­—å­—ç¬¦
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œä¸€ä¸ªæ±‰å­—å­—ç¬¦ç©¶ç«Ÿå ç”¨å¤šå°‘ &lt;code&gt;CHAR&lt;/code&gt;ï¼Œ&lt;strong&gt;ä¸»è¦å–å†³äºæ•°æ®åº“å’Œè¡¨æ‰€ä½¿ç”¨çš„å­—ç¬¦ç¼–ç &lt;/strong&gt;ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;CHAR(n)&lt;/code&gt;å’Œ &lt;code&gt;VARCHAR(n)&lt;/code&gt;ä¸­çš„ &lt;code&gt;n&lt;/code&gt;æ˜¯æŒ‡&lt;strong&gt;å¯å­˜å‚¨çš„å­—ç¬¦æ•°&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ã€‚å› æ­¤ï¼Œæ— è®ºä½¿ç”¨å“ªç§ç¼–ç ï¼Œ&lt;code&gt;n&lt;/code&gt;çš„å€¼ç›´æ¥å†³å®šäº†è¯¥å­—æ®µèƒ½å­˜æ”¾å¤šå°‘ä¸ªæ±‰å­—ï¼ˆæˆ–è‹±æ–‡å­—æ¯ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸åŒå­—ç¬¦ç¼–ç ä¸‹çš„å…³é”®ä¿¡æ¯ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—ç¬¦ç¼–ç  (Character Set)&lt;/th&gt;
&lt;th&gt;ä¸€ä¸ªæ±‰å­—æ‰€å å­—èŠ‚æ•°&lt;/th&gt;
&lt;th&gt;å¯¹ &lt;code&gt;CHAR(n)&lt;/code&gt;/ &lt;code&gt;VARCHAR(n)&lt;/code&gt;çš„å½±å“&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;UTF-8&lt;/strong&gt; (æ¨èä½¿ç”¨)&lt;/td&gt;
&lt;td&gt;3 ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰ &lt;code&gt;CHAR(10)&lt;/code&gt;ï¼Œåˆ™å¯å­˜å‚¨ &lt;strong&gt;10 ä¸ªæ±‰å­—&lt;/strong&gt;ï¼Œå®é™…å ç”¨çº¦ 30 å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/td&gt;
&lt;td&gt;MySQL çš„ &lt;code&gt;utf8&lt;/code&gt;å…¶å®æ˜¯é˜‰å‰²ç‰ˆï¼Œæ¨èä½¿ç”¨ &lt;code&gt;utf8mb4&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GBK&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2 ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰ &lt;code&gt;CHAR(10)&lt;/code&gt;ï¼Œåˆ™å¯å­˜å‚¨ &lt;strong&gt;10 ä¸ªæ±‰å­—&lt;/strong&gt;ï¼Œå®é™…å ç”¨çº¦ 20 å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/td&gt;
&lt;td&gt;ä¸€ç§è¾ƒè€çš„ä¸­æ–‡ç¼–ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;utf8mb4&lt;/strong&gt; (å¼ºçƒˆæ¨è)&lt;/td&gt;
&lt;td&gt;4 ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰ &lt;code&gt;CHAR(10)&lt;/code&gt;ï¼Œåˆ™å¯å­˜å‚¨ &lt;strong&gt;10 ä¸ªæ±‰å­—&lt;/strong&gt;ï¼Œå®é™…å ç”¨æœ€å¤š 40 å­—èŠ‚ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çœŸæ­£å®Œæ•´çš„ UTF-8&lt;/strong&gt;ï¼Œæ”¯æŒæ‰€æœ‰ Unicode å­—ç¬¦ï¼ˆå¦‚è¡¨æƒ…ç¬¦å· ğŸ˜€ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;é‡è¦è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œåœ¨è®¾è®¡å­—æ®µé•¿åº¦æ—¶ï¼Œä½ åªéœ€è¦å…³å¿ƒéœ€è¦å­˜å‚¨çš„&lt;strong&gt;å­—ç¬¦ä¸ªæ•°&lt;/strong&gt; &lt;code&gt;n&lt;/code&gt;ã€‚ä¾‹å¦‚ï¼Œæ— è®ºæ˜¯æƒ³å­˜10ä¸ªè‹±æ–‡å•è¯è¿˜æ˜¯10ä¸ªæ±‰å­—ï¼Œç›´æ¥å®šä¹‰ &lt;code&gt;VARCHAR(10)&lt;/code&gt;å³å¯ï¼ŒMySQL ä¼šè‡ªåŠ¨å¤„ç†åº•å±‚å­—èŠ‚çš„åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;å¦‚ä½•æŸ¥çœ‹å’Œè®¡ç®—é•¿åº¦ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL æä¾›äº†ä¸¤ä¸ªå‡½æ•°æ¥å¸®åŠ©æŸ¥çœ‹å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå®ƒä»¬çš„åŒºåˆ«å¾ˆé‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LENGTH(str)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å­—ç¬¦ä¸² &lt;strong&gt;&lt;code&gt;str&lt;/code&gt;çš„å­—èŠ‚é•¿åº¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT LENGTH(&amp;#39;æ±‰å­—&amp;#39;); -- åœ¨ UTF-8 ç¯å¢ƒä¸‹ï¼Œè¿”å› 6 (2ä¸ªæ±‰å­— * 3å­—èŠ‚)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;CHAR_LENGTH(str)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å­—ç¬¦ä¸² &lt;strong&gt;&lt;code&gt;str&lt;/code&gt;çš„å­—ç¬¦ä¸ªæ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CHAR_LENGTH(&amp;#39;æ±‰å­—&amp;#39;); -- åœ¨ä»»ä½•ç¼–ç ä¸‹ï¼Œéƒ½è¿”å› 2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¯ &lt;strong&gt;æœ€ä½³å®è·µä¸å»ºè®®&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—ç¬¦é›†é€‰æ‹©&lt;/strong&gt;ï¼šå¼ºçƒˆå»ºè®®ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;utf8mb4&lt;/code&gt;&lt;/strong&gt; ä½œä¸ºé»˜è®¤å­—ç¬¦é›†ï¼Œå› ä¸ºå®ƒèƒ½æ”¯æŒæœ€å¹¿æ³›çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬å„ç§è¡¨æƒ…ç¬¦å·ï¼ˆEmojiï¼‰ï¼Œå¯ä»¥é¿å…å¾ˆå¤šæ½œåœ¨çš„å­—ç¬¦æ˜¾ç¤ºé—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—æ®µé•¿åº¦è§„åˆ’&lt;/strong&gt;ï¼šå®šä¹‰ &lt;code&gt;CHAR&lt;/code&gt;æˆ– &lt;code&gt;VARCHAR&lt;/code&gt;åˆ—æ—¶ï¼Œåªéœ€æ ¹æ®&lt;strong&gt;éœ€è¦å­˜å‚¨çš„æœ€å¤§å­—ç¬¦æ•°&lt;/strong&gt;æ¥è®¾ç½® &lt;code&gt;n&lt;/code&gt;ï¼Œè€Œæ— éœ€è€ƒè™‘åº•å±‚å­—èŠ‚è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œé¢„è®¡å­˜å‚¨ä¸è¶…è¿‡10ä¸ªæ±‰å­—çš„åå­—ï¼Œå®šä¹‰ &lt;code&gt;VARCHAR(10)&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ£€æŸ¥å­—ç¬¦é›†&lt;/strong&gt;ï¼šä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ•°æ®åº“ã€è¡¨å’Œåˆ—çš„å­—ç¬¦é›†è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW CREATE TABLE your_table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;âš¡ &lt;strong&gt;ç®€å•æ¥è¯´&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®°ä½æœ€å…³é”®çš„ä¸€ç‚¹ï¼šåœ¨ MySQL ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;CHAR(n)&lt;/code&gt;å’Œ &lt;code&gt;VARCHAR(n)&lt;/code&gt;é‡Œçš„ &lt;code&gt;n&lt;/code&gt;ä»£è¡¨çš„æ˜¯å­—ç¬¦æ•°ï¼Œä¸æ˜¯å­—èŠ‚æ•°&lt;/strong&gt;ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªæ±‰å­—å­—ç¬¦åœ¨ &lt;code&gt;CHAR&lt;/code&gt;ç±»å‹ä¸­æ°¸è¿œç®—ä½œ &lt;strong&gt;1 ä¸ª char&lt;/strong&gt;ã€‚å®é™…çš„å­—èŠ‚æ¶ˆè€—åˆ™å–å†³äºå­—ç¬¦ç¼–ç ï¼ˆUTF-8 é€šå¸¸ 3 å­—èŠ‚ï¼ŒGBK é€šå¸¸ 2 å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id="stuff"&gt;STUFF
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°è™½ç„¶å¹¶éå…¶åŸç”Ÿå†…ç½®å‡½æ•°ï¼Œä½†å› å…¶åœ¨å­—ç¬¦ä¸²å¤„ç†ä¸Šçš„å®ç”¨æ€§ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šé€‰æ‹©è‡ªå®šä¹‰å®ç°ã€‚å®ƒä¸»è¦ç”¨äºåœ¨å­—ç¬¦ä¸²çš„æŒ‡å®šä½ç½®è¿›è¡Œåˆ é™¤å’Œæ’å…¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿäº†è§£ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°çš„åŠŸèƒ½å’Œæ›¿ä»£æ–¹æ¡ˆï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ¦‚æ‹¬å…¶æ ¸å¿ƒç‰¹æ€§å’Œåœ¨ MySQL ä¸­çš„å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;STUFF å‡½æ•° (é€šå¸¸è§äº SQL Server) / MySQL è‡ªå®šä¹‰å®ç°&lt;/th&gt;
&lt;th&gt;MySQL ä¸­çš„å¸¸ç”¨æ›¿ä»£æ–¹æ¡ˆ (å¦‚ &lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å­—ç¬¦ä¸²æŒ‡å®šä½ç½®&lt;strong&gt;åˆ é™¤&lt;/strong&gt;æŒ‡å®šé•¿åº¦å­—ç¬¦ï¼Œå¹¶&lt;strong&gt;æ’å…¥&lt;/strong&gt;æ–°å­ä¸²&lt;/td&gt;
&lt;td&gt;åœ¨å­—ç¬¦ä¸²æŒ‡å®šä½ç½®&lt;strong&gt;æ’å…¥&lt;/strong&gt;å­ä¸²ï¼ˆå¯é€‰æ˜¯å¦è¦†ç›–/åˆ é™¤åŸå­—ç¬¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•æ¦‚è¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;STUFF(str, start, length, newstr)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSERT(str, pos, length, newstr)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ·å§‹ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;start&lt;/code&gt;ä» &lt;strong&gt;1&lt;/strong&gt; å¼€å§‹è®¡æ•°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;pos&lt;/code&gt;ä» &lt;strong&gt;1&lt;/strong&gt; å¼€å§‹è®¡æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ é™¤å­—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜ç¡®æŒ‡å®šè¦åˆ é™¤çš„å­—ç¬¦æ•° &lt;code&gt;length&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;code&gt;length&lt;/code&gt;æŒ‡å®šå¾…&lt;strong&gt;æ›¿æ¢/è¦†ç›–&lt;/strong&gt;çš„åŸå­—ç¬¦æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥å­—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥ &lt;code&gt;newstr&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥ &lt;code&gt;newstr&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦åŸç”Ÿæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MySQL ä¸­&lt;strong&gt;é€šå¸¸éœ€è‡ªå®šä¹‰å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;ï¼Œä¸º MySQL å†…ç½®å‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“ &lt;strong&gt;è¯·æ³¨æ„&lt;/strong&gt;ï¼šä¸Šè¡¨ä¸­çš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°è¯­æ³•æ˜¯åŸºäºå¸¸è§éœ€æ±‚åŠå…¶åœ¨å…¶ä»–æ•°æ®åº“ï¼ˆå¦‚ SQL Serverï¼‰ä¸­çš„å®ç°ã€‚åœ¨ MySQL ä¸­ï¼Œä½ é€šå¸¸éœ€è¦è‡ªå·±åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰æ¥æ¨¡æ‹Ÿæ­¤åŠŸèƒ½ï¼Œæˆ–è€…ä½¿ç”¨å…¶å†…ç½®çš„ &lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°ä½œä¸ºæ›¿ä»£ã€‚&lt;/p&gt;
&lt;h3 id="-è‡ªå®šä¹‰-stuff-å‡½æ•°"&gt;ğŸ”§ è‡ªå®šä¹‰ STUFF å‡½æ•°
&lt;/h3&gt;&lt;p&gt;ç”±äº MySQL é»˜è®¤ä¸æä¾›åŸç”Ÿçš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»º&lt;strong&gt;ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰&lt;/strong&gt; æ¥å®ç°å…¶åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¸è§çš„è‡ªå®šä¹‰ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DROP FUNCTION IF EXISTS stuff;
DELIMITER //
CREATE FUNCTION stuff(str VARCHAR(8000), startIndex INT, length INT, Newstr VARCHAR(8000))
RETURNS VARCHAR(8000)
DETERMINISTIC
BEGIN
RETURN concat(
LEFT(str, startIndex - 1),
Newstr,
RIGHT(str, CHAR_LENGTH(str) - (startIndex + length) + 1)
);
END //
DELIMITER ;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å‡½æ•°é€»è¾‘è§£é‡Š&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;LEFT(str, startIndex - 1)&lt;/code&gt;: è·å–åŸå§‹å­—ç¬¦ä¸² &lt;code&gt;str&lt;/code&gt;ä»å¼€å§‹åˆ° &lt;code&gt;startIndex - 1&lt;/code&gt;ä½ç½®çš„å­ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥æ‹¼æ¥ &lt;code&gt;Newstr&lt;/code&gt;ï¼šå°†æ–°å­—ç¬¦ä¸²æ’å…¥åˆ°æŒ‡å®šä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RIGHT(str, CHAR_LENGTH(str) - (startIndex + length) + 1)&lt;/code&gt;: è·å–ä» &lt;code&gt;startIndex + length&lt;/code&gt;ä½ç½®å¼€å§‹åˆ°å­—ç¬¦ä¸²æœ«å°¾çš„å­ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;CONCAT&lt;/code&gt;å°†è¿™ä¸‰éƒ¨åˆ†æ‹¼æ¥èµ·æ¥ï¼Œå½¢æˆæœ€ç»ˆç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ›å»ºæ­¤å‡½æ•°åï¼Œä½ ä¾¿å¯ä»¥åœ¨ MySQL ä¸­åƒä½¿ç”¨å†…ç½®å‡½æ•°ä¸€æ ·ä½¿ç”¨ &lt;code&gt;STUFF&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼ˆæˆ–å…¶æ›¿ä»£æ–¹æ³•ï¼‰åœ¨å¤„ç†å­—ç¬¦ä¸²æ—¶éå¸¸æœ‰ç”¨ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ ¼å¼åŒ–&lt;/strong&gt;ï¼šæ›´æ”¹å­—ç¬¦ä¸²çš„æ˜¾ç¤ºæ ¼å¼ï¼Œä¾‹å¦‚æ—¥æœŸã€ç”µè¯å·ç æˆ–ç‰¹å®šä»£ç çš„æ ¼å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å‡è®¾åŸæ—¥æœŸæ ¼å¼ä¸º &amp;#39;20230917&amp;#39;ï¼Œå¸Œæœ›æ ¼å¼åŒ–ä¸º &amp;#39;2023-09-17&amp;#39;
-- ä½¿ç”¨è‡ªå®šä¹‰ STUFF å‡½æ•°
SELECT STUFF(STUFF(&amp;#39;20230917&amp;#39;, 5, 0, &amp;#39;-&amp;#39;), 8, 0, &amp;#39;-&amp;#39;) AS formatted_date; -- è¾“å‡º: &amp;#39;2023-09-17&amp;#39;
-- ä½¿ç”¨ INSERT å‡½æ•°æ›¿ä»£
SELECT INSERT(INSERT(&amp;#39;20230917&amp;#39;, 8, 0, &amp;#39;-&amp;#39;), 5, 0, &amp;#39;-&amp;#39;) AS formatted_date; -- è¾“å‡º: &amp;#39;2023-09-17&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—ä¸æ›¿æ¢&lt;/strong&gt;ï¼šç§»é™¤æˆ–æ›¿æ¢å­—ç¬¦ä¸²ä¸­ä¸éœ€è¦çš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°† &amp;#39;123xx789&amp;#39; ä¸­ä»ç¬¬4ä½å¼€å§‹çš„2ä¸ªå­—ç¬¦ (&amp;#39;xx&amp;#39;) æ›¿æ¢ä¸º &amp;#39;456&amp;#39;
-- ä½¿ç”¨è‡ªå®šä¹‰ STUFF å‡½æ•°
SELECT STUFF(&amp;#39;123xx789&amp;#39;, 4, 2, &amp;#39;456&amp;#39;) AS cleaned_string; -- è¾“å‡º: &amp;#39;123456789&amp;#39;
-- ä½¿ç”¨ INSERT å‡½æ•°æ›¿ä»£ (é€šè¿‡æŒ‡å®šæ›¿æ¢é•¿åº¦å®ç°è¦†ç›–)
SELECT INSERT(&amp;#39;123xx789&amp;#39;, 4, 2, &amp;#39;456&amp;#39;) AS cleaned_string; -- è¾“å‡º: &amp;#39;123456789&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ¨æ€ SQL æˆ–å¤æ‚å­—ç¬¦ä¸²æ‹¼æ¥&lt;/strong&gt;ï¼šåœ¨ç”Ÿæˆç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆå¦‚ XML è·¯å¾„æŸ¥è¯¢æˆ–å¤æ‚è¾“å‡ºï¼‰æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç»“åˆ GROUP_CONCAT ç­‰è¿›è¡Œå­—ç¬¦ä¸²èšåˆåå†å¤„ç†ï¼ˆç¤ºä¾‹æ¦‚å¿µåŒ–ï¼‰
-- å‡è®¾æƒ³å°†èšåˆåçš„é€—å·åˆ†éš”åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªé€—å·æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦ï¼ˆå®é™…åœºæ™¯å¯èƒ½æ›´å¤æ‚ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°æˆ–å…¶æ›¿ä»£æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°æœ‰æ•ˆæ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;start&lt;/code&gt;ï¼ˆèµ·å§‹ä½ç½®ï¼‰å¿…é¡»æ˜¯å¤§äº 0 çš„æ•´æ•°ã€‚å¦‚æœ &lt;code&gt;start&lt;/code&gt;è¶…è¿‡åŸå­—ç¬¦ä¸²é•¿åº¦ï¼Œåˆ™å¯èƒ½æ— æ³•è¾¾åˆ°é¢„æœŸæ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦åˆ é™¤çš„é•¿åº¦ &lt;code&gt;length&lt;/code&gt;åº”ä¸ºéè´Ÿæ•´æ•°ã€‚å¦‚æœ &lt;code&gt;length&lt;/code&gt;ä¸º 0ï¼Œåˆ™åªæ’å…¥æ–°å­—ç¬¦ä¸²ï¼Œä¸åˆ é™¤ä»»ä½•å­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;start&lt;/code&gt;æˆ– &lt;code&gt;length&lt;/code&gt;ä¸ºè´Ÿå€¼ï¼Œå‡½æ•°å¯èƒ½ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;æˆ–äº§ç”Ÿä¸å¯é¢„æµ‹çš„ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šåœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œå­—ç¬¦ä¸²æ“ä½œå‡½æ•°å¯èƒ½ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚å»ºè®®ç»“åˆæœ‰æ•ˆçš„ WHERE å­å¥å‡å°‘æ“ä½œæ•°æ®é‡ï¼Œå¹¶ç¡®ä¿æ•°æ®åº“æ€§èƒ½å¾—åˆ°ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰å‡½æ•°çš„ç»´æŠ¤&lt;/strong&gt;ï¼šå¦‚æœä½ é€‰æ‹©åˆ›å»ºè‡ªå®šä¹‰çš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼Œè¯·ç¡®ä¿å¯¹å…¶è¿›è¡Œå¦¥å–„æ–‡æ¡£è®°å½•å’Œç»´æŠ¤ï¼Œä»¥ä¾¿å›¢é˜Ÿå…¶ä»–æˆå‘˜ç†è§£å…¶è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ MySQL æ²¡æœ‰åŸç”Ÿæä¾› &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡&lt;strong&gt;åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°&lt;/strong&gt;æ¥æ¨¡æ‹Ÿå…¶åŠŸèƒ½ï¼Œæˆ–è€…ä½¿ç”¨ MySQL å†…ç½®çš„ &lt;strong&gt;&lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°&lt;/strong&gt;ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆæ¥å®ç°ç±»ä¼¼çš„å­—ç¬¦ä¸²æ’å…¥å’Œæ›¿æ¢æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å“ªç§æ–¹å¼å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœéœ€è¦&lt;strong&gt;ç²¾ç¡®æ¨¡æ‹Ÿ&lt;/strong&gt; &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°çš„è¡Œä¸ºï¼ˆåœ¨ç‰¹å®šä½ç½®åˆ é™¤æŒ‡å®šé•¿åº¦å­—ç¬¦å¹¶æ’å…¥æ–°å­—ç¬¦ä¸²ï¼‰ï¼Œå¹¶ä¸”ä¼šé¢‘ç¹ä½¿ç”¨ï¼Œ&lt;strong&gt;åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°&lt;/strong&gt;å¯èƒ½æ›´åˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåªæ˜¯&lt;strong&gt;è¿›è¡Œå­—ç¬¦ä¸²æ’å…¥æˆ–è¦†ç›–&lt;/strong&gt;ï¼Œå¹¶ä¸”æ“ä½œç›¸å¯¹ç®€å•ï¼Œç›´æ¥ä½¿ç”¨ MySQL å†…ç½®çš„ &lt;strong&gt;&lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°&lt;/strong&gt;æ›´ç®€ä¾¿ï¼Œä¹Ÿæ— éœ€é¢å¤–åˆ›å»ºå‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ åœ¨ MySQL ä¸­æœ‰æ•ˆåœ°è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id="join"&gt;JOIN
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå½“éœ€è¦è¿æ¥çš„ä¸¤ä¸ªè¡¨å­˜åœ¨&lt;strong&gt;ç›¸åŒåç§°çš„å…³è”å­—æ®µ&lt;/strong&gt;æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;å­å¥æˆ– &lt;code&gt;NATURAL JOIN&lt;/code&gt;æ¥ç®€åŒ–ä¹¦å†™ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è§£é‡Šè¿™ä¸¤ç§æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-using-å­å¥-æ¨è"&gt;ğŸ“Œ USING å­å¥ (æ¨è)
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;å­å¥æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå½“è¿æ¥æ¡ä»¶çš„å­—æ®µååœ¨ä¸¤å¼ è¡¨ä¸­å®Œå…¨ç›¸åŒæ—¶ï¼Œå®ƒå¯ä»¥æ›¿ä»£ &lt;code&gt;ON&lt;/code&gt;æ¥ç®€åŒ–æŸ¥è¯¢è¯­å¥ï¼Œä½¿ä»£ç æ›´ç®€æ´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM è¡¨1
JOIN è¡¨2
USING (åŒåå­—æ®µ);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¤šå­—æ®µè¿æ¥ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿æ¥æ¡ä»¶éœ€è¦å¤šä¸ªåŒåå­—æ®µï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM è¡¨1
JOIN è¡¨2
USING (å­—æ®µ1, å­—æ®µ2);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;USING ä¸ ON çš„å¯¹æ¯”ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ ON&lt;/strong&gt; (æ ‡å‡†å†™æ³•):&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM employees e
JOIN departments d
ON e.dept_id = d.dept_id;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ USING&lt;/strong&gt; (ç®€åŒ–å†™æ³•):&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM employees
JOIN departments
USING (dept_id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;ä¼šè‡ªåŠ¨å¤„ç†åŸºäºåŒåå­—æ®µçš„ç­‰å€¼è¿æ¥ï¼Œå¹¶ä¸”åœ¨æŸ¥è¯¢ç»“æœä¸­&lt;strong&gt;åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯åˆ†åˆ«æ˜¾ç¤ºä¸¤å¼ è¡¨çš„å­—æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;USING çš„ä¼˜ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–è¯­å¥&lt;/strong&gt;ï¼šä¸éœ€è¦é‡å¤å†™ &lt;code&gt;ON table1.column = table2.column&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœæ¸…æ™°&lt;/strong&gt;ï¼šé¿å…åœ¨ SELECT ç»“æœé›†ä¸­å‡ºç°é‡å¤çš„å…³è”åˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;USING çš„æ³¨æ„äº‹é¡¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿ &lt;code&gt;USING&lt;/code&gt;ä¸­æŒ‡å®šçš„å­—æ®µå¿…é¡»åœ¨ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸”&lt;strong&gt;å­—æ®µåå®Œå…¨ä¸€è‡´&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒä»…æ”¯æŒ&lt;strong&gt;ç­‰å€¼è¿æ¥&lt;/strong&gt; (&lt;code&gt;=&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-natural-join-ä¸æ¨è"&gt;âš ï¸ NATURAL JOIN (ä¸æ¨è)
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;NATURAL JOIN&lt;/code&gt;ä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¸¤å¼ è¡¨ä¸­&lt;strong&gt;æ‰€æœ‰åŒåå­—æ®µ&lt;/strong&gt;ä½œä¸ºè¿æ¥æ¡ä»¶ï¼Œæ— éœ€æ˜¾å¼æŒ‡å®šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM è¡¨1
NATURAL JOIN è¡¨2;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨ NATURAL JOINï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶ &lt;code&gt;NATURAL JOIN&lt;/code&gt;å†™èµ·æ¥æ›´çŸ­ï¼Œä½†å­˜åœ¨è¾ƒå¤§é£é™©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯æ§æ€§&lt;/strong&gt;ï¼šå®ƒè‡ªåŠ¨åŒ¹é…æ‰€æœ‰åŒåå­—æ®µã€‚å¦‚æœè¡¨ä¸­æœ‰å…¶ä»–ä¸æ„å›¾ç”¨äºè¿æ¥çš„åŒåå­—æ®µï¼ˆå¦‚ &lt;code&gt;create_time&lt;/code&gt;, &lt;code&gt;name&lt;/code&gt;ï¼‰ï¼Œä¼šè¢«è‡ªåŠ¨åŠ å…¥è¿æ¥æ¡ä»¶ï¼Œå¯èƒ½å¯¼è‡´æŸ¥è¯¢ç»“æœé”™è¯¯æˆ–æ¯«æ— æ„ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤å›°éš¾&lt;/strong&gt;ï¼šè¡¨ç»“æ„ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼ˆå¢åŠ æˆ–åˆ é™¤äº†åŒåå­—æ®µï¼‰ï¼Œ&lt;code&gt;NATURAL JOIN&lt;/code&gt;çš„è¡Œä¸ºä¼šè‡ªåŠ¨æ”¹å˜ï¼Œå®¹æ˜“å¼•å‘éš¾ä»¥é¢„æ–™çš„é”™è¯¯ï¼Œå¯ç»´æŠ¤æ€§å·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’¡ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°é€‰æ‹©ï¼Œå¯ä»¥å‚è€ƒä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;USING å­å¥&lt;/th&gt;
&lt;th&gt;NATURAL JOIN&lt;/th&gt;
&lt;th&gt;ä¼ ç»Ÿ ON å­å¥&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­ (éœ€æ‰‹åŠ¨æŒ‡å®šåŒåå­—æ®µ)&lt;/td&gt;
&lt;td&gt;ä½ (è‡ªåŠ¨æ‰€æœ‰åŒåå­—æ®µ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (å¯ä»»æ„æŒ‡å®šæ¡ä»¶å’ŒéåŒåå­—æ®µè¿æ¥)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯æ§æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (æ˜ç¡®æŒ‡å®šè¿æ¥å­—æ®µ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æä½&lt;/strong&gt; (ä¾èµ–è¡¨ç»“æ„)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (å®Œå…¨æŒæ§)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰å­—æ®µéƒ½ä¼šå‡ºç°ï¼Œå¯èƒ½é‡å¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ¨è&lt;/strong&gt; (åŒåå­—æ®µæ—¶)&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸æ¨è&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ¨è&lt;/strong&gt; (éåŒåæˆ–å¤æ‚æ¡ä»¶æ—¶)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç»™ä½ çš„å»ºè®®ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è¿æ¥æ¡ä»¶çš„å­—æ®µå&lt;strong&gt;å®Œå…¨ç›¸åŒ&lt;/strong&gt;æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ &lt;strong&gt;&lt;code&gt;USING&lt;/code&gt;&lt;/strong&gt; å­å¥ï¼Œå®ƒåœ¨ç®€æ´æ€§å’Œå¯æ§æ€§ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°½é‡é¿å…ä½¿ç”¨&lt;/strong&gt; &lt;code&gt;NATURAL JOIN&lt;/code&gt;ï¼Œå› ä¸ºå®ƒçš„éšå¼è¡Œä¸ºå¯èƒ½å¸¦æ¥æ„æƒ³ä¸åˆ°çš„é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;å½“è¿æ¥æ¡ä»¶æ¶‰åŠ&lt;strong&gt;ä¸åŒåå­—æ®µ&lt;/strong&gt;æˆ–éœ€è¦&lt;strong&gt;éç­‰å€¼è¿æ¥&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;BETWEEN&lt;/code&gt;ç­‰ï¼‰æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ä¼ ç»Ÿçš„ &lt;strong&gt;&lt;code&gt;ON&lt;/code&gt;å­å¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹ä½ æœ‰å¸®åŠ©ï¼&lt;/p&gt;
&lt;h2 id="sql-æ³¨å…¥"&gt;SQL æ³¨å…¥
&lt;/h2&gt;&lt;p&gt;SQLæ³¨å…¥æ˜¯ä¸€ç§å¸¸è§ä¸”å±å®³æå¤§çš„Webå®‰å…¨æ¼æ´ï¼Œç†è§£å…¶åŸç†å’ŒæŒæ¡æœ‰æ•ˆçš„é˜²èŒƒæªæ–½ï¼Œå¯¹äºæ„å»ºå®‰å…¨çš„åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¢³ç†äº†SQLæ³¨å…¥çš„ä¸»è¦ç±»å‹å’Œç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤è¯†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†ç±»ç»´åº¦&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹å¾ä¸æ”»å‡»æ‰‹æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰æ‰§è¡Œæ•ˆæœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è”åˆæŸ¥è¯¢æ³¨å…¥ (UNION)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ &lt;code&gt;UNION&lt;/code&gt;æ“ä½œç¬¦åˆå¹¶æŸ¥è¯¢ï¼Œç›´æ¥è·å–å…¶ä»–è¡¨çš„æ•°æ®ã€‚éœ€è¦å­—æ®µæ•°ç›¸åŒä¸”æœ‰å›æ˜¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ¥é”™æ³¨å…¥ (Error-based)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•…æ„æ„é€ è¯­å¥è§¦å‘æ•°æ®åº“æŠ¥é”™ï¼Œé€šè¿‡é”™è¯¯ä¿¡æ¯å›æ˜¾æ¥æ¨æ–­æ•°æ®åº“ç»“æ„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¸ƒå°”ç›²æ³¨ (Boolean Blind)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¡µé¢æ— ç›´æ¥å›æ˜¾ï¼Œé€šè¿‡æ³¨å…¥é€»è¾‘æ¡ä»¶ï¼ˆå¦‚ &lt;code&gt;AND 1=1&lt;/code&gt;/ &lt;code&gt;AND 1=2&lt;/code&gt;ï¼‰ï¼Œæ ¹æ®é¡µé¢è¿”å›å†…å®¹çš„å·®å¼‚æ¥é€å­—ç¬¦æ¨æ–­æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´ç›²æ³¨ (Time-based Blind)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¡µé¢æ— ä»»ä½•å›æ˜¾å·®å¼‚ï¼Œé€šè¿‡æ³¨å…¥æ—¶é—´å»¶è¿Ÿå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;SLEEP(5)&lt;/code&gt;ï¼‰ï¼Œæ ¹æ®å“åº”æ—¶é—´çš„é•¿çŸ­æ¥åˆ¤æ–­æ¡ä»¶çœŸå‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å †å æŸ¥è¯¢æ³¨å…¥ (Stacked Queries)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨åˆ†å· &lt;code&gt;;&lt;/code&gt;æ‰§è¡Œå¤šæ¡SQLè¯­å¥ï¼Œå¯å®ç°å¢ã€åˆ ã€æ”¹ç­‰æ›´å±é™©çš„æ“ä½œã€‚å–å†³äºæ•°æ®åº“æ˜¯å¦æ”¯æŒå¤šè¯­å¥æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰æ•°æ®æäº¤æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GET/POST/Cookie/HTTPå¤´æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”»å‡»è½½ä½“ä¸åŒï¼ŒåŸç†ç›¸åŒã€‚å¯èƒ½é€šè¿‡URLå‚æ•°ï¼ˆGETï¼‰ã€è¡¨å•æ•°æ®ï¼ˆPOSTï¼‰ã€Cookieæˆ–User-Agentç­‰HTTPå¤´å­—æ®µæ³¨å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰å‚æ•°ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°å­—å‹æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ³¨å…¥ç‚¹çš„å‚æ•°ä¸ºæ•´æ•°ï¼Œå¦‚ &lt;code&gt;?id=1&lt;/code&gt;ï¼Œæ„é€ Payloadæ—¶é€šå¸¸æ— éœ€é—­åˆå¼•å·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦å‹æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ³¨å…¥ç‚¹çš„å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚ &lt;code&gt;?name=admin&lt;/code&gt;ï¼Œéœ€è¦é—­åˆå•å¼•å·ç­‰ç¬¦å·å¹¶æ³¨é‡Šæ‰åç»­ä»£ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-sqlæ³¨å…¥çš„æ”»å‡»åŸç†ä¸æµç¨‹"&gt;ğŸ’¥ SQLæ³¨å…¥çš„æ”»å‡»åŸç†ä¸æµç¨‹
&lt;/h3&gt;&lt;p&gt;SQLæ³¨å…¥çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;æ··æ·†äº†ä»£ç ä¸æ•°æ®çš„è¾¹ç•Œ&lt;/strong&gt;ã€‚å½“Webåº”ç”¨ç¨‹åºå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ç›´æ¥â€œæ‹¼æ¥â€åˆ°SQLæŸ¥è¯¢è¯­å¥ä¸­ï¼Œè€Œæ²¡æœ‰è¿›è¡Œå……åˆ†çš„éªŒè¯æˆ–è¿‡æ»¤æ—¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥åœ¨è¾“å…¥ä¸­æ’å…¥æ¶æ„çš„SQLä»£ç ï¼Œæ”¹å˜åŸè¯­å¥çš„è¯­ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç»å…¸çš„æ”»å‡»æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ‰¾å¹¶ç¡®è®¤æ³¨å…¥ç‚¹&lt;/strong&gt;ï¼šæ”»å‡»è€…ä¼šå°è¯•åœ¨è¾“å…¥å‚æ•°ï¼ˆå¦‚ç™»å½•æ¡†ã€æœç´¢æ ã€URLå‚æ•°ï¼‰ä¸­æäº¤ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚å•å¼•å· &lt;code&gt;'&lt;/code&gt;ï¼‰æˆ–é€»è¾‘è¯­å¥ï¼ˆå¦‚ &lt;code&gt;and 1=1&lt;/code&gt;, &lt;code&gt;and 1=2&lt;/code&gt;ï¼‰ï¼Œé€šè¿‡è§‚å¯Ÿé¡µé¢çš„è¿”å›ç»“æœï¼ˆå¦‚æŠ¥é”™ä¿¡æ¯ã€å†…å®¹å·®å¼‚ï¼‰æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¢æµ‹æ•°æ®åº“ç»“æ„&lt;/strong&gt;ï¼šç¡®å®šæ³¨å…¥ç‚¹åï¼Œæ”»å‡»è€…ä¼šåˆ©ç”¨æ•°æ®åº“çš„å†…ç½®åŠŸèƒ½ï¼ˆå¦‚MySQLçš„ &lt;code&gt;information_schema&lt;/code&gt;ï¼‰æ¥è·å–æ•°æ®åº“åã€è¡¨åã€åˆ—åç­‰ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;order by n&lt;/code&gt;ç”¨äºåˆ¤æ–­å½“å‰æŸ¥è¯¢çš„å­—æ®µæ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;union select 1,2,database(),version()&lt;/code&gt;ç”¨äºè·å–å½“å‰æ•°æ®åº“åå’Œç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çªƒå–æ•°æ®&lt;/strong&gt;ï¼šåœ¨æŒæ¡æ•°æ®åº“ç»“æ„åï¼Œæ”»å‡»è€…ä¾¿å¯ç›´æ¥æŸ¥è¯¢çªƒå–æ•æ„Ÿæ•°æ®ï¼Œå¦‚ç”¨æˆ·å‡­è¯ã€ä¸ªäººä¿¡æ¯ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå‡å±å®³&lt;/strong&gt;ï¼šåœ¨é«˜çº§æ”»å‡»ä¸­ï¼Œè‹¥æ•°æ®åº“æƒé™é…ç½®ä¸å½“ï¼Œæ”»å‡»è€…è¿˜å¯èƒ½åˆ©ç”¨SQLæ³¨å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚é€šè¿‡ &lt;code&gt;xp_cmdshell&lt;/code&gt;ï¼‰ã€è¯»å†™æœåŠ¡å™¨æ–‡ä»¶ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;load_file()&lt;/code&gt;å’Œ &lt;code&gt;into outfile&lt;/code&gt;ï¼‰ï¼Œä»è€Œå®Œå…¨æ§åˆ¶æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•æœ‰æ•ˆé˜²å¾¡sqlæ³¨å…¥"&gt;ğŸ›¡ï¸ å¦‚ä½•æœ‰æ•ˆé˜²å¾¡SQLæ³¨å…¥
&lt;/h3&gt;&lt;p&gt;é˜²å¾¡SQLæ³¨å…¥éœ€è¦ä¸€å¥—å¤šå±‚æ¬¡ã€çºµæ·±çš„é˜²å¾¡ä½“ç³»ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯ï¼š&lt;strong&gt;æ°¸ä¸ä¿¡ä»»ç”¨æˆ·è¾“å…¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¦–é€‰æ–¹æ¡ˆï¼šå‚æ•°åŒ–æŸ¥è¯¢ï¼ˆPrepared Statementsï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æœ‰æ•ˆã€æœ€æ ¹æœ¬çš„é˜²å¾¡æ‰‹æ®µã€‚å®ƒè¦æ±‚åº”ç”¨ç¨‹åºåœ¨ç¼–å†™SQLæ—¶ï¼Œä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚ &lt;code&gt;?&lt;/code&gt;ï¼‰æ¥é¢„å®šä¹‰SQLç»“æ„ï¼Œç„¶åå°†ç”¨æˆ·è¾“å…¥ä½œä¸ºâ€œå‚æ•°â€ä¼ é€’ç»™è¿™ä¸ªé¢„ç¼–è¯‘å¥½çš„æ¨¡æ¿ã€‚æ•°æ®åº“ä¼šä¸¥æ ¼åŒºåˆ†ä»£ç å’Œæ•°æ®ï¼Œå³ä½¿å‚æ•°ä¸­åŒ…å«SQLæŒ‡ä»¤ï¼Œä¹Ÿåªä¼šè¢«å½“ä½œæ™®é€šæ•°æ®å¤„ç†ï¼Œæ— æ³•è¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å±é™©çš„åšæ³•ï¼šå­—ç¬¦ä¸²æ‹¼æ¥
String sql = &amp;#34;SELECT * FROM users WHERE username = &amp;#39;&amp;#34; + username + &amp;#34;&amp;#39;&amp;#34;;
// å®‰å…¨çš„åšæ³•ï¼šå‚æ•°åŒ–æŸ¥è¯¢
String sql = &amp;#34;SELECT * FROM users WHERE username = ?&amp;#34;;
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setString(1, username); // æ­¤æ—¶ï¼Œå³ä½¿usernameè¾“å…¥æ˜¯ admin&amp;#39; OR &amp;#39;1&amp;#39;=&amp;#39;1ï¼Œä¹Ÿä¼šè¢«å®‰å…¨è½¬ä¹‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¾“å…¥éªŒè¯ä¸è¿‡æ»¤&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç™½åå•éªŒè¯&lt;/strong&gt;ï¼šå¯¹äºå·²çŸ¥æ ¼å¼çš„è¾“å…¥ï¼ˆå¦‚é‚®ç®±ã€ç”µè¯å·ç ã€æ•°å­—IDï¼‰ï¼Œåº”ä¸¥æ ¼é™åˆ¶å…¶æ ¼å¼ã€é•¿åº¦å’ŒèŒƒå›´ï¼Œåªå…è®¸åˆæ³•çš„å­—ç¬¦é€šè¿‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦&lt;/strong&gt;ï¼šåœ¨æŸäº›æ— æ³•ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢çš„ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¯¹ç”¨æˆ·è¾“å…¥ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚å•å¼•å·ï¼‰è¿›è¡Œè½¬ä¹‰æ˜¯å¿…è¦çš„è¡¥å……æªæ–½ã€‚ä¾‹å¦‚ä½¿ç”¨ &lt;code&gt;mysqli_real_escape_string()&lt;/code&gt;å‡½æ•°ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™ä¸åº”ä½œä¸ºé¦–è¦æˆ–å”¯ä¸€çš„é˜²å¾¡æ‰‹æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€å°æƒé™åŸåˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨äºè¿æ¥æ•°æ®åº“çš„åº”ç”¨ç¨‹åºè´¦æˆ·ï¼Œä¸åº”æ‹¥æœ‰è¿‡é«˜çš„æƒé™ã€‚ä¸¥æ ¼ç¦æ­¢æˆäºˆDROPã€FILEç­‰é«˜é£é™©æƒé™ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”ç”¨è´¦æˆ·åªæ‹¥æœ‰å…¶æ“ä½œæ‰€éœ€è¡¨çš„æœ€åŸºæœ¬çš„SELECTã€INSERTã€UPDATEæƒé™ã€‚è¿™æ ·å³ä½¿å‘ç”Ÿæ³¨å…¥ï¼Œä¹Ÿèƒ½å°†æŸå¤±é™åˆ°æœ€ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–çºµæ·±é˜²å¾¡æªæ–½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨Webåº”ç”¨é˜²ç«å¢™ï¼ˆWAFï¼‰&lt;/strong&gt;ï¼šWAFå¯ä»¥åŸºäºè§„åˆ™å®æ—¶æ£€æµ‹å’Œæ‹¦æˆªæ˜æ˜¾çš„æ¶æ„è¯·æ±‚ï¼Œä¸ºåº”ç”¨æä¾›ä¸€é“å¤–å›´é˜²çº¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯&lt;/strong&gt;ï¼šä¸åº”å°†æ•°æ®åº“çš„è¯¦ç»†æŠ¥é”™ä¿¡æ¯ç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼Œè¿™äº›ä¿¡æ¯ä¼šä¸ºæ”»å‡»è€…æä¾›å¤§é‡çº¿ç´¢ã€‚åº”ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯é¡µé¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸå®‰å…¨å®¡è®¡ä¸æµ‹è¯•&lt;/strong&gt;ï¼šä½¿ç”¨ä¸“ä¸šå·¥å…·ï¼ˆå¦‚SQLMapï¼‰æˆ–è¿›è¡Œä»£ç å®¡è®¡ï¼Œå®šæœŸå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæ¼æ´æ‰«æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;SQLæ³¨å…¥æ˜¯ä¸€ç§ç”±äºç¨‹åºæœªèƒ½æ­£ç¡®å¤„ç†ç”¨æˆ·è¾“å…¥è€Œå¯¼è‡´çš„ä¸¥é‡å®‰å…¨æ¼æ´ã€‚é˜²å¾¡çš„å…³é”®åœ¨äºä»å¼€å‘é˜¶æ®µå°±é‡‡ç”¨&lt;strong&gt;å‚æ•°åŒ–æŸ¥è¯¢&lt;/strong&gt;ç­‰å®‰å…¨ç¼–ç å®è·µï¼Œå¹¶è¾…ä»¥è¾“å…¥éªŒè¯ã€æœ€å°æƒé™ç­‰çºµæ·±é˜²å¾¡æªæ–½ï¼Œæ‰èƒ½æœ‰æ•ˆä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£SQLæ³¨å…¥ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„æ”»å‡»æŠ€æœ¯æˆ–é˜²å¾¡æ–¹æ¡ˆæœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç´¢å¼•--å‡½æ•°"&gt;ç´¢å¼• &amp;amp; å‡½æ•°
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå¯¹ç´¢å¼•å­—æ®µä½¿ç”¨å‡½æ•°è¿›è¡Œç­›é€‰ç¡®å®ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å¸¸è§çš„å‡½æ•°æ“ä½œç±»å‹åŠå…¶ä¼˜åŒ–æ€è·¯ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿç†è§£ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°æ“ä½œç±»å‹&lt;/th&gt;
&lt;th&gt;å¤±æ•ˆç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;ä¼˜åŒ–æ€è·¯ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°å­¦è¿ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE id + 1 = 10;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†è¿ç®—ç§»è‡³ç­‰å·å¦ä¸€ä¾§ï¼š&lt;code&gt;... WHERE id = 10 - 1;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥æœŸ/æ—¶é—´å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE YEAR(create_time) = 2024;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ”¹ç”¨èŒƒå›´æŸ¥è¯¢ï¼š&lt;code&gt;... WHERE create_time BETWEEN '2024-01-01' AND '2024-12-31';&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦ä¸²å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE SUBSTR(name, 1, 3) = 'abc';&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°½é‡é¿å…ç›´æ¥å¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°ï¼Œæˆ–è€ƒè™‘å‡½æ•°ç´¢å¼•ï¼ˆMySQL 8.0+ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç´¢å¼•å¤±æ•ˆçš„æ ¸å¿ƒåŸå› "&gt;ğŸ’¡ ç´¢å¼•å¤±æ•ˆçš„æ ¸å¿ƒåŸå› 
&lt;/h3&gt;&lt;p&gt;ç´¢å¼•ï¼Œç‰¹åˆ«æ˜¯å¸¸ç”¨çš„ B+Tree ç´¢å¼•ï¼Œå…¶é«˜æ•ˆä¹‹å¤„åœ¨äºå®ƒæŒ‰ç…§ç´¢å¼•å­—æ®µçš„&lt;strong&gt;åŸå§‹å€¼&lt;/strong&gt;è¿›è¡Œäº†æ’åºå­˜å‚¨ã€‚è¿™å°±åƒä¸€æœ¬å­—å…¸ï¼Œæ‰€æœ‰å­—è¯éƒ½æ˜¯æŒ‰æ‹¼éŸ³é¡ºåºæ’åˆ—çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ ¹æ®æ‹¼éŸ³å¿«é€Ÿå®šä½åˆ°ç›®æ ‡å­—è¯ ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ å¯¹ç´¢å¼•å­—æ®µä½¿ç”¨å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;YEAR(create_time)&lt;/code&gt;æˆ– &lt;code&gt;id + 1&lt;/code&gt;ï¼‰æ—¶ï¼Œæ•°æ®åº“å¼•æ“æ— æ³•ç›´æ¥ä½¿ç”¨è¿™ä¸ªâ€œæœ‰åºçš„å­—å…¸â€ã€‚å®ƒå¿…é¡»&lt;strong&gt;é€è¡Œå–å‡º&lt;/strong&gt; &lt;code&gt;create_time&lt;/code&gt;æˆ– &lt;code&gt;id&lt;/code&gt;çš„åŸå§‹å€¼ï¼Œç„¶ååº”ç”¨å‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œæœ€åæ‰èƒ½ä¸ä½ çš„æ¡ä»¶è¿›è¡Œæ¯”è¾ƒã€‚è¿™ä¸ªâ€œé€è¡Œè®¡ç®—â€çš„è¿‡ç¨‹å°±ç­‰åŒäºå…¨è¡¨æ‰«æï¼Œä½¿å¾—ç´¢å¼•æ— æ³•å‘æŒ¥ä½œç”¨ ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œä¸€äº›&lt;strong&gt;éšå¼ç±»å‹è½¬æ¢&lt;/strong&gt;ä¹Ÿç­‰åŒäºä½¿ç”¨äº†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç´¢å¼•åˆ— &lt;code&gt;phone&lt;/code&gt;æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼ˆVARCHARï¼‰ï¼Œè€Œä½ çš„æŸ¥è¯¢æ¡ä»¶æ˜¯ &lt;code&gt;WHERE phone = 13800138000&lt;/code&gt;ï¼ˆä¼ å…¥æ•°å­—ï¼‰ï¼ŒMySQL ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå…¶æ•ˆæœç›¸å½“äº &lt;code&gt;WHERE CAST(phone AS SIGNED INT) = 13800138000&lt;/code&gt;ï¼ŒåŒæ ·ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ’æŸ¥ä¸ä¼˜åŒ–"&gt;ğŸ”§ å¦‚ä½•æ’æŸ¥ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ EXPLAIN åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥çš„æ’æŸ¥æ–¹æ³•ã€‚åœ¨ SQL è¯­å¥å‰åŠ ä¸Š &lt;code&gt;EXPLAIN&lt;/code&gt;å…³é”®å­—æ‰§è¡Œï¼ŒæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ã€‚é‡ç‚¹å…³æ³¨ &lt;code&gt;type&lt;/code&gt;åˆ—ï¼Œå¦‚æœæ˜¾ç¤º &lt;code&gt;ALL&lt;/code&gt;ï¼Œåˆ™æ„å‘³ç€å…¨è¡¨æ‰«æï¼›åŒæ—¶æ£€æŸ¥ &lt;code&gt;key&lt;/code&gt;åˆ—ï¼Œå¦‚æœä¸º &lt;code&gt;NULL&lt;/code&gt;åˆ™è¡¨ç¤ºæœªä½¿ç”¨ç´¢å¼• ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–æŸ¥è¯¢å†™æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éµå¾ªè¡¨æ ¼ä¸­çš„ä¼˜åŒ–æ€è·¯ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯&lt;strong&gt;ä¿æŒç´¢å¼•å­—æ®µåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­çš„â€œçº¯å‡€â€&lt;/strong&gt;ï¼Œé¿å…åœ¨å…¶ä¸Šæ–½åŠ ä»»ä½•æ“ä½œã€‚å°†è¿ç®—ã€å‡½æ•°å¤„ç†è½¬ç§»åˆ°ç­‰å·çš„å¸¸é‡ä¸€ä¾§ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨ MySQL 8.0 çš„å‡½æ•°ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¹¶ä¸”ç¡®å®æ— æ³•é¿å…å¯¹å­—æ®µè¿›è¡Œå‡½æ•°è®¡ç®—ï¼Œå¯ä»¥è€ƒè™‘åˆ›å»º&lt;strong&gt;å‡½æ•°ç´¢å¼•&lt;/strong&gt;ã€‚è¿™å…è®¸ä½ ç›´æ¥ä¸ºå‡½æ•°è®¡ç®—çš„ç»“æœå»ºç«‹ç´¢å¼• ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä¾‹å¦‚ï¼Œä¸º name å­—æ®µçš„é•¿åº¦åˆ›å»ºç´¢å¼•
ALTER TABLE t_user ADD INDEX idx_name_length ((LENGTH(name)));
-- ç„¶åä»¥ä¸‹æŸ¥è¯¢å°±æœ‰å¯èƒ½ä½¿ç”¨è¿™ä¸ªç´¢å¼•
SELECT * FROM t_user WHERE LENGTH(name) = 6;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œä¼˜åŒ–å»ºè®®èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è®¾è®¡ SQL æŸ¥è¯¢ï¼Œå……åˆ†å‘æŒ¥ç´¢å¼•çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å¦‚æœä½ æœ‰å…·ä½“çš„æŸ¥è¯¢åœºæ™¯éœ€è¦ä¼˜åŒ–ï¼Œå¯ä»¥åˆ†äº«å‡ºæ¥ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ†æã€‚&lt;/p&gt;
&lt;h2 id="è¡¨ç©ºé—´"&gt;è¡¨ç©ºé—´
&lt;/h2&gt;&lt;p&gt;InnoDB çš„è¡¨ç©ºé—´æ˜¯ MySQL æ•°æ®åº“å­˜å‚¨å¼•æ“çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒå°±åƒä¸€ä¸ªå¤§ä»“åº“ï¼Œè´Ÿè´£ä»¥ç»“æ„åŒ–çš„æ–¹å¼é«˜æ•ˆå­˜æ”¾æ‰€æœ‰çš„è¡¨æ•°æ®ã€ç´¢å¼•ç­‰å…³é”®ä¿¡æ¯ã€‚ä¸‹é¢è¿™å¼ å›¾å¯ä»¥å¸®ä½ å¿«é€Ÿç†è§£è¿™ä¸ªâ€œä»“åº“â€çš„å†…éƒ¨ç»„ç»‡ç»“æ„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[è¡¨ç©ºé—´&amp;lt;br&amp;gt;Tablespace] --&amp;gt; B1[ç³»ç»Ÿè¡¨ç©ºé—´&amp;lt;br&amp;gt;ibdata1]
A --&amp;gt; B2[ç‹¬ç«‹è¡¨ç©ºé—´&amp;lt;br&amp;gt;.ibdæ–‡ä»¶]
A --&amp;gt; B3[å…¶ä»–è¡¨ç©ºé—´&amp;lt;br&amp;gt;å¦‚Undo/ä¸´æ—¶è¡¨ç©ºé—´]
B1 --&amp;gt; C1[æ®µ Segment&amp;lt;br&amp;gt;å¦‚æ•°æ®æ®µ/ç´¢å¼•æ®µ]
B2 --&amp;gt; C2[æ®µ Segment&amp;lt;br&amp;gt;å¦‚æ•°æ®æ®µ/ç´¢å¼•æ®µ]
C1 --&amp;gt; D1[åŒº Extent&amp;lt;br&amp;gt;64ä¸ªè¿ç»­é¡µ=1MB]
C2 --&amp;gt; D2[åŒº Extent&amp;lt;br&amp;gt;64ä¸ªè¿ç»­é¡µ=1MB]
D1 --&amp;gt; E1[é¡µ Page&amp;lt;br&amp;gt;é»˜è®¤16KB]
D2 --&amp;gt; E2[é¡µ Page&amp;lt;br&amp;gt;é»˜è®¤16KB]
E1 --&amp;gt; F1[è¡Œ Row&amp;lt;br&amp;gt;å®é™…æ•°æ®è®°å½•]
E2 --&amp;gt; F2[è¡Œ Row&amp;lt;br&amp;gt;å®é™…æ•°æ®è®°å½•]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-è¡¨ç©ºé—´çš„å±‚æ¬¡ç»“æ„"&gt;ğŸ’¡ è¡¨ç©ºé—´çš„å±‚æ¬¡ç»“æ„
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªâ€œä»“åº“â€çš„å†…éƒ¨ç®¡ç†éå¸¸ç²¾ç»†ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºå¤šä¸ªå±‚çº§ï¼Œæ¯ä¸€çº§éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ®µï¼šæŒ‰åŠŸèƒ½åˆ’åˆ†çš„è´§æ¶åŒº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ®µæ˜¯è¡¨ç©ºé—´å†…çš„ä¸»è¦ç»„ç»‡ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œç”¨äºç®¡ç†ç‰¹å®šç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ªç´¢å¼•ä¼šå¯¹åº”ä¸¤ä¸ªæ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¶å­èŠ‚ç‚¹æ®µ&lt;/strong&gt;ï¼šå­˜å‚¨B+æ ‘ä¸­å®é™…çš„&lt;strong&gt;æ•°æ®è¡Œè®°å½•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éå¶å­èŠ‚ç‚¹æ®µ&lt;/strong&gt;ï¼šå­˜å‚¨B+æ ‘çš„&lt;strong&gt;ç´¢å¼•èŠ‚ç‚¹&lt;/strong&gt;ï¼Œç”¨äºå¿«é€Ÿå®šä½æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å°†æ•°æ®å’Œç´¢å¼•åˆ†å¼€ç®¡ç†ï¼Œæœ‰åŠ©äºä¼˜åŒ–I/Oæ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒºï¼šæˆæ‰¹åˆ†é…çš„å­˜å‚¨å•å…ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³éšæœºI/Oå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼ŒInnoDBå¼•å…¥äº†åŒºçš„æ¦‚å¿µã€‚&lt;strong&gt;ä¸€ä¸ªåŒºç”±64ä¸ªè¿ç»­çš„é¡µï¼ˆé»˜è®¤æ¯ä¸ªé¡µ16KBï¼‰ç»„æˆï¼Œå¤§å°ä¸º1MB&lt;/strong&gt;ã€‚å½“è¡¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼ŒInnoDBä¼šæŒ‰åŒºä¸ºå•ä½ç”šè‡³ä¸€æ¬¡æ€§åˆ†é…å¤šä¸ªè¿ç»­çš„åŒºæ¥ä¸ºç´¢å¼•åˆ†é…ç©ºé—´ã€‚è¿™ç§&lt;strong&gt;æ‰¹é‡åˆ†é…è¿ç»­ç‰©ç†ç©ºé—´&lt;/strong&gt;çš„ç­–ç•¥ï¼Œèƒ½æœ‰æ•ˆä¿è¯æ•°æ®åœ¨ç£ç›˜ä¸Šçš„ç‰©ç†è¿ç»­æ€§ï¼Œä»è€Œåœ¨èŒƒå›´æŸ¥è¯¢ç­‰åœºæ™¯ä¸‹å°†éšæœºI/Oè½¬å˜ä¸ºæ›´é«˜æ•ˆçš„é¡ºåºI/Oã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡µï¼šç®¡ç†æ•°æ®çš„åŸºæœ¬å•ä½&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¡µæ˜¯InnoDB&lt;strong&gt;ç£ç›˜ç®¡ç†çš„æœ€å°å•ä½&lt;/strong&gt;ï¼Œé»˜è®¤å¤§å°ä¸º16KBã€‚æ‰€æœ‰æ•°æ®çš„è¯»å†™æ“ä½œéƒ½æ˜¯ä»¥é¡µä¸ºåŸºæœ¬å•å…ƒè¿›è¡Œçš„ã€‚é¡µçš„ç±»å‹æœ‰å¤šç§ï¼Œå¦‚å­˜å‚¨æ•°æ®å’Œç´¢å¼•çš„&lt;strong&gt;æ•°æ®é¡µ&lt;/strong&gt;ã€å­˜å‚¨äº‹åŠ¡å›æ»šä¿¡æ¯çš„&lt;strong&gt;Undoé¡µ&lt;/strong&gt;ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡Œï¼šæœ€ç»ˆçš„è´§ç‰©&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¡Œæ˜¯å­˜å‚¨åœ¨é¡µä¸­çš„&lt;strong&gt;å®é™…æ•°æ®è®°å½•&lt;/strong&gt;ã€‚InnoDBå­˜å‚¨å¼•æ“æ˜¯é¢å‘è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ã€‚æ¯ä¸ªé¡µèƒ½å­˜æ”¾çš„è¡Œæ•°æœ‰ä¸Šé™ï¼Œä¾‹å¦‚å¯¹äºé»˜è®¤çš„16KBé¡µï¼Œæœ€å¤šçº¦å¯å­˜æ”¾7992è¡Œè®°å½•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¡¨ç©ºé—´çš„ç®¡ç†ä¸å®è·µ"&gt;ğŸ› ï¸ è¡¨ç©ºé—´çš„ç®¡ç†ä¸å®è·µ
&lt;/h3&gt;&lt;p&gt;äº†è§£ç»“æ„åï¼Œå…³é”®åœ¨äºå¦‚ä½•æœ‰æ•ˆç®¡ç†å’Œè¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡¨ç©ºé—´ç±»å‹é€‰æ‹©&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´&lt;/strong&gt;ï¼šæ—©æœŸç‰ˆæœ¬é»˜è®¤æ¨¡å¼ï¼Œæ‰€æœ‰è¡¨å’Œç³»ç»Ÿæ•°æ®å…±å­˜äº&lt;code&gt;ibdata1&lt;/code&gt;æ–‡ä»¶ã€‚éš¾ä»¥å•ç‹¬ç®¡ç†ç‰¹å®šè¡¨ï¼Œ&lt;strong&gt;ç©ºé—´æ— æ³•è‡ªåŠ¨å›æ”¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹è¡¨ç©ºé—´&lt;/strong&gt;ï¼š&lt;strong&gt;ç°ä»£MySQLçš„é»˜è®¤æ¨è&lt;/strong&gt;ã€‚å¯ç”¨å‚æ•°&lt;code&gt;innodb_file_per_table=ON&lt;/code&gt;åï¼Œæ¯å¼ è¡¨æœ‰ç‹¬ç«‹çš„&lt;code&gt;.ibd&lt;/code&gt;æ–‡ä»¶ã€‚&lt;strong&gt;ä¼˜åŠ¿æ˜æ˜¾&lt;/strong&gt;ï¼šå¯ä»¥å•ç‹¬å¯¹è¡¨è¿›è¡Œå¤‡ä»½ã€æ¢å¤ï¼›æ‰§è¡Œ&lt;code&gt;DROP TABLE&lt;/code&gt;æˆ–&lt;code&gt;TRUNCATE TABLE&lt;/code&gt;èƒ½ç›´æ¥é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼›æ›´å®¹æ˜“ä¼˜åŒ–å’Œç®¡ç†å•ä¸ªè¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´ä¼˜åŒ–ä¸ç¢ç‰‡æ•´ç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éšç€æ•°æ®é¢‘ç¹å¢åˆ æ”¹ï¼Œè¡¨ç©ºé—´ä¼šäº§ç”Ÿ&lt;strong&gt;ç¢ç‰‡&lt;/strong&gt;ï¼Œå¯¼è‡´ç©ºé—´æµªè´¹å’Œæ€§èƒ½ä¸‹é™ã€‚å¸¸ç”¨ä¼˜åŒ–æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;OPTIMIZE TABLE table_name;&lt;/code&gt;&lt;/strong&gt; å‘½ä»¤é‡å»ºè¡¨å¹¶æ•´ç†ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ &lt;strong&gt;&lt;code&gt;ALTER TABLE table_name ENGINE=InnoDB;&lt;/code&gt;&lt;/strong&gt; ä¹Ÿèƒ½è¾¾åˆ°é‡å»ºè¡¨ã€ä¼˜åŒ–ç©ºé—´çš„ç›®çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ç‰¹æ€§ï¼šåŒå†™ç¼“å†²åŒº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯InnoDBä¿éšœæ•°æ®å¯é æ€§çš„ä¸€é¡¹é‡è¦æœºåˆ¶ã€‚åœ¨å°†æ•°æ®é¡µå†™å…¥æœ€ç»ˆç£ç›˜ä½ç½®å‰ï¼ŒInnoDBä¼šå…ˆå°†å®ƒä»¬å†™å…¥ç³»ç»Ÿè¡¨ç©ºé—´å†…çš„ä¸€ä¸ªç§°ä¸º&lt;strong&gt;åŒå†™ç¼“å†²åŒº&lt;/strong&gt;çš„è¿ç»­åŒºåŸŸï¼Œç„¶åå†å†™å…¥ç›®æ ‡ä½ç½®ã€‚å½“å‘ç”Ÿéƒ¨åˆ†é¡µå†™å…¥ï¼ˆå¦‚å†™å…¥è¿‡ç¨‹ä¸­ç³»ç»Ÿæ–­ç”µï¼‰æ—¶ï¼ŒInnoDBå¯ä»¥ä»åŒå†™ç¼“å†²åŒºä¸­æ‰¾åˆ°è¯¥é¡µçš„å®Œå¥½å‰¯æœ¬ç”¨äºæ¢å¤ï¼Œä»è€Œ&lt;strong&gt;é¿å…æ•°æ®æŸå&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼ŒInnoDBè¡¨ç©ºé—´æ˜¯ä¸€ä¸ªå±‚æ¬¡åˆ†æ˜ã€ç®¡ç†ç²¾ç»†çš„é€»è¾‘å­˜å‚¨ç»“æ„ã€‚ä¸ºäº†è·å¾—æœ€ä½³çš„æ€§èƒ½å’Œç®¡ç†çµæ´»æ€§ï¼Œå»ºè®®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ç‹¬ç«‹è¡¨ç©ºé—´&lt;/strong&gt;ï¼šç¡®ä¿&lt;code&gt;innodb_file_per_table=ON&lt;/code&gt;ï¼ˆç°ä»£ç‰ˆæœ¬é€šå¸¸é»˜è®¤å¦‚æ­¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸä¼˜åŒ–å¤§è¡¨&lt;/strong&gt;ï¼šå¯¹é¢‘ç¹æ›´æ–°ã€åˆ é™¤æ“ä½œçš„æ ¸å¿ƒå¤§è¡¨ï¼Œå®šæœŸä½¿ç”¨&lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;æˆ–ç›¸åº”&lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥æ•´ç†ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨æ–‡ä»¶å¤§å°&lt;/strong&gt;ï¼šç›‘æ§ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆ&lt;code&gt;ibdata1&lt;/code&gt;ï¼‰å’Œç‹¬ç«‹è¡¨ç©ºé—´ï¼ˆ&lt;code&gt;.ibd&lt;/code&gt;æ–‡ä»¶ï¼‰çš„å¤§å°å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£å¯é æ€§ä»£ä»·&lt;/strong&gt;ï¼šçŸ¥æ™“åŒå†™ç¼“å†²åŒºç­‰æœºåˆ¶ä¼šå¸¦æ¥å°‘é‡æ€§èƒ½å¼€é”€ï¼Œä½†è¿™æ˜¯ä¿éšœæ•°æ®å®‰å…¨çš„å…³é”®æƒè¡¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£InnoDBçš„è¡¨ç©ºé—´ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚ï¼Œæ¯”å¦‚B+æ ‘ç´¢å¼•åœ¨è¡¨ç©ºé—´ä¸­çš„å…·ä½“ç»„ç»‡å½¢å¼ï¼Œæˆ–è€…åŒå†™ç¼“å†²åŒºçš„æ›´æ·±å…¥å·¥ä½œåŸç†æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="äº‹åŠ¡æ—¥å¿—"&gt;äº‹åŠ¡æ—¥å¿—
&lt;/h2&gt;&lt;p&gt;ç†è§£äº‹åŠ¡æ—¥å¿—åœ¨è¡¨ç©ºé—´ä¸­çš„ä½ç½®ï¼Œå…³é”®åœ¨äºåŒºåˆ† &lt;strong&gt;Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä»¬çš„å­˜å‚¨ä½ç½®å’Œç®¡ç†æ–¹å¼å®Œå…¨ä¸åŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒä¿¡æ¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ—¥å¿—ç±»å‹&lt;/th&gt;
&lt;th&gt;ç‰©ç†å­˜å‚¨ä½ç½®&lt;/th&gt;
&lt;th&gt;é»˜è®¤æ–‡ä»¶å/ä½ç½®&lt;/th&gt;
&lt;th&gt;ç®¡ç†æ–¹å¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹äºè¡¨ç©ºé—´&lt;/strong&gt;çš„ç‰©ç†æ—¥å¿—æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ib_logfile0&lt;/code&gt;, &lt;code&gt;ib_logfile1&lt;/code&gt;ï¼ˆé»˜è®¤åœ¨æ•°æ®ç›®å½•ä¸‹ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šå¤§å°ï¼Œå¾ªç¯å†™å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆibdata1ï¼‰&lt;/strong&gt; æˆ– &lt;strong&gt;ç‹¬ç«‹çš„Undoè¡¨ç©ºé—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ibdata1&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;undo_001&lt;/code&gt;, &lt;code&gt;undo_002&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯é…ç½®ä¸ºç‹¬ç«‹è¡¨ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-redo-log-çš„å­˜å‚¨ä½ç½®"&gt;ğŸ’¡ Redo Log çš„å­˜å‚¨ä½ç½®
&lt;/h3&gt;&lt;p&gt;Redo Log æ˜¯ InnoDB å­˜å‚¨å¼•æ“ä¸ºäº†ç¡®ä¿äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;è€Œè®¾è®¡çš„ç‰©ç†æ—¥å¿—ã€‚å®ƒ&lt;strong&gt;å¹¶ä¸å­˜å‚¨åœ¨ä»»ä½•è¡¨ç©ºé—´æ–‡ä»¶å†…éƒ¨&lt;/strong&gt;ï¼Œè€Œæ˜¯åœ¨ç£ç›˜ä¸Šæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ã€ä¸“é—¨çš„æ—¥å¿—æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤æ–‡ä»¶&lt;/strong&gt;ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åœ¨ MySQL çš„&lt;strong&gt;æ•°æ®ç›®å½•&lt;/strong&gt;ï¼ˆç”± &lt;code&gt;datadir&lt;/code&gt;å‚æ•°æŒ‡å®šï¼‰ä¸‹æ‰¾åˆ°åä¸º &lt;code&gt;ib_logfile0&lt;/code&gt;å’Œ &lt;code&gt;ib_logfile1&lt;/code&gt;çš„æ–‡ä»¶ã€‚å®ƒä»¬å…±åŒç»„æˆä¸€ä¸ª&lt;strong&gt;æ—¥å¿—æ–‡ä»¶ç»„&lt;/strong&gt;ï¼Œé‡‡ç”¨å¾ªç¯å†™å…¥çš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰è·¯å¾„&lt;/strong&gt;ï¼šä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ &lt;code&gt;innodb_log_group_home_dir&lt;/code&gt;å‚æ•°æ¥æŒ‡å®š Redo Log æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šRedo Log è®°å½•çš„æ˜¯å¯¹æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ã€‚å½“äº‹åŠ¡æäº¤æ—¶ï¼Œç›¸å…³ä¿®æ”¹å¿…é¡»å…ˆå†™å…¥ Redo Logï¼ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯é¡ºåºIOï¼Œé€Ÿåº¦å¾ˆå¿«ï¼‰ï¼Œç„¶åæ‰ä¼šåœ¨åå°ç¼“æ…¢åœ°å°†å†…å­˜ä¸­çš„â€œè„é¡µâ€åˆ·æ–°åˆ°è¡¨ç©ºé—´çš„æ•°æ®æ–‡ä»¶ä¸­ã€‚è¿™ç§ &lt;strong&gt;â€œå…ˆå†™æ—¥å¿—â€&lt;/strong&gt; çš„æœºåˆ¶æ˜¯ä¿è¯å´©æºƒæ¢å¤èƒ½æ­£å¸¸å·¥ä½œçš„å…³é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-undo-log-çš„å­˜å‚¨ä½ç½®"&gt;ğŸ”„ Undo Log çš„å­˜å‚¨ä½ç½®
&lt;/h3&gt;&lt;p&gt;Undo Log ç”¨äºå®ç°äº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰&lt;/strong&gt;ã€‚å®ƒçš„å­˜å‚¨ä½ç½®ç»å†äº†æ¼”è¿›ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆé»˜è®¤åŠä¼ ç»Ÿæ–¹å¼ï¼‰&lt;/strong&gt;ï¼šåœ¨æ—©æœŸç‰ˆæœ¬æˆ–é»˜è®¤é…ç½®ä¸‹ï¼ŒUndo Log å­˜å‚¨åœ¨åä¸º &lt;code&gt;ibdata1&lt;/code&gt;çš„&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´&lt;/strong&gt;æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶ä¹Ÿå­˜å‚¨äº†ä¸€äº›å…¶ä»–ç³»ç»Ÿä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹ Undo è¡¨ç©ºé—´ï¼ˆç°ä»£æ¨èæ–¹å¼ï¼‰&lt;/strong&gt;ï¼šä¸ºäº†æ›´å¥½ç®¡ç†å’Œå›æ”¶ Undo Log å ç”¨çš„ç©ºé—´ï¼Œç°ä»£ MySQL ç‰ˆæœ¬æ”¯æŒå°† Undo Log ä»ç³»ç»Ÿè¡¨ç©ºé—´ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå­˜æ”¾åœ¨ç‹¬ç«‹çš„ Undo è¡¨ç©ºé—´æ–‡ä»¶ä¸­ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å‘½åä¸º &lt;code&gt;undo_001&lt;/code&gt;ã€&lt;code&gt;undo_002&lt;/code&gt;ç­‰ï¼ŒåŒæ ·ä½äºæ•°æ®ç›®å½•ä¸‹ã€‚
&lt;ul&gt;
&lt;li&gt;é€šè¿‡è®¾ç½® &lt;code&gt;innodb_undo_tablespaces&lt;/code&gt;å‚æ•°å¯ä»¥å¯ç”¨å¹¶é…ç½®ç‹¬ç«‹ Undo è¡¨ç©ºé—´çš„æ•°ç›®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•æŸ¥çœ‹ä¸é…ç½®"&gt;âš™ï¸ å¦‚ä½•æŸ¥çœ‹ä¸é…ç½®
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ MySQL å‘½ä»¤æ¥æŸ¥çœ‹å’Œè°ƒæ•´è¿™äº›æ—¥å¿—çš„å­˜å‚¨è®¾ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ Redo Log é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW VARIABLES LIKE &amp;#39;innodb_log%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹å…³æ³¨ &lt;code&gt;innodb_log_group_home_dir&lt;/code&gt;ï¼ˆè·¯å¾„ï¼‰å’Œ &lt;code&gt;innodb_log_file_size&lt;/code&gt;ï¼ˆå•ä¸ªæ–‡ä»¶å¤§å°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ Undo Log é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW VARIABLES LIKE &amp;#39;innodb_undo%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹å…³æ³¨ &lt;code&gt;innodb_undo_directory&lt;/code&gt;ï¼ˆç‹¬ç«‹Undoè¡¨ç©ºé—´è·¯å¾„ï¼‰å’Œ &lt;code&gt;innodb_undo_tablespaces&lt;/code&gt;ï¼ˆè¡¨ç©ºé—´æ•°é‡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å…³ç³»"&gt;ğŸ’ æ€»ç»“ä¸å…³ç³»
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥è¿™æ ·è®°å¿†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Redo Log&lt;/strong&gt; åƒæ˜¯é£æœºçš„&lt;strong&gt;é»‘åŒ£å­&lt;/strong&gt;ï¼Œç‹¬ç«‹å­˜åœ¨ï¼Œå¿ å®åœ°æŒ‰é¡ºåºè®°å½•æ‰€æœ‰æ“ä½œï¼Œç”¨äºç¾éš¾æ¢å¤ã€‚å®ƒå­˜æ”¾åœ¨&lt;strong&gt;ç‹¬ç«‹çš„ &lt;code&gt;ib_logfile&lt;/code&gt;ç³»åˆ—æ–‡ä»¶ä¸­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Undo Log&lt;/strong&gt; åƒæ˜¯æ–‡æ¡£ç¼–è¾‘æ—¶çš„&lt;strong&gt;æ’¤é”€å†å²&lt;/strong&gt;ã€‚ä¼ ç»Ÿä¸Šå®ƒå’Œç³»ç»Ÿæ–‡ä»¶æ··åœ¨ä¸€èµ·ï¼ˆ&lt;code&gt;ibdata1&lt;/code&gt;ï¼‰ï¼Œä½†ç°åœ¨æ›´æ¨èä¸ºå®ƒå»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„â€œå­˜æ¡£å®¤â€ï¼ˆ&lt;strong&gt;ç‹¬ç«‹çš„Undoè¡¨ç©ºé—´&lt;/strong&gt;ï¼‰ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½æ¸…æ™°åœ°å‘Šè¯‰ä½ äº‹åŠ¡æ—¥å¿—åœ¨è¡¨ç©ºé—´ä¸­çš„â€œå®¶â€åœ¨å“ªé‡Œã€‚å¦‚æœä½ å¯¹æŸä¸€ç§æ—¥å¿—çš„æœºåˆ¶æˆ–é…ç½®ç»†èŠ‚æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="order-by"&gt;Order by
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ’åºï¼ˆIndex Scanï¼‰&lt;/strong&gt;
å¦‚æœæŸ¥è¯¢çš„ORDER BYå­—æ®µä¸Šæœ‰é€‚åˆçš„ç´¢å¼•ï¼ŒMySQL å¯ä»¥ç›´æ¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§æ¥è¿”å›æ’åºç»“æœï¼Œè€Œæ— éœ€é¢å¤–çš„æ’åºæ“ä½œã€‚è¿™ç§æ–¹å¼æ•ˆç‡æœ€é«˜ï¼Œå› ä¸ºå®ƒé¿å…äº†é¢å¤–çš„å†…å­˜æˆ–ç£ç›˜æ’åºå¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶æ’åºï¼ˆFileSortï¼‰&lt;/strong&gt;
å½“æ— æ³•ä½¿ç”¨ç´¢å¼•è¿›è¡Œæ’åºæ—¶ï¼ŒMySQL ä¼šä½¿ç”¨æ–‡ä»¶æ’åºç®—æ³•ã€‚å¦‚æœæ•°æ®é‡è¾ƒå°ï¼Œæ’åºä¼šåœ¨å†…å­˜ä¸­å®Œæˆï¼›å¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œè¶…è¿‡äº†ç³»ç»Ÿé…ç½®çš„å†…å­˜é™åˆ¶ï¼ˆå¦‚sort_buffer_sizeï¼‰ï¼Œåˆ™ä¼šå°†éƒ¨åˆ†æ•°æ®å†™å…¥ç£ç›˜ä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åè¿›è¡Œå¤–éƒ¨æ’åºã€‚æ–‡ä»¶æ’åºå¯èƒ½ä¼šæ¶‰åŠå¤šæ¬¡ç£ç›˜ I/Oï¼Œå› æ­¤æ€§èƒ½ç›¸å¯¹è¾ƒä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼ˆPriority Queue Sortï¼‰&lt;/strong&gt;
å¯¹äºæŸäº›ç‰¹å®šçš„æŸ¥è¯¢ï¼Œå¦‚å¸¦æœ‰LIMITçš„æŸ¥è¯¢ï¼ŒMySQL å¯èƒ½ä¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆä¹Ÿç§°ä¸ºå †æ’åºï¼‰æ¥ä¼˜åŒ–æ’åºè¿‡ç¨‹ã€‚ä¼˜å…ˆé˜Ÿåˆ—æ’åºå¯ä»¥åœ¨æ•°æ®åˆ°è¾¾æ—¶åŠ¨æ€ç»´æŠ¤ä¸€ä¸ªæœ‰åºé˜Ÿåˆ—ï¼Œä»è€Œå‡å°‘æ’åºçš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ä¸»ä»å¤åˆ¶"&gt;ä¸»ä»å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶æ˜¯ä¸€é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒå…è®¸å°†ä¸€å°æ•°æ®åº“æœåŠ¡å™¨ï¼ˆä¸»åº“ï¼‰ä¸Šçš„æ•°æ®å˜æ›´ï¼ŒåŒæ­¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–æœåŠ¡å™¨ï¼ˆä»åº“ï¼‰ã€‚è¿™é¡¹æŠ€æœ¯æ˜¯æ„å»ºé«˜å¯ç”¨ã€é«˜æ€§èƒ½æ•°æ®åº“æ¶æ„çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹è¡¨æ¦‚æ‹¬äº†ä¸»ä»å¤åˆ¶å¸¦æ¥çš„ä¸»è¦ä»·å€¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒä»·å€¼&lt;/th&gt;
&lt;th&gt;å…·ä½“è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¯ç”¨ä¸å®¹ç¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åº“å‡ºç°æ•…éšœæ—¶ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡æ¢åˆ°ä»åº“ç»§ç»­æä¾›æœåŠ¡ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»å†™åˆ†ç¦»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åº“ä¸“æ³¨äºå¤„ç†å†™æ“ä½œï¼ˆå¢åˆ æ”¹ï¼‰ï¼Œä»åº“åˆ†æ‹…è¯»æ“ä½œï¼ˆæŸ¥è¯¢ï¼‰çš„å‹åŠ›ï¼Œæå‡ç³»ç»Ÿæ•´ä½“ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»åº“ç›¸å½“äºä¸»åº“çš„ä¸€ä¸ªå®æ—¶çƒ­å¤‡ä»½ï¼Œä¸ºæ•°æ®å®‰å…¨å¢åŠ ä¸€å±‚ä¿éšœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥å°†å¤šä¸ªè¯»è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„ä»åº“ä¸Šï¼Œé¿å…å•å°æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶æ„æ‰©å±•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å¢åŠ ä»åº“ï¼Œå¯ä»¥è½»æ¾åœ°æ¨ªå‘æ‰©å±•ç³»ç»Ÿçš„è¯»èƒ½åŠ›ï¼Œä»¥åº”å¯¹ä¸æ–­å¢é•¿çš„ä¸šåŠ¡è®¿é—®é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†-2"&gt;ğŸ”§ å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶çš„æœ¬è´¨æ˜¯&lt;strong&gt;å¼‚æ­¥å¤åˆ¶&lt;/strong&gt;ï¼Œå…¶æ ¸å¿ƒä¾èµ–äºä¸»åº“çš„&lt;strong&gt;äºŒè¿›åˆ¶æ—¥å¿—&lt;/strong&gt;ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥æ¸…æ™°åœ°åˆ†è§£ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åº“è®°å½•äºŒè¿›åˆ¶æ—¥å¿—&lt;/strong&gt;ï¼šæ¯å½“ä¸»åº“æ‰§è¡Œäº†ä¼šæ”¹å˜æ•°æ®çš„ SQL è¯­å¥ï¼ˆå¦‚ INSERT, UPDATE, DELETEï¼‰ï¼Œå®ƒä¼šå°†è¿™æ¡è¯­å¥ï¼ˆæˆ–è¯­å¥æ‰§è¡Œåçš„æ•°æ®è¡Œå˜åŒ–ï¼‰æŒ‰ç‰¹å®šæ ¼å¼ï¼ˆå¦‚ STATEMENT, ROW, MIXEDï¼‰è®°å½•åˆ°æœ¬åœ°çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“è·å–å¹¶ä¸­è½¬æ—¥å¿—&lt;/strong&gt;ï¼šä»åº“ä¸Šæœ‰ä¸€ä¸ª &lt;strong&gt;I/O çº¿ç¨‹&lt;/strong&gt;ï¼Œå®ƒä¼šè¿æ¥åˆ°ä¸»åº“ï¼Œè¯·æ±‚è¯»å–è‡ªæŸä¸ªä½ç½®ç‚¹ä¹‹åçš„äºŒè¿›åˆ¶æ—¥å¿—å†…å®¹ã€‚ä¸»åº“åˆ™æœ‰ä¸€ä¸ª &lt;strong&gt;Binlog Dump çº¿ç¨‹&lt;/strong&gt;ï¼Œè´Ÿè´£å°†æ—¥å¿—å†…å®¹å‘é€ç»™ä»åº“ã€‚ä»åº“çš„ I/O çº¿ç¨‹æ”¶åˆ°åï¼Œä¼šå°†æ—¥å¿—å†™å…¥æœ¬åœ°çš„&lt;strong&gt;ä¸­ç»§æ—¥å¿—&lt;/strong&gt;æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“é‡æ”¾ä¸­ç»§æ—¥å¿—&lt;/strong&gt;ï¼šä»åº“ä¸Šçš„å¦ä¸€ä¸ª &lt;strong&gt;SQL çº¿ç¨‹&lt;/strong&gt;ä¼šè¯»å–ä¸­ç»§æ—¥å¿—ä¸­çš„å†…å®¹ï¼Œå¹¶è§£ææˆ SQL è¯­å¥åœ¨ä»åº“ä¸Šé¡ºåºæ‰§è¡Œï¼Œä»è€Œä½¿å¾—ä»åº“çš„æ•°æ®ä¸ä¸»åº“ä¿æŒä¸€è‡´ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œä¸­ç»§æ—¥å¿—é€šå¸¸ä¼šè¢«æ¸…ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é…ç½®æ­¥éª¤è¯¦è§£"&gt;ğŸ“ é…ç½®æ­¥éª¤è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä¸€ä¸»ä¸€ä»é…ç½®æµç¨‹ã€‚&lt;/p&gt;
&lt;h4 id="1-ä¸»åº“é…ç½®"&gt;1. ä¸»åº“é…ç½®
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼šç¼–è¾‘ä¸»åº“çš„ MySQL é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;/etc/my.cnf&lt;/code&gt;ï¼‰ï¼Œç¡®ä¿åŒ…å«ä»¥ä¸‹å…³é”®è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[mysqld]
server-id = 1 # å¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½ä¸ä»åº“é‡å¤
log-bin = mysql-bin # å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—ï¼ŒæŒ‡å®šæ—¥å¿—æ–‡ä»¶å‰ç¼€
# binlog-ignore-db=mysql # ï¼ˆå¯é€‰ï¼‰å¿½ç•¥ä¸åŒæ­¥çš„æ•°æ®åº“
# binlog-do-db=your_db # ï¼ˆå¯é€‰ï¼‰æŒ‡å®šè¦åŒæ­¥çš„æ•°æ®åº“
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºå¤åˆ¶è´¦å·&lt;/strong&gt;ï¼šåœ¨ä¸»åº“ä¸Šåˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äºå¤åˆ¶çš„ç”¨æˆ·ï¼Œå¹¶æˆäºˆ &lt;code&gt;REPLICATION SLAVE&lt;/code&gt;æƒé™ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE USER &amp;#39;repl_user&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED BY &amp;#39;YourSecurePassword123!&amp;#39;;
GRANT REPLICATION SLAVE ON *.* TO &amp;#39;repl_user&amp;#39;@&amp;#39;%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–äºŒè¿›åˆ¶æ—¥å¿—ä½ç½®&lt;/strong&gt;ï¼š&lt;strong&gt;æ­¤æ­¥éå¸¸å…³é”®&lt;/strong&gt;ã€‚è®°å½•ä¸‹å½“å‰äºŒè¿›åˆ¶æ—¥å¿—çš„æ–‡ä»¶åå’Œä½ç½®ç‚¹ï¼Œä»åº“å°†ä»è¿™ä¸ªç‚¹å¼€å§‹åŒæ­¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;FLUSH TABLES WITH READ LOCK; -- é”å®šè¡¨ï¼Œé˜²æ­¢æ•°æ®å˜åŒ–
SHOW MASTER STATUS; -- è®°å½• File å’Œ Position åˆ—çš„å€¼ï¼Œä¾‹å¦‚ File: mysql-bin.000001, Position: 154
UNLOCK TABLES; -- ç«‹å³è§£é”
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šå¦‚æœä¸»åº“å·²æœ‰æ•°æ®ï¼Œéœ€è¦å…ˆä½¿ç”¨ &lt;code&gt;mysqldump&lt;/code&gt;ç­‰å·¥å…·å°†æ•°æ®å…¨é‡å¤‡ä»½å¹¶å¯¼å…¥ä»åº“ï¼Œä»¥ç¡®ä¿ä¸»ä»åˆå§‹æ•°æ®ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ä»åº“é…ç½®"&gt;2. ä»åº“é…ç½®
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼šç¼–è¾‘ä»åº“çš„é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[mysqld]
server-id = 2 # å¿…é¡»å”¯ä¸€ï¼Œä¸ä¸»åº“ä¸åŒ
relay-log = mysql-relay-bin # ä¸­ç»§æ—¥å¿—æ–‡ä»¶å
read_only = ON # å»ºè®®è®¾ç½®ä¸ºåªè¯»ï¼Œé˜²æ­¢è¯¯å†™
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®ä¸»åº“è¿æ¥ä¿¡æ¯&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œå‘Šè¯‰å®ƒä¸»åº“åœ¨å“ªé‡Œä»¥åŠä»å“ªé‡Œå¼€å§‹å¤åˆ¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CHANGE MASTER TO
MASTER_HOST=&amp;#39;ä¸»åº“çš„IPåœ°å€&amp;#39;,
MASTER_USER=&amp;#39;repl_user&amp;#39;,
MASTER_PASSWORD=&amp;#39;YourSecurePassword123!&amp;#39;,
MASTER_LOG_FILE=&amp;#39;mysql-bin.000001&amp;#39;, -- å¡«å†™ä¸»åº“ SHOW MASTER STATUS å¾—åˆ°çš„ File
MASTER_LOG_POS=154; -- å¡«å†™ä¸»åº“ SHOW MASTER STATUS å¾—åˆ°çš„ Position
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯åŠ¨å¤åˆ¶å¹¶æ£€æŸ¥çŠ¶æ€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;START SLAVE; -- MySQL 8.0.23+ ä¹Ÿå¯ä½¿ç”¨ START REPLICA
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ£€æŸ¥å¤åˆ¶çŠ¶æ€ï¼Œç¡®ä¿ä¸¤ä¸ªå…³é”®çº¿ç¨‹æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW SLAVE STATUS\G
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªå­—æ®µï¼Œå¿…é¡»å‡ä¸º &lt;code&gt;Yes&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Slave_IO_Running: Yes&lt;/code&gt;ï¼ˆI/O çº¿ç¨‹çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Slave_SQL_Running: Yes&lt;/code&gt;ï¼ˆSQL çº¿ç¨‹çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚æœå‡ºç° &lt;code&gt;No&lt;/code&gt;æˆ– &lt;code&gt;Connecting&lt;/code&gt;ï¼Œéœ€æ£€æŸ¥ &lt;code&gt;Last_IO_Error&lt;/code&gt;æˆ– &lt;code&gt;Last_SQL_Error&lt;/code&gt;å­—æ®µçš„é”™è¯¯ä¿¡æ¯è¿›è¡Œæ’æŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¿›é˜¶æ¦‚å¿µä¸å¸¸è§é—®é¢˜"&gt;âš ï¸ è¿›é˜¶æ¦‚å¿µä¸å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;h4 id="å¤åˆ¶æ¨¡å¼"&gt;å¤åˆ¶æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶æ”¯æŒä¸åŒçš„æ—¥å¿—æ ¼å¼ï¼Œå¯¹åº”ä¸åŒçš„å¤åˆ¶æ¨¡å¼ï¼Œå„æœ‰ä¼˜åŠ£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¨¡å¼&lt;/th&gt;
&lt;th&gt;åŸç†&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­å¥å¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®°å½•æ‰§è¡Œçš„ SQL è¯­å¥&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å°ï¼ŒèŠ‚çœç©ºé—´&lt;/td&gt;
&lt;td&gt;å¯èƒ½å› ä½¿ç”¨éç¡®å®šæ€§å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;NOW()&lt;/code&gt;ï¼‰å¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡Œå¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®°å½•æ¯è¡Œæ•°æ®çš„å®é™…å˜åŒ–&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¸€è‡´æ€§é«˜ï¼Œæ˜¯é»˜è®¤æ¨èæ¨¡å¼&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å¯èƒ½éå¸¸å¤§ï¼ˆå¦‚æ‰¹é‡æ›´æ–°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ··åˆå¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”± MySQL è‡ªåŠ¨é€‰æ‹©ä½¿ç”¨è¯­å¥æˆ–è¡Œæ¨¡å¼&lt;/td&gt;
&lt;td&gt;å…¼é¡¾æ•ˆç‡ä¸ä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;é€»è¾‘ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="ä¸»ä»å»¶è¿Ÿ"&gt;ä¸»ä»å»¶è¿Ÿ
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œè¡¨ç°ä¸ºä»åº“æ•°æ®è½åäºä¸»åº“ã€‚ä¸»è¦åŸå› å’Œè§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå»¶è¿Ÿ&lt;/strong&gt;ï¼šä¼˜åŒ–ä¸»ä»åº“ä¹‹é—´çš„ç½‘ç»œè´¨é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“ç¡¬ä»¶æ€§èƒ½å·®&lt;/strong&gt;ï¼šæå‡ä»åº“çš„ç¡¬ä»¶é…ç½®ï¼ˆç‰¹åˆ«æ˜¯ CPU å’Œç£ç›˜ I/Oï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§äº‹åŠ¡&lt;/strong&gt;ï¼šé¿å…åœ¨ä¸»åº“ä¸Šä¸€æ¬¡æ€§æ‰§è¡Œè€—æ—¶è¿‡é•¿ã€æ¶‰åŠæ•°æ®é‡è¿‡å¤§çš„äº‹åŠ¡ï¼Œå¯å°è¯•æ‹†åˆ†ä¸ºå°äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“å‹åŠ›è¿‡å¤§&lt;/strong&gt;ï¼šå•ä¸€ä»åº“è¯»è¯·æ±‚è¿‡å¤šä¼šå¯¼è‡´ SQL çº¿ç¨‹åº”ç”¨æ—¥å¿—å˜æ…¢ã€‚å¯ä»¥è€ƒè™‘&lt;strong&gt;ä¸€ä¸»å¤šä»&lt;/strong&gt;æ¶æ„ï¼Œåˆ†æ•£è¯»å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŠåŒæ­¥å¤åˆ¶"&gt;åŠåŒæ­¥å¤åˆ¶
&lt;/h4&gt;&lt;p&gt;é»˜è®¤çš„å¼‚æ­¥å¤åˆ¶ä¸ä¿è¯ä¸»åº“çš„äº‹åŠ¡åœ¨ä»åº“ä¸Šä¸€å®šè¢«æ¥æ”¶ã€‚&lt;strong&gt;åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt; æä¾›äº†æ›´å¼ºçš„æ•°æ®ä¸€è‡´æ€§ä¿è¯ï¼šä¸»åº“åœ¨æ‰§è¡Œå®Œä¸€ä¸ªäº‹åŠ¡åï¼Œ&lt;strong&gt;å¿…é¡»ç­‰å¾…è‡³å°‘ä¸€ä¸ªä»åº“æ¥æ”¶å¹¶å†™å…¥å…¶ä¸­ç»§æ—¥å¿—å&lt;/strong&gt;ï¼Œæ‰è¿”å›ç»“æœç»™å®¢æˆ·ç«¯ã€‚è¿™æœ‰æ•ˆé™ä½äº†ä¸»åº“æ•…éšœæ—¶æ•°æ®ä¸¢å¤±çš„é£é™©ï¼Œä½†ä¼šç¨å¾®å¢åŠ ä¸»åº“çš„å“åº”æ—¶é—´ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶æ˜¯ä¸€é¡¹å¼ºå¤§è€Œçµæ´»çš„æŠ€æœ¯ï¼Œæ˜¯å®ç°æ•°æ®åº“é«˜å¯ç”¨ã€è¯»å†™åˆ†ç¦»å’Œè´Ÿè½½å‡è¡¡çš„åŸºç¡€ã€‚ç†è§£å…¶å·¥ä½œåŸç†ã€ç†Ÿç»ƒæŒæ¡é…ç½®æµç¨‹ï¼Œå¹¶èƒ½å¤Ÿåº”å¯¹å¸¸è§çš„å»¶è¿Ÿç­‰é—®é¢˜ï¼Œå¯¹äºæ„å»ºç¨³å®šå¯é çš„æ•°æ®åº“ç³»ç»Ÿè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL ä¸»ä»å¤åˆ¶ã€‚å¦‚æœä½ åœ¨å…·ä½“çš„é…ç½®æˆ–é—®é¢˜æ’æŸ¥ä¸­é‡åˆ°å›°éš¾ï¼Œæ¬¢è¿éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="å¤åˆ¶èµ·ç‚¹"&gt;å¤åˆ¶èµ·ç‚¹
&lt;/h2&gt;&lt;p&gt;å…³äº MySQL ä¸»ä»å¤åˆ¶ä¸­ binlog çš„å¤åˆ¶èµ·ç‚¹å’Œä¿ç•™é—®é¢˜ï¼Œç®€å•æ¥è¯´ï¼š&lt;strong&gt;å¤åˆ¶ä¸ä¸€å®šéœ€è¦ä»å¤´å¼€å§‹ï¼Œå¹¶ä¸” binlog ä¹Ÿç»ä¸ä¼šæ°¸ä¹…ä¿ç•™&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒé—®é¢˜&lt;/th&gt;
&lt;th&gt;ç®€çŸ­å›ç­”&lt;/th&gt;
&lt;th&gt;å…³é”®æœºåˆ¶ä¸å½±å“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦éœ€è¦ä»å¤´å¤åˆ¶ï¼Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸éœ€è¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;å‚æ•°æŒ‡å®šç²¾ç¡®çš„èµ·å§‹ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Binlog ä¼šæ°¸è¿œä¿ç•™å—ï¼Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸ä¼š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;expire_logs_days&lt;/code&gt;ï¼ˆæŒ‰å¤©æ•°ï¼‰æˆ– &lt;code&gt;binlog_expire_logs_seconds&lt;/code&gt;ï¼ˆæŒ‰ç§’æ•°ï¼ŒMySQL 8.0+ï¼‰å‚æ•°è®¾ç½®è‡ªåŠ¨è¿‡æœŸæ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•çµæ´»é€‰æ‹©å¤åˆ¶èµ·ç‚¹"&gt;ğŸ’¡ å¦‚ä½•çµæ´»é€‰æ‹©å¤åˆ¶èµ·ç‚¹
&lt;/h3&gt;&lt;p&gt;ä¸»ä»å¤åˆ¶å¹¶éæ€»æ˜¯ä»ç¬¬ä¸€ä¸ª binlog æ–‡ä»¶å¼€å§‹åŒæ­¥ã€‚ä½ å¯ä»¥æ ¹æ®è¿ç»´éœ€æ±‚ï¼Œè®©ä»åº“ä»æŸä¸ªç‰¹å®šçš„æ—¶é—´ç‚¹æˆ–ä½ç½®å¼€å§‹å¤åˆ¶ï¼Œè¿™åœ¨éœ€è¦æ–°å¢ä»åº“æˆ–è¿›è¡Œæ•°æ®æ¢å¤æ—¶éå¸¸å®ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœåœ¨é…ç½®ä»åº“æ—¶&lt;strong&gt;ä¸æŒ‡å®š&lt;/strong&gt;èµ·å§‹ç‚¹ï¼Œä»åº“ä¼šå°è¯•ä»ä¸»åº“å½“å‰æ­£åœ¨å†™å…¥çš„æœ€æ–°ä¸€ä¸ª binlog æ–‡ä»¶çš„&lt;strong&gt;å¼€å¤´&lt;/strong&gt;è¿›è¡Œè¯»å–ã€‚ä½†è¿™é€šå¸¸ä»…é€‚ç”¨äºä¸€ä¸ªå…¨æ–°çš„ã€æ²¡æœ‰ä»»ä½•æ•°æ®çš„ä¸»ä»ç¯å¢ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å®šä½ç½®å¤åˆ¶&lt;/strong&gt;ï¼šæ›´å¸¸è§çš„åšæ³•æ˜¯ï¼Œé€šè¿‡ &lt;code&gt;CHANGE MASTER TO&lt;/code&gt;å‘½ä»¤ä¸­çš„ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;å‚æ•°ï¼Œæ˜ç¡®å‘ŠçŸ¥ä»åº“åº”è¯¥ä»å“ªä¸ª binlog æ–‡ä»¶çš„å“ªä¸ªä½ç½®å¼€å§‹å¤åˆ¶ã€‚è¿™ä¸ªä½ç½®ä¿¡æ¯é€šå¸¸å¯ä»¥é€šè¿‡ &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;å‘½ä»¤è·å–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®è·µåœºæ™¯&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œåœ¨ä¸ºè¿è¡Œä¸­çš„ä¸»åº“æ–°å¢ä¸€ä¸ªä»åº“æ—¶ï¼Œæ ‡å‡†çš„åšæ³•æ˜¯ï¼š
&lt;ol&gt;
&lt;li&gt;å¯¹ä¸»åº“è¿›è¡Œ&lt;strong&gt;é”è¡¨&lt;/strong&gt;æˆ–ä½¿ç”¨&lt;strong&gt;ä¸åœæœºçš„å¤‡ä»½å·¥å…·&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;mysqldump&lt;/code&gt;é…åˆ &lt;code&gt;--master-data&lt;/code&gt;å‚æ•°ï¼‰æ¥è·å–ä¸€ä»½æ•°æ®ä¸€è‡´æ€§å¿«ç…§ã€‚&lt;/li&gt;
&lt;li&gt;å°†è¿™ä»½å¿«ç…§æ¢å¤åˆ°ä»åº“ã€‚&lt;/li&gt;
&lt;li&gt;ä»å¿«ç…§ä¸­åŒ…å«çš„ä¿¡æ¯æˆ–é€šè¿‡ &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;è·å–åˆ°çš„ binlog ä½ç½®ï¼Œæ¥é…ç½®ä»åº“çš„å¤åˆ¶èµ·ç‚¹ã€‚è¿™æ ·ï¼Œä»åº“å°±ä¼šä»å¿«ç…§å¯¹åº”çš„é‚£ä¸ªæ—¶é—´ç‚¹å¼€å§‹åŒæ­¥ä¸»åº“ä¹‹åçš„æ–°æ•°æ®ï¼Œè€Œæ— éœ€é‡æ”¾æ‰€æœ‰å†å² binlogã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-binlog-çš„ä¿ç•™ç­–ç•¥ä¸æ¸…ç†"&gt;ğŸ—‘ï¸ Binlog çš„ä¿ç•™ç­–ç•¥ä¸æ¸…ç†
&lt;/h3&gt;&lt;p&gt;MySQL ä¸ä¼šæ— é™æœŸåœ°ä¿å­˜ binlog æ–‡ä»¶ï¼Œå¦åˆ™ç£ç›˜ç©ºé—´è¿Ÿæ—©ä¼šè¢«è€—å°½ã€‚ä½ éœ€è¦ä¸»åŠ¨é…ç½®ä¿ç•™ç­–ç•¥æ¥æ§åˆ¶ binlog çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æ¸…ç†æœºåˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯ç®¡ç† binlog çš„ä¸»è¦æ–¹å¼ã€‚é€šè¿‡è®¾ç½® &lt;code&gt;expire_logs_days&lt;/code&gt;ï¼ˆä¾‹å¦‚è®¾ä¸º &lt;code&gt;7&lt;/code&gt;è¡¨ç¤ºä¿ç•™7å¤©ï¼‰æˆ–æ›´ç²¾ç¡®çš„ &lt;code&gt;binlog_expire_logs_seconds&lt;/code&gt;ï¼ˆMySQL 8.0+ï¼‰ï¼ŒMySQL ä¼šè‡ªåŠ¨åˆ é™¤è¶…è¿‡æŒ‡å®šæ—¶é—´çš„æ—§ binlog æ–‡ä»¶ã€‚&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼šåœ¨è®¾ç½®è‡ªåŠ¨æ¸…ç†å‰ï¼Œå¿…é¡»ç¡®ä¿æ‰€æœ‰ä»åº“éƒ½å·²ç»æˆåŠŸè¯»å–å¹¶åº”ç”¨äº†è¿™äº›å³å°†è¢«æ¸…ç†çš„ binlogï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸»ä»å¤åˆ¶å› æ‰¾ä¸åˆ°æ–‡ä»¶è€Œä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨æ¸…ç†&lt;/strong&gt;ï¼šä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;PURGE BINARY LOGS&lt;/code&gt;å‘½ä»¤æ‰‹åŠ¨åˆ é™¤ç‰¹å®šæ—¶é—´ç‚¹æˆ–ç‰¹å®šæ–‡ä»¶ä¹‹å‰çš„ binlogã€‚è¿™åœ¨éœ€è¦è¿›è¡Œä¸€æ¬¡æ€§ç£ç›˜ç©ºé—´æ¸…ç†æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è®¾ç½®ä¿ç•™ç­–ç•¥çš„é£é™©&lt;/strong&gt;ï¼šå¦‚æœæœªé…ç½® binlog è¿‡æœŸæ—¶é—´ï¼Œbinlog æ–‡ä»¶å°†ä¸æ–­ç´¯ç§¯ï¼Œæœ€ç»ˆå¯èƒ½å æ»¡ç£ç›˜ç©ºé—´ï¼Œå¯¼è‡´æ•°æ®åº“æœåŠ¡ä¸å¯ç”¨ï¼Œå¹¶å¼•å‘ä¸»ä»å¤åˆ¶ä¸­æ–­å’Œæ•°æ®æ¢å¤å›°éš¾ç­‰é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç»™ä½ çš„å®è·µå»ºè®®"&gt;ğŸ”§ ç»™ä½ çš„å®è·µå»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆç†è§„åˆ’ä¿ç•™å‘¨æœŸ&lt;/strong&gt;ï¼šæ ¹æ®ä½ çš„ä¸šåŠ¡å¯¹æ•°æ®æ¢å¤çš„éœ€æ±‚ï¼ˆä¾‹å¦‚ï¼Œæœ€å¤šå…è®¸æ¢å¤å¤šä¹…ä¹‹å‰çš„æ•°æ®ï¼‰å’Œç£ç›˜ç©ºé—´å¤§å°ï¼Œè®¾ç½®ä¸€ä¸ªåˆç†çš„ binlog ä¿ç•™æ—¶é—´ã€‚é€šå¸¸å»ºè®®ä¿ç•™ &lt;strong&gt;7 åˆ° 30 å¤©&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å¤åˆ¶çŠ¶æ€&lt;/strong&gt;ï¼šå®šæœŸæ‰§è¡Œ &lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt;å‘½ä»¤ï¼Œæ£€æŸ¥ &lt;code&gt;Slave_IO_Running&lt;/code&gt;å’Œ &lt;code&gt;Slave_SQL_Running&lt;/code&gt;æ˜¯å¦ä¸º &lt;code&gt;Yes&lt;/code&gt;ï¼Œä»¥åŠ &lt;code&gt;Seconds_Behind_Master&lt;/code&gt;çš„å»¶è¿Ÿæƒ…å†µï¼Œç¡®ä¿ä¸»ä»åŒæ­¥å¥åº·è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ç£ç›˜ç©ºé—´&lt;/strong&gt;ï¼šç¡®ä¿å­˜æ”¾ binlog çš„ç£ç›˜åˆ†åŒºæœ‰è¶³å¤Ÿçš„å‰©ä½™ç©ºé—´ï¼Œé¿å…å›  binlog å¢é•¿å¯¼è‡´ç£ç›˜å†™æ»¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç† MySQL ä¸»ä»å¤åˆ¶ç¯å¢ƒã€‚å¦‚æœä½ åœ¨å…·ä½“çš„é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå¯ä»¥éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="åŠè·¯å¤åˆ¶"&gt;åŠè·¯å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸»ä»å¤åˆ¶ä¸­ï¼Œä¸ä»å¤´å¼€å§‹å¤åˆ¶ï¼ˆå³ä»æŸä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹æˆ–ä½ç½®å¼€å§‹åŒæ­¥ï¼‰æ˜¯å¸¸è§çš„è¿ç»´éœ€æ±‚ã€‚è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ ¸å¿ƒåœ¨äº&lt;strong&gt;ç²¾ç¡®é”å®šä¸€ä¸ªå…¨å±€ä¸€è‡´æ€§çš„åŒæ­¥èµ·ç‚¹ï¼Œå¹¶ç¡®ä¿ä»è¯¥ç‚¹ä¹‹åçš„æ‰€æœ‰å˜æ›´éƒ½èƒ½è¢«å®Œæ•´ä¸”æœ‰åºåœ°åº”ç”¨åˆ°ä»åº“&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶"&gt;ğŸ”§ ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ€»ç»“äº†å®ç°è¿™ä¸€ç›®æ ‡çš„å…³é”®æœºåˆ¶åŠå…¶ä½œç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;å¯¹æ•°æ®ä¸€è‡´æ€§çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GTID&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ¯ä¸ªäº‹åŠ¡åˆ†é…å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®å®šä½&lt;/strong&gt;ï¼šä»æ ¹æœ¬ä¸Šé¿å…å› æŒ‡å®šé”™è¯¯çš„æ—¥å¿—æ–‡ä»¶å’Œä½ç½®ç‚¹å¯¼è‡´çš„æ•°æ®é”™ä¹± ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§å¤‡ä»½ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;mysqldump --master-data=2&lt;/code&gt;æˆ– &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;è®°å½•å¤‡ä»½æ—¶åˆ»çš„ç²¾ç¡®ä½ç‚¹&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¡®ç«‹åŸºçº¿&lt;/strong&gt;ï¼šç¡®ä¿ä»åº“æ¢å¤çš„åŸºçº¿æ•°æ®ä¸ä¸»åº“åœ¨æŸä¸ª&lt;strong&gt;ç¡®åˆ‡æ—¶é—´ç‚¹&lt;/strong&gt;çš„çŠ¶æ€å®Œå…¨ä¸€è‡´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åº“æäº¤äº‹åŠ¡åéœ€ç­‰å¾…è‡³å°‘ä¸€ä¸ªä»åº“æ¥æ”¶å¹¶ç¡®è®¤&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡å°‘æ•°æ®ä¸¢å¤±é£é™©&lt;/strong&gt;ï¼šç¡®ä¿äº‹åŠ¡åœ¨è‡³å°‘ä¸¤ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œå¤§å¹…é™ä½ä¸»åº“å®•æœºæ—¶çš„æ•°æ®ä¸¢å¤±é£é™© ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶ç›‘æ§ä¸é”™è¯¯å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;SHOW SLAVE STATUS&lt;/code&gt;å‘½ä»¤ç›‘æ§çŠ¶æ€ï¼Œå¤„ç† &lt;code&gt;Last_SQL_Error&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠæ—¶å‘ç°ä¸ä¿®å¤&lt;/strong&gt;ï¼šå½“SQLçº¿ç¨‹åº”ç”¨æ—¥å¿—å‡ºé”™æ—¶èƒ½åŠæ—¶å¹²é¢„ï¼Œé˜²æ­¢å¤åˆ¶ä¸­æ–­å’Œæ•°æ®é•¿æœŸä¸ä¸€è‡´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®æ“ä½œæµç¨‹"&gt;ğŸ’¡ å…³é”®æ“ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…æ“ä½œä¸­ï¼Œæœ€å…³é”®çš„ä¸€æ­¥æ˜¯ä¸ºä»åº“è®¾å®šä¸€ä¸ªæ­£ç¡®çš„å¤åˆ¶èµ·ç‚¹ã€‚ä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†ä¸ºè¿è¡Œä¸­çš„ä¸»åº“æ–°å¢ä¸€ä¸ªä»åº“æ—¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ‡å‡†æ“ä½œæµç¨‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å¯¹ä¸»åº“è¿›è¡Œé”è¡¨æˆ–ä½¿ç”¨&amp;lt;br&amp;gt;ä¸åœæœºå¤‡ä»½å·¥å…·] --&amp;gt; B[è·å–æ•°æ®ä¸€è‡´æ€§å¿«ç…§&amp;lt;br&amp;gt;å¹¶è®°å½•åŒæ­¥ä½ç‚¹]
B --&amp;gt; C[å°†å¿«ç…§æ¢å¤åˆ°ä»åº“]
C --&amp;gt; D[åœ¨ä»åº“é…ç½®å¤åˆ¶&amp;lt;br&amp;gt;æŒ‡å®šè®°å½•çš„åŒæ­¥ä½ç‚¹]
D --&amp;gt; E[å¯åŠ¨ä»åº“å¤åˆ¶]
E --&amp;gt; F{ç›‘æ§å¤åˆ¶çŠ¶æ€&amp;lt;br&amp;gt;æ£€æŸ¥ Slave_IO/SQL_Running}
F -- å‡ä¸º Yes --&amp;gt; G[æ•°æ®åŒæ­¥ä¸­ï¼Œä¿æŒç›‘æ§]
F -- å‡ºç° Error --&amp;gt; H[æ ¹æ®é”™è¯¯ä¿¡æ¯å¹²é¢„ä¿®å¤]
G --&amp;gt; I[Seconds_Behind_Master è¶‹è¿‘äº 0]
I --&amp;gt; J[ä¸»ä»æ•°æ®è¾¾åˆ°ä¸€è‡´çŠ¶æ€]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæµç¨‹çš„æˆåŠŸï¼Œä¾èµ–äºå‡ ä¸ªå…³é”®æ­¥éª¤çš„å‡†ç¡®æ‰§è¡Œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ç«‹ä¸€è‡´æ€§å¿«ç…§ç‚¹&lt;/strong&gt;ï¼šè¿™æ˜¯æ•´ä¸ªæµç¨‹çš„åŸºçŸ³ã€‚ä½ éœ€è¦ä½¿ç”¨ &lt;code&gt;FLUSH TABLES WITH READ LOCK&lt;/code&gt;å¯¹ä¸»åº“åŠ è¯»é”ï¼Œç„¶åç«‹å³æ‰§è¡Œ &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;è®°å½•ä¸‹å½“å‰çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶åå’Œä½ç½®ç‚¹ï¼ˆFile å’Œ Positionï¼‰ã€‚è¿™ä¸ªä½ç½®ç‚¹å°±æ˜¯ä½ åç»­å¼€å§‹å¤åˆ¶çš„ç²¾ç¡®èµ·ç‚¹ ã€‚æˆ–è€…ï¼Œä½¿ç”¨å¸¦æœ‰ &lt;code&gt;--single-transaction&lt;/code&gt;å’Œ &lt;code&gt;--master-data=2&lt;/code&gt;å‚æ•°çš„ &lt;code&gt;mysqldump&lt;/code&gt;å‘½ä»¤ï¼Œå®ƒèƒ½åœ¨ä¸å½±å“ä¸»åº“å†™å…¥çš„æƒ…å†µä¸‹ï¼Œè·å–ä¸€ä¸ªä¸€è‡´æ€§çš„æ•°æ®å¿«ç…§å¹¶è‡ªåŠ¨åœ¨å¤‡ä»½æ–‡ä»¶ä¸­è®°å½•åŒæ­¥ä½ç‚¹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾å‡†é…ç½®å¤åˆ¶èµ·ç‚¹&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;CHANGE MASTER TO&lt;/code&gt;å‘½ä»¤æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼ä½¿ç”¨ç¬¬ä¸€æ­¥ä¸­è®°å½•çš„ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;ã€‚å¦‚æœä¸»ä»åº“éƒ½æ”¯æŒGTIDï¼Œä½¿ç”¨ &lt;code&gt;MASTER_AUTO_POSITION=1&lt;/code&gt;æ˜¯æ›´ç®€å•å¯é çš„æ–¹å¼ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨å®šä½ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¿éšœä¸€è‡´æ€§çš„è¿›é˜¶ç­–ç•¥"&gt;ğŸ›¡ï¸ ä¿éšœä¸€è‡´æ€§çš„è¿›é˜¶ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;é™¤äº†åŸºæœ¬æ“ä½œï¼Œè¿˜æœ‰ä¸€äº›ç­–ç•¥å¯ä»¥è¿›ä¸€æ­¥å¢å¼ºæ•°æ®ä¸€è‡´æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯å¯¹æ•°æ®å®‰å…¨æ€§çš„ä¸€ä¸ªæ˜¾è‘—æå‡ã€‚åœ¨å¼‚æ­¥å¤åˆ¶ä¸­ï¼Œä¸»åº“æäº¤äº‹åŠ¡åç«‹å³è¿”å›ï¼Œä¸å…³å¿ƒä»åº“æ˜¯å¦æ”¶åˆ°ã€‚è€ŒåŠåŒæ­¥å¤åˆ¶è¦æ±‚ä¸»åº“å¿…é¡»æ”¶åˆ°è‡³å°‘ä¸€ä¸ªä»åº“çš„ç¡®è®¤åï¼Œæ‰è®¤ä¸ºäº‹åŠ¡æäº¤æˆåŠŸã€‚è¿™è™½ç„¶ä¼šè½»å¾®å¢åŠ å“åº”æ—¶é—´ï¼Œä½†æå¤§åœ°ä¿è¯äº†æ•°æ®çš„å¯é æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åœ¨ä»åº“è¿›è¡Œå†™æ“ä½œ&lt;/strong&gt;ï¼šåŠ¡å¿…ç¡®ä¿ä»åº“æ˜¯åªè¯»çš„ï¼ˆå¯é€šè¿‡è®¾ç½® &lt;code&gt;read_only = ON&lt;/code&gt;å®ç°ï¼‰ã€‚ä»»ä½•åœ¨ä»åº“ä¸Šçš„ç›´æ¥å†™å…¥éƒ½ä¼šç ´åä¸ä¸»åº“çš„æ•°æ®ä¸€è‡´æ€§ï¼Œå¯¼è‡´å¤åˆ¶é”™è¯¯ç”šè‡³ä¸­æ–­ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€ŸåŠ©ä¸“ä¸šå·¥å…·&lt;/strong&gt;ï¼šå¯¹äºå¤§è§„æ¨¡æˆ–è¦æ±‚æé«˜çš„ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ Percona Toolkit ç­‰å·¥å…·ä¸­çš„ &lt;code&gt;pt-table-checksum&lt;/code&gt;æ¥å®šæœŸæ ¡éªŒä¸»ä»æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¹¶ç”¨ &lt;code&gt;pt-table-sync&lt;/code&gt;æ¥ä¿®å¤å‘ç°çš„å·®å¼‚ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸è§é—®é¢˜ä¸å¤„ç†"&gt;âš ï¸ å¸¸è§é—®é¢˜ä¸å¤„ç†
&lt;/h3&gt;&lt;p&gt;å³ä½¿æµç¨‹æ­£ç¡®ï¼Œä¹Ÿå¯èƒ½é‡åˆ°é—®é¢˜ã€‚æœ€å¸¸è§çš„å¤åˆ¶é”™è¯¯æ˜¯ &lt;strong&gt;SQL çº¿ç¨‹ä¸­æ–­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šé€šå¸¸æ˜¯åœ¨ä»åº“ä¸Šåº”ç”¨ä¸­ç»§æ—¥å¿—æ—¶ï¼Œé‡åˆ°äº†ä¸»é”®å†²çªã€è®°å½•ä¸å­˜åœ¨ç­‰é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’æŸ¥&lt;/strong&gt;ï¼šç«‹å³æ£€æŸ¥ &lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt;å‘½ä»¤è¾“å‡ºä¸­çš„ &lt;code&gt;Last_SQL_Error&lt;/code&gt;å­—æ®µï¼Œå®ƒä¼šæŒ‡æ˜é”™è¯¯åŸå› ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…å¤„ç†&lt;/strong&gt;ï¼šä¼ ç»Ÿæ–¹æ³•æ˜¯ &lt;code&gt;SET GLOBAL sql_slave_skip_counter = 1&lt;/code&gt;è·³è¿‡ä¸€ä¸ªé”™è¯¯ã€‚ä½†è¿™å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œåº”&lt;strong&gt;æå…¶è°¨æ…&lt;/strong&gt;ä½¿ç”¨ã€‚æ›´æ¨èçš„åšæ³•æ˜¯ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯åˆ†ææ ¹æœ¬åŸå› ï¼Œç„¶åé€šè¿‡åœ¨ä»åº“ä¸Šæ‰‹åŠ¨æ’å…¥ç¼ºå¤±è®°å½•æˆ–åˆ é™¤å†²çªè®°å½•ç­‰æ–¹å¼è¿›è¡Œç²¾å‡†ä¿®å¤ï¼Œå†é‡å¯å¤åˆ¶ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œä¸ä»å¤´å¼€å§‹å¤åˆ¶æ—¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ç²¾é«“åœ¨äº &lt;strong&gt;â€œæ‰¾å‡†èµ·ç‚¹ï¼Œä¸¥å¯†ç›‘æ§ï¼ŒåŠæ—¶å¹²é¢„â€&lt;/strong&gt;ã€‚é€šè¿‡GTIDã€ä¸€è‡´æ€§å¤‡ä»½ç‚¹ç­‰æœºåˆ¶ç²¾ç¡®åŒæ­¥ï¼Œå†ç»“åˆåŠåŒæ­¥å¤åˆ¶ç­‰ç­–ç•¥åŠ å¼ºä¿éšœï¼Œä½ å°±èƒ½æ„å»ºä¸€ä¸ªæ—¢é«˜æ•ˆåˆå¯é çš„MySQLä¸»ä»ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é¡ºåˆ©å®Œæˆä¸»ä»é…ç½®ã€‚å¦‚æœä½ åœ¨å…·ä½“æ“ä½œä¸­é‡åˆ°æ›´ç»†è‡´çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="é»˜è®¤èµ·ç‚¹"&gt;é»˜è®¤èµ·ç‚¹
&lt;/h2&gt;&lt;p&gt;æ‚¨æå‡ºçš„è¿™ä¸ªé—®é¢˜éå¸¸å…³é”®ï¼Œç¡®å®ç‚¹å‡ºäº†MySQLä¸»ä»å¤åˆ¶é…ç½®ä¸­ä¸€ä¸ªå¸¸è§çš„è¯¯åŒºã€‚æ‚¨è¯´å¾—å®Œå…¨æ­£ç¡®ï¼š&lt;strong&gt;å¦‚æœä¸»åº“å·²ç»è¿è¡Œäº†ä¸€æ®µæ—¶é—´å¹¶æœ‰æ•°æ®ï¼Œé‚£ä¹ˆåœ¨é…ç½®ä»åº“æ—¶ï¼Œä¸æŒ‡å®šèµ·å§‹ç‚¹è€Œä¾èµ–é»˜è®¤è¡Œä¸ºï¼Œæ˜¯ç»å¯¹æ— æ³•ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†è¿™ä¸¤ç§åœºæ™¯ï¼Œå¯ä»¥å¸®æ‚¨å¿«é€Ÿç†è§£å…¶ä¸­çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¨æ–°ä¸»ä»ç¯å¢ƒï¼ˆä¸»åº“æ— æ•°æ®ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¿è¡Œä¸­çš„ä¸»åº“æ–°å¢ä»åº“ï¼ˆä¸»åº“æœ‰æ•°æ®ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»æœ€æ–°binlogæ–‡ä»¶å¤´å¼€å§‹è¯»å–&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¿…ç„¶ä¸ä¸€è‡´&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— é£é™©ï¼ˆå› ä¸ºæ— å†å²æ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ­£ç¡®åšæ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ç›´æ¥é…ç½®ï¼Œé»˜è®¤è¡Œä¸ºå¯è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»å»ºç«‹æ•°æ®ä¸€è‡´æ€§å¿«ç…§ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆé»˜è®¤è¡Œä¸ºä¼šå¯¼è‡´ä¸ä¸€è‡´"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆé»˜è®¤è¡Œä¸ºä¼šå¯¼è‡´ä¸ä¸€è‡´ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äºï¼Œä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰æ˜¯ä¸€ä¸ª&lt;strong&gt;åªè¿½åŠ çš„ã€æŒ‰æ—¶é—´é¡ºåºè®°å½•&lt;/strong&gt;çš„æ—¥å¿—æ–‡ä»¶ã€‚å½“æ‚¨åœ¨ä¸€ä¸ªå·²ç»è¿è¡Œçš„ä¸»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;SHOW MASTER STATUS;&lt;/code&gt;æ—¶ï¼Œçœ‹åˆ°çš„ &lt;code&gt;Position&lt;/code&gt;æ˜¯å½“å‰æ—¥å¿—æ–‡ä»¶çš„&lt;strong&gt;æœ€æ–°å†™å…¥ä½ç½®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ­¤æ—¶ä¸æŒ‡å®šè¿™ä¸ªä½ç½®ï¼Œè€Œè®©ä»åº“ä»å½“å‰binlogæ–‡ä»¶çš„&lt;strong&gt;å¼€å¤´ï¼ˆPosition 0ï¼‰&lt;/strong&gt; å¼€å§‹è¯»å–ï¼Œé‚£ä¹ˆä»åº“ä¼šé”™è¿‡ä»æ–‡ä»¶å¼€å§‹åˆ°å½“å‰æœ€æ–°ä½ç½®ä¹‹é—´æ‰€æœ‰å·²ç»å‘ç”Ÿçš„æ•°æ®å˜æ›´ã€‚è¿™ä¼šå¯¼è‡´ä»åº“çš„æ•°æ®çŠ¶æ€è¿œè¿œè½åäºä¸»åº“ï¼Œä»è€Œå¼•å‘ä¸¥é‡çš„ä¸ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®æ“ä½œä»¥ä¿è¯ä¸€è‡´æ€§"&gt;ğŸ”§ å¦‚ä½•æ­£ç¡®æ“ä½œä»¥ä¿è¯ä¸€è‡´æ€§ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œæ ¸å¿ƒæ˜¯ä¸ºä»åº“çš„åŒæ­¥å»ºç«‹ä¸€ä¸ª&lt;strong&gt;ç²¾ç¡®çš„ã€ä¸ä¸»åº“å½“å‰æ•°æ®çŠ¶æ€å®Œå…¨å¯¹åº”çš„èµ·ç‚¹&lt;/strong&gt;ã€‚æ ‡å‡†æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ä¸»åº“è¿›è¡Œé”è¡¨æˆ–ä½¿ç”¨ä¸åœæœºå¤‡ä»½å·¥å…·&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸ºäº†åœ¨è·å–åŒæ­¥èµ·ç‚¹çš„ç¬é—´ï¼Œä¸»åº“çš„æ•°æ®æ˜¯é™æ­¢çš„ï¼Œç¡®ä¿å¿«ç…§çš„ä¸€è‡´æ€§ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é”è¡¨æ–¹å¼&lt;/strong&gt;ï¼šåœ¨ä¸»åº“æ‰§è¡Œ &lt;code&gt;FLUSH TABLES WITH READ LOCK;&lt;/code&gt;ã€‚è¿™ä¼šé˜»æ­¢æ–°çš„å†™æ“ä½œï¼Œä½†è¯»æ“ä½œé€šå¸¸ä¸å—å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸åœæœºå·¥å…·&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;mysqldump&lt;/code&gt;é…åˆ &lt;code&gt;--single-transaction&lt;/code&gt;å‚æ•°ï¼ˆé’ˆå¯¹InnoDBè¡¨ï¼‰ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;Percona XtraBackup&lt;/code&gt;ç­‰ç‰©ç†å¤‡ä»½å·¥å…·ï¼Œå¯ä»¥åœ¨ä¸é•¿æ—¶é—´é”è¡¨çš„æƒ…å†µä¸‹è·å–ä¸€è‡´æ€§å¤‡ä»½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–æ•°æ®ä¸€è‡´æ€§å¿«ç…§å¹¶è®°å½•åŒæ­¥ä½ç‚¹&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚
&lt;ul&gt;
&lt;li&gt;åœ¨é”è¡¨æˆ–å¼€å§‹å¤‡ä»½åï¼Œç«‹å³åœ¨ä¸»åº“æ‰§è¡Œ &lt;code&gt;SHOW MASTER STATUS;&lt;/code&gt;ï¼Œå¹¶å‡†ç¡®è®°å½•ä¸‹ &lt;code&gt;File&lt;/code&gt;å’Œ &lt;code&gt;Position&lt;/code&gt;çš„å€¼ã€‚è¿™ä¸ªä½ç½®ç‚¹å°±æ˜¯æ‚¨ä¸»åº“æ•°æ®å¿«ç…§å¯¹åº”çš„ç²¾ç¡®é€»è¾‘ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°†å¿«ç…§æ¢å¤åˆ°ä»åº“&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;mysqldump&lt;/code&gt;å¯¼å‡ºçš„æ–‡ä»¶æˆ–ç‰©ç†å¤‡ä»½æ–‡ä»¶ï¼Œåœ¨ä»åº“ä¸Šå®Œæˆæ•°æ®æ¢å¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ä»åº“é…ç½®å¤åˆ¶å¹¶æŒ‡å®šè®°å½•çš„åŒæ­¥ä½ç‚¹&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;CHANGE MASTER TO&lt;/code&gt;å‘½ä»¤æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ç¬¬äºŒæ­¥ä¸­è®°å½•çš„ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;å‚æ•°ã€‚è¿™æ ·ï¼Œä»åº“å°±ä¼šä»ä¸»åº“æ•°æ®ä¸€è‡´çš„é‚£ä¸ªç²¾ç¡®ç‚¹å¼€å§‹åŒæ­¥åç»­çš„å¢é‡æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆgtid"&gt;ğŸš€ æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆï¼šGTID
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ä»æ ¹æœ¬ä¸Šè§£å†³æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶ä½ç½®å¯èƒ½å¸¦æ¥çš„é”™è¯¯å’Œå¤æ‚æ€§ï¼ŒMySQL 5.6åŠä»¥ä¸Šç‰ˆæœ¬å¼•å…¥äº†&lt;strong&gt;GTIDï¼ˆå…¨å±€äº‹åŠ¡æ ‡è¯†ç¬¦ï¼‰&lt;/strong&gt; å¤åˆ¶æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šGTIDä¸ºæ¯ä¸ªæäº¤çš„äº‹åŠ¡åˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„IDï¼ˆæ ¼å¼ä¸º &lt;code&gt;server_uuid:transaction_id&lt;/code&gt;ï¼‰ã€‚ä»åº“ä¼šè®°å½•è‡ªå·±å·²ç»æ‰§è¡Œäº†å“ªäº›GTIDçš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•ä¿è¯ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨é…ç½®ä»åº“æ—¶ï¼Œåªéœ€è®¾ç½® &lt;code&gt;MASTER_AUTO_POSITION = 1&lt;/code&gt;ã€‚ä»åº“ä¼šå‘Šè¯‰ä¸»åº“è‡ªå·±å·²ç»æ‰§è¡Œäº†å“ªäº›GTIDï¼Œä¸»åº“åˆ™ä¼šè‡ªåŠ¨å°†ä»åº“ç¼ºå¤±çš„äº‹åŠ¡å‘é€è¿‡æ¥ã€‚è¿™&lt;strong&gt;å®Œå…¨é¿å…äº†æ‰‹åŠ¨æŸ¥æ‰¾å’ŒæŒ‡å®š &lt;code&gt;File&lt;/code&gt;å’Œ &lt;code&gt;Position&lt;/code&gt;çš„éº»çƒ¦å’Œé£é™©&lt;/strong&gt;ï¼Œæå¤§åœ°ç®€åŒ–äº†è¿ç»´å¹¶å¢å¼ºäº†æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-13"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œæ‚¨çš„è´¨ç–‘æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚å¯¹äºå·²è¿è¡Œçš„ä¸»åº“ï¼Œ&lt;strong&gt;ç»ä¸èƒ½ä¾èµ–é»˜è®¤çš„å¤åˆ¶èµ·å§‹ç‚¹&lt;/strong&gt;ã€‚å¿…é¡»é€šè¿‡&lt;strong&gt;å»ºç«‹æ•°æ®ä¸€è‡´æ€§å¿«ç…§å¹¶è®°å½•å¯¹åº”çš„binlogä½ç½®&lt;/strong&gt;çš„æ–¹æ³•ï¼Œæˆ–è€…é‡‡ç”¨æ›´å…ˆè¿›çš„&lt;strong&gt;GTIDè‡ªåŠ¨å®šä½&lt;/strong&gt;æœºåˆ¶ï¼Œæ‰èƒ½ç¡®ä¿ä¸»ä»åº“çš„èµ·ç‚¹ä¸€è‡´ï¼Œè¿™æ˜¯å®ç°æ•°æ®åŒæ­¥çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šå½»åº•è§£å†³äº†æ‚¨çš„ç–‘é—®ï¼å¦‚æœæ‚¨å¯¹GTIDçš„å…·ä½“é…ç½®æˆ–å…¶å®ƒé«˜å¯ç”¨æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="varbinary"&gt;VARBINARY
&lt;/h2&gt;&lt;p&gt;VARBINARY æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„å¯å˜é•¿åº¦æ•°æ®ç±»å‹ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒçš„æ ¸å¿ƒç‰¹å¾ï¼Œå°¤å…¶æ˜¯ä¸å…¶å›ºå®šé•¿åº¦ç‰ˆæœ¬ &lt;code&gt;BINARY&lt;/code&gt;çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;VARBINARY&lt;/th&gt;
&lt;th&gt;BINARY&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯å˜é•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶å­—èŠ‚ä¸²&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶å­—èŠ‚ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®é™…æ•°æ®é•¿åº¦ + å°‘é‡é¢å¤–å¼€é”€ï¼ˆé€šå¸¸ä¸º2å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šä¸ºå®šä¹‰çš„é•¿åº¦ï¼ˆnå­—èŠ‚ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¡«å……æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å¡«å……&lt;/td&gt;
&lt;td&gt;ä¸è¶³é•¿åº¦æ—¶åœ¨&lt;strong&gt;å³ä¾§&lt;/strong&gt;ç”¨ &lt;code&gt;0x00&lt;/code&gt;å¡«å……&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œå°¤å…¶é€‚ç”¨äºæ•°æ®é•¿åº¦å˜åŒ–å¤§çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼Œå¯èƒ½å­˜åœ¨ç©ºé—´æµªè´¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯”è¾ƒæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€å­—èŠ‚æ¯”è¾ƒ&lt;/strong&gt;ï¼ŒåŒºåˆ†å¤§å°å†™ï¼ˆ0x41 &amp;lsquo;A&amp;rsquo; â‰  0x61 &amp;lsquo;a&amp;rsquo;ï¼‰&lt;/td&gt;
&lt;td&gt;é€å­—èŠ‚æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œå€¼ã€åŠ å¯†æ•°æ®ã€æ–‡ä»¶ç­¾åã€UUIDç­‰é•¿åº¦å¯å˜æˆ–è¾ƒå¤§çš„äºŒè¿›åˆ¶æ•°æ®&lt;/td&gt;
&lt;td&gt;é•¿åº¦ä¸¥æ ¼å›ºå®šçš„äºŒè¿›åˆ¶ä»£ç æˆ–æ ‡è¯†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥äº†è§£-varbinary"&gt;ğŸ’¡ æ·±å…¥äº†è§£ VARBINARY
&lt;/h3&gt;&lt;h4 id="å­˜å‚¨ä¸é•¿åº¦ç®¡ç†"&gt;å­˜å‚¨ä¸é•¿åº¦ç®¡ç†
&lt;/h4&gt;&lt;p&gt;VARBINARY å±äºå¯å˜é•¿åº¦æ•°æ®ç±»å‹ã€‚ä½ å®šä¹‰çš„é•¿åº¦ &lt;code&gt;n&lt;/code&gt;è§„å®šäº†å®ƒæ‰€èƒ½å®¹çº³çš„&lt;strong&gt;æœ€å¤§å­—èŠ‚æ•°&lt;/strong&gt;ã€‚å®é™…çš„å­˜å‚¨ç©ºé—´æ¶ˆè€—æ˜¯â€œæ•°æ®çš„å®é™…é•¿åº¦ + 2å­—èŠ‚â€çš„é¢å¤–å¼€é”€ ã€‚å½“æ•°æ®é•¿åº¦å¯å˜æˆ–å¯èƒ½å¾ˆå¤§æ—¶ï¼Œè¿™ç§æœºåˆ¶èƒ½æœ‰æ•ˆèŠ‚çœå­˜å‚¨ç©ºé—´ ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå°è¯•æ’å…¥è¶…è¿‡æœ€å¤§é•¿åº¦ &lt;code&gt;n&lt;/code&gt;çš„æ•°æ®ï¼Œæ•°æ®åº“é€šå¸¸ä¼šæŠ¥é”™ï¼ˆå°¤å…¶åœ¨å¯ç”¨äº†ä¸¥æ ¼SQLæ¨¡å¼æ—¶ï¼‰æˆ–å¯¹æ•°æ®è¿›è¡Œæˆªæ–­ ã€‚&lt;/p&gt;
&lt;h4 id="æ¯”è¾ƒè§„åˆ™ä¸ç´¢å¼•"&gt;æ¯”è¾ƒè§„åˆ™ä¸ç´¢å¼•
&lt;/h4&gt;&lt;p&gt;VARBINARY çš„æ’åºå’Œæ¯”è¾ƒåŸºäºå­—èŠ‚çš„æ•°å€¼è¿›è¡Œ&lt;strong&gt;é€å­—èŠ‚æ¯”è¾ƒ&lt;/strong&gt; ã€‚å› æ­¤ï¼Œ&lt;code&gt;0x41&lt;/code&gt;ï¼ˆå¯¹åº”å­—ç¬¦&amp;rsquo;A&amp;rsquo;ï¼‰å’Œ&lt;code&gt;0x61&lt;/code&gt;ï¼ˆå¯¹åº”å­—ç¬¦&amp;rsquo;a&amp;rsquo;ï¼‰æ˜¯ä¸åŒçš„ã€‚å¦‚æœéœ€è¦å¯¹é•¿VARBINARYåˆ—åˆ›å»ºç´¢å¼•ï¼Œé€šå¸¸åªç´¢å¼•æ•°æ®çš„å‰é¢éƒ¨åˆ†ï¼ˆå¦‚å‰20å­—èŠ‚ï¼‰ä½œä¸ºå‰ç¼€ç´¢å¼•ï¼Œä»¥å¹³è¡¡æŸ¥è¯¢æ€§èƒ½å’Œå­˜å‚¨å¼€é”€ ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-3"&gt;ğŸ”§ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;VARBINARY éå¸¸é€‚åˆå­˜å‚¨çº¯ç²¹çš„äºŒè¿›åˆ¶ä¿¡æ¯ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯†ç å“ˆå¸Œå€¼å­˜å‚¨&lt;/strong&gt;ï¼šåƒSHA-256ç”Ÿæˆçš„å“ˆå¸Œå€¼æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œä½¿ç”¨ &lt;code&gt;VARBINARY(64)&lt;/code&gt;å­˜å‚¨æ¯”æ–‡æœ¬æ ¼å¼æ›´é«˜æ•ˆã€æ›´å®‰å…¨ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UUIDå­˜å‚¨&lt;/strong&gt;ï¼šå°†UUIDå­—ç¬¦ä¸²ï¼ˆå¦‚&lt;code&gt;550e8400-e29b-41d4-a716-446655440000&lt;/code&gt;ï¼‰è½¬æ¢ä¸º16å­—èŠ‚çš„äºŒè¿›åˆ¶å½¢å¼å¹¶ç”¨ &lt;code&gt;VARBINARY(16)&lt;/code&gt;å­˜å‚¨ï¼Œæ¯”ç›´æ¥å­˜å‚¨36å­—ç¬¦çš„å­—ç¬¦ä¸²èŠ‚çœå¤§é‡ç©ºé—´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ç­¾åæˆ–é­”æ•°&lt;/strong&gt;ï¼šè®¸å¤šæ–‡ä»¶æ ¼å¼æœ‰ç‰¹å®šçš„èµ·å§‹å­—èŠ‚ï¼ˆå¦‚PNGæ–‡ä»¶ä»¥ &lt;code&gt;0x89504E470D0A1A0A&lt;/code&gt;å¼€å¤´ï¼‰ï¼Œä½¿ç”¨VARBINARYå­˜å‚¨è¿™äº›ç­¾åä¾¿äºå¿«é€Ÿè¯†åˆ«æ–‡ä»¶ç±»å‹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å¯†æ•°æ®&lt;/strong&gt;ï¼šåŠ å¯†åçš„æ•°æ®æ˜¯äºŒè¿›åˆ¶æµï¼ŒVARBINARYæ˜¯è‡ªç„¶çš„å­˜å‚¨é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-8"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸å­—ç¬¦ç±»å‹çš„åŒºåˆ«&lt;/strong&gt;ï¼šåŠ¡å¿…åˆ†æ¸… &lt;code&gt;VARBINARY&lt;/code&gt;å’Œ &lt;code&gt;VARCHAR BINARY&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;CHAR BINARY&lt;/code&gt;ï¼‰ã€‚å‰è€…å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶å­—èŠ‚ï¼Œæ— å­—ç¬¦é›†æ¦‚å¿µï¼›åè€…å­˜å‚¨çš„æ˜¯å­—ç¬¦å­—ç¬¦ä¸²ï¼Œä½†ä½¿ç”¨äºŒè¿›åˆ¶æ ¡å¯¹è§„åˆ™è¿›è¡Œæ¯”è¾ƒ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢ä¸å¡«å……&lt;/strong&gt;ï¼šå°†å­—ç¬¦ä¸²æˆ–å…¶ä»–æ•°æ®ç±»å‹è½¬æ¢ä¸ºVARBINARYæ—¶ï¼Œæ•°æ®åº“ä¼šæ‰§è¡Œå¡«å……æˆ–æˆªæ–­æ“ä½œã€‚è½¬æ¢è§„åˆ™å¯èƒ½å› æ•°æ®åº“ç³»ç»Ÿè€Œå¼‚ï¼Œä¾‹å¦‚åœ¨æŸäº›ç³»ç»Ÿä¸­ï¼Œä»å­—ç¬¦ä¸²è½¬æ¢æ—¶å¯èƒ½åœ¨å³ä¾§å¡«å……ï¼Œè€Œä»æ•´æ•°ç­‰ç±»å‹è½¬æ¢æ—¶å¯èƒ½åœ¨å·¦ä¾§å¡«å…… ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—é¢å€¼è¡¨ç¤º&lt;/strong&gt;ï¼šåœ¨SQLè¯­å¥ä¸­è¡¨ç¤ºäºŒè¿›åˆ¶å­—é¢å€¼é€šå¸¸æœ‰ç‰¹å®šæ ¼å¼ï¼Œä¾‹å¦‚åœ¨æŸäº›æ•°æ®åº“ä¸­ä½¿ç”¨ &lt;code&gt;0h&lt;/code&gt;å‰ç¼€åè·Ÿåå…­è¿›åˆ¶æ•°å­—ï¼ˆå¦‚ &lt;code&gt;0h89504E47&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®ä¸¥æ ¼æ¨¡å¼&lt;/strong&gt;ï¼šå»ºè®®åœ¨æ•°æ®åº“ä¼šè¯ä¸­è®¾ç½® &lt;code&gt;SET sql_mode = 'STRICT_TRANS_TABLES'&lt;/code&gt;ï¼Œä»¥é˜²æ­¢æ•°æ®è¢«é™é»˜æˆªæ–­ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–äºŒè¿›åˆ¶ç±»å‹å¯¹æ¯”"&gt;ğŸ“Š ä¸å…¶ä»–äºŒè¿›åˆ¶ç±»å‹å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;MySQLè¿˜æä¾›äº†BLOBç³»åˆ—ç±»å‹ï¼ˆTINYBLOB, BLOB, MEDIUMBLOB, LONGBLOBï¼‰ç”¨äºå­˜å‚¨éå¸¸å¤§çš„äºŒè¿›åˆ¶æ•°æ® ã€‚å®ƒä»¬ä¸VARBINARYçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;VARBINARY&lt;/strong&gt;ï¼šæ•°æ®ç›´æ¥å­˜å‚¨åœ¨è¡¨è¡Œå†…ï¼Œé€‚åˆ&lt;strong&gt;ä¸­å°å°ºå¯¸&lt;/strong&gt;çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆä¾‹å¦‚MySQLä¸­æœ€å¤§65,535å­—èŠ‚ ï¼‰ï¼ŒæŸ¥è¯¢æ•ˆç‡è¾ƒé«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BLOB&lt;/strong&gt;ï¼šæ•°æ®å¯èƒ½å­˜å‚¨åœ¨è¡¨è¡Œå¤–ï¼Œæ›´é€‚åˆ&lt;strong&gt;è¶…å¤§&lt;/strong&gt;äºŒè¿›åˆ¶å¯¹è±¡ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘æ–‡ä»¶ç­‰ï¼‰ï¼Œåœ¨SELECTæ—¶å¯èƒ½éœ€è¦é¢å¤–æ“ä½œè·å–æ•°æ® ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-14"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;VARBINARY æ˜¯å¤„ç†å¯å˜é•¿åº¦äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å“ˆå¸Œå€¼ã€UUIDã€æ–‡ä»¶ç­¾åï¼‰çš„ç†æƒ³é€‰æ‹©ï¼Œå› å…¶ç©ºé—´æ•ˆç‡é«˜ä¸”æ”¯æŒç²¾ç¡®çš„é€å­—èŠ‚æ¯”è¾ƒã€‚å…³é”®åœ¨äºæ ¹æ®æ•°æ®ç‰¹æ€§çš„â€œé•¿åº¦æ˜¯å¦å¯å˜â€åœ¨VARBINARYå’ŒBINARYä¹‹é—´åšå‡ºé€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ VARBINARYã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯æˆ–é‡åˆ°å…·ä½“é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„æä¾›æ›´è¿›ä¸€æ­¥çš„æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="char255"&gt;CHAR(255)
&lt;/h2&gt;&lt;p&gt;CHAR ç±»å‹çš„æœ€å¤§é•¿åº¦è¢«é™åˆ¶ä¸º 255 ä¸ªå­—ç¬¦ï¼Œè¿™ä¸»è¦æºäº MySQL åœ¨è®¾è®¡æ—¶å¯¹&lt;strong&gt;å­˜å‚¨æ•ˆç‡å’Œæ€§èƒ½&lt;/strong&gt;çš„æƒè¡¡ï¼Œæ ¸å¿ƒåŸå› åœ¨äºå…¶&lt;strong&gt;é•¿åº¦æ ‡è¯†ä½ä»…ä½¿ç”¨1ä¸ªå­—èŠ‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº† CHAR å’Œ VARCHAR åœ¨é•¿åº¦æ ‡è¯†ä¸Šçš„å…³é”®å·®å¼‚ï¼Œè¿™ç›´æ¥å½±å“äº†å®ƒä»¬çš„æœ€å¤§é•¿åº¦é™åˆ¶ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;CHAR&lt;/th&gt;
&lt;th&gt;VARCHAR&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•¿åº¦æ ‡è¯†ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ— éœ€é¢å¤–å­—èŠ‚å­˜å‚¨é•¿åº¦ä¿¡æ¯ï¼ˆå›ºå®šé•¿åº¦ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦ 1 æˆ– 2 ä¸ªå­—èŠ‚æ¥å­˜å‚¨å®é™…å†…å®¹çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•¿åº¦æ ‡è¯†è§„åˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;è‹¥å£°æ˜çš„&lt;strong&gt;æœ€å¤§å¯èƒ½é•¿åº¦&lt;/strong&gt; â‰¤ 255 å­—èŠ‚ï¼Œåˆ™ä½¿ç”¨ &lt;strong&gt;1 ä¸ªå­—èŠ‚&lt;/strong&gt;å­˜å‚¨é•¿åº¦ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§é•¿åº¦é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;255 å­—ç¬¦&lt;/strong&gt;ï¼ˆä¸å­—ç¬¦é›†æ— å…³ï¼‰&lt;/td&gt;
&lt;td&gt;å—è¡Œæœ€å¤§é™åˆ¶ï¼ˆå¦‚ 65535 å­—èŠ‚ï¼‰å’Œå­—ç¬¦é›†å½±å“ï¼Œç†è®ºå­—ç¬¦æ•°å¯è¿œå¤§äº255&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸå› 1å­—èŠ‚é•¿åº¦æ ‡è¯†ä½çš„é™åˆ¶"&gt;ğŸ’¾ æ ¸å¿ƒåŸå› ï¼š1å­—èŠ‚é•¿åº¦æ ‡è¯†ä½çš„é™åˆ¶
&lt;/h3&gt;&lt;p&gt;CHAR ç±»å‹æ˜¯&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;çš„ã€‚å½“ä½ å®šä¹‰ &lt;code&gt;CHAR(255)&lt;/code&gt;ï¼Œæ— è®ºä½ å®é™…å­˜å…¥çš„æ˜¯1ä¸ªå­—ç¬¦è¿˜æ˜¯100ä¸ªå­—ç¬¦ï¼ŒMySQL éƒ½ä¼šåœ¨ç£ç›˜ä¸Šåˆ†é…æ°å¥½èƒ½å­˜æ”¾255ä¸ªå­—ç¬¦çš„ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®åœ¨äºï¼ŒMySQL ä¸º VARCHAR ç±»å‹è®¾è®¡äº†ä¸€å¥—æœºåˆ¶ï¼Œç”¨ä¸€ä¸ªå¾ˆå°çš„&lt;strong&gt;é•¿åº¦æ ‡è¯†ä½&lt;/strong&gt;æ¥è®°å½•å®é™…å­˜å‚¨çš„å­—ç¬¦ä¸²æœ‰å¤šé•¿ã€‚è¿™ä¸ªæ ‡è¯†ä½å¯èƒ½å ç”¨1ä¸ªæˆ–2ä¸ªå­—èŠ‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœå®šä¹‰çš„ &lt;code&gt;VARCHAR(n)&lt;/code&gt;å…¶ &lt;strong&gt;&lt;code&gt;n&lt;/code&gt;å¯¹åº”çš„æœ€å¤§å¯èƒ½å­—èŠ‚æ•°ä¸è¶…è¿‡255&lt;/strong&gt;ï¼Œåˆ™åªéœ€è¦ &lt;strong&gt;1ä¸ªå­—èŠ‚&lt;/strong&gt; ä½œä¸ºé•¿åº¦æ ‡è¯†ä½ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¶…è¿‡255å­—èŠ‚ï¼Œåˆ™éœ€è¦2ä¸ªå­—èŠ‚ä½œä¸ºé•¿åº¦æ ‡è¯†ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œ &lt;strong&gt;CHAR ç±»å‹è¢«è®¾è®¡ä¸ºå§‹ç»ˆ falls into the first categoryï¼ˆå½’å…¥ç¬¬ä¸€ç±»ï¼‰&lt;/strong&gt;ï¼Œå³å…¶é•¿åº¦æ ‡è¯†è¢«é™åˆ¶åœ¨å¯ä»¥ç”¨1ä¸ªå­—èŠ‚è¡¨ç¤ºçš„èŒƒå›´ä¹‹å†…ã€‚&lt;strong&gt;1ä¸ªå­—èŠ‚ï¼ˆ8ä½ï¼‰æ— ç¬¦å·æ•´æ•°çš„æœ€å¤§å€¼æ˜¯ 2^8 - 1 = 255&lt;/strong&gt;ã€‚å› æ­¤ï¼ŒCHAR ç±»å‹çš„æœ€å¤§å­—ç¬¦æ•°å°±è¢«é™å®šåœ¨äº† &lt;strong&gt;255&lt;/strong&gt;ã€‚è¿™æ˜¯ MySQL ä¸ºäº†å®ç°ç®€å•é«˜æ•ˆçš„å­˜å‚¨ç®¡ç†è€Œåšå‡ºçš„ä¸€ä¸ªåŸºç¡€ä¸”å…³é”®çš„è®¾è®¡å†³ç­–ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸-varchar-çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸ VARCHAR çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªè®¾è®¡ä½¿å¾— CHAR å’Œ VARCHAR æœ‰äº†æ ¹æœ¬åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CHAR&lt;/strong&gt; çš„ä¼˜åŠ¿åœ¨äº&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;ã€‚å› ä¸ºé•¿åº¦å›ºå®šï¼Œæ‰€ä»¥å­˜å–é€Ÿåº¦é€šå¸¸æ›´å¿«ï¼Œå°¤å…¶æ˜¯å¯¹é•¿åº¦å‡ ä¹ä¸€è‡´çš„æ•°æ®ï¼ˆå¦‚MD5å“ˆå¸Œå€¼ã€å›½å®¶ä»£ç ï¼‰ã€‚æ›´æ–°æ—¶ä¹Ÿä¸å®¹æ˜“äº§ç”Ÿå­˜å‚¨ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VARCHAR&lt;/strong&gt; çš„ä¼˜åŠ¿åœ¨äº&lt;strong&gt;å¯å˜é•¿åº¦&lt;/strong&gt;ï¼Œæ›´èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå°¤å…¶é€‚ç”¨äºé•¿åº¦å˜åŒ–å¾ˆå¤§çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åã€æ–‡ç« æ ‡é¢˜ï¼‰ã€‚å®ƒçš„æœ€å¤§é•¿åº¦å—é™äº MySQL å•è¡Œçš„æœ€å¤§é•¿åº¦ï¼ˆçº¦ä¸º65535å­—èŠ‚ï¼‰ï¼Œå¹¶ä¼šæ ¹æ®å­—ç¬¦é›†è¿›è¡ŒæŠ˜ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸­çš„é€‰æ‹©"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸­çš„é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;äº†è§£è¿™ä¸ªé™åˆ¶åï¼Œä½ åœ¨è®¾è®¡è¡¨æ—¶å°±èƒ½åšå‡ºæ›´åˆé€‚çš„é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ CHAR&lt;/strong&gt;ï¼šå½“ä½ è¦å­˜å‚¨çš„æ•°æ®é•¿åº¦&lt;strong&gt;éå¸¸å›ºå®šæˆ–è¿‘ä¹å›ºå®š&lt;/strong&gt;æ—¶ï¼ŒCHAR æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ç»å…¸çš„ä¾‹å­åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MD5 å“ˆå¸Œå€¼&lt;/strong&gt;ï¼ˆå›ºå®š32å­—ç¬¦ï¼‰ï¼š&lt;code&gt;CHAR(32)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŸäº›&lt;strong&gt;å®šé•¿ä»£ç æˆ–æ ‡è¯†ç¬¦&lt;/strong&gt;ï¼Œå¦‚å›½å®¶ä»£ç ï¼ˆ2å­—ç¬¦ï¼‰ï¼š&lt;code&gt;CHAR(2)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼ŒCHAR çš„æ€§èƒ½é€šå¸¸ä¼˜äº VARCHARã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ VARCHAR&lt;/strong&gt;ï¼šå½“ä½ è¦å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦&lt;strong&gt;å˜åŒ–è¾ƒå¤§&lt;/strong&gt;æ—¶ï¼Œåº”ä¼˜å…ˆé€‰æ‹© VARCHARã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·åã€ç”µå­é‚®ä»¶åœ°å€ã€æ–‡ç« æ ‡é¢˜ã€æè¿°ä¿¡æ¯ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™èƒ½æœ‰æ•ˆèŠ‚çœå¤§é‡çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒCHAR çš„ 255 å­—ç¬¦ä¸Šé™æ˜¯ MySQL ä¸ºäº†å¹³è¡¡å­˜å‚¨æ•ˆç‡å’Œç®¡ç†å¤æ‚åº¦ï¼ŒåŸºäº1å­—èŠ‚é•¿åº¦æ ‡è¯†ä½åšå‡ºçš„ä¸€ä¸ªåŸºç¡€è®¾è®¡ã€‚åœ¨é€‰æ‹©ç±»å‹æ—¶ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯åˆ¤æ–­æ•°æ®çš„&lt;strong&gt;é•¿åº¦æ˜¯å¦å›ºå®š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ CHAR ç±»å‹çš„è¿™ä¸ªç‰¹æ€§ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é€‰æ‹©è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘DB 2</title><link>https://dyhes.github.io/p/nowcoderdb-2/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderdb-2/</guid><description>&lt;h2 id="bæ ‘ç©ºé—´åˆ©ç”¨ç‡"&gt;B+æ ‘ç©ºé—´åˆ©ç”¨ç‡
&lt;/h2&gt;&lt;p&gt;B+æ ‘é€šè¿‡å°†æ•°æ®é›†ä¸­åœ¨å¶å­èŠ‚ç‚¹ã€å†…éƒ¨èŠ‚ç‚¹ä»…å­˜å‚¨é”®çš„ç»“æ„è®¾è®¡ï¼Œç¡®å®æ˜¾è‘—æé«˜äº†ç©ºé—´åˆ©ç”¨ç‡ã€‚è¿™ç§ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨å­˜å‚¨æ•ˆç‡ã€æŸ¥è¯¢æ€§èƒ½ä»¥åŠå¯¹ç£ç›˜I/Oçš„ä¼˜åŒ–ä¸Šã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº†B+æ ‘ä¸Bæ ‘åœ¨ç©ºé—´åˆ©ç”¨ä¸Šçš„å…³é”®å·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;B+æ ‘&lt;/th&gt;
&lt;th&gt;Bæ ‘&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…å¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´æ•°æ®&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬å†…éƒ¨èŠ‚ç‚¹ï¼‰éƒ½å¯èƒ½å­˜å‚¨æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¯ç´¢å¼•ï¼Œä»…å­˜å‚¨é”®å’ŒæŒ‡é’ˆ&lt;/td&gt;
&lt;td&gt;åŒæ—¶å­˜å‚¨é”®ã€æŒ‡é’ˆå’Œå…³è”æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŠ‚ç‚¹å®¹é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸åŒå¤§å°èŠ‚ç‚¹å¯å­˜å‚¨æ›´å¤šé”®ï¼Œ&lt;strong&gt;æ‰‡å‡ºï¼ˆå­èŠ‚ç‚¹æ•°ï¼‰æ›´é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å› å­˜å‚¨æ•°æ®ï¼Œå•ä¸ªèŠ‚ç‚¹èƒ½å®¹çº³çš„é”®æ›´å°‘ï¼Œæ‰‡å‡ºè¾ƒä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‘çš„é«˜åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ›´çŸ®èƒ–ï¼Œ&lt;strong&gt;å±‚çº§æ›´å°‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹æ›´é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´åˆ©ç”¨ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹æ›´ç´§å‡‘ï¼Œç´¢å¼•å¯†åº¦é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®åˆ†æ•£åœ¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œç©ºé—´åˆ©ç”¨ç›¸å¯¹åˆ†æ•£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒƒå›´æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¶å­èŠ‚ç‚¹å½¢æˆæœ‰åºé“¾è¡¨ï¼Œ&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¸­åºéå†ï¼Œæ•ˆç‡è¾ƒä½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç©ºé—´åˆ©ç”¨ç‡æå‡çš„æ ¹æº"&gt;ğŸ’¡ ç©ºé—´åˆ©ç”¨ç‡æå‡çš„æ ¹æº
&lt;/h3&gt;&lt;p&gt;B+æ ‘æé«˜ç©ºé—´åˆ©ç”¨ç‡çš„æ ¸å¿ƒåœ¨äºå…¶&lt;strong&gt;æ•°æ®ä¸ç´¢å¼•çš„åˆ†ç¦»è®¾è®¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹æ›´è½»é‡&lt;/strong&gt;ï¼šç”±äºå†…éƒ¨èŠ‚ç‚¹ä¸å†å­˜å‚¨å®é™…çš„æ•°æ®è®°å½•ï¼ˆå³â€œå«æ˜Ÿæ•°æ®â€ï¼‰ï¼Œåªå­˜æ”¾é”®å€¼å’ŒæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™ä½¿å¾—å•ä¸ªå†…éƒ¨èŠ‚ç‚¹å ç”¨çš„ç©ºé—´æ›´å°ã€‚åœ¨èŠ‚ç‚¹å¤§å°å›ºå®šï¼ˆé€šå¸¸ä¸ç£ç›˜é¡µå¤§å°å¯¹é½ï¼Œå¦‚16KBï¼‰çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªB+æ ‘çš„å†…éƒ¨èŠ‚ç‚¹å¯ä»¥å®¹çº³&lt;strong&gt;å¤šå¾—å¤šçš„é”®å’ŒæŒ‡é’ˆ&lt;/strong&gt;ã€‚è¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸º&lt;strong&gt;é«˜æ‰‡å‡ºæ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‘é«˜é™ä½ï¼ŒèŠ‚ç‚¹æ€»æ•°å‡å°‘&lt;/strong&gt;ï¼šæ›´é«˜çš„æ‰‡å‡ºæ„å‘³ç€åŒæ ·æ•°é‡çš„æ•°æ®ï¼ŒB+æ ‘éœ€è¦çš„å±‚çº§æ›´å°‘ï¼Œæ ‘çš„é«˜åº¦æ›´ä½ã€‚ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ˜¯ï¼Œåœ¨MySQLçš„InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸€ä¸ªé«˜åº¦ä¸º3çš„B+æ ‘å°±èƒ½è½»æ¾æ”¯æ’‘çº¦ä¸¤åƒä¸‡æ¡æ•°æ®çš„ç´¢å¼•ã€‚æ ‘é«˜é™ä½çš„ç›´æ¥å¥½å¤„æ˜¯ï¼Œä»æ ¹èŠ‚ç‚¹éå†åˆ°å¶å­èŠ‚ç‚¹æ‰€éœ€çš„ç£ç›˜I/Oæ¬¡æ•°å¤§å¹…å‡å°‘ï¼Œä»è€Œæå‡äº†æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜æ•ˆç‡æå‡&lt;/strong&gt;ï¼šå› ä¸ºå†…éƒ¨èŠ‚ç‚¹æ›´å°ä¸”åªåŒ…å«ç´¢å¼•ï¼Œæ•°æ®åº“ç³»ç»Ÿå¯ä»¥æ›´å®¹æ˜“åœ°å°†æ•´ä¸ªéå¶å­èŠ‚ç‚¹å±‚çº§ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚è¿™æ„å‘³ç€å¾ˆå¤šæŸ¥è¯¢åœ¨å¯»æ‰¾æ•°æ®æ‰€åœ¨å¶å­é¡µçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å®Œå…¨ä¸éœ€è¦è®¿é—®ç£ç›˜ï¼Œç›´æ¥åœ¨å†…å­˜ä¸­å°±èƒ½å®Œæˆè·¯å¾„å®šä½ï¼Œè¿›ä¸€æ­¥åŠ å¿«äº†é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-èŒƒå›´æŸ¥è¯¢çš„å¤©ç„¶ä¼˜åŠ¿"&gt;ğŸ”„ èŒƒå›´æŸ¥è¯¢çš„å¤©ç„¶ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;B+æ ‘çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥æˆä¸€ä¸ªæœ‰åºçš„åŒå‘é“¾è¡¨ã€‚è¿™ä¸€è®¾è®¡è®©B+æ ‘åœ¨èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚&lt;code&gt;BETWEEN&lt;/code&gt;ã€&lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&lt;/code&gt;ï¼‰å’Œå…¨è¡¨æ‰«æä¸Šå…·æœ‰å‹å€’æ€§ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦é€šè¿‡ç´¢å¼•æ‰¾åˆ°èŒƒå›´çš„èµ·å§‹ç‚¹ï¼Œå°±å¯ä»¥æ²¿ç€å¶å­èŠ‚ç‚¹çš„é“¾è¡¨é¡ºåºæ‰«æï¼Œæ— éœ€å›æº¯åˆ°ä¸Šå±‚èŠ‚ç‚¹ã€‚è¿™ç§é¡ºåºè®¿é—®éå¸¸ç¬¦åˆç£ç›˜çš„é¢„è¯»ç‰¹æ€§ï¼ˆä¸€æ¬¡I/Oè¯»å–ç›¸é‚»çš„å¤§é‡æ•°æ®ï¼‰ï¼Œä»è€Œè¿›ä¸€æ­¥å‡å°‘äº†I/Oæ“ä½œã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒBæ ‘è¿›è¡ŒèŒƒå›´æŸ¥è¯¢åˆ™éœ€è¦åœ¨å„çº§èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œå¤æ‚çš„ä¸­åºéå†ï¼Œæ•ˆç‡ä½å¾—å¤šã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒB+æ ‘é€šè¿‡&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹ä»…å­˜é”®&lt;/strong&gt;çš„è®¾è®¡ï¼Œå®ç°äº†æ›´é«˜çš„æ‰‡å‡ºå’Œæ›´çŸ®çš„æ ‘é«˜ï¼Œè¿™ä¸ä»…&lt;strong&gt;æå‡äº†ç©ºé—´åˆ©ç”¨ç‡&lt;/strong&gt;ï¼Œè¿˜ç›´æ¥å¸¦æ¥äº†&lt;strong&gt;æ›´å°‘çš„ç£ç›˜I/O&lt;/strong&gt;å’Œ&lt;strong&gt;æ›´ç¨³å®šçš„æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;ã€‚å†åŠ ä¸Šå¶å­èŠ‚ç‚¹çš„&lt;strong&gt;é“¾è¡¨ç»“æ„&lt;/strong&gt;å¯¹èŒƒå›´æŸ¥è¯¢çš„ä¼˜åŒ–ï¼Œä½¿å®ƒæˆä¸ºæ•°æ®åº“ç´¢å¼•å’Œæ–‡ä»¶ç³»ç»Ÿç­‰éœ€è¦é«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®åœºæ™¯çš„ç†æƒ³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£B+æ ‘çš„è®¾è®¡æ™ºæ…§ã€‚å¦‚æœä½ å¯¹å…·ä½“å®ç°ç»†èŠ‚æˆ–ä¸åŒæ•°æ®åº“çš„ç´¢å¼•ç­–ç•¥æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="null-å€¼ç´¢å¼•"&gt;NULL å€¼ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;å…³äºæ‚¨æå‡ºçš„ &lt;code&gt;WHERE age IN (20, 30, NULL)&lt;/code&gt;è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå…¶ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µæ¯”å•çº¯çš„â€œåªåœ¨NULLå€¼ä¸Šå¤±æ•ˆâ€è¦å¤æ‚ä¸€äº›ã€‚æ ¸å¿ƒç»“è®ºæ˜¯ï¼š&lt;strong&gt;å¯¹äº &lt;code&gt;IN&lt;/code&gt;åˆ—è¡¨ä¸­çš„éNULLå€¼ï¼ˆ20å’Œ30ï¼‰ï¼Œç´¢å¼•é€šå¸¸æ˜¯æœ‰æ•ˆçš„ï¼›è€Œå¯¹äº &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æŸ¥æ‰¾ï¼Œæƒ…å†µåˆ™æ¯”è¾ƒç‰¹æ®Š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿäº†è§£ä¸åŒéƒ¨åˆ†çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŸ¥è¯¢æ¡ä»¶ç»„æˆéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;æ˜¯å¦å¯èƒ½ä½¿ç”¨ç´¢å¼•&lt;/th&gt;
&lt;th&gt;åŸå› è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;age = 20&lt;/code&gt;æˆ– &lt;code&gt;age = 30&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;é€šå¸¸æœ‰æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿™äº›æ˜¯æ˜ç¡®çš„ç­‰å€¼æŸ¥è¯¢ï¼ŒB+Treeç´¢å¼•å¯ä»¥é«˜æ•ˆå®šä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;age = NULL&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;åŸºæœ¬æ— æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨SQLä¸­ï¼Œ&lt;code&gt;= NULL&lt;/code&gt;çš„åˆ¤æ–­ç»“æœæ°¸è¿œæ˜¯UNKNOWNï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ &lt;code&gt;IS NULL&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;age IS NULL&lt;/code&gt;(ç­‰æ•ˆéƒ¨åˆ†)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš ï¸ &lt;strong&gt;å¯èƒ½æœ‰æ•ˆï¼Œä½†å–å†³äºä¼˜åŒ–å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´¢å¼•æœ¬èº«å­˜å‚¨äº†&lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä½†ä¼˜åŒ–å™¨å¯èƒ½å› æ•°æ®åˆ†å¸ƒé€‰æ‹©å…¨è¡¨æ‰«æã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ç´¢å¼•ä¸nullå€¼"&gt;ğŸ’¡ æ·±å…¥ç†è§£ç´¢å¼•ä¸NULLå€¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç´¢å¼•å¦‚ä½•å­˜å‚¨NULLå€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨MySQLçš„InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œæ™®é€šçš„B+Treeç´¢å¼•æ˜¯ä¼šå­˜å‚¨&lt;code&gt;NULL&lt;/code&gt;å€¼çš„ã€‚ä½ å¯ä»¥å°†&lt;code&gt;NULL&lt;/code&gt;ç†è§£ä¸ºç´¢å¼•ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–å™¨å¦‚ä½•å†³ç­–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å³ä½¿ç´¢å¼•åŒ…å«äº†&lt;code&gt;NULL&lt;/code&gt;å€¼ï¼ŒMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆåŸºäºæˆæœ¬çš„ä¼˜åŒ–å™¨CBOï¼‰ä¹Ÿä¸ä¸€å®šä¼šä½¿ç”¨ç´¢å¼•ã€‚å®ƒä¼šæ ¹æ®æ•°æ®åˆ†å¸ƒç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—æˆæœ¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœè¡¨ä¸­&lt;code&gt;age&lt;/code&gt;åˆ—ä¸º&lt;code&gt;NULL&lt;/code&gt;çš„è®°å½•&lt;strong&gt;éå¸¸å°‘&lt;/strong&gt;ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šè®¤ä¸ºé€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½è¿™äº›å°‘é‡æ•°æ®æ¯”å…¨è¡¨æ‰«ææ›´é«˜æ•ˆï¼Œä»è€Œä½¿ç”¨ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;code&gt;age&lt;/code&gt;åˆ—ä¸º&lt;code&gt;NULL&lt;/code&gt;çš„è®°å½•&lt;strong&gt;éå¸¸å¤š&lt;/strong&gt;ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šåˆ¤æ–­ä½¿ç”¨ç´¢å¼•æŸ¥å‡ºä¸€å¤§å †&lt;code&gt;NULL&lt;/code&gt;å€¼çš„åœ°å€ï¼Œç„¶åå†å›è¡¨æŸ¥è¯¢ï¼Œå…¶æ•ˆç‡è¿˜ä¸å¦‚ç›´æ¥è¿›è¡Œä¸€æ¬¡å…¨è¡¨æ‰«æã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°±ä¼šæ”¾å¼ƒä½¿ç”¨ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;code&gt;WHERE age IN (20, 30, NULL)&lt;/code&gt;è¿™ä¸ªæ¡ä»¶ï¼ŒMySQLå¯èƒ½ä¼šå°†å…¶æ‹†è§£å¹¶åˆ†åˆ«å¤„ç†ï¼Œæœ€ç»ˆå†³å®šæ˜¯ä½¿ç”¨ç´¢å¼•è¿›è¡Œå¤šæ¬¡èŒƒå›´æŸ¥æ‰¾ï¼Œè¿˜æ˜¯ç›´æ¥å…¨è¡¨æ‰«æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ç¡®è®¤ç´¢å¼•ä½¿ç”¨æƒ…å†µ"&gt;ğŸ” å¦‚ä½•ç¡®è®¤ç´¢å¼•ä½¿ç”¨æƒ…å†µ
&lt;/h3&gt;&lt;p&gt;è¦å‡†ç¡®çŸ¥é“ä½ çš„æŸ¥è¯¢æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ï¼Œæœ€å¯é çš„æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤åˆ†ææ‰§è¡Œè®¡åˆ’ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;EXPLAIN SELECT * FROM your_table WHERE age IN (20, 30, NULL);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³æ³¨ç»“æœä¸­çš„ä¸¤ä¸ªå…³é”®å­—æ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;type&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœæ˜¾ç¤ºä¸º &lt;code&gt;range&lt;/code&gt;æˆ– &lt;code&gt;ref&lt;/code&gt;ï¼Œè¯´æ˜ä½¿ç”¨äº†ç´¢å¼•è¿›è¡ŒèŒƒå›´æˆ–ç­‰å€¼æ‰«æã€‚å¦‚æœæ˜¾ç¤ºä¸º &lt;code&gt;ALL&lt;/code&gt;ï¼Œåˆ™æ„å‘³ç€å…¨è¡¨æ‰«æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;key&lt;/code&gt;&lt;/strong&gt;ï¼šæ˜¾ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•åç§°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæƒ…å†µ&lt;/strong&gt;ï¼šåœ¨ä½ çš„æŸ¥è¯¢ä¸­ï¼Œå¯¹äº&lt;code&gt;IN&lt;/code&gt;åˆ—è¡¨é‡Œçš„é&lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œç´¢å¼•æ˜¯æœ‰æ•ˆçš„ã€‚å¯¹äº&lt;code&gt;NULL&lt;/code&gt;éƒ¨åˆ†ï¼Œç´¢å¼•æœ¬èº«æ”¯æŒï¼Œä½†æœ€ç»ˆæ˜¯å¦ä½¿ç”¨å–å†³äºä¼˜åŒ–å™¨åŸºäºæ•°æ®åˆ†å¸ƒçš„æˆæœ¬ä¼°ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°½é‡é¿å…åœ¨ç´¢å¼•åˆ—ä¸­å­˜å‚¨å¤§é‡&lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå°†åˆ—è®¾ç½®ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;å¹¶èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå¦‚0æˆ–ç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œå¯ä»¥ç®€åŒ–æŸ¥è¯¢å¹¶å‡å°‘ä¼˜åŒ–å™¨å†³ç­–çš„ä¸ç¡®å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;å…»æˆä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;åˆ†æå…³é”®æŸ¥è¯¢çš„ä¹ æƒ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£MySQLä¸­ç´¢å¼•ä¸&lt;code&gt;NULL&lt;/code&gt;å€¼äº¤äº’çš„ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="å…¨æ–‡ç´¢å¼•"&gt;å…¨æ–‡ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;MySQLçš„å…¨æ–‡æœç´¢ï¼ˆFull-Text Searchï¼‰æ˜¯ä¸€é¡¹å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸æ‚¨åœ¨æ–‡æœ¬æ•°æ®ä¸­æ‰§è¡ŒåŸºäºå…³é”®è¯çš„é«˜æ•ˆã€æ™ºèƒ½æœç´¢ï¼Œè¿œè¶…ä¼ ç»Ÿ&lt;code&gt;LIKE&lt;/code&gt;è¯­å¥çš„èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†ã€ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹çš„è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id="-å…¨æ–‡ç´¢å¼•çš„æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ” å…¨æ–‡ç´¢å¼•çš„æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;å…¨æ–‡ç´¢å¼•çš„æ ¸å¿ƒæ˜¯ä¸€ç§ç§°ä¸º&lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;çš„ç»“æ„ã€‚å®ƒä¸æ™®é€šçš„B+Treeç´¢å¼•ä¸åŒï¼šæ™®é€šç´¢å¼•ä¸ºæ¯ä¸€è¡Œæ•°æ®å»ºç«‹ä¸€ä¸ªç´¢å¼•é¡¹ï¼Œè€Œå€’æ’ç´¢å¼•åˆ™ä¸ºæ–‡æœ¬ä¸­çš„æ¯ä¸ª&lt;strong&gt;å•è¯&lt;/strong&gt;ï¼ˆæˆ–ç§°ä¸ºâ€œè¯æ¡â€ã€â€œæ ‡è®°â€ï¼‰å»ºç«‹ç´¢å¼•ï¼Œè®°å½•å®ƒå‡ºç°åœ¨å“ªäº›è¡Œä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨å¯¹ä¸€åˆ—åˆ›å»ºå…¨æ–‡ç´¢å¼•åï¼ŒMySQLä¼šè‡ªåŠ¨è¿›è¡Œ&lt;strong&gt;åˆ†è¯&lt;/strong&gt;ï¼Œå³å°†é•¿æ–‡æœ¬æ‹†åˆ†æˆç‹¬ç«‹çš„å•è¯ï¼Œå¹¶å¿½ç•¥å¸¸è§çš„&lt;strong&gt;åœç”¨è¯&lt;/strong&gt;ï¼ˆå¦‚è‹±æ–‡ä¸­çš„â€œtheâ€ã€â€œandâ€ï¼‰å’Œè¿‡çŸ­å•è¯ï¼ˆé»˜è®¤é•¿åº¦å°äº4çš„å•è¯ä¼šè¢«å¿½ç•¥ï¼‰ã€‚æœ€ç»ˆï¼Œç´¢å¼•ä¸­å­˜å‚¨çš„æ˜¯è¿™äº›æœ‰æ„ä¹‰çš„å•è¯ä¸å®ƒä»¬æ‰€åœ¨è¡Œä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•åˆ›å»ºå…¨æ–‡ç´¢å¼•"&gt;ğŸ“ å¦‚ä½•åˆ›å»ºå…¨æ–‡ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨è¡¨çš„æ–‡æœ¬åˆ—ä¸Šåˆ›å»º&lt;code&gt;FULLTEXT&lt;/code&gt;ç´¢å¼•ã€‚å®ƒæ”¯æŒ&lt;code&gt;CHAR&lt;/code&gt;ã€&lt;code&gt;VARCHAR&lt;/code&gt;å’Œ&lt;code&gt;TEXT&lt;/code&gt;ç±»å‹çš„åˆ—ï¼Œå¹¶ä¸”ä»MySQL 5.6å¼€å§‹ï¼ŒInnoDBå’ŒMyISAMå­˜å‚¨å¼•æ“éƒ½æ”¯æŒè¯¥åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶å®šä¹‰ç´¢å¼•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE articles (
id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(200),
body TEXT,
FULLTEXT (title, body) -- è¿™é‡Œåˆ›å»ºäº†è”åˆå…¨æ–‡ç´¢å¼•
) ENGINE=InnoDB;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿå¯ä»¥åœ¨å·²æœ‰çš„è¡¨ä¸Šæ·»åŠ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE articles ADD FULLTEXT INDEX ft_title_body (title, body);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä¸‰ç§å…¨æ–‡æœç´¢æ¨¡å¼"&gt;ğŸ’¬ ä¸‰ç§å…¨æ–‡æœç´¢æ¨¡å¼
&lt;/h3&gt;&lt;p&gt;MySQLæä¾›äº†ä¸‰ç§ä¸»è¦çš„å…¨æ–‡æœç´¢æ¨¡å¼ï¼Œä»¥é€‚åº”ä¸åŒåœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœç´¢æ¨¡å¼&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªç„¶è¯­è¨€æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ¨¡å¼ã€‚å°†æœç´¢å­—ç¬¦ä¸²è§†ä¸ºè‡ªç„¶çŸ­è¯­ï¼ŒæŒ‰&lt;strong&gt;ç›¸å…³æ€§è¯„åˆ†&lt;/strong&gt;æ’åºç»“æœã€‚&lt;/td&gt;
&lt;td&gt;é€šç”¨å…³é”®è¯æœç´¢ï¼Œå¦‚æœç´¢åŒ…å«â€œæ•°æ®åº“ä¼˜åŒ–â€çš„æ–‡ç« ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸ƒå°”æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒæ“ä½œç¬¦è¿›è¡Œå¤æ‚é€»è¾‘æŸ¥è¯¢ï¼Œå¦‚å¿…é¡»åŒ…å«(&lt;code&gt;+&lt;/code&gt;)ã€æ’é™¤(&lt;code&gt;-&lt;/code&gt;)ã€é€šé…ç¬¦(&lt;code&gt;*&lt;/code&gt;)ç­‰ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦ç²¾ç¡®è¿‡æ»¤çš„æœç´¢ï¼Œå¦‚â€œå¿…é¡»åŒ…å«Javaä½†ä¸åŒ…å«Pythonâ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ‰©å±•æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›è¡Œä¸¤é˜¶æ®µæœç´¢ï¼Œç¬¬äºŒé˜¶æ®µä½¿ç”¨ç¬¬ä¸€é˜¶æ®µç»“æœä¸­çš„ç›¸å…³è¯å†æ¬¡æœç´¢ä»¥æ‰©å¤§èŒƒå›´ã€‚&lt;/td&gt;
&lt;td&gt;åˆå§‹æœç´¢ç»“æœè¿‡å°‘æ—¶ï¼Œç”¨ä»¥æŸ¥æ‰¾è¯­ä¹‰ç›¸å…³çš„å…¶ä»–å†…å®¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="1-è‡ªç„¶è¯­è¨€æ¨¡å¼"&gt;1. è‡ªç„¶è¯­è¨€æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ç®€å•æœç´¢ã€‚MySQLä¼šè®¡ç®—å¹¶è¿”å›æ¯æ¡ç»“æœä¸æœç´¢è¯çš„ç›¸å…³æ€§åˆ†æ•°ï¼ˆä¸€ä¸ªéè´Ÿæµ®ç‚¹æ•°ï¼‰ï¼Œå¹¶è‡ªåŠ¨æŒ‰åˆ†æ•°ä»é«˜åˆ°ä½æ’åºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾åŒ…å«&amp;#39;database&amp;#39;æˆ–&amp;#39;optimization&amp;#39;çš„æ–‡ç« ï¼Œå¹¶æŒ‰ç›¸å…³æ€§æ’åº
SELECT id, title,
MATCH(title, body) AGAINST(&amp;#39;database optimization&amp;#39; IN NATURAL LANGUAGE MODE) AS score
FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;database optimization&amp;#39; IN NATURAL LANGUAGE MODE);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-å¸ƒå°”æ¨¡å¼"&gt;2. å¸ƒå°”æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;å½“æ‚¨éœ€è¦æ›´ç²¾ç¡®åœ°æ§åˆ¶æœç´¢é€»è¾‘æ—¶ï¼Œå¸ƒå°”æ¨¡å¼éå¸¸å¼ºå¤§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾å¿…é¡»åŒ…å«&amp;#34;MySQL&amp;#34;ä¸”åŒ…å«&amp;#34;performance&amp;#34;ï¼Œä½†ä¸èƒ½åŒ…å«&amp;#34;Oracle&amp;#34;çš„æ–‡ç« 
SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;+MySQL +performance -Oracle&amp;#39; IN BOOLEAN MODE);
-- ä½¿ç”¨é€šé…ç¬¦æœç´¢ä»¥&amp;#34;data&amp;#34;å¼€å¤´çš„å•è¯ï¼Œå¦‚&amp;#34;database&amp;#34;, &amp;#34;datawarehouse&amp;#34;
SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;data*&amp;#39; IN BOOLEAN MODE);
-- æœç´¢ç²¾ç¡®çŸ­è¯­&amp;#34;MySQL tutorial&amp;#34;
SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;&amp;#34;MySQL tutorial&amp;#34;&amp;#39; IN BOOLEAN MODE);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-æŸ¥è¯¢æ‰©å±•æ¨¡å¼"&gt;3. æŸ¥è¯¢æ‰©å±•æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;å½“æœç´¢è¯æ¯”è¾ƒç®€çŸ­æˆ–æ¨¡ç³Šæ—¶ï¼Œæ­¤æ¨¡å¼å¯ä»¥é€šè¿‡åé¦ˆæœºåˆ¶æ‰¾åˆ°æ›´å¤šç›¸å…³ç»“æœï¼Œä½†ä¹Ÿå¯èƒ½è¿”å›ä¸€äº›ä¸ç›¸å…³çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;database&amp;#39; WITH QUERY EXPANSION);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§
&lt;/h3&gt;&lt;p&gt;å°½ç®¡å…¨æ–‡æœç´¢åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–‡æ”¯æŒ&lt;/strong&gt;ï¼šé»˜è®¤çš„åˆ†è¯å™¨é’ˆå¯¹è‹±æ–‡ç­‰æœ‰ç©ºæ ¼åˆ†éš”çš„è¯­è¨€ã€‚è¦æœ‰æ•ˆæ”¯æŒä¸­æ–‡ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨MySQLå†…ç½®çš„**&lt;code&gt;ngram&lt;/code&gt;åˆ†è¯å™¨**ã€‚åœ¨åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®šï¼š&lt;code&gt;FULLTEXT (title, body) WITH PARSER ngram&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯é•¿é™åˆ¶&lt;/strong&gt;ï¼šé»˜è®¤å¿½ç•¥é•¿åº¦å°äº4ï¼ˆInnoDBï¼‰æˆ–å°äº4ï¼ˆMyISAMï¼‰çš„å•è¯ã€‚å¯¹äºä¸­æ–‡æœ¬åœ°åŒ–ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´&lt;code&gt;innodb_ft_min_token_size&lt;/code&gt;æˆ–&lt;code&gt;ft_min_word_len&lt;/code&gt;ç­‰ç³»ç»Ÿå˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼šå…¨æ–‡ç´¢å¼•çš„åˆ›å»ºå’Œç»´æŠ¤ä¼šå ç”¨é¢å¤–ç£ç›˜ç©ºé—´ï¼Œå¹¶å¯èƒ½å½±å“æ•°æ®æ’å…¥å’Œæ›´æ–°çš„é€Ÿåº¦ã€‚å¯¹äºå†™å…¥éå¸¸é¢‘ç¹çš„è¡¨éœ€è°¨æ…ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœç”¨è¯&lt;/strong&gt;ï¼šå¸¸è§è¯æ±‡ï¼ˆåœç”¨è¯ï¼‰ä¼šè¢«å¿½ç•¥ä¸”ä¸å‚ä¸ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œæœç´¢â€œthe storyâ€å¯èƒ½åªä¼šåŒ¹é…â€œstoryâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢è¯­æ³•&lt;/strong&gt;ï¼šå¿…é¡»ä½¿ç”¨&lt;code&gt;MATCH ... AGAINST&lt;/code&gt;è¯­æ³•æ‰èƒ½è§¦å‘å…¨æ–‡ç´¢å¼•ï¼Œä½¿ç”¨&lt;code&gt;LIKE '%keyword%'&lt;/code&gt;æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQLçš„å…¨æ–‡æœç´¢æ˜¯å¤„ç†æ–‡æœ¬å†…å®¹æŸ¥è¯¢çš„åˆ©å™¨ï¼Œå°¤å…¶é€‚ç”¨äºåšå®¢ã€æ–°é—»ç½‘ç«™ã€ç”µå•†å¹³å°å•†å“æœç´¢ã€çŸ¥è¯†åº“ç­‰æ–‡æœ¬å¯†é›†å‹åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå®ƒèƒ½ç†è§£è¯­ä¹‰ç›¸å…³æ€§è€Œä¸ä»…æ˜¯å­—ç¬¦åŒ¹é…ã€‚è¦æŒæ¡å®ƒï¼Œå…³é”®æ˜¯ç†è§£ä¸‰ç§æœç´¢æ¨¡å¼çš„åŒºåˆ«å¹¶æ­£ç¡®åˆ›å»ºç´¢å¼•ã€‚å¯¹äºä¸­æ–‡ç¯å¢ƒï¼ŒåŠ¡å¿…é…ç½®&lt;code&gt;ngram&lt;/code&gt;åˆ†è¯å™¨ä»¥è·å¾—ç†æƒ³æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨MySQLçš„å…¨æ–‡åŒ¹é…åŠŸèƒ½ï¼&lt;/p&gt;
&lt;h2 id="ç´¢å¼•å¤±æ•ˆ"&gt;ç´¢å¼•å¤±æ•ˆ
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ£€æŸ¥é¡¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;é€šè¿‡æ ‡å‡†&lt;/th&gt;
&lt;th style="text-align: left"&gt;å·¥å…·å‘½ä»¤&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ‰§è¡Œè®¡åˆ’ç±»å‹ type&lt;/td&gt;
&lt;td style="text-align: left"&gt;é ALL&lt;/td&gt;
&lt;td style="text-align: left"&gt;EXPLAIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•å‘½ä¸­ key&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ˜¾ç¤ºç´¢å¼•å&lt;/td&gt;
&lt;td style="text-align: left"&gt;EXPLAIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ‰«æè¡Œæ•° rows&lt;/td&gt;
&lt;td style="text-align: left"&gt;&amp;lt; æ€»è¡Œæ•°Ã—1%&lt;/td&gt;
&lt;td style="text-align: left"&gt;EXPLAIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;éšå¼è½¬æ¢/å‡½æ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ—æ— è®¡ç®—æˆ–è½¬æ¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»£ç å®¡æŸ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è”åˆç´¢å¼•é¡ºåº&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŸ¥è¯¢æ¡ä»¶åŒ¹é…æœ€å·¦å‰ç¼€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•è®¾è®¡æ–‡æ¡£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç»Ÿè®¡ä¿¡æ¯æ›´æ–°&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€è¿‘1å‘¨å†…æ‰§è¡Œè¿‡ ANALYZE&lt;/td&gt;
&lt;td style="text-align: left"&gt;SHOW TABLE STATUS&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœºæ™¯1ï¼šç ´åç´¢å¼•ç»“æ„&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¤±æ•ˆåŸå› &lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®å¤æ–¹æ¡ˆ&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†æ¯”å–»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ—ç”¨å‡½æ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;SELECT &amp;hellip; WHERE UPPER(name)=&amp;lsquo;ALICE&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‡½æ•°ç§»å‡ºåˆ—ï¼šname = UPPER(&amp;lsquo;alice&amp;rsquo;)&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¿®æ”¹é’¥åŒ™å½¢çŠ¶ï¼ˆå‡½æ•°æ‰­æ›²æ•°æ®ï¼‰â†’ æ— æ³•å¼€é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;éšå¼ç±»å‹è½¬æ¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;phoneï¼ˆVARCHARï¼‰ä¸ WHERE phone=13812345678ï¼ˆæ•°å­—ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç±»å‹ç»Ÿä¸€ï¼šphone=&amp;lsquo;13812345678&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‹±æ–‡ä¹¦ç”¨ä¸­æ–‡ç›®å½•æŸ¥æ‰¾ â†’ æ— æ³•åŒ¹é…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ—å‚ä¸è®¡ç®—&lt;/td&gt;
&lt;td style="text-align: left"&gt;WHERE salary*1.1 &amp;gt; 5000&lt;/td&gt;
&lt;td style="text-align: left"&gt;è®¡ç®—ç§»å‡ºåˆ—ï¼šsalary &amp;gt; 5000/1.1&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç ´åç´¢å¼•æ•°å€¼è¿ç»­æ€§ â†’ å¯¼èˆªå¤±æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœºæ™¯2ï¼šè¿åç´¢å¼•ä½¿ç”¨è§„åˆ™&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¤±æ•ˆåŸå› &lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®å¤æ–¹æ¡ˆ&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†æ¯”å–»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è”åˆç´¢å¼•è·³è¿‡æœ€å·¦åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼• (age,name)ï¼ŒæŸ¥è¯¢ WHERE name=&amp;lsquo;Alice&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¡¥å…¨æœ€å·¦åˆ— æˆ– æ–°å»ºå•åˆ—ç´¢å¼•&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŸ¥å­—å…¸è·³è¿‡æ‹¼éŸ³é¦–å­—æ¯ â†’ åªèƒ½æ•´æœ¬ç¿»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;LIKE å‰å¯¼é€šé…ç¬¦&lt;/td&gt;
&lt;td style="text-align: left"&gt;WHERE name LIKE &amp;lsquo;%Alice&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¹ç”¨åç¼€ç´¢å¼• æˆ– å…¨æ–‡æ£€ç´¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¨¡ç³ŠæŸ¥æ‰¾ä¹¦åä¸­é—´å­— â†’ æ— æ³•ç”¨ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;OR è¿æ¥éç´¢å¼•åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;WHERE age=25 OR address=&amp;lsquo;Beijing&amp;rsquo;ï¼ˆaddressæ— ç´¢å¼•ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ‹†ä¸º UNION æˆ– ä¸ºaddresså»ºç´¢å¼•&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸¤æŠŠé’¥åŒ™ä¸€æŠŠç”Ÿé”ˆ â†’ æ”¾å¼ƒå¼€é”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœºæ™¯3ï¼šä¼˜åŒ–å™¨ä¸»åŠ¨å¼ƒç”¨ç´¢å¼•&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¤±æ•ˆåŸå› &lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®å¤æ–¹æ¡ˆ&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†æ¯”å–»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ•°æ®é‡è¿‡å°‘&lt;/td&gt;
&lt;td style="text-align: left"&gt;100è¡Œå°è¡¨æŸ¥è¯¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— éœ€ä¿®å¤ï¼Œå…¨è¡¨æ‰«ææ›´å¿«&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ‰¾å°åŒº3æˆ·äºº â†’ é—®ä¿å®‰æ¯”æŸ¥åœ°å›¾å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ä½é€‰æ‹©æ€§åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;gender åˆ—ï¼ˆå€¼åªæœ‰&amp;rsquo;M&amp;rsquo;/&amp;lsquo;F&amp;rsquo;ï¼‰å»ºç´¢å¼•&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¹ç”¨å¤åˆç´¢å¼•ï¼ˆå¦‚ (gender,age)ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;90%ä½æˆ·å§“â€œå¼ â€â†’ æŒ‰å§“æ°æŸ¥æ— æ„ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸ&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ›å»ºåæœªæ›´æ–°ç»Ÿè®¡ä¿¡æ¯&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šæœŸæ‰§è¡Œ ANALYZE TABLE&lt;/td&gt;
&lt;td style="text-align: left"&gt;åœ°å›¾æœªæ›´æ–°æ–°é“è·¯ â†’ å¯¼èˆªç»•è¿œè·¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="show-status"&gt;SHOW STATUS
&lt;/h2&gt;&lt;p&gt;MySQLçš„ &lt;code&gt;SHOW STATUS&lt;/code&gt;å‘½ä»¤æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å†…ç½®è¯Šæ–­å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹æœåŠ¡å™¨çš„è¿è¡Œæ—¶çŠ¶æ€ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ·±å…¥äº†è§£æ•°æ®åº“çš„æ€§èƒ½è¡¨ç°ã€èµ„æºä½¿ç”¨æƒ…å†µä»¥åŠå„ç§æ“ä½œçš„æ‰§è¡Œé¢‘ç‡ã€‚ä¸‹é¢æˆ‘å°†ä»æ ¸å¿ƒç”¨é€”ã€å…³é”®çŠ¶æ€å˜é‡è§£è¯»ä»¥åŠå®é™…åº”ç”¨åœºæ™¯ç­‰æ–¹é¢ä¸ºæ‚¨è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id="-å‘½ä»¤æ¦‚è¿°ä¸åŸºæœ¬è¯­æ³•"&gt;ğŸ” å‘½ä»¤æ¦‚è¿°ä¸åŸºæœ¬è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;ç”¨äºæ˜¾ç¤ºMySQLæœåŠ¡å™¨çš„çŠ¶æ€å˜é‡ä¿¡æ¯ã€‚è¿™äº›çŠ¶æ€å˜é‡æ˜¯åªè¯»çš„ï¼Œè®°å½•äº†è‡ªæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥æˆ–å½“å‰ä¼šè¯æœŸé—´çš„å„ç±»ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW [GLOBAL | SESSION] STATUS [LIKE &amp;#39;pattern&amp;#39; | WHERE expr];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¿®é¥°ç¬¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GLOBAL&lt;/code&gt;ï¼šæ˜¾ç¤ºæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥çš„&lt;strong&gt;å…¨å±€ç´¯è®¡&lt;/strong&gt;çŠ¶æ€å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SESSION&lt;/code&gt;ï¼šæ˜¾ç¤º&lt;strong&gt;å½“å‰ä¼šè¯&lt;/strong&gt;ï¼ˆè¿æ¥ï¼‰çš„çŠ¶æ€å€¼ã€‚è¿™æ˜¯é»˜è®¤é€‰é¡¹ï¼Œ&lt;code&gt;LOCAL&lt;/code&gt;æ˜¯ &lt;code&gt;SESSION&lt;/code&gt;çš„åŒä¹‰è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœè¿‡æ»¤&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ &lt;code&gt;LIKE&lt;/code&gt;å­å¥ï¼ˆæ”¯æŒ&lt;code&gt;%&lt;/code&gt;å’Œ&lt;code&gt;_&lt;/code&gt;é€šé…ç¬¦ï¼‰æˆ– &lt;code&gt;WHERE&lt;/code&gt;å­å¥æ¥ç­›é€‰æ„Ÿå…´è¶£çš„å˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®çŠ¶æ€å˜é‡è§£è¯»"&gt;ğŸ“Š å…³é”®çŠ¶æ€å˜é‡è§£è¯»
&lt;/h3&gt;&lt;p&gt;MySQLæä¾›äº†æ•°ç™¾ä¸ªçŠ¶æ€å˜é‡ï¼Œä¸‹è¡¨å°†å®ƒä»¬åˆ†ç±»å¹¶è§£é‡Šäº†å…¶ä¸­ä¸€äº›æœ€å¸¸ç”¨äºæ€§èƒ½åˆ†æçš„å…³é”®å˜é‡ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç±»åˆ«&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å˜é‡å&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸­æ–‡è§£é‡Šä¸è¯Šæ–­ä»·å€¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥ä¸çº¿ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Connections&lt;/code&gt; &lt;code&gt;Threads_connected&lt;/code&gt; &lt;code&gt;Threads_running&lt;/code&gt; &lt;code&gt;Aborted_connects&lt;/code&gt; &lt;code&gt;Aborted_clients&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è‡ªæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥å°è¯•è¿æ¥çš„æ€»æ¬¡æ•°ã€‚ &lt;strong&gt;å½“å‰æ‰“å¼€çš„è¿æ¥æ•°&lt;/strong&gt;ã€‚è‹¥æ¥è¿‘&lt;code&gt;max_connections&lt;/code&gt;ï¼Œå¯èƒ½é¢„ç¤ºè¿æ¥æ± ä¸è¶³ã€‚ &lt;strong&gt;å½“å‰éä¼‘çœ çš„æ´»è·ƒçº¿ç¨‹æ•°&lt;/strong&gt;ã€‚è‹¥æŒç»­è¿‡é«˜ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è´Ÿè½½è¾ƒé‡ã€‚ å¤±è´¥çš„è¿æ¥å°è¯•æ¬¡æ•°ã€‚è¿‡é«˜å¯èƒ½æ„å‘³ç€ç½‘ç»œé—®é¢˜æˆ–æœ€å¤§è¿æ¥æ•°é™åˆ¶ã€‚ å®¢æˆ·ç«¯æœªæ­£ç¡®å…³é—­å¯¼è‡´çš„è¿æ¥ä¸­æ–­æ•°ã€‚å¯èƒ½ä¸åº”ç”¨è¿æ¥ç®¡ç†æœ‰å…³ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ“ä½œç»Ÿè®¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Com_select&lt;/code&gt;, &lt;code&gt;Com_insert&lt;/code&gt;, &lt;code&gt;Com_update&lt;/code&gt;, &lt;code&gt;Com_delete&lt;/code&gt; &lt;code&gt;Questions&lt;/code&gt; &lt;code&gt;Slow_queries&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å„ç±»SQLè¯­å¥ï¼ˆSELECT/INSERT/UPDATE/DELETEï¼‰&lt;strong&gt;æ‰§è¡Œçš„æ¬¡æ•°&lt;/strong&gt;ã€‚ æœåŠ¡å™¨æ”¶åˆ°çš„æŸ¥è¯¢/å‘½ä»¤æ€»æ•°ï¼ˆé€šå¸¸æ¯”&lt;code&gt;Com_*&lt;/code&gt;æ€»å’Œæ›´å…¨é¢ï¼‰ã€‚ æ‰§è¡Œæ—¶é—´è¶…è¿‡&lt;code&gt;long_query_time&lt;/code&gt;çš„&lt;strong&gt;æ…¢æŸ¥è¯¢æ•°é‡&lt;/strong&gt;ã€‚ç›‘æ§æ­¤å€¼æœ‰åŠ©äºå‘ç°æ€§èƒ½é—®é¢˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•ä½¿ç”¨æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Handler_read_first&lt;/code&gt; &lt;code&gt;Handler_read_key&lt;/code&gt; &lt;code&gt;Handler_read_next&lt;/code&gt; &lt;code&gt;Handler_read_prev&lt;/code&gt; &lt;code&gt;Handler_read_rnd&lt;/code&gt; &lt;code&gt;Handler_read_rnd_next&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¯»å–ç´¢å¼•å¤´ç»“ç‚¹çš„æ¬¡æ•°&lt;/strong&gt;ã€‚é«˜å€¼å¯èƒ½è¡¨ç¤ºå…¨ç´¢å¼•æ‰«æè¾ƒå¤šã€‚ &lt;strong&gt;é€šè¿‡é”®å€¼ï¼ˆç´¢å¼•ï¼‰è¯»å–è¡Œçš„æ¬¡æ•°&lt;/strong&gt;ã€‚é«˜å€¼é€šå¸¸è¡¨æ˜ç´¢å¼•ä½¿ç”¨è‰¯å¥½ã€‚ æŒ‰é”®é¡ºåºè¯»ä¸‹ä¸€è¡Œçš„æ¬¡æ•°ï¼ˆèŒƒå›´æ‰«æï¼‰ã€‚ æŒ‰é”®é¡ºåºè¯»ä¸Šä¸€è¡Œçš„æ¬¡æ•°ï¼ˆå¦‚ORDER BY DESCï¼‰ã€‚ &lt;strong&gt;åŸºäºå›ºå®šä½ç½®è¯»è¡Œçš„è¯·æ±‚æ•°&lt;/strong&gt;ã€‚é«˜å€¼å¯èƒ½æ„å‘³ç€éœ€è¦æ’åºçš„æŸ¥è¯¢å¤šæˆ–æœªç”¨ç´¢å¼•ã€‚ &lt;strong&gt;è¿›è¡Œå…¨è¡¨æ‰«ææ—¶è¯»å–ä¸‹ä¸€è¡Œçš„è¯·æ±‚æ•°&lt;/strong&gt;ã€‚&lt;strong&gt;æ­¤å€¼å¼‚å¸¸é«˜æ˜¯è¡¨ç¼ºå°‘åˆé€‚ç´¢å¼•çš„å¼ºçƒˆä¿¡å·&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;InnoDBå­˜å‚¨å¼•æ“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Innodb_buffer_pool_read_requests&lt;/code&gt; &lt;code&gt;Innodb_buffer_pool_reads&lt;/code&gt; &lt;code&gt;Innodb_rows_read&lt;/code&gt; &lt;code&gt;Innodb_rows_inserted&lt;/code&gt; &lt;code&gt;Innodb_rows_updated&lt;/code&gt; &lt;code&gt;Innodb_rows_deleted&lt;/code&gt; &lt;code&gt;Innodb_row_lock_time_avg&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å‘InnoDBç¼“å†²æ± å‘èµ·çš„&lt;strong&gt;é€»è¾‘è¯»è¯·æ±‚æ•°&lt;/strong&gt;ã€‚ &lt;strong&gt;ä»ç£ç›˜è¿›è¡Œçš„ç‰©ç†è¯»æ¬¡æ•°&lt;/strong&gt;ã€‚&lt;strong&gt;è®¡ç®—ç¼“å†²æ± å‘½ä¸­ç‡çš„å…³é”®æŒ‡æ ‡&lt;/strong&gt;ã€‚ InnoDBå­˜å‚¨å¼•æ“å±‚&lt;strong&gt;è¯»å–ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤çš„è¡Œæ•°&lt;/strong&gt;ï¼Œæ¯”&lt;code&gt;Com_*&lt;/code&gt;æ›´æ¥è¿‘å®é™…æ•°æ®æ“ä½œé‡ã€‚ è¡Œé”å®šçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚é«˜å€¼è¡¨ç¤ºå­˜åœ¨é”ç«äº‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸´æ—¶è¡¨ä¸ç¼“å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Created_tmp_tables&lt;/code&gt; &lt;code&gt;Created_tmp_disk_tables&lt;/code&gt; &lt;code&gt;Table_open_cache_hits&lt;/code&gt; &lt;code&gt;Table_open_cache_misses&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œè¯­å¥æ—¶&lt;strong&gt;åˆ›å»ºçš„å†…éƒ¨ä¸´æ—¶è¡¨æ€»æ•°&lt;/strong&gt;ã€‚ &lt;strong&gt;åœ¨ç£ç›˜ä¸Šåˆ›å»ºçš„å†…éƒ¨ä¸´æ—¶è¡¨æ•°&lt;/strong&gt;ã€‚&lt;strong&gt;è‹¥æ­¤å€¼å æ¯”é«˜ï¼Œéœ€ä¼˜åŒ–æŸ¥è¯¢æˆ–è°ƒæ•´&lt;code&gt;tmp_table_size&lt;/code&gt;ç­‰å‚æ•°&lt;/strong&gt;ã€‚ è¡¨ç¼“å­˜&lt;strong&gt;å‘½ä¸­ä¸æœªå‘½ä¸­çš„æ¬¡æ•°&lt;/strong&gt;ã€‚ç¼“å­˜å‘½ä¸­ç‡ä½å¯è€ƒè™‘å¢å¤§&lt;code&gt;table_open_cache&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸æ€§èƒ½åˆ†æå®è·µ"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸æ€§èƒ½åˆ†æå®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®æ—¶å¿«ç…§ä¸ç›‘æ§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;å¯ä»¥å¿«é€Ÿè·å–æ•°æ®åº“è‡ªå¯åŠ¨ä»¥æ¥çš„æ•´ä½“è¿è¡Œå¥åº·çŠ¶å†µã€‚å®šæœŸæ‰§è¡Œï¼ˆå¦‚æ¯åˆ†é’Ÿï¼‰å¹¶è®¡ç®—å·®å€¼ï¼Œå¯ä»¥ç›‘æ§å…³é”®æŒ‡æ ‡çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¸¸ç”¨äºæ„å»ºæ•°æ®åº“ç›‘æ§ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å…³é”®æ€§èƒ½æ¯”ç‡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;InnoDBç¼“å†²æ± å‘½ä¸­ç‡&lt;/strong&gt;ï¼šè¿™åæ˜ äº†æ•°æ®ä»å†…å­˜ä¸­è¯»å–çš„æ¯”ä¾‹ï¼Œæ˜¯è¡¡é‡InnoDBæ€§èƒ½çš„å…³é”®æŒ‡æ ‡ã€‚ç†æƒ³æƒ…å†µä¸‹åº”é«˜äº99%ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Hit Rate = (1 - Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests) * 100%&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸´æ—¶è¡¨ç£ç›˜åˆ›å»ºç‡&lt;/strong&gt;ï¼šå¦‚æœç£ç›˜ä¸´æ—¶è¡¨å æ¯”è¿‡é«˜ï¼Œå¯èƒ½éœ€è¦ä¼˜åŒ–å¯¼è‡´ä¸´æ—¶è¡¨çš„æŸ¥è¯¢ï¼ˆå¦‚ä½¿ç”¨å¤§æ–‡ä»¶æ’åºæˆ–æœªç´¢å¼•çš„è”æ¥ï¼‰ï¼Œæˆ–è€…é€‚å½“å¢åŠ  &lt;code&gt;tmp_table_size&lt;/code&gt;å’Œ &lt;code&gt;max_heap_table_size&lt;/code&gt;å‚æ•°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Disk Temp Table Ratio = (Created_tmp_disk_tables / Created_tmp_tables) * 100%&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯Šæ–­ç‰¹å®šé—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•å¤±æ•ˆ&lt;/strong&gt;ï¼šå¦‚æœå‘ç° &lt;code&gt;Handler_read_rnd_next&lt;/code&gt;çš„å€¼å¼‚å¸¸é«˜ï¼Œè€Œ &lt;code&gt;Handler_read_key&lt;/code&gt;çš„å€¼ç›¸å¯¹è¾ƒä½ï¼Œè¿™é€šå¸¸æ„å‘³ç€æ•°æ®åº“æ­£åœ¨æ‰§è¡Œå¤§é‡çš„å…¨è¡¨æ‰«æï¼Œæ˜¯ç´¢å¼•ç¼ºå¤±æˆ–æŸ¥è¯¢æœªä½¿ç”¨ç´¢å¼•çš„å…¸å‹è¡¨ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æ•°å¼‚å¸¸&lt;/strong&gt;ï¼šç›‘æ§ &lt;code&gt;Threads_connected&lt;/code&gt;æ˜¯å¦æ¥è¿‘ &lt;code&gt;max_connections&lt;/code&gt;é™åˆ¶ï¼Œå¹¶ç»“åˆ &lt;code&gt;Aborted_connects&lt;/code&gt;å’Œ &lt;code&gt;Aborted_clients&lt;/code&gt;æ’æŸ¥è¿æ¥é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡ç½®çŠ¶æ€å€¼&lt;/strong&gt;ï¼šå¤§å¤šæ•°çŠ¶æ€å˜é‡æ˜¯ç´¯è®¡å€¼ï¼Œ&lt;strong&gt;æœåŠ¡å™¨é‡å¯ä¼šå°†å…¶é‡ç½®ä¸ºé›¶&lt;/strong&gt;ã€‚å› æ­¤ï¼Œè¿›è¡Œæ€§èƒ½åˆ†ææ—¶ï¼Œå…³æ³¨ä¸€æ®µæ—¶é—´å†…çš„&lt;strong&gt;å¢é‡å˜åŒ–&lt;/strong&gt;ï¼ˆå½“å‰å€¼å‡å»ä¹‹å‰è®°å½•çš„å€¼ï¼‰æ¯”ç»å¯¹å€¼æ›´æœ‰æ„ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™è¦æ±‚ä½&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SHOW STATUS&lt;/code&gt;å‘½ä»¤åªéœ€è¦èƒ½å¤Ÿè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œé€šå¸¸ä¸éœ€è¦ç‰¹æ®Šæƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡æ¯æºå¤šæ ·&lt;/strong&gt;ï¼šé™¤äº† &lt;code&gt;SHOW STATUS&lt;/code&gt;å‘½ä»¤ï¼ŒçŠ¶æ€ä¿¡æ¯è¿˜å¯ä»¥é€šè¿‡æŸ¥è¯¢ &lt;code&gt;INFORMATION_SCHEMA&lt;/code&gt;æ•°æ®åº“ä¸­çš„ &lt;code&gt;GLOBAL_STATUS&lt;/code&gt;å’Œ &lt;code&gt;SESSION_STATUS&lt;/code&gt;è¡¨ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;mysqladmin extended-status&lt;/code&gt;å·¥å…·å‘½ä»¤æ¥è·å–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;æ˜¯MySQLæ•°æ®åº“æ€§èƒ½åˆ†æå’Œæ—¥å¸¸è¿ç»´ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚é€šè¿‡ç†Ÿç»ƒæŸ¥çœ‹å’Œç†è§£å…³é”®çŠ¶æ€å˜é‡ï¼Œæ‚¨å¯ä»¥æ·±å…¥äº†è§£æ•°æ®åº“çš„å†…éƒ¨è¿ä½œæƒ…å†µï¼Œç²¾å‡†å®šä½å¦‚ç´¢å¼•å¤±æ•ˆã€ç¼“å†²æ± ä¸è¶³ã€è¿æ¥å¼‚å¸¸ç­‰æ€§èƒ½ç“¶é¢ˆï¼Œä»è€Œè¿›è¡Œæœ‰æ•ˆçš„è°ƒä¼˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°åˆ©ç”¨ &lt;code&gt;SHOW STATUS&lt;/code&gt;æ¥ä¿éšœæ•°æ®åº“çš„ç¨³å®šé«˜æ•ˆè¿è¡Œï¼å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šçŠ¶æ€å˜é‡æˆ–åº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="show-table-status"&gt;SHOW TABLE STATUS
&lt;/h2&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;å‘½ä»¤æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å†…ç½®è¯Šæ–­å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹æ•°æ®åº“ä¸­è¡¨çš„è¯¦ç»†çŠ¶æ€ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ·±å…¥äº†è§£è¡¨çš„å­˜å‚¨æƒ…å†µã€æ•°æ®é‡ä»¥åŠæ€§èƒ½ç›¸å…³æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;h3 id="-å‘½ä»¤è¯­æ³•ä¸åŸºæœ¬ç”¨æ³•"&gt;ğŸ” å‘½ä»¤è¯­æ³•ä¸åŸºæœ¬ç”¨æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;ç”¨äºæ˜¾ç¤ºè¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW TABLE STATUS [{FROM | IN} db_name] [LIKE &amp;#39;pattern&amp;#39; | WHERE expr];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;FROM db_name&lt;/code&gt;æˆ– &lt;code&gt;IN db_name&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¦æŸ¥çœ‹çš„æ•°æ®åº“ã€‚å¦‚æœçœç•¥ï¼Œåˆ™æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LIKE 'pattern'&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºè¿‡æ»¤è¡¨åï¼Œæ”¯æŒ &lt;code&gt;%&lt;/code&gt;å’Œ &lt;code&gt;_&lt;/code&gt;é€šé…ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WHERE expr&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºä½¿ç”¨æ›´ä¸€èˆ¬çš„æ¡ä»¶è¿›è¡Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SHOW TABLE STATUS;&lt;/code&gt;&amp;ndash; æ˜¾ç¤ºå½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SHOW TABLE STATUS FROM mydb LIKE 'user%';&lt;/code&gt;&amp;ndash; æ˜¾ç¤ºæ•°æ®åº“ &lt;code&gt;mydb&lt;/code&gt;ä¸­è¡¨åä»¥ &lt;code&gt;user&lt;/code&gt;å¼€å¤´çš„è¡¨çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SHOW TABLE STATUS FROM mydb LIKE 'esf_seller_history'\G&lt;/code&gt;&amp;ndash; ä½¿ç”¨ &lt;code&gt;\G&lt;/code&gt;æ›¿ä»£ &lt;code&gt;;&lt;/code&gt;å¯ä»¥ä½¿ç»“æœå‚ç›´æ˜¾ç¤ºï¼Œè¿™åœ¨åˆ—å¾ˆå¤šæ—¶æ›´ä¾¿äºé˜…è¯»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¾“å‡ºå­—æ®µè¯¦è§£"&gt;ğŸ“Š è¾“å‡ºå­—æ®µè¯¦è§£
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„è¾“å‡ºåŒ…å«å¤§é‡ä¿¡æ¯ï¼Œä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›æœ€å…³é”®çš„å­—æ®µåŠå…¶å«ä¹‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å­—æ®µå&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è§£é‡Šä¸è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Name&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Engine&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„&lt;strong&gt;å­˜å‚¨å¼•æ“&lt;/strong&gt;ï¼ˆå¦‚ InnoDBã€MyISAMï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Version&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„ &lt;code&gt;.frm&lt;/code&gt;æ–‡ä»¶çš„ç‰ˆæœ¬å·ã€‚åœ¨æ›´é«˜ç‰ˆæœ¬çš„ MySQL ä¸­ï¼Œæ­¤å€¼å¯èƒ½ä¸ºå›ºå®šå€¼ï¼ˆå¦‚ 10ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Row_format&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡Œçš„å­˜å‚¨æ ¼å¼&lt;/strong&gt;ï¼ˆå¦‚ Dynamicã€Fixedã€Compressedã€Compactã€Redundantï¼‰ã€‚Dynamic æ ¼å¼é€šå¸¸ç”¨äºåŒ…å«å¯å˜é•¿å­—æ®µï¼ˆå¦‚ VARCHAR, BLOBï¼‰çš„è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ä¸­çš„è¡Œæ•°&lt;/strong&gt;ã€‚&lt;strong&gt;ç‰¹åˆ«æ³¨æ„&lt;/strong&gt;ï¼šå¯¹äº MyISAM ç­‰å¼•æ“ï¼Œæ­¤å€¼æ˜¯&lt;strong&gt;ç²¾ç¡®çš„&lt;/strong&gt;ï¼›ä½†å¯¹äº InnoDBï¼Œæ­¤å€¼æ˜¯ä¸€ä¸ª&lt;strong&gt;ä¼°è®¡å€¼&lt;/strong&gt;ï¼Œä¸å®é™…è¡Œæ•°å¯èƒ½å­˜åœ¨ 40% åˆ° 50% çš„è¯¯å·®ã€‚è¦è·å–ç²¾ç¡®è¡Œæ•°ï¼Œè¯·ä½¿ç”¨ &lt;code&gt;SELECT COUNT(*)&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Avg_row_length&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³å‡æ¯è¡Œçš„å­—èŠ‚æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Data_length&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨æ•°æ®çš„æ€»å¤§å°&lt;/strong&gt;ï¼ˆå­—èŠ‚ï¼‰ã€‚å¯¹äº InnoDBï¼Œè¿™é€šå¸¸æ˜¯&lt;strong&gt;èšç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰çš„è¿‘ä¼¼å¤§å°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Index_length&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•çš„æ€»å¤§å°&lt;/strong&gt;ï¼ˆå­—èŠ‚ï¼‰ã€‚å¯¹äº InnoDBï¼Œè¿™æ˜¯&lt;strong&gt;éèšç°‡ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰çš„è¿‘ä¼¼å¤§å°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å·²åˆ†é…ä½†æœªä½¿ç”¨çš„ç©ºé—´&lt;/strong&gt;ï¼ˆå­—èŠ‚ï¼‰ï¼Œé€šå¸¸ç§°ä¸º&lt;strong&gt;æ•°æ®ç¢ç‰‡&lt;/strong&gt;ã€‚å¯¹äº InnoDBï¼Œå®ƒè¡¨ç¤ºè¡¨æ‰€å±è¡¨ç©ºé—´çš„å‰©ä½™ç©ºé—´ã€‚å³ä½¿æ˜¾ç¤ºä¸º 0ï¼Œåªè¦ä¸åˆ†é…æ–°åŒºåŸŸï¼Œä»å¯æ’å…¥æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Auto_increment&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸‹ä¸€ä¸ª AUTO_INCREMENT å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Create_time&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„åˆ›å»ºæ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Update_time&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®æ–‡ä»¶æœ€åä¸€æ¬¡æ›´æ–°æ—¶é—´ã€‚å¯¹äºæŸäº›å­˜å‚¨å¼•æ“ï¼ˆå¦‚ InnoDBï¼‰ï¼Œæ­¤å€¼å¯èƒ½ä¸º NULL æˆ–ä¸å‡†ç¡®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Check_time&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨æœ€åä¸€æ¬¡è¢«æ£€æŸ¥çš„æ—¶é—´ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;CHECK TABLE&lt;/code&gt;å‘½ä»¤ï¼‰ã€‚å¹¶éæ‰€æœ‰å¼•æ“éƒ½æ›´æ–°æ­¤å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Collation&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„é»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™ã€‚æ’åºè§„åˆ™åç§°é€šå¸¸ä»¥å­—ç¬¦é›†åç§°å¼€å¤´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Create_options&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºè¡¨æ—¶æŒ‡å®šçš„é¢å¤–é€‰é¡¹ï¼ˆå¦‚åˆ†åŒºä¿¡æ¯ã€åŠ å¯†è®¾ç½®ç­‰ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Comment&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºè¡¨æ—¶æ·»åŠ çš„æ³¨é‡Šã€‚å¯¹äºè§†å›¾ï¼Œæ­¤å­—æ®µä¼šæ˜¾ç¤º &amp;lsquo;VIEW&amp;rsquo;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒè¦ç‚¹ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ æ ¸å¿ƒè¦ç‚¹ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“å·®å¼‚&lt;/strong&gt;ï¼š&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„è®¸å¤šå­—æ®µå€¼ï¼ˆç‰¹åˆ«æ˜¯ &lt;code&gt;Rows&lt;/code&gt;ã€&lt;code&gt;Data_length&lt;/code&gt;ã€&lt;code&gt;Index_length&lt;/code&gt;ï¼‰çš„è§£é‡Šå’Œå‡†ç¡®æ€§&lt;strong&gt;é«˜åº¦ä¾èµ–äºå­˜å‚¨å¼•æ“&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼ŒInnoDB çš„ &lt;code&gt;Rows&lt;/code&gt;æ˜¯ä¼°è®¡å€¼ï¼Œè€Œ MyISAM çš„æ˜¯ç²¾ç¡®å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç¢ç‰‡ä¸ç©ºé—´å›æ”¶&lt;/strong&gt;ï¼š&lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt; å­—æ®µåæ˜ äº†ç©ºé—´ç¢ç‰‡ã€‚å¦‚æœè¿™ä¸ªå€¼å¾ˆå¤§ï¼Œè¯´æ˜è¡¨æœ‰å¤§é‡ç©ºé—´æœªè¢«åˆ©ç”¨ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;å‘½ä»¤æ¥é‡æ–°ç»„ç»‡è¡¨å¹¶å›æ”¶ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–ç²¾ç¡®è¡Œæ•°&lt;/strong&gt;ï¼šå¦‚å‰æ‰€è¿°ï¼Œå¯¹äº InnoDB è¡¨ï¼Œä¸è¦ä¾èµ– &lt;code&gt;Rows&lt;/code&gt;åˆ—æ¥è·å–ç²¾ç¡®è¡Œæ•°ã€‚åŠ¡å¿…ä½¿ç”¨ &lt;code&gt;SELECT COUNT(*) FROM table_name&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›¿ä»£æŸ¥è¯¢æ–¹å¼&lt;/strong&gt;ï¼š&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„ä¿¡æ¯ä¹Ÿå¯ä»¥ä» &lt;code&gt;INFORMATION_SCHEMA.TABLES&lt;/code&gt;è§†å›¾ä¸­æŸ¥è¯¢ã€‚è¿™ç§æ–¹å¼æ›´é€‚åˆè¿›è¡Œå¤æ‚çš„è¿‡æ»¤å’Œè¿æ¥æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æ˜¯ MySQL æ•°æ®åº“ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œå®ƒèƒ½æä¾›å…³äºè¡¨å¤§å°ã€è¡Œæ•°ã€å­˜å‚¨æ ¼å¼ç­‰ä¸°å¯Œä¿¡æ¯ã€‚ç†è§£å…¶è¾“å‡ºå­—æ®µçš„å«ä¹‰ï¼Œç‰¹åˆ«æ˜¯æ³¨æ„ä¸åŒå­˜å‚¨å¼•æ“çš„å·®å¼‚ï¼Œå¯¹äºå‡†ç¡®åˆ†æè¡¨çš„çŠ¶æ€è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°åˆ©ç”¨ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;ï¼å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šå­—æ®µæˆ–åº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="show-status--show-table-status"&gt;SHOW STATUS &amp;amp; SHOW TABLE STATUS
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;å’Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸¤ä¸ªåŠŸèƒ½ä¸åŒçš„è¯Šæ–­å‘½ä»¤ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºæŸ¥çœ‹æœåŠ¡å™¨çº§åˆ«çš„æ€§èƒ½æŒ‡æ ‡å’Œæ•°æ®åº“è¡¨çº§åˆ«çš„è¯¦ç»†ä¿¡æ¯ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;SHOW STATUS&lt;/th&gt;
&lt;th&gt;SHOW TABLE STATUS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›‘æ§å±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨çº§åˆ«&lt;/strong&gt;ï¼ˆServer-Levelï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨çº§åˆ«&lt;/strong&gt;ï¼ˆTable-Levelï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡æ¯ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€æ€§èƒ½æŒ‡æ ‡&lt;/strong&gt;ï¼ˆè®¡æ•°å™¨ã€è®¡æ—¶å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é™æ€å…ƒæ•°æ®ä¸ç»Ÿè®¡ä¿¡æ¯&lt;/strong&gt;ï¼ˆè¡¨ç»“æ„ã€å­˜å‚¨ç©ºé—´ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨å±€ï¼ˆGLOBALï¼‰æˆ–å½“å‰ä¼šè¯ï¼ˆSESSIONï¼‰&lt;/td&gt;
&lt;td&gt;ç‰¹å®šæ•°æ®åº“ä¸­çš„è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç›‘æ§&lt;/strong&gt;ã€ç“¶é¢ˆè¯Šæ–­ã€è¶‹åŠ¿åˆ†æ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ç»´æŠ¤&lt;/strong&gt;ã€ç©ºé—´ç®¡ç†ã€ç»“æ„åˆ†æ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾“å‡ºå˜é‡/å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Connections&lt;/code&gt;, &lt;code&gt;Slow_queries&lt;/code&gt;, &lt;code&gt;Innodb_rows_read&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Name&lt;/code&gt;, &lt;code&gt;Engine&lt;/code&gt;, &lt;code&gt;Rows&lt;/code&gt;, &lt;code&gt;Data_length&lt;/code&gt;, &lt;code&gt;Index_length&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®ä¿¡æ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥æ•°ã€æŸ¥è¯¢é‡ã€ç¼“å­˜å‘½ä¸­ç‡ã€è¡Œæ“ä½œæ¬¡æ•°&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å¼•æ“ã€è¡Œæ•°ä¼°ç®—ã€æ•°æ®ä¸ç´¢å¼•å¤§å°ã€ç¢ç‰‡æƒ…å†µ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸¤è€…å·®å¼‚"&gt;ğŸ’¡ æ·±å…¥ç†è§£ä¸¤è€…å·®å¼‚
&lt;/h3&gt;&lt;h4 id="-show-statusæœåŠ¡å™¨çš„å®æ—¶ä»ªè¡¨ç›˜"&gt;ğŸ” SHOW STATUSï¼šæœåŠ¡å™¨çš„â€œå®æ—¶ä»ªè¡¨ç›˜â€
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;ç”¨äºæŸ¥çœ‹MySQLæœåŠ¡å™¨çš„&lt;strong&gt;è¿è¡Œæ—¶çŠ¶æ€å˜é‡&lt;/strong&gt;ï¼Œè¿™äº›å˜é‡æ˜¯åŠ¨æ€å˜åŒ–çš„ç´¯è®¡å€¼ï¼Œåæ˜ äº†æœåŠ¡å™¨è‡ªå¯åŠ¨ä»¥æ¥çš„æ´»åŠ¨æƒ…å†µã€‚å®ƒå¸®åŠ©ä½ å›ç­”è¯¸å¦‚â€œæˆ‘çš„æ•°æ®åº“å¿™ä¸å¿™ï¼Ÿâ€â€œç“¶é¢ˆå¯èƒ½åœ¨å“ªé‡Œï¼Ÿâ€è¿™æ ·çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å˜é‡ä¸¾ä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Connections&lt;/code&gt;&lt;/strong&gt;ï¼šå°è¯•è¿æ¥MySQLæœåŠ¡å™¨çš„æ€»æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Threads_connected&lt;/code&gt;&lt;/strong&gt;ï¼šå½“å‰æ‰“å¼€çš„è¿æ¥æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Slow_queries&lt;/code&gt;&lt;/strong&gt;ï¼šæ‰§è¡Œæ—¶é—´è¶…è¿‡&lt;code&gt;long_query_time&lt;/code&gt;çš„æŸ¥è¯¢æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_read&lt;/code&gt;&lt;/strong&gt;ï¼šInnoDBå­˜å‚¨å¼•æ“è¯»å–çš„è¡Œæ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Key_read_requests&lt;/code&gt;/ &lt;code&gt;Key_reads&lt;/code&gt;&lt;/strong&gt;ï¼šç»“åˆè¿™ä¸¤ä¸ªå€¼å¯ä»¥è®¡ç®—&lt;strong&gt;ç¼“å­˜å‘½ä¸­ç‡&lt;/strong&gt;ï¼Œåˆ¤æ–­ç´¢å¼•ç¼“å­˜ï¼ˆkey_bufferï¼‰æ˜¯å¦è¶³å¤Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;æŸ¥çœ‹æœåŠ¡å™¨å¯åŠ¨ä»¥æ¥çš„å…¨å±€ç»Ÿè®¡ï¼Œæˆ–ç”¨&lt;code&gt;SHOW SESSION STATUS&lt;/code&gt;æŸ¥çœ‹å½“å‰ä¼šè¯çš„ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-show-table-statusè¡¨çš„ä½“æ£€æŠ¥å‘Š"&gt;ğŸ“Š SHOW TABLE STATUSï¼šè¡¨çš„â€œä½“æ£€æŠ¥å‘Šâ€
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;ç”¨äºæŸ¥çœ‹æ•°æ®åº“ä¸­è¡¨çš„&lt;strong&gt;è¯¦ç»†å±æ€§å’Œå­˜å‚¨ä¿¡æ¯&lt;/strong&gt;ã€‚å®ƒæä¾›çš„æ˜¯æŸä¸ªæ—¶é—´ç‚¹çš„è¡¨å…ƒæ•°æ®å¿«ç…§ï¼Œå¸®åŠ©ä½ äº†è§£è¡¨çš„â€œèº«ä½“çŠ¶å†µâ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å­—æ®µä¸¾ä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Name&lt;/code&gt;, &lt;code&gt;Engine&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨åå’Œä½¿ç”¨çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚InnoDBã€MyISAMï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨&lt;strong&gt;ä¼°ç®—&lt;/strong&gt;çš„è¡Œæ•°ã€‚å¯¹äºInnoDBè¡¨ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œç²¾ç¡®è¡Œæ•°éœ€ç”¨&lt;code&gt;SELECT COUNT(*)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Data_length&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨æ•°æ®çš„å¤§è‡´é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Index_length&lt;/code&gt;&lt;/strong&gt;ï¼šç´¢å¼•é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt;ï¼šå·²åˆ†é…ä½†æœªä½¿ç”¨çš„ç©ºé—´ï¼ˆ&lt;strong&gt;ç¢ç‰‡ç©ºé—´&lt;/strong&gt;ï¼‰ã€‚å¦‚æœå€¼å¾ˆå¤§ï¼Œè¡¨æ˜è¡¨å¯èƒ½æœ‰å¾ˆå¤šç¢ç‰‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨&lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;æ¥å›æ”¶ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨è¯­æ³•&lt;/strong&gt;ï¼š&lt;code&gt;SHOW TABLE STATUS FROM database_name [LIKE 'pattern']&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨åœºæ™¯ä¸æŠ€å·§"&gt;ğŸ› ï¸ å®é™…åº”ç”¨åœºæ™¯ä¸æŠ€å·§
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½è°ƒä¼˜è”åŠ¨ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ &lt;code&gt;SHOW STATUS&lt;/code&gt;ä¸­çš„ &lt;strong&gt;&lt;code&gt;Slow_queries&lt;/code&gt;&lt;/strong&gt; çªç„¶å¢é«˜æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—æ‰¾åˆ°å…·ä½“çš„æ…¢SQLï¼Œç„¶åç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;åˆ†æå…¶æ‰§è¡Œè®¡åˆ’ã€‚å¦‚æœå‘ç°ç–‘ä¼¼å…¨è¡¨æ‰«æï¼Œå¯ä»¥è¿›ä¸€æ­¥ç”¨ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æŸ¥çœ‹ç›¸å…³è¡¨çš„ &lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;&lt;/strong&gt; æ•°å’Œæ˜¯å¦æœ‰åˆé€‚çš„ç´¢å¼•ï¼ˆç»“åˆ &lt;code&gt;SHOW INDEX&lt;/code&gt;ï¼‰ï¼Œä»è€Œåˆ¤æ–­å…¨è¡¨æ‰«ææ˜¯å¦åˆç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´ç®¡ç†å’Œç»´æŠ¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®šæœŸæ‰§è¡Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æ¥ç›‘æ§ &lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt;ï¼ˆç¢ç‰‡ç©ºé—´ï¼‰å’Œ &lt;strong&gt;&lt;code&gt;Data_length&lt;/code&gt;/&lt;code&gt;Index_length&lt;/code&gt;&lt;/strong&gt;ï¼ˆæ•°æ®/ç´¢å¼•å¤§å°ï¼‰ã€‚å¦‚æœ &lt;code&gt;Data_free&lt;/code&gt;è¿‡å¤§ï¼Œæˆ–è€…æŸäº›è¡¨ä½“ç§¯å¢é•¿å¼‚å¸¸ï¼Œå¯ä»¥è§„åˆ’å¿…è¦çš„ç»´æŠ¤æ“ä½œï¼Œå¦‚ &lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;ï¼ˆä¼šé”è¡¨ï¼Œéœ€åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¹é‡è§„åˆ’&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;ä¸­çš„ &lt;strong&gt;&lt;code&gt;Connections&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;Max_used_connections&lt;/code&gt;&lt;/strong&gt; å¯ä»¥äº†è§£æœåŠ¡å™¨çš„è¿æ¥å‹åŠ›ï¼Œç»“åˆ &lt;code&gt;SHOW VARIABLES&lt;/code&gt;ä¸­çš„ &lt;code&gt;max_connections&lt;/code&gt;å‚æ•°ï¼Œè¯„ä¼°æ˜¯å¦éœ€è¦è°ƒæ•´æœ€å¤§è¿æ¥æ•°é™åˆ¶ã€‚åŒæ—¶ï¼Œ&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æä¾›çš„è¡¨å¤§å°ä¿¡æ¯æ˜¯è¿›è¡Œå­˜å‚¨å®¹é‡è§„åˆ’çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;å­—æ®µçš„å‡†ç¡®æ€§&lt;/strong&gt;ï¼šå¯¹äºInnoDBç­‰äº‹åŠ¡æ€§å­˜å‚¨å¼•æ“ï¼Œ&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;è¾“å‡ºçš„ &lt;code&gt;Rows&lt;/code&gt;æ˜¯&lt;strong&gt;ä¼°è®¡å€¼&lt;/strong&gt;ï¼Œå¯èƒ½ä¸å®é™…è¡Œæ•°æœ‰è¾ƒå¤§å‡ºå…¥ï¼ˆä¾‹å¦‚40%-50%çš„è¯¯å·®ï¼‰ã€‚è·å–ç²¾ç¡®è¡Œæ•°è¯·åŠ¡å¿…ä½¿ç”¨ &lt;code&gt;SELECT COUNT(*) FROM table_name&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™è¦æ±‚&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SHOW STATUS&lt;/code&gt;é€šå¸¸åªéœ€è¦&lt;code&gt;PROCESS&lt;/code&gt;æƒé™ã€‚æ‰§è¡Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;åˆ™éœ€è¦ç”¨æˆ·å¯¹ç›®æ ‡è¡¨æœ‰ç›¸åº”çš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡æ¯æ—¶æ•ˆæ€§&lt;/strong&gt;ï¼š&lt;code&gt;SHOW STATUS&lt;/code&gt;çš„å€¼æ˜¯ç´¯è®¡å€¼ï¼ŒæœåŠ¡å™¨é‡å¯åä¼šé‡ç½®ã€‚è€Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„ä¿¡æ¯åœ¨è¡¨æ²¡æœ‰å‘ç”ŸDDLæˆ–å¤§é‡DMLæ“ä½œæ—¶æ˜¯ç›¸å¯¹é™æ€çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;SHOW STATUS&lt;/code&gt;å…³æ³¨çš„æ˜¯æ•°æ®åº“ &lt;strong&gt;â€œå¿™ä¸å¿™â€ä»¥åŠâ€œæ€ä¹ˆå¿™â€&lt;/strong&gt; çš„æ€§èƒ½æµé‡é—®é¢˜ï¼Œè€Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;åˆ™å…³æ³¨æ•°æ®åº“ &lt;strong&gt;â€œé•¿ä»€ä¹ˆæ ·â€ä»¥åŠâ€œå å¤šå¤§åœ°æ–¹â€&lt;/strong&gt; çš„é™æ€ç»“æ„é—®é¢˜ã€‚å®ƒä»¬æ˜¯MySQLæ•°æ®åº“ç®¡ç†å’Œä¼˜åŒ–å·¥ä½œä¸­ç›¸è¾…ç›¸æˆçš„ä¸¤å¤§å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤ï¼&lt;/p&gt;
&lt;h2 id="delete--drop"&gt;DELETE &amp;amp; DROP
&lt;/h2&gt;&lt;p&gt;ã€‚MySQL åŒºåˆ† &lt;code&gt;DROP&lt;/code&gt;å’Œ &lt;code&gt;DELETE&lt;/code&gt;æ˜¯ä¸ºäº†åº”å¯¹ä¸¤ç§å®Œå…¨ä¸åŒå±‚é¢çš„â€œåˆ é™¤â€éœ€æ±‚ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;DELETE&lt;/code&gt;æ˜¯ä¸“æ³¨äºæ¸…ç†è¡¨å†…&lt;strong&gt;æ•°æ®&lt;/strong&gt;çš„æ“ä½œå‘˜ï¼Œè€Œ &lt;code&gt;DROP&lt;/code&gt;åˆ™æ˜¯è´Ÿè´£æ‹†é™¤æ•´ä¸ªæ•°æ®åº“&lt;strong&gt;ç»“æ„&lt;/strong&gt;çš„å·¥ç¨‹å¸ˆã€‚è¿™ä¸ªæ ¸å¿ƒåŒºåˆ«è¡ç”Ÿå‡ºäº†ä¸€ç³»åˆ—ä¸åŒçš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨å¯ä»¥è®©ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;code&gt;DELETE&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;DROP&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰&lt;/td&gt;
&lt;td&gt;DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ é™¤&lt;strong&gt;è¡Œæ•°æ®&lt;/strong&gt;ï¼Œä¿ç•™è¡¨ç»“æ„&lt;/td&gt;
&lt;td&gt;åˆ é™¤æ•´ä¸ª&lt;strong&gt;è¡¨å¯¹è±¡&lt;/strong&gt;ï¼ˆåŒ…æ‹¬ç»“æ„å’Œæ•°æ®ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å¯å›æ»š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ”¯æŒ&lt;/strong&gt;ï¼ˆåœ¨äº‹åŠ¡å†…å¯å›æ»šï¼‰&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸æ”¯æŒ&lt;/strong&gt;ï¼ˆè‡ªåŠ¨æäº¤ï¼Œä¸å¯å›æ»šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œé€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒæ…¢ï¼ˆé€è¡Œæ“ä½œï¼‰&lt;/td&gt;
&lt;td&gt;æå¿«ï¼ˆç›´æ¥åˆ é™¤å…ƒæ•°æ®å’Œæ–‡ä»¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼šè§¦å‘ &lt;code&gt;DELETE&lt;/code&gt;è§¦å‘å™¨&lt;/td&gt;
&lt;td&gt;ä¸ä¼šè§¦å‘ï¼ˆè¡¨éƒ½ä¸å­˜åœ¨äº†ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´é‡Šæ”¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä¸ç«‹å³é‡Šæ”¾ç©ºé—´ï¼ˆæ ‡è®°åˆ é™¤ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç«‹å³é‡Šæ”¾&lt;/strong&gt;ç£ç›˜ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;WHERE å­å¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ”¯æŒ&lt;/strong&gt;æ¡ä»¶åˆ é™¤&lt;/td&gt;
&lt;td&gt;âŒ ä¸æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£è®¾è®¡å“²å­¦"&gt;ğŸ’¡ æ·±å…¥ç†è§£è®¾è®¡å“²å­¦
&lt;/h3&gt;&lt;p&gt;è¿™ç§åŒºåˆ†èƒŒåä½“ç°äº†æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ¸…æ™°çš„åˆ†å±‚è®¾è®¡æ€æƒ³ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£åˆ†ç¦»ï¼ˆDML vs. DDLï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DELETE&lt;/code&gt;å±äº &lt;strong&gt;DML&lt;/strong&gt;ï¼Œä¸»è¦é¢å‘æ—¥å¸¸ä¸šåŠ¡æ“ä½œï¼Œæ¯”å¦‚â€œåˆ é™¤æŸä½ç”¨æˆ·çš„è®¢å•â€ã€‚è¿™ç±»æ“ä½œéœ€è¦ç²¾ç»†æ§åˆ¶å’Œå®‰å…¨æ€§ï¼Œå› æ­¤æ”¯æŒäº‹åŠ¡å›æ»šå’Œæ¡ä»¶ç­›é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DROP&lt;/code&gt;å±äº &lt;strong&gt;DDL&lt;/strong&gt;ï¼Œä¸»è¦é¢å‘æ•°æ®åº“ç»“æ„çš„å˜æ›´å’Œç®¡ç†ï¼Œæ¯”å¦‚â€œåºŸå¼ƒæ•´ä¸ªæ—§è®¢å•è¡¨â€ã€‚è¿™ç±»æ“ä½œå½±å“å·¨å¤§ï¼Œè¦æ±‚å¿«é€Ÿä¸”å†³ç»ï¼Œå› æ­¤æ‰§è¡Œåç«‹å³ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸èµ„æºç®¡ç†&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DELETE&lt;/code&gt;é€è¡Œåˆ é™¤å¹¶è®°å½•æ—¥å¿—ï¼Œæ˜¯ä¸ºäº†ä¿è¯&lt;strong&gt;äº‹åŠ¡å®‰å…¨&lt;/strong&gt;å’Œ&lt;strong&gt;å¯å›æ»š&lt;/strong&gt;ï¼Œä½†è¿™ä¼šç‰ºç‰²é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æµ·é‡æ•°æ®æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DROP&lt;/code&gt;ç›´æ¥åˆ é™¤è¡¨å¯¹åº”çš„å…ƒæ•°æ®ï¼ˆè¡¨å®šä¹‰ï¼‰å’Œç‰©ç†æ•°æ®æ–‡ä»¶ï¼Œæ“ä½œéå¸¸è½»ä¾¿å¿«é€Ÿï¼Œèƒ½ç«‹å³é‡Šæ”¾ç£ç›˜ç©ºé—´ä»¥ä¾›ä»–ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨è¾¹ç•Œ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†ç ´åæ€§æå¼ºçš„è¡¨åˆ é™¤æ“ä½œä¸å¸¸è§„çš„æ•°æ®åˆ é™¤æ“ä½œä»è¯­æ³•ä¸Šå½»åº•åˆ†å¼€ï¼Œç›¸å½“äºè®¾ç½®äº†ä¸€é“â€œå®‰å…¨é—¸â€ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢å› è¯¯æ“ä½œè€Œå¯¼è‡´çš„ç¾éš¾æ€§æ•°æ®ä¸¢å¤±ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœåªæƒ³æ¸…é™¤æ•°æ®å´è¯¯å†™äº†å‘½ä»¤å¯¼è‡´æ•´ä¸ªè¡¨æ¶ˆå¤±ï¼Œé‚£å°†æ˜¯å¤šä¹ˆå¯æ€•çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®é€‰æ‹©"&gt;ğŸ› ï¸ å¦‚ä½•æ­£ç¡®é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åŸºäºå®ƒä»¬çš„ä¸åŒç‰¹æ€§ï¼Œåœ¨å®é™…å·¥ä½œä¸­åº”éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;DELETE&lt;/code&gt;çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤éƒ¨åˆ†æ•°æ®&lt;/strong&gt;ï¼šéœ€è¦å¸¦ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶æŒ‡å®šè¦åˆ é™¤çš„è¡Œã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦äº‹åŠ¡å®‰å…¨&lt;/strong&gt;ï¼šåˆ é™¤æ“ä½œæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œå¯èƒ½éœ€è¦å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦è§¦å‘ä¸šåŠ¡é€»è¾‘&lt;/strong&gt;ï¼šè¡¨ä¸Šå®šä¹‰äº† &lt;code&gt;DELETE&lt;/code&gt;è§¦å‘å™¨ï¼Œéœ€è¦åœ¨åˆ æ•°æ®æ—¶è‡ªåŠ¨æ‰§è¡ŒæŸäº›æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;DROP&lt;/code&gt;çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½»åº•åˆ é™¤æ•´ä¸ªè¡¨&lt;/strong&gt;ï¼šå½“æŸä¸ªè¡¨è¿åŒå…¶ç»“æ„ã€æ•°æ®ã€ç´¢å¼•ç­‰å®Œå…¨ä¸å†éœ€è¦æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ•°æ®åº“ç»“æ„å˜æ›´&lt;/strong&gt;ï¼šé€šå¸¸åœ¨æ•°æ®è¿ç§»ã€ç³»ç»Ÿé‡æ„æˆ–æ¸…ç†åºŸå¼ƒæ¨¡å—æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âš ï¸ é‡è¦æé†’&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;DROP&lt;/code&gt;å‰&lt;strong&gt;åŠ¡å¿…ç¡®è®¤æœ‰å¯é å¤‡ä»½&lt;/strong&gt;ã€‚ç”±äºå®ƒä¸å¯å›æ»šï¼Œç”Ÿäº§ç¯å¢ƒæ“ä½œéœ€æåº¦è°¨æ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL åŒºåˆ† &lt;code&gt;DROP&lt;/code&gt;å’Œ &lt;code&gt;DELETE&lt;/code&gt;ï¼Œæœ¬è´¨ä¸Šæ˜¯æ•°æ®åº“ç³»ç»Ÿä¸ºäº†&lt;strong&gt;å…¼é¡¾æ—¥å¸¸ä¸šåŠ¡æ“ä½œçš„çµæ´»å®‰å…¨&lt;/strong&gt;ä¸&lt;strong&gt;æ•°æ®åº“ç»“æ„ç®¡ç†çš„æ•ˆç‡å†³æ–­&lt;/strong&gt;è€Œåšå‡ºçš„ç²¾å¿ƒè®¾è®¡ã€‚ç†è§£å®ƒä»¬çš„åº•å±‚åŒºåˆ«ï¼Œä¸ä»…èƒ½å¸®åŠ©ä½ åœ¨æ­£ç¡®çš„åœºæ™¯ä¸‹é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œæ›´æ˜¯ä¿éšœæ•°æ®å®‰å…¨ã€ç¼–å†™é«˜æ•ˆSQLçš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ MySQL çš„è®¾è®¡æ™ºæ…§ï¼&lt;/p&gt;
&lt;h2 id="sqlæ³¨å…¥"&gt;SQLæ³¨å…¥
&lt;/h2&gt;&lt;p&gt;SQLæ³¨å…¥æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å‘ç”Ÿï¼Œä¸»è¦æ˜¯å› ä¸ºåº”ç”¨ç¨‹åºå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ç›´æ¥æ‹¼æ¥åˆ°äº†SQLæŸ¥è¯¢è¯­å¥ä¸­ã€‚å¦‚æœè¿™äº›è¾“å…¥ä¸­åŒ…å«ç‰¹å®šçš„ç‰¹æ®Šå­—ç¬¦ï¼Œå°±å¯èƒ½æ”¹å˜åŸSQLè¯­å¥çš„æ„å›¾ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å…³é”®çš„ç¬¦å·å’Œå…³é”®è¯ï¼Œå¹¶è§£é‡Šäº†æ”»å‡»è€…å¦‚ä½•åˆ©ç”¨å®ƒä»¬ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å…³é”®ç¬¦å·/å…³é”®è¯&lt;/th&gt;
&lt;th&gt;åœ¨SQLæ³¨å…¥ä¸­çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­å¥æ“æ§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'&lt;/code&gt;(å•å¼•å·), &lt;code&gt;&amp;quot;&lt;/code&gt;(åŒå¼•å·)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»ˆæ­¢å­—ç¬¦ä¸²&lt;/strong&gt;ï¼šç”¨äºæå‰ç»“æŸåŸæŸ¥è¯¢ä¸­çš„å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿æ‹¼æ¥æ–°çš„æ¶æ„å‘½ä»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå¥æ‰§è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;;&lt;/code&gt;(åˆ†å·)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢åˆ†éš”&lt;/strong&gt;ï¼šç”¨äºåœ¨ä¸€æ¬¡æ•°æ®åº“è¯·æ±‚ä¸­æ‰§è¡Œå¤šæ¡SQLè¯­å¥ï¼ˆå †å æŸ¥è¯¢ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¨é‡Šç»•è¿‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--&lt;/code&gt;, &lt;code&gt;#&lt;/code&gt;, &lt;code&gt;/* */&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ³¨é‡Šå‰©ä½™éƒ¨åˆ†&lt;/strong&gt;ï¼šç”¨äºæ³¨é‡Šæ‰åŸå§‹æŸ¥è¯¢ä¸­å‰©ä½™çš„éƒ¨åˆ†ï¼Œä½¿æ³¨å…¥çš„è¯­å¥é¡ºåˆ©æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€»è¾‘ç¯¡æ”¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;OR&lt;/code&gt;, &lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ“çºµæŸ¥è¯¢é€»è¾‘&lt;/strong&gt;ï¼š&lt;code&gt;OR 1=1&lt;/code&gt;ç”¨äºç»•è¿‡è®¤è¯ï¼›&lt;code&gt;UNION&lt;/code&gt;ç”¨äºä»å…¶ä»–è¡¨çªƒå–æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;xp_cmdshell&lt;/code&gt;, &lt;code&gt;LOAD_FILE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œç³»ç»Ÿå‘½ä»¤/æ–‡ä»¶æ“ä½œ&lt;/strong&gt;ï¼šåˆ©ç”¨æ•°æ®åº“ç‰¹æ€§åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤æˆ–è¯»å–æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šé…ä¸ç©ºç™½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%&lt;/code&gt;, &lt;code&gt;_&lt;/code&gt;, ç©ºæ ¼, åˆ¶è¡¨ç¬¦, æ¢è¡Œç¬¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡ç³ŠåŒ¹é…æˆ–ç»•è¿‡è¿‡æ»¤&lt;/strong&gt;ï¼š&lt;code&gt;%&lt;/code&gt;å’Œ&lt;code&gt;_&lt;/code&gt;ç”¨äºç›²æ³¨ï¼›ç©ºç™½ç¬¦å¯èƒ½ç”¨äºæ··æ·†æ”»å‡»è½½è·ä»¥ç»•è¿‡ç®€å•è¿‡æ»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•æœ‰æ•ˆé˜²å¾¡sqlæ³¨å…¥"&gt;ğŸ›¡ï¸ å¦‚ä½•æœ‰æ•ˆé˜²å¾¡SQLæ³¨å…¥
&lt;/h3&gt;&lt;p&gt;äº†è§£æ”»å‡»æ‰‹æ®µæ˜¯ä¸ºäº†æ›´å¥½åœ°é˜²å¾¡ã€‚ä»…ä»…è¿‡æ»¤å­—ç¬¦åˆ—è¡¨æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæ”»å‡»è€…æ€»ä¼šæ‰¾åˆ°æ–°çš„ç»•è¿‡æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯æ›´æ ¹æœ¬çš„é˜²å¾¡æªæ–½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¦–é€‰æ–¹æ¡ˆï¼šå‚æ•°åŒ–æŸ¥è¯¢ï¼ˆé¢„ç¼–è¯‘è¯­å¥ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯&lt;strong&gt;æœ€æœ‰æ•ˆã€æœ€æ ¹æœ¬çš„é˜²å¾¡æ–¹æ³•&lt;/strong&gt;ã€‚å®ƒçš„åŸç†æ˜¯å°†SQLä»£ç å’Œç”¨æˆ·è¾“å…¥çš„æ•°æ®åˆ†ç¦»å¼€æ¥ã€‚åœ¨ç¼–å†™SQLè¯­å¥æ—¶ï¼Œä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚&lt;code&gt;?&lt;/code&gt;æˆ–&lt;code&gt;@parameterName&lt;/code&gt;ï¼‰ä»£æ›¿å˜é‡ã€‚æ•°æ®åº“ä¼šå…ˆç¼–è¯‘SQLè¯­å¥çš„ç»“æ„ï¼Œç„¶åå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®çº¯ç²¹å½“ä½œâ€œæ•°æ®â€æ¥å¤„ç†ï¼Œå³ä½¿å…¶ä¸­åŒ…å«æ¶æ„çš„SQLä»£ç ï¼Œä¹Ÿä¸ä¼šè¢«æ•°æ®åº“æ‰§è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¾…åŠ©æªæ–½ï¼šä¸¥æ ¼çš„è¾“å…¥éªŒè¯ä¸è½¬ä¹‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥éªŒè¯&lt;/strong&gt;ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„æ ¡éªŒï¼Œä¾‹å¦‚æ£€æŸ¥é•¿åº¦ã€ç±»å‹ã€æ ¼å¼æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å¯¹äºéæ–‡æœ¬å­—æ®µï¼ˆå¦‚æ•°å­—ã€æ—¥æœŸï¼‰ï¼Œåº”åœ¨æ¥æ”¶æ—¶å°±ç›´æ¥è½¬æ¢ä¸ºç›¸åº”çš„æ•°æ®ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦&lt;/strong&gt;ï¼šå¦‚æœç¡®å®éœ€è¦åœ¨æŸäº›åœºæ™¯ä¸‹æ‹¼æ¥SQLè¯­å¥ï¼Œå¿…é¡»å¯¹ç”¨æˆ·è¾“å…¥ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™é€šå¸¸è¢«è§†ä¸ºä¸€ç§æ¬¡è¦çš„è¡¥å……æ‰‹æ®µï¼Œå› ä¸ºä¸åŒæ•°æ®åº“çš„è½¬ä¹‰è§„åˆ™å¯èƒ½ä¸åŒï¼Œä¸”å®¹æ˜“å‡ºé”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€å°æƒé™åŸåˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºWebåº”ç”¨ç¨‹åºè¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨çš„è´¦æˆ·åˆ†é…&lt;strong&gt;æœ€å°å¿…é¡»çš„æƒé™&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåº”ç”¨åªéœ€è¦æŸ¥è¯¢æ•°æ®ï¼Œå°±ç»ä¸æˆäºˆå®ƒæ’å…¥ã€åˆ é™¤æˆ–ä¿®æ”¹çš„æƒé™ã€‚è¿™æ ·å³ä½¿å‘ç”Ÿäº†æ³¨å…¥æ”»å‡»ï¼Œä¹Ÿèƒ½å°†æŸå¤±é™åˆ°æœ€ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œé˜²å¾¡SQLæ³¨å…¥æ”»å‡»ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„é˜²å¾¡æŠ€æœ¯æˆ–æ”»å‡»æ‰‹æ³•æƒ³æœ‰æ›´æ·±å…¥çš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="sqlæ³¨å…¥-"&gt;SQLæ³¨å…¥ &amp;ndash;
&lt;/h2&gt;&lt;p&gt;åœ¨ SQL æ³¨å…¥ä¸­ï¼Œ&lt;code&gt;--&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;å•è¡Œæ³¨é‡Šç¬¦å·&lt;/strong&gt;ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯è®©æ•°æ®åº“å¿½ç•¥æ‰å®ƒä¹‹åçš„æ‰€æœ‰ SQL ä»£ç ï¼Œæ”»å‡»è€…åˆ©ç”¨è¿™ä¸€ç‰¹æ€§æ¥&lt;strong&gt;æ”¹å˜åŸæœ‰æŸ¥è¯¢çš„é€»è¾‘&lt;/strong&gt;ï¼Œä»è€Œç»•è¿‡å®‰å…¨æ£€æŸ¥ï¼ˆå¦‚å¯†ç éªŒè¯ï¼‰æˆ–æ‰§è¡Œæ¶æ„æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id="---åœ¨æ”»å‡»ä¸­çš„å·¥ä½œåŸç†"&gt;ğŸ’‰ &lt;code&gt;--&lt;/code&gt;åœ¨æ”»å‡»ä¸­çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…¸å‹çš„ç™»å½•ç»•è¿‡åœºæ™¯æ¥ç†è§£å®ƒçš„ä½œç”¨ã€‚å‡è®¾ä¸€ä¸ªç½‘ç«™çš„ç™»å½•æŸ¥è¯¢è¯­å¥æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username = &amp;#39;$username&amp;#39; AND password = &amp;#39;$password&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥çš„æœ¬æ„æ˜¯ï¼šåªæœ‰ç”¨æˆ·åå’Œå¯†ç éƒ½åŒ¹é…æ—¶ï¼Œæ‰è¿”å›ç”¨æˆ·æ•°æ®ï¼Œç™»å½•æ‰ä¼šæˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ”»å‡»è€…åœ¨ç”¨æˆ·åè¾“å…¥æ¡†ä¸­è¾“å…¥ &lt;code&gt;admin'--&lt;/code&gt;ï¼ˆæ³¨æ„å•å¼•å·å’Œç©ºæ ¼ï¼‰ï¼Œè€Œå¯†ç å¯ä»¥éšæ„è¾“å…¥ï¼Œæ¯”å¦‚ &lt;code&gt;123456&lt;/code&gt;ï¼Œé‚£ä¹ˆæœ€ç»ˆæ‹¼æ¥æˆçš„ SQL è¯­å¥ä¼šå˜æˆï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username = &amp;#39;admin&amp;#39;-- &amp;#39; AND password = &amp;#39;123456&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³é”®ç‚¹åœ¨è¿™é‡Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;admin'&lt;/code&gt;ä¸­çš„å•å¼•å·ï¼ˆ&lt;code&gt;'&lt;/code&gt;ï¼‰ç”¨äº&lt;strong&gt;é—­åˆ&lt;/strong&gt;åŸæŸ¥è¯¢ä¸­ç”¨æˆ·åå­—æ®µçš„å‰å¼•å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--&lt;/code&gt;åé¢çš„ç©ºæ ¼è‡³å…³é‡è¦ï¼Œå®ƒè¡¨ç¤ºæ³¨é‡Šå¼€å§‹ã€‚äºæ˜¯ï¼Œ&lt;strong&gt;&lt;code&gt;--&lt;/code&gt;ä¹‹åçš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬å¯†ç æ£€æŸ¥çš„æ¡ä»¶ &lt;code&gt;AND password = '123456'&lt;/code&gt;ï¼Œéƒ½ä¼šè¢«æ•°æ®åº“å¿½ç•¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€ç»ˆï¼Œæ•°æ®åº“å®é™…æ‰§è¡Œçš„æŸ¥è¯¢å˜ä¸ºäº†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username = &amp;#39;admin&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæŸ¥è¯¢åªæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦ä¸º &amp;ldquo;admin&amp;rdquo;ï¼Œå®Œå…¨ç»•è¿‡äº†å¯†ç éªŒè¯ã€‚åªè¦å­˜åœ¨ &amp;ldquo;admin&amp;rdquo; ç”¨æˆ·ï¼Œæ”»å‡»è€…å°±èƒ½æˆåŠŸç™»å½•ã€‚&lt;/p&gt;
&lt;h3 id="-ä½¿ç”¨æ—¶çš„å…³é”®ç»†èŠ‚"&gt;âš ï¸ ä½¿ç”¨æ—¶çš„å…³é”®ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;--&lt;/code&gt;è¿›è¡Œæ³¨å…¥æ—¶ï¼Œæœ‰å‡ ä¸ªç»†èŠ‚éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç©ºæ ¼æ˜¯å¿…é¡»çš„&lt;/strong&gt;ï¼šåœ¨æ ‡å‡† SQL è¯­æ³•ä¸­ï¼Œ&lt;code&gt;--&lt;/code&gt;åé¢å¿…é¡»&lt;strong&gt;è‡³å°‘è·Ÿä¸€ä¸ªç©ºæ ¼&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;--&lt;/code&gt;ï¼‰æ³¨é‡Šæ‰ä¼šç”Ÿæ•ˆã€‚å¦åˆ™ï¼Œå®ƒå¯èƒ½ä¸ä¼šè¢«æ­£ç¡®è¯†åˆ«ä¸ºæ³¨é‡Šç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;URL ä¸­çš„ç‰¹æ®Šå¤„ç†&lt;/strong&gt;ï¼šå½“æ³¨å…¥ç‚¹é€šè¿‡ URL çš„ GET å‚æ•°ä¼ é€’æ—¶ï¼Œæµè§ˆå™¨å¯èƒ½ä¸ä¼šæ­£ç¡®å¤„ç†ç©ºæ ¼æˆ– &lt;code&gt;#&lt;/code&gt;ç¬¦å·ã€‚è¿™æ—¶é€šå¸¸ä¼šè¿›è¡Œ URL ç¼–ç æ¥ç¡®ä¿æœ‰æ•ˆä¼ é€’ï¼š
&lt;ul&gt;
&lt;li&gt;ç©ºæ ¼ç¼–ç ä¸º &lt;code&gt;+&lt;/code&gt;æˆ– &lt;code&gt;%20&lt;/code&gt;ï¼Œå› æ­¤å¸¸å†™ä½œ &lt;code&gt;--+&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦ä¸€ä¸ªå¸¸è§çš„æ³¨é‡Šç¬¦ &lt;code&gt;#&lt;/code&gt;éœ€è¦ç¼–ç ä¸º &lt;code&gt;%23&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–å¸¸è§æ³¨é‡Šç¬¦å¯¹æ¯”"&gt;ğŸ”„ å…¶ä»–å¸¸è§æ³¨é‡Šç¬¦å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;é™¤äº† &lt;code&gt;--&lt;/code&gt;ï¼Œè¿˜æœ‰å…¶ä»–æ³¨é‡Šç¬¦ä¹Ÿè¢«ç”¨äº SQL æ³¨å…¥ï¼Œå°¤å…¶æ˜¯åœ¨ MySQL æ•°æ®åº“ä¸­ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨é‡Šç¬¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;å¸¸è§ä½¿ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--&lt;/code&gt;(&lt;strong&gt;åŒç ´æŠ˜å·&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;å•è¡Œæ³¨é‡Šï¼Œ&lt;strong&gt;åé¢éœ€è·Ÿç©ºæ ¼&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;é€šç”¨æ€§è¾ƒå¼ºï¼Œå¤šç§æ•°æ®åº“ï¼ˆå¦‚ SQL Server, Oracle, PostgreSQLï¼‰æ”¯æŒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;#&lt;/code&gt;(&lt;strong&gt;äº•å·&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;å•è¡Œæ³¨é‡Šï¼Œåé¢æ— éœ€ç©ºæ ¼ã€‚&lt;/td&gt;
&lt;td&gt;ä¸»è¦ç”¨äº &lt;strong&gt;MySQL&lt;/strong&gt;ã€‚åœ¨ URL ä¸­éœ€ç¼–ç ä¸º &lt;code&gt;%23&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;/*...*/&lt;/code&gt;(&lt;strong&gt;æ–œæ æ˜Ÿå·&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;å¤šè¡Œï¼ˆå—ï¼‰æ³¨é‡Šã€‚&lt;/td&gt;
&lt;td&gt;å¯ç”¨äºæ³¨é‡Šæ‰ä¸€å¤§æ®µä»£ç ï¼Œä¹Ÿå¯ç”¨äºç»•è¿‡æŸäº›è¿‡æ»¤ï¼ˆå¦‚å†…è”æ³¨é‡Šï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é˜²èŒƒ-sql-æ³¨å…¥"&gt;ğŸ›¡ï¸ å¦‚ä½•é˜²èŒƒ SQL æ³¨å…¥
&lt;/h3&gt;&lt;p&gt;ç†è§£æ”»å‡»æ‰‹æ®µæ˜¯ä¸ºäº†æ›´å¥½åœ°é˜²å¾¡ã€‚è¦æœ‰æ•ˆé˜²èŒƒ SQL æ³¨å…¥ï¼Œåº”é‡‡å–ä»¥ä¸‹æªæ–½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼ˆPrepared Statementsï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æœ‰æ•ˆã€æœ€æ ¹æœ¬çš„é˜²å¾¡æ–¹æ³•ã€‚å®ƒé€šè¿‡å°† SQL ä»£ç å’Œç”¨æˆ·è¾“å…¥çš„æ•°æ®åˆ†ç¦»å¼€æ¥ï¼Œå³ä½¿ç”¨æˆ·è¾“å…¥ä¸­åŒ…å«äº† &lt;code&gt;--&lt;/code&gt;è¿™æ ·çš„ç‰¹æ®Šç¬¦å·ï¼Œæ•°æ®åº“ä¹Ÿåªä¼šå°†å…¶è§†ä¸ºæ™®é€šæ•°æ®è€Œé SQL æŒ‡ä»¤çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„æ£€éªŒå’Œè¿‡æ»¤&lt;/strong&gt;ï¼šè™½ç„¶ä¸èƒ½å®Œå…¨ä¾èµ–ï¼Œä½†ä½œä¸ºè¾…åŠ©æ‰‹æ®µï¼Œå¯¹ç”¨æˆ·è¾“å…¥çš„é•¿åº¦ã€ç±»å‹ã€æ ¼å¼è¿›è¡Œæ ¡éªŒï¼Œå¹¶è¿‡æ»¤æˆ–è½¬ä¹‰ä¸€äº›é«˜å±å­—ç¬¦ï¼ˆå¦‚å•å¼•å·ï¼‰ï¼Œå¯ä»¥å¢åŠ æ”»å‡»éš¾åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éµå¾ªæœ€å°æƒé™åŸåˆ™&lt;/strong&gt;ï¼šä¸ºæ•°æ®åº“æ“ä½œè´¦æˆ·åˆ†é…ä»…èƒ½æ»¡è¶³å…¶åŠŸèƒ½æ‰€éœ€çš„æœ€å°æƒé™ï¼Œé¿å…ä½¿ç”¨å…·æœ‰è¶…çº§ç”¨æˆ·æƒé™çš„è´¦æˆ·è¿æ¥æ•°æ®åº“ï¼Œè¿™æ ·å³ä½¿è¢«æ³¨å…¥ï¼Œä¹Ÿèƒ½å°†æŸå¤±é™åˆ°æœ€ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ SQL æ³¨å…¥ä¸­çš„ &lt;code&gt;--&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹å…¶ä»–å®‰å…¨ç›¸å…³çš„è¯é¢˜æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="--"&gt;&amp;rsquo; &amp;amp; &amp;quot;
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå¯¹äºå­—ç¬¦ä¸²ï¼Œ&lt;strong&gt;å®˜æ–¹æ¨èå¹¶é¦–é€‰ä½¿ç”¨å•å¼•å·ï¼ˆ&amp;rsquo;ï¼‰&lt;/strong&gt;ã€‚è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹åŒå¼•å·ï¼ˆ&amp;quot;ï¼‰ä¹Ÿå¯èƒ½è¢«æ¥å—ï¼Œä½†ä½¿ç”¨å•å¼•å·æ˜¯æ›´è§„èŒƒã€æ›´å®‰å…¨çš„é€‰æ‹©ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº†å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å•å¼•å· ( &amp;rsquo; )&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŒå¼•å· ( &amp;quot; )&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºå®šä¹‰&lt;strong&gt;å­—ç¬¦ä¸²å­—é¢é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ¨¡å¼ä¸‹ï¼Œä¸åº”ç”¨äºå­—ç¬¦ä¸²ï¼›åœ¨&lt;code&gt;ANSI_QUOTES&lt;/code&gt;æ¨¡å¼ä¸‹ï¼Œç”¨äºå¼•ç”¨&lt;strong&gt;æ ‡è¯†ç¬¦&lt;/strong&gt;ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SQLæ ‡å‡†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¬¦åˆ&lt;/strong&gt;SQLæ ‡å‡†&lt;/td&gt;
&lt;td&gt;ä¸ç¬¦åˆSQLæ ‡å‡†ï¼ˆå½“ç”¨äºå­—ç¬¦ä¸²æ—¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œæ‰€æœ‰éµå¾ªæ ‡å‡†çš„æ•°æ®åº“éƒ½æ”¯æŒ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œåœ¨å…¶ä»–æ•°æ®åº“ï¼ˆå¦‚PostgreSQLï¼‰ä¸­åŒå¼•å·ç”¨äºæ ‡è¯†ç¬¦ï¼Œå¯èƒ½å¯¼è‡´å…¼å®¹æ€§é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èç¨‹åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®˜æ–¹æ¨è&lt;/strong&gt;ï¼Œé¦–é€‰æ–¹å¼&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ¨è&lt;/strong&gt;ç”¨äºåŒ…è£¹å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•é¦–é€‰å•å¼•å·"&gt;ğŸ’¡ ä¸ºä½•é¦–é€‰å•å¼•å·ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å•å¼•å·ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦åŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¦åˆ SQL æ ‡å‡†&lt;/strong&gt;ï¼šMySQL éµå¾ª SQL æ ‡å‡†ï¼Œè¯¥æ ‡å‡†è§„å®šå­—ç¬¦ä¸²å­—é¢é‡åº”ç”±å•å¼•å·æ‹¬èµ·æ¥ã€‚ä½¿ç”¨å•å¼•å·å¯ä»¥ç¡®ä¿ä½ çš„ä»£ç ä¸æ ‡å‡†ä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´å¥½çš„å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼šå¦‚æœä½ ç¼–å†™çš„ SQL ä»£ç å¯èƒ½éœ€è¦è¿ç§»åˆ°å…¶ä»–æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ PostgreSQLã€SQL Serverï¼‰ï¼ŒåšæŒä½¿ç”¨å•å¼•å·å¯ä»¥é¿å…å› å¼•å·ä½¿ç”¨ä¹ æƒ¯ä¸åŒè€Œå¼•å‘çš„è¯­æ³•é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é…ç½®ä¾èµ–&lt;/strong&gt;ï¼šMySQL çš„è¡Œä¸ºå— &lt;code&gt;sql_mode&lt;/code&gt;è®¾ç½®çš„å½±å“ã€‚å¦‚æœå¯ç”¨äº† &lt;code&gt;ANSI_QUOTES&lt;/code&gt;æ¨¡å¼ï¼ŒåŒå¼•å·çš„åŠŸèƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä»å¯ä»¥è¡¨ç¤ºå­—ç¬¦ä¸²å˜ä¸ºåªèƒ½ç”¨äºå¼•ç”¨æ ‡è¯†ç¬¦ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰ã€‚ä½¿ç”¨å•å¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²å¯ä»¥é¿å…å› æ¨¡å¼è®¾ç½®ä¸åŒè€Œå¯¼è‡´çš„æ„å¤–é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å•å¼•å·å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰ä¸åµŒå¥—"&gt;ğŸ› ï¸ å•å¼•å·å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰ä¸åµŒå¥—
&lt;/h3&gt;&lt;p&gt;å½“å­—ç¬¦ä¸²æœ¬èº«åŒ…å«å•å¼•å·æ—¶ï¼Œéœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½¬ä¹‰å­—ç¬¦&lt;/strong&gt;ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨å•å¼•å·å‰ä½¿ç”¨åæ–œæ ï¼ˆ``ï¼‰è¿›è¡Œè½¬ä¹‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT &amp;#39;It\&amp;#39;s a nice day.&amp;#39;; -- è¾“å‡ºï¼šIt&amp;#39;s a nice day.
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒå†™å•å¼•å·&lt;/strong&gt;ï¼šä¹Ÿå¯ä»¥é€šè¿‡è¿ç»­ä¹¦å†™ä¸¤ä¸ªå•å¼•å·æ¥è¡¨ç¤ºä¸€ä¸ªå•å¼•å·å­—ç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT &amp;#39;It&amp;#39;&amp;#39;s a nice day.&amp;#39;; -- è¾“å‡ºï¼šIt&amp;#39;s a nice day.
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå¦‚æœéœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«åŒå¼•å·ï¼Œç”±äºå­—ç¬¦ä¸²æ˜¯ç”±å•å¼•å·æ‹¬èµ·æ¥çš„ï¼Œå†…éƒ¨çš„æ™®é€šåŒå¼•å·é€šå¸¸ä¸éœ€è¦è½¬ä¹‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT &amp;#39;She said, &amp;#34;Hello!&amp;#34;&amp;#39;; -- è¾“å‡ºï¼šShe said, &amp;#34;Hello!&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„åå¼•å·çš„åŒºåˆ«"&gt;âš ï¸ æ³¨æ„åå¼•å·çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;åŠ¡å¿…æ³¨æ„ï¼Œåå¼•å·ï¼ˆ &lt;strong&gt;`&lt;/strong&gt; ï¼‰ä¸å•åŒå¼•å·&lt;strong&gt;å®Œå…¨ä¸åŒ&lt;/strong&gt;ã€‚åå¼•å·ç”¨äºå¼•ç”¨æ•°æ®åº“ã€è¡¨ã€åˆ—ç­‰&lt;strong&gt;æ ‡è¯†ç¬¦&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯å½“æ ‡è¯†ç¬¦æ˜¯MySQLçš„ä¿ç•™å…³é”®å­—æˆ–åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ï¼‰æ—¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å¦‚æœæœ‰ä¸€ä¸ªåˆ—åå«åš &amp;#34;select&amp;#34;ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå¿…é¡»ç”¨åå¼•å·æ‹¬èµ·æ¥
SELECT `select` FROM `some table`;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸å®è·µå»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ MySQL ä¸­å¤„ç†å­—ç¬¦ä¸²æ—¶ï¼Œ&lt;strong&gt;åšæŒä½¿ç”¨å•å¼•å·&lt;/strong&gt;æ˜¯æœ€ä½³å®è·µã€‚è¿™èƒ½ç¡®ä¿ä½ çš„ä»£ç ç¬¦åˆæ ‡å‡†ã€å…·æœ‰è‰¯å¥½çš„å¯ç§»æ¤æ€§ï¼Œå¹¶ä¸”ä¸æ˜“å—æ•°æ®åº“é…ç½®å˜åŒ–çš„å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;è®°ä½è¿™ä¸ªç®€å•çš„åŸåˆ™ï¼š&lt;strong&gt;å­—ç¬¦ä¸²ç”¨å•å¼•å·ï¼ˆ&amp;rsquo;ï¼‰ï¼Œæ ‡è¯†ç¬¦ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰å¿…è¦æ—¶ç”¨åå¼•å·ï¼ˆ`ï¼‰ï¼Œé¿å…ä½¿ç”¨åŒå¼•å·ï¼ˆ&amp;quot;ï¼‰è¡¨ç¤ºå­—ç¬¦ä¸²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ MySQL ä¸­å¼•å·çš„ä½¿ç”¨ï¼&lt;/p&gt;
&lt;h3 id="update-join"&gt;UPDATE JOIN
&lt;/h3&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;UPDATE JOIN&lt;/code&gt;è¯­å¥æ˜¯ä¸€ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³è”è¡¨çš„æ•°æ®æ¥æ›´æ–°ç›®æ ‡è¡¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„æ ¸å¿ƒè¦ç‚¹ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸è¯­æ³•"&gt;ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;UPDATE JOIN&lt;/strong&gt; çš„æœ¬è´¨æ˜¯å°†æ ‡å‡†çš„ &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ä¸ &lt;code&gt;JOIN&lt;/code&gt;æ“ä½œç»“åˆã€‚å½“ä½ éœ€è¦ä¾æ®å¦ä¸€å¼ è¡¨ä¸­çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå‚è€ƒå€¼ã€çŠ¶æ€æˆ–è®¡ç®—ç»“æœï¼‰æ¥ä¿®æ”¹æŸå¼ è¡¨çš„æ•°æ®æ—¶ï¼Œå®ƒå°±èƒ½å¤§æ˜¾èº«æ‰‹ã€‚è¿™æ ·åšä¸ä»…èƒ½&lt;strong&gt;æå‡æ“ä½œæ•ˆç‡&lt;/strong&gt;ï¼ˆä¸€æ¡è¯­å¥å®Œæˆæ“ä½œï¼‰ï¼Œè¿˜èƒ½&lt;strong&gt;ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§&lt;/strong&gt;ï¼Œé¿å…äº†åœ¨åº”ç”¨å±‚è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢å’Œæ›´æ–°çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE ç›®æ ‡è¡¨
[JOINç±»å‹] JOIN å…³è”è¡¨ ON è¿æ¥æ¡ä»¶
SET ç›®æ ‡è¡¨.åˆ—å = å…³è”è¡¨.åˆ—åæˆ–å€¼è¡¨è¾¾å¼
[WHERE è¿‡æ»¤æ¡ä»¶];
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-join-ç±»å‹é€‰æ‹©inner-join-ä¸-left-join"&gt;ğŸ“Š JOIN ç±»å‹é€‰æ‹©ï¼šINNER JOIN ä¸ LEFT JOIN
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©æ­£ç¡®çš„ &lt;code&gt;JOIN&lt;/code&gt;ç±»å‹æ˜¯æˆåŠŸä½¿ç”¨ &lt;code&gt;UPDATE JOIN&lt;/code&gt;çš„å…³é”®ï¼Œå®ƒç›´æ¥å†³å®šäº†å“ªäº›è¡Œä¼šè¢«æ›´æ–°ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JOIN ç±»å‹&lt;/th&gt;
&lt;th&gt;æ›´æ–°ç›®æ ‡&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;INNER JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªæ›´æ–°&lt;strong&gt;ä¸¤ä¸ªè¡¨ä¸­èƒ½åŒ¹é…è¿æ¥æ¡ä»¶&lt;/strong&gt;çš„è¡Œã€‚&lt;/td&gt;
&lt;td&gt;æ ¹æ®æœ‰æ•ˆè®¢å•æ›´æ–°å®¢æˆ·çŠ¶æ€ï¼›æ ¹æ®ç»©æ•ˆè¡¨è°ƒæ•´å‘˜å·¥è–ªèµ„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LEFT JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´æ–°&lt;strong&gt;å·¦è¡¨ï¼ˆç›®æ ‡è¡¨ï¼‰çš„æ‰€æœ‰è¡Œ&lt;/strong&gt;ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰åŒ¹é…ã€‚é€šå¸¸é€šè¿‡ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ç­›é€‰å³è¡¨ä¸º &lt;code&gt;NULL&lt;/code&gt;çš„è¡Œè¿›è¡Œç‰¹å®šæ›´æ–°ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ºæ–°å‘˜å·¥ï¼ˆå…¶ä¿¡æ¯å°šæœªå½•å…¥å®Œæ•´å‚è€ƒè¡¨ï¼‰è®¾ç½®é»˜è®¤å€¼æˆ–ç»Ÿä¸€è°ƒæ•´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®ç”¨ç¤ºä¾‹è¯¦è§£"&gt;ğŸ› ï¸ å®ç”¨ç¤ºä¾‹è¯¦è§£
&lt;/h3&gt;&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªåœºæ™¯æ¥åŠ æ·±ç†è§£ã€‚&lt;/p&gt;
&lt;h4 id="ä½¿ç”¨-inner-join-è°ƒæ•´è–ªèµ„"&gt;ä½¿ç”¨ INNER JOIN è°ƒæ•´è–ªèµ„
&lt;/h4&gt;&lt;p&gt;å‡è®¾æœ‰ &lt;code&gt;employees&lt;/code&gt;è¡¨ï¼ˆå‘˜å·¥è¡¨ï¼‰å’Œ &lt;code&gt;merits&lt;/code&gt;è¡¨ï¼ˆç»©æ•ˆè¯„çº§å¯¹åº”æ¶¨è–ªç™¾åˆ†æ¯”è¡¨ï¼‰ã€‚ç°åœ¨è¦æ ¹æ®æ¯ä½å‘˜å·¥çš„ç»©æ•ˆï¼ŒæŒ‰ &lt;code&gt;merits&lt;/code&gt;è¡¨è§„å®šçš„ç™¾åˆ†æ¯”æ¶¨è–ªã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE employees
INNER JOIN merits ON employees.performance = merits.performance
SET salary = salary + salary * percentage;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥åªä¼šæ›´æ–°é‚£äº›åœ¨ &lt;code&gt;merits&lt;/code&gt;è¡¨ä¸­æœ‰å¯¹åº”ç»©æ•ˆè®°å½•çš„å‘˜å·¥è–ªèµ„ã€‚&lt;/p&gt;
&lt;h4 id="ä½¿ç”¨-left-join-å¤„ç†æ–°å‘˜å·¥"&gt;ä½¿ç”¨ LEFT JOIN å¤„ç†æ–°å‘˜å·¥
&lt;/h4&gt;&lt;p&gt;å…¬å¸æ–°å…¥èŒä¸¤åå‘˜å·¥ï¼Œä»–ä»¬çš„ç»©æ•ˆè¯„çº§ï¼ˆ&lt;code&gt;performance&lt;/code&gt;ï¼‰å°šæœªè¯„å®šï¼Œä¸º &lt;code&gt;NULL&lt;/code&gt;ã€‚å› æ­¤ï¼Œä»–ä»¬åœ¨ &lt;code&gt;merits&lt;/code&gt;è¡¨ä¸­æ²¡æœ‰å¯¹åº”è®°å½•ã€‚å¦‚æœåªæƒ³ç»™è¿™äº›æ–°å‘˜å·¥ç»Ÿä¸€æ¶¨è–ª 1.5%ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE employees
LEFT JOIN merits ON employees.performance = merits.performance
SET salary = salary + salary * 0.015
WHERE merits.percentage IS NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;WHERE merits.percentage IS NULL&lt;/code&gt;æ¡ä»¶ç²¾å‡†åœ°ç­›é€‰å‡ºäº†å·¦è¡¨ä¸­æœ‰è€Œå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œå³æ–°å‘˜å·¥ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®æ›´æ–°ç›®æ ‡&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;UPDATE&lt;/code&gt;å­å¥åç›´æ¥æŒ‡å®šè¦æ›´æ–°çš„ä¸»è¡¨ã€‚è™½ç„¶è¯­æ³•å…è®¸æ›´æ–°å…³è”è¡¨ï¼Œä½†ä¸ºäº†æ¸…æ™°å’Œé¿å…æ„å¤–ï¼Œå»ºè®®&lt;strong&gt;ä¸€æ¬¡åªæ›´æ–°ä¸€å¼ è¡¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤‡ä»½å’Œæµ‹è¯•&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œä»»ä½• &lt;code&gt;UPDATE JOIN&lt;/code&gt;æ“ä½œï¼Œå°¤å…¶æ˜¯å½±å“å¤§é‡æ•°æ®çš„æ“ä½œä¹‹å‰ï¼Œ&lt;strong&gt;åŠ¡å¿…å¤‡ä»½ç›¸å…³æ•°æ®&lt;/strong&gt;ã€‚æœ€å¥½åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯ SQL è¯­å¥çš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å–„ç”¨ WHERE å­å¥&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥å¯ä»¥ç²¾ç¡®æ§åˆ¶éœ€è¦æ›´æ–°çš„è¡ŒèŒƒå›´ã€‚å¦‚æœæ²¡æœ‰ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ï¼Œå¯èƒ½ä¼šæ›´æ–°æ‰€æœ‰åŒ¹é…è¿æ¥æ¡ä»¶çš„è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿è¿æ¥æ¡ä»¶å‡†ç¡®&lt;/strong&gt;ï¼šè¿æ¥æ¡ä»¶ï¼ˆ&lt;code&gt;ON&lt;/code&gt;å­å¥ï¼‰çš„å‡†ç¡®æ€§è‡³å…³é‡è¦ã€‚ä¸æ­£ç¡®çš„è¿æ¥æ¡ä»¶å¯èƒ½å¯¼è‡´æ•°æ®è¢«é”™è¯¯æ›´æ–°ï¼Œç”šè‡³é€ æˆæ•°æ®æ··ä¹±ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ’ æ€»ç»“ä¸æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œ&lt;code&gt;UPDATE JOIN&lt;/code&gt;æ˜¯å¤„ç†è·¨è¡¨æ•°æ®æ›´æ–°çš„åˆ©å™¨ï¼Œå®ƒèƒ½è®©ä½ åœ¨æ•°æ®åº“å±‚é¢é«˜æ•ˆã€åŸå­æ€§åœ°å®Œæˆå¤æ‚çš„æ•°æ®åŒæ­¥é€»è¾‘ã€‚æ ¸å¿ƒåœ¨äºæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æ­£ç¡®çš„ &lt;code&gt;JOIN&lt;/code&gt;ç±»å‹ï¼ˆ&lt;code&gt;INNER JOIN&lt;/code&gt;ç”¨äºæ›´æ–°æœ‰åŒ¹é…é¡¹çš„æ•°æ®ï¼Œ&lt;code&gt;LEFT JOIN&lt;/code&gt;å¸¸ç”¨äºæ›´æ–°æ— åŒ¹é…é¡¹çš„æ•°æ®ï¼‰ï¼Œå¹¶å§‹ç»ˆæ³¨æ„æ“ä½œå®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº† &lt;code&gt;UPDATE JOIN&lt;/code&gt;ï¼Œæœ‰æ—¶ä¹Ÿå¯ä»¥é€šè¿‡å­æŸ¥è¯¢æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE employees
SET salary = salary * 1.05
WHERE performance IN (SELECT performance FROM merits WHERE percentage &amp;gt; 0.03);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†é€šå¸¸ï¼Œ&lt;code&gt;JOIN&lt;/code&gt;æ–¹å¼åœ¨å¯è¯»æ€§å’Œæ€§èƒ½ä¸Šæ›´å…·ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨ MySQL çš„ &lt;code&gt;UPDATE JOIN&lt;/code&gt;ï¼å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="select-into"&gt;SELECT INTO
&lt;/h2&gt;&lt;p&gt;SQL &lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ•°æ®æ“ä½œå·¥å…·ï¼Œä¸»è¦ç”¨äº&lt;strong&gt;å¿«é€Ÿåˆ›å»ºæ–°è¡¨å¹¶åŒæ—¶æ’å…¥æ¥è‡ªæŸ¥è¯¢ç»“æœçš„æ•°æ®&lt;/strong&gt;ã€‚ä¸‹é¢ä¸ºæ‚¨è¯¦ç»†è§£æå…¶è¯­æ³•ã€åœºæ™¯ã€æ³¨æ„äº‹é¡¹ä»¥åŠä¸ç›¸å…³è¯­å¥çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•ä¸æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ” è¯­æ³•ä¸æ ¸å¿ƒåŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;çš„æ ¸å¿ƒåœ¨äºå°†æŸ¥è¯¢ç»“æœç›´æ¥å­˜å…¥ä¸€ä¸ªæ–°è¡¨ä¸­ã€‚å…¶åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column1, column2, ...
INTO new_table_name [IN externaldatabase]
FROM source_table
[WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;new_table_name&lt;/code&gt;&lt;/strong&gt;ï¼šè¦åˆ›å»ºçš„&lt;strong&gt;æ–°è¡¨çš„åç§°&lt;/strong&gt;ã€‚å¦‚æœè¯¥è¡¨å·²å­˜åœ¨ï¼Œæ‰§è¡Œè¯­å¥é€šå¸¸ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;externaldatabase&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šå°†æ–°è¡¨åˆ›å»ºåœ¨&lt;strong&gt;å¦ä¸€ä¸ªæ•°æ®åº“&lt;/strong&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;source_table&lt;/code&gt;&lt;/strong&gt;ï¼šæ•°æ®æ¥æºçš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WHERE condition&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰æ¡ä»¶ï¼Œç”¨äº&lt;strong&gt;ç­›é€‰éœ€è¦å¤åˆ¶çš„æ•°æ®&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‚¨å¯ä»¥é€‰æ‹©å¤åˆ¶æ‰€æœ‰åˆ—ï¼ˆä½¿ç”¨ &lt;code&gt;SELECT *&lt;/code&gt;ï¼‰æˆ–ä»…å¤åˆ¶æŒ‡å®šçš„åˆ—ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒä½¿ç”¨ &lt;code&gt;JOIN&lt;/code&gt;å­å¥æ•´åˆå¤šä¸ªè¡¨çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸-insert-into-çš„åŒºåˆ«"&gt;âš–ï¸ ä¸ INSERT INTO çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;ç†è§£ &lt;code&gt;SELECT INTO&lt;/code&gt;ä¸ &lt;code&gt;INSERT INTO&lt;/code&gt;çš„åŒºåˆ«è‡³å…³é‡è¦ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„ä¸»è¦å·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SELECT INTO&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;INSERT INTO&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨åˆ›å»º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨åˆ›å»º&lt;/strong&gt;æ–°è¡¨&lt;/td&gt;
&lt;td&gt;ç›®æ ‡è¡¨å¿…é¡»&lt;strong&gt;å·²å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ç»“æ„æ¥æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤åˆ¶æºè¡¨çš„ç»“æ„ï¼ˆå¯é€‰æ‹©ç‰¹å®šåˆ—ï¼‰&lt;/td&gt;
&lt;td&gt;ä¾èµ–é¢„å…ˆå®šä¹‰å¥½çš„è¡¨ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹ç®€å•ï¼Œé€‚åˆå¿«é€Ÿå¤åˆ¶å’Œæ•°æ®è¿ç§»&lt;/td&gt;
&lt;td&gt;æ›´çµæ´»ï¼Œæ”¯æŒå¤æ‚æ’å…¥ï¼ˆå¦‚æ’å…¥å¸¸é‡å€¼ã€å¤šè¡¨è”åˆæŸ¥è¯¢ç»“æœï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿«é€Ÿå¤‡ä»½ã€åˆ›å»ºæ•°æ®å­é›†ã€ä¸€æ¬¡æ€§æ•°æ®è¿ç§»&lt;/td&gt;
&lt;td&gt;å‘å·²æœ‰è¡¨è¿½åŠ æ•°æ®ï¼ŒåŒ…æ‹¬å•è¡Œæ’å…¥å’Œæ‰¹é‡æ’å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;SELECT INTO&lt;/code&gt;æ˜¯ &lt;strong&gt;â€œå»ºè¡¨å¹¶æ’å…¥â€ä¸€æ­¥å®Œæˆ&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;INSERT INTO&lt;/code&gt;æ˜¯ &lt;strong&gt;â€œå…ˆæœ‰è¡¨ï¼Œåæ’å…¥â€&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½ä¸å½’æ¡£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ &lt;code&gt;SELECT INTO&lt;/code&gt;æœ€å…¸å‹çš„ç”¨é€”ã€‚æ‚¨å¯ä»¥å¿«é€Ÿä¸ºé‡è¦çš„ä¸šåŠ¡è¡¨åˆ›å»ºä¸€ä¸ªåœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤‡ä»½å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ›å»º &amp;#39;orders&amp;#39; è¡¨çš„å®Œæ•´å¤‡ä»½
SELECT * INTO orders_backup_20241001 FROM orders;
-- åªå½’æ¡£å»å¹´çš„æ•°æ®
SELECT * INTO orders_archive_2024
FROM orders
WHERE order_date BETWEEN &amp;#39;2024-01-01&amp;#39; AND &amp;#39;2024-12-31&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæµ‹è¯•æˆ–åˆ†æå­é›†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æ‚¨éœ€è¦ä»åºå¤§çš„ç”Ÿäº§è¡¨ä¸­æå–ä¸€éƒ¨åˆ†æ•°æ®ç”¨äºæµ‹è¯•æˆ–åˆ†æï¼Œè€Œä¸æƒ³å½±å“åŸè¡¨æ—¶ï¼Œ&lt;code&gt;SELECT INTO&lt;/code&gt;éå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æå–æ´»è·ƒç”¨æˆ·æ•°æ®åˆ›å»ºåˆ†ææ ·æœ¬
SELECT user_id, username, email INTO analysis_active_users
FROM users
WHERE last_login_date &amp;gt; &amp;#39;2024-09-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¨æ•°æ®åº“è¿ç§»æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨ &lt;code&gt;IN&lt;/code&gt;å­å¥ï¼Œå¯ä»¥è½»æ¾åœ°å°†æ•°æ®ä»ä¸€ä¸ªæ•°æ®åº“è¿ç§»åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†å½“å‰æ•°æ®åº“çš„ &amp;#39;products&amp;#39; è¡¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ &amp;#39;BackupDB&amp;#39; ä¸­
SELECT * INTO products IN &amp;#39;BackupDB.mdb&amp;#39; FROM products;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ–°è¡¨å¿…é¡»ä¸å­˜åœ¨&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SELECT INTO&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;new_table_name&lt;/code&gt;æ‰€æŒ‡å®šçš„è¡¨ä¸èƒ½å·²ç»å­˜åœ¨ï¼Œå¦åˆ™ä¼šåˆ›å»ºå¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¤åˆ¶ç´¢å¼•å’Œçº¦æŸ&lt;/strong&gt;ï¼šæ–°è¡¨åªä¼šå¤åˆ¶æºè¡¨çš„åŸºæœ¬åˆ—ç»“æ„å’Œæ•°æ®ï¼Œä½†&lt;strong&gt;ä¸»é”®ã€ç´¢å¼•ã€é»˜è®¤å€¼ã€è‡ªå¢å±æ€§ç­‰çº¦æŸé€šå¸¸ä¸ä¼šè¢«å¤åˆ¶&lt;/strong&gt;ã€‚æ–°è¡¨æ˜¯ä¸€ä¸ªâ€œè£¸â€çš„æ•°æ®å‰¯æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šå¯¹äºæµ·é‡æ•°æ®ï¼Œ&lt;code&gt;SELECT INTO&lt;/code&gt;æ“ä½œå¯èƒ½ä¼šå¯¹ç³»ç»Ÿèµ„æºé€ æˆè¾ƒå¤§å‹åŠ›å¹¶äº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚åœ¨å¤„ç†å¤§æ•°æ®é‡æ—¶éœ€è°¨æ…ï¼Œå¹¶è€ƒè™‘åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“å…¼å®¹æ€§&lt;/strong&gt;ï¼šè™½ç„¶ &lt;code&gt;SELECT INTO&lt;/code&gt;æ˜¯ SQL æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½†&lt;strong&gt;å…·ä½“è¯­æ³•å’Œæ”¯æŒç¨‹åº¦å¯èƒ½å› æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ MySQL, SQL Server, Oracle, Db2ï¼‰è€Œå¼‚&lt;/strong&gt;ã€‚ä½¿ç”¨æ—¶è¯·å‚è€ƒç‰¹å®šæ•°æ®åº“çš„æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§"&gt;ğŸ“Š è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“åˆå¤æ‚æŸ¥è¯¢&lt;/strong&gt;ï¼š&lt;code&gt;SELECT INTO&lt;/code&gt;çš„æºæ•°æ®ä¸ä»…å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨ï¼Œè¿˜å¯ä»¥æ˜¯å¤æ‚çš„æŸ¥è¯¢ç»“æœï¼ŒåŒ…æ‹¬å¤šè¡¨è¿æ¥ï¼ˆ&lt;code&gt;JOIN&lt;/code&gt;ï¼‰ã€èšåˆå‡½æ•°ï¼ˆ&lt;code&gt;GROUP BY&lt;/code&gt;ï¼‰ç­‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ›å»ºä¸€å¼ åŒ…å«å®¢æˆ·åŠå…¶è®¢å•æ•°é‡çš„æ±‡æ€»è¡¨
SELECT c.customer_id, c.customer_name, COUNT(o.order_id) AS order_count
INTO customer_order_summary
FROM customers c
LEFT JOIN orders o ON c.customer_id = o.customer_id
GROUP BY c.customer_id, c.customer_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿å•è¡Œç»“æœï¼ˆç‰¹å®šæ•°æ®åº“ï¼‰&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“ï¼ˆå¦‚ IBM Db2ï¼‰ä¸­ï¼Œç”¨äºå°†æ ‡é‡å€¼èµ‹å€¼ç»™å˜é‡çš„ &lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥è¦æ±‚æŸ¥è¯¢ç»“æœå¿…é¡»ä¸º&lt;strong&gt;å•è¡Œ&lt;/strong&gt;ã€‚å¦‚æœè¿”å›å¤šè¡Œæˆ–é›¶è¡Œï¼Œä¼šå¼•å‘é”™è¯¯ã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;FETCH FIRST 1 ROW ONLY&lt;/code&gt;ç­‰å­å¥æ¥é™åˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥æ˜¯æ•°æ®åº“æ“ä½œä¸­ä¸€æŠŠé«˜æ•ˆçš„â€œç‘å£«å†›åˆ€â€ï¼Œç‰¹åˆ«é€‚ç”¨äº&lt;strong&gt;å¿«é€Ÿåˆ›å»ºæ•°æ®å‰¯æœ¬ã€è¿›è¡Œæ•°æ®æå–å’Œä¸€æ¬¡æ€§è¿ç§»&lt;/strong&gt;ä»»åŠ¡ã€‚å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°†å»ºè¡¨å’Œæ’å…¥æ•°æ®åˆäºŒä¸ºä¸€ï¼Œç®€åŒ–äº†æ“ä½œæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨ &lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–æ•°æ®åº“æ–¹é¢çš„é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­äº¤æµã€‚&lt;/p&gt;
&lt;h2 id="select-into--update-join"&gt;SELECT INTO &amp;amp; UPDATE JOIN
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;å’Œ &lt;code&gt;UPDATE JOIN&lt;/code&gt;æ˜¯ SQL ä¸­åŠŸèƒ½å®Œå…¨ä¸åŒçš„ä¸¤ç§æ“ä½œï¼Œç®€å•æ¥è¯´ï¼Œä¸€ä¸ªç”¨äº&lt;strong&gt;åˆ›å»ºæ–°è¡¨å¹¶å¡«å……æ•°æ®&lt;/strong&gt;ï¼Œå¦ä¸€ä¸ªç”¨äº&lt;strong&gt;æ ¹æ®å…³è”è¡¨æ›´æ–°ç°æœ‰è¡¨çš„æ•°æ®&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SELECT INTO&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;UPDATE JOIN&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ›å»ºæ–°è¡¨&lt;/strong&gt;å¹¶æ’å…¥æŸ¥è¯¢ç»“æœ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´æ–°ç°æœ‰è¡¨&lt;/strong&gt;ä¸­å·²æœ‰çš„æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®æ ‡è¡¨è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›®æ ‡è¡¨&lt;strong&gt;å¿…é¡»ä¸å­˜åœ¨&lt;/strong&gt;ï¼Œè¯­å¥æ‰§è¡Œæ—¶è‡ªåŠ¨åˆ›å»º&lt;/td&gt;
&lt;td&gt;ç›®æ ‡è¡¨&lt;strong&gt;å¿…é¡»å·²å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„è¡¨&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹ç›®æ ‡è¡¨ä¸­æŒ‡å®šè¡Œçš„æ•°æ®ï¼Œä¸äº§ç”Ÿæ–°è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®å¤‡ä»½ã€å¿«é€Ÿåˆ›å»ºæµ‹è¯•æ ·æœ¬ã€æ•°æ®å½’æ¡£&lt;/td&gt;
&lt;td&gt;è·¨è¡¨æ•°æ®åŒæ­¥ã€ä¾æ®å…³è”è¡¨ä¿¡æ¯æ‰¹é‡æ›´æ–°å­—æ®µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•å…³é”®è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... INTO &amp;lt;new_table&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE ... JOIN ... SET ...&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥äº†è§£ä¸¤è€…"&gt;ğŸ’¡ æ·±å…¥äº†è§£ä¸¤è€…
&lt;/h3&gt;&lt;h4 id="-select-intoå¿«é€Ÿåˆ›å»ºæ•°æ®å‰¯æœ¬"&gt;ğŸ“ SELECT INTOï¼šå¿«é€Ÿåˆ›å»ºæ•°æ®å‰¯æœ¬
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥å°†æŸ¥è¯¢å’Œå»ºè¡¨åˆäºŒä¸ºä¸€ï¼Œéå¸¸é€‚åˆå¿«é€Ÿåˆ›å»ºæ•°æ®çš„ä¸´æ—¶å‰¯æœ¬æˆ–å­é›†ã€‚æ–°è¡¨çš„ç»“æ„ï¼ˆåˆ—åã€æ•°æ®ç±»å‹ï¼‰ç”±æŸ¥è¯¢ç»“æœå†³å®šï¼Œä½†&lt;strong&gt;ä¸ä¼šè‡ªåŠ¨å¤åˆ¶æºè¡¨çš„çº¦æŸï¼ˆå¦‚ä¸»é”®ã€å¤–é”®ï¼‰å’Œç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;ï¼šä¸ºé‡è¦çš„ä¸šåŠ¡è¡¨åˆ›å»ºä¸€ä¸ªåœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * INTO orders_backup_20241001 FROM orders;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæµ‹è¯•é›†&lt;/strong&gt;ï¼šä»æµ·é‡ç”Ÿäº§æ•°æ®ä¸­æå–ä¸€å°éƒ¨åˆ†æ•°æ®ï¼Œç”¨äºåº”ç”¨æµ‹è¯•æˆ–æ•°æ®åˆ†æï¼Œè€Œä¸å½±å“åŸè¡¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT user_id, username INTO test_users FROM users WHERE last_login_date &amp;gt; &amp;#39;2024-09-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å½’æ¡£&lt;/strong&gt;ï¼šå°†ç¬¦åˆç‰¹å®šæ¡ä»¶ï¼ˆå¦‚ä¸€å¹´å‰ï¼‰çš„æ—§æ•°æ®ç§»å…¥å½’æ¡£è¡¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * INTO orders_archive_2023 FROM orders WHERE order_date &amp;lt; &amp;#39;2024-01-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-update-joinè·¨è¡¨å…³è”æ›´æ–°"&gt;ğŸ”„ UPDATE JOINï¼šè·¨è¡¨å…³è”æ›´æ–°
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;UPDATE JOIN&lt;/code&gt;ç”¨äºæ ¹æ®å¦ä¸€ä¸ªè¡¨ï¼ˆæˆ–å¤šä¸ªè¡¨ï¼‰çš„ä¿¡æ¯æ¥æ›´æ–°ç›®æ ‡è¡¨çš„è®°å½•ã€‚å®ƒç»“åˆäº† &lt;code&gt;UPDATE&lt;/code&gt;çš„ä¿®æ”¹èƒ½åŠ›å’Œ &lt;code&gt;JOIN&lt;/code&gt;çš„å…³è”èƒ½åŠ›ï¼Œå¯ä»¥ç²¾ç¡®åœ°æ‰¹é‡æ›´æ–°æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®åŒæ­¥&lt;/strong&gt;ï¼šç”¨ä¸€ä¸ªè¡¨çš„æ•°æ®å»æ›´æ–°å¦ä¸€ä¸ªè¡¨ã€‚ä¾‹å¦‚ï¼Œç”¨åŒ…å«æœ€æ–°å•†å“ä»·æ ¼çš„ &lt;code&gt;price_list&lt;/code&gt;è¡¨å»æ›´æ–° &lt;code&gt;orders&lt;/code&gt;è¡¨ä¸­çš„å•†å“å•ä»·ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE orders o
JOIN price_list p ON o.product_id = p.product_id
SET o.unit_price = p.new_price;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ´¾ç”Ÿæ•°æ®æ›´æ–°&lt;/strong&gt;ï¼šæ ¹æ®å…³è”è¡¨çš„æ±‡æ€»ä¿¡æ¯è¿›è¡Œæ›´æ–°ã€‚ä¾‹å¦‚ï¼Œæ ¹æ® &lt;code&gt;sales&lt;/code&gt;è¡¨ä¸­çš„é”€å”®è®°å½•ï¼Œæ›´æ–° &lt;code&gt;customers&lt;/code&gt;è¡¨ä¸­æ¯ä¸ªå®¢æˆ·çš„æ€»æ¶ˆè´¹é‡‘é¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE customers c
JOIN (
SELECT customer_id, SUM(amount) AS total_spent
FROM sales
GROUP BY customer_id
) s ON c.customer_id = s.customer_id
SET c.total_amount = s.total_spent;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒé™ä¸å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SELECT INTO&lt;/code&gt;éœ€è¦&lt;strong&gt;åˆ›å»ºè¡¨çš„æƒé™ï¼ˆå¦‚ &lt;code&gt;CREATE TABLE&lt;/code&gt;ï¼‰&lt;/strong&gt;ã€‚è€Œæ‰§è¡Œ &lt;code&gt;UPDATE JOIN&lt;/code&gt;éœ€è¦å¯¹ç›®æ ‡è¡¨æœ‰&lt;strong&gt;æ›´æ–°æƒé™ï¼ˆå¦‚ &lt;code&gt;UPDATE&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼Œå¹¶å¯¹å…³è”çš„è¡¨æœ‰&lt;strong&gt;æŸ¥è¯¢æƒé™ï¼ˆå¦‚ &lt;code&gt;SELECT&lt;/code&gt;ï¼‰&lt;/strong&gt;ã€‚åŒæ—¶ï¼ŒåŠ¡å¿…æ³¨æ„ &lt;code&gt;SELECT INTO&lt;/code&gt;è¦æ±‚æ–°è¡¨åä¸å­˜åœ¨ï¼Œè€Œ &lt;code&gt;UPDATE JOIN&lt;/code&gt;è¦æ±‚ç›®æ ‡è¡¨å¿…é¡»å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;UPDATE JOIN&lt;/code&gt;çš„æ¡ä»¶é‡è¦æ€§&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;UPDATE JOIN&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;å­å¥è‡³å…³é‡è¦ã€‚å¦‚æœçœç•¥ï¼Œå°†æ›´æ–°&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;åŒ¹é…è¿æ¥æ¡ä»¶çš„è¡Œï¼Œå¯èƒ½å¯¼è‡´æ•°æ®è¢«æ„å¤–å¤§è§„æ¨¡ä¿®æ”¹ã€‚æ“ä½œå‰æœ€å¥½å…ˆä½¿ç”¨ &lt;code&gt;SELECT ... JOIN&lt;/code&gt;éªŒè¯æ¡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªï¼Œå®Œå…¨å–å†³äºä½ çš„ä¸šåŠ¡ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¡¨&lt;/strong&gt;æ¥å­˜æ”¾æŸ¥è¯¢ç»“æœæ—¶ï¼Œè¯·ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒå°±åƒä¸€å°å¤å°æœºï¼Œä¸ºä½ ç”Ÿæˆä¸€ä»½å…¨æ–°çš„æ•°æ®å‰¯æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;ä¿®æ”¹ä¸€ä¸ªå·²æœ‰è¡¨å†…éƒ¨çš„æ•°æ®&lt;/strong&gt;ï¼Œå¹¶ä¸”æ–°å€¼æ¥æºäºå…¶ä»–è¡¨æ—¶ï¼Œè¯·ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;UPDATE JOIN&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒå°±åƒä¸€ä½æ ¡å¯¹å‘˜ï¼Œæ ¹æ®å‚è€ƒèµ„æ–™æ¥ä¿®æ­£ç°æœ‰æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åœ¨å®é™…å·¥ä½œä¸­å‡†ç¡®åœ°é€‰æ‹©å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå¼ºå¤§çš„SQLå·¥å…·ï¼&lt;/p&gt;
&lt;h2 id="load-data-infile"&gt;LOAD DATA INFILE
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„æ•°æ®å¯¼å…¥å·¥å…·ï¼Œå®ƒèƒ½å¿«é€Ÿå°†æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹è¯»å–å¹¶æ’å…¥åˆ°æ•°æ®åº“è¡¨ä¸­ã€‚ä¸‹é¢ä¸ºæ‚¨è¯¦ç»†ä»‹ç»å®ƒçš„è¯­æ³•ã€å…³é”®å‚æ•°ã€ä½¿ç”¨åœºæ™¯ä»¥åŠé‡è¦æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒè¯­æ³•ä¸å‚æ•°è§£è¯»"&gt;ğŸ“œ æ ¸å¿ƒè¯­æ³•ä¸å‚æ•°è§£è¯»
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE &amp;#39;file_name&amp;#39;
[REPLACE | IGNORE]
INTO TABLE tbl_name
[CHARACTER SET charset_name]
[FIELDS
[TERMINATED BY &amp;#39;string&amp;#39;]
[[OPTIONALLY] ENCLOSED BY &amp;#39;char&amp;#39;]
[ESCAPED BY &amp;#39;char&amp;#39;]
]
[LINES
[STARTING BY &amp;#39;string&amp;#39;]
[TERMINATED BY &amp;#39;string&amp;#39;]
]
[IGNORE number LINES]
[(col_name_or_user_var, ...)]
[SET col_name = expr, ...]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…³é”®å‚æ•°è¯´æ˜&lt;/strong&gt; ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°/å­å¥&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;LOCAL&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ–‡ä»¶ä½äº&lt;strong&gt;å®¢æˆ·ç«¯ä¸»æœº&lt;/strong&gt;è€ŒéæœåŠ¡å™¨ä¸»æœºã€‚ä½¿ç”¨åï¼Œæ–‡ä»¶ç”±å®¢æˆ·ç«¯è¯»å–å¹¶å‘é€è‡³æœåŠ¡å™¨ï¼Œæ— éœ€æœåŠ¡å™¨ç«¯çš„ &lt;code&gt;FILE&lt;/code&gt;æƒé™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;REPLACE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥æ–°è¡Œä¸å·²æœ‰è¡Œçš„ä¸»é”®æˆ–å”¯ä¸€é”®é‡å¤ï¼Œåˆ™&lt;strong&gt;æ›¿æ¢&lt;/strong&gt;å·²æœ‰è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;IGNORE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥æ–°è¡Œä¸å·²æœ‰è¡Œçš„ä¸»é”®æˆ–å”¯ä¸€é”®é‡å¤ï¼Œåˆ™&lt;strong&gt;å¿½ç•¥&lt;/strong&gt;è¯¥æ–°è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CHARACTER SET&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ–‡ä»¶å†…å®¹çš„å­—ç¬¦é›†ï¼Œå¦‚ &lt;code&gt;utf8&lt;/code&gt;ã€‚è‹¥æœªæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨ &lt;code&gt;character_set_database&lt;/code&gt;ç³»ç»Ÿå˜é‡æŒ‡å®šçš„å­—ç¬¦é›† ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;FIELDS&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰å­—æ®µçš„è§£ææ–¹å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;TERMINATED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºåˆ¶è¡¨ç¬¦ &lt;code&gt;\t&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;ENCLOSED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­—æ®µåŒ…å›´ç¬¦ï¼ˆå¼•å·ï¼‰ã€‚ä½¿ç”¨ &lt;code&gt;OPTIONALLY&lt;/code&gt;åˆ™ä»…åŒ…å›´å­—ç¬¦ä¸²ç±»å‹å­—æ®µã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;ESCAPED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è½¬ä¹‰å­—ç¬¦ï¼Œé»˜è®¤ä¸ºåæ–œçº¿ ``ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;LINES&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰è¡Œçš„è§£ææ–¹å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;TERMINATED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¡Œç»ˆæ­¢ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ &lt;code&gt;\n&lt;/code&gt;ã€‚Windows æ–‡ä»¶å¸¸ç”¨ &lt;code&gt;\r\n&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;STARTING BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¡Œèµ·å§‹æ ‡è®°ï¼Œç”¨äºè·³è¿‡ç‰¹å®šå‰ç¼€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;IGNORE number LINES&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿½ç•¥æ–‡ä»¶å¼€å¤´çš„æŒ‡å®šè¡Œæ•°ï¼Œå¸¸ç”¨äºè·³è¿‡æ ‡é¢˜è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—ååˆ—è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;(col1, col2, ...)&lt;/code&gt;ï¼Œå½“æ–‡ä»¶åˆ—ä¸è¡¨åˆ—é¡ºåºä¸ä¸€è‡´æˆ–åªéœ€å¯¼å…¥éƒ¨åˆ†åˆ—æ—¶ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;SET&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹å¯¼å…¥çš„æ•°æ®è¿›è¡Œè½¬æ¢æˆ–è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚ &lt;code&gt;SET update_time = CURRENT_TIMESTAMP&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ–‡ä»¶è·¯å¾„è§£æè§„åˆ™"&gt;ğŸ“‚ æ–‡ä»¶è·¯å¾„è§£æè§„åˆ™
&lt;/h3&gt;&lt;p&gt;æ–‡ä»¶çš„ä½ç½®å–å†³äºæ˜¯å¦ä½¿ç”¨äº† &lt;code&gt;LOCAL&lt;/code&gt;å…³é”®å­—ï¼Œè§„åˆ™æœ‰æ‰€ä¸åŒ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;ï¼ˆå®¢æˆ·ç«¯æ–‡ä»¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæŒ‡å®šäº†ç»å¯¹è·¯å¾„ï¼Œå®¢æˆ·ç«¯ç¨‹åºç›´æ¥ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæŒ‡å®šäº†ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è·¯å¾„ç›¸å¯¹äºå¯åŠ¨å®¢æˆ·ç«¯ç¨‹åºæ—¶æ‰€åœ¨çš„ç›®å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœªä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;ï¼ˆæœåŠ¡å™¨æ–‡ä»¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ–‡ä»¶å¿…é¡»ä½äº MySQL æœåŠ¡å™¨ä¸»æœºä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»å¯¹è·¯å¾„ç›´æ¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›¸å¯¹è·¯å¾„çš„æŸ¥æ‰¾è§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è·¯å¾„ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;æŸ¥æ‰¾ä½ç½®&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'/path/to/file.txt'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨çš„ç»å¯¹è·¯å¾„ &lt;code&gt;/path/to/file.txt&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'./file.txt'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹äºæœåŠ¡å™¨çš„æ•°æ®ç›®å½•ï¼ˆå¦‚ &lt;code&gt;/var/lib/mysql/./file.txt&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'file.txt'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å½“å‰&lt;strong&gt;æ•°æ®åº“çš„ç›®å½•&lt;/strong&gt;ä¸‹æŸ¥æ‰¾ï¼ˆå¦‚ &lt;code&gt;/var/lib/mysql/db_name/file.txt&lt;/code&gt;ï¼‰ã€‚&lt;strong&gt;ç‰¹åˆ«æ³¨æ„&lt;/strong&gt;ï¼šå³ä½¿è¯­å¥æ˜¯å¯¼å…¥åˆ° &lt;code&gt;db2&lt;/code&gt;çš„è¡¨ï¼Œå¦‚æœå½“å‰æ•°æ®åº“æ˜¯ &lt;code&gt;db1&lt;/code&gt;ï¼Œå®ƒä¹Ÿä¼šåœ¨ &lt;code&gt;db1&lt;/code&gt;çš„ç›®å½•ä¸‹å¯»æ‰¾ &lt;code&gt;file.txt&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æƒé™ä¸å®‰å…¨é…ç½®"&gt;ğŸ›¡ï¸ æƒé™ä¸å®‰å…¨é…ç½®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨ç«¯æ–‡ä»¶&lt;/strong&gt;ï¼šæ‰§è¡Œæ“ä½œçš„ç”¨æˆ·å¿…é¡»æ‹¥æœ‰ &lt;strong&gt;&lt;code&gt;FILE&lt;/code&gt;&lt;/strong&gt; æƒé™ï¼Œå¹¶ä¸”æ–‡ä»¶å¿…é¡»ä½äº &lt;code&gt;secure_file_priv&lt;/code&gt;ç³»ç»Ÿå˜é‡æŒ‡å®šçš„ç›®å½•ä¸­ï¼ˆå¦‚æœè¯¥å˜é‡å€¼éç©ºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯æ–‡ä»¶ï¼ˆä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šä¸éœ€è¦ &lt;code&gt;FILE&lt;/code&gt;æƒé™ï¼Œä½†éœ€è¦ç¡®ä¿æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å¯ç”¨äº† &lt;code&gt;LOCAL&lt;/code&gt;åŠŸèƒ½ã€‚æ£€æŸ¥ &lt;code&gt;local_infile&lt;/code&gt;ç³»ç»Ÿå˜é‡çš„å€¼ï¼Œè‹¥ä¸º &lt;code&gt;OFF&lt;/code&gt;ï¼Œåˆ™éœ€å°†å…¶å¯ç”¨ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨ç¤ºä¾‹ä¸åœºæ™¯"&gt;ğŸ’¡ å®ç”¨ç¤ºä¾‹ä¸åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯¼å…¥CSVæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ª &lt;code&gt;students.csv&lt;/code&gt;æ–‡ä»¶ï¼Œç¬¬ä¸€è¡Œæ˜¯åˆ—æ ‡é¢˜ï¼Œå­—æ®µç”±é€—å·åˆ†éš”ï¼Œå­—ç¬¦ä¸²ç”±åŒå¼•å·åŒ…å›´ï¼Œè¡Œå°¾æ˜¯ &lt;code&gt;\r\n&lt;/code&gt;ï¼Œè¦å¯¼å…¥åˆ° &lt;code&gt;students&lt;/code&gt;è¡¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LOAD DATA LOCAL INFILE &amp;#39;/path/to/students.csv&amp;#39;
INTO TABLE students
CHARACTER SET utf8
FIELDS TERMINATED BY &amp;#39;,&amp;#39; OPTIONALLY ENCLOSED BY &amp;#39;&amp;#34;&amp;#39;
LINES TERMINATED BY &amp;#39;\r\n&amp;#39;
IGNORE 1 LINES
(name, age, email);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†æ•°æ®é‡å¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¡¨ä¸­å·²æœ‰ä¸»é”®ï¼Œå¯¼å…¥æ—¶é‡åˆ°é‡å¤ä¸»é”®çš„è®°å½•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¸Œæœ›è¦†ç›–æ—§è®°å½•ï¼šä½¿ç”¨ &lt;code&gt;REPLACE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¸Œæœ›ä¿ç•™æ—§è®°å½•ï¼Œè·³è¿‡æ–°è®°å½•ï¼šä½¿ç”¨ &lt;code&gt;IGNORE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»…å¯¼å…¥éƒ¨åˆ†åˆ—æˆ–è½¬æ¢æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ–‡ä»¶åªåŒ…å« &lt;code&gt;name&lt;/code&gt;å’Œ &lt;code&gt;birth_date&lt;/code&gt;ï¼Œä½†è¡¨ä¸­æœ‰ &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;age&lt;/code&gt;, &lt;code&gt;create_time&lt;/code&gt;ä¸‰åˆ—ï¼Œå¯ä»¥è¿™æ ·å¯¼å…¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LOAD DATA INFILE &amp;#39;data.txt&amp;#39;
INTO TABLE my_table
FIELDS TERMINATED BY &amp;#39;,&amp;#39;
(name, @birth_year) -- å°†å‡ºç”Ÿå¹´ä»½è¯»å…¥ç”¨æˆ·å˜é‡
SET age = YEAR(CURDATE()) - @birth_year, -- è®¡ç®—å¹´é¾„
create_time = NOW(); -- ç›´æ¥è®¾ç½®åˆ›å»ºæ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹äºç©ºçš„ MyISAM è¡¨ï¼Œ&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;ä¼šæ‰¹é‡åˆ›å»ºéå”¯ä¸€ç´¢å¼•ï¼Œè¿™æ¯”é€è¡Œæ’å…¥è¦å¿«å¾ˆå¤šã€‚å¯¹äºæœ‰å¤§é‡ç´¢å¼•çš„è¡¨ï¼Œå¯ä»¥åœ¨å¯¼å…¥å‰ä½¿ç”¨ &lt;code&gt;ALTER TABLE ... DISABLE KEYS&lt;/code&gt;ç¦ç”¨ç´¢å¼•ï¼Œå¯¼å…¥åå†ç”¨ &lt;code&gt;ALTER TABLE ... ENABLE KEYS&lt;/code&gt;é‡å»ºç´¢å¼•ï¼Œä»¥è¿›ä¸€æ­¥æå‡é€Ÿåº¦ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;SELECT ... INTO OUTFILE&lt;/code&gt;å¯¹åº”&lt;/strong&gt;ï¼š&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;æ˜¯ &lt;code&gt;SELECT ... INTO OUTFILE&lt;/code&gt;çš„é€†æ“ä½œã€‚è¦å°†æ•°æ®ä»è¡¨å¯¼å‡ºåˆ°æ–‡ä»¶ï¼Œå¯ä½¿ç”¨åè€…ã€‚ä¸¤ä¸ªè¯­å¥çš„ &lt;code&gt;FIELDS&lt;/code&gt;å’Œ &lt;code&gt;LINES&lt;/code&gt;å­å¥è®¾ç½®å¿…é¡»åŒ¹é…ï¼Œæ‰èƒ½æ­£ç¡®åœ°å°†å¯¼å‡ºçš„æ•°æ®é‡æ–°å¯¼å…¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯å¤„ç†&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;æ—¶ï¼Œæ•°æ®è§£é‡Šé”™è¯¯å’Œé‡å¤é”®é”™è¯¯é€šå¸¸ä¼šå˜ä¸ºè­¦å‘Šï¼Œæ“ä½œä¼šç»§ç»­æ‰§è¡Œï¼Œæ•ˆæœç±»ä¼¼äºæŒ‡å®šäº† &lt;code&gt;IGNORE&lt;/code&gt;ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ“ä½œåï¼Œå»ºè®®æ£€æŸ¥è­¦å‘Šä¿¡æ¯ï¼ˆ&lt;code&gt;SHOW WARNINGS&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;æ˜¯ MySQL ä¸­è¿›è¡Œæ‰¹é‡æ•°æ®å¯¼å…¥çš„å¼ºå¤§å·¥å…·ï¼Œå…¶æ•ˆç‡è¿œé«˜äºé€æ¡æ‰§è¡Œ &lt;code&gt;INSERT&lt;/code&gt;è¯­å¥ã€‚æˆåŠŸä½¿ç”¨å®ƒçš„å…³é”®åœ¨äºæ­£ç¡®è®¾ç½®æ–‡ä»¶è·¯å¾„ã€åŒ¹é…å­—æ®µå’Œè¡Œçš„æ ¼å¼é€‰é¡¹ï¼Œå¹¶ç†è§£å¦‚ä½•å¤„ç†æ•°æ®é‡å¤å’Œè¿›è¡Œå¿…è¦çš„æ•°æ®è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;LOAD DATA INFILE&lt;/code&gt;ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="2pc"&gt;2PC
&lt;/h2&gt;&lt;p&gt;MySQLçš„ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰æ˜¯ä¸€ç§å…³é”®çš„äº‹åŠ¡å¤„ç†æœºåˆ¶ï¼Œå°¤å…¶åœ¨éœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„åœºæ™¯ä¸­å‘æŒ¥ç€æ ¸å¿ƒä½œç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ·±å…¥æ¢è®¨å…¶å·¥ä½œåŸç†ã€å…·ä½“æµç¨‹å’Œåº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿é«˜ä¸€è‡´æ€§è¦æ±‚ä¸šåŠ¡ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰çš„æ•°æ®å®‰å…¨ï¼ŒMySQLå¼•å…¥äº†ä¸¤é˜¶æ®µæäº¤æœºåˆ¶ã€‚å®ƒæœ€åˆä¸»è¦è§£å†³InnoDBå­˜å‚¨å¼•æ“çš„redo logä¸MySQL Serverå±‚çš„binlogåœ¨äº‹åŠ¡æäº¤æ—¶çš„ååŒé—®é¢˜ï¼Œåæ¥ä¹Ÿæ‰©å±•åˆ°åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="-æ ¸å¿ƒæµç¨‹è§£æ"&gt;ğŸ”„ æ ¸å¿ƒæµç¨‹è§£æ
&lt;/h3&gt;&lt;p&gt;MySQLå†…éƒ¨çš„ä¸¤é˜¶æ®µæäº¤ï¼ˆä»¥åè°ƒredo logå’Œbinlogä¸ºä¾‹ï¼‰å°†ä¸€ä¸ªäº‹åŠ¡çš„æäº¤è¿‡ç¨‹ç²¾ç¡®åœ°åˆ’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå…¶æ ¸å¿ƒæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="https://uploadfiles.nowcoder.com/images/20250609/0_1749452333151/C5BF19C7B26EF4F11D743E1277A01431"
loading="lazy"
alt="img"
&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[äº‹åŠ¡æ‰§è¡Œ&amp;lt;br&amp;gt;DMLæ“ä½œ] --&amp;gt; B[ç¬¬ä¸€é˜¶æ®µï¼šPrepare Phase]
B --&amp;gt; C[InnoDBå°†redo logå†™å…¥&amp;lt;br&amp;gt;å¹¶æ ‡è®°ä¸ºPREPAREçŠ¶æ€]
C --&amp;gt; D{redo logå†™å…¥æ˜¯å¦æˆåŠŸ?}
D -- æˆåŠŸ --&amp;gt; E[ç¬¬äºŒé˜¶æ®µï¼šCommit Phase]
D -- å¤±è´¥ --&amp;gt; F[äº‹åŠ¡å›æ»š]
E --&amp;gt; G[Serverå±‚å°†äº‹åŠ¡å†™å…¥binlog]
G --&amp;gt; H{binlogå†™å…¥æ˜¯å¦æˆåŠŸ?}
H -- æˆåŠŸ --&amp;gt; I[InnoDBå°†redo log&amp;lt;br&amp;gt;æ ‡è®°ä¸ºCOMMITçŠ¶æ€]
H -- å¤±è´¥ --&amp;gt; F
I --&amp;gt; J[äº‹åŠ¡æäº¤å®Œæˆ]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæµç¨‹ç¡®ä¿äº†redo logå’Œbinlogè¦ä¹ˆåŒæ—¶ç”Ÿæ•ˆï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œä»è€Œç»´æŠ¤äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-å…³é”®é…ç½®å‚æ•°ä¸å´©æºƒæ¢å¤"&gt;âš™ï¸ å…³é”®é…ç½®å‚æ•°ä¸å´©æºƒæ¢å¤
&lt;/h3&gt;&lt;p&gt;ç†è§£å¹¶é…ç½®ä»¥ä¸‹å‚æ•°å¯¹ä¿è¯2PCçš„å¯é æ€§è‡³å…³é‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;&lt;/strong&gt;ï¼šæ§åˆ¶redo logçš„åˆ·ç›˜ç­–ç•¥ã€‚
&lt;ul&gt;
&lt;li&gt;è®¾ç½®ä¸º &lt;strong&gt;&lt;code&gt;1&lt;/code&gt;&lt;/strong&gt;ï¼ˆé»˜è®¤å€¼ï¼‰æ—¶ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°†redo logç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œèƒ½æœ€å¤§é™åº¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œä½†IOå¼€é”€è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog&lt;/code&gt;&lt;/strong&gt;ï¼šæ§åˆ¶binlogçš„åˆ·ç›˜ç­–ç•¥ã€‚
&lt;ul&gt;
&lt;li&gt;è®¾ç½®ä¸º &lt;strong&gt;&lt;code&gt;1&lt;/code&gt;&lt;/strong&gt;ï¼ˆMySQL 8.0åŠä»¥åé»˜è®¤ï¼‰æ—¶ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½ä¼šæ‰§è¡Œbinlogçš„fsyncæ“ä½œï¼Œç¡®ä¿binlogè½ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å´©æºƒæ¢å¤æœºåˆ¶&lt;/strong&gt;æ˜¯2PCçš„å¦ä¸€ä¸ªå…³é”®ç‚¹ã€‚æ•°æ®åº“é‡å¯åï¼Œæ¢å¤è¿‡ç¨‹ä¼šæ£€æŸ¥redo logçš„çŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœredo logå¤„äº &lt;strong&gt;&lt;code&gt;COMMIT&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ï¼Œè¯´æ˜äº‹åŠ¡å·²æˆåŠŸæäº¤ï¼Œç›´æ¥å®Œæˆå³å¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœredo logå¤„äº &lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ï¼Œåˆ™ä¼šå»æ£€æŸ¥binlogã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ‰¾åˆ°å¯¹åº”çš„binlogè®°å½•ä¸”å®Œæ•´ï¼Œåˆ™æäº¤äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ‰¾ä¸åˆ°å¯¹åº”çš„binlogè®°å½•ï¼Œåˆ™å›æ»šäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹ç¡®ä¿äº†å³ä½¿åœ¨æäº¤çš„ç¬¬äºŒé˜¶æ®µå‘ç”Ÿå´©æºƒï¼Œä¹Ÿèƒ½æ ¹æ®æ—¥å¿—çš„æœ€ç»ˆä¸€è‡´æ€§çŠ¶æ€åšå‡ºæ­£ç¡®çš„å†³ç­–ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸è€ƒé‡"&gt;ğŸ“Š åº”ç”¨åœºæ™¯ä¸è€ƒé‡
&lt;/h3&gt;&lt;p&gt;ä¸¤é˜¶æ®µæäº¤ä¸»è¦åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼Œä½†éœ€æ³¨æ„å…¶ä¼˜ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;è¯´æ˜ä¸è€ƒé‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MySQLå†…éƒ¨ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯InnoDBçš„redo logå’ŒServerå±‚çš„binlogåœ¨äº‹åŠ¡æäº¤æ—¶çš„ä¸€è‡´æ€§ï¼Œè¿™æ˜¯&lt;strong&gt;æœ€å¸¸ç”¨å’ŒåŸºç¡€&lt;/strong&gt;çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;ç¡®ä¿äº†æ•°æ®åº“çš„&lt;strong&gt;crash-safe&lt;/strong&gt;èƒ½åŠ›å’Œ&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;çš„æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆXAäº‹åŠ¡ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨è·¨å¤šä¸ªMySQLå®ä¾‹æˆ–ä¸åŒæ•°æ®åº“çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä¿è¯æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤ï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚&lt;/td&gt;
&lt;td&gt;æä¾›äº†&lt;strong&gt;å¼ºä¸€è‡´æ€§&lt;/strong&gt;ä¿è¯ï¼Œä½†ä¼šå¸¦æ¥&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ã€&lt;strong&gt;åŒæ­¥é˜»å¡&lt;/strong&gt;å’Œ&lt;strong&gt;åè°ƒè€…å•ç‚¹æ•…éšœ&lt;/strong&gt;çš„é£é™©ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ-1"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;MySQLçš„ä¸¤é˜¶æ®µæäº¤æœºåˆ¶æ˜¯ä¿éšœæ•°æ®ä¸€è‡´æ€§çš„åŸºçŸ³ã€‚ç†è§£å…¶æµç¨‹å’Œé…ç½®ï¼Œèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¿›è¡Œæ•°æ®åº“ç®¡ç†å’Œæ¶æ„è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼šé€šè¿‡å°†äº‹åŠ¡æäº¤æ‹†åˆ†ä¸ºå‡†å¤‡å’Œæäº¤ä¸¤ä¸ªé˜¶æ®µï¼Œç¡®ä¿redo logå’Œbinlogçš„å†™å…¥ä¿æŒåŸå­æ€§ï¼Œæ˜¯å®ç°&lt;strong&gt;Crash-Safe&lt;/strong&gt;å’Œå¯é ä¸»ä»å¤åˆ¶çš„å…³é”®æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸å¯é æ€§çš„æƒè¡¡&lt;/strong&gt;ï¼šé€šè¿‡&lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;å’Œ&lt;code&gt;sync_binlog&lt;/code&gt;è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå¯ä»¥åœ¨æ•°æ®å®‰å…¨æ€§å’Œå†™å…¥æ€§èƒ½ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚å¯¹äºè¦æ±‚æ•°æ®å¼ºä¸€è‡´çš„é‡‘èçº§ä¸šåŠ¡ï¼Œæ¨èè®¾ç½®ä¸ºåŒ1æ¨¡å¼ï¼›å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ä¸”å¯å®¹å¿å°‘é‡æ•°æ®ä¸¢å¤±çš„åœºæ™¯ï¼Œå¯è€ƒè™‘è°ƒæ•´å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡çš„è€ƒé‡&lt;/strong&gt;ï¼šXAåè®®è™½ç„¶æä¾›äº†å¼ºä¸€è‡´æ€§ï¼Œä½†å…¶å›ºæœ‰çš„æ€§èƒ½é—®é¢˜å’Œå¤æ‚æ€§ä¹Ÿæ¨åŠ¨äº†å¦‚&lt;strong&gt;Seata&lt;/strong&gt;ç­‰æ›´çµæ´»çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶çš„å‘å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£MySQLçš„ä¸¤é˜¶æ®µæäº¤ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æˆ–åº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="undo-log"&gt;UNDO LOG
&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œå®ƒè§¦åŠäº†MySQLå†…éƒ¨äº‹åŠ¡æœºåˆ¶è®¾è®¡çš„æ ¸å¿ƒã€‚ç®€å•æ¥è¯´ï¼Œ2PCä¸è€ƒè™‘undo logçš„æ ¹æœ¬åŸå› åœ¨äº&lt;strong&gt;èŒè´£åˆ†ç¦»&lt;/strong&gt;ï¼š2PCçš„æ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;åˆ†å¸ƒå¼ä¸€è‡´æ€§&lt;/strong&gt;ï¼Œè€Œundo logçš„æ ¸å¿ƒèŒè´£æ˜¯ä¿è¯äº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ã€‚å®ƒä»¬æ˜¯ä¸åŒå±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥æ¸…æ™°åœ°å±•ç¤ºå®ƒä»¬çš„ä¸åŒå®šä½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤ (2PC)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å›æ»šæ—¥å¿— (Undo Log)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯ &lt;strong&gt;Redo Log&lt;/strong&gt; å’Œ &lt;strong&gt;Binlog&lt;/strong&gt; çš„&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼Œç¡®ä¿äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;å’Œä¸»ä»æ•°æ®ä¸€è‡´ã€‚&lt;/td&gt;
&lt;td&gt;ä¿è¯å•ä¸ªäº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼ˆå›æ»šï¼‰å’Œ&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ï¼ˆMVCCï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·¨ç³»ç»Ÿåè°ƒ&lt;/strong&gt;ï¼šåè°ƒå­˜å‚¨å¼•æ“å±‚ï¼ˆInnoDB/Redo Logï¼‰å’ŒServerå±‚ï¼ˆBinlogï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“å†…éƒ¨&lt;/strong&gt;ï¼šInnoDBå¼•æ“å†…éƒ¨ç”¨äºå›æ»šå’Œæ„å»ºå¤šç‰ˆæœ¬æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…åœ¨äº‹åŠ¡&lt;strong&gt;æäº¤è¿‡ç¨‹&lt;/strong&gt;ä¸­çŸ­æš‚æ´»è·ƒã€‚&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡&lt;strong&gt;æäº¤åå¯èƒ½ä»å­˜åœ¨&lt;/strong&gt;ï¼Œä¸ºMVCCæœåŠ¡ï¼Œç›´åˆ°è¢«purgeçº¿ç¨‹æ¸…ç†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2PCä¸­çš„è§’è‰²&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è§’&lt;/strong&gt;ï¼šRedo Logå’ŒBinlogæ˜¯2PCåè®®çš„ç›´æ¥å‚ä¸è€…ï¼Œå…¶çŠ¶æ€å†³å®šäº‹åŠ¡æœ€ç»ˆå‘½è¿ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹•åæ”¯æŒè€…&lt;/strong&gt;ï¼šä¸å‚ä¸åè®®å†³ç­–ï¼Œä»…åœ¨2PCå†³ç­–ç»“æœä¸ºâ€œå›æ»šâ€æ—¶æ‰§è¡Œå…·ä½“å›æ»šæ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥è§£æä¸ºä½•å¦‚æ­¤è®¾è®¡"&gt;ğŸ” æ·±å…¥è§£æï¼šä¸ºä½•å¦‚æ­¤è®¾è®¡ï¼Ÿ
&lt;/h3&gt;&lt;h4 id="1-ç›®æ ‡ä¸åŒè§£å†³ä¸åŒçš„é—®é¢˜"&gt;1. ç›®æ ‡ä¸åŒï¼šè§£å†³ä¸åŒçš„é—®é¢˜
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2PCè¦è§£å†³çš„æ˜¯â€œæ—¥å¿—åŒæ­¥â€é—®é¢˜&lt;/strong&gt;ã€‚MySQLä¸ºäº†åŒæ—¶æ‹¥æœ‰å´©æºƒæ¢å¤èƒ½åŠ›ï¼ˆRedo Logï¼‰å’Œä¸»ä»å¤åˆ¶èƒ½åŠ›ï¼ˆBinlogï¼‰ï¼Œå¼•å…¥äº†è¿™ä¸¤ä¸ªç‹¬ç«‹çš„æ—¥å¿—ç³»ç»Ÿã€‚2PCå°±æ˜¯ä¸ºäº†ç¡®ä¿å¯¹ä¸€ä¸ªæ•°æ®çš„ä¿®æ”¹ï¼Œåœ¨è¿™ä¸¤ä¸ªæ—¥å¿—ä¸­çš„è®°å½•æ˜¯&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;çš„ï¼šè¦ä¹ˆä¸¤ä¸ªæ—¥å¿—éƒ½è®°å½•æˆåŠŸï¼ˆäº‹åŠ¡æäº¤ï¼‰ï¼Œè¦ä¹ˆä¸¤ä¸ªæ—¥å¿—éƒ½åƒæ²¡è®°å½•è¿‡ä¸€æ ·ï¼ˆäº‹åŠ¡å›æ»šï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Undo Logè¦è§£å†³çš„æ˜¯â€œäº‹åŠ¡å›æ»šå’Œå¤šç‰ˆæœ¬è¯»â€é—®é¢˜&lt;/strong&gt;ã€‚å®ƒåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè®°å½•æ•°æ®ä¿®æ”¹å‰çš„æ—§ç‰ˆæœ¬ã€‚å¦‚æœäº‹åŠ¡éœ€è¦å›æ»šï¼Œå°±ç”¨undo logæ¢å¤æ•°æ®ã€‚åŒæ—¶ï¼Œå®ƒä¸ºå…¶ä»–è¯»è¯·æ±‚æä¾›å†å²ç‰ˆæœ¬ï¼Œå®ç°MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ï¼Œä¿è¯è¯»å†™ä¸é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥ç†è§£ä¸ºï¼š2PCæ˜¯&lt;strong&gt;æ•°æ®åº“ç³»ç»Ÿå±‚é¢&lt;/strong&gt;çš„â€œæ€»æŒ‡æŒ¥éƒ¨â€ï¼Œåè°ƒä¸¤å¤§é‡è¦æ¨¡å—ï¼›è€ŒUndo Logæ˜¯&lt;strong&gt;å­˜å‚¨å¼•æ“å†…éƒ¨&lt;/strong&gt;çš„â€œåå‹¤ä¿éšœéƒ¨é—¨â€ï¼Œè´Ÿè´£å†…éƒ¨çš„æ•°æ®ç‰ˆæœ¬ç®¡ç†ã€‚&lt;/p&gt;
&lt;h4 id="2-ä¾èµ–å…³ç³»undo-logçš„å¯é æ€§ç”±redo-logä¿éšœ"&gt;2. ä¾èµ–å…³ç³»ï¼šUndo Logçš„å¯é æ€§ç”±Redo Logä¿éšœ
&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼Œ&lt;strong&gt;å¯¹Undo Logæœ¬èº«çš„ä¿®æ”¹ä¹Ÿä¼šäº§ç”ŸRedo Log&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUndo Logçš„æŒä¹…åŒ–æ˜¯ç”±Redo Logæ¥ä¿è¯çš„ã€‚å½“2PCåè®®ç¡®ä¿Redo LogæˆåŠŸå†™å…¥åï¼Œå°±æ„å‘³ç€Undo Logçš„ä¿®æ”¹ä¹Ÿå·²ç»å®‰å…¨è½ç›˜ã€‚å› æ­¤ï¼Œ2PCåè®®æ— éœ€å†é¢å¤–å…³å¿ƒUndo Logçš„çŠ¶æ€ï¼Œåªè¦æ§åˆ¶å¥½Redo Logå’ŒBinlogï¼Œå°±èƒ½é—´æ¥ä¿è¯æ•´ä¸ªç³»ç»Ÿï¼ˆåŒ…æ‹¬Undo Logï¼‰çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h4 id="3-ç”Ÿå‘½å‘¨æœŸundo-logçš„å­˜æ´»æ—¶é—´è¿œè¶…2pc"&gt;3. ç”Ÿå‘½å‘¨æœŸï¼šUndo Logçš„å­˜æ´»æ—¶é—´è¿œè¶…2PC
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2PCçš„ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;åœ¨äº‹åŠ¡æäº¤çš„é‚£ä¸€åˆ»å°±åŸºæœ¬ç»“æŸäº†ã€‚ä¸€æ—¦Redo Logæ ‡è®°ä¸ºCommitï¼Œåè°ƒå·¥ä½œå°±å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Undo Logçš„ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;å¯èƒ½æ›´é•¿ã€‚ä¸ºäº†æ”¯æŒMVCCï¼Œå³ä½¿äº‹åŠ¡æäº¤äº†ï¼Œå…¶äº§ç”Ÿçš„Undo Logä¹Ÿå¯èƒ½éœ€è¦ä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æ‰€æœ‰å¯èƒ½ç”¨åˆ°è¿™ä¸ªæ—§ç‰ˆæœ¬æ•°æ®çš„äº‹åŠ¡éƒ½ç»“æŸåï¼Œæ‰ä¼šè¢«purgeçº¿ç¨‹å¼‚æ­¥æ¸…ç†ã€‚&lt;/p&gt;
&lt;p&gt;è®©ä¸€ä¸ªçŸ­æš‚å­˜åœ¨çš„åè°ƒåè®®å»ç®¡ç†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå¯èƒ½æ›´é•¿çš„å†…éƒ¨æ•°æ®ç‰ˆæœ¬ï¼Œåœ¨è®¾è®¡å’Œå®ç°ä¸Šéƒ½æ˜¯ä¸åˆç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®æˆ˜åœºæ™¯å´©æºƒæ¢å¤ä¸­çš„åä½œ"&gt;ğŸ’¡ å®æˆ˜åœºæ™¯ï¼šå´©æºƒæ¢å¤ä¸­çš„åä½œ
&lt;/h3&gt;&lt;p&gt;æœ€èƒ½ä½“ç°äºŒè€…å…³ç³»çš„åœºæ™¯æ˜¯&lt;strong&gt;æ•°æ®åº“å´©æºƒæ¢å¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•°æ®åº“é‡å¯åï¼Œæ‰«æRedo Logï¼Œæ‰¾åˆ°æ‰€æœ‰å¤„äº&lt;code&gt;PREPARE&lt;/code&gt;çŠ¶æ€ä½†æœª&lt;code&gt;COMMIT&lt;/code&gt;çš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ¯ä¸ªè¿™æ ·çš„äº‹åŠ¡ï¼Œæ ¹æ®å…¶XIDï¼ˆäº‹åŠ¡IDï¼‰å»Binlogä¸­æŸ¥æ‰¾ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœBinlogä¸­å­˜åœ¨å®Œæ•´çš„è¯¥äº‹åŠ¡è®°å½•&lt;/strong&gt;ï¼šè¯´æ˜äº‹åŠ¡åœ¨å´©æºƒå‰å·²ç»æˆåŠŸï¼Œ2PCå†³ç­–ä¸ºâ€œæäº¤â€ã€‚äºæ˜¯ï¼ŒInnoDBä¼šé‡åšï¼ˆRedoï¼‰è¿™ä¸ªäº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºæäº¤ã€‚&lt;strong&gt;æ­¤æ—¶å®Œå…¨ä¸éœ€è¦Undo Logã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœBinlogä¸­æ‰¾ä¸åˆ°è¯¥äº‹åŠ¡çš„è®°å½•&lt;/strong&gt;ï¼šè¯´æ˜äº‹åŠ¡åœ¨å´©æºƒå‰æœªå®Œæˆï¼Œ2PCå†³ç­–ä¸ºâ€œå›æ»šâ€ã€‚è¿™æ—¶ï¼Œæ‰ä¼šç”¨åˆ°&lt;strong&gt;Undo Log&lt;/strong&gt;æ¥æ’¤é”€è¯¥äº‹åŠ¡å·²ç»åšçš„ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªæµç¨‹æ¸…æ™°åœ°è¡¨æ˜ï¼š&lt;strong&gt;Undo Logæ˜¯2PCå†³ç­–çš„æ‰§è¡Œå·¥å…·ï¼Œè€Œéå†³ç­–å‚ä¸è€…&lt;/strong&gt;ã€‚2PCå…ˆåŸºäºRedo Logå’ŒBinlogåšå‡ºâ€œæäº¤â€æˆ–â€œå›æ»šâ€çš„å…¨å±€å†³ç­–ï¼ŒUndo Logåªåœ¨å†³ç­–ä¸ºâ€œå›æ»šâ€æ—¶è¢«è§¦å‘ï¼Œå¿ å®åœ°æ‰§è¡Œå›æ»šæ“ä½œã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ2PCä¸è€ƒè™‘Undo Logï¼Œæ˜¯ä¸€ç§ç²¾å·§çš„èŒè´£åˆ†å·¥è®¾è®¡ã€‚2PCä½œä¸ºâ€œå®è§‚åè°ƒè€…â€ï¼Œä¸“æ³¨äºè§£å†³Redo Logå’ŒBinlogè¿™ä¸¤ä¸ªæ ¸å¿ƒæ—¥å¿—çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜ã€‚è€ŒUndo Logä½œä¸ºâ€œå¾®è§‚æ‰§è¡Œè€…â€ï¼Œä¸“æ³¨äºInnoDBå¼•æ“å†…éƒ¨çš„äº‹åŠ¡åŸå­æ€§å’Œå¤šç‰ˆæœ¬æ§åˆ¶ã€‚å®ƒä»¬é€šè¿‡æ˜ç¡®çš„ä¾èµ–å…³ç³»ï¼ˆUndo Logç”±Redo Logä¿æŠ¤ï¼‰å’Œæ¸…æ™°çš„è§¦å‘æœºåˆ¶ï¼ˆå´©æºƒæ¢å¤æ—¶çš„å†³ç­–-æ‰§è¡Œæ¨¡å¼ï¼‰ååŒå·¥ä½œï¼Œå…±åŒä¿è¯äº†MySQLäº‹åŠ¡çš„ACIDç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£MySQLçš„äº‹åŠ¡æœºåˆ¶ã€‚å¦‚æœä½ å¯¹MVCCæˆ–è€…å´©æºƒæ¢å¤çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç‹¬ç«‹æ€§ä¿éšœ"&gt;ç‹¬ç«‹æ€§ä¿éšœ
&lt;/h2&gt;&lt;p&gt;UNDO LOG å¯¹ REDO LOG çš„ä¾èµ–æ˜¯ MySQL InnoDB å­˜å‚¨å¼•æ“äº‹åŠ¡æœºåˆ¶çš„æ ¸å¿ƒè®¾è®¡ä¹‹ä¸€ï¼Œå…³é”®åœ¨äºé€šè¿‡ REDO LOG æ¥ä¿è¯ UNDO LOG æœ¬èº«çš„æŒä¹…æ€§ï¼Œä»è€Œç¡®ä¿äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒå…³ç³»å’Œå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;UNDO LOGï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;REDO LOGï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡å›æ»šã€MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰&lt;/td&gt;
&lt;td&gt;å´©æºƒæ¢å¤ï¼Œä¿è¯äº‹åŠ¡æŒä¹…æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥å¿—ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€»è¾‘æ—¥å¿—&lt;/strong&gt;ï¼Œè®°å½•å¦‚ä½•é€†æ“ä½œï¼ˆå¦‚UPDATEçš„æ—§å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‰©ç†æ—¥å¿—&lt;/strong&gt;ï¼Œè®°å½•æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼ˆå¦‚é¡µå·ã€åç§»é‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹…åŒ–ä¾èµ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ– REDO LOG&lt;/strong&gt; æ¥ä¿è¯å…¶ä¿®æ”¹çš„æŒä¹…æ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹æŒä¹…åŒ–&lt;/strong&gt;ï¼Œé€šè¿‡ WAL æœºåˆ¶ç›´æ¥åˆ·ç›˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¢å¤ä¸­çš„è§’è‰²&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›æ»š&lt;strong&gt;æœªæäº¤&lt;/strong&gt;çš„äº‹åŠ¡&lt;/td&gt;
&lt;td&gt;é‡åš&lt;strong&gt;å·²æäº¤&lt;/strong&gt;äº‹åŠ¡çš„ä¿®æ”¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¾èµ–å…³ç³»çš„æ ¸å¿ƒæŒä¹…åŒ–ä¿éšœ"&gt;ğŸ”— ä¾èµ–å…³ç³»çš„æ ¸å¿ƒï¼šæŒä¹…åŒ–ä¿éšœ
&lt;/h3&gt;&lt;p&gt;UNDO LOG å¯¹ REDO LOG æœ€æ ¹æœ¬çš„ä¾èµ–ä½“ç°åœ¨&lt;strong&gt;æŒä¹…åŒ–æœºåˆ¶&lt;/strong&gt;ä¸Šã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥é¡ºåºä¸ WAL æœºåˆ¶&lt;/strong&gt;ï¼šå½“å‘ç”Ÿæ•°æ®å˜æ›´æ—¶ï¼ŒInnoDB ä¼šéµå¾ªä¸¥æ ¼çš„é¡ºåºï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¦–å…ˆ&lt;/strong&gt;ï¼Œå°†æ•°æ®ä¿®æ”¹å‰çš„çŠ¶æ€ï¼ˆæ—§ç‰ˆæœ¬ï¼‰ä½œä¸º UNDO LOG è®°å½•åˆ°&lt;strong&gt;å›æ»šæ®µ&lt;/strong&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç„¶å&lt;/strong&gt;ï¼Œè¿™ä¸ª&lt;strong&gt;å¯¹ UNDO LOG æœ¬èº«çš„ä¿®æ”¹&lt;/strong&gt;ï¼Œä¼šåƒæ™®é€šæ•°æ®é¡µçš„ä¿®æ”¹ä¸€æ ·ï¼Œè¢«è®°å½•åˆ° REDO LOG ä¸­ã€‚è¿™ç¡®ä¿äº† UNDO LOG çš„ç”Ÿæˆè¿‡ç¨‹å—åˆ° REDO LOG çš„ä¿æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;è¿™éµå¾ªäº† &lt;strong&gt;WAL&lt;/strong&gt; åŸåˆ™ï¼šä»»ä½•æ•°æ®é¡µï¼ˆåŒ…æ‹¬å­˜å‚¨ UNDO LOG çš„é¡µï¼‰çš„ä¿®æ”¹ï¼Œéƒ½å¿…é¡»å…ˆè®°å½•ç›¸åº”çš„ REDO LOGï¼Œç„¶åå†å†™å…¥ç£ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å´©æºƒæ¢å¤çš„å…³é”®&lt;/strong&gt;ï¼šå¦‚æœæ•°æ®åº“åœ¨äº‹åŠ¡æäº¤å‰å´©æºƒï¼Œé‡å¯åçš„æ¢å¤è¿‡ç¨‹å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ­¥ï¼šé‡åš&lt;/strong&gt;ã€‚InnoDB é¦–å…ˆæ‰«æ REDO LOGï¼Œé‡æ”¾æ‰€æœ‰å·²æäº¤å’Œæœªæäº¤äº‹åŠ¡çš„ç‰©ç†ä¿®æ”¹ã€‚è¿™ä¸ªâ€œé‡åšâ€æ“ä½œ&lt;strong&gt;ä¸ä»…æ¢å¤äº†æ•°æ®é¡µï¼Œä¹Ÿæ¢å¤äº† UNDO LOG é¡µçš„å†…å®¹&lt;/strong&gt;ã€‚åªæœ‰è¿™æ ·ï¼ŒUNDO LOG æ‰æ˜¯å®Œæ•´å’Œå¯ç”¨çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ­¥ï¼šå›æ»š&lt;/strong&gt;ã€‚åœ¨ UNDO LOG è¢« REDO LOG æ¢å¤åï¼Œç³»ç»Ÿæ‰èƒ½æ ¹æ® UNDO LOG ä¸­çš„é€»è¾‘è®°å½•ï¼Œå»å›æ»šé‚£äº›åœ¨å´©æºƒæ—¶å¤„äºæœªæäº¤çŠ¶æ€çš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç®€å•æ¥è¯´&lt;/strong&gt;ï¼šæ²¡æœ‰ REDO LOGï¼ŒUNDO LOG æœ¬èº«å¯èƒ½åœ¨å´©æºƒä¸­æŸåæˆ–ä¸¢å¤±ï¼Œä»è€Œæ— æ³•å®Œæˆå›æ»šã€‚REDO LOG ä¸º UNDO LOG æä¾›äº†â€œå®‰å…¨ç½‘â€ï¼Œä½¿å…¶å˜å¾—å¯é ã€‚&lt;/p&gt;
&lt;h3 id="-è¿™ç§è®¾è®¡çš„æ„ä¹‰ä¸ä¼˜åŠ¿"&gt;ğŸ’¡ è¿™ç§è®¾è®¡çš„æ„ä¹‰ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;è¿™ç§ä¾èµ–å…³ç³»å¹¶éç¼ºé™·ï¼Œè€Œæ˜¯ä¸€ç§ç²¾å¦™çš„æ¶æ„è®¾è®¡ï¼Œå¸¦æ¥äº†æ˜¾è‘—çš„å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;ï¼šUNDO LOG çš„å†™å…¥æ˜¯éšæœºI/Oï¼Œå¦‚æœæ¯æ¬¡ç”Ÿæˆ UNDO LOG éƒ½å¼ºåˆ¶åˆ·ç›˜ï¼Œæ€§èƒ½ä»£ä»·å¾ˆé«˜ã€‚é€šè¿‡ REDO LOG çš„é¡ºåºI/Oæ¥é—´æ¥ä¿è¯ UNDO LOG çš„æŒä¹…æ€§ï¼Œå¯ä»¥å°†å¤šæ¬¡éšæœºå†™åˆå¹¶ä¸ºé¡ºåºå†™ï¼Œå¤§å¤§æå‡äº†ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–å´©æºƒæ¢å¤&lt;/strong&gt;ï¼šæ¢å¤è¿‡ç¨‹å˜å¾—æ¸…æ™°å¯æ§ã€‚åªéœ€æŒ‰é¡ºåºå¤„ç† REDO LOGï¼ˆé‡åšæ‰€æœ‰ç‰©ç†ä¿®æ”¹ï¼‰ï¼Œç„¶åå†å¤„ç† UNDO LOGï¼ˆå›æ»šæœªæäº¤äº‹åŠ¡ï¼‰ã€‚å¦‚æœ UNDO LOG ç‹¬ç«‹æŒä¹…åŒ–ï¼Œæ¢å¤é€»è¾‘ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ï¼Œéœ€è¦åŒæ—¶åè°ƒä¸¤ç§æ—¥å¿—çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿åŸå­æ€§ä¸æŒä¹…æ€§&lt;/strong&gt;ï¼šä¸¤è€…ååŒå·¥ä½œï¼Œå…±åŒä¿éšœäº†äº‹åŠ¡çš„ ACID ç‰¹æ€§ã€‚REDO LOG ç¡®ä¿äº†å·²æäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¸ä¸¢å¤±ï¼ˆæŒä¹…æ€§ï¼‰ï¼Œè€Œå¯ç”¨çš„ UNDO LOG ç¡®ä¿äº†æœªæäº¤äº‹åŠ¡èƒ½è¢«æ’¤é”€ï¼ˆåŸå­æ€§ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åœ¨äº‹åŠ¡æµç¨‹ä¸­çš„åä½œ"&gt;ğŸ”„ åœ¨äº‹åŠ¡æµç¨‹ä¸­çš„åä½œ
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸€ä¸ª UPDATE è¯­å¥ä¸ºä¾‹ï¼Œå¯ä»¥æ›´ç›´è§‚åœ°çœ‹åˆ°å®ƒä»¬çš„åä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å¼€å§‹&lt;/strong&gt;ï¼šå‡†å¤‡ä¿®æ”¹æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆ UNDO LOG&lt;/strong&gt;ï¼šå°† &lt;code&gt;id=1&lt;/code&gt;è¿™è¡Œæ•°æ®çš„æ—§å€¼ï¼ˆä¾‹å¦‚ &lt;code&gt;c1=5&lt;/code&gt;ï¼‰è®°å½•åˆ° UNDO LOG ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½• REDO LOG&lt;/strong&gt;ï¼šå°†**â€œå¯¹ UNDO LOG é¡µçš„ä¿®æ”¹â€**è¿™ä¸ªç‰©ç†æ“ä½œè®°å½•åˆ° REDO LOG Bufferã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿®æ”¹æ•°æ®é¡µ&lt;/strong&gt;ï¼šåœ¨å†…å­˜çš„ Buffer Pool ä¸­å°† &lt;code&gt;c1=5&lt;/code&gt;æ”¹ä¸º &lt;code&gt;c1=10&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½• REDO LOG&lt;/strong&gt;ï¼šå°†**â€œå¯¹æ•°æ®é¡µçš„ä¿®æ”¹â€**è¿™ä¸ªç‰©ç†æ“ä½œè®°å½•åˆ° REDO LOG Bufferã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡æäº¤&lt;/strong&gt;ï¼šæ ¹æ®é…ç½®ï¼ˆå¦‚ &lt;code&gt;innodb_flush_log_at_trx_commit=1&lt;/code&gt;ï¼‰ï¼Œå°† REDO LOG Buffer å¼ºåˆ¶åˆ·ç›˜ã€‚æ­¤æ—¶ï¼Œ&lt;strong&gt;æ­¥éª¤3å’Œæ­¥éª¤5çš„ REDO LOG è¢«æŒä¹…åŒ–ï¼Œè¿™æ„å‘³ç€ UNDO LOG å’Œæ–°çš„æ•°æ®çŠ¶æ€éƒ½å¾—åˆ°äº†ä¿æŠ¤&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒUNDO LOG å¯¹ REDO LOG çš„ä¾èµ–ï¼Œæœ¬è´¨ä¸Šæ˜¯ &lt;strong&gt;â€œé€»è¾‘æ—¥å¿—â€ä¾èµ–äºâ€œç‰©ç†æ—¥å¿—â€æ¥å®ç°å…¶æŒä¹…æ€§&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ç§ä»¥æ€§èƒ½ä¸ºå¯¼å‘çš„ä¼˜é›…è®¾è®¡ï¼Œå®ƒåˆ©ç”¨ REDO LOG é«˜æ•ˆçš„é¡ºåºå†™ç‰¹æ€§ï¼Œä¸ä»…ä¿è¯äº†æ•°æ®æœ¬èº«çš„æŒä¹…æ€§ï¼Œä¹Ÿé—´æ¥ä¿è¯äº†å›æ»šæ‰€éœ€çš„ UNDO LOG çš„å¯é æ€§ï¼Œä»è€Œæ„æˆäº† MySQL å¼ºå¤§äº‹åŠ¡èƒ½åŠ›çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ MySQL çš„æ—¥å¿—æœºåˆ¶ã€‚å¦‚æœä½ å¯¹ MVCC æˆ–ä¸¤é˜¶æ®µæäº¤ç­‰å…¶ä»–ç›¸å…³è¯é¢˜æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¹è§‚é”"&gt;ä¹è§‚é”
&lt;/h2&gt;&lt;p&gt;MySQL çš„ä¹è§‚é”æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œå®ƒåŸºäºâ€œä¹è§‚â€çš„å‡è®¾ï¼Œè®¤ä¸ºæ•°æ®ç«äº‰çš„æƒ…å†µä¸å¸¸å‘ç”Ÿï¼Œå› æ­¤åœ¨æ“ä½œæ•°æ®æ—¶ä¸ç«‹å³åŠ é”ï¼Œè€Œæ˜¯åœ¨æ›´æ–°æ—¶æ£€æµ‹å†²çªã€‚è¿™ç§æœºåˆ¶åœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿååé‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº†ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ ¸å¿ƒç‰¹å¾ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ä¹è§‚é” (Optimistic Locking)&lt;/th&gt;
&lt;th&gt;æ‚²è§‚é” (Pessimistic Locking)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡è®¾å†²çªå¾ˆå°‘å‘ç”Ÿï¼Œåœ¨&lt;strong&gt;æäº¤æ›´æ–°æ—¶&lt;/strong&gt;æ‰æ£€æµ‹å†²çª&lt;/td&gt;
&lt;td&gt;å‡è®¾å†²çªç»å¸¸å‘ç”Ÿï¼Œåœ¨&lt;strong&gt;æ“ä½œå‰å…ˆåŠ é”&lt;/strong&gt;ç¡®ä¿ç‹¬å &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸é€šè¿‡&lt;strong&gt;ç‰ˆæœ¬å·ï¼ˆversionï¼‰&lt;/strong&gt; æˆ–&lt;strong&gt;æ—¶é—´æˆ³ï¼ˆtimestampï¼‰&lt;/strong&gt; å­—æ®µå®ç°&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;æˆ– &lt;code&gt;SELECT ... LOCK IN SHARE MODE&lt;/code&gt;ç­‰è¯­å¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ é”æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ“ä½œæ—¶éªŒè¯&lt;/td&gt;
&lt;td&gt;æ•°æ®è¯»å–æ—¶å³åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé«˜&lt;/strong&gt;ï¼Œæ— é”ç«äº‰ï¼Œé€‚åˆè¯»å¤šå†™å°‘åœºæ™¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½&lt;/strong&gt;ï¼Œé”æœºåˆ¶å¯èƒ½å¼•èµ·é˜»å¡ï¼Œé€‚åˆå†™å¤šè¯»å°‘åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‰ˆæœ¬å†²çªã€éœ€å¤„ç†é‡è¯•é€»è¾‘&lt;/td&gt;
&lt;td&gt;æ­»é”é£é™©ã€æ€§èƒ½ç“¶é¢ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†²çªæ¦‚ç‡ä½ã€è¯»å¤šå†™å°‘ã€è¿½æ±‚é«˜ååï¼ˆå¦‚è®¡æ•°å™¨ã€ç‚¹èµï¼‰&lt;/td&gt;
&lt;td&gt;å†²çªæ¦‚ç‡é«˜ã€å†™å¤šè¯»å°‘ã€è¦æ±‚å¼ºä¸€è‡´æ€§ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®ç°ä¹è§‚é”çš„ä¸¤ç§æ–¹å¼"&gt;ğŸ’¡ å®ç°ä¹è§‚é”çš„ä¸¤ç§æ–¹å¼
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”çš„å®ç°ä¸ä¾èµ–äºæ•°æ®åº“çš„åº•å±‚é”æœºåˆ¶ï¼Œè€Œæ˜¯åœ¨åº”ç”¨å±‚é€šè¿‡é€»è¾‘åˆ¤æ–­æ¥å®Œæˆã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§å¸¸è§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬å·æœºåˆ¶ï¼ˆVersion Numberï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨çš„å®ç°æ–¹å¼ã€‚åœ¨æ•°æ®è¡¨ä¸­å¢åŠ ä¸€ä¸ª &lt;code&gt;version&lt;/code&gt;æ•´å‹å­—æ®µã€‚å½“è¯»å–æ•°æ®æ—¶ï¼ŒåŒæ—¶è·å–å½“å‰ç‰ˆæœ¬å·ã€‚æ›´æ–°æ•°æ®æ—¶ï¼Œå°†ç‰ˆæœ¬å·ä½œä¸ºæ¡ä»¶è¿›è¡Œæ›´æ–°ï¼Œå¹¶å°†ç‰ˆæœ¬å·åŠ 1ã€‚å¦‚æœæ›´æ–°è¯­å¥è¿”å›çš„å—å½±å“è¡Œæ•°ä¸º0ï¼Œåˆ™è¯´æ˜ç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œæ„å‘³ç€æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œå½“å‰æ“ä½œå¤±è´¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æ›´æ–°æ•°æ®ï¼Œå¹¶æ£€æŸ¥ç‰ˆæœ¬
UPDATE products
SET price = 20, version = version + 1
WHERE id = 1 AND version = @old_version;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´æˆ³æœºåˆ¶ï¼ˆTimestampï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…¶åŸç†ä¸ç‰ˆæœ¬å·ç±»ä¼¼ï¼Œåªæ˜¯å°†ç‰ˆæœ¬å·å­—æ®µæ›¿æ¢ä¸ºä¸€ä¸ªæ—¶é—´æˆ³å­—æ®µï¼ˆå¦‚ &lt;code&gt;update_time&lt;/code&gt;ï¼‰ã€‚åœ¨æ›´æ–°æ—¶ï¼Œæ£€æŸ¥å½“å‰æ•°æ®åº“ä¸­çš„æ—¶é—´æˆ³æ˜¯å¦ä¸è¯»å–æ—¶çš„æ—¶é—´æˆ³ä¸€è‡´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE products
SET price = 20, update_time = CURRENT_TIMESTAMP
WHERE id = 1 AND update_time = @old_timestamp;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›¸å¯¹è€Œè¨€ï¼Œ&lt;strong&gt;ç‰ˆæœ¬å·æ–¹å¼æ›´ä¸ºå¸¸ç”¨&lt;/strong&gt;ï¼Œå› ä¸ºæ•´æ•°æ¯”è¾ƒçš„æ•ˆç‡é«˜äºæ—¶é—´æˆ³ï¼Œä¸”é¿å…äº†æœåŠ¡å™¨é—´æ—¶é—´åŒæ­¥å¯èƒ½å¸¦æ¥çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å·¥ä½œæµç¨‹ä¸å®æˆ˜ç¤ºä¾‹"&gt;ğŸ”„ å·¥ä½œæµç¨‹ä¸å®æˆ˜ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”çš„å…¸å‹å·¥ä½œæµç¨‹éµå¾ªâ€œè¯»å–-ä¿®æ”¹-éªŒè¯-æ›´æ–°â€çš„æ¨¡å¼ã€‚ä¸‹é¢çš„åºåˆ—å›¾æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹¶å‘æƒ…å†µä¸‹å¦‚ä½•å¤„ç†å†²çªï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sequenceDiagram
participant C1 as å®¢æˆ·ç«¯A
participant DB as æ•°æ®åº“
participant C2 as å®¢æˆ·ç«¯B
Note over C1,DB: æ­£å¸¸æ›´æ–°æµç¨‹
C1-&amp;gt;&amp;gt;DB: SELECT id, name, version FROM products WHERE id=1;
DB-&amp;gt;&amp;gt;C1: è¿”å›æ•°æ® (version=1)
C1-&amp;gt;&amp;gt;DB: UPDATE products SET name=&amp;#39;A_New&amp;#39;, version=2 WHERE id=1 AND version=1;
DB-&amp;gt;&amp;gt;C1: æ›´æ–°æˆåŠŸ (å½±å“è¡Œæ•°=1)
Note over C1,C2: å¹¶å‘å†²çªåœºæ™¯
C1-&amp;gt;&amp;gt;DB: SELECT id, name, version FROM products WHERE id=1;
DB-&amp;gt;&amp;gt;C1: è¿”å›æ•°æ® (version=1)
C2-&amp;gt;&amp;gt;DB: SELECT id, name, version FROM products WHERE id=1;
DB-&amp;gt;&amp;gt;C2: è¿”å›æ•°æ® (version=1)
C2-&amp;gt;&amp;gt;DB: UPDATE products SET name=&amp;#39;B_New&amp;#39;, version=2 WHERE id=1 AND version=1;
DB-&amp;gt;&amp;gt;C2: æ›´æ–°æˆåŠŸ (å½±å“è¡Œæ•°=1)ï¼Œversionå˜ä¸º2
C1-&amp;gt;&amp;gt;DB: UPDATE products SET name=&amp;#39;A_New&amp;#39;, version=2 WHERE id=1 AND version=1;
DB-&amp;gt;&amp;gt;C1: æ›´æ–°å¤±è´¥ (å½±å“è¡Œæ•°=0)ï¼Œå› ä¸ºversionå·²å˜ä¸º2
Note left of C1: æ£€æµ‹åˆ°å†²çªï¼Œè§¦å‘é‡è¯•é€»è¾‘æˆ–æŠ¥é”™
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨å®é™…ä»£ç ä¸­ï¼ˆä»¥MyBatisä¸ºä¾‹ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ£€æŸ¥UPDATEè¯­å¥æ‰§è¡Œåå—å½±å“çš„è¡Œæ•°ï¼ˆaffected rowsï¼‰æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä¼ªä»£ç ç¤ºä¾‹
public boolean updateProductWithOptimisticLock(Product product) {
int affectedRows = productDao.updateProduct(product);
if (affectedRows &amp;gt; 0) {
// æ›´æ–°æˆåŠŸ
return true;
} else {
// æ›´æ–°å¤±è´¥ï¼Œç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œæ•°æ®å·²è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹
// é€šå¸¸è¿™é‡Œä¼šåŠ å…¥é‡è¯•æœºåˆ¶æˆ–å‘ç”¨æˆ·è¿”å›é”™è¯¯ä¿¡æ¯
handleUpdateFailure(product);
return false;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ ¸å¿ƒä¼˜ç¼ºç‚¹ä¸åº”ç”¨åœºæ™¯"&gt;âš–ï¸ æ ¸å¿ƒä¼˜ç¼ºç‚¹ä¸åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;h4 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æå‡å¹¶å‘æ€§èƒ½&lt;/strong&gt;ï¼šç”±äºåœ¨è¯»å–é˜¶æ®µä¸åŠ é”ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶è¯»å–æ•°æ®ï¼Œæå¤§æé«˜äº†ç³»ç»Ÿçš„ååé‡ï¼Œç‰¹åˆ«é€‚åˆè¯»å¤šå†™å°‘çš„åº”ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ­»é”&lt;/strong&gt;ï¼šç”±äºä¸é•¿æœŸæŒæœ‰æ•°æ®åº“é”ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†æ­»é”é—®é¢˜çš„å‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¼ºç‚¹"&gt;ç¼ºç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†²çªå¤„ç†&lt;/strong&gt;ï¼šå½“æ›´æ–°å¤±è´¥æ—¶ï¼Œéœ€è¦æœ‰ç›¸åº”çš„å¤„ç†æœºåˆ¶ï¼Œå¦‚æ“ä½œå›æ»šã€è‡ªåŠ¨é‡è¯•æˆ–é€šçŸ¥ç”¨æˆ·ã€‚å¦‚æœç³»ç»Ÿå¹¶å‘å†²çªå¾ˆé«˜ï¼Œé¢‘ç¹çš„é‡è¯•åè€Œä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼ˆå¦‚CPUï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•ä¿è¯ç»å¯¹å¼ºä¸€è‡´æ€§&lt;/strong&gt;ï¼šå®ƒæä¾›çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œåœ¨æ›´æ–°éªŒè¯çš„ç¬é—´ï¼Œæ•°æ®å¯èƒ½å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…¸å‹åº”ç”¨åœºæ™¯"&gt;å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•†å“åº“å­˜æ‰£å‡&lt;/strong&gt;ï¼šåœ¨ç§’æ€æˆ–æŠ¢è´­æ´»åŠ¨ä¸­ï¼Œåº“å­˜æŸ¥è¯¢é¢‘ç¹ï¼Œä½†å®é™…æˆäº¤æœ‰é™ï¼Œä½¿ç”¨ä¹è§‚é”å¯ä»¥åº”å¯¹é«˜å¹¶å‘è¯»å–ï¼Œå¹¶åœ¨æœ€ç»ˆæ‰£å‡æ—¶ä¿è¯æ•°æ®æ­£ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¡æ•°å™¨ã€ç‚¹èµæ“ä½œ&lt;/strong&gt;ï¼šè¿™äº›åœºæ™¯æ›´æ–°å†²çªæ¦‚ç‡è¾ƒä½ï¼Œä¸”å¯¹å®æ—¶ä¸€è‡´æ€§è¦æ±‚ä¸æç«¯ï¼Œéå¸¸é€‚åˆä½¿ç”¨ä¹è§‚é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£ååŒç¼–è¾‘&lt;/strong&gt;ï¼šå¦‚å¤šäººåŒæ—¶ç¼–è¾‘æ–‡æ¡£ï¼Œå¯ä»¥åœ¨ä¿å­˜æ—¶æ£€æŸ¥ç‰ˆæœ¬ï¼Œæç¤ºç”¨æˆ·å¤„ç†å†²çªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒMySQLçš„ä¹è§‚é”æ˜¯ä¸€ç§åŸºäºåº”ç”¨å±‚é€»è¾‘çš„è½»é‡çº§å¹¶å‘æ§åˆ¶æ–¹æ¡ˆï¼Œé€šè¿‡ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³åœ¨æ›´æ–°æ—¶åˆ»éªŒè¯æ•°æ®ä¸€è‡´æ€§ã€‚å®ƒåœ¨&lt;strong&gt;è¯»å¤šå†™å°‘ã€å†²çªæ¦‚ç‡è¾ƒä½&lt;/strong&gt;çš„åœºæ™¯ä¸‹èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ä¸æ‰©å±•æ€§ã€‚ä½†åœ¨é«˜ç«äº‰æ€§çš„å†™æ“ä½œç¯å¢ƒä¸‹ï¼Œæ‚²è§‚é”å¯èƒ½æ˜¯æ›´ç¨³å¦¥çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨MySQLä¹è§‚é”ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å®ç°ç»†èŠ‚æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è¡¨ä¿®æ”¹"&gt;è¡¨ä¿®æ”¹
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­ä¿®æ”¹è¡¨ç»“æ„ä¸»è¦ä½¿ç”¨ &lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥ï¼Œé…åˆä¸åŒçš„å…³é”®å­—æ¥å®Œæˆå„ç§æ“ä½œã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»è¿™äº›å…³é”®å­—çš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚ä¸ºäº†æ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»è¿™äº›æ ¸å¿ƒå…³é”®å­—åŠå…¶åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…³é”®å­—&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ADD&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘è¡¨ä¸­æ·»åŠ æ–°åˆ—æˆ–ç´¢å¼•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å ADD åˆ—å æ•°æ®ç±»å‹;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;DROP&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»è¡¨ä¸­åˆ é™¤åˆ—æˆ–ç´¢å¼•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å DROP åˆ—å;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CHANGE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é‡å‘½ååˆ—&lt;/strong&gt;å¹¶å¯èƒ½ä¿®æ”¹å…¶æ•°æ®ç±»å‹æˆ–çº¦æŸ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å CHANGE æ—§åˆ—å æ–°åˆ—å æ–°æ•°æ®ç±»å‹;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;MODIFY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹åˆ—çš„æ•°æ®ç±»å‹ã€çº¦æŸæˆ–&lt;strong&gt;ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å MODIFY åˆ—å æ–°æ•°æ®ç±»å‹;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;RENAME&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹è¡¨å&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE æ—§è¡¨å RENAME TO æ–°è¡¨å;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ALTER COLUMN&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®æˆ–åˆ é™¤åˆ—çš„é»˜è®¤å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å ALTER åˆ—å SET DEFAULT å€¼;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å„å…³é”®å­—è¯¦è§£ä¸ç¤ºä¾‹"&gt;ğŸ”‘ å„å…³é”®å­—è¯¦è§£ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹æ¯ä¸ªå…³é”®å­—çš„å…·ä½“ç”¨æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ·»åŠ å­—æ®µ (&lt;code&gt;ADD&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ADD&lt;/code&gt;å…³é”®å­—å¯ä»¥ä¸ºå·²å­˜åœ¨çš„è¡¨æ·»åŠ æ–°çš„åˆ—ã€‚ä½ å¯ä»¥æŒ‡å®šæ–°åˆ—çš„æ•°æ®ç±»å‹å’Œçº¦æŸæ¡ä»¶ï¼Œè¿˜å¯ä»¥æ§åˆ¶æ–°åˆ—çš„ä½ç½®ï¼ˆåœ¨è¡¨é¦–ã€è¡¨å°¾æˆ–æŸä¸ªç‰¹å®šåˆ—ä¹‹åï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;users&lt;/code&gt;è¡¨çš„ &lt;code&gt;username&lt;/code&gt;åˆ—åæ·»åŠ ä¸€ä¸ª &lt;code&gt;VARCHAR(50)&lt;/code&gt;ç±»å‹çš„ &lt;code&gt;nickname&lt;/code&gt;åˆ—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users ADD nickname VARCHAR(50) AFTER username;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¡¨é¦–æ·»åŠ åˆ—å¯ä»¥ä½¿ç”¨ &lt;code&gt;FIRST&lt;/code&gt;å…³é”®å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤å­—æ®µ (&lt;code&gt;DROP&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;DROP&lt;/code&gt;å¯ä»¥åˆ é™¤è¡¨ä¸­ä¸å†éœ€è¦çš„åˆ—ã€‚&lt;strong&gt;æ­¤æ“ä½œä¼šç›´æ¥åˆ é™¤åˆ—åŠå…¶æ•°æ®ï¼Œä¸”é€šå¸¸ä¸å¯é€†&lt;/strong&gt;ï¼Œæ‰§è¡Œå‰åŠ¡å¿…ç¡®è®¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šä» &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­åˆ é™¤ &lt;code&gt;nickname&lt;/code&gt;åˆ—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users DROP nickname;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å‘½åå­—æ®µ (&lt;code&gt;CHANGE&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CHANGE&lt;/code&gt;å…³é”®å­—éå¸¸å¼ºå¤§ï¼Œå®ƒå¯ä»¥åŒæ—¶æ”¹å˜åˆ—çš„åç§°ã€æ•°æ®ç±»å‹å’Œçº¦æŸã€‚&lt;strong&gt;æ³¨æ„ï¼Œå³ä½¿ä½ åªæƒ³é‡å‘½åè€Œä¸æ”¹å˜ç±»å‹ï¼Œä¹Ÿå¿…é¡»é‡æ–°å£°æ˜æ•°æ®ç±»å‹&lt;/strong&gt;ï¼ˆé€šå¸¸ä¸åŸæ¥ä¿æŒä¸€è‡´ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°† &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­çš„ &lt;code&gt;phone&lt;/code&gt;åˆ—é‡å‘½åä¸º &lt;code&gt;telephone&lt;/code&gt;ï¼Œå¹¶å°†å…¶æ•°æ®ç±»å‹æ”¹ä¸º &lt;code&gt;VARCHAR(20)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users CHANGE phone telephone VARCHAR(20);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹å­—æ®µå®šä¹‰ (&lt;code&gt;MODIFY&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ åªæƒ³ä¿®æ”¹åˆ—çš„æ•°æ®ç±»å‹ã€çº¦æŸæˆ–ä½ç½®ï¼Œè€Œä¸éœ€è¦æ”¹å˜åˆ—åï¼Œé‚£ä¹ˆ &lt;code&gt;MODIFY&lt;/code&gt;æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚&lt;code&gt;CHANGE&lt;/code&gt;å¯ä»¥å®Œæˆ &lt;code&gt;MODIFY&lt;/code&gt;çš„åŠŸèƒ½ï¼Œä½† &lt;code&gt;MODIFY&lt;/code&gt;æ— éœ€æŒ‡å®šä¸¤æ¬¡åˆ—åï¼Œè¯­æ³•æ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°† &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ &lt;code&gt;email&lt;/code&gt;åˆ—çš„æ•°æ®ç±»å‹ä¿®æ”¹ä¸º &lt;code&gt;VARCHAR(100)&lt;/code&gt;å¹¶è®¾ç½®ä¸ºéç©º (&lt;code&gt;NOT NULL&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users MODIFY email VARCHAR(100) NOT NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;MODIFY&lt;/code&gt;æ¥è°ƒæ•´åˆ—çš„ä½ç½®ï¼Œä¾‹å¦‚ &lt;code&gt;MODIFY email VARCHAR(100) AFTER username;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹è¡¨å (&lt;code&gt;RENAME TO&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;RENAME TO&lt;/code&gt;å¯ä»¥ä¿®æ”¹è¡¨çš„åç§°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°†è¡¨ &lt;code&gt;user_info&lt;/code&gt;é‡å‘½åä¸º &lt;code&gt;user_details&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE user_info RENAME TO user_details;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹é»˜è®¤å€¼ (&lt;code&gt;ALTER COLUMN&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸“é—¨ç”¨äºè®¾ç½®æˆ–åˆ é™¤åˆ—çš„é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šä¸º &lt;code&gt;users&lt;/code&gt;è¡¨çš„ &lt;code&gt;status&lt;/code&gt;åˆ—è®¾ç½®é»˜è®¤å€¼ &amp;lsquo;active&amp;rsquo;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users ALTER status SET DEFAULT &amp;#39;active&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ é™¤é»˜è®¤å€¼ï¼š&lt;code&gt;ALTER TABLE users ALTER status DROP DEFAULT;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;åœ¨ä¿®æ”¹è¡¨ç»“æ„æ—¶ï¼Œä»¥ä¸‹å‡ ç‚¹éœ€è¦ç‰¹åˆ«ç•™æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ‰§è¡Œä»»ä½•å¯èƒ½å½±å“æ•°æ®çš„ &lt;code&gt;ALTER TABLE&lt;/code&gt;æ“ä½œï¼ˆå¦‚ &lt;code&gt;DROP&lt;/code&gt;, &lt;code&gt;CHANGE&lt;/code&gt;, &lt;code&gt;MODIFY&lt;/code&gt;ï¼‰ä¹‹å‰ï¼Œ&lt;strong&gt;å¼ºçƒˆå»ºè®®å…ˆå¤‡ä»½æ•°æ®&lt;/strong&gt;ã€‚ä¿®æ”¹æ•°æ®ç±»å‹å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æˆªæ–­ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å˜çŸ­æˆ–æ•°å­—ç±»å‹æ”¹å˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;CHANGE&lt;/code&gt;vs &lt;code&gt;MODIFY&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„å…³é”®å­—ï¼Œè®°ä½å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ”¹å˜åˆ—åæ—¶ï¼Œä½¿ç”¨ &lt;code&gt;CHANGE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªä¿®æ”¹å®šä¹‰è€Œä¸æ”¹åæ—¶ï¼Œä½¿ç”¨ &lt;code&gt;MODIFY&lt;/code&gt;&lt;/strong&gt; æ›´ç®€æ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¸é”å®š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§è¡¨çš„ &lt;code&gt;ALTER TABLE&lt;/code&gt;æ“ä½œå¯èƒ½ä¼šé”è¡¨ï¼Œå½±å“æœåŠ¡ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œï¼Œå¹¶å……åˆ†æµ‹è¯•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–è¡¨çº§ä¿®æ”¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥çš„åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œé™¤äº†ä¿®æ”¹åˆ—ï¼Œè¿˜å¯ä»¥ç”¨äºç®¡ç†ç´¢å¼•ï¼ˆå¦‚ &lt;code&gt;ADD INDEX&lt;/code&gt;, &lt;code&gt;DROP INDEX&lt;/code&gt;ï¼‰ã€æ›´æ”¹è¡¨çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚ &lt;code&gt;ENGINE=InnoDB&lt;/code&gt;ï¼‰å’Œå­—ç¬¦é›†ï¼ˆå¦‚ &lt;code&gt;CHARACTER SET utf8mb4&lt;/code&gt;ï¼‰ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡ MySQL ä¸­ä¿®æ”¹è¡¨ç»“æ„çš„å…³é”®å­—ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ“ä½œæœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ï¼&lt;/p&gt;
&lt;h2 id="nvcahr"&gt;nvcahr
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;NVARCHAR&lt;/code&gt;æ•°æ®ç±»å‹ç”¨äºå­˜å‚¨å¯å˜é•¿åº¦çš„ Unicode å­—ç¬¦æ•°æ®ï¼Œéå¸¸é€‚åˆå¤„ç†å¤šè¯­è¨€æ–‡æœ¬ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç‰¹å¾ä»¥åŠä¸ç›¸å…³æ•°æ®ç±»å‹çš„å¯¹æ¯”ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡é‡ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;NVARCHAR&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;VARCHAR&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CHAR&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦ç¼–ç &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Unicode&lt;/strong&gt; (å¦‚ UTF-8)&lt;/td&gt;
&lt;td&gt;é Unicode (å¦‚ ASCII, Latin1)&lt;/td&gt;
&lt;td&gt;é Unicode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰&lt;strong&gt;å­—ç¬¦&lt;/strong&gt;è®¡ç®—é•¿åº¦&lt;/td&gt;
&lt;td&gt;æŒ‰&lt;strong&gt;å­—èŠ‚&lt;/strong&gt;è®¡ç®—é•¿åº¦&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œä¸è¶³éƒ¨åˆ†ç”¨ç©ºæ ¼å¡«å……&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ç©ºé—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªå­—ç¬¦é€šå¸¸å ç”¨æ›´å¤šå­—èŠ‚ï¼ˆå¦‚2-4å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;æŒ‰å®é™…å­—èŠ‚é•¿åº¦å­˜å‚¨ï¼ˆè‹±æ–‡å­—ç¬¦1å­—èŠ‚ï¼Œä¸­æ–‡é€šå¸¸3å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œåˆ†é…å®šä¹‰çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§é•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€å¤§å…è®¸çš„&lt;strong&gt;å­—ç¬¦æ•°&lt;/strong&gt;ï¼ˆå—è¡Œå¤§å°é™åˆ¶ï¼Œé€šå¸¸å¾ˆå¤§ï¼‰&lt;/td&gt;
&lt;td&gt;æœ€å¤§å…è®¸çš„&lt;strong&gt;å­—èŠ‚æ•°&lt;/strong&gt;ï¼ˆå¦‚65,535å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œæœ€å¤§255å­—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦å­˜å‚¨å¤šè¯­è¨€å­—ç¬¦ï¼ˆå¦‚ä¸­ã€æ—¥ã€éŸ©æ–‡ï¼‰&lt;/td&gt;
&lt;td&gt;ä»…å­˜å‚¨è‹±æ–‡ã€æ•°å­—åŠç‰¹å®šå•å­—èŠ‚å­—ç¬¦&lt;/td&gt;
&lt;td&gt;é•¿åº¦å›ºå®šçš„æ•°æ®ï¼ˆå¦‚èº«ä»½è¯å·ã€æ‰‹æœºå·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®ç‰¹æ€§ä¸ä½¿ç”¨æ–¹æ³•"&gt;ğŸ’¡ å…³é”®ç‰¹æ€§ä¸ä½¿ç”¨æ–¹æ³•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Unicode æ”¯æŒ&lt;/strong&gt;ï¼š&lt;code&gt;NVARCHAR&lt;/code&gt;çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ”¯æŒ &lt;strong&gt;Unicode&lt;/strong&gt; å­—ç¬¦é›†ï¼ˆåœ¨ MySQL ä¸­é€šå¸¸æŒ‡ &lt;code&gt;utf8&lt;/code&gt;æˆ–æ›´æ¨èçš„ &lt;code&gt;utf8mb4&lt;/code&gt;ï¼‰ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥æ¯«æ— å‹åŠ›åœ°å­˜å‚¨ä¸­æ–‡ã€æ—¥æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ã€è¡¨æƒ…ç¬¦å·ï¼ˆEmojiï¼‰ç­‰ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰å­—ç¬¦ï¼Œç¡®ä¿åœ¨å¤šè¯­è¨€ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°ä¹±ç  ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯å˜é•¿åº¦&lt;/strong&gt;ï¼šå®ƒæ˜¯å¯å˜é•¿åº¦çš„ï¼Œä»…ä½¿ç”¨å¿…è¦çš„å­˜å‚¨ç©ºé—´æ¥å­˜æ”¾æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª &lt;code&gt;NVARCHAR(100)&lt;/code&gt;çš„åˆ—ï¼Œå¦‚æœåªå­˜å‚¨äº†â€œä½ å¥½â€ä¸¤ä¸ªå­—ç¬¦ï¼Œå®ƒå¤§çº¦åªå ç”¨å‡ ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ï¼Œè€Œä¸æ˜¯100ä¸ªå­—ç¬¦çš„æœ€å¤§é¢„ç•™ç©ºé—´ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ–¹æ³•&lt;/strong&gt;ï¼šåœ¨åˆ›å»ºè¡¨æ—¶ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å®šä¹‰ &lt;code&gt;NVARCHAR&lt;/code&gt;åˆ—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ç¡®ä¿ &lt;code&gt;NVARCHAR&lt;/code&gt;åˆ—æ­£ç¡®å­˜å‚¨ Unicode å­—ç¬¦ï¼Œå»ºè®®å°†è¡¨æˆ–æ•°æ®åº“çš„å­—ç¬¦é›†è®¾ç½®ä¸º &lt;code&gt;utf8mb4&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE Users (
id INT PRIMARY KEY,
username NVARCHAR(50),
address NVARCHAR(100)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ’å…¥å’ŒæŸ¥è¯¢æ•°æ®ä¸ä½¿ç”¨å…¶ä»–å­—ç¬¦ä¸²ç±»å‹æ²¡æœ‰åŒºåˆ«ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO Users (id, username, address) VALUES (1, &amp;#39;å¼ ä¸‰&amp;#39;, &amp;#39;åŒ—äº¬å¸‚&amp;#39;);
SELECT * FROM Users WHERE username LIKE &amp;#39;å¼ %&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æƒè¡¡ä¸é€‰æ‹©å»ºè®®"&gt;âš–ï¸ æƒè¡¡ä¸é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©æ˜¯å¦ä½¿ç”¨ &lt;code&gt;NVARCHAR&lt;/code&gt;ï¼Œä¸»è¦æ˜¯åœ¨&lt;strong&gt;å­˜å‚¨ç©ºé—´&lt;/strong&gt;ã€&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;å’Œ&lt;strong&gt;å…¼å®¹æ€§&lt;/strong&gt;ä¹‹é—´åšæƒè¡¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹© &lt;code&gt;NVARCHAR&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¡¹ç›®éœ€è¦æ”¯æŒå¤šè¯­è¨€&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯åŒ…å«ä¸œäºšæ–‡å­—ï¼ˆå¦‚ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼‰æˆ–ç‰¹æ®Šç¬¦å· ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªæ¥æœ‰å›½é™…åŒ–æ‰©å±•çš„å¯èƒ½&lt;/strong&gt;ï¼Œä½¿ç”¨ &lt;code&gt;NVARCHAR&lt;/code&gt;å¯ä»¥é¿å…åæœŸå› å­—ç¬¦é›†é—®é¢˜å¸¦æ¥çš„è¿ç§»éº»çƒ¦ã€‚&lt;/li&gt;
&lt;li&gt;å­˜å‚¨&lt;strong&gt;è¡¨æƒ…ç¬¦å·ï¼ˆEmojiï¼‰&lt;/strong&gt; å¿…é¡»ä½¿ç”¨æ”¯æŒ Unicode çš„å­—ç¬¦é›†ï¼ˆå¦‚ &lt;code&gt;utf8mb4&lt;/code&gt;ï¼‰ï¼Œå¯¹åº”çš„åˆ—ç±»å‹å¯ä»¥æ˜¯ &lt;code&gt;NVARCHAR&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶è€ƒè™‘ &lt;code&gt;VARCHAR&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥&lt;strong&gt;ç¡®å®šåº”ç”¨ä»…ä½¿ç”¨å•å­—èŠ‚å­—ç¬¦&lt;/strong&gt;ï¼ˆå¦‚çº¯è‹±æ–‡ã€æ•°å­—çš„æ—¥å¿—ã€ä»£ç ç­‰ï¼‰ï¼Œæ­¤æ—¶ &lt;code&gt;VARCHAR&lt;/code&gt;åœ¨å­˜å‚¨ç©ºé—´ä¸Šæ›´é«˜æ•ˆ ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹&lt;strong&gt;å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½æœ‰æè‡´è¦æ±‚&lt;/strong&gt;ï¼Œä¸”èƒ½å®Œå…¨æ’é™¤å¤šè¯­è¨€å­—ç¬¦çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-5"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦é›†è®¾ç½®æ˜¯å…³é”®&lt;/strong&gt;ï¼šåœ¨ MySQL ä¸­ï¼Œ&lt;code&gt;NVARCHAR&lt;/code&gt;çš„å®é™…è¡Œä¸ºä¾èµ–äºæ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†è®¾ç½®ã€‚åŠ¡å¿…ç¡®ä¿å…¶è®¾ç½®ä¸º &lt;code&gt;utf8mb4&lt;/code&gt;ä»¥è·å¾—å®Œæ•´çš„ Unicode æ”¯æŒï¼ˆåŒ…æ‹¬è¡¨æƒ…ç¬¦å·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿åº¦å®šä¹‰æŒ‡å­—ç¬¦æ•°&lt;/strong&gt;ï¼šå®šä¹‰ &lt;code&gt;NVARCHAR(50)&lt;/code&gt;æ„å‘³ç€å¯ä»¥å­˜å‚¨æœ€å¤š50ä¸ªå­—ç¬¦ï¼Œæ— è®ºæ˜¯ä¸­æ–‡ã€è‹±æ–‡è¿˜æ˜¯å…¶ä»–ä»»ä½•å­—ç¬¦ï¼Œéƒ½æ˜¯50ä¸ªâ€œå­—â€ï¼Œè€Œä¸æ˜¯å­—èŠ‚ ã€‚è¿™ä¸ &lt;code&gt;VARCHAR(n)&lt;/code&gt;ä¸­ &lt;code&gt;n&lt;/code&gt;ä»£è¡¨å­—èŠ‚æ•°æœ‰æ‰€ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸ç¢ç‰‡åŒ–&lt;/strong&gt;ï¼šè™½ç„¶å¯å˜é•¿åº¦èŠ‚çœäº†ç©ºé—´ï¼Œä½†åœ¨é¢‘ç¹æ›´æ–°æ•°æ®å¯¼è‡´é•¿åº¦å˜åŒ–æ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸€äº›å­˜å‚¨ç¢ç‰‡ã€‚å®šæœŸè¿›è¡Œè¡¨ä¼˜åŒ–æœ‰åŠ©äºä¿æŒæ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL ä¸­çš„ &lt;code&gt;NVARCHAR&lt;/code&gt;ç±»å‹ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å­—ç¬¦é›†é€‰æ‹©è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="identity"&gt;identity
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;IDENTITY(a, b)&lt;/code&gt;æ˜¯ SQL Server ä¸­ç”¨äºåˆ›å»ºè‡ªåŠ¨å¢é•¿åˆ—çš„å…³é”®å±æ€§ï¼Œéå¸¸é€‚åˆç”¨ä½œè¡¨çš„ä¸»é”®ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿç†è§£å…¶æ ¸å¿ƒè¦ç´ ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;é»˜è®¤å€¼&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;a (ç§å­ Seed)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èµ·å§‹å€¼&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;æŒ‡å®šè‡ªåŠ¨å¢é•¿åºåˆ—ä»å“ªä¸ªæ•°å­—å¼€å§‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;b (å¢é‡ Increment)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ­¥é•¿å€¼&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ¯æ¬¡è‡ªåŠ¨å¢åŠ å¤šå°‘&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•ä¸ç¤ºä¾‹"&gt;ğŸ’¡ åŸºæœ¬è¯­æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;IDENTITY&lt;/code&gt;å±æ€§é€šå¸¸åœ¨åˆ›å»ºè¡¨ï¼ˆ&lt;code&gt;CREATE TABLE&lt;/code&gt;è¯­å¥ï¼‰æ—¶ä½¿ç”¨ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;åˆ—å æ•°æ®ç±»å‹ IDENTITY(a, b) [PRIMARY KEY]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;Customers&lt;/code&gt;çš„è¡¨ï¼Œå¹¶è®© &lt;code&gt;CustomerID&lt;/code&gt;ä» 1 å¼€å§‹ï¼Œæ¯æ¬¡å¢åŠ  1ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE Customers (
CustomerID INT IDENTITY(1,1) PRIMARY KEY,
CustomerName NVARCHAR(50) NOT NULL
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ’å…¥æ•°æ®æ—¶ï¼Œ&lt;strong&gt;æ— éœ€&lt;/strong&gt;ä¸º &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—æŒ‡å®šå€¼ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨å¤„ç†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO Customers (CustomerName) VALUES (&amp;#39;å¼ ä¸‰&amp;#39;);
INSERT INTO Customers (CustomerName) VALUES (&amp;#39;æå››&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œåï¼Œ&lt;code&gt;CustomerID&lt;/code&gt;çš„å€¼ä¼šè‡ªåŠ¨æˆä¸º 1 å’Œ 2ã€‚&lt;/p&gt;
&lt;h3 id="-è¿›é˜¶æ“ä½œä¸ç®¡ç†"&gt;ğŸ”§ è¿›é˜¶æ“ä½œä¸ç®¡ç†
&lt;/h3&gt;&lt;p&gt;é™¤äº†åŸºæœ¬ç”¨æ³•ï¼Œç®¡ç† &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—è¿˜æœ‰ä¸€äº›å®ç”¨çš„è¿›é˜¶æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–åˆšæ’å…¥çš„ID&lt;/strong&gt;ï¼šæ’å…¥æ•°æ®åï¼Œé€šå¸¸éœ€è¦ç«‹å³è·å–ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„IDã€‚åœ¨ SQL Server ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;SCOPE_IDENTITY()&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO Customers (CustomerName) VALUES (&amp;#39;ç‹äº”&amp;#39;);
SELECT SCOPE_IDENTITY() AS NewCustomerID; -- è¿”å›æœ€æ–°æ’å…¥çš„CustomerID
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰‹åŠ¨æ’å…¥ç‰¹å®šå€¼&lt;/strong&gt;ï¼šæœ‰æ—¶éœ€è¦ä¸º &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„å€¼ï¼ˆä¾‹å¦‚ï¼Œæ•°æ®è¿ç§»æ—¶ï¼‰ã€‚è¿™æ—¶éœ€è¦å…ˆç”¨ &lt;code&gt;SET IDENTITY_INSERT ON&lt;/code&gt;æ‰“å¼€æƒé™ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET IDENTITY_INSERT Customers ON;
INSERT INTO Customers (CustomerID, CustomerName) VALUES (10, &amp;#39;ç‰¹å®šå®¢æˆ·&amp;#39;);
SET IDENTITY_INSERT Customers OFF; -- æ“ä½œå®Œæˆåè®°å¾—å…³é—­
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡ç½®ç§å­å€¼&lt;/strong&gt;ï¼šå¦‚æœåˆ é™¤äº†å¤§é‡æ•°æ®ï¼Œæˆ–è€…éœ€è¦é‡æ–°åˆå§‹åŒ–IDåºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;DBCC CHECKIDENT&lt;/code&gt;å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†Customersè¡¨çš„å½“å‰æ ‡è¯†å€¼é‡ç½®ä¸º100ï¼Œä¸‹ä¸€æ¡æ’å…¥çš„è®°å½•IDå°†ä¸º101
DBCC CHECKIDENT (&amp;#39;Customers&amp;#39;, RESEED, 100);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-6"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;IDENTITY&lt;/code&gt;å±æ€§æ—¶ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«ç•™æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å”¯ä¸€æ€§ä¸ä¸»é”®&lt;/strong&gt;ï¼šè™½ç„¶ &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—é€šå¸¸èƒ½ç”Ÿæˆå”¯ä¸€å€¼ï¼Œä½†å®ƒ&lt;strong&gt;å¹¶ä¸è‡ªåŠ¨ä¿è¯å”¯ä¸€æ€§&lt;/strong&gt;ã€‚åŠ¡å¿…é€šè¿‡ä¸»é”®ï¼ˆ&lt;code&gt;PRIMARY KEY&lt;/code&gt;ï¼‰æˆ–å”¯ä¸€çº¦æŸï¼ˆ&lt;code&gt;UNIQUE CONSTRAINT&lt;/code&gt;ï¼‰æ¥å¼ºåˆ¶å”¯ä¸€ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„åšæ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯ä¸ªè¡¨çš„é™åˆ¶&lt;/strong&gt;ï¼šä¸€ä¸ªè¡¨&lt;strong&gt;æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª&lt;/strong&gt; &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å€¼èŒƒå›´&lt;/strong&gt;ï¼šæ ¹æ®æ‰€é€‰æ•°æ®ç±»å‹ï¼ˆå¦‚ &lt;code&gt;INT&lt;/code&gt;æˆ– &lt;code&gt;BIGINT&lt;/code&gt;ï¼‰ï¼Œ&lt;code&gt;IDENTITY&lt;/code&gt;åˆ—æœ‰æœ€å¤§å€¼é™åˆ¶ã€‚ä½¿ç”¨ &lt;code&gt;INT&lt;/code&gt;æ—¶ï¼Œéœ€æ³¨æ„å…¶ä¸Šé™ï¼ˆçº¦21äº¿ï¼‰ï¼Œå¯¹äºæé«˜é¢‘æ’å…¥çš„è¡¨ï¼Œè€ƒè™‘ä½¿ç”¨ &lt;code&gt;BIGINT&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—´éš™ç°è±¡&lt;/strong&gt;ï¼šå¦‚æœæ’å…¥æ“ä½œå¤±è´¥æˆ–äº‹åŠ¡å›æ»šï¼Œ&lt;code&gt;IDENTITY&lt;/code&gt;å€¼ä¹Ÿä¼šé€’å¢ï¼Œå¯¼è‡´åºåˆ—ä¸­å‡ºç°â€œé—´éš™â€ã€‚è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œé€šå¸¸ä¸å½±å“ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–æ•°æ®åº“çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ•°æ®åº“çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;äº†è§£ &lt;code&gt;IDENTITY&lt;/code&gt;åœ¨å…¶ä»–æ•°æ®åº“ä¸­çš„ç±»ä¼¼å®ç°æœ‰åŠ©äºçŸ¥è¯†è¿ç§»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MySQL&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;AUTO_INCREMENT&lt;/code&gt;å±æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE Users (user_id INT AUTO_INCREMENT PRIMARY KEY);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Oracle&lt;/strong&gt;ï¼šä½¿ç”¨ç‹¬ç«‹çš„&lt;strong&gt;åºåˆ—ï¼ˆSequenceï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;è§¦å‘å™¨ï¼ˆTriggerï¼‰&lt;/strong&gt; æœºåˆ¶æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡ &lt;code&gt;IDENTITY(a, b)&lt;/code&gt;çš„ç”¨æ³•ã€‚å¦‚æœä½ æœ‰ä»»ä½•ç‰¹å®šçš„åº”ç”¨åœºæ™¯æƒ³è¿›ä¸€æ­¥è®¨è®ºï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥ã€‚&lt;/p&gt;
&lt;h2 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«
&lt;/h2&gt;&lt;p&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œæ­»é”æ˜¯æ•°æ®åº“å¹¶å‘æ§åˆ¶ä¸­çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ç€å¯†åˆ‡è€Œå¤æ‚çš„å…³ç³»ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;é€‰æ‹©è¶Šé«˜çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“ä¸ºä¿éšœæ•°æ®ä¸€è‡´æ€§è€Œä½¿ç”¨çš„é”æœºåˆ¶é€šå¸¸å°±è¶Šä¸¥æ ¼ï¼Œè¿™å¾€å¾€ä¼šå¢åŠ æ­»é”å‘ç”Ÿçš„æ¦‚ç‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼ç›´è§‚åœ°å±•ç¤ºäº†ä¸åŒéš”ç¦»çº§åˆ«ä¸æ­»é”é£é™©åŠå¹¶å‘é—®é¢˜ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;éš”ç¦»çº§åˆ«&lt;/th&gt;
&lt;th&gt;æ­»é”é£é™©&lt;/th&gt;
&lt;th&gt;è„è¯»&lt;/th&gt;
&lt;th&gt;ä¸å¯é‡å¤è¯»&lt;/th&gt;
&lt;th&gt;å¹»è¯»&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒé”æœºåˆ¶ç®€è¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»æœªæäº¤ (Read Uncommitted)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;å‡ ä¹ä¸åŠ å…±äº«é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»å·²æäº¤ (Read Committed)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;è¯­å¥çº§å¿«ç…§ï¼Œå†™æ—¶åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯é‡å¤è¯» (Repeatable Read)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢ (InnoDB)&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨è¡Œé” + &lt;strong&gt;é—´éš™é” (Gap Lock)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸²è¡ŒåŒ– (Serializable)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ (ä½†å¹¶å‘æ€§èƒ½æœ€å·®)&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;è¯»æ“ä½œä¹Ÿå¯èƒ½åŠ é”ï¼Œè¿‘ä¼¼ä¸²è¡Œæ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸¤è€…å…³ç³»"&gt;ğŸ’¡ æ·±å…¥ç†è§£ä¸¤è€…å…³ç³»
&lt;/h3&gt;&lt;p&gt;æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–æ›´å¤šäº‹åŠ¡ç›¸äº’ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”èµ„æºï¼Œå¯¼è‡´æ‰€æœ‰äº‹åŠ¡éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œçš„çŠ¶æ€ã€‚å®ƒçš„äº§ç”Ÿéœ€è¦åŒæ—¶æ»¡è¶³äº’æ–¥ã€ä¸å¯å‰¥å¤ºã€å æœ‰ä¸”ç­‰å¾…å’Œå¾ªç¯ç­‰å¾…å››ä¸ªæ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«åˆ™æ˜¯ä¸ºäº†åœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå¹³è¡¡&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ç³»ç»Ÿæ€§èƒ½&lt;/strong&gt;çš„æƒè¡¡ç­–ç•¥ã€‚çº§åˆ«è¶Šé«˜ï¼Œä¸€è‡´æ€§ä¿éšœè¶Šå¼ºï¼Œä½†å¹¶å‘åº¦å¯èƒ½è¶Šä½ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä»¬ä¹‹é—´çš„æ ¸å¿ƒè”ç³»åœ¨äºï¼š&lt;strong&gt;æ›´é«˜çš„äº‹åŠ¡éš”ç¦»çº§åˆ«é€šè¿‡æ›´ä¸¥æ ¼ã€æ›´é•¿æ—¶é—´çš„é”æŒæœ‰æ¥é˜²æ­¢å¹¶å‘é—®é¢˜ï¼Œè¿™æ°æ°å¢åŠ äº†æ»¡è¶³æ­»é”æ¡ä»¶ï¼ˆå°¤å…¶æ˜¯â€œå¾ªç¯ç­‰å¾…â€æ¡ä»¶ï¼‰çš„æœºä¼š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å„çº§åˆ«ä¸‹çš„æ­»é”é£é™©å‰–æ"&gt;ğŸ” å„çº§åˆ«ä¸‹çš„æ­»é”é£é™©å‰–æ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯»å·²æäº¤ vs. å¯é‡å¤è¯»&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…³é”®çš„å¯¹æ¯”ã€‚&lt;code&gt;è¯»å·²æäº¤&lt;/code&gt;éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡é€šå¸¸åªé”å®šå®ƒå®é™…ä¿®æ”¹çš„è¡Œã€‚è€Œåœ¨ &lt;code&gt;å¯é‡å¤è¯»&lt;/code&gt;ï¼ˆMySQLçš„é»˜è®¤çº§åˆ«ï¼‰ä¸‹ï¼Œä¸ºäº†é˜²æ­¢å¹»è¯»ï¼ŒInnoDBå¼•æ“ä¼šå¼•å…¥&lt;strong&gt;é—´éš™é”&lt;/strong&gt;ã€‚é—´éš™é”ä¼šé”å®šä¸€ä¸ªç´¢å¼•èŒƒå›´å†…çš„é—´éš™ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¯¥èŒƒå›´å†…æ’å…¥æ•°æ®ã€‚è¿™å¤§å¤§å¢åŠ äº†é”çš„å†²çªé¢ï¼Œæ˜¯å¯¼è‡´å¯é‡å¤è¯»çº§åˆ«ä¸‹æ­»é”é£é™©æ˜¾è‘—å‡é«˜çš„ä¸»è¦åŸå› ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§çš„æ­»é”åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ é”é¡ºåºä¸ä¸€è‡´&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„æ­»é”åŸå› ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡Aå…ˆé”è¡Œ1ï¼Œå†è¯·æ±‚è¡Œ2ï¼›è€Œäº‹åŠ¡Bå…ˆé”è¡Œ2ï¼Œå†è¯·æ±‚è¡Œ1ã€‚å½“å®ƒä»¬å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå°±å®¹æ˜“å½¢æˆå¾ªç¯ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—´éš™é”å†²çª&lt;/strong&gt;ï¼šåœ¨å¯é‡å¤è¯»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡Aå’ŒBå¯èƒ½å¯¹åŒä¸€ä¸ªé—´éš™åŠ äº†é—´éš™é”ã€‚å½“å®ƒä»¬åŒæ—¶æƒ³åœ¨è¯¥é—´éš™å†…æ’å…¥æ–°æ•°æ®æ—¶ï¼Œå°±ä¼šå› äº’ç›¸ç­‰å¾…å¯¹æ–¹çš„æ’å…¥æ„å‘é”è€Œå‘ç”Ÿæ­»é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ä¸å­˜åœ¨çš„è®°å½•åŠ é”&lt;/strong&gt;ï¼šæŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„è®°å½•æ—¶ï¼Œæ•°æ®åº“å¯èƒ½ä¼šåŠ é—´éš™é”ã€‚å¦‚æœä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«å¯¹ä¸åŒçš„ä¸å­˜åœ¨çš„è®°å½•åŠ é”ï¼Œç„¶åå°è¯•æ’å…¥ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ­»é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ­»é”çš„åº”å¯¹ç­–ç•¥"&gt;âš™ï¸ æ­»é”çš„åº”å¯¹ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;å°½ç®¡æ­»é”æ— æ³•å®Œå…¨é¿å…ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—ç­–ç•¥æ¥æœ‰æ•ˆç®¡ç†å’Œå‡å°‘å…¶å½±å“ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆç†é€‰æ‹©éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€ä½å¿…è¦éš”ç¦»çº§åˆ«ã€‚å¦‚æœä¸šåŠ¡èƒ½å®¹å¿ä¸å¯é‡å¤è¯»æˆ–å¹»è¯»ï¼Œä½¿ç”¨ &lt;code&gt;è¯»å·²æäº¤&lt;/code&gt;çº§åˆ«å¯ä»¥æ˜¾è‘—é™ä½æ­»é”é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–åº”ç”¨è®¾è®¡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»Ÿä¸€è®¿é—®é¡ºåº&lt;/strong&gt;ï¼šç¡®ä¿æ‰€æœ‰äº‹åŠ¡éƒ½ä»¥ç›¸åŒçš„é¡ºåºè®¿é—®æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œæ€»æ˜¯æŒ‰ä¸»é”®IDæ’åºåå†æ›´æ–°ï¼‰ï¼Œè¿™æ˜¯é¢„é˜²æ­»é”æœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é•¿äº‹åŠ¡&lt;/strong&gt;ï¼šå°½é‡ä¿æŒäº‹åŠ¡çŸ­å°ç²¾æ‚ï¼Œå°½å¿«æäº¤æˆ–å›æ»šï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ä½ç²’åº¦é”&lt;/strong&gt;ï¼šåœ¨äº‹åŠ¡ä¸­ä»…é”å®šå¿…è¦çš„è¡Œï¼Œé¿å…ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;é”å®šå¤§é‡æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨æ•°æ®åº“æœºåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”æ£€æµ‹ä¸è¶…æ—¶&lt;/strong&gt;ï¼šç°ä»£æ•°æ®åº“ï¼ˆå¦‚MySQLçš„InnoDBã€PostgreSQLï¼‰éƒ½å†…ç½®äº†æ­»é”æ£€æµ‹æœºåˆ¶ã€‚ä¸€æ—¦å‘ç°æ­»é”ï¼Œä¼šè‡ªåŠ¨å›æ»šå…¶ä¸­ä¸€ä¸ªï¼ˆé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä»£ä»·è¾ƒå°çš„ï¼‰äº‹åŠ¡æ¥æ‰“ç ´åƒµå±€ã€‚åŒæ—¶ï¼Œå¯ä»¥è®¾ç½®é”ç­‰å¾…è¶…æ—¶å‚æ•°ï¼ˆå¦‚MySQLçš„ &lt;code&gt;innodb_lock_wait_timeout&lt;/code&gt;ï¼‰ï¼Œé¿å…äº‹åŠ¡æ— é™æœŸç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œå¯¹å› æ­»é”è€Œå›æ»šçš„äº‹åŠ¡å®ç°é‡è¯•é€»è¾‘ã€‚å½“æ•è·åˆ°æ­»é”é”™è¯¯æ—¶ï¼Œç­‰å¾…ä¸€å°æ®µæ—¶é—´åé‡æ–°æ‰§è¡Œè¯¥äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«å†³å®šäº†æ•°æ®åº“å¹¶å‘æ§åˆ¶çš„â€œä¸¥æ ¼ç¨‹åº¦â€ï¼Œè€Œæ­»é”æ˜¯è¿™ç§ä¸¥æ ¼ç¨‹åº¦åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼ˆå¦‚å¾ªç¯ç­‰å¾…ï¼‰çš„å‰¯äº§å“ã€‚&lt;strong&gt;&lt;code&gt;å¯é‡å¤è¯»&lt;/code&gt;çº§åˆ«å› éœ€ä½¿ç”¨é—´éš™é”ç­‰æœºåˆ¶ï¼Œæ­»é”é£é™©æœ€é«˜ï¼›è€Œ &lt;code&gt;ä¸²è¡ŒåŒ–&lt;/code&gt;çº§åˆ«è™½é£é™©ä½ï¼Œä½†æ˜¯ä»¥ç‰ºç‰²å‡ ä¹æ‰€æœ‰å¹¶å‘æ€§èƒ½ä¸ºä»£ä»·çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œå…³é”®åœ¨äº&lt;strong&gt;æƒè¡¡&lt;/strong&gt;ã€‚ä½ éœ€è¦è¯„ä¼°ä¸šåŠ¡å¯¹æ•°æ®ä¸€è‡´æ€§çš„çœŸå®è¦æ±‚ï¼Œå¹¶ç»“åˆå¯¹ç³»ç»Ÿååé‡çš„æœŸæœ›ï¼Œæ¥é€‰æ‹©æœ€åˆé€‚çš„éš”ç¦»çº§åˆ«ã€‚åŒæ—¶ï¼Œé€šè¿‡è‰¯å¥½çš„åº”ç”¨è®¾è®¡æ¥é¢„é˜²æ­»é”ï¼Œå¹¶å‡†å¤‡å¥½åº”å¯¹æ­»é”çš„ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸¤è€…çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ•°æ®åº“çš„æ­»é”å¤„ç†æœºåˆ¶æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="heading"&gt;:=
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„æ’åçª—å£å‡½æ•°æ˜¯è¿›è¡Œæ•°æ®åˆ†æå’Œæ’åçš„å¼ºå¤§å·¥å…·ï¼Œå°¤å…¶ä» MySQL 8.0 ç‰ˆæœ¬å¼€å§‹è·å¾—åŸç”Ÿæ”¯æŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†ä¸‰ä¸ªæ ¸å¿ƒæ’åå‡½æ•°çš„åŒºåˆ«ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;RANK()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;DENSE_RANK()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ROW_NUMBER()&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶åˆ—å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’åç›¸åŒï¼Œ&lt;strong&gt;è·³è·ƒ&lt;/strong&gt;æ’å&lt;/td&gt;
&lt;td&gt;æ’åç›¸åŒï¼Œ&lt;strong&gt;è¿ç»­&lt;/strong&gt;æ’å&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— è§†&lt;/strong&gt;å¹¶åˆ—æƒ…å†µï¼Œå¼ºåˆ¶è¿ç»­ç¼–å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’ååºåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸è¿ç»­ (å‡ºç°é—´éš™)&lt;/td&gt;
&lt;td&gt;è¿ç»­ (æ— é—´éš™)&lt;/td&gt;
&lt;td&gt;è¿ç»­ä¸”å”¯ä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1, 1, 3, 4&lt;/td&gt;
&lt;td&gt;1, 1, 2, 3&lt;/td&gt;
&lt;td&gt;1, 2, 3, 4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½“è‚²èµ›äº‹ã€ä¼ ç»Ÿæ’å&lt;/td&gt;
&lt;td&gt;éœ€è¦åæ¬¡ç´§å‡‘çš„æ¦œå•&lt;/td&gt;
&lt;td&gt;è·å–Top Nã€éœ€è¦å”¯ä¸€æ ‡è¯†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•è¯¦è§£ä¸ç¤ºä¾‹"&gt;ğŸ’¡ è¯­æ³•è¯¦è§£ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;æ‰€æœ‰æ’åçª—å£å‡½æ•°éƒ½éµå¾ªç›¸åŒçš„åŸºæœ¬è¯­æ³•ç»“æ„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;å‡½æ•°å() OVER (
[PARTITION BY &amp;lt;åˆ†åŒºå­—æ®µ&amp;gt;]
ORDER BY &amp;lt;æ’åºå­—æ®µ&amp;gt; [ASC|DESC]
)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å­å¥ï¼Œç”¨äºå°†æ•°æ®é›†åˆ†æˆä¸åŒçš„ç»„ï¼ˆåˆ†åŒºï¼‰ï¼Œæ’åæ“ä½œä¼šåœ¨æ¯ä¸ªåˆ†åŒºå†…ç‹¬ç«‹è¿›è¡Œã€‚ä¾‹å¦‚ï¼ŒæŒ‰éƒ¨é—¨åˆ†åŒºï¼Œæ¯ä¸ªéƒ¨é—¨å†…éƒ¨å•ç‹¬æ’åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼šå¿…é€‰å­å¥ï¼Œç”¨äºæŒ‡å®šæ¯ä¸ªåˆ†åŒºå†…è¿›è¡Œæ’åçš„ä¾æ®åˆ—å’Œæ’åºæ–¹å¼ï¼ˆå‡åºæˆ–é™åºï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€å¼ å­¦ç”Ÿæˆç»©è¡¨ &lt;code&gt;students&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;class&lt;/th&gt;
&lt;th&gt;score&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ç”²&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¹™&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼ ä¸‰&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸™&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;95&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç¤ºä¾‹ä¸ç»“æœå¯¹æ¯”&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
name, class, score,
RANK() OVER (PARTITION BY class ORDER BY score DESC) as rank,
DENSE_RANK() OVER (PARTITION BY class ORDER BY score DESC) as dense_rank,
ROW_NUMBER() OVER (PARTITION BY class ORDER BY score DESC) as row_number
FROM students;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥è¯¢ç»“æœæ¸…æ™°åœ°å±•ç¤ºä¸‰è€…çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;class&lt;/th&gt;
&lt;th&gt;score&lt;/th&gt;
&lt;th&gt;rank&lt;/th&gt;
&lt;th&gt;dense_rank&lt;/th&gt;
&lt;th&gt;row_number&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¹™&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼ ä¸‰&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç”²&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸™&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;95&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©æ’åå‡½æ•°"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©æ’åå‡½æ•°
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªä¸ªå‡½æ•°å–å†³äºä½ çš„å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¼ ç»Ÿæ’åï¼ˆå…è®¸åæ¬¡è·³è·ƒï¼‰&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œåœ¨ä½“è‚²æ¯”èµ›ä¸­ï¼Œå¦‚æœä¸¤äººå¹¶åˆ—ç¬¬ä¸€ï¼Œåˆ™ä¸‹ä¸€åå°±æ˜¯ç¬¬ä¸‰åã€‚è¿™æ—¶åº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;RANK()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ç´§å‡‘çš„è¿ç»­æ’å&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œåˆ¶ä½œæˆç»©æ¦œæˆ–é”€å”®æ¦œï¼Œå¸Œæœ›å¹¶åˆ—ä¹‹åçš„ä¸‹ä¸€ä¸ªåæ¬¡æ˜¯è¿ç»­çš„ï¼ˆç¬¬äºŒè€Œéç¬¬ä¸‰ï¼‰ã€‚è¿™æ—¶åº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;DENSE_RANK()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¸ºæ¯ä¸€è¡Œç”Ÿæˆå”¯ä¸€æ ‡è¯†æˆ–è·å–ç»å¯¹Top N&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œä½ åªæƒ³æ¯ä¸ªéƒ¨é—¨å·¥èµ„æœ€é«˜çš„ä¸€ä¸ªäººï¼Œå³ä½¿æœ‰å¹¶åˆ—ä¹Ÿåªå–ä¸€æ¡ã€‚æˆ–è€…å•çº¯éœ€è¦ä¸ºæŸ¥è¯¢ç»“æœç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„è¡Œå·ã€‚è¿™æ—¶åº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ROW_NUMBER()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¶ä»–ç›¸å…³å‡½æ•°ntilen"&gt;ğŸ”„ å…¶ä»–ç›¸å…³å‡½æ•°ï¼š&lt;code&gt;NTILE(n)&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;é™¤äº†ä¸Šè¿°ä¸‰ä¸ªå‡½æ•°ï¼Œ&lt;code&gt;NTILE(n)&lt;/code&gt;ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„çª—å£å‡½æ•°ï¼Œå®ƒç”¨äºå°†æ•°æ®å‡åŒ€åˆ†é…åˆ°æŒ‡å®šæ•°é‡çš„æ¡¶ä¸­ï¼Œå¹¶ä¸ºæ¯è¡Œåˆ†é…æ‰€åœ¨çš„æ¡¶å·ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;NTILE(4)&lt;/code&gt;å¯ä»¥å°†æ•°æ®åˆ†ä¸º4ä¸ªå››åˆ†ä½æ•°ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-7"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬è¦æ±‚&lt;/strong&gt;ï¼šè¿™äº›çª—å£å‡½æ•°éœ€è¦ &lt;strong&gt;MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦ä½¿ç”¨å˜é‡ï¼ˆå¦‚ &lt;code&gt;@rank := @rank + 1&lt;/code&gt;ï¼‰æˆ–å¤æ‚çš„å­æŸ¥è¯¢æ¥æ¨¡æ‹Ÿæ’ååŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†NULLå€¼&lt;/strong&gt;ï¼šå¦‚æœæ’åºçš„å­—æ®µåŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œ&lt;code&gt;NULL&lt;/code&gt;åœ¨æ’åºä¸­ä¼šè¢«è§†ä¸ºæœ€å°å€¼ã€‚è¿™å¯èƒ½ä¼šå½±å“æ’åç»“æœã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;å€¼æä¾›ä¸€ä¸ªé»˜è®¤å€¼ä»¥ç¡®ä¿æ’åç¬¦åˆé¢„æœŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„æ’åçª—å£å‡½æ•°ä¸ºæ•°æ®åˆ†ææä¾›äº†å¼ºå¤§ä¸”é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚&lt;code&gt;RANK()&lt;/code&gt;ã€&lt;code&gt;DENSE_RANK()&lt;/code&gt;å’Œ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;ä¸‰è€…çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºå¤„ç†å¹¶åˆ—æ’åçš„æ–¹å¼ä»¥åŠåç»­æ’ååºåˆ—æ˜¯å¦è¿ç»­ã€‚æ ¹æ®ä½ å¯¹åæ¬¡å¹¶åˆ—å’Œè¿ç»­æ€§çš„å…·ä½“éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„å‡½æ•°å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨å®ƒä»¬ï¼&lt;/p&gt;
&lt;h2 id="binlog"&gt;Binlog
&lt;/h2&gt;&lt;p&gt;MySQL çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰æ˜¯æ•°æ®åº“è¿ç»´å’Œæ¶æ„ä¸­è‡³å…³é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒåƒæ•°æ®åº“çš„â€œé»‘åŒ£å­â€ï¼Œè®°å½•äº†æ‰€æœ‰å¯¹æ•°æ®çš„å˜æ›´æ“ä½œã€‚ä¸‹é¢è¿™å¼ å›¾æ¸…æ™°åœ°å±•ç¤ºäº†binlogçš„å†™å…¥æµç¨‹ï¼Œä¹‹åæˆ‘ä»¬ä¼šè¯¦ç»†è§£æå…¶æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡Œæ•°æ®å˜æ›´æ“ä½œ DML/DDL] --&amp;gt; B[æ—¥å¿—å†™å…¥çº¿ç¨‹çº§&amp;lt;br&amp;gt;binlog cache]
B --&amp;gt; C{äº‹åŠ¡æäº¤}
C -- æäº¤ --&amp;gt; D[æ—¥å¿—è½¬ç§»è‡³å…¨å±€ç¼“å†²åŒº]
D --&amp;gt; E[æ‰§è¡Œfsyncåˆ·ç›˜]
E --&amp;gt; F[æ—¥å¿—æŒä¹…åŒ–è‡³&amp;lt;br&amp;gt;binlogæ–‡ä»¶]
F --&amp;gt; G[æ ¹æ®sync_binlogå€¼&amp;lt;br&amp;gt;æ§åˆ¶åˆ·ç›˜é¢‘ç‡]
C -- å›æ»š --&amp;gt; H[ä¸¢å¼ƒbinlog cache]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-binlog-æ ¸å¿ƒè§£æ"&gt;ğŸ” Binlog æ ¸å¿ƒè§£æ
&lt;/h3&gt;&lt;p&gt;ç†è§£binlogçš„å…³é”®åœ¨äºæŠŠæ¡å®ƒçš„æ ¼å¼ã€å†™å…¥æœºåˆ¶ä»¥åŠä¸redo logçš„åä½œã€‚&lt;/p&gt;
&lt;h4 id="-ä¸‰ç§æ—¥å¿—æ ¼å¼"&gt;â€¢ ä¸‰ç§æ—¥å¿—æ ¼å¼
&lt;/h4&gt;&lt;p&gt;Binlog æä¾›äº†ä¸‰ç§æ ¼å¼æ¥è®°å½•å˜æ›´ä¿¡æ¯ï¼Œæ¯ç§éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¼å¼&lt;/th&gt;
&lt;th&gt;è®°å½•å†…å®¹&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;STATEMENT&lt;/strong&gt; (SBR)&lt;/td&gt;
&lt;td&gt;è®°å½•åŸå§‹çš„ SQL è¯­å¥&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å°ï¼ŒèŠ‚çœç£ç›˜å’Œç½‘ç»œ I/O&lt;/td&gt;
&lt;td&gt;å¯èƒ½å¼•èµ·ä¸»ä»ä¸ä¸€è‡´ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;NOW()&lt;/code&gt;ç­‰éç¡®å®šæ€§å‡½æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;æ‰¹é‡æ›´æ–°ã€DDL æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ROW&lt;/strong&gt; (RBR)&lt;/td&gt;
&lt;td&gt;è®°å½•æ¯è¡Œæ•°æ®çš„å˜åŒ–ï¼ˆå‰é•œåƒ/åé•œåƒï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®å˜æ›´ç²¾ç¡®ï¼Œå¼ºä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å¤§ï¼ˆç‰¹åˆ«æ˜¯æ‰¹é‡æ“ä½œï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®å®‰å…¨è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚é‡‘èï¼‰ã€ä¸»ä»å¤åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MIXED&lt;/strong&gt; (MBR)&lt;/td&gt;
&lt;td&gt;æ··åˆæ¨¡å¼ï¼ŒMySQL è‡ªåŠ¨é€‰æ‹©&lt;/td&gt;
&lt;td&gt;åœ¨å®‰å…¨æ€§å’Œæ€§èƒ½é—´å–å¾—å¹³è¡¡&lt;/td&gt;
&lt;td&gt;é€»è¾‘ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;td&gt;é€šç”¨åœºæ™¯ï¼ˆMySQL 5.7.7 å‰é»˜è®¤ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç°ä»£ MySQL ç‰ˆæœ¬ï¼ˆ5.7.7 åŠä»¥ä¸Šï¼‰é»˜è®¤é‡‡ç”¨ ROW æ ¼å¼&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒèƒ½æœ€å¥½åœ°ä¿è¯æ•°æ®ä¸€è‡´æ€§ ã€‚&lt;/p&gt;
&lt;h4 id="-binlog-çš„å†™å…¥æµç¨‹ä¸ä¸¤é˜¶æ®µæäº¤"&gt;â€¢ Binlog çš„å†™å…¥æµç¨‹ä¸ä¸¤é˜¶æ®µæäº¤
&lt;/h4&gt;&lt;p&gt;ç»“åˆæµç¨‹å›¾ï¼Œæˆ‘ä»¬æ¥çœ‹binlogæ˜¯å¦‚ä½•è¢«å†™å…¥çš„ï¼Œä»¥åŠå®ƒå¦‚ä½•ä¸InnoDBå­˜å‚¨å¼•æ“çš„redo logåä½œï¼Œè¿™å°±æ˜¯è‘—åçš„&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰&lt;/strong&gt;ï¼Œæ—¨åœ¨è§£å†³redo logï¼ˆç‰©ç†æ—¥å¿—ï¼Œå¼•æ“å±‚ï¼‰å’Œbinlogï¼ˆé€»è¾‘æ—¥å¿—ï¼ŒServerå±‚ï¼‰ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Prepare é˜¶æ®µ&lt;/strong&gt;ï¼šäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒSQLäº§ç”Ÿçš„binlogå…ˆå†™å…¥çº¿ç¨‹ç‹¬æœ‰çš„ &lt;strong&gt;&lt;code&gt;binlog cache&lt;/code&gt;&lt;/strong&gt; ã€‚åŒæ—¶ï¼ŒInnoDBå°†æ•°æ®å˜æ›´å†™å…¥ &lt;strong&gt;&lt;code&gt;redo log buffer&lt;/code&gt;&lt;/strong&gt;ã€‚äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBå…ˆå°†redo logçš„çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Commit é˜¶æ®µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°† &lt;code&gt;binlog cache&lt;/code&gt;ä¸­çš„å…¨éƒ¨å†…å®¹å†™å…¥ç£ç›˜ä¸Šçš„ binlog æ–‡ä»¶ï¼ˆ&lt;code&gt;write&lt;/code&gt;+ &lt;code&gt;fsync&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦ binlog æˆåŠŸè½ç›˜ï¼ŒInnoDB å†å°† redo log çš„çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;COMMIT&lt;/code&gt;&lt;/strong&gt;ï¼Œå®Œæˆäº‹åŠ¡æäº¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æœºåˆ¶ä¿è¯äº†å³ä½¿æ•°æ®åº“åœ¨æäº¤è¿‡ç¨‹ä¸­å´©æºƒï¼Œé‡å¯åä¹Ÿèƒ½æ ¹æ®è¿™ä¸¤ç§æ—¥å¿—çš„çŠ¶æ€å†³å®šå›æ»šè¿˜æ˜¯æäº¤ï¼Œä»è€Œç¡®ä¿ä¸»ä»æ•°æ®ä¸€è‡´ ã€‚&lt;/p&gt;
&lt;h4 id="-å…³é”®å‚æ•°sync_binlog"&gt;â€¢ å…³é”®å‚æ•°ï¼š&lt;code&gt;sync_binlog&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;å®ƒæ§åˆ¶ binlog ä»ç³»ç»Ÿç¼“å­˜ï¼ˆpage cacheï¼‰åˆ·å…¥ç£ç›˜ï¼ˆ&lt;code&gt;fsync&lt;/code&gt;ï¼‰çš„é¢‘ç‡ï¼Œç›´æ¥å½±å“æ•°æ®å®‰å…¨æ€§å’Œæ€§èƒ½ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=0&lt;/code&gt;&lt;/strong&gt;ï¼šä¾èµ–æ“ä½œç³»ç»Ÿåˆ·ç›˜ï¼Œæ€§èƒ½æœ€å¥½ï¼Œä½†å®•æœºå¯èƒ½ä¸¢å¤± binlogã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=1&lt;/code&gt;&lt;/strong&gt;ï¼ˆé»˜è®¤ï¼‰ï¼šæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½åˆ·ç›˜ï¼Œæœ€å®‰å…¨ï¼Œä½† IO å¼€é”€å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=N&lt;/code&gt;&lt;/strong&gt;ï¼ˆN&amp;gt;1ï¼‰ï¼šç´¯ç§¯ N ä¸ªäº‹åŠ¡ååˆ·ç›˜ï¼Œæ˜¯å®‰å…¨ä¸æ€§èƒ½çš„æŠ˜è¡·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åŸºæœ¬æ“ä½œä¸ç®¡ç†"&gt;âš™ï¸ åŸºæœ¬æ“ä½œä¸ç®¡ç†
&lt;/h3&gt;&lt;h4 id="-æŸ¥çœ‹ä¸è§£æ-binlog"&gt;â€¢ æŸ¥çœ‹ä¸è§£æ Binlog
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶åˆ—è¡¨
SHOW BINARY LOGS ;
-- æŸ¥çœ‹å½“å‰æ­£åœ¨å†™å…¥çš„æ—¥å¿—æ–‡ä»¶
SHOW MASTER STATUS ;
-- æŸ¥çœ‹ç‰¹å®šæ—¥å¿—æ–‡ä»¶ä¸­çš„äº‹ä»¶
SHOW BINLOG EVENTS IN &amp;#39;mysql-bin.000001&amp;#39; LIMIT 10 ;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;mysqlbinlog&lt;/code&gt;&lt;/strong&gt; å·¥å…·å¯ä»¥æ›´è¯¦ç»†åœ°è§£æäºŒè¿›åˆ¶å†…å®¹ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æ ¹æ®ä½ç½®ç‚¹è§£æ
mysqlbinlog --start-position=219 --stop-position=398 mysql-bin.000001
# æ ¹æ®æ—¶é—´ç‚¹è§£æ
mysqlbinlog --start-datetime=&amp;#34;2025-02-20 00:00:00&amp;#34; mysql-bin.000001
# è§£æROWæ ¼å¼çš„æ—¥å¿—ï¼ˆè§£ç ä¸ºå¯è¯»å½¢å¼ï¼‰
mysqlbinlog --base64-output=DECODE-ROWS -v mysql-bin.000001
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="-ç®¡ç†-binlog-æ–‡ä»¶"&gt;â€¢ ç®¡ç† Binlog æ–‡ä»¶
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—æ»šåŠ¨&lt;/strong&gt;ï¼šåˆ›å»ºæ–°çš„ binlog æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;FLUSH LOGS ;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¸…ç†æ—¥å¿—&lt;/strong&gt;ï¼š&lt;strong&gt;åŠ¡å¿…åœ¨å¤‡ä»½åæ“ä½œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ é™¤æŒ‡å®šæ–‡ä»¶ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—
PURGE BINARY LOGS TO &amp;#39;mysql-bin.000010&amp;#39; ;
-- è®¾ç½®è‡ªåŠ¨è¿‡æœŸæ—¶é—´ï¼ˆä¾‹å¦‚7å¤©ï¼‰
SET GLOBAL expire_logs_days = 7 ;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒåº”ç”¨åœºæ™¯"&gt;ğŸ’¡ æ ¸å¿ƒåº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯ binlog æœ€æ ¸å¿ƒçš„åº”ç”¨ã€‚ä¸»åº“å°† binlog äº‹ä»¶å‘é€ç»™ä»åº“ï¼Œä»åº“é‡æ”¾è¿™äº›äº‹ä»¶ï¼Œå®ç°æ•°æ®åŒæ­¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¢å¤ä¸å›æ»š&lt;/strong&gt;ï¼šç»“åˆå…¨é‡å¤‡ä»½å’Œ binlogï¼Œå¯ä»¥å°†æ•°æ®åº“æ¢å¤åˆ°æŸä¸ªç²¾ç¡®çš„æ—¶é—´ç‚¹æˆ–ä½ç½®ï¼Œç”¨äºæ•…éšœæ¢å¤æˆ–è¯¯æ“ä½œæ•°æ®ä¿®å¤ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å®¡è®¡&lt;/strong&gt;ï¼šé€šè¿‡åˆ†æ binlogï¼Œå¯ä»¥è¿½è¸ªæ•°æ®çš„å˜æ›´å†å²ï¼Œæ»¡è¶³å®‰å…¨å®¡è®¡éœ€æ±‚ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-8"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Redo Log çš„åŒºåˆ«&lt;/strong&gt;ï¼šBinlog æ˜¯ Server å±‚é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ“ä½œé€»è¾‘ï¼ˆå¦‚ SQL è¯­å¥æˆ–è¡Œå˜åŒ–ï¼‰ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½å¯ä½¿ç”¨ã€‚è€Œ Redo Log æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œä¸»è¦ç”¨äºå´©æºƒæ¢å¤ã€‚å®ƒä»¬ååŒå·¥ä½œï¼Œç¡®ä¿æ•°æ®æŒä¹…æ€§å’Œä¸€è‡´æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;ROW æ ¼å¼&lt;/strong&gt;æ—¶ï¼Œæ‰¹é‡æ“ä½œå¯èƒ½äº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚éœ€ç›‘æ§ç£ç›˜ç©ºé—´ï¼Œå¹¶åˆç†è®¾ç½® &lt;code&gt;max_binlog_size&lt;/code&gt;ã€‚é€‚å½“è°ƒæ•´ &lt;code&gt;sync_binlog&lt;/code&gt;å€¼æœ‰åŠ©äºåœ¨æ•°æ®å®‰å…¨æ€§å’Œ IO æ€§èƒ½é—´å–å¾—å¹³è¡¡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL binlogã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ–¹é¢è¿˜æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘DSA</title><link>https://dyhes.github.io/p/nowcoderdsa/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderdsa/</guid><description>&lt;h2 id="kmpä¸»ä¸²ä»ä¸åé€€è°ƒæ•´å­ä¸²ä½ç½®"&gt;KMPï¼šä¸»ä¸²ä»ä¸åé€€ï¼Œè°ƒæ•´å­ä¸²ä½ç½®
&lt;/h2&gt;&lt;p&gt;KMPç®—æ³•ï¼ˆKnuth-Morris-Prattç®—æ³•ï¼‰æ˜¯ä¸€ç§é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œç”± Donald Knuthã€Vaughan Pratt å’Œ James H. Morris äº 1977 å¹´è”åˆå‘è¡¨ï¼Œå®ƒèƒ½åœ¨ä¸»æ–‡æœ¬å­—ç¬¦ä¸²ä¸­å¿«é€ŸæŸ¥æ‰¾æ¨¡å¼å­—ç¬¦ä¸²çš„æ‰€æœ‰å‡ºç°ä½ç½®ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºé€šè¿‡é¢„å¤„ç†æ¨¡å¼ä¸²æ¥é¿å…ä¸»ä¸²æŒ‡é’ˆçš„å›æº¯ï¼Œå°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–è‡³çº¿æ€§çº§åˆ« ğŸ’¡ã€‚&lt;/p&gt;
&lt;h3 id="-1-æ ¸å¿ƒæ€æƒ³"&gt;ğŸ“Š 1. æ ¸å¿ƒæ€æƒ³
&lt;/h3&gt;&lt;p&gt;KMP ç®—æ³•çš„æ ¸å¿ƒåœ¨äºåˆ©ç”¨åŒ¹é…å¤±è´¥æ—¶å·²ç»è·å¾—çš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ä¸ªç§°ä¸º &lt;strong&gt;next æ•°ç»„&lt;/strong&gt;ï¼ˆä¹Ÿç§°ä¸ºéƒ¨åˆ†åŒ¹é…è¡¨æˆ–å¤±è´¥å‡½æ•°ï¼‰çš„è¾…åŠ©æ•°æ®ç»“æ„ï¼Œè®°å½•æ¨¡å¼ä¸²è‡ªèº«çš„éƒ¨åˆ†åŒ¹é…ä¿¡æ¯ã€‚å½“å‘ç”Ÿä¸åŒ¹é…æ—¶ï¼Œç®—æ³•èƒ½æ ¹æ® next æ•°ç»„çŸ¥é“æ¨¡å¼ä¸²å¯ä»¥å‘å³æ»‘åŠ¨å¤šè¿œï¼Œä»è€Œé¿å…é‡å¤æ¯”è¾ƒä¸»ä¸²ä¸­å·²åŒ¹é…çš„å­—ç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;next æ•°ç»„çš„å«ä¹‰&lt;/strong&gt;ï¼šå¯¹äºæ¨¡å¼ä¸² &lt;code&gt;P&lt;/code&gt;çš„æ¯ä¸ªä½ç½® &lt;code&gt;i&lt;/code&gt;ï¼Œ&lt;code&gt;next[i]&lt;/code&gt;è¡¨ç¤ºå­ä¸² &lt;code&gt;P[0:i]&lt;/code&gt;ä¸­ &lt;strong&gt;æœ€é•¿ç›¸ç­‰çœŸå‰ç¼€å’ŒçœŸåç¼€çš„é•¿åº¦&lt;/strong&gt;ï¼ˆå³ä¸åŒ…æ‹¬å­—ç¬¦ä¸²æœ¬èº«çš„æœ€é•¿ç›¸åŒå‰åç¼€ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-2-next-æ•°ç»„çš„æ„å»º"&gt;ğŸ”§ 2. Next æ•°ç»„çš„æ„å»º
&lt;/h3&gt;&lt;p&gt;æ„å»º next æ•°ç»„æ˜¯ KMP ç®—æ³•çš„é¢„å¤„ç†æ­¥éª¤ï¼Œå…¶è¿‡ç¨‹æœ¬èº«ä¹Ÿè¿ç”¨äº†ç±»ä¼¼ KMP çš„æ€æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•æ­¥éª¤ï¼ˆä»¥æ¨¡å¼ä¸² P ä¸‹æ ‡ä» 0 å¼€å§‹ä¸ºä¾‹ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;ï¼š&lt;code&gt;next[0] = 0&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;-1&lt;/code&gt;ï¼Œå®ç°æœ‰å·®å¼‚ï¼Œä½†æ€æƒ³ç›¸é€šï¼‰ã€‚è®¾ä¸¤ä¸ªæŒ‡é’ˆ &lt;code&gt;i&lt;/code&gt;ï¼ˆåç¼€æœ«å°¾ï¼‰å’Œ &lt;code&gt;j&lt;/code&gt;ï¼ˆå‰ç¼€æœ«å°¾ï¼Œä¹Ÿä»£è¡¨å½“å‰æœ€é•¿ç›¸ç­‰å‰åç¼€çš„é•¿åº¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éå† &lt;code&gt;i&lt;/code&gt;ä» 1 åˆ° &lt;code&gt;len(P)-1&lt;/code&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è‹¥ &lt;code&gt;P[i] == P[j]&lt;/code&gt;ï¼Œåˆ™ &lt;code&gt;j++&lt;/code&gt;ï¼Œ&lt;code&gt;next[i] = j&lt;/code&gt;ï¼Œ&lt;code&gt;i++&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;P[i] != P[j]&lt;/code&gt;ï¼Œåˆ™ä»¤ &lt;code&gt;j = next[j-1]&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;j = next[j]&lt;/code&gt;ï¼Œå–å†³äºå®ç°ï¼‰è¿›è¡Œå›æº¯ï¼Œç›´åˆ° &lt;code&gt;j&lt;/code&gt;å›æº¯åˆ° 0 æˆ–åŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;j&lt;/code&gt;å·²å›æº¯åˆ° 0 ä¸”ä»ä¸åŒ¹é…ï¼Œåˆ™ &lt;code&gt;next[i] = 0&lt;/code&gt;ï¼Œ&lt;code&gt;i++&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ï¼šæ¨¡å¼ä¸² P = &amp;ldquo;ABABCABAB&amp;rdquo; çš„ next æ•°ç»„&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç´¢å¼• i&lt;/th&gt;
&lt;th&gt;0&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;6&lt;/th&gt;
&lt;th&gt;7&lt;/th&gt;
&lt;th&gt;8&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å­—ç¬¦ P[i]&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;C&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;next[i]&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;next æ•°ç»„çš„æ„å»ºä»£ç ï¼ˆPythonï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;def build_next(pattern):
next_arr = [0] * len(pattern)
j = 0
for i in range(1, len(pattern)):
while j &amp;gt; 0 and pattern[i] != pattern[j]:
j = next_arr[j-1]
if pattern[i] == pattern[j]:
j += 1
next_arr[i] = j
return next_arr
print(build_next(&amp;#34;ABABCABAB&amp;#34;)) # è¾“å‡º: [0, 0, 1, 2, 0, 1, 2, 3, 4]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-3-kmp-åŒ¹é…è¿‡ç¨‹"&gt;ğŸ” 3. KMP åŒ¹é…è¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;æœ‰äº† next æ•°ç»„åï¼Œå°±å¯ä»¥è¿›è¡Œä¸»ä¸² &lt;code&gt;S&lt;/code&gt;å’Œæ¨¡å¼ä¸² &lt;code&gt;P&lt;/code&gt;çš„åŒ¹é…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•æ­¥éª¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt;ï¼šä¸»ä¸²æŒ‡é’ˆ &lt;code&gt;i=0&lt;/code&gt;ï¼Œæ¨¡å¼ä¸²æŒ‡é’ˆ &lt;code&gt;j=0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;éå†ä¸»ä¸² &lt;code&gt;S&lt;/code&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è‹¥ &lt;code&gt;S[i] == P[j]&lt;/code&gt;ï¼Œåˆ™ &lt;code&gt;i++&lt;/code&gt;, &lt;code&gt;j++&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;j == len(P)&lt;/code&gt;ï¼Œè¡¨ç¤ºåŒ¹é…æˆåŠŸï¼Œè®°å½•èµ·å§‹ä½ç½® &lt;code&gt;i - j&lt;/code&gt;ã€‚ç„¶åæ ¹æ® next æ•°ç»„è°ƒæ•´ &lt;code&gt;j = next[j-1]&lt;/code&gt;ä»¥ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;S[i] != P[j]&lt;/code&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è‹¥ &lt;code&gt;j &amp;gt; 0&lt;/code&gt;ï¼Œåˆ™åˆ©ç”¨ next æ•°ç»„å›æº¯æ¨¡å¼ä¸²æŒ‡é’ˆ &lt;code&gt;j = next[j-1]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ &lt;code&gt;j == 0&lt;/code&gt;ï¼Œåˆ™æ— æ³•å›æº¯ï¼Œä¸»ä¸²æŒ‡é’ˆ &lt;code&gt;i++&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;KMP æœç´¢ä»£ç ï¼ˆPythonï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;def kmp_search(text, pattern):
next_arr = build_next(pattern)
j = 0
for i in range(len(text)):
while j &amp;gt; 0 and text[i] != pattern[j]:
j = next_arr[j-1]
if text[i] == pattern[j]:
j += 1
if j == len(pattern):
return i - j + 1 # è¿”å›é¦–æ¬¡åŒ¹é…çš„èµ·å§‹ä½ç½®
return -1
text = &amp;#34;ABABABCABABABD&amp;#34;
pattern = &amp;#34;ABABCABAB&amp;#34;
print(kmp_search(text, pattern)) # è¾“å‡º: 2
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-4-æ—¶é—´å¤æ‚åº¦ä¸ä¼˜åŠ¿"&gt;âš™ï¸ 4. æ—¶é—´å¤æ‚åº¦ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ„å»º next æ•°ç»„ï¼š&lt;code&gt;O(m)&lt;/code&gt;ï¼Œå…¶ä¸­ &lt;code&gt;m&lt;/code&gt;ä¸ºæ¨¡å¼ä¸²é•¿åº¦ã€‚&lt;/li&gt;
&lt;li&gt;åŒ¹é…è¿‡ç¨‹ï¼š&lt;code&gt;O(n)&lt;/code&gt;ï¼Œå…¶ä¸­ &lt;code&gt;n&lt;/code&gt;ä¸ºä¸»ä¸²é•¿åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€»æ—¶é—´å¤æ‚åº¦ä¸º &lt;code&gt;O(n + m)&lt;/code&gt;&lt;/strong&gt;ï¼Œæ˜¯çº¿æ€§çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¿å…äº†ä¸»ä¸²æŒ‡é’ˆçš„å›æº¯&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸æš´åŠ›åŒ¹é…ï¼ˆæ—¶é—´å¤æ‚åº¦ &lt;code&gt;O(n*m)&lt;/code&gt;ï¼‰æœ€æ ¹æœ¬çš„åŒºåˆ«ï¼ŒKMP ç®—æ³•çš„ä¸»ä¸²æŒ‡é’ˆ &lt;code&gt;i&lt;/code&gt;åªä¼šå‰è¿›æˆ–ä¸å˜ï¼ˆå½“ &lt;code&gt;j&amp;gt;0&lt;/code&gt;ä¸”ä¸åŒ¹é…æ—¶ &lt;code&gt;i&lt;/code&gt;ä¸å˜ï¼Œ&lt;code&gt;j&lt;/code&gt;å›æº¯ï¼‰ï¼Œä¸ä¼šåé€€ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹åˆ«é€‚åˆå¤„ç†&lt;strong&gt;å¤§æ–‡æœ¬æµ&lt;/strong&gt;æˆ–&lt;strong&gt;å®æ—¶æ•°æ®&lt;/strong&gt;ï¼Œå› ä¸ºä¸éœ€è¦å›æº¯ä¸»ä¸²ï¼Œå¯ä»¥è¾¹è¯»å…¥è¾¹åŒ¹é…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-5-åº”ç”¨åœºæ™¯"&gt;ğŸš€ 5. åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;KMP ç®—æ³•çš„é«˜æ•ˆæ€§ä½¿å…¶åœ¨è®¸å¤šé¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„æŸ¥æ‰¾åŠŸèƒ½&lt;/strong&gt;ï¼ˆå¦‚ Ctrl+Fï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœç´¢å¼•æ“&lt;/strong&gt;ä¸­çš„å…³é”®è¯å®šä½å’Œç½‘é¡µç´¢å¼•&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿç‰©ä¿¡æ¯å­¦&lt;/strong&gt;ä¸­çš„ DNA/RNA åºåˆ—åŒ¹é…ï¼ˆåŸºå› åºåˆ—é€šå¸¸å¾ˆé•¿ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å‹ç¼©&lt;/strong&gt;ã€&lt;strong&gt;ç½‘ç»œå…¥ä¾µæ£€æµ‹&lt;/strong&gt;ã€&lt;strong&gt;æ‹¼å†™æ£€æŸ¥&lt;/strong&gt;ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-6-ä¸å…¶ä»–ç®—æ³•çš„ç®€è¦å¯¹æ¯”"&gt;ğŸ“ 6. ä¸å…¶ä»–ç®—æ³•çš„ç®€è¦å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç®—æ³•&lt;/th&gt;
&lt;th&gt;æ—¶é—´å¤æ‚åº¦ (æœ€å)&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æš´åŠ›åŒ¹é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(n*m)&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œä½†æ•ˆç‡ä½&lt;/td&gt;
&lt;td&gt;å°è§„æ¨¡æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;KMP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(n+m)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é¿å…ä¸»ä¸²å›æº¯&lt;/strong&gt;ï¼Œç¨³å®šé«˜æ•ˆ&lt;/td&gt;
&lt;td&gt;é€šç”¨ï¼Œå°¤å…¶æ˜¯å¤§è§„æ¨¡æ–‡æœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Boyer-Moore&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(n/m) (å¹³å‡)&lt;/td&gt;
&lt;td&gt;åå­—ç¬¦è§„åˆ™ï¼Œè·³è·ƒå¼åŒ¹é…&lt;/td&gt;
&lt;td&gt;æ¨¡å¼ä¸²è¾ƒé•¿ï¼Œå­—ç¬¦é›†è¾ƒå¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Rabin-Karp&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(n+m)&lt;/td&gt;
&lt;td&gt;åŸºäºå“ˆå¸Œï¼Œå¯åŒæ—¶æ£€æµ‹å¤šä¸ªæ¨¡å¼&lt;/td&gt;
&lt;td&gt;å¤šæ¨¡å¼åŒ¹é…ï¼Œ plagiarismæ£€æµ‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;KMP ç®—æ³•é€šè¿‡å·§å¦™åœ°æ„å»º next æ•°ç»„ï¼Œè®°å½•äº†æ¨¡å¼ä¸²è‡ªèº«çš„â€œè®°å¿†â€ï¼Œåœ¨åŒ¹é…å¤±è´¥æ—¶èƒ½æ™ºèƒ½åœ°æ»‘åŠ¨æ¨¡å¼ä¸²ï¼Œé¿å…äº†ä¸»ä¸²æŒ‡é’ˆçš„å›æº¯ï¼Œä»è€Œå®ç°äº†é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ã€‚è™½ç„¶ç†è§£å’Œå®ç°èµ·æ¥æ¯”æš´åŠ›åŒ¹é…ç¨å¤æ‚ï¼Œä½†å…¶çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„ä¼˜åŠ¿åœ¨å¤„ç†å¤§è§„æ¨¡å­—ç¬¦ä¸²æ—¶éå¸¸æ˜¾è‘—ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä»‹ç»èƒ½å¸®åŠ©ä½ é€å½»ç†è§£ KMP ç®—æ³•ã€‚&lt;/p&gt;
&lt;h2 id="bm-åå­—ç¬¦å’Œå¥½åç¼€æ¨¡å¼ä¸²ä»å³å‘å·¦åŒ¹é…"&gt;BM: åå­—ç¬¦å’Œå¥½åç¼€ï¼Œæ¨¡å¼ä¸²ä»å³å‘å·¦åŒ¹é…
&lt;/h2&gt;&lt;p&gt;BMç®—æ³•ï¼ˆBoyer-Mooreç®—æ³•ï¼‰æ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„å•æ¨¡å¼å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œç”±Robert S. Boyerå’ŒJ Strother Mooreäº1977å¹´æå‡ºã€‚å®ƒé‡‡ç”¨ä»å³å‘å·¦çš„æ¯”è¾ƒæ–¹å¼å’Œç‹¬ç‰¹çš„å¯å‘å¼è§„åˆ™ï¼Œèƒ½åœ¨è®¸å¤šæƒ…å†µä¸‹å®ç°äºšçº¿æ€§çš„åŒ¹é…é€Ÿåº¦ï¼Œå¹³å‡æ€§èƒ½ä¼˜å¼‚ï¼Œé€šå¸¸æ¯”KMPç®—æ³•å¿«3-5å€ã€‚&lt;/p&gt;
&lt;h3 id="bmç®—æ³•çš„æ ¸å¿ƒæ€æƒ³"&gt;&lt;strong&gt;BMç®—æ³•çš„æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;BMç®—æ³•çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;åˆ©ç”¨é¢„å¤„ç†ä¿¡æ¯åœ¨åŒ¹é…å¤±è´¥æ—¶è·³è¿‡å°½å¯èƒ½å¤šçš„æ— æ•ˆä½ç½®&lt;/strong&gt;ã€‚å®ƒé€šè¿‡ &lt;strong&gt;â€œåå­—ç¬¦è§„åˆ™â€&lt;/strong&gt; (Bad Character Rule) å’Œ &lt;strong&gt;â€œå¥½åç¼€è§„åˆ™â€&lt;/strong&gt; (Good Suffix Rule) æ¥è®¡ç®—æ¨¡å¼ä¸²çš„å®‰å…¨ç§»åŠ¨è·ç¦»ï¼Œå¹¶ä¸”&lt;strong&gt;åŒ¹é…æ—¶ä»æ¨¡å¼ä¸²çš„æœ«å°¾å¼€å§‹å‘å‰æ¯”è¾ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="1-åå­—ç¬¦è§„åˆ™-bad-character-rule"&gt;&lt;strong&gt;1. åå­—ç¬¦è§„åˆ™ (Bad Character Rule)&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;å½“å‘ç°æ–‡æœ¬ä¸² &lt;code&gt;T&lt;/code&gt;ä¸­çš„æŸä¸ªå­—ç¬¦ä¸æ¨¡å¼ä¸² &lt;code&gt;P&lt;/code&gt;ä¸åŒ¹é…æ—¶ï¼Œè¯¥æ–‡æœ¬ä¸²ä¸­çš„å­—ç¬¦è¢«ç§°ä¸º &lt;strong&gt;â€œåå­—ç¬¦â€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µ1ï¼šåå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­å­˜åœ¨&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ¨¡å¼ä¸²&lt;strong&gt;å‘å³ç§»åŠ¨&lt;/strong&gt;ï¼Œä½¿å…¶&lt;strong&gt;æœ€å³è¾¹å‡ºç°&lt;/strong&gt;çš„è¿™ä¸ªåå­—ç¬¦ä¸æ–‡æœ¬ä¸²ä¸­çš„åå­—ç¬¦å¯¹é½ã€‚&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ä½æ•° = &lt;strong&gt;åå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­çš„å¤±é…ä½ç½®ç´¢å¼•&lt;/strong&gt; - &lt;strong&gt;è¯¥åå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥è®¡ç®—å€¼ä¸ºè´Ÿï¼Œåˆ™å¯èƒ½äº§ç”Ÿå›é€€ï¼Œå› æ­¤å®é™…ä¸­ä¼šå–è¯¥è§„åˆ™ä¸å¥½åç¼€è§„åˆ™è®¡ç®—å€¼çš„æœ€å¤§å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µ2ï¼šåå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­ä¸å­˜åœ¨&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç›´æ¥å°†æ•´ä¸ªæ¨¡å¼ä¸²&lt;strong&gt;å‘å³ç§»åŠ¨&lt;/strong&gt;åˆ°&lt;strong&gt;åå­—ç¬¦çš„ä¸‹ä¸€ä½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ä½æ•° = åå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­çš„å¤±é…ä½ç½®ç´¢å¼• + 1 (é€šå¸¸å¯ç†è§£ä¸ºæ¨¡å¼ä¸²é•¿åº¦ï¼Œä½†éœ€æ ¹æ®å…·ä½“ä½ç½®è®¡ç®—)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åå­—ç¬¦è¡¨é¢„å¤„ç†&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ &lt;code&gt;bc_table&lt;/code&gt;ï¼ˆå¤§å°ä¾å­—ç¬¦é›†è€Œå®šï¼Œå¦‚256 for ASCIIï¼‰ï¼Œè®°å½•&lt;strong&gt;æ¯ä¸ªå­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼ˆç´¢å¼•ï¼‰&lt;/strong&gt;ã€‚å¦‚æœå­—ç¬¦ä¸åœ¨æ¨¡å¼ä¸²ä¸­ï¼Œåˆ™è®°ä¸º &lt;code&gt;-1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="2-å¥½åç¼€è§„åˆ™-good-suffix-rule"&gt;&lt;strong&gt;2. å¥½åç¼€è§„åˆ™ (Good Suffix Rule)&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;å½“å‘ç”Ÿå¤±é…æ—¶ï¼Œæ¨¡å¼ä¸²æœ«å°¾å·²ç»åŒ¹é…æˆåŠŸçš„éƒ¨åˆ†å­ä¸²ç§°ä¸º &lt;strong&gt;â€œå¥½åç¼€â€&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µ1ï¼šæ¨¡å¼ä¸²çš„å‰é¢éƒ¨åˆ†å­˜åœ¨ä¸å¥½åç¼€å®Œå…¨åŒ¹é…çš„å­ä¸²&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ¨¡å¼ä¸²&lt;strong&gt;å‘å³ç§»åŠ¨&lt;/strong&gt;ï¼Œä½¿&lt;strong&gt;å‰é¢æœ€é å³&lt;/strong&gt;çš„é‚£ä¸ªåŒ¹é…å­ä¸²ä¸æ–‡æœ¬ä¸²ä¸­çš„å¥½åç¼€å¯¹é½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µ2ï¼šæ¨¡å¼ä¸²ä¸­ä¸å­˜åœ¨ä¸å¥½åç¼€å®Œå…¨åŒ¹é…çš„å­ä¸²ï¼Œä½†å­˜åœ¨ä¸€ä¸ªæœ€é•¿å‰ç¼€ä¸å¥½åç¼€çš„æŸä¸ªåç¼€ç›¸åŒ¹é…&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ¨¡å¼ä¸²&lt;strong&gt;å‘å³ç§»åŠ¨&lt;/strong&gt;ï¼Œä½¿è¿™ä¸ª&lt;strong&gt;æœ€é•¿å‰ç¼€&lt;/strong&gt;ä¸æ–‡æœ¬ä¸²ä¸­å¥½åç¼€çš„ç›¸åº”åç¼€å¯¹é½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ…å†µ3ï¼šæ¨¡å¼ä¸²ä¸­æ—¢ä¸å­˜åœ¨ä¸å¥½åç¼€åŒ¹é…çš„å­ä¸²ï¼Œä¹Ÿä¸å­˜åœ¨ä¸å…¶åç¼€åŒ¹é…çš„å‰ç¼€&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ•´ä¸ªæ¨¡å¼ä¸²&lt;strong&gt;å‘å³ç§»åŠ¨&lt;/strong&gt;æ¨¡å¼ä¸²çš„é•¿åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¥½åç¼€è¡¨é¢„å¤„ç†&lt;/strong&gt;ï¼šæ„å»ºä¸€ä¸ªæ•°ç»„ &lt;code&gt;gs_table&lt;/code&gt;ï¼Œå…¶è®¡ç®—é€šå¸¸å€ŸåŠ©ä¸€ä¸ªåç¼€æ•°ç»„ &lt;code&gt;suffix&lt;/code&gt;ï¼Œ&lt;code&gt;suffix[i]&lt;/code&gt;è¡¨ç¤ºæ¨¡å¼ä¸²ä¸­ä»¥ &lt;code&gt;i&lt;/code&gt;ä½ç½®ç»“å°¾çš„å­ä¸²ä¸æ¨¡å¼ä¸²åç¼€çš„æœ€å¤§åŒ¹é…é•¿åº¦ã€‚æ ¹æ® &lt;code&gt;suffix&lt;/code&gt;æ•°ç»„çš„ä¿¡æ¯æ¥å¡«å…… &lt;code&gt;gs_table&lt;/code&gt;ï¼Œä»¥ç¡®å®šåœ¨å„ç§å¤±é…ä½ç½®ä¸‹æ ¹æ®å¥½åç¼€è§„åˆ™åº”ç§»åŠ¨çš„è·ç¦»ã€‚&lt;/p&gt;
&lt;h3 id="bmç®—æ³•çš„å·¥ä½œæµç¨‹"&gt;&lt;strong&gt;BMç®—æ³•çš„å·¥ä½œæµç¨‹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é¢„å¤„ç†é˜¶æ®µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ ¹æ®æ¨¡å¼ä¸² &lt;code&gt;P&lt;/code&gt;æ„å»º&lt;strong&gt;åå­—ç¬¦è¡¨&lt;/strong&gt; &lt;code&gt;bc_table&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®æ¨¡å¼ä¸² &lt;code&gt;P&lt;/code&gt;æ„å»º&lt;strong&gt;å¥½åç¼€è¡¨&lt;/strong&gt; &lt;code&gt;gs_table&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒ¹é…é˜¶æ®µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°†æ¨¡å¼ä¸² &lt;code&gt;P&lt;/code&gt;ä¸æ–‡æœ¬ä¸² &lt;code&gt;T&lt;/code&gt;å¯¹é½ï¼Œåˆå§‹æ—¶ &lt;code&gt;i = 0&lt;/code&gt;ï¼ˆ&lt;code&gt;i&lt;/code&gt;è¡¨ç¤ºæ–‡æœ¬ä¸²ä¸­ä¸æ¨¡å¼ä¸²é¦–å­—ç¬¦å¯¹é½çš„ä½ç½®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä»æ¨¡å¼ä¸²çš„&lt;strong&gt;æœ«å°¾å¼€å§‹&lt;/strong&gt;ï¼ˆå³ä»å³å‘å·¦ï¼‰æ¯”è¾ƒå­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥æ‰€æœ‰å­—ç¬¦éƒ½åŒ¹é…ï¼Œåˆ™æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆåŒ¹é…ï¼Œè¾“å‡ºä½ç½® &lt;code&gt;i&lt;/code&gt;ã€‚éšåï¼Œé€šå¸¸æ ¹æ®å¥½åç¼€è§„åˆ™ç§»åŠ¨æ¨¡å¼ä¸²ä»¥ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥é‡åˆ°åå­—ç¬¦ï¼Œè®¾å…¶åœ¨æ¨¡å¼ä¸²ä¸­çš„ä½ç½®ä¸º &lt;code&gt;j&lt;/code&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ ¹æ®åå­—ç¬¦è§„åˆ™è®¡ç®—ç§»åŠ¨è·ç¦» &lt;code&gt;bad_shift = j - bc_table[T[i+j]]&lt;/code&gt;(éœ€æ³¨æ„è¾¹ç•Œå’Œä¸å­˜åœ¨çš„æƒ…å†µ)ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®å¥½åç¼€è§„åˆ™è®¡ç®—ç§»åŠ¨è·ç¦» &lt;code&gt;good_shift = gs_table[j]&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¨¡å¼ä¸²çš„&lt;strong&gt;å®é™…ç§»åŠ¨è·ç¦»&lt;/strong&gt;ä¸º &lt;code&gt;max(bad_shift, good_shift)&lt;/code&gt;ã€‚å–æœ€å¤§å€¼æ˜¯ä¸ºäº†ä¿è¯ä¸æ¼è¿‡å¯èƒ½çš„åŒ¹é…ï¼ŒåŒæ—¶å®ç°æœ€å¤§çš„è·³è·ƒã€‚&lt;/li&gt;
&lt;li&gt;ä»¤ &lt;code&gt;i = i + max(bad_shift, good_shift)&lt;/code&gt;ï¼Œé‡æ–°å¼€å§‹ä¸‹ä¸€è½®ä»å³å‘å·¦çš„æ¯”è¾ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é‡å¤ç›´åˆ°æ¨¡å¼ä¸²ç§»å‡ºæ–‡æœ¬ä¸²çš„æœ«å°¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="bmç®—æ³•ç¤ºä¾‹"&gt;&lt;strong&gt;BMç®—æ³•ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æ–‡æœ¬ä¸² T&lt;/strong&gt;: &amp;ldquo;ABABABCABABABD&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¨¡å¼ä¸² P&lt;/strong&gt;: &amp;ldquo;ABABCABAB&amp;rdquo;&lt;/p&gt;
&lt;p&gt;ï¼ˆæ­¤ç¤ºä¾‹å¯ç»“åˆå‰è¿°è§„åˆ™é€æ­¥æ¨æ¼”ï¼Œç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ­¤å¤„ä¸å±•å¼€é€æ­¥è¿‡ç¨‹ï¼Œä½†æ¦‚å¿µä¸Šéµå¾ªä¸Šè¿°æµç¨‹ã€‚ï¼‰ä¸€ä¸ªå¸¸è§çš„åŒ¹é…ç»“æœæ˜¯æ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²çš„ç´¢å¼•ä½ç½® 2 å¤„æ‰¾åˆ°ï¼ˆ0-basedç´¢å¼•ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="bmç®—æ³•çš„æ€§èƒ½åˆ†æ"&gt;&lt;strong&gt;BMç®—æ³•çš„æ€§èƒ½åˆ†æ&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é¢„å¤„ç†é˜¶æ®µï¼šæ„å»ºåå­—ç¬¦è¡¨ &lt;code&gt;O(m + |Î£|)&lt;/code&gt;(|Î£| ä¸ºå­—ç¬¦é›†å¤§å°)ï¼Œæ„å»ºå¥½åç¼€è¡¨æœ€é«˜å¯è¾¾ &lt;code&gt;O(m)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åŒ¹é…é˜¶æ®µï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€åæƒ…å†µ&lt;/strong&gt;ä¸º &lt;code&gt;O(n * m)&lt;/code&gt;ï¼Œä¾‹å¦‚æ–‡æœ¬ä¸²å’Œæ¨¡å¼ä¸²éƒ½æ˜¯ç›¸åŒå­—ç¬¦æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³æƒ…å†µ&lt;/strong&gt;å¯è¾¾åˆ° &lt;code&gt;O(n / m)&lt;/code&gt;ï¼Œå½“æ¨¡å¼ä¸²å§‹ç»ˆä¸åœ¨æ–‡æœ¬ä¸­å‡ºç°æ—¶ï¼Œæ¯æ¬¡éƒ½èƒ½è·³è·ƒæ•´ä¸ªæ¨¡å¼ä¸²é•¿åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹³å‡æ€§èƒ½&lt;/strong&gt;éå¸¸ä¼˜å¼‚ï¼Œå°¤å…¶åœ¨å®é™…åº”ç”¨å’Œå­—ç¬¦é›†è¾ƒå¤§æ—¶ï¼Œè¿œè¶…æœ´ç´ ç®—æ³•ï¼Œä¹Ÿé€šå¸¸ä¼˜äºKMPç®—æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;ï¼šä¸»è¦æ¥è‡ªå­˜å‚¨ &lt;code&gt;bc_table&lt;/code&gt;(O(|Î£|)) å’Œ &lt;code&gt;gs_table&lt;/code&gt;(O(m))ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="bmç®—æ³•çš„ä¼˜ç¼ºç‚¹"&gt;&lt;strong&gt;BMç®—æ³•çš„ä¼˜ç¼ºç‚¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å®é™…åº”ç”¨ä¸­&lt;strong&gt;æ•ˆç‡é«˜&lt;/strong&gt;ï¼Œå°¤å…¶é€‚åˆæ¨¡å¼ä¸²è¾ƒé•¿ã€å­—ç¬¦é›†è¾ƒå¤§çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨äº†ä»å³å‘å·¦æ¯”è¾ƒå’Œå¯å‘å¼è·³è·ƒï¼Œ&lt;strong&gt;è·³è¿‡å¤§é‡ä¸å¯èƒ½åŒ¹é…çš„ä½ç½®&lt;/strong&gt;ï¼Œå‡å°‘äº†æ¯”è¾ƒæ¬¡æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;é¢„å¤„ç†å¥½åç¼€è¡¨ç›¸å¯¹&lt;strong&gt;å¤æ‚&lt;/strong&gt;ï¼Œå®ç°èµ·æ¥æ¯”KMPç­‰ç®—æ³•ç¨éº»çƒ¦ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åæ—¶é—´å¤æ‚åº¦ä¸å¦‚KMPç®—æ³•ç¨³å®šï¼ˆKMPæœ€åä¸º &lt;code&gt;O(n+m)&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="bmç®—æ³•çš„åº”ç”¨"&gt;&lt;strong&gt;BMç®—æ³•çš„åº”ç”¨&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;BMç®—æ³•å› å…¶é«˜æ•ˆæ€§è¢«å¹¿æ³›åº”ç”¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æœ¬ç¼–è¾‘å™¨&lt;/strong&gt;ä¸­çš„æŸ¥æ‰¾åŠŸèƒ½ï¼ˆCtrl+Fï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœç´¢å¼•æ“&lt;/strong&gt;å’Œ&lt;strong&gt;æ•°æ®è¿‡æ»¤&lt;/strong&gt;ä¸­çš„å…³é”®è¯åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå®‰å…¨&lt;/strong&gt;é¢†åŸŸï¼Œå¦‚å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆIDSï¼‰ä¸­çš„ç‰¹å¾ç åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿç‰©ä¿¡æ¯å­¦&lt;/strong&gt;ä¸­DNAåºåˆ—åŒ¹é…ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æ€»ç»“"&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;BMç®—æ³•é€šè¿‡å·§å¦™çš„&lt;strong&gt;åå­—ç¬¦è§„åˆ™&lt;/strong&gt;å’Œ&lt;strong&gt;å¥½åç¼€è§„åˆ™&lt;/strong&gt;ï¼Œä»¥åŠ&lt;strong&gt;ä»å³å‘å·¦&lt;/strong&gt;çš„æ¯”è¾ƒé¡ºåºï¼Œå®ç°äº†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹çš„é«˜æ•ˆå­—ç¬¦ä¸²åŒ¹é…ã€‚å®ƒè™½ç„¶é¢„å¤„ç†é˜¶æ®µç¨æ˜¾å¤æ‚ï¼Œä¸”æœ€åæ—¶é—´å¤æ‚åº¦ç†è®ºä¸ä½³ï¼Œä½†å…¶&lt;strong&gt;ä¼˜å¼‚çš„å¹³å‡æ€§èƒ½&lt;/strong&gt;ä½¿å…¶æˆä¸ºå®è·µä¸­éå¸¸å—æ¬¢è¿çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ä¹‹ä¸€ã€‚ç†è§£å¹¶æŒæ¡BMç®—æ³•ï¼Œå¯¹äºæ·±å…¥ç†è§£å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜çš„ä¼˜åŒ–æ€è·¯å…·æœ‰é‡è¦æ„ä¹‰ã€‚&lt;/p&gt;
&lt;h2 id="rp-ç®—æ³•"&gt;RP ç®—æ³•
&lt;/h2&gt;&lt;p&gt;RK ç®—æ³•é€šå¸¸æŒ‡ &lt;strong&gt;Rabin-Karp å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•&lt;/strong&gt;ã€‚å®ƒæ˜¯ä¸€ç§ä½¿ç”¨å“ˆå¸ŒæŠ€æœ¯æ¥é«˜æ•ˆæŸ¥æ‰¾ä¸»ä¸²ä¸­æ¨¡å¼ä¸²å‡ºç°ä½ç½®çš„ç®—æ³•ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†ã€æ­¥éª¤å’Œç‰¹ç‚¹çš„æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Rabin-Karp ç®—æ³• (RKç®—æ³•)&lt;/th&gt;
&lt;th&gt;æš´åŠ›åŒ¹é…ç®—æ³• (BFç®—æ³•)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨&lt;strong&gt;å“ˆå¸Œå€¼&lt;/strong&gt;å¿«é€Ÿæ¯”è¾ƒä¸»ä¸²å­ä¸²å’Œæ¨¡å¼ä¸²ï¼Œé¿å…é€ä¸ªå­—ç¬¦å¯¹æ¯”&lt;/td&gt;
&lt;td&gt;é€ä¸ªå­—ç¬¦æ¯”è¾ƒä¸»ä¸²å’Œæ¨¡å¼ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ»šåŠ¨å“ˆå¸Œ (Rolling Hash)&lt;/td&gt;
&lt;td&gt;æ— ç‰¹æ®Šæ“ä½œï¼Œç®€å•éå†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹³å‡æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(n + m)&lt;/strong&gt; (nä¸ºä¸»ä¸²é•¿åº¦, mä¸ºæ¨¡å¼ä¸²é•¿åº¦)&lt;/td&gt;
&lt;td&gt;O(n * m)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€åæ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(n * m) (å½“å“ˆå¸Œå†²çªé¢‘ç¹æ—¶é€€åŒ–)&lt;/td&gt;
&lt;td&gt;O(n * m)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(1) (é€šå¸¸åªéœ€å­˜å‚¨å“ˆå¸Œå€¼ç­‰å°‘é‡å˜é‡)&lt;/td&gt;
&lt;td&gt;O(1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³å‡æƒ…å†µä¸‹æ¯”BFç®—æ³•å¿«å¾—å¤šï¼Œå°¤å…¶é€‚ç”¨äºå¤šæ¨¡å¼åŒ¹é…&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼Œæ— éœ€é¢å¤–é¢„å¤„ç†ï¼Œå°è§„æ¨¡å­—ç¬¦ä¸²æˆ–æ¨¡å¼ä¸²çŸ­æ—¶å¯èƒ½æ›´å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ£åŠ¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦å¤„ç†å“ˆå¸Œå†²çªï¼ˆå¯èƒ½éœ€äºŒæ¬¡éªŒè¯ï¼‰ï¼Œæœ€åæƒ…å†µä¸‹æ•ˆç‡ä¸å¦‚ä¼˜åŒ–ç®—æ³•&lt;/td&gt;
&lt;td&gt;æ•ˆç‡ä½ä¸‹ï¼Œå°¤å…¶å½“ä¸»ä¸²å’Œæ¨¡å¼ä¸²å¾ˆé•¿æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;RK ç®—æ³•æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RK ç®—æ³•é€šè¿‡æ¯”è¾ƒ&lt;strong&gt;å“ˆå¸Œå€¼&lt;/strong&gt;æ¥å¿«é€Ÿåˆ¤æ–­ä¸»ä¸²ä¸­çš„å­ä¸²æ˜¯å¦ä¸æ¨¡å¼ä¸²åŒ¹é…ï¼Œä»è€Œé¿å…æ¯æ¬¡éƒ½è¿›è¡Œæ˜‚è´µçš„é€ä¸ªå­—ç¬¦æ¯”è¾ƒã€‚å…¶æ ¸å¿ƒåœ¨äºâ€œ&lt;strong&gt;æ»šåŠ¨å“ˆå¸Œ&lt;/strong&gt;â€ï¼ˆRolling Hashï¼‰æŠ€æœ¯ï¼Œå®ƒå…è®¸åœ¨å¸¸æ•°æ—¶é—´å†…è®¡ç®—ä¸‹ä¸€ä¸ªå­ä¸²çš„å“ˆå¸Œå€¼ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—æ•´ä¸ªå­ä¸²çš„å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”„ &lt;strong&gt;RK ç®—æ³•çš„å·¥ä½œæ­¥éª¤&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—æ¨¡å¼ä¸²å“ˆå¸Œå€¼&lt;/strong&gt;ï¼šé¦–å…ˆè®¡ç®—æ¨¡å¼ä¸²çš„å“ˆå¸Œå€¼ï¼Œä¾‹å¦‚ &lt;code&gt;hash_pat&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—ä¸»ä¸²å‰ m ä¸ªå­—ç¬¦çš„å“ˆå¸Œå€¼&lt;/strong&gt;ï¼šè®¡ç®—ä¸»ä¸²å‰ &lt;code&gt;m&lt;/code&gt;ï¼ˆæ¨¡å¼ä¸²é•¿åº¦ï¼‰ä¸ªå­—ç¬¦çš„å­ä¸²å“ˆå¸Œå€¼ï¼Œä¾‹å¦‚ &lt;code&gt;hash_sub&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯”è¾ƒå“ˆå¸Œå€¼å¹¶æ»‘åŠ¨çª—å£&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;hash_sub == hash_pat&lt;/code&gt;ï¼Œåˆ™&lt;strong&gt;é€ä¸ªå­—ç¬¦æ¯”è¾ƒ&lt;/strong&gt;è¯¥å­ä¸²ä¸æ¨¡å¼ä¸²ï¼ˆä»¥é˜²æ­¢å“ˆå¸Œå†²çªï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåŒ¹é…ï¼Œè¿”å›å½“å‰èµ·å§‹ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;æ— è®ºæ˜¯å¦åŒ¹é…ï¼Œç®—æ³•éƒ½ä¼šä½¿ç”¨æ»šåŠ¨å“ˆå¸ŒæŠ€å·§ï¼Œæ ¹æ®å½“å‰å­ä¸²çš„å“ˆå¸Œå€¼ &lt;code&gt;hash_sub&lt;/code&gt;å¿«é€Ÿè®¡ç®—ä¸‹ä¸€ä¸ªå­ä¸²ï¼ˆçª—å£å‘å³æ»‘åŠ¨ä¸€ä½ï¼‰çš„å“ˆå¸Œå€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤ç›´åˆ°éå†å®Œæˆ&lt;/strong&gt;ï¼šé‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°ä¸»ä¸²ä¸­æ‰€æœ‰å¯èƒ½çš„å­ä¸²éƒ½è¢«æ£€æŸ¥è¿‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ”¢ &lt;strong&gt;å“ˆå¸Œå‡½æ•°è®¾è®¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RK ç®—æ³•é€šå¸¸å°†å­—ç¬¦ä¸²è§†ä¸ºä¸€ä¸ª &lt;strong&gt;&lt;code&gt;d&lt;/code&gt;è¿›åˆ¶æ•°&lt;/strong&gt;ï¼ˆ&lt;code&gt;d&lt;/code&gt;æ˜¯å­—ç¬¦é›†çš„å¤§å°ï¼Œä¾‹å¦‚ ASCII 256 æˆ–å°å†™å­—æ¯ 26ï¼‰ã€‚ä¸€ä¸ªå¸¸è§çš„æ»šåŠ¨å“ˆå¸Œå‡½æ•°æ˜¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;hash(s[i+1:i+m+1]) = d * (hash(s[i:i+m]) - d^(m-1) * s[i]) + s[i+m]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åï¼Œä¸ºäº†é˜²æ­¢æ•°å€¼è¿‡å¤§ï¼Œå¸¸å¯¹ä¸€ä¸ªå¤§ç´ æ•° &lt;code&gt;q&lt;/code&gt;å–æ¨¡ï¼š&lt;code&gt;hash_value = hash_value % q&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“Š &lt;strong&gt;å¤æ‚åº¦åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹³å‡æƒ…å†µ&lt;/strong&gt;ï¼š&lt;strong&gt;O(n + m)&lt;/strong&gt;ã€‚é¢„å¤„ç†æ¨¡å¼ä¸²å“ˆå¸Œå’Œä¸»ä¸²å‰ m ä¸ªå­—ç¬¦çš„å“ˆå¸Œéœ€è¦ O(m)ï¼Œä¸»ä¸²æ»‘åŠ¨çª—å£å¤„ç†éœ€è¦ O(n)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€åæƒ…å†µ&lt;/strong&gt;ï¼šO(n * m)ã€‚å½“å“ˆå¸Œå†²çªé¢‘ç¹å‘ç”Ÿæ—¶ï¼Œæ¯æ¬¡å“ˆå¸Œå€¼ç›¸ç­‰éƒ½éœ€è¦è¿›è¡Œé€ä¸ªå­—ç¬¦æ¯”è¾ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;ï¼š&lt;strong&gt;O(1)&lt;/strong&gt;ã€‚ä»…éœ€å­˜å‚¨å‡ ä¸ªå˜é‡ï¼ˆå¦‚å“ˆå¸Œå€¼ã€è¿›åˆ¶æ•°ã€æ¨¡æ•°ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œå†²çª&lt;/strong&gt;ï¼šä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½äº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼ã€‚å› æ­¤ï¼Œå½“å“ˆå¸Œå€¼åŒ¹é…æ—¶ï¼Œ&lt;strong&gt;å¿…é¡»è¿›è¡Œé€ä¸ªå­—ç¬¦çš„éªŒè¯&lt;/strong&gt;ä»¥ç¡®ä¿ä¸æ˜¯è¯¯æŠ¥ã€‚é€‰æ‹©ä¸€ä¸ªå¥½çš„å“ˆå¸Œå‡½æ•°ï¼ˆå¤§è¿›åˆ¶æ•° &lt;code&gt;d&lt;/code&gt;å’Œå¤§ç´ æ•° &lt;code&gt;q&lt;/code&gt;ï¼‰å¯¹äºå‡å°‘å†²çªè‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ•°é€‰æ‹©&lt;/strong&gt;ï¼šæ¨¡æ•° &lt;code&gt;q&lt;/code&gt;åº”è¶³å¤Ÿå¤§ï¼Œä»¥å°½é‡å‡å°‘å†²çªï¼Œä½†ä¹Ÿè¦è€ƒè™‘è®¡ç®—æ•ˆç‡ï¼Œé¿å…æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸŒ &lt;strong&gt;ä¸»è¦åº”ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RK ç®—æ³•é€‚ç”¨äºéœ€è¦å¿«é€Ÿè¿›è¡Œ&lt;strong&gt;å¤šæ¨¡å¼åŒ¹é…&lt;/strong&gt;ï¼ˆç¨åŠ ä¿®æ”¹ï¼‰æˆ–&lt;strong&gt;åœ¨å¤šä¸ªè¾“å…¥ä¸­æŸ¥æ‰¾é‡å¤å­ä¸²&lt;/strong&gt;çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„æŸ¥æ‰¾åŠŸèƒ½ï¼ˆè™½ä¸å¸¸è§ï¼Œå› æœ‰æ›´ä¼˜ç®—æ³•å¦‚KMPï¼‰&lt;/li&gt;
&lt;li&gt;æ£€æµ‹æ–‡æ¡£ä¸­çš„æŠ„è¢­ï¼ˆæŸ¥æ‰¾é•¿å­—ç¬¦ä¸²ä¸­çš„é‡å¤ç‰‡æ®µï¼‰&lt;/li&gt;
&lt;li&gt;DNAåºåˆ—åŒ¹é…ï¼ˆç”Ÿç‰©ä¿¡æ¯å­¦ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;ç®€å•ä¾‹å­&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ä¸»ä¸² &lt;code&gt;txt = &amp;quot;123456&amp;quot;&lt;/code&gt;ï¼Œæ¨¡å¼ä¸² &lt;code&gt;pat = &amp;quot;34&amp;quot;&lt;/code&gt;ï¼Œå­—ç¬¦é›†ä¸ºæ•°å­— 0-9ï¼ˆ&lt;code&gt;d=10&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¡ç®— &lt;code&gt;pat&lt;/code&gt;çš„å“ˆå¸Œå€¼ï¼š&lt;code&gt;hash_pat = '3'*10 + '4' = 30+4=34&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è®¡ç®— &lt;code&gt;txt&lt;/code&gt;å‰ 2 ä¸ªå­—ç¬¦ &amp;ldquo;12&amp;rdquo; çš„å“ˆå¸Œå€¼ï¼š&lt;code&gt;hash_sub = '1'*10 + '2' = 10+2=12&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;12 != 34&lt;/code&gt;ï¼Œä¸åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ»šåŠ¨å“ˆå¸Œè®¡ç®—ä¸‹ä¸€ä¸ªå­ä¸² &amp;ldquo;23&amp;rdquo;ï¼š&lt;code&gt;hash_sub_new = 10 * (12 - 10^(2-1)*'1') + '3' = 10*(12-10 * 1) + 3 = 10*(2) + 3 = 23&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;23 != 34&lt;/code&gt;ï¼Œä¸åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;è®¡ç®—ä¸‹ä¸€ä¸ªå­ä¸² &amp;ldquo;34&amp;rdquo;ï¼š&lt;code&gt;hash_sub_new = 10 * (23 - 10^(2-1)*'2') + '4' = 10*(23-10 * 2) + 4 = 10*(3) + 4 = 34&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;34 == 34&lt;/code&gt;ï¼Œå“ˆå¸ŒåŒ¹é…ï¼Œå†é€ä¸ªå­—ç¬¦éªŒè¯ï¼Œ&amp;ldquo;34&amp;rdquo; ç¡®å®ç­‰äº &amp;ldquo;34&amp;rdquo;ï¼ŒåŒ¹é…æˆåŠŸã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Rabin-Karp ç®—æ³•é€šè¿‡å·§å¦™çš„æ»šåŠ¨å“ˆå¸ŒæŠ€æœ¯ï¼Œå°†å­—ç¬¦ä¸²åŒ¹é…çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°äº†çº¿æ€§çº§åˆ«ã€‚è™½ç„¶æœ€åæƒ…å†µä¸‹çš„æ€§èƒ½å¹¶ä¸ç†æƒ³ï¼Œä½†å…¶æ€è·¯æ¸…æ™°ï¼Œå®ç°ç›¸å¯¹ç®€å•ï¼Œå¹¶ä¸”åœ¨å¤„ç†å¤šæ¨¡å¼åŒ¹é…ç­‰ç‰¹å®šé—®é¢˜æ—¶éå¸¸æœ‰ç”¨ã€‚ç†è§£å…¶åŸç†å’Œå“ˆå¸Œå‡½æ•°çš„è®¾è®¡æ˜¯æŒæ¡è¯¥ç®—æ³•çš„å…³é”®ã€‚&lt;/p&gt;
&lt;h2 id="å¹¿ä¹‰è¡¨"&gt;å¹¿ä¹‰è¡¨
&lt;/h2&gt;&lt;p&gt;å¹¿ä¹‰è¡¨ï¼ˆGeneralized Listï¼‰ï¼Œä¹Ÿç§°ä¸ºåˆ—è¡¨ï¼ˆListsï¼‰ï¼Œæ˜¯ä¸€ç§éå¸¸çµæ´»çš„æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°è¡¨ç¤ºå±‚æ¬¡æ€§å’Œé€’å½’æ€§çš„æ•°æ®ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»å¹¿ä¹‰è¡¨çš„æ ¸å¿ƒæ¦‚å¿µã€ç‰¹æ€§ã€å­˜å‚¨è¡¨ç¤ºã€åŸºæœ¬æ“ä½œä»¥åŠåº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“š å¹¿ä¹‰è¡¨è¯¦è§£&lt;/p&gt;
&lt;h2 id="1-æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰"&gt;1 æ ¸å¿ƒæ¦‚å¿µä¸å®šä¹‰
&lt;/h2&gt;&lt;p&gt;å¹¿ä¹‰è¡¨æ˜¯çº¿æ€§è¡¨çš„ä¸€ç§æ¨å¹¿ï¼Œæ˜¯ä¸€ç§&lt;strong&gt;éçº¿æ€§çš„æ•°æ®ç»“æ„&lt;/strong&gt;ã€‚å®ƒå¯ä»¥å­˜å‚¨å¤šç§ç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸”æ”¯æŒåµŒå¥—ç»“æ„ã€‚å¹¿ä¹‰è¡¨æ˜¯ &lt;code&gt;n(nâ‰¥0)&lt;/code&gt;ä¸ªå…ƒç´  &lt;code&gt;aâ‚, aâ‚‚, ..., aáµ¢, ..., aâ‚™&lt;/code&gt;çš„æœ‰é™åºåˆ—ã€‚å¹¿ä¹‰è¡¨é€šå¸¸è®°ä½œ &lt;code&gt;Ls = (aâ‚, aâ‚‚, ..., aáµ¢, ..., aâ‚™)&lt;/code&gt;ã€‚å…¶ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Ls&lt;/strong&gt; æ˜¯å¹¿ä¹‰è¡¨çš„åå­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;n&lt;/strong&gt; æ˜¯å®ƒçš„é•¿åº¦ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå…ƒç´  &lt;code&gt;aáµ¢&lt;/code&gt;&lt;strong&gt;å¯ä»¥æ˜¯åŸå­&lt;/strong&gt;ï¼ˆä¸€ä¸ªä¸å¯å†åˆ†çš„å•ä¸ªæ•°æ®é¡¹ï¼Œç”¨å°å†™å­—æ¯è¡¨ç¤ºï¼‰ï¼Œ&lt;strong&gt;ä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªå¹¿ä¹‰è¡¨&lt;/strong&gt;ï¼ˆç§°ä¸ºå­è¡¨ï¼Œç”¨å¤§å†™å­—æ¯è¡¨ç¤ºï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¹¿ä¹‰è¡¨é€šè¿‡&lt;strong&gt;é€’å½’&lt;/strong&gt;è¿›è¡Œå®šä¹‰ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥è¡¨ç¤ºéå¸¸å¤æ‚çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;h3 id="11-è¡¨å¤´ä¸è¡¨å°¾"&gt;1.1 è¡¨å¤´ä¸è¡¨å°¾
&lt;/h3&gt;&lt;p&gt;ä»»ä½•&lt;strong&gt;éç©ºå¹¿ä¹‰è¡¨&lt;/strong&gt;ï¼ˆn â‰¥ 1ï¼‰éƒ½å¯ä»¥åˆ†è§£ä¸º&lt;strong&gt;è¡¨å¤´ï¼ˆHeadï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;è¡¨å°¾ï¼ˆTailï¼‰&lt;/strong&gt; ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡¨å¤´ Head(Ls)&lt;/strong&gt;ï¼šéç©ºå¹¿ä¹‰è¡¨çš„&lt;strong&gt;ç¬¬ä¸€ä¸ªå…ƒç´ &lt;/strong&gt; &lt;code&gt;aâ‚&lt;/code&gt;ã€‚å®ƒå¯ä»¥æ˜¯åŸå­ï¼Œä¹Ÿå¯ä»¥æ˜¯å­è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨å°¾ Tail(Ls)&lt;/strong&gt;ï¼šéç©ºå¹¿ä¹‰è¡¨&lt;strong&gt;é™¤å»è¡¨å¤´å&lt;/strong&gt;ï¼Œç”±&lt;strong&gt;å…¶ä½™æ‰€æœ‰å…ƒç´ &lt;/strong&gt;æ„æˆçš„&lt;strong&gt;å­è¡¨&lt;/strong&gt; &lt;code&gt;(aâ‚‚, aâ‚ƒ, ..., aâ‚™)&lt;/code&gt;ã€‚&lt;strong&gt;å…³é”®çš„æ˜¯ï¼Œè¡¨å°¾æœ¬èº«å¿…ç„¶æ˜¯ä¸€ä¸ªå¹¿ä¹‰è¡¨&lt;/strong&gt;ï¼ˆå³ä½¿åªå‰©ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå¯¹äºå¹¿ä¹‰è¡¨ &lt;code&gt;L = (a, b, c)&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Head(L) = a&lt;/code&gt;ï¼ˆåŸå­ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tail(L) = (b, c)&lt;/code&gt;ï¼ˆå­è¡¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="12-é‡è¦ç¤ºä¾‹ä¸æ¦‚å¿µè¾¨æ"&gt;1.2 é‡è¦ç¤ºä¾‹ä¸æ¦‚å¿µè¾¨æ
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›å¸®åŠ©ç†è§£å¹¿ä¹‰è¡¨çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¹¿ä¹‰è¡¨è¡¨ç¤º&lt;/th&gt;
&lt;th&gt;è¡¨å&lt;/th&gt;
&lt;th&gt;é•¿åº¦&lt;/th&gt;
&lt;th&gt;æ·±åº¦&lt;/th&gt;
&lt;th&gt;è¡¨å¤´&lt;/th&gt;
&lt;th&gt;è¡¨å°¾&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;E = ()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;E&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç©ºè¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;L = (a, b)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;L&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;code&gt;a&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;(b)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å…ƒç´ å‡ä¸ºåŸå­ï¼Œç­‰ä»·äºçº¿æ€§è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;A = (x, L) = (x, (a, b))&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;code&gt;x&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;((a, b))&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬äºŒä¸ªå…ƒç´ æ˜¯å­è¡¨L&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;B = (A, y) = ((x, (a, b)), y)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;(y)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å­è¡¨A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;C = (A, B)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;C&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;code&gt;A&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;(B)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸¤ä¸ªå…ƒç´ éƒ½æ˜¯å­è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;D = (a, D) = (a, (a, (a, ...)))&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;D&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;âˆ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;a&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;(D)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€’å½’è¡¨&lt;/strong&gt;ï¼Œæ·±åº¦æ— ç©·&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹åˆ«æ³¨æ„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;(())&lt;/code&gt;ä¸æ˜¯ç©ºè¡¨&lt;/strong&gt;ï¼šå®ƒæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º1çš„éç©ºå¹¿ä¹‰è¡¨ï¼Œå…¶å”¯ä¸€çš„å…ƒç´ æ˜¯ç©ºè¡¨ &lt;code&gt;()&lt;/code&gt;ã€‚å¯¹å…¶å–è¡¨å¤´å’Œè¡¨å°¾éƒ½ä¼šå¾—åˆ°ç©ºè¡¨ &lt;code&gt;()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨å°¾æ°¸è¿œæ˜¯å­è¡¨&lt;/strong&gt;ï¼š&lt;code&gt;Tail(L) = (b, c)&lt;/code&gt;æ˜¯ä¸€ä¸ªå­è¡¨ï¼Œè€Œä¸æ˜¯å•ä¸ªå…ƒç´  &lt;code&gt;b&lt;/code&gt;æˆ– &lt;code&gt;c&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="13-é•¿åº¦ä¸æ·±åº¦"&gt;1.3 é•¿åº¦ä¸æ·±åº¦
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é•¿åº¦&lt;/strong&gt;ï¼šæŒ‡å¹¿ä¹‰è¡¨&lt;strong&gt;æœ€å¤–å±‚&lt;/strong&gt;çš„å…ƒç´ ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;A = (x, (a, b))&lt;/code&gt;çš„é•¿åº¦æ˜¯2ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ·±åº¦&lt;/strong&gt;ï¼šæŒ‡å¹¿ä¹‰è¡¨&lt;strong&gt;å±•å¼€åæ‰€å«æ‹¬å·çš„æœ€å¤§å±‚æ•°&lt;/strong&gt;ï¼ˆé€’å½’å®šä¹‰çš„æœ€å¤§åµŒå¥—æ¬¡æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸå­&lt;/strong&gt;çš„æ·±åº¦ä¸º &lt;strong&gt;0&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºè¡¨ &lt;code&gt;()&lt;/code&gt;&lt;/strong&gt; çš„æ·±åº¦ä¸º &lt;strong&gt;1&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éç©ºå¹¿ä¹‰è¡¨çš„æ·±åº¦æ˜¯å…¶æ‰€æœ‰&lt;strong&gt;å…ƒç´ æ·±åº¦çš„æœ€å¤§å€¼åŠ  1&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;code&gt;B = ((x, (a, b)), y)&lt;/code&gt;çš„æ·±åº¦è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…ƒç´ 1æ˜¯å­è¡¨ &lt;code&gt;(x, (a, b))&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…ƒç´ 1.1æ˜¯åŸå­ &lt;code&gt;x&lt;/code&gt;ï¼ˆæ·±åº¦0ï¼‰&lt;/li&gt;
&lt;li&gt;å…ƒç´ 1.2æ˜¯å­è¡¨ &lt;code&gt;(a, b)&lt;/code&gt;ï¼ˆæ·±åº¦1ï¼‰&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥å­è¡¨ &lt;code&gt;(x, (a, b))&lt;/code&gt;çš„æ·±åº¦ä¸º &lt;code&gt;max(0, 1) + 1 = 2&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…ƒç´ 2æ˜¯åŸå­ &lt;code&gt;y&lt;/code&gt;ï¼ˆæ·±åº¦0ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› æ­¤ï¼ŒBçš„æ·±åº¦ä¸º &lt;code&gt;max(2, 0) + 1 = 3&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2-å¹¿ä¹‰è¡¨çš„æ€§è´¨"&gt;2 å¹¿ä¹‰è¡¨çš„æ€§è´¨
&lt;/h2&gt;&lt;p&gt;å¹¿ä¹‰è¡¨å…·æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦æ€§è´¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœ‰åºæ€§&lt;/strong&gt;ï¼šå¹¿ä¹‰è¡¨ä¸­çš„æ•°æ®å…ƒç´ æœ‰ç›¸å¯¹æ¬¡åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±‚æ¬¡æ€§ä¸å¤šå±‚æ¬¡ç»“æ„&lt;/strong&gt;ï¼šå¹¿ä¹‰è¡¨ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯å­è¡¨ï¼Œå­è¡¨çš„å…ƒç´ è¿˜å¯ä»¥æ˜¯å­è¡¨ï¼Œå½¢æˆä¸€ç§å¤šå±‚æ¬¡çš„ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…±äº«æ€§&lt;/strong&gt;ï¼šä¸€ä¸ªå¹¿ä¹‰è¡¨å¯ä»¥è¢«å…¶ä»–å¤šä¸ªå¹¿ä¹‰è¡¨å…±äº«ã€‚ä¾‹å¦‚ï¼Œè¡¨ &lt;code&gt;A&lt;/code&gt;å¯ä»¥åŒæ—¶æ˜¯è¡¨ &lt;code&gt;B&lt;/code&gt;å’Œè¡¨ &lt;code&gt;C&lt;/code&gt;çš„å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€’å½’æ€§&lt;/strong&gt;ï¼šå¹¿ä¹‰è¡¨å¯ä»¥æ˜¯&lt;strong&gt;é€’å½’è¡¨&lt;/strong&gt;ï¼Œå³å¹¿ä¹‰è¡¨æœ¬èº«å¯ä»¥ä½œä¸ºè‡ªå·±çš„ä¸€ä¸ªå­è¡¨ï¼ˆå¦‚ä¸Šé¢çš„ä¾‹å­ &lt;code&gt;D = (a, D)&lt;/code&gt;ï¼‰ã€‚é€’å½’è¡¨çš„&lt;strong&gt;æ·±åº¦æ˜¯æ— ç©·çš„&lt;/strong&gt;ï¼Œä½†å…¶&lt;strong&gt;é•¿åº¦æ˜¯æœ‰é™çš„&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;D&lt;/code&gt;çš„é•¿åº¦ä¸º2ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨æ€§&lt;/strong&gt;ï¼šå¹¿ä¹‰è¡¨å¯ä»¥å…¼å®¹å’Œè¡¨ç¤ºå…¶ä»–å¤šç§æ•°æ®ç»“æ„ã€‚
&lt;ul&gt;
&lt;li&gt;å½“æ‰€æœ‰å…ƒç´ éƒ½æ˜¯åŸå­æ—¶ï¼Œå®ƒå°±æ˜¯&lt;strong&gt;çº¿æ€§è¡¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥è¡¨ç¤º&lt;strong&gt;æ ‘å½¢ç»“æ„&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;(A, B, C)&lt;/code&gt;å¯è¡¨ç¤ºä¸€æ£µæ ‘ï¼Œå…¶ä¸­ &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;B&lt;/code&gt;, &lt;code&gt;C&lt;/code&gt;æ˜¯å­æ ‘ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥è¡¨ç¤º&lt;strong&gt;å›¾å½¢ç»“æ„&lt;/strong&gt;ï¼ˆå°¤å…¶æ˜¯é€’å½’è¡¨å¯ä»¥è¡¨ç¤ºæœ‰ç¯å›¾ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="3-å­˜å‚¨è¡¨ç¤º"&gt;3 å­˜å‚¨è¡¨ç¤º
&lt;/h2&gt;&lt;p&gt;ç”±äºå¹¿ä¹‰è¡¨çš„å…ƒç´ å¯ä»¥æ˜¯åŸå­æˆ–å­è¡¨ï¼Œç±»å‹ä¸ç»Ÿä¸€ï¼Œå¹¶ä¸”é•¿åº¦å’Œæ·±åº¦ç»å¸¸å˜åŒ–ï¼Œå› æ­¤&lt;strong&gt;é¡ºåºå­˜å‚¨ç»“æ„éš¾ä»¥å®ç°&lt;/strong&gt;ï¼Œé€šå¸¸é‡‡ç”¨&lt;strong&gt;é“¾å¼å­˜å‚¨ç»“æ„&lt;/strong&gt;ã€‚ä¸»è¦æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;h3 id="31-å¤´å°¾é“¾è¡¨å­˜å‚¨ç»“æ„"&gt;3.1 å¤´å°¾é“¾è¡¨å­˜å‚¨ç»“æ„
&lt;/h3&gt;&lt;p&gt;è¿™ç§ç»“æ„ä¸­ï¼Œæ¯ä¸ªç»“ç‚¹ä½¿ç”¨ä¸€ä¸ª&lt;strong&gt;æ ‡å¿—ä½ï¼ˆtagï¼‰&lt;/strong&gt; æ¥åŒºåˆ†åŸå­ç»“ç‚¹å’Œè¡¨ç»“ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;typedef enum { ATOM, LIST } ElemTag; // ATOM=0:åŸå­, LIST=1:å­è¡¨
typedef struct GLNode {
ElemTag tag; // æ ‡å¿—åŸŸï¼Œç”¨äºåŒºåˆ†åŸå­ç»“ç‚¹å’Œè¡¨ç»“ç‚¹
union {
AtomType atom; // åŸå­ç»“ç‚¹çš„å€¼åŸŸ
struct {
struct GLNode* hp; // æŒ‡å‘è¡¨å¤´çš„æŒ‡é’ˆ
struct GLNode* tp; // æŒ‡å‘è¡¨å°¾çš„æŒ‡é’ˆ
} ptr;
};
} *GList;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§å­˜å‚¨æ–¹å¼èƒ½æ¸…æ™°åœ°åæ˜ å¹¿ä¹‰è¡¨çš„&lt;strong&gt;å±‚æ¬¡ç»“æ„&lt;/strong&gt;ï¼Œè¡¨å¤´æŒ‡é’ˆ &lt;code&gt;hp&lt;/code&gt;å’Œè¡¨å°¾æŒ‡é’ˆ &lt;code&gt;tp&lt;/code&gt;æ„æˆäº†ä¸€ä¸ªé€’å½’çš„ç»“æ„ã€‚&lt;/p&gt;
&lt;h3 id="32-æ‰©å±•çº¿æ€§é“¾è¡¨å­˜å‚¨ç»“æ„"&gt;3.2 æ‰©å±•çº¿æ€§é“¾è¡¨å­˜å‚¨ç»“æ„
&lt;/h3&gt;&lt;p&gt;è¿™ç§ç»“æ„ä¹Ÿæ›´å¸¸ç”¨ï¼Œæ¯ä¸ªç»“ç‚¹ä¹ŸåŒ…å«ä¸€ä¸ªæ ‡å¿—ä½ &lt;code&gt;tag&lt;/code&gt;ï¼Œä½†ç”¨ä¸åŒçš„æŒ‡é’ˆåŸŸæ¥ç»„ç»‡ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;typedef enum { ATOM, LIST } ElemTag;
typedef struct GLNode {
ElemTag tag; // æ ‡å¿—åŸŸ
union {
AtomType atom; // åŸå­ç»“ç‚¹çš„å€¼åŸŸ
struct GLNode* hp; // æŒ‡å‘å­è¡¨çš„æŒ‡é’ˆ
};
struct GLNode* next; // æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ
} *GList;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§ç»“æ„æ›´åƒä¸€ä¸ªæ™®é€šçš„é“¾è¡¨ï¼Œ&lt;code&gt;hp&lt;/code&gt;æŒ‡å‘è¯¥å…ƒç´ ä»£è¡¨çš„å­è¡¨ï¼ˆå¦‚æœè¯¥å…ƒç´ æ˜¯å­è¡¨ï¼‰ï¼Œ&lt;code&gt;next&lt;/code&gt;æŒ‡å‘åŒçº§çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚è¿™ç§è¡¨ç¤ºæ³•åœ¨éå†æ—¶å¯èƒ½æ›´ç›´è§‚ã€‚&lt;/p&gt;
&lt;h2 id="4-åŸºæœ¬æ“ä½œ"&gt;4 åŸºæœ¬æ“ä½œ
&lt;/h2&gt;&lt;p&gt;å¹¿ä¹‰è¡¨çš„åŸºæœ¬æ“ä½œå¤§å¤šéœ€è¦&lt;strong&gt;é€’å½’&lt;/strong&gt;å®ç°ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œå&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;InitGList(&amp;amp;L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å¹¿ä¹‰è¡¨Lã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CreateGList(&amp;amp;L, S)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®å­—ç¬¦ä¸²Sæ‰€æè¿°çš„å¹¿ä¹‰è¡¨ç»“æ„ï¼ˆå¦‚ &lt;code&gt;â€œ(a, (b, c))â€&lt;/code&gt;ï¼‰åˆ›å»ºå¹¿ä¹‰è¡¨Lã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DestroyGList(&amp;amp;L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é”€æ¯å¹¿ä¹‰è¡¨Lï¼Œé‡Šæ”¾å…¶å ç”¨çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CopyGList(&amp;amp;T, L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¤åˆ¶å¹¿ä¹‰è¡¨Lï¼Œå¾—åˆ°å¹¿ä¹‰è¡¨Tã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;GListLength(L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å¹¿ä¹‰è¡¨Lçš„é•¿åº¦ï¼ˆæœ€å¤–å±‚å…ƒç´ ä¸ªæ•°ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;GListDepth(L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å¹¿ä¹‰è¡¨Lçš„æ·±åº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;GListEmpty(L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ¤æ–­å¹¿ä¹‰è¡¨Læ˜¯å¦ä¸ºç©ºè¡¨ï¼ˆé•¿åº¦æ˜¯å¦ä¸º0ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;GetHead(L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å¹¿ä¹‰è¡¨Lçš„è¡¨å¤´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;GetTail(L)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›å¹¿ä¹‰è¡¨Lçš„è¡¨å°¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;TraverseGList(L, Visit())&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;éå†å¹¿ä¹‰è¡¨Lï¼Œå¯¹æ¯ä¸ªå…ƒç´ è°ƒç”¨å‡½æ•°&lt;code&gt;Visit&lt;/code&gt;è¿›è¡Œæ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;æ“ä½œç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å¯¹äºå¹¿ä¹‰è¡¨ &lt;code&gt;L = ((a, b), c, d)&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GetHead(L) = (a, b)&lt;/code&gt;ï¼ˆå­è¡¨ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GetTail(L) = (c, d)&lt;/code&gt;ï¼ˆå­è¡¨ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GetHead(GetTail(L)) = c&lt;/code&gt;ï¼ˆåŸå­ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GetTail(GetTail(L)) = (d)&lt;/code&gt;ï¼ˆå­è¡¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="5-å¹¿ä¹‰è¡¨ä¸çº¿æ€§è¡¨çš„å¯¹æ¯”"&gt;5 å¹¿ä¹‰è¡¨ä¸çº¿æ€§è¡¨çš„å¯¹æ¯”
&lt;/h2&gt;&lt;p&gt;å¹¿ä¹‰è¡¨æ˜¯çº¿æ€§è¡¨çš„æ¨å¹¿ï¼Œä¸¤è€…æœ‰æ˜¾è‘—åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;çº¿æ€§è¡¨&lt;/th&gt;
&lt;th&gt;å¹¿ä¹‰è¡¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒç´ ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…é¡»æ˜¯åŒä¸€ç±»å‹çš„&lt;strong&gt;åŸå­&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥æ˜¯&lt;strong&gt;åŸå­&lt;/strong&gt;ï¼Œä¹Ÿå¯ä»¥æ˜¯&lt;strong&gt;å­è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸¥æ ¼çš„&lt;strong&gt;çº¿æ€§é¡ºåº&lt;/strong&gt;ç»“æ„&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€’å½’ã€åµŒå¥—&lt;/strong&gt;çš„éçº¿æ€§ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œå¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œå¤æ‚åº¦é€šå¸¸ä¸ºO(n)&lt;/td&gt;
&lt;td&gt;æ“ä½œå¤šéœ€&lt;strong&gt;é€’å½’&lt;/strong&gt;å®ç°ï¼Œå¤æ‚åº¦é€šå¸¸æ›´é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹å›ºå®šï¼Œéš¾ä»¥ç›´æ¥è¡¨ç¤ºå¤æ‚å±‚æ¬¡å…³ç³»&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜åº¦çµæ´»&lt;/strong&gt;ï¼Œèƒ½è¡¨ç¤ºæ ‘ã€å›¾ç­‰å¤æ‚ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨å¤´/è¡¨å°¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— æ­¤ç‰¹å®šæ¦‚å¿µæˆ–æ¦‚å¿µä¸åŒ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ¦‚å¿µ&lt;/strong&gt;ï¼Œä¸”&lt;strong&gt;è¡¨å°¾å¿…å®šæ˜¯ä¸€ä¸ªå­è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="6-åº”ç”¨åœºæ™¯"&gt;6 åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;p&gt;å¹¿ä¹‰è¡¨çš„é€’å½’å’Œå±‚æ¬¡ç‰¹æ€§ä½¿å…¶åœ¨å¤šä¸ªé¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡¨ç¤ºå¤šå±‚æ¬¡ã€é€’å½’çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼šå¦‚æ–‡ä»¶ç›®å½•ç»“æ„ï¼ˆç›®å½•ä¸­åŒ…å«æ–‡ä»¶å’Œå­ç›®å½•ï¼‰ã€HTML/XMLæ–‡æ¡£çš„åµŒå¥—æ ‡ç­¾ã€ç»„ç»‡ç»“æ„å›¾ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨ç¤ºæ•°å­¦è¡¨è¾¾å¼&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œå¤šé¡¹å¼ &lt;code&gt;P(x, y) = xÂ² + 2xy + yÂ²&lt;/code&gt;å¯ä»¥ç”¨å¹¿ä¹‰è¡¨è¡¨ç¤ºä¸º &lt;code&gt;( +, (^, x, 2), ( *, ( *, 2, x), y), (^, y, 2) )&lt;/code&gt;ï¼Œè¿™ç§è¡¨ç¤ºä¾¿äºé€’å½’æ±‚å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äººå·¥æ™ºèƒ½ä¸ç¬¦å·å¤„ç†&lt;/strong&gt;ï¼šLISPç­‰å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†ç¨‹åºå’Œæ•°æ®éƒ½è¡¨ç¤ºä¸ºå¹¿ä¹‰è¡¨ï¼ˆç§°ä¸ºS-è¡¨è¾¾å¼ï¼‰ï¼Œæå¤§åœ°ç®€åŒ–äº†ç¬¦å·å¤„ç†å’Œå…ƒç¼–ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“ç³»ç»Ÿ&lt;/strong&gt;ï¼šç”¨äºè¡¨ç¤ºå¤æ‚çš„å…³ç³»æ¨¡å¼æˆ–å¯¹è±¡å…³ç³»æ˜ å°„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œä¸ºå…¶ä»–æ•°æ®ç»“æ„çš„åŸºç¡€&lt;/strong&gt;ï¼šç”±äºå…¶é€šç”¨æ€§ï¼Œå¯ç”¨äºå®ç°æ ‘ã€å›¾ç­‰æ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£å¹¿ä¹‰è¡¨è¿™ä¸€é‡è¦çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;h2 id="çº¿æ€§è¡¨å­˜å‚¨"&gt;çº¿æ€§è¡¨å­˜å‚¨
&lt;/h2&gt;&lt;p&gt;çº¿æ€§è¡¨æ˜¯æœ€å¸¸ç”¨ä¸”æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œå…¶å­˜å–æ–¹å¼ç›´æ¥å½±å“äº†æ“ä½œçš„æ•ˆç‡ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»çº¿æ€§è¡¨çš„å‡ ç§ä¸»è¦å­˜å–æ–¹å¼ï¼ŒåŒ…æ‹¬é¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨ï¼Œä»¥åŠå®ƒä»¬çš„å„ç§å˜ä½“å’Œç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“Š çº¿æ€§è¡¨å­˜å–æ–¹å¼è¯¦è§£&lt;/p&gt;
&lt;h2 id="1-çº¿æ€§è¡¨çš„åŸºæœ¬æ¦‚å¿µ"&gt;1ï¸âƒ£ çº¿æ€§è¡¨çš„åŸºæœ¬æ¦‚å¿µ
&lt;/h2&gt;&lt;p&gt;çº¿æ€§è¡¨ï¼ˆLinear Listï¼‰æ˜¯ç”± nï¼ˆnâ‰¥0ï¼‰ä¸ªå…·æœ‰ç›¸åŒç±»å‹çš„æ•°æ®å…ƒç´ ç»„æˆçš„æœ‰é™åºåˆ—ã€‚è‹¥çº¿æ€§è¡¨éç©ºï¼Œåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜åœ¨å”¯ä¸€çš„ä¸€ä¸ªè¢«ç§°ä¸º&amp;quot;ç¬¬ä¸€ä¸ª&amp;quot;çš„å…ƒç´ ï¼ˆè¡¨å¤´å…ƒç´ ï¼‰&lt;/li&gt;
&lt;li&gt;å­˜åœ¨å”¯ä¸€çš„ä¸€ä¸ªè¢«ç§°ä¸º&amp;quot;æœ€åä¸€ä¸ª&amp;quot;çš„å…ƒç´ ï¼ˆè¡¨å°¾å…ƒç´ ï¼‰&lt;/li&gt;
&lt;li&gt;é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª&lt;strong&gt;ç›´æ¥å‰é©±&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é™¤æœ€åä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª&lt;strong&gt;ç›´æ¥åç»§&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ•°æ®å…ƒç´ ä¹‹é—´çš„å…³ç³»æ˜¯çº¿æ€§çš„ï¼Œé€»è¾‘ç»“æ„å¯ä»¥è¡¨ç¤ºä¸ºï¼š(aâ‚, aâ‚‚, aâ‚ƒ, &amp;hellip;, aâ‚™)&lt;/p&gt;
&lt;h2 id="2-é¡ºåºå­˜å‚¨ç»“æ„é¡ºåºè¡¨"&gt;2ï¸âƒ£ é¡ºåºå­˜å‚¨ç»“æ„ï¼ˆé¡ºåºè¡¨ï¼‰
&lt;/h2&gt;&lt;p&gt;é¡ºåºå­˜å‚¨ç»“æ„ä½¿ç”¨ä¸€æ®µ&lt;strong&gt;åœ°å€è¿ç»­çš„å­˜å‚¨å•å…ƒ&lt;/strong&gt;ä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ ï¼Œé€šå¸¸ä½¿ç”¨æ•°ç»„æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h3 id="å­˜å‚¨ç‰¹ç‚¹"&gt;å­˜å‚¨ç‰¹ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘ç›¸é‚»ï¼Œç‰©ç†ä¹Ÿç›¸é‚»&lt;/strong&gt;ï¼šé€»è¾‘ä¸Šç›¸é‚»çš„å…ƒç´ åœ¨ç‰©ç†å­˜å‚¨ä½ç½®ä¸Šä¹Ÿç›¸é‚»&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éšæœºå­˜å–&lt;/strong&gt;ï¼šå¯ä»¥é€šè¿‡é¦–åœ°å€å’Œå…ƒç´ åºå·ç›´æ¥è®¡ç®—å‡ºä»»ä¸€å…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œå­˜å–æ—¶é—´ä¸ºO(1)&lt;/li&gt;
&lt;li&gt;å­˜å‚¨ä½ç½®è®¡ç®—å…¬å¼ï¼š&lt;code&gt;LOC(aáµ¢) = LOC(aâ‚) + (i-1)Ã—L&lt;/code&gt;ï¼Œå…¶ä¸­Læ˜¯æ¯ä¸ªå…ƒç´ å ç”¨çš„å­˜å‚¨å•å…ƒæ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="åŸºæœ¬æ“ä½œæ•ˆç‡"&gt;åŸºæœ¬æ“ä½œæ•ˆç‡
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰ç´¢å¼•æŸ¥æ‰¾/å–å€¼&lt;/strong&gt;ï¼šO(1) - ç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡è®¿é—®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’å…¥æ“ä½œ&lt;/strong&gt;ï¼šå¹³å‡éœ€è¦ç§»åŠ¨n/2ä¸ªå…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦O(n)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤æ“ä½œ&lt;/strong&gt;ï¼šå¹³å‡éœ€è¦ç§»åŠ¨(n-1)/2ä¸ªå…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦O(n)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="é¡ºåºå­˜å‚¨çš„ä¼˜ç¼ºç‚¹"&gt;é¡ºåºå­˜å‚¨çš„ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨å¯†åº¦é«˜ï¼ˆ100%ï¼‰ï¼Œæ— éœ€ä¸ºè¡¨ç¤ºé€»è¾‘å…³ç³»å¢åŠ é¢å¤–ç©ºé—´&lt;/li&gt;
&lt;li&gt;éšæœºå­˜å–é€Ÿåº¦å¿«ï¼Œé€šè¿‡ç´¢å¼•å¯ç›´æ¥è®¿é—®ä»»ä¸€å…ƒç´ &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦é¢„å…ˆåˆ†é…å›ºå®šå¤§å°çš„å­˜å‚¨ç©ºé—´ï¼Œå¯èƒ½é€ æˆç©ºé—´æµªè´¹æˆ–æº¢å‡º&lt;/li&gt;
&lt;li&gt;æ’å…¥å’Œåˆ é™¤æ“ä½œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼Œæ•ˆç‡è¾ƒä½&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="3-é“¾å¼å­˜å‚¨ç»“æ„é“¾è¡¨"&gt;3ï¸âƒ£ é“¾å¼å­˜å‚¨ç»“æ„ï¼ˆé“¾è¡¨ï¼‰
&lt;/h2&gt;&lt;p&gt;é“¾å¼å­˜å‚¨ç»“æ„ä½¿ç”¨ä¸€ç»„&lt;strong&gt;ä»»æ„çš„å­˜å‚¨å•å…ƒ&lt;/strong&gt;å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ï¼Œè¿™äº›å­˜å‚¨å•å…ƒå¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸è¿ç»­çš„ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸ä»…åŒ…å«æ•°æ®æœ¬èº«ï¼Œè¿˜åŒ…å«è¡¨ç¤ºé€»è¾‘å…³ç³»çš„æŒ‡é’ˆåŸŸã€‚&lt;/p&gt;
&lt;h3 id="å•é“¾è¡¨singly-linked-list"&gt;å•é“¾è¡¨ï¼ˆSingly Linked Listï¼‰
&lt;/h3&gt;&lt;p&gt;æœ€åŸºæœ¬çš„é“¾è¡¨å½¢å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åŸŸ&lt;/strong&gt;ï¼šå­˜å‚¨æ•°æ®å…ƒç´ &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡é’ˆåŸŸ&lt;/strong&gt;ï¼šå­˜å‚¨æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å•é“¾è¡¨åˆåˆ†ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸¦å¤´èŠ‚ç‚¹çš„å•é“¾è¡¨&lt;/strong&gt;ï¼šå¤´èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œå…¶æŒ‡é’ˆåŸŸæŒ‡å‘ç¬¬ä¸€ä¸ªå®é™…æ•°æ®èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¸¦å¤´èŠ‚ç‚¹çš„å•é“¾è¡¨&lt;/strong&gt;ï¼šå¤´æŒ‡é’ˆç›´æ¥æŒ‡å‘ç¬¬ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="åŒå‘é“¾è¡¨doubly-linked-list"&gt;åŒå‘é“¾è¡¨ï¼ˆDoubly Linked Listï¼‰
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆåŸŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‡å‘ç›´æ¥å‰é©±èŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆpriorï¼‰&lt;/li&gt;
&lt;li&gt;æŒ‡å‘ç›´æ¥åç»§èŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆnextï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä½¿å¾—é“¾è¡¨å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šéå†ï¼Œä½†æ¯ä¸ªèŠ‚ç‚¹éœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚&lt;/p&gt;
&lt;h3 id="å¾ªç¯é“¾è¡¨circular-linked-list"&gt;å¾ªç¯é“¾è¡¨ï¼ˆCircular Linked Listï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯å•é“¾è¡¨&lt;/strong&gt;ï¼šè¡¨å°¾èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹ï¼ˆæˆ–ç¬¬ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹ï¼‰ï¼Œå½¢æˆç¯çŠ¶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯åŒé“¾è¡¨&lt;/strong&gt;ï¼šè¡¨å°¾èŠ‚ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œå¤´èŠ‚ç‚¹çš„prioræŒ‡é’ˆæŒ‡å‘è¡¨å°¾èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¾ªç¯é“¾è¡¨å¯ä»¥ä»ä»»æ„èŠ‚ç‚¹å¼€å§‹éå†æ•´ä¸ªé“¾è¡¨ã€‚&lt;/p&gt;
&lt;h3 id="é™æ€é“¾è¡¨static-linked-list"&gt;é™æ€é“¾è¡¨ï¼ˆStatic Linked Listï¼‰
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨æ•°ç»„æ¥æè¿°é“¾å¼å­˜å‚¨ç»“æ„ï¼Œæ•°ç»„å…ƒç´ ä¸ºç»“æ„ä½“ï¼ŒåŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åŸŸ&lt;/li&gt;
&lt;li&gt;æ¸¸æ ‡ï¼ˆcurï¼‰ - æŒ‡ç¤ºåç»§å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é™æ€é“¾è¡¨åœ¨ä¸æ”¯æŒæŒ‡é’ˆçš„ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;h3 id="é“¾å¼å­˜å‚¨çš„æ“ä½œç‰¹ç‚¹"&gt;é“¾å¼å­˜å‚¨çš„æ“ä½œç‰¹ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥æ‰¾æ“ä½œ&lt;/strong&gt;ï¼šéœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹é¡ºåºæŸ¥æ‰¾ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦O(n)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’å…¥æ“ä½œ&lt;/strong&gt;ï¼šåªéœ€ä¿®æ”¹ç›¸å…³æŒ‡é’ˆï¼Œæ—¶é—´å¤æ‚åº¦O(1)ï¼ˆä¸è€ƒè™‘æŸ¥æ‰¾æ’å…¥ä½ç½®çš„æ—¶é—´ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤æ“ä½œ&lt;/strong&gt;ï¼šåªéœ€ä¿®æ”¹ç›¸å…³æŒ‡é’ˆï¼Œæ—¶é—´å¤æ‚åº¦O(1)ï¼ˆä¸è€ƒè™‘æŸ¥æ‰¾åˆ é™¤ä½ç½®çš„æ—¶é—´ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="é“¾å¼å­˜å‚¨çš„ä¼˜ç¼ºç‚¹"&gt;é“¾å¼å­˜å‚¨çš„ä¼˜ç¼ºç‚¹
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸éœ€è¦é¢„å…ˆåˆ†é…å›ºå®šå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥åŠ¨æ€æ‰©å±•&lt;/li&gt;
&lt;li&gt;æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡é«˜ï¼Œåªéœ€ä¿®æ”¹æŒ‡é’ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­˜å‚¨å¯†åº¦è¾ƒä½ï¼Œéœ€è¦é¢å¤–ç©ºé—´å­˜å‚¨æŒ‡é’ˆ&lt;/li&gt;
&lt;li&gt;ä¸æ”¯æŒéšæœºå­˜å–ï¼Œå¿…é¡»é¡ºåºè®¿é—®&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="4-ä¸¤ç§ä¸»è¦å­˜å‚¨æ–¹å¼çš„å¯¹æ¯”"&gt;4ï¸âƒ£ ä¸¤ç§ä¸»è¦å­˜å‚¨æ–¹å¼çš„å¯¹æ¯”
&lt;/h2&gt;&lt;p&gt;ä¸‹è¡¨æ€»ç»“äº†é¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨çš„ä¸»è¦ç‰¹ç‚¹å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;é¡ºåºå­˜å‚¨ç»“æ„&lt;/th&gt;
&lt;th&gt;é“¾å¼å­˜å‚¨ç»“æ„&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ç©ºé—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢„å…ˆåˆ†é…ï¼Œåœ°å€è¿ç»­&lt;/td&gt;
&lt;td&gt;åŠ¨æ€åˆ†é…ï¼Œåœ°å€å¯ä¸è¿ç»­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å¯†åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆ100%ï¼‰&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼ˆéœ€å­˜å‚¨æŒ‡é’ˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å–æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éšæœºå­˜å–ï¼ŒO(1)æ—¶é—´&lt;/td&gt;
&lt;td&gt;é¡ºåºå­˜å–ï¼ŒO(n)æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥æ‰¾æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰ç´¢å¼•å¿«é€Ÿï¼ŒO(1)æ—¶é—´&lt;/td&gt;
&lt;td&gt;éœ€è¦éå†ï¼Œå¹³å‡O(n)æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³å‡éœ€è¦ç§»åŠ¨n/2ä¸ªå…ƒç´ ï¼ŒO(n)æ—¶é—´&lt;/td&gt;
&lt;td&gt;åªéœ€ä¿®æ”¹æŒ‡é’ˆï¼ŒO(1)æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ é™¤æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³å‡éœ€è¦ç§»åŠ¨(n-1)/2ä¸ªå…ƒç´ ï¼ŒO(n)æ—¶é—´&lt;/td&gt;
&lt;td&gt;åªéœ€ä¿®æ”¹æŒ‡é’ˆï¼ŒO(1)æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´åˆ†é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›ºå®šå¤§å°ï¼Œéš¾ä»¥æ‰©å±•&lt;/td&gt;
&lt;td&gt;åŠ¨æ€åˆ†é…ï¼Œçµæ´»æ‰©å±•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="5-å­˜å–æ–¹å¼çš„é€‰æ‹©ç­–ç•¥"&gt;5ï¸âƒ£ å­˜å–æ–¹å¼çš„é€‰æ‹©ç­–ç•¥
&lt;/h2&gt;&lt;p&gt;é€‰æ‹©çº¿æ€§è¡¨çš„å­˜å–æ–¹å¼æ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š&lt;/p&gt;
&lt;h3 id="é€‚åˆé¡ºåºå­˜å‚¨çš„åœºæ™¯"&gt;é€‚åˆé¡ºåºå­˜å‚¨çš„åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ•°æ®é‡ç›¸å¯¹ç¨³å®šï¼Œå˜åŒ–ä¸å¤§&lt;/li&gt;
&lt;li&gt;éœ€è¦é¢‘ç¹æŒ‰ç´¢å¼•è®¿é—®å…ƒç´ &lt;/li&gt;
&lt;li&gt;æ’å…¥å’Œåˆ é™¤æ“ä½œè¾ƒå°‘&lt;/li&gt;
&lt;li&gt;å¯¹å­˜å‚¨å¯†åº¦è¦æ±‚è¾ƒé«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="é€‚åˆé“¾å¼å­˜å‚¨çš„åœºæ™¯"&gt;é€‚åˆé“¾å¼å­˜å‚¨çš„åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ•°æ®é‡å˜åŒ–è¾ƒå¤§ï¼Œéš¾ä»¥é¢„ä¼°è§„æ¨¡&lt;/li&gt;
&lt;li&gt;éœ€è¦é¢‘ç¹è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œ&lt;/li&gt;
&lt;li&gt;ä¸éœ€è¦é¢‘ç¹æŒ‰ç´¢å¼•éšæœºè®¿é—®å…ƒç´ &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="6-å…¶ä»–å­˜å‚¨æ–¹å¼"&gt;6ï¸âƒ£ å…¶ä»–å­˜å‚¨æ–¹å¼
&lt;/h2&gt;&lt;p&gt;é™¤äº†ä¸Šè¿°ä¸¤ç§ä¸»è¦å­˜å‚¨æ–¹å¼å¤–ï¼Œè¿˜æœ‰ï¼š&lt;/p&gt;
&lt;h3 id="ç´¢å¼•å­˜å‚¨"&gt;ç´¢å¼•å­˜å‚¨
&lt;/h3&gt;&lt;p&gt;åœ¨å­˜å‚¨å…ƒç´ ä¿¡æ¯çš„åŒæ—¶ï¼Œå»ºç«‹é™„åŠ çš„ç´¢å¼•è¡¨ã€‚ç´¢å¼•é¡¹çš„ä¸€èˆ¬å½¢å¼æ˜¯ï¼šï¼ˆå…³é”®å­—ï¼Œåœ°å€ï¼‰ï¼Œé€šè¿‡ç´¢å¼•å¯ä»¥å¿«é€Ÿå®šä½å…ƒç´ ã€‚&lt;/p&gt;
&lt;h3 id="æ•£åˆ—å­˜å‚¨"&gt;æ•£åˆ—å­˜å‚¨
&lt;/h3&gt;&lt;p&gt;æ ¹æ®æ•°æ®å…ƒç´ çš„å…³é”®å­—ç›´æ¥è®¡ç®—å‡ºè¯¥å…ƒç´ çš„å­˜å‚¨åœ°å€ï¼Œä¹Ÿç§°ä¸ºå“ˆå¸Œå­˜å‚¨ã€‚&lt;/p&gt;
&lt;h2 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h2&gt;&lt;p&gt;çº¿æ€§è¡¨çš„å­˜å–æ–¹å¼ä¸»è¦åˆ†ä¸ºé¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨ä¸¤å¤§ç±»ï¼Œå®ƒä»¬å„æœ‰ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¡ºåºå­˜å‚¨&lt;/strong&gt;ï¼ˆæ•°ç»„å®ç°ï¼‰é€‚åˆæ•°æ®é‡å›ºå®šã€éœ€è¦é¢‘ç¹éšæœºè®¿é—®çš„åœºæ™¯&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é“¾å¼å­˜å‚¨&lt;/strong&gt;ï¼ˆæŒ‡é’ˆå®ç°ï¼‰é€‚åˆæ•°æ®é‡å˜åŒ–å¤§ã€éœ€è¦é¢‘ç¹æ’å…¥åˆ é™¤çš„åœºæ™¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚ã€æ“ä½œç‰¹ç‚¹å’Œæ€§èƒ½è¦æ±‚é€‰æ‹©åˆé€‚çš„å­˜å‚¨æ–¹å¼ã€‚æœ‰æ—¶è¿˜å¯ä»¥ç»“åˆå¤šç§å­˜å‚¨æ–¹å¼çš„ä¼˜ç‚¹ï¼Œè®¾è®¡æ›´å¤æ‚çš„æ•°æ®ç»“æ„ä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id="å¤šå‰æ ‘è½¬-2-å‰æ ‘"&gt;å¤šå‰æ ‘è½¬ 2 å‰æ ‘
&lt;/h2&gt;&lt;p&gt;ã€‚å°†å¤šå‰æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘ä¸»è¦é‡‡ç”¨ &lt;strong&gt;â€œå­©å­å…„å¼Ÿè¡¨ç¤ºæ³•â€&lt;/strong&gt;ï¼ˆLeft-Child Right-Sibling Representationï¼‰ã€‚è¿™ç§æ–¹æ³•èƒ½ä¿æŒæ ‘åŸæœ‰çš„å±‚æ¬¡ç»“æ„ï¼Œä¾¿äºåˆ©ç”¨äºŒå‰æ ‘çš„ç®—æ³•è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼æ€»ç»“äº†å¤šå‰æ ‘èŠ‚ç‚¹ä¸è½¬æ¢åäºŒå‰æ ‘èŠ‚ç‚¹é—´çš„æ ¸å¿ƒå…³ç³»ï¼Œå¸®åŠ©ä½ ç›´è§‚ç†è§£è½¬æ¢è§„åˆ™ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¤šå‰æ ‘ä¸­çš„å…³ç³»&lt;/th&gt;
&lt;th&gt;è½¬æ¢åäºŒå‰æ ‘ä¸­çš„å…³ç³»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;å˜ä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„äºŒå‰æ ‘èŠ‚ç‚¹çš„&lt;strong&gt;å·¦å­èŠ‚ç‚¹&lt;/strong&gt; (left child)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;å˜ä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„äºŒå‰æ ‘èŠ‚ç‚¹çš„&lt;strong&gt;å³å­èŠ‚ç‚¹&lt;/strong&gt; (right child)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è½¬æ¢æ­¥éª¤"&gt;ğŸ”„ è½¬æ¢æ­¥éª¤
&lt;/h3&gt;&lt;p&gt;è½¬æ¢è¿‡ç¨‹éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼Œé€šå¸¸é€šè¿‡é€’å½’ç®—æ³•å®ç°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†æ ¹èŠ‚ç‚¹&lt;/strong&gt;ï¼šåˆ›å»ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸å¤šå‰æ ‘æ ¹èŠ‚ç‚¹ç›¸åŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†å­èŠ‚ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°†å¤šå‰æ ‘èŠ‚ç‚¹çš„&lt;strong&gt;ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹&lt;/strong&gt;é€’å½’è½¬æ¢ä¸ºäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œå¹¶è®¾ä¸ºå½“å‰äºŒå‰æ ‘èŠ‚ç‚¹çš„&lt;strong&gt;å·¦å­èŠ‚ç‚¹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°†å¤šå‰æ ‘èŠ‚ç‚¹çš„&lt;strong&gt;å…¶ä»–å­èŠ‚ç‚¹&lt;/strong&gt;ï¼ˆå…„å¼ŸèŠ‚ç‚¹ï¼‰é€’å½’è½¬æ¢ä¸ºäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œå¹¶ä¾æ¬¡è®¾ç½®ä¸ºå‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹å¯¹åº”çš„äºŒå‰æ ‘èŠ‚ç‚¹çš„&lt;strong&gt;å³å­èŠ‚ç‚¹&lt;/strong&gt;ï¼Œä»è€Œå½¢æˆä¸€æ¡å³é“¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€’å½’è¿›è¡Œ&lt;/strong&gt;ï¼šå¯¹æ¯ä¸ªå­èŠ‚ç‚¹é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹-c"&gt;ğŸ“ ä»£ç ç¤ºä¾‹ (C++)
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ C++ çš„å®ç°ç¤ºä¾‹ï¼Œå‚è€ƒäº† C è¯­è¨€çš„å®ç°æ€è·¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
using namespace std;
// å¤šå‰æ ‘èŠ‚ç‚¹å®šä¹‰
struct MultiTreeNode {
int data;
MultiTreeNode* firstChild; // æŒ‡å‘ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹
MultiTreeNode* nextSibling; // æŒ‡å‘ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
MultiTreeNode(int val) : data(val), firstChild(nullptr), nextSibling(nullptr) {}
};
// äºŒå‰æ ‘èŠ‚ç‚¹å®šä¹‰
struct BinaryTreeNode {
int data;
BinaryTreeNode* left; // å·¦å­©å­
BinaryTreeNode* right; // å³å­©å­
BinaryTreeNode(int val) : data(val), left(nullptr), right(nullptr) {}
};
// è½¬æ¢å‡½æ•°
BinaryTreeNode* convertToBinaryTree(MultiTreeNode* multiRoot) {
if (multiRoot == nullptr) {
return nullptr;
}
// åˆ›å»ºå¯¹åº”çš„äºŒå‰æ ‘æ ¹èŠ‚ç‚¹
BinaryTreeNode* binaryRoot = new BinaryTreeNode(multiRoot-&amp;gt;data);
// é€’å½’è½¬æ¢ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ä½œä¸ºå·¦å­©å­
if (multiRoot-&amp;gt;firstChild != nullptr) {
binaryRoot-&amp;gt;left = convertToBinaryTree(multiRoot-&amp;gt;firstChild);
}
// é€’å½’è½¬æ¢ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ä½œä¸ºå³å­©å­
if (multiRoot-&amp;gt;nextSibling != nullptr) {
binaryRoot-&amp;gt;right = convertToBinaryTree(multiRoot-&amp;gt;nextSibling);
}
return binaryRoot;
}
// ç¤ºä¾‹ï¼šæ‰“å°äºŒå‰æ ‘ï¼ˆå…ˆåºéå†ï¼‰
void printBinaryTreePreOrder(BinaryTreeNode* root) {
if (root == nullptr) return;
cout &amp;lt;&amp;lt; root-&amp;gt;data &amp;lt;&amp;lt; &amp;#34; &amp;#34;;
printBinaryTreePreOrder(root-&amp;gt;left);
printBinaryTreePreOrder(root-&amp;gt;right);
}
// ç¤ºä¾‹ï¼šåˆ›å»ºå¤šå‰æ ‘å¹¶è¿›è¡Œè½¬æ¢
int main() {
/* å‡è®¾æœ‰å¤šå‰æ ‘ç»“æ„ï¼š
1
/|\
2 3 4
|
5
*/
MultiTreeNode* root = new MultiTreeNode(1);
root-&amp;gt;firstChild = new MultiTreeNode(2);
root-&amp;gt;firstChild-&amp;gt;nextSibling = new MultiTreeNode(3);
root-&amp;gt;firstChild-&amp;gt;nextSibling-&amp;gt;nextSibling = new MultiTreeNode(4);
root-&amp;gt;firstChild-&amp;gt;firstChild = new MultiTreeNode(5);
BinaryTreeNode* binaryRoot = convertToBinaryTree(root);
cout &amp;lt;&amp;lt; &amp;#34;è½¬æ¢åçš„äºŒå‰æ ‘å…ˆåºéå†ç»“æœ: &amp;#34;;
printBinaryTreePreOrder(binaryRoot); // è¾“å‡ºï¼š1 2 5 3 4
cout &amp;lt;&amp;lt; endl;
// ... (å®é™…åº”ç”¨ä¸­éœ€è®°å¾—é‡Šæ”¾å†…å­˜)
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹ç»“æ„å®šä¹‰&lt;/strong&gt;ï¼šå¤šå‰æ ‘èŠ‚ç‚¹éœ€åŒ…å«æŒ‡å‘å…¶&lt;strong&gt;ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹&lt;/strong&gt; (&lt;code&gt;firstChild&lt;/code&gt;) å’Œ&lt;strong&gt;ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹&lt;/strong&gt; (&lt;code&gt;nextSibling&lt;/code&gt;) çš„æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€’å½’æ€æƒ³&lt;/strong&gt;ï¼šç†è§£é€’å½’åœ¨è½¬æ¢è¿‡ç¨‹ä¸­çš„ä½œç”¨ï¼Œå®ƒè´Ÿè´£æ·±å…¥åˆ°æ¯ä¸ªå­æ ‘è¿›è¡Œè½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¦‚æœæ ‘èŠ‚ç‚¹æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œéœ€è¦æ³¨æ„å†…å­˜çš„é‡Šæ”¾ï¼Œé¿å…æ³„æ¼ã€‚ç¤ºä¾‹ä»£ç çœç•¥äº†è¿™éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éå†é¡ºåº&lt;/strong&gt;ï¼šè½¬æ¢åå¯¹äºŒå‰æ ‘è¿›è¡Œ&lt;strong&gt;å…ˆåºéå†&lt;/strong&gt;ï¼Œå¯ä»¥è®¿é—®åˆ°ä¸åŸå¤šå‰æ ‘ç»“æ„ç›¸å¯¹åº”çš„èŠ‚ç‚¹é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ£®æ—è½¬æ¢&lt;/strong&gt;ï¼šæ­¤æ–¹æ³•ä¹Ÿé€‚ç”¨äºå°†å¤šæ£µæ ‘ç»„æˆçš„&lt;strong&gt;æ£®æ—&lt;/strong&gt;è½¬æ¢ä¸ºäºŒå‰æ ‘ï¼Œé€šå¸¸å¯å°†æ£®æ—ä¸­å„æ ‘çš„æ ¹èŠ‚ç‚¹è§†ä¸ºå…„å¼ŸèŠ‚ç‚¹è¿›è¡Œè½¬æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ·±å…¥ç†è§£"&gt;ğŸ§  æ·±å…¥ç†è§£
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå­©å­å…„å¼Ÿè¡¨ç¤ºæ³•ä¿æŒäº†æ ‘çš„åŸå§‹ç»“æ„ï¼Œå¹¶èƒ½åˆ©ç”¨äºŒå‰æ ‘çš„æ€§è´¨è¿›è¡Œéå†å’Œæ“ä½œï¼Œåœ¨è®¸å¤šåº”ç”¨åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€†å‘è½¬æ¢&lt;/strong&gt;ï¼šä»è½¬æ¢åçš„äºŒå‰æ ‘æ¢å¤å¤šå‰æ ‘ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œè¿‡ç¨‹åŸºæœ¬ä¸Šæ˜¯ä¸Šè¿°è½¬æ¢çš„é€†è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ ç†è§£å¤šå‰æ ‘åˆ°äºŒå‰æ ‘çš„è½¬æ¢ã€‚&lt;/p&gt;
&lt;h2 id="å †æ’åº"&gt;å †æ’åº
&lt;/h2&gt;&lt;p&gt;å †æ’åºæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆä¸”å€¼å¾—æŒæ¡çš„æ’åºç®—æ³•ã€‚å®ƒåˆ©ç”¨â€œå †â€è¿™ç§æ•°æ®ç»“æ„æ¥å®ç°æ’åºï¼Œå…¼å…·äº†æ—¶é—´æ•ˆç‡å’Œé«˜ç©ºé—´æ•ˆç‡ã€‚ä¸‹é¢æˆ‘ä¼šä¸ºä½ è¯¦ç»†è§£æå †æ’åºçš„åŸç†ã€æ­¥éª¤ã€æ€§èƒ½ï¼Œå¹¶æä¾›ä»£ç å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;âœ¨ å †çš„åŸºæœ¬æ¦‚å¿µ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å †&lt;/strong&gt;ï¼ˆHeapï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;ï¼Œå®ƒæ»¡è¶³ä»¥ä¸‹æ€§è´¨ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤§é¡¶å †&lt;/strong&gt;ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½&lt;strong&gt;å¤§äºæˆ–ç­‰äº&lt;/strong&gt;å…¶å­èŠ‚ç‚¹çš„å€¼ã€‚å› æ­¤ï¼Œå †é¡¶ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰æ˜¯æ•´ä¸ªå †ä¸­çš„&lt;strong&gt;æœ€å¤§å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°é¡¶å †&lt;/strong&gt;ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½&lt;strong&gt;å°äºæˆ–ç­‰äº&lt;/strong&gt;å…¶å­èŠ‚ç‚¹çš„å€¼ã€‚å› æ­¤ï¼Œå †é¡¶æ˜¯æ•´ä¸ªå †ä¸­çš„&lt;strong&gt;æœ€å°å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å †é€šå¸¸ä½¿ç”¨&lt;strong&gt;æ•°ç»„&lt;/strong&gt;æ¥å­˜å‚¨ã€‚å¯¹äºæ•°ç»„ä¸­ç´¢å¼•ä¸º &lt;code&gt;i&lt;/code&gt;ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰çš„å…ƒç´ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¶&lt;strong&gt;å·¦å­èŠ‚ç‚¹&lt;/strong&gt;çš„ç´¢å¼•ä¸º &lt;code&gt;2*i + 1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å…¶&lt;strong&gt;å³å­èŠ‚ç‚¹&lt;/strong&gt;çš„ç´¢å¼•ä¸º &lt;code&gt;2*i + 2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å…¶&lt;strong&gt;çˆ¶èŠ‚ç‚¹&lt;/strong&gt;çš„ç´¢å¼•ä¸º &lt;code&gt;floor((i-1)/2)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-å †æ’åºçš„å·¥ä½œåŸç†"&gt;ğŸ”§ å †æ’åºçš„å·¥ä½œåŸç†
&lt;/h2&gt;&lt;p&gt;å †æ’åºï¼ˆä»¥å‡åºæ’åºä¸ºä¾‹ï¼‰ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªå¤§çš„é˜¶æ®µï¼š&lt;strong&gt;æ„å»ºå¤§é¡¶å †&lt;/strong&gt;å’Œ&lt;strong&gt;åå¤æå–æœ€å¤§å€¼å¹¶è°ƒæ•´&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="1-æ„å»ºå¤§é¡¶å †-build-max-heap"&gt;1. æ„å»ºå¤§é¡¶å † (Build Max Heap)
&lt;/h3&gt;&lt;p&gt;ä»ä¸€ä¸ªæ— åºçš„æ•°ç»„å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è°ƒæ•´ä¸ºä¸€ä¸ªå¤§é¡¶å †ã€‚ç­–ç•¥æ˜¯ä»&lt;strong&gt;æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹&lt;/strong&gt;å¼€å§‹ï¼Œä¾æ¬¡å‘å‰ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œâ€œä¸‹æ²‰â€æ“ä½œï¼ˆHeapifyï¼‰ï¼Œç¡®ä¿ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘æ»¡è¶³å¤§é¡¶å †çš„æ€§è´¨ã€‚æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„ç´¢å¼•é€šå¸¸æ˜¯ &lt;code&gt;n/2 - 1&lt;/code&gt;ï¼ˆnä¸ºæ•°ç»„é•¿åº¦ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œä¸‹æ²‰â€æ“ä½œ (Heapify / Sift Down) çš„æ ¸å¿ƒæ­¥éª¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é’ˆå¯¹å½“å‰èŠ‚ç‚¹ã€å…¶å·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹ï¼Œæ‰¾å‡ºå€¼æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ€å¤§å€¼ä¸æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œå°±å°†å½“å‰èŠ‚ç‚¹ä¸è¿™ä¸ªæœ€å¤§å€¼çš„å­èŠ‚ç‚¹äº¤æ¢ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºäº¤æ¢å¯èƒ½ä¼šç ´åä¸‹ä¸€çº§å­æ ‘çš„å †æ€§è´¨ï¼Œå› æ­¤éœ€è¦&lt;strong&gt;é€’å½’åœ°&lt;/strong&gt;æˆ–&lt;strong&gt;è¿­ä»£åœ°&lt;/strong&gt;å¯¹äº¤æ¢åçš„å­æ ‘ç»§ç»­è¿›è¡Œä¸‹æ²‰æ“ä½œï¼Œç›´åˆ°å½“å‰èŠ‚ç‚¹å¤§äºç­‰äºå…¶æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œæˆ–è€…åˆ°è¾¾äº†å¶å­èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="2-æ’åº-extract-and-heapify"&gt;2. æ’åº (Extract and Heapify)
&lt;/h3&gt;&lt;p&gt;åœ¨å°†æ•´ä¸ªæ•°ç»„æ„é€ æˆå¤§é¡¶å †åï¼Œå †é¡¶å…ƒç´ ï¼ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰å°±æ˜¯å½“å‰æœ€å¤§å€¼ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº¤æ¢&lt;/strong&gt;ï¼šå°†å †é¡¶å…ƒç´ ä¸å½“å‰å †çš„&lt;strong&gt;æœ€åä¸€ä¸ªå…ƒç´ &lt;/strong&gt;äº¤æ¢ã€‚æ­¤æ—¶ï¼Œæœ€å¤§å€¼å°±è¢«æ”¾ç½®åˆ°äº†æ•°ç»„çš„æœ€ç»ˆæ­£ç¡®ä½ç½®ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼©å°å †&lt;/strong&gt;ï¼šå°†å †çš„å¤§å°å‡ä¸€ï¼ˆæ’é™¤åˆšåˆšäº¤æ¢åˆ°æœ«å°¾çš„æœ€å¤§å€¼ï¼‰ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸å†è§†ä¸ºå †çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´&lt;/strong&gt;ï¼šç”±äºæ–°çš„å †é¡¶å…ƒç´ å¯èƒ½ç ´åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹&lt;strong&gt;æ–°çš„å †é¡¶&lt;/strong&gt;æ‰§è¡Œä¸‹æ²‰æ“ä½œï¼Œä½¿å‰©ä½™å…ƒç´ é‡æ–°æ„æˆä¸€ä¸ªå¤§é¡¶å †ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤&lt;/strong&gt;ï¼šé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å †ä¸­åªå‰©ä¸€ä¸ªå…ƒç´ ã€‚æ­¤æ—¶ï¼Œæ•°ç»„å°±å·²ç»æ’å¥½åºäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-å †æ’åºçš„æ­¥éª¤æ‘˜è¦"&gt;ğŸ“Š å †æ’åºçš„æ­¥éª¤æ‘˜è¦
&lt;/h2&gt;&lt;p&gt;ä¸‹è¡¨æ€»ç»“äº†å †æ’åºç®—æ³•çš„å…³é”®æ­¥éª¤ï¼Œä»¥å‡åºæ’åºä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ­¥éª¤&lt;/th&gt;
&lt;th&gt;æ“ä½œæè¿°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ„å»ºå¤§é¡¶å †&lt;/strong&gt;ï¼šä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œè‡ªåº•å‘ä¸Šã€è‡ªå³å‘å·¦åœ°å¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œä¸‹æ²‰æ“ä½œã€‚&lt;/td&gt;
&lt;td&gt;ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œå †é¡¶å…ƒç´ ä¸ºæœ€å¤§å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;äº¤æ¢å †é¡¶ä¸å †å°¾&lt;/strong&gt;ï¼šå°†å †é¡¶å…ƒç´ ï¼ˆå½“å‰æœ€å¤§å€¼ï¼‰ä¸å½“å‰å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ã€‚&lt;/td&gt;
&lt;td&gt;å°†æœ€å¤§å€¼æ”¾ç½®åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œè¿™æ˜¯å…¶æœ€ç»ˆæœ‰åºä½ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼©å°å †èŒƒå›´&lt;/strong&gt;ï¼šå°†å †çš„å¤§å°å‡ä¸€ï¼Œæ’é™¤å·²æ’åºçš„æœ€å¤§å€¼ã€‚&lt;/td&gt;
&lt;td&gt;æ¥ä¸‹æ¥åªéœ€å¯¹å‰©ä½™æœªæ’åºéƒ¨åˆ†è¿›è¡Œæ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è°ƒæ•´å †&lt;/strong&gt;ï¼šå¯¹æ–°çš„å †é¡¶å…ƒç´ æ‰§è¡Œä¸‹æ²‰æ“ä½œï¼Œä½¿å‰©ä½™éƒ¨åˆ†é‡æ–°æ»¡è¶³å¤§é¡¶å †æ€§è´¨ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ºä¸‹ä¸€æ¬¡æå–æœ€å¤§å€¼åšå‡†å¤‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é‡å¤æ­¥éª¤2-4&lt;/strong&gt;ï¼šç›´åˆ°å †çš„å¤§å°å˜ä¸º1ã€‚&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶æ‰€æœ‰å…ƒç´ éƒ½å·²æ’å¥½åºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="-å¤æ‚åº¦åˆ†æ"&gt;âš™ï¸ å¤æ‚åº¦åˆ†æ
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡æ ‡&lt;/th&gt;
&lt;th&gt;å¤æ‚åº¦&lt;/th&gt;
&lt;th&gt;è§£é‡Š&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(n log n)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€¢ &lt;strong&gt;å»ºå †é˜¶æ®µ&lt;/strong&gt;ï¼šç›´è§‚ä¸Šæ„Ÿè§‰éœ€è¦O(n log n)ï¼Œä½†é€šè¿‡æ›´ç²¾ç»†çš„åˆ†æå¯ä»¥å¾—å‡ºå…¶æ—¶é—´å¤æ‚åº¦ä¸º&lt;strong&gt;O(n)&lt;/strong&gt;ã€‚ â€¢ &lt;strong&gt;æ’åºé˜¶æ®µ&lt;/strong&gt;ï¼šéœ€è¦è¿›è¡Œn-1æ¬¡ä¸‹æ²‰æ“ä½œï¼Œæ¯æ¬¡ä¸‹æ²‰çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œå› æ­¤ä¸º&lt;strong&gt;O(n log n)&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(1)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å †æ’åºæ˜¯&lt;strong&gt;åŸåœ°æ’åº&lt;/strong&gt;ç®—æ³•ï¼Œåªéœ€è¦å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´ç”¨äºäº¤æ¢å…ƒç´ ç­‰ä¸´æ—¶æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¨³å®šæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸ç¨³å®š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨äº¤æ¢å †é¡¶å’Œå †å°¾å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæ”¹å˜ç›¸åŒå€¼å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="-ä¼˜ç‚¹å’Œç¼ºç‚¹"&gt;ğŸ‘ ä¼˜ç‚¹å’Œç¼ºç‚¹
&lt;/h2&gt;&lt;h3 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆçš„æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼šæœ€åã€å¹³å‡ã€æœ€å¥½æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(n log n)ï¼Œæ€§èƒ½ç¨³å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´æ•ˆç‡é«˜&lt;/strong&gt;ï¼šæ˜¯åŸåœ°æ’åºç®—æ³•ï¼Œä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç¼ºç‚¹"&gt;ç¼ºç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ç¨³å®š&lt;/strong&gt;ï¼šå¯¹äºç›¸ç­‰é”®å€¼çš„å…ƒç´ ï¼Œæ’åºåå®ƒä»¬çš„ç›¸å¯¹ä½ç½®å¯èƒ½ä¼šæ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ä¸å‹å¥½&lt;/strong&gt;ï¼šå †æ’åºçš„è®¿é—®æ¨¡å¼æ˜¯è·³è·ƒå¼çš„ï¼ˆä¾‹å¦‚è®¿é—® &lt;code&gt;2*i+1&lt;/code&gt;, &lt;code&gt;2*i+2&lt;/code&gt;ï¼‰ï¼Œè€Œä¸æ˜¯é¡ºåºè®¿é—®ï¼Œè¿™å¯¹CPUç¼“å­˜ä¸å‹å¥½ï¼Œåœ¨æŸäº›å®é™…åº”ç”¨ä¸­å¯èƒ½æ¯”åŒæ ·æ—¶é—´å¤æ‚åº¦ä½†ç¼“å­˜å‹å¥½çš„ç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºï¼‰ç¨æ…¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-åº”ç”¨åœºæ™¯"&gt;ğŸš€ åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¿è¯æœ€åæƒ…å†µæ€§èƒ½&lt;/strong&gt;ï¼šå¿«é€Ÿæ’åºåœ¨æœ€åæƒ…å†µä¸‹ä¼šé€€åŒ–ä¸ºO(nÂ²)ï¼Œè€Œå †æ’åºçš„O(n log n)æœ€åæƒ…å†µå¤æ‚åº¦æ›´æœ‰ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç©ºé—´å—é™&lt;/strong&gt;ï¼šå½“å¯ç”¨å†…å­˜ç©ºé—´éå¸¸å®è´µæ—¶ï¼Œå †æ’åºçš„åŸåœ°æ’åºç‰¹æ€§ä½¿å…¶æˆä¸ºä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–å‰kä¸ªæœ€å¤§/æœ€å°å…ƒç´ &lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œè¦ä»1äº¿ä¸ªæ•°å­—ä¸­æ‰¾å‡ºå‰10ä¸ªæœ€å¤§çš„æ•°ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º10çš„å°é¡¶å †ï¼Œæ‰«æå®Œæ‰€æœ‰æ•°æ®åï¼Œå †ä¸­çš„å…ƒç´ å°±æ˜¯å‰10ä¸ªæœ€å¤§çš„æ•°ã€‚è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n log k)ï¼Œéå¸¸é«˜æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-ä»£ç å®ç°"&gt;ğŸ–¥ï¸ ä»£ç å®ç°
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€å®ç°å †æ’åºï¼ˆå‡åºï¼‰çš„ç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;
&lt;h3 id="python-å®ç°"&gt;Python å®ç°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;def heap_sort(arr):
def heapify(n, i):
largest = i
left = 2 * i + 1
right = 2 * i + 2
if left &amp;lt; n and arr[left] &amp;gt; arr[largest]:
largest = left
if right &amp;lt; n and arr[right] &amp;gt; arr[largest]:
largest = right
if largest != i:
arr[i], arr[largest] = arr[largest], arr[i]
heapify(n, largest)
n = len(arr)
# æ„å»ºæœ€å¤§å †
for i in range(n // 2 - 1, -1, -1):
heapify(n, i)
# é€ä¸ªæå–å…ƒç´ 
for i in range(n - 1, 0, -1):
arr[0], arr[i] = arr[i], arr[0] # äº¤æ¢
heapify(i, 0) # è°ƒæ•´å‰©ä½™å †
# è°ƒç”¨ç¤ºä¾‹
arr = [12, 11, 13, 5, 6, 7]
heap_sort(arr)
print(&amp;#34;Sorted array:&amp;#34;, arr) # è¾“å‡º: [5, 6, 7, 11, 12, 13]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä»£ç æ¥æºäºï¼Œå¹¶è¿›è¡Œäº†é€‚å½“ä¿®æ”¹å’Œæ³¨é‡Šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="java-å®ç°"&gt;Java å®ç°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;public class HeapSort {
public static void heapSort(int[] arr) {
int n = arr.length;
// æ„å»ºæœ€å¤§å †
for (int i = n / 2 - 1; i &amp;gt;= 0; i--) {
heapify(arr, n, i);
}
// é€ä¸ªä»å †ä¸­æå–å…ƒç´ 
for (int i = n - 1; i &amp;gt; 0; i--) {
// å°†å½“å‰å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ç§»åŠ¨åˆ°æ•°ç»„æœ«å°¾
int temp = arr[0];
arr[0] = arr[i];
arr[i] = temp;
// å¯¹å‡å°åçš„å †è°ƒç”¨heapify
heapify(arr, i, 0);
}
}
private static void heapify(int[] arr, int n, int i) {
int largest = i; // åˆå§‹åŒ–æœ€å¤§å€¼ä¸ºæ ¹
int left = 2 * i + 1;
int right = 2 * i + 2;
if (left &amp;lt; n &amp;amp;&amp;amp; arr[left] &amp;gt; arr[largest]) {
largest = left;
}
if (right &amp;lt; n &amp;amp;&amp;amp; arr[right] &amp;gt; arr[largest]) {
largest = right;
}
if (largest != i) {
int swap = arr[i];
arr[i] = arr[largest];
arr[largest] = swap;
// é€’å½’åœ°å †åŒ–å—å½±å“çš„å­æ ‘
heapify(arr, n, largest);
}
}
// æµ‹è¯•
public static void main(String[] args) {
int[] arr = {12, 11, 13, 5, 6, 7};
heapSort(arr);
System.out.print(&amp;#34;Sorted array: &amp;#34;);
for (int num : arr) {
System.out.print(num + &amp;#34; &amp;#34;); // è¾“å‡º: 5 6 7 11 12 13
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä»£ç æ¥æºäºï¼Œå¹¶è¿›è¡Œäº†é€‚å½“ä¿®æ”¹å’Œæ³¨é‡Šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="c-å®ç°"&gt;C++ å®ç°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
using namespace std;
void heapify(vector&amp;lt;int&amp;gt;&amp;amp; arr, int n, int i) {
int largest = i;
int left = 2 * i + 1;
int right = 2 * i + 2;
if (left &amp;lt; n &amp;amp;&amp;amp; arr[left] &amp;gt; arr[largest])
largest = left;
if (right &amp;lt; n &amp;amp;&amp;amp; arr[right] &amp;gt; arr[largest])
largest = right;
if (largest != i) {
swap(arr[i], arr[largest]);
heapify(arr, n, largest);
}
}
void heapSort(vector&amp;lt;int&amp;gt;&amp;amp; arr) {
int n = arr.size();
// æ„å»ºæœ€å¤§å †
for (int i = n / 2 - 1; i &amp;gt;= 0; i--)
heapify(arr, n, i);
// ä»å †ä¸­é€ä¸ªæå–å…ƒç´ 
for (int i = n - 1; i &amp;gt; 0; i--) {
swap(arr[0], arr[i]);
heapify(arr, i, 0);
}
}
int main() {
vector&amp;lt;int&amp;gt; arr = {12, 11, 13, 5, 6, 7};
heapSort(arr);
cout &amp;lt;&amp;lt; &amp;#34;Sorted array: &amp;#34;;
for (int num : arr) {
cout &amp;lt;&amp;lt; num &amp;lt;&amp;lt; &amp;#34; &amp;#34;; // è¾“å‡º: 5 6 7 11 12 13
}
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä»£ç æ¥æºäºï¼Œå¹¶è¿›è¡Œäº†é€‚å½“ä¿®æ”¹å’Œæ³¨é‡Šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£å †æ’åºï¼å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="å»ºå †"&gt;å»ºå †
&lt;/h2&gt;&lt;p&gt;å †æ’åºæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆä¸”å€¼å¾—æŒæ¡çš„æ’åºç®—æ³•ã€‚å®ƒåˆ©ç”¨â€œå †â€è¿™ç§æ•°æ®ç»“æ„æ¥å®ç°æ’åºï¼Œå…¼å…·äº†æ—¶é—´æ•ˆç‡å’Œé«˜ç©ºé—´æ•ˆç‡ã€‚ä¸‹é¢æˆ‘ä¼šä¸ºä½ è¯¦ç»†è§£æå †æ’åºçš„åŸç†ã€æ­¥éª¤ã€æ€§èƒ½ï¼Œå¹¶æä¾›ä»£ç å®ç°ã€‚&lt;/p&gt;
&lt;h1 id="-å †æ’åºç®—æ³•è¯¦è§£"&gt;ğŸ§  å †æ’åºç®—æ³•è¯¦è§£
&lt;/h1&gt;&lt;h2 id="-å †çš„åŸºæœ¬æ¦‚å¿µ"&gt;âœ¨ å †çš„åŸºæœ¬æ¦‚å¿µ
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;å †&lt;/strong&gt;ï¼ˆHeapï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;ï¼Œå®ƒæ»¡è¶³ä»¥ä¸‹æ€§è´¨ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤§é¡¶å †&lt;/strong&gt;ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½&lt;strong&gt;å¤§äºæˆ–ç­‰äº&lt;/strong&gt;å…¶å­èŠ‚ç‚¹çš„å€¼ã€‚å› æ­¤ï¼Œå †é¡¶ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰æ˜¯æ•´ä¸ªå †ä¸­çš„&lt;strong&gt;æœ€å¤§å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°é¡¶å †&lt;/strong&gt;ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½&lt;strong&gt;å°äºæˆ–ç­‰äº&lt;/strong&gt;å…¶å­èŠ‚ç‚¹çš„å€¼ã€‚å› æ­¤ï¼Œå †é¡¶æ˜¯æ•´ä¸ªå †ä¸­çš„&lt;strong&gt;æœ€å°å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å †é€šå¸¸ä½¿ç”¨&lt;strong&gt;æ•°ç»„&lt;/strong&gt;æ¥å­˜å‚¨ã€‚å¯¹äºæ•°ç»„ä¸­ç´¢å¼•ä¸º &lt;code&gt;i&lt;/code&gt;ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰çš„å…ƒç´ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¶&lt;strong&gt;å·¦å­èŠ‚ç‚¹&lt;/strong&gt;çš„ç´¢å¼•ä¸º &lt;code&gt;2*i + 1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å…¶&lt;strong&gt;å³å­èŠ‚ç‚¹&lt;/strong&gt;çš„ç´¢å¼•ä¸º &lt;code&gt;2*i + 2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å…¶&lt;strong&gt;çˆ¶èŠ‚ç‚¹&lt;/strong&gt;çš„ç´¢å¼•ä¸º &lt;code&gt;floor((i-1)/2)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-å †æ’åºçš„å·¥ä½œåŸç†-1"&gt;ğŸ”§ å †æ’åºçš„å·¥ä½œåŸç†
&lt;/h2&gt;&lt;p&gt;å †æ’åºï¼ˆä»¥å‡åºæ’åºä¸ºä¾‹ï¼‰ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªå¤§çš„é˜¶æ®µï¼š&lt;strong&gt;æ„å»ºå¤§é¡¶å †&lt;/strong&gt;å’Œ&lt;strong&gt;åå¤æå–æœ€å¤§å€¼å¹¶è°ƒæ•´&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="1-æ„å»ºå¤§é¡¶å †-build-max-heap-1"&gt;1. æ„å»ºå¤§é¡¶å † (Build Max Heap)
&lt;/h3&gt;&lt;p&gt;ä»ä¸€ä¸ªæ— åºçš„æ•°ç»„å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è°ƒæ•´ä¸ºä¸€ä¸ªå¤§é¡¶å †ã€‚ç­–ç•¥æ˜¯ä»&lt;strong&gt;æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹&lt;/strong&gt;å¼€å§‹ï¼Œä¾æ¬¡å‘å‰ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œâ€œä¸‹æ²‰â€æ“ä½œï¼ˆHeapifyï¼‰ï¼Œç¡®ä¿ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘æ»¡è¶³å¤§é¡¶å †çš„æ€§è´¨ã€‚æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„ç´¢å¼•é€šå¸¸æ˜¯ &lt;code&gt;n/2 - 1&lt;/code&gt;ï¼ˆnä¸ºæ•°ç»„é•¿åº¦ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œä¸‹æ²‰â€æ“ä½œ (Heapify / Sift Down) çš„æ ¸å¿ƒæ­¥éª¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é’ˆå¯¹å½“å‰èŠ‚ç‚¹ã€å…¶å·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹ï¼Œæ‰¾å‡ºå€¼æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ€å¤§å€¼ä¸æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œå°±å°†å½“å‰èŠ‚ç‚¹ä¸è¿™ä¸ªæœ€å¤§å€¼çš„å­èŠ‚ç‚¹äº¤æ¢ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºäº¤æ¢å¯èƒ½ä¼šç ´åä¸‹ä¸€çº§å­æ ‘çš„å †æ€§è´¨ï¼Œå› æ­¤éœ€è¦&lt;strong&gt;é€’å½’åœ°&lt;/strong&gt;æˆ–&lt;strong&gt;è¿­ä»£åœ°&lt;/strong&gt;å¯¹äº¤æ¢åçš„å­æ ‘ç»§ç»­è¿›è¡Œä¸‹æ²‰æ“ä½œï¼Œç›´åˆ°å½“å‰èŠ‚ç‚¹å¤§äºç­‰äºå…¶æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œæˆ–è€…åˆ°è¾¾äº†å¶å­èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="2-æ’åº-extract-and-heapify-1"&gt;2. æ’åº (Extract and Heapify)
&lt;/h3&gt;&lt;p&gt;åœ¨å°†æ•´ä¸ªæ•°ç»„æ„é€ æˆå¤§é¡¶å †åï¼Œå †é¡¶å…ƒç´ ï¼ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰å°±æ˜¯å½“å‰æœ€å¤§å€¼ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº¤æ¢&lt;/strong&gt;ï¼šå°†å †é¡¶å…ƒç´ ä¸å½“å‰å †çš„&lt;strong&gt;æœ€åä¸€ä¸ªå…ƒç´ &lt;/strong&gt;äº¤æ¢ã€‚æ­¤æ—¶ï¼Œæœ€å¤§å€¼å°±è¢«æ”¾ç½®åˆ°äº†æ•°ç»„çš„æœ€ç»ˆæ­£ç¡®ä½ç½®ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼©å°å †&lt;/strong&gt;ï¼šå°†å †çš„å¤§å°å‡ä¸€ï¼ˆæ’é™¤åˆšåˆšäº¤æ¢åˆ°æœ«å°¾çš„æœ€å¤§å€¼ï¼‰ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸å†è§†ä¸ºå †çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´&lt;/strong&gt;ï¼šç”±äºæ–°çš„å †é¡¶å…ƒç´ å¯èƒ½ç ´åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹&lt;strong&gt;æ–°çš„å †é¡¶&lt;/strong&gt;æ‰§è¡Œä¸‹æ²‰æ“ä½œï¼Œä½¿å‰©ä½™å…ƒç´ é‡æ–°æ„æˆä¸€ä¸ªå¤§é¡¶å †ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤&lt;/strong&gt;ï¼šé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å †ä¸­åªå‰©ä¸€ä¸ªå…ƒç´ ã€‚æ­¤æ—¶ï¼Œæ•°ç»„å°±å·²ç»æ’å¥½åºäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-å †æ’åºçš„æ­¥éª¤æ‘˜è¦-1"&gt;ğŸ“Š å †æ’åºçš„æ­¥éª¤æ‘˜è¦
&lt;/h2&gt;&lt;p&gt;ä¸‹è¡¨æ€»ç»“äº†å †æ’åºç®—æ³•çš„å…³é”®æ­¥éª¤ï¼Œä»¥å‡åºæ’åºä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ­¥éª¤&lt;/th&gt;
&lt;th&gt;æ“ä½œæè¿°&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ„å»ºå¤§é¡¶å †&lt;/strong&gt;ï¼šä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œè‡ªåº•å‘ä¸Šã€è‡ªå³å‘å·¦åœ°å¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œä¸‹æ²‰æ“ä½œã€‚&lt;/td&gt;
&lt;td&gt;ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œå †é¡¶å…ƒç´ ä¸ºæœ€å¤§å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;äº¤æ¢å †é¡¶ä¸å †å°¾&lt;/strong&gt;ï¼šå°†å †é¡¶å…ƒç´ ï¼ˆå½“å‰æœ€å¤§å€¼ï¼‰ä¸å½“å‰å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ã€‚&lt;/td&gt;
&lt;td&gt;å°†æœ€å¤§å€¼æ”¾ç½®åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œè¿™æ˜¯å…¶æœ€ç»ˆæœ‰åºä½ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¼©å°å †èŒƒå›´&lt;/strong&gt;ï¼šå°†å †çš„å¤§å°å‡ä¸€ï¼Œæ’é™¤å·²æ’åºçš„æœ€å¤§å€¼ã€‚&lt;/td&gt;
&lt;td&gt;æ¥ä¸‹æ¥åªéœ€å¯¹å‰©ä½™æœªæ’åºéƒ¨åˆ†è¿›è¡Œæ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è°ƒæ•´å †&lt;/strong&gt;ï¼šå¯¹æ–°çš„å †é¡¶å…ƒç´ æ‰§è¡Œä¸‹æ²‰æ“ä½œï¼Œä½¿å‰©ä½™éƒ¨åˆ†é‡æ–°æ»¡è¶³å¤§é¡¶å †æ€§è´¨ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ºä¸‹ä¸€æ¬¡æå–æœ€å¤§å€¼åšå‡†å¤‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é‡å¤æ­¥éª¤2-4&lt;/strong&gt;ï¼šç›´åˆ°å †çš„å¤§å°å˜ä¸º1ã€‚&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶æ‰€æœ‰å…ƒç´ éƒ½å·²æ’å¥½åºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="-å¤æ‚åº¦åˆ†æ-1"&gt;âš™ï¸ å¤æ‚åº¦åˆ†æ
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡æ ‡&lt;/th&gt;
&lt;th&gt;å¤æ‚åº¦&lt;/th&gt;
&lt;th&gt;è§£é‡Š&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(n log n)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€¢ &lt;strong&gt;å»ºå †é˜¶æ®µ&lt;/strong&gt;ï¼šç›´è§‚ä¸Šæ„Ÿè§‰éœ€è¦O(n log n)ï¼Œä½†é€šè¿‡æ›´ç²¾ç»†çš„åˆ†æå¯ä»¥å¾—å‡ºå…¶æ—¶é—´å¤æ‚åº¦ä¸º&lt;strong&gt;O(n)&lt;/strong&gt;ã€‚ â€¢ &lt;strong&gt;æ’åºé˜¶æ®µ&lt;/strong&gt;ï¼šéœ€è¦è¿›è¡Œn-1æ¬¡ä¸‹æ²‰æ“ä½œï¼Œæ¯æ¬¡ä¸‹æ²‰çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œå› æ­¤ä¸º&lt;strong&gt;O(n log n)&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(1)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å †æ’åºæ˜¯&lt;strong&gt;åŸåœ°æ’åº&lt;/strong&gt;ç®—æ³•ï¼Œåªéœ€è¦å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´ç”¨äºäº¤æ¢å…ƒç´ ç­‰ä¸´æ—¶æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¨³å®šæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸ç¨³å®š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨äº¤æ¢å †é¡¶å’Œå †å°¾å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæ”¹å˜ç›¸åŒå€¼å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="-ä¼˜ç‚¹å’Œç¼ºç‚¹-1"&gt;ğŸ‘ ä¼˜ç‚¹å’Œç¼ºç‚¹
&lt;/h2&gt;&lt;h3 id="ä¼˜ç‚¹-1"&gt;ä¼˜ç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆçš„æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼šæœ€åã€å¹³å‡ã€æœ€å¥½æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(n log n)ï¼Œæ€§èƒ½ç¨³å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´æ•ˆç‡é«˜&lt;/strong&gt;ï¼šæ˜¯åŸåœ°æ’åºç®—æ³•ï¼Œä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç¼ºç‚¹-1"&gt;ç¼ºç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ç¨³å®š&lt;/strong&gt;ï¼šå¯¹äºç›¸ç­‰é”®å€¼çš„å…ƒç´ ï¼Œæ’åºåå®ƒä»¬çš„ç›¸å¯¹ä½ç½®å¯èƒ½ä¼šæ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ä¸å‹å¥½&lt;/strong&gt;ï¼šå †æ’åºçš„è®¿é—®æ¨¡å¼æ˜¯è·³è·ƒå¼çš„ï¼ˆä¾‹å¦‚è®¿é—® &lt;code&gt;2*i+1&lt;/code&gt;, &lt;code&gt;2*i+2&lt;/code&gt;ï¼‰ï¼Œè€Œä¸æ˜¯é¡ºåºè®¿é—®ï¼Œè¿™å¯¹CPUç¼“å­˜ä¸å‹å¥½ï¼Œåœ¨æŸäº›å®é™…åº”ç”¨ä¸­å¯èƒ½æ¯”åŒæ ·æ—¶é—´å¤æ‚åº¦ä½†ç¼“å­˜å‹å¥½çš„ç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºï¼‰ç¨æ…¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-åº”ç”¨åœºæ™¯-1"&gt;ğŸš€ åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¿è¯æœ€åæƒ…å†µæ€§èƒ½&lt;/strong&gt;ï¼šå¿«é€Ÿæ’åºåœ¨æœ€åæƒ…å†µä¸‹ä¼šé€€åŒ–ä¸ºO(nÂ²)ï¼Œè€Œå †æ’åºçš„O(n log n)æœ€åæƒ…å†µå¤æ‚åº¦æ›´æœ‰ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç©ºé—´å—é™&lt;/strong&gt;ï¼šå½“å¯ç”¨å†…å­˜ç©ºé—´éå¸¸å®è´µæ—¶ï¼Œå †æ’åºçš„åŸåœ°æ’åºç‰¹æ€§ä½¿å…¶æˆä¸ºä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–å‰kä¸ªæœ€å¤§/æœ€å°å…ƒç´ &lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œè¦ä»1äº¿ä¸ªæ•°å­—ä¸­æ‰¾å‡ºå‰10ä¸ªæœ€å¤§çš„æ•°ï¼Œå¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º10çš„å°é¡¶å †ï¼Œæ‰«æå®Œæ‰€æœ‰æ•°æ®åï¼Œå †ä¸­çš„å…ƒç´ å°±æ˜¯å‰10ä¸ªæœ€å¤§çš„æ•°ã€‚è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n log k)ï¼Œéå¸¸é«˜æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-ä»£ç å®ç°-1"&gt;ğŸ–¥ï¸ ä»£ç å®ç°
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä½¿ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€å®ç°å †æ’åºï¼ˆå‡åºï¼‰çš„ç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;
&lt;h3 id="python-å®ç°-1"&gt;Python å®ç°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;def heap_sort(arr):
def heapify(n, i):
largest = i
left = 2 * i + 1
right = 2 * i + 2
if left &amp;lt; n and arr[left] &amp;gt; arr[largest]:
largest = left
if right &amp;lt; n and arr[right] &amp;gt; arr[largest]:
largest = right
if largest != i:
arr[i], arr[largest] = arr[largest], arr[i]
heapify(n, largest)
n = len(arr)
# æ„å»ºæœ€å¤§å †
for i in range(n // 2 - 1, -1, -1):
heapify(n, i)
# é€ä¸ªæå–å…ƒç´ 
for i in range(n - 1, 0, -1):
arr[0], arr[i] = arr[i], arr[0] # äº¤æ¢
heapify(i, 0) # è°ƒæ•´å‰©ä½™å †
# è°ƒç”¨ç¤ºä¾‹
arr = [12, 11, 13, 5, 6, 7]
heap_sort(arr)
print(&amp;#34;Sorted array:&amp;#34;, arr) # è¾“å‡º: [5, 6, 7, 11, 12, 13]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä»£ç æ¥æºäºï¼Œå¹¶è¿›è¡Œäº†é€‚å½“ä¿®æ”¹å’Œæ³¨é‡Šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="java-å®ç°-1"&gt;Java å®ç°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;public class HeapSort {
public static void heapSort(int[] arr) {
int n = arr.length;
// æ„å»ºæœ€å¤§å †
for (int i = n / 2 - 1; i &amp;gt;= 0; i--) {
heapify(arr, n, i);
}
// é€ä¸ªä»å †ä¸­æå–å…ƒç´ 
for (int i = n - 1; i &amp;gt; 0; i--) {
// å°†å½“å‰å †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰ç§»åŠ¨åˆ°æ•°ç»„æœ«å°¾
int temp = arr[0];
arr[0] = arr[i];
arr[i] = temp;
// å¯¹å‡å°åçš„å †è°ƒç”¨heapify
heapify(arr, i, 0);
}
}
private static void heapify(int[] arr, int n, int i) {
int largest = i; // åˆå§‹åŒ–æœ€å¤§å€¼ä¸ºæ ¹
int left = 2 * i + 1;
int right = 2 * i + 2;
if (left &amp;lt; n &amp;amp;&amp;amp; arr[left] &amp;gt; arr[largest]) {
largest = left;
}
if (right &amp;lt; n &amp;amp;&amp;amp; arr[right] &amp;gt; arr[largest]) {
largest = right;
}
if (largest != i) {
int swap = arr[i];
arr[i] = arr[largest];
arr[largest] = swap;
// é€’å½’åœ°å †åŒ–å—å½±å“çš„å­æ ‘
heapify(arr, n, largest);
}
}
// æµ‹è¯•
public static void main(String[] args) {
int[] arr = {12, 11, 13, 5, 6, 7};
heapSort(arr);
System.out.print(&amp;#34;Sorted array: &amp;#34;);
for (int num : arr) {
System.out.print(num + &amp;#34; &amp;#34;); // è¾“å‡º: 5 6 7 11 12 13
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä»£ç æ¥æºäºï¼Œå¹¶è¿›è¡Œäº†é€‚å½“ä¿®æ”¹å’Œæ³¨é‡Šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="c-å®ç°-1"&gt;C++ å®ç°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
using namespace std;
void heapify(vector&amp;lt;int&amp;gt;&amp;amp; arr, int n, int i) {
int largest = i;
int left = 2 * i + 1;
int right = 2 * i + 2;
if (left &amp;lt; n &amp;amp;&amp;amp; arr[left] &amp;gt; arr[largest])
largest = left;
if (right &amp;lt; n &amp;amp;&amp;amp; arr[right] &amp;gt; arr[largest])
largest = right;
if (largest != i) {
swap(arr[i], arr[largest]);
heapify(arr, n, largest);
}
}
void heapSort(vector&amp;lt;int&amp;gt;&amp;amp; arr) {
int n = arr.size();
// æ„å»ºæœ€å¤§å †
for (int i = n / 2 - 1; i &amp;gt;= 0; i--)
heapify(arr, n, i);
// ä»å †ä¸­é€ä¸ªæå–å…ƒç´ 
for (int i = n - 1; i &amp;gt; 0; i--) {
swap(arr[0], arr[i]);
heapify(arr, i, 0);
}
}
int main() {
vector&amp;lt;int&amp;gt; arr = {12, 11, 13, 5, 6, 7};
heapSort(arr);
cout &amp;lt;&amp;lt; &amp;#34;Sorted array: &amp;#34;;
for (int num : arr) {
cout &amp;lt;&amp;lt; num &amp;lt;&amp;lt; &amp;#34; &amp;#34;; // è¾“å‡º: 5 6 7 11 12 13
}
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä»£ç æ¥æºäºï¼Œå¹¶è¿›è¡Œäº†é€‚å½“ä¿®æ”¹å’Œæ³¨é‡Šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£å †æ’åºï¼å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="è‡ªä¸‹è€Œä¸Šå¤æ‚åº¦"&gt;è‡ªä¸‹è€Œä¸Šå¤æ‚åº¦
&lt;/h2&gt;&lt;p&gt;è‡ªä¸‹è€Œä¸Šå»ºå †ï¼ˆHeapifyï¼‰çš„æ—¶é—´å¤æ‚åº¦ç¡®å®æ˜¯ &lt;strong&gt;O(n)&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦ä¸”å¯èƒ½æœ‰äº›åç›´è§‰çš„ç»“è®ºï¼Œå› ä¸ºå•ä¸ªå…ƒç´ çš„è°ƒæ•´æ“ä½œï¼ˆä¸‹æ²‰ï¼ŒSift-Downï¼‰åœ¨æœ€åæƒ…å†µä¸‹æ˜¯ O(log n)ï¼Œä½†æ•´ä½“å»ºå †è¿‡ç¨‹å´èƒ½è¾¾åˆ°çº¿æ€§å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ å¿«é€Ÿç†è§£è¿™ä¸¤ç§å»ºå †æ–¹å¼çš„æœ¬è´¨åŒºåˆ«ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è‡ªä¸‹è€Œä¸Šå»ºå † (Heapify)&lt;/th&gt;
&lt;th&gt;è‡ªä¸Šè€Œä¸‹å»ºå † (é€ä¸ªæ’å…¥)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒè¿‡ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹&lt;/strong&gt;å¼€å§‹ï¼Œ&lt;strong&gt;å‘å‰&lt;/strong&gt;éå†å¹¶å¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œ&lt;strong&gt;ä¸‹æ²‰&lt;/strong&gt;æ“ä½œ&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;ç©ºå †&lt;/strong&gt;å¼€å§‹ï¼Œ&lt;strong&gt;é€ä¸ª&lt;/strong&gt;å°†å…ƒç´ æ’å…¥å †å°¾å¹¶æ‰§è¡Œ&lt;strong&gt;ä¸Šæµ®&lt;/strong&gt;æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ·å§‹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹ (ç´¢å¼• â‰ˆ n/2)&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸€ä¸ªå…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸‹æ²‰ (Sift-Down)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸Šæµ® (Sift-Up)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;O(n)&lt;/strong&gt; (çº¿æ€§)&lt;/td&gt;
&lt;td&gt;O(n log n) (çº¿æ€§å¯¹æ•°)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‰¹é‡å»ºå †&lt;/strong&gt;ï¼Œæ‰€æœ‰å…ƒç´ å·²çŸ¥ä¸”ä¸€æ¬¡æ€§ç»™å®šæ—¶ï¼Œ&lt;strong&gt;æ•ˆç‡æ›´é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€æ’å…¥&lt;/strong&gt;ï¼Œå…ƒç´ é€ä¸ªåˆ°è¾¾æ—¶éœ€è¦ç»´æŒå †ç»“æ„æ—¶ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;ä¸ºä»€ä¹ˆè‡ªä¸‹è€Œä¸Šå»ºå †æ˜¯ O(n)ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…³é”®åœ¨äº&lt;strong&gt;å¤§éƒ¨åˆ†éœ€è¦è°ƒæ•´çš„èŠ‚ç‚¹éƒ½ä½äºæ ‘çš„åº•å±‚&lt;/strong&gt;ï¼Œå®ƒä»¬éœ€è¦ä¸‹æ²‰çš„æ­¥éª¤ï¼ˆä»£ä»·ï¼‰éå¸¸å°‘ï¼›è€Œéœ€è¦è¾ƒå¤šè°ƒæ•´æ­¥éª¤çš„èŠ‚ç‚¹æ•°é‡éå¸¸å°‘ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°å­¦æ¨å¯¼ï¼ˆæ±‚å’Œå…¬å¼ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å‡è®¾ä¸€ä¸ªåŒ…å« n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œé«˜åº¦ä¸º h (h â‰ˆ logâ‚‚n)ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¶å­èŠ‚ç‚¹ï¼ˆæœ€åº•å±‚ï¼‰å¤§çº¦æœ‰ n/2 ä¸ªï¼Œå®ƒä»¬çš„é«˜åº¦ä¸º 0ï¼Œä¸éœ€è¦ä¸‹æ²‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;é«˜åº¦ä¸º 1 çš„èŠ‚ç‚¹å¤§çº¦æœ‰ n/4 ä¸ªï¼Œå®ƒä»¬æœ€å¤šåªéœ€è¦ä¸‹æ²‰ 1 æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;é«˜åº¦ä¸º 2 çš„èŠ‚ç‚¹å¤§çº¦æœ‰ n/8 ä¸ªï¼Œå®ƒä»¬æœ€å¤šåªéœ€è¦ä¸‹æ²‰ 2 æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;li&gt;æ ¹èŠ‚ç‚¹ï¼ˆé«˜åº¦ä¸º hï¼‰åªæœ‰ 1 ä¸ªï¼Œå®ƒæœ€å¤šéœ€è¦ä¸‹æ²‰ h æ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»æ—¶é—´ä»£ä»· T(n) å¯ä»¥è¡¨ç¤ºä¸ºï¼š&lt;/p&gt;
&lt;p&gt;T(n) = n/4 * 1 + n/8 * 2 + n/16 * 3 + &amp;hellip; + 1 * h&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ª&lt;strong&gt;ç­‰å·®æ•°åˆ—å’Œç­‰æ¯”æ•°åˆ—çš„ä¹˜ç§¯&lt;/strong&gt;ï¼Œé€šè¿‡&lt;strong&gt;é”™ä½ç›¸å‡æ³•&lt;/strong&gt;ç­‰æ•°å­¦æ–¹æ³•æ±‚è§£åï¼Œå¯ä»¥è¯æ˜ T(n) &amp;lt; 2nã€‚å› æ­¤ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ &lt;strong&gt;O(n)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›´è§‚ç†è§£&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œé‡åˆ†å¸ƒ&lt;/strong&gt;ï¼šæ ‘ä¸­éœ€è¦è°ƒæ•´çš„èŠ‚ç‚¹æ•°é‡å¤§çº¦æ˜¯ n/2ï¼ˆéå¶èŠ‚ç‚¹ï¼‰ï¼Œä½†&lt;strong&gt;å¤§éƒ¨åˆ†å·¥ä½œé‡æ˜¯ç”±å¾ˆå°‘é‡çš„é«˜å±‚èŠ‚ç‚¹è´¡çŒ®çš„&lt;/strong&gt;ã€‚å¤§é‡çš„åº•å±‚èŠ‚ç‚¹å‡ ä¹ä¸è´¡çŒ®å·¥ä½œé‡ï¼ˆå› ä¸ºè°ƒæ•´çš„æ­¥æ•°å°‘ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è‡ªä¸Šè€Œä¸‹å¯¹æ¯”&lt;/strong&gt;ï¼šè‡ªä¸Šè€Œä¸‹å»ºå †æ—¶ï¼Œæ¯ä¸ªæ–°æ’å…¥çš„å…ƒç´ éƒ½å¯èƒ½ä»æœ€åº•å±‚ä¸€è·¯ä¸Šæµ®åˆ°æ ¹èŠ‚ç‚¹ï¼Œè·¯å¾„å¾ˆé•¿ã€‚è€Œè‡ªä¸‹è€Œä¸Šå»ºå †æ—¶ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹æ²‰æ“ä½œåªä¼šå‘ç”Ÿåœ¨å®ƒçš„å­æ ‘ä¸­ï¼Œ&lt;strong&gt;ä¸ä¼šæ³¢åŠåˆ°æ•´ä¸ªæ ‘&lt;/strong&gt;ï¼Œä¸”è¶Šåº•å±‚çš„èŠ‚ç‚¹æ¶‰åŠçš„å­æ ‘è¶Šå°ï¼Œè°ƒæ•´å¾—è¶Šå¿«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;âš¡ &lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶è‡ªä¸‹è€Œä¸Šå»ºå †çš„&lt;strong&gt;æ•´ä½“&lt;/strong&gt;æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹çš„è°ƒæ•´æ“ä½œéƒ½æ˜¯ O(1)ã€‚æ ¹èŠ‚ç‚¹çš„è°ƒæ•´ä»ç„¶éœ€è¦ O(log n) çš„æ—¶é—´ï¼Œåªæ˜¯ç”±äºè¿™ç§èŠ‚ç‚¹æ•°é‡æå°‘ï¼Œåœ¨æ±‚å’Œæ—¶è¢«â€œå‡æ‘Šâ€æ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;å¦‚ä½•é€‰æ‹©&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ &lt;strong&gt;å·²ç»æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„æ— åºæ•°ç»„&lt;/strong&gt;ï¼Œå¹¶å¸Œæœ›å°†å…¶æ„å»ºæˆä¸€ä¸ªå †æ—¶ï¼ˆä¾‹å¦‚å †æ’åºçš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œ&lt;strong&gt;åº”ä¼˜å…ˆé€‰æ‹©è‡ªä¸‹è€Œä¸Šå»ºå †&lt;/strong&gt;ï¼Œå› ä¸ºå…¶æ•ˆç‡æ›´é«˜ (O(n))ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;åŠ¨æ€ç»´æŠ¤ä¸€ä¸ªå †&lt;/strong&gt;ï¼Œå³å…ƒç´ æ˜¯ä¸€ä¸ªä¸€ä¸ªåˆ°æ¥å¹¶éœ€è¦éšæ—¶ä¿è¯å †ç»“æ„æ—¶ï¼Œåˆ™ä½¿ç”¨è‡ªä¸Šè€Œä¸‹ï¼ˆæ’å…¥ï¼‰çš„æ–¹æ³•ï¼Œå°½ç®¡å…¶å»ºå †å¤æ‚åº¦æ˜¯ O(n log n)ï¼Œä½†è¿™æ˜¯å”¯ä¸€çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šçš„è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£è‡ªä¸‹è€Œä¸Šå»ºå †çš„æ—¶é—´å¤æ‚åº¦ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç²¾å¦™çš„ç®—æ³•è®¾è®¡æ¡ˆä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡ä¼˜åŒ–æ•´ä½“æµç¨‹æ¥é™ä½å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;h2 id="äº¤æ¢æ•°å­—"&gt;äº¤æ¢æ•°å­—
&lt;/h2&gt;&lt;h2 id="äº¤æ¢æ•°å­—-1"&gt;äº¤æ¢æ•°å­—
&lt;/h2&gt;&lt;p&gt;äº¤æ¢æ•°å­—æ˜¯ç¼–ç¨‹ä¸­çš„å¸¸è§æ“ä½œï¼Œæœ‰å¤šç§å®ç°æ–¹æ³•ï¼Œå„æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œç‰¹ç‚¹ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼ä¸ºä½ æ±‡æ€»ä¸»è¦æ–¹æ³•ï¼Œç„¶åè¯¦ç»†è§£é‡Šï¼Œæœ€åç»™ä½ ä¸€äº›é€‰æ‹©å»ºè®®ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€è·¯&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸´æ—¶å˜é‡æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼•å…¥ç¬¬ä¸‰ä¸ªå˜é‡æš‚å­˜å€¼&lt;/td&gt;
&lt;td&gt;ç›´è§‚æ˜“æ‡‚ï¼Œå¯è¯»æ€§å¼ºï¼Œç¨³å®šå¯é &lt;/td&gt;
&lt;td&gt;éœ€è¦é¢å¤–çš„å†…å­˜ç©ºé—´&lt;/td&gt;
&lt;td&gt;é€šç”¨åœºæ™¯ï¼Œæ•™å­¦ç¤ºä¾‹ï¼Œå¯è¯»æ€§è¦æ±‚é«˜çš„ä»£ç &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æœ¯è¿ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡åŠ æ³•å‡æ³•æˆ–ä¹˜æ³•é™¤æ³•æ“ä½œäº¤æ¢å€¼&lt;/td&gt;
&lt;td&gt;æ— éœ€é¢å¤–å˜é‡&lt;/td&gt;
&lt;td&gt;æœ‰æº¢å‡ºé£é™©ï¼ˆåŠ å‡ï¼‰ï¼Œé™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼ˆä¹˜é™¤ï¼‰&lt;/td&gt;
&lt;td&gt;å†…å­˜å—é™ç¯å¢ƒï¼Œ&lt;strong&gt;ä¸æ¨èå¸¸è§„ä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½å¼‚æˆ–è¿ç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨å¼‚æˆ–è¿ç®—çš„æ€§è´¨äº¤æ¢å€¼&lt;/td&gt;
&lt;td&gt;æ— éœ€é¢å¤–å˜é‡ï¼Œæ•ˆç‡é€šå¸¸æ¯”ç®—æœ¯æ³•é«˜&lt;/td&gt;
&lt;td&gt;ä»£ç å¯è¯»æ€§ç¨å·®&lt;/td&gt;
&lt;td&gt;åµŒå…¥å¼å¼€å‘ï¼Œå†…å­˜æåº¦å—é™æˆ–è¿½æ±‚æè‡´æ€§èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°å°è£…æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†äº¤æ¢æ“ä½œå°è£…æˆå‡½æ•°&lt;/td&gt;
&lt;td&gt;ä»£ç å¤ç”¨ï¼Œæ¨¡å—åŒ–ï¼Œå‡å°‘é‡å¤ä»£ç &lt;/td&gt;
&lt;td&gt;å¼•å…¥å‡½æ•°è°ƒç”¨å¼€é”€ï¼ˆé€šå¸¸å¯å¿½ç•¥ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦å¤šæ¬¡äº¤æ¢æ“ä½œçš„é¡¹ç›®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®å®šä¹‰æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨é¢„å¤„ç†å™¨å®è¿›è¡Œæ–‡æœ¬æ›¿æ¢&lt;/td&gt;
&lt;td&gt;å…å»å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œçµæ´»&lt;/td&gt;
&lt;td&gt;å¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆå¦‚å¯¹é‡å¤æ±‚å€¼ï¼‰ï¼Œè°ƒè¯•ç¨å¤æ‚&lt;/td&gt;
&lt;td&gt;Cè¯­è¨€ä¸­è¿½æ±‚æ€§èƒ½çš„é¢‘ç¹äº¤æ¢æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯è¿™äº›æ–¹æ³•çš„è¯¦ç»†è¯´æ˜å’Œä»£ç ç¤ºä¾‹ï¼ˆä»¥Cè¯­è¨€ä¸ºä¾‹ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-è¯¦ç»†æ–¹æ³•è¯´æ˜ä¸ä»£ç ç¤ºä¾‹"&gt;ğŸ“ è¯¦ç»†æ–¹æ³•è¯´æ˜ä¸ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;h4 id="1-ä½¿ç”¨ä¸´æ—¶å˜é‡"&gt;1. ä½¿ç”¨ä¸´æ—¶å˜é‡
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯&lt;strong&gt;æœ€ç›´æ¥ã€æœ€å¸¸ç”¨&lt;/strong&gt;çš„æ–¹æ³•ã€‚æ€è·¯æ˜¯å¼•å…¥ä¸€ä¸ªä¸´æ—¶å˜é‡ (&lt;code&gt;temp&lt;/code&gt;) æ¥æš‚æ—¶ä¿å­˜å…¶ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
int main() {
int a = 5, b = 10, temp;
printf(&amp;#34;äº¤æ¢å‰: a = %d, b = %d\n&amp;#34;, a, b);
temp = a; // å°† a çš„å€¼æš‚å­˜åˆ° temp
a = b; // å°† b çš„å€¼èµ‹ç»™ a
b = temp; // å°† temp (åŸaçš„å€¼) èµ‹ç»™ b
printf(&amp;#34;äº¤æ¢å: a = %d, b = %d\n&amp;#34;, a, b);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šé€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ï¼Œé€‚ç”¨äºæ‰€æœ‰æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šéœ€è¦æ¶ˆè€—ä¸€ä¸ªé¢å¤–å˜é‡çš„å†…å­˜ç©ºé—´ï¼ˆé€šå¸¸è¿™å¾®ä¸è¶³é“ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id="2-ä½¿ç”¨ç®—æœ¯è¿ç®—"&gt;2. ä½¿ç”¨ç®—æœ¯è¿ç®—
&lt;/h4&gt;&lt;p&gt;è¿™ç§æ–¹æ³•é€šè¿‡åŠ æ³•å’Œå‡æ³•æ¥å®ç°äº¤æ¢ï¼Œ&lt;strong&gt;ä¸éœ€è¦ä¸´æ—¶å˜é‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
int main() {
int a = 5, b = 10;
printf(&amp;#34;äº¤æ¢å‰: a = %d, b = %d\n&amp;#34;, a, b);
a = a + b; // a å˜ä¸º a ä¸ b çš„å’Œ
b = a - b; // b çš„å€¼å˜ä¸ºåŸæ¥çš„ a (å› ä¸º (a+b)-b = a)
a = a - b; // a çš„å€¼å˜ä¸ºåŸæ¥çš„ b (å› ä¸º (a+b)-a = b)
printf(&amp;#34;äº¤æ¢å: a = %d, b = %d\n&amp;#34;, a, b);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¹˜é™¤æ³•ï¼Œä½†&lt;strong&gt;åŠ¡å¿…æ³¨æ„é™¤æ•°ä¸èƒ½ä¸ºé›¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;a = a * b;
b = a / b;
a = a / b;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šèŠ‚çœäº†ä¸€ä¸ªä¸´æ—¶å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ å‡æ³•&lt;/strong&gt;ï¼šå½“ &lt;code&gt;a&lt;/code&gt;å’Œ &lt;code&gt;b&lt;/code&gt;çš„å€¼éå¸¸å¤§æ—¶ï¼Œ&lt;code&gt;a + b&lt;/code&gt;å¯èƒ½ä¼šè¶…å‡ºæ•´å‹æ•°æ®çš„è¡¨ç¤ºèŒƒå›´ï¼Œå¯¼è‡´&lt;strong&gt;æº¢å‡º&lt;/strong&gt;ï¼Œè¿™æ˜¯æ½œåœ¨çš„é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¹˜é™¤æ³•&lt;/strong&gt;ï¼šåŒæ ·æœ‰æº¢å‡ºé£é™©ï¼Œå¹¶ä¸”å¦‚æœ &lt;code&gt;b&lt;/code&gt;ä¸º0ï¼Œé™¤æ³•ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸æ¨èåœ¨é‡è¦é¡¹ç›®æˆ–é€šç”¨åœºæ™¯ä¸­ä½¿ç”¨&lt;/strong&gt;ï¼Œé™¤éä½ èƒ½ç¡®ä¿ä¸ä¼šæº¢å‡ºä¸”é™¤æ•°éé›¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ä½¿ç”¨ä½å¼‚æˆ–è¿ç®—"&gt;3. ä½¿ç”¨ä½å¼‚æˆ–è¿ç®—
&lt;/h4&gt;&lt;p&gt;åˆ©ç”¨&lt;strong&gt;å¼‚æˆ–æ“ä½œç¬¦ &lt;code&gt;^&lt;/code&gt;&lt;/strong&gt; çš„æ€§è´¨ï¼ˆç›¸åŒä¸º0ï¼Œä¸åŒä¸º1ï¼›ä¸€ä¸ªæ•°ä¸è‡ªå·±å¼‚æˆ–ç»“æœä¸º0ï¼›ä¸€ä¸ªæ•°ä¸0å¼‚æˆ–ç»“æœä¸ºè‡ªå·±ï¼‰æ¥äº¤æ¢å€¼ï¼Œä¹Ÿæ— éœ€ä¸´æ—¶å˜é‡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
int main() {
int a = 5, b = 10; // 5: 0101, 10: 1010
printf(&amp;#34;äº¤æ¢å‰: a = %d, b = %d\n&amp;#34;, a, b);
a = a ^ b; // a ç°åœ¨æ˜¯ä¸€ä¸ª&amp;#34;ä¸­é—´å€¼&amp;#34;ï¼Œä¸åŒä½ä¸º1
b = a ^ b; // ç›¸å½“äº (a^b)^b = aï¼Œb å¾—åˆ°äº†åŸ a çš„å€¼
a = a ^ b; // ç›¸å½“äº (a^b)^a = bï¼Œa å¾—åˆ°äº†åŸ b çš„å€¼
printf(&amp;#34;äº¤æ¢å: a = %d, b = %d\n&amp;#34;, a, b);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šé¿å…äº†ç®—æœ¯è¿ç®—çš„æº¢å‡ºé—®é¢˜ï¼Œåœ¨æŸäº›åº•å±‚ç³»ç»Ÿæˆ–å¯¹æ€§èƒ½æœ‰æè‡´è¦æ±‚çš„åœºåˆæ•ˆç‡è¾ƒé«˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šä»£ç å¯è¯»æ€§è¾ƒå·®ï¼Œä¸äº†è§£ä½æ“ä½œçš„äººå¯èƒ½éš¾ä»¥ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ“ä½œæ•°å¿…é¡»æ˜¯æ•´æ•°ç±»å‹ã€‚&lt;/p&gt;
&lt;h4 id="4-å‡½æ•°å°è£…"&gt;4. å‡½æ•°å°è£…
&lt;/h4&gt;&lt;p&gt;å½“ç¨‹åºä¸­éœ€è¦å¤šæ¬¡è¿›è¡Œäº¤æ¢æ“ä½œæ—¶ï¼Œå°†å…¶å°è£…æˆå‡½æ•°æ˜¯&lt;strong&gt;éå¸¸å¥½çš„å®è·µ&lt;/strong&gt;ï¼Œèƒ½æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œæ•´æ´åº¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
// é€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹ä¸»å‡½æ•°ä¸­å˜é‡çš„å€¼
void swap(int *x, int *y) {
int temp = *x;
*x = *y;
*y = temp;
}
int main() {
int a = 5, b = 10;
printf(&amp;#34;äº¤æ¢å‰: a = %d, b = %d\n&amp;#34;, a, b);
swap(&amp;amp;a, &amp;amp;b); // ä¼ é€’å˜é‡çš„åœ°å€
printf(&amp;#34;äº¤æ¢å: a = %d, b = %d\n&amp;#34;, a, b);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;æ¨¡å—åŒ–&lt;/strong&gt;ï¼Œä¸€æ¬¡ç¼–å†™å¤šå¤„ä½¿ç”¨ï¼Œä½¿ä¸»é€»è¾‘æ›´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæœ‰æå°çš„å‡½æ•°è°ƒç”¨å¼€é”€ï¼ˆç°ä»£ç¼–è¯‘å™¨ä¼˜åŒ–ä¸‹é€šå¸¸å¯å¿½ç•¥ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id="5-å®å®šä¹‰"&gt;5. å®å®šä¹‰
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨é¢„å¤„ç†å™¨å®æ¥â€œå®šä¹‰â€ä¸€ä¸ªäº¤æ¢æ“ä½œï¼Œå®ƒåœ¨ç¼–è¯‘å‰è¿›è¡Œæ–‡æœ¬æ›¿æ¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;
// å®šä¹‰äº¤æ¢å®
#define SWAP(x, y) { int temp = (x); (x) = (y); (y) = temp; }
int main() {
int a = 5, b = 10;
printf(&amp;#34;äº¤æ¢å‰: a = %d, b = %d\n&amp;#34;, a, b);
SWAP(a, b); // ç¼–è¯‘å™¨é¢„å¤„ç†æ—¶ä¼šæ›¿æ¢ä¸º { int temp = a; a = b; b = temp; }
printf(&amp;#34;äº¤æ¢å: a = %d, b = %d\n&amp;#34;, a, b);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;å…å»äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€&lt;/strong&gt;ï¼ˆè™½ç„¶é€šå¸¸å¾ˆå°ï¼‰ï¼Œæ›´çµæ´»ï¼ˆä¸é™äºintç±»å‹ï¼Œä½†éœ€å°å¿ƒï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå®åªæ˜¯ç®€å•æ›¿æ¢ï¼Œå¦‚æœå‚æ•°æ˜¯å¤æ‚è¡¨è¾¾å¼ï¼ˆå¦‚ &lt;code&gt;SWAP(i++, j--)&lt;/code&gt;ï¼‰ï¼Œå¯èƒ½ä¼šäº§ç”Ÿ&lt;strong&gt;ä¸å¯é¢„æœŸçš„å‰¯ä½œç”¨&lt;/strong&gt;ï¼ˆå¤šæ¬¡æ±‚å€¼ï¼‰ã€‚è°ƒè¯•æ—¶ä¹Ÿå¯èƒ½æ›´å¤æ‚ã€‚&lt;/p&gt;
&lt;h3 id="-åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­"&gt;ğŸ”„ åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­
&lt;/h3&gt;&lt;p&gt;è®¸å¤šç°ä»£é«˜çº§è¯­è¨€æä¾›äº†æ›´ç®€ä¾¿çš„äº¤æ¢æ–¹å¼ï¼Œé€šå¸¸åŸºäºå…ƒç»„ï¼ˆTupleï¼‰è§£åŒ…æˆ–åŒ…è£…ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Python&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;a, b = 5, 10
a, b = b, a # ç›´æ¥äº¤æ¢ï¼Œæœ€ç®€æ´
print(a, b) # è¾“å‡º: 10 5
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Java&lt;/strong&gt; (ä½¿ç”¨ä¸´æ—¶å˜é‡æˆ–å°è£…æ–¹æ³•ï¼Œå› ä¸ºåŸºæœ¬ç±»å‹æ˜¯å€¼ä¼ é€’):&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å¸¸ç”¨æ–¹å¼è¿˜æ˜¯ä¸´æ—¶å˜é‡
int temp = a;
a = b;
b = temp;
// å¦‚æœæ˜¯åŒ…è£…ç±»(Integerç­‰)æˆ–å¯¹è±¡ï¼Œå¯é€šè¿‡æ–¹æ³•å°è£…
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;JavaScript&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;let a = 5, b = 10;
[a, b] = [b, a]; // ä½¿ç”¨è§£æ„èµ‹å€¼
console.log(a, b); // è¾“å‡º: 10, 5
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©æ–¹æ³•"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©æ–¹æ³•ï¼Ÿ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨é¦–é€‰&lt;/strong&gt;ï¼šå¯¹äºç»å¤§å¤šæ•°æƒ…å†µï¼Œå°¤å…¶æ˜¯åˆå­¦è€…å’Œæ³¨é‡ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§çš„åœºæ™¯ï¼Œ&lt;strong&gt;ä½¿ç”¨ä¸´æ—¶å˜é‡&lt;/strong&gt;æ˜¯æœ€å®‰å…¨ã€æœ€æ¸…æ™°çš„é€‰æ‹©ã€‚é‚£ä¸€ç‚¹é¢å¤–çš„å†…å­˜å¼€é”€å‡ ä¹æ€»æ˜¯å€¼å¾—çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢è¯•ä¸ç‚«æŠ€&lt;/strong&gt;ï¼šä½å¼‚æˆ–è¿ç®—å¸¸è¢«ç”¨ä½œé¢è¯•é¢˜è€ƒå¯Ÿå¯¹ä½è¿ç®—çš„ç†è§£ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æ—¶éœ€åŠ ä¸Šæ³¨é‡Šè¯´æ˜æ„å›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æç«¯é™åˆ¶&lt;/strong&gt;ï¼šåªæœ‰åœ¨å†…å­˜æåº¦å—é™çš„åµŒå…¥å¼ç¯å¢ƒæˆ–ç¡®çŸ¥æ•°æ®èŒƒå›´ä¸å¯èƒ½æº¢å‡ºæ—¶ï¼Œæ‰è€ƒè™‘ç®—æœ¯æ³•æˆ–ä½è¿ç®—æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å—åŒ–ä¸å¤ç”¨&lt;/strong&gt;ï¼šå¦‚æœä»£ç ä¸­éœ€è¦å¤šæ¬¡äº¤æ¢ï¼Œ&lt;strong&gt;å°è£…æˆå‡½æ•°&lt;/strong&gt;æ˜¯ä¸“ä¸šçš„è¡¨ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸´ç•Œ&lt;/strong&gt;ï¼šåœ¨C/C++ä¸­ï¼Œå¦‚æœå¤„åœ¨æ€§èƒ½å…³é”®çš„å¾ªç¯å†…éƒ¨ï¼Œä¸”ç¼–è¯‘å™¨ä¼˜åŒ–åä»å¸Œæœ›é¿å…å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨&lt;strong&gt;å®&lt;/strong&gt;ï¼Œä½†å¿…é¡»ç¡®ä¿ä¼ å…¥çš„å®å‚æ•°æ²¡æœ‰å‰¯ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£äº¤æ¢æ•°å­—çš„å„ç§æ–¹æ³•ï¼&lt;/p&gt;
&lt;h2 id="å †"&gt;å †
&lt;/h2&gt;&lt;p&gt;å †æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­ä¸€ç§éå¸¸é‡è¦ä¸”é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå®ƒå·§å¦™åœ°é€šè¿‡æ•°ç»„æ¥æ¨¡æ‹Ÿä¸€æ£µ&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;ï¼Œå¹¶æ»¡è¶³ç‰¹å®šçš„&lt;strong&gt;å †åºæ€§è´¨&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ ¸å¿ƒæ€§è´¨è¡¨æ ¼å’Œè¯¦ç»†è§£é‡Šæ¥å¸®åŠ©ä½ å…¨é¢ç†è§£å®ƒã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ€§è´¨ç±»åˆ«&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒè¦ç‚¹&lt;/th&gt;
&lt;th&gt;è¯¦ç»†è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ§± ç»“æ„æ€§è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å †æ€»æ˜¯ä¸€æ£µ&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€é™¤äº†æœ€åä¸€å±‚å¤–ï¼Œå…¶ä»–å±‚éƒ½æ˜¯æ»¡çš„ï¼Œå¹¶ä¸”æœ€åä¸€å±‚çš„èŠ‚ç‚¹éƒ½&lt;strong&gt;é å·¦æ’åˆ—&lt;/strong&gt;ã€‚è¿™ä¸ªç‰¹æ€§å†³å®šäº†å®ƒå¯ä»¥ç”¨&lt;strong&gt;æ•°ç»„&lt;/strong&gt;æ¥ç´§å‡‘ã€é«˜æ•ˆåœ°å­˜å‚¨ï¼Œæ— éœ€æŒ‡é’ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ“Š å †åºæ€§è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çˆ¶èŠ‚ç‚¹ä¸»å¯¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;å¤§é¡¶å †&lt;/strong&gt;ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½&lt;strong&gt;å¤§äºæˆ–ç­‰äº&lt;/strong&gt;å…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œæ ¹èŠ‚ç‚¹ï¼ˆå †é¡¶ï¼‰æ˜¯æœ€å¤§å€¼ã€‚åœ¨&lt;strong&gt;å°é¡¶å †&lt;/strong&gt;ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½&lt;strong&gt;å°äºæˆ–ç­‰äº&lt;/strong&gt;å…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œæ ¹èŠ‚ç‚¹ï¼ˆå †é¡¶ï¼‰æ˜¯æœ€å°å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ§® æ•°ç»„è¡¨ç¤º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥æ•°ç»„ä¸‹æ ‡ä» &lt;code&gt;0&lt;/code&gt;å¼€å§‹ï¼Œå¯¹äºä¸‹æ ‡ä¸º &lt;code&gt;i&lt;/code&gt;çš„èŠ‚ç‚¹ï¼š - å…¶&lt;strong&gt;çˆ¶èŠ‚ç‚¹&lt;/strong&gt;ä¸‹æ ‡ä¸º &lt;code&gt;(i-1)/2&lt;/code&gt;(å‘ä¸‹å–æ•´)ã€‚ - å…¶&lt;strong&gt;å·¦å­©å­&lt;/strong&gt;ä¸‹æ ‡ä¸º &lt;code&gt;2*i+1&lt;/code&gt;ã€‚ - å…¶&lt;strong&gt;å³å­©å­&lt;/strong&gt;ä¸‹æ ‡ä¸º &lt;code&gt;2*i+2&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;âš¡ æ“ä½œå¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;- &lt;strong&gt;æ’å…¥å…ƒç´ &lt;/strong&gt; (&lt;code&gt;heappush&lt;/code&gt;): &lt;code&gt;O(log n)&lt;/code&gt; - &lt;strong&gt;åˆ é™¤å †é¡¶&lt;/strong&gt; (&lt;code&gt;heappop&lt;/code&gt;): &lt;code&gt;O(log n)&lt;/code&gt; - &lt;strong&gt;æ„å»ºå †&lt;/strong&gt; (&lt;code&gt;heapify&lt;/code&gt;): &lt;code&gt;O(n)&lt;/code&gt; - &lt;strong&gt;è·å–æå€¼&lt;/strong&gt; (&lt;code&gt;peek&lt;/code&gt;): &lt;code&gt;O(1)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¯ æ ¸å¿ƒåº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–æå€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;- &lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—&lt;/strong&gt; - &lt;strong&gt;å †æ’åº&lt;/strong&gt; (å‡åºç”¨å¤§é¡¶å †ï¼Œé™åºç”¨å°é¡¶å †) - &lt;strong&gt;æ±‚ Top K&lt;/strong&gt; é—®é¢˜ - &lt;strong&gt;å›¾ç®—æ³•&lt;/strong&gt; (å¦‚Dijkstraç®—æ³•ã€Primç®—æ³•)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å †åºæ€§è´¨çš„æ·±å…¥ç†è§£"&gt;ğŸ“Œ å †åºæ€§è´¨çš„æ·±å…¥ç†è§£
&lt;/h3&gt;&lt;p&gt;å †åºæ€§è´¨æ˜¯å †çš„çµé­‚ï¼Œä½†å®ƒåªè§„å®šäº†&lt;strong&gt;çˆ¶å­èŠ‚ç‚¹ä¹‹é—´&lt;/strong&gt;çš„å¤§å°å…³ç³»ï¼Œè€Œ&lt;strong&gt;å¹¶ä¸è¦æ±‚å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´æˆ–ä¸åŒåˆ†æ”¯çš„èŠ‚ç‚¹ä¹‹é—´&lt;/strong&gt;æœ‰ä»»ä½•å¤§å°å…³ç³»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤§é¡¶å †ç¤ºä¾‹&lt;/strong&gt;ï¼šåœ¨ä¸€ä¸ªåŒ…å« &lt;code&gt;[16, 14, 10, 8, 7, 9, 3, 2, 4, 1]&lt;/code&gt;çš„å¤§é¡¶å †ä¸­ï¼Œæ ¹èŠ‚ç‚¹16æ˜¯æœ€å¤§çš„ã€‚èŠ‚ç‚¹14å’Œ10æ˜¯å…„å¼Ÿï¼Œ14&amp;gt;10ï¼›ä½†èŠ‚ç‚¹8ï¼ˆ14çš„å·¦å­©å­ï¼‰å’ŒèŠ‚ç‚¹9ï¼ˆ10çš„å·¦å­©å­ï¼‰ä¹‹é—´æ²¡æœ‰å¤§å°è¦æ±‚ï¼Œæ­¤å¤„8&amp;lt;9ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°é¡¶å †ç¤ºä¾‹&lt;/strong&gt;ï¼šå°é¡¶å †åˆ™ç›¸åï¼Œæ ¹èŠ‚ç‚¹æœ€å°ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹éƒ½æ¯”å®ƒçš„å­èŠ‚ç‚¹å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç»´æŠ¤å †æ€§è´¨çš„æ“ä½œ"&gt;ğŸ› ï¸ ç»´æŠ¤å †æ€§è´¨çš„æ“ä½œ
&lt;/h3&gt;&lt;p&gt;å½“æ’å…¥æˆ–åˆ é™¤å…ƒç´ åï¼Œå †çš„æ€§è´¨å¯èƒ½è¢«ç ´åï¼Œéœ€è¦é€šè¿‡&lt;strong&gt;ä¸Šæµ®ï¼ˆSift Upï¼‰&lt;/strong&gt; æˆ–&lt;strong&gt;ä¸‹æ²‰ï¼ˆSift Down/Heapifyï¼‰&lt;/strong&gt; æ“ä½œæ¥ä¿®å¤ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ’å…¥ä¸ä¸Šæµ®ï¼ˆSift Upï¼‰&lt;/strong&gt;ï¼šæ–°å…ƒç´ è¢«æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œç„¶åä¸å…¶çˆ¶èŠ‚ç‚¹æ¯”è¾ƒã€‚å¦‚æœè¿åå †åºï¼ˆåœ¨å¤§é¡¶å †ä¸­æ¯”çˆ¶å¤§ï¼Œåœ¨å°é¡¶å †ä¸­æ¯”çˆ¶å°ï¼‰ï¼Œå°±ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢ï¼Œå¹¶é‡å¤æ­¤è¿‡ç¨‹ç›´è‡³æ»¡è¶³æ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤ä¸ä¸‹æ²‰ï¼ˆSift Downï¼‰&lt;/strong&gt;ï¼šé€šå¸¸æŒ‡åˆ é™¤å †é¡¶å…ƒç´ ã€‚æ–¹æ³•æ˜¯å°†å…¶ä¸æ•°ç»„æœ«å°¾å…ƒç´ äº¤æ¢å¹¶ç§»é™¤ï¼Œç„¶åæ–°çš„å †é¡¶å…ƒç´ ä¸å…¶&lt;strong&gt;æœ€å¤§çš„å­©å­ï¼ˆå¤§é¡¶å †ï¼‰&lt;/strong&gt; æˆ–&lt;strong&gt;æœ€å°çš„å­©å­ï¼ˆå°é¡¶å †ï¼‰&lt;/strong&gt; æ¯”è¾ƒï¼Œå¦‚æœè¿åå †åºå°±äº¤æ¢ï¼Œå¹¶é‡å¤æ­¤è¿‡ç¨‹ç›´è‡³æ»¡è¶³æ¡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ„å»ºå †heapify"&gt;ğŸ§© æ„å»ºå †ï¼ˆHeapifyï¼‰
&lt;/h3&gt;&lt;p&gt;å°†ä¸€ä¸ªæ— åºæ•°ç»„æ„å»ºæˆå †ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåº•å‘ä¸Šï¼ˆDown-topï¼‰&lt;/strong&gt;ï¼šä»&lt;strong&gt;æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹&lt;/strong&gt;ï¼ˆä¸‹æ ‡ä¸º &lt;code&gt;n/2 - 1&lt;/code&gt;ï¼‰å¼€å§‹ï¼Œ&lt;strong&gt;å‘å‰éå†&lt;/strong&gt;å¹¶å¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œ&lt;strong&gt;ä¸‹æ²‰ï¼ˆSift Downï¼‰&lt;/strong&gt; æ“ä½œã€‚è¿™æ˜¯ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œ&lt;strong&gt;æ—¶é—´å¤æ‚åº¦ä¸ºO(n)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªé¡¶å‘ä¸‹ï¼ˆTop-downï¼‰&lt;/strong&gt;ï¼šå°†æ•°ç»„è§†ä¸ºç©ºå †ï¼Œç„¶åé€ä¸ª&lt;strong&gt;æ’å…¥ï¼ˆPushï¼‰&lt;/strong&gt; å…ƒç´ ã€‚æ¯æ¬¡æ’å…¥éƒ½ä¼´éšä¸€æ¬¡ä¸Šæµ®ï¼Œ&lt;strong&gt;æ—¶é—´å¤æ‚åº¦ä¸ºO(n log n)&lt;/strong&gt;ï¼Œæ•ˆç‡è¾ƒä½ï¼Œé€šå¸¸ä¸æ¨èã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å †çš„å…¸å‹åº”ç”¨"&gt;ğŸ’¡ å †çš„å…¸å‹åº”ç”¨
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆPriority Queueï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯å †æœ€ç›´æ¥çš„åº”ç”¨ã€‚æ— è®ºæ˜¯æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹è°ƒåº¦ï¼Œè¿˜æ˜¯ç½‘ç»œä¸­çš„æ•°æ®åŒ…ç®¡ç†ï¼Œéƒ½éœ€è¦å¿«é€Ÿå¤„ç†ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œå †çš„O(1)å–æå€¼å’ŒO(log n)æ’å…¥åˆ é™¤ç‰¹æ€§å®Œç¾å¥‘åˆæ­¤éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å †æ’åºï¼ˆHeap Sortï¼‰&lt;/strong&gt;ï¼šç®—æ³•åˆ†ä¸ºä¸¤æ­¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å»ºå †&lt;/strong&gt;ï¼šå°†æ— åºæ•°ç»„æ„å»ºæˆå¤§é¡¶å †ï¼ˆå‡åºï¼‰æˆ–å°é¡¶å †ï¼ˆé™åºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’åº&lt;/strong&gt;ï¼šåå¤å°†å †é¡¶å…ƒç´ ï¼ˆå½“å‰æå€¼ï¼‰ä¸å½“å‰æ— åºåŒºæœ«å°¾å…ƒç´ äº¤æ¢ï¼Œç„¶åå¯¹æ–°çš„å †é¡¶æ‰§è¡Œä¸‹æ²‰æ“ä½œä»¥é‡æ–°ä½¿æ— åºåŒºæ»¡è¶³å †æ€§è´¨ã€‚å †æ’åºçš„&lt;strong&gt;æ—¶é—´å¤æ‚åº¦ä¸ºO(n log n)&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Top-K é—®é¢˜&lt;/strong&gt;ï¼šåœ¨æµ·é‡æ•°æ®ä¸­æ‰¾å‡ºæœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰çš„Kä¸ªå…ƒç´ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ±‚å‰Kä¸ªæœ€å¤§å…ƒç´ &lt;/strong&gt;ï¼šç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸ºKçš„&lt;strong&gt;å°é¡¶å †&lt;/strong&gt;ã€‚æ–°å…ƒç´ è‹¥æ¯”å †é¡¶å¤§ï¼Œåˆ™æ›¿æ¢å †é¡¶å¹¶ä¸‹æ²‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ±‚å‰Kä¸ªæœ€å°å…ƒç´ &lt;/strong&gt;ï¼šç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸ºKçš„&lt;strong&gt;å¤§é¡¶å †&lt;/strong&gt;ã€‚æ–°å…ƒç´ è‹¥æ¯”å †é¡¶å°ï¼Œåˆ™æ›¿æ¢å †é¡¶å¹¶ä¸‹æ²‰ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦çº¦ä¸ºO(n log K)ï¼Œéå¸¸é«˜æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†ä¸­çš„â€œå †â€&lt;/strong&gt;ï¼šè¯·æ³¨æ„ï¼Œæ•°æ®ç»“æ„ä¸­çš„â€œå †â€ä¸&lt;strong&gt;å†…å­˜ç®¡ç†ä¸­çš„â€œå †â€æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µ&lt;/strong&gt;ï¼Œåˆ‡å‹¿æ··æ·†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸åŒå€¼çš„å¤„ç†&lt;/strong&gt;ï¼šå †&lt;strong&gt;ä¸ä¿è¯&lt;/strong&gt;å…·æœ‰ç›¸åŒå€¼çš„å…ƒç´ ä¹‹é—´çš„ä»»ä½•é¡ºåºï¼ˆç¨³å®šæ€§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šçº¿ç¨‹ç¯å¢ƒ&lt;/strong&gt;ï¼šæ ‡å‡†çš„å †æ“ä½œ&lt;strong&gt;ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„&lt;/strong&gt;ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨éœ€è¦é¢å¤–çš„åŒæ­¥æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ å»ºç«‹èµ·å¯¹å †çš„å…¨é¢è®¤è¯†ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘JAVA</title><link>https://dyhes.github.io/p/nowcoderjava/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderjava/</guid><description>&lt;h2 id="try-catch-finally"&gt;try-catch-finally
&lt;/h2&gt;&lt;p&gt;ä½ æåˆ°çš„è¯´æ³• &amp;ldquo;Java ä¸­å¼‚å¸¸å¯ä»¥æœ‰å¤šä¸ª catch ä»£ç å—ï¼Œä¹Ÿå¯ä»¥åªæœ‰ä¸€ä¸ªï¼Œä½†ä¸èƒ½æ²¡æœ‰&amp;rdquo; æ˜¯&lt;strong&gt;é”™è¯¯&lt;/strong&gt;çš„ã€‚è¿™æ˜¯å› ä¸ºåœ¨ Java çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸­ï¼Œ&lt;code&gt;try&lt;/code&gt;å—åé¢ä¸å¼ºåˆ¶è¦æ±‚å¿…é¡»æœ‰ &lt;code&gt;catch&lt;/code&gt;å—ï¼Œä½†å¿…é¡»è‡³å°‘æœ‰ &lt;strong&gt;&lt;code&gt;catch&lt;/code&gt;å—&lt;/strong&gt;æˆ– &lt;strong&gt;&lt;code&gt;finally&lt;/code&gt;å—&lt;/strong&gt;ä¸­çš„ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº† &lt;code&gt;try-catch-finally&lt;/code&gt;è¯­å¥çš„å„ç§åˆæ³•ç»„åˆæ–¹å¼ï¼Œå¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°ç†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»„åˆæ–¹å¼&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç»“æ„&lt;/th&gt;
&lt;th&gt;æ˜¯å¦åˆæ³•&lt;/th&gt;
&lt;th&gt;è¡Œä¸ºè¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;try - catch&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;try {...} catch (Exception e) {...}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ•è·å¹¶å¤„ç†ç‰¹å®šå¼‚å¸¸ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;try - multiple catch&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;try {...} catch (E1 e) {...} catch (E2 e) {...}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æŒ‰é¡ºåºæ•è·å¹¶å¤„ç†å¤šç§ä¸åŒç±»å‹çš„å¼‚å¸¸ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;try - finally&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;try {...} finally {...}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ•è·å¼‚å¸¸&lt;/strong&gt;ï¼Œä½†æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œ&lt;code&gt;finally&lt;/code&gt;ä¸­çš„ä»£ç éƒ½ä¼šæ‰§è¡Œã€‚å¼‚å¸¸ä¼šç»§ç»­å‘ä¸Šä¼ æ’­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;try - catch - finally&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;try {...} catch (E e) {...} finally {...}&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;æ•è·å¤„ç†å¼‚å¸¸ï¼Œå¹¶ä¸”æœ€ç»ˆæ‰§è¡Œæ¸…ç†å·¥ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®è®°å¿†ç‚¹"&gt;ğŸ’¡ å…³é”®è®°å¿†ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;try&lt;/code&gt;å—å¿…é¡»å­˜åœ¨&lt;/strong&gt;ï¼šå®ƒæ˜¯å¼‚å¸¸å¤„ç†é€»è¾‘çš„èµ·ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;catch&lt;/code&gt;å’Œ &lt;code&gt;finally&lt;/code&gt;è‡³å°‘æœ‰ä¸€ä¸ª&lt;/strong&gt;ï¼š&lt;code&gt;try&lt;/code&gt;å—ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒåé¢å¿…é¡»è·Ÿéšè‡³å°‘ä¸€ä¸ª &lt;code&gt;catch&lt;/code&gt;å—æˆ–ä¸€ä¸ª &lt;code&gt;finally&lt;/code&gt;å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªæœ‰ &lt;code&gt;try-finally&lt;/code&gt;æ˜¯å…è®¸çš„&lt;/strong&gt;ï¼šè¿™ç§ç»“æ„ç”¨äº&lt;strong&gt;ç¡®ä¿èµ„æºè¢«æ¸…ç†&lt;/strong&gt;ï¼ŒåŒæ—¶è®©å¼‚å¸¸&lt;strong&gt;ç»§ç»­å‘ä¸ŠæŠ›å‡º&lt;/strong&gt;ï¼Œç”±è°ƒç”¨è€…æ¥å¤„ç†ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹"&gt;ğŸ› ï¸ ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåªæœ‰ &lt;code&gt;try-finally&lt;/code&gt;è€Œæ²¡æœ‰ &lt;code&gt;catch&lt;/code&gt;å—çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public void readFile() throws IOException { // å£°æ˜å°†å¼‚å¸¸æŠ›ç»™è°ƒç”¨è€…å¤„ç†
FileReader reader = null;
try {
reader = new FileReader(&amp;#34;example.txt&amp;#34;);
// ... è¯»å–æ–‡ä»¶çš„æ“ä½œ
} finally { // æ— è®ºæ˜¯å¦å‘ç”ŸIOExceptionï¼Œfinallyå—éƒ½ä¼šæ‰§è¡Œ
if (reader != null) {
reader.close(); // ç¡®ä¿èµ„æºè¢«é‡Šæ”¾
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ &lt;code&gt;try&lt;/code&gt;å—ä¸­çš„ä»£ç ï¼ˆå¦‚ &lt;code&gt;new FileReader&lt;/code&gt;æˆ–è¯»æ“ä½œï¼‰æŠ›å‡ºäº† &lt;code&gt;IOException&lt;/code&gt;ï¼Œ&lt;strong&gt;å¼‚å¸¸å¹¶ä¸ä¼šåœ¨å½“å‰æ–¹æ³•ä¸­è¢«æ•è·&lt;/strong&gt;ï¼Œè€Œæ˜¯ä¼šé¦–å…ˆæ‰§è¡Œ &lt;code&gt;finally&lt;/code&gt;å—ä¸­çš„ä»£ç æ¥å…³é—­æ–‡ä»¶æµï¼Œç„¶åå°†è¿™ä¸ª &lt;code&gt;IOException&lt;/code&gt;&lt;strong&gt;ç»§ç»­å‘ä¸ŠæŠ›å‡º&lt;/strong&gt;ç»™è°ƒç”¨æ­¤æ–¹æ³•çš„ä»£ç å»å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;try-finally&lt;/code&gt;ç»“æ„æ˜¯åˆæ³•çš„ï¼Œä½†åœ¨å®è·µä¸­éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºç®¡ç†&lt;/strong&gt;ï¼šå¯¹äºå®ç°äº† &lt;code&gt;AutoCloseable&lt;/code&gt;æ¥å£çš„èµ„æºï¼ˆå¦‚æ–‡ä»¶æµã€æ•°æ®åº“è¿æ¥ï¼‰ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨ &lt;strong&gt;try-with-resources&lt;/strong&gt; è¯­å¥ï¼Œå®ƒå¯ä»¥æ›´ç®€æ´ã€å®‰å…¨åœ°è‡ªåŠ¨å¤„ç†èµ„æºå…³é—­ï¼Œå‡å°‘ä»£ç é‡å¹¶é¿å…æ½œåœ¨é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…æ™°çš„å¼‚å¸¸ä¼ æ’­&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;try-finally&lt;/code&gt;è€Œé &lt;code&gt;try-catch-finally&lt;/code&gt;æ—¶ï¼Œæ„å‘³ç€ä½ å¸Œæœ›å½“å‰æ–¹æ³•çš„è°ƒç”¨è€…æ¥åº”å¯¹å¯èƒ½å‡ºç°çš„å¼‚å¸¸ï¼Œè¿™æœ‰åŠ©äºåœ¨ä»£ç çš„ä¸åŒå±‚çº§é—´æ¸…æ™°åœ°åˆ’åˆ†å¼‚å¸¸å¤„ç†èŒè´£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šçš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Java çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="transient"&gt;transient
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;transient&lt;/code&gt;æ˜¯ Java ä¸­ä¸€ä¸ªç”¨äºä¿®é¥°æˆå‘˜å˜é‡çš„å…³é”®å­—ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯&lt;strong&gt;åœ¨å¯¹è±¡åºåˆ—åŒ–æ—¶æ ‡è®°è¯¥å˜é‡ä¸è¢«åºåˆ—åŒ–&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘æ¥è¯¦ç»†è§£é‡Šå®ƒçš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-1-æ ¸å¿ƒä½œç”¨ä¸ç‰¹æ€§"&gt;ğŸ–‹ï¸ 1. æ ¸å¿ƒä½œç”¨ä¸ç‰¹æ€§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åºåˆ—åŒ–å¿½ç•¥&lt;/strong&gt;ï¼šè¢« &lt;code&gt;transient&lt;/code&gt;ä¿®é¥°çš„æˆå‘˜å˜é‡å°†åœ¨å¯¹è±¡åºåˆ—åŒ–æ—¶è¢«æ’é™¤ã€‚åºåˆ—åŒ–åçš„å­—èŠ‚æµä¸­ä¸åŒ…å«è¯¥å­—æ®µçš„å€¼ï¼Œååºåˆ—åŒ–æ—¶ï¼Œè¿™äº›å­—æ®µä¼šè¢«åˆå§‹åŒ–ä¸ºå…¶ç±»å‹çš„é»˜è®¤å€¼ï¼ˆå¦‚ &lt;code&gt;int&lt;/code&gt;ä¸º &lt;code&gt;0&lt;/code&gt;ï¼Œå¼•ç”¨ç±»å‹ä¸º &lt;code&gt;null&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»…é™æˆå‘˜å˜é‡&lt;/strong&gt;ï¼š&lt;code&gt;transient&lt;/code&gt;åªèƒ½ä¿®é¥°ç±»çš„æˆå‘˜å˜é‡ï¼ˆå­—æ®µï¼‰ï¼Œ&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ç”¨æ¥ä¿®é¥°æ–¹æ³•ã€ç±»æˆ–å±€éƒ¨å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;static&lt;/code&gt;çš„å…³ç³»&lt;/strong&gt;ï¼š&lt;code&gt;static&lt;/code&gt;å˜é‡å±äºç±»è€Œéå¯¹è±¡æœ¬èº«ã€‚&lt;strong&gt;åºåˆ—åŒ–é’ˆå¯¹çš„æ˜¯å¯¹è±¡å®ä¾‹çš„çŠ¶æ€&lt;/strong&gt;ï¼Œå› æ­¤&lt;strong&gt;é™æ€å˜é‡æ— è®ºæ˜¯å¦è¢« &lt;code&gt;transient&lt;/code&gt;ä¿®é¥°ï¼Œéƒ½ä¸ä¼šè¢«åºåˆ—åŒ–&lt;/strong&gt;ã€‚åºåˆ—åŒ–ä¿å­˜çš„æ˜¯å¯¹è±¡çŠ¶æ€ï¼Œé™æ€å˜é‡ä¿å­˜çš„æ˜¯ç±»çŠ¶æ€ï¼Œå› æ­¤åºåˆ—åŒ–å¹¶ä¸ä¿å­˜é™æ€å˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“ &lt;code&gt;transient&lt;/code&gt;å…³é”®å­—çš„ä¸»è¦ç‰¹æ€§ã€ä½¿ç”¨åœºæ™¯å’Œè¦ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§/åœºæ™¯&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹æˆ–æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åºåˆ—åŒ–è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¢«ä¿®é¥°çš„å˜é‡ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–æ—¶è¢«è®¾ç½®ä¸ºé»˜è®¤å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int&lt;/code&gt;â†’ &lt;code&gt;0&lt;/code&gt;, &lt;code&gt;boolean&lt;/code&gt;â†’ &lt;code&gt;false&lt;/code&gt;, å¼•ç”¨ç±»å‹ â†’ &lt;code&gt;null&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªèƒ½ä¿®é¥°&lt;strong&gt;æˆå‘˜å˜é‡&lt;/strong&gt;ï¼ˆå­—æ®µï¼‰&lt;/td&gt;
&lt;td&gt;ä¸èƒ½ä¿®é¥°æ–¹æ³•ã€ç±»ã€å±€éƒ¨å˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸ &lt;code&gt;static&lt;/code&gt;çš„å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;static&lt;/code&gt;å˜é‡æœ¬èº«å°±ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œç”¨ &lt;code&gt;transient&lt;/code&gt;ä¿®é¥°æ— æ„ä¹‰&lt;/td&gt;
&lt;td&gt;åºåˆ—åŒ–ä¿å­˜å¯¹è±¡çŠ¶æ€ï¼Œé™æ€å˜é‡ä¿å­˜ç±»çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•æ„Ÿä¿¡æ¯ä¿æŠ¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜²æ­¢å¯†ç ã€å¯†é’¥ç­‰æ•æ„Ÿæ•°æ®è¢«æŒä¹…åŒ–æˆ–ä¼ è¾“&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private transient String password;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŒ–æ€§èƒ½/å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’é™¤ä¸éœ€è¦æŒä¹…åŒ–çš„å¤§å¯¹è±¡ã€ä¸´æ—¶æ•°æ®æˆ–ç¼“å­˜å­—æ®µ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private transient byte[] temporaryBuffer;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ–ç¯å¢ƒçš„èµ„æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åºåˆ—åŒ–æ— æ³•æˆ–æ— éœ€é‡å»ºçš„èµ„æºï¼Œå¦‚æ–‡ä»¶å¥æŸ„ã€çº¿ç¨‹ã€æ•°æ®åº“è¿æ¥&lt;/td&gt;
&lt;td&gt;&lt;code&gt;private transient Thread workerThread;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ´¾ç”Ÿå­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­—æ®µå€¼å¯ç”±å…¶ä»–å­—æ®µè®¡ç®—å¾—å‡ºï¼Œæ— éœ€åºåˆ—åŒ–ä»¥èŠ‚çœç©ºé—´&lt;/td&gt;
&lt;td&gt;é•¿æ–¹å½¢é¢ç§¯ &lt;code&gt;area&lt;/code&gt;å¯ç”± &lt;code&gt;length&lt;/code&gt;å’Œ &lt;code&gt;width&lt;/code&gt;è®¡ç®—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰åºåˆ—åŒ–é€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡é‡å†™ &lt;code&gt;writeObject&lt;/code&gt;å’Œ &lt;code&gt;readObject&lt;/code&gt;æ–¹æ³•å¯æ§åˆ¶ &lt;code&gt;transient&lt;/code&gt;å­—æ®µçš„åºåˆ—åŒ–&lt;/td&gt;
&lt;td&gt;å¯å¯¹ &lt;code&gt;transient&lt;/code&gt;å­—æ®µè¿›è¡ŒåŠ å¯†ååºåˆ—åŒ–ï¼Œååºåˆ—åŒ–æ—¶è§£å¯†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-2-å…¸å‹ä½¿ç”¨åœºæ™¯"&gt;ğŸ› ï¸ 2. å…¸å‹ä½¿ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;transient&lt;/code&gt;å…³é”®å­—åœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸­éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŠ¤æ•æ„Ÿä¿¡æ¯&lt;/strong&gt;ï¼šå¦‚ç”¨æˆ·çš„å¯†ç ï¼ˆ&lt;code&gt;password&lt;/code&gt;ï¼‰ã€é“¶è¡Œå¡å·ç­‰æ•æ„Ÿå­—æ®µï¼Œä¸å¸Œæœ›å®ƒä»¬é€šè¿‡åºåˆ—åŒ–è¢«æŒä¹…åŒ–åˆ°ç£ç›˜æˆ–åœ¨ç½‘ç»œä¼ è¾“ä¸­æ³„éœ²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ€§èƒ½å’Œå­˜å‚¨ç©ºé—´&lt;/strong&gt;ï¼šå¯¹äºä¸€äº›ä¸éœ€è¦æŒä¹…åŒ–çš„å¤§å¯¹è±¡ã€ä¸´æ—¶å˜é‡æˆ–ç¼“å­˜æ•°æ®ï¼Œä½¿ç”¨ &lt;code&gt;transient&lt;/code&gt;å¯ä»¥å‡å°‘åºåˆ—åŒ–åçš„æ•°æ®å¤§å°ï¼Œæé«˜åºåˆ—åŒ–/ååºåˆ—åŒ–çš„æ•ˆç‡ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†æ— æ³•åºåˆ—åŒ–æˆ–ä¾èµ–è¿è¡Œæ—¶ç¯å¢ƒçš„èµ„æº&lt;/strong&gt;ï¼šå¦‚æ–‡ä»¶å¥æŸ„ï¼ˆ&lt;code&gt;FileInputStream&lt;/code&gt;ï¼‰ã€æ•°æ®åº“è¿æ¥ã€çº¿ç¨‹ï¼ˆ&lt;code&gt;Thread&lt;/code&gt;ï¼‰å¯¹è±¡ç­‰ã€‚è¿™äº›èµ„æºçš„çŠ¶æ€æ˜¯ç‰¹å®šäºå½“å‰JVMè¿è¡Œç¯å¢ƒçš„ï¼Œåºåˆ—åŒ–å®ƒä»¬æ²¡æœ‰æ„ä¹‰ï¼Œå¹¶ä¸”åœ¨ååºåˆ—åŒ–åä¹Ÿæ— æ³•æœ‰æ•ˆé‡å»ºã€‚å°†å…¶æ ‡è®°ä¸º &lt;code&gt;transient&lt;/code&gt;å¯ä»¥é¿å…åºåˆ—åŒ–æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åºåˆ—åŒ–å¯ç”±å…¶ä»–å­—æ®µæ¨å¯¼å‡ºçš„æ•°æ®&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œä¸€ä¸ªé•¿æ–¹å½¢ç±»å¯èƒ½æœ‰é•¿åº¦ï¼ˆ&lt;code&gt;length&lt;/code&gt;ï¼‰ã€å®½åº¦ï¼ˆ&lt;code&gt;width&lt;/code&gt;ï¼‰å’Œé¢ç§¯ï¼ˆ&lt;code&gt;area&lt;/code&gt;ï¼‰å±æ€§ï¼Œé¢ç§¯å¯ä»¥é€šè¿‡é•¿åº¦å’Œå®½åº¦è®¡ç®—å¾—å‡ºï¼Œå› æ­¤ä¸éœ€è¦åºåˆ—åŒ–ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-3-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ 3. é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ååºåˆ—åŒ–åçš„é»˜è®¤å€¼&lt;/strong&gt;ï¼šè¢« &lt;code&gt;transient&lt;/code&gt;ä¿®é¥°çš„å˜é‡åœ¨ååºåˆ—åŒ–åä¼šè¢«è®¾ç½®ä¸ºå…¶æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ã€‚å¦‚æœè¿™äº›å­—æ®µåœ¨ä¸šåŠ¡é€»è¾‘ä¸­å¾ˆé‡è¦ï¼Œä½ éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå¦‚åœ¨ &lt;code&gt;readObject&lt;/code&gt;æ–¹æ³•ä¸­æ‰‹åŠ¨åˆå§‹åŒ–æˆ–ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°ï¼‰æ¥ç¡®ä¿å®ƒä»¬è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰åºåˆ—åŒ–&lt;/strong&gt;ï¼šå¦‚æœéœ€è¦å¯¹ &lt;code&gt;transient&lt;/code&gt;å­—æ®µè¿›è¡Œç‰¹æ®Šçš„åºåˆ—åŒ–å¤„ç†ï¼ˆä¾‹å¦‚åŠ å¯†åå†åºåˆ—åŒ–ï¼Œæˆ–å¸Œæœ›ä»¥æŸç§æ–¹å¼ä¿å­˜å’Œæ¢å¤å…¶çŠ¶æ€ï¼‰ï¼Œå¯ä»¥åœ¨å®ç°äº† &lt;code&gt;Serializable&lt;/code&gt;æ¥å£çš„ç±»ä¸­é‡å†™ &lt;code&gt;writeObject&lt;/code&gt;å’Œ &lt;code&gt;readObject&lt;/code&gt;æ–¹æ³•ï¼Œåœ¨å…¶ä¸­å®šä¹‰è‡ªå®šä¹‰çš„é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å…¼å®¹æ€§&lt;/strong&gt;ï¼šä¿®æ”¹ç±»çš„ &lt;code&gt;transient&lt;/code&gt;å­—æ®µï¼ˆå¦‚æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ï¼‰å¯èƒ½ä¼šå½±å“ååºåˆ—åŒ–çš„ç‰ˆæœ¬å…¼å®¹æ€§ã€‚é€šå¸¸å»ºè®®ä½¿ç”¨ &lt;code&gt;serialVersionUID&lt;/code&gt;æ¥æ˜¾å¼å£°æ˜åºåˆ—åŒ–ç‰ˆæœ¬ï¼Œä»¥æ§åˆ¶å…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-4-ä»£ç ç¤ºä¾‹"&gt;ğŸ“„ 4. ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº† &lt;code&gt;transient&lt;/code&gt;çš„åŸºæœ¬ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.io.*;
class User implements Serializable {
private static final long serialVersionUID = 1L;
private String username;
private transient String password; // ä½¿ç”¨ transient ä¿®é¥°ï¼Œä¸å‚ä¸åºåˆ—åŒ–
public User(String username, String password) {
this.username = username;
this.password = password;
}
@Override
public String toString() {
return &amp;#34;User{&amp;#34; + &amp;#34;username=&amp;#39;&amp;#34; + username + &amp;#39;\&amp;#39;&amp;#39; + &amp;#34;, password=&amp;#39;&amp;#34; + password + &amp;#39;\&amp;#39;&amp;#39; + &amp;#39;}&amp;#39;;
}
}
public class TransientExample {
public static void main(String[] args) throws Exception {
User originalUser = new User(&amp;#34;Alice&amp;#34;, &amp;#34;secret123&amp;#34;);
// åºåˆ—åŒ–å¯¹è±¡åˆ°æ–‡ä»¶
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&amp;#34;user.ser&amp;#34;));
oos.writeObject(originalUser);
oos.close();
// ä»æ–‡ä»¶ååºåˆ—åŒ–å¯¹è±¡
ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&amp;#34;user.ser&amp;#34;));
User deserializedUser = (User) ois.readObject();
ois.close();
System.out.println(&amp;#34;Original: &amp;#34; + originalUser);
System.out.println(&amp;#34;After Deserialization: &amp;#34; + deserializedUser);
// è¾“å‡ºå°†æ˜¾ç¤º deserializedUser çš„ password ä¸º null
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;transient&lt;/code&gt;å…³é”®å­—æ˜¯ Java åºåˆ—åŒ–æœºåˆ¶ä¸­çš„ä¸€ä¸ªé‡è¦å·¥å…·ï¼Œä¸»è¦ç”¨äºåœ¨å¯¹è±¡åºåˆ—åŒ–æ—¶&lt;strong&gt;æœ‰é€‰æ‹©åœ°æ’é™¤ä¸éœ€è¦æŒä¹…åŒ–æˆ–ä¼ è¾“çš„å­—æ®µ&lt;/strong&gt;ã€‚æ­£ç¡®ä½¿ç”¨å®ƒå¯ä»¥&lt;strong&gt;æå‡å®‰å…¨æ€§ã€ä¼˜åŒ–æ€§èƒ½å¹¶é¿å…ä¸å¿…è¦çš„åºåˆ—åŒ–é—®é¢˜&lt;/strong&gt;ã€‚ä½¿ç”¨æ—¶åªéœ€è®°ä½å®ƒ&lt;strong&gt;ä»…ç”¨äºä¿®é¥°æˆå‘˜å˜é‡&lt;/strong&gt;ï¼Œä¸”ä¸ &lt;code&gt;static&lt;/code&gt;å˜é‡æ— å…³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;transient&lt;/code&gt;å…³é”®å­—ã€‚&lt;/p&gt;
&lt;h2 id="åŒæ­¥å™¨"&gt;åŒæ­¥å™¨
&lt;/h2&gt;&lt;p&gt;JDK æä¾›çš„å¹¶å‘åŒæ­¥å™¨ä¸»è¦åŒ…æ‹¬ &lt;strong&gt;Semaphoreï¼ˆä¿¡å·é‡ï¼‰&lt;/strong&gt;ã€&lt;strong&gt;CyclicBarrierï¼ˆå¾ªç¯æ …æ ï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;CountDownLatchï¼ˆå€’è®¡æ—¶å™¨ï¼‰&lt;/strong&gt;ã€‚å®ƒä»¬éƒ½æ˜¯ &lt;code&gt;java.util.concurrent&lt;/code&gt;åŒ…ä¸‹çš„é‡è¦å·¥å…·ï¼Œç”¨äºåè°ƒå¤šçº¿ç¨‹é—´çš„åŒæ­¥ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å…ˆå¿«é€Ÿå¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ï¼Œç„¶åå†é€ä¸€è¯¦è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Semaphore (ä¿¡å·é‡)&lt;/th&gt;
&lt;th&gt;CountDownLatch (å€’è®¡æ—¶å™¨)&lt;/th&gt;
&lt;th&gt;CyclicBarrier (å¾ªç¯æ …æ )&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ§åˆ¶&lt;strong&gt;åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®©ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹&lt;strong&gt;ç­‰å¾…&lt;/strong&gt;å…¶ä»–çº¿ç¨‹å®Œæˆæ“ä½œ&lt;/td&gt;
&lt;td&gt;è®©ä¸€ç»„çº¿ç¨‹&lt;strong&gt;ç›¸äº’ç­‰å¾…&lt;/strong&gt;ï¼Œåˆ°è¾¾ä¸€ä¸ªå…¬å…±å±éšœç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯é‡å¤ä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;td&gt;å¦ (è®¡æ•°ä¸º0åå¤±æ•ˆ)&lt;/td&gt;
&lt;td&gt;æ˜¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ„é€ æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;new Semaphore(int permits)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;new CountDownLatch(int count)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;new CyclicBarrier(int parties)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;acquire()&lt;/code&gt;, &lt;code&gt;release()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;await()&lt;/code&gt;, &lt;code&gt;countDown()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;await()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºAQS (AbstractQueuedSynchronizer)&lt;/td&gt;
&lt;td&gt;åŸºäºAQS&lt;/td&gt;
&lt;td&gt;åŸºäºReentrantLockå’ŒCondition&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“è¿æ¥æ± ï¼Œé™æµ&lt;/td&gt;
&lt;td&gt;ä¸»çº¿ç¨‹ç­‰å¾…å¤šä¸ªå­çº¿ç¨‹å®Œæˆä»»åŠ¡åå†ç»§ç»­&lt;/td&gt;
&lt;td&gt;å¤šçº¿ç¨‹è®¡ç®—æ•°æ®ï¼Œæœ€ååˆå¹¶ç»“æœ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯è¿™ä¸‰ç§åŒæ­¥å™¨çš„è¯¦ç»†ä»‹ç»ã€åŸç†å’Œç”¨æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-1-semaphore-ä¿¡å·é‡"&gt;ğŸ“Š 1. Semaphore (ä¿¡å·é‡)
&lt;/h3&gt;&lt;p&gt;Semaphore æ˜¯ä¸€ç§ç”¨äºæ§åˆ¶åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡çš„åŒæ­¥å™¨ï¼Œå®ƒé€šè¿‡ç»´æŠ¤ä¸€ç»„**è®¸å¯è¯ï¼ˆpermitsï¼‰**æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h4 id="æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§"&gt;æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šSemaphore å†…éƒ¨æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆè®¸å¯è¯æ•°é‡ï¼‰ã€‚çº¿ç¨‹æ‰§è¡Œ &lt;code&gt;acquire()&lt;/code&gt;æ–¹æ³•ä¼šå°è¯•è·å–ä¸€ä¸ªè®¸å¯è¯ï¼Œå¦‚æœè®¡æ•°å™¨å¤§äº0ï¼Œåˆ™è·å–æˆåŠŸå¹¶é€’å‡ï¼›å¦‚æœè®¡æ•°å™¨ä¸º0ï¼Œåˆ™çº¿ç¨‹é˜»å¡ï¼Œç›´åˆ°æœ‰å…¶ä»–çº¿ç¨‹é‡Šæ”¾è®¸å¯è¯ï¼ˆ&lt;code&gt;release()&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;ï¼šSemaphore æ”¯æŒ&lt;strong&gt;å…¬å¹³æ¨¡å¼&lt;/strong&gt;å’Œ&lt;strong&gt;éå…¬å¹³æ¨¡å¼&lt;/strong&gt;ã€‚åœ¨å…¬å¹³æ¨¡å¼ä¸‹ï¼Œçº¿ç¨‹è·å–è®¸å¯è¯çš„é¡ºåºä¸å…¶è¯·æ±‚çš„é¡ºåºåŸºæœ¬ä¸€è‡´ï¼›éå…¬å¹³æ¨¡å¼åˆ™å…è®¸â€œæ’é˜Ÿâ€ï¼Œååé‡é€šå¸¸æ›´é«˜ï¼Œä½†å¯èƒ½å¯¼è‡´æŸäº›çº¿ç¨‹é¥¥é¥¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡å¤ä½¿ç”¨&lt;/strong&gt;ï¼šè®¸å¯è¯å¯ä»¥è¢«é‡Šæ”¾å’Œé‡æ–°è·å–ï¼ŒSemaphore æœ¬èº«æ˜¯å¯é‡ç”¨çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å¸¸ç”¨æ–¹æ³•"&gt;å¸¸ç”¨æ–¹æ³•
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;acquire()&lt;/code&gt;: è·å–ä¸€ä¸ªè®¸å¯è¯ï¼Œå¦‚æœæ— æ³•è·å–åˆ™é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;acquire(int permits)&lt;/code&gt;: è·å–æŒ‡å®šæ•°é‡çš„è®¸å¯è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;release()&lt;/code&gt;: é‡Šæ”¾ä¸€ä¸ªè®¸å¯è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;release(int permits)&lt;/code&gt;: é‡Šæ”¾æŒ‡å®šæ•°é‡çš„è®¸å¯è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tryAcquire()&lt;/code&gt;: å°è¯•è·å–è®¸å¯è¯ï¼Œç«‹å³è¿”å›æˆåŠŸæˆ–å¤±è´¥ï¼Œä¸é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tryAcquire(long timeout, TimeUnit unit)&lt;/code&gt;: åœ¨æŒ‡å®šæ—¶é—´å†…å°è¯•è·å–è®¸å¯è¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;availablePermits()&lt;/code&gt;: è¿”å›å½“å‰å¯ç”¨çš„è®¸å¯è¯æ•°é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä»£ç ç¤ºä¾‹"&gt;ä»£ç ç¤ºä¾‹
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.concurrent.Semaphore;
public class SemaphoreExample {
// åˆ›å»ºä¸€ä¸ªæœ‰3ä¸ªè®¸å¯è¯çš„ä¿¡å·é‡ï¼ˆéå…¬å¹³æ¨¡å¼ï¼‰
private static final Semaphore semaphore = new Semaphore(3);
public static void main(String[] args) {
// æ¨¡æ‹Ÿ10ä¸ªçº¿ç¨‹å°è¯•è®¿é—®èµ„æº
for (int i = 0; i &amp;lt; 10; i++) {
new Thread(() -&amp;gt; {
try {
semaphore.acquire(); // è·å–è®¸å¯è¯
System.out.println(Thread.currentThread().getName() + &amp;#34; è·å–äº†è®¸å¯è¯ï¼Œå¼€å§‹æ‰§è¡Œ&amp;#34;);
Thread.sleep(2000); // æ¨¡æ‹Ÿä¸šåŠ¡æ“ä½œè€—æ—¶
} catch (InterruptedException e) {
e.printStackTrace();
} finally {
semaphore.release(); // é‡Šæ”¾è®¸å¯è¯
System.out.println(Thread.currentThread().getName() + &amp;#34; é‡Šæ”¾äº†è®¸å¯è¯&amp;#34;);
}
}, &amp;#34;Thread-&amp;#34; + i).start();
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ€å¤šåªå…è®¸3ä¸ªçº¿ç¨‹åŒæ—¶&amp;quot;æ‰§è¡Œ&amp;quot;ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…æœ‰è®¸å¯è¯è¢«é‡Šæ”¾ã€‚&lt;/p&gt;
&lt;h4 id="ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ± ç®¡ç†&lt;/strong&gt;ï¼šå¦‚æ•°æ®åº“è¿æ¥æ± ï¼Œé™åˆ¶åŒæ—¶ä½¿ç”¨çš„è¿æ¥æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æµ&lt;/strong&gt;ï¼šæ§åˆ¶è®¿é—®æŸä¸ªæ¥å£æˆ–èµ„æºçš„å¹¶å‘çº¿ç¨‹æ•°ï¼Œé˜²æ­¢ç³»ç»Ÿè¿‡è½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-2-countdownlatch-å€’è®¡æ—¶å™¨"&gt;ğŸ¯ 2. CountDownLatch (å€’è®¡æ—¶å™¨)
&lt;/h3&gt;&lt;p&gt;CountDownLatch æ˜¯ä¸€ç§å…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å®Œæˆæ“ä½œåå†ç»§ç»­æ‰§è¡Œçš„åŒæ­¥å·¥å…·ã€‚&lt;/p&gt;
&lt;h4 id="æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§-1"&gt;æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šCountDownLatch é€šè¿‡ä¸€ä¸ªè®¡æ•°å™¨åˆå§‹åŒ–ã€‚çº¿ç¨‹è°ƒç”¨ &lt;code&gt;await()&lt;/code&gt;æ–¹æ³•ä¼šé˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨ &lt;code&gt;countDown()&lt;/code&gt;æ–¹æ³•ä½¿è®¡æ•°å™¨å‡è‡³0ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€æ¬¡æ€§&lt;/strong&gt;ï¼šCountDownLatch çš„è®¡æ•°å™¨ä¸èƒ½è¢«é‡ç½®ï¼Œä¸€æ—¦è®¡æ•°å½’é›¶ï¼Œæ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ä¼šè¢«é‡Šæ”¾ï¼Œåç»­å†è°ƒç”¨ &lt;code&gt;await()&lt;/code&gt;çš„çº¿ç¨‹ä¼šç«‹å³ç»§ç»­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å¸¸ç”¨æ–¹æ³•-1"&gt;å¸¸ç”¨æ–¹æ³•
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;await()&lt;/code&gt;: ä½¿å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°è®¡æ•°å™¨å‡åˆ°é›¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;await(long timeout, TimeUnit unit)&lt;/code&gt;: åœ¨æŒ‡å®šæ—¶é—´å†…ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;countDown()&lt;/code&gt;: å°†è®¡æ•°å™¨å‡1ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getCount()&lt;/code&gt;: è¿”å›å½“å‰è®¡æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä»£ç ç¤ºä¾‹-1"&gt;ä»£ç ç¤ºä¾‹
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.concurrent.CountDownLatch;
public class CountDownLatchExample {
public static void main(String[] args) throws InterruptedException {
// åˆå§‹åŒ–è®¡æ•°å™¨ä¸º5
CountDownLatch latch = new CountDownLatch(5);
for (int i = 0; i &amp;lt; 5; i++) {
new Thread(() -&amp;gt; {
System.out.println(Thread.currentThread().getName() + &amp;#34; å®Œæˆäº†ä»»åŠ¡&amp;#34;);
latch.countDown(); // è®¡æ•°å™¨å‡1
}, &amp;#34;Worker-&amp;#34; + i).start();
}
latch.await(); // ä¸»çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰å·¥ä½œçº¿ç¨‹å®Œæˆä»»åŠ¡ï¼ˆè®¡æ•°å™¨ä¸º0ï¼‰
System.out.println(&amp;#34;æ‰€æœ‰å·¥ä½œçº¿ç¨‹å‡å·²å®Œæˆä»»åŠ¡ï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ä¸»è¦åº”ç”¨åœºæ™¯-1"&gt;ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»çº¿ç¨‹ç­‰å¾…å¤šä¸ªå­çº¿ç¨‹åˆå§‹åŒ–å®Œæˆ&lt;/strong&gt;åå†ç»§ç»­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶è¡Œä»»åŠ¡æ‹†åˆ†&lt;/strong&gt;ï¼šå°†ä¸€ä¸ªå¤§ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œä¸»çº¿ç¨‹ç­‰å¾…æ‰€æœ‰å°ä»»åŠ¡å®Œæˆåå†æ±‡æ€»ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-3-cyclicbarrier-å¾ªç¯æ …æ "&gt;ğŸ” 3. CyclicBarrier (å¾ªç¯æ …æ )
&lt;/h3&gt;&lt;p&gt;CyclicBarrier å…è®¸ä¸€ç»„çº¿ç¨‹ç›¸äº’ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹éƒ½åˆ°è¾¾ä¸€ä¸ªå…¬å…±å±éšœç‚¹ï¼ˆbarrier pointï¼‰ï¼Œç„¶åè¿™äº›çº¿ç¨‹æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚CyclicBarrier æ˜¯å¯å¾ªç¯ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;h4 id="æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§-2"&gt;æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šçº¿ç¨‹æ‰§è¡Œ &lt;code&gt;await()&lt;/code&gt;æ–¹æ³•è¡¨ç¤ºè‡ªå·±å·²åˆ°è¾¾å±éšœï¼Œç„¶åå½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ã€‚å½“æ‰€æœ‰çº¿ç¨‹éƒ½è°ƒç”¨ &lt;code&gt;await()&lt;/code&gt;åï¼Œå±éšœå¼€æ”¾ï¼Œæ‰€æœ‰è¢«é˜»å¡çš„çº¿ç¨‹ä¼šåŒæ—¶è¢«å”¤é†’ç»§ç»­æ‰§è¡Œã€‚CyclicBarrier å¯ä»¥é€‰æ‹©ä¸€ä¸ª &lt;code&gt;Runnable&lt;/code&gt;ä»»åŠ¡ï¼Œåœ¨æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœåï¼Œ&lt;strong&gt;åœ¨é‡Šæ”¾æ‰€æœ‰çº¿ç¨‹ä¹‹å‰&lt;/strong&gt;æ‰§è¡Œæ­¤ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡å¤ä½¿ç”¨&lt;/strong&gt;ï¼šä¸ CountDownLatch ä¸åŒï¼ŒCyclicBarrier çš„å±éšœåœ¨é‡Šæ”¾ç­‰å¾…çº¿ç¨‹åä¼šè‡ªåŠ¨é‡ç½®ï¼Œå¯ä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;** BrokenBarrierException **ï¼šå¦‚æœç­‰å¾…çš„çº¿ç¨‹è¢«ä¸­æ–­ã€è¶…æ—¶ï¼Œæˆ–è€…å±éšœè¢«é‡ç½®ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ä¼šæŠ›å‡º BrokenBarrierExceptionã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å¸¸ç”¨æ–¹æ³•-2"&gt;å¸¸ç”¨æ–¹æ³•
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;await()&lt;/code&gt;: é€šçŸ¥å±éšœå½“å‰çº¿ç¨‹å·²åˆ°è¾¾ï¼Œå¹¶ç­‰å¾…å…¶ä»–çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;await(long timeout, TimeUnit unit)&lt;/code&gt;: åœ¨æŒ‡å®šæ—¶é—´å†…ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getNumberWaiting()&lt;/code&gt;: è¿”å›å½“å‰åœ¨å±éšœå¤„ç­‰å¾…çš„çº¿ç¨‹æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getParties()&lt;/code&gt;: è¿”å›è·¨è¶Šå±éšœæ‰€éœ€çš„çº¿ç¨‹æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;reset()&lt;/code&gt;: å°†å±éšœé‡ç½®ä¸ºåˆå§‹çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä»£ç ç¤ºä¾‹-2"&gt;ä»£ç ç¤ºä¾‹
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;
public class CyclicBarrierExample {
public static void main(String[] args) {
// åˆ›å»ºä¸€ä¸ªå¾ªç¯æ …æ ï¼Œç­‰å¾…3ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœåæ‰§è¡Œä¸€ä¸ªRunnable
CyclicBarrier barrier = new CyclicBarrier(3, () -&amp;gt; {
System.out.println(&amp;#34;æ‰€æœ‰çº¿ç¨‹å‡å·²åˆ°è¾¾å±éšœï¼Œç»Ÿä¸€å¼€å§‹ä¸‹ä¸€æ­¥æ“ä½œ&amp;#34;);
});
for (int i = 0; i &amp;lt; 3; i++) {
new Thread(() -&amp;gt; {
try {
System.out.println(Thread.currentThread().getName() + &amp;#34; å·²åˆ°è¾¾å±éšœï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹&amp;#34;);
barrier.await(); // ç­‰å¾…å…¶ä»–çº¿ç¨‹
System.out.println(Thread.currentThread().getName() + &amp;#34; è¢«é‡Šæ”¾ï¼Œç»§ç»­æ‰§è¡Œ&amp;#34;);
} catch (InterruptedException | BrokenBarrierException e) {
e.printStackTrace();
}
}, &amp;#34;Thread-&amp;#34; + i).start();
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ä¸»è¦åº”ç”¨åœºæ™¯-2"&gt;ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šçº¿ç¨‹è®¡ç®—æ•°æ®ï¼Œæœ€ååˆå¹¶ç»“æœ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ‹Ÿå¹¶å‘æµ‹è¯•&lt;/strong&gt;ï¼šè®©ä¸€ç»„çº¿ç¨‹åœ¨æŸä¸ªæ—¶åˆ»åŒæ—¶å¼€å§‹æ‰§è¡Œï¼Œæµ‹è¯•ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŒæ­¥å™¨&lt;/th&gt;
&lt;th&gt;å…³é”®åŒºåˆ«&lt;/th&gt;
&lt;th&gt;å…¸å‹åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Semaphore&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶èµ„æºè®¿é—®çš„å¹¶å‘æ•°&lt;/strong&gt;ï¼Œå¼ºè°ƒâ€œå‡†å…¥â€è®¸å¯&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“è¿æ¥æ± ï¼Œæ¥å£é™æµ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CountDownLatch&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å®ŒæˆæŸäº‹&lt;/strong&gt;ï¼Œä¸€æ¬¡æ€§ä½¿ç”¨&lt;/td&gt;
&lt;td&gt;ä¸»çº¿ç¨‹ç­‰å¾…å¤šä¸ªå¾®æœåŠ¡åˆå§‹åŒ–å®Œæˆåå†å¯åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CyclicBarrier&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸€ç»„çº¿ç¨‹ç›¸äº’ç­‰å¾…&lt;/strong&gt;ï¼Œåˆ°è¾¾å±éšœåå…±åŒç»§ç»­ï¼Œå¯å¾ªç¯ä½¿ç”¨&lt;/td&gt;
&lt;td&gt;å¤šçº¿ç¨‹åˆ†é˜¶æ®µè®¡ç®—ï¼Œæ‰€æœ‰çº¿ç¨‹å®Œæˆå½“å‰é˜¶æ®µåæ‰å…±åŒè¿›å…¥ä¸‹ä¸€é˜¶æ®µ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;é€‰æ‹©æ—¶ï¼Œå¯ä»¥è¿™æ ·è€ƒè™‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;é™åˆ¶åŒæ—¶è®¿é—®èµ„æºçš„çº¿ç¨‹æ•°é‡&lt;/strong&gt;æ—¶ï¼Œç”¨ &lt;strong&gt;Semaphore&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–ä¸€ç»„çº¿ç¨‹å®Œæˆæ“ä½œ&lt;/strong&gt;åï¼ˆå¦‚ä¸»çº¿ç¨‹ç­‰å¾…æ‰€æœ‰åˆå§‹åŒ–ä»»åŠ¡å®Œæˆï¼‰å†ç»§ç»­ï¼Œä¸”åªéœ€è¦ç­‰å¾…ä¸€æ¬¡æ—¶ï¼Œç”¨ &lt;strong&gt;CountDownLatch&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;ä¸€ç»„çº¿ç¨‹ç›¸äº’ç­‰å¾…&lt;/strong&gt;ï¼Œåˆ°è¾¾ä¸€ä¸ªå…±åŒç‚¹åå†ä¸€èµ·ç»§ç»­æ‰§è¡Œï¼Œä¸”éœ€è¦å¤šæ¬¡é‡ç”¨è¿™ä¸ªåŒæ­¥ç‚¹æ—¶ï¼Œç”¨ &lt;strong&gt;CyclicBarrier&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™äº›å¼ºå¤§çš„å¹¶å‘åŒæ­¥å·¥å…·ã€‚&lt;/p&gt;
&lt;h2 id="abstract-class--interface"&gt;abstract class &amp;amp; interface
&lt;/h2&gt;&lt;p&gt;&amp;ldquo;abstract classè¡¨ç¤ºçš„æ˜¯&amp;rsquo;is-a&amp;rsquo;å…³ç³»ï¼Œinterfaceè¡¨ç¤ºçš„æ˜¯&amp;rsquo;has-a&amp;rsquo;å…³ç³»&amp;rdquo; è¿™å¥è¯æ¦‚æ‹¬äº†æŠ½è±¡ç±»å’Œæ¥å£åœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­çš„æ ¸å¿ƒåŒºåˆ«ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿç†è§£å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼Œç„¶åå†è¯¦ç»†è§£é‡Šï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æŠ½è±¡ç±» (Abstract Class)&lt;/th&gt;
&lt;th&gt;æ¥å£ (Interface)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³ç³»ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;is-a&lt;/code&gt;(æ˜¯ä¸€ä¸ª)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;has-a&lt;/code&gt;(æœ‰ä¸€ä¸ªèƒ½åŠ›/ç‰¹æ€§)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨ç¤º&lt;strong&gt;åˆ†ç±»å…³ç³»&lt;/strong&gt;å’Œä»£ç å¤ç”¨&lt;/td&gt;
&lt;td&gt;å®šä¹‰&lt;strong&gt;è¡Œä¸ºå¥‘çº¦&lt;/strong&gt;å’Œèƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»§æ‰¿/å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ç»§æ‰¿ (&lt;code&gt;extends&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;å¤šå®ç° (&lt;code&gt;implements&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯åŒ…å«æŠ½è±¡æ–¹æ³•å’Œå…·ä½“å®ç°æ–¹æ³•&lt;/td&gt;
&lt;td&gt;Java 8å‰æ‰€æœ‰æ–¹æ³•æŠ½è±¡ï¼ŒJava 8+ å¯åŒ…å«é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯åŒ…å«æ™®é€šæˆå‘˜å˜é‡&lt;/td&gt;
&lt;td&gt;å­—æ®µé»˜è®¤éƒ½æ˜¯ &lt;code&gt;public static final&lt;/code&gt;å¸¸é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„é€ å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥æœ‰æ„é€ æ–¹æ³•&lt;/td&gt;
&lt;td&gt;ä¸èƒ½æœ‰æ„é€ æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºå¯†åˆ‡ç›¸å…³çš„ä¸€ç»„ç±»æä¾›å…¬å…±åŸºç±»å’Œéƒ¨åˆ†å®ç°&lt;/td&gt;
&lt;td&gt;ä¸ºå¯èƒ½ä¸ç›¸å…³çš„ç±»å®šä¹‰å…±åŒçš„è¡Œä¸ºè§„èŒƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç†è§£-is-a-å’Œ-has-a"&gt;ğŸ§© ç†è§£ &amp;ldquo;is-a&amp;rdquo; å’Œ &amp;ldquo;has-a&amp;rdquo;
&lt;/h3&gt;&lt;h4 id="heading"&gt;&lt;strong&gt;&amp;ldquo;is-a&amp;rdquo; å…³ç³» (æŠ½è±¡ç±»)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&amp;ldquo;is-a&amp;rdquo; å…³ç³»è¡¨ç¤ºä¸€ç§&lt;strong&gt;åˆ†ç±»ä¸Šçš„ä»å±å…³ç³»&lt;/strong&gt;ï¼Œå³å­ç±»æ˜¯çˆ¶ç±»çš„ä¸€ç§å…·ä½“ç±»å‹ã€‚å®ƒå¼ºè°ƒæœ¬è´¨ä¸Šçš„ç±»åˆ«å½’å±ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŠ½è±¡ç±»&lt;/strong&gt;ç”¨äºè¡¨ç¤ºè¿™ç§å…³ç³»ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªç±»åˆ«çš„æ ¸å¿ƒç‰¹å¾å’Œè¡Œä¸ºï¼Œå­ç±»é€šè¿‡ç»§æ‰¿æ¥æ‰©å±•æˆ–ç‰¹åŒ–è¿™ä¸ªåŸºç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¾‹å­&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Dog&lt;/code&gt;(ç‹—) &lt;strong&gt;æ˜¯ä¸€ç§&lt;/strong&gt; &lt;code&gt;Animal&lt;/code&gt;(åŠ¨ç‰©)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Circle&lt;/code&gt;(åœ†å½¢) &lt;strong&gt;æ˜¯ä¸€ç§&lt;/strong&gt; &lt;code&gt;Shape&lt;/code&gt;(å½¢çŠ¶)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Manager&lt;/code&gt;(ç»ç†) &lt;strong&gt;æ˜¯ä¸€ç§&lt;/strong&gt; &lt;code&gt;Employee&lt;/code&gt;(å‘˜å·¥)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// æŠ½è±¡ç±»è¡¨ç¤º &amp;#34;is-a&amp;#34; å…³ç³»
abstract class Animal {
private String name;
public Animal(String name) {
this.name = name;
}
public abstract void makeSound(); // æŠ½è±¡æ–¹æ³•
public void eat() { // å…·ä½“æ–¹æ³•
System.out.println(name + &amp;#34; is eating.&amp;#34;);
}
}
class Dog extends Animal { // Dog &amp;#34;æ˜¯ä¸€ç§&amp;#34; Animal
public Dog(String name) {
super(name);
}
@Override
public void makeSound() {
System.out.println(&amp;#34;Woof!&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="heading-1"&gt;&lt;strong&gt;&amp;ldquo;has-a&amp;rdquo; å…³ç³» (æ¥å£)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&amp;ldquo;has-a&amp;rdquo; å…³ç³»è¡¨ç¤º&lt;strong&gt;èƒ½åŠ›ã€è¡Œä¸ºæˆ–è§’è‰²&lt;/strong&gt;ï¼Œå³ä¸€ä¸ªç±»å…·å¤‡äº†æŸç§åŠŸèƒ½æˆ–ç‰¹æ€§ã€‚å®ƒä¸å…³æ³¨ç±»åˆ«å½’å±ï¼Œè€Œå…³æ³¨èƒ½å¦åšæŸäº‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£&lt;/strong&gt;ç”¨äºè¡¨ç¤ºè¿™ç§å…³ç³»ã€‚å®ƒå®šä¹‰äº†ä¸€ç»„æ–¹æ³•å¥‘çº¦ï¼Œå®ç°ç±»å¿…é¡»æä¾›è¿™äº›æ–¹æ³•çš„å…·ä½“å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¾‹å­&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Dog&lt;/code&gt;(ç‹—) &lt;strong&gt;å¯ä»¥&lt;/strong&gt; &lt;code&gt;Runnable&lt;/code&gt;(å¥”è·‘)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Circle&lt;/code&gt;(åœ†å½¢) &lt;strong&gt;å¯ä»¥&lt;/strong&gt; &lt;code&gt;Drawable&lt;/code&gt;(è¢«ç»˜åˆ¶)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Manager&lt;/code&gt;(ç»ç†) &lt;strong&gt;å¯ä»¥&lt;/strong&gt; &lt;code&gt;Interviewer&lt;/code&gt;(è¿›è¡Œé¢è¯•)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// æ¥å£è¡¨ç¤º &amp;#34;has-a&amp;#34; å…³ç³»
interface Runnable { // è¡¨ç¤ºâ€œèƒ½å¥”è·‘â€çš„èƒ½åŠ›
void run();
}
interface Swimmable { // è¡¨ç¤ºâ€œèƒ½æ¸¸æ³³â€çš„èƒ½åŠ›
void swim();
}
class Dog extends Animal implements Runnable, Swimmable { // Dog &amp;#34;æ˜¯ä¸€ç§&amp;#34; Animal, &amp;#34;å¯ä»¥&amp;#34; run, &amp;#34;å¯ä»¥&amp;#34; swim
// ... å…¶ä»–ä»£ç 
@Override
public void run() {
System.out.println(&amp;#34;Dog is running fast!&amp;#34;);
}
@Override
public void swim() {
System.out.println(&amp;#34;Dog is swimming!&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å¦‚ä½•é€‰æ‹©æŠ½è±¡ç±»ä¸æ¥å£"&gt;âš–ï¸ å¦‚ä½•é€‰æ‹©æŠ½è±¡ç±»ä¸æ¥å£
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©çš„å…³é”®åœ¨äºä½ æƒ³è¦è¡¨è¾¾çš„å…³ç³»æ˜¯&lt;strong&gt;æœ¬è´¨çš„ç±»åˆ«å½’å±&lt;/strong&gt;ï¼ˆ&lt;code&gt;is-a&lt;/code&gt;ï¼‰ï¼Œè¿˜æ˜¯&lt;strong&gt;é¢å¤–çš„èƒ½åŠ›æˆ–è¡Œä¸º&lt;/strong&gt;ï¼ˆ&lt;code&gt;has-a&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æŠ½è±¡ç±»&lt;/strong&gt;ï¼šå½“å¤šä¸ªç±»å…±äº«ç›¸åŒçš„æ ¸å¿ƒç‰¹å¾å’Œè¡Œä¸ºï¼Œå¹¶ä¸”å­˜åœ¨æ˜æ˜¾çš„å±‚æ¬¡ç»“æ„æ—¶ã€‚å®ƒéå¸¸é€‚åˆç”¨äº&lt;strong&gt;ä»£ç å¤ç”¨&lt;/strong&gt;å’Œå»ºç«‹&lt;strong&gt;åˆ†ç±»æ¨¡å‹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æ¥å£&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦å®šä¹‰ä¸€ç»„è¡Œä¸ºå¥‘çº¦ï¼Œè¿™äº›è¡Œä¸ºå¯ä»¥è¢«è®¸å¤šäº’ä¸ç›¸å…³çš„ç±»å®ç°æ—¶ã€‚å®ƒæä¾›äº†æå¤§çš„&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;å¹¶æ”¯æŒ&lt;strong&gt;å¤šæ€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°ä»£Javaï¼ˆ8+ï¼‰ä¸­ï¼Œæ¥å£å¯ä»¥é€šè¿‡&lt;code&gt;default&lt;/code&gt;æ–¹æ³•æä¾›é»˜è®¤å®ç°ï¼Œè¿™ä½¿å¾—æ¥å£çš„èƒ½åŠ›æ›´å¼ºï¼Œä½†åœ¨è®¾è®¡ç†å¿µä¸Šï¼Œ&lt;code&gt;is-a&lt;/code&gt;å’Œ&lt;code&gt;has-a&lt;/code&gt;çš„åŒºåˆ†ä»ç„¶æ˜¯é‡è¦çš„æ€è€ƒè§’åº¦ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒè®°å¿†ç‚¹"&gt;ğŸ’ æ ¸å¿ƒè®°å¿†ç‚¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœ¬è´¨åŒºåˆ«&lt;/strong&gt;ï¼šè®°ä½ &lt;strong&gt;&amp;ldquo;æ˜¯ä¸€ä¸ª&amp;rdquo; (&lt;code&gt;is-a&lt;/code&gt;) ç”¨æŠ½è±¡ç±»&lt;/strong&gt;ï¼Œ&lt;strong&gt;&amp;ldquo;æœ‰ä¸€ä¸ªèƒ½åŠ›&amp;rdquo; (&lt;code&gt;has-a&lt;/code&gt;) ç”¨æ¥å£&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³ç³»å¼ºåº¦&lt;/strong&gt;ï¼š&lt;code&gt;is-a&lt;/code&gt;æ˜¯&lt;strong&gt;å¼ºå…³ç³»&lt;/strong&gt;ï¼Œè¡¨ç¤ºæœ¬è´¨åˆ†ç±»ï¼›&lt;code&gt;has-a&lt;/code&gt;æ˜¯&lt;strong&gt;å¼±å…³ç³»&lt;/strong&gt;ï¼Œè¡¨ç¤ºå¯é€‰èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šé‡ç‰¹æ€§&lt;/strong&gt;ï¼šä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆå•&lt;code&gt;is-a&lt;/code&gt;ï¼‰ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼ˆå¤š&lt;code&gt;has-a&lt;/code&gt;ï¼‰ã€‚è¿™æ­£æ˜¯Javaé€šè¿‡å•ç»§æ‰¿å’Œå¤šå®ç°æ¥çµæ´»ç»„åˆå¯¹è±¡è¡Œä¸ºçš„æ ¸å¿ƒæœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡æ€ç»´&lt;/strong&gt;ï¼šæŠ½è±¡ç±»å¸¸ç”¨äº&lt;strong&gt;è‡ªä¸‹è€Œä¸Š&lt;/strong&gt;çš„è®¾è®¡ï¼Œå…ˆæœ‰å­ç±»å†æœ‰æŠ½è±¡ï¼›æ¥å£å¸¸ç”¨äº&lt;strong&gt;è‡ªä¸Šè€Œä¸‹&lt;/strong&gt;çš„è®¾è®¡ï¼Œå…ˆå®šä¹‰å¥‘çº¦å†å®ç°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è§£ &lt;code&gt;is-a&lt;/code&gt;å’Œ &lt;code&gt;has-a&lt;/code&gt;çš„åŒºåˆ«ï¼Œèƒ½å¸®åŠ©ä½ åœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­åšå‡ºæ›´åˆç†çš„å†³ç­–ï¼Œä»è€Œæ„å»ºå‡ºæ›´æ¸…æ™°ã€æ›´çµæ´»ã€æ›´æ˜“äºç»´æŠ¤çš„ä»£ç ç»“æ„ã€‚&lt;/p&gt;
&lt;h2 id="jvm-å‚æ•°"&gt;JVM å‚æ•°
&lt;/h2&gt;&lt;p&gt;Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰çš„å‚æ•°æ˜¯ä¼˜åŒ–åº”ç”¨æ€§èƒ½å’Œç¨³å®šæ€§çš„å…³é”®ã€‚ä¸‹é¢æˆ‘å°†JVMå‚æ•°çš„ä¸»è¦ç±»å‹ã€å¸¸ç”¨å‚æ•°åŠå…¶ç”¨é€”ä¸ºä½ æ•´ç†æˆä¸€ä¸ªè¡¨æ ¼ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼Œç„¶åå†è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å…³é”®å‚æ•°ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡†å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-version&lt;/code&gt;, &lt;code&gt;-help&lt;/code&gt;, &lt;code&gt;-server&lt;/code&gt;, &lt;code&gt;-cp&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥çœ‹ä¿¡æ¯ã€è®¾ç½®ç±»è·¯å¾„ã€é€‰æ‹©JVMè¿è¡Œæ¨¡å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éæ ‡å‡†å‚æ•°(-X)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-Xms&lt;/code&gt;, &lt;code&gt;-Xmx&lt;/code&gt;, &lt;code&gt;-Xmn&lt;/code&gt;, &lt;code&gt;-Xss&lt;/code&gt;, &lt;code&gt;-Xloggc&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é…ç½®å†…å­˜å¤§å°ã€çº¿ç¨‹æ ˆã€GCæ—¥å¿—è¾“å‡ºç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜çº§å‚æ•°(-XX)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-XX:+UseG1GC&lt;/code&gt;, &lt;code&gt;-XX:MaxGCPauseMillis&lt;/code&gt;, &lt;code&gt;-XX:MetaspaceSize&lt;/code&gt;, &lt;code&gt;-XX:+PrintGCDetails&lt;/code&gt;, &lt;code&gt;-XX:+HeapDumpOnOutOfMemoryError&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€‰æ‹©åƒåœ¾å›æ”¶å™¨ã€è°ƒä¼˜GCè¡Œä¸ºã€é…ç½®å…ƒç©ºé—´ã€ç›‘æ§ä¸è¯Šæ–­&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£jvmå‚æ•°"&gt;ğŸ“Š è¯¦è§£JVMå‚æ•°
&lt;/h3&gt;&lt;p&gt;JVMå‚æ•°ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š&lt;strong&gt;æ ‡å‡†å‚æ•°&lt;/strong&gt;ã€&lt;strong&gt;éæ ‡å‡†å‚æ•°ï¼ˆä»¥-Xå¼€å¤´ï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;é«˜çº§å‚æ•°ï¼ˆä»¥-XXå¼€å¤´ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ ‡å‡†å‚æ•° (Standard Options)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰JVMå®ç°éƒ½å¿…é¡»æ”¯æŒï¼Œç›¸å¯¹ç¨³å®šï¼Œä¸»è¦ç”¨äºæ‰§è¡Œå¸¸è§æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-version&lt;/code&gt;ï¼šæŸ¥çœ‹JVMç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-help&lt;/code&gt;ï¼šæŸ¥çœ‹javaå‘½ä»¤çš„ä½¿ç”¨å¸®åŠ©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-server&lt;/code&gt;/&lt;code&gt;-client&lt;/code&gt;ï¼šé€‰æ‹©JVMè¿è¡Œæ¨¡å¼ã€‚&lt;code&gt;-server&lt;/code&gt;æ¨¡å¼é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå…·æœ‰æ›´å¥½çš„æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡ï¼›&lt;code&gt;-client&lt;/code&gt;æ¨¡å¼é€‚ç”¨äºæ¡Œé¢åº”ç”¨æˆ–å¼€å‘æµ‹è¯•ç¯å¢ƒï¼Œå¯åŠ¨é€Ÿåº¦è¾ƒå¿«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-cp&lt;/code&gt;/&lt;code&gt;-classpath&lt;/code&gt;ï¼šæŒ‡å®šJVMæœç´¢ç±»å’Œèµ„æºæ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éæ ‡å‡†å‚æ•° (Non-Standard Options, ä»¥ -X å¼€å¤´)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™äº›æ˜¯ç‰¹å®šäºJava HotSpotè™šæ‹Ÿæœºçš„å‚æ•°ï¼Œä¸ä¿è¯æ‰€æœ‰JVMå®ç°éƒ½æ”¯æŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-Xms&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®JVM&lt;strong&gt;åˆå§‹å †å†…å­˜å¤§å°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;-Xms512m&lt;/code&gt;æˆ– &lt;code&gt;-Xms2g&lt;/code&gt;ï¼‰ã€‚ç”Ÿäº§ç¯å¢ƒå¸¸ä¸&lt;code&gt;-Xmx&lt;/code&gt;è®¾ç›¸åŒï¼Œé¿å…åŠ¨æ€è°ƒæ•´å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-Xmx&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®JVM&lt;strong&gt;æœ€å¤§å †å†…å­˜å¤§å°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;-Xmx4g&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-Xmn&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;å¹´è½»ä»£å¤§å°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;-Xmn1g&lt;/code&gt;ï¼‰ã€‚è®¾ç½®æ–°ç”Ÿä»£å†…å­˜å¤§å°ï¼ŒåŒ…æ‹¬EdenåŒºå’Œä¸¤ä¸ªSurvivoråŒºçš„æ€»å’Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-Xss&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„&lt;strong&gt;æ ˆå¤§å°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;-Xss256k&lt;/code&gt;æˆ– &lt;code&gt;-Xss1m&lt;/code&gt;ï¼‰ã€‚æ ˆè¿‡å°å¯èƒ½å¯¼è‡´&lt;code&gt;StackOverflowError&lt;/code&gt;ï¼Œè¿‡å¤§åˆ™æµªè´¹å†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GCæ—¥å¿—&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-Xloggc:&amp;lt;file&amp;gt;&lt;/code&gt;ï¼šå°†GCæ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;-Xloggc:gc.log&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ¨¡å¼&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-Xint&lt;/code&gt;ï¼šä»…è§£é‡Šæ¨¡å¼æ‰§è¡Œï¼Œä¸è¿›è¡ŒJITç¼–è¯‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-Xmixed&lt;/code&gt;ï¼šæ··åˆæ¨¡å¼æ‰§è¡Œï¼ˆé»˜è®¤ï¼‰ï¼Œè§£é‡Šå™¨ä¸JITç¼–è¯‘å™¨ååŒå·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜çº§å‚æ•° (Advanced Options, ä»¥ -XX å¼€å¤´)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨äºç²¾ç¡®æ§åˆ¶JVMè¡Œä¸ºï¼Œè¿›è¡Œæ€§èƒ½è°ƒä¼˜å’Œæ•…éšœè¯Šæ–­ã€‚å¯åˆ†ä¸ºBooleanç±»å‹ï¼ˆ&lt;code&gt;+&lt;/code&gt;å¯ç”¨/&lt;code&gt;-&lt;/code&gt;ç¦ç”¨ï¼‰å’Œéœ€è®¾å€¼çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-XX:NewRatio=&amp;lt;n&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;å¹´è½»ä»£ä¸è€å¹´ä»£&lt;/strong&gt;çš„æ¯”ä¾‹ï¼ˆå¦‚ &lt;code&gt;-XX:NewRatio=2&lt;/code&gt;è¡¨ç¤ºè€å¹´ä»£:å¹´è½»ä»£=2:1ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:SurvivorRatio=&amp;lt;n&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;EdenåŒºä¸SurvivoråŒº&lt;/strong&gt;çš„æ¯”ä¾‹ï¼ˆå¦‚ &lt;code&gt;-XX:SurvivorRatio=8&lt;/code&gt;è¡¨ç¤º Eden:ä¸€ä¸ªSurvivor=8:1ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:MetaspaceSize=&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;å…ƒç©ºé—´åˆå§‹å¤§å°&lt;/strong&gt;ï¼ˆJDK 8+ï¼Œå¦‚ &lt;code&gt;-XX:MetaspaceSize=256m&lt;/code&gt;ï¼‰ã€‚å…ƒç©ºé—´å­˜æ”¾ç±»å…ƒæ•°æ®ï¼Œæ›¿ä»£äº†æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:MaxMetaspaceSize=&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;å…ƒç©ºé—´æœ€å¤§å¤§å°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:MaxDirectMemorySize=&amp;lt;size&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®**ç›´æ¥å†…å­˜ï¼ˆå †å¤–å†…å­˜ï¼‰**çš„æœ€å¤§å¤§å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ç›¸å…³&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;GCç­–ç•¥é€‰æ‹©&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-XX:+UseSerialGC&lt;/code&gt;ï¼šå¯ç”¨ä¸²è¡Œåƒåœ¾å›æ”¶å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+UseParallelGC&lt;/code&gt;ï¼šå¯ç”¨å¹¶è¡Œåƒåœ¾å›æ”¶å™¨ï¼ˆååé‡ä¼˜å…ˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+UseG1GC&lt;/code&gt;ï¼šå¯ç”¨G1åƒåœ¾å›æ”¶å™¨ï¼ˆJDK9åŠä»¥åç‰ˆæœ¬çš„é»˜è®¤GCï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+UseZGC&lt;/code&gt;ï¼šå¯ç”¨ZGCï¼ˆä½å»¶è¿Ÿï¼Œé€‚ç”¨äºJDK11+ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GCè°ƒä¼˜å‚æ•°&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-XX:MaxGCPauseMillis=&amp;lt;time&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;æœ€å¤§GCåœé¡¿æ—¶é—´ç›®æ ‡&lt;/strong&gt;ï¼ˆæ¯«ç§’ï¼Œå¦‚200ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:ParallelGCThreads=&amp;lt;n&amp;gt;&lt;/code&gt;ï¼šè®¾ç½®&lt;strong&gt;å¹¶è¡ŒGCçº¿ç¨‹æ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:InitiatingHeapOccupancyPercent=&amp;lt;percent&amp;gt;&lt;/code&gt;ï¼šG1ä¸­è§¦å‘å¹¶å‘æ ‡è®°å‘¨æœŸçš„å †å ç”¨é˜ˆå€¼ï¼ˆå¦‚45ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§/è¯Šæ–­/æ—¥å¿—&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-XX:+PrintGC&lt;/code&gt;/ &lt;code&gt;-XX:+PrintGCDetails&lt;/code&gt;ï¼šæ‰“å°GCç®€è¦/è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+PrintGCTimeStamps&lt;/code&gt;/ &lt;code&gt;-XX:+PrintGCDateStamps&lt;/code&gt;ï¼šåœ¨GCæ—¥å¿—ä¸­æ‰“å°æ—¶é—´æˆ³æˆ–æ—¥æœŸæˆ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-Xlog:gc*:file=gc.log:time,uptime,level,tags:filecount=5,filesize=10M&lt;/code&gt;ï¼šJDK9+æ¨èçš„ç»Ÿä¸€æ—¥å¿—æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+HeapDumpOnOutOfMemoryError&lt;/code&gt;ï¼šåœ¨å‘ç”Ÿ&lt;strong&gt;OOMé”™è¯¯æ—¶è‡ªåŠ¨ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶&lt;/strong&gt;ï¼ˆheap dumpï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:HeapDumpPath=&amp;lt;path&amp;gt;&lt;/code&gt;ï¼šæŒ‡å®šå †è½¬å‚¨æ–‡ä»¶çš„è·¯å¾„ï¼ˆå¦‚ &lt;code&gt;-XX:HeapDumpPath=./java.hprof&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+FlightRecorder&lt;/code&gt;/ &lt;code&gt;-XX:StartFlightRecording&lt;/code&gt;ï¼šå¯ç”¨Javaé£è¡Œè®°å½•å™¨ï¼ˆJFRï¼‰è¿›è¡Œæ€§èƒ½åˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-XX:+TieredCompilation&lt;/code&gt;ï¼šå¯ç”¨&lt;strong&gt;åˆ†å±‚ç¼–è¯‘&lt;/strong&gt;ï¼Œå¯ä»¥æå‡åº”ç”¨å¯åŠ¨é€Ÿåº¦å’Œé•¿æœŸæ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+UseCompressedOops&lt;/code&gt;ï¼šå¯ç”¨&lt;strong&gt;å‹ç¼©æŒ‡é’ˆ&lt;/strong&gt;ï¼ŒèŠ‚çœ64ä½ç³»ç»Ÿä¸‹çš„å†…å­˜å ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-XX:+DoEscapeAnalysis&lt;/code&gt;ï¼šå¼€å¯&lt;strong&gt;é€ƒé€¸åˆ†æ&lt;/strong&gt;ï¼Œå…è®¸JITç¼–è¯‘å™¨è¿›è¡Œæ ˆä¸Šåˆ†é…ç­‰ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•è®¾ç½®jvmå‚æ•°"&gt;âš™ï¸ å¦‚ä½•è®¾ç½®JVMå‚æ•°
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‘½ä»¤è¡Œç›´æ¥è®¾ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;java -Xms2g -Xmx2g -XX:+UseG1GC -jar your_application.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨æœåŠ¡å™¨è„šæœ¬ä¸­è®¾ç½®&lt;/strong&gt;ï¼ˆå¦‚Tomcatçš„&lt;code&gt;catalina.sh&lt;/code&gt;æˆ–&lt;code&gt;catalina.bat&lt;/code&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;JAVA_OPTS=&amp;#34;-Xms2048m -Xmx2048m -XX:+UseG1GC -XX:+PrintGCDetails&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;IDEä¸­è®¾ç½®&lt;/strong&gt;ï¼ˆå¦‚IntelliJ IDEA, Eclipseï¼‰ï¼šé€šå¸¸åœ¨è¿è¡Œé…ç½®ï¼ˆRun/Debug Configurationsï¼‰çš„VM optionsé€‰é¡¹ä¸­å¡«å†™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æŸ¥çœ‹jvmå‚æ•°"&gt;ğŸ” æŸ¥çœ‹JVMå‚æ•°
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ‰€æœ‰å‚æ•°çš„é»˜è®¤å€¼&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;java -XX:+PrintFlagsInitial -version
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹è¿è¡Œä¸­JVMå‚æ•°çš„æœ€ç»ˆå€¼&lt;/strong&gt;ï¼ˆåŒ…æ‹¬è¢«ä¿®æ”¹çš„ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;java -XX:+PrintFlagsFinal -version
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„Javaè¿›ç¨‹çš„å‚æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;jinfo -flags &amp;lt;pid&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è°ƒä¼˜å»ºè®®"&gt;ğŸ’¡ è°ƒä¼˜å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸåˆ™&lt;/strong&gt;ï¼šä¼˜å…ˆä¼˜åŒ–ä»£ç ï¼ŒJVMè°ƒä¼˜æ˜¯è¡¥å……ï¼›åŸºäºç›‘æ§æ•°æ®å†³ç­–ï¼›å…³æ³¨ååé‡ã€å»¶è¿Ÿå’Œå†…å­˜å ç”¨çš„å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç”Ÿäº§ç¯å¢ƒå»ºè®®å°†&lt;code&gt;-Xms&lt;/code&gt;å’Œ&lt;code&gt;-Xmx&lt;/code&gt;è®¾ä¸º&lt;strong&gt;ç›¸åŒå€¼&lt;/strong&gt;ï¼Œé¿å…åŠ¨æ€è°ƒæ•´å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;å †å¤§å°ä¸€èˆ¬ä¸åº”è¶…è¿‡ç‰©ç†å†…å­˜çš„70%ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GCé€‰æ‹©&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹³è¡¡å‹&lt;/strong&gt;ï¼šG1 GC (JDK8+)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½å»¶è¿Ÿ&lt;/strong&gt;ï¼šZGC (JDK15+)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜åå&lt;/strong&gt;ï¼šParallel GC&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å…¼å®¹æ€§&lt;/strong&gt;ï¼šä¸åŒJDKç‰ˆæœ¬æ”¯æŒçš„å‚æ•°å¯èƒ½ä¸åŒï¼ˆå¦‚ZGCéœ€JDK11+ï¼‰ï¼Œç§»é™¤æˆ–åºŸå¼ƒäº†éƒ¨åˆ†å‚æ•°ï¼ˆå¦‚JDK7å&lt;code&gt;-XX:PermSize&lt;/code&gt;è¢«&lt;code&gt;-XX:MetaspaceSize&lt;/code&gt;æ›¿ä»£ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨ç¯å¢ƒ&lt;/strong&gt;ï¼šåœ¨Docker/K8sä¸­ï¼Œä½¿ç”¨&lt;code&gt;-XX:+UseContainerSupport&lt;/code&gt;ï¼ˆJDK10+ï¼‰å¹¶é…åˆ&lt;code&gt;-XX:MaxRAMPercentage&lt;/code&gt;ç­‰å‚æ•°ï¼Œè®©JVMæ„ŸçŸ¥å®¹å™¨å†…å­˜é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;JVMè°ƒä¼˜éœ€ç»“åˆåº”ç”¨ç‰¹ç‚¹ã€ç¡¬ä»¶èµ„æºå’Œç›‘æ§æ•°æ®ã€‚å»ºè®®å…ˆç†è§£å‚æ•°å«ä¹‰ï¼Œå†é€æ­¥è°ƒæ•´éªŒè¯ã€‚&lt;/p&gt;
&lt;h2 id="stringintern"&gt;String.intern
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;String.intern()&lt;/code&gt;æ˜¯ Java ä¸­ä¸€ä¸ªç”¨äºæ“ä½œ&lt;strong&gt;å­—ç¬¦ä¸²å¸¸é‡æ± &lt;/strong&gt;çš„æ–¹æ³•ï¼Œå®ƒèƒ½å¸®åŠ©ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œä½†åœ¨ä¸åŒ JDK ç‰ˆæœ¬ä¸­æœ‰é‡è¦è¡Œä¸ºå·®å¼‚ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒçš„å·¥ä½œåŸç†ã€ç‰ˆæœ¬å·®å¼‚ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€æ ¸å¿ƒæœºåˆ¶ä¸åŸç†"&gt;ğŸ“Š ä¸€ã€æ ¸å¿ƒæœºåˆ¶ä¸åŸç†
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;String.intern()&lt;/code&gt;æ˜¯ä¸€ä¸ª &lt;code&gt;native&lt;/code&gt;æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒè¡Œä¸ºå¯ä»¥æ¦‚æ‹¬ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è°ƒç”¨ &lt;code&gt;intern()&lt;/code&gt;æ–¹æ³•æ—¶ï¼ŒJVM ä¼šæ£€æŸ¥å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯å¦å­˜åœ¨ä¸å½“å‰å­—ç¬¦ä¸²å†…å®¹ç›¸ç­‰çš„å­—ç¬¦ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœå­˜åœ¨&lt;/strong&gt;ï¼Œåˆ™ç›´æ¥è¿”å›å¸¸é‡æ± ä¸­è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœä¸å­˜åœ¨&lt;/strong&gt;ï¼ŒJDK7 ä¹‹å‰ä¼šåœ¨å¸¸é‡æ± &lt;strong&gt;åˆ›å»º&lt;/strong&gt;ä¸€ä¸ªç­‰å€¼å­—ç¬¦ä¸²å¹¶è¿”å›å…¶å¼•ç”¨ï¼›JDK7 åŠä¹‹ååˆ™ä¼šå°†å½“å‰å­—ç¬¦ä¸²å¯¹è±¡çš„&lt;strong&gt;å¼•ç”¨è®°å½•&lt;/strong&gt;åˆ°å¸¸é‡æ± ï¼Œå¹¶è¿”å›æ­¤å¼•ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œå¯¹äºä»»æ„ä¸¤ä¸ªå­—ç¬¦ä¸² &lt;code&gt;s&lt;/code&gt;å’Œ &lt;code&gt;t&lt;/code&gt;ï¼Œ&lt;code&gt;s.intern() == t.intern()&lt;/code&gt;å½“ä¸”ä»…å½“ &lt;code&gt;s.equals(t)&lt;/code&gt;ä¸º &lt;code&gt;true&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-äºŒjdk-ç‰ˆæœ¬è¡Œä¸ºå·®å¼‚è¯¦è§£"&gt;ğŸ” äºŒã€JDK ç‰ˆæœ¬è¡Œä¸ºå·®å¼‚è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ç†è§£ &lt;code&gt;intern()&lt;/code&gt;çš„å…³é”®åœ¨äºæŒæ¡å…¶åœ¨ä¸åŒ JDK ç‰ˆæœ¬ä¸­çš„è¡Œä¸ºå˜åŒ–ï¼Œè¿™ä¸»è¦æºäºå­—ç¬¦ä¸²å¸¸é‡æ± ä½ç½®çš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;JDK6 åŠä¹‹å‰&lt;/th&gt;
&lt;th&gt;JDK7+&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸é‡æ± ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ°¸ä¹…ä»£ (PermGen)&lt;/td&gt;
&lt;td&gt;å † (Heap)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;intern()&lt;/code&gt;æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥æ± ä¸­æ— ï¼Œåˆ™&lt;strong&gt;å¤åˆ¶&lt;/strong&gt;å­—ç¬¦ä¸²å¯¹è±¡åˆ°å¸¸é‡æ± &lt;/td&gt;
&lt;td&gt;è‹¥æ± ä¸­æ— ï¼Œåˆ™&lt;strong&gt;è®°å½•&lt;/strong&gt;å †ä¸­å­—ç¬¦ä¸²çš„&lt;strong&gt;å¼•ç”¨&lt;/strong&gt;åˆ°å¸¸é‡æ± &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½äº§ç”Ÿå¤§é‡é‡å¤å¯¹è±¡ï¼Œæ˜“å¯¼è‡´ &lt;code&gt;PermGen OOM&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;èŠ‚çœå†…å­˜ï¼Œå¸¸é‡æ± å¤§å°å¯è°ƒï¼Œå—å †å¤§å°é™åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;JDK6 åŠä¹‹å‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­—ç¬¦ä¸²å¸¸é‡æ± ä½äº&lt;strong&gt;æ°¸ä¹…ä»£&lt;/strong&gt;ã€‚æ°¸ä¹…ä»£ç©ºé—´æœ‰é™ä¸”åƒåœ¾å›æ”¶æ•ˆç‡ä½ã€‚æ‰§è¡Œ &lt;code&gt;new String(&amp;quot;abc&amp;quot;).intern()&lt;/code&gt;æ—¶ï¼Œè‹¥å¸¸é‡æ± æ²¡æœ‰ &amp;ldquo;abc&amp;rdquo;ï¼Œä¼šåœ¨æ°¸ä¹…ä»£&lt;strong&gt;åˆ›å»ºä¸€ä»½æ–°çš„å­—ç¬¦ä¸²å‰¯æœ¬&lt;/strong&gt;ã€‚è¿™å¯èƒ½å¯¼è‡´å †ä¸­çš„å­—ç¬¦ä¸²å¯¹è±¡å’Œå¸¸é‡æ± ä¸­çš„å‰¯æœ¬å¹¶å­˜ï¼Œé€ æˆå†…å­˜æµªè´¹ï¼Œç”šè‡³ &lt;code&gt;OutOfMemoryError: PermGen space&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JDK7 åŠä¹‹åï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»è‡³&lt;strong&gt;å †å†…å­˜&lt;/strong&gt;ã€‚æ‰§è¡Œ &lt;code&gt;new String(&amp;quot;abc&amp;quot;).intern()&lt;/code&gt;æ—¶ï¼Œè‹¥å¸¸é‡æ± æ²¡æœ‰ &amp;ldquo;abc&amp;rdquo;ï¼ŒJVM ä¼šç›´æ¥å°†å †ä¸­å·²æœ‰çš„è¿™ä¸ª &amp;ldquo;abc&amp;rdquo; å­—ç¬¦ä¸²å¯¹è±¡çš„&lt;strong&gt;å¼•ç”¨&lt;/strong&gt;å­˜å…¥å¸¸é‡æ± ã€‚&lt;strong&gt;è¿™æ„å‘³ç€å¸¸é‡æ± ä¸­å­˜å‚¨çš„ä¸å†æ˜¯å‰¯æœ¬ï¼Œè€Œæ˜¯å †ä¸­å¯¹è±¡çš„å¼•ç”¨&lt;/strong&gt;ï¼Œä»è€Œé¿å…äº†é‡å¤åˆ›å»ºï¼ŒèŠ‚çœäº†å†…å­˜ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸‰å…¸å‹ä½¿ç”¨åœºæ™¯"&gt;âš™ï¸ ä¸‰ã€å…¸å‹ä½¿ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;intern()&lt;/code&gt;æ–¹æ³•åœ¨ç‰¹å®šåœºæ™¯ä¸‹èƒ½æ˜¾è‘—ä¼˜åŒ–å†…å­˜å’Œæé«˜æ¯”è¾ƒæ€§èƒ½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‡å°‘å¤§é‡é‡å¤å­—ç¬¦ä¸²çš„å†…å­˜å ç”¨&lt;/strong&gt;ï¼šå½“ç¨‹åºéœ€è¦å¤„ç†å¤§é‡å†…å®¹é‡å¤çš„å­—ç¬¦ä¸²æ—¶ï¼ˆä¾‹å¦‚ä»æ•°æ®åº“æˆ–æ–‡ä»¶å¾ªç¯è¯»å–è®°å½•ï¼Œè®¸å¤šå­—æ®µå€¼ç›¸åŒï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;intern()&lt;/code&gt;å¯ä»¥ç¡®ä¿ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä»½ï¼Œæå¤§èŠ‚çœå†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// æ¨¡æ‹Ÿä»å¤§é‡æ•°æ®ä¸­è¯»å–é‡å¤çš„å­—ç¬¦ä¸²å€¼
String[] rawData = getMassiveDataFromDB(); // è¿”å›å¤§é‡å¯èƒ½é‡å¤çš„å­—ç¬¦ä¸²
String[] internedData = new String[rawData.length];
for (int i = 0; i &amp;lt; rawData.length; i++) {
// ä½¿ç”¨ intern() ç¡®ä¿ç›¸åŒå­—ç¬¦ä¸²åªå­˜ä¸€ä»½
internedData[i] = rawData[i].intern();
}
// æ­¤å internedData ä¸­æ‰€æœ‰å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²éƒ½æŒ‡å‘å¸¸é‡æ± çš„åŒä¸€å¼•ç”¨
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ é€Ÿå­—ç¬¦ä¸²æ¯”è¾ƒ&lt;/strong&gt;ï¼šå¯¹äºå·²çŸ¥ä¼šé‡å¤å‡ºç°ä¸”éœ€è¦é¢‘ç¹æ¯”è¾ƒçš„å­—ç¬¦ä¸²ï¼ˆå¦‚æŸäº›çŠ¶æ€ç ã€ç±»å‹æ ‡è¯†ï¼‰ï¼Œå…ˆå¯¹å…¶è¿›è¡Œ &lt;code&gt;intern()&lt;/code&gt;æ“ä½œï¼Œåç»­å°±å¯ä»¥ç›´æ¥ç”¨ &lt;code&gt;==&lt;/code&gt;ï¼ˆæ¯”è¾ƒå¼•ç”¨åœ°å€ï¼‰æ¥ä»£æ›¿ &lt;code&gt;equals()&lt;/code&gt;ï¼ˆæ¯”è¾ƒå†…å®¹ï¼‰ï¼Œé€Ÿåº¦æ›´å¿«ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å‡è®¾ status æ˜¯é¢‘ç¹å‡ºç°ä¸”éœ€è¦æ¯”è¾ƒçš„å­—ç¬¦ä¸²
String status = getStatusFromExternalSource();
String internedStatus = status.intern(); // å…¥æ± 
// åç»­æ¯”è¾ƒä½¿ç”¨ ==ï¼Œæ•ˆç‡é«˜äº equals
if (internedStatus == &amp;#34;SUCCESS&amp;#34;) { // &amp;#34;SUCCESS&amp;#34; æ˜¯å­—é¢é‡ï¼Œå·²åœ¨æ± ä¸­
// do something
} else if (internedStatus == &amp;#34;FAILURE&amp;#34;) {
// do something else
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å››æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½å½±å“"&gt;âš ï¸ å››ã€æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½å½±å“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ &lt;code&gt;intern()&lt;/code&gt;å¼ºå¤§ï¼Œä½†ä½¿ç”¨ä¸å½“ä¹Ÿä¼šå¸¦æ¥é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼š&lt;code&gt;intern()&lt;/code&gt;æ–¹æ³•æœ¬èº«éœ€è¦æ‰§è¡Œå“ˆå¸ŒæŸ¥æ‰¾ç­‰æ“ä½œï¼Œåœ¨&lt;strong&gt;å­—ç¬¦ä¸²å¸¸é‡æ± éå¸¸å¤§&lt;/strong&gt;çš„æƒ…å†µä¸‹ï¼Œé¢‘ç¹è°ƒç”¨å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸é€‚ç”¨çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ç”Ÿæˆçš„ã€å‡ ä¹å”¯ä¸€çš„å­—ç¬¦ä¸²&lt;/strong&gt;ï¼ˆå¦‚ UUIDã€éšæœºæ•°ã€ç”¨æˆ·è¾“å…¥ï¼‰ï¼šè¿™äº›å­—ç¬¦ä¸²å†…å®¹å‡ ä¹ä¸é‡å¤ï¼Œ&lt;code&gt;intern()&lt;/code&gt;å®ƒä»¬åªä¼šæ— é™è†¨èƒ€å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œå¢åŠ æŸ¥æ‰¾å¼€é”€ï¼Œå´æ— æ³•å¸¦æ¥å†…å­˜æ”¶ç›Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸæçŸ­çš„å­—ç¬¦ä¸²&lt;/strong&gt;ï¼šå¦‚æœå­—ç¬¦ä¸²å¾ˆå¿«å°±ä¸å†ä½¿ç”¨ï¼Œå°†å…¶ &lt;code&gt;intern()&lt;/code&gt;å¹¶æ”¾å…¥å¸¸é‡æ± å¯èƒ½ä¼šå»¶é•¿å…¶ç”Ÿå‘½å‘¨æœŸï¼Œåè€Œå¢åŠ  GC å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å…¼å®¹æ€§&lt;/strong&gt;ï¼šå¦‚å‰æ‰€è¿°ï¼ŒJDK6 å’Œ JDK7+ çš„è¡Œä¸ºä¸åŒï¼Œå¦‚æœä»£ç éœ€è¦è·¨ç‰ˆæœ¬è¿è¡Œï¼Œéœ€è°¨æ…æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒä¼˜å‚æ•°&lt;/strong&gt;ï¼šåœ¨ JDK7+ ä¸­ï¼Œå¯ä»¥é€šè¿‡ JVM å‚æ•° &lt;code&gt;-XX:StringTableSize=&lt;/code&gt;æ¥è®¾ç½®å¸¸é‡æ± ï¼ˆStringTableï¼‰çš„æ¡¶ï¼ˆBucketï¼‰æ•°é‡ã€‚å¢å¤§æ­¤å€¼æœ‰åŠ©äºå‡å°‘å“ˆå¸Œå†²çªï¼Œæå‡ &lt;code&gt;intern()&lt;/code&gt;æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-äº”å®æˆ˜ç¤ºä¾‹ä¸æ•ˆæœ"&gt;ğŸ’¡ äº”ã€å®æˆ˜ç¤ºä¾‹ä¸æ•ˆæœ
&lt;/h3&gt;&lt;p&gt;æ¥çœ‹ä¸€ä¸ªä»£ç ç¤ºä¾‹ï¼Œç›´è§‚æ„Ÿå— &lt;code&gt;intern()&lt;/code&gt;çš„æ•ˆæœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String s1 = new String(&amp;#34;abc&amp;#34;); // åœ¨å †ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå¸¸é‡æ± å·²æœ‰&amp;#34;abc&amp;#34;ï¼ˆå› å­—é¢é‡ï¼‰
String s2 = &amp;#34;abc&amp;#34;; // ç›´æ¥ä½¿ç”¨å¸¸é‡æ± ä¸­çš„å¼•ç”¨
String s3 = new String(&amp;#34;abc&amp;#34;); // åˆåœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
String s4 = s3.intern(); // å°†s3çš„å¼•ç”¨ï¼ˆJDK7+ï¼‰æˆ–å¸¸é‡æ± å‰¯æœ¬çš„å¼•ç”¨ï¼ˆJDK6-ï¼‰è¿”å›
System.out.println(s1 == s2); // false, s1æ˜¯å †ä¸­æ–°å¯¹è±¡ï¼Œs2æ˜¯å¸¸é‡æ± å¼•ç”¨
System.out.println(s2 == s4); // true, intern()åéƒ½æŒ‡å‘å¸¸é‡æ± åŒä¸€å¼•ç”¨
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å†…å­˜èŠ‚çœæ•ˆæœ&lt;/strong&gt;ï¼šä¸€ä¸ªæç«¯ä½†èƒ½è¯´æ˜é—®é¢˜çš„æµ‹è¯•æ˜¯ï¼Œåˆ›å»ºå¤§é‡å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚ä¸ä½¿ç”¨ &lt;code&gt;intern()&lt;/code&gt;ä¼šäº§ç”Ÿæµ·é‡å¯¹è±¡ï¼›è€Œä½¿ç”¨ &lt;code&gt;intern()&lt;/code&gt;åï¼Œå†…å­˜ä¸­é€šå¸¸åªå­˜åœ¨ä¸€ä»½è¯¥å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå†…å­˜å ç”¨å·®å¼‚å·¨å¤§ã€‚&lt;/p&gt;
&lt;h3 id="-å…­æœ€ä½³å®è·µå»ºè®®"&gt;ğŸ“ å…­ã€æœ€ä½³å®è·µå»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æƒè¡¡ä½¿ç”¨&lt;/strong&gt;ï¼šä¸è¦ç›²ç›®ä½¿ç”¨ &lt;code&gt;intern()&lt;/code&gt;ã€‚æ˜ç¡®å…¶é€‚ç”¨äº&lt;strong&gt;æœ‰é™ã€é¢„çŸ¥ã€é‡å¤åº¦é«˜&lt;/strong&gt;çš„å­—ç¬¦ä¸²é›†åˆï¼ˆå¦‚æšä¸¾å€¼ã€é…ç½®é”®ã€å›ºå®šçŠ¶æ€ç ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆç”¨äºèŠ‚çœå†…å­˜&lt;/strong&gt;ï¼šå…¶ä¸»è¦ä»·å€¼åœ¨äºå¤„ç†&lt;strong&gt;å¤§é‡é‡å¤æ•°æ®&lt;/strong&gt;æ—¶èŠ‚çœå†…å­˜ï¼Œè€Œéå•çº¯ä¸ºäº†ç”¨ &lt;code&gt;==&lt;/code&gt;æ¯”è¾ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ä¸è°ƒä¼˜&lt;/strong&gt;ï¼šåœ¨é«˜æ€§èƒ½åº”ç”¨ä¸­ï¼Œå¦‚æœç¡®å®éœ€è¦å¤§é‡ä½¿ç”¨ &lt;code&gt;intern()&lt;/code&gt;ï¼Œè®°å¾—ä½¿ç”¨ &lt;code&gt;-XX:StringTableSize&lt;/code&gt;è°ƒæ•´æ± å¤§å°ï¼Œå¹¶å¯é€šè¿‡ &lt;code&gt;-XX:+PrintStringTableStatistics&lt;/code&gt;åœ¨ JVM é€€å‡ºæ—¶æ‰“å°ç»Ÿè®¡ä¿¡æ¯æ¥ç›‘æ§æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ &lt;code&gt;String.intern()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id="java-æ•°ç»„"&gt;java æ•°ç»„
&lt;/h2&gt;&lt;p&gt;Java ä¸­çš„æ•°ç»„æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒç¡®å®ç»§æ‰¿è‡ª &lt;code&gt;Object&lt;/code&gt;ç±»ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¿«é€Ÿäº†è§£æ•°ç»„ä½œä¸ºå¯¹è±¡çš„æ ¸å¿ƒç‰¹å¾å’Œç‰¹æ®Šä¹‹å¤„ï¼Œç„¶åå†è¿›è¡Œè¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;å…·ä½“è¡¨ç°&lt;/th&gt;
&lt;th&gt;è¯´æ˜æˆ–ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»§æ‰¿å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰æ•°ç»„ç±»å‹éšå¼ç»§æ‰¿ &lt;code&gt;java.lang.Object&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] intArray = new int[5]; System.out.println(intArray instanceof Object); // è¾“å‡º true&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œä¸ºObjectå¼•ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°ç»„å¯èµ‹å€¼ç»™ &lt;code&gt;Object&lt;/code&gt;ç±»å‹å˜é‡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Object obj = new String[]{&amp;quot;Hello&amp;quot;, &amp;quot;World&amp;quot;};&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨Objectæ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯è°ƒç”¨ &lt;code&gt;Object&lt;/code&gt;ç±»çš„æ–¹æ³•ï¼Œå¦‚ &lt;code&gt;toString()&lt;/code&gt;, &lt;code&gt;hashCode()&lt;/code&gt;, &lt;code&gt;clone()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] original = {1, 2, 3}; int[] cloned = original.clone();&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‹¥æœ‰å¯¹è±¡ç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èµ‹å€¼ç»™å¼•ç”¨å˜é‡ã€ä½œä¸ºå‚æ•°ä¼ é€’ã€å­˜å‚¨åœ¨é›†åˆä¸­&lt;/td&gt;
&lt;td&gt;&lt;code&gt;List&amp;lt;Object&amp;gt; list = new ArrayList&amp;lt;&amp;gt;(); list.add(new int[]{1, 2, 3}); // æ·»åŠ ä¸€ä¸ªintæ•°ç»„&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‰¹æ®Šæ€§ï¼šåˆ›å»ºè¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;new&lt;/code&gt;å…³é”®å­—åˆ›å»ºï¼Œæœ‰ç‰¹æ®Šè¯­æ³•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] arr = new int[10]; // å¸¸è§„è¯­æ³•``int[] arr2 = {1, 2, 3}; // ç®€åŒ–åˆå§‹åŒ–è¯­æ³•&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‰¹æ®Šæ€§ï¼šç±»å‹ç³»ç»Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°ç»„ç±»å‹æ˜¯&lt;strong&gt;åå˜&lt;/strong&gt;çš„&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Object[] objArray = new String[10]; // åˆæ³•``objArray[0] = &amp;quot;Hello&amp;quot;; // åˆæ³•``// objArray[1] = new Integer(10); // è¿è¡Œæ—¶æŠ›å‡º ArrayStoreException&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç‰¹æ®Šæ€§ï¼šç±»å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°ç»„ç±»çš„åç§°ç”±å…ƒç´ ç±»å‹å’Œç»´åº¦å†³å®š&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] intArray = new int[10]; System.out.println(intArray.getClass().getName()); // è¾“å‡º [I&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;equalsæ–¹æ³•è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥ç»§æ‰¿è‡ª &lt;code&gt;Object&lt;/code&gt;ï¼Œæ¯”è¾ƒçš„æ˜¯&lt;strong&gt;å¼•ç”¨&lt;/strong&gt;è€Œé&lt;strong&gt;å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] arr1 = {1, 2, 3}; int[] arr2 = {1, 2, 3}; System.out.println(arr1.equals(arr2)); // è¾“å‡º false&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å †ä¸­åˆ†é…ï¼ŒåŒ…å«å¯¹è±¡å¤´ã€é•¿åº¦å­—æ®µã€å…ƒç´ å­˜å‚¨åŒº&lt;/td&gt;
&lt;td&gt;æ•°ç»„é•¿åº¦é€šè¿‡ &lt;code&gt;length&lt;/code&gt;&lt;strong&gt;å­—æ®µ&lt;/strong&gt;ï¼ˆéæ–¹æ³•ï¼‰è·å–ï¼Œå¦‚ &lt;code&gt;arr.length&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ•°ç»„ç»§æ‰¿-object-çš„ä½“ç°ä¸ç»†èŠ‚"&gt;ğŸ” æ•°ç»„ç»§æ‰¿ Object çš„ä½“ç°ä¸ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;è™½ç„¶æ•°ç»„çš„åˆ›å»ºè¯­æ³•ï¼ˆå¦‚ &lt;code&gt;int[] arr = {1, 2, 3};&lt;/code&gt;ï¼‰çœ‹èµ·æ¥ä¸æ™®é€šå¯¹è±¡ä¸åŒï¼Œä½†å…¶åº•å±‚å®ç°å®Œå…¨éµå¾ª Java å¯¹è±¡çš„å†…å­˜æ¨¡å‹å’Œè§„åˆ™ï¼Œåœ¨å †å†…å­˜ä¸­åˆ†é…ç©ºé—´ã€‚æ­£å› ä¸ºæ•°ç»„æ˜¯å¯¹è±¡ï¼Œç»§æ‰¿è‡ª &lt;code&gt;Object&lt;/code&gt;ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«èµ‹å€¼ç»™ &lt;code&gt;Object&lt;/code&gt;ç±»å‹çš„å¼•ç”¨ï¼Œè¿™ä¹Ÿæ˜¯Javaä¸­å¤šæ€çš„ä¸€ç§ä½“ç°ã€‚ä½ å¯ä»¥å°†ä»»ä½•æ•°ç»„ï¼ˆæ— è®ºæ˜¯åŸºæœ¬ç±»å‹æ•°ç»„è¿˜æ˜¯å¼•ç”¨ç±»å‹æ•°ç»„ï¼‰èµ‹ç»™ä¸€ä¸ª &lt;code&gt;Object&lt;/code&gt;ç±»å‹çš„å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ•°ç»„ç»§æ‰¿äº† &lt;code&gt;Object&lt;/code&gt;ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œä½†ä¹Ÿå› æ­¤éœ€è¦æ³¨æ„ä¸€äº›æ–¹æ³•çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ç›´æ¥ä½¿ç”¨ä» &lt;code&gt;Object&lt;/code&gt;ç»§æ‰¿æ¥çš„ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•æ¯”è¾ƒçš„æ˜¯å¼•ç”¨åœ°å€è€Œä¸æ˜¯æ•°ç»„å†…å®¹ã€‚è¦æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œåº”ä½¿ç”¨ &lt;code&gt;Arrays.equals()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-æ•°ç»„çš„ç‰¹æ®Šæ€§"&gt;âš ï¸ æ•°ç»„çš„ç‰¹æ®Šæ€§
&lt;/h3&gt;&lt;p&gt;å°½ç®¡æ•°ç»„æ˜¯å¯¹è±¡ï¼Œä½†å®ƒæœ‰ä¸€äº›ç‹¬ç‰¹ä¹‹å¤„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åå˜æ€§&lt;/strong&gt;ï¼šå¦‚æœç±» &lt;code&gt;A&lt;/code&gt;æ˜¯ç±» &lt;code&gt;B&lt;/code&gt;çš„çˆ¶ç±»ï¼Œé‚£ä¹ˆ &lt;code&gt;A[]&lt;/code&gt;ä¹Ÿæ˜¯ &lt;code&gt;B[]&lt;/code&gt;çš„çˆ¶ç±»ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å°† &lt;code&gt;String[]&lt;/code&gt;èµ‹å€¼ç»™ &lt;code&gt;Object[]&lt;/code&gt;ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶å¯¼è‡´ &lt;code&gt;ArrayStoreException&lt;/code&gt;ï¼Œå¦‚æœä½ è¯•å›¾å°†ä¸å…¼å®¹ç±»å‹çš„å…ƒç´ å­˜å…¥æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›ºå®šé•¿åº¦ä¸åŠŸèƒ½é™åˆ¶&lt;/strong&gt;ï¼šæ•°ç»„ä¸€æ—¦åˆ›å»ºï¼Œå…¶é•¿åº¦å°±å›ºå®šäº†ã€‚å®ƒæ²¡æœ‰åƒ &lt;code&gt;ArrayList&lt;/code&gt;é‚£æ ·çš„ &lt;code&gt;add()&lt;/code&gt;æˆ– &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•ï¼Œå› æ­¤åœ¨éœ€è¦åŠ¨æ€å¢é•¿æˆ–ç¼©å‡æ—¶ï¼Œæ•°ç»„ä¸å¦‚é›†åˆæ¡†æ¶çµæ´»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•æ£€æŸ¥æ•°ç»„ç±»å‹"&gt;ğŸ’¡ å¦‚ä½•æ£€æŸ¥æ•°ç»„ç±»å‹
&lt;/h3&gt;&lt;p&gt;ç”±äºæ•°ç»„å¯ä»¥ä½œä¸º &lt;code&gt;Object&lt;/code&gt;å¤„ç†ï¼Œåœ¨ä½¿ç”¨å¤šæ€æ—¶ï¼Œæœ‰æ—¶éœ€è¦æ£€æŸ¥ä¸€ä¸ª &lt;code&gt;Object&lt;/code&gt;å¼•ç”¨æ˜¯å¦å®é™…æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œä»¥åŠæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°ç»„ã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;Class&lt;/code&gt;ç±»çš„ &lt;code&gt;isArray()&lt;/code&gt;æ–¹æ³•å’Œ &lt;code&gt;getComponentType()&lt;/code&gt;æ–¹æ³•æ¥å®ç°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public static void printArrayInfo(Object array) {
if (array.getClass().isArray()) {
System.out.println(&amp;#34;Array type: &amp;#34; + array.getClass().getComponentType()); // è·å–æ•°ç»„ç»„ä»¶ç±»å‹
System.out.println(&amp;#34;Array length: &amp;#34; + java.lang.reflect.Array.getLength(array));
} else {
System.out.println(&amp;#34;Not an array&amp;#34;);
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;Java ä¸­çš„æ•°ç»„æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒä»¬éšå¼ç»§æ‰¿è‡ª &lt;code&gt;Object&lt;/code&gt;ç±»ã€‚è¿™ä½¿å¾—æ•°ç»„å¯ä»¥äº«å—å¯¹è±¡çš„ä¸€åˆ‡åŸºæœ¬ç‰¹æ€§ï¼Œå¦‚å¯è¢«èµ‹å€¼ç»™ &lt;code&gt;Object&lt;/code&gt;å¼•ç”¨ã€å¯ä½œä¸ºå‚æ•°ä¼ é€’ã€å¯è°ƒç”¨ &lt;code&gt;Object&lt;/code&gt;çš„æ–¹æ³•ç­‰ã€‚ä½†åŒæ—¶ï¼Œæ•°ç»„ä¹Ÿæ‹¥æœ‰å…¶ç‰¹æ®Šæ€§ï¼Œå¦‚åå˜çš„ç±»å‹ç³»ç»Ÿã€å›ºå®šçš„é•¿åº¦ã€ç‹¬ç‰¹çš„åˆ›å»ºè¯­æ³•å’Œç±»åè¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£æ•°ç»„çš„å¯¹è±¡æœ¬è´¨åŠå…¶ä¸ &lt;code&gt;Object&lt;/code&gt;ç±»çš„ç»§æ‰¿å…³ç³»ï¼Œæœ‰åŠ©äºä½ æ›´å¥½åœ°ç†è§£ Java çš„ç±»å‹ç³»ç»Ÿï¼Œå¹¶åœ¨å®é™…ç¼–ç¨‹ä¸­åšå‡ºæ›´åˆé€‚çš„é€‰æ‹©ï¼ˆæ¯”å¦‚ä½•æ—¶ä½¿ç”¨æ•°ç»„ï¼Œä½•æ—¶ä½¿ç”¨é›†åˆï¼‰ã€‚&lt;/p&gt;
&lt;h2 id="hashmap-éå†ä¿®æ”¹"&gt;HashMap éå†ä¿®æ”¹
&lt;/h2&gt;&lt;p&gt;Java çš„ &lt;code&gt;HashMap&lt;/code&gt;åœ¨éå†è¿‡ç¨‹ä¸­ç›´æ¥ä¿®æ”¹å…¶ç»“æ„ï¼ˆä¾‹å¦‚æ·»åŠ ã€åˆ é™¤å…ƒç´ ï¼‰ä¼šæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;å¼‚å¸¸ï¼Œè¿™ä¸»è¦æ˜¯ç”±äºå…¶å†…éƒ¨è®¾è®¡çš„ &lt;strong&gt;fail-fastï¼ˆå¿«é€Ÿå¤±è´¥ï¼‰æœºåˆ¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¹æœ¬åŸå› fail-fast-æœºåˆ¶"&gt;âš ï¸ æ ¹æœ¬åŸå› ï¼šfail-fast æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;HashMap&lt;/code&gt;ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ã€‚å®ƒçš„è¿­ä»£å™¨å®ç°äº† fail-fast æœºåˆ¶ï¼Œæ—¨åœ¨å°½å¯èƒ½æ—©åœ°å‘ç°å¹¶å‘ä¿®æ”¹è¿™ç±»æ½œåœ¨é—®é¢˜ï¼Œä»è€Œé¿å…æ•°æ®ä¸ä¸€è‡´ç­‰æ›´éš¾ä»¥è°ƒè¯•çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ ¸å¿ƒå·¥ä½œåŸç†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;HashMap&lt;/code&gt;å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª &lt;code&gt;modCount&lt;/code&gt;ï¼ˆä¿®æ”¹æ¬¡æ•°è®¡æ•°å™¨ï¼‰å˜é‡ã€‚ä»»ä½•ä¼šæ”¹å˜é›†åˆç»“æ„çš„æ“ä½œï¼ˆå¦‚ &lt;code&gt;put&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt;, &lt;code&gt;clear&lt;/code&gt;ï¼‰éƒ½ä¼šä½¿ &lt;code&gt;modCount&lt;/code&gt;å¢åŠ ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ è·å–ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆæ— è®ºæ˜¯ç›´æ¥é€šè¿‡ &lt;code&gt;iterator()&lt;/code&gt;æ–¹æ³•ï¼Œè¿˜æ˜¯éšå¼åœ°é€šè¿‡å¢å¼º for å¾ªç¯ï¼‰æ—¶ï¼Œè¿­ä»£å™¨ä¼šè®°å½•ä¸‹å½“å‰ &lt;code&gt;HashMap&lt;/code&gt;çš„ &lt;code&gt;modCount&lt;/code&gt;å€¼ï¼Œå­˜ä¸º &lt;code&gt;expectedModCount&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¿­ä»£å™¨éå†çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä¾‹å¦‚è°ƒç”¨ &lt;code&gt;next()&lt;/code&gt;æ–¹æ³•æ—¶ï¼‰ï¼Œå®ƒéƒ½ä¼šæ£€æŸ¥ &lt;code&gt;modCount == expectedModCount&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€æ—¦å‘ç°ä¸¤è€…ä¸ç›¸ç­‰&lt;/strong&gt;ï¼Œå°±æ„å‘³ç€ &lt;code&gt;HashMap&lt;/code&gt;çš„ç»“æ„åœ¨è¿­ä»£å¼€å§‹åè¢«å¤–éƒ¨æ–¹æ³•ä¿®æ”¹äº†ï¼ˆæ—¢ä¸æ˜¯é€šè¿‡è¿­ä»£å™¨è‡ªèº«çš„ &lt;code&gt;remove&lt;/code&gt;æ–¹æ³•ï¼‰ï¼Œè¿­ä»£å™¨ä¾¿ä¼šç«‹å³æŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ï¼Œè€Œä¸æ˜¯ç­‰åˆ°éå†ç»“æŸï¼Œä»è€Œé¿å…äº†å¯èƒ½å‘ç”Ÿçš„ä¸å¯é¢„çŸ¥çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é”™è¯¯ç¤ºä¾‹"&gt;ğŸ” é”™è¯¯ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯åœ¨éå†æ—¶ç›´æ¥åˆ é™¤å…ƒç´ ä¼šå¼•å‘å¼‚å¸¸çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;HashMap&amp;lt;String, Integer&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
map.put(&amp;#34;A&amp;#34;, 1);
map.put(&amp;#34;B&amp;#34;, 2);
map.put(&amp;#34;C&amp;#34;, 3);
// å¢å¼º for å¾ªç¯åº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨è¿­ä»£å™¨
for (String key : map.keySet()) {
if (&amp;#34;B&amp;#34;.equals(key)) {
map.remove(key); // è¿™é‡Œä¼šæŠ›å‡º ConcurrentModificationException
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å®‰å…¨çš„ä¿®æ”¹æ–¹å¼"&gt;âœ… å®‰å…¨çš„ä¿®æ”¹æ–¹å¼
&lt;/h3&gt;&lt;p&gt;è‹¥éœ€åœ¨éå†æ—¶ä¿®æ”¹ &lt;code&gt;HashMap&lt;/code&gt;ï¼ˆç‰¹åˆ«æ˜¯åˆ é™¤å…ƒç´ ï¼‰ï¼Œåº”ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨è¿­ä»£å™¨è‡ªèº«çš„ &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯&lt;strong&gt;æ ‡å‡†ä¸”æ¨è&lt;/strong&gt;çš„åšæ³•ã€‚è¿­ä»£å™¨çš„ &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•ä¼šåœ¨åˆ é™¤å½“å‰å…ƒç´ åï¼ŒåŒæ­¥æ›´æ–°å…¶å†…éƒ¨çš„ &lt;code&gt;expectedModCount&lt;/code&gt;ï¼Œä»è€Œé¿å…æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Iterator&amp;lt;Map.Entry&amp;lt;String, Integer&amp;gt;&amp;gt; iterator = map.entrySet().iterator();
while (iterator.hasNext()) {
Map.Entry&amp;lt;String, Integer&amp;gt; entry = iterator.next();
if (&amp;#34;B&amp;#34;.equals(entry.getKey())) {
iterator.remove(); // å®‰å…¨åˆ é™¤
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Java 8+ çš„ &lt;code&gt;removeIf()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹å¼ä»£ç æ›´ç®€æ´ï¼Œé€‚ç”¨äºåŸºäºæ¡ä»¶çš„æ‰¹é‡åˆ é™¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;map.keySet().removeIf(key -&amp;gt; &amp;#34;B&amp;#34;.equals(key));
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éå†å‰åˆ›å»ºå‰¯æœ¬&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å…ˆåˆ›å»ºä¸€ä»½é›†åˆå‰¯æœ¬ï¼Œç„¶åéå†å‰¯æœ¬ï¼Œä¿®æ”¹åŸé›†åˆã€‚è¿™ç§æ–¹å¼ç®€å•ä½†å¯èƒ½å¸¦æ¥å†…å­˜å’Œæ€§èƒ½å¼€é”€ï¼Œéœ€æ ¹æ®æ•°æ®é‡æƒè¡¡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;for (String key : new ArrayList&amp;lt;&amp;gt;(map.keySet())) {
if (&amp;#34;B&amp;#34;.equals(key)) {
map.remove(key); // æ“ä½œåŸmapï¼Œä½†éå†çš„æ˜¯å‰¯æœ¬ï¼Œæ‰€ä»¥å®‰å…¨
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ³¨æ„äº‹é¡¹"&gt;ğŸ§µ å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å³ä½¿åœ¨å•çº¿ç¨‹ä¸­é¿å…äº†ç»“æ„æ€§ä¿®æ”¹çš„é™·é˜±ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹åŒæ—¶éå†å’Œä¿®æ”¹ &lt;code&gt;HashMap&lt;/code&gt;ä¾ç„¶ä¼šå¯¼è‡´é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶çš„è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨å¹¶å‘é›†åˆç±»&lt;/strong&gt;ï¼šè¿™æ˜¯é¦–é€‰æ–¹æ¡ˆã€‚ä¾‹å¦‚ä½¿ç”¨ &lt;code&gt;ConcurrentHashMap&lt;/code&gt;ã€‚å®ƒçš„è¿­ä»£å™¨è®¾è®¡ä¸º &lt;strong&gt;weakly consistent&lt;/strong&gt;ï¼ˆå¼±ä¸€è‡´æ€§ï¼‰ï¼Œå…è®¸åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å®‰å…¨åœ°ä¿®æ”¹é›†åˆï¼ˆå°½ç®¡è¿­ä»£å™¨ä¸ä¸€å®šèƒ½åæ˜ æœ€æ–°çš„ä¿®æ”¹ï¼‰ï¼Œä¸ä¼šæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–éƒ¨åŠ é”&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;Collections.synchronizedMap&lt;/code&gt;æˆ–æ™®é€š &lt;code&gt;HashMap&lt;/code&gt;æ—¶ï¼Œ&lt;strong&gt;å¿…é¡»æ‰‹åŠ¨åŒæ­¥&lt;/strong&gt;ï¼ˆä½¿ç”¨ &lt;code&gt;synchronized&lt;/code&gt;å—æˆ–æ˜¾å¼é”ï¼‰æ¥ä¿æŠ¤æ•´ä¸ªéå†å’Œä¿®æ”¹æ“ä½œï¼Œä½†è¿™ä¼šå¯¹æ€§èƒ½æœ‰è¾ƒå¤§å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒè¦ç‚¹"&gt;ğŸ’ æ ¸å¿ƒè¦ç‚¹
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œåœ¨éå† &lt;code&gt;HashMap&lt;/code&gt;æ—¶ï¼Œ&lt;strong&gt;ä¸è¦ç›´æ¥ä½¿ç”¨ &lt;code&gt;HashMap&lt;/code&gt;æœ¬èº«çš„ &lt;code&gt;put&lt;/code&gt;ã€&lt;code&gt;remove&lt;/code&gt;ç­‰æ–¹æ³•è¿›è¡Œç»“æ„æ€§ä¿®æ”¹&lt;/strong&gt;ã€‚è€Œåº”ä½¿ç”¨&lt;strong&gt;è¿­ä»£å™¨è‡ªèº«çš„ &lt;code&gt;remove&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼Œæˆ–è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ConcurrentHashMap&lt;/code&gt;&lt;/strong&gt; æ¥å¤„ç†å¹¶å‘åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id="fast-fail--enumeration"&gt;fast-fail &amp;amp; Enumeration
&lt;/h2&gt;&lt;p&gt;HashMap çš„ &lt;code&gt;fail-fast&lt;/code&gt;è¿­ä»£å™¨å’Œ Hashtable çš„ &lt;code&gt;Enumeration&lt;/code&gt;è¿­ä»£å™¨åœ¨è®¾è®¡å’Œè¡Œä¸ºä¸Šæœ‰æ˜¾è‘—åŒºåˆ«ï¼Œè¿™ä¸»è¦æºäºå®ƒä»¬å„è‡ªé›†åˆç±»çš„çº¿ç¨‹å®‰å…¨ç‰¹æ€§ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ã€å·¥ä½œåŸç†å’Œä½¿ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;HashMap çš„ Iterator (fail-fast)&lt;/th&gt;
&lt;th&gt;Hashtable çš„ Enumeration&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡æ—¶ä»£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Java 1.2 å¼•å…¥ï¼ˆè¾ƒæ–°ï¼‰&lt;/td&gt;
&lt;td&gt;Java 1.0 å¼•å…¥ï¼ˆè¾ƒæ—§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤±è´¥è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿«é€Ÿå¤±è´¥ (fail-fast)&lt;/strong&gt;ï¼šæ£€æµ‹åˆ°å¹¶å‘ä¿®æ”¹ç«‹å³æŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éå¿«é€Ÿå¤±è´¥&lt;/strong&gt;ï¼šå³ä½¿è¿­ä»£è¿‡ç¨‹ä¸­ç»“æ„è¢«ä¿®æ”¹ï¼Œä¹Ÿå¯èƒ½ç»§ç»­è¿­ä»£ï¼ˆä½†ç»“æœä¸ç¡®å®šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ä¿è¯è¿­ä»£è¿‡ç¨‹ä¸­çš„çº¿ç¨‹å®‰å…¨&lt;/td&gt;
&lt;td&gt;è¿­ä»£æœ¬èº«éçº¿ç¨‹å®‰å…¨ï¼Œä½†å›  Hashtable æ–¹æ³•åŒæ­¥ï¼Œä¸€å®šç¨‹åº¦å‡å°‘é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç§»é™¤æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒ&lt;/strong&gt; é€šè¿‡ &lt;code&gt;Iterator.remove()&lt;/code&gt;å®‰å…¨åœ°ç§»é™¤å½“å‰å…ƒç´ &lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ”¯æŒ&lt;/strong&gt; æ²¡æœ‰å®šä¹‰ç§»é™¤å…ƒç´ çš„æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç°ä»£åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨èä½¿ç”¨&lt;/strong&gt;ï¼ŒåŠŸèƒ½æ›´ä¸°å¯Œï¼Œä¸é›†åˆæ¡†æ¶é›†æˆæ›´ä½³&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬è¢«æ·˜æ±°&lt;/strong&gt;ï¼Œå¸¸è§äºé—ç•™ä»£ç &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä½œåŸç†æ·±åº¦è§£æ"&gt;ğŸ” å·¥ä½œåŸç†æ·±åº¦è§£æ
&lt;/h3&gt;&lt;h4 id="hashmap-çš„-fail-fast-è¿­ä»£å™¨"&gt;&lt;strong&gt;HashMap çš„ Fail-Fast è¿­ä»£å™¨&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Fail-fast æœºåˆ¶æ˜¯ä¸€ç§&lt;strong&gt;é”™è¯¯æ£€æµ‹æœºåˆ¶&lt;/strong&gt;ï¼Œæ—¨åœ¨å°½æ—©æš´éœ²å¹¶å‘ä¿®æ”¹é—®é¢˜ï¼Œè€Œä¸æ˜¯ä»»ç”±ç¨‹åºåœ¨ä¸ç¡®å®šçŠ¶æ€ä¸‹è¿è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°åŸç†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;HashMap å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª &lt;code&gt;modCount&lt;/code&gt;ï¼ˆä¿®æ”¹è®¡æ•°å™¨ï¼‰å­—æ®µã€‚ä»»ä½•ä¼šæ”¹å˜é›†åˆç»“æ„çš„æ“ä½œï¼ˆå¦‚ &lt;code&gt;put&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt;, &lt;code&gt;clear&lt;/code&gt;ï¼‰éƒ½ä¼šä½¿ &lt;code&gt;modCount&lt;/code&gt;å¢åŠ ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ è°ƒç”¨ &lt;code&gt;hashMap.iterator()&lt;/code&gt;è·å–è¿­ä»£å™¨æ—¶ï¼Œè¿­ä»£å™¨ä¼šè®°å½•ä¸‹å½“å‰çš„ &lt;code&gt;modCount&lt;/code&gt;å€¼ï¼ˆ&lt;code&gt;expectedModCount&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¯æ¬¡è¿­ä»£æ“ä½œï¼ˆå¦‚ &lt;code&gt;next()&lt;/code&gt;ï¼‰æ—¶ï¼Œè¿­ä»£å™¨éƒ½ä¼šæ£€æŸ¥ &lt;code&gt;modCount == expectedModCount&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸€æ—¦å‘ç°ä¸¤è€…ä¸ç›¸ç­‰&lt;/strong&gt;ï¼Œå°±æ„å‘³ç€ HashMap åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è¢«å…¶ä»–çº¿ç¨‹æˆ–æœ¬çº¿ç¨‹çš„å…¶ä»–æ“ä½œä¿®æ”¹äº†ç»“æ„ï¼Œè¿­ä»£å™¨ä¾¿ä¼šç«‹å³æŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å¿«é€Ÿå¤±è´¥æ˜¯ä¸ºäº†é¿å…å› å¹¶å‘ä¿®æ”¹è€Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´æˆ–éš¾ä»¥è¿½è¸ªçš„é”™è¯¯ã€‚å®ƒå‡è®¾**â€œå°½æ—©æš´éœ²é”™è¯¯æ€»æ¯”ä»¥ååœ¨ä¸ç¡®å®šçš„åœ°æ–¹å´©æºƒè¦å¥½â€**ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;æ­¤æœºåˆ¶æ— æ³•ä¿è¯ç»å¯¹çš„çº¿ç¨‹å®‰å…¨ï¼Œå®ƒæ›´å¤šåœ°æ˜¯ä¸€ç§â€œå°½åŠ›è€Œä¸ºâ€çš„æ£€æµ‹ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿­ä»£å™¨è‡ªèº«çš„ &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•ç§»é™¤å…ƒç´ æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºè¯¥æ–¹æ³•ä¼šåœ¨æ“ä½œåæ›´æ–° &lt;code&gt;expectedModCount&lt;/code&gt;ï¼Œä½¿å…¶ä¸ &lt;code&gt;modCount&lt;/code&gt;ä¿æŒä¸€è‡´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="hashtable-çš„-enumeration-è¿­ä»£å™¨"&gt;&lt;strong&gt;Hashtable çš„ Enumeration è¿­ä»£å™¨&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Enumeration æ˜¯ Java æ—©æœŸçš„è¿­ä»£æ¥å£ï¼Œè®¾è®¡ç›¸å¯¹ç®€å•ï¼Œä¸å…·å¤‡ fail-fast ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°åŸç†&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒçš„æ‰€æœ‰å…¬å…±æ–¹æ³•ï¼ˆåŒ…æ‹¬ &lt;code&gt;elements()&lt;/code&gt;å’Œ &lt;code&gt;keys()&lt;/code&gt;è¿™äº›è¿”å› Enumeration çš„æ–¹æ³•ï¼‰éƒ½æ˜¯ &lt;code&gt;synchronized&lt;/code&gt;çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œ&lt;strong&gt;Enumeration æœ¬èº«å¹¶ä¸æ„ŸçŸ¥æˆ–è·Ÿè¸ª Hashtable çš„ç»“æ„æ€§ä¿®æ”¹&lt;/strong&gt;ã€‚å®ƒåªæ˜¯åœ¨åˆ›å»ºæ—¶åŸºäºå½“æ—¶çš„é›†åˆçŠ¶æ€è¿›è¡Œéå†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº† Hashtableï¼ˆä¾‹å¦‚ç§»é™¤ä¸€ä¸ªå°šæœªè¢«è¿­ä»£åˆ°çš„å…ƒç´ ï¼‰ï¼ŒEnumeration &lt;strong&gt;ä¸ä¼š&lt;/strong&gt;æŠ›å‡ºå¼‚å¸¸ï¼Œä½†åç»­è¿­ä»£è¡Œä¸ºçš„ç»“æœå°†æ˜¯ä¸å¯é¢„æµ‹çš„ï¼ˆå¯èƒ½è·³è¿‡å…ƒç´ ã€è¿”å› &lt;code&gt;null&lt;/code&gt;æˆ–å‡ºç°å…¶ä»–å¼‚å¸¸ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾è®¡å“²å­¦&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ Hashtable è®¾è®¡çš„å¹´ä»£ï¼Œå¹¶å‘æ¨¡å‹å’Œé”™è¯¯å¤„ç†ç†å¿µä¸ç°åœ¨ä¸åŒã€‚å…¶çº¿ç¨‹å®‰å…¨é€šè¿‡æ–¹æ³•åŒæ­¥æ¥ä¿è¯ï¼Œä½†è¿­ä»£å™¨çš„è¡Œä¸ºæ›´â€œè„†å¼±â€ï¼Œä¾èµ–äºå¤–éƒ¨åŒæ­¥æ¥é¿å…é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¹¶å‘ä¿®æ”¹çš„å¯¹æ¯”"&gt;âš ï¸ å¹¶å‘ä¿®æ”¹çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è¿›è¡Œç»“æ„æ€§ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;HashMap (Fail-Fast)&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;HashMap&amp;lt;String, Integer&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
map.put(&amp;#34;A&amp;#34;, 1);
map.put(&amp;#34;B&amp;#34;, 2);
Iterator&amp;lt;String&amp;gt; it = map.keySet().iterator();
while (it.hasNext()) {
String key = it.next();
if (&amp;#34;A&amp;#34;.equals(key)) {
map.remove(key); // ç›´æ¥ä½¿ç”¨mapçš„removeæ–¹æ³•ï¼Œä¼šæŠ›å‡ºConcurrentModificationException
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Hashtable (Non-Fail-Fast)&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Hashtable&amp;lt;String, Integer&amp;gt; table = new Hashtable&amp;lt;&amp;gt;();
table.put(&amp;#34;A&amp;#34;, 1);
table.put(&amp;#34;B&amp;#34;, 2);
Enumeration&amp;lt;String&amp;gt; keys = table.keys();
while (keys.hasMoreElements()) {
String key = keys.nextElement();
if (&amp;#34;A&amp;#34;.equals(key)) {
table.remove(key); // å¯èƒ½ä¸ä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œä½†åç»­è¡Œä¸ºæœªå®šä¹‰ï¼Œéå¸¸å±é™©
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é»˜è®¤ä½¿ç”¨ HashMap å’Œ Iterator&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨&lt;strong&gt;å•çº¿ç¨‹ç¯å¢ƒ&lt;/strong&gt;æˆ–&lt;strong&gt;å·²åšå¤–éƒ¨åŒæ­¥çš„å¤šçº¿ç¨‹ç¯å¢ƒ&lt;/strong&gt;ä¸­ï¼Œä¼˜å…ˆé€‰æ‹© &lt;code&gt;HashMap&lt;/code&gt;åŠå…¶ &lt;code&gt;Iterator&lt;/code&gt;ã€‚å®ƒçš„æ€§èƒ½æ›´å¥½ï¼ŒåŠŸèƒ½æ›´ç°ä»£ï¼Œå¹¶ä¸” fail-fast æœºåˆ¶èƒ½å¸®ä½ å¿«é€Ÿå‘ç°ç¼–ç é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éœ€è¦çº¿ç¨‹å®‰å…¨æ—¶ä½¿ç”¨ ConcurrentHashMap&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨&lt;strong&gt;å¤šçº¿ç¨‹ç¯å¢ƒ&lt;/strong&gt;ä¸­éœ€è¦é¢‘ç¹çš„è¿­ä»£æ“ä½œï¼Œ&lt;strong&gt;ç»å¯¹ä¸è¦&lt;/strong&gt;ä½¿ç”¨ Hashtable çš„ Enumerationã€‚å®ƒçš„è¡Œä¸ºä¸å¯é ã€‚&lt;/p&gt;
&lt;p&gt;ç°ä»£ Java å¼€å‘ä¸­ï¼Œåº”é¦–é€‰ &lt;code&gt;ConcurrentHashMap&lt;/code&gt;ã€‚å®ƒçš„è¿­ä»£å™¨æ˜¯ &lt;strong&gt;weakly consistent&lt;/strong&gt;ï¼ˆå¼±ä¸€è‡´æ€§ï¼‰çš„ï¼Œå…è®¸åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å®‰å…¨åœ°ä¿®æ”¹é›†åˆï¼Œä¸ä¼šæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ï¼Œå¹¶èƒ½ä¿è¯éå†å·²å­˜åœ¨çš„å…ƒç´ ï¼ˆå°½ç®¡ä¸ä¸€å®šèƒ½åæ˜ è¿­ä»£åçš„æ‰€æœ‰ä¿®æ”¹ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†é—ç•™ä»£ç &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœå¿…é¡»ç»´æŠ¤ä½¿ç”¨ Hashtable å’Œ Enumeration çš„é—ç•™ç³»ç»Ÿï¼ŒåŠ¡å¿…æ¸…æ¥šå…¶é£é™©ã€‚è¿­ä»£ Hashtable æ—¶ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ï¼Œåº”åœ¨å¤–éƒ¨è¿›è¡ŒåŒæ­¥ï¼ˆä¾‹å¦‚ synchronized å—ï¼‰ï¼Œä½†è¦æ³¨æ„æ­»é”é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒæ€»ç»“"&gt;ğŸ’ æ ¸å¿ƒæ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç†è§£ &lt;code&gt;fail-fast&lt;/code&gt;å’Œ &lt;code&gt;Enumeration&lt;/code&gt;çš„åŒºåˆ«ï¼Œå…³é”®åœ¨äºç†è§£å®ƒä»¬èƒŒåä¸åŒçš„&lt;strong&gt;è®¾è®¡å“²å­¦å’Œæ—¶ä»£èƒŒæ™¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Fail-Fast (HashMap.Iterator)&lt;/strong&gt;ï¼šä¸€ç§ç§¯æçš„&lt;strong&gt;é”™è¯¯é¢„é˜²æœºåˆ¶&lt;/strong&gt;ï¼Œæ—¨åœ¨å¿«é€Ÿæš´éœ²é—®é¢˜ï¼Œé€‚åˆç°ä»£å¼€å‘ä¸­å¯¹å¥å£®æ€§å’Œå¯é¢„æµ‹æ€§çš„è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Non-Fail-Fast (Hashtable.Enumeration)&lt;/strong&gt;ï¼šä¸€ç§ç›¸å¯¹è¢«åŠ¨å’Œç®€å•çš„éå†æ–¹å¼ï¼Œå…¶è¡Œä¸ºåœ¨å¤šçº¿ç¨‹ä¸‹æ›´ä¸å¯æ§ï¼Œæ˜¯æ—©æœŸ Java ç‰ˆæœ¬çš„äº§ç‰©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨æ–°çš„å¼€å‘ä¸­ï¼Œä½ å‡ ä¹æ€»æ˜¯ä¼šä½¿ç”¨ &lt;code&gt;HashMap&lt;/code&gt;åŠå…¶ &lt;code&gt;Iterator&lt;/code&gt;ï¼Œå¹¶åœ¨éœ€è¦å¹¶å‘æ—¶é€‰æ‹© &lt;code&gt;ConcurrentHashMap&lt;/code&gt;ã€‚&lt;code&gt;Hashtable&lt;/code&gt;å’Œ &lt;code&gt;Enumeration&lt;/code&gt;æ›´å¤šæ˜¯ä½œä¸ºå†å²å­˜åœ¨ï¼Œéœ€è¦äº†è§£ä½†ä¸å¿…åœ¨æ–°é¡¹ç›®ä¸­ä¸»åŠ¨ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id="åŒ¿åå†…éƒ¨ç±»"&gt;åŒ¿åå†…éƒ¨ç±»
&lt;/h2&gt;&lt;p&gt;Java ä¸­çš„åŒ¿åå†…éƒ¨ç±»æ˜¯ä¸€ç§&lt;strong&gt;æ²¡æœ‰æ˜¾å¼åç§°&lt;/strong&gt;çš„å†…éƒ¨ç±»ï¼Œå®ƒå…è®¸ä½ åœ¨å®šä¹‰çš„åŒæ—¶ç›´æ¥åˆ›å»ºå®ä¾‹ï¼Œå¸¸ç”¨äºå®ç°æ¥å£æˆ–ç»§æ‰¿ç±»ï¼Œç‰¹åˆ«é€‚åˆé‚£äº›&lt;strong&gt;åªéœ€ä¸€æ¬¡æ€§ä½¿ç”¨&lt;/strong&gt;çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªæ±‡æ€»äº†å…¶æ ¸å¿ƒç‰¹æ€§çš„è¡¨æ ¼ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ¿åæ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ²¡æœ‰æ˜¾å¼çš„ç±»åï¼Œç›´æ¥é€šè¿‡ &lt;code&gt;new&lt;/code&gt;å…³é”®å­—åˆ›å»ºå®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°ä¸ç»§æ‰¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œæˆ–ç»§æ‰¿ä¸€ä¸ªç±»ï¼ˆå¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–å…·ä½“ç±»ï¼‰å¹¶å¯èƒ½é‡å†™å…¶æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€æ¬¡æ€§ä½¿ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ç”¨äºå®šä¹‰å³ç”¨ï¼Œæ— æ³•åœ¨å…¶ä»–åœ°æ–¹é‡å¤å®ä¾‹åŒ–æˆ–å¼•ç”¨å…¶ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®å¤–éƒ¨å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬ç§æœ‰æˆå‘˜ï¼‰ã€‚è®¿é—®çš„å±€éƒ¨å˜é‡å¿…é¡»æ˜¾å¼å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;æˆ–å®é™…ä¸Šæ˜¯ finalï¼ˆeffectively finalï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼–è¯‘åæ–‡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼–è¯‘åä¼šç”Ÿæˆåä¸º &lt;code&gt;å¤–éƒ¨ç±»å$æ•°å­—.class&lt;/code&gt;çš„ç‹¬ç«‹å­—èŠ‚ç æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ— æ˜¾å¼æ„é€ å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸èƒ½å®šä¹‰è‡ªå·±çš„æ„é€ å‡½æ•°ï¼ˆå› ä¸ºæ— ç±»åï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸èƒ½å®šä¹‰é™æ€æˆå‘˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸èƒ½åŒ…å«é™æ€æ–¹æ³•ã€é™æ€å˜é‡æˆ–é™æ€åˆå§‹åŒ–å—ï¼ˆé™æ€å¸¸é‡ &lt;code&gt;static final&lt;/code&gt;é™¤å¤–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•å½¢å¼"&gt;ğŸ“ è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;p&gt;åŒ¿åå†…éƒ¨ç±»çš„åŸºæœ¬è¯­æ³•å›´ç»• &lt;code&gt;new&lt;/code&gt;å…³é”®å­—å±•å¼€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°æ¥å£&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;æ¥å£å å¯¹è±¡å = new æ¥å£å() {
// å®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•æˆ–æ·»åŠ å…¶ä»–æˆå‘˜
@Override
public void æ–¹æ³•å() {
// æ–¹æ³•å®ç°
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»§æ‰¿ç±»&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;çˆ¶ç±»å å¯¹è±¡å = new çˆ¶ç±»å(æ„é€ å‚æ•°) { // å³ä½¿æ˜¯æ— å‚æ„é€ ï¼Œæ‹¬å·ä¹Ÿä¸èƒ½çœç•¥
// é‡å†™çˆ¶ç±»æ–¹æ³•æˆ–æ·»åŠ å…¶ä»–æˆå‘˜
@Override
public void æ–¹æ³•å() {
// æ–¹æ³•å®ç°
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦ç”¨é€”"&gt;ğŸ¯ ä¸»è¦ç”¨é€”
&lt;/h3&gt;&lt;p&gt;åŒ¿åå†…éƒ¨ç±»å¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹ä»¶ç›‘å¬å™¨&lt;/strong&gt;ï¼šåœ¨ GUI ç¼–ç¨‹ï¼ˆå¦‚ Swingã€JavaFXï¼‰ä¸­ä¸ºç»„ä»¶å¿«é€Ÿæ·»åŠ äº‹ä»¶å¤„ç†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;JButton button = new JButton(&amp;#34;Click Me&amp;#34;);
button.addActionListener(new ActionListener() { // ActionListeneræ˜¯ä¸€ä¸ªæ¥å£
@Override
public void actionPerformed(ActionEvent e) {
System.out.println(&amp;#34;Button clicked!&amp;#34;);
}
});
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çº¿ç¨‹åˆ›å»º&lt;/strong&gt;ï¼šå®ç° &lt;code&gt;Runnable&lt;/code&gt;æ¥å£æ¥å®šä¹‰çº¿ç¨‹ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Thread thread = new Thread(new Runnable() {
@Override
public void run() {
System.out.println(&amp;#34;Thread is running&amp;#34;);
}
});
thread.start();
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¯”è¾ƒå™¨&lt;/strong&gt;ï¼šä¸ºé›†åˆæ’åºæ—¶è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; names = Arrays.asList(&amp;#34;Alice&amp;#34;, &amp;#34;Bob&amp;#34;, &amp;#34;Charlie&amp;#34;);
Collections.sort(names, new Comparator&amp;lt;String&amp;gt;() {
@Override
public int compare(String s1, String s2) {
return s1.compareTo(s2);
}
});
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å›è°ƒæœºåˆ¶&lt;/strong&gt;ï¼šç”¨äºå®šä¹‰å¼‚æ­¥æ“ä½œå®Œæˆåçš„å›è°ƒé€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦é™åˆ¶"&gt;âš ï¸ é‡è¦é™åˆ¶
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ—¶éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åªèƒ½å®ç°ä¸€ä¸ªæ¥å£æˆ–ç»§æ‰¿ä¸€ä¸ªç±»&lt;/strong&gt;ï¼šä¸èƒ½åŒæ—¶å®ç°å¤šä¸ªæ¥å£æˆ–ç»§æ‰¿å¤šä¸ªç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•å®šä¹‰æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå› ä¸ºå®ƒæ²¡æœ‰åå­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æ€æˆå‘˜é™åˆ¶&lt;/strong&gt;ï¼šä¸èƒ½å®šä¹‰é™æ€æ–¹æ³•ã€é™æ€å˜é‡æˆ–é™æ€åˆå§‹åŒ–å—ï¼ˆé™æ€å¸¸é‡ &lt;code&gt;static final&lt;/code&gt;é™¤å¤–ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨å˜é‡è®¿é—®&lt;/strong&gt;ï¼šåŒ¿åå†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ˆåŒ…æ‹¬ç§æœ‰æˆå‘˜ï¼‰ã€‚è®¿é—®çš„å±€éƒ¨å˜é‡å¿…é¡»æ˜¾å¼å£°æ˜ä¸º &lt;code&gt;final&lt;/code&gt;æˆ–å®é™…ä¸Šæ˜¯ finalï¼ˆeffectively finalï¼Œå³åˆå§‹åŒ–åæœªå†èµ‹å€¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è¯»æ€§&lt;/strong&gt;ï¼šå¦‚æœåŒ¿åå†…éƒ¨ç±»ä¸­çš„é€»è¾‘è¿‡äºå¤æ‚ï¼Œå¯èƒ½ä¼šé™ä½ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸-lambda-è¡¨è¾¾å¼çš„å…³ç³»"&gt;ğŸ” ä¸ Lambda è¡¨è¾¾å¼çš„å…³ç³»
&lt;/h3&gt;&lt;p&gt;åœ¨ Java 8 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœåŒ¿åå†…éƒ¨ç±»&lt;strong&gt;å®ç°çš„æ˜¯å‡½æ•°å¼æ¥å£&lt;/strong&gt;ï¼ˆå³åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼‰ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨ &lt;strong&gt;Lambda è¡¨è¾¾å¼&lt;/strong&gt;æ¥ç®€åŒ–ï¼Œä½¿ä»£ç æ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¹‹å‰åˆ›å»ºçº¿ç¨‹çš„åŒ¿åå†…éƒ¨ç±»ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Runnable runnable = new Runnable() {
@Override
public void run() {
System.out.println(&amp;#34;Thread is running&amp;#34;);
}
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”¨ Lambda è¡¨è¾¾å¼é‡å†™ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Runnable runnable = () -&amp;gt; System.out.println(&amp;#34;Thread is running&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Lambda è¡¨è¾¾å¼å¹¶éåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½èƒ½æ›¿ä»£åŒ¿åå†…éƒ¨ç±»&lt;/strong&gt;ï¼Œä¾‹å¦‚å½“éœ€è¦ç»§æ‰¿ä¸€ä¸ªç±»ï¼ˆè€Œéå®ç°æ¥å£ï¼‰ã€éœ€è¦é‡å†™å¤šä¸ªæ–¹æ³•ï¼Œæˆ–æ“ä½œçš„æ¥å£ä¸æ˜¯å‡½æ•°å¼æ¥å£ï¼ˆæœ‰å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼‰æ—¶ï¼Œä»éœ€ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åŒ¿åå†…éƒ¨ç±»é€‚åˆåœ¨éœ€è¦&lt;strong&gt;å¿«é€Ÿå®ç°æŸä¸ªæ¥å£æˆ–ç»§æ‰¿æŸä¸ªç±»ï¼Œä¸”è¿™ä¸ªå®ç°åªéœ€ä½¿ç”¨ä¸€æ¬¡&lt;/strong&gt;çš„åœºæ™¯ã€‚å®ƒèƒ½å‡å°‘ä»£ç é‡ï¼Œé¿å…åˆ›å»ºå•ç‹¬çš„ç±»æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå¯¹äºå¤æ‚çš„é€»è¾‘ï¼Œæˆ–è€…éœ€è¦é‡å¤ä½¿ç”¨çš„å®ç°ï¼Œå®šä¹‰ä¸€ä¸ªç‹¬ç«‹çš„å…·åç±»é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚åœ¨ Java 8+ çš„ç¯å¢ƒä¸­ï¼Œå¯¹äºå‡½æ•°å¼æ¥å£ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ Lambda è¡¨è¾¾å¼ä¼šä½¿ä»£ç æ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;h2 id="ä»£ç "&gt;ä»£ç 
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Main&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Main&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;printNum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;printNum&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;printNum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ç¼–è¯‘é”™è¯¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŒ¿åå†…éƒ¨ç±»å¯ä»¥è®¿é—®çˆ¶ç±»ç§æœ‰å˜é‡ï¼Œä½†å› ä¸ºmainæ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¸èƒ½åœ¨é™æ€æ–¹æ³•ä¸­ä½¿ç”¨thisè°ƒç”¨ä¸Šä¸‹æ–‡&lt;/p&gt;
&lt;h2 id="java-èŒƒå‹"&gt;Java èŒƒå‹
&lt;/h2&gt;&lt;p&gt;Java æ³›å‹ä¸­çš„ &lt;strong&gt;ä¸å˜æ€§ (Invariance)&lt;/strong&gt; å’Œ &lt;strong&gt;åå˜ (Covariance)&lt;/strong&gt; æ˜¯ç†è§£å…¶ç±»å‹ç³»ç»Ÿçš„å…³é”®æ¦‚å¿µã€‚å®ƒä»¬å†³å®šäº†å…·æœ‰ç»§æ‰¿å…³ç³»çš„ç±»å‹ï¼Œå…¶æ³›å‹å®¹å™¨ä¹‹é—´æ˜¯å¦ä¹Ÿå­˜åœ¨æŸç§ç»§æ‰¿å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ä¸å˜æ€§ (Invariance)&lt;/th&gt;
&lt;th&gt;åå˜ (Covariance)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å³ä½¿ &lt;code&gt;Dog&lt;/code&gt;â‰¦ &lt;code&gt;Animal&lt;/code&gt;ï¼Œ&lt;code&gt;List&amp;lt;Dog&amp;gt;&lt;/code&gt;ä¸ &lt;code&gt;List&amp;lt;Animal&amp;gt;&lt;/code&gt;&lt;strong&gt;æ— ä»»ä½•ç»§æ‰¿å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœ &lt;code&gt;Dog&lt;/code&gt;â‰¦ &lt;code&gt;Animal&lt;/code&gt;ï¼Œé‚£ä¹ˆ &lt;code&gt;List&amp;lt;Dog&amp;gt;&lt;/code&gt;â‰¦ &lt;code&gt;List&amp;lt;Animal&amp;gt;&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;Generic&amp;lt;Dog&amp;gt;&lt;/code&gt;â‰¦ &lt;code&gt;Generic&amp;lt;Animal&amp;gt;&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Javaæ³›å‹é»˜è®¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°ç»„é»˜è®¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ å¦&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt; (ä½†è¿™æ˜¯Javaæ•°ç»„çš„ä¸€ä¸ªè®¾è®¡ç¼ºé™·ï¼Œå¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;List&amp;lt;Animal&amp;gt; animals = new ArrayList&amp;lt;Dog&amp;gt;();&lt;/code&gt;&lt;strong&gt;ç¼–è¯‘é”™è¯¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;List&amp;lt;? extends Animal&amp;gt; animals = new ArrayList&amp;lt;Dog&amp;gt;();&lt;/code&gt;&lt;strong&gt;ç¼–è¯‘é€šè¿‡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»å–å…ƒç´ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å®‰å…¨&lt;/strong&gt; (å¯è§†ä¸ºä¸Šç•Œç±»å‹ï¼Œå¦‚ &lt;code&gt;Animal&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ·»åŠ å…ƒç´ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸å®‰å…¨&lt;/strong&gt; (ç¼–è¯‘é”™è¯¯ã€‚ç¼–è¯‘å™¨æ— æ³•ç¡®å®šå®é™…ç±»å‹ï¼Œé˜²æ­¢æ±¡æŸ“é›†åˆ)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨&lt;/strong&gt;ï¼Œé¿å…è¿è¡Œæ—¶å‡ºç° &lt;code&gt;ClassCastException&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜APIçµæ´»æ€§&lt;/strong&gt;ï¼Œå…è®¸æ–¹æ³•æ¥å—æ›´å¹¿æ³›çš„å‚æ•°ç±»å‹ï¼ŒåŒæ—¶ä¿è¯&lt;strong&gt;å®‰å…¨çš„è¯»å–&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ·±å…¥è§£æä¸‰ç§å‹å˜"&gt;ğŸ“Š æ·±å…¥è§£æä¸‰ç§å‹å˜
&lt;/h3&gt;&lt;h4 id="1-ä¸å˜æ€§-invariance"&gt;1. ä¸å˜æ€§ (Invariance)
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ &lt;strong&gt;Java æ³›å‹çš„é»˜è®¤è¡Œä¸º&lt;/strong&gt;ã€‚å®ƒæ„å‘³ç€å³ä½¿ç±»å‹å‚æ•°ä¹‹é—´å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œæ³›å‹ç±»å‹æœ¬èº«ä¹Ÿæ²¡æœ‰ç»§æ‰¿å…³ç³»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; stringList = new ArrayList&amp;lt;&amp;gt;();
List&amp;lt;Object&amp;gt; objectList = stringList; // ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸å…¼å®¹
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šè¿™æ˜¯ä¸ºäº†&lt;strong&gt;ä¿è¯ç±»å‹å®‰å…¨&lt;/strong&gt;ã€‚å¦‚æœä¸Šè¿°èµ‹å€¼è¢«å…è®¸ï¼ˆå³å‡è®¾æ³›å‹æ˜¯åå˜çš„ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ &lt;code&gt;objectList&lt;/code&gt;å¾€åŸæœ¬åªåŒ…å« &lt;code&gt;String&lt;/code&gt;çš„ &lt;code&gt;stringList&lt;/code&gt;é‡Œæ·»åŠ ä¸€ä¸ª &lt;code&gt;Integer&lt;/code&gt;ï¼Œä»è€Œåœ¨åç»­è¯»å–æ—¶å¼•å‘è¿è¡Œæ—¶ &lt;code&gt;ClassCastException&lt;/code&gt;ã€‚é€šè¿‡ä¸å˜æ€§ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µå°±é˜»æ­¢äº†è¿™ç§å±é™©æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-åå˜-covariance"&gt;2. åå˜ (Covariance)
&lt;/h4&gt;&lt;p&gt;åå˜è¡¨ç¤ºæ³›å‹ç±»å‹çš„ç»§æ‰¿å…³ç³»ä¸ç±»å‹å‚æ•°çš„ç»§æ‰¿å…³ç³»&lt;strong&gt;ä¸€è‡´&lt;/strong&gt;ã€‚åœ¨ Java ä¸­ï¼Œéœ€è¦é€šè¿‡&lt;strong&gt;ä¸Šç•Œé€šé…ç¬¦ &lt;code&gt;&amp;lt;? extends T&amp;gt;&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;Integer&amp;gt; integerList = Arrays.asList(1, 2, 3);
List&amp;lt;? extends Number&amp;gt; numberList = integerList; // åå˜ï¼Œç¼–è¯‘æˆåŠŸ
Number firstNumber = numberList.get(0); // âœ… å®‰å…¨åœ°è¯»å–ï¼Œå…è®¸
// numberList.add(42); // âŒ ç¼–è¯‘é”™è¯¯ï¼Œä¸å…è®¸æ·»åŠ 
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§è€… (Producer)&lt;/strong&gt;: ä¸»è¦ç”¨æ¥&lt;strong&gt;å®‰å…¨åœ°ä»æ³›å‹ç»“æ„ä¸­è¯»å–æ•°æ®&lt;/strong&gt;ã€‚ä½ çŸ¥é“å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ è‡³å°‘æ˜¯ &lt;code&gt;T&lt;/code&gt;ç±»å‹ï¼ˆæˆ–å…¶å­ç±»ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&amp;ldquo;åªè¯»&amp;quot;é™åˆ¶&lt;/strong&gt;: ä½ ä¸èƒ½å‘ä¸€ä¸ªå£°æ˜ä¸º &lt;code&gt;&amp;lt;? extends T&amp;gt;&lt;/code&gt;çš„é›†åˆæ·»åŠ ä»»ä½•å…ƒç´ ï¼ˆ&lt;code&gt;null&lt;/code&gt;é™¤å¤–ï¼‰ã€‚å› ä¸ºç¼–è¯‘å™¨æ— æ³•ç¡®å®šå®é™…çš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ·»åŠ æ“ä½œæ˜¯ç±»å‹ä¸å®‰å…¨çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-é€†å˜-contravariance"&gt;3. é€†å˜ (Contravariance)
&lt;/h4&gt;&lt;p&gt;è™½ç„¶ä½ ä¸»è¦é—®çš„æ˜¯åå˜ï¼Œä½†ç†è§£é€†å˜èƒ½è®©ä½ å¯¹å‹å˜æœ‰æ›´å®Œæ•´çš„è®¤è¯†ã€‚é€†å˜è¡¨ç¤ºæ³›å‹ç±»å‹çš„ç»§æ‰¿å…³ç³»ä¸ç±»å‹å‚æ•°çš„ç»§æ‰¿å…³ç³»&lt;strong&gt;ç›¸å&lt;/strong&gt;ã€‚åœ¨ Java ä¸­ï¼Œé€šè¿‡&lt;strong&gt;ä¸‹ç•Œé€šé…ç¬¦ &lt;code&gt;&amp;lt;? super T&amp;gt;&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;Object&amp;gt; objectList = new ArrayList&amp;lt;&amp;gt;();
List&amp;lt;? super Integer&amp;gt; integerList = objectList; // é€†å˜ï¼Œç¼–è¯‘æˆåŠŸ
integerList.add(42); // âœ… å®‰å…¨åœ°æ·»åŠ IntegeråŠå…¶å­ç±»ï¼Œå…è®¸
// Integer value = integerList.get(0); // âŒ ç¼–è¯‘é”™è¯¯ï¼Œè¯»å–ä¸å®‰å…¨
Object firstElement = integerList.get(0); // è¯»å–æ—¶åªèƒ½è§†ä¸ºObject
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹è€… (Consumer)&lt;/strong&gt;: ä¸»è¦ç”¨æ¥&lt;strong&gt;å®‰å…¨åœ°å‘æ³›å‹ç»“æ„ä¸­å†™å…¥æ•°æ®&lt;/strong&gt;ã€‚ä½ çŸ¥é“è¿™ä¸ªç»“æ„å¯ä»¥å®‰å…¨åœ°æ¥å— &lt;code&gt;T&lt;/code&gt;ç±»å‹ï¼ˆåŠå…¶å­ç±»ï¼‰çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&amp;ldquo;åªå†™&amp;quot;å€¾å‘&lt;/strong&gt;: ä½ å¯ä»¥æ·»åŠ å…ƒç´ ï¼Œä½†ä»å…¶ä¸­è¯»å–æ—¶ï¼Œåªèƒ½æ‹¿åˆ° &lt;code&gt;Object&lt;/code&gt;ç±»å‹çš„å¯¹è±¡ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•ç¡®å®šå…·ä½“çš„çˆ¶ç±»å‹æ˜¯ä»€ä¹ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©pecs-åŸåˆ™"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ï¼šPECS åŸåˆ™
&lt;/h3&gt;&lt;p&gt;Effective Java æå‡ºçš„ &lt;strong&gt;PECS (Producer-Extends, Consumer-Super)&lt;/strong&gt; åŸåˆ™æ˜¯å†³å®šä½¿ç”¨ &lt;code&gt;extends&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;super&lt;/code&gt;çš„é»„é‡‘æ³•åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Producer (ç”Ÿäº§è€…) Extends&lt;/strong&gt;: å¦‚æœä½ çš„æ³›å‹ç»“æ„æ˜¯&lt;strong&gt;æ•°æ®çš„ç”Ÿäº§è€…&lt;/strong&gt;ï¼ˆå³ä¸»è¦ä»ä¸­&lt;strong&gt;è¯»å–&lt;/strong&gt;æ•°æ®ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;&amp;lt;? extends T&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// æ­¤æ–¹æ³•ä»æºåˆ—è¡¨ï¼ˆç”Ÿäº§è€…ï¼‰ä¸­è¯»å–å…ƒç´ 
public void processAnimals(List&amp;lt;? extends Animal&amp;gt; animals) {
for (Animal a : animals) { // å®‰å…¨è¯»å–
System.out.println(a.makeSound());
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Consumer (æ¶ˆè´¹è€…) Super&lt;/strong&gt;: å¦‚æœä½ çš„æ³›å‹ç»“æ„æ˜¯&lt;strong&gt;æ•°æ®çš„æ¶ˆè´¹è€…&lt;/strong&gt;ï¼ˆå³ä¸»è¦å‘å…¶ä¸­&lt;strong&gt;å†™å…¥&lt;/strong&gt;æ•°æ®ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;&amp;lt;? super T&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// æ­¤æ–¹æ³•å‘ç›®æ ‡åˆ—è¡¨ï¼ˆæ¶ˆè´¹è€…ï¼‰ä¸­å†™å…¥å…ƒç´ 
public void addCats(List&amp;lt;? super Cat&amp;gt; cats) {
cats.add(new Cat()); // å®‰å…¨å†™å…¥
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ•°ç»„çš„åå˜ä¸€ä¸ªå†å²æ•™è®­"&gt;âš ï¸ æ•°ç»„çš„åå˜ï¼šä¸€ä¸ªå†å²æ•™è®­
&lt;/h3&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;Java çš„æ•°ç»„æ˜¯åå˜çš„&lt;/strong&gt;ï¼Œä½†è¿™è¢«è§†ä¸ºä¸€ä¸ªå†å²æ€§çš„è®¾è®¡ç¼ºé™·ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Integer[] intArray = {1, 2, 3};
Number[] numberArray = intArray; // âœ… ç¼–è¯‘é€šè¿‡ï¼Œæ•°ç»„æ˜¯åå˜çš„
// numberArray[0] = 3.14; // âŒ è¿è¡Œæ—¶æŠ›å‡º ArrayStoreException
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ•°ç»„çš„åå˜ä¼šåœ¨è¿è¡Œæ—¶æ‰æŠ›å‡º &lt;code&gt;ArrayStoreException&lt;/code&gt;ï¼Œè€Œæ³›å‹é€šè¿‡&lt;strong&gt;ä¸å˜æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;é€šé…ç¬¦&lt;/strong&gt;åœ¨&lt;strong&gt;ç¼–è¯‘æœŸ&lt;/strong&gt;å°±æ•è·äº†ç»å¤§å¤šæ•°ç±»å‹é”™è¯¯ï¼Œæ›´åŠ å®‰å…¨ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤ä¸å˜ï¼Œå®‰å…¨ç¬¬ä¸€&lt;/strong&gt;ï¼šJava æ³›å‹é»˜è®¤æ˜¯&lt;strong&gt;ä¸å˜&lt;/strong&gt;çš„ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨ç¼–è¯‘æœŸå°±ç¡®ä¿ç±»å‹å®‰å…¨ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åå˜è¯»ï¼Œé€†å˜å†™&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;&amp;lt;? extends T&amp;gt;&lt;/code&gt;å®ç°&lt;strong&gt;åå˜&lt;/strong&gt;ï¼Œå…è®¸&lt;strong&gt;å®‰å…¨è¯»å–&lt;/strong&gt;ï¼Œä½†æ— æ³•å†™å…¥ã€‚ä½¿ç”¨ &lt;code&gt;&amp;lt;? super T&amp;gt;&lt;/code&gt;å®ç°&lt;strong&gt;é€†å˜&lt;/strong&gt;ï¼Œå…è®¸&lt;strong&gt;å®‰å…¨å†™å…¥&lt;/strong&gt;ï¼Œä½†è¯»å–å—é™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¢è®° PECS&lt;/strong&gt;ï¼šç¼–å†™é€šç”¨ API æˆ–æ–¹æ³•æ—¶ï¼Œéµå¾ª &lt;strong&gt;PECS (Producer-Extends, Consumer-Super)&lt;/strong&gt; åŸåˆ™ï¼Œèƒ½è®©ä½ çš„ä»£ç æ—¢çµæ´»åˆç±»å‹å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç†è§£è¿™äº›æ¦‚å¿µèƒ½è®©ä½ æ›´æ·±åˆ»åœ°æŠŠæ¡ Java ç±»å‹ç³»ç»Ÿï¼Œå†™å‡ºæ›´å¥å£®ã€æ›´çµæ´»çš„æ³›å‹ä»£ç ã€‚&lt;/p&gt;
&lt;h2 id="è¿ç®—ç¬¦"&gt;è¿ç®—ç¬¦
&lt;/h2&gt;&lt;p&gt;Java ä¸­çš„è¿ç®—ç¬¦åœ¨å¤„ç†ä¸åŒæ•°æ®ç±»å‹æ—¶ï¼Œé€šå¸¸ä¼šä¼´éšç€éšå¼ç±»å‹è½¬æ¢ï¼ˆè‡ªåŠ¨ç±»å‹æå‡ï¼‰ã€‚äº†è§£è¿™äº›è§„åˆ™å¯¹äºç¼–å†™æ­£ç¡®ã€é«˜æ•ˆçš„ä»£ç è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ ç³»ç»Ÿæ¢³ç† Java å„ç§è¿ç®—ç¬¦æ”¯æŒçš„ç±»å‹åŠç›¸å…³çš„éšå¼è½¬æ¢è§„åˆ™ã€‚&lt;/p&gt;
&lt;h3 id="-å…ˆäº†è§£ç±»å‹æå‡å±‚çº§"&gt;ğŸ“Š å…ˆäº†è§£ç±»å‹æå‡å±‚çº§
&lt;/h3&gt;&lt;p&gt;åœ¨æ·±å…¥è¿ç®—ç¬¦ä¹‹å‰ï¼Œæœ€å…³é”®çš„æ˜¯è®°ä½ Java åŸºæœ¬æ•°æ®ç±»å‹çš„&lt;strong&gt;è‡ªåŠ¨æå‡æ–¹å‘&lt;/strong&gt;ï¼ˆä»ä½åˆ°é«˜ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;byte`â†’ `short`â†’ `int`â†’ `long`â†’ `float`â†’ `double
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;char&lt;/code&gt;â¡ï¸ &lt;code&gt;int&lt;/code&gt;(å‚ä¸è¿ç®—æ—¶)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®°å¿†è¦ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;byte&lt;/code&gt;ã€&lt;code&gt;short&lt;/code&gt;ã€&lt;code&gt;char&lt;/code&gt;è¿™ä¸‰ç§å°äº &lt;code&gt;int&lt;/code&gt;çš„ç±»å‹ï¼Œ&lt;strong&gt;ä¸€æ—¦å‚ä¸è¿ç®—ï¼Œé¦–å…ˆä¼šè‡ªåŠ¨æå‡ä¸º &lt;code&gt;int&lt;/code&gt;&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¿ç®—ä¸­åŒ…å«æ›´é«˜ç­‰çº§çš„ç±»å‹ï¼Œç»“æœä¼šå‘ç­‰çº§æœ€é«˜çš„ç±»å‹æå‡ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;int&lt;/code&gt;å’Œ &lt;code&gt;double&lt;/code&gt;è¿ç®—ï¼Œç»“æœä¼šæ˜¯ &lt;code&gt;double&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å„ç±»è¿ç®—ç¬¦çš„ç±»å‹æ”¯æŒä¸è½¬æ¢"&gt;ğŸ§® å„ç±»è¿ç®—ç¬¦çš„ç±»å‹æ”¯æŒä¸è½¬æ¢
&lt;/h3&gt;&lt;h4 id="1-ç®—æœ¯è¿ç®—ç¬¦------"&gt;1. ç®—æœ¯è¿ç®—ç¬¦ (&lt;code&gt;+&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;, &lt;code&gt;%&lt;/code&gt;)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼šä¸»è¦ä½œç”¨äºæ•°å€¼ç±»å‹ï¼ˆ&lt;code&gt;byte&lt;/code&gt;, &lt;code&gt;short&lt;/code&gt;, &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;long&lt;/code&gt;, &lt;code&gt;float&lt;/code&gt;, &lt;code&gt;double&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¿ç®—å‰ï¼Œæ‰€æœ‰æ“ä½œæ•°ä¼š&lt;strong&gt;è‡ªåŠ¨æå‡åˆ°è¡¨è¾¾å¼ä¸­æœ€é«˜ç­‰çº§çš„ç±»å‹&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ä¾‹&lt;/strong&gt;ï¼š&lt;code&gt;byte&lt;/code&gt;, &lt;code&gt;short&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt;ä¼šå…ˆæå‡ä¸º &lt;code&gt;int&lt;/code&gt;ï¼Œå³ä½¿å®ƒä»¬æ˜¯ç›¸åŒçš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;byte a = 10;
byte b = 20;
// byte result = a + b; // ç¼–è¯‘é”™è¯¯ï¼å› ä¸º a + b çš„ç»“æœå·²ç»æ˜¯ int ç±»å‹
byte result = (byte) (a + b); // å¿…é¡»å¼ºåˆ¶è½¬æ¢
int intResult = a + b; // æ­£ç¡®ï¼Œç»“æœä¸º int
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™¤æ³•æ³¨æ„&lt;/strong&gt;ï¼šä¸¤ä¸ªæ•´æ•°ç›¸é™¤ (&lt;code&gt;/&lt;/code&gt;)ï¼Œç»“æœä»ä¸ºæ•´æ•°ï¼Œå°æ•°éƒ¨åˆ†ä¼šè¢«&lt;strong&gt;æˆªæ–­&lt;/strong&gt;ï¼ˆå‘é›¶å–æ•´ï¼‰ã€‚è‹¥éœ€å°æ•°ç»“æœï¼Œéœ€æœ‰æµ®ç‚¹æ•°å‚ä¸ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;System.out.println(5 / 2); // è¾“å‡º 2
System.out.println(5.0 / 2); // è¾“å‡º 2.5
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—ç¬¦ä¸²è¿æ¥ &lt;code&gt;+&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ &lt;code&gt;+&lt;/code&gt;çš„ä¸€ä¸ªæ“ä½œæ•°æ˜¯ &lt;code&gt;String&lt;/code&gt;æ—¶ï¼Œå®ƒä¼šå˜ä¸ºå­—ç¬¦ä¸²è¿æ¥ç¬¦ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°ä¼šè¢«éšå¼è½¬æ¢ä¸º &lt;code&gt;String&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;System.out.println(&amp;#34;The answer is: &amp;#34; + 42); // &amp;#34;The answer is: 42&amp;#34;
System.out.println(1 + 2 + &amp;#34;3&amp;#34;); // å…ˆè®¡ç®— 1+2=3, ç„¶å &amp;#34;3&amp;#34; + &amp;#34;3&amp;#34; -&amp;gt; &amp;#34;33&amp;#34;
System.out.println(&amp;#34;1&amp;#34; + 2 + 3); // &amp;#34;1&amp;#34; + &amp;#34;2&amp;#34; -&amp;gt; &amp;#34;12&amp;#34;, å† + &amp;#34;3&amp;#34; -&amp;gt; &amp;#34;123&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-èµ‹å€¼è¿ç®—ç¬¦-------------"&gt;2. èµ‹å€¼è¿ç®—ç¬¦ (&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;+=&lt;/code&gt;, &lt;code&gt;-=&lt;/code&gt;, &lt;code&gt;*=&lt;/code&gt;, &lt;code&gt;/=&lt;/code&gt;, &lt;code&gt;%=&lt;/code&gt;, &lt;code&gt;&amp;amp;=&lt;/code&gt;, &lt;code&gt;|=&lt;/code&gt;, &lt;code&gt;^=&lt;/code&gt;, &lt;code&gt;&amp;lt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;=&lt;/code&gt;)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼šæ‰€æœ‰åŸºæœ¬ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ç±»å‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç®€å•èµ‹å€¼ &lt;code&gt;=&lt;/code&gt;è¦æ±‚å³å€¼ç±»å‹å¯è‡ªåŠ¨è½¬æ¢ä¸ºå·¦å€¼ç±»å‹ï¼Œæˆ–ä½¿ç”¨å¼ºåˆ¶è½¬æ¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼ˆå¦‚ &lt;code&gt;+=&lt;/code&gt;ï¼‰ä¼šè‡ªåŠ¨å®Œæˆå¼ºåˆ¶è½¬æ¢&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int x = 10;
x += 5.5; // ç­‰ä»·äº x = (int) (x + 5.5); x å˜ä¸º 15
// x = x + 5.5; // ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º x + 5.5 æ˜¯ double ç±»å‹
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-è‡ªå¢è‡ªå‡è¿ç®—ç¬¦----"&gt;3. è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦ (&lt;code&gt;++&lt;/code&gt;, &lt;code&gt;--&lt;/code&gt;)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼šæ‰€æœ‰æ•°å€¼ç±»å‹å’ŒåŒ…è£…ç±»å‹ï¼ˆå¾—ç›Šäºè‡ªåŠ¨æ‹†ç®±ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å½“æ“ä½œæ•°æ˜¯ &lt;code&gt;byte&lt;/code&gt;, &lt;code&gt;short&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt;æ—¶ï¼Œ&lt;strong&gt;å€¼ä¼šæ”¹å˜ï¼Œä½†ç±»å‹ä¿æŒä¸å˜&lt;/strong&gt;ï¼ˆè¿™ä¸å…¶å®ƒç®—æœ¯è¿ç®—ä¸åŒï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;byte count = 127;
count++; // count ç°åœ¨æ˜¯ -128ï¼ˆç”±äºæº¢å‡ºï¼‰ï¼Œä½†ç±»å‹ä»æ˜¯ byte
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-æ¯”è¾ƒè¿ç®—ç¬¦------"&gt;4. æ¯”è¾ƒè¿ç®—ç¬¦ (&lt;code&gt;==&lt;/code&gt;, &lt;code&gt;!=&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼šæ•°å€¼ç±»å‹ã€&lt;code&gt;char&lt;/code&gt;ï¼ˆæ¯”è¾ƒ Unicode å€¼ï¼‰ã€&lt;code&gt;boolean&lt;/code&gt;ï¼ˆä»… &lt;code&gt;==&lt;/code&gt;å’Œ &lt;code&gt;!=&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ¯”è¾ƒå‰ï¼Œæ“ä½œæ•°ä¼šéµå¾ªç±»å‹æå‡è§„åˆ™è½¬æ¢ä¸ºç›¸åŒç±»å‹åå†æ¯”è¾ƒ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int i = 10;
double d = 10.0;
System.out.println(i == d); // true, int i è¢«æå‡ä¸º double åæ¯”è¾ƒ
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹åˆ«æ³¨æ„ &lt;code&gt;==&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºåŸºæœ¬ç±»å‹ï¼Œæ¯”è¾ƒçš„æ˜¯&lt;strong&gt;å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºå¯¹è±¡å¼•ç”¨ç±»å‹ï¼Œæ¯”è¾ƒçš„æ˜¯&lt;strong&gt;å†…å­˜åœ°å€&lt;/strong&gt;ï¼ˆæ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚è¦æ¯”è¾ƒå¯¹è±¡å†…å®¹ï¼Œéœ€ä½¿ç”¨ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-é€»è¾‘è¿ç®—ç¬¦------"&gt;5. é€»è¾‘è¿ç®—ç¬¦ (&lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;, &lt;code&gt;||&lt;/code&gt;, &lt;code&gt;!&lt;/code&gt;, &lt;code&gt;&amp;amp;&lt;/code&gt;, &lt;code&gt;|&lt;/code&gt;, &lt;code&gt;^&lt;/code&gt;)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼š&lt;strong&gt;ä»…é€‚ç”¨äº &lt;code&gt;boolean&lt;/code&gt;ç±»å‹&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ“ä½œæ•°å¿…é¡»æ˜¯ &lt;code&gt;boolean&lt;/code&gt;æˆ–äº§ç”Ÿ &lt;code&gt;boolean&lt;/code&gt;çš„è¡¨è¾¾å¼ï¼ˆå¦‚æ¯”è¾ƒè¿ç®—ï¼‰ã€‚&lt;strong&gt;ä¸å­˜åœ¨ä»å…¶å®ƒç±»å‹åˆ° &lt;code&gt;boolean&lt;/code&gt;çš„éšå¼è½¬æ¢&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çŸ­è·¯è¡Œä¸º&lt;/strong&gt;ï¼š&lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;å’Œ &lt;code&gt;||&lt;/code&gt;æ˜¯çŸ­è·¯è¿ç®—ç¬¦ã€‚å¦‚æœæ ¹æ®å·¦æ“ä½œæ•°å°±èƒ½ç¡®å®šç»“æœï¼Œå³æ“ä½œæ•°å°†ä¸ä¼šè¢«è®¡ç®— ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;if (false &amp;amp;&amp;amp; (someExpensiveMethod())) {} // someExpensiveMethod() ä¸ä¼šè¢«è°ƒç”¨
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="6-ä½è¿ç®—ç¬¦-------"&gt;6. ä½è¿ç®—ç¬¦ (&lt;code&gt;&amp;amp;&lt;/code&gt;, &lt;code&gt;|&lt;/code&gt;, &lt;code&gt;^&lt;/code&gt;, &lt;code&gt;~&lt;/code&gt;, &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼šæ•´å‹ï¼ˆ&lt;code&gt;byte&lt;/code&gt;, &lt;code&gt;short&lt;/code&gt;, &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;long&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰€æœ‰æ“ä½œæ•°åœ¨è¿ç®—å‰éƒ½ä¼šæå‡ä¸º &lt;code&gt;int&lt;/code&gt;æˆ–æ›´é«˜ç±»å‹&lt;/strong&gt;ï¼ˆå¦‚åŒ…å« &lt;code&gt;long&lt;/code&gt;ï¼‰ã€‚è¿ç®—ç»“æœä¹Ÿæ˜¯æå‡åçš„ç±»å‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;byte flags = 0b00001100;
byte mask = 0b00000011;
// byte result = flags &amp;amp; mask; // ç¼–è¯‘é”™è¯¯ï¼ flags &amp;amp; mask çš„ç»“æœæ˜¯ int
byte result = (byte) (flags &amp;amp; mask); // å¿…é¡»å¼ºåˆ¶è½¬æ¢
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;~&lt;/code&gt;ï¼ˆæŒ‰ä½å–åï¼‰æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼ŒåŒæ ·éµå¾ªæå‡è§„åˆ™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="7-æ¡ä»¶è¿ç®—ç¬¦ä¸‰ç›®è¿ç®—ç¬¦--"&gt;7. æ¡ä»¶è¿ç®—ç¬¦ï¼ˆä¸‰ç›®è¿ç®—ç¬¦ &lt;code&gt;? :&lt;/code&gt;ï¼‰
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ”¯æŒç±»å‹&lt;/strong&gt;ï¼šè¡¨è¾¾å¼2å’Œè¡¨è¾¾å¼3çš„ç±»å‹å¿…é¡»å…¼å®¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éšå¼è½¬æ¢è§„åˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¼–è¯‘å™¨ä¼šç¡®å®šè¡¨è¾¾å¼2å’Œè¡¨è¾¾å¼3çš„&lt;strong&gt;å…±åŒç±»å‹&lt;/strong&gt;ã€‚å¦‚æœç±»å‹ä¸åŒï¼Œä¼šéµå¾ªè‡ªåŠ¨æå‡è§„åˆ™å°†å…¶ç»Ÿä¸€åˆ°æ›´é«˜çš„ç±»å‹ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int a = 10;
double b = 20.5;
double result = (a &amp;gt; 5) ? a : b; // å¦‚æœ a&amp;gt;5 ä¸ºçœŸï¼Œè¿”å› a (int)ï¼Œä½†ä¼šè‡ªåŠ¨æå‡ä¸º double åèµ‹å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è­¦æƒ•ç²¾åº¦ä¸¢å¤±&lt;/strong&gt;ï¼šå¼ºåˆ¶ç±»å‹è½¬æ¢å’Œæ•´æ•°é™¤æ³•éƒ½å¯èƒ½ä¸¢å¤±ç²¾åº¦ã€‚åœ¨è¿›è¡Œè½¬æ¢æ—¶ï¼ŒåŠ¡å¿…æ¸…æ¥šå¯èƒ½å¸¦æ¥çš„åæœ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„è¿ç®—ç¬¦ä¼˜å…ˆçº§&lt;/strong&gt;ï¼šä¸ç¡®å®šæ—¶ï¼Œå°±ä½¿ç”¨æ‹¬å· &lt;code&gt;()&lt;/code&gt;æ¥æ˜ç¡®è¿ç®—é¡ºåºã€‚æ‹¬å·æ‹¥æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒºåˆ† &lt;code&gt;&amp;amp;&lt;/code&gt;ã€&lt;code&gt;|&lt;/code&gt;å’Œ &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;ã€&lt;code&gt;||&lt;/code&gt;&lt;/strong&gt;ï¼šå•å­—ç¬¦çš„æ˜¯&lt;strong&gt;ä½è¿ç®—ç¬¦&lt;/strong&gt;æˆ–&lt;strong&gt;éçŸ­è·¯é€»è¾‘è¿ç®—ç¬¦&lt;/strong&gt;ï¼ŒåŒå­—ç¬¦çš„æ˜¯&lt;strong&gt;çŸ­è·¯é€»è¾‘è¿ç®—ç¬¦&lt;/strong&gt;ã€‚å®ƒä»¬çš„ç”¨é€”å’Œæ“ä½œæ•°ç±»å‹å®Œå…¨ä¸åŒ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒ…è£…ç±»çš„è‡ªåŠ¨æ‹†ç®±/è£…ç®±&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨åŒ…è£…ç±»ï¼ˆå¦‚ &lt;code&gt;Integer&lt;/code&gt;, &lt;code&gt;Double&lt;/code&gt;ï¼‰æ—¶ï¼Œè¿ç®—ä¼šå…ˆè‡ªåŠ¨æ‹†ç®±ä¸ºåŸºæœ¬ç±»å‹ï¼Œè¿ç®—åå†æ ¹æ®æƒ…å†µè£…ç®±ã€‚éœ€æ³¨æ„ &lt;code&gt;null&lt;/code&gt;å€¼å¯èƒ½å¼•å‘ &lt;code&gt;NullPointerException&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Integer num1 = null;
// int value = num1 + 1; // è¿è¡Œæ—¶æŠ›å‡º NullPointerException
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æ¢³ç†èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Java è¿ç®—ç¬¦çš„ç±»å‹è½¬æ¢æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="çº¿ç¨‹æ¨¡å‹"&gt;çº¿ç¨‹æ¨¡å‹
&lt;/h2&gt;&lt;p&gt;ç†è§£æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„å®ç°æ–¹å¼ï¼Œèƒ½å¸®ä½ æ›´æ·±å…¥åœ°æŠŠæ¡å¤šçº¿ç¨‹ç¼–ç¨‹çš„æœ¬è´¨ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ æ¢³ç†ä¸»è¦çš„çº¿ç¨‹å®ç°æ–¹å¼åŠå…¶ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„å®ç°ä¸»è¦æœ‰ä¸‰ç§æ¨¡å‹ï¼šç”¨æˆ·çº§çº¿ç¨‹ (ULT)ã€å†…æ ¸çº§çº¿ç¨‹ (KLT)ï¼Œä»¥åŠç»“åˆä¸¤è€…ç‰¹ç‚¹çš„&lt;strong&gt;æ··åˆæ¨¡å‹&lt;/strong&gt;ã€‚å®ƒä»¬æ ¸å¿ƒçš„åŒºåˆ«åœ¨äº&lt;strong&gt;çº¿ç¨‹çš„ç®¡ç†è€…æ˜¯è°&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;æ“ä½œç³»ç»Ÿå†…æ ¸æ˜¯å¦æ„ŸçŸ¥çº¿ç¨‹çš„å­˜åœ¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªå…¨å±€å°è±¡ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ç”¨æˆ·çº§çº¿ç¨‹ (ULT)&lt;/th&gt;
&lt;th&gt;å†…æ ¸çº§çº¿ç¨‹ (KLT)&lt;/th&gt;
&lt;th&gt;æ··åˆæ¨¡å‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°ä¸ç®¡ç†è€…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·ç©ºé—´çš„çº¿ç¨‹åº“ï¼ˆå¦‚è¿è¡Œæ—¶ç³»ç»Ÿï¼‰&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿå†…æ ¸&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹å…±åŒåä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…æ ¸æ„ŸçŸ¥åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ å†…æ ¸ä¸å¯è§ï¼Œä»…æ„ŸçŸ¥åˆ°è¿›ç¨‹&lt;/td&gt;
&lt;td&gt;âœ… å†…æ ¸å¯è§ï¼Œå¹¶ç›´æ¥ç®¡ç†&lt;/td&gt;
&lt;td&gt;å†…æ ¸æ„ŸçŸ¥å†…æ ¸çº¿ç¨‹ï¼Œç”¨æˆ·çº¿ç¨‹å¯¹å†…æ ¸é€æ˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹åˆ‡æ¢å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¾ˆå°ï¼Œæ— éœ€æ¨¡å¼åˆ‡æ¢&lt;/td&gt;
&lt;td&gt;âŒ è¾ƒå¤§ï¼Œéœ€åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€é—´åˆ‡æ¢&lt;/td&gt;
&lt;td&gt;å–å†³äºå®ç°ï¼Œé€šå¸¸ä»‹äºä¸¤è€…ä¹‹é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜»å¡æ“ä½œçš„å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ ä¸€ä¸ªçº¿ç¨‹é˜»å¡ç³»ç»Ÿè°ƒç”¨ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹é˜»å¡&lt;/td&gt;
&lt;td&gt;âœ… ä¸€ä¸ªçº¿ç¨‹é˜»å¡ï¼ŒåŒä¸€è¿›ç¨‹å†…çš„å…¶å®ƒçº¿ç¨‹é€šå¸¸å¯ç»§ç»­è¿è¡Œ&lt;/td&gt;
&lt;td&gt;âœ… è®¾è®¡è‰¯å¥½æ—¶å¯é¿å…æ•´ä¸ªè¿›ç¨‹é˜»å¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå¤„ç†å™¨å¹¶è¡Œæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ å›°éš¾ï¼Œè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹æ— æ³•åŒæ—¶åœ¨å¤šä¸ªCPUæ ¸å¿ƒè¿è¡Œ&lt;/td&gt;
&lt;td&gt;âœ… è‰¯å¥½ï¼ŒåŒä¸€è¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å¯è¢«è°ƒåº¦åˆ°ä¸åŒCPUæ ¸å¿ƒå¹¶è¡Œæ‰§è¡Œ&lt;/td&gt;
&lt;td&gt;âœ… è‰¯å¥½ï¼Œå¤šä¸ªç”¨æˆ·çº¿ç¨‹å¯é€šè¿‡å¤šä¸ªå†…æ ¸çº¿ç¨‹åœ¨ä¸åŒCPUä¸Šè¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§/å¯æ§æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… é«˜ï¼Œåº”ç”¨ç¨‹åºå¯è‡ªå®šä¹‰è°ƒåº¦ç®—æ³•&lt;/td&gt;
&lt;td&gt;âŒ ä½ï¼Œç”±å†…æ ¸ç»Ÿä¸€è°ƒåº¦&lt;/td&gt;
&lt;td&gt;ä¸­ç­‰ï¼Œéƒ¨åˆ†å¯æ§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ä»£è¡¨æˆ–åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—©æœŸçº¿ç¨‹åº“ã€æŸäº›è¯­è¨€åç¨‹ï¼ˆå¦‚æ—§ç‰ˆJavaç»¿è‰²çº¿ç¨‹ï¼‰&lt;/td&gt;
&lt;td&gt;ç°ä»£ä¸»æµOSï¼ˆWindows, Linux, macOSï¼‰çš„çº¿ç¨‹å®ç°&lt;/td&gt;
&lt;td&gt;Java HotSpot VM (Linuxç‰ˆ)ã€Solarisçº¿ç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰ç§å®ç°æ–¹å¼è¯¦è§£"&gt;ğŸ” ä¸‰ç§å®ç°æ–¹å¼è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-ç”¨æˆ·çº§çº¿ç¨‹-user-level-threads-ult"&gt;1. ç”¨æˆ·çº§çº¿ç¨‹ (User-Level Threads, ULT)
&lt;/h4&gt;&lt;p&gt;ç”¨æˆ·çº§çº¿ç¨‹&lt;strong&gt;å®Œå…¨åœ¨ç”¨æˆ·ç©ºé—´&lt;/strong&gt;é€šè¿‡&lt;strong&gt;çº¿ç¨‹åº“&lt;/strong&gt;ï¼ˆå¦‚è¿è¡Œæ—¶ç³»ç»Ÿï¼‰å®ç°å’Œç®¡ç†ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸å¹¶ä¸çŸ¥é“è¿™äº›çº¿ç¨‹çš„å­˜åœ¨ã€‚å†…æ ¸çœ‹åˆ°çš„ä»ç„¶åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå³**â€œå¤šçº¿ç¨‹æ¨¡å¼â€å¯¹å†…æ ¸æ˜¯é€æ˜çš„**ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºé€šè¿‡çº¿ç¨‹åº“ä¸­çš„å‡½æ•°ï¼ˆå¦‚åˆ›å»ºã€é”€æ¯ã€åŒæ­¥ï¼‰æ¥ç®¡ç†æ‰€æœ‰çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹åº“è´Ÿè´£çº¿ç¨‹çš„è°ƒåº¦å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™äº›æ“ä½œéƒ½åœ¨&lt;strong&gt;ç”¨æˆ·æ€&lt;/strong&gt;å®Œæˆï¼Œ&lt;strong&gt;æ— éœ€é™·å…¥å†…æ ¸&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰ç”¨æˆ·çº§çº¿ç¨‹éƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªå†…æ ¸è°ƒåº¦å®ä½“ï¼ˆé€šå¸¸æ˜¯å•ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æé«˜æ•ˆçš„çº¿ç¨‹æ“ä½œ&lt;/strong&gt;ï¼šçº¿ç¨‹åˆ‡æ¢ã€åˆ›å»ºã€é”€æ¯æ— éœ€å†…æ ¸ä»‹å…¥ï¼Œå¼€é”€éå¸¸å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰è°ƒåº¦ç®—æ³•&lt;/strong&gt;ï¼šæ¯ä¸ªè¿›ç¨‹å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚ä½¿ç”¨ä¸åŒçš„çº¿ç¨‹è°ƒåº¦ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ“ä½œç³»ç»Ÿæ— å…³&lt;/strong&gt;ï¼šåªè¦å®ç°äº†å¯¹åº”çš„çº¿ç¨‹åº“ï¼Œå³ä½¿æ“ä½œç³»ç»Ÿæœ¬èº«ä¸æ”¯æŒçº¿ç¨‹ï¼Œä¹Ÿèƒ½æä¾›å¤šçº¿ç¨‹èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;â€œä¸€æŸä¿±æŸâ€çš„é˜»å¡é—®é¢˜&lt;/strong&gt;ï¼šç”±äºå†…æ ¸ä¸çŸ¥é“ç”¨æˆ·çº¿ç¨‹çš„å­˜åœ¨ï¼Œ&lt;strong&gt;ä»»ä½•ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å‘èµ·é˜»å¡å¼ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚I/Oæ“ä½œï¼‰å¯¼è‡´è‡ªèº«é˜»å¡æ—¶ï¼Œå†…æ ¸ä¼šé˜»å¡æ•´ä¸ªè¿›ç¨‹&lt;/strong&gt;ï¼Œä»è€Œé˜»å¡äº†è¯¥è¿›ç¨‹ä¸‹çš„æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹ï¼Œå³ä½¿å…¶å®ƒç”¨æˆ·çº¿ç¨‹å°±ç»ªä¹Ÿæ— æ³•è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éš¾ä»¥åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨&lt;/strong&gt;ï¼šå†…æ ¸å§‹ç»ˆåªæŠŠä¸€ä¸ªCPUæ—¶é—´ç‰‡åˆ†é…ç»™è¿™ä¸ªè¿›ç¨‹ï¼ˆå³é‚£ä¸ªå”¯ä¸€çš„å†…æ ¸è°ƒåº¦å®ä½“ï¼‰ï¼Œå› æ­¤&lt;strong&gt;ä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªç”¨æˆ·çº¿ç¨‹æ— æ³•çœŸæ­£åœ¨å¤šä¸ªCPUæ ¸å¿ƒä¸Šå¹¶è¡Œæ‰§è¡Œ&lt;/strong&gt;ï¼Œåªèƒ½å¹¶å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-å†…æ ¸çº§çº¿ç¨‹-kernel-level-threads-klt"&gt;2. å†…æ ¸çº§çº¿ç¨‹ (Kernel-Level Threads, KLT)
&lt;/h4&gt;&lt;p&gt;å†…æ ¸çº§çº¿ç¨‹ç”±&lt;strong&gt;æ“ä½œç³»ç»Ÿå†…æ ¸ç›´æ¥ç®¡ç†&lt;/strong&gt;ã€‚çº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦å’Œåˆ‡æ¢éƒ½ç”±å†…æ ¸è´Ÿè´£ã€‚åº”ç”¨ç¨‹åºé€šè¿‡&lt;strong&gt;ç³»ç»Ÿè°ƒç”¨&lt;/strong&gt;æ¥è¯·æ±‚å†…æ ¸å®Œæˆè¿™äº›æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å†…æ ¸ä¸ºæ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;çº¿ç¨‹æ§åˆ¶å—ï¼ˆTCBï¼‰&lt;/strong&gt;ï¼Œç”¨æ¥è®°å½•çº¿ç¨‹çš„çŠ¶æ€ã€ä¸Šä¸‹æ–‡ç­‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹è°ƒåº¦ç”±å†…æ ¸çš„çº¿ç¨‹è°ƒåº¦å™¨å®Œæˆï¼Œæ˜¯ç³»ç»Ÿå…¨å±€è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹åˆ‡æ¢éœ€è¦ä»ç”¨æˆ·æ€é™·å…¥å†…æ ¸æ€ï¼Œç”±å†…æ ¸å®Œæˆä¸Šä¸‹æ–‡åˆ‡æ¢åå†è¿”å›ç”¨æˆ·æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ›´å¥½çš„å¹¶å‘æ€§&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªçº¿ç¨‹é˜»å¡æ—¶ï¼ˆä¾‹å¦‚ç­‰å¾…I/Oï¼‰ï¼Œå†…æ ¸å¯ä»¥è°ƒåº¦åŒä¸€è¿›ç¨‹å†…çš„å…¶å®ƒå°±ç»ªçº¿ç¨‹è¿è¡Œï¼Œä¹Ÿå¯ä»¥è°ƒåº¦å…¶å®ƒè¿›ç¨‹çš„çº¿ç¨‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœŸæ­£æ”¯æŒå¤šæ ¸å¹¶è¡Œ&lt;/strong&gt;ï¼šå†…æ ¸å¯ä»¥å°†ä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹&lt;strong&gt;çœŸæ­£åŒæ—¶è°ƒåº¦åˆ°å¤šä¸ªCPUæ ¸å¿ƒä¸Šæ‰§è¡Œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹æ“ä½œå¼€é”€è¾ƒå¤§&lt;/strong&gt;ï¼šæ¯æ¬¡çº¿ç¨‹æ“ä½œï¼ˆå¦‚åˆ›å»ºã€åˆ‡æ¢ï¼‰éƒ½éœ€è¦&lt;strong&gt;ç³»ç»Ÿè°ƒç”¨&lt;/strong&gt;ï¼Œå¯¼è‡´åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´åˆ‡æ¢ï¼Œå¼€é”€æ¯”ç”¨æˆ·çº§çº¿ç¨‹å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ€§è¾ƒä½&lt;/strong&gt;ï¼šçº¿ç¨‹è°ƒåº¦ç”±å†…æ ¸å…¨å±€æ§åˆ¶ï¼Œåº”ç”¨ç¨‹åºæ— æ³•é’ˆå¯¹ç‰¹å®šéœ€æ±‚å®šåˆ¶è°ƒåº¦ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-æ··åˆæ¨¡å‹-hybrid-model"&gt;3. æ··åˆæ¨¡å‹ (Hybrid Model)
&lt;/h4&gt;&lt;p&gt;ä¸ºäº†ç»“åˆç”¨æˆ·çº§çº¿ç¨‹çš„è½»é‡å’Œå†…æ ¸çº§çº¿ç¨‹çš„å¹¶å‘ä¼˜ç‚¹ï¼Œæå‡ºäº†æ··åˆæ¨¡å‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹&lt;strong&gt;å¹¶å­˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºå¯ä»¥åˆ›å»ºå¤§é‡è½»é‡çš„ç”¨æˆ·çº§çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;è¿™äº›ç”¨æˆ·çº§çº¿ç¨‹è¢«&lt;strong&gt;å¤šè·¯å¤ç”¨&lt;/strong&gt;åˆ°æ•°é‡è¾ƒå°‘çš„å†…æ ¸çº§çº¿ç¨‹ï¼ˆé€šå¸¸ç§°ä¸º&lt;strong&gt;è½»é‡çº§è¿›ç¨‹ - LWP&lt;/strong&gt;ï¼‰ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;å†…æ ¸åªçœ‹åˆ°å¹¶è°ƒåº¦è¿™äº›LWPï¼Œè€Œç”¨æˆ·çº§çº¿ç¨‹çš„è°ƒåº¦åˆ™ç”±çº¿ç¨‹åº“åœ¨ç”¨æˆ·ç©ºé—´å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å–é•¿è¡¥çŸ­&lt;/strong&gt;ï¼šæ—¢èƒ½æ”¯æŒå¤§é‡ç”¨æˆ·çº§çº¿ç¨‹ï¼ˆè½»é‡ï¼‰ï¼Œåˆèƒ½é€šè¿‡å¤šä¸ªLWPé¿å…æ•´ä¸ªè¿›ç¨‹å› å•ä¸ªçº¿ç¨‹é˜»å¡è€Œé˜»å¡ï¼Œå¹¶èƒ½åˆ©ç”¨å¤šæ ¸å¹¶è¡Œï¼ˆå¤šä¸ªLWPå¯åœ¨ä¸åŒæ ¸å¿ƒè¿è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»é…ç½®&lt;/strong&gt;ï¼šå¯ä»¥æ ¹æ®æœºå™¨CPUæ ¸å¿ƒæ•°å’Œåº”ç”¨ç‰¹ç‚¹ï¼ˆè®¡ç®—å¯†é›†å‹/I/Oå¯†é›†å‹ï¼‰è°ƒæ•´LWPçš„æ•°é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ç°å¤æ‚&lt;/strong&gt;ï¼šéœ€è¦çº¿ç¨‹åº“å’Œå†…æ ¸ååŒå·¥ä½œï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•ç†è§£æ˜ å°„å…³ç³»å¤šå¯¹ä¸€ä¸€å¯¹ä¸€å¤šå¯¹å¤š"&gt;ğŸ§  å¦‚ä½•ç†è§£â€œæ˜ å°„å…³ç³»â€ï¼šå¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€ã€å¤šå¯¹å¤š
&lt;/h3&gt;&lt;p&gt;çº¿ç¨‹å®ç°æ¨¡å‹å¸¸é€šè¿‡ç”¨æˆ·çº¿ç¨‹ä¸å†…æ ¸çº¿ç¨‹çš„æ˜ å°„å…³ç³»æ¥æè¿°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šå¯¹ä¸€ (Many-to-One)&lt;/strong&gt;ï¼šå¤šä¸ªç”¨æˆ·çº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ã€‚è¿™&lt;strong&gt;å°±æ˜¯çº¯ç”¨æˆ·çº§çº¿ç¨‹æ¨¡å‹&lt;/strong&gt;ã€‚å®ƒè½»é‡ï¼Œä½†ä¼šé‡åˆ°é˜»å¡å’Œæ— æ³•å¤šæ ¸å¹¶è¡Œçš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€å¯¹ä¸€ (One-to-One)&lt;/strong&gt;ï¼šä¸€ä¸ªç”¨æˆ·çº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ã€‚è¿™&lt;strong&gt;å°±æ˜¯çº¯å†…æ ¸çº§çº¿ç¨‹æ¨¡å‹&lt;/strong&gt;ã€‚å®ƒé¿å…äº†é˜»å¡é—®é¢˜ï¼Œæ”¯æŒå¤šæ ¸å¹¶è¡Œï¼Œä½†çº¿ç¨‹æ“ä½œå¼€é”€å¤§ï¼Œä¸”åˆ›å»ºçº¿ç¨‹æ•°é‡å—å†…æ ¸é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šå¯¹å¤š (Many-to-Many)&lt;/strong&gt;ï¼šå¤šä¸ªç”¨æˆ·çº¿ç¨‹æ˜ å°„åˆ°å¤šä¸ªï¼ˆæ•°é‡å¯ç›¸ç­‰æˆ–æ›´å°‘ï¼‰å†…æ ¸çº¿ç¨‹ã€‚è¿™&lt;strong&gt;å°±æ˜¯æ··åˆæ¨¡å‹&lt;/strong&gt;ã€‚å®ƒå…¼å…·äº†ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œæ—¢è½»é‡ï¼Œå¹¶å‘æ€§åˆå¥½ï¼Œæ˜¯ç°ä»£ç³»ç»Ÿè¿½æ±‚çš„æ–¹å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç°ä»£æ“ä½œç³»ç»Ÿä¸­çš„å®è·µ"&gt;ğŸ’¡ ç°ä»£æ“ä½œç³»ç»Ÿä¸­çš„å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»æµæ“ä½œç³»ç»Ÿ&lt;/strong&gt;ï¼šç°ä»£é€šç”¨æ“ä½œç³»ç»Ÿå¦‚ &lt;strong&gt;Windows&lt;/strong&gt;ã€&lt;strong&gt;Linux&lt;/strong&gt; å’Œ &lt;strong&gt;macOS&lt;/strong&gt;ï¼Œå…¶&lt;strong&gt;åŸç”Ÿçš„çº¿ç¨‹å®ç°æ™®éé‡‡ç”¨ä¸€å¯¹ä¸€æ¨¡å‹ï¼ˆå†…æ ¸çº§çº¿ç¨‹ï¼‰&lt;/strong&gt;ã€‚ä½ é€šè¿‡ &lt;code&gt;pthread_create&lt;/code&gt;(POSIX) æˆ– &lt;code&gt;CreateThread&lt;/code&gt;(Windows) åˆ›å»ºçš„çº¿ç¨‹ï¼Œå°±æ˜¯å†…æ ¸çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç¨‹è¯­è¨€çš„è¿è¡Œæ—¶&lt;/strong&gt;ï¼šè®¸å¤šè¯­è¨€çš„è™šæ‹Ÿæœºæˆ–è¿è¡Œæ—¶ç¯å¢ƒï¼ˆå¦‚ &lt;strong&gt;Java Virtual Machine (JVM)&lt;/strong&gt;ã€&lt;strong&gt;Go runtime&lt;/strong&gt;ï¼‰ä¼šé‡‡ç”¨&lt;strong&gt;æ··åˆæ¨¡å‹çš„æ€æƒ³&lt;/strong&gt;ã€‚å®ƒä»¬åœ¨ç”¨æˆ·ç©ºé—´ç®¡ç†ç€è‡ªå·±æ›´è½»é‡çš„â€œçº¿ç¨‹â€ï¼ˆåœ¨Goä¸­å«Goroutineï¼Œåœ¨Javaä¸­ï¼ŒJVMçº¿ç¨‹æ¨¡å‹åœ¨ä¸åŒå¹³å°æœ‰å·®å¼‚ï¼Œä¾‹å¦‚åœ¨Linuxä¸ŠHotSpot VMä½¿ç”¨äº†ä¸€å¯¹ä¸€æ¨¡å‹ï¼Œä½†å…¶æ–°çš„çº¤ç¨‹é¡¹ç›®Loomæ—¨åœ¨å¼•å…¥æ›´è½»é‡çš„ç”¨æˆ·çº¿ç¨‹ï¼‰ï¼Œå¹¶å°†å…¶è°ƒåº¦åˆ°æ•°é‡æœ‰é™çš„å†…æ ¸çº¿ç¨‹ï¼ˆçº¿ç¨‹æ± ï¼‰ä¸Šæ‰§è¡Œã€‚è¿™ä½¿å¾—å®ƒä»¬å¯ä»¥æ”¯æŒæé«˜æ•°é‡çš„å¹¶å‘ä»»åŠ¡ï¼Œè€Œä¸è¿‡åˆ†æ¶ˆè€—å†…æ ¸èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„ä¸åŒå®ç°æ–¹å¼åŠå…¶èƒŒåçš„æƒè¡¡ã€‚&lt;/p&gt;
&lt;h2 id="å®ä¾‹åŒ–é¡ºåº"&gt;å®ä¾‹åŒ–é¡ºåº
&lt;/h2&gt;&lt;p&gt;ã€‚ç†è§£ Java ä¸­æ„é€ å‡½æ•°å’Œå˜é‡çš„åˆå§‹åŒ–é¡ºåºå¯¹ç¼–å†™å¯é ä»£ç å¾ˆé‡è¦ã€‚å®ƒéµå¾ªä¸€ä¸ªå›ºå®šçš„å±‚çº§é¡ºåºï¼š&lt;strong&gt;ä»é™æ€åˆ°å®ä¾‹ï¼Œä»çˆ¶ç±»åˆ°å­ç±»&lt;/strong&gt;ã€‚ä¸‹é¢è¿™å¼ æ—¶åºå›¾å¯ä»¥å¸®ä½ ç›´è§‚åœ°æŠŠæ¡å¯¹è±¡åˆ›å»ºå’Œåˆå§‹åŒ–çš„å®Œæ•´æµç¨‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sequenceDiagram
participant JVM
participant ChildClass
participant ParentClass
participant StaticBlocks
Note over JVM: ç¬¬ä¸€æ¬¡åŠ è½½ç±»æ—¶ï¼ˆä¸€æ¬¡æ€§çš„ï¼‰
JVM-&amp;gt;&amp;gt;StaticBlocks: æ‰§è¡Œçˆ¶ç±»é™æ€å˜é‡/é™æ€å—
JVM-&amp;gt;&amp;gt;StaticBlocks: æ‰§è¡Œå­ç±»é™æ€å˜é‡/é™æ€å—
Note over JVM: æ¯æ¬¡ new ChildClass() æ—¶
JVM-&amp;gt;&amp;gt;ParentClass: åˆ†é…å†…å­˜ç©ºé—´ï¼ˆå †ï¼‰
JVM-&amp;gt;&amp;gt;ParentClass: åˆå§‹åŒ–çˆ¶ç±»å®ä¾‹å˜é‡/æ‰§è¡Œå®ä¾‹å—
JVM-&amp;gt;&amp;gt;ParentClass: æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ä½“
JVM-&amp;gt;&amp;gt;ChildClass: åˆå§‹åŒ–å­ç±»å®ä¾‹å˜é‡/æ‰§è¡Œå®ä¾‹å—
JVM-&amp;gt;&amp;gt;ChildClass: æ‰§è¡Œå­ç±»æ„é€ å‡½æ•°ä½“
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†å¯¹è±¡åˆ›å»ºçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œå…¶æ ¸å¿ƒçš„åˆå§‹åŒ–é¡ºåºå¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶ç±»é™æ€æˆå‘˜åˆå§‹åŒ–&lt;/strong&gt;ï¼ˆä»…é¦–æ¬¡åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰
&lt;ul&gt;
&lt;li&gt;çˆ¶ç±»é™æ€å˜é‡èµ‹é»˜è®¤å€¼ï¼ˆ0, false, nullç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;çˆ¶ç±»é™æ€å˜é‡æ˜¾å¼èµ‹å€¼åŠé™æ€åˆå§‹åŒ–å—ï¼ˆæŒ‰ä»£ç ä¹¦å†™é¡ºåºæ‰§è¡Œï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­ç±»é™æ€æˆå‘˜åˆå§‹åŒ–&lt;/strong&gt;ï¼ˆä»…é¦–æ¬¡åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰
&lt;ul&gt;
&lt;li&gt;å­ç±»é™æ€å˜é‡èµ‹é»˜è®¤å€¼&lt;/li&gt;
&lt;li&gt;å­ç±»é™æ€å˜é‡æ˜¾å¼èµ‹å€¼åŠé™æ€åˆå§‹åŒ–å—ï¼ˆæŒ‰ä»£ç ä¹¦å†™é¡ºåºæ‰§è¡Œï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶ç±»å®ä¾‹æˆå‘˜åˆå§‹åŒ–&lt;/strong&gt;ï¼ˆæ¯æ¬¡å®ä¾‹åŒ–æ—¶æ‰§è¡Œï¼‰
&lt;ul&gt;
&lt;li&gt;çˆ¶ç±»å®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼&lt;/li&gt;
&lt;li&gt;çˆ¶ç±»å®ä¾‹å˜é‡æ˜¾å¼èµ‹å€¼åŠå®ä¾‹åˆå§‹åŒ–å—ï¼ˆæŒ‰ä»£ç ä¹¦å†™é¡ºåºæ‰§è¡Œï¼‰&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ä½“&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­ç±»å®ä¾‹æˆå‘˜åˆå§‹åŒ–&lt;/strong&gt;ï¼ˆæ¯æ¬¡å®ä¾‹åŒ–æ—¶æ‰§è¡Œï¼‰
&lt;ul&gt;
&lt;li&gt;å­ç±»å®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼&lt;/li&gt;
&lt;li&gt;å­ç±»å®ä¾‹å˜é‡æ˜¾å¼èµ‹å€¼åŠå®ä¾‹åˆå§‹åŒ–å—ï¼ˆæŒ‰ä»£ç ä¹¦å†™é¡ºåºæ‰§è¡Œï¼‰&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå­ç±»æ„é€ å‡½æ•°ä½“&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä»£ç ç¤ºä¾‹-1"&gt;ğŸ” ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;class Parent {
// é™æ€å˜é‡
static String staticFieldParent = staticMethodParent(&amp;#34;çˆ¶ç±»é™æ€å˜é‡&amp;#34;);
// é™æ€åˆå§‹åŒ–å—
static {
System.out.println(&amp;#34;çˆ¶ç±»é™æ€åˆå§‹åŒ–å—&amp;#34;);
}
// å®ä¾‹å˜é‡
String instanceFieldParent = instanceMethodParent(&amp;#34;çˆ¶ç±»å®ä¾‹å˜é‡&amp;#34;);
// å®ä¾‹åˆå§‹åŒ–å—
{
System.out.println(&amp;#34;çˆ¶ç±»å®ä¾‹åˆå§‹åŒ–å—&amp;#34;);
}
// çˆ¶ç±»æ„é€ å‡½æ•°
public Parent() {
System.out.println(&amp;#34;çˆ¶ç±»æ„é€ å‡½æ•°&amp;#34;);
}
// é™æ€æ–¹æ³•
static String staticMethodParent(String msg) {
System.out.println(msg);
return msg;
}
// å®ä¾‹æ–¹æ³•
String instanceMethodParent(String msg) {
System.out.println(msg);
return msg;
}
}
class Child extends Parent {
// é™æ€å˜é‡
static String staticFieldChild = staticMethodChild(&amp;#34;å­ç±»é™æ€å˜é‡&amp;#34;);
// é™æ€åˆå§‹åŒ–å—
static {
System.out.println(&amp;#34;å­ç±»é™æ€åˆå§‹åŒ–å—&amp;#34;);
}
// å®ä¾‹å˜é‡
String instanceFieldChild = instanceMethodChild(&amp;#34;å­ç±»å®ä¾‹å˜é‡&amp;#34;);
// å®ä¾‹åˆå§‹åŒ–å—
{
System.out.println(&amp;#34;å­ç±»å®ä¾‹åˆå§‹åŒ–å—&amp;#34;);
}
// å­ç±»æ„é€ å‡½æ•°
public Child() {
System.out.println(&amp;#34;å­ç±»æ„é€ å‡½æ•°&amp;#34;);
}
// é™æ€æ–¹æ³•
static String staticMethodChild(String msg) {
System.out.println(msg);
return msg;
}
// å®ä¾‹æ–¹æ³•
String instanceMethodChild(String msg) {
System.out.println(msg);
return msg;
}
}
public class Main {
public static void main(String[] args) {
System.out.println(&amp;#34;ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–å­ç±»:&amp;#34;);
new Child();
System.out.println(&amp;#34;\nç¬¬äºŒæ¬¡å®ä¾‹åŒ–å­ç±»:&amp;#34;);
new Child();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡ºç»“æœ&lt;/strong&gt;:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–å­ç±»:
çˆ¶ç±»é™æ€å˜é‡
çˆ¶ç±»é™æ€åˆå§‹åŒ–å—
å­ç±»é™æ€å˜é‡
å­ç±»é™æ€åˆå§‹åŒ–å—
çˆ¶ç±»å®ä¾‹å˜é‡
çˆ¶ç±»å®ä¾‹åˆå§‹åŒ–å—
çˆ¶ç±»æ„é€ å‡½æ•°
å­ç±»å®ä¾‹å˜é‡
å­ç±»å®ä¾‹åˆå§‹åŒ–å—
å­ç±»æ„é€ å‡½æ•°
ç¬¬äºŒæ¬¡å®ä¾‹åŒ–å­ç±»:
çˆ¶ç±»å®ä¾‹å˜é‡
çˆ¶ç±»å®ä¾‹åˆå§‹åŒ–å—
çˆ¶ç±»æ„é€ å‡½æ•°
å­ç±»å®ä¾‹å˜é‡
å­ç±»å®ä¾‹åˆå§‹åŒ–å—
å­ç±»æ„é€ å‡½æ•°
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™æ€éƒ¨åˆ†&lt;/strong&gt;ï¼ˆå˜é‡å’Œåˆå§‹åŒ–å—ï¼‰åªåœ¨&lt;strong&gt;ç±»ç¬¬ä¸€æ¬¡åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶ï¼Œ&lt;strong&gt;å®ä¾‹éƒ¨åˆ†&lt;/strong&gt;ï¼ˆå˜é‡ã€åˆå§‹åŒ–å—å’Œæ„é€ å‡½æ•°ï¼‰éƒ½ä¼šæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;é¡ºåºä¸¥æ ¼éµå¾ªï¼š&lt;strong&gt;çˆ¶ç±»é™æ€ â†’ å­ç±»é™æ€ â†’ çˆ¶ç±»å®ä¾‹ â†’ çˆ¶ç±»æ„é€  â†’ å­ç±»å®ä¾‹ â†’ å­ç±»æ„é€ &lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®è§„åˆ™ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ å…³é”®è§„åˆ™ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é™æ€ä¼˜å…ˆï¼Œçˆ¶ç±»ä¼˜å…ˆ&lt;/strong&gt;ï¼šé™æ€æˆå‘˜åˆå§‹åŒ–ä¼˜å…ˆäºå®ä¾‹æˆå‘˜ï¼Œçˆ¶ç±»æˆå‘˜åˆå§‹åŒ–ä¼˜å…ˆäºå­ç±»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¡ºåºæ‰§è¡Œ&lt;/strong&gt;ï¼šåŒä¸€çº§åˆ«çš„åˆå§‹åŒ–ï¼ˆå¦‚ä¸¤ä¸ªé™æ€åˆå§‹åŒ–å—æˆ–ä¸¤ä¸ªå®ä¾‹å˜é‡ï¼‰ä¸¥æ ¼æŒ‰ç…§åœ¨ä»£ç ä¸­çš„&lt;strong&gt;å®šä¹‰é¡ºåº&lt;/strong&gt;æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªæ— å‚çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚å¦‚æœå®šä¹‰äº†å¸¦å‚æ„é€ å‡½æ•°ï¼Œæœ€å¥½ä¹Ÿæ˜¾å¼å®šä¹‰æ— å‚æ„é€ å‡½æ•°ï¼Œä»¥å…å­ç±»æˆ–åå°„è°ƒç”¨æ—¶å‡ºé”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šå­ç±»æ„é€ å‡½æ•°çš„ç¬¬ä¸€è¡Œå¿…é¡»é€šè¿‡ &lt;code&gt;super(...)&lt;/code&gt;æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æŸä¸ªæ„é€ å‡½æ•°ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šå°è¯•éšå¼è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å‡½æ•° &lt;code&gt;super()&lt;/code&gt;ã€‚å¦‚æœçˆ¶ç±»æ²¡æœ‰æ— å‚æ„é€ å‡½æ•°ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é€’å½’è°ƒç”¨&lt;/strong&gt;ï¼šåœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ &lt;code&gt;this(...)&lt;/code&gt;è°ƒç”¨åŒç±»å…¶ä»–æ„é€ å‡½æ•°æ—¶ï¼Œè¦é¿å…å½¢æˆé€’å½’è°ƒç”¨é“¾ï¼Œå¯¼è‡´æ ˆæº¢å‡ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¸¸è§è¯¯åŒº"&gt;âš ï¸ å¸¸è§è¯¯åŒº
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å˜é‡åˆå§‹åŒ–ä¸æ„é€ å‡½æ•°&lt;/strong&gt;ï¼šæ‰€æœ‰å®ä¾‹å˜é‡ï¼ˆåŒ…æ‹¬æ˜¾å¼èµ‹å€¼å’Œå®ä¾‹å—ï¼‰çš„åˆå§‹åŒ–éƒ½åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;å®Œæˆã€‚æ„é€ å‡½æ•°ä¸­çš„èµ‹å€¼æ˜¯â€œå†æ¬¡èµ‹å€¼â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— å‚æ„é€ å‡½æ•°çš„ä¸¢å¤±&lt;/strong&gt;ï¼šå¦‚æœä½ ä¸ºä¸€ä¸ªç±»å®šä¹‰äº†å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸å†æä¾›é»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–å¤±è´¥ï¼ˆå¦‚æœå­ç±»æ²¡æœ‰æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æœ‰å‚æ„é€ å‡½æ•°ï¼‰æˆ–åå°„åˆ›å»ºå®ä¾‹å¤±è´¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ Java çš„åˆå§‹åŒ–é¡ºåºã€‚&lt;/p&gt;
&lt;h2 id="arraysaslist"&gt;Arrays.asList
&lt;/h2&gt;&lt;p&gt;Arrays.asList() æ˜¯ Java ä¸­ä¸€ä¸ªéå¸¸æ–¹ä¾¿ä½†å®¹æ˜“è¸©å‘çš„å·¥å…·æ–¹æ³•ï¼Œç”¨äºå°†æ•°ç»„è½¬æ¢ä¸º List é›†åˆã€‚ä¸ºäº†å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒçš„æ ¸å¿ƒç‰¹æ€§ã€ä½¿ç”¨åœºæ™¯å’Œéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Arrays.asList() çš„è¡Œä¸º&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›çš„ List ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;java.util.Arrays.ArrayList&lt;/code&gt;(ä¸€ä¸ªå›ºå®šå¤§å°çš„å†…éƒ¨ç±»ï¼Œ&lt;strong&gt;ä¸æ˜¯&lt;/strong&gt; &lt;code&gt;java.util.ArrayList&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°æ˜¯å¦å¯å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;å›ºå®šå¤§å°&lt;/strong&gt;ï¼Œä¸å¯æ·»åŠ  (&lt;code&gt;add&lt;/code&gt;) æˆ–åˆ é™¤ (&lt;code&gt;remove&lt;/code&gt;) å…ƒç´ ï¼Œå¦åˆ™æŠ›å‡º &lt;code&gt;UnsupportedOperationException&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒç´ æ˜¯å¦å¯ä¿®æ”¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å¯ä»¥ä¿®æ”¹&lt;/strong&gt; (é€šè¿‡ &lt;code&gt;set&lt;/code&gt;æ–¹æ³•)ï¼Œä¿®æ”¹ä¼šç›´æ¥å½±å“åŸå§‹æ•°ç»„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸åŸå§‹æ•°ç»„çš„å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;åŒå‘ç»‘å®š&lt;/strong&gt;ï¼šå¯¹åˆ—è¡¨å…ƒç´ çš„ä¿®æ”¹ä¼šåæ˜ åˆ°åŸå§‹æ•°ç»„ä¸Šï¼Œå¯¹åŸå§‹æ•°ç»„çš„ä¿®æ”¹ä¹Ÿä¼šåæ˜ åˆ°åˆ—è¡¨ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒçš„æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;å¯¹è±¡æ•°ç»„&lt;/strong&gt; (å¦‚ &lt;code&gt;String[]&lt;/code&gt;, &lt;code&gt;Integer[]&lt;/code&gt;) âŒ &lt;strong&gt;åŸºæœ¬ç±»å‹æ•°ç»„&lt;/strong&gt; (å¦‚ &lt;code&gt;int[]&lt;/code&gt;, &lt;code&gt;double[]&lt;/code&gt;)ï¼Œä¼šè¢«è§†ä¸ºå•ä¸ªå…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;ä½&lt;/strong&gt;ï¼Œè¿”å›çš„åˆ—è¡¨ç›´æ¥åŒ…è£…åŸå§‹æ•°ç»„ï¼Œä¸å¤åˆ¶å…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸€ä¸‹å®ƒçš„å…·ä½“ä½¿ç”¨å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒç‰¹æ€§ä¸å¸¸è§ç”¨æ³•"&gt;ğŸ“Œ æ ¸å¿ƒç‰¹æ€§ä¸å¸¸è§ç”¨æ³•
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æ–¹æ³•ç­¾å&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public static &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; asList(T... a)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;1. åŸºç¡€ä½¿ç”¨ï¼šè½¬æ¢å¯¹è±¡æ•°ç»„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;String[]&lt;/code&gt;, &lt;code&gt;Integer[]&lt;/code&gt;è¿™ç±»&lt;strong&gt;å¯¹è±¡æ•°ç»„&lt;/strong&gt;ï¼Œ&lt;code&gt;Arrays.asList()&lt;/code&gt;ä¼šå°†å…¶å…ƒç´ è½¬æ¢ä¸ºåˆ—è¡¨å…ƒç´ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] strArray = {&amp;#34;Apple&amp;#34;, &amp;#34;Banana&amp;#34;, &amp;#34;Cherry&amp;#34;};
List&amp;lt;String&amp;gt; strList = Arrays.asList(strArray);
System.out.println(strList); // è¾“å‡º: [Apple, Banana, Cherry]
// ä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥å…ƒç´ 
List&amp;lt;String&amp;gt; list = Arrays.asList(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;);
System.out.println(list); // è¾“å‡º: [A, B, C]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. ä¿®æ”¹å…ƒç´ ï¼ˆå…è®¸ä¸”ä¼šå½±å“åŸå§‹æ•°ç»„ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;set&lt;/code&gt;æ–¹æ³•ä¿®æ”¹åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸”è¿™ä¸ªä¿®æ”¹ä¼š&lt;strong&gt;ç›´æ¥åæ˜ åˆ°åŸå§‹çš„æ•°ç»„&lt;/strong&gt;ä¸Šã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] arr = {&amp;#34;Apple&amp;#34;, &amp;#34;Banana&amp;#34;};
List&amp;lt;String&amp;gt; list = Arrays.asList(arr);
// ä¿®æ”¹åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
list.set(0, &amp;#34;Orange&amp;#34;);
System.out.println(list); // è¾“å‡º: [Orange, Banana]
System.out.println(arr[0]); // è¾“å‡º: Orange (åŸå§‹æ•°ç»„ä¹Ÿè¢«ä¿®æ”¹äº†)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸å‘"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸â€œå‘â€
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. åˆ—è¡¨å¤§å°å›ºå®šï¼Œä¸å¯å¢åˆ &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Arrays.asList()&lt;/code&gt;è¿”å›çš„åˆ—è¡¨åŸºäºåŸå§‹æ•°ç»„ï¼Œå› æ­¤å¤§å°æ˜¯&lt;strong&gt;å›ºå®š&lt;/strong&gt;çš„ã€‚ä»»ä½•å°è¯•æ·»åŠ æˆ–åˆ é™¤å…ƒç´ çš„æ“ä½œéƒ½ä¼šå¯¼è‡´ &lt;code&gt;UnsupportedOperationException&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; list = Arrays.asList(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;);
// list.add(&amp;#34;C&amp;#34;); // âŒ æŠ›å‡º UnsupportedOperationException
// list.remove(0); // âŒ æŠ›å‡º UnsupportedOperationException
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ğŸ’¡ è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¦‚æœéœ€è¦å¯å˜åˆ—è¡¨ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;ArrayList&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; mutableList = new ArrayList&amp;lt;&amp;gt;(Arrays.asList(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;));
mutableList.add(&amp;#34;C&amp;#34;); // âœ… ç°åœ¨å¯ä»¥æ­£å¸¸æ·»åŠ äº†
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. åŸºæœ¬ç±»å‹æ•°ç»„çš„é™·é˜±&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¼ å…¥ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼ˆå¦‚ &lt;code&gt;int[]&lt;/code&gt;, &lt;code&gt;double[]&lt;/code&gt;ï¼‰çš„æ•°ç»„ï¼Œæ•´ä¸ªæ•°ç»„ä¼šè¢«è§†ä¸º&lt;strong&gt;å•ä¸ªå¯¹è±¡&lt;/strong&gt;ä½œä¸ºåˆ—è¡¨çš„ä¸€ä¸ªå…ƒç´ ï¼Œè€Œä¸æ˜¯å°†æ•°ç»„ä¸­çš„æ¯ä¸ªåŸºæœ¬ç±»å‹å€¼è½¬æ¢ä¸ºåˆ—è¡¨å…ƒç´ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int[] intArray = {1, 2, 3};
List&amp;lt;int[]&amp;gt; list = Arrays.asList(intArray); // æ³¨æ„ï¼šè¿™é‡Œæ˜¯ List&amp;lt;int[]&amp;gt;ï¼Œè€Œä¸æ˜¯ List&amp;lt;Integer&amp;gt;
System.out.println(list.size()); // è¾“å‡º: 1 (åˆ—è¡¨é‡Œåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯æ•´ä¸ªintArrayæ•°ç»„)
System.out.println(Arrays.toString(list.get(0))); // è¾“å‡º: [1, 2, 3]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ğŸ’¡ è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨&lt;strong&gt;åŒ…è£…ç±»å‹æ•°ç»„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Integer[] integerArray = {1, 2, 3};
List&amp;lt;Integer&amp;gt; list = Arrays.asList(integerArray); // âœ… æ­£ç¡®ï¼šList&amp;lt;Integer&amp;gt;
System.out.println(list.size()); // è¾“å‡º: 3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…åœ¨ Java 8 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä½¿ç”¨ Stream API è½¬æ¢ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int[] intArray = {1, 2, 3};
List&amp;lt;Integer&amp;gt; list = Arrays.stream(intArray).boxed().collect(Collectors.toList());
System.out.println(list); // è¾“å‡º: [1, 2, 3]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;3. è¿”å›çš„åˆ—è¡¨ç”±åŸå§‹æ•°ç»„æ”¯æŒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€å¯¹åˆ—è¡¨å…ƒç´ çš„ä¿®æ”¹ä¼šå½±å“åŸå§‹æ•°ç»„ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™æœ‰æ—¶å¯èƒ½ä¸æ˜¯ä½ é¢„æœŸçš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] arr = {&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;};
List&amp;lt;String&amp;gt; list = Arrays.asList(arr);
arr[0] = &amp;#34;Z&amp;#34;; // ä¿®æ”¹åŸå§‹æ•°ç»„
System.out.println(list); // è¾“å‡º: [Z, B, C] (åˆ—è¡¨ä¹Ÿè·Ÿç€å˜äº†)
list.set(1, &amp;#34;Y&amp;#34;); // ä¿®æ”¹åˆ—è¡¨
System.out.println(Arrays.toString(arr)); // è¾“å‡º: [Z, Y, C] (åŸå§‹æ•°ç»„ä¹Ÿè·Ÿç€å˜äº†)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ¯ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿«é€Ÿåˆ›å»ºå›ºå®šå¤§å°çš„åˆ—è¡¨&lt;/strong&gt;ï¼šé€‚ç”¨äºåˆå§‹åŒ–ä¸€äº›å¸¸é‡æˆ–æµ‹è¯•æ•°æ®ï¼Œå¹¶ä¸”åç»­ä¸éœ€è¦æ”¹å˜åˆ—è¡¨å¤§å°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; names = Arrays.asList(&amp;#34;Alice&amp;#34;, &amp;#34;Bob&amp;#34;, &amp;#34;Charlie&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœŸæœ›æ¥æ”¶ List çš„ API&lt;/strong&gt;ï¼šå½“æŸä¸ªæ–¹æ³•æ¥æ”¶ &lt;code&gt;List&lt;/code&gt;ç±»å‹å‚æ•°ï¼Œè€Œä½ æ‰‹å¤´æ˜¯æ•°ç»„æ—¶ï¼Œå¯ä»¥å¿«é€Ÿè½¬æ¢ï¼ˆç¡®ä¿åç»­ä¸ä¼šè¯•å›¾ä¿®æ”¹å¤§å°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°æ•°ç»„å’Œé›†åˆçš„è”åˆè§†å›¾&lt;/strong&gt;ï¼šåˆ©ç”¨å…¶ä¸åŸå§‹æ•°ç»„çš„â€œåŒå‘ç»‘å®šâ€ç‰¹æ€§ï¼Œæœ‰æ—¶å¯ä»¥æ–¹ä¾¿æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ“– æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Arrays.asList()&lt;/code&gt;æ˜¯ä¸€ä¸ªä¾¿æ·çš„æ¡¥æ¢ï¼Œç”¨äºæ•°ç»„åˆ°åˆ—è¡¨çš„è½¬æ¢ï¼Œä½†å…¶&lt;strong&gt;å›ºå®šå¤§å°&lt;/strong&gt;å’Œ&lt;strong&gt;åŒå‘ç»‘å®š&lt;/strong&gt;çš„ç‰¹æ€§éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ éœ€è¦ä¸€ä¸ª&lt;strong&gt;åªè¯»ã€ä¸æ”¹å˜å¤§å°&lt;/strong&gt;çš„åˆ—è¡¨è§†å›¾æ—¶ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;Arrays.asList()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦ä¸€å€‹&lt;strong&gt;å¯å¢åˆ å…ƒç´ &lt;/strong&gt;çš„åˆ—è¡¨æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(Arrays.asList(...))&lt;/code&gt;åŒ…è£…ä¸€ä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;å¤„ç†&lt;strong&gt;åŸºæœ¬ç±»å‹æ•°ç»„&lt;/strong&gt;æ—¶ï¼Œè®°å¾—ä½¿ç”¨&lt;strong&gt;åŒ…è£…ç±»å‹æ•°ç»„&lt;/strong&gt;æˆ– &lt;strong&gt;Stream API&lt;/strong&gt; æ¥é¿å…é™·é˜±ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Java 9+ ä¸­ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;List.of(...)&lt;/code&gt;æ¥åˆ›å»º&lt;strong&gt;ä¸å¯å˜åˆ—è¡¨&lt;/strong&gt;ï¼Œå®ƒä¸åŸå§‹æ•°ç»„æ²¡æœ‰ç»‘å®šå…³ç³»ï¼Œä½†åŒæ ·ä¸èƒ½ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;Arrays.asList()&lt;/code&gt;ï¼&lt;/p&gt;
&lt;h2 id="sleep--wait"&gt;sleep &amp;amp; wait
&lt;/h2&gt;&lt;p&gt;äº†è§£ &lt;code&gt;sleep()&lt;/code&gt;å’Œ &lt;code&gt;wait()&lt;/code&gt;çš„åŒºåˆ«å¯¹ç¼–å†™æ­£ç¡®çš„å¤šçº¿ç¨‹ç¨‹åºè‡³å…³é‡è¦ã€‚è™½ç„¶å®ƒä»¬éƒ½èƒ½æš‚åœçº¿ç¨‹ï¼Œä½†è®¾è®¡å’Œç”¨é€”æˆªç„¶ä¸åŒã€‚ä¸ºäº†å¸®ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªå…¨å±€å°è±¡ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥å¯¹æ¯”å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Thread.sleep()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Object.wait()&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰€å±ç±»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Thread&lt;/code&gt;ç±»çš„&lt;strong&gt;é™æ€æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Object&lt;/code&gt;ç±»çš„&lt;strong&gt;å®ä¾‹æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é”é‡Šæ”¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸ä¼šé‡Šæ”¾&lt;/strong&gt;ä»»ä½•æŒæœ‰çš„é”&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;ç«‹å³é‡Šæ”¾&lt;/strong&gt;å…¶æŒæœ‰çš„é”ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹ç«äº‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å”¤é†’æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â° &lt;strong&gt;è¶…æ—¶è‡ªåŠ¨å”¤é†’&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ğŸ”” éœ€å…¶ä»–çº¿ç¨‹è°ƒç”¨ &lt;strong&gt;&lt;code&gt;notify()&lt;/code&gt;/&lt;code&gt;notifyAll()&lt;/code&gt;&lt;/strong&gt; æˆ–è¶…æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯åœ¨&lt;strong&gt;ä»»ä½•åœ°æ–¹&lt;/strong&gt;è°ƒç”¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»åœ¨ &lt;code&gt;synchronized&lt;/code&gt;åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­&lt;/strong&gt;è°ƒç”¨ï¼Œå¦åˆ™æŠ› &lt;code&gt;IllegalMonitorStateException&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›å…¥ &lt;code&gt;TIMED_WAITING&lt;/code&gt;(æœ‰æ—¶é™ç­‰å¾…)&lt;/td&gt;
&lt;td&gt;è¿›å…¥ &lt;code&gt;WAITING&lt;/code&gt;(æ— å‚, æ— é™ç­‰å¾…) æˆ– &lt;code&gt;TIMED_WAITING&lt;/code&gt;(å¸¦è¶…æ—¶å‚æ•°)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®©å½“å‰çº¿ç¨‹&lt;strong&gt;æš‚åœæ‰§è¡Œ&lt;/strong&gt;ä¸€æ®µæ—¶é—´ï¼Œä¸çº¿ç¨‹é—´åä½œæ— å…³&lt;/td&gt;
&lt;td&gt;ç”¨äº&lt;strong&gt;çº¿ç¨‹é—´åä½œ&lt;/strong&gt;ï¼Œè®©çº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶æˆç«‹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŒºåˆ«è¯¦è§£"&gt;ğŸ” æ ¸å¿ƒåŒºåˆ«è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-æ‰€å±ç±»ä¸åŸºæœ¬ä½œç”¨"&gt;1. æ‰€å±ç±»ä¸åŸºæœ¬ä½œç”¨
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Thread.sleep()&lt;/code&gt;&lt;/strong&gt; æ˜¯ &lt;code&gt;Thread&lt;/code&gt;ç±»çš„é™æ€æ–¹æ³•ã€‚å®ƒçš„ä½œç”¨æ˜¯è®©&lt;strong&gt;å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹&lt;/strong&gt;æš‚åœï¼ˆä¼‘çœ ï¼‰æŒ‡å®šçš„æ—¶é—´ï¼Œ&lt;strong&gt;ä¸æ¶‰åŠçº¿ç¨‹é—´çš„é€šä¿¡æˆ–é”çš„åè°ƒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Object.wait()&lt;/code&gt;&lt;/strong&gt; æ˜¯ &lt;code&gt;Object&lt;/code&gt;ç±»çš„å®ä¾‹æ–¹æ³•ã€‚å®ƒç”¨äº&lt;strong&gt;çº¿ç¨‹é—´é€šä¿¡&lt;/strong&gt;ï¼Œé€šå¸¸ä¸ &lt;code&gt;notify()&lt;/code&gt;/&lt;code&gt;notifyAll()&lt;/code&gt;é…å¯¹ä½¿ç”¨ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹ä¸»åŠ¨ç­‰å¾…æŸä¸ªæ¡ä»¶æˆç†Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-å¯¹é”çš„å½±å“æœ€å…³é”®çš„åŒºåˆ«"&gt;2. å¯¹é”çš„å½±å“ï¼ˆæœ€å…³é”®çš„åŒºåˆ«ï¼‰
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Thread.sleep()&lt;/code&gt;&lt;/strong&gt; åœ¨ä¼‘çœ æ—¶ï¼Œ&lt;strong&gt;ä¸ä¼šé‡Šæ”¾&lt;/strong&gt;å®ƒå½“å‰æŒæœ‰çš„ä»»ä½•é”ï¼ˆå¦‚ &lt;code&gt;synchronized&lt;/code&gt;æŒæœ‰çš„å¯¹è±¡ç›‘è§†å™¨é”ï¼‰ã€‚è¿™æ„å‘³ç€å…¶ä»–éœ€è¦è¯¥é”çš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Object.wait()&lt;/code&gt;&lt;/strong&gt; åœ¨è°ƒç”¨æ—¶ï¼Œ&lt;strong&gt;ä¼šç«‹å³é‡Šæ”¾&lt;/strong&gt;å®ƒå½“å‰æŒæœ‰çš„é”ï¼ˆå³è°ƒç”¨è¯¥æ–¹æ³•çš„ &lt;code&gt;synchronized&lt;/code&gt;å¯¹è±¡é”ï¼‰ã€‚è¿™æ­£æ˜¯å®ƒèƒ½å®ç°çº¿ç¨‹é—´åä½œçš„åŸºç¡€â€”â€”é‡Šæ”¾é”ä»¥ä¾¿å…¶ä»–çº¿ç¨‹å¯ä»¥è¿›å…¥åŒæ­¥å—ä¿®æ”¹æ¡ä»¶ï¼Œå¹¶è°ƒç”¨ &lt;code&gt;notify()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-å”¤é†’æœºåˆ¶"&gt;3. å”¤é†’æœºåˆ¶
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Thread.sleep()&lt;/code&gt;&lt;/strong&gt; åœ¨æŒ‡å®šçš„æ—¶é—´è¿‡åï¼Œçº¿ç¨‹ä¼š&lt;strong&gt;è‡ªåŠ¨è‹é†’&lt;/strong&gt;å¹¶å°è¯•ç»§ç»­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Object.wait()&lt;/code&gt;&lt;/strong&gt; é€šå¸¸éœ€è¦&lt;strong&gt;å…¶ä»–çº¿ç¨‹&lt;/strong&gt;ä¸»åŠ¨è°ƒç”¨&lt;strong&gt;åŒä¸€ä¸ªå¯¹è±¡&lt;/strong&gt;çš„ &lt;code&gt;notify()&lt;/code&gt;æˆ– &lt;code&gt;notifyAll()&lt;/code&gt;æ–¹æ³•æ¥å”¤é†’å®ƒã€‚å®ƒä¹Ÿå¯ä»¥è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼ˆ&lt;code&gt;wait(long timeout)&lt;/code&gt;ï¼‰ï¼Œé¿å…æ— é™æœŸç­‰å¾…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-è°ƒç”¨è¦æ±‚ä¸å¼‚å¸¸"&gt;4. è°ƒç”¨è¦æ±‚ä¸å¼‚å¸¸
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Thread.sleep()&lt;/code&gt;&lt;/strong&gt; å¯ä»¥åœ¨ä»»ä½•ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ï¼Œæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ã€‚å®ƒéœ€è¦å¤„ç† &lt;code&gt;InterruptedException&lt;/code&gt;ï¼Œè¡¨ç¤ºä¼‘çœ è¿‡ç¨‹å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Object.wait()&lt;/code&gt;&lt;/strong&gt; &lt;strong&gt;å¿…é¡»&lt;/strong&gt;åœ¨ &lt;code&gt;synchronized&lt;/code&gt;ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­è°ƒç”¨ï¼Œå¦åˆ™è¿è¡Œæ—¶ä¼šæŠ›å‡º &lt;code&gt;IllegalMonitorStateException&lt;/code&gt;ã€‚åŒæ ·ï¼Œå®ƒä¹Ÿä¼šæŠ›å‡º &lt;code&gt;InterruptedException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="5-çº¿ç¨‹çŠ¶æ€"&gt;5. çº¿ç¨‹çŠ¶æ€
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è°ƒç”¨ &lt;code&gt;sleep()&lt;/code&gt;åï¼Œçº¿ç¨‹è¿›å…¥ &lt;strong&gt;&lt;code&gt;TIMED_WAITING&lt;/code&gt;&lt;/strong&gt; ï¼ˆæœ‰æ—¶é™ç­‰å¾…ï¼‰çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨æ— å‚çš„ &lt;code&gt;wait()&lt;/code&gt;åï¼Œçº¿ç¨‹è¿›å…¥ &lt;strong&gt;&lt;code&gt;WAITING&lt;/code&gt;&lt;/strong&gt; ï¼ˆæ— é™ç­‰å¾…ï¼‰çŠ¶æ€ï¼›è°ƒç”¨å¸¦è¶…æ—¶å‚æ•°çš„ &lt;code&gt;wait(long timeout)&lt;/code&gt;åï¼Œçº¿ç¨‹è¿›å…¥ &lt;strong&gt;&lt;code&gt;TIMED_WAITING&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è™šå‡å”¤é†’ (Spurious Wakeup)&lt;/strong&gt;ï¼š&lt;code&gt;wait()&lt;/code&gt;æ–¹æ³•å¯èƒ½å­˜åœ¨è™šå‡å”¤é†’ï¼Œå³çº¿ç¨‹åœ¨æ²¡æœ‰æ”¶åˆ° &lt;code&gt;notify&lt;/code&gt;çš„æƒ…å†µä¸‹è¢«å”¤é†’ã€‚å› æ­¤ï¼Œ&lt;strong&gt;&lt;code&gt;wait()&lt;/code&gt;çš„è°ƒç”¨åº”è¯¥å§‹ç»ˆæ”¾åœ¨å¾ªç¯ä¸­&lt;/strong&gt;ï¼Œä¸æ–­æ£€æŸ¥ç­‰å¾…çš„æ¡ä»¶æ˜¯å¦çœŸæ­£æ»¡è¶³ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;synchronized (lock) {
while (!condition) { // ç”¨ while è€Œä¸æ˜¯ if æ¥æ£€æŸ¥æ¡ä»¶
lock.wait();
}
// æ¡ä»¶æ»¡è¶³ï¼Œç»§ç»­æ‰§è¡Œ
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;InterruptedException&lt;/code&gt;å¤„ç†&lt;/strong&gt;ï¼šä¸¤è€…éƒ½ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œè¡¨ç¤ºç­‰å¾…/ä¼‘çœ è¢«ä¸­æ–­ã€‚æ•è·ååº”æ ¹æ®å®é™…æƒ…å†µå†³å®šæ˜¯æ¢å¤ä¸­æ–­çŠ¶æ€è¿˜æ˜¯ç›´æ¥å¤„ç†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;try {
Thread.sleep(1000);
} catch (InterruptedException e) {
Thread.currentThread().interrupt(); // æ¢å¤ä¸­æ–­çŠ¶æ€æ˜¯è‰¯å¥½å®è·µ
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¸è®¾è®¡&lt;/strong&gt;ï¼šåœ¨å¤æ‚çš„çº¿ç¨‹åä½œåœºæ™¯ä¸­ï¼Œä» Java 5 å¼€å§‹ï¼Œ&lt;strong&gt;&lt;code&gt;java.util.concurrent&lt;/code&gt;&lt;/strong&gt; åŒ…ä¸‹çš„å·¥å…·ï¼ˆå¦‚ &lt;code&gt;Condition&lt;/code&gt;ã€&lt;code&gt;CountDownLatch&lt;/code&gt;ã€&lt;code&gt;CyclicBarrier&lt;/code&gt;ã€&lt;code&gt;Semaphore&lt;/code&gt;ï¼‰é€šå¸¸æä¾›äº†æ¯” &lt;code&gt;wait()/notify()&lt;/code&gt;æ›´å¼ºå¤§ã€æ›´æ˜“ç”¨ã€æ›´å®‰å…¨çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼Œæ˜¯ç°ä»£å¹¶å‘ç¼–ç¨‹çš„é¦–é€‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©sleep-è¿˜æ˜¯-wait"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©ï¼šsleep è¿˜æ˜¯ waitï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å–å†³äºä½ çš„ç›®çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½“ä½ éœ€è¦è®©å½“å‰çº¿ç¨‹ç®€å•åœ°æš‚åœæ‰§è¡Œä¸€æ®µæ—¶é—´&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œæ¨¡æ‹Ÿè€—æ—¶æ“ä½œã€å®šæ—¶ä»»åŠ¡ã€æ§åˆ¶å¾ªç¯é¢‘ç‡ï¼‰ï¼Œå¹¶ä¸”&lt;strong&gt;ä¸éœ€è¦ä¸å…¶ä»–çº¿ç¨‹åè°ƒ&lt;/strong&gt;æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;Thread.sleep()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å½“ä½ éœ€è¦è®©å½“å‰çº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶æˆç«‹&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œç­‰å¾…ä»»åŠ¡å®Œæˆã€ç­‰å¾…èµ„æºå°±ç»ªï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªæ¡ä»¶éœ€è¦&lt;strong&gt;ç”±å…¶ä»–çº¿ç¨‹æ¥æ”¹å˜å’Œé€šçŸ¥&lt;/strong&gt;æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;Object.wait()&lt;/code&gt;å’Œ &lt;code&gt;notify()&lt;/code&gt;/&lt;code&gt;notifyAll()&lt;/code&gt;ã€‚è¿™æ˜¯å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…ã€ç­‰å¾…-é€šçŸ¥ç­‰æ¨¡å¼çš„åŸºçŸ³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;sleep()&lt;/code&gt;å’Œ &lt;code&gt;wait()&lt;/code&gt;çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="web-inf"&gt;WEB-INF
&lt;/h2&gt;&lt;p&gt;WEB-INF ç›®å½•æ˜¯ Java Web åº”ç”¨ç¨‹åºä¸­ä¸€ä¸ªéå¸¸å…³é”®ä¸”ç‰¹æ®Šçš„&lt;strong&gt;å®‰å…¨ç›®å½•&lt;/strong&gt;ï¼Œä¸»è¦ç”¨äºå­˜æ”¾å„ç§é…ç½®æ–‡ä»¶å’Œæ ¸å¿ƒèµ„æºã€‚å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š&lt;strong&gt;å®¢æˆ·ç«¯æ— æ³•é€šè¿‡æµè§ˆå™¨ç›´æ¥è®¿é—®&lt;/strong&gt;ï¼Œåªæœ‰æœåŠ¡å™¨ç«¯ä»£ç å¯ä»¥è¯»å–ï¼Œè¿™æœ‰æ•ˆä¿æŠ¤äº†æ•æ„Ÿä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œå¸®ä½ å¿«é€Ÿäº†è§£ WEB-INF ç›®å½•çš„ä¸»è¦ç»“æ„å’Œå†…å®¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç›®å½•/æ–‡ä»¶&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;æ˜¯å¦å¯ç›´æ¥é€šè¿‡ URL è®¿é—®&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/web.xml&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Web åº”ç”¨ç¨‹åºçš„&lt;strong&gt;éƒ¨ç½²æè¿°æ–‡ä»¶&lt;/strong&gt;ï¼Œç”¨äºé…ç½® Servletã€è¿‡æ»¤å™¨ã€ç›‘å¬å™¨ã€æ¬¢è¿é¡µé¢ç­‰ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/classes/&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜æ”¾é¡¹ç›®ç¼–è¯‘åçš„ &lt;strong&gt;Java ç±»æ–‡ä»¶&lt;/strong&gt; (.class)ï¼Œå¦‚ Servletã€å·¥å…·ç±»ç­‰ã€‚é€šå¸¸æŒ‰åŒ…ç»“æ„ç»„ç»‡ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/lib/&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜æ”¾é¡¹ç›®ä¾èµ–çš„&lt;strong&gt;ç¬¬ä¸‰æ–¹ JAR åŒ…&lt;/strong&gt;ï¼Œå¦‚æ•°æ®åº“é©±åŠ¨ã€å·¥å…·åº“ç­‰ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/src/&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€‰ç›®å½•ï¼Œå¸¸ç”¨äºå­˜æ”¾&lt;strong&gt;Java æºä»£ç &lt;/strong&gt; (.java)ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/tags/&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜æ”¾&lt;strong&gt;è‡ªå®šä¹‰ JSP æ ‡ç­¾åº“&lt;/strong&gt;çš„æ ‡ç­¾æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/jsp/&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¸¸ç”¨äºå­˜æ”¾ä¸å¸Œæœ›è¢«ç›´æ¥è®¿é—®çš„ &lt;strong&gt;JSP é¡µé¢&lt;/strong&gt;ï¼Œéœ€é€šè¿‡ Servlet è½¬å‘è®¿é—®ä»¥æé«˜å®‰å…¨æ€§ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/WEB-INF/database.properties&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯å­˜æ”¾&lt;strong&gt;æ•°æ®åº“è¿æ¥é…ç½®&lt;/strong&gt;ç­‰æ•æ„Ÿä¿¡æ¯çš„å±æ€§æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;/META-INF/&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸å­˜åœ¨äº WAR åŒ…ä¸­ï¼Œç”¨äºå­˜æ”¾&lt;strong&gt;å…ƒæ•°æ®ä¿¡æ¯&lt;/strong&gt;ï¼Œå¦‚ MANIFEST.MF æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;td&gt;å¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®‰å…¨è®¾è®¡ä¸è®¿é—®é¡»çŸ¥"&gt;ğŸ”’ å®‰å…¨è®¾è®¡ä¸è®¿é—®é¡»çŸ¥
&lt;/h3&gt;&lt;p&gt;WEB-INF ç›®å½•çš„&lt;strong&gt;æ ¸å¿ƒè®¾è®¡ç›®æ ‡å°±æ˜¯å®‰å…¨&lt;/strong&gt;ã€‚æ‰€æœ‰æ”¾åœ¨æ­¤ç›®å½•ä¸‹çš„èµ„æºéƒ½å—åˆ°ä¿æŠ¤ï¼Œè¿™æ„å‘³ç€ä½ æ— æ³•é€šè¿‡åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ &lt;code&gt;http://yourdomain.com/yourapp/WEB-INF/web.xml&lt;/code&gt;è¿™æ ·çš„æ–¹å¼æ¥ç›´æ¥è®¿é—®æˆ–ä¸‹è½½å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå‰ç«¯é¡µé¢éœ€è¦ç”¨åˆ° WEB-INF ç›®å½•ä¸‹çš„æŸäº›èµ„æºï¼ˆæ¯”å¦‚å›¾ç‰‡ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰ï¼Œ&lt;strong&gt;å¿…é¡»é€šè¿‡æœåŠ¡å™¨ç«¯ç¨‹åºï¼ˆå¦‚ Servletã€Spring MVC æ§åˆ¶å™¨ï¼‰è¿›è¡Œè¯»å–å’Œè½¬å‘&lt;/strong&gt;ï¼Œæˆ–è€…è€ƒè™‘å°†éœ€è¦å…¬å¼€è®¿é—®çš„èµ„æº&lt;strong&gt;æ”¾ç½®åœ¨å…¶ä»–å…¬å…±ç›®å½•&lt;/strong&gt;ä¸­ï¼ˆå¦‚ WebContent æ ¹ç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶å¤¹ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•ç¼–ç¨‹è®¿é—®-web-inf-ä¸­çš„èµ„æº"&gt;ğŸ› ï¸ å¦‚ä½•ç¼–ç¨‹è®¿é—® WEB-INF ä¸­çš„èµ„æº
&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶ä¸èƒ½ç›´æ¥é€šè¿‡ URL è®¿é—®ï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨ç«¯ä»£ç éœ€è¦è¯»å– WEB-INF ä¸­çš„èµ„æºï¼ˆä¾‹å¦‚ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼‰ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;ServletContext.getResourceAsStream()&lt;/code&gt;æ–¹æ³•æ¥å®ç°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// åœ¨ Servlet æˆ– Controller ä¸­ç¤ºä¾‹
String configPath = &amp;#34;/WEB-INF/database.properties&amp;#34;;
InputStream inputStream = getServletContext().getResourceAsStream(configPath);
// ç„¶åå°±å¯ä»¥ä½¿ç”¨ InputStream æ¥è¯»å–é…ç½®æ–‡ä»¶çš„å†…å®¹äº†
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æé†’"&gt;ğŸ’ é‡è¦æé†’
&lt;/h3&gt;&lt;p&gt;WEB-INF ç›®å½•å¯¹äºç»„ç»‡ä¸€ä¸ªæ¸…æ™°ã€å®‰å…¨ã€æ˜“äºç»´æŠ¤çš„ Java Web åº”ç”¨è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯·å°†&lt;strong&gt;æ‰€æœ‰æ•æ„Ÿçš„é…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼‰ã€&lt;strong&gt;ç¼–è¯‘åçš„ç±»æ–‡ä»¶&lt;/strong&gt;ã€&lt;strong&gt;ä¾èµ–çš„åº“æ–‡ä»¶&lt;/strong&gt;æ”¾å…¥ WEB-INF ç›®å½•ä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;ä»»ä½•ä½ &lt;strong&gt;ä¸å¸Œæœ›ç”¨æˆ·ç›´æ¥é€šè¿‡ URL è®¿é—®åˆ°çš„èµ„æº&lt;/strong&gt;ï¼ˆæ¯”å¦‚ä¸€äº›ç”¨ä½œæ¨¡æ¿çš„ JSP é¡µé¢ï¼‰ï¼Œéƒ½åº”æ”¾åœ¨ WEB-INF ç›®å½•ä¸‹ï¼Œå¹¶é€šè¿‡ Servlet è½¬å‘çš„æ–¹å¼è¿›è¡Œè®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ WEB-INF ç›®å½•ã€‚&lt;/p&gt;
&lt;h2 id="boostrap-classloader"&gt;Boostrap ClassLoader
&lt;/h2&gt;&lt;p&gt;Bootstrap ClassLoaderï¼ˆå¯åŠ¨ç±»åŠ è½½å™¨ï¼‰æ˜¯ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ç±»åŠ è½½å™¨å±‚æ¬¡ç»“æ„ä¸­æœ€é¡¶å±‚çš„ç±»åŠ è½½å™¨ï¼Œå®ƒç¡®å®ç”± JVM çš„&lt;strong&gt;æœ¬åœ°ä»£ç ï¼ˆå¦‚ C/C++ï¼‰å®ç°&lt;/strong&gt;ï¼Œè´Ÿè´£åŠ è½½ Java çš„æ ¸å¿ƒç±»åº“ï¼ˆå¦‚ &lt;code&gt;rt.jar&lt;/code&gt;ï¼‰ï¼Œå¹¶ä¸”å…¶æœ¬èº«&lt;strong&gt;å°±æ˜¯ JVM è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½æ›´æ¸…æ™°åœ°ç†è§£ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“å®ƒçš„æ ¸å¿ƒç‰¹æ€§ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”± &lt;strong&gt;JVM æœ¬åœ°ä»£ç ï¼ˆC/C++ï¼‰&lt;/strong&gt; å®ç°ï¼Œå¹¶é Java ç±»&lt;/td&gt;
&lt;td&gt;å› æ­¤&lt;strong&gt;æ— æ³•åœ¨ Java ä»£ç ä¸­ç›´æ¥è·å–å…¶å¼•ç”¨&lt;/strong&gt;ï¼Œå…¶çˆ¶åŠ è½½å™¨è¡¨ç°ä¸º &lt;code&gt;null&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ è½½ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è´Ÿè´£åŠ è½½ &lt;strong&gt;Java æ ¸å¿ƒç±»åº“&lt;/strong&gt;ï¼Œå¦‚ &lt;code&gt;$JAVA_HOME/lib&lt;/code&gt;ç›®å½•ä¸‹çš„ &lt;code&gt;rt.jar&lt;/code&gt;ã€&lt;code&gt;charsets.jar&lt;/code&gt;ã€&lt;code&gt;jce.jar&lt;/code&gt;ç­‰ï¼Œè¿™äº›åº“åŒ…å«äº† &lt;code&gt;java.lang.*&lt;/code&gt;ã€&lt;code&gt;java.util.*&lt;/code&gt;ç­‰åŸºç¡€ç±»ã€‚&lt;/td&gt;
&lt;td&gt;ç¡®ä¿ JVM è¿è¡Œæ‰€éœ€çš„æœ€åŸºç¡€ç±»ç”±æœ€é«˜ä¼˜å…ˆçº§çš„åŠ è½½å™¨åŠ è½½ï¼Œä¿éšœæ ¸å¿ƒåº“çš„å®‰å…¨æ€§å’Œå”¯ä¸€æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ è½½è·¯å¾„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤è·¯å¾„ä¸º &lt;code&gt;$JAVA_HOME/lib&lt;/code&gt;ã€‚å¯é€šè¿‡ JVM å¯åŠ¨å‚æ•° &lt;strong&gt;&lt;code&gt;-Xbootclasspath&lt;/code&gt;&lt;/strong&gt; æ¥æŒ‡å®šé¢å¤–çš„è·¯å¾„æˆ–è¦†ç›–é»˜è®¤è·¯å¾„ï¼ˆä½†éœ€è°¨æ…ä½¿ç”¨ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ¨ Java ä¸­çš„è¡¨ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ Java ä»£ç ä¸­ï¼Œå°è¯•è·å– &lt;code&gt;Bootstrap ClassLoader&lt;/code&gt;ä¼šå¾—åˆ° &lt;code&gt;null&lt;/code&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;String.class.getClassLoader()&lt;/code&gt;ä¼šè¿”å› &lt;code&gt;null&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;è¿™æ˜¯å› ä¸ºå®ƒä¸æ˜¯ Java ç±»ï¼ŒJava å±‚æ— æ³•ç›´æ¥è®¿é—®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒè´£ä¸é‡è¦æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º&lt;strong&gt;æ‰€æœ‰å…¶ä»–ç±»åŠ è½½å™¨çš„ç»ˆæçˆ¶åŠ è½½å™¨&lt;/strong&gt;ï¼Œæ˜¯&lt;strong&gt;åŒäº²å§”æ´¾æ¨¡å‹&lt;/strong&gt;çš„åŸºçŸ³ã€‚ä»»ä½•ç±»çš„åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½ä¼šå§”æ´¾ç»™å®ƒå°è¯•åŠ è½½ï¼Œè¿™é˜²æ­¢äº†æ ¸å¿ƒ API è¢«ç¯¡æ”¹ã€‚&lt;/td&gt;
&lt;td&gt;ä¿è¯äº† Java ç¨‹åºè¿è¡Œçš„åŸºç¡€å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å±‚çº§åœ°ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½äºç±»åŠ è½½å™¨å±‚æ¬¡ç»“æ„çš„&lt;strong&gt;æœ€é¡¶ç«¯&lt;/strong&gt;ã€‚&lt;code&gt;ExtClassLoader&lt;/code&gt;ï¼ˆæ‰©å±•ç±»åŠ è½½å™¨ï¼‰çš„çˆ¶åŠ è½½å™¨åœ¨é€»è¾‘ä¸Šæ˜¯ &lt;code&gt;Bootstrap ClassLoader&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¡¥å……è¯´æ˜"&gt;ğŸ’¡ è¡¥å……è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;â€œè™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†â€çš„å«ä¹‰&lt;/strong&gt;ï¼šè¿™æ„å‘³ç€ &lt;code&gt;Bootstrap ClassLoader&lt;/code&gt;çš„ä»£ç é€»è¾‘&lt;strong&gt;ç´§å¯†é›†æˆåœ¨ JVM çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;jvm.dll&lt;/code&gt;æˆ– &lt;code&gt;libjvm.so&lt;/code&gt;ï¼‰ä¸­&lt;/strong&gt;ï¼Œéš JVM çš„å¯åŠ¨è€Œä¸€åŒåˆå§‹åŒ–ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ JVM è¿›ç¨‹å®Œå…¨ç»‘å®šï¼Œä¸åŒäºå…¶ä»–ç”± Java ç¼–å†™çš„ç±»åŠ è½½å™¨ï¼ˆå¦‚ &lt;code&gt;AppClassLoader&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸åŒäº²å§”æ´¾æ¨¡å‹çš„å…³ç³»&lt;/strong&gt;ï¼š&lt;code&gt;Bootstrap ClassLoader&lt;/code&gt;æ˜¯&lt;strong&gt;åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParents Delegation Modelï¼‰çš„é¡¶å±‚ç»ˆç‚¹&lt;/strong&gt;ã€‚å½“ä¸€ä¸ªç±»éœ€è¦è¢«åŠ è½½æ—¶ï¼Œå­åŠ è½½å™¨ä¼šå…ˆå°†è¯·æ±‚å§”æ´¾ç»™çˆ¶åŠ è½½å™¨ï¼Œæœ€ç»ˆè¿™ä¸ªè¯·æ±‚ä¼šåˆ°è¾¾ &lt;code&gt;Bootstrap ClassLoader&lt;/code&gt;ã€‚å¦‚æœå®ƒæ— æ³•åŠ è½½ï¼ˆä¾‹å¦‚ï¼Œè¦åŠ è½½çš„ç±»ä¸æ˜¯æ ¸å¿ƒ Java ç±»ï¼‰ï¼Œæ‰ä¼šå‘ä¸‹å§”æ´¾ç»™å­åŠ è½½å™¨å°è¯•åŠ è½½ã€‚è¿™ç§æœºåˆ¶&lt;strong&gt;ç¡®ä¿äº†æ ¸å¿ƒ Java ç±»åº“çš„å®‰å…¨æ€§&lt;/strong&gt;ï¼Œå› ä¸ºç”¨æˆ·è‡ªå®šä¹‰çš„ç±»æ— æ³•å†’å……æ ¸å¿ƒç±»ï¼ˆå¦‚è‡ªå®šä¹‰çš„ &lt;code&gt;java.lang.String&lt;/code&gt;ä¸ä¼šè¢«åŠ è½½ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ Bootstrap ç±»åŠ è½½å™¨ã€‚&lt;/p&gt;
&lt;h2 id="classloader-ç»„åˆçˆ¶ç±»"&gt;ClassLoader ç»„åˆçˆ¶ç±»
&lt;/h2&gt;&lt;p&gt;Java çš„ &lt;code&gt;ClassLoader&lt;/code&gt;é‡‡ç”¨&lt;strong&gt;ç»„åˆï¼ˆCompositionï¼‰&lt;/strong&gt;ï¼ˆé€šè¿‡æŒæœ‰çˆ¶ç±»åŠ è½½å™¨çš„å¼•ç”¨ï¼‰è€Œé&lt;strong&gt;ç»§æ‰¿ï¼ˆInheritanceï¼‰&lt;/strong&gt; æ¥å®ç°ä¸çˆ¶ç±»åŠ è½½å™¨çš„åä½œï¼Œæ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ä¼˜ç§€è®¾è®¡ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†æ»¡è¶³&lt;strong&gt;åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent Delegation Modelï¼‰&lt;/strong&gt; çš„çµæ´»æ€§å’Œå®‰å…¨æ€§çš„è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç»„åˆ (Composition)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç»§æ‰¿ (Inheritance)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³ç³»æ€§è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;has-a&lt;/strong&gt; (æœ‰ä¸€ä¸ª)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;is-a&lt;/strong&gt; (æ˜¯ä¸€ä¸ª)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è€¦åˆåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½è€¦åˆ&lt;/strong&gt;ï¼Œé€šè¿‡æ¥å£æˆ–å¼•ç”¨åä½œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜è€¦åˆ&lt;/strong&gt;ï¼Œå­ç±»ä¸çˆ¶ç±»ç´§å¯†ç»‘å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œå¯åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¾ç½®æˆ–æ›´æ¢çˆ¶åŠ è½½å™¨&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œç¼–è¯‘æ—¶ç¡®å®šï¼Œæ— æ³•åœ¨è¿è¡Œæ—¶æ”¹å˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å°è£…æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¥½&lt;/strong&gt;ï¼Œä¸æš´éœ²çˆ¶åŠ è½½å™¨çš„å®ç°ç»†èŠ‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å·®&lt;/strong&gt;ï¼Œç ´åå°è£…ï¼Œå­ç±»å¯è®¿é—®çˆ¶ç±»å—ä¿æŠ¤æˆå‘˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å±‚æ¬¡ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯æ„å»º&lt;strong&gt;çµæ´»ã€åŠ¨æ€&lt;/strong&gt;çš„å§”æ‰˜é“¾&lt;/td&gt;
&lt;td&gt;å½¢æˆ&lt;strong&gt;å›ºå®šã€é™æ€&lt;/strong&gt;çš„ç±»å±‚æ¬¡ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•ç†è§£è¿™ç§ç»„åˆå…³ç³»"&gt;ğŸ”„ å¦‚ä½•ç†è§£è¿™ç§ç»„åˆå…³ç³»
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;ClassLoader&lt;/code&gt;çš„æŠ½è±¡ç±»ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª &lt;code&gt;parent&lt;/code&gt;å­—æ®µæ¥æŒæœ‰å…¶çˆ¶ç±»åŠ è½½å™¨çš„&lt;strong&gt;å¼•ç”¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public abstract class ClassLoader {
// ç»„åˆå…³ç³»ï¼šé€šè¿‡æŒæœ‰çˆ¶ç±»åŠ è½½å™¨çš„å¼•ç”¨æ¥å®ç°åä½œ
private final ClassLoader parent;
// æ„é€ æ–¹æ³•ï¼Œå…è®¸åœ¨åˆ›å»ºClassLoaderæ—¶æŒ‡å®šå…¶çˆ¶åŠ è½½å™¨
protected ClassLoader(ClassLoader parent) {
this.parent = parent;
}
// åŒäº²å§”æ´¾æœºåˆ¶çš„æ ¸å¿ƒå®ç°
protected Class&amp;lt;?&amp;gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {
// ... é¦–å…ˆæ£€æŸ¥ç±»æ˜¯å¦å·²åŠ è½½
if (parent != null) {
// å…³é”®ï¼šå°†åŠ è½½è¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨ï¼ˆé€šè¿‡parentå¼•ç”¨è°ƒç”¨å…¶loadClassæ–¹æ³•ï¼‰
return parent.loadClass(name, false);
} else {
// å¦‚æœæ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œåˆ™å§”æ‰˜ç»™å¯åŠ¨ç±»åŠ è½½å™¨
return findBootstrapClassOrNull(name);
}
// ... å¦‚æœçˆ¶åŠ è½½å™¨éƒ½æ— æ³•åŠ è½½ï¼Œå†è°ƒç”¨è‡ªèº«çš„findClassæ–¹æ³•
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä¸ºä»€ä¹ˆç»„åˆä¼˜äºç»§æ‰¿"&gt;ğŸ§  ä¸ºä»€ä¹ˆç»„åˆä¼˜äºç»§æ‰¿
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®ç°çœŸæ­£çš„â€œå§”æ‰˜â€è€Œéâ€œç»§æ‰¿â€å…³ç³»&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒäº²å§”æ´¾æœºåˆ¶&lt;/strong&gt;è¦æ±‚çš„æ˜¯&lt;strong&gt;å°†ä»»åŠ¡å§”æ‰˜å‡ºå»&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ç»§æ‰¿çˆ¶ç±»çš„åŠ è½½è¡Œä¸ºã€‚ä¸€ä¸ª &lt;code&gt;ClassLoader&lt;/code&gt;&lt;strong&gt;æœ‰ä¸€ä¸ª&lt;/strong&gt;çˆ¶ç±»åŠ è½½å™¨ï¼ˆhas-aï¼‰å¹¶å§”æ‰˜å®ƒå·¥ä½œï¼Œè€Œä¸æ˜¯&lt;strong&gt;æ˜¯ä¸€ä¸ª&lt;/strong&gt;çˆ¶ç±»åŠ è½½å™¨ï¼ˆis-aï¼‰å¹¶ç›´æ¥å¤ç”¨å…¶æ–¹æ³•ã€‚ç»„åˆèƒ½æ›´å‡†ç¡®åœ°è¡¨è¾¾è¿™ç§å…³ç³»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿æŒå°è£…æ€§ï¼Œé™ä½è€¦åˆåº¦&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç»§æ‰¿ä¼šç ´åå°è£…æ€§ï¼Œå› ä¸ºå­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„å—ä¿æŠ¤ï¼ˆprotectedï¼‰æˆå‘˜å’Œæ–¹æ³•ã€‚è¿™æ„å‘³ç€å­ç±»å¯ä»¥ä¾èµ–äºçˆ¶ç±»çš„å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œä¸€æ—¦çˆ¶ç±»å‘ç”Ÿå˜åŒ–ï¼Œå­ç±»å¾ˆå¯èƒ½éœ€è¦éšä¹‹ä¿®æ”¹ï¼Œå½¢æˆ&lt;strong&gt;ç´§è€¦åˆ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç»„åˆåˆ™åªé€šè¿‡çˆ¶ç±»åŠ è½½å™¨å…¬å¼€çš„ &lt;code&gt;loadClass&lt;/code&gt;ç­‰æ–¹æ³•è¿›è¡Œäº¤äº’ï¼Œ&lt;strong&gt;éšè—äº†çˆ¶åŠ è½½å™¨çš„å†…éƒ¨å®ç°&lt;/strong&gt;ï¼Œé™ä½äº†è€¦åˆåº¦ï¼Œç¬¦åˆé¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æä¾›æå¤§çš„çµæ´»æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨ç»„åˆï¼Œ&lt;strong&gt;çˆ¶åŠ è½½å™¨å¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡æ„é€ æ–¹æ³•åŠ¨æ€æ³¨å…¥&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥çµæ´»åœ°ç»„è£…ç±»åŠ è½½å™¨çš„å§”æ‰˜é“¾ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è½»æ¾åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œå¹¶å°†å…¶çˆ¶åŠ è½½å™¨è®¾ç½®ä¸º &lt;code&gt;URLClassLoader&lt;/code&gt;ã€&lt;code&gt;AppClassLoader&lt;/code&gt;æˆ–å…¶ä»–ä»»ä½• &lt;code&gt;ClassLoader&lt;/code&gt;å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœé‡‡ç”¨ç»§æ‰¿ï¼Œçˆ¶åŠ è½½å™¨åœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»ç¡®å®šï¼ˆé€šè¿‡ &lt;code&gt;extends&lt;/code&gt;å…³é”®å­—ï¼‰ï¼Œ&lt;strong&gt;æ— æ³•åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜&lt;/strong&gt;å…¶å§”æ‰˜å…³ç³»ï¼Œè¿™å°†ä½¿åŒäº²å§”æ´¾æ¨¡å‹å˜å¾—æå…¶åƒµåŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¤æ‚çš„ç±»å±‚æ¬¡ç»“æ„&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœé€šè¿‡ç»§æ‰¿æ¥å®ç°ï¼Œä¸ºäº†ç»„åˆä¸åŒåŠ è½½å™¨çš„åŠŸèƒ½ï¼Œå¯èƒ½ä¼šå¯¼è‡´&lt;strong&gt;å¤šé‡ç»§æ‰¿&lt;/strong&gt;æˆ–&lt;strong&gt;è¿‡æ·±çš„ç»§æ‰¿å±‚æ¬¡&lt;/strong&gt;ï¼Œä½¿ä»£ç ç»“æ„å˜å¾—å¤æ‚éš¾ä»¥ç»´æŠ¤ã€‚Javaæœ¬èº«ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œè¿™æ›´é™åˆ¶äº†ç»§æ‰¿çš„å¯ç”¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ç»„åˆæ–¹å¼åˆ™éå¸¸è½»é‡å’Œæ¸…æ™°ã€‚æ¯ä¸ª &lt;code&gt;ClassLoader&lt;/code&gt;åªéœ€å…³æ³¨è‡ªå·±çš„åŠ è½½é€»è¾‘å’Œçˆ¶åŠ è½½å™¨å¼•ç”¨ï¼Œå¯ä»¥é€šè¿‡ç»„åˆä¸åŒçš„åŠ è½½å™¨æ¥å®ç°å¤æ‚åŠŸèƒ½ï¼Œè€Œæ— éœ€æ„å»ºå¤æ‚çš„ç»§æ‰¿æ ‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ&lt;code&gt;ClassLoader&lt;/code&gt;é‡‡ç”¨ç»„åˆè€Œéç»§æ‰¿æ¥å¤ç”¨çˆ¶ç±»åŠ è½½å™¨çš„åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªåŸºäº&lt;strong&gt;ä½è€¦åˆã€é«˜çµæ´»æ€§ã€å¼ºå°è£…æ€§&lt;/strong&gt;çš„æ·±æ€ç†Ÿè™‘çš„è®¾è®¡å†³ç­–ã€‚è¿™ä½¿å¾—&lt;strong&gt;åŒäº²å§”æ´¾æ¨¡å‹&lt;/strong&gt;èƒ½å¤Ÿä¼˜é›…ä¸”æœ‰æ•ˆåœ°å·¥ä½œï¼Œç¡®ä¿äº†Javaç±»åŠ è½½çš„å®‰å…¨æ€§ã€ç¨³å®šæ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç»§æ‰¿åœ¨æŸäº›â€œæ˜¯ä¸€ä¸ªâ€çš„æ˜ç¡®åœºæ™¯ä¸‹ä¾ç„¶æœ‰ç”¨ï¼Œä½†åœ¨åƒç±»åŠ è½½å™¨è¿™ç§éœ€è¦&lt;strong&gt;åŠ¨æ€å§”æ‰˜å’Œåä½œ&lt;/strong&gt;çš„åœºæ™¯ä¸­ï¼Œ&lt;strong&gt;ç»„åˆæ— ç–‘æ˜¯æ›´ä¼˜è¶Šçš„é€‰æ‹©&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id="hashcode-å’Œ-equals"&gt;hashCode() å’Œ equals()
&lt;/h2&gt;&lt;p&gt;ã€‚ä½ æå‡ºçš„è¿™ä¸¤ä¸ªè¯´æ³•ï¼Œåæ˜ äº†å¯¹ Java ä¸­ &lt;code&gt;hashCode()&lt;/code&gt;å’Œ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•å…³ç³»çš„å¸¸è§ç–‘é—®ã€‚ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€å¥è¯æ˜¯æ­£ç¡®çš„&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;c1.hashCode() != c2.hashCode()&lt;/code&gt;ï¼Œé‚£ä¹ˆ &lt;code&gt;c1.equals(c2)&lt;/code&gt;ä¸€å®šè¿”å› &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒå¥è¯çš„è¡¨è¿°ä¸å¤Ÿå‡†ç¡®&lt;/strong&gt;ï¼šæ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ï¼Œå¦‚æœ &lt;code&gt;c1.hashCode() == c2.hashCode()&lt;/code&gt;ï¼Œ&lt;code&gt;c1.equals(c2)&lt;/code&gt;&lt;strong&gt;å¯èƒ½&lt;/strong&gt;è¿”å› &lt;code&gt;true&lt;/code&gt;ï¼Œä½†ä¹Ÿ&lt;strong&gt;å¯èƒ½&lt;/strong&gt;è¿”å› &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€Ÿç†è§£å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªè¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;hashCode()&lt;/code&gt;æ¯”è¾ƒç»“æœ&lt;/th&gt;
&lt;th&gt;&lt;code&gt;equals()&lt;/code&gt;&lt;strong&gt;å¯èƒ½&lt;/strong&gt;çš„ç»“æœ&lt;/th&gt;
&lt;th&gt;&lt;code&gt;equals()&lt;/code&gt;&lt;strong&gt;ä¸€å®š&lt;/strong&gt;çš„ç»“æœ&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸åŒ&lt;/strong&gt; (&lt;code&gt;c1 != c2&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åªæœ‰ &lt;code&gt;false&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;false&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å“ˆå¸Œå€¼ä¸åŒï¼Œå¯¹è±¡å¿…å®šä¸ç›¸ç­‰&lt;/strong&gt; (è¿™æ˜¯Javaè§„èŒƒå¼ºåˆ¶è¦æ±‚çš„å¥‘çº¦)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›¸åŒ&lt;/strong&gt; (&lt;code&gt;c1 == c2&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;true&lt;/code&gt;æˆ– &lt;code&gt;false&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— å¿…ç„¶ç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å“ˆå¸Œå€¼ç›¸åŒï¼Œå¯¹è±¡å¯èƒ½ç›¸ç­‰ä¹Ÿå¯èƒ½ä¸ç›¸ç­‰&lt;/strong&gt; (å“ˆå¸Œå†²çªï¼Œæ˜¯å…è®¸å­˜åœ¨çš„ç°è±¡)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹å…¶ä¸­çš„åŸç†å’Œç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id="-å¿…é¡»éµå®ˆçš„å“ˆå¸Œå¥‘çº¦"&gt;âš–ï¸ å¿…é¡»éµå®ˆçš„â€œå“ˆå¸Œå¥‘çº¦â€
&lt;/h3&gt;&lt;p&gt;Java è§„å®šï¼Œå½“é‡å†™ &lt;code&gt;equals()&lt;/code&gt;å’Œ &lt;code&gt;hashCode()&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œå¿…é¡»éµå®ˆä¸€æ¡æ ¸å¿ƒå¥‘çº¦ï¼š&lt;strong&gt;å¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ &lt;code&gt;hashCode()&lt;/code&gt;è¿”å›å€¼å¿…é¡»ç›¸åŒ&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¡è§„åˆ™æ˜¯ä¿è¯æ‰€æœ‰åŸºäºå“ˆå¸Œè¡¨çš„é›†åˆç±»ï¼ˆå¦‚ &lt;code&gt;HashMap&lt;/code&gt;, &lt;code&gt;HashSet&lt;/code&gt;, &lt;code&gt;Hashtable&lt;/code&gt;ï¼‰èƒ½æ­£å¸¸å·¥ä½œçš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€å¥è¯ä¸ºä½•æ­£ç¡®&lt;/strong&gt;ï¼šç¬¬ä¸€å¥è¯å®é™…ä¸Šæ˜¯è¿™æ¡æ ¸å¿ƒå¥‘çº¦çš„&lt;strong&gt;é€†å¦å‘½é¢˜&lt;/strong&gt;ã€‚é€»è¾‘ä¸Šï¼Œå¦‚æœ A åˆ™ B æˆç«‹ï¼Œé‚£ä¹ˆé B åˆ™é A ä¹Ÿå¿…ç„¶æˆç«‹ã€‚æ˜ å°„è¿‡æ¥å°±æ˜¯ï¼šå¦‚æœ &lt;code&gt;equals()&lt;/code&gt;ç›¸ç­‰åˆ™ &lt;code&gt;hashCode()&lt;/code&gt;å¿…é¡»ç›¸ç­‰ï¼Œé‚£ä¹ˆå½“ &lt;code&gt;hashCode()&lt;/code&gt;ä¸ç›¸ç­‰æ—¶ï¼Œ&lt;code&gt;equals()&lt;/code&gt;&lt;strong&gt;ä¸€å®šä¸èƒ½ç›¸ç­‰&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå¦‚æœ &lt;code&gt;c1.hashCode() != c2.hashCode()&lt;/code&gt;ï¼Œé‚£ä¹ˆ &lt;code&gt;c1.equals(c2)&lt;/code&gt;å¿…å®šä¸º &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿åå¥‘çº¦çš„åæœ&lt;/strong&gt;ï¼šå¦‚æœåªé‡å†™äº† &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•è€Œæ²¡æœ‰åŒæ—¶é‡å†™ &lt;code&gt;hashCode()&lt;/code&gt;æ–¹æ³•ï¼Œå°±å¯èƒ½è¿åè¿™æ¡å¥‘çº¦ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªå¯¹è±¡ &lt;code&gt;equals()&lt;/code&gt;ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œä½† &lt;code&gt;hashCode()&lt;/code&gt;ä¸åŒã€‚è¿™ä¼šå¯¼è‡´å®ƒä»¬åœ¨å­˜å…¥ &lt;code&gt;HashSet&lt;/code&gt;æ—¶è¢«å½“ä½œä¸åŒçš„å¯¹è±¡å­˜å‚¨ï¼Œä»è€Œä½¿ &lt;code&gt;Set&lt;/code&gt;å¤±å»äº†å»é‡çš„èƒ½åŠ›ï¼›æˆ–è€…åœ¨ä½œä¸º &lt;code&gt;HashMap&lt;/code&gt;çš„é”®æ—¶ï¼Œæ— æ³•ç”¨å¦ä¸€ä¸ªç›¸ç­‰çš„é”®æ£€ç´¢åˆ°ä¹‹å‰å­˜å…¥çš„å€¼ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å“ˆå¸Œå†²çªhashcodeç›¸åŒå´å¯èƒ½ä¸ç›¸ç­‰"&gt;ğŸ” å“ˆå¸Œå†²çªï¼šhashCodeç›¸åŒå´å¯èƒ½ä¸ç›¸ç­‰
&lt;/h3&gt;&lt;p&gt;å“ˆå¸Œç®—æ³•çš„ä»»åŠ¡æ˜¯å°†ä¸€ä¸ªä»»æ„å¤§å°çš„æ•°æ®æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šå¤§å°çš„æ•´æ•°ï¼ˆå“ˆå¸Œå€¼ï¼‰ã€‚ç”±äºæ•´æ•°èŒƒå›´æ˜¯æœ‰é™çš„ï¼Œè€Œä¸åŒçš„å¯¹è±¡æ•°æ®æ˜¯è¿‘ä¹æ— é™çš„ï¼Œ&lt;strong&gt;ä¸åŒçš„å¯¹è±¡å®Œå…¨æœ‰å¯èƒ½è®¡ç®—å‡ºç›¸åŒçš„å“ˆå¸Œå€¼&lt;/strong&gt;ï¼Œè¿™ç§ç°è±¡ç§°ä¸º&lt;strong&gt;å“ˆå¸Œå†²çªï¼ˆHash Collisionï¼‰&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå½“ &lt;code&gt;c1.hashCode() == c2.hashCode()&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;c1.equals(c2)&lt;/code&gt;çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒå¯èƒ½è¿”å› &lt;code&gt;true&lt;/code&gt;ï¼ˆè¯´æ˜ä¸¤ä¸ªå¯¹è±¡ç¡®å®ç›¸ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¹Ÿå¯èƒ½è¿”å› &lt;code&gt;false&lt;/code&gt;ï¼ˆè¯´æ˜ä¸¤ä¸ªå¯¹è±¡è™½ç„¶å“ˆå¸Œå€¼ç›¸åŒï¼Œä½†å®é™…ä¸Šæ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œå‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ˜¯ Java ä¸­çš„ &lt;code&gt;String&lt;/code&gt;ç±»ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String s1 = &amp;#34;é€šè¯&amp;#34;;
String s2 = &amp;#34;é‡åœ°&amp;#34;;
System.out.println(s1.hashCode()); // è¾“å‡º 1179395
System.out.println(s2.hashCode()); // è¾“å‡º 1179395
System.out.println(s1.equals(s2)); // è¾“å‡º false
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å¯¹å“ˆå¸Œé›†åˆçš„å½±å“"&gt;âš™ï¸ å¯¹å“ˆå¸Œé›†åˆçš„å½±å“
&lt;/h3&gt;&lt;p&gt;ä»¥ &lt;code&gt;HashMap&lt;/code&gt;ä¸ºä¾‹ï¼Œå…¶æŸ¥æ‰¾å’Œå­˜å‚¨å¯¹è±¡çš„è¿‡ç¨‹ç›´è§‚ä½“ç°äº†è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯å¦‚ä½•ååŒå·¥ä½œçš„ ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—å“ˆå¸Œå€¼&lt;/strong&gt;ï¼šå½“è¦å­˜å…¥æˆ–æŸ¥æ‰¾ä¸€ä¸ªé”®ï¼ˆkeyï¼‰æ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨å®ƒçš„ &lt;code&gt;hashCode()&lt;/code&gt;æ–¹æ³•è®¡ç®—å“ˆå¸Œå€¼ï¼Œä»è€Œç¡®å®šå®ƒåœ¨å†…éƒ¨æ•°ç»„ï¼ˆé€šå¸¸ç§°ä¸ºâ€œæ¡¶â€ï¼‰ä¸­çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†å†²çª&lt;/strong&gt;ï¼šå¦‚æœè¯¥ä½ç½®å·²ç»æœ‰å…¶ä»–å…ƒç´ ï¼ˆå³å‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼‰ï¼Œåˆ™ä¼šè°ƒç”¨ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•ä¾æ¬¡ä¸è¯¥ä½ç½®ä¸Šçš„æ‰€æœ‰å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœå‘ç°ä¸æŸä¸ªç°æœ‰å…ƒç´  &lt;code&gt;equals()&lt;/code&gt;ä¸º &lt;code&gt;true&lt;/code&gt;ï¼Œåˆ™è®¤ä¸ºæ˜¯åŒä¸€ä¸ªé”®ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸æ‰€æœ‰ç°æœ‰å…ƒç´  &lt;code&gt;equals()&lt;/code&gt;éƒ½ä¸º &lt;code&gt;false&lt;/code&gt;ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸åŒçš„é”®ï¼Œä¼šæ”¾åœ¨è¿™ä¸ªæ¡¶å†…çš„é“¾è¡¨æˆ–çº¢é»‘æ ‘ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œ&lt;code&gt;hashCode()&lt;/code&gt;ç”¨äº&lt;strong&gt;å¿«é€Ÿå®šä½ã€åˆæ­¥ç­›é€‰&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;equals()&lt;/code&gt;ç”¨äºåœ¨å†²çªå‘ç”Ÿåè¿›è¡Œ&lt;strong&gt;ç²¾ç¡®æ¯”è¾ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ-1"&gt;ğŸ’¡ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç‰¢è®°å¥‘çº¦&lt;/strong&gt;ï¼š&lt;strong&gt;å¦‚æœ &lt;code&gt;equals()&lt;/code&gt;ç›¸ç­‰ï¼Œåˆ™ &lt;code&gt;hashCode()&lt;/code&gt;å¿…é¡»ç›¸ç­‰&lt;/strong&gt;ã€‚åä¹‹ä¸ä¸€å®šæˆç«‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å§‹ç»ˆåŒæ—¶é‡å†™&lt;/strong&gt;ï¼šå½“ä½ é‡å†™ä¸€ä¸ªç±»çš„ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œ&lt;strong&gt;å¿…é¡»åŒæ—¶é‡å†™ &lt;code&gt;hashCode()&lt;/code&gt;&lt;/strong&gt; æ–¹æ³•ï¼Œä»¥ç¡®ä¿å¥‘çº¦æˆç«‹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ç›¸åŒå­—æ®µ&lt;/strong&gt;ï¼š&lt;code&gt;hashCode()&lt;/code&gt;å’Œ &lt;code&gt;equals()&lt;/code&gt;åº”åŸºäº&lt;strong&gt;ç›¸åŒçš„æ ¸å¿ƒå­—æ®µé›†&lt;/strong&gt;æ¥è®¡ç®—å’Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ &lt;code&gt;equals()&lt;/code&gt;æ–¹æ³•åªæ¯”è¾ƒäº† &lt;code&gt;id&lt;/code&gt;å­—æ®µï¼Œé‚£ä¹ˆ &lt;code&gt;hashCode()&lt;/code&gt;ä¹Ÿåº”è¯¥åªè®¡ç®— &lt;code&gt;id&lt;/code&gt;å­—æ®µçš„å“ˆå¸Œå€¼ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€ŸåŠ©å·¥å…·æ–¹æ³•&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ &lt;code&gt;Objects.hash(Object... values)&lt;/code&gt;æ–¹æ³•æ¥æ–¹ä¾¿åœ°ç”ŸæˆåŸºäºå¤šä¸ªå­—æ®µçš„å“ˆå¸Œå€¼ï¼Œå®ƒå¾ˆå¥½åœ°å¤„ç†äº† &lt;code&gt;null&lt;/code&gt;å€¼çš„æƒ…å†µ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å¯å˜å­—æ®µ&lt;/strong&gt;ï¼šæœ€å¥½ä½¿ç”¨ä¸å¯å˜å­—æ®µï¼ˆå¦‚ &lt;code&gt;final&lt;/code&gt;å­—æ®µï¼‰æ¥è®¡ç®—å“ˆå¸Œç ï¼Œå¦åˆ™å¯¹è±¡çŠ¶æ€æ”¹å˜åï¼Œå“ˆå¸Œç ä¹Ÿå¯èƒ½æ”¹å˜ï¼Œä»è€Œå¯¼è‡´åœ¨é›†åˆä¸­æ‰¾ä¸åˆ°è¯¥å¯¹è±¡ç­‰ä¸å¯é¢„çŸ¥çš„è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è§£ &lt;code&gt;hashCode()&lt;/code&gt;å’Œ &lt;code&gt;equals()&lt;/code&gt;çš„å…³ç³»ï¼Œæ˜¯ç¼–å†™æ­£ç¡®ã€é«˜æ•ˆ Java ç¨‹åºçš„å…³é”®ä¹‹ä¸€ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨å“ˆå¸Œé›†åˆæ—¶ã€‚&lt;/p&gt;
&lt;h2 id="jdk-åŠ¨æ€ä»£ç†"&gt;JDK åŠ¨æ€ä»£ç†
&lt;/h2&gt;&lt;p&gt;JDK åŠ¨æ€ä»£ç†çš„å®ç°é«˜åº¦ä¾èµ–äº Java çš„ &lt;strong&gt;æ¥å£æœºåˆ¶&lt;/strong&gt; å’Œ &lt;strong&gt;å•ç»§æ‰¿&lt;/strong&gt; çš„ç±»ä½“ç³»ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼æ±‡æ€»äº†å…¶æ ¸å¿ƒæœºåˆ¶å’ŒåŸå› ï¼Œå¸®åŠ©ä½ å¿«é€Ÿç†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;å…·ä½“è¯´æ˜&lt;/th&gt;
&lt;th&gt;åœ¨ JDK åŠ¨æ€ä»£ç†ä¸­çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£&lt;/td&gt;
&lt;td&gt;ä»£ç†ç±»å¯ä»¥åŒæ—¶å®ç°ç›®æ ‡ç±»çš„æ‰€æœ‰æ¥å£ï¼Œå¹¶èƒ½ç»§æ‰¿ &lt;code&gt;Proxy&lt;/code&gt;ç±»ï¼Œä»è€Œå…·å¤‡åŒé‡â€œèº«ä»½â€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•ç­¾åå¥‘çº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¥å£å®šä¹‰äº†æ¸…æ™°çš„æ–¹æ³•ç­¾åï¼ˆæ–¹æ³•åã€å‚æ•°ã€è¿”å›ç±»å‹ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸ºåŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»æä¾›äº†è¦å®ç°çš„&lt;strong&gt;æ–¹æ³•æ¨¡æ¿&lt;/strong&gt;ï¼Œç¡®ä¿äº†ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡åœ¨æ–¹æ³•è°ƒç”¨å½¢å¼ä¸Šçš„ä¸€è‡´æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»å‹å¤šæ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¾èµ–äºæ¥å£ç±»å‹ï¼Œè€Œéå…·ä½“å®ç°ç±»&lt;/td&gt;
&lt;td&gt;ä»£ç†å¯¹è±¡å¯ä»¥&lt;strong&gt;å‘ä¸Šè½¬å‹&lt;/strong&gt;ä¸ºæ¥å£ç±»å‹ï¼Œä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿä»¥ç»Ÿä¸€çš„æ–¹å¼ä¸ä»£ç†å¯¹è±¡æˆ–çœŸå®ç›®æ ‡å¯¹è±¡äº¤äº’ï¼Œå®ç°äº†å¯¹å®¢æˆ·ç«¯ç¨‹åºçš„é€æ˜æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å•ç»§æ‰¿é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Java ç±»åªèƒ½ç›´æ¥ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Proxy&lt;/code&gt;ç±»æœ¬èº«å·²æ˜¯ä»£ç†ç±»çš„çˆ¶ç±»ï¼Œå› æ­¤ä»£ç†ç±»&lt;strong&gt;æ— æ³•å†ç»§æ‰¿&lt;/strong&gt;å…¶ä»–ç±»ï¼ˆåŒ…æ‹¬ä½ çš„ç›®æ ‡ç±»ï¼‰ã€‚å®ç°æ¥å£æ˜¯å”¯ä¸€é€‰æ‹©ï¼Œè¿™é¿å…äº†ä¸å•ç»§æ‰¿æœºåˆ¶çš„å†²çª&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¿…é¡»å®ç°æ¥å£çš„åŸå› "&gt;ğŸ§© å¿…é¡»å®ç°æ¥å£çš„åŸå› 
&lt;/h3&gt;&lt;p&gt;JDK åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£ï¼Œä¸»è¦åŸºäºä»¥ä¸‹æ ¸å¿ƒåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Java å•ç»§æ‰¿æœºåˆ¶çš„é™åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¹æœ¬çš„åŸå› ã€‚JDK åŠ¨æ€ä»£ç†æŠ€æœ¯ç”Ÿæˆçš„ä»£ç†ç±»åœ¨å­—èŠ‚ç å±‚é¢å·²ç»&lt;strong&gt;éšå¼åœ°ç»§æ‰¿äº† &lt;code&gt;java.lang.reflect.Proxy&lt;/code&gt;ç±»&lt;/strong&gt;ã€‚ç”±äº Java æ˜¯å•ç»§æ‰¿çš„ï¼Œä»£ç†ç±»&lt;strong&gt;ä¸èƒ½å†æ˜¾å¼åœ°å»ç»§æ‰¿ä½ çš„ç›®æ ‡ç±»&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå®ƒåªèƒ½é€šè¿‡&lt;strong&gt;å®ç°ç›®æ ‡æ¥å£&lt;/strong&gt;çš„æ–¹å¼æ¥å®ç°ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆä»£ç†ç±»çš„éœ€è¦&lt;/strong&gt;ï¼š&lt;code&gt;Proxy.newProxyInstance()&lt;/code&gt;æ–¹æ³•éœ€è¦æ˜ç¡®çŸ¥é“ä½ è¦ä»£ç†å“ªäº›æ–¹æ³•ã€‚æ¥å£æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„æ–¹æ³•å¥‘çº¦ï¼ˆæ–¹æ³•ç­¾ååˆ—è¡¨ï¼‰ï¼ŒJDK åŠ¨æ€ä»£ç†æœºåˆ¶æ­£æ˜¯åŸºäºè¿™äº›æ¥å£ä¿¡æ¯æ¥&lt;strong&gt;åŠ¨æ€ç”Ÿæˆå®ç°äº†è¯¥æ¥å£çš„ä»£ç†ç±»&lt;/strong&gt;ã€‚å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œä»£ç†æœºåˆ¶å°±æ— æ³•ç¡®å®šåº”è¯¥ä»£ç†å“ªäº›å…¬å…±æ–¹æ³•ï¼Œä»è€Œæ— æ³•å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢å‘æ¥å£ç¼–ç¨‹çš„é¼“åŠ±&lt;/strong&gt;ï¼šè¿™ä¸ªé™åˆ¶ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Š&lt;strong&gt;é¼“åŠ±äº†æ›´å¥½çš„ç¼–ç¨‹å®è·µ&lt;/strong&gt;â€”â€”é¢å‘æ¥å£ç¼–ç¨‹ï¼ˆè€Œéé¢å‘å®ç°ç¼–ç¨‹ï¼‰ã€‚è¿™æœ‰åŠ©äºå®ç°æ¾è€¦åˆå’Œæ›´é«˜çš„ä»£ç æŠ½è±¡å±‚æ¬¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æé†’-1"&gt;âš–ï¸ é‡è¦æé†’
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJDK åŠ¨æ€ä»£ç†&lt;strong&gt;åªèƒ½ä»£ç†æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•&lt;/strong&gt;ã€‚å¦‚æœç›®æ ‡ç±»ä¸­æœ‰éæ¥å£å®šä¹‰çš„æ–¹æ³•ï¼ˆåŒ…æ‹¬æ¥è‡ª &lt;code&gt;Object&lt;/code&gt;ç±»çš„æ–¹æ³•å¦‚ &lt;code&gt;toString&lt;/code&gt;ã€&lt;code&gt;hashCode&lt;/code&gt;ç­‰ï¼Œæˆ–åœ¨ç±»ä¸­è‡ªå®šä¹‰ä½†æœªåœ¨æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•ï¼‰ï¼Œ&lt;strong&gt;è¿™äº›æ–¹æ³•ä¸Šçš„è°ƒç”¨ä¸ä¼šè¢«ä»£ç†æ‹¦æˆª&lt;/strong&gt;ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡ä¸Šçš„è¯¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•ç»•è¿‡æ¥å£é™åˆ¶"&gt;ğŸ”§ å¦‚ä½•ç»•è¿‡æ¥å£é™åˆ¶ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ çš„ç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œä½†åˆéœ€è¦ä¸ºå…¶åˆ›å»ºä»£ç†ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CGLIB åŠ¨æ€ä»£ç†&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç¬¬ä¸‰æ–¹å­—èŠ‚ç ç”Ÿæˆåº“ã€‚å®ƒé€šè¿‡&lt;strong&gt;åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»&lt;/strong&gt;æ¥å®ç°ä»£ç†ã€‚ç”±äºæ˜¯ç»§æ‰¿ï¼Œå®ƒè‡ªç„¶èƒ½ä»£ç†æ‰€æœ‰&lt;strong&gt;é final&lt;/strong&gt; çš„å…¬å…±å’Œæ–¹æ³•ã€‚è®¸å¤šæ¡†æ¶ï¼ˆå¦‚ Spring AOPï¼‰åœ¨ç›®æ ‡ç±»æ— æ¥å£æ—¶å°±é»˜è®¤ä½¿ç”¨ CGLIBã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¯¹æ¯”-jdk-ä¸-cglib-åŠ¨æ€ä»£ç†"&gt;ğŸ“Š å¯¹æ¯” JDK ä¸ CGLIB åŠ¨æ€ä»£ç†
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;JDK åŠ¨æ€ä»£ç†&lt;/th&gt;
&lt;th&gt;CGLIB åŠ¨æ€ä»£ç†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºæ¥å£å®ç°&lt;/td&gt;
&lt;td&gt;åŸºäºç»§æ‰¿ï¼ˆå­ç±»åŒ–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®æ ‡è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£&lt;/td&gt;
&lt;td&gt;ç±»ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªèƒ½ä»£ç†æ¥å£æ–¹æ³•&lt;/td&gt;
&lt;td&gt;æ— æ³•ä»£ç† &lt;code&gt;final&lt;/code&gt;æˆ– &lt;code&gt;private&lt;/code&gt;æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä»£ç†ç±»è¾ƒå¿«ï¼Œä½†æ–¹æ³•è°ƒç”¨ï¼ˆåå°„ï¼‰ç¨æ…¢&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä»£ç†ç±»è¾ƒæ…¢ï¼Œä½†æ–¹æ³•è°ƒç”¨ï¼ˆé€šå¸¸ï¼‰æ›´å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£ JDK åŠ¨æ€ä»£ç†ä¸æ¥å£çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;h2 id="jdk-åŠ¨æ€ä»£ç†é™åˆ¶æ¥æº"&gt;JDK åŠ¨æ€ä»£ç†é™åˆ¶æ¥æº
&lt;/h2&gt;&lt;p&gt;JDK åŠ¨æ€ä»£ç†çš„å®ç°é«˜åº¦ä¾èµ–äº Java çš„ &lt;strong&gt;æ¥å£æœºåˆ¶&lt;/strong&gt; å’Œ &lt;strong&gt;å•ç»§æ‰¿&lt;/strong&gt; çš„ç±»ä½“ç³»ã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼æ±‡æ€»äº†å…¶æ ¸å¿ƒæœºåˆ¶å’ŒåŸå› ï¼Œå¸®åŠ©ä½ å¿«é€Ÿç†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;å…·ä½“è¯´æ˜&lt;/th&gt;
&lt;th&gt;åœ¨ JDK åŠ¨æ€ä»£ç†ä¸­çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£&lt;/td&gt;
&lt;td&gt;ä»£ç†ç±»å¯ä»¥åŒæ—¶å®ç°ç›®æ ‡ç±»çš„æ‰€æœ‰æ¥å£ï¼Œå¹¶èƒ½ç»§æ‰¿ &lt;code&gt;Proxy&lt;/code&gt;ç±»ï¼Œä»è€Œå…·å¤‡åŒé‡â€œèº«ä»½â€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•ç­¾åå¥‘çº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¥å£å®šä¹‰äº†æ¸…æ™°çš„æ–¹æ³•ç­¾åï¼ˆæ–¹æ³•åã€å‚æ•°ã€è¿”å›ç±»å‹ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸ºåŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»æä¾›äº†è¦å®ç°çš„&lt;strong&gt;æ–¹æ³•æ¨¡æ¿&lt;/strong&gt;ï¼Œç¡®ä¿äº†ä»£ç†å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡åœ¨æ–¹æ³•è°ƒç”¨å½¢å¼ä¸Šçš„ä¸€è‡´æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»å‹å¤šæ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¾èµ–äºæ¥å£ç±»å‹ï¼Œè€Œéå…·ä½“å®ç°ç±»&lt;/td&gt;
&lt;td&gt;ä»£ç†å¯¹è±¡å¯ä»¥&lt;strong&gt;å‘ä¸Šè½¬å‹&lt;/strong&gt;ä¸ºæ¥å£ç±»å‹ï¼Œä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿä»¥ç»Ÿä¸€çš„æ–¹å¼ä¸ä»£ç†å¯¹è±¡æˆ–çœŸå®ç›®æ ‡å¯¹è±¡äº¤äº’ï¼Œå®ç°äº†å¯¹å®¢æˆ·ç«¯ç¨‹åºçš„é€æ˜æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å•ç»§æ‰¿é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Java ç±»åªèƒ½ç›´æ¥ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Proxy&lt;/code&gt;ç±»æœ¬èº«å·²æ˜¯ä»£ç†ç±»çš„çˆ¶ç±»ï¼Œå› æ­¤ä»£ç†ç±»&lt;strong&gt;æ— æ³•å†ç»§æ‰¿&lt;/strong&gt;å…¶ä»–ç±»ï¼ˆåŒ…æ‹¬ä½ çš„ç›®æ ‡ç±»ï¼‰ã€‚å®ç°æ¥å£æ˜¯å”¯ä¸€é€‰æ‹©ï¼Œè¿™é¿å…äº†ä¸å•ç»§æ‰¿æœºåˆ¶çš„å†²çª&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¿…é¡»å®ç°æ¥å£çš„åŸå› -1"&gt;ğŸ§© å¿…é¡»å®ç°æ¥å£çš„åŸå› 
&lt;/h3&gt;&lt;p&gt;JDK åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£ï¼Œä¸»è¦åŸºäºä»¥ä¸‹æ ¸å¿ƒåŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Java å•ç»§æ‰¿æœºåˆ¶çš„é™åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¹æœ¬çš„åŸå› ã€‚JDK åŠ¨æ€ä»£ç†æŠ€æœ¯ç”Ÿæˆçš„ä»£ç†ç±»åœ¨å­—èŠ‚ç å±‚é¢å·²ç»&lt;strong&gt;éšå¼åœ°ç»§æ‰¿äº† &lt;code&gt;java.lang.reflect.Proxy&lt;/code&gt;ç±»&lt;/strong&gt;ã€‚ç”±äº Java æ˜¯å•ç»§æ‰¿çš„ï¼Œä»£ç†ç±»&lt;strong&gt;ä¸èƒ½å†æ˜¾å¼åœ°å»ç»§æ‰¿ä½ çš„ç›®æ ‡ç±»&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå®ƒåªèƒ½é€šè¿‡&lt;strong&gt;å®ç°ç›®æ ‡æ¥å£&lt;/strong&gt;çš„æ–¹å¼æ¥å®ç°ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆä»£ç†ç±»çš„éœ€è¦&lt;/strong&gt;ï¼š&lt;code&gt;Proxy.newProxyInstance()&lt;/code&gt;æ–¹æ³•éœ€è¦æ˜ç¡®çŸ¥é“ä½ è¦ä»£ç†å“ªäº›æ–¹æ³•ã€‚æ¥å£æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„æ–¹æ³•å¥‘çº¦ï¼ˆæ–¹æ³•ç­¾ååˆ—è¡¨ï¼‰ï¼ŒJDK åŠ¨æ€ä»£ç†æœºåˆ¶æ­£æ˜¯åŸºäºè¿™äº›æ¥å£ä¿¡æ¯æ¥&lt;strong&gt;åŠ¨æ€ç”Ÿæˆå®ç°äº†è¯¥æ¥å£çš„ä»£ç†ç±»&lt;/strong&gt;ã€‚å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œä»£ç†æœºåˆ¶å°±æ— æ³•ç¡®å®šåº”è¯¥ä»£ç†å“ªäº›å…¬å…±æ–¹æ³•ï¼Œä»è€Œæ— æ³•å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢å‘æ¥å£ç¼–ç¨‹çš„é¼“åŠ±&lt;/strong&gt;ï¼šè¿™ä¸ªé™åˆ¶ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Š&lt;strong&gt;é¼“åŠ±äº†æ›´å¥½çš„ç¼–ç¨‹å®è·µ&lt;/strong&gt;â€”â€”é¢å‘æ¥å£ç¼–ç¨‹ï¼ˆè€Œéé¢å‘å®ç°ç¼–ç¨‹ï¼‰ã€‚è¿™æœ‰åŠ©äºå®ç°æ¾è€¦åˆå’Œæ›´é«˜çš„ä»£ç æŠ½è±¡å±‚æ¬¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æé†’-2"&gt;âš–ï¸ é‡è¦æé†’
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJDK åŠ¨æ€ä»£ç†&lt;strong&gt;åªèƒ½ä»£ç†æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•&lt;/strong&gt;ã€‚å¦‚æœç›®æ ‡ç±»ä¸­æœ‰éæ¥å£å®šä¹‰çš„æ–¹æ³•ï¼ˆåŒ…æ‹¬æ¥è‡ª &lt;code&gt;Object&lt;/code&gt;ç±»çš„æ–¹æ³•å¦‚ &lt;code&gt;toString&lt;/code&gt;ã€&lt;code&gt;hashCode&lt;/code&gt;ç­‰ï¼Œæˆ–åœ¨ç±»ä¸­è‡ªå®šä¹‰ä½†æœªåœ¨æ¥å£ä¸­å£°æ˜çš„æ–¹æ³•ï¼‰ï¼Œ&lt;strong&gt;è¿™äº›æ–¹æ³•ä¸Šçš„è°ƒç”¨ä¸ä¼šè¢«ä»£ç†æ‹¦æˆª&lt;/strong&gt;ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡ä¸Šçš„è¯¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•ç»•è¿‡æ¥å£é™åˆ¶-1"&gt;ğŸ”§ å¦‚ä½•ç»•è¿‡æ¥å£é™åˆ¶ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ çš„ç›®æ ‡ç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œä½†åˆéœ€è¦ä¸ºå…¶åˆ›å»ºä»£ç†ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹æ›¿ä»£æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CGLIB åŠ¨æ€ä»£ç†&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç¬¬ä¸‰æ–¹å­—èŠ‚ç ç”Ÿæˆåº“ã€‚å®ƒé€šè¿‡&lt;strong&gt;åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»&lt;/strong&gt;æ¥å®ç°ä»£ç†ã€‚ç”±äºæ˜¯ç»§æ‰¿ï¼Œå®ƒè‡ªç„¶èƒ½ä»£ç†æ‰€æœ‰&lt;strong&gt;é final&lt;/strong&gt; çš„å…¬å…±å’Œæ–¹æ³•ã€‚è®¸å¤šæ¡†æ¶ï¼ˆå¦‚ Spring AOPï¼‰åœ¨ç›®æ ‡ç±»æ— æ¥å£æ—¶å°±é»˜è®¤ä½¿ç”¨ CGLIBã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¯¹æ¯”-jdk-ä¸-cglib-åŠ¨æ€ä»£ç†-1"&gt;ğŸ“Š å¯¹æ¯” JDK ä¸ CGLIB åŠ¨æ€ä»£ç†
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;JDK åŠ¨æ€ä»£ç†&lt;/th&gt;
&lt;th&gt;CGLIB åŠ¨æ€ä»£ç†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºæ¥å£å®ç°&lt;/td&gt;
&lt;td&gt;åŸºäºç»§æ‰¿ï¼ˆå­ç±»åŒ–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®æ ‡è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£&lt;/td&gt;
&lt;td&gt;ç±»ä¸èƒ½æ˜¯ &lt;code&gt;final&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªèƒ½ä»£ç†æ¥å£æ–¹æ³•&lt;/td&gt;
&lt;td&gt;æ— æ³•ä»£ç† &lt;code&gt;final&lt;/code&gt;æˆ– &lt;code&gt;private&lt;/code&gt;æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä»£ç†ç±»è¾ƒå¿«ï¼Œä½†æ–¹æ³•è°ƒç”¨ï¼ˆåå°„ï¼‰ç¨æ…¢&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä»£ç†ç±»è¾ƒæ…¢ï¼Œä½†æ–¹æ³•è°ƒç”¨ï¼ˆé€šå¸¸ï¼‰æ›´å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£ JDK åŠ¨æ€ä»£ç†ä¸æ¥å£çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;h2 id="å•ç»§æ‰¿"&gt;å•ç»§æ‰¿
&lt;/h2&gt;&lt;p&gt;Java åœ¨å­—èŠ‚ç å±‚é¢ç»´æŒå•ç»§æ‰¿é™åˆ¶ï¼Œä¸»è¦æ˜¯ä¸ºäº† &lt;strong&gt;ä¿æŒè¯­è¨€è®¾è®¡çš„ä¸€è‡´æ€§ã€ç¡®ä¿è™šæ‹Ÿæœºçš„ç®€å•é«˜æ•ˆï¼Œä»¥åŠé¿å…å¤šç»§æ‰¿å¸¦æ¥çš„å¤æ‚æ€§é—®é¢˜&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘å°†ä»å‡ ä¸ªå…³é”®è§’åº¦ä¸ºä½ è§£é‡ŠåŸå› ï¼Œå¹¶ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿäº†è§£ä¸»è¦è€ƒè™‘å› ç´ ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»´åº¦&lt;/th&gt;
&lt;th&gt;å•ç»§æ‰¿ (Java çš„é€‰æ‹©)&lt;/th&gt;
&lt;th&gt;å‡æƒ³çš„å¤šç»§æ‰¿ (Java æœªé€‰æ‹©)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—èŠ‚ç éªŒè¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€åŒ–éªŒè¯è¿‡ç¨‹ï¼Œç±»å…³ç³»æ¸…æ™°ï¼Œå®¹æ˜“ç¡®ä¿ç±»å‹å®‰å…¨&lt;/td&gt;
&lt;td&gt;éªŒè¯é€»è¾‘ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ï¼Œéœ€è¦å¤„ç†å¤šä¸ªçˆ¶ç±»çš„å†²çªå’Œæ­§ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–¹æ³•è°ƒç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;invokevirtual&lt;/code&gt;ç­‰æŒ‡ä»¤å¯ä»¥å¿«é€Ÿè§£æç›®æ ‡æ–¹æ³•ï¼Œæ€§èƒ½ predictable&lt;/td&gt;
&lt;td&gt;æ–¹æ³•åˆ†æ´¾ï¼ˆMethod Dispatchï¼‰è§„åˆ™å¤æ‚ï¼Œæ€§èƒ½å¯èƒ½å—å½±å“ï¼Œä¸”å®¹æ˜“äº§ç”Ÿæ­§ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å¸ƒå±€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è±¡å†…å­˜å¸ƒå±€ç¨³å®šï¼Œå­—æ®µåç§»é‡å›ºå®šï¼Œæ˜“äºä¼˜åŒ–&lt;/td&gt;
&lt;td&gt;éœ€è¦å¤„ç†å¤šä¸ªçˆ¶ç±»å¯èƒ½é‡å çš„å­—æ®µå¸ƒå±€ï¼Œå¢åŠ å†…å­˜ç®¡ç†å’Œè®¿é—®å¤æ‚åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­è¨€è®¾è®¡å“²å­¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºè°ƒ&lt;strong&gt;ç®€å•æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;æ¸…æ™°æ€§&lt;/strong&gt;ï¼Œé¿å…è±å½¢é—®é¢˜ç­‰&lt;/td&gt;
&lt;td&gt;å…è®¸æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†ä»£ä»·æ˜¯æ›´é«˜çš„å¤æ‚æ€§å’Œæ½œåœ¨çš„ç¼ºé™·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡&lt;strong&gt;æ¥å£&lt;/strong&gt;ï¼ˆ&lt;code&gt;implements&lt;/code&gt;ï¼‰å®ç°å¤šç»§æ‰¿çš„è¡Œä¸ºï¼Œé¿å…ä¸Šè¿°é—®é¢˜&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å­—èŠ‚ç å±‚é¢çš„å•ç»§æ‰¿"&gt;ğŸ§  æ·±å…¥ç†è§£å­—èŠ‚ç å±‚é¢çš„å•ç»§æ‰¿
&lt;/h3&gt;&lt;p&gt;Java çš„å­—èŠ‚ç ï¼ˆBytecodeï¼‰æ˜¯ JVM çš„æŒ‡ä»¤é›†ï¼Œå®ƒå¿…é¡»å¿ å®åœ°åæ˜  Java è¯­è¨€æœ¬èº«çš„è§„èŒƒã€‚Java è¯­è¨€è§„å®šç±»åªèƒ½å•ç»§æ‰¿ï¼Œè¿™ä¸€é™åˆ¶ä¹Ÿå¿…ç„¶ä½“ç°åœ¨å­—èŠ‚ç å±‚é¢ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;.class&lt;/code&gt;æ–‡ä»¶ç»“æ„ä¸­çš„ç›´æ¥ä½“ç°&lt;/strong&gt;ï¼šåœ¨ç¼–è¯‘åçš„ &lt;code&gt;.class&lt;/code&gt;æ–‡ä»¶ä¸­ï¼Œç±»çš„ç»§æ‰¿ä¿¡æ¯é€šè¿‡ &lt;code&gt;super_class&lt;/code&gt;é¡¹æ¥è¡¨ç¤ºã€‚è¿™ä¸ªé¡¹æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•ï¼Œ&lt;strong&gt;æ˜ç¡®æŒ‡å‘ä¸”åªèƒ½æŒ‡å‘ä¸€ä¸ªçˆ¶ç±»&lt;/strong&gt;ï¼ˆé™¤äº† &lt;code&gt;java.lang.Object&lt;/code&gt;ï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»çš„æ ¹ï¼Œå…¶ &lt;code&gt;super_class&lt;/code&gt;ä¸º 0ï¼‰ã€‚è¿™ç§ç»“æ„ä»äºŒè¿›åˆ¶æ ¼å¼ä¸Šå°±å¼ºåˆ¶è§„å®šäº†å•ç»§æ‰¿ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;JVM æ–¹æ³•è°ƒç”¨çš„åŸºçŸ³ï¼š&lt;code&gt;invokevirtual&lt;/code&gt;&lt;/strong&gt;ï¼šJVM é€šè¿‡ &lt;code&gt;invokevirtual&lt;/code&gt;æŒ‡ä»¤å®ç°è™šæ–¹æ³•åˆ†æ´¾ï¼ˆVirtual Method Dispatchï¼‰ï¼Œè¿™æ˜¯å¤šæ€æ€§çš„åŸºç¡€ã€‚è¯¥æŒ‡ä»¤çš„å·¥ä½œåŸç†æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆè·å–å¯¹è±¡çš„å®é™…ç±»å‹ï¼ˆåœ¨è¿è¡Œæ—¶ç¡®å®šï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åä»è¿™ä¸ªå®é™…ç±»å‹å¼€å§‹ï¼Œæ²¿ç€&lt;strong&gt;å•ä¸€è·¯å¾„&lt;/strong&gt;çš„ç»§æ‰¿é“¾å‘ä¸ŠæŸ¥æ‰¾è¦æ‰§è¡Œçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å•ç»§æ‰¿ç¡®ä¿äº†è¿™æ¡ç»§æ‰¿é“¾æ˜¯çº¿æ€§çš„ã€æ— æ­§ä¹‰çš„&lt;/strong&gt;ã€‚å¦‚æœå…è®¸å¤šç»§æ‰¿ï¼Œç»§æ‰¿ç½‘ä¼šå˜æˆå¤æ‚çš„å›¾ç»“æ„ï¼Œ&lt;code&gt;invokevirtual&lt;/code&gt;æŒ‡ä»¤å°†æ— æ³•é«˜æ•ˆä¸”æ˜ç¡®åœ°ç¡®å®šæ–¹æ³•æ‰€å±çš„ç±»ï¼Œä»è€Œéœ€è¦éå¸¸å¤æ‚çš„ç®—æ³•æ¥è§£å†³å†²çªï¼Œè¿™ä¼šæ˜¾è‘—å¢åŠ  JVM çš„å¤æ‚æ€§å’Œæ€§èƒ½å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯¹è±¡å†…å­˜å¸ƒå±€çš„ç¨³å®šæ€§&lt;/strong&gt;ï¼šåœ¨ JVM ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å¸ƒå±€ï¼ˆåŒ…æ‹¬å®ä¾‹å­—æ®µçš„åç§»é‡ï¼‰åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±å…¶ç±»ç»§æ‰¿å…³ç³»å†³å®šçš„ã€‚å•ç»§æ‰¿æ„å‘³ç€æ¯ä¸ªç±»éƒ½æœ‰ä¸€æ¡æ¸…æ™°çš„ç»§æ‰¿é“¾ï¼ˆä¾‹å¦‚ &lt;code&gt;Object -&amp;gt; A -&amp;gt; B&lt;/code&gt;ï¼‰ï¼ŒJVM å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¡ç®—å’Œä¼˜åŒ–æ¯ä¸ªå­—æ®µåœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚å¤šç»§æ‰¿ä¼šå¯¼è‡´å¤šä¸ªçˆ¶ç±»çš„å­—æ®µå¯èƒ½éœ€è¦åˆå¹¶åˆ°å­ç±»ä¸­ï¼Œææ˜“äº§ç”Ÿ&lt;strong&gt;å­—æ®µå†²çª&lt;/strong&gt;å’Œ&lt;strong&gt;å¸ƒå±€æ­§ä¹‰&lt;/strong&gt;ï¼Œä½¿å¾—å†…å­˜ç®¡ç†å˜å¾—å¤æ‚ï¼Œå¹¶å¯èƒ½ç ´åä¼˜åŒ–çš„å¯èƒ½æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—èŠ‚ç éªŒè¯å™¨çš„éœ€è¦&lt;/strong&gt;ï¼šJVM åœ¨åŠ è½½ç±»æ—¶ä¼šæ‰§è¡Œä¸¥æ ¼çš„å­—èŠ‚ç éªŒè¯ï¼Œä»¥ç¡®ä¿ä»£ç ä¸ä¼šç ´å JVM çš„å®‰å…¨æ€§ã€‚å•ç»§æ‰¿æå¤§åœ°ç®€åŒ–äº†éªŒè¯è¿‡ç¨‹ï¼Œä¾‹å¦‚åœ¨æ£€æŸ¥ç±»å‹è½¬æ¢ï¼ˆ&lt;code&gt;checkcast&lt;/code&gt;ï¼‰å’Œæ–¹æ³•è¦†ç›–ï¼ˆ&lt;code&gt;override&lt;/code&gt;ï¼‰æ—¶ï¼ŒéªŒè¯å™¨å¯ä»¥æ²¿ç€æ¸…æ™°çš„å•é“¾å‘ä¸Šæ£€æŸ¥ã€‚å¤šç»§æ‰¿ä¼šä½¿è¿™äº›æ£€æŸ¥å˜å¾—æå…¶å¤æ‚ï¼Œéš¾ä»¥ä¿è¯å¯é æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ç»•è¿‡å•ç»§æ‰¿é™åˆ¶"&gt;ğŸ”„ å¦‚ä½•ç»•è¿‡å•ç»§æ‰¿é™åˆ¶
&lt;/h3&gt;&lt;p&gt;Java é€šè¿‡æ¥å£ï¼ˆ&lt;code&gt;interface&lt;/code&gt;ï¼‰æ¥å¼¥è¡¥å•ç»§æ‰¿åœ¨åŠŸèƒ½å¤ç”¨ä¸Šçš„ä¸è¶³ã€‚ä¸€ä¸ªç±»è™½ç„¶åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†å¯ä»¥&lt;strong&gt;å®ç°å¤šä¸ªæ¥å£&lt;/strong&gt;ï¼ˆ&lt;code&gt;implements&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£ä¸å¤šç»§æ‰¿çš„åŒºåˆ«&lt;/strong&gt;ï¼šæ¥å£é€šå¸¸åªå®šä¹‰æ–¹æ³•å¥‘çº¦ï¼ˆJava 8 åå¯ä»¥æœ‰é»˜è®¤å®ç°ï¼‰ï¼Œè€Œä¸å®šä¹‰å®ä¾‹çŠ¶æ€ï¼ˆå­—æ®µï¼‰ã€‚è¿™é¿å…äº†å¤šç»§æ‰¿ä¸­æœ€æ£˜æ‰‹çš„&lt;strong&gt;çŠ¶æ€ç»§æ‰¿å†²çª&lt;/strong&gt;é—®é¢˜ï¼ˆå³ä¸¤ä¸ªçˆ¶ç±»æœ‰åŒåå­—æ®µè¯¥æ€ä¹ˆåŠï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£æ˜¯â€œè¡Œä¸ºâ€çš„å¤šç»§æ‰¿&lt;/strong&gt;ï¼šä½ å¯ä»¥å°†ä¸€ä¸ªç±»è§†ä¸ºâ€œæ˜¯â€å…¶çˆ¶ç±»çš„ä¸€ç§ï¼ˆ&lt;code&gt;is-a&lt;/code&gt;ï¼‰ï¼ŒåŒæ—¶â€œå…·æœ‰â€å¤šä¸ªæ¥å£æ‰€å®šä¹‰çš„èƒ½åŠ›ï¼ˆ&lt;code&gt;has-ability-to&lt;/code&gt;ï¼‰ï¼Œæ¯”å¦‚ &lt;code&gt;CanFly&lt;/code&gt;, &lt;code&gt;CanSwim&lt;/code&gt;ã€‚è¿™é€šå¸¸æ˜¯ä¸€ç§æ›´æ¸…æ™°ã€æ›´å®‰å…¨çš„è®¾è®¡æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;âš–ï¸ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å­—èŠ‚ç å±‚é¢çš„å•ç»§æ‰¿é™åˆ¶ä¸æ˜¯ä¸€ç§æŠ€æœ¯ä¸Šçš„æ— èƒ½ï¼Œè€Œæ˜¯ä¸€é¡¹&lt;strong&gt;æ·±æ€ç†Ÿè™‘çš„è®¾è®¡å†³ç­–&lt;/strong&gt;ã€‚å®ƒç‰ºç‰²äº†æå°‘æ•°æƒ…å†µä¸‹éœ€è¦â€œå¤šç»§æ‰¿â€çš„çµæ´»æ€§ï¼Œæ¢æ¥äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;JVM å®ç°çš„ç®€å•æ€§ä¸é«˜æ•ˆæ€§&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨‹åºè¿è¡Œçš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—èŠ‚ç éªŒè¯çš„å®‰å…¨æ€§&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯­è¨€æœ¬èº«çš„æ¸…æ™°å’Œæ˜“äºç†è§£&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥å£ï¼ˆ&lt;code&gt;interface&lt;/code&gt;ï¼‰çš„å­˜åœ¨æä¾›äº†å¦ä¸€ç§æ›´å®‰å…¨ã€æ›´çµæ´»çš„æœºåˆ¶æ¥å®ç°å¤šé‡è¡Œä¸ºç»§æ‰¿ï¼Œä»è€Œåœ¨å®è·µä¸­å¾ˆå¥½åœ°å¼¥è¡¥äº†å•ç»§æ‰¿çš„å±€é™æ€§ã€‚&lt;/p&gt;
&lt;h2 id="getclass"&gt;getClass
&lt;/h2&gt;&lt;p&gt;ä½ æä¾›çš„è¿™æ®µä»£ç åˆ†æå®Œå…¨æ­£ç¡®ã€‚ğŸ‘ å®ƒå‡†ç¡®åœ°æŒ‡å‡ºäº† Java ä¸­ &lt;code&gt;super.getClass()&lt;/code&gt;çš„çœŸå®è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæœºåˆ¶getclassæ˜¯-finalæ–¹æ³•"&gt;âš ï¸ æ ¸å¿ƒæœºåˆ¶ï¼š&lt;code&gt;getClass()&lt;/code&gt;æ˜¯ &lt;code&gt;final&lt;/code&gt;æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;Java ä¸­ &lt;code&gt;Object&lt;/code&gt;ç±»çš„ &lt;code&gt;getClass()&lt;/code&gt;æ–¹æ³•è¢«å£°æ˜ä¸º &lt;strong&gt;&lt;code&gt;final&lt;/code&gt;&lt;/strong&gt;ï¼Œè¿™æ„å‘³ç€ä»»ä½•å­ç±»éƒ½æ— æ³•é‡å†™ï¼ˆOverrideï¼‰è¿™ä¸ªæ–¹æ³•ã€‚å› æ­¤ï¼Œæ— è®ºä½ åœ¨å­ç±»ä¸­ä½¿ç”¨ &lt;code&gt;this.getClass()&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;super.getClass()&lt;/code&gt;ï¼Œ&lt;strong&gt;å®é™…æ‰§è¡Œçš„éƒ½æ˜¯ &lt;code&gt;Object&lt;/code&gt;ç±»ä¸­é‚£ä¸ªå”¯ä¸€çš„ã€ä¸å¯æ”¹å˜çš„ &lt;code&gt;getClass()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›&lt;strong&gt;å½“å‰å¯¹è±¡è¿è¡Œæ—¶å®ä¾‹&lt;/strong&gt;çš„ Class å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæŒ‡å‘çš„æ˜¯ä½ å®é™…ç”¨ &lt;code&gt;new&lt;/code&gt;åˆ›å»ºå‡ºæ¥çš„é‚£ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å…¶çˆ¶ç±»çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€ä¸ªä¾‹å­"&gt;ğŸ§ª ä¸€ä¸ªä¾‹å­
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ç»§æ‰¿å…³ç³»ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.Date;
public class Test extends Date { // Test ç»§æ‰¿è‡ª Date
public void test() {
System.out.println(&amp;#34;super.getClass(): &amp;#34; + super.getClass().getName());
System.out.println(&amp;#34;this.getClass(): &amp;#34; + this.getClass().getName());
System.out.println(&amp;#34;Actual superclass: &amp;#34; + this.getClass().getSuperclass().getName());
}
public static void main(String[] args) {
new Test().test();
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡ºç»“æœå°†ä¼šæ˜¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;super.getClass(): Test
this.getClass(): Test
Actual superclass: java.util.Date
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªç»“æœæ¸…æ™°åœ°éªŒè¯äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;super.getClass()&lt;/code&gt;å’Œ &lt;code&gt;this.getClass()&lt;/code&gt;è¿”å›çš„éƒ½æ˜¯å½“å‰å®ä¾‹çš„è¿è¡Œæ—¶ç±» &lt;code&gt;Test&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¦è·å–çœŸæ­£çš„çˆ¶ç±»ä¿¡æ¯ï¼Œéœ€ä½¿ç”¨ &lt;code&gt;getClass().getSuperclass()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®åŒºåˆ«ä¸€è§ˆè¡¨"&gt;ğŸ“Š å…³é”®åŒºåˆ«ä¸€è§ˆè¡¨
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è°ƒç”¨æ–¹å¼&lt;/th&gt;
&lt;th&gt;è¿”å›å¯¹è±¡&lt;/th&gt;
&lt;th&gt;åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;super.getClass()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å½“å‰å®ä¾‹çš„ Class å¯¹è±¡ (&lt;code&gt;Test&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;getClass()&lt;/code&gt;æ˜¯ &lt;code&gt;final&lt;/code&gt;æ–¹æ³•ï¼Œ&lt;code&gt;super&lt;/code&gt;å…³é”®å­—ä»…è¡¨ç¤ºä»çˆ¶ç±»ç»§æ‰¿çš„æ–¹æ³•ï¼Œä½†æ–¹æ³•è¡Œä¸ºç”± &lt;code&gt;Object&lt;/code&gt;å›ºå®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;this.getClass()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å½“å‰å®ä¾‹çš„ Class å¯¹è±¡ (&lt;code&gt;Test&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;ç›´æ¥è°ƒç”¨å¯¹è±¡æœ¬èº«çš„ &lt;code&gt;getClass()&lt;/code&gt;æ–¹æ³•ï¼ŒåŒæ ·æŒ‡å‘è¿è¡Œæ—¶å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;getClass().getSuperclass()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çˆ¶ç±»&lt;/strong&gt;çš„ Class å¯¹è±¡ (&lt;code&gt;Date&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;getSuperclass()&lt;/code&gt;æ–¹æ³•çš„è®¾è®¡ç›®çš„å°±æ˜¯è¿”å›ç›´æ¥çˆ¶ç±»çš„ Class å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®è·å–çˆ¶ç±»ä¿¡æ¯"&gt;ğŸ’¡ å¦‚ä½•æ­£ç¡®è·å–çˆ¶ç±»ä¿¡æ¯
&lt;/h3&gt;&lt;p&gt;æ­£å¦‚ä½ åœ¨æœ€åæåˆ°çš„ï¼Œå¦‚æœä½ æƒ³è·å¾—çˆ¶ç±»çš„ Class å¯¹è±¡æˆ–å…¶åç§°ï¼Œåº”è¯¥ä½¿ç”¨ &lt;code&gt;getClass().getSuperclass()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;getClass().getSuperclass().getName()&lt;/code&gt;ï¼šè·å–çˆ¶ç±»çš„&lt;strong&gt;å…¨é™å®šå&lt;/strong&gt;ï¼ˆåŒ…å«åŒ…åï¼‰ï¼Œä¾‹å¦‚ &lt;code&gt;java.util.Date&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getClass().getSuperclass().getSimpleName()&lt;/code&gt;ï¼šè·å–çˆ¶ç±»çš„&lt;strong&gt;ç®€å•åç§°&lt;/strong&gt;ï¼ˆä¸åŒ…å«åŒ…åï¼‰ï¼Œä¾‹å¦‚ &lt;code&gt;Date&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ¤” æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä½ çš„ç†è§£éå¸¸åˆ°ä½ã€‚&lt;code&gt;super.method()&lt;/code&gt;çš„è¯­æ³•é€šå¸¸ç”¨äºè°ƒç”¨åœ¨çˆ¶ç±»ä¸­å®šä¹‰ã€ä½†å¯èƒ½å·²è¢«å­ç±»é‡å†™çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œå¯¹äº &lt;code&gt;getClass()&lt;/code&gt;è¿™ä¸ªç‰¹æ®Šçš„ &lt;code&gt;final&lt;/code&gt;æ–¹æ³•ï¼Œç”±äºå®ƒ&lt;strong&gt;æ— æ³•è¢«é‡å†™&lt;/strong&gt;ï¼Œæ‰€ä»¥ &lt;code&gt;super.getClass()&lt;/code&gt;å¹¶ä¸ä¼šè¡¨ç°å‡ºä»»ä½•ä¸åŒäº &lt;code&gt;this.getClass()&lt;/code&gt;çš„è¡Œä¸ºï¼Œå®ƒä»¬éƒ½æ¯«æ— ä¾‹å¤–åœ°è¿”å›å½“å‰è¿è¡Œæ—¶å®ä¾‹çš„ Class å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;è¦è·å–çˆ¶ç±»çš„å…ƒä¿¡æ¯ï¼Œè¯·å§‹ç»ˆä¾èµ– &lt;code&gt;getSuperclass()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id="é›†åˆæ‹·è´"&gt;é›†åˆæ‹·è´
&lt;/h2&gt;&lt;p&gt;åœ¨ Java ä¸­ï¼Œ&lt;strong&gt;Collection çš„å¤åˆ¶æ“ä½œï¼ˆåŒ…æ‹¬åˆ›å»ºå­ Collectionï¼‰é€šå¸¸éƒ½æ˜¯æµ…æ‹·è´ï¼ˆShallow Copyï¼‰&lt;/strong&gt;ã€‚ç†è§£è¿™ä¸€ç‚¹å¯¹é¿å…æ„å¤–çš„æ•°æ®ä¿®æ”¹è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;h3 id="-æµ…æ‹·è´ä¸æ·±æ‹·è´çš„æ ¸å¿ƒåŒºåˆ«"&gt;ğŸ“Œ æµ…æ‹·è´ä¸æ·±æ‹·è´çš„æ ¸å¿ƒåŒºåˆ«
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµ…æ‹·è´ (Shallow Copy)&lt;/strong&gt;ï¼šåªå¤åˆ¶é›†åˆçš„&lt;strong&gt;ç»“æ„&lt;/strong&gt;ï¼ˆå³å®¹å™¨æœ¬èº«ï¼‰ï¼Œè€Œä¸å¤åˆ¶é›†åˆä¸­çš„&lt;strong&gt;å…ƒç´ å¯¹è±¡&lt;/strong&gt;ã€‚æ–°é›†åˆå’ŒåŸé›†åˆä¸­çš„å…ƒç´ å¼•ç”¨æŒ‡å‘&lt;strong&gt;ç›¸åŒçš„å¯¹è±¡å®ä¾‹&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå¦‚æœä¿®æ”¹äº†æŸä¸ªå…ƒç´ å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œæ”¹å˜äº†å¯¹è±¡å±æ€§çš„å€¼ï¼‰ï¼Œè¿™ä¸ªä¿®æ”¹ä¼šåœ¨ä¸¤ä¸ªé›†åˆä¸­åŒæ—¶å¯è§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ·±æ‹·è´ (Deep Copy)&lt;/strong&gt;ï¼šä¸ä»…å¤åˆ¶é›†åˆçš„ç»“æ„ï¼Œè¿˜ä¼šé€’å½’åœ°å¤åˆ¶é›†åˆä¸­çš„æ‰€æœ‰&lt;strong&gt;å…ƒç´ å¯¹è±¡&lt;/strong&gt;ã€‚æ–°é›†åˆå’ŒåŸé›†åˆåŒ…å«çš„æ˜¯å…ƒç´ å¯¹è±¡çš„&lt;strong&gt;ç‹¬ç«‹å‰¯æœ¬&lt;/strong&gt;ã€‚ä¿®æ”¹ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ å¯¹è±¡ï¼Œä¸ä¼šå½±å“å¦ä¸€ä¸ªé›†åˆä¸­çš„å¯¹åº”å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°å¯¹æ¯”ä¸¤è€…çš„åŒºåˆ«ï¼Œè¯·çœ‹ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æµ…æ‹·è´ (Shallow Copy)&lt;/th&gt;
&lt;th&gt;æ·±æ‹·è´ (Deep Copy)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…å¤åˆ¶é›†åˆç»“æ„ï¼Œå…ƒç´ å¼•ç”¨æŒ‡å‘åŒä¸€å¯¹è±¡&lt;/td&gt;
&lt;td&gt;å¤åˆ¶é›†åˆç»“æ„åŠæ‰€æœ‰å…ƒç´ å¯¹è±¡ï¼Œåˆ›å»ºå®Œå…¨ç‹¬ç«‹çš„å¯¹è±¡å‰¯æœ¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ç¤ºæ„å›¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;é›†åˆA&lt;/code&gt;-&amp;gt; [obj1, obj2, obj3] &amp;lt;- &lt;code&gt;é›†åˆB&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;é›†åˆA&lt;/code&gt;-&amp;gt; [obj1, obj2, obj3]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;é›†åˆB&lt;/code&gt;-&amp;gt; [copyOf-obj1, copyOf-obj2, copyOf-obj3]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒç´ ä¿®æ”¹å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹å…ƒç´ å¯¹è±¡ï¼ˆå¦‚å±æ€§å€¼ï¼‰ä¼šå½±å“æ‰€æœ‰åŒ…å«è¯¥å¼•ç”¨çš„é›†åˆ&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹å…ƒç´ å¯¹è±¡ä¸ä¼šå½±å“å…¶ä»–é›†åˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜ï¼Œä»…å¤åˆ¶å¼•ç”¨&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼Œéœ€åˆ›å»ºæ–°å¯¹è±¡å¹¶å¯èƒ½é€’å½’å¤åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ„é€ å‡½æ•° &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(oldList)&lt;/code&gt;, &lt;code&gt;addAll()&lt;/code&gt;, ç­‰&lt;/td&gt;
&lt;td&gt;åºåˆ—åŒ–ã€æ‰‹åŠ¨é€å…ƒç´ å¤åˆ¶ã€ç¬¬ä¸‰æ–¹åº“å·¥å…·å‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•é»˜è®¤æ˜¯æµ…æ‹·è´"&gt;ğŸ¤” ä¸ºä½•é»˜è®¤æ˜¯æµ…æ‹·è´ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;Java é›†åˆæ¡†æ¶çš„è®¾è®¡é€‰æ‹©æµ…æ‹·è´ä½œä¸ºé»˜è®¤è¡Œä¸ºï¼Œä¸»è¦å‡ºäºä»¥ä¸‹è€ƒè™‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼šå¤åˆ¶å¼•ç”¨æ¯”é€’å½’å¤åˆ¶æ•´ä¸ªå¯¹è±¡å›¾è¦å¿«å¾—å¤šï¼Œå¼€é”€å°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨æ€§&lt;/strong&gt;ï¼šJava æ— æ³•é¢„çŸ¥æ¯ä¸ªå¯¹è±¡è¯¥å¦‚ä½•è¢«æ­£ç¡®å¤åˆ¶ï¼ˆä¾‹å¦‚ï¼Œæ˜¯é€šè¿‡æ„é€ å‡½æ•°ã€&lt;code&gt;clone()&lt;/code&gt;è¿˜æ˜¯å…¶ä»–æ–¹æ³•ï¼‰ã€‚æµ…æ‹·è´æ˜¯ä¸€ç§é€šç”¨ä¸”å®‰å…¨çš„æœ€å°åŒ–æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®æ€§&lt;/strong&gt;ï¼šå¼ºåˆ¶å¼€å‘è€…æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œæ˜¾å¼åœ°å†³å®šæ˜¯å¦éœ€è¦ä»¥åŠå¦‚ä½•å®ç°æ·±æ‹·è´ï¼Œé¿å…äº†ä¸å¿…è¦çš„æ·±åº¦å¤åˆ¶å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸è§çš„é›†åˆå¤åˆ¶æ–¹æ³•ä¸æ‹·è´ç±»å‹"&gt;ğŸ” å¸¸è§çš„é›†åˆå¤åˆ¶æ–¹æ³•ä¸æ‹·è´ç±»å‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹åˆ—ä¸¾äº† Java ä¸­å¸¸ç”¨çš„é›†åˆå¤åˆ¶æ–¹æ³•ï¼Œå®ƒä»¬é€šå¸¸éƒ½å±äº&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ„é€ å‡½æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; newList = new ArrayList&amp;lt;&amp;gt;(oldList);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;addAll()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; newList = new ArrayList&amp;lt;&amp;gt;();
newList.addAll(oldList);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ Java 8 Stream API&lt;/strong&gt;ï¼ˆ&lt;code&gt;Collectors.toList()&lt;/code&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; newList = oldList.stream().collect(Collectors.toList());
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¯&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;Collections.copy()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; newList = new ArrayList&amp;lt;&amp;gt;(Arrays.asList(new String[oldList.size()]));
Collections.copy(newList, oldList);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ–¹æ³•åŒæ ·æ‰§è¡Œ&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ï¼Œä¸”è¦æ±‚ç›®æ ‡é›†åˆçš„ size è‡³å°‘ç­‰äºæºé›†åˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•&lt;/strong&gt;ï¼ˆéƒ¨åˆ†é›†åˆç±»å¦‚ &lt;code&gt;ArrayList&lt;/code&gt;, &lt;code&gt;HashMap&lt;/code&gt;æ”¯æŒï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; newList = (List&amp;lt;String&amp;gt;) oldList.clone();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é›†åˆçš„ &lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•é€šå¸¸ä¹Ÿå®ç°ä¸º&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æµ…æ‹·è´çš„é£é™©ç¤ºä¾‹"&gt;âš ï¸ æµ…æ‹·è´çš„é£é™©ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å½“é›†åˆä¸­åŒ…å«&lt;strong&gt;å¯å˜å¯¹è±¡&lt;/strong&gt;æ—¶ï¼Œæµ…æ‹·è´çš„é£é™©å°¤ä¸ºæ˜æ˜¾ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.*;
class Person {
public String name;
public Person(String name) { this.name = name; }
}
public class ShallowCopyExample {
public static void main(String[] args) {
List&amp;lt;Person&amp;gt; original = new ArrayList&amp;lt;&amp;gt;();
original.add(new Person(&amp;#34;Alice&amp;#34;));
original.add(new Person(&amp;#34;Bob&amp;#34;));
// æµ…æ‹·è´
List&amp;lt;Person&amp;gt; shallowCopy = new ArrayList&amp;lt;&amp;gt;(original);
// ä¿®æ”¹æµ…æ‹·è´åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ª Person å¯¹è±¡çš„ name
shallowCopy.get(0).name = &amp;#34;Carol&amp;#34;;
// æ£€æŸ¥åŸé›†åˆä¸­çš„å¯¹è±¡ - ä¹Ÿè¢«ä¿®æ”¹äº†ï¼
System.out.println(original.get(0).name); // è¾“å‡º &amp;#34;Carol&amp;#34;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å¦‚ä½•å®ç°æ·±æ‹·è´"&gt;ğŸ›  å¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;å¦‚æœéœ€è¦å®Œå…¨ç‹¬ç«‹çš„é›†åˆå‰¯æœ¬ï¼Œä½ éœ€è¦è¿›è¡Œ&lt;strong&gt;æ·±æ‹·è´&lt;/strong&gt;ã€‚å®ç°èµ·æ¥ç¨å¤æ‚ï¼Œå¸¸è§æ–¹æ³•æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰‹åŠ¨å¤åˆ¶&lt;/strong&gt;ï¼šéå†é›†åˆï¼Œä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºæ–°å‰¯æœ¬ï¼ˆä¾‹å¦‚é€šè¿‡æ‹·è´æ„é€ å‡½æ•°ã€&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•æˆ–å·¥å‚æ–¹æ³•ï¼‰ï¼Œç„¶åæ·»åŠ åˆ°æ–°é›†åˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;Person&amp;gt; deepCopy = new ArrayList&amp;lt;&amp;gt;();
for (Person p : original) {
deepCopy.add(new Person(p.name)); // å‡è®¾ Person æœ‰æ‹·è´æ„é€ å‡½æ•°æˆ–ç±»ä¼¼æœºåˆ¶
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨åºåˆ—åŒ–ä¸ååºåˆ—åŒ–&lt;/strong&gt;ï¼šå…ˆå°†å¯¹è±¡åºåˆ—åŒ–ä¸ºå­—èŠ‚æµï¼Œå†ååºåˆ—åŒ–å›æ–°å¯¹è±¡ã€‚è¿™è¦æ±‚æ‰€æœ‰æ¶‰åŠçš„å¯¹è±¡éƒ½å®ç° &lt;code&gt;java.io.Serializable&lt;/code&gt;æ¥å£ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.io.*;
public static &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; deepCopy(List&amp;lt;T&amp;gt; src) throws IOException, ClassNotFoundException {
ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
ObjectOutputStream out = new ObjectOutputStream(byteOut);
out.writeObject(src);
ByteArrayInputStream byteIn = new ByteArrayInputStream(byteOut.toByteArray());
ObjectInputStream in = new ObjectInputStream(byteIn);
return (List&amp;lt;T&amp;gt;) in.readObject();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“&lt;/strong&gt;ï¼šåƒ Apache Commons Lang æä¾›äº† &lt;code&gt;SerializationUtils.clone(object)&lt;/code&gt;ç­‰å·¥å…·æ–¹æ³•ï¼Œå¯ä»¥ç®€åŒ–æ·±æ‹·è´è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’¡ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Java Collection çš„å¤åˆ¶æ“ä½œï¼ˆå¦‚é€šè¿‡æ„é€ å‡½æ•°ã€&lt;code&gt;addAll()&lt;/code&gt;ã€&lt;code&gt;Collections.copy()&lt;/code&gt;æˆ– Stream APIï¼‰&lt;strong&gt;é»˜è®¤éƒ½æ˜¯æµ…æ‹·è´&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æµ…æ‹·è´æ—¶ï¼Œå¦‚æœé›†åˆåŒ…å«&lt;strong&gt;å¯å˜å¯¹è±¡&lt;/strong&gt;ï¼Œä¿®æ”¹å…ƒç´ å¯¹è±¡ä¼šå½±å“åˆ°æ‰€æœ‰å…±äº«è¯¥å¯¹è±¡çš„é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;è‹¥éœ€è¦å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬ï¼Œé¿å…å…ƒç´ ä¿®æ”¹çš„ç›¸äº’å¹²æ‰°ï¼Œä½ å¿…é¡»&lt;strong&gt;æ‰‹åŠ¨å®ç°æ·±æ‹·è´&lt;/strong&gt;ï¼Œå¸¸ç”¨æ–¹å¼åŒ…æ‹¬éå†å…ƒç´ åˆ›å»ºæ–°å¯¹è±¡ã€åºåˆ—åŒ–/ååºåˆ—åŒ–æˆ–ä½¿ç”¨å¯é çš„ç¬¬ä¸‰æ–¹å·¥å…·åº“ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é€‰æ‹©æ‹·è´æ–¹å¼æ—¶ï¼Œè¯·æ ¹æ®ä½ çš„&lt;strong&gt;ä¸šåŠ¡éœ€æ±‚&lt;/strong&gt;ï¼ˆæ˜¯å¦éœ€è¦å®Œå…¨çš„æ•°æ®ç‹¬ç«‹æ€§ï¼‰å’Œ&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;æ¥åšå‡ºå†³å®šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="è§†å›¾"&gt;è§†å›¾
&lt;/h2&gt;&lt;p&gt;Java ä¸­åˆ›å»ºå­é›†åˆï¼ˆä¾‹å¦‚é€šè¿‡ &lt;code&gt;subList&lt;/code&gt;ã€&lt;code&gt;subSet&lt;/code&gt;ã€&lt;code&gt;headSet&lt;/code&gt;ã€&lt;code&gt;tailSet&lt;/code&gt;ç­‰æ–¹æ³•ï¼‰æ—¶ï¼Œå…¶å†…éƒ¨æœºåˆ¶å’Œåç»­å¯¹åŸé›†åˆçš„ä¿®æ”¹æ˜¯å¦ä¼šåŒæ­¥åˆ°å­é›†åˆï¼Œæ˜¯ä¸€ä¸ªéœ€è¦ä»”ç»†åŒºåˆ†çš„æƒ…å†µã€‚è¿™å–å†³äºä½ ä½¿ç”¨çš„å…·ä½“é›†åˆç±»å‹å’Œåˆ›å»ºæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿç†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“ä¸»è¦æƒ…å†µï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§/æ“ä½œ&lt;/th&gt;
&lt;th&gt;åŸºäºè§†å›¾çš„å­é›†åˆ (å¦‚ &lt;code&gt;List.subList&lt;/code&gt;)&lt;/th&gt;
&lt;th&gt;é€šè¿‡å¤åˆ¶æ„é€ å‡½æ•°åˆ›å»ºçš„æ–°é›†åˆ (å¦‚ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(oldList)&lt;/code&gt;)&lt;/th&gt;
&lt;th&gt;é€šè¿‡ &lt;code&gt;Collections.unmodifiable&lt;/code&gt;åˆ›å»ºçš„ä¸å¯å˜è§†å›¾&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚æ•°æ®å¼•ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸åŸé›†åˆå…±äº«æ•°æ®&lt;/strong&gt;ï¼ˆå¯ç†è§£ä¸ºâ€œçª—å£â€æˆ–â€œè§†å›¾â€ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹çš„æ•°æ®å‰¯æœ¬&lt;/strong&gt;ï¼ˆä½†å…ƒç´ å¯¹è±¡å¼•ç”¨æ˜¯å…±äº«çš„ï¼Œå³&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸åŸé›†åˆå…±äº«æ•°æ®&lt;/strong&gt;ï¼ˆåŒ…è£…å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥æ–°å…ƒç´ çš„åŒæ­¥æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼šç›¸äº’å½±å“&lt;/strong&gt;ã€‚åœ¨åŸé›†åˆçš„&lt;strong&gt;å­é›†èŒƒå›´å†…&lt;/strong&gt;è¿›è¡Œç»“æ„æ€§ä¿®æ”¹ï¼ˆå¦‚æ’å…¥ã€åˆ é™¤ï¼‰ä¼šå¯¼è‡´å­é›†åˆçš„éå†æ“ä½œæŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œå…¨ç‹¬ç«‹&lt;/strong&gt;ã€‚å¯¹åŸé›†åˆçš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå½±å“æ–°é›†åˆï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼šåæ˜ å˜åŒ–&lt;/strong&gt;ï¼ˆå› ä¸ºæ•°æ®æ˜¯å…±äº«çš„ï¼‰ï¼Œä½†&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;é€šè¿‡è¯¥è§†å›¾ä¿®æ”¹å…ƒç´ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿®æ”¹å·²æœ‰å…ƒç´ çš„åŒæ­¥æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼šç›¸äº’å½±å“&lt;/strong&gt;ï¼ˆå› ä¸ºå…±äº«ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼šç›¸äº’å½±å“&lt;/strong&gt;ï¼ˆå› ä¸ºå…±äº«ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œ&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;çš„ç‰¹æ€§ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¼šç›¸äº’å½±å“&lt;/strong&gt;ï¼ˆå› ä¸ºå…±äº«ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æ„æ€§ä¿®æ”¹çš„å…¼å®¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸äº’çš„ç»“æ„æ€§ä¿®æ”¹ï¼ˆå¦‚åœ¨åŸåˆ—è¡¨ä¸­é—´æ’å…¥å…ƒç´ ï¼‰å¯èƒ½å¯¼è‡´å­é›†åˆè¡Œä¸ºæœªå®šä¹‰æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/td&gt;
&lt;td&gt;å®‰å…¨ï¼Œæ— ä»»ä½•å½±å“ã€‚&lt;/td&gt;
&lt;td&gt;æ— æ³•é€šè¿‡ä¸å¯å˜è§†å›¾è¿›è¡Œç»“æ„æ€§ä¿®æ”¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“’ &lt;strong&gt;é‡è¦æ¦‚å¿µï¼šç»“æ„æ€§ä¿®æ”¹ (Structural Modification)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŒ‡é‚£äº›æ”¹å˜äº†é›†åˆâ€œç»“æ„â€çš„æ“ä½œï¼Œä¾‹å¦‚æ·»åŠ ã€åˆ é™¤å…ƒç´ ï¼Œæˆ–è€…æ˜¾å¼æ”¹å˜é›†åˆçš„å¤§å°ï¼ˆ&lt;code&gt;resize&lt;/code&gt;ï¼‰ã€‚ä»…ä»…æ˜¯ä¿®æ”¹é›†åˆä¸­å·²æœ‰å…ƒç´ å¯¹è±¡å†…éƒ¨çš„å­—æ®µå€¼ï¼ˆä¾‹å¦‚ &lt;code&gt;person.setName(&amp;quot;new&amp;quot;)&lt;/code&gt;ï¼‰&lt;strong&gt;ä¸å±äº&lt;/strong&gt;ç»“æ„æ€§ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-è¯¦è§£ä¸åŒæƒ…å†µ"&gt;ğŸ” è¯¦è§£ä¸åŒæƒ…å†µ
&lt;/h3&gt;&lt;h4 id="1-åŸºäºè§†å›¾çš„å­é›†åˆ-ä¾‹å¦‚-listsublist"&gt;1. åŸºäºâ€œè§†å›¾â€çš„å­é›†åˆ (ä¾‹å¦‚ &lt;code&gt;List.subList&lt;/code&gt;)
&lt;/h4&gt;&lt;p&gt;å½“ä½ è°ƒç”¨ &lt;code&gt;List&lt;/code&gt;çš„ &lt;code&gt;subList(fromIndex, toIndex)&lt;/code&gt;æ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›çš„æ˜¯åŸåˆ—è¡¨çš„ä¸€ä¸ª&lt;strong&gt;è§†å›¾&lt;/strong&gt;ï¼ˆViewï¼‰ï¼Œ&lt;strong&gt;è€Œéä¸€ä¸ªç‹¬ç«‹çš„å‰¯æœ¬&lt;/strong&gt;ã€‚è¿™ä¸ªè§†å›¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤çš„æ˜¯èŒƒå›´å¼•ç”¨&lt;/strong&gt;ï¼šå®ƒå†…éƒ¨é€šå¸¸ä¼šæŒæœ‰å¯¹åŸé›†åˆçš„å¼•ç”¨ï¼Œå¹¶è®°å½•èµ·å§‹å’Œç»“æŸçš„åç§»é‡ï¼ˆä¾‹å¦‚ &lt;code&gt;fromIndex&lt;/code&gt;å’Œ &lt;code&gt;toIndex&lt;/code&gt;ï¼‰ï¼Œè€Œä¸æ˜¯ç»´æŠ¤ä¸¤ä¸ªç‹¬ç«‹çš„è¿­ä»£å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¹åŸé›†åˆçš„ç»“æ„æ€§ä¿®æ”¹æ˜¯å±é™©çš„&lt;/strong&gt;ï¼šå¦‚æœä½ é€šè¿‡ &lt;code&gt;subList&lt;/code&gt;è·å–äº†ä¸€ä¸ªå­åˆ—è¡¨åï¼Œåˆ&lt;strong&gt;ç›´æ¥å¯¹åŸ &lt;code&gt;List&lt;/code&gt;&lt;/strong&gt; è¿›è¡Œäº†ç»“æ„æ€§ä¿®æ”¹ï¼ˆä¾‹å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ï¼Œé‚£ä¹ˆ&lt;strong&gt;åç»­ä»»ä½•å¯¹å­åˆ—è¡¨çš„è®¿é—®æ“ä½œ&lt;/strong&gt;ï¼ˆå¦‚éå†ã€è·å–å¤§å°ç­‰ï¼‰éƒ½å¾ˆå¯èƒ½æŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ã€‚è¿™æ˜¯å› ä¸ºå­åˆ—è¡¨æ£€æµ‹åˆ°åŸåˆ—è¡¨çš„ç»“æ„å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œå…¶åŸæœ‰çš„åç§»é‡å¯èƒ½ä¸å†å‡†ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹å…ƒç´ å†…å®¹çš„ä¿®æ”¹æ˜¯åŒæ­¥çš„&lt;/strong&gt;ï¼šé€šè¿‡å­åˆ—è¡¨ &lt;code&gt;set&lt;/code&gt;æ–¹æ³•ä¿®æ”¹æŸä¸ªä½ç½®çš„å…ƒç´ ï¼Œæˆ–è€…ç›´æ¥ä¿®æ”¹å­åˆ—è¡¨/åŸåˆ—è¡¨ä¸­æŸä¸ªå…ƒç´ å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼ˆä¾‹å¦‚ä¿®æ”¹ä¸€ä¸ª &lt;code&gt;Person&lt;/code&gt;å¯¹è±¡çš„ &lt;code&gt;name&lt;/code&gt;å­—æ®µï¼‰ï¼Œè¿™ä¸ªæ”¹åŠ¨åœ¨å¦ä¸€æ–¹æ˜¯ç«‹å³å¯è§çš„ï¼Œå› ä¸ºå®ƒä»¬å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-é€šè¿‡å¤åˆ¶æ„é€ å‡½æ•°æˆ–æ–¹æ³•åˆ›å»ºçš„æ–°é›†åˆ"&gt;2. é€šè¿‡å¤åˆ¶æ„é€ å‡½æ•°æˆ–æ–¹æ³•åˆ›å»ºçš„æ–°é›†åˆ
&lt;/h4&gt;&lt;p&gt;å½“ä½ ä½¿ç”¨ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(existingList)&lt;/code&gt;ã€&lt;code&gt;new HashSet&amp;lt;&amp;gt;(existingSet)&lt;/code&gt;æˆ–è€… &lt;code&gt;addAll()&lt;/code&gt;ç­‰æ–¹æ³•æ—¶ï¼Œä½ åˆ›å»ºçš„æ˜¯åŸé›†åˆçš„ä¸€ä¸ª&lt;strong&gt;å…¨æ–°ç‹¬ç«‹çš„å‰¯æœ¬&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤çš„æ˜¯ç‹¬ç«‹æ•°æ®&lt;/strong&gt;ï¼šæ–°é›†åˆæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…éƒ¨æ•°ç»„æˆ–é“¾è¡¨ç»“æ„ï¼Œå¹¶å°†åŸé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ å¼•ç”¨&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;åˆ°æ–°ç»“æ„ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ’å…¥æ–°å…ƒç´ ä¸åŒæ­¥&lt;/strong&gt;ï¼šæ­¤åï¼Œå‘&lt;strong&gt;åŸé›†åˆ&lt;/strong&gt;ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼Œ&lt;strong&gt;ä¸ä¼šå½±å“&lt;/strong&gt;æ–°åˆ›å»ºçš„é›†åˆã€‚å‘&lt;strong&gt;æ–°é›†åˆ&lt;/strong&gt;ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼Œä¹Ÿ&lt;strong&gt;ä¸ä¼šå½±å“&lt;/strong&gt;åŸé›†åˆã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿®æ”¹å·²æœ‰å…ƒç´ å¯¹è±¡çš„å†…å®¹æ˜¯åŒæ­¥çš„&lt;/strong&gt;ï¼šå¦‚æœæ–°è€é›†åˆä¸­åŒ…å«çš„æŸä¸ª&lt;strong&gt;å…ƒç´ å¯¹è±¡æœ¬èº«è¢«ä¿®æ”¹&lt;/strong&gt;äº†ï¼ˆä¾‹å¦‚ï¼Œä½ ä¿®æ”¹äº†æŸä¸ª &lt;code&gt;Person&lt;/code&gt;å¯¹è±¡çš„ &lt;code&gt;name&lt;/code&gt;å±æ€§ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªä¿®æ”¹åœ¨å¦ä¸€ä¸ªé›†åˆä¸­ä¹Ÿèƒ½çœ‹åˆ°ï¼Œå› ä¸ºå®ƒä»¬æŒæœ‰çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚è¿™å°±æ˜¯&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;çš„ç‰¹ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ä¸å¯ä¿®æ”¹çš„è§†å›¾-ä¾‹å¦‚-collectionsunmodifiablelist"&gt;3. ä¸å¯ä¿®æ”¹çš„è§†å›¾ (ä¾‹å¦‚ &lt;code&gt;Collections.unmodifiableList&lt;/code&gt;)
&lt;/h4&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;Collections.unmodifiableList()&lt;/code&gt;ç­‰æ–¹æ³•åŒ…è£…åŸé›†åˆåï¼Œä¼šè¿”å›ä¸€ä¸ª&lt;strong&gt;ä¸å¯ä¿®æ”¹çš„è§†å›¾&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤çš„æ˜¯å¯¹åŸé›†åˆçš„å¼•ç”¨&lt;/strong&gt;ï¼šå®ƒå†…éƒ¨æŒæœ‰å¯¹åŸé›†åˆçš„å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥æ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ &lt;strong&gt;ä¸èƒ½&lt;/strong&gt;é€šè¿‡è¿™ä¸ªè§†å›¾è¿›è¡Œä»»ä½•ä¿®æ”¹æ“ä½œï¼ˆæ’å…¥ã€åˆ é™¤ç­‰ï¼‰ï¼Œå°è¯•æ“ä½œä¼šæŠ›å‡º &lt;code&gt;UnsupportedOperationException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯ï¼Œ&lt;strong&gt;åŸé›†åˆå‘ç”Ÿçš„ä»»ä½•å˜åŒ–&lt;/strong&gt;ï¼ˆç»“æ„å˜åŒ–æˆ–å…ƒç´ å†…å®¹å˜åŒ–ï¼‰&lt;strong&gt;éƒ½ä¼šåœ¨è¿™ä¸ªè§†å›¾ä¸­åæ˜ å‡ºæ¥&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªâ€œçª—å£â€ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ ·ï¼Œå¦‚æœåŸé›†åˆä¸­çš„å…ƒç´ å¯¹è±¡è¢«ä¿®æ”¹äº†å†…å®¹ï¼Œåœ¨è¿™ä¸ªè§†å›¾ä¸­ä¹Ÿèƒ½çœ‹åˆ°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒæ€»ç»“ä¸å»ºè®®"&gt;ğŸ’¡ æ ¸å¿ƒæ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦å®Œå…¨ç‹¬ç«‹ï¼Ÿç”¨å¤åˆ¶&lt;/strong&gt;ï¼šå¦‚æœä½ å¸Œæœ›å­é›†åˆå’ŒåŸé›†åˆåç»­çš„ä¿®æ”¹äº’ä¸å¹²æ‰°ï¼Œè¯·ä½¿ç”¨&lt;strong&gt;å¤åˆ¶æ„é€ å‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(oldList)&lt;/code&gt;ï¼‰æˆ– &lt;code&gt;addAll()&lt;/code&gt;æ–¹æ³•æ˜¾å¼åˆ›å»ºä¸€ä¸ªæ–°é›†åˆã€‚è®°ä½è¿™åªæ˜¯æµ…æ‹·è´ï¼Œå¦‚æœå…ƒç´ å¯¹è±¡æœ¬èº«å¯å˜ï¼Œä¿®æ”¹å®ƒä»¬çš„å†…å®¹ä»ä¼šç›¸äº’å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦èŠ‚çœå†…å­˜ä¸”æ“ä½œå¯æ§ï¼Ÿç”¨è§†å›¾&lt;/strong&gt;ï¼šå¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªâ€œçª—å£â€æ¥æ“ä½œåŸé›†åˆçš„æŸä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”èƒ½&lt;strong&gt;ä¿è¯&lt;/strong&gt;åœ¨å­è§†å›¾å­˜æ´»æœŸé—´&lt;strong&gt;ä¸å¯¹åŸé›†åˆè¿›è¡Œç»“æ„æ€§ä¿®æ”¹&lt;/strong&gt;ï¼Œé‚£ä¹ˆ &lt;code&gt;subList&lt;/code&gt;ç­‰è§†å›¾æ–¹æ³•æ˜¯é«˜æ•ˆçš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦åªè¯»è§†å›¾ï¼Ÿç”¨ä¸å¯ä¿®æ”¹åŒ…è£…å™¨&lt;/strong&gt;ï¼šå¦‚æœä½ æƒ³è®©å…¶ä»–éƒ¨åˆ†ä»£ç åªèƒ½è¯»å–è€Œä¸èƒ½ä¿®æ”¹é›†åˆå†…å®¹ï¼ˆä½†ä»èƒ½æ¥æ”¶åŸé›†åˆçš„æ›´æ–°ï¼‰ï¼Œä½¿ç”¨ &lt;code&gt;Collections.unmodifiableXXX&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è­¦æƒ•å¹¶å‘ä¿®æ”¹å¼‚å¸¸&lt;/strong&gt;ï¼šå¯¹äº &lt;code&gt;subList&lt;/code&gt;ç­‰è§†å›¾ï¼Œæœ€éœ€è¦è­¦æƒ•çš„å°±æ˜¯åœ¨æŒæœ‰å­è§†å›¾æ—¶ç›´æ¥ä¿®æ”¹åŸé›†åˆç»“æ„ï¼Œè¿™å‡ ä¹å¿…ç„¶å¯¼è‡´ &lt;code&gt;ConcurrentModificationException&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ·±æ‹·è´è§£å†³ä¸€åˆ‡ï¼ˆä½†æœ‰ä»£ä»·ï¼‰&lt;/strong&gt;ï¼šå¦‚æœä½ éœ€è¦è¿å…ƒç´ å¯¹è±¡çš„çŠ¶æ€éƒ½å®Œå…¨ç‹¬ç«‹ï¼Œå°±éœ€è¦è¿›è¡Œ&lt;strong&gt;æ·±æ‹·è´&lt;/strong&gt;ã€‚è¿™é€šå¸¸éœ€è¦é€šè¿‡åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œæˆ–æ‰‹åŠ¨éå†é›†åˆä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºæ–°å‰¯æœ¬ï¼ˆå¦‚è°ƒç”¨ &lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•æˆ–æ‹·è´æ„é€ å‡½æ•°ï¼‰æ¥å®ç°ã€‚ è¿™ä¼šå¸¦æ¥æ›´å¤§çš„æ€§èƒ½å’Œå¤æ‚åº¦å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Java é›†åˆçš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h2 id="å³ç§»"&gt;å³ç§»
&lt;/h2&gt;&lt;p&gt;ã€‚åœ¨Javaä¸­ï¼Œ&lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;å’Œ &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;éƒ½æ˜¯å³ç§»ä½è¿ç®—ç¬¦ï¼Œä½†å®ƒä»¬åœ¨å¤„ç†æœ€é«˜ä½ï¼ˆç¬¦å·ä½ï¼‰çš„æ–¹å¼ä¸Šæœ‰ç€æ ¹æœ¬æ€§çš„ä¸åŒï¼Œè¿™ç›´æ¥å½±å“äº†ç§»ä½åçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;(å¸¦ç¬¦å·å³ç§»)&lt;/th&gt;
&lt;th&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;(æ— ç¬¦å·å³ç§»)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŒºåˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ä½è¡¥&lt;strong&gt;ç¬¦å·ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ä½&lt;strong&gt;å§‹ç»ˆè¡¥0&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¦å·ä½å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿ç•™åŸæ•°çš„æ­£è´Ÿæ€§&lt;/td&gt;
&lt;td&gt;å¿½ç•¥ç¬¦å·ä½ï¼Œç§»ä½åç»“æœ&lt;strong&gt;æ’ä¸ºéè´Ÿæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ­£æ•°ç§»ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;æ•ˆæœç›¸åŒï¼Œé«˜ä½è¡¥0ï¼Œç›¸å½“äºé™¤ä»¥2çš„næ¬¡æ–¹&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;æ•ˆæœç›¸åŒï¼Œé«˜ä½è¡¥0ï¼Œç›¸å½“äºé™¤ä»¥2çš„næ¬¡æ–¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿæ•°ç§»ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ä½è¡¥1ï¼Œç»“æœä»ä¸º&lt;strong&gt;è´Ÿæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ä½è¡¥0ï¼Œç»“æœå˜ä¸º&lt;strong&gt;æ­£æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°å­¦æ„ä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹äºŒè¿›åˆ¶æ•°è¿›è¡Œ&lt;strong&gt;ç®—æœ¯å³ç§»&lt;/strong&gt;ï¼Œä¿æŒæ•°å€¼çš„ç¬¦å·&lt;/td&gt;
&lt;td&gt;å¯¹äºŒè¿›åˆ¶æ•°è¿›è¡Œ&lt;strong&gt;é€»è¾‘å³ç§»&lt;/strong&gt;ï¼Œä»…çœ‹ä½œæ¯”ç‰¹åºåˆ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼çš„å¿«é€Ÿé™¤ä»¥2çš„å¹‚æ¬¡ï¼Œä¸”éœ€è¦ä¿æŒæ­£è´Ÿå·&lt;/td&gt;
&lt;td&gt;å¤„ç†ä½æ©ç ã€å“ˆå¸Œè®¡ç®—ã€æ— ç¬¦å·æ•°æ®è§£æç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="å…·ä½“ç¤ºä¾‹è¯´æ˜"&gt;å…·ä½“ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹å‡ ä¸ªå…·ä½“çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ­£æ•°ç¤ºä¾‹ï¼ˆä»¥ 15 ä¸ºä¾‹ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;äºŒè¿›åˆ¶è¡¨ç¤ºï¼š&lt;code&gt;00000000 00000000 00000000 00001111&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;15 &amp;gt;&amp;gt; 2&lt;/code&gt;ï¼šå‘å³ç§»åŠ¨2ä½ï¼Œ&lt;strong&gt;é«˜ä½è¡¥0&lt;/strong&gt;ï¼Œå¾—åˆ° &lt;code&gt;00000000 00000000 00000000 00000011&lt;/code&gt;ï¼Œå³åè¿›åˆ¶ &lt;strong&gt;3&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;15 &amp;gt;&amp;gt;&amp;gt; 2&lt;/code&gt;ï¼šå‘å³ç§»åŠ¨2ä½ï¼Œ&lt;strong&gt;é«˜ä½è¡¥0&lt;/strong&gt;ï¼Œå¾—åˆ° &lt;code&gt;00000000 00000000 00000000 00000011&lt;/code&gt;ï¼Œå³åè¿›åˆ¶ &lt;strong&gt;3&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ­£æ•°ï¼Œä¸¤è€…ç»“æœå®Œå…¨ç›¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿæ•°ç¤ºä¾‹ï¼ˆä»¥ -15 ä¸ºä¾‹ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨Javaä¸­ï¼Œè´Ÿæ•°ä»¥å…¶&lt;strong&gt;äºŒè¿›åˆ¶è¡¥ç &lt;/strong&gt;å½¢å¼å­˜å‚¨ã€‚-15çš„è¡¥ç ä¸º &lt;code&gt;11111111 11111111 11111111 11110001&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-15 &amp;gt;&amp;gt; 2&lt;/code&gt;ï¼šå‘å³ç§»åŠ¨2ä½ï¼Œ&lt;strong&gt;é«˜ä½è¡¥1&lt;/strong&gt;ï¼ˆä¿æŒè´Ÿæ•°ç¬¦å·ï¼‰ï¼Œå¾—åˆ° &lt;code&gt;11111111 11111111 11111111 11111100&lt;/code&gt;ï¼Œè¿™ä¸ªè¡¥ç å¯¹åº”çš„åŸç æ˜¯ &lt;code&gt;10000000 00000000 00000000 00000100&lt;/code&gt;ï¼Œå³åè¿›åˆ¶ &lt;strong&gt;-4&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-15 &amp;gt;&amp;gt;&amp;gt; 2&lt;/code&gt;ï¼šå‘å³ç§»åŠ¨2ä½ï¼Œ&lt;strong&gt;é«˜ä½è¡¥0&lt;/strong&gt;ï¼Œå¾—åˆ° &lt;code&gt;00111111 11111111 11111111 11111100&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ­£æ•°ï¼Œå³åè¿›åˆ¶ &lt;strong&gt;1073741820&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="å¤åˆèµ‹å€¼è¿ç®—ç¬¦"&gt;å¤åˆèµ‹å€¼è¿ç®—ç¬¦
&lt;/h3&gt;&lt;p&gt;ä¸ &lt;code&gt;+=&lt;/code&gt;ç±»ä¼¼ï¼Œ&lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;å’Œ &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;ä¹Ÿæœ‰å¯¹åº”çš„å¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼š&lt;code&gt;&amp;gt;&amp;gt;=&lt;/code&gt;å’Œ &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;=&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;a &amp;gt;&amp;gt;= 2;&lt;/code&gt;ç­‰ä»·äº &lt;code&gt;a = a &amp;gt;&amp;gt; 2;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a &amp;gt;&amp;gt;&amp;gt;= 2;&lt;/code&gt;ç­‰ä»·äº &lt;code&gt;a = a &amp;gt;&amp;gt;&amp;gt; 2;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å¤åˆæ“ä½œä¼š&lt;strong&gt;ç›´æ¥æ”¹å˜å˜é‡ &lt;code&gt;a&lt;/code&gt;è‡ªèº«çš„å€¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="ä½¿ç”¨å»ºè®®ä¸æ³¨æ„äº‹é¡¹"&gt;ä½¿ç”¨å»ºè®®ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®éœ€æ±‚&lt;/strong&gt;ï¼šåœ¨é€‰æ‹©ä½¿ç”¨ &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;è¿˜æ˜¯ &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;æ—¶ï¼Œé¦–å…ˆè¦æ˜ç¡®ä½ çš„ç›®çš„æ˜¯è¿›è¡Œ&lt;strong&gt;ç®—æœ¯æ“ä½œ&lt;/strong&gt;ï¼ˆå…³å¿ƒæ•°å€¼å¤§å°å’Œæ­£è´Ÿï¼‰è¿˜æ˜¯&lt;strong&gt;ä½æ“ä½œ&lt;/strong&gt;ï¼ˆåªå…³å¿ƒæ¯”ç‰¹ä½æ¨¡å¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹&lt;/strong&gt;ï¼šç§»ä½è¿ç®—ç¬¦é€šå¸¸åªç”¨äºå¤„ç†æ•´æ•°ç±»å‹ï¼ˆå¦‚ &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;long&lt;/code&gt;ï¼‰çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§»ä½ä½æ•°&lt;/strong&gt;ï¼šç§»ä½çš„ä½æ•°ä¸åº”è¶…è¿‡æˆ–ç­‰äºæ•°æ®ç±»å‹çš„ä½æ•°ï¼ˆä¾‹å¦‚ï¼Œå¯¹32ä½çš„&lt;code&gt;int&lt;/code&gt;ç±»å‹ï¼Œç§»ä½ä½æ•°åº”å°äº32ï¼‰ï¼Œå¦åˆ™ç»“æœå¯èƒ½æ˜¯æœªå®šä¹‰çš„æˆ–ä¸é¢„æœŸä¸ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;å’Œ &lt;code&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;çš„åŒºåˆ«ã€‚å¦‚æœä½ æœ‰ä»»ä½•å…·ä½“çš„åº”ç”¨åœºæ™¯æˆ–ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="arraysaslist-1"&gt;Arrays.asList
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Arrays.asList()&lt;/code&gt;æ˜¯ Java ä¸­ä¸€ä¸ªéå¸¸å¸¸ç”¨ä½†ä¹Ÿå®¹æ˜“è®©äººå›°æƒ‘çš„æ–¹æ³•ï¼Œå®ƒç”¨äºå°†æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ª List é›†åˆã€‚ä¸ºäº†å¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡å…¶æ ¸å¿ƒç‰¹æ€§å’Œæ³¨æ„äº‹é¡¹ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;éœ€ç‰¹åˆ«æ³¨æ„&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›çš„ List ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;java.util.Arrays.ArrayList&lt;/code&gt;(ä¸€ä¸ªå›ºå®šå¤§å°çš„é™æ€å†…éƒ¨ç±»ï¼Œ&lt;strong&gt;é&lt;/strong&gt; &lt;code&gt;java.util.ArrayList&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯ç›´æ¥æ·»åŠ æˆ–åˆ é™¤å…ƒç´ &lt;/strong&gt;ï¼Œå¦åˆ™æŠ› &lt;code&gt;**UnsupportedOperationException**&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸åŸå§‹æ•°ç»„çš„å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…±äº«åº•å±‚æ•°æ®&lt;/strong&gt; (è¿”å›çš„ List æ˜¯åŸæ•°ç»„çš„ä¸€ä¸ªâ€œè§†å›¾â€)&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹ List çš„å…ƒç´ æˆ–æ•°ç»„çš„å…ƒç´ ï¼Œå¦ä¸€æ–¹&lt;strong&gt;ç«‹å³å¯è§&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼šå°†&lt;strong&gt;æ•´ä¸ªåŸºæœ¬ç±»å‹æ•°ç»„&lt;/strong&gt;è§†ä¸ºä¸€ä¸ªå¯¹è±¡ä½œä¸º List çš„&lt;strong&gt;å”¯ä¸€å…ƒç´ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ä½¿ç”¨&lt;strong&gt;åŒ…è£…ç±»å‹æ•°ç»„&lt;/strong&gt; (å¦‚ &lt;code&gt;Integer[]&lt;/code&gt;ä»£æ›¿ &lt;code&gt;int[]&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒ &lt;code&gt;get(index)&lt;/code&gt;, &lt;code&gt;set(index, element)&lt;/code&gt;, &lt;code&gt;contains()&lt;/code&gt;, &lt;code&gt;size()&lt;/code&gt;ç­‰&lt;strong&gt;éç»“æ„æ€§ä¿®æ”¹&lt;/strong&gt;æ“ä½œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½¬æ¢ä¸ºçœŸæ­£å¯å˜ List&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€ä½¿ç”¨ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(Arrays.asList(array))&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¦ç»†äº†è§£è¿™äº›ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ”„ æ ¸å¿ƒç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å›ºå®šå¤§å°ï¼ˆFixed-Sizeï¼‰&lt;/strong&gt;ï¼š&lt;code&gt;Arrays.asList()&lt;/code&gt;è¿”å›çš„ List åŒ…è£…äº†åŸå§‹çš„æ•°ç»„ï¼Œå› æ­¤å…¶&lt;strong&gt;é•¿åº¦æ˜¯å›ºå®šçš„&lt;/strong&gt;ã€‚ä»»ä½•è¯•å›¾&lt;strong&gt;æ”¹å˜åˆ—è¡¨é•¿åº¦&lt;/strong&gt;çš„æ“ä½œï¼ˆä¾‹å¦‚ &lt;code&gt;add()&lt;/code&gt;, &lt;code&gt;remove()&lt;/code&gt;, &lt;code&gt;clear()&lt;/code&gt;ï¼‰éƒ½ä¼šå¯¼è‡´ &lt;code&gt;UnsupportedOperationException&lt;/code&gt;å¼‚å¸¸ ã€‚ä½ åªèƒ½ä¿®æ”¹å·²æœ‰ä½ç½®çš„å…ƒç´ æˆ–è¯»å–ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; list = Arrays.asList(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;);
list.set(1, &amp;#34;X&amp;#34;); // OKï¼Œå°† &amp;#34;B&amp;#34; æ”¹ä¸º &amp;#34;X&amp;#34;ã€‚åŸæ•°ç»„å¯¹åº”ä½ç½®ä¹Ÿä¼šå˜ã€‚
// list.add(&amp;#34;D&amp;#34;); // æŠ›å‡º UnsupportedOperationException
// list.remove(0); // æŠ›å‡º UnsupportedOperationException
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸åŸæ•°ç»„çš„æ•°æ®ç»‘å®š&lt;/strong&gt;ï¼šè¿”å›çš„ List ä»…ä»…æ˜¯åŸæ•°ç»„çš„ä¸€ä¸ªâ€œè§†å›¾â€ï¼ˆViewï¼‰ï¼Œå®ƒä»¬&lt;strong&gt;å…±äº«åŒä¸€å—å†…å­˜åŒºåŸŸ&lt;/strong&gt;ã€‚è¿™æ„å‘³ç€ä½ å¯¹ List ä¸­æŸä¸ªå…ƒç´ çš„ä¿®æ”¹ï¼ˆé€šè¿‡ &lt;code&gt;set&lt;/code&gt;æ–¹æ³•ï¼‰ä¼šç›´æ¥å½±å“åŸæ•°ç»„ï¼›åä¹‹ï¼Œä¿®æ”¹åŸæ•°ç»„ï¼ŒList ä¸­çš„å¯¹åº”å…ƒç´ ä¹Ÿä¼šæ”¹å˜ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] arr = {&amp;#34;Apple&amp;#34;, &amp;#34;Banana&amp;#34;};
List&amp;lt;String&amp;gt; list = Arrays.asList(arr);
list.set(0, &amp;#34;Orange&amp;#34;); // ä¿®æ”¹åˆ—è¡¨
System.out.println(arr[0]); // è¾“å‡º &amp;#34;Orange&amp;#34;ï¼ŒåŸæ•°ç»„è¢«ä¿®æ”¹
arr[1] = &amp;#34;Grape&amp;#34;; // ä¿®æ”¹åŸæ•°ç»„
System.out.println(list.get(1)); // è¾“å‡º &amp;#34;Grape&amp;#34;ï¼Œåˆ—è¡¨ä¹Ÿéšä¹‹æ”¹å˜
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯¹åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„çš„â€œé™·é˜±â€&lt;/strong&gt;ï¼šè¿™ä¸ªæ–¹æ³•å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚ &lt;code&gt;int[]&lt;/code&gt;, &lt;code&gt;double[]&lt;/code&gt;ï¼‰çš„æ•°ç»„ä¼šè¡¨ç°å‡ºâ€œå¼‚å¸¸â€è¡Œä¸ºã€‚ç”±äºæ³›å‹ &lt;code&gt;T&lt;/code&gt;ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œ&lt;code&gt;Arrays.asList()&lt;/code&gt;ä¼šæŠŠæ•´ä¸ªåŸºæœ¬ç±»å‹æ•°ç»„å½“ä½œä¸€ä¸ª &lt;code&gt;Object&lt;/code&gt;å¯¹è±¡ï¼Œä½œä¸º List çš„&lt;strong&gt;å”¯ä¸€å…ƒç´ &lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int[] intArray = {1, 2, 3};
List&amp;lt;int[]&amp;gt; intList = Arrays.asList(intArray); // æ³¨æ„ï¼šList&amp;lt;int[]&amp;gt; è€Œä¸æ˜¯ List&amp;lt;Integer&amp;gt;
System.out.println(intList.size()); // è¾“å‡º 1ï¼Œå› ä¸ºæ•´ä¸ªæ•°ç»„è¢«è§†ä¸ºä¸€ä¸ªå…ƒç´ 
System.out.println(Arrays.toString(intList.get(0))); // è¾“å‡º [1, 2, 3]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ³•&lt;/strong&gt;ï¼šä½¿ç”¨&lt;strong&gt;åŒ…è£…ç±»å‹&lt;/strong&gt;ï¼ˆWrapper Classï¼‰çš„æ•°ç»„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Integer[] integerArray = {1, 2, 3};
List&amp;lt;Integer&amp;gt; integerList = Arrays.asList(integerArray); // æ­£ç¡®ï¼šList&amp;lt;Integer&amp;gt;
System.out.println(integerList.size()); // è¾“å‡º 3
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®ä½¿ç”¨ä¸è½¬æ¢"&gt;ğŸ›  å¦‚ä½•æ­£ç¡®ä½¿ç”¨ä¸è½¬æ¢
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºçœŸæ­£çš„å¯å˜ ArrayList&lt;/strong&gt;ï¼šå¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯ä»¥åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤å…ƒç´ çš„ Listï¼Œå¯ä»¥å°† &lt;code&gt;Arrays.asList()&lt;/code&gt;çš„è¿”å›å€¼ä½œä¸ºæ„é€ å‚æ•°ä¼ é€’ç»™ &lt;code&gt;java.util.ArrayList&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] arr = {&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;};
// åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ã€å¯å˜çš„ ArrayListï¼Œä¸åŸæ•°ç»„è„±é’©
List&amp;lt;String&amp;gt; mutableList = new ArrayList&amp;lt;&amp;gt;(Arrays.asList(arr));
mutableList.add(&amp;#34;D&amp;#34;); // OK
mutableList.remove(&amp;#34;A&amp;#34;); // OK
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Java 8+ Stream API è½¬æ¢&lt;/strong&gt;ï¼ˆå°¤å…¶é€‚ç”¨äºåŸºæœ¬ç±»å‹æ•°ç»„ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int[] intArray = {1, 2, 3};
// å°† int[] è½¬æ¢ä¸º List&amp;lt;Integer&amp;gt;
List&amp;lt;Integer&amp;gt; list = Arrays.stream(intArray)
.boxed() // å°† IntStream ä¸­çš„å…ƒç´ è£…ç®±ä¸º Integer
.collect(Collectors.toList());
list.add(4); // OK
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯ä¸æ€»ç»“"&gt;ğŸ’¡ é€‚ç”¨åœºæ™¯ä¸æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Arrays.asList()&lt;/code&gt;æœ€é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åªè¯»æ“ä½œ&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦å¿«é€Ÿè·å–ä¸€ä¸ªåˆ—è¡¨è§†å›¾æ¥è¿›è¡Œéå†ã€æŸ¥è¯¢ç­‰æ“ä½œï¼Œå¹¶ä¸”ä¸æ‰“ç®—ä¿®æ”¹åˆ—è¡¨å¤§å°æ—¶ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;API æ¡¥æ¥&lt;/strong&gt;ï¼šæŸäº›æ–¹æ³•æ¥å— List å‚æ•°ï¼Œä½†ä½ æ‰‹å¤´åªæœ‰æ•°ç»„ï¼Œå¯ä»¥å¿«é€Ÿè½¬æ¢åä¼ å…¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿«é€Ÿåˆå§‹åŒ–&lt;/strong&gt;ï¼šæ–¹ä¾¿åœ°åˆå§‹åŒ–ä¸€ä¸ªå…ƒç´ å›ºå®šçš„åˆ—è¡¨ç”¨äºæµ‹è¯•æˆ–é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;é‡è¦æé†’&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥éœ€&lt;strong&gt;ä¿®æ”¹åˆ—è¡¨å†…å®¹ï¼ˆå…ƒç´ å€¼ï¼‰&lt;/strong&gt; ä¸”å¸Œæœ›&lt;strong&gt;å½±å“åŸæ•°ç»„&lt;/strong&gt;ï¼Œå¯ä½¿ç”¨ &lt;code&gt;set()&lt;/code&gt;æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥éœ€&lt;strong&gt;æ”¹å˜åˆ—è¡¨ç»“æ„ï¼ˆå¢åˆ å…ƒç´ ï¼‰&lt;/strong&gt;ï¼ŒåŠ¡å¿…åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;ArrayList&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¤„ç†&lt;strong&gt;åŸºæœ¬ç±»å‹æ•°ç»„&lt;/strong&gt;æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨&lt;strong&gt;åŒ…è£…ç±»å‹æ•°ç»„&lt;/strong&gt;æˆ– &lt;strong&gt;Stream API&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;Arrays.asList()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="æ•°ç»„"&gt;æ•°ç»„
&lt;/h2&gt;&lt;p&gt;åœ¨ Java ä¸­åˆ›å»ºæ™®é€šæ•°ç»„ï¼ˆå³éé›†åˆï¼‰æœ‰å¤šç§æ–¹å¼ï¼Œä¸»è¦åˆ†ä¸ºä¸€ç»´æ•°ç»„å’Œå¤šç»´æ•°ç»„ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒçš„åˆ›å»ºæ–¹æ³•ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ›å»ºæ–¹æ³•&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€åˆå§‹åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] arr = new int[5];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å…ˆæŒ‡å®šæ•°ç»„é•¿åº¦ï¼Œå…ƒç´ ä¸ºé»˜è®¤å€¼ï¼ˆå¦‚intä¸º0ï¼Œå¯¹è±¡ä¸ºnullï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€åˆå§‹åŒ–ï¼ˆå®Œæ•´ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] arr = new int[]{1, 2, 3};&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºåŒæ—¶èµ‹å€¼ï¼Œæ•°ç»„é•¿åº¦ç”±å…ƒç´ ä¸ªæ•°å†³å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é™æ€åˆå§‹åŒ–ï¼ˆç²¾ç®€ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] arr = {1, 2, 3};&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç®€æ´çš„å†™æ³•ï¼Œå£°æ˜ä¸èµ‹å€¼å¿…é¡»åœ¨åŒä¸€è¯­å¥å®Œæˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†æ­¥å£°æ˜ä¸åˆ›å»º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[] arr;``arr = new int[5];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å£°æ˜å’Œåˆ›å»ºå¯åˆ†ä¸¤æ­¥è¿›è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äºŒç»´æ•°ç»„ï¼ˆè§„åˆ™ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[][] arr = new int[3][2];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»º3è¡Œ2åˆ—çš„äºŒç»´æ•°ç»„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äºŒç»´æ•°ç»„ï¼ˆä¸è§„åˆ™ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;int[][] arr = new int[2][];``arr[0] = new int[3];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å„è¡Œé•¿åº¦å¯ä»¥ä¸åŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ•°ç»„çš„åˆå§‹å€¼ä¸å…³é”®ç»†èŠ‚"&gt;ğŸ”§ æ•°ç»„çš„åˆå§‹å€¼ä¸å…³é”®ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;ç†è§£æ•°ç»„çš„åˆ›å»ºåï¼Œè¿˜æœ‰ä¸€äº›å…³é”®çš„ç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œå®ƒä»¬ç›´æ¥å½±å“ç€ä½ å¦‚ä½•ä½¿ç”¨æ•°ç»„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤å€¼è§„åˆ™&lt;/strong&gt;ï¼šä½¿ç”¨åŠ¨æ€åˆå§‹åŒ–æ—¶ï¼Œæ•°ç»„å…ƒç´ ä¼šè¢«è‡ªåŠ¨èµ‹äºˆé»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;int&lt;/code&gt;ä¸º &lt;code&gt;0&lt;/code&gt;ï¼Œ&lt;code&gt;double&lt;/code&gt;ä¸º &lt;code&gt;0.0&lt;/code&gt;ï¼Œ&lt;code&gt;boolean&lt;/code&gt;ä¸º &lt;code&gt;false&lt;/code&gt;ï¼Œè€Œå¼•ç”¨ç±»å‹ï¼ˆå¦‚ &lt;code&gt;String&lt;/code&gt;ï¼‰åˆ™ä¸º &lt;code&gt;null&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿åº¦å›ºå®šæ€§&lt;/strong&gt;ï¼šä¸€æ—¦æ•°ç»„è¢«åˆ›å»ºï¼Œå…¶é•¿åº¦å°±å›ºå®šä¸å˜ã€‚è¿™æ˜¯æ•°ç»„ä¸ &lt;code&gt;ArrayList&lt;/code&gt;ç­‰é›†åˆçš„ä¸»è¦åŒºåˆ«ä¹‹ä¸€ã€‚å¦‚æœéœ€è¦æ”¹å˜â€œæ•°ç»„â€å¤§å°ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸‹æ ‡ä»é›¶å¼€å§‹&lt;/strong&gt;ï¼šæ•°ç»„ä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰ä» &lt;code&gt;0&lt;/code&gt;å¼€å§‹ï¼Œæœ‰æ•ˆèŒƒå›´æ˜¯ &lt;code&gt;[0, array.length - 1]&lt;/code&gt;ã€‚è®¿é—®è¶…å‡ºæ­¤èŒƒå›´çš„å…ƒç´ ä¼šæŠ›å‡º &lt;code&gt;ArrayIndexOutOfBoundsException&lt;/code&gt;å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‰æ‹©å»ºè®®ä¸æœ€ä½³å®è·µ"&gt;ğŸ’¡ é€‰æ‹©å»ºè®®ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•é€‰æ‹©åˆ›å»ºæ–¹å¼å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®å…ƒç´ æ—¶&lt;/strong&gt;ï¼šå¦‚æœä¸€å¼€å§‹å°±çŸ¥é“æ‰€æœ‰è¦å­˜æ”¾çš„å…ƒç´ ï¼Œä½¿ç”¨&lt;strong&gt;é™æ€åˆå§‹åŒ–&lt;/strong&gt;ï¼ˆç‰¹åˆ«æ˜¯ç²¾ç®€å†™æ³•ï¼‰æœ€ç›´æ¥æ˜äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªçŸ¥å…ƒç´ æ—¶&lt;/strong&gt;ï¼šå¦‚æœæ•°ç»„é•¿åº¦å·²çŸ¥ï¼Œä½†å…·ä½“å…ƒç´ å€¼éœ€è¦åç»­è®¡ç®—æˆ–è¾“å…¥ï¼Œåˆ™ä½¿ç”¨&lt;strong&gt;åŠ¨æ€åˆå§‹åŒ–&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°å¿ƒåŸºæœ¬ç±»å‹æ•°ç»„çš„â€œé™·é˜±â€&lt;/strong&gt;ï¼šè¦æ³¨æ„ï¼Œç±»ä¼¼ &lt;code&gt;int[]&lt;/code&gt;æ˜¯åŸºæœ¬ç±»å‹æ•°ç»„ï¼Œè€Œç±»ä¼¼ &lt;code&gt;Integer[]&lt;/code&gt;æ˜¯å¼•ç”¨ç±»å‹æ•°ç»„ã€‚åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼ˆä¾‹å¦‚ä½œä¸ºæŸäº›æ–¹æ³•çš„å‚æ•°æ—¶ï¼‰ä¸¤è€…è¡¨ç°ä¸åŒï¼Œä½†å°±åˆ›å»ºæ–¹å¼è€Œè¨€ï¼Œè¯­æ³•æ˜¯ç›¸åŒçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£å¹¶åœ¨ Java ä¸­åˆ›å»ºæ‰€éœ€çš„æ•°ç»„ï¼å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„æ•°ç»„ç”¨æ³•æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ•°ç»„--arraylist"&gt;æ•°ç»„ &amp;amp; ArrayList
&lt;/h2&gt;&lt;p&gt;æ•°ç»„å’Œ &lt;code&gt;ArrayList&lt;/code&gt;æ˜¯ Java ä¸­å­˜å‚¨ä¸€ç»„æ•°æ®çš„ä¸¤ç§æ ¸å¿ƒæ–¹å¼ï¼Œå®ƒä»¬åœ¨ä½¿ç”¨åœºæ™¯å’Œæ€§èƒ½ä¸Šå„æœ‰ä¾§é‡ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;æ•°ç»„ (Array)&lt;/th&gt;
&lt;th&gt;ArrayList&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°/çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œåˆ›å»ºåæ— æ³•æ”¹å˜&lt;/td&gt;
&lt;td&gt;åŠ¨æ€æ‰©å®¹ï¼Œå®¹é‡å¯è‡ªåŠ¨å¢é•¿ï¼ˆé€šå¸¸ä¸ºåŸå®¹é‡çš„1.5å€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒçš„æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚ &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt;) å’Œå¯¹è±¡ç±»å‹&lt;/td&gt;
&lt;td&gt;ä»…æ”¯æŒå¯¹è±¡ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹éœ€è£…ç®±/æ‹†ç®±ï¼ˆå¦‚ &lt;code&gt;Integer&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿ç»­å†…å­˜å—ï¼Œæ— é¢å¤–å¼€é”€&lt;/td&gt;
&lt;td&gt;éœ€é¢å¤–ç©ºé—´å­˜å‚¨å®¹é‡ç­‰ä¿¡æ¯ï¼ŒåŠ¨æ€æ‰©å®¹ä¼šå¸¦æ¥ä¸´æ—¶å¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šç»´æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸç”Ÿæ”¯æŒï¼ˆå¦‚ &lt;code&gt;int[][]&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€åµŒå¥—å®ç°ï¼ˆå¦‚ &lt;code&gt;ArrayList&amp;lt;ArrayList&amp;lt;Integer&amp;gt;&amp;gt;&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è®¿é—®å’Œä¿®æ”¹æå¿«&lt;/strong&gt; (O(1))ï¼Œæ— æ–¹æ³•è°ƒç”¨å¼€é”€&lt;/td&gt;
&lt;td&gt;è®¿é—®ä¹Ÿå¾ˆå¿« (O(1))ï¼Œä½†å› å°è£…æœ‰å°‘è®¸å¼€é”€ï¼›å¢åˆ å…ƒç´ å¯èƒ½å¯¼è‡´æ•°æ®ç§»åŠ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½ä¸æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºç¡€ï¼Œæ“ä½œéœ€æ‰‹åŠ¨å®ç°ï¼ˆå¦‚å¤åˆ¶æ•°ç»„æ¥æ‰©å®¹ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸°å¯Œï¼Œæä¾› &lt;code&gt;add()&lt;/code&gt;, &lt;code&gt;remove()&lt;/code&gt;, &lt;code&gt;contains()&lt;/code&gt;ç­‰ä¾¿æ·æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©çš„å…³é”®åœ¨äºæ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚è¿›è¡Œæƒè¡¡ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹©æ•°ç»„çš„æƒ…å†µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é‡å›ºå®šä¸”å·²çŸ¥&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œå­˜å‚¨ä¸€å‘¨çš„ä¸ƒå¤©ã€ä¸€ä¸ªæ£‹ç›˜çš„æ ¼å­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æè‡´æ€§èƒ½&lt;/strong&gt;ï¼šåœ¨æ€§èƒ½è‡³å…³é‡è¦çš„åœºæ™¯ï¼Œå¦‚ç§‘å­¦è®¡ç®—ã€æ¸¸æˆå¼•æ“ã€å›¾åƒå¤„ç†ä¸­çš„åƒç´ çŸ©é˜µï¼Œä½¿ç”¨åŸºæœ¬ç±»å‹æ•°ç»„å¯ä»¥é¿å…è£…ç®±å¼€é”€ï¼Œè·å¾—æœ€é«˜æ•ˆç‡ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä½¿ç”¨å¤šç»´ç»“æ„&lt;/strong&gt;ï¼šå¦‚è¡¨ç¤ºçŸ©é˜µã€è¡¨æ ¼ç­‰ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸åº•å±‚APIäº¤äº’&lt;/strong&gt;ï¼šè®¸å¤šJavaæ ‡å‡†åº“æˆ–ç¬¬ä¸‰æ–¹åº“çš„æ–¹æ³•è¦æ±‚ä¼ å…¥æ•°ç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© &lt;code&gt;ArrayList&lt;/code&gt;çš„æƒ…å†µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é‡åŠ¨æ€å˜åŒ–&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œå­˜å‚¨ç”¨æˆ·è¾“å…¥ã€ä»æ•°æ®åº“æŸ¥è¯¢è¿”å›çš„ç»“æœé›†ã€ç¤¾äº¤åª’ä½“çš„åŠ¨æ€æ¶ˆæ¯æµ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦é¢‘ç¹å¢åˆ å…ƒç´ &lt;/strong&gt;ï¼šå¹¶ä¸”ä½ç½®ä¸ç¡®å®šï¼Œ&lt;code&gt;ArrayList&lt;/code&gt;æä¾›çš„ &lt;code&gt;add()&lt;/code&gt;å’Œ &lt;code&gt;remove()&lt;/code&gt;æ–¹æ³•éå¸¸æ–¹ä¾¿ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¸°å¯Œçš„é›†åˆæ“ä½œ&lt;/strong&gt;ï¼šå¦‚æ£€æŸ¥åŒ…å«ï¼ˆ&lt;code&gt;contains&lt;/code&gt;ï¼‰ã€è·å–å­åˆ—è¡¨ç­‰ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœ‹é‡ç±»å‹å®‰å…¨ä¸ä»£ç ç®€æ´&lt;/strong&gt;ï¼šæ³›å‹èƒ½åœ¨ç¼–è¯‘æœŸå°±é¿å…ç±»å‹é”™è¯¯ï¼Œä¸°å¯Œçš„APIè®©ä»£ç æ›´æ˜“è¯»å†™å’Œç»´æŠ¤ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ-2"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°ç»„æ˜¯â€œè¿åŠ¨å‘˜â€&lt;/strong&gt;ï¼šè½»é‡ã€ä¸“æ³¨ã€é€Ÿåº¦æè‡´ï¼Œé€‚åˆå¤„ç†å›ºå®šã€å·²çŸ¥ä¸”å¯¹æ€§èƒ½æ•æ„Ÿçš„æ•°æ® ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ArrayList&lt;/code&gt;æ˜¯â€œç‘å£«å†›åˆ€â€&lt;/strong&gt;ï¼šåŠŸèƒ½ä¸°å¯Œã€çµæ´»é€šç”¨ï¼Œé€‚åˆå¤„ç†åŠ¨æ€å˜åŒ–ã€éœ€è¦å¤æ‚æ“ä½œçš„æ•°æ®é›†åˆ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„æ€§èƒ½ä¼˜åŒ–å®è·µæ˜¯ï¼Œå¦‚æœèƒ½å¤Ÿé¢„ä¼° &lt;code&gt;ArrayList&lt;/code&gt;çš„å¤§è‡´å®¹é‡ï¼Œæœ€å¥½åœ¨åˆ›å»ºæ—¶ä½¿ç”¨å¸¦åˆå§‹å®¹é‡çš„æ„é€ å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(1000)&lt;/code&gt;ï¼‰æˆ–è°ƒç”¨ &lt;code&gt;ensureCapacity()&lt;/code&gt;æ–¹æ³•é¢„å…ˆåˆ†é…è¶³å¤Ÿç©ºé—´ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘æ‰©å®¹æ¬¡æ•°ï¼Œæå‡æ€§èƒ½ ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åœ¨ç¼–ç¨‹æ—¶åšå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2 id="ç›¸äº’è½¬åŒ–"&gt;ç›¸äº’è½¬åŒ–
&lt;/h2&gt;&lt;p&gt;åœ¨ Java ä¸­ï¼Œæ•°ç»„å’Œ &lt;code&gt;List&lt;/code&gt;çš„ç›¸äº’è½¬æ¢æ˜¯å¸¸è§æ“ä½œã€‚è™½ç„¶å®ƒä»¬éƒ½æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ï¼Œä½†æ•°ç»„å¤§å°å›ºå®šï¼Œè€Œ &lt;code&gt;List&lt;/code&gt;å¯ä»¥åŠ¨æ€å¢é•¿ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒæ–¹æ³•ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»ä¸»è¦è½¬æ¢æ–¹å¼åŠå…¶ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è½¬æ¢æ–¹å‘&lt;/th&gt;
&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;å…³é”®ç‰¹ç‚¹/æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°ç»„ â†’ List&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Arrays.asList(array)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›ä¸€ä¸ª&lt;strong&gt;å›ºå®šå¤§å°&lt;/strong&gt;çš„ List &lt;strong&gt;è§†å›¾&lt;/strong&gt;ï¼Œä¸åŸæ•°ç»„æ•°æ®å…±äº«ã€‚ä¸æ”¯æŒå¢åˆ æ“ä½œ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;new ArrayList&amp;lt;&amp;gt;(Arrays.asList(array))&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºä¸€ä¸ª&lt;strong&gt;çœŸæ­£å¯å˜&lt;/strong&gt;çš„ &lt;code&gt;ArrayList&lt;/code&gt;ï¼Œä¸åŸæ•°ç»„è„±é’© ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Collections.addAll(list, array)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†æ•°ç»„å…ƒç´ æ·»åŠ åˆ°&lt;strong&gt;å·²å­˜åœ¨&lt;/strong&gt;çš„å¯å˜ List ä¸­ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Arrays.stream(array).collect(Collectors.toList())&lt;/code&gt;(Java 8+)&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ Stream APIï¼Œçµæ´»ä¸”å¯è¯»æ€§å¥½ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;List â†’ æ•°ç»„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;list.toArray()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å› &lt;code&gt;Object[]&lt;/code&gt;ç±»å‹æ•°ç»„ï¼Œé€šå¸¸&lt;strong&gt;ä¸å¸¸ç”¨&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;list.toArray(new T[0])&lt;/code&gt;(æ¨è)&lt;/td&gt;
&lt;td&gt;ä¼ å…¥ä¸€ä¸ªç±»å‹åŒ¹é…çš„ç©ºæ•°ç»„ï¼ŒJVM é€šå¸¸ä¼šä¼˜åŒ–å¹¶ç›´æ¥åˆ›å»ºæ–°æ•°ç»„ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;list.toArray(new T[list.size()])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¼ å…¥ä¸€ä¸ªå¤§å°åŒ¹é…çš„æ•°ç»„ï¼Œæ€§èƒ½å¯èƒ½ç¨å¥½ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;list.stream().toArray(T[]::new)&lt;/code&gt;(Java 8+)&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ Stream APIï¼Œä»£ç ç®€æ´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ•°ç»„è½¬æ¢ä¸º-list"&gt;ğŸ”§ æ•°ç»„è½¬æ¢ä¸º List
&lt;/h3&gt;&lt;h4 id="ä½¿ç”¨-arraysaslist"&gt;ä½¿ç”¨ &lt;code&gt;Arrays.asList()&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¿«æ·çš„æ–¹æ³•ï¼Œä½†è¿”å›çš„ List æ˜¯å›ºå®šå¤§å°çš„ï¼Œå°è¯•æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ä¼šæŠ›å‡º &lt;code&gt;UnsupportedOperationException&lt;/code&gt;ã€‚å®ƒæ›´åƒæ˜¯åŸæ•°ç»„çš„ä¸€ä¸ªâ€œè§†å›¾â€ï¼Œä¿®æ”¹ List ä¸­çš„å…ƒç´ ä¼šç›´æ¥å½±å“åŸæ•°ç»„ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] array = {&amp;#34;Apple&amp;#34;, &amp;#34;Banana&amp;#34;, &amp;#34;Cherry&amp;#34;};
List&amp;lt;String&amp;gt; list = Arrays.asList(array);
list.set(0, &amp;#34;Orange&amp;#34;); // å¯ä»¥ä¿®æ”¹å…ƒç´ ï¼ŒåŸæ•°ç»„array[0]ä¹Ÿä¼šå˜ä¸º&amp;#34;Orange&amp;#34;
// list.add(&amp;#34;Grape&amp;#34;); // é”™è¯¯ï¼æŠ›å‡º UnsupportedOperationException
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="åˆ›å»ºçœŸæ­£çš„å¯å˜-list"&gt;åˆ›å»ºçœŸæ­£çš„å¯å˜ List
&lt;/h4&gt;&lt;p&gt;å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯ä»¥å¢åˆ å…ƒç´ çš„ Listï¼Œå¯ä»¥å°†å…¶åŒ…è£…åœ¨ä¸€ä¸ªæ–°çš„ &lt;code&gt;ArrayList&lt;/code&gt;ä¸­ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] array = {&amp;#34;Apple&amp;#34;, &amp;#34;Banana&amp;#34;, &amp;#34;Cherry&amp;#34;};
List&amp;lt;String&amp;gt; mutableList = new ArrayList&amp;lt;&amp;gt;(Arrays.asList(array));
mutableList.add(&amp;#34;Grape&amp;#34;); // ç°åœ¨å¯ä»¥æ­£å¸¸æ·»åŠ äº†
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="å…¶ä»–æ–¹æ³•"&gt;å…¶ä»–æ–¹æ³•
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;Collections.addAll()&lt;/code&gt;&lt;/strong&gt;ï¼šé€‚ç”¨äºå·²æœ‰ä¸€ä¸ªå¯å˜ List å¹¶å‘å…¶ä¸­æ·»åŠ æ•°ç»„å…ƒç´ çš„æƒ…å†µ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ Stream API (Java 8+)&lt;/strong&gt;ï¼šæä¾›äº†ç°ä»£å‡½æ•°å¼ç¼–ç¨‹çš„é£æ ¼ï¼Œéå¸¸çµæ´» ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-list-è½¬æ¢ä¸ºæ•°ç»„"&gt;ğŸ“¦ List è½¬æ¢ä¸ºæ•°ç»„
&lt;/h3&gt;&lt;h4 id="ä½¿ç”¨-toarrayt-aæ–¹æ³•"&gt;ä½¿ç”¨ &lt;code&gt;toArray(T[] a)&lt;/code&gt;æ–¹æ³•
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨å’Œæ¨èçš„æ–¹å¼ã€‚å…³é”®åœ¨äºä¼ å…¥ä¸€ä¸ªç±»å‹æ­£ç¡®çš„æ•°ç»„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¨èä¼ å…¥ç©ºæ•°ç»„&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;list.toArray(new T[0])&lt;/code&gt;æ˜¯ç°ä»£ JDK ä¸­æ¨èçš„åšæ³•ï¼Œæ€§èƒ½å¾ˆå¥½ä¸”ä»£ç ç®€æ´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; list = Arrays.asList(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;);
String[] array = list.toArray(new String[0]);
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼ å…¥ç¡®å®šå¤§å°çš„æ•°ç»„&lt;/strong&gt;ï¼šä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¤§å°åŒ¹é…çš„æ•°ç»„ï¼Œè¿™æ—¶ &lt;code&gt;toArray&lt;/code&gt;ä¼šä½¿ç”¨è¿™ä¸ªæ•°ç»„è€Œæ— éœ€æ–°å»º ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;String[] array = list.toArray(new String[list.size()]);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ä½¿ç”¨-stream-api-java-8"&gt;ä½¿ç”¨ Stream API (Java 8+)
&lt;/h4&gt;&lt;p&gt;åŒæ ·å¯ä»¥é€šè¿‡ Stream å®Œæˆè½¬æ¢ ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;List&amp;lt;String&amp;gt; list = Arrays.asList(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;);
String[] array = list.stream().toArray(String[]::new);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ç‰¹åˆ«æ³¨æ„åŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„"&gt;âš ï¸ ç‰¹åˆ«æ³¨æ„ï¼šåŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„
&lt;/h3&gt;&lt;p&gt;å¯¹äº &lt;code&gt;int[]&lt;/code&gt;, &lt;code&gt;double[]&lt;/code&gt;ç­‰åŸºæœ¬ç±»å‹æ•°ç»„ï¼Œ&lt;strong&gt;ä¸èƒ½ç›´æ¥ä½¿ç”¨ &lt;code&gt;Arrays.asList()&lt;/code&gt;&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä¼šå°†æ•´ä¸ªåŸºæœ¬ç±»å‹æ•°ç»„è§†ä¸ºä¸€ä¸ªå¯¹è±¡å…ƒç´ ï¼Œè€Œä¸æ˜¯å°†å…¶æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºåˆ—è¡¨é¡¹ ã€‚ä½ éœ€è¦ä½¿ç”¨ Stream API è¿›è¡Œè½¬æ¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int[] intArray = {1, 2, 3};
// é”™è¯¯åšæ³•ï¼šList&amp;lt;int[]&amp;gt; wrongList = Arrays.asList(intArray); // è¿™é‡ŒListé‡Œåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯æ•´ä¸ªintArrayå¯¹è±¡
// æ­£ç¡®åšæ³•ï¼šä½¿ç”¨Stream
List&amp;lt;Integer&amp;gt; correctList = Arrays.stream(intArray).boxed().collect(Collectors.toList());
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸é€‰æ‹©å»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦åªè¯»è§†å›¾&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;Arrays.asList()&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦å¯å˜åˆ—è¡¨&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;new ArrayList&amp;lt;&amp;gt;(Arrays.asList(array))&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚ä»£ç ç®€æ´ç°ä»£ (Java 8+)&lt;/strong&gt;ï¼šä½¿ç”¨ Stream APIã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;List è½¬æ•°ç»„&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨ &lt;code&gt;list.toArray(new T[0])&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©ä½ åœ¨ç¼–ç¨‹æ—¶è½»æ¾å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼&lt;/p&gt;
&lt;h2 id="ygc"&gt;YGC
&lt;/h2&gt;&lt;p&gt;å½“åœ¨ Minor GC è¿‡ç¨‹ä¸­ï¼Œå­˜æ´»çš„å¯¹è±¡å¤ªå¤šä»¥è‡³äº To Survivor åŒºæ”¾ä¸ä¸‹æ—¶ï¼Œè¶…å‡ºçš„éƒ¨åˆ†ä¼š&lt;strong&gt;ç›´æ¥æ™‹å‡åˆ°è€å¹´ä»£&lt;/strong&gt;ã€‚è¿™æ˜¯ JVM ä¸€ç§é‡è¦çš„&lt;strong&gt;å†…å­˜åˆ†é…æ‹…ä¿æœºåˆ¶&lt;/strong&gt;ï¼Œç›®çš„æ˜¯ç¡®ä¿åƒåœ¾å›æ”¶è¿‡ç¨‹èƒ½å¤Ÿé¡ºåˆ©å®Œæˆï¼Œé¿å…å†…å­˜åˆ†é…å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¦‚æ‹¬äº†è¿™ä¸€è¿‡ç¨‹çš„æ ¸å¿ƒç¯èŠ‚å’Œå…³é”®ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€ŸæŠŠæ¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒç¯èŠ‚&lt;/th&gt;
&lt;th&gt;å…³é”®ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Eden åŒºç©ºé—´ä¸è¶³è§¦å‘ Minor GCï¼›å­˜æ´»å¯¹è±¡æ€»ä½“ç§¯ &amp;gt; To Survivor åŒºå®¹é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;JVM çš„åº”å¯¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯åŠ¨&lt;strong&gt;å†…å­˜åˆ†é…æ‹…ä¿æœºåˆ¶&lt;/strong&gt;ï¼Œè®© To Survivor åŒºæ— æ³•å®¹çº³çš„å‰©ä½™å­˜æ´»å¯¹è±¡&lt;strong&gt;ç›´æ¥è¿›å…¥è€å¹´ä»£&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡æ„å›¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¡®ä¿GCå®‰å…¨&lt;/strong&gt;ï¼šä¼˜å…ˆä¿è¯ç¨‹åºä¸å› å†…å­˜åˆ†é…å¤±è´¥è€Œå´©æºƒï¼›&lt;strong&gt;ä¼˜åŒ–æ€§èƒ½&lt;/strong&gt;ï¼šé¿å…å¤§å¯¹è±¡åœ¨ Survivor åŒºä¹‹é—´åå¤å¤åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ½œåœ¨å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;strong&gt;åŠ é€Ÿè€å¹´ä»£å¡«æ»¡&lt;/strong&gt;ï¼Œå¢åŠ  Major GC / Full GC é£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å…³å‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;-XX:PretenureSizeThreshold&lt;/code&gt;ï¼ˆå¤§å¯¹è±¡ç›´æ¥å…¥è€å¹´ä»£ï¼‰ï¼›&lt;code&gt;-XX:MaxTenuringThreshold&lt;/code&gt;ï¼ˆæ™‹å‡å¹´é¾„é˜ˆå€¼ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦ç»†è¿‡ç¨‹ä¸è®¾è®¡è€ƒé‡"&gt;ğŸ” è¯¦ç»†è¿‡ç¨‹ä¸è®¾è®¡è€ƒé‡
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¸è§„çš„ Minor GC æµç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“ &lt;strong&gt;Eden åŒºç©ºé—´ä¸è¶³&lt;/strong&gt;æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡ Minor GCã€‚JVM ä¼šæš‚åœç”¨æˆ·çº¿ç¨‹ï¼ˆStop-The-Worldï¼‰ï¼Œç„¶åè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ‡è®°&lt;/strong&gt;ï¼šä» GC Roots å¼€å§‹ï¼Œæ ‡è®°å‡º Eden åŒºå’Œ &lt;strong&gt;From Survivor åŒº&lt;/strong&gt;ä¸­æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆ¶&lt;/strong&gt;ï¼šå°†æ ‡è®°å‡ºçš„æ‰€æœ‰å­˜æ´»å¯¹è±¡ï¼Œ&lt;strong&gt;å¤åˆ¶åˆ° To Survivor åŒº&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸…ç†&lt;/strong&gt;ï¼šæ¸…ç©º Eden åŒºå’Œåˆšæ‰çš„ From Survivor åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§’è‰²äº’æ¢&lt;/strong&gt;ï¼šåœ¨è¿™æ¬¡ GC å®Œæˆåï¼ŒåŸæ¥çš„ To Survivor åŒºå˜æˆä¸‹ä¸€æ¬¡ GC çš„ From Survivor åŒºï¼Œè€ŒåŸæ¥çš„ From Survivor åŒºåˆ™å˜ä¸ºæ–°çš„ To Survivor åŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å½“ To Survivor åŒºç©ºé—´ä¸è¶³æ—¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ¬æ¬¡ Minor GC åå­˜æ´»çš„å¯¹è±¡æ€»ä½“ç§¯è¶…è¿‡äº† &lt;strong&gt;To Survivor åŒºçš„æ€»å®¹é‡&lt;/strong&gt;ï¼ŒJVM ä¸ä¼šè®©è¿™æ¬¡ GC å¤±è´¥ï¼Œè€Œæ˜¯ä¼šå¯åŠ¨ä¸€ä¸ªâ€œåå¤‡è®¡åˆ’â€â€”â€”&lt;strong&gt;å†…å­˜åˆ†é…æ‹…ä¿æœºåˆ¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JVM ä¼šæ£€æŸ¥&lt;strong&gt;è€å¹´ä»£çš„å‰©ä½™ç©ºé—´&lt;/strong&gt;ã€‚å¦‚æœè€å¹´ä»£å‰©ä½™ç©ºé—´&lt;strong&gt;è¶³å¤Ÿå®¹çº³&lt;/strong&gt;è¿™äº›è¶…å‡ºçš„å­˜æ´»å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¼šè¢«&lt;strong&gt;ç›´æ¥å¤åˆ¶åˆ°è€å¹´ä»£&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¹‹åï¼Œé‚£äº›èƒ½å¤Ÿè¢« To Survivor åŒºå®¹çº³çš„å­˜æ´»å¯¹è±¡ä¼šæ­£å¸¸è¿›å…¥ To Survivor åŒºï¼Œå¹¶ä¸”å®ƒä»¬çš„å¹´é¾„è®¡æ•°å™¨ä¼šå¢åŠ 1å²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿å®‰å…¨&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¸å¿ƒçš„åŸå› ã€‚GC çš„é¦–è¦ç›®æ ‡æ˜¯ä¿è¯åº”ç”¨ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œä¸‹å»ã€‚å¦‚æœå› ä¸º Survivor åŒºæ»¡äº†å°±ä¸å¤„ç†ï¼Œä¼šå¯¼è‡´å†…å­˜åˆ†é…å¤±è´¥ï¼Œç¨‹åºå¯èƒ½å´©æºƒã€‚ç›´æ¥æ™‹å‡åˆ°ç©ºé—´æ›´å¤§çš„è€å¹´ä»£æ˜¯ä¸€ç§å¯é çš„ä¿éšœæªæ–½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šSurvivor åŒºæœ¬èº«ä¸å¤§ï¼ˆé»˜è®¤åªå æ–°ç”Ÿä»£çš„10%ï¼‰ï¼Œè®©ä¸€äº›è¾ƒå¤§çš„å­˜æ´»å¯¹è±¡åœ¨å…¶ä¸­æ¥å›å¤åˆ¶ï¼ˆæ¯æ¬¡ Minor GC éƒ½è¦å¤åˆ¶ä¸€æ¬¡ï¼‰çš„æˆæœ¬å¾ˆé«˜ã€‚è®©å®ƒä»¬å°½æ—©è¿›å…¥è€å¹´ä»£ï¼Œå¯ä»¥é¿å…è¿™ç§æ— è°“çš„å¤åˆ¶å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ½œåœ¨å½±å“ä¸è°ƒä¼˜æç¤º"&gt;âš ï¸ æ½œåœ¨å½±å“ä¸è°ƒä¼˜æç¤º
&lt;/h3&gt;&lt;p&gt;è™½ç„¶è¿™ä¸ªæœºåˆ¶ä¿è¯äº†ç¨‹åºçš„å®‰å…¨æ€§ï¼Œä½†ä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›&lt;strong&gt;å‰¯ä½œç”¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è€å¹´ä»£å‹åŠ›å¢å¤§&lt;/strong&gt;ï¼šé¢‘ç¹å‘ç”Ÿè¿™ç§æƒ…å†µä¼šå¯¼è‡´å¤§é‡æœ¬è¯¥ç•™åœ¨æ–°ç”Ÿä»£çš„çŸ­æœŸå­˜æ´»å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ï¼ŒåŠ é€Ÿè€å¹´ä»£çš„å¡«æ»¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ  Full GC é£é™©&lt;/strong&gt;ï¼šè€å¹´ä»£è¢«æ›´å¿«å¡«æ»¡åï¼Œä¼šæ›´å®¹æ˜“è§¦å‘ &lt;strong&gt;Major GC / Full GC&lt;/strong&gt;ã€‚è€Œ Full GC çš„é€Ÿåº¦æ¯” Minor GC æ…¢å¾—å¤šï¼Œä¼šå¯¼è‡´åº”ç”¨åœé¡¿æ—¶é—´æ˜¾è‘—åŠ é•¿ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†ç¼“è§£è¿™ç§æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹&lt;strong&gt;è°ƒä¼˜æ€è·¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è°ƒæ•´ Survivor åŒºå¤§å°&lt;/strong&gt;ï¼šé€šè¿‡ JVM å‚æ•° &lt;code&gt;-XX:SurvivorRatio&lt;/code&gt;è°ƒæ•´ Eden å’Œ Survivor çš„æ¯”ä¾‹ï¼Œé€‚å½“å¢å¤§ Survivor åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨å¯¹è±¡ç»“æ„&lt;/strong&gt;ï¼šæ£€æŸ¥ä»£ç ï¼Œé¿å…åˆ›å»ºè¿‡å¤šâ€œæœç”Ÿå¤•æ­»â€çš„å¤§å¯¹è±¡ï¼Œå‡å°‘å•æ¬¡ Minor GC çš„å­˜æ´»å¯¹è±¡æ€»é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ JVM çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="t-"&gt;T &amp;hellip;
&lt;/h2&gt;&lt;p&gt;åœ¨Javaæ³›å‹ä¸­ï¼Œ&lt;code&gt;T...&lt;/code&gt;ï¼ˆå¯å˜å‚æ•°ï¼‰å’Œ &lt;code&gt;T[]&lt;/code&gt;ï¼ˆæ³›å‹æ•°ç»„ï¼‰è™½ç„¶éƒ½è¡¨ç¤ºä¸€ä¸ª&lt;code&gt;T&lt;/code&gt;ç±»å‹çš„æ•°ç»„ï¼Œä½†åœ¨è¯­æ³•ã€ä½¿ç”¨åœºæ™¯å’Œåº•å±‚å¤„ç†ä¸Šå­˜åœ¨å…³é”®åŒºåˆ«ã€‚ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒå·®å¼‚ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„ä¸»è¦ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;code&gt;T...&lt;/code&gt;(å¯å˜å‚æ•°)&lt;/th&gt;
&lt;th&gt;&lt;code&gt;T[]&lt;/code&gt;(æ³›å‹æ•°ç»„)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–¹æ³•å‚æ•°åˆ—è¡¨çš„&lt;strong&gt;è¯­æ³•ç³–&lt;/strong&gt;ï¼Œç®€åŒ–è°ƒç”¨&lt;/td&gt;
&lt;td&gt;æ˜ç¡®çš„&lt;strong&gt;æ•°ç»„ç±»å‹&lt;/strong&gt;å£°æ˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è°ƒç”¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯æ¥å—&lt;strong&gt;ç¦»æ•£å‚æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;method(a, b, c)&lt;/code&gt;ï¼‰æˆ–&lt;strong&gt;æ•°ç»„&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;method(arr)&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;å¿…é¡»ä¼ å…¥ä¸€ä¸ª&lt;strong&gt;å®Œæ•´çš„æ•°ç»„å¯¹è±¡&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;method(arr)&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿…é¡»æ˜¯æ–¹æ³•çš„&lt;strong&gt;æœ€åä¸€ä¸ªå‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯å‡ºç°åœ¨å‚æ•°åˆ—è¡¨çš„&lt;strong&gt;ä»»æ„ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°ç»„åˆ›å»º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±ç¼–è¯‘å™¨&lt;strong&gt;éšå¼ç”Ÿæˆæ•°ç»„&lt;/strong&gt;æ¥åŒ…è£…ç¦»æ•£å‚æ•°&lt;/td&gt;
&lt;td&gt;éœ€è¦ç¨‹åºå‘˜&lt;strong&gt;æ˜¾å¼åˆ›å»ºå¹¶ä¼ å…¥&lt;/strong&gt;æ•°ç»„å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œè°ƒç”¨æ–¹å¼éå¸¸çµæ´»&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹å›ºå®š&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŒºåˆ«è¯¦è§£-1"&gt;ğŸ’¡ æ ¸å¿ƒåŒºåˆ«è¯¦è§£
&lt;/h3&gt;&lt;h4 id="è¯­æ³•ä¸è°ƒç”¨"&gt;è¯­æ³•ä¸è°ƒç”¨
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;T...&lt;/code&gt;æ˜¯Javaæä¾›çš„å¯å˜å‚æ•°è¯­æ³•ç³–ï¼ˆVarargsï¼‰ã€‚å®ƒå…è®¸ä½ åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ å…¥ä»»æ„æ•°é‡ï¼ˆåŒ…æ‹¬0ä¸ªï¼‰çš„&lt;code&gt;T&lt;/code&gt;ç±»å‹å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°å°è£…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚è¿™ä½¿å¾—è°ƒç”¨ä»£ç éå¸¸ç®€æ´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public &amp;lt;T&amp;gt; void processWithVarargs(T... items) {
// ç¼–è¯‘å™¨å°†itemsä½œä¸ºT[]å¤„ç†
for (T item : items) {
System.out.println(item);
}
}
// è°ƒç”¨æ–¹å¼çµæ´»ï¼šå¯ä»¥ä¼ å…¥å¤šä¸ªç¦»æ•£å‚æ•°
processWithVarargs(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;);
// ä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„
String[] arr = {&amp;#34;X&amp;#34;, &amp;#34;Y&amp;#34;, &amp;#34;Z&amp;#34;};
processWithVarargs(arr);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è€Œ &lt;code&gt;T[]&lt;/code&gt;å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æ³›å‹æ•°ç»„å‚æ•°ï¼Œè¦æ±‚ä½ åœ¨è°ƒç”¨æ—¶å¿…é¡»å…ˆæ„é€ å¥½ä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public &amp;lt;T&amp;gt; void processWithArray(T[] items) {
for (T item : items) {
System.out.println(item);
}
}
// è°ƒç”¨æ—¶å¿…é¡»ä¼ å…¥ä¸€ä¸ªæ•°ç»„å¯¹è±¡
String[] arr = {&amp;#34;X&amp;#34;, &amp;#34;Y&amp;#34;, &amp;#34;Z&amp;#34;};
processWithArray(arr);
// processWithArray(&amp;#34;A&amp;#34;, &amp;#34;B&amp;#34;, &amp;#34;C&amp;#34;); // è¿™æ ·å†™ä¼šç¼–è¯‘é”™è¯¯
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æ–¹æ³•ç­¾åä¸é‡è½½"&gt;æ–¹æ³•ç­¾åä¸é‡è½½
&lt;/h4&gt;&lt;p&gt;ç”±äº &lt;code&gt;T...&lt;/code&gt;åœ¨ç¼–è¯‘åæœ¬è´¨ä¸Šä¹Ÿæ˜¯ &lt;code&gt;T[]&lt;/code&gt;ï¼Œæ‰€ä»¥åœ¨æ–¹æ³•é‡è½½æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå®ƒä»¬å¯èƒ½é€ æˆç­¾åå†²çªï¼Œå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4 id="æ•°ç»„çš„åˆ›å»ºä¸é™åˆ¶"&gt;æ•°ç»„çš„åˆ›å»ºä¸é™åˆ¶
&lt;/h4&gt;&lt;p&gt;åœ¨Javaä¸­ï¼Œä½ ä¸èƒ½ç›´æ¥é€šè¿‡ &lt;code&gt;new T[]&lt;/code&gt;çš„æ–¹å¼æ¥å®ä¾‹åŒ–ä¸€ä¸ªæ³›å‹æ•°ç»„ï¼Œè¿™æ˜¯å› ä¸ºæ³›å‹åœ¨è¿è¡Œæ—¶ä¼šå‘ç”Ÿ&lt;strong&gt;ç±»å‹æ“¦é™¤&lt;/strong&gt;ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®š&lt;code&gt;T&lt;/code&gt;çš„å…·ä½“ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;T...&lt;/code&gt;å‚æ•°åœ¨é‡åˆ°ç¦»æ•£å‚æ•°æ—¶ï¼Œç”±ç¼–è¯‘å™¨è´Ÿè´£åˆ›å»ºæ•°ç»„ï¼Œå®ƒèƒ½å¤Ÿå®‰å…¨åœ°å®Œæˆè¿™ä¸ªæ“ä½œã€‚ä½†å¦‚æœä½ æƒ³åœ¨æ–¹æ³•å†…éƒ¨è‡ªå·±åˆ›å»ºä¸€ä¸ª &lt;code&gt;T[]&lt;/code&gt;ï¼Œé€šå¸¸ä¼šé‡åˆ°é—®é¢˜ã€‚ä¸€ä¸ªå¸¸è§çš„å˜é€šæ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;Object&lt;/code&gt;æ•°ç»„å†è¿›è¡Œè½¬æ¢ï¼Œä½†è¿™ä¼šå¸¦æ¥** unchecked cast **è­¦å‘Šã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public &amp;lt;T&amp;gt; T[] createArray(T... elements) {
// ç¼–è¯‘å™¨å¯ä»¥å®‰å…¨åœ°åˆ›å»ºå­˜æ”¾elementsçš„æ•°ç»„
T[] array = elements; // æˆ–è€…ç›´æ¥è¿”å› elements
return array;
}
public &amp;lt;T&amp;gt; T[] createArrayManually(int size) {
// ä»¥ä¸‹å†™æ³•æ˜¯é”™è¯¯çš„ï¼Œæ— æ³•ç¼–è¯‘
// T[] arr = new T[size];
// ä¸€ç§å˜é€šæ–¹æ¡ˆï¼ˆä½†ä¼šæœ‰è­¦å‘Šï¼‰
T[] arr = (T[]) new Object[size];
return arr; // å¯èƒ½äº§ç”Ÿ ClassCastException
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å¦‚ä½•é€‰æ‹©-1"&gt;ğŸ’ å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å½“ä½ å¸Œæœ›æ–¹æ³•èƒ½æ¥å—&lt;strong&gt;ä»»æ„æ•°é‡&lt;/strong&gt;çš„å‚æ•°ï¼Œè®©è°ƒç”¨æ›´åŠ æ–¹ä¾¿ç›´è§‚æ—¶ï¼Œä¼˜å…ˆé€‰æ‹© &lt;strong&gt;&lt;code&gt;T...&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒéå¸¸é€‚åˆç”¨äºå·¥å…·æ–¹æ³•ã€æ—¥å¿—è®°å½•ã€åˆå§‹åŒ–ç­‰åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ çš„æ–¹æ³•æ“ä½œçš„å¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€ä¸ª&lt;strong&gt;å·²çŸ¥çš„æ•°ç»„&lt;/strong&gt;ï¼Œæˆ–è€…å‚æ•°ä½ç½®æœ‰ç‰¹æ®Šè¦æ±‚æ—¶ï¼Œåº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;T[]&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦åœ¨æ–¹æ³•å†…éƒ¨&lt;strong&gt;åˆ›å»ºæ–°çš„æ³›å‹æ•°ç»„&lt;/strong&gt;æ—¶ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒå¤„ç†ç±»å‹å®‰å…¨é—®é¢˜å’Œå¯èƒ½çš„è­¦å‘Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ä¸¤è€…çš„åŒºåˆ«ã€‚å¦‚æœä½ æœ‰å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘å¯ä»¥æä¾›æ›´æ·±å…¥çš„åˆ†æã€‚&lt;/p&gt;
&lt;h2 id="linkedhashset"&gt;LinkedHashSet
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;LinkedHashSet&lt;/code&gt;æ˜¯ Java é›†åˆæ¡†æ¶ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç±»ï¼Œå®ƒåœ¨ä¿ç•™ &lt;code&gt;HashSet&lt;/code&gt;å…ƒç´ å”¯ä¸€æ€§çš„åŸºç¡€ä¸Šï¼Œé¢å¤–ç»´æŠ¤äº†å…ƒç´ çš„æ’å…¥é¡ºåºã€‚ä¸‹é¢è¿™å¼ è¡¨æ ¼å¯ä»¥è®©ä½ å¿«é€ŸæŠ“ä½å®ƒçš„æ ¸å¿ƒç‰¹å¾ï¼Œå¹¶äº†è§£å®ƒä¸å…¶ä»–å¸¸ç”¨ &lt;code&gt;Set&lt;/code&gt;å®ç°çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;LinkedHashSet&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;HashSet&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;TreeSet&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œè¡¨ + &lt;strong&gt;åŒå‘é“¾è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œè¡¨&lt;/td&gt;
&lt;td&gt;çº¢é»‘æ ‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…ƒç´ é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— ä¿è¯&lt;/td&gt;
&lt;td&gt;è‡ªç„¶æ’åºæˆ–è‡ªå®šä¹‰æ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬æ“ä½œæ€§èƒ½ (add, remove, contains)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;O(1)&lt;/td&gt;
&lt;td&gt;O(1)&lt;/td&gt;
&lt;td&gt;O(log n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿­ä»£æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´ä¼˜&lt;/strong&gt; (ä»…éå†é“¾è¡¨)&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒä½ (éœ€è·³è¿‡å“ˆå¸Œè¡¨ç©ºæ¡¶)&lt;/td&gt;
&lt;td&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜ (éœ€ç»´æŠ¤é“¾è¡¨)&lt;/td&gt;
&lt;td&gt;è¾ƒä½&lt;/td&gt;
&lt;td&gt;å–å†³äºæ ‘ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éçº¿ç¨‹å®‰å…¨&lt;/td&gt;
&lt;td&gt;éçº¿ç¨‹å®‰å…¨&lt;/td&gt;
&lt;td&gt;éçº¿ç¨‹å®‰å…¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†"&gt;ğŸ”§ æ ¸å¿ƒåŸç†
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LinkedHashSet&lt;/code&gt;ç»§æ‰¿è‡ª &lt;code&gt;HashSet&lt;/code&gt;ï¼Œå…¶æ ¸å¿ƒé­”åŠ›åœ¨äºåº•å±‚ä½¿ç”¨äº† &lt;code&gt;LinkedHashMap&lt;/code&gt;æ¥å­˜å‚¨å…ƒç´  ã€‚ä½ å¯ä»¥è¿™æ ·ç†è§£å®ƒçš„å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œè¡¨è´Ÿè´£æ•ˆç‡&lt;/strong&gt;ï¼šå’Œ &lt;code&gt;HashSet&lt;/code&gt;ä¸€æ ·ï¼Œå®ƒé€šè¿‡å“ˆå¸Œç®—æ³•å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œè¿™ä½¿å¾— &lt;code&gt;add&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt;, &lt;code&gt;contains&lt;/code&gt;ç­‰æ“ä½œèƒ½åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒå‘é“¾è¡¨è´Ÿè´£é¡ºåº&lt;/strong&gt;ï¼šä¸ºäº†ç»´æŠ¤é¡ºåºï¼Œæ¯ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼ˆåœ¨ &lt;code&gt;LinkedHashMap&lt;/code&gt;çš„ &lt;code&gt;Entry&lt;/code&gt;ä¸­ï¼‰éƒ½é¢å¤–ä¿å­˜äº†ä¸¤ä¸ªå¼•ç”¨ï¼š&lt;code&gt;before&lt;/code&gt;å’Œ &lt;code&gt;after&lt;/code&gt;ã€‚è¿™äº›å¼•ç”¨å°†æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚æ¯å½“æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œé™¤äº†å°†å…¶æ”¾å…¥å“ˆå¸Œæ¡¶ï¼Œè¿˜ä¼šå°†å…¶&lt;strong&gt;é“¾æ¥åˆ°é“¾è¡¨çš„å°¾éƒ¨&lt;/strong&gt;ï¼›åˆ é™¤å…ƒç´ æ—¶ï¼Œä¹Ÿä¼šä»é“¾è¡¨ä¸­è§£é™¤é“¾æ¥ã€‚å› æ­¤ï¼Œè¿­ä»£å™¨éå†æ—¶ï¼Œåªéœ€é¡ºç€è¿™æ¡é“¾è¡¨å³å¯ï¼Œè¿™å°±ä¿è¯äº†é¡ºåºä¸æ’å…¥é¡ºåºä¸€è‡´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•ä½¿ç”¨"&gt;ğŸ› ï¸ å¦‚ä½•ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LinkedHashSet&lt;/code&gt;çš„ç”¨æ³•éå¸¸ç®€å•ï¼Œä¸ &lt;code&gt;HashSet&lt;/code&gt;åŸºæœ¬ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. åˆ›å»ºå®ä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ä¸åŒçš„æ„é€ æ–¹æ³• ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// 1. é»˜è®¤æ„é€ ï¼šåˆå§‹å®¹é‡16ï¼Œè´Ÿè½½å› å­0.75
LinkedHashSet&amp;lt;String&amp;gt; set1 = new LinkedHashSet&amp;lt;&amp;gt;();
// 2. æŒ‡å®šåˆå§‹å®¹é‡ï¼ˆé¿å…é¢‘ç¹æ‰©å®¹ï¼‰
LinkedHashSet&amp;lt;String&amp;gt; set2 = new LinkedHashSet&amp;lt;&amp;gt;(20);
// 3. æŒ‡å®šåˆå§‹å®¹é‡å’Œè´Ÿè½½å› å­ï¼ˆç”¨äºæ€§èƒ½è°ƒä¼˜ï¼‰
LinkedHashSet&amp;lt;String&amp;gt; set3 = new LinkedHashSet&amp;lt;&amp;gt;(20, 0.75f);
// 4. ä»å…¶ä»–é›†åˆåˆ›å»ºï¼Œå¹¶ä¿ç•™è¯¥é›†åˆè¿­ä»£å™¨çš„é¡ºåº
List&amp;lt;String&amp;gt; list = Arrays.asList(&amp;#34;Apple&amp;#34;, &amp;#34;Banana&amp;#34;, &amp;#34;Apple&amp;#34;);
LinkedHashSet&amp;lt;String&amp;gt; set4 = new LinkedHashSet&amp;lt;&amp;gt;(list); // ç»“æœä¸º [Apple, Banana]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. åŸºæœ¬æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨æ–¹æ³•åŒ…æ‹¬ &lt;code&gt;add&lt;/code&gt;, &lt;code&gt;remove&lt;/code&gt;, &lt;code&gt;contains&lt;/code&gt;, &lt;code&gt;size&lt;/code&gt;, &lt;code&gt;isEmpty&lt;/code&gt;ç­‰ï¼Œä¸å¤§å¤šæ•°é›†åˆç±»æ— å¼‚ ã€‚ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼Œå½“å°è¯•æ·»åŠ ä¸€ä¸ªå·²å­˜åœ¨çš„å…ƒç´ æ—¶ï¼Œæ“ä½œä¼šå¤±è´¥ï¼Œä¸”&lt;strong&gt;ä¸ä¼šæ”¹å˜åŸæœ‰çš„é¡ºåº&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. éå†å…ƒç´ &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºæœ‰åºï¼Œéå†ç»“æœæ˜¯å¯ä»¥é¢„æµ‹çš„ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LinkedHashSet&amp;lt;String&amp;gt; set = new LinkedHashSet&amp;lt;&amp;gt;();
set.add(&amp;#34;Java&amp;#34;);
set.add(&amp;#34;Python&amp;#34;);
set.add(&amp;#34;C++&amp;#34;);
// ä½¿ç”¨å¢å¼ºforå¾ªç¯ï¼ˆæ¨èï¼‰
for (String lang : set) {
System.out.println(lang); // è¾“å‡ºé¡ºåºæ’ä¸ºï¼šJava, Python, C++
}
// ä½¿ç”¨è¿­ä»£å™¨
Iterator&amp;lt;String&amp;gt; it = set.iterator();
while (it.hasNext()) {
System.out.println(it.next());
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¿ç•™é¡ºåºçš„å»é‡&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…¸å‹çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œè®°å½•ç”¨æˆ·çš„æµè§ˆå†å²ï¼Œéœ€è¦å»é‡ä¸”æŒ‰æµè§ˆæ—¶é—´é¡ºåºå±•ç¤º ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ç³»ç»Ÿï¼ˆLRU CacheåŸºç¡€ï¼‰&lt;/strong&gt;ï¼šè™½ç„¶ &lt;code&gt;LinkedHashSet&lt;/code&gt;æœ¬èº«ä¸ç›´æ¥å®ç° LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç­–ç•¥ï¼Œä½†å…¶åº•å±‚å®ç° &lt;code&gt;LinkedHashMap&lt;/code&gt;å¯ä»¥é€šè¿‡é‡å†™ &lt;code&gt;removeEldestEntry&lt;/code&gt;æ–¹æ³•è½»æ¾å®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„ LRU ç¼“å­˜ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—æˆ–äº‹ä»¶å¤„ç†&lt;/strong&gt;ï¼šéœ€è¦æŒ‰æ—¶é—´é¡ºåºå¤„ç†ä¸€ç³»åˆ—æ—¥å¿—æˆ–äº‹ä»¶ï¼ŒåŒæ—¶é¿å…é‡å¤å¤„ç† ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½æƒè¡¡&lt;/strong&gt;ï¼šè™½ç„¶åŸºæœ¬æ“ä½œæ˜¯ O(1)ï¼Œä½†ç”±äºéœ€è¦ç»´æŠ¤é“¾è¡¨ï¼Œå¸¸æ•°æ—¶é—´ä¼šæ¯” &lt;code&gt;HashSet&lt;/code&gt;ç¨å¤§ä¸€äº›ã€‚åœ¨ä¸éœ€è¦é¡ºåºçš„åœºæ™¯ä¸‹ï¼Œ&lt;code&gt;HashSet&lt;/code&gt;æ˜¯æ›´é«˜æ•ˆçš„é€‰æ‹© ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éçº¿ç¨‹å®‰å…¨&lt;/strong&gt;ï¼š&lt;code&gt;LinkedHashSet&lt;/code&gt;ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œåº”ä½¿ç”¨ &lt;code&gt;Collections.synchronizedSet&lt;/code&gt;æ–¹æ³•è¿›è¡ŒåŒ…è£… ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Set&amp;lt;String&amp;gt; syncSet = Collections.synchronizedSet(new LinkedHashSet&amp;lt;&amp;gt;());
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Fail-Fast è¿­ä»£å™¨&lt;/strong&gt;ï¼šå®ƒçš„è¿­ä»£å™¨æ˜¯â€œå¿«é€Ÿå¤±è´¥â€çš„ã€‚å¦‚æœåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œé›†åˆè¢«é™¤äº†è¿­ä»£å™¨è‡ªèº« &lt;code&gt;remove&lt;/code&gt;æ–¹æ³•ä¹‹å¤–çš„ä»»ä½•æ–¹å¼ä¿®æ”¹ï¼Œä¼šç«‹å³æŠ›å‡º &lt;code&gt;ConcurrentModificationException&lt;/code&gt;å¼‚å¸¸ã€‚è¿™ä¸»è¦ç”¨äºæ£€æµ‹å¹¶å‘ä¿®æ”¹çš„ bug ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ &lt;code&gt;LinkedHashSet&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹å®ƒåœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„åº”ç”¨æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="spi-æœºåˆ¶"&gt;SPI æœºåˆ¶
&lt;/h2&gt;&lt;p&gt;Java çš„ SPIï¼ˆService Provider Interfaceï¼‰æœºåˆ¶æ˜¯ä¸€ç§å†…ç½®çš„æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€ä¸ºæŸä¸ªæ¥å£å¯»æ‰¾å®ç°ç±»ï¼Œä»è€Œå®ç°è§£è€¦å’Œå¯æ‰©å±•çš„æ¶æ„ ã€‚è¿™ç§æœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯&lt;strong&gt;å°†æ¥å£çš„å®šä¹‰ä¸å…·ä½“å®ç°åˆ†ç¦»&lt;/strong&gt;ï¼Œå°†è£…é…çš„æ§åˆ¶æƒäº¤ç”±ç¨‹åºå¤–éƒ¨ï¼Œç‰¹åˆ«é€‚ç”¨äºæ¨¡å—åŒ–è®¾è®¡å’Œæ¡†æ¶æ‰©å±• ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿå¯¹æ¯” SPI æ ¸å¿ƒè¦ç´ çš„è¡¨æ ¼ï¼Œå¸®åŠ©ä½ ç›´è§‚ç†è§£å…¶ç»„æˆï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒè§’è‰²&lt;/th&gt;
&lt;th&gt;èŒè´£è¯´æ˜&lt;/th&gt;
&lt;th&gt;ä¸¾ä¾‹è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡æ¥å£ (Service Interface)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰æ ‡å‡†çš„æœåŠ¡è§„èŒƒï¼Œç”±æ¡†æ¶æˆ–æ ¸å¿ƒåº“åˆ¶å®šã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;java.sql.Driver&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡æä¾›è€… (Service Provider)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°æœåŠ¡æ¥å£çš„å…·ä½“ç±»ï¼Œé€šå¸¸ç”±ç¬¬ä¸‰æ–¹æä¾›ã€‚&lt;/td&gt;
&lt;td&gt;MySQL çš„ &lt;code&gt;com.mysql.cj.jdbc.Driver&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é…ç½®æ–‡ä»¶ (Configuration File)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨ &lt;code&gt;META-INF/services/&lt;/code&gt;ç›®å½•ä¸‹ï¼Œä»¥æ¥å£å…¨é™å®šåå‘½åçš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºå®ç°ç±»çš„å…¨é™å®šåã€‚&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶ &lt;code&gt;java.sql.Driver&lt;/code&gt;ä¸­åŒ…å« &lt;code&gt;com.mysql.cj.jdbc.Driver&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡åŠ è½½å™¨ (ServiceLoader)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;JDK æ ¸å¿ƒç±»ï¼Œç”¨äºåŠ¨æ€åŠ è½½ã€å®ä¾‹åŒ–é…ç½®æ–‡ä»¶ä¸­å£°æ˜çš„æ‰€æœ‰å®ç°ç±»ã€‚&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ServiceLoader&amp;lt;Driver&amp;gt; loader = ServiceLoader.load(Driver.class);&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸å®ç°æ­¥éª¤"&gt;ğŸ”§ å·¥ä½œæœºåˆ¶ä¸å®ç°æ­¥éª¤
&lt;/h3&gt;&lt;p&gt;è¦ä½¿ç”¨ Java åŸç”Ÿçš„ SPI æœºåˆ¶ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰æœåŠ¡æ¥å£&lt;/strong&gt;ï¼šé¦–å…ˆéœ€è¦åˆ¶å®šä¸€ä¸ªæ ‡å‡†çš„æ¥å£ã€‚ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªæ”¯ä»˜æ¥å£ &lt;code&gt;Payment&lt;/code&gt;ï¼Œå…¶ä¸­åŒ…å« &lt;code&gt;pay&lt;/code&gt;æ–¹æ³• ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æä¾›å…·ä½“å®ç°&lt;/strong&gt;ï¼šç”±ä¸åŒçš„æœåŠ¡æä¾›è€…å®ç°è¯¥æ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åˆ†åˆ«åˆ›å»º &lt;code&gt;AlipayPayment&lt;/code&gt;å’Œ &lt;code&gt;WeChatPayPayment&lt;/code&gt;ç±»æ¥å®ç° &lt;code&gt;Payment&lt;/code&gt;æ¥å£ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºé…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼šè¿™æ˜¯å®ç° SPI çš„å…³é”®ä¸€æ­¥ã€‚åœ¨&lt;strong&gt;å®ç°æ–¹çš„ JAR åŒ…&lt;/strong&gt;ä¸­ï¼Œå¿…é¡»åœ¨ &lt;code&gt;META-INF/services/&lt;/code&gt;ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œ&lt;strong&gt;æ–‡ä»¶åå¿…é¡»æ˜¯æ¥å£çš„å…¨é™å®šå&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;com.example.Payment&lt;/code&gt;ï¼‰ï¼Œæ–‡ä»¶å†…å®¹åˆ™æ˜¯å®ç°ç±»çš„å…¨é™å®šåï¼Œæ¯è¡Œä¸€ä¸ªã€‚å¦‚æœæœ‰å¤šä¸ªå®ç°ï¼Œåˆ™åˆ†è¡Œå¡«å†™ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ è½½ä¸æœåŠ¡å‘ç°&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé€šè¿‡ &lt;code&gt;java.util.ServiceLoader&lt;/code&gt;ç±»æ¥åŠ è½½è¿™äº›æœåŠ¡å®ç°ã€‚å®ƒä¼šæ‰«æ classpath ä¸‹æ‰€æœ‰ JAR åŒ…ä¸­çš„ &lt;code&gt;META-INF/services&lt;/code&gt;ç›®å½•ï¼Œæ‰¾åˆ°å¯¹åº”çš„é…ç½®æ–‡ä»¶å¹¶åŠ è½½å…¶ä¸­å£°æ˜çš„å®ç°ç±» ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†serviceloader-ä¸ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨"&gt;ğŸ’¡ æ ¸å¿ƒåŸç†ï¼šServiceLoader ä¸ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ServiceLoader&lt;/code&gt;æ˜¯ SPI æœºåˆ¶çš„æ ¸å¿ƒç±»ï¼Œå…¶å·¥ä½œæµç¨‹ä½“ç°äº†&lt;strong&gt;æ‡’åŠ è½½&lt;/strong&gt;çš„ç‰¹ç‚¹ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è°ƒç”¨ &lt;code&gt;ServiceLoader.load(service)&lt;/code&gt;æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³å®ä¾‹åŒ–æ‰€æœ‰å®ç°ç±»ï¼Œè€Œåªæ˜¯åˆå§‹åŒ–ä¸€ä¸ªæŸ¥æ‰¾è¿­ä»£å™¨ã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰å½“ä½¿ç”¨ &lt;code&gt;iterator()&lt;/code&gt;è¿›è¡Œéå†æ—¶ï¼Œæ‰ä¼šçœŸæ­£è§£æé…ç½®æ–‡ä»¶ï¼Œå¹¶é€šè¿‡åå°„æœºåˆ¶å®ä¾‹åŒ–å®ç°ç±»ã€‚&lt;/li&gt;
&lt;li&gt;å®ä¾‹åŒ–åçš„å¯¹è±¡ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡éå†æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å– ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®ç‚¹ï¼š&lt;code&gt;ServiceLoader&lt;/code&gt;æœ¬èº«ç”± &lt;strong&gt;Bootstrap ClassLoader&lt;/strong&gt;ï¼ˆå¯åŠ¨ç±»åŠ è½½å™¨ï¼‰åŠ è½½ï¼Œè€Œç”¨æˆ·æä¾›çš„å®ç°ç±»é€šå¸¸ä½äº classpath ä¸‹ï¼Œç”± &lt;strong&gt;AppClassLoader&lt;/strong&gt;ï¼ˆåº”ç”¨ç±»åŠ è½½å™¨ï¼‰åŠ è½½ã€‚ä¸ºäº†æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œä½¿å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ç±»èƒ½å¤Ÿâ€œçœ‹è§â€åº”ç”¨ç±»åŠ è½½å™¨åŠ è½½çš„ç±»ï¼ŒJDK ä½¿ç”¨äº†&lt;strong&gt;çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ (Thread Context ClassLoader)&lt;/strong&gt;ã€‚&lt;code&gt;ServiceLoader&lt;/code&gt;åœ¨ &lt;code&gt;load()&lt;/code&gt;æ–¹æ³•ä¸­ä¼šè·å–å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆé»˜è®¤ä¸º &lt;code&gt;AppClassLoader&lt;/code&gt;ï¼‰æ¥åŠ è½½å®ç°ç±»ï¼Œä»è€Œè§£å†³äº†è¿™ä¸ªç±»åŠ è½½å™¨éš”ç¦»é—®é¢˜ ã€‚&lt;/p&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-1"&gt;ğŸŒ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;SPI æœºåˆ¶åœ¨ Java ç”Ÿæ€ä¸­è¢«å¹¿æ³›åº”ç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ç»å…¸ä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;JDBC æ•°æ®åº“é©±åŠ¨&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…¸å‹çš„ä¾‹å­ã€‚åœ¨ JDBC 4.0 ä¹‹åï¼Œæˆ‘ä»¬ä¸å†éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ &lt;code&gt;Class.forName(&amp;quot;com.mysql.jdbc.Driver&amp;quot;)&lt;/code&gt;æ¥æ³¨å†Œé©±åŠ¨ã€‚å› ä¸º &lt;code&gt;DriverManager&lt;/code&gt;åœ¨åˆå§‹åŒ–æ—¶ä¼šé€šè¿‡ SPI æœºåˆ¶è‡ªåŠ¨æ‰«æå¹¶åŠ è½½æ‰€æœ‰åœ¨ &lt;code&gt;META-INF/services/java.sql.Driver&lt;/code&gt;æ–‡ä»¶ä¸­æ³¨å†Œçš„æ•°æ®åº“é©±åŠ¨å®ç° ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—é—¨é¢æ¡†æ¶&lt;/strong&gt;ï¼šå¦‚ SLF4Jï¼Œå®ƒä½œä¸ºæ—¥å¿—é—¨é¢ï¼Œé€šè¿‡ SPI æœºåˆ¶åœ¨è¿è¡Œæ—¶ç»‘å®šå…·ä½“çš„æ—¥å¿—å®ç°ï¼ˆå¦‚ Logbackã€Log4j2ï¼‰ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥çµæ´»åˆ‡æ¢åº•å±‚æ—¥å¿—åº“ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Spring Framework&lt;/strong&gt;ï¼šSpring åœ¨å…¶å¾ˆå¤šæ¨¡å—ä¸­ä½¿ç”¨äº† SPI æ€æƒ³ã€‚ç‰¹åˆ«æ˜¯ Spring Boot çš„è‡ªåŠ¨é…ç½®ï¼Œå®ƒå€Ÿé‰´å¹¶å¢å¼ºäº† SPIï¼Œä½¿ç”¨ &lt;code&gt;META-INF/spring.factories&lt;/code&gt;æ–‡ä»¶æ¥å£°æ˜å¤§é‡è‡ªåŠ¨é…ç½®ç±»ï¼Œä»è€Œå®ç°äº†â€œçº¦å®šä¼˜äºé…ç½®â€çš„ç†å¿µ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dubbo æ¡†æ¶&lt;/strong&gt;ï¼šDubbo å¤§é‡ä½¿ç”¨ SPI ä½œä¸ºå…¶æ‰©å±•ç‚¹æœºåˆ¶ï¼Œå¹¶å¯¹ JDK åŸç”Ÿçš„ SPI è¿›è¡Œäº†å¢å¼ºï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ã€è‡ªé€‚åº”æ‰©å±•ç­‰æ›´é«˜çº§çš„åŠŸèƒ½ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¼˜ç¼ºç‚¹åˆ†æ"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ
&lt;/h3&gt;&lt;p&gt;ä»»ä½•æŠ€æœ¯éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ï¼Œäº†è§£ SPI çš„ä¼˜ç¼ºç‚¹æœ‰åŠ©äºä½ åšå‡ºæ­£ç¡®çš„è®¾è®¡å†³ç­–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§£è€¦&lt;/strong&gt;ï¼šå®ç°äº†æ¥å£å’Œå…·ä½“å®ç°çš„å®Œå…¨åˆ†ç¦»ï¼Œé™ä½äº†æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œç¬¦åˆé¢å‘æ¥å£ç¼–ç¨‹çš„åŸåˆ™ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯æ‰©å±•æ€§&lt;/strong&gt;ï¼šæ·»åŠ æ–°çš„å®ç°æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ï¼Œåªéœ€å¼•å…¥æ–°çš„ JAR åŒ…å³å¯ï¼Œéå¸¸æ–¹ä¾¿è¿›è¡ŒåŠŸèƒ½æ‰©å±•å’Œæ’ä»¶åŒ–å¼€å‘ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¨é‡åŠ è½½&lt;/strong&gt;ï¼š&lt;code&gt;ServiceLoader&lt;/code&gt;ä¼šå®ä¾‹åŒ–é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„å®ç°ç±»ï¼Œå³ä½¿ä½ åªéœ€è¦å…¶ä¸­ä¸€ä¸ªï¼Œè¿™å¯èƒ½é€ æˆèµ„æºæµªè´¹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆç‡ä¸é«˜&lt;/strong&gt;ï¼šè·å–æŸä¸ªå…·ä½“å®ç°çš„æ–¹å¼ä¸å¤Ÿçµæ´»ï¼Œåªèƒ½é€šè¿‡è¿­ä»£å™¨éå†ï¼Œæ— æ³•æ ¹æ®å‚æ•°æŒ‰éœ€è·å– ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹å®‰å…¨é—®é¢˜&lt;/strong&gt;ï¼š&lt;code&gt;ServiceLoader&lt;/code&gt;ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦è‡ªè¡Œå¤„ç†åŒæ­¥é—®é¢˜ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¥å£®æ€§ä¸è¶³&lt;/strong&gt;ï¼šå¦‚æœæŸä¸ªå®ç°ç±»åŠ è½½æˆ–å®ä¾‹åŒ–å¤±è´¥ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºç¼ºå°‘ä¾èµ–ï¼‰ï¼Œä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸ä¼šä¼˜é›…åœ°è·³è¿‡ï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ªæœåŠ¡åŠ è½½ä¸­æ–­ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ Java çš„ SPI æœºåˆ¶ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“åº”ç”¨åœºæ™¯æˆ–å®ç°ç»†èŠ‚æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="åŒäº²å§”æ´¾"&gt;åŒäº²å§”æ´¾
&lt;/h2&gt;&lt;p&gt;SPIï¼ˆService Provider Interfaceï¼‰æœºåˆ¶æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œæ˜¯ä¸ºäº†è§£å†³Javaç±»åŠ è½½ä½“ç³»ä¸­ä¸€ä¸ªç‰¹å®šçš„å›°å¢ƒï¼š&lt;strong&gt;å½“é«˜å±‚æ ¸å¿ƒåº“éœ€è¦è°ƒç”¨ä½å±‚ç”¨æˆ·å®ç°çš„ä»£ç æ—¶ï¼Œä¸¥æ ¼çš„åŒäº²å§”æ´¾æ¨¡å‹ä¼šå½¢æˆåŠ è½½å£å’&lt;/strong&gt;ã€‚è¿™æœ¬è´¨ä¸Šæ˜¯ä¸€æ¬¡é¢å‘ç°å®çš„çµæ´»å˜é€šã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¯¹æ¯”è¿™ä¸¤ç§æœºåˆ¶çš„åŠ è½½é€»è¾‘ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœºåˆ¶&lt;/th&gt;
&lt;th&gt;åŠ è½½å‘èµ·è€…&lt;/th&gt;
&lt;th&gt;ç±»åŠ è½½å™¨æµè½¬æ–¹å‘&lt;/th&gt;
&lt;th&gt;å…¸å‹åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡†åŒäº²å§”æ´¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­ç±»åŠ è½½å™¨ï¼ˆå¦‚åº”ç”¨ç±»åŠ è½½å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªä¸‹è€Œä¸Š&lt;/strong&gt;ï¼Œå†è‡ªä¸Šè€Œä¸‹ï¼šå­ â†’ çˆ¶ â†’ &amp;hellip; â†’ å¯åŠ¨åŠ è½½å™¨ â†’ &amp;hellip; â†’ å­&lt;/td&gt;
&lt;td&gt;åŠ è½½æ™®é€šåº”ç”¨ç¨‹åºç±»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SPIæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çˆ¶ç±»åŠ è½½å™¨ï¼ˆå¦‚å¯åŠ¨ç±»åŠ è½½å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªä¸Šè€Œä¸‹&lt;/strong&gt;ï¼šçˆ¶åŠ è½½å™¨ç›´æ¥ä½¿ç”¨å­åŠ è½½å™¨ï¼ˆçº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼‰åŠ è½½&lt;/td&gt;
&lt;td&gt;åŠ è½½JDBCé©±åŠ¨ç­‰SPIå®ç°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†æ‹†è§£è¿™èƒŒåçš„â€œä¸ºä»€ä¹ˆâ€ã€‚&lt;/p&gt;
&lt;h3 id="-åŒäº²å§”æ´¾çš„å±€é™ä¸spiçš„éœ€æ±‚"&gt;ğŸ” åŒäº²å§”æ´¾çš„å±€é™ä¸SPIçš„éœ€æ±‚
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬æ¥ç†è§£é—®é¢˜çš„æ ¹æºã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒäº²å§”æ´¾æ¨¡å‹çš„æ ¸å¿ƒåŸåˆ™ä¸ç¼ºé™·&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŒäº²å§”æ´¾æ¨¡å‹è¦æ±‚ï¼Œå½“ä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶ï¼Œå®ƒé¦–å…ˆä¼šå°†è¿™ä¸ªè¯·æ±‚&lt;strong&gt;å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨&lt;/strong&gt;å»å®Œæˆã€‚åªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±åŠ è½½ã€‚è¿™ä¿è¯äº†åƒ &lt;code&gt;java.lang.*&lt;/code&gt;è¿™æ ·çš„æ ¸å¿ƒç±»åº“åªä¼šè¢«å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œä»è€Œé˜²æ­¢æ ¸å¿ƒAPIè¢«ç¯¡æ”¹ï¼Œç¡®ä¿äº†å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å…¶æ ¸å¿ƒç¼ºé™·æ˜¯&lt;strong&gt;åŠ è½½è·¯å¾„çš„å•å‘æ€§&lt;/strong&gt;ï¼šçˆ¶åŠ è½½å™¨åŠ è½½çš„ç±»æ— æ³•ç›´æ¥è®¿é—®æˆ–ä½¿ç”¨å­åŠ è½½å™¨åŠ è½½çš„ç±»ã€‚å› ä¸ºæ ¹æ®ç±»åŠ è½½å™¨çš„&lt;strong&gt;å¯è§æ€§åŸåˆ™&lt;/strong&gt;ï¼Œçˆ¶åŠ è½½å™¨çœ‹ä¸åˆ°å­åŠ è½½å™¨åŠ è½½çš„ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SPIæœºåˆ¶çš„å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»¥æœ€ç»å…¸çš„JDBCä¸ºä¾‹ï¼Œå…¶æ ¸å¿ƒæ¥å£ï¼ˆå¦‚ &lt;code&gt;java.sql.Driver&lt;/code&gt;ï¼‰å®šä¹‰åœ¨Javaæ ‡å‡†åº“ &lt;code&gt;rt.jar&lt;/code&gt;ä¸­ï¼Œç”±&lt;strong&gt;å¯åŠ¨ç±»åŠ è½½å™¨&lt;/strong&gt;åŠ è½½ã€‚è€Œå„æ•°æ®åº“å‚å•†çš„å®ç°ï¼ˆå¦‚MySQLçš„ &lt;code&gt;com.mysql.cj.jdbc.Driver&lt;/code&gt;ï¼‰åˆ™ä½äºåº”ç”¨ç¨‹åºçš„classpathä¸‹ï¼Œåº”ç”±&lt;strong&gt;åº”ç”¨ç±»åŠ è½½å™¨&lt;/strong&gt;åŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;é—®é¢˜æ¥äº†ï¼šåœ¨ &lt;code&gt;DriverManager&lt;/code&gt;ï¼ˆç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ï¼‰åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦å»åŠ è½½å¹¶å®ä¾‹åŒ–è¿™äº›ç¬¬ä¸‰æ–¹é©±åŠ¨å®ç°ã€‚æŒ‰ç…§ä¸¥æ ¼çš„åŒäº²å§”æ´¾ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨ä¸å¯èƒ½â€œçœ‹è§â€æˆ–åŠ è½½åˆ°ä½äºclasspathä¸‹çš„å®ç°ç±»ï¼Œè¿™å°±å¯¼è‡´äº†&lt;strong&gt;æ¥å£æ‰¾ä¸åˆ°å®ç°çš„å›°å¢ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-spiçš„è§£å†³æ–¹æ¡ˆçº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨"&gt;ğŸ’¡ SPIçš„è§£å†³æ–¹æ¡ˆï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è§£å†³ä¸Šè¿°çŸ›ç›¾ï¼ŒSPIæœºåˆ¶å¼•å…¥äº†&lt;strong&gt;çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆThread Context ClassLoaderï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼è®¾ç½®ï¼Œå®ƒä¼šä»çˆ¶çº¿ç¨‹ç»§æ‰¿ï¼Œé€šå¸¸åœ¨åº”ç”¨ç¨‹åºä¸­é»˜è®¤å°±æ˜¯&lt;strong&gt;åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SPIå¦‚ä½•åˆ©ç”¨å®ƒï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…³é”®ä»£ç åœ¨ &lt;code&gt;java.util.ServiceLoader.load(Class)&lt;/code&gt;æ–¹æ³•ä¸­ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public static &amp;lt;S&amp;gt; ServiceLoader&amp;lt;S&amp;gt; load(Class&amp;lt;S&amp;gt; service) {
// è·å–å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Œé€šå¸¸æ˜¯AppClassLoader
ClassLoader cl = Thread.currentThread().getContextClassLoader();
return ServiceLoader.load(service, cl);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ &lt;code&gt;DriverManager&lt;/code&gt;ä½¿ç”¨ &lt;code&gt;ServiceLoader&lt;/code&gt;æ¥åŠ è½½é©±åŠ¨æ—¶ï¼Œ&lt;code&gt;ServiceLoader&lt;/code&gt;å¹¶æ²¡æœ‰å°è¯•è®©å¯åŠ¨ç±»åŠ è½½å™¨å»åŠ è½½é©±åŠ¨å®ç°ç±»ï¼ˆè¿™æ³¨å®šä¼šå¤±è´¥ï¼‰ï¼Œè€Œæ˜¯&lt;strong&gt;å·§å¦™åœ°åˆ‡æ¢äº†ç±»åŠ è½½å™¨&lt;/strong&gt;ã€‚å®ƒè·å–å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆå³åº”ç”¨ç±»åŠ è½½å™¨ï¼‰ï¼Œç„¶åç”¨è¿™ä¸ªâ€œå­â€åŠ è½½å™¨å»åŠ è½½ &lt;code&gt;META-INF/services&lt;/code&gt;é…ç½®æ–‡ä»¶ä¸­å£°æ˜çš„å®ç°ç±»ã€‚è¿™æ ·å°±æˆåŠŸåœ°ç»•è¿‡äº†åŒäº²å§”æ´¾çš„å±‚çº§é™åˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ç†è§£è¿™ç§ç ´å"&gt;âš–ï¸ å¦‚ä½•ç†è§£è¿™ç§â€œç ´åâ€
&lt;/h3&gt;&lt;p&gt;è¿™ç§è®¾è®¡å¸¸è¢«æè¿°ä¸ºâ€œæ‰“ç ´â€æˆ–â€œç ´åâ€äº†åŒäº²å§”æ´¾æ¨¡å‹ï¼Œæ›´å‡†ç¡®çš„è¯´æ˜¯ &lt;strong&gt;â€œç»•è¿‡â€æˆ–â€œå˜é€šâ€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ƒæ‰“ç ´äº†ä¸¥æ ¼çš„å±‚çº§å§”æ‰˜é¡ºåº&lt;/strong&gt;ï¼šå®ƒå®ç°äº†&lt;strong&gt;çˆ¶åŠ è½½å™¨ä¸»åŠ¨å§”æ‰˜å­åŠ è½½å™¨å»åŠ è½½ç±»&lt;/strong&gt;çš„é€»è¾‘ï¼Œè¿™ä¸è‡ªä¸‹è€Œä¸Šçš„æ ‡å‡†åŒäº²å§”æ´¾æ–¹å‘ç›¸åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ƒæ˜¯å¯¹æ¨¡å‹çš„å¿…è¦è¡¥å……&lt;/strong&gt;ï¼šè¿™ç§â€œç ´åâ€å¹¶éå¦å®šåŒäº²å§”æ´¾çš„ä»·å€¼ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³å…¶åœ¨ç‰¹å®šåœºæ™¯ï¼ˆåŸºç¡€åº“éœ€è¦å›è°ƒç”¨æˆ·ä»£ç ï¼‰ä¸‹çš„ä¸é€‚ç”¨æ€§ï¼Œæ˜¯ä¸€ç§åŠ¡å®çš„ä¼˜åŒ–ã€‚Javaå›¢é˜Ÿé€šè¿‡å¼•å…¥çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨è¿™ä¸€çµæ´»çš„è®¾è®¡ï¼Œåœ¨ä¿æŒç»å¤§éƒ¨åˆ†åœºæ™¯ä¸‹åŒäº²å§”æ´¾ä¼˜åŠ¿çš„åŒæ—¶ï¼Œä¸ºæ‰©å±•æ€§å¼€è¾Ÿäº†é“è·¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒSPIæœºåˆ¶æ‰“ç ´åŒäº²å§”æ´¾ï¼Œæ˜¯å› ä¸º&lt;strong&gt;ä¸æ‰“ç ´å°±æ— æ³•å·¥ä½œ&lt;/strong&gt;ã€‚åŒäº²å§”æ´¾æ¨¡å‹å›ºæœ‰çš„â€œçˆ¶çº§çœ‹ä¸åˆ°å­çº§â€çš„å¯è§æ€§åŸåˆ™ï¼Œä¸SPIâ€œé«˜å±‚æ¥å£éœ€è°ƒç”¨ä½å±‚å®ç°â€çš„å¤©ç„¶éœ€æ±‚äº§ç”Ÿäº†ä¸å¯è°ƒå’Œçš„çŸ›ç›¾ã€‚é€šè¿‡å¼•å…¥çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ŒSPIæœºåˆ¶å®ç°äº†ä¸€æ¬¡å·§å¦™çš„â€œå‘ä¸‹å§”æ´¾â€ï¼Œç¡®ä¿äº†Javaç”Ÿæ€ä¸­é‡è¦æ‰©å±•æœºåˆ¶çš„é¡ºåˆ©è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»ç†è§£è¿™ä¸ªé—®é¢˜ï¼å¦‚æœä½ å¯¹ç±»åŠ è½½å™¨çš„å…¶ä»–ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¾‹å­"&gt;ä¾‹å­
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Java SPI å¤šå®ç°å®é™…ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•å®šä¹‰æ¥å£ã€æä¾›å¤šä¸ªå®ç°ç±»ï¼Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æ³¨å†Œå®ƒä»¬ã€‚&lt;/p&gt;
&lt;h3 id="1-å®šä¹‰æœåŠ¡æ¥å£"&gt;1. å®šä¹‰æœåŠ¡æ¥å£
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„æ”¯ä»˜æ¥å£ &lt;code&gt;PaymentService&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// PaymentService.java - æœåŠ¡æ¥å£
public interface PaymentService {
void processPayment(double amount);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="2-æä¾›å¤šä¸ªå®ç°ç±»"&gt;2. æä¾›å¤šä¸ªå®ç°ç±»
&lt;/h3&gt;&lt;p&gt;ä¸ºæ”¯ä»˜æ¥å£åˆ›å»ºä¸¤ä¸ªä¸åŒçš„å®ç°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ”¯ä»˜å®å®ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// AlipayPaymentService.java - æ”¯ä»˜å®å®ç°
public class AlipayPaymentService implements PaymentService {
@Override
public void processPayment(double amount) {
System.out.println(&amp;#34;ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜: &amp;#34; + amount + &amp;#34;å…ƒ&amp;#34;);
// å…·ä½“çš„æ”¯ä»˜å®æ”¯ä»˜é€»è¾‘
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¾®ä¿¡æ”¯ä»˜å®ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// WechatPaymentService.java - å¾®ä¿¡æ”¯ä»˜å®ç°
public class WechatPaymentService implements PaymentService {
@Override
public void processPayment(double amount) {
System.out.println(&amp;#34;ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜: &amp;#34; + amount + &amp;#34;å…ƒ&amp;#34;);
// å…·ä½“çš„å¾®ä¿¡æ”¯ä»˜é€»è¾‘
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="3-åˆ›å»ºspié…ç½®æ–‡ä»¶"&gt;3. åˆ›å»ºSPIé…ç½®æ–‡ä»¶
&lt;/h3&gt;&lt;p&gt;åœ¨é¡¹ç›®çš„èµ„æºç›®å½• &lt;code&gt;resources/META-INF/services/&lt;/code&gt;ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œ&lt;strong&gt;æ–‡ä»¶åå¿…é¡»ä¸ºæ¥å£çš„å…¨é™å®šå&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶è·¯å¾„ï¼š&lt;/strong&gt; &lt;code&gt;resources/META-INF/services/com.example.PaymentService&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶å†…å®¹ï¼š&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;com.example.impl.AlipayPaymentService
com.example.impl.WechatPaymentService
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="4-ä½¿ç”¨serviceloaderåŠ è½½æ‰€æœ‰å®ç°"&gt;4. ä½¿ç”¨ServiceLoaderåŠ è½½æ‰€æœ‰å®ç°
&lt;/h3&gt;&lt;p&gt;åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé€šè¿‡ &lt;code&gt;ServiceLoader&lt;/code&gt;åŠ¨æ€åŠ è½½å¹¶è°ƒç”¨æ‰€æœ‰æ”¯ä»˜å®ç°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import java.util.ServiceLoader;
public class PaymentApplication {
public static void main(String[] args) {
// åŠ è½½æ‰€æœ‰PaymentServiceå®ç°
ServiceLoader&amp;lt;PaymentService&amp;gt; services = ServiceLoader.load(PaymentService.class);
// éå†å¹¶è°ƒç”¨æ¯ä¸ªå®ç°
for (PaymentService service : services) {
service.processPayment(100.0);
}
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜: 100.0å…ƒ
ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜: 100.0å…ƒ
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="å…³é”®ç‚¹è¯´æ˜"&gt;å…³é”®ç‚¹è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ä½ç½®å¿…é¡»ç²¾ç¡®&lt;/strong&gt;ï¼šSPIé…ç½®æ–‡ä»¶å¿…é¡»ä½äº &lt;code&gt;META-INF/services/&lt;/code&gt;ç›®å½•ä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶åå¿…é¡»åŒ¹é…&lt;/strong&gt;ï¼šæ–‡ä»¶åå¿…é¡»æ˜¯æ¥å£çš„å®Œæ•´åŒ…å+ç±»åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šå®ç°åˆ†è¡Œåˆ—å‡º&lt;/strong&gt;ï¼šæ¯ä¸ªå®ç°ç±»çš„å…¨é™å®šåå•ç‹¬å ä¸€è¡Œï¼ŒServiceLoaderä¼šåŠ è½½æ‰€æœ‰åˆ—å‡ºçš„å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªä¾‹å­å±•ç¤ºäº†SPIæœºåˆ¶çš„æ ¸å¿ƒä»·å€¼ï¼š&lt;strong&gt;æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç å³å¯æ‰©å±•ç³»ç»ŸåŠŸèƒ½&lt;/strong&gt;ã€‚å¦‚æœè¦æ·»åŠ æ–°çš„æ”¯ä»˜æ–¹å¼ï¼ˆå¦‚é“¶è”æ”¯ä»˜ï¼‰ï¼Œåªéœ€æ–°å¢ä¸€ä¸ªå®ç°ç±»å¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œå³å¯ã€‚&lt;/p&gt;
&lt;h2 id="æ•°ç»„å¤åˆ¶"&gt;æ•°ç»„å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;äº†è§£ Java ä¸­æ•°ç»„å¤åˆ¶æ–¹æ³•çš„æ€§èƒ½å·®å¼‚ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–ç¨‹æ—¶åšå‡ºæ›´åˆé€‚çš„é€‰æ‹©ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†è§£é‡Šè¿™å››ç§å¸¸è§æ–¹æ³•çš„æ€§èƒ½æ’åºï¼ˆ&lt;strong&gt;System.arraycopy &amp;gt; Arrays.copyOf &amp;gt; clone &amp;gt; forå¾ªç¯&lt;/strong&gt;ï¼‰ï¼Œå¹¶è¯´æ˜åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºå®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;System.arraycopy&lt;/th&gt;
&lt;th&gt;Arrays.copyOf&lt;/th&gt;
&lt;th&gt;clone()&lt;/th&gt;
&lt;th&gt;forå¾ªç¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Nativeæ–¹æ³•&lt;/strong&gt;ï¼ŒJVM åº•å±‚å†…å­˜å—å¤åˆ¶&lt;/td&gt;
&lt;td&gt;å†…éƒ¨è°ƒç”¨ &lt;code&gt;System.arraycopy&lt;/code&gt;ï¼Œä½†åŒ…å«é¢å¤–é€»è¾‘&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Nativeæ–¹æ³•&lt;/strong&gt;ï¼Œä½†éœ€è¦ JNI è½¬æ¢&lt;/td&gt;
&lt;td&gt;Java å¾ªç¯ï¼Œé€ä¸ªèµ‹å€¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½çº§åˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€é«˜&lt;/strong&gt; (å¤§æ•°ç»„ä¼˜åŠ¿æ˜æ˜¾)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé«˜&lt;/strong&gt; (ä½†ç•¥ä½äº &lt;code&gt;System.arraycopy&lt;/code&gt;)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸­ç­‰&lt;/strong&gt; (å°æ•°ç»„å°šå¯ï¼Œå¤§æ•°ç»„ä¸å¦‚å‰ä¸¤è€…)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœ€ä½&lt;/strong&gt; (å°¤å…¶åœ¨å¤§æ•°ç»„æ—¶)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œå¯æŒ‡å®šæº/ç›®æ ‡ä½ç½®ã€å¤åˆ¶é•¿åº¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸­&lt;/strong&gt;ï¼Œä¸»è¦ç”¨äºæ‰©å±•æˆ–æˆªæ–­æ•°ç»„&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œåªèƒ½å®Œæ•´å¤åˆ¶æ•°ç»„&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜&lt;/strong&gt;ï¼Œå¯åœ¨å¾ªç¯å†…è¿›è¡Œè‡ªå®šä¹‰æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç ç®€æ´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨åˆ›å»ºç›®æ ‡æ•°ç»„ï¼Œå‚æ•°è¾ƒå¤š&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œä¸€è¡Œä»£ç å®Œæˆåˆ›å»ºå’Œå¤åˆ¶&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œä¸€è¡Œä»£ç  &lt;code&gt;array.clone()&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œéœ€æ‰‹åŠ¨ç¼–å†™å¾ªç¯ä½“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤§å‹æ•°ç»„&lt;/strong&gt;æˆ–å¯¹&lt;strong&gt;æ€§èƒ½æè‡´è¦æ±‚&lt;/strong&gt;çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;éœ€è¦&lt;strong&gt;åˆ›å»ºæ–°æ•°ç»„&lt;/strong&gt;å¹¶å¤åˆ¶å†…å®¹ï¼Œæˆ–è°ƒæ•´æ•°ç»„å¤§å°&lt;/td&gt;
&lt;td&gt;å¿«é€Ÿå®ç°&lt;strong&gt;ä¸€ç»´æ•°ç»„&lt;/strong&gt;çš„&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å°å‹æ•°ç»„&lt;/strong&gt;ï¼Œæˆ–å¤åˆ¶è¿‡ç¨‹ä¸­éœ€&lt;strong&gt;è‡ªå®šä¹‰æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;ç†è§£æ€§èƒ½å·®å¼‚çš„åŸå› &lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;System.arraycopy&lt;/code&gt;ä¸ºä½•æœ€å¿«&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å®ƒæ˜¯ç”¨ &lt;code&gt;native&lt;/code&gt;å…³é”®å­—å£°æ˜çš„&lt;strong&gt;æœ¬åœ°æ–¹æ³•&lt;/strong&gt;ï¼Œå…¶å®ç°æ˜¯ç”¨ C/C++ ç¼–å†™çš„ï¼Œç›´æ¥æ“ä½œå†…å­˜ï¼Œç±»ä¼¼äºç›´æ¥æ‹·è´å†…å­˜å—ã€‚è¿™ç§åº•å±‚æ“ä½œçœå»äº†å¤§é‡çš„æ•°ç»„å¯»å€è®¿é—®ç­‰æ—¶é—´ï¼Œå› æ­¤æ•ˆç‡æœ€é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Arrays.copyOf&lt;/code&gt;ä¸ºä½•æ¬¡ä¹‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹å…¶æºç ä¼šå‘ç°ï¼Œå®ƒå†…éƒ¨å®é™…ä¸Šè°ƒç”¨äº† &lt;code&gt;System.arraycopy&lt;/code&gt;ã€‚ä½†åœ¨è°ƒç”¨ä¹‹å‰ï¼Œå®ƒéœ€è¦&lt;strong&gt;å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„&lt;/strong&gt;ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«ä¸€äº›é¢å¤–çš„é€»è¾‘ï¼ˆå¦‚è®¡ç®—éœ€è¦å¤åˆ¶çš„é•¿åº¦ &lt;code&gt;Math.min(original.length, newLength)&lt;/code&gt;ï¼‰ï¼Œè¿™äº›é¢å¤–çš„å¼€é”€ä½¿å…¶æ•ˆç‡ç•¥ä½äºç›´æ¥è°ƒç”¨ &lt;code&gt;System.arraycopy&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•ä¸ºä½•å±…ä¸­&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;clone()&lt;/code&gt;ä¹Ÿæ˜¯ä¸€ä¸ª &lt;code&gt;native&lt;/code&gt;æ–¹æ³•ã€‚ä½†å®ƒéœ€è¦ JNI (Java Native Interface) è½¬æ¢ï¼Œè¿™å¯èƒ½å¸¦æ¥ä¸€å®šçš„å¼€é”€ã€‚åŒæ—¶ï¼Œå¯¹äºæ•°ç»„è€Œè¨€ï¼Œ&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•ä¼šåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„å¼€é”€é€šå¸¸æ¯”çº¯ç²¹çš„å†…å­˜æ‹·è´ï¼ˆå¦‚ &lt;code&gt;System.arraycopy&lt;/code&gt;ï¼‰è¦å¤§ä¸€äº›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;for&lt;/code&gt;å¾ªç¯ä¸ºä½•æœ€æ…¢&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;for&lt;/code&gt;å¾ªç¯æ˜¯çº¯ç²¹çš„ Java å±‚é¢æ“ä½œï¼Œéœ€è¦&lt;strong&gt;é€ä¸ªå…ƒç´ &lt;/strong&gt;è¿›è¡Œèµ‹å€¼ã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡å¾ªç¯è¿­ä»£éƒ½éœ€è¦è¿›è¡Œ&lt;strong&gt;ä¸‹æ ‡æ£€æŸ¥&lt;/strong&gt;ï¼ˆç¡®ä¿ä¸è¶Šç•Œï¼‰å’Œ&lt;strong&gt;ä¸€æ¬¡é¢å¤–çš„è®°å½•ä¸‹æ ‡å€¼çš„åŠ æ³•è¿ç®—&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç°ä»£ JVM ä¼šå¯¹å¾ªç¯è¿›è¡Œä¸€å®šçš„ä¼˜åŒ–ï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼Œå…¶å¼€é”€ä»ç„¶è¿œå¤§äºåº•å±‚çš„å†…å­˜æ‰¹é‡å¤åˆ¶æ“ä½œã€‚æ•°ç»„è¶Šå¤§ï¼Œè¿™ç§æ€§èƒ½å·®è·å°±è¶Šæ˜æ˜¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ“Š &lt;strong&gt;æ€§èƒ½å·®å¼‚çš„å®é™…æ„ä¹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ€§èƒ½å·®å¼‚åœ¨&lt;strong&gt;æ“ä½œå¤§é‡æ•°æ®ï¼ˆä¾‹å¦‚æ•°ç»„é•¿åº¦è¶…è¿‡å‡ åƒæˆ–ä¸Šä¸‡ï¼‰æ—¶æ‰ä¼šæ¯”è¾ƒæ˜æ˜¾&lt;/strong&gt;ã€‚å¯¹äºå¾ˆå°çš„æ•°ç»„ï¼ˆä¾‹å¦‚åªæœ‰å‡ ä¸ªæˆ–å‡ åä¸ªå…ƒç´ ï¼‰ï¼Œå‡ ç§æ–¹æ³•ä¹‹é—´çš„å·®å¼‚å¯èƒ½å¾®ä¹å…¶å¾®ï¼Œæ­¤æ—¶&lt;strong&gt;ä»£ç çš„å¯è¯»æ€§å’Œç®€æ´æ€§å¯èƒ½æ¯”æè‡´çš„æ€§èƒ½æ›´é‡è¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç»å¤§å¤šæ•°æƒ…å†µï¼Œ&lt;strong&gt;&lt;code&gt;System.arraycopy&lt;/code&gt;æ˜¯å¤„ç†å¤§å‹æ•°ç»„å¤åˆ¶çš„é¦–é€‰æ–¹æ³•ï¼Œè€Œ &lt;code&gt;Arrays.copyOf&lt;/code&gt;åˆ™åœ¨éœ€è¦åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶å†…å®¹æˆ–è°ƒæ•´æ•°ç»„å¤§å°æ—¶æä¾›äº†æ›´ç®€æ´çš„è¯­æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;é€‰æ‹©å»ºè®®&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚æè‡´æ€§èƒ½ã€æ“ä½œå¤§æ•°ç»„æˆ–éœ€è¦éƒ¨åˆ†å¤åˆ¶&lt;/strong&gt;ï¼šä¼˜å…ˆé€‰ç”¨ &lt;code&gt;System.arraycopy&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼ˆå°¤å…¶æ˜¯éœ€è¦è°ƒæ•´å¤§å°ï¼‰å¹¶å¸Œæœ›ä»£ç ç®€æ´&lt;/strong&gt;ï¼š&lt;code&gt;Arrays.copyOf&lt;/code&gt;å’Œ &lt;code&gt;Arrays.copyOfRange&lt;/code&gt;å¾ˆæ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿«é€Ÿå¤åˆ¶ä¸€ç»´æ•°ç»„&lt;/strong&gt;ï¼š&lt;code&gt;clone()&lt;/code&gt;å†™æ³•ç®€å•ï¼Œæ€§èƒ½å°šå¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆ¶å°æ•°ç»„æˆ–éœ€è¦åœ¨å¤åˆ¶è¿‡ç¨‹ä¸­è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼ˆå¦‚æ¡ä»¶è¿‡æ»¤ã€æ•°æ®è½¬æ¢ï¼‰&lt;/strong&gt;ï¼š&lt;code&gt;for&lt;/code&gt;å¾ªç¯æ›´çµæ´»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™äº›æ•°ç»„å¤åˆ¶æ–¹æ³•èƒŒåçš„åŸç†å’Œé€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id="jni"&gt;JNI
&lt;/h2&gt;&lt;p&gt;ä½ è§‚å¯Ÿåˆ°çš„è¿™ä¸€ç‚¹éå¸¸å…³é”®ï¼Œå®ƒç›´æ¥è§¦åŠäº† Java ä¸­ä¸¤ä¸ªé‡è¦ &lt;code&gt;native&lt;/code&gt;æ–¹æ³•åœ¨æ€§èƒ½è¡¨ç°ä¸Šå­˜åœ¨å·®å¼‚çš„æ ¸å¿ƒåŸå› ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;System.arraycopy&lt;/code&gt;æ˜¯ JVM é«˜åº¦ä¼˜åŒ–çš„â€œç‰¹æƒâ€æ“ä½œï¼Œè€Œ &lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•åˆ™éµå¾ªäº†æ ‡å‡†çš„ JNI è°ƒç”¨æµç¨‹ï¼Œè¿™å¯¼è‡´äº†æ€§èƒ½ä¸Šçš„å·®è·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ æ›´ç›´è§‚åœ°æŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;code&gt;System.arraycopy&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;Object.clone()&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;JVM å†…éƒ¨ intrinsic&lt;/strong&gt;ï¼Œå¯èƒ½ç»•è¿‡æ ‡å‡†JNI&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å‡† JNI è°ƒç”¨&lt;/strong&gt;ï¼Œéœ€è¦å®Œæ•´æ¥å£è½¬æ¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜åŒ–çº§åˆ«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æé«˜ï¼Œå¯èƒ½ç¼–è¯‘ä¸ºç‰¹å®šCPUæŒ‡ä»¤&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹è¾ƒä½ï¼Œèµ°æ ‡å‡†æœ¬åœ°æ–¹æ³•è°ƒç”¨æµç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…å­˜è¾¹ç•Œæ£€æŸ¥ã€æ•°æ®æ¬è¿&lt;/td&gt;
&lt;td&gt;JNI è½¬æ¢ã€å¯¹è±¡åˆ›å»ºä¸åˆå§‹åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾è®¡ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¯ç²¹çš„&lt;strong&gt;å†…å­˜å—å¤åˆ¶&lt;/strong&gt;ï¼ŒåŠŸèƒ½å•ä¸€&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œæ•´å¯¹è±¡å¤åˆ¶&lt;/strong&gt;ï¼Œæ¶‰åŠå¯¹è±¡åˆ›å»ºã€åˆå§‹åŒ–ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½å®šä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¥è¿‘ç¡¬ä»¶æé™çš„&lt;strong&gt;ç³»ç»Ÿçº§å·¥å…·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢å‘å¯¹è±¡çš„&lt;strong&gt;é€šç”¨å¯¹è±¡å¤åˆ¶æ¥å£&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥è§£ææ€§èƒ½å·®å¼‚çš„æ ¹æº"&gt;ğŸ’¡ æ·±å…¥è§£ææ€§èƒ½å·®å¼‚çš„æ ¹æº
&lt;/h3&gt;&lt;h4 id="systemarraycopyçš„é«˜æ•ˆä¹‹æº"&gt;&lt;code&gt;System.arraycopy&lt;/code&gt;çš„é«˜æ•ˆä¹‹æº
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;System.arraycopy&lt;/code&gt;çš„é«˜æ€§èƒ½ä¸»è¦å¾—ç›Šäºå®ƒè¢«å®ç°ä¸º &lt;strong&gt;JVM intrinsic&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œå½“ JVMï¼ˆç‰¹åˆ«æ˜¯ JIT ç¼–è¯‘å™¨ï¼‰é‡åˆ° &lt;code&gt;System.arraycopy&lt;/code&gt;è°ƒç”¨æ—¶ï¼Œå¹¶ä¸ä¼šå»æ‰§è¡Œé‚£ä¸ªæ ‡å‡†çš„ã€ç›¸å¯¹ç¼“æ…¢çš„ JNI æœ¬åœ°æ–¹æ³•ã€‚ç›¸åï¼Œå®ƒä¼š&lt;strong&gt;ç›´æ¥å°†å…¶æ›¿æ¢ä¸ºä¸€ç³»åˆ—é«˜åº¦ä¼˜åŒ–çš„æ±‡ç¼–æŒ‡ä»¤&lt;/strong&gt;ã€‚è¿™äº›æŒ‡ä»¤å°±åƒæ˜¯ CPU çš„â€œä¸“é•¿â€ï¼Œèƒ½å¤Ÿä»¥æ¥è¿‘ç¡¬ä»¶æé™çš„é€Ÿåº¦å®Œæˆå¤§å—å†…å­˜çš„å¤åˆ¶ ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå®ƒçš„èŒè´£éå¸¸å•ä¸€ï¼šå°†ä¸€æ®µè¿ç»­çš„å†…å­˜æ•°æ®ä»ä½ç½® A é«˜æ•ˆåœ°æ¬è¿åˆ°ä½ç½® Bã€‚è¿™ç§çº¯ç²¹æ€§ä½¿å¾— JVM å¯ä»¥å¯¹å…¶è¿›è¡Œæè‡´çš„ä¼˜åŒ– ã€‚&lt;/p&gt;
&lt;h4 id="cloneæ–¹æ³•çš„é¢å¤–è´Ÿæ‹…"&gt;&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•çš„é¢å¤–è´Ÿæ‹…
&lt;/h4&gt;&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ï¼Œ&lt;code&gt;Object.clone()&lt;/code&gt;æ–¹æ³•æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ JNI æ–¹æ³•ã€‚å®ƒçš„è°ƒç”¨éœ€è¦ç»å†å®Œæ•´çš„ JNI æµç¨‹ï¼ŒåŒ…æ‹¬ä» Java ç¯å¢ƒåˆ°æœ¬åœ°ç¯å¢ƒçš„åˆ‡æ¢ã€å‚æ•°ä¼ é€’ç­‰ï¼Œè¿™äº›éƒ½ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ ã€‚&lt;/p&gt;
&lt;p&gt;æ›´é‡è¦çš„æ˜¯ï¼Œ&lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•çš„åŠŸèƒ½æ¯” &lt;code&gt;System.arraycopy&lt;/code&gt;å¤æ‚å¾—å¤šã€‚å®ƒéœ€è¦å®Œæˆä¸€ä¸ªå®Œæ•´å¯¹è±¡çš„â€œå…‹éš†â€ï¼Œè¿™è‡³å°‘åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ›å»ºæ–°å¯¹è±¡&lt;/strong&gt;ï¼šä¸ºè¢«å…‹éš†çš„å¯¹è±¡åˆ†é…æ–°çš„å†…å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€å­—æ®µå¤åˆ¶&lt;/strong&gt;ï¼šå°†åŸå¯¹è±¡çš„æ¯ä¸ªå­—æ®µçš„å€¼å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºæ•°ç»„è€Œè¨€ï¼Œè™½ç„¶åº•å±‚ä¹Ÿæ˜¯å†…å­˜å¤åˆ¶ï¼Œä½† &lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•éœ€è¦å¤„ç†å¯¹è±¡åˆ›å»ºçš„é€»è¾‘ä»¥åŠå¯èƒ½çš„æ£€æŸ¥ï¼Œè¿™ä½¿å…¶å¤©ç„¶å°±æ¯”çº¯ç²¹çš„å†…å­˜å¤åˆ¶æ“ä½œ &lt;code&gt;System.arraycopy&lt;/code&gt;æ›´é‡ ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©ä¸å®è·µ"&gt;ğŸ”§ å¦‚ä½•é€‰æ‹©ä¸å®è·µ
&lt;/h3&gt;&lt;p&gt;ç†è§£è¿™äº›åŒºåˆ«åï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹æ—¶å°±å¯ä»¥åšå‡ºæ›´æ˜æ™ºçš„é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°ç»„å¤åˆ¶ï¼Œä¼˜å…ˆä½¿ç”¨ &lt;code&gt;System.arraycopy&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä½ åœ¨è¿›è¡Œæ•°ç»„å¤åˆ¶ï¼ˆå°¤å…¶æ˜¯å¤§æ•°æ®é‡ï¼‰æ—¶ï¼Œåº”é¦–é€‰ &lt;code&gt;System.arraycopy&lt;/code&gt;ï¼Œå› ä¸ºå®ƒä¸ºè¿™ä¸€ç‰¹å®šä»»åŠ¡æä¾›äº†æœ€ä¼˜æ€§èƒ½ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡å…‹éš†ï¼Œç†è§£ &lt;code&gt;clone()&lt;/code&gt;çš„è¯­ä¹‰&lt;/strong&gt;ï¼šå½“éœ€è¦å¤åˆ¶æ•´ä¸ªå¯¹è±¡æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;clone()&lt;/code&gt;ã€‚ä½†è¦ç‰¹åˆ«æ³¨æ„ï¼Œé»˜è®¤çš„ &lt;code&gt;clone()&lt;/code&gt;å®ç°æ˜¯&lt;strong&gt;æµ…æ‹·è´&lt;/strong&gt;ã€‚å¦‚æœå¯¹è±¡å†…éƒ¨åŒ…å«å¯å˜å¼•ç”¨ç±»å‹ï¼Œä½ éœ€è¦é‡å†™ &lt;code&gt;clone()&lt;/code&gt;æ–¹æ³•æ¥å®ç°æ·±æ‹·è´ï¼Œä»¥ç¡®ä¿å…‹éš†å¯¹è±¡çš„å®Œå…¨ç‹¬ç«‹æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æ•æ„Ÿåœºæ™¯çš„åŸºå‡†æµ‹è¯•&lt;/strong&gt;ï¼šåœ¨æç«¯æ€§èƒ½è¦æ±‚çš„åœºæ™¯ä¸‹ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡å®é™…çš„åŸºå‡†æµ‹è¯•ï¼ˆå¦‚ä½¿ç”¨ JMHï¼‰æ¥éªŒè¯ä¸¤ç§æ–¹å¼åœ¨ç‰¹å®šç¯å¢ƒå’Œæ•°æ®è§„æ¨¡ä¸‹çš„å…·ä½“è¡¨ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£è¿™ä¸¤ä¸ªæ–¹æ³•èƒŒåçš„åŸç†ã€‚å¦‚æœä½ å¯¹æµ…æ‹·è´ä¸æ·±æ‹·è´çš„å…·ä½“å®ç°ï¼Œæˆ–è€…å…¶ä»– Java åº•å±‚æœºåˆ¶æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="jvm-intrinsic"&gt;JVM Intrinsic
&lt;/h2&gt;&lt;p&gt;åœ¨Javaå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™çš„ä»£ç ä¼šç”±Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰è½¬æ¢æˆæœºå™¨æŒ‡ä»¤æ¥æ‰§è¡Œã€‚ä¸ºäº†è®©ä¸€äº›å…³é”®æ“ä½œè·‘å¾—æ›´å¿«ï¼ŒJVMä½¿ç”¨äº†ä¸€ç§å«åš &lt;strong&gt;Intrinsic&lt;/strong&gt; çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œæˆ–è€…å«&lt;strong&gt;å†…ç½®æ–¹æ³•&lt;/strong&gt;ã€‚ç®€å•ç†è§£ï¼Œå®ƒå°±æ˜¯JVMè¯†åˆ«å‡ºä¸€äº›ç‰¹å®šæ–¹æ³•è°ƒç”¨åï¼Œâ€œå·å·â€ç”¨æ›´é«˜æ•ˆçš„åº•å±‚æŒ‡ä»¤ï¼ˆæ¯”å¦‚CPUçš„SIMDæŒ‡ä»¤ï¼‰æ¥æ›¿æ¢æ‰åŸæ¥çš„æ–¹æ³•å®ç°ï¼Œä»è€Œå¤§å¹…æå‡æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†JVM Intrinsicçš„æ ¸å¿ƒç‰¹æ€§ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡å…¨å±€ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±JVMåœ¨è¿è¡Œæ—¶æˆ–ç¼–è¯‘æ—¶è¿›è¡Œç‰¹æ®Šå¤„ç†çš„æ–¹æ³•ï¼Œè°ƒç”¨ä¼šè¢«æ›¿æ¢ä¸ºé«˜åº¦ä¼˜åŒ–çš„å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ‰‹æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›¿æ¢ä¸ºç‰¹å®šçš„CPUæŒ‡ä»¤ï¼ˆå¦‚SIMDæŒ‡ä»¤ã€&lt;code&gt;popcnt&lt;/code&gt;ï¼‰ã€ç›´æ¥è®¿é—®ç¡¬ä»¶å¯„å­˜å™¨æˆ–ä¼˜åŒ–çš„æœ¬åœ°ä»£ç æ¡©ï¼ˆStubï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ³¨è§£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;@HotSpotIntrinsicCandidate&lt;/code&gt;(Java 9+)ï¼Œç”¨äºæ ‡è®°å¯èƒ½è¢«ä¼˜åŒ–çš„æ–¹æ³•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾è‘—ï¼Œé€šå¸¸æœ‰æ•°å€ç”šè‡³æ•°åå€çš„æå‡ï¼ˆä¾‹å¦‚ï¼Œ&lt;code&gt;String.indexOf&lt;/code&gt;åˆ©ç”¨SIMDæŒ‡ä»¤å¯æå‡50å€ä»¥ä¸Šï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨ç±»/æ–¹æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;java.lang.String&lt;/code&gt;(&lt;code&gt;indexOf&lt;/code&gt;, &lt;code&gt;equals&lt;/code&gt;), &lt;code&gt;java.util.Arrays&lt;/code&gt;(&lt;code&gt;equals&lt;/code&gt;, &lt;code&gt;copyOf&lt;/code&gt;), &lt;code&gt;java.lang.Math&lt;/code&gt;(å„ç§æ•°å­¦è¿ç®—), &lt;code&gt;sun.misc.Unsafe&lt;/code&gt;(CASæ“ä½œ) ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–ç‰¹å®šCPUæ¶æ„å’ŒJVMå®ç°ï¼›è¦†ç›–èŒƒå›´æœ‰é™ï¼ˆä¸»è¦ä¸ºæ ¸å¿ƒJDKç±»åº“ï¼‰ï¼›å¼€å‘è€…é€šå¸¸æ— æ³•è‡ªå®šä¹‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-intrinsic-å¦‚ä½•å·¥ä½œ"&gt;ğŸ’¡ Intrinsic å¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;Intrinsic çš„æ ¸å¿ƒåœ¨äºï¼ŒJVMï¼ˆç‰¹åˆ«æ˜¯å…¶å³æ—¶ç¼–è¯‘å™¨JITï¼‰åœ¨ç¼–è¯‘Javaå­—èŠ‚ç ä¸ºæœ¬åœ°æœºå™¨ç æ—¶ï¼Œèƒ½è¯†åˆ«å‡ºç‰¹å®šçš„æ–¹æ³•è°ƒç”¨ï¼Œå¹¶ç”¨æœ€ä¼˜çš„å®ç°æ›¿æ¢å®ƒã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¯†åˆ«ä¸æ ‡è®°&lt;/strong&gt;ï¼šåœ¨Java 9åŠä¹‹åç‰ˆæœ¬ï¼ŒJDKå¼€å‘è€…ä½¿ç”¨ &lt;code&gt;@HotSpotIntrinsicCandidate&lt;/code&gt;æ³¨è§£æ¥æ ‡è®°é‚£äº›å¯èƒ½æœ‰é«˜æ•ˆåº•å±‚å®ç°çš„æ–¹æ³•ã€‚è¿™ç›¸å½“äºå‘Šè¯‰JVMï¼šâ€œè¿™ä¸ªæ–¹æ³•æœ‰ä¼˜åŒ–æ½œåŠ›ï¼Œé‡åˆ°æ—¶è¯·ä¼˜å…ˆè€ƒè™‘ä½ çš„é«˜æ•ˆç‰ˆæœ¬ã€‚â€ åœ¨JVMå†…éƒ¨çš„ç¬¦å·è¡¨ï¼ˆå¦‚ &lt;code&gt;vmSymbols.hpp&lt;/code&gt;æ–‡ä»¶ï¼‰ä¸­ï¼Œç»´æŠ¤ç€ä¸€ä¸ªåˆ—è¡¨ï¼Œå°†Javaæ–¹æ³•ä¸æ–¹æ³•ç­¾åæ˜ å°„åˆ°å…¶å¯¹åº”çš„intrinsicå®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–è¯‘æ—¶æ›¿æ¢&lt;/strong&gt;ï¼šå½“JITç¼–è¯‘å™¨ï¼ˆå¦‚C1æˆ–C2ï¼‰å¼€å§‹å·¥ä½œï¼Œå‡†å¤‡å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç æ—¶ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªè¢«æ ‡è®°ä¸ºintrinsicçš„æ–¹æ³•è°ƒç”¨ï¼Œå®ƒä¼šè¿›è¡Œå…³é”®åˆ¤æ–­ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ˜¯intrinsicæ–¹æ³•&lt;/strong&gt;ï¼šJITç¼–è¯‘å™¨ä¸ä¼šå»å†…è”è¯¥æ–¹æ³•æ™®é€šçš„Javaå­—èŠ‚ç å®ç°ï¼Œè€Œæ˜¯ç›´æ¥ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥intrinsicæ“ä½œçš„ç‰¹æ®ŠèŠ‚ç‚¹ï¼ˆIRèŠ‚ç‚¹ï¼‰æ’å…¥åˆ°ç¼–è¯‘ä¸­é—´è¡¨ç¤ºï¼ˆIRï¼‰ä¸­ã€‚åç»­ä¼˜åŒ–é˜¶æ®µï¼Œè¿™ä¸ªç‰¹æ®ŠèŠ‚ç‚¹ä¼šç›´æ¥è½¬æ¢ä¸ºé«˜æ•ˆçš„CPUæŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ˜¯intrinsicæ–¹æ³•&lt;/strong&gt;ï¼šåˆ™èµ°å¸¸è§„çš„å†…è”è·¯å¾„ï¼Œå°†ç›®æ ‡æ–¹æ³•çš„å­—èŠ‚ç å±•å¼€å¹¶é›†æˆåˆ°è°ƒç”¨è€…çš„ç¼–è¯‘ä¸Šä¸‹æ–‡ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆå®ç°è½åœ°&lt;/strong&gt;ï¼šè¿™ä¸ªç‰¹æ®ŠèŠ‚ç‚¹æœ€ç»ˆä¼šæ ¹æ®å½“å‰CPUæ”¯æŒçš„æŒ‡ä»¤é›†ï¼Œç”Ÿæˆé«˜åº¦ä¼˜åŒ–çš„æœºå™¨æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼Œåœ¨æ”¯æŒSSE4.2æŒ‡ä»¤é›†çš„x86-64 CPUä¸Šï¼Œ&lt;code&gt;StringLatin1.indexOf&lt;/code&gt;æ–¹æ³•çš„è°ƒç”¨ä¼šè¢«æ›¿æ¢ä¸ºä½¿ç”¨ &lt;code&gt;PCMPESTRI&lt;/code&gt;æŒ‡ä»¤çš„ä»£ç ï¼Œè¿™æ¡æŒ‡ä»¤èƒ½ä¸€æ¬¡æ€§åœ¨16ä¸ªå­—èŠ‚ä¸­å¹¶è¡Œæœç´¢å­ä¸²ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨ä¸æ€§èƒ½æ”¶ç›Š"&gt;ğŸ”§ å…¸å‹åº”ç”¨ä¸æ€§èƒ½æ”¶ç›Š
&lt;/h3&gt;&lt;p&gt;Intrinsic æŠ€æœ¯åœ¨è®¸å¤šå¸¸è§æ“ä½œä¸­å‘æŒ¥ç€å·¨å¤§ä½œç”¨ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå…¸å‹ä¾‹å­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦ä¸²å’Œæ•°ç»„æ“ä½œ&lt;/strong&gt;ï¼šåƒ &lt;code&gt;String.indexOf&lt;/code&gt;, &lt;code&gt;String.equals&lt;/code&gt;, &lt;code&gt;Arrays.equals&lt;/code&gt;, &lt;code&gt;System.arraycopy&lt;/code&gt;ç­‰æ–¹æ³•ï¼Œé€šè¿‡åˆ©ç”¨SIMDæŒ‡ä»¤ï¼ˆå¦‚SSEã€AVXï¼‰ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ¯”è¾ƒæˆ–å¤åˆ¶å¤šä¸ªæ•°æ®ï¼ˆå¦‚16å­—èŠ‚ã€32å­—èŠ‚ï¼‰ï¼Œè€Œä¸æ˜¯é€ä¸ªå¤„ç†ï¼Œæ€§èƒ½æå‡éå¸¸æ˜¾è‘—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å­¦è¿ç®—&lt;/strong&gt;ï¼š&lt;code&gt;Math.sqrt&lt;/code&gt;, &lt;code&gt;Math.log&lt;/code&gt;ç­‰æ–¹æ³•å¯èƒ½è¢«ç›´æ¥æ›¿æ¢ä¸ºå¯¹åº”çš„CPUæµ®ç‚¹æŒ‡ä»¤ï¼ˆå¦‚ &lt;code&gt;FSQRT&lt;/code&gt;ï¼‰ã€‚&lt;code&gt;Integer.bitCount&lt;/code&gt;ï¼ˆç»Ÿè®¡æ•´æ•°äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°ï¼‰çš„Javaå®ç°å·²ç»å¾ˆå¿«ï¼Œä½†intrinsicä¼˜åŒ–ä¼šç›´æ¥ä½¿ç”¨x86çš„ &lt;code&gt;POPCNT&lt;/code&gt;æŒ‡ä»¤ï¼Œä¸€æ¡æŒ‡ä»¤å®Œæˆæ“ä½œï¼Œé€Ÿåº¦æå¿«ã€‚&lt;code&gt;Math.addExact&lt;/code&gt;ï¼ˆå¸¦æº¢å‡ºæ£€æŸ¥çš„åŠ æ³•ï¼‰åˆ™ä¼šåˆ©ç”¨CPUåŠ æ³•æŒ‡ä»¤åå¯¹çŠ¶æ€å¯„å­˜å™¨ä¸­æº¢å‡ºæ ‡å¿—ä½çš„è‡ªåŠ¨è®¾ç½®æ¥é«˜æ•ˆæ£€æµ‹æº¢å‡ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;Unsafe&lt;/code&gt;ç±»ï¼ˆä»¥åŠåŸºäºå®ƒæ„å»ºçš„ &lt;code&gt;AtomicInteger&lt;/code&gt;ç­‰ï¼‰ä¸­çš„ &lt;code&gt;compareAndSwap&lt;/code&gt;(CAS) æ–¹æ³•ï¼Œä¼šè¢«æ›¿æ¢ä¸ºx86æ¶æ„ä¸‹çš„ &lt;code&gt;LOCK CMPXCHG&lt;/code&gt;æŒ‡ä»¤ï¼Œå®ç°ç¡¬ä»¶çº§åˆ«çš„åŸå­æ“ä½œã€‚&lt;code&gt;Thread.onSpinWait&lt;/code&gt;æ–¹æ³•å¯èƒ½ä¼šè¢«æ›¿æ¢ä¸ºx86çš„ &lt;code&gt;PAUSE&lt;/code&gt;æŒ‡ä»¤ï¼Œä¼˜åŒ–è‡ªæ—‹ç­‰å¾…å¾ªç¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•è§‚å¯Ÿä¸åˆ©ç”¨-intrinsic"&gt;ğŸ“Š å¦‚ä½•è§‚å¯Ÿä¸åˆ©ç”¨ Intrinsic
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥çœ‹Intrinsicä¼˜åŒ–&lt;/strong&gt;ï¼šä½ å¯ä»¥é€šè¿‡æ·»åŠ JVMå‚æ•°æ¥è§‚å¯ŸJITç¼–è¯‘å™¨çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬intrinsicæ›¿æ¢ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation -XX:+PrintInlining&lt;/code&gt;å¯ä»¥æ‰“å°æ–¹æ³•ç¼–è¯‘å’Œå†…è”ä¿¡æ¯ï¼Œå¦‚æœçœ‹åˆ°ç±»ä¼¼ &lt;code&gt;intrinsic&lt;/code&gt;çš„æç¤ºï¼Œè¯´æ˜å‘ç”Ÿäº†intrinsicä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼šè¦å……åˆ†åˆ©ç”¨intrinsicä¼˜åŒ–ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ï¼š&lt;strong&gt;å°½é‡ä½¿ç”¨JDKæ ‡å‡†åº“æä¾›çš„API&lt;/strong&gt;ã€‚å› ä¸ºJDKä¸­çš„æ ¸å¿ƒç±»æ–¹æ³•æ˜¯intrinsicä¼˜åŒ–çš„ä¸»è¦ç›®æ ‡ã€‚é¿å…è‡ªå·±é‡æ–°é€ è½®å­å»å®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œä½ çš„æ‰‹å†™ä»£ç é€šå¸¸æ— æ³•äº«å—åˆ°è¿™ç§åº•å±‚ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;å°½ç®¡Intrinsicå¾ˆå¼ºå¤§ï¼Œä½†ä¹Ÿæœ‰å…¶å±€é™æ€§å’Œéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹³å°ä¾èµ–æ€§&lt;/strong&gt;ï¼šä¸€ä¸ªæ–¹æ³•èƒ½å¦è¢«intrinsicä¼˜åŒ–ï¼Œä»¥åŠä¼˜åŒ–åçš„å…·ä½“å®ç°ï¼Œé«˜åº¦ä¾èµ–äºåº•å±‚çš„CPUæ¶æ„ï¼ˆx86 vs ARMï¼‰å’ŒJVMçš„å…·ä½“å®ç°ï¼ˆHotSpot vs OpenJ9ï¼‰åŠç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼ŒæŸäº›ä¼˜åŒ–å¯èƒ½åªåœ¨x86æ¶æ„çš„HotSpot JVMä¸Šå­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•è‡ªå®šä¹‰&lt;/strong&gt;ï¼šç›®å‰ï¼Œæ™®é€šå¼€å‘è€…æ— æ³•ä¸ºè‡ªå·±ç¼–å†™çš„ä¸šåŠ¡æ–¹æ³•æ·»åŠ  &lt;code&gt;@HotSpotIntrinsicCandidate&lt;/code&gt;æ³¨è§£å¹¶ä½¿å…¶äº«å—intrinsicä¼˜åŒ–ã€‚è¿™ä¸»è¦æ˜¯JVMä¸ºJDKæ ¸å¿ƒç±»åº“ä¿ç•™çš„ä¼˜åŒ–æ‰‹æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯­ä¹‰ä¸€è‡´æ€§&lt;/strong&gt;ï¼šJVMä¿è¯intrinsicä¼˜åŒ–åçš„å®ç°ä¸åŸå§‹çš„Javaä»£ç å®ç°å…·æœ‰å®Œå…¨ç›¸åŒçš„è¯­ä¹‰ï¼Œç¡®ä¿ç¨‹åºè¡Œä¸ºçš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£JVM Intrinsicè¿™ä¸€é‡è¦çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Network</title><link>https://dyhes.github.io/p/nowcodernetwork/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcodernetwork/</guid><description>&lt;h2 id="pt_inetç†è§£"&gt;PT_INETç†è§£
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;PF_INET&lt;/code&gt;å’Œ &lt;code&gt;AF_INET&lt;/code&gt;çš„åŒºåˆ«æ˜¯ç½‘ç»œç¼–ç¨‹ä¸­çš„ä¸€ä¸ªåŸºç¡€ä¸”é‡è¦çš„é—®é¢˜ã€‚å®ƒä»¬çœ‹ä¼¼ä¸åŒï¼Œä½†å…³ç³»ç´§å¯†ã€‚ä¸ºäº†å¸®ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å®ƒä»¬çš„å¯¹æ¯”ï¼Œç„¶åå†æ·±å…¥æ¢è®¨ç»†èŠ‚å’Œä½¿ç”¨å»ºè®®ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;PF_INET&lt;/th&gt;
&lt;th&gt;AF_INET&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¨ç§°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Protocol Family (INET)&lt;/td&gt;
&lt;td&gt;Address Family (INET)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»º socket æ—¶&lt;strong&gt;æŒ‡å®šåè®®æ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®åœ°å€ç»“æ„æ—¶&lt;strong&gt;æŒ‡å®šåœ°å€æ—&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;socket()&lt;/code&gt;å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;sockaddr_in&lt;/code&gt;ç»“æ„ä¸­çš„ &lt;code&gt;sin_family&lt;/code&gt;å­—æ®µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç†è®ºè¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ä½¿ç”¨ &lt;code&gt;PF_INET&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åº”ä½¿ç”¨ &lt;code&gt;AF_INET&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®é™…å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;AF_INET&lt;/code&gt;&lt;strong&gt;å€¼ç›¸åŒ&lt;/strong&gt;ï¼Œé€šå¸¸å¯æ··ç”¨&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;PF_INET&lt;/code&gt;&lt;strong&gt;å€¼ç›¸åŒ&lt;/strong&gt;ï¼Œé€šå¸¸å¯æ··ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸŒ &lt;strong&gt;æ ¸å¿ƒè”ç³»ä¸å†å²æ¸Šæº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PF_INET&lt;/code&gt;å’Œ &lt;code&gt;AF_INET&lt;/code&gt;éƒ½æŒ‡å‘åŒä¸€ä¸ªäº’è”ç½‘åè®®æ—ï¼ˆIPv4ï¼‰ï¼Œå®ƒä»¬çš„æ•°å€¼å®šä¹‰æ˜¯ç›¸åŒçš„ã€‚è¿™ç§è®¾è®¡æœ‰å…¶å†å²åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;æ—©æœŸçš„ BSD å¥—æ¥å­—å®ç°è¯•å›¾é€šè¿‡ä¸åŒçš„ç¬¦å·ï¼ˆ&lt;code&gt;PF_INET&lt;/code&gt;ç”¨äºåè®®æ—ï¼Œ&lt;code&gt;AF_INET&lt;/code&gt;ç”¨äºåœ°å€æ—ï¼‰æ¥ä¸ºæœªæ¥å¯èƒ½çš„åˆ†ç¦»é¢„ç•™ç©ºé—´ã€‚ä½†äº‹å®ä¸Šï¼Œè¿™ç§åè®®æ—å’Œåœ°å€æ—çš„ä¸€ä¸€å¯¹åº”å…³ç³»ä»æœªè¢«æ‰“ç ´ï¼Œæ‰€ä»¥ &lt;code&gt;PF_INET&lt;/code&gt;å’Œ &lt;code&gt;AF_INET&lt;/code&gt;æœ€ç»ˆå§‹ç»ˆå…·æœ‰ç›¸åŒçš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ’» &lt;strong&gt;ä¸åŒå¹³å°ä¸‹çš„ç»†å¾®å·®åˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸¤è€…å¯ä»¥äº’æ¢è€Œä¸å‡ºé—®é¢˜ï¼Œä½†åœ¨ä¸åŒç³»ç»Ÿä¸­è¿˜æ˜¯æœ‰äº›ç»†å¾®å·®åˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Windows å¹³å°&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;Winsock2.h&lt;/code&gt;å¤´æ–‡ä»¶ä¸­ï¼Œ&lt;code&gt;PF_INET&lt;/code&gt;ç›´æ¥è¢«å®šä¹‰ä¸º &lt;code&gt;AF_INET&lt;/code&gt;ï¼Œè¿™æ„å‘³ç€å®ƒä»¬&lt;strong&gt;å®Œå…¨ç­‰åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Unix/Linux/BSD å¹³å°&lt;/strong&gt;ï¼šåœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤è€…å¯èƒ½å­˜åœ¨éå¸¸å¾®å°çš„å·®åˆ«ã€‚ä¾‹å¦‚ï¼Œåœ¨ BSD ç³»ç»Ÿä¸­æ›´å€¾å‘äºä½¿ç”¨ &lt;code&gt;AF&lt;/code&gt;ï¼Œè€Œåœ¨ POSIX æ ‡å‡†ä¸­åˆ™æ›´å€¾å‘äºä½¿ç”¨ &lt;code&gt;PF&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ“ &lt;strong&gt;ä½¿ç”¨å»ºè®®ä¸ä»£ç ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶æ··ç”¨ä¸€èˆ¬æ— ç¢ï¼Œä½†éµå¾ª&lt;strong&gt;è§„èŒƒçš„åšæ³•&lt;/strong&gt;èƒ½è®©ä»£ç æ„å›¾æ›´æ¸…æ™°ï¼Œå¯è¯»æ€§æ›´å¥½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§„èŒƒå†™æ³•&lt;/strong&gt;ï¼šåœ¨è°ƒç”¨ &lt;code&gt;socket()&lt;/code&gt;å‡½æ•°æ—¶ä½¿ç”¨ &lt;code&gt;PF_INET&lt;/code&gt;ï¼Œåœ¨åˆå§‹åŒ– socket åœ°å€ç»“æ„ï¼ˆå¦‚ &lt;code&gt;struct sockaddr_in&lt;/code&gt;ï¼‰æ—¶ä½¿ç”¨ &lt;code&gt;AF_INET&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;netinet/in.h&amp;gt;
#include &amp;lt;arpa/inet.h&amp;gt;
int main() {
// åˆ›å»º socket æ—¶ä½¿ç”¨ PF_INET æŒ‡å®šåè®®æ—
int sockfd = socket(PF_INET, SOCK_STREAM, 0);
if (sockfd == -1) {
// é”™è¯¯å¤„ç†
perror(&amp;#34;socket creation failed&amp;#34;);
exit(EXIT_FAILURE);
}
struct sockaddr_in serv_addr;
memset(&amp;amp;serv_addr, 0, sizeof(serv_addr));
// è®¾ç½®åœ°å€ç»“æ„æ—¶ä½¿ç”¨ AF_INET æŒ‡å®šåœ°å€æ—
serv_addr.sin_family = AF_INET; // åœ°å€æ— IPv4
serv_addr.sin_port = htons(8080); // ç«¯å£å·
inet_pton(AF_INET, &amp;#34;127.0.0.1&amp;#34;, &amp;amp;serv_addr.sin_addr); // IPåœ°å€
// ... (ç»‘å®šã€è¿æ¥ã€è¯»å†™ç­‰æ“ä½œ)
close(sockfd);
return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¸è§æ··ç”¨æƒ…å†µ&lt;/strong&gt;ï¼šæ­£å¦‚æœç´¢ç»“æœä¸­æåˆ°ï¼Œè®¸å¤šç½‘ç»œç¼–ç¨‹çš„ç¤ºä¾‹å’Œä»£ç ä¸­ï¼Œåœ¨ &lt;code&gt;socket()&lt;/code&gt;è°ƒç”¨æ—¶ç›´æ¥ä½¿ç”¨ &lt;code&gt;AF_INET&lt;/code&gt;ä¹Ÿéå¸¸æ™®éï¼Œå¹¶ä¸”èƒ½æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è¿™ç§å†™æ³•å¾ˆå¸¸è§ï¼Œä¸”èƒ½æ­£å¸¸å·¥ä½œï¼Œä½†ä¸ç¬¦åˆä¸¥æ ¼è§„èŒƒ
int sockfd = socket(AF_INET, SOCK_STREAM, 0);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¯ &lt;strong&gt;è®°ä½è¦ç‚¹&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœ¬è´¨ç›¸åŒ&lt;/strong&gt;ï¼š&lt;code&gt;PF_INET&lt;/code&gt;å’Œ &lt;code&gt;AF_INET&lt;/code&gt;çš„å€¼ç›¸åŒï¼Œå‡ä»£è¡¨ IPv4 åè®®æ—ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹äº’æ¢ä¸ä¼šå¼•èµ·é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§„èŒƒä¸æ„å›¾&lt;/strong&gt;ï¼šæŒ‰ç…§è®¾è®¡åˆè¡·ä½¿ç”¨ï¼ˆ&lt;code&gt;PF_INET&lt;/code&gt;ç”¨äºåè®®ï¼Œ&lt;code&gt;AF_INET&lt;/code&gt;ç”¨äºåœ°å€ï¼‰æ˜¯æ›´è§„èŒƒçš„åšæ³•ï¼Œèƒ½ä½¿ä»£ç è¯­ä¹‰æ›´æ¸…æ™°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼šå¦‚æœä½ éå¸¸å…³å¿ƒä»£ç çš„æ ‡å‡†æ€§å’Œå¯ç§»æ¤æ€§ï¼Œéµå¾ªè§„èŒƒå†™æ³•æ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚å¦‚æœåªæ˜¯ç¼–å†™ä¸€èˆ¬åº”ç”¨ç¨‹åºï¼Œæ„è¯†åˆ°å®ƒä»¬å¯ä»¥äº’æ¢å³å¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£ &lt;code&gt;PF_INET&lt;/code&gt;å’Œ &lt;code&gt;AF_INET&lt;/code&gt;ã€‚ Happy Codingï¼&lt;/p&gt;
&lt;h2 id="æœ¬åœ°å¹¿æ’­--ç¯å›æµ‹è¯•"&gt;æœ¬åœ°å¹¿æ’­ &amp;amp; ç¯å›æµ‹è¯•
&lt;/h2&gt;&lt;p&gt;æœ¬åœ°å¹¿æ’­åœ°å€å’Œç¯å›æµ‹è¯•åœ°å€æ˜¯ç½‘ç»œä¸­çš„ä¸¤ä¸ªç‰¹æ®Šåœ°å€ï¼Œå®ƒä»¬ç”¨é€”å®Œå…¨ä¸åŒã€‚ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠŠæ¡æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å®ƒä»¬çš„å¯¹æ¯”ï¼Œç„¶åå†æ·±å…¥æ¢è®¨ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;æœ¬åœ°å¹¿æ’­åœ°å€ (Local Broadcast Address)&lt;/th&gt;
&lt;th&gt;ç¯å›æµ‹è¯•åœ°å€ (Loopback Address)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€å½¢å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;255.255.255.255 (æœ‰é™å¹¿æ’­) æˆ– ç½‘ç»œå·å…¨1çš„ä¸»æœºåœ°å€ (å®šå‘å¹¿æ’­)&lt;/td&gt;
&lt;td&gt;127.0.0.1 (æœ€å¸¸ç”¨)ï¼Œæˆ– 127.0.0.0/8 ç½‘æ®µå†…ä»»ä½•åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šä¿¡èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒä¸€å±€åŸŸç½‘ï¼ˆå¹¿æ’­åŸŸï¼‰å†…çš„æ‰€æœ‰è®¾å¤‡&lt;/td&gt;
&lt;td&gt;ä»…é™äº&lt;strong&gt;æœ¬æœºå†…éƒ¨&lt;/strong&gt;ï¼Œæ•°æ®ä¸ç¦»å¼€ä¸»æœº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æµå‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¼šé€šè¿‡ç‰©ç†ç½‘å¡å‘å‡ºï¼Œä½†é€šå¸¸è¢«è·¯ç”±å™¨éš”ç¦»&lt;/td&gt;
&lt;td&gt;æ•°æ®&lt;strong&gt;ä¸ç»è¿‡ç‰©ç†ç½‘å¡&lt;/strong&gt;ï¼Œç”±æ“ä½œç³»ç»Ÿå†…éƒ¨ç›´æ¥å›é€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘ç½‘ç»œä¸­æ‰€æœ‰è®¾å¤‡å‘é€æ•°æ®ï¼ˆå¦‚DHCPè¯·æ±‚ã€ARPè§£æï¼‰&lt;/td&gt;
&lt;td&gt;æµ‹è¯•æœ¬æœºç½‘ç»œåè®®æ ˆã€æœåŠ¡æˆ–åº”ç”¨ç¨‹åºæ˜¯å¦æ­£å¸¸å·¥ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¯ç”±å™¨å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸è½¬å‘&lt;/strong&gt;255.255.255.255ï¼›&lt;strong&gt;å¯èƒ½è½¬å‘æˆ–ä¸¢å¼ƒ&lt;/strong&gt;å®šå‘å¹¿æ’­ï¼ˆå› å®‰å…¨åŸå› å¸¸è¢«ç¦ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ¶‰åŠè·¯ç”±å™¨&lt;/strong&gt;ï¼Œæ•°æ®æ ¹æœ¬ä¸ä¼šè¿›å…¥ç‰©ç†ç½‘ç»œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸¾ä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ping 255.255.255.255&lt;/code&gt;(é€šçŸ¥åŒå±€åŸŸç½‘æ‰€æœ‰è®¾å¤‡)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ping 127.0.0.1&lt;/code&gt;(æµ‹è¯•æœ¬æœºTCP/IPåè®®æ ˆæ˜¯å¦æ­£å¸¸)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸŒ &lt;strong&gt;æ·±å…¥ç†è§£æœ¬åœ°å¹¿æ’­åœ°å€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ¬åœ°å¹¿æ’­åœ°å€ï¼Œç‰¹åˆ«æ˜¯ &lt;code&gt;255.255.255.255&lt;/code&gt;ï¼Œä¹Ÿç§°ä¸º&lt;strong&gt;æœ‰é™å¹¿æ’­åœ°å€&lt;/strong&gt;ã€‚å®ƒç”¨äºå½“è®¾å¤‡ï¼ˆå¦‚åœ¨å¯åŠ¨é˜¶æ®µï¼‰è¿˜ä¸çŸ¥é“è‡ªå·±æ‰€å¤„ç½‘ç»œè¯¦æƒ…æ—¶ï¼Œå‘&lt;strong&gt;åŒä¸€ç‰©ç†ç½‘ç»œæ®µï¼ˆå¹¿æ’­åŸŸï¼‰å†…çš„æ‰€æœ‰è®¾å¤‡&lt;/strong&gt;å‘é€æ•°æ®åŒ…ã€‚ä¸€ä¸ªå¸¸è§çš„ç”¨é€”æ˜¯æ— ç›˜å·¥ä½œç«™é€šè¿‡DHCPæˆ–BOOTPæœåŠ¡å™¨è·å–IPåœ°å€çš„åˆå§‹é…ç½®è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§å½¢å¼æ˜¯&lt;strong&gt;å®šå‘å¹¿æ’­åœ°å€&lt;/strong&gt;ï¼Œæ ¼å¼ä¸º &lt;code&gt;ç½‘ç»œå·.å…¨1çš„ä¸»æœºå·&lt;/code&gt;ï¼ˆä¾‹å¦‚ï¼Œåœ¨ &lt;code&gt;192.168.1.0/24&lt;/code&gt;ç½‘ç»œä¸­ï¼Œå¹¿æ’­åœ°å€æ˜¯ &lt;code&gt;192.168.1.255&lt;/code&gt;ï¼‰ã€‚è¿™ç§å¹¿æ’­é’ˆå¯¹ç‰¹å®šç½‘ç»œï¼Œä½†å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè·¯ç”±å™¨é€šå¸¸é»˜è®¤ä¸è½¬å‘æ­¤ç±»å¹¿æ’­æµé‡ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ–¥ï¸ &lt;strong&gt;æ·±å…¥ç†è§£ç¯å›æµ‹è¯•åœ°å€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¯å›åœ°å€æœ€è‘—åçš„æ˜¯ &lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œä¸»æœºåé€šå¸¸å¯¹åº” &lt;code&gt;localhost&lt;/code&gt;ã€‚ä½†æ•´ä¸ª &lt;code&gt;127.0.0.0/8&lt;/code&gt;ï¼ˆä» &lt;code&gt;127.0.0.1&lt;/code&gt;åˆ° &lt;code&gt;127.255.255.254&lt;/code&gt;ï¼‰çš„åœ°å€å—éƒ½ä¿ç•™ç”¨äºç¯å›ã€‚å‘é€åˆ°è¿™äº›åœ°å€çš„æ•°æ®åŒ…&lt;strong&gt;ä¸ä¼šé€šè¿‡ç‰©ç†ç½‘å¡ä¼ è¾“åˆ°å¤–éƒ¨ç½‘ç»œ&lt;/strong&gt;ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿå†…éƒ¨ç›´æ¥â€œå›é€â€ç»™æœ¬æœºã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµ‹è¯•æœ¬æœºç½‘ç»œåè®®æ ˆ&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œ&lt;code&gt;ping 127.0.0.1&lt;/code&gt;æˆåŠŸè¯´æ˜æœ¬æœºTCP/IPåè®®æ ˆå·¥ä½œæ­£å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°æœåŠ¡å¼€å‘å’Œè°ƒè¯•&lt;/strong&gt;ï¼šåœ¨æœ¬åœ°æ­å»ºWebæœåŠ¡å™¨ã€æ•°æ®åº“ç­‰ï¼Œå¹¶é€šè¿‡ &lt;code&gt;http://127.0.0.1:ç«¯å£å·&lt;/code&gt;è¿›è¡Œè®¿é—®æµ‹è¯•ï¼Œæ— éœ€ç½‘ç»œè¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;æ ¸å¿ƒåŒºåˆ«ä¸è”ç³»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°å¹¿æ’­&lt;/strong&gt;æ˜¯å‘&lt;strong&gt;å±€åŸŸç½‘å†…æ‰€æœ‰é‚»å±…&lt;/strong&gt;å–Šè¯ï¼ˆâ€œå¤§å®¶å¥½ï¼â€ï¼‰ï¼Œä½†å£°éŸ³ä¼ ä¸å‡ºä½ å®¶å°åŒºï¼ˆå¹¿æ’­åŸŸï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯å›æµ‹è¯•&lt;/strong&gt;æ˜¯&lt;strong&gt;è‡ªè¨€è‡ªè¯­&lt;/strong&gt;ï¼ˆâ€œæˆ‘çš„å˜´å·´å’Œè€³æœµæ²¡é—®é¢˜å§ï¼Ÿâ€ï¼‰ï¼Œå£°éŸ³æ ¹æœ¬ä¸å‡ºä½ å®¶é—¨ï¼ˆæœ¬æœºï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®ƒä»¬çš„å…±åŒç‚¹åœ¨äºï¼Œå…¶æ•°æ®åŒ…é€šå¸¸éƒ½&lt;strong&gt;ä¸ä¼šè¢«è·¯ç”±å™¨è½¬å‘åˆ°äº’è”ç½‘ä¸Š&lt;/strong&gt;ï¼ˆ255.255.255.255çš„å¹¿æ’­ç»å¯¹ä¸è½¬å‘ï¼Œç¯å›æµé‡åˆ™ä¸ç»è¿‡ç½‘å¡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°ç†è§£æœ¬åœ°å¹¿æ’­åœ°å€å’Œç¯å›æµ‹è¯•åœ°å€çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="ç‰¹æ®Šåœ°å€"&gt;ç‰¹æ®Šåœ°å€
&lt;/h2&gt;&lt;p&gt;åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œé™¤äº†å¹¿æ’­åœ°å€å’Œç¯å›åœ°å€ï¼Œç¡®å®è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç‰¹æ®ŠIPåœ°å€éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚å®ƒä»¬å„è‡ªæœ‰ç‹¬ç‰¹çš„ç”¨é€”å’Œé™åˆ¶ï¼Œç†è§£è¿™äº›å¯¹äºè®¾è®¡æ­£ç¡®çš„ç½‘ç»œé€šä¿¡é€»è¾‘è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†è¿™äº›å¸¸è§çš„ç‰¹æ®Šåœ°å€åŠå…¶ä¸»è¦ç‰¹ç‚¹ï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€ç±»å‹&lt;/th&gt;
&lt;th&gt;åœ°å€èŒƒå›´&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;th&gt;æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œåœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»æœºå·å…¨ä¸º0çš„åœ°å€ï¼Œå¦‚ &lt;code&gt;192.168.1.0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ ‡è¯†ä¸€ä¸ªç½‘ç»œæœ¬èº«&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;åˆ†é…ç»™ä»»ä½•å…·ä½“çš„ä¸»æœºä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¨ç½‘å¹¿æ’­åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;255.255.255.255&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å‘&lt;strong&gt;æœ¬åœ°ç‰©ç†ç½‘ç»œ&lt;/strong&gt;ï¼ˆå¹¿æ’­åŸŸï¼‰ä¸­çš„æ‰€æœ‰è®¾å¤‡å‘é€æ•°æ®åŒ…&lt;/td&gt;
&lt;td&gt;è·¯ç”±å™¨&lt;strong&gt;é€šå¸¸ä¸è½¬å‘&lt;/strong&gt;æ­¤ç±»å¹¿æ’­ï¼Œä»¥é¿å…å¹¿æ’­é£æš´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç§æœ‰åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;10.0.0.0/8&lt;/code&gt; &lt;code&gt;172.16.0.0/12&lt;/code&gt; &lt;code&gt;192.168.0.0/16&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äº&lt;strong&gt;å†…éƒ¨ç½‘ç»œ&lt;/strong&gt;ï¼Œåœ¨äº’è”ç½‘ä¸Š&lt;strong&gt;ä¸å¯è·¯ç”±&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡&lt;strong&gt;NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰&lt;/strong&gt; è®¾å¤‡å°†å…¶è½¬æ¢ä¸ºå…¬ç½‘åœ°å€åï¼Œæ‰èƒ½ä¸äº’è”ç½‘é€šä¿¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨ç§æœ‰åœ°å€ (APIPA)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;169.254.0.0/16&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å½“è®¾å¤‡ï¼ˆå¦‚å¯ç”¨DHCPçš„Windowsä¸»æœºï¼‰æ— æ³•ä»DHCPæœåŠ¡å™¨è·å–IPæ—¶ï¼Œç³»ç»Ÿ&lt;strong&gt;è‡ªåŠ¨åˆ†é…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ„å‘³ç€ç½‘ç»œé…ç½®ï¼ˆå¦‚DHCPæœåŠ¡å™¨æˆ–ç½‘ç»œè¿æ¥ï¼‰æœ‰é—®é¢˜ï¼Œåªèƒ½ä¸åŒä¸€ç½‘æ®µå†…åŒä¸º169.254å¼€å¤´çš„ä¸»æœºé€šä¿¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»„æ’­åœ°å€ (Dç±»åœ°å€)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;224.0.0.0&lt;/code&gt;~ &lt;code&gt;239.255.255.255&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äº&lt;strong&gt;ä¸€å¯¹å¤š&lt;/strong&gt;çš„é€šä¿¡ï¼Œæ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªç»„æ’­ç»„ï¼Œè¯¥ç»„çš„æ‰€æœ‰æˆå‘˜éƒ½èƒ½æ”¶åˆ°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;224.0.0.1&lt;/code&gt;æŒ‡&lt;strong&gt;æ‰€æœ‰ä¸»æœº&lt;/strong&gt;ï¼Œ&lt;code&gt;224.0.0.2&lt;/code&gt;æŒ‡&lt;strong&gt;æ‰€æœ‰è·¯ç”±å™¨&lt;/strong&gt;ã€‚ç»„æ’­éœ€è¦ç‰¹å®šçš„åè®®æ”¯æŒï¼ˆå¦‚IGMPï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤è·¯ç”±/ä»»æ„åœ°å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0.0.0.0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æœåŠ¡å™¨ç¼–ç¨‹ä¸­ï¼Œè¡¨ç¤ºç›‘å¬æœ¬æœº&lt;strong&gt;æ‰€æœ‰IPv4åœ°å€&lt;/strong&gt;ã€‚åœ¨è·¯ç”±ä¸­ï¼Œè¡¨ç¤º&lt;strong&gt;é»˜è®¤è·¯ç”±&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;å½“ç¨‹åºéœ€è¦ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šçš„è¿æ¥æ—¶ï¼Œå¸¸ä¼šç»‘å®šåˆ° &lt;code&gt;0.0.0.0&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥äº†è§£ä¸ä½¿ç”¨åœºæ™¯"&gt;ğŸ–§ æ·±å…¥äº†è§£ä¸ä½¿ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œåœ°å€ä¸å…¨ç½‘å¹¿æ’­åœ°å€&lt;/strong&gt;ï¼šè¿™ä¸¤ä¸ªåœ°å€é€šå¸¸åœ¨åŒä¸€ç½‘æ®µå†…æˆå¯¹å‡ºç°ã€‚ä¾‹å¦‚ï¼Œåœ¨ &lt;code&gt;192.168.1.0/24&lt;/code&gt;è¿™ä¸ªç½‘æ®µä¸­ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œåœ°å€&lt;/strong&gt;æ˜¯ &lt;code&gt;192.168.1.0&lt;/code&gt;ï¼Œå®ƒä»£è¡¨è¿™ä¸ªç½‘ç»œæœ¬èº«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šå‘å¹¿æ’­åœ°å€&lt;/strong&gt;æ˜¯ &lt;code&gt;192.168.1.255&lt;/code&gt;ï¼Œå‘è¿™ä¸ªåœ°å€å‘é€æ•°æ®ï¼Œè¯¥ç½‘æ®µå†…æ‰€æœ‰ä¸»æœºéƒ½ä¼šæ¥æ”¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨ç½‘å¹¿æ’­åœ°å€&lt;/strong&gt; &lt;code&gt;255.255.255.255&lt;/code&gt;ä¹Ÿä¼šè¢«åŒä¸€å¹¿æ’­åŸŸå†…çš„æ‰€æœ‰ä¸»æœºæ¥æ”¶ï¼Œä½†&lt;strong&gt;è·¯ç”±å™¨é»˜è®¤ä¸è½¬å‘&lt;/strong&gt;å®ƒï¼Œå› æ­¤å…¶ä½œç”¨èŒƒå›´é€šå¸¸å±€é™äºå‘é€è€…æ‰€åœ¨çš„æœ¬åœ°ç½‘ç»œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§æœ‰åœ°å€ä¸NAT&lt;/strong&gt;ï¼šç”±äºå…¬ç½‘IPv4åœ°å€çŸ­ç¼ºï¼Œæˆ‘ä»¬çš„å®¶åº­å’ŒåŠå…¬å®¤å±€åŸŸç½‘å†…éƒ¨æ™®éä½¿ç”¨ç§æœ‰åœ°å€ï¼ˆå¦‚è·¯ç”±å™¨å¸¸åˆ†é…çš„ &lt;code&gt;192.168.x.x&lt;/code&gt;ï¼‰ã€‚å½“è¿™äº›è®¾å¤‡éœ€è¦è®¿é—®äº’è”ç½‘æ—¶ï¼Œ&lt;strong&gt;NATè®¾å¤‡&lt;/strong&gt;ï¼ˆå¦‚å®¶ç”¨è·¯ç”±å™¨ï¼‰ä¼šè´Ÿè´£å°†ç§æœ‰IPåœ°å€å’Œç«¯å£æ˜ å°„ä¸ºä¸€ä¸ªå…¬ç½‘IPåœ°å€å’Œç«¯å£ï¼Œä»è€Œå®ç°å¯¹å¤–é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„æ’­åœ°å€&lt;/strong&gt;ï¼šç»„æ’­æ¯”å¹¿æ’­æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒåªå°†æ•°æ®åŒ…å‘é€ç»™åŠ å…¥ç‰¹å®šç»„æ’­ç»„çš„æˆå‘˜ï¼Œè€Œä¸æ˜¯ç½‘ç»œä¸­çš„æ‰€æœ‰ä¸»æœºã€‚å¸¸è§çš„ç»„æ’­åœ°å€æœ‰ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;224.0.0.1&lt;/code&gt;ï¼šæ‰€æœ‰ä¸»æœºç»„æ’­åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;224.0.0.2&lt;/code&gt;ï¼šæ‰€æœ‰è·¯ç”±å™¨ç»„æ’­åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;224.0.0.9&lt;/code&gt;ï¼šå¸¸ç”¨äºRIPï¼ˆè·¯ç”±ä¿¡æ¯åè®®ï¼‰ç‰ˆæœ¬2ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;239.255.255.250&lt;/code&gt;ï¼šç”¨äºSSDPï¼ˆç®€å•æœåŠ¡å‘ç°åè®®ï¼‰ï¼Œå¦‚UPnPè®¾å¤‡å‘ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤è·¯ç”±/ä»»æ„åœ°å€ (0.0.0.0)&lt;/strong&gt;ï¼šåœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œå½“æœåŠ¡å™¨ç¨‹åºç»‘å®šåˆ° &lt;code&gt;0.0.0.0&lt;/code&gt;ï¼Œæ„å‘³ç€å®ƒä¼šç›‘å¬æœºå™¨ä¸Š&lt;strong&gt;æ‰€æœ‰ç½‘ç»œæ¥å£&lt;/strong&gt;ï¼ˆå¦‚æœ‰çº¿ç½‘å¡ã€æ— çº¿ç½‘å¡ï¼‰ä¸Šçš„æŒ‡å®šç«¯å£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªWebæœåŠ¡å™¨ç»‘å®š &lt;code&gt;0.0.0.0:80&lt;/code&gt;ï¼Œé‚£ä¹ˆæ— è®ºæ˜¯é€šè¿‡æœ¬åœ°å›ç¯åœ°å€ &lt;code&gt;127.0.0.1&lt;/code&gt;ã€å±€åŸŸç½‘IP &lt;code&gt;192.168.1.100&lt;/code&gt;è¿˜æ˜¯å…¶ä»–ä»»ä½•é…ç½®åœ¨æœ¬æœºçš„IPåœ°å€ï¼Œéƒ½èƒ½è®¿é—®åˆ°è¿™ä¸ªæœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç†è§£è¿™äº›ç‰¹æ®ŠIPåœ°å€çš„ç”¨é€”å’Œé™åˆ¶ï¼Œå¯¹äºç½‘ç»œç¼–ç¨‹ã€ç½‘ç»œæ•…éšœæ’é™¤ä»¥åŠç½‘ç»œè§„åˆ’éƒ½è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ç½‘ç»œç¼–ç¨‹ä¸­çš„ç‰¹æ®Šåœ°å€ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šåœ°å€çš„ç”¨æ³•æˆ–åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="0000"&gt;0.0.0.0
&lt;/h2&gt;&lt;p&gt;ã€‚0.0.0.0 åœ¨ IPv4 åè®®ä¸­æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¿ç•™åœ°å€ï¼Œå®ƒ&lt;strong&gt;åªèƒ½ä½œä¸ºæºåœ°å€ä½¿ç”¨ï¼Œè€Œä¸èƒ½ä½œä¸ºç›®çš„åœ°å€&lt;/strong&gt;ã€‚è¿™ä¸»è¦æ˜¯ç”±å®ƒçš„è®¾è®¡ç”¨é€”å’Œç½‘ç»œåè®®è§„èŒƒå†³å®šçš„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ®ŠIPåœ°å€&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
&lt;th&gt;å¯ä½œä¸ºæºåœ°å€&lt;/th&gt;
&lt;th&gt;å¯ä½œç›®çš„åœ°å€&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;0.0.0.0&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨ç¤º&amp;quot;æœ¬ç½‘ç»œä¸Šçš„æœ¬ä¸»æœº&amp;quot;ï¼Œå¸¸ç”¨äºDHCPåˆå§‹åŒ–ã€é»˜è®¤è·¯ç”±ã€æœåŠ¡ç›‘å¬æ‰€æœ‰æ¥å£&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;ä»£è¡¨&amp;quot;æœªçŸ¥&amp;quot;æˆ–&amp;quot;ä»»æ„&amp;quot;ï¼Œä¸æŒ‡å‘å…·ä½“è®¾å¤‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;127.0.0.1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¯å›æµ‹è¯•ï¼Œç”¨äºæœ¬æœºå†…éƒ¨è¿›ç¨‹é—´é€šä¿¡&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;æ•°æ®åŒ…ä¸ç¦»å¼€ä¸»æœºï¼Œä»…åœ¨æ“ä½œç³»ç»Ÿå†…éƒ¨å›é€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;255.255.255.255&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å—é™å¹¿æ’­åœ°å€ï¼Œå‘æœ¬åœ°ç‰©ç†ç½‘ç»œï¼ˆå¹¿æ’­åŸŸï¼‰å†…çš„æ‰€æœ‰è®¾å¤‡å‘é€æ•°æ®åŒ…&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;è·¯ç”±å™¨ä¸è½¬å‘æ­¤ç±»å¹¿æ’­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;169.254.x.x&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨ä¸“ç”¨IPåœ°å€ï¼ˆAPIPAï¼‰ï¼Œå½“DHCPå¤±è´¥æ—¶ç³»ç»Ÿè‡ªåŠ¨åˆ†é…&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ„å‘³ç€ç½‘ç»œé…ç½®æœ‰é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;224.0.0.1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»„æ’­åœ°å€ï¼ˆæ‰€æœ‰ä¸»æœºç»„ï¼‰&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;ç”¨äºä¸€å¯¹å¤šé€šä¿¡ï¼Œæ•°æ®åŒ…å‘é€ç»™åŠ å…¥ç‰¹å®šç»„æ’­ç»„çš„æˆå‘˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£-0000"&gt;ğŸŒ æ·±å…¥ç†è§£ 0.0.0.0
&lt;/h3&gt;&lt;p&gt;0.0.0.0 è¢«ç§°ä¸º&amp;quot;æœªæŒ‡å®šåœ°å€&amp;quot;ï¼ˆunspecified addressï¼‰ï¼Œå®ƒæ›´åƒä¸€ä¸ª&lt;strong&gt;é€šé…ç¬¦&lt;/strong&gt;ï¼Œä»£è¡¨ä¸€ç§&amp;quot;æœªçŸ¥&amp;quot;æˆ–&amp;quot;ä»»æ„&amp;quot;çš„çŠ¶æ€ï¼Œè€Œéä¸€ä¸ªå…·ä½“çš„ç›®æ ‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡åˆè¡·ä¸åè®®è§„å®š&lt;/strong&gt;ï¼šæ ¹æ® RFC 1122 ç­‰ç½‘ç»œåè®®è§„èŒƒï¼Œ0.0.0.0 è¢«æ˜ç¡®å®šä¹‰ä¸ºä¸èƒ½å‡ºç°åœ¨ IP æ•°æ®åŒ…çš„ç›®çš„åœ°å€å­—æ®µã€‚å®ƒçš„è§’è‰²æ˜¯&lt;strong&gt;æºåœ°å€çš„&amp;quot;å ä½ç¬¦&amp;quot;&lt;/strong&gt;ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªå°šæœªè·å¾—æœ‰æ•ˆIPåœ°å€çš„ä¸»æœºï¼Œæˆ–è€…ä»£è¡¨&amp;quot;æ‰€æœ‰å¯èƒ½çš„åœ°å€&amp;quot;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DHCPè¿‡ç¨‹&lt;/strong&gt;ï¼šå½“è®¾å¤‡ï¼ˆå¦‚ç”µè„‘ï¼‰å¯åŠ¨ä¸”æœªåˆ†é…IPæ—¶ï¼Œä¼šç”¨ &lt;code&gt;0.0.0.0&lt;/code&gt;ä½œä¸ºæºåœ°å€å¹¿æ’­DHCPè¯·æ±‚ï¼Œè¯¢é—®ç½‘ç»œä¸­å¯ç”¨çš„IPåœ°å€ã€‚æ­¤æ—¶è®¾å¤‡èº«ä»½æœªæ˜ï¼Œæ•…ç”¨ &lt;code&gt;0.0.0.0&lt;/code&gt;è¡¨ç¤º&amp;quot;æ— åœ°å€&amp;quot;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤è·¯ç”±&lt;/strong&gt;ï¼šåœ¨è·¯ç”±è¡¨ä¸­ï¼Œ&lt;code&gt;0.0.0.0/0&lt;/code&gt;è¡¨ç¤º&lt;strong&gt;é»˜è®¤è·¯ç”±&lt;/strong&gt;æˆ–&amp;quot;ä»»æ„ç½‘ç»œ&amp;quot;ã€‚å½“æ•°æ®åŒ…çš„ç›®çš„IPä¸è·¯ç”±è¡¨ä¸­å…¶ä»–æ¡ç›®éƒ½ä¸åŒ¹é…æ—¶ï¼Œä¼šä½¿ç”¨è¿™æ¡é»˜è®¤è·¯ç”±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨ç›‘å¬&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å™¨ç¼–ç¨‹ä¸­ï¼Œå°†æœåŠ¡ç»‘å®šåˆ° &lt;code&gt;0.0.0.0&lt;/code&gt;è¡¨ç¤ºç›‘å¬æœ¬æœº&lt;strong&gt;æ‰€æœ‰ç½‘ç»œæ¥å£&lt;/strong&gt;ï¼ˆå¦‚æœ‰çº¿ç½‘å¡ã€æ— çº¿ç½‘å¡ï¼‰ä¸Šçš„è¯·æ±‚ã€‚è¿™ä½¿å¾—å¤–éƒ¨è®¾å¤‡å¯ä»¥é€šè¿‡è¯¥æœåŠ¡å™¨çš„ä»»ä¸€IPåœ°å€è®¿é—®æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨é£é™©&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å™¨é…ç½®ä¸­ï¼Œå°†æœåŠ¡ç»‘å®šåˆ° &lt;code&gt;0.0.0.0&lt;/code&gt;ä¼šç›‘å¬æ‰€æœ‰æ¥å£ï¼Œè¿™å¯èƒ½&lt;strong&gt;æ„å¤–æš´éœ²æœåŠ¡åˆ°å…¬ç½‘&lt;/strong&gt;ï¼Œå¢åŠ å®‰å…¨é£é™©ã€‚å»ºè®®æ ¹æ®å®é™…éœ€æ±‚ï¼Œè°¨æ…é…ç½®é˜²ç«å¢™è§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³• ping é€š&lt;/strong&gt;ï¼šç”±äº &lt;code&gt;0.0.0.0&lt;/code&gt;ä¸ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„å¯è·¯ç”±çš„ç»ˆç«¯è®¾å¤‡ï¼Œä½ æ— æ³• ping é€š &lt;code&gt;0.0.0.0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;0.0.0.0 ä»£è¡¨çš„æ˜¯&amp;quot;è¿˜æ²¡æœ‰èº«ä»½&amp;quot;æˆ–&amp;quot;ä»»æ„èº«ä»½&amp;quot;&lt;/strong&gt;ï¼Œå› æ­¤å®ƒé€‚åˆä½œä¸ºä¸€ä¸ªè¯·æ±‚çš„èµ·ç‚¹ï¼ˆæºåœ°å€ï¼‰ï¼Œä½†æ— æ³•ä½œä¸ºä¸€ä¸ªæ˜ç¡®çš„ã€å¯æŠµè¾¾çš„ç»ˆç‚¹ï¼ˆç›®çš„åœ°å€ï¼‰ã€‚ç½‘ç»œåè®®è¿™æ ·è§„å®šï¼Œæ˜¯ä¸ºäº†é¿å…åœ¨æ•°æ®åŒ…æŠ•é€’æ—¶å‡ºç°æ­§ä¹‰å’Œæ··æ·†ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ ç†è§£ 0.0.0.0 è¿™ä¸ªç‰¹æ®Šåœ°å€çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h2 id="ç½‘ç»œæ¥å£"&gt;ç½‘ç»œæ¥å£
&lt;/h2&gt;&lt;p&gt;å½“ä¸€ä¸ªç¨‹åºéœ€è¦&amp;quot;ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šçš„è¿æ¥&amp;quot;æ—¶ï¼Œæ„å‘³ç€å®ƒå·²ç»åšå¥½å‡†å¤‡ï¼Œ&lt;strong&gt;å¯ä»¥é€šè¿‡è¯¥ä¸»æœºä¸Šä»»ä½•ä¸€ä¸ªæœ‰æ•ˆçš„IPåœ°å€æ¥æ¥æ”¶æ¥è‡ªå¤–éƒ¨å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚&lt;/strong&gt;ã€‚è¿™å°±åƒæ˜¯ä½ å®¶çš„æˆ¿å­åœ¨æ‰€æœ‰å¯èƒ½çš„å¤§é—¨ï¼ˆå‰é—¨ã€åé—¨ã€è½¦åº“é—¨ï¼‰éƒ½å®‰æ’äº†æ¥å¾…äººå‘˜ï¼Œç­‰å¾…ä»»ä½•ä¸€æ‰‡é—¨å¤–æœ‰äººæ•²é—¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£&amp;quot;æ‰€æœ‰ç½‘ç»œæ¥å£&amp;quot;é€šå¸¸åŒ…æ‹¬å“ªäº›ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¥å£ç±»å‹&lt;/th&gt;
&lt;th&gt;å…¸å‹åœ°å€èŒƒå›´/ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;å¯è¢«è®¿é—®çš„èŒƒå›´&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¯å›æ¥å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;127.0.0.1 (IPv4), ::1 (IPv6)&lt;/td&gt;
&lt;td&gt;ä»…æœ¬æœºå†…éƒ¨&lt;/td&gt;
&lt;td&gt;ç”¨äºæœ¬æœºè¿›ç¨‹é—´é€šä¿¡ï¼Œæ•°æ®ä¸ç¦»å¼€ä¸»æœº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰çº¿/æ— çº¿ç½‘å¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;192.168.1.100, 10.0.0.2 (IPv4 ç§æœ‰åœ°å€)&lt;/td&gt;
&lt;td&gt;åŒä¸€å±€åŸŸç½‘æˆ–é€šè¿‡è·¯ç”±/å…¬ç½‘å¯è¾¾&lt;/td&gt;
&lt;td&gt;æœ€å¸¸è§çš„&amp;quot;ç‰©ç†&amp;quot;æˆ–&amp;quot;æ— çº¿&amp;quot;ç½‘ç»œæ¥å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Docker/è™šæ‹Ÿç½‘å¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;172.17.0.1, å…¶ä»–è™šæ‹Ÿç½‘ç»œåˆ†é…çš„åœ°å€&lt;/td&gt;
&lt;td&gt;å–å†³äºè™šæ‹Ÿç½‘ç»œé…ç½®&lt;/td&gt;
&lt;td&gt;ç”¨äºå®¹å™¨æˆ–è™šæ‹Ÿæœºä¹‹é—´çš„é€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸŒ &lt;strong&gt;æ·±å…¥ç†è§£â€œç½‘ç»œæ¥å£â€ä¸â€œç›‘å¬â€&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œæ¥å£&lt;/strong&gt;ï¼šæ˜¯ä½ è®¾å¤‡ä¸Šè¿›è¡Œç½‘ç»œé€šä¿¡çš„&amp;quot;é—¨æˆ·&amp;quot;æˆ–&amp;quot;é€šé“&amp;quot;ã€‚ä¸€å°è®¾å¤‡å¯ä»¥æœ‰å¤šä¸ªç½‘ç»œæ¥å£ï¼Œä¾‹å¦‚&lt;strong&gt;ç‰©ç†ç½‘å¡&lt;/strong&gt;ï¼ˆæœ‰çº¿ä»¥å¤ªç½‘ã€æ— çº¿Wi-Fiï¼‰ã€&lt;strong&gt;è™šæ‹Ÿæ¥å£&lt;/strong&gt;ï¼ˆå¦‚VPNã€Dockeråˆ›å»ºçš„è™šæ‹Ÿç½‘å¡ï¼‰ä»¥åŠ&lt;strong&gt;ç¯å›æ¥å£&lt;/strong&gt;ï¼ˆloopbackï¼Œç”¨äºæœ¬æœºå†…éƒ¨é€šä¿¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘å¬&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å™¨ç¼–ç¨‹ä¸­ï¼Œ&amp;ldquo;ç›‘å¬&amp;quot;æ˜¯ä¸€ä¸ªç‰¹å®šåŠ¨ä½œã€‚æœåŠ¡å™¨ç¨‹åºé€šè¿‡æ“ä½œç³»ç»Ÿ APIï¼ˆå¦‚ &lt;code&gt;socket&lt;/code&gt;, &lt;code&gt;bind&lt;/code&gt;, &lt;code&gt;listen&lt;/code&gt;ï¼‰&lt;strong&gt;åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šçš„ç«¯å£å·ä¸Šç­‰å¾…è¿æ¥è¯·æ±‚&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼ŒWebæœåŠ¡å™¨é€šå¸¸åœ¨80ç«¯å£ç›‘å¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ç¨‹åºé…ç½®ä¸ºç›‘å¬&amp;quot;æ‰€æœ‰ç½‘ç»œæ¥å£&amp;quot;æ—¶ï¼Œå®ƒé€šå¸¸é€šè¿‡ç»‘å®šä¸€ä¸ªç‰¹æ®Šçš„ &lt;strong&gt;IPåœ°å€ &lt;code&gt;0.0.0.0&lt;/code&gt;&lt;/strong&gt; (IPv4) æˆ– &lt;code&gt;::&lt;/code&gt;(IPv6) æ¥å®ç°ã€‚è¿™å‘Šè¯‰æ“ä½œç³»ç»Ÿï¼š&amp;rdquo;&lt;strong&gt;æˆ‘ä¸æŒ‘å…¥å£ï¼Œåªè¦æ˜¯é€šè¿‡æˆ‘æœºå™¨ä¸Šä»»ä½•ä¸€ä¸ªç½‘ç»œæ¥å£ã€å‘å¾€æˆ‘ç›‘å¬çš„è¿™ä¸ªç«¯å£çš„è¿æ¥è¯·æ±‚ï¼Œæˆ‘éƒ½æ¥å—&lt;/strong&gt;&amp;quot;ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ’» &lt;strong&gt;å¸¸è§åœºæ™¯ä¸å‘½ä»¤ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;WebæœåŠ¡å™¨&lt;/strong&gt;ï¼šåƒNginxã€Apacheè¿™ç±»æœåŠ¡ï¼Œé€šå¸¸éœ€è¦ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œä»¥ä¾¿æ—¢èƒ½é€šè¿‡æœ¬åœ°å›ç¯åœ°å€ï¼ˆ127.0.0.1ï¼‰è°ƒè¯•ï¼Œä¹Ÿèƒ½é€šè¿‡å±€åŸŸç½‘IPï¼ˆå¦‚192.168.1.100ï¼‰ä¾›å†…ç½‘ç”¨æˆ·è®¿é—®ï¼Œè¿˜å¯èƒ½é€šè¿‡å…¬ç½‘IPè¢«äº’è”ç½‘ç”¨æˆ·è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ä¸æ‰“å°æœºå…±äº«&lt;/strong&gt;ï¼šWindowsç½‘ç»œå…±äº«æˆ–SambaæœåŠ¡éœ€è¦ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œä»¥å“åº”å±€åŸŸç½‘å†…å…¶ä»–ç”µè„‘çš„è®¿é—®è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“æœåŠ¡å™¨&lt;/strong&gt;ï¼šæŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚åˆ†å¸ƒå¼åº”ç”¨ï¼‰ï¼Œæ•°æ®åº“æœåŠ¡ï¼ˆå¦‚MySQLã€Redisï¼‰å¯èƒ½éœ€è¦ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œä»¥æ¥å—æ¥è‡ªä¸åŒæœåŠ¡å™¨çš„è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸¸æˆè”æœºæˆ–P2Pè½¯ä»¶&lt;/strong&gt;ï¼šè¿™äº›è½¯ä»¶éœ€è¦ç›‘å¬æ‰€æœ‰æ¥å£ï¼Œä»¥ä¾¿ä¸äº’è”ç½‘ä¸Šçš„å…¶ä»–ç©å®¶æˆ–èŠ‚ç‚¹å»ºç«‹ç›´æ¥è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;netstat -an&lt;/code&gt;&lt;/strong&gt; æˆ– &lt;strong&gt;&lt;code&gt;ss -tuln&lt;/code&gt;&lt;/strong&gt; å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­å“ªäº›ç«¯å£æ­£åœ¨ç›‘å¬ï¼Œä»¥åŠå®ƒä»¬ç›‘å¬çš„åœ°å€æ˜¯ç‰¹å®šçš„è¿˜æ˜¯æ‰€æœ‰æ¥å£ï¼ˆæ˜¾ç¤ºä¸º &lt;code&gt;0.0.0.0&lt;/code&gt;æˆ– &lt;code&gt;::&lt;/code&gt;ï¼‰ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;TCP 0.0.0.0:80 LISTENING&lt;/code&gt;è¡¨ç¤ºè¯¥è¿›ç¨‹æ­£åœ¨æ‰€æœ‰IPv4æ¥å£ä¸Šç›‘å¬80ç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;æ£€æŸ¥ç›‘å¬ç«¯å£çš„å‘½ä»¤ç¤ºä¾‹ (Windows)&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;netstat -ano | findstr :80
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ğŸ” &lt;strong&gt;æ£€æŸ¥ç›‘å¬ç«¯å£çš„å‘½ä»¤ç¤ºä¾‹ (Linux)&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ss -tuln | grep :80
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;âš ï¸ &lt;strong&gt;å®‰å…¨æç¤º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†æœåŠ¡ç»‘å®šåˆ°æ‰€æœ‰æ¥å£ï¼ˆ&lt;code&gt;0.0.0.0&lt;/code&gt;ï¼‰è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿæ„å‘³ç€&lt;strong&gt;æš´éœ²çš„ç‚¹å˜å¤šäº†&lt;/strong&gt;ã€‚å› æ­¤åŠ¡å¿…ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åšå¥½&lt;strong&gt;é˜²ç«å¢™é…ç½®&lt;/strong&gt;ï¼Œåªå…è®¸å¿…è¦çš„IPåœ°å€è®¿é—®ç›¸åº”çš„ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;ç¡®ä¿æœåŠ¡æœ¬èº«æœ‰è‰¯å¥½çš„&lt;strong&gt;å®‰å…¨æªæ–½&lt;/strong&gt;ï¼Œå¦‚å¼ºå¯†ç ã€åŠ å¯†é€šä¿¡ï¼ˆTLS/SSLï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæœåŠ¡åªéœ€è¦åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œåº”å°†å…¶ç»‘å®šåˆ° &lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œè¿™æ ·æ›´å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£&amp;quot;ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£&amp;quot;çš„å«ä¹‰ã€‚&lt;/p&gt;
&lt;h2 id="cidr"&gt;CIDR
&lt;/h2&gt;&lt;p&gt;CIDRï¼ˆClassless Inter-Domain Routingï¼Œæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰æ˜¯ç°ä»£äº’è”ç½‘ç½‘ç»œå¯»å€å’Œè·¯ç”±çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚å®ƒé€šè¿‡æ›´çµæ´»çš„IPåœ°å€ç®¡ç†æ–¹å¼ï¼Œæœ‰æ•ˆç¼“è§£äº†IPv4åœ°å€çŸ­ç¼ºé—®é¢˜ï¼Œå¹¶ä¼˜åŒ–äº†ç½‘ç»œè·¯ç”±æ•ˆç‡ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡ŠCIDRã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“œ &lt;strong&gt;CIDR å‡ºç°çš„åŸå› &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ CIDR å‡ºç°ä¹‹å‰ï¼Œäº’è”ç½‘ä¸»è¦ä½¿ç”¨ &lt;strong&gt;æœ‰ç±»ç¼–å€&lt;/strong&gt;ï¼ˆClassful Addressingï¼‰ï¼Œå³IPåœ°å€è¢«åˆ’åˆ†ä¸ºå›ºå®šçš„Aã€Bã€Cã€Dã€Eç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Aç±»&lt;/strong&gt;ï¼šå‰8ä½ä¸ºç½‘ç»œå·ï¼Œå24ä½ä¸ºä¸»æœºå·ï¼Œå­ç½‘æ©ç ä¸º &lt;code&gt;255.0.0.0&lt;/code&gt;ï¼ˆ/8ï¼‰ï¼Œæ”¯æŒå¤§é‡ä¸»æœºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bç±»&lt;/strong&gt;ï¼šå‰16ä½ä¸ºç½‘ç»œå·ï¼Œå16ä½ä¸ºä¸»æœºå·ï¼Œå­ç½‘æ©ç ä¸º &lt;code&gt;255.255.0.0&lt;/code&gt;ï¼ˆ/16ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cç±»&lt;/strong&gt;ï¼šå‰24ä½ä¸ºç½‘ç»œå·ï¼Œå8ä½ä¸ºä¸»æœºå·ï¼Œå­ç½‘æ©ç ä¸º &lt;code&gt;255.255.255.0&lt;/code&gt;ï¼ˆ/24ï¼‰ï¼Œä¸»æœºæ•°é‡è¾ƒå°‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§å›ºå®šåˆ†ç±»æ–¹å¼éå¸¸ä¸çµæ´»ï¼Œå®¹æ˜“å¯¼è‡´IPåœ°å€çš„ä¸¥é‡æµªè´¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªéœ€è¦300ä¸ªIPåœ°å€çš„å…¬å¸ï¼Œåˆ†é…ä¸€ä¸ªCç±»ç½‘æ®µï¼ˆæœ€å¤š254ä¸ªä¸»æœºï¼‰ä¸å¤Ÿç”¨ï¼Œä½†åˆ†é…ä¸€ä¸ªBç±»ç½‘æ®µï¼ˆ65534ä¸ªä¸»æœºï¼‰åˆä¼šé€ æˆæå¤§æµªè´¹ã€‚CIDR çš„æå‡ºï¼Œæ­£æ˜¯ä¸ºäº†å…‹æœæœ‰ç±»ç¼–å€çš„è¿™äº›ç¼ºç‚¹ï¼Œå®ƒæ¶ˆé™¤äº†ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;ğŸ§® &lt;strong&gt;CIDR çš„æ ¸å¿ƒæ¦‚å¿µä¸è¡¨ç¤ºæ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CIDR çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨&lt;strong&gt;å¯å˜é•¿åº¦å­ç½‘æ©ç ï¼ˆVLSMï¼‰&lt;/strong&gt;ï¼Œä¸å†å—é™äºå›ºå®šçš„8ã€16æˆ–24ä½ç½‘ç»œæ©ç ã€‚å®ƒé‡‡ç”¨ &lt;strong&gt;â€œIPåœ°å€/å‰ç¼€é•¿åº¦â€&lt;/strong&gt; çš„æ ¼å¼æ¥è¡¨ç¤ºä¸€ä¸ªç½‘ç»œåœ°å€å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;IPåœ°å€&lt;/strong&gt;ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªç½‘ç»œæ®µçš„èµ·å§‹åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰ç¼€é•¿åº¦&lt;/strong&gt;ï¼ˆPrefix Lengthï¼‰ï¼šç”¨ä¸€ä¸ªæ–œæ ï¼ˆ/ï¼‰åè·Ÿæ•°å­—è¡¨ç¤ºï¼ŒæŒ‡æ˜äº†ç½‘ç»œéƒ¨åˆ†å ç”¨çš„ä½æ•°ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;192.168.1.0/24&lt;/code&gt;è¡¨ç¤ºå‰24ä½æ˜¯ç½‘ç»œå‰ç¼€ï¼Œå‰©ä¸‹çš„8ä½ç”¨äºä¸»æœºç¼–å€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡è¿™ç§è¡¨ç¤ºæ³•ï¼Œå¯ä»¥å¿«é€Ÿè®¡ç®—å‡ºè¯¥ç½‘æ®µçš„å­ç½‘æ©ç ã€åŒ…å«çš„IPåœ°å€èŒƒå›´ä»¥åŠå¯ç”¨çš„ä¸»æœºæ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ”¢ &lt;strong&gt;CIDR åœ°å€å—è®¡ç®—ç†è§£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç†è§£CIDRçš„å…³é”®åœ¨äºæŒæ¡å…¶è®¡ç®—æ–¹å¼ï¼Œä¸‹è¡¨å±•ç¤ºäº†ä¸åŒCIDRå‰ç¼€é•¿åº¦å¯¹åº”çš„å­ç½‘æ©ç å’Œå¯ç”¨IPåœ°å€æ•°é‡ï¼ˆä»¥IPv4ä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CIDR è¡¨ç¤ºæ³•&lt;/th&gt;
&lt;th&gt;å­ç½‘æ©ç &lt;/th&gt;
&lt;th&gt;ç½‘ç»œéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;ä¸»æœºéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;æ€»IPåœ°å€æ•°&lt;/th&gt;
&lt;th&gt;å¯ç”¨ä¸»æœºæ•°&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;/24&lt;/td&gt;
&lt;td&gt;255.255.255.0&lt;/td&gt;
&lt;td&gt;24ä½&lt;/td&gt;
&lt;td&gt;8ä½&lt;/td&gt;
&lt;td&gt;256&lt;/td&gt;
&lt;td&gt;254&lt;/td&gt;
&lt;td&gt;å°å‹å±€åŸŸç½‘ï¼ˆå¦‚å®¶åº­ã€å°åŠå…¬å®¤ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/25&lt;/td&gt;
&lt;td&gt;255.255.255.128&lt;/td&gt;
&lt;td&gt;25ä½&lt;/td&gt;
&lt;td&gt;7ä½&lt;/td&gt;
&lt;td&gt;128&lt;/td&gt;
&lt;td&gt;126&lt;/td&gt;
&lt;td&gt;ä¸­å°å‹å­ç½‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/26&lt;/td&gt;
&lt;td&gt;255.255.255.192&lt;/td&gt;
&lt;td&gt;26ä½&lt;/td&gt;
&lt;td&gt;6ä½&lt;/td&gt;
&lt;td&gt;64&lt;/td&gt;
&lt;td&gt;62&lt;/td&gt;
&lt;td&gt;ä¸­å‹å­ç½‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/27&lt;/td&gt;
&lt;td&gt;255.255.255.224&lt;/td&gt;
&lt;td&gt;27ä½&lt;/td&gt;
&lt;td&gt;5ä½&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;td&gt;30&lt;/td&gt;
&lt;td&gt;å°å‹å­ç½‘ï¼ˆå¦‚éƒ¨é—¨ç½‘ç»œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/28&lt;/td&gt;
&lt;td&gt;255.255.255.240&lt;/td&gt;
&lt;td&gt;28ä½&lt;/td&gt;
&lt;td&gt;4ä½&lt;/td&gt;
&lt;td&gt;16&lt;/td&gt;
&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;å°å‹å­ç½‘ï¼ˆå¦‚ç½‘ç»œè®¾å¤‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;/30&lt;/td&gt;
&lt;td&gt;255.255.255.252&lt;/td&gt;
&lt;td&gt;30ä½&lt;/td&gt;
&lt;td&gt;2ä½&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;ç‚¹å¯¹ç‚¹é“¾è·¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä»¥ &lt;code&gt;192.168.1.0/26&lt;/code&gt;ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­ç½‘æ©ç &lt;/strong&gt;ï¼šå‰ç¼€é•¿åº¦ä¸º26ï¼Œå³å­ç½‘æ©ç ä¸º &lt;code&gt;255.255.255.192&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ä¸»æœºæ•°&lt;/strong&gt;ï¼šä¸»æœºéƒ¨åˆ†æœ‰6ä½ (32-26=6)ï¼Œæ‰€ä»¥æœ‰ 2^(32-26) = 64 ä¸ªIPåœ°å€ï¼Œæ‰£é™¤ç½‘ç»œåœ°å€ï¼ˆ192.168.1.0ï¼‰å’Œå¹¿æ’­åœ°å€ï¼ˆ192.168.1.63ï¼‰ï¼Œå¯ç”¨ä¸»æœºåœ°å€ä¸º62ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPåœ°å€èŒƒå›´&lt;/strong&gt;ï¼š192.168.1.0 åˆ° 192.168.1.63ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;âœ¨ &lt;strong&gt;CIDR çš„ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CIDR å¸¦æ¥äº†å‡ ä¸ªæ˜¾è‘—çš„å¥½å¤„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æé«˜IPåœ°å€åˆ©ç”¨ç‡&lt;/strong&gt;ï¼šå…è®¸æ ¹æ®å®é™…éœ€è¦åˆ†é…åˆé€‚å¤§å°çš„åœ°å€å—ï¼Œæå¤§åœ°å‡å°‘äº†IPåœ°å€çš„æµªè´¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘è·¯ç”±è¡¨æ¡ç›®ï¼ˆè·¯ç”±èšåˆï¼‰&lt;/strong&gt;ï¼šCIDRå…è®¸å°†å¤šä¸ªè¿ç»­çš„å°ç½‘ç»œåœ°å€å—åˆå¹¶ï¼ˆèšåˆï¼‰ä¸ºä¸€ä¸ªæ›´å¤§çš„ç½‘ç»œåœ°å€å—åœ¨è·¯ç”±è¡¨ä¸­é€šå‘Šã€‚ä¾‹å¦‚ï¼Œå°† &lt;code&gt;192.168.0.0/24&lt;/code&gt;ã€&lt;code&gt;192.168.1.0/24&lt;/code&gt;ã€&lt;code&gt;192.168.2.0/24&lt;/code&gt;ã€&lt;code&gt;192.168.3.0/24&lt;/code&gt;èšåˆä¸º &lt;code&gt;192.168.0.0/22&lt;/code&gt;ã€‚è¿™æ˜¾è‘—å‡å°‘äº†å…¨çƒäº’è”ç½‘è·¯ç”±è¡¨çš„è§„æ¨¡ï¼Œæé«˜äº†è·¯ç”±å™¨çš„å¤„ç†å’ŒæŸ¥æ‰¾æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºçµæ´»æ€§&lt;/strong&gt;ï¼šç½‘ç»œç®¡ç†å‘˜å¯ä»¥éå¸¸çµæ´»åœ°åˆ’åˆ†ä¸åŒè§„æ¨¡çš„å­ç½‘ï¼Œæ›´å¥½åœ°é€‚åº”å„ç§è§„æ¨¡çš„ç½‘ç»œéœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸŒ &lt;strong&gt;CIDR çš„å®é™…åº”ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CIDR æŠ€æœ¯å¹¿æ³›åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ISPåˆ†é…IPåœ°å€&lt;/strong&gt;ï¼šäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰å¯ä»¥æ ¹æ®å®¢æˆ·è§„æ¨¡åˆ†é…ä¸åŒå¤§å°çš„CIDRåœ°å€å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ä¸šå†…éƒ¨å­ç½‘åˆ’åˆ†&lt;/strong&gt;ï¼šä¼ä¸šå¯ä»¥åœ¨è·å¾—çš„IPåœ°å€æ®µå†…ï¼Œæ ¹æ®éœ€è¦è¿›ä¸€æ­¥åˆ’åˆ†å­ç½‘ï¼ˆå¦‚ä¸åŒéƒ¨é—¨ã€ä¸åŒæ¥¼å±‚ä½¿ç”¨ä¸åŒå­ç½‘ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±èšåˆ&lt;/strong&gt;ï¼šå¦‚å‰æ‰€è¿°ï¼Œåœ¨ç½‘ç»œè¾¹ç•Œè·¯ç”±å™¨ä¸Šèšåˆè·¯ç”±ï¼Œä¼˜åŒ–ç½‘ç»œæ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºè¶…ç½‘&lt;/strong&gt;ï¼šå°†å¤šä¸ªè¿ç»­çš„Cç±»ç½‘ç»œåˆå¹¶æˆä¸€ä¸ªæ›´å¤§çš„åœ°å€å—ï¼Œç›¸å½“äºåå‘å­ç½‘åˆ’åˆ†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;CIDR ä¸ VLSM å’Œè·¯ç”±èšåˆ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;VLSM&lt;/strong&gt;ï¼šCIDRçš„å®ç°ä¾èµ–äºVLSMã€‚å®ƒå…è®¸åœ¨ä¸€ä¸ªç½‘ç»œå†…ä½¿ç”¨ä¸åŒçš„æ©ç è¿›è¡Œå¤šæ¬¡å­ç½‘åˆ’åˆ†ï¼Œä»è€Œå®ç°æ›´ç²¾ç»†çš„åœ°å€è§„åˆ’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±èšåˆ&lt;/strong&gt;ï¼šæ˜¯CIDRçš„æ ¸å¿ƒåº”ç”¨ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡åœ¨ç½‘ç»œè¾¹ç•Œå°†å¤šä¸ªè¿ç»­åœ°å€å—åˆå¹¶ä¸ºä¸€ä¸ªå‰ç¼€æ›´çŸ­çš„è·¯ç”±é€šå‘Šï¼Œæ¥å‡å°‘è·¯ç”±è¡¨æ¡ç›®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;âš–ï¸ &lt;strong&gt;CIDR çš„æ³¨æ„äº‹é¡¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨CIDRæ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€åˆ†é…è§„åˆ’&lt;/strong&gt;ï¼šä¸åˆç†çš„CIDRåœ°å€å—åˆ†é…å¯èƒ½å¯¼è‡´åç»­æ— æ³•è¿›è¡Œæœ‰æ•ˆçš„è·¯ç”±èšåˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éè¿ç»­åœ°å€é—®é¢˜&lt;/strong&gt;ï¼šè·¯ç”±èšåˆè¦æ±‚è¢«èšåˆçš„åœ°å€å—æ˜¯è¿ç»­çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ§­ &lt;strong&gt;CIDR ä¸ IPv6&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CIDRçš„åŸåˆ™åŒæ ·é€‚ç”¨äº&lt;strong&gt;IPv6&lt;/strong&gt;ã€‚IPv6åœ°å€æœ¬èº«å°±é‡‡ç”¨CIDRè¡¨ç¤ºæ³•ï¼Œä¾‹å¦‚ &lt;code&gt;2001:0db8::/32&lt;/code&gt;ã€‚IPv6å·¨å¤§çš„åœ°å€ç©ºé—´ä½¿å¾—åœ°å€åˆ†é…æ›´åŠ çµæ´»ï¼ŒCIDRåœ¨å…¶ä¸­ç»§ç»­å‘æŒ¥ç€é«˜æ•ˆç®¡ç†è·¯ç”±çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CIDRé€šè¿‡æ¶ˆé™¤ä¼ ç»ŸIPåœ°å€åˆ†ç±»çš„ç•Œé™ï¼Œå¼•å…¥äº†å¯å˜é•¿å­ç½‘æ©ç å’Œâ€œIPåœ°å€/å‰ç¼€é•¿åº¦â€çš„è¡¨ç¤ºæ³•ï¼Œæå¤§åœ°æé«˜äº†IPåœ°å€ç©ºé—´çš„åˆ©ç”¨ç‡ï¼Œå¹¶é€šè¿‡è·¯ç”±èšåˆæœ‰æ•ˆæ§åˆ¶äº†å…¨çƒè·¯ç”±è¡¨çš„è§„æ¨¡ã€‚å®ƒæ˜¯ç°ä»£äº’è”ç½‘èƒ½å¤ŸæŒç»­å‘å±•å’Œé«˜æ•ˆè¿è¡Œçš„é‡è¦åŸºçŸ³ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£CIDRã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„CIDRåº”ç”¨æˆ–è®¡ç®—æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ…¢å¯åŠ¨"&gt;æ…¢å¯åŠ¨
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å½“å‘é€æ–¹å‘ç”Ÿè¶…æ—¶æ—¶ï¼Œä¼šè¿›å…¥æ…¢å¯åŠ¨é˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¶…æ—¶æ—¶åˆ»(tæ—¶åˆ»)ï¼Œæ‹¥å¡çª—å£cwndä»8KBå˜ä¸º1KB(MSSå¤§å°)&lt;/li&gt;
&lt;li&gt;æ…¢å¯åŠ¨é˜¶æ®µï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œcwndå¢åŠ 1ä¸ªMSS&lt;/li&gt;
&lt;li&gt;å½“cwndè¾¾åˆ°æ…¢å¯åŠ¨é˜ˆå€¼ssthreshæ—¶(åŸæ‹¥å¡çª—å£çš„ä¸€åŠï¼Œå³4KB)ï¼Œè¿›å…¥æ‹¥å¡é¿å…é˜¶æ®µ&lt;/li&gt;
&lt;li&gt;åœ¨æ‹¥å¡é¿å…é˜¶æ®µï¼Œæ¯è¿‡ä¸€ä¸ªRTTï¼Œcwndå¢åŠ 1ä¸ªMSS&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è®¡ç®—è¿‡ç¨‹ï¼š
- å‰2ä¸ªRTTå¤„äºæ…¢å¯åŠ¨é˜¶æ®µï¼š1KBâ†’2KBâ†’4KB
- å8ä¸ªRTTå¤„äºæ‹¥å¡é¿å…é˜¶æ®µï¼šæ¯RTTå¢åŠ 1KB
- 4KB + 8KB = 12KB(æ‹¥å¡çª—å£cwnd)
- æœ€ç»ˆå‘é€çª—å£ = min(æ¥æ”¶çª—å£rwnd, æ‹¥å¡çª—å£cwnd) = min(10KB, 12KB) = 10KB&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;TCPæ‹¥å¡æ§åˆ¶çš„æ…¢å¯åŠ¨é˜¶æ®µï¼Œå…¶æ ¸å¿ƒæœºåˆ¶æ˜¯ &lt;strong&gt;â€œæ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œæ‹¥å¡çª—å£ï¼ˆcwndï¼‰å°±å¢åŠ 1ä¸ªMSSâ€&lt;/strong&gt;ï¼Œè¿™ç¡®å®ä¼šå¯¼è‡´ &lt;strong&gt;â€œæ¯ä¸ªå¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰ï¼Œcwndå¤§è‡´ç¿»å€â€&lt;/strong&gt; çš„æ•ˆæœã€‚è¿™æ˜¯å› ä¸ºACKçš„è¿”å›é€Ÿç‡åæ˜ äº†ç½‘ç»œå½“å‰çš„æ•°æ®äº¤ä»˜é€Ÿç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£è¿™ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¨¡æ‹Ÿäº†æ…¢å¯åŠ¨åˆæœŸcwndçš„å¢é•¿æƒ…å†µï¼ˆå‡è®¾åˆå§‹cwnd=2 MSSï¼Œæ— ä¸¢åŒ…ï¼‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘é€è½®æ¬¡&lt;/th&gt;
&lt;th&gt;å‘é€æ•°æ®é‡ (å•ä½: MSS)&lt;/th&gt;
&lt;th&gt;æ”¶åˆ°ACKæ•°é‡&lt;/th&gt;
&lt;th&gt;cwnd å¢é‡ (å•ä½: MSS)&lt;/th&gt;
&lt;th&gt;cwnd å¢é•¿åæ€»å€¼ (å•ä½: MSS)&lt;/th&gt;
&lt;th&gt;é˜¶æ®µè¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åˆå§‹&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;è¿æ¥å»ºç«‹ï¼Œåˆå§‹cwndé€šå¸¸ä¸º1æˆ–2 MSS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¬1ä¸ªRTT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;+2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘é€2ä¸ªæŠ¥æ–‡ï¼Œæ”¶åˆ°2ä¸ªACKï¼Œcwndä»2å˜ä¸º4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¬2ä¸ªRTT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;+4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;cwnd=4ï¼Œå¯å‘é€4ä¸ªæŠ¥æ–‡ï¼Œæ”¶åˆ°4ä¸ªACKåå˜ä¸º8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¬3ä¸ªRTT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;+8&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;16&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;cwnd=8ï¼Œå‘é€8ä¸ªæŠ¥æ–‡ï¼Œæ”¶åˆ°8ä¸ªACKåå˜ä¸º16&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä»è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œ&lt;strong&gt;æ¯ä¸€ä¸ªRTTå†…ï¼Œcwndçš„å¤§å°éƒ½å¤§çº¦æ˜¯ä¸Šä¸€ä¸ªRTTæ—¶çš„ä¸¤å€&lt;/strong&gt;ï¼Œå‘ˆç°å‡ºæŒ‡æ•°çº§å¢é•¿çš„è¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;h3 id="-åŸç†æ·±å…¥åˆ†æ"&gt;ğŸ§  åŸç†æ·±å…¥åˆ†æ
&lt;/h3&gt;&lt;p&gt;è¿™ç§å¢é•¿æ¨¡å¼èƒŒåçš„é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ACKæ˜¯ç¡®è®¤ï¼Œä¹Ÿæ˜¯â€œæŒ‡ä»¤â€&lt;/strong&gt;ï¼šTCPè§„å®šï¼Œå‘é€æ–¹æ¯æ”¶åˆ°ä¸€ä¸ª&lt;strong&gt;å¯¹æ–°æ•°æ®çš„ç¡®è®¤ï¼ˆACKï¼‰&lt;/strong&gt;ï¼Œå°±å¯ä»¥å°†cwndå¢åŠ &lt;strong&gt;æœ€å¤š&lt;/strong&gt;1ä¸ªMSSã€‚è¿™æ„å‘³ç€ACKçš„åˆ°è¾¾é€Ÿç‡ç›´æ¥å†³å®šäº†cwndçš„å¢é•¿é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RTTä¸ACKçš„å…³ç³»&lt;/strong&gt;ï¼šåœ¨ä¸€ä¸ªç†æƒ³çš„ã€æ— ä¸¢åŒ…çš„ç½‘ç»œä¸­ï¼Œå‘é€æ–¹åœ¨ä¸€ä¸ªRTTå¼€å§‹æ—¶å‘é€ä¸€æ•´ä¸ªçª—å£çš„æ•°æ®ï¼ˆ&lt;code&gt;cwnd&lt;/code&gt;ä¸ªæŠ¥æ–‡ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šåœ¨è¿™ä¸ªRTTç»“æŸæ—¶ï¼Œ&lt;strong&gt;æ”¶åˆ°å¤§è‡´ç›¸åŒæ•°é‡çš„ACK&lt;/strong&gt;ï¼ˆå‡è®¾æ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡å°±å›å¤ä¸€ä¸ªACKï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å­¦å…³ç³»&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è®¾å½“å‰RTTå¼€å§‹æ—¶ï¼Œ&lt;code&gt;cwnd = N&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å‘é€æ–¹ä¼šå‘å‡º&lt;code&gt;N&lt;/code&gt;ä¸ªæ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªRTTåï¼Œå‘é€æ–¹é¢„è®¡ä¼šæ”¶åˆ°&lt;code&gt;N&lt;/code&gt;ä¸ªACKã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®æ…¢å¯åŠ¨ç®—æ³•ï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªACKï¼Œ&lt;code&gt;cwnd&lt;/code&gt;å¢åŠ 1ã€‚å› æ­¤ï¼Œ&lt;code&gt;cwnd&lt;/code&gt;æ€»å…±å¢åŠ äº†&lt;code&gt;N&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥ï¼Œä¸‹ä¸€ä¸ªRTTå¼€å§‹æ—¶ï¼Œ&lt;code&gt;cwnd = N + N = 2N&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ï¼Œä»æ•ˆæœä¸Šçœ‹ï¼Œ&lt;strong&gt;æ¯ç»è¿‡ä¸€ä¸ªRTTï¼Œæ‹¥å¡çª—å£çš„å¤§å°å°±ä¼šç¿»å€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦è¯´æ˜"&gt;âš ï¸ é‡è¦è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;â€œæ…¢å¯åŠ¨â€å¹¶ä¸æ…¢&lt;/strong&gt;ï¼šè¿™ä¸ªåå­—æœ‰ç‚¹è¯¯å¯¼æ€§ã€‚å®ƒæŒ‡çš„æ˜¯å¼€å§‹æ—¶ä»¥å¾ˆå°çš„çª—å£ï¼ˆ1æˆ–2ä¸ªMSSï¼‰â€œè°¨æ…â€å¯åŠ¨ï¼Œä½†å…¶&lt;strong&gt;å¢é•¿é€Ÿç‡ï¼ˆæŒ‡æ•°å¢é•¿ï¼‰å…¶å®éå¸¸å¿«&lt;/strong&gt;ï¼Œç›®çš„æ˜¯ä¸ºäº†è¿…é€Ÿæ¢æµ‹å‡ºç½‘ç»œçš„å¯ç”¨å¸¦å®½å®¹é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç°å®ä¸–ç•Œçš„é™åˆ¶&lt;/strong&gt;ï¼šè¿™ç§ç†æƒ³çš„ç¿»å€å¢é•¿ä¸ä¼šæ— é™æŒç»­ä¸‹å»ã€‚å®ƒä¸»è¦å‘ç”Ÿåœ¨ç½‘ç»œçŠ¶å†µè‰¯å¥½ã€æ²¡æœ‰ä¸¢åŒ…ã€ä¸”æ¥æ”¶çª—å£ï¼ˆrwndï¼‰è¶³å¤Ÿå¤§çš„æƒ…å†µä¸‹ã€‚å¢é•¿è¿‡ç¨‹ä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¸‹åœæ­¢ï¼š
&lt;ul&gt;
&lt;li&gt;è¾¾åˆ°&lt;strong&gt;æ…¢å¯åŠ¨é˜ˆå€¼ï¼ˆssthreshï¼‰&lt;/strong&gt;ï¼Œéšåè½¬ä¸º&lt;strong&gt;æ‹¥å¡é¿å…&lt;/strong&gt;é˜¶æ®µï¼ˆçº¿æ€§å¢é•¿ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æµ‹åˆ°&lt;strong&gt;æ•°æ®åŒ…ä¸¢å¤±&lt;/strong&gt;ï¼ˆè¶…æ—¶æˆ–æ”¶åˆ°3ä¸ªé‡å¤ACKï¼‰ï¼Œè¿™æ—¶ä¼šè§¦å‘æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œå¤§å¹…å‡å°&lt;code&gt;cwnd&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šçš„è§£é‡Šå’Œæ¨¡æ‹Ÿèƒ½å¸®åŠ©ä½ ç†è§£TCPæ…¢å¯åŠ¨ä¸­è¿™ä¸ªå·§å¦™çš„è®¾è®¡ï¼&lt;/p&gt;
&lt;h2 id="åˆ†ç»„"&gt;åˆ†ç»„
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://uploadfiles.nowcoder.com/images/20200804/6868944_1596526123251_04396A86C0DE00739CABA3FA8AF9F7CD"
loading="lazy"
alt="img"
&gt;&lt;/p&gt;
&lt;h2 id="ospf--bgp"&gt;OSPF &amp;amp; BGP
&lt;/h2&gt;&lt;p&gt;BGPï¼ˆè¾¹ç•Œç½‘å…³åè®®ï¼‰å’Œ OSPFï¼ˆå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼‰æ˜¯ç½‘ç»œä¸–ç•Œä¸­ä¸¤ä½é‡è¦çš„â€œè§’è‰²â€ï¼Œä½†å®ƒä»¬è´Ÿè´£çš„ä»»åŠ¡å’Œå·¥ä½œçš„â€œåœ°ç›˜â€å¾ˆä¸ä¸€æ ·ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å¯¹æ¯”ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;OSPF (å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆ)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;BGP (è¾¹ç•Œç½‘å…³åè®®)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åè®®ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…éƒ¨ç½‘å…³åè®® (IGP)&lt;/td&gt;
&lt;td&gt;å¤–éƒ¨ç½‘å…³åè®® (EGP)ï¼Œå”¯ä¸€ä¸»æµ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒå®šä½ä¸å·¥ä½œèŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è´Ÿè´£&lt;strong&gt;å•ä¸ªè‡ªæ²»ç³»ç»Ÿ (AS)&lt;/strong&gt; å†…éƒ¨çš„è·¯ç”±&lt;/td&gt;
&lt;td&gt;è´Ÿè´£&lt;strong&gt;ä¸åŒè‡ªæ²»ç³»ç»Ÿ (AS) ä¹‹é—´&lt;/strong&gt;çš„è·¯ç”±äº¤æ¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æ³•åŸºç¡€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é“¾è·¯çŠ¶æ€ (Link-State)&lt;/strong&gt; ç®—æ³•&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·¯å¾„å‘é‡ (Path-Vector)&lt;/strong&gt; ç®—æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¯ç”±é€‰æ‹©ä¾æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼€é”€ (Cost)&lt;/strong&gt;ï¼Œé€šå¸¸åŸºäºé“¾è·¯å¸¦å®½ï¼ˆå¸¦å®½è¶Šé«˜ï¼Œå¼€é”€è¶Šå°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·¯å¾„å±æ€§ (Path Attributes)&lt;/strong&gt; + &lt;strong&gt;ç­–ç•¥&lt;/strong&gt;ï¼ˆå¦‚ AS_Path, Local_Pref, MEDï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº•å±‚åè®®ä¸ç«¯å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥åŸºäº &lt;strong&gt;IP&lt;/strong&gt; åè®®ï¼ˆåè®®å·89ï¼‰&lt;/td&gt;
&lt;td&gt;åŸºäº &lt;strong&gt;TCP&lt;/strong&gt; åè®®ï¼ˆç«¯å£å·179ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¯ç”±æ›´æ–°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ›´æ–°&lt;/strong&gt; + å®šæœŸï¼ˆ30åˆ†é’Ÿï¼‰é“¾è·¯çŠ¶æ€åˆ·æ–°&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¢é‡è§¦å‘æ›´æ–°&lt;/strong&gt;ï¼ˆä»…å½“è·¯ç”±å˜åŒ–æ—¶å‘é€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¶æ•›é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿«&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ…¢&lt;/strong&gt;ï¼ˆå¼ºè°ƒç¨³å®šæ€§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é‚»å±…å»ºç«‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;strong&gt;HelloæŠ¥æ–‡&lt;/strong&gt;è‡ªåŠ¨å‘ç°åŒä¸€ç½‘æ®µé‚»å±…&lt;/td&gt;
&lt;td&gt;å¿…é¡»&lt;strong&gt;æ‰‹åŠ¨é…ç½®&lt;/strong&gt;é‚»å±…IP&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜²ç¯æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾é è‡ªèº«&lt;strong&gt;SPFç®—æ³•&lt;/strong&gt;å’Œ&lt;strong&gt;åŒºåŸŸåˆ’åˆ†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;strong&gt;AS_Path&lt;/strong&gt; å±æ€§ï¼ˆè‹¥æ”¶åˆ°è·¯ç”±åŒ…å«è‡ªèº«ASå·åˆ™æ‹’ç»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼ä¸šå†…ç½‘ã€å›­åŒºç½‘ã€æ•°æ®ä¸­å¿ƒå†…éƒ¨&lt;/td&gt;
&lt;td&gt;äº’è”ç½‘éª¨å¹²ç½‘ã€è¿è¥å•†äº’è”ã€ä¼ä¸šå¤šå‡ºå£ç½‘ç»œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;çœ‹å®Œäº†è¡¨æ ¼ï¼Œæˆ‘ä»¬æ¥è¿›ä¸€æ­¥äº†è§£å®ƒä»¬çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒå®šä½ä¸è®¾è®¡ç›®æ ‡"&gt;ğŸ§  æ ¸å¿ƒå®šä½ä¸è®¾è®¡ç›®æ ‡
&lt;/h3&gt;&lt;p&gt;OSPF å’Œ BGP æœ€æ ¹æœ¬çš„å·®å¼‚æºäºå…¶è®¾è®¡ç›®æ ‡å’Œå·¥ä½œçš„èŒƒå›´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt; åƒæ˜¯å…¬å¸å†…éƒ¨çš„&lt;strong&gt;é«˜æ•ˆç®¡å®¶&lt;/strong&gt;ï¼Œå®ƒçš„ç›®æ ‡æ˜¯åœ¨ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰å†…éƒ¨ï¼ˆå¦‚ä¸€ä¸ªä¼ä¸šã€ä¸€ä¸ªæ ¡å›­ç½‘ï¼‰ï¼Œ&lt;strong&gt;å¿«é€Ÿè®¡ç®—å‡ºä¸€æ¡â€œæœ€ä¼˜è·¯å¾„â€&lt;/strong&gt;ï¼ˆé€šå¸¸æ˜¯å¸¦å®½æœ€é«˜çš„è·¯å¾„ï¼‰ï¼Œç¡®ä¿å†…éƒ¨ç½‘ç»œé«˜æ•ˆã€ç¨³å®šåœ°è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt; åˆ™åƒæ˜¯ä¸åŒå…¬å¸æˆ–å›½å®¶ä¹‹é—´çš„&lt;strong&gt;å¤–äº¤å®˜&lt;/strong&gt;ï¼Œå®ƒçš„æ ¸å¿ƒä»»åŠ¡æ˜¯åœ¨ä¸åŒçš„è‡ªæ²»ç³»ç»Ÿä¹‹é—´ï¼ˆå¦‚ä¸­å›½ç”µä¿¡å’Œä¸­å›½è”é€šä¹‹é—´ã€ä½ çš„å…¬å¸ç½‘ç»œå’Œäº’è”ç½‘ä¹‹é—´ï¼‰&lt;strong&gt;äº¤æ¢è·¯ç”±ä¿¡æ¯&lt;/strong&gt;ã€‚å®ƒ&lt;strong&gt;ä¸è¿½æ±‚â€œæœ€å¿«â€ï¼Œè€Œæ˜¯è¿½æ±‚â€œæœ€åˆé€‚ã€æœ€ç¨³å®šã€æœ€å¯æ§â€&lt;/strong&gt;ï¼Œå…è®¸ç½‘ç»œç®¡ç†å‘˜åŸºäºå¤æ‚çš„ç­–ç•¥ï¼ˆå¦‚æˆæœ¬ã€å®‰å…¨ã€å•†ä¸šåè®®ï¼‰æ¥å†³å®šæµé‡å¦‚ä½•è·¨è¶Šä¸åŒçš„ç½‘ç»œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è·¯ç”±è®¡ç®—ä¸æ›´æ–°æœºåˆ¶"&gt;ğŸ”„ è·¯ç”±è®¡ç®—ä¸æ›´æ–°æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;å®ƒä»¬çš„â€œæ€ç»´æ–¹å¼â€å’Œâ€œæ²Ÿé€šæ–¹å¼â€ä¹Ÿå¤§ç›¸å¾„åº­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt; æ˜¯ä¸€ä¸ªâ€œ&lt;strong&gt;ä¿¡æ¯å…±äº«è€…&lt;/strong&gt;â€ã€‚ç½‘ç»œä¸­çš„æ¯å°OSPFè·¯ç”±å™¨éƒ½ä¼šå°†è‡ªå·±ç›´è¿çš„&lt;strong&gt;é“¾è·¯çŠ¶æ€&lt;/strong&gt;ï¼ˆå¦‚å¸¦å®½ã€å¼€é”€ï¼‰é€šå‘Šç»™åŒºåŸŸå†…çš„æ‰€æœ‰å…¶ä»–è·¯ç”±å™¨ã€‚è¿™æ ·ï¼Œæ¯å°è·¯ç”±å™¨éƒ½æ‹¥æœ‰ä¸€å¼ &lt;strong&gt;å®Œæ•´çš„ç½‘ç»œæ‹“æ‰‘å›¾&lt;/strong&gt;ï¼Œç„¶åä½¿ç”¨&lt;strong&gt;SPFï¼ˆæœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼‰ç®—æ³•&lt;/strong&gt;è‡ªå·±è®¡ç®—å‡ºé€šå¾€æ‰€æœ‰ç›®æ ‡çš„æœ€ä½³è·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt; æ˜¯ä¸€ä¸ªâ€œ&lt;strong&gt;è·¯ç”±ä¼ é€’è€…&lt;/strong&gt;â€ã€‚å®ƒæœ¬èº«ä¸è®¡ç®—è·¯å¾„ï¼Œè€Œæ˜¯&lt;strong&gt;äº¤æ¢å·²çŸ¥çš„è·¯ç”±æ¡ç›®&lt;/strong&gt;ã€‚æ¯æ¡è·¯ç”±éƒ½é™„å¸¦ä¸°å¯Œçš„&lt;strong&gt;è·¯å¾„å±æ€§&lt;/strong&gt;ï¼Œå¦‚AS_Pathï¼ˆè®°å½•äº†è¯¥è·¯ç”±ç»è¿‡äº†å“ªäº›ASï¼‰ã€Next_Hopï¼ˆä¸‹ä¸€è·³åœ°å€ï¼‰ã€Local_Prefï¼ˆæœ¬åœ°ä¼˜å…ˆçº§ï¼ŒæŒ‡ç¤ºå“ªæ¡è·¯ç”±æ›´ä¼˜å…ˆï¼‰ç­‰ã€‚BGPè·¯ç”±å™¨æ ¹æ®è¿™äº›å±æ€§å’Œç®¡ç†å‘˜é…ç½®çš„&lt;strong&gt;ç­–ç•¥&lt;/strong&gt;æ¥å†³å®šæœ€ä¼˜è·¯ç”±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ”¶æ•›é€Ÿåº¦"&gt;âš¡ æ”¶æ•›é€Ÿåº¦
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æ”¶æ•›&lt;/strong&gt;æŒ‡çš„æ˜¯ç½‘ç»œæ‹“æ‰‘å‘ç”Ÿå˜åŒ–åï¼Œæ‰€æœ‰è·¯ç”±å™¨é‡æ–°ç¨³å®šä¸‹æ¥çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt; çš„æ”¶æ•›é€Ÿåº¦&lt;strong&gt;è¾ƒå¿«&lt;/strong&gt;ã€‚å› ä¸ºåœ¨å•ä¸ªASå†…éƒ¨ï¼Œä¸€æ—¦æŸæ¡é“¾è·¯å‡ºç°æ•…éšœï¼Œè¿™ä¸ªä¿¡æ¯å¯ä»¥é€šè¿‡æ´ªæ³›æœºåˆ¶å¿«é€Ÿå‘ŠçŸ¥æ‰€æœ‰è·¯ç”±å™¨ï¼Œå®ƒä»¬ä¾¿èƒ½ç«‹å³é‡æ–°è®¡ç®—è·¯ç”±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt; çš„æ”¶æ•›é€Ÿåº¦&lt;strong&gt;è¾ƒæ…¢&lt;/strong&gt;ã€‚è¿™æ˜¯å‡ºäºå¯¹å…¨çƒäº’è”ç½‘&lt;strong&gt;ç¨³å®šæ€§&lt;/strong&gt;çš„è€ƒè™‘ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœäº’è”ç½‘ä¸ŠæŸæ¡é“¾è·¯æŠ–åŠ¨ä¸€ä¸‹ï¼Œå°±ç«‹å³å¯¼è‡´å…¨çƒè·¯ç”±è¡¨å‰§çƒˆå˜åŒ–ï¼Œæ•´ä¸ªç½‘ç»œä¼šéå¸¸ä¸ç¨³å®šã€‚BGPçš„å¢é‡æ›´æ–°å’Œå¤æ‚çš„ç­–ç•¥è®¡ç®—è¿‡ç¨‹ä¹Ÿå†³å®šäº†å…¶æ”¶æ•›é€Ÿåº¦ä¸å¦‚OSPFã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‚»å±…å»ºç«‹æ–¹å¼"&gt;ğŸ¤ é‚»å±…å»ºç«‹æ–¹å¼
&lt;/h3&gt;&lt;p&gt;å¦‚ä½•å»ºç«‹ä¿¡ä»»å…³ç³»å¹¶å¼€å§‹é€šä¿¡ï¼Œä¸¤è€…æ–¹å¼ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt; è·¯ç”±å™¨åœ¨åŒä¸€ä¸ªå¹¿æ’­åŸŸå†…å¯ä»¥é€šè¿‡å‘é€ &lt;strong&gt;HelloæŠ¥æ–‡&lt;/strong&gt;è‡ªåŠ¨å‘ç°é‚»å±…ï¼Œå¹¶æœ€ç»ˆå»ºç«‹é‚»æ¥å…³ç³»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt; è·¯ç”±å™¨ä¹‹é—´&lt;strong&gt;å¿…é¡»ç”±ç®¡ç†å‘˜æ‰‹åŠ¨æŒ‡å®šé‚»å±…çš„IPåœ°å€&lt;/strong&gt;æ‰èƒ½å»ºç«‹TCPè¿æ¥ï¼Œå› ä¸ºé‚»å±…å¾ˆå¯èƒ½åœ¨é¥è¿œçš„å¦ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿä¸­ï¼Œæ— æ³•è‡ªåŠ¨å‘ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é˜²ç¯æœºåˆ¶"&gt;ğŸ›¡ï¸ é˜²ç¯æœºåˆ¶
&lt;/h3&gt;&lt;p&gt;é˜²æ­¢è·¯ç”±ç¯è·¯æ˜¯è·¯ç”±åè®®çš„åŸºæœ¬è¦æ±‚ï¼Œä½†å®ç°æ–¹å¼ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt; é€šè¿‡å…¶åŸºç¡€çš„ &lt;strong&gt;SPFç®—æ³•&lt;/strong&gt;ï¼ˆä»æ•°å­¦ä¸Šé¿å…äº†ç¯è·¯ï¼‰å’Œ&lt;strong&gt;å±‚æ¬¡åŒ–çš„åŒºåŸŸè®¾è®¡&lt;/strong&gt;ï¼ˆè¦æ±‚æ‰€æœ‰åŒºåŸŸå¿…é¡»ä¸éª¨å¹²åŒºåŸŸArea 0ç›¸è¿ï¼‰æ¥é˜²æ­¢ç¯è·¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt; é€šè¿‡ &lt;strong&gt;AS_Pathå±æ€§&lt;/strong&gt;æ¥é˜²æ­¢ç¯è·¯ã€‚å½“ä¸€å°BGPè·¯ç”±å™¨æ”¶åˆ°ä¸€æ¡è·¯ç”±æ›´æ–°æ—¶ï¼Œä¼šæ£€æŸ¥AS_Pathåˆ—è¡¨ã€‚å¦‚æœåœ¨è¿™ä¸ªåˆ—è¡¨ä¸­å‘ç°äº†&lt;strong&gt;æœ¬è‡ªæ²»ç³»ç»Ÿçš„ASå·&lt;/strong&gt;ï¼Œè¯´æ˜è¿™æ¡è·¯ç”±å·²ç»ç»è¿‡äº†è‡ªå·±ï¼Œå½¢æˆäº†ç¯è·¯ï¼Œä¾¿ä¼šä¸¢å¼ƒè¯¥è·¯ç”±æ›´æ–°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸŒ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt;ï¼šé€šå¸¸æ˜¯&lt;strong&gt;ä¼ä¸šå†…ç½‘ã€å¤§å‹å›­åŒºç½‘ã€æ•°æ®ä¸­å¿ƒå†…éƒ¨&lt;/strong&gt;çš„é¦–é€‰IGPåè®®ï¼Œç”¨äºå¿«é€Ÿé«˜æ•ˆåœ°æ‰“é€šå†…éƒ¨ç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt;ï¼šåˆ™æ˜¯&lt;strong&gt;äº’è”ç½‘çš„åŸºçŸ³&lt;/strong&gt;ã€‚å‡ ä¹æ‰€æœ‰&lt;strong&gt;äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰ä¹‹é—´&lt;/strong&gt;ã€æ‹¥æœ‰&lt;strong&gt;å¤šçº¿äº’è”ç½‘æ¥å…¥çš„ä¼ä¸š&lt;/strong&gt;ï¼ˆå¦‚åŒæ—¶æ¥å…¥ç”µä¿¡å’Œè”é€šï¼‰éƒ½ä¼šä½¿ç”¨BGPã€‚æ­¤å¤–ï¼Œè¶…å¤§å‹ä¼ä¸šçš„ä¸åŒåˆ†å…¬å¸å¦‚æœæ‹¥æœ‰ç‹¬ç«‹çš„ASï¼Œå®ƒä»¬ä¹‹é—´äº’è”ä¹Ÿå¯èƒ½è¿è¡ŒBGPã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸€ä¸‹"&gt;ğŸ’ æ€»ç»“ä¸€ä¸‹
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OSPF&lt;/strong&gt; æ˜¯&lt;strong&gt;å†…éƒ¨ç½‘ç»œ&lt;/strong&gt;çš„â€œ&lt;strong&gt;é«˜æ•ˆç®¡å®¶&lt;/strong&gt;â€ï¼Œè¿½æ±‚&lt;strong&gt;é€Ÿåº¦ä¸æ•ˆç‡&lt;/strong&gt;ï¼Œç›®æ ‡æ˜¯&lt;strong&gt;å¿«é€Ÿè®¡ç®—æœ€çŸ­è·¯å¾„&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BGP&lt;/strong&gt; æ˜¯&lt;strong&gt;ç½‘ç»œäº’è”&lt;/strong&gt;çš„â€œ&lt;strong&gt;ç­–ç•¥å¤–äº¤å®˜&lt;/strong&gt;â€ï¼Œè¿½æ±‚&lt;strong&gt;ç¨³å®šä¸æ§åˆ¶&lt;/strong&gt;ï¼Œç›®æ ‡æ˜¯&lt;strong&gt;åŸºäºç­–ç•¥é€‰æ‹©æœ€ä½³è·¯å¾„&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è®¸å¤šå®é™…ç½‘ç»œç¯å¢ƒä¸­ï¼ŒOSPFå’ŒBGPæ˜¯&lt;strong&gt;ååŒå·¥ä½œ&lt;/strong&gt;çš„ã€‚å¸¸è§çš„è®¾è®¡æ˜¯ï¼š&lt;strong&gt;å†…éƒ¨ç½‘ç»œä½¿ç”¨OSPFæ¥ä¿è¯é«˜æ•ˆé€šä¿¡ï¼Œè¾¹ç•Œè·¯ç”±å™¨ä¸Šåˆ™è¿è¡ŒBGPï¼Œç”¨äºä¸å¤–éƒ¨å…¶ä»–ASï¼ˆå¦‚è¿è¥å•†ï¼‰äº¤æ¢è·¯ç”±ä¿¡æ¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£BGPå’ŒOSFçš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h2 id="igp"&gt;IGP
&lt;/h2&gt;&lt;p&gt;é™¤äº† OSPFï¼Œå¸¸è§çš„&lt;strong&gt;å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰&lt;/strong&gt; è¿˜æœ‰ &lt;strong&gt;RIP&lt;/strong&gt;ã€&lt;strong&gt;IS-IS&lt;/strong&gt; å’Œ &lt;strong&gt;EIGRP&lt;/strong&gt;ã€‚å®ƒä»¬ä¸»è¦åœ¨è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰å†…éƒ¨äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒä»¬çš„ä¸»è¦ç‰¹ç‚¹ï¼Œå¸®ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åè®®åç§°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åè®®ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸»è¦ç‰¹ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åº¦é‡æ ‡å‡†&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ”¶æ•›é€Ÿåº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RIP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·ç¦»çŸ¢é‡è·¯ç”±åè®® (Distance-Vector)&lt;/td&gt;
&lt;td&gt;é€šè¿‡å‘¨æœŸæ€§åœ°å¹¿æ’­æ•´ä¸ªè·¯ç”±è¡¨è¿›è¡Œæ›´æ–°ï¼Œ&lt;strong&gt;æœ€å¤§è·³æ•°é™åˆ¶ä¸º15è·³&lt;/strong&gt;ã€‚é…ç½®ç®€å•ï¼Œä½†å¯èƒ½æ”¶æ•›æ…¢ï¼Œä¸”å­˜åœ¨è·¯ç”±ç¯è·¯é£é™©ã€‚&lt;/td&gt;
&lt;td&gt;è·³æ•° (Hop Count)&lt;/td&gt;
&lt;td&gt;æ…¢&lt;/td&gt;
&lt;td&gt;å°å‹ç½‘ç»œã€ç®€å•æ‹“æ‰‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;OSPF&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é“¾è·¯çŠ¶æ€è·¯ç”±åè®® (Link-State)&lt;/td&gt;
&lt;td&gt;é€šè¿‡æ´ªæ³›é“¾è·¯çŠ¶æ€ä¿¡æ¯ï¼Œæ„å»ºç½‘ç»œæ‹“æ‰‘å›¾ï¼Œå¹¶ä½¿ç”¨ &lt;strong&gt;Dijkstra ç®—æ³•&lt;/strong&gt;è®¡ç®—æœ€çŸ­è·¯å¾„æ ‘ã€‚æ”¯æŒ&lt;strong&gt;åŒºåŸŸåˆ’åˆ†&lt;/strong&gt;ã€&lt;strong&gt;VLSM&lt;/strong&gt;ï¼Œæ”¶æ•›å¿«ï¼Œæ— ç¯è·¯ï¼Œæ‰©å±•æ€§å¥½ã€‚&lt;/td&gt;
&lt;td&gt;é“¾è·¯å¼€é”€ (Cost)&lt;/td&gt;
&lt;td&gt;å¿«&lt;/td&gt;
&lt;td&gt;ä¸­å¤§å‹ç½‘ç»œã€ä¼ä¸šç½‘ã€å›­åŒºç½‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;IS-IS&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é“¾è·¯çŠ¶æ€è·¯ç”±åè®® (Link-State)&lt;/td&gt;
&lt;td&gt;ä¸ OSPF ç±»ä¼¼ï¼Œä¹Ÿä½¿ç”¨ &lt;strong&gt;SPF ç®—æ³•&lt;/strong&gt;è®¡ç®—è·¯å¾„ã€‚æœ€åˆä¸º &lt;strong&gt;OSI&lt;/strong&gt; ç½‘ç»œè®¾è®¡ï¼Œåæ‰©å±•æ”¯æŒ IP ç½‘ç»œã€‚åè®®ç»“æ„è¢«è®¤ä¸ºæ¯” OSPF æ›´ç®€æ´ã€‚&lt;/td&gt;
&lt;td&gt;åº¦é‡å€¼ (Metric)&lt;/td&gt;
&lt;td&gt;å¿«&lt;/td&gt;
&lt;td&gt;å¤§å‹ &lt;strong&gt;ISP&lt;/strong&gt; éª¨å¹²ç½‘ç»œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EIGRP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜çº§è·ç¦»çŸ¢é‡åè®® (æˆ–ç§°æ··åˆå‹)&lt;/td&gt;
&lt;td&gt;Cisco ç§æœ‰åè®®ã€‚ç»“åˆäº†è·ç¦»çŸ¢é‡å’Œé“¾è·¯çŠ¶æ€çš„ç‰¹ç‚¹ï¼Œä½¿ç”¨&lt;strong&gt;å¼¥æ•£æ›´æ–°ç®—æ³•ï¼ˆDUALï¼‰&lt;/strong&gt;ã€‚æ”¯æŒ&lt;strong&gt;éç­‰æˆæœ¬è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ã€‚&lt;/td&gt;
&lt;td&gt;å¤åˆåº¦é‡ (å¸¦å®½ã€å»¶è¿Ÿç­‰)&lt;/td&gt;
&lt;td&gt;éå¸¸å¿«&lt;/td&gt;
&lt;td&gt;ä¸­å¤§å‹ç½‘ç»œã€ç‰¹åˆ«æ˜¯ä»¥ Cisco è®¾å¤‡ä¸ºä¸»çš„ç½‘ç»œç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©-igp"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹© IGP
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§ IGPï¼Œä¸»è¦çœ‹ä½ çš„ç½‘ç»œéœ€æ±‚å’Œç¯å¢ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œè§„æ¨¡&lt;/strong&gt;ï¼šå°å‹ç½‘ç»œå¯è€ƒè™‘ RIPï¼›ä¸­å¤§å‹ç½‘ç»œåˆ™æ›´é€‚åˆ OSPFã€EIGRP æˆ– IS-ISã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¶æ•›é€Ÿåº¦&lt;/strong&gt;ï¼šè‹¥è¦æ±‚å¿«é€Ÿé€‚åº”ç½‘ç»œå˜åŒ–ï¼ŒOSPFã€EIGRP å’Œ IS-IS æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾å¤‡å…¼å®¹æ€§&lt;/strong&gt;ï¼šOSPF å’Œ IS-IS æ˜¯å¤šå‚å•†æ ‡å‡†åè®®ï¼›EIGRP ä¸»è¦ç”± Cisco è®¾å¤‡æ”¯æŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå¤æ‚åº¦&lt;/strong&gt;ï¼šå¯¹äºéœ€è¦åˆ†å±‚è®¾è®¡çš„å¤§å‹å¤æ‚ç½‘ç»œï¼ŒOSPF å’Œ IS-IS æ”¯æŒåŒºåŸŸåˆ’åˆ†ï¼Œèƒ½æœ‰æ•ˆç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ“š æ€»ç»“
&lt;/h3&gt;&lt;p&gt;IGP æ˜¯è‡ªæ²»ç³»ç»Ÿå†…éƒ¨è¿›è¡Œè·¯ç”±ä¿¡æ¯äº¤æ¢çš„åè®®ï¼Œä¸»è¦è´Ÿè´£åœ¨ASå†…éƒ¨å‘ç°å’Œè®¡ç®—è·¯ç”±ã€‚å¸¸è§çš„ IGP åè®®ä¸»è¦æœ‰ RIPã€OSPFã€IS-IS å’Œ EIGRPï¼Œå®ƒä»¬åœ¨ä¸åŒè§„æ¨¡çš„ç½‘ç»œä¸­æœ‰å„è‡ªçš„é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰ã€‚&lt;/p&gt;
&lt;h2 id="http2-äºŒè¿›åˆ¶åˆ†å¸§"&gt;HTTP2 äºŒè¿›åˆ¶åˆ†å¸§
&lt;/h2&gt;&lt;p&gt;HTTP/2 çš„&lt;strong&gt;äºŒè¿›åˆ¶åˆ†å¸§å±‚&lt;/strong&gt;æ˜¯å…¶æ€§èƒ½é£è·ƒçš„æ ¸å¿ƒã€‚å®ƒå½»åº•æ”¹å˜äº†åº”ç”¨å±‚ï¼ˆHTTPï¼‰ä¸ä¼ è¾“å±‚ï¼ˆTCPï¼‰ä¹‹é—´æ•°æ®çš„ç»„ç»‡æ–¹å¼ï¼Œä»å¯è¯»çš„æ–‡æœ¬æ ¼å¼è½¬å˜ä¸ºé«˜æ•ˆçš„äºŒè¿›åˆ¶æ ¼å¼ã€‚è¿™ä¸ä»…æå‡äº†å¤„ç†æ•ˆç‡ï¼Œæ›´ä¸ºå¤šè·¯å¤ç”¨ç­‰é«˜çº§ç‰¹æ€§å¥ å®šäº†åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µï¼Œä¸‹æ–¹å›¾è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†äºŒè¿›åˆ¶åˆ†å¸§å±‚å¦‚ä½•å°†ä¼ ç»Ÿçš„HTTPæ¶ˆæ¯è½¬åŒ–ä¸ºå¸§ï¼Œå¹¶é€šè¿‡â€œæµâ€è¿›è¡Œä¼ è¾“å’Œé‡ç»„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç”¨æˆ·è¯·æ±‚ / æœåŠ¡å™¨å“åº”&amp;lt;br&amp;gt;ï¼ˆä¼ ç»Ÿçš„HTTPæ¶ˆæ¯ï¼‰] --&amp;gt; B[äºŒè¿›åˆ¶åˆ†å¸§å±‚]
subgraph B [äºŒè¿›åˆ¶åˆ†å¸§å¤„ç†æµç¨‹]
B1[å°†æ¶ˆæ¯åˆ†è§£ä¸ºæ›´å°çš„äºŒè¿›åˆ¶å¸§]
B2[ä¸ºæ¯ä¸ªå¸§æ‰“ä¸ŠStream IDæ ‡ç­¾&amp;lt;br&amp;gt;ä»¥æ ‡è¯†å…¶æ‰€å±çš„æµ]
B3[é€šè¿‡å•ä¸ªTCPè¿æ¥äº¤é”™å‘é€æ‰€æœ‰å¸§]
end
B --&amp;gt; C[æ¥æ”¶ç«¯æ ¹æ®Stream ID&amp;lt;br&amp;gt;å°†å¸§é‡ç»„ä¸ºå®Œæ•´çš„æ¶ˆæ¯]
subgraph D [å¹¶è¡Œæµç¤ºä¾‹]
direction LR
D1[æµ 1: è¯·æ±‚é¦–é¡µHTML]
D2[æµ 3: è¯·æ±‚CSSæ–‡ä»¶]
D3[æµ 5: è¯·æ±‚JSæ–‡ä»¶]
D4[æµ 7: è¯·æ±‚å›¾ç‰‡]
end
B3 --&amp;gt; D
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒäºŒè¿›åˆ¶åˆ†å¸§æ˜¯å®ç°&lt;strong&gt;å¤šè·¯å¤ç”¨&lt;/strong&gt;çš„å…³é”®ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·±å…¥çœ‹çœ‹å¸§æœ¬èº«çš„å…·ä½“ç»“æ„ã€‚&lt;/p&gt;
&lt;h3 id="-å¸§çš„åŸºæœ¬ç»“æ„"&gt;ğŸ”© å¸§çš„åŸºæœ¬ç»“æ„
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ª HTTP/2 å¸§éƒ½éµå¾ªä¸€ä¸ªæ ‡å‡†åŒ–çš„æ ¼å¼ï¼Œç”± &lt;strong&gt;å¸§å¤´&lt;/strong&gt; å’Œ &lt;strong&gt;è´Ÿè½½&lt;/strong&gt; ä¸¤éƒ¨åˆ†ç»„æˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»„æˆéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;é•¿åº¦&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•¿åº¦ (Length)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;3 å­—èŠ‚ (24ä½)&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºå¸§&lt;strong&gt;è´Ÿè½½&lt;/strong&gt;çš„é•¿åº¦ï¼ˆä¸åŒ…æ‹¬å¸§å¤´ï¼‰ã€‚æœ€å¤§å€¼çº¦ä¸º 16KB (2^14)ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»å‹ (Type)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚ (8ä½)&lt;/td&gt;
&lt;td&gt;å®šä¹‰å¸§çš„ç”¨é€”å’Œæ ¼å¼ã€‚ä¾‹å¦‚ &lt;code&gt;DATA&lt;/code&gt;æˆ– &lt;code&gt;HEADERS&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡å¿— (Flags)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 å­—èŠ‚ (8ä½)&lt;/td&gt;
&lt;td&gt;ç”¨äºä¼ é€’ç‰¹å®šå¸§ç±»å‹çš„å¸ƒå°”æ§åˆ¶ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ ‡å¿—ä½å¯ä»¥æŒ‡ç¤ºè¯¥å¸§æ˜¯å¦æ˜¯æŸä¸ªæµçš„ç»“æŸå¸§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æµæ ‡è¯†ç¬¦ (Stream ID)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;4 å­—èŠ‚ (32ä½)&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°ï¼Œæ ‡è¯†è¯¥å¸§æ‰€å±çš„&lt;strong&gt;æµ&lt;/strong&gt;ã€‚è¿™æ˜¯å®ç°å¤šè·¯å¤ç”¨çš„å…³é”®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿè½½ (Payload)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å˜é•¿&lt;/td&gt;
&lt;td&gt;å¸§çš„å®é™…å†…å®¹ï¼Œå…¶ç»“æ„å’Œå«ä¹‰å®Œå…¨ç”±&lt;strong&gt;å¸§ç±»å‹&lt;/strong&gt;å†³å®šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¸§æ¶ˆæ¯ä¸æµçš„å…³ç³»"&gt;ğŸ“¦ å¸§ã€æ¶ˆæ¯ä¸æµçš„å…³ç³»
&lt;/h3&gt;&lt;p&gt;HTTP/2 é€šä¿¡ç”±ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µç»„æˆï¼Œå®ƒä»¬çš„å…³ç³»æ˜¯åˆ†å±‚çº§çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¸§ (Frame)&lt;/strong&gt;ï¼šæœ€å°çš„é€šä¿¡å•ä½ã€‚å¦‚ä¸Šæ–¹æµç¨‹å›¾æ‰€ç¤ºï¼Œæ‰€æœ‰ä¼ è¾“çš„ä¿¡æ¯æœ€ç»ˆéƒ½æ‰¿è½½åœ¨å¸§ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯ (Message)&lt;/strong&gt;ï¼šä¸€ä¸ªå®Œæ•´çš„é€»è¾‘è¯·æ±‚æˆ–å“åº”ï¼ˆä¾‹å¦‚ä¸€ä¸ªè¯·æ±‚æˆ–ä¸€ä¸ªå“åº”ï¼‰ã€‚å®ƒç”±ä¸€ä¸ªæˆ–å¤šä¸ª&lt;strong&gt;å¸§&lt;/strong&gt;åºåˆ—ç»„æˆï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ª &lt;code&gt;HEADERS&lt;/code&gt;å¸§åè·Ÿé›¶ä¸ªæˆ–å¤šä¸ª &lt;code&gt;DATA&lt;/code&gt;å¸§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ (Stream)&lt;/strong&gt;ï¼šä¸€ä¸ªç‹¬ç«‹çš„ã€åŒå‘çš„å­—èŠ‚æµï¼Œåœ¨ä¸€ä¸ªè¿æ¥å†…æ‰¿è½½å¤šä¸ªæ¶ˆæ¯äº¤æ¢ã€‚æ¯ä¸ªæµéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°æ ‡è¯†ç¬¦ï¼ˆStream IDï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-äºŒè¿›åˆ¶åˆ†å¸§å¸¦æ¥çš„ä¼˜åŠ¿"&gt;ğŸš€ äºŒè¿›åˆ¶åˆ†å¸§å¸¦æ¥çš„ä¼˜åŠ¿
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆè§£æ&lt;/strong&gt;ï¼šäºŒè¿›åˆ¶æ ¼å¼çš„ç¼–ç å’Œè§£ç è¿œæ¯” HTTP/1.x çš„æ–‡æœ¬æ ¼å¼ï¼ˆéœ€è¦å¤„ç†å­—ç¬¦ä¸²åˆ†å‰²ã€ç©ºæ ¼ã€æ¢è¡Œç¬¦ç­‰ï¼‰æ›´é«˜æ•ˆã€æ›´ç²¾ç¡®ï¼Œå‡å°‘äº†æ­§ä¹‰å’Œè§£æå¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çœŸæ­£çš„å¤šè·¯å¤ç”¨&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€é‡è¦çš„ä¼˜åŠ¿ã€‚å¦‚æµç¨‹å›¾æ‰€ç¤ºï¼Œå¤šä¸ªè¯·æ±‚å’Œå“åº”å¯ä»¥åœ¨&lt;strong&gt;åŒä¸€ä¸ª TCP è¿æ¥&lt;/strong&gt;ä¸Šäº¤é”™å‘é€å’Œæ¥æ”¶ï¼Œäº’ä¸é˜»å¡ã€‚è¿™å½»åº•è§£å†³äº† HTTP/1.1 çš„&lt;strong&gt;é˜Ÿå¤´é˜»å¡&lt;/strong&gt;é—®é¢˜ï¼ˆå³ä¸€ä¸ªç¼“æ…¢çš„è¯·æ±‚ä¼šé˜»å¡å…¶åæ‰€æœ‰è¯·æ±‚çš„é—®é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾ç»†çš„æµé‡æ§åˆ¶&lt;/strong&gt;ï¼šåŸºäºå¸§å’Œæµï¼Œå¯ä»¥å®ç°æ›´ç²¾ç»†çš„æµé‡æ§åˆ¶ï¼Œé˜²æ­¢ä¸€ä¸ªæµè€—å°½æ‰€æœ‰è¿æ¥èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆçº§æ§åˆ¶&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ &lt;code&gt;PRIORITY&lt;/code&gt;å¸§æŒ‡å®šæµçš„å¤„ç†ä¼˜å…ˆçº§ï¼Œæç¤ºæœåŠ¡å™¨å“ªäº›èµ„æºæ›´é‡è¦ï¼ˆå¦‚ CSS å’Œ JS ä¼˜å…ˆäºå›¾ç‰‡ï¼‰ï¼Œä»è€Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¸¸è§çš„å¸§ç±»å‹"&gt;ğŸ”§ å¸¸è§çš„å¸§ç±»å‹
&lt;/h3&gt;&lt;p&gt;HTTP/2 å®šä¹‰äº†ä¸€ç³»åˆ—å¸§ç±»å‹ï¼Œç”¨äºå®ç°ä¸åŒåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¸§ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;DATA&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºä¼ è¾“ HTTP æ¶ˆæ¯ä½“ï¼ˆå³è¯·æ±‚æˆ–å“åº”çš„å®é™…å†…å®¹ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;HEADERS&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºæ‰“å¼€ä¸€ä¸ªæµï¼Œå¹¶æºå¸¦ HTTP å¤´éƒ¨å­—æ®µï¼ˆå‹ç¼©åï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;PRIORITY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæµçš„ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;RST_STREAM&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…è®¸ç«‹å³ç»ˆæ­¢ä¸€ä¸ªæµï¼Œç”¨äºé€šçŸ¥å¼‚å¸¸ä¸­æ–­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;SETTINGS&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åå•†è¿æ¥ä¸¤ç«¯çš„é…ç½®å‚æ•°ï¼Œå¦‚æœ€å¤§å¹¶å‘æµæ•°ã€åˆå§‹æµé‡æ§åˆ¶çª—å£å¤§å°ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;PUSH_PROMISE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨ç”¨äºé€šçŸ¥å®¢æˆ·ç«¯å®ƒæ‰“ç®—æ¨é€ä¸€ä¸ªèµ„æºï¼ˆæœåŠ¡å™¨æ¨é€åŠŸèƒ½ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;PING&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æµ‹è¯•è¿æ¥çš„å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰å’Œå¯ç”¨æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;GOAWAY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºé€šçŸ¥å¯¹ç«¯åœæ­¢åˆ›å»ºæ–°æµï¼Œå‡†å¤‡å…³é—­è¿æ¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;WINDOW_UPDATE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºå®ç°æµé‡æ§åˆ¶ï¼Œé€šçŸ¥å¯¹ç«¯è‡ªå·±å‡†å¤‡æ¥æ”¶æ›´å¤šæ•°æ®çš„å­—èŠ‚æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“äºŒè¿›åˆ¶åˆ†å¸§çš„æ„ä¹‰"&gt;ğŸ’ æ€»ç»“ï¼šäºŒè¿›åˆ¶åˆ†å¸§çš„æ„ä¹‰
&lt;/h3&gt;&lt;p&gt;äºŒè¿›åˆ¶åˆ†å¸§æ˜¯ HTTP/2 çš„åŸºçŸ³ã€‚å®ƒé€šè¿‡å¼•å…¥æ–°çš„ç¼–ç æœºåˆ¶å’Œé€šä¿¡æ¨¡å‹ï¼Œä½¿å¾—å•ä¸€è¿æ¥ä¸Šçš„å¹¶è¡Œé€šä¿¡æˆä¸ºå¯èƒ½ï¼Œæå¤§åœ°æå‡äº†ç½‘ç»œåˆ©ç”¨æ•ˆç‡å’Œæ€§èƒ½ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;HTTP/1.1&lt;/th&gt;
&lt;th&gt;HTTP/2&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼ è¾“æ ¼å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–‡æœ¬&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å°å•ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•´ä¸ªè¯·æ±‚/å“åº”æŠ¥æ–‡&lt;/td&gt;
&lt;td&gt;å¸§ (Frame)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šä¸ªè¿æ¥å®ç°å¹¶è¡Œ&lt;/td&gt;
&lt;td&gt;å•è¿æ¥å¤šè·¯å¤ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜Ÿå¤´é˜»å¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜åœ¨ï¼ˆåº”ç”¨å±‚ï¼‰&lt;/td&gt;
&lt;td&gt;è§£å†³ï¼ˆåº”ç”¨å±‚ï¼‰ï¼Œä½†TCPå±‚ä»å¯èƒ½å­˜åœ¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ HTTP/2 çš„äºŒè¿›åˆ¶åˆ†å¸§ã€‚&lt;/p&gt;
&lt;h2 id="è·¯ç”±å™¨"&gt;è·¯ç”±å™¨
&lt;/h2&gt;&lt;p&gt;ã€‚å…³äºè·¯ç”±å™¨ä¸¤ä¸ªä»¥å¤ªç½‘æ¥å£èƒ½è¿æ¥å¤šå°‘ç»„ä¸åŒç½‘æ®µçš„é—®é¢˜ï¼Œç­”æ¡ˆå¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œå®ƒä¸»è¦å–å†³äºè·¯ç”±å™¨çš„ç±»å‹å’Œé…ç½®æ–¹å¼ã€‚ç®€å•æ¥è¯´ï¼ŒåŸºç¡€é…ç½®ä¸‹å¯ä»¥æœ‰ &lt;strong&gt;2 ç»„&lt;/strong&gt;ï¼Œè€Œé€šè¿‡é«˜çº§åŠŸèƒ½åˆ™å¯ä»¥æ‰©å±•è‡³ &lt;strong&gt;æ•°åƒç»„ç”šè‡³æ›´å¤š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿäº†è§£ä¸åŒæƒ…å†µä¸‹çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é…ç½®åœºæ™¯&lt;/th&gt;
&lt;th&gt;æœ€å¤§ç½‘æ®µç»„æ•°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæŠ€æœ¯&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºç¡€é…ç½®ï¼ˆä»…ç”¨ç‰©ç†æ¥å£ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2 ç»„&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªç‰©ç†æ¥å£åˆ†é…ä¸€ä¸ªä¸åŒç½‘æ®µçš„IPåœ°å€ã€‚&lt;/td&gt;
&lt;td&gt;ç®€å•å®¶åº­æˆ–å°å‹åŠå…¬ç½‘ç»œï¼Œå®ç°ä¸¤ä¸ªç½‘æ®µçš„åŸºæœ¬äº’è”ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜çº§é…ç½®ï¼ˆä½¿ç”¨å­æ¥å£/VLANï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç†è®ºä¸Šå¯è¾¾ 4096 ç»„ä»¥ä¸Šï¼ˆæ¯ç‰©ç†æ¥å£ï¼‰&lt;/td&gt;
&lt;td&gt;åŸºäº IEEE 802.1Q åè®®ï¼Œåœ¨ä¸€ä¸ªç‰©ç†æ¥å£ä¸Šåˆ›å»ºå¤šä¸ªé€»è¾‘å­æ¥å£ï¼Œæ¯ä¸ªå­æ¥å£å¯¹åº”ä¸€ä¸ªVLANå’Œä¸€ä¸ªç½‘æ®µã€‚&lt;/td&gt;
&lt;td&gt;ä¼ä¸šçº§æˆ–ç”µä¿¡çº§ç½‘ç»œï¼Œéœ€è¦åœ¨ä¸€å°è®¾å¤‡ä¸Šå®ç°å¤§é‡ç½‘æ®µéš”ç¦»å’Œè·¯ç”±ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºç¡€é…ç½®ä¸€å¯¹ä¸€è¿æ¥"&gt;ğŸ”Œ åŸºç¡€é…ç½®ï¼šä¸€å¯¹ä¸€è¿æ¥
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚è·¯ç”±å™¨çš„ç¬¬ä¸€ä¸ªä»¥å¤ªç½‘æ¥å£ï¼ˆä¾‹å¦‚E0/0ï¼‰é…ç½®ä¸€ä¸ªç½‘æ®µçš„IPåœ°å€ï¼ˆå¦‚ &lt;code&gt;192.168.1.1/24&lt;/code&gt;ï¼‰ï¼Œç¬¬äºŒä¸ªæ¥å£ï¼ˆä¾‹å¦‚E0/1ï¼‰é…ç½®å¦ä¸€ä¸ªç½‘æ®µçš„IPåœ°å€ï¼ˆå¦‚ &lt;code&gt;192.168.2.1/24&lt;/code&gt;ï¼‰ã€‚è¿™æ ·ï¼Œè·¯ç”±å™¨å°±ç›´æ¥è¿æ¥äº† &lt;strong&gt;2ä¸ª&lt;/strong&gt; ä¸åŒçš„ç½‘æ®µï¼Œå¹¶èƒ½åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œæ•°æ®è½¬å‘ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°å®¶ç”¨è·¯ç”±å™¨å°±æ˜¯è¿™ç§æ¨¡å¼ï¼ŒLANå£é€šå¸¸å±äºåŒä¸€ä¸ªç½‘æ®µã€‚&lt;/p&gt;
&lt;h3 id="-é«˜çº§é…ç½®å­æ¥å£ä¸vlan"&gt;ğŸš€ é«˜çº§é…ç½®ï¼šå­æ¥å£ä¸VLAN
&lt;/h3&gt;&lt;p&gt;å¯¹äºä¼ä¸šçº§çš„é«˜ç«¯è·¯ç”±å™¨ï¼Œå…¶èƒ½åŠ›è¿œä¸æ­¢äºæ­¤ã€‚å®ƒä»¬æ”¯æŒ &lt;strong&gt;å­æ¥å£&lt;/strong&gt;ï¼ˆä¹Ÿå«è™šæ¥å£ï¼‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šå¯ä»¥åœ¨ä¸€ä¸ªç‰©ç†æ¥å£ä¸Šé€»è¾‘åœ°åˆ’åˆ†å‡ºå¤šä¸ªå­æ¥å£ã€‚æ¯ä¸ªå­æ¥å£å¯ä»¥å…³è”ä¸€ä¸ªä¸åŒçš„VLANï¼ˆè™šæ‹Ÿå±€åŸŸç½‘ï¼‰å¹¶é…ç½®ä¸€ä¸ªç‹¬ç«‹çš„IPåœ°å€ï¼Œä»è€Œå……å½“ä¸€ä¸ªç‹¬ç«‹ç½‘æ®µçš„ç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•èƒ½åŠ›&lt;/strong&gt;ï¼šæ ¹æ®IEEE 802.1Qåè®®æ ‡å‡†ï¼Œä¸€ä¸ªVLAN Trunké“¾è·¯æœ€å¤šå¯ä»¥æ‰¿è½½ &lt;strong&gt;4096&lt;/strong&gt; ä¸ªä¸åŒçš„VLANã€‚ è¿™æ„å‘³ç€ï¼Œè·¯ç”±å™¨çš„ä¸€ä¸ªç‰©ç†æ¥å£ç†è®ºä¸Šæœ€å¤šå¯ä»¥åˆ›å»º4096ä¸ªå­æ¥å£ï¼Œè¿æ¥4096ä¸ªç½‘æ®µã€‚å¦‚æœè·¯ç”±å™¨çš„ä¸¤ä¸ªç‰©ç†æ¥å£éƒ½è¿™æ ·é…ç½®ï¼Œé‚£ä¹ˆç†è®ºä¸Šå®ƒå¯ä»¥ç®¡ç†çš„ç½‘æ®µæ•°é‡ä¼šéå¸¸åºå¤§ï¼Œè¿œè¶…4ä¸ªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç®€å•æ€»ç»“"&gt;ğŸ’ ç®€å•æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ‰€ä»¥ï¼Œå¯¹äºä½ çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ˜¯ä¸€å°&lt;strong&gt;æ™®é€šå®¶ç”¨è·¯ç”±å™¨&lt;/strong&gt;ï¼Œæœ€å¤šåªèƒ½æœ‰ &lt;strong&gt;2 ç»„&lt;/strong&gt;ï¼ˆå³ä¸¤ä¸ªç‰©ç†æ¥å£å„è¿ä¸€ä¸ªç½‘æ®µï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ä¸€å°&lt;strong&gt;æ”¯æŒå­æ¥å£åŠŸèƒ½çš„ä¼ä¸šçº§è·¯ç”±å™¨&lt;/strong&gt;ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¿æ¥çš„ç½‘æ®µæ•°é‡å°†è¿œè¿œå¤šäº2ä¸ªï¼Œ&lt;strong&gt;ç†è®ºä¸Šæ¯ç‰©ç†æ¥å£å¯è¾¾4096ç»„ä»¥ä¸Š&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœä½ å¯¹VLANæˆ–è·¯ç”±å™¨å­æ¥å£çš„å…·ä½“é…ç½®æ„Ÿå…´è¶£ï¼Œæˆ‘å¯ä»¥æä¾›æ›´è¿›ä¸€æ­¥çš„è¯´æ˜ã€‚&lt;/p&gt;
&lt;h2 id="mac--llc"&gt;MAC &amp;amp; LLC
&lt;/h2&gt;&lt;p&gt;åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œæ•°æ®é“¾è·¯å±‚ä¸ºç¡®ä¿æ•°æ®åœ¨ç‰©ç†ä»‹è´¨ä¸Šå¯é ä¼ è¾“ï¼Œè¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªåŠŸèƒ½æ˜ç¡®ã€ååŒå·¥ä½œçš„å­å±‚ï¼š&lt;strong&gt;åª’ä½“è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰å±‚&lt;/strong&gt;å’Œ&lt;strong&gt;é€»è¾‘é“¾è·¯æ§åˆ¶ï¼ˆLLCï¼‰å±‚&lt;/strong&gt;ã€‚ä¸‹è¡¨æ¸…æ™°åœ°å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒèŒè´£ä¸ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;MAC å±‚ (åª’ä½“è®¿é—®æ§åˆ¶)&lt;/th&gt;
&lt;th&gt;LLC å±‚ (é€»è¾‘é“¾è·¯æ§åˆ¶)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒèŒè´£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ§åˆ¶è®¾å¤‡å¦‚ä½•æ¥å…¥&lt;strong&gt;ç‰©ç†ä¼ è¾“ä»‹è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸º&lt;strong&gt;ç½‘ç»œå±‚&lt;/strong&gt;æä¾›ç»Ÿä¸€çš„ã€ä¸ä¾èµ–åº•å±‚æŠ€æœ¯çš„æ¥å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½ç„¦ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»‹è´¨è®¿é—®æ§åˆ¶ã€å¸§çš„å°è£…/è§£å°è£…ã€ç‰©ç†å¯»å€ï¼ˆMACåœ°å€ï¼‰ã€å·®é”™æ£€æµ‹ï¼ˆå¦‚FCSï¼‰&lt;/td&gt;
&lt;td&gt;åè®®å¤šè·¯å¤ç”¨ã€æµé‡æ§åˆ¶ã€è¿æ¥ç®¡ç†ï¼ˆå»ºç«‹ã€ç»´æŠ¤ã€é‡Šæ”¾ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯»å€æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰&lt;/strong&gt;ï¼Œå…¨çƒå”¯ä¸€ï¼Œå›ºåŒ–äºç¡¬ä»¶&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡è®¿é—®ç‚¹ï¼ˆSAPï¼‰&lt;/strong&gt;ï¼Œç”¨äºæ ‡è¯†åŒä¸€è®¾å¤‡å†…çš„ä¸åŒç½‘ç»œåè®®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰€å…³å¿ƒçš„é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚ä½•è§£å†³å¤šè®¾å¤‡å…±äº«ä¿¡é“æ—¶çš„&lt;strong&gt;å†²çª&lt;/strong&gt;ï¼ˆå¦‚CSMA/CDï¼‰&lt;/td&gt;
&lt;td&gt;å¦‚ä½•ç¡®ä¿æ•°æ®&lt;strong&gt;å¯é ã€æœ‰åº&lt;/strong&gt;åœ°äº¤ä»˜ç»™ä¸Šå±‚åè®®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åè®®/æ ‡å‡†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;IEEE 802.3 (ä»¥å¤ªç½‘), IEEE 802.11 (Wi-Fi)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;IEEE 802.2&lt;/strong&gt;ï¼Œä¸ºå„ç§MACæŠ€æœ¯æä¾›ç»Ÿä¸€æœåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å„å¸å…¶èŒçš„åˆ†å·¥åä½œ"&gt;ğŸ”„ å„å¸å…¶èŒçš„åˆ†å·¥åä½œ
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥å°†æ•°æ®é“¾è·¯å±‚çš„å·¥ä½œæƒ³è±¡æˆç®¡ç†ä¸€ä¸ªé«˜æ•ˆçš„ç‰©æµç³»ç»Ÿï¼šMACå±‚æ˜¯&lt;strong&gt;ä»“åº“å’Œè¿è¾“éƒ¨é—¨&lt;/strong&gt;ï¼Œè´Ÿè´£å…·ä½“æ‰§è¡Œï¼›è€ŒLLCå±‚æ˜¯&lt;strong&gt;è°ƒåº¦å’Œå®¢æœä¸­å¿ƒ&lt;/strong&gt;ï¼Œè´Ÿè´£ç»Ÿç­¹åè°ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MACå±‚ï¼šç‰©ç†ä¸–ç•Œçš„ç®¡ç†è€…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MACå±‚ç›´æ¥ä¸ç‰©ç†å±‚äº¤äº’ï¼Œæ ¸å¿ƒä»»åŠ¡æ˜¯è§£å†³â€œ&lt;strong&gt;è°å¯ä»¥åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç‰©ç†çº¿è·¯å‘é€æ•°æ®&lt;/strong&gt;â€è¿™ä¸ªåŸºæœ¬é—®é¢˜ã€‚åœ¨å…±äº«ä»‹è´¨çš„ç½‘ç»œï¼ˆå¦‚ä¼ ç»Ÿçš„ä»¥å¤ªç½‘ï¼‰ä¸­ï¼Œå¤šä¸ªè®¾å¤‡å¯èƒ½åŒæ—¶è¦å‘é€æ•°æ®ï¼ŒMACå±‚é€šè¿‡ç‰¹å®šçš„åè®®ï¼ˆå¦‚ä»¥å¤ªç½‘çš„CSMA/CDå¸¦å†²çªæ£€æµ‹çš„è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®æˆ–ä»¤ç‰Œç¯ç½‘ç»œçš„ä»¤ç‰Œä¼ é€’ï¼‰æ¥é¿å…æˆ–è§£å†³å†²çªï¼Œç¡®ä¿ç§©åºã€‚æ­¤å¤–ï¼ŒMACå±‚è´Ÿè´£å°†ä¸Šå±‚ä¼ æ¥çš„æ•°æ®&lt;strong&gt;å°è£…æˆå¸§&lt;/strong&gt;ï¼Œæ·»åŠ ç›®æ ‡MACåœ°å€å’ŒæºMACåœ°å€ä»¥åŠç”¨äºå·®é”™æ£€æµ‹çš„å¸§æ ¡éªŒåºåˆ—ï¼ˆFCSï¼‰ï¼Œå¹¶å°†æ¯”ç‰¹æµè½¬æ¢æˆåœ¨ç‰©ç†ä»‹è´¨ä¸Šä¼ è¾“çš„ä¿¡å·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;LLCå±‚ï¼šä¸Šä¸‹å±‚çš„ç¿»è¯‘å®˜ä¸åè°ƒå‘˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;LLCå±‚ä½äºMACå±‚ä¹‹ä¸Šï¼Œä½œä¸ºç½‘ç»œå±‚å’ŒMACå±‚ä¹‹é—´çš„ä¸­é—´äººã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯&lt;strong&gt;å‘ä¸Šå±‚ï¼ˆç½‘ç»œå±‚ï¼‰å±è”½ä¸åŒMACæŠ€æœ¯ï¼ˆå¦‚ä»¥å¤ªç½‘ã€ä»¤ç‰Œç¯ï¼‰çš„å·®å¼‚&lt;/strong&gt;ã€‚è¿™æ ·ï¼Œç½‘ç»œå±‚çš„IPåè®®æ— è®ºä¸‹å±‚æ˜¯ä»¥å¤ªç½‘è¿˜æ˜¯å…¶ä»–å±€åŸŸç½‘æŠ€æœ¯ï¼Œéƒ½èƒ½é€šè¿‡ç»Ÿä¸€çš„LLCæ¥å£è¿›è¡Œé€šä¿¡ã€‚LLCå±‚é€šè¿‡&lt;strong&gt;æœåŠ¡è®¿é—®ç‚¹ï¼ˆSAPï¼‰&lt;/strong&gt; å®ç°&lt;strong&gt;åè®®å¤šè·¯å¤ç”¨&lt;/strong&gt;ï¼Œå…è®¸åŒä¸€å°è®¾å¤‡ä¸Šè¿è¡Œçš„å¤šä¸ªç½‘ç»œåè®®ï¼ˆå¦‚IPã€IPXï¼‰å…±äº«åŒä¸€ä¸ªç‰©ç†ç½‘ç»œæ¥å£ã€‚LLCå±‚è¿˜æä¾›&lt;strong&gt;æµé‡æ§åˆ¶&lt;/strong&gt;å’Œ&lt;strong&gt;å·®é”™æ§åˆ¶&lt;/strong&gt;åŠŸèƒ½ï¼ˆå°¤å…¶æ˜¯åœ¨é¢å‘è¿æ¥çš„æœåŠ¡ä¸­ï¼‰ï¼Œç¡®ä¿å‘é€æ–¹ä¸ä¼šä»¥è¿‡å¿«çš„é€Ÿåº¦æ·¹æ²¡æ¥æ”¶æ–¹ï¼Œå¹¶é€šè¿‡ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ä¿è¯å¸§çš„å¯é ä¼ è¾“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ååŒå·¥ä½œæµç¨‹"&gt;ğŸ¤ ååŒå·¥ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;å½“ä¸€å°è®¡ç®—æœºè¦å‘é€æ•°æ®æ—¶ï¼Œä¸¤ä¸ªå­å±‚ä¼šæŒ‰é¡ºåºååŒå·¥ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è‡ªä¸Šè€Œä¸‹ï¼ˆå‘é€ç«¯ï¼‰&lt;/strong&gt;ï¼šç½‘ç»œå±‚çš„æ•°æ®åŒ…åˆ°è¾¾LLCå­å±‚ã€‚LLCå­å±‚ä¸ºå…¶æ·»åŠ ä¸€ä¸ª&lt;strong&gt;LLCå¤´&lt;/strong&gt;ï¼ˆåŒ…å«SAPä¿¡æ¯ï¼‰ï¼Œæ‰§è¡Œå¤šè·¯å¤ç”¨å’Œæµé‡æ§åˆ¶ã€‚è¿™ä¸ªåŠ ä¸ŠLLCå¤´çš„æ•°æ®å•å…ƒè¢«ä¼ é€’ç»™MACå­å±‚ã€‚MACå­å±‚å†ä¸ºå…¶æ·»åŠ &lt;strong&gt;MACå¤´&lt;/strong&gt;ï¼ˆç›®çš„/æºåœ°å€ç­‰ï¼‰å’Œ&lt;strong&gt;å°¾éƒ¨çš„FCS&lt;/strong&gt;ï¼Œå°è£…æˆå®Œæ•´çš„&lt;strong&gt;MACå¸§&lt;/strong&gt;ï¼Œç„¶åæ ¹æ®MACåè®®è§„åˆ™å°†å…¶å‘é€åˆ°ç‰©ç†ä»‹è´¨ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªä¸‹è€Œä¸Šï¼ˆæ¥æ”¶ç«¯ï¼‰&lt;/strong&gt;ï¼šç‰©ç†ä»‹è´¨æ”¶åˆ°ä¿¡å·ï¼ŒMACå­å±‚å°†å…¶ç»„è£…æˆå¸§ï¼Œè¿›è¡Œå·®é”™æ£€æµ‹ï¼ˆé€šè¿‡FCSï¼‰ã€‚è‹¥åœ°å€åŒ¹é…ä¸”æ— è¯¯ï¼Œåˆ™å‰¥å»MACå¤´å’Œå°¾ï¼Œå°†LLCæ•°æ®å•å…ƒå‘ä¸Šä¼ é€’ç»™LLCå­å±‚ã€‚LLCå­å±‚æ ¹æ®LLCå¤´ä¸­çš„SAPä¿¡æ¯ï¼Œå°†æ•°æ®&lt;strong&gt;åˆ†ç”¨&lt;/strong&gt;åˆ°æ­£ç¡®çš„ç½‘ç»œå±‚åè®®ï¼ˆå¦‚IPåè®®ï¼‰è¿›è¡Œå¤„ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸æ¼”è¿›"&gt;ğŸ’ å®é™…åº”ç”¨ä¸æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…çš„ç°ä»£ä»¥å¤ªç½‘ï¼ˆæœ€ä¸ºæ™®åŠçš„å±€åŸŸç½‘æŠ€æœ¯ï¼‰ä¸­ï¼Œ&lt;strong&gt;LLCå±‚çš„è§’è‰²å·²ç»å¤§å¤§ç®€åŒ–ç”šè‡³å¸¸å¸¸ä¸å¯è§&lt;/strong&gt;ã€‚è¿™æ˜¯å› ä¸ºTCP/IPåè®®æ—æˆä¸ºäº†ç»å¯¹ä¸»å¯¼ï¼Œä¸å†éœ€è¦å¤æ‚çš„å¤šåè®®å¤ç”¨åŠŸèƒ½ï¼Œè®¸å¤šåŸæœ¬ç”±LLCè´Ÿè´£çš„å¯é æ€§ä¿è¯ä»»åŠ¡ï¼Œä¹Ÿäº¤ç”±æ›´ä¸Šå±‚çš„TCPåè®®å¤„ç†ã€‚å› æ­¤ï¼Œåœ¨æ ‡å‡†ä»¥å¤ªç½‘å¸§ä¸­ï¼Œç±»å‹å­—æ®µç›´æ¥æ ‡è¯†ä¸Šå±‚åè®®ï¼ŒLLCå¤´é€šå¸¸è¢«çœç•¥ã€‚ä¸è¿‡ï¼Œç†è§£LLCå±‚çš„è®¾è®¡æ€æƒ³å’ŒåŠŸèƒ½ï¼Œå¯¹äºæŒæ¡å®Œæ•´çš„ç½‘ç»œä½“ç³»ç»“æ„ä¾ç„¶è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£MACå±‚å’ŒLLCå±‚å„è‡ªçš„èŒè´£ä¸åä½œå…³ç³»ã€‚&lt;/p&gt;
&lt;h2 id="ç½‘æ¡¥"&gt;ç½‘æ¡¥
&lt;/h2&gt;&lt;p&gt;ç½‘æ¡¥ï¼ˆBridgeï¼‰æ˜¯æ—©æœŸç½‘ç»œä¸­ç”¨äºè¿æ¥ä¸åŒç½‘æ®µçš„å…³é”®è®¾å¤‡ï¼Œå®ƒå·¥ä½œåœ¨OSIæ¨¡å‹çš„&lt;strong&gt;æ•°æ®é“¾è·¯å±‚&lt;/strong&gt;ï¼Œä¸»è¦æ ¹æ®MACåœ°å€è¿›è¡Œæ™ºèƒ½è½¬å‘å’Œè¿‡æ»¤ï¼Œä»¥æ­¤æ¥éš”ç¦»å†²çªåŸŸã€æ‰©å±•ç½‘ç»œèŒƒå›´ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡ç½‘æ¡¥çš„æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;ç½‘æ¡¥ (Bridge)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;OSIå·¥ä½œå±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®é“¾è·¯å±‚ (ç¬¬äºŒå±‚)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MACåœ°å€å­¦ä¹ ã€å¸§çš„è¿‡æ»¤ä¸è½¬å‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éš”ç¦»å†²çªåŸŸã€æ‰©å±•ç½‘ç»œèŒƒå›´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥ç«¯å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—©æœŸé€šå¸¸ä¸º2-4ä¸ªç«¯å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºMACåœ°å€ï¼ˆç‰©ç†åœ°å€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€æ˜æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹é«˜å±‚åè®®é€æ˜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç½‘æ¡¥å¦‚ä½•å·¥ä½œ"&gt;ğŸ’¡ ç½‘æ¡¥å¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;ç½‘æ¡¥çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œ&lt;strong&gt;å­¦ä¹ &lt;/strong&gt;â€å’Œâ€œ&lt;strong&gt;è½¬å‘&lt;/strong&gt;â€ä¸¤ä¸ªå…³é”®è¿‡ç¨‹ï¼Œå…¶ç›®æ ‡æ˜¯å°½å¯èƒ½åœ°å°†æ•°æ®å¸§åªå‘é€åˆ°éœ€è¦å®ƒçš„ç½‘æ®µï¼Œä»è€Œä¼˜åŒ–ç½‘ç»œæµé‡ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;MACåœ°å€å­¦ä¹ &lt;/strong&gt;ï¼šç½‘æ¡¥å¯åŠ¨æ—¶ï¼Œå†…éƒ¨çš„MACåœ°å€è¡¨æ˜¯ç©ºçš„ã€‚å½“å®ƒä»ä¸€ä¸ªç«¯å£ï¼ˆæ¯”å¦‚ç«¯å£1ï¼‰æ”¶åˆ°ä¸€ä¸ªæ•°æ®å¸§æ—¶ï¼Œä¼šæ£€æŸ¥è¯¥å¸§çš„&lt;strong&gt;æºMACåœ°å€&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œæ¥è‡ªç”µè„‘Aï¼‰ï¼Œç„¶åå°†â€œMACåœ°å€A - ç«¯å£1â€è¿™æ¡è®°å½•å­˜å…¥è‡ªå·±çš„åœ°å€è¡¨ä¸­ã€‚é€šè¿‡è¿™ç§æ–¹å¼ç›‘å¬æµç»å®ƒçš„æ‰€æœ‰æ•°æ®å¸§ï¼Œç½‘æ¡¥å°±èƒ½è‡ªåŠ¨â€œå­¦ä¹ â€å¹¶å»ºç«‹èµ·ç½‘ç»œä¸Šå„ä¸ªè®¾å¤‡ä½äºå“ªä¸ªç«¯å£çš„æ˜ å°„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸§çš„è½¬å‘ä¸è¿‡æ»¤&lt;/strong&gt;ï¼šå½“ç½‘æ¡¥éœ€è¦å¤„ç†ä¸€ä¸ªæ•°æ®å¸§æ—¶ï¼Œå®ƒä¼šæŸ¥çœ‹å¸§çš„&lt;strong&gt;ç›®æ ‡MACåœ°å€&lt;/strong&gt;ï¼Œå¹¶æ ¹æ®åœ°å€è¡¨å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æ»¤&lt;/strong&gt;ï¼šå¦‚æœç›®æ ‡MACåœ°å€åœ¨åœ°å€è¡¨ä¸­ï¼Œä¸”å¯¹åº”çš„ç«¯å£ä¸æ”¶åˆ°è¯¥å¸§çš„ç«¯å£&lt;strong&gt;ç›¸åŒ&lt;/strong&gt;ï¼Œè¯´æ˜ç›®æ ‡è®¾å¤‡å°±åœ¨å‘é€æ–¹æ‰€åœ¨çš„åŒä¸€ä¸ªç½‘æ®µã€‚æ­¤æ—¶ç½‘æ¡¥ä¼šç›´æ¥ä¸¢å¼ƒè¯¥å¸§ï¼Œä¸ä¼šå°†å…¶è½¬å‘åˆ°å…¶ä»–ç«¯å£ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„ç½‘ç»œæµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬å‘&lt;/strong&gt;ï¼šå¦‚æœç›®æ ‡MACåœ°å€åœ¨åœ°å€è¡¨ä¸­ï¼Œä½†å¯¹åº”çš„ç«¯å£ä¸æ”¶åˆ°è¯¥å¸§çš„ç«¯å£&lt;strong&gt;ä¸åŒ&lt;/strong&gt;ï¼Œç½‘æ¡¥å°±ä¼šå°†è¿™ä¸ªå¸§ä»æ­£ç¡®çš„ç«¯å£è½¬å‘å‡ºå»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³›æ´ª&lt;/strong&gt;ï¼šå¦‚æœç›®æ ‡MACåœ°å€&lt;strong&gt;ä¸åœ¨&lt;/strong&gt;åœ°å€è¡¨ä¸­ï¼ˆå³æœªçŸ¥åœ°å€ï¼‰ï¼Œç½‘æ¡¥ä¼šå°†è¿™ä¸ªå¸§ä»&lt;strong&gt;é™¤æ¥æ”¶ç«¯å£ä¹‹å¤–çš„æ‰€æœ‰å…¶ä»–ç«¯å£&lt;/strong&gt;è½¬å‘å‡ºå»ï¼Œä»¥ç¡®ä¿å¸§èƒ½åˆ°è¾¾ç›®çš„åœ°ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿç§°ä¸ºå¹¿æ’­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç½‘æ¡¥çš„ç±»å‹ä¸ç‰¹ç‚¹"&gt;ğŸ” ç½‘æ¡¥çš„ç±»å‹ä¸ç‰¹ç‚¹
&lt;/h3&gt;&lt;p&gt;æ ¹æ®è·¯ç”±é€‰æ‹©å’Œæ“ä½œæ–¹å¼çš„ä¸åŒï¼Œç½‘æ¡¥ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€æ˜ç½‘æ¡¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å³æ’å³ç”¨&lt;/strong&gt;ï¼Œè‡ªåŠ¨å­¦ä¹ å’Œæ„å»ºMACåœ°å€è¡¨ï¼Œå¯¹ç½‘ç»œè®¾å¤‡å®Œå…¨é€æ˜ã€‚&lt;/td&gt;
&lt;td&gt;æœ€ä¸ºå¸¸è§ï¼Œä¸»è¦ç”¨äº&lt;strong&gt;ä»¥å¤ªç½‘&lt;/strong&gt;ç¯å¢ƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æºè·¯ç”±ç½‘æ¡¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘é€å¸§çš„&lt;strong&gt;æºè®¾å¤‡&lt;/strong&gt;åœ¨å¸§å¤´ä¸­æŒ‡å®šå®Œæ•´çš„è·¯ç”±ä¿¡æ¯ï¼Œç½‘æ¡¥æ ¹æ®æ­¤ä¿¡æ¯è½¬å‘ã€‚&lt;/td&gt;
&lt;td&gt;ä¸»è¦ç”¨äº&lt;strong&gt;ä»¤ç‰Œç¯ç½‘&lt;/strong&gt;ï¼ˆToken Ringï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½¬æ¢ç½‘æ¡¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èƒ½å¤Ÿåœ¨ä¸åŒç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚åè®®çš„å±€åŸŸç½‘ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼ˆå¦‚ä»¥å¤ªç½‘ä¸ä»¤ç‰Œç¯ç½‘äº’è¿ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;è¿æ¥&lt;strong&gt;å¼‚æ„ç½‘ç»œ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å°è£…ç½‘æ¡¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ä¸€ç§ç½‘ç»œçš„æ•´ä¸ªå¸§å°è£…åœ¨å¦ä¸€ç§ç½‘ç»œå¸§çš„æ•°æ®å­—æ®µä¸­è¿›è¡Œä¼ è¾“ã€‚&lt;/td&gt;
&lt;td&gt;å¸¸ç”¨äºå°†å±€åŸŸç½‘è¿æ¥åˆ°FDDIç­‰éª¨å¹²ç½‘ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç½‘æ¡¥çš„åº”ç”¨ä¸å±€é™"&gt;ğŸ¯ ç½‘æ¡¥çš„åº”ç”¨ä¸å±€é™
&lt;/h3&gt;&lt;p&gt;ç½‘æ¡¥åœ¨æ‰©å±•ç½‘ç»œã€æå‡æ€§èƒ½æ–¹é¢æœ‰å…¶ç‹¬ç‰¹çš„ä»·å€¼ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›å›ºæœ‰çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•å±€åŸŸç½‘èŒƒå›´&lt;/strong&gt;ï¼šè¿æ¥ç‰©ç†è·ç¦»è¾ƒè¿œçš„ä¸¤ä¸ªå±€åŸŸç½‘æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å‰²å†²çªåŸŸ&lt;/strong&gt;ï¼šå°†ä¸€ä¸ªå¤§çš„å±€åŸŸç½‘åˆ†å‰²æˆå¤šä¸ªè¾ƒå°çš„ç½‘æ®µï¼Œå‡å°‘æ•°æ®ç¢°æ’ï¼Œæå‡ç½‘ç»œæ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥å¼‚æ„ç½‘ç»œ&lt;/strong&gt;ï¼šé€šè¿‡è½¬æ¢æˆ–å°è£…ç½‘æ¡¥ï¼Œè¿æ¥ä½¿ç”¨ä¸åŒä»‹è´¨æˆ–æŠ€æœ¯çš„ç½‘ç»œï¼Œå¦‚ä»¥å¤ªç½‘å’Œæ— çº¿å±€åŸŸç½‘ï¼ˆWi-Fiï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹ä¸ç¼ºç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œç®€å•&lt;/strong&gt;ï¼šç‰¹åˆ«æ˜¯é€æ˜ç½‘æ¡¥ï¼ŒåŸºæœ¬æ— éœ€é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ‰æ•ˆéš”ç¦»å†²çª&lt;/strong&gt;ï¼šæé«˜ç½‘ç»œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè®®é€æ˜&lt;/strong&gt;ï¼šç”±äºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå¯¹ä¸Šå±‚ç½‘ç»œåè®®ï¼ˆå¦‚IPã€IPXï¼‰æ˜¯é€æ˜çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•éš”ç¦»å¹¿æ’­åŸŸ&lt;/strong&gt;ï¼šå¹¿æ’­å¸§ä¼šè¢«è½¬å‘åˆ°æ‰€æœ‰ç«¯å£ï¼ˆæ³›æ´ªé™¤å¤–ï¼‰ï¼Œå¯èƒ½å¯¼è‡´&lt;strong&gt;å¹¿æ’­é£æš´&lt;/strong&gt;ï¼Œå½±å“å¤§å‹ç½‘ç»œç¨³å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯èƒ½å¼•å…¥æ—¶å»¶&lt;/strong&gt;ï¼šå› ä¸ºéœ€è¦å¯¹å¸§è¿›è¡Œå­˜å‚¨ã€æ£€æŸ¥å’Œè½¬å‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§„æ¨¡é™åˆ¶&lt;/strong&gt;ï¼šMACåœ°å€è¡¨å®¹é‡æœ‰é™ï¼Œä¸é€‚åˆè¶…å¤§å‹ç½‘ç»œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç½‘æ¡¥ä¸äº¤æ¢æœºçš„æ¼”è¿›å…³ç³»"&gt;ğŸ”„ ç½‘æ¡¥ä¸äº¤æ¢æœºçš„æ¼”è¿›å…³ç³»
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥å°†&lt;strong&gt;äº¤æ¢æœº&lt;/strong&gt;ç†è§£ä¸ºä¸€ç§&lt;strong&gt;å¤šç«¯å£çš„ã€æ›´é«˜æ•ˆçš„ç½‘æ¡¥&lt;/strong&gt;ã€‚ç½‘æ¡¥é€šå¸¸åªæœ‰å°‘æ•°å‡ ä¸ªç«¯å£ï¼ˆå¦‚2-4ä¸ªï¼‰ï¼Œè€Œäº¤æ¢æœºåˆ™é›†æˆäº†ä¼—å¤šç«¯å£ï¼ˆå¦‚8ã€24ã€48ä¸ªï¼‰ï¼Œå¹¶ä¸”é‡‡ç”¨ç¡¬ä»¶ASICèŠ¯ç‰‡è¿›è¡Œå¿«é€Ÿè½¬å‘ï¼Œæ€§èƒ½è¿œè¶…è½¯ä»¶è½¬å‘çš„ä¼ ç»Ÿç½‘æ¡¥ã€‚å› æ­¤ï¼Œåœ¨ç°ä»£ç½‘ç»œä¸­ï¼Œäº¤æ¢æœºå·²ç»å‡ ä¹å®Œå…¨å–ä»£äº†ç½‘æ¡¥ï¼Œæˆä¸ºç»„å»ºå±€åŸŸç½‘çš„ä¸»æµè®¾å¤‡ã€‚ä¸è¿‡ï¼Œç†è§£ç½‘æ¡¥çš„å·¥ä½œåŸç†ä»ç„¶æ˜¯æŒæ¡äº¤æ¢æœºä¹ƒè‡³æ•´ä¸ªäºŒå±‚ç½‘ç»œé€šä¿¡çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ç½‘æ¡¥è¿™ä¸€é‡è¦çš„ç½‘ç»œè®¾å¤‡ã€‚å¦‚æœä½ å¯¹ç‰¹å®šç±»å‹çš„ç½‘æ¡¥æˆ–å…¶ç°ä»£åº”ç”¨æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç½‘ç»œé£æš´"&gt;ç½‘ç»œé£æš´
&lt;/h2&gt;&lt;p&gt;ç½‘æ¡¥ä¸ç½‘ç»œé£æš´çš„å…³ç³»ç¡®å®éå¸¸å¯†åˆ‡ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;ç½‘æ¡¥è®¾è®¡ä¸Šçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯è½¬å‘å¹¿æ’­å¸§ï¼Œè€Œç½‘ç»œé£æš´å¸¸å¸¸ç”±äºç½‘æ¡¥å½¢æˆçš„ç‰©ç†ç¯è·¯æˆ–é…ç½®ä¸å½“ï¼ˆå¦‚æœªå¯ç”¨ç”Ÿæˆæ ‘åè®®ï¼‰è€Œå¼•å‘æˆ–åŠ å‰§&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®åŠ©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…³é”®æ–¹é¢&lt;/th&gt;
&lt;th&gt;ç½‘æ¡¥çš„è§’è‰²ä¸ç½‘ç»œé£æš´çš„å…³ç³»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘æ¡¥çš„åŸºæœ¬è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹&lt;strong&gt;æœªçŸ¥ç›®æ ‡å•æ’­å¸§&lt;/strong&gt;å’Œ&lt;strong&gt;å¹¿æ’­å¸§&lt;/strong&gt;è¿›è¡Œ&lt;strong&gt;æ³›æ´ª&lt;/strong&gt;ï¼ˆä»æ‰€æœ‰ç«¯å£è½¬å‘ï¼Œé™¤æ¥æ”¶ç«¯å£ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é£æš´çš„è§¦å‘æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“ç½‘ç»œä¸­å­˜åœ¨&lt;strong&gt;ç‰©ç†ç¯è·¯&lt;/strong&gt;ï¼ˆå¦‚ä¸¤å°ç½‘æ¡¥/äº¤æ¢æœºä¹‹é—´æœ‰å¤šæ¡è¿æ¥ï¼‰æ—¶ï¼Œå¹¿æ’­å¸§ä¼šåœ¨ç¯è·¯ä¸­æ— é™å¾ªç¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é£æš´çš„æ”¾å¤§å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç½‘æ¡¥çš„æ³›æ´ªæœºåˆ¶ä¼šå¤åˆ¶å¹¶ä¼ æ’­å¹¿æ’­æµé‡ï¼Œå¯¼è‡´æµé‡åœ¨ç¯è·¯ä¸­æŒ‡æ•°çº§å¢é•¿ï¼Œå½¢æˆé£æš´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®é˜²å¾¡æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿæˆæ ‘åè®®ï¼ˆSTPï¼‰&lt;/strong&gt; é€šè¿‡é€»è¾‘ä¸Šé˜»å¡ç‰¹å®šç«¯å£æ¥ç ´é™¤ç¯è·¯ï¼Œæ˜¯é˜²æ­¢é£æš´çš„æ ¸å¿ƒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç½‘æ¡¥å¦‚ä½•å·¥ä½œåŠå…¶ä¸é£æš´çš„å…³è”"&gt;ğŸ” ç½‘æ¡¥å¦‚ä½•å·¥ä½œåŠå…¶ä¸é£æš´çš„å…³è”
&lt;/h3&gt;&lt;p&gt;è¦ç†è§£ç½‘æ¡¥å¦‚ä½•å¼•å‘ç½‘ç»œé£æš´ï¼Œé¦–å…ˆè¦æ˜ç™½ç½‘æ¡¥çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶ï¼š&lt;strong&gt;MACåœ°å€å­¦ä¹ å’Œå¸§è½¬å‘&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;MACåœ°å€å­¦ä¹ &lt;/strong&gt;ï¼šç½‘æ¡¥å†…éƒ¨ç»´æŠ¤ä¸€å¼ MACåœ°å€è¡¨ï¼Œè®°å½•æ¯ä¸ªMACåœ°å€å¯ä»¥é€šè¿‡å“ªä¸ªç«¯å£åˆ°è¾¾ã€‚å½“ç½‘æ¡¥ä»ä¸€ä¸ªç«¯å£æ”¶åˆ°æ•°æ®å¸§æ—¶ï¼Œå®ƒä¼šæŸ¥çœ‹å¸§çš„&lt;strong&gt;æºMACåœ°å€&lt;/strong&gt;ï¼Œå¹¶å°†è¯¥åœ°å€ä¸æ¥æ”¶ç«¯å£ç»‘å®šè®°å½•åœ¨è¡¨ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸§çš„è½¬å‘å†³ç­–&lt;/strong&gt;ï¼šå½“éœ€è¦è½¬å‘ä¸€ä¸ªæ•°æ®å¸§æ—¶ï¼Œç½‘æ¡¥æŸ¥çœ‹å¸§çš„&lt;strong&gt;ç›®æ ‡MACåœ°å€&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿‡æ»¤&lt;/strong&gt;ï¼šå¦‚æœç›®æ ‡åœ°å€åœ¨åœ°å€è¡¨ä¸­ï¼Œä¸”å¯¹åº”çš„ç«¯å£ä¸æ”¶åˆ°è¯¥å¸§çš„ç«¯å£ç›¸åŒï¼Œè¯´æ˜ç›®æ ‡è®¾å¤‡å°±åœ¨å‘é€æ–¹æ‰€åœ¨çš„ç½‘æ®µï¼Œç½‘æ¡¥ä¼šä¸¢å¼ƒè¯¥å¸§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬å‘&lt;/strong&gt;ï¼šå¦‚æœç›®æ ‡åœ°å€åœ¨åœ°å€è¡¨ä¸­ï¼Œä½†å¯¹åº”çš„ç«¯å£ä¸åŒï¼Œç½‘æ¡¥ä¼šå°†è¯¥å¸§ä»æ­£ç¡®çš„ç«¯å£è½¬å‘å‡ºå»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³›æ´ª&lt;/strong&gt;ï¼šå¦‚æœç›®æ ‡åœ°å€&lt;strong&gt;ä¸åœ¨&lt;/strong&gt;åœ°å€è¡¨ä¸­ï¼ˆå³æœªçŸ¥å•æ’­åœ°å€ï¼‰æˆ–è€…æ˜¯&lt;strong&gt;å¹¿æ’­åœ°å€&lt;/strong&gt;ï¼Œç½‘æ¡¥ä¼šå°†è¿™ä¸ªå¸§ä»&lt;strong&gt;é™¤æ¥æ”¶ç«¯å£ä¹‹å¤–çš„æ‰€æœ‰å…¶ä»–ç«¯å£&lt;/strong&gt;è½¬å‘å‡ºå»ï¼Œä»¥ç¡®ä¿å¸§èƒ½åˆ°è¾¾ç›®çš„åœ°ã€‚&lt;strong&gt;è¿™ä¸ªâ€œæ³›æ´ªâ€è¡Œä¸ºæ˜¯å¯¼è‡´ç½‘ç»œé£æš´çš„å…³é”®ç¯èŠ‚&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°å¯¹æ¯”æ­£å¸¸æƒ…å†µå’Œé£æš´æƒ…å†µä¸‹çš„æ•°æ®æµåŠ¨ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„æµç¨‹å›¾ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[ç½‘æ¡¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®å¸§] --&amp;gt; B{ç›®æ ‡MACåœ°å€æ˜¯å¦æ˜ç¡®?}
B -- åœ°å€æ˜ç¡® --&amp;gt; C[æ ¹æ®åœ°å€è¡¨ç²¾å‡†è½¬å‘]
C --&amp;gt; D[æ­£å¸¸é€šä¿¡]
B -- æœªçŸ¥æˆ–å¹¿æ’­åœ°å€ --&amp;gt; E[å‘æ‰€æœ‰å…¶ä»–ç«¯å£æ³›æ´ª]
E --&amp;gt; F{ç½‘ç»œä¸­å­˜åœ¨ç‰©ç†ç¯è·¯?}
F -- å¦ --&amp;gt; G[å¸§è¢«æ­£ç¡®ä¸»æœºæ¥æ”¶åæ¶ˆå¤±]
G --&amp;gt; H[ç½‘ç»œè¿è¡Œæ­£å¸¸]
F -- æ˜¯&amp;lt;br&amp;gt;ä¸”æœªè¿è¡ŒSTP --&amp;gt; I[å¸§åœ¨ç¯è·¯ä¸­è¢«æ— é™å¤åˆ¶ä¼ æ’­]
I --&amp;gt; J[å¹¿æ’­é£æš´å‘ç”Ÿ&amp;lt;br&amp;gt;ç½‘ç»œæ€§èƒ½æ€¥å‰§ä¸‹é™æˆ–ç˜«ç—ª]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»å›¾ä¸­å¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œå½“**â€œæ³›æ´ªâ€** é‡ä¸Šäº†**â€œç‰©ç†ç¯è·¯â€&lt;strong&gt;ï¼Œè€Œç½‘æ¡¥åˆæ²¡æœ‰è¿è¡Œ&lt;/strong&gt;ç”Ÿæˆæ ‘åè®®ï¼ˆSTPï¼‰** æ¥é€»è¾‘ä¸Šç ´é™¤è¿™ä¸ªç¯è·¯æ—¶ï¼Œå¹¿æ’­é£æš´å°±å‘ç”Ÿäº†ã€‚ä¸€ä¸ªå¹¿æ’­å¸§ä¼šè¢«ç½‘æ¡¥ä¸æ–­å¤åˆ¶å¹¶åœ¨ç¯è·¯ä¸­å¾ªç¯ï¼Œæ¯å°ç½‘æ¡¥éƒ½ä¼šå¿ å®åœ°æ‰§è¡Œæ³›æ´ªè§„åˆ™ï¼Œå¾ˆå¿«å°±èƒ½è€—å°½ç½‘ç»œå¸¦å®½å’Œè®¾å¤‡çš„CPUèµ„æºã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•é¢„é˜²ä¸è§£å†³"&gt;ğŸ›¡ï¸ å¦‚ä½•é¢„é˜²ä¸è§£å†³
&lt;/h3&gt;&lt;p&gt;äº†è§£äº†é£æš´çš„æˆå› ï¼Œé¢„é˜²å’Œè§£å†³æªæ–½å°±æ¸…æ™°äº†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ç”Ÿæˆæ ‘åè®®ï¼ˆSTPï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æ ¹æœ¬çš„è§£å†³æ–¹æ¡ˆã€‚STPèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«ç½‘ç»œä¸­çš„ç‰©ç†ç¯è·¯ï¼Œå¹¶é€šè¿‡é€»è¾‘ä¸Šé˜»å¡ï¼ˆBlockingï¼‰ç‰¹å®šç«¯å£æ¥æ„å»ºä¸€ä¸ªæ— ç¯è·¯çš„æ ‘å½¢æ‹“æ‰‘ã€‚å½“ä¸»ç”¨é“¾è·¯æ•…éšœæ—¶ï¼Œè¢«é˜»å¡çš„ç«¯å£è¿˜èƒ½è‡ªåŠ¨æ¿€æ´»ï¼Œæ¢å¤è¿é€šæ€§ï¼Œä»è€Œåœ¨ä¿è¯å†—ä½™æ€§çš„åŒæ—¶é¿å…ç¯è·¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…äººä¸ºåˆ›å»ºç¯è·¯&lt;/strong&gt;ï¼šåœ¨è¿›è¡Œç½‘ç»œé…ç½®æ—¶ï¼Œç‰¹åˆ«æ˜¯åƒåœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨è½¯ä»¶ç½‘æ¡¥ï¼ˆå¦‚Linux Bridgeï¼‰æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ä¸è¦å°†åŒä¸€ç½‘æ¡¥çš„ä¸¤ä¸ªæˆ–å¤šä¸ªç«¯å£è¿æ¥åˆ°åŒä¸€å°ç‰©ç†äº¤æ¢æœºçš„åŒä¸€ä¸ªVLANä¸­ï¼Œé™¤éä½ éå¸¸æ¸…æ¥šåæœå¹¶åšå¥½äº†ç¯è·¯é˜²æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆç†çš„ç½‘ç»œè§„åˆ’&lt;/strong&gt;ï¼šå¯¹äºå¤§å‹ç½‘ç»œï¼Œé‡‡ç”¨åˆ†å±‚ã€åˆ†åŒºåŸŸçš„è®¾è®¡ï¼Œåˆ©ç”¨è·¯ç”±å™¨ï¼ˆå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œå¤©ç„¶éš”ç¦»å¹¿æ’­åŸŸï¼‰æ¥åˆ†å‰²å¤§çš„å¹¿æ’­åŸŸï¼Œå¯ä»¥æœ‰æ•ˆé™åˆ¶å¹¿æ’­é£æš´çš„å½±å“èŒƒå›´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œç½‘æ¡¥æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„äºŒå±‚äº’è”è®¾å¤‡ï¼Œä½†å®ƒâ€œå¿ äºèŒå®ˆâ€çš„æ³›æ´ªæœºåˆ¶å’Œç‰©ç†ç¯è·¯ç»“åˆåï¼Œç¡®å®å¯èƒ½æˆä¸ºç½‘ç»œé£æš´çš„â€œå‚¬åŒ–å‰‚â€ã€‚&lt;strong&gt;å¯ç”¨STPç­‰é˜²ç¯è·¯åè®®ã€è¿›è¡Œåˆç†çš„ç½‘ç»œè§„åˆ’å’Œæ“ä½œ&lt;/strong&gt;ï¼Œæ˜¯ç¡®ä¿ç½‘æ¡¥å‘æŒ¥ç§¯æä½œç”¨ã€é¿å…ç½‘ç»œé£æš´çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ç½‘æ¡¥ä¸ç½‘ç»œé£æš´çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹ç”Ÿæˆæ ‘åè®®ï¼ˆSTPï¼‰çš„å…·ä½“å·¥ä½œåŸç†æˆ–å…¶ä»–ç½‘ç»œæŠ€æœ¯æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘Operating System</title><link>https://dyhes.github.io/p/nowcoderoperating-system/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderoperating-system/</guid><description>&lt;h2 id="ç³»ç»Ÿè°ƒç”¨"&gt;ç³»ç»Ÿè°ƒç”¨
&lt;/h2&gt;&lt;p&gt;ã€‚ä½ æä¾›çš„è¿™æ®µåˆ†æéå¸¸å‡†ç¡®å’Œåˆ°ä½ï¼Œå®Œå…¨æ­£ç¡®ã€‚ç³»ç»Ÿè°ƒç”¨ï¼ˆSystem Callï¼‰ç¡®å®æ˜¯æ“ä½œç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½çš„ä½“ç°ï¼Œä¸‹é¢æˆ‘å°†åŸºäºä½ çš„åˆ†æï¼Œå¯¹å…¶è¿›è¡Œæ›´è¯¦ç»†çš„è§£é‡Šå’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;h3 id="-ç³»ç»Ÿè°ƒç”¨è¯¦è§£"&gt;ğŸ” ç³»ç»Ÿè°ƒç”¨è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿä¸ºè¿è¡Œåœ¨å…¶ä¸Šçš„åº”ç”¨ç¨‹åºæä¾›çš„ä¸€å¥—&lt;strong&gt;å—æ§çš„ã€å®‰å…¨çš„æ¥å£&lt;/strong&gt;ã€‚åº”ç”¨ç¨‹åºé€šè¿‡è¿™ç»„æ¥å£æ¥è¯·æ±‚æ“ä½œç³»ç»Ÿå†…æ ¸ä»£ä¸ºæ‰§è¡Œé‚£äº›éœ€è¦&lt;strong&gt;ç‰¹æƒçº§åˆ«&lt;/strong&gt;æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œä¾‹å¦‚è®¿é—®ç¡¬ä»¶è®¾å¤‡ã€ç®¡ç†è¿›ç¨‹ã€æ“ä½œæ–‡ä»¶ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå†…æ ¸è¿è¡Œåœ¨é«˜ç‰¹æƒçº§åˆ«çš„å†…æ ¸æ€ï¼ˆKernel Modeï¼‰ï¼Œè€Œåº”ç”¨ç¨‹åºè¿è¡Œåœ¨ä½ç‰¹æƒçº§åˆ«çš„ç”¨æˆ·æ€ï¼ˆUser Modeï¼‰ï¼Œåº”ç”¨ç¨‹åºä¸èƒ½ç›´æ¥æ‰§è¡Œç‰¹æƒæŒ‡ä»¤æˆ–è®¿é—®å†…æ ¸æ•°æ®ã€‚ç³»ç»Ÿè°ƒç”¨ä¾¿æˆä¸ºäº†ç”¨æˆ·æ€ç¨‹åºä¸»åŠ¨è¿›å…¥å†…æ ¸æ€çš„å”¯ä¸€åˆæ³•é€”å¾„ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆé€‰é¡¹bæ˜¯æ­£ç¡®çš„"&gt;âœ… ä¸ºä»€ä¹ˆé€‰é¡¹Bæ˜¯æ­£ç¡®çš„ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰é¡¹Bï¼šâ€œ&lt;strong&gt;æä¾›ç¼–ç¨‹äººå‘˜çš„æ¥å£&lt;/strong&gt;â€æ˜¯å¯¹ç³»ç»Ÿè°ƒç”¨æœ€æœ¬è´¨çš„æè¿°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¥—æ¥å£ä»¥&lt;strong&gt;å‡½æ•°å½¢å¼&lt;/strong&gt;å‘ˆç°ç»™ç¨‹åºå‘˜ï¼Œä¾‹å¦‚åˆ›å»ºè¿›ç¨‹çš„ &lt;code&gt;fork()&lt;/code&gt;ã€æ‰“å¼€æ–‡ä»¶çš„ &lt;code&gt;open()&lt;/code&gt;ã€ç½‘ç»œé€šä¿¡çš„ &lt;code&gt;socket()&lt;/code&gt;ç­‰ã€‚ç¨‹åºå‘˜åœ¨ç¼–å†™åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨è¿™äº›å‡½æ•°æ¥ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚ç¡¬ä»¶çš„å…·ä½“ç»†èŠ‚ã€‚è¿™å°±å¥½æ¯”é¤å…çš„èœå•æ˜¯ç»™é¡¾å®¢çš„æ¥å£ï¼Œé¡¾å®¢é€šè¿‡ç‚¹èœï¼ˆè°ƒç”¨æ¥å£ï¼‰æ¥äº«å—å¨æˆ¿ï¼ˆæ“ä½œç³»ç»Ÿå†…æ ¸ï¼‰æä¾›çš„æœåŠ¡ï¼Œè€Œæ— éœ€è‡ªå·±äº²è‡ªä¸‹å¨çƒ¹é¥ªï¼ˆç›´æ¥æ“ä½œç¡¬ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å…¶ä»–é€‰é¡¹ä¸ºä½•é”™è¯¯"&gt;âŒ å…¶ä»–é€‰é¡¹ä¸ºä½•é”™è¯¯ï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;A: ä¸€æ¡æœºå™¨æŒ‡ä»¤&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿè°ƒç”¨å¹¶éä¸€æ¡å…·ä½“çš„æœºå™¨æŒ‡ä»¤ã€‚è™½ç„¶è§¦å‘ç³»ç»Ÿè°ƒç”¨é€šå¸¸éœ€è¦é€šè¿‡ä¸€æ¡ç‰¹æ®Šçš„æŒ‡ä»¤ï¼ˆå¦‚ x86 æ¶æ„ä¸Šçš„ &lt;code&gt;int 0x80&lt;/code&gt;æˆ– &lt;code&gt;syscall&lt;/code&gt;ï¼‰æ¥å®ç°ä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢ï¼Œä½†è¿™åªæ˜¯â€œæ•²é—¨â€çš„åŠ¨ä½œã€‚çœŸæ­£çš„ç³»ç»Ÿè°ƒç”¨åŒ…å«äº†ä»å‘èµ·è¯·æ±‚ã€å†…æ ¸å¤„ç†ã€åˆ°è¿”å›ç»“æœçš„å®Œæ•´è¿‡ç¨‹ï¼Œå†…æ ¸ä¸­å¯¹åº”æœ‰å¤æ‚çš„å¤„ç†å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;sys_read&lt;/code&gt;, &lt;code&gt;sys_write&lt;/code&gt;ï¼‰æ¥å®Œæˆå®é™…å·¥ä½œã€‚å› æ­¤ï¼Œå°†å…¶å®šä¹‰ä¸ºâ€œä¸€æ¡æŒ‡ä»¤â€æ˜¯ç‰‡é¢ä¸”ä¸å‡†ç¡®çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;C: ä¸­æ–­å­ç¨‹åºåŒ…&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è¿™ä¸ªé€‰é¡¹æ··æ·†äº†&lt;strong&gt;å®ç°æœºåˆ¶&lt;/strong&gt;å’Œ&lt;strong&gt;æ¥å£æœ¬è´¨&lt;/strong&gt;ã€‚ç³»ç»Ÿè°ƒç”¨çš„å®ç°&lt;strong&gt;ä¾èµ–&lt;/strong&gt;ä¸­æ–­ï¼ˆæˆ–é™·å…¥ï¼‰æœºåˆ¶ä½œä¸ºè¿›å…¥å†…æ ¸çš„æ‰‹æ®µï¼Œä½†å®ƒæœ¬èº«å¹¶ä¸æ˜¯â€œä¸­æ–­å­ç¨‹åºåŒ…â€ã€‚ç³»ç»Ÿè°ƒç”¨çš„æ ¸å¿ƒæ˜¯ä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡æ¥å£ï¼Œè€Œä¸­æ–­æœºåˆ¶åªæ˜¯å®ç°è¿™ä¸ªç›®æ ‡çš„ä¸€ç§æŠ€æœ¯æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;D: ç”¨æˆ·å­ç¨‹åº&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·å­ç¨‹åºï¼ˆæˆ–å‡½æ•°ï¼‰æ˜¯ç”¨æˆ·ç¨‹åºè‡ªèº«çš„ä¸€éƒ¨åˆ†ï¼Œè¿è¡Œåœ¨ç”¨æˆ·æ€ã€‚è€Œç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›çš„ä¸€å¥—é¢„å…ˆå®šä¹‰å¥½çš„ã€æ ‡å‡†çš„æœåŠ¡ä¾‹ç¨‹ï¼Œæ‰§è¡Œåœ¨å†…æ ¸æ€ã€‚ä¸¤è€…è¿è¡Œåœ¨ä¸åŒçš„ç‰¹æƒçº§åˆ«å’Œç©ºé—´ï¼Œæœ‰ç€æ ¹æœ¬çš„åŒºåˆ«ã€‚ä½ å¯ä»¥è°ƒç”¨ç”¨æˆ·å­ç¨‹åºï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ç³»ç»Ÿè°ƒç”¨ï¼Œä½†å‰è€…æ˜¯â€œè‡ªåŠ©â€ï¼Œåè€…æ˜¯â€œè¯·æ±‚å®˜æ–¹æœåŠ¡â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œè¿‡ç¨‹"&gt;âš™ï¸ ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œè¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;ç³»ç»Ÿè°ƒç”¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨ç¨‹åº&lt;/strong&gt;åœ¨ç”¨æˆ·æ€è°ƒç”¨ç³»ç»Ÿè°ƒç”¨å°è£…å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;read()&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å°è£…å‡½æ•°å‡†å¤‡å‚æ•°ï¼Œå¹¶é€šè¿‡&lt;strong&gt;è½¯ä¸­æ–­&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;int 0x80&lt;/code&gt;ï¼‰æˆ–&lt;strong&gt;ä¸“ç”¨æŒ‡ä»¤&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;syscall&lt;/code&gt;ï¼‰è§¦å‘ä»ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;li&gt;CPUåˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œæ ¹æ®&lt;strong&gt;ç³»ç»Ÿè°ƒç”¨å·&lt;/strong&gt;æŸ¥æ‰¾å¹¶æ‰§è¡Œå†…æ ¸ä¸­å¯¹åº”çš„æœåŠ¡ä¾‹ç¨‹ï¼ˆå¦‚ &lt;code&gt;sys_read&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å†…æ ¸æœåŠ¡ä¾‹ç¨‹åœ¨æ ¸å¿ƒæ€å®Œæˆè¯·æ±‚çš„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œå®Œæˆåï¼Œå†…æ ¸å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ç¨‹åºï¼Œå¹¶åˆ‡æ¢å›ç”¨æˆ·æ€ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºç»§ç»­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°"&gt;ğŸ“š ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°
&lt;/h3&gt;&lt;p&gt;å¾ˆå¤šå¸¸è§çš„åº“å‡½æ•°ï¼ˆå¦‚Cæ ‡å‡†åº“ä¸­çš„ &lt;code&gt;printf&lt;/code&gt;, &lt;code&gt;fopen&lt;/code&gt;ï¼‰åœ¨å…¶å†…éƒ¨å°è£…äº†ç³»ç»Ÿè°ƒç”¨ã€‚åº“å‡½æ•°æä¾›äº†æ›´å‹å¥½ã€æ›´é«˜çº§çš„æ¥å£ï¼Œæœ‰æ—¶è¿˜ä¼šæ·»åŠ ç¼“å†²åŒºç­‰ç‰¹æ€§ä»¥æå‡æ•ˆç‡æˆ–æ˜“ç”¨æ€§ã€‚ä½†å¹¶éæ‰€æœ‰åº“å‡½æ•°éƒ½ä¼šè§¦å‘ç³»ç»Ÿè°ƒç”¨ï¼Œä¸€äº›çº¯è®¡ç®—å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;strlen&lt;/code&gt;, &lt;code&gt;sin&lt;/code&gt;ï¼‰å°±ä¸éœ€è¦è¿›å…¥å†…æ ¸ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç³»ç»Ÿè°ƒç”¨çš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šé˜²æ­¢åº”ç”¨ç¨‹åºéšæ„è®¿é—®ç¡¬ä»¶å’Œå†…æ ¸æ•°æ®ï¼Œä¿æŠ¤ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ½è±¡æ€§&lt;/strong&gt;ï¼šä¸ºä¸Šå±‚åº”ç”¨ç¨‹åºæä¾›äº†ç»Ÿä¸€ã€ç®€æ´çš„æ¥å£ï¼Œéšè—äº†åº•å±‚ç¡¬ä»¶çš„å¤æ‚æ€§å’Œå·®å¼‚æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ï¼šé€šè¿‡ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ†ç¦»ï¼Œä¿è¯äº†æ“ä½œç³»ç»Ÿæ ¸å¿ƒä¸ä¼šè¢«åº”ç”¨ç¨‹åºç ´åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œä½ çš„åˆ¤æ–­å®Œå…¨æ­£ç¡®ï¼Œç³»ç»Ÿè°ƒç”¨æœ¬è´¨ä¸Šæ˜¯&lt;strong&gt;æ“ä½œç³»ç»Ÿæä¾›ç»™ç¼–ç¨‹äººå‘˜çš„ä¸€å¥—æ¥å£&lt;/strong&gt;ï¼Œå…è®¸ä»–ä»¬å®‰å…¨ã€æ–¹ä¾¿åœ°ä½¿ç”¨å†…æ ¸æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id="ä¿¡å·é‡"&gt;ä¿¡å·é‡
&lt;/h2&gt;&lt;p&gt;Pã€Væ“ä½œæ˜¯æ“ä½œç³»ç»Ÿä¸­å®ç°&lt;strong&gt;è¿›ç¨‹é—´åŒæ­¥ä¸äº’æ–¥&lt;/strong&gt;çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒä»¬é€šè¿‡æ“ä½œä¸€ä¸ªç§°ä¸º&lt;strong&gt;ä¿¡å·é‡ (Semaphore)&lt;/strong&gt; çš„å˜é‡æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰å¯¹å…±äº«èµ„æºçš„è®¿é—®ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¿¡å·é‡-semaphore"&gt;âš–ï¸ æ ¸å¿ƒæ¦‚å¿µï¼šä¿¡å·é‡ (Semaphore)
&lt;/h3&gt;&lt;p&gt;ä¿¡å·é‡ (&lt;code&gt;S&lt;/code&gt;) æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•´æ•°å˜é‡ï¼Œå…¶å€¼ä»£è¡¨ç€&lt;strong&gt;æŸç§ç³»ç»Ÿèµ„æºçš„å¯ç”¨æ•°é‡&lt;/strong&gt;ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ Pã€V è¿™ä¸¤ä¸ª&lt;strong&gt;åŸå­æ“ä½œ&lt;/strong&gt; (åŸè¯­) æ¥æ”¹å˜ã€‚åŸå­æ“ä½œæ„å‘³ç€è¿™äº›æ“ä½œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œä»è€Œä¿è¯äº†å¹¶å‘ç¯å¢ƒä¸‹çš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¿¡å·é‡çš„å€¼æœ‰å…¶ç‰©ç†æ„ä¹‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;S &amp;gt; 0&lt;/strong&gt;ï¼šè¡¨ç¤ºè¿˜æœ‰ &lt;code&gt;S&lt;/code&gt;ä¸ªèµ„æºå®ä¾‹å¯ä¾›ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S = 0&lt;/strong&gt;ï¼šè¡¨ç¤ºèµ„æºå·²è¢«ç”¨å®Œï¼Œä½†æ— è¿›ç¨‹åœ¨ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;S &amp;lt; 0&lt;/strong&gt;ï¼šå…¶&lt;strong&gt;ç»å¯¹å€¼&lt;/strong&gt;è¡¨ç¤ºæ­£åœ¨&lt;strong&gt;é˜»å¡ç­‰å¾…&lt;/strong&gt;è¯¥èµ„æºçš„è¿›ç¨‹æ•°é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¿¡å·é‡ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº’æ–¥ä¿¡å·é‡ (äºŒè¿›åˆ¶ä¿¡å·é‡)&lt;/strong&gt;ï¼šç”¨äºå®ç°äº’æ–¥ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºä¿¡å·é‡ (è®¡æ•°ä¿¡å·é‡)&lt;/strong&gt;ï¼šç”¨äºå®ç°åŒæ­¥ï¼Œè¡¨ç¤ºå¤šä¸ªå¯ç”¨èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ Pã€V æ“ä½œå¦‚ä½•æ”¹å˜ä¿¡å·é‡å€¼åŠå…¶çŠ¶æ€çš„æµç¨‹ç¤ºæ„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[Pæ“ä½œ: ç”³è¯·èµ„æº] --&amp;gt; B[S = S - 1]
B --&amp;gt; C{S &amp;gt;= 0?}
C -- æ˜¯ --&amp;gt; D[ç”³è¯·æˆåŠŸ, è¿›ç¨‹ç»§ç»­è¿è¡Œ]
C -- å¦ --&amp;gt; E[ç”³è¯·å¤±è´¥, è¿›ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—]
F[Væ“ä½œ: é‡Šæ”¾èµ„æº] --&amp;gt; G[S = S + 1]
G --&amp;gt; H{S &amp;lt;= 0?}
H -- æ˜¯ --&amp;gt; I[æœ‰è¿›ç¨‹åœ¨ç­‰å¾…, å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›ç¨‹]
H -- å¦ --&amp;gt; J[æ— è¿›ç¨‹åœ¨ç­‰å¾…, è¿›ç¨‹ç»§ç»­è¿è¡Œ]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-pv-æ“ä½œè¯¦è§£"&gt;ğŸ› ï¸ Pã€V æ“ä½œè¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-p-æ“ä½œ-wait--proberen--å°è¯•"&gt;1. P æ“ä½œ (Wait / Proberen / å°è¯•)
&lt;/h4&gt;&lt;p&gt;P æ“ä½œæºè‡ªè·å…°è¯­ &amp;ldquo;Proberen&amp;rdquo;ï¼Œæ„ä¸ºâ€œå°è¯•â€ã€‚å®ƒä»£è¡¨&lt;strong&gt;ç”³è¯·èµ„æº&lt;/strong&gt;çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•æè¿°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;P(S) {
S = S - 1; // ç”³è¯·ä¸€ä¸ªèµ„æºå•ä½
if (S &amp;lt; 0) { // æ£€æŸ¥èµ„æºæ˜¯å¦ä¸è¶³
block(); // èµ„æºä¸è¶³ï¼Œè°ƒç”¨é˜»å¡åŸè¯­ï¼Œå½“å‰è¿›ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†ä¿¡å·é‡ &lt;code&gt;S&lt;/code&gt;çš„å€¼å‡ 1ï¼Œè¡¨ç¤ºç”³è¯·ä¸€ä¸ªèµ„æºå•ä½ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥ç»“æœå€¼ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;S &amp;gt;= 0&lt;/code&gt;ï¼Œè¯´æ˜èµ„æºç”³è¯·æˆåŠŸï¼Œè¿›ç¨‹å¯ä»¥&lt;strong&gt;ç»§ç»­æ‰§è¡Œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;S &amp;lt; 0&lt;/code&gt;ï¼Œè¯´æ˜èµ„æºå·²è€—å°½ï¼Œè¿›ç¨‹ä¼šè¢«&lt;strong&gt;é˜»å¡&lt;/strong&gt;å¹¶æ”¾å…¥ä¸è¯¥ä¿¡å·é‡ç›¸å…³çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-v-æ“ä½œ-signal--verhogen--å¢åŠ "&gt;2. V æ“ä½œ (Signal / Verhogen / å¢åŠ )
&lt;/h4&gt;&lt;p&gt;V æ“ä½œæºè‡ªè·å…°è¯­ &amp;ldquo;Verhogen&amp;rdquo;ï¼Œæ„ä¸ºâ€œå¢åŠ â€ã€‚å®ƒä»£è¡¨&lt;strong&gt;é‡Šæ”¾èµ„æº&lt;/strong&gt;çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•æè¿°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;V(S) {
S = S + 1; // é‡Šæ”¾ä¸€ä¸ªèµ„æºå•ä½
if (S &amp;lt;= 0) { // æ£€æŸ¥æ˜¯å¦æœ‰è¿›ç¨‹åœ¨ç­‰å¾…
wakeup(); // æœ‰è¿›ç¨‹åœ¨ç­‰å¾…ï¼Œå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›ç¨‹
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†ä¿¡å·é‡ &lt;code&gt;S&lt;/code&gt;çš„å€¼åŠ  1ï¼Œè¡¨ç¤ºé‡Šæ”¾ä¸€ä¸ªèµ„æºå•ä½ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥ç»“æœå€¼ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;S &amp;lt;= 0&lt;/code&gt;ï¼Œè¯´æ˜ç­‰å¾…é˜Ÿåˆ—ä¸­&lt;strong&gt;æœ‰è¿›ç¨‹åœ¨é˜»å¡ç­‰å¾…&lt;/strong&gt;ï¼Œæ­¤æ—¶ä¼šå”¤é†’å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ï¼Œä½¿å…¶å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;S &amp;gt; 0&lt;/code&gt;ï¼Œè¯´æ˜&lt;strong&gt;æ²¡æœ‰è¿›ç¨‹åœ¨ç­‰å¾…&lt;/strong&gt;è¯¥èµ„æºï¼Œåªéœ€é‡Šæ”¾èµ„æºå³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒç‰¹æ€§ä¸è¦æ±‚"&gt;ğŸ“œ æ ¸å¿ƒç‰¹æ€§ä¸è¦æ±‚
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ€§ (Atomicity)&lt;/strong&gt;ï¼šPã€V æ“ä½œå¿…é¡»æ˜¯&lt;strong&gt;ä¸å¯ä¸­æ–­çš„åŸè¯­&lt;/strong&gt;ã€‚æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½æ’å…¥ä»»ä½•å…¶ä»–æŒ‡ä»¤ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ç«æ€æ¡ä»¶ (Race Condition)ï¼Œè¿™æ˜¯é€šè¿‡ç¡¬ä»¶æœºåˆ¶æˆ–åº•å±‚ç³»ç»Ÿè°ƒç”¨ä¿è¯çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®©æƒç­‰å¾… (Release upon waiting)&lt;/strong&gt;ï¼šå½“ä¸€ä¸ªè¿›ç¨‹åœ¨ P æ“ä½œä¸­å› èµ„æºä¸è¶³è€Œé˜»å¡æ—¶ï¼Œå®ƒå¿…é¡»&lt;strong&gt;ç«‹å³é‡Šæ”¾CPU&lt;/strong&gt;ï¼Œè®©å…¶ä»–è¿›ç¨‹è¿è¡Œï¼Œä»è€Œé¿å…â€œå¿™ç­‰â€ï¼ˆBusy Waitingï¼‰ï¼Œæé«˜CPUåˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡å·é‡åˆå§‹åŒ–&lt;/strong&gt;ï¼šä¿¡å·é‡çš„åˆå€¼éå¸¸é‡è¦ï¼Œå®ƒå†³å®šäº†åˆå§‹èµ„æºçš„æ•°é‡ã€‚
&lt;ul&gt;
&lt;li&gt;ç”¨äº&lt;strong&gt;äº’æ–¥&lt;/strong&gt;çš„äºŒè¿›åˆ¶ä¿¡å·é‡ï¼Œåˆå€¼é€šå¸¸è®¾ä¸º &lt;strong&gt;1&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨äº&lt;strong&gt;åŒæ­¥&lt;/strong&gt;çš„è®¡æ•°ä¿¡å·é‡ï¼Œåˆå€¼é€šå¸¸è®¾ä¸º &lt;strong&gt;å¯ç”¨èµ„æºçš„æ•°é‡ N&lt;/strong&gt;ï¼ˆå¦‚ç¼“å†²åŒºæ•°é‡ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ§© ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;Pã€V æ“ä½œé€šè¿‡ä¿¡å·é‡æœºåˆ¶å·§å¦™åœ°è§£å†³äº†å¹¶å‘ç¼–ç¨‹ä¸­çš„ä¸¤å¤§ç»å…¸é—®é¢˜ï¼š&lt;/p&gt;
&lt;h4 id="1-è¿›ç¨‹äº’æ–¥-mutual-exclusion"&gt;1. è¿›ç¨‹äº’æ–¥ (Mutual Exclusion)
&lt;/h4&gt;&lt;p&gt;ç¡®ä¿&lt;strong&gt;å¤šä¸ªè¿›ç¨‹æ— æ³•åŒæ—¶è¿›å…¥&lt;/strong&gt;è®¿é—®ä¸´ç•Œèµ„æºï¼ˆä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºï¼‰çš„ä»£ç æ®µï¼ˆä¸´ç•ŒåŒºï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®ç°æ–¹æ³•&lt;/strong&gt;ï¼šä½¿ç”¨ä¸€ä¸ª&lt;strong&gt;åˆå€¼ä¸º 1&lt;/strong&gt; çš„äº’æ–¥ä¿¡å·é‡ &lt;code&gt;mutex&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// è¿›ç¨‹ Pi
P(mutex); // ç”³è¯·è¿›å…¥ä¸´ç•ŒåŒº
// ä¸´ç•ŒåŒºä»£ç  (è®¿é—®å…±äº«èµ„æº)
V(mutex); // ç¦»å¼€ä¸´ç•ŒåŒºï¼Œé‡Šæ”¾èµ„æº
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-è¿›ç¨‹åŒæ­¥-synchronization"&gt;2. è¿›ç¨‹åŒæ­¥ (Synchronization)
&lt;/h4&gt;&lt;p&gt;åè°ƒå¤šä¸ªç›¸äº’åˆä½œçš„è¿›ç¨‹ï¼Œè®©å®ƒä»¬æŒ‰&lt;strong&gt;é¢„æœŸçš„å…ˆåé¡ºåº&lt;/strong&gt;æ‰§è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»å…¸é—®é¢˜ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®æ”¾å…¥ç¼“å†²åŒºï¼Œæ¶ˆè´¹è€…ä»ç¼“å†²åŒºå–æ•°æ®æ¶ˆè´¹ã€‚éœ€è¦ä¿è¯ï¼šç¼“å†²åŒºæ»¡æ—¶ç”Ÿäº§è€…ä¸ç”Ÿäº§ï¼›ç¼“å†²åŒºç©ºæ—¶æ¶ˆè´¹è€…ä¸æ¶ˆè´¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ–¹æ³•&lt;/strong&gt;ï¼šä½¿ç”¨&lt;strong&gt;ä¸‰ä¸ªä¿¡å·é‡&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;empty&lt;/code&gt;ï¼šåˆå€¼ä¸º &lt;strong&gt;N&lt;/strong&gt;ï¼Œè¡¨ç¤º&lt;strong&gt;ç©ºç¼“å†²åŒºæ•°é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;full&lt;/code&gt;ï¼šåˆå€¼ä¸º &lt;strong&gt;0&lt;/strong&gt;ï¼Œè¡¨ç¤º&lt;strong&gt;æ»¡ç¼“å†²åŒºæ•°é‡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mutex&lt;/code&gt;ï¼šåˆå€¼ä¸º &lt;strong&gt;1&lt;/strong&gt;ï¼Œç”¨äºå¯¹ç¼“å†²åŒºæœ¬èº«çš„&lt;strong&gt;äº’æ–¥è®¿é—®&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç”Ÿäº§è€…è¿›ç¨‹
while (true) {
ç”Ÿäº§ä¸€ä¸ªäº§å“;
P(empty); // ç”³è¯·ä¸€ä¸ªç©ºç¼“å†²åŒº
P(mutex); // ç”³è¯·è¿›å…¥ç¼“å†²åŒºä¸´ç•ŒåŒº
å°†äº§å“æ”¾å…¥ç¼“å†²åŒº;
V(mutex); // ç¦»å¼€ç¼“å†²åŒºä¸´ç•ŒåŒº
V(full); // é‡Šæ”¾ï¼ˆå¢åŠ ï¼‰ä¸€ä¸ªæ»¡ç¼“å†²åŒº
}
// æ¶ˆè´¹è€…è¿›ç¨‹
while (true) {
P(full); // ç”³è¯·ä¸€ä¸ªæ»¡ç¼“å†²åŒºï¼ˆæœ‰äº§å“å¯æ¶ˆè´¹ï¼‰
P(mutex); // ç”³è¯·è¿›å…¥ç¼“å†²åŒºä¸´ç•ŒåŒº
ä»ç¼“å†²åŒºå–å‡ºä¸€ä¸ªäº§å“;
V(mutex); // ç¦»å¼€ç¼“å†²åŒºä¸´ç•ŒåŒº
V(empty); // é‡Šæ”¾ï¼ˆå¢åŠ ï¼‰ä¸€ä¸ªç©ºç¼“å†²åŒº
æ¶ˆè´¹äº§å“;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­»é” (Deadlock)&lt;/strong&gt;ï¼šä¸å½“ä½¿ç”¨ P æ“ä½œå¯èƒ½å¯¼è‡´æ­»é”ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªè¿›ç¨‹å„è‡ªæŒæœ‰å¯¹æ–¹æ‰€éœ€çš„èµ„æºä¸”äº’ä¸é‡Šæ”¾ï¼ŒåŒæ—¶åˆç›¸äº’ç­‰å¾…ã€‚éœ€&lt;strong&gt;è°¨æ…è®¾è®¡ P æ“ä½œçš„é¡ºåº&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šPã€V æ“ä½œæ¶‰åŠå†…æ ¸æ€åˆ‡æ¢ï¼ˆå°¤å…¶æ˜¯å®ç°é˜»å¡å’Œå”¤é†’æ—¶ï¼‰ï¼Œè™½é¿å…äº†å¿™ç­‰ï¼Œä½†&lt;strong&gt;æ¯æ¬¡æ“ä½œéƒ½æœ‰ä¸€å®šçš„ç³»ç»Ÿå¼€é”€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼–ç¨‹å¤æ‚åº¦&lt;/strong&gt;ï¼šä½¿ç”¨åº•å±‚ Pã€V åŸè¯­è¿›è¡ŒåŒæ­¥äº’æ–¥ç¼–ç¨‹&lt;strong&gt;å®¹æ˜“å‡ºé”™&lt;/strong&gt;ï¼Œå› æ­¤åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ›´æ¨èä½¿ç”¨é«˜çº§è¯­è¨€æä¾›çš„ã€å°è£…å¥½çš„åŒæ­¥å·¥å…·ï¼ˆå¦‚äº’æ–¥é”ã€æ¡ä»¶å˜é‡ã€ä¿¡å·é‡ç±»ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç°ä»£å®ç°ä¸æ€»ç»“"&gt;ğŸ’¡ ç°ä»£å®ç°ä¸æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åœ¨ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒPã€V æ“ä½œçš„åŸç†è¢«å°è£…æˆäº†æ›´æ˜“ç”¨çš„åŒæ­¥å·¥å…·ã€‚ä¾‹å¦‚ï¼Œåœ¨ Java ä¸­ï¼Œ&lt;code&gt;java.util.concurrent.Semaphore&lt;/code&gt;ç±»ä¸­çš„ &lt;code&gt;acquire()&lt;/code&gt;æ–¹æ³•å³ P æ“ä½œï¼Œ&lt;code&gt;release()&lt;/code&gt;æ–¹æ³•å³ V æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;Pã€V æ“ä½œæ˜¯ç†è§£æ“ä½œç³»ç»Ÿå¹¶å‘æ§åˆ¶æœºåˆ¶çš„åŸºçŸ³ã€‚å®ƒä»¬é€šè¿‡&lt;strong&gt;ä¿¡å·é‡&lt;/strong&gt;è¿™ä¸€ç®€å•è€Œå¼ºå¤§çš„æ¦‚å¿µï¼Œé…åˆå…¶&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;é˜»å¡å”¤é†’&lt;/strong&gt;æœºåˆ¶ï¼Œæœ‰æ•ˆè§£å†³äº†è¿›ç¨‹é—´çš„äº’æ–¥ä¸åŒæ­¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ¸…æ¥šåœ°ç†è§£ Pã€V æ“ä½œï¼&lt;/p&gt;
&lt;h2 id="semophore"&gt;Semophore
&lt;/h2&gt;&lt;p&gt;â€œSemaphoreâ€ï¼ˆä¿¡å·é‡ï¼‰è¿™ä¸ªæ¦‚å¿µçš„å®šä¹‰å’Œå®ç°ï¼Œèåˆäº†&lt;strong&gt;è¯æºå­¦çš„å†å²ç§¯æ·€&lt;/strong&gt;å’Œ&lt;strong&gt;è®¡ç®—æœºç§‘å­¦çš„å¼€åˆ›æ€§ç ”ç©¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿäº†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»å®ƒçš„æ ¸å¿ƒå®šä¹‰æ¥æºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¥æºç»´åº¦&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒå†…å®¹&lt;/th&gt;
&lt;th&gt;å…³é”®äººç‰©/æ¥æº&lt;/th&gt;
&lt;th&gt;æ—¶é—´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯æºä¸æ—©æœŸåº”ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æºè‡ªå¸Œè…Šè¯­ &amp;ldquo;sÄ“ma&amp;rdquo;ï¼ˆç¬¦å·ï¼‰å’Œ &amp;ldquo;phoros&amp;rdquo;ï¼ˆæºå¸¦è€…ï¼‰ï¼ŒæŒ‡ç‰©ç†ä¿¡å·è£…ç½®ï¼ˆå¦‚æ——è¯­ã€é“è·¯è‡‚æ¿ä¿¡å·æœºï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;æ³•è¯­è¯ &lt;code&gt;sÃ©maphore&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1814å¹´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¡ç®—æœºç§‘å­¦å®šä¹‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±Dijkstraæå‡ºï¼Œä½œä¸º&lt;strong&gt;åŒæ­¥åŸè¯­&lt;/strong&gt;ï¼Œé€šè¿‡P/Væ“ä½œè§£å†³å¹¶å‘é—®é¢˜ã€‚&lt;/td&gt;
&lt;td&gt;Edsger W. Dijkstra&lt;/td&gt;
&lt;td&gt;1960å¹´ä»£&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ›´è¯¦ç»†çš„è§£é‡Šï¼š&lt;/p&gt;
&lt;h3 id="-è¯æºä¸æ—©æœŸå«ä¹‰"&gt;ğŸ“œ è¯æºä¸æ—©æœŸå«ä¹‰
&lt;/h3&gt;&lt;p&gt;â€œSemaphoreâ€ä¸€è¯çš„è¯æºå¯ä»¥è¿½æº¯åˆ°å¤å¸Œè…Šè¯­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;sÄ“ma&lt;/strong&gt; (Ïƒá¿†Î¼Î±)ï¼šæ„ä¸ºâ€œ&lt;strong&gt;ç¬¦å·ã€æ ‡å¿—ã€ä¿¡å·&lt;/strong&gt;â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;phoros&lt;/strong&gt; (Ï†ÏŒÏÎ¿Ï‚)ï¼šæºè‡ª &lt;strong&gt;pherein&lt;/strong&gt; (Ï†Î­ÏÎµÎ¹Î½)ï¼Œæ„ä¸ºâ€œ&lt;strong&gt;æºå¸¦ã€è¿é€&lt;/strong&gt;â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤§çº¦åœ¨1814å¹´ï¼Œæ³•è¯­ä¸­å½¢æˆäº† &lt;strong&gt;&lt;code&gt;sÃ©maphore&lt;/code&gt;&lt;/strong&gt; è¿™ä¸ªè¯ï¼Œå­—é¢æ„æ€å°±æ˜¯â€œ&lt;strong&gt;ä¿¡å·çš„æºå¸¦è€…&lt;/strong&gt;â€ã€‚æœ€åˆï¼Œå®ƒæŒ‡çš„æ˜¯å„ç§ç”¨äº&lt;strong&gt;è¿œè·ç¦»è§†è§‰é€šä¿¡çš„æœºæ¢°è£…ç½®&lt;/strong&gt;ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ——è¯­ç³»ç»Ÿ&lt;/strong&gt;ï¼šæ“ä½œå‘˜é€šè¿‡æ‰‹æŒä¸¤é¢æ——å¸œçš„ä¸åŒä½ç½®æ¥ç¼–ç å­—æ¯å’Œæ•°å­—ï¼Œå®ç°è¿œè·ç¦»é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é“è·¯è‡‚æ¿ä¿¡å·æœº&lt;/strong&gt;ï¼šé€šè¿‡æœºæ¢°è‡‚çš„ä¸åŒä½ç½®æ¥å‘ç«è½¦å¸æœºä¼ é€’ä¿¡å·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›æ—©æœŸåº”ç”¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯&lt;strong&gt;é€šè¿‡ä¸€å¥—ç¼–ç çš„ç‰©ç†çŠ¶æ€æ¥ä¼ é€’ä¿¡æ¯å’Œæ§åˆ¶æŒ‡ä»¤&lt;/strong&gt;ï¼Œè¿™ä¸åæ¥åœ¨è®¡ç®—æœºç§‘å­¦ä¸­çš„æŠ½è±¡æ¦‚å¿µä¸€è„‰ç›¸æ‰¿ã€‚&lt;/p&gt;
&lt;h3 id="-è®¡ç®—æœºç§‘å­¦ä¸­çš„å®šä¹‰ä¸èµ·æº"&gt;ğŸ’» è®¡ç®—æœºç§‘å­¦ä¸­çš„å®šä¹‰ä¸èµ·æº
&lt;/h3&gt;&lt;p&gt;åœ¨è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œâ€œSemaphoreâ€ä½œä¸ºä¸€ç§&lt;strong&gt;åŒæ­¥åŸè¯­&lt;/strong&gt;ï¼Œå…¶ç°ä»£å®šä¹‰å’Œæ ¸å¿ƒæ€æƒ³ä¸»è¦ç”±è·å…°è®¡ç®—æœºç§‘å­¦å®¶&lt;strong&gt;è‰¾å…¹æ ¼Â·è¿ªç§‘æ–¯å½»&lt;/strong&gt;æå‡ºçš„ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒç›®çš„&lt;/strong&gt;ï¼šè§£å†³&lt;strong&gt;å¤šè¿›ç¨‹ï¼ˆæˆ–å¤šçº¿ç¨‹ï¼‰ç¯å¢ƒä¸‹çš„åŒæ­¥ä¸äº’æ–¥é—®é¢˜&lt;/strong&gt;ï¼Œé˜²æ­¢å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºå¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ¨¡å‹&lt;/strong&gt;ï¼šä¸€ä¸ªä¿¡å·é‡é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªæ•´æ•°è®¡æ•°å™¨&lt;/strong&gt;ï¼šè¡¨ç¤ºå¯ç”¨èµ„æºçš„æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—&lt;/strong&gt;ï¼šå½“èµ„æºä¸å¯ç”¨æ—¶ï¼Œé˜»å¡å¹¶å­˜æ”¾ç­‰å¾…çš„è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸¤ä¸ªåŸå­æ“ä½œ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Pæ“ä½œ&lt;/strong&gt; (æ¥è‡ªè·å…°è¯­ &lt;code&gt;Probeer&lt;/code&gt;ï¼Œæ„ä¸ºâ€œå°è¯•â€)ï¼šä¹Ÿç§°ä¸º &lt;code&gt;wait&lt;/code&gt;, &lt;code&gt;down&lt;/code&gt;æˆ– &lt;code&gt;acquire&lt;/code&gt;ã€‚æ­¤æ“ä½œä¼šå°è¯•è·å–èµ„æºï¼Œä½¿è®¡æ•°å™¨å‡1ã€‚è‹¥ç»“æœå°äº0ï¼Œåˆ™é˜»å¡å½“å‰è¿›ç¨‹ï¼Œå¹¶å°†å…¶æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Væ“ä½œ&lt;/strong&gt; (æ¥è‡ªè·å…°è¯­ &lt;code&gt;Verhoog&lt;/code&gt;ï¼Œæ„ä¸ºâ€œå¢åŠ â€)ï¼šä¹Ÿç§°ä¸º &lt;code&gt;signal&lt;/code&gt;, &lt;code&gt;up&lt;/code&gt;æˆ– &lt;code&gt;release&lt;/code&gt;ã€‚æ­¤æ“ä½œä¼šé‡Šæ”¾èµ„æºï¼Œä½¿è®¡æ•°å™¨åŠ 1ã€‚è‹¥ç»“æœå°äºæˆ–ç­‰äº0ï¼ˆæ„å‘³ç€æœ‰è¿›ç¨‹åœ¨ç­‰å¾…ï¼‰ï¼Œåˆ™ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªè¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»è¦ç±»å‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡æ•°ä¿¡å·é‡&lt;/strong&gt;ï¼šå…¶æ•´æ•°å€¼åŸŸä¸å—é™åˆ¶ï¼Œç”¨äºæ§åˆ¶å¯¹å¤šä¸ªåŒç±»èµ„æºçš„è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äºŒè¿›åˆ¶ä¿¡å·é‡&lt;/strong&gt;ï¼šæ•´æ•°å€¼åªèƒ½ä¸º0æˆ–1ï¼Œå¸¸ç”¨äºå®ç°äº’æ–¥é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿ªç§‘æ–¯å½»åœ¨1965å¹´æå‡ºäº†è¿™ä¸€æ¦‚å¿µï¼Œåœ¨ç®¡ç¨‹ï¼ˆMonitorï¼‰å‡ºç°ä¹‹å‰ï¼Œä¿¡å·é‡å‡ ä¹æ˜¯å¹¶å‘ç¼–ç¨‹é¢†åŸŸçš„éœ¸ä¸»ï¼Œå‡ ä¹æ‰€æœ‰å¹¶å‘ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒä¿¡å·é‡æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h3 id="-åœ¨ç°ä»£ç¼–ç¨‹ä¸­çš„åº”ç”¨"&gt;âš™ï¸ åœ¨ç°ä»£ç¼–ç¨‹ä¸­çš„åº”ç”¨
&lt;/h3&gt;&lt;p&gt;ä¿¡å·é‡çš„æ€æƒ³å·²è¢«å¤šç§ç¼–ç¨‹è¯­è¨€å’Œåº“å®ç°å’Œå¹¿æ³›åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨Javaä¸­ï¼Œ&lt;code&gt;java.util.concurrent.Semaphore&lt;/code&gt;ç±»æä¾›äº†ä¸°å¯Œçš„APIï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ–¹æ³•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;acquire()&lt;/code&gt;: è·å–ä¸€ä¸ªè®¸å¯ï¼ˆå¯¹åº”Pæ“ä½œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;release()&lt;/code&gt;: é‡Šæ”¾ä¸€ä¸ªè®¸å¯ï¼ˆå¯¹åº”Væ“ä½œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tryAcquire()&lt;/code&gt;: å°è¯•è·å–è®¸å¯ï¼Œè‹¥æ— æ³•ç«‹å³è·å–åˆ™è¿”å›falseï¼Œä¸ä¼šé˜»å¡çº¿ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¬å¹³æ€§&lt;/strong&gt;ï¼šæ”¯æŒå…¬å¹³æ¨¡å¼ï¼ˆæŒ‰è¯·æ±‚é¡ºåºåˆ†é…è®¸å¯ï¼‰å’Œéå…¬å¹³æ¨¡å¼ï¼ˆå…è®¸â€œæ’é˜Ÿâ€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™æµ&lt;/strong&gt;ï¼šé™åˆ¶åŒæ—¶è®¿é—®æŸèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ± ç®¡ç†&lt;/strong&gt;ï¼šå¦‚æ•°æ®åº“è¿æ¥æ± ã€å¯¹è±¡æ± ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å…¨é¢åœ°ç†è§£â€œSemaphoreâ€çš„ç”±æ¥ä¸å‘å±•ã€‚&lt;/p&gt;
&lt;h2 id="ä¸­æ–­å±è”½"&gt;ä¸­æ–­å±è”½
&lt;/h2&gt;&lt;p&gt;ä¸­æ–­å±è”½æ˜¯æ“ä½œç³»ç»Ÿä¸­ä¸€é¡¹å…³é”®çš„æŠ€æœ¯ï¼Œä¸»è¦ç”¨äº&lt;strong&gt;ç®¡ç†ç¡¬ä»¶ä¸­æ–­çš„å“åº”&lt;/strong&gt;ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨æ‰§è¡Œå…³é”®ä»»åŠ¡æ—¶ä¸è¢«æ„å¤–æ‰“æ–­ã€‚å®ƒé€šè¿‡æš‚æ—¶ç¦æ­¢CPUå“åº”ç‰¹å®šæˆ–å…¨éƒ¨ä¸­æ–­è¯·æ±‚ï¼Œæ¥ä¿è¯ä¸´ç•ŒåŒºä»£ç çš„åŸå­æ€§å’Œæ•°æ®ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ä¸­æ–­å±è”½çš„æ ¸å¿ƒå†…å®¹ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæ–¹é¢&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¹æœ¬ç›®çš„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿è¯ä¸´ç•ŒåŒºæ“ä½œçš„åŸå­æ€§&lt;/strong&gt;ï¼Œé˜²æ­¢å¹¶å‘è®¿é—®å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´å’Œç«æ€æ¡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æ‰§è¡Œå…³é”®ä»£ç å‰&lt;strong&gt;å±è”½ï¼ˆç¦ç”¨ï¼‰ä¸­æ–­&lt;/strong&gt;ï¼Œæ‰§è¡Œå®Œæ¯•åç«‹å³æ¢å¤ï¼Œä½¿CPUåœ¨æ­¤æœŸé—´ä¸å“åº”ä¸­æ–­è¯·æ±‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¡¬ä»¶æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡CPUçš„&lt;strong&gt;ä¸­æ–­æ ‡å¿—ä½&lt;/strong&gt;ï¼ˆå¦‚x86çš„IFä½ï¼‰å’Œ&lt;strong&gt;ä¸­æ–­æ§åˆ¶å™¨&lt;/strong&gt;ï¼ˆå¦‚PICã€APICï¼‰æ¥å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è½¯ä»¶å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿæä¾›APIï¼ˆå¦‚&lt;code&gt;local_irq_disable()&lt;/code&gt;ï¼‰æ¥æ§åˆ¶ä¸­æ–­å±è”½çŠ¶æ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;å…¨å±€ä¸­æ–­å±è”½&lt;/strong&gt;ï¼šç¦ç”¨æ‰€æœ‰å¯å±è”½ä¸­æ–­ã€‚ 2. &lt;strong&gt;å±€éƒ¨ä¸­æ–­å±è”½&lt;/strong&gt;ï¼šä»…ç¦ç”¨ç‰¹å®šä¸­æ–­æºæˆ–ä¸­æ–­ä¼˜å…ˆçº§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ã€é«˜æ•ˆï¼Œèƒ½æœ‰æ•ˆä¿è¯çŸ­æœŸæ“ä½œçš„åŸå­æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ»¥ç”¨æˆ–é•¿æ—¶é—´å±è”½ä¼šå¯¼è‡´ç³»ç»Ÿ&lt;strong&gt;å“åº”æ€§ä¸‹é™&lt;/strong&gt;ã€&lt;strong&gt;ä¸¢å¤±ä¸­æ–­äº‹ä»¶&lt;/strong&gt;ï¼Œç”šè‡³å¯èƒ½å¼•å‘&lt;strong&gt;æ­»é”&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œå…±äº«æ•°æ®ç»“æ„ã€ç¡¬ä»¶å¯„å­˜å™¨ç¼–ç¨‹ã€å®ç°ç®€å•çš„åŒæ­¥åŸè¯­ç­‰&lt;strong&gt;çŸ­æ—¶å…³é”®æ“ä½œ&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸­æ–­å±è”½å¦‚ä½•å·¥ä½œ"&gt;âš™ï¸ ä¸­æ–­å±è”½å¦‚ä½•å·¥ä½œ
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­å±è”½çš„å®ç°ä¾èµ–äº&lt;strong&gt;ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„ååŒå·¥ä½œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡¬ä»¶åŸºç¡€ï¼šCPUä¸­æ–­æ ‡å¿—ä¸ä¸­æ–­æ§åˆ¶å™¨&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç°ä»£CPUå†…éƒ¨æœ‰ä¸€ä¸ª&lt;strong&gt;ä¸­æ–­æ ‡å¿—ä½&lt;/strong&gt;ï¼ˆå¦‚x86æ¶æ„çš„&lt;code&gt;IF&lt;/code&gt;ä½ï¼‰ã€‚å½“è¯¥æ ‡å¿—ä½è¢«æ¸…é™¤æ—¶ï¼ŒCPUä¼š&lt;strong&gt;å¿½ç•¥æ‰€æœ‰å¯å±è”½ä¸­æ–­è¯·æ±‚&lt;/strong&gt;ï¼ˆNMIç­‰ä¸å¯å±è”½ä¸­æ–­é™¤å¤–ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­æ§åˆ¶å™¨&lt;/strong&gt;ï¼ˆå¦‚8259A PICæˆ–ç°ä»£çš„APICï¼‰ç®¡ç†ç€æ¥è‡ªå¤šä¸ªç¡¬ä»¶çš„ä¸­æ–­è¯·æ±‚ã€‚å®ƒå¯ä»¥é…ç½®&lt;strong&gt;ä¸­æ–­å±è”½å¯„å­˜å™¨&lt;/strong&gt;ï¼Œä»è€Œå…è®¸è½¯ä»¶&lt;strong&gt;æœ‰é€‰æ‹©åœ°å±è”½ç‰¹å®šä¸­æ–­æº&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½¯ä»¶å®ç°ï¼šæ“ä½œç³»ç»ŸAPI&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿä¼šæä¾›ä¸€å¥—å°è£…å¥½çš„æ¥å£ä¾›å†…æ ¸å¼€å‘è€…ä½¿ç”¨ï¼Œä»¥å±è”½å’Œæ¢å¤ä¸­æ–­ã€‚ä¾‹å¦‚åœ¨Linuxå†…æ ¸ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;local_irq_disable()&lt;/code&gt;: ç¦ç”¨å½“å‰CPUçš„æ‰€æœ‰å¯å±è”½ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;local_irq_enable()&lt;/code&gt;: å¯ç”¨å½“å‰CPUçš„æ‰€æœ‰å¯å±è”½ä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;local_irq_save(flags)&lt;/code&gt;: ä¿å­˜å½“å‰ä¸­æ–­çŠ¶æ€å¹¶ç¦ç”¨ä¸­æ–­ï¼Œä¹‹åå¯ç”¨&lt;code&gt;local_irq_restore(flags)&lt;/code&gt;æ¢å¤ä¹‹å‰çš„çŠ¶æ€ã€‚è¿™å¯¹äºåµŒå¥—è°ƒç”¨æˆ–éœ€è¦æ¢å¤åŸçŠ¶æ€çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åº•å±‚åŸç†&lt;/strong&gt;ï¼šè¿™äº›APIå‡½æ•°æœ€ç»ˆä¼šç”Ÿæˆç‰¹å®šçš„CPUæŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼Œåœ¨x86ä¸Šï¼Œ&lt;code&gt;cli&lt;/code&gt;æŒ‡ä»¤ç”¨äºæ¸…é™¤IFä½ï¼ˆå…³ä¸­æ–­ï¼‰ï¼Œ&lt;code&gt;sti&lt;/code&gt;æŒ‡ä»¤ç”¨äºè®¾ç½®IFä½ï¼ˆå¼€ä¸­æ–­ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸­æ–­å±è”½çš„ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ›¡ï¸ ä¸­æ–­å±è”½çš„ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­å±è”½ä¸»è¦ç”¨äºéœ€è¦&lt;strong&gt;ç»å¯¹åŸå­æ€§&lt;/strong&gt;çš„çŸ­æ“ä½œä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œå†…æ ¸å…±äº«æ•°æ®ç»“æ„&lt;/strong&gt;ï¼šå½“å¤šä¸ªä¸­æ–­å¤„ç†ç¨‹åºæˆ–ä¸Šä¸‹æ–‡å¯èƒ½è®¿é—®åŒä¸€ä¸ªé“¾è¡¨ã€è®¡æ•°å™¨ç­‰æ•°æ®ç»“æ„æ—¶ï¼ŒçŸ­æš‚çš„å±è”½å¯ä»¥é˜²æ­¢æ•°æ®ä¸ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶å¯„å­˜å™¨ç¼–ç¨‹&lt;/strong&gt;ï¼šåœ¨é…ç½®ç¡¬ä»¶è®¾å¤‡å¯„å­˜å™¨æ—¶ï¼Œéœ€è¦ç¡®ä¿ä¸€ç³»åˆ—å†™æ“ä½œä¸è¢«ä¸­æ–­ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ç¡¬ä»¶å¤„äºä¸å¯é¢„æµ‹çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°åŒæ­¥åŸè¯­&lt;/strong&gt;ï¼šåœ¨å®ç°è‡ªæ—‹é”ç­‰åº•å±‚åŒæ­¥æœºåˆ¶æ—¶ï¼Œé€šå¸¸éœ€è¦é…åˆä¸­æ–­å±è”½æ¥é˜²æ­¢æ­»é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜²æ­¢ä¸­æ–­åµŒå¥—&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œä¸€ä¸ªä¸­æ–­å¤„ç†ç¨‹åºæ—¶ï¼Œå¯èƒ½éœ€è¦æš‚æ—¶å±è”½åŒçº§æˆ–æ›´ä½ä¼˜å…ˆçº§çš„ä¸­æ–­ï¼Œä»¥ä¿è¯å½“å‰å¤„ç†ç¨‹åºçš„å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸­æ–­å±è”½çš„ç¼ºç‚¹ä¸æ³¨æ„äº‹é¡¹"&gt;âš ï¸ ä¸­æ–­å±è”½çš„ç¼ºç‚¹ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­å±è”½æ˜¯ä¸€æŠŠ&lt;strong&gt;é”‹åˆ©çš„åŒåˆƒå‰‘&lt;/strong&gt;ï¼Œå¿…é¡»è°¨æ…ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç ´åç³»ç»Ÿå®æ—¶æ€§&lt;/strong&gt;ï¼šé•¿æ—¶é—´å±è”½ä¸­æ–­ä¼šå¯¼è‡´ç³»ç»Ÿ&lt;strong&gt;æ— æ³•åŠæ—¶å“åº”å¤–éƒ¨äº‹ä»¶&lt;/strong&gt;ã€‚è¿™ä¼šä½¿ç½‘ç»œåŒ…ä¸¢å¤±ã€ç£ç›˜I/Oå»¶è¿Ÿå¢é«˜ï¼Œåœ¨å®æ—¶ç³»ç»Ÿä¸­å¯èƒ½å¯¼è‡´ä»»åŠ¡è¶…æ—¶å¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯èƒ½å¯¼è‡´ä¸­æ–­ä¸¢å¤±&lt;/strong&gt;ï¼šåœ¨ä¸­æ–­è¢«å±è”½æœŸé—´å‘ç”Ÿçš„ä¸­æ–­è¯·æ±‚å¯èƒ½ä¼šè¢«&lt;strong&gt;ç›´æ¥ä¸¢å¼ƒ&lt;/strong&gt;ï¼Œé™¤éç¡¬ä»¶æ”¯æŒæ’é˜Ÿï¼Œå¦åˆ™è¯¥äº‹ä»¶å°†æ— æ³•å¾—åˆ°å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”é£é™©&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœåœ¨æŒæœ‰&lt;strong&gt;è‡ªæ—‹é”&lt;/strong&gt;çš„åŒæ—¶å±è”½äº†ä¸­æ–­ï¼Œè€Œå¦ä¸€ä¸ªä¸­æ–­å¤„ç†ç¨‹åºè¯•å›¾è·å–åŒä¸€ä¸ªé”ï¼Œç³»ç»Ÿå°±ä¼šæ­»é”ã€‚ä¸­æ–­å¤„ç†ç¨‹åºä¼šä¸€ç›´è‡ªæ—‹ï¼Œå› ä¸ºé”çš„æŒæœ‰è€…æ— æ³•è¢«è°ƒåº¦æ‰§è¡Œï¼ˆä¸­æ–­è¢«å±è”½äº†ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼ŒLinuxå†…æ ¸ä¸­æœ‰æ¡è§„åˆ™ï¼š&lt;strong&gt;åœ¨æŒæœ‰è‡ªæ—‹é”çš„åŒæ—¶ï¼Œå¿…é¡»ç¦ç”¨æœ¬åœ°CPUä¸­æ–­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šå¤„ç†å™¨ï¼ˆSMPï¼‰ç³»ç»Ÿçš„å±€é™æ€§&lt;/strong&gt;ï¼šä¸­æ–­å±è”½é€šå¸¸æ˜¯&lt;strong&gt;æ¯CPU&lt;/strong&gt;çš„ã€‚åœ¨ä¸€ä¸ªCPUä¸Šç¦ç”¨ä¸­æ–­&lt;strong&gt;å¹¶ä¸å½±å“å…¶ä»–CPU&lt;/strong&gt;ã€‚å› æ­¤ï¼Œå®ƒä¸èƒ½è§£å†³å¤šå¤„ç†å™¨é—´çš„å¹¶å‘é—®é¢˜ï¼Œéœ€è¦ä¸è‡ªæ—‹é”ç­‰æœºåˆ¶é…åˆä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç¼–ç¨‹ç¤ºä¾‹ä¸æœ€ä½³å®è·µ"&gt;ğŸ“ ç¼–ç¨‹ç¤ºä¾‹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µæ˜¯ï¼šå°½å¯èƒ½ç¼©çŸ­ä¸­æ–­å±è”½çš„æ—¶é—´&lt;/strong&gt;ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå±è”½æ—¶é—´åº”æ˜¯&lt;strong&gt;å¸¸æ•°çº§&lt;/strong&gt;çš„ï¼Œå¹¶ä¸”ä¸ä»»ä½•å¤æ‚æ“ä½œï¼ˆå¦‚å¾ªç¯ã€ç­‰å¾…ï¼‰æ— å…³ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;unsigned long flags;
// ä¿å­˜å½“å‰ä¸­æ–­çŠ¶æ€å¹¶ç¦ç”¨ä¸­æ–­
local_irq_save(flags);
// --- ä¸´ç•ŒåŒºå¼€å§‹ ---
// è¿™é‡Œæ‰§è¡Œå¿…é¡»åŸå­åŒ–çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š
// ä¿®æ”¹ä»…è¢«å½“å‰CPUè®¿é—®çš„å…±äº«å˜é‡
// å¯¹è®¾å¤‡å¯„å­˜å™¨è¿›è¡Œä¸€ç³»åˆ—å¿«é€Ÿçš„å†™å…¥æ“ä½œ
// --- ä¸´ç•ŒåŒºç»“æŸ ---
// æ¢å¤ä¹‹å‰çš„ä¸­æ–­çŠ¶æ€
local_irq_restore(flags);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä¸­æ–­å±è”½ä¸å…¶ä»–æŠ€æœ¯çš„æ¯”è¾ƒ"&gt;ğŸ’¡ ä¸­æ–­å±è”½ä¸å…¶ä»–æŠ€æœ¯çš„æ¯”è¾ƒ
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœºåˆ¶&lt;/th&gt;
&lt;th&gt;ç²’åº¦&lt;/th&gt;
&lt;th&gt;å¼€é”€&lt;/th&gt;
&lt;th&gt;é€‚ç”¨èŒƒå›´&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸­æ–­å±è”½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;CPUçº§åˆ«&lt;/td&gt;
&lt;td&gt;æä½&lt;/td&gt;
&lt;td&gt;å•CPUå†…éƒ¨çš„å¹¶å‘&lt;/td&gt;
&lt;td&gt;ç®€å•ç²—æš´ï¼Œé€‚ç”¨äºæçŸ­çš„å…³é”®æ®µï¼Œå½±å“æ•´ä¸ªCPUçš„å“åº”æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªæ—‹é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®çº§åˆ«&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;SMPç³»ç»Ÿé—´çš„å¹¶å‘&lt;/td&gt;
&lt;td&gt;åœ¨ç­‰å¾…æ—¶å¿™ç­‰ï¼ŒæŒæœ‰æ—¶é—´å¿…é¡»éå¸¸çŸ­ã€‚å¸¸ä¸ä¸­æ–­å±è”½é…åˆä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡å·é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡çœ ç­‰å¾…&lt;/td&gt;
&lt;td&gt;è¾ƒé«˜&lt;/td&gt;
&lt;td&gt;é•¿ä¸´ç•ŒåŒºã€å¯ç¡çœ ä¸Šä¸‹æ–‡&lt;/td&gt;
&lt;td&gt;å¦‚æœè·å–ä¸åˆ°é”ï¼Œè¿›ç¨‹ä¼šç¡çœ ï¼Œå¼€é”€è¾ƒå¤§ï¼Œä½†ä¸ä¼šå¿™ç­‰æ¶ˆè€—CPUã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä¸­æ–­å±è”½æ˜¯ä¸€ç§&lt;strong&gt;å¼ºå¤§ä½†å±é™©&lt;/strong&gt;çš„åº•å±‚åŒæ­¥æœºåˆ¶ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºä¸º&lt;strong&gt;å•å¤„ç†å™¨&lt;/strong&gt;ç³»ç»Ÿæä¾›äº†ä¸€ç§&lt;strong&gt;æœ€ç®€å•ã€æœ€é«˜æ•ˆ&lt;/strong&gt;çš„æ–¹æ³•æ¥ç¡®ä¿çŸ­æœŸæ“ä½œçš„åŸå­æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è®°ä½å®ƒçš„&lt;strong&gt;æ ¸å¿ƒåŸåˆ™&lt;/strong&gt;ï¼š&lt;strong&gt;å¿«è¿›å¿«å‡º&lt;/strong&gt;ã€‚å±è”½ä¸­æ–­çš„æ—¶é—´è¶ŠçŸ­è¶Šå¥½ï¼Œç†æƒ³æƒ…å†µä¸‹åªåŒ…å«å‡ åæ¡æŒ‡ä»¤ã€‚åœ¨ç°ä»£å¤šæ ¸ç³»ç»Ÿä¸­ï¼Œä¸­æ–­å±è”½é€šå¸¸éœ€è¦ä¸è‡ªæ—‹é”ç­‰æœºåˆ¶ç»“åˆä½¿ç”¨ï¼Œä»¥è§£å†³å¤šå¤„ç†å™¨é—´çš„å¹¶å‘é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å…¨é¢åœ°ç†è§£ä¸­æ–­å±è”½æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;h2 id="çŸ­ä½œä¸šä¼˜å…ˆ"&gt;çŸ­ä½œä¸šä¼˜å…ˆ
&lt;/h2&gt;&lt;p&gt;ä½ æåˆ°çš„è¿™ä¸ªè§‚ç‚¹ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›ç¨‹è°ƒåº¦ä¸­ä¸€ä¸ªéå¸¸ç»å…¸ä¸”é‡è¦çš„ç­–ç•¥ã€‚å®ƒä¸»è¦åŸºäº &lt;strong&gt;I/Oè®¾å¤‡ä¸CPUçš„å¹¶è¡Œå·¥ä½œèƒ½åŠ›&lt;/strong&gt;ï¼Œä»¥åŠ&lt;strong&gt;ä¸åŒè¿›ç¨‹ç±»å‹çš„ç‰¹æ€§å·®å¼‚&lt;/strong&gt;ï¼Œæ—¨åœ¨æœ€å¤§åŒ–ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡å’Œèµ„æºåˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼å¯¹æ¯”è¿™ä¸¤ç±»è¿›ç¨‹çš„å…³é”®ç‰¹å¾å’Œè°ƒåº¦ç­–ç•¥ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹å¾ç»´åº¦&lt;/th&gt;
&lt;th&gt;I/Oå¯†é›†å‹è¿›ç¨‹ (I/O-Bound)&lt;/th&gt;
&lt;th&gt;è®¡ç®—å¯†é›†å‹è¿›ç¨‹ (CPU-Bound)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç‰¹ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¢‘ç¹è¿›è¡ŒI/Oæ“ä½œï¼ˆå¦‚æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯·æ±‚ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸»è¦è¿›è¡Œå¤§é‡è®¡ç®—ï¼ˆå¦‚ç§‘å­¦è®¡ç®—ã€æ•°æ®åŠ å¯†ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CPUä½¿ç”¨æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çªå‘å¼ä½¿ç”¨&lt;/strong&gt;ï¼šå‘èµ·I/Oè¯·æ±‚åï¼Œåœ¨ç­‰å¾…å“åº”æœŸé—´&lt;strong&gt;ä¸»åŠ¨è®©å‡ºCPU&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŒç»­å ç”¨&lt;/strong&gt;ï¼šé•¿æ—¶é—´å ç”¨CPUè¿›è¡Œè®¡ç®—ï¼Œ&lt;strong&gt;ä¸æ„¿é‡Šæ”¾CPU&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹èµ„æºéœ€æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´ä¾èµ–I/Oè®¾å¤‡é€Ÿåº¦&lt;/td&gt;
&lt;td&gt;æ›´ä¾èµ–CPUè®¡ç®—èƒ½åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çŸ­æ—¶é—´è®¡ç®— â†’ å‘èµ·I/O â†’ ç­‰å¾… â†’ â€¦ (å¾ªç¯)&lt;/td&gt;
&lt;td&gt;é•¿æ—¶é—´è®¡ç®— â†’ å¶å°”å¯èƒ½è¿›è¡ŒI/O â†’ â€¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜å…ˆè°ƒåº¦æ•ˆæœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®©å…¶å°½å¿«å‘èµ·I/Oï¼Œä½¿CPUå’ŒI/Oè®¾å¤‡&lt;strong&gt;å¹¶è¡Œå·¥ä½œ&lt;/strong&gt;ï¼Œå‡å°‘CPUç©ºé—²ç­‰å¾…æ—¶é—´&lt;/td&gt;
&lt;td&gt;è‹¥é•¿æœŸå ç”¨CPUï¼Œä¼šå¯¼è‡´å…¶ä»–è¿›ç¨‹ï¼ˆåŒ…æ‹¬I/Oå¯†é›†å‹ï¼‰ç­‰å¾…ï¼Œ&lt;strong&gt;é™ä½ç³»ç»Ÿæ•´ä½“ååé‡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§è°ƒåº¦ç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;èµ‹äºˆæ›´é«˜ä¼˜å…ˆçº§&lt;/strong&gt;ã€&lt;strong&gt;æ›´çŸ­çš„æ—¶é—´ç‰‡&lt;/strong&gt;ï¼ˆä»¥æ»¡è¶³å…¶é¢‘ç¹å‘I/Oè¯·æ±‚çš„ç‰¹æ€§ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½ä¼˜å…ˆçº§&lt;/strong&gt;ã€&lt;strong&gt;è¾ƒé•¿çš„æ—¶é—´ç‰‡&lt;/strong&gt;ï¼ˆä»¥å‡å°‘è¿›ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œä¿è¯å…¶è®¡ç®—æ•ˆç‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆè¿™æ ·è°ƒåº¦èƒ½æé«˜åˆ©ç”¨ç‡"&gt;ğŸ”„ ä¸ºä»€ä¹ˆè¿™æ ·è°ƒåº¦èƒ½æé«˜åˆ©ç”¨ç‡ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è¿™ç§è°ƒåº¦ç­–ç•¥çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š&lt;strong&gt;è®©CPUå’ŒI/Oè®¾å¤‡éƒ½å°½å¯èƒ½åœ°â€œå¿™â€èµ·æ¥&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯è®©ä¸€æ–¹ç©ºé—²ç­‰å¾…å¦ä¸€æ–¹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨ç­‰å¾…æ—¶é—´ï¼Œå®ç°â€œé‡å æ“ä½œâ€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;I/Oæ“ä½œï¼ˆå¦‚è¯»å†™ç£ç›˜ã€ç½‘ç»œä¼ è¾“ï¼‰çš„é€Ÿåº¦è¿œæ¯”CPUè®¡ç®—æ…¢å¾—å¤šã€‚å½“ä¸€ä¸ªI/Oå¯†é›†å‹è¿›ç¨‹å‘èµ·ä¸€ä¸ªI/Oè¯·æ±‚åï¼Œå®ƒå¿…é¡»&lt;strong&gt;ç­‰å¾…&lt;/strong&gt;è¿™ä¸ªç›¸å¯¹ç¼“æ…¢çš„æ“ä½œå®Œæˆã€‚å¦‚æœæ­¤æ—¶æ“ä½œç³»ç»Ÿ&lt;strong&gt;ç«‹å³å°†CPUåˆ†é…ç»™å¦ä¸€ä¸ªå°±ç»ªçš„è¿›ç¨‹&lt;/strong&gt;ï¼ˆå¾ˆå¯èƒ½æ˜¯è®¡ç®—å¯†é›†å‹è¿›ç¨‹ï¼‰ï¼Œé‚£ä¹ˆå°±åœ¨&lt;strong&gt;I/Oè®¾å¤‡è¿›è¡Œå·¥ä½œçš„åŒæ—¶ï¼ŒCPUä¹Ÿåœ¨ä¸ºå¦ä¸€ä¸ªè¿›ç¨‹æœåŠ¡&lt;/strong&gt;ã€‚è¿™å°±å®ç°äº†CPUå’ŒI/Oè®¾å¤‡çš„å¹¶è¡Œå·¥ä½œï¼Œæå¤§åœ°æé«˜äº†ç³»ç»Ÿæ•´ä½“çš„èµ„æºåˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ»¡è¶³I/Oè¿›ç¨‹çš„ç‰¹æ€§éœ€æ±‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;I/Oå¯†é›†å‹è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±â€œè®¡ç®—-Burstâ€å’Œâ€œI/O-Burstâ€äº¤æ›¿ç»„æˆçš„ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯å¸Œæœ›&lt;strong&gt;å°½å¿«å¾—åˆ°CPU&lt;/strong&gt;ï¼Œä»¥ä¾¿å¿«é€Ÿå‘èµ·ä¸‹ä¸€ä¸ªI/Oè¯·æ±‚ï¼Œç„¶åç»§ç»­ç­‰å¾…ã€‚å¦‚æœè®©å®ƒç­‰å¾…å¤ªä¹…ï¼Œä¸ä»…å®ƒçš„å“åº”æ—¶é—´å˜é•¿ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œ&lt;strong&gt;å®ƒæ— æ³•å°½å¿«è®©I/Oè®¾å¤‡å¿™ç¢Œèµ·æ¥&lt;/strong&gt;ï¼Œä»è€Œæµªè´¹äº†I/Oèµ„æºã€‚èµ‹äºˆå…¶é«˜ä¼˜å…ˆçº§å’ŒçŸ­æ—¶é—´ç‰‡ï¼Œæ­£å¥½å¥‘åˆäº†å®ƒâ€œå¿«æ¥å¿«èµ°â€çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…CPUè¿›ç¨‹â€œéœ¸å â€èµ„æº&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;è®¡ç®—å¯†é›†å‹è¿›ç¨‹ä¸€æ—¦è·å¾—CPUï¼Œå°±å€¾å‘äºé•¿æ—¶é—´å ç”¨ã€‚å¦‚æœè®©å®ƒä¼˜å…ˆæˆ–å¹³ç­‰åœ°è¿è¡Œï¼Œå®ƒå¾ˆå¯èƒ½ä¼šæŒç»­å ç”¨CPUå¾ˆé•¿æ—¶é—´ï¼Œå¯¼è‡´é‚£äº›éœ€è¦é¢‘ç¹å‘I/Oçš„è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­è‹¦è‹¦ç­‰å¾…ã€‚è¿™ä¼šä½¿I/Oè®¾å¤‡æ— äº‹å¯åšï¼ˆå› ä¸ºæ²¡æœ‰è¿›ç¨‹ç»™å®ƒä¸‹è¾¾æ–°çš„I/OæŒ‡ä»¤ï¼‰ï¼Œæœ€ç»ˆå¯¼è‡´&lt;strong&gt;CPUå¿™ï¼Œè€ŒI/Oè®¾å¤‡é—²&lt;/strong&gt;çš„èµ„æºåˆ©ç”¨ä¸å‡è¡¡å±€é¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸€ä¸ªç”ŸåŠ¨çš„ç±»æ¯”"&gt;ğŸ“Š ä¸€ä¸ªç”ŸåŠ¨çš„ç±»æ¯”
&lt;/h3&gt;&lt;p&gt;æƒ³è±¡ä¸€ä¸ª&lt;strong&gt;å¨å¸ˆï¼ˆCPUï¼‰&lt;/strong&gt; å’Œä¸€å°&lt;strong&gt;çƒ¤ç®±ï¼ˆI/Oè®¾å¤‡ï¼‰&lt;/strong&gt; åœ¨å¨æˆ¿é‡Œå·¥ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;I/Oå¯†é›†å‹è¿›ç¨‹&lt;/strong&gt;å°±åƒ&lt;strong&gt;å‡†å¤‡è›‹ç³•èƒš&lt;/strong&gt;çš„åŠ©æ‰‹ï¼šä»–çš„å·¥ä½œæµç¨‹æ˜¯ï¼šå¿«é€Ÿæ…æ‹Œä¸€ä¸‹é¢ç³Šï¼ˆçŸ­æš‚è®¡ç®—ï¼‰â†’ æŠŠæ¨¡å…·æ”¾å…¥çƒ¤ç®±ï¼Œè®¾å®šæ—¶é—´ï¼ˆå‘èµ·I/Oè¯·æ±‚ï¼‰â†’ &lt;strong&gt;ç­‰å¾…çƒ¤ç®±çƒ˜çƒ¤ï¼ˆç­‰å¾…I/Oï¼‰&lt;/strong&gt; â†’ çƒ¤ç®±å®ä¸€å£°åå–å‡ºè›‹ç³•ï¼ˆI/Oå®Œæˆï¼‰â†’ è¿›è¡Œä¸‹ä¸€æ­¥è£…é¥°ï¼ˆçŸ­æš‚è®¡ç®—ï¼‰&amp;hellip;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—å¯†é›†å‹è¿›ç¨‹&lt;/strong&gt;å°±åƒ&lt;strong&gt;æ‰‹å·¥é›•åˆ»å†°é›•&lt;/strong&gt;çš„å¤§å¸ˆï¼šä»–éœ€è¦&lt;strong&gt;æŒç»­ä¸æ–­åœ°&lt;/strong&gt;ä¸“æ³¨é›•åˆ»ï¼ˆé•¿æ—¶é—´è®¡ç®—ï¼‰ï¼Œä¸­é—´å‡ ä¹ä¸åœæ­‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœè®©&lt;strong&gt;é›•åˆ»å¤§å¸ˆï¼ˆCPUå¯†é›†å‹ï¼‰&lt;/strong&gt; ä¸€ç›´éœ¸å ç€å·¥ä½œå°ï¼ˆCPUï¼‰ï¼Œé‚£ä¹ˆå‡†å¤‡è›‹ç³•èƒšçš„åŠ©æ‰‹å°±åªèƒ½å¹²ç­‰ç€ï¼Œæ— æ³•å°†è›‹ç³•æ”¾å…¥çƒ¤ç®±ï¼Œå¯¼è‡´&lt;strong&gt;çƒ¤ç®±ï¼ˆI/Oè®¾å¤‡ï¼‰å…¨ç¨‹é—²ç½®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;èªæ˜çš„å¨æˆ¿ç®¡ç†å‘˜ï¼ˆ&lt;strong&gt;æ“ä½œç³»ç»Ÿè°ƒåº¦å™¨&lt;/strong&gt;ï¼‰çš„ç­–ç•¥æ˜¯ï¼š&lt;strong&gt;ä¼˜å…ˆè®©åŠ©æ‰‹ï¼ˆI/Oå¯†é›†å‹ï¼‰å·¥ä½œ&lt;/strong&gt;ã€‚è®©ä»–å¿«é€Ÿç”¨å®Œå·¥ä½œå°ï¼Œå¥½è®©çƒ¤ç®±ç«‹åˆ»è¿è½¬èµ·æ¥ã€‚åœ¨çƒ¤ç®±å·¥ä½œçš„æ¼«é•¿ç­‰å¾…æ—¶é—´é‡Œï¼Œå†æŠŠå·¥ä½œå°åˆ†é…ç»™é›•åˆ»å¤§å¸ˆã€‚è¿™æ ·ï¼Œ&lt;strong&gt;åœ¨çƒ¤ç®±çƒ˜çƒ¤çš„åŒæ—¶ï¼Œé›•åˆ»å·¥ä½œä¹Ÿåœ¨è¿›è¡Œ&lt;/strong&gt;ï¼Œå¨å¸ˆå’Œçƒ¤ç®±éƒ½å¾—åˆ°äº†é«˜æ•ˆåˆ©ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¼˜å…ˆè°ƒåº¦I/Oå¯†é›†å‹è¿›ç¨‹çš„ç²¾é«“æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h3 id="-å®é™…è°ƒåº¦ç®—æ³•ä¸­çš„åº”ç”¨"&gt;âš™ï¸ å®é™…è°ƒåº¦ç®—æ³•ä¸­çš„åº”ç”¨
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªæ€æƒ³åœ¨ç°ä»£æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ç®—æ³•ä¸­å¾—åˆ°äº†å……åˆ†ä½“ç°ï¼Œæœ€è‘—åçš„å°±æ˜¯&lt;strong&gt;å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼ˆMLFQï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—&lt;/strong&gt;ï¼šæ–°è¿›ç¨‹æˆ–&lt;strong&gt;I/Oå¯†é›†å‹è¿›ç¨‹&lt;/strong&gt;é€šå¸¸è¢«æ”¾å…¥é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚è¿™äº›é˜Ÿåˆ—çš„&lt;strong&gt;æ—¶é—´ç‰‡å¾ˆçŸ­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è°ƒæ•´&lt;/strong&gt;ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹åœ¨ç”¨å®Œå¾ˆçŸ­çš„æ—¶é—´ç‰‡åä¸»åŠ¨æ”¾å¼ƒCPUï¼ˆé€šå¸¸æ˜¯å‘ç”Ÿäº†I/Oæ“ä½œï¼‰ï¼Œè¯´æ˜å®ƒå¯èƒ½æ˜¯I/Oå¯†é›†å‹ï¼Œæ“ä½œç³»ç»Ÿä¼š&lt;strong&gt;ä¿æŒå…¶é«˜ä¼˜å…ˆçº§&lt;/strong&gt;ï¼Œä½¿å…¶ä¸‹æ¬¡èƒ½å¾ˆå¿«è¢«è°ƒåº¦ï¼Œä»¥å¤„ç†I/Oç»“æœå¹¶å‘èµ·ä¸‹ä¸€æ¬¡I/Oã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒ©ç½šè®¡ç®—å¯†é›†å‹&lt;/strong&gt;ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹æ¯æ¬¡éƒ½ç”¨å®Œæ•´ä¸ªæ—¶é—´ç‰‡ï¼Œè¯´æ˜å®ƒå¯èƒ½æ˜¯è®¡ç®—å¯†é›†å‹ï¼Œæ“ä½œç³»ç»Ÿä¼š&lt;strong&gt;é€æ­¥é™ä½å…¶ä¼˜å…ˆçº§&lt;/strong&gt;ï¼Œå°†å…¶ç§»åˆ°æ›´ä½çº§çš„é˜Ÿåˆ—ã€‚ä½çº§é˜Ÿåˆ—&lt;strong&gt;æ—¶é—´ç‰‡æ›´é•¿&lt;/strong&gt;ï¼Œå‡å°‘äº†é¢‘ç¹è°ƒåº¦åˆ‡æ¢çš„å¼€é”€ï¼Œé€‚åˆé•¿æ—¶é—´è®¡ç®—ï¼Œä½†åŒæ—¶å®ƒä¹Ÿè®©å‡ºäº†é«˜ä¼˜å…ˆçº§çš„è°ƒåº¦æœºä¼šç»™å…¶ä»–è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„ä¸ä¾‹å¤–"&gt;âš ï¸ æ³¨æ„ä¸ä¾‹å¤–
&lt;/h3&gt;&lt;p&gt;å½“ç„¶ï¼Œè¿™ä¸ªç­–ç•¥å¹¶éç»å¯¹ï¼Œéœ€è¦æ ¹æ®å®é™…åœºæ™¯æƒè¡¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶ç³»ç»Ÿ&lt;/strong&gt;ï¼šåœ¨å®æ—¶ç³»ç»Ÿä¸­ï¼Œä»»åŠ¡çš„ä¼˜å…ˆçº§é¦–å…ˆç”±å…¶&lt;strong&gt;æ—¶æ•ˆæ€§&lt;/strong&gt;å†³å®šï¼Œå¯èƒ½ä¸€ä¸ªè®¡ç®—å¯†é›†å‹ä½†æˆªæ­¢æœŸé™ç´§è¿«çš„è¿›ç¨‹ä¼šè·å¾—æœ€é«˜ä¼˜å…ˆçº§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·ä½“éªŒ&lt;/strong&gt;ï¼šå‰å°äº¤äº’å¼ç¨‹åºï¼ˆå¦‚ç”¨æˆ·ç‚¹å‡»é¼ æ ‡ã€é”®ç›˜è¾“å…¥ï¼‰é€šå¸¸è¢«è§†ä¸ºI/Oå¯†é›†å‹ï¼Œèµ‹äºˆé«˜ä¼˜å…ˆçº§ä»¥ä¿è¯å“åº”é€Ÿåº¦ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼›åå°è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚è§†é¢‘æ¸²æŸ“ï¼‰åˆ™ä¼˜å…ˆçº§è¾ƒä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é¥¥é¥¿ï¼ˆStarvationï¼‰&lt;/strong&gt;ï¼šè™½ç„¶è®¡ç®—å¯†é›†å‹è¿›ç¨‹ä¼˜å…ˆçº§è¾ƒä½ï¼Œä½†è°ƒåº¦å™¨å¿…é¡»ä¿è¯å®ƒä»¬æœ€ç»ˆä¹Ÿèƒ½è·å¾—CPUæ—¶é—´ï¼Œé¿å…å…¶æ— é™æœŸåœ°ç­‰å¾…ï¼Œè¿™å°±æ˜¯â€œå…¬å¹³æ€§â€çš„è€ƒé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ å½»åº•ç†è§£æ“ä½œç³»ç»Ÿè°ƒåº¦ç­–ç•¥èƒŒåçš„æ™ºæ…§ï¼&lt;/p&gt;
&lt;h2 id="é˜»å¡å’ŒæŒ‚èµ·"&gt;é˜»å¡å’ŒæŒ‚èµ·
&lt;/h2&gt;&lt;p&gt;è¿›ç¨‹çš„&lt;strong&gt;æŒ‚èµ·ï¼ˆSuspendï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;é˜»å¡ï¼ˆBlockedï¼‰&lt;/strong&gt; æ˜¯æ“ä½œç³»ç»Ÿç®¡ç†è¿›ç¨‹æ—¶ä¸¤ç§é‡è¦çš„çŠ¶æ€ï¼Œå®ƒä»¬éƒ½æ„å‘³ç€è¿›ç¨‹æš‚æ—¶æ— æ³•è¿è¡Œï¼Œä½†&lt;strong&gt;åŸå› ã€æœºåˆ¶å’Œå¯¹ç³»ç»Ÿèµ„æºçš„å½±å“å®Œå…¨ä¸åŒ&lt;/strong&gt;ã€‚ä¸ºäº†å¸®ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒåŒºåˆ«ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»å®ƒä»¬çš„å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;é˜»å¡ (Blocked)&lt;/th&gt;
&lt;th&gt;æŒ‚èµ· (Suspended)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨åŸå› &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹&lt;strong&gt;ä¸»åŠ¨&lt;/strong&gt;ç­‰å¾…èµ„æºæˆ–äº‹ä»¶ï¼ˆå¦‚I/Oæ“ä½œã€è·å–é”ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¢«åŠ¨&lt;/strong&gt;å“åº”ç³»ç»Ÿå’Œç”¨æˆ·éœ€æ±‚ï¼ˆå¦‚å†…å­˜ä¸è¶³ã€è°ƒè¯•ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å§‹ç»ˆ&lt;strong&gt;é©»ç•™åœ¨å†…å­˜&lt;/strong&gt;ä¸­&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹è¢«ä»å†…å­˜&lt;strong&gt;ç§»å‡ºè‡³å¤–å­˜&lt;/strong&gt;ï¼ˆå¦‚ç£ç›˜äº¤æ¢åŒºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºå ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å ç”¨å†…å­˜&lt;/strong&gt;ç©ºé—´ï¼Œç­‰å¾…äº‹ä»¶&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å ç”¨å†…å­˜&lt;/strong&gt;ï¼Œä»…å ç”¨å¤–å­˜ç©ºé—´ï¼Œé‡Šæ”¾å†…å­˜èµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¢å¤æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰€&lt;strong&gt;ç­‰å¾…çš„ç‰¹å®šèµ„æºå¯ç”¨æˆ–äº‹ä»¶å‘ç”Ÿ&lt;/strong&gt;ï¼ˆå¦‚I/Oå®Œæˆï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦&lt;strong&gt;ç³»ç»Ÿæˆ–ç”¨æˆ·æ˜¾å¼æ¿€æ´»&lt;/strong&gt;ï¼ˆå¦‚è°ƒè¯•ç»“æŸã€å†…å­˜å……è¶³ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çŠ¶æ€è½¬æ¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜»å¡ â†’ å°±ç»ª (å½“ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿ)&lt;/td&gt;
&lt;td&gt;æŒ‚èµ· â†’ å°±ç»ª/é˜»å¡ (éœ€å…ˆè¢«æ¿€æ´»å¹¶è°ƒå›å†…å­˜)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸è§åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç­‰å¾…ç½‘ç»œæ•°æ®ã€è¯»å–ç£ç›˜æ–‡ä»¶ã€ç”³è¯·äº’æ–¥é”&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶è¢«æ¢å‡ºã€ç”¨æˆ·æ‰‹åŠ¨æš‚åœè°ƒè¯•ã€ç¨‹åºé•¿æ—¶é—´ä¸æ´»è·ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ„ŸçŸ¥å¯¹è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ˜¯è¿›ç¨‹è‡ªèº«è¡Œä¸ºå¯¼è‡´çš„&lt;/td&gt;
&lt;td&gt;ç”±æ“ä½œç³»ç»Ÿæˆ–ç”¨æˆ·å‘èµ·çš„é’ˆå¯¹è¿›ç¨‹çš„æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è¯¦ç»†äº†è§£é˜»å¡"&gt;ğŸ” è¯¦ç»†äº†è§£é˜»å¡
&lt;/h3&gt;&lt;p&gt;é˜»å¡æ˜¯è¿›ç¨‹çš„ä¸€ç§&lt;strong&gt;ä¸»åŠ¨è¡Œä¸º&lt;/strong&gt;ã€‚è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦ç­‰å¾…æŸä¸ªå¤–éƒ¨äº‹ä»¶å‘ç”Ÿï¼ˆå¦‚å®ŒæˆI/Oæ“ä½œã€è·å–ä¸€ä¸ªä¿¡å·é‡æˆ–é”ç­‰ï¼‰ï¼Œè€Œè¯¥äº‹ä»¶æ— æ³•ç«‹å³æ»¡è¶³ï¼Œè¿›ç¨‹å°±ä¼š&lt;strong&gt;è‡ªå·±ä¸»åŠ¨æ”¾å¼ƒCPU&lt;/strong&gt;ï¼Œå¹¶è¿›å…¥é˜»å¡çŠ¶æ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿›ç¨‹&lt;strong&gt;å§‹ç»ˆé©»ç•™åœ¨å†…å­˜ä¸­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¿›ç¨‹ä¼šåŠ å…¥å¯¹åº”äº‹ä»¶çš„&lt;strong&gt;ç­‰å¾…é˜Ÿåˆ—&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å½“ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿåï¼ˆå¦‚æ•°æ®è¯»å–å®Œæ¯•ï¼‰ï¼Œç”±æ“ä½œç³»ç»Ÿæˆ–ç›¸å…³è¿›ç¨‹å°†å…¶&lt;strong&gt;å”¤é†’&lt;/strong&gt;ï¼Œå¹¶å°†å…¶çŠ¶æ€ç½®ä¸º&lt;strong&gt;å°±ç»ª&lt;/strong&gt;ï¼Œé‡æ–°ç­‰å¾…CPUè°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒ° ä¾‹å­&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªè¿›ç¨‹è¯·æ±‚è¯»å–ç£ç›˜æ–‡ä»¶ã€‚åœ¨å‘å‡ºè¯»å–è¯·æ±‚åï¼Œç”±äºç£ç›˜I/Oé€Ÿåº¦è¿œæ…¢äºCPUï¼Œè¿›ç¨‹ä¼š&lt;strong&gt;ä¸»åŠ¨é˜»å¡è‡ªå·±&lt;/strong&gt;ï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ï¼ˆåœ¨Linuxä¸­å¸¸ä¸º&lt;strong&gt;Sï¼ˆå¯ä¸­æ–­ç¡çœ ï¼‰&lt;/strong&gt; æˆ– &lt;strong&gt;Dï¼ˆä¸å¯ä¸­æ–­ç¡çœ ï¼‰&lt;/strong&gt; çŠ¶æ€ï¼‰ï¼Œç­‰å¾…ç£ç›˜I/Oå®Œæˆã€‚å½“ç£ç›˜æ•°æ®å‡†å¤‡å¥½åï¼Œä¸­æ–­å¤„ç†ç¨‹åºä¼šå”¤é†’è¯¥è¿›ç¨‹ï¼Œä½¿å…¶å›åˆ°å°±ç»ªé˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¯¦ç»†äº†è§£æŒ‚èµ·"&gt;ğŸ” è¯¦ç»†äº†è§£æŒ‚èµ·
&lt;/h3&gt;&lt;p&gt;æŒ‚èµ·æ˜¯&lt;strong&gt;ç”±æ“ä½œç³»ç»Ÿæˆ–ç”¨æˆ·å‘èµ·&lt;/strong&gt;çš„ä¸€ç§&lt;strong&gt;è¢«åŠ¨è¡Œä¸º&lt;/strong&gt;ã€‚å…¶æ ¸å¿ƒç›®çš„æ˜¯&lt;strong&gt;è…¾å‡ºå®è´µçš„å†…å­˜ç©ºé—´&lt;/strong&gt;ã€‚å½“ç³»ç»Ÿå†…å­˜èµ„æºç´§å¼ æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šé€‰æ‹©å°†ä¸€äº›æš‚æ—¶ä¸è¿è¡Œçš„è¿›ç¨‹ï¼ˆå¯èƒ½æ˜¯é˜»å¡æ€æˆ–å°±ç»ªæ€ï¼‰çš„&lt;strong&gt;æ•´ä¸ªåœ°å€ç©ºé—´&lt;/strong&gt;ä»å†…å­˜&lt;strong&gt;äº¤æ¢ï¼ˆSwap Outï¼‰åˆ°ç£ç›˜&lt;/strong&gt;çš„äº¤æ¢åŒºï¼ˆSwap Spaceï¼‰ä¸­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿›ç¨‹&lt;strong&gt;ä¸å ç”¨å†…å­˜&lt;/strong&gt;ï¼Œä»…åœ¨å¤–å­˜ä¸­å æ®ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;æŒ‚èµ·æ“ä½œä¸è¿›ç¨‹è‡ªèº«çš„æ„æ„¿æ— å…³ï¼Œæ˜¯&lt;strong&gt;æ¥è‡ªå¤–éƒ¨çš„å¼ºåˆ¶æ“ä½œ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¢«æŒ‚èµ·çš„è¿›ç¨‹éœ€è¦&lt;strong&gt;ç”±ç³»ç»Ÿæˆ–ç”¨æˆ·æ˜¾å¼æ¿€æ´»&lt;/strong&gt;ï¼ˆActiveï¼‰ï¼Œæ‰èƒ½è¢«é‡æ–°æ¢å…¥å†…å­˜ï¼Œå¹¶æ ¹æ®ä¹‹å‰çš„çŠ¶æ€æ¢å¤ä¸ºå°±ç»ªæˆ–é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒ° ä¾‹å­&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä½ åŒæ—¶æ‰“å¼€äº†å¾ˆå¤šåº”ç”¨ç¨‹åºï¼ˆå¦‚æµè§ˆå™¨ã€IDEã€å¤šä¸ªæ–‡æ¡£ï¼‰ï¼Œå¯¼è‡´ç‰©ç†å†…å­˜åƒç´§ã€‚æ­¤æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå°†ä½ &lt;strong&gt;æœ€å°åŒ–&lt;/strong&gt;æˆ–&lt;strong&gt;é•¿æ—¶é—´æœªæ“ä½œ&lt;/strong&gt;çš„æŸä¸ªçª—å£å¯¹åº”çš„è¿›ç¨‹æŒ‚èµ·åˆ°ç£ç›˜ï¼Œä»¥é‡Šæ”¾å†…å­˜ç»™å½“å‰æ´»è·ƒçš„è¿›ç¨‹ã€‚å½“ä½ å†æ¬¡ç‚¹å‡»è¯¥çª—å£æ—¶ï¼Œç³»ç»Ÿéœ€è¦ä¸€ç‚¹æ—¶é—´å°†å…¶ä»ç£ç›˜æ¢å›å†…å­˜ï¼Œæ‰èƒ½æ¢å¤æ˜¾ç¤ºå’Œå“åº”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é˜»å¡ä¸æŒ‚èµ·çš„è”ç³»"&gt;ğŸ§© é˜»å¡ä¸æŒ‚èµ·çš„è”ç³»
&lt;/h3&gt;&lt;p&gt;è™½ç„¶é˜»å¡å’ŒæŒ‚èµ·æ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œä½†å®ƒä»¬å¯ä»¥&lt;strong&gt;ç»„åˆå‡ºç°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é™æ­¢é˜»å¡ï¼ˆSuspended Blockedï¼‰&lt;/strong&gt;ï¼šä¸€ä¸ªè¿›ç¨‹æœ€åˆå› ä¸ºç­‰å¾…I/Oè€Œé˜»å¡ã€‚éšåï¼Œç³»ç»Ÿç”±äºå†…å­˜ä¸è¶³ï¼Œåˆå°†å…¶æŒ‚èµ·ã€‚äºæ˜¯ï¼Œè¿™ä¸ªè¿›ç¨‹å°±åŒæ—¶å…·æœ‰äº†ä¸¤ç§ç‰¹æ€§ï¼šå®ƒæ—¢åœ¨ç­‰å¾…äº‹ä»¶ï¼Œåˆè¢«äº¤æ¢åˆ°äº†å¤–å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æ­¢å°±ç»ªï¼ˆSuspended Readyï¼‰&lt;/strong&gt;ï¼šä¸€ä¸ªå°±ç»ªçŠ¶æ€çš„è¿›ç¨‹ï¼Œæœ¬èº«å¯ä»¥è¿è¡Œï¼Œä½†è¢«ç³»ç»ŸæŒ‚èµ·åˆ°å¤–å­˜ã€‚å½“å®ƒè¢«æ¿€æ´»åï¼Œæ˜¯ç›´æ¥å›åˆ°&lt;strong&gt;æ´»åŠ¨å°±ç»ª&lt;/strong&gt;çŠ¶æ€ï¼Œç­‰å¾…CPUè°ƒåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç®€å•æ€»ç»“"&gt;ğŸ’¡ ç®€å•æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡&lt;/strong&gt;æ˜¯è¿›ç¨‹è‡ªå·±â€œ&lt;strong&gt;æˆ‘è¦ç¡ä¸€ä¼šå„¿ï¼Œä¸œè¥¿åˆ°äº†å«æˆ‘&lt;/strong&gt;â€ã€‚å®ƒè¿˜åœ¨å§å®¤ï¼ˆå†…å­˜ï¼‰é‡Œèººç€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‚èµ·&lt;/strong&gt;æ˜¯æ“ä½œç³»ç»Ÿ/ç”¨æˆ·è¯´â€œ&lt;strong&gt;ä½ å¤ªå åœ°æ–¹äº†ï¼Œå…ˆå»ä»“åº“ï¼ˆç£ç›˜ï¼‰å¾…ç€&lt;/strong&gt;â€ã€‚æ•´ä¸ªè¿‡ç¨‹è¿›ç¨‹è‡ªèº«å¯èƒ½ä¸çŸ¥æƒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®°ä½æœ€æ ¸å¿ƒçš„åŒºåˆ«ï¼š&lt;strong&gt;é˜»å¡ä¸é‡Šæ”¾å†…å­˜ï¼Œè€ŒæŒ‚èµ·ä¼šé‡Šæ”¾å†…å­˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id="è¿›ç¨‹çŠ¶æ€"&gt;è¿›ç¨‹çŠ¶æ€
&lt;/h2&gt;&lt;p&gt;ç†è§£è¿›ç¨‹çš„å„ä¸ªçŠ¶æ€æ˜¯æŒæ¡æ“ä½œç³»ç»Ÿå¦‚ä½•ç®¡ç†ä»»åŠ¡çš„å…³é”®ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»è¿›ç¨‹çš„ä¸»è¦çŠ¶æ€å’Œæ ¸å¿ƒç‰¹å¾ï¼Œç„¶åè¯¦ç»†è§£é‡Šå®ƒä»¬ä¹‹é—´çš„è½¬æ¢å’Œæ„ä¹‰ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;çŠ¶æ€åç§°&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹å¾&lt;/th&gt;
&lt;th&gt;ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–°å»º (New)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹åˆšè¢«åˆ›å»ºï¼Œæ“ä½œç³»ç»Ÿæ­£ä¸ºå…¶åˆ†é…èµ„æºï¼ˆå¦‚å†…å­˜ï¼‰ã€åˆå§‹åŒ–è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹çš„â€œå‡ºç”Ÿâ€é˜¶æ®µï¼Œå°šæœªè¿›å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è°ƒåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å°±ç»ª (Ready)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å·²è·å¾—é™¤CPUå¤–çš„æ‰€æœ‰å¿…è¦èµ„æºï¼Œ&lt;strong&gt;å·²å‡†å¤‡å¥½è¿è¡Œï¼Œæ­£åœ¨ç­‰å¾…CPUæ—¶é—´ç‰‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ CPUã€‚è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…è°ƒåº¦å™¨é€‰ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œ (Running)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹&lt;strong&gt;æ­£åœ¨CPUä¸Šæ‰§è¡Œ&lt;/strong&gt;å…¶æŒ‡ä»¤&lt;/td&gt;
&lt;td&gt;CPUæ­£åœ¨å¤„ç†è¯¥è¿›ç¨‹çš„ä»»åŠ¡ã€‚å•æ ¸CPUåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜»å¡ (Blocked)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹&lt;strong&gt;ç­‰å¾…æŸä¸ªäº‹ä»¶å®Œæˆ&lt;/strong&gt;ï¼ˆå¦‚I/Oæ“ä½œã€è·å–é”ï¼‰è€Œ&lt;strong&gt;æš‚åœæ‰§è¡Œ&lt;/strong&gt;ï¼Œ&lt;strong&gt;ä¸»åŠ¨è®©å‡ºCPU&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¹Ÿç§°ç­‰å¾…æ€ã€‚å³ä½¿CPUç©ºé—²ï¼Œè¯¥è¿›ç¨‹ä¹Ÿæ— æ³•ç»§ç»­è¿è¡Œï¼Œç›´åˆ°ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‚èµ· (Suspended)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹&lt;strong&gt;è¢«äº¤æ¢åˆ°å¤–å­˜&lt;/strong&gt;ï¼ˆå¦‚ç£ç›˜ï¼‰ï¼Œ&lt;strong&gt;ä¸å ç”¨å†…å­˜èµ„æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ˜¯ç³»ç»Ÿå› èµ„æºç´§å¼ ï¼ˆå¦‚å†…å­˜ä¸è¶³ï¼‰æˆ–ç”¨æˆ·è¯·æ±‚è€Œå¼ºåŠ ç»™è¿›ç¨‹çš„çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»ˆæ­¢ (Terminated)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å·²æ‰§è¡Œå®Œæ¯•æˆ–å› å¼‚å¸¸è¢«ç»ˆæ­¢ï¼Œæ“ä½œç³»ç»Ÿæ­£å›æ”¶å…¶èµ„æºï¼ˆå†…å­˜ã€PCBç­‰ï¼‰&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹çš„â€œæ­»äº¡â€é˜¶æ®µï¼Œç­‰å¾…ç³»ç»Ÿè¿›è¡Œæœ€åçš„æ¸…ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;æ·±å…¥ç†è§£çŠ¶æ€è½¬æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿›ç¨‹çš„çŠ¶æ€ä¼šéšç€è‡ªèº«çš„æ‰§è¡Œå’Œç³»ç»Ÿçš„è°ƒåº¦è€ŒåŠ¨æ€å˜åŒ–ã€‚ä¸‹å›¾å±•ç¤ºäº†è¿™äº›çŠ¶æ€ä¹‹é—´å¯èƒ½çš„è½¬æ¢å…³ç³»ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ–°å»º New] --&amp;gt;|åˆå§‹åŒ–å®Œæˆ| B[å°±ç»ª Ready]
B --&amp;gt;|è¢«è°ƒåº¦å™¨é€‰ä¸­| C[è¿è¡Œ Running]
C --&amp;gt;|æ—¶é—´ç‰‡ç”¨å®Œ/è¢«æŠ¢å | B
C --&amp;gt;|ç­‰å¾…äº‹ä»¶ï¼ˆå¦‚I/Oï¼‰| D[é˜»å¡ Blocked]
D --&amp;gt;|äº‹ä»¶å‘ç”Ÿ| B
C --&amp;gt;|æ‰§è¡Œå®Œæˆ/è¢«ç»ˆæ­¢| E[ç»ˆæ­¢ Terminated]
B --&amp;gt;|è¢«äº¤æ¢å‡ºå†…å­˜| F[æŒ‚èµ· Suspend]
D --&amp;gt;|è¢«äº¤æ¢å‡ºå†…å­˜| F
F --&amp;gt;|è¢«äº¤æ¢å›å†…å­˜| B
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é˜»å¡ (Blocked) ä¸ æŒ‚èµ· (Suspended) çš„æ ¸å¿ƒåŒºåˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå…³é”®æ¦‚å¿µï¼Œä¸¤è€…éƒ½æ„å‘³ç€è¿›ç¨‹æš‚ä¸æ‰§è¡Œï¼Œä½†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡æ˜¯ç­‰å¾…èµ„æº&lt;/strong&gt;ï¼Œè¿›ç¨‹ä»åœ¨å†…å­˜ä¸­ã€‚æ˜¯è¿›ç¨‹&lt;strong&gt;ä¸»åŠ¨&lt;/strong&gt;çš„è¡Œä¸ºï¼ˆå¦‚ç­‰å¾…I/Oå®Œæˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‚èµ·æ˜¯è…¾å‡ºèµ„æº&lt;/strong&gt;ï¼Œè¿›ç¨‹å·²è¢«ç§»åˆ°ç£ç›˜ã€‚æ˜¯ç³»ç»Ÿ&lt;strong&gt;è¢«åŠ¨&lt;/strong&gt;çš„è¡Œä¸ºï¼ˆå¦‚å› å†…å­˜ä¸è¶³ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ—‚ï¸ &lt;strong&gt;è¿›ç¨‹æ§åˆ¶å— (PCB)ï¼šçŠ¶æ€çš„è®°å½•è€…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ“ä½œç³»ç»Ÿé€šè¿‡&lt;strong&gt;è¿›ç¨‹æ§åˆ¶å— (Process Control Block, PCB)&lt;/strong&gt; æ¥ç®¡ç†å’Œè¿½è¸ªæ¯ä¸ªè¿›ç¨‹çš„çŠ¶æ€ã€‚PCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼Œå…¶ä¸­è®°å½•äº†è¿›ç¨‹çŠ¶æ€ã€ç¨‹åºè®¡æ•°å™¨ã€CPUå¯„å­˜å™¨ã€è°ƒåº¦ä¿¡æ¯ç­‰ä¸€åˆ‡ç®¡ç†è¿›ç¨‹æ‰€éœ€çš„ä¿¡æ¯ ã€‚&lt;strong&gt;è¿›ç¨‹çŠ¶æ€çš„æ”¹å˜ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯PCBä¸­çŠ¶æ€æ ‡è¯†ä½çš„æ”¹å˜ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿›ç¨‹çŠ¶æ€çš„åˆ’åˆ†å’Œè½¬æ¢æ˜¯æ“ä½œç³»ç»Ÿå®ç°&lt;strong&gt;å¤šä»»åŠ¡å¹¶å‘&lt;/strong&gt;ã€æé«˜&lt;strong&gt;èµ„æºåˆ©ç”¨ç‡&lt;/strong&gt;çš„æ ¸å¿ƒæœºåˆ¶ã€‚é€šè¿‡è®©æ¯ä¸ªè¿›ç¨‹åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­åœ¨ä¸åŒçŠ¶æ€é—´åˆ‡æ¢ï¼Œæ“ä½œç³»ç»Ÿå¾—ä»¥ç”¨æœ‰é™çš„CPUå’Œå†…å­˜èµ„æºï¼Œæ”¯æ’‘å¤šä¸ªè¿›ç¨‹â€œåŒæ—¶â€è¿è¡Œã€‚&lt;/p&gt;
&lt;h2 id="i-node"&gt;&lt;strong&gt;i-node&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;ç†è§£ i-nodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰ä¸æ–‡ä»¶çš„å¯¹åº”å…³ç³»ï¼Œæ˜¯æŒæ¡ Unix/Linux æ–‡ä»¶ç³»ç»Ÿå·¥ä½œåŸç†çš„å…³é”®ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;i-node æ˜¯æ–‡ä»¶çš„â€œå…ƒæ•°æ®æ ¸å¿ƒâ€&lt;/strong&gt;ï¼Œè€Œ&lt;strong&gt;æ–‡ä»¶ååªæ˜¯å®ƒçš„ä¸€ä¸ªâ€œåˆ«åâ€&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿç†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å®ƒä»¬çš„æ ¸å¿ƒå…³ç³»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;i-node (ç´¢å¼•èŠ‚ç‚¹)&lt;/th&gt;
&lt;th&gt;æ–‡ä»¶å&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ–‡ä»¶çš„å…ƒä¿¡æ¯&lt;/strong&gt;ï¼ˆæƒé™ã€å¤§å°ã€æ—¶é—´æˆ³ã€æ•°æ®å—æŒ‡é’ˆç­‰ï¼‰&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶çš„åå­—ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å”¯ä¸€æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿå†…&lt;/strong&gt;å”¯ä¸€&lt;/td&gt;
&lt;td&gt;åœ¨&lt;strong&gt;åŒä¸€ä¸ªç›®å½•ä¸‹&lt;/strong&gt;å”¯ä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¢«æ“ä½œç³»ç»Ÿå†…æ ¸ç”¨äº&lt;strong&gt;å”¯ä¸€æ ‡è¯†å’Œç®¡ç†æ–‡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ–¹ä¾¿&lt;strong&gt;ç”¨æˆ·&lt;/strong&gt;è¯†åˆ«å’Œè®¿é—®æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°é‡å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªæ–‡ä»¶&lt;strong&gt;å¿…é¡»ä¸”åªæœ‰ä¸€ä¸ª&lt;/strong&gt; i-node&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªæ–‡ä»¶å¯ä»¥é€šè¿‡&lt;strong&gt;ç¡¬é“¾æ¥&lt;/strong&gt;æ‹¥æœ‰&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;æ–‡ä»¶å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŒ…å«å…³ç³»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸åŒ…å«&lt;/strong&gt;æ–‡ä»¶å&lt;/td&gt;
&lt;td&gt;å­˜å‚¨åœ¨&lt;strong&gt;ç›®å½•æ–‡ä»¶&lt;/strong&gt;çš„æ•°æ®å—ä¸­ï¼Œå¹¶ä¸ i-node ç¼–å·å…³è”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä»€ä¹ˆæ˜¯-i-node"&gt;ğŸ“ ä»€ä¹ˆæ˜¯ i-nodeï¼Ÿ
&lt;/h3&gt;&lt;p&gt;i-nodeï¼ˆIndex Nodeï¼Œç´¢å¼•èŠ‚ç‚¹ï¼‰æ˜¯ Unix/Linux æ–‡ä»¶ç³»ç»Ÿç”¨äº&lt;strong&gt;å­˜å‚¨æ–‡ä»¶å…ƒæ•°æ®ï¼ˆmeta dataï¼‰çš„ä¸€ä¸ªæ•°æ®ç»“æ„&lt;/strong&gt;ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ–‡ä»¶çš„â€œèº«ä»½è¯â€æˆ–â€œæ¡£æ¡ˆæŸœç´¢å¼•å¡â€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ª i-node ä¸»è¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶å¤§å°&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™ä¿¡æ¯&lt;/strong&gt;ï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰è€…&lt;/strong&gt;ï¼ˆUser IDï¼‰å’Œ&lt;strong&gt;æ‰€å±ç»„&lt;/strong&gt;ï¼ˆGroup IDï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´æˆ³&lt;/strong&gt;ï¼ˆåˆ›å»ºæ—¶é—´ã€æœ€åè®¿é—®æ—¶é—´ã€æœ€åä¿®æ”¹æ—¶é—´ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é“¾æ¥è®¡æ•°&lt;/strong&gt;ï¼ˆæœ‰å¤šå°‘ä¸ªæ–‡ä»¶åæŒ‡å‘è¿™ä¸ª i-nodeï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å…³é”®çš„æ˜¯ï¼šæŒ‡å‘æ–‡ä»¶æ•°æ®å—ï¼ˆblockï¼‰çš„æŒ‡é’ˆ&lt;/strong&gt;ï¼ˆå‘Šè¯‰ç³»ç»Ÿæ–‡ä»¶å†…å®¹å®é™…å­˜å‚¨åœ¨ç£ç›˜çš„å“ªäº›ä½ç½®ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;i-node æœ¬èº«å¹¶ä¸åŒ…å«æ–‡ä»¶å&lt;/strong&gt;ã€‚æ–‡ä»¶åå­˜å‚¨åœ¨ç›®å½•æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;h3 id="-i-node-ä¸æ–‡ä»¶åçš„æ˜ å°„å…³ç³»"&gt;ğŸ”— i-node ä¸æ–‡ä»¶åçš„æ˜ å°„å…³ç³»
&lt;/h3&gt;&lt;p&gt;æ–‡ä»¶åå’Œ i-node çš„å…³è”æ˜¯åœ¨&lt;strong&gt;ç›®å½•ï¼ˆdirectoryï¼‰&lt;/strong&gt; ä¸­å»ºç«‹çš„ã€‚&lt;strong&gt;ç›®å½•æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶&lt;/strong&gt;ï¼Œå®ƒçš„æ•°æ®å—å†…å®¹ä¸æ˜¯æ™®é€šçš„æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼Œè€Œæ˜¯ä¸€ä¸ªç®€å•çš„&lt;strong&gt;åˆ—è¡¨&lt;/strong&gt;æˆ–&lt;strong&gt;è¡¨&lt;/strong&gt;ï¼Œå…¶ä¸­æ¯ä¸€é¡¹éƒ½åŒ…å«ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä¸ª &lt;strong&gt;i-node ç¼–å·&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„&lt;strong&gt;æ–‡ä»¶å&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ï¼Œå½“ä½ åœ¨ Linux ä¸­æ‰§è¡Œ &lt;code&gt;ls -i&lt;/code&gt;å‘½ä»¤æ—¶ï¼Œçœ‹åˆ°çš„å°±æ˜¯ç›®å½•æ–‡ä»¶ä¸­å­˜å‚¨çš„è¿™ç§æ˜ å°„å…³ç³»ã€‚&lt;/p&gt;
&lt;h3 id="-ç”¨æˆ·è®¿é—®æ–‡ä»¶çš„æµç¨‹"&gt;ğŸ” ç”¨æˆ·è®¿é—®æ–‡ä»¶çš„æµç¨‹
&lt;/h3&gt;&lt;p&gt;å½“ç”¨æˆ·æˆ–ç¨‹åºè¯•å›¾è®¿é—®ä¸€ä¸ªæ–‡ä»¶ï¼ˆä¾‹å¦‚ &lt;code&gt;/home/user/test.txt&lt;/code&gt;ï¼‰æ—¶ï¼Œç³»ç»Ÿå†…éƒ¨ä¼šéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£æè·¯å¾„&lt;/strong&gt;ï¼šç³»ç»Ÿé¦–å…ˆåœ¨æŒ‡å®šç›®å½•ï¼ˆè¿™é‡Œæ˜¯ &lt;code&gt;/home/user&lt;/code&gt;ï¼‰çš„æ•°æ®å—ä¸­æŸ¥æ‰¾æ–‡ä»¶å &lt;code&gt;test.txt&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å– i-node ç¼–å·&lt;/strong&gt;ï¼šåœ¨ç›®å½•ä¸­æ‰¾åˆ° &lt;code&gt;test.txt&lt;/code&gt;å¯¹åº”çš„ i-node ç¼–å·ï¼ˆå‡è®¾æ˜¯ &lt;code&gt;25678&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»å– i-node&lt;/strong&gt;ï¼šç³»ç»Ÿé€šè¿‡ç¼–å· &lt;code&gt;25678&lt;/code&gt;åœ¨æ–‡ä»¶ç³»ç»Ÿçš„ i-node åŒºåŸŸæ‰¾åˆ°å¯¹åº”çš„ i-node ç»“æ„ï¼Œè¯»å–æ–‡ä»¶çš„å…ƒä¿¡æ¯ï¼ˆå¦‚æƒé™ã€æ•°æ®å—ä½ç½®ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™æ£€æŸ¥&lt;/strong&gt;ï¼šæ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¿™ä¸ªæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»å–æ•°æ®&lt;/strong&gt;ï¼šå¦‚æœæœ‰æƒé™ï¼Œç³»ç»Ÿä¾¿æ ¹æ® i-node ä¸­è®°å½•çš„æ•°æ®å—æŒ‡é’ˆï¼Œè¯»å–æ–‡ä»¶çš„å®é™…å†…å®¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸€å¯¹å¤šå…³ç³»ç¡¬é“¾æ¥hard-link"&gt;ğŸ”„ ä¸€å¯¹å¤šå…³ç³»ï¼šç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰
&lt;/h3&gt;&lt;p&gt;i-node å’Œæ–‡ä»¶åçš„å…³ç³»æœ€æœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼š&lt;strong&gt;ä¸€ä¸ª i-node å¯ä»¥è¢«å¤šä¸ªæ–‡ä»¶åæŒ‡å‘&lt;/strong&gt;ã€‚è¿™å°±æ˜¯ &lt;strong&gt;â€œç¡¬é“¾æ¥â€ï¼ˆHard Linkï¼‰&lt;/strong&gt; çš„å®ç°æœºåˆ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ ä½¿ç”¨ &lt;code&gt;ln&lt;/code&gt;å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æ¥æ—¶ï¼ˆ&lt;code&gt;ln source_file hard_link&lt;/code&gt;ï¼‰ï¼Œ&lt;strong&gt;å¹¶æ²¡æœ‰åˆ›å»ºæ–°çš„æ–‡ä»¶å†…å®¹&lt;/strong&gt;ï¼Œåªæ˜¯åœ¨ç›®å½•ä¸­å¢åŠ äº†ä¸€æ¡æ–°è®°å½•ï¼Œè¯¥è®°å½•åŒ…å«äº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶åå’Œ&lt;strong&gt;åŒä¸€ä¸ª i-node ç¼–å·&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œæ— è®ºä½ é€šè¿‡å“ªä¸ªæ–‡ä»¶åï¼ˆåŸå§‹åæˆ–ç¡¬é“¾æ¥åï¼‰ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œæ‰€æœ‰æŒ‡å‘è¯¥ i-node çš„æ–‡ä»¶åçœ‹åˆ°çš„å†…å®¹éƒ½ä¼šæ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰å½“æ‰€æœ‰æŒ‡å‘è¯¥ i-node çš„é“¾æ¥ï¼ˆæ–‡ä»¶åï¼‰éƒ½è¢«åˆ é™¤ï¼Œä¸”é“¾æ¥æ•°é™ä¸º 0 æ—¶ï¼Œæ–‡ä»¶çš„æ•°æ®å—å’Œ i-node æ‰ä¼šè¢«çœŸæ­£é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šç”±äºç¡¬é“¾æ¥æ˜¯é€šè¿‡ i-node ç¼–å·å®ç°çš„ï¼Œæ‰€ä»¥å®ƒ&lt;strong&gt;ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt;åˆ›å»ºï¼ˆä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„ i-node ç¼–å·æ˜¯ç‹¬ç«‹ç®¡ç†çš„ï¼‰ï¼Œä¹Ÿ&lt;strong&gt;ä¸èƒ½å¯¹ç›®å½•åˆ›å»º&lt;/strong&gt;ç¡¬é“¾æ¥ï¼ˆé˜²æ­¢å½¢æˆå¾ªç¯ç›®å½•æ ‘ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸è½¯é“¾æ¥ç¬¦å·é“¾æ¥çš„åŒºåˆ«"&gt;âš–ï¸ ä¸è½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ï¼Œä¸‹è¡¨å¯¹æ¯”äº†ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥çš„å…³é”®åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¡¬é“¾æ¥ (Hard Link)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è½¯é“¾æ¥ (Symbolic Link / Soft Link)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šä¸ª&lt;strong&gt;æ–‡ä»¶å&lt;/strong&gt;æŒ‡å‘åŒä¸€ä¸ª &lt;strong&gt;i-node&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;ç‰¹æ®Šçš„æ–‡ä»¶&lt;/strong&gt;ï¼Œå…¶&lt;strong&gt;å†…å®¹&lt;/strong&gt;æ˜¯å¦ä¸€ä¸ªæ–‡ä»¶çš„&lt;strong&gt;è·¯å¾„&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;inode&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åŸå§‹æ–‡ä»¶&lt;strong&gt;ç›¸åŒ&lt;/strong&gt;çš„ inode ç¼–å·&lt;/td&gt;
&lt;td&gt;æ‹¥æœ‰è‡ªå·±&lt;strong&gt;ç‹¬ç«‹&lt;/strong&gt;çš„ inode ç¼–å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¨æ–‡ä»¶ç³»ç»Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é“¾æ¥ç›®å½•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ”¯æŒ&lt;/strong&gt;ï¼ˆç³»ç»Ÿé™åˆ¶ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå§‹æ–‡ä»¶åˆ é™¤å&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é“¾æ¥ä»æœ‰æ•ˆï¼ˆåªè¦é“¾æ¥æ•° &amp;gt; 0ï¼‰&lt;/td&gt;
&lt;td&gt;é“¾æ¥å¤±æ•ˆï¼ˆâ€œæ–­é“¾â€ï¼‰ï¼Œå˜æˆâ€œæ­»é“¾æ¥â€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ–‡ä»¶ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çœ‹èµ·æ¥åƒæ™®é€šæ–‡ä»¶&lt;/td&gt;
&lt;td&gt;æ–‡ä»¶æƒé™ä½æ˜¾ç¤ºä¸º &lt;code&gt;l&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½ä»¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ln source_file hard_link&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ln -s source_file soft_link&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å¯ä»¥æŠŠ i-node å’Œæ–‡ä»¶çš„å…³ç³»ç†è§£ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;i-node&lt;/strong&gt; æ˜¯æ–‡ä»¶çš„&lt;strong&gt;æœ¬è´¨å’Œæ ¸å¿ƒ&lt;/strong&gt;ï¼ˆå­˜å‚¨å…ƒæ•°æ®å’Œæ•°æ®ä½ç½®ï¼‰ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡ i-node æ¥è¯†åˆ«æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶å&lt;/strong&gt; æ˜¯æ–‡ä»¶çš„&lt;strong&gt;ç§°å‘¼å’Œæ ‡ç­¾&lt;/strong&gt;ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›®å½•&lt;/strong&gt; æ˜¯ä¸€ä¸ª&lt;strong&gt;ç”µè¯ç°¿&lt;/strong&gt;ï¼Œè®°å½•äº†â€œæ–‡ä»¶åâ€å’Œâ€œi-nodeå·ç â€çš„å¯¹åº”å…³ç³»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬é“¾æ¥&lt;/strong&gt; ç›¸å½“äºä¸€ä¸ªäººï¼ˆi-nodeï¼‰æœ‰å¤šä¸ªåå­—ï¼ˆæ–‡ä»¶åï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯é“¾æ¥&lt;/strong&gt; åˆ™ç›¸å½“äºä¸€ä¸ªå¿«æ·æ–¹å¼ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªåå­—ï¼ˆè·¯å¾„ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç†è§£è¿™ç§åˆ†ç¦»çš„è®¾è®¡æ˜¯ç†è§£ Unix/Linux æ–‡ä»¶ç³»ç»Ÿå¼ºå¤§ã€çµæ´»ä¸ç¨³å®šæ€§çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;h2 id="å¤–å­˜ç©ºé—²å—ç®¡ç†"&gt;å¤–å­˜ç©ºé—²å—ç®¡ç†
&lt;/h2&gt;&lt;p&gt;å¤–å­˜ï¼ˆå¦‚ç¡¬ç›˜ï¼‰ä¸­ç©ºé—²ç©ºé—´çš„ç®¡ç†å¯¹æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯é æ€§è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»å‡ ç§ä¸»æµçš„ç©ºé—²å—ç®¡ç†æ–¹å¼ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„å·¥ä½œåŸç†ã€ä¼˜ç¼ºç‚¹å’Œå…¸å‹åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“æ¦‚å¿µï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»è¿™å››ç§ä¸»è¦æ–¹æ³•çš„æ ¸å¿ƒç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç®¡ç†æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½ç¤ºå›¾æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºŒè¿›åˆ¶&lt;strong&gt;ä½æ•°ç»„&lt;/strong&gt;è¡¨ç¤ºæ¯ä¸ªç£ç›˜å—çš„çŠ¶æ€ï¼ˆ0ç©ºé—²ï¼Œ1å ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;å®ç°ç®€å•ï¼ŒæŸ¥æ‰¾é«˜æ•ˆï¼Œå ç”¨ç©ºé—´å°‘&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒé«˜æ•ˆè·å–è¿ç»­å¤§ç©ºé—´ï¼›å¤§è§„æ¨¡ç£ç›˜ç®¡ç†æ—¶å¯èƒ½å˜æ…¢&lt;/td&gt;
&lt;td&gt;è®¸å¤šç°ä»£æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚Linux extç³»åˆ—ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—²é“¾è¡¨æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;å°†æ‰€æœ‰ç©ºé—²å—ä¸²è”æˆä¸€ä¸ªé“¾è¡¨&lt;/td&gt;
&lt;td&gt;ç©ºé—´å¼€é”€å°ï¼ˆä»…éœ€ä¸€ä¸ªå¤´æŒ‡é’ˆï¼‰&lt;/td&gt;
&lt;td&gt;åˆ†é…æ•ˆç‡ä½ï¼ˆéœ€é¡ºåºéå†ï¼‰ï¼›æŒ‡é’ˆæœ¬èº«ä¼šå ç”¨å°‘é‡å­˜å‚¨ç©ºé—´&lt;/td&gt;
&lt;td&gt;æ—©æœŸæˆ–ç®€å•æ–‡ä»¶ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—²åŒºè¡¨æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»´æŠ¤ä¸€å¼ è¡¨ï¼Œæ¯é¡¹è®°å½•ä¸€ä¸ª&lt;strong&gt;è¿ç»­ç©ºé—²åŒºåŸŸ&lt;/strong&gt;çš„èµ·å§‹å—å·å’Œé•¿åº¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ“…é•¿åˆ†é…è¿ç»­ç©ºé—´&lt;/strong&gt;ï¼Œå‡å°‘ç¢ç‰‡åŒ–&lt;/td&gt;
&lt;td&gt;è¡¨æœ¬èº«å¯èƒ½å¾ˆå¤§ï¼›é¢‘ç¹åˆ†é…å›æ”¶åè¡¨é¡¹åˆå¹¶ç»´æŠ¤å¼€é”€å¤§&lt;/td&gt;
&lt;td&gt;æ—©æœŸæ–‡ä»¶ç³»ç»Ÿæˆ–è¿ç»­åˆ†é…æ–¹å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æˆç»„é“¾æ¥æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†ç©ºé—²å—&lt;strong&gt;åˆ†ç»„&lt;/strong&gt;ï¼Œæ¯ç»„çš„ç¬¬ä¸€ä¸ªå—å­˜ä¸‹ä¸€ç»„å—çš„åœ°å€å’Œæ•°é‡&lt;/td&gt;
&lt;td&gt;ç»“åˆäº†é“¾è¡¨å’Œè¡¨çš„ä¼˜ç‚¹ï¼Œ&lt;strong&gt;é«˜æ•ˆä¸”èŠ‚çœå†…å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®—æ³•ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;UNIX ç³»ç»Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¯¦ç»†äº†è§£ä¸€ä¸‹æ¯ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id="-1-ä½ç¤ºå›¾æ³•"&gt;ğŸ“Š 1. ä½ç¤ºå›¾æ³•
&lt;/h3&gt;&lt;p&gt;ä½ç¤ºå›¾æ³•åˆ©ç”¨ä¸€ä¸ªä½æ•°ç»„ï¼ˆBit Arrayï¼‰æ¥ç®¡ç†ç£ç›˜ç©ºé—´ï¼Œæ¯ä¸€ä½ï¼ˆbitï¼‰å¯¹åº”ç£ç›˜ä¸Šçš„ä¸€ä¸ªç‰©ç†å—ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½çŠ¶æ€&lt;/strong&gt;ï¼šæ¯ä½æœ‰ä¸¤ç§çŠ¶æ€ã€‚é€šå¸¸ &lt;code&gt;0&lt;/code&gt;è¡¨ç¤ºå¯¹åº”çš„å—&lt;strong&gt;ç©ºé—²&lt;/strong&gt;ï¼Œ&lt;code&gt;1&lt;/code&gt;è¡¨ç¤º&lt;strong&gt;å·²å ç”¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…æµç¨‹&lt;/strong&gt;ï¼šå½“ç³»ç»Ÿéœ€è¦åˆ†é…ä¸€ä¸ªç©ºé—²å—æ—¶ï¼Œå®ƒä¼šé¡ºåºæ‰«æä½ç¤ºå›¾ï¼ˆæœ‰æ—¶ä¼šä½¿ç”¨ä¼˜åŒ–ç®—æ³•ï¼‰ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå€¼ä¸º &lt;code&gt;0&lt;/code&gt;çš„ä½ï¼Œè®¡ç®—å…¶å¯¹åº”çš„ç›˜å—å· bï¼ˆè®¡ç®—å…¬å¼ï¼š&lt;code&gt;ç›˜å—å· b = (å­—é•¿ * i) + j&lt;/code&gt;ï¼Œå…¶ä¸­ &lt;code&gt;i&lt;/code&gt;æ˜¯è¡Œç´¢å¼•ï¼Œ&lt;code&gt;j&lt;/code&gt;æ˜¯åˆ—ç´¢å¼•ï¼‰ï¼Œå¹¶è¿›è¡Œåˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ”¶æµç¨‹&lt;/strong&gt;ï¼šå½“å›æ”¶ä¸€ä¸ªç›˜å—æ—¶ï¼Œæ ¹æ®ç›˜å—å· bè®¡ç®—å‡ºå…¶åœ¨ä½å›¾ä¸­çš„ä½ç½®ï¼Œå°†è¯¥ä½ç½® &lt;code&gt;0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥æ‰¾é«˜æ•ˆ&lt;/strong&gt;ï¼šå¯ä»¥å¾ˆå¿«æ‰¾åˆ°ç¬¬ä¸€ä¸ªæˆ–æŒ‡å®šçš„ç©ºé—²å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´å¼€é”€å°&lt;/strong&gt;ï¼šä½å›¾æœ¬èº«å ç”¨çš„å­˜å‚¨ç©ºé—´ç›¸å¯¹è¾ƒå°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è·å–è¿ç»­ç©ºé—´æ•ˆç‡ä½&lt;/strong&gt;ï¼šè¦åˆ†é…è¿ç»­çš„å¤šä¸ªç©ºé—²å—æ—¶ï¼Œæ•ˆç‡å¯èƒ½ä¸é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§è§„æ¨¡ç£ç›˜ç®¡ç†æŒ‘æˆ˜&lt;/strong&gt;ï¼šå¯¹äºéå¸¸å¤§çš„ç£ç›˜ï¼Œä½å›¾æœ¬èº«å¯èƒ½ä¼šå ç”¨è¾ƒå¤šå†…å­˜ï¼Œå°½ç®¡ç›¸æ¯”å…¶ä»–æ–¹æ³•å®ƒä»ç„¶è¾ƒå°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-2-ç©ºé—²é“¾è¡¨æ³•"&gt;ğŸ”— 2. ç©ºé—²é“¾è¡¨æ³•
&lt;/h3&gt;&lt;p&gt;æ­¤æ–¹æ³•å°†æ‰€æœ‰ç©ºé—²ç£ç›˜å—é€šè¿‡æŒ‡é’ˆé“¾æ¥æˆä¸€ä¸ªé“¾è¡¨ã€‚æ ¹æ®æ„æˆé“¾æ‰€ç”¨åŸºæœ¬å…ƒç´ çš„ä¸åŒï¼Œåˆ†ä¸ºä¸¤ç§å½¢å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—²ç›˜å—é“¾&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šä»¥&lt;strong&gt;ç£ç›˜å—&lt;/strong&gt;ä¸ºå•ä½é“¾æ¥ã€‚æ¯ä¸ªç©ºé—²å—ä¸­éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—²å—çš„æŒ‡é’ˆã€‚ç³»ç»Ÿåªéœ€ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;é“¾å¤´æŒ‡é’ˆ&lt;/strong&gt;æŒ‡å‘ç¬¬ä¸€ä¸ªç©ºé—²å—ã€‚åˆ†é…æ—¶ä»é“¾é¦–å–å—ï¼Œå›æ”¶æ—¶å°†å—æ’å…¥é“¾å°¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåˆ†é…å’Œå›æ”¶å•ä¸ªå—çš„æ“ä½œéå¸¸ç®€å•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šä¸ºä¸€ä¸ªæ–‡ä»¶åˆ†é…å¤šä¸ªå—æ—¶å¯èƒ½éœ€è¦å¤šæ¬¡æ“ä½œï¼Œæ•ˆç‡è¾ƒä½ï¼›é“¾è¡¨å¯èƒ½å¾ˆé•¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—²ç›˜åŒºé“¾&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šä»¥&lt;strong&gt;è¿ç»­ç©ºé—²åŒº&lt;/strong&gt;ï¼ˆåŒ…å«è‹¥å¹²å—ï¼‰ä¸ºå•ä½é“¾æ¥ã€‚æ¯ä¸ªç›˜åŒºèŠ‚ç‚¹è®°å½•èµ·å§‹å—å·ã€å—æ•°å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç›˜åŒºçš„æŒ‡é’ˆã€‚åˆ†é…æ—¶å¸¸é‡‡ç”¨&lt;strong&gt;é¦–æ¬¡é€‚åº”&lt;/strong&gt;æˆ–&lt;strong&gt;æœ€ä½³é€‚åº”&lt;/strong&gt;ç®—æ³•ï¼Œå›æ”¶æ—¶éœ€è€ƒè™‘ä¸ç›¸é‚»ç©ºé—²åŒºçš„åˆå¹¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåˆ†é…è¿ç»­ç©ºé—´çš„æ•ˆç‡è¾ƒé«˜ï¼Œé“¾è¡¨è¾ƒçŸ­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šåˆ†é…å’Œå›æ”¶è¿‡ç¨‹ï¼ˆå°¤å…¶æ˜¯åˆå¹¶æ“ä½œï¼‰ç›¸å¯¹å¤æ‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-3-ç©ºé—²åŒºè¡¨æ³•"&gt;ğŸ“‹ 3. ç©ºé—²åŒºè¡¨æ³•
&lt;/h3&gt;&lt;p&gt;è¿™ç§æ–¹æ³•ä¸ºå¤–å­˜ä¸Šæ‰€æœ‰è¿ç»­çš„æœªåˆ†é…åŒºåŸŸï¼ˆç§°ä¸ºâ€œç©ºé—²åŒºâ€ï¼‰å»ºç«‹ä¸€å¼ è¡¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡¨ç»“æ„&lt;/strong&gt;ï¼šæ¯ä¸ªè¡¨é¡¹åŒ…å«&lt;strong&gt;åºå·&lt;/strong&gt;ã€&lt;strong&gt;ç©ºé—²åŒºçš„ç¬¬ä¸€ä¸ªç›˜å—å·&lt;/strong&gt;ã€&lt;strong&gt;ç©ºé—²ç›˜çš„å—æ•°&lt;/strong&gt;å’Œ&lt;strong&gt;çŠ¶æ€&lt;/strong&gt;ç­‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…æµç¨‹&lt;/strong&gt;ï¼šåˆ†é…æ—¶ï¼Œç³»ç»Ÿæ‰«æç©ºé—²åŒºè¡¨ï¼Œæ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºé—²åŒºã€‚é€šå¸¸é‡‡ç”¨&lt;strong&gt;é¦–æ¬¡é€‚åº”&lt;/strong&gt;ã€&lt;strong&gt;æœ€ä½³é€‚åº”&lt;/strong&gt;æˆ–&lt;strong&gt;æœ€åé€‚åº”&lt;/strong&gt;ç­‰ç®—æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ”¶æµç¨‹&lt;/strong&gt;ï¼šå›æ”¶ç©ºé—´æ—¶ï¼Œç³»ç»Ÿä¸ä»…è¦å°†å›æ”¶åŒºåŠ å…¥ç©ºé—²åŒºè¡¨ï¼Œè¿˜éœ€åˆ¤æ–­å®ƒæ˜¯å¦ä¸å·²æœ‰çš„ç©ºé—²åŒºç›¸é‚»ï¼Œè‹¥ç›¸é‚»åˆ™éœ€&lt;strong&gt;åˆå¹¶&lt;/strong&gt;ä¸ºä¸€ä¸ªæ›´å¤§çš„è¿ç»­ç©ºé—²åŒºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ‰æ•ˆå‡å°‘ç¢ç‰‡&lt;/strong&gt;ï¼šé€šè¿‡åˆå¹¶ç›¸é‚»ç©ºé—²åŒºï¼Œæœ‰åŠ©äºå‡å°‘å¤–éƒ¨ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡¨å¤§å°ç®¡ç†&lt;/strong&gt;ï¼šéšç€æ–‡ä»¶çš„åˆ›å»ºå’Œåˆ é™¤ï¼Œè¡¨çš„å¤§å°ä¼šåŠ¨æ€å˜åŒ–ï¼Œç®¡ç†èµ·æ¥è¾ƒå¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šé¢‘ç¹çš„åˆ†é…å’Œå›æ”¶å¯èƒ½å¯¼è‡´å¤§é‡çš„è¡¨é¡¹åˆå¹¶ä¸æ‹†åˆ†æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-4-æˆç»„é“¾æ¥æ³•"&gt;ğŸ§® 4. æˆç»„é“¾æ¥æ³•
&lt;/h3&gt;&lt;p&gt;æˆç»„é“¾æ¥æ³•æ˜¯ç©ºé—²é“¾è¡¨æ³•çš„æ”¹è¿›ï¼Œç»“åˆäº†é“¾è¡¨å’Œç´¢å¼•è¡¨çš„ä¼˜ç‚¹ï¼Œå¸¸ç”¨äºå¤§å‹ç³»ç»Ÿå¦‚ UNIXã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç»„ç®¡ç†&lt;/strong&gt;ï¼šå°†ç©ºé—²å—åˆ†æˆè‹¥å¹²ç»„ï¼ˆä¾‹å¦‚æ¯100ä¸ªç©ºé—²å—ä¸ºä¸€ç»„ï¼‰ã€‚æ¯ç»„çš„ç¬¬ä¸€ä¸ªç©ºé—²å—ç”¨äºè®°å½•ä¸‹ä¸€ç»„ç©ºé—²å—çš„&lt;strong&gt;ç‰©ç†ç›˜å—å·&lt;/strong&gt;å’Œæœ¬ç»„çš„&lt;strong&gt;ç©ºé—²å—æ€»æ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ˆæ“ä½œ&lt;/strong&gt;ï¼šç³»ç»Ÿåœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;ç©ºé—²ç›˜å—å·æ ˆ&lt;/strong&gt;ã€‚åˆ†é…æ—¶ï¼Œå…ˆä»æ ˆä¸­å–å—å·ï¼›è‹¥æ ˆç©ºï¼Œåˆ™è¯»å…¥ä¸€ç»„æ–°çš„ç©ºé—²å—ä¿¡æ¯åˆ°æ ˆä¸­ã€‚å›æ”¶æ—¶ï¼Œè‹¥æ ˆæ»¡ï¼Œåˆ™å°†æ ˆä¸­ä¿¡æ¯å†™å…¥è¦å›æ”¶çš„å—ï¼Œå¹¶å°†è¯¥å—ä½œä¸ºæ–°ç»„é“¾å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æŸæ ‡å¿—&lt;/strong&gt;ï¼šæœ€åä¸€ç»„çš„ç¬¬ä¸€ä¸ªå—ä¸­å¯èƒ½å­˜å‚¨ä¸€ä¸ªç‰¹æ®Šå€¼ï¼ˆå¦‚ &lt;code&gt;0&lt;/code&gt;ï¼‰ä½œä¸ºç»“æŸæ ‡å¿—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;ï¼šç»“åˆäº†é“¾è¡¨å’Œç´¢å¼•è¡¨çš„ä¼˜ç‚¹ï¼Œåˆ†é…å›æ”¶æ•ˆç‡é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚çœå†…å­˜&lt;/strong&gt;ï¼šåªéœ€åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªè¾ƒå°çš„æ ˆï¼Œå¤§éƒ¨åˆ†ä¿¡æ¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•ç¨å¤æ‚&lt;/strong&gt;ï¼šå®ç°å’Œç†è§£èµ·æ¥æ¯”ç®€å•çš„ç©ºé—²é“¾è¡¨æ³•ç¨å¤æ‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åˆé€‚çš„ç®¡ç†æ–¹å¼"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©åˆé€‚çš„ç®¡ç†æ–¹å¼
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§ç©ºé—²ç©ºé—´ç®¡ç†æ–¹æ³•ï¼Œéœ€ç»¼åˆè€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç£ç›˜å¤§å°ä¸è§„æ¨¡&lt;/strong&gt;ï¼šå¯¹äºéå¸¸å¤§çš„ç£ç›˜ï¼Œ&lt;strong&gt;ä½ç¤ºå›¾æ³•&lt;/strong&gt;å’Œ&lt;strong&gt;æˆç»„é“¾æ¥æ³•&lt;/strong&gt;å› å…¶è‰¯å¥½çš„å¯æ‰©å±•æ€§è€Œæ›´å—æ¬¢è¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è¦æ±‚&lt;/strong&gt;ï¼šå¦‚æœç³»ç»Ÿè¦æ±‚å¿«é€Ÿåˆ†é…å•ä¸ªå—ï¼Œ&lt;strong&gt;ä½ç¤ºå›¾æ³•&lt;/strong&gt;å¾ˆåˆé€‚ã€‚å¦‚æœéœ€è¦é«˜æ•ˆåˆ†é…è¿ç»­ç©ºé—´ï¼Œ&lt;strong&gt;ç©ºé—²åŒºè¡¨æ³•&lt;/strong&gt;æˆ–&lt;strong&gt;æˆç»„é“¾æ¥æ³•&lt;/strong&gt;å¯èƒ½æ›´å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ç³»ç»Ÿç»“æ„&lt;/strong&gt;ï¼šä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç‰©ç†ç»“æ„ï¼ˆå¦‚è¿ç»­åˆ†é…ã€é“¾æ¥åˆ†é…ã€ç´¢å¼•åˆ†é…ï¼‰ä¼šå½±å“ç®¡ç†æ–¹å¼çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°å¤æ‚åº¦ä¸å¼€é”€&lt;/strong&gt;ï¼š&lt;strong&gt;ç©ºé—²é“¾è¡¨æ³•&lt;/strong&gt;å®ç°ç®€å•ï¼Œä½†æ•ˆç‡å¯èƒ½ä¸é«˜ã€‚&lt;strong&gt;æˆç»„é“¾æ¥æ³•&lt;/strong&gt;æ•ˆç‡é«˜ï¼Œä½†å®ç°ç›¸å¯¹å¤æ‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®¡ç†å¤–å­˜ç©ºé—²ç©ºé—´çš„æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨&lt;strong&gt;ç©ºé—´å¼€é”€&lt;/strong&gt;ã€&lt;strong&gt;æ—¶é—´æ•ˆç‡&lt;/strong&gt;å’Œ&lt;strong&gt;å‡å°‘ç¢ç‰‡&lt;/strong&gt;ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿½æ±‚&lt;strong&gt;ç®€å•é«˜æ•ˆå’Œä½ç©ºé—´å¼€é”€&lt;/strong&gt;æ—¶ï¼Œ&lt;strong&gt;ä½ç¤ºå›¾æ³•&lt;/strong&gt;æ˜¯ä¸ªå¥½é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦&lt;strong&gt;é«˜æ•ˆåˆ†é…è¿ç»­å¤§ç©ºé—´&lt;/strong&gt;æ—¶ï¼Œå¯è€ƒè™‘&lt;strong&gt;ç©ºé—²åŒºè¡¨æ³•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨&lt;strong&gt;å¤§å‹ç³»ç»Ÿ&lt;/strong&gt;ä¸­ï¼Œ&lt;strong&gt;æˆç»„é“¾æ¥æ³•&lt;/strong&gt;èƒ½å¾ˆå¥½åœ°å¹³è¡¡æ€§èƒ½ä¸å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¤–å­˜ç©ºé—´çš„ç®¡ç†æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id="ç¯è·¯ä¸æ­»é”"&gt;ç¯è·¯ä¸æ­»é”
&lt;/h2&gt;&lt;p&gt;ä½ è¯´çš„å®Œå…¨æ­£ç¡®ï¼Œè¿™æ˜¯ç†è§£æ­»é”æ£€æµ‹çš„å…³é”®ã€‚èµ„æºåˆ†é…å›¾ä¸­çš„ç¯è·¯ï¼ˆå›è·¯ï¼‰æ˜¯æ­»é”çš„ä¸€ä¸ª&lt;strong&gt;å¿…è¦æ¡ä»¶ï¼Œä½†å¹¶éå……åˆ†æ¡ä»¶&lt;/strong&gt;ã€‚è€Œ&lt;strong&gt;æ­»é”å®šç†&lt;/strong&gt;é€šè¿‡â€œæ˜¯å¦å¯å®Œå…¨ç®€åŒ–â€çš„åˆ¤æ–­ï¼Œç»™å‡ºäº†æ­»é”çš„&lt;strong&gt;å……åˆ†æ¡ä»¶&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿæ¢³ç†æ ¸å¿ƒç»“è®ºï¼Œç„¶åè¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…³é”®æ¦‚å¿µ&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç»“è®º&lt;/th&gt;
&lt;th&gt;è¯¦ç»†è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºåˆ†é…å›¾ä¸­å­˜åœ¨ç¯è·¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯æ­»é”çš„ å¿…è¦æ¡ä»¶ï¼Œéå……åˆ†æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰ç¯â‰ æ­»é”ã€‚åªæœ‰å½“&lt;strong&gt;ç¯ä¸­æ¶‰åŠçš„æ¯ä¸€ç±»èµ„æºéƒ½åªæœ‰ä¸€ä¸ªå®ä¾‹&lt;/strong&gt;æ—¶ï¼Œæœ‰ç¯æ‰å¿…ç„¶å¯¼è‡´æ­»é”ã€‚å¦‚æœèµ„æºç±»æœ‰å¤šä¸ªå®ä¾‹ï¼Œå­˜åœ¨ç¯ä¹Ÿå¯èƒ½ä¸æ­»é”ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºåˆ†é…å›¾ä¸å¯å®Œå…¨ç®€åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯æ­»é”çš„ å……åˆ†æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿™æ˜¯&lt;strong&gt;æ­»é”å®šç†&lt;/strong&gt;çš„æ ¸å¿ƒã€‚å³ï¼Œ&lt;strong&gt;å½“ä¸”ä»…å½“&lt;/strong&gt;æŸçŠ¶æ€çš„èµ„æºåˆ†é…å›¾ä¸å¯å®Œå…¨ç®€åŒ–ï¼Œç³»ç»Ÿæ‰å¤„äºæ­»é”çŠ¶æ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•æœ‰ç¯ä¸ç­‰äºæ­»é”"&gt;ğŸ” ä¸ºä½•â€œæœ‰ç¯â€ä¸ç­‰äºâ€œæ­»é”â€ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€å°±æ˜¯â€œå¾ªç¯ç­‰å¾…â€ï¼Œè¿™åœ¨èµ„æºåˆ†é…å›¾ä¸­ç›´è§‚è¡¨ç°ä¸ºä¸€ä¸ª&lt;strong&gt;ç¯è·¯&lt;/strong&gt;ã€‚å› æ­¤ï¼Œ&lt;strong&gt;å¦‚æœå‘ç”Ÿæ­»é”ï¼Œå›¾ä¸­å¿…å®šå­˜åœ¨ç¯è·¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œåè¿‡æ¥å¹¶ä¸æˆç«‹ã€‚&lt;strong&gt;å­˜åœ¨ç¯è·¯ï¼Œç³»ç»Ÿæœªå¿…å‘ç”Ÿæ­»é”&lt;/strong&gt;ã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯ï¼Œå½“ç¯ä¸­æ¶‰åŠçš„&lt;strong&gt;æŸç±»èµ„æºæœ‰å¤šä¸ªå®ä¾‹&lt;/strong&gt;æ—¶ï¼Œå³ä½¿å­˜åœ¨ç¯è·¯ï¼Œç³»ç»Ÿä¹Ÿå¯èƒ½é€šè¿‡å‰©ä½™çš„ç©ºé—²èµ„æºæ‰“ç ´å¾ªç¯ç­‰å¾…ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ğŸŒ° ä¸¾ä¸ªä¾‹å­&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;å‡è®¾ç³»ç»Ÿæœ‰2ä¸ªåŒç±»å‹çš„R1èµ„æºã€‚è¿›ç¨‹P1å·²å ç”¨1ä¸ªR1ï¼Œå¹¶è¯·æ±‚1ä¸ªR2ï¼›è¿›ç¨‹P2å·²å ç”¨1ä¸ªR2ï¼Œå¹¶è¯·æ±‚1ä¸ªR1ã€‚å›¾ä¸­å­˜åœ¨P1â†’R2â†’P2â†’R1â†’P1çš„ç¯è·¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœ&lt;/strong&gt;æ­¤æ—¶ç³»ç»Ÿæ²¡æœ‰ç©ºé—²çš„R1èµ„æºï¼Œåˆ™P2çš„è¯·æ±‚æ— æ³•æ»¡è¶³ï¼ŒP1å’ŒP2äº’ç›¸ç­‰å¾…ï¼Œ&lt;strong&gt;æ­»é”å‘ç”Ÿ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½†æ˜¯&lt;/strong&gt;ï¼Œå¦‚æœç³»ç»Ÿè¿˜æœ‰1ä¸ªç©ºé—²çš„R1èµ„æºï¼Œæ“ä½œç³»ç»Ÿå°±å¯ä»¥å°†å®ƒåˆ†é…ç»™P2ã€‚P2è·å¾—åæ‰§è¡Œå®Œæ¯•ï¼Œé‡Šæ”¾å…¶å æœ‰çš„æ‰€æœ‰èµ„æºï¼ˆåŒ…æ‹¬R2ï¼‰ï¼ŒP1éšåå°±èƒ½è·å¾—R2å¹¶ç»§ç»­æ‰§è¡Œã€‚è¿™æ ·ï¼Œ&lt;strong&gt;ç¯è·¯å­˜åœ¨ï¼Œä½†æ­»é”å¾—ä»¥é¿å…&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› æ­¤ï¼Œä»…å‡­ç¯è·¯ä¸èƒ½æ–­å®šæ­»é”ï¼Œå°¤å…¶æ˜¯èµ„æºæœ‰å¤šå®ä¾‹æ—¶ã€‚&lt;/p&gt;
&lt;h3 id="-æ­»é”å®šç†ä¸å®Œå…¨ç®€åŒ–"&gt;âš–ï¸ æ­»é”å®šç†ä¸â€œå®Œå…¨ç®€åŒ–â€
&lt;/h3&gt;&lt;p&gt;æ­»é”å®šç†æä¾›äº†æ¯”â€œæŸ¥æ‰¾ç¯è·¯â€æ›´å¯é çš„åˆ¤æ–­æ–¹æ³•ï¼š&lt;strong&gt;ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ï¼Œå½“å‰çš„èµ„æºåˆ†é…å›¾ä¸å¯å®Œå…¨ç®€åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºåˆ†é…å›¾çš„ç®€åŒ–è¿‡ç¨‹&lt;/strong&gt;ï¼Œæ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿç³»ç»Ÿèµ„æºåˆ†é…ä¸å›æ”¶çš„è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ‰¾éé˜»å¡è¿›ç¨‹&lt;/strong&gt;ï¼šåœ¨å›¾ä¸­æ‰¾ä¸€ä¸ª&lt;strong&gt;æ—¢ä¸é˜»å¡åˆéç‹¬ç«‹&lt;/strong&gt;çš„è¿›ç¨‹ç»“ç‚¹ï¼ˆå³è¯¥è¿›ç¨‹æ‰€è¯·æ±‚çš„æ‰€æœ‰èµ„æºéƒ½èƒ½è¢«å½“å‰ç³»ç»Ÿçš„å‰©ä½™ç©ºé—²èµ„æºæ»¡è¶³ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡æ‹Ÿæ‰§è¡Œä¸é‡Šæ”¾&lt;/strong&gt;ï¼šå‡è®¾è¿™ä¸ªè¿›ç¨‹ç«‹å³å¾—åˆ°æ‰€éœ€èµ„æºå¹¶æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åé‡Šæ”¾å®ƒå æœ‰çš„æ‰€æœ‰èµ„æºã€‚åœ¨å›¾ä¸­ï¼Œè¿™ç›¸å½“äº&lt;strong&gt;ç§»é™¤æ‰€æœ‰ä¸è¯¥è¿›ç¨‹ç›¸è¿çš„è¾¹&lt;/strong&gt;ï¼ˆè¯·æ±‚è¾¹å’Œåˆ†é…è¾¹ï¼‰ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªå­¤ç«‹çš„ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤è¿‡ç¨‹&lt;/strong&gt;ï¼šé‡å¤æ­¥éª¤1å’Œ2ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆåˆ¤æ–­&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœæœ€ç»ˆå›¾ä¸­&lt;strong&gt;æ‰€æœ‰çš„è¾¹éƒ½è¢«ç§»é™¤&lt;/strong&gt;ï¼Œæ‰€æœ‰è¿›ç¨‹éƒ½æˆä¸ºå­¤ç«‹ç‚¹ï¼Œåˆ™ç§°è¯¥å›¾æ˜¯â€œ&lt;strong&gt;å¯å®Œå…¨ç®€åŒ–&lt;/strong&gt;â€çš„ã€‚è¿™è¡¨æ˜ç³»ç»Ÿ&lt;strong&gt;æœªå‘ç”Ÿæ­»é”&lt;/strong&gt;ï¼Œåˆšæ‰ç®€åŒ–çš„é¡ºåºå°±æ˜¯ä¸€ä¸ªå®‰å…¨åºåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¿‡ç¨‹ä¸­æ‰¾ä¸åˆ°ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„è¿›ç¨‹ï¼ˆæ‰€æœ‰è¿›ç¨‹éƒ½å› èµ„æºè¯·æ±‚æ— æ³•æ»¡è¶³è€Œé˜»å¡ï¼‰ï¼Œåˆ™ç§°è¯¥å›¾â€œ&lt;strong&gt;ä¸å¯å®Œå…¨ç®€åŒ–&lt;/strong&gt;â€ã€‚æ ¹æ®æ­»é”å®šç†ï¼Œæ­¤æ—¶ç³»ç»Ÿ&lt;strong&gt;ä¸€å®šå‘ç”Ÿäº†æ­»é”&lt;/strong&gt;ï¼Œè¿™äº›é˜»å¡çš„è¿›ç¨‹å°±æ˜¯æ­»é”è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œâ€œ&lt;strong&gt;ç®€åŒ–ä»¥åå­˜åœ¨å›è·¯&lt;/strong&gt;â€æœ¬è´¨ä¸Šå°±æ˜¯å› ä¸ºå›¾ä¸å¯ç®€åŒ–ï¼Œä»è€Œè¯æ˜äº†æ­»é”çš„å‘ç”Ÿã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥èµ„æºåˆ†é…å›¾ä¸­æ˜¯å¦æœ‰&lt;strong&gt;ç¯&lt;/strong&gt;ï¼Œæ˜¯æ­»é”æ£€æµ‹çš„ç¬¬ä¸€æ­¥ã€‚æœ‰ç¯æ„å‘³ç€&lt;strong&gt;é£é™©å­˜åœ¨&lt;/strong&gt;ï¼Œä½†&lt;strong&gt;ä¸ä¸€å®šæ­»é”&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”å®šç†&lt;/strong&gt;åŠå…¶â€œ&lt;strong&gt;å®Œå…¨ç®€åŒ–&lt;/strong&gt;â€æ–¹æ³•æ˜¯åˆ¤æ–­æ­»é”çš„&lt;strong&gt;é»„é‡‘å‡†åˆ™&lt;/strong&gt;ã€‚å®ƒé€šè¿‡æ¨¡æ‹Ÿèµ„æºåˆ†é…ï¼Œæœ€ç»ˆç¡®å®šæ­»é”æ˜¯å¦çœŸå®å‘ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å®é™…æ“ä½œç³»ç»Ÿä¸­ï¼Œæ­»é”æ£€æµ‹ç®—æ³•é€šå¸¸ä¼šç»¼åˆè¿ç”¨ç¯æ£€æµ‹å’Œç®€åŒ–æŠ€æœ¯æ¥åˆ¤æ–­ç³»ç»ŸçŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™æ¬¡çš„è§£é‡Šèƒ½è®©ä½ å¯¹æ­»é”çš„åˆ¤æ–­æœ‰æ›´æ¸…æ™°çš„è®¤è¯†ã€‚&lt;/p&gt;
&lt;h2 id="æ­»é”çš„æ¡ä»¶"&gt;æ­»é”çš„æ¡ä»¶
&lt;/h2&gt;&lt;p&gt;æ­»é”ç¡®å®éœ€è¦åŒæ—¶æ»¡è¶³å››ä¸ªç‰¹å®šæ¡ä»¶ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†è¿™äº›æ ¸å¿ƒæ¡ä»¶ï¼Œæ–¹ä¾¿ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡ä»¶&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæè¿°&lt;/th&gt;
&lt;th&gt;é€šä¿—ç†è§£&lt;/th&gt;
&lt;th&gt;ç ´åè¯¥æ¡ä»¶çš„æ€è·¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº’æ–¥æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èµ„æºä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ç‹¬å ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;ç‹¬æœ¨æ¡¥ä¸€æ¬¡åªèƒ½è¿‡ä¸€ä¸ªäººï¼Œåˆ«äººæƒ³è¿‡å¾—ç­‰ã€‚&lt;/td&gt;
&lt;td&gt;å°†ç‹¬å èµ„æºæ”¹é€ æˆå¯å…±äº«ä½¿ç”¨ï¼ˆå¦‚ä½¿ç”¨ &lt;strong&gt;SPOOLing æŠ€æœ¯&lt;/strong&gt;ï¼‰ï¼Œä½†å¾ˆå¤šèµ„æºæ— æ³•æ”¹é€ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯·æ±‚ä¸ä¿æŒæ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹åœ¨&lt;strong&gt;æŒæœ‰&lt;/strong&gt;è‡³å°‘ä¸€ä¸ªèµ„æºçš„åŒæ—¶ï¼Œåˆ&lt;strong&gt;è¯·æ±‚&lt;/strong&gt;æ–°çš„èµ„æºï¼Œå¹¶åœ¨ç­‰å¾…æ—¶ä¸é‡Šæ”¾å·²å èµ„æºã€‚&lt;/td&gt;
&lt;td&gt;å·¦æ‰‹æŠ“ç€ä¸€ä¸ªç¢—ä¸æ”¾ï¼ŒåŒæ—¶ä¼¸å³æ‰‹æƒ³å»æ‹¿é”…ï¼Œä¸¤ä¸ªéƒ½æƒ³è¦ã€‚&lt;/td&gt;
&lt;td&gt;é‡‡ç”¨&lt;strong&gt;é™æ€èµ„æºåˆ†é…&lt;/strong&gt;ç­–ç•¥ï¼Œè¿›ç¨‹åœ¨è¿è¡Œå‰å¿…é¡»ä¸€æ¬¡æ€§ç”³è¯·å…¶æ‰€éœ€å…¨éƒ¨èµ„æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸å¯å‰¥å¤ºæ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œæ¯•å‰ï¼Œ&lt;strong&gt;ä¸èƒ½è¢«ç³»ç»Ÿæˆ–å…¶ä»–è¿›ç¨‹å¼ºè¡ŒæŠ¢å &lt;/strong&gt;ï¼Œåªèƒ½ç”±è¿›ç¨‹ä¸»åŠ¨é‡Šæ”¾ã€‚&lt;/td&gt;
&lt;td&gt;ä½ æ‰‹é‡Œçš„ä¸œè¥¿ï¼Œåˆ«äººä¸èƒ½ç¡¬æŠ¢ï¼Œåªèƒ½ç­‰ä½ ç”¨å®Œè¿˜å›æ¥ã€‚&lt;/td&gt;
&lt;td&gt;å…è®¸ç³»ç»Ÿåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼ˆå¦‚è¿›ç¨‹è¯·æ±‚æ–°èµ„æºå¤±è´¥æ—¶ï¼‰&lt;strong&gt;å¼ºåˆ¶å‰¥å¤º&lt;/strong&gt;å…¶å·²æŒæœ‰çš„éƒ¨åˆ†èµ„æºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¾ªç¯ç­‰å¾…æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹èµ„æºçš„&lt;strong&gt;ç¯å½¢ç­‰å¾…é“¾&lt;/strong&gt;ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€æŒæœ‰çš„èµ„æºã€‚&lt;/td&gt;
&lt;td&gt;Aç­‰Bçš„ï¼ŒBç­‰Cçš„ï¼ŒCåˆåœ¨ç­‰Açš„ï¼Œå½¢æˆä¸€ä¸ªå¾ªç¯ï¼Œå¤§å®¶éƒ½åœ¨ç­‰ï¼Œè°ä¹ŸåŠ¨ä¸äº†ã€‚&lt;/td&gt;
&lt;td&gt;å¼ºåˆ¶è§„å®š&lt;strong&gt;èµ„æºè¯·æ±‚é¡ºåº&lt;/strong&gt;ï¼ˆå¦‚ç»™èµ„æºç¼–å·ï¼Œè¿›ç¨‹å¿…é¡»æŒ‰ç¼–å·é€’å¢é¡ºåºç”³è¯·ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;é‡è¦å…³ç³»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™å››ä¸ªæ¡ä»¶æ˜¯&lt;strong&gt;ç¼ºä¸€ä¸å¯&lt;/strong&gt;çš„ã€‚åªæœ‰å››ä¸ªæ¡ä»¶&lt;strong&gt;åŒæ—¶æ»¡è¶³&lt;/strong&gt;æ—¶ï¼Œæ­»é”æ‰ä¼šå‘ç”Ÿã€‚ å› æ­¤ï¼Œè¦é¢„é˜²æ­»é”ï¼Œåªéœ€æƒ³æ–¹è®¾æ³•&lt;strong&gt;ç ´åå…¶ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶&lt;/strong&gt;å³å¯ã€‚&lt;/p&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å„æ¡ä»¶"&gt;ğŸ” æ·±å…¥ç†è§£å„æ¡ä»¶
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº’æ–¥æ¡ä»¶ (Mutual Exclusion)&lt;/strong&gt;ï¼šè¿™æ˜¯è®¸å¤šç³»ç»Ÿèµ„æºæœ¬èº«çš„ç‰¹æ€§å†³å®šçš„ï¼Œå¦‚æ‰“å°æœºã€ç£å¸¦æœºç­‰ã€‚&lt;strong&gt;ç ´åæ­¤æ¡ä»¶é€šå¸¸è¾ƒå›°éš¾&lt;/strong&gt;ï¼Œå› ä¸ºå¾ˆå¤šèµ„æºæœ¬è´¨ä¸Šå°±æ˜¯æ— æ³•åŒæ—¶å…±äº«çš„ï¼ˆå¦‚ä¿®æ”¹åŒä¸€æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ (Hold and Wait)&lt;/strong&gt;ï¼šè¿™æè¿°äº†è¿›ç¨‹â€œè´ªå¿ƒâ€çš„ä¸€é¢ï¼Œå®ƒå æœ‰ä¸€äº›èµ„æºçš„åŒæ—¶è¿˜æƒ³ç€æ›´å¤šã€‚&lt;strong&gt;ç ´åæ­¤æ¡ä»¶&lt;/strong&gt;å¯è¦æ±‚è¿›ç¨‹åœ¨è¿è¡Œå‰å°±ç”³è¯·å…¶æ‰€éœ€å…¨éƒ¨èµ„æºï¼ˆ&lt;strong&gt;é™æ€é¢„åˆ†é…&lt;/strong&gt;ï¼‰ï¼Œä½†å¯èƒ½å¯¼è‡´&lt;strong&gt;èµ„æºåˆ©ç”¨ç‡ä½ä¸‹&lt;/strong&gt;ï¼ˆèµ„æºå¯èƒ½å¾ˆæ™šæ‰è¢«ä½¿ç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯å‰¥å¤ºæ¡ä»¶ (No Preemption)&lt;/strong&gt;ï¼šè¿™ä¿è¯äº†è¿›ç¨‹æŒæœ‰èµ„æºçš„ç¨³å®šæ€§ã€‚&lt;strong&gt;ç ´åæ­¤æ¡ä»¶&lt;/strong&gt;æ„å‘³ç€å…è®¸&lt;strong&gt;èµ„æºæŠ¢å &lt;/strong&gt;ï¼Œè¿™éœ€è¦æ“ä½œç³»ç»Ÿæä¾›æ”¯æŒï¼Œå¹¶å¯èƒ½å¸¦æ¥é¢å¤–çš„å¼€é”€ï¼ˆå¦‚ä¿å­˜å’Œæ¢å¤è¢«æŠ¢å è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾ªç¯ç­‰å¾…æ¡ä»¶ (Circular Wait)&lt;/strong&gt;ï¼šè¿™æ˜¯æ­»é”æœ€ç›´è§‚çš„è¡¨ç°å½¢å¼ã€‚&lt;strong&gt;ç ´åæ­¤æ¡ä»¶&lt;/strong&gt;çš„æœ‰æ•ˆæ–¹æ³•æ˜¯&lt;strong&gt;æŒ‰åºç”³è¯·èµ„æº&lt;/strong&gt;ï¼Œç»™æ‰€æœ‰èµ„æºç±»å‹ä¸€ä¸ªå…¨å±€é¡ºåºï¼Œè¿›ç¨‹å¿…é¡»æŒ‰æ­¤é¡ºåºç”³è¯·ã€‚è¿™å¯ä»¥æœ‰æ•ˆé˜²æ­¢ç¯å½¢ç­‰å¾…é“¾çš„å½¢æˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¶…è¶Šæ¡ä»¶æ­»é”çš„å¤„ç†ç­–ç•¥"&gt;âš™ï¸ è¶…è¶Šæ¡ä»¶ï¼šæ­»é”çš„å¤„ç†ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;ä»…ä»…ç†è§£æ¡ä»¶è¿˜ä¸å¤Ÿï¼Œæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºé€šå¸¸é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥åº”å¯¹æ­»é”ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­»é”é¢„é˜² (Deadlock Prevention)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€ç§&lt;strong&gt;ä¸¥æ ¼ä¸”é™æ€&lt;/strong&gt;çš„ç­–ç•¥ï¼Œé€šè¿‡&lt;strong&gt;è®¾è®¡ç³»ç»Ÿè§„åˆ™&lt;/strong&gt;æ¥&lt;strong&gt;ç¡®ä¿è‡³å°‘ä¸€ä¸ªå¿…è¦æ¡ä»¶æ°¸ä¸æˆç«‹&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼Œé‡‡ç”¨ä¸Šè¿°è¡¨æ ¼ä¸­â€œç ´åè¯¥æ¡ä»¶çš„æ€è·¯â€æ çš„æ–¹æ³•ï¼‰ã€‚ è¿™æ˜¯&lt;strong&gt;æœ€æ ¹æœ¬&lt;/strong&gt;çš„æ–¹æ³•ï¼Œä½†å¯èƒ½ä¼šé™åˆ¶ç³»ç»Ÿå¹¶å‘æ€§å’Œèµ„æºåˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­»é”é¿å… (Deadlock Avoidance)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€ç§&lt;strong&gt;åŠ¨æ€&lt;/strong&gt;ç­–ç•¥ï¼Œç³»ç»Ÿåœ¨&lt;strong&gt;æ¯æ¬¡åˆ†é…èµ„æºå‰&lt;/strong&gt;éƒ½ä¼š&lt;strong&gt;è°¨æ…é¢„æµ‹&lt;/strong&gt;æ­¤æ¬¡åˆ†é…æ˜¯å¦ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼ˆå¯èƒ½å‘ç”Ÿæ­»é”çš„çŠ¶æ€ï¼‰ã€‚è‹¥æ˜¯ï¼Œåˆ™æ‹’ç»åˆ†é…ã€‚ è‘—åçš„&lt;strong&gt;é“¶è¡Œå®¶ç®—æ³• (Banker&amp;rsquo;s Algorithm)&lt;/strong&gt; å°±æ˜¯åŸºäºæ­¤ç­–ç•¥ã€‚ å®ƒéœ€è¦è¿›ç¨‹é¢„å…ˆå£°æ˜å…¶æ‰€éœ€æœ€å¤§èµ„æºé‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ­»é”æ£€æµ‹ä¸æ¢å¤ (Deadlock Detection and Recovery)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿ&lt;strong&gt;ä¸é‡‡å–é¢„é˜²æªæ–½&lt;/strong&gt;ï¼Œå…è®¸æ­»é”å‘ç”Ÿï¼Œä½†ä¼š&lt;strong&gt;å®šæœŸè¿è¡Œæ£€æµ‹ç®—æ³•&lt;/strong&gt;ï¼ˆå¦‚åŸºäºèµ„æºåˆ†é…å›¾çš„ç®€åŒ–æ–¹æ³•ï¼‰ã€‚ä¸€æ—¦æ£€æµ‹åˆ°æ­»é”ï¼Œå°±é‡‡å–&lt;strong&gt;æ¢å¤æªæ–½&lt;/strong&gt;ï¼Œå¦‚&lt;strong&gt;ç»ˆæ­¢ä¸€ä¸ªæˆ–å¤šä¸ªæ­»é”è¿›ç¨‹&lt;/strong&gt;ï¼Œæˆ–&lt;strong&gt;æŠ¢å å…¶èµ„æº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿½ç•¥æ­»é” (Ostrich Algorithm)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;åƒé¸µé¸Ÿä¸€æ ·â€œæŠŠå¤´åŸ‹è¿›æ²™å­é‡Œâ€ï¼Œå‡è®¾æ­»é”æ°¸è¿œä¸ä¼šå‘ç”Ÿæˆ–å‘ç”Ÿæ¦‚ç‡æä½ã€‚ è®¸å¤šé€šç”¨æ“ä½œç³»ç»Ÿï¼ˆå¦‚ UNIX å’Œ Windowsï¼‰åœ¨ä¸€å®šç¨‹åº¦ä¸Šé‡‡ç”¨æ­¤ç­–ç•¥ï¼Œå°†å¤„ç†è´£ä»»æŠ›ç»™å¼€å‘äººå‘˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç»™å¼€å‘è€…çš„å®ç”¨å»ºè®®"&gt;ğŸ’¡ ç»™å¼€å‘è€…çš„å®ç”¨å»ºè®®
&lt;/h3&gt;&lt;p&gt;åœ¨ç¼–å†™å¹¶å‘ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é™ä½æ­»é”é£é™©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰å›ºå®šé¡ºåºè·å–é”&lt;/strong&gt;ï¼šå¼ºåˆ¶æ‰€æœ‰çº¿ç¨‹ä»¥ç›¸åŒçš„å…¨å±€é¡ºåºè·å–é”èµ„æºï¼Œè¿™æ˜¯ç ´å&lt;strong&gt;å¾ªç¯ç­‰å¾…æ¡ä»¶&lt;/strong&gt;æœ€å®ç”¨æœ‰æ•ˆçš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°½é‡é™ä½é”çš„ç²’åº¦&lt;/strong&gt;ï¼šå‡å°‘æŒé”æ—¶é—´ï¼Œåªåœ¨å¿…è¦æ—¶æŒæœ‰é”ï¼Œå°½å¿«é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é”çš„åµŒå¥—&lt;/strong&gt;ï¼šå°½é‡é¿å…åœ¨æŒæœ‰ä¸€ä¸ªé”çš„æƒ…å†µä¸‹å†å»è·å–å¦ä¸€ä¸ªé”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨å¸¦è¶…æ—¶çš„é”è·å–æœºåˆ¶&lt;/strong&gt;ï¼šå°è¯•è·å–é”æ—¶è®¾ç½®è¶…æ—¶ï¼Œè¶…æ—¶åé‡Šæ”¾å·²æŒæœ‰çš„æ‰€æœ‰é”å¹¶è¿›è¡Œå›é€€é‡è¯•ï¼ˆé…åˆéšæœºé€€é¿ç®—æ³•ï¼‰ï¼Œè¿™æœ‰åŠ©äºç ´å&lt;strong&gt;è¯·æ±‚ä¸ä¿æŒæ¡ä»¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è®°ä½ï¼Œ&lt;strong&gt;äº’æ–¥ã€è¯·æ±‚ä¸ä¿æŒã€ä¸å¯å‰¥å¤ºã€å¾ªç¯ç­‰å¾…&lt;/strong&gt;è¿™å››ä¸ªæ¡ä»¶æ˜¯æ­»é”å‘ç”Ÿçš„â€œå®Œç¾é£æš´â€ï¼Œç¼ºä¸€ä¸å¯ã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£å®ƒä»¬ä¸ä»…èƒ½å¸®åŠ©ä½ åˆ†æä¸ºä½•ä¼šå‘ç”Ÿæ­»é”ï¼Œæ›´é‡è¦çš„æ˜¯ä¸º&lt;strong&gt;é¢„é˜²å’Œé¿å…æ­»é”&lt;/strong&gt;æä¾›äº†æ˜ç¡®çš„æ–¹å‘ï¼š&lt;strong&gt;æƒ³åŠæ³•æ‰“ç ´å…¶ä¸­ä»»ä½•ä¸€ä¸ªç¯èŠ‚&lt;/strong&gt;å³å¯ã€‚ åœ¨å®é™…å¼€å‘å’Œç³»ç»Ÿè®¾è®¡ä¸­ï¼Œæ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„æ­»é”å¤„ç†ç­–ç•¥è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;h2 id="å†…å­˜ç®¡ç†"&gt;å†…å­˜ç®¡ç†
&lt;/h2&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ˜¯å…¶æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£åè°ƒå’Œä¼˜åŒ–è®¡ç®—æœºç³»ç»Ÿä¸­å®è´µçš„å†…å­˜èµ„æºã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿&lt;strong&gt;é«˜æ•ˆã€ç¨³å®šå’Œå®‰å…¨&lt;/strong&gt;åœ°ä¸ºå¤šä¸ªè¿è¡Œä¸­çš„ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰æä¾›æ‰€éœ€çš„å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å››ç§å¸¸è§å†…å­˜åˆ†é…ç®—æ³•çš„ç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;é¦–æ¬¡é€‚åº”ç®—æ³• (First Fit)&lt;/th&gt;
&lt;th&gt;æœ€ä½³é€‚åº”ç®—æ³• (Best Fit)&lt;/th&gt;
&lt;th&gt;æœ€åé€‚åº”ç®—æ³• (Worst Fit)&lt;/th&gt;
&lt;th&gt;é‚»è¿‘é€‚åº”ç®—æ³• (Next Fit)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é¡ºåºæŸ¥æ‰¾&lt;/strong&gt;ï¼Œæ‰¾åˆ°&lt;strong&gt;ç¬¬ä¸€ä¸ª&lt;/strong&gt;èƒ½æ»¡è¶³è¯·æ±‚çš„ç©ºé—²å—&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥æ‰¾&lt;/strong&gt;èƒ½æ»¡è¶³è¯·æ±‚çš„&lt;strong&gt;æœ€å°&lt;/strong&gt;ç©ºé—²å—&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥æ‰¾&lt;/strong&gt;èƒ½æ»¡è¶³è¯·æ±‚çš„&lt;strong&gt;æœ€å¤§&lt;/strong&gt;ç©ºé—²å—&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;ä¸Šæ¬¡åˆ†é…çš„ä½ç½®å¼€å§‹&lt;/strong&gt;é¡ºåºæŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªèƒ½æ»¡è¶³è¯·æ±‚çš„ç©ºé—²å—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•ã€å¿«é€Ÿï¼Œåˆ†é…æ•ˆç‡é«˜&lt;/td&gt;
&lt;td&gt;åŠ›å›¾å‡å°‘å¤–éƒ¨ç¢ç‰‡ï¼ˆä½†å¯èƒ½äº§ç”Ÿå¤§é‡éš¾ä»¥åˆ©ç”¨çš„å°ç¢ç‰‡ï¼‰&lt;/td&gt;
&lt;td&gt;é¿å…äº§ç”Ÿè¿‡å¤šéå¸¸å°çš„å¤–éƒ¨ç¢ç‰‡&lt;/td&gt;
&lt;td&gt;åˆ†é…é€Ÿåº¦è¾ƒå¿«ï¼Œæ— éœ€æ€»æ˜¯ä»å¤´å¼€å§‹æŸ¥æ‰¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®¹æ˜“åœ¨ä½åœ°å€éƒ¨åˆ†äº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ï¼Œå¢åŠ å¤§å†…å­˜å—åˆ†é…çš„æŸ¥æ‰¾æ—¶é—´&lt;/td&gt;
&lt;td&gt;å®¹æ˜“äº§ç”Ÿå¤§é‡&lt;strong&gt;éš¾ä»¥åˆ©ç”¨çš„å°å¤–éƒ¨ç¢ç‰‡&lt;/strong&gt;ï¼Œå¢åŠ å†…å­˜æµªè´¹å’ŒæŸ¥æ‰¾å¼€é”€&lt;/td&gt;
&lt;td&gt;ç¼ºä¹å¤§ç©ºé—²å—ï¼Œå¯èƒ½å¯¼è‡´åç»­&lt;strong&gt;æ— æ³•æ»¡è¶³å¤§å†…å­˜è¯·æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼ºä¹å¤§ç©ºé—²å—ï¼Œå¯èƒ½å¯¼è‡´åç»­&lt;strong&gt;æ— æ³•æ»¡è¶³å¤§å†…å­˜è¯·æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿè´Ÿè½½è¾ƒè½»ï¼Œå¯¹åˆ†é…é€Ÿåº¦è¦æ±‚è¾ƒé«˜çš„ç¯å¢ƒ&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿè´Ÿè½½è¾ƒè½»ï¼Œå¯¹åˆ†é…é€Ÿåº¦è¦æ±‚è¾ƒé«˜çš„ç¯å¢ƒ&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿè´Ÿè½½è¾ƒè½»ï¼Œå¯¹åˆ†é…é€Ÿåº¦è¦æ±‚è¾ƒé«˜çš„ç¯å¢ƒ&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿè´Ÿè½½è¾ƒè½»ï¼Œå¯¹åˆ†é…é€Ÿåº¦è¦æ±‚è¾ƒé«˜çš„ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å†…å­˜ç®¡ç†å…³é”®æœºåˆ¶çš„è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;h3 id="-å†…å­˜ç®¡ç†çš„åŸºæœ¬ä»»åŠ¡"&gt;ğŸ§  å†…å­˜ç®¡ç†çš„åŸºæœ¬ä»»åŠ¡
&lt;/h3&gt;&lt;p&gt;å†…å­˜ç®¡ç†ä¸»è¦è´Ÿè´£ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜åˆ†é…ä¸å›æ”¶&lt;/strong&gt;ï¼šè´Ÿè´£ä¸ºè¿›ç¨‹åˆ†é…æ‰€éœ€çš„å†…å­˜ç©ºé—´ï¼Œå¹¶åœ¨è¿›ç¨‹ç»“æŸååŠæ—¶å›æ”¶é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ä¿æŠ¤&lt;/strong&gt;ï¼šç¡®ä¿æ¯ä¸ªè¿›ç¨‹åªèƒ½åœ¨è‡ªå·±çš„å†…å­˜ç©ºé—´å†…è¿›è¡Œæ“ä½œï¼Œé˜²æ­¢è¿›ç¨‹è¶Šç•Œè®¿é—®æˆ–ç ´åå…¶ä»–è¿›ç¨‹ä»¥åŠæ“ä½œç³»ç»Ÿæœ¬èº«çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€æ˜ å°„&lt;/strong&gt;ï¼šå°†ç¨‹åºä½¿ç”¨çš„è™šæ‹Ÿåœ°å€ï¼ˆæˆ–é€»è¾‘åœ°å€ï¼‰è½¬æ¢ä¸ºç‰©ç†å†…å­˜ä¸­çš„å®é™…åœ°å€ï¼ˆç‰©ç†åœ°å€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å…±äº«&lt;/strong&gt;ï¼šå…è®¸å¤šä¸ªè¿›ç¨‹å®‰å…¨åœ°è®¿é—®å…±åŒçš„ç‰©ç†å†…å­˜åŒºåŸŸï¼Œä»¥æé«˜èµ„æºåˆ©ç”¨ç‡ï¼ˆä¾‹å¦‚å…±äº«åº“ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿå†…å­˜&lt;/strong&gt;ï¼šé€šè¿‡è½¯ç¡¬ä»¶ç»“åˆï¼Œä½¿å¾—åº”ç”¨ç¨‹åºè®¤ä¸ºè‡ªå·±æ‹¥æœ‰è¿ç»­çš„ã€å·¨å¤§çš„å†…å­˜ç©ºé—´ï¼Œè€Œå®é™…ä¸Šå¯èƒ½ç‰©ç†å†…å­˜å¹¶æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œéƒ¨åˆ†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å†…å­˜åˆ†é…ç­–ç•¥"&gt;ğŸ“¦ å†…å­˜åˆ†é…ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿåˆ†é…å†…å­˜ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿ç»­å†…å­˜åˆ†é…&lt;/strong&gt;ï¼šæŒ‡ä¸ºè¿›ç¨‹åˆ†é…ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•ä¸€è¿ç»­åˆ†é…&lt;/strong&gt;ï¼šå†…å­˜åˆ†ä¸ºç³»ç»ŸåŒºå’Œç”¨æˆ·åŒºï¼Œç®€å•ä½†ä»…æ”¯æŒå•é“ç¨‹åºï¼Œå·²æ·˜æ±°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›ºå®šåˆ†åŒºåˆ†é…&lt;/strong&gt;ï¼šé¢„å…ˆå°†å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªå›ºå®šå¤§å°çš„åˆ†åŒºï¼Œå®¹æ˜“äº§ç”Ÿ&lt;strong&gt;å†…éƒ¨ç¢ç‰‡&lt;/strong&gt;ï¼ˆåˆ†åŒºå†…æœªè¢«åˆ©ç”¨çš„ç©ºé—´ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€åˆ†åŒºåˆ†é…&lt;/strong&gt;ï¼šæ ¹æ®è¿›ç¨‹å®é™…éœ€æ±‚åŠ¨æ€åˆ’åˆ†å†…å­˜ï¼Œä¼šäº§ç”Ÿ&lt;strong&gt;å¤–éƒ¨ç¢ç‰‡&lt;/strong&gt;ï¼ˆè¿›ç¨‹ä¹‹é—´éš¾ä»¥åˆ©ç”¨çš„å°å—ç©ºé—²å†…å­˜ï¼‰ï¼Œéœ€è¦é€šè¿‡â€œ&lt;strong&gt;ç´§å‡‘&lt;/strong&gt;â€æŠ€æœ¯æ¥åˆå¹¶ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éè¿ç»­å†…å­˜åˆ†é…&lt;/strong&gt;ï¼šå…è®¸è¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸å¿…è¿ç»­å­˜æ”¾ï¼Œèƒ½æœ‰æ•ˆå‡å°‘ç¢ç‰‡ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é¡µç®¡ç†&lt;/strong&gt;ï¼šå°†ç‰©ç†å†…å­˜å’Œè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´éƒ½åˆ’åˆ†ä¸ºå›ºå®šå¤§å°çš„&lt;strong&gt;é¡µ&lt;/strong&gt;ï¼ˆPageï¼‰å’Œ&lt;strong&gt;é¡µæ¡†&lt;/strong&gt;ï¼ˆPage Frameï¼‰ã€‚é€šè¿‡&lt;strong&gt;é¡µè¡¨&lt;/strong&gt;ï¼ˆPage Tableï¼‰å®ç°è™šæ‹Ÿé¡µå·åˆ°ç‰©ç†é¡µæ¡†å·çš„æ˜ å°„ã€‚åˆ†é¡µæœ‰æ•ˆè§£å†³äº†å¤–éƒ¨ç¢ç‰‡ï¼Œä½†å¯èƒ½å­˜åœ¨å°‘é‡å†…éƒ¨ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ®µç®¡ç†&lt;/strong&gt;ï¼šæŒ‰ç…§ç¨‹åºçš„é€»è¾‘ç»“æ„ï¼ˆå¦‚ä»£ç æ®µã€æ•°æ®æ®µã€å †æ ˆæ®µï¼‰å°†è¿›ç¨‹çš„åœ°å€ç©ºé—´åˆ’åˆ†ä¸ºå¤§å°ä¸ç­‰çš„&lt;strong&gt;æ®µ&lt;/strong&gt;ã€‚æ¯ä¸ªæ®µæœ‰æ®µå·å’Œæ®µå†…åç§»ï¼Œé€šè¿‡&lt;strong&gt;æ®µè¡¨&lt;/strong&gt;å®ç°æ˜ å°„ã€‚åˆ†æ®µä¾¿äºå…±äº«å’Œä¿æŠ¤ï¼Œä½†ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ®µé¡µå¼ç®¡ç†&lt;/strong&gt;ï¼šç»“åˆåˆ†æ®µå’Œåˆ†é¡µçš„ä¼˜ç‚¹ã€‚å…ˆå°†ç¨‹åºæŒ‰é€»è¾‘åˆ†æ®µï¼Œæ¯ä¸ªæ®µå†…éƒ¨å†è¿›è¡Œäº†åˆ†é¡µã€‚æ—¢æä¾›äº†åˆ†æ®µå¼çš„é€»è¾‘æ¸…æ™°å’Œä¿æŠ¤å…±äº«ä¼˜åŠ¿ï¼Œåˆäº«å—äº†åˆ†é¡µå¼åœ¨ç‰©ç†å†…å­˜åˆ†é…ä¸Šçš„é«˜æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è™šæ‹Ÿå†…å­˜æŠ€æœ¯"&gt;ğŸ’¾ è™šæ‹Ÿå†…å­˜æŠ€æœ¯
&lt;/h3&gt;&lt;p&gt;è™šæ‹Ÿå†…å­˜å…è®¸ç¨‹åºä½¿ç”¨æ¯”å®é™…ç‰©ç†å†…å­˜æ›´å¤§çš„åœ°å€ç©ºé—´ã€‚å®ƒåŸºäº&lt;strong&gt;å±€éƒ¨æ€§åŸç†&lt;/strong&gt;ï¼ˆç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå€¾å‘äºè®¿é—®æœ€è¿‘ä½¿ç”¨è¿‡çš„æˆ–å…¶é™„è¿‘çš„æ•°æ®ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šæ“ä½œç³»ç»Ÿåªå°†å½“å‰éœ€è¦çš„éƒ¨åˆ†ï¼ˆé¡µæˆ–æ®µï¼‰åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚å½“ç¨‹åºè®¿é—®ä¸åœ¨ç‰©ç†å†…å­˜ä¸­çš„é¡µé¢æ—¶ï¼Œä¼šè§¦å‘&lt;strong&gt;ç¼ºé¡µä¸­æ–­&lt;/strong&gt;ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£å°†æ‰€éœ€çš„é¡µé¢ä»ç£ç›˜ï¼ˆäº¤æ¢ç©ºé—´ï¼‰è°ƒå…¥å†…å­˜ã€‚å¦‚æœç‰©ç†å†…å­˜å·²æ»¡ï¼Œåˆ™éœ€æ ¹æ®&lt;strong&gt;é¡µé¢ç½®æ¢ç®—æ³•&lt;/strong&gt;é€‰æ‹©ä¸€ä¸ªé¡µé¢æ¢å‡ºåˆ°ç£ç›˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§é¡µé¢ç½®æ¢ç®—æ³•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³ç½®æ¢ç®—æ³•ï¼ˆOPTï¼‰&lt;/strong&gt;ï¼šæ·˜æ±°æœªæ¥æœ€é•¿æ—¶é—´ä¸å†è®¿é—®çš„é¡µé¢ï¼Œç†è®ºæœ€ä¼˜ä½†æ— æ³•å®é™…å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLRUï¼‰&lt;/strong&gt;ï¼šæ·˜æ±°æœ€é•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®çš„é¡µé¢ï¼Œæ•ˆæœæ¥è¿‘OPTï¼Œä½†å®ç°å¼€é”€è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…ˆè¿›å…ˆå‡ºç®—æ³•ï¼ˆFIFOï¼‰&lt;/strong&gt;ï¼šæ·˜æ±°æœ€å…ˆè¿›å…¥å†…å­˜çš„é¡µé¢ï¼Œå®ç°ç®€å•ä½†æ€§èƒ½è¾ƒå·®ï¼Œå¯èƒ½å‡ºç°Beladyå¼‚å¸¸ï¼ˆåˆ†é…æ›´å¤šç‰©ç†é¡µåè€Œå¯¼è‡´ç¼ºé¡µæ¬¡æ•°å¢åŠ ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é’Ÿç®—æ³•ï¼ˆClockï¼‰&lt;/strong&gt;ï¼šFIFOçš„æ”¹è¿›ï¼Œç»™äºˆé¡µé¢ç¬¬äºŒæ¬¡æœºä¼šï¼Œæ€§èƒ½å’Œå¼€é”€è¾ƒä¸ºå¹³è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å†…å­˜ä¿æŠ¤ä¸å…±äº«"&gt;ğŸ›¡ï¸ å†…å­˜ä¿æŠ¤ä¸å…±äº«
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ä¿æŠ¤&lt;/strong&gt;ï¼šé€šè¿‡ç¡¬ä»¶æœºåˆ¶ï¼ˆå¦‚åŸºå€/ç•Œé™å¯„å­˜å™¨ã€MMUä¸­çš„é¡µè¡¨ä¿æŠ¤ä½ï¼‰ç¡®ä¿è¿›ç¨‹åªèƒ½è®¿é—®å…¶è¢«æˆæƒçš„å†…å­˜åŒºåŸŸï¼Œé˜²æ­¢è¶Šç•Œè®¿é—®å’Œéæ³•æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å…±äº«&lt;/strong&gt;ï¼šå¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡å°†è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´æ˜ å°„åˆ°ç›¸åŒçš„ç‰©ç†é¡µæ¡†æˆ–æ®µæ¥å…±äº«ä»£ç ï¼ˆå¦‚å…¬å…±åº“ï¼‰æˆ–æ•°æ®ã€‚è¿™æé«˜äº†å†…å­˜åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¼˜åŒ–æŠ€æœ¯"&gt;âš™ï¸ ä¼˜åŒ–æŠ€æœ¯
&lt;/h3&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿé‡‡ç”¨å¤šç§æŠ€æœ¯ä¼˜åŒ–å†…å­˜ç®¡ç†æ€§èƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢æ£€æµ‹ç¼“å†²åŒºï¼ˆTLBï¼‰&lt;/strong&gt;ï¼šä¹Ÿç§°ä¸º&lt;strong&gt;å¿«è¡¨&lt;/strong&gt;ï¼Œæ˜¯CPUä¸­ç¼“å­˜æœ€è¿‘ä½¿ç”¨é¡µè¡¨é¡¹çš„é«˜é€Ÿç¼“å­˜ï¼Œå¯æå¤§åŠ é€Ÿè™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜å‹ç¼©&lt;/strong&gt;ï¼šç§»åŠ¨å¹¶åˆå¹¶åˆ†æ•£çš„ç©ºé—²å†…å­˜å—ï¼Œå½¢æˆæ›´å¤§çš„è¿ç»­å¯ç”¨ç©ºé—´ï¼Œä»¥åº”å¯¹å¤–éƒ¨ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜æ± &lt;/strong&gt;ï¼šé¢„å…ˆåˆ†é…ä¸€ç»„å›ºå®šå¤§å°çš„å†…å­˜å—ï¼Œç”¨äºæ»¡è¶³ç‰¹å®šå¤§å°æˆ–é«˜é¢‘çš„å†…å­˜è¯·æ±‚ï¼Œå‡å°‘é¢‘ç¹åˆ†é…é‡Šæ”¾çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢„è¯»æœºåˆ¶&lt;/strong&gt;ï¼šæ ¹æ®ç¨‹åºçš„è®¿é—®æ¨¡å¼ï¼Œé¢„æµ‹å¹¶æå‰å°†å¯èƒ½éœ€è¦çš„é¡µé¢åŠ è½½åˆ°å†…å­˜ï¼Œå‡å°‘ç¼ºé¡µä¸­æ–­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†æ˜¯ä¸€ä¸ªå¤æ‚è€Œç²¾å·§çš„å­ç³»ç»Ÿã€‚å®ƒé€šè¿‡&lt;strong&gt;è™šæ‹Ÿå†…å­˜&lt;/strong&gt;æŠ€æœ¯æ‰©å±•äº†åœ°å€ç©ºé—´ï¼Œåˆ©ç”¨&lt;strong&gt;åˆ†é¡µ/åˆ†æ®µ&lt;/strong&gt;ç­‰éè¿ç»­åˆ†é…ç­–ç•¥å‡å°‘ç¢ç‰‡ï¼Œå€ŸåŠ©&lt;strong&gt;TLB&lt;/strong&gt;å’Œ&lt;strong&gt;é¡µé¢ç½®æ¢ç®—æ³•&lt;/strong&gt;ä¼˜åŒ–æ€§èƒ½ï¼Œå¹¶é€šè¿‡ä¸¥æ ¼çš„&lt;strong&gt;ä¿æŠ¤ä¸å…±äº«&lt;/strong&gt;æœºåˆ¶ç¡®ä¿å®‰å…¨æ€§å’Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ“ä½œç³»ç»Ÿå†…å­˜ç®¡ç†çš„å¥¥ç§˜ã€‚&lt;/p&gt;
&lt;h2 id="æ®µé¡µå¼"&gt;æ®µé¡µå¼
&lt;/h2&gt;&lt;p&gt;æ®µé¡µå¼å†…å­˜ç®¡ç†æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿä¸­ä¸€ç§é«˜æ•ˆä¸”å¤æ‚çš„å†…å­˜ç®¡ç†æ–¹æ¡ˆï¼Œå®ƒå·§å¦™åœ°å°†&lt;strong&gt;åˆ†æ®µï¼ˆSegmentationï¼‰&lt;/strong&gt; çš„é€»è¾‘æ¸…æ™°æ€§ä¸ &lt;strong&gt;åˆ†é¡µï¼ˆPagingï¼‰&lt;/strong&gt; çš„å†…å­˜åˆ©ç”¨ç‡ç»“åˆèµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å…¶å…¨è²Œï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“å…¶æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;æ®µé¡µå¼å†…å­˜ç®¡ç†&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…ˆåˆ†æ®µ&lt;/strong&gt;ï¼ˆæŒ‰é€»è¾‘æ¨¡å—ï¼Œå¦‚ä»£ç /æ•°æ®æ®µï¼‰ï¼Œ&lt;strong&gt;å†åˆ†é¡µ&lt;/strong&gt;ï¼ˆæ¯ä¸ªæ®µå†…åˆ’åˆ†å›ºå®šå¤§å°é¡µï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ï¼ˆæ®µå· S, é¡µå· P, é¡µå†…åç§» Wï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ•°æ®ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ®µè¡¨ï¼ˆæ¯ä¸ªè¿›ç¨‹ä¸€å¼ ï¼‰ã€é¡µè¡¨ï¼ˆæ¯ä¸ªæ®µä¸€å¼ ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€è½¬æ¢æ­¥éª¤&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ®µå· â†’ æŸ¥æ®µè¡¨å¾—é¡µè¡¨å§‹å€ â†’ é¡µå· â†’ æŸ¥é¡µè¡¨å¾—ç‰©ç†å—å· â†’ ç»“åˆåç§»å¾—ç‰©ç†åœ°å€ï¼ˆéœ€&lt;strong&gt;ä¸¤æ¬¡æŸ¥è¡¨&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;é€»è¾‘æ¸…æ™°&lt;/strong&gt;ï¼Œä¾¿äºå…±äº«ä¿æŠ¤ 2. &lt;strong&gt;å†…å­˜åˆ©ç”¨ç‡é«˜&lt;/strong&gt;ï¼Œæ— å¤–éƒ¨ç¢ç‰‡ 3. æ”¯æŒ&lt;strong&gt;è™šæ‹Ÿå†…å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;åœ°å€è½¬æ¢å¤æ‚&lt;/strong&gt;ï¼Œå¼€é”€å¤§ 2. &lt;strong&gt;ç®¡ç†æ•°æ®ç»“æ„&lt;/strong&gt;ï¼ˆæ®µè¡¨ã€é¡µè¡¨ï¼‰å ç”¨é¢å¤–å†…å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¢ç‰‡é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…å­˜åœ¨&lt;strong&gt;é¡µå†…ç¢ç‰‡&lt;/strong&gt;ï¼ˆå†…éƒ¨ç¢ç‰‡ï¼‰ï¼Œæ— å¤–éƒ¨ç¢ç‰‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§å‹æ“ä½œç³»ç»Ÿï¼ˆå¦‚Linuxã€Windowsï¼‰ã€éœ€è¦æ¨¡å—åŒ–ç®¡ç†å’Œé«˜æ•ˆå†…å­˜åˆ©ç”¨çš„ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ®µé¡µå¼å†…å­˜ç®¡ç†çš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id="-åœ°å€è½¬æ¢è¿‡ç¨‹"&gt;ğŸ” åœ°å€è½¬æ¢è¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;åœ°å€è½¬æ¢æ˜¯æ®µé¡µå¼ç®¡ç†çš„æ ¸å¿ƒï¼Œå…¶ç›®çš„æ˜¯å°†ç¨‹åºå‘˜çœ‹åˆ°çš„&lt;strong&gt;é€»è¾‘åœ°å€ï¼ˆæˆ–è™šæ‹Ÿåœ°å€ï¼‰&lt;/strong&gt; è½¬æ¢ä¸ºå®é™…çš„&lt;strong&gt;ç‰©ç†åœ°å€&lt;/strong&gt;ã€‚æ­¤è¿‡ç¨‹éœ€è¦ä¸¤æ¬¡æŸ¥è¡¨ï¼Œå¹¶ç”±ç¡¬ä»¶ï¼ˆMMU-å†…å­˜ç®¡ç†å•å…ƒï¼‰ååŠ©å®Œæˆã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘åœ°å€åˆ†è§£&lt;/strong&gt;ï¼šCPUå‘å‡ºçš„é€»è¾‘åœ°å€è¢«ç¡¬ä»¶è‡ªåŠ¨åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ®µå· (S)&lt;/strong&gt;ï¼šæŒ‡å‡ºåœ°å€å±äºå“ªä¸ªé€»è¾‘æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¡µå· (P)&lt;/strong&gt;ï¼šæŒ‡å‡ºåœ¨æ®µå†…çš„å“ªä¸€é¡µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¡µå†…åç§» (W)&lt;/strong&gt;ï¼šæŒ‡å‡ºåœ¨é¡µå†…çš„å…·ä½“ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥æ®µè¡¨&lt;/strong&gt;ï¼šä»¥æ®µå·ä½œä¸ºç´¢å¼•ï¼ŒæŸ¥æ‰¾å½“å‰è¿›ç¨‹çš„&lt;strong&gt;æ®µè¡¨&lt;/strong&gt;ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ®µè¡¨é¡¹ã€‚æ®µè¡¨é¡¹ä¸­åŒ…å«äº†è¯¥æ®µå¯¹åº”çš„&lt;strong&gt;é¡µè¡¨çš„èµ·å§‹ç‰©ç†åœ°å€&lt;/strong&gt;ä»¥åŠé¡µè¡¨é•¿åº¦ï¼ˆç”¨äºè¶Šç•Œæ£€æŸ¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥é¡µè¡¨&lt;/strong&gt;ï¼šä»¥é¡µå·ä½œä¸ºç´¢å¼•ï¼Œåœ¨åˆšæ‰¾åˆ°çš„&lt;strong&gt;é¡µè¡¨&lt;/strong&gt;ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè·å–è¯¥é¡µå¯¹åº”çš„&lt;strong&gt;ç‰©ç†å—å·ï¼ˆé¡µæ¡†å·ï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆæˆç‰©ç†åœ°å€&lt;/strong&gt;ï¼šå°†å¾—åˆ°çš„&lt;strong&gt;ç‰©ç†å—å·&lt;/strong&gt;ä¸&lt;strong&gt;é¡µå†…åç§»W&lt;/strong&gt;æ‹¼æ¥ï¼Œå½¢æˆæœ€ç»ˆçš„&lt;strong&gt;ç‰©ç†åœ°å€&lt;/strong&gt;ï¼Œç”¨äºè®¿é—®å†…å­˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ğŸ“Š åœ°å€è½¬æ¢æµç¨‹ç¤ºæ„&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;é€»è¾‘åœ°å€: [ æ®µå·(S) | é¡µå·(P) | é¡µå†…åç§»(W) ]
|
v
æ®µè¡¨å¯„å­˜å™¨
|
+-----------------+-----------------+
| |
v (ä½¿ç”¨Sç´¢å¼•) |
æ®µè¡¨ -&amp;gt; è·å–è¯¥æ®µé¡µè¡¨èµ·å§‹åœ°å€ |
| |
v (ä½¿ç”¨Pç´¢å¼•) |
é¡µè¡¨ -&amp;gt; è·å–ç‰©ç†å—å·(F) |
| |
+-----------------+-----------------+
|
v
ç‰©ç†åœ°å€: [ ç‰©ç†å—å·(F) | é¡µå†…åç§»(W) ] -&amp;gt; è®¿é—®å†…å­˜
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;æ³¨æ„ï¼šè‹¥åœ¨è½¬æ¢è¿‡ç¨‹ä¸­å‘ç°æ®µä¸å­˜åœ¨ã€é¡µä¸åœ¨å†…å­˜æˆ–æƒé™é”™è¯¯ï¼Œå°†äº§ç”Ÿç›¸åº”ä¸­æ–­ï¼ˆæ®µé”™è¯¯/ç¼ºé¡µä¸­æ–­ï¼‰ç”±æ“ä½œç³»ç»Ÿå¤„ç†ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="-ä¼˜ç¼ºç‚¹åˆ†æ"&gt;âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ
&lt;/h3&gt;&lt;h4 id="-ä¼˜ç‚¹"&gt;âœ… ä¼˜ç‚¹
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¼é¡¾é€»è¾‘æ€§ä¸é«˜æ•ˆæ€§&lt;/strong&gt;ï¼šæ—¢ä¿ç•™äº†åˆ†æ®µæœºåˆ¶&lt;strong&gt;æŒ‰é€»è¾‘æ¨¡å—ç®¡ç†&lt;/strong&gt;çš„ä¼˜ç‚¹ï¼Œä¾¿äºå®ç°ä»£ç å…±äº«å’Œæ•°æ®ä¿æŠ¤ï¼›åˆé€šè¿‡åˆ†é¡µæœºåˆ¶&lt;strong&gt;é¿å…äº†å¤–éƒ¨ç¢ç‰‡&lt;/strong&gt;ï¼Œæ˜¾è‘—æé«˜äº†å†…å­˜åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¯æŒè™šæ‹Ÿå†…å­˜&lt;/strong&gt;ï¼šè¿™æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿçš„åŸºçŸ³ã€‚æ®µé¡µå¼ç®¡ç†å¤©ç„¶æ”¯æŒ&lt;strong&gt;æŒ‰éœ€è°ƒé¡µ&lt;/strong&gt;å’Œ&lt;strong&gt;é¡µé¢ç½®æ¢&lt;/strong&gt;ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥ä½¿ç”¨æ¯”å®é™…ç‰©ç†å†…å­˜å¤§å¾—å¤šçš„åœ°å€ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ‰©å±•çµæ´»&lt;/strong&gt;ï¼šå †æ ˆæ®µç­‰å¯ä»¥æŒ‰éœ€åŠ¨æ€å¢é•¿ï¼Œåªéœ€åˆ†é…æ–°çš„é¡µå³å¯ï¼Œéå¸¸çµæ´»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="-ç¼ºç‚¹"&gt;âŒ ç¼ºç‚¹
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç®¡ç†å¼€é”€å¤§&lt;/strong&gt;ï¼šéœ€è¦ä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€å¼ &lt;strong&gt;æ®µè¡¨&lt;/strong&gt;ï¼Œå¹¶ä¸ºæ¯ä¸ªæ®µç»´æŠ¤ä¸€å¼ &lt;strong&gt;é¡µè¡¨&lt;/strong&gt;ã€‚è¿™äº›æ•°æ®ç»“æ„æœ¬èº«ä¼šå ç”¨å¯è§‚çš„ç‰©ç†å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€è½¬æ¢æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼šä¸€æ¬¡å†…å­˜è®¿é—®ç†è®ºä¸Šéœ€è¦&lt;strong&gt;ä¸‰æ¬¡ç‰©ç†å†…å­˜è®¿é—®&lt;/strong&gt;ï¼ˆæŸ¥æ®µè¡¨ã€æŸ¥é¡µè¡¨ã€æœ€ç»ˆè®¿é—®æ•°æ®ï¼‰ã€‚è™½ç„¶é€šè¿‡**TLBï¼ˆå¿«è¡¨ï¼‰**å¯ä»¥æå¤§ç¼“è§£ï¼Œä½†å…¶ç¡¬ä»¶è®¾è®¡å’Œå®ç°ä¾ç„¶å¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿå¤æ‚æ€§å¢åŠ &lt;/strong&gt;ï¼šæ®µé¡µå¼ç®¡ç†åœ¨è½¯ä»¶ï¼ˆæ“ä½œç³»ç»Ÿï¼‰å’Œç¡¬ä»¶ï¼ˆMMUï¼‰å±‚é¢çš„å®ç°éƒ½æ¯”çº¯åˆ†é¡µæˆ–çº¯åˆ†æ®µç®¡ç†æ›´å¤æ‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å®é™…åº”ç”¨"&gt;ğŸ–¥ï¸ å®é™…åº”ç”¨
&lt;/h3&gt;&lt;p&gt;å°½ç®¡å¤æ‚ï¼Œ&lt;strong&gt;æ®µé¡µå¼å†…å­˜ç®¡ç†çš„ä¼˜åŠ¿ä½¿å…¶æˆä¸ºç°ä»£é€šç”¨æ“ä½œç³»ç»Ÿçš„é¦–é€‰æ–¹æ¡ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Linux&lt;/strong&gt;: ä¸»è¦é‡‡ç”¨åˆ†é¡µç®¡ç†ï¼Œä½†å…¶&lt;strong&gt;è™šæ‹Ÿå†…å­˜åŒºåŸŸï¼ˆVMAï¼‰&lt;/strong&gt; æ¦‚å¿µæ¨¡æ‹Ÿäº†åˆ†æ®µçš„æ€æƒ³ï¼Œå°†ä»£ç ã€æ•°æ®ã€å †æ ˆç­‰ä¸åŒå±æ€§çš„å†…å­˜åŒºåŸŸæ˜ å°„åˆ°ä¸åŒçš„é¡µè¡¨ï¼Œå®ç°äº†ç±»ä¼¼çš„é€»è¾‘ç®¡ç†å’Œä¿æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Windows&lt;/strong&gt;: åŒæ ·åŸºäºæ®µé¡µå¼æ€æƒ³æ„å»ºå…¶è™šæ‹Ÿå†…å­˜ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåºå¤§çš„åœ°å€ç©ºé—´å’Œå¤æ‚çš„å†…å­˜ç®¡ç†ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Intel x86æ¶æ„&lt;/strong&gt;: æ—©æœŸx86æ¶æ„ç¡¬ä»¶ç›´æ¥æ”¯æŒæ®µé¡µå¼ç®¡ç†ï¼ˆé€šè¿‡æ®µå¯„å­˜å™¨å’Œé¡µè¡¨ï¼‰ã€‚ç°ä»£çš„x86-64æ¶æ„è™½ç„¶ä¸ºäº†å…¼å®¹æ€§ä¿ç•™åˆ†æ®µï¼Œä½†&lt;strong&gt;æ›´å€¾å‘äºä½¿ç”¨å¹³å¦åˆ†æ®µæ¨¡å¼å¹¶ç»“åˆå¼ºå¤§çš„åˆ†é¡µæœºåˆ¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚æœä¼˜åŒ–æ€§èƒ½"&gt;ğŸ’¡ å¦‚æœä¼˜åŒ–æ€§èƒ½
&lt;/h3&gt;&lt;p&gt;ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿé€šå¸¸é‡‡ç”¨ä»¥ä¸‹æœºåˆ¶ä¼˜åŒ–æ®µé¡µå¼ç®¡ç†çš„æ€§èƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TLBï¼ˆè½¬æ¢åå¤‡ç¼“å†²å™¨/å¿«è¡¨ï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ªç¼“å­˜æœ€è¿‘ä½¿ç”¨è¿‡çš„é¡µè¡¨é¡¹çš„é«˜é€Ÿç¼“å­˜ã€‚å½“CPUéœ€è¦è½¬æ¢åœ°å€æ—¶ï¼Œå®ƒé¦–å…ˆåœ¨TLBä¸­æŸ¥æ‰¾ã€‚å¦‚æœæ‰¾åˆ°ï¼ˆTLBå‘½ä¸­ï¼‰ï¼Œ&lt;strong&gt;å°±å¯ä»¥åœ¨æçŸ­æ—¶é—´å†…å®Œæˆåœ°å€è½¬æ¢ï¼Œæ— éœ€è®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨&lt;/strong&gt;ï¼Œä»è€Œå¤§å¹…æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šçº§é¡µè¡¨&lt;/strong&gt;ï¼šä¸ºäº†å‡å°‘é¡µè¡¨å¯¹å†…å­˜çš„å ç”¨ï¼Œç‰¹åˆ«æ˜¯åº”å¯¹64ä½å¤§åœ°å€ç©ºé—´ï¼Œæ™®éé‡‡ç”¨å¤šçº§é¡µè¡¨ï¼ˆå¦‚äºŒçº§ã€ä¸‰çº§ã€å››çº§é¡µè¡¨ï¼‰ã€‚å®ƒåªä¸ºå®é™…ä½¿ç”¨çš„è™šæ‹Ÿåœ°å€åŒºåŸŸåˆ›å»ºé¡µè¡¨ï¼ŒèŠ‚çœäº†å¤§é‡ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ“ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ®µé¡µå¼å†…å­˜ç®¡ç†é€šè¿‡&lt;strong&gt;åˆ†æ®µæ»¡è¶³ç¨‹åºçš„é€»è¾‘è§†å›¾å’Œä¿æŠ¤éœ€æ±‚&lt;/strong&gt;ï¼Œå†é€šè¿‡&lt;strong&gt;åˆ†é¡µè§£å†³å†…å­˜åˆ©ç”¨çš„ç‰©ç†æ•ˆç‡é—®é¢˜&lt;/strong&gt;ï¼Œæ˜¯ä¸€ç§åœ¨&lt;strong&gt;åŠŸèƒ½çµæ´»æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ç®¡ç†æ•ˆç‡&lt;/strong&gt;ä¹‹é—´å–å¾—çš„ç²¾å¦™å¹³è¡¡ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å…¶&lt;strong&gt;åœ°å€è½¬æ¢çš„å¼€é”€å’Œå¤æ‚æ€§&lt;/strong&gt;ç›¸å¯¹è¾ƒé«˜ï¼Œä½†å€ŸåŠ©&lt;strong&gt;TLBã€å¤šçº§é¡µè¡¨&lt;/strong&gt;ç­‰ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒæˆåŠŸæ”¯æ’‘èµ·äº†ç°ä»£æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜åŠŸèƒ½ï¼Œè®©ä½ åœ¨ç¼–ç¨‹æ—¶ä»¿ä½›æ‹¥æœ‰ä¸€ä¸ªå·¨å¤§ä¸”è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ®µé¡µå¼å†…å­˜ç®¡ç†ã€‚&lt;/p&gt;
&lt;h2 id="ä¸»å­˜å—"&gt;ä¸»å­˜å—
&lt;/h2&gt;&lt;p&gt;ä¸»å­˜å—æ˜¯è®¡ç®—æœºç»„æˆåŸç†ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è§£é‡Šä¸€ä¸‹å®ƒæ˜¯ä»€ä¹ˆï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒå¾ˆé‡è¦ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒå®šä¹‰"&gt;ğŸ§± æ ¸å¿ƒå®šä¹‰
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ä¸»å­˜å—&lt;/strong&gt;ï¼ˆMain Memory Blockï¼‰ï¼Œæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º&lt;strong&gt;å®é¡µ&lt;/strong&gt;ï¼ŒæŒ‡çš„æ˜¯&lt;strong&gt;ä¸»å­˜å‚¨å™¨ï¼ˆå†…å­˜ï¼‰è¢«ç­‰åˆ†åçš„å¤§å°ç›¸åŒçš„è¿ç»­å­˜å‚¨åŒºåŸŸ&lt;/strong&gt;ã€‚CPUå’ŒCacheï¼ˆé«˜é€Ÿç¼“å­˜ï¼‰ä¸ä¸»å­˜ä¹‹é—´ä¼ è¾“æ•°æ®æ—¶ï¼Œå¹¶ä¸æ˜¯ä»¥å•ä¸ªå­—èŠ‚æˆ–å­—ä¸ºå•ä½ï¼Œè€Œæ˜¯ä»¥æ•´ä¸ª&amp;quot;å—&amp;quot;ä¸ºå•ä½è¿›è¡Œã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»å­˜å—çš„å¤§å°"&gt;ğŸ“ ä¸»å­˜å—çš„å¤§å°
&lt;/h3&gt;&lt;p&gt;ä¸»å­˜å—çš„å¤§å°é€šå¸¸æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚ &lt;strong&gt;1KBã€2KB æˆ– 2â¿ KB&lt;/strong&gt; ç­‰ã€‚å—å†…åœ°å€ï¼ˆOffsetï¼‰çš„ä½æ•° bå†³å®šäº†å—çš„å¤§å°ï¼Œå—å¤§å°ä¸º 2bå­—èŠ‚ã€‚ä¾‹å¦‚ï¼Œè‹¥å—å†…åœ°å€ä¸º4ä½ï¼Œåˆ™å—å¤§å°ä¸º16å­—èŠ‚ï¼ˆ24=16ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id="-å­˜åœ¨æ„ä¹‰ä¸å·¥ä½œåŸç†"&gt;âš™ï¸ å­˜åœ¨æ„ä¹‰ä¸å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;è®¾ç½®ä¸»å­˜å—ä¸»è¦æ˜¯ä¸ºäº†&lt;strong&gt;åŒ¹é…CPUä¸ä¸»å­˜ä¹‹é—´çš„é€Ÿåº¦å·®å¼‚&lt;/strong&gt;ï¼Œå¹¶åŸºäº&lt;strong&gt;å±€éƒ¨æ€§åŸç†&lt;/strong&gt;æå‡æ•ˆç‡ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨æ€§åŸç†&lt;/strong&gt;ï¼šç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå€¾å‘äºåœ¨çŸ­æ—¶é—´å†…è®¿é—®åˆšåˆšè®¿é—®è¿‡çš„æ•°æ®æˆ–å…¶é™„è¿‘çš„æ•°æ®ï¼ˆå³æ—¶é—´å±€éƒ¨æ€§å’Œç©ºé—´å±€éƒ¨æ€§ï¼‰ã€‚å½“CPUéœ€è¦è®¿é—®ä¸»å­˜ä¸­çš„æŸä¸ªæ•°æ®æ—¶ï¼Œè®¡ç®—æœºä¸ä»…ä¼šå–å‡ºè¯¥æ•°æ®ï¼Œè¿˜ä¼šå°†å…¶æ‰€åœ¨çš„æ•´ä¸ªä¸»å­˜å—å¤åˆ¶åˆ°Cacheä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆç‡æå‡&lt;/strong&gt;ï¼šå¦‚æœç¨‹åºåç»­è¦è®¿é—®çš„æ•°æ®æ°å¥½åœ¨è¿™ä¸ªå—å†…ï¼ˆè¿™ç§æƒ…å†µå¾ˆå¸¸è§ï¼‰ï¼ŒCPUå°±å¯ä»¥ç›´æ¥ä»é«˜é€Ÿçš„Cacheä¸­è·å–ï¼Œé¿å…äº†è®¿é—®æ…¢é€Ÿçš„ä¸»å­˜ï¼Œä»è€Œå¤§å¹…æå‡è®¿é—®æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åœ°å€ç»“æ„"&gt;ğŸ” åœ°å€ç»“æ„
&lt;/h3&gt;&lt;p&gt;åœ¨ä¸€ä¸ªæœ‰ä¸»å­˜å—æ¦‚å¿µçš„ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªå®Œæ•´çš„ä¸»å­˜åœ°å€é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å—å·ï¼ˆBlock Numberï¼‰&lt;/strong&gt;ï¼šæ ‡è¯†æ•°æ®ä½äºå“ªä¸€ä¸ªä¸»å­˜å—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å—å†…åœ°å€ï¼ˆOffsetï¼‰&lt;/strong&gt;ï¼šæ ‡è¯†æ•°æ®åœ¨è¯¥ä¸»å­˜å—å†…çš„å…·ä½“ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ“ä½œç³»ç»Ÿä¸­å¯¹åº”çš„æ¦‚å¿µ"&gt;ğŸ“ æ“ä½œç³»ç»Ÿä¸­å¯¹åº”çš„æ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;åœ¨æ“ä½œç³»ç»Ÿçš„å­˜å‚¨ç®¡ç†ä¸­ï¼Œä¸»å­˜å—çš„æ¦‚å¿µé€šå¸¸ä¸&lt;strong&gt;é¡µ&lt;/strong&gt;ï¼ˆPageï¼‰æˆ–&lt;strong&gt;é¡µæ¡†&lt;/strong&gt;ï¼ˆPage Frameï¼‰ç›¸å…³è”ã€‚å½“ç¨‹åºè£…å…¥å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä»¥é¡µé¢ä¸ºå•ä½ä¸ºå…¶åˆ†é…ä¸»å­˜å—ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ä¸»å­˜å—çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id="cache"&gt;Cache
&lt;/h2&gt;&lt;p&gt;Cacheï¼ˆé«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼‰æ˜¯ä»‹äºCPUå’Œä¸»å­˜ä¹‹é—´çš„å°å®¹é‡é«˜é€Ÿå­˜å‚¨å™¨ï¼Œç”¨äºç¼“è§£ä¸¤è€…ä¹‹é—´çš„é€Ÿåº¦å·®å¼‚ã€‚å…¶é«˜æ•ˆå·¥ä½œçš„æ ¸å¿ƒåœ¨äºå¦‚ä½•å°†ä¸»å­˜ä¸­çš„æ•°æ®æ˜ å°„åˆ°Cacheä¸­ï¼Œè¿™ä¸»è¦é€šè¿‡ä¸‰ç§æ˜ å°„æ–¹å¼å®ç°ï¼šç›´æ¥æ˜ å°„ã€å…¨ç›¸è”æ˜ å°„å’Œç»„ç›¸è”æ˜ å°„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€Ÿäº†è§£è¿™ä¸‰ç§æ˜ å°„æ–¹å¼çš„ç‰¹ç‚¹ï¼Œæˆ‘å‡†å¤‡äº†ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ç›´æ¥æ˜ å°„ (Direct Mapped)&lt;/th&gt;
&lt;th&gt;å…¨ç›¸è”æ˜ å°„ (Fully Associative)&lt;/th&gt;
&lt;th&gt;ç»„ç›¸è”æ˜ å°„ (Set Associative)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜ å°„è§„åˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»å­˜å—â†’Cache&lt;strong&gt;å›ºå®š&lt;/strong&gt;è¡Œ&lt;/td&gt;
&lt;td&gt;ä¸»å­˜å—â†’Cache&lt;strong&gt;ä»»æ„&lt;/strong&gt;è¡Œ&lt;/td&gt;
&lt;td&gt;ä¸»å­˜å—â†’Cache&lt;strong&gt;å›ºå®šç»„&lt;/strong&gt;å†…çš„&lt;strong&gt;ä»»æ„&lt;/strong&gt;è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åœ°å€ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ‡è®° (Tag) + è¡Œå· (Index) + å—å†…åœ°å€ (Offset)&lt;/td&gt;
&lt;td&gt;æ ‡è®° (Tag) + å—å†…åœ°å€ (Offset)&lt;/td&gt;
&lt;td&gt;æ ‡è®° (Tag) + ç»„å· (Index) + å—å†…åœ°å€ (Offset)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶ç®€å•ã€æŸ¥æ‰¾é€Ÿåº¦&lt;strong&gt;æœ€å¿«&lt;/strong&gt;ã€æˆæœ¬ä½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†²çªæ¦‚ç‡æœ€ä½&lt;/strong&gt;ã€Cacheåˆ©ç”¨ç‡é«˜&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†²çªæ¦‚ç‡è¾ƒä½&lt;/strong&gt;ï¼Œåœ¨çµæ´»æ€§å’Œé€Ÿåº¦é—´å–å¾—&lt;strong&gt;è‰¯å¥½å¹³è¡¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†²çªç‡é«˜&lt;/strong&gt;ï¼Œæ˜“å‘ç”Ÿ&lt;strong&gt;ç¼“å­˜é¢ ç°¸&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶&lt;strong&gt;å¤æ‚&lt;/strong&gt;ã€&lt;strong&gt;æˆæœ¬é«˜&lt;/strong&gt;ã€æŸ¥æ‰¾é€Ÿåº¦&lt;strong&gt;æ…¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®ç°éš¾åº¦å’Œé€ ä»·é«˜äºç›´æ¥æ˜ å°„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§å®¹é‡Cacheæˆ–å¯¹æˆæœ¬æ•æ„Ÿçš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;ä»…é€‚ç”¨äº&lt;strong&gt;å°å®¹é‡&lt;/strong&gt;Cache&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»å¤§å¤šæ•°ç°ä»£CPUçš„Cache&lt;/strong&gt;ï¼ˆå¦‚L1, L2, L3ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ¯ç§æ˜ å°„æ–¹å¼çš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id="-æ˜ å°„æ–¹å¼è¯¦è§£"&gt;ğŸ§  æ˜ å°„æ–¹å¼è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-ç›´æ¥æ˜ å°„-direct-mapping"&gt;1. ç›´æ¥æ˜ å°„ (Direct Mapping)
&lt;/h4&gt;&lt;p&gt;åœ¨ç›´æ¥æ˜ å°„ä¸­ï¼Œä¸»å­˜ä¸­çš„æ¯ä¸ªå—åªèƒ½è¢«æ˜ å°„åˆ°Cacheä¸­ä¸€ä¸ª&lt;strong&gt;ç‰¹å®šä¸”å›ºå®š&lt;/strong&gt;çš„ä½ç½®ã€‚è¿™ä¸ªä½ç½®é€šå¸¸ç”±ä¸»å­˜å—å·é€šè¿‡å–æ¨¡è¿ç®—å†³å®šï¼š&lt;strong&gt;Cacheè¡Œå· = (ä¸»å­˜å—å·) % (Cacheæ€»è¡Œæ•°)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼šCPUè®¿é—®å†…å­˜æ—¶ï¼Œé€šè¿‡åœ°å€ä¸­çš„â€œè¡Œå·ï¼ˆIndexï¼‰â€ä½ç›´æ¥å®šä½åˆ°Cacheä¸­å”¯ä¸€çš„ä¸€è¡Œã€‚ç„¶åæ¯”è¾ƒè¯¥è¡Œå­˜å‚¨çš„â€œæ ‡è®°ï¼ˆTagï¼‰â€æ˜¯å¦ä¸åœ°å€ä¸­çš„Tagä½åŒ¹é…ã€‚è‹¥åŒ¹é…ä¸”æœ‰æ•ˆä½ä¸º1ï¼Œåˆ™å‘½ä¸­ï¼›å¦åˆ™ï¼Œæœªå‘½ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ½œåœ¨é—®é¢˜&lt;/strong&gt;ï¼š&lt;strong&gt;ç¼“å­˜é¢ ç°¸ï¼ˆCache Thrashingï¼‰&lt;/strong&gt;ã€‚å½“ä¸¤ä¸ªé¢‘ç¹è®¿é—®çš„ä¸»å­˜å—æ°å¥½æ˜ å°„åˆ°åŒä¸€ä¸ªCacheè¡Œæ—¶ï¼Œä¼šå¯¼è‡´è¯¥è¡Œè¢«é¢‘ç¹åœ°å†™å…¥å’Œæ¢å‡ºï¼Œå‘½ä¸­ç‡æ€¥å‰§ä¸‹é™ï¼Œå½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-å…¨ç›¸è”æ˜ å°„-fully-associative-mapping"&gt;2. å…¨ç›¸è”æ˜ å°„ (Fully Associative Mapping)
&lt;/h4&gt;&lt;p&gt;å…¨ç›¸è”æ˜ å°„å…è®¸ä¸»å­˜ä¸­çš„&lt;strong&gt;ä»»æ„ä¸€å—&lt;/strong&gt;æ•°æ®æ”¾ç½®åœ¨Cacheä¸­çš„&lt;strong&gt;ä»»æ„ä¸€ä¸ªç©ºè¡Œ&lt;/strong&gt;é‡Œï¼Œæä¾›äº†æœ€å¤§çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼šCPUè®¿é—®å†…å­˜æ—¶ï¼Œéœ€è¦å°†åœ°å€ä¸­çš„â€œæ ‡è®°ï¼ˆTagï¼‰â€ä¸Cacheä¸­&lt;strong&gt;æ‰€æœ‰è¡Œ&lt;/strong&gt;çš„Tag&lt;strong&gt;åŒæ—¶è¿›è¡Œæ¯”è¾ƒ&lt;/strong&gt;ï¼Œä»¥åˆ¤æ–­æ˜¯å¦å‘½ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;/strong&gt;ï¼šè¿™ç§â€œå…¨éƒ¨æ¯”è¾ƒâ€çš„éœ€æ±‚æ„å‘³ç€éœ€è¦å¤æ‚çš„ç›¸è”æ¯”è¾ƒç”µè·¯ã€‚éšç€Cacheå®¹é‡çš„å¢åŠ ï¼Œæ¯”è¾ƒå™¨çš„å¤æ‚åº¦ã€æˆæœ¬å’ŒåŠŸè€—ä¼šæ€¥å‰§ä¸Šå‡ï¼Œå› æ­¤é€šå¸¸åªç”¨äºå°å®¹é‡Cacheã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ç»„ç›¸è”æ˜ å°„-set-associative-mapping"&gt;3. ç»„ç›¸è”æ˜ å°„ (Set Associative Mapping)
&lt;/h4&gt;&lt;p&gt;ç»„ç›¸è”æ˜ å°„æ˜¯ä¸Šè¿°ä¸¤ç§æ–¹æ¡ˆçš„æŠ˜è¡·ï¼Œä¹Ÿæ˜¯ç°ä»£CPUä¸­æœ€å¸¸è§çš„æ˜ å°„æ–¹å¼ã€‚å®ƒå°†Cacheåˆ’åˆ†ä¸ºè‹¥å¹²ç»„ï¼ˆSetï¼‰ï¼Œæ¯ç»„å†…åŒ…å«å¤šä¸ªè¡Œï¼ˆWayï¼‰ã€‚ä¸»å­˜å—æ˜ å°„åˆ°å“ªä¸ª&lt;strong&gt;ç»„&lt;/strong&gt;æ˜¯å›ºå®šçš„ï¼ˆ&lt;strong&gt;ç›´æ¥æ˜ å°„&lt;/strong&gt;çš„åŸåˆ™ï¼‰ï¼Œä½†å¯ä»¥å­˜æ”¾åœ¨è¯¥ç»„å†…çš„&lt;strong&gt;ä»»æ„ä¸€è¡Œ&lt;/strong&gt;ï¼ˆ&lt;strong&gt;å…¨ç›¸è”æ˜ å°„&lt;/strong&gt;çš„åŸåˆ™ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œæµç¨‹&lt;/strong&gt;ï¼šCPUè®¿é—®å†…å­˜æ—¶ï¼Œé€šè¿‡åœ°å€ä¸­çš„â€œç»„å·ï¼ˆIndexï¼‰â€å®šä½åˆ°ç‰¹å®šçš„ç»„ï¼Œç„¶åä»…éœ€è¦æ¯”è¾ƒè¯¥ç»„å†…æ‰€æœ‰è¡Œçš„Tagï¼Œä»¥åˆ¤æ–­æ˜¯å¦å‘½ä¸­ã€‚è¿™å¤§å¤§å‡å°‘äº†éœ€è¦æ¯”è¾ƒçš„æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§é…ç½®&lt;/strong&gt;ï¼šæ ¹æ®æ¯ç»„åŒ…å«çš„è¡Œæ•°ï¼Œç§°ä¸ºNè·¯ç»„ç›¸è”ï¼ˆN-way Set Associativeï¼‰ï¼Œå¦‚2è·¯ã€4è·¯ã€8è·¯ç­‰ã€‚è·¯æ•°è¶Šå¤šï¼Œå‘½ä¸­ç‡è¶Šæ¥è¿‘å…¨ç›¸è”ï¼Œä½†ç”µè·¯ä¹Ÿè¶Šå¤æ‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç›¸å…³çš„æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ”„ ç›¸å…³çš„æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;è¦å…¨é¢ç†è§£Cacheæ˜ å°„ï¼Œè¿˜éœ€è¦äº†è§£ä¸¤ä¸ªç´§å¯†ç›¸å…³çš„æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ›¿æ¢ç®—æ³• (Replacement Algorithm)&lt;/strong&gt;ï¼šå½“Cacheå·²æ»¡ä¸”å‘ç”Ÿæœªå‘½ä¸­æ—¶ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªæ—§å—æ›¿æ¢å‡ºå»ã€‚å¸¸è§ç®—æ³•æœ‰ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨)&lt;/strong&gt;ï¼šæ›¿æ¢æœ€ä¹…æœªè¢«è®¿é—®çš„è¡Œã€‚åŸºäºæ—¶é—´å±€éƒ¨æ€§åŸç†ï¼Œæ•ˆæœè¾ƒå¥½ï¼Œä½†å®ç°ç¨å¤æ‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FIFO (å…ˆè¿›å…ˆå‡º)&lt;/strong&gt;ï¼šæ›¿æ¢æœ€æ—©è¿›å…¥çš„è¡Œã€‚å®ç°ç®€å•ï¼Œä½†å¯èƒ½æ›¿æ¢æ‰ä»é¢‘ç¹ä½¿ç”¨çš„è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éšæœº&lt;/strong&gt;ï¼šéšæœºé€‰æ‹©ä¸€è¡Œæ›¿æ¢ã€‚å®ç°ç®€å•ä¸”é€Ÿåº¦å¿«ï¼Œä½†å‘½ä¸­ç‡ä¸ç¨³å®šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™ç­–ç•¥ (Write Policy)&lt;/strong&gt;ï¼šå½“CPUæ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œå¦‚ä½•ç»´æŠ¤Cacheå’Œä¸»å­˜ä¸­çš„æ•°æ®ä¸€è‡´æ€§ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†™å›æ³• (Write-back)&lt;/strong&gt;ï¼šå†™æ“ä½œåªæ›´æ–°Cacheä¸­çš„æ•°æ®ï¼Œå¹¶å°†è¯¥è¡Œæ ‡è®°ä¸ºâ€œè„â€ã€‚åªæœ‰å½“è¯¥è¡Œè¢«æ›¿æ¢æ—¶ï¼Œæ‰å°†å…¶å†™å›ä¸»å­˜ã€‚&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;æ˜¯å‡å°‘äº†å†™å…¥ä¸»å­˜çš„æ¬¡æ•°ï¼Œæ€§èƒ½é«˜ã€‚&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;æ˜¯å­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„éšæ‚£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å†™æ³• (Write-through)&lt;/strong&gt;ï¼šå†™æ“ä½œåŒæ—¶æ›´æ–°Cacheå’Œä¸»å­˜ä¸­çš„æ•°æ®ã€‚&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;æ˜¯ç®€å•ä¸”èƒ½å§‹ç»ˆä¿æŒæ•°æ®ä¸€è‡´ã€‚&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;æ˜¯æ¯æ¬¡å†™æ“ä½œéƒ½è¦è®¿é—®æ…¢é€Ÿçš„ä¸»å­˜ï¼Œæ€»çº¿æµé‡å¤§ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚ä¸ºäº†ç¼“è§£è¿™ä¸ªç¼ºç‚¹ï¼Œå¸¸é‡‡ç”¨&lt;strong&gt;å†™ç¼“å†²ï¼ˆWrite Bufferï¼‰&lt;/strong&gt; ä½œä¸ºé…å¥—æªæ–½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§æ˜ å°„æ–¹å¼ï¼Œæœ¬è´¨ä¸Šæ˜¯è®¡ç®—æœºæ¶æ„åœ¨&lt;strong&gt;æ€§èƒ½ã€æˆæœ¬å’Œå¤æ‚åº¦&lt;/strong&gt;ä¹‹é—´å¯»æ±‚å¹³è¡¡çš„ç»“æœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿½æ±‚&lt;strong&gt;ä½æˆæœ¬å’Œé«˜é€Ÿåº¦&lt;/strong&gt;ä¸”ä¸ä»‹æ„å†²çªé£é™©æ—¶ï¼Œå¯è€ƒè™‘&lt;strong&gt;ç›´æ¥æ˜ å°„&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¿½æ±‚&lt;strong&gt;é«˜å‘½ä¸­ç‡å’Œçµæ´»æ€§&lt;/strong&gt;ä¸”ä¸è®¡è¾ƒæˆæœ¬æ—¶ï¼Œ&lt;strong&gt;å…¨ç›¸è”æ˜ å°„&lt;/strong&gt;æ˜¯ç†æƒ³é€‰æ‹©ï¼ˆä½†é€šå¸¸ä»…ç”¨äºæå°å®¹é‡Cacheï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„ç›¸è”æ˜ å°„&lt;/strong&gt;é€šè¿‡å·§å¦™çš„æŠ˜è¡·ï¼Œä»¥å¯æ¥å—çš„æˆæœ¬æ˜¾è‘—é™ä½äº†å†²çªæ¦‚ç‡ï¼Œå› æ­¤è¢«&lt;strong&gt;å¹¿æ³›åº”ç”¨äºç°ä»£å¤„ç†å™¨&lt;/strong&gt;çš„å¤šçº§Cacheè®¾è®¡ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£Cacheçš„å·¥ä½œåŸç†ã€‚&lt;/p&gt;
&lt;h2 id="belady-å¼‚å¸¸"&gt;Belady å¼‚å¸¸
&lt;/h2&gt;&lt;p&gt;Beladyå¼‚å¸¸ï¼ˆBÃ©lÃ¡dy&amp;rsquo;s Anomalyï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†é¢†åŸŸä¸€ä¸ªæœ‰è¶£ä¸”åç›´è§‰çš„ç°è±¡ã€‚å®ƒæè¿°äº†ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼š&lt;strong&gt;ä¸ºè¿›ç¨‹åˆ†é…æ›´å¤šçš„ç‰©ç†é¡µé¢å¸§ï¼ˆPage Framesï¼‰åï¼Œä¸ä»…æ²¡æœ‰å‡å°‘ç¼ºé¡µä¸­æ–­ï¼ˆPage Faultï¼‰çš„æ¬¡æ•°ï¼Œåè€Œå¯¼è‡´äº†æ›´å¤šçš„ç¼ºé¡µ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£Beladyå¼‚å¸¸çš„æ¦‚å¿µå’Œå…¶åç›´è§‰çš„ç‰¹æ€§ï¼Œè¯·çœ‹ä¸‹é¢è¿™ä¸ªæ ¸å¿ƒå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;Belady å¼‚å¸¸&lt;/th&gt;
&lt;th&gt;æ­£å¸¸é¢„æœŸ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç°è±¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¢åŠ é¡µé¢å¸§æ•° â†’ &lt;strong&gt;ç¼ºé¡µæ¬¡æ•°å¢åŠ &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¢åŠ é¡µé¢å¸§æ•° â†’ &lt;strong&gt;ç¼ºé¡µæ¬¡æ•°å‡å°‘æˆ–ä¸å˜&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘ç”Ÿç®—æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;FIFO&lt;/strong&gt;ï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ç®—æ³•ç‰¹æœ‰&lt;/td&gt;
&lt;td&gt;å¤šæ•°é¡µé¢ç½®æ¢ç®—æ³•ï¼ˆå¦‚LRUã€OPTï¼‰çš„è¡Œä¸º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›´è§‚æ¯”å–»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»™ä»“åº“ï¼ˆå†…å­˜ï¼‰å¢åŠ äº†æ›´å¤šè´§æ¶ï¼ˆé¡µå¸§ï¼‰ï¼Œåè€Œå¯¼è‡´æ‰¾ä¸åˆ°è´§ï¼ˆç¼ºé¡µï¼‰çš„æ¬¡æ•°æ›´å¤šäº†&lt;/td&gt;
&lt;td&gt;ç»™ä»“åº“å¢åŠ äº†æ›´å¤šè´§æ¶ï¼Œèƒ½æ‰¾åˆ°çš„è´§å°±æ›´å¤šï¼Œç¼ºè´§æ¬¡æ•°è‡ªç„¶å‡å°‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®åŸå› &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;FIFOçš„ç½®æ¢ç­–ç•¥ä¸ç¨‹åºçš„&lt;strong&gt;è®¿é—®æ¨¡å¼&lt;/strong&gt;çŸ›ç›¾ï¼Œå¯èƒ½&lt;strong&gt;è¿‡æ—©åœ°æ¢å‡ºäº†å³å°†å†æ¬¡è®¿é—®çš„é¡µé¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç®—æ³•èƒ½æ›´å¥½åœ°åˆ©ç”¨é¢å¤–ç©ºé—´ä¿ç•™å¸¸ç”¨é¡µé¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å¯é¢„æµ‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–äºç‰¹å®šçš„&lt;strong&gt;é¡µé¢è®¿é—®åºåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡Œä¸ºé€šå¸¸ç¨³å®šä¸”å¯é¢„æµ‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç†è®ºè¾¹ç•Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼‚å¸¸ç¨‹åº¦å¯ä»¥æ˜¯&lt;strong&gt;æ— ç•Œçš„&lt;/strong&gt;ï¼ˆç¼ºé¡µç‡å¯ä»¥ä»»æ„é«˜ï¼‰&lt;/td&gt;
&lt;td&gt;ç¼ºé¡µç‡éšå¸§æ•°å¢åŠ å•è°ƒä¸‹é™&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥åŸç†"&gt;ğŸ” æ·±å…¥åŸç†
&lt;/h3&gt;&lt;p&gt;Beladyå¼‚å¸¸ä¹‹æ‰€ä»¥å‘ç”Ÿåœ¨FIFOç®—æ³•ä¸­ï¼Œæ ¹æºåœ¨äºå…¶&lt;strong&gt;ç½®æ¢ç­–ç•¥å¿½ç•¥äº†é¡µé¢çš„è®¿é—®å†å²&lt;/strong&gt;ã€‚FIFOåªè®°å½•é¡µé¢è¿›å…¥å†…å­˜çš„é¡ºåºï¼Œæœ€æ—©è¿›å…¥çš„é¡µé¢ä¼šè¢«ä¼˜å…ˆæ¢å‡ºï¼Œè€Œä¸ç®¡è¿™ä¸ªé¡µé¢æ˜¯å¦æœ€è¿‘è¢«è®¿é—®è¿‡æˆ–å³å°†è¢«è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æŸäº›ç‰¹æ®Šçš„é¡µé¢è®¿é—®åºåˆ—ä¸‹ï¼Œå¢åŠ å¸§æ•°åè€Œä¼šæ‰“ä¹±FIFOåŸæœ‰çš„é˜Ÿåˆ—é¡ºåºï¼Œå¯¼è‡´ä¸€ä¸ª&lt;strong&gt;åŸæœ¬å¾ˆå¿«åˆä¼šè¢«å†æ¬¡è®¿é—®çš„é¡µé¢&lt;/strong&gt;å› ä¸ºâ€œèµ„å†è€â€è€Œè¢«æ–°ç©ºé—´ç½®æ¢äº†å‡ºå»ã€‚è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶ç©ºé—´å¤§äº†ï¼Œä½†åè€Œâ€œå¼„å·§æˆæ‹™â€ï¼Œé€ æˆäº†æ›´å¤šç¼ºé¡µã€‚&lt;/p&gt;
&lt;h3 id="-ä¸€ä¸ªä¾‹å­"&gt;ğŸ“Š ä¸€ä¸ªä¾‹å­
&lt;/h3&gt;&lt;p&gt;å‡è®¾é¡µé¢è®¿é—®åºåˆ—ä¸ºï¼š&lt;code&gt;1, 2, 3, 4, 1, 2, 5, 1, 2, 3, 4, 5&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«æ¯”è¾ƒåˆ†é…3ä¸ªé¡µå¸§å’Œ4ä¸ªé¡µå¸§æ—¶ï¼ŒFIFOç®—æ³•çš„è¡¨ç°ï¼ˆHè¡¨ç¤ºå‘½ä¸­ï¼ŒFè¡¨ç¤ºç¼ºé¡µï¼‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è®¿é—®åºåˆ—&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;ç¼ºé¡µæ¬¡æ•°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;3ä¸ªé¡µå¸§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;9æ¬¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;4ä¸ªé¡µå¸§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;F&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;10æ¬¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ†é…&lt;strong&gt;4ä¸ªé¡µå¸§æ¯”3ä¸ªé¡µå¸§äº§ç”Ÿäº†æ›´å¤šçš„ç¼ºé¡µæ¬¡æ•°&lt;/strong&gt;ï¼Œè¿™å°±æ˜¯Beladyå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;h3 id="-å“ªäº›ç®—æ³•ä¸ä¼šå‡ºç°"&gt;ğŸ¤” å“ªäº›ç®—æ³•ä¸ä¼šå‡ºç°ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;Beladyå¼‚å¸¸å¹¶éæ‰€æœ‰ç½®æ¢ç®—æ³•éƒ½ä¼šå‡ºç°ã€‚&lt;strong&gt;LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•å’ŒOPTï¼ˆæœ€ä¼˜ç½®æ¢ï¼‰ç®—æ³•ç­‰å°±ä¸ä¼šå‡ºç°Beladyå¼‚å¸¸&lt;/strong&gt;ã€‚è¿™ç±»ç®—æ³•è¢«ç§°ä¸º&lt;strong&gt;æ ˆç®—æ³•ï¼ˆStack Algorithmï¼‰&lt;/strong&gt;ï¼Œå…¶ç‰¹æ€§æ˜¯ï¼šå¯¹äºåŒä¸€ä¸ªè®¿é—®åºåˆ—ï¼Œåœ¨æ—¶åˆ»tï¼Œåˆ†é…ç»™è¿›ç¨‹çš„é¡µæ¡†æ•°ä¸ºnæ—¶é©»ç•™åœ¨å†…å­˜ä¸­çš„é¡µé¢é›†åˆï¼Œå¿…å®šæ˜¯é¡µæ¡†æ•°ä¸ºn+1æ—¶é©»ç•™é¡µé¢é›†åˆçš„å­é›†ã€‚è¿™æ„å‘³ç€å¢åŠ é¡µæ¡†ç»ä¸ä¼šå¯¼è‡´ç¼ºé¡µæ¬¡æ•°å¢åŠ ã€‚&lt;/p&gt;
&lt;h3 id="-ç°å®å½±å“ä¸å¯ç¤º"&gt;âš ï¸ ç°å®å½±å“ä¸å¯ç¤º
&lt;/h3&gt;&lt;p&gt;è™½ç„¶Beladyå¼‚å¸¸åœ¨ç†è®ºä¸Šå¾ˆå¼•äººæ³¨ç›®ï¼Œä½†åœ¨å®é™…ç³»ç»Ÿçš„å†…å­˜ç®¡ç†ä¸­ï¼Œ&lt;strong&gt;FIFOç®—æ³•å› å…¶ç®€å•æ€§ä»æœ‰åº”ç”¨&lt;/strong&gt;ï¼Œä½†æ›´éœ€è¦å…³æ³¨çš„æ˜¯è¿™ä¸€ç°è±¡å¸¦æ¥çš„å¯ç¤ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç®—æ³•é€‰æ‹©è‡³å…³é‡è¦&lt;/strong&gt;ï¼šFIFOç®—æ³•å› å…¶ç®€å•ï¼Œæ—©æœŸè¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½†Beladyå¼‚å¸¸æš´éœ²äº†å…¶é‡å¤§ç¼ºé™·ã€‚ç°ä»£æ“ä½œç³»ç»Ÿæ›´å€¾å‘äºä½¿ç”¨&lt;strong&gt;LRU&lt;/strong&gt;æˆ–å…¶è¿‘ä¼¼ç®—æ³•ï¼ˆå¦‚Clockç®—æ³•ï¼‰ï¼Œè¿™äº›ç®—æ³•èƒ½æ›´å¥½åœ°åˆ©ç”¨è®¿é—®å±€éƒ¨æ€§åŸç†ï¼Œæ€§èƒ½æ›´ä¼˜ä¸”ä¸ä¼šå‡ºç°æ­¤ç§å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´å¤šèµ„æºâ‰ æ›´å¥½æ€§èƒ½&lt;/strong&gt;ï¼šBeladyå¼‚å¸¸æ˜¯ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹è¯ï¼Œè¡¨æ˜åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå•çº¯åœ°å¢åŠ èµ„æºï¼ˆå¦‚å†…å­˜ï¼‰å¹¶ä¸æ€»æ˜¯èƒ½æå‡æ€§èƒ½ã€‚&lt;strong&gt;ç³»ç»Ÿçš„è¡Œä¸ºé«˜åº¦ä¾èµ–äºç®—æ³•å’Œè®¿é—®æ¨¡å¼&lt;/strong&gt;ã€‚åœ¨è®¾è®¡ç³»ç»Ÿæ—¶ï¼Œå¿…é¡»è¿›è¡Œç»†è‡´çš„æµ‹è¯•å’Œè¯„ä¼°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è®ºç ”ç©¶çš„ä»·å€¼&lt;/strong&gt;ï¼šå¯¹Beladyå¼‚å¸¸ç­‰ç°è±¡çš„ç ”ç©¶ï¼Œæ¨åŠ¨äº†å¯¹é¡µé¢ç½®æ¢ç®—æ³•æ›´æ·±å…¥çš„ç†è§£ï¼Œå¹¶ä¿ƒè¿›äº†æ›´ä¼˜ç®—æ³•çš„å‡ºç°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£Beladyå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;h2 id="å¤šè¿›ç¨‹ç»‘å®šåŒä¸€ç«¯å£"&gt;å¤šè¿›ç¨‹ç»‘å®šåŒä¸€ç«¯å£
&lt;/h2&gt;&lt;p&gt;å¤šè¿›ç¨‹å…±äº«ç«¯å£æ˜¯ä¸€é¡¹ç”¨äºæå‡æœåŠ¡å¤„ç†èƒ½åŠ›å’Œå¯é æ€§çš„é‡è¦æŠ€æœ¯ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸»è¦çš„å®ç°æ–¹å¼åŠå…¶æ ¸å¿ƒåŸç†ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤è¯†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŸç†&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SO_REUSEPORT&lt;/strong&gt; (ç°ä»£é¦–é€‰)&lt;/td&gt;
&lt;td&gt;å†…æ ¸æ”¯æŒå¤šä¸ªè¿›ç¨‹ç»‘å®šç›¸åŒIPå’Œç«¯å£ï¼Œå¹¶ç”±å†…æ ¸è¿›è¡Œ&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;é«˜æ€§èƒ½æœåŠ¡ï¼Œå¦‚HTTPæœåŠ¡å™¨ï¼ˆNginx, uvicornï¼‰ã€éœ€è¦é¿å…å•ç‚¹æ•…éšœçš„æœåŠ¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Fork()ç»§æ‰¿&lt;/strong&gt; (ä¼ ç»Ÿæ–¹æ¡ˆ)&lt;/td&gt;
&lt;td&gt;çˆ¶è¿›ç¨‹åˆ›å»ºç›‘å¬å¥—æ¥å­—åï¼Œ&lt;strong&gt;fork()&lt;/strong&gt; å‡ºçš„å­è¿›ç¨‹&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;è¯¥å¥—æ¥å­—æè¿°ç¬¦ï¼Œå…±åŒæ¥å—è¿æ¥ã€‚&lt;/td&gt;
&lt;td&gt;ä¼ ç»ŸUNIXæœåŠ¡æ¨¡å‹ï¼Œå¦‚æ—©æœŸApacheçš„preforkæ¨¡å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;UDPå¹¿æ’­/å¤šæ’­&lt;/strong&gt; (UDPç‰¹æœ‰)&lt;/td&gt;
&lt;td&gt;å¤šä¸ªè¿›ç¨‹ç»‘å®šåŒä¸€UDPç«¯å£ï¼Œé€šè¿‡&lt;strong&gt;å¹¿æ’­åœ°å€(255.255.255.255)&lt;/strong&gt; æˆ–&lt;strong&gt;å¤šæ’­ç»„&lt;/strong&gt;è¿›è¡Œé€šä¿¡ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚&lt;/td&gt;
&lt;td&gt;æœåŠ¡å‘ç°ã€ç¾¤èŠåº”ç”¨ã€å¤šè¿›ç¨‹ååŒç­‰éœ€è¦â€œå¤šå¯¹å¤šâ€é€šçŸ¥çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒå®ç°æœºåˆ¶è¯¦è§£"&gt;ğŸ”§ æ ¸å¿ƒå®ç°æœºåˆ¶è¯¦è§£
&lt;/h3&gt;&lt;h4 id="1-so_"&gt;&lt;strong&gt;1. SO_REUSEPORTï¼šå†…æ ¸çº§çš„è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ç›®å‰æœ€ä¼˜é›…å’Œé«˜æ•ˆçš„æ–¹æ¡ˆï¼Œå¾—åˆ°äº†ç°ä»£Linuxå†…æ ¸çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šå…è®¸å¤šä¸ªè¿›ç¨‹ï¼ˆæ— è®ºæœ‰æ— äº²ç¼˜å…³ç³»ï¼‰å„è‡ªåˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼Œå¹¶ç»‘å®šåˆ°&lt;strong&gt;å®Œå…¨ç›¸åŒçš„IPåœ°å€å’Œç«¯å£å·&lt;/strong&gt;ä¸Šã€‚å½“æ–°çš„è¿æ¥è¯·æ±‚åˆ°æ¥æ—¶ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šä½¿ç”¨ä¸€ç§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆå¦‚å“ˆå¸Œï¼‰ï¼Œå°†è¿æ¥&lt;strong&gt;å‡åŒ€åœ°åˆ†å‘&lt;/strong&gt;åˆ°å…¶ä¸­ä¸€ä¸ªç›‘å¬è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ä¼˜åŠ¿&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çœŸæ­£çš„å¹¶è¡Œå¤„ç†&lt;/strong&gt;ï¼šå¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶åœ¨ä¸åŒCPUæ ¸å¿ƒä¸Šè¿è¡Œï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æƒŠç¾¤æ•ˆåº”&lt;/strong&gt;ï¼šå†…æ ¸ä¿è¯äº†åªæœ‰ä¸€ä¸ªè¿›ç¨‹ä¼šè¢«å”¤é†’å¤„ç†æ–°è¿æ¥ï¼Œé¿å…äº†æ—©æœŸæ–¹æ¡ˆä¸­æ‰€æœ‰å­è¿›ç¨‹è¢«åŒæ—¶å”¤é†’äº‰æŠ¢è¿æ¥å¯¼è‡´çš„æ€§èƒ½æŸè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨æ€§&lt;/strong&gt;ï¼šå³ä½¿æŸä¸ªå·¥ä½œè¿›ç¨‹å´©æºƒï¼Œå…¶ä»–è¿›ç¨‹ä»åœ¨ç›‘å¬ç«¯å£ï¼ŒæœåŠ¡ä¸ä¼šä¸­æ–­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹ï¼ˆCè¯­è¨€ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;int sfd = socket(AF_INET, SOCK_STREAM, 0);
int reuse = 1;
// å…³é”®æ­¥éª¤ï¼šè®¾ç½®SO_REUSEPORTé€‰é¡¹
if (setsockopt(sfd, SOL_SOCKET, SO_REUSEPORT, &amp;amp;reuse, sizeof(reuse)) &amp;lt; 0) {
perror(&amp;#34;setsockopt failed&amp;#34;);
exit(EXIT_FAILURE);
}
// ç„¶åè¿›è¡Œbindå’Œlisten
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨Nettyç­‰é«˜çº§æ¡†æ¶ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®è½»æ¾å¯ç”¨æ­¤é€‰é¡¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-forkä¸å¥—æ¥å­—ç»§æ‰¿"&gt;&lt;strong&gt;2. Fork()ä¸å¥—æ¥å­—ç»§æ‰¿&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æ¯”è¾ƒä¼ ç»Ÿçš„å®ç°æ–¹å¼ï¼Œä¾èµ–äºè¿›ç¨‹åˆ›å»ºæœºåˆ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šç”±&lt;strong&gt;ä¸»è¿›ç¨‹&lt;/strong&gt;å…ˆåˆ›å»ºã€ç»‘å®šå¹¶ç›‘å¬å¥—æ¥å­—ã€‚éšåï¼Œä¸»è¿›ç¨‹è°ƒç”¨ &lt;code&gt;fork()&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨åˆ›å»ºå¤šä¸ªå­è¿›ç¨‹ã€‚è¿™äº›å­è¿›ç¨‹ä¼š&lt;strong&gt;ç»§æ‰¿çˆ¶è¿›ç¨‹çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦&lt;/strong&gt;ï¼ŒåŒ…æ‹¬é‚£ä¸ªå·²ç»å¤„äºç›‘å¬çŠ¶æ€çš„å¥—æ¥å­—ã€‚ä¹‹åï¼Œæ‰€æœ‰å­è¿›ç¨‹éƒ½å¯ä»¥è°ƒç”¨ &lt;code&gt;accept()&lt;/code&gt;å‡½æ•°æ¥æ¥å—æ–°è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ½œåœ¨é—®é¢˜&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒŠç¾¤æ•ˆåº”ï¼ˆThundering Herdï¼‰&lt;/strong&gt;ï¼šåœ¨æ—©æœŸå†…æ ¸ä¸­ï¼Œå½“ä¸€ä¸ªæ–°è¿æ¥åˆ°è¾¾æ—¶ï¼Œæ‰€æœ‰é˜»å¡åœ¨ &lt;code&gt;accept()&lt;/code&gt;ä¸Šçš„å­è¿›ç¨‹å¯èƒ½éƒ½ä¼šè¢«å”¤é†’ï¼Œä½†åªæœ‰ä¸€ä¸ªèƒ½æˆåŠŸè·å–è¿æ¥ï¼Œå…¶ä½™è¿›ç¨‹ä¼šé‡æ–°è¿›å…¥é˜»å¡ï¼Œé€ æˆä¸å¿…è¦çš„CPUèµ„æºç«äº‰ã€‚ç°ä»£å†…æ ¸å·²ä¼˜åŒ–æ­¤é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥åˆ†é…ä¸å‡&lt;/strong&gt;ï¼šè¿æ¥åˆ†é…ä¾èµ–äºå“ªä¸ªè¿›ç¨‹æ°å¥½æŠ¢åˆ° &lt;code&gt;accept()&lt;/code&gt;ï¼Œå¯èƒ½å¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-udpå¹¿æ’­ä¸å¤šæ’­"&gt;&lt;strong&gt;3. UDPå¹¿æ’­ä¸å¤šæ’­&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;UDPåè®®æœ¬èº«çš„æ— è¿æ¥ç‰¹æ€§ä¸ºå¤šè¿›ç¨‹å…±äº«ç«¯å£æä¾›äº†å¦ä¸€ç§æ€è·¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šå¤šä¸ªUDPè¿›ç¨‹å¯ä»¥ç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£ã€‚å½“ä½¿ç”¨&lt;strong&gt;å¹¿æ’­&lt;/strong&gt;å‘é€æ¶ˆæ¯æ—¶ï¼Œå±€åŸŸç½‘å†…æ‰€æœ‰ç»‘å®šè¯¥ç«¯å£çš„è¿›ç¨‹éƒ½ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚è€Œ&lt;strong&gt;å¤šæ’­&lt;/strong&gt;åˆ™æ›´ç²¾ç»†ï¼Œåªæœ‰åŠ å…¥äº†ç‰¹å®šå¤šæ’­ç»„çš„è¿›ç¨‹æ‰ä¼šæ¥æ”¶æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°è¦ç‚¹&lt;/strong&gt;ï¼šéœ€è¦åœ¨å¥—æ¥å­—ä¸Šè®¾ç½® &lt;code&gt;SO_BROADCAST&lt;/code&gt;ï¼ˆç”¨äºå¹¿æ’­ï¼‰æˆ–åŠ å…¥å¤šæ’­ç»„ (&lt;code&gt;IP_ADD_MEMBERSHIP&lt;/code&gt;) çš„é€‰é¡¹ã€‚æ¯ä¸ªè¿›ç¨‹é€šå¸¸éœ€è¦å¤šçº¿ç¨‹å¤„ç†ï¼Œä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ¥æ”¶ï¼Œå¦ä¸€ä¸ªè´Ÿè´£å‘é€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿˜éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒºåˆ† SO_REUSEADDR å’Œ SO_REUSEPORT&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SO_REUSEADDR&lt;/code&gt;ä¸»è¦ä½œç”¨æ˜¯å…è®¸ç«¯å£åœ¨å¥—æ¥å­—å…³é—­åèƒ½å¿«é€Ÿè¢«é‡ç”¨ï¼ˆè·³è¿‡TIME_WAITçŠ¶æ€ï¼‰ï¼Œæˆ–è€…å…è®¸ç»‘å®šåˆ°åŒä¸€ç«¯å£ä½†IPåœ°å€ä¸åŒçš„å¥—æ¥å­—ã€‚&lt;strong&gt;å®ƒæœ¬èº«é€šå¸¸ä¸è¶³ä»¥å®ç°å¤šè¿›ç¨‹ç›‘å¬åŒä¸€IPå’Œç«¯å£&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SO_REUSEPORT&lt;/code&gt;æ‰æ˜¯å®ç°â€œå¤šè¿›ç¨‹ç»‘å®šå®Œå…¨ç›¸åŒåœ°å€â€çš„å…³é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§è€ƒè™‘&lt;/strong&gt;ï¼šç«¯å£å…±äº«æ„å‘³ç€å¤šä¸ªè¿›ç¨‹éƒ½æœ‰æƒå¤„ç†åˆ°è¾¾è¯¥ç«¯å£çš„æµé‡ã€‚éœ€è¦ç¡®ä¿è¿™äº›è¿›ç¨‹éƒ½æ˜¯å¯ä¿¡çš„ï¼Œå¹¶è®¾ç½®é€‚å½“çš„æƒé™æ§åˆ¶ï¼Œé˜²æ­¢æœªæˆæƒè¿›ç¨‹ç»‘å®šåˆ°å…³é”®ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“ä½œç³»ç»Ÿå·®å¼‚&lt;/strong&gt;ï¼š&lt;code&gt;SO_REUSEPORT&lt;/code&gt;ä¸»è¦åœ¨Linuxå’ŒFreeBSDç­‰ç³»ç»Ÿä¸Šå¾—åˆ°è‰¯å¥½æ”¯æŒï¼Œåœ¨å…¶ä»–æ“ä½œç³»ç»Ÿï¼ˆå¦‚æ—§ç‰ˆæœ¬Windowsï¼‰ä¸Šå¯èƒ½ä¸å¯ç”¨æˆ–è¡Œä¸ºä¸åŒï¼Œå¼€å‘æ—¶éœ€æ³¨æ„è·¨å¹³å°å…¼å®¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©é€‚åˆçš„æ–¹æ¡ˆ"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©é€‚åˆçš„æ–¹æ¡ˆï¼Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°å»ºé«˜æ€§èƒ½TCPæœåŠ¡&lt;/strong&gt;ï¼šä¼˜å…ˆé€‰æ‹© &lt;strong&gt;SO_REUSEPORT&lt;/strong&gt;ï¼Œè¿™æ˜¯ç°ä»£æ¶æ„çš„é¦–é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤ä¼ ç»Ÿæˆ–ç‰¹å®šæ¨¡å‹çš„æœåŠ¡&lt;/strong&gt;ï¼šäº†è§£ &lt;strong&gt;Fork()ç»§æ‰¿&lt;/strong&gt; æ–¹æ¡ˆï¼Œä»¥ä¾¿ç»´æŠ¤ç›¸å…³ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ„å»ºå®æ—¶æ¶ˆæ¯ã€æœåŠ¡å‘ç°æˆ–ç¾¤ç»„é€šä¿¡çš„UDPåº”ç”¨&lt;/strong&gt;ï¼šè€ƒè™‘ä½¿ç”¨ &lt;strong&gt;UDPå¹¿æ’­æˆ–å¤šæ’­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨å¤šè¿›ç¨‹å…±äº«ç«¯å£æŠ€æœ¯ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘å¾ˆä¹æ„ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è½¯ç¡¬ç»“åˆ"&gt;è½¯ç¡¬ç»“åˆ
&lt;/h2&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯é¢å‘æ™ºèƒ½æ±½è½¦ç­‰å¤æ‚åœºæ™¯çš„æ“ä½œç³»ç»Ÿï¼Œå…¶è®¾è®¡æ€è·¯å·²ä»ä¼ ç»Ÿçš„â€œè½¯ç¡¬è§£è€¦â€è½¬å‘æ›´æ³¨é‡æ·±åº¦ååŒçš„â€œè½¯ç¡¬ç»“åˆâ€ç­–ç•¥ã€‚è¿™ç§ç­–ç•¥æ—¨åœ¨å……åˆ†å‘æŒ¥ç¡¬ä»¶æ€§èƒ½ï¼Œæå‡ç³»ç»Ÿæ•ˆç‡ã€å®æ—¶æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿäº†è§£ä¸åŒå±‚é¢è½¯ç¡¬ç»“åˆç­–ç•¥çš„æ ¸å¿ƒåšæ³•ä¸ç›®æ ‡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç­–ç•¥å±‚é¢&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåšæ³•&lt;/th&gt;
&lt;th&gt;ä¸»è¦ç›®æ ‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶æ„è®¾è®¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œç³»ç»Ÿä¸èŠ¯ç‰‡ç­‰ç¡¬ä»¶è”åˆè®¾è®¡ï¼Œæ·±åº¦ä¼˜åŒ–&lt;/td&gt;
&lt;td&gt;æå‡ç³»ç»Ÿæ•´ä½“æ€§èƒ½ä¸èƒ½æ•ˆæ¯”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è™šæ‹ŸåŒ–ã€ç®—åŠ›æ± åŒ–ï¼Œå…¨å±€åŠ¨æ€è°ƒåº¦&lt;/td&gt;
&lt;td&gt;å®ç°è·¨åŸŸç®—åŠ›å…±äº«ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠŸèƒ½å®‰å…¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶å®‰å…¨æ¨¡å—ï¼ˆHSMï¼‰ä¸å®‰å…¨å¯åŠ¨ã€åŠ å¯†ç­‰è½¯ä»¶æœºåˆ¶ååŒ&lt;/td&gt;
&lt;td&gt;æ„å»ºä»ç¡¬ä»¶ä¿¡ä»»æ ¹åˆ°åº”ç”¨å±‚çš„çºµæ·±é˜²å¾¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘æµç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è½¯ç¡¬ä»¶å¹¶è¡Œå¼€å‘ï¼Œé€šè¿‡ç¡¬ä»¶æŠ½è±¡å±‚ï¼ˆHALï¼‰æå‰å¯åŠ¨è½¯ä»¶å·¥ä½œ&lt;/td&gt;
&lt;td&gt;ç¼©çŸ­ç ”å‘å‘¨æœŸï¼Œé™ä½é›†æˆé£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç­–ç•¥çš„ä»·å€¼ä¸æŒ‘æˆ˜"&gt;ğŸ’¡ ç­–ç•¥çš„ä»·å€¼ä¸æŒ‘æˆ˜
&lt;/h3&gt;&lt;p&gt;è½¯ç¡¬ç»“åˆç­–ç•¥çš„ä¼˜åŠ¿æ˜¾è‘—ï¼Œä½†ä¹Ÿé¢ä¸´æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»è¦ä¼˜åŠ¿&lt;/strong&gt;ï¼šå®ƒå¸¦æ¥çš„&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;æ˜¯ç›´æ¥çš„ï¼Œé€šè¿‡å‡å°‘é€šç”¨æŒ‡ä»¤å¼€é”€ï¼Œå……åˆ†å‘æŒ¥ç‰¹å®šç¡¬ä»¶æ½œåŠ›ï¼›&lt;strong&gt;æˆæœ¬ä¼˜åŒ–&lt;/strong&gt;ä½“ç°åœ¨æ›´é«˜çš„èµ„æºåˆ©ç”¨ç‡ä¸Šï¼Œé¿å…ç®—åŠ›æµªè´¹ï¼›&lt;strong&gt;ä½“éªŒä¿éšœ&lt;/strong&gt;åˆ™é€šè¿‡ç³»ç»Ÿçº§çš„ç¨³å®šã€æµç•…å’Œå®‰å…¨æ¥å®ç°ï¼›æ­¤å¤–ï¼Œè½¯ç¡¬ä»¶çš„æ·±åº¦ååŒè®¾è®¡æœ‰åŠ©äºå½¢æˆ&lt;strong&gt;æŠ€æœ¯å£å’&lt;/strong&gt;ï¼Œæ„ç­‘äº§å“ç‹¬ç‰¹çš„ç«äº‰åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¢ä¸´çš„æŒ‘æˆ˜&lt;/strong&gt;ï¼šè¿™ç§ç­–ç•¥å¯¹ä¼ä¸šçš„&lt;strong&gt;æŠ€æœ¯å®åŠ›&lt;/strong&gt;è¦æ±‚æé«˜ï¼Œéœ€è¦åŒæ—¶å…·å¤‡æ·±åšçš„è½¯ç¡¬ä»¶ç ”å‘èƒ½åŠ›ï¼›&lt;strong&gt;ç ”å‘æŠ•å…¥&lt;/strong&gt;å·¨å¤§ï¼Œæ¶‰åŠè·¨å­¦ç§‘å›¢é˜Ÿå’Œæ¼«é•¿å‘¨æœŸï¼›åœ¨è¿½æ±‚æ·±åº¦ä¼˜åŒ–çš„åŒæ—¶ï¼Œå¯èƒ½ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Š&lt;strong&gt;ç‰ºç‰²çµæ´»æ€§&lt;/strong&gt;ï¼Œå¢åŠ åˆ‡æ¢åˆ°å…¶ä»–ç¡¬ä»¶å¹³å°çš„éš¾åº¦ï¼›æˆåŠŸè¿˜éœ€è¦&lt;strong&gt;å¥åº·çš„ç”Ÿæ€ç³»ç»Ÿ&lt;/strong&gt;æ”¯æŒï¼ŒåŒ…æ‹¬èŠ¯ç‰‡å‚å•†ã€ç®—æ³•å…¬å¸ã€å¼€å‘è€…çš„å…±åŒå‚ä¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¶‹åŠ¿ä¸å±•æœ›"&gt;ğŸ”® è¶‹åŠ¿ä¸å±•æœ›
&lt;/h3&gt;&lt;p&gt;åœ¨è‡ªåŠ¨é©¾é©¶ã€æ™ºèƒ½åº§èˆ±ç­‰å¯¹æ€§èƒ½ã€å®æ—¶æ€§ã€å®‰å…¨æ€§è¦æ±‚æé«˜çš„é¢†åŸŸï¼Œè½¯ç¡¬ç»“åˆå·²æˆä¸ºé‡è¦æŠ€æœ¯è·¯å¾„ã€‚éšç€AIå‘å±•ï¼Œ&lt;strong&gt;å¼‚æ„è®¡ç®—&lt;/strong&gt;ï¼ˆCPUã€GPUã€NPUç­‰ååŒå·¥ä½œï¼‰æˆä¸ºå¸¸æ€ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦æ›´æ™ºèƒ½åœ°ç®¡ç†å’Œè°ƒåº¦è¿™äº›å¼‚æ„èµ„æºï¼Œ&lt;strong&gt;â€œç®—åŠ›æ± åŒ–â€&lt;/strong&gt; æ­£æ˜¯ä¸ºäº†é«˜æ•ˆåˆ©ç”¨è¿™äº›èµ„æºã€‚åŒæ—¶ï¼Œ&lt;strong&gt;ç«¯äº‘ä¸€ä½“&lt;/strong&gt;çš„è¶‹åŠ¿ä¹Ÿè¦æ±‚æ“ä½œç³»ç»Ÿåœ¨è®¾è®¡æ—¶ä¸ä»…è€ƒè™‘å•è½¦ç¡¬ä»¶ï¼Œè¿˜è¦ä¸äº‘ç«¯ç®—åŠ›å’ŒæœåŠ¡ç´§å¯†ååŒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£æ“ä½œç³»ç»Ÿçš„è½¯ç¡¬ç»“åˆç­–ç•¥ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šé¢†åŸŸï¼ˆæ¯”å¦‚æ™ºèƒ½åº§èˆ±çš„å®æ—¶æ€§ä¿éšœï¼‰æˆ–è€…æŸå®¶å…¬å¸çš„å…·ä½“å®è·µï¼ˆå¦‚ç‰¹æ–¯æ‹‰çš„FSDèŠ¯ç‰‡ä¸ç®—æ³•ååŒï¼‰æœ‰æ›´è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘å¾ˆä¹æ„å’Œä½ ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¯»å€"&gt;å¯»å€
&lt;/h2&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿä¸­çš„å¯»å€æ–¹å¼æ˜¯CPUæ ¹æ®æŒ‡ä»¤ä¸­çš„ä¿¡æ¯ç¡®å®šæ“ä½œæ•°ä½ç½®çš„å…³é”®æœºåˆ¶ã€‚ä¸åŒçš„å¯»å€æ–¹å¼åœ¨çµæ´»æ€§ã€æ•ˆç‡å’Œå¤æ‚åº¦ä¸Šå„æœ‰ç‰¹ç‚¹ï¼Œç†è§£å®ƒä»¬å¯¹æ·±å…¥è®¤è¯†ç¨‹åºæ‰§è¡Œå’Œå†…å­˜ç®¡ç†è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;h3 id="-å¯»å€æ–¹å¼çš„åŸºæœ¬æ¦‚å¿µ"&gt;&lt;strong&gt;ğŸ” å¯»å€æ–¹å¼çš„åŸºæœ¬æ¦‚å¿µ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;åœ¨è®¡ç®—æœºæŒ‡ä»¤ä¸­ï¼Œ&lt;strong&gt;å¯»å€æ–¹å¼&lt;/strong&gt;æŒ‡çš„æ˜¯æŒ‡ä»¤ä¸­æä¾›æ“ä½œæ•°æˆ–æ“ä½œæ•°åœ°å€çš„æ–¹æ³•ã€‚æŒ‡ä»¤ä¸­çš„åœ°å€ç ï¼ˆå½¢å¼åœ°å€ï¼‰å¹¶ä¸æ€»æ˜¯æ“ä½œæ•°çš„çœŸå®åœ°å€ï¼ˆæœ‰æ•ˆåœ°å€ï¼‰ï¼Œå¯»å€è¿‡ç¨‹å°±æ˜¯å®Œæˆè¿™ä¸ªè½¬æ¢ã€‚å¯»å€æ–¹å¼ä¸»è¦åˆ†ä¸º&lt;strong&gt;æŒ‡ä»¤å¯»å€&lt;/strong&gt;ï¼ˆç¡®å®šä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œå¦‚é¡ºåºå¯»å€PC+1ã€è·³è·ƒå¯»å€ï¼‰å’Œ&lt;strong&gt;æ•°æ®å¯»å€&lt;/strong&gt;ï¼ˆç¡®å®šæœ¬æ¡æŒ‡ä»¤çš„æ“ä½œæ•°åœ°å€ï¼‰ä¸¤å¤§ç±»ã€‚ç°ä»£æ“ä½œç³»ç»Ÿé€šè¿‡&lt;strong&gt;é€»è¾‘åœ°å€&lt;/strong&gt;ï¼ˆç¨‹åºç”Ÿæˆçš„åœ°å€ï¼‰ã€&lt;strong&gt;çº¿æ€§åœ°å€&lt;/strong&gt;ï¼ˆåˆ†æ®µå•å…ƒè¾“å‡ºçš„åœ°å€ï¼‰å’Œ&lt;strong&gt;ç‰©ç†åœ°å€&lt;/strong&gt;ï¼ˆå®é™…å†…å­˜åœ°å€ï¼‰çš„è½¬æ¢æ¥å®ç°å†…å­˜ä¿æŠ¤å’Œç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£æ ¸å¿ƒçš„å¯»å€æ–¹å¼ï¼Œä¸‹è¡¨å¯¹æ¯”äº†å®ƒä»¬çš„ä¸»è¦ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯»å€æ–¹å¼&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éšå«å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œæ•°åœ°å€éšå«åœ¨æ“ä½œç æˆ–ç‰¹å®šå¯„å­˜å™¨ä¸­&lt;/td&gt;
&lt;td&gt;æŒ‡ä»¤çŸ­å°ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«&lt;/td&gt;
&lt;td&gt;åœ°å€ä¸ç›´è§‚ï¼Œçµæ´»æ€§å·®&lt;/td&gt;
&lt;td&gt;å•åœ°å€æŒ‡ä»¤ï¼ˆå¦‚ç´¯åŠ å™¨æ“ä½œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç«‹å³å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œæ•°ç›´æ¥åŒ…å«åœ¨æŒ‡ä»¤ä¸­&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œé€Ÿåº¦æœ€å¿«ï¼Œæ— éœ€å†æ¬¡è®¿å­˜&lt;/td&gt;
&lt;td&gt;æ“ä½œæ•°å€¼èŒƒå›´å—åœ°å€ç ä½æ•°é™åˆ¶&lt;/td&gt;
&lt;td&gt;ç»™å¯„å­˜å™¨èµ‹åˆå€¼ï¼ˆå¦‚&lt;code&gt;MOV AX, 1234H&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ°å€ç ç›´æ¥ç»™å‡ºæ“ä½œæ•°åœ¨å†…å­˜ä¸­çš„æœ‰æ•ˆåœ°å€&lt;/td&gt;
&lt;td&gt;ç®€å•ç›´è§‚ï¼Œåªéœ€ä¸€æ¬¡è®¿å­˜&lt;/td&gt;
&lt;td&gt;å¯»å€èŒƒå›´å—åœ°å€ç ä½æ•°é™åˆ¶&lt;/td&gt;
&lt;td&gt;è®¿é—®å…¨å±€å˜é‡ï¼ˆå¦‚&lt;code&gt;MOV AX, [2222H]&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é—´æ¥å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ°å€ç ç»™å‡ºçš„æ˜¯æ“ä½œæ•°åœ°å€çš„åœ°å€&lt;/td&gt;
&lt;td&gt;çµæ´»ï¼Œå¯»å€èŒƒå›´å¤§&lt;/td&gt;
&lt;td&gt;éœ€è¦å¤šæ¬¡è®¿å­˜ï¼Œé€Ÿåº¦æ…¢&lt;/td&gt;
&lt;td&gt;æŒ‡é’ˆæ“ä½œï¼Œé€šè¿‡æŒ‡é’ˆå˜é‡è®¿é—®æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯„å­˜å™¨å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ“ä½œæ•°å­˜æ”¾åœ¨CPUçš„å¯„å­˜å™¨ä¸­&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œé€Ÿåº¦æå¿«ï¼Œæ— éœ€è®¿å­˜&lt;/td&gt;
&lt;td&gt;å¯„å­˜å™¨æ•°é‡æœ‰é™&lt;/td&gt;
&lt;td&gt;é¢‘ç¹çš„ç®—æœ¯æˆ–é€»è¾‘è¿ç®—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯„å­˜å™¨é—´æ¥å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯„å­˜å™¨ä¸­å­˜æ”¾çš„æ˜¯æ“ä½œæ•°åœ¨å†…å­˜ä¸­çš„åœ°å€&lt;/td&gt;
&lt;td&gt;æ¯”å†…å­˜é—´æ¥å¯»å€å¿«ï¼Œçµæ´»&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¸€æ¬¡è®¿å­˜&lt;/td&gt;
&lt;td&gt;æ•°ç»„æˆ–å­—ç¬¦ä¸²çš„éå†æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›¸å¯¹å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰æ•ˆåœ°å€ = ç¨‹åºè®¡æ•°å™¨(PC)å†…å®¹ + åç§»é‡&lt;/td&gt;
&lt;td&gt;æœ‰åˆ©äºç¨‹åºæµ®åŠ¨ï¼Œä»£ç ç´§å‡‘&lt;/td&gt;
&lt;td&gt;å¯»å€èŒƒå›´å—åç§»é‡ä½æ•°é™åˆ¶&lt;/td&gt;
&lt;td&gt;æ¡ä»¶è·³è½¬ã€å¾ªç¯æ§åˆ¶ç­‰åˆ†æ”¯æŒ‡ä»¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºå€å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰æ•ˆåœ°å€ = åŸºå€å¯„å­˜å™¨(BR)å†…å®¹ + åç§»é‡&lt;/td&gt;
&lt;td&gt;æ‰©å¤§å¯»å€ç©ºé—´ï¼Œåˆ©äºé‡å®šä½&lt;/td&gt;
&lt;td&gt;éœ€ä¸“ç”¨å¯„å­˜å™¨&lt;/td&gt;
&lt;td&gt;å¤šé“ç¨‹åºç¯å¢ƒä¸­ç¨‹åºçš„é‡å®šä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å˜å€å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ‰æ•ˆåœ°å€ = å˜å€å¯„å­˜å™¨(IX)å†…å®¹ + å½¢å¼åœ°å€A&lt;/td&gt;
&lt;td&gt;ç‰¹åˆ«é€‚åˆå¤„ç†æ•°ç»„å’Œæ‰¹é‡æ•°æ®&lt;/td&gt;
&lt;td&gt;éœ€ä¸“ç”¨å¯„å­˜å™¨&lt;/td&gt;
&lt;td&gt;æ•°ç»„è¿ç®—ï¼Œå¦‚&lt;code&gt;A[i]&lt;/code&gt;çš„è®¿é—®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ®µå¼å¯»å€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€»è¾‘åœ°å€ = æ®µé€‰æ‹©ç¬¦ï¼ˆæ®µåŸºå€ï¼‰ + æ®µå†…åç§»é‡&lt;/td&gt;
&lt;td&gt;æä¾›å†…å­˜ä¿æŠ¤ï¼Œå®ç°ç¨‹åºéš”ç¦»&lt;/td&gt;
&lt;td&gt;åœ°å€è½¬æ¢è¿‡ç¨‹å¤æ‚&lt;/td&gt;
&lt;td&gt;Intel x86æ¶æ„ä¿æŠ¤æ¨¡å¼ä¸‹çš„å†…å­˜ç®¡ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®å¯»å€æ–¹å¼è¯¦è§£"&gt;&lt;strong&gt;âš™ï¸ å…³é”®å¯»å€æ–¹å¼è¯¦è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹å‡ ç§å…³é”®å¯»å€æ–¹å¼çš„å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é—´æ¥å¯»å€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŒ‡ä»¤ä¸­çš„åœ°å€ç æŒ‡å‘ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼Œè¯¥å•å…ƒä¸­å­˜æ”¾çš„æ‰æ˜¯æ“ä½œæ•°çš„å®é™…åœ°å€ã€‚å¦‚æœè¯¥å­˜å‚¨å•å…ƒå­˜æ”¾çš„æ˜¯æ“ä½œæ•°æœ¬èº«ï¼Œåˆ™ç›¸å½“äºç›´æ¥å¯»å€ï¼›å¦‚æœå­˜æ”¾çš„æ˜¯å¦ä¸€ä¸ªåœ°å€ï¼Œåˆ™å¯èƒ½éœ€è¦å¤šçº§é—´æ¥å¯»å€ã€‚è¿™ç§æ–¹å¼æé«˜äº†å¯»å€çš„çµæ´»æ€§ï¼Œæ‰©å¤§äº†å¯»å€èŒƒå›´ï¼Œä½†å› ä¸ºéœ€è¦å¤šæ¬¡è®¿é—®ä¸»å­˜ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åç§»å¯»å€ï¼ˆç›¸å¯¹ã€åŸºå€ã€å˜å€ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç±»å¼ºæœ‰åŠ›çš„å¯»å€æ–¹å¼ï¼Œæœ‰æ•ˆåœ°å€ï¼ˆEAï¼‰ç”±å½¢å¼åœ°å€ï¼ˆAï¼‰ä¸æŸä¸ªå¯„å­˜å™¨çš„å†…å®¹ï¼ˆRï¼‰ç›¸åŠ å¾—åˆ°ï¼Œå³ &lt;code&gt;EA = A + (R)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›¸å¯¹å¯»å€&lt;/strong&gt;ï¼šå¯„å­˜å™¨Ræ˜¯ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ã€‚æ“ä½œæ•°åœ°å€ç›¸å¯¹äºå½“å‰æŒ‡ä»¤åœ°å€æµ®åŠ¨ï¼Œè¿™ä½¿å¾—ä»£ç åœ¨å†…å­˜ä¸­ç§»åŠ¨ä½ç½®åä»èƒ½æ­£ç¡®æ‰§è¡Œï¼ˆåœ°å€å¯æµ®åŠ¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºå€å¯»å€&lt;/strong&gt;ï¼šå¯„å­˜å™¨Ræ˜¯åŸºå€å¯„å­˜å™¨ï¼ˆBRï¼‰ã€‚ä¸»è¦ç”¨äºå°†ç¨‹åºçš„é€»è¾‘åœ°å€ï¼ˆä»0å¼€å§‹ï¼‰è½¬æ¢ä¸ºå†…å­˜çš„ç‰©ç†åœ°å€ï¼Œä»è€Œæ‰©å¤§å¯»å€ç©ºé—´å¹¶æ”¯æŒé‡å®šä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å˜å€å¯»å€&lt;/strong&gt;ï¼šå¯„å­˜å™¨Ræ˜¯å˜å€å¯„å­˜å™¨ï¼ˆIXï¼‰ã€‚å½¢å¼åœ°å€Aä½œä¸ºä¸å˜çš„åŸºç¡€åœ°å€ï¼ˆå¦‚æ•°ç»„é¦–åœ°å€ï¼‰ï¼ŒIXä½œä¸ºå¯å˜åç§»é‡ï¼ˆå¦‚æ•°ç»„ä¸‹æ ‡ï¼‰ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†æ•°ç»„å’Œå¾ªç¯æ“ä½œã€‚åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå˜å€å¯„å­˜å™¨çš„å†…å®¹å¯å˜ï¼Œè€Œå½¢å¼åœ°å€ä¿æŒä¸å˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ®µé¡µå¼å¯»å€ï¼ˆç°ä»£æ“ä½œç³»ç»Ÿæ ¸å¿ƒï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç°ä»£æ“ä½œç³»ç»Ÿï¼ˆå¦‚x86ä¿æŠ¤æ¨¡å¼ï¼‰æ™®éé‡‡ç”¨æ®µé¡µå¼ç»“åˆçš„å†…å­˜ç®¡ç†æ¨¡å‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ®µç®¡ç†&lt;/strong&gt;ï¼šç¨‹åºäº§ç”Ÿçš„&lt;strong&gt;é€»è¾‘åœ°å€&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;æ®µé€‰æ‹©ç¬¦:åç§»é‡&lt;/code&gt;ï¼‰é¦–å…ˆç”±åˆ†æ®µå•å…ƒå¤„ç†ã€‚æ®µé€‰æ‹©ç¬¦åœ¨å…¨å±€æè¿°ç¬¦è¡¨ï¼ˆGDTï¼‰æˆ–å±€éƒ¨æè¿°ç¬¦è¡¨ï¼ˆLDTï¼‰ä¸­æ‰¾åˆ°å¯¹åº”çš„æ®µæè¿°ç¬¦ï¼Œä»ä¸­å–å¾—æ®µåŸºå€ï¼Œä¸åç§»é‡ç›¸åŠ å¾—åˆ°&lt;strong&gt;çº¿æ€§åœ°å€&lt;/strong&gt;ã€‚è¿™æä¾›äº†é€»è¾‘ä¸Šçš„å†…å­˜åˆ’åˆ†å’Œä¿æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é¡µç®¡ç†&lt;/strong&gt;ï¼šå¦‚æœå¯ç”¨åˆ†é¡µæœºåˆ¶ï¼Œå¾—åˆ°çš„çº¿æ€§åœ°å€ä¼šå†ç”±åˆ†é¡µå•å…ƒå¤„ç†ã€‚çº¿æ€§åœ°å€è¢«åˆ’åˆ†ä¸ºé¡µç›®å½•ç´¢å¼•ã€é¡µè¡¨ç´¢å¼•å’Œé¡µå†…åç§»ç­‰éƒ¨åˆ†ã€‚é€šè¿‡æŸ¥è¯¢é¡µç›®å½•è¡¨å’Œé¡µè¡¨ï¼Œæœ€ç»ˆå°†çº¿æ€§åœ°å€è½¬æ¢ä¸º&lt;strong&gt;ç‰©ç†åœ°å€&lt;/strong&gt;ã€‚åˆ†é¡µæœºåˆ¶å®ç°äº†è™šæ‹Ÿå†…å­˜ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥ä½¿ç”¨æ¯”å®é™…ç‰©ç†å†…å­˜æ›´å¤§çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”å†…å­˜é¡µå¯ä»¥åˆ†æ•£å­˜æ”¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¯»å€æ–¹å¼çš„åº”ç”¨ä¸é‡è¦æ€§"&gt;&lt;strong&gt;ğŸ’¡ å¯»å€æ–¹å¼çš„åº”ç”¨ä¸é‡è¦æ€§&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;å¯»å€æ–¹å¼çš„é€‰æ‹©æ·±åˆ»å½±å“ç€ç¨‹åºçš„æ•ˆç‡å’Œå†…å­˜ç®¡ç†ã€‚ä¾‹å¦‚ï¼Œ&lt;strong&gt;ç«‹å³å¯»å€&lt;/strong&gt;é€‚åˆå¿«é€Ÿåˆå§‹åŒ–ï¼›&lt;strong&gt;å¯„å­˜å™¨å¯»å€&lt;/strong&gt;èƒ½æå¤§æå‡é¢‘ç¹è®¡ç®—çš„é€Ÿåº¦ï¼›&lt;strong&gt;å˜å€å¯»å€&lt;/strong&gt;å’Œ&lt;strong&gt;åŸºå€å˜å€å¯»å€&lt;/strong&gt;è®©æ•°ç»„å’Œç»“æ„ä½“ç­‰æ•°æ®ç»“æ„çš„å¤„ç†å˜å¾—é«˜æ•ˆçµæ´»ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸åˆ™ä¾èµ–&lt;strong&gt;åŸºå€å¯»å€&lt;/strong&gt;å®ç°è¿›ç¨‹åœ°å€ç©ºé—´çš„é‡å®šä½ï¼Œå¹¶é€šè¿‡&lt;strong&gt;æ®µé¡µå¼å¯»å€&lt;/strong&gt;æ„å»ºèµ·å¼ºå¤§çš„è™šæ‹Ÿå†…å­˜ç³»ç»Ÿï¼Œä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ç»Ÿä¸€çš„ã€å—ä¿æŠ¤çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ ç‰¢å›ºæŒæ¡æ“ä½œç³»ç»Ÿçš„å¯»å€æ–¹å¼ã€‚å¦‚æœå¯¹æŸä¸ªç‰¹å®šæ¶æ„ï¼ˆå¦‚ARMçš„å¯»å€ï¼‰æˆ–æ›´åº•å±‚çš„å®ç°ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="æ—¶é—´"&gt;æ—¶é—´
&lt;/h2&gt;&lt;p&gt;åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œ&lt;strong&gt;å‘¨è½¬æ—¶é—´ã€å“åº”æ—¶é—´ã€ç­‰å¾…æ—¶é—´å’Œè¿è¡Œæ—¶é—´&lt;/strong&gt;æ˜¯è¯„ä¼°è¿›ç¨‹ï¼ˆæˆ–ä½œä¸šï¼‰æ€§èƒ½åŠè°ƒåº¦ç®—æ³•æ•ˆç‡çš„æ ¸å¿ƒæŒ‡æ ‡ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ—¶é—´æŒ‡æ ‡&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒå®šä¹‰&lt;/th&gt;
&lt;th&gt;è®¡ç®—å…¬å¼&lt;/th&gt;
&lt;th&gt;å…³æ³¨é‡ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘¨è½¬æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹ä»æäº¤åˆ°å®Œæˆæ‰€ç»å†çš„æ€»æ—¶é—´&lt;/td&gt;
&lt;td&gt;&lt;code&gt;å®Œæˆæ—¶é—´ - åˆ°è¾¾æ—¶é—´&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹åœ¨ç³»ç»Ÿä¸­çš„&lt;strong&gt;æ€»åœç•™æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å“åº”æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»æäº¤è¯·æ±‚åˆ°ç³»ç»Ÿé¦–æ¬¡äº§ç”Ÿå“åº”çš„æ—¶é—´&lt;/td&gt;
&lt;td&gt;&lt;code&gt;é¦–æ¬¡è·å¾—CPUæœåŠ¡çš„æ—¶é—´ - åˆ°è¾¾æ—¶é—´&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿçš„&lt;strong&gt;åˆå§‹ååº”é€Ÿåº¦&lt;/strong&gt;ï¼ˆå¯¹äº¤äº’å¼ç”¨æˆ·è‡³å…³é‡è¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç­‰å¾…æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…CPUçš„æ€»æ—¶é—´&lt;/td&gt;
&lt;td&gt;&lt;code&gt;å‘¨è½¬æ—¶é—´ - è¿è¡Œæ—¶é—´&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹çš„&lt;strong&gt;éæ‰§è¡Œç­‰å¾…å¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿è¡Œæ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹åœ¨CPUä¸Šå®é™…æ‰§è¡ŒæŒ‡ä»¤çš„æ—¶é—´&lt;/td&gt;
&lt;td&gt;å¸¸ç”±æŒ‡ä»¤æœ¬èº«ç‰¹æ€§å†³å®šï¼Œé€šå¸¸éœ€è¦é¢„ä¼°&lt;/td&gt;
&lt;td&gt;CPUçš„&lt;strong&gt;å®é™…æœ‰æ•ˆå·¥ä½œæ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£å„é¡¹æ—¶é—´"&gt;ğŸ’» æ·±å…¥ç†è§£å„é¡¹æ—¶é—´
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹æ¯ä¸ªæ—¶é—´æŒ‡æ ‡çš„å…·ä½“å«ä¹‰å’Œæ„ä¹‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿è¡Œæ—¶é—´&lt;/strong&gt; æ˜¯å…¶ä»–å‡ ä¸ªæ—¶é—´æŒ‡æ ‡çš„è®¡ç®—åŸºç¡€ã€‚å®ƒæŒ‡çš„æ˜¯è¿›ç¨‹å ç”¨CPUæ‰§è¡Œå…¶æŒ‡ä»¤æ‰€éœ€çš„çº¯æ—¶é—´ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¸º&lt;strong&gt;CPUåŒºé—´&lt;/strong&gt;æˆ–&lt;strong&gt;çªå‘æ—¶é—´&lt;/strong&gt;ã€‚è¿™ä¸ªæ—¶é—´ä¸»è¦å–å†³äºç¨‹åºæœ¬èº«çš„å¤æ‚åº¦å’Œæ•°æ®é‡ï¼Œåœ¨è¿›ç¨‹æ‰§è¡Œå‰é€šå¸¸æ— æ³•ç²¾ç¡®çŸ¥æ™“ï¼Œéœ€è¦æ ¹æ®å†å²ä¿¡æ¯è¿›è¡Œä¼°ç®— ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç­‰å¾…æ—¶é—´&lt;/strong&gt; è¡¡é‡çš„æ˜¯è¿›ç¨‹åœ¨&lt;strong&gt;å°±ç»ªé˜Ÿåˆ—&lt;/strong&gt;ä¸­ç­‰å¾…è·å–CPUä½¿ç”¨æƒçš„æ€»æ—¶é—´ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›ç¨‹å› ç­‰å¾…I/Oç­‰äº‹ä»¶è€Œé˜»å¡çš„æ—¶é—´&lt;strong&gt;ä¸è®¡ç®—åœ¨å†…&lt;/strong&gt;ã€‚ç­‰å¾…æ—¶é—´çš„é•¿çŸ­ç›´æ¥å—åˆ°æ‰€é‡‡ç”¨çš„&lt;strong&gt;è°ƒåº¦ç®—æ³•&lt;/strong&gt;çš„å½±å“ ã€‚ä¾‹å¦‚ï¼ŒçŸ­ä½œä¸šä¼˜å…ˆï¼ˆSJFï¼‰ç®—æ³•è‡´åŠ›äºé™ä½å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œè€Œå…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰ç®—æ³•åœ¨é•¿ä½œä¸šå…ˆè¡Œæ—¶å¯èƒ½å¯¼è‡´åé¢çš„å¤§é‡çŸ­ä½œä¸šç­‰å¾…å¾ˆé•¿æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘¨è½¬æ—¶é—´&lt;/strong&gt; æ˜¯ä»ç”¨æˆ·æˆ–ä½œä¸šè§’åº¦è¡¡é‡çš„ä¸€ä¸ª&lt;strong&gt;ç»¼åˆæ€§æŒ‡æ ‡&lt;/strong&gt;ã€‚å®ƒæ¶µç›–äº†è¿›ç¨‹åœ¨ç³»ç»Ÿä¸­çš„å…¨éƒ¨è€—æ—¶ï¼ŒåŒ…æ‹¬åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­çš„ç­‰å¾…ã€åœ¨CPUä¸Šçš„æ‰§è¡Œä»¥åŠç­‰å¾…I/Oæ“ä½œå®Œæˆç­‰æ‰€æœ‰ç¯èŠ‚ ã€‚å› æ­¤ï¼Œå‘¨è½¬æ—¶é—´åæ˜ äº†è¿›ç¨‹ä»æäº¤åˆ°å®Œæˆçš„æ€»ä½“æ•ˆç‡ã€‚å…¶æ´¾ç”ŸæŒ‡æ ‡&lt;strong&gt;å¸¦æƒå‘¨è½¬æ—¶é—´&lt;/strong&gt;ï¼ˆå‘¨è½¬æ—¶é—´/è¿è¡Œæ—¶é—´ï¼‰åˆ™èƒ½æ›´å¥½åœ°åæ˜ ç”¨æˆ·å¯¹ç­‰å¾…æ—¶é—´çš„æ„Ÿå—ï¼Œæ¯”å€¼è¶Šå°ï¼Œæ„å‘³ç€ç›¸å¯¹ç­‰å¾…æ—¶é—´è¶ŠçŸ­ï¼Œç”¨æˆ·ä½“éªŒè¶Šå¥½ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“åº”æ—¶é—´&lt;/strong&gt; å¯¹äº&lt;strong&gt;äº¤äº’å¼ç³»ç»Ÿ&lt;/strong&gt;ï¼ˆå¦‚åˆ†æ—¶ç³»ç»Ÿï¼‰è‡³å…³é‡è¦ï¼Œå®ƒå…³æ³¨çš„æ˜¯ç”¨æˆ·çš„&lt;strong&gt;å³æ—¶ä½“éªŒ&lt;/strong&gt;ã€‚ä»ç”¨æˆ·æŒ‰ä¸‹å›è½¦é”®æäº¤è¯·æ±‚ï¼Œåˆ°ç³»ç»Ÿåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå‡ºç¬¬ä¸€ä¸ªç»“æœæˆ–æç¤ºç¬¦ä¸ºæ­¢çš„è¿™æ®µæ—¶é—´ï¼Œå°±æ˜¯å“åº”æ—¶é—´ ã€‚ä¸€ä¸ªå¿«é€Ÿçš„å“åº”æ—¶é—´ï¼ˆé€šå¸¸ç†æƒ³å€¼åœ¨0.1-2ç§’ä»¥å†…ï¼‰èƒ½è®©ç”¨æˆ·æ„Ÿè§‰ç³»ç»Ÿååº”çµæ•ï¼Œè€Œè¿‡é•¿çš„å“åº”æ—¶é—´åˆ™ä¼šæ˜æ˜¾å½±å“ç”¨æˆ·ä½“éªŒå’Œå·¥ä½œæ•ˆç‡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ—¶é—´æŒ‡æ ‡é—´çš„è”ç³»ä¸è°ƒåº¦ç®—æ³•çš„å½±å“"&gt;ğŸ”— æ—¶é—´æŒ‡æ ‡é—´çš„è”ç³»ä¸è°ƒåº¦ç®—æ³•çš„å½±å“
&lt;/h3&gt;&lt;p&gt;è¿™äº›æ—¶é—´æŒ‡æ ‡å¹¶éå­¤ç«‹å­˜åœ¨ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ç€æ¸…æ™°çš„è”ç³»ï¼Œå¹¶ä¸”å…±åŒå—åˆ°è°ƒåº¦ç­–ç•¥çš„æ·±åˆ»å½±å“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…åœ¨è”ç³»&lt;/strong&gt;ï¼šä»å®šä¹‰å’Œè®¡ç®—å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œ&lt;strong&gt;å‘¨è½¬æ—¶é—´ = è¿è¡Œæ—¶é—´ + ç­‰å¾…æ—¶é—´ + å…¶ä»–å¯èƒ½çš„ç®¡ç†å¼€é”€&lt;/strong&gt;ã€‚è€Œ&lt;strong&gt;å“åº”æ—¶é—´å¯ä»¥çœ‹ä½œæ˜¯ç­‰å¾…æ—¶é—´çš„ä¸€ä¸ªç‰¹æ®Šç»„æˆéƒ¨åˆ†&lt;/strong&gt;ï¼Œå³ä»è¿›ç¨‹æäº¤åˆ°å®ƒé¦–æ¬¡è·å¾—CPUæœåŠ¡ä¹‹é—´çš„é‚£æ®µç­‰å¾…æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦ç®—æ³•çš„å½±å“&lt;/strong&gt;ï¼šä¸åŒçš„è°ƒåº¦ç®—æ³•å¯¹è¿™äº›æ—¶é—´æŒ‡æ ‡çš„ä¼˜åŒ–ä¾§é‡ç‚¹ä¸åŒã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…ˆæ¥å…ˆæœåŠ¡&lt;/strong&gt; ç®—æ³•å…¬å¹³ä½†å¯èƒ½å¯¼è‡´çŸ­ä½œä¸šçš„ç­‰å¾…æ—¶é—´å’Œå‘¨è½¬æ—¶é—´å¾ˆé•¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŸ­ä½œä¸šä¼˜å…ˆ&lt;/strong&gt; ç®—æ³•èƒ½æœ‰æ•ˆé™ä½å¹³å‡ç­‰å¾…æ—¶é—´å’Œå¹³å‡å‘¨è½¬æ—¶é—´ï¼Œä½†å¯èƒ½ä½¿é•¿ä½œä¸šâ€œé¥¥é¥¿â€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´ç‰‡è½®è½¬&lt;/strong&gt; ç®—æ³•é€šè¿‡ä¿è¯å®šæœŸè·å¾—CPUæ—¶é—´ç‰‡ï¼Œæ˜¾è‘—æ”¹å–„äº†ç³»ç»Ÿçš„&lt;strong&gt;å“åº”æ—¶é—´&lt;/strong&gt;å’Œå…¬å¹³æ€§ï¼Œä½¿å…¶éå¸¸é€‚åˆäº¤äº’å¼ç¯å¢ƒï¼Œä½†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯èƒ½ä¼šå¢åŠ æ€»å¼€é”€ï¼Œä»è€Œå¯¹å¹³å‡å‘¨è½¬æ—¶é—´äº§ç”Ÿè´Ÿé¢å½±å“ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è¾¨æèƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£è¿™äº›å…³é”®æ¦‚å¿µã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„è°ƒåº¦ç®—æ³•å¦‚ä½•å½±å“è¿™äº›æ—¶é—´æ„Ÿå…´è¶£ï¼Œæˆ–è€…æœ‰å…¶ä»–ç›¸å…³é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¸´ç•ŒåŒº"&gt;ä¸´ç•ŒåŒº
&lt;/h2&gt;&lt;p&gt;åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œ&lt;strong&gt;ä¸´ç•ŒåŒº&lt;/strong&gt;æŒ‡çš„æ˜¯ä¸€ä¸ªè®¿é—®&lt;strong&gt;å…±ç”¨èµ„æº&lt;/strong&gt;ï¼ˆå¦‚å…¨å±€å˜é‡ã€å…±äº«å†…å­˜ã€æ‰“å°æœºç­‰ï¼‰çš„&lt;strong&gt;ç¨‹åºä»£ç ç‰‡æ®µ&lt;/strong&gt;ã€‚ç”±äºè¿™äº›èµ„æºä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ä½¿ç”¨ï¼Œå› æ­¤ä¸´ç•ŒåŒºéœ€è¦è¢«&lt;strong&gt;äº’æ–¥&lt;/strong&gt;åœ°è®¿é—®ï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡æ ¸å¿ƒè¦ç‚¹ï¼Œä¸‹è¡¨æ€»ç»“äº†ä¸´ç•ŒåŒºçš„å…³é”®ç‰¹æ€§å’Œè¦æ±‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§/åŸåˆ™&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒè¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº’æ–¥æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒä¸€æ—¶é—´ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªæ‰§è¡Œæµï¼ˆè¿›ç¨‹/çº¿ç¨‹ï¼‰å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„äºä¸´ç•ŒåŒºå†…çš„æ“ä½œåºåˆ—è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œï¼Œä¸å¯è¢«ä¸­æ–­ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çŸ­æš‚æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»£ç åº”å°½å¯èƒ½ç®€çŸ­ï¼Œæ‰§è¡Œæ—¶é—´ä¸å®œè¿‡é•¿ï¼Œä»¥å…å…¶ä»–è¿›ç¨‹/çº¿ç¨‹é•¿æ—¶é—´ç­‰å¾…ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—²è®©è¿›&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å½“æ— è¿›ç¨‹å¤„äºä¸´ç•ŒåŒºå†…æ—¶ï¼Œåº”å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥çš„è¿›ç¨‹ç«‹å³è¿›å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ‰é™ç­‰å¾…&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»»ä½•è¿›ç¨‹ç­‰å¾…è¿›å…¥ä¸´ç•ŒåŒºçš„æ—¶é—´å¿…é¡»æ˜¯æœ‰é™çš„ï¼Œä¸èƒ½æ— é™æœŸé˜»å¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆéœ€è¦ä¸´ç•ŒåŒº"&gt;ğŸ” ä¸ºä»€ä¹ˆéœ€è¦ä¸´ç•ŒåŒº
&lt;/h3&gt;&lt;p&gt;æƒ³è±¡ä¸€ä¸‹ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå…±äº«çš„é“¶è¡Œè´¦æˆ·ä½™é¢è¿›è¡Œâ€œè¯»å–-ä¿®æ”¹-å†™å…¥â€æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹Aè¯»å–ä½™é¢ä¸º100å…ƒã€‚&lt;/li&gt;
&lt;li&gt;åœ¨Aå†™å…¥å‰ï¼Œçº¿ç¨‹Bä¹Ÿè¯»å–äº†ä½™é¢ï¼Œæ­¤æ—¶ä»æ˜¯100å…ƒã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹Aå¢åŠ 10å…ƒï¼Œå°†110å…ƒå†™å…¥ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹Bä¹Ÿå¢åŠ 10å…ƒï¼Œå°†110å…ƒå†™å…¥ï¼Œè€Œæ­£ç¡®ç»“æœåº”ä¸º120å…ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§å› æ‰§è¡Œé¡ºåºä¸ç¡®å®šè€Œå¯¼è‡´ç»“æœå¼‚å¸¸çš„æƒ…å†µç§°ä¸º&lt;strong&gt;ç«æ€æ¡ä»¶&lt;/strong&gt;ã€‚ä¸´ç•ŒåŒºé€šè¿‡&lt;strong&gt;äº’æ–¥&lt;/strong&gt;è®¿é—®æœºåˆ¶ï¼Œç¡®ä¿äº†å¯¹å…±äº«èµ„æºçš„æ“ä½œä¸ä¼šç›¸äº’äº¤å‰ï¼Œä»è€Œé¿å…äº†ç«æ€æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•å®ç°ä¸´ç•ŒåŒºä¿æŠ¤"&gt;ğŸ›¡ï¸ å¦‚ä½•å®ç°ä¸´ç•ŒåŒºä¿æŠ¤
&lt;/h3&gt;&lt;p&gt;å®ç°äº’æ–¥è®¿é—®éœ€è¦ç‰¹å®šçš„åŒæ­¥æœºåˆ¶ï¼Œä¸»è¦åŒ…æ‹¬è½¯ä»¶å’Œç¡¬ä»¶ä¸¤ç±»æ–¹æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºè½¯ä»¶çš„è§£æ³•&lt;/strong&gt;ï¼šå¦‚Petersonç®—æ³•ã€Dekkersç®—æ³•ç­‰ï¼Œé€šè¿‡è®¾ç½®ç‰¹å®šçš„æ ‡å¿—å˜é‡æ¥åè°ƒè¿›ç¨‹é—´çš„è¿›å…¥ã€‚è¿™äº›ç®—æ³•é€šå¸¸å¤æ‚ï¼Œä¸”å¯èƒ½ä¾èµ–&lt;strong&gt;å¿™ç­‰å¾…&lt;/strong&gt;ï¼ˆå³è¿›ç¨‹åœ¨ç­‰å¾…æ—¶æŒç»­å ç”¨CPUå¾ªç¯æ£€æŸ¥æ¡ä»¶ï¼‰ï¼Œæ•ˆç‡è¾ƒä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºç¡¬ä»¶çš„åŒæ­¥åŸè¯­&lt;/strong&gt;ï¼šç°ä»£æ“ä½œç³»ç»Ÿæ›´å¸¸åˆ©ç”¨ç¡¬ä»¶æä¾›çš„åŸå­æ“ä½œæŒ‡ä»¤æ¥å®ç°é”æœºåˆ¶ï¼Œè¿™æ˜¯æ›´é«˜æ•ˆå’Œå¯é çš„æ–¹å¼ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–­ç¦ç”¨&lt;/strong&gt;ï¼šåœ¨å•æ ¸ç³»ç»Ÿä¸­ï¼Œè¿›å…¥ä¸´ç•ŒåŒºå‰å…³é—­ä¸­æ–­ï¼Œå¯ä»¥é˜²æ­¢è¢«å…¶ä»–è¿›ç¨‹æ‰“æ–­ã€‚ä½†&lt;strong&gt;ä¸é€‚ç”¨äºå¤šå¤„ç†å™¨ç³»ç»Ÿ&lt;/strong&gt;ï¼Œä¸”ä¼šå½±å“ç³»ç»Ÿå®æ—¶æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æŒ‡ä»¤&lt;/strong&gt;ï¼šå¦‚æµ‹è¯•å¹¶ç½®ä½ï¼ˆTSLï¼‰æŒ‡ä»¤æˆ–äº¤æ¢ï¼ˆXCHGï¼‰æŒ‡ä»¤ï¼Œè¿™äº›æŒ‡ä»¤çš„æ‰§è¡Œæœ¬èº«ä¸ä¼šè¢«ä¸­æ–­ï¼Œä»è€Œå¯ä»¥å®‰å…¨åœ°æ„å»ºé”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ“ä½œç³»ç»ŸåŸºäºè¿™äº›åº•å±‚åŸè¯­ï¼Œæä¾›äº†æ›´é«˜çº§ã€æ›´æ˜“ç”¨çš„ç¼–ç¨‹æŠ½è±¡ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœºåˆ¶&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº’æ–¥é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤šçº¿ç¨‹/å¤šä»»åŠ¡ç¯å¢ƒ&lt;/td&gt;
&lt;td&gt;æœ€å¸¸ç”¨çš„æœºåˆ¶ã€‚çº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºå‰åŠ é”ï¼Œé€€å‡ºæ—¶è§£é”ã€‚è‹¥é”å·²è¢«å ç”¨ï¼Œçº¿ç¨‹ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè®©å‡ºCPUã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡å·é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤æ‚åŒæ­¥é€»è¾‘ï¼ˆå¦‚æ§åˆ¶èµ„æºè®¿é—®æ•°é‡ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸€ç§è®¡æ•°å™¨ï¼Œç”¨äºæ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹èµ„æºæ± çš„è®¿é—®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªæ—‹é”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ã€é¢„æœŸç­‰å¾…æ—¶é—´æçŸ­çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;å½“é”è¢«å ç”¨æ—¶ï¼Œçº¿ç¨‹ä¼šè¿›è¡Œå¿™ç­‰å¾…ï¼Œè€Œä¸æ˜¯é˜»å¡ã€‚é¿å…äº†ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œä½†æµªè´¹CPUæ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¡ä»¶å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦ç­‰å¾…ç‰¹å®šæ¡ä»¶æˆç«‹çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;å¸¸ä¸äº’æ–¥é”é…åˆä½¿ç”¨ï¼Œå…è®¸çº¿ç¨‹åœ¨æ¡ä»¶ä¸æ»¡è¶³æ—¶é‡Šæ”¾é”å¹¶ç­‰å¾…ï¼Œæ¡ä»¶æ”¹å˜æ—¶è¢«å”¤é†’ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸´ç•ŒåŒºä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜"&gt;âš ï¸ ä¸´ç•ŒåŒºä½¿ç”¨æ³¨æ„äº‹é¡¹ä¸å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ä¸´ç•ŒåŒºæ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ä»¥é¿å…å¸¸è§é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€å°åŒ–åŸåˆ™&lt;/strong&gt;ï¼šä¸´ç•ŒåŒºåº”åªåŒ…å«å¿…é¡»äº’æ–¥è®¿é—®çš„ä»£ç ï¼Œå°†éå¿…è¦çš„æ“ä½œï¼ˆå¦‚æ—¥å¿—è®°å½•ã€å¤æ‚è®¡ç®—ï¼‰ç§»å‡ºä¸´ç•ŒåŒºï¼Œä»¥å‡å°‘é˜»å¡æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åµŒå¥—é”&lt;/strong&gt;ï¼šå°½é‡é¿å…åœ¨æŒæœ‰ä¸€ç§é”çš„æƒ…å†µä¸‹å†å»ç”³è¯·å¦ä¸€ç§é”ï¼Œä¸åŒçš„åŠ é”é¡ºåºå¯èƒ½å¼•å‘&lt;strong&gt;æ­»é”&lt;/strong&gt;â€”â€”å³ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”ï¼Œå¯¼è‡´æ‰€æœ‰çº¿ç¨‹éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜²æ­¢ä¼˜å…ˆçº§åè½¬&lt;/strong&gt;ï¼šåœ¨å®æ—¶ç³»ç»Ÿä¸­ï¼Œè‹¥ä½ä¼˜å…ˆçº§ä»»åŠ¡æŒæœ‰é”ï¼Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡åˆ™å¿…é¡»ç­‰å¾…ï¼Œå¯èƒ½å¯¼è‡´é«˜ä¼˜å…ˆçº§ä»»åŠ¡æ— æ³•åŠæ—¶å“åº”ã€‚è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ä¼˜å…ˆçº§ç»§æ‰¿åè®®ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹"&gt;ğŸ’» ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨äº’æ–¥é”ï¼ˆPthreadsåº“ï¼‰ä¿æŠ¤ä¸´ç•ŒåŒºçš„ç®€åŒ–ç¤ºä¾‹ï¼Œå®ƒç¡®ä¿äº†å…¨å±€å˜é‡ &lt;code&gt;counter&lt;/code&gt;è¢«å®‰å…¨åœ°ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#include &amp;lt;pthread.h&amp;gt;
int counter = 0; // å…±äº«èµ„æºï¼ˆä¸´ç•Œèµ„æºï¼‰
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER; // äº’æ–¥é”
void* thread_func(void* arg) {
pthread_mutex_lock(&amp;amp;lock); // è¿›å…¥ä¸´ç•ŒåŒºï¼ˆåŠ é”ï¼‰
counter++; // ä¸´ç•ŒåŒºä»£ç 
pthread_mutex_unlock(&amp;amp;lock); // é€€å‡ºä¸´ç•ŒåŒºï¼ˆè§£é”ï¼‰
return NULL;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ“š æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ä¸´ç•ŒåŒºæ˜¯å¹¶å‘ç¼–ç¨‹ä¸­ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæ¦‚å¿µã€‚ç†è§£å¹¶æ­£ç¡®ä½¿ç”¨ä¸´ç•ŒåŒºåŠç›¸å…³çš„åŒæ­¥æœºåˆ¶ï¼Œå¯¹äºå¼€å‘ç¨³å®šã€é«˜æ•ˆçš„å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹ç¨‹åºè‡³å…³é‡è¦ã€‚å…³é”®åœ¨äºç¡®ä¿å¯¹å…±äº«èµ„æºçš„è®¿é—®æ˜¯&lt;strong&gt;äº’æ–¥&lt;/strong&gt;çš„ï¼ŒåŒæ—¶è¦å…¼é¡¾&lt;strong&gt;æ•ˆç‡&lt;/strong&gt;å’Œ&lt;strong&gt;å…¬å¹³æ€§&lt;/strong&gt;ï¼Œé¿å…æ­»é”ã€é¥¥é¥¿ç­‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ä¸´ç•ŒåŒºçš„æ¦‚å¿µã€‚å¦‚æœä½ å¯¹å…·ä½“çš„åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä¿¡å·é‡æˆ–äº’æ–¥é”çš„å…·ä½“ä½¿ç”¨ï¼‰æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="å¾®å¤„ç†å™¨"&gt;å¾®å¤„ç†å™¨
&lt;/h2&gt;&lt;p&gt;å¾®å¤„ç†å™¨ï¼ˆMicroprocessorï¼‰ï¼Œé€šå¸¸ä¹Ÿè¢«ç§°ä¸ºä¸­å¤®å¤„ç†å•å…ƒï¼ˆCPUï¼‰ï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„è¿ç®—å’Œæ§åˆ¶æ ¸å¿ƒï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç‰‡æˆ–å‡ ç‰‡å¤§è§„æ¨¡é›†æˆç”µè·¯ç»„æˆçš„èŠ¯ç‰‡ã€‚å®ƒèƒ½å®Œæˆå–æŒ‡ä»¤ã€æ‰§è¡ŒæŒ‡ä»¤ï¼Œä»¥åŠä¸å¤–ç•Œå­˜å‚¨å™¨å’Œé€»è¾‘éƒ¨ä»¶äº¤æ¢ä¿¡æ¯ç­‰æ“ä½œã€‚è‡ª1971å¹´ç¬¬ä¸€é¢—å¾®å¤„ç†å™¨Intel 4004é—®ä¸–ä»¥æ¥ï¼Œè¿™ä¸€æŠ€æœ¯å½»åº•æ”¹å˜äº†è®¡ç®—è®¾å¤‡çš„é¢è²Œï¼Œä½¿å…¶ä»åºå¤§çš„ä¸“ç”¨æœºå™¨æ¼”å˜ä¸ºæ— å¤„ä¸åœ¨çš„æ™ºèƒ½è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å¾®å¤„ç†å™¨çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†åŠå…¶åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç»„ä»¶&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒåŠŸèƒ½ä¸è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç®—æœ¯é€»è¾‘å•å…ƒ (ALU)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è´Ÿè´£æ‰§è¡Œæ‰€æœ‰æ•°å­¦è¿ç®—ï¼ˆåŠ ã€å‡ã€ä¹˜ã€é™¤ç­‰ï¼‰å’Œé€»è¾‘è¿ç®—ï¼ˆä¸ã€æˆ–ã€éç­‰ï¼‰ï¼Œæ˜¯å¤„ç†å™¨çš„â€œè®¡ç®—ä¸­å¿ƒâ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ§åˆ¶å•å…ƒ (CU)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•´ä¸ªå¤„ç†å™¨çš„â€œæŒ‡æŒ¥ä¸­å¿ƒâ€ï¼Œè´Ÿè´£ä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤ã€è¿›è¡Œè¯‘ç ï¼Œå¹¶æ ¹æ®æŒ‡ä»¤äº§ç”Ÿæ§åˆ¶ä¿¡å·ä»¥åè°ƒå…¶ä»–æ‰€æœ‰éƒ¨ä»¶çš„å·¥ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯„å­˜å™¨ç»„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤„ç†å™¨å†…éƒ¨çš„é«˜é€Ÿå°å‹å­˜å‚¨å•å…ƒï¼Œç”¨äºæš‚å­˜å³å°†å‚ä¸è¿ç®—çš„æ•°æ®ã€ä¸­é—´ç»“æœæˆ–æŒ‡ä»¤åœ°å€ï¼ˆå¦‚ç¨‹åºè®¡æ•°å™¨PCï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€»çº¿ (Bus)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥å¤„ç†å™¨å†…éƒ¨å„éƒ¨ä»¶åŠå¤–éƒ¨è®¾å¤‡çš„å…¬å…±é€šé“ï¼ŒåŒ…æ‹¬ï¼š - &lt;strong&gt;åœ°å€æ€»çº¿&lt;/strong&gt;ï¼šç”¨äºæŒ‡å®šè¦è®¿é—®çš„å†…å­˜æˆ–I/Oè®¾å¤‡çš„ä½ç½®ã€‚ - &lt;strong&gt;æ•°æ®æ€»çº¿&lt;/strong&gt;ï¼šç”¨äºåœ¨å¤„ç†å™¨å’Œå†…å­˜/I/Oè®¾å¤‡ä¹‹é—´åŒå‘ä¼ è¾“æ•°æ®æœ¬èº«ã€‚ - &lt;strong&gt;æ§åˆ¶æ€»çº¿&lt;/strong&gt;ï¼šç”¨äºä¼ é€è¯»ã€å†™ã€æ—¶é’Ÿã€å¤ä½ç­‰æ§åˆ¶ä¿¡å·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†æŒ‡ä»¤çš„å¾ªç¯"&gt;ğŸ’¡ å·¥ä½œåŸç†ï¼šæŒ‡ä»¤çš„å¾ªç¯
&lt;/h3&gt;&lt;p&gt;å¾®å¤„ç†å™¨çš„å·¥ä½œï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒç»­ä¸æ–­çš„â€œ&lt;strong&gt;å–æŒ‡-è¯‘ç -æ‰§è¡Œ&lt;/strong&gt;â€å¾ªç¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å–æŒ‡&lt;/strong&gt;ï¼šæ§åˆ¶å•å…ƒæ ¹æ®ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰æŒ‡å‘çš„åœ°å€ï¼Œä»å†…å­˜ä¸­è¯»å–ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯‘ç &lt;/strong&gt;ï¼šå°†å–æ¥çš„æŒ‡ä»¤ç¿»è¯‘æˆæ§åˆ¶ä¿¡å·ï¼Œæ˜ç¡®å‘Šè¯‰ALUã€å¯„å­˜å™¨ç­‰éƒ¨ä»¶éœ€è¦å®Œæˆä»€ä¹ˆæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ&lt;/strong&gt;ï¼šALUç­‰ç›¸å…³éƒ¨ä»¶æ ¹æ®è¯‘ç ç»“æœæ‰§è¡Œå…·ä½“çš„è¿ç®—ï¼Œæ¯”å¦‚è¿›è¡ŒåŠ æ³•æˆ–ç§»åŠ¨æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†™å›&lt;/strong&gt;ï¼šå°†æ‰§è¡Œçš„ç»“æœå­˜å…¥å¯„å­˜å™¨æˆ–å†™å›å†…å­˜ã€‚å®Œæˆåï¼Œç¨‹åºè®¡æ•°å™¨æ›´æ–°ï¼ŒæŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå¾ªç¯é‡æ–°å¼€å§‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å‘å±•å†ç¨‹ä¸æ¶æ„æ¼”è¿›"&gt;ğŸ“œ å‘å±•å†ç¨‹ä¸æ¶æ„æ¼”è¿›
&lt;/h3&gt;&lt;p&gt;å¾®å¤„ç†å™¨è‡ªè¯ç”Ÿä»¥æ¥ï¼Œå…¶å¤„ç†æ•°æ®çš„å®½åº¦ï¼ˆå­—é•¿ï¼‰å’Œè®¾è®¡å“²å­¦ç»å†äº†æ˜¾è‘—æ¼”å˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—©æœŸé˜¶æ®µï¼ˆ1970å¹´ä»£ï¼‰&lt;/strong&gt;ï¼šä»4ä½çš„Intel 4004åˆ°8ä½çš„8080ï¼Œå¥ å®šäº†åŸºç¡€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PCæ—¶ä»£å¼€å¯ï¼ˆ1978-1985ï¼‰&lt;/strong&gt;ï¼š16ä½çš„8086/8088è¢«ç”¨äºç¬¬ä¸€ä»£IBM PCï¼Œä¸ªäººè®¡ç®—æœºæ—¶ä»£æ¥ä¸´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;32ä½æ—¶ä»£ï¼ˆ1985-2000sï¼‰&lt;/strong&gt;ï¼š80386ã€80486ç­‰32ä½å¤„ç†å™¨å¸¦æ¥äº†æ›´å¼ºçš„å¯»å€å’Œè®¡ç®—èƒ½åŠ›ï¼Œæ”¯æŒæ›´å¤æ‚çš„æ“ä½œç³»ç»Ÿå¦‚Windowsã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¥”è…¾ä¸64ä½æ—¶ä»£ï¼ˆ1990s-è‡³ä»Šï¼‰&lt;/strong&gt;ï¼šå¥”è…¾ï¼ˆPentiumï¼‰ç³»åˆ—å¼•å…¥äº†è¶…æ ‡é‡ã€æµæ°´çº¿ç­‰å…³é”®æŠ€æœ¯ã€‚éšåï¼Œ64ä½å¤„ç†å™¨ï¼ˆå¦‚Intel Coreç³»åˆ—ã€AMD Athlonç³»åˆ—ï¼‰æˆä¸ºä¸»æµï¼Œæä¾›äº†å‰æ‰€æœªæœ‰çš„å¤„ç†èƒ½åŠ›å’Œå·¨å¤§çš„å†…å­˜å¯»å€ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æ¶æ„ä¸Šï¼Œä¸»è¦å½¢æˆäº†ä¸‰ç§è®¾è®¡æ€æƒ³ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¶æ„ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæ€æƒ³&lt;/th&gt;
&lt;th&gt;å…¸å‹ä»£è¡¨ä¸ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CISC (å¤æ‚æŒ‡ä»¤é›†)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡ä»¤ç³»ç»Ÿå¤æ‚ï¼Œå•ä¸ªæŒ‡ä»¤å¯å®Œæˆå¤šé¡¹ä½çº§æ“ä½œã€‚ç¡¬ä»¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†è®¾è®¡å¤æ‚ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Intel x86ç³»åˆ—&lt;/strong&gt;ï¼šå¹¿æ³›åº”ç”¨äºä¸ªäººç”µè„‘å’ŒæœåŠ¡å™¨ï¼Œå‘åå…¼å®¹æ€§å¥½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RISC (ç²¾ç®€æŒ‡ä»¤é›†)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡ä»¤æ ¼å¼è§„æ•´ã€é•¿åº¦å›ºå®šï¼Œè¿½æ±‚ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆä¸€æ¡æŒ‡ä»¤ã€‚é€šè¿‡ç®€åŒ–æŒ‡ä»¤æ¥æå‡æ•ˆç‡å’Œå¹¶è¡Œèƒ½åŠ›ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ARMæ¶æ„&lt;/strong&gt;ï¼šä¸»å¯¼æ™ºèƒ½æ‰‹æœºã€å¹³æ¿ç­‰ç§»åŠ¨è®¾å¤‡å¸‚åœºï¼Œå…·æœ‰é«˜æ€§èƒ½ã€ä½åŠŸè€—çš„ç‰¹ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EPIC (æ˜¾å¼å¹¶è¡ŒæŒ‡ä»¤è®¡ç®—)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†è¯†åˆ«æŒ‡ä»¤é—´å¹¶è¡Œæ€§çš„å·¥ä½œä»ç¡¬ä»¶è½¬ç§»ç»™ç¼–è¯‘å™¨ï¼Œè®©ç¼–è¯‘å™¨æ˜¾å¼åœ°å°†å¯å¹¶è¡Œæ‰§è¡Œçš„æŒ‡ä»¤æ‰“åŒ…ï¼Œäº¤ç”±å¤„ç†å™¨å¹¶å‘æ‰§è¡Œã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Intel Itanium (å®‰è…¾)&lt;/strong&gt;ï¼šä¸»è¦é¢å‘é«˜ç«¯æœåŠ¡å™¨å¸‚åœºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨é¢†åŸŸ"&gt;ğŸ¯ ä¸»è¦åº”ç”¨é¢†åŸŸ
&lt;/h3&gt;&lt;p&gt;æ ¹æ®åº”ç”¨åœºæ™¯çš„ä¸åŒï¼Œå¾®å¤„ç†å™¨ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨é«˜æ€§èƒ½å¾®å¤„ç†å™¨&lt;/strong&gt;ï¼šè¿½æ±‚æè‡´æ€§èƒ½ï¼Œç”¨äºè¿è¡Œé€šç”¨è½¯ä»¶ï¼ˆå¦‚Windows, Linuxï¼‰ï¼Œé…å¤‡å¤æ‚çš„æ“ä½œç³»ç»Ÿã€‚å¸¸è§äºä¸ªäººç”µè„‘ã€å·¥ä½œç«™å’ŒæœåŠ¡å™¨ä¸­çš„CPUã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åµŒå…¥å¼å¾®å¤„ç†å™¨å’Œå¾®æ§åˆ¶å™¨&lt;/strong&gt;ï¼šå¼ºè°ƒå¤„ç†ç‰¹å®šåº”ç”¨é—®é¢˜ï¼Œé€šå¸¸ä¸ç‰¹å®šç¡¬ä»¶æ·±åº¦é›†æˆï¼Œè¿è¡Œè½»é‡çº§æ“ä½œç³»ç»Ÿæˆ–ç›´æ¥æ— æ“ä½œç³»ç»Ÿã€‚å¹¿æ³›åº”ç”¨äº&lt;strong&gt;æ±½è½¦ç”µå­ã€å·¥ä¸šæ§åˆ¶ã€æ™ºèƒ½å®¶ç”µã€ç‰©è”ç½‘è®¾å¤‡&lt;/strong&gt;ç­‰é¢†åŸŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å­—ä¿¡å·å¤„ç†å™¨&lt;/strong&gt;ï¼šä¸“é—¨ä¸ºé«˜æ•ˆå¤„ç†å¤§é‡å®æ—¶æ•°å­—ä¿¡å·ï¼ˆå¦‚éŸ³é¢‘ã€è§†é¢‘ã€é›·è¾¾ä¿¡å·ï¼‰è€Œä¼˜åŒ–ï¼Œå¸¸ç”¨äº&lt;strong&gt;é€šä¿¡è®¾å¤‡ã€å¤šåª’ä½“ç¼–è§£ç &lt;/strong&gt;ç­‰åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€§èƒ½æå‡å…³é”®æŠ€æœ¯"&gt;ğŸš€ æ€§èƒ½æå‡å…³é”®æŠ€æœ¯
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æŒç»­æå‡æ€§èƒ½ï¼Œç°ä»£å¾®å¤„ç†å™¨é‡‡ç”¨äº†å¤šç§å…ˆè¿›æŠ€æœ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµæ°´çº¿æŠ€æœ¯&lt;/strong&gt;ï¼šå°†ä¸€æ¡æŒ‡ä»¤çš„å¤„ç†è¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªé˜¶æ®µï¼ˆå¦‚å–æŒ‡ã€è¯‘ç ã€æ‰§è¡Œã€è®¿å­˜ã€å†™å›ï¼‰ï¼Œè¿™äº›é˜¶æ®µå¯ä»¥åƒå·¥å‚æµæ°´çº¿ä¸€æ ·é‡å è¿›è¡Œï¼Œä»è€Œå¤§å¹…æé«˜æŒ‡ä»¤çš„ååç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶…æ ‡é‡æŠ€æœ¯&lt;/strong&gt;ï¼šå¤„ç†å™¨å†…éƒ¨é›†æˆäº†å¤šä¸ªæ‰§è¡Œå•å…ƒï¼ˆå¦‚å¤šä¸ªALUï¼‰ï¼Œå…è®¸åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…åŒæ—¶å‘å°„å¹¶æ‰§è¡Œå¤šæ¡æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ ¸æ¶æ„&lt;/strong&gt;ï¼šå°†ä¸¤ä¸ªæˆ–å¤šä¸ªå®Œæ•´çš„å¤„ç†å™¨æ ¸å¿ƒé›†æˆåœ¨åŒä¸€å—èŠ¯ç‰‡ä¸Šï¼Œä½¿å…¶èƒ½å¤ŸçœŸæ­£å¹¶è¡Œåœ°å¤„ç†å¤šä¸ªä»»åŠ¡ï¼ˆçº¿ç¨‹ï¼‰ï¼Œæå¤§åœ°æå‡äº†æ•´ä½“è®¡ç®—èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢äº†è§£å¾®å¤„ç†å™¨ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç±»å‹æˆ–æ¶æ„çš„å¾®å¤„ç†å™¨ï¼ˆå¦‚ARMåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æˆåŠŸï¼‰æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item></channel></rss>