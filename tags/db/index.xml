<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DB on é£é¸¿è¸é›ªæ³¥</title><link>https://dyhes.github.io/tags/db/</link><description>Recent content in DB on é£é¸¿è¸é›ªæ³¥</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 20 Oct 2025 22:07:04 +0800</lastBuildDate><atom:link href="https://dyhes.github.io/tags/db/index.xml" rel="self" type="application/rss+xml"/><item><title>ã€NowCoderã€‘DB</title><link>https://dyhes.github.io/p/nowcoderdb/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderdb/</guid><description>&lt;h2 id="insert-overwrite"&gt;INSERT OVERWRITE
&lt;/h2&gt;&lt;p&gt;INSERT OVERWRITE æ˜¯ Hive SQL ä¸­ç”¨äº&lt;strong&gt;è¦†ç›–å†™å…¥&lt;/strong&gt;æ•°æ®çš„å…³é”®æ“ä½œã€‚å®ƒä¼šå…ˆåˆ é™¤ç›®æ ‡è¡¨æˆ–æŒ‡å®šåˆ†åŒºä¸­çš„ç°æœ‰æ•°æ®ï¼Œç„¶åå†æ’å…¥æ–°çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯å…³äº INSERT OVERWRITE çš„è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µ"&gt;âœ¨ æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE æ˜¯ä¸€ç§æ•°æ®å†™å…¥æ“ä½œï¼Œå…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯&lt;strong&gt;å…ˆåˆ é™¤åå†™å…¥&lt;/strong&gt;ã€‚å½“æ‰§è¡Œè¯¥è¯­å¥æ—¶ï¼ŒHive ä¼šé¦–å…ˆæ¸…é™¤ç›®æ ‡è¡¨æˆ–æŒ‡å®šåˆ†åŒºä¸­çš„æ‰€æœ‰ç°æœ‰æ•°æ®ï¼Œç„¶åå°†æ–°æ•°æ®æ’å…¥å…¶ä¸­ã€‚è¿™æ„å‘³ç€æ“ä½œå®Œæˆåï¼Œç›®æ ‡è¡¨æˆ–åˆ†åŒºä¸­å°†åªåŒ…å«æ–°æ’å…¥çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•å½¢å¼"&gt;ğŸ“ åŸºæœ¬è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE çš„è¯­æ³•æ ¹æ®ä¸åŒåœºæ™¯æœ‰æ‰€å˜åŒ–ï¼š&lt;/p&gt;
&lt;h4 id="1-è¦†ç›–æ•´ä¸ªéåˆ†åŒºè¡¨"&gt;1. è¦†ç›–æ•´ä¸ªéåˆ†åŒºè¡¨
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT OVERWRITE TABLE target_table
SELECT * FROM source_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§å½¢å¼ä¼š&lt;strong&gt;å®Œå…¨æ›¿æ¢&lt;/strong&gt; &lt;code&gt;target_table&lt;/code&gt;ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚&lt;/p&gt;
&lt;h4 id="2-è¦†ç›–åˆ†åŒºè¡¨çš„ç‰¹å®šåˆ†åŒºé™æ€åˆ†åŒº"&gt;2. è¦†ç›–åˆ†åŒºè¡¨çš„ç‰¹å®šåˆ†åŒºï¼ˆé™æ€åˆ†åŒºï¼‰
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT OVERWRITE TABLE target_table PARTITION (dt=&amp;#39;20250908&amp;#39;)
SELECT * FROM source_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™åªä¼šè¦†ç›– &lt;code&gt;target_table&lt;/code&gt;ä¸­ &lt;code&gt;dt='20250908'&lt;/code&gt;è¿™ä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œè€Œå…¶ä»–åˆ†åŒºçš„æ•°æ®ä¿æŒä¸å˜ã€‚&lt;/p&gt;
&lt;h4 id="3-åŠ¨æ€åˆ†åŒºè¦†ç›–"&gt;3. åŠ¨æ€åˆ†åŒºè¦†ç›–
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SET hive.exec.dynamic.partition=true;
SET hive.exec.dynamic.partition.mode=nonstrict;
INSERT OVERWRITE TABLE target_table PARTITION (department)
SELECT id, name, department FROM source_table;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ç§æ–¹å¼æ ¹æ®æŸ¥è¯¢ç»“æœè‡ªåŠ¨ç¡®å®šè¦è¦†ç›–çš„åˆ†åŒºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨åŠ¨æ€åˆ†åŒºä¸­ï¼Œ&lt;strong&gt;é™æ€åˆ†åŒºå¿…é¡»ä½äºåŠ¨æ€åˆ†åŒºä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œåŸç†ä¸ç¤ºä¾‹"&gt;ğŸ” å·¥ä½œåŸç†ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„å‘˜å·¥è¡¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE employee (
id INT,
name STRING,
department STRING
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆå§‹æ’å…¥ä¸€äº›æ•°æ®åï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO TABLE employee VALUES
(1, &amp;#39;Alice&amp;#39;, &amp;#39;HR&amp;#39;),
(2, &amp;#39;Bob&amp;#39;, &amp;#39;Engineering&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œè¦†ç›–æ“ä½œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT OVERWRITE TABLE employee
SELECT 3, &amp;#39;Charlie&amp;#39;, &amp;#39;Marketing&amp;#39;
UNION ALL
SELECT 4, &amp;#39;David&amp;#39;, &amp;#39;Sales&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œåï¼Œemployee è¡¨ä¸­çš„æ•°æ®å°†å˜ä¸ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;| id | name | department |
|----|---------|------------|
| 3 | Charlie | Marketing |
| 4 | David | Sales |
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŸæœ‰çš„æ•°æ®ï¼ˆAlice å’Œ Bobï¼‰å·²è¢«å®Œå…¨åˆ é™¤å’Œæ›¿æ¢ã€‚&lt;/p&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å…¨é‡æ›´æ–°&lt;/strong&gt;ï¼šéœ€è¦å®šæœŸåˆ·æ–°æ•´ä¸ªæ•°æ®é›†ï¼Œå¦‚æ¯æ—¥å…¨é‡ç”¨æˆ·ç”»åƒè¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é‡è½½&lt;/strong&gt;ï¼šé‡æ–°åŠ è½½è¡¨ä¸­çš„æ•°æ®ï¼Œå¸¸è§äºæ•°æ®ä»“åº“æˆ–æ•°æ®åˆ†æä»»åŠ¡ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¸…ç†&lt;/strong&gt;ï¼šé€šè¿‡è¦†ç›–ä¸€ä¸ªç©ºè¡¨æ¥æ¸…ç©ºç›®æ ‡è¡¨ä¸­çš„æ•°æ®å¹¶é‡Šæ”¾å­˜å‚¨ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºç®¡ç†&lt;/strong&gt;ï¼šé’ˆå¯¹åˆ†åŒºè¡¨ä¸­çš„ç‰¹å®šåˆ†åŒºè¿›è¡Œæ•°æ®æ›´æ–°ï¼Œå®ç°æ›´ç²¾ç»†åŒ–çš„æ•°æ®ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸¢å¤±é£é™©&lt;/strong&gt;ï¼šINSERT OVERWRITE æ˜¯&lt;strong&gt;ç ´åæ€§æ“ä½œ&lt;/strong&gt;ï¼Œä¼šæ°¸ä¹…åˆ é™¤ç›®æ ‡è¡¨æˆ–åˆ†åŒºä¸­çš„ç°æœ‰æ•°æ®ã€‚æ‰§è¡Œå‰åŠ¡å¿…&lt;strong&gt;ç¡®è®¤æ“ä½œæ„å›¾&lt;/strong&gt;ï¼Œå¹¶å¯¹é‡è¦æ•°æ®è¿›è¡Œ&lt;strong&gt;å¤‡ä»½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æ„ä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¡®ä¿ SELECT æŸ¥è¯¢è¿”å›çš„&lt;strong&gt;åˆ—æ•°ã€åˆ—é¡ºåºå’Œæ•°æ®ç±»å‹&lt;/strong&gt;ä¸ç›®æ ‡è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰çš„å®šä¹‰å®Œå…¨åŒ¹é…ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šå¯¹äºå¤§è§„æ¨¡æ•°æ®é›†ï¼Œè¦†ç›–æ“ä½œå¯èƒ½æ¶ˆè€—å¤§é‡è®¡ç®—èµ„æºå’Œæ—¶é—´ã€‚å»ºè®®åœ¨ç³»ç»Ÿè´Ÿè½½è¾ƒä½æ—¶æ‰§è¡Œæ­¤ç±»æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å¤„ç†&lt;/strong&gt;ï¼šåœ¨æ”¯æŒäº‹åŠ¡çš„ Hive è¡¨ä¸­ï¼Œç¡®ä¿æ“ä½œåœ¨åˆç†çš„äº‹åŠ¡èŒƒå›´å†…è¿›è¡Œï¼Œä»¥ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–å†™å…¥æ–¹å¼çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–å†™å…¥æ–¹å¼çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;Hive ä¸»è¦æä¾›äº†å››ç§æ•°æ®å†™å…¥æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å†™å…¥æ–¹å¼&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;INSERT OVERWRITE TABLE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¦†ç›–æ—§æ•°æ®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨é‡æ•°æ®æ›´æ–°ï¼ˆå¦‚æ¯æ—¥å¿«ç…§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INSERT INTO TABLE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿½åŠ æ–°æ•°æ®&lt;/td&gt;
&lt;td&gt;å¢é‡æ•°æ®ï¼ˆå¦‚æ—¥å¿—ã€æµæ°´ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INSERT OVERWRITE DIRECTORY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯¼å‡ºæ•°æ®åˆ°æ–‡ä»¶ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;æ•°æ®å¤‡ä»½ã€æä¾›ç»™å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CREATE TABLE AS SELECT&lt;/code&gt;(CTAS)&lt;/td&gt;
&lt;td&gt;åˆ›å»ºæ–°è¡¨å¹¶å†™å…¥æ•°æ®&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶åˆ†æè¡¨ã€ETL ä¸­é—´è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;INSERT OVERWRITE æ˜¯ Hive ä¸­ä¸€ä¸ªå¼ºå¤§ä½†éœ€è¦è°¨æ…ä½¿ç”¨çš„åŠŸèƒ½ï¼Œå®ƒé€šè¿‡&lt;strong&gt;å…ˆåˆ é™¤åæ’å…¥&lt;/strong&gt;çš„æœºåˆ¶å®ç°æ•°æ®çš„å…¨é‡è¦†ç›–ã€‚å®ƒéå¸¸é€‚åˆäº&lt;strong&gt;å®šæœŸå…¨é‡æ›´æ–°æ•°æ®&lt;/strong&gt;ã€&lt;strong&gt;ç»´æŠ¤æœ€æ–°æ•°æ®å¿«ç…§&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;ç®¡ç†åˆ†åŒºæ•°æ®&lt;/strong&gt;çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ—¶æœ€å…³é”®çš„æ˜¯è¦&lt;strong&gt;æ—¶åˆ»æ„è¯†åˆ°å…¶ç ´åæ€§&lt;/strong&gt;ï¼Œæ˜ç¡®æ“ä½œèŒƒå›´ï¼ˆæ•´è¡¨è¿˜æ˜¯ç‰¹å®šåˆ†åŒºï¼‰ï¼Œå¹¶ç¡®ä¿æ•°æ®ç»“æ„çš„ä¸€è‡´æ€§ã€‚åˆç†åˆ©ç”¨ INSERT OVERWRITE å¯ä»¥æœ‰æ•ˆç®¡ç†æ•°æ®ï¼Œä½†ç–å¿½ä¹Ÿå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ INSERT OVERWRITEã€‚&lt;/p&gt;
&lt;h2 id="å¢åˆ æ”¹æŸ¥"&gt;å¢åˆ æ”¹æŸ¥
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰æ“ä½œæ˜¯ä¸æ•°æ®åº“äº¤äº’çš„åŸºç¡€ã€‚ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ±‡æ€»å…¶æ ¸å¿ƒè¯­æ³•å’Œè¦ç‚¹ï¼Œå¹¶é™„ä¸Šè¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ï¼ŒåŠ©ä½ å¿«é€ŸæŒæ¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œ&lt;/th&gt;
&lt;th&gt;å…³é”®å­—&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒè¯­æ³•&lt;/th&gt;
&lt;th&gt;å…³é”®ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¢ (Create)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSERT INTO&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSERT INTO è¡¨å (åˆ—1, åˆ—2, ...) VALUES (å€¼1, å€¼2, ...);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;éœ€æŒ‡å®šåˆ—å’Œå€¼ï¼Œæ”¯æŒæ‰¹é‡æ’å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ  (Delete)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DELETE FROM&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DELETE FROM è¡¨å [WHERE æ¡ä»¶];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¡å¿…è°¨æ…ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½æ¸…ç©ºå…¨è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¹ (Update)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE è¡¨å SET åˆ—1=å€¼1, åˆ—2=å€¼2 [WHERE æ¡ä»¶];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¡å¿…è°¨æ…ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šæ›´æ–°å…¨è¡¨æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥ (Retrieve)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT åˆ—1, åˆ—2 FROM è¡¨å [WHERE æ¡ä»¶];&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯ä½¿ç”¨ &lt;code&gt;*&lt;/code&gt;æŸ¥è¯¢æ‰€æœ‰åˆ—ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;ç”¨äºè¿‡æ»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ¯ä¸ªæ“ä½œçš„è¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;h3 id="-å¢insert"&gt;ğŸ“Œ å¢ï¼ˆINSERTï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;INSERT&lt;/code&gt;è¯­å¥ç”¨äºå‘è¡¨ä¸­æ·»åŠ æ–°è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœæ‰“ç®—ä¸ºè¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½æ·»åŠ å€¼ï¼Œå¯ä»¥çœç•¥åˆ—åï¼Œä½†å€¼çš„é¡ºåºå¿…é¡»ä¸è¡¨ä¸­çš„åˆ—é¡ºåºå®Œå…¨ä¸€è‡´ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO table_name
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå‘ &lt;code&gt;users&lt;/code&gt;è¡¨æ’å…¥ä¸€æ¡æ–°è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (name, age, email)
VALUES (&amp;#39;å¼ ä¸‰&amp;#39;, 25, &amp;#39;zhangsan@example.com&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹é‡æ’å…¥&lt;/strong&gt;ï¼šä¸€æ¡è¯­å¥æ’å…¥å¤šè¡Œæ•°æ®ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (name, age, email)
VALUES
(&amp;#39;æå››&amp;#39;, 30, &amp;#39;lisi@example.com&amp;#39;),
(&amp;#39;ç‹äº”&amp;#39;, 28, &amp;#39;wangwu@example.com&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åˆ delete"&gt;âŒ åˆ ï¼ˆDELETEï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;DELETE&lt;/code&gt;è¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­çš„è®°å½•ã€‚&lt;strong&gt;è¯·åŠ¡å¿…è°¨æ…ä½¿ç”¨ï¼Œå°¤å…¶æ³¨æ„ &lt;code&gt;WHERE&lt;/code&gt;å­å¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DELETE FROM table_name [WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šåˆ é™¤ &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ &lt;code&gt;name&lt;/code&gt;ä¸º &amp;lsquo;å¼ ä¸‰&amp;rsquo; çš„è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DELETE FROM users WHERE name = &amp;#39;å¼ ä¸‰&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¸…ç©ºè¡¨&lt;/strong&gt;ï¼šå¦‚éœ€æ¸…ç©ºæ•´ä¸ªè¡¨çš„æ•°æ®ï¼ˆåˆ é™¤æ‰€æœ‰è¡Œï¼Œä½†ä¿ç•™è¡¨ç»“æ„ï¼‰ï¼Œå¯ä»¥ä¸ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DELETE FROM table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„ &lt;code&gt;TRUNCATE TABLE&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;TRUNCATE TABLE table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;TRUNCATE&lt;/code&gt;ä¸ä»…åˆ é™¤æ•°æ®ï¼Œè¿˜ä¼šé‡ç½®è¡¨çš„è‡ªå¢è®¡æ•°å™¨ï¼Œä¸”æ“ä½œé€šå¸¸ä¸å¯å›æ»š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ”¹update"&gt;ğŸ”„ æ”¹ï¼ˆUPDATEï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ç”¨äºä¿®æ”¹è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚&lt;strong&gt;åŒæ ·ï¼Œè¯·åŠ¡å¿…è°¨æ…ä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE table_name
SET column1 = value1, column2 = value2, ...
[WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°† &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ &lt;code&gt;name&lt;/code&gt;ä¸º &amp;lsquo;æå››&amp;rsquo; çš„è®°å½•çš„ &lt;code&gt;age&lt;/code&gt;æ›´æ–°ä¸º 31ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE users SET age = 31 WHERE name = &amp;#39;æå››&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–°å¤šåˆ—&lt;/strong&gt;ï¼šåŒæ—¶æ›´æ–°å¤šä¸ªå­—æ®µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE users
SET age = 31, email = &amp;#39;new_lisi@example.com&amp;#39;
WHERE name = &amp;#39;æå››&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æŸ¥select"&gt;ğŸ” æŸ¥ï¼ˆSELECTï¼‰
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥ç”¨äºä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ï¼Œæ˜¯å…¶ä¸­æœ€å¤æ‚ä¹Ÿæœ€å¸¸ç”¨çš„æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column1, column2, ...
FROM table_name
[WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;*&lt;/code&gt;é€šé…ç¬¦å¯ä»¥é€‰æ‹©æ‰€æœ‰åˆ—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹æŸ¥è¯¢&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥è¯¢ users è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®
SELECT * FROM users;
-- æŸ¥è¯¢ users è¡¨ä¸­ age å¤§äº 25 çš„æ‰€æœ‰ç”¨æˆ·çš„ name å’Œ email
SELECT name, email FROM users WHERE age &amp;gt; 25;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨å­å¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;WHERE&lt;/code&gt;&lt;/strong&gt;: è¿‡æ»¤è®°å½•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE name LIKE &amp;#39;å¼ %&amp;#39;; -- æŸ¥è¯¢å§“å¼ çš„ç”¨æˆ·
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;: å¯¹ç»“æœé›†æ’åºï¼ˆ&lt;code&gt;ASC&lt;/code&gt;å‡åºï¼ˆé»˜è®¤ï¼‰ï¼Œ&lt;code&gt;DESC&lt;/code&gt;é™åºï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users ORDER BY age DESC; -- æŒ‰å¹´é¾„é™åºæ’åˆ—
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LIMIT&lt;/code&gt;&lt;/strong&gt;: é™åˆ¶è¿”å›çš„è®°å½•æ•°ï¼Œå¸¸ç”¨äºåˆ†é¡µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users LIMIT 5; -- è¿”å›å‰5æ¡è®°å½•
SELECT * FROM users LIMIT 5, 10; -- ä»ç¬¬6æ¡è®°å½•å¼€å§‹ï¼ˆè·³è¿‡5æ¡ï¼‰ï¼Œè¿”å›10æ¡è®°å½•
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;&lt;/strong&gt;: ç»“åˆèšåˆå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;AVG&lt;/code&gt;ï¼‰ï¼Œç”¨äºå°†æ•°æ®æŒ‰æŸäº›åˆ—åˆ†ç»„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS employee_count
FROM employees
GROUP BY department; -- ç»Ÿè®¡æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥æ•°é‡
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;HAVING&lt;/code&gt;&lt;/strong&gt;: å¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS employee_count
FROM employees
GROUP BY department
HAVING COUNT(*) &amp;gt; 5; -- åªæ˜¾ç¤ºå‘˜å·¥æ•°é‡å¤§äº5çš„éƒ¨é—¨
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¡ä»¶å­å¥ (&lt;code&gt;WHERE&lt;/code&gt;) æ˜¯å®‰å…¨ç»³&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œ &lt;code&gt;UPDATE&lt;/code&gt;å’Œ &lt;code&gt;DELETE&lt;/code&gt;æ“ä½œæ—¶ï¼Œ&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä»”ç»†æ£€æŸ¥ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ã€‚é—æ¼ &lt;code&gt;WHERE&lt;/code&gt;å­å¥å°†å¯¼è‡´æ“ä½œåº”ç”¨äºè¡¨ä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;è®°å½•ï¼Œå¯èƒ½é€ æˆæ— æ³•æŒ½å›çš„æ•°æ®ä¸¢å¤±æˆ–é”™è¯¯æ›´æ–°ã€‚ä¸€ä¸ªå¥½ä¹ æƒ¯æ˜¯ï¼Œå…ˆä½¿ç”¨ &lt;code&gt;SELECT&lt;/code&gt;è¯­å¥å’Œç›¸åŒçš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ç¡®è®¤ç›®æ ‡æ•°æ®ï¼Œç„¶åå†æ‰§è¡Œå†™æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜²èŒƒ SQL æ³¨å…¥&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ç¼–å†™ SQL æ—¶ï¼Œ&lt;strong&gt;ç»å¯¹ä¸è¦&lt;/strong&gt;ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å°†ç”¨æˆ·è¾“å…¥ç›´æ¥åµŒå…¥ SQL è¯­å¥ã€‚åº”å§‹ç»ˆä½¿ç”¨&lt;strong&gt;å‚æ•°åŒ–æŸ¥è¯¢&lt;/strong&gt;ï¼ˆPrepared Statementsï¼‰æ¥ä»æ ¹æœ¬ä¸Šé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡å¤„ç†&lt;/strong&gt;ï¼šå¯¹äºå¤šä¸ªç›¸å…³è”çš„å†™æ“ä½œï¼ˆä¾‹å¦‚å…ˆåˆ é™¤Aå†æ’å…¥Bï¼‰ï¼Œå»ºè®®ä½¿ç”¨&lt;strong&gt;äº‹åŠ¡&lt;/strong&gt;æ¥ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œè¿™æ ·å¯ä»¥ç»´æŠ¤æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;START TRANSACTION;
DELETE FROM orders WHERE user_id = 1001;
INSERT INTO order_logs (user_id, action) VALUES (1001, &amp;#39;Deleted orders&amp;#39;);
COMMIT; -- å¦‚æœä¸­é—´å‡ºé”™ï¼Œå¯ä»¥æ‰§è¡Œ ROLLBACK å›æ»š
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æŒæ¡è¿™äº›åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥è¯­æ³•ï¼Œæ˜¯ä½ å¼€å§‹ä½¿ç”¨ MySQL è¿›è¡Œæ•°æ®æ“ä½œçš„å…³é”®ç¬¬ä¸€æ­¥ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQLã€‚åœ¨å®é™…æ“ä½œä¸­ï¼ŒåŠ¡å¿…è°¨æ…å°å¿ƒï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œä¿®æ”¹å’Œåˆ é™¤æ“ä½œæ—¶ã€‚&lt;/p&gt;
&lt;h2 id="é‡å¤æ’å…¥"&gt;é‡å¤æ’å…¥
&lt;/h2&gt;&lt;p&gt;äº†è§£ MySQL ä¸­å¦‚ä½•å¤„ç†æ’å…¥æ—¶å¯èƒ½å‡ºç°çš„é‡å¤æ•°æ®å†²çªéå¸¸é‡è¦ã€‚&lt;code&gt;REPLACE INTO&lt;/code&gt;å’Œ &lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;æ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œå®ƒä»¬éƒ½èƒ½å¤„ç†å†²çªï¼Œä½†è¡Œä¸ºå’Œé€‚ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒã€‚æˆ‘ä¼šä¸ºä½ è¯¦ç»†è§£é‡Šå®ƒä»¬ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ"&gt;âœ¨ æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ
&lt;/h3&gt;&lt;p&gt;MySQL æä¾›äº†ä¸¤ç§å¼ºå¤§çš„è¯­å¥æ¥å¤„ç†æ’å…¥æ•°æ®æ—¶å¯èƒ½é‡åˆ°çš„ä¸»é”®æˆ–å”¯ä¸€é”®å†²çªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;/strong&gt;ï¼šé‡‡ç”¨&amp;quot;&lt;strong&gt;å…ˆåˆ é™¤å†æ’å…¥&lt;/strong&gt;&amp;ldquo;çš„ç­–ç•¥ã€‚å‘ç°å†²çªæ—¶ï¼Œå®ƒä¼š&lt;strong&gt;å…ˆåˆ é™¤&lt;/strong&gt;å·²å­˜åœ¨çš„å†²çªè®°å½•ï¼Œç„¶å&lt;strong&gt;æ’å…¥&lt;/strong&gt;æ–°è®°å½•ã€‚è¿™æ˜¯ä¸€ä¸ª&lt;strong&gt;ç ´åæ€§&lt;/strong&gt;ç›¸å¯¹è¾ƒå¤§çš„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;/strong&gt;ï¼šé‡‡ç”¨&amp;rdquo;&lt;strong&gt;å°è¯•æ’å…¥ï¼Œå†²çªåˆ™æ›´æ–°&lt;/strong&gt;&amp;ldquo;çš„ç­–ç•¥ã€‚å‘ç°å†²çªæ—¶ï¼Œå®ƒä¼šåœ¨&lt;strong&gt;åŸæœ‰è®°å½•çš„åŸºç¡€ä¸Š&lt;/strong&gt;ç›´æ¥&lt;strong&gt;æ›´æ–°&lt;/strong&gt;æŒ‡å®šçš„å­—æ®µï¼Œæ˜¯ä¸€ç§&lt;strong&gt;éç ´åæ€§&lt;/strong&gt;çš„æ›´æ–°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼å¿«é€Ÿå¯¹æ¯”äº†å®ƒä»¬çš„ä¸»è¦ç‰¹æ€§ï¼Œå¸®åŠ©ä½ å½¢æˆåˆæ­¥å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒé€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†²çªæ—¶&lt;strong&gt;æ›´æ–°&lt;/strong&gt;ç°æœ‰è®°å½•&lt;/td&gt;
&lt;td&gt;å†²çªæ—¶&lt;strong&gt;å…ˆåˆ é™¤å†æ’å…¥&lt;/strong&gt;æ–°è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯¹åŸæœ‰æ•°æ®çš„å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªæ›´æ–°æ˜ç¡®æŒ‡å®šçš„åˆ—ï¼Œå…¶ä»–åˆ—å€¼&lt;strong&gt;ä¿ç•™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®Œå…¨æ›¿æ¢&lt;/strong&gt;æ•´è¡Œï¼ŒæœªæŒ‡å®šçš„åˆ—è¢«è®¾ç½®ä¸º&lt;strong&gt;é»˜è®¤å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œçš„æ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 æ¬¡ &lt;code&gt;INSERT&lt;/code&gt;&lt;strong&gt;æˆ–&lt;/strong&gt; 1 æ¬¡ &lt;code&gt;UPDATE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1 æ¬¡ &lt;code&gt;DELETE&lt;/code&gt;&lt;strong&gt;åŠ &lt;/strong&gt; 1 æ¬¡ &lt;code&gt;INSERT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è§¦å‘ &lt;code&gt;INSERT&lt;/code&gt;æˆ– &lt;code&gt;UPDATE&lt;/code&gt;è§¦å‘å™¨&lt;/td&gt;
&lt;td&gt;è§¦å‘ &lt;code&gt;DELETE&lt;/code&gt;å’Œ &lt;code&gt;INSERT&lt;/code&gt;è§¦å‘å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå¢ID (AUTO_INCREMENT)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¿æŒä¸å˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯èƒ½ä¼šå˜åŒ–&lt;/strong&gt;ï¼ˆæ–°è®°å½•ä¼šåˆ†é…æ–°çš„è‡ªå¢IDï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸&lt;strong&gt;æ›´é«˜æ•ˆ&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯è¡¨æœ‰å¤šä¸ªç´¢å¼•æ—¶&lt;/td&gt;
&lt;td&gt;åˆ é™¤å’Œæ’å…¥æ“ä½œå¯èƒ½å¯¼è‡´&lt;strong&gt;æ›´å¤šå¼€é”€&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼ï¼ˆå½±å“è¡Œæ•°ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥æ–°è¡Œï¼š&lt;strong&gt;1&lt;/strong&gt;ï¼›æ›´æ–°å·²æœ‰è¡Œï¼š&lt;strong&gt;2&lt;/strong&gt;ï¼›æ›´æ–°ä½†å€¼æ— å˜åŒ–ï¼š&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥æ–°è¡Œï¼š&lt;strong&gt;1&lt;/strong&gt;ï¼›æ›¿æ¢å·²æœ‰è¡Œï¼š&lt;strong&gt;2&lt;/strong&gt; (1åˆ é™¤ + 1æ’å…¥)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è¯¦è§£-replace-into"&gt;ğŸ“˜ è¯¦è§£ REPLACE INTO
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;æ˜¯ MySQL çš„ä¸€ä¸ªæ‰©å±•åŠŸèƒ½ï¼Œå…¶å·¥ä½œæ–¹å¼éå¸¸ç›´æ¥ï¼šæœ‰å†²çªå°±æ›¿æ¢ï¼Œæ²¡å†²çªå°±æ’å…¥ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•å½¢å¼"&gt;ğŸ”§ è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;REPLACE INTO&lt;/code&gt;æœ‰ä¸‰ç§å¸¸ç”¨çš„è¯­æ³•å½¢å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŒ‡å®šåˆ—åå’Œå€¼&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REPLACE INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ SET å­å¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REPLACE INTO table_name
SET column1 = value1, column2 = value2, column3 = value3, ...;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»å…¶ä»–è¡¨æŸ¥è¯¢æ’å…¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;REPLACE INTO table_name (column1, column2, ...)
SELECT column1, column2, ...
FROM another_table
WHERE ...;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å·¥ä½œåŸç†"&gt;âš™ï¸ å·¥ä½œåŸç†
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;MySQL å°è¯•æ‰§è¡Œä¸€ä¸ªæ™®é€šçš„ &lt;code&gt;INSERT&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ–°æ•°æ®ä¸ç°æœ‰è®°å½•çš„&lt;strong&gt;ä¸»é”®&lt;/strong&gt;æˆ–&lt;strong&gt;å”¯ä¸€ç´¢å¼•&lt;/strong&gt;å†²çªï¼š
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“ä¼š&lt;strong&gt;å…ˆåˆ é™¤&lt;/strong&gt;å·²æœ‰çš„é‚£æ¡å†²çªè®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶å&lt;strong&gt;å†æ’å…¥&lt;/strong&gt;æ–°çš„è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰å‘ç”Ÿä»»ä½•å†²çªï¼Œåˆ™ç›´æ¥æ’å…¥æ–°è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;ï¼šå¯ä»¥å°†å…¶ç†è§£ä¸º &lt;code&gt;DELETE FROM ... WHERE ...&lt;/code&gt;ï¼ˆåˆ é™¤å†²çªè¡Œï¼‰å’Œ &lt;code&gt;INSERT INTO ...&lt;/code&gt;ï¼ˆæ’å…¥æ–°è¡Œï¼‰ä¸¤ä¸ªæ“ä½œçš„ç»„åˆã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿…éœ€çš„å”¯ä¸€çº¦æŸ&lt;/strong&gt;ï¼š&lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;strong&gt;åªæœ‰åœ¨è¡¨å­˜åœ¨ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ—¶æ‰æœ‰æ„ä¹‰&lt;/strong&gt;ã€‚å¦åˆ™ï¼Œå®ƒçš„è¡Œä¸ºå°±å’Œæ™®é€š &lt;code&gt;INSERT&lt;/code&gt;ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´é‡å¤æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸¢å¤±é£é™©&lt;/strong&gt;ï¼šç”±äºå®ƒä¼š&lt;strong&gt;ç›´æ¥åˆ é™¤&lt;/strong&gt;æ•´æ¡æ—§è®°å½•ï¼Œæ‰€ä»¥å¦‚æœæ–°è®°å½•ä¸­æ²¡æœ‰åŒ…å«æ—§è®°å½•çš„æ‰€æœ‰å­—æ®µï¼Œé‚£äº›æœªæŒ‡å®šçš„å­—æ®µå°±ä¼šè¢«è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆå¦‚ NULLï¼‰ï¼Œ&lt;strong&gt;é€ æˆæ•°æ®ä¸¢å¤±&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå¢IDå˜åŒ–&lt;/strong&gt;ï¼šå¦‚æœè¡¨æœ‰è‡ªå¢ä¸»é”®ï¼Œæ›¿æ¢æ“ä½œåï¼Œ&lt;strong&gt;æ–°è®°å½•ä¼šè·å¾—ä¸€ä¸ªå…¨æ–°çš„è‡ªå¢ID&lt;/strong&gt;ï¼Œè¿™å¯èƒ½ä¼šç ´åä¸å…¶ä»–è¡¨çš„å¤–é”®å…³è”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;ï¼šæ­¤æ“ä½œä¼šè§¦å‘ &lt;code&gt;DELETE&lt;/code&gt;å’Œ &lt;code&gt;INSERT&lt;/code&gt;è§¦å‘å™¨ï¼Œä½†&lt;strong&gt;ä¸ä¼šè§¦å‘&lt;/strong&gt; &lt;code&gt;UPDATE&lt;/code&gt;è§¦å‘å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯-1"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦å®Œå…¨æ›¿æ¢æ—§è®°å½•&lt;/strong&gt;ï¼Œä¸å…³å¿ƒæ—§æ•°æ®çš„å…¶ä»–å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¯¼å…¥æˆ–æ‰¹é‡å¤„ç†&lt;/strong&gt;ï¼Œç¡®ä¿æœ€ç»ˆæ•°æ®æ˜¯æŒ‡å®šçš„ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;æ“ä½œé€»è¾‘ç®€å•ï¼Œ&lt;strong&gt;ä¸éœ€è¦ä¿ç•™ä»»ä½•å†å²å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-è¯¦è§£-insert--on-duplicate-key-update-odku"&gt;ğŸ“— è¯¦è§£ INSERT &amp;hellip; ON DUPLICATE KEY UPDATE (ODKU)
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªè¯­å¥æä¾›äº†æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚å®ƒçš„ç­–ç•¥æ˜¯ï¼šèƒ½æ’å…¥å°±æ’å…¥ï¼Œä¸èƒ½æ’å…¥å°±æ›´æ–°ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•å½¢å¼-1"&gt;ğŸ”§ è¯­æ³•å½¢å¼
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...)
ON DUPLICATE KEY UPDATE
column1 = value1,
column2 = value2,
...;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;é«˜çº§æŠ€å·§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;VALUES()&lt;/code&gt;å‡½æ•°å¼•ç”¨åŸè®¡åˆ’æ’å…¥çš„å€¼ï¼Œéå¸¸é€‚ç”¨äºå¢é‡æ“ä½œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO page_views (page_id, view_count)
VALUES (101, 1)
ON DUPLICATE KEY UPDATE
view_count = view_count + VALUES(view_count); -- å†²çªæ—¶ view_count = view_count + 1
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒæ¡ä»¶æ›´æ–°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO products (id, price)
VALUES (1, 150)
ON DUPLICATE KEY UPDATE
price = IF(VALUES(price) &amp;gt; price, VALUES(price), price); -- ä»…å½“æ–°ä»·æ ¼æ›´é«˜æ—¶æ›´æ–°
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å·¥ä½œåŸç†-1"&gt;âš™ï¸ å·¥ä½œåŸç†
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;MySQL å°è¯•æ‰§è¡Œä¸€ä¸ªæ™®é€šçš„ &lt;code&gt;INSERT&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ–°æ•°æ®ä¸ç°æœ‰è®°å½•çš„&lt;strong&gt;ä¸»é”®&lt;/strong&gt;æˆ–&lt;strong&gt;å”¯ä¸€ç´¢å¼•&lt;/strong&gt;å†²çªï¼š
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“&lt;strong&gt;ä¸ä¼šåˆ é™¤&lt;/strong&gt;æ—§è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;è€Œæ˜¯æ‰§è¡Œ &lt;code&gt;UPDATE&lt;/code&gt;å­å¥ï¼Œ&lt;strong&gt;ä»…ä¿®æ”¹&lt;/strong&gt;ä½ æ˜ç¡®æŒ‡å®šçš„é‚£äº›åˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰å‘ç”Ÿä»»ä½•å†²çªï¼Œåˆ™ç›´æ¥æ’å…¥æ–°è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æœ¬è´¨&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸€ä¸ª&lt;strong&gt;åŸå­æ“ä½œ&lt;/strong&gt;ï¼Œè¦ä¹ˆæ’å…¥ï¼Œè¦ä¹ˆæ›´æ–°ï¼Œé¿å…äº†å…ˆæŸ¥è¯¢ååˆ¤æ–­å¯èƒ½äº§ç”Ÿçš„ç«æ€æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¿…éœ€çš„å”¯ä¸€çº¦æŸ&lt;/strong&gt;ï¼šå’Œ &lt;code&gt;REPLACE INTO&lt;/code&gt;ä¸€æ ·ï¼Œ&lt;strong&gt;éœ€è¦ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ‰èƒ½è§¦å‘æ›´æ–°è¡Œä¸º&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨åˆ†æ›´æ–°&lt;/strong&gt;ï¼šä½ å¯ä»¥&lt;strong&gt;åªæ›´æ–°éœ€è¦æ”¹å˜çš„å­—æ®µ&lt;/strong&gt;ï¼Œå…¶ä»–å­—æ®µä¼šä¿æŒåŸæ ·ã€‚è¿™æ˜¯å®ƒä¸ &lt;code&gt;REPLACE INTO&lt;/code&gt;çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸é”&lt;/strong&gt;ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œæ­¤æ“ä½œå¯èƒ½ä¼šå¼•å‘è¡Œé”ç”šè‡³é—´éš™é”ï¼ˆå–å†³äºéš”ç¦»çº§åˆ«ï¼‰ï¼Œæœ‰&lt;strong&gt;æ­»é”é£é™©&lt;/strong&gt;ï¼Œéœ€æ³¨æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;ï¼šæ­¤æ“ä½œä¼šè§¦å‘ &lt;code&gt;BEFORE UPDATE&lt;/code&gt;å’Œ &lt;code&gt;AFTER UPDATE&lt;/code&gt;è§¦å‘å™¨ï¼ˆå¦‚æœå‘ç”Ÿæ›´æ–°ï¼‰ï¼Œä½†&lt;strong&gt;ä¸ä¼šè§¦å‘&lt;/strong&gt; &lt;code&gt;DELETE&lt;/code&gt;è§¦å‘å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯-2"&gt;ğŸ¯ é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°è®¡æ•°å™¨æˆ–ç´¯åŠ å€¼&lt;/strong&gt;ï¼Œå¦‚æ–‡ç« é˜…è¯»é‡ã€å•†å“åº“å­˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°è®°å½•çš„éƒ¨åˆ†å­—æ®µ&lt;/strong&gt;ï¼Œå¦‚ç”¨æˆ·æ›´æ”¹é‚®ç®±ï¼Œä½†éœ€è¦ä¿ç•™æ³¨å†Œæ—¶é—´ç­‰åŸæœ‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å»é‡ä¸åˆå¹¶&lt;/strong&gt;ï¼Œç¡®ä¿æ•°æ®çš„å”¯ä¸€æ€§çš„åŒæ—¶æ›´æ–°çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»»ä½•éœ€è¦ä¿ç•™åŸæœ‰è®°å½•å¤§éƒ¨åˆ†æ•°æ®çš„åœºæ™¯&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="-å¦‚ä½•é€‰æ‹©å†³ç­–æŒ‡å—"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼šå†³ç­–æŒ‡å—
&lt;/h2&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„è¯­å¥ï¼Œä¸‹é¢è¿™ä¸ªå†³ç­–æµç¨‹æ¢³ç†äº†å…³é”®è€ƒé‡ç‚¹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[é‡åˆ°æ•°æ®é‡å¤æ’å…¥é—®é¢˜] --&amp;gt; B{å¦‚ä½•é€‰æ‹©è§£å†³æ–¹æ¡ˆ?}
B -- éœ€è¦åŸå­æ€§çš„&amp;lt;br&amp;gt;æ’å…¥æˆ–æ›´æ–° --&amp;gt; C{å†²çªæ—¶å¦‚ä½•å¤„ç†åŸæœ‰æ•°æ®?}
C -- å®Œå…¨æ›¿æ¢æ•´è¡Œæ•°æ®&amp;lt;br&amp;gt;ä¸å…³å¿ƒæ—§æ•°æ® --&amp;gt; D[REPLACE INTO]
C -- ä»…æ›´æ–°éƒ¨åˆ†å­—æ®µ&amp;lt;br&amp;gt;ä¿ç•™å…¶ä»–å­—æ®µåŸæœ‰å€¼ --&amp;gt; E[INSERT ... ON DUPLICATE KEY UPDATE]
C -- å¿½ç•¥é‡å¤é¡¹&amp;lt;br&amp;gt;ä¿ç•™æ—§æ•°æ®ä¸åšä»»ä½•æ“ä½œ --&amp;gt; F[INSERT IGNORE]
B -- æ— éœ€åŸå­æ€§æ“ä½œ&amp;lt;br&amp;gt;å¯æ¥å—ä¸¤æ¬¡æ•°æ®åº“äº¤äº’ --&amp;gt; G[åº”ç”¨å±‚ç¨‹åºåˆ¤æ–­]
subgraph D [ ]
D1[ä¼˜ç‚¹: æ“ä½œç®€å•]
D2[ç¼ºç‚¹: ç ´åæ€§æ“ä½œ, å¯èƒ½ä¸¢å¤±æ•°æ®, è‡ªå¢IDä¼šå˜]
end
subgraph E [ ]
E1[ä¼˜ç‚¹: å¯éƒ¨åˆ†æ›´æ–°, æ€§èƒ½é€šå¸¸æ›´å¥½]
E2[ç¼ºç‚¹: è¯­æ³•ç¨å¤æ‚, é«˜å¹¶å‘ä¸‹æœ‰é”é£é™©]
end
subgraph F [ ]
F1[ä¼˜ç‚¹: ç®€å•å¿½ç•¥]
F2[ç¼ºç‚¹: æ— æ³•æ›´æ–°, ä»…å¿½ç•¥]
end
subgraph G [ ]
G1[ä¼˜ç‚¹: æœ€çµæ´»]
G2[ç¼ºç‚¹: å­˜åœ¨ç«æ€æ¡ä»¶é£é™©]
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€‰æ‹©æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹è¦ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨ &lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨å¤§å¤šæ•°éœ€è¦&amp;quot;å­˜åœ¨åˆ™æ›´æ–°&amp;quot;çš„åœºæ™¯ä¸‹ï¼Œå®ƒéƒ½æ˜¯&lt;strong&gt;æ›´ä¼˜çš„é€‰æ‹©&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆä¸”ä¸ä¼šæ— æ„ä¸­ç ´åå…¶ä»–æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ &lt;code&gt;REPLACE INTO&lt;/code&gt;&lt;/strong&gt;ï¼šæ¸…æ¥šåœ°çŸ¥é“å®ƒä¼š&lt;strong&gt;åˆ é™¤æ•´è¡Œæ•°æ®&lt;/strong&gt;ã€‚ä»…åœ¨éœ€è¦å®Œå…¨æ›¿æ¢æ•´æ¡è®°å½•ã€ä¸å…³å¿ƒä¸¢å¤±å…¶ä»–å­—æ®µæ•°æ®æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å¾—è¿˜æœ‰ &lt;code&gt;INSERT IGNORE&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœä½ çš„éœ€æ±‚æ˜¯&amp;quot;å­˜åœ¨åˆ™è·³è¿‡ï¼Œä¸æ’å…¥ä¹Ÿä¸æ›´æ–°&amp;rdquo;ï¼Œé‚£ä¹ˆ &lt;code&gt;INSERT IGNORE&lt;/code&gt;æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå®ƒä¼šå¿½ç•¥å¯¼è‡´é‡å¤çš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘åœºæ™¯&lt;/strong&gt;ï¼šå¯¹äºå¹¶å‘è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œå³ä½¿æ˜¯ &lt;code&gt;INSERT ... ON DUPLICATE KEY UPDATE&lt;/code&gt;ä¹Ÿå¯èƒ½æœ‰é”ç«äº‰é—®é¢˜ï¼Œæœ‰æ—¶åœ¨åº”ç”¨å±‚åšé€»è¾‘åˆ¤æ–­ï¼ˆå…ˆæŸ¥è¯¢ï¼Œå†å†³å®šæ’å…¥æˆ–æ›´æ–°ï¼‰å¯èƒ½æ˜¯æ›´ç¨³å¦¥çš„æ–¹æ¡ˆï¼Œå°½ç®¡è¿™ä¼šå¢åŠ ä¸€æ¬¡æ•°æ®åº“æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå¼ºå¤§çš„ MySQL åŠŸèƒ½ï¼&lt;/p&gt;
&lt;h2 id="full-join"&gt;full join
&lt;/h2&gt;&lt;p&gt;SQL ä¸­çš„ &lt;code&gt;FULL JOIN&lt;/code&gt;ï¼ˆå…¨è¿æ¥ï¼‰æ˜¯ä¸€ç§è¿æ¥æ“ä½œï¼Œå®ƒèƒ½å¤Ÿè¿”å›ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰è¡Œï¼Œæ— è®ºè¿™äº›è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ˜¯å¦æœ‰åŒ¹é…çš„è®°å½•ã€‚å½“æŸä¸€è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…æ—¶ï¼Œå¯¹åº”çš„å­—æ®µä¼šç”¨ &lt;code&gt;NULL&lt;/code&gt;å€¼å¡«å……ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å®ƒçš„æ•ˆæœï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Persons&lt;/code&gt;è¡¨&lt;/strong&gt;ï¼šå­˜å‚¨äººå‘˜ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Orders&lt;/code&gt;è¡¨&lt;/strong&gt;ï¼šå­˜å‚¨è®¢å•ä¿¡æ¯ï¼Œå¹¶é€šè¿‡ &lt;code&gt;Id_P&lt;/code&gt;å­—æ®µä¸ &lt;code&gt;Persons&lt;/code&gt;è¡¨å…³è”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart LR
Persons[Persons è¡¨]
Orders[Orders è¡¨]
subgraph P [Persons è¡¨æ•°æ®]
direction LR
P1[Id_P: 1&amp;lt;br&amp;gt;LastName: Adams]
P2[Id_P: 2&amp;lt;br&amp;gt;LastName: Bush]
P3[Id_P: 3&amp;lt;br&amp;gt;LastName: Carter]
end
subgraph O [Orders è¡¨æ•°æ®]
direction LR
O1[Id_O: 1&amp;lt;br&amp;gt;OrderNo: 77895&amp;lt;br&amp;gt;Id_P: 3]
O2[Id_O: 2&amp;lt;br&amp;gt;OrderNo: 44678&amp;lt;br&amp;gt;Id_P: 3]
O3[Id_O: 3&amp;lt;br&amp;gt;OrderNo: 22456&amp;lt;br&amp;gt;Id_P: 1]
O4[Id_O: 4&amp;lt;br&amp;gt;OrderNo: 24562&amp;lt;br&amp;gt;Id_P: 1]
O5[Id_O: 5&amp;lt;br&amp;gt;OrderNo: 34764&amp;lt;br&amp;gt;Id_P: 65]
end
Persons --&amp;gt; P
Orders --&amp;gt; O
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;FULL JOIN&lt;/code&gt;æŸ¥è¯¢ï¼Œå¸Œæœ›åˆ—å‡ºæ‰€æœ‰çš„äººå’Œæ‰€æœ‰çš„è®¢å•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
FULL JOIN Orders ON Persons.Id_P = Orders.Id_P
ORDER BY Persons.LastName;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥è¯¢ç»“æœå°†ä¼šæ˜¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;LastName&lt;/th&gt;
&lt;th&gt;FirstName&lt;/th&gt;
&lt;th&gt;OrderNo&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Adams&lt;/td&gt;
&lt;td&gt;John&lt;/td&gt;
&lt;td&gt;22456&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Adams&lt;/td&gt;
&lt;td&gt;John&lt;/td&gt;
&lt;td&gt;24562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Bush&lt;/td&gt;
&lt;td&gt;George&lt;/td&gt;
&lt;td&gt;&lt;em&gt;NULL&lt;/em&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Carter&lt;/td&gt;
&lt;td&gt;Thomas&lt;/td&gt;
&lt;td&gt;77895&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Carter&lt;/td&gt;
&lt;td&gt;Thomas&lt;/td&gt;
&lt;td&gt;44678&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;NULL&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;em&gt;NULL&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;34764&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä»è¿™ä¸ªç»“æœä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Adams&lt;/strong&gt; å’Œ &lt;strong&gt;Carter&lt;/strong&gt; æ—¢æœ‰äººå‘˜ä¿¡æ¯ä¹Ÿæœ‰è®¢å•ä¿¡æ¯ï¼Œæ­£å¸¸æ˜¾ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bush&lt;/strong&gt; åœ¨ &lt;code&gt;Persons&lt;/code&gt;è¡¨ä¸­å­˜åœ¨ï¼Œä½†åœ¨ &lt;code&gt;Orders&lt;/code&gt;è¡¨ä¸­æ²¡æœ‰ä»–çš„è®¢å•ï¼ˆ&lt;code&gt;OrderNo&lt;/code&gt;ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®¢å•å· &lt;strong&gt;34764&lt;/strong&gt; åœ¨ &lt;code&gt;Orders&lt;/code&gt;è¡¨ä¸­å­˜åœ¨ï¼Œä½†å¯¹åº”çš„ &lt;code&gt;Id_P&lt;/code&gt;(65) åœ¨ &lt;code&gt;Persons&lt;/code&gt;è¡¨ä¸­æ‰¾ä¸åˆ°ï¼ˆ&lt;code&gt;LastName&lt;/code&gt;å’Œ &lt;code&gt;FirstName&lt;/code&gt;ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦ç”¨é€”"&gt;ğŸ¯ ä¸»è¦ç”¨é€”
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;FULL JOIN&lt;/code&gt;é€šå¸¸ç”¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆå¹¶ä¸¤ä¸ªè¡¨çš„æ•°æ®&lt;/strong&gt;ï¼šå½“ä½ éœ€è¦åŒæ—¶çœ‹åˆ°ä¸¤ä¸ªè¡¨çš„å…¨éƒ¨è®°å½•æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¯”å¯¹å’ŒæŸ¥æ‰¾å·®å¼‚&lt;/strong&gt;ï¼šéå¸¸é€‚åˆç”¨æ¥å‘ç°ä¸¤ä¸ªè¡¨ä¹‹é—´çš„ä¸åŒ¹é…è®°å½•ã€‚ä¾‹å¦‚ï¼Œæ‰¾å‡ºæ²¡æœ‰è®¢å•çš„å®¢æˆ·ï¼Œæˆ–è€…æ‰¾ä¸åˆ°å¯¹åº”å®¢æˆ·çš„è®¢å•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„mysql-ä¸­çš„ç‰¹æ®Šæƒ…å†µ"&gt;âš ï¸ æ³¨æ„ï¼šMySQL ä¸­çš„ç‰¹æ®Šæƒ…å†µ
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;strong&gt;MySQL æ•°æ®åº“æœ¬èº«å¹¶ä¸ç›´æ¥æ”¯æŒ &lt;code&gt;FULL JOIN&lt;/code&gt;è¯­æ³•&lt;/strong&gt;ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€æ— æ³•å®ç°å…¨è¿æ¥çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å°† &lt;strong&gt;&lt;code&gt;LEFT JOIN&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;RIGHT JOIN&lt;/code&gt;&lt;/strong&gt; çš„ç»“æœç”¨ &lt;strong&gt;&lt;code&gt;UNION&lt;/code&gt;&lt;/strong&gt; æ“ä½œç¬¦åˆå¹¶èµ·æ¥**æ¥æ¨¡æ‹Ÿ &lt;code&gt;FULL JOIN&lt;/code&gt;çš„æ•ˆæœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
LEFT JOIN Orders ON Persons.Id_P = Orders.Id_P
UNION
SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
RIGHT JOIN Orders ON Persons.Id_P = Orders.Id_P;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡æŸ¥è¯¢è¯­å¥ä¼šè¾¾åˆ°ä¸ &lt;code&gt;FULL JOIN&lt;/code&gt;ç›¸åŒçš„ç»“æœã€‚&lt;/p&gt;
&lt;h3 id="-ä¸å…¶ä»–-join-æ“ä½œçš„å¯¹æ¯”"&gt;ğŸ“Š ä¸å…¶ä»– JOIN æ“ä½œçš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ &lt;code&gt;FULL JOIN&lt;/code&gt;åœ¨ SQL è¿æ¥æ“ä½œä¸­çš„ä½ç½®ï¼Œè¿™ä¸ªè¡¨æ ¼ç®€è¦å¯¹æ¯”äº†ä¸»è¦çš„ JOIN ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JOIN ç±»å‹&lt;/th&gt;
&lt;th&gt;ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;INNER JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­&lt;strong&gt;åŒ¹é…&lt;/strong&gt;çš„è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LEFT JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å·¦è¡¨&lt;/strong&gt;çš„å…¨éƒ¨è¡Œï¼Œä»¥åŠå³è¡¨ä¸­åŒ¹é…çš„è¡Œï¼ˆå³è¡¨æ— åŒ¹é…åˆ™è¡¥NULLï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RIGHT JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å³è¡¨&lt;/strong&gt;çš„å…¨éƒ¨è¡Œï¼Œä»¥åŠå·¦è¡¨ä¸­åŒ¹é…çš„è¡Œï¼ˆå·¦è¡¨æ— åŒ¹é…åˆ™è¡¥NULLï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;FULL JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›&lt;strong&gt;å·¦å³ä¸¤è¡¨&lt;/strong&gt;çš„å…¨éƒ¨è¡Œï¼Œæ— è®ºæ˜¯å¦åŒ¹é…ï¼ˆæ— åŒ¹é…éƒ¨åˆ†å‡è¡¥NULLï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CROSS JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›ä¸¤è¡¨çš„&lt;strong&gt;ç¬›å¡å°”ç§¯&lt;/strong&gt;ï¼ˆæ¯ä¸€è¡Œéƒ½ä¸å¦ä¸€è¡¨çš„æ¯ä¸€è¡Œç»„åˆï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ ç†è§£ &lt;code&gt;FULL JOIN&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="concat"&gt;Concat
&lt;/h2&gt;&lt;p&gt;CONCATå‡½æ•°åœ¨ä»»ä½•ä¸€ä¸ªå‚æ•°ä¸ºnullæ—¶éƒ½ä¼šè¿”å›null&lt;/p&gt;
&lt;h2 id="null-å€¼æ¯”è¾ƒ"&gt;NULL å€¼æ¯”è¾ƒ
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æ¯”è¾ƒç¡®å®æ˜¯ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„é—®é¢˜ã€‚ç®€å•æ¥è¯´ï¼š&lt;strong&gt;åœ¨ MySQL ä¸­ï¼Œä¸¤ä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼åœ¨ä½¿ç”¨ &lt;code&gt;=&lt;/code&gt;æ“ä½œç¬¦åˆ¤æ–­æ—¶å¹¶ä¸ç›¸ç­‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ èƒ½å¿«é€ŸæŠ“ä½æ ¸å¿ƒä¿¡æ¯ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ MySQL ä¸­ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æ¯”è¾ƒè¡Œä¸ºï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¯”è¾ƒåœºæ™¯&lt;/th&gt;
&lt;th&gt;ä½¿ç”¨æ“ä½œç¬¦&lt;/th&gt;
&lt;th&gt;ç»“æœ&lt;/th&gt;
&lt;th&gt;åŸå› è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL = NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸¤ä¸ªæœªçŸ¥å€¼æ— æ³•åˆ¤å®šæ˜¯å¦ç›¸ç­‰ï¼Œç»“æœä¹Ÿæ˜¯æœªçŸ¥ (&lt;code&gt;NULL&lt;/code&gt;)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL IS NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;IS NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TRUE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ˜ç¡®åˆ¤æ–­æ˜¯å¦ä¸º &lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éNULLå€¼ = NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å·²çŸ¥å€¼ä¸æœªçŸ¥å€¼æ— æ³•æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL &amp;lt;=&amp;gt; NULL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TRUE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨ç­‰äº&lt;/strong&gt;æ“ä½œç¬¦ï¼Œä¸“é—¨å¤„ç† &lt;code&gt;NULL&lt;/code&gt;æ¯”è¾ƒï¼Œè®¤ä¸ºä¸¤ä¸ª &lt;code&gt;NULL&lt;/code&gt;ç›¸ç­‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆ-null-ä¸-null-ä¸ç›¸ç­‰"&gt;âš ï¸ ä¸ºä»€ä¹ˆ NULL ä¸ NULL ä¸ç›¸ç­‰ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œ&lt;code&gt;NULL&lt;/code&gt;è¡¨ç¤ºä¸€ä¸ª&lt;strong&gt;ç¼ºå¤±çš„ã€æœªçŸ¥çš„å€¼&lt;/strong&gt;ã€‚ ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªå ä½ç¬¦ï¼Œä»£è¡¨â€œè¿™é‡Œæœ‰ä¸€ä¸ªå€¼ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆâ€ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ® SQL æ ‡å‡†ï¼ˆMySQL éµå¾ªæ­¤æ ‡å‡†ï¼‰ï¼Œ&lt;strong&gt;ä»»ä½•ä¸ &lt;code&gt;NULL&lt;/code&gt;çš„æ¯”è¾ƒæ“ä½œï¼ˆå³ä½¿æ˜¯ä¸å¦ä¸€ä¸ª &lt;code&gt;NULL&lt;/code&gt;æ¯”è¾ƒï¼‰çš„ç»“æœéƒ½æ˜¯ &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼Œè¿™è¡¨ç¤ºâ€œæœªçŸ¥â€ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå½“ä½ å°è¯• &lt;code&gt;SELECT NULL = NULL;&lt;/code&gt;æ—¶ï¼Œå¾—åˆ°çš„ç»“æœä¸ä¼šæ˜¯ &lt;code&gt;TRUE&lt;/code&gt;(1)ï¼Œè€Œæ˜¯ &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®åˆ¤æ–­-null"&gt;ğŸ” å¦‚ä½•æ­£ç¡®åˆ¤æ–­ NULLï¼Ÿ
&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶ä¸èƒ½ç”¨ &lt;code&gt;=&lt;/code&gt;å’Œ &lt;code&gt;!=&lt;/code&gt;æ¥åˆ¤æ–­ &lt;code&gt;NULL&lt;/code&gt;ï¼ŒMySQL æä¾›äº†ä¸“é—¨çš„æ“ä½œç¬¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IS NULL&lt;/code&gt;&lt;/strong&gt;: å½“åˆ—çš„å€¼æ˜¯ &lt;code&gt;NULL&lt;/code&gt;æ—¶ï¼Œæ­¤è¿ç®—ç¬¦è¿”å› &lt;code&gt;TRUE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IS NOT NULL&lt;/code&gt;&lt;/strong&gt;: å½“åˆ—çš„å€¼ä¸ä¸º &lt;code&gt;NULL&lt;/code&gt;æ—¶ï¼Œæ­¤è¿ç®—ç¬¦è¿”å› &lt;code&gt;TRUE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœä½ æƒ³åˆ¤æ–­ä¸¤ä¸ªå­—æ®µæ˜¯å¦éƒ½ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM your_table
WHERE column1 IS NULL AND column2 IS NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-å¤„ç†-null-æ¯”è¾ƒçš„å®ç”¨æ–¹æ³•"&gt;ğŸ› ï¸ å¤„ç† NULL æ¯”è¾ƒçš„å®ç”¨æ–¹æ³•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°è½¬æ¢åå†æ¯”è¾ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°ä¼šè¿”å›å…¶å‚æ•°åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªé &lt;code&gt;NULL&lt;/code&gt;çš„å€¼ã€‚ ä½ å¯ä»¥ç”¨å®ƒæŠŠ &lt;code&gt;NULL&lt;/code&gt;è½¬æ¢æˆä¸€ä¸ªå…·ä½“çš„é»˜è®¤å€¼å†æ¯”è¾ƒï¼Œè¿™åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°† NULL è§†ä¸ºç©ºå­—ç¬¦ä¸² &amp;#39;&amp;#39; è¿›è¡Œæ¯”è¾ƒ
SELECT *
FROM your_table
WHERE COALESCE(column1, &amp;#39;&amp;#39;) = COALESCE(column2, &amp;#39;&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;æ“ä½œç¬¦ï¼ˆå®‰å…¨ç­‰äºï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„ &lt;strong&gt;&lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;&lt;/strong&gt; æ“ä½œç¬¦ï¼ˆå®‰å…¨ç­‰äºï¼‰ã€‚&lt;strong&gt;å®ƒä¸ä»…èƒ½åœ¨ä¸¤ä¸ªå€¼ç›¸ç­‰æ—¶è¿”å› &lt;code&gt;TRUE&lt;/code&gt;ï¼Œåœ¨ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯ &lt;code&gt;NULL&lt;/code&gt;æ—¶ä¹Ÿä¼šè¿”å› &lt;code&gt;TRUE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨å®‰å…¨ç­‰äºåˆ¤æ–­ï¼Œä¸¤ä¸ª NULL ä¼šè¿”å› TRUE
SELECT NULL &amp;lt;=&amp;gt; NULL; -- è¿”å› 1 (TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ å…¶ä»–æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšåˆå‡½æ•°å¿½ç•¥ &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;COUNT()&lt;/code&gt;ã€&lt;code&gt;SUM()&lt;/code&gt;ã€&lt;code&gt;AVG()&lt;/code&gt;ç­‰èšåˆå‡½æ•°æ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å¿½ç•¥ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚ ä¾‹å¦‚ï¼Œ&lt;code&gt;COUNT(column_name)&lt;/code&gt;ä¸ä¼šç»Ÿè®¡è¯¥åˆ—ä¸­ä¸º &lt;code&gt;NULL&lt;/code&gt;çš„è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’åºä¸­çš„ &lt;code&gt;NULL&lt;/code&gt;&lt;/strong&gt;ï¼šåœ¨ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å¯¹æŸåˆ—æ’åºæ—¶ï¼Œ&lt;code&gt;NULL&lt;/code&gt;å€¼é»˜è®¤ä¼šè¢«æ”¾åœ¨ç»“æœé›†çš„æœ€å‰é¢ï¼ˆ&lt;code&gt;ASC&lt;/code&gt;å‡åºæ—¶ï¼‰æˆ–æœ€åé¢ï¼ˆ&lt;code&gt;DESC&lt;/code&gt;é™åºæ—¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;NULL&lt;/code&gt;ä¸ç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;ä¸åŒ&lt;/strong&gt;ï¼š&lt;code&gt;NULL&lt;/code&gt;è¡¨ç¤ºæœªçŸ¥ï¼Œè€Œç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;æ˜¯ä¸€ä¸ªç¡®å®šçš„ã€é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸²å€¼ã€‚ åœ¨å®šä¹‰ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;çš„åˆ—ä¸­ï¼Œå¯ä»¥æ’å…¥ç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;ï¼Œä½†ä¸èƒ½æ’å…¥ &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„ &lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚&lt;/p&gt;
&lt;h2 id="conv"&gt;CONV
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°æ˜¯ä¸€ä¸ªç”¨äº&lt;strong&gt;è¿›åˆ¶è½¬æ¢&lt;/strong&gt;çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å°†æ•°å­—ä»ä¸€ç§è¿›åˆ¶è¡¨ç¤ºè½¬æ¢ä¸ºå¦ä¸€ç§è¿›åˆ¶è¡¨ç¤ºã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å’Œç¤ºä¾‹æ¥å¸®ä½ å¿«é€Ÿäº†è§£å®ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŠŸèƒ½ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ•°å­—ä»ä¸€ç§è¿›åˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§è¿›åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CONV(number, from_base, to_base)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°è¯´æ˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;number&lt;/code&gt;: è¦è½¬æ¢çš„æ•°å­—ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å€¼ &lt;code&gt;from_base&lt;/code&gt;: åŸå§‹è¿›åˆ¶ (2-36) &lt;code&gt;to_base&lt;/code&gt;: ç›®æ ‡è¿›åˆ¶ (2-36)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æˆåŠŸæ—¶è¿”å›è¡¨ç¤ºç›®æ ‡è¿›åˆ¶æ•°å­—çš„å­—ç¬¦ä¸²ï¼›å¦‚æœä»»ä¸€å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œæˆ–è¿›åˆ¶è¶…å‡ºèŒƒå›´ï¼Œæˆ–æ•°å­—åŒ…å«éæ³•å­—ç¬¦ï¼Œåˆ™è¿”å› &lt;code&gt;NULL&lt;/code&gt;æˆ– &lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§å°å†™æ•æ„Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹äºè¶…è¿‡10çš„è¿›åˆ¶ï¼ˆå¦‚åå…­è¿›åˆ¶ï¼‰ï¼Œå­—æ¯ &lt;code&gt;A-F&lt;/code&gt;å’Œ &lt;code&gt;a-f&lt;/code&gt;è¢«è§†ä¸ºç­‰æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•ä¸å‚æ•°"&gt;ğŸ§® åŸºæœ¬è¯­æ³•ä¸å‚æ•°
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CONV(number, from_base, to_base)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;number&lt;/strong&gt;ï¼š è¦è½¬æ¢çš„æ•°å­—ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„æ•°å­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;from_base&lt;/strong&gt;ï¼š &lt;code&gt;number&lt;/code&gt;å½“å‰æ‰€å¤„çš„è¿›åˆ¶ã€‚&lt;strong&gt;å–å€¼èŒƒå›´æ˜¯ 2 åˆ° 36&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;to_base&lt;/strong&gt;ï¼š ä½ å¸Œæœ›å°† &lt;code&gt;number&lt;/code&gt;è½¬æ¢åˆ°çš„ç›®æ ‡è¿›åˆ¶ã€‚&lt;strong&gt;å–å€¼èŒƒå›´åŒæ ·æ˜¯ 2 åˆ° 36&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä½¿ç”¨ç¤ºä¾‹"&gt;ğŸ“Š ä½¿ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åå…­è¿›åˆ¶è½¬åè¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;5F&amp;#39;, 16, 10); -- ç»“æœ: &amp;#39;95&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è®¡ç®—è¿‡ç¨‹ï¼šåå…­è¿›åˆ¶çš„ &lt;code&gt;5F&lt;/code&gt;= 5Ã—16Â¹ + 15Ã—16â° = 80 + 15 = 95ï¼ˆåè¿›åˆ¶ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åè¿›åˆ¶è½¬äºŒè¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(95, 10, 2); -- ç»“æœ: &amp;#39;1011111&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äºŒè¿›åˆ¶è½¬å…«è¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;1011111&amp;#39;, 2, 8); -- ç»“æœ: &amp;#39;137&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…«è¿›åˆ¶è½¬åå…­è¿›åˆ¶&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;77&amp;#39;, 8, 16); -- ç»“æœ: &amp;#39;3F&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†å¤§å†™å­—æ¯ï¼ˆä¸‰åå…­è¿›åˆ¶è½¬åè¿›åˆ¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;Z&amp;#39;, 36, 10); -- ç»“æœ: &amp;#39;35&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ä¸‰åå…­è¿›åˆ¶ä¸­ï¼Œ&lt;code&gt;Z&lt;/code&gt;è¡¨ç¤º 35ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†è´Ÿæ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;-10&amp;#39;, 10, 2); -- ç»“æœ: &amp;#39;-1010&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›åˆ¶èŒƒå›´&lt;/strong&gt;ï¼š&lt;code&gt;from_base&lt;/code&gt;å’Œ &lt;code&gt;to_base&lt;/code&gt;éƒ½å¿…é¡»åœ¨ &lt;strong&gt;2 åˆ° 36&lt;/strong&gt; ä¹‹é—´ã€‚å¦‚æœè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œå‡½æ•°ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;10&amp;#39;, 1, 10); -- ç»“æœ: NULL (from_base &amp;lt; 2)
SELECT CONV(&amp;#39;10&amp;#39;, 37, 10); -- ç»“æœ: NULL (from_base &amp;gt; 36)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éæ³•å­—ç¬¦&lt;/strong&gt;ï¼šå¦‚æœ &lt;code&gt;number&lt;/code&gt;ä¸­åŒ…å«å¯¹äºç»™å®šçš„ &lt;code&gt;from_base&lt;/code&gt;æ¥è¯´éæ³•çš„å­—ç¬¦ï¼Œå‡½æ•°ä¼šè¿”å› &lt;code&gt;0&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(&amp;#39;2&amp;#39;, 2, 10); -- ç»“æœ: &amp;#39;0&amp;#39; (æ•°å­—2åœ¨äºŒè¿›åˆ¶ä¸­éæ³•)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;NULL å€¼å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœä»»ä½•å‚æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œå‡½æ•°ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CONV(NULL, 10, 2); -- ç»“æœ: NULL
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿”å›ç±»å‹&lt;/strong&gt;ï¼šè¿”å›å€¼æ€»æ˜¯ä¸€ä¸ª&lt;strong&gt;å­—ç¬¦ä¸²&lt;/strong&gt;ï¼Œå³ä½¿è½¬æ¢ç»“æœçœ‹èµ·æ¥åƒä¸€ä¸ªæ•°å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MySQL ç‰ˆæœ¬&lt;/strong&gt;ï¼šåœ¨ MySQL 8.0 ä¹‹å‰ï¼Œ&lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°å¯¹éå¸¸å¤§çš„ &lt;code&gt;BIGINT&lt;/code&gt;å€¼çš„æ”¯æŒå¯èƒ½æœ‰é™ï¼Œå¤§æ•°å¯èƒ½ä¼šè¢«æˆªæ–­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;CONV()&lt;/code&gt;å‡½æ•°åœ¨ä»¥ä¸‹åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¤„ç†ä¸è½¬æ¢&lt;/strong&gt;ï¼šå½“éœ€è¦å°†å­˜å‚¨ä¸ºç‰¹å®šè¿›åˆ¶ï¼ˆå¦‚åå…­è¿›åˆ¶ï¼‰çš„æ•°æ®è½¬æ¢ä¸ºå¦ä¸€ç§è¿›åˆ¶ï¼ˆå¦‚åè¿›åˆ¶ï¼‰è¿›è¡Œè®¡ç®—æˆ–æ˜¾ç¤ºæ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ä»¶ç›¸å…³ç¼–ç¨‹&lt;/strong&gt;ï¼šå¤„ç†å¯„å­˜å™¨åœ°å€ã€é¢œè‰²ä»£ç ç­‰é€šå¸¸ç”¨åå…­è¿›åˆ¶è¡¨ç¤ºçš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å¯†ä¸å®‰å…¨&lt;/strong&gt;ï¼šæŸäº›åŠ å¯†ç®—æ³•æˆ–å“ˆå¸Œå€¼ä¼šä»¥ç‰¹å®šè¿›åˆ¶å½¢å¼è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œåè®®åˆ†æ&lt;/strong&gt;ï¼šåˆ†æç½‘ç»œæ•°æ®åŒ…æ—¶ï¼Œéƒ¨åˆ†å­—æ®µå¯èƒ½é‡‡ç”¨éåè¿›åˆ¶è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;CONV()&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸€ä¸ªå®ç”¨çš„å‡½æ•°ï¼Œç”¨äºä¸åŒè¿›åˆ¶æ•°ä¹‹é—´çš„è½¬æ¢ã€‚ä½¿ç”¨æ—¶åªéœ€æ³¨æ„è¿›åˆ¶çš„æœ‰æ•ˆèŒƒå›´ã€éæ³•å­—ç¬¦çš„å¤„ç†ä»¥åŠè¿”å›å€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹è¿™äº›ç»†èŠ‚å³å¯ã€‚&lt;/p&gt;
&lt;h2 id="corss-join"&gt;CORSS JOIN
&lt;/h2&gt;&lt;p&gt;CROSS JOINä¸å…è®¸ONæ¡ä»¶ï¼Œä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚&lt;/p&gt;
&lt;h2 id="å­æŸ¥è¯¢"&gt;å­æŸ¥è¯¢
&lt;/h2&gt;&lt;p&gt;å­æŸ¥è¯¢æ˜¯ MySQL ä¸­ä¸€é¡¹å¼ºå¤§ä¸”å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ª SQL æŸ¥è¯¢è¯­å¥ä¸­åµŒå¥—å¦ä¸€ä¸ªæŸ¥è¯¢ï¼Œä»è€Œæ„å»ºå‡ºæ›´å¤æ‚ã€æ›´çµæ´»çš„æ•°æ®æ£€ç´¢é€»è¾‘ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†ä»‹ç»å­æŸ¥è¯¢çš„å„ç§ç±»å‹ã€åº”ç”¨åœºæ™¯å’Œä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h3 id="-å­æŸ¥è¯¢ç±»å‹æ¦‚è§ˆ"&gt;ğŸ“Š å­æŸ¥è¯¢ç±»å‹æ¦‚è§ˆ
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªè¡¨æ ¼æ¥å¿«é€Ÿäº†è§£ä¸»è¦çš„å­æŸ¥è¯¢ç±»å‹åŠå…¶æ ¸å¿ƒç‰¹å¾ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŸ¥è¯¢ç±»å‹&lt;/th&gt;
&lt;th&gt;å…³é”®è¯/ä½ç½®&lt;/th&gt;
&lt;th&gt;è¿”å›ç»“æœ&lt;/th&gt;
&lt;th&gt;å¸¸ç”¨æ“ä½œç¬¦/åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‡é‡å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE, SELECT, HAVING å­å¥&lt;/td&gt;
&lt;td&gt;å•ä¸€å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE å­å¥&lt;/td&gt;
&lt;td&gt;å•åˆ—å¤šè¡Œ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;IN&lt;/code&gt;, &lt;code&gt;NOT IN&lt;/code&gt;, &lt;code&gt;ANY&lt;/code&gt;/&lt;code&gt;SOME&lt;/code&gt;, &lt;code&gt;ALL&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡Œå­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE å­å¥&lt;/td&gt;
&lt;td&gt;å•è¡Œå¤šåˆ—&lt;/td&gt;
&lt;td&gt;&lt;code&gt;=&lt;/code&gt;ï¼ˆé…åˆè¡Œæ„é€ å™¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨å­æŸ¥è¯¢/æ´¾ç”Ÿè¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;FROM å­å¥&lt;/td&gt;
&lt;td&gt;å¤šè¡Œå¤šåˆ—ï¼ˆè™šæ‹Ÿè¡¨ï¼‰&lt;/td&gt;
&lt;td&gt;å¿…é¡»è¦æœ‰åˆ«åï¼Œå¯å‚ä¸ JOIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;EXISTS å­æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;WHERE å­å¥&lt;/td&gt;
&lt;td&gt;å¸ƒå°”å€¼ï¼ˆTrue/Falseï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;EXISTS&lt;/code&gt;, &lt;code&gt;NOT EXISTS&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰ç»“æœé›†ç±»å‹åˆ†ç±»"&gt;ğŸ” æŒ‰ç»“æœé›†ç±»å‹åˆ†ç±»
&lt;/h3&gt;&lt;h4 id="1-æ ‡é‡å­æŸ¥è¯¢scalar-subquery"&gt;1. æ ‡é‡å­æŸ¥è¯¢ï¼ˆScalar Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;æ ‡é‡å­æŸ¥è¯¢æ˜¯æœ€å¸¸è§çš„å½¢å¼ï¼Œå®ƒ&lt;strong&gt;åªè¿”å›ä¸€ä¸ªå•ä¸€çš„å€¼&lt;/strong&gt;ï¼ˆä¸€è¡Œä¸€åˆ—ï¼‰ï¼Œå¯ä»¥åƒä½¿ç”¨å¸¸é‡ä¸€æ ·ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¸¸ç”¨äºæ¯”è¾ƒæ“ä½œã€è®¡ç®—æˆ–ä½œä¸º SELECT åˆ—è¡¨ä¸­çš„è¾“å‡ºå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT employee_name, salary
FROM employees
WHERE salary &amp;gt; (SELECT AVG(salary) FROM employees);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;(SELECT AVG(salary) FROM employees)&lt;/code&gt;å°±æ˜¯ä¸€ä¸ªæ ‡é‡å­æŸ¥è¯¢ï¼Œå®ƒè¿”å›ä¸€ä¸ªå…·ä½“çš„å¹³å‡å€¼ç”¨äºå¤–éƒ¨æŸ¥è¯¢çš„æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-åˆ—å­æŸ¥è¯¢column-subquery"&gt;2. åˆ—å­æŸ¥è¯¢ï¼ˆColumn Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;åˆ—å­æŸ¥è¯¢ä¼š&lt;strong&gt;è¿”å›ä¸€åˆ—æ•°æ®&lt;/strong&gt;ï¼ˆå•åˆ—å¤šè¡Œï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé€šå¸¸ä¸ &lt;code&gt;IN&lt;/code&gt;, &lt;code&gt;NOT IN&lt;/code&gt;, &lt;code&gt;ANY&lt;/code&gt;/&lt;code&gt;SOME&lt;/code&gt;, &lt;code&gt;ALL&lt;/code&gt;è¿™äº›æ“ä½œç¬¦é…åˆä½¿ç”¨ï¼Œæ¥åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦åœ¨å­æŸ¥è¯¢è¿”å›çš„åˆ—å€¼ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢åœ¨ &amp;ldquo;é”€å”®éƒ¨&amp;rdquo; æˆ– &amp;ldquo;ç ”å‘éƒ¨&amp;rdquo; å·¥ä½œçš„å‘˜å·¥å§“åã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT employee_name
FROM employees
WHERE department_id IN (
SELECT department_id
FROM departments
WHERE department_name IN (&amp;#39;é”€å”®éƒ¨&amp;#39;, &amp;#39;ç ”å‘éƒ¨&amp;#39;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å­æŸ¥è¯¢ &lt;code&gt;(SELECT department_id ...)&lt;/code&gt;ä¼šè¿”å› &amp;lsquo;é”€å”®éƒ¨&amp;rsquo; å’Œ &amp;lsquo;ç ”å‘éƒ¨&amp;rsquo; å¯¹åº”çš„éƒ¨é—¨IDé›†åˆï¼Œç„¶åå¤–éƒ¨æŸ¥è¯¢é€šè¿‡ &lt;code&gt;IN&lt;/code&gt;æ“ä½œç¬¦è¿›è¡ŒåŒ¹é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-è¡Œå­æŸ¥è¯¢row-subquery"&gt;3. è¡Œå­æŸ¥è¯¢ï¼ˆRow Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;è¡Œå­æŸ¥è¯¢&lt;strong&gt;è¿”å›ä¸€è¡Œæ•°æ®&lt;/strong&gt;ï¼ˆå•è¡Œå¤šåˆ—ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦åŒæ—¶æ¯”è¾ƒå¤šä¸ªåˆ—çš„å€¼æ—¶ä½¿ç”¨ï¼Œç›¸å¯¹å°‘è§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥æ‰¾ä¸å‘˜å·¥IDä¸º101çš„å‘˜å·¥éƒ¨é—¨å’ŒèŒä½éƒ½ç›¸åŒçš„å…¶ä»–å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT employee_name, department_id, job_title
FROM employees
WHERE (department_id, job_title) = (
SELECT department_id, job_title
FROM employees
WHERE employee_id = 101
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å­æŸ¥è¯¢è¿”å›äº†IDä¸º101çš„å‘˜å·¥çš„ &lt;code&gt;department_id&lt;/code&gt;å’Œ &lt;code&gt;job_title&lt;/code&gt;ï¼Œå¤–éƒ¨æŸ¥è¯¢é€šè¿‡è¡Œæ„é€ å™¨ &lt;code&gt;(department_id, job_title)&lt;/code&gt;è¿›è¡Œæ•´ä½“æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="4-è¡¨å­æŸ¥è¯¢æ´¾ç”Ÿè¡¨table-subquery--derived-table"&gt;4. è¡¨å­æŸ¥è¯¢/æ´¾ç”Ÿè¡¨ï¼ˆTable Subquery / Derived Tableï¼‰
&lt;/h4&gt;&lt;p&gt;è¡¨å­æŸ¥è¯¢&lt;strong&gt;è¿”å›ä¸€ä¸ªè™šæ‹Ÿè¡¨&lt;/strong&gt;ï¼ˆå¤šè¡Œå¤šåˆ—ï¼‰ï¼Œå¹¶ä¸”å¿…é¡»å‡ºç°åœ¨ &lt;strong&gt;FROM&lt;/strong&gt; å­å¥ä¸­ï¼Œ&lt;strong&gt;å¿…é¡»ä¸ºå…¶æŒ‡å®šåˆ«å&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€è¦ä¸€ä¸ªä¸´æ—¶æ€§çš„ç»“æœé›†å‚ä¸è¿›ä¸€æ­¥æŸ¥è¯¢ã€è¿æ¥æˆ–èšåˆè®¡ç®—æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼Œå¹¶ç­›é€‰å‡ºå¹³å‡å·¥èµ„é«˜äº60000çš„éƒ¨é—¨åŠå…¶åç§°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT d.department_name, ds.avg_salary
FROM departments d
JOIN (
SELECT department_id, AVG(salary) AS avg_salary
FROM employees
GROUP BY department_id
HAVING AVG(salary) &amp;gt; 60000
) AS ds
ON d.department_id = ds.department_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;(SELECT department_id ...)&lt;/code&gt;ä½œä¸ºä¸€ä¸ªæ´¾ç”Ÿè¡¨ &lt;code&gt;ds&lt;/code&gt;ï¼Œå…ˆè®¡ç®—å‡ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å¹¶è¿›è¡Œç­›é€‰ï¼Œç„¶åä¸ &lt;code&gt;departments&lt;/code&gt;è¡¨è¿›è¡Œè¿æ¥è·å–éƒ¨é—¨åç§°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰ä¸å¤–éƒ¨æŸ¥è¯¢çš„å…³ç³»åˆ†ç±»"&gt;ğŸ”— æŒ‰ä¸å¤–éƒ¨æŸ¥è¯¢çš„å…³ç³»åˆ†ç±»
&lt;/h3&gt;&lt;h4 id="1-ç‹¬ç«‹å­æŸ¥è¯¢éç›¸å…³å­æŸ¥è¯¢"&gt;1. ç‹¬ç«‹å­æŸ¥è¯¢ï¼ˆéç›¸å…³å­æŸ¥è¯¢ï¼‰
&lt;/h4&gt;&lt;p&gt;ç‹¬ç«‹å­æŸ¥è¯¢çš„æ‰§è¡Œ&lt;strong&gt;ä¸ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢&lt;/strong&gt;ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œå¹¶å¾—å‡ºç»“æœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šå­æŸ¥è¯¢ä»…æ‰§è¡Œä¸€æ¬¡ï¼Œç»“æœè¢«ç¼“å­˜å¹¶ä¼ é€’ç»™å¤–éƒ¨æŸ¥è¯¢ã€‚&lt;strong&gt;å¤šæ•°æ ‡é‡å­æŸ¥è¯¢å’Œæ´¾ç”Ÿè¡¨éƒ½å±äºæ­¤ç±»&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šä¸Šé¢æåˆ°çš„â€œæŸ¥è¯¢å·¥èµ„é«˜äºå…¬å¸å¹³å‡å·¥èµ„çš„å‘˜å·¥â€å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹å­æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ç›¸å…³å­æŸ¥è¯¢correlated-subquery"&gt;2. ç›¸å…³å­æŸ¥è¯¢ï¼ˆCorrelated Subqueryï¼‰
&lt;/h4&gt;&lt;p&gt;ç›¸å…³å­æŸ¥è¯¢çš„æ‰§è¡Œ&lt;strong&gt;ä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œæ•°æ®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šå­æŸ¥è¯¢ä¼š&lt;strong&gt;ä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œä¸€æ¬¡&lt;/strong&gt;ã€‚å­æŸ¥è¯¢ä¸­ä¼šå¼•ç”¨å¤–éƒ¨æŸ¥è¯¢çš„å­—æ®µã€‚å¦‚æœå¤–éƒ¨æŸ¥è¯¢è¿”å›å¤§é‡è¡Œï¼Œ&lt;strong&gt;å¯èƒ½å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼ˆ&amp;ldquo;N+1&amp;quot;æŸ¥è¯¢é—®é¢˜ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥æ‰¾æ¯ä¸ªéƒ¨é—¨ä¸­å·¥èµ„é«˜äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT e1.employee_name, e1.department_id, e1.salary
FROM employees e1
WHERE e1.salary &amp;gt; (
SELECT AVG(salary)
FROM employees e2
WHERE e2.department_id = e1.department_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„å­æŸ¥è¯¢ä¸­çš„ &lt;code&gt;WHERE e2.department_id = e1.department_id&lt;/code&gt;ï¼Œå®ƒå¼•ç”¨äº†å¤–éƒ¨æŸ¥è¯¢ &lt;code&gt;e1&lt;/code&gt;è¡¨çš„ &lt;code&gt;department_id&lt;/code&gt;ã€‚å¯¹äº &lt;code&gt;e1&lt;/code&gt;è¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œå­æŸ¥è¯¢éƒ½ä¼šæ ¹æ®è¯¥è¡Œæ‰€åœ¨çš„éƒ¨é—¨IDè®¡ç®—ä¸€æ¬¡å¹³å‡å·¥èµ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç‰¹å®šå…³é”®å­—å­æŸ¥è¯¢"&gt;âš™ï¸ ç‰¹å®šå…³é”®å­—å­æŸ¥è¯¢
&lt;/h3&gt;&lt;h4 id="1-exists--not-exists-å­æŸ¥è¯¢"&gt;1. EXISTS / NOT EXISTS å­æŸ¥è¯¢
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;EXISTS&lt;/code&gt;ç”¨äºæ£€æŸ¥å­æŸ¥è¯¢&lt;strong&gt;æ˜¯å¦è‡³å°‘è¿”å›ä¸€è¡Œæ•°æ®&lt;/strong&gt;ã€‚å®ƒè¿”å›çš„æ˜¯å¸ƒå°”å€¼ï¼ˆTRUE æˆ– FALSEï¼‰ï¼Œ&lt;strong&gt;ä¸å…³å¿ƒå­æŸ¥è¯¢å…·ä½“è¿”å›ä»€ä¹ˆæ•°æ®å†…å®¹&lt;/strong&gt;ï¼Œå› æ­¤é€šå¸¸å†™æˆ &lt;code&gt;SELECT 1&lt;/code&gt;æˆ– &lt;code&gt;SELECT *&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¸¸ç”¨äºæ£€æŸ¥å­˜åœ¨æ€§ï¼Œä¾‹å¦‚â€œæ˜¯å¦å­˜åœ¨è®¢å•çš„å®¢æˆ·â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢æœ‰è®¢å•çš„å®¢æˆ·ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT customer_id, customer_name
FROM customers c
WHERE EXISTS (
SELECT 1
FROM orders o
WHERE o.customer_id = c.customer_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ &lt;code&gt;IN&lt;/code&gt;ç›¸æ¯”ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;åœ¨å¤„ç†å¤§æ•°æ®é›†ä¸”å­æŸ¥è¯¢æ•ˆç‡é«˜æ—¶ï¼Œ&lt;strong&gt;æ€§èƒ½é€šå¸¸æ›´å¥½&lt;/strong&gt;ï¼Œå› ä¸ºä¸€æ—¦æ‰¾åˆ°ä¸€æ¡åŒ¹é…è®°å½•å°±ä¼šåœæ­¢æ‰«æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-anysome-å’Œ-all-å­æŸ¥è¯¢"&gt;2. ANY/SOME å’Œ ALL å­æŸ¥è¯¢
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ANY&lt;/code&gt;ï¼ˆåŒ &lt;code&gt;SOME&lt;/code&gt;ï¼‰å’Œ &lt;code&gt;ALL&lt;/code&gt;æ“ä½œç¬¦ç”¨äºå°†æŸä¸ªå€¼ä¸å­æŸ¥è¯¢è¿”å›çš„ä¸€åˆ—å€¼è¿›è¡Œæ¯”è¾ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ANY&lt;/code&gt;/&lt;code&gt;SOME&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨ç¤ºå¤–éƒ¨æŸ¥è¯¢çš„æ¡ä»¶åªè¦æ»¡è¶³å­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;ä»»æ„ä¸€ä¸ª&lt;/strong&gt;å³å¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºä»»æ„ä¸€ä¸ªï¼ˆæŸäº›ï¼‰&amp;lsquo;Engineering&amp;rsquo; éƒ¨é—¨å‘˜å·¥çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT name, salary
FROM employees
WHERE salary &amp;gt; ANY (
SELECT salary
FROM employees
WHERE dept_id = (SELECT id FROM departments WHERE dept_name = &amp;#39;Engineering&amp;#39;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;ALL&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨ç¤ºå¤–éƒ¨æŸ¥è¯¢çš„æ¡ä»¶å¿…é¡»æ»¡è¶³å­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæŸ¥è¯¢å·¥èµ„é«˜äºæ‰€æœ‰ &amp;lsquo;Engineering&amp;rsquo; éƒ¨é—¨å‘˜å·¥çš„å‘˜å·¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT name, salary
FROM employees
WHERE salary &amp;gt; ALL (
SELECT salary
FROM employees
WHERE dept_id = (SELECT id FROM departments WHERE dept_name = &amp;#39;Engineering&amp;#39;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ALL&lt;/code&gt;æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœå­æŸ¥è¯¢ç»“æœé›†åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªæ¡ä»¶åˆ¤æ–­ä¸ºæœªçŸ¥ï¼ˆUNKNOWNï¼‰ï¼Œä»è€Œä¸è¿”å›ä»»ä½•è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;å­æŸ¥è¯¢è™½ç„¶å¼ºå¤§ï¼Œä½†ä½¿ç”¨ä¸å½“å®¹æ˜“å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯&lt;strong&gt;ç›¸å…³å­æŸ¥è¯¢&lt;/strong&gt;ï¼ˆä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œæ‰§è¡Œä¸€æ¬¡ï¼‰å’Œè¿”å›å¤§é‡ç»“æœçš„ &lt;code&gt;IN&lt;/code&gt;å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ &lt;code&gt;JOIN&lt;/code&gt;æ“ä½œ&lt;/strong&gt;ï¼šå¾ˆå¤šå­æŸ¥è¯¢ï¼ˆå°¤å…¶æ˜¯ &lt;code&gt;IN&lt;/code&gt;å’Œ &lt;code&gt;EXISTS&lt;/code&gt;å­æŸ¥è¯¢ï¼‰å¯ä»¥æ”¹å†™æˆ &lt;code&gt;JOIN&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;INNER JOIN&lt;/code&gt;, &lt;code&gt;LEFT JOIN ... IS NULL&lt;/code&gt;ï¼‰ï¼Œ&lt;code&gt;JOIN&lt;/code&gt;é€šå¸¸èƒ½æ›´å¥½åœ°åˆ©ç”¨ç´¢å¼•ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;IN&lt;/code&gt;è½¬ &lt;code&gt;JOIN&lt;/code&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å­æŸ¥è¯¢æ–¹å¼
SELECT product_name FROM products
WHERE product_id IN (SELECT product_id FROM order_details WHERE quantity &amp;gt; 10);
-- JOINæ–¹å¼ï¼ˆé€šå¸¸æ›´é«˜æ•ˆï¼‰
SELECT DISTINCT p.product_name
FROM products p
JOIN order_details od ON p.product_id = od.product_id
WHERE od.quantity &amp;gt; 10;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;EXISTS&lt;/code&gt;è½¬ &lt;code&gt;JOIN&lt;/code&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- EXISTSæ–¹å¼
SELECT customer_name FROM customers c
WHERE EXISTS (SELECT 1 FROM orders o WHERE o.customer_id = c.customer_id AND o.order_date &amp;gt; &amp;#39;2023-01-01&amp;#39;);
-- JOINæ–¹å¼ï¼ˆå¯èƒ½æ›´é«˜æ•ˆï¼‰
SELECT DISTINCT c.customer_name
FROM customers c
INNER JOIN orders o ON c.customer_id = o.customer_id
WHERE o.order_date &amp;gt; &amp;#39;2023-01-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›¸å…³å­æŸ¥è¯¢è½¬æ´¾ç”Ÿè¡¨ &lt;code&gt;JOIN&lt;/code&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åŸå§‹ç›¸å…³å­æŸ¥è¯¢ï¼šæ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨è–ªèµ„æœ€é«˜çš„å‘˜å·¥
SELECT e.employee_name, e.salary, e.department_id
FROM employees e
WHERE e.salary = (SELECT MAX(salary) FROM employees WHERE department_id = e.department_id);
-- ä¼˜åŒ–åï¼šä½¿ç”¨JOINå’Œæ´¾ç”Ÿè¡¨
SELECT e.employee_name, e.salary, e.department_id
FROM employees e
INNER JOIN (
SELECT department_id, MAX(salary) AS max_dept_salary
FROM employees
GROUP BY department_id
) AS max_salaries_per_dept
ON e.department_id = max_salaries_per_dept.department_id
AND e.salary = max_salaries_per_dept.max_dept_salary;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è°¨æ…é€‰æ‹© &lt;code&gt;IN&lt;/code&gt;ä¸ &lt;code&gt;EXISTS&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å­æŸ¥è¯¢ç»“æœé›†&lt;strong&gt;å¾ˆå¤§&lt;/strong&gt;æ—¶ï¼Œ&lt;code&gt;IN&lt;/code&gt;åˆ—è¡¨å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå½±å“æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å½“å­æŸ¥è¯¢ç»“æœé›†&lt;strong&gt;å¾ˆå°&lt;/strong&gt;ï¼Œä½†å¤–éƒ¨æŸ¥è¯¢è¡¨å¾ˆå¤§æ—¶ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;ï¼ˆå°¤å…¶æ˜¯å…³è”å­æŸ¥è¯¢ï¼‰å¯èƒ½æ•ˆç‡æ›´ä½ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸ºå¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œæ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;ï¼Œ&lt;code&gt;EXISTS&lt;/code&gt;çš„è¯­ä¹‰é€šå¸¸æ›´æ¸…æ™°ï¼Œä¸”åœ¨å…¶èƒ½åˆ©ç”¨ç´¢å¼•æ—¶æ•ˆç‡å¾ˆé«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿ç´¢å¼•çš„æœ‰æ•ˆæ€§&lt;/strong&gt;ï¼šä¸ºå­æŸ¥è¯¢çš„ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶åˆ—ã€è¿æ¥æ¡ä»¶åˆ—ä»¥åŠ &lt;code&gt;GROUP BY&lt;/code&gt;ã€&lt;code&gt;ORDER BY&lt;/code&gt;çš„åˆ—åˆ›å»ºåˆé€‚çš„ç´¢å¼•ï¼Œèƒ½æå¤§æå‡å­æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…è¿‡åº¦åµŒå¥—&lt;/strong&gt;ï¼šå¤šå±‚åµŒå¥—çš„å­æŸ¥è¯¢éš¾ä»¥é˜…è¯»ã€ç»´æŠ¤ä¸”æ€§èƒ½å¯èƒ½è¾ƒå·®ã€‚è€ƒè™‘ä½¿ç”¨&lt;strong&gt;ä¸´æ—¶è¡¨&lt;/strong&gt;æˆ– &lt;strong&gt;Common Table Expressions (CTE)&lt;/strong&gt;ï¼ˆMySQL 8.0+ æ”¯æŒ &lt;code&gt;WITH&lt;/code&gt;è¯­å¥ï¼‰æ¥åˆ†æ­¥å¤„ç†å¤æ‚é€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„å½±å“&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;NOT IN&lt;/code&gt;å­æŸ¥è¯¢æ—¶ï¼Œå¦‚æœå­æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œæ•´ä¸ª &lt;code&gt;NOT IN&lt;/code&gt;æ¡ä»¶å¯èƒ½ä¼šä¸ä¼šè¿”å›ä»»ä½•è¡Œã€‚åŠ¡å¿…å°å¿ƒå¤„ç†æˆ–ä½¿ç”¨ &lt;code&gt;NOT EXISTS&lt;/code&gt;æ›¿ä»£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL ä¸­çš„å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h2 id="å”¯ä¸€ç´¢å¼•"&gt;å”¯ä¸€ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;ã€‚MySQL ä¸­çš„ &lt;strong&gt;Unique ç´¢å¼•ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰å…è®¸ç´¢å¼•åˆ—åŒ…å«å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼&lt;/strong&gt;ã€‚è¿™æ˜¯å› ä¸º SQL æ ‡å‡†å°† &lt;code&gt;NULL&lt;/code&gt;è§†ä¸ºä¸€ä¸ªæœªçŸ¥æˆ–ç¼ºå¤±çš„å€¼ï¼Œä»»ä½•ä¸¤ä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼è¿›è¡Œæ¯”è¾ƒçš„ç»“æœéƒ½ä¸æ˜¯â€œç›¸ç­‰â€çš„ã€‚å› æ­¤ï¼Œå”¯ä¸€ç´¢å¼•çº¦æŸä¸ä¼šå°†å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼è§†ä¸ºé‡å¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ Unique ç´¢å¼•å¯¹ NULL å€¼çš„å¤„ç†ï¼Œä»¥åŠä¸ä¸»é”®çš„åŒºåˆ«ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;Unique ç´¢å¼•&lt;/th&gt;
&lt;th&gt;ä¸»é”® (Primary Key)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å…è®¸ NULL å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ˜¯&lt;/strong&gt; (å¤šæ•°DBMSå…è®¸å¤šä¸ªNULL)&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;NULL å€¼æ˜¯å¦å¿…é¡»å”¯ä¸€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;å¦&lt;/strong&gt; (ä¸è§†ä¸ºé‡å¤)&lt;/td&gt;
&lt;td&gt;- (ä¸å…è®¸å­˜åœ¨)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°é‡é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨å¯åˆ›å»º&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨&lt;strong&gt;åªèƒ½æœ‰&lt;/strong&gt;ä¸€ä¸ª&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®ä¿&lt;strong&gt;ä¸šåŠ¡æ•°æ®&lt;/strong&gt;çš„å”¯ä¸€æ€§ (å¦‚é‚®ç®±ã€æ‰‹æœºå·)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å”¯ä¸€æ ‡è¯†&lt;/strong&gt;æ¯ä¸€è¡Œè®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å…³äºæ­¤è§„åˆ™çš„ä¸€äº›è¯¦ç»†è¯´æ˜å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-å·¥ä½œæœºåˆ¶ä¸ç¤ºä¾‹"&gt;ğŸ” å·¥ä½œæœºåˆ¶ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå”¯ä¸€ç´¢å¼•çº¦æŸæ£€æŸ¥çš„æ˜¯é &lt;code&gt;NULL&lt;/code&gt;å€¼çš„å”¯ä¸€æ€§ã€‚å¯¹äº &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œåˆ™å…è®¸å­˜åœ¨å¤šä¸ªã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹è¡¨ç»“æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE users (
id INT AUTO_INCREMENT PRIMARY KEY,
email VARCHAR(255) UNIQUE, -- å”¯ä¸€ç´¢å¼•
username VARCHAR(50) UNIQUE -- å”¯ä¸€ç´¢å¼•
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¯ä»¥æˆåŠŸæ‰§è¡Œçš„æ’å…¥æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (email, username) VALUES (NULL, &amp;#39;user1&amp;#39;); -- æˆåŠŸ
INSERT INTO users (email, username) VALUES (NULL, &amp;#39;user2&amp;#39;); -- æˆåŠŸ
INSERT INTO users (email, username) VALUES (&amp;#39;admin@example.com&amp;#39;, NULL); -- æˆåŠŸ
INSERT INTO users (email, username) VALUES (&amp;#39;user@example.com&amp;#39;, NULL); -- æˆåŠŸ
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™äº›æ’å…¥æ“ä½œéƒ½èƒ½æˆåŠŸï¼Œå› ä¸º &lt;code&gt;NULL&lt;/code&gt;ä¸ &lt;code&gt;NULL&lt;/code&gt;ä¸è¢«è§†ä¸ºç›¸ç­‰ï¼Œå› æ­¤ä¸è¿åå”¯ä¸€æ€§çº¦æŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼šå¤±è´¥çš„æ’å…¥æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO users (email, username) VALUES (&amp;#39;admin@example.com&amp;#39;, &amp;#39;alice&amp;#39;); -- å¤±è´¥ï¼Œè¿åå”¯ä¸€ç´¢å¼•ï¼šDuplicate entry &amp;#39;admin@example.com&amp;#39; for key &amp;#39;email&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤æ“ä½œå¤±è´¥æ˜¯å› ä¸ºé &lt;code&gt;NULL&lt;/code&gt;å€¼ &lt;code&gt;'admin@example.com'&lt;/code&gt;å·²ç»å­˜åœ¨ï¼Œè¿åäº† &lt;code&gt;email&lt;/code&gt;åˆ—çš„å”¯ä¸€æ€§çº¦æŸã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®åº“å®ç°å·®å¼‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;è™½ç„¶ MySQL å’Œ PostgreSQL ç­‰æ•°æ®åº“å…è®¸å”¯ä¸€ç´¢å¼•ä¸­æœ‰å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä½† &lt;strong&gt;SQL Server ç­‰æ•°æ®åº“ä¸­çš„å”¯ä¸€ç´¢å¼•åªå…è®¸ä¸€ä¸ª &lt;code&gt;NULL&lt;/code&gt;å€¼&lt;/strong&gt;ã€‚åœ¨è¿›è¡Œæ•°æ®åº“è¿ç§»æˆ–è®¾è®¡è·¨å¹³å°åº”ç”¨æ—¶ï¼ŒåŠ¡å¿…æ³¨æ„è¿™ä¸€å·®å¼‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸šåŠ¡é€»è¾‘è€ƒè™‘&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;ä»æŠ€æœ¯è§’åº¦çœ‹ï¼ŒMySQL å…è®¸å”¯ä¸€ç´¢å¼•åˆ—å­˜åœ¨å¤šä¸ª &lt;code&gt;NULL&lt;/code&gt;ï¼Œä½†&lt;strong&gt;ä»ä¸šåŠ¡é€»è¾‘è§’åº¦ï¼Œä½ éœ€è¦è€ƒè™‘è¿™æ˜¯å¦åˆç†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;email&lt;/code&gt;å­—æ®µè®¾ä¸ºå”¯ä¸€ç´¢å¼•ä½†å…è®¸ä¸º &lt;code&gt;NULL&lt;/code&gt;ï¼Œå¯èƒ½æœ¬æ„æ˜¯å¸Œæœ›æ¯ä¸ªç”¨æˆ·åªèƒ½ç»‘å®šä¸€ä¸ªé‚®ç®±ï¼Œä½†â€œæœªç»‘å®šâ€çŠ¶æ€éƒ½ç”¨ &lt;code&gt;NULL&lt;/code&gt;è¡¨ç¤ºï¼Œå¯¼è‡´å¤šä¸ªç”¨æˆ·éƒ½å¤„äºâ€œæœªç»‘å®šâ€çŠ¶æ€ã€‚è¿™ç¬¦åˆæŠ€æœ¯è§„åˆ™ï¼Œä½†å¯èƒ½ä¼šå½±å“ä¸šåŠ¡æ•°æ®çš„å‡†ç¡®æ€§å’Œåç»­ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæœ‰æ—¶å°†åˆ—å®šä¹‰ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;å¹¶æä¾›ä¸€ä¸ªç‰¹æ®Šçš„é»˜è®¤å€¼ï¼ˆå¦‚ç©ºå­—ç¬¦ä¸² &lt;code&gt;''&lt;/code&gt;ï¼‰æ¥è¡¨ç¤ºâ€œæœªç»‘å®šâ€æˆ–â€œæœªçŸ¥â€ï¼Œå¯èƒ½æ˜¯æ›´æ¸…æ™°çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢ä¸ç´¢å¼•æ€§èƒ½&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;è™½ç„¶ &lt;code&gt;NULL&lt;/code&gt;å€¼å¯ä»¥å­˜åœ¨äºç´¢å¼•ä¸­ï¼Œä½†æŸ¥è¯¢åŒ…å«å¤§é‡ &lt;code&gt;NULL&lt;/code&gt;å€¼çš„åˆ—æ—¶ï¼ŒMySQL ä¼˜åŒ–å™¨å¯èƒ½ä¼šå› ä¸ºæ•°æ®åˆ†å¸ƒé—®é¢˜è€Œé€‰æ‹©ä¸ä½¿ç”¨ç´¢å¼•è¿›è¡Œå…¨è¡¨æ‰«æï¼Œå°¤å…¶æ˜¯æ‰§è¡Œ &lt;code&gt;IS NULL&lt;/code&gt;æˆ– &lt;code&gt;IS NOT NULL&lt;/code&gt;æ¡ä»¶æŸ¥è¯¢æ—¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è®¾è®¡å»ºè®®"&gt;ğŸ’¡ è®¾è®¡å»ºè®®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¡æ…ä½¿ç”¨ NULL&lt;/strong&gt;ï¼šåœ¨è®¾è®¡è¡¨ç»“æ„æ—¶ï¼Œä»”ç»†è¯„ä¼°æ¯ä¸ªå­—æ®µæ˜¯å¦çœŸçš„éœ€è¦å…è®¸ä¸º &lt;code&gt;NULL&lt;/code&gt;ã€‚å¦‚æœä¸šåŠ¡è¦æ±‚æŸå­—æ®µå¿…é¡»æœ‰å€¼ï¼Œå°±å°†å…¶è®¾ç½®ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨é»˜è®¤å€¼&lt;/strong&gt;ï¼šå¯¹äºä¸€äº›ç”¨äºæ ‡è¯†çŠ¶æ€çš„å­—æ®µï¼Œè€ƒè™‘ä½¿ç”¨ &lt;code&gt;NOT NULL&lt;/code&gt;çº¦æŸå¹¶ç»“åˆæœ‰æ„ä¹‰çš„é»˜è®¤å€¼ï¼ˆå¦‚ &lt;code&gt;DEFAULT ''&lt;/code&gt;æˆ– &lt;code&gt;DEFAULT 0&lt;/code&gt;ï¼‰ï¼Œè¿™é€šå¸¸æ¯”å…è®¸ &lt;code&gt;NULL&lt;/code&gt;æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®å”¯ä¸€æ€§èŒƒå›´&lt;/strong&gt;ï¼šå®šä¹‰å”¯ä¸€ç´¢å¼•å‰ï¼Œæƒ³æ¸…æ¥šæ˜¯å¸Œæœ›æ‰€æœ‰è®°å½•ï¼ˆåŒ…æ‹¬&lt;code&gt;NULL&lt;/code&gt;ï¼‰åœ¨ä¸šåŠ¡ä¸Šéƒ½å”¯ä¸€ï¼Œè¿˜æ˜¯ä»…ä»…é™åˆ¶é&lt;code&gt;NULL&lt;/code&gt;å€¼çš„å”¯ä¸€æ€§ã€‚MySQLçš„é»˜è®¤è¡Œä¸ºæ˜¯åè€…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„ã€‚&lt;/p&gt;
&lt;h2 id="å…¨æ–‡ç´¢å¼•"&gt;å…¨æ–‡ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;MySQL è§„å®šä¸€ä¸ªè¡¨åªèƒ½åˆ›å»ºä¸€ä¸ªå…¨æ–‡ç´¢å¼•ï¼Œè¿™ä¸»è¦æ˜¯åŸºäº&lt;strong&gt;æŠ€æœ¯å®ç°ã€æ€§èƒ½è€ƒé‡å’Œç®¡ç†æ•ˆç‡&lt;/strong&gt;çš„ç»¼åˆæƒè¡¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£æ ¸å¿ƒåŸå› ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è€ƒé‡ç»´åº¦&lt;/th&gt;
&lt;th&gt;å…·ä½“åŸå› &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ¤– æŠ€æœ¯å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨æ–‡ç´¢å¼•ä½¿ç”¨&lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;ç»“æ„ï¼Œå¹¶é€šè¿‡&lt;strong&gt;å”¯ä¸€çš„ &lt;code&gt;FTS_DOC_ID&lt;/code&gt;&lt;/strong&gt; åˆ—æ¥å…³è”æ‰€æœ‰è¢«ç´¢å¼•çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸš€ æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ç´¢å¼•&lt;strong&gt;å‡å°‘å­˜å‚¨å¼€é”€&lt;/strong&gt;å’Œ&lt;strong&gt;æå‡ç»´æŠ¤æ•ˆç‡&lt;/strong&gt;ï¼ˆå¦‚åˆ†è¯ã€ç¼“å­˜åˆ·æ–°ã€äº‹åŠ¡å¤„ç†ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ğŸ› ï¸ ç®¡ç†æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç®€åŒ–è®¾è®¡&lt;/strong&gt;ï¼Œé¿å…å¤šä¸ªç´¢å¼•å¯èƒ½å¸¦æ¥çš„å†²çªå’Œå¤æ‚æ€§ï¼Œ&lt;strong&gt;å•ç´¢å¼•å·²èƒ½æ»¡è¶³å¤šå­—æ®µæœç´¢éœ€æ±‚&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™äº›åŸå› ã€‚&lt;/p&gt;
&lt;h3 id="-1-æŠ€æœ¯å®ç°å€’æ’ç´¢å¼•ä¸ç»Ÿä¸€æ–‡æ¡£æ ‡è¯†"&gt;ğŸ¤– 1. æŠ€æœ¯å®ç°ï¼šå€’æ’ç´¢å¼•ä¸ç»Ÿä¸€æ–‡æ¡£æ ‡è¯†
&lt;/h3&gt;&lt;p&gt;å…¨æ–‡ç´¢å¼•çš„èƒŒåæ˜¯&lt;strong&gt;å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰&lt;/strong&gt;ã€‚å®ƒä¸åƒæ™®é€šç´¢å¼•é‚£æ ·ç›´æ¥æŒ‡å‘æ•°æ®è¡Œï¼Œè€Œæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‹†åˆ†æ–‡æœ¬&lt;/strong&gt;ï¼šå°†æ‰€æœ‰éœ€è¦ç´¢å¼•çš„æ–‡æœ¬å†…å®¹&lt;strong&gt;åˆ†è¯&lt;/strong&gt;ï¼Œå¾—åˆ°ä¸€ä¸ªä¸ªç‹¬ç«‹çš„è¯æ±‡å•å…ƒï¼ˆTokenï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»ºç«‹æ˜ å°„&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªè¯æ±‡å•å…ƒå»ºç«‹ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•åŒ…å«å®ƒçš„æ‰€æœ‰æ–‡æ¡£ï¼ˆæ•°æ®è¡Œï¼‰çš„IDä»¥åŠä½ç½®ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†é«˜æ•ˆç®¡ç†æ‰€æœ‰è¿™äº›è¯æ±‡åˆ°æ–‡æ¡£çš„æ˜ å°„ï¼ŒInnoDB å¼•æ“ï¼ˆMySQL 5.6åå…¨æ–‡ç´¢å¼•çš„ä¸»æµå¼•æ“ï¼‰ä¼šä¸ºæ¯ä¸ªæœ‰å…¨æ–‡ç´¢å¼•çš„è¡¨ç»´æŠ¤ä¸€ä¸ª&lt;strong&gt;ç»Ÿä¸€çš„å”¯ä¸€æ–‡æ¡£æ ‡è¯†ç¬¦ &lt;code&gt;FTS_DOC_ID&lt;/code&gt;&lt;/strong&gt;ã€‚è¿™ä¸ªåˆ—è¦ä¹ˆç”±ä½ åœ¨è¡¨è®¾è®¡æ—¶æ˜¾å¼åˆ›å»ºï¼Œè¦ä¹ˆç”± InnoDB è‡ªåŠ¨ä¸ºä½ åˆ›å»ºä¸€ä¸ªéšè—çš„ &lt;code&gt;FTS_DOC_ID&lt;/code&gt;åˆ—ã€‚æ‰€æœ‰çš„åˆ†è¯å’Œä½ç½®ä¿¡æ¯éƒ½é€šè¿‡è¿™ä¸ªå”¯ä¸€çš„ &lt;code&gt;DOC_ID&lt;/code&gt;å…³è”å›åŸå§‹æ•°æ®è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå…è®¸åˆ›å»ºå¤šä¸ªå…¨æ–‡ç´¢å¼•ï¼Œå°±éœ€è¦ç»´æŠ¤å¤šå¥—è¿™æ ·çš„å€’æ’ç´¢å¼•ç»“æ„å’Œå¤šä¸ª &lt;code&gt;FTS_DOC_ID&lt;/code&gt;åˆ—ï¼Œè¿™ä¼šåœ¨æŠ€æœ¯å®ç°ä¸Šå˜å¾—éå¸¸å¤æ‚å’Œå†—ä½™ã€‚&lt;/p&gt;
&lt;h3 id="-2-æ€§èƒ½ä¸å­˜å‚¨å•ç´¢å¼•æ›´é«˜æ•ˆ"&gt;ğŸš€ 2. æ€§èƒ½ä¸å­˜å‚¨ï¼šå•ç´¢å¼•æ›´é«˜æ•ˆ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘å­˜å‚¨å¼€é”€&lt;/strong&gt;ï¼šå€’æ’ç´¢å¼•æœ¬èº«å¯èƒ½æ¯”åŸå§‹æ•°æ®è¿˜è¦å¤§ã€‚&lt;strong&gt;å•ä¸ªç»„åˆå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼ˆç´¢å¼•å¤šä¸ªåˆ—ï¼‰ç›¸æ¯”&lt;strong&gt;å¤šä¸ªç‹¬ç«‹å…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼Œå…¶æ€»ä½“å­˜å‚¨å ç”¨é€šå¸¸ä¼šæ›´å°‘ã€‚å› ä¸ºä¸€äº›å…¬å…±çš„è¯æ±‡å’Œå…ƒæ•°æ®å¯ä»¥å…±äº«ï¼Œé¿å…äº†é‡å¤å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå‡ç»´æŠ¤æ•ˆç‡&lt;/strong&gt;ï¼šå½“æ•°æ®æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ—¶ï¼Œæ•°æ®åº“éœ€è¦æ›´æ–°ç´¢å¼•ã€‚ç»´æŠ¤ä¸€ä¸ªå¤§çš„å…¨æ–‡ç´¢å¼•æ¯”ç»´æŠ¤å¤šä¸ªå°çš„å…¨æ–‡ç´¢å¼•æ›´é«˜æ•ˆã€‚è¿™å‡å°‘äº†åœ¨æ‰¹é‡æ•°æ®æ“ä½œæˆ–é«˜å¹¶å‘å†™å…¥æ—¶å¯èƒ½å‘ç”Ÿçš„&lt;strong&gt;ç£ç›˜I/Oäº‰ç”¨å’Œç¼“å­˜åˆ·æ–°æ¬¡æ•°&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œå…¨æ–‡æœç´¢æ—¶ï¼ŒMySQL ä¼˜åŒ–å™¨åªéœ€è¦å¤„ç†ä¸€ä¸ªç´¢å¼•ç»“æ„ã€‚å¦‚æœè¦å¤„ç†å¤šä¸ªç´¢å¼•ï¼Œä¼˜åŒ–å™¨å¯èƒ½è¿˜éœ€è¦è€ƒè™‘å¦‚ä½•åˆå¹¶ä¸åŒç´¢å¼•çš„æœç´¢ç»“æœï¼ˆè¿™å¹¶éå…¨æ–‡æœç´¢çš„å¼ºé¡¹ï¼‰ï¼Œåè€Œä¼šå¢åŠ æŸ¥è¯¢çš„å¤æ‚æ€§å’Œå»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-3-è®¾è®¡ä¸ç®¡ç†çš„ç®€åŒ–"&gt;ğŸ› ï¸ 3. è®¾è®¡ä¸ç®¡ç†çš„ç®€åŒ–
&lt;/h3&gt;&lt;p&gt;MySQL çš„è®¾è®¡ç†å¿µåœ¨æ­¤å€¾å‘äºç®€åŒ–å’Œå®ç”¨ä¸»ä¹‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªç´¢å¼•ï¼Œå¤šå­—æ®µæ”¯æŒ&lt;/strong&gt;ï¼šä½ å®Œå…¨å¯ä»¥åœ¨&lt;strong&gt;ä¸€ä¸ªå…¨æ–‡ç´¢å¼•ä¸­åŒ…å«å¤šä¸ªåˆ—&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;FULLTEXT(title, content, author_bio)&lt;/code&gt;ï¼‰ã€‚è¿™å®é™…ä¸Šå®ç°äº†ä¸€ä¸ªâ€œå¤šåŠŸèƒ½â€çš„ç´¢å¼•ï¼Œå¯ä»¥åŒæ—¶é’ˆå¯¹è¿™äº›åˆ—çš„ä»»ä½•ç»„åˆè¿›è¡Œæœç´¢ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™å·²ç»è¶³å¤Ÿæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œæ— éœ€ä¸ºæ¯ä¸ªåˆ—å•ç‹¬å»ºç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…å†²çªä¸æ··æ·†&lt;/strong&gt;ï¼šé™åˆ¶ä¸€ä¸ªç´¢å¼•é¿å…äº†å¤šä¸ªç´¢å¼•å¯èƒ½å¸¦æ¥çš„æ½œåœ¨å†²çªå’Œç®¡ç†å¤æ‚æ€§ï¼Œä¾‹å¦‚éœ€è¦å†³å®šåœ¨æŸ¥è¯¢æ—¶ä¼˜å…ˆä½¿ç”¨å“ªä¸ªç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•é«˜æ•ˆä½¿ç”¨å•ä¸ªå…¨æ–‡ç´¢å¼•"&gt;ğŸ’¡ å¦‚ä½•é«˜æ•ˆä½¿ç”¨å•ä¸ªå…¨æ–‡ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶åªèƒ½åˆ›å»ºä¸€ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥æŠŠå®ƒç”¨å¥½ã€‚æœ€ä½³å®è·µæ˜¯&lt;strong&gt;åˆ›å»ºä¸€ä¸ªè¦†ç›–æ‰€æœ‰éœ€è¦è¿›è¡Œæ–‡æœ¬æœç´¢åˆ—çš„è”åˆå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE articles (
id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
title VARCHAR(200),
content TEXT,
author VARCHAR(100),
-- åˆ›å»ºä¸€ä¸ªè¦†ç›– title, content, author ä¸‰åˆ—çš„å…¨æ–‡ç´¢å¼•
FULLTEXT idx_fulltext (title, content, author)
) ENGINE=InnoDB;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ›å»ºåï¼Œä½ å¯ä»¥çµæ´»åœ°æœç´¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰å­—æ®µ&lt;/strong&gt;ï¼š&lt;code&gt;MATCH (title, content, author) AGAINST ('keyword')&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹å®šå­—æ®µ&lt;/strong&gt;ï¼ˆè™½ç„¶è¯­æ³•ä¸Šä¸æ”¯æŒç›´æ¥æŒ‡å®šï¼Œä½†å¯é€šè¿‡æŸ¥è¯¢æ¡ä»¶æ¨¡æ‹Ÿä¾§é‡æŸä¸ªå­—æ®µçš„æœç´¢ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;âš–ï¸ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒMySQL é™åˆ¶ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªå…¨æ–‡ç´¢å¼•ï¼Œå°±åƒæ˜¯ç»™äº†ä½ ä¸€ä¸ª&lt;strong&gt;åŠŸèƒ½å¼ºå¤§çš„å¤šåŠŸèƒ½å·¥å…·ç®±&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ä¸€å †åˆ†æ•£çš„å•åŠŸèƒ½å·¥å…·ã€‚è¿™æ ·è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¿éšœæ€§èƒ½&lt;/strong&gt;ï¼šé™ä½äº†å­˜å‚¨æˆæœ¬å’Œç´¢å¼•ç»´æŠ¤çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–ç®¡ç†&lt;/strong&gt;ï¼šé¿å…äº†å¤šç´¢å¼•å¸¦æ¥çš„å¤æ‚æ€§å’Œæ½œåœ¨é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ»¡è¶³éœ€æ±‚&lt;/strong&gt;ï¼šé€šè¿‡&lt;strong&gt;åˆ›å»ºç»„åˆç´¢å¼•&lt;/strong&gt;ï¼ˆç´¢å¼•å¤šä¸ªåˆ—ï¼‰ï¼Œè¿™ä¸€ä¸ªç´¢å¼•å°±èƒ½æ»¡è¶³ç»å¤§å¤šæ•°åœºæ™¯ä¸‹çš„å¤šå­—æ®µå…¨æ–‡æœç´¢éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªé™åˆ¶æ˜¯æ•°æ®åº“å¼•æ“åœ¨æƒè¡¡äº†åŠŸèƒ½ã€æ€§èƒ½å’Œå¤æ‚æ€§ä¹‹ååšå‡ºçš„åˆç†è®¾è®¡ã€‚&lt;/p&gt;
&lt;h2 id="éèšé›†ç´¢å¼•"&gt;éèšé›†ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;ä½ æå‡ºçš„è¿™ä¸ªé—®é¢˜éå¸¸ä¸“ä¸šï¼Œè§¦åŠäº†éèšé›†ç´¢å¼•çš„æ ¸å¿ƒå·¥ä½œæœºåˆ¶ã€‚è¿™å¥è¯æ˜¯&lt;strong&gt;é”™è¯¯çš„&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæ··æ·†äº†&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;å’Œ&lt;strong&gt;éèšé›†ç´¢å¼•&lt;/strong&gt;æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h3 id="-å¿«é€Ÿå¯¹æ¯”èšé›†-vs-éèšé›†ç´¢å¼•"&gt;ğŸ“š å¿«é€Ÿå¯¹æ¯”ï¼šèšé›† vs. éèšé›†ç´¢å¼•
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;èšé›†ç´¢å¼• (Clustered Index)&lt;/th&gt;
&lt;th&gt;éèšé›†ç´¢å¼• (Non-Clustered Index)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥&lt;/strong&gt;å†³å®šæ•°æ®è¡Œçš„&lt;strong&gt;ç‰©ç†é¡ºåº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹&lt;/strong&gt;äºæ•°æ®è¡Œçš„ç‰©ç†é¡ºåºï¼Œåˆ›å»º&lt;strong&gt;é¢å¤–çš„ç»“æ„&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°é‡é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨&lt;strong&gt;åªèƒ½æœ‰&lt;/strong&gt;ä¸€ä¸ª&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªè¡¨&lt;strong&gt;å¯ä»¥æœ‰å¤š&lt;/strong&gt;ä¸ª&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¶å­èŠ‚ç‚¹å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç›´æ¥å­˜å‚¨&lt;/strong&gt;å®Œæ•´çš„&lt;strong&gt;æ•°æ®è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å­˜å‚¨ç´¢å¼•é”®å€¼ + &lt;strong&gt;æŒ‡å‘æ•°æ®è¡Œçš„æŒ‡é’ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç±»æ¯”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ±‰è¯­å­—å…¸æŒ‰&lt;strong&gt;æ‹¼éŸ³é¡ºåº&lt;/strong&gt;æ’åˆ—çš„æ­£æ–‡æœ¬èº«&lt;/td&gt;
&lt;td&gt;å­—å…¸æŒ‰&lt;strong&gt;éƒ¨é¦–æˆ–ç¬”ç”»&lt;/strong&gt;æŸ¥å­—çš„&lt;strong&gt;ç›®å½•&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£éèšé›†ç´¢å¼•"&gt;ğŸ” è¯¦è§£éèšé›†ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;éèšé›†ç´¢å¼•æ˜¯ä¸€ç§&lt;strong&gt;ç‹¬ç«‹äºè¡¨æ•°æ®å­˜å‚¨ç»“æ„&lt;/strong&gt;çš„ç´¢å¼•ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æœ¬ä¹¦&lt;strong&gt;æœ€åçš„ç‹¬ç«‹ç´¢å¼•ç›®å½•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“åˆ›å»ºä¸€ä¸ªéèšé›†ç´¢å¼•æ—¶ï¼ˆä¾‹å¦‚åœ¨ &lt;code&gt;last_name&lt;/code&gt;åˆ—ä¸Šï¼‰ï¼Œæ•°æ®åº“ä¼š&lt;strong&gt;ç”Ÿæˆä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼ˆé€šå¸¸æ˜¯B+æ ‘ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¯¹ç´¢å¼•åˆ—ï¼ˆ&lt;code&gt;last_name&lt;/code&gt;ï¼‰çš„å€¼è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†æ’åºåçš„é”®å€¼ä¸æ¯ä¸ªæ•°æ®è¡Œä½ç½®çš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ä¸€èµ·å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šè¿™ä¸ªæ“ä½œ&lt;strong&gt;åªå¯¹ç´¢å¼•åˆ—çš„å€¼è¿›è¡Œæ’åº&lt;/strong&gt;ï¼Œå¹¶&lt;strong&gt;ä¸ä¼šç§»åŠ¨æˆ–é‡æ–°ç»„ç»‡&lt;/strong&gt;åŸå§‹è¡¨æ•°æ®é¡µä¸­çš„å®é™…æ•°æ®è¡Œã€‚åŸå§‹æ•°æ®çš„ç‰©ç†é¡ºåºä¿æŒä¸å˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢æ—¶å¦‚ä½•å·¥ä½œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ æ‰§è¡Œ &lt;code&gt;SELECT * FROM employees WHERE last_name = 'Smith'&lt;/code&gt;æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“å¼•æ“&lt;strong&gt;é¦–å…ˆæŸ¥æ‰¾&lt;/strong&gt; &lt;code&gt;last_name&lt;/code&gt;ä¸Šçš„éèšé›†ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ‰¾åˆ° &lt;code&gt;'Smith'&lt;/code&gt;å’Œå¯¹åº”çš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åæ ¹æ®è¿™ä¸ª&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;å»åŸå§‹æ•°æ®é¡µçš„&lt;strong&gt;ç‰©ç†ä½ç½®&lt;/strong&gt;è¯»å–å®Œæ•´çš„æ•°æ®è¡Œã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º&lt;strong&gt;å›è¡¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¿™å¥è¯ä¸ºä»€ä¹ˆé”™è¯¯"&gt;âŒ è¿™å¥è¯ä¸ºä»€ä¹ˆé”™è¯¯ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;â€œä½¿ç”¨éèšé›†ç´¢å¼•éœ€è¦å°†ç‰©ç†æ•°æ®é¡µä¸­çš„æ•°æ®æŒ‰åˆ—é‡æ–°æ’åºâ€ çš„è¯´æ³•æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºå®ƒé”™è¯¯åœ°æè¿°äº†éèšé›†ç´¢å¼•çš„åˆ›å»ºè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çœŸç›¸&lt;/strong&gt;ï¼šåˆ›å»ºéèšé›†ç´¢å¼•æ—¶ï¼Œ&lt;strong&gt;åªä¼šå¯¹ç´¢å¼•é”®åˆ—è¿›è¡Œæ’åº&lt;/strong&gt;ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª&lt;strong&gt;ç‹¬ç«‹çš„ã€æœ‰åºçš„ç´¢å¼•ç»“æ„&lt;/strong&gt;ã€‚è¿™ä¸ªæ“ä½œ&lt;strong&gt;å®Œå…¨ä¸ä¼šå½±å“&lt;/strong&gt;åŸå§‹æ•°æ®é¡µä¸­æ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåºã€‚åŸå§‹æ•°æ®å¯ä»¥æ˜¯ä»¥ä»»ä½•é¡ºåºï¼ˆæ¯”å¦‚æŒ‰ç…§ä¸»é”®æˆ–æ’å…¥é¡ºåºï¼‰å­˜æ”¾çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹æ¯”&lt;/strong&gt;ï¼šçœŸæ­£éœ€è¦&lt;strong&gt;å°†ç‰©ç†æ•°æ®é¡µä¸­çš„æ•°æ®æŒ‰åˆ—é‡æ–°æ’åº&lt;/strong&gt;çš„æ˜¯&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;ã€‚å› ä¸ºèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å°±æ˜¯æ•°æ®è¡Œæœ¬èº«ï¼Œæ‰€ä»¥åˆ›å»ºèšé›†ç´¢å¼•ä¼šçœŸæ­£åœ°&lt;strong&gt;é‡æ–°ç»„ç»‡ç£ç›˜ä¸Šæ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåº&lt;/strong&gt;ï¼Œä½¿å…¶ä¸ç´¢å¼•é”®çš„é¡ºåºä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸€ä¸ªé‡è¦ä¾‹å¤–è¦†ç›–ç´¢å¼•"&gt;ğŸ’¡ ä¸€ä¸ªé‡è¦ä¾‹å¤–ï¼šè¦†ç›–ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;è™½ç„¶éèšé›†ç´¢å¼•é€šå¸¸éœ€è¦â€œå›è¡¨â€æ“ä½œï¼Œä½†æœ‰ä¸€ä¸ªä¼˜åŒ–æŠ€å·§å¯ä»¥é¿å…å®ƒï¼š&lt;strong&gt;è¦†ç›–ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„æŸ¥è¯¢&lt;strong&gt;åªéœ€è¦&lt;/strong&gt;ä»éèšé›†ç´¢å¼•ä¸­è·å–çš„åˆ—ï¼ˆä¾‹å¦‚ &lt;code&gt;SELECT last_name FROM employees WHERE last_name = 'Smith'&lt;/code&gt;ï¼‰ï¼Œé‚£ä¹ˆç´¢å¼•æœ¬èº«å°±å·²ç»åŒ…å«äº†æ‰€æœ‰éœ€è¦çš„æ•°æ®ã€‚æ•°æ®åº“å¼•æ“&lt;strong&gt;æ— éœ€å›è¡¨&lt;/strong&gt;æŸ¥æ‰¾ï¼Œå¯ä»¥ç›´æ¥ä»ç´¢å¼•ä¸­è¿”å›ç»“æœï¼Œè¿™ä¼šæå¤§åœ°æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è®°ä½è¿™ä¸ªæ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;ï¼šæ˜¯&lt;strong&gt;æ•°æ®æœ¬èº«&lt;/strong&gt;çš„ç‰©ç†æ’åºã€‚ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éèšé›†ç´¢å¼•&lt;/strong&gt;ï¼šæ˜¯&lt;strong&gt;ç‹¬ç«‹ç›®å½•&lt;/strong&gt;çš„é€»è¾‘æ’åºï¼Œå…¶å¶å­èŠ‚ç‚¹åŒ…å«çš„æ˜¯æŒ‡å‘æ•°æ®è¡Œçš„&lt;strong&gt;æŒ‡é’ˆ&lt;/strong&gt;ï¼Œ&lt;strong&gt;ä¸ä¼š&lt;/strong&gt;æ”¹å˜æ•°æ®çš„ç‰©ç†é¡ºåºã€‚ä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®ä½ å½»åº•ç†è§£è¿™ä¸ªæ¦‚å¿µï¼&lt;/p&gt;
&lt;h2 id="order-by-null"&gt;order by null
&lt;/h2&gt;&lt;p&gt;ç†è§£ MySQL ä¸­ &lt;code&gt;GROUP BY&lt;/code&gt;çš„é»˜è®¤æ’åºè¡Œä¸ºå’Œ &lt;code&gt;ORDER BY NULL&lt;/code&gt;çš„ç”¨é€”ï¼Œå¯¹äºç¼–å†™é«˜æ•ˆä¸”ç¬¦åˆé¢„æœŸçš„ SQL æŸ¥è¯¢å¾ˆé‡è¦ã€‚è¿™å…¶ä¸­ MySQL ç‰ˆæœ¬æ˜¯ä¸€ä¸ªå…³é”®å› ç´ ã€‚æˆ‘ä¼šé€šè¿‡ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼å’Œè¯¦ç»†è§£é‡Šæ¥è¯´æ˜å®ƒä»¬åœ¨ä¸åŒç‰ˆæœ¬ä¸­çš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;MySQL 5.7 åŠæ›´æ—©ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;MySQL 8.0 åŠæ›´æ–°ç‰ˆæœ¬&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GROUP BY é»˜è®¤è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹åˆ†ç»„å­—æ®µè¿›è¡Œ&lt;strong&gt;éšå¼æ’åº&lt;/strong&gt;ï¼ˆé€šå¸¸å‡åºï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸å†è¿›è¡Œä»»ä½•éšå¼æ’åº&lt;/strong&gt;ï¼Œç»“æœé›†é¡ºåºä¸ç¡®å®š&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ORDER BY NULL çš„ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ‘åˆ¶&lt;/strong&gt; GROUP BY çš„éšå¼æ’åºï¼Œ&lt;strong&gt;æå‡æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;ï¼ˆé¿å… filesortï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬æ— æ•ˆæœ&lt;/strong&gt;ï¼ˆå› ä¸ºéšå¼æ’åºå·²ç§»é™¤ï¼‰ï¼Œä½†è¯­æ³•ä»åˆæ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èåšæ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜¾å¼ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;ä¿è¯é¡ºåºï¼Œæˆ–ç”¨ &lt;code&gt;ORDER BY NULL&lt;/code&gt;è¿½æ±‚æ€§èƒ½&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»&lt;/strong&gt;æ˜¾å¼ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥æŒ‡å®šä»»ä½•éœ€è¦çš„æ’åº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-group-by-çš„éšå¼æ’åºåŠå…¶æ¼”å˜"&gt;ğŸ“Š GROUP BY çš„éšå¼æ’åºåŠå…¶æ¼”å˜
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;strong&gt;MySQL 5.7 åŠæ›´æ—©ç‰ˆæœ¬&lt;/strong&gt;ä¸­ï¼Œå½“ä½ ä½¿ç”¨ &lt;code&gt;GROUP BY&lt;/code&gt;å­å¥æ—¶ï¼ŒMySQL é»˜è®¤ä¼šå¯¹åˆ†ç»„å­—æ®µè¿›è¡Œ&lt;strong&gt;éšå¼æ’åº&lt;/strong&gt;ï¼ˆImplicit Sortingï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ä½ çš„ SQL è¯­å¥ä¸­æ²¡æœ‰åŒ…å« &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ï¼Œ&lt;code&gt;GROUP BY&lt;/code&gt;çš„ç»“æœé›†é€šå¸¸ä¼šæŒ‰ç…§åˆ†ç»„å­—æ®µçš„å‡åºï¼ˆASCï¼‰æ’åˆ—ã€‚è¿™ç§è¡Œä¸ºåœ¨æŸäº›æƒ…å†µä¸‹ç®€åŒ–äº†æŸ¥è¯¢ï¼Œä½†å¯èƒ½ä¼šå¸¦æ¥ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œå› ä¸ºæ•°æ®åº“éœ€è¦æ‰§è¡Œæ’åºæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä» &lt;strong&gt;MySQL 8.0&lt;/strong&gt; å¼€å§‹ï¼Œå¼€å‘å›¢é˜Ÿç§»é™¤äº† &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åºç‰¹æ€§ã€‚&lt;strong&gt;åœ¨ MySQL 8.0 åŠä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;code&gt;GROUP BY&lt;/code&gt;ä¸å†ä¿è¯ç»“æœé›†çš„ä»»ä½•ç‰¹å®šé¡ºåº&lt;/strong&gt;ï¼Œé™¤éä½ æ˜¾å¼åœ°ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ã€‚è¿™ä¸€å˜æ›´æ˜¯ä¸ºäº†éµå¾ª SQL æ ‡å‡†ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„æ’åºæ“ä½œä»¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id="-order-by-null-çš„ç”¨é€”ä¸ç‰ˆæœ¬å·®å¼‚"&gt;âš™ï¸ ORDER BY NULL çš„ç”¨é€”ä¸ç‰ˆæœ¬å·®å¼‚
&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;strong&gt;MySQL 5.7 æ—¶ä»£&lt;/strong&gt;ï¼Œ&lt;code&gt;ORDER BY NULL&lt;/code&gt;æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç”¨é€”ï¼š&lt;strong&gt;æ˜¾å¼åœ°å‘ŠçŸ¥ä¼˜åŒ–å™¨ä¸è¦å¯¹ &lt;code&gt;GROUP BY&lt;/code&gt;çš„ç»“æœè¿›è¡Œéšå¼æ’åº&lt;/strong&gt;ã€‚åœ¨ä¸€äº›å¤æ‚çš„æŸ¥è¯¢ä¸­ï¼Œå³ä½¿æ²¡æœ‰ &lt;code&gt;GROUP BY&lt;/code&gt;ï¼Œä¼˜åŒ–å™¨ä¹Ÿå¯èƒ½å¼•å…¥æ’åºæ“ä½œã€‚ä½¿ç”¨ &lt;code&gt;ORDER BY NULL&lt;/code&gt;å¯ä»¥æŠ‘åˆ¶è¿™ç§ä¸å¿…è¦çš„æ’åºï¼Œä»è€Œå‡å°‘ &lt;code&gt;Using filesort&lt;/code&gt;çš„å‡ºç°ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;MySQL 8.0+&lt;/strong&gt; ä¸­ï¼Œç”±äº &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åºå·²è¢«ç§»é™¤ï¼Œ&lt;code&gt;ORDER BY NULL&lt;/code&gt;åŸå…ˆçš„æ ¸å¿ƒä½œç”¨ï¼ˆæŠ‘åˆ¶éšå¼æ’åºï¼‰ä¹Ÿå°±å¤±å»äº†æ„ä¹‰ã€‚è™½ç„¶è¯­å¥ä¸ä¼šæŠ¥é”™ï¼Œä½†å®ƒé€šå¸¸ä¸ä¼šäº§ç”Ÿä»»ä½•å®é™…æ•ˆæœï¼Œå› ä¸ºæ•°æ®åº“æœ¬æ¥å°±ä¸ä¼šè¿›è¡Œéšå¼æ’åºäº†ã€‚æ­¤æ—¶ï¼Œä»»ä½•éœ€è¦çš„æ’åºéƒ½å¿…é¡»é€šè¿‡æ˜¾å¼çš„ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®æ§åˆ¶æ’åº"&gt;ğŸ› ï¸ å¦‚ä½•æ­£ç¡®æ§åˆ¶æ’åº
&lt;/h3&gt;&lt;p&gt;æ— è®ºä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ MySQLï¼Œéµå¾ªä»¥ä¸‹å®è·µéƒ½èƒ½è®©ä½ çš„æŸ¥è¯¢æ›´æ¸…æ™°ã€é«˜æ•ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜ç¡®éœ€æ±‚&lt;/strong&gt;ï¼šé¦–å…ˆæƒ³æ¸…æ¥šä½ æ˜¯å¦çœŸçš„éœ€è¦æ’åºåçš„ç»“æœã€‚å¯¹äºåªæ˜¯è¿›è¡Œåˆ†ç»„èšåˆã€è€Œåç«¯ç¨‹åºæˆ–ä¸­é—´ä»¶ä¸å…³å¿ƒé¡ºåºçš„åœºæ™¯ï¼Œæ¥å—å…¶è‡ªç„¶é¡ºåºå³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼ä½¿ç”¨ ORDER BY&lt;/strong&gt;ï¼šå½“ä½ &lt;strong&gt;ç¡®å®éœ€è¦&lt;/strong&gt;å¯¹ç»“æœè¿›è¡Œæ’åºæ—¶ï¼Œæ— è®ºä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„ MySQLï¼Œæœ€å¯é å’Œæ¨èçš„åšæ³•å§‹ç»ˆæ˜¯&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ˜ç¡®æŒ‡å®šæ’åºçš„å­—æ®µå’Œæ–¹å‘ï¼ˆASC æˆ– DESCï¼‰&lt;/strong&gt;ã€‚è¿™æ˜¯ä¿è¯ç»“æœé¡ºåºçš„å”¯ä¸€æ ‡å‡†æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS emp_count
FROM employees
GROUP BY department
ORDER BY department ASC; -- æ˜¾å¼æŒ‡å®šæŒ‰éƒ¨é—¨åç§°å‡åºæ’åˆ—
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬é€‚é…ä¸ä»£ç è¿ç§»&lt;/strong&gt;ï¼šå¦‚æœä½ çš„é¡¹ç›®æ¶‰åŠä» MySQL 5.7 è¿ç§»åˆ° 8.0ï¼Œéœ€è¦æ£€æŸ¥æ‰€æœ‰ä¾èµ– &lt;code&gt;GROUP BY&lt;/code&gt;éšå¼æ’åºçš„ SQL è¯­å¥ï¼Œå¹¶&lt;strong&gt;æ·»åŠ æ˜¾å¼çš„ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½å‡ºç°ç»“æœé¡ºåºä¸ä¸€è‡´çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…³äº-null-å€¼åœ¨æ’åºä¸­çš„å¤„ç†"&gt;ğŸ’ å…³äº NULL å€¼åœ¨æ’åºä¸­çš„å¤„ç†
&lt;/h3&gt;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå½“ä½ ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å¯¹æŸä¸ªå­—æ®µè¿›è¡Œæ’åºæ—¶ï¼Œå¦‚æœè¯¥å­—æ®µå­˜åœ¨ NULL å€¼ï¼Œ&lt;strong&gt;MySQL é»˜è®¤å°† NULL å€¼è§†ä¸ºæœ€å°å€¼&lt;/strong&gt;ï¼Œåœ¨å‡åºæ’åºï¼ˆ&lt;code&gt;ASC&lt;/code&gt;ï¼‰ä¸­ä¼šæ’åœ¨æœ€å‰é¢ï¼Œåœ¨é™åºæ’åºï¼ˆ&lt;code&gt;DESC&lt;/code&gt;ï¼‰ä¸­ä¼šæ’åœ¨æœ€åé¢ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦æ”¹å˜ NULL å€¼çš„é»˜è®¤æ’åºä½ç½®ï¼Œå¯ä»¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ MySQL 8.0+ ä¸­&lt;/strong&gt;ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;ORDER BY column_name ASC NULLS LAST&lt;/code&gt;æˆ– &lt;code&gt;ORDER BY column_name DESC NULLS FIRST&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨æ›´æ—©çš„ç‰ˆæœ¬ä¸­&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡æŠ€å·§å®ç°ï¼Œä¾‹å¦‚ &lt;code&gt;ORDER BY IS NULL(column_name), column_name&lt;/code&gt;æ¥å°† NULL å€¼æ’åœ¨æœ€åã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;GROUP BY&lt;/code&gt;å’Œ &lt;code&gt;ORDER BY&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="set-constraints"&gt;SET CONSTRAINTS
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;æ˜¯ä¸€ä¸ª SQL å‘½ä»¤ï¼Œç”¨äº&lt;strong&gt;è®¾ç½®å½“å‰äº‹åŠ¡ä¸­çº¦æŸæ£€æŸ¥çš„æ—¶æœº&lt;/strong&gt;ã€‚å®ƒå…è®¸ä½ æ§åˆ¶æŸäº›çº¦æŸæ˜¯åœ¨æ¯æ¡ SQL è¯­å¥æ‰§è¡Œåç«‹å³æ£€æŸ¥ï¼Œè¿˜æ˜¯å»¶è¿Ÿåˆ°æ•´ä¸ªäº‹åŠ¡æäº¤æ—¶å†ç»Ÿä¸€æ£€æŸ¥ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºå¤„ç†å¤æ‚çš„ã€å¯èƒ½å­˜åœ¨ä¸´æ—¶æ€§çº¦æŸè¿åçš„äº‹åŠ¡éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å…¶æ ¸å¿ƒæœºåˆ¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¯¹æ¯”è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IMMEDIATE (ç«‹å³æ¨¡å¼)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;DEFERRED (å»¶è¿Ÿæ¨¡å¼)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ£€æŸ¥æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¯æ¡è¯­å¥æ‰§è¡Œå®Œæ¯•å&lt;/strong&gt;ç«‹å³æ£€æŸ¥&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;äº‹åŠ¡æäº¤æ—¶&lt;/strong&gt;æ‰ç»Ÿä¸€æ£€æŸ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼Œè¦æ±‚å•æ¡è¯­å¥å°±å¿…é¡»æ»¡è¶³æ‰€æœ‰çº¦æŸ&lt;/td&gt;
&lt;td&gt;é«˜ï¼Œå…è®¸äº‹åŠ¡å†…éƒ¨ä¸´æ—¶è¿åçº¦æŸï¼Œåªè¦æœ€ç»ˆæäº¤æ—¶æ»¡è¶³å³å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ¨¡å¼ï¼Œé€‚åˆå¤§å¤šæ•°ç®€å•æ“ä½œ&lt;/td&gt;
&lt;td&gt;å­˜åœ¨æ“ä½œé—´å¾ªç¯ä¾èµ–æˆ–éœ€è¦ç‰¹å®šé¡ºåºçš„å¤æ‚äº‹åŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿæ•ˆæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;SET CONSTRAINTS ... IMMEDIATE&lt;/code&gt;è®¾ç½®&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;SET CONSTRAINTS ... DEFERRED&lt;/code&gt;è®¾ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å…³äº &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;çš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id="-çº¦æŸçš„åˆå§‹ç‰¹æ€§"&gt;ğŸ“Œ çº¦æŸçš„åˆå§‹ç‰¹æ€§
&lt;/h3&gt;&lt;p&gt;åœ¨æ•°æ®åº“ä¸­ï¼Œçº¦æŸï¼ˆå¦‚å¤–é”®çº¦æŸï¼‰åœ¨åˆ›å»ºæ—¶å°±è¢«å®šä¹‰äº†å…¶é»˜è®¤è¡Œä¸ºï¼Œè¿™è¢«ç§°ä¸ºå…¶â€œåˆå§‹ç‰¹æ€§â€ã€‚ä¸»è¦æœ‰ä¸‰ç§ç±»å‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DEFERRABLE INITIALLY DEFERRED&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;çº¦æŸæ˜¯&lt;strong&gt;å¯å»¶è¿Ÿçš„&lt;/strong&gt;ï¼Œå¹¶ä¸”æ¯ä¸ªæ–°äº‹åŠ¡å¼€å§‹æ—¶ï¼Œè¯¥çº¦æŸ&lt;strong&gt;é»˜è®¤å¤„äº &lt;code&gt;DEFERRED&lt;/code&gt;ï¼ˆå»¶è¿Ÿæ£€æŸ¥ï¼‰æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;DEFERRABLE INITIALLY IMMEDIATE&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;çº¦æŸæ˜¯&lt;strong&gt;å¯å»¶è¿Ÿçš„&lt;/strong&gt;ï¼Œä½†æ¯ä¸ªæ–°äº‹åŠ¡å¼€å§‹æ—¶ï¼Œè¯¥çº¦æŸ&lt;strong&gt;é»˜è®¤å¤„äº &lt;code&gt;IMMEDIATE&lt;/code&gt;ï¼ˆç«‹å³æ£€æŸ¥ï¼‰æ¨¡å¼&lt;/strong&gt;ã€‚è¿™æ˜¯å¸¸è§æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;NOT DEFERRABLE&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;çº¦æŸ&lt;strong&gt;ä¸å¯å»¶è¿Ÿ&lt;/strong&gt;ï¼Œå¿…é¡»ç«‹å³æ£€æŸ¥ã€‚&lt;strong&gt;æ­¤ç±»çº¦æŸä¸å— &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;å‘½ä»¤çš„å½±å“&lt;/strong&gt;ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ PostgreSQLã€GaussDB ç­‰æ•°æ®åº“ä¸­ï¼Œ&lt;strong&gt;æ£€æŸ¥å’Œå”¯ä¸€çº¦æŸé€šå¸¸æ€»æ˜¯ &lt;code&gt;NOT DEFERRABLE&lt;/code&gt;&lt;strong&gt;çš„ï¼Œè€Œæ­¤å‘½ä»¤&lt;/strong&gt;ä¸»è¦å½±å“å¤–é”®çº¦æŸ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¯­æ³•ä¸å‚æ•°"&gt;âš™ï¸ è¯­æ³•ä¸å‚æ•°
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET CONSTRAINTS { ALL | name [, ...] } { DEFERRED | IMMEDIATE }
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ALL&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šå½“å‰äº‹åŠ¡ä¸­&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å¯å»¶è¿Ÿçš„çº¦æŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;name&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª&lt;strong&gt;å…·ä½“çš„çº¦æŸåç§°&lt;/strong&gt;ã€‚è¿™äº›çº¦æŸå¿…é¡»æ˜¯å¯å»¶è¿Ÿçš„ï¼ˆ&lt;code&gt;DEFERRABLE&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;DEFERRED&lt;/code&gt;&lt;/strong&gt;ï¼šå°†æŒ‡å®šçº¦æŸçš„æ¨¡å¼è®¾ç½®ä¸º&lt;strong&gt;å»¶è¿Ÿæ£€æŸ¥&lt;/strong&gt;ï¼Œå³ç­‰åˆ°äº‹åŠ¡æäº¤æ—¶å†æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;IMMEDIATE&lt;/code&gt;&lt;/strong&gt;ï¼šå°†æŒ‡å®šçº¦æŸçš„æ¨¡å¼è®¾ç½®ä¸º&lt;strong&gt;ç«‹å³æ£€æŸ¥&lt;/strong&gt;ï¼Œå³åœ¨æ¯æ¡è¯­å¥ç»“æŸåæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœºåˆ¶"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœºåˆ¶
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å†…æœ‰æ•ˆ&lt;/strong&gt;ï¼š&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;çš„è®¾ç½®&lt;strong&gt;ä»…å¯¹å½“å‰äº‹åŠ¡æœ‰æ•ˆ&lt;/strong&gt;ã€‚äº‹åŠ¡ç»“æŸåï¼Œæ‰€æœ‰çº¦æŸçš„è¡Œä¸ºå°†æ¢å¤ä¸ºå…¶åˆå§‹ç‰¹æ€§ã€‚åœ¨äº‹åŠ¡å—å¤–æ‰§è¡Œæ­¤å‘½ä»¤æ˜¯æ— æ•ˆçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼åˆ‡æ¢çš„å³æ—¶æ£€æŸ¥&lt;/strong&gt;ï¼šå½“ä½ ä½¿ç”¨ &lt;code&gt;SET CONSTRAINTS ... IMMEDIATE&lt;/code&gt;å°†çº¦æŸä» &lt;code&gt;DEFERRED&lt;/code&gt;æ¨¡å¼åˆ‡æ¢å› &lt;code&gt;IMMEDIATE&lt;/code&gt;æ¨¡å¼æ—¶ï¼Œä¼šå‘ç”Ÿä¸€ä¸ª&lt;strong&gt;å…³é”®è¡Œä¸º&lt;/strong&gt;ï¼šæ•°æ®åº“ä¼š&lt;strong&gt;ç«‹å³&lt;/strong&gt;æ£€æŸ¥æ‰€æœ‰æœ¬è¯¥åœ¨å»¶è¿Ÿæ¨¡å¼ä¸‹ç­‰åˆ°æäº¤æ—¶æ‰æ£€æŸ¥çš„çº¦æŸæ¡ä»¶ã€‚å¦‚æœæ­¤æ—¶å­˜åœ¨ä»»ä½•è¿åçº¦æŸçš„æƒ…å†µï¼Œè¿™ä¸ª &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;å‘½ä»¤å°±ä¼š&lt;strong&gt;å¤±è´¥&lt;/strong&gt;ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜çº¦æŸçš„æ¨¡å¼ã€‚è¿™å…è®¸ä½ åœ¨äº‹åŠ¡ä¸­çš„ç‰¹å®šæ—¶é—´ç‚¹å¼ºåˆ¶è¿›è¡Œçº¦æŸæ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¸å‹ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ”„ å…¸å‹ä½¿ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æœ‰ä¸¤ä¸ªè¡¨ï¼š&lt;code&gt;invoices&lt;/code&gt;(å‘ç¥¨) å’Œ &lt;code&gt;invoice_items&lt;/code&gt;(å‘ç¥¨æ˜ç»†é¡¹)ã€‚&lt;code&gt;invoice_items&lt;/code&gt;è¡¨æœ‰ä¸€ä¸ªå¤–é”® &lt;code&gt;invoice_id&lt;/code&gt;æŒ‡å‘ &lt;code&gt;invoices&lt;/code&gt;è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šä½ éœ€è¦åŒæ—¶æ’å…¥ä¸€å¼ å‘ç¥¨åŠå…¶å¤šä¸ªæ˜ç»†é¡¹ã€‚åœ¨ä¼ ç»Ÿçš„ç«‹å³æ£€æŸ¥æ¨¡å¼ä¸‹ï¼Œä½ å¿…é¡»å…ˆæ’å…¥ä¸»å‘ç¥¨è®°å½•ï¼ˆ&lt;code&gt;invoices&lt;/code&gt;ï¼‰ï¼Œç„¶åæ‰èƒ½æ’å…¥æ˜ç»†è®°å½•ï¼ˆ&lt;code&gt;invoice_items&lt;/code&gt;ï¼‰ã€‚ä½†å¦‚æœä½¿ç”¨å»¶è¿Ÿçº¦æŸï¼Œæ“ä½œé¡ºåºå¯ä»¥æ›´çµæ´»ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å¼€å§‹ä¸€ä¸ªäº‹åŠ¡
BEGIN;
-- 1. å…ˆå°†å¤–é”®çº¦æŸè®¾ç½®ä¸ºå»¶è¿Ÿæ¨¡å¼ã€‚å‡è®¾å¤–é”®çº¦æŸåä¸º &amp;#39;fk_invoice_items_invoice_id&amp;#39;
SET CONSTRAINTS fk_invoice_items_invoice_id DEFERRED;
-- 2. ç°åœ¨å¯ä»¥å…ˆæ’å…¥æ˜ç»†é¡¹ï¼ˆæ­¤æ—¶å¯¹åº”çš„å‘ç¥¨ä¸»è®°å½•å¯èƒ½è¿˜ä¸å­˜åœ¨ï¼‰
INSERT INTO invoice_items (invoice_id, item_name, amount) VALUES (1001, &amp;#39;Product A&amp;#39;, 99.99);
INSERT INTO invoice_items (invoice_id, item_name, amount) VALUES (1001, &amp;#39;Product B&amp;#39;, 149.99);
-- 3. ç„¶åæ’å…¥å‘ç¥¨ä¸»è®°å½•
INSERT INTO invoices (id, customer_id, total_amount) VALUES (1001, 555, 249.98);
-- 4. åœ¨æäº¤å‰ï¼Œå¯ä»¥é€‰æ‹©åˆ‡æ¢å›ç«‹å³æ¨¡å¼æ¥è¿›è¡Œæå‰æ£€æŸ¥
-- æ­¤ä¸¾ä¼šç«‹å³éªŒè¯å½“å‰æ•°æ®æ˜¯å¦æ»¡è¶³å¤–é”®çº¦æŸï¼Œå¦‚æœæ˜ç»†é¡¹ä¸­çš„ invoice_id 1001 åœ¨ invoices è¡¨ä¸­ä¸å­˜åœ¨ï¼Œæ­¤å¤„ä¼šæŠ¥é”™ã€‚
SET CONSTRAINTS fk_invoice_items_invoice_id IMMEDIATE;
-- 5. æäº¤äº‹åŠ¡ã€‚æäº¤æ—¶ï¼Œæ•°æ®åº“ä¼šæœ€ç»ˆæ£€æŸ¥æ‰€æœ‰è®¾ç½®ä¸º DEFERRED çš„çº¦æŸã€‚
COMMIT;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET CONSTRAINTS&lt;/code&gt;æ˜¯ä¸€ä¸ªé«˜çº§ SQL å‘½ä»¤ï¼Œä¸»è¦ç”¨äºç®¡ç†å¤æ‚äº‹åŠ¡ä¸­çš„å¤–é”®çº¦æŸæ£€æŸ¥æ—¶æœºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼šå®ƒæä¾›äº†çµæ´»æ€§ï¼Œå…è®¸åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­ä¸´æ—¶ç»•è¿‡æŸäº›çº¦æŸï¼Œåªè¦æœ€ç»ˆæäº¤æ—¶æ•°æ®ä¿æŒä¸€è‡´å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»è¦é™åˆ¶&lt;/strong&gt;ï¼šé€šå¸¸åªé€‚ç”¨äº&lt;strong&gt;å¤–é”®çº¦æŸ&lt;/strong&gt;ï¼›æ£€æŸ¥å’Œå”¯ä¸€çº¦æŸå¾€å¾€ä¸å¯å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®æé†’&lt;/strong&gt;ï¼šè®¾ç½®ä»…åœ¨&lt;strong&gt;å½“å‰äº‹åŠ¡å†…æœ‰æ•ˆ&lt;/strong&gt;ï¼›ä» &lt;code&gt;DEFERRED&lt;/code&gt;åˆ‡æ¢åˆ° &lt;code&gt;IMMEDIATE&lt;/code&gt;æ¨¡å¼ä¼šè§¦å‘å³æ—¶æ£€æŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;SET CONSTRAINTS&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="set-transaction"&gt;SET TRANSACTION
&lt;/h2&gt;&lt;p&gt;ä½ æ­£åœ¨æ·±å…¥äº†è§£ SQL ä¸­çš„ &lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºç²¾ç»†æ§åˆ¶äº‹åŠ¡è¡Œä¸ºçš„é‡è¦å‘½ä»¤ã€‚æˆ‘ä¼šè¯¦ç»†ä¸ºä½ è§£é‡Šå®ƒçš„åŠŸèƒ½ã€è¯­æ³•ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥ä¸»è¦ç”¨äºè®¾ç½®&lt;strong&gt;å½“å‰äº‹åŠ¡&lt;/strong&gt;çš„éš”ç¦»çº§åˆ«ã€è®¿é—®æ¨¡å¼ï¼ˆåªè¯»æˆ–è¯»å†™ï¼‰ï¼Œå¹¶å¯ä¸ºå…¶æŒ‡å®šå›æ»šæ®µæˆ–åç§°ã€‚å®ƒå…è®¸ä½ æ ¹æ®ç‰¹å®šéœ€æ±‚è°ƒæ•´äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œè¯»å†™å±æ€§ï¼Œä»è€Œåœ¨æ•°æ®ä¸€è‡´æ€§ã€å¹¶å‘æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h3 id="-set-transaction-çš„æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ“Œ SET TRANSACTION çš„æ ¸å¿ƒåŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;å…è®¸ä½ å¯¹å½“å‰äº‹åŠ¡è¿›è¡Œä»¥ä¸‹å‡ é¡¹é‡è¦è®¾ç½®ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾ç½®éš”ç¦»çº§åˆ« (ISOLATION LEVEL)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ§åˆ¶äº‹åŠ¡ä¹‹é—´çš„å¯è§æ€§å’Œå¹¶å‘å½±å“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è®¾ç½®è®¿é—®æ¨¡å¼ (READ ONLY / READ WRITE)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†³å®šäº‹åŠ¡æ˜¯å¦å…è®¸ä¿®æ”¹æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é…å›æ»šæ®µ (USE ROLLBACK SEGMENT)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ï¼ˆé€‚ç”¨äºä½¿ç”¨å›æ»šæ®µç®¡ç†çš„æ•°æ®åº“ï¼‰ä¸ºäº‹åŠ¡æŒ‡å®šç‰¹å®šçš„å›æ»šæ®µã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‘½åäº‹åŠ¡ (NAME)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºäº‹åŠ¡åˆ†é…ä¸€ä¸ªåç§°ï¼Œä¾¿äºåœ¨åˆ†å¸ƒå¼ç¯å¢ƒæˆ–ç›‘æ§å·¥å…·ä¸­è¯†åˆ«ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•ä¸å‚æ•°è¯¦è§£"&gt;ğŸ› ï¸ è¯­æ³•ä¸å‚æ•°è¯¦è§£
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET TRANSACTION
[ ISOLATION LEVEL { isolation_level } ]
[ { READ ONLY | READ WRITE } ]
[ USE ROLLBACK SEGMENT rollback_segment ]
[ NAME &amp;#39;transaction_name&amp;#39; ];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¸»è¦å‚æ•°è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ISOLATION LEVEL&lt;/code&gt;&lt;/strong&gt;ï¼šæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œè¿™æ˜¯è¯¥è¯­å¥æœ€æ ¸å¿ƒçš„åŠŸèƒ½ä¹‹ä¸€ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ UNCOMMITTED&lt;/code&gt;&lt;/strong&gt;ï¼šå…è®¸è¯»å–å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ›´æ”¹ï¼ˆè„è¯»ï¼‰ã€‚&lt;strong&gt;ä¸€è‡´æ€§æœ€å¼±ï¼Œå¹¶å‘æ€§æœ€é«˜&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ COMMITTED&lt;/code&gt;&lt;/strong&gt;ï¼šåªèƒ½è¯»å–å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ›´æ”¹ã€‚è¿™æ˜¯ &lt;strong&gt;Oracle ç­‰è®¸å¤šæ•°æ®åº“çš„é»˜è®¤çº§åˆ«&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;REPEATABLE READ&lt;/code&gt;&lt;/strong&gt;ï¼šä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®çš„ç»“æœä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;SERIALIZABLE&lt;/code&gt;&lt;/strong&gt;ï¼šæœ€é«˜éš”ç¦»çº§åˆ«ï¼Œä¿è¯äº‹åŠ¡å®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œã€‚&lt;strong&gt;ä¸€è‡´æ€§æœ€å¼ºï¼Œå¹¶å‘æ€§æœ€ä½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ ONLY&lt;/code&gt;/ &lt;code&gt;READ WRITE&lt;/code&gt;&lt;/strong&gt;ï¼šå®šä¹‰äº‹åŠ¡çš„è®¿é—®æ¨¡å¼ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ ONLY&lt;/code&gt;&lt;/strong&gt;ï¼šå°†äº‹åŠ¡è®¾ç½®ä¸º&lt;strong&gt;åªè¯»&lt;/strong&gt;ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œåªèƒ½æ‰§è¡ŒæŸ¥è¯¢ï¼ˆ&lt;code&gt;SELECT&lt;/code&gt;ï¼‰ï¼Œä¸èƒ½æ‰§è¡Œä»»ä½•æ•°æ®æ“ä½œè¯­è¨€ï¼ˆDMLï¼‰è¯­å¥ï¼ˆå¦‚ &lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;ï¼‰ã€‚è¿™å¯¹äºéœ€è¦&lt;strong&gt;ç”Ÿæˆç¨³å®šæŠ¥å‘Š&lt;/strong&gt;çš„åœºæ™¯éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒç¡®ä¿åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®è§†å›¾æ˜¯ä¸€è‡´ä¸”ä¸å—å…¶ä»–äº‹åŠ¡å†™æ“ä½œå½±å“çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;READ WRITE&lt;/code&gt;&lt;/strong&gt;ï¼šå°†äº‹åŠ¡è®¾ç½®ä¸º&lt;strong&gt;è¯»å†™&lt;/strong&gt;ï¼ˆè¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼‰ã€‚å…è®¸åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œ DML è¯­å¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;&lt;/strong&gt;ï¼šï¼ˆä¸»è¦ç”¨äº Oracle ä¸”ä½¿ç”¨å›æ»šæ®µç®¡ç† undo æ—¶ï¼‰æ‰‹åŠ¨å°†äº‹åŠ¡åˆ†é…ç»™æŒ‡å®šçš„å›æ»šæ®µã€‚&lt;strong&gt;æ³¨æ„ï¼šOracle å¼ºçƒˆæ¨èä½¿ç”¨è‡ªåŠ¨æ’¤é”€ç®¡ç†ï¼ˆAUMï¼‰&lt;/strong&gt;ï¼Œåœ¨ AUM æ¨¡å¼ä¸‹æ­¤å­å¥ä¼šè¢«å¿½ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;NAME&lt;/code&gt;&lt;/strong&gt;ï¼šä¸ºäº‹åŠ¡æŒ‡å®šä¸€ä¸ªåç§°ï¼ˆæœ€å¤š 255 å­—èŠ‚ï¼‰ã€‚è¿™åœ¨&lt;strong&gt;ç›‘æ§å’Œè¯Šæ–­é•¿æ—¶é—´è¿è¡Œæˆ–åˆ†å¸ƒå¼äº‹åŠ¡&lt;/strong&gt;æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºä½ å¯ä»¥é€šè¿‡åç§°è½»æ¾è¯†åˆ«ç‰¹å®šäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸ä½¿ç”¨è§„åˆ™"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸ä½¿ç”¨è§„åˆ™
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;SET TRANSACTION&lt;/code&gt;æ—¶ï¼Œå¿…é¡»éµå®ˆä¸€äº›å…³é”®è§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥&lt;/strong&gt;ï¼š&lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥&lt;strong&gt;å¿…é¡»æ˜¯å½“å‰äº‹åŠ¡å—ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥&lt;/strong&gt;ï¼ˆé™¤äº†å…¶ä»– &lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥æˆ–åœ¨éš”ç¦»çº§åˆ« NC ä¸‹æ‰§è¡Œçš„è¯­å¥ï¼‰ã€‚äº‹åŠ¡é€šå¸¸ä»¥ &lt;code&gt;BEGIN&lt;/code&gt;æˆ– &lt;code&gt;START TRANSACTION&lt;/code&gt;å¼€å§‹ï¼Œæˆ–è€…ä»ä¸Šä¸€æ¬¡ &lt;code&gt;COMMIT&lt;/code&gt;/&lt;code&gt;ROLLBACK&lt;/code&gt;ä¹‹åå¼€å§‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¸æœ‰æ•ˆæœŸ&lt;/strong&gt;ï¼šè¯¥è¯­å¥çš„è®¾ç½®&lt;strong&gt;ä»…å¯¹å½“å‰äº‹åŠ¡æœ‰æ•ˆ&lt;/strong&gt;ã€‚äº‹åŠ¡ç»“æŸæ—¶ï¼ˆé€šè¿‡ &lt;code&gt;COMMIT&lt;/code&gt;æˆ– &lt;code&gt;ROLLBACK&lt;/code&gt;ï¼‰ï¼Œæ‰€æœ‰è®¾ç½®å¤±æ•ˆï¼Œæ–°äº‹åŠ¡å°†æ¢å¤é»˜è®¤è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å¼å†²çª&lt;/strong&gt;ï¼šä¸èƒ½åœ¨åŒä¸€è¯­å¥æˆ–åŒä¸€äº‹åŠ¡ä¸­åŒæ—¶ä½¿ç”¨ &lt;code&gt;READ ONLY&lt;/code&gt;å’Œ &lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;ï¼Œå› ä¸ºåªè¯»äº‹åŠ¡ä¸ç”Ÿæˆå›æ»šä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Oracle SYS ç”¨æˆ·çš„ç‰¹æ®Šæ€§&lt;/strong&gt;ï¼šåœ¨ Oracle ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;SYS&lt;/code&gt;ç”¨æˆ·æ‰§è¡Œçš„äº‹åŠ¡æ— æ³•è®¾ç½®ä¸ºçœŸæ­£çš„åªè¯»&lt;/strong&gt;ã€‚å³ä½¿è®¾ç½®äº† &lt;code&gt;READ ONLY&lt;/code&gt;ï¼Œ&lt;code&gt;SYS&lt;/code&gt;ç”¨æˆ·çš„æŸ¥è¯¢ä»ç„¶ä¼šçœ‹åˆ°äº‹åŠ¡è¿‡ç¨‹ä¸­å…¶ä»–æ“ä½œæ‰€åšçš„æ›´æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯"&gt;ğŸ¯ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿æŠ¥å‘Šæ•°æ®çš„ç¨³å®šæ€§&lt;/strong&gt;ï¼šå½“éœ€è¦è¿è¡Œä¸€ä¸ªåŒ…å«å¤šä¸ªæŸ¥è¯¢çš„é•¿æŠ¥å‘Šï¼Œå¹¶ä¸”å¸Œæœ›è¿™äº›æŸ¥è¯¢åŸºäº&lt;strong&gt;å®Œå…¨ç›¸åŒçš„æ•°æ®å¿«ç…§&lt;/strong&gt;æ—¶ï¼Œä¼šä½¿ç”¨ &lt;code&gt;SET TRANSACTION READ ONLY&lt;/code&gt;ã€‚è¿™å¯ä»¥é¿å…åœ¨ç”ŸæˆæŠ¥å‘Šçš„è¿‡ç¨‹ä¸­ï¼Œå› å…¶ä»–ç”¨æˆ·æ›´æ–°æ•°æ®è€Œå¯¼è‡´æŠ¥å‘Šå‰åæ•°æ®ä¸ä¸€è‡´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;COMMIT; -- ç»“æŸä¹‹å‰çš„äº‹åŠ¡ï¼Œç¡®ä¿SET TRANSACTIONæ˜¯ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„ç¬¬ä¸€æ¡è¯­å¥
SET TRANSACTION READ ONLY NAME &amp;#39;Monthly_Report&amp;#39;;
SELECT COUNT(*) FROM orders;
SELECT SUM(amount) FROM orders;
COMMIT; -- ç»“æŸåªè¯»äº‹åŠ¡ï¼Œä¸æäº¤ä»»ä½•æ•°æ®æ›´æ”¹
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ§åˆ¶å¹¶å‘ä¸ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨å¤æ‚çš„äº‹åŠ¡å¤„ç†ä¸­ï¼Œæ ¹æ®éœ€è¦å¯¹ç‰¹å®šäº‹åŠ¡æé«˜æˆ–é™ä½éš”ç¦»çº§åˆ«ã€‚ä¾‹å¦‚ï¼Œåœ¨éœ€è¦æœ€é«˜æ•°æ®ä¸€è‡´æ€§ä¸”èƒ½æ¥å—è¾ƒä½å¹¶å‘æ€§çš„åœºæ™¯ä¸‹ï¼Œè®¾ç½® &lt;code&gt;ISOLATION LEVEL SERIALIZABLE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†å¤§å‹äº‹åŠ¡&lt;/strong&gt;ï¼šåœ¨ä»ä½¿ç”¨å›æ»šæ®µç®¡ç†çš„ Oracle æ•°æ®åº“ä¸­ï¼Œå¤§å‹ DML æ“ä½œå¯ä»¥é€šè¿‡ &lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;è¢«åˆ†é…åˆ°è¶³å¤Ÿå¤§çš„å›æ»šæ®µï¼Œä»¥é˜²æ­¢è‘—åçš„ &lt;strong&gt;&amp;ldquo;ORA-01555: snapshot too old&amp;rdquo;&lt;/strong&gt; é”™è¯¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹åŠ¡ç›‘æ§ä¸è¯Šæ–­&lt;/strong&gt;ï¼šä¸ºé‡è¦çš„æˆ–é•¿æ—¶é—´è¿è¡Œçš„äº‹åŠ¡è®¾ç½® &lt;code&gt;NAME&lt;/code&gt;ï¼Œä¾¿äºæ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰åœ¨ç›‘æ§å·¥å…·ï¼ˆå¦‚ &lt;code&gt;V$TRANSACTION&lt;/code&gt;ï¼‰ä¸­å¿«é€Ÿè¯†åˆ«å’Œæ’æŸ¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ•°æ®åº“å®ç°å·®å¼‚"&gt;ğŸ”„ æ•°æ®åº“å®ç°å·®å¼‚
&lt;/h3&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ &lt;code&gt;SET TRANSACTION&lt;/code&gt;æ˜¯ SQL æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸åŒæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰åœ¨å®ç°å’Œæ”¯æŒçš„é€‰é¡¹ä¸Šå¯èƒ½å­˜åœ¨å·®å¼‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Oracle&lt;/strong&gt;ï¼šæ”¯æŒ &lt;code&gt;READ ONLY&lt;/code&gt;, &lt;code&gt;READ WRITE&lt;/code&gt;, &lt;code&gt;ISOLATION LEVEL&lt;/code&gt;, &lt;code&gt;USE ROLLBACK SEGMENT&lt;/code&gt;, &lt;code&gt;NAME&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IBM Db2&lt;/strong&gt;ï¼šæ”¯æŒè®¾ç½®éš”ç¦»çº§åˆ«å’Œè¯Šæ–­åŒºåŸŸå¤§å°ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL&lt;/strong&gt;ï¼š&lt;code&gt;SET TRANSACTION&lt;/code&gt;ä¸»è¦ç”¨äºè®¾ç½®éš”ç¦»çº§åˆ«ï¼ˆå¦‚ &lt;code&gt;SET TRANSACTION ISOLATION LEVEL SERIALIZABLE&lt;/code&gt;ï¼‰ã€‚è®¿é—®æ¨¡å¼ç­‰åŠŸèƒ½å¯èƒ½æœ‰ä¸åŒçš„å®ç°æ–¹å¼æˆ–ä¸æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼ŒåŠ¡å¿…æŸ¥é˜…ä½ æ‰€ä½¿ç”¨çš„ç‰¹å®šæ•°æ®åº“çš„å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SET TRANSACTION&lt;/code&gt;æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè®©ä½ èƒ½å¤Ÿç²¾ç»†åœ°æ§åˆ¶äº‹åŠ¡çš„å…³é”®å±æ€§ï¼Œå¦‚&lt;strong&gt;éš”ç¦»çº§åˆ«&lt;/strong&gt;å’Œ&lt;strong&gt;è®¿é—®æ¨¡å¼&lt;/strong&gt;ã€‚å®ƒçš„æ­£ç¡®ä½¿ç”¨æœ‰åŠ©äºç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ»¡è¶³ç‰¹å®šåœºæ™¯ï¼ˆå¦‚ç¨³å®šæŠ¥å‘Šï¼‰çš„éœ€æ±‚ï¼Œå¹¶è¾…åŠ©è¿›è¡Œäº‹åŠ¡ç›‘æ§å’Œæ€§èƒ½ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒè¦ç‚¹åŒ…æ‹¬ï¼šè¯¥è¯­å¥&lt;strong&gt;å¿…é¡»æ˜¯äº‹åŠ¡çš„ç¬¬ä¸€ä¸ªè¯­å¥&lt;/strong&gt;ã€è®¾ç½®&lt;strong&gt;ä»…å¯¹å½“å‰äº‹åŠ¡æœ‰æ•ˆ&lt;/strong&gt;ã€&lt;strong&gt;åªè¯»æ¨¡å¼&lt;/strong&gt;å¯¹äºç”Ÿæˆä¸€è‡´æ€§è§†å›¾éå¸¸æœ‰ç”¨ï¼Œä»¥åŠä¸åŒæ•°æ®åº“åœ¨å®ç°ä¸Šå¯èƒ½å­˜åœ¨å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;SET TRANSACTION&lt;/code&gt;è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="show-global-status"&gt;SHOW GLOBAL STATUS
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„è¯­å¥ï¼Œç”¨äºæŸ¥çœ‹æ•°æ®åº“æœåŠ¡å™¨çš„&lt;strong&gt;å…¨å±€æ€§èƒ½è®¡æ•°å™¨å’ŒçŠ¶æ€ä¿¡æ¯&lt;/strong&gt;ã€‚è¿™äº›ä¿¡æ¯å¯¹äºæ•°æ®åº“æ€§èƒ½ç›‘æ§ã€æ•…éšœæ’æŸ¥å’Œä¼˜åŒ–è‡³å…³é‡è¦ã€‚æˆ‘ä¼šå…ˆé€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¿«é€Ÿä»‹ç»ä¸€äº›å…³é”®çŠ¶æ€å˜é‡ï¼Œç„¶åå†è¯¦ç»†è§£é‡Šå…¶ç”¨æ³•å’Œè§£è¯»æ–¹æ³•ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;çŠ¶æ€å˜é‡&lt;/th&gt;
&lt;th&gt;å«ä¹‰ç®€è¦è¯´æ˜&lt;/th&gt;
&lt;th&gt;å¦‚ä½•è§£è¯»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Aborted_connects&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è¯•è¿æ¥åˆ° MySQL æœåŠ¡å™¨ä½†&lt;strong&gt;å¤±è´¥çš„è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼è¾ƒé«˜å¯èƒ½æ„å‘³ç€ç½‘ç»œé—®é¢˜ã€è®¤è¯é”™è¯¯æˆ– &lt;code&gt;max_connections&lt;/code&gt;å·²æ»¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Aborted_clients&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”±äºå®¢æˆ·ç«¯æ²¡æœ‰æ­£ç¡®å…³é—­è¿æ¥è€Œ&lt;strong&gt;ä¸­æ­¢çš„è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼è¾ƒé«˜å¯èƒ½æ„å‘³ç€å®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´è®¾ç½®ä¸åˆç†æˆ–å®¢æˆ·ç«¯ç¨‹åºå¼‚å¸¸é€€å‡ºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Bytes_received&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»&lt;strong&gt;æ‰€æœ‰å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„æ€»å­—èŠ‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºç›‘æ§ç½‘ç»œè¾“å…¥æµé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Bytes_sent&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘é€ç»™&lt;strong&gt;æ‰€æœ‰å®¢æˆ·ç«¯çš„æ€»å­—èŠ‚æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºç›‘æ§ç½‘ç»œè¾“å‡ºæµé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Connections&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°è¯•è¿æ¥åˆ° MySQL æœåŠ¡å™¨çš„&lt;strong&gt;æ€»è¿æ¥æ•°&lt;/strong&gt;ï¼ˆæ— è®ºæˆåŠŸä¸å¦ï¼‰&lt;/td&gt;
&lt;td&gt;ç»“åˆ &lt;code&gt;Uptime&lt;/code&gt;å¯è®¡ç®—å¹³å‡è¿æ¥é¢‘ç‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Threads_connected&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“å‰æ‰“å¼€çš„è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®æ—¶è¿æ¥æ•°ï¼Œå¯ç”¨äºåˆ¤æ–­å½“å‰è´Ÿè½½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Threads_running&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆéç¡çœ ï¼‰çš„çº¿ç¨‹æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœè¯¥å€¼æŒç»­è¾ƒé«˜ï¼Œå¯èƒ½è¡¨ç¤ºæœåŠ¡å™¨è´Ÿè½½è¾ƒé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Queries&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨&lt;strong&gt;æ‰§è¡Œçš„è¯­å¥æ€»æ•°&lt;/strong&gt;ï¼ˆåŒ…æ‹¬å­˜å‚¨è¿‡ç¨‹ä¸­çš„è¯­å¥ï¼‰&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æœåŠ¡å™¨çš„æ€»æŸ¥è¯¢è´Ÿè½½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Questions&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ¥æ”¶åˆ°çš„ç”±å®¢æˆ·ç«¯å‘é€çš„&lt;strong&gt;æŸ¥è¯¢è¯­å¥æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ &lt;code&gt;Queries&lt;/code&gt;ç±»ä¼¼ï¼Œä½†é€šå¸¸ä¸åŒ…æ‹¬å­˜å‚¨è¿‡ç¨‹å†…éƒ¨çš„è¯­å¥ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Slow_queries&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œæ—¶é—´è¶…è¿‡ &lt;code&gt;long_query_time&lt;/code&gt;ç§’çš„&lt;strong&gt;æ…¢æŸ¥è¯¢æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;éœ€è¦é‡ç‚¹å…³æ³¨&lt;/strong&gt;ã€‚æ•°å€¼å¢é•¿å¿«æ„å‘³ç€å¯èƒ½å­˜åœ¨éœ€è¦ä¼˜åŒ–çš„æŸ¥è¯¢ã€‚é€šå¸¸éœ€å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—æ¥å®šä½å…·ä½“æŸ¥è¯¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_read&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;è¯»å–çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®è®¿é—®çš„é¢‘ç¹ç¨‹åº¦ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_inserted&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;æ’å…¥çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®æ’å…¥çš„ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_updated&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;æ›´æ–°çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®æ›´æ–°çš„ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_deleted&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;InnoDB å­˜å‚¨å¼•æ“&lt;strong&gt;åˆ é™¤çš„è¡Œæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åæ˜ äº†æ•°æ®åˆ é™¤çš„ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Created_tmp_disk_tables&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ‰§è¡Œè¯­å¥æ—¶&lt;strong&gt;åœ¨ç£ç›˜ä¸Šåˆ›å»ºçš„ä¸´æ—¶è¡¨æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæ­¤å€¼è¾ƒå¤§ï¼Œå¯èƒ½éœ€è€ƒè™‘ä¼˜åŒ–æŸ¥è¯¢æˆ–å¢åŠ  &lt;code&gt;tmp_table_size&lt;/code&gt;å’Œ &lt;code&gt;max_heap_table_size&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Created_tmp_tables&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨æ‰§è¡Œè¯­å¥æ—¶&lt;strong&gt;åˆ›å»ºçš„ä¸´æ—¶è¡¨æ€»æ•°&lt;/strong&gt;ï¼ˆåŒ…æ‹¬å†…å­˜å’Œç£ç›˜ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸´æ—¶è¡¨åˆ›å»ºé¢‘ç¹å¯èƒ½æ„å‘³ç€ä½¿ç”¨äº†å¾ˆå¤š &lt;code&gt;GROUP BY&lt;/code&gt;ã€&lt;code&gt;ORDER BY&lt;/code&gt;æˆ–ä¸´æ—¶ç»“æœé›†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Select_scan&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹ç¬¬ä¸€ä¸ªè¡¨è¿›è¡Œ&lt;strong&gt;å…¨è¡¨æ‰«æçš„è”æ¥æ•°é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼è¾ƒé«˜å¯èƒ½æ„å‘³ç€è”æ¥æŸ¥è¯¢ç¼ºä¹æœ‰æ•ˆç´¢å¼•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Innodb_buffer_pool_hit_rate&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;InnoDB ç¼“å†²æ± çš„å‘½ä¸­ç‡&lt;/strong&gt;ï¼ˆéœ€è®¡ç®—ï¼š&lt;code&gt;(1 - Innodb_buffer_pool_reads/Innodb_buffer_pool_read_requests) * 100&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æ€§èƒ½æŒ‡æ ‡&lt;/strong&gt;ã€‚ç†æƒ³æƒ…å†µä¸‹åº”æ¥è¿‘ 100%ã€‚å‘½ä¸­ç‡ä½è¯´æ˜ç¼“å†²æ± å¤§å°å¯èƒ½ä¸è¶³ï¼Œå¯¼è‡´é¢‘ç¹ä»ç£ç›˜è¯»å–æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨"&gt;ğŸ“Š è¯­æ³•ä¸åŸºæœ¬ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;è¯­å¥ç”¨äºæŸ¥çœ‹å…¨å±€çŠ¶æ€å˜é‡ï¼ŒåŠ ä¸Š &lt;code&gt;LIKE&lt;/code&gt;å­å¥å¯ä»¥è¿‡æ»¤å‡ºä½ å…³å¿ƒçš„ç‰¹å®šå˜é‡æˆ–æŸä¸€ç±»å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS [LIKE &amp;#39;pattern&amp;#39;];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LIKE 'pattern'&lt;/code&gt;: å¯é€‰å­å¥ï¼Œç”¨äºåŒ¹é…å˜é‡åã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;%&lt;/code&gt;é€šé…ç¬¦æ¥åŒ¹é…å¤šä¸ªå­—ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ‰€æœ‰å…¨å±€çŠ¶æ€å˜é‡&lt;/strong&gt;ï¼ˆè¾“å‡ºä¼šå¾ˆé•¿ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹åŒ…å«ç‰¹å®šå…³é”®è¯çš„å˜é‡&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥çœ‹ä¸ InnoDB ç¼“å†²æ± ç›¸å…³çš„çŠ¶æ€ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE &amp;#39;Innodb_buffer_pool%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹å•ä¸ªç‰¹å®šå˜é‡&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥çœ‹æ…¢æŸ¥è¯¢æ•°é‡ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE &amp;#39;Slow_queries&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æŸä¸€ç±»å˜é‡&lt;/strong&gt;ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥çœ‹æ‰€æœ‰ä»¥ &amp;ldquo;Com_&amp;rdquo; å¼€å¤´çš„å‘½ä»¤è®¡æ•°å™¨ï¼Œå¦‚ &lt;code&gt;Com_select&lt;/code&gt;, &lt;code&gt;Com_insert&lt;/code&gt;, &lt;code&gt;Com_delete&lt;/code&gt;, &lt;code&gt;Com_update&lt;/code&gt;ç­‰ï¼Œè¿™äº›å˜é‡ç»Ÿè®¡äº†å„ç§ç±»å‹è¯­å¥çš„æ‰§è¡Œæ¬¡æ•°ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE &amp;#39;Com_%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•è§£è¯»çŠ¶æ€å˜é‡"&gt;ğŸ” å¦‚ä½•è§£è¯»çŠ¶æ€å˜é‡
&lt;/h3&gt;&lt;p&gt;çŠ¶æ€å˜é‡çš„å€¼é€šå¸¸æ˜¯&lt;strong&gt;ä»æœåŠ¡å™¨å¯åŠ¨å¼€å§‹ç´¯ç§¯çš„è®¡æ•°å™¨&lt;/strong&gt;ã€‚å•çº¯çœ‹ä¸€ä¸ªé™æ€å€¼æ„ä¹‰ä¸å¤§ï¼Œæ›´æœ‰ä»·å€¼çš„æ˜¯&lt;strong&gt;è§‚å¯Ÿä¸€æ®µæ—¶é—´å†…çš„å˜åŒ–é‡æˆ–å¢é•¿ç‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨æ–¹æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šæ—¶é‡‡æ ·å·®å€¼&lt;/strong&gt;ï¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆå¦‚ 60 ç§’ï¼‰æŸ¥è¯¢ä¸€æ¬¡çŠ¶æ€å˜é‡ï¼Œè®¡ç®—ä¸ä¸Šä¸€æ¬¡çš„å·®å€¼ã€‚è¿™æ ·å¯ä»¥äº†è§£è¯¥æ—¶é—´æ®µå†…çš„ç³»ç»Ÿæ´»åŠ¨æƒ…å†µã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç¬¬ä¸€æ¬¡æŸ¥è¯¢
SHOW GLOBAL STATUS LIKE &amp;#39;Questions&amp;#39;;
-- ç­‰å¾…60ç§’åç¬¬äºŒæ¬¡æŸ¥è¯¢
SHOW GLOBAL STATUS LIKE &amp;#39;Questions&amp;#39;;
-- ç”¨ç¬¬äºŒæ¬¡çš„å€¼å‡å»ç¬¬ä¸€æ¬¡çš„å€¼ï¼Œå†é™¤ä»¥æ—¶é—´é—´éš”ï¼Œå³å¯å¾—åˆ°å¹³å‡æ¯ç§’æŸ¥è¯¢é‡ï¼ˆQPSï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡ç‚¹å…³æ³¨æ¯”ç‡&lt;/strong&gt;ï¼šè®¸å¤šæ¯”ç‡æ€§çš„æŒ‡æ ‡æ¯”å•çº¯çš„è®¡æ•°å™¨æ›´èƒ½è¯´æ˜é—®é¢˜ï¼Œä¾‹å¦‚ä¸Šé¢è¡¨æ ¼ä¸­æåˆ°çš„ &lt;strong&gt;InnoDB ç¼“å†²æ± å‘½ä¸­ç‡&lt;/strong&gt;ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯&lt;strong&gt;æ¯ç§’æŸ¥è¯¢é‡ï¼ˆQPSï¼‰&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡è®¡ç®— &lt;code&gt;Questions&lt;/code&gt;æˆ– &lt;code&gt;Queries&lt;/code&gt;åœ¨å•ä½æ—¶é—´å†…çš„å·®å€¼æ¥å¾—åˆ°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“åˆå…¶ä»–å·¥å…·&lt;/strong&gt;ï¼š&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;æä¾›äº†ä¸€ä¸ªå®è§‚çš„è§†è§’ã€‚è¦æ·±å…¥åˆ†æå…·ä½“é—®é¢˜ï¼Œé€šå¸¸éœ€è¦ç»“åˆ &lt;strong&gt;æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆSlow Query Logï¼‰&lt;/strong&gt;ã€&lt;strong&gt;EXPLAIN&lt;/strong&gt; å‘½ä»¤åˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼Œä»¥åŠ &lt;strong&gt;Performance Schema&lt;/strong&gt; ç­‰æ›´ç»†è‡´çš„å·¥å…·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼š&lt;code&gt;GLOBAL&lt;/code&gt;å…³é”®å­—è¡¨ç¤ºæŸ¥çœ‹å…¨å±€èŒƒå›´çš„çŠ¶æ€ï¼ˆè‡ªæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥æ‰€æœ‰è¿æ¥æ´»åŠ¨çš„ç»Ÿè®¡æ±‡æ€»ï¼‰ã€‚å¦‚æœä½¿ç”¨ &lt;code&gt;SESSION&lt;/code&gt;æˆ–çœç•¥ä½œç”¨åŸŸï¼Œåˆ™æ˜¾ç¤ºçš„æ˜¯&lt;strong&gt;å½“å‰ä¼šè¯&lt;/strong&gt;çš„çŠ¶æ€ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ€§&lt;/strong&gt;ï¼šçŠ¶æ€å˜é‡æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„ç»“æœåæ˜ çš„æ˜¯&lt;strong&gt;å½“å‰æ—¶åˆ»çš„ç´¯ç§¯å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡ç½®&lt;/strong&gt;ï¼šç»å¤§å¤šæ•°çŠ¶æ€å˜é‡&lt;strong&gt;åªèƒ½åœ¨æœåŠ¡å™¨é‡å¯åé‡ç½®&lt;/strong&gt;ã€‚ä½†æœ‰äº›å˜é‡å¯ä»¥é€šè¿‡æ‰§è¡Œ &lt;strong&gt;&lt;code&gt;FLUSH STATUS;&lt;/code&gt;&lt;/strong&gt; è¯­å¥é‡ç½®ä¸ºå½“å‰å€¼ï¼ˆæ³¨æ„ï¼šå¹¶éå½’é›¶ï¼Œè€Œæ˜¯ä»¥å½“å‰å€¼ä¸ºæ–°èµ·ç‚¹ç»§ç»­ç´¯ç§¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ï¼š&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;è¯­å¥æœ¬èº«ä¼šä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ä¸´æ—¶è¡¨ï¼Œå¹¶ä¼šå¢åŠ  &lt;code&gt;Created_tmp_tables&lt;/code&gt;çš„å…¨å±€å€¼ã€‚ä½†å…¶å¼€é”€é€šå¸¸å¾ˆå°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¥æº&lt;/strong&gt;ï¼šåœ¨ MySQL 5.7 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;çš„å®ç°å®é™…ä¸Šæ˜¯é€šè¿‡æŸ¥è¯¢ &lt;code&gt;performance_schema.global_status&lt;/code&gt;è¡¨æ¥è·å–æ•°æ®çš„ã€‚ä½†ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œç›´æ¥æŸ¥è¯¢ &lt;code&gt;performance_schema.global_status&lt;/code&gt;è¡¨è¿”å›çš„å˜é‡æ•°é‡å¯èƒ½å°‘äº &lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;ï¼Œè¿™é€šå¸¸æ˜¯å› ä¸ºä¸€äº› Com ç›¸å…³çš„å˜é‡åœ¨é &lt;code&gt;SHOW&lt;/code&gt;å‘½ä»¤æŸ¥è¯¢æ—¶è¢«è¿‡æ»¤æ‰äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;SHOW GLOBAL STATUS LIKE&lt;/code&gt;æ˜¯å¿«é€Ÿäº†è§£ MySQL æœåŠ¡å™¨æ•´ä½“è¿è¡ŒçŠ¶å†µå’Œæ€§èƒ½è¡¨ç°çš„å…¥å£ã€‚è¦çœŸæ­£å‘æŒ¥å…¶ä½œç”¨ï¼Œéœ€è¦ä½ å®šæœŸæ•è·è¿™äº›æ•°æ®å¹¶è¿›è¡Œåˆ†æï¼Œä»è€Œå‘ç°æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆæˆ–å¼‚å¸¸ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ä»¥ä¸Šä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;SHOW GLOBAL STATUS LIKE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id="åˆ›å»ºç´¢å¼•"&gt;åˆ›å»ºç´¢å¼•
&lt;/h2&gt;&lt;p&gt;CREATE [UNIQUE] INDEX index_name ON table_name (column_name)&lt;/p&gt;
&lt;h2 id="to_days"&gt;TO_DAYS
&lt;/h2&gt;&lt;p&gt;TO_DAYS() æ˜¯ MySQL ä¸­ä¸€ä¸ªå®ç”¨çš„æ—¥æœŸå‡½æ•°ï¼Œä¸»è¦ç”¨äºå°†æ—¥æœŸè½¬æ¢ä¸ºä¸€ä¸ªè¡¨ç¤ºå¤©æ•°çš„æ•´æ•°å€¼ï¼Œä»¥ä¾¿è¿›è¡Œæ—¥æœŸæ¯”è¾ƒå’Œè®¡ç®—ã€‚ä¸‹é¢æ˜¯å…³äºå®ƒçš„è¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æŒ‡å®šæ—¥æœŸè½¬æ¢ä¸º&lt;strong&gt;è·ç¦»å…¬å…ƒ0å¹´1æœˆ1æ—¥ï¼ˆ0000-01-01ï¼‰çš„å¤©æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‡½æ•°è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;TO_DAYS(date)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å‚æ•°è¯´æ˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;date&lt;/code&gt;: è¦è½¬æ¢çš„æ—¥æœŸå€¼ï¼Œå¯ä»¥æ˜¯ &lt;strong&gt;DATE&lt;/strong&gt;ã€&lt;strong&gt;DATETIME&lt;/strong&gt; ç±»å‹æˆ–ç¬¦åˆæ ¼å¼çš„&lt;strong&gt;æ—¥æœŸå­—ç¬¦ä¸²&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ª&lt;strong&gt;æ•´æ•°&lt;/strong&gt;ï¼Œä»£è¡¨ä»å…¬å…ƒ0å¹´1æœˆ1æ—¥åˆ°ç»™å®šæ—¥æœŸç»è¿‡çš„æ€»å¤©æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ—¥æœŸæ ¼å¼éœ€æœ‰æ•ˆï¼Œå¦åˆ™å¯èƒ½è¿”å› &lt;strong&gt;NULL&lt;/strong&gt; æˆ–æŠ¥é”™ã€‚å¯¹ &lt;strong&gt;DATETIME&lt;/strong&gt; ç±»å‹ï¼Œå‡½æ•°ä¼šè‡ªåŠ¨å¿½ç•¥æ—¶é—´éƒ¨åˆ†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬ç”¨æ³•ä¸ç¤ºä¾‹"&gt;ğŸ“Š åŸºæœ¬ç”¨æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. è½¬æ¢å•ä¸ªæ—¥æœŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT TO_DAYS(&amp;#39;2023-07-12&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼š&lt;code&gt;739078&lt;/code&gt;(è¡¨ç¤º &amp;lsquo;2023-07-12&amp;rsquo; è·ç¦»å…¬å…ƒ0å¹´1æœˆ1æ—¥æœ‰ 739078 å¤©)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. è®¡ç®—æ—¥æœŸå·®å€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´ç›¸å·®çš„å¤©æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT TO_DAYS(&amp;#39;2023-07-12&amp;#39;) - TO_DAYS(&amp;#39;2023-07-01&amp;#39;) AS day_difference;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼š&lt;code&gt;11&lt;/code&gt;(è¡¨ç¤ºä¸¤ä¸ªæ—¥æœŸç›¸å·®11å¤©)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥æ‰¾æŒ‡å®šæ—¥æœŸä¹‹åçš„è®¢å•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM orders
WHERE TO_DAYS(order_date) &amp;gt; TO_DAYS(&amp;#39;2022-01-02&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-5"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸæœ‰æ•ˆæ€§&lt;/strong&gt;ï¼šä¼ å…¥çš„æ—¥æœŸå¿…é¡»æ˜¯MySQLèƒ½è¯†åˆ«çš„æœ‰æ•ˆæ—¥æœŸæ ¼å¼ï¼Œå¦åˆ™å‡½æ•°å¯èƒ½è¿”å› &lt;code&gt;NULL&lt;/code&gt;æˆ–äº§ç”Ÿé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå°è¯•è½¬æ¢æ— æ•ˆæ—¥æœŸ &amp;lsquo;0000-00-00&amp;rsquo; æˆ– &amp;lsquo;0000-01-01&amp;rsquo; ä¼šå¯¼è‡´é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸèŒƒå›´&lt;/strong&gt;ï¼šTO_DAYS() é€‚ç”¨äºMySQLæ”¯æŒçš„æ—¥æœŸèŒƒå›´ï¼ˆçº¦å…¬å…ƒ1000-01-01è‡³9999-12-31ï¼‰ï¼Œè¶…å‡ºæ­¤èŒƒå›´çš„æ—¥æœŸå¯èƒ½æ— æ³•å‡†ç¡®è®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†æ³•è§„åˆ™&lt;/strong&gt;ï¼šTO_DAYS() å‡½æ•°çš„è®¡ç®—åŸºäº&lt;strong&gt;å…¬å†ï¼ˆæ ¼é‡Œé«˜åˆ©å†ï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´éƒ¨åˆ†å¤„ç†&lt;/strong&gt;ï¼šå¦‚æœå‚æ•°æ˜¯ DATETIME æˆ– TIMESTAMP ç±»å‹ï¼Œ&lt;strong&gt;TO_DAYS() ä¼šè‡ªåŠ¨å¿½ç•¥æ—¶é—´éƒ¨åˆ†&lt;/strong&gt;ï¼Œåªæ ¹æ®æ—¥æœŸéƒ¨åˆ†è¿›è¡Œè®¡ç®—ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–æ—¥æœŸå‡½æ•°çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ—¥æœŸå‡½æ•°çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;TO_DAYS() ä¸“æ³¨äºå°†æ—¥æœŸè½¬æ¢ä¸ºç»å¯¹å¤©æ•°ï¼Œé€‚ç”¨äºè®¡ç®—ç»å¯¹å·®å€¼ã€‚MySQLè¿˜æä¾›äº†å…¶ä»–æ—¥æœŸå‡½æ•°ç”¨äºä¸åŒåœºæ™¯ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°å&lt;/th&gt;
&lt;th&gt;ä½œç”¨æè¿°&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DATEDIFF()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATEDIFF('2023-07-12', '2023-07-01');&lt;/code&gt;â†’ &lt;code&gt;11&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DATE_ADD()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ—¥æœŸæ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DATE_ADD('2023-07-01', INTERVAL 11 DAY);&lt;/code&gt;â†’ &lt;code&gt;'2023-07-12'&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DAYOFWEEK()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ˜¯æ˜ŸæœŸå‡ ï¼ˆ1=å‘¨æ—¥, 2=å‘¨ä¸€, &amp;hellip;, 7=å‘¨å…­ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DAYOFWEEK('2023-07-12');&lt;/code&gt;â†’ &lt;code&gt;4&lt;/code&gt;(å‘¨ä¸‰)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DAYOFYEAR()&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›æ—¥æœŸæ˜¯è¯¥å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼ˆ1-366ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT DAYOFYEAR('2023-07-12');&lt;/code&gt;â†’ &lt;code&gt;193&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-1"&gt;ğŸ’¡ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡ç®—æ—¥æœŸå·®å€¼&lt;/strong&gt;ï¼šè¿™æ˜¯ TO_DAYS() æœ€å¸¸è§çš„ç”¨é€”ï¼Œä¾‹å¦‚è®¡ç®—è®¢å•å¤„ç†æ—¶é•¿ã€ç”¨æˆ·å¹´é¾„ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸèŒƒå›´è¿‡æ»¤&lt;/strong&gt;ï¼šåœ¨ WHERE å­å¥ä¸­åŸºäºå¤©æ•°è¿›è¡Œæ—¥æœŸæ¯”è¾ƒå’Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–æ—¥æœŸè®¡ç®—&lt;/strong&gt;ï¼šå°†æ—¥æœŸè½¬æ¢ä¸ºå¤©æ•°åï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ‰§è¡Œå„ç§ç®—æœ¯è¿ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;TO_DAYS() å‡½æ•°é€šè¿‡å°†æ—¥æœŸè½¬æ¢ä¸ºè‡ªå›ºå®šèµ·ç‚¹ï¼ˆ0000-01-01ï¼‰ä»¥æ¥çš„å¤©æ•°ï¼Œä¸º&lt;strong&gt;æ—¥æœŸæ¯”è¾ƒå’Œå·®å€¼è®¡ç®—&lt;/strong&gt;æä¾›äº†å¾ˆå¤§ä¾¿åˆ©ã€‚å®ƒåœ¨å¤„ç†éœ€è¦è®¡ç®—ç»å¯¹å¤©æ•°çš„åœºæ™¯æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQL 5.6+ çš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;strong&gt;DATEDIFF()&lt;/strong&gt; å‡½æ•°ä¹Ÿèƒ½ç›´æ¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®ï¼Œå¹¶ä¸”è¯­æ³•æ›´ç®€æ´ã€‚åœ¨é€‰æ‹©ä½¿ç”¨ TO_DAYS() è¿˜æ˜¯ DATEDIFF() æ—¶ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å’Œä»£ç æ¸…æ™°åº¦æ¥å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ TO_DAYS() å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="åˆ†åŒº"&gt;åˆ†åŒº
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„åˆ†åŒºè¡¨åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ å°†ä¸€å¼ å¤§è¡¨çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªç‰©ç†å­˜å‚¨å•å…ƒï¼ˆåˆ†åŒºï¼‰ä¸­ï¼Œä½†åœ¨é€»è¾‘ä¸Šä»ä¿æŒä¸ºä¸€å¼ è¡¨ã€‚é™¤äº† &lt;strong&gt;RANGE&lt;/strong&gt; åˆ†åŒºï¼ŒMySQL è¿˜æ”¯æŒå…¶ä»–å‡ ç§åˆ†åŒºç±»å‹ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„æ¦‚è§ˆè¡¨æ ¼ï¼Œå¸®åŠ©ä½ ç›´è§‚åœ°äº†è§£ MySQL çš„ä¸»è¦åˆ†åŒºç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†åŒºç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ³¨æ„äº‹é¡¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RANGE&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºç»™å®š&lt;strong&gt;è¿ç»­åŒºé—´&lt;/strong&gt;çš„åˆ—å€¼è¿›è¡Œåˆ’åˆ†&lt;/td&gt;
&lt;td&gt;æ—¶é—´åºåˆ—æ•°æ®ï¼ˆå¦‚æŒ‰å¹´ã€æœˆåˆ†åŒºï¼‰ã€æ•°å€¼èŒƒå›´ï¼ˆå¦‚æŒ‰é‡‘é¢ã€å¹´é¾„åˆ†åŒºï¼‰&lt;/td&gt;
&lt;td&gt;ä¼ ç»Ÿæ–¹å¼è¦æ±‚åˆ†åŒºè¡¨è¾¾å¼æœ€ç»ˆè®¡ç®—å‡ºä¸€ä¸ª&lt;strong&gt;æ•´æ•°å€¼&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LIST&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºåˆ—çš„&lt;strong&gt;ç¦»æ•£å€¼åˆ—è¡¨&lt;/strong&gt;è¿›è¡Œåˆ’åˆ†&lt;/td&gt;
&lt;td&gt;å…·æœ‰æ˜ç¡®åˆ†ç±»çš„æ•°æ®ï¼ˆå¦‚æŒ‰åœ°åŒºã€çŠ¶æ€ç ã€éƒ¨é—¨IDåˆ†åŒºï¼‰&lt;/td&gt;
&lt;td&gt;æ’å…¥çš„å€¼å¿…é¡»å±äºæŸä¸ªå·²å®šä¹‰çš„åˆ†åŒºåˆ—è¡¨ï¼Œå¦åˆ™ä¼šå¤±è´¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;HASH&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®ç”¨æˆ·å®šä¹‰è¡¨è¾¾å¼çš„&lt;strong&gt;å“ˆå¸Œå€¼&lt;/strong&gt;å‡åŒ€åˆ†å¸ƒæ•°æ®&lt;/td&gt;
&lt;td&gt;æ—¨åœ¨&lt;strong&gt;å‡åŒ€åˆ†å¸ƒæ•°æ®&lt;/strong&gt;ï¼Œé¿å…çƒ­ç‚¹ï¼Œæ— ç‰¹å®šä¸šåŠ¡é€»è¾‘å€¾å‘&lt;/td&gt;
&lt;td&gt;é€šå¸¸åªéœ€æŒ‡å®šåˆ†åŒº&lt;strong&gt;æ•°é‡&lt;/strong&gt;ï¼ŒMySQL ä¼šè®¡ç®—å“ˆå¸Œå¹¶å–æ¨¡æ¥å†³å®šæ•°æ®å­˜æ”¾çš„åˆ†åŒº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;KEY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç±»ä¼¼äº HASH åˆ†åŒºï¼Œä½†ä½¿ç”¨ MySQL &lt;strong&gt;å†…ç½®çš„å“ˆå¸Œå‡½æ•°&lt;/strong&gt;ï¼ˆåŸºäº PASSWORD() ç®—æ³•ï¼‰ï¼Œä¸”åˆ†åŒºé”®å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—&lt;/td&gt;
&lt;td&gt;ç®€åŒ–é…ç½®ï¼Œå½“æ²¡æœ‰æ˜æ˜¾åˆ†åŒºé”®æˆ–æƒ³åŸºäºè¡¨çš„ä¸»é”®è¿›è¡Œå‡åŒ€åˆ†å¸ƒæ—¶&lt;/td&gt;
&lt;td&gt;è‹¥åˆ†åŒºé”®æœªæ˜¾å¼æŒ‡å®šï¼Œä¸”è¡¨å­˜åœ¨ä¸»é”®ï¼Œåˆ™&lt;strong&gt;é»˜è®¤ä½¿ç”¨ä¸»é”®&lt;/strong&gt;ä½œä¸ºåˆ†åŒºé”®&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆä¼ ç»Ÿrange-åˆ†åŒºè¦æ±‚æ˜¯æ•´æ•°"&gt;ğŸ“Œ ä¸ºä»€ä¹ˆï¼ˆä¼ ç»Ÿï¼‰RANGE åˆ†åŒºè¦æ±‚æ˜¯æ•´æ•°ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä¼ ç»Ÿçš„ &lt;code&gt;RANGE&lt;/code&gt;åˆ†åŒºæœ‰ä¸€ä¸ªå…³é”®è¦æ±‚ï¼š&lt;strong&gt;åˆ†åŒºè¡¨è¾¾å¼å¿…é¡»è¿”å›ä¸€ä¸ªæ•´æ•°å€¼&lt;/strong&gt;ï¼ˆæˆ–è€…èƒ½è¢«è®¡ç®—æˆ–è½¬æ¢ä¸ºæ•´æ•°å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™èƒŒåçš„ä¸»è¦åŸå› ä¸ &lt;strong&gt;MySQL å†…éƒ¨éœ€è¦å¿«é€Ÿã€æ˜ç¡®åœ°æ¯”è¾ƒå’Œåˆ’åˆ†æ•°æ®èŒƒå›´&lt;/strong&gt; çš„æœºåˆ¶æœ‰å…³ã€‚æ•´æ•°åœ¨è®¡ç®—å’Œæ¯”è¾ƒæ—¶éå¸¸é«˜æ•ˆï¼Œèƒ½å¤Ÿæ¸…æ™°åœ°å®šä¹‰â€œå°äºâ€æˆ–â€œå¤§äºâ€çš„è¾¹ç•Œï¼ˆä¾‹å¦‚ &lt;code&gt;VALUES LESS THAN (10)&lt;/code&gt;ï¼‰ã€‚è¿™ç§æ˜ç¡®çš„æ¯”è¾ƒæ˜¯èŒƒå›´åˆ’åˆ†çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ»¡è¶³è¿™ä¸ªè¦æ±‚ï¼Œå½“ä½ æƒ³è¦åŸºäº&lt;strong&gt;æ—¥æœŸ&lt;/strong&gt;æˆ–&lt;strong&gt;æ—¶é—´&lt;/strong&gt;è¿™ç±»éæ•´æ•°å­—æ®µè¿›è¡Œ &lt;code&gt;RANGE&lt;/code&gt;åˆ†åŒºæ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ç‰¹å®šçš„å‡½æ•°å°†å…¶è½¬æ¢ä¸ºæ•´æ•°ã€‚MySQL ä¼˜åŒ–å™¨å¯¹æ­¤æœ‰æ˜ç¡®æ”¯æŒï¼Œå¸¸ç”¨çš„å‡½æ•°åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;YEAR()&lt;/code&gt;: æå–å¹´ä»½ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PARTITION BY RANGE ( YEAR(sale_date) )
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;TO_DAYS()&lt;/code&gt;: å°†æ—¥æœŸè½¬æ¢ä¸ºè‡ªå…¬å…ƒ0å¹´1æœˆ1æ—¥ä»¥æ¥çš„å¤©æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PARTITION BY RANGE ( TO_DAYS(sale_date) )
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;UNIX_TIMESTAMP()&lt;/code&gt;: å°†æ—¥æœŸæ—¶é—´è½¬æ¢ä¸ºè‡ª &amp;lsquo;1970-01-01 00:00:00&amp;rsquo; UTC ä»¥æ¥çš„ç§’æ•°ï¼ˆæ—¶é—´æˆ³ï¼‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PARTITION BY RANGE ( UNIX_TIMESTAMP(created_at) )
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-range-columns-åˆ†åŒºå¯¹ä¼ ç»Ÿ-range-åˆ†åŒºçš„æ‰©å±•"&gt;ğŸ”„ RANGE COLUMNS åˆ†åŒºï¼šå¯¹ä¼ ç»Ÿ RANGE åˆ†åŒºçš„æ‰©å±•
&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ è§‰å¾—æ¯æ¬¡éƒ½è¦ç”¨å‡½æ•°è½¬æ¢å¾ˆéº»çƒ¦ï¼Œæˆ–è€…å°±æ˜¯æƒ³ç›´æ¥ç”¨éæ•´æ•°ç±»å‹ï¼ˆå¦‚ &lt;code&gt;DATE&lt;/code&gt;, &lt;code&gt;DATETIME&lt;/code&gt;, &lt;code&gt;CHAR&lt;/code&gt;, &lt;code&gt;VARCHAR&lt;/code&gt;ï¼‰çš„åˆ—è¿›è¡ŒèŒƒå›´åˆ†åŒºï¼ŒMySQL æä¾›äº† &lt;strong&gt;&lt;code&gt;RANGE COLUMNS&lt;/code&gt;&lt;/strong&gt; åˆ†åŒºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RANGE COLUMNS&lt;/code&gt;å…è®¸ä½ &lt;strong&gt;ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—&lt;/strong&gt;æ¥è¿›è¡ŒèŒƒå›´åˆ’åˆ†ï¼Œè€Œæ— éœ€å°†å…¶è½¬æ¢ä¸ºæ•´æ•°ã€‚å®ƒåœ¨åº•å±‚ç›´æ¥æ¯”è¾ƒåˆ—çš„å®é™…å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹ï¼šç›´æ¥ä½¿ç”¨ &lt;code&gt;DATE&lt;/code&gt;åˆ—è¿›è¡Œ &lt;code&gt;RANGE COLUMNS&lt;/code&gt;åˆ†åŒº&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE sales (
id INT NOT NULL,
sale_date DATE NOT NULL,
amount DECIMAL(10, 2)
)
PARTITION BY RANGE COLUMNS(sale_date) (
PARTITION p2023_q1 VALUES LESS THAN (&amp;#39;2023-04-01&amp;#39;),
PARTITION p2023_q2 VALUES LESS THAN (&amp;#39;2023-07-01&amp;#39;),
PARTITION p2023_q3 VALUES LESS THAN (&amp;#39;2023-10-01&amp;#39;),
PARTITION p2023_q4 VALUES LESS THAN (&amp;#39;2024-01-01&amp;#39;),
PARTITION p_future VALUES LESS THAN (MAXVALUE)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ &lt;code&gt;sale_date&lt;/code&gt;è¿™ä¸ª &lt;code&gt;DATE&lt;/code&gt;ç±»å‹çš„åˆ—æ¥å®šä¹‰åˆ†åŒºèŒƒå›´ï¼Œè¯­æ³•æ›´ç›´è§‚æ˜“æ‡‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;RANGE&lt;/code&gt;ä¸ &lt;code&gt;RANGE COLUMNS&lt;/code&gt;çš„ä¸»è¦åŒºåˆ«&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;RANGE&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;RANGE COLUMNS&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†åŒºé”®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºäºè¡¨è¾¾å¼ï¼ˆå¦‚ &lt;code&gt;YEAR(date_col)&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—åç›´æ¥æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ”¯æŒçš„æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨è¾¾å¼æœ€ç»ˆé¡»ä¸ºæ•´æ•°&lt;/td&gt;
&lt;td&gt;æ”¯æŒæ•´æ•°ã€å­—ç¬¦ä¸²ã€æ—¥æœŸæ—¶é—´ç­‰å¤šç§ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šåˆ—åˆ†åŒº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©åˆ†åŒºç±»å‹"&gt;ğŸ’¡ å¦‚ä½•é€‰æ‹©åˆ†åŒºç±»å‹
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªç§åˆ†åŒºæ–¹å¼ä¸»è¦å–å†³äºä½ çš„&lt;strong&gt;ä¸šåŠ¡éœ€æ±‚å’Œæ•°æ®è®¿é—®æ¨¡å¼&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢å’Œå½’æ¡£&lt;/strong&gt;ï¼š&lt;code&gt;RANGE&lt;/code&gt;æˆ– &lt;code&gt;RANGE COLUMNS&lt;/code&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;sale_date&lt;/code&gt;ï¼‰æ˜¯é¦–é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰ç±»åˆ«ç®¡ç†æ•°æ®&lt;/strong&gt;ï¼š&lt;code&gt;LIST&lt;/code&gt;åˆ†åŒºï¼ˆä¾‹å¦‚ &lt;code&gt;region&lt;/code&gt;æˆ– &lt;code&gt;product_category&lt;/code&gt;ï¼‰æ›´åˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºäº†å‡åŒ€åˆ†å¸ƒæ•°æ®ï¼Œæé«˜å¹¶è¡Œæ€§èƒ½&lt;/strong&gt;ï¼š&lt;code&gt;HASH&lt;/code&gt;æˆ– &lt;code&gt;KEY&lt;/code&gt;åˆ†åŒºï¼ˆä¾‹å¦‚ &lt;code&gt;user_id&lt;/code&gt;ï¼‰æ˜¯å¸¸è§é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åˆ†åŒºè¡¨çš„é€šç”¨é™åˆ¶"&gt;âš ï¸ åˆ†åŒºè¡¨çš„é€šç”¨é™åˆ¶
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ä»»ä½•åˆ†åŒºç±»å‹æ—¶ï¼Œéƒ½éœ€è¦æ³¨æ„ä¸€äº›é€šç”¨é™åˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºé”®ä¸ä¸»é”®&lt;/strong&gt;ï¼šå¦‚æœè¡¨æœ‰ä¸»é”®ï¼Œ&lt;strong&gt;åˆ†åŒºé”®å¿…é¡»æ˜¯ä¸»é”®çš„ä¸€éƒ¨åˆ†&lt;/strong&gt;ï¼Œæˆ–è€…ä¸»é”®æœ¬èº«å¿…é¡»åŒ…å«åˆ†åŒºé”®ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿ä¸€è¡Œæ•°æ®èƒ½å”¯ä¸€åœ°ç¡®å®šå±äºå“ªä¸ªåˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–é”®çº¦æŸ&lt;/strong&gt;ï¼šåˆ†åŒºè¡¨&lt;strong&gt;ä¸æ”¯æŒå¤–é”®çº¦æŸ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“&lt;/strong&gt;ï¼šæ‰€æœ‰åˆ†åŒºå¿…é¡»ä½¿ç”¨&lt;strong&gt;ç›¸åŒçš„å­˜å‚¨å¼•æ“&lt;/strong&gt;ï¼ˆä¾‹å¦‚å…¨éƒ¨æ˜¯ InnoDBï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼šåˆ†åŒºè¡¨&lt;strong&gt;ä¸æ”¯æŒå…¨æ–‡ç´¢å¼•&lt;/strong&gt;ï¼ˆFULLTEXT indexï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ MySQL çš„åˆ†åŒºåŠŸèƒ½ï¼Œå¹¶ä¸ºä½ çš„æ•°æ®åº“è®¾è®¡åšå‡ºåˆé€‚çš„å†³ç­–ã€‚&lt;/p&gt;
&lt;h2 id="sql-æ‰§è¡Œé¡ºåº"&gt;SQL æ‰§è¡Œé¡ºåº
&lt;/h2&gt;&lt;p&gt;ç†è§£ MySQL æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œèƒ½å¸®ä½ å†™å‡ºæ›´é«˜æ•ˆç‡ã€æ›´å‡†ç¡®çš„ SQLï¼Œå°¤å…¶åœ¨ä¼˜åŒ–æŸ¥è¯¢å’Œæ’é™¤é”™è¯¯æ—¶éå¸¸æœ‰ç”¨ã€‚è™½ç„¶æˆ‘ä»¬å†™ SQL æ—¶æ˜¯æŒ‰ &lt;code&gt;SELECT -&amp;gt; FROM -&amp;gt; WHERE -&amp;gt; GROUP BY -&amp;gt; HAVING -&amp;gt; ORDER BY -&amp;gt; LIMIT&lt;/code&gt;çš„é€»è¾‘æ¥å†™ï¼Œä½† MySQL æ‰§è¡Œå®ƒä»¬çš„é¡ºåºå´å¾ˆä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ MySQL æŸ¥è¯¢ä¸­å„ä¸ªå…³é”®å­—çš„&lt;strong&gt;é€»è¾‘æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼å¸®ä½ å¿«é€Ÿæ¦‚è§ˆï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é¡ºåº&lt;/th&gt;
&lt;th&gt;å…³é”®å­—/é˜¶æ®µ&lt;/th&gt;
&lt;th&gt;ä¸»è¦ä½œç”¨&lt;/th&gt;
&lt;th&gt;å¯ä½¿ç”¨çš„é˜¶æ®µ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;FROM&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡®å®šæŸ¥è¯¢çš„ä¸»è¦è¡¨ï¼Œå¹¶åŠ è½½æ•°æ®&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥å…¶ä»–è¡¨ï¼Œæ ¹æ®ONæ¡ä»¶ç”Ÿæˆä¸­é—´ç»“æœ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ON&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åº”ç”¨JOINçš„è¿æ¥æ¡ä»¶ï¼Œè¿‡æ»¤ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;WHERE&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è¡Œæ•°æ®è¿›è¡Œè¿‡æ»¤&lt;/td&gt;
&lt;td&gt;ä¸èƒ½ä½¿ç”¨SELECTä¸­çš„åˆ«å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹è¿‡æ»¤åçš„æ•°æ®è¿›è¡Œåˆ†ç»„&lt;/td&gt;
&lt;td&gt;ä¸èƒ½ä½¿ç”¨SELECTä¸­çš„åˆ«å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;HAVING&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹åˆ†ç»„åçš„ç»„è¿›è¡Œè¿‡æ»¤&lt;/td&gt;
&lt;td&gt;å¯ä½¿ç”¨èšåˆå‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;SELECT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€‰æ‹©è¦è¿”å›çš„åˆ—ã€è®¡ç®—è¡¨è¾¾å¼ã€æŒ‡å®šåˆ«å&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å»é™¤ç»“æœä¸­çš„é‡å¤è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹æœ€ç»ˆç»“æœé›†è¿›è¡Œæ’åº&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯ä»¥ä½¿ç”¨&lt;/strong&gt;SELECTä¸­çš„åˆ«å&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;LIMIT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é™åˆ¶è¿”å›ç»“æœçš„è¡Œæ•°ï¼ˆåˆ†é¡µï¼‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ§  &lt;strong&gt;ç®€è¦è®°å¿†å£è¯€&lt;/strong&gt;ï¼š&lt;strong&gt;F&lt;/strong&gt;rom -&amp;gt; &lt;strong&gt;J&lt;/strong&gt;oin -&amp;gt; &lt;strong&gt;O&lt;/strong&gt;n -&amp;gt; &lt;strong&gt;W&lt;/strong&gt;here -&amp;gt; &lt;strong&gt;G&lt;/strong&gt;roup by -&amp;gt; &lt;strong&gt;H&lt;/strong&gt;aving -&amp;gt; &lt;strong&gt;S&lt;/strong&gt;elect -&amp;gt; &lt;strong&gt;D&lt;/strong&gt;istinct -&amp;gt; &lt;strong&gt;O&lt;/strong&gt;rder by -&amp;gt; &lt;strong&gt;L&lt;/strong&gt;imit ï¼ˆå¯è®°ä¸ºâ€œF-J-O-W-G-H-S-D-O-Lâ€ï¼‰&lt;/p&gt;
&lt;h3 id="è¯¦ç»†é˜¶æ®µè§£æ"&gt;è¯¦ç»†é˜¶æ®µè§£æ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;FROM å’Œ JOIN&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æŸ¥è¯¢çš„èµ·ç‚¹ã€‚MySQL é¦–å…ˆç¡®å®šè¦ä»å“ªäº›è¡¨è·å–æ•°æ®ï¼ˆ&lt;code&gt;FROM&lt;/code&gt;å­å¥ï¼‰ï¼Œç„¶åæ ¹æ®&lt;code&gt;JOIN&lt;/code&gt;ç±»å‹ï¼ˆå¦‚ &lt;code&gt;LEFT JOIN&lt;/code&gt;, &lt;code&gt;INNER JOIN&lt;/code&gt;ï¼‰å’Œ&lt;code&gt;ON&lt;/code&gt;æ¡ä»¶è¿æ¥è¿™äº›è¡¨ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸ä¼šå…ˆäº§ç”Ÿä¸€ä¸ªç¬›å¡å°”ç§¯ï¼Œç„¶åç”¨&lt;code&gt;ON&lt;/code&gt;æ¡ä»¶è¿›è¡Œè¿‡æ»¤ï¼Œç”Ÿæˆç¬¬ä¸€å¼ è™šæ‹Ÿä¸­é—´è¡¨ï¼ˆVT1ï¼‰ã€‚&lt;strong&gt;å¤šè¡¨è¿æ¥æ—¶ï¼Œä¼šé‡å¤è¿™ä¸ªè¿‡ç¨‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ON&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åº”ç”¨&lt;code&gt;JOIN&lt;/code&gt;æ¡ä»¶ï¼Œè¿‡æ»¤æ‰ä¸æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨VT2ã€‚å¯¹äº&lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼Œå¦‚æœå³è¡¨æ— åŒ¹é…è¡Œï¼Œåˆ™ä¼šç”¨&lt;code&gt;NULL&lt;/code&gt;å¡«å……å³è¡¨åˆ—ï¼Œä½†å·¦è¡¨è®°å½•ä»ä¼šä¿ç•™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;WHERE&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹VT2ä¸­çš„&lt;strong&gt;æ¯ä¸€è¡Œ&lt;/strong&gt;æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚åªæœ‰æ»¡è¶³&lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶çš„è¡Œæ‰ä¼šè¿›å…¥ä¸‹ä¸€æ­¥ã€‚&lt;strong&gt;è¿™é‡Œä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;SUM&lt;/code&gt;ï¼‰ï¼Œå› ä¸ºå®ƒä½œç”¨äºåˆ†ç»„å‰çš„å•è¡Œè®°å½•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;GROUP BY&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†&lt;code&gt;WHERE&lt;/code&gt;è¿‡æ»¤åçš„æ•°æ®ï¼ˆVT3ï¼‰æŒ‰ç…§æŒ‡å®šçš„åˆ—è¿›è¡Œåˆ†ç»„ã€‚æ¯ç»„ä¼šç”Ÿæˆä¸€è¡Œè®°å½•ï¼Œä¸ºåç»­çš„èšåˆè®¡ç®—ï¼ˆå¦‚&lt;code&gt;COUNT&lt;/code&gt;, &lt;code&gt;SUM&lt;/code&gt;, &lt;code&gt;AVG&lt;/code&gt;ï¼‰åšå‡†å¤‡ï¼Œç”ŸæˆVT4ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;HAVING&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹&lt;code&gt;GROUP BY&lt;/code&gt;åˆ†ç»„åçš„ç»“æœï¼ˆVT4ï¼‰è¿›è¡Œè¿‡æ»¤ã€‚&lt;strong&gt;ä¸&lt;code&gt;WHERE&lt;/code&gt;ä¸åŒï¼Œ&lt;code&gt;HAVING&lt;/code&gt;ä½œç”¨äºåˆ†ç»„ï¼ˆç»„çº§è¿‡æ»¤ï¼‰&lt;/strong&gt;ï¼Œå› æ­¤&lt;strong&gt;å¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;HAVING COUNT(*) &amp;gt; 5&lt;/code&gt;ï¼‰ï¼Œç”ŸæˆVT5ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SELECT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¡®å®šæœ€ç»ˆç»“æœé›†è¦åŒ…å«å“ªäº›åˆ—ã€‚å¯ä»¥è®¡ç®—è¡¨è¾¾å¼ï¼ˆå¦‚ &lt;code&gt;salary * 12&lt;/code&gt;ï¼‰ã€ä½¿ç”¨èšåˆå‡½æ•°ï¼Œå¹¶ä¸ºåˆ—æŒ‡å®šåˆ«åã€‚&lt;strong&gt;æ³¨æ„ï¼šåœ¨æ­¤é˜¶æ®µå®šä¹‰çš„åˆ«åï¼Œåœ¨æ­¤å‰çš„é˜¶æ®µï¼ˆå¦‚&lt;code&gt;WHERE&lt;/code&gt;, &lt;code&gt;GROUP BY&lt;/code&gt;ï¼‰ä¸­ä¸å¯ç”¨&lt;/strong&gt;ï¼Œç”ŸæˆVT6ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;DISTINCT&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»SELECTçš„ç»“æœï¼ˆVT6ï¼‰ä¸­å»é™¤é‡å¤çš„è¡Œï¼Œç”ŸæˆVT7ã€‚å¦‚æœæŸ¥è¯¢åŒ…å«äº†&lt;code&gt;GROUP BY&lt;/code&gt;ï¼Œé€šå¸¸å·²ç»å®ç°äº†éšå¼çš„å»é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ORDER BY&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹å¤„ç†å®Œçš„æ•°æ®ï¼ˆVT7ï¼‰æŒ‰ç…§æŒ‡å®šçš„åˆ—è¿›è¡Œæ’åºï¼ˆå‡åºASCæˆ–é™åºDESCï¼‰ã€‚&lt;strong&gt;è¿™æ˜¯å”¯ä¸€ä¸€ä¸ªå¯ä»¥ä½¿ç”¨&lt;code&gt;SELECT&lt;/code&gt;å­å¥ä¸­å®šä¹‰çš„åˆ«åçš„åœ°æ–¹&lt;/strong&gt;ï¼Œç”Ÿæˆä¸€ä¸ªæœ‰åºçš„è™šæ‹Ÿè¡¨VT8ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;LIMIT / OFFSET&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæ ¹æ®é™åˆ¶æ¡ä»¶è¿”å›æŒ‡å®šæ•°é‡çš„è¡Œï¼ˆä¾‹å¦‚ï¼Œç”¨äºåˆ†é¡µï¼‰ã€‚è¿™æ˜¯æŸ¥è¯¢å¤„ç†çš„æœ€åä¸€æ­¥ï¼Œç”Ÿæˆæœ€ç»ˆçš„VT9å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç¤ºä¾‹è¯´æ˜"&gt;ğŸ“– ç¤ºä¾‹è¯´æ˜
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥ç†è§£è¿™ä¸ªé¡ºåºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
department,
COUNT(*) AS emp_count
FROM
employees
WHERE
salary &amp;gt; 6000
GROUP BY
department
HAVING
COUNT(*) &amp;gt; 2
ORDER BY
emp_count DESC
LIMIT 10;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶æ‰§è¡Œé¡ºåºä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FROM employees&lt;/strong&gt;: åŠ è½½å‘˜å·¥è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WHERE salary &amp;gt; 6000&lt;/strong&gt;: è¿‡æ»¤å‡ºå·¥èµ„é«˜äº6000çš„å‘˜å·¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GROUP BY department&lt;/strong&gt;: å°†è¿‡æ»¤åçš„å‘˜å·¥æŒ‰éƒ¨é—¨åˆ†ç»„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HAVING COUNT(*) &amp;gt; 2&lt;/strong&gt;: è¿‡æ»¤å‡ºå‘˜å·¥æ•°é‡å¤§äº2çš„éƒ¨é—¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SELECT department, COUNT(*) AS emp_count&lt;/strong&gt;: é€‰æ‹©éƒ¨é—¨åç§°å’Œè®¡ç®—å‡ºçš„å‘˜å·¥æ•°ï¼Œå¹¶ä¸ºè®¡æ•°ç»“æœèµ·åˆ«å&lt;code&gt;emp_count&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY emp_count DESC&lt;/strong&gt;: ä½¿ç”¨åˆ«å&lt;code&gt;emp_count&lt;/code&gt;å¯¹ç»“æœè¿›è¡Œé™åºæ’åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LIMIT 10&lt;/strong&gt;: è¿”å›å‰10æ¡è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€§èƒ½å»ºè®®å’Œå¸¸è§è¯¯åŒº"&gt;ğŸ’¡ æ€§èƒ½å»ºè®®å’Œå¸¸è§è¯¯åŒº
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å–„ç”¨ WHERE å’Œ HAVING&lt;/strong&gt;ï¼š&lt;strong&gt;å°½å¯èƒ½åœ¨&lt;code&gt;WHERE&lt;/code&gt;é˜¶æ®µè¿‡æ»¤æ‰æ›´å¤šæ•°æ®&lt;/strong&gt;ï¼Œè¿™æ ·èƒ½å‡å°‘&lt;code&gt;GROUP BY&lt;/code&gt;éœ€è¦å¤„ç†çš„æ•°æ®é‡ï¼Œæå‡æ€§èƒ½ã€‚&lt;code&gt;HAVING&lt;/code&gt;åªåº”ç”¨äºæ— æ³•ç”¨&lt;code&gt;WHERE&lt;/code&gt;å®Œæˆçš„ã€é’ˆå¯¹åˆ†ç»„çš„è¿‡æ»¤æ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ«åçš„ä½œç”¨åŸŸ&lt;/strong&gt;ï¼š&lt;code&gt;SELECT&lt;/code&gt;ä¸­å®šä¹‰çš„åˆ«å&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;åœ¨ &lt;code&gt;WHERE&lt;/code&gt;ã€&lt;code&gt;GROUP BY&lt;/code&gt;æˆ– &lt;code&gt;HAVING&lt;/code&gt;ä¸­ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨è¿™äº›é˜¶æ®µä¹‹åæ‰æ‰§è¡Œçš„ã€‚ä½†&lt;strong&gt;å¯ä»¥&lt;/strong&gt;åœ¨ &lt;code&gt;ORDER BY&lt;/code&gt;ä¸­ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨ SELECT *&lt;/strong&gt;ï¼šæ˜ç¡®åˆ—å‡ºéœ€è¦çš„åˆ—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨&lt;code&gt;SELECT *&lt;/code&gt;ï¼Œè¿™å¯ä»¥å‡å°‘æ•°æ®ä¼ è¾“é‡å’Œå†…å­˜æ¶ˆè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ORDER BY å¼€é”€&lt;/strong&gt;ï¼šæ’åºå¯èƒ½æˆæœ¬å¾ˆé«˜ï¼Œå°¤å…¶æ˜¯å¯¹å¤§è¡¨ã€‚å¦‚æœå¯èƒ½ï¼Œå°è¯•é€šè¿‡ç´¢å¼•æ¥ä¼˜åŒ–æ’åºæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LIMIT ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹äºæ·±åº¦åˆ†é¡µï¼ˆå¦‚ &lt;code&gt;LIMIT 100000, 10&lt;/code&gt;ï¼‰ï¼Œé¿å…ä½¿ç”¨å¤§çš„&lt;code&gt;OFFSET&lt;/code&gt;ã€‚å¯ä»¥å°è¯•ç”¨&lt;code&gt;WHERE [ç´¢å¼•åˆ—] &amp;gt; [ä¸Šæ¬¡æœ€å¤§å€¼] ORDER BY [ç´¢å¼•åˆ—] LIMIT 10&lt;/code&gt;çš„æ–¹å¼æ¥ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æŸ¥è¯¢çš„å®Œæ•´æ‰§è¡Œè¿‡ç¨‹"&gt;æŸ¥è¯¢çš„å®Œæ•´æ‰§è¡Œè¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šè¿°çš„é€»è¾‘æ‰§è¡Œé¡ºåºä¸»è¦æ˜¯&lt;strong&gt;ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’åï¼Œæ‰§è¡Œå™¨å¤§è‡´çš„å·¥ä½œæµç¨‹&lt;/strong&gt;ã€‚ä¸€æ¡SQLæŸ¥è¯¢åœ¨MySQLä¸­å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸè¿˜åŒ…æ‹¬æ›´å‰æœŸçš„é˜¶æ®µï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥å™¨&lt;/strong&gt;ï¼šç®¡ç†å®¢æˆ·ç«¯è¿æ¥ã€èº«ä»½è®¤è¯å’Œæƒé™éªŒè¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢ç¼“å­˜&lt;/strong&gt;ï¼šï¼ˆ&lt;strong&gt;åœ¨MySQL 8.0ä¸­å·²ç§»é™¤&lt;/strong&gt;ï¼‰å¦‚æœå¯ç”¨ï¼Œä¼šå…ˆæ£€æŸ¥æŸ¥è¯¢æ˜¯å¦å®Œå…¨åŒ¹é…ç¼“å­˜ï¼ŒåŒ¹é…åˆ™ç›´æ¥è¿”å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æå™¨&lt;/strong&gt;ï¼šè¿›è¡Œè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æï¼Œæ£€æŸ¥SQLè¯­å¥æ˜¯å¦æ­£ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–å™¨&lt;/strong&gt;ï¼š&lt;strong&gt;æ ¸å¿ƒé˜¶æ®µ&lt;/strong&gt;ã€‚æ ¹æ®ç»Ÿè®¡ä¿¡æ¯å’Œå†…éƒ¨ç®—æ³•ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ã€å¤šè¡¨è¿æ¥çš„é¡ºåºç­‰ï¼Œç”Ÿæˆä¸€ä¸ªå®ƒè®¤ä¸ºæœ€é«˜æ•ˆçš„&lt;strong&gt;æ‰§è¡Œè®¡åˆ’&lt;/strong&gt;ã€‚æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„â€œé€»è¾‘æ‰§è¡Œé¡ºåºâ€åœ¨ä¼˜åŒ–å™¨è¿™é‡Œå¯èƒ½ä¼šè¢«è°ƒæ•´ä»¥æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œå™¨&lt;/strong&gt;ï¼šè°ƒç”¨å­˜å‚¨å¼•æ“æ¥å£ï¼Œ&lt;strong&gt;æŒ‰ç…§ä¼˜åŒ–å™¨ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’&lt;/strong&gt;é€æ­¥æ‰§è¡ŒæŸ¥è¯¢ã€è·å–æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿”å›ç»“æœ&lt;/strong&gt;ï¼šå°†æœ€ç»ˆç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç†è§£é€»è¾‘æ‰§è¡Œé¡ºåºå’ŒMySQLçš„å®é™…å®Œæ•´æµç¨‹ï¼Œèƒ½è®©ä½ æ›´æ·±å…¥åœ°æ´å¯Ÿæ•°æ®åº“çš„å·¥ä½œæ–¹å¼ã€‚&lt;/p&gt;
&lt;h2 id="ä¸æ’åºçš„è¿ç®—"&gt;ä¸æ’åºçš„è¿ç®—
&lt;/h2&gt;&lt;p&gt;äº†è§£ SQL ä¸­å„ç±»è¿ç®—ï¼ˆå¦‚ &lt;code&gt;GROUP BY&lt;/code&gt;ã€èšåˆå‡½æ•°ã€&lt;code&gt;BETWEEN&lt;/code&gt;ï¼‰æ˜¯å¦ä»¥åŠå¦‚ä½•å½±å“æ’åºï¼Œå¯¹ç¼–å†™æ­£ç¡®å’Œé«˜æ•ˆçš„æŸ¥è¯¢è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ æ¢³ç†è¿™äº›è¿ç®—ä¸æ’åºçš„å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“å°è±¡ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»è¿™äº›è¿ç®—ä¸æ’åºçš„å…³ç³»ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¿ç®—/å­å¥&lt;/th&gt;
&lt;th&gt;æ˜¯å¦é»˜è®¤å¯¼è‡´æ’åº&lt;/th&gt;
&lt;th&gt;æ’åºçš„ä¸»è¦å½±å“å› ç´ åŠè¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;GROUP BY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å› æ•°æ®åº“ç‰ˆæœ¬è€Œå¼‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;MySQL 5.7 åŠä»¥å‰&lt;/strong&gt;: é»˜è®¤å¯¹åˆ†ç»„é”®è¿›è¡Œéšå¼æ’åºã€‚&lt;strong&gt;MySQL 8.0+ åŠå…¶ä»–å¸¸è§æ•°æ®åº“ (å¦‚ PostgreSQL, SQL Server)&lt;/strong&gt;: ä¸å†é»˜è®¤æ’åºï¼Œé™¤éä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èšåˆå‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èšåˆå‡½æ•°æœ¬èº«åªè®¡ç®—æ±‡æ€»å€¼ï¼Œä¸ä¿è¯ç»“æœé¡ºåºã€‚ä½†å…¶æŸäº›&lt;strong&gt;ç‰¹å®šå‡½æ•°&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;array_agg&lt;/code&gt;ï¼‰å¯é€šè¿‡å†…éƒ¨ &lt;code&gt;ORDER BY&lt;/code&gt;æ§åˆ¶è¾“å‡ºå…ƒç´ çš„é¡ºåºã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;BETWEEN&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;BETWEEN&lt;/code&gt;ç”¨äºç­›é€‰èŒƒå›´ï¼Œä¸å½±å“ç»“æœçš„æ˜¾ç¤ºé¡ºåºã€‚ç»“æœçš„é¡ºåºæœ€ç»ˆç”± &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥å†³å®šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯¦è§£ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ” è¯¦è§£ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;h4 id="1-group-by-ä¸æ’åº"&gt;1. GROUP BY ä¸æ’åº
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;GROUP BY&lt;/code&gt;çš„æ’åºè¡Œä¸ºåœ¨ &lt;strong&gt;MySQL ä¸åŒç‰ˆæœ¬ä¸­æœ‰æ˜¾è‘—å·®å¼‚&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MySQL 5.7 åŠæ›´ä½ç‰ˆæœ¬&lt;/strong&gt;ï¼š&lt;code&gt;GROUP BY&lt;/code&gt;é»˜è®¤ä¼šå¯¹åˆ†ç»„å­—æ®µè¿›è¡Œ&lt;strong&gt;éšå¼æ’åº&lt;/strong&gt;ï¼ˆ&lt;code&gt;GROUP BY col&lt;/code&gt;ç­‰æ•ˆäº &lt;code&gt;GROUP BY col ORDER BY col&lt;/code&gt;ï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šæ’åºæ–¹å‘ï¼ˆå¦‚ &lt;code&gt;GROUP BY col DESC&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL 8.0 åŠæ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ï¼šä¸ºäº†ç¬¦åˆ SQL æ ‡å‡†å¹¶æå‡æ€§èƒ½ï¼Œ&lt;strong&gt;ç§»é™¤äº† &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åº&lt;/strong&gt;ã€‚æ‰§è¡Œ &lt;code&gt;GROUP BY&lt;/code&gt;åï¼Œç»“æœé›†çš„é¡ºåºæ˜¯&lt;strong&gt;ä¸ç¡®å®šçš„&lt;/strong&gt;ã€‚ä½ å¿…é¡»ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ¥ç¡®ä¿ç‰¹å®šçš„é¡ºåºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ°¸è¿œä¸è¦ä¾èµ– &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åº&lt;/strong&gt;ã€‚æ— è®ºä½¿ç”¨ä½•ç§æ•°æ®åº“ï¼Œå¦‚æœä½ å…³å¿ƒç»“æœçš„é¡ºåºï¼Œè¯·æ˜¾å¼ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, COUNT(*) AS emp_count
FROM employees
GROUP BY department
ORDER BY emp_count DESC; -- æ˜¾å¼æ’åº
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-èšåˆå‡½æ•°ä¸æ’åº"&gt;2. èšåˆå‡½æ•°ä¸æ’åº
&lt;/h4&gt;&lt;p&gt;å¸¸è§çš„èšåˆå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;SUM()&lt;/code&gt;, &lt;code&gt;COUNT()&lt;/code&gt;, &lt;code&gt;AVG()&lt;/code&gt;, &lt;code&gt;MAX()&lt;/code&gt;, &lt;code&gt;MIN()&lt;/code&gt;ï¼‰æœ¬èº«&lt;strong&gt;ä»…è´Ÿè´£è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªæ±‡æ€»å€¼ï¼Œå¹¶ä¸ä¿è¯ä»»ä½•é¡ºåº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œä¸€äº›&lt;strong&gt;ç‰¹æ®Šçš„èšåˆå‡½æ•°å…è®¸ä½ æ§åˆ¶å…¶å†…éƒ¨èšåˆçš„é¡ºåº&lt;/strong&gt;ï¼Œè¿™ä¼šå½±å“è¿”å›å€¼çš„ç»“æ„ï¼ˆä½†ä¸ä¼šå½±å“ç»“æœé›†è¡Œçš„é¡ºåºï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œåœ¨ PostgreSQL æˆ–ä¸€äº›å…¶ä»–æ•°æ®åº“ä¸­ï¼Œ&lt;code&gt;array_agg()&lt;/code&gt;å‡½æ•°å¯ä»¥é…åˆ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ï¼Œç¡®ä¿èšåˆåˆ°æ•°ç»„ä¸­çš„å…ƒç´ æŒ‰ç‰¹å®šé¡ºåºæ’åˆ—ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT department, array_agg(name ORDER BY salary DESC) AS top_earners
FROM employees
GROUP BY department;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°†è¿”å›æ¯ä¸ªéƒ¨é—¨çš„å‘˜å·¥å§“åæ•°ç»„ï¼Œæ•°ç»„å†…çš„å§“åæŒ‰å·¥èµ„é™åºæ’åˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå‡½æ•°å†…éƒ¨çš„ &lt;code&gt;ORDER BY&lt;/code&gt;åªå½±å“å‡½æ•°è¾“å‡ºçš„å€¼ï¼Œä¸å½±å“æœ€ç»ˆç»“æœé›†ä¸­è¡Œçš„æ’åˆ—é¡ºåºã€‚è¡Œçš„é¡ºåºä»éœ€å¤–éƒ¨çš„ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥æ§åˆ¶ã€‚&lt;/p&gt;
&lt;h4 id="3-between-ä¸æ’åº"&gt;3. BETWEEN ä¸æ’åº
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;BETWEEN&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;æ¡ä»¶è¿ç®—ç¬¦&lt;/strong&gt;ï¼Œç”¨äºåœ¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ä¸­ç­›é€‰å‡ºè½åœ¨æŒ‡å®šèŒƒå›´å†…çš„è¡Œã€‚å®ƒ&lt;strong&gt;åªè´Ÿè´£è¿‡æ»¤æ•°æ®ï¼Œå®Œå…¨ä¸å½±å“ç»“æœçš„æ˜¾ç¤ºé¡ºåº&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç»“æœçš„é¡ºåºå§‹ç»ˆç”± &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥å†³å®šï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM products
WHERE price BETWEEN 10 AND 50 -- ç­›é€‰å‡ºä»·æ ¼åœ¨10åˆ°50ä¹‹é—´çš„äº§å“
ORDER BY price DESC; -- å†³å®šè¿™äº›äº§å“å¦‚ä½•æ’åºæ˜¾ç¤º
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;BETWEEN&lt;/code&gt;çš„è¾¹ç•Œé—®é¢˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;BETWEEN&lt;/code&gt;æ˜¯&lt;strong&gt;åŒ…å«æ€§&lt;/strong&gt;çš„ï¼Œå³åŒ…å«ä¸¤ç«¯çš„å€¼ã€‚å¯¹äºæ—¥æœŸç±»å‹è¦ç‰¹åˆ«å°å¿ƒï¼Œå› ä¸º &lt;code&gt;BETWEEN '2023-01-01' AND '2023-01-31'&lt;/code&gt;åªåŒ…å«åˆ° &amp;lsquo;2023-01-31 00:00:00&amp;rsquo; ä¹‹å‰çš„æ•°æ®ã€‚è‹¥è¦åŒ…å«ä¸€æ•´å¤©ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ &lt;code&gt;BETWEEN '2023-01-01' AND '2023-02-01'&lt;/code&gt;å¹¶é…åˆå…¶ä»–æ¡ä»¶ï¼Œæˆ–ä½¿ç”¨æ›´ç²¾ç¡®çš„æ—¶é—´æˆ³ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ€»ç»“ä¸å»ºè®®"&gt;ğŸ’¡ æ ¸å¿ƒæ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ’åºçš„å”¯ä¸€æƒå¨æ˜¯ &lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼šSQL ä¸­ï¼Œé™¤éä½ æ˜ç¡®ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ï¼Œå¦åˆ™&lt;strong&gt;ç»ä¸èƒ½å‡å®š&lt;/strong&gt;æŸ¥è¯¢ç»“æœçš„é¡ºåºã€‚ä»»ä½•å…¶ä»–å­å¥æˆ–å‡½æ•°çš„é»˜è®¤æ’åºè¡Œä¸ºéƒ½æ˜¯ä¸å¯é ä¸”ä¾èµ–äºå…·ä½“å®ç°çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡çº§ MySQL éœ€æ³¨æ„&lt;/strong&gt;ï¼šå¦‚æœä½ çš„é¡¹ç›®ä» MySQL 5.7 è¿ç§»åˆ° 8.0ï¼Œå¹¶ä¸”ä¹‹å‰ä¾èµ– &lt;code&gt;GROUP BY&lt;/code&gt;çš„éšå¼æ’åºï¼Œé‚£ä¹ˆ&lt;strong&gt;å¿…é¡»ä¿®æ”¹æŸ¥è¯¢ï¼Œæ·»åŠ æ˜¾å¼çš„ &lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼Œå¦åˆ™å¯èƒ½å‡ºç°é¡ºåºé”™ä¹±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šæ’åºï¼ˆå°¤å…¶æ˜¯å¯¹å¤§å‹ç»“æœé›†ï¼‰æ˜¯ä¸€é¡¹æ˜‚è´µçš„æ“ä½œã€‚åº”åœ¨å¿…è¦æ—¶æ‰ä½¿ç”¨ &lt;code&gt;ORDER BY&lt;/code&gt;ï¼Œå¹¶è€ƒè™‘ä¸ºæ’åºå­—æ®µå»ºç«‹ç´¢å¼•ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ SQL ä¸­è¿ç®—ä¸æ’åºçš„å…³ç³»&lt;/p&gt;
&lt;h2 id="é¢„å¤„ç†è¯­å¥"&gt;é¢„å¤„ç†è¯­å¥
&lt;/h2&gt;&lt;p&gt;MySQL çš„é¢„å¤„ç†è¯­å¥ï¼ˆPrepared Statementsï¼‰æ˜¯ä¸€ç§å°† SQL è¯­å¥çš„ç»“æ„ä¸å®é™…å‚æ•°å€¼åˆ†ç¦»çš„æœºåˆ¶ï¼Œå®ƒèƒ½æ˜¾è‘—æå‡æ•°æ®åº“æ“ä½œçš„&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;å’Œ&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ã€‚ä¸‹é¢æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£é‡Šå…¶å·¥ä½œåŸç†ã€ä¼˜åŠ¿ã€ä½¿ç”¨æ–¹æ³•ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-é¢„å¤„ç†è¯­å¥çš„æ ¸å¿ƒä»·å€¼"&gt;ğŸ¯ é¢„å¤„ç†è¯­å¥çš„æ ¸å¿ƒä»·å€¼
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ä¼˜åŠ¿ç»´åº¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€æ¬¡ç¼–è¯‘ï¼Œå¤šæ¬¡æ‰§è¡Œï¼Œå‡å°‘æ•°æ®åº“è§£æå’Œä¼˜åŒ–å¼€é”€ï¼Œå°¤å…¶é€‚åˆé‡å¤æ€§æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§å¢å¼º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤©ç„¶é˜²æ­¢ SQL æ³¨å…¥æ”»å‡»ï¼Œå› ä¸ºå‚æ•°å€¼ä¸ä¼šè¢«è§£æä¸º SQL ä»£ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç æ¸…æ™°åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;SQL é€»è¾‘ä¸æ•°æ®åˆ†ç¦»ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œä¼ è¾“ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼ è¾“å‚æ•°ï¼Œæ¯”ä¼ ç»Ÿå­—ç¬¦ä¸²æ ¼å¼æ›´é«˜æ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-é¢„å¤„ç†è¯­å¥çš„ä½¿ç”¨"&gt;ğŸ”§ é¢„å¤„ç†è¯­å¥çš„ä½¿ç”¨
&lt;/h3&gt;&lt;p&gt;MySQL ä¸»è¦é€šè¿‡ä¸‰ä¸ª SQL è¯­å¥æ¥ç®¡ç†é¢„å¤„ç†è¯­å¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt;ï¼šå‡†å¤‡é¢„å¤„ç†è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;EXECUTE&lt;/code&gt;&lt;/strong&gt;ï¼šæ‰§è¡Œé¢„å¤„ç†è¯­å¥&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;&lt;/strong&gt;ï¼šé‡Šæ”¾é¢„å¤„ç†è¯­å¥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…¶å…¸å‹å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;code&gt;PREPARE&lt;/code&gt;-&amp;gt; (å¤šæ¬¡) &lt;code&gt;EXECUTE&lt;/code&gt;-&amp;gt; &lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id="1-åŸºæœ¬è¯­æ³•ç¤ºä¾‹"&gt;1. åŸºæœ¬è¯­æ³•ç¤ºä¾‹
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- 1. å‡†å¤‡ä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼Œç”¨ ? ä½œä¸ºå‚æ•°å ä½ç¬¦
PREPARE stmt_name FROM &amp;#39;SELECT * FROM users WHERE id = ? AND name = ?&amp;#39;;
-- 2. å£°æ˜ç”¨æˆ·å˜é‡å¹¶èµ‹å€¼
SET @id_val = 1;
SET @name_val = &amp;#39;Alice&amp;#39;;
-- 3. æ‰§è¡Œé¢„å¤„ç†è¯­å¥ï¼Œå¹¶ä½¿ç”¨ USING å­å¥ä¼ é€’å‚æ•°
EXECUTE stmt_name USING @id_val, @name_val;
-- 4. é‡Šæ”¾é¢„å¤„ç†è¯­å¥ï¼ˆè‰¯å¥½ä¹ æƒ¯ï¼‰
DEALLOCATE PREPARE stmt_name;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä»¥-java-ä¸ºä¾‹"&gt;2. åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼ˆä»¥ Java ä¸ºä¾‹ï¼‰
&lt;/h4&gt;&lt;p&gt;åœ¨ Java ç­‰ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé€šå¸¸é€šè¿‡æ•°æ®åº“è¿æ¥åº“ï¼ˆå¦‚ JDBCï¼‰æ¥ä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼Œå…¶åº•å±‚æœºåˆ¶ä¸ç›´æ¥ä½¿ç”¨ SQL è¯­å¥ç›¸ä¼¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¤ºä¾‹ï¼šJava ä¸­ä½¿ç”¨ JDBC çš„ PreparedStatement
String sql = &amp;#34;INSERT INTO products (name, price) VALUES (?, ?)&amp;#34;; // ? æ˜¯å ä½ç¬¦
PreparedStatement pstmt = connection.prepareStatement(sql);
// è®¾ç½®å‚æ•°ï¼ˆç±»å‹å®‰å…¨ï¼‰
pstmt.setString(1, &amp;#34;Laptop&amp;#34;); // ç¬¬ä¸€ä¸ª ? æ›¿æ¢ä¸º &amp;#34;Laptop&amp;#34;
pstmt.setBigDecimal(2, new BigDecimal(&amp;#34;999.99&amp;#34;)); // ç¬¬äºŒä¸ª ? æ›¿æ¢ä¸º 999.99
// æ‰§è¡Œè¯­å¥
pstmt.executeUpdate();
// å…³é—­è¯­å¥ï¼ˆé‡Šæ”¾èµ„æºï¼‰
pstmt.close();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼šä»£ç ä¸­çš„ &lt;code&gt;setString&lt;/code&gt;å’Œ &lt;code&gt;setBigDecimal&lt;/code&gt;ç­‰æ–¹æ³•ç”¨äºä¸ºé¢„ç¼–è¯‘çš„ SQL è¯­å¥ä¸­çš„å ä½ç¬¦ï¼ˆ&lt;code&gt;?&lt;/code&gt;ï¼‰ç»‘å®šå…·ä½“å‚æ•°å€¼ï¼Œå¹¶ç¡®ä¿ç±»å‹å®‰å…¨ã€‚&lt;/p&gt;
&lt;h3 id="-é¢„å¤„ç†è¯­å¥çš„å·¥ä½œè¿‡ç¨‹"&gt;ğŸ“Š é¢„å¤„ç†è¯­å¥çš„å·¥ä½œè¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£é¢„å¤„ç†è¯­å¥çš„å„ä¸ªé˜¶æ®µï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹åºåˆ—å›¾ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sequenceDiagram
participant Client
participant MySQL Server
Client-&amp;gt;&amp;gt;MySQL Server: PREPARE stmt FROM&amp;lt;br&amp;gt;&amp;#39;INSERT INTO t (col) VALUES (?)&amp;#39;
Note right of MySQL Server: è§£æã€æ£€æŸ¥ã€ä¼˜åŒ–SQL&amp;lt;br&amp;gt;ç”Ÿæˆæ‰§è¡Œè®¡åˆ’å¹¶ç¼“å­˜
MySQL Server--&amp;gt;&amp;gt;Client: OK (Statement Prepared)
Client-&amp;gt;&amp;gt;MySQL Server: SET @value = &amp;#39;data&amp;#39;
Client-&amp;gt;&amp;gt;MySQL Server: EXECUTE stmt USING @value
Note right of MySQL Server: ä½¿ç”¨ç¼“å­˜çš„æ‰§è¡Œè®¡åˆ’&amp;lt;br&amp;gt;å¹¶ç»‘å®šå‚æ•°å€¼&amp;#39;data&amp;#39;
MySQL Server--&amp;gt;&amp;gt;Client: OK (Row Inserted)
Client-&amp;gt;&amp;gt;MySQL Server: SET @value = &amp;#39;more_data&amp;#39;
Client-&amp;gt;&amp;gt;MySQL Server: EXECUTE stmt USING @value
Note right of MySQL Server: å¤ç”¨ç¼“å­˜çš„æ‰§è¡Œè®¡åˆ’&amp;lt;br&amp;gt;å¹¶ç»‘å®šå‚æ•°å€¼&amp;#39;more_data&amp;#39;
MySQL Server--&amp;gt;&amp;gt;Client: OK (Row Inserted)
Client-&amp;gt;&amp;gt;MySQL Server: DEALLOCATE PREPARE stmt
Note right of MySQL Server: é‡Šæ”¾ç¼“å­˜çš„æ‰§è¡Œè®¡åˆ’ç­‰èµ„æº
MySQL Server--&amp;gt;&amp;gt;Client: OK (Statement Deallocated)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œé¢„å¤„ç†è¯­å¥é¦–å…ˆåœ¨æœåŠ¡å™¨ç«¯&lt;strong&gt;é¢„ç¼–è¯‘&lt;/strong&gt;ï¼ˆParsing &amp;amp; Optimizationï¼‰ï¼Œç”Ÿæˆå¹¶ç¼“å­˜æ‰§è¡Œè®¡åˆ’ã€‚åç»­æ¯æ¬¡æ‰§è¡Œï¼ˆEXECUTEï¼‰åªéœ€ç»‘å®šæ–°çš„å‚æ•°å€¼å³å¯&lt;strong&gt;å¤ç”¨&lt;/strong&gt;æ­¤è®¡åˆ’ï¼Œé¿å…äº†é‡å¤è§£æå’Œä¼˜åŒ–çš„å¼€é”€ã€‚æœ€åï¼Œé€šè¿‡ &lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;&lt;strong&gt;é‡Šæ”¾&lt;/strong&gt;èµ„æºã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-2"&gt;ğŸŒŸ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰¹é‡æ•°æ®æ“ä½œ&lt;/strong&gt;ï¼šéœ€è¦å¤§é‡æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤è®°å½•æ—¶ï¼Œä½¿ç”¨é¢„å¤„ç†è¯­å¥æ€§èƒ½æå‡æ˜¾è‘—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PREPARE insert_product FROM &amp;#39;INSERT INTO products (name, price) VALUES (?, ?)&amp;#39;;
-- ç„¶ååœ¨å¾ªç¯ä¸­å¤šæ¬¡ EXECUTEï¼Œæ¯æ¬¡ç»‘å®šä¸åŒçš„å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å¤æŸ¥è¯¢&lt;/strong&gt;ï¼šé¢‘ç¹æ‰§è¡Œç›¸åŒç»“æ„ï¼Œä»…å‚æ•°ä¸åŒçš„æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;PREPARE get_user FROM &amp;#39;SELECT * FROM users WHERE email = ?&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ¨æ€æŸ¥è¯¢æ„å»º&lt;/strong&gt;ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ŒåŒæ—¶ä¿éšœå®‰å…¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ŒåŒæ—¶ä¿éšœå®‰å…¨
SET @sql = CONCAT(&amp;#39;SELECT * FROM orders WHERE status = ? AND create_date &amp;gt; ?&amp;#39;);
PREPARE dynamic_query FROM @sql;
SET @status = &amp;#39;processed&amp;#39;;
SET @date = &amp;#39;2023-01-01&amp;#39;;
EXECUTE dynamic_query USING @status, @date;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜²æ­¢ SQL æ³¨å…¥&lt;/strong&gt;ï¼šä»»ä½•æ¥å—ç”¨æˆ·è¾“å…¥å¹¶ç»„æˆæŸ¥è¯¢çš„åœºæ™¯éƒ½åº”ä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼Œè¿™æ˜¯æœ€é‡è¦çš„å®‰å…¨æªæ–½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§"&gt;âš ï¸ æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¸ä¼šè¯&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥æ˜¯&lt;strong&gt;ä¼šè¯çº§åˆ«&lt;/strong&gt;çš„å¯¹è±¡ã€‚å®ƒåœ¨åˆ›å»ºå®ƒçš„æ•°æ®åº“è¿æ¥ä¸­æœ‰æ•ˆï¼Œè¿æ¥å…³é—­åä¼šè‡ªåŠ¨é”€æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºç®¡ç†&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥ä¼šå ç”¨æœåŠ¡å™¨èµ„æºï¼ˆå†…å­˜ï¼‰ã€‚åº”ä½¿ç”¨ &lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;åŠæ—¶é‡Šæ”¾ä¸å†ä½¿ç”¨çš„è¯­å¥ï¼Œæˆ–åœ¨ä¼šè¯ç»“æŸæ—¶ç¡®ä¿è¿æ¥å…³é—­ã€‚ å¯é€šè¿‡ç³»ç»Ÿå˜é‡ &lt;code&gt;max_prepared_stmt_count&lt;/code&gt;é™åˆ¶å…¨å±€æ€»æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;SQL è¯­å¥ä¸­çš„&lt;strong&gt;è¡¨åã€åˆ—åç­‰æ ‡è¯†ç¬¦&lt;/strong&gt;ä¸èƒ½ä½¿ç”¨å‚æ•°å ä½ç¬¦ (&lt;code&gt;?&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº&lt;strong&gt;æå…¶å¤æ‚&lt;/strong&gt;æˆ–&lt;strong&gt;åŠ¨æ€æ€§éå¸¸å¼º&lt;/strong&gt;ï¼ˆæ¯æ¬¡ç»“æ„éƒ½å®Œå…¨ä¸åŒï¼‰çš„ SQLï¼Œé¢„å¤„ç†è¯­å¥çš„ä¼˜åŠ¿å¯èƒ½ä¸æ˜æ˜¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹ä¸€è‡´æ€§&lt;/strong&gt;ï¼šå¤šæ¬¡æ‰§è¡ŒåŒä¸€é¢„å¤„ç†è¯­å¥æ—¶ï¼Œä¼ é€’çš„å‚æ•°åº”å°½é‡ä¿æŒ&lt;strong&gt;æ•°æ®ç±»å‹ä¸€è‡´&lt;/strong&gt;ï¼Œé¿å…å› ç±»å‹è½¬æ¢å¯¼è‡´ä¸å¿…è¦çš„é‡æ–°ç¼–è¯‘ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„é¢„å¤„ç†è¯­å¥æ˜¯ä¸€ç§&lt;strong&gt;æå‡æ€§èƒ½&lt;/strong&gt;ï¼ˆå‡å°‘è§£æç¼–è¯‘å¼€é”€ã€ä¼˜åŒ–ç½‘ç»œä¼ è¾“ï¼‰å’Œ&lt;strong&gt;ä¿éšœå®‰å…¨&lt;/strong&gt;ï¼ˆæœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥ï¼‰çš„å¼ºå¤§å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¼ºçƒˆå»ºè®®&lt;/strong&gt;ä½ åœ¨å¼€å‘ä¸­å…»æˆä¹ æƒ¯ï¼šåªè¦ SQL è¯­å¥ä¸­åŒ…å«äº†æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–å¤–éƒ¨æ•°æ®çš„&lt;strong&gt;å˜é‡å€¼&lt;/strong&gt;ï¼Œå°±ä¼˜å…ˆä½¿ç”¨é¢„å¤„ç†è¯­å¥ï¼ˆå¦‚ JDBC ä¸­çš„ &lt;code&gt;PreparedStatement&lt;/code&gt;ï¼‰æ¥ç¼–å†™æ•°æ®åº“æ“ä½œä»£ç ï¼Œè¿™é€šå¸¸æ˜¯æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ MySQL é¢„å¤„ç†è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="using"&gt;using
&lt;/h2&gt;&lt;p&gt;USING è¯­å¥æ˜¯ SQL ä¸­ç”¨äºç®€åŒ– JOIN æ“ä½œçš„ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒä¸»è¦åœ¨&lt;strong&gt;å¤šè¡¨è¿æ¥æ—¶ï¼Œå½“ä¸¤ä¸ªè¡¨å…·æœ‰ç›¸åŒåç§°çš„åˆ—&lt;/strong&gt;çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£ USING ä¸ä¼ ç»Ÿ ON çš„åŒºåˆ«ï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»å®ƒä»¬çš„æ ¸å¿ƒç‰¹æ€§ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;USING è¯­å¥&lt;/th&gt;
&lt;th&gt;ä¼ ç»Ÿ ON å­å¥&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•ç®€æ´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ›´ç®€æ´ï¼Œç›´æ¥æŒ‡å®šå…±æœ‰çš„åˆ—åå³å¯ &lt;code&gt;USING(column_name)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âŒ éœ€æ˜¾å¼å†™æ˜ä¸¤ä¸ªè¡¨çš„åˆ—å…³ç³» &lt;code&gt;ON table1.column_name = table2.column_name&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†å»é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;è‡ªåŠ¨å»é™¤é‡å¤çš„è¿æ¥åˆ—&lt;/strong&gt;ï¼Œç»“æœé›†ä¸­åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;âŒ è¿æ¥åˆ—ä¼šåœ¨ç»“æœé›†ä¸­&lt;strong&gt;å‡ºç°ä¸¤æ¬¡&lt;/strong&gt;ï¼ˆåˆ†åˆ«æ¥è‡ªä¸¤ä¸ªè¡¨ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—åå‰ç¼€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ åœ¨ SELECTã€GROUP BYã€ORDER BY ä¸­å¼•ç”¨è¿æ¥åˆ—æ—¶ï¼Œ&lt;strong&gt;ä¸èƒ½&lt;/strong&gt;ä½¿ç”¨è¡¨åå‰ç¼€ï¼Œç›´æ¥ä½¿ç”¨åˆ—åå³å¯&lt;/td&gt;
&lt;td&gt;âœ… åœ¨ SELECTã€GROUP BYã€ORDER BY ä¸­å¼•ç”¨åˆ—æ—¶ï¼Œ&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½¿ç”¨è¡¨åå‰ç¼€æ¥é¿å…æ­§ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;ä¸“ç”¨äºä¸¤ä¸ªè¡¨å…·æœ‰ç›¸åŒåç§°çš„è¿æ¥åˆ—&lt;/strong&gt;æ—¶&lt;/td&gt;
&lt;td&gt;âœ… å¯ç”¨äº&lt;strong&gt;ä»»ä½•ç­‰å€¼è¿æ¥&lt;/strong&gt;ï¼ŒåŒ…æ‹¬è¿æ¥åˆ—åä¸åŒä½†é€»è¾‘ç›¸åŒçš„æƒ…å†µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šåˆ—è¿æ¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒï¼Œè¯­æ³•ä¸º &lt;code&gt;USING (col1, col2)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒï¼Œè¯­æ³•ä¸º &lt;code&gt;ON table1.col1 = table2.col1 AND table1.col2 = table2.col2&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-using-çš„å·¥ä½œåŸç†ä¸è¯­æ³•"&gt;ğŸ” USING çš„å·¥ä½œåŸç†ä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;å­å¥ç”¨äºåœ¨ JOIN æ“ä½œä¸­æŒ‡å®šä¸¤ä¸ªè¡¨ä¸­&lt;strong&gt;åŒåçš„è¿æ¥åˆ—&lt;/strong&gt;ã€‚å…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT ...
FROM table1
[JOIN_TYPE] JOIN table2 USING (common_column_name);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ï¼Œ&lt;code&gt;JOIN_TYPE&lt;/code&gt;å¯ä»¥æ˜¯ &lt;code&gt;INNER JOIN&lt;/code&gt;ã€&lt;code&gt;LEFT JOIN&lt;/code&gt;ã€&lt;code&gt;RIGHT JOIN&lt;/code&gt;ç­‰ã€‚&lt;/p&gt;
&lt;h4 id="è‡ªåŠ¨å»é‡é‡å¤åˆ—"&gt;è‡ªåŠ¨å»é‡é‡å¤åˆ—
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ &lt;code&gt;USING&lt;/code&gt;ä¸€ä¸ªéå¸¸å®ç”¨çš„ç‰¹æ€§ã€‚å½“ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;è¿›è¡Œè¿æ¥æ—¶ï¼Œåœ¨æœ€ç»ˆçš„ç»“æœé›†ä¸­ï¼Œ&lt;strong&gt;è¿æ¥åˆ—åªä¼šå‡ºç°ä¸€æ¬¡&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯åƒ &lt;code&gt;ON&lt;/code&gt;å­å¥é‚£æ ·åˆ†åˆ«æ˜¾ç¤ºä¸¤ä¸ªè¡¨çš„åˆ—ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM Orders
JOIN OrderItems USING (order_id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;order_id&lt;/th&gt;
&lt;th&gt;cust_id&lt;/th&gt;
&lt;th&gt;item_id&lt;/th&gt;
&lt;th&gt;product&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1001&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2001&lt;/td&gt;
&lt;td&gt;iPhone&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;ON&lt;/code&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM Orders
JOIN OrderItems ON Orders.order_id = OrderItems.order_id;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Orders.order_id&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;OrderItems.order_id&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;cust_id&lt;/th&gt;
&lt;th&gt;item_id&lt;/th&gt;
&lt;th&gt;product&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1001&lt;/td&gt;
&lt;td&gt;1001&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2001&lt;/td&gt;
&lt;td&gt;iPhone&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸-group-byorder-by-ç»“åˆä½¿ç”¨"&gt;ä¸ GROUP BYã€ORDER BY ç»“åˆä½¿ç”¨
&lt;/h4&gt;&lt;p&gt;å½“åœ¨ &lt;code&gt;GROUP BY&lt;/code&gt;æˆ– &lt;code&gt;ORDER BY&lt;/code&gt;å­å¥ä¸­å¼•ç”¨ &lt;code&gt;USING&lt;/code&gt;æŒ‡å®šçš„è¿æ¥åˆ—æ—¶ï¼Œ&lt;strong&gt;ç›´æ¥ä½¿ç”¨åˆ—åå³å¯&lt;/strong&gt;ï¼Œæ— éœ€è¡¨åå‰ç¼€ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT order_id, COUNT(*) -- ç›´æ¥ä½¿ç”¨order_idï¼Œæ— éœ€è¡¨åå‰ç¼€
FROM Orders
JOIN OrderItems USING (order_id)
GROUP BY order_id; -- ç›´æ¥ä½¿ç”¨order_idï¼Œæ— éœ€è¡¨åå‰ç¼€
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="å¤šåˆ—-using"&gt;å¤šåˆ— USING
&lt;/h4&gt;&lt;p&gt;å¦‚æœä¸¤ä¸ªè¡¨éœ€è¦é€šè¿‡å¤šä¸ªåŒåå­—æ®µè¿›è¡Œè¿æ¥ï¼Œ&lt;code&gt;USING&lt;/code&gt;æ”¯æŒæŒ‡å®šå¤šä¸ªåˆ—ï¼Œç”¨é€—åˆ†éš”ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM Employees
JOIN Departments USING (dept_id, location); -- å‡è®¾ä¸¤è¡¨éƒ½æœ‰ dept_id å’Œ location åˆ—
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-using-çš„åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹"&gt;ğŸ› ï¸ USING çš„åº”ç”¨åœºæ™¯ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;éå¸¸é€‚åˆåœ¨&lt;strong&gt;ä¸¤ä¸ªè¡¨å…·æœ‰ç›¸åŒåç§°çš„è¿æ¥åˆ—&lt;/strong&gt;æ—¶ç®€åŒ–æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;h4 id="1-ç®€å•çš„ç­‰å€¼è¿æ¥"&gt;1. ç®€å•çš„ç­‰å€¼è¿æ¥
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œä¾‹å¦‚å…³è”æŸ¥è¯¢å‘˜å·¥å’Œéƒ¨é—¨ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å‡è®¾ employees å’Œ departments è¡¨éƒ½æœ‰ department_id åˆ—
SELECT e.employee_id, e.name, d.department_name
FROM employees e
JOIN departments d USING (department_id);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-ä¸-update-è¯­å¥ç»“åˆ"&gt;2. ä¸ UPDATE è¯­å¥ç»“åˆ
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;ä¹Ÿå¯ç”¨äº &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ä¸­ï¼Œç®€åŒ–åŸºäºè¿æ¥çš„æ¡ä»¶æ›´æ–°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä½¿ç”¨ USING åœ¨ UPDATE è¯­å¥ä¸­ç®€åŒ– JOIN
UPDATE Employees e
JOIN Departments d USING (department_id)
SET e.salary = e.salary * 1.1
WHERE d.department_name = &amp;#39;Sales&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-ç»“åˆ-where-å­å¥æ·»åŠ è¿‡æ»¤æ¡ä»¶"&gt;3. ç»“åˆ WHERE å­å¥æ·»åŠ è¿‡æ»¤æ¡ä»¶
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;å¯ä»¥ä¸å…¶ä»–å­å¥ï¼ˆå¦‚ &lt;code&gt;WHERE&lt;/code&gt;ï¼‰æ— ç¼åä½œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT e.name, d.department_name
FROM employees e
JOIN departments d USING (department_id)
WHERE d.department_name = &amp;#39;Engineering&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-using-çš„æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§"&gt;âš ï¸ USING çš„æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§
&lt;/h3&gt;&lt;p&gt;å°½ç®¡ &lt;code&gt;USING&lt;/code&gt;å¾ˆæ–¹ä¾¿ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä¹Ÿéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒååˆ—è¦æ±‚&lt;/strong&gt;ï¼š&lt;code&gt;USING&lt;/code&gt;æŒ‡å®šçš„åˆ—å¿…é¡»åœ¨&lt;strong&gt;ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸”åç§°å®Œå…¨ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹å…¼å®¹&lt;/strong&gt;ï¼šè¿æ¥åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹ã€‚å¦‚æœä¸€ä¸ªæ˜¯ &lt;code&gt;INT&lt;/code&gt;ï¼Œå¦ä¸€ä¸ªæ˜¯ &lt;code&gt;VARCHAR&lt;/code&gt;ï¼Œå¯èƒ½ä¼šå¯¼è‡´é”™è¯¯æˆ–æ„å¤–çš„éšå¼è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ”¯æŒä¸åŒååˆ—&lt;/strong&gt;ï¼šå¦‚æœè¿æ¥åˆ—åç§°ä¸åŒï¼Œå³ä½¿é€»è¾‘ç›¸åŒï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;ï¼Œå¿…é¡»ä½¿ç”¨ &lt;code&gt;ON&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼•ç”¨è¿æ¥åˆ—&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;SELECT&lt;/code&gt;åˆ—è¡¨ä¸­å¼•ç”¨ &lt;code&gt;USING&lt;/code&gt;çš„è¿æ¥åˆ—æ—¶ï¼Œ&lt;strong&gt;ä¸èƒ½ä½¿ç”¨è¡¨åˆ«åæˆ–è¡¨åä½œä¸ºå‰ç¼€&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨-using"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ USINGï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åœ¨ç¬¦åˆä½¿ç”¨æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œ&lt;code&gt;USING&lt;/code&gt;è¯­å¥æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–æŸ¥è¯¢è¯­å¥&lt;/strong&gt;ï¼šä½¿ SQL æ›´åŠ ç®€æ´ï¼Œå‡å°‘å†—ä½™ï¼Œæé«˜&lt;strong&gt;å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…ç»“æœé›†æ­§ä¹‰&lt;/strong&gt;ï¼šè‡ªåŠ¨å»é™¤é‡å¤çš„è¿æ¥åˆ—ï¼Œè®©ç»“æœé›†æ›´åŠ æ¸…æ™°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æé«˜æ€§èƒ½çš„å¯èƒ½æ€§&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“å®ç°ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;å¯èƒ½è®©ä¼˜åŒ–å™¨æ›´å®¹æ˜“è¯†åˆ«è¿æ¥æ¡ä»¶ï¼Œä½†æ€§èƒ½æå‡å¹¶éç»å¯¹ï¼Œæœ€ç»ˆä»å–å†³äºç´¢å¼•ã€è¡¨å¤§å°ç­‰å› ç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;æ˜¯ SQL ä¸­ä¸€ä¸ªç”¨äºç®€åŒ–è¿æ¥æŸ¥è¯¢çš„å®ç”¨å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºä¸¤ä¸ªè¡¨å…·æœ‰åŒåå­—æ®µçš„ç­‰å€¼è¿æ¥ã€‚å®ƒçš„&lt;strong&gt;è‡ªåŠ¨å»é‡&lt;/strong&gt;å’Œ&lt;strong&gt;ç®€æ´è¯­æ³•&lt;/strong&gt;æ˜¯æœ€å¤§äº®ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;&lt;/strong&gt;ï¼šå½“ä¸¤ä¸ªè¡¨çš„è¿æ¥åˆ—&lt;strong&gt;åç§°å®Œå…¨ç›¸åŒ&lt;/strong&gt;ï¼Œä¸”ä½ å¸Œæœ›æŸ¥è¯¢ç®€æ´ã€ç»“æœé›†é¿å…é‡å¤åˆ—æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ &lt;code&gt;ON&lt;/code&gt;&lt;/strong&gt;ï¼šå½“è¿æ¥åˆ—åç§°ä¸åŒï¼Œæˆ–è¿æ¥æ¡ä»¶ä¸æ˜¯ç®€å•çš„ç­‰å€¼åŒ¹é…ï¼ˆå¦‚ &lt;code&gt;ON table1.col1 &amp;gt; table2.col2&lt;/code&gt;ï¼‰æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æŒæ¡ &lt;code&gt;USING&lt;/code&gt;ï¼Œèƒ½è®©ä½ çš„ SQL ä»£ç æ›´åŠ ä¼˜é›…å’Œä¸“ä¸šã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;è¯­å¥ã€‚&lt;/p&gt;
&lt;h2 id="using-é¢„å¤„ç†"&gt;USING é¢„å¤„ç†
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;åœ¨ SQL é¢„å¤„ç†è¯­å¥ä¸­ï¼Œä¸»è¦ä¸ &lt;code&gt;EXECUTE&lt;/code&gt;è¯­å¥æ­é…ï¼Œ&lt;strong&gt;ç”¨äºåœ¨æ‰§è¡Œæ—¶ç»‘å®šå…·ä½“å‚æ•°å€¼åˆ°é¢„å¤„ç†è¯­å¥çš„å ä½ç¬¦ä¸Š&lt;/strong&gt;ã€‚å®ƒå……å½“äº†â€œå‚æ•°ä¼ é€’æ¡¥æ¢â€çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ¸…æ™°åœ°äº†è§£ &lt;code&gt;USING&lt;/code&gt;åœ¨é¢„å¤„ç†è¯­å¥ä¸­çš„ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æµç¨‹å›¾æ¥è§‚å¯Ÿå…¶åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­çš„ä½ç½®å’ŒåŠŸèƒ½ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[PREPARE stmt_name FROM&amp;lt;br&amp;gt;å¸¦å ä½ç¬¦?çš„SQL] --&amp;gt; B[SET @variable = value];
B --&amp;gt; C[EXECUTE stmt_name&amp;lt;br&amp;gt;USING @variable];
C --&amp;gt; D[DEALLOCATE PREPARE stmt_name];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚å›¾æ‰€ç¤ºï¼Œ&lt;code&gt;USING&lt;/code&gt;å­å¥ç´§éš &lt;code&gt;EXECUTE&lt;/code&gt;è¯­å¥ï¼Œè´Ÿè´£å°†ä¹‹å‰å®šä¹‰çš„ç”¨æˆ·å˜é‡ï¼ˆå¦‚ &lt;code&gt;@variable&lt;/code&gt;ï¼‰çš„å€¼ï¼Œä¼ é€’ç»™å·²é¢„ç¼–è¯‘çš„è¯­å¥ &lt;code&gt;stmt_name&lt;/code&gt;ä¸­çš„å ä½ç¬¦ &lt;code&gt;?&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-åŸºæœ¬å·¥ä½œæµç¨‹"&gt;ğŸ”„ åŸºæœ¬å·¥ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;é¢„å¤„ç†è¯­å¥çš„å…¸å‹ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡ (&lt;code&gt;PREPARE&lt;/code&gt;)&lt;/strong&gt;ï¼šåˆ›å»ºä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼Œä½¿ç”¨ &lt;code&gt;?&lt;/code&gt;ä½œä¸ºå‚æ•°å ä½ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®å˜é‡ (&lt;code&gt;SET&lt;/code&gt;)&lt;/strong&gt;ï¼šä¸ºç”¨æˆ·å˜é‡èµ‹å€¼ï¼Œè¿™äº›å€¼å°†ä¼ é€’ç»™å ä½ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œ (&lt;code&gt;EXECUTE ... USING&lt;/code&gt;)&lt;/strong&gt;ï¼šæ‰§è¡Œé¢„å¤„ç†è¯­å¥ï¼Œå¹¶é€šè¿‡ &lt;code&gt;USING&lt;/code&gt;å­å¥ä¼ é€’å·²èµ‹å€¼çš„å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡Šæ”¾ (&lt;code&gt;DEALLOCATE PREPARE&lt;/code&gt;)&lt;/strong&gt;ï¼ˆå¯é€‰ï¼‰ï¼šæ˜¾å¼é‡Šæ”¾é¢„å¤„ç†è¯­å¥èµ„æºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ç¤ºä¾‹ä½¿ç”¨-usingä¼ é€’å‚æ•°"&gt;ğŸ“ ç¤ºä¾‹ï¼šä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;ä¼ é€’å‚æ•°
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- 1. å‡†å¤‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œ&amp;#39;?&amp;#39; æ˜¯å¾…ä¼ å…¥å‚æ•°çš„å ä½ç¬¦
PREPARE getUser FROM &amp;#39;SELECT * FROM users WHERE department_id = ? AND salary &amp;gt; ?&amp;#39;;
-- 2. å£°æ˜ç”¨æˆ·å˜é‡å¹¶èµ‹å€¼
SET @dept_id = 3;
SET @min_salary = 50000;
-- 3. æ‰§è¡Œé¢„å¤„ç†è¯­å¥ï¼Œå¹¶é€šè¿‡ USING å­å¥ä¼ é€’å˜é‡å€¼
EXECUTE getUser USING @dept_id, @min_salary;
-- 4. å¯ä»¥ä¸ºå˜é‡èµ‹æ–°å€¼ï¼Œå†æ¬¡æ‰§è¡Œç›¸åŒçš„é¢„å¤„ç†è¯­å¥ï¼Œé«˜æ•ˆæŸ¥è¯¢ä¸åŒæ¡ä»¶
SET @dept_id = 5;
SET @min_salary = 60000;
EXECUTE getUser USING @dept_id, @min_salary;
-- 5. (å¯é€‰) æœ€åé‡Šæ”¾é¢„å¤„ç†è¯­å¥
DEALLOCATE PREPARE getUser;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ ¸å¿ƒä»·å€¼"&gt;ğŸ’¡ æ ¸å¿ƒä»·å€¼
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥åªéœ€&lt;strong&gt;ç¼–è¯‘ä¸€æ¬¡&lt;/strong&gt;ï¼ˆ&lt;code&gt;PREPARE&lt;/code&gt;é˜¶æ®µï¼‰ï¼Œä¹‹åæ¯æ¬¡æ‰§è¡Œï¼ˆ&lt;code&gt;EXECUTE&lt;/code&gt;ï¼‰åªéœ€ä¼ é€’ä¸åŒå‚æ•°å³å¯ï¼Œé¿å…äº†é‡å¤è§£æå’Œä¼˜åŒ– SQL çš„å¼€é”€ã€‚å¯¹äºéœ€é¢‘ç¹æ‰§è¡Œçš„åŒç±»æŸ¥è¯¢ï¼Œæ€§èƒ½æå‡æ˜¾è‘—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ä¸é˜²æ³¨å…¥&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;å­å¥ä¼ é€’å‚æ•°å€¼ï¼Œèƒ½&lt;strong&gt;æœ‰æ•ˆé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»&lt;/strong&gt;ã€‚å› ä¸ºå‚æ•°å€¼å§‹ç»ˆè¢«å½“ä½œæ•°æ®å¤„ç†ï¼Œè€Œä¸ä¼šè¢«è§£æä¸º SQL ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç æ¸…æ™°ä¸å¤ç”¨&lt;/strong&gt;ï¼šå°† SQL é€»è¾‘ä¸å‚æ•°å€¼åˆ†ç¦»ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ï¼Œå¹¶&lt;strong&gt;æå¤§æé«˜äº† SQL è¯­å¥çš„å¤ç”¨æ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-6"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å˜é‡ä¸å ä½ç¬¦çš„é¡ºåºå’Œæ•°é‡å¿…é¡»åŒ¹é…&lt;/strong&gt;ï¼š&lt;code&gt;USING&lt;/code&gt;å­å¥ä¸­å˜é‡çš„&lt;strong&gt;é¡ºåº&lt;/strong&gt;å¿…é¡»ä¸é¢„å¤„ç† SQL ä¸­ &lt;code&gt;?&lt;/code&gt;å ä½ç¬¦å‡ºç°çš„é¡ºåºä¸€è‡´ï¼Œä¸”&lt;strong&gt;æ•°é‡å¿…é¡»ç›¸ç­‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ç”¨æˆ·å˜é‡&lt;/strong&gt;ï¼š&lt;code&gt;USING&lt;/code&gt;å­å¥åé¢åº”è·Ÿ&lt;strong&gt;ç”¨æˆ·å˜é‡&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;@var_name&lt;/code&gt;ï¼‰ï¼Œè€Œä¸èƒ½ç›´æ¥ä½¿ç”¨å­—é¢é‡æˆ–è¡¨è¾¾å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šé¢„å¤„ç†è¯­å¥åŠå…¶å‚æ•°ç»‘å®šé€šå¸¸åœ¨&lt;strong&gt;å½“å‰ä¼šè¯&lt;/strong&gt;æœ‰æ•ˆã€‚ä¼šè¯ç»“æŸæˆ–è¿æ¥æ–­å¼€åï¼Œé¢„å¤„ç†è¯­å¥ä¼šè‡ªåŠ¨é”€æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ &lt;code&gt;USING&lt;/code&gt;åœ¨ SQL é¢„å¤„ç†è¯­å¥ä¸­çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;h2 id="æ·»åŠ å¤–é”®çº¦æŸ"&gt;æ·»åŠ å¤–é”®çº¦æŸ
&lt;/h2&gt;&lt;p&gt;æ•°æ®åº“å¤–é”®çº¦æŸæ˜¯ç»´æŠ¤æ•°æ®å®Œæ•´æ€§å’Œè¡¨é—´å…³ç³»çš„é‡è¦å·¥å…·ã€‚ä¸‹é¢ä¸ºä½ è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨å»ºè¡¨åæ·»åŠ å¤–é”®çº¦æŸã€‚&lt;/p&gt;
&lt;h3 id="-å„æ•°æ®åº“ç³»ç»Ÿæ·»åŠ å¤–é”®çº¦æŸçš„è¯­å¥"&gt;ğŸ“Š å„æ•°æ®åº“ç³»ç»Ÿæ·»åŠ å¤–é”®çº¦æŸçš„è¯­å¥
&lt;/h3&gt;&lt;p&gt;ä¸‹è¡¨æ±‡æ€»äº†åœ¨ä¸åŒæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ &lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥æ·»åŠ å¤–é”®çº¦æŸçš„é€šç”¨è¯­æ³•å’Œæ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ•°æ®åº“ç³»ç»Ÿ&lt;/th&gt;
&lt;th&gt;åŸºæœ¬è¯­æ³•&lt;/th&gt;
&lt;th&gt;å¯é€‰çº¦æŸè¡Œä¸ºï¼ˆON DELETE / ON UPDATEï¼‰&lt;/th&gt;
&lt;th&gt;æ³¨æ„è¦ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MySQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;, &lt;code&gt;RESTRICT&lt;/code&gt;(é»˜è®¤), &lt;code&gt;NO ACTION&lt;/code&gt;, &lt;code&gt;SET DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. å­˜å‚¨å¼•æ“éœ€ä¸º &lt;strong&gt;InnoDB&lt;/strong&gt; 2. å­—æ®µæ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;PostgreSQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;, &lt;code&gt;RESTRICT&lt;/code&gt;, &lt;code&gt;NO ACTION&lt;/code&gt;, &lt;code&gt;SET DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. æ”¯æŒ&lt;strong&gt;å»¶è¿Ÿçº¦æŸ&lt;/strong&gt;æ£€æŸ¥ï¼ˆ&lt;code&gt;DEFERRABLE&lt;/code&gt;ï¼‰ 2. å¼•ç”¨å­—æ®µå¿…é¡»æ˜¯ä¸»é”®æˆ–å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SQL Server&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;, &lt;code&gt;NO ACTION&lt;/code&gt;(é»˜è®¤), &lt;code&gt;SET DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. å¼•ç”¨å­—æ®µå¿…é¡»æ˜¯ä¸»é”®æˆ–å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Oracle&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE å­è¡¨å ADD CONSTRAINT çº¦æŸå FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES çˆ¶è¡¨å(çˆ¶è¡¨ä¸»é”®);&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CASCADE&lt;/code&gt;, &lt;code&gt;SET NULL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;1. å¼•ç”¨å­—æ®µå¿…é¡»æ˜¯ä¸»é”®æˆ–å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•è¯´æ˜"&gt;ğŸ” è¯­æ³•è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å­è¡¨å&lt;/strong&gt;ï¼šéœ€è¦æ·»åŠ å¤–é”®çº¦æŸçš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¦æŸå&lt;/strong&gt;ï¼šä¸ºå¤–é”®çº¦æŸèµ·ä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œä¾¿äºåç»­ç®¡ç†å’Œç»´æŠ¤ï¼ˆå¦‚åˆ é™¤ã€ç¦ç”¨ï¼‰ã€‚&lt;strong&gt;æ¨èå‘½åè§„åˆ™&lt;/strong&gt;ï¼š&lt;code&gt;fk_å­è¡¨å_çˆ¶è¡¨å_å­—æ®µå&lt;/code&gt;ï¼Œä¾‹å¦‚ &lt;code&gt;fk_orders_customers_customerid&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤–é”®å­—æ®µ&lt;/strong&gt;ï¼šå­è¡¨ä¸­ç”¨äºå¼•ç”¨çˆ¶è¡¨çš„å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶è¡¨å&lt;/strong&gt;ï¼šè¢«å¼•ç”¨çš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶è¡¨ä¸»é”®&lt;/strong&gt;ï¼šçˆ¶è¡¨ä¸­è¢«å¼•ç”¨çš„ä¸»é”®å­—æ®µæˆ–å”¯ä¸€çº¦æŸå­—æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-çº¦æŸè¡Œä¸ºå¯é€‰"&gt;âš™ï¸ çº¦æŸè¡Œä¸ºï¼ˆå¯é€‰ï¼‰
&lt;/h3&gt;&lt;p&gt;å®šä¹‰çˆ¶è¡¨è®°å½•è¢«åˆ é™¤æˆ–æ›´æ–°æ—¶ï¼Œå­è¡¨åº”å¦‚ä½•å“åº”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ON DELETE CASCADE&lt;/code&gt;ï¼š&lt;strong&gt;çº§è”åˆ é™¤&lt;/strong&gt;ã€‚å½“çˆ¶è¡¨ä¸­çš„æŸæ¡è®°å½•è¢«åˆ é™¤æ—¶ï¼Œå­è¡¨ä¸­æ‰€æœ‰å¼•ç”¨äº†è¯¥è®°å½•çš„å¤–é”®è®°å½•ä¹Ÿä¼š&lt;strong&gt;è¢«è‡ªåŠ¨åˆ é™¤&lt;/strong&gt;ã€‚é€‚ç”¨äºâ€œæ•´ä½“-éƒ¨åˆ†â€å…³ç³»ï¼ˆå¦‚åˆ é™¤éƒ¨é—¨ï¼Œå…¶ä¸‹å±å‘˜å·¥è‡ªåŠ¨åˆ é™¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON DELETE SET NULL&lt;/code&gt;ï¼š&lt;strong&gt;ç½®ç©º&lt;/strong&gt;ã€‚å½“çˆ¶è¡¨ä¸­çš„æŸæ¡è®°å½•è¢«åˆ é™¤æ—¶ï¼Œå­è¡¨ä¸­æ‰€æœ‰å¼•ç”¨äº†è¯¥è®°å½•çš„å¤–é”®å­—æ®µçš„å€¼ä¼šè¢«&lt;strong&gt;è‡ªåŠ¨è®¾ç½®ä¸º NULL&lt;/strong&gt;ã€‚è¦æ±‚è¯¥å¤–é”®å­—æ®µå…è®¸ä¸ºNULLã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON DELETE RESTRICT&lt;/code&gt;æˆ– &lt;code&gt;ON DELETE NO ACTION&lt;/code&gt;ï¼š&lt;strong&gt;é™åˆ¶åˆ é™¤/æ— æ“ä½œ&lt;/strong&gt;ï¼ˆ&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;ï¼‰ã€‚å¦‚æœå­è¡¨ä¸­è¿˜æœ‰è®°å½•å¼•ç”¨çˆ¶è¡¨ä¸­çš„æŸæ¡è®°å½•ï¼Œåˆ™&lt;strong&gt;ç¦æ­¢åˆ é™¤&lt;/strong&gt;çˆ¶è¡¨çš„è¯¥è®°å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON UPDATE CASCADE&lt;/code&gt;ï¼š&lt;strong&gt;çº§è”æ›´æ–°&lt;/strong&gt;ã€‚å½“çˆ¶è¡¨çš„ä¸»é”®å€¼è¢«æ›´æ–°æ—¶ï¼Œå­è¡¨ä¸­å¯¹åº”å¤–é”®çš„å€¼ä¹Ÿä¼š&lt;strong&gt;è‡ªåŠ¨æ›´æ–°&lt;/strong&gt;ä¸ºæ–°çš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›é€‰é¡¹åŒæ ·é€‚ç”¨äº &lt;code&gt;ON UPDATE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨ç¤ºä¾‹"&gt;ğŸ› ï¸ åº”ç”¨ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä»¥å¸¸è§çš„â€œè®¢å•â€(&lt;code&gt;orders&lt;/code&gt;) è¡¨å¼•ç”¨â€œå®¢æˆ·â€(&lt;code&gt;customers&lt;/code&gt;) è¡¨ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. åŸºæœ¬å¤–é”®çº¦æŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE orders
ADD CONSTRAINT fk_orders_customers_customerid
FOREIGN KEY (customer_id) REFERENCES customers(customer_id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;2. å¸¦çº§è”åˆ é™¤çš„å¤–é”®çº¦æŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE orders
ADD CONSTRAINT fk_orders_customers_customerid
FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
ON DELETE CASCADE;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;3. å¸¦ç½®ç©ºæ“ä½œçš„å¤–é”®çº¦æŸ&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE orders
ADD CONSTRAINT fk_orders_customers_customerid
FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
ON DELETE SET NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-7"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹åŒ¹é…&lt;/strong&gt;ï¼šå¤–é”®å­—æ®µå’Œå®ƒå¼•ç”¨çš„çˆ¶è¡¨ä¸»é”®å­—æ®µçš„&lt;strong&gt;æ•°æ®ç±»å‹å¿…é¡»å®Œå…¨ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é¢„å…ˆå­˜åœ¨&lt;/strong&gt;ï¼šåœ¨æ·»åŠ å¤–é”®çº¦æŸå‰ï¼Œè¯·ç¡®ä¿å­è¡¨ä¸­å¤–é”®å­—æ®µçš„&lt;strong&gt;æ‰€æœ‰ç°æœ‰å€¼&lt;/strong&gt;ï¼Œéƒ½å¿…é¡»åœ¨çˆ¶è¡¨çš„ä¸»é”®å­—æ®µä¸­å­˜åœ¨å¯¹åº”å€¼ã€‚å¦åˆ™ï¼Œæ·»åŠ çº¦æŸçš„æ“ä½œä¼šå¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ€§èƒ½&lt;/strong&gt;ï¼šä¸ºå¤–é”®å­—æ®µ&lt;strong&gt;åˆ›å»ºç´¢å¼•&lt;/strong&gt;é€šå¸¸æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œèƒ½æ˜¾è‘—æé«˜å…³è”æŸ¥è¯¢ï¼ˆJOINï¼‰å’Œçº§è”æ“ä½œçš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…ä½¿ç”¨çº§è”æ“ä½œ&lt;/strong&gt;ï¼š&lt;code&gt;ON DELETE CASCADE&lt;/code&gt;å’Œ &lt;code&gt;ON UPDATE CASCADE&lt;/code&gt;è™½èƒ½è‡ªåŠ¨ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§ï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´&lt;strong&gt;æ„å¤–çš„å¤§è§„æ¨¡æ•°æ®åˆ é™¤æˆ–ä¿®æ”¹&lt;/strong&gt;ã€‚ä½¿ç”¨æ—¶åŠ¡å¿…æ˜ç¡®å…¶å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“æ”¯æŒ&lt;/strong&gt;ï¼šåœ¨ MySQL ä¸­ï¼Œåªæœ‰ &lt;strong&gt;InnoDB&lt;/strong&gt; å­˜å‚¨å¼•æ“æ”¯æŒå¤–é”®çº¦æŸã€‚å…¶ä»–å¦‚ MyISAM å¼•æ“ä¸æ”¯æŒã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–æ“ä½œ"&gt;ğŸ”§ å…¶ä»–æ“ä½œ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤å¤–é”®çº¦æŸ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE å­è¡¨å DROP FOREIGN KEY çº¦æŸå; -- MySQL
ALTER TABLE å­è¡¨å DROP CONSTRAINT çº¦æŸå; -- PostgreSQL/SQL Server/Oracle
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¦ç”¨/å¯ç”¨çº¦æŸ&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“ï¼ˆå¦‚ Oracleï¼‰ä¸­ï¼Œå¯ä»¥ä¸´æ—¶ç¦ç”¨çº¦æŸä»¥è¿›è¡Œå¤§æ•°æ®é‡æ“ä½œï¼Œç„¶åå†å¯ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æœ€ä½³å®è·µ"&gt;ğŸ’¡ æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å§‹ç»ˆä¸ºçº¦æŸå‘½å&lt;/strong&gt;ï¼šä½¿ç”¨æ¸…æ™°çš„å‘½åè§„åˆ™ï¼Œä¸è¦ä¾èµ–ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„åå­—ï¼Œè¿™ä¾¿äºåç»­ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§„åˆ’å¼•ç”¨å®Œæ•´æ€§&lt;/strong&gt;ï¼šåœ¨æ•°æ®åº“è®¾è®¡é˜¶æ®µå°±è§„åˆ’å¥½è¡¨ä¹‹é—´çš„å…³ç³»å’Œçº¦æŸç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ƒè™‘æ€§èƒ½å½±å“&lt;/strong&gt;ï¼šå¤–é”®çº¦æŸä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œåœ¨é«˜å¹¶å‘å†™å…¥åœºæ™¯éœ€æƒè¡¡ä¸€è‡´æ€§ä¸æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ é¡ºåˆ©åœ°åœ¨æ•°æ®åº“ä¸­æ·»åŠ å¤–é”®çº¦æŸã€‚&lt;/p&gt;
&lt;h2 id="datediff"&gt;DateDiff
&lt;/h2&gt;&lt;p&gt;DATEDIF å’Œ DATEDIFF éƒ½æ˜¯ç”¨äºè®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´å·®å€¼çš„å‡½æ•°ï¼Œä½†å®ƒä»¬åœ¨&lt;strong&gt;ä¸åŒçš„å¹³å°ï¼ˆExcel å’Œ SQLï¼‰&lt;/strong&gt; ä¸Šä½¿ç”¨ï¼Œè¯­æ³•å’ŒåŠŸèƒ½ä¸Šä¹Ÿæœ‰æ‰€ä¸åŒã€‚è®©æˆ‘ä¸ºä½ è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ DATEDIF (Excel) å’Œ DATEDIFF (SQL) çš„å¯¹æ¯”è¡¨æ ¼ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;DATEDIF (Excel)&lt;/th&gt;
&lt;th&gt;DATEDIFF (SQL)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦å¹³å°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Excel&lt;/td&gt;
&lt;td&gt;SQL (SQL Server, MySQL ç­‰)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DATEDIF(start_date, end_date, unit)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;SQL Server: &lt;code&gt;DATEDIF(datepart, startdate, enddate)&lt;/code&gt; MySQL: &lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿”å›ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°å€¼ (æ•´æ•°)&lt;/td&gt;
&lt;td&gt;æ•°å€¼ (æ•´æ•°)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸¸ç”¨å•ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&amp;ldquo;Y&amp;rdquo; (å¹´), &amp;ldquo;M&amp;rdquo; (æœˆ), &amp;ldquo;D&amp;rdquo; (æ—¥), &amp;ldquo;YD&amp;rdquo;, &amp;ldquo;YM&amp;rdquo;, &amp;ldquo;MD&amp;rdquo;&lt;/td&gt;
&lt;td&gt;SQL Server: year, quarter, month, day, week, hour ç­‰ MySQL: å¤©æ•° (ä¸æ”¯æŒå¤šå•ä½ç›´æ¥è®¡ç®—)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿½ç•¥æ—¶é—´éƒ¨åˆ†ï¼Œåªå¤„ç†æ—¥æœŸ&lt;/td&gt;
&lt;td&gt;é€šå¸¸å¿½ç•¥æ—¶é—´éƒ¨åˆ†ï¼Œåªè®¡ç®—æ—¥æœŸå·®å¼‚ (å…·ä½“å–å†³äºæ•°æ®åº“å®ç°)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;éšè—å‡½æ•°&lt;/strong&gt;ï¼Œè™½æœªåœ¨æ’å…¥å‡½æ•°åˆ—è¡¨ä¸­ç›´æ¥åˆ—å‡ºï¼Œä½†å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;SQL ä¸­çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;&lt;strong&gt;å…·ä½“è¯­æ³•å’Œæ”¯æŒçš„æ—¥æœŸéƒ¨åˆ†å› æ•°æ®åº“ç³»ç»Ÿè€Œå¼‚&lt;/strong&gt;ï¼ˆä¾‹å¦‚ SQL Server å’Œ MySQL å°±ä¸å¤ªä¸€æ ·ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-datedif-åœ¨-excel-ä¸­çš„å•ä½-unit"&gt;ğŸ“Š DATEDIF åœ¨ Excel ä¸­çš„å•ä½ (unit)
&lt;/h3&gt;&lt;p&gt;Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;å‡½æ•°é€šè¿‡ &lt;code&gt;unit&lt;/code&gt;å‚æ•°æŒ‡å®šè®¡ç®—å•ä½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;unit&lt;/th&gt;
&lt;th&gt;å«ä¹‰ä¸è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹ (å‡è®¾ start_date=&amp;ldquo;2020-1-1&amp;rdquo;, end_date=&amp;ldquo;2021-3-4&amp;rdquo;)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;Y&amp;rdquo;&lt;/td&gt;
&lt;td&gt;æ—¶é—´æ®µä¸­çš„&lt;strong&gt;æ•´å¹´æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 1 (2020-1-1 åˆ° 2021-3-4 ä¹‹é—´å®Œæ•´çš„1å¹´)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;M&amp;rdquo;&lt;/td&gt;
&lt;td&gt;æ—¶é—´æ®µä¸­çš„&lt;strong&gt;æ•´æœˆæ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 14 (1å¹´é›¶2ä¸ªæœˆï¼Œå…±14ä¸ªæœˆ)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;D&amp;rdquo;&lt;/td&gt;
&lt;td&gt;æ—¶é—´æ®µä¸­çš„&lt;strong&gt;æ€»å¤©æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 428&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;YD&amp;rdquo;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æ—¥æœŸä¸ç»“æŸæ—¥æœŸçš„&lt;strong&gt;åŒå¹´é—´éš”å¤©æ•°&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¿½ç•¥å¹´ä»½&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 63 (å³ 2021-1-1 åˆ° 2021-3-4 ä¹‹é—´çš„å¤©æ•°)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;YM&amp;rdquo;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æ—¥æœŸä¸ç»“æŸæ—¥æœŸçš„&lt;strong&gt;åŒå¹´é—´éš”æœˆæ•°&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¿½ç•¥å¹´ä»½å’Œå¤©æ•°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;ç»“æœ: 2 (1æœˆåˆ°3æœˆï¼Œç›¸å·®2ä¸ªæœˆ)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;ldquo;MD&amp;rdquo;&lt;/td&gt;
&lt;td&gt;èµ·å§‹æ—¥æœŸä¸ç»“æŸæ—¥æœŸçš„&lt;strong&gt;åŒæœˆé—´éš”å¤©æ•°&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¿½ç•¥å¹´ä»½å’Œæœˆä»½&lt;/strong&gt;ã€‚ &lt;strong&gt;è®¡ç®—ç»“æœå¯èƒ½å› æœˆä»½å’Œé—°å¹´è€Œæœ‰æ„å¤–æƒ…å†µï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç»“æœ: 3 (1å·åˆ°4å·ï¼Œç›¸å·®3å¤©)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-datedif-åœ¨-excel-ä¸­çš„ç”¨æ³•ç¤ºä¾‹"&gt;âŒ¨ï¸ DATEDIF åœ¨ Excel ä¸­çš„ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾ A1 å•å…ƒæ ¼æ˜¯èµ·å§‹æ—¥æœŸ (2000-01-01)ï¼ŒB1 å•å…ƒæ ¼æ˜¯ç»“æŸæ—¥æœŸ (2025-09-15)ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆæ³¨æ„æ—¥æœŸæ ¼å¼è¦ç¬¦åˆä½ çš„ Excel è®¾ç½®ï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—æ•´å¹´æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;Y&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(&amp;#34;2000-01-01&amp;#34;, &amp;#34;2025-09-15&amp;#34;, &amp;#34;Y&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°†è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å®Œæ•´å¹´æ•°å·®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—æ•´æœˆæ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;M&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ€»å®Œæ•´æœˆæ•°å·®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¤©æ•°&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;D&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ€»å¤©æ•°å·®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¿½ç•¥å¹´ä»½çš„å¤©æ•°å·® (&amp;ldquo;YD&amp;rdquo;)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;YD&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›åŒä¸€å¹´å†…ä»èµ·å§‹æ—¥æœŸçš„æœˆæ—¥åˆ°ç»“æŸæ—¥æœŸçš„æœˆæ—¥ä¹‹é—´çš„å¤©æ•°ï¼ˆå¿½ç•¥å¹´ä»½ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¿½ç•¥å¹´ä»½çš„æœˆæ•°å·® (&amp;ldquo;YM&amp;rdquo;)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;YM&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›åŒä¸€å¹´å†…ä»èµ·å§‹æ—¥æœŸçš„æœˆä»½åˆ°ç»“æŸæ—¥æœŸçš„æœˆä»½ä¹‹é—´çš„å®Œæ•´æœˆæ•°ï¼ˆå¿½ç•¥å¹´ä»½å’Œå¤©æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¿½ç•¥å¹´ä»½å’Œæœˆä»½çš„å¤©æ•°å·® (&amp;ldquo;MD&amp;rdquo;)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, B1, &amp;#34;MD&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å›åŒä¸€æœˆå†…ä»èµ·å§‹æ—¥æœŸçš„æ—¥åˆ°ç»“æŸæ—¥æœŸçš„æ—¥ä¹‹é—´çš„å¤©æ•°ï¼ˆå¿½ç•¥å¹´ä»½å’Œæœˆä»½ï¼‰ã€‚&lt;strong&gt;æ­¤å‚æ•°è®¡ç®—ç»“æœå¯èƒ½å› æœˆä»½å¤©æ•°ä¸åŒå’Œé—°å¹´è€Œæœ‰è¯¯ï¼Œéœ€ç‰¹åˆ«ç•™æ„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»„åˆä½¿ç”¨è®¡ç®—ç²¾ç¡®æ—¶é—´å·®&lt;/strong&gt;ï¼ˆä¾‹å¦‚å¹´é¾„çš„è®¡ç®—ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;=DATEDIF(A1, TODAY(), &amp;#34;Y&amp;#34;) &amp;amp; &amp;#34;å², &amp;#34; &amp;amp; DATEDIF(A1, TODAY(), &amp;#34;YM&amp;#34;) &amp;amp; &amp;#34;ä¸ªæœˆ, &amp;#34; &amp;amp; DATEDIF(A1, TODAY(), &amp;#34;MD&amp;#34;) &amp;amp; &amp;#34;å¤©&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªå…¬å¼ä¼šè®¡ç®—å‡ºä» A1 æ—¥æœŸåˆ°ä»Šå¤©çš„å…·ä½“å¹´é™ã€æœˆæ•°å’Œå¤©æ•°ï¼Œç»“æœæ ¼å¼å¦‚ &amp;ldquo;25å², 8ä¸ªæœˆ, 14å¤©&amp;rdquo; (å…·ä½“å€¼å–å†³äºå½“å‰æ—¥æœŸ)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-datediff-åœ¨-sql-ä¸­çš„ç”¨æ³•ç¤ºä¾‹"&gt;ğŸ“‹ DATEDIFF åœ¨ SQL ä¸­çš„ç”¨æ³•ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;SQL ä¸­çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;å‡½æ•°å› æ•°æ®åº“ç³»ç»Ÿä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. SQL Server&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;DATEDIFF ( datepart , startdate , enddate )&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;datepart&lt;/code&gt;æŒ‡å®šå·®å€¼çš„å•ä½ï¼ˆå¦‚ &lt;code&gt;year&lt;/code&gt;, &lt;code&gt;quarter&lt;/code&gt;, &lt;code&gt;month&lt;/code&gt;, &lt;code&gt;day&lt;/code&gt;, &lt;code&gt;week&lt;/code&gt;, &lt;code&gt;hour&lt;/code&gt;, &lt;code&gt;minute&lt;/code&gt;, &lt;code&gt;second&lt;/code&gt;ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(day, &amp;#39;2022-01-01&amp;#39;, &amp;#39;2023-01-01&amp;#39;) AS DaysDifference;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å› 364ï¼ˆå‡è®¾2022å¹´ä¸æ˜¯é—°å¹´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æœˆæ•°å·®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(month, &amp;#39;2022-01-15&amp;#39;, &amp;#39;2023-03-10&amp;#39;) AS MonthsDifference;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿”å› 14ï¼ˆè·¨è¶Šçš„æœˆä»½è¾¹ç•Œæ•°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢å‘˜å·¥å…¥èŒå¹´é™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT EmployeeName, DATEDIFF(year, HireDate, GETDATE()) AS YearsSinceHire FROM Employees;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2. MySQL&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¯­æ³•ï¼š&lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;MySQL çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;å‡½æ•°&lt;strong&gt;åªè¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®&lt;/strong&gt;ï¼ˆ&lt;code&gt;date1 - date2&lt;/code&gt;ï¼‰ï¼Œå¹¶ä¸”å¿½ç•¥æ—¶é—´éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å¤©æ•°å·®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT DATEDIFF(&amp;#39;2022-04-30&amp;#39;, &amp;#39;2022-04-29&amp;#39;) AS DayDiff; -- è¿”å› 1
SELECT DATEDIFF(&amp;#39;2022-04-29&amp;#39;, &amp;#39;2022-04-30&amp;#39;) AS DayDiff; -- è¿”å› -1
SELECT DATEDIFF(&amp;#39;2022-04-30&amp;#39;, &amp;#39;2022-04-30 14:00:00&amp;#39;) AS DayDiff; -- è¿”å› 0
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸé¡ºåº&lt;/strong&gt;ï¼šå¯¹äº Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;ï¼Œ&lt;strong&gt;ç»“æŸæ—¥æœŸ (&lt;code&gt;end_date&lt;/code&gt;) å¿…é¡»æ™šäºæˆ–ç­‰äºèµ·å§‹æ—¥æœŸ (&lt;code&gt;start_date&lt;/code&gt;)&lt;/strong&gt;ï¼Œå¦åˆ™ä¼šè¿”å› &lt;code&gt;#NUM!&lt;/code&gt;é”™è¯¯ã€‚ å¯¹äº SQL Server çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;ï¼Œå¦‚æœ &lt;code&gt;startdate&lt;/code&gt;æ™šäº &lt;code&gt;enddate&lt;/code&gt;ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚ MySQL çš„ &lt;code&gt;DATEDIFF(date1, date2)&lt;/code&gt;ç»“æœä¹Ÿä¸º &lt;code&gt;date1 - date2&lt;/code&gt;ï¼Œæ•…æ—¥æœŸé¡ºåºå½±å“ç»“æœæ­£è´Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Excel ä¸­çš„éšè—å‡½æ•°&lt;/strong&gt;ï¼š&lt;code&gt;DATEDIF&lt;/code&gt;åœ¨ Excel çš„å‡½æ•°åˆ—è¡¨ä¸­å¯èƒ½æ‰¾ä¸åˆ°ï¼Œéœ€è¦æ‰‹åŠ¨è¾“å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&amp;ldquo;MD&amp;rdquo; å‚æ•°çš„æ½œåœ¨é—®é¢˜&lt;/strong&gt;ï¼šåœ¨ Excel ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;&amp;quot;MD&amp;quot;&lt;/code&gt;å‚æ•°æ—¶ï¼Œç”±äºç®—æ³•ç‰¹æ€§ï¼Œåœ¨æŸäº›ç‰¹å®šæ—¥æœŸï¼ˆä¾‹å¦‚å½“èµ·å§‹æ—¥æ˜¯ä¸€ä¸ªæœˆçš„æœ€åä¸€å¤©æ—¶ï¼‰å¯èƒ½ä¼šå¾—åˆ°æ„å¤–ç»“æœï¼ˆ0æˆ–è´Ÿæ•°ï¼‰ï¼Œå»ºè®®è°¨æ…ä½¿ç”¨æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ³•æ›¿ä»£è®¡ç®—å¤©æ•°å·®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SQL ä¸­çš„æ•°æ®åº“å·®å¼‚&lt;/strong&gt;ï¼šä¸åŒæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ SQL Server, MySQL, Oracle ç­‰ï¼‰å¯¹ &lt;code&gt;DATEDIFF&lt;/code&gt;æˆ–å…¶ç±»ä¼¼å‡½æ•°çš„å®ç°å¯èƒ½æœ‰å¾ˆå¤§ä¸åŒï¼ŒåŒ…æ‹¬å‡½æ•°åã€å‚æ•°é¡ºåºã€æ”¯æŒçš„æ—¥æœŸå•ä½ç­‰ã€‚ä½¿ç”¨æ—¶åŠ¡å¿…æŸ¥é˜…ç›¸åº”æ•°æ®åº“çš„å®˜æ–¹æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¶é—´éƒ¨åˆ†å¤„ç†&lt;/strong&gt;ï¼šæ— è®ºæ˜¯ Excel çš„ &lt;code&gt;DATEDIF&lt;/code&gt;è¿˜æ˜¯ SQL çš„ &lt;code&gt;DATEDIFF&lt;/code&gt;ï¼Œåœ¨è®¡ç®—æ—¥æœŸå·®å€¼æ—¶é€šå¸¸&lt;strong&gt;ä¼šå¿½ç•¥æ—¶é—´éƒ¨åˆ†&lt;/strong&gt;ï¼ŒåªåŸºäºæ—¥æœŸéƒ¨åˆ†è¿›è¡Œè®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SQL Server çš„è¾¹ç•Œè®¡ç®—&lt;/strong&gt;ï¼šåœ¨ SQL Server ä¸­ï¼Œ&lt;code&gt;DATEDIFF&lt;/code&gt;è®¡ç®—çš„æ˜¯æŒ‡å®šçš„ &lt;code&gt;datepart&lt;/code&gt;&lt;strong&gt;è¾¹ç•Œè·¨è¶Šçš„æ¬¡æ•°&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯ç²¾ç¡®çš„æ—¶é—´å·®ã€‚ ä¾‹å¦‚ï¼Œ&lt;code&gt;SELECT DATEDIFF(month, '2023-01-31', '2023-02-01')&lt;/code&gt;ä¼šè¿”å› 1ï¼Œå› ä¸ºè·¨è¶Šäº†1æœˆåˆ°2æœˆçš„è¾¹ç•Œï¼Œå°½ç®¡å®é™…åªç›¸å·®1å¤©ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ ä¸»è¦åœ¨ &lt;strong&gt;Excel&lt;/strong&gt; ä¸­å¤„ç†æ—¥æœŸè®¡ç®—ï¼Œ&lt;strong&gt;&lt;code&gt;DATEDIF&lt;/code&gt;&lt;/strong&gt; æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„å·¥å…·ï¼Œæä¾›äº†å¤šç§è®¡ç®—å¹´æœˆæ—¥æ–¹å¼çš„é€‰æ‹©ï¼Œä½†è¦ç•™æ„å…¶å‚æ•°ç‰¹æ€§å’Œæ½œåœ¨é™·é˜±ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ åœ¨ &lt;strong&gt;SQL&lt;/strong&gt; ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œ&lt;strong&gt;&lt;code&gt;DATEDIFF&lt;/code&gt;&lt;/strong&gt; å‡½æ•°ï¼ˆæˆ–å…¶å˜ä½“/ç±»ä¼¼åŠŸèƒ½ï¼‰æ˜¯è¿›è¡Œæ—¥æœŸå·®å€¼ç»Ÿè®¡çš„åˆ©å™¨ï¼Œä½†ä¸€å®šè¦ç‰¢è®°&lt;strong&gt;ä¸åŒæ•°æ®åº“ç³»ç»Ÿçš„è¯­æ³•å’ŒåŠŸèƒ½å­˜åœ¨å·®å¼‚&lt;/strong&gt;ï¼Œå…·ä½“ç”¨æ³•éœ€å‚è€ƒä½ æ‰€ä½¿ç”¨æ•°æ®åº“çš„è§„èŒƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ DATEDIF/DATEDIFF å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id="all"&gt;ALL
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;ALL&lt;/code&gt;å…³é”®å­—æ˜¯ä¸€ä¸ªç”¨äº&lt;strong&gt;å­æŸ¥è¯¢ä¸­è¿›è¡Œæ¯”è¾ƒæ“ä½œ&lt;/strong&gt;çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œå®ƒè¦æ±‚ä¸»æŸ¥è¯¢ä¸­çš„æŸä¸ªå€¼å¿…é¡»æ»¡è¶³ä¸å­æŸ¥è¯¢è¿”å›çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼ä¹‹é—´çš„æ¯”è¾ƒæ¡ä»¶ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»å®ƒçš„ç”¨æ³•ã€åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“Š &lt;strong&gt;ALL çš„åŸºæœ¬è¯­æ³•ä¸å«ä¹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ALL&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column_name(s)
FROM table_name
WHERE column_name operator ALL (SELECT column_name FROM table_name WHERE condition);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ &lt;code&gt;operator&lt;/code&gt;å¯ä»¥æ˜¯ä»»ä½•æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¦‚ &lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&lt;/code&gt;ã€&lt;code&gt;&amp;gt;=&lt;/code&gt;ã€&lt;code&gt;&amp;lt;=&lt;/code&gt;ã€&lt;code&gt;=&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;æˆ– &lt;code&gt;!=&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ¸å¿ƒå«ä¹‰&lt;/strong&gt;ï¼šåªæœ‰å½“ &lt;code&gt;column_name&lt;/code&gt;ä¸å­æŸ¥è¯¢è¿”å›çš„&lt;strong&gt;æ¯ä¸€ä¸ª&lt;/strong&gt;å€¼éƒ½æ»¡è¶³æ¯”è¾ƒæ¡ä»¶æ—¶ï¼Œè¯¥è¡Œçš„æ¡ä»¶æ‰è¢«è®¤å®šä¸ºçœŸï¼ˆTrueï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;ALL ä¸æ¯”è¾ƒè¿ç®—ç¬¦ç»“åˆçš„ä½¿ç”¨åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ALL&lt;/code&gt;çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥ä¸ä¸åŒçš„æ¯”è¾ƒè¿ç®—ç¬¦ç»“åˆï¼Œå®ç°çµæ´»çš„æŸ¥è¯¢é€»è¾‘ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¯”è¾ƒç±»å‹&lt;/th&gt;
&lt;th&gt;è¯­ä¹‰è¯´æ˜&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹ï¼ˆå‡è®¾å­æŸ¥è¯¢è¿”å›å¤šå€¼ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;gt; ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§äºå­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;gt; å­æŸ¥è¯¢æœ€å¤§å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt; ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°äºå­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;lt; å­æŸ¥è¯¢æœ€å°å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;= ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç­‰äºå­æŸ¥è¯¢ç»“æœä¸­çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä»…å½“å­æŸ¥è¯¢æ‰€æœ‰å€¼ç›¸ç­‰ä¸”ä¸»æŸ¥è¯¢å€¼ä¸ä¹‹ç›¸ç­‰æ—¶ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;gt;= ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤§äºç­‰äºå­æŸ¥è¯¢çš„æ‰€æœ‰å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;gt;= å­æŸ¥è¯¢æœ€å¤§å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt;= ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°äºç­‰äºå­æŸ¥è¯¢çš„æ‰€æœ‰å€¼&lt;/td&gt;
&lt;td&gt;ä¸»æŸ¥è¯¢å€¼ &amp;lt;= å­æŸ¥è¯¢æœ€å°å€¼ â‡’ True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&amp;lt;&amp;gt; ALL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ç­‰äºå­æŸ¥è¯¢çš„&lt;strong&gt;ä»»ä½•&lt;/strong&gt;å€¼&lt;/td&gt;
&lt;td&gt;ç­‰ä»·äº &lt;code&gt;NOT IN&lt;/code&gt;(ä½†æ³¨æ„å¤„ç†NULLå€¼)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;ALL çš„åº”ç”¨å®ä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id="1-æŸ¥æ‰¾é”€å”®é¢è¶…è¿‡æ‰€æœ‰åŒºåŸŸå¹³å‡é”€å”®é¢çš„äº§å“"&gt;1. æŸ¥æ‰¾é”€å”®é¢è¶…è¿‡æ‰€æœ‰åŒºåŸŸå¹³å‡é”€å”®é¢çš„äº§å“
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT product_id
FROM sales
WHERE total_sales &amp;gt; ALL (
SELECT AVG(total_sales)
FROM sales
GROUP BY region_id
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæŸ¥è¯¢èƒ½æ‰¾å‡ºé‚£äº›é”€å”®é¢æ¯”æ¯ä¸ªåŒºåŸŸå¹³å‡é”€å”®é¢éƒ½é«˜çš„äº§å“ã€‚&lt;/p&gt;
&lt;h4 id="2-æŸ¥æ‰¾æˆç»©æœ€é«˜çš„å­¦ç”Ÿ"&gt;2. æŸ¥æ‰¾æˆç»©æœ€é«˜çš„å­¦ç”Ÿ
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT id, score
FROM students
WHERE score &amp;gt;= ALL (SELECT score FROM students);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤æŸ¥è¯¢è¿”å›æˆç»©ä¸ä½äºæ‰€æœ‰å…¶ä»–å­¦ç”Ÿçš„å­¦ç”Ÿï¼Œå³æœ€é«˜åˆ†æˆ–å¹¶åˆ—æœ€é«˜åˆ†çš„å­¦ç”Ÿã€‚&lt;/p&gt;
&lt;h4 id="3-æŸ¥æ‰¾ä»·æ ¼ä¸ç­‰äºä»»ä½•ä¿ƒé”€äº§å“ä»·æ ¼çš„äº§å“"&gt;3. æŸ¥æ‰¾ä»·æ ¼ä¸ç­‰äºä»»ä½•ä¿ƒé”€äº§å“ä»·æ ¼çš„äº§å“
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT ProductName, Price
FROM Products
WHERE Price &amp;lt;&amp;gt; ALL (SELECT Price FROM Products WHERE IsOnSale = 1);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤æŸ¥è¯¢å¯æ‰¾å‡ºæ‰€æœ‰ä»·æ ¼ä¸åœ¨ä¿ƒé”€äº§å“ä»·æ ¼åˆ—è¡¨ä¸­çš„äº§å“ã€‚&lt;/p&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;ä½¿ç”¨ ALL çš„æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ALL&lt;/code&gt;æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­æŸ¥è¯¢è¿”å›ç©ºé›†çš„æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœå­æŸ¥è¯¢æ²¡æœ‰è¿”å›ä»»ä½•è¡Œï¼Œ&lt;code&gt;ALL&lt;/code&gt;å‰çš„æ¡ä»¶ä¼š&lt;strong&gt;æ€»æ˜¯ä¸ºçœŸ&lt;/strong&gt;ã€‚ è¿™æ˜¯å› ä¸ºâ€œä¸ç©ºé›†ä¸­çš„æ‰€æœ‰å…ƒç´ æ¯”è¾ƒâ€çš„é€»è¾‘è¢«å®šä¹‰ä¸ºçœŸã€‚åŠ¡å¿…ç¡®ä¿å­æŸ¥è¯¢èƒ½è¿”å›é¢„æœŸæ•°æ®ï¼Œæˆ–åœ¨å­æŸ¥è¯¢ä¸­ä½¿ç”¨ &lt;code&gt;COALESCE&lt;/code&gt;ç­‰å‡½æ•°å¤„ç†ç©ºå€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NULL å€¼çš„å½±å“&lt;/strong&gt;ï¼šå¦‚æœå­æŸ¥è¯¢è¿”å›çš„ç»“æœé›†ä¸­åŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä¸ &lt;code&gt;ALL&lt;/code&gt;è¿›è¡Œçš„æ¯”è¾ƒå¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœï¼ˆå¦‚ &lt;code&gt;&amp;gt; ALL (1, 2, NULL)&lt;/code&gt;é€šå¸¸ä¸º &lt;code&gt;UNKNOWN&lt;/code&gt;ï¼Œå¯¼è‡´è¡Œè¢«æ’é™¤ï¼‰ã€‚æŸ¥è¯¢æ—¶éœ€æ³¨æ„æ•°æ®ä¸­æ˜¯å¦å­˜åœ¨NULLã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½é—®é¢˜&lt;/strong&gt;ï¼šå½“å­æŸ¥è¯¢è¿”å›çš„æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œ&lt;code&gt;ALL&lt;/code&gt;å¯èƒ½å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºå®ƒéœ€è¦é€è¡Œè¿›è¡Œæ¯”è¾ƒã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ºå­æŸ¥è¯¢ä¸­çš„å…³è”å­—æ®µå’Œæ¡ä»¶å­—æ®µæ·»åŠ ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°è¯•&lt;strong&gt;ä¼˜åŒ–å­æŸ¥è¯¢æœ¬èº«&lt;/strong&gt;ï¼Œå‡å°‘å…¶è¿”å›çš„æ•°æ®é‡ã€‚&lt;/li&gt;
&lt;li&gt;è€ƒè™‘ä½¿ç”¨ &lt;code&gt;EXISTS&lt;/code&gt;æˆ– &lt;code&gt;NOT EXISTS&lt;/code&gt;ç­‰æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äº &lt;code&gt;&amp;gt; ALL&lt;/code&gt;å’Œ &lt;code&gt;&amp;lt; ALL&lt;/code&gt;è¿™ç±»æ“ä½œï¼Œæœ‰æ—¶å¯ä»¥ç”¨ &lt;code&gt;MAX()&lt;/code&gt;æˆ– &lt;code&gt;MIN()&lt;/code&gt;èšåˆå‡½æ•°é‡å†™æŸ¥è¯¢ï¼Œå¾€å¾€èƒ½è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;SELECT ... WHERE column &amp;gt; ALL (SELECT ...)&lt;/code&gt;æœ‰æ—¶å¯æ”¹å†™ä¸º &lt;code&gt;SELECT ... WHERE column &amp;gt; (SELECT MAX(...) FROM ...)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;âš–ï¸ &lt;strong&gt;ALL ä¸ SOME/ANY çš„åŒºåˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ALL&lt;/code&gt;è¦æ±‚æ¡ä»¶ä¸å­æŸ¥è¯¢çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;å€¼åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SOME&lt;/code&gt;æˆ– &lt;code&gt;ANY&lt;/code&gt;ï¼ˆä¸¤è€…åŸºæœ¬åŒä¹‰ï¼‰åˆ™è¦æ±‚æ¡ä»¶ä¸å­æŸ¥è¯¢çš„&lt;strong&gt;ä»»æ„ä¸€ä¸ª&lt;/strong&gt;å€¼åŒ¹é…å³å¯ã€‚
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;salary &amp;gt; ANY (å­æŸ¥è¯¢)&lt;/code&gt;è¡¨ç¤ºå·¥èµ„é«˜äºå­æŸ¥è¯¢ç»“æœä¸­è‡³å°‘ä¸€ä¸ªå€¼å³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;ALL&lt;/code&gt;å…³é”®å­—æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºæ‰§è¡Œéœ€è¦ä¸å­æŸ¥è¯¢ç»“æœé›†ä¸­æ‰€æœ‰å€¼è¿›è¡Œæ¯”è¾ƒçš„å¤æ‚æŸ¥è¯¢ã€‚ç†Ÿç»ƒæŒæ¡å…¶è¯­æ³•ã€åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ï¼Œèƒ½å¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°ä»æ•°æ®åº“ä¸­æå–æ‰€éœ€ä¿¡æ¯ã€‚ä½†åœ¨ä½¿ç”¨æ—¶ï¼ŒåŠ¡å¿…æ³¨æ„å…¶å¯èƒ½å¸¦æ¥çš„æ€§èƒ½å½±å“å’Œç©ºå­æŸ¥è¯¢é›†å¸¦æ¥çš„é€»è¾‘å˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id="mysql-æ±‰å­—å­—ç¬¦"&gt;Mysql æ±‰å­—å­—ç¬¦
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œä¸€ä¸ªæ±‰å­—å­—ç¬¦ç©¶ç«Ÿå ç”¨å¤šå°‘ &lt;code&gt;CHAR&lt;/code&gt;ï¼Œ&lt;strong&gt;ä¸»è¦å–å†³äºæ•°æ®åº“å’Œè¡¨æ‰€ä½¿ç”¨çš„å­—ç¬¦ç¼–ç &lt;/strong&gt;ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;CHAR(n)&lt;/code&gt;å’Œ &lt;code&gt;VARCHAR(n)&lt;/code&gt;ä¸­çš„ &lt;code&gt;n&lt;/code&gt;æ˜¯æŒ‡&lt;strong&gt;å¯å­˜å‚¨çš„å­—ç¬¦æ•°&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°ã€‚å› æ­¤ï¼Œæ— è®ºä½¿ç”¨å“ªç§ç¼–ç ï¼Œ&lt;code&gt;n&lt;/code&gt;çš„å€¼ç›´æ¥å†³å®šäº†è¯¥å­—æ®µèƒ½å­˜æ”¾å¤šå°‘ä¸ªæ±‰å­—ï¼ˆæˆ–è‹±æ–‡å­—æ¯ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†ä¸åŒå­—ç¬¦ç¼–ç ä¸‹çš„å…³é”®ä¿¡æ¯ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ æ›´æ¸…æ™°åœ°ç†è§£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—ç¬¦ç¼–ç  (Character Set)&lt;/th&gt;
&lt;th&gt;ä¸€ä¸ªæ±‰å­—æ‰€å å­—èŠ‚æ•°&lt;/th&gt;
&lt;th&gt;å¯¹ &lt;code&gt;CHAR(n)&lt;/code&gt;/ &lt;code&gt;VARCHAR(n)&lt;/code&gt;çš„å½±å“&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;UTF-8&lt;/strong&gt; (æ¨èä½¿ç”¨)&lt;/td&gt;
&lt;td&gt;3 ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰ &lt;code&gt;CHAR(10)&lt;/code&gt;ï¼Œåˆ™å¯å­˜å‚¨ &lt;strong&gt;10 ä¸ªæ±‰å­—&lt;/strong&gt;ï¼Œå®é™…å ç”¨çº¦ 30 å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/td&gt;
&lt;td&gt;MySQL çš„ &lt;code&gt;utf8&lt;/code&gt;å…¶å®æ˜¯é˜‰å‰²ç‰ˆï¼Œæ¨èä½¿ç”¨ &lt;code&gt;utf8mb4&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GBK&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;2 ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰ &lt;code&gt;CHAR(10)&lt;/code&gt;ï¼Œåˆ™å¯å­˜å‚¨ &lt;strong&gt;10 ä¸ªæ±‰å­—&lt;/strong&gt;ï¼Œå®é™…å ç”¨çº¦ 20 å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/td&gt;
&lt;td&gt;ä¸€ç§è¾ƒè€çš„ä¸­æ–‡ç¼–ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;utf8mb4&lt;/strong&gt; (å¼ºçƒˆæ¨è)&lt;/td&gt;
&lt;td&gt;4 ä¸ªå­—èŠ‚&lt;/td&gt;
&lt;td&gt;å®šä¹‰ &lt;code&gt;CHAR(10)&lt;/code&gt;ï¼Œåˆ™å¯å­˜å‚¨ &lt;strong&gt;10 ä¸ªæ±‰å­—&lt;/strong&gt;ï¼Œå®é™…å ç”¨æœ€å¤š 40 å­—èŠ‚ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çœŸæ­£å®Œæ•´çš„ UTF-8&lt;/strong&gt;ï¼Œæ”¯æŒæ‰€æœ‰ Unicode å­—ç¬¦ï¼ˆå¦‚è¡¨æƒ…ç¬¦å· ğŸ˜€ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;é‡è¦è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œåœ¨è®¾è®¡å­—æ®µé•¿åº¦æ—¶ï¼Œä½ åªéœ€è¦å…³å¿ƒéœ€è¦å­˜å‚¨çš„&lt;strong&gt;å­—ç¬¦ä¸ªæ•°&lt;/strong&gt; &lt;code&gt;n&lt;/code&gt;ã€‚ä¾‹å¦‚ï¼Œæ— è®ºæ˜¯æƒ³å­˜10ä¸ªè‹±æ–‡å•è¯è¿˜æ˜¯10ä¸ªæ±‰å­—ï¼Œç›´æ¥å®šä¹‰ &lt;code&gt;VARCHAR(10)&lt;/code&gt;å³å¯ï¼ŒMySQL ä¼šè‡ªåŠ¨å¤„ç†åº•å±‚å­—èŠ‚çš„åˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ” &lt;strong&gt;å¦‚ä½•æŸ¥çœ‹å’Œè®¡ç®—é•¿åº¦ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;MySQL æä¾›äº†ä¸¤ä¸ªå‡½æ•°æ¥å¸®åŠ©æŸ¥çœ‹å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå®ƒä»¬çš„åŒºåˆ«å¾ˆé‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LENGTH(str)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å­—ç¬¦ä¸² &lt;strong&gt;&lt;code&gt;str&lt;/code&gt;çš„å­—èŠ‚é•¿åº¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT LENGTH(&amp;#39;æ±‰å­—&amp;#39;); -- åœ¨ UTF-8 ç¯å¢ƒä¸‹ï¼Œè¿”å› 6 (2ä¸ªæ±‰å­— * 3å­—èŠ‚)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;CHAR_LENGTH(str)&lt;/code&gt;&lt;/strong&gt;ï¼šè¿”å›å­—ç¬¦ä¸² &lt;strong&gt;&lt;code&gt;str&lt;/code&gt;çš„å­—ç¬¦ä¸ªæ•°&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT CHAR_LENGTH(&amp;#39;æ±‰å­—&amp;#39;); -- åœ¨ä»»ä½•ç¼–ç ä¸‹ï¼Œéƒ½è¿”å› 2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¯ &lt;strong&gt;æœ€ä½³å®è·µä¸å»ºè®®&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—ç¬¦é›†é€‰æ‹©&lt;/strong&gt;ï¼šå¼ºçƒˆå»ºè®®ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;utf8mb4&lt;/code&gt;&lt;/strong&gt; ä½œä¸ºé»˜è®¤å­—ç¬¦é›†ï¼Œå› ä¸ºå®ƒèƒ½æ”¯æŒæœ€å¹¿æ³›çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬å„ç§è¡¨æƒ…ç¬¦å·ï¼ˆEmojiï¼‰ï¼Œå¯ä»¥é¿å…å¾ˆå¤šæ½œåœ¨çš„å­—ç¬¦æ˜¾ç¤ºé—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å­—æ®µé•¿åº¦è§„åˆ’&lt;/strong&gt;ï¼šå®šä¹‰ &lt;code&gt;CHAR&lt;/code&gt;æˆ– &lt;code&gt;VARCHAR&lt;/code&gt;åˆ—æ—¶ï¼Œåªéœ€æ ¹æ®&lt;strong&gt;éœ€è¦å­˜å‚¨çš„æœ€å¤§å­—ç¬¦æ•°&lt;/strong&gt;æ¥è®¾ç½® &lt;code&gt;n&lt;/code&gt;ï¼Œè€Œæ— éœ€è€ƒè™‘åº•å±‚å­—èŠ‚è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œé¢„è®¡å­˜å‚¨ä¸è¶…è¿‡10ä¸ªæ±‰å­—çš„åå­—ï¼Œå®šä¹‰ &lt;code&gt;VARCHAR(10)&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ£€æŸ¥å­—ç¬¦é›†&lt;/strong&gt;ï¼šä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ•°æ®åº“ã€è¡¨å’Œåˆ—çš„å­—ç¬¦é›†è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW CREATE TABLE your_table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;âš¡ &lt;strong&gt;ç®€å•æ¥è¯´&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®°ä½æœ€å…³é”®çš„ä¸€ç‚¹ï¼šåœ¨ MySQL ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;CHAR(n)&lt;/code&gt;å’Œ &lt;code&gt;VARCHAR(n)&lt;/code&gt;é‡Œçš„ &lt;code&gt;n&lt;/code&gt;ä»£è¡¨çš„æ˜¯å­—ç¬¦æ•°ï¼Œä¸æ˜¯å­—èŠ‚æ•°&lt;/strong&gt;ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªæ±‰å­—å­—ç¬¦åœ¨ &lt;code&gt;CHAR&lt;/code&gt;ç±»å‹ä¸­æ°¸è¿œç®—ä½œ &lt;strong&gt;1 ä¸ª char&lt;/strong&gt;ã€‚å®é™…çš„å­—èŠ‚æ¶ˆè€—åˆ™å–å†³äºå­—ç¬¦ç¼–ç ï¼ˆUTF-8 é€šå¸¸ 3 å­—èŠ‚ï¼ŒGBK é€šå¸¸ 2 å­—èŠ‚ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id="stuff"&gt;STUFF
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°è™½ç„¶å¹¶éå…¶åŸç”Ÿå†…ç½®å‡½æ•°ï¼Œä½†å› å…¶åœ¨å­—ç¬¦ä¸²å¤„ç†ä¸Šçš„å®ç”¨æ€§ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šé€‰æ‹©è‡ªå®šä¹‰å®ç°ã€‚å®ƒä¸»è¦ç”¨äºåœ¨å­—ç¬¦ä¸²çš„æŒ‡å®šä½ç½®è¿›è¡Œåˆ é™¤å’Œæ’å…¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®ä½ å¿«é€Ÿäº†è§£ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°çš„åŠŸèƒ½å’Œæ›¿ä»£æ–¹æ¡ˆï¼Œæˆ‘ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ¦‚æ‹¬å…¶æ ¸å¿ƒç‰¹æ€§å’Œåœ¨ MySQL ä¸­çš„å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;STUFF å‡½æ•° (é€šå¸¸è§äº SQL Server) / MySQL è‡ªå®šä¹‰å®ç°&lt;/th&gt;
&lt;th&gt;MySQL ä¸­çš„å¸¸ç”¨æ›¿ä»£æ–¹æ¡ˆ (å¦‚ &lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å­—ç¬¦ä¸²æŒ‡å®šä½ç½®&lt;strong&gt;åˆ é™¤&lt;/strong&gt;æŒ‡å®šé•¿åº¦å­—ç¬¦ï¼Œå¹¶&lt;strong&gt;æ’å…¥&lt;/strong&gt;æ–°å­ä¸²&lt;/td&gt;
&lt;td&gt;åœ¨å­—ç¬¦ä¸²æŒ‡å®šä½ç½®&lt;strong&gt;æ’å…¥&lt;/strong&gt;å­ä¸²ï¼ˆå¯é€‰æ˜¯å¦è¦†ç›–/åˆ é™¤åŸå­—ç¬¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•æ¦‚è¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;STUFF(str, start, length, newstr)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;INSERT(str, pos, length, newstr)&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ·å§‹ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;start&lt;/code&gt;ä» &lt;strong&gt;1&lt;/strong&gt; å¼€å§‹è®¡æ•°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;pos&lt;/code&gt;ä» &lt;strong&gt;1&lt;/strong&gt; å¼€å§‹è®¡æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ é™¤å­—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ˜ç¡®æŒ‡å®šè¦åˆ é™¤çš„å­—ç¬¦æ•° &lt;code&gt;length&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ &lt;code&gt;length&lt;/code&gt;æŒ‡å®šå¾…&lt;strong&gt;æ›¿æ¢/è¦†ç›–&lt;/strong&gt;çš„åŸå­—ç¬¦æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’å…¥å­—ç¬¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥ &lt;code&gt;newstr&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ’å…¥ &lt;code&gt;newstr&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦åŸç”Ÿæ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MySQL ä¸­&lt;strong&gt;é€šå¸¸éœ€è‡ªå®šä¹‰å®ç°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯&lt;/strong&gt;ï¼Œä¸º MySQL å†…ç½®å‡½æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ğŸ“ &lt;strong&gt;è¯·æ³¨æ„&lt;/strong&gt;ï¼šä¸Šè¡¨ä¸­çš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°è¯­æ³•æ˜¯åŸºäºå¸¸è§éœ€æ±‚åŠå…¶åœ¨å…¶ä»–æ•°æ®åº“ï¼ˆå¦‚ SQL Serverï¼‰ä¸­çš„å®ç°ã€‚åœ¨ MySQL ä¸­ï¼Œä½ é€šå¸¸éœ€è¦è‡ªå·±åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰æ¥æ¨¡æ‹Ÿæ­¤åŠŸèƒ½ï¼Œæˆ–è€…ä½¿ç”¨å…¶å†…ç½®çš„ &lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°ä½œä¸ºæ›¿ä»£ã€‚&lt;/p&gt;
&lt;h3 id="-è‡ªå®šä¹‰-stuff-å‡½æ•°"&gt;ğŸ”§ è‡ªå®šä¹‰ STUFF å‡½æ•°
&lt;/h3&gt;&lt;p&gt;ç”±äº MySQL é»˜è®¤ä¸æä¾›åŸç”Ÿçš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»º&lt;strong&gt;ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰&lt;/strong&gt; æ¥å®ç°å…¶åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¸¸è§çš„è‡ªå®šä¹‰ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;DROP FUNCTION IF EXISTS stuff;
DELIMITER //
CREATE FUNCTION stuff(str VARCHAR(8000), startIndex INT, length INT, Newstr VARCHAR(8000))
RETURNS VARCHAR(8000)
DETERMINISTIC
BEGIN
RETURN concat(
LEFT(str, startIndex - 1),
Newstr,
RIGHT(str, CHAR_LENGTH(str) - (startIndex + length) + 1)
);
END //
DELIMITER ;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å‡½æ•°é€»è¾‘è§£é‡Š&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;LEFT(str, startIndex - 1)&lt;/code&gt;: è·å–åŸå§‹å­—ç¬¦ä¸² &lt;code&gt;str&lt;/code&gt;ä»å¼€å§‹åˆ° &lt;code&gt;startIndex - 1&lt;/code&gt;ä½ç½®çš„å­ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥æ‹¼æ¥ &lt;code&gt;Newstr&lt;/code&gt;ï¼šå°†æ–°å­—ç¬¦ä¸²æ’å…¥åˆ°æŒ‡å®šä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RIGHT(str, CHAR_LENGTH(str) - (startIndex + length) + 1)&lt;/code&gt;: è·å–ä» &lt;code&gt;startIndex + length&lt;/code&gt;ä½ç½®å¼€å§‹åˆ°å­—ç¬¦ä¸²æœ«å°¾çš„å­ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;CONCAT&lt;/code&gt;å°†è¿™ä¸‰éƒ¨åˆ†æ‹¼æ¥èµ·æ¥ï¼Œå½¢æˆæœ€ç»ˆç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ›å»ºæ­¤å‡½æ•°åï¼Œä½ ä¾¿å¯ä»¥åœ¨ MySQL ä¸­åƒä½¿ç”¨å†…ç½®å‡½æ•°ä¸€æ ·ä½¿ç”¨ &lt;code&gt;STUFF&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ¯ å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼ˆæˆ–å…¶æ›¿ä»£æ–¹æ³•ï¼‰åœ¨å¤„ç†å­—ç¬¦ä¸²æ—¶éå¸¸æœ‰ç”¨ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ ¼å¼åŒ–&lt;/strong&gt;ï¼šæ›´æ”¹å­—ç¬¦ä¸²çš„æ˜¾ç¤ºæ ¼å¼ï¼Œä¾‹å¦‚æ—¥æœŸã€ç”µè¯å·ç æˆ–ç‰¹å®šä»£ç çš„æ ¼å¼ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å‡è®¾åŸæ—¥æœŸæ ¼å¼ä¸º &amp;#39;20230917&amp;#39;ï¼Œå¸Œæœ›æ ¼å¼åŒ–ä¸º &amp;#39;2023-09-17&amp;#39;
-- ä½¿ç”¨è‡ªå®šä¹‰ STUFF å‡½æ•°
SELECT STUFF(STUFF(&amp;#39;20230917&amp;#39;, 5, 0, &amp;#39;-&amp;#39;), 8, 0, &amp;#39;-&amp;#39;) AS formatted_date; -- è¾“å‡º: &amp;#39;2023-09-17&amp;#39;
-- ä½¿ç”¨ INSERT å‡½æ•°æ›¿ä»£
SELECT INSERT(INSERT(&amp;#39;20230917&amp;#39;, 8, 0, &amp;#39;-&amp;#39;), 5, 0, &amp;#39;-&amp;#39;) AS formatted_date; -- è¾“å‡º: &amp;#39;2023-09-17&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—ä¸æ›¿æ¢&lt;/strong&gt;ï¼šç§»é™¤æˆ–æ›¿æ¢å­—ç¬¦ä¸²ä¸­ä¸éœ€è¦çš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°† &amp;#39;123xx789&amp;#39; ä¸­ä»ç¬¬4ä½å¼€å§‹çš„2ä¸ªå­—ç¬¦ (&amp;#39;xx&amp;#39;) æ›¿æ¢ä¸º &amp;#39;456&amp;#39;
-- ä½¿ç”¨è‡ªå®šä¹‰ STUFF å‡½æ•°
SELECT STUFF(&amp;#39;123xx789&amp;#39;, 4, 2, &amp;#39;456&amp;#39;) AS cleaned_string; -- è¾“å‡º: &amp;#39;123456789&amp;#39;
-- ä½¿ç”¨ INSERT å‡½æ•°æ›¿ä»£ (é€šè¿‡æŒ‡å®šæ›¿æ¢é•¿åº¦å®ç°è¦†ç›–)
SELECT INSERT(&amp;#39;123xx789&amp;#39;, 4, 2, &amp;#39;456&amp;#39;) AS cleaned_string; -- è¾“å‡º: &amp;#39;123456789&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠ¨æ€ SQL æˆ–å¤æ‚å­—ç¬¦ä¸²æ‹¼æ¥&lt;/strong&gt;ï¼šåœ¨ç”Ÿæˆç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆå¦‚ XML è·¯å¾„æŸ¥è¯¢æˆ–å¤æ‚è¾“å‡ºï¼‰æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ç»“åˆ GROUP_CONCAT ç­‰è¿›è¡Œå­—ç¬¦ä¸²èšåˆåå†å¤„ç†ï¼ˆç¤ºä¾‹æ¦‚å¿µåŒ–ï¼‰
-- å‡è®¾æƒ³å°†èšåˆåçš„é€—å·åˆ†éš”åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªé€—å·æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦ï¼ˆå®é™…åœºæ™¯å¯èƒ½æ›´å¤æ‚ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°æˆ–å…¶æ›¿ä»£æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°æœ‰æ•ˆæ€§&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;start&lt;/code&gt;ï¼ˆèµ·å§‹ä½ç½®ï¼‰å¿…é¡»æ˜¯å¤§äº 0 çš„æ•´æ•°ã€‚å¦‚æœ &lt;code&gt;start&lt;/code&gt;è¶…è¿‡åŸå­—ç¬¦ä¸²é•¿åº¦ï¼Œåˆ™å¯èƒ½æ— æ³•è¾¾åˆ°é¢„æœŸæ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;éœ€è¦åˆ é™¤çš„é•¿åº¦ &lt;code&gt;length&lt;/code&gt;åº”ä¸ºéè´Ÿæ•´æ•°ã€‚å¦‚æœ &lt;code&gt;length&lt;/code&gt;ä¸º 0ï¼Œåˆ™åªæ’å…¥æ–°å­—ç¬¦ä¸²ï¼Œä¸åˆ é™¤ä»»ä½•å­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;start&lt;/code&gt;æˆ– &lt;code&gt;length&lt;/code&gt;ä¸ºè´Ÿå€¼ï¼Œå‡½æ•°å¯èƒ½ä¼šè¿”å› &lt;code&gt;NULL&lt;/code&gt;æˆ–äº§ç”Ÿä¸å¯é¢„æµ‹çš„ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šåœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œå­—ç¬¦ä¸²æ“ä½œå‡½æ•°å¯èƒ½ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚å»ºè®®ç»“åˆæœ‰æ•ˆçš„ WHERE å­å¥å‡å°‘æ“ä½œæ•°æ®é‡ï¼Œå¹¶ç¡®ä¿æ•°æ®åº“æ€§èƒ½å¾—åˆ°ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰å‡½æ•°çš„ç»´æŠ¤&lt;/strong&gt;ï¼šå¦‚æœä½ é€‰æ‹©åˆ›å»ºè‡ªå®šä¹‰çš„ &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼Œè¯·ç¡®ä¿å¯¹å…¶è¿›è¡Œå¦¥å–„æ–‡æ¡£è®°å½•å’Œç»´æŠ¤ï¼Œä»¥ä¾¿å›¢é˜Ÿå…¶ä»–æˆå‘˜ç†è§£å…¶è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’¡ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;è™½ç„¶ MySQL æ²¡æœ‰åŸç”Ÿæä¾› &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡&lt;strong&gt;åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°&lt;/strong&gt;æ¥æ¨¡æ‹Ÿå…¶åŠŸèƒ½ï¼Œæˆ–è€…ä½¿ç”¨ MySQL å†…ç½®çš„ &lt;strong&gt;&lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°&lt;/strong&gt;ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆæ¥å®ç°ç±»ä¼¼çš„å­—ç¬¦ä¸²æ’å…¥å’Œæ›¿æ¢æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å“ªç§æ–¹å¼å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœéœ€è¦&lt;strong&gt;ç²¾ç¡®æ¨¡æ‹Ÿ&lt;/strong&gt; &lt;code&gt;STUFF&lt;/code&gt;å‡½æ•°çš„è¡Œä¸ºï¼ˆåœ¨ç‰¹å®šä½ç½®åˆ é™¤æŒ‡å®šé•¿åº¦å­—ç¬¦å¹¶æ’å…¥æ–°å­—ç¬¦ä¸²ï¼‰ï¼Œå¹¶ä¸”ä¼šé¢‘ç¹ä½¿ç”¨ï¼Œ&lt;strong&gt;åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°&lt;/strong&gt;å¯èƒ½æ›´åˆé€‚ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåªæ˜¯&lt;strong&gt;è¿›è¡Œå­—ç¬¦ä¸²æ’å…¥æˆ–è¦†ç›–&lt;/strong&gt;ï¼Œå¹¶ä¸”æ“ä½œç›¸å¯¹ç®€å•ï¼Œç›´æ¥ä½¿ç”¨ MySQL å†…ç½®çš„ &lt;strong&gt;&lt;code&gt;INSERT&lt;/code&gt;å‡½æ•°&lt;/strong&gt;æ›´ç®€ä¾¿ï¼Œä¹Ÿæ— éœ€é¢å¤–åˆ›å»ºå‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ åœ¨ MySQL ä¸­æœ‰æ•ˆåœ°è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id="join"&gt;JOIN
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå½“éœ€è¦è¿æ¥çš„ä¸¤ä¸ªè¡¨å­˜åœ¨&lt;strong&gt;ç›¸åŒåç§°çš„å…³è”å­—æ®µ&lt;/strong&gt;æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;USING&lt;/code&gt;å­å¥æˆ– &lt;code&gt;NATURAL JOIN&lt;/code&gt;æ¥ç®€åŒ–ä¹¦å†™ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è§£é‡Šè¿™ä¸¤ç§æ–¹å¼ä»¥åŠæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-using-å­å¥-æ¨è"&gt;ğŸ“Œ USING å­å¥ (æ¨è)
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;å­å¥æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå½“è¿æ¥æ¡ä»¶çš„å­—æ®µååœ¨ä¸¤å¼ è¡¨ä¸­å®Œå…¨ç›¸åŒæ—¶ï¼Œå®ƒå¯ä»¥æ›¿ä»£ &lt;code&gt;ON&lt;/code&gt;æ¥ç®€åŒ–æŸ¥è¯¢è¯­å¥ï¼Œä½¿ä»£ç æ›´ç®€æ´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM è¡¨1
JOIN è¡¨2
USING (åŒåå­—æ®µ);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¤šå­—æ®µè¿æ¥ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿æ¥æ¡ä»¶éœ€è¦å¤šä¸ªåŒåå­—æ®µï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM è¡¨1
JOIN è¡¨2
USING (å­—æ®µ1, å­—æ®µ2);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;USING ä¸ ON çš„å¯¹æ¯”ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ ON&lt;/strong&gt; (æ ‡å‡†å†™æ³•):&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM employees e
JOIN departments d
ON e.dept_id = d.dept_id;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ USING&lt;/strong&gt; (ç®€åŒ–å†™æ³•):&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM employees
JOIN departments
USING (dept_id);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;USING&lt;/code&gt;ä¼šè‡ªåŠ¨å¤„ç†åŸºäºåŒåå­—æ®µçš„ç­‰å€¼è¿æ¥ï¼Œå¹¶ä¸”åœ¨æŸ¥è¯¢ç»“æœä¸­&lt;strong&gt;åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯åˆ†åˆ«æ˜¾ç¤ºä¸¤å¼ è¡¨çš„å­—æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;USING çš„ä¼˜ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–è¯­å¥&lt;/strong&gt;ï¼šä¸éœ€è¦é‡å¤å†™ &lt;code&gt;ON table1.column = table2.column&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœæ¸…æ™°&lt;/strong&gt;ï¼šé¿å…åœ¨ SELECT ç»“æœé›†ä¸­å‡ºç°é‡å¤çš„å…³è”åˆ—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;USING çš„æ³¨æ„äº‹é¡¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡®ä¿ &lt;code&gt;USING&lt;/code&gt;ä¸­æŒ‡å®šçš„å­—æ®µå¿…é¡»åœ¨ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸”&lt;strong&gt;å­—æ®µåå®Œå…¨ä¸€è‡´&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒä»…æ”¯æŒ&lt;strong&gt;ç­‰å€¼è¿æ¥&lt;/strong&gt; (&lt;code&gt;=&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-natural-join-ä¸æ¨è"&gt;âš ï¸ NATURAL JOIN (ä¸æ¨è)
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;NATURAL JOIN&lt;/code&gt;ä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¸¤å¼ è¡¨ä¸­&lt;strong&gt;æ‰€æœ‰åŒåå­—æ®µ&lt;/strong&gt;ä½œä¸ºè¿æ¥æ¡ä»¶ï¼Œæ— éœ€æ˜¾å¼æŒ‡å®šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT *
FROM è¡¨1
NATURAL JOIN è¡¨2;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨ NATURAL JOINï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶ &lt;code&gt;NATURAL JOIN&lt;/code&gt;å†™èµ·æ¥æ›´çŸ­ï¼Œä½†å­˜åœ¨è¾ƒå¤§é£é™©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯æ§æ€§&lt;/strong&gt;ï¼šå®ƒè‡ªåŠ¨åŒ¹é…æ‰€æœ‰åŒåå­—æ®µã€‚å¦‚æœè¡¨ä¸­æœ‰å…¶ä»–ä¸æ„å›¾ç”¨äºè¿æ¥çš„åŒåå­—æ®µï¼ˆå¦‚ &lt;code&gt;create_time&lt;/code&gt;, &lt;code&gt;name&lt;/code&gt;ï¼‰ï¼Œä¼šè¢«è‡ªåŠ¨åŠ å…¥è¿æ¥æ¡ä»¶ï¼Œå¯èƒ½å¯¼è‡´æŸ¥è¯¢ç»“æœé”™è¯¯æˆ–æ¯«æ— æ„ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»´æŠ¤å›°éš¾&lt;/strong&gt;ï¼šè¡¨ç»“æ„ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼ˆå¢åŠ æˆ–åˆ é™¤äº†åŒåå­—æ®µï¼‰ï¼Œ&lt;code&gt;NATURAL JOIN&lt;/code&gt;çš„è¡Œä¸ºä¼šè‡ªåŠ¨æ”¹å˜ï¼Œå®¹æ˜“å¼•å‘éš¾ä»¥é¢„æ–™çš„é”™è¯¯ï¼Œå¯ç»´æŠ¤æ€§å·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’¡ æ€»ç»“ä¸å»ºè®®
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°é€‰æ‹©ï¼Œå¯ä»¥å‚è€ƒä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;USING å­å¥&lt;/th&gt;
&lt;th&gt;NATURAL JOIN&lt;/th&gt;
&lt;th&gt;ä¼ ç»Ÿ ON å­å¥&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­ (éœ€æ‰‹åŠ¨æŒ‡å®šåŒåå­—æ®µ)&lt;/td&gt;
&lt;td&gt;ä½ (è‡ªåŠ¨æ‰€æœ‰åŒåå­—æ®µ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (å¯ä»»æ„æŒ‡å®šæ¡ä»¶å’ŒéåŒåå­—æ®µè¿æ¥)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯æ§æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (æ˜ç¡®æŒ‡å®šè¿æ¥å­—æ®µ)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æä½&lt;/strong&gt; (ä¾èµ–è¡¨ç»“æ„)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt; (å®Œå…¨æŒæ§)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç»“æœé›†å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;åŒåå­—æ®µåªå‡ºç°ä¸€æ¬¡&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰å­—æ®µéƒ½ä¼šå‡ºç°ï¼Œå¯èƒ½é‡å¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ¨è&lt;/strong&gt; (åŒåå­—æ®µæ—¶)&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸æ¨è&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ¨è&lt;/strong&gt; (éåŒåæˆ–å¤æ‚æ¡ä»¶æ—¶)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç»™ä½ çš„å»ºè®®ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è¿æ¥æ¡ä»¶çš„å­—æ®µå&lt;strong&gt;å®Œå…¨ç›¸åŒ&lt;/strong&gt;æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ &lt;strong&gt;&lt;code&gt;USING&lt;/code&gt;&lt;/strong&gt; å­å¥ï¼Œå®ƒåœ¨ç®€æ´æ€§å’Œå¯æ§æ€§ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°½é‡é¿å…ä½¿ç”¨&lt;/strong&gt; &lt;code&gt;NATURAL JOIN&lt;/code&gt;ï¼Œå› ä¸ºå®ƒçš„éšå¼è¡Œä¸ºå¯èƒ½å¸¦æ¥æ„æƒ³ä¸åˆ°çš„é£é™©ã€‚&lt;/li&gt;
&lt;li&gt;å½“è¿æ¥æ¡ä»¶æ¶‰åŠ&lt;strong&gt;ä¸åŒåå­—æ®µ&lt;/strong&gt;æˆ–éœ€è¦&lt;strong&gt;éç­‰å€¼è¿æ¥&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;BETWEEN&lt;/code&gt;ç­‰ï¼‰æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ä¼ ç»Ÿçš„ &lt;strong&gt;&lt;code&gt;ON&lt;/code&gt;å­å¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹ä½ æœ‰å¸®åŠ©ï¼&lt;/p&gt;
&lt;h2 id="sql-æ³¨å…¥"&gt;SQL æ³¨å…¥
&lt;/h2&gt;&lt;p&gt;SQLæ³¨å…¥æ˜¯ä¸€ç§å¸¸è§ä¸”å±å®³æå¤§çš„Webå®‰å…¨æ¼æ´ï¼Œç†è§£å…¶åŸç†å’ŒæŒæ¡æœ‰æ•ˆçš„é˜²èŒƒæªæ–½ï¼Œå¯¹äºæ„å»ºå®‰å…¨çš„åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¢³ç†äº†SQLæ³¨å…¥çš„ä¸»è¦ç±»å‹å’Œç‰¹ç‚¹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤è¯†ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åˆ†ç±»ç»´åº¦&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒç‰¹å¾ä¸æ”»å‡»æ‰‹æ³•&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰æ‰§è¡Œæ•ˆæœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è”åˆæŸ¥è¯¢æ³¨å…¥ (UNION)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨ &lt;code&gt;UNION&lt;/code&gt;æ“ä½œç¬¦åˆå¹¶æŸ¥è¯¢ï¼Œç›´æ¥è·å–å…¶ä»–è¡¨çš„æ•°æ®ã€‚éœ€è¦å­—æ®µæ•°ç›¸åŒä¸”æœ‰å›æ˜¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŠ¥é”™æ³¨å…¥ (Error-based)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•…æ„æ„é€ è¯­å¥è§¦å‘æ•°æ®åº“æŠ¥é”™ï¼Œé€šè¿‡é”™è¯¯ä¿¡æ¯å›æ˜¾æ¥æ¨æ–­æ•°æ®åº“ç»“æ„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¸ƒå°”ç›²æ³¨ (Boolean Blind)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¡µé¢æ— ç›´æ¥å›æ˜¾ï¼Œé€šè¿‡æ³¨å…¥é€»è¾‘æ¡ä»¶ï¼ˆå¦‚ &lt;code&gt;AND 1=1&lt;/code&gt;/ &lt;code&gt;AND 1=2&lt;/code&gt;ï¼‰ï¼Œæ ¹æ®é¡µé¢è¿”å›å†…å®¹çš„å·®å¼‚æ¥é€å­—ç¬¦æ¨æ–­æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´ç›²æ³¨ (Time-based Blind)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é¡µé¢æ— ä»»ä½•å›æ˜¾å·®å¼‚ï¼Œé€šè¿‡æ³¨å…¥æ—¶é—´å»¶è¿Ÿå‡½æ•°ï¼ˆå¦‚ &lt;code&gt;SLEEP(5)&lt;/code&gt;ï¼‰ï¼Œæ ¹æ®å“åº”æ—¶é—´çš„é•¿çŸ­æ¥åˆ¤æ–­æ¡ä»¶çœŸå‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å †å æŸ¥è¯¢æ³¨å…¥ (Stacked Queries)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ©ç”¨åˆ†å· &lt;code&gt;;&lt;/code&gt;æ‰§è¡Œå¤šæ¡SQLè¯­å¥ï¼Œå¯å®ç°å¢ã€åˆ ã€æ”¹ç­‰æ›´å±é™©çš„æ“ä½œã€‚å–å†³äºæ•°æ®åº“æ˜¯å¦æ”¯æŒå¤šè¯­å¥æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰æ•°æ®æäº¤æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;GET/POST/Cookie/HTTPå¤´æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”»å‡»è½½ä½“ä¸åŒï¼ŒåŸç†ç›¸åŒã€‚å¯èƒ½é€šè¿‡URLå‚æ•°ï¼ˆGETï¼‰ã€è¡¨å•æ•°æ®ï¼ˆPOSTï¼‰ã€Cookieæˆ–User-Agentç­‰HTTPå¤´å­—æ®µæ³¨å…¥ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒ‰å‚æ•°ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°å­—å‹æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ³¨å…¥ç‚¹çš„å‚æ•°ä¸ºæ•´æ•°ï¼Œå¦‚ &lt;code&gt;?id=1&lt;/code&gt;ï¼Œæ„é€ Payloadæ—¶é€šå¸¸æ— éœ€é—­åˆå¼•å·ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦å‹æ³¨å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ³¨å…¥ç‚¹çš„å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚ &lt;code&gt;?name=admin&lt;/code&gt;ï¼Œéœ€è¦é—­åˆå•å¼•å·ç­‰ç¬¦å·å¹¶æ³¨é‡Šæ‰åç»­ä»£ç ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-sqlæ³¨å…¥çš„æ”»å‡»åŸç†ä¸æµç¨‹"&gt;ğŸ’¥ SQLæ³¨å…¥çš„æ”»å‡»åŸç†ä¸æµç¨‹
&lt;/h3&gt;&lt;p&gt;SQLæ³¨å…¥çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;æ··æ·†äº†ä»£ç ä¸æ•°æ®çš„è¾¹ç•Œ&lt;/strong&gt;ã€‚å½“Webåº”ç”¨ç¨‹åºå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ç›´æ¥â€œæ‹¼æ¥â€åˆ°SQLæŸ¥è¯¢è¯­å¥ä¸­ï¼Œè€Œæ²¡æœ‰è¿›è¡Œå……åˆ†çš„éªŒè¯æˆ–è¿‡æ»¤æ—¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥åœ¨è¾“å…¥ä¸­æ’å…¥æ¶æ„çš„SQLä»£ç ï¼Œæ”¹å˜åŸè¯­å¥çš„è¯­ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç»å…¸çš„æ”»å‡»æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯»æ‰¾å¹¶ç¡®è®¤æ³¨å…¥ç‚¹&lt;/strong&gt;ï¼šæ”»å‡»è€…ä¼šå°è¯•åœ¨è¾“å…¥å‚æ•°ï¼ˆå¦‚ç™»å½•æ¡†ã€æœç´¢æ ã€URLå‚æ•°ï¼‰ä¸­æäº¤ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚å•å¼•å· &lt;code&gt;'&lt;/code&gt;ï¼‰æˆ–é€»è¾‘è¯­å¥ï¼ˆå¦‚ &lt;code&gt;and 1=1&lt;/code&gt;, &lt;code&gt;and 1=2&lt;/code&gt;ï¼‰ï¼Œé€šè¿‡è§‚å¯Ÿé¡µé¢çš„è¿”å›ç»“æœï¼ˆå¦‚æŠ¥é”™ä¿¡æ¯ã€å†…å®¹å·®å¼‚ï¼‰æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¢æµ‹æ•°æ®åº“ç»“æ„&lt;/strong&gt;ï¼šç¡®å®šæ³¨å…¥ç‚¹åï¼Œæ”»å‡»è€…ä¼šåˆ©ç”¨æ•°æ®åº“çš„å†…ç½®åŠŸèƒ½ï¼ˆå¦‚MySQLçš„ &lt;code&gt;information_schema&lt;/code&gt;ï¼‰æ¥è·å–æ•°æ®åº“åã€è¡¨åã€åˆ—åç­‰ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;order by n&lt;/code&gt;ç”¨äºåˆ¤æ–­å½“å‰æŸ¥è¯¢çš„å­—æ®µæ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;union select 1,2,database(),version()&lt;/code&gt;ç”¨äºè·å–å½“å‰æ•°æ®åº“åå’Œç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çªƒå–æ•°æ®&lt;/strong&gt;ï¼šåœ¨æŒæ¡æ•°æ®åº“ç»“æ„åï¼Œæ”»å‡»è€…ä¾¿å¯ç›´æ¥æŸ¥è¯¢çªƒå–æ•æ„Ÿæ•°æ®ï¼Œå¦‚ç”¨æˆ·å‡­è¯ã€ä¸ªäººä¿¡æ¯ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æå‡å±å®³&lt;/strong&gt;ï¼šåœ¨é«˜çº§æ”»å‡»ä¸­ï¼Œè‹¥æ•°æ®åº“æƒé™é…ç½®ä¸å½“ï¼Œæ”»å‡»è€…è¿˜å¯èƒ½åˆ©ç”¨SQLæ³¨å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆå¦‚é€šè¿‡ &lt;code&gt;xp_cmdshell&lt;/code&gt;ï¼‰ã€è¯»å†™æœåŠ¡å™¨æ–‡ä»¶ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;load_file()&lt;/code&gt;å’Œ &lt;code&gt;into outfile&lt;/code&gt;ï¼‰ï¼Œä»è€Œå®Œå…¨æ§åˆ¶æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•æœ‰æ•ˆé˜²å¾¡sqlæ³¨å…¥"&gt;ğŸ›¡ï¸ å¦‚ä½•æœ‰æ•ˆé˜²å¾¡SQLæ³¨å…¥
&lt;/h3&gt;&lt;p&gt;é˜²å¾¡SQLæ³¨å…¥éœ€è¦ä¸€å¥—å¤šå±‚æ¬¡ã€çºµæ·±çš„é˜²å¾¡ä½“ç³»ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯ï¼š&lt;strong&gt;æ°¸ä¸ä¿¡ä»»ç”¨æˆ·è¾“å…¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¦–é€‰æ–¹æ¡ˆï¼šå‚æ•°åŒ–æŸ¥è¯¢ï¼ˆPrepared Statementsï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€æœ‰æ•ˆã€æœ€æ ¹æœ¬çš„é˜²å¾¡æ‰‹æ®µã€‚å®ƒè¦æ±‚åº”ç”¨ç¨‹åºåœ¨ç¼–å†™SQLæ—¶ï¼Œä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚ &lt;code&gt;?&lt;/code&gt;ï¼‰æ¥é¢„å®šä¹‰SQLç»“æ„ï¼Œç„¶åå°†ç”¨æˆ·è¾“å…¥ä½œä¸ºâ€œå‚æ•°â€ä¼ é€’ç»™è¿™ä¸ªé¢„ç¼–è¯‘å¥½çš„æ¨¡æ¿ã€‚æ•°æ®åº“ä¼šä¸¥æ ¼åŒºåˆ†ä»£ç å’Œæ•°æ®ï¼Œå³ä½¿å‚æ•°ä¸­åŒ…å«SQLæŒ‡ä»¤ï¼Œä¹Ÿåªä¼šè¢«å½“ä½œæ™®é€šæ•°æ®å¤„ç†ï¼Œæ— æ³•è¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// å±é™©çš„åšæ³•ï¼šå­—ç¬¦ä¸²æ‹¼æ¥
String sql = &amp;#34;SELECT * FROM users WHERE username = &amp;#39;&amp;#34; + username + &amp;#34;&amp;#39;&amp;#34;;
// å®‰å…¨çš„åšæ³•ï¼šå‚æ•°åŒ–æŸ¥è¯¢
String sql = &amp;#34;SELECT * FROM users WHERE username = ?&amp;#34;;
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setString(1, username); // æ­¤æ—¶ï¼Œå³ä½¿usernameè¾“å…¥æ˜¯ admin&amp;#39; OR &amp;#39;1&amp;#39;=&amp;#39;1ï¼Œä¹Ÿä¼šè¢«å®‰å…¨è½¬ä¹‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¾“å…¥éªŒè¯ä¸è¿‡æ»¤&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç™½åå•éªŒè¯&lt;/strong&gt;ï¼šå¯¹äºå·²çŸ¥æ ¼å¼çš„è¾“å…¥ï¼ˆå¦‚é‚®ç®±ã€ç”µè¯å·ç ã€æ•°å­—IDï¼‰ï¼Œåº”ä¸¥æ ¼é™åˆ¶å…¶æ ¼å¼ã€é•¿åº¦å’ŒèŒƒå›´ï¼Œåªå…è®¸åˆæ³•çš„å­—ç¬¦é€šè¿‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦&lt;/strong&gt;ï¼šåœ¨æŸäº›æ— æ³•ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢çš„ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¯¹ç”¨æˆ·è¾“å…¥ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚å•å¼•å·ï¼‰è¿›è¡Œè½¬ä¹‰æ˜¯å¿…è¦çš„è¡¥å……æªæ–½ã€‚ä¾‹å¦‚ä½¿ç”¨ &lt;code&gt;mysqli_real_escape_string()&lt;/code&gt;å‡½æ•°ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™ä¸åº”ä½œä¸ºé¦–è¦æˆ–å”¯ä¸€çš„é˜²å¾¡æ‰‹æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€å°æƒé™åŸåˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨äºè¿æ¥æ•°æ®åº“çš„åº”ç”¨ç¨‹åºè´¦æˆ·ï¼Œä¸åº”æ‹¥æœ‰è¿‡é«˜çš„æƒé™ã€‚ä¸¥æ ¼ç¦æ­¢æˆäºˆDROPã€FILEç­‰é«˜é£é™©æƒé™ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”ç”¨è´¦æˆ·åªæ‹¥æœ‰å…¶æ“ä½œæ‰€éœ€è¡¨çš„æœ€åŸºæœ¬çš„SELECTã€INSERTã€UPDATEæƒé™ã€‚è¿™æ ·å³ä½¿å‘ç”Ÿæ³¨å…¥ï¼Œä¹Ÿèƒ½å°†æŸå¤±é™åˆ°æœ€ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–çºµæ·±é˜²å¾¡æªæ–½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨Webåº”ç”¨é˜²ç«å¢™ï¼ˆWAFï¼‰&lt;/strong&gt;ï¼šWAFå¯ä»¥åŸºäºè§„åˆ™å®æ—¶æ£€æµ‹å’Œæ‹¦æˆªæ˜æ˜¾çš„æ¶æ„è¯·æ±‚ï¼Œä¸ºåº”ç”¨æä¾›ä¸€é“å¤–å›´é˜²çº¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯&lt;/strong&gt;ï¼šä¸åº”å°†æ•°æ®åº“çš„è¯¦ç»†æŠ¥é”™ä¿¡æ¯ç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼Œè¿™äº›ä¿¡æ¯ä¼šä¸ºæ”»å‡»è€…æä¾›å¤§é‡çº¿ç´¢ã€‚åº”ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯é¡µé¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸå®‰å…¨å®¡è®¡ä¸æµ‹è¯•&lt;/strong&gt;ï¼šä½¿ç”¨ä¸“ä¸šå·¥å…·ï¼ˆå¦‚SQLMapï¼‰æˆ–è¿›è¡Œä»£ç å®¡è®¡ï¼Œå®šæœŸå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæ¼æ´æ‰«æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;SQLæ³¨å…¥æ˜¯ä¸€ç§ç”±äºç¨‹åºæœªèƒ½æ­£ç¡®å¤„ç†ç”¨æˆ·è¾“å…¥è€Œå¯¼è‡´çš„ä¸¥é‡å®‰å…¨æ¼æ´ã€‚é˜²å¾¡çš„å…³é”®åœ¨äºä»å¼€å‘é˜¶æ®µå°±é‡‡ç”¨&lt;strong&gt;å‚æ•°åŒ–æŸ¥è¯¢&lt;/strong&gt;ç­‰å®‰å…¨ç¼–ç å®è·µï¼Œå¹¶è¾…ä»¥è¾“å…¥éªŒè¯ã€æœ€å°æƒé™ç­‰çºµæ·±é˜²å¾¡æªæ–½ï¼Œæ‰èƒ½æœ‰æ•ˆä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£SQLæ³¨å…¥ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„æ”»å‡»æŠ€æœ¯æˆ–é˜²å¾¡æ–¹æ¡ˆæœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç´¢å¼•--å‡½æ•°"&gt;ç´¢å¼• &amp;amp; å‡½æ•°
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå¯¹ç´¢å¼•å­—æ®µä½¿ç”¨å‡½æ•°è¿›è¡Œç­›é€‰ç¡®å®ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å¸¸è§çš„å‡½æ•°æ“ä½œç±»å‹åŠå…¶ä¼˜åŒ–æ€è·¯ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿç†è§£ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°æ“ä½œç±»å‹&lt;/th&gt;
&lt;th&gt;å¤±æ•ˆç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;ä¼˜åŒ–æ€è·¯ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°å­¦è¿ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE id + 1 = 10;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†è¿ç®—ç§»è‡³ç­‰å·å¦ä¸€ä¾§ï¼š&lt;code&gt;... WHERE id = 10 - 1;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥æœŸ/æ—¶é—´å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE YEAR(create_time) = 2024;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ”¹ç”¨èŒƒå›´æŸ¥è¯¢ï¼š&lt;code&gt;... WHERE create_time BETWEEN '2024-01-01' AND '2024-12-31';&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦ä¸²å‡½æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... WHERE SUBSTR(name, 1, 3) = 'abc';&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°½é‡é¿å…ç›´æ¥å¯¹ç´¢å¼•åˆ—ä½¿ç”¨å‡½æ•°ï¼Œæˆ–è€ƒè™‘å‡½æ•°ç´¢å¼•ï¼ˆMySQL 8.0+ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç´¢å¼•å¤±æ•ˆçš„æ ¸å¿ƒåŸå› "&gt;ğŸ’¡ ç´¢å¼•å¤±æ•ˆçš„æ ¸å¿ƒåŸå› 
&lt;/h3&gt;&lt;p&gt;ç´¢å¼•ï¼Œç‰¹åˆ«æ˜¯å¸¸ç”¨çš„ B+Tree ç´¢å¼•ï¼Œå…¶é«˜æ•ˆä¹‹å¤„åœ¨äºå®ƒæŒ‰ç…§ç´¢å¼•å­—æ®µçš„&lt;strong&gt;åŸå§‹å€¼&lt;/strong&gt;è¿›è¡Œäº†æ’åºå­˜å‚¨ã€‚è¿™å°±åƒä¸€æœ¬å­—å…¸ï¼Œæ‰€æœ‰å­—è¯éƒ½æ˜¯æŒ‰æ‹¼éŸ³é¡ºåºæ’åˆ—çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ ¹æ®æ‹¼éŸ³å¿«é€Ÿå®šä½åˆ°ç›®æ ‡å­—è¯ ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ å¯¹ç´¢å¼•å­—æ®µä½¿ç”¨å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;YEAR(create_time)&lt;/code&gt;æˆ– &lt;code&gt;id + 1&lt;/code&gt;ï¼‰æ—¶ï¼Œæ•°æ®åº“å¼•æ“æ— æ³•ç›´æ¥ä½¿ç”¨è¿™ä¸ªâ€œæœ‰åºçš„å­—å…¸â€ã€‚å®ƒå¿…é¡»&lt;strong&gt;é€è¡Œå–å‡º&lt;/strong&gt; &lt;code&gt;create_time&lt;/code&gt;æˆ– &lt;code&gt;id&lt;/code&gt;çš„åŸå§‹å€¼ï¼Œç„¶ååº”ç”¨å‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œæœ€åæ‰èƒ½ä¸ä½ çš„æ¡ä»¶è¿›è¡Œæ¯”è¾ƒã€‚è¿™ä¸ªâ€œé€è¡Œè®¡ç®—â€çš„è¿‡ç¨‹å°±ç­‰åŒäºå…¨è¡¨æ‰«æï¼Œä½¿å¾—ç´¢å¼•æ— æ³•å‘æŒ¥ä½œç”¨ ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œä¸€äº›&lt;strong&gt;éšå¼ç±»å‹è½¬æ¢&lt;/strong&gt;ä¹Ÿç­‰åŒäºä½¿ç”¨äº†å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç´¢å¼•åˆ— &lt;code&gt;phone&lt;/code&gt;æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼ˆVARCHARï¼‰ï¼Œè€Œä½ çš„æŸ¥è¯¢æ¡ä»¶æ˜¯ &lt;code&gt;WHERE phone = 13800138000&lt;/code&gt;ï¼ˆä¼ å…¥æ•°å­—ï¼‰ï¼ŒMySQL ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå…¶æ•ˆæœç›¸å½“äº &lt;code&gt;WHERE CAST(phone AS SIGNED INT) = 13800138000&lt;/code&gt;ï¼ŒåŒæ ·ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ’æŸ¥ä¸ä¼˜åŒ–"&gt;ğŸ”§ å¦‚ä½•æ’æŸ¥ä¸ä¼˜åŒ–
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ EXPLAIN åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥çš„æ’æŸ¥æ–¹æ³•ã€‚åœ¨ SQL è¯­å¥å‰åŠ ä¸Š &lt;code&gt;EXPLAIN&lt;/code&gt;å…³é”®å­—æ‰§è¡Œï¼ŒæŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ã€‚é‡ç‚¹å…³æ³¨ &lt;code&gt;type&lt;/code&gt;åˆ—ï¼Œå¦‚æœæ˜¾ç¤º &lt;code&gt;ALL&lt;/code&gt;ï¼Œåˆ™æ„å‘³ç€å…¨è¡¨æ‰«æï¼›åŒæ—¶æ£€æŸ¥ &lt;code&gt;key&lt;/code&gt;åˆ—ï¼Œå¦‚æœä¸º &lt;code&gt;NULL&lt;/code&gt;åˆ™è¡¨ç¤ºæœªä½¿ç”¨ç´¢å¼• ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–æŸ¥è¯¢å†™æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éµå¾ªè¡¨æ ¼ä¸­çš„ä¼˜åŒ–æ€è·¯ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯&lt;strong&gt;ä¿æŒç´¢å¼•å­—æ®µåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­çš„â€œçº¯å‡€â€&lt;/strong&gt;ï¼Œé¿å…åœ¨å…¶ä¸Šæ–½åŠ ä»»ä½•æ“ä½œã€‚å°†è¿ç®—ã€å‡½æ•°å¤„ç†è½¬ç§»åˆ°ç­‰å·çš„å¸¸é‡ä¸€ä¾§ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨ MySQL 8.0 çš„å‡½æ•°ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå¹¶ä¸”ç¡®å®æ— æ³•é¿å…å¯¹å­—æ®µè¿›è¡Œå‡½æ•°è®¡ç®—ï¼Œå¯ä»¥è€ƒè™‘åˆ›å»º&lt;strong&gt;å‡½æ•°ç´¢å¼•&lt;/strong&gt;ã€‚è¿™å…è®¸ä½ ç›´æ¥ä¸ºå‡½æ•°è®¡ç®—çš„ç»“æœå»ºç«‹ç´¢å¼• ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- ä¾‹å¦‚ï¼Œä¸º name å­—æ®µçš„é•¿åº¦åˆ›å»ºç´¢å¼•
ALTER TABLE t_user ADD INDEX idx_name_length ((LENGTH(name)));
-- ç„¶åä»¥ä¸‹æŸ¥è¯¢å°±æœ‰å¯èƒ½ä½¿ç”¨è¿™ä¸ªç´¢å¼•
SELECT * FROM t_user WHERE LENGTH(name) = 6;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œä¼˜åŒ–å»ºè®®èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è®¾è®¡ SQL æŸ¥è¯¢ï¼Œå……åˆ†å‘æŒ¥ç´¢å¼•çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å¦‚æœä½ æœ‰å…·ä½“çš„æŸ¥è¯¢åœºæ™¯éœ€è¦ä¼˜åŒ–ï¼Œå¯ä»¥åˆ†äº«å‡ºæ¥ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ†æã€‚&lt;/p&gt;
&lt;h2 id="è¡¨ç©ºé—´"&gt;è¡¨ç©ºé—´
&lt;/h2&gt;&lt;p&gt;InnoDB çš„è¡¨ç©ºé—´æ˜¯ MySQL æ•°æ®åº“å­˜å‚¨å¼•æ“çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒå°±åƒä¸€ä¸ªå¤§ä»“åº“ï¼Œè´Ÿè´£ä»¥ç»“æ„åŒ–çš„æ–¹å¼é«˜æ•ˆå­˜æ”¾æ‰€æœ‰çš„è¡¨æ•°æ®ã€ç´¢å¼•ç­‰å…³é”®ä¿¡æ¯ã€‚ä¸‹é¢è¿™å¼ å›¾å¯ä»¥å¸®ä½ å¿«é€Ÿç†è§£è¿™ä¸ªâ€œä»“åº“â€çš„å†…éƒ¨ç»„ç»‡ç»“æ„ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[è¡¨ç©ºé—´&amp;lt;br&amp;gt;Tablespace] --&amp;gt; B1[ç³»ç»Ÿè¡¨ç©ºé—´&amp;lt;br&amp;gt;ibdata1]
A --&amp;gt; B2[ç‹¬ç«‹è¡¨ç©ºé—´&amp;lt;br&amp;gt;.ibdæ–‡ä»¶]
A --&amp;gt; B3[å…¶ä»–è¡¨ç©ºé—´&amp;lt;br&amp;gt;å¦‚Undo/ä¸´æ—¶è¡¨ç©ºé—´]
B1 --&amp;gt; C1[æ®µ Segment&amp;lt;br&amp;gt;å¦‚æ•°æ®æ®µ/ç´¢å¼•æ®µ]
B2 --&amp;gt; C2[æ®µ Segment&amp;lt;br&amp;gt;å¦‚æ•°æ®æ®µ/ç´¢å¼•æ®µ]
C1 --&amp;gt; D1[åŒº Extent&amp;lt;br&amp;gt;64ä¸ªè¿ç»­é¡µ=1MB]
C2 --&amp;gt; D2[åŒº Extent&amp;lt;br&amp;gt;64ä¸ªè¿ç»­é¡µ=1MB]
D1 --&amp;gt; E1[é¡µ Page&amp;lt;br&amp;gt;é»˜è®¤16KB]
D2 --&amp;gt; E2[é¡µ Page&amp;lt;br&amp;gt;é»˜è®¤16KB]
E1 --&amp;gt; F1[è¡Œ Row&amp;lt;br&amp;gt;å®é™…æ•°æ®è®°å½•]
E2 --&amp;gt; F2[è¡Œ Row&amp;lt;br&amp;gt;å®é™…æ•°æ®è®°å½•]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-è¡¨ç©ºé—´çš„å±‚æ¬¡ç»“æ„"&gt;ğŸ’¡ è¡¨ç©ºé—´çš„å±‚æ¬¡ç»“æ„
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªâ€œä»“åº“â€çš„å†…éƒ¨ç®¡ç†éå¸¸ç²¾ç»†ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†ä¸ºå¤šä¸ªå±‚çº§ï¼Œæ¯ä¸€çº§éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ®µï¼šæŒ‰åŠŸèƒ½åˆ’åˆ†çš„è´§æ¶åŒº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ®µæ˜¯è¡¨ç©ºé—´å†…çš„ä¸»è¦ç»„ç»‡ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼Œç”¨äºç®¡ç†ç‰¹å®šç±»å‹çš„æ•°æ®ã€‚æ¯ä¸ªç´¢å¼•ä¼šå¯¹åº”ä¸¤ä¸ªæ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¶å­èŠ‚ç‚¹æ®µ&lt;/strong&gt;ï¼šå­˜å‚¨B+æ ‘ä¸­å®é™…çš„&lt;strong&gt;æ•°æ®è¡Œè®°å½•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;éå¶å­èŠ‚ç‚¹æ®µ&lt;/strong&gt;ï¼šå­˜å‚¨B+æ ‘çš„&lt;strong&gt;ç´¢å¼•èŠ‚ç‚¹&lt;/strong&gt;ï¼Œç”¨äºå¿«é€Ÿå®šä½æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å°†æ•°æ®å’Œç´¢å¼•åˆ†å¼€ç®¡ç†ï¼Œæœ‰åŠ©äºä¼˜åŒ–I/Oæ•ˆç‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒºï¼šæˆæ‰¹åˆ†é…çš„å­˜å‚¨å•å…ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³éšæœºI/Oå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼ŒInnoDBå¼•å…¥äº†åŒºçš„æ¦‚å¿µã€‚&lt;strong&gt;ä¸€ä¸ªåŒºç”±64ä¸ªè¿ç»­çš„é¡µï¼ˆé»˜è®¤æ¯ä¸ªé¡µ16KBï¼‰ç»„æˆï¼Œå¤§å°ä¸º1MB&lt;/strong&gt;ã€‚å½“è¡¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼ŒInnoDBä¼šæŒ‰åŒºä¸ºå•ä½ç”šè‡³ä¸€æ¬¡æ€§åˆ†é…å¤šä¸ªè¿ç»­çš„åŒºæ¥ä¸ºç´¢å¼•åˆ†é…ç©ºé—´ã€‚è¿™ç§&lt;strong&gt;æ‰¹é‡åˆ†é…è¿ç»­ç‰©ç†ç©ºé—´&lt;/strong&gt;çš„ç­–ç•¥ï¼Œèƒ½æœ‰æ•ˆä¿è¯æ•°æ®åœ¨ç£ç›˜ä¸Šçš„ç‰©ç†è¿ç»­æ€§ï¼Œä»è€Œåœ¨èŒƒå›´æŸ¥è¯¢ç­‰åœºæ™¯ä¸‹å°†éšæœºI/Oè½¬å˜ä¸ºæ›´é«˜æ•ˆçš„é¡ºåºI/Oã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¡µï¼šç®¡ç†æ•°æ®çš„åŸºæœ¬å•ä½&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¡µæ˜¯InnoDB&lt;strong&gt;ç£ç›˜ç®¡ç†çš„æœ€å°å•ä½&lt;/strong&gt;ï¼Œé»˜è®¤å¤§å°ä¸º16KBã€‚æ‰€æœ‰æ•°æ®çš„è¯»å†™æ“ä½œéƒ½æ˜¯ä»¥é¡µä¸ºåŸºæœ¬å•å…ƒè¿›è¡Œçš„ã€‚é¡µçš„ç±»å‹æœ‰å¤šç§ï¼Œå¦‚å­˜å‚¨æ•°æ®å’Œç´¢å¼•çš„&lt;strong&gt;æ•°æ®é¡µ&lt;/strong&gt;ã€å­˜å‚¨äº‹åŠ¡å›æ»šä¿¡æ¯çš„&lt;strong&gt;Undoé¡µ&lt;/strong&gt;ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡Œï¼šæœ€ç»ˆçš„è´§ç‰©&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¡Œæ˜¯å­˜å‚¨åœ¨é¡µä¸­çš„&lt;strong&gt;å®é™…æ•°æ®è®°å½•&lt;/strong&gt;ã€‚InnoDBå­˜å‚¨å¼•æ“æ˜¯é¢å‘è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ã€‚æ¯ä¸ªé¡µèƒ½å­˜æ”¾çš„è¡Œæ•°æœ‰ä¸Šé™ï¼Œä¾‹å¦‚å¯¹äºé»˜è®¤çš„16KBé¡µï¼Œæœ€å¤šçº¦å¯å­˜æ”¾7992è¡Œè®°å½•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¡¨ç©ºé—´çš„ç®¡ç†ä¸å®è·µ"&gt;ğŸ› ï¸ è¡¨ç©ºé—´çš„ç®¡ç†ä¸å®è·µ
&lt;/h3&gt;&lt;p&gt;äº†è§£ç»“æ„åï¼Œå…³é”®åœ¨äºå¦‚ä½•æœ‰æ•ˆç®¡ç†å’Œè¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡¨ç©ºé—´ç±»å‹é€‰æ‹©&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´&lt;/strong&gt;ï¼šæ—©æœŸç‰ˆæœ¬é»˜è®¤æ¨¡å¼ï¼Œæ‰€æœ‰è¡¨å’Œç³»ç»Ÿæ•°æ®å…±å­˜äº&lt;code&gt;ibdata1&lt;/code&gt;æ–‡ä»¶ã€‚éš¾ä»¥å•ç‹¬ç®¡ç†ç‰¹å®šè¡¨ï¼Œ&lt;strong&gt;ç©ºé—´æ— æ³•è‡ªåŠ¨å›æ”¶&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹è¡¨ç©ºé—´&lt;/strong&gt;ï¼š&lt;strong&gt;ç°ä»£MySQLçš„é»˜è®¤æ¨è&lt;/strong&gt;ã€‚å¯ç”¨å‚æ•°&lt;code&gt;innodb_file_per_table=ON&lt;/code&gt;åï¼Œæ¯å¼ è¡¨æœ‰ç‹¬ç«‹çš„&lt;code&gt;.ibd&lt;/code&gt;æ–‡ä»¶ã€‚&lt;strong&gt;ä¼˜åŠ¿æ˜æ˜¾&lt;/strong&gt;ï¼šå¯ä»¥å•ç‹¬å¯¹è¡¨è¿›è¡Œå¤‡ä»½ã€æ¢å¤ï¼›æ‰§è¡Œ&lt;code&gt;DROP TABLE&lt;/code&gt;æˆ–&lt;code&gt;TRUNCATE TABLE&lt;/code&gt;èƒ½ç›´æ¥é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼›æ›´å®¹æ˜“ä¼˜åŒ–å’Œç®¡ç†å•ä¸ªè¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´ä¼˜åŒ–ä¸ç¢ç‰‡æ•´ç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éšç€æ•°æ®é¢‘ç¹å¢åˆ æ”¹ï¼Œè¡¨ç©ºé—´ä¼šäº§ç”Ÿ&lt;strong&gt;ç¢ç‰‡&lt;/strong&gt;ï¼Œå¯¼è‡´ç©ºé—´æµªè´¹å’Œæ€§èƒ½ä¸‹é™ã€‚å¸¸ç”¨ä¼˜åŒ–æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;OPTIMIZE TABLE table_name;&lt;/code&gt;&lt;/strong&gt; å‘½ä»¤é‡å»ºè¡¨å¹¶æ•´ç†ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ &lt;strong&gt;&lt;code&gt;ALTER TABLE table_name ENGINE=InnoDB;&lt;/code&gt;&lt;/strong&gt; ä¹Ÿèƒ½è¾¾åˆ°é‡å»ºè¡¨ã€ä¼˜åŒ–ç©ºé—´çš„ç›®çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…³é”®ç‰¹æ€§ï¼šåŒå†™ç¼“å†²åŒº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯InnoDBä¿éšœæ•°æ®å¯é æ€§çš„ä¸€é¡¹é‡è¦æœºåˆ¶ã€‚åœ¨å°†æ•°æ®é¡µå†™å…¥æœ€ç»ˆç£ç›˜ä½ç½®å‰ï¼ŒInnoDBä¼šå…ˆå°†å®ƒä»¬å†™å…¥ç³»ç»Ÿè¡¨ç©ºé—´å†…çš„ä¸€ä¸ªç§°ä¸º&lt;strong&gt;åŒå†™ç¼“å†²åŒº&lt;/strong&gt;çš„è¿ç»­åŒºåŸŸï¼Œç„¶åå†å†™å…¥ç›®æ ‡ä½ç½®ã€‚å½“å‘ç”Ÿéƒ¨åˆ†é¡µå†™å…¥ï¼ˆå¦‚å†™å…¥è¿‡ç¨‹ä¸­ç³»ç»Ÿæ–­ç”µï¼‰æ—¶ï¼ŒInnoDBå¯ä»¥ä»åŒå†™ç¼“å†²åŒºä¸­æ‰¾åˆ°è¯¥é¡µçš„å®Œå¥½å‰¯æœ¬ç”¨äºæ¢å¤ï¼Œä»è€Œ&lt;strong&gt;é¿å…æ•°æ®æŸå&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼ŒInnoDBè¡¨ç©ºé—´æ˜¯ä¸€ä¸ªå±‚æ¬¡åˆ†æ˜ã€ç®¡ç†ç²¾ç»†çš„é€»è¾‘å­˜å‚¨ç»“æ„ã€‚ä¸ºäº†è·å¾—æœ€ä½³çš„æ€§èƒ½å’Œç®¡ç†çµæ´»æ€§ï¼Œå»ºè®®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨ç‹¬ç«‹è¡¨ç©ºé—´&lt;/strong&gt;ï¼šç¡®ä¿&lt;code&gt;innodb_file_per_table=ON&lt;/code&gt;ï¼ˆç°ä»£ç‰ˆæœ¬é€šå¸¸é»˜è®¤å¦‚æ­¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®šæœŸä¼˜åŒ–å¤§è¡¨&lt;/strong&gt;ï¼šå¯¹é¢‘ç¹æ›´æ–°ã€åˆ é™¤æ“ä½œçš„æ ¸å¿ƒå¤§è¡¨ï¼Œå®šæœŸä½¿ç”¨&lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;æˆ–ç›¸åº”&lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥æ•´ç†ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³æ³¨æ–‡ä»¶å¤§å°&lt;/strong&gt;ï¼šç›‘æ§ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆ&lt;code&gt;ibdata1&lt;/code&gt;ï¼‰å’Œç‹¬ç«‹è¡¨ç©ºé—´ï¼ˆ&lt;code&gt;.ibd&lt;/code&gt;æ–‡ä»¶ï¼‰çš„å¤§å°å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†è§£å¯é æ€§ä»£ä»·&lt;/strong&gt;ï¼šçŸ¥æ™“åŒå†™ç¼“å†²åŒºç­‰æœºåˆ¶ä¼šå¸¦æ¥å°‘é‡æ€§èƒ½å¼€é”€ï¼Œä½†è¿™æ˜¯ä¿éšœæ•°æ®å®‰å…¨çš„å…³é”®æƒè¡¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£InnoDBçš„è¡¨ç©ºé—´ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚ï¼Œæ¯”å¦‚B+æ ‘ç´¢å¼•åœ¨è¡¨ç©ºé—´ä¸­çš„å…·ä½“ç»„ç»‡å½¢å¼ï¼Œæˆ–è€…åŒå†™ç¼“å†²åŒºçš„æ›´æ·±å…¥å·¥ä½œåŸç†æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="äº‹åŠ¡æ—¥å¿—"&gt;äº‹åŠ¡æ—¥å¿—
&lt;/h2&gt;&lt;p&gt;ç†è§£äº‹åŠ¡æ—¥å¿—åœ¨è¡¨ç©ºé—´ä¸­çš„ä½ç½®ï¼Œå…³é”®åœ¨äºåŒºåˆ† &lt;strong&gt;Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒä»¬çš„å­˜å‚¨ä½ç½®å’Œç®¡ç†æ–¹å¼å®Œå…¨ä¸åŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒä¿¡æ¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ—¥å¿—ç±»å‹&lt;/th&gt;
&lt;th&gt;ç‰©ç†å­˜å‚¨ä½ç½®&lt;/th&gt;
&lt;th&gt;é»˜è®¤æ–‡ä»¶å/ä½ç½®&lt;/th&gt;
&lt;th&gt;ç®¡ç†æ–¹å¼&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹äºè¡¨ç©ºé—´&lt;/strong&gt;çš„ç‰©ç†æ—¥å¿—æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ib_logfile0&lt;/code&gt;, &lt;code&gt;ib_logfile1&lt;/code&gt;ï¼ˆé»˜è®¤åœ¨æ•°æ®ç›®å½•ä¸‹ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šå¤§å°ï¼Œå¾ªç¯å†™å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆibdata1ï¼‰&lt;/strong&gt; æˆ– &lt;strong&gt;ç‹¬ç«‹çš„Undoè¡¨ç©ºé—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ibdata1&lt;/code&gt;ï¼ˆé»˜è®¤ï¼‰æˆ– &lt;code&gt;undo_001&lt;/code&gt;, &lt;code&gt;undo_002&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯é…ç½®ä¸ºç‹¬ç«‹è¡¨ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-redo-log-çš„å­˜å‚¨ä½ç½®"&gt;ğŸ’¡ Redo Log çš„å­˜å‚¨ä½ç½®
&lt;/h3&gt;&lt;p&gt;Redo Log æ˜¯ InnoDB å­˜å‚¨å¼•æ“ä¸ºäº†ç¡®ä¿äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;è€Œè®¾è®¡çš„ç‰©ç†æ—¥å¿—ã€‚å®ƒ&lt;strong&gt;å¹¶ä¸å­˜å‚¨åœ¨ä»»ä½•è¡¨ç©ºé—´æ–‡ä»¶å†…éƒ¨&lt;/strong&gt;ï¼Œè€Œæ˜¯åœ¨ç£ç›˜ä¸Šæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ã€ä¸“é—¨çš„æ—¥å¿—æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤æ–‡ä»¶&lt;/strong&gt;ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åœ¨ MySQL çš„&lt;strong&gt;æ•°æ®ç›®å½•&lt;/strong&gt;ï¼ˆç”± &lt;code&gt;datadir&lt;/code&gt;å‚æ•°æŒ‡å®šï¼‰ä¸‹æ‰¾åˆ°åä¸º &lt;code&gt;ib_logfile0&lt;/code&gt;å’Œ &lt;code&gt;ib_logfile1&lt;/code&gt;çš„æ–‡ä»¶ã€‚å®ƒä»¬å…±åŒç»„æˆä¸€ä¸ª&lt;strong&gt;æ—¥å¿—æ–‡ä»¶ç»„&lt;/strong&gt;ï¼Œé‡‡ç”¨å¾ªç¯å†™å…¥çš„æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰è·¯å¾„&lt;/strong&gt;ï¼šä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ &lt;code&gt;innodb_log_group_home_dir&lt;/code&gt;å‚æ•°æ¥æŒ‡å®š Redo Log æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šRedo Log è®°å½•çš„æ˜¯å¯¹æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ã€‚å½“äº‹åŠ¡æäº¤æ—¶ï¼Œç›¸å…³ä¿®æ”¹å¿…é¡»å…ˆå†™å…¥ Redo Logï¼ˆè¿™ä¸ªè¿‡ç¨‹æ˜¯é¡ºåºIOï¼Œé€Ÿåº¦å¾ˆå¿«ï¼‰ï¼Œç„¶åæ‰ä¼šåœ¨åå°ç¼“æ…¢åœ°å°†å†…å­˜ä¸­çš„â€œè„é¡µâ€åˆ·æ–°åˆ°è¡¨ç©ºé—´çš„æ•°æ®æ–‡ä»¶ä¸­ã€‚è¿™ç§ &lt;strong&gt;â€œå…ˆå†™æ—¥å¿—â€&lt;/strong&gt; çš„æœºåˆ¶æ˜¯ä¿è¯å´©æºƒæ¢å¤èƒ½æ­£å¸¸å·¥ä½œçš„å…³é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-undo-log-çš„å­˜å‚¨ä½ç½®"&gt;ğŸ”„ Undo Log çš„å­˜å‚¨ä½ç½®
&lt;/h3&gt;&lt;p&gt;Undo Log ç”¨äºå®ç°äº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰&lt;/strong&gt;ã€‚å®ƒçš„å­˜å‚¨ä½ç½®ç»å†äº†æ¼”è¿›ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆé»˜è®¤åŠä¼ ç»Ÿæ–¹å¼ï¼‰&lt;/strong&gt;ï¼šåœ¨æ—©æœŸç‰ˆæœ¬æˆ–é»˜è®¤é…ç½®ä¸‹ï¼ŒUndo Log å­˜å‚¨åœ¨åä¸º &lt;code&gt;ibdata1&lt;/code&gt;çš„&lt;strong&gt;ç³»ç»Ÿè¡¨ç©ºé—´&lt;/strong&gt;æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªæ–‡ä»¶ä¹Ÿå­˜å‚¨äº†ä¸€äº›å…¶ä»–ç³»ç»Ÿä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹ Undo è¡¨ç©ºé—´ï¼ˆç°ä»£æ¨èæ–¹å¼ï¼‰&lt;/strong&gt;ï¼šä¸ºäº†æ›´å¥½ç®¡ç†å’Œå›æ”¶ Undo Log å ç”¨çš„ç©ºé—´ï¼Œç°ä»£ MySQL ç‰ˆæœ¬æ”¯æŒå°† Undo Log ä»ç³»ç»Ÿè¡¨ç©ºé—´ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå­˜æ”¾åœ¨ç‹¬ç«‹çš„ Undo è¡¨ç©ºé—´æ–‡ä»¶ä¸­ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å‘½åä¸º &lt;code&gt;undo_001&lt;/code&gt;ã€&lt;code&gt;undo_002&lt;/code&gt;ç­‰ï¼ŒåŒæ ·ä½äºæ•°æ®ç›®å½•ä¸‹ã€‚
&lt;ul&gt;
&lt;li&gt;é€šè¿‡è®¾ç½® &lt;code&gt;innodb_undo_tablespaces&lt;/code&gt;å‚æ•°å¯ä»¥å¯ç”¨å¹¶é…ç½®ç‹¬ç«‹ Undo è¡¨ç©ºé—´çš„æ•°ç›®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¦‚ä½•æŸ¥çœ‹ä¸é…ç½®"&gt;âš™ï¸ å¦‚ä½•æŸ¥çœ‹ä¸é…ç½®
&lt;/h3&gt;&lt;p&gt;ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ MySQL å‘½ä»¤æ¥æŸ¥çœ‹å’Œè°ƒæ•´è¿™äº›æ—¥å¿—çš„å­˜å‚¨è®¾ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ Redo Log é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW VARIABLES LIKE &amp;#39;innodb_log%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹å…³æ³¨ &lt;code&gt;innodb_log_group_home_dir&lt;/code&gt;ï¼ˆè·¯å¾„ï¼‰å’Œ &lt;code&gt;innodb_log_file_size&lt;/code&gt;ï¼ˆå•ä¸ªæ–‡ä»¶å¤§å°ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹ Undo Log é…ç½®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW VARIABLES LIKE &amp;#39;innodb_undo%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹å…³æ³¨ &lt;code&gt;innodb_undo_directory&lt;/code&gt;ï¼ˆç‹¬ç«‹Undoè¡¨ç©ºé—´è·¯å¾„ï¼‰å’Œ &lt;code&gt;innodb_undo_tablespaces&lt;/code&gt;ï¼ˆè¡¨ç©ºé—´æ•°é‡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å…³ç³»"&gt;ğŸ’ æ€»ç»“ä¸å…³ç³»
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥è¿™æ ·è®°å¿†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Redo Log&lt;/strong&gt; åƒæ˜¯é£æœºçš„&lt;strong&gt;é»‘åŒ£å­&lt;/strong&gt;ï¼Œç‹¬ç«‹å­˜åœ¨ï¼Œå¿ å®åœ°æŒ‰é¡ºåºè®°å½•æ‰€æœ‰æ“ä½œï¼Œç”¨äºç¾éš¾æ¢å¤ã€‚å®ƒå­˜æ”¾åœ¨&lt;strong&gt;ç‹¬ç«‹çš„ &lt;code&gt;ib_logfile&lt;/code&gt;ç³»åˆ—æ–‡ä»¶ä¸­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Undo Log&lt;/strong&gt; åƒæ˜¯æ–‡æ¡£ç¼–è¾‘æ—¶çš„&lt;strong&gt;æ’¤é”€å†å²&lt;/strong&gt;ã€‚ä¼ ç»Ÿä¸Šå®ƒå’Œç³»ç»Ÿæ–‡ä»¶æ··åœ¨ä¸€èµ·ï¼ˆ&lt;code&gt;ibdata1&lt;/code&gt;ï¼‰ï¼Œä½†ç°åœ¨æ›´æ¨èä¸ºå®ƒå»ºç«‹ä¸€ä¸ªç‹¬ç«‹çš„â€œå­˜æ¡£å®¤â€ï¼ˆ&lt;strong&gt;ç‹¬ç«‹çš„Undoè¡¨ç©ºé—´&lt;/strong&gt;ï¼‰ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½æ¸…æ™°åœ°å‘Šè¯‰ä½ äº‹åŠ¡æ—¥å¿—åœ¨è¡¨ç©ºé—´ä¸­çš„â€œå®¶â€åœ¨å“ªé‡Œã€‚å¦‚æœä½ å¯¹æŸä¸€ç§æ—¥å¿—çš„æœºåˆ¶æˆ–é…ç½®ç»†èŠ‚æœ‰æ›´æ·±å…¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="order-by"&gt;Order by
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•æ’åºï¼ˆIndex Scanï¼‰&lt;/strong&gt;
å¦‚æœæŸ¥è¯¢çš„ORDER BYå­—æ®µä¸Šæœ‰é€‚åˆçš„ç´¢å¼•ï¼ŒMySQL å¯ä»¥ç›´æ¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§æ¥è¿”å›æ’åºç»“æœï¼Œè€Œæ— éœ€é¢å¤–çš„æ’åºæ“ä½œã€‚è¿™ç§æ–¹å¼æ•ˆç‡æœ€é«˜ï¼Œå› ä¸ºå®ƒé¿å…äº†é¢å¤–çš„å†…å­˜æˆ–ç£ç›˜æ’åºå¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶æ’åºï¼ˆFileSortï¼‰&lt;/strong&gt;
å½“æ— æ³•ä½¿ç”¨ç´¢å¼•è¿›è¡Œæ’åºæ—¶ï¼ŒMySQL ä¼šä½¿ç”¨æ–‡ä»¶æ’åºç®—æ³•ã€‚å¦‚æœæ•°æ®é‡è¾ƒå°ï¼Œæ’åºä¼šåœ¨å†…å­˜ä¸­å®Œæˆï¼›å¦‚æœæ•°æ®é‡è¾ƒå¤§ï¼Œè¶…è¿‡äº†ç³»ç»Ÿé…ç½®çš„å†…å­˜é™åˆ¶ï¼ˆå¦‚sort_buffer_sizeï¼‰ï¼Œåˆ™ä¼šå°†éƒ¨åˆ†æ•°æ®å†™å…¥ç£ç›˜ä¸´æ—¶æ–‡ä»¶ï¼Œç„¶åè¿›è¡Œå¤–éƒ¨æ’åºã€‚æ–‡ä»¶æ’åºå¯èƒ½ä¼šæ¶‰åŠå¤šæ¬¡ç£ç›˜ I/Oï¼Œå› æ­¤æ€§èƒ½ç›¸å¯¹è¾ƒä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé˜Ÿåˆ—æ’åºï¼ˆPriority Queue Sortï¼‰&lt;/strong&gt;
å¯¹äºæŸäº›ç‰¹å®šçš„æŸ¥è¯¢ï¼Œå¦‚å¸¦æœ‰LIMITçš„æŸ¥è¯¢ï¼ŒMySQL å¯èƒ½ä¼šä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆä¹Ÿç§°ä¸ºå †æ’åºï¼‰æ¥ä¼˜åŒ–æ’åºè¿‡ç¨‹ã€‚ä¼˜å…ˆé˜Ÿåˆ—æ’åºå¯ä»¥åœ¨æ•°æ®åˆ°è¾¾æ—¶åŠ¨æ€ç»´æŠ¤ä¸€ä¸ªæœ‰åºé˜Ÿåˆ—ï¼Œä»è€Œå‡å°‘æ’åºçš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ä¸»ä»å¤åˆ¶"&gt;ä¸»ä»å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶æ˜¯ä¸€é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒå…è®¸å°†ä¸€å°æ•°æ®åº“æœåŠ¡å™¨ï¼ˆä¸»åº“ï¼‰ä¸Šçš„æ•°æ®å˜æ›´ï¼ŒåŒæ­¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–æœåŠ¡å™¨ï¼ˆä»åº“ï¼‰ã€‚è¿™é¡¹æŠ€æœ¯æ˜¯æ„å»ºé«˜å¯ç”¨ã€é«˜æ€§èƒ½æ•°æ®åº“æ¶æ„çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒï¼Œä¸‹è¡¨æ¦‚æ‹¬äº†ä¸»ä»å¤åˆ¶å¸¦æ¥çš„ä¸»è¦ä»·å€¼ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒä»·å€¼&lt;/th&gt;
&lt;th&gt;å…·ä½“è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¯ç”¨ä¸å®¹ç¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åº“å‡ºç°æ•…éšœæ—¶ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡æ¢åˆ°ä»åº“ç»§ç»­æä¾›æœåŠ¡ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»å†™åˆ†ç¦»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åº“ä¸“æ³¨äºå¤„ç†å†™æ“ä½œï¼ˆå¢åˆ æ”¹ï¼‰ï¼Œä»åº“åˆ†æ‹…è¯»æ“ä½œï¼ˆæŸ¥è¯¢ï¼‰çš„å‹åŠ›ï¼Œæå‡ç³»ç»Ÿæ•´ä½“ååé‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»åº“ç›¸å½“äºä¸»åº“çš„ä¸€ä¸ªå®æ—¶çƒ­å¤‡ä»½ï¼Œä¸ºæ•°æ®å®‰å…¨å¢åŠ ä¸€å±‚ä¿éšœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ä»¥å°†å¤šä¸ªè¯»è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„ä»åº“ä¸Šï¼Œé¿å…å•å°æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶æ„æ‰©å±•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å¢åŠ ä»åº“ï¼Œå¯ä»¥è½»æ¾åœ°æ¨ªå‘æ‰©å±•ç³»ç»Ÿçš„è¯»èƒ½åŠ›ï¼Œä»¥åº”å¯¹ä¸æ–­å¢é•¿çš„ä¸šåŠ¡è®¿é—®é‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å·¥ä½œåŸç†-2"&gt;ğŸ”§ å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶çš„æœ¬è´¨æ˜¯&lt;strong&gt;å¼‚æ­¥å¤åˆ¶&lt;/strong&gt;ï¼Œå…¶æ ¸å¿ƒä¾èµ–äºä¸»åº“çš„&lt;strong&gt;äºŒè¿›åˆ¶æ—¥å¿—&lt;/strong&gt;ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥æ¸…æ™°åœ°åˆ†è§£ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åº“è®°å½•äºŒè¿›åˆ¶æ—¥å¿—&lt;/strong&gt;ï¼šæ¯å½“ä¸»åº“æ‰§è¡Œäº†ä¼šæ”¹å˜æ•°æ®çš„ SQL è¯­å¥ï¼ˆå¦‚ INSERT, UPDATE, DELETEï¼‰ï¼Œå®ƒä¼šå°†è¿™æ¡è¯­å¥ï¼ˆæˆ–è¯­å¥æ‰§è¡Œåçš„æ•°æ®è¡Œå˜åŒ–ï¼‰æŒ‰ç‰¹å®šæ ¼å¼ï¼ˆå¦‚ STATEMENT, ROW, MIXEDï¼‰è®°å½•åˆ°æœ¬åœ°çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“è·å–å¹¶ä¸­è½¬æ—¥å¿—&lt;/strong&gt;ï¼šä»åº“ä¸Šæœ‰ä¸€ä¸ª &lt;strong&gt;I/O çº¿ç¨‹&lt;/strong&gt;ï¼Œå®ƒä¼šè¿æ¥åˆ°ä¸»åº“ï¼Œè¯·æ±‚è¯»å–è‡ªæŸä¸ªä½ç½®ç‚¹ä¹‹åçš„äºŒè¿›åˆ¶æ—¥å¿—å†…å®¹ã€‚ä¸»åº“åˆ™æœ‰ä¸€ä¸ª &lt;strong&gt;Binlog Dump çº¿ç¨‹&lt;/strong&gt;ï¼Œè´Ÿè´£å°†æ—¥å¿—å†…å®¹å‘é€ç»™ä»åº“ã€‚ä»åº“çš„ I/O çº¿ç¨‹æ”¶åˆ°åï¼Œä¼šå°†æ—¥å¿—å†™å…¥æœ¬åœ°çš„&lt;strong&gt;ä¸­ç»§æ—¥å¿—&lt;/strong&gt;æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“é‡æ”¾ä¸­ç»§æ—¥å¿—&lt;/strong&gt;ï¼šä»åº“ä¸Šçš„å¦ä¸€ä¸ª &lt;strong&gt;SQL çº¿ç¨‹&lt;/strong&gt;ä¼šè¯»å–ä¸­ç»§æ—¥å¿—ä¸­çš„å†…å®¹ï¼Œå¹¶è§£ææˆ SQL è¯­å¥åœ¨ä»åº“ä¸Šé¡ºåºæ‰§è¡Œï¼Œä»è€Œä½¿å¾—ä»åº“çš„æ•°æ®ä¸ä¸»åº“ä¿æŒä¸€è‡´ã€‚æ‰§è¡Œå®Œæ¯•åï¼Œä¸­ç»§æ—¥å¿—é€šå¸¸ä¼šè¢«æ¸…ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é…ç½®æ­¥éª¤è¯¦è§£"&gt;ğŸ“ é…ç½®æ­¥éª¤è¯¦è§£
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä¸€ä¸»ä¸€ä»é…ç½®æµç¨‹ã€‚&lt;/p&gt;
&lt;h4 id="1-ä¸»åº“é…ç½®"&gt;1. ä¸»åº“é…ç½®
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼šç¼–è¾‘ä¸»åº“çš„ MySQL é…ç½®æ–‡ä»¶ï¼ˆå¦‚ &lt;code&gt;/etc/my.cnf&lt;/code&gt;ï¼‰ï¼Œç¡®ä¿åŒ…å«ä»¥ä¸‹å…³é”®è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[mysqld]
server-id = 1 # å¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½ä¸ä»åº“é‡å¤
log-bin = mysql-bin # å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—ï¼ŒæŒ‡å®šæ—¥å¿—æ–‡ä»¶å‰ç¼€
# binlog-ignore-db=mysql # ï¼ˆå¯é€‰ï¼‰å¿½ç•¥ä¸åŒæ­¥çš„æ•°æ®åº“
# binlog-do-db=your_db # ï¼ˆå¯é€‰ï¼‰æŒ‡å®šè¦åŒæ­¥çš„æ•°æ®åº“
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºå¤åˆ¶è´¦å·&lt;/strong&gt;ï¼šåœ¨ä¸»åº“ä¸Šåˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äºå¤åˆ¶çš„ç”¨æˆ·ï¼Œå¹¶æˆäºˆ &lt;code&gt;REPLICATION SLAVE&lt;/code&gt;æƒé™ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE USER &amp;#39;repl_user&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED BY &amp;#39;YourSecurePassword123!&amp;#39;;
GRANT REPLICATION SLAVE ON *.* TO &amp;#39;repl_user&amp;#39;@&amp;#39;%&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–äºŒè¿›åˆ¶æ—¥å¿—ä½ç½®&lt;/strong&gt;ï¼š&lt;strong&gt;æ­¤æ­¥éå¸¸å…³é”®&lt;/strong&gt;ã€‚è®°å½•ä¸‹å½“å‰äºŒè¿›åˆ¶æ—¥å¿—çš„æ–‡ä»¶åå’Œä½ç½®ç‚¹ï¼Œä»åº“å°†ä»è¿™ä¸ªç‚¹å¼€å§‹åŒæ­¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;FLUSH TABLES WITH READ LOCK; -- é”å®šè¡¨ï¼Œé˜²æ­¢æ•°æ®å˜åŒ–
SHOW MASTER STATUS; -- è®°å½• File å’Œ Position åˆ—çš„å€¼ï¼Œä¾‹å¦‚ File: mysql-bin.000001, Position: 154
UNLOCK TABLES; -- ç«‹å³è§£é”
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šå¦‚æœä¸»åº“å·²æœ‰æ•°æ®ï¼Œéœ€è¦å…ˆä½¿ç”¨ &lt;code&gt;mysqldump&lt;/code&gt;ç­‰å·¥å…·å°†æ•°æ®å…¨é‡å¤‡ä»½å¹¶å¯¼å…¥ä»åº“ï¼Œä»¥ç¡®ä¿ä¸»ä»åˆå§‹æ•°æ®ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ä»åº“é…ç½®"&gt;2. ä»åº“é…ç½®
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/strong&gt;ï¼šç¼–è¾‘ä»åº“çš„é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[mysqld]
server-id = 2 # å¿…é¡»å”¯ä¸€ï¼Œä¸ä¸»åº“ä¸åŒ
relay-log = mysql-relay-bin # ä¸­ç»§æ—¥å¿—æ–‡ä»¶å
read_only = ON # å»ºè®®è®¾ç½®ä¸ºåªè¯»ï¼Œé˜²æ­¢è¯¯å†™
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é…ç½®ä¸»åº“è¿æ¥ä¿¡æ¯&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œå‘Šè¯‰å®ƒä¸»åº“åœ¨å“ªé‡Œä»¥åŠä»å“ªé‡Œå¼€å§‹å¤åˆ¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CHANGE MASTER TO
MASTER_HOST=&amp;#39;ä¸»åº“çš„IPåœ°å€&amp;#39;,
MASTER_USER=&amp;#39;repl_user&amp;#39;,
MASTER_PASSWORD=&amp;#39;YourSecurePassword123!&amp;#39;,
MASTER_LOG_FILE=&amp;#39;mysql-bin.000001&amp;#39;, -- å¡«å†™ä¸»åº“ SHOW MASTER STATUS å¾—åˆ°çš„ File
MASTER_LOG_POS=154; -- å¡«å†™ä¸»åº“ SHOW MASTER STATUS å¾—åˆ°çš„ Position
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯åŠ¨å¤åˆ¶å¹¶æ£€æŸ¥çŠ¶æ€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;START SLAVE; -- MySQL 8.0.23+ ä¹Ÿå¯ä½¿ç”¨ START REPLICA
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ£€æŸ¥å¤åˆ¶çŠ¶æ€ï¼Œç¡®ä¿ä¸¤ä¸ªå…³é”®çº¿ç¨‹æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW SLAVE STATUS\G
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªå­—æ®µï¼Œå¿…é¡»å‡ä¸º &lt;code&gt;Yes&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Slave_IO_Running: Yes&lt;/code&gt;ï¼ˆI/O çº¿ç¨‹çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Slave_SQL_Running: Yes&lt;/code&gt;ï¼ˆSQL çº¿ç¨‹çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚æœå‡ºç° &lt;code&gt;No&lt;/code&gt;æˆ– &lt;code&gt;Connecting&lt;/code&gt;ï¼Œéœ€æ£€æŸ¥ &lt;code&gt;Last_IO_Error&lt;/code&gt;æˆ– &lt;code&gt;Last_SQL_Error&lt;/code&gt;å­—æ®µçš„é”™è¯¯ä¿¡æ¯è¿›è¡Œæ’æŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¿›é˜¶æ¦‚å¿µä¸å¸¸è§é—®é¢˜"&gt;âš ï¸ è¿›é˜¶æ¦‚å¿µä¸å¸¸è§é—®é¢˜
&lt;/h3&gt;&lt;h4 id="å¤åˆ¶æ¨¡å¼"&gt;å¤åˆ¶æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶æ”¯æŒä¸åŒçš„æ—¥å¿—æ ¼å¼ï¼Œå¯¹åº”ä¸åŒçš„å¤åˆ¶æ¨¡å¼ï¼Œå„æœ‰ä¼˜åŠ£ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¨¡å¼&lt;/th&gt;
&lt;th&gt;åŸç†&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­å¥å¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®°å½•æ‰§è¡Œçš„ SQL è¯­å¥&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å°ï¼ŒèŠ‚çœç©ºé—´&lt;/td&gt;
&lt;td&gt;å¯èƒ½å› ä½¿ç”¨éç¡®å®šæ€§å‡½æ•°ï¼ˆå¦‚ &lt;code&gt;NOW()&lt;/code&gt;ï¼‰å¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡Œå¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®°å½•æ¯è¡Œæ•°æ®çš„å®é™…å˜åŒ–&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¸€è‡´æ€§é«˜ï¼Œæ˜¯é»˜è®¤æ¨èæ¨¡å¼&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å¯èƒ½éå¸¸å¤§ï¼ˆå¦‚æ‰¹é‡æ›´æ–°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ··åˆå¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”± MySQL è‡ªåŠ¨é€‰æ‹©ä½¿ç”¨è¯­å¥æˆ–è¡Œæ¨¡å¼&lt;/td&gt;
&lt;td&gt;å…¼é¡¾æ•ˆç‡ä¸ä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;é€»è¾‘ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="ä¸»ä»å»¶è¿Ÿ"&gt;ä¸»ä»å»¶è¿Ÿ
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œè¡¨ç°ä¸ºä»åº“æ•°æ®è½åäºä¸»åº“ã€‚ä¸»è¦åŸå› å’Œè§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå»¶è¿Ÿ&lt;/strong&gt;ï¼šä¼˜åŒ–ä¸»ä»åº“ä¹‹é—´çš„ç½‘ç»œè´¨é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“ç¡¬ä»¶æ€§èƒ½å·®&lt;/strong&gt;ï¼šæå‡ä»åº“çš„ç¡¬ä»¶é…ç½®ï¼ˆç‰¹åˆ«æ˜¯ CPU å’Œç£ç›˜ I/Oï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤§äº‹åŠ¡&lt;/strong&gt;ï¼šé¿å…åœ¨ä¸»åº“ä¸Šä¸€æ¬¡æ€§æ‰§è¡Œè€—æ—¶è¿‡é•¿ã€æ¶‰åŠæ•°æ®é‡è¿‡å¤§çš„äº‹åŠ¡ï¼Œå¯å°è¯•æ‹†åˆ†ä¸ºå°äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“å‹åŠ›è¿‡å¤§&lt;/strong&gt;ï¼šå•ä¸€ä»åº“è¯»è¯·æ±‚è¿‡å¤šä¼šå¯¼è‡´ SQL çº¿ç¨‹åº”ç”¨æ—¥å¿—å˜æ…¢ã€‚å¯ä»¥è€ƒè™‘&lt;strong&gt;ä¸€ä¸»å¤šä»&lt;/strong&gt;æ¶æ„ï¼Œåˆ†æ•£è¯»å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŠåŒæ­¥å¤åˆ¶"&gt;åŠåŒæ­¥å¤åˆ¶
&lt;/h4&gt;&lt;p&gt;é»˜è®¤çš„å¼‚æ­¥å¤åˆ¶ä¸ä¿è¯ä¸»åº“çš„äº‹åŠ¡åœ¨ä»åº“ä¸Šä¸€å®šè¢«æ¥æ”¶ã€‚&lt;strong&gt;åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt; æä¾›äº†æ›´å¼ºçš„æ•°æ®ä¸€è‡´æ€§ä¿è¯ï¼šä¸»åº“åœ¨æ‰§è¡Œå®Œä¸€ä¸ªäº‹åŠ¡åï¼Œ&lt;strong&gt;å¿…é¡»ç­‰å¾…è‡³å°‘ä¸€ä¸ªä»åº“æ¥æ”¶å¹¶å†™å…¥å…¶ä¸­ç»§æ—¥å¿—å&lt;/strong&gt;ï¼Œæ‰è¿”å›ç»“æœç»™å®¢æˆ·ç«¯ã€‚è¿™æœ‰æ•ˆé™ä½äº†ä¸»åº“æ•…éšœæ—¶æ•°æ®ä¸¢å¤±çš„é£é™©ï¼Œä½†ä¼šç¨å¾®å¢åŠ ä¸»åº“çš„å“åº”æ—¶é—´ã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL ä¸»ä»å¤åˆ¶æ˜¯ä¸€é¡¹å¼ºå¤§è€Œçµæ´»çš„æŠ€æœ¯ï¼Œæ˜¯å®ç°æ•°æ®åº“é«˜å¯ç”¨ã€è¯»å†™åˆ†ç¦»å’Œè´Ÿè½½å‡è¡¡çš„åŸºç¡€ã€‚ç†è§£å…¶å·¥ä½œåŸç†ã€ç†Ÿç»ƒæŒæ¡é…ç½®æµç¨‹ï¼Œå¹¶èƒ½å¤Ÿåº”å¯¹å¸¸è§çš„å»¶è¿Ÿç­‰é—®é¢˜ï¼Œå¯¹äºæ„å»ºç¨³å®šå¯é çš„æ•°æ®åº“ç³»ç»Ÿè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL ä¸»ä»å¤åˆ¶ã€‚å¦‚æœä½ åœ¨å…·ä½“çš„é…ç½®æˆ–é—®é¢˜æ’æŸ¥ä¸­é‡åˆ°å›°éš¾ï¼Œæ¬¢è¿éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="å¤åˆ¶èµ·ç‚¹"&gt;å¤åˆ¶èµ·ç‚¹
&lt;/h2&gt;&lt;p&gt;å…³äº MySQL ä¸»ä»å¤åˆ¶ä¸­ binlog çš„å¤åˆ¶èµ·ç‚¹å’Œä¿ç•™é—®é¢˜ï¼Œç®€å•æ¥è¯´ï¼š&lt;strong&gt;å¤åˆ¶ä¸ä¸€å®šéœ€è¦ä»å¤´å¼€å§‹ï¼Œå¹¶ä¸” binlog ä¹Ÿç»ä¸ä¼šæ°¸ä¹…ä¿ç•™&lt;/strong&gt;ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½è®©ä½ å¿«é€ŸæŠ“ä½æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒé—®é¢˜&lt;/th&gt;
&lt;th&gt;ç®€çŸ­å›ç­”&lt;/th&gt;
&lt;th&gt;å…³é”®æœºåˆ¶ä¸å½±å“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦éœ€è¦ä»å¤´å¤åˆ¶ï¼Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸éœ€è¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;å‚æ•°æŒ‡å®šç²¾ç¡®çš„èµ·å§‹ç‚¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Binlog ä¼šæ°¸è¿œä¿ç•™å—ï¼Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸ä¼š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯é€šè¿‡ &lt;code&gt;expire_logs_days&lt;/code&gt;ï¼ˆæŒ‰å¤©æ•°ï¼‰æˆ– &lt;code&gt;binlog_expire_logs_seconds&lt;/code&gt;ï¼ˆæŒ‰ç§’æ•°ï¼ŒMySQL 8.0+ï¼‰å‚æ•°è®¾ç½®è‡ªåŠ¨è¿‡æœŸæ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•çµæ´»é€‰æ‹©å¤åˆ¶èµ·ç‚¹"&gt;ğŸ’¡ å¦‚ä½•çµæ´»é€‰æ‹©å¤åˆ¶èµ·ç‚¹
&lt;/h3&gt;&lt;p&gt;ä¸»ä»å¤åˆ¶å¹¶éæ€»æ˜¯ä»ç¬¬ä¸€ä¸ª binlog æ–‡ä»¶å¼€å§‹åŒæ­¥ã€‚ä½ å¯ä»¥æ ¹æ®è¿ç»´éœ€æ±‚ï¼Œè®©ä»åº“ä»æŸä¸ªç‰¹å®šçš„æ—¶é—´ç‚¹æˆ–ä½ç½®å¼€å§‹å¤åˆ¶ï¼Œè¿™åœ¨éœ€è¦æ–°å¢ä»åº“æˆ–è¿›è¡Œæ•°æ®æ¢å¤æ—¶éå¸¸å®ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤æƒ…å†µ&lt;/strong&gt;ï¼šå¦‚æœåœ¨é…ç½®ä»åº“æ—¶&lt;strong&gt;ä¸æŒ‡å®š&lt;/strong&gt;èµ·å§‹ç‚¹ï¼Œä»åº“ä¼šå°è¯•ä»ä¸»åº“å½“å‰æ­£åœ¨å†™å…¥çš„æœ€æ–°ä¸€ä¸ª binlog æ–‡ä»¶çš„&lt;strong&gt;å¼€å¤´&lt;/strong&gt;è¿›è¡Œè¯»å–ã€‚ä½†è¿™é€šå¸¸ä»…é€‚ç”¨äºä¸€ä¸ªå…¨æ–°çš„ã€æ²¡æœ‰ä»»ä½•æ•°æ®çš„ä¸»ä»ç¯å¢ƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‡å®šä½ç½®å¤åˆ¶&lt;/strong&gt;ï¼šæ›´å¸¸è§çš„åšæ³•æ˜¯ï¼Œé€šè¿‡ &lt;code&gt;CHANGE MASTER TO&lt;/code&gt;å‘½ä»¤ä¸­çš„ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;å‚æ•°ï¼Œæ˜ç¡®å‘ŠçŸ¥ä»åº“åº”è¯¥ä»å“ªä¸ª binlog æ–‡ä»¶çš„å“ªä¸ªä½ç½®å¼€å§‹å¤åˆ¶ã€‚è¿™ä¸ªä½ç½®ä¿¡æ¯é€šå¸¸å¯ä»¥é€šè¿‡ &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;å‘½ä»¤è·å–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®è·µåœºæ™¯&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œåœ¨ä¸ºè¿è¡Œä¸­çš„ä¸»åº“æ–°å¢ä¸€ä¸ªä»åº“æ—¶ï¼Œæ ‡å‡†çš„åšæ³•æ˜¯ï¼š
&lt;ol&gt;
&lt;li&gt;å¯¹ä¸»åº“è¿›è¡Œ&lt;strong&gt;é”è¡¨&lt;/strong&gt;æˆ–ä½¿ç”¨&lt;strong&gt;ä¸åœæœºçš„å¤‡ä»½å·¥å…·&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;mysqldump&lt;/code&gt;é…åˆ &lt;code&gt;--master-data&lt;/code&gt;å‚æ•°ï¼‰æ¥è·å–ä¸€ä»½æ•°æ®ä¸€è‡´æ€§å¿«ç…§ã€‚&lt;/li&gt;
&lt;li&gt;å°†è¿™ä»½å¿«ç…§æ¢å¤åˆ°ä»åº“ã€‚&lt;/li&gt;
&lt;li&gt;ä»å¿«ç…§ä¸­åŒ…å«çš„ä¿¡æ¯æˆ–é€šè¿‡ &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;è·å–åˆ°çš„ binlog ä½ç½®ï¼Œæ¥é…ç½®ä»åº“çš„å¤åˆ¶èµ·ç‚¹ã€‚è¿™æ ·ï¼Œä»åº“å°±ä¼šä»å¿«ç…§å¯¹åº”çš„é‚£ä¸ªæ—¶é—´ç‚¹å¼€å§‹åŒæ­¥ä¸»åº“ä¹‹åçš„æ–°æ•°æ®ï¼Œè€Œæ— éœ€é‡æ”¾æ‰€æœ‰å†å² binlogã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-binlog-çš„ä¿ç•™ç­–ç•¥ä¸æ¸…ç†"&gt;ğŸ—‘ï¸ Binlog çš„ä¿ç•™ç­–ç•¥ä¸æ¸…ç†
&lt;/h3&gt;&lt;p&gt;MySQL ä¸ä¼šæ— é™æœŸåœ°ä¿å­˜ binlog æ–‡ä»¶ï¼Œå¦åˆ™ç£ç›˜ç©ºé—´è¿Ÿæ—©ä¼šè¢«è€—å°½ã€‚ä½ éœ€è¦ä¸»åŠ¨é…ç½®ä¿ç•™ç­–ç•¥æ¥æ§åˆ¶ binlog çš„ç”Ÿå‘½å‘¨æœŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æ¸…ç†æœºåˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯ç®¡ç† binlog çš„ä¸»è¦æ–¹å¼ã€‚é€šè¿‡è®¾ç½® &lt;code&gt;expire_logs_days&lt;/code&gt;ï¼ˆä¾‹å¦‚è®¾ä¸º &lt;code&gt;7&lt;/code&gt;è¡¨ç¤ºä¿ç•™7å¤©ï¼‰æˆ–æ›´ç²¾ç¡®çš„ &lt;code&gt;binlog_expire_logs_seconds&lt;/code&gt;ï¼ˆMySQL 8.0+ï¼‰ï¼ŒMySQL ä¼šè‡ªåŠ¨åˆ é™¤è¶…è¿‡æŒ‡å®šæ—¶é—´çš„æ—§ binlog æ–‡ä»¶ã€‚&lt;strong&gt;é‡è¦æç¤º&lt;/strong&gt;ï¼šåœ¨è®¾ç½®è‡ªåŠ¨æ¸…ç†å‰ï¼Œå¿…é¡»ç¡®ä¿æ‰€æœ‰ä»åº“éƒ½å·²ç»æˆåŠŸè¯»å–å¹¶åº”ç”¨äº†è¿™äº›å³å°†è¢«æ¸…ç†çš„ binlogï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸»ä»å¤åˆ¶å› æ‰¾ä¸åˆ°æ–‡ä»¶è€Œä¸­æ–­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨æ¸…ç†&lt;/strong&gt;ï¼šä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;PURGE BINARY LOGS&lt;/code&gt;å‘½ä»¤æ‰‹åŠ¨åˆ é™¤ç‰¹å®šæ—¶é—´ç‚¹æˆ–ç‰¹å®šæ–‡ä»¶ä¹‹å‰çš„ binlogã€‚è¿™åœ¨éœ€è¦è¿›è¡Œä¸€æ¬¡æ€§ç£ç›˜ç©ºé—´æ¸…ç†æ—¶éå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è®¾ç½®ä¿ç•™ç­–ç•¥çš„é£é™©&lt;/strong&gt;ï¼šå¦‚æœæœªé…ç½® binlog è¿‡æœŸæ—¶é—´ï¼Œbinlog æ–‡ä»¶å°†ä¸æ–­ç´¯ç§¯ï¼Œæœ€ç»ˆå¯èƒ½å æ»¡ç£ç›˜ç©ºé—´ï¼Œå¯¼è‡´æ•°æ®åº“æœåŠ¡ä¸å¯ç”¨ï¼Œå¹¶å¼•å‘ä¸»ä»å¤åˆ¶ä¸­æ–­å’Œæ•°æ®æ¢å¤å›°éš¾ç­‰é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-ç»™ä½ çš„å®è·µå»ºè®®"&gt;ğŸ”§ ç»™ä½ çš„å®è·µå»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆç†è§„åˆ’ä¿ç•™å‘¨æœŸ&lt;/strong&gt;ï¼šæ ¹æ®ä½ çš„ä¸šåŠ¡å¯¹æ•°æ®æ¢å¤çš„éœ€æ±‚ï¼ˆä¾‹å¦‚ï¼Œæœ€å¤šå…è®¸æ¢å¤å¤šä¹…ä¹‹å‰çš„æ•°æ®ï¼‰å’Œç£ç›˜ç©ºé—´å¤§å°ï¼Œè®¾ç½®ä¸€ä¸ªåˆç†çš„ binlog ä¿ç•™æ—¶é—´ã€‚é€šå¸¸å»ºè®®ä¿ç•™ &lt;strong&gt;7 åˆ° 30 å¤©&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å¤åˆ¶çŠ¶æ€&lt;/strong&gt;ï¼šå®šæœŸæ‰§è¡Œ &lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt;å‘½ä»¤ï¼Œæ£€æŸ¥ &lt;code&gt;Slave_IO_Running&lt;/code&gt;å’Œ &lt;code&gt;Slave_SQL_Running&lt;/code&gt;æ˜¯å¦ä¸º &lt;code&gt;Yes&lt;/code&gt;ï¼Œä»¥åŠ &lt;code&gt;Seconds_Behind_Master&lt;/code&gt;çš„å»¶è¿Ÿæƒ…å†µï¼Œç¡®ä¿ä¸»ä»åŒæ­¥å¥åº·è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ç£ç›˜ç©ºé—´&lt;/strong&gt;ï¼šç¡®ä¿å­˜æ”¾ binlog çš„ç£ç›˜åˆ†åŒºæœ‰è¶³å¤Ÿçš„å‰©ä½™ç©ºé—´ï¼Œé¿å…å›  binlog å¢é•¿å¯¼è‡´ç£ç›˜å†™æ»¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç† MySQL ä¸»ä»å¤åˆ¶ç¯å¢ƒã€‚å¦‚æœä½ åœ¨å…·ä½“çš„é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå¯ä»¥éšæ—¶æå‡ºã€‚&lt;/p&gt;
&lt;h2 id="åŠè·¯å¤åˆ¶"&gt;åŠè·¯å¤åˆ¶
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸»ä»å¤åˆ¶ä¸­ï¼Œä¸ä»å¤´å¼€å§‹å¤åˆ¶ï¼ˆå³ä»æŸä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹æˆ–ä½ç½®å¼€å§‹åŒæ­¥ï¼‰æ˜¯å¸¸è§çš„è¿ç»´éœ€æ±‚ã€‚è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œæ ¸å¿ƒåœ¨äº&lt;strong&gt;ç²¾ç¡®é”å®šä¸€ä¸ªå…¨å±€ä¸€è‡´æ€§çš„åŒæ­¥èµ·ç‚¹ï¼Œå¹¶ç¡®ä¿ä»è¯¥ç‚¹ä¹‹åçš„æ‰€æœ‰å˜æ›´éƒ½èƒ½è¢«å®Œæ•´ä¸”æœ‰åºåœ°åº”ç”¨åˆ°ä»åº“&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶"&gt;ğŸ”§ ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæœºåˆ¶
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¨è²Œï¼Œä¸‹è¡¨æ€»ç»“äº†å®ç°è¿™ä¸€ç›®æ ‡çš„å…³é”®æœºåˆ¶åŠå…¶ä½œç”¨ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¸å¿ƒæœºåˆ¶&lt;/th&gt;
&lt;th&gt;å®ç°æ–¹å¼&lt;/th&gt;
&lt;th&gt;å¯¹æ•°æ®ä¸€è‡´æ€§çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;GTID&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºæ¯ä¸ªäº‹åŠ¡åˆ†é…å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç²¾ç¡®å®šä½&lt;/strong&gt;ï¼šä»æ ¹æœ¬ä¸Šé¿å…å› æŒ‡å®šé”™è¯¯çš„æ—¥å¿—æ–‡ä»¶å’Œä½ç½®ç‚¹å¯¼è‡´çš„æ•°æ®é”™ä¹± ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§å¤‡ä»½ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;mysqldump --master-data=2&lt;/code&gt;æˆ– &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;è®°å½•å¤‡ä»½æ—¶åˆ»çš„ç²¾ç¡®ä½ç‚¹&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¡®ç«‹åŸºçº¿&lt;/strong&gt;ï¼šç¡®ä¿ä»åº“æ¢å¤çš„åŸºçº¿æ•°æ®ä¸ä¸»åº“åœ¨æŸä¸ª&lt;strong&gt;ç¡®åˆ‡æ—¶é—´ç‚¹&lt;/strong&gt;çš„çŠ¶æ€å®Œå…¨ä¸€è‡´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸»åº“æäº¤äº‹åŠ¡åéœ€ç­‰å¾…è‡³å°‘ä¸€ä¸ªä»åº“æ¥æ”¶å¹¶ç¡®è®¤&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å‡å°‘æ•°æ®ä¸¢å¤±é£é™©&lt;/strong&gt;ï¼šç¡®ä¿äº‹åŠ¡åœ¨è‡³å°‘ä¸¤ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œå¤§å¹…é™ä½ä¸»åº“å®•æœºæ—¶çš„æ•°æ®ä¸¢å¤±é£é™© ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤åˆ¶ç›‘æ§ä¸é”™è¯¯å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;SHOW SLAVE STATUS&lt;/code&gt;å‘½ä»¤ç›‘æ§çŠ¶æ€ï¼Œå¤„ç† &lt;code&gt;Last_SQL_Error&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠæ—¶å‘ç°ä¸ä¿®å¤&lt;/strong&gt;ï¼šå½“SQLçº¿ç¨‹åº”ç”¨æ—¥å¿—å‡ºé”™æ—¶èƒ½åŠæ—¶å¹²é¢„ï¼Œé˜²æ­¢å¤åˆ¶ä¸­æ–­å’Œæ•°æ®é•¿æœŸä¸ä¸€è‡´ ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®æ“ä½œæµç¨‹"&gt;ğŸ’¡ å…³é”®æ“ä½œæµç¨‹
&lt;/h3&gt;&lt;p&gt;åœ¨å®é™…æ“ä½œä¸­ï¼Œæœ€å…³é”®çš„ä¸€æ­¥æ˜¯ä¸ºä»åº“è®¾å®šä¸€ä¸ªæ­£ç¡®çš„å¤åˆ¶èµ·ç‚¹ã€‚ä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº†ä¸ºè¿è¡Œä¸­çš„ä¸»åº“æ–°å¢ä¸€ä¸ªä»åº“æ—¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§çš„æ ‡å‡†æ“ä½œæµç¨‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[å¯¹ä¸»åº“è¿›è¡Œé”è¡¨æˆ–ä½¿ç”¨&amp;lt;br&amp;gt;ä¸åœæœºå¤‡ä»½å·¥å…·] --&amp;gt; B[è·å–æ•°æ®ä¸€è‡´æ€§å¿«ç…§&amp;lt;br&amp;gt;å¹¶è®°å½•åŒæ­¥ä½ç‚¹]
B --&amp;gt; C[å°†å¿«ç…§æ¢å¤åˆ°ä»åº“]
C --&amp;gt; D[åœ¨ä»åº“é…ç½®å¤åˆ¶&amp;lt;br&amp;gt;æŒ‡å®šè®°å½•çš„åŒæ­¥ä½ç‚¹]
D --&amp;gt; E[å¯åŠ¨ä»åº“å¤åˆ¶]
E --&amp;gt; F{ç›‘æ§å¤åˆ¶çŠ¶æ€&amp;lt;br&amp;gt;æ£€æŸ¥ Slave_IO/SQL_Running}
F -- å‡ä¸º Yes --&amp;gt; G[æ•°æ®åŒæ­¥ä¸­ï¼Œä¿æŒç›‘æ§]
F -- å‡ºç° Error --&amp;gt; H[æ ¹æ®é”™è¯¯ä¿¡æ¯å¹²é¢„ä¿®å¤]
G --&amp;gt; I[Seconds_Behind_Master è¶‹è¿‘äº 0]
I --&amp;gt; J[ä¸»ä»æ•°æ®è¾¾åˆ°ä¸€è‡´çŠ¶æ€]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæµç¨‹çš„æˆåŠŸï¼Œä¾èµ–äºå‡ ä¸ªå…³é”®æ­¥éª¤çš„å‡†ç¡®æ‰§è¡Œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ç«‹ä¸€è‡´æ€§å¿«ç…§ç‚¹&lt;/strong&gt;ï¼šè¿™æ˜¯æ•´ä¸ªæµç¨‹çš„åŸºçŸ³ã€‚ä½ éœ€è¦ä½¿ç”¨ &lt;code&gt;FLUSH TABLES WITH READ LOCK&lt;/code&gt;å¯¹ä¸»åº“åŠ è¯»é”ï¼Œç„¶åç«‹å³æ‰§è¡Œ &lt;code&gt;SHOW MASTER STATUS&lt;/code&gt;è®°å½•ä¸‹å½“å‰çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶åå’Œä½ç½®ç‚¹ï¼ˆFile å’Œ Positionï¼‰ã€‚è¿™ä¸ªä½ç½®ç‚¹å°±æ˜¯ä½ åç»­å¼€å§‹å¤åˆ¶çš„ç²¾ç¡®èµ·ç‚¹ ã€‚æˆ–è€…ï¼Œä½¿ç”¨å¸¦æœ‰ &lt;code&gt;--single-transaction&lt;/code&gt;å’Œ &lt;code&gt;--master-data=2&lt;/code&gt;å‚æ•°çš„ &lt;code&gt;mysqldump&lt;/code&gt;å‘½ä»¤ï¼Œå®ƒèƒ½åœ¨ä¸å½±å“ä¸»åº“å†™å…¥çš„æƒ…å†µä¸‹ï¼Œè·å–ä¸€ä¸ªä¸€è‡´æ€§çš„æ•°æ®å¿«ç…§å¹¶è‡ªåŠ¨åœ¨å¤‡ä»½æ–‡ä»¶ä¸­è®°å½•åŒæ­¥ä½ç‚¹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç²¾å‡†é…ç½®å¤åˆ¶èµ·ç‚¹&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;CHANGE MASTER TO&lt;/code&gt;å‘½ä»¤æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼ä½¿ç”¨ç¬¬ä¸€æ­¥ä¸­è®°å½•çš„ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;ã€‚å¦‚æœä¸»ä»åº“éƒ½æ”¯æŒGTIDï¼Œä½¿ç”¨ &lt;code&gt;MASTER_AUTO_POSITION=1&lt;/code&gt;æ˜¯æ›´ç®€å•å¯é çš„æ–¹å¼ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨å®šä½ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¿éšœä¸€è‡´æ€§çš„è¿›é˜¶ç­–ç•¥"&gt;ğŸ›¡ï¸ ä¿éšœä¸€è‡´æ€§çš„è¿›é˜¶ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;é™¤äº†åŸºæœ¬æ“ä½œï¼Œè¿˜æœ‰ä¸€äº›ç­–ç•¥å¯ä»¥è¿›ä¸€æ­¥å¢å¼ºæ•°æ®ä¸€è‡´æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯å¯¹æ•°æ®å®‰å…¨æ€§çš„ä¸€ä¸ªæ˜¾è‘—æå‡ã€‚åœ¨å¼‚æ­¥å¤åˆ¶ä¸­ï¼Œä¸»åº“æäº¤äº‹åŠ¡åç«‹å³è¿”å›ï¼Œä¸å…³å¿ƒä»åº“æ˜¯å¦æ”¶åˆ°ã€‚è€ŒåŠåŒæ­¥å¤åˆ¶è¦æ±‚ä¸»åº“å¿…é¡»æ”¶åˆ°è‡³å°‘ä¸€ä¸ªä»åº“çš„ç¡®è®¤åï¼Œæ‰è®¤ä¸ºäº‹åŠ¡æäº¤æˆåŠŸã€‚è¿™è™½ç„¶ä¼šè½»å¾®å¢åŠ å“åº”æ—¶é—´ï¼Œä½†æå¤§åœ°ä¿è¯äº†æ•°æ®çš„å¯é æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…åœ¨ä»åº“è¿›è¡Œå†™æ“ä½œ&lt;/strong&gt;ï¼šåŠ¡å¿…ç¡®ä¿ä»åº“æ˜¯åªè¯»çš„ï¼ˆå¯é€šè¿‡è®¾ç½® &lt;code&gt;read_only = ON&lt;/code&gt;å®ç°ï¼‰ã€‚ä»»ä½•åœ¨ä»åº“ä¸Šçš„ç›´æ¥å†™å…¥éƒ½ä¼šç ´åä¸ä¸»åº“çš„æ•°æ®ä¸€è‡´æ€§ï¼Œå¯¼è‡´å¤åˆ¶é”™è¯¯ç”šè‡³ä¸­æ–­ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€ŸåŠ©ä¸“ä¸šå·¥å…·&lt;/strong&gt;ï¼šå¯¹äºå¤§è§„æ¨¡æˆ–è¦æ±‚æé«˜çš„ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ Percona Toolkit ç­‰å·¥å…·ä¸­çš„ &lt;code&gt;pt-table-checksum&lt;/code&gt;æ¥å®šæœŸæ ¡éªŒä¸»ä»æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¹¶ç”¨ &lt;code&gt;pt-table-sync&lt;/code&gt;æ¥ä¿®å¤å‘ç°çš„å·®å¼‚ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å¸¸è§é—®é¢˜ä¸å¤„ç†"&gt;âš ï¸ å¸¸è§é—®é¢˜ä¸å¤„ç†
&lt;/h3&gt;&lt;p&gt;å³ä½¿æµç¨‹æ­£ç¡®ï¼Œä¹Ÿå¯èƒ½é‡åˆ°é—®é¢˜ã€‚æœ€å¸¸è§çš„å¤åˆ¶é”™è¯¯æ˜¯ &lt;strong&gt;SQL çº¿ç¨‹ä¸­æ–­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šé€šå¸¸æ˜¯åœ¨ä»åº“ä¸Šåº”ç”¨ä¸­ç»§æ—¥å¿—æ—¶ï¼Œé‡åˆ°äº†ä¸»é”®å†²çªã€è®°å½•ä¸å­˜åœ¨ç­‰é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ’æŸ¥&lt;/strong&gt;ï¼šç«‹å³æ£€æŸ¥ &lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt;å‘½ä»¤è¾“å‡ºä¸­çš„ &lt;code&gt;Last_SQL_Error&lt;/code&gt;å­—æ®µï¼Œå®ƒä¼šæŒ‡æ˜é”™è¯¯åŸå› ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°¨æ…å¤„ç†&lt;/strong&gt;ï¼šä¼ ç»Ÿæ–¹æ³•æ˜¯ &lt;code&gt;SET GLOBAL sql_slave_skip_counter = 1&lt;/code&gt;è·³è¿‡ä¸€ä¸ªé”™è¯¯ã€‚ä½†è¿™å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼Œåº”&lt;strong&gt;æå…¶è°¨æ…&lt;/strong&gt;ä½¿ç”¨ã€‚æ›´æ¨èçš„åšæ³•æ˜¯ï¼šæ ¹æ®é”™è¯¯ä¿¡æ¯åˆ†ææ ¹æœ¬åŸå› ï¼Œç„¶åé€šè¿‡åœ¨ä»åº“ä¸Šæ‰‹åŠ¨æ’å…¥ç¼ºå¤±è®°å½•æˆ–åˆ é™¤å†²çªè®°å½•ç­‰æ–¹å¼è¿›è¡Œç²¾å‡†ä¿®å¤ï¼Œå†é‡å¯å¤åˆ¶ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œä¸ä»å¤´å¼€å§‹å¤åˆ¶æ—¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ç²¾é«“åœ¨äº &lt;strong&gt;â€œæ‰¾å‡†èµ·ç‚¹ï¼Œä¸¥å¯†ç›‘æ§ï¼ŒåŠæ—¶å¹²é¢„â€&lt;/strong&gt;ã€‚é€šè¿‡GTIDã€ä¸€è‡´æ€§å¤‡ä»½ç‚¹ç­‰æœºåˆ¶ç²¾ç¡®åŒæ­¥ï¼Œå†ç»“åˆåŠåŒæ­¥å¤åˆ¶ç­‰ç­–ç•¥åŠ å¼ºä¿éšœï¼Œä½ å°±èƒ½æ„å»ºä¸€ä¸ªæ—¢é«˜æ•ˆåˆå¯é çš„MySQLä¸»ä»ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ é¡ºåˆ©å®Œæˆä¸»ä»é…ç½®ã€‚å¦‚æœä½ åœ¨å…·ä½“æ“ä½œä¸­é‡åˆ°æ›´ç»†è‡´çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="é»˜è®¤èµ·ç‚¹"&gt;é»˜è®¤èµ·ç‚¹
&lt;/h2&gt;&lt;p&gt;æ‚¨æå‡ºçš„è¿™ä¸ªé—®é¢˜éå¸¸å…³é”®ï¼Œç¡®å®ç‚¹å‡ºäº†MySQLä¸»ä»å¤åˆ¶é…ç½®ä¸­ä¸€ä¸ªå¸¸è§çš„è¯¯åŒºã€‚æ‚¨è¯´å¾—å®Œå…¨æ­£ç¡®ï¼š&lt;strong&gt;å¦‚æœä¸»åº“å·²ç»è¿è¡Œäº†ä¸€æ®µæ—¶é—´å¹¶æœ‰æ•°æ®ï¼Œé‚£ä¹ˆåœ¨é…ç½®ä»åº“æ—¶ï¼Œä¸æŒ‡å®šèµ·å§‹ç‚¹è€Œä¾èµ–é»˜è®¤è¡Œä¸ºï¼Œæ˜¯ç»å¯¹æ— æ³•ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å¯¹æ¯”äº†è¿™ä¸¤ç§åœºæ™¯ï¼Œå¯ä»¥å¸®æ‚¨å¿«é€Ÿç†è§£å…¶ä¸­çš„æ ¸å¿ƒå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¨æ–°ä¸»ä»ç¯å¢ƒï¼ˆä¸»åº“æ— æ•°æ®ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¿è¡Œä¸­çš„ä¸»åº“æ–°å¢ä»åº“ï¼ˆä¸»åº“æœ‰æ•°æ®ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é»˜è®¤è¡Œä¸º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»æœ€æ–°binlogæ–‡ä»¶å¤´å¼€å§‹è¯»å–&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¿…ç„¶ä¸ä¸€è‡´&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— é£é™©ï¼ˆå› ä¸ºæ— å†å²æ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æé«˜é£é™©&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ­£ç¡®åšæ³•&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯ç›´æ¥é…ç½®ï¼Œé»˜è®¤è¡Œä¸ºå¯è¡Œ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¿…é¡»å»ºç«‹æ•°æ®ä¸€è‡´æ€§å¿«ç…§ç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä»€ä¹ˆé»˜è®¤è¡Œä¸ºä¼šå¯¼è‡´ä¸ä¸€è‡´"&gt;ğŸ’¡ ä¸ºä»€ä¹ˆé»˜è®¤è¡Œä¸ºä¼šå¯¼è‡´ä¸ä¸€è‡´ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªé—®é¢˜çš„æ ¹æºåœ¨äºï¼Œä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰æ˜¯ä¸€ä¸ª&lt;strong&gt;åªè¿½åŠ çš„ã€æŒ‰æ—¶é—´é¡ºåºè®°å½•&lt;/strong&gt;çš„æ—¥å¿—æ–‡ä»¶ã€‚å½“æ‚¨åœ¨ä¸€ä¸ªå·²ç»è¿è¡Œçš„ä¸»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;SHOW MASTER STATUS;&lt;/code&gt;æ—¶ï¼Œçœ‹åˆ°çš„ &lt;code&gt;Position&lt;/code&gt;æ˜¯å½“å‰æ—¥å¿—æ–‡ä»¶çš„&lt;strong&gt;æœ€æ–°å†™å…¥ä½ç½®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ­¤æ—¶ä¸æŒ‡å®šè¿™ä¸ªä½ç½®ï¼Œè€Œè®©ä»åº“ä»å½“å‰binlogæ–‡ä»¶çš„&lt;strong&gt;å¼€å¤´ï¼ˆPosition 0ï¼‰&lt;/strong&gt; å¼€å§‹è¯»å–ï¼Œé‚£ä¹ˆä»åº“ä¼šé”™è¿‡ä»æ–‡ä»¶å¼€å§‹åˆ°å½“å‰æœ€æ–°ä½ç½®ä¹‹é—´æ‰€æœ‰å·²ç»å‘ç”Ÿçš„æ•°æ®å˜æ›´ã€‚è¿™ä¼šå¯¼è‡´ä»åº“çš„æ•°æ®çŠ¶æ€è¿œè¿œè½åäºä¸»åº“ï¼Œä»è€Œå¼•å‘ä¸¥é‡çš„ä¸ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®æ“ä½œä»¥ä¿è¯ä¸€è‡´æ€§"&gt;ğŸ”§ å¦‚ä½•æ­£ç¡®æ“ä½œä»¥ä¿è¯ä¸€è‡´æ€§ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œæ ¸å¿ƒæ˜¯ä¸ºä»åº“çš„åŒæ­¥å»ºç«‹ä¸€ä¸ª&lt;strong&gt;ç²¾ç¡®çš„ã€ä¸ä¸»åº“å½“å‰æ•°æ®çŠ¶æ€å®Œå…¨å¯¹åº”çš„èµ·ç‚¹&lt;/strong&gt;ã€‚æ ‡å‡†æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ä¸»åº“è¿›è¡Œé”è¡¨æˆ–ä½¿ç”¨ä¸åœæœºå¤‡ä»½å·¥å…·&lt;/strong&gt;ï¼šè¿™æ˜¯ä¸ºäº†åœ¨è·å–åŒæ­¥èµ·ç‚¹çš„ç¬é—´ï¼Œä¸»åº“çš„æ•°æ®æ˜¯é™æ­¢çš„ï¼Œç¡®ä¿å¿«ç…§çš„ä¸€è‡´æ€§ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é”è¡¨æ–¹å¼&lt;/strong&gt;ï¼šåœ¨ä¸»åº“æ‰§è¡Œ &lt;code&gt;FLUSH TABLES WITH READ LOCK;&lt;/code&gt;ã€‚è¿™ä¼šé˜»æ­¢æ–°çš„å†™æ“ä½œï¼Œä½†è¯»æ“ä½œé€šå¸¸ä¸å—å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸åœæœºå·¥å…·&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;mysqldump&lt;/code&gt;é…åˆ &lt;code&gt;--single-transaction&lt;/code&gt;å‚æ•°ï¼ˆé’ˆå¯¹InnoDBè¡¨ï¼‰ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;Percona XtraBackup&lt;/code&gt;ç­‰ç‰©ç†å¤‡ä»½å·¥å…·ï¼Œå¯ä»¥åœ¨ä¸é•¿æ—¶é—´é”è¡¨çš„æƒ…å†µä¸‹è·å–ä¸€è‡´æ€§å¤‡ä»½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–æ•°æ®ä¸€è‡´æ€§å¿«ç…§å¹¶è®°å½•åŒæ­¥ä½ç‚¹&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚
&lt;ul&gt;
&lt;li&gt;åœ¨é”è¡¨æˆ–å¼€å§‹å¤‡ä»½åï¼Œç«‹å³åœ¨ä¸»åº“æ‰§è¡Œ &lt;code&gt;SHOW MASTER STATUS;&lt;/code&gt;ï¼Œå¹¶å‡†ç¡®è®°å½•ä¸‹ &lt;code&gt;File&lt;/code&gt;å’Œ &lt;code&gt;Position&lt;/code&gt;çš„å€¼ã€‚è¿™ä¸ªä½ç½®ç‚¹å°±æ˜¯æ‚¨ä¸»åº“æ•°æ®å¿«ç…§å¯¹åº”çš„ç²¾ç¡®é€»è¾‘ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°†å¿«ç…§æ¢å¤åˆ°ä»åº“&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;mysqldump&lt;/code&gt;å¯¼å‡ºçš„æ–‡ä»¶æˆ–ç‰©ç†å¤‡ä»½æ–‡ä»¶ï¼Œåœ¨ä»åº“ä¸Šå®Œæˆæ•°æ®æ¢å¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨ä»åº“é…ç½®å¤åˆ¶å¹¶æŒ‡å®šè®°å½•çš„åŒæ­¥ä½ç‚¹&lt;/strong&gt;ï¼šåœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;CHANGE MASTER TO&lt;/code&gt;å‘½ä»¤æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ç¬¬äºŒæ­¥ä¸­è®°å½•çš„ &lt;code&gt;MASTER_LOG_FILE&lt;/code&gt;å’Œ &lt;code&gt;MASTER_LOG_POS&lt;/code&gt;å‚æ•°ã€‚è¿™æ ·ï¼Œä»åº“å°±ä¼šä»ä¸»åº“æ•°æ®ä¸€è‡´çš„é‚£ä¸ªç²¾ç¡®ç‚¹å¼€å§‹åŒæ­¥åç»­çš„å¢é‡æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆgtid"&gt;ğŸš€ æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆï¼šGTID
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ä»æ ¹æœ¬ä¸Šè§£å†³æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶ä½ç½®å¯èƒ½å¸¦æ¥çš„é”™è¯¯å’Œå¤æ‚æ€§ï¼ŒMySQL 5.6åŠä»¥ä¸Šç‰ˆæœ¬å¼•å…¥äº†&lt;strong&gt;GTIDï¼ˆå…¨å±€äº‹åŠ¡æ ‡è¯†ç¬¦ï¼‰&lt;/strong&gt; å¤åˆ¶æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;ï¼šGTIDä¸ºæ¯ä¸ªæäº¤çš„äº‹åŠ¡åˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„IDï¼ˆæ ¼å¼ä¸º &lt;code&gt;server_uuid:transaction_id&lt;/code&gt;ï¼‰ã€‚ä»åº“ä¼šè®°å½•è‡ªå·±å·²ç»æ‰§è¡Œäº†å“ªäº›GTIDçš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚ä½•ä¿è¯ä¸€è‡´æ€§&lt;/strong&gt;ï¼šåœ¨é…ç½®ä»åº“æ—¶ï¼Œåªéœ€è®¾ç½® &lt;code&gt;MASTER_AUTO_POSITION = 1&lt;/code&gt;ã€‚ä»åº“ä¼šå‘Šè¯‰ä¸»åº“è‡ªå·±å·²ç»æ‰§è¡Œäº†å“ªäº›GTIDï¼Œä¸»åº“åˆ™ä¼šè‡ªåŠ¨å°†ä»åº“ç¼ºå¤±çš„äº‹åŠ¡å‘é€è¿‡æ¥ã€‚è¿™&lt;strong&gt;å®Œå…¨é¿å…äº†æ‰‹åŠ¨æŸ¥æ‰¾å’ŒæŒ‡å®š &lt;code&gt;File&lt;/code&gt;å’Œ &lt;code&gt;Position&lt;/code&gt;çš„éº»çƒ¦å’Œé£é™©&lt;/strong&gt;ï¼Œæå¤§åœ°ç®€åŒ–äº†è¿ç»´å¹¶å¢å¼ºäº†æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-13"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œæ‚¨çš„è´¨ç–‘æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚å¯¹äºå·²è¿è¡Œçš„ä¸»åº“ï¼Œ&lt;strong&gt;ç»ä¸èƒ½ä¾èµ–é»˜è®¤çš„å¤åˆ¶èµ·å§‹ç‚¹&lt;/strong&gt;ã€‚å¿…é¡»é€šè¿‡&lt;strong&gt;å»ºç«‹æ•°æ®ä¸€è‡´æ€§å¿«ç…§å¹¶è®°å½•å¯¹åº”çš„binlogä½ç½®&lt;/strong&gt;çš„æ–¹æ³•ï¼Œæˆ–è€…é‡‡ç”¨æ›´å…ˆè¿›çš„&lt;strong&gt;GTIDè‡ªåŠ¨å®šä½&lt;/strong&gt;æœºåˆ¶ï¼Œæ‰èƒ½ç¡®ä¿ä¸»ä»åº“çš„èµ·ç‚¹ä¸€è‡´ï¼Œè¿™æ˜¯å®ç°æ•°æ®åŒæ­¥çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šå½»åº•è§£å†³äº†æ‚¨çš„ç–‘é—®ï¼å¦‚æœæ‚¨å¯¹GTIDçš„å…·ä½“é…ç½®æˆ–å…¶å®ƒé«˜å¯ç”¨æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="varbinary"&gt;VARBINARY
&lt;/h2&gt;&lt;p&gt;VARBINARY æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®çš„å¯å˜é•¿åº¦æ•°æ®ç±»å‹ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€ŸæŠŠæ¡å®ƒçš„æ ¸å¿ƒç‰¹å¾ï¼Œå°¤å…¶æ˜¯ä¸å…¶å›ºå®šé•¿åº¦ç‰ˆæœ¬ &lt;code&gt;BINARY&lt;/code&gt;çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;VARBINARY&lt;/th&gt;
&lt;th&gt;BINARY&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç‰¹æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯å˜é•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å†…å®¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶å­—èŠ‚ä¸²&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶å­—èŠ‚ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®é™…æ•°æ®é•¿åº¦ + å°‘é‡é¢å¤–å¼€é”€ï¼ˆé€šå¸¸ä¸º2å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šä¸ºå®šä¹‰çš„é•¿åº¦ï¼ˆnå­—èŠ‚ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¡«å……æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸å¡«å……&lt;/td&gt;
&lt;td&gt;ä¸è¶³é•¿åº¦æ—¶åœ¨&lt;strong&gt;å³ä¾§&lt;/strong&gt;ç”¨ &lt;code&gt;0x00&lt;/code&gt;å¡«å……&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œå°¤å…¶é€‚ç”¨äºæ•°æ®é•¿åº¦å˜åŒ–å¤§çš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼Œå¯èƒ½å­˜åœ¨ç©ºé—´æµªè´¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯”è¾ƒæ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€å­—èŠ‚æ¯”è¾ƒ&lt;/strong&gt;ï¼ŒåŒºåˆ†å¤§å°å†™ï¼ˆ0x41 &amp;lsquo;A&amp;rsquo; â‰  0x61 &amp;lsquo;a&amp;rsquo;ï¼‰&lt;/td&gt;
&lt;td&gt;é€å­—èŠ‚æ¯”è¾ƒ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å“ˆå¸Œå€¼ã€åŠ å¯†æ•°æ®ã€æ–‡ä»¶ç­¾åã€UUIDç­‰é•¿åº¦å¯å˜æˆ–è¾ƒå¤§çš„äºŒè¿›åˆ¶æ•°æ®&lt;/td&gt;
&lt;td&gt;é•¿åº¦ä¸¥æ ¼å›ºå®šçš„äºŒè¿›åˆ¶ä»£ç æˆ–æ ‡è¯†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥äº†è§£-varbinary"&gt;ğŸ’¡ æ·±å…¥äº†è§£ VARBINARY
&lt;/h3&gt;&lt;h4 id="å­˜å‚¨ä¸é•¿åº¦ç®¡ç†"&gt;å­˜å‚¨ä¸é•¿åº¦ç®¡ç†
&lt;/h4&gt;&lt;p&gt;VARBINARY å±äºå¯å˜é•¿åº¦æ•°æ®ç±»å‹ã€‚ä½ å®šä¹‰çš„é•¿åº¦ &lt;code&gt;n&lt;/code&gt;è§„å®šäº†å®ƒæ‰€èƒ½å®¹çº³çš„&lt;strong&gt;æœ€å¤§å­—èŠ‚æ•°&lt;/strong&gt;ã€‚å®é™…çš„å­˜å‚¨ç©ºé—´æ¶ˆè€—æ˜¯â€œæ•°æ®çš„å®é™…é•¿åº¦ + 2å­—èŠ‚â€çš„é¢å¤–å¼€é”€ ã€‚å½“æ•°æ®é•¿åº¦å¯å˜æˆ–å¯èƒ½å¾ˆå¤§æ—¶ï¼Œè¿™ç§æœºåˆ¶èƒ½æœ‰æ•ˆèŠ‚çœå­˜å‚¨ç©ºé—´ ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå°è¯•æ’å…¥è¶…è¿‡æœ€å¤§é•¿åº¦ &lt;code&gt;n&lt;/code&gt;çš„æ•°æ®ï¼Œæ•°æ®åº“é€šå¸¸ä¼šæŠ¥é”™ï¼ˆå°¤å…¶åœ¨å¯ç”¨äº†ä¸¥æ ¼SQLæ¨¡å¼æ—¶ï¼‰æˆ–å¯¹æ•°æ®è¿›è¡Œæˆªæ–­ ã€‚&lt;/p&gt;
&lt;h4 id="æ¯”è¾ƒè§„åˆ™ä¸ç´¢å¼•"&gt;æ¯”è¾ƒè§„åˆ™ä¸ç´¢å¼•
&lt;/h4&gt;&lt;p&gt;VARBINARY çš„æ’åºå’Œæ¯”è¾ƒåŸºäºå­—èŠ‚çš„æ•°å€¼è¿›è¡Œ&lt;strong&gt;é€å­—èŠ‚æ¯”è¾ƒ&lt;/strong&gt; ã€‚å› æ­¤ï¼Œ&lt;code&gt;0x41&lt;/code&gt;ï¼ˆå¯¹åº”å­—ç¬¦&amp;rsquo;A&amp;rsquo;ï¼‰å’Œ&lt;code&gt;0x61&lt;/code&gt;ï¼ˆå¯¹åº”å­—ç¬¦&amp;rsquo;a&amp;rsquo;ï¼‰æ˜¯ä¸åŒçš„ã€‚å¦‚æœéœ€è¦å¯¹é•¿VARBINARYåˆ—åˆ›å»ºç´¢å¼•ï¼Œé€šå¸¸åªç´¢å¼•æ•°æ®çš„å‰é¢éƒ¨åˆ†ï¼ˆå¦‚å‰20å­—èŠ‚ï¼‰ä½œä¸ºå‰ç¼€ç´¢å¼•ï¼Œä»¥å¹³è¡¡æŸ¥è¯¢æ€§èƒ½å’Œå­˜å‚¨å¼€é”€ ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸»è¦åº”ç”¨åœºæ™¯-3"&gt;ğŸ”§ ä¸»è¦åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;p&gt;VARBINARY éå¸¸é€‚åˆå­˜å‚¨çº¯ç²¹çš„äºŒè¿›åˆ¶ä¿¡æ¯ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯†ç å“ˆå¸Œå€¼å­˜å‚¨&lt;/strong&gt;ï¼šåƒSHA-256ç”Ÿæˆçš„å“ˆå¸Œå€¼æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œä½¿ç”¨ &lt;code&gt;VARBINARY(64)&lt;/code&gt;å­˜å‚¨æ¯”æ–‡æœ¬æ ¼å¼æ›´é«˜æ•ˆã€æ›´å®‰å…¨ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UUIDå­˜å‚¨&lt;/strong&gt;ï¼šå°†UUIDå­—ç¬¦ä¸²ï¼ˆå¦‚&lt;code&gt;550e8400-e29b-41d4-a716-446655440000&lt;/code&gt;ï¼‰è½¬æ¢ä¸º16å­—èŠ‚çš„äºŒè¿›åˆ¶å½¢å¼å¹¶ç”¨ &lt;code&gt;VARBINARY(16)&lt;/code&gt;å­˜å‚¨ï¼Œæ¯”ç›´æ¥å­˜å‚¨36å­—ç¬¦çš„å­—ç¬¦ä¸²èŠ‚çœå¤§é‡ç©ºé—´ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡ä»¶ç­¾åæˆ–é­”æ•°&lt;/strong&gt;ï¼šè®¸å¤šæ–‡ä»¶æ ¼å¼æœ‰ç‰¹å®šçš„èµ·å§‹å­—èŠ‚ï¼ˆå¦‚PNGæ–‡ä»¶ä»¥ &lt;code&gt;0x89504E470D0A1A0A&lt;/code&gt;å¼€å¤´ï¼‰ï¼Œä½¿ç”¨VARBINARYå­˜å‚¨è¿™äº›ç­¾åä¾¿äºå¿«é€Ÿè¯†åˆ«æ–‡ä»¶ç±»å‹ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ å¯†æ•°æ®&lt;/strong&gt;ï¼šåŠ å¯†åçš„æ•°æ®æ˜¯äºŒè¿›åˆ¶æµï¼ŒVARBINARYæ˜¯è‡ªç„¶çš„å­˜å‚¨é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-8"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸å­—ç¬¦ç±»å‹çš„åŒºåˆ«&lt;/strong&gt;ï¼šåŠ¡å¿…åˆ†æ¸… &lt;code&gt;VARBINARY&lt;/code&gt;å’Œ &lt;code&gt;VARCHAR BINARY&lt;/code&gt;ï¼ˆæˆ– &lt;code&gt;CHAR BINARY&lt;/code&gt;ï¼‰ã€‚å‰è€…å­˜å‚¨çš„æ˜¯äºŒè¿›åˆ¶å­—èŠ‚ï¼Œæ— å­—ç¬¦é›†æ¦‚å¿µï¼›åè€…å­˜å‚¨çš„æ˜¯å­—ç¬¦å­—ç¬¦ä¸²ï¼Œä½†ä½¿ç”¨äºŒè¿›åˆ¶æ ¡å¯¹è§„åˆ™è¿›è¡Œæ¯”è¾ƒ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢ä¸å¡«å……&lt;/strong&gt;ï¼šå°†å­—ç¬¦ä¸²æˆ–å…¶ä»–æ•°æ®ç±»å‹è½¬æ¢ä¸ºVARBINARYæ—¶ï¼Œæ•°æ®åº“ä¼šæ‰§è¡Œå¡«å……æˆ–æˆªæ–­æ“ä½œã€‚è½¬æ¢è§„åˆ™å¯èƒ½å› æ•°æ®åº“ç³»ç»Ÿè€Œå¼‚ï¼Œä¾‹å¦‚åœ¨æŸäº›ç³»ç»Ÿä¸­ï¼Œä»å­—ç¬¦ä¸²è½¬æ¢æ—¶å¯èƒ½åœ¨å³ä¾§å¡«å……ï¼Œè€Œä»æ•´æ•°ç­‰ç±»å‹è½¬æ¢æ—¶å¯èƒ½åœ¨å·¦ä¾§å¡«å…… ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—é¢å€¼è¡¨ç¤º&lt;/strong&gt;ï¼šåœ¨SQLè¯­å¥ä¸­è¡¨ç¤ºäºŒè¿›åˆ¶å­—é¢å€¼é€šå¸¸æœ‰ç‰¹å®šæ ¼å¼ï¼Œä¾‹å¦‚åœ¨æŸäº›æ•°æ®åº“ä¸­ä½¿ç”¨ &lt;code&gt;0h&lt;/code&gt;å‰ç¼€åè·Ÿåå…­è¿›åˆ¶æ•°å­—ï¼ˆå¦‚ &lt;code&gt;0h89504E47&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾ç½®ä¸¥æ ¼æ¨¡å¼&lt;/strong&gt;ï¼šå»ºè®®åœ¨æ•°æ®åº“ä¼šè¯ä¸­è®¾ç½® &lt;code&gt;SET sql_mode = 'STRICT_TRANS_TABLES'&lt;/code&gt;ï¼Œä»¥é˜²æ­¢æ•°æ®è¢«é™é»˜æˆªæ–­ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–äºŒè¿›åˆ¶ç±»å‹å¯¹æ¯”"&gt;ğŸ“Š ä¸å…¶ä»–äºŒè¿›åˆ¶ç±»å‹å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;MySQLè¿˜æä¾›äº†BLOBç³»åˆ—ç±»å‹ï¼ˆTINYBLOB, BLOB, MEDIUMBLOB, LONGBLOBï¼‰ç”¨äºå­˜å‚¨éå¸¸å¤§çš„äºŒè¿›åˆ¶æ•°æ® ã€‚å®ƒä»¬ä¸VARBINARYçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;VARBINARY&lt;/strong&gt;ï¼šæ•°æ®ç›´æ¥å­˜å‚¨åœ¨è¡¨è¡Œå†…ï¼Œé€‚åˆ&lt;strong&gt;ä¸­å°å°ºå¯¸&lt;/strong&gt;çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆä¾‹å¦‚MySQLä¸­æœ€å¤§65,535å­—èŠ‚ ï¼‰ï¼ŒæŸ¥è¯¢æ•ˆç‡è¾ƒé«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;BLOB&lt;/strong&gt;ï¼šæ•°æ®å¯èƒ½å­˜å‚¨åœ¨è¡¨è¡Œå¤–ï¼Œæ›´é€‚åˆ&lt;strong&gt;è¶…å¤§&lt;/strong&gt;äºŒè¿›åˆ¶å¯¹è±¡ï¼ˆå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘æ–‡ä»¶ç­‰ï¼‰ï¼Œåœ¨SELECTæ—¶å¯èƒ½éœ€è¦é¢å¤–æ“ä½œè·å–æ•°æ® ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-14"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;VARBINARY æ˜¯å¤„ç†å¯å˜é•¿åº¦äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å“ˆå¸Œå€¼ã€UUIDã€æ–‡ä»¶ç­¾åï¼‰çš„ç†æƒ³é€‰æ‹©ï¼Œå› å…¶ç©ºé—´æ•ˆç‡é«˜ä¸”æ”¯æŒç²¾ç¡®çš„é€å­—èŠ‚æ¯”è¾ƒã€‚å…³é”®åœ¨äºæ ¹æ®æ•°æ®ç‰¹æ€§çš„â€œé•¿åº¦æ˜¯å¦å¯å˜â€åœ¨VARBINARYå’ŒBINARYä¹‹é—´åšå‡ºé€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ VARBINARYã€‚å¦‚æœä½ æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯æˆ–é‡åˆ°å…·ä½“é—®é¢˜ï¼Œæˆ‘å¾ˆä¹æ„æä¾›æ›´è¿›ä¸€æ­¥çš„æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="char255"&gt;CHAR(255)
&lt;/h2&gt;&lt;p&gt;CHAR ç±»å‹çš„æœ€å¤§é•¿åº¦è¢«é™åˆ¶ä¸º 255 ä¸ªå­—ç¬¦ï¼Œè¿™ä¸»è¦æºäº MySQL åœ¨è®¾è®¡æ—¶å¯¹&lt;strong&gt;å­˜å‚¨æ•ˆç‡å’Œæ€§èƒ½&lt;/strong&gt;çš„æƒè¡¡ï¼Œæ ¸å¿ƒåŸå› åœ¨äºå…¶&lt;strong&gt;é•¿åº¦æ ‡è¯†ä½ä»…ä½¿ç”¨1ä¸ªå­—èŠ‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº† CHAR å’Œ VARCHAR åœ¨é•¿åº¦æ ‡è¯†ä¸Šçš„å…³é”®å·®å¼‚ï¼Œè¿™ç›´æ¥å½±å“äº†å®ƒä»¬çš„æœ€å¤§é•¿åº¦é™åˆ¶ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;CHAR&lt;/th&gt;
&lt;th&gt;VARCHAR&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•¿åº¦æ ‡è¯†ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ— éœ€é¢å¤–å­—èŠ‚å­˜å‚¨é•¿åº¦ä¿¡æ¯ï¼ˆå›ºå®šé•¿åº¦ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€è¦ 1 æˆ– 2 ä¸ªå­—èŠ‚æ¥å­˜å‚¨å®é™…å†…å®¹çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é•¿åº¦æ ‡è¯†è§„åˆ™&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;è‹¥å£°æ˜çš„&lt;strong&gt;æœ€å¤§å¯èƒ½é•¿åº¦&lt;/strong&gt; â‰¤ 255 å­—èŠ‚ï¼Œåˆ™ä½¿ç”¨ &lt;strong&gt;1 ä¸ªå­—èŠ‚&lt;/strong&gt;å­˜å‚¨é•¿åº¦ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§é•¿åº¦é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;255 å­—ç¬¦&lt;/strong&gt;ï¼ˆä¸å­—ç¬¦é›†æ— å…³ï¼‰&lt;/td&gt;
&lt;td&gt;å—è¡Œæœ€å¤§é™åˆ¶ï¼ˆå¦‚ 65535 å­—èŠ‚ï¼‰å’Œå­—ç¬¦é›†å½±å“ï¼Œç†è®ºå­—ç¬¦æ•°å¯è¿œå¤§äº255&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒåŸå› 1å­—èŠ‚é•¿åº¦æ ‡è¯†ä½çš„é™åˆ¶"&gt;ğŸ’¾ æ ¸å¿ƒåŸå› ï¼š1å­—èŠ‚é•¿åº¦æ ‡è¯†ä½çš„é™åˆ¶
&lt;/h3&gt;&lt;p&gt;CHAR ç±»å‹æ˜¯&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;çš„ã€‚å½“ä½ å®šä¹‰ &lt;code&gt;CHAR(255)&lt;/code&gt;ï¼Œæ— è®ºä½ å®é™…å­˜å…¥çš„æ˜¯1ä¸ªå­—ç¬¦è¿˜æ˜¯100ä¸ªå­—ç¬¦ï¼ŒMySQL éƒ½ä¼šåœ¨ç£ç›˜ä¸Šåˆ†é…æ°å¥½èƒ½å­˜æ”¾255ä¸ªå­—ç¬¦çš„ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®åœ¨äºï¼ŒMySQL ä¸º VARCHAR ç±»å‹è®¾è®¡äº†ä¸€å¥—æœºåˆ¶ï¼Œç”¨ä¸€ä¸ªå¾ˆå°çš„&lt;strong&gt;é•¿åº¦æ ‡è¯†ä½&lt;/strong&gt;æ¥è®°å½•å®é™…å­˜å‚¨çš„å­—ç¬¦ä¸²æœ‰å¤šé•¿ã€‚è¿™ä¸ªæ ‡è¯†ä½å¯èƒ½å ç”¨1ä¸ªæˆ–2ä¸ªå­—èŠ‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœå®šä¹‰çš„ &lt;code&gt;VARCHAR(n)&lt;/code&gt;å…¶ &lt;strong&gt;&lt;code&gt;n&lt;/code&gt;å¯¹åº”çš„æœ€å¤§å¯èƒ½å­—èŠ‚æ•°ä¸è¶…è¿‡255&lt;/strong&gt;ï¼Œåˆ™åªéœ€è¦ &lt;strong&gt;1ä¸ªå­—èŠ‚&lt;/strong&gt; ä½œä¸ºé•¿åº¦æ ‡è¯†ä½ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¶…è¿‡255å­—èŠ‚ï¼Œåˆ™éœ€è¦2ä¸ªå­—èŠ‚ä½œä¸ºé•¿åº¦æ ‡è¯†ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œ &lt;strong&gt;CHAR ç±»å‹è¢«è®¾è®¡ä¸ºå§‹ç»ˆ falls into the first categoryï¼ˆå½’å…¥ç¬¬ä¸€ç±»ï¼‰&lt;/strong&gt;ï¼Œå³å…¶é•¿åº¦æ ‡è¯†è¢«é™åˆ¶åœ¨å¯ä»¥ç”¨1ä¸ªå­—èŠ‚è¡¨ç¤ºçš„èŒƒå›´ä¹‹å†…ã€‚&lt;strong&gt;1ä¸ªå­—èŠ‚ï¼ˆ8ä½ï¼‰æ— ç¬¦å·æ•´æ•°çš„æœ€å¤§å€¼æ˜¯ 2^8 - 1 = 255&lt;/strong&gt;ã€‚å› æ­¤ï¼ŒCHAR ç±»å‹çš„æœ€å¤§å­—ç¬¦æ•°å°±è¢«é™å®šåœ¨äº† &lt;strong&gt;255&lt;/strong&gt;ã€‚è¿™æ˜¯ MySQL ä¸ºäº†å®ç°ç®€å•é«˜æ•ˆçš„å­˜å‚¨ç®¡ç†è€Œåšå‡ºçš„ä¸€ä¸ªåŸºç¡€ä¸”å…³é”®çš„è®¾è®¡å†³ç­–ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸-varchar-çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸ VARCHAR çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªè®¾è®¡ä½¿å¾— CHAR å’Œ VARCHAR æœ‰äº†æ ¹æœ¬åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CHAR&lt;/strong&gt; çš„ä¼˜åŠ¿åœ¨äº&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;ã€‚å› ä¸ºé•¿åº¦å›ºå®šï¼Œæ‰€ä»¥å­˜å–é€Ÿåº¦é€šå¸¸æ›´å¿«ï¼Œå°¤å…¶æ˜¯å¯¹é•¿åº¦å‡ ä¹ä¸€è‡´çš„æ•°æ®ï¼ˆå¦‚MD5å“ˆå¸Œå€¼ã€å›½å®¶ä»£ç ï¼‰ã€‚æ›´æ–°æ—¶ä¹Ÿä¸å®¹æ˜“äº§ç”Ÿå­˜å‚¨ç¢ç‰‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VARCHAR&lt;/strong&gt; çš„ä¼˜åŠ¿åœ¨äº&lt;strong&gt;å¯å˜é•¿åº¦&lt;/strong&gt;ï¼Œæ›´èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå°¤å…¶é€‚ç”¨äºé•¿åº¦å˜åŒ–å¾ˆå¤§çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·åã€æ–‡ç« æ ‡é¢˜ï¼‰ã€‚å®ƒçš„æœ€å¤§é•¿åº¦å—é™äº MySQL å•è¡Œçš„æœ€å¤§é•¿åº¦ï¼ˆçº¦ä¸º65535å­—èŠ‚ï¼‰ï¼Œå¹¶ä¼šæ ¹æ®å­—ç¬¦é›†è¿›è¡ŒæŠ˜ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸­çš„é€‰æ‹©"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸­çš„é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;äº†è§£è¿™ä¸ªé™åˆ¶åï¼Œä½ åœ¨è®¾è®¡è¡¨æ—¶å°±èƒ½åšå‡ºæ›´åˆé€‚çš„é€‰æ‹©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ CHAR&lt;/strong&gt;ï¼šå½“ä½ è¦å­˜å‚¨çš„æ•°æ®é•¿åº¦&lt;strong&gt;éå¸¸å›ºå®šæˆ–è¿‘ä¹å›ºå®š&lt;/strong&gt;æ—¶ï¼ŒCHAR æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ç»å…¸çš„ä¾‹å­åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MD5 å“ˆå¸Œå€¼&lt;/strong&gt;ï¼ˆå›ºå®š32å­—ç¬¦ï¼‰ï¼š&lt;code&gt;CHAR(32)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŸäº›&lt;strong&gt;å®šé•¿ä»£ç æˆ–æ ‡è¯†ç¬¦&lt;/strong&gt;ï¼Œå¦‚å›½å®¶ä»£ç ï¼ˆ2å­—ç¬¦ï¼‰ï¼š&lt;code&gt;CHAR(2)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼ŒCHAR çš„æ€§èƒ½é€šå¸¸ä¼˜äº VARCHARã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½•æ—¶ä½¿ç”¨ VARCHAR&lt;/strong&gt;ï¼šå½“ä½ è¦å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦&lt;strong&gt;å˜åŒ–è¾ƒå¤§&lt;/strong&gt;æ—¶ï¼Œåº”ä¼˜å…ˆé€‰æ‹© VARCHARã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·åã€ç”µå­é‚®ä»¶åœ°å€ã€æ–‡ç« æ ‡é¢˜ã€æè¿°ä¿¡æ¯ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™èƒ½æœ‰æ•ˆèŠ‚çœå¤§é‡çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼ŒCHAR çš„ 255 å­—ç¬¦ä¸Šé™æ˜¯ MySQL ä¸ºäº†å¹³è¡¡å­˜å‚¨æ•ˆç‡å’Œç®¡ç†å¤æ‚åº¦ï¼ŒåŸºäº1å­—èŠ‚é•¿åº¦æ ‡è¯†ä½åšå‡ºçš„ä¸€ä¸ªåŸºç¡€è®¾è®¡ã€‚åœ¨é€‰æ‹©ç±»å‹æ—¶ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯åˆ¤æ–­æ•°æ®çš„&lt;strong&gt;é•¿åº¦æ˜¯å¦å›ºå®š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ CHAR ç±»å‹çš„è¿™ä¸ªç‰¹æ€§ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„é€‰æ‹©è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€NowCoderã€‘DB 2</title><link>https://dyhes.github.io/p/nowcoderdb-2/</link><pubDate>Mon, 08 Sep 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nowcoderdb-2/</guid><description>&lt;h2 id="bæ ‘ç©ºé—´åˆ©ç”¨ç‡"&gt;B+æ ‘ç©ºé—´åˆ©ç”¨ç‡
&lt;/h2&gt;&lt;p&gt;B+æ ‘é€šè¿‡å°†æ•°æ®é›†ä¸­åœ¨å¶å­èŠ‚ç‚¹ã€å†…éƒ¨èŠ‚ç‚¹ä»…å­˜å‚¨é”®çš„ç»“æ„è®¾è®¡ï¼Œç¡®å®æ˜¾è‘—æé«˜äº†ç©ºé—´åˆ©ç”¨ç‡ã€‚è¿™ç§ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨å­˜å‚¨æ•ˆç‡ã€æŸ¥è¯¢æ€§èƒ½ä»¥åŠå¯¹ç£ç›˜I/Oçš„ä¼˜åŒ–ä¸Šã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº†B+æ ‘ä¸Bæ ‘åœ¨ç©ºé—´åˆ©ç”¨ä¸Šçš„å…³é”®å·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;B+æ ‘&lt;/th&gt;
&lt;th&gt;Bæ ‘&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å­˜å‚¨ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…å¶å­èŠ‚ç‚¹å­˜å‚¨å®Œæ•´æ•°æ®&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬å†…éƒ¨èŠ‚ç‚¹ï¼‰éƒ½å¯èƒ½å­˜å‚¨æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çº¯ç´¢å¼•ï¼Œä»…å­˜å‚¨é”®å’ŒæŒ‡é’ˆ&lt;/td&gt;
&lt;td&gt;åŒæ—¶å­˜å‚¨é”®ã€æŒ‡é’ˆå’Œå…³è”æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŠ‚ç‚¹å®¹é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸åŒå¤§å°èŠ‚ç‚¹å¯å­˜å‚¨æ›´å¤šé”®ï¼Œ&lt;strong&gt;æ‰‡å‡ºï¼ˆå­èŠ‚ç‚¹æ•°ï¼‰æ›´é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å› å­˜å‚¨æ•°æ®ï¼Œå•ä¸ªèŠ‚ç‚¹èƒ½å®¹çº³çš„é”®æ›´å°‘ï¼Œæ‰‡å‡ºè¾ƒä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ‘çš„é«˜åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸æ›´çŸ®èƒ–ï¼Œ&lt;strong&gt;å±‚çº§æ›´å°‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹æ›´é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´åˆ©ç”¨ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹æ›´ç´§å‡‘ï¼Œç´¢å¼•å¯†åº¦é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®åˆ†æ•£åœ¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œç©ºé—´åˆ©ç”¨ç›¸å¯¹åˆ†æ•£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒƒå›´æŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¶å­èŠ‚ç‚¹å½¢æˆæœ‰åºé“¾è¡¨ï¼Œ&lt;strong&gt;é«˜æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦ä¸­åºéå†ï¼Œæ•ˆç‡è¾ƒä½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ç©ºé—´åˆ©ç”¨ç‡æå‡çš„æ ¹æº"&gt;ğŸ’¡ ç©ºé—´åˆ©ç”¨ç‡æå‡çš„æ ¹æº
&lt;/h3&gt;&lt;p&gt;B+æ ‘æé«˜ç©ºé—´åˆ©ç”¨ç‡çš„æ ¸å¿ƒåœ¨äºå…¶&lt;strong&gt;æ•°æ®ä¸ç´¢å¼•çš„åˆ†ç¦»è®¾è®¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹æ›´è½»é‡&lt;/strong&gt;ï¼šç”±äºå†…éƒ¨èŠ‚ç‚¹ä¸å†å­˜å‚¨å®é™…çš„æ•°æ®è®°å½•ï¼ˆå³â€œå«æ˜Ÿæ•°æ®â€ï¼‰ï¼Œåªå­˜æ”¾é”®å€¼å’ŒæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™ä½¿å¾—å•ä¸ªå†…éƒ¨èŠ‚ç‚¹å ç”¨çš„ç©ºé—´æ›´å°ã€‚åœ¨èŠ‚ç‚¹å¤§å°å›ºå®šï¼ˆé€šå¸¸ä¸ç£ç›˜é¡µå¤§å°å¯¹é½ï¼Œå¦‚16KBï¼‰çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªB+æ ‘çš„å†…éƒ¨èŠ‚ç‚¹å¯ä»¥å®¹çº³&lt;strong&gt;å¤šå¾—å¤šçš„é”®å’ŒæŒ‡é’ˆ&lt;/strong&gt;ã€‚è¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸º&lt;strong&gt;é«˜æ‰‡å‡ºæ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‘é«˜é™ä½ï¼ŒèŠ‚ç‚¹æ€»æ•°å‡å°‘&lt;/strong&gt;ï¼šæ›´é«˜çš„æ‰‡å‡ºæ„å‘³ç€åŒæ ·æ•°é‡çš„æ•°æ®ï¼ŒB+æ ‘éœ€è¦çš„å±‚çº§æ›´å°‘ï¼Œæ ‘çš„é«˜åº¦æ›´ä½ã€‚ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ˜¯ï¼Œåœ¨MySQLçš„InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œä¸€ä¸ªé«˜åº¦ä¸º3çš„B+æ ‘å°±èƒ½è½»æ¾æ”¯æ’‘çº¦ä¸¤åƒä¸‡æ¡æ•°æ®çš„ç´¢å¼•ã€‚æ ‘é«˜é™ä½çš„ç›´æ¥å¥½å¤„æ˜¯ï¼Œä»æ ¹èŠ‚ç‚¹éå†åˆ°å¶å­èŠ‚ç‚¹æ‰€éœ€çš„ç£ç›˜I/Oæ¬¡æ•°å¤§å¹…å‡å°‘ï¼Œä»è€Œæå‡äº†æŸ¥è¯¢æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜æ•ˆç‡æå‡&lt;/strong&gt;ï¼šå› ä¸ºå†…éƒ¨èŠ‚ç‚¹æ›´å°ä¸”åªåŒ…å«ç´¢å¼•ï¼Œæ•°æ®åº“ç³»ç»Ÿå¯ä»¥æ›´å®¹æ˜“åœ°å°†æ•´ä¸ªéå¶å­èŠ‚ç‚¹å±‚çº§ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚è¿™æ„å‘³ç€å¾ˆå¤šæŸ¥è¯¢åœ¨å¯»æ‰¾æ•°æ®æ‰€åœ¨å¶å­é¡µçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å®Œå…¨ä¸éœ€è¦è®¿é—®ç£ç›˜ï¼Œç›´æ¥åœ¨å†…å­˜ä¸­å°±èƒ½å®Œæˆè·¯å¾„å®šä½ï¼Œè¿›ä¸€æ­¥åŠ å¿«äº†é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-èŒƒå›´æŸ¥è¯¢çš„å¤©ç„¶ä¼˜åŠ¿"&gt;ğŸ”„ èŒƒå›´æŸ¥è¯¢çš„å¤©ç„¶ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;B+æ ‘çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥æˆä¸€ä¸ªæœ‰åºçš„åŒå‘é“¾è¡¨ã€‚è¿™ä¸€è®¾è®¡è®©B+æ ‘åœ¨èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚&lt;code&gt;BETWEEN&lt;/code&gt;ã€&lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&lt;/code&gt;ï¼‰å’Œå…¨è¡¨æ‰«æä¸Šå…·æœ‰å‹å€’æ€§ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦é€šè¿‡ç´¢å¼•æ‰¾åˆ°èŒƒå›´çš„èµ·å§‹ç‚¹ï¼Œå°±å¯ä»¥æ²¿ç€å¶å­èŠ‚ç‚¹çš„é“¾è¡¨é¡ºåºæ‰«æï¼Œæ— éœ€å›æº¯åˆ°ä¸Šå±‚èŠ‚ç‚¹ã€‚è¿™ç§é¡ºåºè®¿é—®éå¸¸ç¬¦åˆç£ç›˜çš„é¢„è¯»ç‰¹æ€§ï¼ˆä¸€æ¬¡I/Oè¯»å–ç›¸é‚»çš„å¤§é‡æ•°æ®ï¼‰ï¼Œä»è€Œè¿›ä¸€æ­¥å‡å°‘äº†I/Oæ“ä½œã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒBæ ‘è¿›è¡ŒèŒƒå›´æŸ¥è¯¢åˆ™éœ€è¦åœ¨å„çº§èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œå¤æ‚çš„ä¸­åºéå†ï¼Œæ•ˆç‡ä½å¾—å¤šã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒB+æ ‘é€šè¿‡&lt;strong&gt;å†…éƒ¨èŠ‚ç‚¹ä»…å­˜é”®&lt;/strong&gt;çš„è®¾è®¡ï¼Œå®ç°äº†æ›´é«˜çš„æ‰‡å‡ºå’Œæ›´çŸ®çš„æ ‘é«˜ï¼Œè¿™ä¸ä»…&lt;strong&gt;æå‡äº†ç©ºé—´åˆ©ç”¨ç‡&lt;/strong&gt;ï¼Œè¿˜ç›´æ¥å¸¦æ¥äº†&lt;strong&gt;æ›´å°‘çš„ç£ç›˜I/O&lt;/strong&gt;å’Œ&lt;strong&gt;æ›´ç¨³å®šçš„æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;ã€‚å†åŠ ä¸Šå¶å­èŠ‚ç‚¹çš„&lt;strong&gt;é“¾è¡¨ç»“æ„&lt;/strong&gt;å¯¹èŒƒå›´æŸ¥è¯¢çš„ä¼˜åŒ–ï¼Œä½¿å®ƒæˆä¸ºæ•°æ®åº“ç´¢å¼•å’Œæ–‡ä»¶ç³»ç»Ÿç­‰éœ€è¦é«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®åœºæ™¯çš„ç†æƒ³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£B+æ ‘çš„è®¾è®¡æ™ºæ…§ã€‚å¦‚æœä½ å¯¹å…·ä½“å®ç°ç»†èŠ‚æˆ–ä¸åŒæ•°æ®åº“çš„ç´¢å¼•ç­–ç•¥æœ‰è¿›ä¸€æ­¥å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="null-å€¼ç´¢å¼•"&gt;NULL å€¼ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;å…³äºæ‚¨æå‡ºçš„ &lt;code&gt;WHERE age IN (20, 30, NULL)&lt;/code&gt;è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå…¶ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µæ¯”å•çº¯çš„â€œåªåœ¨NULLå€¼ä¸Šå¤±æ•ˆâ€è¦å¤æ‚ä¸€äº›ã€‚æ ¸å¿ƒç»“è®ºæ˜¯ï¼š&lt;strong&gt;å¯¹äº &lt;code&gt;IN&lt;/code&gt;åˆ—è¡¨ä¸­çš„éNULLå€¼ï¼ˆ20å’Œ30ï¼‰ï¼Œç´¢å¼•é€šå¸¸æ˜¯æœ‰æ•ˆçš„ï¼›è€Œå¯¹äº &lt;code&gt;NULL&lt;/code&gt;å€¼çš„æŸ¥æ‰¾ï¼Œæƒ…å†µåˆ™æ¯”è¾ƒç‰¹æ®Š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥å¸®ä½ å¿«é€Ÿäº†è§£ä¸åŒéƒ¨åˆ†çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŸ¥è¯¢æ¡ä»¶ç»„æˆéƒ¨åˆ†&lt;/th&gt;
&lt;th&gt;æ˜¯å¦å¯èƒ½ä½¿ç”¨ç´¢å¼•&lt;/th&gt;
&lt;th&gt;åŸå› è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;age = 20&lt;/code&gt;æˆ– &lt;code&gt;age = 30&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;é€šå¸¸æœ‰æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿™äº›æ˜¯æ˜ç¡®çš„ç­‰å€¼æŸ¥è¯¢ï¼ŒB+Treeç´¢å¼•å¯ä»¥é«˜æ•ˆå®šä½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;age = NULL&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;åŸºæœ¬æ— æ•ˆ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨SQLä¸­ï¼Œ&lt;code&gt;= NULL&lt;/code&gt;çš„åˆ¤æ–­ç»“æœæ°¸è¿œæ˜¯UNKNOWNï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯ &lt;code&gt;IS NULL&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;age IS NULL&lt;/code&gt;(ç­‰æ•ˆéƒ¨åˆ†)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš ï¸ &lt;strong&gt;å¯èƒ½æœ‰æ•ˆï¼Œä½†å–å†³äºä¼˜åŒ–å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´¢å¼•æœ¬èº«å­˜å‚¨äº†&lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œä½†ä¼˜åŒ–å™¨å¯èƒ½å› æ•°æ®åˆ†å¸ƒé€‰æ‹©å…¨è¡¨æ‰«æã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ç´¢å¼•ä¸nullå€¼"&gt;ğŸ’¡ æ·±å…¥ç†è§£ç´¢å¼•ä¸NULLå€¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç´¢å¼•å¦‚ä½•å­˜å‚¨NULLå€¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨MySQLçš„InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œæ™®é€šçš„B+Treeç´¢å¼•æ˜¯ä¼šå­˜å‚¨&lt;code&gt;NULL&lt;/code&gt;å€¼çš„ã€‚ä½ å¯ä»¥å°†&lt;code&gt;NULL&lt;/code&gt;ç†è§£ä¸ºç´¢å¼•ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–å™¨å¦‚ä½•å†³ç­–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å³ä½¿ç´¢å¼•åŒ…å«äº†&lt;code&gt;NULL&lt;/code&gt;å€¼ï¼ŒMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼ˆåŸºäºæˆæœ¬çš„ä¼˜åŒ–å™¨CBOï¼‰ä¹Ÿä¸ä¸€å®šä¼šä½¿ç”¨ç´¢å¼•ã€‚å®ƒä¼šæ ¹æ®æ•°æ®åˆ†å¸ƒç»Ÿè®¡ä¿¡æ¯æ¥ä¼°ç®—æˆæœ¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœè¡¨ä¸­&lt;code&gt;age&lt;/code&gt;åˆ—ä¸º&lt;code&gt;NULL&lt;/code&gt;çš„è®°å½•&lt;strong&gt;éå¸¸å°‘&lt;/strong&gt;ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šè®¤ä¸ºé€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½è¿™äº›å°‘é‡æ•°æ®æ¯”å…¨è¡¨æ‰«ææ›´é«˜æ•ˆï¼Œä»è€Œä½¿ç”¨ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;code&gt;age&lt;/code&gt;åˆ—ä¸º&lt;code&gt;NULL&lt;/code&gt;çš„è®°å½•&lt;strong&gt;éå¸¸å¤š&lt;/strong&gt;ï¼Œä¼˜åŒ–å™¨å¯èƒ½ä¼šåˆ¤æ–­ä½¿ç”¨ç´¢å¼•æŸ¥å‡ºä¸€å¤§å †&lt;code&gt;NULL&lt;/code&gt;å€¼çš„åœ°å€ï¼Œç„¶åå†å›è¡¨æŸ¥è¯¢ï¼Œå…¶æ•ˆç‡è¿˜ä¸å¦‚ç›´æ¥è¿›è¡Œä¸€æ¬¡å…¨è¡¨æ‰«æã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°±ä¼šæ”¾å¼ƒä½¿ç”¨ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;code&gt;WHERE age IN (20, 30, NULL)&lt;/code&gt;è¿™ä¸ªæ¡ä»¶ï¼ŒMySQLå¯èƒ½ä¼šå°†å…¶æ‹†è§£å¹¶åˆ†åˆ«å¤„ç†ï¼Œæœ€ç»ˆå†³å®šæ˜¯ä½¿ç”¨ç´¢å¼•è¿›è¡Œå¤šæ¬¡èŒƒå›´æŸ¥æ‰¾ï¼Œè¿˜æ˜¯ç›´æ¥å…¨è¡¨æ‰«æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•ç¡®è®¤ç´¢å¼•ä½¿ç”¨æƒ…å†µ"&gt;ğŸ” å¦‚ä½•ç¡®è®¤ç´¢å¼•ä½¿ç”¨æƒ…å†µ
&lt;/h3&gt;&lt;p&gt;è¦å‡†ç¡®çŸ¥é“ä½ çš„æŸ¥è¯¢æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ï¼Œæœ€å¯é çš„æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;å‘½ä»¤åˆ†ææ‰§è¡Œè®¡åˆ’ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;EXPLAIN SELECT * FROM your_table WHERE age IN (20, 30, NULL);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³æ³¨ç»“æœä¸­çš„ä¸¤ä¸ªå…³é”®å­—æ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;type&lt;/code&gt;&lt;/strong&gt;ï¼šå¦‚æœæ˜¾ç¤ºä¸º &lt;code&gt;range&lt;/code&gt;æˆ– &lt;code&gt;ref&lt;/code&gt;ï¼Œè¯´æ˜ä½¿ç”¨äº†ç´¢å¼•è¿›è¡ŒèŒƒå›´æˆ–ç­‰å€¼æ‰«æã€‚å¦‚æœæ˜¾ç¤ºä¸º &lt;code&gt;ALL&lt;/code&gt;ï¼Œåˆ™æ„å‘³ç€å…¨è¡¨æ‰«æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;key&lt;/code&gt;&lt;/strong&gt;ï¼šæ˜¾ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•åç§°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæƒ…å†µ&lt;/strong&gt;ï¼šåœ¨ä½ çš„æŸ¥è¯¢ä¸­ï¼Œå¯¹äº&lt;code&gt;IN&lt;/code&gt;åˆ—è¡¨é‡Œçš„é&lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œç´¢å¼•æ˜¯æœ‰æ•ˆçš„ã€‚å¯¹äº&lt;code&gt;NULL&lt;/code&gt;éƒ¨åˆ†ï¼Œç´¢å¼•æœ¬èº«æ”¯æŒï¼Œä½†æœ€ç»ˆæ˜¯å¦ä½¿ç”¨å–å†³äºä¼˜åŒ–å™¨åŸºäºæ•°æ®åˆ†å¸ƒçš„æˆæœ¬ä¼°ç®—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°½é‡é¿å…åœ¨ç´¢å¼•åˆ—ä¸­å­˜å‚¨å¤§é‡&lt;code&gt;NULL&lt;/code&gt;å€¼ã€‚å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå°†åˆ—è®¾ç½®ä¸º &lt;code&gt;NOT NULL&lt;/code&gt;å¹¶èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå¦‚0æˆ–ç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œå¯ä»¥ç®€åŒ–æŸ¥è¯¢å¹¶å‡å°‘ä¼˜åŒ–å™¨å†³ç­–çš„ä¸ç¡®å®šæ€§ã€‚&lt;/li&gt;
&lt;li&gt;å…»æˆä½¿ç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;åˆ†æå…³é”®æŸ¥è¯¢çš„ä¹ æƒ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£MySQLä¸­ç´¢å¼•ä¸&lt;code&gt;NULL&lt;/code&gt;å€¼äº¤äº’çš„ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id="å…¨æ–‡ç´¢å¼•"&gt;å…¨æ–‡ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;MySQLçš„å…¨æ–‡æœç´¢ï¼ˆFull-Text Searchï¼‰æ˜¯ä¸€é¡¹å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸æ‚¨åœ¨æ–‡æœ¬æ•°æ®ä¸­æ‰§è¡ŒåŸºäºå…³é”®è¯çš„é«˜æ•ˆã€æ™ºèƒ½æœç´¢ï¼Œè¿œè¶…ä¼ ç»Ÿ&lt;code&gt;LIKE&lt;/code&gt;è¯­å¥çš„èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†ã€ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹çš„è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id="-å…¨æ–‡ç´¢å¼•çš„æ ¸å¿ƒæ¦‚å¿µ"&gt;ğŸ” å…¨æ–‡ç´¢å¼•çš„æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;p&gt;å…¨æ–‡ç´¢å¼•çš„æ ¸å¿ƒæ˜¯ä¸€ç§ç§°ä¸º&lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;çš„ç»“æ„ã€‚å®ƒä¸æ™®é€šçš„B+Treeç´¢å¼•ä¸åŒï¼šæ™®é€šç´¢å¼•ä¸ºæ¯ä¸€è¡Œæ•°æ®å»ºç«‹ä¸€ä¸ªç´¢å¼•é¡¹ï¼Œè€Œå€’æ’ç´¢å¼•åˆ™ä¸ºæ–‡æœ¬ä¸­çš„æ¯ä¸ª&lt;strong&gt;å•è¯&lt;/strong&gt;ï¼ˆæˆ–ç§°ä¸ºâ€œè¯æ¡â€ã€â€œæ ‡è®°â€ï¼‰å»ºç«‹ç´¢å¼•ï¼Œè®°å½•å®ƒå‡ºç°åœ¨å“ªäº›è¡Œä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ‚¨å¯¹ä¸€åˆ—åˆ›å»ºå…¨æ–‡ç´¢å¼•åï¼ŒMySQLä¼šè‡ªåŠ¨è¿›è¡Œ&lt;strong&gt;åˆ†è¯&lt;/strong&gt;ï¼Œå³å°†é•¿æ–‡æœ¬æ‹†åˆ†æˆç‹¬ç«‹çš„å•è¯ï¼Œå¹¶å¿½ç•¥å¸¸è§çš„&lt;strong&gt;åœç”¨è¯&lt;/strong&gt;ï¼ˆå¦‚è‹±æ–‡ä¸­çš„â€œtheâ€ã€â€œandâ€ï¼‰å’Œè¿‡çŸ­å•è¯ï¼ˆé»˜è®¤é•¿åº¦å°äº4çš„å•è¯ä¼šè¢«å¿½ç•¥ï¼‰ã€‚æœ€ç»ˆï¼Œç´¢å¼•ä¸­å­˜å‚¨çš„æ˜¯è¿™äº›æœ‰æ„ä¹‰çš„å•è¯ä¸å®ƒä»¬æ‰€åœ¨è¡Œä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚&lt;/p&gt;
&lt;h3 id="-å¦‚ä½•åˆ›å»ºå…¨æ–‡ç´¢å¼•"&gt;ğŸ“ å¦‚ä½•åˆ›å»ºå…¨æ–‡ç´¢å¼•
&lt;/h3&gt;&lt;p&gt;é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨è¡¨çš„æ–‡æœ¬åˆ—ä¸Šåˆ›å»º&lt;code&gt;FULLTEXT&lt;/code&gt;ç´¢å¼•ã€‚å®ƒæ”¯æŒ&lt;code&gt;CHAR&lt;/code&gt;ã€&lt;code&gt;VARCHAR&lt;/code&gt;å’Œ&lt;code&gt;TEXT&lt;/code&gt;ç±»å‹çš„åˆ—ï¼Œå¹¶ä¸”ä»MySQL 5.6å¼€å§‹ï¼ŒInnoDBå’ŒMyISAMå­˜å‚¨å¼•æ“éƒ½æ”¯æŒè¯¥åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶å®šä¹‰ç´¢å¼•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE articles (
id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(200),
body TEXT,
FULLTEXT (title, body) -- è¿™é‡Œåˆ›å»ºäº†è”åˆå…¨æ–‡ç´¢å¼•
) ENGINE=InnoDB;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿå¯ä»¥åœ¨å·²æœ‰çš„è¡¨ä¸Šæ·»åŠ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE articles ADD FULLTEXT INDEX ft_title_body (title, body);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-ä¸‰ç§å…¨æ–‡æœç´¢æ¨¡å¼"&gt;ğŸ’¬ ä¸‰ç§å…¨æ–‡æœç´¢æ¨¡å¼
&lt;/h3&gt;&lt;p&gt;MySQLæä¾›äº†ä¸‰ç§ä¸»è¦çš„å…¨æ–‡æœç´¢æ¨¡å¼ï¼Œä»¥é€‚åº”ä¸åŒåœºæ™¯ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœç´¢æ¨¡å¼&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªç„¶è¯­è¨€æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ¨¡å¼ã€‚å°†æœç´¢å­—ç¬¦ä¸²è§†ä¸ºè‡ªç„¶çŸ­è¯­ï¼ŒæŒ‰&lt;strong&gt;ç›¸å…³æ€§è¯„åˆ†&lt;/strong&gt;æ’åºç»“æœã€‚&lt;/td&gt;
&lt;td&gt;é€šç”¨å…³é”®è¯æœç´¢ï¼Œå¦‚æœç´¢åŒ…å«â€œæ•°æ®åº“ä¼˜åŒ–â€çš„æ–‡ç« ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¸ƒå°”æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒæ“ä½œç¬¦è¿›è¡Œå¤æ‚é€»è¾‘æŸ¥è¯¢ï¼Œå¦‚å¿…é¡»åŒ…å«(&lt;code&gt;+&lt;/code&gt;)ã€æ’é™¤(&lt;code&gt;-&lt;/code&gt;)ã€é€šé…ç¬¦(&lt;code&gt;*&lt;/code&gt;)ç­‰ã€‚&lt;/td&gt;
&lt;td&gt;éœ€è¦ç²¾ç¡®è¿‡æ»¤çš„æœç´¢ï¼Œå¦‚â€œå¿…é¡»åŒ…å«Javaä½†ä¸åŒ…å«Pythonâ€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ‰©å±•æ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿›è¡Œä¸¤é˜¶æ®µæœç´¢ï¼Œç¬¬äºŒé˜¶æ®µä½¿ç”¨ç¬¬ä¸€é˜¶æ®µç»“æœä¸­çš„ç›¸å…³è¯å†æ¬¡æœç´¢ä»¥æ‰©å¤§èŒƒå›´ã€‚&lt;/td&gt;
&lt;td&gt;åˆå§‹æœç´¢ç»“æœè¿‡å°‘æ—¶ï¼Œç”¨ä»¥æŸ¥æ‰¾è¯­ä¹‰ç›¸å…³çš„å…¶ä»–å†…å®¹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="1-è‡ªç„¶è¯­è¨€æ¨¡å¼"&gt;1. è‡ªç„¶è¯­è¨€æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯é»˜è®¤æ¨¡å¼ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ç®€å•æœç´¢ã€‚MySQLä¼šè®¡ç®—å¹¶è¿”å›æ¯æ¡ç»“æœä¸æœç´¢è¯çš„ç›¸å…³æ€§åˆ†æ•°ï¼ˆä¸€ä¸ªéè´Ÿæµ®ç‚¹æ•°ï¼‰ï¼Œå¹¶è‡ªåŠ¨æŒ‰åˆ†æ•°ä»é«˜åˆ°ä½æ’åºã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾åŒ…å«&amp;#39;database&amp;#39;æˆ–&amp;#39;optimization&amp;#39;çš„æ–‡ç« ï¼Œå¹¶æŒ‰ç›¸å…³æ€§æ’åº
SELECT id, title,
MATCH(title, body) AGAINST(&amp;#39;database optimization&amp;#39; IN NATURAL LANGUAGE MODE) AS score
FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;database optimization&amp;#39; IN NATURAL LANGUAGE MODE);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-å¸ƒå°”æ¨¡å¼"&gt;2. å¸ƒå°”æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;å½“æ‚¨éœ€è¦æ›´ç²¾ç¡®åœ°æ§åˆ¶æœç´¢é€»è¾‘æ—¶ï¼Œå¸ƒå°”æ¨¡å¼éå¸¸å¼ºå¤§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥æ‰¾å¿…é¡»åŒ…å«&amp;#34;MySQL&amp;#34;ä¸”åŒ…å«&amp;#34;performance&amp;#34;ï¼Œä½†ä¸èƒ½åŒ…å«&amp;#34;Oracle&amp;#34;çš„æ–‡ç« 
SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;+MySQL +performance -Oracle&amp;#39; IN BOOLEAN MODE);
-- ä½¿ç”¨é€šé…ç¬¦æœç´¢ä»¥&amp;#34;data&amp;#34;å¼€å¤´çš„å•è¯ï¼Œå¦‚&amp;#34;database&amp;#34;, &amp;#34;datawarehouse&amp;#34;
SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;data*&amp;#39; IN BOOLEAN MODE);
-- æœç´¢ç²¾ç¡®çŸ­è¯­&amp;#34;MySQL tutorial&amp;#34;
SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;&amp;#34;MySQL tutorial&amp;#34;&amp;#39; IN BOOLEAN MODE);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-æŸ¥è¯¢æ‰©å±•æ¨¡å¼"&gt;3. æŸ¥è¯¢æ‰©å±•æ¨¡å¼
&lt;/h4&gt;&lt;p&gt;å½“æœç´¢è¯æ¯”è¾ƒç®€çŸ­æˆ–æ¨¡ç³Šæ—¶ï¼Œæ­¤æ¨¡å¼å¯ä»¥é€šè¿‡åé¦ˆæœºåˆ¶æ‰¾åˆ°æ›´å¤šç›¸å…³ç»“æœï¼Œä½†ä¹Ÿå¯èƒ½è¿”å›ä¸€äº›ä¸ç›¸å…³çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM articles
WHERE MATCH(title, body) AGAINST(&amp;#39;database&amp;#39; WITH QUERY EXPANSION);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸å±€é™æ€§
&lt;/h3&gt;&lt;p&gt;å°½ç®¡å…¨æ–‡æœç´¢åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸­æ–‡æ”¯æŒ&lt;/strong&gt;ï¼šé»˜è®¤çš„åˆ†è¯å™¨é’ˆå¯¹è‹±æ–‡ç­‰æœ‰ç©ºæ ¼åˆ†éš”çš„è¯­è¨€ã€‚è¦æœ‰æ•ˆæ”¯æŒä¸­æ–‡ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨MySQLå†…ç½®çš„**&lt;code&gt;ngram&lt;/code&gt;åˆ†è¯å™¨**ã€‚åœ¨åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®šï¼š&lt;code&gt;FULLTEXT (title, body) WITH PARSER ngram&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯é•¿é™åˆ¶&lt;/strong&gt;ï¼šé»˜è®¤å¿½ç•¥é•¿åº¦å°äº4ï¼ˆInnoDBï¼‰æˆ–å°äº4ï¼ˆMyISAMï¼‰çš„å•è¯ã€‚å¯¹äºä¸­æ–‡æœ¬åœ°åŒ–ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´&lt;code&gt;innodb_ft_min_token_size&lt;/code&gt;æˆ–&lt;code&gt;ft_min_word_len&lt;/code&gt;ç­‰ç³»ç»Ÿå˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;ï¼šå…¨æ–‡ç´¢å¼•çš„åˆ›å»ºå’Œç»´æŠ¤ä¼šå ç”¨é¢å¤–ç£ç›˜ç©ºé—´ï¼Œå¹¶å¯èƒ½å½±å“æ•°æ®æ’å…¥å’Œæ›´æ–°çš„é€Ÿåº¦ã€‚å¯¹äºå†™å…¥éå¸¸é¢‘ç¹çš„è¡¨éœ€è°¨æ…ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœç”¨è¯&lt;/strong&gt;ï¼šå¸¸è§è¯æ±‡ï¼ˆåœç”¨è¯ï¼‰ä¼šè¢«å¿½ç•¥ä¸”ä¸å‚ä¸ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œæœç´¢â€œthe storyâ€å¯èƒ½åªä¼šåŒ¹é…â€œstoryâ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢è¯­æ³•&lt;/strong&gt;ï¼šå¿…é¡»ä½¿ç”¨&lt;code&gt;MATCH ... AGAINST&lt;/code&gt;è¯­æ³•æ‰èƒ½è§¦å‘å…¨æ–‡ç´¢å¼•ï¼Œä½¿ç”¨&lt;code&gt;LIKE '%keyword%'&lt;/code&gt;æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQLçš„å…¨æ–‡æœç´¢æ˜¯å¤„ç†æ–‡æœ¬å†…å®¹æŸ¥è¯¢çš„åˆ©å™¨ï¼Œå°¤å…¶é€‚ç”¨äºåšå®¢ã€æ–°é—»ç½‘ç«™ã€ç”µå•†å¹³å°å•†å“æœç´¢ã€çŸ¥è¯†åº“ç­‰æ–‡æœ¬å¯†é›†å‹åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå®ƒèƒ½ç†è§£è¯­ä¹‰ç›¸å…³æ€§è€Œä¸ä»…æ˜¯å­—ç¬¦åŒ¹é…ã€‚è¦æŒæ¡å®ƒï¼Œå…³é”®æ˜¯ç†è§£ä¸‰ç§æœç´¢æ¨¡å¼çš„åŒºåˆ«å¹¶æ­£ç¡®åˆ›å»ºç´¢å¼•ã€‚å¯¹äºä¸­æ–‡ç¯å¢ƒï¼ŒåŠ¡å¿…é…ç½®&lt;code&gt;ngram&lt;/code&gt;åˆ†è¯å™¨ä»¥è·å¾—ç†æƒ³æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨MySQLçš„å…¨æ–‡åŒ¹é…åŠŸèƒ½ï¼&lt;/p&gt;
&lt;h2 id="ç´¢å¼•å¤±æ•ˆ"&gt;ç´¢å¼•å¤±æ•ˆ
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ£€æŸ¥é¡¹&lt;/th&gt;
&lt;th style="text-align: left"&gt;é€šè¿‡æ ‡å‡†&lt;/th&gt;
&lt;th style="text-align: left"&gt;å·¥å…·å‘½ä»¤&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ‰§è¡Œè®¡åˆ’ç±»å‹ type&lt;/td&gt;
&lt;td style="text-align: left"&gt;é ALL&lt;/td&gt;
&lt;td style="text-align: left"&gt;EXPLAIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•å‘½ä¸­ key&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ˜¾ç¤ºç´¢å¼•å&lt;/td&gt;
&lt;td style="text-align: left"&gt;EXPLAIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ‰«æè¡Œæ•° rows&lt;/td&gt;
&lt;td style="text-align: left"&gt;&amp;lt; æ€»è¡Œæ•°Ã—1%&lt;/td&gt;
&lt;td style="text-align: left"&gt;EXPLAIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;éšå¼è½¬æ¢/å‡½æ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ—æ— è®¡ç®—æˆ–è½¬æ¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä»£ç å®¡æŸ¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è”åˆç´¢å¼•é¡ºåº&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŸ¥è¯¢æ¡ä»¶åŒ¹é…æœ€å·¦å‰ç¼€&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•è®¾è®¡æ–‡æ¡£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç»Ÿè®¡ä¿¡æ¯æ›´æ–°&lt;/td&gt;
&lt;td style="text-align: left"&gt;æœ€è¿‘1å‘¨å†…æ‰§è¡Œè¿‡ ANALYZE&lt;/td&gt;
&lt;td style="text-align: left"&gt;SHOW TABLE STATUS&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœºæ™¯1ï¼šç ´åç´¢å¼•ç»“æ„&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¤±æ•ˆåŸå› &lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®å¤æ–¹æ¡ˆ&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†æ¯”å–»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ—ç”¨å‡½æ•°&lt;/td&gt;
&lt;td style="text-align: left"&gt;SELECT &amp;hellip; WHERE UPPER(name)=&amp;lsquo;ALICE&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;å‡½æ•°ç§»å‡ºåˆ—ï¼šname = UPPER(&amp;lsquo;alice&amp;rsquo;)&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¿®æ”¹é’¥åŒ™å½¢çŠ¶ï¼ˆå‡½æ•°æ‰­æ›²æ•°æ®ï¼‰â†’ æ— æ³•å¼€é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;éšå¼ç±»å‹è½¬æ¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;phoneï¼ˆVARCHARï¼‰ä¸ WHERE phone=13812345678ï¼ˆæ•°å­—ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç±»å‹ç»Ÿä¸€ï¼šphone=&amp;lsquo;13812345678&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è‹±æ–‡ä¹¦ç”¨ä¸­æ–‡ç›®å½•æŸ¥æ‰¾ â†’ æ— æ³•åŒ¹é…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ—å‚ä¸è®¡ç®—&lt;/td&gt;
&lt;td style="text-align: left"&gt;WHERE salary*1.1 &amp;gt; 5000&lt;/td&gt;
&lt;td style="text-align: left"&gt;è®¡ç®—ç§»å‡ºåˆ—ï¼šsalary &amp;gt; 5000/1.1&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç ´åç´¢å¼•æ•°å€¼è¿ç»­æ€§ â†’ å¯¼èˆªå¤±æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœºæ™¯2ï¼šè¿åç´¢å¼•ä½¿ç”¨è§„åˆ™&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¤±æ•ˆåŸå› &lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®å¤æ–¹æ¡ˆ&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†æ¯”å–»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;è”åˆç´¢å¼•è·³è¿‡æœ€å·¦åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼• (age,name)ï¼ŒæŸ¥è¯¢ WHERE name=&amp;lsquo;Alice&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;è¡¥å…¨æœ€å·¦åˆ— æˆ– æ–°å»ºå•åˆ—ç´¢å¼•&lt;/td&gt;
&lt;td style="text-align: left"&gt;æŸ¥å­—å…¸è·³è¿‡æ‹¼éŸ³é¦–å­—æ¯ â†’ åªèƒ½æ•´æœ¬ç¿»&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;LIKE å‰å¯¼é€šé…ç¬¦&lt;/td&gt;
&lt;td style="text-align: left"&gt;WHERE name LIKE &amp;lsquo;%Alice&amp;rsquo;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¹ç”¨åç¼€ç´¢å¼• æˆ– å…¨æ–‡æ£€ç´¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¨¡ç³ŠæŸ¥æ‰¾ä¹¦åä¸­é—´å­— â†’ æ— æ³•ç”¨ç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;OR è¿æ¥éç´¢å¼•åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;WHERE age=25 OR address=&amp;lsquo;Beijing&amp;rsquo;ï¼ˆaddressæ— ç´¢å¼•ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ‹†ä¸º UNION æˆ– ä¸ºaddresså»ºç´¢å¼•&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸¤æŠŠé’¥åŒ™ä¸€æŠŠç”Ÿé”ˆ â†’ æ”¾å¼ƒå¼€é”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœºæ™¯3ï¼šä¼˜åŒ–å™¨ä¸»åŠ¨å¼ƒç”¨ç´¢å¼•&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;å¤±æ•ˆåŸå› &lt;/th&gt;
&lt;th style="text-align: left"&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;th style="text-align: left"&gt;ä¿®å¤æ–¹æ¡ˆ&lt;/th&gt;
&lt;th style="text-align: left"&gt;åŸç†æ¯”å–»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;æ•°æ®é‡è¿‡å°‘&lt;/td&gt;
&lt;td style="text-align: left"&gt;100è¡Œå°è¡¨æŸ¥è¯¢&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ— éœ€ä¿®å¤ï¼Œå…¨è¡¨æ‰«ææ›´å¿«&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ‰¾å°åŒº3æˆ·äºº â†’ é—®ä¿å®‰æ¯”æŸ¥åœ°å›¾å¿«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ä½é€‰æ‹©æ€§åˆ—&lt;/td&gt;
&lt;td style="text-align: left"&gt;gender åˆ—ï¼ˆå€¼åªæœ‰&amp;rsquo;M&amp;rsquo;/&amp;lsquo;F&amp;rsquo;ï¼‰å»ºç´¢å¼•&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ”¹ç”¨å¤åˆç´¢å¼•ï¼ˆå¦‚ (gender,age)ï¼‰&lt;/td&gt;
&lt;td style="text-align: left"&gt;90%ä½æˆ·å§“â€œå¼ â€â†’ æŒ‰å§“æ°æŸ¥æ— æ„ä¹‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;ç»Ÿè®¡ä¿¡æ¯è¿‡æœŸ&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç´¢å¼•åˆ›å»ºåæœªæ›´æ–°ç»Ÿè®¡ä¿¡æ¯&lt;/td&gt;
&lt;td style="text-align: left"&gt;å®šæœŸæ‰§è¡Œ ANALYZE TABLE&lt;/td&gt;
&lt;td style="text-align: left"&gt;åœ°å›¾æœªæ›´æ–°æ–°é“è·¯ â†’ å¯¼èˆªç»•è¿œè·¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="show-status"&gt;SHOW STATUS
&lt;/h2&gt;&lt;p&gt;MySQLçš„ &lt;code&gt;SHOW STATUS&lt;/code&gt;å‘½ä»¤æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å†…ç½®è¯Šæ–­å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹æœåŠ¡å™¨çš„è¿è¡Œæ—¶çŠ¶æ€ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ·±å…¥äº†è§£æ•°æ®åº“çš„æ€§èƒ½è¡¨ç°ã€èµ„æºä½¿ç”¨æƒ…å†µä»¥åŠå„ç§æ“ä½œçš„æ‰§è¡Œé¢‘ç‡ã€‚ä¸‹é¢æˆ‘å°†ä»æ ¸å¿ƒç”¨é€”ã€å…³é”®çŠ¶æ€å˜é‡è§£è¯»ä»¥åŠå®é™…åº”ç”¨åœºæ™¯ç­‰æ–¹é¢ä¸ºæ‚¨è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id="-å‘½ä»¤æ¦‚è¿°ä¸åŸºæœ¬è¯­æ³•"&gt;ğŸ” å‘½ä»¤æ¦‚è¿°ä¸åŸºæœ¬è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;ç”¨äºæ˜¾ç¤ºMySQLæœåŠ¡å™¨çš„çŠ¶æ€å˜é‡ä¿¡æ¯ã€‚è¿™äº›çŠ¶æ€å˜é‡æ˜¯åªè¯»çš„ï¼Œè®°å½•äº†è‡ªæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥æˆ–å½“å‰ä¼šè¯æœŸé—´çš„å„ç±»ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW [GLOBAL | SESSION] STATUS [LIKE &amp;#39;pattern&amp;#39; | WHERE expr];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸä¿®é¥°ç¬¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GLOBAL&lt;/code&gt;ï¼šæ˜¾ç¤ºæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥çš„&lt;strong&gt;å…¨å±€ç´¯è®¡&lt;/strong&gt;çŠ¶æ€å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SESSION&lt;/code&gt;ï¼šæ˜¾ç¤º&lt;strong&gt;å½“å‰ä¼šè¯&lt;/strong&gt;ï¼ˆè¿æ¥ï¼‰çš„çŠ¶æ€å€¼ã€‚è¿™æ˜¯é»˜è®¤é€‰é¡¹ï¼Œ&lt;code&gt;LOCAL&lt;/code&gt;æ˜¯ &lt;code&gt;SESSION&lt;/code&gt;çš„åŒä¹‰è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æœè¿‡æ»¤&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨ &lt;code&gt;LIKE&lt;/code&gt;å­å¥ï¼ˆæ”¯æŒ&lt;code&gt;%&lt;/code&gt;å’Œ&lt;code&gt;_&lt;/code&gt;é€šé…ç¬¦ï¼‰æˆ– &lt;code&gt;WHERE&lt;/code&gt;å­å¥æ¥ç­›é€‰æ„Ÿå…´è¶£çš„å˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…³é”®çŠ¶æ€å˜é‡è§£è¯»"&gt;ğŸ“Š å…³é”®çŠ¶æ€å˜é‡è§£è¯»
&lt;/h3&gt;&lt;p&gt;MySQLæä¾›äº†æ•°ç™¾ä¸ªçŠ¶æ€å˜é‡ï¼Œä¸‹è¡¨å°†å®ƒä»¬åˆ†ç±»å¹¶è§£é‡Šäº†å…¶ä¸­ä¸€äº›æœ€å¸¸ç”¨äºæ€§èƒ½åˆ†æçš„å…³é”®å˜é‡ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç±»åˆ«&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å˜é‡å&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸­æ–‡è§£é‡Šä¸è¯Šæ–­ä»·å€¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥ä¸çº¿ç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Connections&lt;/code&gt; &lt;code&gt;Threads_connected&lt;/code&gt; &lt;code&gt;Threads_running&lt;/code&gt; &lt;code&gt;Aborted_connects&lt;/code&gt; &lt;code&gt;Aborted_clients&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è‡ªæœåŠ¡å™¨å¯åŠ¨ä»¥æ¥å°è¯•è¿æ¥çš„æ€»æ¬¡æ•°ã€‚ &lt;strong&gt;å½“å‰æ‰“å¼€çš„è¿æ¥æ•°&lt;/strong&gt;ã€‚è‹¥æ¥è¿‘&lt;code&gt;max_connections&lt;/code&gt;ï¼Œå¯èƒ½é¢„ç¤ºè¿æ¥æ± ä¸è¶³ã€‚ &lt;strong&gt;å½“å‰éä¼‘çœ çš„æ´»è·ƒçº¿ç¨‹æ•°&lt;/strong&gt;ã€‚è‹¥æŒç»­è¿‡é«˜ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è´Ÿè½½è¾ƒé‡ã€‚ å¤±è´¥çš„è¿æ¥å°è¯•æ¬¡æ•°ã€‚è¿‡é«˜å¯èƒ½æ„å‘³ç€ç½‘ç»œé—®é¢˜æˆ–æœ€å¤§è¿æ¥æ•°é™åˆ¶ã€‚ å®¢æˆ·ç«¯æœªæ­£ç¡®å…³é—­å¯¼è‡´çš„è¿æ¥ä¸­æ–­æ•°ã€‚å¯èƒ½ä¸åº”ç”¨è¿æ¥ç®¡ç†æœ‰å…³ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢æ“ä½œç»Ÿè®¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Com_select&lt;/code&gt;, &lt;code&gt;Com_insert&lt;/code&gt;, &lt;code&gt;Com_update&lt;/code&gt;, &lt;code&gt;Com_delete&lt;/code&gt; &lt;code&gt;Questions&lt;/code&gt; &lt;code&gt;Slow_queries&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å„ç±»SQLè¯­å¥ï¼ˆSELECT/INSERT/UPDATE/DELETEï¼‰&lt;strong&gt;æ‰§è¡Œçš„æ¬¡æ•°&lt;/strong&gt;ã€‚ æœåŠ¡å™¨æ”¶åˆ°çš„æŸ¥è¯¢/å‘½ä»¤æ€»æ•°ï¼ˆé€šå¸¸æ¯”&lt;code&gt;Com_*&lt;/code&gt;æ€»å’Œæ›´å…¨é¢ï¼‰ã€‚ æ‰§è¡Œæ—¶é—´è¶…è¿‡&lt;code&gt;long_query_time&lt;/code&gt;çš„&lt;strong&gt;æ…¢æŸ¥è¯¢æ•°é‡&lt;/strong&gt;ã€‚ç›‘æ§æ­¤å€¼æœ‰åŠ©äºå‘ç°æ€§èƒ½é—®é¢˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•ä½¿ç”¨æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Handler_read_first&lt;/code&gt; &lt;code&gt;Handler_read_key&lt;/code&gt; &lt;code&gt;Handler_read_next&lt;/code&gt; &lt;code&gt;Handler_read_prev&lt;/code&gt; &lt;code&gt;Handler_read_rnd&lt;/code&gt; &lt;code&gt;Handler_read_rnd_next&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¯»å–ç´¢å¼•å¤´ç»“ç‚¹çš„æ¬¡æ•°&lt;/strong&gt;ã€‚é«˜å€¼å¯èƒ½è¡¨ç¤ºå…¨ç´¢å¼•æ‰«æè¾ƒå¤šã€‚ &lt;strong&gt;é€šè¿‡é”®å€¼ï¼ˆç´¢å¼•ï¼‰è¯»å–è¡Œçš„æ¬¡æ•°&lt;/strong&gt;ã€‚é«˜å€¼é€šå¸¸è¡¨æ˜ç´¢å¼•ä½¿ç”¨è‰¯å¥½ã€‚ æŒ‰é”®é¡ºåºè¯»ä¸‹ä¸€è¡Œçš„æ¬¡æ•°ï¼ˆèŒƒå›´æ‰«æï¼‰ã€‚ æŒ‰é”®é¡ºåºè¯»ä¸Šä¸€è¡Œçš„æ¬¡æ•°ï¼ˆå¦‚ORDER BY DESCï¼‰ã€‚ &lt;strong&gt;åŸºäºå›ºå®šä½ç½®è¯»è¡Œçš„è¯·æ±‚æ•°&lt;/strong&gt;ã€‚é«˜å€¼å¯èƒ½æ„å‘³ç€éœ€è¦æ’åºçš„æŸ¥è¯¢å¤šæˆ–æœªç”¨ç´¢å¼•ã€‚ &lt;strong&gt;è¿›è¡Œå…¨è¡¨æ‰«ææ—¶è¯»å–ä¸‹ä¸€è¡Œçš„è¯·æ±‚æ•°&lt;/strong&gt;ã€‚&lt;strong&gt;æ­¤å€¼å¼‚å¸¸é«˜æ˜¯è¡¨ç¼ºå°‘åˆé€‚ç´¢å¼•çš„å¼ºçƒˆä¿¡å·&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;InnoDBå­˜å‚¨å¼•æ“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Innodb_buffer_pool_read_requests&lt;/code&gt; &lt;code&gt;Innodb_buffer_pool_reads&lt;/code&gt; &lt;code&gt;Innodb_rows_read&lt;/code&gt; &lt;code&gt;Innodb_rows_inserted&lt;/code&gt; &lt;code&gt;Innodb_rows_updated&lt;/code&gt; &lt;code&gt;Innodb_rows_deleted&lt;/code&gt; &lt;code&gt;Innodb_row_lock_time_avg&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å‘InnoDBç¼“å†²æ± å‘èµ·çš„&lt;strong&gt;é€»è¾‘è¯»è¯·æ±‚æ•°&lt;/strong&gt;ã€‚ &lt;strong&gt;ä»ç£ç›˜è¿›è¡Œçš„ç‰©ç†è¯»æ¬¡æ•°&lt;/strong&gt;ã€‚&lt;strong&gt;è®¡ç®—ç¼“å†²æ± å‘½ä¸­ç‡çš„å…³é”®æŒ‡æ ‡&lt;/strong&gt;ã€‚ InnoDBå­˜å‚¨å¼•æ“å±‚&lt;strong&gt;è¯»å–ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤çš„è¡Œæ•°&lt;/strong&gt;ï¼Œæ¯”&lt;code&gt;Com_*&lt;/code&gt;æ›´æ¥è¿‘å®é™…æ•°æ®æ“ä½œé‡ã€‚ è¡Œé”å®šçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚é«˜å€¼è¡¨ç¤ºå­˜åœ¨é”ç«äº‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸´æ—¶è¡¨ä¸ç¼“å­˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Created_tmp_tables&lt;/code&gt; &lt;code&gt;Created_tmp_disk_tables&lt;/code&gt; &lt;code&gt;Table_open_cache_hits&lt;/code&gt; &lt;code&gt;Table_open_cache_misses&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œè¯­å¥æ—¶&lt;strong&gt;åˆ›å»ºçš„å†…éƒ¨ä¸´æ—¶è¡¨æ€»æ•°&lt;/strong&gt;ã€‚ &lt;strong&gt;åœ¨ç£ç›˜ä¸Šåˆ›å»ºçš„å†…éƒ¨ä¸´æ—¶è¡¨æ•°&lt;/strong&gt;ã€‚&lt;strong&gt;è‹¥æ­¤å€¼å æ¯”é«˜ï¼Œéœ€ä¼˜åŒ–æŸ¥è¯¢æˆ–è°ƒæ•´&lt;code&gt;tmp_table_size&lt;/code&gt;ç­‰å‚æ•°&lt;/strong&gt;ã€‚ è¡¨ç¼“å­˜&lt;strong&gt;å‘½ä¸­ä¸æœªå‘½ä¸­çš„æ¬¡æ•°&lt;/strong&gt;ã€‚ç¼“å­˜å‘½ä¸­ç‡ä½å¯è€ƒè™‘å¢å¤§&lt;code&gt;table_open_cache&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®é™…åº”ç”¨ä¸æ€§èƒ½åˆ†æå®è·µ"&gt;ğŸ’¡ å®é™…åº”ç”¨ä¸æ€§èƒ½åˆ†æå®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®æ—¶å¿«ç…§ä¸ç›‘æ§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;å¯ä»¥å¿«é€Ÿè·å–æ•°æ®åº“è‡ªå¯åŠ¨ä»¥æ¥çš„æ•´ä½“è¿è¡Œå¥åº·çŠ¶å†µã€‚å®šæœŸæ‰§è¡Œï¼ˆå¦‚æ¯åˆ†é’Ÿï¼‰å¹¶è®¡ç®—å·®å€¼ï¼Œå¯ä»¥ç›‘æ§å…³é”®æŒ‡æ ‡çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¸¸ç”¨äºæ„å»ºæ•°æ®åº“ç›‘æ§ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¡ç®—å…³é”®æ€§èƒ½æ¯”ç‡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;InnoDBç¼“å†²æ± å‘½ä¸­ç‡&lt;/strong&gt;ï¼šè¿™åæ˜ äº†æ•°æ®ä»å†…å­˜ä¸­è¯»å–çš„æ¯”ä¾‹ï¼Œæ˜¯è¡¡é‡InnoDBæ€§èƒ½çš„å…³é”®æŒ‡æ ‡ã€‚ç†æƒ³æƒ…å†µä¸‹åº”é«˜äº99%ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Hit Rate = (1 - Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests) * 100%&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸´æ—¶è¡¨ç£ç›˜åˆ›å»ºç‡&lt;/strong&gt;ï¼šå¦‚æœç£ç›˜ä¸´æ—¶è¡¨å æ¯”è¿‡é«˜ï¼Œå¯èƒ½éœ€è¦ä¼˜åŒ–å¯¼è‡´ä¸´æ—¶è¡¨çš„æŸ¥è¯¢ï¼ˆå¦‚ä½¿ç”¨å¤§æ–‡ä»¶æ’åºæˆ–æœªç´¢å¼•çš„è”æ¥ï¼‰ï¼Œæˆ–è€…é€‚å½“å¢åŠ  &lt;code&gt;tmp_table_size&lt;/code&gt;å’Œ &lt;code&gt;max_heap_table_size&lt;/code&gt;å‚æ•°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Disk Temp Table Ratio = (Created_tmp_disk_tables / Created_tmp_tables) * 100%&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯Šæ–­ç‰¹å®šé—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•å¤±æ•ˆ&lt;/strong&gt;ï¼šå¦‚æœå‘ç° &lt;code&gt;Handler_read_rnd_next&lt;/code&gt;çš„å€¼å¼‚å¸¸é«˜ï¼Œè€Œ &lt;code&gt;Handler_read_key&lt;/code&gt;çš„å€¼ç›¸å¯¹è¾ƒä½ï¼Œè¿™é€šå¸¸æ„å‘³ç€æ•°æ®åº“æ­£åœ¨æ‰§è¡Œå¤§é‡çš„å…¨è¡¨æ‰«æï¼Œæ˜¯ç´¢å¼•ç¼ºå¤±æˆ–æŸ¥è¯¢æœªä½¿ç”¨ç´¢å¼•çš„å…¸å‹è¡¨ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æ•°å¼‚å¸¸&lt;/strong&gt;ï¼šç›‘æ§ &lt;code&gt;Threads_connected&lt;/code&gt;æ˜¯å¦æ¥è¿‘ &lt;code&gt;max_connections&lt;/code&gt;é™åˆ¶ï¼Œå¹¶ç»“åˆ &lt;code&gt;Aborted_connects&lt;/code&gt;å’Œ &lt;code&gt;Aborted_clients&lt;/code&gt;æ’æŸ¥è¿æ¥é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡ç½®çŠ¶æ€å€¼&lt;/strong&gt;ï¼šå¤§å¤šæ•°çŠ¶æ€å˜é‡æ˜¯ç´¯è®¡å€¼ï¼Œ&lt;strong&gt;æœåŠ¡å™¨é‡å¯ä¼šå°†å…¶é‡ç½®ä¸ºé›¶&lt;/strong&gt;ã€‚å› æ­¤ï¼Œè¿›è¡Œæ€§èƒ½åˆ†ææ—¶ï¼Œå…³æ³¨ä¸€æ®µæ—¶é—´å†…çš„&lt;strong&gt;å¢é‡å˜åŒ–&lt;/strong&gt;ï¼ˆå½“å‰å€¼å‡å»ä¹‹å‰è®°å½•çš„å€¼ï¼‰æ¯”ç»å¯¹å€¼æ›´æœ‰æ„ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™è¦æ±‚ä½&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SHOW STATUS&lt;/code&gt;å‘½ä»¤åªéœ€è¦èƒ½å¤Ÿè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œé€šå¸¸ä¸éœ€è¦ç‰¹æ®Šæƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡æ¯æºå¤šæ ·&lt;/strong&gt;ï¼šé™¤äº† &lt;code&gt;SHOW STATUS&lt;/code&gt;å‘½ä»¤ï¼ŒçŠ¶æ€ä¿¡æ¯è¿˜å¯ä»¥é€šè¿‡æŸ¥è¯¢ &lt;code&gt;INFORMATION_SCHEMA&lt;/code&gt;æ•°æ®åº“ä¸­çš„ &lt;code&gt;GLOBAL_STATUS&lt;/code&gt;å’Œ &lt;code&gt;SESSION_STATUS&lt;/code&gt;è¡¨ï¼Œæˆ–ä½¿ç”¨ &lt;code&gt;mysqladmin extended-status&lt;/code&gt;å·¥å…·å‘½ä»¤æ¥è·å–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;æ˜¯MySQLæ•°æ®åº“æ€§èƒ½åˆ†æå’Œæ—¥å¸¸è¿ç»´ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚é€šè¿‡ç†Ÿç»ƒæŸ¥çœ‹å’Œç†è§£å…³é”®çŠ¶æ€å˜é‡ï¼Œæ‚¨å¯ä»¥æ·±å…¥äº†è§£æ•°æ®åº“çš„å†…éƒ¨è¿ä½œæƒ…å†µï¼Œç²¾å‡†å®šä½å¦‚ç´¢å¼•å¤±æ•ˆã€ç¼“å†²æ± ä¸è¶³ã€è¿æ¥å¼‚å¸¸ç­‰æ€§èƒ½ç“¶é¢ˆï¼Œä»è€Œè¿›è¡Œæœ‰æ•ˆçš„è°ƒä¼˜ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°åˆ©ç”¨ &lt;code&gt;SHOW STATUS&lt;/code&gt;æ¥ä¿éšœæ•°æ®åº“çš„ç¨³å®šé«˜æ•ˆè¿è¡Œï¼å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šçŠ¶æ€å˜é‡æˆ–åº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="show-table-status"&gt;SHOW TABLE STATUS
&lt;/h2&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;å‘½ä»¤æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å†…ç½®è¯Šæ–­å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹æ•°æ®åº“ä¸­è¡¨çš„è¯¦ç»†çŠ¶æ€ä¿¡æ¯ï¼Œå¸®åŠ©ä½ æ·±å…¥äº†è§£è¡¨çš„å­˜å‚¨æƒ…å†µã€æ•°æ®é‡ä»¥åŠæ€§èƒ½ç›¸å…³æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;h3 id="-å‘½ä»¤è¯­æ³•ä¸åŸºæœ¬ç”¨æ³•"&gt;ğŸ” å‘½ä»¤è¯­æ³•ä¸åŸºæœ¬ç”¨æ³•
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;ç”¨äºæ˜¾ç¤ºè¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SHOW TABLE STATUS [{FROM | IN} db_name] [LIKE &amp;#39;pattern&amp;#39; | WHERE expr];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;FROM db_name&lt;/code&gt;æˆ– &lt;code&gt;IN db_name&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¦æŸ¥çœ‹çš„æ•°æ®åº“ã€‚å¦‚æœçœç•¥ï¼Œåˆ™æ˜¾ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;LIKE 'pattern'&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºè¿‡æ»¤è¡¨åï¼Œæ”¯æŒ &lt;code&gt;%&lt;/code&gt;å’Œ &lt;code&gt;_&lt;/code&gt;é€šé…ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WHERE expr&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºä½¿ç”¨æ›´ä¸€èˆ¬çš„æ¡ä»¶è¿›è¡Œè¿‡æ»¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SHOW TABLE STATUS;&lt;/code&gt;&amp;ndash; æ˜¾ç¤ºå½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SHOW TABLE STATUS FROM mydb LIKE 'user%';&lt;/code&gt;&amp;ndash; æ˜¾ç¤ºæ•°æ®åº“ &lt;code&gt;mydb&lt;/code&gt;ä¸­è¡¨åä»¥ &lt;code&gt;user&lt;/code&gt;å¼€å¤´çš„è¡¨çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SHOW TABLE STATUS FROM mydb LIKE 'esf_seller_history'\G&lt;/code&gt;&amp;ndash; ä½¿ç”¨ &lt;code&gt;\G&lt;/code&gt;æ›¿ä»£ &lt;code&gt;;&lt;/code&gt;å¯ä»¥ä½¿ç»“æœå‚ç›´æ˜¾ç¤ºï¼Œè¿™åœ¨åˆ—å¾ˆå¤šæ—¶æ›´ä¾¿äºé˜…è¯»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-è¾“å‡ºå­—æ®µè¯¦è§£"&gt;ğŸ“Š è¾“å‡ºå­—æ®µè¯¦è§£
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„è¾“å‡ºåŒ…å«å¤§é‡ä¿¡æ¯ï¼Œä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›æœ€å…³é”®çš„å­—æ®µåŠå…¶å«ä¹‰ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å­—æ®µå&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è§£é‡Šä¸è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Name&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„åç§°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Engine&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„&lt;strong&gt;å­˜å‚¨å¼•æ“&lt;/strong&gt;ï¼ˆå¦‚ InnoDBã€MyISAMï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Version&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„ &lt;code&gt;.frm&lt;/code&gt;æ–‡ä»¶çš„ç‰ˆæœ¬å·ã€‚åœ¨æ›´é«˜ç‰ˆæœ¬çš„ MySQL ä¸­ï¼Œæ­¤å€¼å¯èƒ½ä¸ºå›ºå®šå€¼ï¼ˆå¦‚ 10ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Row_format&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡Œçš„å­˜å‚¨æ ¼å¼&lt;/strong&gt;ï¼ˆå¦‚ Dynamicã€Fixedã€Compressedã€Compactã€Redundantï¼‰ã€‚Dynamic æ ¼å¼é€šå¸¸ç”¨äºåŒ…å«å¯å˜é•¿å­—æ®µï¼ˆå¦‚ VARCHAR, BLOBï¼‰çš„è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ä¸­çš„è¡Œæ•°&lt;/strong&gt;ã€‚&lt;strong&gt;ç‰¹åˆ«æ³¨æ„&lt;/strong&gt;ï¼šå¯¹äº MyISAM ç­‰å¼•æ“ï¼Œæ­¤å€¼æ˜¯&lt;strong&gt;ç²¾ç¡®çš„&lt;/strong&gt;ï¼›ä½†å¯¹äº InnoDBï¼Œæ­¤å€¼æ˜¯ä¸€ä¸ª&lt;strong&gt;ä¼°è®¡å€¼&lt;/strong&gt;ï¼Œä¸å®é™…è¡Œæ•°å¯èƒ½å­˜åœ¨ 40% åˆ° 50% çš„è¯¯å·®ã€‚è¦è·å–ç²¾ç¡®è¡Œæ•°ï¼Œè¯·ä½¿ç”¨ &lt;code&gt;SELECT COUNT(*)&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Avg_row_length&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³å‡æ¯è¡Œçš„å­—èŠ‚æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Data_length&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨æ•°æ®çš„æ€»å¤§å°&lt;/strong&gt;ï¼ˆå­—èŠ‚ï¼‰ã€‚å¯¹äº InnoDBï¼Œè¿™é€šå¸¸æ˜¯&lt;strong&gt;èšç°‡ç´¢å¼•ï¼ˆä¸»é”®ç´¢å¼•ï¼‰çš„è¿‘ä¼¼å¤§å°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Index_length&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•çš„æ€»å¤§å°&lt;/strong&gt;ï¼ˆå­—èŠ‚ï¼‰ã€‚å¯¹äº InnoDBï¼Œè¿™æ˜¯&lt;strong&gt;éèšç°‡ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰çš„è¿‘ä¼¼å¤§å°&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å·²åˆ†é…ä½†æœªä½¿ç”¨çš„ç©ºé—´&lt;/strong&gt;ï¼ˆå­—èŠ‚ï¼‰ï¼Œé€šå¸¸ç§°ä¸º&lt;strong&gt;æ•°æ®ç¢ç‰‡&lt;/strong&gt;ã€‚å¯¹äº InnoDBï¼Œå®ƒè¡¨ç¤ºè¡¨æ‰€å±è¡¨ç©ºé—´çš„å‰©ä½™ç©ºé—´ã€‚å³ä½¿æ˜¾ç¤ºä¸º 0ï¼Œåªè¦ä¸åˆ†é…æ–°åŒºåŸŸï¼Œä»å¯æ’å…¥æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Auto_increment&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸‹ä¸€ä¸ª AUTO_INCREMENT å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Create_time&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„åˆ›å»ºæ—¶é—´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Update_time&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®æ–‡ä»¶æœ€åä¸€æ¬¡æ›´æ–°æ—¶é—´ã€‚å¯¹äºæŸäº›å­˜å‚¨å¼•æ“ï¼ˆå¦‚ InnoDBï¼‰ï¼Œæ­¤å€¼å¯èƒ½ä¸º NULL æˆ–ä¸å‡†ç¡®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Check_time&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨æœ€åä¸€æ¬¡è¢«æ£€æŸ¥çš„æ—¶é—´ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;CHECK TABLE&lt;/code&gt;å‘½ä»¤ï¼‰ã€‚å¹¶éæ‰€æœ‰å¼•æ“éƒ½æ›´æ–°æ­¤å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Collation&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¡¨çš„é»˜è®¤å­—ç¬¦é›†å’Œæ’åºè§„åˆ™ã€‚æ’åºè§„åˆ™åç§°é€šå¸¸ä»¥å­—ç¬¦é›†åç§°å¼€å¤´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Create_options&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºè¡¨æ—¶æŒ‡å®šçš„é¢å¤–é€‰é¡¹ï¼ˆå¦‚åˆ†åŒºä¿¡æ¯ã€åŠ å¯†è®¾ç½®ç­‰ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Comment&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ›å»ºè¡¨æ—¶æ·»åŠ çš„æ³¨é‡Šã€‚å¯¹äºè§†å›¾ï¼Œæ­¤å­—æ®µä¼šæ˜¾ç¤º &amp;lsquo;VIEW&amp;rsquo;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ ¸å¿ƒè¦ç‚¹ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ’¡ æ ¸å¿ƒè¦ç‚¹ä¸æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“å·®å¼‚&lt;/strong&gt;ï¼š&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„è®¸å¤šå­—æ®µå€¼ï¼ˆç‰¹åˆ«æ˜¯ &lt;code&gt;Rows&lt;/code&gt;ã€&lt;code&gt;Data_length&lt;/code&gt;ã€&lt;code&gt;Index_length&lt;/code&gt;ï¼‰çš„è§£é‡Šå’Œå‡†ç¡®æ€§&lt;strong&gt;é«˜åº¦ä¾èµ–äºå­˜å‚¨å¼•æ“&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼ŒInnoDB çš„ &lt;code&gt;Rows&lt;/code&gt;æ˜¯ä¼°è®¡å€¼ï¼Œè€Œ MyISAM çš„æ˜¯ç²¾ç¡®å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç¢ç‰‡ä¸ç©ºé—´å›æ”¶&lt;/strong&gt;ï¼š&lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt; å­—æ®µåæ˜ äº†ç©ºé—´ç¢ç‰‡ã€‚å¦‚æœè¿™ä¸ªå€¼å¾ˆå¤§ï¼Œè¯´æ˜è¡¨æœ‰å¤§é‡ç©ºé—´æœªè¢«åˆ©ç”¨ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;å‘½ä»¤æ¥é‡æ–°ç»„ç»‡è¡¨å¹¶å›æ”¶ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·å–ç²¾ç¡®è¡Œæ•°&lt;/strong&gt;ï¼šå¦‚å‰æ‰€è¿°ï¼Œå¯¹äº InnoDB è¡¨ï¼Œä¸è¦ä¾èµ– &lt;code&gt;Rows&lt;/code&gt;åˆ—æ¥è·å–ç²¾ç¡®è¡Œæ•°ã€‚åŠ¡å¿…ä½¿ç”¨ &lt;code&gt;SELECT COUNT(*) FROM table_name&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›¿ä»£æŸ¥è¯¢æ–¹å¼&lt;/strong&gt;ï¼š&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„ä¿¡æ¯ä¹Ÿå¯ä»¥ä» &lt;code&gt;INFORMATION_SCHEMA.TABLES&lt;/code&gt;è§†å›¾ä¸­æŸ¥è¯¢ã€‚è¿™ç§æ–¹å¼æ›´é€‚åˆè¿›è¡Œå¤æ‚çš„è¿‡æ»¤å’Œè¿æ¥æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æ˜¯ MySQL æ•°æ®åº“ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œå®ƒèƒ½æä¾›å…³äºè¡¨å¤§å°ã€è¡Œæ•°ã€å­˜å‚¨æ ¼å¼ç­‰ä¸°å¯Œä¿¡æ¯ã€‚ç†è§£å…¶è¾“å‡ºå­—æ®µçš„å«ä¹‰ï¼Œç‰¹åˆ«æ˜¯æ³¨æ„ä¸åŒå­˜å‚¨å¼•æ“çš„å·®å¼‚ï¼Œå¯¹äºå‡†ç¡®åˆ†æè¡¨çš„çŠ¶æ€è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°åˆ©ç”¨ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;ï¼å¦‚æœæ‚¨å¯¹æŸä¸ªç‰¹å®šå­—æ®µæˆ–åº”ç”¨åœºæ™¯æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="show-status--show-table-status"&gt;SHOW STATUS &amp;amp; SHOW TABLE STATUS
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;å’Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸¤ä¸ªåŠŸèƒ½ä¸åŒçš„è¯Šæ–­å‘½ä»¤ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºæŸ¥çœ‹æœåŠ¡å™¨çº§åˆ«çš„æ€§èƒ½æŒ‡æ ‡å’Œæ•°æ®åº“è¡¨çº§åˆ«çš„è¯¦ç»†ä¿¡æ¯ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº†å®ƒä»¬çš„æ ¸å¿ƒå·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;SHOW STATUS&lt;/th&gt;
&lt;th&gt;SHOW TABLE STATUS&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›‘æ§å±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æœåŠ¡å™¨çº§åˆ«&lt;/strong&gt;ï¼ˆServer-Levelï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨çº§åˆ«&lt;/strong&gt;ï¼ˆTable-Levelï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¿¡æ¯ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€æ€§èƒ½æŒ‡æ ‡&lt;/strong&gt;ï¼ˆè®¡æ•°å™¨ã€è®¡æ—¶å™¨ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é™æ€å…ƒæ•°æ®ä¸ç»Ÿè®¡ä¿¡æ¯&lt;/strong&gt;ï¼ˆè¡¨ç»“æ„ã€å­˜å‚¨ç©ºé—´ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨å±€ï¼ˆGLOBALï¼‰æˆ–å½“å‰ä¼šè¯ï¼ˆSESSIONï¼‰&lt;/td&gt;
&lt;td&gt;ç‰¹å®šæ•°æ®åº“ä¸­çš„è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½ç›‘æ§&lt;/strong&gt;ã€ç“¶é¢ˆè¯Šæ–­ã€è¶‹åŠ¿åˆ†æ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ç»´æŠ¤&lt;/strong&gt;ã€ç©ºé—´ç®¡ç†ã€ç»“æ„åˆ†æ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¾“å‡ºå˜é‡/å­—æ®µ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Connections&lt;/code&gt;, &lt;code&gt;Slow_queries&lt;/code&gt;, &lt;code&gt;Innodb_rows_read&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Name&lt;/code&gt;, &lt;code&gt;Engine&lt;/code&gt;, &lt;code&gt;Rows&lt;/code&gt;, &lt;code&gt;Data_length&lt;/code&gt;, &lt;code&gt;Index_length&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®ä¿¡æ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥æ•°ã€æŸ¥è¯¢é‡ã€ç¼“å­˜å‘½ä¸­ç‡ã€è¡Œæ“ä½œæ¬¡æ•°&lt;/td&gt;
&lt;td&gt;å­˜å‚¨å¼•æ“ã€è¡Œæ•°ä¼°ç®—ã€æ•°æ®ä¸ç´¢å¼•å¤§å°ã€ç¢ç‰‡æƒ…å†µ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸¤è€…å·®å¼‚"&gt;ğŸ’¡ æ·±å…¥ç†è§£ä¸¤è€…å·®å¼‚
&lt;/h3&gt;&lt;h4 id="-show-statusæœåŠ¡å™¨çš„å®æ—¶ä»ªè¡¨ç›˜"&gt;ğŸ” SHOW STATUSï¼šæœåŠ¡å™¨çš„â€œå®æ—¶ä»ªè¡¨ç›˜â€
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;SHOW STATUS&lt;/code&gt;ç”¨äºæŸ¥çœ‹MySQLæœåŠ¡å™¨çš„&lt;strong&gt;è¿è¡Œæ—¶çŠ¶æ€å˜é‡&lt;/strong&gt;ï¼Œè¿™äº›å˜é‡æ˜¯åŠ¨æ€å˜åŒ–çš„ç´¯è®¡å€¼ï¼Œåæ˜ äº†æœåŠ¡å™¨è‡ªå¯åŠ¨ä»¥æ¥çš„æ´»åŠ¨æƒ…å†µã€‚å®ƒå¸®åŠ©ä½ å›ç­”è¯¸å¦‚â€œæˆ‘çš„æ•°æ®åº“å¿™ä¸å¿™ï¼Ÿâ€â€œç“¶é¢ˆå¯èƒ½åœ¨å“ªé‡Œï¼Ÿâ€è¿™æ ·çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å˜é‡ä¸¾ä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Connections&lt;/code&gt;&lt;/strong&gt;ï¼šå°è¯•è¿æ¥MySQLæœåŠ¡å™¨çš„æ€»æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Threads_connected&lt;/code&gt;&lt;/strong&gt;ï¼šå½“å‰æ‰“å¼€çš„è¿æ¥æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Slow_queries&lt;/code&gt;&lt;/strong&gt;ï¼šæ‰§è¡Œæ—¶é—´è¶…è¿‡&lt;code&gt;long_query_time&lt;/code&gt;çš„æŸ¥è¯¢æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Innodb_rows_read&lt;/code&gt;&lt;/strong&gt;ï¼šInnoDBå­˜å‚¨å¼•æ“è¯»å–çš„è¡Œæ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Key_read_requests&lt;/code&gt;/ &lt;code&gt;Key_reads&lt;/code&gt;&lt;/strong&gt;ï¼šç»“åˆè¿™ä¸¤ä¸ªå€¼å¯ä»¥è®¡ç®—&lt;strong&gt;ç¼“å­˜å‘½ä¸­ç‡&lt;/strong&gt;ï¼Œåˆ¤æ–­ç´¢å¼•ç¼“å­˜ï¼ˆkey_bufferï¼‰æ˜¯å¦è¶³å¤Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½œç”¨åŸŸ&lt;/strong&gt;ï¼šå¯ä»¥ä½¿ç”¨&lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;æŸ¥çœ‹æœåŠ¡å™¨å¯åŠ¨ä»¥æ¥çš„å…¨å±€ç»Ÿè®¡ï¼Œæˆ–ç”¨&lt;code&gt;SHOW SESSION STATUS&lt;/code&gt;æŸ¥çœ‹å½“å‰ä¼šè¯çš„ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-show-table-statusè¡¨çš„ä½“æ£€æŠ¥å‘Š"&gt;ğŸ“Š SHOW TABLE STATUSï¼šè¡¨çš„â€œä½“æ£€æŠ¥å‘Šâ€
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;ç”¨äºæŸ¥çœ‹æ•°æ®åº“ä¸­è¡¨çš„&lt;strong&gt;è¯¦ç»†å±æ€§å’Œå­˜å‚¨ä¿¡æ¯&lt;/strong&gt;ã€‚å®ƒæä¾›çš„æ˜¯æŸä¸ªæ—¶é—´ç‚¹çš„è¡¨å…ƒæ•°æ®å¿«ç…§ï¼Œå¸®åŠ©ä½ äº†è§£è¡¨çš„â€œèº«ä½“çŠ¶å†µâ€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å­—æ®µä¸¾ä¾‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Name&lt;/code&gt;, &lt;code&gt;Engine&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨åå’Œä½¿ç”¨çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚InnoDBã€MyISAMï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨&lt;strong&gt;ä¼°ç®—&lt;/strong&gt;çš„è¡Œæ•°ã€‚å¯¹äºInnoDBè¡¨ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œç²¾ç¡®è¡Œæ•°éœ€ç”¨&lt;code&gt;SELECT COUNT(*)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Data_length&lt;/code&gt;&lt;/strong&gt;ï¼šè¡¨æ•°æ®çš„å¤§è‡´é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Index_length&lt;/code&gt;&lt;/strong&gt;ï¼šç´¢å¼•é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt;ï¼šå·²åˆ†é…ä½†æœªä½¿ç”¨çš„ç©ºé—´ï¼ˆ&lt;strong&gt;ç¢ç‰‡ç©ºé—´&lt;/strong&gt;ï¼‰ã€‚å¦‚æœå€¼å¾ˆå¤§ï¼Œè¡¨æ˜è¡¨å¯èƒ½æœ‰å¾ˆå¤šç¢ç‰‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨&lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;æ¥å›æ”¶ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨è¯­æ³•&lt;/strong&gt;ï¼š&lt;code&gt;SHOW TABLE STATUS FROM database_name [LIKE 'pattern']&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®é™…åº”ç”¨åœºæ™¯ä¸æŠ€å·§"&gt;ğŸ› ï¸ å®é™…åº”ç”¨åœºæ™¯ä¸æŠ€å·§
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½è°ƒä¼˜è”åŠ¨ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“ &lt;code&gt;SHOW STATUS&lt;/code&gt;ä¸­çš„ &lt;strong&gt;&lt;code&gt;Slow_queries&lt;/code&gt;&lt;/strong&gt; çªç„¶å¢é«˜æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æ…¢æŸ¥è¯¢æ—¥å¿—æ‰¾åˆ°å…·ä½“çš„æ…¢SQLï¼Œç„¶åç”¨ &lt;code&gt;EXPLAIN&lt;/code&gt;åˆ†æå…¶æ‰§è¡Œè®¡åˆ’ã€‚å¦‚æœå‘ç°ç–‘ä¼¼å…¨è¡¨æ‰«æï¼Œå¯ä»¥è¿›ä¸€æ­¥ç”¨ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æŸ¥çœ‹ç›¸å…³è¡¨çš„ &lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;&lt;/strong&gt; æ•°å’Œæ˜¯å¦æœ‰åˆé€‚çš„ç´¢å¼•ï¼ˆç»“åˆ &lt;code&gt;SHOW INDEX&lt;/code&gt;ï¼‰ï¼Œä»è€Œåˆ¤æ–­å…¨è¡¨æ‰«ææ˜¯å¦åˆç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´ç®¡ç†å’Œç»´æŠ¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®šæœŸæ‰§è¡Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æ¥ç›‘æ§ &lt;strong&gt;&lt;code&gt;Data_free&lt;/code&gt;&lt;/strong&gt;ï¼ˆç¢ç‰‡ç©ºé—´ï¼‰å’Œ &lt;strong&gt;&lt;code&gt;Data_length&lt;/code&gt;/&lt;code&gt;Index_length&lt;/code&gt;&lt;/strong&gt;ï¼ˆæ•°æ®/ç´¢å¼•å¤§å°ï¼‰ã€‚å¦‚æœ &lt;code&gt;Data_free&lt;/code&gt;è¿‡å¤§ï¼Œæˆ–è€…æŸäº›è¡¨ä½“ç§¯å¢é•¿å¼‚å¸¸ï¼Œå¯ä»¥è§„åˆ’å¿…è¦çš„ç»´æŠ¤æ“ä½œï¼Œå¦‚ &lt;code&gt;OPTIMIZE TABLE&lt;/code&gt;ï¼ˆä¼šé”è¡¨ï¼Œéœ€åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¹é‡è§„åˆ’&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;SHOW GLOBAL STATUS&lt;/code&gt;ä¸­çš„ &lt;strong&gt;&lt;code&gt;Connections&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;Max_used_connections&lt;/code&gt;&lt;/strong&gt; å¯ä»¥äº†è§£æœåŠ¡å™¨çš„è¿æ¥å‹åŠ›ï¼Œç»“åˆ &lt;code&gt;SHOW VARIABLES&lt;/code&gt;ä¸­çš„ &lt;code&gt;max_connections&lt;/code&gt;å‚æ•°ï¼Œè¯„ä¼°æ˜¯å¦éœ€è¦è°ƒæ•´æœ€å¤§è¿æ¥æ•°é™åˆ¶ã€‚åŒæ—¶ï¼Œ&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;æä¾›çš„è¡¨å¤§å°ä¿¡æ¯æ˜¯è¿›è¡Œå­˜å‚¨å®¹é‡è§„åˆ’çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Rows&lt;/code&gt;å­—æ®µçš„å‡†ç¡®æ€§&lt;/strong&gt;ï¼šå¯¹äºInnoDBç­‰äº‹åŠ¡æ€§å­˜å‚¨å¼•æ“ï¼Œ&lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;è¾“å‡ºçš„ &lt;code&gt;Rows&lt;/code&gt;æ˜¯&lt;strong&gt;ä¼°è®¡å€¼&lt;/strong&gt;ï¼Œå¯èƒ½ä¸å®é™…è¡Œæ•°æœ‰è¾ƒå¤§å‡ºå…¥ï¼ˆä¾‹å¦‚40%-50%çš„è¯¯å·®ï¼‰ã€‚è·å–ç²¾ç¡®è¡Œæ•°è¯·åŠ¡å¿…ä½¿ç”¨ &lt;code&gt;SELECT COUNT(*) FROM table_name&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æƒé™è¦æ±‚&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SHOW STATUS&lt;/code&gt;é€šå¸¸åªéœ€è¦&lt;code&gt;PROCESS&lt;/code&gt;æƒé™ã€‚æ‰§è¡Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;åˆ™éœ€è¦ç”¨æˆ·å¯¹ç›®æ ‡è¡¨æœ‰ç›¸åº”çš„æƒé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡æ¯æ—¶æ•ˆæ€§&lt;/strong&gt;ï¼š&lt;code&gt;SHOW STATUS&lt;/code&gt;çš„å€¼æ˜¯ç´¯è®¡å€¼ï¼ŒæœåŠ¡å™¨é‡å¯åä¼šé‡ç½®ã€‚è€Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;çš„ä¿¡æ¯åœ¨è¡¨æ²¡æœ‰å‘ç”ŸDDLæˆ–å¤§é‡DMLæ“ä½œæ—¶æ˜¯ç›¸å¯¹é™æ€çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;SHOW STATUS&lt;/code&gt;å…³æ³¨çš„æ˜¯æ•°æ®åº“ &lt;strong&gt;â€œå¿™ä¸å¿™â€ä»¥åŠâ€œæ€ä¹ˆå¿™â€&lt;/strong&gt; çš„æ€§èƒ½æµé‡é—®é¢˜ï¼Œè€Œ &lt;code&gt;SHOW TABLE STATUS&lt;/code&gt;åˆ™å…³æ³¨æ•°æ®åº“ &lt;strong&gt;â€œé•¿ä»€ä¹ˆæ ·â€ä»¥åŠâ€œå å¤šå¤§åœ°æ–¹â€&lt;/strong&gt; çš„é™æ€ç»“æ„é—®é¢˜ã€‚å®ƒä»¬æ˜¯MySQLæ•°æ®åº“ç®¡ç†å’Œä¼˜åŒ–å·¥ä½œä¸­ç›¸è¾…ç›¸æˆçš„ä¸¤å¤§å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤ï¼&lt;/p&gt;
&lt;h2 id="delete--drop"&gt;DELETE &amp;amp; DROP
&lt;/h2&gt;&lt;p&gt;ã€‚MySQL åŒºåˆ† &lt;code&gt;DROP&lt;/code&gt;å’Œ &lt;code&gt;DELETE&lt;/code&gt;æ˜¯ä¸ºäº†åº”å¯¹ä¸¤ç§å®Œå…¨ä¸åŒå±‚é¢çš„â€œåˆ é™¤â€éœ€æ±‚ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;DELETE&lt;/code&gt;æ˜¯ä¸“æ³¨äºæ¸…ç†è¡¨å†…&lt;strong&gt;æ•°æ®&lt;/strong&gt;çš„æ“ä½œå‘˜ï¼Œè€Œ &lt;code&gt;DROP&lt;/code&gt;åˆ™æ˜¯è´Ÿè´£æ‹†é™¤æ•´ä¸ªæ•°æ®åº“&lt;strong&gt;ç»“æ„&lt;/strong&gt;çš„å·¥ç¨‹å¸ˆã€‚è¿™ä¸ªæ ¸å¿ƒåŒºåˆ«è¡ç”Ÿå‡ºäº†ä¸€ç³»åˆ—ä¸åŒçš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è¡¨å¯ä»¥è®©ä½ å¿«é€ŸæŠŠæ¡å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;code&gt;DELETE&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;DROP&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰&lt;/td&gt;
&lt;td&gt;DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åˆ é™¤&lt;strong&gt;è¡Œæ•°æ®&lt;/strong&gt;ï¼Œä¿ç•™è¡¨ç»“æ„&lt;/td&gt;
&lt;td&gt;åˆ é™¤æ•´ä¸ª&lt;strong&gt;è¡¨å¯¹è±¡&lt;/strong&gt;ï¼ˆåŒ…æ‹¬ç»“æ„å’Œæ•°æ®ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦å¯å›æ»š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ”¯æŒ&lt;/strong&gt;ï¼ˆåœ¨äº‹åŠ¡å†…å¯å›æ»šï¼‰&lt;/td&gt;
&lt;td&gt;âŒ &lt;strong&gt;ä¸æ”¯æŒ&lt;/strong&gt;ï¼ˆè‡ªåŠ¨æäº¤ï¼Œä¸å¯å›æ»šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œé€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¾ƒæ…¢ï¼ˆé€è¡Œæ“ä½œï¼‰&lt;/td&gt;
&lt;td&gt;æå¿«ï¼ˆç›´æ¥åˆ é™¤å…ƒæ•°æ®å’Œæ–‡ä»¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘å™¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼šè§¦å‘ &lt;code&gt;DELETE&lt;/code&gt;è§¦å‘å™¨&lt;/td&gt;
&lt;td&gt;ä¸ä¼šè§¦å‘ï¼ˆè¡¨éƒ½ä¸å­˜åœ¨äº†ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´é‡Šæ”¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸ä¸ç«‹å³é‡Šæ”¾ç©ºé—´ï¼ˆæ ‡è®°åˆ é™¤ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç«‹å³é‡Šæ”¾&lt;/strong&gt;ç£ç›˜ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;WHERE å­å¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;æ”¯æŒ&lt;/strong&gt;æ¡ä»¶åˆ é™¤&lt;/td&gt;
&lt;td&gt;âŒ ä¸æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£è®¾è®¡å“²å­¦"&gt;ğŸ’¡ æ·±å…¥ç†è§£è®¾è®¡å“²å­¦
&lt;/h3&gt;&lt;p&gt;è¿™ç§åŒºåˆ†èƒŒåä½“ç°äº†æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ¸…æ™°çš„åˆ†å±‚è®¾è®¡æ€æƒ³ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£åˆ†ç¦»ï¼ˆDML vs. DDLï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DELETE&lt;/code&gt;å±äº &lt;strong&gt;DML&lt;/strong&gt;ï¼Œä¸»è¦é¢å‘æ—¥å¸¸ä¸šåŠ¡æ“ä½œï¼Œæ¯”å¦‚â€œåˆ é™¤æŸä½ç”¨æˆ·çš„è®¢å•â€ã€‚è¿™ç±»æ“ä½œéœ€è¦ç²¾ç»†æ§åˆ¶å’Œå®‰å…¨æ€§ï¼Œå› æ­¤æ”¯æŒäº‹åŠ¡å›æ»šå’Œæ¡ä»¶ç­›é€‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DROP&lt;/code&gt;å±äº &lt;strong&gt;DDL&lt;/strong&gt;ï¼Œä¸»è¦é¢å‘æ•°æ®åº“ç»“æ„çš„å˜æ›´å’Œç®¡ç†ï¼Œæ¯”å¦‚â€œåºŸå¼ƒæ•´ä¸ªæ—§è®¢å•è¡¨â€ã€‚è¿™ç±»æ“ä½œå½±å“å·¨å¤§ï¼Œè¦æ±‚å¿«é€Ÿä¸”å†³ç»ï¼Œå› æ­¤æ‰§è¡Œåç«‹å³ç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸èµ„æºç®¡ç†&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DELETE&lt;/code&gt;é€è¡Œåˆ é™¤å¹¶è®°å½•æ—¥å¿—ï¼Œæ˜¯ä¸ºäº†ä¿è¯&lt;strong&gt;äº‹åŠ¡å®‰å…¨&lt;/strong&gt;å’Œ&lt;strong&gt;å¯å›æ»š&lt;/strong&gt;ï¼Œä½†è¿™ä¼šç‰ºç‰²é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æµ·é‡æ•°æ®æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DROP&lt;/code&gt;ç›´æ¥åˆ é™¤è¡¨å¯¹åº”çš„å…ƒæ•°æ®ï¼ˆè¡¨å®šä¹‰ï¼‰å’Œç‰©ç†æ•°æ®æ–‡ä»¶ï¼Œæ“ä½œéå¸¸è½»ä¾¿å¿«é€Ÿï¼Œèƒ½ç«‹å³é‡Šæ”¾ç£ç›˜ç©ºé—´ä»¥ä¾›ä»–ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨è¾¹ç•Œ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†ç ´åæ€§æå¼ºçš„è¡¨åˆ é™¤æ“ä½œä¸å¸¸è§„çš„æ•°æ®åˆ é™¤æ“ä½œä»è¯­æ³•ä¸Šå½»åº•åˆ†å¼€ï¼Œç›¸å½“äºè®¾ç½®äº†ä¸€é“â€œå®‰å…¨é—¸â€ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢å› è¯¯æ“ä½œè€Œå¯¼è‡´çš„ç¾éš¾æ€§æ•°æ®ä¸¢å¤±ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœåªæƒ³æ¸…é™¤æ•°æ®å´è¯¯å†™äº†å‘½ä»¤å¯¼è‡´æ•´ä¸ªè¡¨æ¶ˆå¤±ï¼Œé‚£å°†æ˜¯å¤šä¹ˆå¯æ€•çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å¦‚ä½•æ­£ç¡®é€‰æ‹©"&gt;ğŸ› ï¸ å¦‚ä½•æ­£ç¡®é€‰æ‹©ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;åŸºäºå®ƒä»¬çš„ä¸åŒç‰¹æ€§ï¼Œåœ¨å®é™…å·¥ä½œä¸­åº”éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;DELETE&lt;/code&gt;çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤éƒ¨åˆ†æ•°æ®&lt;/strong&gt;ï¼šéœ€è¦å¸¦ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶æŒ‡å®šè¦åˆ é™¤çš„è¡Œã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦äº‹åŠ¡å®‰å…¨&lt;/strong&gt;ï¼šåˆ é™¤æ“ä½œæ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œå¯èƒ½éœ€è¦å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦è§¦å‘ä¸šåŠ¡é€»è¾‘&lt;/strong&gt;ï¼šè¡¨ä¸Šå®šä¹‰äº† &lt;code&gt;DELETE&lt;/code&gt;è§¦å‘å™¨ï¼Œéœ€è¦åœ¨åˆ æ•°æ®æ—¶è‡ªåŠ¨æ‰§è¡ŒæŸäº›æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;DROP&lt;/code&gt;çš„åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å½»åº•åˆ é™¤æ•´ä¸ªè¡¨&lt;/strong&gt;ï¼šå½“æŸä¸ªè¡¨è¿åŒå…¶ç»“æ„ã€æ•°æ®ã€ç´¢å¼•ç­‰å®Œå…¨ä¸å†éœ€è¦æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ•°æ®åº“ç»“æ„å˜æ›´&lt;/strong&gt;ï¼šé€šå¸¸åœ¨æ•°æ®è¿ç§»ã€ç³»ç»Ÿé‡æ„æˆ–æ¸…ç†åºŸå¼ƒæ¨¡å—æ—¶ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âš ï¸ é‡è¦æé†’&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;DROP&lt;/code&gt;å‰&lt;strong&gt;åŠ¡å¿…ç¡®è®¤æœ‰å¯é å¤‡ä»½&lt;/strong&gt;ã€‚ç”±äºå®ƒä¸å¯å›æ»šï¼Œç”Ÿäº§ç¯å¢ƒæ“ä½œéœ€æåº¦è°¨æ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL åŒºåˆ† &lt;code&gt;DROP&lt;/code&gt;å’Œ &lt;code&gt;DELETE&lt;/code&gt;ï¼Œæœ¬è´¨ä¸Šæ˜¯æ•°æ®åº“ç³»ç»Ÿä¸ºäº†&lt;strong&gt;å…¼é¡¾æ—¥å¸¸ä¸šåŠ¡æ“ä½œçš„çµæ´»å®‰å…¨&lt;/strong&gt;ä¸&lt;strong&gt;æ•°æ®åº“ç»“æ„ç®¡ç†çš„æ•ˆç‡å†³æ–­&lt;/strong&gt;è€Œåšå‡ºçš„ç²¾å¿ƒè®¾è®¡ã€‚ç†è§£å®ƒä»¬çš„åº•å±‚åŒºåˆ«ï¼Œä¸ä»…èƒ½å¸®åŠ©ä½ åœ¨æ­£ç¡®çš„åœºæ™¯ä¸‹é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œæ›´æ˜¯ä¿éšœæ•°æ®å®‰å…¨ã€ç¼–å†™é«˜æ•ˆSQLçš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ MySQL çš„è®¾è®¡æ™ºæ…§ï¼&lt;/p&gt;
&lt;h2 id="sqlæ³¨å…¥"&gt;SQLæ³¨å…¥
&lt;/h2&gt;&lt;p&gt;SQLæ³¨å…¥æ”»å‡»ä¹‹æ‰€ä»¥èƒ½å‘ç”Ÿï¼Œä¸»è¦æ˜¯å› ä¸ºåº”ç”¨ç¨‹åºå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ç›´æ¥æ‹¼æ¥åˆ°äº†SQLæŸ¥è¯¢è¯­å¥ä¸­ã€‚å¦‚æœè¿™äº›è¾“å…¥ä¸­åŒ…å«ç‰¹å®šçš„ç‰¹æ®Šå­—ç¬¦ï¼Œå°±å¯èƒ½æ”¹å˜åŸSQLè¯­å¥çš„æ„å›¾ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å…³é”®çš„ç¬¦å·å’Œå…³é”®è¯ï¼Œå¹¶è§£é‡Šäº†æ”»å‡»è€…å¦‚ä½•åˆ©ç”¨å®ƒä»¬ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»åˆ«&lt;/th&gt;
&lt;th&gt;å…³é”®ç¬¦å·/å…³é”®è¯&lt;/th&gt;
&lt;th&gt;åœ¨SQLæ³¨å…¥ä¸­çš„ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­å¥æ“æ§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;'&lt;/code&gt;(å•å¼•å·), &lt;code&gt;&amp;quot;&lt;/code&gt;(åŒå¼•å·)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç»ˆæ­¢å­—ç¬¦ä¸²&lt;/strong&gt;ï¼šç”¨äºæå‰ç»“æŸåŸæŸ¥è¯¢ä¸­çš„å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿æ‹¼æ¥æ–°çš„æ¶æ„å‘½ä»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šå¥æ‰§è¡Œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;;&lt;/code&gt;(åˆ†å·)&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æŸ¥è¯¢åˆ†éš”&lt;/strong&gt;ï¼šç”¨äºåœ¨ä¸€æ¬¡æ•°æ®åº“è¯·æ±‚ä¸­æ‰§è¡Œå¤šæ¡SQLè¯­å¥ï¼ˆå †å æŸ¥è¯¢ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ³¨é‡Šç»•è¿‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--&lt;/code&gt;, &lt;code&gt;#&lt;/code&gt;, &lt;code&gt;/* */&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ³¨é‡Šå‰©ä½™éƒ¨åˆ†&lt;/strong&gt;ï¼šç”¨äºæ³¨é‡Šæ‰åŸå§‹æŸ¥è¯¢ä¸­å‰©ä½™çš„éƒ¨åˆ†ï¼Œä½¿æ³¨å…¥çš„è¯­å¥é¡ºåˆ©æ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€»è¾‘ç¯¡æ”¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;OR&lt;/code&gt;, &lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ“çºµæŸ¥è¯¢é€»è¾‘&lt;/strong&gt;ï¼š&lt;code&gt;OR 1=1&lt;/code&gt;ç”¨äºç»•è¿‡è®¤è¯ï¼›&lt;code&gt;UNION&lt;/code&gt;ç”¨äºä»å…¶ä»–è¡¨çªƒå–æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç³»ç»Ÿæ“ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;xp_cmdshell&lt;/code&gt;, &lt;code&gt;LOAD_FILE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œç³»ç»Ÿå‘½ä»¤/æ–‡ä»¶æ“ä½œ&lt;/strong&gt;ï¼šåˆ©ç”¨æ•°æ®åº“ç‰¹æ€§åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤æˆ–è¯»å–æ–‡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šé…ä¸ç©ºç™½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;%&lt;/code&gt;, &lt;code&gt;_&lt;/code&gt;, ç©ºæ ¼, åˆ¶è¡¨ç¬¦, æ¢è¡Œç¬¦&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ¨¡ç³ŠåŒ¹é…æˆ–ç»•è¿‡è¿‡æ»¤&lt;/strong&gt;ï¼š&lt;code&gt;%&lt;/code&gt;å’Œ&lt;code&gt;_&lt;/code&gt;ç”¨äºç›²æ³¨ï¼›ç©ºç™½ç¬¦å¯èƒ½ç”¨äºæ··æ·†æ”»å‡»è½½è·ä»¥ç»•è¿‡ç®€å•è¿‡æ»¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•æœ‰æ•ˆé˜²å¾¡sqlæ³¨å…¥"&gt;ğŸ›¡ï¸ å¦‚ä½•æœ‰æ•ˆé˜²å¾¡SQLæ³¨å…¥
&lt;/h3&gt;&lt;p&gt;äº†è§£æ”»å‡»æ‰‹æ®µæ˜¯ä¸ºäº†æ›´å¥½åœ°é˜²å¾¡ã€‚ä»…ä»…è¿‡æ»¤å­—ç¬¦åˆ—è¡¨æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæ”»å‡»è€…æ€»ä¼šæ‰¾åˆ°æ–°çš„ç»•è¿‡æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯æ›´æ ¹æœ¬çš„é˜²å¾¡æªæ–½ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¦–é€‰æ–¹æ¡ˆï¼šå‚æ•°åŒ–æŸ¥è¯¢ï¼ˆé¢„ç¼–è¯‘è¯­å¥ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯&lt;strong&gt;æœ€æœ‰æ•ˆã€æœ€æ ¹æœ¬çš„é˜²å¾¡æ–¹æ³•&lt;/strong&gt;ã€‚å®ƒçš„åŸç†æ˜¯å°†SQLä»£ç å’Œç”¨æˆ·è¾“å…¥çš„æ•°æ®åˆ†ç¦»å¼€æ¥ã€‚åœ¨ç¼–å†™SQLè¯­å¥æ—¶ï¼Œä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚&lt;code&gt;?&lt;/code&gt;æˆ–&lt;code&gt;@parameterName&lt;/code&gt;ï¼‰ä»£æ›¿å˜é‡ã€‚æ•°æ®åº“ä¼šå…ˆç¼–è¯‘SQLè¯­å¥çš„ç»“æ„ï¼Œç„¶åå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®çº¯ç²¹å½“ä½œâ€œæ•°æ®â€æ¥å¤„ç†ï¼Œå³ä½¿å…¶ä¸­åŒ…å«æ¶æ„çš„SQLä»£ç ï¼Œä¹Ÿä¸ä¼šè¢«æ•°æ®åº“æ‰§è¡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¾…åŠ©æªæ–½ï¼šä¸¥æ ¼çš„è¾“å…¥éªŒè¯ä¸è½¬ä¹‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥éªŒè¯&lt;/strong&gt;ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„æ ¡éªŒï¼Œä¾‹å¦‚æ£€æŸ¥é•¿åº¦ã€ç±»å‹ã€æ ¼å¼æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å¯¹äºéæ–‡æœ¬å­—æ®µï¼ˆå¦‚æ•°å­—ã€æ—¥æœŸï¼‰ï¼Œåº”åœ¨æ¥æ”¶æ—¶å°±ç›´æ¥è½¬æ¢ä¸ºç›¸åº”çš„æ•°æ®ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦&lt;/strong&gt;ï¼šå¦‚æœç¡®å®éœ€è¦åœ¨æŸäº›åœºæ™¯ä¸‹æ‹¼æ¥SQLè¯­å¥ï¼Œå¿…é¡»å¯¹ç”¨æˆ·è¾“å…¥ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™é€šå¸¸è¢«è§†ä¸ºä¸€ç§æ¬¡è¦çš„è¡¥å……æ‰‹æ®µï¼Œå› ä¸ºä¸åŒæ•°æ®åº“çš„è½¬ä¹‰è§„åˆ™å¯èƒ½ä¸åŒï¼Œä¸”å®¹æ˜“å‡ºé”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€å°æƒé™åŸåˆ™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºWebåº”ç”¨ç¨‹åºè¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨çš„è´¦æˆ·åˆ†é…&lt;strong&gt;æœ€å°å¿…é¡»çš„æƒé™&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåº”ç”¨åªéœ€è¦æŸ¥è¯¢æ•°æ®ï¼Œå°±ç»ä¸æˆäºˆå®ƒæ’å…¥ã€åˆ é™¤æˆ–ä¿®æ”¹çš„æƒé™ã€‚è¿™æ ·å³ä½¿å‘ç”Ÿäº†æ³¨å…¥æ”»å‡»ï¼Œä¹Ÿèƒ½å°†æŸå¤±é™åˆ°æœ€ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œé˜²å¾¡SQLæ³¨å…¥æ”»å‡»ã€‚å¦‚æœä½ å¯¹æŸä¸ªå…·ä½“çš„é˜²å¾¡æŠ€æœ¯æˆ–æ”»å‡»æ‰‹æ³•æƒ³æœ‰æ›´æ·±å…¥çš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="sqlæ³¨å…¥-"&gt;SQLæ³¨å…¥ &amp;ndash;
&lt;/h2&gt;&lt;p&gt;åœ¨ SQL æ³¨å…¥ä¸­ï¼Œ&lt;code&gt;--&lt;/code&gt;æ˜¯ä¸€ä¸ª&lt;strong&gt;å•è¡Œæ³¨é‡Šç¬¦å·&lt;/strong&gt;ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯è®©æ•°æ®åº“å¿½ç•¥æ‰å®ƒä¹‹åçš„æ‰€æœ‰ SQL ä»£ç ï¼Œæ”»å‡»è€…åˆ©ç”¨è¿™ä¸€ç‰¹æ€§æ¥&lt;strong&gt;æ”¹å˜åŸæœ‰æŸ¥è¯¢çš„é€»è¾‘&lt;/strong&gt;ï¼Œä»è€Œç»•è¿‡å®‰å…¨æ£€æŸ¥ï¼ˆå¦‚å¯†ç éªŒè¯ï¼‰æˆ–æ‰§è¡Œæ¶æ„æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id="---åœ¨æ”»å‡»ä¸­çš„å·¥ä½œåŸç†"&gt;ğŸ’‰ &lt;code&gt;--&lt;/code&gt;åœ¨æ”»å‡»ä¸­çš„å·¥ä½œåŸç†
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…¸å‹çš„ç™»å½•ç»•è¿‡åœºæ™¯æ¥ç†è§£å®ƒçš„ä½œç”¨ã€‚å‡è®¾ä¸€ä¸ªç½‘ç«™çš„ç™»å½•æŸ¥è¯¢è¯­å¥æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username = &amp;#39;$username&amp;#39; AND password = &amp;#39;$password&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥çš„æœ¬æ„æ˜¯ï¼šåªæœ‰ç”¨æˆ·åå’Œå¯†ç éƒ½åŒ¹é…æ—¶ï¼Œæ‰è¿”å›ç”¨æˆ·æ•°æ®ï¼Œç™»å½•æ‰ä¼šæˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ”»å‡»è€…åœ¨ç”¨æˆ·åè¾“å…¥æ¡†ä¸­è¾“å…¥ &lt;code&gt;admin'--&lt;/code&gt;ï¼ˆæ³¨æ„å•å¼•å·å’Œç©ºæ ¼ï¼‰ï¼Œè€Œå¯†ç å¯ä»¥éšæ„è¾“å…¥ï¼Œæ¯”å¦‚ &lt;code&gt;123456&lt;/code&gt;ï¼Œé‚£ä¹ˆæœ€ç»ˆæ‹¼æ¥æˆçš„ SQL è¯­å¥ä¼šå˜æˆï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username = &amp;#39;admin&amp;#39;-- &amp;#39; AND password = &amp;#39;123456&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³é”®ç‚¹åœ¨è¿™é‡Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;admin'&lt;/code&gt;ä¸­çš„å•å¼•å·ï¼ˆ&lt;code&gt;'&lt;/code&gt;ï¼‰ç”¨äº&lt;strong&gt;é—­åˆ&lt;/strong&gt;åŸæŸ¥è¯¢ä¸­ç”¨æˆ·åå­—æ®µçš„å‰å¼•å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--&lt;/code&gt;åé¢çš„ç©ºæ ¼è‡³å…³é‡è¦ï¼Œå®ƒè¡¨ç¤ºæ³¨é‡Šå¼€å§‹ã€‚äºæ˜¯ï¼Œ&lt;strong&gt;&lt;code&gt;--&lt;/code&gt;ä¹‹åçš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬å¯†ç æ£€æŸ¥çš„æ¡ä»¶ &lt;code&gt;AND password = '123456'&lt;/code&gt;ï¼Œéƒ½ä¼šè¢«æ•°æ®åº“å¿½ç•¥&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€ç»ˆï¼Œæ•°æ®åº“å®é™…æ‰§è¡Œçš„æŸ¥è¯¢å˜ä¸ºäº†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * FROM users WHERE username = &amp;#39;admin&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæŸ¥è¯¢åªæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦ä¸º &amp;ldquo;admin&amp;rdquo;ï¼Œå®Œå…¨ç»•è¿‡äº†å¯†ç éªŒè¯ã€‚åªè¦å­˜åœ¨ &amp;ldquo;admin&amp;rdquo; ç”¨æˆ·ï¼Œæ”»å‡»è€…å°±èƒ½æˆåŠŸç™»å½•ã€‚&lt;/p&gt;
&lt;h3 id="-ä½¿ç”¨æ—¶çš„å…³é”®ç»†èŠ‚"&gt;âš ï¸ ä½¿ç”¨æ—¶çš„å…³é”®ç»†èŠ‚
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;--&lt;/code&gt;è¿›è¡Œæ³¨å…¥æ—¶ï¼Œæœ‰å‡ ä¸ªç»†èŠ‚éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç©ºæ ¼æ˜¯å¿…é¡»çš„&lt;/strong&gt;ï¼šåœ¨æ ‡å‡† SQL è¯­æ³•ä¸­ï¼Œ&lt;code&gt;--&lt;/code&gt;åé¢å¿…é¡»&lt;strong&gt;è‡³å°‘è·Ÿä¸€ä¸ªç©ºæ ¼&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;--&lt;/code&gt;ï¼‰æ³¨é‡Šæ‰ä¼šç”Ÿæ•ˆã€‚å¦åˆ™ï¼Œå®ƒå¯èƒ½ä¸ä¼šè¢«æ­£ç¡®è¯†åˆ«ä¸ºæ³¨é‡Šç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;URL ä¸­çš„ç‰¹æ®Šå¤„ç†&lt;/strong&gt;ï¼šå½“æ³¨å…¥ç‚¹é€šè¿‡ URL çš„ GET å‚æ•°ä¼ é€’æ—¶ï¼Œæµè§ˆå™¨å¯èƒ½ä¸ä¼šæ­£ç¡®å¤„ç†ç©ºæ ¼æˆ– &lt;code&gt;#&lt;/code&gt;ç¬¦å·ã€‚è¿™æ—¶é€šå¸¸ä¼šè¿›è¡Œ URL ç¼–ç æ¥ç¡®ä¿æœ‰æ•ˆä¼ é€’ï¼š
&lt;ul&gt;
&lt;li&gt;ç©ºæ ¼ç¼–ç ä¸º &lt;code&gt;+&lt;/code&gt;æˆ– &lt;code&gt;%20&lt;/code&gt;ï¼Œå› æ­¤å¸¸å†™ä½œ &lt;code&gt;--+&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦ä¸€ä¸ªå¸¸è§çš„æ³¨é‡Šç¬¦ &lt;code&gt;#&lt;/code&gt;éœ€è¦ç¼–ç ä¸º &lt;code&gt;%23&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å…¶ä»–å¸¸è§æ³¨é‡Šç¬¦å¯¹æ¯”"&gt;ğŸ”„ å…¶ä»–å¸¸è§æ³¨é‡Šç¬¦å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;é™¤äº† &lt;code&gt;--&lt;/code&gt;ï¼Œè¿˜æœ‰å…¶ä»–æ³¨é‡Šç¬¦ä¹Ÿè¢«ç”¨äº SQL æ³¨å…¥ï¼Œå°¤å…¶æ˜¯åœ¨ MySQL æ•°æ®åº“ä¸­ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ³¨é‡Šç¬¦&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;å¸¸è§ä½¿ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;--&lt;/code&gt;(&lt;strong&gt;åŒç ´æŠ˜å·&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;å•è¡Œæ³¨é‡Šï¼Œ&lt;strong&gt;åé¢éœ€è·Ÿç©ºæ ¼&lt;/strong&gt;ã€‚&lt;/td&gt;
&lt;td&gt;é€šç”¨æ€§è¾ƒå¼ºï¼Œå¤šç§æ•°æ®åº“ï¼ˆå¦‚ SQL Server, Oracle, PostgreSQLï¼‰æ”¯æŒã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;#&lt;/code&gt;(&lt;strong&gt;äº•å·&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;å•è¡Œæ³¨é‡Šï¼Œåé¢æ— éœ€ç©ºæ ¼ã€‚&lt;/td&gt;
&lt;td&gt;ä¸»è¦ç”¨äº &lt;strong&gt;MySQL&lt;/strong&gt;ã€‚åœ¨ URL ä¸­éœ€ç¼–ç ä¸º &lt;code&gt;%23&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;/*...*/&lt;/code&gt;(&lt;strong&gt;æ–œæ æ˜Ÿå·&lt;/strong&gt;)&lt;/td&gt;
&lt;td&gt;å¤šè¡Œï¼ˆå—ï¼‰æ³¨é‡Šã€‚&lt;/td&gt;
&lt;td&gt;å¯ç”¨äºæ³¨é‡Šæ‰ä¸€å¤§æ®µä»£ç ï¼Œä¹Ÿå¯ç”¨äºç»•è¿‡æŸäº›è¿‡æ»¤ï¼ˆå¦‚å†…è”æ³¨é‡Šï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é˜²èŒƒ-sql-æ³¨å…¥"&gt;ğŸ›¡ï¸ å¦‚ä½•é˜²èŒƒ SQL æ³¨å…¥
&lt;/h3&gt;&lt;p&gt;ç†è§£æ”»å‡»æ‰‹æ®µæ˜¯ä¸ºäº†æ›´å¥½åœ°é˜²å¾¡ã€‚è¦æœ‰æ•ˆé˜²èŒƒ SQL æ³¨å…¥ï¼Œåº”é‡‡å–ä»¥ä¸‹æªæ–½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼ˆPrepared Statementsï¼‰&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€æœ‰æ•ˆã€æœ€æ ¹æœ¬çš„é˜²å¾¡æ–¹æ³•ã€‚å®ƒé€šè¿‡å°† SQL ä»£ç å’Œç”¨æˆ·è¾“å…¥çš„æ•°æ®åˆ†ç¦»å¼€æ¥ï¼Œå³ä½¿ç”¨æˆ·è¾“å…¥ä¸­åŒ…å«äº† &lt;code&gt;--&lt;/code&gt;è¿™æ ·çš„ç‰¹æ®Šç¬¦å·ï¼Œæ•°æ®åº“ä¹Ÿåªä¼šå°†å…¶è§†ä¸ºæ™®é€šæ•°æ®è€Œé SQL æŒ‡ä»¤çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„æ£€éªŒå’Œè¿‡æ»¤&lt;/strong&gt;ï¼šè™½ç„¶ä¸èƒ½å®Œå…¨ä¾èµ–ï¼Œä½†ä½œä¸ºè¾…åŠ©æ‰‹æ®µï¼Œå¯¹ç”¨æˆ·è¾“å…¥çš„é•¿åº¦ã€ç±»å‹ã€æ ¼å¼è¿›è¡Œæ ¡éªŒï¼Œå¹¶è¿‡æ»¤æˆ–è½¬ä¹‰ä¸€äº›é«˜å±å­—ç¬¦ï¼ˆå¦‚å•å¼•å·ï¼‰ï¼Œå¯ä»¥å¢åŠ æ”»å‡»éš¾åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éµå¾ªæœ€å°æƒé™åŸåˆ™&lt;/strong&gt;ï¼šä¸ºæ•°æ®åº“æ“ä½œè´¦æˆ·åˆ†é…ä»…èƒ½æ»¡è¶³å…¶åŠŸèƒ½æ‰€éœ€çš„æœ€å°æƒé™ï¼Œé¿å…ä½¿ç”¨å…·æœ‰è¶…çº§ç”¨æˆ·æƒé™çš„è´¦æˆ·è¿æ¥æ•°æ®åº“ï¼Œè¿™æ ·å³ä½¿è¢«æ³¨å…¥ï¼Œä¹Ÿèƒ½å°†æŸå¤±é™åˆ°æœ€ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ é€å½»åœ°ç†è§£ SQL æ³¨å…¥ä¸­çš„ &lt;code&gt;--&lt;/code&gt;ã€‚å¦‚æœä½ å¯¹å…¶ä»–å®‰å…¨ç›¸å…³çš„è¯é¢˜æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="--"&gt;&amp;rsquo; &amp;amp; &amp;quot;
&lt;/h2&gt;&lt;p&gt;åœ¨ MySQL ä¸­ï¼Œå¯¹äºå­—ç¬¦ä¸²ï¼Œ&lt;strong&gt;å®˜æ–¹æ¨èå¹¶é¦–é€‰ä½¿ç”¨å•å¼•å·ï¼ˆ&amp;rsquo;ï¼‰&lt;/strong&gt;ã€‚è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹åŒå¼•å·ï¼ˆ&amp;quot;ï¼‰ä¹Ÿå¯èƒ½è¢«æ¥å—ï¼Œä½†ä½¿ç”¨å•å¼•å·æ˜¯æ›´è§„èŒƒã€æ›´å®‰å…¨çš„é€‰æ‹©ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨å¯¹æ¯”äº†å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å•å¼•å· ( &amp;rsquo; )&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŒå¼•å· ( &amp;quot; )&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŸºæœ¬ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”¨äºå®šä¹‰&lt;strong&gt;å­—ç¬¦ä¸²å­—é¢é‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤æ¨¡å¼ä¸‹ï¼Œä¸åº”ç”¨äºå­—ç¬¦ä¸²ï¼›åœ¨&lt;code&gt;ANSI_QUOTES&lt;/code&gt;æ¨¡å¼ä¸‹ï¼Œç”¨äºå¼•ç”¨&lt;strong&gt;æ ‡è¯†ç¬¦&lt;/strong&gt;ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SQLæ ‡å‡†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç¬¦åˆ&lt;/strong&gt;SQLæ ‡å‡†&lt;/td&gt;
&lt;td&gt;ä¸ç¬¦åˆSQLæ ‡å‡†ï¼ˆå½“ç”¨äºå­—ç¬¦ä¸²æ—¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;ï¼Œæ‰€æœ‰éµå¾ªæ ‡å‡†çš„æ•°æ®åº“éƒ½æ”¯æŒ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½&lt;/strong&gt;ï¼Œåœ¨å…¶ä»–æ•°æ®åº“ï¼ˆå¦‚PostgreSQLï¼‰ä¸­åŒå¼•å·ç”¨äºæ ‡è¯†ç¬¦ï¼Œå¯èƒ½å¯¼è‡´å…¼å®¹æ€§é—®é¢˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¨èç¨‹åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å®˜æ–¹æ¨è&lt;/strong&gt;ï¼Œé¦–é€‰æ–¹å¼&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸æ¨è&lt;/strong&gt;ç”¨äºåŒ…è£¹å­—ç¬¦ä¸²&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¸ºä½•é¦–é€‰å•å¼•å·"&gt;ğŸ’¡ ä¸ºä½•é¦–é€‰å•å¼•å·ï¼Ÿ
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å•å¼•å·ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦åŸå› ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¬¦åˆ SQL æ ‡å‡†&lt;/strong&gt;ï¼šMySQL éµå¾ª SQL æ ‡å‡†ï¼Œè¯¥æ ‡å‡†è§„å®šå­—ç¬¦ä¸²å­—é¢é‡åº”ç”±å•å¼•å·æ‹¬èµ·æ¥ã€‚ä½¿ç”¨å•å¼•å·å¯ä»¥ç¡®ä¿ä½ çš„ä»£ç ä¸æ ‡å‡†ä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´å¥½çš„å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼šå¦‚æœä½ ç¼–å†™çš„ SQL ä»£ç å¯èƒ½éœ€è¦è¿ç§»åˆ°å…¶ä»–æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ PostgreSQLã€SQL Serverï¼‰ï¼ŒåšæŒä½¿ç”¨å•å¼•å·å¯ä»¥é¿å…å› å¼•å·ä½¿ç”¨ä¹ æƒ¯ä¸åŒè€Œå¼•å‘çš„è¯­æ³•é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é…ç½®ä¾èµ–&lt;/strong&gt;ï¼šMySQL çš„è¡Œä¸ºå— &lt;code&gt;sql_mode&lt;/code&gt;è®¾ç½®çš„å½±å“ã€‚å¦‚æœå¯ç”¨äº† &lt;code&gt;ANSI_QUOTES&lt;/code&gt;æ¨¡å¼ï¼ŒåŒå¼•å·çš„åŠŸèƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä»å¯ä»¥è¡¨ç¤ºå­—ç¬¦ä¸²å˜ä¸ºåªèƒ½ç”¨äºå¼•ç”¨æ ‡è¯†ç¬¦ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰ã€‚ä½¿ç”¨å•å¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²å¯ä»¥é¿å…å› æ¨¡å¼è®¾ç½®ä¸åŒè€Œå¯¼è‡´çš„æ„å¤–é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å•å¼•å·å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰ä¸åµŒå¥—"&gt;ğŸ› ï¸ å•å¼•å·å­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰ä¸åµŒå¥—
&lt;/h3&gt;&lt;p&gt;å½“å­—ç¬¦ä¸²æœ¬èº«åŒ…å«å•å¼•å·æ—¶ï¼Œéœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è½¬ä¹‰å­—ç¬¦&lt;/strong&gt;ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨å•å¼•å·å‰ä½¿ç”¨åæ–œæ ï¼ˆ``ï¼‰è¿›è¡Œè½¬ä¹‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT &amp;#39;It\&amp;#39;s a nice day.&amp;#39;; -- è¾“å‡ºï¼šIt&amp;#39;s a nice day.
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŒå†™å•å¼•å·&lt;/strong&gt;ï¼šä¹Ÿå¯ä»¥é€šè¿‡è¿ç»­ä¹¦å†™ä¸¤ä¸ªå•å¼•å·æ¥è¡¨ç¤ºä¸€ä¸ªå•å¼•å·å­—ç¬¦ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT &amp;#39;It&amp;#39;&amp;#39;s a nice day.&amp;#39;; -- è¾“å‡ºï¼šIt&amp;#39;s a nice day.
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤å¤–ï¼Œå¦‚æœéœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«åŒå¼•å·ï¼Œç”±äºå­—ç¬¦ä¸²æ˜¯ç”±å•å¼•å·æ‹¬èµ·æ¥çš„ï¼Œå†…éƒ¨çš„æ™®é€šåŒå¼•å·é€šå¸¸ä¸éœ€è¦è½¬ä¹‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT &amp;#39;She said, &amp;#34;Hello!&amp;#34;&amp;#39;; -- è¾“å‡ºï¼šShe said, &amp;#34;Hello!&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ³¨æ„åå¼•å·çš„åŒºåˆ«"&gt;âš ï¸ æ³¨æ„åå¼•å·çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;åŠ¡å¿…æ³¨æ„ï¼Œåå¼•å·ï¼ˆ &lt;strong&gt;`&lt;/strong&gt; ï¼‰ä¸å•åŒå¼•å·&lt;strong&gt;å®Œå…¨ä¸åŒ&lt;/strong&gt;ã€‚åå¼•å·ç”¨äºå¼•ç”¨æ•°æ®åº“ã€è¡¨ã€åˆ—ç­‰&lt;strong&gt;æ ‡è¯†ç¬¦&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯å½“æ ‡è¯†ç¬¦æ˜¯MySQLçš„ä¿ç•™å…³é”®å­—æˆ–åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ï¼‰æ—¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å¦‚æœæœ‰ä¸€ä¸ªåˆ—åå«åš &amp;#34;select&amp;#34;ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå¿…é¡»ç”¨åå¼•å·æ‹¬èµ·æ¥
SELECT `select` FROM `some table`;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ€»ç»“ä¸å®è·µå»ºè®®"&gt;ğŸ’ æ€»ç»“ä¸å®è·µå»ºè®®
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ MySQL ä¸­å¤„ç†å­—ç¬¦ä¸²æ—¶ï¼Œ&lt;strong&gt;åšæŒä½¿ç”¨å•å¼•å·&lt;/strong&gt;æ˜¯æœ€ä½³å®è·µã€‚è¿™èƒ½ç¡®ä¿ä½ çš„ä»£ç ç¬¦åˆæ ‡å‡†ã€å…·æœ‰è‰¯å¥½çš„å¯ç§»æ¤æ€§ï¼Œå¹¶ä¸”ä¸æ˜“å—æ•°æ®åº“é…ç½®å˜åŒ–çš„å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;è®°ä½è¿™ä¸ªç®€å•çš„åŸåˆ™ï¼š&lt;strong&gt;å­—ç¬¦ä¸²ç”¨å•å¼•å·ï¼ˆ&amp;rsquo;ï¼‰ï¼Œæ ‡è¯†ç¬¦ï¼ˆå¦‚è¡¨åã€åˆ—åï¼‰å¿…è¦æ—¶ç”¨åå¼•å·ï¼ˆ`ï¼‰ï¼Œé¿å…ä½¿ç”¨åŒå¼•å·ï¼ˆ&amp;quot;ï¼‰è¡¨ç¤ºå­—ç¬¦ä¸²&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ¸…æ™°åœ°ç†è§£ MySQL ä¸­å¼•å·çš„ä½¿ç”¨ï¼&lt;/p&gt;
&lt;h3 id="update-join"&gt;UPDATE JOIN
&lt;/h3&gt;&lt;p&gt;MySQL çš„ &lt;code&gt;UPDATE JOIN&lt;/code&gt;è¯­å¥æ˜¯ä¸€ç§å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³è”è¡¨çš„æ•°æ®æ¥æ›´æ–°ç›®æ ‡è¡¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„æ ¸å¿ƒè¦ç‚¹ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸è¯­æ³•"&gt;ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µä¸è¯­æ³•
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;UPDATE JOIN&lt;/strong&gt; çš„æœ¬è´¨æ˜¯å°†æ ‡å‡†çš„ &lt;code&gt;UPDATE&lt;/code&gt;è¯­å¥ä¸ &lt;code&gt;JOIN&lt;/code&gt;æ“ä½œç»“åˆã€‚å½“ä½ éœ€è¦ä¾æ®å¦ä¸€å¼ è¡¨ä¸­çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå‚è€ƒå€¼ã€çŠ¶æ€æˆ–è®¡ç®—ç»“æœï¼‰æ¥ä¿®æ”¹æŸå¼ è¡¨çš„æ•°æ®æ—¶ï¼Œå®ƒå°±èƒ½å¤§æ˜¾èº«æ‰‹ã€‚è¿™æ ·åšä¸ä»…èƒ½&lt;strong&gt;æå‡æ“ä½œæ•ˆç‡&lt;/strong&gt;ï¼ˆä¸€æ¡è¯­å¥å®Œæˆæ“ä½œï¼‰ï¼Œè¿˜èƒ½&lt;strong&gt;ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§&lt;/strong&gt;ï¼Œé¿å…äº†åœ¨åº”ç”¨å±‚è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢å’Œæ›´æ–°çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å…¶åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE ç›®æ ‡è¡¨
[JOINç±»å‹] JOIN å…³è”è¡¨ ON è¿æ¥æ¡ä»¶
SET ç›®æ ‡è¡¨.åˆ—å = å…³è”è¡¨.åˆ—åæˆ–å€¼è¡¨è¾¾å¼
[WHERE è¿‡æ»¤æ¡ä»¶];
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-join-ç±»å‹é€‰æ‹©inner-join-ä¸-left-join"&gt;ğŸ“Š JOIN ç±»å‹é€‰æ‹©ï¼šINNER JOIN ä¸ LEFT JOIN
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©æ­£ç¡®çš„ &lt;code&gt;JOIN&lt;/code&gt;ç±»å‹æ˜¯æˆåŠŸä½¿ç”¨ &lt;code&gt;UPDATE JOIN&lt;/code&gt;çš„å…³é”®ï¼Œå®ƒç›´æ¥å†³å®šäº†å“ªäº›è¡Œä¼šè¢«æ›´æ–°ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JOIN ç±»å‹&lt;/th&gt;
&lt;th&gt;æ›´æ–°ç›®æ ‡&lt;/th&gt;
&lt;th&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;INNER JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åªæ›´æ–°&lt;strong&gt;ä¸¤ä¸ªè¡¨ä¸­èƒ½åŒ¹é…è¿æ¥æ¡ä»¶&lt;/strong&gt;çš„è¡Œã€‚&lt;/td&gt;
&lt;td&gt;æ ¹æ®æœ‰æ•ˆè®¢å•æ›´æ–°å®¢æˆ·çŠ¶æ€ï¼›æ ¹æ®ç»©æ•ˆè¡¨è°ƒæ•´å‘˜å·¥è–ªèµ„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;LEFT JOIN&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´æ–°&lt;strong&gt;å·¦è¡¨ï¼ˆç›®æ ‡è¡¨ï¼‰çš„æ‰€æœ‰è¡Œ&lt;/strong&gt;ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰åŒ¹é…ã€‚é€šå¸¸é€šè¿‡ &lt;code&gt;WHERE&lt;/code&gt;å­å¥ç­›é€‰å³è¡¨ä¸º &lt;code&gt;NULL&lt;/code&gt;çš„è¡Œè¿›è¡Œç‰¹å®šæ›´æ–°ã€‚&lt;/td&gt;
&lt;td&gt;ä¸ºæ–°å‘˜å·¥ï¼ˆå…¶ä¿¡æ¯å°šæœªå½•å…¥å®Œæ•´å‚è€ƒè¡¨ï¼‰è®¾ç½®é»˜è®¤å€¼æˆ–ç»Ÿä¸€è°ƒæ•´ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®ç”¨ç¤ºä¾‹è¯¦è§£"&gt;ğŸ› ï¸ å®ç”¨ç¤ºä¾‹è¯¦è§£
&lt;/h3&gt;&lt;p&gt;è®©æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªåœºæ™¯æ¥åŠ æ·±ç†è§£ã€‚&lt;/p&gt;
&lt;h4 id="ä½¿ç”¨-inner-join-è°ƒæ•´è–ªèµ„"&gt;ä½¿ç”¨ INNER JOIN è°ƒæ•´è–ªèµ„
&lt;/h4&gt;&lt;p&gt;å‡è®¾æœ‰ &lt;code&gt;employees&lt;/code&gt;è¡¨ï¼ˆå‘˜å·¥è¡¨ï¼‰å’Œ &lt;code&gt;merits&lt;/code&gt;è¡¨ï¼ˆç»©æ•ˆè¯„çº§å¯¹åº”æ¶¨è–ªç™¾åˆ†æ¯”è¡¨ï¼‰ã€‚ç°åœ¨è¦æ ¹æ®æ¯ä½å‘˜å·¥çš„ç»©æ•ˆï¼ŒæŒ‰ &lt;code&gt;merits&lt;/code&gt;è¡¨è§„å®šçš„ç™¾åˆ†æ¯”æ¶¨è–ªã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE employees
INNER JOIN merits ON employees.performance = merits.performance
SET salary = salary + salary * percentage;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ¡è¯­å¥åªä¼šæ›´æ–°é‚£äº›åœ¨ &lt;code&gt;merits&lt;/code&gt;è¡¨ä¸­æœ‰å¯¹åº”ç»©æ•ˆè®°å½•çš„å‘˜å·¥è–ªèµ„ã€‚&lt;/p&gt;
&lt;h4 id="ä½¿ç”¨-left-join-å¤„ç†æ–°å‘˜å·¥"&gt;ä½¿ç”¨ LEFT JOIN å¤„ç†æ–°å‘˜å·¥
&lt;/h4&gt;&lt;p&gt;å…¬å¸æ–°å…¥èŒä¸¤åå‘˜å·¥ï¼Œä»–ä»¬çš„ç»©æ•ˆè¯„çº§ï¼ˆ&lt;code&gt;performance&lt;/code&gt;ï¼‰å°šæœªè¯„å®šï¼Œä¸º &lt;code&gt;NULL&lt;/code&gt;ã€‚å› æ­¤ï¼Œä»–ä»¬åœ¨ &lt;code&gt;merits&lt;/code&gt;è¡¨ä¸­æ²¡æœ‰å¯¹åº”è®°å½•ã€‚å¦‚æœåªæƒ³ç»™è¿™äº›æ–°å‘˜å·¥ç»Ÿä¸€æ¶¨è–ª 1.5%ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE employees
LEFT JOIN merits ON employees.performance = merits.performance
SET salary = salary + salary * 0.015
WHERE merits.percentage IS NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;WHERE merits.percentage IS NULL&lt;/code&gt;æ¡ä»¶ç²¾å‡†åœ°ç­›é€‰å‡ºäº†å·¦è¡¨ä¸­æœ‰è€Œå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œå³æ–°å‘˜å·¥ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ˜ç¡®æ›´æ–°ç›®æ ‡&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;UPDATE&lt;/code&gt;å­å¥åç›´æ¥æŒ‡å®šè¦æ›´æ–°çš„ä¸»è¡¨ã€‚è™½ç„¶è¯­æ³•å…è®¸æ›´æ–°å…³è”è¡¨ï¼Œä½†ä¸ºäº†æ¸…æ™°å’Œé¿å…æ„å¤–ï¼Œå»ºè®®&lt;strong&gt;ä¸€æ¬¡åªæ›´æ–°ä¸€å¼ è¡¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤‡ä»½å’Œæµ‹è¯•&lt;/strong&gt;ï¼šåœ¨æ‰§è¡Œä»»ä½• &lt;code&gt;UPDATE JOIN&lt;/code&gt;æ“ä½œï¼Œå°¤å…¶æ˜¯å½±å“å¤§é‡æ•°æ®çš„æ“ä½œä¹‹å‰ï¼Œ&lt;strong&gt;åŠ¡å¿…å¤‡ä»½ç›¸å…³æ•°æ®&lt;/strong&gt;ã€‚æœ€å¥½åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯ SQL è¯­å¥çš„æ­£ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å–„ç”¨ WHERE å­å¥&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;WHERE&lt;/code&gt;å­å¥å¯ä»¥ç²¾ç¡®æ§åˆ¶éœ€è¦æ›´æ–°çš„è¡ŒèŒƒå›´ã€‚å¦‚æœæ²¡æœ‰ &lt;code&gt;WHERE&lt;/code&gt;æ¡ä»¶ï¼Œå¯èƒ½ä¼šæ›´æ–°æ‰€æœ‰åŒ¹é…è¿æ¥æ¡ä»¶çš„è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿è¿æ¥æ¡ä»¶å‡†ç¡®&lt;/strong&gt;ï¼šè¿æ¥æ¡ä»¶ï¼ˆ&lt;code&gt;ON&lt;/code&gt;å­å¥ï¼‰çš„å‡†ç¡®æ€§è‡³å…³é‡è¦ã€‚ä¸æ­£ç¡®çš„è¿æ¥æ¡ä»¶å¯èƒ½å¯¼è‡´æ•°æ®è¢«é”™è¯¯æ›´æ–°ï¼Œç”šè‡³é€ æˆæ•°æ®æ··ä¹±ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“ä¸æ›¿ä»£æ–¹æ¡ˆ"&gt;ğŸ’ æ€»ç»“ä¸æ›¿ä»£æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œ&lt;code&gt;UPDATE JOIN&lt;/code&gt;æ˜¯å¤„ç†è·¨è¡¨æ•°æ®æ›´æ–°çš„åˆ©å™¨ï¼Œå®ƒèƒ½è®©ä½ åœ¨æ•°æ®åº“å±‚é¢é«˜æ•ˆã€åŸå­æ€§åœ°å®Œæˆå¤æ‚çš„æ•°æ®åŒæ­¥é€»è¾‘ã€‚æ ¸å¿ƒåœ¨äºæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æ­£ç¡®çš„ &lt;code&gt;JOIN&lt;/code&gt;ç±»å‹ï¼ˆ&lt;code&gt;INNER JOIN&lt;/code&gt;ç”¨äºæ›´æ–°æœ‰åŒ¹é…é¡¹çš„æ•°æ®ï¼Œ&lt;code&gt;LEFT JOIN&lt;/code&gt;å¸¸ç”¨äºæ›´æ–°æ— åŒ¹é…é¡¹çš„æ•°æ®ï¼‰ï¼Œå¹¶å§‹ç»ˆæ³¨æ„æ“ä½œå®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº† &lt;code&gt;UPDATE JOIN&lt;/code&gt;ï¼Œæœ‰æ—¶ä¹Ÿå¯ä»¥é€šè¿‡å­æŸ¥è¯¢æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE employees
SET salary = salary * 1.05
WHERE performance IN (SELECT performance FROM merits WHERE percentage &amp;gt; 0.03);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†é€šå¸¸ï¼Œ&lt;code&gt;JOIN&lt;/code&gt;æ–¹å¼åœ¨å¯è¯»æ€§å’Œæ€§èƒ½ä¸Šæ›´å…·ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šå’Œç¤ºä¾‹èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨ MySQL çš„ &lt;code&gt;UPDATE JOIN&lt;/code&gt;ï¼å¦‚æœä½ æœ‰æ›´å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="select-into"&gt;SELECT INTO
&lt;/h2&gt;&lt;p&gt;SQL &lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ•°æ®æ“ä½œå·¥å…·ï¼Œä¸»è¦ç”¨äº&lt;strong&gt;å¿«é€Ÿåˆ›å»ºæ–°è¡¨å¹¶åŒæ—¶æ’å…¥æ¥è‡ªæŸ¥è¯¢ç»“æœçš„æ•°æ®&lt;/strong&gt;ã€‚ä¸‹é¢ä¸ºæ‚¨è¯¦ç»†è§£æå…¶è¯­æ³•ã€åœºæ™¯ã€æ³¨æ„äº‹é¡¹ä»¥åŠä¸ç›¸å…³è¯­å¥çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;h3 id="-è¯­æ³•ä¸æ ¸å¿ƒåŠŸèƒ½"&gt;ğŸ” è¯­æ³•ä¸æ ¸å¿ƒåŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;çš„æ ¸å¿ƒåœ¨äºå°†æŸ¥è¯¢ç»“æœç›´æ¥å­˜å…¥ä¸€ä¸ªæ–°è¡¨ä¸­ã€‚å…¶åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT column1, column2, ...
INTO new_table_name [IN externaldatabase]
FROM source_table
[WHERE condition];
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;new_table_name&lt;/code&gt;&lt;/strong&gt;ï¼šè¦åˆ›å»ºçš„&lt;strong&gt;æ–°è¡¨çš„åç§°&lt;/strong&gt;ã€‚å¦‚æœè¯¥è¡¨å·²å­˜åœ¨ï¼Œæ‰§è¡Œè¯­å¥é€šå¸¸ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;externaldatabase&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šå°†æ–°è¡¨åˆ›å»ºåœ¨&lt;strong&gt;å¦ä¸€ä¸ªæ•°æ®åº“&lt;/strong&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;source_table&lt;/code&gt;&lt;/strong&gt;ï¼šæ•°æ®æ¥æºçš„è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;WHERE condition&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰æ¡ä»¶ï¼Œç”¨äº&lt;strong&gt;ç­›é€‰éœ€è¦å¤åˆ¶çš„æ•°æ®&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‚¨å¯ä»¥é€‰æ‹©å¤åˆ¶æ‰€æœ‰åˆ—ï¼ˆä½¿ç”¨ &lt;code&gt;SELECT *&lt;/code&gt;ï¼‰æˆ–ä»…å¤åˆ¶æŒ‡å®šçš„åˆ—ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æ”¯æŒä½¿ç”¨ &lt;code&gt;JOIN&lt;/code&gt;å­å¥æ•´åˆå¤šä¸ªè¡¨çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id="-ä¸-insert-into-çš„åŒºåˆ«"&gt;âš–ï¸ ä¸ INSERT INTO çš„åŒºåˆ«
&lt;/h3&gt;&lt;p&gt;ç†è§£ &lt;code&gt;SELECT INTO&lt;/code&gt;ä¸ &lt;code&gt;INSERT INTO&lt;/code&gt;çš„åŒºåˆ«è‡³å…³é‡è¦ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„ä¸»è¦å·®å¼‚ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SELECT INTO&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;INSERT INTO&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨åˆ›å»º&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨åˆ›å»º&lt;/strong&gt;æ–°è¡¨&lt;/td&gt;
&lt;td&gt;ç›®æ ‡è¡¨å¿…é¡»&lt;strong&gt;å·²å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¨ç»“æ„æ¥æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¤åˆ¶æºè¡¨çš„ç»“æ„ï¼ˆå¯é€‰æ‹©ç‰¹å®šåˆ—ï¼‰&lt;/td&gt;
&lt;td&gt;ä¾èµ–é¢„å…ˆå®šä¹‰å¥½çš„è¡¨ç»“æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹ç®€å•ï¼Œé€‚åˆå¿«é€Ÿå¤åˆ¶å’Œæ•°æ®è¿ç§»&lt;/td&gt;
&lt;td&gt;æ›´çµæ´»ï¼Œæ”¯æŒå¤æ‚æ’å…¥ï¼ˆå¦‚æ’å…¥å¸¸é‡å€¼ã€å¤šè¡¨è”åˆæŸ¥è¯¢ç»“æœï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿«é€Ÿå¤‡ä»½ã€åˆ›å»ºæ•°æ®å­é›†ã€ä¸€æ¬¡æ€§æ•°æ®è¿ç§»&lt;/td&gt;
&lt;td&gt;å‘å·²æœ‰è¡¨è¿½åŠ æ•°æ®ï¼ŒåŒ…æ‹¬å•è¡Œæ’å…¥å’Œæ‰¹é‡æ’å…¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œ&lt;code&gt;SELECT INTO&lt;/code&gt;æ˜¯ &lt;strong&gt;â€œå»ºè¡¨å¹¶æ’å…¥â€ä¸€æ­¥å®Œæˆ&lt;/strong&gt;ï¼Œè€Œ &lt;code&gt;INSERT INTO&lt;/code&gt;æ˜¯ &lt;strong&gt;â€œå…ˆæœ‰è¡¨ï¼Œåæ’å…¥â€&lt;/strong&gt; ã€‚&lt;/p&gt;
&lt;h3 id="-å¸¸è§åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ å¸¸è§åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½ä¸å½’æ¡£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ &lt;code&gt;SELECT INTO&lt;/code&gt;æœ€å…¸å‹çš„ç”¨é€”ã€‚æ‚¨å¯ä»¥å¿«é€Ÿä¸ºé‡è¦çš„ä¸šåŠ¡è¡¨åˆ›å»ºä¸€ä¸ªåœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„å¤‡ä»½å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ›å»º &amp;#39;orders&amp;#39; è¡¨çš„å®Œæ•´å¤‡ä»½
SELECT * INTO orders_backup_20241001 FROM orders;
-- åªå½’æ¡£å»å¹´çš„æ•°æ®
SELECT * INTO orders_archive_2024
FROM orders
WHERE order_date BETWEEN &amp;#39;2024-01-01&amp;#39; AND &amp;#39;2024-12-31&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæµ‹è¯•æˆ–åˆ†æå­é›†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æ‚¨éœ€è¦ä»åºå¤§çš„ç”Ÿäº§è¡¨ä¸­æå–ä¸€éƒ¨åˆ†æ•°æ®ç”¨äºæµ‹è¯•æˆ–åˆ†æï¼Œè€Œä¸æƒ³å½±å“åŸè¡¨æ—¶ï¼Œ&lt;code&gt;SELECT INTO&lt;/code&gt;éå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æå–æ´»è·ƒç”¨æˆ·æ•°æ®åˆ›å»ºåˆ†ææ ·æœ¬
SELECT user_id, username, email INTO analysis_active_users
FROM users
WHERE last_login_date &amp;gt; &amp;#39;2024-09-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¨æ•°æ®åº“è¿ç§»æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨ &lt;code&gt;IN&lt;/code&gt;å­å¥ï¼Œå¯ä»¥è½»æ¾åœ°å°†æ•°æ®ä»ä¸€ä¸ªæ•°æ®åº“è¿ç§»åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†å½“å‰æ•°æ®åº“çš„ &amp;#39;products&amp;#39; è¡¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°æ®åº“ &amp;#39;BackupDB&amp;#39; ä¸­
SELECT * INTO products IN &amp;#39;BackupDB.mdb&amp;#39; FROM products;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-2"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ–°è¡¨å¿…é¡»ä¸å­˜åœ¨&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SELECT INTO&lt;/code&gt;æ—¶ï¼Œ&lt;code&gt;new_table_name&lt;/code&gt;æ‰€æŒ‡å®šçš„è¡¨ä¸èƒ½å·²ç»å­˜åœ¨ï¼Œå¦åˆ™ä¼šåˆ›å»ºå¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¤åˆ¶ç´¢å¼•å’Œçº¦æŸ&lt;/strong&gt;ï¼šæ–°è¡¨åªä¼šå¤åˆ¶æºè¡¨çš„åŸºæœ¬åˆ—ç»“æ„å’Œæ•°æ®ï¼Œä½†&lt;strong&gt;ä¸»é”®ã€ç´¢å¼•ã€é»˜è®¤å€¼ã€è‡ªå¢å±æ€§ç­‰çº¦æŸé€šå¸¸ä¸ä¼šè¢«å¤åˆ¶&lt;/strong&gt;ã€‚æ–°è¡¨æ˜¯ä¸€ä¸ªâ€œè£¸â€çš„æ•°æ®å‰¯æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šå¯¹äºæµ·é‡æ•°æ®ï¼Œ&lt;code&gt;SELECT INTO&lt;/code&gt;æ“ä½œå¯èƒ½ä¼šå¯¹ç³»ç»Ÿèµ„æºé€ æˆè¾ƒå¤§å‹åŠ›å¹¶äº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚åœ¨å¤„ç†å¤§æ•°æ®é‡æ—¶éœ€è°¨æ…ï¼Œå¹¶è€ƒè™‘åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“å…¼å®¹æ€§&lt;/strong&gt;ï¼šè™½ç„¶ &lt;code&gt;SELECT INTO&lt;/code&gt;æ˜¯ SQL æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½†&lt;strong&gt;å…·ä½“è¯­æ³•å’Œæ”¯æŒç¨‹åº¦å¯èƒ½å› æ•°æ®åº“ç³»ç»Ÿï¼ˆå¦‚ MySQL, SQL Server, Oracle, Db2ï¼‰è€Œå¼‚&lt;/strong&gt;ã€‚ä½¿ç”¨æ—¶è¯·å‚è€ƒç‰¹å®šæ•°æ®åº“çš„æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§"&gt;ğŸ“Š è¿›é˜¶ç”¨æ³•ä¸æŠ€å·§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“åˆå¤æ‚æŸ¥è¯¢&lt;/strong&gt;ï¼š&lt;code&gt;SELECT INTO&lt;/code&gt;çš„æºæ•°æ®ä¸ä»…å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨ï¼Œè¿˜å¯ä»¥æ˜¯å¤æ‚çš„æŸ¥è¯¢ç»“æœï¼ŒåŒ…æ‹¬å¤šè¡¨è¿æ¥ï¼ˆ&lt;code&gt;JOIN&lt;/code&gt;ï¼‰ã€èšåˆå‡½æ•°ï¼ˆ&lt;code&gt;GROUP BY&lt;/code&gt;ï¼‰ç­‰ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ›å»ºä¸€å¼ åŒ…å«å®¢æˆ·åŠå…¶è®¢å•æ•°é‡çš„æ±‡æ€»è¡¨
SELECT c.customer_id, c.customer_name, COUNT(o.order_id) AS order_count
INTO customer_order_summary
FROM customers c
LEFT JOIN orders o ON c.customer_id = o.customer_id
GROUP BY c.customer_id, c.customer_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡®ä¿å•è¡Œç»“æœï¼ˆç‰¹å®šæ•°æ®åº“ï¼‰&lt;/strong&gt;ï¼šåœ¨æŸäº›æ•°æ®åº“ï¼ˆå¦‚ IBM Db2ï¼‰ä¸­ï¼Œç”¨äºå°†æ ‡é‡å€¼èµ‹å€¼ç»™å˜é‡çš„ &lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥è¦æ±‚æŸ¥è¯¢ç»“æœå¿…é¡»ä¸º&lt;strong&gt;å•è¡Œ&lt;/strong&gt;ã€‚å¦‚æœè¿”å›å¤šè¡Œæˆ–é›¶è¡Œï¼Œä¼šå¼•å‘é”™è¯¯ã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;FETCH FIRST 1 ROW ONLY&lt;/code&gt;ç­‰å­å¥æ¥é™åˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥æ˜¯æ•°æ®åº“æ“ä½œä¸­ä¸€æŠŠé«˜æ•ˆçš„â€œç‘å£«å†›åˆ€â€ï¼Œç‰¹åˆ«é€‚ç”¨äº&lt;strong&gt;å¿«é€Ÿåˆ›å»ºæ•°æ®å‰¯æœ¬ã€è¿›è¡Œæ•°æ®æå–å’Œä¸€æ¬¡æ€§è¿ç§»&lt;/strong&gt;ä»»åŠ¡ã€‚å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå°†å»ºè¡¨å’Œæ’å…¥æ•°æ®åˆäºŒä¸ºä¸€ï¼Œç®€åŒ–äº†æ“ä½œæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨ &lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–æ•°æ®åº“æ–¹é¢çš„é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­äº¤æµã€‚&lt;/p&gt;
&lt;h2 id="select-into--update-join"&gt;SELECT INTO &amp;amp; UPDATE JOIN
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;å’Œ &lt;code&gt;UPDATE JOIN&lt;/code&gt;æ˜¯ SQL ä¸­åŠŸèƒ½å®Œå…¨ä¸åŒçš„ä¸¤ç§æ“ä½œï¼Œç®€å•æ¥è¯´ï¼Œä¸€ä¸ªç”¨äº&lt;strong&gt;åˆ›å»ºæ–°è¡¨å¹¶å¡«å……æ•°æ®&lt;/strong&gt;ï¼Œå¦ä¸€ä¸ªç”¨äº&lt;strong&gt;æ ¹æ®å…³è”è¡¨æ›´æ–°ç°æœ‰è¡¨çš„æ•°æ®&lt;/strong&gt;ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹æ¯”ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SELECT INTO&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;UPDATE JOIN&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ›å»ºæ–°è¡¨&lt;/strong&gt;å¹¶æ’å…¥æŸ¥è¯¢ç»“æœ&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ›´æ–°ç°æœ‰è¡¨&lt;/strong&gt;ä¸­å·²æœ‰çš„æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®æ ‡è¡¨è¦æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›®æ ‡è¡¨&lt;strong&gt;å¿…é¡»ä¸å­˜åœ¨&lt;/strong&gt;ï¼Œè¯­å¥æ‰§è¡Œæ—¶è‡ªåŠ¨åˆ›å»º&lt;/td&gt;
&lt;td&gt;ç›®æ ‡è¡¨&lt;strong&gt;å¿…é¡»å·²å­˜åœ¨&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ“ä½œç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„è¡¨&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹ç›®æ ‡è¡¨ä¸­æŒ‡å®šè¡Œçš„æ•°æ®ï¼Œä¸äº§ç”Ÿæ–°è¡¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®å¤‡ä»½ã€å¿«é€Ÿåˆ›å»ºæµ‹è¯•æ ·æœ¬ã€æ•°æ®å½’æ¡£&lt;/td&gt;
&lt;td&gt;è·¨è¡¨æ•°æ®åŒæ­¥ã€ä¾æ®å…³è”è¡¨ä¿¡æ¯æ‰¹é‡æ›´æ–°å­—æ®µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯­æ³•å…³é”®è¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT ... INTO &amp;lt;new_table&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UPDATE ... JOIN ... SET ...&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥äº†è§£ä¸¤è€…"&gt;ğŸ’¡ æ·±å…¥äº†è§£ä¸¤è€…
&lt;/h3&gt;&lt;h4 id="-select-intoå¿«é€Ÿåˆ›å»ºæ•°æ®å‰¯æœ¬"&gt;ğŸ“ SELECT INTOï¼šå¿«é€Ÿåˆ›å»ºæ•°æ®å‰¯æœ¬
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;è¯­å¥å°†æŸ¥è¯¢å’Œå»ºè¡¨åˆäºŒä¸ºä¸€ï¼Œéå¸¸é€‚åˆå¿«é€Ÿåˆ›å»ºæ•°æ®çš„ä¸´æ—¶å‰¯æœ¬æˆ–å­é›†ã€‚æ–°è¡¨çš„ç»“æ„ï¼ˆåˆ—åã€æ•°æ®ç±»å‹ï¼‰ç”±æŸ¥è¯¢ç»“æœå†³å®šï¼Œä½†&lt;strong&gt;ä¸ä¼šè‡ªåŠ¨å¤åˆ¶æºè¡¨çš„çº¦æŸï¼ˆå¦‚ä¸»é”®ã€å¤–é”®ï¼‰å’Œç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;ï¼šä¸ºé‡è¦çš„ä¸šåŠ¡è¡¨åˆ›å»ºä¸€ä¸ªåœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * INTO orders_backup_20241001 FROM orders;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæµ‹è¯•é›†&lt;/strong&gt;ï¼šä»æµ·é‡ç”Ÿäº§æ•°æ®ä¸­æå–ä¸€å°éƒ¨åˆ†æ•°æ®ï¼Œç”¨äºåº”ç”¨æµ‹è¯•æˆ–æ•°æ®åˆ†æï¼Œè€Œä¸å½±å“åŸè¡¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT user_id, username INTO test_users FROM users WHERE last_login_date &amp;gt; &amp;#39;2024-09-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å½’æ¡£&lt;/strong&gt;ï¼šå°†ç¬¦åˆç‰¹å®šæ¡ä»¶ï¼ˆå¦‚ä¸€å¹´å‰ï¼‰çš„æ—§æ•°æ®ç§»å…¥å½’æ¡£è¡¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT * INTO orders_archive_2023 FROM orders WHERE order_date &amp;lt; &amp;#39;2024-01-01&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-update-joinè·¨è¡¨å…³è”æ›´æ–°"&gt;ğŸ”„ UPDATE JOINï¼šè·¨è¡¨å…³è”æ›´æ–°
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;UPDATE JOIN&lt;/code&gt;ç”¨äºæ ¹æ®å¦ä¸€ä¸ªè¡¨ï¼ˆæˆ–å¤šä¸ªè¡¨ï¼‰çš„ä¿¡æ¯æ¥æ›´æ–°ç›®æ ‡è¡¨çš„è®°å½•ã€‚å®ƒç»“åˆäº† &lt;code&gt;UPDATE&lt;/code&gt;çš„ä¿®æ”¹èƒ½åŠ›å’Œ &lt;code&gt;JOIN&lt;/code&gt;çš„å…³è”èƒ½åŠ›ï¼Œå¯ä»¥ç²¾ç¡®åœ°æ‰¹é‡æ›´æ–°æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®åŒæ­¥&lt;/strong&gt;ï¼šç”¨ä¸€ä¸ªè¡¨çš„æ•°æ®å»æ›´æ–°å¦ä¸€ä¸ªè¡¨ã€‚ä¾‹å¦‚ï¼Œç”¨åŒ…å«æœ€æ–°å•†å“ä»·æ ¼çš„ &lt;code&gt;price_list&lt;/code&gt;è¡¨å»æ›´æ–° &lt;code&gt;orders&lt;/code&gt;è¡¨ä¸­çš„å•†å“å•ä»·ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE orders o
JOIN price_list p ON o.product_id = p.product_id
SET o.unit_price = p.new_price;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ´¾ç”Ÿæ•°æ®æ›´æ–°&lt;/strong&gt;ï¼šæ ¹æ®å…³è”è¡¨çš„æ±‡æ€»ä¿¡æ¯è¿›è¡Œæ›´æ–°ã€‚ä¾‹å¦‚ï¼Œæ ¹æ® &lt;code&gt;sales&lt;/code&gt;è¡¨ä¸­çš„é”€å”®è®°å½•ï¼Œæ›´æ–° &lt;code&gt;customers&lt;/code&gt;è¡¨ä¸­æ¯ä¸ªå®¢æˆ·çš„æ€»æ¶ˆè´¹é‡‘é¢ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE customers c
JOIN (
SELECT customer_id, SUM(amount) AS total_spent
FROM sales
GROUP BY customer_id
) s ON c.customer_id = s.customer_id
SET c.total_amount = s.total_spent;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-3"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒé™ä¸å­˜åœ¨æ€§æ£€æŸ¥&lt;/strong&gt;ï¼šæ‰§è¡Œ &lt;code&gt;SELECT INTO&lt;/code&gt;éœ€è¦&lt;strong&gt;åˆ›å»ºè¡¨çš„æƒé™ï¼ˆå¦‚ &lt;code&gt;CREATE TABLE&lt;/code&gt;ï¼‰&lt;/strong&gt;ã€‚è€Œæ‰§è¡Œ &lt;code&gt;UPDATE JOIN&lt;/code&gt;éœ€è¦å¯¹ç›®æ ‡è¡¨æœ‰&lt;strong&gt;æ›´æ–°æƒé™ï¼ˆå¦‚ &lt;code&gt;UPDATE&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼Œå¹¶å¯¹å…³è”çš„è¡¨æœ‰&lt;strong&gt;æŸ¥è¯¢æƒé™ï¼ˆå¦‚ &lt;code&gt;SELECT&lt;/code&gt;ï¼‰&lt;/strong&gt;ã€‚åŒæ—¶ï¼ŒåŠ¡å¿…æ³¨æ„ &lt;code&gt;SELECT INTO&lt;/code&gt;è¦æ±‚æ–°è¡¨åä¸å­˜åœ¨ï¼Œè€Œ &lt;code&gt;UPDATE JOIN&lt;/code&gt;è¦æ±‚ç›®æ ‡è¡¨å¿…é¡»å­˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;UPDATE JOIN&lt;/code&gt;çš„æ¡ä»¶é‡è¦æ€§&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;UPDATE JOIN&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;WHERE&lt;/code&gt;å­å¥è‡³å…³é‡è¦ã€‚å¦‚æœçœç•¥ï¼Œå°†æ›´æ–°&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;åŒ¹é…è¿æ¥æ¡ä»¶çš„è¡Œï¼Œå¯èƒ½å¯¼è‡´æ•°æ®è¢«æ„å¤–å¤§è§„æ¨¡ä¿®æ”¹ã€‚æ“ä½œå‰æœ€å¥½å…ˆä½¿ç”¨ &lt;code&gt;SELECT ... JOIN&lt;/code&gt;éªŒè¯æ¡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©"&gt;ğŸ’ æ€»ç»“ä¸å¦‚ä½•é€‰æ‹©
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªï¼Œå®Œå…¨å–å†³äºä½ çš„ä¸šåŠ¡ç›®æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¡¨&lt;/strong&gt;æ¥å­˜æ”¾æŸ¥è¯¢ç»“æœæ—¶ï¼Œè¯·ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;SELECT INTO&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒå°±åƒä¸€å°å¤å°æœºï¼Œä¸ºä½ ç”Ÿæˆä¸€ä»½å…¨æ–°çš„æ•°æ®å‰¯æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½ éœ€è¦&lt;strong&gt;ä¿®æ”¹ä¸€ä¸ªå·²æœ‰è¡¨å†…éƒ¨çš„æ•°æ®&lt;/strong&gt;ï¼Œå¹¶ä¸”æ–°å€¼æ¥æºäºå…¶ä»–è¡¨æ—¶ï¼Œè¯·ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;UPDATE JOIN&lt;/code&gt;&lt;/strong&gt;ã€‚å®ƒå°±åƒä¸€ä½æ ¡å¯¹å‘˜ï¼Œæ ¹æ®å‚è€ƒèµ„æ–™æ¥ä¿®æ­£ç°æœ‰æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªæ¸…æ™°çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ åœ¨å®é™…å·¥ä½œä¸­å‡†ç¡®åœ°é€‰æ‹©å’Œä½¿ç”¨è¿™ä¸¤ä¸ªå¼ºå¤§çš„SQLå·¥å…·ï¼&lt;/p&gt;
&lt;h2 id="load-data-infile"&gt;LOAD DATA INFILE
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;æ˜¯ MySQL ä¸­ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„æ•°æ®å¯¼å…¥å·¥å…·ï¼Œå®ƒèƒ½å¿«é€Ÿå°†æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹è¯»å–å¹¶æ’å…¥åˆ°æ•°æ®åº“è¡¨ä¸­ã€‚ä¸‹é¢ä¸ºæ‚¨è¯¦ç»†ä»‹ç»å®ƒçš„è¯­æ³•ã€å…³é”®å‚æ•°ã€ä½¿ç”¨åœºæ™¯ä»¥åŠé‡è¦æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h3 id="-æ ¸å¿ƒè¯­æ³•ä¸å‚æ•°è§£è¯»"&gt;ğŸ“œ æ ¸å¿ƒè¯­æ³•ä¸å‚æ•°è§£è¯»
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;çš„åŸºæœ¬è¯­æ³•ç»“æ„å¦‚ä¸‹ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE &amp;#39;file_name&amp;#39;
[REPLACE | IGNORE]
INTO TABLE tbl_name
[CHARACTER SET charset_name]
[FIELDS
[TERMINATED BY &amp;#39;string&amp;#39;]
[[OPTIONALLY] ENCLOSED BY &amp;#39;char&amp;#39;]
[ESCAPED BY &amp;#39;char&amp;#39;]
]
[LINES
[STARTING BY &amp;#39;string&amp;#39;]
[TERMINATED BY &amp;#39;string&amp;#39;]
]
[IGNORE number LINES]
[(col_name_or_user_var, ...)]
[SET col_name = expr, ...]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…³é”®å‚æ•°è¯´æ˜&lt;/strong&gt; ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°/å­å¥&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;LOCAL&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ–‡ä»¶ä½äº&lt;strong&gt;å®¢æˆ·ç«¯ä¸»æœº&lt;/strong&gt;è€ŒéæœåŠ¡å™¨ä¸»æœºã€‚ä½¿ç”¨åï¼Œæ–‡ä»¶ç”±å®¢æˆ·ç«¯è¯»å–å¹¶å‘é€è‡³æœåŠ¡å™¨ï¼Œæ— éœ€æœåŠ¡å™¨ç«¯çš„ &lt;code&gt;FILE&lt;/code&gt;æƒé™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;REPLACE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥æ–°è¡Œä¸å·²æœ‰è¡Œçš„ä¸»é”®æˆ–å”¯ä¸€é”®é‡å¤ï¼Œåˆ™&lt;strong&gt;æ›¿æ¢&lt;/strong&gt;å·²æœ‰è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;IGNORE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‹¥æ–°è¡Œä¸å·²æœ‰è¡Œçš„ä¸»é”®æˆ–å”¯ä¸€é”®é‡å¤ï¼Œåˆ™&lt;strong&gt;å¿½ç•¥&lt;/strong&gt;è¯¥æ–°è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CHARACTER SET&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ–‡ä»¶å†…å®¹çš„å­—ç¬¦é›†ï¼Œå¦‚ &lt;code&gt;utf8&lt;/code&gt;ã€‚è‹¥æœªæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨ &lt;code&gt;character_set_database&lt;/code&gt;ç³»ç»Ÿå˜é‡æŒ‡å®šçš„å­—ç¬¦é›† ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;FIELDS&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰å­—æ®µçš„è§£ææ–¹å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;TERMINATED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºåˆ¶è¡¨ç¬¦ &lt;code&gt;\t&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;ENCLOSED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­—æ®µåŒ…å›´ç¬¦ï¼ˆå¼•å·ï¼‰ã€‚ä½¿ç”¨ &lt;code&gt;OPTIONALLY&lt;/code&gt;åˆ™ä»…åŒ…å›´å­—ç¬¦ä¸²ç±»å‹å­—æ®µã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;ESCAPED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è½¬ä¹‰å­—ç¬¦ï¼Œé»˜è®¤ä¸ºåæ–œçº¿ ``ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;LINES&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å®šä¹‰è¡Œçš„è§£ææ–¹å¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;TERMINATED BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¡Œç»ˆæ­¢ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦ &lt;code&gt;\n&lt;/code&gt;ã€‚Windows æ–‡ä»¶å¸¸ç”¨ &lt;code&gt;\r\n&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;â†³ &lt;code&gt;STARTING BY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¡Œèµ·å§‹æ ‡è®°ï¼Œç”¨äºè·³è¿‡ç‰¹å®šå‰ç¼€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;IGNORE number LINES&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿½ç•¥æ–‡ä»¶å¼€å¤´çš„æŒ‡å®šè¡Œæ•°ï¼Œå¸¸ç”¨äºè·³è¿‡æ ‡é¢˜è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ—ååˆ—è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;(col1, col2, ...)&lt;/code&gt;ï¼Œå½“æ–‡ä»¶åˆ—ä¸è¡¨åˆ—é¡ºåºä¸ä¸€è‡´æˆ–åªéœ€å¯¼å…¥éƒ¨åˆ†åˆ—æ—¶ä½¿ç”¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;SET&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¯¹å¯¼å…¥çš„æ•°æ®è¿›è¡Œè½¬æ¢æˆ–è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚ &lt;code&gt;SET update_time = CURRENT_TIMESTAMP&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ–‡ä»¶è·¯å¾„è§£æè§„åˆ™"&gt;ğŸ“‚ æ–‡ä»¶è·¯å¾„è§£æè§„åˆ™
&lt;/h3&gt;&lt;p&gt;æ–‡ä»¶çš„ä½ç½®å–å†³äºæ˜¯å¦ä½¿ç”¨äº† &lt;code&gt;LOCAL&lt;/code&gt;å…³é”®å­—ï¼Œè§„åˆ™æœ‰æ‰€ä¸åŒ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;ï¼ˆå®¢æˆ·ç«¯æ–‡ä»¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœæŒ‡å®šäº†ç»å¯¹è·¯å¾„ï¼Œå®¢æˆ·ç«¯ç¨‹åºç›´æ¥ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæŒ‡å®šäº†ç›¸å¯¹è·¯å¾„ï¼Œåˆ™è·¯å¾„ç›¸å¯¹äºå¯åŠ¨å®¢æˆ·ç«¯ç¨‹åºæ—¶æ‰€åœ¨çš„ç›®å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœªä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;ï¼ˆæœåŠ¡å™¨æ–‡ä»¶ï¼‰&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ–‡ä»¶å¿…é¡»ä½äº MySQL æœåŠ¡å™¨ä¸»æœºä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»å¯¹è·¯å¾„ç›´æ¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›¸å¯¹è·¯å¾„çš„æŸ¥æ‰¾è§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è·¯å¾„ç¤ºä¾‹&lt;/th&gt;
&lt;th&gt;æŸ¥æ‰¾ä½ç½®&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'/path/to/file.txt'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å™¨çš„ç»å¯¹è·¯å¾„ &lt;code&gt;/path/to/file.txt&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'./file.txt'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç›¸å¯¹äºæœåŠ¡å™¨çš„æ•°æ®ç›®å½•ï¼ˆå¦‚ &lt;code&gt;/var/lib/mysql/./file.txt&lt;/code&gt;ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;'file.txt'&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åœ¨å½“å‰&lt;strong&gt;æ•°æ®åº“çš„ç›®å½•&lt;/strong&gt;ä¸‹æŸ¥æ‰¾ï¼ˆå¦‚ &lt;code&gt;/var/lib/mysql/db_name/file.txt&lt;/code&gt;ï¼‰ã€‚&lt;strong&gt;ç‰¹åˆ«æ³¨æ„&lt;/strong&gt;ï¼šå³ä½¿è¯­å¥æ˜¯å¯¼å…¥åˆ° &lt;code&gt;db2&lt;/code&gt;çš„è¡¨ï¼Œå¦‚æœå½“å‰æ•°æ®åº“æ˜¯ &lt;code&gt;db1&lt;/code&gt;ï¼Œå®ƒä¹Ÿä¼šåœ¨ &lt;code&gt;db1&lt;/code&gt;çš„ç›®å½•ä¸‹å¯»æ‰¾ &lt;code&gt;file.txt&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æƒé™ä¸å®‰å…¨é…ç½®"&gt;ğŸ›¡ï¸ æƒé™ä¸å®‰å…¨é…ç½®
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨ç«¯æ–‡ä»¶&lt;/strong&gt;ï¼šæ‰§è¡Œæ“ä½œçš„ç”¨æˆ·å¿…é¡»æ‹¥æœ‰ &lt;strong&gt;&lt;code&gt;FILE&lt;/code&gt;&lt;/strong&gt; æƒé™ï¼Œå¹¶ä¸”æ–‡ä»¶å¿…é¡»ä½äº &lt;code&gt;secure_file_priv&lt;/code&gt;ç³»ç»Ÿå˜é‡æŒ‡å®šçš„ç›®å½•ä¸­ï¼ˆå¦‚æœè¯¥å˜é‡å€¼éç©ºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯æ–‡ä»¶ï¼ˆä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;ï¼‰&lt;/strong&gt;ï¼šä¸éœ€è¦ &lt;code&gt;FILE&lt;/code&gt;æƒé™ï¼Œä½†éœ€è¦ç¡®ä¿æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å¯ç”¨äº† &lt;code&gt;LOCAL&lt;/code&gt;åŠŸèƒ½ã€‚æ£€æŸ¥ &lt;code&gt;local_infile&lt;/code&gt;ç³»ç»Ÿå˜é‡çš„å€¼ï¼Œè‹¥ä¸º &lt;code&gt;OFF&lt;/code&gt;ï¼Œåˆ™éœ€å°†å…¶å¯ç”¨ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®ç”¨ç¤ºä¾‹ä¸åœºæ™¯"&gt;ğŸ’¡ å®ç”¨ç¤ºä¾‹ä¸åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯¼å…¥CSVæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ª &lt;code&gt;students.csv&lt;/code&gt;æ–‡ä»¶ï¼Œç¬¬ä¸€è¡Œæ˜¯åˆ—æ ‡é¢˜ï¼Œå­—æ®µç”±é€—å·åˆ†éš”ï¼Œå­—ç¬¦ä¸²ç”±åŒå¼•å·åŒ…å›´ï¼Œè¡Œå°¾æ˜¯ &lt;code&gt;\r\n&lt;/code&gt;ï¼Œè¦å¯¼å…¥åˆ° &lt;code&gt;students&lt;/code&gt;è¡¨ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LOAD DATA LOCAL INFILE &amp;#39;/path/to/students.csv&amp;#39;
INTO TABLE students
CHARACTER SET utf8
FIELDS TERMINATED BY &amp;#39;,&amp;#39; OPTIONALLY ENCLOSED BY &amp;#39;&amp;#34;&amp;#39;
LINES TERMINATED BY &amp;#39;\r\n&amp;#39;
IGNORE 1 LINES
(name, age, email);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤„ç†æ•°æ®é‡å¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¡¨ä¸­å·²æœ‰ä¸»é”®ï¼Œå¯¼å…¥æ—¶é‡åˆ°é‡å¤ä¸»é”®çš„è®°å½•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¸Œæœ›è¦†ç›–æ—§è®°å½•ï¼šä½¿ç”¨ &lt;code&gt;REPLACE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¸Œæœ›ä¿ç•™æ—§è®°å½•ï¼Œè·³è¿‡æ–°è®°å½•ï¼šä½¿ç”¨ &lt;code&gt;IGNORE&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä»…å¯¼å…¥éƒ¨åˆ†åˆ—æˆ–è½¬æ¢æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ–‡ä»¶åªåŒ…å« &lt;code&gt;name&lt;/code&gt;å’Œ &lt;code&gt;birth_date&lt;/code&gt;ï¼Œä½†è¡¨ä¸­æœ‰ &lt;code&gt;name&lt;/code&gt;, &lt;code&gt;age&lt;/code&gt;, &lt;code&gt;create_time&lt;/code&gt;ä¸‰åˆ—ï¼Œå¯ä»¥è¿™æ ·å¯¼å…¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LOAD DATA INFILE &amp;#39;data.txt&amp;#39;
INTO TABLE my_table
FIELDS TERMINATED BY &amp;#39;,&amp;#39;
(name, @birth_year) -- å°†å‡ºç”Ÿå¹´ä»½è¯»å…¥ç”¨æˆ·å˜é‡
SET age = YEAR(CURDATE()) - @birth_year, -- è®¡ç®—å¹´é¾„
create_time = NOW(); -- ç›´æ¥è®¾ç½®åˆ›å»ºæ—¶é—´
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-4"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹äºç©ºçš„ MyISAM è¡¨ï¼Œ&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;ä¼šæ‰¹é‡åˆ›å»ºéå”¯ä¸€ç´¢å¼•ï¼Œè¿™æ¯”é€è¡Œæ’å…¥è¦å¿«å¾ˆå¤šã€‚å¯¹äºæœ‰å¤§é‡ç´¢å¼•çš„è¡¨ï¼Œå¯ä»¥åœ¨å¯¼å…¥å‰ä½¿ç”¨ &lt;code&gt;ALTER TABLE ... DISABLE KEYS&lt;/code&gt;ç¦ç”¨ç´¢å¼•ï¼Œå¯¼å…¥åå†ç”¨ &lt;code&gt;ALTER TABLE ... ENABLE KEYS&lt;/code&gt;é‡å»ºç´¢å¼•ï¼Œä»¥è¿›ä¸€æ­¥æå‡é€Ÿåº¦ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ &lt;code&gt;SELECT ... INTO OUTFILE&lt;/code&gt;å¯¹åº”&lt;/strong&gt;ï¼š&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;æ˜¯ &lt;code&gt;SELECT ... INTO OUTFILE&lt;/code&gt;çš„é€†æ“ä½œã€‚è¦å°†æ•°æ®ä»è¡¨å¯¼å‡ºåˆ°æ–‡ä»¶ï¼Œå¯ä½¿ç”¨åè€…ã€‚ä¸¤ä¸ªè¯­å¥çš„ &lt;code&gt;FIELDS&lt;/code&gt;å’Œ &lt;code&gt;LINES&lt;/code&gt;å­å¥è®¾ç½®å¿…é¡»åŒ¹é…ï¼Œæ‰èƒ½æ­£ç¡®åœ°å°†å¯¼å‡ºçš„æ•°æ®é‡æ–°å¯¼å…¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯å¤„ç†&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;LOCAL&lt;/code&gt;æ—¶ï¼Œæ•°æ®è§£é‡Šé”™è¯¯å’Œé‡å¤é”®é”™è¯¯é€šå¸¸ä¼šå˜ä¸ºè­¦å‘Šï¼Œæ“ä½œä¼šç»§ç»­æ‰§è¡Œï¼Œæ•ˆæœç±»ä¼¼äºæŒ‡å®šäº† &lt;code&gt;IGNORE&lt;/code&gt;ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ“ä½œåï¼Œå»ºè®®æ£€æŸ¥è­¦å‘Šä¿¡æ¯ï¼ˆ&lt;code&gt;SHOW WARNINGS&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-7"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;LOAD DATA INFILE&lt;/code&gt;æ˜¯ MySQL ä¸­è¿›è¡Œæ‰¹é‡æ•°æ®å¯¼å…¥çš„å¼ºå¤§å·¥å…·ï¼Œå…¶æ•ˆç‡è¿œé«˜äºé€æ¡æ‰§è¡Œ &lt;code&gt;INSERT&lt;/code&gt;è¯­å¥ã€‚æˆåŠŸä½¿ç”¨å®ƒçš„å…³é”®åœ¨äºæ­£ç¡®è®¾ç½®æ–‡ä»¶è·¯å¾„ã€åŒ¹é…å­—æ®µå’Œè¡Œçš„æ ¼å¼é€‰é¡¹ï¼Œå¹¶ç†è§£å¦‚ä½•å¤„ç†æ•°æ®é‡å¤å’Œè¿›è¡Œå¿…è¦çš„æ•°æ®è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ &lt;code&gt;LOAD DATA INFILE&lt;/code&gt;ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="2pc"&gt;2PC
&lt;/h2&gt;&lt;p&gt;MySQLçš„ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰æ˜¯ä¸€ç§å…³é”®çš„äº‹åŠ¡å¤„ç†æœºåˆ¶ï¼Œå°¤å…¶åœ¨éœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„åœºæ™¯ä¸­å‘æŒ¥ç€æ ¸å¿ƒä½œç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ·±å…¥æ¢è®¨å…¶å·¥ä½œåŸç†ã€å…·ä½“æµç¨‹å’Œåº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿é«˜ä¸€è‡´æ€§è¦æ±‚ä¸šåŠ¡ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰çš„æ•°æ®å®‰å…¨ï¼ŒMySQLå¼•å…¥äº†ä¸¤é˜¶æ®µæäº¤æœºåˆ¶ã€‚å®ƒæœ€åˆä¸»è¦è§£å†³InnoDBå­˜å‚¨å¼•æ“çš„redo logä¸MySQL Serverå±‚çš„binlogåœ¨äº‹åŠ¡æäº¤æ—¶çš„ååŒé—®é¢˜ï¼Œåæ¥ä¹Ÿæ‰©å±•åˆ°åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="-æ ¸å¿ƒæµç¨‹è§£æ"&gt;ğŸ”„ æ ¸å¿ƒæµç¨‹è§£æ
&lt;/h3&gt;&lt;p&gt;MySQLå†…éƒ¨çš„ä¸¤é˜¶æ®µæäº¤ï¼ˆä»¥åè°ƒredo logå’Œbinlogä¸ºä¾‹ï¼‰å°†ä¸€ä¸ªäº‹åŠ¡çš„æäº¤è¿‡ç¨‹ç²¾ç¡®åœ°åˆ’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå…¶æ ¸å¿ƒæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="https://uploadfiles.nowcoder.com/images/20250609/0_1749452333151/C5BF19C7B26EF4F11D743E1277A01431"
loading="lazy"
alt="img"
&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[äº‹åŠ¡æ‰§è¡Œ&amp;lt;br&amp;gt;DMLæ“ä½œ] --&amp;gt; B[ç¬¬ä¸€é˜¶æ®µï¼šPrepare Phase]
B --&amp;gt; C[InnoDBå°†redo logå†™å…¥&amp;lt;br&amp;gt;å¹¶æ ‡è®°ä¸ºPREPAREçŠ¶æ€]
C --&amp;gt; D{redo logå†™å…¥æ˜¯å¦æˆåŠŸ?}
D -- æˆåŠŸ --&amp;gt; E[ç¬¬äºŒé˜¶æ®µï¼šCommit Phase]
D -- å¤±è´¥ --&amp;gt; F[äº‹åŠ¡å›æ»š]
E --&amp;gt; G[Serverå±‚å°†äº‹åŠ¡å†™å…¥binlog]
G --&amp;gt; H{binlogå†™å…¥æ˜¯å¦æˆåŠŸ?}
H -- æˆåŠŸ --&amp;gt; I[InnoDBå°†redo log&amp;lt;br&amp;gt;æ ‡è®°ä¸ºCOMMITçŠ¶æ€]
H -- å¤±è´¥ --&amp;gt; F
I --&amp;gt; J[äº‹åŠ¡æäº¤å®Œæˆ]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæµç¨‹ç¡®ä¿äº†redo logå’Œbinlogè¦ä¹ˆåŒæ—¶ç”Ÿæ•ˆï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œä»è€Œç»´æŠ¤äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h3 id="-å…³é”®é…ç½®å‚æ•°ä¸å´©æºƒæ¢å¤"&gt;âš™ï¸ å…³é”®é…ç½®å‚æ•°ä¸å´©æºƒæ¢å¤
&lt;/h3&gt;&lt;p&gt;ç†è§£å¹¶é…ç½®ä»¥ä¸‹å‚æ•°å¯¹ä¿è¯2PCçš„å¯é æ€§è‡³å…³é‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;&lt;/strong&gt;ï¼šæ§åˆ¶redo logçš„åˆ·ç›˜ç­–ç•¥ã€‚
&lt;ul&gt;
&lt;li&gt;è®¾ç½®ä¸º &lt;strong&gt;&lt;code&gt;1&lt;/code&gt;&lt;/strong&gt;ï¼ˆé»˜è®¤å€¼ï¼‰æ—¶ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤æ—¶éƒ½å°†redo logç›´æ¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œèƒ½æœ€å¤§é™åº¦ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œä½†IOå¼€é”€è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog&lt;/code&gt;&lt;/strong&gt;ï¼šæ§åˆ¶binlogçš„åˆ·ç›˜ç­–ç•¥ã€‚
&lt;ul&gt;
&lt;li&gt;è®¾ç½®ä¸º &lt;strong&gt;&lt;code&gt;1&lt;/code&gt;&lt;/strong&gt;ï¼ˆMySQL 8.0åŠä»¥åé»˜è®¤ï¼‰æ—¶ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½ä¼šæ‰§è¡Œbinlogçš„fsyncæ“ä½œï¼Œç¡®ä¿binlogè½ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å´©æºƒæ¢å¤æœºåˆ¶&lt;/strong&gt;æ˜¯2PCçš„å¦ä¸€ä¸ªå…³é”®ç‚¹ã€‚æ•°æ®åº“é‡å¯åï¼Œæ¢å¤è¿‡ç¨‹ä¼šæ£€æŸ¥redo logçš„çŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœredo logå¤„äº &lt;strong&gt;&lt;code&gt;COMMIT&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ï¼Œè¯´æ˜äº‹åŠ¡å·²æˆåŠŸæäº¤ï¼Œç›´æ¥å®Œæˆå³å¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœredo logå¤„äº &lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ï¼Œåˆ™ä¼šå»æ£€æŸ¥binlogã€‚
&lt;ul&gt;
&lt;li&gt;å¦‚æœæ‰¾åˆ°å¯¹åº”çš„binlogè®°å½•ä¸”å®Œæ•´ï¼Œåˆ™æäº¤äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ‰¾ä¸åˆ°å¯¹åº”çš„binlogè®°å½•ï¼Œåˆ™å›æ»šäº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹ç¡®ä¿äº†å³ä½¿åœ¨æäº¤çš„ç¬¬äºŒé˜¶æ®µå‘ç”Ÿå´©æºƒï¼Œä¹Ÿèƒ½æ ¹æ®æ—¥å¿—çš„æœ€ç»ˆä¸€è‡´æ€§çŠ¶æ€åšå‡ºæ­£ç¡®çš„å†³ç­–ã€‚&lt;/p&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯ä¸è€ƒé‡"&gt;ğŸ“Š åº”ç”¨åœºæ™¯ä¸è€ƒé‡
&lt;/h3&gt;&lt;p&gt;ä¸¤é˜¶æ®µæäº¤ä¸»è¦åº”ç”¨äºä»¥ä¸‹åœºæ™¯ï¼Œä½†éœ€æ³¨æ„å…¶ä¼˜ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœºæ™¯ç±»å‹&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;è¯´æ˜ä¸è€ƒé‡&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MySQLå†…éƒ¨ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯InnoDBçš„redo logå’ŒServerå±‚çš„binlogåœ¨äº‹åŠ¡æäº¤æ—¶çš„ä¸€è‡´æ€§ï¼Œè¿™æ˜¯&lt;strong&gt;æœ€å¸¸ç”¨å’ŒåŸºç¡€&lt;/strong&gt;çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;ç¡®ä¿äº†æ•°æ®åº“çš„&lt;strong&gt;crash-safe&lt;/strong&gt;èƒ½åŠ›å’Œ&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;çš„æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆXAäº‹åŠ¡ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨è·¨å¤šä¸ªMySQLå®ä¾‹æˆ–ä¸åŒæ•°æ®åº“çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä¿è¯æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤ï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šã€‚&lt;/td&gt;
&lt;td&gt;æä¾›äº†&lt;strong&gt;å¼ºä¸€è‡´æ€§&lt;/strong&gt;ä¿è¯ï¼Œä½†ä¼šå¸¦æ¥&lt;strong&gt;æ€§èƒ½å¼€é”€&lt;/strong&gt;ã€&lt;strong&gt;åŒæ­¥é˜»å¡&lt;/strong&gt;å’Œ&lt;strong&gt;åè°ƒè€…å•ç‚¹æ•…éšœ&lt;/strong&gt;çš„é£é™©ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ-1"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;MySQLçš„ä¸¤é˜¶æ®µæäº¤æœºåˆ¶æ˜¯ä¿éšœæ•°æ®ä¸€è‡´æ€§çš„åŸºçŸ³ã€‚ç†è§£å…¶æµç¨‹å’Œé…ç½®ï¼Œèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°è¿›è¡Œæ•°æ®åº“ç®¡ç†å’Œæ¶æ„è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼šé€šè¿‡å°†äº‹åŠ¡æäº¤æ‹†åˆ†ä¸ºå‡†å¤‡å’Œæäº¤ä¸¤ä¸ªé˜¶æ®µï¼Œç¡®ä¿redo logå’Œbinlogçš„å†™å…¥ä¿æŒåŸå­æ€§ï¼Œæ˜¯å®ç°&lt;strong&gt;Crash-Safe&lt;/strong&gt;å’Œå¯é ä¸»ä»å¤åˆ¶çš„å…³é”®æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸å¯é æ€§çš„æƒè¡¡&lt;/strong&gt;ï¼šé€šè¿‡&lt;code&gt;innodb_flush_log_at_trx_commit&lt;/code&gt;å’Œ&lt;code&gt;sync_binlog&lt;/code&gt;è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå¯ä»¥åœ¨æ•°æ®å®‰å…¨æ€§å’Œå†™å…¥æ€§èƒ½ä¹‹é—´è¿›è¡Œæƒè¡¡ã€‚å¯¹äºè¦æ±‚æ•°æ®å¼ºä¸€è‡´çš„é‡‘èçº§ä¸šåŠ¡ï¼Œæ¨èè®¾ç½®ä¸ºåŒ1æ¨¡å¼ï¼›å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ä¸”å¯å®¹å¿å°‘é‡æ•°æ®ä¸¢å¤±çš„åœºæ™¯ï¼Œå¯è€ƒè™‘è°ƒæ•´å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡çš„è€ƒé‡&lt;/strong&gt;ï¼šXAåè®®è™½ç„¶æä¾›äº†å¼ºä¸€è‡´æ€§ï¼Œä½†å…¶å›ºæœ‰çš„æ€§èƒ½é—®é¢˜å’Œå¤æ‚æ€§ä¹Ÿæ¨åŠ¨äº†å¦‚&lt;strong&gt;Seata&lt;/strong&gt;ç­‰æ›´çµæ´»çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶çš„å‘å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£MySQLçš„ä¸¤é˜¶æ®µæäº¤ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šç»†èŠ‚æˆ–åº”ç”¨åœºæ™¯æœ‰è¿›ä¸€æ­¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="undo-log"&gt;UNDO LOG
&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œå®ƒè§¦åŠäº†MySQLå†…éƒ¨äº‹åŠ¡æœºåˆ¶è®¾è®¡çš„æ ¸å¿ƒã€‚ç®€å•æ¥è¯´ï¼Œ2PCä¸è€ƒè™‘undo logçš„æ ¹æœ¬åŸå› åœ¨äº&lt;strong&gt;èŒè´£åˆ†ç¦»&lt;/strong&gt;ï¼š2PCçš„æ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;åˆ†å¸ƒå¼ä¸€è‡´æ€§&lt;/strong&gt;ï¼Œè€Œundo logçš„æ ¸å¿ƒèŒè´£æ˜¯ä¿è¯äº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ã€‚å®ƒä»¬æ˜¯ä¸åŒå±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥æ¸…æ™°åœ°å±•ç¤ºå®ƒä»¬çš„ä¸åŒå®šä½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤ (2PC)&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å›æ»šæ—¥å¿— (Undo Log)&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿è¯ &lt;strong&gt;Redo Log&lt;/strong&gt; å’Œ &lt;strong&gt;Binlog&lt;/strong&gt; çš„&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼Œç¡®ä¿äº‹åŠ¡çš„&lt;strong&gt;æŒä¹…æ€§&lt;/strong&gt;å’Œä¸»ä»æ•°æ®ä¸€è‡´ã€‚&lt;/td&gt;
&lt;td&gt;ä¿è¯å•ä¸ªäº‹åŠ¡çš„&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼ˆå›æ»šï¼‰å’Œ&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ï¼ˆMVCCï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è·¨ç³»ç»Ÿåè°ƒ&lt;/strong&gt;ï¼šåè°ƒå­˜å‚¨å¼•æ“å±‚ï¼ˆInnoDB/Redo Logï¼‰å’ŒServerå±‚ï¼ˆBinlogï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“å†…éƒ¨&lt;/strong&gt;ï¼šInnoDBå¼•æ“å†…éƒ¨ç”¨äºå›æ»šå’Œæ„å»ºå¤šç‰ˆæœ¬æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»…åœ¨äº‹åŠ¡&lt;strong&gt;æäº¤è¿‡ç¨‹&lt;/strong&gt;ä¸­çŸ­æš‚æ´»è·ƒã€‚&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡&lt;strong&gt;æäº¤åå¯èƒ½ä»å­˜åœ¨&lt;/strong&gt;ï¼Œä¸ºMVCCæœåŠ¡ï¼Œç›´åˆ°è¢«purgeçº¿ç¨‹æ¸…ç†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2PCä¸­çš„è§’è‰²&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è§’&lt;/strong&gt;ï¼šRedo Logå’ŒBinlogæ˜¯2PCåè®®çš„ç›´æ¥å‚ä¸è€…ï¼Œå…¶çŠ¶æ€å†³å®šäº‹åŠ¡æœ€ç»ˆå‘½è¿ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¹•åæ”¯æŒè€…&lt;/strong&gt;ï¼šä¸å‚ä¸åè®®å†³ç­–ï¼Œä»…åœ¨2PCå†³ç­–ç»“æœä¸ºâ€œå›æ»šâ€æ—¶æ‰§è¡Œå…·ä½“å›æ»šæ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥è§£æä¸ºä½•å¦‚æ­¤è®¾è®¡"&gt;ğŸ” æ·±å…¥è§£æï¼šä¸ºä½•å¦‚æ­¤è®¾è®¡ï¼Ÿ
&lt;/h3&gt;&lt;h4 id="1-ç›®æ ‡ä¸åŒè§£å†³ä¸åŒçš„é—®é¢˜"&gt;1. ç›®æ ‡ä¸åŒï¼šè§£å†³ä¸åŒçš„é—®é¢˜
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2PCè¦è§£å†³çš„æ˜¯â€œæ—¥å¿—åŒæ­¥â€é—®é¢˜&lt;/strong&gt;ã€‚MySQLä¸ºäº†åŒæ—¶æ‹¥æœ‰å´©æºƒæ¢å¤èƒ½åŠ›ï¼ˆRedo Logï¼‰å’Œä¸»ä»å¤åˆ¶èƒ½åŠ›ï¼ˆBinlogï¼‰ï¼Œå¼•å…¥äº†è¿™ä¸¤ä¸ªç‹¬ç«‹çš„æ—¥å¿—ç³»ç»Ÿã€‚2PCå°±æ˜¯ä¸ºäº†ç¡®ä¿å¯¹ä¸€ä¸ªæ•°æ®çš„ä¿®æ”¹ï¼Œåœ¨è¿™ä¸¤ä¸ªæ—¥å¿—ä¸­çš„è®°å½•æ˜¯&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;çš„ï¼šè¦ä¹ˆä¸¤ä¸ªæ—¥å¿—éƒ½è®°å½•æˆåŠŸï¼ˆäº‹åŠ¡æäº¤ï¼‰ï¼Œè¦ä¹ˆä¸¤ä¸ªæ—¥å¿—éƒ½åƒæ²¡è®°å½•è¿‡ä¸€æ ·ï¼ˆäº‹åŠ¡å›æ»šï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Undo Logè¦è§£å†³çš„æ˜¯â€œäº‹åŠ¡å›æ»šå’Œå¤šç‰ˆæœ¬è¯»â€é—®é¢˜&lt;/strong&gt;ã€‚å®ƒåœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè®°å½•æ•°æ®ä¿®æ”¹å‰çš„æ—§ç‰ˆæœ¬ã€‚å¦‚æœäº‹åŠ¡éœ€è¦å›æ»šï¼Œå°±ç”¨undo logæ¢å¤æ•°æ®ã€‚åŒæ—¶ï¼Œå®ƒä¸ºå…¶ä»–è¯»è¯·æ±‚æä¾›å†å²ç‰ˆæœ¬ï¼Œå®ç°MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ï¼Œä¿è¯è¯»å†™ä¸é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥ç†è§£ä¸ºï¼š2PCæ˜¯&lt;strong&gt;æ•°æ®åº“ç³»ç»Ÿå±‚é¢&lt;/strong&gt;çš„â€œæ€»æŒ‡æŒ¥éƒ¨â€ï¼Œåè°ƒä¸¤å¤§é‡è¦æ¨¡å—ï¼›è€ŒUndo Logæ˜¯&lt;strong&gt;å­˜å‚¨å¼•æ“å†…éƒ¨&lt;/strong&gt;çš„â€œåå‹¤ä¿éšœéƒ¨é—¨â€ï¼Œè´Ÿè´£å†…éƒ¨çš„æ•°æ®ç‰ˆæœ¬ç®¡ç†ã€‚&lt;/p&gt;
&lt;h4 id="2-ä¾èµ–å…³ç³»undo-logçš„å¯é æ€§ç”±redo-logä¿éšœ"&gt;2. ä¾èµ–å…³ç³»ï¼šUndo Logçš„å¯é æ€§ç”±Redo Logä¿éšœ
&lt;/h4&gt;&lt;p&gt;ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ï¼Œ&lt;strong&gt;å¯¹Undo Logæœ¬èº«çš„ä¿®æ”¹ä¹Ÿä¼šäº§ç”ŸRedo Log&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUndo Logçš„æŒä¹…åŒ–æ˜¯ç”±Redo Logæ¥ä¿è¯çš„ã€‚å½“2PCåè®®ç¡®ä¿Redo LogæˆåŠŸå†™å…¥åï¼Œå°±æ„å‘³ç€Undo Logçš„ä¿®æ”¹ä¹Ÿå·²ç»å®‰å…¨è½ç›˜ã€‚å› æ­¤ï¼Œ2PCåè®®æ— éœ€å†é¢å¤–å…³å¿ƒUndo Logçš„çŠ¶æ€ï¼Œåªè¦æ§åˆ¶å¥½Redo Logå’ŒBinlogï¼Œå°±èƒ½é—´æ¥ä¿è¯æ•´ä¸ªç³»ç»Ÿï¼ˆåŒ…æ‹¬Undo Logï¼‰çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;h4 id="3-ç”Ÿå‘½å‘¨æœŸundo-logçš„å­˜æ´»æ—¶é—´è¿œè¶…2pc"&gt;3. ç”Ÿå‘½å‘¨æœŸï¼šUndo Logçš„å­˜æ´»æ—¶é—´è¿œè¶…2PC
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2PCçš„ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;åœ¨äº‹åŠ¡æäº¤çš„é‚£ä¸€åˆ»å°±åŸºæœ¬ç»“æŸäº†ã€‚ä¸€æ—¦Redo Logæ ‡è®°ä¸ºCommitï¼Œåè°ƒå·¥ä½œå°±å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Undo Logçš„ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;å¯èƒ½æ›´é•¿ã€‚ä¸ºäº†æ”¯æŒMVCCï¼Œå³ä½¿äº‹åŠ¡æäº¤äº†ï¼Œå…¶äº§ç”Ÿçš„Undo Logä¹Ÿå¯èƒ½éœ€è¦ä¿ç•™ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æ‰€æœ‰å¯èƒ½ç”¨åˆ°è¿™ä¸ªæ—§ç‰ˆæœ¬æ•°æ®çš„äº‹åŠ¡éƒ½ç»“æŸåï¼Œæ‰ä¼šè¢«purgeçº¿ç¨‹å¼‚æ­¥æ¸…ç†ã€‚&lt;/p&gt;
&lt;p&gt;è®©ä¸€ä¸ªçŸ­æš‚å­˜åœ¨çš„åè°ƒåè®®å»ç®¡ç†ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå¯èƒ½æ›´é•¿çš„å†…éƒ¨æ•°æ®ç‰ˆæœ¬ï¼Œåœ¨è®¾è®¡å’Œå®ç°ä¸Šéƒ½æ˜¯ä¸åˆç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å®æˆ˜åœºæ™¯å´©æºƒæ¢å¤ä¸­çš„åä½œ"&gt;ğŸ’¡ å®æˆ˜åœºæ™¯ï¼šå´©æºƒæ¢å¤ä¸­çš„åä½œ
&lt;/h3&gt;&lt;p&gt;æœ€èƒ½ä½“ç°äºŒè€…å…³ç³»çš„åœºæ™¯æ˜¯&lt;strong&gt;æ•°æ®åº“å´©æºƒæ¢å¤&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•°æ®åº“é‡å¯åï¼Œæ‰«æRedo Logï¼Œæ‰¾åˆ°æ‰€æœ‰å¤„äº&lt;code&gt;PREPARE&lt;/code&gt;çŠ¶æ€ä½†æœª&lt;code&gt;COMMIT&lt;/code&gt;çš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ¯ä¸ªè¿™æ ·çš„äº‹åŠ¡ï¼Œæ ¹æ®å…¶XIDï¼ˆäº‹åŠ¡IDï¼‰å»Binlogä¸­æŸ¥æ‰¾ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœBinlogä¸­å­˜åœ¨å®Œæ•´çš„è¯¥äº‹åŠ¡è®°å½•&lt;/strong&gt;ï¼šè¯´æ˜äº‹åŠ¡åœ¨å´©æºƒå‰å·²ç»æˆåŠŸï¼Œ2PCå†³ç­–ä¸ºâ€œæäº¤â€ã€‚äºæ˜¯ï¼ŒInnoDBä¼šé‡åšï¼ˆRedoï¼‰è¿™ä¸ªäº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºæäº¤ã€‚&lt;strong&gt;æ­¤æ—¶å®Œå…¨ä¸éœ€è¦Undo Logã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœBinlogä¸­æ‰¾ä¸åˆ°è¯¥äº‹åŠ¡çš„è®°å½•&lt;/strong&gt;ï¼šè¯´æ˜äº‹åŠ¡åœ¨å´©æºƒå‰æœªå®Œæˆï¼Œ2PCå†³ç­–ä¸ºâ€œå›æ»šâ€ã€‚è¿™æ—¶ï¼Œæ‰ä¼šç”¨åˆ°&lt;strong&gt;Undo Log&lt;/strong&gt;æ¥æ’¤é”€è¯¥äº‹åŠ¡å·²ç»åšçš„ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸ªæµç¨‹æ¸…æ™°åœ°è¡¨æ˜ï¼š&lt;strong&gt;Undo Logæ˜¯2PCå†³ç­–çš„æ‰§è¡Œå·¥å…·ï¼Œè€Œéå†³ç­–å‚ä¸è€…&lt;/strong&gt;ã€‚2PCå…ˆåŸºäºRedo Logå’ŒBinlogåšå‡ºâ€œæäº¤â€æˆ–â€œå›æ»šâ€çš„å…¨å±€å†³ç­–ï¼ŒUndo Logåªåœ¨å†³ç­–ä¸ºâ€œå›æ»šâ€æ—¶è¢«è§¦å‘ï¼Œå¿ å®åœ°æ‰§è¡Œå›æ»šæ“ä½œã€‚&lt;/p&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œ2PCä¸è€ƒè™‘Undo Logï¼Œæ˜¯ä¸€ç§ç²¾å·§çš„èŒè´£åˆ†å·¥è®¾è®¡ã€‚2PCä½œä¸ºâ€œå®è§‚åè°ƒè€…â€ï¼Œä¸“æ³¨äºè§£å†³Redo Logå’ŒBinlogè¿™ä¸¤ä¸ªæ ¸å¿ƒæ—¥å¿—çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜ã€‚è€ŒUndo Logä½œä¸ºâ€œå¾®è§‚æ‰§è¡Œè€…â€ï¼Œä¸“æ³¨äºInnoDBå¼•æ“å†…éƒ¨çš„äº‹åŠ¡åŸå­æ€§å’Œå¤šç‰ˆæœ¬æ§åˆ¶ã€‚å®ƒä»¬é€šè¿‡æ˜ç¡®çš„ä¾èµ–å…³ç³»ï¼ˆUndo Logç”±Redo Logä¿æŠ¤ï¼‰å’Œæ¸…æ™°çš„è§¦å‘æœºåˆ¶ï¼ˆå´©æºƒæ¢å¤æ—¶çš„å†³ç­–-æ‰§è¡Œæ¨¡å¼ï¼‰ååŒå·¥ä½œï¼Œå…±åŒä¿è¯äº†MySQLäº‹åŠ¡çš„ACIDç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£MySQLçš„äº‹åŠ¡æœºåˆ¶ã€‚å¦‚æœä½ å¯¹MVCCæˆ–è€…å´©æºƒæ¢å¤çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ç‹¬ç«‹æ€§ä¿éšœ"&gt;ç‹¬ç«‹æ€§ä¿éšœ
&lt;/h2&gt;&lt;p&gt;UNDO LOG å¯¹ REDO LOG çš„ä¾èµ–æ˜¯ MySQL InnoDB å­˜å‚¨å¼•æ“äº‹åŠ¡æœºåˆ¶çš„æ ¸å¿ƒè®¾è®¡ä¹‹ä¸€ï¼Œå…³é”®åœ¨äºé€šè¿‡ REDO LOG æ¥ä¿è¯ UNDO LOG æœ¬èº«çš„æŒä¹…æ€§ï¼Œä»è€Œç¡®ä¿äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§ã€‚ä¸ºäº†è®©ä½ å¿«é€ŸæŠ“ä½è¦ç‚¹ï¼Œä¸‹è¡¨æ¸…æ™°åœ°å±•ç¤ºäº†ä¸¤è€…çš„æ ¸å¿ƒå…³ç³»å’Œå·®å¼‚ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§å¯¹æ¯”&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;UNDO LOGï¼ˆå›æ»šæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;REDO LOGï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»è¦ä½œç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡å›æ»šã€MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰&lt;/td&gt;
&lt;td&gt;å´©æºƒæ¢å¤ï¼Œä¿è¯äº‹åŠ¡æŒä¹…æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¥å¿—ç±»å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é€»è¾‘æ—¥å¿—&lt;/strong&gt;ï¼Œè®°å½•å¦‚ä½•é€†æ“ä½œï¼ˆå¦‚UPDATEçš„æ—§å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‰©ç†æ—¥å¿—&lt;/strong&gt;ï¼Œè®°å½•æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼ˆå¦‚é¡µå·ã€åç§»é‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒä¹…åŒ–ä¾èµ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä¾èµ– REDO LOG&lt;/strong&gt; æ¥ä¿è¯å…¶ä¿®æ”¹çš„æŒä¹…æ€§&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ç‹¬ç«‹æŒä¹…åŒ–&lt;/strong&gt;ï¼Œé€šè¿‡ WAL æœºåˆ¶ç›´æ¥åˆ·ç›˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¢å¤ä¸­çš„è§’è‰²&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å›æ»š&lt;strong&gt;æœªæäº¤&lt;/strong&gt;çš„äº‹åŠ¡&lt;/td&gt;
&lt;td&gt;é‡åš&lt;strong&gt;å·²æäº¤&lt;/strong&gt;äº‹åŠ¡çš„ä¿®æ”¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-ä¾èµ–å…³ç³»çš„æ ¸å¿ƒæŒä¹…åŒ–ä¿éšœ"&gt;ğŸ”— ä¾èµ–å…³ç³»çš„æ ¸å¿ƒï¼šæŒä¹…åŒ–ä¿éšœ
&lt;/h3&gt;&lt;p&gt;UNDO LOG å¯¹ REDO LOG æœ€æ ¹æœ¬çš„ä¾èµ–ä½“ç°åœ¨&lt;strong&gt;æŒä¹…åŒ–æœºåˆ¶&lt;/strong&gt;ä¸Šã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥é¡ºåºä¸ WAL æœºåˆ¶&lt;/strong&gt;ï¼šå½“å‘ç”Ÿæ•°æ®å˜æ›´æ—¶ï¼ŒInnoDB ä¼šéµå¾ªä¸¥æ ¼çš„é¡ºåºï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¦–å…ˆ&lt;/strong&gt;ï¼Œå°†æ•°æ®ä¿®æ”¹å‰çš„çŠ¶æ€ï¼ˆæ—§ç‰ˆæœ¬ï¼‰ä½œä¸º UNDO LOG è®°å½•åˆ°&lt;strong&gt;å›æ»šæ®µ&lt;/strong&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç„¶å&lt;/strong&gt;ï¼Œè¿™ä¸ª&lt;strong&gt;å¯¹ UNDO LOG æœ¬èº«çš„ä¿®æ”¹&lt;/strong&gt;ï¼Œä¼šåƒæ™®é€šæ•°æ®é¡µçš„ä¿®æ”¹ä¸€æ ·ï¼Œè¢«è®°å½•åˆ° REDO LOG ä¸­ã€‚è¿™ç¡®ä¿äº† UNDO LOG çš„ç”Ÿæˆè¿‡ç¨‹å—åˆ° REDO LOG çš„ä¿æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;è¿™éµå¾ªäº† &lt;strong&gt;WAL&lt;/strong&gt; åŸåˆ™ï¼šä»»ä½•æ•°æ®é¡µï¼ˆåŒ…æ‹¬å­˜å‚¨ UNDO LOG çš„é¡µï¼‰çš„ä¿®æ”¹ï¼Œéƒ½å¿…é¡»å…ˆè®°å½•ç›¸åº”çš„ REDO LOGï¼Œç„¶åå†å†™å…¥ç£ç›˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å´©æºƒæ¢å¤çš„å…³é”®&lt;/strong&gt;ï¼šå¦‚æœæ•°æ®åº“åœ¨äº‹åŠ¡æäº¤å‰å´©æºƒï¼Œé‡å¯åçš„æ¢å¤è¿‡ç¨‹å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€æ­¥ï¼šé‡åš&lt;/strong&gt;ã€‚InnoDB é¦–å…ˆæ‰«æ REDO LOGï¼Œé‡æ”¾æ‰€æœ‰å·²æäº¤å’Œæœªæäº¤äº‹åŠ¡çš„ç‰©ç†ä¿®æ”¹ã€‚è¿™ä¸ªâ€œé‡åšâ€æ“ä½œ&lt;strong&gt;ä¸ä»…æ¢å¤äº†æ•°æ®é¡µï¼Œä¹Ÿæ¢å¤äº† UNDO LOG é¡µçš„å†…å®¹&lt;/strong&gt;ã€‚åªæœ‰è¿™æ ·ï¼ŒUNDO LOG æ‰æ˜¯å®Œæ•´å’Œå¯ç”¨çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¬äºŒæ­¥ï¼šå›æ»š&lt;/strong&gt;ã€‚åœ¨ UNDO LOG è¢« REDO LOG æ¢å¤åï¼Œç³»ç»Ÿæ‰èƒ½æ ¹æ® UNDO LOG ä¸­çš„é€»è¾‘è®°å½•ï¼Œå»å›æ»šé‚£äº›åœ¨å´©æºƒæ—¶å¤„äºæœªæäº¤çŠ¶æ€çš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç®€å•æ¥è¯´&lt;/strong&gt;ï¼šæ²¡æœ‰ REDO LOGï¼ŒUNDO LOG æœ¬èº«å¯èƒ½åœ¨å´©æºƒä¸­æŸåæˆ–ä¸¢å¤±ï¼Œä»è€Œæ— æ³•å®Œæˆå›æ»šã€‚REDO LOG ä¸º UNDO LOG æä¾›äº†â€œå®‰å…¨ç½‘â€ï¼Œä½¿å…¶å˜å¾—å¯é ã€‚&lt;/p&gt;
&lt;h3 id="-è¿™ç§è®¾è®¡çš„æ„ä¹‰ä¸ä¼˜åŠ¿"&gt;ğŸ’¡ è¿™ç§è®¾è®¡çš„æ„ä¹‰ä¸ä¼˜åŠ¿
&lt;/h3&gt;&lt;p&gt;è¿™ç§ä¾èµ–å…³ç³»å¹¶éç¼ºé™·ï¼Œè€Œæ˜¯ä¸€ç§ç²¾å¦™çš„æ¶æ„è®¾è®¡ï¼Œå¸¦æ¥äº†æ˜¾è‘—çš„å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æå‡&lt;/strong&gt;ï¼šUNDO LOG çš„å†™å…¥æ˜¯éšæœºI/Oï¼Œå¦‚æœæ¯æ¬¡ç”Ÿæˆ UNDO LOG éƒ½å¼ºåˆ¶åˆ·ç›˜ï¼Œæ€§èƒ½ä»£ä»·å¾ˆé«˜ã€‚é€šè¿‡ REDO LOG çš„é¡ºåºI/Oæ¥é—´æ¥ä¿è¯ UNDO LOG çš„æŒä¹…æ€§ï¼Œå¯ä»¥å°†å¤šæ¬¡éšæœºå†™åˆå¹¶ä¸ºé¡ºåºå†™ï¼Œå¤§å¤§æå‡äº†ååé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–å´©æºƒæ¢å¤&lt;/strong&gt;ï¼šæ¢å¤è¿‡ç¨‹å˜å¾—æ¸…æ™°å¯æ§ã€‚åªéœ€æŒ‰é¡ºåºå¤„ç† REDO LOGï¼ˆé‡åšæ‰€æœ‰ç‰©ç†ä¿®æ”¹ï¼‰ï¼Œç„¶åå†å¤„ç† UNDO LOGï¼ˆå›æ»šæœªæäº¤äº‹åŠ¡ï¼‰ã€‚å¦‚æœ UNDO LOG ç‹¬ç«‹æŒä¹…åŒ–ï¼Œæ¢å¤é€»è¾‘ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ï¼Œéœ€è¦åŒæ—¶åè°ƒä¸¤ç§æ—¥å¿—çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®ä¿åŸå­æ€§ä¸æŒä¹…æ€§&lt;/strong&gt;ï¼šä¸¤è€…ååŒå·¥ä½œï¼Œå…±åŒä¿éšœäº†äº‹åŠ¡çš„ ACID ç‰¹æ€§ã€‚REDO LOG ç¡®ä¿äº†å·²æäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¸ä¸¢å¤±ï¼ˆæŒä¹…æ€§ï¼‰ï¼Œè€Œå¯ç”¨çš„ UNDO LOG ç¡®ä¿äº†æœªæäº¤äº‹åŠ¡èƒ½è¢«æ’¤é”€ï¼ˆåŸå­æ€§ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åœ¨äº‹åŠ¡æµç¨‹ä¸­çš„åä½œ"&gt;ğŸ”„ åœ¨äº‹åŠ¡æµç¨‹ä¸­çš„åä½œ
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸€ä¸ª UPDATE è¯­å¥ä¸ºä¾‹ï¼Œå¯ä»¥æ›´ç›´è§‚åœ°çœ‹åˆ°å®ƒä»¬çš„åä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å¼€å§‹&lt;/strong&gt;ï¼šå‡†å¤‡ä¿®æ”¹æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆ UNDO LOG&lt;/strong&gt;ï¼šå°† &lt;code&gt;id=1&lt;/code&gt;è¿™è¡Œæ•°æ®çš„æ—§å€¼ï¼ˆä¾‹å¦‚ &lt;code&gt;c1=5&lt;/code&gt;ï¼‰è®°å½•åˆ° UNDO LOG ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½• REDO LOG&lt;/strong&gt;ï¼šå°†**â€œå¯¹ UNDO LOG é¡µçš„ä¿®æ”¹â€**è¿™ä¸ªç‰©ç†æ“ä½œè®°å½•åˆ° REDO LOG Bufferã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¿®æ”¹æ•°æ®é¡µ&lt;/strong&gt;ï¼šåœ¨å†…å­˜çš„ Buffer Pool ä¸­å°† &lt;code&gt;c1=5&lt;/code&gt;æ”¹ä¸º &lt;code&gt;c1=10&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®°å½• REDO LOG&lt;/strong&gt;ï¼šå°†**â€œå¯¹æ•°æ®é¡µçš„ä¿®æ”¹â€**è¿™ä¸ªç‰©ç†æ“ä½œè®°å½•åˆ° REDO LOG Bufferã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡æäº¤&lt;/strong&gt;ï¼šæ ¹æ®é…ç½®ï¼ˆå¦‚ &lt;code&gt;innodb_flush_log_at_trx_commit=1&lt;/code&gt;ï¼‰ï¼Œå°† REDO LOG Buffer å¼ºåˆ¶åˆ·ç›˜ã€‚æ­¤æ—¶ï¼Œ&lt;strong&gt;æ­¥éª¤3å’Œæ­¥éª¤5çš„ REDO LOG è¢«æŒä¹…åŒ–ï¼Œè¿™æ„å‘³ç€ UNDO LOG å’Œæ–°çš„æ•°æ®çŠ¶æ€éƒ½å¾—åˆ°äº†ä¿æŠ¤&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒUNDO LOG å¯¹ REDO LOG çš„ä¾èµ–ï¼Œæœ¬è´¨ä¸Šæ˜¯ &lt;strong&gt;â€œé€»è¾‘æ—¥å¿—â€ä¾èµ–äºâ€œç‰©ç†æ—¥å¿—â€æ¥å®ç°å…¶æŒä¹…æ€§&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€ç§ä»¥æ€§èƒ½ä¸ºå¯¼å‘çš„ä¼˜é›…è®¾è®¡ï¼Œå®ƒåˆ©ç”¨ REDO LOG é«˜æ•ˆçš„é¡ºåºå†™ç‰¹æ€§ï¼Œä¸ä»…ä¿è¯äº†æ•°æ®æœ¬èº«çš„æŒä¹…æ€§ï¼Œä¹Ÿé—´æ¥ä¿è¯äº†å›æ»šæ‰€éœ€çš„ UNDO LOG çš„å¯é æ€§ï¼Œä»è€Œæ„æˆäº† MySQL å¼ºå¤§äº‹åŠ¡èƒ½åŠ›çš„åŸºçŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£ MySQL çš„æ—¥å¿—æœºåˆ¶ã€‚å¦‚æœä½ å¯¹ MVCC æˆ–ä¸¤é˜¶æ®µæäº¤ç­‰å…¶ä»–ç›¸å…³è¯é¢˜æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="ä¹è§‚é”"&gt;ä¹è§‚é”
&lt;/h2&gt;&lt;p&gt;MySQL çš„ä¹è§‚é”æ˜¯ä¸€ç§éå¸¸å®ç”¨çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œå®ƒåŸºäºâ€œä¹è§‚â€çš„å‡è®¾ï¼Œè®¤ä¸ºæ•°æ®ç«äº‰çš„æƒ…å†µä¸å¸¸å‘ç”Ÿï¼Œå› æ­¤åœ¨æ“ä½œæ•°æ®æ—¶ä¸ç«‹å³åŠ é”ï¼Œè€Œæ˜¯åœ¨æ›´æ–°æ—¶æ£€æµ‹å†²çªã€‚è¿™ç§æœºåˆ¶åœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿååé‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è®©ä½ å¿«é€ŸæŠŠæ¡å…¶å…¨è²Œï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯¹æ¯”äº†ä¹è§‚é”ä¸æ‚²è§‚é”çš„æ ¸å¿ƒç‰¹å¾ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;ä¹è§‚é” (Optimistic Locking)&lt;/th&gt;
&lt;th&gt;æ‚²è§‚é” (Pessimistic Locking)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‡è®¾å†²çªå¾ˆå°‘å‘ç”Ÿï¼Œåœ¨&lt;strong&gt;æäº¤æ›´æ–°æ—¶&lt;/strong&gt;æ‰æ£€æµ‹å†²çª&lt;/td&gt;
&lt;td&gt;å‡è®¾å†²çªç»å¸¸å‘ç”Ÿï¼Œåœ¨&lt;strong&gt;æ“ä½œå‰å…ˆåŠ é”&lt;/strong&gt;ç¡®ä¿ç‹¬å &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šå¸¸é€šè¿‡&lt;strong&gt;ç‰ˆæœ¬å·ï¼ˆversionï¼‰&lt;/strong&gt; æˆ–&lt;strong&gt;æ—¶é—´æˆ³ï¼ˆtimestampï¼‰&lt;/strong&gt; å­—æ®µå®ç°&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;æˆ– &lt;code&gt;SELECT ... LOCK IN SHARE MODE&lt;/code&gt;ç­‰è¯­å¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ é”æ—¶æœº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ›´æ–°æ“ä½œæ—¶éªŒè¯&lt;/td&gt;
&lt;td&gt;æ•°æ®è¯»å–æ—¶å³åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶å‘æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒé«˜&lt;/strong&gt;ï¼Œæ— é”ç«äº‰ï¼Œé€‚åˆè¯»å¤šå†™å°‘åœºæ™¯&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;è¾ƒä½&lt;/strong&gt;ï¼Œé”æœºåˆ¶å¯èƒ½å¼•èµ·é˜»å¡ï¼Œé€‚åˆå†™å¤šè¯»å°‘åœºæ™¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹é—®é¢˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç‰ˆæœ¬å†²çªã€éœ€å¤„ç†é‡è¯•é€»è¾‘&lt;/td&gt;
&lt;td&gt;æ­»é”é£é™©ã€æ€§èƒ½ç“¶é¢ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†²çªæ¦‚ç‡ä½ã€è¯»å¤šå†™å°‘ã€è¿½æ±‚é«˜ååï¼ˆå¦‚è®¡æ•°å™¨ã€ç‚¹èµï¼‰&lt;/td&gt;
&lt;td&gt;å†²çªæ¦‚ç‡é«˜ã€å†™å¤šè¯»å°‘ã€è¦æ±‚å¼ºä¸€è‡´æ€§ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å®ç°ä¹è§‚é”çš„ä¸¤ç§æ–¹å¼"&gt;ğŸ’¡ å®ç°ä¹è§‚é”çš„ä¸¤ç§æ–¹å¼
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”çš„å®ç°ä¸ä¾èµ–äºæ•°æ®åº“çš„åº•å±‚é”æœºåˆ¶ï¼Œè€Œæ˜¯åœ¨åº”ç”¨å±‚é€šè¿‡é€»è¾‘åˆ¤æ–­æ¥å®Œæˆã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§å¸¸è§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬å·æœºåˆ¶ï¼ˆVersion Numberï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨çš„å®ç°æ–¹å¼ã€‚åœ¨æ•°æ®è¡¨ä¸­å¢åŠ ä¸€ä¸ª &lt;code&gt;version&lt;/code&gt;æ•´å‹å­—æ®µã€‚å½“è¯»å–æ•°æ®æ—¶ï¼ŒåŒæ—¶è·å–å½“å‰ç‰ˆæœ¬å·ã€‚æ›´æ–°æ•°æ®æ—¶ï¼Œå°†ç‰ˆæœ¬å·ä½œä¸ºæ¡ä»¶è¿›è¡Œæ›´æ–°ï¼Œå¹¶å°†ç‰ˆæœ¬å·åŠ 1ã€‚å¦‚æœæ›´æ–°è¯­å¥è¿”å›çš„å—å½±å“è¡Œæ•°ä¸º0ï¼Œåˆ™è¯´æ˜ç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œæ„å‘³ç€æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œå½“å‰æ“ä½œå¤±è´¥ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- æ›´æ–°æ•°æ®ï¼Œå¹¶æ£€æŸ¥ç‰ˆæœ¬
UPDATE products
SET price = 20, version = version + 1
WHERE id = 1 AND version = @old_version;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´æˆ³æœºåˆ¶ï¼ˆTimestampï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…¶åŸç†ä¸ç‰ˆæœ¬å·ç±»ä¼¼ï¼Œåªæ˜¯å°†ç‰ˆæœ¬å·å­—æ®µæ›¿æ¢ä¸ºä¸€ä¸ªæ—¶é—´æˆ³å­—æ®µï¼ˆå¦‚ &lt;code&gt;update_time&lt;/code&gt;ï¼‰ã€‚åœ¨æ›´æ–°æ—¶ï¼Œæ£€æŸ¥å½“å‰æ•°æ®åº“ä¸­çš„æ—¶é—´æˆ³æ˜¯å¦ä¸è¯»å–æ—¶çš„æ—¶é—´æˆ³ä¸€è‡´ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE products
SET price = 20, update_time = CURRENT_TIMESTAMP
WHERE id = 1 AND update_time = @old_timestamp;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›¸å¯¹è€Œè¨€ï¼Œ&lt;strong&gt;ç‰ˆæœ¬å·æ–¹å¼æ›´ä¸ºå¸¸ç”¨&lt;/strong&gt;ï¼Œå› ä¸ºæ•´æ•°æ¯”è¾ƒçš„æ•ˆç‡é«˜äºæ—¶é—´æˆ³ï¼Œä¸”é¿å…äº†æœåŠ¡å™¨é—´æ—¶é—´åŒæ­¥å¯èƒ½å¸¦æ¥çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-å·¥ä½œæµç¨‹ä¸å®æˆ˜ç¤ºä¾‹"&gt;ğŸ”„ å·¥ä½œæµç¨‹ä¸å®æˆ˜ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¹è§‚é”çš„å…¸å‹å·¥ä½œæµç¨‹éµå¾ªâ€œè¯»å–-ä¿®æ”¹-éªŒè¯-æ›´æ–°â€çš„æ¨¡å¼ã€‚ä¸‹é¢çš„åºåˆ—å›¾æ¸…æ™°åœ°å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹¶å‘æƒ…å†µä¸‹å¦‚ä½•å¤„ç†å†²çªï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sequenceDiagram
participant C1 as å®¢æˆ·ç«¯A
participant DB as æ•°æ®åº“
participant C2 as å®¢æˆ·ç«¯B
Note over C1,DB: æ­£å¸¸æ›´æ–°æµç¨‹
C1-&amp;gt;&amp;gt;DB: SELECT id, name, version FROM products WHERE id=1;
DB-&amp;gt;&amp;gt;C1: è¿”å›æ•°æ® (version=1)
C1-&amp;gt;&amp;gt;DB: UPDATE products SET name=&amp;#39;A_New&amp;#39;, version=2 WHERE id=1 AND version=1;
DB-&amp;gt;&amp;gt;C1: æ›´æ–°æˆåŠŸ (å½±å“è¡Œæ•°=1)
Note over C1,C2: å¹¶å‘å†²çªåœºæ™¯
C1-&amp;gt;&amp;gt;DB: SELECT id, name, version FROM products WHERE id=1;
DB-&amp;gt;&amp;gt;C1: è¿”å›æ•°æ® (version=1)
C2-&amp;gt;&amp;gt;DB: SELECT id, name, version FROM products WHERE id=1;
DB-&amp;gt;&amp;gt;C2: è¿”å›æ•°æ® (version=1)
C2-&amp;gt;&amp;gt;DB: UPDATE products SET name=&amp;#39;B_New&amp;#39;, version=2 WHERE id=1 AND version=1;
DB-&amp;gt;&amp;gt;C2: æ›´æ–°æˆåŠŸ (å½±å“è¡Œæ•°=1)ï¼Œversionå˜ä¸º2
C1-&amp;gt;&amp;gt;DB: UPDATE products SET name=&amp;#39;A_New&amp;#39;, version=2 WHERE id=1 AND version=1;
DB-&amp;gt;&amp;gt;C1: æ›´æ–°å¤±è´¥ (å½±å“è¡Œæ•°=0)ï¼Œå› ä¸ºversionå·²å˜ä¸º2
Note left of C1: æ£€æµ‹åˆ°å†²çªï¼Œè§¦å‘é‡è¯•é€»è¾‘æˆ–æŠ¥é”™
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨å®é™…ä»£ç ä¸­ï¼ˆä»¥MyBatisä¸ºä¾‹ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ£€æŸ¥UPDATEè¯­å¥æ‰§è¡Œåå—å½±å“çš„è¡Œæ•°ï¼ˆaffected rowsï¼‰æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ä¼ªä»£ç ç¤ºä¾‹
public boolean updateProductWithOptimisticLock(Product product) {
int affectedRows = productDao.updateProduct(product);
if (affectedRows &amp;gt; 0) {
// æ›´æ–°æˆåŠŸ
return true;
} else {
// æ›´æ–°å¤±è´¥ï¼Œç‰ˆæœ¬å·ä¸åŒ¹é…ï¼Œæ•°æ®å·²è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹
// é€šå¸¸è¿™é‡Œä¼šåŠ å…¥é‡è¯•æœºåˆ¶æˆ–å‘ç”¨æˆ·è¿”å›é”™è¯¯ä¿¡æ¯
handleUpdateFailure(product);
return false;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-æ ¸å¿ƒä¼˜ç¼ºç‚¹ä¸åº”ç”¨åœºæ™¯"&gt;âš–ï¸ æ ¸å¿ƒä¼˜ç¼ºç‚¹ä¸åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;h4 id="ä¼˜ç‚¹"&gt;ä¼˜ç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æå‡å¹¶å‘æ€§èƒ½&lt;/strong&gt;ï¼šç”±äºåœ¨è¯»å–é˜¶æ®µä¸åŠ é”ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶è¯»å–æ•°æ®ï¼Œæå¤§æé«˜äº†ç³»ç»Ÿçš„ååé‡ï¼Œç‰¹åˆ«é€‚åˆè¯»å¤šå†™å°‘çš„åº”ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ­»é”&lt;/strong&gt;ï¼šç”±äºä¸é•¿æœŸæŒæœ‰æ•°æ®åº“é”ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†æ­»é”é—®é¢˜çš„å‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¼ºç‚¹"&gt;ç¼ºç‚¹
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†²çªå¤„ç†&lt;/strong&gt;ï¼šå½“æ›´æ–°å¤±è´¥æ—¶ï¼Œéœ€è¦æœ‰ç›¸åº”çš„å¤„ç†æœºåˆ¶ï¼Œå¦‚æ“ä½œå›æ»šã€è‡ªåŠ¨é‡è¯•æˆ–é€šçŸ¥ç”¨æˆ·ã€‚å¦‚æœç³»ç»Ÿå¹¶å‘å†²çªå¾ˆé«˜ï¼Œé¢‘ç¹çš„é‡è¯•åè€Œä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼ˆå¦‚CPUï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— æ³•ä¿è¯ç»å¯¹å¼ºä¸€è‡´æ€§&lt;/strong&gt;ï¼šå®ƒæä¾›çš„æ˜¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œåœ¨æ›´æ–°éªŒè¯çš„ç¬é—´ï¼Œæ•°æ®å¯èƒ½å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…¸å‹åº”ç”¨åœºæ™¯"&gt;å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å•†å“åº“å­˜æ‰£å‡&lt;/strong&gt;ï¼šåœ¨ç§’æ€æˆ–æŠ¢è´­æ´»åŠ¨ä¸­ï¼Œåº“å­˜æŸ¥è¯¢é¢‘ç¹ï¼Œä½†å®é™…æˆäº¤æœ‰é™ï¼Œä½¿ç”¨ä¹è§‚é”å¯ä»¥åº”å¯¹é«˜å¹¶å‘è¯»å–ï¼Œå¹¶åœ¨æœ€ç»ˆæ‰£å‡æ—¶ä¿è¯æ•°æ®æ­£ç¡®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¡æ•°å™¨ã€ç‚¹èµæ“ä½œ&lt;/strong&gt;ï¼šè¿™äº›åœºæ™¯æ›´æ–°å†²çªæ¦‚ç‡è¾ƒä½ï¼Œä¸”å¯¹å®æ—¶ä¸€è‡´æ€§è¦æ±‚ä¸æç«¯ï¼Œéå¸¸é€‚åˆä½¿ç”¨ä¹è§‚é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£ååŒç¼–è¾‘&lt;/strong&gt;ï¼šå¦‚å¤šäººåŒæ—¶ç¼–è¾‘æ–‡æ¡£ï¼Œå¯ä»¥åœ¨ä¿å­˜æ—¶æ£€æŸ¥ç‰ˆæœ¬ï¼Œæç¤ºç”¨æˆ·å¤„ç†å†²çªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼ŒMySQLçš„ä¹è§‚é”æ˜¯ä¸€ç§åŸºäºåº”ç”¨å±‚é€»è¾‘çš„è½»é‡çº§å¹¶å‘æ§åˆ¶æ–¹æ¡ˆï¼Œé€šè¿‡ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³åœ¨æ›´æ–°æ—¶åˆ»éªŒè¯æ•°æ®ä¸€è‡´æ€§ã€‚å®ƒåœ¨&lt;strong&gt;è¯»å¤šå†™å°‘ã€å†²çªæ¦‚ç‡è¾ƒä½&lt;/strong&gt;çš„åœºæ™¯ä¸‹èƒ½æ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ä¸æ‰©å±•æ€§ã€‚ä½†åœ¨é«˜ç«äº‰æ€§çš„å†™æ“ä½œç¯å¢ƒä¸‹ï¼Œæ‚²è§‚é”å¯èƒ½æ˜¯æ›´ç¨³å¦¥çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œè¿ç”¨MySQLä¹è§‚é”ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å®ç°ç»†èŠ‚æœ‰æ›´å¤šç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="è¡¨ä¿®æ”¹"&gt;è¡¨ä¿®æ”¹
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­ä¿®æ”¹è¡¨ç»“æ„ä¸»è¦ä½¿ç”¨ &lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥ï¼Œé…åˆä¸åŒçš„å…³é”®å­—æ¥å®Œæˆå„ç§æ“ä½œã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»è¿™äº›å…³é”®å­—çš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚ä¸ºäº†æ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£ï¼Œæˆ‘å…ˆç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ±‡æ€»è¿™äº›æ ¸å¿ƒå…³é”®å­—åŠå…¶åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å…³é”®å­—&lt;/th&gt;
&lt;th&gt;ä¸»è¦åŠŸèƒ½&lt;/th&gt;
&lt;th&gt;è¯­æ³•ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ADD&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å‘è¡¨ä¸­æ·»åŠ æ–°åˆ—æˆ–ç´¢å¼•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å ADD åˆ—å æ•°æ®ç±»å‹;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;DROP&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä»è¡¨ä¸­åˆ é™¤åˆ—æˆ–ç´¢å¼•&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å DROP åˆ—å;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CHANGE&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é‡å‘½ååˆ—&lt;/strong&gt;å¹¶å¯èƒ½ä¿®æ”¹å…¶æ•°æ®ç±»å‹æˆ–çº¦æŸ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å CHANGE æ—§åˆ—å æ–°åˆ—å æ–°æ•°æ®ç±»å‹;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;MODIFY&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹åˆ—çš„æ•°æ®ç±»å‹ã€çº¦æŸæˆ–&lt;strong&gt;ä½ç½®&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å MODIFY åˆ—å æ–°æ•°æ®ç±»å‹;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;RENAME&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¿®æ”¹è¡¨å&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE æ—§è¡¨å RENAME TO æ–°è¡¨å;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;ALTER COLUMN&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¾ç½®æˆ–åˆ é™¤åˆ—çš„é»˜è®¤å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ALTER TABLE è¡¨å ALTER åˆ—å SET DEFAULT å€¼;&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å„å…³é”®å­—è¯¦è§£ä¸ç¤ºä¾‹"&gt;ğŸ”‘ å„å…³é”®å­—è¯¦è§£ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹æ¯ä¸ªå…³é”®å­—çš„å…·ä½“ç”¨æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ·»åŠ å­—æ®µ (&lt;code&gt;ADD&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ADD&lt;/code&gt;å…³é”®å­—å¯ä»¥ä¸ºå·²å­˜åœ¨çš„è¡¨æ·»åŠ æ–°çš„åˆ—ã€‚ä½ å¯ä»¥æŒ‡å®šæ–°åˆ—çš„æ•°æ®ç±»å‹å’Œçº¦æŸæ¡ä»¶ï¼Œè¿˜å¯ä»¥æ§åˆ¶æ–°åˆ—çš„ä½ç½®ï¼ˆåœ¨è¡¨é¦–ã€è¡¨å°¾æˆ–æŸä¸ªç‰¹å®šåˆ—ä¹‹åï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;users&lt;/code&gt;è¡¨çš„ &lt;code&gt;username&lt;/code&gt;åˆ—åæ·»åŠ ä¸€ä¸ª &lt;code&gt;VARCHAR(50)&lt;/code&gt;ç±»å‹çš„ &lt;code&gt;nickname&lt;/code&gt;åˆ—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users ADD nickname VARCHAR(50) AFTER username;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¡¨é¦–æ·»åŠ åˆ—å¯ä»¥ä½¿ç”¨ &lt;code&gt;FIRST&lt;/code&gt;å…³é”®å­—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤å­—æ®µ (&lt;code&gt;DROP&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;DROP&lt;/code&gt;å¯ä»¥åˆ é™¤è¡¨ä¸­ä¸å†éœ€è¦çš„åˆ—ã€‚&lt;strong&gt;æ­¤æ“ä½œä¼šç›´æ¥åˆ é™¤åˆ—åŠå…¶æ•°æ®ï¼Œä¸”é€šå¸¸ä¸å¯é€†&lt;/strong&gt;ï¼Œæ‰§è¡Œå‰åŠ¡å¿…ç¡®è®¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šä» &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­åˆ é™¤ &lt;code&gt;nickname&lt;/code&gt;åˆ—ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users DROP nickname;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡å‘½åå­—æ®µ (&lt;code&gt;CHANGE&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CHANGE&lt;/code&gt;å…³é”®å­—éå¸¸å¼ºå¤§ï¼Œå®ƒå¯ä»¥åŒæ—¶æ”¹å˜åˆ—çš„åç§°ã€æ•°æ®ç±»å‹å’Œçº¦æŸã€‚&lt;strong&gt;æ³¨æ„ï¼Œå³ä½¿ä½ åªæƒ³é‡å‘½åè€Œä¸æ”¹å˜ç±»å‹ï¼Œä¹Ÿå¿…é¡»é‡æ–°å£°æ˜æ•°æ®ç±»å‹&lt;/strong&gt;ï¼ˆé€šå¸¸ä¸åŸæ¥ä¿æŒä¸€è‡´ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°† &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­çš„ &lt;code&gt;phone&lt;/code&gt;åˆ—é‡å‘½åä¸º &lt;code&gt;telephone&lt;/code&gt;ï¼Œå¹¶å°†å…¶æ•°æ®ç±»å‹æ”¹ä¸º &lt;code&gt;VARCHAR(20)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users CHANGE phone telephone VARCHAR(20);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹å­—æ®µå®šä¹‰ (&lt;code&gt;MODIFY&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ åªæƒ³ä¿®æ”¹åˆ—çš„æ•°æ®ç±»å‹ã€çº¦æŸæˆ–ä½ç½®ï¼Œè€Œä¸éœ€è¦æ”¹å˜åˆ—åï¼Œé‚£ä¹ˆ &lt;code&gt;MODIFY&lt;/code&gt;æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚&lt;code&gt;CHANGE&lt;/code&gt;å¯ä»¥å®Œæˆ &lt;code&gt;MODIFY&lt;/code&gt;çš„åŠŸèƒ½ï¼Œä½† &lt;code&gt;MODIFY&lt;/code&gt;æ— éœ€æŒ‡å®šä¸¤æ¬¡åˆ—åï¼Œè¯­æ³•æ›´ç®€æ´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°† &lt;code&gt;users&lt;/code&gt;è¡¨ä¸­ &lt;code&gt;email&lt;/code&gt;åˆ—çš„æ•°æ®ç±»å‹ä¿®æ”¹ä¸º &lt;code&gt;VARCHAR(100)&lt;/code&gt;å¹¶è®¾ç½®ä¸ºéç©º (&lt;code&gt;NOT NULL&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users MODIFY email VARCHAR(100) NOT NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;MODIFY&lt;/code&gt;æ¥è°ƒæ•´åˆ—çš„ä½ç½®ï¼Œä¾‹å¦‚ &lt;code&gt;MODIFY email VARCHAR(100) AFTER username;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹è¡¨å (&lt;code&gt;RENAME TO&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;RENAME TO&lt;/code&gt;å¯ä»¥ä¿®æ”¹è¡¨çš„åç§°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šå°†è¡¨ &lt;code&gt;user_info&lt;/code&gt;é‡å‘½åä¸º &lt;code&gt;user_details&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE user_info RENAME TO user_details;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¿®æ”¹é»˜è®¤å€¼ (&lt;code&gt;ALTER COLUMN&lt;/code&gt;)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸“é—¨ç”¨äºè®¾ç½®æˆ–åˆ é™¤åˆ—çš„é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šä¸º &lt;code&gt;users&lt;/code&gt;è¡¨çš„ &lt;code&gt;status&lt;/code&gt;åˆ—è®¾ç½®é»˜è®¤å€¼ &amp;lsquo;active&amp;rsquo;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ALTER TABLE users ALTER status SET DEFAULT &amp;#39;active&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ é™¤é»˜è®¤å€¼ï¼š&lt;code&gt;ALTER TABLE users ALTER status DROP DEFAULT;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ-1"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;p&gt;åœ¨ä¿®æ”¹è¡¨ç»“æ„æ—¶ï¼Œä»¥ä¸‹å‡ ç‚¹éœ€è¦ç‰¹åˆ«ç•™æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®å¤‡ä»½&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ‰§è¡Œä»»ä½•å¯èƒ½å½±å“æ•°æ®çš„ &lt;code&gt;ALTER TABLE&lt;/code&gt;æ“ä½œï¼ˆå¦‚ &lt;code&gt;DROP&lt;/code&gt;, &lt;code&gt;CHANGE&lt;/code&gt;, &lt;code&gt;MODIFY&lt;/code&gt;ï¼‰ä¹‹å‰ï¼Œ&lt;strong&gt;å¼ºçƒˆå»ºè®®å…ˆå¤‡ä»½æ•°æ®&lt;/strong&gt;ã€‚ä¿®æ”¹æ•°æ®ç±»å‹å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æˆªæ–­ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²å˜çŸ­æˆ–æ•°å­—ç±»å‹æ”¹å˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;CHANGE&lt;/code&gt;vs &lt;code&gt;MODIFY&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸¤ä¸ªå®¹æ˜“æ··æ·†çš„å…³é”®å­—ï¼Œè®°ä½å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦æ”¹å˜åˆ—åæ—¶ï¼Œä½¿ç”¨ &lt;code&gt;CHANGE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªä¿®æ”¹å®šä¹‰è€Œä¸æ”¹åæ—¶ï¼Œä½¿ç”¨ &lt;code&gt;MODIFY&lt;/code&gt;&lt;/strong&gt; æ›´ç®€æ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¸é”å®š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§è¡¨çš„ &lt;code&gt;ALTER TABLE&lt;/code&gt;æ“ä½œå¯èƒ½ä¼šé”è¡¨ï¼Œå½±å“æœåŠ¡ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œï¼Œå¹¶å……åˆ†æµ‹è¯•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–è¡¨çº§ä¿®æ”¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ALTER TABLE&lt;/code&gt;è¯­å¥çš„åŠŸèƒ½éå¸¸ä¸°å¯Œï¼Œé™¤äº†ä¿®æ”¹åˆ—ï¼Œè¿˜å¯ä»¥ç”¨äºç®¡ç†ç´¢å¼•ï¼ˆå¦‚ &lt;code&gt;ADD INDEX&lt;/code&gt;, &lt;code&gt;DROP INDEX&lt;/code&gt;ï¼‰ã€æ›´æ”¹è¡¨çš„å­˜å‚¨å¼•æ“ï¼ˆå¦‚ &lt;code&gt;ENGINE=InnoDB&lt;/code&gt;ï¼‰å’Œå­—ç¬¦é›†ï¼ˆå¦‚ &lt;code&gt;CHARACTER SET utf8mb4&lt;/code&gt;ï¼‰ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡ MySQL ä¸­ä¿®æ”¹è¡¨ç»“æ„çš„å…³é”®å­—ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ“ä½œæœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ï¼&lt;/p&gt;
&lt;h2 id="nvcahr"&gt;nvcahr
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„ &lt;code&gt;NVARCHAR&lt;/code&gt;æ•°æ®ç±»å‹ç”¨äºå­˜å‚¨å¯å˜é•¿åº¦çš„ Unicode å­—ç¬¦æ•°æ®ï¼Œéå¸¸é€‚åˆå¤„ç†å¤šè¯­è¨€æ–‡æœ¬ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†å®ƒçš„æ ¸å¿ƒç‰¹å¾ä»¥åŠä¸ç›¸å…³æ•°æ®ç±»å‹çš„å¯¹æ¯”ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡é‡ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§ç»´åº¦&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;NVARCHAR&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;VARCHAR&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;CHAR&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­—ç¬¦ç¼–ç &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Unicode&lt;/strong&gt; (å¦‚ UTF-8)&lt;/td&gt;
&lt;td&gt;é Unicode (å¦‚ ASCII, Latin1)&lt;/td&gt;
&lt;td&gt;é Unicode&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰&lt;strong&gt;å­—ç¬¦&lt;/strong&gt;è®¡ç®—é•¿åº¦&lt;/td&gt;
&lt;td&gt;æŒ‰&lt;strong&gt;å­—èŠ‚&lt;/strong&gt;è®¡ç®—é•¿åº¦&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œä¸è¶³éƒ¨åˆ†ç”¨ç©ºæ ¼å¡«å……&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å­˜å‚¨ç©ºé—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯ä¸ªå­—ç¬¦é€šå¸¸å ç”¨æ›´å¤šå­—èŠ‚ï¼ˆå¦‚2-4å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;æŒ‰å®é™…å­—èŠ‚é•¿åº¦å­˜å‚¨ï¼ˆè‹±æ–‡å­—ç¬¦1å­—èŠ‚ï¼Œä¸­æ–‡é€šå¸¸3å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œåˆ†é…å®šä¹‰çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å¤§é•¿åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€å¤§å…è®¸çš„&lt;strong&gt;å­—ç¬¦æ•°&lt;/strong&gt;ï¼ˆå—è¡Œå¤§å°é™åˆ¶ï¼Œé€šå¸¸å¾ˆå¤§ï¼‰&lt;/td&gt;
&lt;td&gt;æœ€å¤§å…è®¸çš„&lt;strong&gt;å­—èŠ‚æ•°&lt;/strong&gt;ï¼ˆå¦‚65,535å­—èŠ‚ï¼‰&lt;/td&gt;
&lt;td&gt;å›ºå®šé•¿åº¦ï¼Œæœ€å¤§255å­—ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€è¦å­˜å‚¨å¤šè¯­è¨€å­—ç¬¦ï¼ˆå¦‚ä¸­ã€æ—¥ã€éŸ©æ–‡ï¼‰&lt;/td&gt;
&lt;td&gt;ä»…å­˜å‚¨è‹±æ–‡ã€æ•°å­—åŠç‰¹å®šå•å­—èŠ‚å­—ç¬¦&lt;/td&gt;
&lt;td&gt;é•¿åº¦å›ºå®šçš„æ•°æ®ï¼ˆå¦‚èº«ä»½è¯å·ã€æ‰‹æœºå·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å…³é”®ç‰¹æ€§ä¸ä½¿ç”¨æ–¹æ³•"&gt;ğŸ’¡ å…³é”®ç‰¹æ€§ä¸ä½¿ç”¨æ–¹æ³•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Unicode æ”¯æŒ&lt;/strong&gt;ï¼š&lt;code&gt;NVARCHAR&lt;/code&gt;çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæ”¯æŒ &lt;strong&gt;Unicode&lt;/strong&gt; å­—ç¬¦é›†ï¼ˆåœ¨ MySQL ä¸­é€šå¸¸æŒ‡ &lt;code&gt;utf8&lt;/code&gt;æˆ–æ›´æ¨èçš„ &lt;code&gt;utf8mb4&lt;/code&gt;ï¼‰ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥æ¯«æ— å‹åŠ›åœ°å­˜å‚¨ä¸­æ–‡ã€æ—¥æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ã€è¡¨æƒ…ç¬¦å·ï¼ˆEmojiï¼‰ç­‰ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰å­—ç¬¦ï¼Œç¡®ä¿åœ¨å¤šè¯­è¨€ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°ä¹±ç  ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯å˜é•¿åº¦&lt;/strong&gt;ï¼šå®ƒæ˜¯å¯å˜é•¿åº¦çš„ï¼Œä»…ä½¿ç”¨å¿…è¦çš„å­˜å‚¨ç©ºé—´æ¥å­˜æ”¾æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª &lt;code&gt;NVARCHAR(100)&lt;/code&gt;çš„åˆ—ï¼Œå¦‚æœåªå­˜å‚¨äº†â€œä½ å¥½â€ä¸¤ä¸ªå­—ç¬¦ï¼Œå®ƒå¤§çº¦åªå ç”¨å‡ ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ï¼Œè€Œä¸æ˜¯100ä¸ªå­—ç¬¦çš„æœ€å¤§é¢„ç•™ç©ºé—´ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ–¹æ³•&lt;/strong&gt;ï¼šåœ¨åˆ›å»ºè¡¨æ—¶ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å®šä¹‰ &lt;code&gt;NVARCHAR&lt;/code&gt;åˆ—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ç¡®ä¿ &lt;code&gt;NVARCHAR&lt;/code&gt;åˆ—æ­£ç¡®å­˜å‚¨ Unicode å­—ç¬¦ï¼Œå»ºè®®å°†è¡¨æˆ–æ•°æ®åº“çš„å­—ç¬¦é›†è®¾ç½®ä¸º &lt;code&gt;utf8mb4&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE Users (
id INT PRIMARY KEY,
username NVARCHAR(50),
address NVARCHAR(100)
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ’å…¥å’ŒæŸ¥è¯¢æ•°æ®ä¸ä½¿ç”¨å…¶ä»–å­—ç¬¦ä¸²ç±»å‹æ²¡æœ‰åŒºåˆ«ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO Users (id, username, address) VALUES (1, &amp;#39;å¼ ä¸‰&amp;#39;, &amp;#39;åŒ—äº¬å¸‚&amp;#39;);
SELECT * FROM Users WHERE username LIKE &amp;#39;å¼ %&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æƒè¡¡ä¸é€‰æ‹©å»ºè®®"&gt;âš–ï¸ æƒè¡¡ä¸é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©æ˜¯å¦ä½¿ç”¨ &lt;code&gt;NVARCHAR&lt;/code&gt;ï¼Œä¸»è¦æ˜¯åœ¨&lt;strong&gt;å­˜å‚¨ç©ºé—´&lt;/strong&gt;ã€&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;å’Œ&lt;strong&gt;å…¼å®¹æ€§&lt;/strong&gt;ä¹‹é—´åšæƒè¡¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶é€‰æ‹© &lt;code&gt;NVARCHAR&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¡¹ç›®éœ€è¦æ”¯æŒå¤šè¯­è¨€&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯åŒ…å«ä¸œäºšæ–‡å­—ï¼ˆå¦‚ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼‰æˆ–ç‰¹æ®Šç¬¦å· ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœªæ¥æœ‰å›½é™…åŒ–æ‰©å±•çš„å¯èƒ½&lt;/strong&gt;ï¼Œä½¿ç”¨ &lt;code&gt;NVARCHAR&lt;/code&gt;å¯ä»¥é¿å…åæœŸå› å­—ç¬¦é›†é—®é¢˜å¸¦æ¥çš„è¿ç§»éº»çƒ¦ã€‚&lt;/li&gt;
&lt;li&gt;å­˜å‚¨&lt;strong&gt;è¡¨æƒ…ç¬¦å·ï¼ˆEmojiï¼‰&lt;/strong&gt; å¿…é¡»ä½¿ç”¨æ”¯æŒ Unicode çš„å­—ç¬¦é›†ï¼ˆå¦‚ &lt;code&gt;utf8mb4&lt;/code&gt;ï¼‰ï¼Œå¯¹åº”çš„åˆ—ç±»å‹å¯ä»¥æ˜¯ &lt;code&gt;NVARCHAR&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½•æ—¶è€ƒè™‘ &lt;code&gt;VARCHAR&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥&lt;strong&gt;ç¡®å®šåº”ç”¨ä»…ä½¿ç”¨å•å­—èŠ‚å­—ç¬¦&lt;/strong&gt;ï¼ˆå¦‚çº¯è‹±æ–‡ã€æ•°å­—çš„æ—¥å¿—ã€ä»£ç ç­‰ï¼‰ï¼Œæ­¤æ—¶ &lt;code&gt;VARCHAR&lt;/code&gt;åœ¨å­˜å‚¨ç©ºé—´ä¸Šæ›´é«˜æ•ˆ ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹&lt;strong&gt;å­˜å‚¨ç©ºé—´å’Œæ€§èƒ½æœ‰æè‡´è¦æ±‚&lt;/strong&gt;ï¼Œä¸”èƒ½å®Œå…¨æ’é™¤å¤šè¯­è¨€å­—ç¬¦çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-5"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å­—ç¬¦é›†è®¾ç½®æ˜¯å…³é”®&lt;/strong&gt;ï¼šåœ¨ MySQL ä¸­ï¼Œ&lt;code&gt;NVARCHAR&lt;/code&gt;çš„å®é™…è¡Œä¸ºä¾èµ–äºæ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†è®¾ç½®ã€‚åŠ¡å¿…ç¡®ä¿å…¶è®¾ç½®ä¸º &lt;code&gt;utf8mb4&lt;/code&gt;ä»¥è·å¾—å®Œæ•´çš„ Unicode æ”¯æŒï¼ˆåŒ…æ‹¬è¡¨æƒ…ç¬¦å·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿åº¦å®šä¹‰æŒ‡å­—ç¬¦æ•°&lt;/strong&gt;ï¼šå®šä¹‰ &lt;code&gt;NVARCHAR(50)&lt;/code&gt;æ„å‘³ç€å¯ä»¥å­˜å‚¨æœ€å¤š50ä¸ªå­—ç¬¦ï¼Œæ— è®ºæ˜¯ä¸­æ–‡ã€è‹±æ–‡è¿˜æ˜¯å…¶ä»–ä»»ä½•å­—ç¬¦ï¼Œéƒ½æ˜¯50ä¸ªâ€œå­—â€ï¼Œè€Œä¸æ˜¯å­—èŠ‚ ã€‚è¿™ä¸ &lt;code&gt;VARCHAR(n)&lt;/code&gt;ä¸­ &lt;code&gt;n&lt;/code&gt;ä»£è¡¨å­—èŠ‚æ•°æœ‰æ‰€ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸ç¢ç‰‡åŒ–&lt;/strong&gt;ï¼šè™½ç„¶å¯å˜é•¿åº¦èŠ‚çœäº†ç©ºé—´ï¼Œä½†åœ¨é¢‘ç¹æ›´æ–°æ•°æ®å¯¼è‡´é•¿åº¦å˜åŒ–æ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸€äº›å­˜å‚¨ç¢ç‰‡ã€‚å®šæœŸè¿›è¡Œè¡¨ä¼˜åŒ–æœ‰åŠ©äºä¿æŒæ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL ä¸­çš„ &lt;code&gt;NVARCHAR&lt;/code&gt;ç±»å‹ã€‚å¦‚æœä½ å¯¹ç‰¹å®šåœºæ™¯ä¸‹çš„å­—ç¬¦é›†é€‰æ‹©è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="identity"&gt;identity
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;IDENTITY(a, b)&lt;/code&gt;æ˜¯ SQL Server ä¸­ç”¨äºåˆ›å»ºè‡ªåŠ¨å¢é•¿åˆ—çš„å…³é”®å±æ€§ï¼Œéå¸¸é€‚åˆç”¨ä½œè¡¨çš„ä¸»é”®ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿç†è§£å…¶æ ¸å¿ƒè¦ç´ ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;é»˜è®¤å€¼&lt;/th&gt;
&lt;th&gt;åŠŸèƒ½è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;a (ç§å­ Seed)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èµ·å§‹å€¼&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;æŒ‡å®šè‡ªåŠ¨å¢é•¿åºåˆ—ä»å“ªä¸ªæ•°å­—å¼€å§‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;b (å¢é‡ Increment)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ­¥é•¿å€¼&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ¯æ¬¡è‡ªåŠ¨å¢åŠ å¤šå°‘&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-åŸºæœ¬è¯­æ³•ä¸ç¤ºä¾‹"&gt;ğŸ’¡ åŸºæœ¬è¯­æ³•ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;IDENTITY&lt;/code&gt;å±æ€§é€šå¸¸åœ¨åˆ›å»ºè¡¨ï¼ˆ&lt;code&gt;CREATE TABLE&lt;/code&gt;è¯­å¥ï¼‰æ—¶ä½¿ç”¨ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;åˆ—å æ•°æ®ç±»å‹ IDENTITY(a, b) [PRIMARY KEY]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;Customers&lt;/code&gt;çš„è¡¨ï¼Œå¹¶è®© &lt;code&gt;CustomerID&lt;/code&gt;ä» 1 å¼€å§‹ï¼Œæ¯æ¬¡å¢åŠ  1ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE Customers (
CustomerID INT IDENTITY(1,1) PRIMARY KEY,
CustomerName NVARCHAR(50) NOT NULL
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ’å…¥æ•°æ®æ—¶ï¼Œ&lt;strong&gt;æ— éœ€&lt;/strong&gt;ä¸º &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—æŒ‡å®šå€¼ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨å¤„ç†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO Customers (CustomerName) VALUES (&amp;#39;å¼ ä¸‰&amp;#39;);
INSERT INTO Customers (CustomerName) VALUES (&amp;#39;æå››&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œåï¼Œ&lt;code&gt;CustomerID&lt;/code&gt;çš„å€¼ä¼šè‡ªåŠ¨æˆä¸º 1 å’Œ 2ã€‚&lt;/p&gt;
&lt;h3 id="-è¿›é˜¶æ“ä½œä¸ç®¡ç†"&gt;ğŸ”§ è¿›é˜¶æ“ä½œä¸ç®¡ç†
&lt;/h3&gt;&lt;p&gt;é™¤äº†åŸºæœ¬ç”¨æ³•ï¼Œç®¡ç† &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—è¿˜æœ‰ä¸€äº›å®ç”¨çš„è¿›é˜¶æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·å–åˆšæ’å…¥çš„ID&lt;/strong&gt;ï¼šæ’å…¥æ•°æ®åï¼Œé€šå¸¸éœ€è¦ç«‹å³è·å–ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„IDã€‚åœ¨ SQL Server ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;SCOPE_IDENTITY()&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO Customers (CustomerName) VALUES (&amp;#39;ç‹äº”&amp;#39;);
SELECT SCOPE_IDENTITY() AS NewCustomerID; -- è¿”å›æœ€æ–°æ’å…¥çš„CustomerID
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ‰‹åŠ¨æ’å…¥ç‰¹å®šå€¼&lt;/strong&gt;ï¼šæœ‰æ—¶éœ€è¦ä¸º &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„å€¼ï¼ˆä¾‹å¦‚ï¼Œæ•°æ®è¿ç§»æ—¶ï¼‰ã€‚è¿™æ—¶éœ€è¦å…ˆç”¨ &lt;code&gt;SET IDENTITY_INSERT ON&lt;/code&gt;æ‰“å¼€æƒé™ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SET IDENTITY_INSERT Customers ON;
INSERT INTO Customers (CustomerID, CustomerName) VALUES (10, &amp;#39;ç‰¹å®šå®¢æˆ·&amp;#39;);
SET IDENTITY_INSERT Customers OFF; -- æ“ä½œå®Œæˆåè®°å¾—å…³é—­
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é‡ç½®ç§å­å€¼&lt;/strong&gt;ï¼šå¦‚æœåˆ é™¤äº†å¤§é‡æ•°æ®ï¼Œæˆ–è€…éœ€è¦é‡æ–°åˆå§‹åŒ–IDåºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;DBCC CHECKIDENT&lt;/code&gt;å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- å°†Customersè¡¨çš„å½“å‰æ ‡è¯†å€¼é‡ç½®ä¸º100ï¼Œä¸‹ä¸€æ¡æ’å…¥çš„è®°å½•IDå°†ä¸º101
DBCC CHECKIDENT (&amp;#39;Customers&amp;#39;, RESEED, 100);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-6"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;IDENTITY&lt;/code&gt;å±æ€§æ—¶ï¼Œæœ‰å‡ ç‚¹éœ€è¦ç‰¹åˆ«ç•™æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å”¯ä¸€æ€§ä¸ä¸»é”®&lt;/strong&gt;ï¼šè™½ç„¶ &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—é€šå¸¸èƒ½ç”Ÿæˆå”¯ä¸€å€¼ï¼Œä½†å®ƒ&lt;strong&gt;å¹¶ä¸è‡ªåŠ¨ä¿è¯å”¯ä¸€æ€§&lt;/strong&gt;ã€‚åŠ¡å¿…é€šè¿‡ä¸»é”®ï¼ˆ&lt;code&gt;PRIMARY KEY&lt;/code&gt;ï¼‰æˆ–å”¯ä¸€çº¦æŸï¼ˆ&lt;code&gt;UNIQUE CONSTRAINT&lt;/code&gt;ï¼‰æ¥å¼ºåˆ¶å”¯ä¸€ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„åšæ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯ä¸ªè¡¨çš„é™åˆ¶&lt;/strong&gt;ï¼šä¸€ä¸ªè¡¨&lt;strong&gt;æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª&lt;/strong&gt; &lt;code&gt;IDENTITY&lt;/code&gt;åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å€¼èŒƒå›´&lt;/strong&gt;ï¼šæ ¹æ®æ‰€é€‰æ•°æ®ç±»å‹ï¼ˆå¦‚ &lt;code&gt;INT&lt;/code&gt;æˆ– &lt;code&gt;BIGINT&lt;/code&gt;ï¼‰ï¼Œ&lt;code&gt;IDENTITY&lt;/code&gt;åˆ—æœ‰æœ€å¤§å€¼é™åˆ¶ã€‚ä½¿ç”¨ &lt;code&gt;INT&lt;/code&gt;æ—¶ï¼Œéœ€æ³¨æ„å…¶ä¸Šé™ï¼ˆçº¦21äº¿ï¼‰ï¼Œå¯¹äºæé«˜é¢‘æ’å…¥çš„è¡¨ï¼Œè€ƒè™‘ä½¿ç”¨ &lt;code&gt;BIGINT&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—´éš™ç°è±¡&lt;/strong&gt;ï¼šå¦‚æœæ’å…¥æ“ä½œå¤±è´¥æˆ–äº‹åŠ¡å›æ»šï¼Œ&lt;code&gt;IDENTITY&lt;/code&gt;å€¼ä¹Ÿä¼šé€’å¢ï¼Œå¯¼è‡´åºåˆ—ä¸­å‡ºç°â€œé—´éš™â€ã€‚è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œé€šå¸¸ä¸å½±å“ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-ä¸å…¶ä»–æ•°æ®åº“çš„å¯¹æ¯”"&gt;ğŸ”„ ä¸å…¶ä»–æ•°æ®åº“çš„å¯¹æ¯”
&lt;/h3&gt;&lt;p&gt;äº†è§£ &lt;code&gt;IDENTITY&lt;/code&gt;åœ¨å…¶ä»–æ•°æ®åº“ä¸­çš„ç±»ä¼¼å®ç°æœ‰åŠ©äºçŸ¥è¯†è¿ç§»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;MySQL&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;AUTO_INCREMENT&lt;/code&gt;å±æ€§ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;CREATE TABLE Users (user_id INT AUTO_INCREMENT PRIMARY KEY);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Oracle&lt;/strong&gt;ï¼šä½¿ç”¨ç‹¬ç«‹çš„&lt;strong&gt;åºåˆ—ï¼ˆSequenceï¼‰&lt;/strong&gt; å’Œ&lt;strong&gt;è§¦å‘å™¨ï¼ˆTriggerï¼‰&lt;/strong&gt; æœºåˆ¶æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡ &lt;code&gt;IDENTITY(a, b)&lt;/code&gt;çš„ç”¨æ³•ã€‚å¦‚æœä½ æœ‰ä»»ä½•ç‰¹å®šçš„åº”ç”¨åœºæ™¯æƒ³è¿›ä¸€æ­¥è®¨è®ºï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥ã€‚&lt;/p&gt;
&lt;h2 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«
&lt;/h2&gt;&lt;p&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œæ­»é”æ˜¯æ•°æ®åº“å¹¶å‘æ§åˆ¶ä¸­çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ç€å¯†åˆ‡è€Œå¤æ‚çš„å…³ç³»ã€‚ç®€å•æ¥è¯´ï¼Œ&lt;strong&gt;é€‰æ‹©è¶Šé«˜çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“ä¸ºä¿éšœæ•°æ®ä¸€è‡´æ€§è€Œä½¿ç”¨çš„é”æœºåˆ¶é€šå¸¸å°±è¶Šä¸¥æ ¼ï¼Œè¿™å¾€å¾€ä¼šå¢åŠ æ­»é”å‘ç”Ÿçš„æ¦‚ç‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™ä¸ªè¡¨æ ¼ç›´è§‚åœ°å±•ç¤ºäº†ä¸åŒéš”ç¦»çº§åˆ«ä¸æ­»é”é£é™©åŠå¹¶å‘é—®é¢˜ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ•´ä½“å°è±¡ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;éš”ç¦»çº§åˆ«&lt;/th&gt;
&lt;th&gt;æ­»é”é£é™©&lt;/th&gt;
&lt;th&gt;è„è¯»&lt;/th&gt;
&lt;th&gt;ä¸å¯é‡å¤è¯»&lt;/th&gt;
&lt;th&gt;å¹»è¯»&lt;/th&gt;
&lt;th&gt;æ ¸å¿ƒé”æœºåˆ¶ç®€è¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»æœªæäº¤ (Read Uncommitted)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;å‡ ä¹ä¸åŠ å…±äº«é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¯»å·²æäº¤ (Read Committed)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;âŒ å…è®¸&lt;/td&gt;
&lt;td&gt;è¯­å¥çº§å¿«ç…§ï¼Œå†™æ—¶åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯é‡å¤è¯» (Repeatable Read)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é«˜&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢ (InnoDB)&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨è¡Œé” + &lt;strong&gt;é—´éš™é” (Gap Lock)&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸²è¡ŒåŒ– (Serializable)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ (ä½†å¹¶å‘æ€§èƒ½æœ€å·®)&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;âœ… é˜²æ­¢&lt;/td&gt;
&lt;td&gt;è¯»æ“ä½œä¹Ÿå¯èƒ½åŠ é”ï¼Œè¿‘ä¼¼ä¸²è¡Œæ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-æ·±å…¥ç†è§£ä¸¤è€…å…³ç³»"&gt;ğŸ’¡ æ·±å…¥ç†è§£ä¸¤è€…å…³ç³»
&lt;/h3&gt;&lt;p&gt;æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–æ›´å¤šäº‹åŠ¡ç›¸äº’ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”èµ„æºï¼Œå¯¼è‡´æ‰€æœ‰äº‹åŠ¡éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œçš„çŠ¶æ€ã€‚å®ƒçš„äº§ç”Ÿéœ€è¦åŒæ—¶æ»¡è¶³äº’æ–¥ã€ä¸å¯å‰¥å¤ºã€å æœ‰ä¸”ç­‰å¾…å’Œå¾ªç¯ç­‰å¾…å››ä¸ªæ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«åˆ™æ˜¯ä¸ºäº†åœ¨å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå¹³è¡¡&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ç³»ç»Ÿæ€§èƒ½&lt;/strong&gt;çš„æƒè¡¡ç­–ç•¥ã€‚çº§åˆ«è¶Šé«˜ï¼Œä¸€è‡´æ€§ä¿éšœè¶Šå¼ºï¼Œä½†å¹¶å‘åº¦å¯èƒ½è¶Šä½ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä»¬ä¹‹é—´çš„æ ¸å¿ƒè”ç³»åœ¨äºï¼š&lt;strong&gt;æ›´é«˜çš„äº‹åŠ¡éš”ç¦»çº§åˆ«é€šè¿‡æ›´ä¸¥æ ¼ã€æ›´é•¿æ—¶é—´çš„é”æŒæœ‰æ¥é˜²æ­¢å¹¶å‘é—®é¢˜ï¼Œè¿™æ°æ°å¢åŠ äº†æ»¡è¶³æ­»é”æ¡ä»¶ï¼ˆå°¤å…¶æ˜¯â€œå¾ªç¯ç­‰å¾…â€æ¡ä»¶ï¼‰çš„æœºä¼š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id="-å„çº§åˆ«ä¸‹çš„æ­»é”é£é™©å‰–æ"&gt;ğŸ” å„çº§åˆ«ä¸‹çš„æ­»é”é£é™©å‰–æ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯»å·²æäº¤ vs. å¯é‡å¤è¯»&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€å…³é”®çš„å¯¹æ¯”ã€‚&lt;code&gt;è¯»å·²æäº¤&lt;/code&gt;éš”ç¦»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡é€šå¸¸åªé”å®šå®ƒå®é™…ä¿®æ”¹çš„è¡Œã€‚è€Œåœ¨ &lt;code&gt;å¯é‡å¤è¯»&lt;/code&gt;ï¼ˆMySQLçš„é»˜è®¤çº§åˆ«ï¼‰ä¸‹ï¼Œä¸ºäº†é˜²æ­¢å¹»è¯»ï¼ŒInnoDBå¼•æ“ä¼šå¼•å…¥&lt;strong&gt;é—´éš™é”&lt;/strong&gt;ã€‚é—´éš™é”ä¼šé”å®šä¸€ä¸ªç´¢å¼•èŒƒå›´å†…çš„é—´éš™ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¯¥èŒƒå›´å†…æ’å…¥æ•°æ®ã€‚è¿™å¤§å¤§å¢åŠ äº†é”çš„å†²çªé¢ï¼Œæ˜¯å¯¼è‡´å¯é‡å¤è¯»çº§åˆ«ä¸‹æ­»é”é£é™©æ˜¾è‘—å‡é«˜çš„ä¸»è¦åŸå› ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¸¸è§çš„æ­»é”åœºæ™¯&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ é”é¡ºåºä¸ä¸€è‡´&lt;/strong&gt;ï¼šè¿™æ˜¯æœ€ç»å…¸çš„æ­»é”åŸå› ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡Aå…ˆé”è¡Œ1ï¼Œå†è¯·æ±‚è¡Œ2ï¼›è€Œäº‹åŠ¡Bå…ˆé”è¡Œ2ï¼Œå†è¯·æ±‚è¡Œ1ã€‚å½“å®ƒä»¬å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå°±å®¹æ˜“å½¢æˆå¾ªç¯ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é—´éš™é”å†²çª&lt;/strong&gt;ï¼šåœ¨å¯é‡å¤è¯»çº§åˆ«ä¸‹ï¼Œäº‹åŠ¡Aå’ŒBå¯èƒ½å¯¹åŒä¸€ä¸ªé—´éš™åŠ äº†é—´éš™é”ã€‚å½“å®ƒä»¬åŒæ—¶æƒ³åœ¨è¯¥é—´éš™å†…æ’å…¥æ–°æ•°æ®æ—¶ï¼Œå°±ä¼šå› äº’ç›¸ç­‰å¾…å¯¹æ–¹çš„æ’å…¥æ„å‘é”è€Œå‘ç”Ÿæ­»é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹ä¸å­˜åœ¨çš„è®°å½•åŠ é”&lt;/strong&gt;ï¼šæŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„è®°å½•æ—¶ï¼Œæ•°æ®åº“å¯èƒ½ä¼šåŠ é—´éš™é”ã€‚å¦‚æœä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«å¯¹ä¸åŒçš„ä¸å­˜åœ¨çš„è®°å½•åŠ é”ï¼Œç„¶åå°è¯•æ’å…¥ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´æ­»é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ­»é”çš„åº”å¯¹ç­–ç•¥"&gt;âš™ï¸ æ­»é”çš„åº”å¯¹ç­–ç•¥
&lt;/h3&gt;&lt;p&gt;å°½ç®¡æ­»é”æ— æ³•å®Œå…¨é¿å…ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—ç­–ç•¥æ¥æœ‰æ•ˆç®¡ç†å’Œå‡å°‘å…¶å½±å“ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆç†é€‰æ‹©éš”ç¦»çº§åˆ«&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©æœ€ä½å¿…è¦éš”ç¦»çº§åˆ«ã€‚å¦‚æœä¸šåŠ¡èƒ½å®¹å¿ä¸å¯é‡å¤è¯»æˆ–å¹»è¯»ï¼Œä½¿ç”¨ &lt;code&gt;è¯»å·²æäº¤&lt;/code&gt;çº§åˆ«å¯ä»¥æ˜¾è‘—é™ä½æ­»é”é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–åº”ç”¨è®¾è®¡&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»Ÿä¸€è®¿é—®é¡ºåº&lt;/strong&gt;ï¼šç¡®ä¿æ‰€æœ‰äº‹åŠ¡éƒ½ä»¥ç›¸åŒçš„é¡ºåºè®¿é—®æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œæ€»æ˜¯æŒ‰ä¸»é”®IDæ’åºåå†æ›´æ–°ï¼‰ï¼Œè¿™æ˜¯é¢„é˜²æ­»é”æœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…é•¿äº‹åŠ¡&lt;/strong&gt;ï¼šå°½é‡ä¿æŒäº‹åŠ¡çŸ­å°ç²¾æ‚ï¼Œå°½å¿«æäº¤æˆ–å›æ»šï¼Œå‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨ä½ç²’åº¦é”&lt;/strong&gt;ï¼šåœ¨äº‹åŠ¡ä¸­ä»…é”å®šå¿…è¦çš„è¡Œï¼Œé¿å…ä½¿ç”¨ &lt;code&gt;SELECT ... FOR UPDATE&lt;/code&gt;é”å®šå¤§é‡æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨æ•°æ®åº“æœºåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­»é”æ£€æµ‹ä¸è¶…æ—¶&lt;/strong&gt;ï¼šç°ä»£æ•°æ®åº“ï¼ˆå¦‚MySQLçš„InnoDBã€PostgreSQLï¼‰éƒ½å†…ç½®äº†æ­»é”æ£€æµ‹æœºåˆ¶ã€‚ä¸€æ—¦å‘ç°æ­»é”ï¼Œä¼šè‡ªåŠ¨å›æ»šå…¶ä¸­ä¸€ä¸ªï¼ˆé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä»£ä»·è¾ƒå°çš„ï¼‰äº‹åŠ¡æ¥æ‰“ç ´åƒµå±€ã€‚åŒæ—¶ï¼Œå¯ä»¥è®¾ç½®é”ç­‰å¾…è¶…æ—¶å‚æ•°ï¼ˆå¦‚MySQLçš„ &lt;code&gt;innodb_lock_wait_timeout&lt;/code&gt;ï¼‰ï¼Œé¿å…äº‹åŠ¡æ— é™æœŸç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œå¯¹å› æ­»é”è€Œå›æ»šçš„äº‹åŠ¡å®ç°é‡è¯•é€»è¾‘ã€‚å½“æ•è·åˆ°æ­»é”é”™è¯¯æ—¶ï¼Œç­‰å¾…ä¸€å°æ®µæ—¶é—´åé‡æ–°æ‰§è¡Œè¯¥äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;äº‹åŠ¡éš”ç¦»çº§åˆ«å†³å®šäº†æ•°æ®åº“å¹¶å‘æ§åˆ¶çš„â€œä¸¥æ ¼ç¨‹åº¦â€ï¼Œè€Œæ­»é”æ˜¯è¿™ç§ä¸¥æ ¼ç¨‹åº¦åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼ˆå¦‚å¾ªç¯ç­‰å¾…ï¼‰çš„å‰¯äº§å“ã€‚&lt;strong&gt;&lt;code&gt;å¯é‡å¤è¯»&lt;/code&gt;çº§åˆ«å› éœ€ä½¿ç”¨é—´éš™é”ç­‰æœºåˆ¶ï¼Œæ­»é”é£é™©æœ€é«˜ï¼›è€Œ &lt;code&gt;ä¸²è¡ŒåŒ–&lt;/code&gt;çº§åˆ«è™½é£é™©ä½ï¼Œä½†æ˜¯ä»¥ç‰ºç‰²å‡ ä¹æ‰€æœ‰å¹¶å‘æ€§èƒ½ä¸ºä»£ä»·çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œå…³é”®åœ¨äº&lt;strong&gt;æƒè¡¡&lt;/strong&gt;ã€‚ä½ éœ€è¦è¯„ä¼°ä¸šåŠ¡å¯¹æ•°æ®ä¸€è‡´æ€§çš„çœŸå®è¦æ±‚ï¼Œå¹¶ç»“åˆå¯¹ç³»ç»Ÿååé‡çš„æœŸæœ›ï¼Œæ¥é€‰æ‹©æœ€åˆé€‚çš„éš”ç¦»çº§åˆ«ã€‚åŒæ—¶ï¼Œé€šè¿‡è‰¯å¥½çš„åº”ç”¨è®¾è®¡æ¥é¢„é˜²æ­»é”ï¼Œå¹¶å‡†å¤‡å¥½åº”å¯¹æ­»é”çš„ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸¤è€…çš„å…³ç³»ã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ•°æ®åº“çš„æ­»é”å¤„ç†æœºåˆ¶æœ‰è¿›ä¸€æ­¥çš„å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ·±å…¥æ¢è®¨ã€‚&lt;/p&gt;
&lt;h2 id="heading"&gt;:=
&lt;/h2&gt;&lt;p&gt;MySQL ä¸­çš„æ’åçª—å£å‡½æ•°æ˜¯è¿›è¡Œæ•°æ®åˆ†æå’Œæ’åçš„å¼ºå¤§å·¥å…·ï¼Œå°¤å…¶ä» MySQL 8.0 ç‰ˆæœ¬å¼€å§‹è·å¾—åŸç”Ÿæ”¯æŒã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ¸…æ™°åœ°å±•ç¤ºäº†ä¸‰ä¸ªæ ¸å¿ƒæ’åå‡½æ•°çš„åŒºåˆ«ï¼Œå¸®ä½ å¿«é€ŸæŠŠæ¡è¦ç‚¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æ€§&lt;/th&gt;
&lt;th&gt;&lt;code&gt;RANK()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;DENSE_RANK()&lt;/code&gt;&lt;/th&gt;
&lt;th&gt;&lt;code&gt;ROW_NUMBER()&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹¶åˆ—å¤„ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ’åç›¸åŒï¼Œ&lt;strong&gt;è·³è·ƒ&lt;/strong&gt;æ’å&lt;/td&gt;
&lt;td&gt;æ’åç›¸åŒï¼Œ&lt;strong&gt;è¿ç»­&lt;/strong&gt;æ’å&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— è§†&lt;/strong&gt;å¹¶åˆ—æƒ…å†µï¼Œå¼ºåˆ¶è¿ç»­ç¼–å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ’ååºåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸è¿ç»­ (å‡ºç°é—´éš™)&lt;/td&gt;
&lt;td&gt;è¿ç»­ (æ— é—´éš™)&lt;/td&gt;
&lt;td&gt;è¿ç»­ä¸”å”¯ä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹ç»“æœ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1, 1, 3, 4&lt;/td&gt;
&lt;td&gt;1, 1, 2, 3&lt;/td&gt;
&lt;td&gt;1, 2, 3, 4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ ¸å¿ƒåº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½“è‚²èµ›äº‹ã€ä¼ ç»Ÿæ’å&lt;/td&gt;
&lt;td&gt;éœ€è¦åæ¬¡ç´§å‡‘çš„æ¦œå•&lt;/td&gt;
&lt;td&gt;è·å–Top Nã€éœ€è¦å”¯ä¸€æ ‡è¯†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-è¯­æ³•è¯¦è§£ä¸ç¤ºä¾‹"&gt;ğŸ’¡ è¯­æ³•è¯¦è§£ä¸ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;æ‰€æœ‰æ’åçª—å£å‡½æ•°éƒ½éµå¾ªç›¸åŒçš„åŸºæœ¬è¯­æ³•ç»“æ„ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;å‡½æ•°å() OVER (
[PARTITION BY &amp;lt;åˆ†åŒºå­—æ®µ&amp;gt;]
ORDER BY &amp;lt;æ’åºå­—æ®µ&amp;gt; [ASC|DESC]
)
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;PARTITION BY&lt;/code&gt;&lt;/strong&gt;ï¼šå¯é€‰å­å¥ï¼Œç”¨äºå°†æ•°æ®é›†åˆ†æˆä¸åŒçš„ç»„ï¼ˆåˆ†åŒºï¼‰ï¼Œæ’åæ“ä½œä¼šåœ¨æ¯ä¸ªåˆ†åŒºå†…ç‹¬ç«‹è¿›è¡Œã€‚ä¾‹å¦‚ï¼ŒæŒ‰éƒ¨é—¨åˆ†åŒºï¼Œæ¯ä¸ªéƒ¨é—¨å†…éƒ¨å•ç‹¬æ’åã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;ORDER BY&lt;/code&gt;&lt;/strong&gt;ï¼šå¿…é€‰å­å¥ï¼Œç”¨äºæŒ‡å®šæ¯ä¸ªåˆ†åŒºå†…è¿›è¡Œæ’åçš„ä¾æ®åˆ—å’Œæ’åºæ–¹å¼ï¼ˆå‡åºæˆ–é™åºï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€å¼ å­¦ç”Ÿæˆç»©è¡¨ &lt;code&gt;students&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;class&lt;/th&gt;
&lt;th&gt;score&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ç”²&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¹™&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼ ä¸‰&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸™&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;95&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç¤ºä¾‹ä¸ç»“æœå¯¹æ¯”&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;SELECT
name, class, score,
RANK() OVER (PARTITION BY class ORDER BY score DESC) as rank,
DENSE_RANK() OVER (PARTITION BY class ORDER BY score DESC) as dense_rank,
ROW_NUMBER() OVER (PARTITION BY class ORDER BY score DESC) as row_number
FROM students;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥è¯¢ç»“æœæ¸…æ™°åœ°å±•ç¤ºä¸‰è€…çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;th&gt;class&lt;/th&gt;
&lt;th&gt;score&lt;/th&gt;
&lt;th&gt;rank&lt;/th&gt;
&lt;th&gt;dense_rank&lt;/th&gt;
&lt;th&gt;row_number&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¹™&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼ ä¸‰&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;90&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç”²&lt;/td&gt;
&lt;td&gt;A&lt;/td&gt;
&lt;td&gt;85&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸™&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;95&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸&lt;/td&gt;
&lt;td&gt;B&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="-å¦‚ä½•é€‰æ‹©æ’åå‡½æ•°"&gt;ğŸ¯ å¦‚ä½•é€‰æ‹©æ’åå‡½æ•°
&lt;/h3&gt;&lt;p&gt;é€‰æ‹©å“ªä¸ªå‡½æ•°å–å†³äºä½ çš„å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¼ ç»Ÿæ’åï¼ˆå…è®¸åæ¬¡è·³è·ƒï¼‰&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œåœ¨ä½“è‚²æ¯”èµ›ä¸­ï¼Œå¦‚æœä¸¤äººå¹¶åˆ—ç¬¬ä¸€ï¼Œåˆ™ä¸‹ä¸€åå°±æ˜¯ç¬¬ä¸‰åã€‚è¿™æ—¶åº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;RANK()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ç´§å‡‘çš„è¿ç»­æ’å&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œåˆ¶ä½œæˆç»©æ¦œæˆ–é”€å”®æ¦œï¼Œå¸Œæœ›å¹¶åˆ—ä¹‹åçš„ä¸‹ä¸€ä¸ªåæ¬¡æ˜¯è¿ç»­çš„ï¼ˆç¬¬äºŒè€Œéç¬¬ä¸‰ï¼‰ã€‚è¿™æ—¶åº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;DENSE_RANK()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éœ€è¦ä¸ºæ¯ä¸€è¡Œç”Ÿæˆå”¯ä¸€æ ‡è¯†æˆ–è·å–ç»å¯¹Top N&lt;/strong&gt;ï¼šä¾‹å¦‚ï¼Œä½ åªæƒ³æ¯ä¸ªéƒ¨é—¨å·¥èµ„æœ€é«˜çš„ä¸€ä¸ªäººï¼Œå³ä½¿æœ‰å¹¶åˆ—ä¹Ÿåªå–ä¸€æ¡ã€‚æˆ–è€…å•çº¯éœ€è¦ä¸ºæŸ¥è¯¢ç»“æœç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„è¡Œå·ã€‚è¿™æ—¶åº”ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;ROW_NUMBER()&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-å…¶ä»–ç›¸å…³å‡½æ•°ntilen"&gt;ğŸ”„ å…¶ä»–ç›¸å…³å‡½æ•°ï¼š&lt;code&gt;NTILE(n)&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;é™¤äº†ä¸Šè¿°ä¸‰ä¸ªå‡½æ•°ï¼Œ&lt;code&gt;NTILE(n)&lt;/code&gt;ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„çª—å£å‡½æ•°ï¼Œå®ƒç”¨äºå°†æ•°æ®å‡åŒ€åˆ†é…åˆ°æŒ‡å®šæ•°é‡çš„æ¡¶ä¸­ï¼Œå¹¶ä¸ºæ¯è¡Œåˆ†é…æ‰€åœ¨çš„æ¡¶å·ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;NTILE(4)&lt;/code&gt;å¯ä»¥å°†æ•°æ®åˆ†ä¸º4ä¸ªå››åˆ†ä½æ•°ã€‚&lt;/p&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-7"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬è¦æ±‚&lt;/strong&gt;ï¼šè¿™äº›çª—å£å‡½æ•°éœ€è¦ &lt;strong&gt;MySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬&lt;/strong&gt;ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦ä½¿ç”¨å˜é‡ï¼ˆå¦‚ &lt;code&gt;@rank := @rank + 1&lt;/code&gt;ï¼‰æˆ–å¤æ‚çš„å­æŸ¥è¯¢æ¥æ¨¡æ‹Ÿæ’ååŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤„ç†NULLå€¼&lt;/strong&gt;ï¼šå¦‚æœæ’åºçš„å­—æ®µåŒ…å« &lt;code&gt;NULL&lt;/code&gt;å€¼ï¼Œ&lt;code&gt;NULL&lt;/code&gt;åœ¨æ’åºä¸­ä¼šè¢«è§†ä¸ºæœ€å°å€¼ã€‚è¿™å¯èƒ½ä¼šå½±å“æ’åç»“æœã€‚å¯ä»¥ä½¿ç”¨ &lt;code&gt;COALESCE&lt;/code&gt;å‡½æ•°ä¸º &lt;code&gt;NULL&lt;/code&gt;å€¼æä¾›ä¸€ä¸ªé»˜è®¤å€¼ä»¥ç¡®ä¿æ’åç¬¦åˆé¢„æœŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;MySQL çš„æ’åçª—å£å‡½æ•°ä¸ºæ•°æ®åˆ†ææä¾›äº†å¼ºå¤§ä¸”é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚&lt;code&gt;RANK()&lt;/code&gt;ã€&lt;code&gt;DENSE_RANK()&lt;/code&gt;å’Œ &lt;code&gt;ROW_NUMBER()&lt;/code&gt;ä¸‰è€…çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºå¤„ç†å¹¶åˆ—æ’åçš„æ–¹å¼ä»¥åŠåç»­æ’ååºåˆ—æ˜¯å¦è¿ç»­ã€‚æ ¹æ®ä½ å¯¹åæ¬¡å¹¶åˆ—å’Œè¿ç»­æ€§çš„å…·ä½“éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„å‡½æ•°å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„å¯¹æ¯”èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨å®ƒä»¬ï¼&lt;/p&gt;
&lt;h2 id="binlog"&gt;Binlog
&lt;/h2&gt;&lt;p&gt;MySQL çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰æ˜¯æ•°æ®åº“è¿ç»´å’Œæ¶æ„ä¸­è‡³å…³é‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒåƒæ•°æ®åº“çš„â€œé»‘åŒ£å­â€ï¼Œè®°å½•äº†æ‰€æœ‰å¯¹æ•°æ®çš„å˜æ›´æ“ä½œã€‚ä¸‹é¢è¿™å¼ å›¾æ¸…æ™°åœ°å±•ç¤ºäº†binlogçš„å†™å…¥æµç¨‹ï¼Œä¹‹åæˆ‘ä»¬ä¼šè¯¦ç»†è§£æå…¶æ ¸å¿ƒè¦ç‚¹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;flowchart TD
A[æ‰§è¡Œæ•°æ®å˜æ›´æ“ä½œ DML/DDL] --&amp;gt; B[æ—¥å¿—å†™å…¥çº¿ç¨‹çº§&amp;lt;br&amp;gt;binlog cache]
B --&amp;gt; C{äº‹åŠ¡æäº¤}
C -- æäº¤ --&amp;gt; D[æ—¥å¿—è½¬ç§»è‡³å…¨å±€ç¼“å†²åŒº]
D --&amp;gt; E[æ‰§è¡Œfsyncåˆ·ç›˜]
E --&amp;gt; F[æ—¥å¿—æŒä¹…åŒ–è‡³&amp;lt;br&amp;gt;binlogæ–‡ä»¶]
F --&amp;gt; G[æ ¹æ®sync_binlogå€¼&amp;lt;br&amp;gt;æ§åˆ¶åˆ·ç›˜é¢‘ç‡]
C -- å›æ»š --&amp;gt; H[ä¸¢å¼ƒbinlog cache]
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="-binlog-æ ¸å¿ƒè§£æ"&gt;ğŸ” Binlog æ ¸å¿ƒè§£æ
&lt;/h3&gt;&lt;p&gt;ç†è§£binlogçš„å…³é”®åœ¨äºæŠŠæ¡å®ƒçš„æ ¼å¼ã€å†™å…¥æœºåˆ¶ä»¥åŠä¸redo logçš„åä½œã€‚&lt;/p&gt;
&lt;h4 id="-ä¸‰ç§æ—¥å¿—æ ¼å¼"&gt;â€¢ ä¸‰ç§æ—¥å¿—æ ¼å¼
&lt;/h4&gt;&lt;p&gt;Binlog æä¾›äº†ä¸‰ç§æ ¼å¼æ¥è®°å½•å˜æ›´ä¿¡æ¯ï¼Œæ¯ç§éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯ ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ ¼å¼&lt;/th&gt;
&lt;th&gt;è®°å½•å†…å®¹&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;STATEMENT&lt;/strong&gt; (SBR)&lt;/td&gt;
&lt;td&gt;è®°å½•åŸå§‹çš„ SQL è¯­å¥&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å°ï¼ŒèŠ‚çœç£ç›˜å’Œç½‘ç»œ I/O&lt;/td&gt;
&lt;td&gt;å¯èƒ½å¼•èµ·ä¸»ä»ä¸ä¸€è‡´ï¼ˆå¦‚ä½¿ç”¨ &lt;code&gt;NOW()&lt;/code&gt;ç­‰éç¡®å®šæ€§å‡½æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;æ‰¹é‡æ›´æ–°ã€DDL æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ROW&lt;/strong&gt; (RBR)&lt;/td&gt;
&lt;td&gt;è®°å½•æ¯è¡Œæ•°æ®çš„å˜åŒ–ï¼ˆå‰é•œåƒ/åé•œåƒï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®å˜æ›´ç²¾ç¡®ï¼Œå¼ºä¸€è‡´æ€§&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å¤§ï¼ˆç‰¹åˆ«æ˜¯æ‰¹é‡æ“ä½œï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®å®‰å…¨è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚é‡‘èï¼‰ã€ä¸»ä»å¤åˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MIXED&lt;/strong&gt; (MBR)&lt;/td&gt;
&lt;td&gt;æ··åˆæ¨¡å¼ï¼ŒMySQL è‡ªåŠ¨é€‰æ‹©&lt;/td&gt;
&lt;td&gt;åœ¨å®‰å…¨æ€§å’Œæ€§èƒ½é—´å–å¾—å¹³è¡¡&lt;/td&gt;
&lt;td&gt;é€»è¾‘ç›¸å¯¹å¤æ‚&lt;/td&gt;
&lt;td&gt;é€šç”¨åœºæ™¯ï¼ˆMySQL 5.7.7 å‰é»˜è®¤ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ç°ä»£ MySQL ç‰ˆæœ¬ï¼ˆ5.7.7 åŠä»¥ä¸Šï¼‰é»˜è®¤é‡‡ç”¨ ROW æ ¼å¼&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒèƒ½æœ€å¥½åœ°ä¿è¯æ•°æ®ä¸€è‡´æ€§ ã€‚&lt;/p&gt;
&lt;h4 id="-binlog-çš„å†™å…¥æµç¨‹ä¸ä¸¤é˜¶æ®µæäº¤"&gt;â€¢ Binlog çš„å†™å…¥æµç¨‹ä¸ä¸¤é˜¶æ®µæäº¤
&lt;/h4&gt;&lt;p&gt;ç»“åˆæµç¨‹å›¾ï¼Œæˆ‘ä»¬æ¥çœ‹binlogæ˜¯å¦‚ä½•è¢«å†™å…¥çš„ï¼Œä»¥åŠå®ƒå¦‚ä½•ä¸InnoDBå­˜å‚¨å¼•æ“çš„redo logåä½œï¼Œè¿™å°±æ˜¯è‘—åçš„&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰&lt;/strong&gt;ï¼Œæ—¨åœ¨è§£å†³redo logï¼ˆç‰©ç†æ—¥å¿—ï¼Œå¼•æ“å±‚ï¼‰å’Œbinlogï¼ˆé€»è¾‘æ—¥å¿—ï¼ŒServerå±‚ï¼‰ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Prepare é˜¶æ®µ&lt;/strong&gt;ï¼šäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒSQLäº§ç”Ÿçš„binlogå…ˆå†™å…¥çº¿ç¨‹ç‹¬æœ‰çš„ &lt;strong&gt;&lt;code&gt;binlog cache&lt;/code&gt;&lt;/strong&gt; ã€‚åŒæ—¶ï¼ŒInnoDBå°†æ•°æ®å˜æ›´å†™å…¥ &lt;strong&gt;&lt;code&gt;redo log buffer&lt;/code&gt;&lt;/strong&gt;ã€‚äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBå…ˆå°†redo logçš„çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;PREPARE&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Commit é˜¶æ®µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°† &lt;code&gt;binlog cache&lt;/code&gt;ä¸­çš„å…¨éƒ¨å†…å®¹å†™å…¥ç£ç›˜ä¸Šçš„ binlog æ–‡ä»¶ï¼ˆ&lt;code&gt;write&lt;/code&gt;+ &lt;code&gt;fsync&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦ binlog æˆåŠŸè½ç›˜ï¼ŒInnoDB å†å°† redo log çš„çŠ¶æ€æ ‡è®°ä¸º &lt;strong&gt;&lt;code&gt;COMMIT&lt;/code&gt;&lt;/strong&gt;ï¼Œå®Œæˆäº‹åŠ¡æäº¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ç§æœºåˆ¶ä¿è¯äº†å³ä½¿æ•°æ®åº“åœ¨æäº¤è¿‡ç¨‹ä¸­å´©æºƒï¼Œé‡å¯åä¹Ÿèƒ½æ ¹æ®è¿™ä¸¤ç§æ—¥å¿—çš„çŠ¶æ€å†³å®šå›æ»šè¿˜æ˜¯æäº¤ï¼Œä»è€Œç¡®ä¿ä¸»ä»æ•°æ®ä¸€è‡´ ã€‚&lt;/p&gt;
&lt;h4 id="-å…³é”®å‚æ•°sync_binlog"&gt;â€¢ å…³é”®å‚æ•°ï¼š&lt;code&gt;sync_binlog&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;å®ƒæ§åˆ¶ binlog ä»ç³»ç»Ÿç¼“å­˜ï¼ˆpage cacheï¼‰åˆ·å…¥ç£ç›˜ï¼ˆ&lt;code&gt;fsync&lt;/code&gt;ï¼‰çš„é¢‘ç‡ï¼Œç›´æ¥å½±å“æ•°æ®å®‰å…¨æ€§å’Œæ€§èƒ½ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=0&lt;/code&gt;&lt;/strong&gt;ï¼šä¾èµ–æ“ä½œç³»ç»Ÿåˆ·ç›˜ï¼Œæ€§èƒ½æœ€å¥½ï¼Œä½†å®•æœºå¯èƒ½ä¸¢å¤± binlogã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=1&lt;/code&gt;&lt;/strong&gt;ï¼ˆé»˜è®¤ï¼‰ï¼šæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½åˆ·ç›˜ï¼Œæœ€å®‰å…¨ï¼Œä½† IO å¼€é”€å¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;sync_binlog=N&lt;/code&gt;&lt;/strong&gt;ï¼ˆN&amp;gt;1ï¼‰ï¼šç´¯ç§¯ N ä¸ªäº‹åŠ¡ååˆ·ç›˜ï¼Œæ˜¯å®‰å…¨ä¸æ€§èƒ½çš„æŠ˜è¡·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-åŸºæœ¬æ“ä½œä¸ç®¡ç†"&gt;âš™ï¸ åŸºæœ¬æ“ä½œä¸ç®¡ç†
&lt;/h3&gt;&lt;h4 id="-æŸ¥çœ‹ä¸è§£æ-binlog"&gt;â€¢ æŸ¥çœ‹ä¸è§£æ Binlog
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;-- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶åˆ—è¡¨
SHOW BINARY LOGS ;
-- æŸ¥çœ‹å½“å‰æ­£åœ¨å†™å…¥çš„æ—¥å¿—æ–‡ä»¶
SHOW MASTER STATUS ;
-- æŸ¥çœ‹ç‰¹å®šæ—¥å¿—æ–‡ä»¶ä¸­çš„äº‹ä»¶
SHOW BINLOG EVENTS IN &amp;#39;mysql-bin.000001&amp;#39; LIMIT 10 ;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;strong&gt;&lt;code&gt;mysqlbinlog&lt;/code&gt;&lt;/strong&gt; å·¥å…·å¯ä»¥æ›´è¯¦ç»†åœ°è§£æäºŒè¿›åˆ¶å†…å®¹ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æ ¹æ®ä½ç½®ç‚¹è§£æ
mysqlbinlog --start-position=219 --stop-position=398 mysql-bin.000001
# æ ¹æ®æ—¶é—´ç‚¹è§£æ
mysqlbinlog --start-datetime=&amp;#34;2025-02-20 00:00:00&amp;#34; mysql-bin.000001
# è§£æROWæ ¼å¼çš„æ—¥å¿—ï¼ˆè§£ç ä¸ºå¯è¯»å½¢å¼ï¼‰
mysqlbinlog --base64-output=DECODE-ROWS -v mysql-bin.000001
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="-ç®¡ç†-binlog-æ–‡ä»¶"&gt;â€¢ ç®¡ç† Binlog æ–‡ä»¶
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ—¥å¿—æ»šåŠ¨&lt;/strong&gt;ï¼šåˆ›å»ºæ–°çš„ binlog æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;FLUSH LOGS ;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¸…ç†æ—¥å¿—&lt;/strong&gt;ï¼š&lt;strong&gt;åŠ¡å¿…åœ¨å¤‡ä»½åæ“ä½œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;-- åˆ é™¤æŒ‡å®šæ–‡ä»¶ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—
PURGE BINARY LOGS TO &amp;#39;mysql-bin.000010&amp;#39; ;
-- è®¾ç½®è‡ªåŠ¨è¿‡æœŸæ—¶é—´ï¼ˆä¾‹å¦‚7å¤©ï¼‰
SET GLOBAL expire_logs_days = 7 ;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="-æ ¸å¿ƒåº”ç”¨åœºæ™¯"&gt;ğŸ’¡ æ ¸å¿ƒåº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸»ä»å¤åˆ¶&lt;/strong&gt;ï¼šè¿™æ˜¯ binlog æœ€æ ¸å¿ƒçš„åº”ç”¨ã€‚ä¸»åº“å°† binlog äº‹ä»¶å‘é€ç»™ä»åº“ï¼Œä»åº“é‡æ”¾è¿™äº›äº‹ä»¶ï¼Œå®ç°æ•°æ®åŒæ­¥ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¢å¤ä¸å›æ»š&lt;/strong&gt;ï¼šç»“åˆå…¨é‡å¤‡ä»½å’Œ binlogï¼Œå¯ä»¥å°†æ•°æ®åº“æ¢å¤åˆ°æŸä¸ªç²¾ç¡®çš„æ—¶é—´ç‚¹æˆ–ä½ç½®ï¼Œç”¨äºæ•…éšœæ¢å¤æˆ–è¯¯æ“ä½œæ•°æ®ä¿®å¤ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å®¡è®¡&lt;/strong&gt;ï¼šé€šè¿‡åˆ†æ binlogï¼Œå¯ä»¥è¿½è¸ªæ•°æ®çš„å˜æ›´å†å²ï¼Œæ»¡è¶³å®‰å…¨å®¡è®¡éœ€æ±‚ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="-é‡è¦æ³¨æ„äº‹é¡¹-8"&gt;âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸ Redo Log çš„åŒºåˆ«&lt;/strong&gt;ï¼šBinlog æ˜¯ Server å±‚é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ“ä½œé€»è¾‘ï¼ˆå¦‚ SQL è¯­å¥æˆ–è¡Œå˜åŒ–ï¼‰ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“éƒ½å¯ä½¿ç”¨ã€‚è€Œ Redo Log æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œä¸»è¦ç”¨äºå´©æºƒæ¢å¤ã€‚å®ƒä»¬ååŒå·¥ä½œï¼Œç¡®ä¿æ•°æ®æŒä¹…æ€§å’Œä¸€è‡´æ€§ ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½è€ƒé‡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;strong&gt;ROW æ ¼å¼&lt;/strong&gt;æ—¶ï¼Œæ‰¹é‡æ“ä½œå¯èƒ½äº§ç”Ÿå¤§é‡æ—¥å¿—ã€‚éœ€ç›‘æ§ç£ç›˜ç©ºé—´ï¼Œå¹¶åˆç†è®¾ç½® &lt;code&gt;max_binlog_size&lt;/code&gt;ã€‚é€‚å½“è°ƒæ•´ &lt;code&gt;sync_binlog&lt;/code&gt;å€¼æœ‰åŠ©äºåœ¨æ•°æ®å®‰å…¨æ€§å’Œ IO æ€§èƒ½é—´å–å¾—å¹³è¡¡ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¸Œæœ›è¿™ä»½è¯¦ç»†çš„ä»‹ç»èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ MySQL binlogã€‚å¦‚æœä½ å¯¹æŸä¸ªç‰¹å®šæ–¹é¢è¿˜æœ‰æ›´æ·±å…¥çš„ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¢è®¨ã€‚&lt;/p&gt;</description></item><item><title>ã€Milvusã€‘Fundamentals</title><link>https://dyhes.github.io/p/milvusfundamentals/</link><pubDate>Wed, 06 Aug 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/milvusfundamentals/</guid><description>&lt;h2 id="about"&gt;About
&lt;/h2&gt;&lt;p&gt;Unstructured data, such as text, images, and audio, varies in format and carries rich underlying &lt;strong&gt;semantics&lt;/strong&gt;, making it challenging to analyze. To manage this complexity, embeddings are used to convert &lt;strong&gt;unstructured&lt;/strong&gt; data into numerical vectors that capture its essential characteristics. These vectors are then stored in a vector database, enabling fast and scalable searches and analytics.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Milvus Lite is a &lt;strong&gt;Python library&lt;/strong&gt; that can be easily integrated into your applications. As a lightweight version of Milvus, itâ€™s ideal for quick prototyping in Jupyter Notebooks or running on edge devices with limited resources. &lt;a class="link" href="https://milvus.io/docs/milvus_lite.md" target="_blank" rel="noopener"
&gt;Learn more&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Milvus Standalone is a &lt;strong&gt;single-machine server&lt;/strong&gt; deployment, with all components bundled into a single Docker image for convenient deployment. &lt;a class="link" href="https://milvus.io/docs/install_standalone-docker.md" target="_blank" rel="noopener"
&gt;Learn more&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Milvus Distributed can be deployed on &lt;strong&gt;Kubernetes clusters&lt;/strong&gt;, featuring a cloud-native architecture designed for billion-scale or even larger scenarios. This architecture ensures redundancy in critical components. &lt;a class="link" href="https://milvus.io/docs/install_cluster-milvusoperator.md" target="_blank" rel="noopener"
&gt;Learn more&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;High performance&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Hardware-aware Optimization&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Advanced Search Algorithms&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;C++ Search Engine&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Column-Oriented&lt;/p&gt;
&lt;p&gt;The primary advantages come from the data access patterns. When performing queries, a column-oriented database reads only the specific fields involved in the query, rather than entire rows, which greatly reduces the amount of data accessed. Additionally, operations on column-based data can be easily vectorized, allowing for operations to be applied in the entire columns at once, further enhancing performance.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="architecture"&gt;Architecture
&lt;/h2&gt;&lt;p&gt;Milvus itself is fully &lt;strong&gt;stateless&lt;/strong&gt; so it can be easily scaled with the help of Kubernetes or public clouds.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/milvus_architecture_2_6.png"
loading="lazy"
alt="Highly decoupled system architecture of Milvus"
&gt;Milvus follows the principle of data plane and control plane disaggregation, comprising four main layers that are mutually independent in terms of scalability and disaster recovery.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Access Layer&lt;/p&gt;
&lt;p&gt;Composed of a group of stateless proxies, the access layer is the front layer of the system and endpoint to users. It validates client requests and reduces the returned results.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Coordinator&lt;/p&gt;
&lt;p&gt;The Coordinator serves as the brain of Milvus. At any moment, &lt;strong&gt;exactly one Coordinator is active&lt;/strong&gt; across the entire cluster, responsible for maintaining the cluster topology, scheduling all task types, and promising cluster-level consistency.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Worker Nodes&lt;/p&gt;
&lt;p&gt;Worker nodes are stateless thanks to &lt;strong&gt;separation of storage and computation&lt;/strong&gt;, and can facilitate system scale-out and disaster recovery when deployed on Kubernetes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Streaming Node&lt;/p&gt;
&lt;p&gt;Streaming Node serves as the shard-level &amp;ldquo;&lt;strong&gt;mini-brain&lt;/strong&gt;&amp;rdquo;, providing shard-level consistency guarantees and fault recovery based on underlying &lt;strong&gt;WAL&lt;/strong&gt; Storage. Meanwhile, Streaming Node is also responsible for growing data &lt;strong&gt;querying&lt;/strong&gt; and generating query plans. Additionally, it also handles the &lt;strong&gt;conversion&lt;/strong&gt; of growing data into sealed (historical) data.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Data Node&lt;/p&gt;
&lt;p&gt;Data node is responsible for &lt;strong&gt;offline&lt;/strong&gt; processing of historical data, such as compaction and index building.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Query Node&lt;/p&gt;
&lt;p&gt;Query node loads the historical data from object storage, and provides the historical data querying.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Storage&lt;/p&gt;
&lt;p&gt;Storage is the bone of the system, responsible for data persistence. It comprises meta storage, log broker, and object storage.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Meta Storage (etcd)&lt;/p&gt;
&lt;p&gt;Meta storage stores snapshots of metadata such as collection schema, and message consumption checkpoints.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Object Storage&lt;/p&gt;
&lt;p&gt;Object storage stores snapshot files of logs, index files for scalar and vector data, and intermediate query results. Milvus uses &lt;strong&gt;MinIO&lt;/strong&gt; as object storage and can be readily deployed on AWS S3 and Azure Blob, two of the worldâ€™s most popular, cost-effective storage services.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;WAL Storage&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;API Category&lt;/th&gt;
&lt;th&gt;Operations&lt;/th&gt;
&lt;th&gt;Example APIs&lt;/th&gt;
&lt;th&gt;Architecture Flow&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DDL/DCL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Schema &amp;amp; Access Control&lt;/td&gt;
&lt;td&gt;&lt;code&gt;createCollection&lt;/code&gt;, &lt;code&gt;dropCollection&lt;/code&gt;, &lt;code&gt;hasCollection&lt;/code&gt;, &lt;code&gt;createPartition&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Access Layer â†’ Coordinator&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DML&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Data Manipulation&lt;/td&gt;
&lt;td&gt;&lt;code&gt;insert&lt;/code&gt;, &lt;code&gt;delete&lt;/code&gt;, &lt;code&gt;upsert&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Access Layer â†’ Streaming Worker Node&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;DQL&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Data Query&lt;/td&gt;
&lt;td&gt;&lt;code&gt;search&lt;/code&gt;, &lt;code&gt;query&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Access Layer â†’ Batch Worker Node (Query Nodes)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="data-flow"&gt;Data Flow
&lt;/h3&gt;&lt;p&gt;Search:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Client sends a search request via SDK/RESTful API&lt;/li&gt;
&lt;li&gt;Load Balancer routes request to available Proxy in Access Layer&lt;/li&gt;
&lt;li&gt;Proxy uses routing cache to determine target nodes; contacts Coordinator &lt;strong&gt;only if cache is unavailable&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Proxy forwards request to appropriate Streaming Nodes, which then coordinate with Query Nodes for sealed data search while executing growing data search locally&lt;/li&gt;
&lt;li&gt;Query Nodes load sealed segments from Object Storage as needed and perform segment-level search&lt;/li&gt;
&lt;li&gt;Search results undergo &lt;strong&gt;multi-level reduction&lt;/strong&gt;: Query Nodes reduce results across multiple segments, Streaming Nodes reduce results from Query Nodes, and Proxy reduces results from all Streaming Nodes before returning to client&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Insert:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Client sends an insert request with vector data&lt;/li&gt;
&lt;li&gt;Access Layer validates and forwards request to Streaming Node&lt;/li&gt;
&lt;li&gt;Streaming Node logs operation to WAL Storage for durability&lt;/li&gt;
&lt;li&gt;Data is processed in real-time and made available for queries&lt;/li&gt;
&lt;li&gt;When &lt;strong&gt;segments&lt;/strong&gt; reach capacity, Streaming Node triggers conversion to sealed segments&lt;/li&gt;
&lt;li&gt;Data Node handles &lt;strong&gt;compaction&lt;/strong&gt; and builds &lt;strong&gt;indexes&lt;/strong&gt; on top of the sealed segments, storing results in Object Storage&lt;/li&gt;
&lt;li&gt;Query Nodes load the newly built indexes and replace the corresponding growing data&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="streaming-service"&gt;Streaming Service
&lt;/h2&gt;&lt;p&gt;The &lt;strong&gt;Streaming Service&lt;/strong&gt; is a concept for Milvus internal streaming system module, built around the Write-Ahead Log (WAL) to support various streaming-related function.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/streaming_distributed_arch.png"
loading="lazy"
alt="Streaming Distributed Arc"
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Streaming Coordinator&lt;/strong&gt;: A logical component in the &lt;strong&gt;coordinator node&lt;/strong&gt;. It uses Etcd for service discovery to locate available streaming nodes and is responsible for binding WAL to the corresponding streaming nodes. It also registers service to expose the WAL distribution topology, allowing streaming clients to know the appropriate streaming node for a given WAL.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Streaming Node Cluster&lt;/strong&gt;: A cluster of streaming worker nodes responsible for all streaming-processing tasks, such as wal appending, state recovering, growing data querying.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Streaming Client&lt;/strong&gt;: An internally developed Milvus client that encapsulates basic functionalities such as service discovery and readiness checks. It is used to initiate operations such as message writing and subscription.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="message"&gt;Message
&lt;/h3&gt;&lt;p&gt;The Streaming Service is a log-driven streaming system, so all write operations in Milvus (such as DML and DDL) are abstracted as &lt;strong&gt;Messages&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Every Message is assigned a &lt;strong&gt;Timestamp Oracle (TSO)&lt;/strong&gt; field by the Streaming Service, which indicates the messageâ€™s order in the WAL. The ordering of messages determines the order of write operations in Milvus. This makes it possible to reconstruct the latest cluster state from the logs.&lt;/li&gt;
&lt;li&gt;Each Message belongs to a specific &lt;strong&gt;VChannel&lt;/strong&gt; (Virtual Channel) and maintains certain invariant properties within that channel to ensure &lt;strong&gt;operation consistency&lt;/strong&gt;. For example, an Insert operation must always occur before a DropCollection operation on the same channel.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/message_order.png"
loading="lazy"
alt="Message Order"
&gt;&lt;/p&gt;
&lt;h2 id="data-model"&gt;Data Model
&lt;/h2&gt;&lt;p&gt;Milvus allows you to specify the search data model through a &lt;strong&gt;collection&lt;/strong&gt; schema, organizing unstructured data, their dense or sparse vector &lt;strong&gt;representations&lt;/strong&gt;, and structured &lt;strong&gt;metadata&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;User Queries:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Documents Retrieving&lt;/li&gt;
&lt;li&gt;Image Finding&lt;/li&gt;
&lt;li&gt;Product Searching&lt;/li&gt;
&lt;li&gt;Metadata Filtering&lt;/li&gt;
&lt;li&gt;Hybrid&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Search Methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Semantic search&lt;/strong&gt;: Uses dense vector similarity to find items with similar meaning, ideal for unstructured data like text or images.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Full-text search&lt;/strong&gt;: &lt;strong&gt;Complementing&lt;/strong&gt; semantic search with keyword matching. Full-text search can utilize lexical analysis to avoid breaking long words into fragmented tokens, grasping the special terms during retrieval.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Metadata filtering&lt;/strong&gt;: On top of vector search, applying constraints like date ranges, categories, or tags.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="schema-design"&gt;Schema Design
&lt;/h3&gt;&lt;p&gt;On the high level, Milvus supports two main types of fields: &lt;strong&gt;vector fields&lt;/strong&gt; and &lt;strong&gt;scalar fields&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;You can map your data model into a schema of fields, including vectors and any auxiliary scalar fields. Ensure that each field correlates with the attributes from your data model, especially pay attention to your vector type (dense or spase) and its dimension.&lt;/p&gt;
&lt;p&gt;Vector fields store embeddings for &lt;strong&gt;unstructured&lt;/strong&gt; data types such as text, images, and audio. These embeddings may be dense, sparse, or binary, depending on the data type and the retrieval method utilized. Typically, dense vectors are used for &lt;strong&gt;semantic&lt;/strong&gt; search, while sparse vectors are better suited for &lt;strong&gt;full-text or lexical&lt;/strong&gt; matching. Binary vectors are useful when storage and computational resources are limited. A collection may contain several vector fields to enable &lt;strong&gt;multi-modal&lt;/strong&gt; or hybrid retrieval strategies.&lt;/p&gt;
&lt;p&gt;Milvus supports the vector data types: &lt;code&gt;FLOAT_VECTOR&lt;/code&gt; for &lt;a class="link" href="https://milvus.io/docs/dense-vector.md" target="_blank" rel="noopener"
&gt;Dense Vector&lt;/a&gt;, &lt;code&gt;SPARSE_FLOAT_VECTOR&lt;/code&gt; for &lt;a class="link" href="https://milvus.io/docs/sparse_vector.md" target="_blank" rel="noopener"
&gt;Sparse Vector&lt;/a&gt;, and &lt;code&gt;BINARY_VECTOR&lt;/code&gt; for &lt;a class="link" href="https://milvus.io/docs/binary-vector.md" target="_blank" rel="noopener"
&gt;Binary Vector&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Scalar fields store primitive, structured valuesâ€”commonly referred to as &lt;strong&gt;metadata&lt;/strong&gt;â€”such as numbers, strings, or dates. These values can be returned alongside vector search results and are essential for filtering and sorting. They allow you to narrow search results based on specific attributes, like limiting documents to a particular category or a defined time range.&lt;/p&gt;
&lt;p&gt;Milvus supports scalar types such as &lt;code&gt;BOOL&lt;/code&gt;, &lt;code&gt;INT8/16/32/64&lt;/code&gt;, &lt;code&gt;FLOAT&lt;/code&gt;, &lt;code&gt;DOUBLE&lt;/code&gt;, &lt;code&gt;VARCHAR&lt;/code&gt;, &lt;code&gt;JSON&lt;/code&gt;, and &lt;code&gt;ARRAY&lt;/code&gt; for storing and filtering non-vector data.&lt;/p&gt;
&lt;h4 id="primary-key"&gt;Primary Key
&lt;/h4&gt;&lt;p&gt;A primary key field is a fundamental component of a schema, as it &lt;strong&gt;uniquely identifies&lt;/strong&gt; each entity within a collection. Defining a primary key is &lt;strong&gt;mandatory&lt;/strong&gt;. It shall be &lt;strong&gt;scalar field of integer or string&lt;/strong&gt; type and marked as &lt;code&gt;is_primary=True&lt;/code&gt;. Optionally, you can enable &lt;code&gt;auto_id&lt;/code&gt; for the primary key, which is automatically assigned integer numbers that monolithically grow as more data is ingested into the collection.&lt;/p&gt;
&lt;h4 id="partitioning"&gt;Partitioning
&lt;/h4&gt;&lt;p&gt;To speed up the search, you can &lt;strong&gt;optionally&lt;/strong&gt; turn on partitioning. By designating a specific scalar field for partitioning and specifying filtering criteria based on this field during searches, the search scope can be effectively limited to only the relevant partitions. This method significantly enhances the efficiency of retrieval operations by reducing the search domain.&lt;/p&gt;
&lt;h4 id="analyzer"&gt;Analyzer
&lt;/h4&gt;&lt;p&gt;An analyzer is an essential tool for processing and transforming text data. Its main function is to &lt;strong&gt;convert raw text into tokens&lt;/strong&gt; and to structure them for indexing and retrieval. It does that by tokenizing the string, dropping the stop words, and stemming the individual words into tokens.&lt;/p&gt;
&lt;h4 id="function"&gt;Function
&lt;/h4&gt;&lt;p&gt;Milvus allows you to define built-in functions as part of the schema to automatically derive certain fields.&lt;/p&gt;
&lt;h2 id="data-processing"&gt;Data Processing
&lt;/h2&gt;&lt;h3 id="data-insertion"&gt;Data Insertion
&lt;/h3&gt;&lt;p&gt;You can choose how many &lt;strong&gt;shards&lt;/strong&gt; a collection uses in Milvusâ€”each shard maps to a virtual channel (&lt;em&gt;vchannel&lt;/em&gt;). As illustrated below, Milvus then assigns every &lt;em&gt;vchannel&lt;/em&gt; to a physical channel (&lt;em&gt;pchannel&lt;/em&gt;), and each &lt;em&gt;pchannel&lt;/em&gt; is bound to a specific Streaming Node.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/pvchannel_wal.png"
loading="lazy"
alt="VChannel PChannel and StreamingNode"
&gt;&lt;/p&gt;
&lt;p&gt;After data verification, the proxy will split the written message into various data package of shards according to the specified shard routing rules.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/channels_1.png"
loading="lazy"
alt="Channels 1"
&gt;&lt;/p&gt;
&lt;p&gt;Then the written data of one shard (&lt;em&gt;vchannel&lt;/em&gt;) is sent to the corresponding Streaming Node of &lt;em&gt;pchannel&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The Streaming Node assigns a &lt;strong&gt;Timestamp Oracle&lt;/strong&gt; (TSO) to each data packet to establish a total ordering of operations. It performs &lt;strong&gt;consistency checks&lt;/strong&gt; on the payload before writing it into the underlying write-ahead log (WAL).&lt;/p&gt;
&lt;p&gt;Meanwhile, the StreamingNode also asynchronously chops the committed WAL entries into discrete segments. There are two segment types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Growing segment&lt;/strong&gt;: any data that has &lt;strong&gt;not&lt;/strong&gt; been presisted into the object storage.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sealed segment&lt;/strong&gt;: all data has been persisted into the object storage, the data of sealed segment is &lt;strong&gt;immutable&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The transition of a growing segment into a sealed segment is called a flush. The Streaming Node triggers a &lt;strong&gt;flush&lt;/strong&gt; as soon as it has ingested and written all available WAL entries for that segmentâ€”i.e., when there are no more pending records in the underlying write-ahead logâ€”at which point the segment is finalized and made read-optimized.&lt;/p&gt;
&lt;p&gt;When the growing segment on a Streaming Node is flushed into a sealed segmentâ€”or when a Data Node completes a compactionâ€”the Coordinator initiates a handoff operation to convert that growing data into historical data.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/handoff.png"
loading="lazy"
alt="Handoff"
&gt;&lt;/p&gt;
&lt;h3 id="index-building"&gt;Index building
&lt;/h3&gt;&lt;p&gt;Index building is performed by data node. To avoid frequent index building for data updates, a collection in Milvus is divided further into segments, each with its own index.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/index_building.png"
loading="lazy"
alt="Index building"
&gt;&lt;/p&gt;
&lt;p&gt;Milvus supports building index for each &lt;strong&gt;vector field, scalar field and primary field&lt;/strong&gt;. Both the input and output of index building engage with object storage: The data node loads the log snapshots to index from a segment (which is in object storage) to memory, deserializes the corresponding data and metadata to build index, serializes the index when index building completes, and writes it back to object storage.&lt;/p&gt;
&lt;p&gt;Index building mainly involves &lt;strong&gt;vector and matrix operations&lt;/strong&gt; and hence is computation- and memory-intensive. Vectors &lt;strong&gt;cannot be efficiently indexed with traditional tree-based indexes due to their high-dimensional nature&lt;/strong&gt;, but can be indexed with techniques that are more mature in this subject, such as &lt;strong&gt;cluster- or graph-based indexes&lt;/strong&gt;. Regardless its type, building index involves massive iterative calculations for large-scale vectors, such as Kmeans or graph traverse.&lt;/p&gt;
&lt;p&gt;Unlike indexing for scalar data, building vector index has to take full advantage of SIMD (single instruction, multiple data) acceleration. Milvus has innate support for SIMD instruction sets, e.g., SSE, AVX2, and AVX512. Given the â€œhiccupâ€ and resource-intensive nature of vector index building, elasticity becomes crucially important to Milvus in economical terms. Future Milvus releases will further explorations in heterogeneous computing and serverless computation to bring down the related costs.&lt;/p&gt;
&lt;p&gt;Besides, Milvus also supports s&lt;strong&gt;calar filtering and primary field query&lt;/strong&gt;. It has inbuilt indexes to improve query efficiency, e.g., Bloom filter indexes, hash indexes, tree-based indexes, and inverted indexes, and plans to introduce more external indexes, e.g., bitmap indexes and rough indexes.&lt;/p&gt;
&lt;h3 id="data-query"&gt;Data query
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/data_query.jpg"
loading="lazy"
alt="Data query"
&gt;&lt;/p&gt;
&lt;p&gt;A collection in Milvus is split into multiple &lt;strong&gt;segments&lt;/strong&gt;; the Streaming Node loads &lt;strong&gt;growing&lt;/strong&gt; segments and maintains real-time data, while the Query Nodes load &lt;strong&gt;sealed&lt;/strong&gt; segments.&lt;/p&gt;
&lt;p&gt;When a query/search request arrives, the proxy &lt;strong&gt;broadcasts the request to all Streaming Nodes responsible for the related shards&lt;/strong&gt; for concurrent search.&lt;/p&gt;
&lt;p&gt;Each Streaming Node generates a query plan, searches its &lt;strong&gt;local&lt;/strong&gt; growing data, and simultaneously contacts &lt;strong&gt;remote&lt;/strong&gt; Query Nodes to retrieve historical results, then aggregates these into a &lt;strong&gt;single shard result&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Finally, the proxy collects all shard results, merges them into the final outcome, and returns it to the client.&lt;/p&gt;
&lt;h2 id="knowhere"&gt;Knowhere
&lt;/h2&gt;&lt;p&gt;Knowhere is the &lt;strong&gt;core vector execution engine&lt;/strong&gt; of Milvus, which &lt;strong&gt;incorporates&lt;/strong&gt; several vector similarity search libraries including &lt;a class="link" href="https://github.com/facebookresearch/faiss" target="_blank" rel="noopener"
&gt;Faiss&lt;/a&gt;, &lt;a class="link" href="https://github.com/nmslib/hnswlib" target="_blank" rel="noopener"
&gt;Hnswlib&lt;/a&gt; and &lt;a class="link" href="https://github.com/spotify/annoy" target="_blank" rel="noopener"
&gt;Annoy&lt;/a&gt;. Knowhere is also designed to support &lt;strong&gt;heterogeneous&lt;/strong&gt; computing. It controls on which hardware (CPU or GPU) to execute index building and search requests. This is how Knowhere gets its name - knowing where to execute the operations. More types of hardware including DPU and TPU will be supported in future releases.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/knowhere_architecture.png"
loading="lazy"
alt="Knowhere"
&gt;&lt;/p&gt;
&lt;p&gt;The bottom-most layer is the system hardware. Above this sit the third-party index libraries. At the top layer, Knowhere interacts with the index node and query node via CGO, which &lt;strong&gt;allows Go packages to call C code&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id="bitset"&gt;Bitset
&lt;/h2&gt;&lt;p&gt;In Milvus, bitsets are arrays of bit numbers &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;1&lt;/code&gt; that can be used to represent certain data compactly and efficiently as opposed to in ints, floats, or chars. A bit number is &lt;code&gt;0&lt;/code&gt; by default and is only set to &lt;code&gt;1&lt;/code&gt; if it meets certain requirements.&lt;/p&gt;
&lt;p&gt;Bitset is a simple yet powerful mechanism that helps Milvus perform attribute filtering, data deletion, and query with Time Travel.&lt;/p&gt;
&lt;h2 id="timestamp"&gt;Timestamp
&lt;/h2&gt;&lt;p&gt;When conducting a data manipulation language (DML) operation, including &lt;a class="link" href="https://milvus.io/docs/v2.1.x/data_processing.md" target="_blank" rel="noopener"
&gt;data insertion and deletion&lt;/a&gt;, Milvus assigns timestamps to the entities involved in the operation. Therefore, all entities in Milvus has a &lt;strong&gt;timestamp attribute&lt;/strong&gt;. And the batches of entities in the same DML operation share the same timestamp value.&lt;/p&gt;
&lt;h3 id="guarantee_timestamp"&gt;&lt;code&gt;Guarantee_timestamp&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Guarantee_timestamp&lt;/code&gt; is a type of timestamp used to ensure that all data updates by DML operations before the &lt;code&gt;Guarantee_timestamp&lt;/code&gt; are &lt;strong&gt;visible&lt;/strong&gt; when a vector similarity search or query is conducted.&lt;/p&gt;
&lt;p&gt;If the &lt;code&gt;Guarantee_timestamp&lt;/code&gt; is not configured, Milvus automatically takes &lt;strong&gt;the point in time&lt;/strong&gt; when the search request is made. Therefore, the search is conducted on a data view with all data updates by DML operations before the search.&lt;/p&gt;
&lt;p&gt;To save you the trouble of understanding the &lt;a class="link" href="https://github.com/milvus-io/milvus/blob/master/docs/design_docs/20211214-milvus_hybrid_ts.md" target="_blank" rel="noopener"
&gt;TSO&lt;/a&gt; inside Milvus, as a user, you do not have to directly configure the &lt;code&gt;Guarantee_timestamp&lt;/code&gt; parameter. You only need to choose the &lt;a class="link" href="https://milvus.io/docs/v2.1.x/consistency.md" target="_blank" rel="noopener"
&gt;consistency level&lt;/a&gt;, and Milvus automatically handles the &lt;code&gt;Guarantee_timestamp&lt;/code&gt; parameter for you. Each consistency level corresponds to a certain &lt;code&gt;Guarantee_timestamp&lt;/code&gt; value.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/Guarantee_Timestamp.png"
loading="lazy"
alt="Guarantee_Timestamp"
&gt;&lt;/p&gt;
&lt;h3 id="service_timestamp"&gt;&lt;code&gt;Service_timestamp&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Service_timestamp&lt;/code&gt; is a type of timestamp automatically generated and managed by query nodes in Milvus. It is used to indicate which DML operations are executed by query nodes.&lt;/p&gt;
&lt;p&gt;The data managed by query nodes can be categorized into two types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Historical data (or also called batch data)&lt;/li&gt;
&lt;li&gt;Incremental data (or also called streaming data).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In Milvus, you need to load the data before conducting a search or query. Therefore, batch data in a collection are loaded by query node before a search or query request is made. However, streaming data are inserted into or deleted from Milvus on the fly, which requires the query node to keep a timeline of the DML operations and the search or query requests. As a result, query nodes use &lt;code&gt;Service_timestamp&lt;/code&gt; to keep such a timeline. &lt;code&gt;Service_timestamp&lt;/code&gt; can be seen as &lt;strong&gt;the time point when certain data is visible&lt;/strong&gt; as query nodes can ensure that all DML operations before &lt;code&gt;Service_timestamp&lt;/code&gt; are completed.&lt;/p&gt;
&lt;p&gt;When there is an incoming search or query request, a query node compares the values of &lt;code&gt;Service_timestamp&lt;/code&gt; and &lt;code&gt;Guarantee_timestamp&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/Service_Timestamp.png"
loading="lazy"
alt="Service_Timestamp"
&gt;&lt;/p&gt;
&lt;h4 id="scenario-1-service_timestamp--guarantee_timestamp"&gt;Scenario 1: &lt;code&gt;Service_timestamp&lt;/code&gt; &amp;gt;= &lt;code&gt;Guarantee_timestamp&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;As shown in the figure 1, the value of &lt;code&gt;Guarantee_timestamp&lt;/code&gt; is set as &lt;code&gt;2021-08-26T18:15:00&lt;/code&gt;. When the value of &lt;code&gt;Service_timestamp&lt;/code&gt; is grown to &lt;code&gt;2021-08-26T18:15:01&lt;/code&gt;, this means that all DML operations before this point in time are executed and completed by the query node, including those DML operations before the time indicated by &lt;code&gt;Guarantee_timestamp&lt;/code&gt;. As a result, the search or query request can be executed immediately.&lt;/p&gt;
&lt;h4 id="scenario-2-service_timestamp--guarantee_timestamp"&gt;Scenario 2: &lt;code&gt;Service_timestamp&lt;/code&gt; &amp;lt; &lt;code&gt;Guarantee_timestamp&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;As shown in the figure 2, the value of &lt;code&gt;Guarantee_timestamp&lt;/code&gt; is set as &lt;code&gt;2021-08-26T18:15:00&lt;/code&gt;, and the current value of &lt;code&gt;Service_timestamp&lt;/code&gt; is only &lt;code&gt;2021-08-26T18:14:55&lt;/code&gt;. This means that only DML operations before &lt;code&gt;2021-08-26T18:14:55&lt;/code&gt; are executed and completed, leaving part of the DML operations after this time point but before the &lt;code&gt;Guarantee_timestamp&lt;/code&gt; unfinished. If the search or query is executed at this point, some of the data required are invisible and unavailable yet, seriously affecting the accuracy of the search or query results. Therefore, the query node needs to put off the search or query request until the DML operations before &lt;code&gt;guarantee_timestamp&lt;/code&gt; are completed (i.e. when &lt;code&gt;Service_timestamp&lt;/code&gt; &amp;gt;= &lt;code&gt;Guarantee_timestamp&lt;/code&gt;).&lt;/p&gt;
&lt;h3 id="graceful_time"&gt;&lt;code&gt;Graceful_time&lt;/code&gt;
&lt;/h3&gt;&lt;p&gt;Technically speaking, &lt;code&gt;Graceful_time&lt;/code&gt; is not a timestamp, but rather a time period (e.g. 100ms). However, &lt;code&gt;Graceful_time&lt;/code&gt; is worth mentioning because it is strongly related to &lt;code&gt;Guarantee_timestamp&lt;/code&gt; and &lt;code&gt;Service_timestamp&lt;/code&gt;. &lt;code&gt;Graceful_time&lt;/code&gt; is a configurable parameter in the Milvus configuration file. It is used to indicate &lt;strong&gt;the period of time that can be tolerated before certain data become visible&lt;/strong&gt;. In short, uncompleted DML operations during &lt;code&gt;Graceful_time&lt;/code&gt; can be tolerated.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://milvus.io/docs/v2.6.x/assets/Graceful_Time.png"
loading="lazy"
alt="Graceful_Time"
&gt;&lt;/p&gt;
&lt;h4 id="scenario-1-service_timestamp--graceful_time--guarantee_timestamp"&gt;Scenario 1: &lt;code&gt;Service_timestamp&lt;/code&gt; + &lt;code&gt;Graceful_time&lt;/code&gt; &amp;gt;= &lt;code&gt;Guarantee_timestamp&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;The value of &lt;code&gt;Guarantee_timestamp&lt;/code&gt; is set as &lt;code&gt;2021-08-26T18:15:01&lt;/code&gt;, and &lt;code&gt;Graceful_time&lt;/code&gt; as &lt;code&gt;2s&lt;/code&gt;. The value of &lt;code&gt;Service_timestamp&lt;/code&gt; is grown to &lt;code&gt;2021-08-26T18:15:00&lt;/code&gt;. Though the value of &lt;code&gt;Service_timestamp&lt;/code&gt; is still smaller than that of &lt;code&gt;Guarantee_timestamp&lt;/code&gt; and not all DML operations before &lt;code&gt;2021-08-26T18:15:01&lt;/code&gt; are completed, a period of 2 seconds of data invisibility is tolerated as indicated by the value of &lt;code&gt;Graceful_time&lt;/code&gt;. Therefore, the incoming search or query request can be executed immediately.&lt;/p&gt;
&lt;h4 id="scenario-2-service_timestamp--graceful_time--guarantee_timestamp"&gt;Scenario 2: &lt;code&gt;Service_timestamp&lt;/code&gt; + &lt;code&gt;Graceful_time&lt;/code&gt; &amp;lt; &lt;code&gt;Guarantee_timestamp&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;The value of &lt;code&gt;Guarantee_timestamp&lt;/code&gt; is set as &lt;code&gt;2021-08-26T18:15:01&lt;/code&gt;, and &lt;code&gt;Graceful_time&lt;/code&gt; as &lt;code&gt;2s&lt;/code&gt;. The current value of &lt;code&gt;Service_timestamp&lt;/code&gt; is only &lt;code&gt;2021-08-26T18:14:54&lt;/code&gt;. This means that the expected DML operations are not completed yet and even given the 2 second of graceful time, data invisibility is still intolerable. Therefore, the query node needs to put off the search or query request until certain DML requests are completed (i.e. when &lt;code&gt;Service_timestamp&lt;/code&gt; + &lt;code&gt;Graceful_time&lt;/code&gt; &amp;gt;= &lt;code&gt;Guarantee_timestamp&lt;/code&gt;).&lt;/p&gt;
&lt;h2 id="metrics"&gt;Metrics
&lt;/h2&gt;&lt;p&gt;Similarity metrics are used to measure similarities among vectors. Choosing an appropriate distance metric helps improve classification and clustering performance significantly.&lt;/p&gt;
&lt;p&gt;Currently, Milvus supports these types of similarity Metrics: Euclidean distance (&lt;code&gt;L2&lt;/code&gt;), Inner Product (&lt;code&gt;IP&lt;/code&gt;), Cosine Similarity (&lt;code&gt;COSINE&lt;/code&gt;), &lt;code&gt;JACCARD&lt;/code&gt;, &lt;code&gt;HAMMING&lt;/code&gt;, and &lt;code&gt;BM25&lt;/code&gt; (specifically designed for full text search on sparse vectors).&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Field Type&lt;/th&gt;
&lt;th&gt;Dimension Range&lt;/th&gt;
&lt;th&gt;Supported Metric Types&lt;/th&gt;
&lt;th&gt;Default Metric Type&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;FLOAT_VECTOR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;2-32,768&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;, &lt;code&gt;L2&lt;/code&gt;, &lt;code&gt;IP&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;FLOAT16_VECTOR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;2-32,768&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;, &lt;code&gt;L2&lt;/code&gt;, &lt;code&gt;IP&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;BFLOAT16_VECTOR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;2-32,768&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;, &lt;code&gt;L2&lt;/code&gt;, &lt;code&gt;IP&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INT8_VECTOR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;2-32,768&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;, &lt;code&gt;L2&lt;/code&gt;, &lt;code&gt;IP&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;COSINE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SPARSE\_FLOAT\_VECTOR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;No need to specify the dimension.&lt;/td&gt;
&lt;td&gt;&lt;code&gt;IP&lt;/code&gt;, &lt;code&gt;BM25&lt;/code&gt; (used only for full text search)&lt;/td&gt;
&lt;td&gt;&lt;code&gt;IP&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;BINARY_VECTOR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;8-32,768*8&lt;/td&gt;
&lt;td&gt;&lt;code&gt;HAMMING&lt;/code&gt;, &lt;code&gt;JACCARD&lt;/code&gt;, &lt;code&gt;MHJACCARD&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;HAMMING&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="index"&gt;Index
&lt;/h2&gt;&lt;p&gt;HNSWï¼ˆHierarchical Navigable Small Worldï¼‰å’ŒIVF-Flatï¼ˆInverted File with Flat Indexï¼‰æ˜¯ä¸¤ç§å¹¿æ³›åº”ç”¨äºå‘é‡æ•°æ®åº“çš„é«˜æ•ˆè¿‘ä¼¼æœ€è¿‘é‚»ï¼ˆANNï¼‰æœç´¢ç®—æ³•ï¼Œå®ƒä»¬åœ¨å¤„ç†å¤§è§„æ¨¡é«˜ç»´å‘é‡æ•°æ®æ—¶å„æœ‰ä¼˜åŠ£ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŸç†ã€æ€§èƒ½å¯¹æ¯”åŠé€‚ç”¨åœºæ™¯ä¸‰æ–¹é¢è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="ä¸€æ ¸å¿ƒåŸç†ä¸æŠ€æœ¯ç‰¹ç‚¹"&gt;ä¸€ã€æ ¸å¿ƒåŸç†ä¸æŠ€æœ¯ç‰¹ç‚¹
&lt;/h3&gt;&lt;h4 id="1-hnswåˆ†å±‚å¯¼èˆªå°ä¸–ç•Œå›¾"&gt;1. &lt;strong&gt;HNSWï¼šåˆ†å±‚å¯¼èˆªå°ä¸–ç•Œå›¾&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;
ç»“åˆ&lt;strong&gt;è·³è¡¨ï¼ˆSkip Listï¼‰â€‹&lt;/strong&gt;â€‹ å’Œ â€‹&lt;strong&gt;å¯å¯¼èˆªå°ä¸–ç•Œå›¾ï¼ˆNSWï¼‰â€‹&lt;/strong&gt;ï¼Œæ„å»ºå¤šå±‚å›¾ç»“æ„å®ç°é«˜æ•ˆæœç´¢ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å±‚è®¾è®¡&lt;/strong&gt;ï¼šåº•å±‚ï¼ˆLayer 0ï¼‰åŒ…å«æ‰€æœ‰èŠ‚ç‚¹ï¼Œå±‚çº§è¶Šé«˜èŠ‚ç‚¹è¶Šç¨€ç–ï¼Œå½¢æˆâ€œé«˜é€Ÿå…¬è·¯å¼â€å¿«é€Ÿè·¯å¾„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´ªå¿ƒè·¯ç”±&lt;/strong&gt;ï¼šä»é¡¶å±‚å…¥å£ç‚¹å¼€å§‹ï¼Œæ¯å±‚é€‰æ‹©è·ç¦»æŸ¥è¯¢å‘é‡æœ€è¿‘çš„é‚»å±…èŠ‚ç‚¹ï¼Œé€å±‚å‘ä¸‹ç²¾ç»†åŒ–æœç´¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ›´æ–°&lt;/strong&gt;ï¼šæ–°æ•°æ®æ’å…¥æ—¶éšæœºåˆ†é…å±‚çº§ï¼Œä»…éœ€å±€éƒ¨è°ƒæ•´è¿æ¥è¾¹ï¼ˆå‚æ•° &lt;code&gt;M&lt;/code&gt; æ§åˆ¶æ¯å±‚é‚»å±…æ•°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å‚æ•°&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;M&lt;/code&gt;ï¼šæ¯å±‚é‚»å±…æ•°ï¼Œå½±å“ç´¢å¼•ç²¾åº¦å’Œå†…å­˜å ç”¨ï¼ˆå€¼è¶Šå¤§ç²¾åº¦è¶Šé«˜ï¼Œå†…å­˜æ¶ˆè€—è¶Šå¤§ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;efConstruction&lt;/code&gt;ï¼šæ„å»ºç´¢å¼•æ—¶çš„å€™é€‰é˜Ÿåˆ—é•¿åº¦ï¼Œå†³å®šç´¢å¼•è´¨é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;efSearch&lt;/code&gt;ï¼šæœç´¢æ—¶çš„å€™é€‰é˜Ÿåˆ—é•¿åº¦ï¼Œç›´æ¥å½±å“å¬å›ç‡ä¸å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-ivf-flatå€’æ’æ–‡ä»¶æš´åŠ›æœç´¢"&gt;2. &lt;strong&gt;IVF-Flatï¼šå€’æ’æ–‡ä»¶+æš´åŠ›æœç´¢&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæ€æƒ³&lt;/strong&gt;
é€šè¿‡èšç±»é¢„åˆ’åˆ†ç©ºé—´ï¼Œç¼©å°æœç´¢èŒƒå›´ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´åˆ†åŒº&lt;/strong&gt;ï¼šç”¨k-meanså°†å‘é‡ç©ºé—´åˆ’åˆ†ä¸º &lt;code&gt;nlist&lt;/code&gt; ä¸ªèšç±»ï¼ˆç°‡ï¼‰ï¼Œæ¯ä¸ªç°‡å­˜å‚¨å…¶è´¨å¿ƒå’Œæˆå‘˜å‘é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;ï¼šå»ºç«‹è´¨å¿ƒâ†’å‘é‡çš„æ˜ å°„è¡¨ï¼Œæœç´¢æ—¶ä»…è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æœ€è¿‘è´¨å¿ƒå¯¹åº”ç°‡å†…æ‰€æœ‰å‘é‡çš„è·ç¦»ï¼ˆâ€œFlatâ€å³æŒ‡æ— å‹ç¼©çš„æš´åŠ›è®¡ç®—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾¹ç•Œä¼˜åŒ–&lt;/strong&gt;ï¼šé€šè¿‡å‚æ•° &lt;code&gt;probes&lt;/code&gt; æ§åˆ¶æœç´¢çš„ç°‡æ•°é‡ï¼ˆå¦‚ &lt;code&gt;probes=5&lt;/code&gt; è¡¨ç¤ºæœç´¢æœ€è¿‘çš„5ä¸ªç°‡ï¼‰ï¼Œå¹³è¡¡é€Ÿåº¦ä¸å¬å›ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®å‚æ•°&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nlist&lt;/code&gt;ï¼šèšç±»æ•°é‡ï¼Œå½±å“ç´¢å¼•æ„å»ºé€Ÿåº¦å’Œæœç´¢ç²¾åº¦ï¼ˆå€¼è¶Šå¤§ç²¾åº¦è¶Šé«˜ï¼Œä½†æ„å»ºæ›´æ…¢ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;probes&lt;/code&gt;ï¼šæœç´¢çš„ç°‡æ•°é‡ï¼Œå€¼è¶Šå¤§å¬å›ç‡è¶Šé«˜ï¼Œä½†å»¶è¿Ÿå¢åŠ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="äºŒæ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯"&gt;äºŒã€æ€§èƒ½å¯¹æ¯”ä¸é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;HNSW&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;IVF-Flat&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœç´¢é€Ÿåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âš¡ï¸ &lt;strong&gt;æå¿«&lt;/strong&gt;ï¼ˆå¯¹æ•°å¤æ‚åº¦ O(log N)ï¼‰&lt;/td&gt;
&lt;td&gt;âš¡ å¿«ï¼ˆä»…æœç´¢éƒ¨åˆ†ç°‡ï¼Œä½†ä»éœ€éå†ç°‡å†…æ‰€æœ‰å‘é‡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•æ„å»ºæ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â³ æ…¢ï¼ˆéœ€æ„å»ºå¤šå±‚å›¾ï¼‰&lt;/td&gt;
&lt;td&gt;â±ï¸ &lt;strong&gt;æå¿«&lt;/strong&gt;ï¼ˆä»…éœ€ä¸€æ¬¡èšç±»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜å ç”¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ğŸ§  é«˜ï¼ˆå­˜å‚¨å¤šå±‚å›¾ç»“æ„ï¼‰&lt;/td&gt;
&lt;td&gt;ğŸ’¾ ä½ï¼ˆä»…å­˜å‚¨åŸå§‹å‘é‡+è´¨å¿ƒæ˜ å°„ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç²¾åº¦/å¬å›ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… &lt;strong&gt;é«˜&lt;/strong&gt;ï¼ˆå°¤å…¶é€‚åˆé«˜ç»´æ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;âš–ï¸ ä¸­ç­‰ï¼ˆä¾èµ–&lt;code&gt;probes&lt;/code&gt;å‚æ•°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€æ›´æ–°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ”¯æŒå®æ—¶æ’å…¥/åˆ é™¤&lt;/td&gt;
&lt;td&gt;âŒ éœ€å®šæœŸé‡å»ºç´¢å¼•ï¼ˆé¢‘ç¹æ›´æ–°å¯¼è‡´ç²¾åº¦ä¸‹é™ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨æ•°æ®è§„æ¨¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç™¾ä¸‡~åäº¿çº§å‘é‡&lt;/td&gt;
&lt;td&gt;åƒ~ç™¾ä¸‡çº§å‘é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="ä¸‰å…¸å‹åº”ç”¨åœºæ™¯é€‰æ‹©å»ºè®®"&gt;ä¸‰ã€å…¸å‹åº”ç”¨åœºæ™¯é€‰æ‹©å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© HNSW çš„åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜ç²¾åº¦éœ€æ±‚&lt;/strong&gt;ï¼šå¦‚RAGç³»ç»Ÿçš„çŸ¥è¯†åº“æ£€ç´¢ã€æ¨èç³»ç»Ÿçš„å®æ—¶å¬å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€æ•°æ®ç¯å¢ƒ&lt;/strong&gt;ï¼šéœ€é¢‘ç¹å¢åˆ å‘é‡ï¼ˆå¦‚ç”¨æˆ·ç”»åƒå®æ—¶æ›´æ–°ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºå……è¶³&lt;/strong&gt;ï¼šå¯æ¥å—è¾ƒé«˜å†…å­˜æ¶ˆè€—å’Œè¾ƒæ…¢çš„ç´¢å¼•æ„å»ºï¼ˆå¦‚äº‘æœåŠ¡å™¨éƒ¨ç½²ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© IVF-Flat çš„åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸­å°è§„æ¨¡æ•°æ®&lt;/strong&gt;ï¼ˆ&amp;lt;100ä¸‡å‘é‡ï¼‰ä¸”éœ€ä½æˆæœ¬éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™æ€æ•°æ®é›†&lt;/strong&gt;ï¼šæ•°æ®æ›´æ–°é¢‘ç‡ä½ï¼ˆå¦‚å†å²æ¡£æ¡ˆæ£€ç´¢ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€Ÿåº¦ä¸å†…å­˜æ•æ„Ÿ&lt;/strong&gt;ï¼šè¾¹ç¼˜è®¾å¤‡æˆ–å†…å­˜å—é™ç¯å¢ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="å››å®é™…æ¡ˆä¾‹è¯´æ˜"&gt;å››ã€å®é™…æ¡ˆä¾‹è¯´æ˜
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;HNSW åœ¨ RAG ç³»ç»Ÿä¸­çš„åº”ç”¨&lt;/strong&gt;
Weaviate ä½¿ç”¨ HNSW ä½œä¸ºé»˜è®¤ç´¢å¼•ï¼Œåœ¨åƒä¸‡çº§æ–‡æ¡£åº“ä¸­å®ç°æ¯«ç§’çº§è¯­ä¹‰æœç´¢ã€‚ç”¨æˆ·æé—®å‘é‡åŒ–åï¼Œé€šè¿‡åˆ†å±‚å¯¼èˆªå¿«é€Ÿå®šä½ç›¸å…³æ–‡æœ¬å—ï¼Œæ˜¾è‘—æå‡å¤§æ¨¡å‹å›ç­”è´¨é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IVF-Flat åœ¨å›¾åƒæ£€ç´¢ä¸­çš„å®è·µ&lt;/strong&gt;
ç™¾ä¸‡çº§å•†å“å›¾ç‰‡åº“ä½¿ç”¨ IVF-Flat ç´¢å¼•ï¼Œä»¥ &lt;code&gt;nlist=1000&lt;/code&gt; åˆ’åˆ†èšç±»ã€‚ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡åï¼Œä»…éœ€æ‰«ææœ€è¿‘3ä¸ªç°‡ï¼ˆ&lt;code&gt;probes=3&lt;/code&gt;ï¼‰ï¼Œå³å¯åœ¨50mså†…è¿”å›ç›¸ä¼¼å•†å“ï¼Œå…¼é¡¾æ•ˆç‡ä¸æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="äº”è¿›é˜¶è°ƒä¼˜ç­–ç•¥"&gt;äº”ã€è¿›é˜¶è°ƒä¼˜ç­–ç•¥
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;HNSW å‚æ•°ä¼˜åŒ–&lt;/strong&gt;ï¼š
å¤§æ•°æ®é›†å»ºè®® &lt;code&gt;M=16~32&lt;/code&gt;, &lt;code&gt;efConstruction=200~400&lt;/code&gt;ï¼Œæœç´¢æ—¶ &lt;code&gt;efSearch=50~100&lt;/code&gt; å¹³è¡¡é€Ÿåº¦ä¸å¬å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IVF-Flat å‚æ•°ä¼˜åŒ–&lt;/strong&gt;ï¼š
è‹¥å¬å›ä¸è¶³ï¼Œé€æ­¥å¢åŠ  &lt;code&gt;probes&lt;/code&gt;ï¼ˆä¸è¶…è¿‡ &lt;code&gt;nlist&lt;/code&gt; çš„10%ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆç´¢å¼•æ–¹æ¡ˆ&lt;/strong&gt;ï¼ˆå¦‚ Milvusï¼‰ï¼š
å…ˆç”¨ IVF ç²—ç­›ï¼ˆ&lt;code&gt;probes=5&lt;/code&gt;ï¼‰å‡å°‘å€™é€‰é›†ï¼Œå†ç”¨ HNSW ç²¾æœï¼Œç»¼åˆäºŒè€…ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼šHNSW ä»¥å†…å­˜æ¢é€Ÿåº¦ä¸ç²¾åº¦ï¼Œé€‚åˆå¤§è§„æ¨¡åŠ¨æ€æ•°æ®ï¼›IVF-Flat ä»¥ç²¾åº¦æ¢å†…å­˜ä¸æ„å»ºé€Ÿåº¦ï¼Œé€‚åˆä¸­å°è§„æ¨¡é™æ€æ•°æ®ã€‚å®é™…é€‰å‹éœ€ç»“åˆæ•°æ®è§„æ¨¡ã€æ›´æ–°é¢‘ç‡ã€ç¡¬ä»¶èµ„æºç»¼åˆå†³ç­–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="fastjson"&gt;FastJson
&lt;/h2&gt;&lt;p&gt;Milvus ä¾èµ– FastJSON ä½†ä¸ä¼šè‡ªåŠ¨å¯¼å…¥è¯¥ä¾èµ–ï¼Œè¿™ä¸»è¦æºäºå…¶ä¾èµ–ç®¡ç†ç­–ç•¥ã€ç‰ˆæœ¬å…¼å®¹æ€§è®¾è®¡åŠ Java ç”Ÿæ€çš„é€šç”¨è§„èŒƒã€‚ä»¥ä¸‹æ˜¯å…·ä½“åŸå› åŠæŠ€æœ¯è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-1-ä¾èµ–ä½œç”¨åŸŸscopeè®¾è®¡"&gt;ğŸ”§ 1. &lt;strong&gt;ä¾èµ–ä½œç”¨åŸŸï¼ˆScopeï¼‰è®¾è®¡&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ˜¾å¼ä¾èµ–åŸåˆ™&lt;/strong&gt;
Milvus SDK æˆ–ç›¸å…³æ¨¡å—ï¼ˆå¦‚ &lt;code&gt;spring-ai-milvus-store&lt;/code&gt;ï¼‰åœ¨è®¾è®¡æ—¶é€šå¸¸å°† FastJSON æ ‡è®°ä¸º â€‹**&lt;code&gt;provided&lt;/code&gt; ä½œç”¨åŸŸ&lt;strong&gt;â€‹ï¼ˆMavenï¼‰æˆ– â€‹&lt;/strong&gt;&lt;code&gt;compileOnly&lt;/code&gt;**â€‹ï¼ˆGradleï¼‰ã€‚è¿™æ„å‘³ç€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FastJSON æ˜¯&lt;strong&gt;è¿è¡Œæ—¶å¿…éœ€&lt;/strong&gt;çš„ï¼Œä½† SDK &lt;strong&gt;ä¸å¼ºåˆ¶ç»‘å®šå…¶ç‰ˆæœ¬&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·éœ€æ ¹æ®è‡ªèº«é¡¹ç›®ç¯å¢ƒ&lt;strong&gt;æ˜¾å¼å¼•å…¥ FastJSON&lt;/strong&gt;ï¼Œä»¥é¿å…ç‰ˆæœ¬å†²çªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;!-- Maven ç¤ºä¾‹ï¼šMilvus SDK å¯èƒ½éšå«çš„ä¾èµ–å£°æ˜ --&amp;gt;
&amp;lt;dependency&amp;gt;
&amp;lt;groupId&amp;gt;com.alibaba&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;fastjson&amp;lt;/artifactId&amp;gt;
&amp;lt;version&amp;gt;[ç”¨æˆ·è‡ªå®š]&amp;lt;/version&amp;gt;
&amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt; &amp;lt;!-- ä¸è‡ªåŠ¨ä¼ é€’ä¾èµ– --&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é¿å…ä¾èµ–åœ°ç‹±&lt;/strong&gt;
FastJSON çš„ç‰ˆæœ¬æ›´æ–°é¢‘ç¹ä¸”å­˜åœ¨å®‰å…¨é£é™©ï¼ˆå¦‚ååºåˆ—åŒ–æ¼æ´ï¼‰ã€‚è‹¥ Milvus å¼ºåˆ¶ç»‘å®šç‰¹å®šç‰ˆæœ¬ï¼Œå¯èƒ½å¯¼è‡´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·é¡¹ç›®ä¸­çš„å…¶ä»–åº“å› ç‰ˆæœ¬å†²çªè€Œå¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;å®‰å…¨æ¼æ´æ— æ³•é€šè¿‡å‡çº§ FastJSON ç‹¬ç«‹ä¿®å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-2-æ¨¡å—åŒ–ä¸è½»é‡åŒ–è€ƒé‡"&gt;âš™ï¸ 2. &lt;strong&gt;æ¨¡å—åŒ–ä¸è½»é‡åŒ–è€ƒé‡&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘ SDK ä½“ç§¯&lt;/strong&gt;
Milvus SDK æ ¸å¿ƒåŠŸèƒ½èšç„¦äºå‘é‡æ“ä½œå’Œæ•°æ®åº“è¿æ¥ï¼Œè‹¥æ‰“åŒ… FastJSON ä¼šå¢å¤§åˆ†å‘ä½“ç§¯ã€‚ç”¨æˆ·å¯é€‰æ‹©æ›´å°çš„æ›¿ä»£åº“ï¼ˆå¦‚ Jacksonï¼‰æˆ–æŒ‰éœ€å¼•å…¥ FastJSONã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»é€‚é… JSON åº“&lt;/strong&gt;
éƒ¨åˆ†ä¼ä¸šå·²æ ‡å‡†åŒ– JSON åº“ï¼ˆå¦‚ Spring Boot é»˜è®¤ä½¿ç”¨ Jacksonï¼‰ã€‚Milvus ä¸å¼ºåˆ¶ä¾èµ– FastJSON å…è®¸ç”¨æˆ·æ— ç¼é›†æˆç°æœ‰æŠ€æœ¯æ ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-3-å®‰å…¨ä¸ç‰ˆæœ¬å…¼å®¹æ€§"&gt;ğŸ›¡ï¸ 3. &lt;strong&gt;å®‰å…¨ä¸ç‰ˆæœ¬å…¼å®¹æ€§&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è§„é¿é«˜å±ç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;FastJSON æ—§ç‰ˆæœ¬ï¼ˆå¦‚ â‰¤1.2.68ï¼‰å­˜åœ¨ä¸¥é‡æ¼æ´ï¼ˆå¦‚ CVE-2017-18349ï¼‰ã€‚Milvus é€šè¿‡&lt;/p&gt;
&lt;p&gt;ä¸è‡ªåŠ¨å¼•å…¥&lt;/p&gt;
&lt;p&gt;çš„æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¿ƒä½¿ç”¨æˆ·ä¸»åŠ¨é€‰æ‹©&lt;strong&gt;å®‰å…¨ç‰ˆæœ¬&lt;/strong&gt;ï¼ˆå¦‚ â‰¥2.0.47ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¿å…å›  SDK å†…ç½®æ—§ç‰ˆæœ¬å¯¼è‡´å®‰å…¨é£é™©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰ˆæœ¬å…¼å®¹æ€§æŒ‘æˆ˜&lt;/strong&gt;
Milvus çš„ JSON åºåˆ—åŒ–é€»è¾‘å¯èƒ½ä¾èµ– FastJSON ç‰¹å®š APIï¼ˆå¦‚ &lt;code&gt;JSONWriter.Feature&lt;/code&gt;ï¼‰ã€‚è‹¥è‡ªåŠ¨ç»‘å®šç‰ˆæœ¬ï¼Œç”¨æˆ·å‡çº§ SDK æ—¶å¯èƒ½å›  API å˜æ›´è€Œå´©æºƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-4-æ„å»ºå·¥å…·çš„é™åˆ¶"&gt;ğŸ”„ 4. &lt;strong&gt;æ„å»ºå·¥å…·çš„é™åˆ¶&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Maven/Gradle çš„ä¾èµ–ä¼ é€’æœºåˆ¶&lt;/p&gt;
&lt;p&gt;å³ä½¿ Milvus SDK å£°æ˜äº† FastJSON ä¾èµ–ï¼Œè‹¥å…¶ä½œç”¨åŸŸä¸º&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;provided
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;compileOnly
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ï¼Œæ„å»ºå·¥å…·&lt;/p&gt;
&lt;p&gt;ä¸ä¼šå°†å…¶æ‰“åŒ…åˆ°æœ€ç»ˆåº”ç”¨&lt;/p&gt;
&lt;p&gt;ä¸­ã€‚ç”¨æˆ·éœ€åœ¨é¡¹ç›®ä¸­æ˜¾å¼æ·»åŠ ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// Gradle ç¤ºä¾‹
implementation &amp;#39;com.alibaba:fastjson:2.0.47&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°ä»“åº“ç¼“å­˜é—®é¢˜&lt;/strong&gt;
è‹¥ç”¨æˆ·æœ¬åœ° Maven ä»“åº“ï¼ˆ&lt;code&gt;~/.m2/repository&lt;/code&gt;ï¼‰ç¼ºå¤± FastJSONï¼Œå³ä½¿ SDK å£°æ˜ä¾èµ–ï¼Œæ„å»ºæ—¶ä»ä¼šæŠ¥é”™ &lt;code&gt;NoClassDefFoundError&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“milvus-çš„è®¾è®¡é€»è¾‘ä¸ç”¨æˆ·åº”å¯¹"&gt;ğŸ’ æ€»ç»“ï¼šMilvus çš„è®¾è®¡é€»è¾‘ä¸ç”¨æˆ·åº”å¯¹
&lt;/h3&gt;&lt;p&gt;Milvus ä¸è‡ªåŠ¨å¯¼å…¥ FastJSON æ˜¯&lt;strong&gt;æƒè¡¡çµæ´»æ€§ã€å®‰å…¨æ€§å’Œå…¼å®¹æ€§&lt;/strong&gt;çš„ç»“æœã€‚å¼€å‘è€…éœ€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ˜¾å¼æ·»åŠ ä¾èµ–&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;pom.xml&lt;/code&gt; æˆ– &lt;code&gt;build.gradle&lt;/code&gt; ä¸­å¼•å…¥ FastJSONã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”å®šå®‰å…¨ç‰ˆæœ¬&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨ â‰¥2.0.47 çš„ FastJSON2ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éªŒè¯ä¾èµ–æ ‘&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;mvn dependency:tree&lt;/code&gt; æ£€æŸ¥ç‰ˆæœ¬å†²çªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›¿ä»£æ–¹æ¡ˆ&lt;/strong&gt;ï¼šè‹¥éœ€æ¢ç”¨ Jacksonï¼Œéœ€é‡å†™ Milvus çš„åºåˆ—åŒ–é€‚é…å±‚ï¼ˆéœ€ä¿®æ”¹æºç ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;graph TD
A[Milvus ä¾èµ– FastJSON] --&amp;gt; B{æ˜¯å¦è‡ªåŠ¨å¯¼å…¥ï¼Ÿ}
B --&amp;gt;|å¦| C[åŸå› 1ï¼šä½œç”¨åŸŸè®¾ä¸º provided]
B --&amp;gt;|å¦| D[åŸå› 2ï¼šé¿å…ç‰ˆæœ¬å†²çª]
B --&amp;gt;|å¦| E[åŸå› 3ï¼šå®‰å…¨é£é™©è§„é¿]
C --&amp;gt; F[ç”¨æˆ·éœ€æ˜¾å¼æ·»åŠ ä¾èµ–]
D --&amp;gt; F
E --&amp;gt; F
F --&amp;gt; G[é¡¹ç›®æ„å»ºæˆåŠŸ]
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="æ ‡é‡é»˜è®¤ç´¢å¼•"&gt;æ ‡é‡é»˜è®¤ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;åœ¨ Milvus ä¸­ï¼Œæ ‡é‡å­—æ®µï¼ˆéå‘é‡å­—æ®µï¼‰çš„&lt;strong&gt;é»˜è®¤ç´¢å¼•ç­–ç•¥æ˜¯è‡ªåŠ¨ç´¢å¼•ï¼ˆAuto Indexï¼‰&lt;/strong&gt;ï¼Œç³»ç»Ÿä¼šæ ¹æ®æ ‡é‡å­—æ®µçš„æ•°æ®ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„ç´¢å¼•ç±»å‹ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®šã€‚è¿™ä¸€ç­–ç•¥æ—¨åœ¨ç®€åŒ–é…ç½®å¹¶é€‚é…å¸¸è§æŸ¥è¯¢åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯å…·ä½“è§„åˆ™å’Œç»†èŠ‚ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€é»˜è®¤ç´¢å¼•ç­–ç•¥è‡ªåŠ¨ç´¢å¼•auto-index"&gt;ğŸ“Œ ä¸€ã€é»˜è®¤ç´¢å¼•ç­–ç•¥ï¼šè‡ªåŠ¨ç´¢å¼•ï¼ˆAuto Indexï¼‰
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;
å½“åˆ›å»ºç´¢å¼•æ—¶&lt;strong&gt;ä¸æŒ‡å®š &lt;code&gt;index_type&lt;/code&gt; å‚æ•°&lt;/strong&gt;æˆ–å°†å…¶ç•™ç©ºï¼ŒMilvus ä¼šå¯ç”¨è‡ªåŠ¨ç´¢å¼•æœºåˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ç±»å‹ä¸ç´¢å¼•ç±»å‹çš„æ˜ å°„&lt;/strong&gt;
Milvus æ ¹æ®å­—æ®µæ•°æ®ç±»å‹è‡ªåŠ¨é€‰æ‹©ç´¢å¼•ç®—æ³•ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ ‡é‡å­—æ®µæ•°æ®ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è‡ªåŠ¨é€‰æ‹©çš„ç´¢å¼•ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;VARCHAR&lt;/code&gt;ï¼ˆå­—ç¬¦ä¸²ï¼‰&lt;/td&gt;
&lt;td&gt;å€’æ’ç´¢å¼•ï¼ˆInvertedï¼‰&lt;/td&gt;
&lt;td&gt;ç­‰å€¼æŸ¥è¯¢ã€å‰ç¼€åŒ¹é…ã€èŒƒå›´æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;INT8/16/32/64&lt;/code&gt;ï¼ˆæ•´æ•°ç±»å‹ï¼‰&lt;/td&gt;
&lt;td&gt;å€’æ’ç´¢å¼•ï¼ˆInvertedï¼‰&lt;/td&gt;
&lt;td&gt;ç²¾ç¡®åŒ¹é…ã€èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;id &amp;gt; 100&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;FLOAT/DOUBLE&lt;/code&gt;ï¼ˆæµ®ç‚¹æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;å€’æ’ç´¢å¼•ï¼ˆInvertedï¼‰&lt;/td&gt;
&lt;td&gt;èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;price BETWEEN 10.0 AND 50.0&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;BOOL&lt;/code&gt;ï¼ˆå¸ƒå°”å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;å€’æ’ç´¢å¼•ï¼ˆInvertedï¼‰&lt;/td&gt;
&lt;td&gt;å¸ƒå°”æ¡ä»¶è¿‡æ»¤ï¼ˆå¦‚ &lt;code&gt;status = True&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ARRAY&lt;/code&gt;ï¼ˆæ•°ç»„ï¼‰&lt;/td&gt;
&lt;td&gt;å€’æ’ç´¢å¼•ï¼ˆInvertedï¼‰&lt;/td&gt;
&lt;td&gt;æ•°ç»„å…ƒç´ çš„ç­‰å€¼æˆ–åŒ…å«æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼šå€’æ’ç´¢å¼•é€šè¿‡æ„å»ºâ€œæœ¯è¯­å­—å…¸+å€’æ’åˆ—è¡¨â€åŠ é€ŸæŸ¥è¯¢ï¼Œå°¤å…¶é€‚åˆç‚¹æŸ¥è¯¢å’ŒèŒƒå›´è¿‡æ»¤ï¼Œæ€§èƒ½æ¯”æš´åŠ›æœç´¢æå‡æ˜¾è‘—ï¼ˆå®éªŒæ˜¾ç¤ºç‚¹æŸ¥è¯¢å¿«30å€ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒæ³¨æ„äº‹é¡¹"&gt;âš ï¸ äºŒã€æ³¨æ„äº‹é¡¹
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ”¯æŒçš„æ•°æ®ç±»å‹&lt;/strong&gt;
&lt;code&gt;JSON&lt;/code&gt; ç±»å‹&lt;strong&gt;æ— æ³•åˆ›å»ºæ ‡é‡ç´¢å¼•&lt;/strong&gt;ï¼Œéœ€é€šè¿‡å…¶ä»–æ–¹å¼å¤„ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯ä¸ªå­—æ®µä»…æ”¯æŒä¸€ä¸ªç´¢å¼•&lt;/strong&gt;
è‹¥éœ€æ›´æ¢ç´¢å¼•ç±»å‹ï¼ˆå¦‚æ”¹ç”¨ &lt;code&gt;BITMAP&lt;/code&gt; æˆ– &lt;code&gt;TRIE&lt;/code&gt;ï¼‰ï¼Œéœ€å…ˆåˆ é™¤ç°æœ‰ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨ç´¢å¼•çš„å±€é™æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è™½ç®€åŒ–é…ç½®ï¼Œä½†ç‰¹å®šåœºæ™¯éœ€æ‰‹åŠ¨ä¼˜åŒ–ï¼š
&lt;ul&gt;
&lt;li&gt;ä½åŸºæ•°ï¼ˆCardinality &amp;lt; 500ï¼‰å­—æ®µ â†’ æ”¹ç”¨ &lt;code&gt;BITMAP&lt;/code&gt; ç´¢å¼•æå‡ç­‰å€¼æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;å­—ç¬¦ä¸²å‰ç¼€æœç´¢ â†’ æ‰‹åŠ¨æŒ‡å®š &lt;code&gt;TRIE&lt;/code&gt; ç´¢å¼•æ›´é«˜æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æµ®ç‚¹å­—æ®µä¸æ”¯æŒ &lt;code&gt;BITMAP&lt;/code&gt; ç´¢å¼•ï¼ˆå› äºŒè¿›åˆ¶ä¸å…¼å®¹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰æ€»ç»“"&gt;ğŸ’ ä¸‰ã€æ€»ç»“
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é»˜è®¤ç­–ç•¥&lt;/strong&gt;ï¼š&lt;code&gt;Auto Index&lt;/code&gt; â†’ æŒ‰æ•°æ®ç±»å‹è‡ªåŠ¨é€‰æ‹© &lt;strong&gt;å€’æ’ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä¼˜åŠ¿&lt;/strong&gt;ï¼šé™ä½é…ç½®å¤æ‚åº¦ï¼Œé€‚é…å¤šæ•°åœºæ™¯ï¼ˆå°¤å…¶æ–‡æœ¬ã€æ•°å€¼çš„è¿‡æ»¤æŸ¥è¯¢ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨ä¼˜åŒ–åœºæ™¯&lt;/strong&gt;ï¼šä½åŸºæ•°å­—æ®µã€å­—ç¬¦ä¸²å‰ç¼€åŒ¹é…ã€è¶…é«˜åŸºæ•°ï¼ˆ&amp;gt;500ï¼‰å­—æ®µéœ€è‡ªå®šä¹‰ç´¢å¼•ç±»å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å»ºè®®é€šè¿‡ &lt;code&gt;list_indexes()&lt;/code&gt; éªŒè¯ç´¢å¼•åˆ›å»ºç»“æœï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# æŸ¥çœ‹é›†åˆå…¨éƒ¨ç´¢å¼•
indexes = client.list_indexes(collection_name=&amp;#34;your_collection&amp;#34;)
print(indexes) # è¾“å‡ºç¤ºä¾‹ï¼š[&amp;#39;default_index&amp;#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="æ ‡é‡ç´¢å¼•"&gt;æ ‡é‡ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;Milvus ä¸ºæ ‡é‡å­—æ®µï¼ˆå¦‚æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰éå‘é‡æ•°æ®ï¼‰æä¾›äº†å¤šç§ç´¢å¼•ç±»å‹ï¼Œç”¨äºåŠ é€Ÿæ ‡é‡è¿‡æ»¤å’ŒæŸ¥è¯¢æ“ä½œã€‚ä»¥ä¸‹æ˜¯å…¶æ”¯æŒçš„ &lt;strong&gt;5 ç§æ ‡é‡ç´¢å¼•æ–¹å¼&lt;/strong&gt;åŠå…¶æ ¸å¿ƒç‰¹ç‚¹ä¸é€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-1-è‡ªåŠ¨ç´¢å¼•auto-index"&gt;ğŸ” 1. &lt;strong&gt;è‡ªåŠ¨ç´¢å¼•ï¼ˆAuto Indexï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š
Milvus æ ¹æ®å­—æ®µæ•°æ®ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç´¢å¼•ç±»å‹ï¼Œæ— éœ€ç”¨æˆ·æŒ‡å®šï¼Œç®€åŒ–é…ç½®æµç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šç”¨å‹å­—æ®µï¼ˆå¦‚æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¿«é€ŸåŸå‹éªŒè¯æˆ–å¯¹ç´¢å¼•ç±»å‹æ— ç‰¹æ®Šè¦æ±‚çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ç±»å‹æ”¯æŒ&lt;/strong&gt;ï¼š
&lt;code&gt;INT8/16/32/64&lt;/code&gt;ã€&lt;code&gt;FLOAT/DOUBLE&lt;/code&gt;ã€&lt;code&gt;BOOL&lt;/code&gt;ã€&lt;code&gt;VARCHAR&lt;/code&gt;ã€&lt;code&gt;ARRAY&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-2-å€’æ’ç´¢å¼•inverted-index"&gt;ğŸ”¢ 2. &lt;strong&gt;å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š
é€šè¿‡â€œæœ¯è¯­å­—å…¸+å€’æ’åˆ—è¡¨â€ç»“æ„ï¼Œé«˜æ•ˆæ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼ˆ&lt;code&gt;category == 1&lt;/code&gt;ï¼‰å’ŒèŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;code&gt;price &amp;gt; 50.0&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é«˜é¢‘è¿‡æ»¤å­—æ®µï¼ˆå¦‚åˆ†ç±»æ ‡ç­¾ã€ç”¨æˆ·è¯„åˆ†ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é«˜åŸºæ•°ï¼ˆä¸åŒå€¼æ•°é‡å¤šï¼‰æˆ–æ··åˆæŸ¥è¯¢éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ç±»å‹æ”¯æŒ&lt;/strong&gt;ï¼š
æ‰€æœ‰æ ‡é‡ç±»å‹ï¼ˆé™¤ &lt;code&gt;JSON&lt;/code&gt; å¤–ï¼‰ï¼ŒåŒ…æ‹¬æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼å’Œæ•°ç»„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-3-ä½å›¾ç´¢å¼•bitmap"&gt;ğŸ§© 3. &lt;strong&gt;ä½å›¾ç´¢å¼•ï¼ˆBitmapï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š
ä¸ºæ¯ä¸ªå”¯ä¸€å€¼ç”ŸæˆäºŒè¿›åˆ¶ä½å›¾ï¼Œé€šè¿‡ä½è¿ç®—ï¼ˆå¦‚ &lt;code&gt;AND/OR&lt;/code&gt;ï¼‰å¿«é€Ÿåˆå¹¶å¤šæ¡ä»¶æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½åŸºæ•°å­—æ®µ&lt;/strong&gt;ï¼ˆå¦‚æ€§åˆ«ã€çŠ¶æ€æ ‡å¿—ï¼‰ï¼ŒåŸºæ•°å»ºè®® &lt;strong&gt;&amp;lt; 500&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;status=True AND category=&amp;quot;A&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é™åˆ¶&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸æ”¯æŒæµ®ç‚¹ç±»å‹ï¼ˆ&lt;code&gt;FLOAT/DOUBLE&lt;/code&gt;ï¼‰å’Œ &lt;code&gt;JSON&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é«˜åŸºæ•°å­—æ®µä¼šå¯¼è‡´å­˜å‚¨å¼€é”€æ¿€å¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-4-å‰ç¼€æ ‘ç´¢å¼•trie"&gt;ğŸ”¤ 4. &lt;strong&gt;å‰ç¼€æ ‘ç´¢å¼•ï¼ˆTrieï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š
åŸºäºæ ‘å½¢ç»“æ„ä¼˜åŒ–å­—ç¬¦ä¸²å‰ç¼€åŒ¹é…ï¼ˆå¦‚ &lt;code&gt;name LIKE &amp;quot;apple%&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;VARCHAR&lt;/code&gt; å­—æ®µçš„å‰ç¼€æœç´¢æˆ–ç²¾ç¡®åŒ¹é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–‡æœ¬æ ‡ç­¾ã€äº§å“åç§°ç­‰å­—ç¬¦ä¸²ç±»ç›®è¿‡æ»¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™åˆ¶&lt;/strong&gt;ï¼š
ä¸æ”¯æŒæ•°å€¼èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚ &lt;code&gt;price &amp;gt; 100&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-5-stl_"&gt;ğŸ“Š 5. &lt;strong&gt;STL_SORT ç´¢å¼•&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼š
åˆ©ç”¨æ’åºç®—æ³•ä¼˜åŒ–æ•°å€¼å­—æ®µçš„èŒƒå›´æŸ¥è¯¢å’Œæ’åºæ“ä½œï¼ˆå¦‚ &lt;code&gt;ORDER BY timestamp&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ•°å€¼å­—æ®µçš„èŒƒå›´è¿‡æ»¤ï¼ˆå¦‚æ—¶é—´æˆ³ã€ä»·æ ¼åŒºé—´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éœ€è¦æ’åºç»“æœçš„æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ç±»å‹æ”¯æŒ&lt;/strong&gt;ï¼š
&lt;code&gt;BOOL&lt;/code&gt;ã€&lt;code&gt;INT8/16/32/64&lt;/code&gt;ã€&lt;code&gt;FLOAT&lt;/code&gt;ã€&lt;code&gt;DOUBLE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç´¢å¼•é€‰æ‹©ä¸ä½¿ç”¨å»ºè®®"&gt;âš™ï¸ &lt;strong&gt;ç´¢å¼•é€‰æ‹©ä¸ä½¿ç”¨å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç´¢å¼•ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹æŸ¥è¯¢åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŸºæ•°è¦æ±‚&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;è‡ªåŠ¨ç´¢å¼•ï¼ˆAutoï¼‰&lt;/td&gt;
&lt;td&gt;é€šç”¨ç±»å‹&lt;/td&gt;
&lt;td&gt;å¿«é€Ÿéƒ¨ç½²ï¼Œæ— ç‰¹æ®Šä¼˜åŒ–éœ€æ±‚&lt;/td&gt;
&lt;td&gt;ä»»æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å€’æ’ç´¢å¼•ï¼ˆInvertedï¼‰&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰æ ‡é‡ï¼ˆé™¤ &lt;code&gt;JSON&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;ç­‰å€¼/èŒƒå›´æ··åˆæŸ¥è¯¢&lt;/td&gt;
&lt;td&gt;é«˜/ä½åŸºæ•°å‡å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä½å›¾ç´¢å¼•ï¼ˆBitmapï¼‰&lt;/td&gt;
&lt;td&gt;æ•´æ•°ã€å¸ƒå°”ã€çŸ­å­—ç¬¦ä¸²&lt;/td&gt;
&lt;td&gt;å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;ä½åŸºæ•°ï¼ˆ&amp;lt;500ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å‰ç¼€æ ‘ï¼ˆTrieï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;VARCHAR&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å‰ç¼€åŒ¹é…ï¼ˆ&lt;code&gt;LIKE &amp;quot;prefix%&amp;quot;&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸­ä½åŸºæ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STL_SORT&lt;/td&gt;
&lt;td&gt;æ•°å€¼ç±»å‹&lt;/td&gt;
&lt;td&gt;èŒƒå›´æŸ¥è¯¢/æ’åº&lt;/td&gt;
&lt;td&gt;ä»»æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç‰¹æ®Šé™åˆ¶&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;JSON&lt;/code&gt; ç±»å‹ä»…æ”¯æŒå€’æ’ç´¢å¼•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½å›¾ç´¢å¼•ä¸æ”¯æŒæµ®ç‚¹æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ“ä½œå»ºè®®&lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;list_indexes()&lt;/code&gt; éªŒè¯ç´¢å¼•æ˜¯å¦åˆ›å»ºæˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå­—æ®µä»…æ”¯æŒä¸€ä¸ªç´¢å¼•ï¼Œæ›´æ¢ç±»å‹éœ€å…ˆåˆ é™¤æ—§ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Milvus çš„æ ‡é‡ç´¢å¼•ç­–ç•¥è¦†ç›–äº†ä»è‡ªåŠ¨åŒ–é…ç½®ï¼ˆAuto Indexï¼‰åˆ°é’ˆå¯¹ç‰¹å®šåœºæ™¯ï¼ˆå¦‚å­—ç¬¦ä¸²å‰ç¼€ã€ä½åŸºæ•°æšä¸¾ã€æ•°å€¼æ’åºï¼‰çš„ä¸“é¡¹ä¼˜åŒ–ã€‚&lt;strong&gt;å€’æ’ç´¢å¼•æ˜¯é»˜è®¤ä¸”æœ€é€šç”¨çš„é€‰æ‹©&lt;/strong&gt;ï¼Œè€Œä½å›¾ç´¢å¼•åœ¨ä½åŸºæ•°å¤šæ¡ä»¶æŸ¥è¯¢ä¸­æ€§èƒ½æœ€ä¼˜ã€‚å®é™…åº”ç”¨ä¸­éœ€ç»“åˆå­—æ®µæ•°æ®ç±»å‹ã€åŸºæ•°åˆ†å¸ƒåŠæŸ¥è¯¢æ¨¡å¼ç»¼åˆé€‰æ‹©ï¼Œå¿…è¦æ—¶å¯é€šè¿‡ &lt;code&gt;list_indexes()&lt;/code&gt; æ¥å£éªŒè¯ç´¢å¼•çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h2 id="ç´¢å¼•ç‰©ç†ç»“æ„"&gt;ç´¢å¼•ç‰©ç†ç»“æ„
&lt;/h2&gt;&lt;p&gt;Milvus çš„ç´¢å¼•åº•å±‚ç‰©ç†ç»“æ„å› ç´¢å¼•ç±»å‹å’Œç›®æ ‡æ•°æ®ç±»å‹ï¼ˆå‘é‡æˆ–æ ‡é‡ï¼‰è€Œå¼‚ï¼Œå…¶è®¾è®¡æ ¸å¿ƒåœ¨äºé«˜æ•ˆæ”¯æŒç›¸ä¼¼æ€§æœç´¢å’Œæ ‡é‡è¿‡æ»¤ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦ç´¢å¼•ç±»å‹çš„åº•å±‚ç‰©ç†ç»“æ„è¯¦è§£ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€å‘é‡ç´¢å¼•çš„ç‰©ç†ç»“æ„"&gt;âš™ï¸ &lt;strong&gt;ä¸€ã€å‘é‡ç´¢å¼•çš„ç‰©ç†ç»“æ„&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;å‘é‡ç´¢å¼•ä¸»è¦ç”¨äºåŠ é€Ÿé«˜ç»´å‘é‡çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆANNï¼‰ï¼Œå…¶ç‰©ç†ç»“æ„å–å†³äºå…·ä½“ç®—æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;HNSWï¼ˆåˆ†å±‚å¯¼èˆªå°ä¸–ç•Œå›¾ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šå¤šå±‚å›¾ç»“æ„ï¼ˆHierarchical Graphï¼‰ã€‚
- åº•å±‚ï¼ˆç¬¬0å±‚ï¼‰åŒ…å«å…¨é‡æ•°æ®ç‚¹ï¼Œè¿æ¥å¯†é›†ï¼›
- ä¸Šå±‚ï¼ˆç¬¬1å±‚åŠä»¥ä¸Šï¼‰é€æ­¥ç¨€ç–åŒ–ï¼ŒèŠ‚ç‚¹é—´è¿æ¥è·ç¦»é€’å¢ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt; å…³é”®å‚æ•°
ï¼š
- `M`ï¼šæ¯å±‚èŠ‚ç‚¹çš„æœ€å¤§è¿æ¥æ•°ï¼ˆå½±å“å›¾å¯†åº¦å’Œç²¾åº¦ï¼‰ï¼›
- `efConstruction`ï¼šæ„å»ºæ—¶çš„æœç´¢èŒƒå›´ï¼ˆå½±å“ç´¢å¼•è´¨é‡ï¼‰ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé«˜ç²¾åº¦æœç´¢ï¼Œå†…å­˜èµ„æºå……è¶³ï¼ˆå¦‚ç™¾ä¸‡çº§æ•°æ®é›†ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;IVF ç³»åˆ—ï¼ˆå€’æ’æ–‡ä»¶ç´¢å¼•ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šåŸºäºèšç±»çš„å€’æ’åˆ—è¡¨ï¼ˆInverted Listsï¼‰ã€‚
- æ•°æ®è¢«åˆ’åˆ†ä¸º `nlist` ä¸ªèšç±»ä¸­å¿ƒï¼ˆè´¨å¿ƒï¼‰ï¼›
- æ¯ä¸ªèšç±»å¯¹åº”ä¸€ä¸ªå€’æ’åˆ—è¡¨ï¼Œå­˜å‚¨å±äºè¯¥ç°‡çš„å‘é‡IDåŠåŸå§‹å‘é‡æˆ–é‡åŒ–åçš„å€¼ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt; å­ç±»å‹å·®å¼‚
ï¼š
- **IVF_FLAT**ï¼šå­˜å‚¨åŸå§‹å‘é‡ï¼Œæ— å‹ç¼©ï¼›
- **IVF_SQ8**ï¼šæ ‡é‡é‡åŒ–ï¼ˆScalar Quantizationï¼‰ï¼Œå°†æµ®ç‚¹æ•°å‹ç¼©ä¸º8ä½æ•´æ•°ï¼›
- **IVF_PQ**ï¼šä¹˜ç§¯é‡åŒ–ï¼ˆProduct Quantizationï¼‰ï¼Œå‘é‡åˆ†æ®µå‹ç¼©ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢æµç¨‹&lt;/strong&gt;ï¼šå…ˆå®šä½æœ€è¿‘è´¨å¿ƒï¼Œå†æ‰«æå¯¹åº”å€’æ’åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;FLATï¼ˆæš´åŠ›æœç´¢ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç»“æ„&lt;/strong&gt;ï¼šåŸå§‹å‘é‡è¿ç»­æ•°ç»„ï¼ˆFlat Arrayï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ— é¢å¤–æ•°æ®ç»“æ„ï¼Œç›´æ¥è®¡ç®—æŸ¥è¯¢å‘é‡ä¸å…¨é‡æ•°æ®çš„è·ç¦»ï¼Œé€‚ç”¨äºæå°æ•°æ®é›†ï¼ˆâ‰¤1ä¸‡æ¡ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¨€ç–å‘é‡ç´¢å¼•ï¼ˆSPARSE_INVERTED_INDEXï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šç»´åº¦çº§å€’æ’åˆ—è¡¨ï¼ˆDimension-wise Inverted Listsï¼‰ã€‚
- æ¯ä¸ªç»´åº¦ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•åœ¨è¯¥ç»´åº¦éé›¶çš„å‘é‡IDåŠå€¼ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;drop_ratio&lt;/code&gt; å‚æ•°å¿½ç•¥ä½æƒé‡å€¼ï¼Œå¹³è¡¡ç²¾åº¦ä¸é€Ÿåº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒæ ‡é‡ç´¢å¼•çš„ç‰©ç†ç»“æ„"&gt;ğŸ”¢ &lt;strong&gt;äºŒã€æ ‡é‡ç´¢å¼•çš„ç‰©ç†ç»“æ„&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;æ ‡é‡ç´¢å¼•ç”¨äºåŠ é€Ÿç»“æ„åŒ–å­—æ®µï¼ˆå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ï¼‰çš„è¿‡æ»¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å€’æ’ç´¢å¼•ï¼ˆINVERTEDï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šè¯é¡¹å­—å…¸ï¼ˆTerm Dictionaryï¼‰+ å€’æ’åˆ—è¡¨ï¼ˆPosting Listsï¼‰ã€‚
- å­—å…¸å­˜å‚¨å”¯ä¸€å€¼ï¼ˆå¦‚ `category=&amp;quot;A&amp;quot;`ï¼‰ï¼›
- å€’æ’åˆ—è¡¨å­˜å‚¨åŒ…å«è¯¥å€¼çš„æ–‡æ¡£IDé›†åˆã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨&lt;/strong&gt;ï¼šç­‰å€¼æŸ¥è¯¢ï¼ˆ&lt;code&gt;age=30&lt;/code&gt;ï¼‰ã€èŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;code&gt;price&amp;gt;100&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½å›¾ç´¢å¼•ï¼ˆBITMAPï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šä½å‘é‡æ•°ç»„ï¼ˆBit Vector Arraysï¼‰ã€‚
- æ¯ä¸ªå”¯ä¸€å€¼å¯¹åº”ä¸€ä¸ªä½å‘é‡ï¼Œæ ‡è®°åŒ…å«è¯¥å€¼çš„è¡Œï¼ˆå¦‚ `[1,0,1]` è¡¨ç¤ºç¬¬0ã€2è¡Œæ»¡è¶³æ¡ä»¶ï¼‰ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šæ”¯æŒå¤šæ¡ä»¶ä½è¿ç®—ï¼ˆAND/ORï¼‰ï¼Œé€‚åˆä½åŸºæ•°å­—æ®µï¼ˆå¦‚æ€§åˆ«ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰ç¼€æ ‘ç´¢å¼•ï¼ˆTRIEï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šå¤šå‰æ ‘ï¼ˆTrie Treeï¼‰ã€‚
- èŠ‚ç‚¹å­˜å‚¨å­—ç¬¦ï¼Œè·¯å¾„è¡¨ç¤ºå­—ç¬¦ä¸²å‰ç¼€ï¼ˆå¦‚ &amp;quot;app&amp;quot; â†’ &amp;quot;apple&amp;quot;ï¼‰ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨&lt;/strong&gt;ï¼šå­—ç¬¦ä¸²å‰ç¼€åŒ¹é…ï¼ˆ&lt;code&gt;LIKE &amp;quot;abc%&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="4"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;STL_SORT ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; ç»“æ„
ï¼šæ’åºæ•°ç»„ï¼ˆSorted Arrayï¼‰ã€‚
- æ•°æ®æŒ‰å­—æ®µå€¼æ’åºå­˜å‚¨ï¼Œæ”¯æŒäºŒåˆ†æŸ¥æ‰¾åŠ é€ŸèŒƒå›´æŸ¥è¯¢ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨&lt;/strong&gt;ï¼šæ•°å€¼å­—æ®µçš„èŒƒå›´è¿‡æ»¤æˆ–æ’åºï¼ˆ&lt;code&gt;ORDER BY timestamp&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰ç´¢å¼•çš„å­˜å‚¨ä¸æ‰§è¡Œæµç¨‹"&gt;ğŸ§© &lt;strong&gt;ä¸‰ã€ç´¢å¼•çš„å­˜å‚¨ä¸æ‰§è¡Œæµç¨‹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æŒä¹…åŒ–å­˜å‚¨&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç´¢å¼•æ–‡ä»¶ï¼ˆå¦‚ IVF çš„èšç±»æ•°æ®ã€HNSW çš„å›¾ç»“æ„ï¼‰ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å…¥å¯¹è±¡å­˜å‚¨ï¼ˆå¦‚ MinIO/S3ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å…ƒæ•°æ®ï¼ˆç´¢å¼•ç±»å‹ã€å‚æ•°ï¼‰ä¿å­˜åœ¨ etcd ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢åŠ è½½&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æŸ¥è¯¢æ—¶ï¼ŒQuery Node å°†ç´¢å¼•æ–‡ä»¶ä»å¯¹è±¡å­˜å‚¨åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶æ ¹æ®ç´¢å¼•ç±»å‹æ‰§è¡Œæœç´¢ï¼š
&lt;ul&gt;
&lt;li&gt;HNSWï¼šå›¾éå†ï¼›&lt;/li&gt;
&lt;li&gt;IVFï¼šå®šä½èšç±»â†’æ‰«æå€’æ’åˆ—è¡¨ï¼›&lt;/li&gt;
&lt;li&gt;å€’æ’ç´¢å¼•ï¼šæ£€ç´¢å€’æ’åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å››æ€»ç»“ç´¢å¼•ç»“æ„ä¸é€‚ç”¨åœºæ™¯"&gt;ğŸ’ &lt;strong&gt;å››ã€æ€»ç»“ï¼šç´¢å¼•ç»“æ„ä¸é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç´¢å¼•ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åº•å±‚ç‰©ç†ç»“æ„&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…³é”®è®¾è®¡ç›®æ ‡&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;HNSW&lt;/td&gt;
&lt;td&gt;å¤šå±‚å›¾ç»“æ„&lt;/td&gt;
&lt;td&gt;é«˜ç²¾åº¦å‘é‡æœç´¢&lt;/td&gt;
&lt;td&gt;å¹³è¡¡å¬å›ç‡ä¸æŸ¥è¯¢å»¶è¿Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IVF_FLAT/PQ/SQ8&lt;/td&gt;
&lt;td&gt;èšç±»ä¸­å¿ƒ+å€’æ’åˆ—è¡¨&lt;/td&gt;
&lt;td&gt;å¤§è§„æ¨¡å‘é‡æ•°æ®é›†&lt;/td&gt;
&lt;td&gt;å‹ç¼©å­˜å‚¨ï¼Œé™ä½å†…å­˜å ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å€’æ’ç´¢å¼• (INVERTED)&lt;/td&gt;
&lt;td&gt;è¯é¡¹å­—å…¸+å€’æ’åˆ—è¡¨&lt;/td&gt;
&lt;td&gt;æ ‡é‡ç­‰å€¼/èŒƒå›´è¿‡æ»¤&lt;/td&gt;
&lt;td&gt;åŠ é€Ÿå¤šå€¼åŒ¹é…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä½å›¾ç´¢å¼• (BITMAP)&lt;/td&gt;
&lt;td&gt;ä½å‘é‡æ•°ç»„&lt;/td&gt;
&lt;td&gt;ä½åŸºæ•°å­—æ®µçš„å¤šæ¡ä»¶è¿‡æ»¤&lt;/td&gt;
&lt;td&gt;ä½è¿ç®—é«˜æ•ˆåˆå¹¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TRIE&lt;/td&gt;
&lt;td&gt;å‰ç¼€æ ‘&lt;/td&gt;
&lt;td&gt;å­—ç¬¦ä¸²å‰ç¼€åŒ¹é…&lt;/td&gt;
&lt;td&gt;å‡å°‘å­—ç¬¦æ‰«ææ¬¡æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;è®¾è®¡å…±æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†·çƒ­åˆ†ç¦»&lt;/strong&gt;ï¼šç´¢å¼•æ–‡ä»¶å­˜å‚¨åœ¨å¯¹è±¡å­˜å‚¨ï¼ˆå†·æ•°æ®ï¼‰ï¼ŒæŸ¥è¯¢æ—¶åŠ è½½åˆ°å†…å­˜ï¼ˆçƒ­æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥æ„å»º&lt;/strong&gt;ï¼šç´¢å¼•ç”± Index Node å¼‚æ­¥ç”Ÿæˆï¼Œé¿å…é˜»å¡æ•°æ®å†™å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°åŒ–è°ƒä¼˜&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;nlist&lt;/code&gt;ã€&lt;code&gt;M&lt;/code&gt;ã€&lt;code&gt;ef&lt;/code&gt; ç­‰å‚æ•°å¹³è¡¡ç²¾åº¦ã€é€Ÿåº¦ä¸èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚éœ€è¿›ä¸€æ­¥ä¼˜åŒ–ç´¢å¼•æ€§èƒ½ï¼Œå¯ç»“åˆå­—æ®µåŸºæ•°ã€æŸ¥è¯¢æ¨¡å¼è°ƒæ•´å‚æ•°ï¼ˆå¦‚ä½åŸºæ•°ç”¨ BITMAPï¼Œé«˜ç²¾åº¦ç”¨ HNSWï¼‰ã€‚&lt;/p&gt;
&lt;h2 id="json-ç´¢å¼•"&gt;JSON ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;åœ¨ Milvus ä¸­ï¼ŒJSON ç±»å‹å­—æ®µçš„ç´¢å¼•æ˜¯é€šè¿‡ &lt;strong&gt;è·¯å¾„ç´¢å¼•ï¼ˆPath Indexingï¼‰&lt;/strong&gt; å®ç°çš„ï¼Œå…è®¸é’ˆå¯¹ JSON ç»“æ„å†…çš„ç‰¹å®šå­—æ®µï¼ˆå¦‚åµŒå¥—é”®æˆ–æ•°ç»„å…ƒç´ ï¼‰åˆ›å»ºç´¢å¼•ä»¥åŠ é€ŸæŸ¥è¯¢ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æœºåˆ¶å’Œæ“ä½œæŒ‡å—ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-json-å­—æ®µç´¢å¼•çš„æ ¸å¿ƒæœºåˆ¶"&gt;âš™ï¸ &lt;strong&gt;JSON å­—æ®µç´¢å¼•çš„æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ç±»å‹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä»…æ”¯æŒ &lt;strong&gt;å€’æ’ç´¢å¼•ï¼ˆINVERTEDï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡æŒ‡å®š JSON è·¯å¾„ï¼ˆ&lt;code&gt;json_path&lt;/code&gt;ï¼‰å’Œæ•°æ®ç±»å‹ï¼ˆ&lt;code&gt;json_cast_type&lt;/code&gt;ï¼‰ï¼Œæå–ç›®æ ‡å€¼å¹¶æ„å»ºç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯å¾„ç´¢å¼•åŸç†&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç´¢å¼•é’ˆå¯¹ JSON å†…éƒ¨çš„ç‰¹å®šè·¯å¾„ï¼ˆå¦‚ &lt;code&gt;metadata[&amp;quot;product_info&amp;quot;][&amp;quot;category&amp;quot;]&lt;/code&gt;ï¼‰ï¼Œè€Œéæ•´ä¸ª JSON å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼šä¸º &lt;code&gt;metadata.price&lt;/code&gt; åˆ›å»ºæ•°å€¼ç´¢å¼•åï¼ŒæŸ¥è¯¢ &lt;code&gt;metadata[&amp;quot;price&amp;quot;] &amp;gt; 100&lt;/code&gt; å¯ç›´æ¥å‘½ä¸­ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å¦‚ä½•ä¸º-json-çš„ç‰¹å®šå­—æ®µåˆ›å»ºç´¢å¼•"&gt;ğŸ”§ &lt;strong&gt;å¦‚ä½•ä¸º JSON çš„ç‰¹å®šå­—æ®µåˆ›å»ºç´¢å¼•ï¼Ÿ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°é’ˆå¯¹å•ä¸€å­—æ®µçš„ç´¢å¼•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šä¹‰ç´¢å¼•å‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;index_params = client.prepare_index_params()
index_params.add_index(
field_name=&amp;#34;metadata&amp;#34;, # JSON å­—æ®µå
index_type=&amp;#34;INVERTED&amp;#34;, # ä»…æ”¯æŒå€’æ’ç´¢å¼•
index_name=&amp;#34;price_index&amp;#34;, # è‡ªå®šä¹‰ç´¢å¼•å
params={
&amp;#34;json_path&amp;#34;: &amp;#34;metadata[\&amp;#34;price\&amp;#34;]&amp;#34;, # æŒ‡å®šç›®æ ‡å­—æ®µè·¯å¾„
&amp;#34;json_cast_type&amp;#34;: &amp;#34;double&amp;#34; # è½¬æ¢æ•°æ®ç±»å‹
}
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å‚æ•°è¯´æ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;json_path&lt;/code&gt;ï¼šéœ€ç´¢å¼•çš„ JSON è·¯å¾„ï¼ˆæ”¯æŒåµŒå¥—é”®å’Œæ•°ç»„ï¼Œå¦‚ &lt;code&gt;tags[0]&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;json_cast_type&lt;/code&gt;ï¼šç›®æ ‡æ•°æ®ç±»å‹ï¼ˆ&lt;code&gt;varchar&lt;/code&gt;ã€&lt;code&gt;double&lt;/code&gt; æˆ– &lt;code&gt;bool&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;client.create_index(collection_name=&amp;#34;my_collection&amp;#34;, index_params=index_params)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®æ³¨æ„äº‹é¡¹"&gt;âš ï¸ &lt;strong&gt;å…³é”®æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ç±»å‹åŒ¹é…&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æŸ¥è¯¢æ¡ä»¶å¿…é¡»ä¸&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;json_cast_type
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€è‡´ï¼Œå¦åˆ™ç´¢å¼•å¤±æ•ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥ç´¢å¼•ç±»å‹ä¸º &lt;code&gt;double&lt;/code&gt;ï¼Œåˆ™è¿‡æ»¤æ¡ä»¶éœ€ä¸ºæ•°å€¼ï¼ˆå¦‚ &lt;code&gt;metadata[&amp;quot;price&amp;quot;] &amp;gt; 100&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ä¸º &lt;code&gt;varchar&lt;/code&gt;ï¼Œåˆ™éœ€å­—ç¬¦ä¸²æ¡ä»¶ï¼ˆå¦‚ &lt;code&gt;metadata[&amp;quot;category&amp;quot;] == &amp;quot;electronics&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§è¦æ±‚&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç±»å‹ä¸ä¸€è‡´&lt;/strong&gt;ï¼šè‹¥æŸè¡Œæ•°æ®çš„è·¯å¾„å€¼ç±»å‹ä¸ &lt;code&gt;json_cast_type&lt;/code&gt; ä¸ç¬¦ï¼ˆå¦‚å­—ç¬¦ä¸²å­˜å…¥æ•°å€¼ç´¢å¼•ï¼‰ï¼Œè¯¥è¡Œå°†è¢«è·³è¿‡ç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯å¾„ç¼ºå¤±&lt;/strong&gt;ï¼šè·¯å¾„ä¸å­˜åœ¨çš„æ•°æ®è¡Œä¸ä¼šè¢«ç´¢å¼•ï¼Œä½†ä¸ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°å€¼ç²¾åº¦é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°å€¼ç±»å‹ï¼ˆå¦‚ &lt;code&gt;double&lt;/code&gt;ï¼‰ç´¢å¼•å­˜åœ¨ç²¾åº¦é™åˆ¶ï¼ˆè¶…è¿‡ 2^53 çš„æ•´æ•°å¯èƒ½ä¸¢å¤±ç²¾åº¦ï¼‰ï¼Œéœ€é¿å…å¤§æ•´æ•°åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°ç»„ç´¢å¼•é™åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“å‰&lt;strong&gt;ä¸æ”¯æŒæ•°ç»„æ•´ä½“ç´¢å¼•&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;tags&lt;/code&gt; æ•°ç»„ï¼‰ï¼Œä»…æ”¯æŒç´¢å¼•æ•°ç»„ä¸­çš„æ ‡é‡å…ƒç´ ï¼ˆå¦‚ &lt;code&gt;tags[0]&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-é«˜çº§æŠ€å·§åŠ¨æ€å­—æ®µçš„ç´¢å¼•"&gt;ğŸš€ &lt;strong&gt;é«˜çº§æŠ€å·§ï¼šåŠ¨æ€å­—æ®µçš„ç´¢å¼•&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;è‹¥å¯ç”¨åŠ¨æ€å­—æ®µï¼ˆ&lt;code&gt;enable_dynamic_fields=True&lt;/code&gt;ï¼‰ï¼Œæœªå®šä¹‰çš„å­—æ®µä¼šå­˜å…¥ &lt;code&gt;$meta&lt;/code&gt; JSON ä¸­ï¼Œå¯é€šè¿‡ç›¸åŒæ–¹å¼ç´¢å¼•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;index_params.add_index(
field_name=&amp;#34;color&amp;#34;, # åŠ¨æ€å­—æ®µåï¼ˆå¦‚ colorï¼‰
index_type=&amp;#34;INVERTED&amp;#34;,
params={
&amp;#34;json_path&amp;#34;: &amp;#34;color&amp;#34;, # ç›´æ¥æŒ‡å®šé”®å
&amp;#34;json_cast_type&amp;#34;: &amp;#34;varchar&amp;#34;
}
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŠ¨æ€å­—æ®µçš„æŸ¥è¯¢è¯­æ³•ä¸æ™®é€šå­—æ®µç›¸åŒï¼ˆå¦‚ &lt;code&gt;color == &amp;quot;red&amp;quot;&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“ä¸å»ºè®®"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ä¸å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•åœºæ™¯&lt;/strong&gt;ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢çš„ JSON è·¯å¾„ï¼ˆå¦‚åˆ†ç±»ã€ä»·æ ¼ï¼‰å•ç‹¬å»ºç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯å¾„é€‰æ‹©&lt;/strong&gt;ï¼šä¼˜å…ˆç´¢å¼•&lt;strong&gt;ä½åŸºæ•°ã€é«˜é¢‘è¿‡æ»¤&lt;/strong&gt;çš„å­—æ®µï¼ˆå¦‚ &lt;code&gt;category&lt;/code&gt; è€Œé &lt;code&gt;description&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ç±»å‹&lt;/strong&gt;ï¼šæ ¹æ®å®é™…æŸ¥è¯¢éœ€æ±‚é€‰æ‹© &lt;code&gt;json_cast_type&lt;/code&gt;ï¼ˆå­—ç¬¦ä¸²é€‰ &lt;code&gt;varchar&lt;/code&gt;ï¼Œæ•°å€¼é€‰ &lt;code&gt;double&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½å¹³è¡¡&lt;/strong&gt;ï¼šæ¯ä¸ªæ–°å¢ç´¢å¼•ä¼šå¢åŠ å­˜å‚¨å¼€é”€ï¼Œå»ºè®®æŒ‰éœ€åˆ›å»ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡ç²¾å‡†çš„è·¯å¾„ç´¢å¼•ï¼ŒJSON å­—æ®µçš„è¿‡æ»¤æ€§èƒ½å¯æå‡æ•°åå€ã€‚ä¾‹å¦‚ï¼Œä¸º &lt;code&gt;metadata[&amp;quot;price&amp;quot;]&lt;/code&gt; å»ºç´¢å¼•åï¼ŒèŒƒå›´æŸ¥è¯¢é€Ÿåº¦æ¥è¿‘å¸¸é‡æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>ã€MongoDBã€‘Fundamentals</title><link>https://dyhes.github.io/p/mongodbfundamentals/</link><pubDate>Wed, 06 Aug 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/mongodbfundamentals/</guid><description>&lt;h2 id="introduction"&gt;Introduction
&lt;/h2&gt;&lt;p&gt;A record in MongoDB is a document, which is a data structure composed of field and value pairs. MongoDB documents are similar to JSON objects. The values of fields may include other documents, arrays, and arrays of documents.&lt;/p&gt;
&lt;p&gt;The advantages of using documents are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Documents correspond to &lt;strong&gt;native data types&lt;/strong&gt; in many programming languages.&lt;/li&gt;
&lt;li&gt;Embedded documents and arrays &lt;strong&gt;reduce need for expensive joins&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dynamic schema&lt;/strong&gt; supports fluent polymorphism.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MongoDB stores documents in &lt;a class="link" href="https://www.mongodb.com/docs/manual/core/databases-and-collections/#std-label-collections" target="_blank" rel="noopener"
&gt;collections&lt;/a&gt;. Collections are analogous to tables in relational databases.&lt;/p&gt;
&lt;h3 id="query-api"&gt;Query API
&lt;/h3&gt;&lt;p&gt;The MongoDB Query API supports &lt;a class="link" href="https://www.mongodb.com/docs/manual/crud/#std-label-crud" target="_blank" rel="noopener"
&gt;read and write operations (CRUD)&lt;/a&gt; as well as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.mongodb.com/docs/manual/core/aggregation-pipeline/#std-label-aggregation-pipeline" target="_blank" rel="noopener"
&gt;Data Aggregation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.mongodb.com/docs/manual/text-search/#std-label-text-search" target="_blank" rel="noopener"
&gt;Text Search&lt;/a&gt; and &lt;a class="link" href="https://www.mongodb.com/docs/manual/tutorial/geospatial-tutorial/" target="_blank" rel="noopener"
&gt;Geospatial Queries.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ¶æ„"&gt;æ¶æ„
&lt;/h2&gt;&lt;p&gt;MongoDB Atlas æ˜¯ MongoDB å…¬å¸æ¨å‡ºçš„&lt;strong&gt;å…¨æ‰˜ç®¡äº‘æ•°æ®åº“æœåŠ¡&lt;/strong&gt;ï¼Œè€Œ MongoDB é€šå¸¸æŒ‡å¼€æºã€éœ€è‡ªæ‰˜ç®¡çš„æ•°æ®åº“ç³»ç»Ÿã€‚ä¸¤è€…æ ¸å¿ƒåŒºåˆ«åœ¨äº&lt;strong&gt;éƒ¨ç½²æ¨¡å¼ã€è¿ç»´å¤æ‚åº¦åŠåŠŸèƒ½æ‰©å±•æ€§&lt;/strong&gt;ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€mongodb-atlas-çš„æ ¸å¿ƒç‰¹æ€§"&gt;ğŸš€ &lt;strong&gt;ä¸€ã€MongoDB Atlas çš„æ ¸å¿ƒç‰¹æ€§&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®Œå…¨æ‰˜ç®¡æœåŠ¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Atlas è‡ªåŠ¨å¤„ç†æ•°æ®åº“çš„éƒ¨ç½²ã€å¤‡ä»½ã€ç›‘æ§ã€æ‰©å±•ã€å®‰å…¨æ›´æ–°ç­‰è¿ç»´ä»»åŠ¡ï¼Œç”¨æˆ·æ— éœ€ç®¡ç†åº•å±‚åŸºç¡€è®¾æ–½ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šäº‘éƒ¨ç½²ï¼ˆAWS/Azure/GCPï¼‰ï¼Œå¯è·¨åŒºåŸŸå¤åˆ¶æ•°æ®ï¼Œå®ç°å…¨çƒä½å»¶è¿Ÿè®¿é—®å’Œé«˜å¯ç”¨æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€ç®±å³ç”¨çš„é«˜çº§åŠŸèƒ½&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…ç½®å‘é‡æœç´¢&lt;/strong&gt;ï¼šæ”¯æŒè¿‘ä¼¼æœ€è¿‘é‚»ï¼ˆANNï¼‰æœç´¢ï¼Œé€‚ç”¨äºAIåœºæ™¯ï¼ˆå¦‚è¯­ä¹‰æœç´¢ã€æ¨èç³»ç»Ÿï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–å¼¹æ€§æ‰©å±•&lt;/strong&gt;ï¼šæ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´è®¡ç®—å’Œå­˜å‚¨èµ„æºï¼Œæ— éœ€åœæœºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ä¸šçº§å®‰å…¨&lt;/strong&gt;ï¼šé»˜è®¤å¯ç”¨TLSåŠ å¯†ã€VPCç½‘ç»œéš”ç¦»ã€RBACæƒé™æ§åˆ¶ï¼Œç¬¦åˆGDPRç­‰åˆè§„è¦æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®€åŒ–å¼€å‘ä¸è¿ç»´&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æä¾›å…è´¹å¥—é¤å’ŒæŒ‰éœ€è®¡è´¹æ¨¡å¼ï¼Œé™ä½åˆå§‹æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;é›†æˆç›‘æ§å‘Šè­¦ã€è‡ªåŠ¨åŒ–å¤‡ä»½ï¼ˆæ”¯æŒæ—¶é—´ç‚¹æ¢å¤ï¼‰å’ŒæŸ¥è¯¢åˆ†æå·¥å…·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒmongodb-atlas-ä¸è‡ªæ‰˜ç®¡-mongodb-çš„å…³é”®åŒºåˆ«"&gt;âš™ï¸ &lt;strong&gt;äºŒã€MongoDB Atlas ä¸è‡ªæ‰˜ç®¡ MongoDB çš„å…³é”®åŒºåˆ«&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MongoDB Atlas&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è‡ªæ‰˜ç®¡ MongoDB&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿ç»´ç®¡ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨è‡ªåŠ¨è¿ç»´ï¼ˆå¤‡ä»½ã€ç›‘æ§ã€æ‰©ç¼©å®¹ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨éƒ¨ç½²ã€å‡çº§ã€ç»´æŠ¤ç¡¬ä»¶ä¸è½¯ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¯ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…ç½®å¤šåŒºåŸŸå‰¯æœ¬é›†ï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§»&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨é…ç½®å‰¯æœ¬é›†å’Œåˆ†ç‰‡é›†ç¾¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤TLSåŠ å¯†ã€IPç™½åå•ã€VPCéš”ç¦»&lt;/td&gt;
&lt;td&gt;éœ€è‡ªè¡Œé…ç½®ç½‘ç»œé˜²ç«å¢™å’ŒåŠ å¯†æœºåˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰©å±•æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€é”®æ¨ªå‘åˆ†ç‰‡/çºµå‘æ‰©å±•ï¼Œæ”¯æŒå…¨çƒåˆ†å‘&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨åˆ†ç‰‡ï¼Œæ‰©å±•è¿‡ç¨‹å¤æ‚ä¸”å¯èƒ½åœæœº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æˆæœ¬æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰ä½¿ç”¨é‡ä»˜è´¹ï¼ˆå«å…è´¹å¥—é¤ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€é‡‡è´­ç¡¬ä»¶ï¼Œé•¿æœŸè¿ç»´æˆæœ¬è¾ƒé«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜çº§åŠŸèƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸç”Ÿæ”¯æŒå‘é‡æœç´¢ã€Data Lakeé›†æˆã€AIå·¥å…·é“¾&lt;/td&gt;
&lt;td&gt;éœ€ä¾èµ–ç¬¬ä¸‰æ–¹åº“æˆ–è‡ªå»ºè§£å†³æ–¹æ¡ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰å…¸å‹ä½¿ç”¨åœºæ™¯å¯¹æ¯”"&gt;ğŸ’¡ &lt;strong&gt;ä¸‰ã€å…¸å‹ä½¿ç”¨åœºæ™¯å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚åˆ Atlas çš„åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¿«é€ŸåŸå‹å¼€å‘ï¼šåˆ†é’Ÿçº§éƒ¨ç½²æ•°æ®åº“ï¼ŒåŠ é€Ÿäº§å“è¿­ä»£ã€‚&lt;/li&gt;
&lt;li&gt;å…¨çƒåŒ–åº”ç”¨ï¼šéœ€è·¨åŒºåŸŸä½å»¶è¿Ÿè®¿é—®ï¼ˆå¦‚ç”µå•†ã€æ¸¸æˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;AIé©±åŠ¨å‹åº”ç”¨ï¼šç›´æ¥è°ƒç”¨å†…ç½®å‘é‡æœç´¢ä¸LLMé›†æˆï¼ˆå¦‚LangChainï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚åˆè‡ªæ‰˜ç®¡çš„åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®ä¸»æƒè¦æ±‚ä¸¥æ ¼ï¼šéœ€å®Œå…¨æŒæ§æœ¬åœ°ç¡¬ä»¶å’Œç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;è¶…ä½æˆæœ¬æ•æ„Ÿåœºæ™¯ï¼šé•¿æœŸå›ºå®šè´Ÿè½½ä¸”å…·å¤‡ä¸“ä¸šè¿ç»´å›¢é˜Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å››è¿æ¥ä¸å¼€å‘å·®å¼‚"&gt;ğŸ”Œ &lt;strong&gt;å››ã€è¿æ¥ä¸å¼€å‘å·®å¼‚&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥æ–¹å¼&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Atlasï¼šä½¿ç”¨äº‘æœåŠ¡ä¸“å±URIï¼ˆå¦‚ &lt;code&gt;mongodb+srv://&lt;/code&gt;ï¼‰ï¼Œéœ€é…ç½®IPç™½åå•å’Œæ•°æ®åº“ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªæ‰˜ç®¡ï¼šé€šè¿‡æœ¬åœ°è¿æ¥å­—ç¬¦ä¸²ï¼ˆå¦‚ &lt;code&gt;mongodb://localhost:27017&lt;/code&gt;ï¼‰ç›´æ¥è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€å‘é€‚é…æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Atlas æä¾›ä¸å¼€æºMongoDBç›¸åŒçš„é©±åŠ¨ï¼ˆNode.js/Python/Javaç­‰ï¼‰ï¼Œä½†éœ€è°ƒç”¨äº‘æœåŠ¡ç‰¹å®šAPIï¼ˆå¦‚å‘é‡æœç´¢èšåˆç®¡é“ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MongoDB Atlas&lt;/strong&gt; = &lt;strong&gt;MongoDB æ ¸å¿ƒåŠŸèƒ½ + å…¨æ‰˜ç®¡äº‘æœåŠ¡ + é«˜çº§æ‰©å±•èƒ½åŠ›&lt;/strong&gt;ï¼Œé€‚åˆè¿½æ±‚æ•ˆç‡ã€å…¨çƒåŒ–éƒ¨ç½²åŠAIé›†æˆçš„å›¢é˜Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªæ‰˜ç®¡ MongoDB&lt;/strong&gt; æ›´é€‚åˆéœ€è¦å®Œå…¨æ§åˆ¶åŸºç¡€è®¾æ–½æˆ–æˆæœ¬æåº¦å—é™çš„åœºæ™¯ï¼Œä½†éœ€æ‰¿æ‹…è¿ç»´å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å»ºè®®ä¼˜å…ˆä½¿ç”¨ Atlas ä»¥èšç„¦ä¸šåŠ¡å¼€å‘ï¼Œä»…åœ¨ç‰¹æ®Šéœ€æ±‚æ—¶é€‰æ‹©è‡ªæ‰˜ç®¡æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id="b-æ ‘ç´¢å¼•"&gt;B æ ‘ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;MongoDB é€‰æ‹© B æ ‘è€Œé B+ æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä¸»è¦ä¸å…¶è®¾è®¡ç›®æ ‡å’Œåº”ç”¨åœºæ™¯ç›¸å…³ï¼Œè€Œâ€œèŒƒå›´æŸ¥è¯¢éœ€æ±‚å·®å¼‚â€åªæ˜¯åŸå› ä¹‹ä¸€ã€‚ä»¥ä¸‹ä»å¤šä¸ªç»´åº¦åˆ†æå…¶è®¾è®¡é€»è¾‘ï¼Œå¹¶ç»“åˆæŠ€æœ¯åŸç†è¯´æ˜ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€æ ¸å¿ƒè®¾è®¡ç†å¿µå·®å¼‚"&gt;ğŸ§  &lt;strong&gt;ä¸€ã€æ ¸å¿ƒè®¾è®¡ç†å¿µå·®å¼‚&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æ¨¡å‹å®šä½ä¸åŒ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;MySQLï¼ˆB+æ ‘ï¼‰&lt;/strong&gt;ï¼šå¼ºè°ƒæŸ¥è¯¢å…³è”æ•°æ®ä¸èŒƒå›´éå†ï¼ˆå¦‚æ—¶é—´èŒƒå›´ã€å¤–é”®å…³è”æŸ¥è¯¢ï¼‰ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹é“¾è¡¨ç»“æ„å¤©ç„¶æ”¯æŒé«˜æ•ˆé¡ºåºè®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MongoDBï¼ˆBæ ‘ï¼‰&lt;/strong&gt;ï¼šä»¥æ–‡æ¡£ä¸ºèšåˆå•å…ƒï¼Œç›®æ ‡åœºæ™¯æ˜¯&lt;strong&gt;å¿«é€Ÿå®šä½å•ä¸ªæ–‡æ¡£&lt;/strong&gt;ï¼ˆå¦‚é€šè¿‡ &lt;code&gt;_id&lt;/code&gt; è·å–ç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼‰ï¼ŒBæ ‘çš„éå¶å­èŠ‚ç‚¹ç›´æ¥å­˜å‚¨æ•°æ®å¯å‡å°‘ç£ç›˜ I/O æ¬¡æ•°ï¼Œå•ç‚¹æŸ¥è¯¢å¹³å‡æ›´å¿«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢æ¨¡å¼ä¼˜å…ˆçº§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;MongoDB å‡è®¾&lt;strong&gt;å•æ–‡æ¡£æŸ¥è¯¢é¢‘ç‡è¿œé«˜äºèŒƒå›´éå†&lt;/strong&gt;ã€‚B æ ‘åœ¨éšæœºæŸ¥è¯¢æ—¶å¯èƒ½ä»…éœ€è®¿é—®å°‘æ•°èŠ‚ç‚¹å³å¯è¿”å›æ•°æ®ï¼ˆæœ€ä¼˜ O(1)ï¼‰ï¼Œè€Œ B+æ ‘å¿…é¡»è®¿é—®å¶å­èŠ‚ç‚¹ï¼ˆå›ºå®š O(log n)ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;åä¾‹è¯´æ˜&lt;/em&gt;ï¼šè‹¥é›†åˆè®¾è®¡æœªéµå¾ªæ–‡æ¡£èšåˆåŸåˆ™ï¼ˆå¦‚å°†è¯„è®ºç‹¬ç«‹å­˜å‚¨å¹¶é€šè¿‡ &lt;code&gt;post_id&lt;/code&gt; å…³è”æŸ¥è¯¢ï¼‰ï¼ŒèŒƒå›´æŸ¥è¯¢æ€§èƒ½ç¡®å®å¼±äº MySQLï¼Œä½†è¿™æ˜¯åæ¨¡å¼è®¾è®¡ï¼Œé MongoDB æ¨èç”¨æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒb-æ ‘-vs-b-æ ‘çš„æŠ€æœ¯æƒè¡¡"&gt;âš™ï¸ &lt;strong&gt;äºŒã€B æ ‘ vs B+ æ ‘çš„æŠ€æœ¯æƒè¡¡&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;B æ ‘ï¼ˆMongoDBï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;B+ æ ‘ï¼ˆMySQLï¼‰&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŠ‚ç‚¹æ•°æ®å­˜å‚¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå¶èŠ‚ç‚¹å­˜å‚¨é”®å€¼+æ•°æ®ï¼ˆDataåŸŸï¼‰&lt;/td&gt;
&lt;td&gt;éå¶èŠ‚ç‚¹ä»…å­˜ç´¢å¼•é”®ï¼Œæ•°æ®åœ¨å¶èŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å•ç‚¹æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¹³å‡æ›´ä¼˜ï¼ˆå¯èƒ½ä¸­é€”å‘½ä¸­æ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;ç¨³å®šä½†éœ€è®¿é—®å¶èŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èŒƒå›´æŸ¥è¯¢æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€å¤šæ¬¡å›æº¯éå¶èŠ‚ç‚¹ï¼Œæ•ˆç‡è¾ƒä½&lt;/td&gt;
&lt;td&gt;å¶èŠ‚ç‚¹é“¾è¡¨ç›´æ¥é¡ºåºéå†ï¼Œæ•ˆç‡é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç©ºé—´åˆ©ç”¨ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éå¶èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼Œç´¢å¼•ä½“ç§¯è¾ƒå°&lt;/td&gt;
&lt;td&gt;éå¶èŠ‚ç‚¹å†—ä½™ç´¢å¼•é”®ï¼Œç´¢å¼•ä½“ç§¯è¾ƒå¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰èŒƒå›´æŸ¥è¯¢åœ¨-mongodb-ä¸­çš„å®é™…æ”¯æŒ"&gt;ğŸ” &lt;strong&gt;ä¸‰ã€èŒƒå›´æŸ¥è¯¢åœ¨ MongoDB ä¸­çš„å®é™…æ”¯æŒ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;MongoDB ä»æ”¯æŒèŒƒå›´æŸ¥è¯¢&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚æŒ‰æ—¶é—´æˆ³æˆ– &lt;code&gt;ObjectId&lt;/code&gt; èŒƒå›´è¿‡æ»¤ï¼ˆå¦‚ &lt;code&gt;db.collection.find({_id: {$gt: startId}})&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½†æ€§èƒ½å¼±äº MySQLï¼šB æ ‘éœ€å¤šæ¬¡è®¿é—®éè¿ç»­èŠ‚ç‚¹ï¼Œè€Œ B+ æ ‘é€šè¿‡å¶èŠ‚ç‚¹é“¾è¡¨é¡ºåºæ‰«æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ‰‹æ®µ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆç´¢å¼•è®¾è®¡&lt;/strong&gt;ï¼šå°†é«˜åŒºåˆ†åº¦å­—æ®µï¼ˆå¦‚ç”¨æˆ·IDï¼‰ç½®äºç´¢å¼•å·¦ä¾§ï¼Œç¼©å°æ‰«æèŒƒå›´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç‰‡é”®ç­–ç•¥&lt;/strong&gt;ï¼šå“ˆå¸Œåˆ†ç‰‡å¯é¿å…çƒ­ç‚¹ï¼Œä½†ç‰ºç‰²èŒƒå›´æŸ¥è¯¢ï¼›èŒƒå›´åˆ†ç‰‡ç›´æ¥ä¼˜åŒ–è¿ç»­æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;$match&lt;/code&gt; æå‰è¿‡æ»¤æ•°æ®ï¼Œå‡å°‘å†…å­˜å¤„ç†é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å››å…¶ä»–å½±å“å› ç´ "&gt;âš–ï¸ &lt;strong&gt;å››ã€å…¶ä»–å½±å“å› ç´ &lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å†™å…¥æ€§èƒ½è€ƒé‡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;B æ ‘çš„éšæœºå†™æ€§èƒ½ä¼˜äº LSM æ ‘ï¼ˆå†™æ”¾å¤§ä½ï¼‰ï¼Œä¸”è¯»å–æ€§èƒ½è¿œèƒœ LSM æ ‘ï¼ˆLSM è¯»éœ€åˆå¹¶å¤šå±‚çº§æ–‡ä»¶ï¼‰ã€‚MongoDB çš„è¯»å¤šå†™å°‘åœºæ™¯æ›´å€¾å‘ B æ ‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨å¼•æ“ä¼˜åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;WiredTiger å¼•æ“çš„&lt;strong&gt;æ–‡æ¡£çº§é”&lt;/strong&gt;å’Œ &lt;strong&gt;MVCC&lt;/strong&gt; æœºåˆ¶å¼¥è¡¥äº† B æ ‘å¹¶å‘çŸ­æ¿ï¼Œè€Œå‹ç¼©æŠ€æœ¯ï¼ˆSnappy/Zstdï¼‰ç¼“è§£äº† B æ ‘ç©ºé—´é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“mongodb-é€‰æ‹©-b-æ ‘çš„æœ¬è´¨åŸå› "&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ï¼šMongoDB é€‰æ‹© B æ ‘çš„æœ¬è´¨åŸå› &lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯é©±åŠ¨&lt;/strong&gt;ï¼šæ–‡æ¡£å‹æ•°æ®åº“çš„æ ¸å¿ƒæ“ä½œæ˜¯&lt;strong&gt;åŸºäºé”®çš„å¿«é€Ÿæ–‡æ¡£è·å–&lt;/strong&gt;ï¼Œè€Œéè¡¨å…³è”éå†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æŠ˜è¡·&lt;/strong&gt;ï¼šç‰ºç‰²èŒƒå›´æŸ¥è¯¢æ•ˆç‡ï¼Œæ¢å–æ›´é«˜çš„å•ç‚¹æŸ¥è¯¢æ€§èƒ½å’Œæ›´ç¨³å®šçš„è¯»å†™ååã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæ€é€‚é…&lt;/strong&gt;ï¼šé€šè¿‡èšåˆæ–‡æ¡£æ¨¡å‹ã€åˆ†ç‰‡ç­–ç•¥å’Œç´¢å¼•ä¼˜åŒ–ï¼Œè§„é¿ B æ ‘åœ¨èŒƒå›´æŸ¥è¯¢ä¸Šçš„åŠ£åŠ¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;è‹¥ä¸šåŠ¡å¼ºä¾èµ–èŒƒå›´æŸ¥è¯¢ï¼ˆå¦‚æ—¥å¿—åˆ†æï¼‰ï¼Œå»ºè®®ï¼š
âœ… ä½¿ç”¨èŒƒå›´åˆ†ç‰‡é”® + å¤åˆç´¢å¼•ï¼ˆé«˜åŒºåˆ†åº¦å­—æ®µåœ¨å‰ï¼‰
âœ… å¿…è¦æ—¶æ”¹ç”¨ ClickHouse æˆ– Elasticsearch ç­‰ä¸“ç”¨å¼•æ“ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="change-stream"&gt;Change Stream
&lt;/h2&gt;&lt;p&gt;MongoDB Change Streams æ˜¯ä¸€ç§åŸºäº &lt;strong&gt;oplogï¼ˆæ“ä½œæ—¥å¿—ï¼‰&lt;/strong&gt; çš„å®æ—¶æ•°æ®å˜æ›´ç›‘å¬æœºåˆ¶ï¼Œè‡ª 3.6 ç‰ˆæœ¬å¼•å…¥ï¼Œé€‚ç”¨äºå‰¯æœ¬é›†æˆ–åˆ†ç‰‡é›†ç¾¤ç¯å¢ƒã€‚å®ƒé€šè¿‡æ¨é€æ¨¡å¼å°†æ•°æ®åº“çš„å¢é‡å˜æ›´ï¼ˆå¦‚æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ä»¥äº‹ä»¶æµçš„å½¢å¼ä¼ é€’ç»™åº”ç”¨ç¨‹åºï¼Œæ— éœ€è½®è¯¢æŸ¥è¯¢ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒæœºåˆ¶ã€åº”ç”¨åœºæ™¯ã€æŠ€æœ¯å®ç°åŠä¼˜åŒ–ç­–ç•¥å±•å¼€è¯¦è§£ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€æ ¸å¿ƒæœºåˆ¶ä¸å·¥ä½œåŸç†"&gt;ğŸ”§ &lt;strong&gt;ä¸€ã€æ ¸å¿ƒæœºåˆ¶ä¸å·¥ä½œåŸç†&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾èµ– Oplog å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Change Streams åœ¨ MongoDB çš„ &lt;strong&gt;oplog é›†åˆ&lt;/strong&gt;ä¸Šå¼€å¯ä¸€ä¸ªå¯è¿½åŠ æ¸¸æ ‡ï¼ˆtailable cursorï¼‰ï¼Œå®æ—¶æ•è·æ‰€æœ‰å‰¯æœ¬é›†æˆ–åˆ†ç‰‡é›†ç¾¤çš„å˜æ›´æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å˜æ›´äº‹ä»¶åŒ…æ‹¬ï¼š&lt;code&gt;insert&lt;/code&gt;ã€&lt;code&gt;update&lt;/code&gt;ã€&lt;code&gt;delete&lt;/code&gt;ã€&lt;code&gt;drop&lt;/code&gt;ï¼ˆé›†åˆåˆ é™¤ï¼‰ã€&lt;code&gt;rename&lt;/code&gt;ï¼ˆé›†åˆé‡å‘½åï¼‰åŠ &lt;code&gt;invalidate&lt;/code&gt;ï¼ˆé›†åˆå¤±æ•ˆäº‹ä»¶ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§ä¸å¯é æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;readConcern: &amp;quot;majority&amp;quot;&lt;/code&gt;&lt;/strong&gt; çº§åˆ«ï¼Œç¡®ä¿å˜æ›´äº‹ä»¶ä»…åœ¨æ•°æ®å†™å…¥å¤šæ•°èŠ‚ç‚¹åè§¦å‘ï¼Œé¿å…å›æ»šå¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–­ç‚¹æ¢å¤æœºåˆ¶&lt;/strong&gt;ï¼šæ¯ä¸ªäº‹ä»¶è¿”å›å”¯ä¸€çš„ &lt;code&gt;resumeToken&lt;/code&gt;ï¼ˆå­˜å‚¨åœ¨ &lt;code&gt;_id&lt;/code&gt; å­—æ®µï¼‰ï¼Œæ”¯æŒé€šè¿‡ &lt;code&gt;resumeAfter&lt;/code&gt; å‚æ•°ä»ä¸­æ–­ç‚¹æ¢å¤ç›‘å¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;äº‹ä»¶è¿‡æ»¤ä¸å®šåˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ &lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt; è¿‡æ»¤ç‰¹å®šäº‹ä»¶ç±»å‹ï¼ˆå¦‚ä»…ç›‘å¬æ’å…¥å’Œåˆ é™¤ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;db.collection.watch([{ $match: { operationType: { $in: [&amp;#34;insert&amp;#34;, &amp;#34;delete&amp;#34;] } } }]);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ›´æ–°æ“ä½œé»˜è®¤è¿”å›&lt;strong&gt;å¢é‡å­—æ®µ&lt;/strong&gt;ï¼ˆä»…å˜æ›´éƒ¨åˆ†ï¼‰ï¼Œè‹¥éœ€è·å–å®Œæ•´æ–‡æ¡£ï¼Œéœ€è®¾ç½® &lt;code&gt;fullDocument: &amp;quot;updateLookup&amp;quot;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒé€‚ç”¨åœºæ™¯ä¸å…¸å‹æ–¹æ¡ˆ"&gt;âš¡ &lt;strong&gt;äºŒã€é€‚ç”¨åœºæ™¯ä¸å…¸å‹æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å®ç°æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¡ˆä¾‹è¯´æ˜&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è·¨é›†ç¾¤æ•°æ®åŒæ­¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è®¢é˜…æºé›†ç¾¤å˜æ›´æµï¼Œå®æ—¶å†™å…¥ç›®æ ‡é›†ç¾¤&lt;/td&gt;
&lt;td&gt;å¼‚åœ°å®¹ç¾å¤‡ä»½ï¼ˆå¦‚åŒ—äº¬â†’ä¸Šæµ·é›†ç¾¤åŒæ­¥ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®æ—¶ç›‘æ§ä¸å®¡è®¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›‘å¬é«˜é£é™©æ“ä½œï¼ˆå¦‚ &lt;code&gt;dropDatabase&lt;/code&gt;ï¼‰ï¼Œè§¦å‘å‘Šè­¦æˆ–æ—¥å¿—è®°å½•&lt;/td&gt;
&lt;td&gt;å®¡è®¡åˆ åº“è¡Œä¸ºï¼Œæ»¡è¶³åˆè§„è¦æ±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº‹ä»¶é©±åŠ¨æ¶æ„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¾®æœåŠ¡é—´æ•°æ®å˜æ›´è”åŠ¨ï¼ˆå¦‚è®¢å•çŠ¶æ€æ›´æ–°è§¦å‘åº“å­˜æ‰£å‡ï¼‰&lt;/td&gt;
&lt;td&gt;ç”µå•†ç³»ç»Ÿä¸­è®¢å•-åº“å­˜æœåŠ¡è§£è€¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®æ—¶åˆ†æè®¡ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†å˜æ›´äº‹ä»¶æ¨é€è‡³ Flink/Spark æµå¤„ç†å¹³å°&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·è¡Œä¸ºå®æ—¶åˆ†æï¼ˆå¦‚ç‚¹å‡»æµç»Ÿè®¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åŠ¨æ€æ¶ˆæ¯æ¨é€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›‘å¬æ•°æ®å˜æ›´ï¼ˆå¦‚å…¬äº¤è½¦ GPS åæ ‡ï¼‰ï¼Œæ¨é€è‡³å®¢æˆ·ç«¯&lt;/td&gt;
&lt;td&gt;å…¬äº¤åˆ°ç«™å®æ—¶æé†’ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰æŠ€æœ¯å®ç°ä¸ä¼˜åŒ–ç­–ç•¥"&gt;ğŸ› ï¸ &lt;strong&gt;ä¸‰ã€æŠ€æœ¯å®ç°ä¸ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºç¡€ä»£ç ç¤ºä¾‹ï¼ˆNode.jsï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;const changeStream = db.collection(&amp;#39;users&amp;#39;).watch();
changeStream.on(&amp;#39;change&amp;#39;, (change) =&amp;gt; {
if (change.operationType === &amp;#39;update&amp;#39;) {
console.log(&amp;#39;æ›´æ–°åçš„å®Œæ•´æ–‡æ¡£ï¼š&amp;#39;, change.fullDocument);
}
});
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Spring Boot æ•´åˆï¼ˆJavaï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é…ç½®&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;MessageListenerContainer
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›‘å¬æŒ‡å®šé›†åˆï¼Œè¿‡æ»¤äº‹ä»¶ç±»å‹å¹¶å¯ç”¨å…¨æ–‡æ¡£è¿”å›ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ChangeStreamRequest.builder(listener)
.collection(&amp;#34;orders&amp;#34;)
.filter(Aggregation.match(Criteria.where(&amp;#34;operationType&amp;#34;).in(&amp;#34;insert&amp;#34;, &amp;#34;update&amp;#34;)))
.fullDocumentLookup(FullDocument.UPDATE_LOOKUP)
.build();
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–å®è·µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ§åˆ¶&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;maxAwaitTimeMS&lt;/code&gt; é™åˆ¶äº‹ä»¶ç­‰å¾…æ—¶é—´ï¼ˆå¦‚ &lt;code&gt;5000ms&lt;/code&gt;ï¼‰ï¼Œé¿å…é•¿è¿æ¥é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•ä¼˜åŒ–&lt;/strong&gt;ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢çš„å­—æ®µï¼ˆå¦‚ &lt;code&gt;_id&lt;/code&gt; æˆ–åˆ†ç‰‡é”®ï¼‰åˆ›å»ºç´¢å¼•ï¼Œæå‡å˜æ›´äº‹ä»¶ç”Ÿæˆæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå¸¦å®½ç®¡ç†&lt;/strong&gt;ï¼šåœ¨è·¨æ•°æ®ä¸­å¿ƒåœºæ™¯ä¸­å‹ç¼©äº‹ä»¶æ•°æ®ï¼ˆå¦‚ä½¿ç”¨ Snappy ç®—æ³•ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å››æ³¨æ„äº‹é¡¹ä¸é™åˆ¶"&gt;âš ï¸ &lt;strong&gt;å››ã€æ³¨æ„äº‹é¡¹ä¸é™åˆ¶&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¯å¢ƒä¾èµ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä»…æ”¯æŒå‰¯æœ¬é›†æˆ–åˆ†ç‰‡é›†ç¾¤ï¼Œå•æœº MongoDB ä¸å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;Oplog çª—å£é™åˆ¶ï¼šä¸­æ–­æ—¶é—´è¶…è¿‡ oplog ä¿ç•™å‘¨æœŸï¼ˆé»˜è®¤ 24 å°æ—¶ï¼‰å°†å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶ç‰¹æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åˆ é™¤æ“ä½œä»…è¿”å›æ–‡æ¡£ &lt;code&gt;_id&lt;/code&gt;ï¼Œæ— æ³•è·å–å®Œæ•´å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;DDL äº‹ä»¶ï¼ˆå¦‚ç´¢å¼•åˆ›å»ºï¼‰ä»… MongoDB 6.0+ æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘åœºæ™¯&lt;/strong&gt;ï¼šéœ€ç›‘æ§ CPU/å†…å­˜å ç”¨ï¼Œå»ºè®®åˆ†ç¦»ç›‘å¬èŠ‚ç‚¹ä¸æ•°æ®èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå‹åŠ›&lt;/strong&gt;ï¼šæµ·é‡å˜æ›´äº‹ä»¶å¯èƒ½å æ»¡å¸¦å®½ï¼Œéœ€è®¾è®¡èƒŒå‹æœºåˆ¶ï¼ˆå¦‚ Kafka ç¼“å†²ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Change Streams æ˜¯ MongoDB å®æ—¶æ•°æ®ç”Ÿæ€çš„æ ¸å¿ƒç»„ä»¶ï¼Œé€šè¿‡ &lt;strong&gt;oplog ç›‘å¬ + äº‹ä»¶æµæ¨é€&lt;/strong&gt; æœºåˆ¶ï¼Œé«˜æ•ˆæ”¯æ’‘äº†æ•°æ®åŒæ­¥ã€å¾®æœåŠ¡åä½œã€å®æ—¶åˆ†æç­‰åœºæ™¯ã€‚å¼€å‘ä¸­éœ€æ³¨æ„ï¼š
âœ… â€‹&lt;strong&gt;ä¼˜å…ˆä½¿ç”¨èšåˆç®¡é“æ›¿ä»£ MapReduce&lt;/strong&gt;ï¼Œé¿å… JS å¼•æ“æ€§èƒ½ç“¶é¢ˆï¼›
âœ… â€‹&lt;strong&gt;ç»“åˆæ–­ç‚¹æ¢å¤ä¸è¿‡æ»¤æœºåˆ¶&lt;/strong&gt;ï¼Œæå‡äº‹ä»¶å¤„ç†å¯é æ€§ï¼›
âœ… â€‹&lt;strong&gt;ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²åˆ†ç‰‡é›†ç¾¤&lt;/strong&gt;ï¼Œä¿éšœé«˜å¯ç”¨æ€§ä¸æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºéœ€è¦å†å²æ•°æ®å¤„ç†æˆ–å¤æ‚å…³è”åˆ†æçš„åœºæ™¯ï¼Œå»ºè®®æ­é… &lt;strong&gt;CDC å·¥å…·ï¼ˆå¦‚ Debeziumï¼‰&lt;/strong&gt; æˆ– &lt;strong&gt;æµå¼è®¡ç®—å¼•æ“ï¼ˆå¦‚ Flinkï¼‰&lt;/strong&gt; æ„å»ºæ›´å¥å£®çš„æµæ°´çº¿ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="aggregation-pipeline"&gt;Aggregation Pipeline
&lt;/h2&gt;&lt;p&gt;MongoDB çš„èšåˆç®¡é“ï¼ˆAggregation Pipelineï¼‰æ˜¯ä¸€ç§åŸºäº&lt;strong&gt;æ•°æ®å¤„ç†æµæ°´çº¿æ¨¡å‹&lt;/strong&gt;çš„æ¡†æ¶ï¼Œç”¨äºå¯¹é›†åˆä¸­çš„æ–‡æ¡£è¿›è¡Œå¤šé˜¶æ®µè½¬æ¢ã€è¿‡æ»¤ã€åˆ†ç»„å’Œè®¡ç®—ï¼Œæœ€ç»ˆè¾“å‡ºèšåˆç»“æœã€‚å…¶æ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯å°†æ•°æ®åƒåœ¨ç®¡é“ä¸­æµåŠ¨ä¸€æ ·ï¼Œä¾æ¬¡ç»è¿‡å¤šä¸ªå¤„ç†é˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µæ‰§è¡Œç‰¹å®šæ“ä½œå¹¶ä¼ é€’ç»™ä¸‹ä¸€é˜¶æ®µã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€æ ¸å¿ƒæ¦‚å¿µä¸å·¥ä½œæœºåˆ¶"&gt;ğŸ”§ &lt;strong&gt;ä¸€ã€æ ¸å¿ƒæ¦‚å¿µä¸å·¥ä½œæœºåˆ¶&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç®¡é“ä¸é˜¶æ®µï¼ˆPipeline &amp;amp; Stageï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®¡é“&lt;/strong&gt;ï¼šç”±å¤šä¸ª&lt;strong&gt;é˜¶æ®µï¼ˆStageï¼‰&lt;/strong&gt; ç»„æˆçš„åºåˆ—ï¼Œæ¯ä¸ªé˜¶æ®µæ¥æ”¶ä¸Šä¸€é˜¶æ®µçš„è¾“å‡ºæ–‡æ¡£ï¼Œæ‰§è¡Œæ“ä½œåè¾“å‡ºæ–°æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜¶æ®µç±»å‹&lt;/strong&gt;ï¼šåŒ…æ‹¬ &lt;code&gt;$match&lt;/code&gt;ï¼ˆè¿‡æ»¤ï¼‰ã€&lt;code&gt;$project&lt;/code&gt;ï¼ˆæŠ•å½±ï¼‰ã€&lt;code&gt;$group&lt;/code&gt;ï¼ˆåˆ†ç»„ï¼‰ã€&lt;code&gt;$sort&lt;/code&gt;ï¼ˆæ’åºï¼‰ç­‰ï¼Œæ”¯æŒé“¾å¼ç»„åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼šä¸¥æ ¼æŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œï¼Œä¾‹å¦‚å…ˆè¿‡æ»¤å†åˆ†ç»„å¯æ˜¾è‘—æå‡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥ä¸è¾“å‡º&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¾“å…¥&lt;/strong&gt;ï¼šé›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£ï¼ˆæˆ–é€šè¿‡ &lt;code&gt;$match&lt;/code&gt; ç­›é€‰çš„å­é›†ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å‡º&lt;/strong&gt;ï¼šæœ€ç»ˆé˜¶æ®µçš„å¤„ç†ç»“æœï¼Œå¯ä»¥æ˜¯æ–‡æ¡£ã€ç»Ÿè®¡å€¼æˆ–å†™å…¥æ–°é›†åˆï¼ˆé€šè¿‡ &lt;code&gt;$out&lt;/code&gt; æˆ– &lt;code&gt;$merge&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒæ ¸å¿ƒé˜¶æ®µè¯¦è§£ä¸ç¤ºä¾‹"&gt;âš™ï¸ &lt;strong&gt;äºŒã€æ ¸å¿ƒé˜¶æ®µè¯¦è§£ä¸ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯å¸¸ç”¨é˜¶æ®µçš„åŠŸèƒ½å’Œè¯­æ³•ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;é˜¶æ®µ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¯­æ³•ç¤ºä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$match&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç­›é€‰ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ï¼Œç±»ä¼¼ SQL çš„ &lt;code&gt;WHERE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $match: { status: &amp;quot;A&amp;quot;, quantity: { $gt: 20 } } }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æå‰è¿‡æ»¤æ•°æ®ï¼Œå‡å°‘åç»­è®¡ç®—é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$project&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é‡å‘½åã€å¢åˆ å­—æ®µï¼Œæˆ–è®¡ç®—æ–°å­—æ®µ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $project: { name: 1, discount: { $multiply: [&amp;quot;$price&amp;quot;, 0.9] } } }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®æ ¼å¼è½¬æ¢æˆ–å­—æ®µåŠ å·¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$group&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰å­—æ®µåˆ†ç»„å¹¶è®¡ç®—èšåˆå€¼ï¼ˆå¦‚æ±‚å’Œã€å‡å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $group: { _id: &amp;quot;$category&amp;quot;, total: { $sum: &amp;quot;$quantity&amp;quot; } } }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç»Ÿè®¡åˆ†ç±»é”€å”®é¢æˆ–ç”¨æˆ·è¡Œä¸º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$unwind&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å°†æ•°ç»„å­—æ®µæ‹†åˆ†ä¸ºå¤šæ¡ç‹¬ç«‹æ–‡æ¡£ï¼ˆæ¯ä¸ªå…ƒç´ ä¸€æ–‡æ¡£ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $unwind: &amp;quot;$tags&amp;quot; }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åˆ†ææ ‡ç­¾ã€è¯„è®ºç­‰æ•°ç»„æ•°æ®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$sort&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰å­—æ®µæ’åº&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $sort: { total: -1 } }&lt;/code&gt; ï¼ˆ&lt;code&gt;-1&lt;/code&gt; é™åºï¼Œ&lt;code&gt;1&lt;/code&gt; å‡åºï¼‰&lt;/td&gt;
&lt;td&gt;ç»“æœæ’åºæˆ–åˆ†é¡µé¢„å¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$lookup&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·¨é›†åˆå·¦å¤–è¿æ¥ï¼ˆç±»ä¼¼ SQL &lt;code&gt;LEFT JOIN&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $lookup: { from: &amp;quot;orders&amp;quot;, localField: &amp;quot;user_id&amp;quot;, foreignField: &amp;quot;_id&amp;quot;, as: &amp;quot;orders&amp;quot; } }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å…³è”ç”¨æˆ·è®¢å•ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;$facet&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åœ¨åŒä¸€é˜¶æ®µæ‰§è¡Œå¤šä¸ªå­ç®¡é“ï¼Œè¾“å‡ºå¤šç»´ç»Ÿè®¡ç»“æœ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;{ $facet: { sales: [{ $group: { _id: null, total: { $sum: &amp;quot;$price&amp;quot; } }], topItems: [{ $limit: 5 }] } }&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¤šç»´åº¦åˆ†æï¼ˆå¦‚é”€å”®é¢+çƒ­é—¨å•†å“ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰é«˜çº§åŠŸèƒ½ä¸å¤æ‚æ“ä½œ"&gt;âš¡ &lt;strong&gt;ä¸‰ã€é«˜çº§åŠŸèƒ½ä¸å¤æ‚æ“ä½œ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¡¨è¾¾å¼æ“ä½œç¬¦&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°å­¦è®¡ç®—&lt;/strong&gt;ï¼š&lt;code&gt;$add&lt;/code&gt;ã€&lt;code&gt;$multiply&lt;/code&gt;ï¼ˆä¾‹ï¼š&lt;code&gt;{ $multiply: [&amp;quot;$price&amp;quot;, &amp;quot;$quantity&amp;quot;] }&lt;/code&gt; è®¡ç®—æ€»ä»·ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; æ¡ä»¶é€»è¾‘
ï¼š
```
$cond
```
å®ç°
```
IF-ELSE
```
ï¼Œä¾‹å¦‚æ ¹æ®ä»·æ ¼è®¾ç½®æŠ˜æ‰£ï¼š
```
{ $project: { discount: { $cond: { if: { $gt: [&amp;quot;$price&amp;quot;, 100] }, then: 10, else: 0 } } } }
```
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¥æœŸ/å­—ç¬¦ä¸²å¤„ç†&lt;/strong&gt;ï¼š&lt;code&gt;$dateFromString&lt;/code&gt; è½¬æ¢æ—¥æœŸæ ¼å¼ï¼Œ&lt;code&gt;$substr&lt;/code&gt; æˆªå–å­—ç¬¦ä¸² ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¤šé˜¶æ®µç»„åˆæ¡ˆä¾‹&lt;/strong&gt;
â€‹&lt;strong&gt;åœºæ™¯&lt;/strong&gt;â€‹ï¼šç»Ÿè®¡ 2024 å¹´ Q1 å„å“ç±»é”€å”®é¢ Top 3ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;db.sales.aggregate([
{ $match: { date: { $gte: &amp;#34;2024-01-01&amp;#34;, $lt: &amp;#34;2024-04-01&amp;#34; } } }, // è¿‡æ»¤æ—¥æœŸ
{ $group: { _id: &amp;#34;$category&amp;#34;, total: { $sum: { $multiply: [&amp;#34;$price&amp;#34;, &amp;#34;$quantity&amp;#34;] } } } }, // åˆ†ç»„è®¡ç®—
{ $sort: { total: -1 } }, // æŒ‰é”€å”®é¢é™åº
{ $limit: 3 } // å–å‰ä¸‰
])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ‰§è¡Œé¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;$match&lt;/code&gt; â†’ &lt;code&gt;$group&lt;/code&gt; â†’ &lt;code&gt;$sort&lt;/code&gt; â†’ &lt;code&gt;$limit&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å››æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹"&gt;ğŸ› ï¸ &lt;strong&gt;å››ã€æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é˜¶æ®µé¡ºåºä¼˜åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‰ç½®è¿‡æ»¤&lt;/strong&gt;ï¼šå°† &lt;code&gt;$match&lt;/code&gt; å’Œ &lt;code&gt;$project&lt;/code&gt; æ”¾åœ¨ç®¡é“å‰ç«¯ï¼Œå‡å°‘åç»­å¤„ç†çš„æ•°æ®é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•åˆ©ç”¨&lt;/strong&gt;ï¼š&lt;code&gt;$match&lt;/code&gt; å’Œ &lt;code&gt;$sort&lt;/code&gt; è‹¥åœ¨ç®¡é“å¼€å¤´ï¼Œå¯å‘½ä¸­ç´¢å¼•åŠ é€ŸæŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ä¸èµ„æºç®¡ç†&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜é™åˆ¶&lt;/strong&gt;ï¼š&lt;code&gt;$group&lt;/code&gt; å’Œ &lt;code&gt;$sort&lt;/code&gt; é»˜è®¤å†…å­˜ä¸Šé™ 100MBï¼Œè¶…é™éœ€å¯ç”¨ &lt;code&gt;allowDiskUse: true&lt;/code&gt; å†™å…¥ä¸´æ—¶æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç‰‡é›†ç¾¤ä¼˜åŒ–&lt;/strong&gt;ï¼šåœ¨ &lt;code&gt;$group&lt;/code&gt; å‰ä½¿ç”¨ &lt;code&gt;$match&lt;/code&gt; å‡å°‘è·¨åˆ†ç‰‡æ•°æ®ä¼ è¾“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›¿ä»£ MapReduce&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;èšåˆç®¡é“&lt;strong&gt;åŸç”Ÿä½¿ç”¨ C++ å®ç°&lt;/strong&gt;ï¼Œæ¯”åŸºäº JavaScript çš„ MapReduce &lt;strong&gt;æ€§èƒ½æå‡ 10 å€ä»¥ä¸Š&lt;/strong&gt;ï¼ŒMongoDB 5.0+ å·²å¼ƒç”¨ MapReduceã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-äº”å…¸å‹åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ &lt;strong&gt;äº”ã€å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å®ç°æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®æ—¶æŠ¥è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;$group&lt;/code&gt; + &lt;code&gt;$project&lt;/code&gt; è®¡ç®—é”€å”®æ€»é¢ã€å‡å€¼ç­‰&lt;/td&gt;
&lt;td&gt;æ¯æ—¥é”€å”®ç»Ÿè®¡çœ‹æ¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®æ¸…æ´—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;$project&lt;/code&gt; é‡å‘½åå­—æ®µ + &lt;code&gt;$unwind&lt;/code&gt; å±•å¼€æ•°ç»„ + &lt;code&gt;$match&lt;/code&gt; è¿‡æ»¤å¼‚å¸¸å€¼&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·è¡Œä¸ºæ—¥å¿—é¢„å¤„ç†&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤šè¡¨å…³è”åˆ†æ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;$lookup&lt;/code&gt; è¿æ¥è®¢å•è¡¨ä¸ç”¨æˆ·è¡¨ï¼Œ&lt;code&gt;$group&lt;/code&gt; æŒ‰ç”¨æˆ·åˆ†ç»„ç»Ÿè®¡&lt;/td&gt;
&lt;td&gt;é«˜ä»·å€¼ç”¨æˆ·è¯†åˆ«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é¡µæŸ¥è¯¢&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;$skip&lt;/code&gt; + &lt;code&gt;$limit&lt;/code&gt; ç»„åˆå®ç°ï¼ˆéœ€é…åˆ &lt;code&gt;$sort&lt;/code&gt; ä¿è¯é¡ºåºï¼‰&lt;/td&gt;
&lt;td&gt;å•†å“åˆ—è¡¨åˆ†é¡µå±•ç¤º&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å…­å¸¸è§é”™è¯¯ä¸è§„é¿æªæ–½"&gt;âš ï¸ &lt;strong&gt;å…­ã€å¸¸è§é”™è¯¯ä¸è§„é¿æªæ–½&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ•°ç»„å¤„ç†é™·é˜±&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$unwind
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;éæ•°ç»„å­—æ®µä¼šæŠ¥é”™ï¼Œéœ€å…ˆç”¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$ifNull
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è®¾ç½®é»˜è®¤å€¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{ $project: { tags: { $ifNull: [&amp;#34;$tags&amp;#34;, []] } } },
{ $unwind: &amp;#34;$tags&amp;#34; }
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç©ºæ•°ç»„ç» &lt;code&gt;$unwind&lt;/code&gt; åæ–‡æ¡£ä¼šè¢«ä¸¢å¼ƒï¼Œéœ€è®¾ &lt;code&gt;preserveNullAndEmptyArrays: true&lt;/code&gt; ä¿ç•™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆ†ç»„æ€§èƒ½ç“¶é¢ˆ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¿å…å¯¹é«˜åŸºæ•°å­—æ®µï¼ˆå¦‚ç”¨æˆ·IDï¼‰ç›´æ¥ &lt;code&gt;$group&lt;/code&gt;ï¼Œæ”¹ç”¨ &lt;code&gt;$bucket&lt;/code&gt; åˆ†æ¡¶ç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†ç‰‡é›†ç¾¤ä¸­ï¼Œç¡®ä¿ &lt;code&gt;$group&lt;/code&gt; çš„ &lt;code&gt;_id&lt;/code&gt; åŒ…å«åˆ†ç‰‡é”®ä»¥é¿å…è·¨åˆ†ç‰‡åˆå¹¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;èšåˆç®¡é“æ˜¯ MongoDB &lt;strong&gt;æœ€å¼ºå¤§çš„æ•°æ®åˆ†æå·¥å…·&lt;/strong&gt;ï¼Œé€šè¿‡çµæ´»çš„é˜¶æ®µç»„åˆå¯å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆæ•°æ®è½¬æ¢&lt;/strong&gt;ï¼š&lt;code&gt;$project&lt;/code&gt; é‡å¡‘ç»“æ„ï¼Œ&lt;code&gt;$unwind&lt;/code&gt; è§£æ„æ•°ç»„ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚èšåˆè®¡ç®—&lt;/strong&gt;ï¼š&lt;code&gt;$group&lt;/code&gt; åˆ†ç»„ç»Ÿè®¡ï¼Œ&lt;code&gt;$facet&lt;/code&gt; å¤šç»´åº¦åˆ†æï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨é›†åˆå…³è”&lt;/strong&gt;ï¼š&lt;code&gt;$lookup&lt;/code&gt; æ›¿ä»£å…³è”æŸ¥è¯¢ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºå¯æ§æ€§&lt;/strong&gt;ï¼š&lt;code&gt;allowDiskUse&lt;/code&gt; çªç ´å†…å­˜é™åˆ¶ï¼Œåˆ†ç‰‡é›†ç¾¤ä¼˜åŒ–åˆ†å¸ƒå¼è®¡ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼šå§‹ç»ˆå°† &lt;code&gt;$match&lt;/code&gt; å‰ç½®ä»¥å‡å°‘æ•°æ®é‡ï¼›é¿å… JavaScript è¡¨è¾¾å¼ï¼›ä¼˜å…ˆä½¿ç”¨èšåˆç®¡é“è€Œéå·²å¼ƒç”¨çš„ MapReduceã€‚ å…·ä½“è¯­æ³•è¯¦è§ &lt;a class="link" href="https://www.mongodb.com/docs/manual/core/aggregation-pipeline/" target="_blank" rel="noopener"
&gt;MongoDB èšåˆç®¡é“æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="mapreduce"&gt;MapReduce
&lt;/h2&gt;&lt;p&gt;åœ¨ MongoDB ä¸­ï¼Œèšåˆç®¡é“ï¼ˆAggregation Pipelineï¼‰å’Œ MapReduce æ˜¯ä¸¤ç§æ ¸å¿ƒçš„æ•°æ®å¤„ç†æ¨¡å‹ï¼Œå®ƒä»¬åœ¨æ€§èƒ½ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹ä»æ‰§è¡Œæœºåˆ¶ã€èµ„æºæ¶ˆè€—ã€æ‰©å±•æ€§ç­‰ç»´åº¦è¯¦ç»†åˆ†æä¸¤è€…çš„å…·ä½“å·®å¼‚ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸€æ‰§è¡Œæœºåˆ¶ä¸æ€§èƒ½å·®å¼‚"&gt;âš™ï¸ &lt;strong&gt;ä¸€ã€æ‰§è¡Œæœºåˆ¶ä¸æ€§èƒ½å·®å¼‚&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MapReduce&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ‰§è¡Œå¼•æ“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åŸç”Ÿ C++ å®ç°&lt;/strong&gt;ï¼Œç›´æ¥æ“ä½œ BSON æ•°æ®ï¼Œæ— è§£é‡Šå™¨å¼€é”€ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;JavaScript å¼•æ“æ‰§è¡Œ&lt;/strong&gt;ï¼Œéœ€è§£æ JS ä»£ç ï¼Œæ€§èƒ½æŸè€—é«˜ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®å¤„ç†æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æµå¼ç®¡é“å¤„ç†&lt;/strong&gt;ï¼Œæ•°æ®åœ¨å†…å­˜ä¸­é€é˜¶æ®µä¼ é€’ï¼Œå‡å°‘ I/O å¼€é”€ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;åˆ†é˜¶æ®µè¯»å†™ç£ç›˜&lt;/strong&gt;ï¼šMap è¾“å‡ºä¸­é—´ç»“æœè½ç›˜ï¼ŒReduce é˜¶æ®µå†è¯»å–ï¼ŒI/O å‹åŠ›å¤§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†…å­˜é™åˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•é˜¶æ®µé»˜è®¤ 100MB å†…å­˜é™åˆ¶ï¼Œå¯é€šè¿‡ &lt;code&gt;allowDiskUse&lt;/code&gt; çªç ´ã€‚&lt;/td&gt;
&lt;td&gt;æ— æ˜ç¡®å†…å­˜é™åˆ¶ï¼Œä½†é¢‘ç¹ç£ç›˜æº¢å†™å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•æ”¯æŒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¼ºä¾èµ–ç´¢å¼•&lt;/strong&gt;ï¼š&lt;code&gt;$match&lt;/code&gt;ã€&lt;code&gt;$sort&lt;/code&gt; ç­‰é˜¶æ®µå¯å‘½ä¸­ç´¢å¼•åŠ é€Ÿã€‚&lt;/td&gt;
&lt;td&gt;ä»…è¾“å…¥é˜¶æ®µæ”¯æŒç´¢å¼•ï¼ŒReduce é˜¶æ®µæ— æ³•åˆ©ç”¨ç´¢å¼•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½å®æµ‹å¯¹æ¯”&lt;/strong&gt;ï¼šç›¸åŒèšåˆä»»åŠ¡ï¼ˆå¦‚åˆ†ç»„ç»Ÿè®¡ï¼‰ï¼Œèšåˆç®¡é“çš„é€Ÿåº¦é€šå¸¸æ¯” MapReduce &lt;strong&gt;å¿« 5â€“10 å€&lt;/strong&gt;ï¼Œå°¤å…¶åœ¨ TB çº§æ•°æ®ä¸‹å·®å¼‚æ›´æ˜¾è‘—ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-äºŒèµ„æºæ¶ˆè€—å¯¹æ¯”"&gt;ğŸ“Š &lt;strong&gt;äºŒã€èµ„æºæ¶ˆè€—å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CPU ä¸å†…å­˜&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt;ï¼šCPU å¼€é”€ä½ï¼Œå†…å­˜å ç”¨å¯æ§ï¼ˆé€šè¿‡ &lt;code&gt;$project&lt;/code&gt; æå‰è¿‡æ»¤å­—æ®µï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MapReduce&lt;/strong&gt;ï¼šJS å¼•æ“è§£ææ¶ˆè€—å¤§é‡ CPUï¼Œä¸” Map/Reduce é—´æ•°æ®äº¤æ¢æ˜“å¯¼è‡´å†…å­˜æº¢å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç£ç›˜ I/O&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt;ï¼šä»…åœ¨ &lt;code&gt;allowDiskUse&lt;/code&gt; å¯ç”¨æ—¶å†™ä¸´æ—¶æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MapReduce&lt;/strong&gt;ï¼š&lt;strong&gt;å¼ºåˆ¶å†™ç£ç›˜&lt;/strong&gt;ï¼šMap è¾“å‡ºã€Reduce è¾“å…¥/è¾“å‡ºå‡éœ€è½ç›˜ï¼ŒI/O ç“¶é¢ˆæ˜æ˜¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œå¼€é”€&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;MapReduce éœ€è·¨åˆ†ç‰‡ä¼ è¾“å¤§é‡ä¸­é—´æ•°æ®ï¼Œè€Œèšåˆç®¡é“å¯é€šè¿‡åˆ†ç‰‡é”®ä¸‹æ¨è®¡ç®—ï¼ˆå¦‚ &lt;code&gt;$match&lt;/code&gt; æå‰è¿‡æ»¤ï¼‰å‡å°‘è·¨èŠ‚ç‚¹æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰æ‰©å±•æ€§ä¸å¹¶å‘èƒ½åŠ›"&gt;ğŸ”§ &lt;strong&gt;ä¸‰ã€æ‰©å±•æ€§ä¸å¹¶å‘èƒ½åŠ›&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MapReduce&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†ç‰‡é›†ç¾¤ä¼˜åŒ–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;strong&gt;åˆ†ç‰‡æ„ŸçŸ¥&lt;/strong&gt;ï¼š&lt;code&gt;$group&lt;/code&gt; è‡ªåŠ¨å¹¶è¡ŒåŒ–ï¼Œå‡è¡¡å™¨åˆ†é…ä»»åŠ¡ã€‚&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨å¤„ç†åˆ†ç‰‡æ•°æ®åˆå¹¶ï¼Œæ˜“å‡ºç°è®¡ç®—å€¾æ–œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é”æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ–‡æ¡£çº§é”&lt;/strong&gt;ï¼Œè¯»å†™å¹¶å‘åº¦é«˜ã€‚&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å…¨å±€å†™é”&lt;/strong&gt;ï¼šReduce è¾“å‡ºé˜¶æ®µé”æ•´ä¸ªæ•°æ®åº“ï¼Œé˜»å¡å…¶ä»–æ“ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®æ—¶æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€‚åˆ&lt;strong&gt;å®æ—¶æŸ¥è¯¢&lt;/strong&gt;ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰ã€‚&lt;/td&gt;
&lt;td&gt;ä»…é€‚åˆ&lt;strong&gt;ç¦»çº¿æ‰¹å¤„ç†&lt;/strong&gt;ï¼ˆåˆ†é’Ÿçº§å»¶è¿Ÿï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å››é€‚ç”¨åœºæ™¯å¯¹æ¯”"&gt;âš–ï¸ &lt;strong&gt;å››ã€é€‚ç”¨åœºæ™¯å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¨èæ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®æ—¶æ•°æ®åˆ†æ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èšåˆç®¡é“&lt;/td&gt;
&lt;td&gt;ä½å»¶è¿Ÿå“åº”ï¼Œæ”¯æŒå¤æ‚æµæ°´çº¿ï¼ˆå¦‚ &lt;code&gt;$facet&lt;/code&gt; å¤šç»´åº¦ç»Ÿè®¡ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§è§„æ¨¡ç¦»çº¿è®¡ç®—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MapReduce&lt;/td&gt;
&lt;td&gt;å¯å¤„ç†è¶…å¤§æ•°æ®é›†ï¼ˆPB çº§ï¼‰ï¼Œä½†éœ€å®¹å¿é«˜å»¶è¿Ÿã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªå®šä¹‰èšåˆé€»è¾‘&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;MapReduce&lt;/td&gt;
&lt;td&gt;æ”¯æŒ JavaScript ç¼–å†™å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚è¿­ä»£è®¡ç®—ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜é¢‘å¢é‡æ›´æ–°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;èšåˆç®¡é“ + &lt;code&gt;$merge&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒç»“æœé›†å¢é‡æ›´æ–°ï¼Œé¿å…å…¨é‡é‡ç®—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-äº”æ€§èƒ½ä¼˜åŒ–ç­–ç•¥å·®å¼‚"&gt;ğŸ› ï¸ &lt;strong&gt;äº”ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥å·®å¼‚&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èšåˆç®¡é“ä¼˜åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é˜¶æ®µé¡ºåº&lt;/strong&gt;ï¼š&lt;code&gt;$match&lt;/code&gt; â†’ &lt;code&gt;$project&lt;/code&gt; â†’ &lt;code&gt;$sort&lt;/code&gt;ï¼ˆåˆ©ç”¨ ESR ç´¢å¼•åŸåˆ™ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç´¢å¼•è®¾è®¡&lt;/strong&gt;ï¼šä¸º &lt;code&gt;$match&lt;/code&gt; å­—æ®µåˆ›å»ºå¤åˆç´¢å¼•ï¼ˆå¦‚ &lt;code&gt;status + created_at&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é¡µæŠ€å·§&lt;/strong&gt;ï¼šç”¨ &lt;code&gt;$facet&lt;/code&gt; åŒæ—¶è¿”å›æ•°æ®å’Œæ€»æ•°ï¼Œé¿å…äºŒæ¬¡æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MapReduce ä¼˜åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Combiner é¢„èšåˆ&lt;/strong&gt;ï¼šåœ¨ Map ç«¯å±€éƒ¨åˆå¹¶æ•°æ®ï¼Œå‡å°‘ Reduce è´Ÿè½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾“å‡ºå®šå‘&lt;/strong&gt;ï¼šç»“æœå†™å…¥åˆ†ç‰‡é›†åˆï¼Œå¹¶è¡Œå†™å…¥åŠ é€Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“æ ¸å¿ƒå·®å¼‚ä¸é€‰å‹å»ºè®®"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ï¼šæ ¸å¿ƒå·®å¼‚ä¸é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å¯¹æ¯”ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;èšåˆç®¡é“&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;MapReduce&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­â­â­â­â­ï¼ˆé«˜æ•ˆå®æ—¶ï¼‰&lt;/td&gt;
&lt;td&gt;â­â­ï¼ˆé«˜å»¶è¿Ÿç¦»çº¿ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘æ•ˆç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­â­â­â­ï¼ˆå£°æ˜å¼è¯­æ³•ï¼‰&lt;/td&gt;
&lt;td&gt;â­â­ï¼ˆéœ€å†™ JS å‡½æ•°ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºæ¶ˆè€—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­â­â­â­ï¼ˆä½ I/Oï¼‰&lt;/td&gt;
&lt;td&gt;â­ï¼ˆé«˜ç£ç›˜/CPUï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â­â­â­ï¼ˆå›ºå®šæ“ä½œç¬¦ï¼‰&lt;/td&gt;
&lt;td&gt;â­â­â­â­ï¼ˆè‡ªå®šä¹‰é€»è¾‘ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;ï¼š
âœ… â€‹&lt;strong&gt;é»˜è®¤é€‰æ‹©èšåˆç®¡é“&lt;/strong&gt;â€‹ï¼šé€‚ç”¨äº 90% çš„åœºæ™¯ï¼ˆå®æ—¶ç»Ÿè®¡ã€æ•°æ®è½¬æ¢ã€å…³è”åˆ†æï¼‰ã€‚
âš ï¸ â€‹&lt;strong&gt;ä»…å½“ä»¥ä¸‹æƒ…å†µç”¨ MapReduce&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è‡ªå®šä¹‰å¤æ‚ç®—æ³•ï¼ˆå¦‚æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¤„ç†è¶…å¤§æ•°æ®é›†ä¸”å¯æ¥å—å°æ—¶çº§å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;å†å²ç³»ç»Ÿå…¼å®¹æ€§è¦æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯é€šè¿‡ &lt;code&gt;explain()&lt;/code&gt; åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Œæˆ–ä½¿ç”¨ MongoDB Compass å¯è§†åŒ–éªŒè¯ç®¡é“æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="operations"&gt;Operations
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://www.youtube.com/watch?v=c2M-rlkkT5o" target="_blank" rel="noopener"
&gt;Learn MongoDB in 1 hour ğŸƒ&lt;/a&gt;&lt;/p&gt;</description></item><item><title>ã€Nebulaã€‘Fundamentals</title><link>https://dyhes.github.io/p/nebulafundamentals/</link><pubDate>Wed, 06 Aug 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/nebulafundamentals/</guid><description>&lt;h2 id="introduction"&gt;Introduction
&lt;/h2&gt;&lt;p&gt;A graph database, such as NebulaGraph, is a database that specializes in storing vast graph networks and retrieving information from them. It efficiently stores data as vertices (nodes) and edges (relationships) in labeled property graphs. Properties can be attached to both vertices and edges. Each vertex can have one or multiple tags (labels).&lt;/p&gt;
&lt;p&gt;Graph databases are well suited for storing &lt;strong&gt;most&lt;/strong&gt; kinds of data models abstracted from reality. Things are connected in almost all fields in the world. Modeling systems like relational databases extract the relationships between entities and squeeze them into table columns alone, with their types and properties stored in other columns or even other tables. This makes data management time-consuming and cost-ineffective.&lt;/p&gt;
&lt;p&gt;NebulaGraph, as a typical native graph database, allows you to &lt;strong&gt;store the rich relationships as edges&lt;/strong&gt; with edge types and properties directly attached to them.&lt;/p&gt;
&lt;h3 id="data-model"&gt;Data Model
&lt;/h3&gt;&lt;p&gt;NebulaGraph data model uses six data structures to store data. They are graph spaces, vertices, edges, tags, edge types and properties.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Graph spaces&lt;/strong&gt;: Graph spaces are used to isolate data from different teams or programs. Data stored in different graph spaces are securely isolated. Storage replications, privileges, and partitions can be assigned.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Vertices&lt;/strong&gt;: Vertices are used to store entities.&lt;/p&gt;
&lt;p&gt;In NebulaGraph, vertices are identified with vertex identifiers (i.e. &lt;code&gt;VID&lt;/code&gt;). The &lt;code&gt;VID&lt;/code&gt; must be &lt;strong&gt;unique in the same graph space&lt;/strong&gt;. VID should be int64, or fixed_string(N).&lt;/p&gt;
&lt;p&gt;A vertex has &lt;strong&gt;zero to multiple&lt;/strong&gt; tags.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Edges&lt;/strong&gt;: Edges are used to connect vertices. An edge is a &lt;strong&gt;connection or behavior&lt;/strong&gt; between two vertices.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;There can be multiple edges between two vertices.&lt;/li&gt;
&lt;li&gt;Edges are &lt;strong&gt;directed&lt;/strong&gt;. &lt;code&gt;-&amp;gt;&lt;/code&gt; identifies the directions of edges. Edges can be traversed in &lt;strong&gt;either&lt;/strong&gt; direction.&lt;/li&gt;
&lt;li&gt;An edge is identified uniquely with &lt;code&gt;&amp;lt;a source vertex, an edge type, a rank value, and a destination vertex&amp;gt;&lt;/code&gt;. Edges &lt;strong&gt;have no EID&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;An edge must have &lt;strong&gt;exactly one edge type&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;The rank value is an &lt;strong&gt;immutable&lt;/strong&gt; user-assigned 64-bit signed integer. It &lt;strong&gt;identifies&lt;/strong&gt; the edges with the same edge type between two vertices. Edges are sorted by their rank values. The edge with the greatest rank value is listed first. The default rank value is zero.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: Tags are used to &lt;strong&gt;categorize vertices&lt;/strong&gt;. Vertices that have the same tag share the same definition of properties.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Edge types&lt;/strong&gt;: Edge types are used to &lt;strong&gt;categorize edges&lt;/strong&gt;. Edges that have the same edge type share the same definition of properties.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Properties&lt;/strong&gt;: Properties are key-value pairs. Both vertices and edges are containers for properties.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="path"&gt;Path
&lt;/h3&gt;&lt;p&gt;In graph theory, a path in a graph is a finite or infinite sequence of edges which joins a sequence of vertices. Paths are fundamental concepts of graph theory.&lt;/p&gt;
&lt;p&gt;Paths can be categorized into 3 types: &lt;code&gt;walk&lt;/code&gt;, &lt;code&gt;trail&lt;/code&gt;, and &lt;code&gt;path&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A &lt;code&gt;walk&lt;/code&gt; is a finite or infinite sequence of edges. &lt;strong&gt;Both vertices and edges&lt;/strong&gt; can be repeatedly visited in graph traversal.&lt;/li&gt;
&lt;li&gt;A &lt;code&gt;trail&lt;/code&gt; is a finite sequence of edges. &lt;strong&gt;Only vertices&lt;/strong&gt; can be repeatedly visited in graph traversal.
&lt;ul&gt;
&lt;li&gt;A &lt;code&gt;cycle&lt;/code&gt; refers to a closed &lt;code&gt;trail&lt;/code&gt;. Only the terminal vertices can be repeatedly visited.&lt;/li&gt;
&lt;li&gt;A &lt;code&gt;circuit&lt;/code&gt; refers to a closed &lt;code&gt;trail&lt;/code&gt;. Edges cannot be repeatedly visited in graph traversal. Apart from the terminal vertices, other vertices can also be repeatedly visited.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;A &lt;code&gt;path&lt;/code&gt; is a finite sequence of edges. Neither vertices nor edges can be repeatedly visited in graph traversal.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="architecture"&gt;Architecture
&lt;/h2&gt;&lt;p&gt;NebulaGraph consists of three services: the Graph Service, the Storage Service, and the Meta Service. It applies the separation of storage and computing architecture.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://docs-cdn.nebula-graph.com.cn/figures/nebula-graph-architecture_3.png"
loading="lazy"
alt="NebulaGraph architecture"
&gt;&lt;/p&gt;
&lt;h3 id="meta-service"&gt;Meta Service
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/meta-architecture1.png"
loading="lazy"
alt="The architecture of the Meta Service"
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Manages user accounts&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Manages graph spaces&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Manages partitions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Manages schema information&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Manages jobs&lt;/p&gt;
&lt;p&gt;The Job Management module in the Meta Service is responsible for the creation, queuing, querying, and deletion of jobs.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="graph-service"&gt;Graph Service
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://docs-cdn.nebula-graph.com.cn/docs-2.0/1.introduction/2.nebula-graph-architecture/query-engine-architecture.png"
loading="lazy"
alt="The architecture of the Graph Service"
&gt;&lt;/p&gt;
&lt;p&gt;The Graph Service is used to process the query. It has four submodules: Parser, Validator, Planner, and Executor.&lt;/p&gt;
&lt;p&gt;After a query is sent to the Graph Service, it will be processed by the following four submodules:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Parser&lt;/strong&gt;: Performs lexical analysis and syntax analysis.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Validator&lt;/strong&gt;: Validates the statements.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Planner&lt;/strong&gt;: Generates and optimizes the execution plans.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Executor&lt;/strong&gt;: Executes the plans with operators.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="storage-service"&gt;Storage Service
&lt;/h3&gt;&lt;p&gt;&lt;img src="https://www-cdn.nebula-graph.com.cn/nebula-blog/nebula-reading-storage-architecture.png"
loading="lazy"
alt="image"
&gt;&lt;/p&gt;
&lt;h2 id="storage-writing"&gt;Storage writing
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://docs-cdn.nebula-graph.com.cn/figures/storage_write_process.png"
loading="lazy"
alt="image"
&gt;&lt;/p&gt;
&lt;h2 id="ngql"&gt;nGQL
&lt;/h2&gt;&lt;h3 id="operators"&gt;Operators
&lt;/h3&gt;&lt;p&gt;Set&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Operator &lt;code&gt;UNION DISTINCT&lt;/code&gt; (or by short &lt;code&gt;UNION&lt;/code&gt;) returns the union of two sets A and B without duplicated elements.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Operator &lt;code&gt;UNION ALL&lt;/code&gt; returns the union of two sets A and B with duplicated elements.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;String&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;Concatenates strings.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CONTAINS&lt;/td&gt;
&lt;td&gt;Performs searchings in strings.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(NOT) IN&lt;/td&gt;
&lt;td&gt;Checks whether a value is within a set of values.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(NOT) STARTS WITH&lt;/td&gt;
&lt;td&gt;Performs matchings at the beginning of a string.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(NOT) ENDS WITH&lt;/td&gt;
&lt;td&gt;Performs matchings at the end of a string.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Regular expressions&lt;/td&gt;
&lt;td&gt;Perform string matchings using regular expressions.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;List&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;List operator&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;Concatenates lists.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;IN&lt;/td&gt;
&lt;td&gt;Checks if an element exists in a list.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[]&lt;/td&gt;
&lt;td&gt;Accesses an element(s) in a list using the index operator.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="query-statement"&gt;Query Statement
&lt;/h3&gt;&lt;p&gt;The primary query statements in NebulaGraph fall into the following categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#fetch_prop_on" target="_blank" rel="noopener"
&gt;FETCH PROP ON&lt;/a&gt; &lt;strong&gt;:&lt;/strong&gt; Retrieve properties of a specified vertex or edge.&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#lookup_on" target="_blank" rel="noopener"
&gt;LOOKUP ON&lt;/a&gt;ï¼š&lt;strong&gt;Index-based&lt;/strong&gt; querying of vertex or edge IDs.&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#go" target="_blank" rel="noopener"
&gt;GO&lt;/a&gt;ï¼šTraverse the graph based on a given vertex and return information about the starting vertex, edges, or target vertices as needed.&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#match" target="_blank" rel="noopener"
&gt;MATCH&lt;/a&gt;ï¼šExecute complex &lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/1.nGQL-overview/3.graph-patterns/" target="_blank" rel="noopener"
&gt;graph pattern&lt;/a&gt; matching queries.&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#find_path" target="_blank" rel="noopener"
&gt;FIND PATH&lt;/a&gt;ï¼šQuery paths between given starting and target vertices or query properties of vertices and edges along paths.&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#get_subgraph" target="_blank" rel="noopener"
&gt;GET SUBGRAPH&lt;/a&gt;ï¼šExtract a portion of the graph that satisfies specific conditions or query properties of vertices and edges in the subgraph.&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/7.general-query-statements/1.general-query-statements-overview/#show" target="_blank" rel="noopener"
&gt;SHOW&lt;/a&gt;ï¼šObtain metadata information from the database&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;FETCH PROP ON&lt;/code&gt; and &lt;code&gt;LOOKUP ON&lt;/code&gt; statements are primarily for basic data queries, &lt;code&gt;GO&lt;/code&gt; and &lt;code&gt;MATCH&lt;/code&gt; for more intricate queries and graph traversals, &lt;code&gt;FIND PATH&lt;/code&gt; and &lt;code&gt;GET SUBGRAPH&lt;/code&gt; for path and subgraph queries, and &lt;code&gt;SHOW&lt;/code&gt; for retrieving database metadata.&lt;/p&gt;
&lt;h3 id="clause"&gt;Clause
&lt;/h3&gt;&lt;p&gt;LIMIT&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;LIMIT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;offset&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;number_rows&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;SAMPLE&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;go_statement&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SAMPLE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;sample_list&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src="https://docs-cdn.nebula-graph.com.cn/figures/sample_in_go.png"
loading="lazy"
alt="SAMPLE in GO"
&gt;&lt;/p&gt;
&lt;p&gt;WITH&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;WITH&lt;/code&gt; clause can retrieve the output from a query part, process it, and pass it to the next query part as the input.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;WITH&lt;/code&gt; has a similar function with the &lt;a class="link" href="https://docs.nebula-graph.io/3.6.0/3.ngql-guide/5.operators/4.pipe/" target="_blank" rel="noopener"
&gt;Pipe&lt;/a&gt; symbol in native nGQL, but they work in different ways. DO NOT use pipe symbols in the openCypher syntax or use &lt;code&gt;WITH&lt;/code&gt; in native nGQL statements.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;UNWIND&lt;/p&gt;
&lt;p&gt;&lt;code&gt;UNWIND&lt;/code&gt; transform a list into a sequence of rows.&lt;/p&gt;
&lt;h3 id="property-reference"&gt;Property Reference
&lt;/h3&gt;&lt;p&gt;nGQL provides property references to allow you to refer to the properties of the source vertex, the destination vertex, and the edge in the &lt;code&gt;GO&lt;/code&gt; statement, and to refer to the output results of the statement in composite queries.&lt;/p&gt;
&lt;h4 id="vertex"&gt;Vertex
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Parameter&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;$^&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Used to get the property of the source vertex.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;$$&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Used to get the property of the destination vertex.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tag_name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;prop_name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vertex&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;property&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reference&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="err"&gt;$$&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;tag_name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;prop_name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Destination&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vertex&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;property&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reference&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="edge"&gt;Edge
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Parameter&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;_src&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The source vertex ID of the edge&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;_dst&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The destination vertex ID of the edge&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;_type&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The internal encoding of edge types that uses sign to indicate direction. Positive numbers represent forward edges, while negative numbers represent backward edges.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;_rank&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The rank value for the edge&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;edge_type&amp;gt;.&amp;lt;prop_name&amp;gt; # User-defined edge property reference
&amp;lt;edge_type&amp;gt;._src|_dst|_type|_rank # Built-in edge property reference
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="index"&gt;Index
&lt;/h2&gt;&lt;p&gt;Indexes are built to fast process graph queries. Nebula Graph supports two kinds of indexes: &lt;strong&gt;native&lt;/strong&gt; indexes and &lt;strong&gt;full-text&lt;/strong&gt; indexes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Indexes can improve query performance but may reduce write performance.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;An index is a &lt;strong&gt;prerequisite&lt;/strong&gt; for locating data when executing a &lt;code&gt;LOOKUP&lt;/code&gt;statement. If there is no index, an error will be reported when executing the &lt;code&gt;LOOKUP&lt;/code&gt; statement.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;When using an index, NebulaGraph will &lt;strong&gt;automatically select&lt;/strong&gt; the most optimal index.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Indexes with high selectivity, that is, when the ratio of the number of records with unique values in the index column to the total number of records is high (for example, the ratio for &lt;code&gt;ID numbers&lt;/code&gt; is &lt;code&gt;1&lt;/code&gt;), can significantly improve query performance. For indexes with low selectivity (such as &lt;code&gt;country&lt;/code&gt;), query performance might not experience a substantial improvement.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="native-index"&gt;Native Index
&lt;/h2&gt;&lt;h3 id="native-indexes"&gt;Native indexes
&lt;/h3&gt;&lt;p&gt;Native indexes allow querying data based on a given property. Features are as follows.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;There are two kinds of native indexes: tag index and edge type index.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Native indexes must be updated &lt;strong&gt;manually&lt;/strong&gt;. You can use the &lt;code&gt;REBUILD INDEX&lt;/code&gt; statement to update native indexes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Native indexes support indexing &lt;strong&gt;multiple properties on a tag or an edge type&lt;/strong&gt; (composite indexes), but do not support indexing across multiple tags or edge types.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="full-text-indexes"&gt;Full-text Indexes
&lt;/h3&gt;&lt;p&gt;Full-text indexes are used to do prefix, wildcard, regexp, and fuzzy search on a string property. Features are as follows.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Full-text indexes allow indexing just one property.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Full-text indexes do not support logical operations such as &lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;OR&lt;/code&gt;, and &lt;code&gt;NOT&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>ã€DBã€‘åˆ†å¸ƒå¼</title><link>https://dyhes.github.io/p/db%E5%88%86%E5%B8%83%E5%BC%8F/</link><pubDate>Sat, 21 Jun 2025 00:00:00 +0000</pubDate><guid>https://dyhes.github.io/p/db%E5%88%86%E5%B8%83%E5%BC%8F/</guid><description>&lt;h2 id="binlog"&gt;Binlog
&lt;/h2&gt;&lt;p&gt;MySQL çš„ Binlogï¼ˆäºŒè¿›åˆ¶æ—¥å¿—ï¼‰åœ¨ä¸»åº“ä¸Šçš„è®°å½•æ—¶æœºæ˜¯ &lt;strong&gt;åœ¨ SQL è¯­å¥æ‰§è¡Œä¹‹åã€äº‹åŠ¡æäº¤ä¹‹å‰&lt;/strong&gt;ï¼Œå…·ä½“æµç¨‹ä¸äº‹åŠ¡æäº¤æœºåˆ¶å¼ºç›¸å…³ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†åˆ†æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-binlog-è®°å½•çš„æ ¸å¿ƒæµç¨‹"&gt;ğŸ”„ &lt;strong&gt;Binlog è®°å½•çš„æ ¸å¿ƒæµç¨‹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¯­å¥æ‰§è¡Œé˜¶æ®µ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“ä¸»åº“æ‰§è¡Œä¸€æ¡æ•°æ®ä¿®æ”¹è¯­å¥ï¼ˆå¦‚ &lt;code&gt;INSERT&lt;/code&gt;/&lt;code&gt;UPDATE&lt;/code&gt;/&lt;code&gt;DELETE&lt;/code&gt;ï¼‰æ—¶ï¼Œ&lt;strong&gt;è¯­å¥ä¼šå…ˆç”±å­˜å‚¨å¼•æ“ï¼ˆå¦‚ InnoDBï¼‰æ‰§è¡Œ&lt;/strong&gt;ï¼Œå°†æ•°æ®å˜æ›´å†™å…¥å†…å­˜ï¼ˆBuffer Poolï¼‰å¹¶ç”Ÿæˆ &lt;strong&gt;Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­¤æ—¶ Binlog å°šæœªè®°å½•&lt;/strong&gt;ï¼Œä½†å·²ç”Ÿæˆå¯¹åº”çš„é€»è¾‘æ“ä½œæè¿°ï¼ˆä¾‹å¦‚è¡Œå˜æ›´äº‹ä»¶æˆ–åŸå§‹ SQL è¯­å¥ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡æäº¤å‰çš„å‡†å¤‡é˜¶æ®µ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡æäº¤å‰ï¼ŒMySQL ä¼šå°† &lt;strong&gt;Binlog äº‹ä»¶å†™å…¥å†…å­˜ç¼“å†²åŒºï¼ˆBinlog Cacheï¼‰&lt;/strong&gt;ã€‚æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„ Binlog Cacheï¼Œç”¨äºæš‚å­˜è¯¥äº‹åŠ¡çš„æ‰€æœ‰æ“ä½œæ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;-- äº‹åŠ¡å†…æ‰§è¡Œ
UPDATE users SET balance = 100 WHERE id = 1;
-- Binlog äº‹ä»¶ç”Ÿæˆå¹¶æš‚å­˜åˆ°çº¿ç¨‹çš„ Binlog Cache
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡æäº¤æ—¶çš„æŒä¹…åŒ–é˜¶æ®µ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å½“æ‰§è¡Œ COMMIT æ—¶ï¼ŒMySQL é€šè¿‡ ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Prepare é˜¶æ®µ&lt;/strong&gt;ï¼šInnoDB å°† Redo Log æ ‡è®°ä¸º &lt;code&gt;PREPARE&lt;/code&gt; çŠ¶æ€ï¼ˆç¡®ä¿å´©æºƒåå¯æ¢å¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Write &amp;amp; Fsync é˜¶æ®µ&lt;/strong&gt;ï¼šå°† Binlog Cache ä¸­çš„å®Œæ•´äº‹åŠ¡æ—¥å¿—å†™å…¥ &lt;strong&gt;Binlog æ–‡ä»¶&lt;/strong&gt;ï¼ˆå…ˆå†™å…¥æ–‡ä»¶ç³»ç»Ÿçš„ Page Cacheï¼Œå†æ ¹æ®é…ç½®å†³å®šæ˜¯å¦åˆ·ç›˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Commit é˜¶æ®µ&lt;/strong&gt;ï¼šInnoDB å°† Redo Log æ ‡è®°ä¸º &lt;code&gt;COMMIT&lt;/code&gt;ï¼Œå®Œæˆäº‹åŠ¡æäº¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ­¤æ—¶ Binlog æ‰çœŸæ­£è®°å½•åˆ°ç£ç›˜æ–‡ä»¶ä¸­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®æœºåˆ¶è§£æ"&gt;âš™ï¸ &lt;strong&gt;å…³é”®æœºåˆ¶è§£æ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="binlog-å†™å…¥çš„ç‰©ç†æ—¶æœº"&gt;&lt;strong&gt;Binlog å†™å…¥çš„ç‰©ç†æ—¶æœº&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Binlog Cache â†’ Page Cache&lt;/strong&gt;
äº‹åŠ¡æäº¤æ—¶ï¼ŒBinlog Cache çš„å†…å®¹ä¸€æ¬¡æ€§å†™å…¥æ“ä½œç³»ç»Ÿçš„ â€‹&lt;strong&gt;Page Cacheï¼ˆå†…å­˜ç¼“å­˜ï¼‰â€‹&lt;/strong&gt;ï¼Œè¿™ä¸€æ­¥ç§°ä¸º &lt;code&gt;write&lt;/code&gt; æ“ä½œï¼ˆé€Ÿåº¦å¿«ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;Page Cache â†’ ç£ç›˜æŒä¹…åŒ–æ˜¯å¦ç«‹å³åˆ·ç›˜å–å†³äºå‚æ•° sync_binlogï¼š
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;&lt;code&gt;sync_binlog&lt;/code&gt; å€¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è¡Œä¸º&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®å®‰å…¨æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–æ“ä½œç³»ç»Ÿå®šæœŸåˆ·ç›˜ï¼ˆçº¦æ¯ç§’1æ¬¡ï¼‰&lt;/td&gt;
&lt;td&gt;å¯èƒ½ä¸¢å¤±æœ€è¿‘1ç§’å†…çš„äº‹åŠ¡æ—¥å¿—&lt;/td&gt;
&lt;td&gt;æœ€é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡æäº¤éƒ½å¼ºåˆ¶åˆ·ç›˜ï¼ˆ&lt;code&gt;fsync&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;æœ€é«˜ï¼ˆå´©æºƒåå‡ ä¹æ— æ•°æ®ä¸¢å¤±ï¼‰&lt;/td&gt;
&lt;td&gt;è¾ƒä½ï¼ˆé¢‘ç¹ I/Oï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Nï¼ˆ&amp;gt;1ï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç´¯ç§¯ N ä¸ªäº‹åŠ¡æäº¤ååˆ·ç›˜&lt;/td&gt;
&lt;td&gt;å¯èƒ½ä¸¢å¤±æœ€è¿‘ N ä¸ªäº‹åŠ¡æ—¥å¿—&lt;/td&gt;
&lt;td&gt;ä¸­ç­‰ï¼ˆæŠ˜ä¸­æ–¹æ¡ˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸ºä»€ä¹ˆå¿…é¡»åœ¨è¯­å¥æ‰§è¡Œåè®°å½•"&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆå¿…é¡»åœ¨è¯­å¥æ‰§è¡Œåè®°å½•ï¼Ÿ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ•°æ®æ­£ç¡®æ€§ä¾èµ–æ‰§è¡Œç»“æœ Binlog éœ€è®°å½• å®é™…ç”Ÿæ•ˆçš„æ“ä½œã€‚ä¾‹å¦‚ï¼š
&lt;ul&gt;
&lt;li&gt;è‹¥è¯­å¥å› å”¯ä¸€é”®å†²çªæ‰§è¡Œå¤±è´¥ï¼ŒBinlog ä¸ä¼šè®°å½•è¯¥æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;ROW&lt;/code&gt; æ ¼å¼ä¸‹ï¼ŒBinlog éœ€è®°å½•ä¿®æ”¹å‰åçš„è¡Œæ•°æ®ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¯­å¥æ‰èƒ½è·å–è¿™äº›å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸-redo-log-çš„ååŒä¸¤é˜¶æ®µæäº¤"&gt;&lt;strong&gt;ä¸ Redo Log çš„ååŒï¼ˆä¸¤é˜¶æ®µæäº¤ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Binlog å’Œ Redo Log é€šè¿‡ &lt;strong&gt;äº‹åŠ¡ IDï¼ˆXIDï¼‰&lt;/strong&gt; å…³è”ï¼Œç¡®ä¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥ Binlog å·²å®Œæ•´å†™å…¥ â†’ äº‹åŠ¡å¿…é¡»æäº¤ï¼ˆRedo Log æ ‡è®° &lt;code&gt;COMMIT&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ Binlog æœªå†™å…¥ â†’ äº‹åŠ¡å›æ»šï¼ˆå³ä½¿ Redo Log å·² &lt;code&gt;PREPARE&lt;/code&gt;ï¼‰ã€‚
ğŸ‘‰ è¿™ä¸€æœºåˆ¶æ˜¯ â€‹&lt;strong&gt;å´©æºƒæ¢å¤ï¼ˆCrash-Safeï¼‰â€‹&lt;/strong&gt;â€‹ çš„æ ¸å¿ƒä¿éšœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸åŒ-binlog-æ ¼å¼çš„è®°å½•è¡Œä¸ºå¯¹æ¯”"&gt;ğŸ“Š &lt;strong&gt;ä¸åŒ Binlog æ ¼å¼çš„è®°å½•è¡Œä¸ºå¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;Binlog æ ¼å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è®°å½•å†…å®¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è®°å½•æ—¶æœº&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;STATEMENT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸå§‹ SQL è¯­å¥&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œåã€æäº¤å‰&lt;/td&gt;
&lt;td&gt;æ—¥å¿—é‡å°ï¼Œä½†å­˜åœ¨ä¸»ä»ä¸ä¸€è‡´é£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ROW&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¯è¡Œæ•°æ®å˜æ›´å‰åçš„å€¼&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œåã€æäº¤å‰ï¼ˆéœ€å…ˆè·å–è¡Œæ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¸€è‡´æ€§é«˜ï¼Œæ—¥å¿—é‡å¤§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;MIXED&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ ¹æ®è¯­å¥é£é™©åŠ¨æ€é€‰æ‹© STATEMENT/ROW&lt;/td&gt;
&lt;td&gt;åŒ STATEMENT/ROW&lt;/td&gt;
&lt;td&gt;å¹³è¡¡æ—¥å¿—é‡ä¸ä¸€è‡´æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ— è®ºå“ªç§æ ¼å¼ï¼ŒBinlog å‡åœ¨ &lt;strong&gt;è¯­å¥æ‰§è¡Œåã€äº‹åŠ¡æäº¤å‰&lt;/strong&gt; ç”Ÿæˆå¹¶ç¼“å­˜ï¼Œæäº¤æ—¶å†™å…¥æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Binlog åœ¨ä¸»åº“çš„æ—¥å¿—è®°å½•æ—¶æœº&lt;/strong&gt;ï¼š&lt;strong&gt;SQL è¯­å¥æ‰§è¡Œå®Œæˆåã€äº‹åŠ¡æäº¤å‰&lt;/strong&gt;ç”Ÿæˆæ—¥å¿—å¹¶ç¼“å­˜ï¼Œ&lt;strong&gt;äº‹åŠ¡æäº¤æ—¶&lt;/strong&gt;å†™å…¥ Binlog æ–‡ä»¶ï¼ˆæŒä¹…åŒ–æ—¶æœºç”± &lt;code&gt;sync_binlog&lt;/code&gt; æ§åˆ¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®¾è®¡æ„ä¹‰ï¼š
&lt;ul&gt;
&lt;li&gt;é¿å…è®°å½•æœªå®é™…æ‰§è¡Œçš„è¯­å¥ï¼ˆå¦‚æ‰§è¡Œå¤±è´¥çš„æ“ä½œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ä¸¤é˜¶æ®µæäº¤ä¸ Redo Log ååŒï¼Œå®ç°å´©æºƒæ¢å¤ä¸ä¸»ä»æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æƒè¡¡&lt;/strong&gt;ï¼š
é«˜é¢‘å†™å…¥åœºæ™¯å»ºè®® &lt;code&gt;sync_binlog=1&lt;/code&gt; + &lt;code&gt;innodb_flush_log_at_trx_commit=1&lt;/code&gt;ï¼ˆåŒ1é…ç½®ï¼‰ï¼Œç‰ºç‰²éƒ¨åˆ†æ€§èƒ½æ¢å–ç»å¯¹æ•°æ®å®‰å…¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ä¸»ä»åŒæ­¥å»¶è¿Ÿ"&gt;ä¸»ä»åŒæ­¥å»¶è¿Ÿ
&lt;/h2&gt;&lt;p&gt;ä¸»ä»åŒæ­¥å»¶è¿Ÿæ˜¯åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿä¸­çš„å¸¸è§é—®é¢˜ï¼Œå°¤å…¶åœ¨MySQLæ¶æ„ä¸­ï¼Œä¸»è¦ç”±ç½‘ç»œä¼ è¾“ã€ç¡¬ä»¶æ€§èƒ½ã€é…ç½®ä¸å½“æˆ–ä¸šåŠ¡è´Ÿè½½ç­‰å› ç´ å¯¼è‡´ã€‚ä»¥ä¸‹æ˜¯ç³»ç»Ÿæ€§è§£å†³æ–¹æ¡ˆï¼ŒæŒ‰ä¼˜åŒ–ä¼˜å…ˆçº§æ’åºï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ç²¾å‡†å®šä½å»¶è¿Ÿæ ¹æº"&gt;ğŸ” &lt;strong&gt;ç²¾å‡†å®šä½å»¶è¿Ÿæ ¹æº&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å…³é”®æŒ‡æ ‡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;SHOW SLAVE STATUSï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Seconds_Behind_Master&lt;/code&gt;ï¼šå»¶è¿Ÿç§’æ•°ï¼ˆ&amp;gt;0å³å­˜åœ¨å»¶è¿Ÿï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Relay_Log_Pos&lt;/code&gt; vs &lt;code&gt;Read_Master_Log_Pos&lt;/code&gt;ï¼šå¯¹æ¯”ä¸»ä»æ—¥å¿—ä½ç½®å·®&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ€§èƒ½ç“¶é¢ˆåˆ†æï¼š
&lt;ul&gt;
&lt;li&gt;ä¸»åº“TPSä¸Binlogç”Ÿæˆé€Ÿç‡ï¼ˆ&lt;code&gt;mysqlbinlog&lt;/code&gt;è§£æï¼‰&lt;/li&gt;
&lt;li&gt;ä»åº“CPU/å†…å­˜/ç£ç›˜I/Oï¼ˆ&lt;code&gt;top&lt;/code&gt;ã€&lt;code&gt;iostat&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;ç½‘ç»œå»¶è¿Ÿï¼ˆ&lt;code&gt;ping&lt;/code&gt;ã€&lt;code&gt;traceroute&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯†åˆ«é«˜é¢‘å»¶è¿Ÿåœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤§äº‹åŠ¡é˜»å¡&lt;/strong&gt;ï¼šæ£€æŸ¥&lt;code&gt;information_schema.INNODB_TRX&lt;/code&gt;ä¸­çš„é•¿äº‹åŠ¡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å•çº¿ç¨‹å¤åˆ¶ç“¶é¢ˆ&lt;/strong&gt;ï¼šä»åº“SQLçº¿ç¨‹ç§¯å‹ï¼ˆ&lt;code&gt;SHOW PROCESSLIST&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é”ç«äº‰&lt;/strong&gt;ï¼šä»åº“æŸ¥è¯¢è´Ÿè½½è¿‡é«˜é˜»å¡å¤åˆ¶çº¿ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»ä»åº“é…ç½®ä¼˜åŒ–"&gt;âš™ï¸ &lt;strong&gt;ä¸»ä»åº“é…ç½®ä¼˜åŒ–&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ä¸»åº“ä¾§"&gt;&lt;strong&gt;ä¸»åº“ä¾§&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡æ‹†åˆ†&lt;/strong&gt;ï¼šå°†å¤§äº‹åŠ¡æ‹†ä¸ºå°æ‰¹æ¬¡ï¼ˆå¦‚æ¯1000è¡Œæäº¤ä¸€æ¬¡ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚æ•°è°ƒä¼˜&lt;/strong&gt;ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;sync_binlog = 100 # å¹³è¡¡å®‰å…¨æ€§ä¸I/Oï¼Œé¿å…æ¯æ¬¡æäº¤åˆ·ç›˜
innodb_flush_log_at_trx_commit = 2 # ç‰ºç‰²éƒ¨åˆ†å®‰å…¨æ€§æå‡å†™å…¥æ€§èƒ½
binlog_group_commit_sync_delay = 1000 # ç»„æäº¤å»¶è¿Ÿå‡å°‘åˆ·ç›˜æ¬¡æ•°
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä»åº“ä¾§"&gt;&lt;strong&gt;ä»åº“ä¾§&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;å¯ç”¨å¹¶è¡Œå¤åˆ¶ï¼ˆMySQL 5.7+ï¼‰ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;slave_parallel_type = LOGICAL_CLOCK # åŸºäºäº‹åŠ¡ç»„å¹¶è¡Œ
slave_parallel_workers = 8 # æŒ‰CPUæ ¸æ•°è®¾ç½®ï¼ˆé€šå¸¸â‰¤16ï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;èµ„æºæ‰©å®¹ï¼š
&lt;ul&gt;
&lt;li&gt;å‡çº§SSDç£ç›˜ï¼ˆæå‡I/OPS 10å€+ï¼‰&lt;/li&gt;
&lt;li&gt;å†…å­˜æ‰©å®¹ï¼ˆå¢å¤§&lt;code&gt;innodb_buffer_pool_size&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œä¼˜åŒ–&lt;/strong&gt;ï¼šä¸»ä»åŒæœºæˆ¿éƒ¨ç½²ï¼Œä¸‡å…†å†…ç½‘äº’è”&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ¶æ„å‡çº§"&gt;ğŸ—ï¸ &lt;strong&gt;æ¶æ„å‡çº§&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¤åˆ¶æ¨¡å¼å¢å¼º&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åŠåŒæ­¥å¤åˆ¶ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;INSTALL PLUGIN rpl_semi_sync_master SONAME &amp;#39;semisync_master.so&amp;#39;;
SET GLOBAL rpl_semi_sync_master_enabled = 1; # ä¸»åº“éœ€è‡³å°‘ä¸€ä¸ªä»åº“ACKç¡®è®¤
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„å¤åˆ¶ï¼ˆMGRï¼‰&lt;/strong&gt;ï¼šMySQL 5.7+åŸºäºPaxosåè®®ï¼Œå¼ºä¸€è‡´æ€§ä½†æ€§èƒ½æŸè€—è¾ƒé«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯»å†™åˆ†ç¦»ä¸è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç†ä¸­é—´ä»¶ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ProxySQL/MaxScaleè‡ªåŠ¨è·¯ç”±å†™è¯·æ±‚åˆ°ä¸»åº“ï¼Œè¯»è¯·æ±‚åˆ°ä½å»¶è¿Ÿä»åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šä»åº“æ¨ªå‘æ‰©å±•&lt;/strong&gt;ï¼šå¢åŠ ä»åº“æ•°é‡åˆ†æ‹…è¯»è´Ÿè½½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ä¸å¼‚æ­¥é˜Ÿåˆ—&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Redisç¼“å­˜çƒ­ç‚¹æ•°æ®&lt;/strong&gt;ï¼šå‡å°‘å¯¹ä»åº“çš„å®æ—¶æŸ¥è¯¢ä¾èµ–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kafka/RabbitMQå¼‚æ­¥æ¶ˆè´¹&lt;/strong&gt;ï¼šé«˜å¹¶å‘å†™å…¥åœºæ™¯å…ˆå…¥é˜Ÿåˆ—ï¼Œå†å¼‚æ­¥åŒæ­¥åˆ°ä»åº“&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸šåŠ¡å¦¥åç­–ç•¥"&gt;ğŸ”„ &lt;strong&gt;ä¸šåŠ¡å¦¥åç­–ç•¥&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æœ€ç»ˆä¸€è‡´æ€§è®¾è®¡
&lt;ul&gt;
&lt;li&gt;éå®æ—¶åœºæ™¯ï¼ˆå¦‚ç”¨æˆ·è¯„è®ºï¼‰å®¹å¿çŸ­æš‚å»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¼ºåˆ¶è¯»ä¸»åº“ï¼š
&lt;ul&gt;
&lt;li&gt;å…³é”®ä¸šåŠ¡ï¼ˆå¦‚æ”¯ä»˜ï¼‰é…ç½®å¼ºåˆ¶è·¯ç”±åˆ°ä¸»åº“è¯»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ•°æ®è¡¥å¿æœºåˆ¶ï¼š
è‹¥å› å»¶è¿Ÿå¯¼è‡´åº“å­˜è¶…å–ï¼Œé€šè¿‡ä¸šåŠ¡é€»è¾‘å›æ»šæˆ–è¡¥è´§&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ç´§æ€¥æ¢å¤æªæ–½"&gt;ğŸš¨ &lt;strong&gt;ç´§æ€¥æ¢å¤æªæ–½&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;è·³è¿‡å•æ¬¡å»¶è¿Ÿï¼ˆæ…ç”¨ï¼ï¼‰ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;STOP SLAVE;
SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1; # è·³è¿‡ä¸€ä¸ªäº‹åŠ¡
START SLAVE;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;é‡å»ºä¸»ä»é“¾è·¯ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;STOP SLAVE;
RESET SLAVE ALL;
CHANGE MASTER TO ...; # é‡æ–°é…ç½®ä¸»åº“ä¿¡æ¯
START SLAVE;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“å¤„ç†ä¼˜å…ˆçº§çŸ©é˜µ"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ï¼šå¤„ç†ä¼˜å…ˆçº§çŸ©é˜µ&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é¦–è¦æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å¤‡é€‰æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;çŸ­æ—¶å»¶è¿Ÿï¼ˆ&amp;lt;30sï¼‰&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¼˜åŒ–ä»åº“å¹¶è¡Œå¤åˆ¶+ç½‘ç»œå¸¦å®½&lt;/td&gt;
&lt;td&gt;æ‰©å®¹ä»åº“ç¡¬ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤§äº‹åŠ¡é˜»å¡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‹†åˆ†äº‹åŠ¡+é¿å…DDLé«˜å³°&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡é”™å³°æ‰§è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¹¶å‘å†™å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¶ˆæ¯é˜Ÿåˆ—ç¼“å†²+ç¼“å­˜è¯»è¯·æ±‚&lt;/td&gt;
&lt;td&gt;å¼ºåˆ¶è¯»ä¸»åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æŒç»­é«˜å»¶è¿Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ¶æ„å‡çº§ï¼ˆMGR/ProxySQLï¼‰&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡è¡¥å¿æœºåˆ¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;æ ¸å¿ƒåŸåˆ™&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å…ˆè¡Œ&lt;/strong&gt;ï¼šPrometheus+Grafanaè®¾ç½®å»¶è¿Ÿå‘Šè­¦ï¼ˆ&amp;gt;300sè§¦å‘ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…è¿‡åº¦ä¼˜åŒ–&lt;/strong&gt;ï¼šæ ¹æ®ä¸šåŠ¡å®¹å¿åº¦é€‰æ‹©æ–¹æ¡ˆï¼ˆå¦‚é‡‘èç³»ç»Ÿéœ€å¼ºä¸€è‡´ï¼Œç¤¾äº¤å¯å®¹å¿å»¶è¿Ÿï¼‰
é€šè¿‡ä»¥ä¸Šç»„åˆç­–ç•¥ï¼Œå¯æ˜¾è‘—é™ä½å»¶è¿Ÿè‡³ä¸šåŠ¡å¯æ¥å—èŒƒå›´ï¼ˆé€šå¸¸&amp;lt;1sï¼‰ã€‚è‹¥éœ€ä¸¥æ ¼å¼ºä¸€è‡´ï¼Œå»ºè®®è¯„ä¼°åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå¦‚TiDBï¼‰æ›¿ä»£æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id="è¯»å†™åˆ†ç¦»"&gt;è¯»å†™åˆ†ç¦»
&lt;/h2&gt;&lt;p&gt;å®ç°è¯»å†™åˆ†ç¦»çš„æ ¸å¿ƒç›®æ ‡æ˜¯å°†æ•°æ®åº“çš„è¯»æ“ä½œï¼ˆå¦‚ &lt;code&gt;SELECT&lt;/code&gt;ï¼‰å’Œå†™æ“ä½œï¼ˆå¦‚ &lt;code&gt;INSERT&lt;/code&gt;/&lt;code&gt;UPDATE&lt;/code&gt;/&lt;code&gt;DELETE&lt;/code&gt;ï¼‰åˆ†ç¦»åˆ°ä¸åŒå®ä¾‹ï¼Œä»¥æå‡ç³»ç»Ÿå¹¶å‘èƒ½åŠ›å’Œæ‰©å±•æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§ä¸»æµå®ç°æ–¹æ¡ˆåŠå®è·µè¦ç‚¹ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»ä»å¤åˆ¶åŸºç¡€"&gt;ğŸ”§ &lt;strong&gt;ä¸»ä»å¤åˆ¶åŸºç¡€&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;è¯»å†™åˆ†ç¦»ä¾èµ–æ•°æ®åº“çš„ä¸»ä»å¤åˆ¶æ¶æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åº“ï¼ˆMasterï¼‰&lt;/strong&gt;ï¼šå¤„ç†æ‰€æœ‰å†™æ“ä½œï¼Œç”ŸæˆäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»åº“ï¼ˆSlaveï¼‰&lt;/strong&gt;ï¼šé€šè¿‡ I/O çº¿ç¨‹æ‹‰å– Binlogï¼ŒSQL çº¿ç¨‹é‡æ”¾æ—¥å¿—å®ç°æ•°æ®åŒæ­¥ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®æ­¥éª¤ï¼š
&lt;ol&gt;
&lt;li&gt;ä¸»åº“å¼€å¯ &lt;code&gt;log_bin&lt;/code&gt; å¹¶é…ç½®å”¯ä¸€ &lt;code&gt;server-id&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå¤åˆ¶è´¦å·ï¼ˆ&lt;code&gt;GRANT REPLICATION SLAVE&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä»åº“é…ç½®ä¸»åº“ä¿¡æ¯ï¼ˆ&lt;code&gt;CHANGE MASTER TO ...&lt;/code&gt;ï¼‰å¹¶å¯åŠ¨å¤åˆ¶ï¼ˆ&lt;code&gt;START SLAVE&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å…³é”®å‘½ä»¤ï¼š&lt;code&gt;SHOW SLAVE STATUS\G&lt;/code&gt; æ£€æŸ¥ &lt;code&gt;Slave_IO_Running&lt;/code&gt; å’Œ &lt;code&gt;Slave_SQL_Running&lt;/code&gt; çŠ¶æ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸‰ç§å®ç°æ–¹æ¡ˆå¯¹æ¯”"&gt;âš™ï¸ &lt;strong&gt;ä¸‰ç§å®ç°æ–¹æ¡ˆå¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="åº”ç”¨å±‚å®ç°ä»£ç æ§åˆ¶"&gt;&lt;strong&gt;åº”ç”¨å±‚å®ç°ï¼ˆä»£ç æ§åˆ¶ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåœ¨ä¸šåŠ¡ä»£ç ä¸­æ ¹æ®æ“ä½œç±»å‹åŠ¨æ€é€‰æ‹©æ•°æ®æºã€‚
â€‹&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;â€‹ï¼ˆä»¥ Spring Boot ä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€æ•°æ®æºè·¯ç”±ï¼š
ç»§æ‰¿
&lt;pre tabindex="0"&gt;&lt;code&gt;AbstractRoutingDataSource
&lt;/code&gt;&lt;/pre&gt;ï¼Œé€šè¿‡çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼ˆå¦‚
&lt;pre tabindex="0"&gt;&lt;code&gt;ThreadLocal
&lt;/code&gt;&lt;/pre&gt;ï¼‰åˆ‡æ¢ä¸»ä»åº“ã€‚
&lt;pre tabindex="0"&gt;&lt;code&gt;public class DynamicDataSource extends AbstractRoutingDataSource {
@Override
protected Object determineCurrentLookupKey() {
return DataSourceContextHolder.getDataSourceType(); // è¿”å› &amp;#34;master&amp;#34; æˆ– &amp;#34;slave&amp;#34;
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;AOP åˆ‡é¢è‡ªåŠ¨åˆ‡æ¢ï¼š
é€šè¿‡æ³¨è§£æ ‡è®°æ–¹æ³•ç±»å‹ï¼ˆè¯»/å†™ï¼‰ï¼Œæ‹¦æˆªè¯·æ±‚å¹¶è®¾ç½®æ•°æ®æºã€‚
&lt;pre tabindex="0"&gt;&lt;code&gt;@Around(&amp;#34;@annotation(readOnly)&amp;#34;)
public Object setReadOnly(ProceedingJoinPoint pjp, ReadOnly readOnly) {
DataSourceContextHolder.setSlave(); // æ ‡è®°ä¸ºè¯»æ“ä½œ
Object result = pjp.proceed();
DataSourceContextHolder.clear();
return result;
}
&lt;/code&gt;&lt;/pre&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šä¸šåŠ¡é€»è¾‘ç®€å•ï¼Œå¼€å‘å›¢é˜Ÿæœ‰è¾ƒå¼ºæ§åˆ¶èƒ½åŠ›ã€‚
â€‹&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;â€‹ï¼šä»£ç ä¾µå…¥æ€§å¼ºï¼Œéœ€å¤„ç†äº‹åŠ¡ä¸€è‡´æ€§ï¼ˆå¦‚äº‹åŠ¡å†…å¼ºåˆ¶èµ°ä¸»åº“ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸­é—´ä»¶ä»£ç†é€æ˜è·¯ç”±"&gt;&lt;strong&gt;ä¸­é—´ä»¶ä»£ç†ï¼ˆé€æ˜è·¯ç”±ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šé€šè¿‡ä»£ç†å±‚è‡ªåŠ¨åˆ†å‘ SQLï¼Œåº”ç”¨æ— æ„ŸçŸ¥ã€‚
â€‹&lt;strong&gt;å¸¸ç”¨å·¥å…·&lt;/strong&gt;â€‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ProxySQLï¼šé«˜æ€§èƒ½ä»£ç†ï¼Œæ”¯æŒå¤æ‚è·¯ç”±è§„åˆ™å’Œè´Ÿè½½å‡è¡¡ã€‚
&lt;pre tabindex="0"&gt;&lt;code&gt;INSERT INTO mysql_servers (hostgroup_id, hostname, port)
VALUES (0, &amp;#39;master_ip&amp;#39;, 3306), (1, &amp;#39;slave_ip&amp;#39;, 3306); -- é…ç½®ä¸»ä»å®ä¾‹
INSERT INTO mysql_query_rules (active, match_pattern, destination_hostgroup)
VALUES (1, &amp;#39;^SELECT&amp;#39;, 1), (1, &amp;#39;^INSERT|^UPDATE|^DELETE&amp;#39;, 0); -- è¯»è·¯ç”±åˆ°ä»åº“ï¼Œå†™è·¯ç”±åˆ°ä¸»åº“
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MySQL Router&lt;/strong&gt;ï¼šå®˜æ–¹è½»é‡çº§ä¸­é—´ä»¶ï¼Œè‡ªåŠ¨è¯†åˆ«è¯»å†™æ“ä½œã€‚
â€‹&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;â€‹ï¼šä¸ä¸šåŠ¡è§£è€¦ï¼Œæ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹ã€‚
â€‹&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;â€‹ï¼šå¤šå®ä¾‹é›†ç¾¤ã€é«˜å¹¶å‘è¯»è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ•°æ®åº“å†…ç½®æ–¹æ¡ˆ"&gt;&lt;strong&gt;æ•°æ®åº“å†…ç½®æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯»å†™ç«¯å£åˆ†ç¦»&lt;/strong&gt;ï¼š
ä¸»åº“å’Œä»åº“ä½¿ç”¨ä¸åŒç«¯å£ï¼ˆå¦‚ä¸»åº“ &lt;code&gt;3306&lt;/code&gt;ï¼Œä»åº“ &lt;code&gt;3307&lt;/code&gt;ï¼‰ï¼Œåº”ç”¨æ‰‹åŠ¨è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åªè¯»å‰¯æœ¬é™åˆ¶&lt;/strong&gt;ï¼š
ä»åº“é…ç½® &lt;code&gt;read_only=ON&lt;/code&gt; ç¦æ­¢å†™æ“ä½œï¼Œé¿å…è¯¯æ“ä½œã€‚
â€‹&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;â€‹ï¼šå°è§„æ¨¡åº”ç”¨ï¼Œæ— å¤æ‚è·¯ç”±éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;âš ï¸ &lt;strong&gt;å…³é”®æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="æ•°æ®ä¸€è‡´æ€§"&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šä¸»ä»å¼‚æ­¥å¤åˆ¶å¯¼è‡´è¯»å»¶è¿Ÿï¼ˆå¦‚åˆšå†™å…¥çš„æ•°æ®ä»åº“æœªåŒæ­¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºåˆ¶è¯»ä¸»åº“&lt;/strong&gt;ï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚é«˜çš„æŸ¥è¯¢ï¼ˆå¦‚æ”¯ä»˜çŠ¶æ€ï¼‰æ˜¾å¼æŒ‡å®šä¸»åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠåŒæ­¥å¤åˆ¶&lt;/strong&gt;ï¼šä¸»åº“å†™å…¥éœ€è‡³å°‘ä¸€ä¸ªä»åº“ç¡®è®¤ï¼ˆ&lt;code&gt;rpl_semi_sync_master_enabled=1&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»¶è¿Ÿç›‘æ§&lt;/strong&gt;ï¼šå®æ—¶æ£€æµ‹ &lt;code&gt;Seconds_Behind_Master&lt;/code&gt;ï¼Œè¶…é˜ˆå€¼è‡ªåŠ¨åˆ‡ä¸»åº“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è´Ÿè½½å‡è¡¡ç­–ç•¥"&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡ç­–ç•¥&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½®è¯¢/åŠ æƒè½®è¯¢&lt;/strong&gt;ï¼šå‡åŒ€åˆ†é…è¯»è¯·æ±‚åˆ°å¤šä¸ªä»åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å°è¿æ¥æ•°&lt;/strong&gt;ï¼šä¼˜å…ˆé€‰æ‹©è´Ÿè½½ä½çš„ä»åº“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†çº§ä»åº“&lt;/strong&gt;ï¼šæŒ‰å»¶è¿Ÿåˆ†çº§ï¼ˆå¦‚ &lt;code&gt;&amp;lt;100ms&lt;/code&gt; çš„ä»åº“æœåŠ¡å®æ—¶æŸ¥è¯¢ï¼Œ&lt;code&gt;&amp;lt;500ms&lt;/code&gt; çš„ç”¨äºæŠ¥è¡¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="äº‹åŠ¡å¤„ç†"&gt;&lt;strong&gt;äº‹åŠ¡å¤„ç†&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡å†…è¯»æ“ä½œ&lt;/strong&gt;ï¼šé»˜è®¤è·¯ç”±åˆ°ä¸»åº“ï¼ˆé¿å…è„è¯»ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨åº“äº‹åŠ¡&lt;/strong&gt;ï¼šé€šè¿‡åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼ˆå¦‚ Seataï¼‰æˆ–é¿å…è·¨åº“æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é€‰å‹å»ºè®®"&gt;ğŸ§© &lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¨èæ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ä¸­å°åº”ç”¨ï¼Œå¼€å‘å¯æ§&lt;/td&gt;
&lt;td&gt;åº”ç”¨å±‚å®ç° + AOP&lt;/td&gt;
&lt;td&gt;çµæ´»ã€æˆæœ¬ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é«˜å¹¶å‘é›†ç¾¤ï¼Œéœ€åŠ¨æ€æ‰©å±•&lt;/td&gt;
&lt;td&gt;ProxySQL/MySQL Router&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åŒ–è·¯ç”±ï¼Œè¿ç»´ç®€å•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¼ºä¸€è‡´æ€§é‡‘èç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;åŠåŒæ­¥å¤åˆ¶ + å¼ºåˆ¶è¯»ä¸»&lt;/td&gt;
&lt;td&gt;æ•°æ®é›¶å»¶è¿Ÿé£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å†å²æ•°æ®åˆ†æ&lt;/td&gt;
&lt;td&gt;å»¶è¿Ÿä»åº“ + ä¸­é—´ä»¶è·¯ç”±&lt;/td&gt;
&lt;td&gt;éš”ç¦»æ…¢æŸ¥è¯¢ï¼Œä¸å½±å“å®æ—¶ä¸šåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-1"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸºç¡€æ¶æ„&lt;/strong&gt;ï¼šä¸»ä»å¤åˆ¶æ˜¯åŸºçŸ³ï¼Œéœ€ä¼˜å…ˆé…ç½®ç¨³å®šã€‚&lt;/li&gt;
&lt;li&gt;å®ç°è·¯å¾„ï¼š
&lt;ul&gt;
&lt;li&gt;ä»£ç æ§åˆ¶ï¼ˆçµæ´»ï¼‰ â†’ ä¸­é—´ä»¶ï¼ˆè‡ªåŠ¨åŒ–ï¼‰ â†’ æ•°æ®åº“å†…ç½®ï¼ˆè½»é‡ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§ä¿éšœ&lt;/strong&gt;ï¼šç»“åˆåŠåŒæ­¥å¤åˆ¶ã€å¼ºåˆ¶è¯»ä¸»å’Œå»¶è¿Ÿç›‘æ§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ï¼šä»åº“åŠ ç´¢å¼•ã€è¿æ¥æ± è°ƒä¼˜ï¼ˆå¦‚ HikariCP &lt;code&gt;maximumPoolSize&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”Ÿäº§å»ºè®®ï¼šä¼˜å…ˆæµ‹è¯•ä¸­é—´ä»¶æ–¹æ¡ˆï¼ˆå¦‚ ProxySQLï¼‰ï¼Œæ­é… Prometheus ç›‘æ§å»¶è¿Ÿå’Œååé‡ã€‚å¯¹å¼ºä¸€è‡´æ€§åœºæ™¯ï¼Œå¯è¯„ä¼°åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå¦‚ TiDBï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="åˆ†åº“åˆ†è¡¨"&gt;åˆ†åº“åˆ†è¡¨
&lt;/h2&gt;&lt;p&gt;åˆ†åº“åˆ†è¡¨æ˜¯åº”å¯¹æµ·é‡æ•°æ®å’Œé«˜å¹¶å‘åœºæ™¯çš„æ•°æ®åº“æ¶æ„ä¼˜åŒ–æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒæ˜¯å°†å•åº“å•è¡¨çš„æ•°æ®æŒ‰è§„åˆ™åˆ†æ•£åˆ°å¤šä¸ªåº“æˆ–è¡¨ä¸­ï¼Œä»¥æå‡ç³»ç»Ÿæ€§èƒ½å’Œæ‰©å±•æ€§ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒè¦ç‚¹ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-åˆ†åº“åˆ†è¡¨çš„æ ¸å¿ƒç±»å‹"&gt;ğŸ” &lt;strong&gt;åˆ†åº“åˆ†è¡¨çš„æ ¸å¿ƒç±»å‹&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="å‚ç›´æ‹†åˆ†æŒ‰ä¸šåŠ¡æˆ–å­—æ®µ"&gt;&lt;strong&gt;å‚ç›´æ‹†åˆ†ï¼ˆæŒ‰ä¸šåŠ¡æˆ–å­—æ®µï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‚ç›´åˆ†åº“&lt;/strong&gt;
æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†è¡¨åˆ°ä¸åŒæ•°æ®åº“ï¼ˆå¦‚ç”¨æˆ·åº“ã€è®¢å•åº“ã€å•†å“åº“ï¼‰ã€‚
â€‹&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;â€‹ï¼šä¸šåŠ¡è§£è€¦ã€èµ„æºéš”ç¦»ï¼›&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;â€‹ï¼šæ— æ³•è§£å†³å•è¡¨æ•°æ®é‡è¿‡å¤§é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚ç›´åˆ†è¡¨&lt;/strong&gt;
æŒ‰å­—æ®µæ‹†åˆ†è¡¨ï¼ˆå¦‚å°†&lt;code&gt;user&lt;/code&gt;è¡¨æ‹†æˆ&lt;code&gt;user_base&lt;/code&gt;ï¼ˆåŸºæœ¬ä¿¡æ¯ï¼‰å’Œ&lt;code&gt;user_detail&lt;/code&gt;ï¼ˆæ‰©å±•ä¿¡æ¯ï¼‰ï¼‰ã€‚
â€‹&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;â€‹ï¼šå‡å°‘å•è¡¨å­—æ®µé‡ã€æå‡é«˜é¢‘å­—æ®µæŸ¥è¯¢æ•ˆç‡ï¼›&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;â€‹ï¼šéœ€å…³è”æŸ¥è¯¢ï¼Œå¢åŠ å¤æ‚åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ°´å¹³æ‹†åˆ†æŒ‰æ•°æ®è¡Œ"&gt;&lt;strong&gt;æ°´å¹³æ‹†åˆ†ï¼ˆæŒ‰æ•°æ®è¡Œï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ°´å¹³åˆ†åº“&lt;/strong&gt;
å°†åŒä¸€è¡¨çš„æ•°æ®æŒ‰è§„åˆ™ï¼ˆå¦‚ç”¨æˆ·IDå“ˆå¸Œï¼‰åˆ†æ•£åˆ°å¤šä¸ªæ•°æ®åº“å®ä¾‹ã€‚
â€‹&lt;strong&gt;åœºæ™¯&lt;/strong&gt;â€‹ï¼šå•åº“å†™å…¥å‹åŠ›å¤§æˆ–å­˜å‚¨å®¹é‡ä¸è¶³ï¼ˆå¦‚è®¢å•åº“æŒ‰å¹´ä»½æ‹†åˆ†ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ°´å¹³åˆ†è¡¨&lt;/strong&gt;
å°†å•è¡¨æ•°æ®æŒ‰è§„åˆ™æ‹†åˆ†ä¸ºå¤šä¸ªç»“æ„ç›¸åŒçš„å­è¡¨ï¼ˆå¦‚&lt;code&gt;order_0&lt;/code&gt;ã€&lt;code&gt;order_1&lt;/code&gt;ï¼‰ã€‚
â€‹&lt;strong&gt;åœºæ™¯&lt;/strong&gt;â€‹ï¼šå•è¡¨æ•°æ®è¶…åƒä¸‡ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¸‹é™ï¼ˆå¦‚ç”¨æˆ·è¡¨æŒ‰IDèŒƒå›´æ‹†åˆ†ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-åˆ†åº“åˆ†è¡¨çš„é€‚ç”¨åœºæ™¯"&gt;âš™ï¸ &lt;strong&gt;åˆ†åº“åˆ†è¡¨çš„é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®é‡è¿‡å¤§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•è¡¨è¶…åƒä¸‡è¡Œï¼ŒæŸ¥è¯¢æ…¢ã€ç»´æŠ¤éš¾&lt;/td&gt;
&lt;td&gt;æ°´å¹³åˆ†è¡¨/åˆ†åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é«˜å¹¶å‘å†™å…¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•åº“å†™å…¥æˆä¸ºç“¶é¢ˆï¼Œé”ç«äº‰ä¸¥é‡&lt;/td&gt;
&lt;td&gt;æ°´å¹³åˆ†åº“åˆ†æ•£å†™å…¥å‹åŠ›&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸šåŠ¡è§£è€¦éœ€æ±‚&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸åŒä¸šåŠ¡æ¨¡å—ç›¸äº’å½±å“ï¼ˆå¦‚ç”¨æˆ·ä¸è®¢å•ï¼‰&lt;/td&gt;
&lt;td&gt;å‚ç›´åˆ†åº“éš”ç¦»èµ„æº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å†·çƒ­æ•°æ®åˆ†ç¦»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†å²æ•°æ®è®¿é—®ä½é¢‘ä½†å ç”¨å­˜å‚¨&lt;/td&gt;
&lt;td&gt;æ°´å¹³åˆ†è¡¨æŒ‰æ—¶é—´æ‹†åˆ†&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;ä½•æ—¶éœ€åˆ†åº“åˆ†è¡¨ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•è¡¨æ•°æ®é‡ &amp;gt; 1000ä¸‡è¡Œ&lt;/li&gt;
&lt;li&gt;å•åº“QPS &amp;gt; 2000 æˆ–ç£ç›˜å®¹é‡æ¥è¿‘ä¸Šé™&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-åˆ†åº“åˆ†è¡¨çš„å…³é”®æŠ€æœ¯"&gt;ğŸ§© &lt;strong&gt;åˆ†åº“åˆ†è¡¨çš„å…³é”®æŠ€æœ¯&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="åˆ†ç‰‡ç­–ç•¥ä¸ç®—æ³•"&gt;&lt;strong&gt;åˆ†ç‰‡ç­–ç•¥ä¸ç®—æ³•&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç‰‡é”®é€‰æ‹©&lt;/strong&gt;ï¼šéœ€ç¦»æ•£å‡åŒ€ï¼ˆå¦‚ç”¨æˆ·IDï¼‰ã€ä¸šåŠ¡å…³è”æ€§å¼ºã€ä¸å¯å˜ã€‚&lt;/li&gt;
&lt;li&gt;å¸¸ç”¨ç®—æ³•ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œå–æ¨¡&lt;/strong&gt;ï¼šæ•°æ®å‡åŒ€åˆ†å¸ƒï¼ˆå¦‚ &lt;code&gt;user_id % 4&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒƒå›´åˆ†ç‰‡&lt;/strong&gt;ï¼šæŒ‰æ—¶é—´æˆ–IDåŒºé—´åˆ’åˆ†ï¼ˆå¦‚è®¢å•æŒ‰æœˆåˆ†è¡¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§å“ˆå¸Œ&lt;/strong&gt;ï¼šæ‰©å®¹æ—¶å‡å°‘æ•°æ®è¿ç§»é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å®ç°æ–¹å¼å¯¹æ¯”"&gt;&lt;strong&gt;å®ç°æ–¹å¼å¯¹æ¯”&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨å±‚ç¼–ç &lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡ä»£ç ä¸­å®ç°åˆ†ç‰‡é€»è¾‘&lt;/td&gt;
&lt;td&gt;çµæ´»å¯æ§&lt;/td&gt;
&lt;td&gt;å¼€å‘å¤æ‚ï¼Œä¾µå…¥æ€§å¼º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸­é—´ä»¶ä»£ç†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡ShardingSphere/MyCatè‡ªåŠ¨è·¯ç”±&lt;/td&gt;
&lt;td&gt;å¯¹ä¸šåŠ¡é€æ˜ï¼Œæ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹&lt;/td&gt;
&lt;td&gt;ä¾èµ–ä¸­é—´ä»¶æ€§èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ•°æ®åº“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸç”Ÿæ”¯æŒåˆ†ç‰‡ï¼ˆå¦‚TiDBã€OceanBaseï¼‰&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨æ‰©å®¹ï¼Œå¼ºä¸€è‡´æ€§äº‹åŠ¡&lt;/td&gt;
&lt;td&gt;æˆæœ¬é«˜ï¼Œæ¶æ„å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;âœ… &lt;strong&gt;æ¨èå®è·µ&lt;/strong&gt;ï¼šä¼˜å…ˆä½¿ç”¨ &lt;strong&gt;ShardingSphere&lt;/strong&gt; ç­‰ä¸­é—´ä»¶ï¼Œé…ç½®åˆ†ç‰‡è§„åˆ™ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sharding:
tables:
order:
actual-data-nodes: ds${0..1}.order_${0..1}
database-strategy:
inline: sharding-column: order_id; algorithm-expression: ds${order_id % 2}
table-strategy:
inline: sharding-column: order_id; algorithm-expression: order_${order_id % 2}
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;âš ï¸ &lt;strong&gt;æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·¨åº“/è¡¨æŸ¥è¯¢&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šJOINæ“ä½œå¤æ‚ï¼Œæ€§èƒ½å·®ã€‚&lt;/li&gt;
&lt;li&gt;æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;é¿å…è·¨åˆ†ç‰‡æŸ¥è¯¢ï¼Œæˆ–é€šè¿‡ä¸­é—´ä»¶åˆå¹¶ç»“æœï¼ˆå¦‚ShardingSphereçš„&lt;code&gt;UNION ALL&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å†—ä½™å­—æ®µæˆ–å…¨å±€è¡¨ï¼ˆå¦‚åŸºç¡€é…ç½®è¡¨åŒæ­¥åˆ°æ‰€æœ‰åº“ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šæ•°æ®ä¸€è‡´æ€§éš¾ä¿éšœã€‚&lt;/li&gt;
&lt;li&gt;æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;å¼ºä¸€è‡´æ€§ï¼šä½¿ç”¨Seataçš„XAæ¨¡å¼æˆ–åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆTiDBçš„Percolatoräº‹åŠ¡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆä¸€è‡´æ€§ï¼šé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚Kafkaï¼‰å¼‚æ­¥è¡¥å¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»é”®å†²çª&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šé‡‡ç”¨åˆ†å¸ƒå¼IDç”Ÿæˆå™¨ï¼ˆå¦‚Snowflakeã€UUIDï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å®¹è¿ç§»&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šåŒå†™è¿‡æ¸¡æˆ–åœ¨çº¿è¿ç§»å·¥å…·ï¼ˆå¦‚ShardingSphere-Scalingï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-2"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;åˆ†åº“åˆ†è¡¨æ˜¯&lt;strong&gt;æ°´å¹³æ‰©å±•ï¼ˆScale-outï¼‰&lt;strong&gt;çš„æ ¸å¿ƒæ‰‹æ®µï¼Œæœ¬è´¨æ˜¯&lt;/strong&gt;ç”¨æ¶æ„å¤æ‚åº¦æ¢å–æ€§èƒ½ä¸å®¹é‡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‚ç›´æ‹†åˆ†&lt;/strong&gt;ä¼˜å…ˆè§£å†³ä¸šåŠ¡è€¦åˆé—®é¢˜ï¼Œ&lt;strong&gt;æ°´å¹³æ‹†åˆ†&lt;/strong&gt;åº”å¯¹æ•°æ®é‡ä¸å¹¶å‘å‹åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸­é—´ä»¶æ–¹æ¡ˆ&lt;/strong&gt;ï¼ˆå¦‚ShardingSphereï¼‰æ˜¯ä¸»æµé€‰æ‹©ï¼Œå¹³è¡¡å¼€å‘æ•ˆç‡ä¸è¿ç»´æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ•°æ®åº“&lt;/strong&gt;ï¼ˆå¦‚TiDBï¼‰åœ¨å¼ºä¸€è‡´æ€§ä¸è‡ªåŠ¨åˆ†ç‰‡åœºæ™¯æ›´ä¼˜ï¼Œä½†æˆæœ¬è¾ƒé«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;âš™ï¸ &lt;strong&gt;å®æ–½å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å…ˆç›‘æ§å®šä½ç“¶é¢ˆï¼ˆæ•°æ®é‡ï¼Ÿå¹¶å‘ï¼Ÿï¼‰ï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†ç‰‡é”®è®¾è®¡ &amp;gt; ç®—æ³•é€‰æ‹© &amp;gt; å·¥å…·è½åœ°ï¼Œé€æ­¥éªŒè¯ã€‚&lt;/li&gt;
&lt;li&gt;é‡‘èç­‰å¼ºä¸€è‡´ç³»ç»Ÿï¼Œä¼˜å…ˆè¯„ä¼°åˆ†å¸ƒå¼æ•°æ®åº“ï¼›é«˜å¹¶å‘äº’è”ç½‘åº”ç”¨ï¼Œä¸­é—´ä»¶åˆ†ç‰‡æ›´çµæ´»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id="ç¼“å­˜ç©¿é€å‡»ç©¿é›ªå´©"&gt;ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ä¸ç¼“å­˜é›ªå´©çš„è¯¦ç»†å¯¹æ¯”åˆ†æï¼Œæ¶µç›–å®šä¹‰ã€åŸå› ã€å½±å“åŠè§£å†³æ–¹æ¡ˆï¼Œç»“åˆæŠ€æœ¯å®ç°ä¸é€‚ç”¨åœºæ™¯è¿›è¡Œè¯´æ˜ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-é—®é¢˜å®šä¹‰ä¸æ ¸å¿ƒåŒºåˆ«"&gt;âš¡ é—®é¢˜å®šä¹‰ä¸æ ¸å¿ƒåŒºåˆ«
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;é—®é¢˜ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…³é”®ç‰¹å¾&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜ç©¿é€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥è¯¢&lt;strong&gt;ä¸å­˜åœ¨çš„æ•°æ®&lt;/strong&gt;ï¼Œç¼“å­˜å’Œæ•°æ®åº“å‡æ— ç»“æœï¼Œå¯¼è‡´è¯·æ±‚ç›´æ¥å†²å‡»æ•°æ®åº“&lt;a class="link" href="@ref" &gt;1,2,6&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®ç»å¯¹ä¸å­˜åœ¨ â€¢ æ¶æ„è¯·æ±‚æˆ–å‚æ•°å¼‚å¸¸&lt;/td&gt;
&lt;td&gt;â€¢ æ”»å‡»è€…ä¼ªé€ éšæœºIDï¼ˆå¦‚è´Ÿå€¼ï¼‰ â€¢ ä¸šåŠ¡é€»è¾‘ç¼ºé™·å¯¼è‡´éæ³•å‚æ•°æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜å‡»ç©¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;çƒ­ç‚¹æ•°æ®çªç„¶å¤±æ•ˆ&lt;/strong&gt;ï¼Œå¤§é‡å¹¶å‘è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“&lt;a class="link" href="@ref" &gt;1,5,9&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;â€¢ å•ä¸€çƒ­ç‚¹Keyè¿‡æœŸ â€¢ é«˜å¹¶å‘è®¿é—®é›†ä¸­&lt;/td&gt;
&lt;td&gt;â€¢ ç§’æ€å•†å“ç¼“å­˜è¿‡æœŸ â€¢ çƒ­æœæ–°é—»ç¼“å­˜å¤±æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜é›ªå´©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¤§é‡ç¼“å­˜åŒæ—¶å¤±æ•ˆ&lt;/strong&gt;æˆ–&lt;strong&gt;ç¼“å­˜æœåŠ¡å®•æœº&lt;/strong&gt;ï¼Œè¯·æ±‚é›†ä½“æ¶Œå…¥æ•°æ®åº“&lt;a class="link" href="@ref" &gt;3,5,10&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;â€¢ å¤šKeyé›†ä¸­è¿‡æœŸ â€¢ ç¼“å­˜é›†ç¾¤æ•…éšœ&lt;/td&gt;
&lt;td&gt;â€¢ ç¼“å­˜ç»Ÿä¸€è®¾ç½®æ•´ç‚¹è¿‡æœŸ â€¢ Redisä¸»èŠ‚ç‚¹å®•æœº&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-åŸå› ä¸å½±å“å¯¹æ¯”"&gt;ğŸ” åŸå› ä¸å½±å“å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸»è¦åŸå› &lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç›´æ¥å½±å“&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ½œåœ¨é£é™©&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜ç©¿é€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€¢ æ¶æ„æ”»å‡»ï¼ˆä¼ªé€ IDï¼‰ â€¢ æœªç¼“å­˜ç©ºå€¼æˆ–æ ¡éªŒå‚æ•°&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®åº“é¢‘ç¹æŸ¥è¯¢ä¸å­˜åœ¨æ•°æ® â€¢ CPUå’Œè¿æ¥æ•°æ¿€å¢&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®åº“è¿‡è½½å®•æœº â€¢ èµ„æºæµªè´¹ï¼ˆå¤§é‡ç©ºæŸ¥è¯¢ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜å‡»ç©¿&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€¢ çƒ­ç‚¹æ•°æ®TTLè®¾ç½®è¿‡çŸ­ â€¢ ç¼“å­˜æ„å¤–åˆ é™¤&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®åº“ç¬æ—¶é«˜å¹¶å‘æŸ¥è¯¢ â€¢ å“åº”å»¶è¿Ÿé£™å‡&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®åº“è¿æ¥æ± è€—å°½ â€¢ æœåŠ¡é›ªå´©ï¼ˆçº§è”æ•…éšœï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¼“å­˜é›ªå´©&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;â€¢ æ‰¹é‡Keyè®¾ç½®ç›¸åŒTTL â€¢ ç¼“å­˜é›†ç¾¤æ•…éšœï¼ˆå¦‚Rediså®•æœºï¼‰&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®åº“è¯·æ±‚é‡æŒ‡æ•°çº§å¢é•¿ â€¢ ç³»ç»Ÿå…¨é¢å»¶è¿Ÿ&lt;/td&gt;
&lt;td&gt;â€¢ æ•°æ®åº“å´©æºƒ â€¢ æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-è§£å†³æ–¹æ¡ˆä¸é€‚ç”¨åœºæ™¯"&gt;ğŸ›  è§£å†³æ–¹æ¡ˆä¸é€‚ç”¨åœºæ™¯
&lt;/h3&gt;&lt;h4 id="ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆ"&gt;&lt;strong&gt;ç¼“å­˜ç©¿é€è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šé¢„å­˜æ‰€æœ‰åˆæ³•Keyçš„å“ˆå¸Œå€¼ï¼Œæ‹¦æˆªéæ³•è¯·æ±‚&lt;a class="link" href="@ref" &gt;1,6,7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå†…å­˜å ç”¨ä½ï¼Œæ‹¦æˆªæ•ˆç‡é«˜ï¼ˆO(1)å¤æ‚åº¦ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå­˜åœ¨è¯¯åˆ¤ç‡ï¼ˆå‡é˜³æ€§ï¼‰ï¼Œéœ€å®šæœŸæ›´æ–°æ•°æ®&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨&lt;/strong&gt;ï¼šè¯»å¤šå†™å°‘åœºæ™¯ï¼ˆå¦‚å•†å“IDæ ¡éªŒï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ç©ºå€¼ï¼ˆNull Cachingï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šæ•°æ®åº“æ— æ•°æ®æ—¶ï¼Œç¼“å­˜çŸ­TTLçš„ç©ºå€¼ï¼ˆå¦‚&lt;code&gt;key:null&lt;/code&gt;, TTL=30ç§’ï¼‰&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šç®€å•æ˜“å®ç°ï¼Œå‡å°‘é‡å¤æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå¯èƒ½ç¼“å­˜å¤§é‡æ— æ•ˆKeyï¼Œå ç”¨å†…å­˜&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»„åˆç­–ç•¥&lt;/strong&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¤ºä¾‹ï¼šå¸ƒéš†è¿‡æ»¤å™¨ + ç©ºå€¼ç¼“å­˜
public User getUser(Long id) {
if (!bloomFilter.mightContain(id)) return null; // æ‹¦æˆªéæ³•ID
User user = cache.get(id);
if (user == null) {
user = db.query(id);
if (user != null) cache.set(id, user);
else cache.set(id, &amp;#34;NULL&amp;#34;, 60); // ç¼“å­˜ç©ºå€¼60ç§’[6,8](@ref)
}
return user;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id="ç¼“å­˜å‡»ç©¿è§£å†³æ–¹æ¡ˆ"&gt;&lt;strong&gt;ç¼“å­˜å‡»ç©¿è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº’æ–¥é”ï¼ˆMutex Lockï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šç¼“å­˜å¤±æ•ˆæ—¶ï¼Œç”¨åˆ†å¸ƒå¼é”ï¼ˆå¦‚Redisçš„&lt;code&gt;SETNX&lt;/code&gt;ï¼‰ä¿è¯å•çº¿ç¨‹é‡å»ºç¼“å­˜&lt;a class="link" href="@ref" &gt;5,9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šé¿å…å¹¶å‘é‡å»ºï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šé”ç«äº‰å¯èƒ½å¢åŠ å»¶è¿Ÿï¼ˆéœ€è®¾ç½®è¶…æ—¶é˜²æ­»é”ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€»è¾‘è¿‡æœŸï¼ˆLogical Expireï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šç¼“å­˜å€¼åŒ…å«é€»è¾‘è¿‡æœŸæ—¶é—´ï¼Œå¼‚æ­¥æ›´æ–°æ•°æ®ï¼ˆç‰©ç†ç¼“å­˜æ°¸ä¸è¿‡æœŸï¼‰&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;// ç¤ºä¾‹ï¼šé€»è¾‘è¿‡æœŸå®ç°
public class RedisData {
private LocalDateTime expireTime;
private Object data; // å®é™…ä¸šåŠ¡æ•°æ®[9](@ref)
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šç”¨æˆ·è¯·æ±‚æ— é˜»å¡ï¼Œé«˜å¹¶å‘å‹å¥½&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå¯èƒ½è¿”å›æ—§æ•°æ®ï¼ˆç‰ºç‰²ä¸€è‡´æ€§ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šé€šè¿‡åå°ä»»åŠ¡å®šæ—¶æ›´æ–°ç¼“å­˜ï¼ˆå¦‚æ¯10åˆ†é’Ÿåˆ·æ–°ï¼‰&lt;a class="link" href="@ref" &gt;2,10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨&lt;/strong&gt;ï¼šæé«˜é¢‘è®¿é—®æ•°æ®ï¼ˆå¦‚æ˜æ˜Ÿä¸»é¡µï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id="ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆ"&gt;&lt;strong&gt;ç¼“å­˜é›ªå´©è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éšæœºè¿‡æœŸæ—¶é—´&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šåŸºç¡€TTL + éšæœºåç§»é‡ï¼ˆå¦‚&lt;code&gt;3600 + Random(600)&lt;/code&gt;ç§’ï¼‰&lt;a class="link" href="@ref" &gt;2,3,5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šåˆ†æ•£å¤±æ•ˆæ—¶é—´ï¼Œé™ä½é›†ä½“å¤±æ•ˆé£é™©&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šçº§ç¼“å­˜æ¶æ„&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰ + åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæœ¬åœ°ç¼“å­˜å­˜çƒ­ç‚¹æ•°æ®ï¼ŒRediså­˜å…¨é‡æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šç¼“å­˜åˆ†å±‚ï¼Œå•ç‚¹æ•…éšœå½±å“å°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†”æ–­é™çº§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼šHystrix/Sentinelé™æµï¼Œæ•°æ®åº“å‹åŠ›å¤§æ—¶è¿”å›é»˜è®¤å€¼&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šNginxé™æµï¼ˆä»¤ç‰Œæ¡¶ç®—æ³•ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒå¯¹æ¯”æ€»ç»“è¡¨"&gt;ğŸ“Š æ ¸å¿ƒå¯¹æ¯”æ€»ç»“è¡¨
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼“å­˜ç©¿é€&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼“å­˜å‡»ç©¿&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼“å­˜é›ªå´©&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®&lt;/td&gt;
&lt;td&gt;çƒ­ç‚¹Keyçªç„¶å¤±æ•ˆ&lt;/td&gt;
&lt;td&gt;å¤§é‡KeyåŒæ—¶å¤±æ•ˆ/é›†ç¾¤å®•æœº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®çŠ¶æ€&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¼“å­˜å’ŒDBå‡æ— æ•°æ®&lt;/td&gt;
&lt;td&gt;DBæœ‰æ•°æ®ï¼Œç¼“å­˜æ— &lt;/td&gt;
&lt;td&gt;DBæœ‰æ•°æ®ï¼Œç¼“å­˜å¤§é¢ç§¯å¤±æ•ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é˜²å¾¡æ ¸å¿ƒ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ‹¦æˆªæ— æ•ˆè¯·æ±‚&lt;/td&gt;
&lt;td&gt;é¿å…å¹¶å‘é‡å»º&lt;/td&gt;
&lt;td&gt;åˆ†æ•£å¤±æ•ˆé£é™©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…³é”®æŠ€æœ¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¸ƒéš†è¿‡æ»¤å™¨ã€ç©ºå€¼ç¼“å­˜&lt;/td&gt;
&lt;td&gt;äº’æ–¥é”ã€é€»è¾‘è¿‡æœŸ&lt;/td&gt;
&lt;td&gt;éšæœºTTLã€å¤šçº§ç¼“å­˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸šåŠ¡å½±å“&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“ç©ºæŸ¥è¯¢å‹åŠ›&lt;/td&gt;
&lt;td&gt;å•ç‚¹æ•°æ®åº“é«˜å¹¶å‘&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“å…¨é¢è¿‡è½½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-ç»¼åˆé˜²å¾¡ç­–ç•¥å»ºè®®"&gt;ğŸ›¡ ç»¼åˆé˜²å¾¡ç­–ç•¥å»ºè®®
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç©¿é€é˜²å¾¡ç»„åˆ&lt;/strong&gt;ï¼šå¸ƒéš†è¿‡æ»¤å™¨ + ç©ºå€¼ç¼“å­˜ + æ¥å£å‚æ•°æ ¡éªŒ&lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡»ç©¿é˜²å¾¡ç»„åˆ&lt;/strong&gt;ï¼šäº’æ–¥é” + çƒ­ç‚¹æ•°æ®é¢„çƒ­ + æœ¬åœ°ç¼“å­˜&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›ªå´©é˜²å¾¡ç»„åˆ&lt;/strong&gt;ï¼šéšæœºTTL + Redisé›†ç¾¤ï¼ˆå“¨å…µ/Clusterï¼‰ + ç†”æ–­é™çº§&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ¶æ„è®¾è®¡æç¤º&lt;/strong&gt;ï¼šå¯¹äºç”µå•†ç­‰é«˜å¹¶å‘ç³»ç»Ÿï¼Œå»ºè®®é‡‡ç”¨ &lt;strong&gt;å¤šçº§ç¼“å­˜+ç†”æ–­+å¸ƒéš†è¿‡æ»¤å™¨&lt;/strong&gt; ç»„åˆæ–¹æ¡ˆï¼Œå¹¶åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œç¼“å­˜é¢„çƒ­ï¼ˆå¦‚æå‰åŠ è½½ç§’æ€å•†å“æ•°æ®ï¼‰&lt;a class="link" href="@ref" &gt;10&lt;/a&gt;ã€‚
é€šè¿‡ä¸Šè¿°åˆ†å±‚ç­–ç•¥ï¼Œå¯æ˜¾è‘—é™ä½ç¼“å­˜å¤±æ•ˆå¯¼è‡´çš„ç³»ç»Ÿæ€§é£é™©ï¼Œä¿éšœæ•°æ®åº“ç¨³å®šè¿è¡Œã€‚å®é™…åº”ç”¨ä¸­éœ€æ ¹æ®ä¸šåŠ¡ç‰¹æ€§ï¼ˆå¦‚æ•°æ®çƒ­åº¦ã€ä¸€è‡´æ€§è¦æ±‚ï¼‰é€‰æ‹©é€‚é…æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="å¸ƒéš†è¿‡æ»¤å™¨"&gt;å¸ƒéš†è¿‡æ»¤å™¨
&lt;/h2&gt;&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æ˜¯ä¸€ç§&lt;strong&gt;ç©ºé—´æ•ˆç‡æé«˜çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„&lt;/strong&gt;ï¼Œç”± Burton Howard Bloom äº 1970 å¹´æå‡ºï¼Œç”¨äºå¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å±äºæŸä¸ªé›†åˆã€‚å…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯&lt;strong&gt;ä»¥æå°çš„å†…å­˜å ç”¨å®ç°é«˜æ•ˆçš„å­˜åœ¨æ€§æ£€æµ‹&lt;/strong&gt;ï¼Œä½†å­˜åœ¨ä¸€å®šçš„è¯¯åˆ¤ç‡ï¼ˆå‡é˜³æ€§ï¼‰ã€‚ä»¥ä¸‹æ˜¯å…¶è¯¦ç»†è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸ç»“æ„"&gt;âš™ï¸ æ ¸å¿ƒåŸç†ä¸ç»“æ„
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åŸºæœ¬ç»„æˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½æ•°ç»„ï¼ˆBit Arrayï¼‰&lt;/strong&gt;ï¼šé•¿åº¦ä¸º &lt;code&gt;m&lt;/code&gt; çš„äºŒè¿›åˆ¶å‘é‡ï¼Œåˆå§‹å€¼å…¨ä¸º &lt;code&gt;0&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionsï¼‰&lt;/strong&gt;ï¼š&lt;code&gt;k&lt;/code&gt; ä¸ªç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°å°†è¾“å…¥å…ƒç´ æ˜ å°„åˆ°ä½æ•°ç»„çš„æŸä¸€ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;æ“ä½œæµç¨‹&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ·»åŠ å…ƒç´ &lt;/strong&gt;ï¼š
å¯¹å…ƒç´ æ‰§è¡Œ &lt;code&gt;k&lt;/code&gt; æ¬¡å“ˆå¸Œè¿ç®—ï¼Œå¾—åˆ° &lt;code&gt;k&lt;/code&gt; ä¸ªä½æ•°ç»„ä¸‹æ ‡ï¼Œå¹¶å°†è¿™äº›ä½ç½®çš„å€¼ç½®ä¸º &lt;code&gt;1&lt;/code&gt;ã€‚
&lt;em&gt;ä¾‹&lt;/em&gt;ï¼šæ’å…¥å…ƒç´  &lt;code&gt;x&lt;/code&gt;ï¼Œå“ˆå¸Œå‡½æ•°è¾“å‡ºä½ç½® &lt;code&gt;{2, 5, 7}&lt;/code&gt;ï¼Œåˆ™ä½æ•°ç»„ä¸‹æ ‡ 2ã€5ã€7 è¢«è®¾ä¸º &lt;code&gt;1&lt;/code&gt;&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;æŸ¥è¯¢å…ƒç´ ï¼š
å¯¹å…ƒç´ æ‰§è¡Œç›¸åŒå“ˆå¸Œè¿ç®—ï¼Œæ£€æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; k
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ªä½ç½®çš„å€¼ï¼š
- è‹¥&lt;strong&gt;æ‰€æœ‰ä½ç½®å‡ä¸º &lt;code&gt;1&lt;/code&gt;&lt;/strong&gt; â†’ å…ƒç´ â€œå¯èƒ½å­˜åœ¨â€ï¼ˆå¯èƒ½è¯¯åˆ¤ï¼‰ã€‚
- è‹¥&lt;strong&gt;ä»»ä¸€ä½ç½®ä¸º &lt;code&gt;0&lt;/code&gt;&lt;/strong&gt; â†’ å…ƒç´ â€œä¸€å®šä¸å­˜åœ¨â€&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ç‰¹æ€§ä¸æƒè¡¡"&gt;âš–ï¸ ç‰¹æ€§ä¸æƒè¡¡
&lt;/h3&gt;&lt;h4 id="ä¼˜ç‚¹"&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¶…ä½ç©ºé—´å ç”¨&lt;/strong&gt;ï¼šå­˜å‚¨ 100 ä¸‡ä¸ªå…ƒç´ ä»…éœ€çº¦ 122KB å†…å­˜ï¼ˆè¯¯åˆ¤ç‡ 1% æ—¶ï¼‰&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆæŸ¥è¯¢&lt;/strong&gt;ï¼šæ—¶é—´å¤æ‚åº¦ä¸º &lt;code&gt;O(k)&lt;/code&gt;ï¼ˆ&lt;code&gt;k&lt;/code&gt; ä¸ºå“ˆå¸Œå‡½æ•°æ•°é‡ï¼Œé€šå¸¸è¾ƒå°ï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— å‡é˜´æ€§ï¼ˆFalse Negativeï¼‰&lt;/strong&gt;ï¼šè‹¥è¿”å›â€œä¸å­˜åœ¨â€ï¼Œç»“æœç»å¯¹å¯é &lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¼ºç‚¹"&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡é˜³æ€§ï¼ˆFalse Positiveï¼‰&lt;/strong&gt;ï¼šä¸åŒå…ƒç´ çš„å“ˆå¸Œå¯èƒ½ç¢°æ’ï¼Œå¯¼è‡´è¯¯åˆ¤ã€‚è¯¯åˆ¤ç‡ &lt;code&gt;p&lt;/code&gt; å…¬å¼ä¸ºï¼š
&lt;code&gt;p \approx \left(1 - e^{-k \cdot n / m}\right)^k&lt;/code&gt;
å…¶ä¸­ &lt;code&gt;n&lt;/code&gt; ä¸ºå…ƒç´ æ•°é‡ï¼Œ&lt;code&gt;m&lt;/code&gt; ä¸ºä½æ•°ç»„é•¿åº¦ï¼Œ&lt;code&gt;k&lt;/code&gt; ä¸ºå“ˆå¸Œå‡½æ•°æ•°&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸æ”¯æŒåˆ é™¤&lt;/strong&gt;ï¼šä¼ ç»Ÿå¸ƒéš†è¿‡æ»¤å™¨çš„ä½æ— æ³•åŒºåˆ†ä¸åŒå…ƒç´ ã€‚è‹¥éœ€åˆ é™¤ï¼Œéœ€æ”¹ç”¨&lt;strong&gt;è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨&lt;/strong&gt;ï¼ˆç”¨è®¡æ•°å™¨æ›¿ä»£äºŒè¿›åˆ¶ä½ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å‚æ•°è®¾è®¡ä¸è¯¯åˆ¤ç‡æ§åˆ¶"&gt;ğŸ“Š å‚æ•°è®¾è®¡ä¸è¯¯åˆ¤ç‡æ§åˆ¶
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœ€ä¼˜å‚æ•°è®¡ç®—&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½æ•°ç»„å¤§å° &lt;code&gt;m&lt;/code&gt;&lt;/strong&gt;ï¼š
&lt;code&gt;m = -\frac{n \ln p}{(\ln 2)^2}&lt;/code&gt;
&lt;em&gt;ä¾‹&lt;/em&gt;ï¼šå­˜å‚¨ &lt;code&gt;n=10,000&lt;/code&gt; ä¸ªå…ƒç´ ï¼Œè¦æ±‚è¯¯åˆ¤ç‡ &lt;code&gt;p=0.01&lt;/code&gt;ï¼Œåˆ™ &lt;code&gt;mâ‰ˆ95,850&lt;/code&gt; ä½ï¼ˆçº¦ 12KBï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œå‡½æ•°æ•°é‡ &lt;code&gt;k&lt;/code&gt;&lt;/strong&gt;ï¼š
&lt;code&gt;k = \frac{m}{n} \ln 2&lt;/code&gt;
é€šå¸¸å–æ•´æ•°ï¼ˆå¦‚ &lt;code&gt;m/n=10&lt;/code&gt; æ—¶ï¼Œ&lt;code&gt;kâ‰ˆ7&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™ä½è¯¯åˆ¤ç‡çš„ç­–ç•¥&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¢å¤§ä½æ•°ç»„é•¿åº¦ &lt;code&gt;m&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚ MurmurHashã€SHA-1 ç¡®ä¿å‡åŒ€åˆ†å¸ƒï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯"&gt;ğŸ’¡ åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜ç©¿é€é˜²æŠ¤&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç¼“å­˜æŸ¥è¯¢å‰ï¼Œç”¨å¸ƒéš†è¿‡æ»¤å™¨æ‹¦æˆªæ— æ•ˆè¯·æ±‚ï¼ˆå¦‚æ•°æ®åº“ä¸å­˜åœ¨çš„ Keyï¼‰ï¼Œé¿å…æ•°æ®åº“è¢«å‡»ç©¿&lt;a class="link" href="@ref" &gt;1,4,5&lt;/a&gt;ã€‚
&lt;em&gt;å®ç°ç¤ºä¾‹&lt;/em&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;if (!bloomFilter.mightContain(key)) return null; // ç›´æ¥è¿”å›ï¼Œé¿å…æŸ¥åº“
else return cache.get(key);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ·é‡æ•°æ®å»é‡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;çˆ¬è™« URL å»é‡ï¼šé¿å…é‡å¤æŠ“å–ç›¸åŒé“¾æ¥&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·è¡Œä¸ºæ—¥å¿—å»é‡ï¼šå¿«é€Ÿè¿‡æ»¤å·²å¤„ç†çš„æ•°æ®&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨è¿‡æ»¤&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åƒåœ¾é‚®ä»¶è¿‡æ»¤ï¼šå­˜å‚¨å·²çŸ¥åƒåœ¾é‚®ä»¶ç‰¹å¾ï¼Œå¿«é€Ÿæ‹¦æˆª&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é»‘åå•ç³»ç»Ÿï¼šæ ¡éªŒ IP æˆ–æ‰‹æœºå·æ˜¯å¦åœ¨é»‘åå•ä¸­&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“ä¼˜åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åŠ é€Ÿ Join æ“ä½œï¼šé¢„åˆ¤æŸè¡¨çš„é”®æ˜¯å¦åœ¨å¦ä¸€è¡¨ä¸­å­˜åœ¨ï¼Œå‡å°‘ç£ç›˜ I/O&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å®ç°æ–¹å¼"&gt;ğŸ› ï¸ å®ç°æ–¹å¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨å®ç°ï¼ˆJava ç¤ºä¾‹ï¼‰&lt;/strong&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;public class BloomFilter {
private BitSet bitSet;
private SimpleHash[] hashFunctions;
// æ·»åŠ å…ƒç´ 
public void add(String item) {
for (SimpleHash func : hashFunctions) {
bitSet.set(func.hash(item), true);
}
}
// æ£€æŸ¥å…ƒç´ 
public boolean contains(String item) {
for (SimpleHash func : hashFunctions) {
if (!bitSet.get(func.hash(item))) return false;
}
return true; // å¯èƒ½å­˜åœ¨
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç°æˆå·¥å…·åº“&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Guavaï¼ˆå•æœºç‰ˆï¼‰ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;BloomFilter&amp;lt;Integer&amp;gt; filter = BloomFilter.create(Funnels.integerFunnel(), 1000, 0.01);
filter.put(1);
filter.mightContain(1); // è¿”å› true æˆ– false
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RedisBloomï¼ˆåˆ†å¸ƒå¼ï¼‰&lt;/strong&gt;ï¼š
æ”¯æŒå‘½ä»¤ &lt;code&gt;BF.ADD&lt;/code&gt;ã€&lt;code&gt;BF.EXISTS&lt;/code&gt;ï¼Œé€‚ç”¨äºé›†ç¾¤ç¯å¢ƒ&lt;a class="link" href="@ref" &gt;2,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å˜ç§ä¸æ‰©å±•"&gt;ğŸ”„ å˜ç§ä¸æ‰©å±•
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆCounting Bloom Filterï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å°†ä½æ•°ç»„æ›¿æ¢ä¸ºè®¡æ•°å™¨ï¼Œæ”¯æŒåˆ é™¤æ“ä½œï¼ˆè®¡æ•°å™¨åŠ å‡ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;å¯æ‰©å±•å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆScalable Bloom Filterï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€å¢åŠ ä½æ•°ç»„ï¼Œåº”å¯¹æ•°æ®é‡å¢é•¿ï¼Œä¿æŒä½è¯¯åˆ¤ç‡&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;åˆ†å¸ƒå¼å¸ƒéš†è¿‡æ»¤å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†ç‰‡ä½æ•°ç»„åˆ°å¤šèŠ‚ç‚¹ï¼Œæå‡å¤§è§„æ¨¡ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-3"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ä»¥&lt;strong&gt;æå°å†…å­˜&lt;/strong&gt;å’Œ&lt;strong&gt;æé«˜æŸ¥è¯¢é€Ÿåº¦&lt;/strong&gt;è§£å†³äº†æµ·é‡æ•°æ®å­˜åœ¨æ€§åˆ¤æ–­é—®é¢˜ï¼Œå°¤å…¶é€‚åˆç¼“å­˜ç©¿é€ã€å»é‡ç­‰åœºæ™¯ã€‚å…¶ä»£ä»·æ˜¯&lt;strong&gt;å¯æ§çš„è¯¯åˆ¤ç‡&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸æ”¯æŒåˆ é™¤&lt;/strong&gt;çš„ç‰¹æ€§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆé€‰ç”¨æˆç†Ÿåº“ï¼ˆå¦‚ Guavaã€RedisBloomï¼‰&lt;a class="link" href="@ref" &gt;2,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´å‚æ•°ï¼ˆ&lt;code&gt;m&lt;/code&gt;ã€&lt;code&gt;k&lt;/code&gt;ï¼‰ï¼Œæƒè¡¡ç©ºé—´ä¸è¯¯åˆ¤ç‡&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹åˆ é™¤æ•æ„Ÿçš„åœºæ™¯ï¼Œæ”¹ç”¨è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨çš„è®¾è®¡ä½“ç°äº† &lt;strong&gt;â€œä»¥ç©ºé—´æ¢æ—¶é—´ï¼Œä»¥æ¦‚ç‡æ¢ç²¾ç¡®â€&lt;/strong&gt; çš„å·¥ç¨‹æ™ºæ…§ï¼Œæˆä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å¯æˆ–ç¼ºçš„åŸºç¡€ç»„ä»¶&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="é¡ºåºæ¶ˆè´¹"&gt;é¡ºåºæ¶ˆè´¹
&lt;/h2&gt;&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—çš„é¡ºåºæ¶ˆè´¹æŒ‡ç¡®ä¿æ¶ˆæ¯æŒ‰ç…§å‘é€çš„å…ˆåé¡ºåºè¢«å¤„ç†ï¼Œå°¤å…¶åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é¢ä¸´ç½‘ç»œå»¶è¿Ÿã€å¹¶è¡Œæ¶ˆè´¹ç­‰æŒ‘æˆ˜ã€‚ä»¥ä¸‹æ˜¯ä¿è¯é¡ºåºæ¶ˆè´¹çš„æ ¸å¿ƒåŸç†ã€ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°æ–¹æ¡ˆåŠå·¥ç¨‹å®è·µè¦ç‚¹ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-é¡ºåºæ¶ˆè´¹çš„æ ¸å¿ƒæŒ‘æˆ˜ä¸åŸºç¡€åŸç†"&gt;ğŸ” é¡ºåºæ¶ˆè´¹çš„æ ¸å¿ƒæŒ‘æˆ˜ä¸åŸºç¡€åŸç†
&lt;/h3&gt;&lt;h4 id="ä¸ºä½•é¡ºåºéš¾ä»¥ä¿è¯"&gt;&lt;strong&gt;ä¸ºä½•é¡ºåºéš¾ä»¥ä¿è¯ï¼Ÿ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹¶è¡Œæ¶æ„&lt;/strong&gt;ï¼šæ¶ˆæ¯é˜Ÿåˆ—é€šè¿‡å¤šåˆ†åŒº/é˜Ÿåˆ—ã€å¤šæ¶ˆè´¹è€…æå‡ååï¼Œå¤©ç„¶å¯¼è‡´æ¶ˆæ¯åˆ†æ•£å¤„ç†&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸å¹²æ‰°&lt;/strong&gt;ï¼šæ¶ˆè´¹è€…å®•æœºã€é‡å¹³è¡¡ï¼ˆRebalanceï¼‰æˆ–æ¶ˆæ¯é‡è¯•å¯èƒ½æ‰“ä¹±å¤„ç†é¡ºåº&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é¡ºåºæ€§åˆ†çº§"&gt;&lt;strong&gt;é¡ºåºæ€§åˆ†çº§&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é¡ºåº&lt;/strong&gt;ï¼šåŒä¸€Topicä¸‹æ‰€æœ‰æ¶ˆæ¯ä¸¥æ ¼æœ‰åºï¼ˆæ€§èƒ½ä»£ä»·é«˜ï¼Œæå°‘ä½¿ç”¨ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å±€éƒ¨é¡ºåº&lt;/strong&gt;ï¼šåŒä¸€ä¸šåŠ¡ç»„ï¼ˆå¦‚è®¢å•IDç›¸åŒçš„æ¶ˆæ¯ï¼‰æœ‰åºå¤„ç†ï¼ˆä¸»æµæ–¹æ¡ˆï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å®ç°ä¸‰è¦ç´ "&gt;&lt;strong&gt;å®ç°ä¸‰è¦ç´ &lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§æœ‰åº&lt;/strong&gt;ï¼šåŒä¸€ä¸šåŠ¡çš„æ¶ˆæ¯å¿…é¡»å‘é€åˆ°åŒä¸€é˜Ÿåˆ—/åˆ†åŒºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨æœ‰åº&lt;/strong&gt;ï¼šé˜Ÿåˆ—å†…éƒ¨éœ€éµå¾ªFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹æœ‰åº&lt;/strong&gt;ï¼šå•çº¿ç¨‹å¤„ç†åŒä¸€é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œé¿å…å¹¶å‘å¹²æ‰°&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¿è¯é¡ºåºæ¶ˆè´¹çš„æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ"&gt;âš™ï¸ ä¿è¯é¡ºåºæ¶ˆè´¹çš„æ ¸å¿ƒæŠ€æœ¯æ–¹æ¡ˆ
&lt;/h3&gt;&lt;h4 id="ç”Ÿäº§ç«¯è·¯ç”±åŒä¸€ä¸šåŠ¡æ¶ˆæ¯è‡³åŒä¸€é˜Ÿåˆ—"&gt;&lt;strong&gt;ç”Ÿäº§ç«¯ï¼šè·¯ç”±åŒä¸€ä¸šåŠ¡æ¶ˆæ¯è‡³åŒä¸€é˜Ÿåˆ—&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è·¯ç”±ç­–ç•¥ï¼šé€šè¿‡ä¸šåŠ¡Keyï¼ˆå¦‚è®¢å•IDï¼‰å“ˆå¸Œé€‰æ‹©é˜Ÿåˆ—ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;// RocketMQ ç¤ºä¾‹ï¼šæŒ‰è®¢å•IDé€‰æ‹©é˜Ÿåˆ—
public MessageQueue select(List&amp;lt;MessageQueue&amp;gt; queues, Message msg, Object arg) {
String orderId = (String) arg;
int index = Math.abs(orderId.hashCode()) % queues.size();
return queues.get(index);
}[5,7](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥å‘é€&lt;/strong&gt;ï¼šå¼‚æ­¥å‘é€å¯èƒ½å¯¼è‡´æ¶ˆæ¯ä¹±åºï¼Œéœ€å¼ºåˆ¶åŒæ­¥å‘é€&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é£é™©&lt;/strong&gt;ï¼šé˜Ÿåˆ—æ•°é‡å˜åŒ–ï¼ˆå¦‚Brokeræ‰©å®¹ï¼‰ä¼šå¯¼è‡´çŸ­æš‚ä¹±åºï¼Œéœ€ä¸šåŠ¡å®¹é”™&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å­˜å‚¨ç«¯é˜Ÿåˆ—å†…fifoä¿éšœ"&gt;&lt;strong&gt;å­˜å‚¨ç«¯ï¼šé˜Ÿåˆ—å†…FIFOä¿éšœ&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰€æœ‰æ¶ˆæ¯é˜Ÿåˆ—å‡æ»¡è¶³&lt;/strong&gt;ï¼šKafkaåˆ†åŒºã€RocketMQé˜Ÿåˆ—ã€RabbitMQé˜Ÿåˆ—å¤©ç„¶ä¿è¯å†…éƒ¨æ¶ˆæ¯æœ‰åºå­˜å‚¨&lt;a class="link" href="@ref" &gt;1,6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ¶ˆè´¹ç«¯å•çº¿ç¨‹ä¸²è¡Œå¤„ç†"&gt;&lt;strong&gt;æ¶ˆè´¹ç«¯ï¼šå•çº¿ç¨‹ä¸²è¡Œå¤„ç†&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;é˜Ÿåˆ—ç‹¬å æ¶ˆè´¹ï¼šåŒä¸€é˜Ÿåˆ—ä»…å…è®¸ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å¤„ç†ï¼Œé¿å…å¹¶å‘ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;RocketMQ&lt;/strong&gt;ï¼š&lt;code&gt;MessageListenerOrderly&lt;/code&gt; + åˆ†å¸ƒå¼é”ï¼ˆBrokeré”+æœ¬åœ°é˜Ÿåˆ—é”ï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kafka&lt;/strong&gt;ï¼šå•åˆ†åŒºå•çº¿ç¨‹æ¶ˆè´¹ï¼Œé€šè¿‡&lt;code&gt;max.poll.records=1&lt;/code&gt;æ§åˆ¶å•æ¬¡æ‹‰å–æ¶ˆæ¯æ•°&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt;ï¼šå•é˜Ÿåˆ—å•æ¶ˆè´¹è€… + &lt;code&gt;prefetch_count=1&lt;/code&gt;ï¼ˆæ¯æ¬¡ä»…æ¶ˆè´¹ä¸€æ¡ï¼‰&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# RabbitMQ ç¤ºä¾‹ï¼šè®¾ç½®prefetch_count=1
channel.basic_qos(prefetch_count=1)[2](@ref)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;å¼‚å¸¸å¤„ç†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨ACK&lt;/strong&gt;ï¼šæ¶ˆæ¯å¤„ç†æˆåŠŸåæ‰ç¡®è®¤ï¼Œå¤±è´¥åˆ™é‡è¯•ï¼ˆé¿å…ä¹±åºé‡è¯•ï¼‰&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é˜»å¡é£é™©&lt;/strong&gt;ï¼šå•æ¡æ¶ˆæ¯å¤„ç†å¤±è´¥ä¼šé˜»å¡åç»­æ¶ˆæ¯ï¼Œéœ€è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°æˆ–æ­»ä¿¡é˜Ÿåˆ—&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¯¹æ¯”"&gt;ğŸ“Š ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç”Ÿäº§ç«¯ç­–ç•¥&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¶ˆè´¹ç«¯ç­–ç•¥&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ€§èƒ½å½±å“&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RocketMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;MessageQueueSelector&lt;/code&gt;æŒ‰Keyè·¯ç”±&lt;/td&gt;
&lt;td&gt;&lt;code&gt;MessageListenerOrderly&lt;/code&gt; + ä¸‰æŠŠé”&lt;/td&gt;
&lt;td&gt;ç”µå•†è®¢å•ã€æ”¯ä»˜æµæ°´&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ï¼Œæ‰©å±•æ€§å¼º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Kafka&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰Keyå“ˆå¸Œåˆ°åŒä¸€åˆ†åŒº&lt;/td&gt;
&lt;td&gt;å•åˆ†åŒºå•çº¿ç¨‹æ¶ˆè´¹&lt;/td&gt;
&lt;td&gt;æ—¥å¿—æµã€å®æ—¶è®¡ç®—&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;è¶…é«˜ååï¼Œåˆ†åŒºæ‰©å±•æ€§å¥½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;RoutingKeyç»‘å®šå›ºå®šé˜Ÿåˆ—&lt;/td&gt;
&lt;td&gt;å•é˜Ÿåˆ—å•æ¶ˆè´¹è€… + &lt;code&gt;prefetch_count=1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½é¢‘é«˜é¡ºåºéœ€æ±‚ï¼ˆå¦‚å¯¹è´¦ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½ååï¼Œæ‰©å±•æ€§å·®&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’¡ &lt;strong&gt;æ³¨&lt;/strong&gt;ï¼šRabbitMQå¯é€šè¿‡å¤šé˜Ÿåˆ—åˆ†æµå®ç°å±€éƒ¨é¡ºåºï¼ˆå¦‚æŒ‰ç”¨æˆ·IDåˆ†é˜Ÿåˆ—ï¼‰ï¼Œä½†éœ€ä¸šåŠ¡å±‚è®¾è®¡è·¯ç”±&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-å…¸å‹é—®é¢˜ä¸åº”å¯¹ç­–ç•¥"&gt;âš ï¸ å…¸å‹é—®é¢˜ä¸åº”å¯¹ç­–ç•¥
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹é˜»å¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šå•æ¡æ¶ˆæ¯å¤„ç†æ…¢æˆ–å¤±è´¥é‡è¯•é˜»å¡åç»­æ¶ˆæ¯&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼š
&lt;ul&gt;
&lt;li&gt;è®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆå¦‚3æ¬¡ï¼‰ï¼Œè¶…æ—¶è½¬æ­»ä¿¡é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–æ¶ˆè´¹é€»è¾‘ï¼ˆå¦‚å¼‚æ­¥å¤„ç†éå…³é”®æ“ä½œï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤æ‰©å®¹å¯¼è‡´ä¹±åº&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šBrokeræ‰©å®¹ä½¿é˜Ÿåˆ—æ•°å˜åŒ–ï¼Œå“ˆå¸Œè·¯ç”±å¤±æ•ˆ&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸šåŠ¡ç«¯é¢„åˆ†æ¡¶ï¼ˆå¦‚å›ºå®š1024ä¸ªè™šæ‹Ÿæ¡¶æ˜ å°„ç‰©ç†é˜Ÿåˆ—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½å³°æœŸæ‰©å®¹ + æ•°æ®è¿ç§»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é¡ºåºéœ€æ±‚&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå•åˆ†åŒº/å•é˜Ÿåˆ—ï¼ˆå¦‚Kafkaå•åˆ†åŒºã€RocketMQå•é˜Ÿåˆ—ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ä»·&lt;/strong&gt;ï¼šååé‡éª¤é™ï¼Œä»…é€‚åˆä½å¹¶å‘åœºæ™¯ï¼ˆå¦‚é…ç½®æ›´æ–°ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æœ€ä½³å®è·µæ€»ç»“"&gt;ğŸ› ï¸ æœ€ä½³å®è·µæ€»ç»“
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ä¸šåŠ¡è®¾è®¡ä¼˜å…ˆï¼š
&lt;ul&gt;
&lt;li&gt;é¿å…å…¨å±€é¡ºåºéœ€æ±‚ï¼Œé€šè¿‡ä¸šåŠ¡æ‹†åˆ†ï¼ˆå¦‚è®¢å•IDåˆ†ç»„ï¼‰å®ç°å±€éƒ¨é¡ºåº&lt;a class="link" href="@ref" &gt;3,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç”Ÿäº§ç«¯ç»„åˆç­–ç•¥ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸šåŠ¡Keyè·¯ç”± + åŒæ­¥å‘é€ + å¼‚å¸¸å›æ»š&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¶ˆè´¹ç«¯ç¨³å¥é…ç½®ï¼š
&lt;ul&gt;
&lt;li&gt;RocketMQ/Kafkaï¼šå•é˜Ÿåˆ—å•çº¿ç¨‹ + æœ‰é™é‡è¯•ã€‚&lt;/li&gt;
&lt;li&gt;RabbitMQï¼š&lt;code&gt;prefetch_count=1&lt;/code&gt; + æ‰‹åŠ¨ACK&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç›‘æ§ä¸é™çº§ï¼š
&lt;ul&gt;
&lt;li&gt;ç›‘æ§æ¶ˆæ¯ç§¯å‹ï¼ŒåŠ¨æ€æ‰©å®¹æ¶ˆè´¹è€…ï¼ˆéé¡ºåºé˜Ÿåˆ—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç†”æ–­é™çº§ï¼šæ•°æ®åº“å‹åŠ›è¿‡å¤§æ—¶è¿”å›å…œåº•æ•°æ®&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ¶æ„å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é«˜å¹¶å‘åœºæ™¯ï¼šé€‰ RocketMQ/Kafka åˆ†åŒºé¡ºåº + å¤šçº§ç¼“å­˜ã€‚&lt;/li&gt;
&lt;li&gt;ä½ååå¼ºé¡ºåºï¼šRabbitMQ å•é˜Ÿåˆ—å•æ¶ˆè´¹è€…ã€‚&lt;/li&gt;
&lt;li&gt;ç»ˆæå®¹é”™ï¼šåœ¨æ¶ˆè´¹å±‚å®ç°å¹‚ç­‰æ€§ï¼ˆå¦‚æ•°æ®åº“å”¯ä¸€çº¦æŸï¼‰ï¼Œå³ä½¿ä¹±åºä¹Ÿèƒ½æœ€ç»ˆä¸€è‡´&lt;a class="link" href="@ref" &gt;3,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id="æ­»ä¿¡é˜Ÿåˆ—"&gt;æ­»ä¿¡é˜Ÿåˆ—
&lt;/h2&gt;&lt;p&gt;æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼ŒDLQï¼‰æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ä¸­çš„ä¸€ç§ç‰¹æ®Šé˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨&lt;strong&gt;æ— æ³•è¢«æ­£å¸¸æ¶ˆè´¹çš„æ¶ˆæ¯&lt;/strong&gt;ï¼ˆç§°ä¸ºâ€œæ­»ä¿¡â€ï¼‰ã€‚å…¶æ ¸å¿ƒä½œç”¨æ˜¯ä¸ºå¼‚å¸¸æ¶ˆæ¯æä¾›å…œåº•å¤„ç†æœºåˆ¶ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±æˆ–æ— é™é‡è¯•å¯¼è‡´ç³»ç»Ÿé›ªå´©ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒè¦ç‚¹ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ­»ä¿¡æ¥æºè§¦å‘æ¡ä»¶"&gt;âš™ï¸ &lt;strong&gt;æ­»ä¿¡æ¥æºï¼ˆè§¦å‘æ¡ä»¶ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ¶ˆæ¯è¢«æ‹’ç»ä¸”ä¸é‡è¯•&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆè´¹è€…æ˜ç¡®æ‹’ç»æ¶ˆæ¯ï¼ˆå¦‚RabbitMQçš„ &lt;code&gt;basic.reject&lt;/code&gt; æˆ– &lt;code&gt;basic.nack&lt;/code&gt;ï¼‰ï¼Œä¸”è®¾ç½® &lt;code&gt;requeue=false&lt;/code&gt;ï¼Œæ¶ˆæ¯ä¸å†è¿”å›åŸé˜Ÿåˆ—&lt;a class="link" href="@ref" &gt;2,5,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;æ¶ˆæ¯è¶…æ—¶ï¼ˆTTLè¿‡æœŸï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­çš„å­˜æ´»æ—¶é—´è¶…è¿‡é¢„è®¾çš„TTLï¼ˆTime-To-Liveï¼‰ï¼Œæœªè¢«æ¶ˆè´¹å³å¤±æ•ˆ&lt;a class="link" href="@ref" &gt;4,7,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§å®¹é‡&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é˜Ÿåˆ—æ¶ˆæ¯æ•°é‡æˆ–æ€»å¤§å°è¶…è¿‡é™åˆ¶ï¼Œæ–°æ¶ˆæ¯æ— æ³•è¿›å…¥æ—¶ï¼Œæ—§æ¶ˆæ¯å¯èƒ½è¢«æŒ¤å…¥æ­»ä¿¡é˜Ÿåˆ—&lt;a class="link" href="@ref" &gt;4,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒä»·å€¼"&gt;ğŸ›¡ï¸ &lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å¼‚å¸¸æ¶ˆæ¯æš‚å­˜äºDLQï¼Œé¿å…å› ä¸¢å¼ƒå¯¼è‡´ä¸šåŠ¡æ•°æ®ç¼ºå¤±ï¼Œä¸ºäººå·¥å¹²é¢„æˆ–è‡ªåŠ¨ä¿®å¤æä¾›ç¼“å†²&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;éš”ç¦»æ•…éšœ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å°†é—®é¢˜æ¶ˆæ¯ç§»å‡ºæ­£å¸¸é˜Ÿåˆ—ï¼Œé¿å…é˜»å¡åç»­æ¶ˆæ¯å¤„ç†ï¼Œä¿éšœç³»ç»Ÿç¨³å®šæ€§&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;ç®€åŒ–é—®é¢˜æ’æŸ¥&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;é›†ä¸­å­˜å‚¨å¼‚å¸¸æ¶ˆæ¯ï¼Œä¾¿äºå¼€å‘äººå‘˜åˆ†æå¤±è´¥åŸå› ï¼ˆå¦‚æ ¼å¼é”™è¯¯ã€ä¾èµ–æœåŠ¡ä¸å¯ç”¨ç­‰ï¼‰&lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯"&gt;âš¡ &lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ¶ˆæ¯é‡è¯•å¤±è´¥å…œåº•&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è®¢å•æ”¯ä»˜æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥3æ¬¡åè½¬å…¥DLQï¼Œè§¦å‘å‘Šè­¦æˆ–äººå·¥å¤„ç†&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;å»¶è¿Ÿæ¶ˆæ¯è§¦å‘&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è®¢å•è¶…æ—¶æœªæ”¯ä»˜ï¼šè®¾ç½®æ¶ˆæ¯TTLä¸º30åˆ†é’Ÿï¼Œè¿‡æœŸåè¿›å…¥DLQï¼Œè§¦å‘å…³å•é€»è¾‘&lt;a class="link" href="@ref" &gt;7,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;å¼‚å¸¸æ•°æ®å¤„ç†&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯æ ¼å¼é”™è¯¯ï¼ˆå¦‚JSONè§£æå¤±è´¥ï¼‰æ—¶ï¼Œè½¬å…¥DLQé¿å…æ¶ˆè´¹è€…å´©æºƒ&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="4"&gt;
&lt;li&gt;æµé‡ç†”æ–­&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æœåŠ¡æ•…éšœå¯¼è‡´æ¶ˆæ¯ç§¯å‹æ—¶ï¼Œé€šè¿‡DLQéš”ç¦»é—®é¢˜ï¼Œé¿å…é‡è¯•é£æš´æ‹–å®ç³»ç»Ÿ&lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æŠ€æœ¯å®ç°ä»¥rabbitmqä¸ºä¾‹"&gt;ğŸ§© &lt;strong&gt;æŠ€æœ¯å®ç°ï¼ˆä»¥RabbitMQä¸ºä¾‹ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ç»‘å®šæ­»ä¿¡äº¤æ¢æœºï¼ˆDLXï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ™®é€šé˜Ÿåˆ—å£°æ˜æ—¶ç»‘å®šDLXå’Œè·¯ç”±é”®ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;Map&amp;lt;String, Object&amp;gt; args = new HashMap&amp;lt;&amp;gt;();
args.put(&amp;#34;x-dead-letter-exchange&amp;#34;, &amp;#34;dlx.exchange&amp;#34;); // æ­»ä¿¡äº¤æ¢æœº
args.put(&amp;#34;x-dead-letter-routing-key&amp;#34;, &amp;#34;order.dlq&amp;#34;); // æ­»ä¿¡è·¯ç”±é”®
channel.queueDeclare(&amp;#34;order.queue&amp;#34;, true, false, false, args);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;åˆ›å»ºæ­»ä¿¡é˜Ÿåˆ—&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ­»ä¿¡é˜Ÿåˆ—ç»‘å®šåˆ°DLXï¼Œæ¥æ”¶è·¯ç”±è€Œæ¥çš„å¼‚å¸¸æ¶ˆæ¯ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;channel.queueDeclare(&amp;#34;order.dlq&amp;#34;, true, false, false, null); // æ­»ä¿¡é˜Ÿåˆ—
channel.queueBind(&amp;#34;order.dlq&amp;#34;, &amp;#34;dlx.exchange&amp;#34;, &amp;#34;order.dlq&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å½“ &lt;code&gt;order.queue&lt;/code&gt; ä¸­çš„æ¶ˆæ¯æ»¡è¶³æ­»ä¿¡æ¡ä»¶æ—¶ï¼Œè‡ªåŠ¨è·¯ç”±è‡³ &lt;code&gt;order.dlq&lt;/code&gt;&lt;a class="link" href="@ref" &gt;4,7,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"&gt;âš ï¸ &lt;strong&gt;æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;é¿å…æ»¥ç”¨DLQ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;FIFOé˜Ÿåˆ—æ…ç”¨&lt;/strong&gt;ï¼šæ­»ä¿¡å¯èƒ½ç ´åä¸¥æ ¼é¡ºåºï¼ˆå¦‚è§†é¢‘ç¼–è¾‘æŒ‡ä»¤ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— é™é‡è¯•åœºæ™¯&lt;/strong&gt;ï¼šè‹¥éœ€ç­‰å¾…ä¾èµ–æœåŠ¡æ¢å¤ï¼Œåº”ä½¿ç”¨å»¶è¿Ÿé˜Ÿåˆ—è€ŒéDLQ&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;å…³é”®é…ç½®&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å‘Šè­¦&lt;/strong&gt;ï¼šç›‘æ§DLQå †ç§¯é‡ï¼ˆå¦‚è¶…è¿‡1000æ¡è§¦å‘å‘Šè­¦ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹‚ç­‰è®¾è®¡&lt;/strong&gt;ï¼šé‡è¯•å¤„ç†æ­»ä¿¡æ—¶éœ€é˜²æ­¢é‡å¤æ¶ˆè´¹å¯¼è‡´æ•°æ®é”™è¯¯&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TTLä¼˜åŒ–&lt;/strong&gt;ï¼šæ ¹æ®ä¸šåŠ¡è®¾ç½®åˆç†è¶…æ—¶æ—¶é—´ï¼Œé¿å…è¿‡æ—©/è¿‡æ™šè¿›å…¥DLQ&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¯¹æ¯”-1"&gt;ğŸ”§ &lt;strong&gt;ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ­»ä¿¡é˜Ÿåˆ—ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€æ˜¾å¼ç»‘å®šDLXå’Œæ­»ä¿¡é˜Ÿåˆ—ï¼›æ”¯æŒä¸‰ç§æ­»ä¿¡æ¥æº&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RocketMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åˆ›å»ºæ­»ä¿¡é˜Ÿåˆ—ï¼ˆ&lt;code&gt;%DLQ%æ¶ˆè´¹ç»„å&lt;/code&gt;ï¼‰ï¼›æ¶ˆæ¯é‡è¯•16æ¬¡å¤±è´¥åè½¬å…¥&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Kafka&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— å†…ç½®DLQï¼Œéœ€è‡ªå®šä¹‰æ­»ä¿¡Topicå¹¶æ‰‹åŠ¨è½¬ç§»å¤±è´¥æ¶ˆæ¯&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ActiveMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é»˜è®¤å¯ç”¨DLQï¼ˆ&lt;code&gt;ActiveMQ.DLQ&lt;/code&gt;ï¼‰ï¼Œå¯é…ç½®æœ€å¤§é‡è¯•æ¬¡æ•°&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-4"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;æ­»ä¿¡é˜Ÿåˆ—æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„**â€œå®‰å…¨æ°”å›Šâ€**ï¼šé€šè¿‡éš”ç¦»å¼‚å¸¸æ¶ˆæ¯ï¼Œå¹³è¡¡äº†å¯é æ€§ï¼ˆä¸ä¸¢æ•°æ®ï¼‰ä¸å¯ç”¨æ€§ï¼ˆæ•…éšœéš”ç¦»ï¼‰ã€‚å®é™…åº”ç”¨ä¸­éœ€ç»“åˆä¸šåŠ¡åœºæ™¯é…ç½®æ­»ä¿¡è§„åˆ™ï¼Œå¹¶é…å¥—ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶ï¼Œç¡®ä¿é—®é¢˜å¯è¿½æº¯ã€å¯æ¢å¤&lt;a class="link" href="@ref" &gt;7,10&lt;/a&gt;ã€‚å¯¹äºéœ€é«˜å¯é æ€§çš„åœºæ™¯ï¼ˆå¦‚é‡‘èäº¤æ˜“ï¼‰ï¼Œå»ºè®®ç»“åˆäº‹åŠ¡æ¶ˆæ¯+DLQä½¿ç”¨&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id="é‡å¤æ¶ˆè´¹"&gt;é‡å¤æ¶ˆè´¹
&lt;/h2&gt;&lt;p&gt;æ¶ˆæ¯é˜Ÿåˆ—ä¸­é˜²æ­¢æ¶ˆæ¯é‡å¤æ¶ˆè´¹æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒæŒ‘æˆ˜ä¹‹ä¸€ï¼Œéœ€åœ¨ç”Ÿäº§è€…ã€æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç«¯å’Œæ¶ˆè´¹è€…ä¸‰ä¸ªå±‚é¢ååŒè®¾è®¡ã€‚ä»¥ä¸‹æ˜¯ç³»ç»ŸåŒ–çš„è§£å†³æ–¹æ¡ˆåŠå®è·µè¦ç‚¹ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ç”Ÿäº§è€…ç«¯é¿å…æ¶ˆæ¯é‡å¤å‘é€"&gt;âš™ï¸ ç”Ÿäº§è€…ç«¯ï¼šé¿å…æ¶ˆæ¯é‡å¤å‘é€
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å”¯ä¸€æ¶ˆæ¯IDæœºåˆ¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šä¸ºæ¯æ¡æ¶ˆæ¯ç”Ÿæˆå…¨å±€å”¯ä¸€IDï¼ˆå¦‚UUIDã€é›ªèŠ±ç®—æ³•IDï¼‰ï¼Œå‘é€å‰åœ¨æœ¬åœ°æˆ–åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆå¦‚Redisï¼‰è®°å½•è¯¥IDï¼Œåç»­å‘é€æ—¶æ ¡éªŒå»é‡&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæ‰€æœ‰æ¶ˆæ¯é˜Ÿåˆ—é€šç”¨ï¼Œä½†éœ€æƒè¡¡å­˜å‚¨æˆæœ¬ä¸å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—çš„å¹‚ç­‰ç”Ÿäº§è€…&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å®ç°ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kafka&lt;/strong&gt;ï¼šè®¾ç½® &lt;code&gt;enable.idempotence=true&lt;/code&gt;ï¼Œç»“åˆ &lt;code&gt;acks=all&lt;/code&gt; å’Œäº‹åŠ¡APIï¼Œç¡®ä¿æ¶ˆæ¯ç²¾å‡†ä¸€æ¬¡æŠ•é€’&lt;a class="link" href="@ref" &gt;1,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RocketMQ&lt;/strong&gt;ï¼šä½¿ç”¨äº‹åŠ¡æ¶ˆæ¯ï¼ˆäºŒé˜¶æ®µæäº¤ï¼‰ï¼Œç”Ÿäº§è€…æœ¬åœ°äº‹åŠ¡ä¸æ¶ˆæ¯å‘é€åŸå­ç»‘å®š&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šç”±ä¸­é—´ä»¶ä¿éšœï¼Œä¸šåŠ¡ä»£ç æ— éœ€é¢å¤–å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç«¯å†…ç½®å»é‡ä¸éš”ç¦»"&gt;ğŸ›¡ï¸ æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç«¯ï¼šå†…ç½®å»é‡ä¸éš”ç¦»
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Brokerç«¯å»é‡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;RocketMQ&lt;/strong&gt;ï¼šé€šè¿‡ &lt;code&gt;UNIQUE_KEY&lt;/code&gt; å±æ€§å®ç°æœåŠ¡ç«¯å»é‡ï¼Œè‡ªåŠ¨è¿‡æ»¤é‡å¤æ¶ˆæ¯&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt;ï¼šå€ŸåŠ©æ’ä»¶ï¼ˆå¦‚ &lt;code&gt;rabbitmq_message_deduplication&lt;/code&gt;ï¼‰å®ç°ç±»ä¼¼åŠŸèƒ½&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯è¿‡æœŸæœºåˆ¶ï¼ˆTTLï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºæ¶ˆæ¯æˆ–é˜Ÿåˆ—è®¾ç½®ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ï¼Œè¶…æ—¶åè‡ªåŠ¨åˆ é™¤ï¼Œé¿å…å› å †ç§¯å¯¼è‡´é‡å¤æ¶ˆè´¹é£é™©&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç§’æ€ã€é™æ—¶ä¼˜æƒ ç­‰é«˜æ—¶æ•ˆæ€§ä¸šåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ¶ˆè´¹è€…ç«¯å¹‚ç­‰æ€§è®¾è®¡æ ¸å¿ƒé˜²å¾¡"&gt;ğŸ§  æ¶ˆè´¹è€…ç«¯ï¼šå¹‚ç­‰æ€§è®¾è®¡ï¼ˆæ ¸å¿ƒé˜²å¾¡ï¼‰
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å”¯ä¸€æ¶ˆæ¯ID + çŠ¶æ€å­˜å‚¨&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æµç¨‹ï¼š
&lt;ul&gt;
&lt;li&gt;æ¶ˆè´¹è€…æå–æ¶ˆæ¯çš„å”¯ä¸€IDï¼ˆå¦‚è®¢å•å·ã€æ”¯ä»˜æµæ°´å·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢å­˜å‚¨ç³»ç»Ÿï¼ˆRedis/DBï¼‰åˆ¤æ–­æ˜¯å¦å·²å¤„ç†ï¼š
&lt;ul&gt;
&lt;li&gt;è‹¥å·²å¤„ç† â†’ ç›´æ¥ACKç¡®è®¤&lt;a class="link" href="@ref" &gt;2,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥æœªå¤„ç† â†’ æ‰§è¡Œä¸šåŠ¡é€»è¾‘ â†’ è®°å½•å¤„ç†çŠ¶æ€ â†’ ACKç¡®è®¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å­˜å‚¨é€‰æ‹©ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜é¢‘åœºæ™¯&lt;/strong&gt;ï¼šRedisçš„ &lt;code&gt;SETNX&lt;/code&gt; å‘½ä»¤æˆ–å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆå†…å­˜å ç”¨ä½ï¼Œæœ‰è¯¯åˆ¤ç‡ï¼‰&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½é¢‘å¼ºä¸€è‡´&lt;/strong&gt;ï¼šæ•°æ®åº“å”¯ä¸€ç´¢å¼•ï¼ˆå¦‚MySQLå”¯ä¸€é”®ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸šåŠ¡é€»è¾‘å¹‚ç­‰è®¾è®¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“æ“ä½œï¼š
&lt;ul&gt;
&lt;li&gt;æ’å…¥æ—¶ä½¿ç”¨ &lt;code&gt;INSERT IGNORE&lt;/code&gt; æˆ– &lt;code&gt;ON DUPLICATE KEY UPDATE&lt;/code&gt;&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ›´æ–°æ—¶æ·»åŠ ä¹è§‚é”ï¼ˆç‰ˆæœ¬å·ï¼‰æˆ–çŠ¶æ€æ ¡éªŒï¼ˆå¦‚ &lt;code&gt;UPDATE orders SET status='paid' WHERE status='unpaid'&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¤©ç„¶å¹‚ç­‰æ“ä½œï¼š
&lt;ul&gt;
&lt;li&gt;åˆ é™¤ï¼ˆ&lt;code&gt;DELETE&lt;/code&gt;ï¼‰ã€æŸ¥è¯¢ï¼ˆ&lt;code&gt;SELECT&lt;/code&gt;ï¼‰ã€å›ºå®šå€¼æ›´æ–°ï¼ˆ&lt;code&gt;SET status=1&lt;/code&gt;ï¼‰æ— éœ€é¢å¤–å¤„ç†&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼é”æ§åˆ¶å¹¶å‘&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨Redisæˆ–ZooKeeperå®ç°åˆ†å¸ƒå¼é”ï¼Œç¡®ä¿åŒä¸€ä¸šåŠ¡é”®ï¼ˆå¦‚è®¢å•IDï¼‰çš„æ¶ˆæ¯ä¸²è¡Œå¤„ç†&lt;a class="link" href="@ref" &gt;1,2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šé”ç²’åº¦è¦ç»†ï¼ˆæŒ‰ä¸šåŠ¡é”®åŠ é”ï¼‰ï¼Œé¿å…æ€§èƒ½ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å®¹é”™æœºåˆ¶å…œåº•ä¸æ¢å¤"&gt;âš ï¸ å®¹é”™æœºåˆ¶ï¼šå…œåº•ä¸æ¢å¤
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆè´¹ç¡®è®¤ï¼ˆACKï¼‰ä¸é‡è¯•ç­–ç•¥&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰‹åŠ¨ACK&lt;/strong&gt;ï¼šä¸šåŠ¡é€»è¾‘æˆåŠŸåå†æäº¤ACKï¼Œå¤±è´¥åˆ™NACKé‡è¯•ï¼ˆå¦‚RabbitMQçš„ &lt;code&gt;basicNack&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡è¯•é™åˆ¶&lt;/strong&gt;ï¼šè®¾ç½®æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆå¦‚3æ¬¡ï¼‰ï¼Œè¶…é™åè½¬å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLQï¼‰äººå·¥å¤„ç†&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§è¡¥å¿&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è´¦ç³»ç»Ÿï¼šå®šæœŸæ‰«æä¸šåŠ¡æ•°æ®ï¼ˆå¦‚è®¢å•çŠ¶æ€ï¼‰ï¼Œä¿®å¤å› æç«¯æƒ…å†µå¯¼è‡´çš„é‡å¤é—®é¢˜&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬å·è¿½è¸ªï¼šé€šè¿‡æ¶ˆæ¯æºå¸¦çš„ç‰ˆæœ¬å·ï¼Œä¸¢å¼ƒæ—§ç‰ˆæœ¬æ¶ˆæ¯ï¼ˆå¦‚ &lt;code&gt;if (message.version &amp;gt; current_version)&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¯¹æ¯”-2"&gt;ğŸ“Š ä¸»æµæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¯¹æ¯”
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç”Ÿäº§è€…é˜²é‡&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æœåŠ¡ç«¯å»é‡&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ¶ˆè´¹è€…ç«¯æ¨èæ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Kafka&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;enable.idempotence=true&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸æ”¯æŒ&lt;/td&gt;
&lt;td&gt;å”¯ä¸€ID + Redis + å¹‚ç­‰æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RocketMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;äº‹åŠ¡æ¶ˆæ¯&lt;/td&gt;
&lt;td&gt;æ”¯æŒï¼ˆ&lt;code&gt;UNIQUE_KEY&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;å¸ƒéš†è¿‡æ»¤å™¨ + ä¹è§‚é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å”¯ä¸€ID + æœ¬åœ°ç¼“å­˜&lt;/td&gt;
&lt;td&gt;éœ€æ’ä»¶æ”¯æŒ&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“å”¯ä¸€ç´¢å¼• + æ‰‹åŠ¨ACK&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-åœºæ™¯åŒ–æ–¹æ¡ˆé€‰æ‹©"&gt;ğŸ› ï¸ åœºæ™¯åŒ–æ–¹æ¡ˆé€‰æ‹©
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ”¯ä»˜å›è°ƒï¼ˆé«˜é¢‘é«˜æ•ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå”¯ä¸€æ”¯ä»˜æµæ°´å· + Rediså»é‡ + ä¹è§‚é”æ›´æ–°è®¢å•çŠ¶æ€&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä»£ç ç‰‡æ®µï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;UPDATE orders SET status = &amp;#39;paid&amp;#39;
WHERE order_id = &amp;#39;123&amp;#39; AND status = &amp;#39;unpaid&amp;#39;;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº“å­˜æ‰£å‡ï¼ˆé˜²è¶…å–ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šRedisåŸå­æ“ä½œï¼ˆ&lt;code&gt;DECRBY&lt;/code&gt;ï¼‰ + æ‰£å‡æµæ°´è¡¨å”¯ä¸€çº¦æŸ&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šæ‰£å‡å‰æ ¡éªŒåº“å­˜ä½™é¢ï¼Œé¿å…è´Ÿæ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šçŸ¥ç±»æ¶ˆæ¯ï¼ˆå…è®¸å°‘é‡é‡å¤ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šæ¶ˆæ¯TTL + å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç‰ºç‰²ç²¾ç¡®æ€§æ¢å–æ€§èƒ½&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“ä¸æœ€ä½³å®è·µ"&gt;ğŸ’ æ€»ç»“ä¸æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆå±‚çº§&lt;/strong&gt;ï¼š
â€‹&lt;strong&gt;ä¸šåŠ¡å¹‚ç­‰è®¾è®¡&lt;/strong&gt;â€‹ &amp;gt; â€‹&lt;strong&gt;å”¯ä¸€IDå»é‡&lt;/strong&gt;â€‹ &amp;gt; â€‹&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—ç‰¹æ€§&lt;/strong&gt;â€‹ &amp;gt; â€‹&lt;strong&gt;äººå·¥è¡¥å¿&lt;/strong&gt;â€‹&lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é»„é‡‘ç»„åˆ&lt;/strong&gt;ï¼š
ç”Ÿäº§è€…å”¯ä¸€ID + æ¶ˆè´¹è€…å¹‚ç­‰æ“ä½œ + æ­»ä¿¡é˜Ÿåˆ—å…œåº•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æƒè¡¡&lt;/strong&gt;ï¼š
é«˜é¢‘åœºæ™¯ç”¨Redisï¼ˆTPSé«˜ï¼‰ï¼Œä½é¢‘å¼ºä¸€è‡´ç”¨æ•°æ®åº“ï¼ˆå¯é æ€§å¼ºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹ç¾è®¾è®¡&lt;/strong&gt;ï¼š
ç›‘æ§DLQå †ç§¯é‡ï¼Œè®¾ç½®å‘Šè­¦é˜ˆå€¼ï¼ˆå¦‚ &amp;gt;1000æ¡ï¼‰ï¼Œå®šæœŸå·¡æ£€å¯¹è´¦&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡åˆ†å±‚é˜²å¾¡ï¼ˆç”Ÿäº§é˜²é‡ã€æ¶ˆè´¹å¹‚ç­‰ã€å¼‚å¸¸éš”ç¦»ï¼‰ï¼Œå¯åœ¨99.9%åœºæ™¯ä¸‹é¿å…é‡å¤æ¶ˆè´¹ã€‚æç«¯æƒ…å†µï¼ˆå¦‚åˆ†å¸ƒå¼å­˜å‚¨æ•…éšœï¼‰éœ€ç»“åˆä¸šåŠ¡è¡¥å¿æœºåˆ¶ï¼Œå®ç°æœ€ç»ˆä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="åˆ†å¸ƒå¼é”"&gt;åˆ†å¸ƒå¼é”
&lt;/h2&gt;&lt;p&gt;åˆ†å¸ƒå¼é”æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­åè°ƒå¤šèŠ‚ç‚¹å¯¹å…±äº«èµ„æºäº’æ–¥è®¿é—®çš„æ ¸å¿ƒæœºåˆ¶ï¼Œç¡®ä¿åœ¨ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹èƒ½æ“ä½œå…±äº«èµ„æºï¼ˆå¦‚æ•°æ®åº“è®°å½•ã€é…ç½®ã€åº“å­˜ï¼‰ï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´å’Œç«äº‰æ¡ä»¶ã€‚ä»¥ä¸‹ä»åŸç†ã€å®ç°ã€æŒ‘æˆ˜åˆ°å®è·µè¿›è¡Œå…¨é¢è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§"&gt;ğŸ”’ æ ¸å¿ƒåŸç†ä¸ç‰¹æ€§
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒç›®æ ‡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº’æ–¥æ€§&lt;/strong&gt;ï¼šåŒä¸€æ—¶åˆ»ä»…ä¸€ä¸ªèŠ‚ç‚¹æŒæœ‰é”&lt;a class="link" href="@ref" &gt;1,2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹é”™æ€§&lt;/strong&gt;ï¼šå³ä½¿èŠ‚ç‚¹å´©æºƒæˆ–ç½‘ç»œå¼‚å¸¸ï¼Œé”ä¹Ÿèƒ½è‡ªåŠ¨é‡Šæ”¾ï¼ˆé¿å…æ­»é”ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡å…¥æ€§&lt;/strong&gt;ï¼šåŒä¸€èŠ‚ç‚¹å¯å¤šæ¬¡è·å–åŒä¸€æŠŠé”ï¼ˆé˜²æ­¢è‡ªæˆ‘é˜»å¡ï¼‰&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨&lt;/strong&gt;ï¼šé”æœåŠ¡éœ€é›†ç¾¤åŒ–ï¼Œå•ç‚¹æ•…éšœä¸å½±å“æ•´ä½“åŠŸèƒ½&lt;a class="link" href="@ref" &gt;2,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç§’æ€åº“å­˜æ‰£å‡&lt;/strong&gt;ï¼šé˜²æ­¢è¶…å–ï¼ˆå¦‚Redisé”æ§åˆ¶åº“å­˜æ›´æ–°ï¼‰&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦&lt;/strong&gt;ï¼šç¡®ä¿å®šæ—¶ä»»åŠ¡ä»…å•èŠ‚ç‚¹æ‰§è¡Œ&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®æ›´æ–°&lt;/strong&gt;ï¼šé¿å…å¤šèŠ‚ç‚¹å¹¶å‘ä¿®æ”¹é…ç½®å¯¼è‡´å†²çª&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡åè°ƒ&lt;/strong&gt;ï¼šä¿è¯è·¨æœåŠ¡æ“ä½œçš„åŸå­æ€§&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»æµå®ç°æ–¹å¼å¯¹æ¯”"&gt;âš™ï¸ ä¸»æµå®ç°æ–¹å¼å¯¹æ¯”
&lt;/h3&gt;&lt;h4 id="åŸºäºæ•°æ®åº“"&gt;&lt;strong&gt;åŸºäºæ•°æ®åº“&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;å®ç°åŸç†ï¼š
&lt;ul&gt;
&lt;li&gt;åˆ©ç”¨å”¯ä¸€çº¦æŸæˆ–ä¹è§‚é”ï¼ˆç‰ˆæœ¬å·ï¼‰å®ç°äº’æ–¥ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼šæ’å…¥å”¯ä¸€é”®&lt;code&gt;lock_name&lt;/code&gt;ï¼ŒæˆåŠŸå³è·é”&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¼˜ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;âœ… æ— éœ€é¢å¤–ä¸­é—´ä»¶ï¼Œé€‚åˆç®€å•åœºæ™¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;âŒ æ€§èƒ½å·®ï¼ˆé«˜å¹¶å‘ä¸‹æ•°æ®åº“å‹åŠ›å¤§ï¼‰ã€æ— è‡ªåŠ¨è¶…æ—¶æœºåˆ¶&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŸºäºredisä¸»æµæ–¹æ¡ˆ"&gt;&lt;strong&gt;åŸºäºRedisï¼ˆä¸»æµæ–¹æ¡ˆï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ ¸å¿ƒå‘½ä»¤ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;// åŸå­æ“ä½œï¼šSET key value NX EX 30 ï¼ˆä¸å­˜åœ¨åˆ™è®¾ç½®ï¼Œè¶…æ—¶30ç§’ï¼‰
String result = jedis.set(&amp;#34;lock:order_123&amp;#34;, uuid, &amp;#34;NX&amp;#34;, &amp;#34;EX&amp;#34;, 30);
if (&amp;#34;OK&amp;#34;.equals(result)) {
// è·é”æˆåŠŸ
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;é‡Šæ”¾é”éœ€Luaè„šæœ¬ä¿è¯åŸå­æ€§ï¼šæ ¡éªŒUUIDåŒ¹é…åå†åˆ é™¤&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿›é˜¶æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;Redissonï¼šè§£å†³ä¸å¯é‡å…¥ã€é”ç»­æœŸé—®é¢˜ï¼š
&lt;ul&gt;
&lt;li&gt;å¯é‡å…¥é”ï¼šHashç»“æ„è®°å½•çº¿ç¨‹IDå’Œé‡å…¥æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WatchDog&lt;/strong&gt;ï¼šåå°çº¿ç¨‹è‡ªåŠ¨ç»­æœŸï¼ˆé»˜è®¤æ¯10ç§’ç»­è‡³30ç§’ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RedLock&lt;/strong&gt;ï¼šå¤šRedisèŠ‚ç‚¹æŠ•ç¥¨ï¼Œè¿‡åŠæˆåŠŸæ‰è§†ä¸ºè·é”ï¼ˆé˜²ä¸»ä»è„‘è£‚ï¼‰&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŸºäºzookeeper"&gt;&lt;strong&gt;åŸºäºZooKeeper&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;å®ç°åŸç†ï¼š
&lt;ul&gt;
&lt;li&gt;åˆ›å»º&lt;strong&gt;ä¸´æ—¶é¡ºåºèŠ‚ç‚¹&lt;/strong&gt;ï¼ˆå¦‚&lt;code&gt;/lock/resource_000001&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä»…åºå·æœ€å°çš„èŠ‚ç‚¹è·é”ï¼›å…¶ä»–èŠ‚ç‚¹ç›‘å¬å‰åºèŠ‚ç‚¹åˆ é™¤äº‹ä»¶&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç‰¹æ€§ï¼š
&lt;ul&gt;
&lt;li&gt;âœ… å¼ºä¸€è‡´æ€§ã€è‡ªåŠ¨é‡Šæ”¾ï¼ˆèŠ‚ç‚¹æ–­å¼€åˆ™ä¸´æ—¶èŠ‚ç‚¹åˆ é™¤ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;âŒ æ€§èƒ½ä½äºRedisï¼Œéœ€ç»´æŠ¤ZKé›†ç¾¤&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŸºäºetcd"&gt;&lt;strong&gt;åŸºäºEtcd&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æœºåˆ¶ï¼š
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ç§Ÿçº¦ï¼ˆLeaseï¼‰åˆ›å»ºå¸¦TTLçš„é”®å€¼å¯¹ï¼Œåˆ©ç”¨CASæ“ä½œç«äº‰é”&lt;a class="link" href="@ref" &gt;2,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¼˜åŠ¿ï¼š
&lt;ul&gt;
&lt;li&gt;é«˜å¯ç”¨ã€å¼ºä¸€è‡´æ€§ï¼ˆåŸºäºRaftåè®®ï¼‰ï¼Œé€‚åˆKubernetesç­‰äº‘åŸç”Ÿåœºæ™¯&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-æ–¹æ¡ˆå¯¹æ¯”è¡¨"&gt;ğŸ“Š &lt;strong&gt;æ–¹æ¡ˆå¯¹æ¯”è¡¨&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç‰¹æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®åº“&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Redis&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ZooKeeper&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;Etcd&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆIOç“¶é¢ˆï¼‰&lt;/td&gt;
&lt;td&gt;â­â­â­â­ï¼ˆå†…å­˜çº§ï¼‰&lt;/td&gt;
&lt;td&gt;â­â­ï¼ˆå†™éœ€åŒæ­¥ï¼‰&lt;/td&gt;
&lt;td&gt;â­â­â­ï¼ˆé«˜æ•ˆï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯é æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸­ï¼ˆä¾èµ–DBé«˜å¯ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸­ï¼ˆéœ€RedLockï¼‰&lt;/td&gt;
&lt;td&gt;â­â­â­â­ï¼ˆå¼ºä¸€è‡´ï¼‰&lt;/td&gt;
&lt;td&gt;â­â­â­â­ï¼ˆå¼ºä¸€è‡´ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è‡ªåŠ¨é‡Šæ”¾&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨æ¸…ç†&lt;/td&gt;
&lt;td&gt;è¶…æ—¶è‡ªåŠ¨é‡Šæ”¾&lt;/td&gt;
&lt;td&gt;ä¼šè¯æ–­å¼€å³é‡Šæ”¾&lt;/td&gt;
&lt;td&gt;ç§Ÿçº¦åˆ°æœŸé‡Šæ”¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½é¢‘ç®€å•ä»»åŠ¡&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ç¼“å­˜åœºæ™¯&lt;/td&gt;
&lt;td&gt;åˆ†å¸ƒå¼åè°ƒ&lt;/td&gt;
&lt;td&gt;äº‘åŸç”Ÿ/å®¹å™¨åŒ–&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;âš ï¸ å…³é”®é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é”ç»­æœŸï¼ˆLock Renewalï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šä¸šåŠ¡æ‰§è¡Œè¶…æ—¶å¯¼è‡´é”æå‰é‡Šæ”¾ï¼Œå¼•å‘å¹¶å‘å†²çªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Redissonçš„WatchDog&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;æˆ–è‡ªå®šä¹‰å®ˆæŠ¤çº¿ç¨‹å®šæœŸç»­æœŸã€‚
&lt;ul&gt;
&lt;li&gt;è®¾ç½®åˆç†è¶…æ—¶æ—¶é—´ï¼ˆå»ºè®®ï¼šä¸šåŠ¡æœ€å¤§è€—æ—¶ * 2ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;è¯¯é‡Šæ”¾ï¼ˆNon-Owner Releaseï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šèŠ‚ç‚¹Açš„é”è¢«èŠ‚ç‚¹Bé‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šé”å€¼ç»‘å®šå”¯ä¸€IDï¼ˆå¦‚UUIDï¼‰ï¼Œé‡Šæ”¾æ—¶æ ¡éªŒæŒæœ‰è€…&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è„‘è£‚é—®é¢˜ï¼ˆRedisä¸»ä»åˆ‡æ¢ï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç°è±¡&lt;/strong&gt;ï¼šä¸»èŠ‚ç‚¹é”æœªåŒæ­¥åˆ°ä»èŠ‚ç‚¹å³å®•æœºï¼Œæ–°ä¸»èŠ‚ç‚¹å…è®¸å¤šå®¢æˆ·ç«¯è·é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šRedLockç®—æ³•ï¼ˆéœ€è‡³å°‘3ä¸ªç‹¬ç«‹Rediså®ä¾‹ï¼‰&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¬å¹³æ€§ä¸é¥¥é¥¿&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šé«˜å¹¶å‘ä¸‹æŸäº›èŠ‚ç‚¹é•¿æœŸæœªè·é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šZooKeeperé¡ºåºèŠ‚ç‚¹å®ç°æ’é˜Ÿæœºåˆ¶&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æœ€ä½³å®è·µ"&gt;ğŸ› ï¸ æœ€ä½³å®è·µ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é«˜å¹¶å‘ç§’æ€ â†’ Redis + Redisson&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é‡‘èçº§å¼ºä¸€è‡´ â†’ ZooKeeper/Etcd&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è½»é‡çº§ä»»åŠ¡ â†’ æ•°æ®åº“ä¹è§‚é”ï¼ˆç‰ˆæœ¬å·ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹ç¾è®¾è®¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç›‘æ§é”ç­‰å¾…æ—¶é—´ä¸æŒæœ‰æ—¶é•¿ï¼Œè¶…é˜ˆå€¼è§¦å‘å‘Šè­¦&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å…œåº•ç­–ç•¥ï¼šé”è·å–å¤±è´¥æ—¶å¿«é€Ÿå¤±è´¥ï¼ˆFast-Failï¼‰æˆ–é™çº§å¤„ç†&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é¿å…æ»¥ç”¨&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é”ç²’åº¦è¦ç»†ï¼ˆå¦‚æŒ‰è®¢å•IDåˆ†é”è€Œéå…¨å±€é”ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;éå¿…è¦ä¸åŠ é”ï¼Œä¼˜å…ˆè€ƒè™‘æ— é”è®¾è®¡ï¼ˆå¦‚CASæ“ä½œï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-5"&gt;ğŸ’ æ€»ç»“
&lt;/h3&gt;&lt;p&gt;åˆ†å¸ƒå¼é”æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„â€œåè°ƒå‘˜â€ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äº&lt;strong&gt;å¹³è¡¡æ€§èƒ½ä¸ä¸€è‡´æ€§&lt;/strong&gt;ã€‚é€‰å‹éœ€æƒè¡¡åœºæ™¯éœ€æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Redis&lt;/strong&gt;ï¼šé¦–é€‰é«˜å¹¶å‘åœºæ™¯ï¼Œé…åˆRedissonè§£å†³ç»­æœŸã€é‡å…¥é—®é¢˜&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ZooKeeper/Etcd&lt;/strong&gt;ï¼šå¼ºä¸€è‡´æ€§åœºæ™¯ï¼ˆå¦‚åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰&lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“&lt;/strong&gt;ï¼šä»…é€‚ç”¨äºä½é¢‘ç®€å•ä»»åŠ¡ï¼Œä¸æ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ€ç»ˆå»ºè®®ï¼šä¼˜å…ˆä½¿ç”¨æˆç†Ÿæ¡†æ¶ï¼ˆå¦‚Redissonã€Curatorï¼‰ï¼Œé¿å…é‡å¤é€ è½®å­ï¼›åŒæ—¶ç»“åˆç†”æ–­ã€ç›‘æ§ã€æ—¥å¿—è¿½è¸ªï¼Œæ„å»ºé²æ£’çš„åˆ†å¸ƒå¼é”ä½“ç³»&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="åˆ†å¸ƒå¼äº‹åŠ¡"&gt;åˆ†å¸ƒå¼äº‹åŠ¡
&lt;/h2&gt;&lt;p&gt;åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç¡®ä¿è·¨å¤šä¸ªç‹¬ç«‹èŠ‚ç‚¹æˆ–æœåŠ¡çš„æ“ä½œå…·æœ‰åŸå­æ€§ï¼ˆå…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ï¼‰çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé€‚ç”¨äºå¾®æœåŠ¡ã€è·¨æ•°æ®åº“ç­‰åœºæ™¯ã€‚ä»¥ä¸‹ä»ç†è®ºåŸºç¡€ã€è§£å†³æ–¹æ¡ˆåˆ°å®è·µæ¡†æ¶å±•å¼€è¯¦è§£ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒæ¦‚å¿µä¸æŒ‘æˆ˜"&gt;âš™ï¸ &lt;strong&gt;æ ¸å¿ƒæ¦‚å¿µä¸æŒ‘æˆ˜&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®šä¹‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡å‚ä¸è€…ï¼ˆå¦‚æ•°æ®åº“ã€æœåŠ¡ï¼‰ã€èµ„æºæœåŠ¡å™¨ã€äº‹åŠ¡ç®¡ç†å™¨ä½äºä¸åŒç½‘ç»œèŠ‚ç‚¹ï¼Œéœ€ååŒä¿è¯æ“ä½œåŸå­æ€§&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;ï¼šç”µå•†ä¸‹å•ï¼ˆåˆ›å»ºè®¢å•ã€æ‰£åº“å­˜ã€æ”¯ä»˜ï¼‰æ¶‰åŠå¤šä¸ªæœåŠ¡ï¼Œéœ€ä¿è¯ä¸‰è€…çŠ¶æ€ä¸€è‡´&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæŒ‘æˆ˜&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œä¸å¯é &lt;/strong&gt;ï¼šèŠ‚ç‚¹é—´é€šä¿¡å¯èƒ½è¶…æ—¶ã€ä¸¢åŒ…ï¼Œå¯¼è‡´éƒ¨åˆ†æ“ä½œå¤±è´¥&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€è‡´æ€§&lt;/strong&gt;ï¼šè·¨èŠ‚ç‚¹æ•°æ®éœ€åœ¨æ•…éšœæ—¶ä¿æŒåŒæ­¥ï¼Œé¿å…éƒ¨åˆ†æäº¤&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¸å¯ç”¨æ€§æƒè¡¡&lt;/strong&gt;ï¼šå¼ºä¸€è‡´æ€§å¯èƒ½ç‰ºç‰²ç³»ç»Ÿå¯ç”¨æ€§ï¼ˆCAPç†è®ºï¼‰&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ç†è®ºåŸºç¡€capä¸base"&gt;ğŸ“œ &lt;strong&gt;ç†è®ºåŸºç¡€ï¼šCAPä¸BASE&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CAPå®šç†&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‰é€‰äºŒå›°å¢ƒï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§ (Consistency)&lt;/strong&gt;ï¼šæ‰€æœ‰èŠ‚ç‚¹æ•°æ®å®æ—¶ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨æ€§ (Availability)&lt;/strong&gt;ï¼šè¯·æ±‚å¿…é¡»è·å¾—å“åº”ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºå®¹é”™æ€§ (Partition Tolerance)&lt;/strong&gt;ï¼šèŠ‚ç‚¹æ•…éšœæ—¶ç³»ç»Ÿä»å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“è®º&lt;/strong&gt;ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿå¿…é¡»ä¼˜å…ˆæ»¡è¶³ &lt;strong&gt;åˆ†åŒºå®¹é”™æ€§ (P)&lt;/strong&gt;ï¼Œåœ¨ &lt;strong&gt;ä¸€è‡´æ€§ (C)&lt;/strong&gt; ä¸ &lt;strong&gt;å¯ç”¨æ€§ (A)&lt;/strong&gt; ä¹‹é—´æƒè¡¡&lt;a class="link" href="@ref" &gt;3,8,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼šElasticsearch é€‰æ‹© &lt;strong&gt;CP&lt;/strong&gt;ï¼ˆå¼ºä¸€è‡´ï¼Œä½å¯ç”¨ï¼‰ï¼›APç³»ç»Ÿï¼ˆå¦‚Cassandraï¼‰ä¼˜å…ˆå¯ç”¨æ€§&lt;a class="link" href="@ref" &gt;10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;BASEç†è®º&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸºæœ¬å¯ç”¨ (Basically Available)&lt;/strong&gt;ï¼šæ•…éšœæ—¶å…è®¸é™çº§ï¼ˆå¦‚å“åº”å»¶è¿Ÿï¼‰&lt;a class="link" href="@ref" &gt;10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¯çŠ¶æ€ (Soft State)&lt;/strong&gt;ï¼šå…è®¸ä¸­é—´æ€ï¼ˆå¦‚â€œæ”¯ä»˜ä¸­â€ï¼‰&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§ (Eventually Consistent)&lt;/strong&gt;ï¼šæ•°æ®å»¶è¿ŸåŒæ­¥åä¸€è‡´&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé«˜å¹¶å‘ç³»ç»Ÿï¼ˆå¦‚ç”µå•†ï¼‰ï¼Œå®¹å¿çŸ­æš‚ä¸ä¸€è‡´&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸»æµè§£å†³æ–¹æ¡ˆ"&gt;ğŸ› ï¸ &lt;strong&gt;ä¸»æµè§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ä¸¤é˜¶æ®µæäº¤-2pc"&gt;&lt;strong&gt;ä¸¤é˜¶æ®µæäº¤ (2PC)&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æµç¨‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡é˜¶æ®µ&lt;/strong&gt;ï¼šåè°ƒè€…è¯¢é—®å‚ä¸è€…èƒ½å¦æäº¤ï¼Œå‚ä¸è€…é¢„æ‰§è¡Œå¹¶é”å®šèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤é˜¶æ®µ&lt;/strong&gt;ï¼šè‹¥å…¨éƒ¨åŒæ„ï¼Œåè°ƒè€…é€šçŸ¥æäº¤ï¼›å¦åˆ™å›æ»š&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå¼ºä¸€è‡´æ€§ï¼Œå®ç°ç®€å•ï¼ˆå¦‚MySQL XAåè®®ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥é˜»å¡&lt;/strong&gt;ï¼šå‚ä¸è€…ç­‰å¾…æŒ‡ä»¤æ—¶èµ„æºè¢«é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å•ç‚¹æ•…éšœ&lt;/strong&gt;ï¼šåè°ƒè€…å®•æœºå¯¼è‡´äº‹åŠ¡æ‚¬åœ&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé“¶è¡Œè½¬è´¦ç­‰å¼ºä¸€è‡´éœ€æ±‚&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="tcc-try-confirm-cancel"&gt;&lt;strong&gt;TCC (Try-Confirm-Cancel)&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ä¸‰é˜¶æ®µï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Try&lt;/strong&gt;ï¼šé¢„ç•™èµ„æºï¼ˆå¦‚å†»ç»“åº“å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Confirm&lt;/strong&gt;ï¼šæäº¤æ“ä½œï¼ˆå¦‚æ‰£å‡åº“å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cancel&lt;/strong&gt;ï¼šå¤±è´¥æ—¶å›æ»šï¼ˆå¦‚è§£å†»åº“å­˜ï¼‰&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ— é”è®¾è®¡ã€é«˜æ€§èƒ½ï¼Œæ”¯æŒé«˜å¹¶å‘ï¼ˆå¦‚ç§’æ€ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šä¸šåŠ¡ä¾µå…¥æ€§å¼ºï¼Œéœ€æ‰‹åŠ¨å®ç°è¡¥å¿é€»è¾‘&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="sagaæ¨¡å¼"&gt;&lt;strong&gt;Sagaæ¨¡å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼šé•¿äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªæœ¬åœ°äº‹åŠ¡ï¼Œå¤±è´¥æ—¶è§¦å‘é€†å‘è¡¥å¿æ“ä½œã€‚
&lt;pre tabindex="0"&gt;&lt;code&gt;ç¤ºä¾‹ï¼šè®¢å•æµç¨‹ â†’ æ”¯ä»˜æˆåŠŸ â†’ ç‰©æµå¤±è´¥ â†’ è§¦å‘é€€æ¬¾è¡¥å¿[7](@ref)ã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå¼‚æ­¥æ‰§è¡Œï¼Œé€‚åˆè·¨æœåŠ¡é•¿æµç¨‹ï¼ˆå¦‚æ—…è¡Œé¢„è®¢ï¼‰&lt;a class="link" href="@ref" &gt;7,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šéœ€å¤„ç†â€œæ‚¬æŒ‚äº‹åŠ¡â€ï¼ˆè¡¥å¿ååŸæ“ä½œåˆ°è¾¾ï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§"&gt;&lt;strong&gt;åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æµç¨‹ï¼š
&lt;ol&gt;
&lt;li&gt;æœåŠ¡Aå®Œæˆæœ¬åœ°äº‹åŠ¡ï¼Œå‘é€æ¶ˆæ¯è‡³MQï¼ˆå¦‚RocketMQäº‹åŠ¡æ¶ˆæ¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;MQç¡®ä¿æ¶ˆæ¯æŠ•é€’ï¼ŒæœåŠ¡Bæ¶ˆè´¹åæ‰§è¡Œæ“ä½œ&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šè§£è€¦æœåŠ¡ï¼Œé«˜ååï¼ˆå¦‚å¼‚æ­¥é€šçŸ¥ã€æ—¥å¿—åŒæ­¥ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šæ¶ˆè´¹è€…éœ€å¹‚ç­‰è®¾è®¡ï¼Œé˜²é‡å¤æ¶ˆè´¹&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æœ¬åœ°æ¶ˆæ¯è¡¨"&gt;&lt;strong&gt;æœ¬åœ°æ¶ˆæ¯è¡¨&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;å®ç°ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸šåŠ¡DBä¸­å»ºæ¶ˆæ¯è¡¨ï¼Œæœ¬åœ°äº‹åŠ¡ä¸æ¶ˆæ¯å†™å…¥åŸå­æäº¤ã€‚&lt;/li&gt;
&lt;li&gt;å®šæ—¶ä»»åŠ¡æ‰«æå¹¶å‘é€æœªå¤„ç†æ¶ˆæ¯&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæ— MQæ”¯æŒçš„è·¨åº“åŒæ­¥&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹"&gt;ğŸ“Š &lt;strong&gt;æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¾µå…¥æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2PC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;é‡‘èè½¬è´¦ã€XAæ•°æ®åº“&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;TCC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ç§’æ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Saga&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;é•¿æµç¨‹ï¼ˆç‰©æµã€è®¢å•ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;å¼‚æ­¥è§£è€¦ï¼ˆæ”¯ä»˜å›è°ƒï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬åœ°æ¶ˆæ¯è¡¨&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;æ— MQçš„è·¨åº“åŒæ­¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä¸šçº§æ¡†æ¶seata"&gt;ğŸ§© &lt;strong&gt;å·¥ä¸šçº§æ¡†æ¶ï¼šSeata&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Seata æ˜¯é˜¿é‡Œå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šæ¨¡å¼&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ATæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åŸç†ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸€é˜¶æ®µæäº¤æœ¬åœ°äº‹åŠ¡ï¼Œç”Ÿæˆæ•°æ®å¿«ç…§ï¼ˆundo_logï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;äºŒé˜¶æ®µå¤±è´¥æ—¶é€šè¿‡å¿«ç…§å›æ»š&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ— ä»£ç ä¾µå…¥ï¼Œæ€§èƒ½ä¼˜äºXAã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨&lt;/strong&gt;ï¼šå¸¸è§„ä¸šåŠ¡ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;TCCæ¨¡å¼&lt;/strong&gt;ï¼šéœ€æ‰‹åŠ¨å®ç° Try/Confirm/Cancel æ¥å£ï¼Œé€‚ç”¨é«˜æ€§èƒ½åœºæ™¯ï¼ˆå¦‚åº“å­˜æ‰£å‡ï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sagaæ¨¡å¼&lt;/strong&gt;ï¼šå†…ç½®çŠ¶æ€æœºç¼–æ’ï¼Œç®€åŒ–é•¿äº‹åŠ¡è¡¥å¿é€»è¾‘&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;XAæ¨¡å¼&lt;/strong&gt;ï¼šå¼ºä¸€è‡´ï¼Œä¾èµ–æ•°æ®åº“XAåè®®ï¼ˆå¦‚é“¶è¡Œç³»ç»Ÿï¼‰&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="seataæ¶æ„æ ¸å¿ƒè§’è‰²"&gt;&lt;strong&gt;Seataæ¶æ„æ ¸å¿ƒè§’è‰²&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TC (Transaction Coordinator)&lt;/strong&gt;ï¼šäº‹åŠ¡åè°ƒè€…ï¼ˆç‹¬ç«‹éƒ¨ç½²ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TM (Transaction Manager)&lt;/strong&gt;ï¼šå®šä¹‰å…¨å±€äº‹åŠ¡è¾¹ç•Œï¼ˆ@GlobalTransactionalï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RM (Resource Manager)&lt;/strong&gt;ï¼šç®¡ç†åˆ†æ”¯äº‹åŠ¡èµ„æº&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å®è·µå»ºè®®ä¸è¶‹åŠ¿"&gt;âš¡ &lt;strong&gt;å®è·µå»ºè®®ä¸è¶‹åŠ¿&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é€‰å‹ç­–ç•¥&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¸€è‡´&lt;/strong&gt;ï¼š2PCã€TCCã€XAï¼ˆé‡‘èåœºæ™¯ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆä¸€è‡´&lt;/strong&gt;ï¼šæ¶ˆæ¯é˜Ÿåˆ—ã€Sagaï¼ˆç”µå•†ã€ç‰©æµï¼‰&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜åå&lt;/strong&gt;ï¼šTCC &amp;gt; æ¶ˆæ¯é˜Ÿåˆ— &amp;gt; Saga&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®è®¾è®¡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹‚ç­‰æ€§&lt;/strong&gt;ï¼šæ¶ˆè´¹è€…éœ€æ”¯æŒé‡å¤æ¶ˆæ¯å¤„ç†ï¼ˆå¦‚å”¯ä¸€ID+Redisï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™çº§ä¸ç›‘æ§&lt;/strong&gt;ï¼šäº‹åŠ¡å¤±è´¥ç‡ç›‘æ§ + æ­»ä¿¡é˜Ÿåˆ—å…œåº•&lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶‹åŠ¿&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Serverlessäº‹åŠ¡&lt;/strong&gt;ï¼šäº‘åŸç”Ÿä¸‹æ— æœåŠ¡åŒ–äº‹åŠ¡ç®¡ç†&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆæ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¦‚ Seata AT + TCC åº”å¯¹å¤æ‚åœºæ™¯&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-6"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;åˆ†å¸ƒå¼äº‹åŠ¡æœ¬è´¨æ˜¯ &lt;strong&gt;ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€æ€§èƒ½çš„ä¸‰è§’æƒè¡¡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¸€è‡´åœºæ™¯&lt;/strong&gt;ï¼šä¼˜å…ˆ 2PC/TCCï¼Œæ¥å—æ€§èƒ½æŸè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘åœºæ™¯&lt;/strong&gt;ï¼šTCC/æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä»¥æœ€ç»ˆä¸€è‡´æ¢ååã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿æµç¨‹ä¸šåŠ¡&lt;/strong&gt;ï¼šSaga æ¨¡å¼ + è¡¥å¿æœºåˆ¶ã€‚
å·¥ä¸šæ¡†æ¶ï¼ˆå¦‚ Seataï¼‰é€šè¿‡å¤šæ¨¡å¼æ”¯æŒé™ä½å®ç°æˆæœ¬ï¼Œä½†éœ€ç»“åˆä¸šåŠ¡ç‰¹ç‚¹è®¾è®¡å®¹é”™ä¸ç›‘æ§æœºåˆ¶ã€‚æœªæ¥éšç€äº‘åŸç”Ÿå‘å±•ï¼Œâ€‹&lt;strong&gt;æ— ä¾µå…¥äº‹åŠ¡ç®¡ç†&lt;/strong&gt;å’Œ&lt;strong&gt;è‡ªåŠ¨åŒ–ç¼–æ’&lt;/strong&gt;å°†æˆä¸ºé‡ç‚¹æ–¹å‘&lt;a class="link" href="@ref" &gt;6,9,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="2pc"&gt;2PC
&lt;/h2&gt;&lt;h3 id="-2pcä¸¤é˜¶æ®µæäº¤åè®®è¯¦è§£"&gt;ğŸ” &lt;strong&gt;2PCï¼ˆä¸¤é˜¶æ®µæäº¤åè®®ï¼‰è¯¦è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;2PCï¼ˆTwo-Phase Commitï¼‰æ˜¯ä¸€ç§ç»å…¸çš„åˆ†å¸ƒå¼äº‹åŠ¡åè®®ï¼Œç”¨äºç¡®ä¿è·¨å¤šä¸ªèŠ‚ç‚¹çš„æ“ä½œå…·å¤‡&lt;strong&gt;åŸå­æ€§&lt;/strong&gt;ï¼ˆè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å¤±è´¥ï¼‰ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡åè°ƒè€…ï¼ˆCoordinatorï¼‰ç»Ÿä¸€è°ƒåº¦å‚ä¸è€…ï¼ˆParticipantsï¼‰ï¼Œåˆ†ä¸¤ä¸ªé˜¶æ®µå®Œæˆäº‹åŠ¡æäº¤ã€‚ä»¥ä¸‹ä»åŸç†ã€æµç¨‹ã€é—®é¢˜åˆ°ä¼˜åŒ–å±•å¼€åˆ†æã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id="-æ ¸å¿ƒåŸç†ä¸è®¾è®¡ç›®æ ‡"&gt;âš™ï¸ &lt;strong&gt;æ ¸å¿ƒåŸç†ä¸è®¾è®¡ç›®æ ‡&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŸå­æ€§ä¿è¯&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†å¸ƒå¼äº‹åŠ¡æ¶‰åŠå¤šä¸ªç‹¬ç«‹èŠ‚ç‚¹ï¼ˆå¦‚æ•°æ®åº“ã€å¾®æœåŠ¡ï¼‰ï¼Œ2PCé€šè¿‡&lt;strong&gt;åè°ƒè€…&lt;/strong&gt;ç»Ÿä¸€å†³ç­–ï¼Œç¡®ä¿æ‰€æœ‰å‚ä¸è€…è¦ä¹ˆå…¨éƒ¨æäº¤äº‹åŠ¡ï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œé¿å…éƒ¨åˆ†æˆåŠŸå¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´&lt;a class="link" href="@ref" &gt;1,4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šè·¨æ•°æ®åº“æ›´æ–°ï¼ˆå¦‚è®¢å•åˆ›å»º+åº“å­˜æ‰£å‡ï¼‰ã€å¾®æœåŠ¡æ¶æ„ä¸­çš„è·¨æœåŠ¡äº‹åŠ¡&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§’è‰²åˆ†å·¥&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åè°ƒè€…&lt;/strong&gt;ï¼šäº‹åŠ¡å‘èµ·è€…ï¼Œå†³ç­–æäº¤æˆ–å›æ»šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚ä¸è€…&lt;/strong&gt;ï¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œåé¦ˆæ‰§è¡ŒçŠ¶æ€ï¼ˆå¦‚æ•°æ®åº“ã€å¾®æœåŠ¡ï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h4 id="-åè®®æµç¨‹ä¸¤é˜¶æ®µè¯¦è§£"&gt;ğŸ”„ &lt;strong&gt;åè®®æµç¨‹ï¼šä¸¤é˜¶æ®µè¯¦è§£&lt;/strong&gt;
&lt;/h4&gt;&lt;h5 id="é˜¶æ®µ1å‡†å¤‡é˜¶æ®µprepare-phase"&gt;&lt;strong&gt;é˜¶æ®µ1ï¼šå‡†å¤‡é˜¶æ®µï¼ˆPrepare Phaseï¼‰&lt;/strong&gt;
&lt;/h5&gt;&lt;ol&gt;
&lt;li&gt;åè°ƒè€…è¡Œä¸º&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å‘æ‰€æœ‰å‚ä¸è€…å‘é€&lt;code&gt;Prepare&lt;/code&gt;è¯·æ±‚ï¼Œè¯¢é—®æ˜¯å¦å¯æäº¤äº‹åŠ¡&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;å‚ä¸è€…è¡Œä¸º&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆ&lt;strong&gt;ä¸æäº¤&lt;/strong&gt;ï¼‰ï¼Œå†™&lt;code&gt;Undo/Redo&lt;/code&gt;æ—¥å¿—ï¼ˆç”¨äºå›æ»šæˆ–é‡è¯•ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;è¿”å›æŠ•ç¥¨ç»“æœï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒæ„ï¼ˆYesï¼‰&lt;/strong&gt;ï¼šæœ¬åœ°äº‹åŠ¡é¢„æ‰§è¡ŒæˆåŠŸã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‹’ç»ï¼ˆNoï¼‰&lt;/strong&gt;ï¼šæœ¬åœ°äº‹åŠ¡å¤±è´¥ï¼ˆå¦‚èµ„æºå†²çªï¼‰&lt;a class="link" href="@ref" &gt;1,6,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;âœ… &lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼šæ­¤é˜¶æ®µå‚ä¸è€…é”å®šèµ„æºï¼ˆå¦‚æ•°æ®åº“è¡Œé”ï¼‰ï¼Œä½†æœªæŒä¹…åŒ–æ•°æ®ï¼Œå¤„äºé˜»å¡çŠ¶æ€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id="é˜¶æ®µ2æäº¤å›æ»šé˜¶æ®µcommitrollback-phase"&gt;&lt;strong&gt;é˜¶æ®µ2ï¼šæäº¤/å›æ»šé˜¶æ®µï¼ˆCommit/Rollback Phaseï¼‰&lt;/strong&gt;
&lt;/h5&gt;&lt;ol&gt;
&lt;li&gt;åè°ƒè€…å†³ç­–&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¨éƒ¨åŒæ„&lt;/strong&gt; â†’ å‘é€&lt;code&gt;Commit&lt;/code&gt;å‘½ä»¤ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»»ä¸€æ‹’ç»æˆ–è¶…æ—¶&lt;/strong&gt; â†’ å‘é€&lt;code&gt;Rollback&lt;/code&gt;å‘½ä»¤&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;å‚ä¸è€…æ‰§è¡Œ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ”¶åˆ°&lt;code&gt;Commit&lt;/code&gt;ï¼šæäº¤æœ¬åœ°äº‹åŠ¡ï¼Œé‡Šæ”¾é”ï¼Œè¿”å›&lt;code&gt;ACK&lt;/code&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;æ”¶åˆ°&lt;code&gt;Rollback&lt;/code&gt;ï¼šæ ¹æ®&lt;code&gt;Undo&lt;/code&gt;æ—¥å¿—å›æ»šï¼Œé‡Šæ”¾é”ï¼Œè¿”å›&lt;code&gt;ACK&lt;/code&gt;&lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;é£é™©ç‚¹&lt;/strong&gt;ï¼šè‹¥åè°ƒè€…å‘é€&lt;code&gt;Commit&lt;/code&gt;åå®•æœºï¼Œéƒ¨åˆ†å‚ä¸è€…æäº¤æˆåŠŸï¼Œéƒ¨åˆ†æœªæ”¶åˆ°æŒ‡ä»¤ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ï¼ˆè„‘è£‚é—®é¢˜ï¼‰&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h4 id="-æ ¸å¿ƒé—®é¢˜ä¸ç¼ºé™·"&gt;âš ï¸ &lt;strong&gt;æ ¸å¿ƒé—®é¢˜ä¸ç¼ºé™·&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åŒæ­¥é˜»å¡ï¼ˆæ€§èƒ½ç“¶é¢ˆï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å‚ä¸è€…ç­‰å¾…åè°ƒè€…æŒ‡ä»¤æ—¶&lt;strong&gt;é•¿æœŸå ç”¨é”èµ„æº&lt;/strong&gt;ï¼Œé«˜å¹¶å‘ä¸‹æ˜“å¼•å‘æ­»é”å’Œååé‡ä¸‹é™&lt;a class="link" href="@ref" &gt;1,6,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å•ç‚¹æ•…éšœï¼ˆåè°ƒè€…å®•æœºï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åè°ƒè€…å®•æœºåï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡é˜¶æ®µ&lt;/strong&gt;ï¼šå‚ä¸è€…é˜»å¡ï¼Œäº‹åŠ¡æŒ‚èµ·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æäº¤é˜¶æ®µ&lt;/strong&gt;ï¼šéƒ¨åˆ†å‚ä¸è€…æäº¤ï¼Œéƒ¨åˆ†æœªæ”¶åˆ°æŒ‡ä»¤ï¼Œæ•°æ®ä¸ä¸€è‡´&lt;a class="link" href="@ref" &gt;2,4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸ä¸€è‡´é£é™©&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œåˆ†åŒº&lt;/strong&gt;ï¼šéƒ¨åˆ†å‚ä¸è€…æ”¶ä¸åˆ°æŒ‡ä»¤ï¼Œå¯èƒ½è‡ªè¡Œæäº¤æˆ–å›æ»š&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æç«¯åœºæ™¯&lt;/strong&gt;ï¼šåè°ƒè€…ä¸å‚ä¸è€…åœ¨æäº¤é˜¶æ®µåŒæ—¶å®•æœºï¼Œäº‹åŠ¡çŠ¶æ€ä¸¢å¤±ï¼ˆæ— æœ€ç»ˆå†³ç­–ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— å®¹é”™æœºåˆ¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å‚ä¸è€…æ•…éšœåï¼Œåè°ƒè€…åªèƒ½ç­‰å¾…è¶…æ—¶ï¼Œæ— æ³•ä¸»åŠ¨æ¢å¤&lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="-2pc-ä¼˜ç¼ºç‚¹å¯¹æ¯”"&gt;ğŸ“Š &lt;strong&gt;2PC ä¼˜ç¼ºç‚¹å¯¹æ¯”&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… å¼ºä¸€è‡´ï¼ˆåŸå­æ€§ï¼‰&lt;/td&gt;
&lt;td&gt;âŒ ç½‘ç»œåˆ†åŒºæ—¶å¯èƒ½è„‘è£‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;âŒ é«˜å»¶è¿Ÿï¼ˆä¸¤è½®é€šä¿¡+é˜»å¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç”¨æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;âŒ å•ç‚¹æ•…éšœï¼ˆåè°ƒè€…å®•æœºé˜»å¡å…¨å±€ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… é€»è¾‘ç®€å•ï¼Œæ˜“äºç†è§£&lt;/td&gt;
&lt;td&gt;âŒ å®¹é”™æœºåˆ¶ç¼ºå¤±ï¼Œæ¢å¤å¤æ‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h4 id="-ä¼˜åŒ–ä¸æ”¹è¿›æ–¹æ¡ˆ"&gt;ğŸ› ï¸ &lt;strong&gt;ä¼˜åŒ–ä¸æ”¹è¿›æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³å•ç‚¹æ•…éšœ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åè°ƒè€…å†—ä½™&lt;/strong&gt;ï¼šä¸»å¤‡åè°ƒè€…+æ—¥å¿—åŒæ­¥ï¼Œä¸»èŠ‚ç‚¹å®•æœºåå¤‡èŠ‚ç‚¹æ¥ç®¡&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶…æ—¶æœºåˆ¶&lt;/strong&gt;ï¼šå‚ä¸è€…ç­‰å¾…è¶…æ—¶åï¼Œä¸»åŠ¨æŸ¥è¯¢åè°ƒè€…çŠ¶æ€æˆ–å‘èµ·é€‰ä¸¾&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‡å°‘é˜»å¡ä¸æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ­¥æäº¤&lt;/strong&gt;ï¼šå‚ä¸è€…æäº¤åå¼‚æ­¥é‡Šæ”¾èµ„æºï¼Œå‡å°‘é”å ç”¨æ—¶é—´&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰¹é‡å¤„ç†&lt;/strong&gt;ï¼šåˆå¹¶å¤šä¸ªäº‹åŠ¡çš„&lt;code&gt;Prepare&lt;/code&gt;è¯·æ±‚ï¼Œå‡å°‘ç½‘ç»œå¾€è¿”&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºå®¹é”™æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰é˜¶æ®µæäº¤ï¼ˆ3PCï¼‰&lt;/strong&gt;ï¼šå¢åŠ &lt;code&gt;Pre-Commit&lt;/code&gt;é˜¶æ®µï¼Œå‚ä¸è€…è¶…æ—¶åé»˜è®¤æäº¤ï¼ˆé™ä½é˜»å¡é£é™©ï¼Œä½†å¯èƒ½åŠ å‰§ä¸ä¸€è‡´ï¼‰&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“åˆæ¶ˆæ¯é˜Ÿåˆ—&lt;/strong&gt;ï¼šç”¨MQè®°å½•äº‹åŠ¡çŠ¶æ€ï¼Œæ•…éšœåé€šè¿‡è¡¥å¿æœºåˆ¶ä¿®å¤ï¼ˆå¦‚Sagaæ¨¡å¼ï¼‰&lt;a class="link" href="@ref" &gt;1,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h4 id="-å®é™…åº”ç”¨åœºæ™¯"&gt;ğŸ’» &lt;strong&gt;å®é™…åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“é›†ç¾¤&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;MySQLé›†ç¾¤ä¸­è·¨èŠ‚ç‚¹æ›´æ–°ï¼šé€šè¿‡XAæ¥å£å®ç°2PCï¼ˆå¦‚&lt;code&gt;XA START&lt;/code&gt;/&lt;code&gt;XA END&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼šé“¶è¡Œè½¬è´¦ï¼ˆè´¦æˆ·Aæ‰£æ¬¾ â†’ è´¦æˆ·BåŠ æ¬¾ï¼‰éœ€å¼ºä¸€è‡´&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾®æœåŠ¡æ¶æ„&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç”µå•†ä¸‹å•æµç¨‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åè°ƒè€…&lt;/strong&gt;ï¼šè®¢å•æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‚ä¸è€…&lt;/strong&gt;ï¼šåº“å­˜æœåŠ¡ï¼ˆæ‰£åº“å­˜ï¼‰ã€æ”¯ä»˜æœåŠ¡ï¼ˆæ‰£æ¬¾ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®ç°ï¼šé€šè¿‡Seataç­‰æ¡†æ¶å°è£…2PCé€»è¾‘&lt;a class="link" href="@ref" &gt;5,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆæ–¹æ¡ˆ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2PC + TCC&lt;/strong&gt;ï¼šå¼ºä¸€è‡´æ“ä½œç”¨2PCï¼Œé«˜å¹¶å‘æ“ä½œç”¨TCCï¼ˆå¦‚åº“å­˜å†»ç»“ï¼‰&lt;a class="link" href="@ref" &gt;1,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h4 id="-æ€»ç»“-7"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼š2PCé€šè¿‡ä¸¤é˜¶æ®µæäº¤å®ç°äº†åˆ†å¸ƒå¼äº‹åŠ¡çš„åŸå­æ€§ï¼Œæ˜¯é‡‘èã€è®¢å•ç­‰å¼ºä¸€è‡´åœºæ™¯çš„åŸºçŸ³&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨è¾¹ç•Œ&lt;/strong&gt;ï¼šé€‚ç”¨äºèŠ‚ç‚¹å°‘ã€ç½‘ç»œç¨³å®šã€å¯¹ä¸€è‡´æ€§è¦æ±‚é«˜äºå¯ç”¨æ€§çš„åœºæ™¯&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¼”è¿›æ–¹å‘&lt;/strong&gt;ï¼šå·¥ä¸šç•Œé€æ¸è½¬å‘&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ&lt;/strong&gt;ï¼ˆå¦‚Sagaã€æ¶ˆæ¯é˜Ÿåˆ—ï¼‰æˆ–&lt;strong&gt;æ··åˆäº‹åŠ¡æ¨¡å‹&lt;/strong&gt;ï¼ˆå¦‚2PC+TCCï¼‰ï¼Œä»¥å¹³è¡¡æ€§èƒ½ä¸ä¸€è‡´æ€§&lt;a class="link" href="@ref" &gt;1,7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ¶æ„å»ºè®®&lt;/strong&gt;ï¼šè‹¥éœ€å¼ºä¸€è‡´ï¼Œä¼˜å…ˆä½¿ç”¨æˆç†Ÿæ¡†æ¶ï¼ˆå¦‚Seataçš„XAæ¨¡å¼ï¼‰ï¼›è‹¥å®¹å¿æœ€ç»ˆä¸€è‡´ï¼Œé€‰ç”¨Sagaæˆ–å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—é™ä½å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="tcc"&gt;TCC
&lt;/h2&gt;&lt;p&gt;TCCï¼ˆTry-Confirm-Cancelï¼‰æ˜¯ä¸€ç§åŸºäº&lt;strong&gt;ä¸šåŠ¡è¡¥å¿&lt;/strong&gt;çš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å°†äº‹åŠ¡æ‹†åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼ˆTryã€Confirmã€Cancelï¼‰å®ç°æœ€ç»ˆä¸€è‡´æ€§ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŸç†ã€å®ç°ç»†èŠ‚åˆ°å·¥ä¸šå®è·µå±•å¼€è¯¦è§£ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸è®¾è®¡æ€æƒ³"&gt;âš™ï¸ &lt;strong&gt;æ ¸å¿ƒåŸç†ä¸è®¾è®¡æ€æƒ³&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸‰é˜¶æ®µæ‹†åˆ†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tryï¼ˆå°è¯•ï¼‰&lt;/strong&gt;ï¼šä¸šåŠ¡æ£€æŸ¥ä¸èµ„æºé¢„ç•™ï¼ˆå¦‚æ£€æŸ¥åº“å­˜ã€å†»ç»“èµ„é‡‘ï¼‰ï¼Œ&lt;strong&gt;ä¸æ‰§è¡ŒçœŸå®æ“ä½œ&lt;/strong&gt;ï¼Œä»…é”å®šèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Confirmï¼ˆç¡®è®¤ï¼‰&lt;/strong&gt;ï¼šåŸºäºTryé¢„ç•™çš„èµ„æºæ‰§è¡Œä¸šåŠ¡æäº¤ï¼ˆå¦‚æ‰£å‡åº“å­˜ã€å®é™…æ‰£æ¬¾ï¼‰ï¼Œéœ€&lt;strong&gt;å¹‚ç­‰è®¾è®¡&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cancelï¼ˆå–æ¶ˆï¼‰&lt;/strong&gt;ï¼šé‡Šæ”¾Tryé˜¶æ®µé¢„ç•™çš„èµ„æºï¼ˆå¦‚è§£å†»èµ„é‡‘ã€é‡Šæ”¾åº“å­˜ï¼‰ï¼Œéœ€&lt;strong&gt;å¹‚ç­‰ä¸”å¯ç©ºå›æ»š&lt;/strong&gt;&lt;a class="link" href="@ref" &gt;3,5,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸2PCçš„æœ¬è´¨åŒºåˆ«&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºé”å®šç²’åº¦&lt;/strong&gt;ï¼š2PCåœ¨æ•°æ®åº“å±‚é¢é”èµ„æºï¼ˆå¦‚è¡Œé”ï¼‰ï¼ŒTCCåœ¨ä¸šåŠ¡å±‚é¢é€šè¿‡é¢„ç•™å­—æ®µï¼ˆå¦‚&lt;code&gt;å†»ç»“åº“å­˜&lt;/code&gt;ï¼‰æ§åˆ¶ï¼Œå‡å°‘é”å†²çª&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŠ¿&lt;/strong&gt;ï¼šTryé˜¶æ®µå¿«é€Ÿé¢„ç•™èµ„æºï¼ŒConfirm/Cancelå¼‚æ­¥æäº¤ï¼Œé¿å…é•¿äº‹åŠ¡é˜»å¡&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§æ¨¡å‹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼šConfirm/Cancelé˜¶æ®µå¯èƒ½çŸ­æš‚ä¸ä¸€è‡´ï¼ˆå¦‚éƒ¨åˆ†ConfirmæˆåŠŸï¼‰ï¼Œä½†æœ€ç»ˆé€šè¿‡é‡è¯•æˆ–è¡¥å¿è¾¾æˆä¸€è‡´&lt;a class="link" href="@ref" &gt;5,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ-1"&gt;âš ï¸ &lt;strong&gt;å…³é”®é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;TCCéœ€è§£å†³ä¸‰ç±»å¼‚å¸¸åœºæ™¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç©ºå›æ»šï¼ˆNull Rollbackï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šæœªæ‰§è¡ŒTryå´è§¦å‘Cancelï¼ˆå¦‚Tryè°ƒç”¨å‰æœåŠ¡å®•æœºï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼šè®°å½•åˆ†æ”¯äº‹åŠ¡çŠ¶æ€è¡¨ï¼ŒCancelå‰æ£€æŸ¥Tryæ˜¯å¦æ‰§è¡Œã€‚è‹¥æœªæ‰§è¡Œï¼Œç›´æ¥è¿”å›æˆåŠŸ&lt;a class="link" href="@ref" &gt;3,5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹‚ç­‰æ€§ï¼ˆIdempotencyï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šç½‘ç»œé‡è¯•å¯¼è‡´Confirm/Cancelé‡å¤è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼šæ¥å£è®¾è®¡éœ€å¹‚ç­‰ï¼ˆå¦‚é€šè¿‡äº‹åŠ¡ID+çŠ¶æ€æœºåˆ¤æ–­ï¼‰ï¼Œç¡®ä¿å¤šæ¬¡è°ƒç”¨ç»“æœä¸€è‡´&lt;a class="link" href="@ref" &gt;3,7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‚¬æŒ‚ï¼ˆHangingï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šCancelå…ˆäºTryæ‰§è¡Œï¼ˆå¦‚Tryç½‘ç»œå»¶è¿Ÿï¼‰ï¼Œå¯¼è‡´é¢„ç•™èµ„æºæ— æ³•é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³&lt;/strong&gt;ï¼šæ‰§è¡ŒTryå‰æ£€æŸ¥å…¨å±€äº‹åŠ¡çŠ¶æ€ï¼Œè‹¥å·²è¿›å…¥Cancelé˜¶æ®µåˆ™æ‹’ç»æ‰§è¡Œ&lt;a class="link" href="@ref" &gt;3,5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å®ç°æ­¥éª¤ä¸ä»£ç ç¤ºä¾‹"&gt;ğŸ› ï¸ &lt;strong&gt;å®ç°æ­¥éª¤ä¸ä»£ç ç¤ºä¾‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä»¥ç”µå•†ä¸‹å•ä¸ºä¾‹ï¼ˆè®¢å•+åº“å­˜+è´¦æˆ·æœåŠ¡ï¼‰ï¼š&lt;/p&gt;
&lt;h4 id="tryé˜¶æ®µèµ„æºé¢„ç•™"&gt;&lt;strong&gt;Tryé˜¶æ®µï¼šèµ„æºé¢„ç•™&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// åº“å­˜æœåŠ¡Try
public boolean reserveInventory(String productId, int quantity) {
// æ£€æŸ¥å¯ç”¨åº“å­˜ï¼šæ€»åº“å­˜ - å†»ç»“åº“å­˜ â‰¥ éœ€æ±‚
if (availableStock &amp;gt;= quantity) {
availableStock -= quantity; // æ‰£å‡å¯ç”¨åº“å­˜
frozenStock += quantity; // å¢åŠ å†»ç»“åº“å­˜
return true;
}
return false;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®&lt;/strong&gt;ï¼šæ›´æ–°&lt;code&gt;å†»ç»“åº“å­˜&lt;/code&gt;å­—æ®µï¼Œä¸å®é™…æ‰£å‡&lt;a class="link" href="@ref" &gt;7,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="confirmé˜¶æ®µçœŸå®æäº¤"&gt;&lt;strong&gt;Confirmé˜¶æ®µï¼šçœŸå®æäº¤&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// åº“å­˜æœåŠ¡Confirm
public boolean commitInventory(String productId, int quantity) {
// å¹‚ç­‰æ£€æŸ¥ï¼šè‹¥å·²æäº¤åˆ™è·³è¿‡
if (frozenStock &amp;gt;= quantity) {
frozenStock -= quantity; // é‡Šæ”¾å†»ç»“åº“å­˜
return true;
}
return false;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="cancelé˜¶æ®µèµ„æºé‡Šæ”¾"&gt;&lt;strong&gt;Cancelé˜¶æ®µï¼šèµ„æºé‡Šæ”¾&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// åº“å­˜æœåŠ¡Cancel
public boolean releaseInventory(String productId, int quantity) {
// ç©ºå›æ»šå¤„ç†ï¼šè‹¥æœªæ‰§è¡ŒTryï¼Œç›´æ¥è¿”å›
if (frozenStock == 0) return true;
// é‡Šæ”¾å†»ç»“èµ„æº
availableStock += quantity;
frozenStock -= quantity;
return true;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ³¨&lt;/strong&gt;ï¼šéœ€ç»“åˆå…¨å±€äº‹åŠ¡IDå®ç°å¹‚ç­‰å’Œç©ºå›æ»šåˆ¤æ–­&lt;a class="link" href="@ref" &gt;7,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-tcc-vs-2pc-å¯¹æ¯”"&gt;ğŸ“Š &lt;strong&gt;TCC vs 2PC å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;TCC&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;2PC&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå¼‚æ­¥æäº¤ï¼Œæ— é•¿é”ï¼‰&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆåŒæ­¥é˜»å¡ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾µå…¥æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆéœ€ä¸šåŠ¡æ”¹é€ ä¸‰ä¸ªæ¥å£ï¼‰&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆä¾èµ–æ•°æ®åº“XAåè®®ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºé”å®š&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡å±‚æ§åˆ¶ï¼ˆå¦‚å†»ç»“å­—æ®µï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“å±‚é”ï¼ˆè¡Œé”/è¡¨é”ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ï¼ˆç”µå•†ã€æ”¯ä»˜ï¼‰&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´éœ€æ±‚ï¼ˆé“¶è¡Œè½¬è´¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä¸šçº§å®ç°æ¡†æ¶seata"&gt;ğŸ­ &lt;strong&gt;å·¥ä¸šçº§å®ç°æ¡†æ¶ï¼ˆSeataï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Seataçš„TCCæ¨¡å¼æä¾›å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ³¨è§£é©±åŠ¨å¼€å‘&lt;/strong&gt;ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;@LocalTCC
public interface InventoryService {
@TwoPhaseBusinessAction(name = &amp;#34;reserve&amp;#34;, commitMethod = &amp;#34;commit&amp;#34;, rollbackMethod = &amp;#34;cancel&amp;#34;)
boolean reserve(BusinessActionContext ctx, String productId, int quantity);
boolean commit(BusinessActionContext ctx);
boolean cancel(BusinessActionContext ctx);
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;@TwoPhaseBusinessAction&lt;/code&gt;è‡ªåŠ¨ç®¡ç†äº‹åŠ¡ç”Ÿå‘½å‘¨æœŸ&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡åè°ƒæœºåˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TMï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰&lt;/strong&gt;ï¼šç”Ÿæˆå…¨å±€äº‹åŠ¡IDï¼ˆXIDï¼‰ï¼Œåè°ƒTry/Confirm/Cancelè°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TCï¼ˆäº‹åŠ¡åè°ƒå™¨ï¼‰&lt;/strong&gt;ï¼šæŒä¹…åŒ–äº‹åŠ¡çŠ¶æ€ï¼Œæ”¯æŒé‡è¯•ä¸æ•…éšœæ¢å¤&lt;a class="link" href="@ref" &gt;8,11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨è®¾è®¡&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;TCé›†ç¾¤åŒ–éƒ¨ç½²ï¼Œé€šè¿‡Raftåè®®é€‰ä¸»ã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡æ—¥å¿—å­˜å‚¨æ”¯æŒMySQLã€Redisç­‰&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-1"&gt;ğŸ’¼ &lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”µå•†ä¸‹å•&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Tryï¼šå†»ç»“åº“å­˜ã€æ ¡éªŒè´¦æˆ·ä½™é¢ã€‚&lt;/li&gt;
&lt;li&gt;Confirmï¼šæ‰£å‡åº“å­˜ã€å®é™…æ‰£æ¬¾ã€‚&lt;/li&gt;
&lt;li&gt;Cancelï¼šé‡Šæ”¾åº“å­˜ã€è§£å†»èµ„é‡‘&lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡‘èè½¬è´¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Tryï¼šå†»ç»“è½¬å‡ºè´¦æˆ·èµ„é‡‘ã€‚&lt;/li&gt;
&lt;li&gt;Confirmï¼šå®é™…è½¬è´¦ï¼ˆè½¬å‡ºæ‰£æ¬¾+æ”¶æ¬¾å…¥è´¦ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;Cancelï¼šè§£å†»èµ„é‡‘&lt;a class="link" href="@ref" &gt;9,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¥¨åŠ¡é¢„è®¢&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Tryï¼šé”å®šåº§ä½ã€ç”Ÿæˆé¢„è®¢å•ã€‚&lt;/li&gt;
&lt;li&gt;Confirmï¼šç¡®è®¤å‡ºç¥¨ã€‚&lt;/li&gt;
&lt;li&gt;Cancelï¼šé‡Šæ”¾åº§ä½&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å±€é™æ€§åŠåº”å¯¹"&gt;âš ï¸ &lt;strong&gt;å±€é™æ€§åŠåº”å¯¹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¼€å‘æˆæœ¬é«˜&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªæœåŠ¡éœ€å®ç°ä¸‰ä¸ªæ¥å£ï¼Œä»£ç é‡å¢åŠ 200%&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–&lt;/strong&gt;ï¼šä½¿ç”¨Seataç­‰æ¡†æ¶å‡å°‘æ¨¡æ¿ä»£ç &lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸šåŠ¡åœºæ™¯é™åˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ— æ³•é¢„ç•™èµ„æºçš„åœºæ™¯ï¼ˆå¦‚å‘é€çŸ­ä¿¡ï¼‰ä¸é€‚ç”¨TCCï¼Œæ”¹ç”¨SAGAæ¨¡å¼&lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥å¿å¤æ‚åº¦&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;Cancelé€»è¾‘éœ€å®Œå…¨é€†å‘ï¼ˆå¦‚é€€æ¬¾éœ€è€ƒè™‘æ‰‹ç»­è´¹ï¼‰&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è®¾è®¡åŸåˆ™&lt;/strong&gt;ï¼šCancelæ“ä½œå¿…é¡»å¹‚ç­‰ä¸”æ”¯æŒéƒ¨åˆ†å›æ»šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰å‹å»ºè®®"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ä¸é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé«˜å¹¶å‘ã€å¯é¢„ç•™èµ„æºçš„ä¸šåŠ¡ï¼ˆæ”¯ä»˜/åº“å­˜ï¼‰ï¼Œ&lt;strong&gt;å®¹å¿æœ€ç»ˆä¸€è‡´&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¼ºä¸€è‡´éœ€æ±‚ï¼ˆå¦‚é‡‘èæ ¸å¿ƒç³»ç»Ÿï¼‰ã€æ— æ³•é¢„ç•™èµ„æºçš„æ“ä½œï¼ˆå¦‚çŸ­ä¿¡å‘é€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ä½³å®è·µï¼š
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆä½¿ç”¨æ¡†æ¶ï¼ˆå¦‚Seataï¼‰é™ä½å¼€å‘æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;å¿…é¡»è§£å†³&lt;strong&gt;ç©ºå›æ»šã€å¹‚ç­‰ã€æ‚¬æŒ‚&lt;/strong&gt;ä¸‰å¤§å¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;é…å¥—ç›‘æ§äº‹åŠ¡æ—¥å¿—ä¸å‘Šè­¦ï¼ˆå¦‚Confirmå¤±è´¥ç‡ï¼0.1%éœ€äººå·¥å¹²é¢„ï¼‰&lt;a class="link" href="@ref" &gt;7,11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;TCCé€šè¿‡&lt;strong&gt;ä¸šåŠ¡å±‚äº‹åŠ¡æ‹†åˆ†&lt;/strong&gt;ï¼Œä»¥å¼€å‘å¤æ‚æ€§æ¢å–é«˜æ€§èƒ½å’Œé«˜å¯ç”¨ï¼Œæ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ä¸­å¹³è¡¡æ€§èƒ½ä¸ä¸€è‡´æ€§çš„å…¸å‹æ–¹æ¡ˆã€‚å®é™…è½åœ°éœ€ç»“åˆæ¡†æ¶èƒ½åŠ›ä¸ä¸¥æ ¼çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œé¿å…èµ„æºæ³„æ¼ä¸æ•°æ®ä¸ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="saga"&gt;SAGA
&lt;/h2&gt;&lt;p&gt;Saga æ¨¡å¼æ˜¯ä¸€ç§ç”¨äºè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é•¿äº‹åŠ¡ä¸€è‡´æ€§é—®é¢˜çš„&lt;strong&gt;è¡¥å¿å‹äº‹åŠ¡æ¨¡å¼&lt;/strong&gt;ï¼Œå°¤å…¶é€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€‚å®ƒé€šè¿‡å°†å…¨å±€äº‹åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—å¯é€†çš„æœ¬åœ°äº‹åŠ¡ï¼Œå¹¶è®¾è®¡å¯¹åº”çš„è¡¥å¿æ“ä½œï¼Œå®ç°æœ€ç»ˆä¸€è‡´æ€§ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒåŸç†ã€å®ç°æ–¹å¼åŠå®è·µè¦ç‚¹çš„ç³»ç»ŸåŒ–è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†ä¸å·¥ä½œæµç¨‹"&gt;ğŸ”„ &lt;strong&gt;æ ¸å¿ƒåŸç†ä¸å·¥ä½œæµç¨‹&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡åˆ†è§£&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†å…¨å±€äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ª&lt;strong&gt;æœ¬åœ°äº‹åŠ¡&lt;/strong&gt;ï¼ˆå¦‚è®¢å•åˆ›å»ºã€åº“å­˜æ‰£å‡ã€æ”¯ä»˜æ‰§è¡Œï¼‰ï¼Œæ¯ä¸ªæœ¬åœ°äº‹åŠ¡ç‹¬ç«‹æäº¤åˆ°å„è‡ªçš„æ•°æ®åº“&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæœ¬åœ°äº‹åŠ¡éœ€é…å¥—ä¸€ä¸ª&lt;strong&gt;è¡¥å¿äº‹åŠ¡&lt;/strong&gt;ï¼ˆå¦‚å–æ¶ˆè®¢å•ã€æ¢å¤åº“å­˜ã€é€€æ¬¾ï¼‰ï¼Œç”¨äºé€†å‘å›æ»šæ“ä½œ&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæœºåˆ¶&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­£å‘æµç¨‹&lt;/strong&gt;ï¼šæŒ‰é¡ºåºæ‰§è¡Œæ‰€æœ‰æœ¬åœ°äº‹åŠ¡ï¼Œè‹¥å…¨éƒ¨æˆåŠŸåˆ™äº‹åŠ¡å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥å¿æµç¨‹&lt;/strong&gt;ï¼šè‹¥æŸä¸€æœ¬åœ°äº‹åŠ¡å¤±è´¥ï¼Œåˆ™&lt;strong&gt;é€†åºè§¦å‘&lt;/strong&gt;å·²æˆåŠŸæ­¥éª¤çš„è¡¥å¿äº‹åŠ¡ï¼Œå›æ»šè‡³åˆå§‹çŠ¶æ€&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€è‡´æ€§æ¨¡å‹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;ï¼šäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å…è®¸çŸ­æš‚ä¸ä¸€è‡´ï¼ˆå¦‚åº“å­˜å·²æ‰£å‡ä½†æ”¯ä»˜æœªå®Œæˆï¼‰ï¼Œé€šè¿‡è¡¥å¿æ“ä½œæœ€ç»ˆè¾¾æˆä¸€è‡´&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— å¼ºéš”ç¦»æ€§&lt;/strong&gt;ï¼šå› æœ¬åœ°äº‹åŠ¡ç‹¬ç«‹æäº¤ï¼Œå¯èƒ½å‘ç”Ÿè„è¯»æˆ–æ›´æ–°ä¸¢å¤±ï¼ˆå¦‚è¡¥å¿æ—¶æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸¤ç§å®ç°æ–¹å¼å¯¹æ¯”"&gt;âš™ï¸ &lt;strong&gt;ä¸¤ç§å®ç°æ–¹å¼å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ç¼–èˆæ¨¡å¼choreography"&gt;&lt;strong&gt;ç¼–èˆæ¨¡å¼ï¼ˆChoreographyï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šæ— ä¸­å¿ƒåè°ƒå™¨ï¼ŒæœåŠ¡é—´é€šè¿‡&lt;strong&gt;äº‹ä»¶/æ¶ˆæ¯&lt;/strong&gt;ï¼ˆå¦‚ Kafkaã€RabbitMQï¼‰è‡ªä¸»è§¦å‘åç»­äº‹åŠ¡&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æµç¨‹ç¤ºä¾‹ï¼š
&lt;ol&gt;
&lt;li&gt;è®¢å•æœåŠ¡åˆ›å»ºè®¢å• â†’ å‘å¸ƒ &lt;code&gt;OrderCreated&lt;/code&gt; äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;åº“å­˜æœåŠ¡ç›‘å¬äº‹ä»¶ â†’ æ‰£å‡åº“å­˜ â†’ å‘å¸ƒ &lt;code&gt;InventoryDeducted&lt;/code&gt; äº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯ä»˜æœåŠ¡ç›‘å¬äº‹ä»¶ â†’ æ‰§è¡Œæ‰£æ¬¾ â†’ æˆåŠŸæˆ–å‘å¸ƒå¤±è´¥äº‹ä»¶è§¦å‘è¡¥å¿&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ— å•ç‚¹æ•…éšœã€æœåŠ¡è§£è€¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæµç¨‹å¤æ‚éš¾è¿½è¸ªï¼Œå¾ªç¯ä¾èµ–é£é™©é«˜&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¼–æ’æ¨¡å¼orchestration"&gt;&lt;strong&gt;ç¼–æ’æ¨¡å¼ï¼ˆOrchestrationï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šç”±&lt;strong&gt;ä¸­å¿ƒåè°ƒå™¨&lt;/strong&gt;ï¼ˆå¦‚ Seataã€Temporalï¼‰ç»Ÿä¸€è°ƒåº¦äº‹åŠ¡åºåˆ—ï¼Œç®¡ç†çŠ¶æ€ä¸è¡¥å¿é€»è¾‘&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æµç¨‹ç¤ºä¾‹ï¼š
&lt;ol&gt;
&lt;li&gt;åè°ƒå™¨è°ƒç”¨è®¢å•æœåŠ¡ â†’ æˆåŠŸåˆ™è°ƒç”¨åº“å­˜æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;åº“å­˜æœåŠ¡å¤±è´¥ â†’ åè°ƒå™¨é€†åºè§¦å‘è®¢å•æœåŠ¡çš„è¡¥å¿æ“ä½œ&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæµç¨‹å¯è§†åŒ–ã€æ˜“æ‰©å±•ï¼Œé¿å…å¾ªç¯ä¾èµ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šåè°ƒå™¨å•ç‚¹æ•…éšœé£é™©ï¼Œéœ€é¢å¤–ç»´æŠ¤&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-ç¼–èˆ-vs-ç¼–æ’é€‚ç”¨åœºæ™¯"&gt;ğŸ“Š &lt;strong&gt;ç¼–èˆ vs ç¼–æ’é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼–èˆæ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç¼–æ’æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆç®€å•æµç¨‹ï¼‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå¤æ‚æµç¨‹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯ç»´æŠ¤æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;éš¾ï¼ˆæµç¨‹åˆ†æ•£ï¼‰&lt;/td&gt;
&lt;td&gt;æ˜“ï¼ˆé›†ä¸­ç®¡ç†ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•…éšœç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— å•ç‚¹æ•…éšœ&lt;/td&gt;
&lt;td&gt;åè°ƒå™¨å¯èƒ½æ•…éšœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœåŠ¡å°‘ã€é€»è¾‘ç®€å•ï¼ˆ&amp;lt;5ä¸ªï¼‰&lt;/td&gt;
&lt;td&gt;é•¿æµç¨‹ã€å¤šæœåŠ¡ååŒï¼ˆå¦‚ç”µå•†è®¢å•ï¼‰&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®é—®é¢˜ä¸è§£å†³ç­–ç•¥"&gt;âš ï¸ &lt;strong&gt;å…³é”®é—®é¢˜ä¸è§£å†³ç­–ç•¥&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¼‚å¸¸&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è„è¯»&lt;/strong&gt;ï¼šäº‹åŠ¡Aæœªå®Œæˆæ—¶ï¼Œäº‹åŠ¡Bè¯»å–ä¸­é—´çŠ¶æ€ï¼ˆå¦‚åº“å­˜å†»ç»“ä½†æœªæ‰£å‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯­ä¹‰é”&lt;/strong&gt;ï¼šä¸šåŠ¡å±‚æ ‡è®°æ•°æ®çŠ¶æ€ï¼ˆå¦‚ &lt;code&gt;status = &amp;quot;FREEZING&amp;quot;&lt;/code&gt;ï¼‰ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡æ“ä½œ&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‚²è§‚è§†å›¾&lt;/strong&gt;ï¼šè°ƒæ•´äº‹åŠ¡é¡ºåºï¼Œå°†æ•æ„Ÿæ“ä½œåç½®&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥å¿å¤±è´¥é£é™©&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è¡¥å¿æ“ä½œè‡ªèº«å¤±è´¥ï¼ˆå¦‚é€€æ¬¾æ¥å£è¶…æ—¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt;ï¼šæŒ‡æ•°é€€é¿é‡è¯• + æ­»ä¿¡é˜Ÿåˆ—å…œåº•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äººå·¥å¹²é¢„&lt;/strong&gt;ï¼šæ—¥å¿—å‘Šè­¦ + äººå·¥ä¿®å¤&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‚¬æŒ‚ä¸ç©ºè¡¥å¿&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç©ºè¡¥å¿&lt;/strong&gt;ï¼šæœªæ‰§è¡Œæ­£å‘æ“ä½œå´è§¦å‘è¡¥å¿ï¼ˆå¦‚ç½‘ç»œè¶…æ—¶å¯¼è‡´è¯¯å›æ»šï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‚¬æŒ‚&lt;/strong&gt;ï¼šè¡¥å¿å…ˆäºæ­£å‘æ“ä½œåˆ°è¾¾ï¼ˆå¦‚æ­£å‘è°ƒç”¨å»¶è¿Ÿï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡çŠ¶æ€è¡¨&lt;/strong&gt;ï¼šè®°å½•äº‹åŠ¡IDä¸çŠ¶æ€ï¼Œè¡¥å¿å‰æ ¡éªŒæ˜¯å¦éœ€æ‰§è¡Œ&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹‚ç­‰è®¾è®¡&lt;/strong&gt;ï¼šè¡¥å¿æ“ä½œæ”¯æŒå¤šæ¬¡è°ƒç”¨ï¼ˆå¦‚é€šè¿‡äº‹åŠ¡IDå»é‡ï¼‰&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä¸šçº§å®ç°æ¡†æ¶ä»¥-seata-ä¸ºä¾‹"&gt;ğŸ­ &lt;strong&gt;å·¥ä¸šçº§å®ç°æ¡†æ¶ï¼ˆä»¥ Seata ä¸ºä¾‹ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;çŠ¶æ€æœºå¼•æ“&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ JSON å®šä¹‰äº‹åŠ¡æµç¨‹ï¼Œæ˜ç¡®æ­£å‘æ“ä½œä¸è¡¥å¿é€»è¾‘çš„æ˜ å°„å…³ç³»
7ï¼š
&lt;pre tabindex="0"&gt;&lt;code&gt;{
&amp;#34;Name&amp;#34;: &amp;#34;OrderSaga&amp;#34;,
&amp;#34;States&amp;#34;: [
{ &amp;#34;Name&amp;#34;: &amp;#34;CreateOrder&amp;#34;, &amp;#34;Compensate&amp;#34;: &amp;#34;CancelOrder&amp;#34; },
{ &amp;#34;Name&amp;#34;: &amp;#34;DeductInventory&amp;#34;, &amp;#34;Compensate&amp;#34;: &amp;#34;RestoreInventory&amp;#34; }
]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œæµç¨‹ï¼š
&lt;ul&gt;
&lt;li&gt;åè°ƒå™¨é©±åŠ¨çŠ¶æ€æœº â†’ è°ƒç”¨æœåŠ¡ â†’ å¤±è´¥æ—¶è§¦å‘è¡¥å¿é“¾&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨è®¾è®¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;TCï¼ˆäº‹åŠ¡åè°ƒå™¨ï¼‰é›†ç¾¤åŒ–&lt;/strong&gt;ï¼šåŸºäº Raft åè®®é€‰ä¸»ï¼Œé¿å…å•ç‚¹æ•…éšœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹åŠ¡æ—¥å¿—æŒä¹…åŒ–&lt;/strong&gt;ï¼šè®°å½•æ“ä½œçŠ¶æ€ï¼Œæ•…éšœåå¯æ¢å¤&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…¸å‹åº”ç”¨åœºæ™¯-2"&gt;ğŸ›’ &lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”µå•†è®¢å•æµç¨‹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ­¥éª¤ï¼šåˆ›å»ºè®¢å• â†’ æ‰£åº“å­˜ â†’ æ”¯ä»˜ â†’ å‘è´§ã€‚&lt;/li&gt;
&lt;li&gt;è¡¥å¿ï¼šæ”¯ä»˜å¤±è´¥ â†’ æ¢å¤åº“å­˜ â†’ å–æ¶ˆè®¢å•&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨è¡Œè½¬è´¦&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ­¥éª¤ï¼šè½¬å‡ºè¡Œæ‰£æ¬¾ â†’ è½¬å…¥è¡ŒåŠ æ¬¾ã€‚&lt;/li&gt;
&lt;li&gt;è¡¥å¿ï¼šåŠ æ¬¾å¤±è´¥ â†’ è½¬å‡ºè¡Œé€€æ¬¾&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—…è¡Œé¢„è®¢&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ­¥éª¤ï¼šè®¢æœºç¥¨ â†’ è®¢é…’åº— â†’ ç§Ÿè½¦ã€‚&lt;/li&gt;
&lt;li&gt;è¡¥å¿ï¼šç§Ÿè½¦å¤±è´¥ â†’ é€€é…’åº— â†’ é€€æœºç¥¨&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-saga-ä¸å…¶ä»–äº‹åŠ¡æ¨¡å¼å¯¹æ¯”"&gt;âš–ï¸ &lt;strong&gt;Saga ä¸å…¶ä»–äº‹åŠ¡æ¨¡å¼å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¾µå…¥æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Saga&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;é•¿æµç¨‹ã€è·¨æœåŠ¡ï¼ˆè®¢å•/ç‰©æµï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;2PC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;çŸ­äº‹åŠ¡ã€å¼ºä¸€è‡´ï¼ˆé“¶è¡Œè½¬è´¦ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;TCC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜å¹¶å‘ç§’æ€ï¼ˆåº“å­˜å†»ç»“ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-æœ€ä½³å®è·µä¸é€‰å‹å»ºè®®"&gt;ğŸ’ &lt;strong&gt;æœ€ä½³å®è·µä¸é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;è®¾è®¡åŸåˆ™ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸šåŠ¡å¯é€†æ€§&lt;/strong&gt;ï¼šç¡®ä¿è¡¥å¿æ“ä½œé€»è¾‘å®Œå¤‡ï¼ˆå¦‚é€€æ¬¾éœ€å«æ‰‹ç»­è´¹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¶…æ—¶æ§åˆ¶&lt;/strong&gt;ï¼šè®¾ç½®äº‹åŠ¡è¶…æ—¶é˜ˆå€¼ï¼Œé¿å…èµ„æºé•¿æœŸå ç”¨&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é€‰å‹åœºæ™¯ï¼š
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆ &lt;strong&gt;Saga&lt;/strong&gt;ï¼šè·¨æœåŠ¡é•¿æµç¨‹ã€å¯¹ä¸€è‡´æ€§å»¶è¿Ÿå®¹å¿é«˜ï¼ˆå¦‚ç”µå•†ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é¿å… &lt;strong&gt;Saga&lt;/strong&gt;ï¼šéœ€å¼ºéš”ç¦»æ€§ï¼ˆå¦‚é‡‘èæ ¸å¿ƒè´¦åŠ¡ï¼‰æˆ–æ— æ³•è®¾è®¡è¡¥å¿çš„åœºæ™¯ï¼ˆå¦‚çŸ­ä¿¡å‘é€ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®¹ç¾å…œåº•ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§&lt;/strong&gt;ï¼šè·Ÿè¸ªäº‹åŠ¡æˆåŠŸ/è¡¥å¿ç‡ï¼ˆå¦‚ Prometheus + Grafanaï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è´¦ç³»ç»Ÿ&lt;/strong&gt;ï¼šå®šæœŸæ ¡éªŒä¸šåŠ¡æ•°æ®ä¸€è‡´æ€§ï¼ˆå¦‚è®¢å•ä¸åº“å­˜çŠ¶æ€ï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼šSaga æ¨¡å¼ä»¥&lt;strong&gt;ä¸šåŠ¡é€»è¾‘è¡¥å¿&lt;/strong&gt;æ›¿ä»£æ•°æ®åº“é”ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¹³è¡¡äº†ä¸€è‡´æ€§ä¸æ€§èƒ½ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äº&lt;strong&gt;æµç¨‹ç¼–æ’çµæ´»æ€§&lt;/strong&gt;ä¸&lt;strong&gt;æœ€ç»ˆå¯é æ€§&lt;/strong&gt;ï¼Œé€‚ç”¨äºå¤šæ•°å¼‚æ­¥è§£è€¦åœºæ™¯ã€‚å·¥ä¸šè½åœ°æ—¶ï¼Œå»ºè®®ç»“åˆ Seata ç­‰æ¡†æ¶é™ä½å¤æ‚åº¦ï¼Œå¹¶é€šè¿‡å¹‚ç­‰æ€§ã€ç›‘æ§å‘Šè­¦å¼ºåŒ–é²æ£’æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="seata"&gt;seata
&lt;/h2&gt;&lt;p&gt;Seataï¼ˆSimple Extensible Autonomous Transaction Architectureï¼‰æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›äºåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹æä¾›&lt;strong&gt;é«˜æ€§èƒ½ã€æ˜“ç”¨ä¸”å¤šæ¨¡å¼å…¼å®¹&lt;/strong&gt;çš„äº‹åŠ¡æœåŠ¡ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒæ¶æ„ã€äº‹åŠ¡æ¨¡å¼ã€å·¥ä½œåŸç†åˆ°å®è·µåº”ç”¨å±•å¼€ç³»ç»Ÿè§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒæ¶æ„tctmrm-ååŒæ¨¡å‹"&gt;ğŸ”§ &lt;strong&gt;æ ¸å¿ƒæ¶æ„ï¼šTC/TM/RM ååŒæ¨¡å‹&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Seata çš„æ ¸å¿ƒæ¶æ„å›´ç»•ä¸‰ä¸ªè§’è‰²æ„å»ºï¼Œå®ç°å…¨å±€äº‹åŠ¡ä¸åˆ†æ”¯äº‹åŠ¡çš„åä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;TC (Transaction Coordinator)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šäº‹åŠ¡åè°ƒå™¨ï¼ˆç‹¬ç«‹éƒ¨ç½²ï¼‰ï¼Œç»´æŠ¤å…¨å±€äº‹åŠ¡çŠ¶æ€ï¼ˆæäº¤/å›æ»šï¼‰ï¼Œè°ƒåº¦åˆ†æ”¯äº‹åŠ¡çš„æ‰§è¡Œ&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…³é”®èƒ½åŠ›&lt;/strong&gt;ï¼šé«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²ï¼ˆå¦‚åŸºäºNacosæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œäº‹åŠ¡æ—¥å¿—æŒä¹…åŒ–ï¼ˆæ”¯æŒDBã€Redisç­‰ï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TM (Transaction Manager)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šäº‹åŠ¡ç®¡ç†å™¨ï¼ˆé›†æˆåœ¨åº”ç”¨ï¼‰ï¼Œå®šä¹‰å…¨å±€äº‹åŠ¡è¾¹ç•Œï¼Œé€šè¿‡æ³¨è§£ &lt;code&gt;@GlobalTransactional&lt;/code&gt; å¼€å¯äº‹åŠ¡ï¼Œå¹¶æœ€ç»ˆå‘TCå‘èµ·æäº¤æˆ–å›æ»šå†³è®®&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RM (Resource Manager)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èŒè´£&lt;/strong&gt;ï¼šèµ„æºç®¡ç†å™¨ï¼ˆé›†æˆåœ¨åº”ç”¨ï¼‰ï¼Œç®¡ç†åˆ†æ”¯äº‹åŠ¡èµ„æºï¼ˆå¦‚æ•°æ®åº“ï¼‰ï¼Œæ‰§è¡Œæœ¬åœ°äº‹åŠ¡å¹¶å‘TCæ³¨å†Œ/ä¸ŠæŠ¥çŠ¶æ€&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒæœºåˆ¶&lt;/strong&gt;ï¼šåœ¨ATæ¨¡å¼ä¸‹è‡ªåŠ¨ç”Ÿæˆå›æ»šæ—¥å¿—ï¼ˆ&lt;code&gt;undo_log&lt;/code&gt;ï¼‰ï¼Œåœ¨TCCæ¨¡å¼ä¸‹æ‰§è¡Œä¸šåŠ¡è¡¥å¿é€»è¾‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;âœ… &lt;strong&gt;åä½œæµç¨‹&lt;/strong&gt;ï¼š
TM å¼€å¯å…¨å±€äº‹åŠ¡ â†’ ç”Ÿæˆå”¯ä¸€XID â†’ XIDé€ä¼ è‡³è°ƒç”¨é“¾ â†’ RM æ³¨å†Œåˆ†æ”¯äº‹åŠ¡ â†’ TC ç»Ÿä¸€è°ƒåº¦æäº¤/å›æ»š&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-å››å¤§äº‹åŠ¡æ¨¡å¼è¯¦è§£"&gt;âš™ï¸ &lt;strong&gt;å››å¤§äº‹åŠ¡æ¨¡å¼è¯¦è§£&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="atæ¨¡å¼è‡ªåŠ¨è¡¥å¿é»˜è®¤æ¨¡å¼"&gt;&lt;strong&gt;ATæ¨¡å¼ï¼ˆè‡ªåŠ¨è¡¥å¿ï¼Œé»˜è®¤æ¨¡å¼ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€é˜¶æ®µ&lt;/strong&gt;ï¼šä¸šåŠ¡SQLä¸å›æ»šæ—¥å¿—ï¼ˆ&lt;code&gt;undo_log&lt;/code&gt;ï¼‰åœ¨æœ¬åœ°äº‹åŠ¡ä¸­æäº¤ï¼Œè®°å½•æ•°æ®å‰åé•œåƒï¼ˆ&lt;code&gt;before_image&lt;/code&gt;/&lt;code&gt;after_image&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;äºŒé˜¶æ®µï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æäº¤&lt;/strong&gt;ï¼šå¼‚æ­¥åˆ é™¤&lt;code&gt;undo_log&lt;/code&gt;ï¼ˆå‡ ä¹æ— æ€§èƒ½æŸè€—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ»š&lt;/strong&gt;ï¼šå¯¹æ¯”å½“å‰æ•°æ®ä¸&lt;code&gt;after_image&lt;/code&gt;ï¼Œè‹¥ä¸€è‡´åˆ™ç”¨&lt;code&gt;before_image&lt;/code&gt;ç”Ÿæˆåå‘SQLè¡¥å¿ï¼›è‹¥ä¸ä¸€è‡´ï¼ˆè„å†™ï¼‰åˆ™è§¦å‘å‘Šè­¦æˆ–äººå·¥å¹²é¢„&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šæ— ä¸šåŠ¡ä¾µå…¥ï¼ŒåŸºäºSQLè§£æè‡ªåŠ¨ç”Ÿæˆè¡¥å¿é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;ï¼šé€šè¿‡å…¨å±€é”å®ç°å†™éš”ç¦»ï¼ˆSELECT FOR UPDATE ä¼šç”³è¯·å…¨å±€é”ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="tccæ¨¡å¼ä¸šåŠ¡è¡¥å¿"&gt;&lt;strong&gt;TCCæ¨¡å¼ï¼ˆä¸šåŠ¡è¡¥å¿ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Try&lt;/strong&gt;ï¼šé¢„ç•™èµ„æºï¼ˆå¦‚å†»ç»“åº“å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Confirm&lt;/strong&gt;ï¼šæäº¤èµ„æºï¼ˆå®é™…æ‰£å‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cancel&lt;/strong&gt;ï¼šé‡Šæ”¾èµ„æºï¼ˆè§£å†»åº“å­˜ï¼‰&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šéœ€å¼ºä¸€è‡´æ€§çš„é«˜å¹¶å‘æ“ä½œï¼ˆå¦‚æ”¯ä»˜ã€ç§’æ€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;/strong&gt;ï¼šéœ€æ‰‹åŠ¨å®ç°ä¸‰æ¥å£ï¼Œè§£å†³ç©ºå›æ»šã€å¹‚ç­‰æ€§é—®é¢˜&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="sagaæ¨¡å¼é•¿äº‹åŠ¡æµç¨‹"&gt;&lt;strong&gt;SAGAæ¨¡å¼ï¼ˆé•¿äº‹åŠ¡æµç¨‹ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­£å‘æœåŠ¡é“¾&lt;/strong&gt;ï¼šä¾æ¬¡æäº¤æœ¬åœ°äº‹åŠ¡ï¼ˆæ— é”ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥å¿é“¾&lt;/strong&gt;ï¼šå¤±è´¥æ—¶é€†åºè§¦å‘è¡¥å¿æ“ä½œï¼ˆéœ€ä¸šåŠ¡å®ç°ï¼‰&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šè·¨æœåŠ¡é•¿æµç¨‹ï¼ˆå¦‚ç”µå•†ä¸‹å•ã€ä¿é™©ç†èµ”ï¼‰ï¼Œæ”¯æŒå¼‚æ„ç³»ç»Ÿé›†æˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ— éš”ç¦»æ€§ï¼Œéœ€ä¸šåŠ¡è®¾è®¡è¡¥å¿é˜²æ‚¬æŒ‚&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="xaæ¨¡å¼å¼ºä¸€è‡´æ€§"&gt;&lt;strong&gt;XAæ¨¡å¼ï¼ˆå¼ºä¸€è‡´æ€§ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼šåŸºäºæ•°æ®åº“XAåè®®ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€é˜¶æ®µ&lt;/strong&gt;ï¼šRMæ‰§è¡ŒSQLä½†ä¸æäº¤ï¼ŒæŒæœ‰æ•°æ®åº“é”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äºŒé˜¶æ®µ&lt;/strong&gt;ï¼šTCé€šçŸ¥æ‰€æœ‰RMæäº¤/å›æ»š&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šä¼ ç»Ÿé‡‘èç³»ç»Ÿï¼Œéœ€å¼ºä¸€è‡´ä¸”æ•°æ®åº“æ”¯æŒXAåè®®ï¼ˆå¦‚MySQL InnoDBï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="-å››ç§æ¨¡å¼å¯¹æ¯”"&gt;ğŸ“Š &lt;strong&gt;å››ç§æ¨¡å¼å¯¹æ¯”&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¾µå…¥æ€§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;AT&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;å…¨å±€é”å†™éš”ç¦»&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;å¸¸è§„ä¸šåŠ¡ï¼ˆè®¢å•ã€åº“å­˜ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;TCC&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;td&gt;èµ„æºé¢„ç•™éš”ç¦»&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;æé«˜&lt;/td&gt;
&lt;td&gt;æ”¯ä»˜ã€é«˜å¹¶å‘ç§’æ€&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;SAGA&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´&lt;/td&gt;
&lt;td&gt;æ— éš”ç¦»&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é•¿æµç¨‹ï¼ˆç‰©æµã€ç†èµ”ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;XA&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¼ºä¸€è‡´&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“é”å®Œå…¨éš”ç¦»&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;é“¶è¡Œè½¬è´¦ã€é‡‘èæ ¸å¿ƒ&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä½œæµç¨‹è§£æä»¥atæ¨¡å¼ä¸ºä¾‹"&gt;ğŸ”„ &lt;strong&gt;å·¥ä½œæµç¨‹è§£æï¼ˆä»¥ATæ¨¡å¼ä¸ºä¾‹ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€äº‹åŠ¡å¯åŠ¨&lt;/strong&gt;
TM é€šè¿‡ &lt;code&gt;@GlobalTransactional&lt;/code&gt; æ³¨è§£å¼€å¯äº‹åŠ¡ï¼ŒTC ç”Ÿæˆå…¨å±€å”¯ä¸€XID&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ”¯äº‹åŠ¡æ‰§è¡Œ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;RM æ‹¦æˆªä¸šåŠ¡SQLï¼Œç”Ÿæˆ &lt;code&gt;before_image&lt;/code&gt; å’Œ &lt;code&gt;after_image&lt;/code&gt;ï¼Œå†™å…¥ &lt;code&gt;undo_log&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æäº¤æœ¬åœ°äº‹åŠ¡å‰ç”³è¯·å…¨å±€é”ï¼ŒæˆåŠŸåˆ™æäº¤å¹¶ä¸ŠæŠ¥TCï¼›å¤±è´¥åˆ™å›æ»š&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€äº‹åŠ¡æäº¤/å›æ»š&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æäº¤&lt;/strong&gt;ï¼šTC å¼‚æ­¥åˆ é™¤æ‰€æœ‰å…³è” &lt;code&gt;undo_log&lt;/code&gt;ï¼ˆé‡Šæ”¾å…¨å±€é”ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ»š&lt;/strong&gt;ï¼šRM æ ¹æ® &lt;code&gt;undo_log&lt;/code&gt; ç”Ÿæˆè¡¥å¿SQLï¼Œåœ¨æœ¬åœ°äº‹åŠ¡ä¸­æ‰§è¡Œå›æ»š&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;âš ï¸ &lt;strong&gt;å…³é”®ç‚¹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€é”å†²çª&lt;/strong&gt;ï¼šè‹¥æ•°æ®è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼ˆè„å†™ï¼‰ï¼Œå›æ»šä¼šå¤±è´¥å¹¶è§¦å‘å‘Šè­¦&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½è®¾è®¡&lt;/strong&gt;ï¼šäºŒé˜¶æ®µæäº¤å¼‚æ­¥åŒ–ï¼Œé¿å…åŒæ­¥é˜»å¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-æŠ€æœ¯ä¼˜åŠ¿ä¸æŒ‘æˆ˜"&gt;âš¡ &lt;strong&gt;æŠ€æœ¯ä¼˜åŠ¿ä¸æŒ‘æˆ˜&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ä¼˜åŠ¿"&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šæ¨¡å¼å…¼å®¹&lt;/strong&gt;ï¼šé€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯ï¼ˆå¼ºä¸€è‡´/æœ€ç»ˆä¸€è‡´ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— ä¾µå…¥æ€§&lt;/strong&gt;ï¼šATæ¨¡å¼é›¶ä¸šåŠ¡æ”¹é€ ï¼ŒXAæ¨¡å¼å…¼å®¹æ ‡å‡†åè®®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¯ç”¨&lt;/strong&gt;ï¼šTCæ”¯æŒé›†ç¾¤åŒ–éƒ¨ç½²ï¼Œäº‹åŠ¡æ—¥å¿—æŒä¹…åŒ–é˜²å•ç‚¹æ•…éšœ&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æŒ‘æˆ˜ä¸åº”å¯¹"&gt;&lt;strong&gt;æŒ‘æˆ˜ä¸åº”å¯¹&lt;/strong&gt;
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ATæ¨¡å¼è„å†™é£é™©&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šå›æ»šæ—¶æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šé…ç½®ç­–ç•¥ï¼ˆé‡è¯•/äººå·¥ä»‹å…¥ï¼‰+ ç›‘æ§å‘Šè­¦&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;TCCå¼€å‘å¤æ‚åº¦&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;ï¼šä½¿ç”¨Seataæ¡†æ¶çš„ &lt;code&gt;@TwoPhaseBusinessAction&lt;/code&gt; ç®€åŒ–æ¥å£å¼€å‘&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ç“¶é¢ˆ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–&lt;/strong&gt;ï¼šé¿å…è·¨æœåŠ¡æ“ä½œåŒä¸€è¡Œæ•°æ®ï¼›Sagaå¼‚æ­¥æ‰§è¡Œå‡å°‘é˜»å¡&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-åº”ç”¨å®è·µæŒ‡å—"&gt;ğŸ› ï¸ &lt;strong&gt;åº”ç”¨å®è·µæŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="éƒ¨ç½²ä¸é…ç½®"&gt;&lt;strong&gt;éƒ¨ç½²ä¸é…ç½®&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;TCæœåŠ¡ç«¯ï¼š
&lt;ul&gt;
&lt;li&gt;ä»å®˜ç½‘ä¸‹è½½Seata Serverï¼Œé…ç½®æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚Nacosï¼‰åŠå­˜å‚¨æ¨¡å¼ï¼ˆDB/Redisï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å»ºè¡¨ &lt;code&gt;global_table&lt;/code&gt;ã€&lt;code&gt;branch_table&lt;/code&gt;ã€&lt;code&gt;lock_table&lt;/code&gt;ã€&lt;code&gt;undo_log&lt;/code&gt;&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ï¼š
&lt;ul&gt;
&lt;li&gt;å¼•å…¥ &lt;code&gt;seata-spring-boot-starter&lt;/code&gt;ï¼Œé…ç½®äº‹åŠ¡ç»„ä¸TCåœ°å€&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å¼€å‘ç¤ºä¾‹atæ¨¡å¼"&gt;&lt;strong&gt;å¼€å‘ç¤ºä¾‹ï¼ˆATæ¨¡å¼ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// TMç«¯ï¼šè®¢å•æœåŠ¡
@GlobalTransactional(rollbackFor = Exception.class)
public void createOrder() {
orderService.insert(); // æœ¬åœ°äº‹åŠ¡
inventoryService.deduct(); // è¿œç¨‹è°ƒç”¨åº“å­˜æœåŠ¡ï¼ˆRMï¼‰
}
// RMç«¯ï¼šåº“å­˜æœåŠ¡ï¼ˆè‡ªåŠ¨ç”Ÿæˆundo_logï¼‰
public void deduct() {
jdbcTemplate.update(&amp;#34;UPDATE stock SET count = count - 1 WHERE product_id = 1&amp;#34;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="ç›‘æ§ä¸è¿ç»´"&gt;&lt;strong&gt;ç›‘æ§ä¸è¿ç»´&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—è¿½è¸ª&lt;/strong&gt;ï¼šé€šè¿‡XIDä¸²è”å…¨å±€äº‹åŠ¡é“¾è·¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å¯¹è´¦&lt;/strong&gt;ï¼šå®šæœŸæ ¡éªŒä¸šåŠ¡æ•°æ®ä¸€è‡´æ€§ï¼ˆå¦‚è®¢å•ä¸åº“å­˜çŠ¶æ€ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰å‹å»ºè®®-1"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ä¸é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Seata é€šè¿‡ &lt;strong&gt;å¤šæ¨¡å¼é€‚é…&lt;/strong&gt; å’Œ &lt;strong&gt;åˆ†å±‚æ¶æ„è®¾è®¡&lt;/strong&gt;ï¼Œæˆä¸ºå¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡çš„äº‹å®æ ‡å‡†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼ºä¸€è‡´åœºæ™¯&lt;/strong&gt;ï¼šé€‰ &lt;strong&gt;XA&lt;/strong&gt;ï¼ˆé‡‘èï¼‰æˆ– &lt;strong&gt;TCC&lt;/strong&gt;ï¼ˆé«˜å¹¶å‘æ”¯ä»˜ï¼‰&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆä¸€è‡´åœºæ™¯ï¼š
&lt;ul&gt;
&lt;li&gt;å¸¸è§„ä¸šåŠ¡ï¼š&lt;strong&gt;ATæ¨¡å¼&lt;/strong&gt;ï¼ˆæ— ä¾µå…¥é¦–é€‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é•¿æµç¨‹/å¼‚æ„ç³»ç»Ÿï¼š&lt;strong&gt;SAGAæ¨¡å¼&lt;/strong&gt;ï¼ˆå¼‚æ­¥é«˜æ€§èƒ½ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½ç“¶é¢ˆè§„é¿&lt;/strong&gt;ï¼šé¿å…è·¨æœåŠ¡æ“ä½œçƒ­ç‚¹æ•°æ®ï¼Œé…åˆå¼‚æ­¥è¡¥å¿æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³å®è·µ&lt;/strong&gt;ï¼šä¼˜å…ˆé‡‡ç”¨ AT æ¨¡å¼é™ä½å¼€å‘æˆæœ¬ï¼Œå¤æ‚åœºæ™¯ç»„åˆ TCC/SAGAï¼›é…å¥—å…¨å±€é”ç›‘æ§ã€äº‹åŠ¡æ—¥å¿—åˆ†æï¼Œæ„å»ºé²æ£’çš„äº‹åŠ¡ä½“ç³»&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="at--saga"&gt;AT &amp;amp; SAGA
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ Seata æ¡†æ¶ä¸­ &lt;strong&gt;AT æ¨¡å¼&lt;/strong&gt;ï¼ˆè‡ªåŠ¨è¡¥å¿äº‹åŠ¡ï¼‰ä¸ &lt;strong&gt;SAGA æ¨¡å¼&lt;/strong&gt;ï¼ˆé•¿äº‹åŠ¡è¡¥å¿æ¨¡å¼ï¼‰çš„è¯¦ç»†å¯¹æ¯”ï¼Œç»“åˆæŠ€æœ¯åŸç†ã€é€‚ç”¨åœºæ™¯åŠå®è·µè¦ç‚¹è¿›è¡Œç³»ç»Ÿåˆ†æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒå·®å¼‚æ‘˜è¦"&gt;ğŸ“Š &lt;strong&gt;æ ¸å¿ƒå·®å¼‚æ‘˜è¦&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;AT æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SAGA æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;äº‹åŠ¡æ¨¡å‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰ä¼˜åŒ–&lt;/td&gt;
&lt;td&gt;äº‹ä»¶é©±åŠ¨é•¿äº‹åŠ¡é“¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´ï¼ˆå¼±éš”ç¦»ï¼‰&lt;/td&gt;
&lt;td&gt;æœ€ç»ˆä¸€è‡´ï¼ˆæ— éš”ç¦»ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çŸ­äº‹åŠ¡é«˜åå&lt;/td&gt;
&lt;td&gt;é•¿äº‹åŠ¡é«˜å¹¶å‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾µå…¥æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ— ä¸šåŠ¡ä¾µå…¥&lt;/td&gt;
&lt;td&gt;éœ€æ‰‹åŠ¨ç¼–å†™è¡¥å¿æœåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;éš”ç¦»æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é€šè¿‡å…¨å±€é”å®ç°å†™éš”ç¦»&lt;/td&gt;
&lt;td&gt;æ— éš”ç¦»ï¼Œéœ€ä¸šåŠ¡å±‚å¤„ç†è„è¯»/æ›´æ–°ä¸¢å¤±&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è·¨æ•°æ®åº“çš„çŸ­äº‹åŠ¡ï¼ˆè®¢å•æ”¯ä»˜ï¼‰&lt;/td&gt;
&lt;td&gt;è·¨æœåŠ¡çš„å¼‚æ­¥é•¿æµç¨‹ï¼ˆç”µå•†ä¸‹å•ã€æ—…ç¨‹é¢„è®¢ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-äº‹åŠ¡æ¨¡å‹ä¸åŸç†"&gt;ğŸ”§ &lt;strong&gt;äº‹åŠ¡æ¨¡å‹ä¸åŸç†&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="at-æ¨¡å¼è‡ªåŠ¨è¡¥å¿äº‹åŠ¡"&gt;&lt;strong&gt;AT æ¨¡å¼ï¼ˆè‡ªåŠ¨è¡¥å¿äº‹åŠ¡ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ ¸å¿ƒæœºåˆ¶ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€é˜¶æ®µ&lt;/strong&gt;ï¼šä¸šåŠ¡ SQL ä¸å›æ»šæ—¥å¿—ï¼ˆ&lt;code&gt;undo_log&lt;/code&gt;ï¼‰åœ¨æœ¬åœ°äº‹åŠ¡ä¸­æäº¤ï¼Œè®°å½•æ•°æ®ä¿®æ”¹å‰åçš„å¿«ç…§ï¼ˆ&lt;code&gt;before_image&lt;/code&gt;/&lt;code&gt;after_image&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;2,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;äºŒé˜¶æ®µï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æäº¤&lt;/strong&gt;ï¼šå¼‚æ­¥åˆ é™¤ &lt;code&gt;undo_log&lt;/code&gt;ï¼ˆå‡ ä¹æ— å»¶è¿Ÿï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ»š&lt;/strong&gt;ï¼šå¯¹æ¯”å½“å‰æ•°æ®ä¸ &lt;code&gt;after_image&lt;/code&gt;ï¼Œè‹¥ä¸€è‡´åˆ™é€šè¿‡ &lt;code&gt;before_image&lt;/code&gt;ç”Ÿæˆåå‘ SQL æ¢å¤æ•°æ®ï¼›è‹¥ä¸ä¸€è‡´ï¼ˆè„å†™ï¼‰è§¦å‘å‘Šè­¦&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å…¨å±€é”ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨æäº¤å‰ç”³è¯·å…¨å±€é”ï¼ˆå†™å…¥ &lt;code&gt;lock_table&lt;/code&gt;ï¼‰ï¼Œé¿å…å…¶ä»–äº‹åŠ¡ä¿®æ”¹ç›¸åŒæ•°æ®ï¼Œå®ç°&lt;strong&gt;å†™éš”ç¦»&lt;/strong&gt;&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="saga-æ¨¡å¼é•¿äº‹åŠ¡é“¾"&gt;&lt;strong&gt;SAGA æ¨¡å¼ï¼ˆé•¿äº‹åŠ¡é“¾ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ ¸å¿ƒæœºåˆ¶ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ­£å‘äº‹åŠ¡é“¾&lt;/strong&gt;ï¼šå°†å…¨å±€äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªæœ¬åœ°äº‹åŠ¡ï¼ˆå¦‚åˆ›å»ºè®¢å• â†’ æ‰£åº“å­˜ â†’ æ”¯ä»˜ï¼‰ï¼Œæ¯ä¸ªäº‹åŠ¡ç‹¬ç«‹æäº¤&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¥å¿äº‹åŠ¡é“¾&lt;/strong&gt;ï¼šè‹¥æŸä¸€äº‹åŠ¡å¤±è´¥ï¼ŒæŒ‰&lt;strong&gt;é€†åºè§¦å‘è¡¥å¿æ“ä½œ&lt;/strong&gt;ï¼ˆå¦‚æ”¯ä»˜å¤±è´¥ â†’ é‡Šæ”¾åº“å­˜ â†’ å–æ¶ˆè®¢å•ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œæ–¹å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼–æ’å¼ï¼ˆChoreographyï¼‰&lt;/strong&gt;ï¼šæœåŠ¡é—´é€šè¿‡äº‹ä»¶ï¼ˆå¦‚ Kafkaï¼‰è‡ªä¸»è§¦å‘åç»­äº‹åŠ¡ï¼Œæ— ä¸­å¿ƒåè°ƒå™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè°ƒå¼ï¼ˆOrchestrationï¼‰&lt;/strong&gt;ï¼šç”± Seata çŠ¶æ€æœºå¼•æ“ï¼ˆJSON å®šä¹‰æµç¨‹ï¼‰ç»Ÿä¸€è°ƒåº¦äº‹åŠ¡ä¸è¡¥å¿&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-éš”ç¦»æ€§å¯¹æ¯”"&gt;âš ï¸ &lt;strong&gt;éš”ç¦»æ€§å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;AT æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SAGA æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è„è¯»&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ é€šè¿‡å…¨å±€é”é˜»æ­¢å†™æ“ä½œ&lt;/td&gt;
&lt;td&gt;âœ… å¯èƒ½å‘ç”Ÿï¼ˆäº‹åŠ¡æäº¤åæ•°æ®ç«‹å³å¯è§ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ›´æ–°ä¸¢å¤±&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ å…¨å±€é”é˜²æ­¢å¹¶å‘å†™å†²çª&lt;/td&gt;
&lt;td&gt;âœ… éœ€ä¸šåŠ¡å±‚å¤„ç†ï¼ˆå¦‚è¯­ä¹‰é”æ ‡è®°çŠ¶æ€ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§£å†³ç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å†…ç½®å…¨å±€é” + å¿«ç…§æ¯”å¯¹&lt;/td&gt;
&lt;td&gt;ä¾èµ–ä¸šåŠ¡è®¾è®¡ï¼ˆå¦‚æ‚²è§‚æµç¨‹è°ƒæ•´é¡ºåºï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AT æ¨¡å¼ä¸­ï¼Œä¸¤ä¸ªå¹¶å‘äº‹åŠ¡æ›´æ–°åŒä¸€è¡Œæ•°æ®ï¼šäº‹åŠ¡1æŒæœ‰å…¨å±€é”æ—¶ï¼Œäº‹åŠ¡2ä¼šè¢«é˜»å¡ç›´è‡³é”é‡Šæ”¾&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;SAGA æ¨¡å¼ä¸­ï¼Œè‹¥â€œæ‰£åº“å­˜â€åæœªåŠæ—¶â€œæ”¯ä»˜â€ï¼Œå…¶ä»–äº‹åŠ¡å¯èƒ½è¯»å–åˆ°ä¸­é—´çŠ¶æ€åº“å­˜ï¼Œéœ€æ ‡è®° &lt;code&gt;status=&amp;quot;FREEZING&amp;quot;&lt;/code&gt; é˜»æ­¢è„è¯»&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¸èµ„æºå¼€é”€"&gt;âš¡ &lt;strong&gt;æ€§èƒ½ä¸èµ„æºå¼€é”€&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æŒ‡æ ‡&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;AT æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SAGA æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;èµ„æºé”å®šæ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;çŸ­ï¼ˆä»…ä¸€é˜¶æ®µæäº¤æ—¶çŸ­æš‚æŒé”ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;æ— é”&lt;/strong&gt;ï¼ˆäº‹åŠ¡æäº¤å³é‡Šæ”¾ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ååé‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆäºŒé˜¶æ®µå¼‚æ­¥æäº¤ï¼‰&lt;/td&gt;
&lt;td&gt;æé«˜ï¼ˆäº‹åŠ¡é“¾å¯å¹¶è¡Œæ‰§è¡Œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç“¶é¢ˆç‚¹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨å±€é”ç«äº‰ï¼ˆé«˜å¹¶å‘çƒ­ç‚¹æ•°æ®ï¼‰&lt;/td&gt;
&lt;td&gt;è¡¥å¿æœåŠ¡æ‰§è¡Œå»¶è¿Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;AT ä¼˜åŠ¿&lt;/strong&gt;ï¼šé€‚åˆé«˜é¢‘çŸ­äº‹åŠ¡ï¼ˆå¦‚æ”¯ä»˜æ‰£æ¬¾ï¼‰ï¼Œæœ¬åœ°äº‹åŠ¡æäº¤å³é‡Šæ”¾èµ„æº&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SAGA ä¼˜åŠ¿&lt;/strong&gt;ï¼šé•¿äº‹åŠ¡ä¸­æ— èµ„æºé”å®šï¼Œé€‚åˆåº“å­˜å†»ç»“ã€æ—…ç¨‹é¢„è®¢ç­‰åˆ†é’Ÿçº§æµç¨‹&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ä¸šåŠ¡ä¾µå…¥æ€§ä¸å¤æ‚åº¦"&gt;ğŸ› ï¸ &lt;strong&gt;ä¸šåŠ¡ä¾µå…¥æ€§ä¸å¤æ‚åº¦&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;AT æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SAGA æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¼€å‘æˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ… æ— ä¾µå…¥ï¼ˆæ¡†æ¶è‡ªåŠ¨ç”Ÿæˆ/å›æ»š SQLï¼‰&lt;/td&gt;
&lt;td&gt;âŒ éœ€æ‰‹åŠ¨ç¼–å†™&lt;strong&gt;æ­£å‘æœåŠ¡ + è¡¥å¿æœåŠ¡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»£ç ç¤ºä¾‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;java @GlobalTransactional&lt;/code&gt; æ³¨è§£ç”Ÿæ•ˆ&lt;/td&gt;
&lt;td&gt;éœ€å®šä¹‰ JSON çŠ¶æ€æœºæˆ–å®ç°è¡¥å¿æ¥å£&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿ç»´å¤æ‚åº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆæ—¥å¿—è‡ªåŠ¨æ¸…ç†ï¼‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆéœ€ç›‘æ§æ‚¬æŒ‚äº‹åŠ¡ã€ç©ºè¡¥å¿ï¼‰&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;SAGA è¡¥å¿é€»è¾‘æŒ‘æˆ˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç©ºå›æ»š&lt;/strong&gt;ï¼šæœªæ‰§è¡Œ Try å´è§¦å‘ Cancel â†’ éœ€äº‹åŠ¡çŠ¶æ€è¡¨æ ¡éªŒ&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‚¬æŒ‚&lt;/strong&gt;ï¼šCancel å…ˆäº Try æ‰§è¡Œ â†’ éœ€æ£€æŸ¥å…¨å±€äº‹åŠ¡çŠ¶æ€&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-é€‚ç”¨åœºæ™¯å¯¹æ¯”"&gt;ğŸ­ &lt;strong&gt;é€‚ç”¨åœºæ™¯å¯¹æ¯”&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="at-æ¨¡å¼é¦–é€‰åœºæ™¯"&gt;&lt;strong&gt;AT æ¨¡å¼é¦–é€‰åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;çŸ­äº‹åŠ¡ &amp;amp; å¼ºæ•°æ®ä¾èµ–&lt;/strong&gt;ï¼šå¦‚è®¢å•åˆ›å»º+åº“å­˜æ‰£å‡ï¼ˆè·¨æ•°æ®åº“ï¼‰ï¼Œéœ€ä¿è¯åº“å­˜æ‰£å‡ä¸è®¢å•çŠ¶æ€åŒæ­¥&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½å»¶è¿Ÿè¦æ±‚&lt;/strong&gt;ï¼šç§’çº§å†…å®Œæˆçš„äº¤æ˜“ï¼ˆå¦‚æ”¯ä»˜å›è°ƒï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="saga-æ¨¡å¼é¦–é€‰åœºæ™¯"&gt;&lt;strong&gt;SAGA æ¨¡å¼é¦–é€‰åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;é•¿æµç¨‹ &amp;amp; è·¨æœåŠ¡å¼‚æ­¥ï¼š
&lt;ul&gt;
&lt;li&gt;ç”µå•†ä¸‹å•ï¼šåˆ›å»ºè®¢å• â†’ æ”¯ä»˜ â†’ å‘è´§ï¼ˆè¡¥å¿é“¾ï¼šæ”¯ä»˜å¤±è´¥é€€å•ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ—…ç¨‹é¢„è®¢ï¼šè®¢æœºç¥¨ â†’ è®¢é…’åº— â†’ ç§Ÿè½¦ï¼ˆä»»ä¸€å¤±è´¥è§¦å‘é€†åºå–æ¶ˆï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ„ç³»ç»Ÿé›†æˆ&lt;/strong&gt;ï¼šè°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆå¦‚é“¶è¡Œæ¥å£ï¼‰ï¼Œæ— æ³•æ§åˆ¶å…¶äº‹åŠ¡æ—¶&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å®¹é”™ä¸å¼‚å¸¸å¤„ç†"&gt;ğŸ§© &lt;strong&gt;å®¹é”™ä¸å¼‚å¸¸å¤„ç†&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å¼‚å¸¸ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;AT æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;SAGA æ¨¡å¼&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ¬åœ°äº‹åŠ¡å¤±è´¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨å›æ»šï¼ˆé€šè¿‡ &lt;code&gt;undo_log&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;è§¦å‘åç»­è¡¥å¿é“¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¡¥å¿å¤±è´¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸é€‚ç”¨&lt;/td&gt;
&lt;td&gt;âš ï¸ éœ€é‡è¯•æœºåˆ¶ + äººå·¥å…œåº•ï¼ˆå¦‚é€€æ¬¾æ¥å£è¶…æ—¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®ä¸ä¸€è‡´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿«ç…§æ¯”å¯¹å‘Šè­¦ + äººå·¥ä¿®å¤&lt;/td&gt;
&lt;td&gt;ä¸šåŠ¡å±‚ä¿è¯è¡¥å¿å¹‚ç­‰æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;SAGA å®¹ç¾å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¡¥å¿æœåŠ¡éœ€&lt;strong&gt;å¹‚ç­‰è®¾è®¡&lt;/strong&gt;ï¼ˆå¦‚é€šè¿‡äº‹åŠ¡ ID å»é‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯ç”¨å¼‚æ­¥é‡è¯•é˜Ÿåˆ— + æ­»ä¿¡ç›‘æ§&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“ä¸é€‰å‹å»ºè®®-2"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“ä¸é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© AT æ¨¡å¼&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœºæ™¯ï¼šè·¨æ•°æ®åº“çš„çŸ­äº‹åŠ¡ï¼ˆ90% å¾®æœåŠ¡åœºæ™¯ï¼‰ï¼Œè¿½æ±‚å¼€å‘æ•ˆç‡ä¸æ— ä¾µå…¥æ€§&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è§„é¿ç‚¹ï¼šçƒ­ç‚¹æ•°æ®å¹¶å‘å†™ï¼ˆå¦‚ç§’æ€åº“å­˜ï¼‰ï¼Œå…¨å±€é”å¯èƒ½æˆä¸ºç“¶é¢ˆ&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé€‰æ‹© SAGA æ¨¡å¼&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;åœºæ™¯ï¼šè·¨å¤šæœåŠ¡çš„å¼‚æ­¥é•¿æµç¨‹ï¼ˆ&amp;gt;1åˆ†é’Ÿï¼‰ï¼Œæˆ–éœ€é›†æˆå¼‚æ„ç³»ç»Ÿï¼ˆå¦‚ç¬¬ä¸‰æ–¹æ”¯ä»˜ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¿…å¤‡æªæ–½ï¼šè¡¥å¿æœåŠ¡å¹‚ç­‰æ€§ + çŠ¶æ€æœºå¯è§†åŒ–ç¼–æ’ï¼ˆSeata Designer å·¥å…·ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆæ¨¡å¼å®è·µ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;è®¢å•ç³»ç»Ÿï¼šç”¨ AT å¤„ç†è®¢å•åˆ›å»º + åº“å­˜æ‰£å‡ï¼ŒSAGA å¤„ç†æ”¯ä»˜ â†’ å‘è´§é•¿é“¾&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å†³ç­–æµç¨‹å›¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;graph TD
A[äº‹åŠ¡æ˜¯å¦è·¨å¤šæœåŠ¡ï¼Ÿ] --&amp;gt;|å¦| B[é€‰æ‹© AT æ¨¡å¼]
A --&amp;gt;|æ˜¯| C{æ‰§è¡Œæ—¶é—´ &amp;gt;1 åˆ†é’Ÿï¼Ÿ}
C --&amp;gt;|å¦| D[è¯„ä¼° AT æˆ– TCC]
C --&amp;gt;|æ˜¯| E[é€‰æ‹© SAGA æ¨¡å¼]
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id="è´Ÿè½½å‡è¡¡"&gt;è´Ÿè½½å‡è¡¡
&lt;/h2&gt;&lt;p&gt;è´Ÿè½½å‡è¡¡æŠ€æœ¯æ˜¯ç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œå…¶ç±»å‹å¯ä»&lt;strong&gt;ç½‘ç»œå±‚çº§&lt;/strong&gt;ã€&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;å’Œ&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;ä¸‰ä¸ªç»´åº¦è¿›è¡Œåˆ†ç±»ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰ç½‘ç»œå±‚çº§åˆ†ç±»osiæ¨¡å‹"&gt;ğŸ”§ &lt;strong&gt;æŒ‰ç½‘ç»œå±‚çº§åˆ†ç±»ï¼ˆOSIæ¨¡å‹ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="äºŒå±‚è´Ÿè½½å‡è¡¡æ•°æ®é“¾è·¯å±‚"&gt;&lt;strong&gt;äºŒå±‚è´Ÿè½½å‡è¡¡ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåŸºäºMACåœ°å€è¿›è¡Œæµé‡åˆ†å‘ï¼Œé€šè¿‡ä¿®æ”¹ç›®æ ‡MACåœ°å€å°†è¯·æ±‚è½¬å‘åˆ°ä¸åŒæœåŠ¡å™¨&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åè®®&lt;/strong&gt;ï¼šARPã€MACåœ°å€ä¼ªé€ ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šè½¬å‘æ•ˆç‡é«˜ï¼Œå»¶è¿Ÿä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ— æ³•æ„ŸçŸ¥åº”ç”¨å±‚ä¿¡æ¯ï¼Œçµæ´»æ€§å·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå±€åŸŸç½‘å†…éƒ¨æµé‡è°ƒåº¦ï¼Œå¦‚äº¤æ¢æœºçº§è´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸‰å±‚è´Ÿè½½å‡è¡¡ç½‘ç»œå±‚"&gt;&lt;strong&gt;ä¸‰å±‚è´Ÿè½½å‡è¡¡ï¼ˆç½‘ç»œå±‚ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåŸºäºIPåœ°å€åˆ†å‘æµé‡ï¼Œé€šè¿‡ä¿®æ”¹ç›®æ ‡IPå®ç°è½¬å‘&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åè®®&lt;/strong&gt;ï¼šIPåœ°å€è½¬æ¢ï¼ˆNATï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ”¯æŒè·¨å­ç½‘æµé‡è°ƒåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ— æ³•åŒºåˆ†åŒä¸€IPçš„ä¸åŒæœåŠ¡ï¼ˆå¦‚HTTP vs. FTPï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šä¼ä¸šå†…éƒ¨ç½‘ç»œè·¯ç”±ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å››å±‚è´Ÿè½½å‡è¡¡ä¼ è¾“å±‚"&gt;&lt;strong&gt;å››å±‚è´Ÿè½½å‡è¡¡ï¼ˆä¼ è¾“å±‚ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåŸºäºTCP/UDPåè®®ï¼Œé€šè¿‡IP+ç«¯å£å·åˆ†å‘è¯·æ±‚&lt;a class="link" href="@ref" &gt;1,4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åè®®&lt;/strong&gt;ï¼šTCP/UDPã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šé«˜æ€§èƒ½ï¼Œæ”¯æŒç™¾ä¸‡çº§å¹¶å‘è¿æ¥ï¼ˆå¦‚LVSï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ— æ³•è§£æHTTPå¤´éƒ¨ç­‰åº”ç”¨å±‚å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹å·¥å…·&lt;/strong&gt;ï¼šLVSã€F5 BIG-IPã€HAProxyï¼ˆTCPæ¨¡å¼ï¼‰&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæ•°æ®åº“é›†ç¾¤ã€æ¸¸æˆæœåŠ¡å™¨ç­‰é•¿è¿æ¥æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸ƒå±‚è´Ÿè½½å‡è¡¡åº”ç”¨å±‚"&gt;&lt;strong&gt;ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼ˆåº”ç”¨å±‚ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šè§£æHTTP/HTTPSç­‰åº”ç”¨å±‚åè®®ï¼Œæ ¹æ®URLã€Headerç­‰ä¿¡æ¯æ™ºèƒ½è·¯ç”±&lt;a class="link" href="@ref" &gt;1,2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹åè®®&lt;/strong&gt;ï¼šHTTP/HTTPSã€DNSã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ”¯æŒç°åº¦å‘å¸ƒã€A/Bæµ‹è¯•ã€é˜²ç›—é“¾ç­‰é«˜çº§åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå¤„ç†æ€§èƒ½ä½äºå››å±‚ï¼ˆéœ€è§£æåº”ç”¨å±‚æ•°æ®ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹å·¥å…·&lt;/strong&gt;ï¼šNginxã€HAProxyï¼ˆHTTPæ¨¡å¼ï¼‰ã€Spring Cloud Gateway&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šWebåº”ç”¨ã€APIç½‘å…³ã€å¾®æœåŠ¡è·¯ç”±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰å®ç°æ–¹å¼åˆ†ç±»"&gt;âš™ï¸ &lt;strong&gt;æŒ‰å®ç°æ–¹å¼åˆ†ç±»&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ç¡¬ä»¶è´Ÿè½½å‡è¡¡"&gt;&lt;strong&gt;ç¡¬ä»¶è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šé€šè¿‡ä¸“ç”¨ç¡¬ä»¶è®¾å¤‡ï¼ˆå¦‚F5 BIG-IPã€Cisco ACEï¼‰åˆ†å‘æµé‡&lt;a class="link" href="@ref" &gt;1,3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šé«˜æ€§èƒ½ã€é«˜å¯é æ€§ï¼Œæ”¯æŒTBçº§æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæˆæœ¬é«˜æ˜‚ï¼ˆå•å°è®¾å¤‡æ•°åä¸‡å…ƒï¼‰ï¼Œæ‰©å±•æ€§å·®&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé‡‘èã€ç”µä¿¡ç­‰å¯¹ç¨³å®šæ€§è¦æ±‚æé«˜çš„æ ¸å¿ƒç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è½¯ä»¶è´Ÿè½½å‡è¡¡"&gt;&lt;strong&gt;è½¯ä»¶è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šé€šè¿‡è½¯ä»¶å®ç°æµé‡è°ƒåº¦ï¼Œéƒ¨ç½²åœ¨é€šç”¨æœåŠ¡å™¨æˆ–äº‘ç¯å¢ƒ&lt;a class="link" href="@ref" &gt;1,4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šçµæ´»ã€ä½æˆæœ¬ï¼Œæ”¯æŒåŠ¨æ€æ‰©ç¼©å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ€§èƒ½ä¾èµ–å®¿ä¸»æœåŠ¡å™¨èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å…¸å‹å·¥å…·ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é€šç”¨è½¯ä»¶&lt;/strong&gt;ï¼šNginxï¼ˆHTTP/TCPï¼‰ã€HAProxyï¼ˆå››å±‚/ä¸ƒå±‚ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¾®æœåŠ¡é›†æˆ&lt;/strong&gt;ï¼šRibbonï¼ˆå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼‰ã€Spring Cloud LoadBalancer&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šäº’è”ç½‘åº”ç”¨ã€äº‘åŸç”Ÿæ¶æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="äº‘åŸç”Ÿè´Ÿè½½å‡è¡¡"&gt;&lt;strong&gt;äº‘åŸç”Ÿè´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šäº‘æœåŠ¡å•†æä¾›çš„æ‰˜ç®¡æœåŠ¡ï¼Œå¦‚AWS ALBï¼ˆåº”ç”¨å±‚ï¼‰ã€AWS NLBï¼ˆç½‘ç»œå±‚ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œä¸äº‘ç”Ÿæ€æ— ç¼é›†æˆï¼ˆå¦‚K8s Ingressï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šç»‘å®šç‰¹å®šäº‘å¹³å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¸å‹æœåŠ¡&lt;/strong&gt;ï¼šAWS ELBã€Azure Load Balancerã€GCP Cloud Load Balancingã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‰åº”ç”¨åœºæ™¯åˆ†ç±»"&gt;ğŸŒ &lt;strong&gt;æŒ‰åº”ç”¨åœºæ™¯åˆ†ç±»&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="å…¨å±€è´Ÿè½½å‡è¡¡gslb"&gt;&lt;strong&gt;å…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šè·¨åœ°åŸŸè°ƒåº¦æµé‡ï¼Œå°†ç”¨æˆ·è¯·æ±‚åˆ†å‘åˆ°æœ€è¿‘æˆ–æœ€å¥åº·çš„æ•°æ®ä¸­å¿ƒ&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ç°æ–¹å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DNSè´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šå°†åŒä¸€åŸŸåè§£æåˆ°ä¸åŒåœ°åŸŸçš„IPï¼ˆå¦‚CDNèŠ‚ç‚¹ï¼‰&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AnyCastè·¯ç”±&lt;/strong&gt;ï¼šé€šè¿‡BGPåè®®å®ç°IPå°±è¿‘è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šè·¨å›½ä¼ä¸šã€å¤šåœ°åŸŸéƒ¨ç½²çš„äº‘æœåŠ¡ï¼ˆå¦‚Netflixï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é›†ç¾¤å†…è´Ÿè½½å‡è¡¡"&gt;&lt;strong&gt;é›†ç¾¤å†…è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåœ¨å•ä¸€é›†ç¾¤å†…éƒ¨ï¼ˆå¦‚K8s Podsï¼‰åˆ†å‘è¯·æ±‚ï¼Œé¿å…å•ç‚¹è¿‡è½½&lt;a class="link" href="@ref" &gt;2,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ç°æ–¹å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡ç½‘æ ¼&lt;/strong&gt;ï¼šIstioã€Linkerdé€šè¿‡Sidecarä»£ç†åŠ¨æ€è·¯ç”±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šRibbonã€gRPCå†…ç½®ç®—æ³•ï¼ˆå¦‚æœ€å°‘è¿æ¥æ•°ï¼‰&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¾®æœåŠ¡æ¶æ„ã€å®¹å™¨åŒ–éƒ¨ç½²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ•°æ®åº“è´Ÿè½½å‡è¡¡"&gt;&lt;strong&gt;æ•°æ®åº“è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåˆ†æ•£æ•°æ®åº“è¯»å†™å‹åŠ›ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®ç°æ–¹å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯»å†™åˆ†ç¦»&lt;/strong&gt;ï¼šå†™æ“ä½œåˆ°ä¸»åº“ï¼Œè¯»æ“ä½œåˆ°ä»åº“ï¼ˆå¦‚MySQL Proxyï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†ç‰‡ï¼ˆShardingï¼‰&lt;/strong&gt;ï¼šæŒ‰æ•°æ®ç‰¹å¾ï¼ˆå¦‚ç”¨æˆ·IDå“ˆå¸Œï¼‰åˆ†å¸ƒåˆ°ä¸åŒå®ä¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé«˜å¹¶å‘ç”µå•†ã€ç¤¾äº¤å¹³å°æ•°æ®åº“é›†ç¾¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-è´Ÿè½½å‡è¡¡ç±»å‹å¯¹æ¯”æ€»ç»“"&gt;ğŸ“Š &lt;strong&gt;è´Ÿè½½å‡è¡¡ç±»å‹å¯¹æ¯”æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åˆ†ç±»ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç±»å‹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å·¥ä½œå±‚çº§&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å…¸å‹åè®®/å·¥å…·&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼˜ç¼ºç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç½‘ç»œå±‚çº§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å››å±‚è´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;td&gt;TCP/UDP&lt;/td&gt;
&lt;td&gt;LVSã€F5&lt;/td&gt;
&lt;td&gt;é«˜æ€§èƒ½ï¼Œä½†æ— æ³•è¯†åˆ«åº”ç”¨å±‚å†…å®¹&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“ã€å®æ—¶é€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;ä¸ƒå±‚è´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;td&gt;HTTP/HTTPS&lt;/td&gt;
&lt;td&gt;Nginxã€HAProxy&lt;/td&gt;
&lt;td&gt;åŠŸèƒ½ä¸°å¯Œï¼Œä½†æ€§èƒ½è¾ƒä½&lt;/td&gt;
&lt;td&gt;Webåº”ç”¨ã€APIç½‘å…³&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¡¬ä»¶è´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;td&gt;å››å±‚/ä¸ƒå±‚&lt;/td&gt;
&lt;td&gt;F5 BIG-IP&lt;/td&gt;
&lt;td&gt;é«˜å¯é é«˜æ€§èƒ½ï¼Œæˆæœ¬é«˜æ˜‚&lt;/td&gt;
&lt;td&gt;é‡‘èæ ¸å¿ƒç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;è½¯ä»¶è´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;td&gt;å››å±‚/ä¸ƒå±‚&lt;/td&gt;
&lt;td&gt;Nginxã€Ribbon&lt;/td&gt;
&lt;td&gt;çµæ´»ä½æˆæœ¬ï¼Œä¾èµ–å®¿ä¸»èµ„æº&lt;/td&gt;
&lt;td&gt;äº’è”ç½‘åº”ç”¨ã€äº‘åŸç”Ÿæ¶æ„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å…¨å±€è´Ÿè½½å‡è¡¡ï¼ˆGSLBï¼‰&lt;/td&gt;
&lt;td&gt;DNS/AnyCast&lt;/td&gt;
&lt;td&gt;AWS Route 53ã€Azure Traffic Manager&lt;/td&gt;
&lt;td&gt;è·¨åœ°åŸŸå®¹ç¾ï¼Œä½†é…ç½®å¤æ‚&lt;/td&gt;
&lt;td&gt;å¤šæ•°æ®ä¸­å¿ƒéƒ¨ç½²&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;é›†ç¾¤å†…è´Ÿè½½å‡è¡¡&lt;/td&gt;
&lt;td&gt;å››å±‚/ä¸ƒå±‚&lt;/td&gt;
&lt;td&gt;K8s Serviceã€Istio&lt;/td&gt;
&lt;td&gt;åŠ¨æ€è°ƒåº¦ï¼Œéœ€é…åˆæœåŠ¡å‘ç°&lt;/td&gt;
&lt;td&gt;å¾®æœåŠ¡ã€å®¹å™¨é›†ç¾¤&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-é€‰å‹å»ºè®®-1"&gt;âš ï¸ &lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ€§èƒ½æ•æ„Ÿå‹åœºæ™¯ï¼ˆå¦‚æ¸¸æˆæœåŠ¡å™¨ï¼‰ï¼š
&lt;ul&gt;
&lt;li&gt;ä¼˜å…ˆé€‰æ‹©&lt;strong&gt;å››å±‚ç¡¬ä»¶è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼ˆå¦‚F5ï¼‰æˆ–&lt;strong&gt;DPDKä¼˜åŒ–çš„è½¯ä»¶æ–¹æ¡ˆ&lt;/strong&gt;ï¼ˆå¦‚LVSï¼‰&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;çµæ´»è·¯ç”±éœ€æ±‚ï¼ˆå¦‚å¾®æœåŠ¡ç½‘å…³ï¼‰ï¼š
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;strong&gt;ä¸ƒå±‚è½¯ä»¶è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼ˆNginx+OpenRestyï¼‰æˆ–&lt;strong&gt;æœåŠ¡ç½‘æ ¼&lt;/strong&gt;ï¼ˆIstioï¼‰&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆæœ¬ä¸æ‰©å±•æ€§å¹³è¡¡ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸­å°è§„æ¨¡é€‰&lt;strong&gt;Nginx/HAProxy&lt;/strong&gt;ï¼›äº‘åŸç”Ÿç¯å¢ƒé€‰&lt;strong&gt;æ‰˜ç®¡æœåŠ¡&lt;/strong&gt;ï¼ˆAWS ALBï¼‰æˆ–&lt;strong&gt;å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼ˆRibbonï¼‰&lt;a class="link" href="@ref" &gt;1,2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è·¨åœ°åŸŸé«˜å¯ç”¨ï¼š
&lt;ul&gt;
&lt;li&gt;å¿…é€‰&lt;strong&gt;å…¨å±€è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼ˆGSLBï¼‰é…åˆDNSæ™ºèƒ½è§£æ&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ’ &lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;ï¼šè´Ÿè½½å‡è¡¡é€šè¿‡&lt;strong&gt;åˆ†æ²»ç­–ç•¥&lt;/strong&gt;å°†æµé‡åˆ†æ•£åˆ°å¤šèŠ‚ç‚¹ï¼Œæœ¬è´¨æ˜¯&lt;strong&gt;åˆ†å¸ƒå¼ç³»ç»Ÿèµ„æºè°ƒåº¦çš„åŸºçŸ³&lt;/strong&gt;ã€‚é€‰å‹æ—¶éœ€æƒè¡¡æ€§èƒ½ã€æˆæœ¬ã€åŠŸèƒ½å¤æ‚åº¦ï¼Œå¹¶ç»“åˆå¥åº·æ£€æŸ¥ã€ä¼šè¯ä¿æŒç­‰é…å¥—æœºåˆ¶æ„å»ºå®Œæ•´é«˜å¯ç”¨æ¶æ„&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="è´Ÿè½½å‡è¡¡ç®—æ³•"&gt;è´Ÿè½½å‡è¡¡ç®—æ³•
&lt;/h2&gt;&lt;p&gt;è´Ÿè½½å‡è¡¡ç®—æ³•æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒè°ƒåº¦æœºåˆ¶ï¼Œé€šè¿‡åˆç†åˆ†é…è¯·æ±‚æµé‡æå‡ç³»ç»Ÿååé‡ã€å¯ç”¨æ€§ä¸å®¹é”™æ€§ã€‚æ ¹æ®å†³ç­–ä¾æ®ï¼ˆæ˜¯å¦æ„ŸçŸ¥æœåŠ¡å™¨çŠ¶æ€ï¼‰å¯åˆ†ä¸ºé™æ€ä¸åŠ¨æ€ä¸¤å¤§ç±»ï¼Œä»¥ä¸‹ä»ç®—æ³•åŸç†ã€åº”ç”¨åœºæ™¯åŠå·¥ä¸šå®è·µå±•å¼€åˆ†æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-é™æ€è´Ÿè½½å‡è¡¡ç®—æ³•"&gt;âš–ï¸ &lt;strong&gt;é™æ€è´Ÿè½½å‡è¡¡ç®—æ³•&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;é™æ€ç®—æ³•åŸºäºé¢„å®šä¹‰ç­–ç•¥åˆ†é…è¯·æ±‚ï¼Œ&lt;strong&gt;ä¸æ„ŸçŸ¥æœåŠ¡å™¨å®æ—¶çŠ¶æ€&lt;/strong&gt;ï¼Œé€‚ç”¨äºæœåŠ¡å™¨æ€§èƒ½ç›¸è¿‘ä¸”è´Ÿè½½æ³¢åŠ¨å°çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;h4 id="è½®è¯¢round-robin"&gt;&lt;strong&gt;è½®è¯¢ï¼ˆRound Robinï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šæŒ‰æœåŠ¡å™¨åˆ—è¡¨é¡ºåºä¾æ¬¡åˆ†é…è¯·æ±‚ï¼Œå¾ªç¯å¾€å¤ã€‚å…¬å¼è¡¨ç¤ºä¸ºï¼š
&lt;code&gt;\text{next} = ( \text{current} + 1 ) \mod N&lt;/code&gt; ï¼ˆ&lt;code&gt;N&lt;/code&gt;ä¸ºæœåŠ¡å™¨æ•°é‡ï¼‰&lt;a class="link" href="@ref" &gt;2,7&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå®ç°ç®€å•ï¼Œç»å¯¹å…¬å¹³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå¿½ç•¥æœåŠ¡å™¨æ€§èƒ½å·®å¼‚ï¼Œé«˜è´Ÿè½½æ—¶ä½é…æœåŠ¡å™¨æ˜“è¿‡è½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šåŒæ„æœåŠ¡å™¨é›†ç¾¤ï¼ˆå¦‚é™æ€èµ„æºæœåŠ¡å™¨ï¼‰&lt;a class="link" href="@ref" &gt;7,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="éšæœºrandom"&gt;&lt;strong&gt;éšæœºï¼ˆRandomï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå®Œå…¨éšæœºé€‰æ‹©æœåŠ¡å™¨ã€‚è‹¥æœåŠ¡å™¨æ€§èƒ½ç›¸åŒï¼Œåˆ™è¯·æ±‚åˆ†å¸ƒè¶‹è¿‘å‡åŒ€&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ— çŠ¶æ€ï¼Œé€‚åˆå¿«é€Ÿéƒ¨ç½²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šçŸ­æ—¶é—´å¯èƒ½é€ æˆå±€éƒ¨è´Ÿè½½å€¾æ–œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä¸šå®è·µ&lt;/strong&gt;ï¼šRibbonçš„&lt;code&gt;RandomRule&lt;/code&gt;ã€Dubboçš„&lt;code&gt;RandomLoadBalance&lt;/code&gt;&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŠ æƒè½®è¯¢weighted-round-robin"&gt;&lt;strong&gt;åŠ æƒè½®è¯¢ï¼ˆWeighted Round Robinï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼šä¸ºé«˜æ€§èƒ½æœåŠ¡å™¨åˆ†é…æ›´é«˜æƒé‡ï¼ŒæŒ‰æƒé‡æ¯”ä¾‹åˆ†é…è¯·æ±‚ã€‚
å®ç°æ–¹å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°ç»„å±•å¼€æ³•&lt;/strong&gt;ï¼šæŒ‰æƒé‡å¤åˆ¶æœåŠ¡å™¨èŠ‚ç‚¹ï¼ˆå¦‚æƒé‡3:1åˆ™ç”Ÿæˆ[A,A,A,B]ï¼‰ï¼Œæ´—ç‰Œåè½®è¯¢ï¼ˆå†…å­˜å¼€é”€å¤§ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸Šç•Œæ”¶æ•›æ³•&lt;/strong&gt;ï¼šåŠ¨æ€é™ä½æƒé‡ä¸Šç•Œï¼Œä¼˜å…ˆé€‰æ‹©é«˜æƒé‡èŠ‚ç‚¹ï¼ˆå¦‚Nginxå®ç°ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¼‚æ„æœåŠ¡å™¨ï¼ˆå¦‚CPU/å†…å­˜å·®å¼‚å¤§ï¼‰&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æºipå“ˆå¸Œsource-ip-hash"&gt;&lt;strong&gt;æºIPå“ˆå¸Œï¼ˆSource IP Hashï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå¯¹å®¢æˆ·ç«¯IPå“ˆå¸Œå–æ¨¡ï¼š&lt;code&gt;\text{server} = \text{hash}(\text{client\_ip}) \mod N&lt;/code&gt;ï¼ŒåŒä¸€IPçš„è¯·æ±‚å›ºå®šåˆ°åŒä¸€æœåŠ¡å™¨&lt;a class="link" href="@ref" &gt;4,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ”¯æŒä¼šè¯ä¿æŒï¼ˆSession Affinityï¼‰ï¼Œæå‡ç¼“å­˜å‘½ä¸­ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæœåŠ¡å™¨æ‰©å®¹/ç¼©å®¹æ—¶å¤§é‡ä¼šè¯å¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨&lt;/strong&gt;ï¼šNginxçš„&lt;code&gt;ip_hash&lt;/code&gt;&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-åŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•"&gt;ğŸ”„ &lt;strong&gt;åŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;åŠ¨æ€ç®—æ³•**ä¾æ®æœåŠ¡å™¨å®æ—¶çŠ¶æ€ï¼ˆè¿æ¥æ•°ã€å“åº”æ—¶é—´ç­‰ï¼‰**åŠ¨æ€è°ƒæ•´æµé‡åˆ†é…ï¼Œé€‚åˆå¤æ‚å¤šå˜åœºæ™¯ã€‚&lt;/p&gt;
&lt;h4 id="æœ€å°‘è¿æ¥æ•°least-connections"&gt;&lt;strong&gt;æœ€å°‘è¿æ¥æ•°ï¼ˆLeast Connectionsï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šé€‰æ‹©å½“å‰æ´»è·ƒè¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ã€‚å…¬å¼ï¼š
&lt;code&gt;\text{select} = \arg\min(\text{connections}_i)&lt;/code&gt; &lt;a class="link" href="@ref" &gt;6,9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šè‡ªåŠ¨é€‚åº”é•¿è¿æ¥ã€å¤„ç†æ—¶é—´å·®å¼‚å¤§çš„æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€WebSocketï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šéœ€æŒç»­ç›‘æ§è¿æ¥æ•°ï¼Œå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;ï¼šLVSçš„&lt;code&gt;LC&lt;/code&gt;/&lt;code&gt;WLC&lt;/code&gt;ç®—æ³•ã€HAProxyçš„&lt;code&gt;leastconn&lt;/code&gt;&lt;a class="link" href="@ref" &gt;9,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æœ€çŸ­å“åº”æ—¶é—´least-response-time"&gt;&lt;strong&gt;æœ€çŸ­å“åº”æ—¶é—´ï¼ˆLeast Response Timeï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šç»¼åˆå“åº”æ—¶é—´ä¸è¿æ¥æ•°ï¼Œé€‰æ‹©å“åº”æœ€å¿«çš„æœåŠ¡å™¨ï¼š
&lt;code&gt;\text{score} = \alpha \times \text{response\_time} + \beta \times \text{connections}&lt;/code&gt; &lt;a class="link" href="@ref" &gt;7,4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œé€‚åˆå»¶è¿Ÿæ•æ„Ÿå‹åº”ç”¨ï¼ˆåœ¨çº¿æ¸¸æˆã€é‡‘èäº¤æ˜“ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šç½‘ç»œæŠ–åŠ¨æ˜“å¯¼è‡´å†³ç­–æ³¢åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼šRibbonçš„&lt;code&gt;WeightedResponseTimeRule&lt;/code&gt;&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸€è‡´æ€§å“ˆå¸Œconsistent-hash"&gt;&lt;strong&gt;ä¸€è‡´æ€§å“ˆå¸Œï¼ˆConsistent Hashï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†ï¼š
&lt;ol&gt;
&lt;li&gt;æ„å»ºå“ˆå¸Œç¯ï¼ˆ0~2Â³Â²-1ï¼‰ï¼Œå°†æœåŠ¡å™¨å’Œè¯·æ±‚çš„Keyï¼ˆå¦‚ç”¨æˆ·IDï¼‰å“ˆå¸Œåˆ°ç¯ä¸Šï¼›&lt;/li&gt;
&lt;li&gt;è¯·æ±‚åˆ†é…ç»™é¡ºæ—¶é’ˆæœ€è¿‘çš„æœåŠ¡å™¨èŠ‚ç‚¹&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šæœåŠ¡å™¨å¢å‡æ—¶ä»…å½±å“ç›¸é‚»èŠ‚ç‚¹ï¼Œä¼šè¯ä¿æŒæ€§ä¼˜äºIPå“ˆå¸Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åº”ç”¨&lt;/strong&gt;ï¼šç¼“å­˜é›†ç¾¤ï¼ˆå¦‚Redisé›†ç¾¤ï¼‰ã€Dubboçš„&lt;code&gt;ConsistentHashLoadBalance&lt;/code&gt;&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="åŸºäºèµ„æºçš„åŠ¨æ€æƒé‡resource-based"&gt;&lt;strong&gt;åŸºäºèµ„æºçš„åŠ¨æ€æƒé‡ï¼ˆResource-Basedï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šé‡‡é›†æœåŠ¡å™¨CPUã€å†…å­˜ã€I/Oç­‰æŒ‡æ ‡ï¼ŒåŠ¨æ€è®¡ç®—æƒé‡å¹¶è°ƒæ•´æµé‡&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼š
&lt;ul&gt;
&lt;li&gt;é˜¿é‡Œäº‘SLBçš„&lt;code&gt;QoS&lt;/code&gt;ç®—æ³•ï¼Œæ ¹æ®å®æ—¶è´Ÿè½½å¼¹æ€§åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;Kubernetes HPAï¼ˆHorizontal Pod Autoscalerï¼‰ç»“åˆè´Ÿè½½æŒ‡æ ‡è‡ªåŠ¨æ‰©ç¼©å®¹&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç®—æ³•å¯¹æ¯”ä¸é€‰å‹æŒ‡å—"&gt;ğŸ“Š &lt;strong&gt;ç®—æ³•å¯¹æ¯”ä¸é€‰å‹æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç®—æ³•&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;åŠ¨æ€æ€§&lt;/th&gt;
&lt;th&gt;ä¼šè¯ä¿æŒ&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;æ€§èƒ½å½±å“&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;è½®è¯¢&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;åŒæ„æœåŠ¡å™¨ã€é™æ€èµ„æº&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åŠ æƒè½®è¯¢&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;å¼‚æ„æœåŠ¡å™¨ï¼ˆCPU/å†…å­˜å·®å¼‚ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€å°‘è¿æ¥æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;é•¿è¿æ¥æœåŠ¡ï¼ˆæ•°æ®åº“ã€WebSocketï¼‰&lt;/td&gt;
&lt;td&gt;ä¸­ï¼ˆéœ€ç›‘æ§è¿æ¥ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœ€çŸ­å“åº”æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;å»¶è¿Ÿæ•æ„Ÿå‹åº”ç”¨ï¼ˆæ¸¸æˆã€äº¤æ˜“ï¼‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆéœ€è®¡ç®—æ—¶å»¶ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸€è‡´æ€§å“ˆå¸Œ&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;ç¼“å­˜é›†ç¾¤ã€ä¼šè¯ä¾èµ–æœåŠ¡&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æºIPå“ˆå¸Œ&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;éœ€ç®€å•ä¼šè¯ä¿æŒçš„åœºæ™¯&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="é€‰å‹å»ºè®®"&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŒæ„æœåŠ¡å™¨+çŸ­è¯·æ±‚&lt;/strong&gt;ï¼šè½®è¯¢/éšæœºï¼ˆå¦‚Nginxé™æ€èµ„æºåˆ†å‘ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚æ„æœåŠ¡å™¨&lt;/strong&gt;ï¼šåŠ æƒè½®è¯¢/åŠ æƒéšæœºï¼ˆå¦‚æ··åˆäº‘ç¯å¢ƒï¼‰&lt;a class="link" href="@ref" &gt;7,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿è¿æ¥/å¤„ç†æ—¶é—´å·®å¼‚å¤§&lt;/strong&gt;ï¼šæœ€å°‘è¿æ¥æ•°ï¼ˆå¦‚LVSçš„&lt;code&gt;WLC&lt;/code&gt;ç®—æ³•ï¼‰&lt;a class="link" href="@ref" &gt;9,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜å¹¶å‘+ä½å»¶è¿Ÿè¦æ±‚&lt;/strong&gt;ï¼šæœ€çŸ­å“åº”æ—¶é—´ï¼ˆå¦‚é‡‘èäº¤æ˜“ç³»ç»Ÿï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼šè¯ä¿æŒéœ€æ±‚&lt;/strong&gt;ï¼šä¸€è‡´æ€§å“ˆå¸Œï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ç»´æŠ¤ï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä¸šçº§å®ç°ä¸ä¼˜åŒ–ç­–ç•¥"&gt;âš™ï¸ &lt;strong&gt;å·¥ä¸šçº§å®ç°ä¸ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ä¸­é—´ä»¶é»˜è®¤ç®—æ³•"&gt;&lt;strong&gt;ä¸­é—´ä»¶é»˜è®¤ç®—æ³•&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Nginx&lt;/strong&gt;ï¼šè½®è¯¢ï¼ˆ&lt;code&gt;rr&lt;/code&gt;ï¼‰ã€åŠ æƒè½®è¯¢ï¼ˆ&lt;code&gt;wrr&lt;/code&gt;ï¼‰ã€IPå“ˆå¸Œï¼ˆ&lt;code&gt;ip_hash&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Spring Cloud&lt;/strong&gt;ï¼š&lt;code&gt;Ribbon&lt;/code&gt;æ”¯æŒ&lt;code&gt;ZoneAvoidanceRule&lt;/code&gt;ï¼ˆåŒºåŸŸæ„ŸçŸ¥+æƒé‡å“åº”ï¼‰&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LVS&lt;/strong&gt;ï¼šæ”¯æŒ8ç§ç®—æ³•ï¼Œå¦‚&lt;code&gt;WLC&lt;/code&gt;ï¼ˆåŠ æƒæœ€å°‘è¿æ¥ï¼‰ã€&lt;code&gt;LBLC&lt;/code&gt;ï¼ˆåŠ¨æ€ç›®æ ‡IPå“ˆå¸Œï¼‰&lt;a class="link" href="@ref" &gt;9,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å®¹ç¾ä¸é«˜å¯ç”¨"&gt;&lt;strong&gt;å®¹ç¾ä¸é«˜å¯ç”¨&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¥åº·æ£€æŸ¥&lt;/strong&gt;ï¼šç»“åˆHTTPæ¢é’ˆæˆ–TCPç«¯å£æ£€æµ‹ï¼Œè‡ªåŠ¨å‰”é™¤æ•…éšœèŠ‚ç‚¹ï¼ˆå¦‚HAProxyçš„&lt;code&gt;health check&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç†”æ–­é™çº§&lt;/strong&gt;ï¼šHystrix/Sentinelåœ¨è´Ÿè½½å‡è¡¡å±‚æ‹¦æˆªå¼‚å¸¸æµé‡ï¼Œé˜²æ­¢é›ªå´©&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è¿›é˜¶ä¼˜åŒ–æ–¹å‘"&gt;&lt;strong&gt;è¿›é˜¶ä¼˜åŒ–æ–¹å‘&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªé€‚åº”ç®—æ³•&lt;/strong&gt;ï¼šAIé¢„æµ‹è´Ÿè½½è¶‹åŠ¿ï¼ˆå¦‚Google B4ç½‘ç»œä½¿ç”¨çš„Q-Learningæ¨¡å‹ï¼‰&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šçº§è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šå…¨å±€GSLBï¼ˆå¦‚AWS Route 53ï¼‰â†’ åŒºåŸŸSLB â†’ å¾®æœåŠ¡ç½‘å…³&lt;a class="link" href="@ref" &gt;6,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè®®ä¼˜åŒ–&lt;/strong&gt;ï¼šHTTP/3çš„QUICåè®®å‡å°‘è¿æ¥å¼€é”€ï¼Œæå‡åŠ¨æ€è°ƒåº¦æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-8"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;è´Ÿè½½å‡è¡¡ç®—æ³•æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„â€œæµé‡æŒ‡æŒ¥å®˜â€ï¼Œ&lt;strong&gt;é™æ€ç®—æ³•&lt;/strong&gt;ä»¥é…ç½®ç®€å•å–èƒœï¼Œ&lt;strong&gt;åŠ¨æ€ç®—æ³•&lt;/strong&gt;ä»¥å®æ—¶é€‚é…è§é•¿ã€‚é€‰å‹éœ€ç»¼åˆä¸šåŠ¡åœºæ™¯ã€æ•°æ®ç‰¹å¾åŠè¿ç»´æˆæœ¬ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŒæ„é›†ç¾¤é€‰&lt;strong&gt;è½®è¯¢&lt;/strong&gt;ï¼Œå¼‚æ„ç¯å¢ƒç”¨&lt;strong&gt;åŠ æƒ&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;ä¼šè¯ä¿æŒéœ€&lt;strong&gt;ä¸€è‡´æ€§å“ˆå¸Œ&lt;/strong&gt;ï¼Œå»¶è¿Ÿæ•æ„Ÿé &lt;strong&gt;æœ€çŸ­å“åº”&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;é•¿è¿æ¥æœåŠ¡&lt;strong&gt;æœ€å°‘è¿æ¥æ•°&lt;/strong&gt;ï¼Œæ™ºèƒ½è°ƒåº¦æ˜¯æœªæ¥è¶‹åŠ¿ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®é€šè¿‡Nginxï¼ˆä¸ƒå±‚ï¼‰æˆ–LVSï¼ˆå››å±‚ï¼‰çš„å¤šç§ç®—æ³•ç»„åˆæµ‹è¯•ï¼Œç»“åˆPrometheusç›‘æ§æŒ‡æ ‡æŒç»­è°ƒä¼˜&lt;a class="link" href="@ref" &gt;8,10&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="é™æµ"&gt;é™æµ
&lt;/h2&gt;&lt;p&gt;é™æµç®—æ³•æ˜¯ä¿æŠ¤ç³»ç»Ÿå…å—è¿‡è½½çš„å…³é”®æŠ€æœ¯ï¼Œé€šè¿‡åœ¨æµé‡é«˜å³°æœŸé™åˆ¶è¯·æ±‚é€Ÿç‡ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸»æµé™æµç®—æ³•çš„è¯¦ç»†è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-åŸºç¡€ç®—æ³•è®¡æ•°å™¨ä¸æ»‘åŠ¨çª—å£"&gt;ğŸ”§ &lt;strong&gt;åŸºç¡€ç®—æ³•ï¼šè®¡æ•°å™¨ä¸æ»‘åŠ¨çª—å£&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å›ºå®šçª—å£è®¡æ•°å™¨ï¼ˆFixed Windowï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå°†æ—¶é—´åˆ’åˆ†ä¸ºå›ºå®šçª—å£ï¼ˆå¦‚1ç§’ï¼‰ï¼Œç»Ÿè®¡çª—å£å†…è¯·æ±‚æ•°ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™æ‹’ç»åç»­è¯·æ±‚&lt;a class="link" href="@ref" &gt;1,4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå®ç°ç®€å•ï¼ˆå¦‚Redisçš„&lt;code&gt;INCR&lt;/code&gt;å‘½ä»¤ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå­˜åœ¨&lt;strong&gt;è¾¹ç•Œçªåˆºé—®é¢˜&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œåœ¨1åˆ†é’Ÿçª—å£çš„æœ€åä¸€ç§’å’Œä¸‹ä¸€çª—å£çš„ç¬¬ä¸€ç§’é›†ä¸­è¯·æ±‚ï¼Œå¯èƒ½å¯¼è‡´å®é™…æµé‡åŒå€äºé˜ˆå€¼&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šå¯¹ç²¾åº¦è¦æ±‚ä¸é«˜çš„ä½é¢‘æ¥å£ï¼ˆå¦‚æ¯æ—¥é™é¢æœåŠ¡ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£è®¡æ•°å™¨ï¼ˆSliding Windowï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šå°†å›ºå®šçª—å£ç»†åˆ†ä¸ºæ›´å°çš„æ—¶é—´ç‰‡ï¼ˆå¦‚100msï¼‰ï¼ŒåŠ¨æ€ç»Ÿè®¡æ»‘åŠ¨çª—å£å†…çš„è¯·æ±‚é‡ã€‚ä¾‹å¦‚ï¼Œ1ç§’çª—å£åˆ†ä¸º10ä¸ª100mså­çª—å£ï¼Œè¯·æ±‚é‡åŸºäºæœ€è¿‘1ç§’å†…çš„å­çª—å£ç´¯åŠ &lt;a class="link" href="@ref" &gt;4,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šç¼“è§£è¾¹ç•Œçªåˆºï¼Œæµé‡æ§åˆ¶æ›´å¹³æ»‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå­˜å‚¨å’Œè®¡ç®—å¼€é”€è¾ƒé«˜ï¼ˆéœ€ç»´æŠ¤æ—¶é—´ç‰‡é˜Ÿåˆ—ï¼‰&lt;a class="link" href="@ref" &gt;4,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šAPIç½‘å…³ã€éœ€è¦ç²¾ç¡®æ§æµçš„æœåŠ¡ï¼ˆå¦‚æ”¯ä»˜æ¥å£ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ¡¶ç®—æ³•æ¼æ¡¶ä¸ä»¤ç‰Œæ¡¶"&gt;ğŸª£ &lt;strong&gt;æ¡¶ç®—æ³•ï¼šæ¼æ¡¶ä¸ä»¤ç‰Œæ¡¶&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¼æ¡¶ç®—æ³•ï¼ˆLeaky Bucketï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šè¯·æ±‚è¿›å…¥å®¹é‡å›ºå®šçš„â€œæ¡¶â€ï¼Œä»¥æ’å®šé€Ÿç‡æµå‡ºï¼ˆå¦‚æ¯ç§’10ä¸ªè¯·æ±‚ï¼‰ã€‚æ¡¶æ»¡æ—¶æ–°è¯·æ±‚è¢«ä¸¢å¼ƒæˆ–æ’é˜Ÿ&lt;a class="link" href="@ref" &gt;1,3,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;ç»å¯¹å¹³æ»‘æµé‡&lt;/strong&gt;ï¼Œè¾“å‡ºé€Ÿç‡æ’å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ— æ³•å¤„ç†çªå‘æµé‡ï¼Œå¯èƒ½é€ æˆè¯·æ±‚å»¶è¿Ÿæˆ–ä¸¢å¼ƒ&lt;a class="link" href="@ref" &gt;3,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæµé‡æ•´å½¢ï¼ˆå¦‚æ•°æ®åº“è®¿é—®é™æµï¼‰ï¼Œä¿æŠ¤ä¸‹æ¸¸è„†å¼±æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆToken Bucketï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šç³»ç»Ÿä»¥å›ºå®šé€Ÿç‡ï¼ˆå¦‚10ä¸ª/ç§’ï¼‰å‘æ¡¶ä¸­æ·»åŠ ä»¤ç‰Œã€‚è¯·æ±‚éœ€è·å–ä»¤ç‰Œæ‰èƒ½å¤„ç†ï¼Œæ¡¶ç©ºæ—¶è¯·æ±‚è¢«æ‹’ç»ã€‚æ¡¶å®¹é‡å…è®¸æš‚å­˜ä»¤ç‰Œï¼Œæ”¯æŒçªå‘æµé‡ï¼ˆå¦‚æ¡¶å®¹é‡100ï¼Œå¯ç¬é—´å¤„ç†100è¯·æ±‚ï¼‰&lt;a class="link" href="@ref" &gt;1,3,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼š&lt;strong&gt;å…¼é¡¾å¹³æ»‘ä¸çªå‘æµé‡&lt;/strong&gt;ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå®ç°å¤æ‚åº¦è¾ƒé«˜ï¼ˆéœ€ç®¡ç†ä»¤ç‰Œç”Ÿæˆå’Œæ¶ˆè€—ï¼‰&lt;a class="link" href="@ref" &gt;3,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé«˜å¹¶å‘åœºæ™¯ï¼ˆå¦‚ç§’æ€ç³»ç»Ÿã€çƒ­ç‚¹APIï¼‰ï¼Œå…¸å‹å·¥å…·æœ‰Guavaçš„&lt;code&gt;RateLimiter&lt;/code&gt;&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-è¿›é˜¶ç®—æ³•ä¸åˆ†å¸ƒå¼åœºæ™¯"&gt;ğŸ“Š &lt;strong&gt;è¿›é˜¶ç®—æ³•ä¸åˆ†å¸ƒå¼åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ»‘åŠ¨æ—¥å¿—ç®—æ³•ï¼ˆSliding Logï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šè®°å½•æ¯ä¸ªè¯·æ±‚çš„æ—¶é—´æˆ³ï¼ŒåŠ¨æ€ç»Ÿè®¡æ—¶é—´çª—å£å†…çš„è¯·æ±‚æ•°ï¼ˆå¦‚Redisçš„&lt;code&gt;ZSET&lt;/code&gt;å­˜å‚¨æ—¶é—´æˆ³ï¼‰&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šç²¾åº¦é«˜ï¼Œå¯ç²¾ç¡®åˆ°æ¯«ç§’çº§æ§æµã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šå­˜å‚¨å’Œè®¡ç®—æˆæœ¬é«˜ï¼Œä¸é€‚åˆè¶…é«˜å¹¶å‘&lt;a class="link" href="@ref" &gt;4,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç²¾ç»†åŒ–é™æµï¼ˆå¦‚VIPç”¨æˆ·æ¥å£ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼é™æµ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å®ç°æ–¹å¼ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Redis+Luaè„šæœ¬&lt;/strong&gt;ï¼šé€šè¿‡åŸå­æ“ä½œç»Ÿè®¡é›†ç¾¤è¯·æ±‚é‡ï¼ˆå¦‚&lt;code&gt;INCR&lt;/code&gt;+&lt;code&gt;EXPIRE&lt;/code&gt;ï¼‰&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘å…³å±‚é›†æˆ&lt;/strong&gt;ï¼šå¦‚Spring Cloud Gatewayçš„&lt;code&gt;RequestRateLimiter&lt;/code&gt;è¿‡æ»¤å™¨ï¼ŒåŸºäºä»¤ç‰Œæ¡¶å®ç°&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‘æˆ˜&lt;/strong&gt;ï¼šéœ€è§£å†³æ—¶é’ŸåŒæ­¥ã€åˆ†å¸ƒå¼é”æ€§èƒ½ç“¶é¢ˆ&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-ç®—æ³•å¯¹æ¯”ä¸é€‰å‹æŒ‡å—-1"&gt;âš–ï¸ &lt;strong&gt;ç®—æ³•å¯¹æ¯”ä¸é€‰å‹æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç®—æ³•&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;æµé‡å¹³æ»‘æ€§&lt;/th&gt;
&lt;th&gt;çªå‘æµé‡æ”¯æŒ&lt;/th&gt;
&lt;th&gt;ç²¾åº¦&lt;/th&gt;
&lt;th&gt;å®ç°å¤æ‚åº¦&lt;/th&gt;
&lt;th&gt;å…¸å‹åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›ºå®šçª—å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;td&gt;ä½é¢‘æ¥å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ»‘åŠ¨çª—å£&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âš ï¸æœ‰é™&lt;/td&gt;
&lt;td&gt;ä¸­é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;APIç½‘å…³ã€æ”¯ä»˜æ¥å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¼æ¡¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ…âœ…&lt;/td&gt;
&lt;td&gt;âŒ&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“è®¿é—®ã€æµé‡æ•´å½¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä»¤ç‰Œæ¡¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âœ…âœ…&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;é«˜&lt;/td&gt;
&lt;td&gt;ç§’æ€ç³»ç»Ÿã€é«˜å¹¶å‘API&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ»‘åŠ¨æ—¥å¿—&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;âœ…&lt;/td&gt;
&lt;td&gt;âš ï¸æœ‰é™&lt;/td&gt;
&lt;td&gt;æé«˜&lt;/td&gt;
&lt;td&gt;æé«˜&lt;/td&gt;
&lt;td&gt;ç²¾ç»†åŒ–æ§æµï¼ˆå¦‚æŒ‰ç”¨æˆ·IDï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="é€‰å‹å»ºè®®-1"&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;ï¼š
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¿½æ±‚ç®€å•&lt;/strong&gt;ï¼šä½é¢‘åœºæ™¯ç”¨å›ºå®šçª—å£ï¼ˆå¦‚&lt;code&gt;Nginx&lt;/code&gt;çš„&lt;code&gt;limit_req&lt;/code&gt;æ¨¡å—ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹³è¡¡çªå‘ä¸ç¨³å®š&lt;/strong&gt;ï¼šä»¤ç‰Œæ¡¶ï¼ˆå¦‚ç”µå•†æŠ¢è´­ï¼‰&lt;a class="link" href="@ref" &gt;10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»å¯¹å¹³æ»‘è¾“å‡º&lt;/strong&gt;ï¼šæ¼æ¡¶ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹é€Ÿç‡æ§åˆ¶ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼ç¯å¢ƒ&lt;/strong&gt;ï¼šRedisé›†ç¾¤+æ»‘åŠ¨çª—å£/ä»¤ç‰Œæ¡¶&lt;a class="link" href="@ref" &gt;11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å®è·µæŠ€å·§ä¸ä¼˜åŒ–"&gt;âš™ï¸ &lt;strong&gt;å®è·µæŠ€å·§ä¸ä¼˜åŒ–&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;åŠ¨æ€è°ƒå‚ï¼š
&lt;ul&gt;
&lt;li&gt;åŸºäºå®æ—¶ç›‘æ§ï¼ˆå¦‚QPSã€ç³»ç»Ÿè´Ÿè½½ï¼‰åŠ¨æ€è°ƒæ•´é™æµé˜ˆå€¼&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ï¼šCPUè¶…è¿‡80%æ—¶è‡ªåŠ¨é™ä½ä»¤ç‰Œç”Ÿæˆé€Ÿç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åˆ†çº§é™æµï¼š
&lt;ul&gt;
&lt;li&gt;æ ¸å¿ƒæ¥å£ä¸éæ ¸å¿ƒæ¥å£è®¾ç½®ä¸åŒé˜ˆå€¼ï¼Œä¿è¯æ ¸å¿ƒä¸šåŠ¡å¯ç”¨&lt;a class="link" href="@ref" &gt;9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é™çº§ç­–ç•¥ç»“åˆï¼š
&lt;ul&gt;
&lt;li&gt;é™æµåè¿”å›å…œåº•æ•°æ®ï¼ˆå¦‚ç¼“å­˜æ•°æ®ï¼‰ã€æ’é˜Ÿé¡µé¢æˆ–é‡è¯•æŒ‡ä»¤&lt;a class="link" href="@ref" &gt;1,9&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-9"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;é™æµç®—æ³•çš„æ ¸å¿ƒç›®æ ‡æ˜¯åœ¨&lt;strong&gt;ç³»ç»Ÿç¨³å®šæ€§&lt;/strong&gt;ä¸&lt;strong&gt;æµé‡åˆ©ç”¨ç‡&lt;/strong&gt;é—´å¯»æ±‚å¹³è¡¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è®¡æ•°å™¨/æ»‘åŠ¨çª—å£&lt;/strong&gt;ï¼šé€‚åˆç®€å•åœºæ™¯æˆ–åˆ†å¸ƒå¼ç¯å¢ƒ&lt;a class="link" href="@ref" &gt;4,11&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¼æ¡¶&lt;/strong&gt;ï¼šå¼ºçº¦æŸåœºæ™¯çš„é¦–é€‰ï¼ˆå¦‚é‡‘èç³»ç»Ÿï¼‰&lt;a class="link" href="@ref" &gt;3,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»¤ç‰Œæ¡¶&lt;/strong&gt;ï¼šé«˜å¹¶å‘ç³»ç»Ÿçš„é»„é‡‘æ ‡å‡†ï¼ˆå¦‚ç”µå•†ã€ç¤¾äº¤å¹³å°ï¼‰&lt;a class="link" href="@ref" &gt;1,10&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å®é™…åº”ç”¨ä¸­ï¼Œå¯ç»“åˆå¤šç§ç®—æ³•ï¼ˆå¦‚ç½‘å…³å±‚ç”¨ä»¤ç‰Œæ¡¶ï¼ŒæœåŠ¡å†…ç”¨æ»‘åŠ¨çª—å£ï¼‰ï¼Œå¹¶é€šè¿‡å‹æµ‹ç¡®å®šé˜ˆå€¼ã€‚æ¨èå·¥å…·ï¼š&lt;code&gt;Nginx&lt;/code&gt;ï¼ˆå››å±‚/ä¸ƒå±‚é™æµï¼‰ã€&lt;code&gt;Spring Cloud Gateway&lt;/code&gt;ï¼ˆåˆ†å¸ƒå¼ä»¤ç‰Œæ¡¶ï¼‰ã€&lt;code&gt;Redis&lt;/code&gt;+&lt;code&gt;Lua&lt;/code&gt;è„šæœ¬ï¼ˆé«˜ç²¾åº¦åˆ†å¸ƒå¼é™æµï¼‰&lt;a class="link" href="@ref" &gt;6,11&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="æœåŠ¡é™çº§ç†”æ–­"&gt;æœåŠ¡é™çº§ã€ç†”æ–­
&lt;/h2&gt;&lt;p&gt;æœåŠ¡é™çº§ä¸ç†”æ–­æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­ä¿éšœç³»ç»Ÿç¨³å®šæ€§å’Œå¯ç”¨æ€§çš„æ ¸å¿ƒå®¹é”™æœºåˆ¶ã€‚å®ƒä»¬é€šè¿‡ä¸åŒçš„ç­–ç•¥åº”å¯¹é«˜å¹¶å‘ã€ä¾èµ–æ•…éšœç­‰å¼‚å¸¸åœºæ™¯ï¼Œé˜²æ­¢ç³»ç»Ÿé›ªå´©ã€‚ä»¥ä¸‹ä»åŸç†ã€åŒºåˆ«ã€å®è·µåŠå·¥ä¸šåº”ç”¨å±•å¼€æ·±åº¦è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ç†”æ–­circuit-breakeræ•…éšœéš”ç¦»çš„ä¿é™©ä¸"&gt;âš™ï¸ &lt;strong&gt;ç†”æ–­ï¼ˆCircuit Breakerï¼‰ï¼šæ•…éšœéš”ç¦»çš„â€œä¿é™©ä¸â€&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="æ ¸å¿ƒåŸç†"&gt;&lt;strong&gt;æ ¸å¿ƒåŸç†&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;ç†”æ–­å™¨æ¨¡ä»¿ç”µè·¯ä¿é™©ä¸æœºåˆ¶ï¼Œå½“ä¾èµ–æœåŠ¡æ•…éšœè¶…è¿‡é˜ˆå€¼æ—¶ï¼Œä¸»åŠ¨åˆ‡æ–­è°ƒç”¨é“¾è·¯ï¼Œé¿å…èµ„æºè€—å°½å¼•å‘é›ªå´©ã€‚å…¶æ ¸å¿ƒæ˜¯&lt;strong&gt;çŠ¶æ€æœºæ¨¡å‹&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…³é—­ï¼ˆClosedï¼‰&lt;/strong&gt;ï¼šæ­£å¸¸è°ƒç”¨ï¼ŒæŒç»­ç›‘æ§å¤±è´¥ç‡ï¼ˆå¦‚é”™è¯¯ç‡ &amp;gt; 50%ï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰“å¼€ï¼ˆOpenï¼‰&lt;/strong&gt;ï¼šç›´æ¥æ‹’ç»è¯·æ±‚ï¼Œä¸è°ƒç”¨æ•…éšœæœåŠ¡ï¼ˆå¦‚å†·å´30ç§’ï¼‰&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠå¼€ï¼ˆHalf-Openï¼‰&lt;/strong&gt;ï¼šè¯•æ¢æ€§æ”¾è¡Œå°‘é‡è¯·æ±‚ï¼ŒæˆåŠŸåˆ™å…³é—­ç†”æ–­ï¼Œå¤±è´¥åˆ™é‡æ–°æ‰“å¼€&lt;a class="link" href="@ref" &gt;4,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è§¦å‘æ¡ä»¶"&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯ç‡è¶…æ ‡&lt;/strong&gt;ï¼šä¾‹å¦‚10ç§’å†…é”™è¯¯è°ƒç”¨å æ¯” &amp;gt; 60%&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“åº”è¶…æ—¶&lt;/strong&gt;ï¼šå¦‚æ¥å£å¹³å‡å“åº”æ—¶é—´ &amp;gt; 2ç§’&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘è¿‡è½½&lt;/strong&gt;ï¼šçº¿ç¨‹æ± /è¿æ¥æ± èµ„æºè€—å°½&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å…¸å‹åº”ç”¨åœºæ™¯"&gt;&lt;strong&gt;å…¸å‹åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸‰æ–¹æ”¯ä»˜æ¥å£è¿ç»­è¶…æ—¶ï¼Œè§¦å‘ç†”æ–­é¿å…æ”¯ä»˜æœåŠ¡é˜»å¡&lt;a class="link" href="@ref" &gt;2,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“è¿æ¥æ± è€—å°½æ—¶ï¼Œç†”æ–­è¯»åº“è¯·æ±‚ï¼Œä¿æŠ¤æ ¸å¿ƒå†™æ“ä½œ&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æœåŠ¡é™çº§degradationä¼˜é›…å¤±æ•ˆçš„å¤‡èƒæ–¹æ¡ˆ"&gt;ğŸ›¡ï¸ &lt;strong&gt;æœåŠ¡é™çº§ï¼ˆDegradationï¼‰ï¼šä¼˜é›…å¤±æ•ˆçš„â€œå¤‡èƒæ–¹æ¡ˆâ€&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="æ ¸å¿ƒç­–ç•¥"&gt;&lt;strong&gt;æ ¸å¿ƒç­–ç•¥&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;åœ¨ç³»ç»Ÿå‹åŠ›è¿‡å¤§æ—¶ï¼Œ&lt;strong&gt;ä¸»åŠ¨å…³é—­éæ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;ï¼Œç¡®ä¿æ ¸å¿ƒé“¾è·¯å¯ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½é™çº§&lt;/strong&gt;ï¼šå…³é—­å•†å“æ¨èã€ç§¯åˆ†å…‘æ¢ç­‰æ¬¡è¦åŠŸèƒ½&lt;a class="link" href="@ref" &gt;6,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é™çº§&lt;/strong&gt;ï¼šè¿”å›ç¼“å­˜æ•°æ®ï¼ˆå¦‚Redisï¼‰ã€é™æ€é»˜è®¤å€¼ï¼ˆå¦‚â€œç³»ç»Ÿç¹å¿™â€ï¼‰&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµç¨‹é™çº§&lt;/strong&gt;ï¼šç®€åŒ–ä¸šåŠ¡æµç¨‹ï¼ˆå¦‚å…å¯†æ”¯ä»˜è·³è¿‡é£æ§æ ¡éªŒï¼‰&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="è§¦å‘æ–¹å¼"&gt;&lt;strong&gt;è§¦å‘æ–¹å¼&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¢«åŠ¨è§¦å‘&lt;/strong&gt;ï¼šç”±ç†”æ–­ã€è¶…æ—¶æˆ–å¼‚å¸¸è‡ªåŠ¨æ¿€æ´»&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸»åŠ¨è§¦å‘&lt;/strong&gt;ï¼šåŸºäºç³»ç»Ÿè´Ÿè½½ï¼ˆå¦‚CPU &amp;gt; 80%ï¼‰æˆ–ä¸šåŠ¡ç­–ç•¥ï¼ˆå¦‚å¤§ä¿ƒå‰é¢„è®¾ï¼‰&lt;a class="link" href="@ref" &gt;5,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç”¨æˆ·ä½“éªŒè®¾è®¡"&gt;&lt;strong&gt;ç”¨æˆ·ä½“éªŒè®¾è®¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— æ„ŸçŸ¥é™çº§&lt;/strong&gt;ï¼šç”¨ç¼“å­˜æ•°æ®æ›¿ä»£å®æ—¶æŸ¥è¯¢ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‹å¥½æç¤º&lt;/strong&gt;ï¼šå‰ç«¯å±•ç¤ºâ€œæœåŠ¡ç¹å¿™ï¼Œå±•ç¤ºé»˜è®¤æ¨èâ€&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-ç†”æ–­-vs-é™çº§æ ¸å¿ƒåŒºåˆ«ä¸ååŒ"&gt;âš–ï¸ &lt;strong&gt;ç†”æ–­ vs é™çº§ï¼šæ ¸å¿ƒåŒºåˆ«ä¸ååŒ&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»´åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;ç†”æ–­&lt;/th&gt;
&lt;th&gt;é™çº§&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç›®æ ‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;é˜²æ­¢æ•…éšœæ‰©æ•£ï¼ˆç³»ç»Ÿä¿æŠ¤ï¼‰&lt;/td&gt;
&lt;td&gt;ä¿éšœæ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸šåŠ¡ä¿åº•ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è§¦å‘æ¡ä»¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–æœåŠ¡æ•…éšœï¼ˆé”™è¯¯ç‡/è¶…æ—¶ï¼‰&lt;/td&gt;
&lt;td&gt;èµ„æºä¸è¶³æˆ–ä¸»åŠ¨é™çº§ç­–ç•¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä½œç”¨èŒƒå›´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å•ç‚¹æœåŠ¡è°ƒç”¨é“¾è·¯&lt;/td&gt;
&lt;td&gt;å…¨å±€åŠŸèƒ½æ¨¡å—æˆ–ä¸šåŠ¡æµç¨‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¢å¤æœºåˆ¶&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨æ¢å¤ï¼ˆåŠå¼€çŠ¶æ€æ¢æµ‹ï¼‰&lt;/td&gt;
&lt;td&gt;éœ€äººå·¥ä»‹å…¥æˆ–è´Ÿè½½é™ä½åæ¢å¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹åŠ¨ä½œ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å¿«é€Ÿå¤±è´¥ï¼ˆFail-Fastï¼‰&lt;/td&gt;
&lt;td&gt;é™é»˜å¤±è´¥ï¼ˆFail-Silentï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ååŒæµç¨‹&lt;/strong&gt;ï¼š&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;graph TD
A[ç”¨æˆ·è¯·æ±‚] --&amp;gt; B[è°ƒç”¨æœåŠ¡X]
B -- ç†”æ–­è§¦å‘ --&amp;gt; C[åœæ­¢è°ƒç”¨X]
C --&amp;gt; D[æ‰§è¡Œé™çº§é€»è¾‘]
D --&amp;gt; E[è¿”å›ç¼“å­˜/é»˜è®¤å€¼]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¤ºä¾‹ï¼šç”µå•†è®¢å•æœåŠ¡è°ƒç”¨æ”¯ä»˜æ¥å£è¶…æ—¶ â†’ ç†”æ–­æ”¯ä»˜è°ƒç”¨ â†’ é™çº§ä¸ºâ€œå»¶è¿Ÿæ”¯ä»˜â€æç¤º&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä¸šçº§å®è·µä¸æ¡†æ¶"&gt;ğŸ­ &lt;strong&gt;å·¥ä¸šçº§å®è·µä¸æ¡†æ¶&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ç†”æ–­å®ç°resilience4jsentinel"&gt;&lt;strong&gt;ç†”æ–­å®ç°ï¼ˆResilience4j/Sentinelï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// Resilience4j ç†”æ–­é…ç½®
CircuitBreakerConfig config = CircuitBreakerConfig.custom()
.failureRateThreshold(50) // é”™è¯¯ç‡é˜ˆå€¼50%
.waitDurationInOpenState(Duration.ofSeconds(30))
.slidingWindowType(SlidingWindowType.COUNT_BASED)
.build();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å…³é”®ä¼˜åŒ–&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€é˜ˆå€¼&lt;/strong&gt;ï¼šæ ¹æ®P99å»¶è¿Ÿè‡ªåŠ¨è°ƒæ•´ç†”æ–­é˜ˆå€¼&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸ç™½åå•&lt;/strong&gt;ï¼šå¿½ç•¥ä¸šåŠ¡å¼‚å¸¸ï¼ˆå¦‚å‚æ•°é”™è¯¯ï¼‰ï¼Œé¿å…è¯¯è§¦å‘&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é™çº§å®ç°spring-cloud-gateway--redis"&gt;&lt;strong&gt;é™çº§å®ç°ï¼ˆSpring Cloud Gateway + Redisï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// Feignå®¢æˆ·ç«¯é™çº§ç¤ºä¾‹
@FeignClient(name = &amp;#34;user-service&amp;#34;, fallback = UserFallback.class)
public interface UserService {
@GetMapping(&amp;#34;/user/{id}&amp;#34;)
User getUser(@PathVariable Long id);
}
@Component
public class UserFallback implements UserService {
@Override
public User getUser(Long id) {
return Redis.get(&amp;#34;user:&amp;#34; + id); // è¿”å›ç¼“å­˜æ•°æ®
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¤šçº§é™çº§ç­–ç•¥&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Level1ï¼šè¿”å›æœ¬åœ°ç¼“å­˜&lt;/li&gt;
&lt;li&gt;Level2ï¼šè¿”å›é€šç”¨é»˜è®¤å€¼&lt;/li&gt;
&lt;li&gt;Level3ï¼šå…³é—­éæ ¸å¿ƒåŠŸèƒ½&lt;a class="link" href="@ref" &gt;6,8&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å¤§å‚å®æˆ˜ç»éªŒæŠ–éŸ³é˜¿é‡Œè…¾è®¯"&gt;ğŸ“Š &lt;strong&gt;å¤§å‚å®æˆ˜ç»éªŒï¼ˆæŠ–éŸ³/é˜¿é‡Œ/è…¾è®¯ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ç†”æ–­ç²¾ç»†åŒ–&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æŠ–éŸ³ï¼šåŸºäºå†å²æµé‡é¢„æµ‹ç†”æ–­é˜ˆå€¼ï¼ŒåŠ¨æ€è°ƒæ•´æ¢æµ‹è¯·æ±‚æ¯”ä¾‹&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;é˜¿é‡Œï¼šç†”æ–­æ¢å¤åï¼Œé€æ­¥æ”¾é‡ï¼ˆå¦‚10% â†’ 50% â†’ 100%ï¼‰é¿å…äºŒæ¬¡é›ªå´©&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;é™çº§ç”¨æˆ·ä½“éªŒ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è…¾è®¯è§†é¢‘ï¼šåœ¨CDNæ•…éšœæ—¶é™çº§ä¸ºä½ç”»è´¨ï¼Œä¿è¯è§†é¢‘å¯æ’­&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;æ‹¼å¤šå¤šï¼šå¤§ä¿ƒæœŸé—´å…³é—­â€œè´­ç‰©è½¦åŠ¨ç”»ç‰¹æ•ˆâ€ï¼Œå‡å°‘å‰ç«¯èµ„æºæ¶ˆè€—&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;å…¨é“¾è·¯ç›‘æ§&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;åä¸ºï¼šé€šè¿‡APMå·¥å…·ï¼ˆå¦‚SkyWalkingï¼‰è¿½è¸ªç†”æ–­/é™çº§é“¾è·¯ï¼Œå®æ—¶å‘Šè­¦&lt;a class="link" href="@ref" &gt;1,2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-é¿å‘æŒ‡å—"&gt;âš ï¸ &lt;strong&gt;é¿å‘æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç†”æ–­è¯¯è§¦å‘&lt;/strong&gt;ï¼šå¿½ç•¥ä¸šåŠ¡å¼‚å¸¸ï¼ˆå¦‚&lt;code&gt;InvalidRequestException&lt;/code&gt;ï¼‰ï¼Œä»…ç›‘æ§è¶…æ—¶å’Œç³»ç»Ÿé”™è¯¯&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™çº§è¿‡åº¦&lt;/strong&gt;ï¼šé¿å…æ ¸å¿ƒåŠŸèƒ½é™çº§ï¼ˆå¦‚æ”¯ä»˜ä¸å¯ç”¨ï¼‰ï¼Œéœ€æ˜ç¡®ä¼˜å…ˆçº§åˆ’åˆ†&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¢å¤æ»å&lt;/strong&gt;ï¼šç†”æ–­åŠå¼€çŠ¶æ€éœ€æ­é…å¥åº·æ£€æŸ¥ï¼Œè‡ªåŠ¨æ¢å¤æœåŠ¡è°ƒç”¨&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§ç¼ºå¤±&lt;/strong&gt;ï¼šç†”æ–­åˆ‡æ¢ã€é™çº§æ¯”ä¾‹ç­‰æŒ‡æ ‡æ¥å…¥Prometheusï¼Œé©±åŠ¨ç­–ç•¥ä¼˜åŒ–&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-10"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç†”æ–­æ˜¯ç›¾&lt;/strong&gt;ï¼šå¿«é€Ÿéš”ç¦»æ•…éšœæœåŠ¡ï¼Œé˜²æ­¢é›ªå´©æ‰©æ•£ï¼ˆé€‚ç”¨&lt;strong&gt;ä¾èµ–æ•…éšœ&lt;/strong&gt;åœºæ™¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™çº§æ˜¯è·¯&lt;/strong&gt;ï¼šç‰ºç‰²éæ ¸å¿ƒåŠŸèƒ½ï¼Œä¿éšœä¸»é“¾è·¯å¯ç”¨ï¼ˆé€‚ç”¨&lt;strong&gt;èµ„æºè¿‡è½½&lt;/strong&gt;åœºæ™¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ä½³å®è·µï¼š
&lt;ul&gt;
&lt;li&gt;ç½‘å…³å±‚é›†æˆç†”æ–­ï¼ˆå¦‚Spring Cloud Gatewayï¼‰&lt;a class="link" href="@ref" &gt;5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¸šåŠ¡å±‚é™çº§ç­–ç•¥ä¸ç¼“å­˜/æ¶ˆæ¯é˜Ÿåˆ—è”åŠ¨ï¼ˆå¦‚Redis + MQï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒå…¬å¼ï¼š&lt;strong&gt;ç›‘æ§ â†’ ç†”æ–­ â†’ é™çº§ â†’ æ¢å¤ â†’ ä¼˜åŒ–&lt;/strong&gt; &lt;a class="link" href="@ref" &gt;1,2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;é™„ï¼šæŠ€æœ¯é€‰å‹æ¨è&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Javaç”Ÿæ€ï¼šResilience4jï¼ˆç†”æ–­ï¼‰ + Sentinelï¼ˆé™çº§é™æµï¼‰&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;äº‘åŸç”Ÿï¼šIstioï¼ˆç½‘æ ¼å±‚ç†”æ–­ï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id="åˆ†å¸ƒå¼id"&gt;åˆ†å¸ƒå¼ID
&lt;/h2&gt;&lt;p&gt;åˆ†å¸ƒå¼IDæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç¡®ä¿å…¨å±€å”¯ä¸€æ ‡è¯†çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå°¤å…¶åœ¨å¤šèŠ‚ç‚¹ã€é«˜å¹¶å‘åœºæ™¯ä¸‹è‡³å…³é‡è¦ã€‚ä»¥ä¸‹ä»åŸºç¡€åˆ°è¿›é˜¶çš„è§£å†³æ–¹æ¡ˆåˆ†ç±»è§£æï¼Œç»“åˆåŸç†ã€ä¼˜ç¼ºç‚¹åŠé€‚ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-åŸºç¡€è§£å†³æ–¹æ¡ˆ"&gt;âš™ï¸ &lt;strong&gt;åŸºç¡€è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="uuidé€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦"&gt;&lt;strong&gt;UUIDï¼ˆé€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåŸºäºæ—¶é—´æˆ³ã€MACåœ°å€å’Œéšæœºæ•°ç”Ÿæˆ128ä½å­—ç¬¦ä¸²ï¼ˆå¦‚ &lt;code&gt;f47ac10b-58cc-4372-a567-0e02b2c3d479&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæœ¬åœ°ç”Ÿæˆæ— ç½‘ç»œä¾èµ–ï¼Œæ€§èƒ½é«˜ï¼ˆ200ä¸‡/ç§’ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;æ— åºæ€§å¯¼è‡´æ•°æ®åº“ç´¢å¼•æ•ˆç‡ä¸‹é™30%&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;128ä½å­˜å‚¨ç©ºé—´å¤§ï¼ˆ36å­—ç¬¦ï¼‰ï¼Œä¸é€‚åˆä½œä¸ºä¸»é”®&lt;a class="link" href="@ref" &gt;2,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæ—¥å¿—è¿½è¸ªã€ä¸´æ—¶ä¼šè¯IDç­‰éæ ¸å¿ƒä¸šåŠ¡&lt;a class="link" href="@ref" &gt;4,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ•°æ®åº“è‡ªå¢id"&gt;&lt;strong&gt;æ•°æ®åº“è‡ªå¢ID&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåˆ©ç”¨æ•°æ®åº“çš„ &lt;code&gt;AUTO_INCREMENT&lt;/code&gt; ç”Ÿæˆè¿ç»­IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šå®ç°ç®€å•ï¼ŒIDæœ‰åºä¸”ç´¢å¼•é«˜æ•ˆ&lt;a class="link" href="@ref" &gt;2,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;å•ç‚¹æ•…éšœé£é™©ï¼Œæ•°æ®åº“å®•æœºå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ€§èƒ½ç“¶é¢ˆï¼ˆæ¯ç§’ç”Ÿæˆé‡å—é™äºæ•°æ®åº“å†™å…¥èƒ½åŠ›ï¼‰&lt;a class="link" href="@ref" &gt;3,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŒ–æ–¹æ¡ˆ&lt;/strong&gt;ï¼šåˆ†åº“åˆ†è¡¨æ—¶è®¾ç½®ä¸åŒåˆå§‹å€¼å’Œæ­¥é•¿ï¼ˆå¦‚DB1åˆå§‹1æ­¥é•¿2ï¼ŒDB2åˆå§‹2æ­¥é•¿2ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-è¿›é˜¶è§£å†³æ–¹æ¡ˆ"&gt;ğŸš€ &lt;strong&gt;è¿›é˜¶è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="å·æ®µæ¨¡å¼segment"&gt;&lt;strong&gt;å·æ®µæ¨¡å¼ï¼ˆSegmentï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šä»æ•°æ®åº“æ‰¹é‡è·å–IDæ®µï¼ˆå¦‚1-1000ï¼‰ï¼Œæœ¬åœ°ç¼“å­˜å¹¶é€æ­¥åˆ†é…&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;å‡å°‘æ•°æ®åº“è®¿é—®ï¼ˆå•æ¬¡è·å–æ”¯æŒåƒæ¬¡IDç”Ÿæˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ€§èƒ½æå‡è‡³10ä¸‡/ç§’ï¼Œæ”¯æŒé«˜å¹¶å‘&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæœåŠ¡é‡å¯å¯èƒ½å¯¼è‡´IDç©ºæ´ï¼ˆæœªä½¿ç”¨çš„å·æ®µä¸¢å¤±ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å·¥ä¸šå®è·µ&lt;/strong&gt;ï¼šç¾å›¢Leafé€šè¿‡åŒBufferé¢„åŠ è½½å·æ®µï¼Œé¿å…åˆ†é…ç­‰å¾…&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="redisè‡ªå¢id"&gt;&lt;strong&gt;Redisè‡ªå¢ID&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåˆ©ç”¨ &lt;code&gt;INCR&lt;/code&gt; æˆ– &lt;code&gt;INCRBY&lt;/code&gt; å‘½ä»¤åŸå­æ€§ç”Ÿæˆé€’å¢IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;ï¼šæ€§èƒ½ä¼˜å¼‚ï¼ˆ15ä¸‡/ç§’ï¼‰ï¼Œå¤©ç„¶æœ‰åº&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;ä¾èµ–Rediså¯ç”¨æ€§ï¼ŒæŒä¹…åŒ–é—®é¢˜å¯èƒ½å¯¼è‡´IDé‡å¤ï¼ˆRDBå¿«ç…§ä¸¢å¤±ï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é›†ç¾¤éƒ¨ç½²éœ€è®¾ç½®æ­¥é•¿ï¼ˆå¦‚èŠ‚ç‚¹1æ­¥é•¿5ï¼ŒèŠ‚ç‚¹2æ­¥é•¿5ï¼‰&lt;a class="link" href="@ref" &gt;2&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šæŒ‰æ—¥ç”Ÿæˆçš„æµæ°´å·ï¼ˆå¦‚è®¢å•å·=æ—¥æœŸ+Redisè‡ªå¢æ•°ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é›ªèŠ±ç®—æ³•snowflake"&gt;&lt;strong&gt;é›ªèŠ±ç®—æ³•ï¼ˆSnowflakeï¼‰&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼š64ä½ç»“æ„ = &lt;strong&gt;æ—¶é—´æˆ³ï¼ˆ41ä½ï¼‰&lt;/strong&gt; + &lt;strong&gt;æœºå™¨IDï¼ˆ10ä½ï¼‰&lt;/strong&gt; + &lt;strong&gt;åºåˆ—å·ï¼ˆ12ä½ï¼‰&lt;/strong&gt;&lt;a class="link" href="@ref" &gt;1,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹ï¼š
&lt;ul&gt;
&lt;li&gt;é«˜æ€§èƒ½ï¼ˆå•æœº50ä¸‡/ç§’ï¼‰ï¼Œè¶‹åŠ¿é€’å¢åˆ©äºç´¢å¼•ã€‚&lt;/li&gt;
&lt;li&gt;æ— ä¸­å¿ƒä¾èµ–ï¼Œå¯ç”¨æ€§é«˜&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;ï¼šæ—¶é’Ÿå›æ‹¨å¯èƒ½å¯¼è‡´IDé‡å¤ï¼ˆéœ€é€šè¿‡å¼‚å¸¸æ£€æµ‹æˆ–NTPåŒæ­¥è§£å†³ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ”¹è¿›æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;ç™¾åº¦UidGeneratorï¼šæ”¯æŒè‡ªå®šä¹‰æ—¶é—´æˆ³å’Œæœºå™¨IDä½æ•°ï¼Œååé‡æå‡è‡³600ä¸‡/ç§’&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ·»åŠ ä¸šåŠ¡æ ‡è¯†ä½ï¼ˆå¦‚ç”µå•†è®¢å•IDå‰4ä½æ ‡è¯†ä¸šåŠ¡ç±»å‹ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å·¥ä¸šçº§è§£å†³æ–¹æ¡ˆ"&gt;ğŸ­ &lt;strong&gt;å·¥ä¸šçº§è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="ç¾å›¢leaf"&gt;&lt;strong&gt;ç¾å›¢Leaf&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶æ„&lt;/strong&gt;ï¼šæ”¯æŒå·æ®µæ¨¡å¼ä¸Snowflakeæ¨¡å¼&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–ï¼š
&lt;ul&gt;
&lt;li&gt;å·æ®µæ¨¡å¼ï¼šåŒBufferé¢„åŠ è½½ã€DBåˆ†åº“åˆ†è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;Snowflakeæ¨¡å¼ï¼šZooKeeperåˆ†é…æœºå™¨IDï¼Œé¿å…æ‰‹åŠ¨é…ç½®&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;ï¼šé‡‘èäº¤æ˜“ç­‰é«˜ä¸€è‡´æ€§éœ€æ±‚ç³»ç»Ÿ&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æ»´æ»´tinyid"&gt;&lt;strong&gt;æ»´æ»´TinyID&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šåŸºäºå·æ®µæ¨¡å¼ï¼Œæ”¯æŒHTTP/RPCè°ƒç”¨è·å–IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;ï¼šåŠ¨æ€æ‰©å®¹ã€å¤šèŠ‚ç‚¹åè°ƒï¼Œé€‚åˆç‰©è”ç½‘è®¾å¤‡æ ‡è¯†&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ksuidcuid"&gt;&lt;strong&gt;KSUID/CUID&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;KSUID&lt;/strong&gt;ï¼šç»“åˆæ—¶é—´æˆ³å’Œéšæœºæ•°ï¼ˆå¦‚ &lt;code&gt;0o5Fs0EELR0fUjHjbCnEtdUwQe3&lt;/code&gt;ï¼‰ï¼Œå¯æ’åºä¸”æ— å†²çªé£é™©&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CUID&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯ç”Ÿæˆå¯è¯»IDï¼ˆå¦‚ &lt;code&gt;ckp7qd9g7000001mi5myb8zfp&lt;/code&gt;ï¼‰ï¼Œé€‚ç”¨äºå‰ç«¯åº”ç”¨&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹æŒ‡å—"&gt;âš–ï¸ &lt;strong&gt;æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰å‹æŒ‡å—&lt;/strong&gt;
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;ååé‡&lt;/th&gt;
&lt;th&gt;æœ‰åºæ€§&lt;/th&gt;
&lt;th&gt;ä¾èµ–é¡¹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;UUID&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;200ä¸‡/ç§’&lt;/td&gt;
&lt;td&gt;æ— åº&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;æ—¥å¿—è¿½è¸ªã€ä¸´æ—¶ID&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Redis&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;15ä¸‡/ç§’&lt;/td&gt;
&lt;td&gt;ä¸¥æ ¼é€’å¢&lt;/td&gt;
&lt;td&gt;Redis&lt;/td&gt;
&lt;td&gt;æŒ‰æ—¥æµæ°´å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å·æ®µæ¨¡å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10ä¸‡/ç§’&lt;/td&gt;
&lt;td&gt;åˆ†æ®µé€’å¢&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“&lt;/td&gt;
&lt;td&gt;ç”¨æˆ·IDã€é‡‘èäº¤æ˜“ï¼ˆLeafä¼˜åŒ–ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Snowflake&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;50ä¸‡/ç§’&lt;/td&gt;
&lt;td&gt;è¶‹åŠ¿é€’å¢&lt;/td&gt;
&lt;td&gt;æ—¶é’ŸåŒæ­¥&lt;/td&gt;
&lt;td&gt;ç”µå•†è®¢å•ã€é«˜å¹¶å‘ä¸šåŠ¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;KSUID&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;100ä¸‡/ç§’&lt;/td&gt;
&lt;td&gt;æ—¶é—´æœ‰åº&lt;/td&gt;
&lt;td&gt;æ— &lt;/td&gt;
&lt;td&gt;åˆ†å¸ƒå¼æ—¥å¿—ã€æ’åºéœ€æ±‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="é€‰å‹å»ºè®®-2"&gt;&lt;strong&gt;é€‰å‹å»ºè®®&lt;/strong&gt;ï¼š
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç”µå•†è®¢å•&lt;/strong&gt;ï¼šSnowflakeï¼ˆè¶‹åŠ¿é€’å¢ + é«˜æ€§èƒ½ï¼‰&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡‘èäº¤æ˜“&lt;/strong&gt;ï¼šLeaf-Segmentï¼ˆåŒBufferé¢„åŠ è½½ + é«˜å¯ç”¨ï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰©è”ç½‘è®¾å¤‡&lt;/strong&gt;ï¼šTinyIDï¼ˆåŠ¨æ€æ‰©ç¼©å®¹ + å¤šèŠ‚ç‚¹åè°ƒï¼‰&lt;a class="link" href="@ref" &gt;1,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯ç”Ÿæˆ&lt;/strong&gt;ï¼šCUIDï¼ˆå‰ç«¯è‡ªä¸»ç”Ÿæˆ + å¯è¯»æ€§ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-è®¾è®¡åŸåˆ™ä¸å‰æ²¿è¶‹åŠ¿"&gt;ğŸ’¡ &lt;strong&gt;è®¾è®¡åŸåˆ™ä¸å‰æ²¿è¶‹åŠ¿&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;æ ¸å¿ƒåŸåˆ™ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å”¯ä¸€æ€§&lt;/strong&gt;ï¼šè·¨èŠ‚ç‚¹/æ—¶é—´æ— å†²çªï¼ˆå¦‚Snowflakeæœºå™¨IDéš”ç¦»ï¼‰&lt;a class="link" href="@ref" &gt;3,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯ç”¨æ€§&lt;/strong&gt;ï¼šé¿å…å•ç‚¹æ•…éšœï¼ˆå¦‚Leafå¤šèŠ‚ç‚¹éƒ¨ç½²ï¼‰&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ€§&lt;/strong&gt;ï¼šæ”¯æŒä¸šåŠ¡å¢é•¿ï¼ˆå¦‚KSUIDæ—¶é—´æˆ³æ”¯æŒ69å¹´ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;è¶‹åŠ¿ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ··åˆæ–¹æ¡ˆ&lt;/strong&gt;ï¼šSnowflake + å·æ®µæ¨¡å¼åº”å¯¹æ—¶é’Ÿå›æ‹¨ä¸åˆ†æ®µæ‰©å®¹&lt;a class="link" href="@ref" &gt;6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨å¢å¼º&lt;/strong&gt;ï¼šæ··æ·†IDç»“æ„é˜²æ­¢ä¸šåŠ¡ä¿¡æ¯æ³„éœ²ï¼ˆå¦‚è®¢å•é‡æ¨æµ‹ï¼‰&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;é¿å‘æŒ‡å—&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¶é’Ÿå›æ‹¨é—®é¢˜ï¼šSnowflakeéœ€ç»‘å®šNTPæœåŠ¡ + å¼‚å¸¸æ£€æµ‹æœºåˆ¶&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å·æ®µæµªè´¹ï¼šLeafåŠ¨æ€è°ƒæ•´æ­¥é•¿ï¼Œæ ¹æ®è´Ÿè½½é¢„æµ‹åˆ†é…&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚
åˆ†å¸ƒå¼IDä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ä¸šåŠ¡ä¸æ¶æ„çš„å¹³è¡¡ç»“æœã€‚å»ºè®®ç»“åˆå‹æµ‹ï¼ˆå¦‚JMeterï¼‰éªŒè¯æ–¹æ¡ˆæé™ï¼Œå¹¶é€šè¿‡APMå·¥å…·ï¼ˆSkyWalkingï¼‰ç›‘æ§IDå†²çªç‡ï¼ŒæŒç»­ä¼˜åŒ–&lt;a class="link" href="@ref" &gt;1,5&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id="é›ªèŠ±ç®—æ³•"&gt;é›ªèŠ±ç®—æ³•
&lt;/h2&gt;&lt;p&gt;Snowflake é›ªèŠ±ç®—æ³•æ˜¯ Twitter å¼€æºçš„åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆç®—æ³•ï¼Œé€šè¿‡æ—¶é—´æˆ³ã€æœºå™¨æ ‡è¯†å’Œåºåˆ—å·çš„ç»„åˆï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç”Ÿæˆå…¨å±€å”¯ä¸€ä¸”è¶‹åŠ¿é€’å¢çš„ IDã€‚å…¶æ ¸å¿ƒè®¾è®¡å…¼é¡¾é«˜æ€§èƒ½ä¸æœ‰åºæ€§ï¼Œé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼ˆå¦‚ç”µå•†è®¢å•ã€åˆ†å¸ƒå¼æ•°æ®åº“ï¼‰ã€‚ä»¥ä¸‹ä»åŸç†ã€é—®é¢˜ã€ä¼˜åŒ–åŠå·¥ä¸šå®è·µå±•å¼€åˆ†æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-ç®—æ³•åŸç†ä¸ç»“æ„"&gt;âš™ï¸ &lt;strong&gt;ç®—æ³•åŸç†ä¸ç»“æ„&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;Snowflake ç”Ÿæˆçš„ ID æ˜¯ä¸€ä¸ª &lt;strong&gt;64 ä½&lt;/strong&gt;çš„ long å‹æ•´æ•°ï¼Œç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;ç»„æˆéƒ¨åˆ†&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä½æ•°&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä½œç”¨&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å–å€¼èŒƒå›´&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¬¦å·ä½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;1 bit&lt;/td&gt;
&lt;td&gt;å›ºå®šä¸º 0ï¼ˆè¡¨ç¤ºæ­£æ•°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ—¶é—´æˆ³&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;41 bit&lt;/td&gt;
&lt;td&gt;è®°å½•ä¸èµ·å§‹æ—¶é—´ï¼ˆå¦‚ &lt;code&gt;2010-01-01&lt;/code&gt;ï¼‰çš„æ¯«ç§’å·®&lt;/td&gt;
&lt;td&gt;æœ€å¤šæ”¯æŒ &lt;strong&gt;69 å¹´&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æœºå™¨æ ‡è¯†&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;10 bit&lt;/td&gt;
&lt;td&gt;æ‹†åˆ†ä½ï¼š5 bit æ•°æ®ä¸­å¿ƒ ID + 5 bit èŠ‚ç‚¹ IDï¼ˆæ”¯æŒ &lt;strong&gt;1024 ä¸ªèŠ‚ç‚¹&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;æ•°æ®ä¸­å¿ƒï¼š0&lt;del&gt;31ï¼ŒèŠ‚ç‚¹ï¼š0&lt;/del&gt;31&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;åºåˆ—å·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;12 bit&lt;/td&gt;
&lt;td&gt;åŒä¸€æ¯«ç§’å†…çš„è‡ªå¢åºå·ï¼ˆæ¯æ¯«ç§’æœ€å¤šç”Ÿæˆ &lt;strong&gt;4096 ä¸ª ID&lt;/strong&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;0~4095&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿæˆæµç¨‹&lt;/strong&gt;ï¼š&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;è·å–å½“å‰æ¯«ç§’çº§æ—¶é—´æˆ³ &lt;code&gt;timestamp&lt;/code&gt;ï¼Œè®¡ç®—ä¸èµ·å§‹æ—¶é—´ &lt;code&gt;twepoch&lt;/code&gt;ï¼ˆå¦‚ &lt;code&gt;1288834974657L&lt;/code&gt;ï¼‰çš„å·®å€¼&lt;a class="link" href="@ref" &gt;1,7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥æ—¶é—´æˆ³å›æ‹¨ï¼ˆ&lt;code&gt;timestamp &amp;lt; lastTimestamp&lt;/code&gt;ï¼‰ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;åŒä¸€æ¯«ç§’å†…ï¼šåºåˆ—å· &lt;code&gt;sequence&lt;/code&gt; è‡ªå¢ï¼ˆ&lt;code&gt;sequence = (sequence + 1) &amp;amp; sequenceMask&lt;/code&gt;ï¼‰ï¼Œè‹¥æº¢å‡ºåˆ™ç­‰å¾…ä¸‹ä¸€æ¯«ç§’&lt;a class="link" href="@ref" &gt;4,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ‹¼æ¥å„éƒ¨åˆ†ï¼š
&lt;code&gt;ID = (æ—¶é—´æˆ³å·®å€¼ &amp;lt;&amp;lt; 22) | (æ•°æ®ä¸­å¿ƒID &amp;lt;&amp;lt; 17) | (èŠ‚ç‚¹ID &amp;lt;&amp;lt; 12) | åºåˆ—å·&lt;/code&gt;&lt;a class="link" href="@ref" &gt;7,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"&gt;âš ï¸ &lt;strong&gt;æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="æ—¶é’Ÿå›æ‹¨é—®é¢˜"&gt;&lt;strong&gt;æ—¶é’Ÿå›æ‹¨é—®é¢˜&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸå› &lt;/strong&gt;ï¼šæœåŠ¡å™¨æ—¶é—´è¢«æ‰‹åŠ¨è°ƒæ•´æˆ– NTP åŒæ­¥å¯¼è‡´æ—¶é—´å€’é€€&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åæœ&lt;/strong&gt;ï¼šç”Ÿæˆé‡å¤ IDï¼Œç ´åå”¯ä¸€æ€§ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç­‰å¾…æ—¶é’Ÿè¿½ä¸Š&lt;/strong&gt;ï¼šè‹¥å›æ‹¨æ—¶é—´çŸ­ï¼ˆå¦‚ â‰¤ 100msï¼‰ï¼Œé˜»å¡çº¿ç¨‹ç›´åˆ°æ—¶é—´æ¢å¤&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ—¶é—´æˆ³ä½æ•°&lt;/strong&gt;ï¼šä» 41 ä½å¢è‡³ 42 ä½ï¼Œæ”¯æŒæ›´é•¿æ—¶é—´èŒƒå›´ï¼ˆä» 69 å¹´ â†’ 139 å¹´ï¼‰ï¼Œé™ä½å›æ‹¨æ¦‚ç‡&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™çº§ç­–ç•¥&lt;/strong&gt;ï¼šå›æ‹¨æ—¶åˆ‡æ¢ä¸º UUID æˆ–æ•°æ®åº“è‡ªå¢ ID ä¸´æ—¶å…œåº•&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é«˜å¹¶å‘ä¸‹åºåˆ—å·è€—å°½"&gt;&lt;strong&gt;é«˜å¹¶å‘ä¸‹åºåˆ—å·è€—å°½&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šå•èŠ‚ç‚¹æ¯æ¯«ç§’è¯·æ±‚é‡è¶…è¿‡ 4096ï¼ˆå¦‚ç§’æ€ç³»ç»Ÿï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¢åŠ åºåˆ—å·ä½æ•°&lt;/strong&gt;ï¼šå¦‚ä» 12 ä½æ‰©å±•è‡³ 14 ä½ï¼ˆæ”¯æŒæ¯æ¯«ç§’ 16384 ä¸ª IDï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ•£æ—¶é—´æˆ³ç²¾åº¦&lt;/strong&gt;ï¼šä½¿ç”¨å¾®ç§’çº§æ—¶é—´æˆ³ï¼ˆéœ€è°ƒæ•´æ—¶é—´æˆ³ä½æ•°ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æœºå™¨-id-åˆ†é…å†²çª"&gt;&lt;strong&gt;æœºå™¨ ID åˆ†é…å†²çª&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é—®é¢˜&lt;/strong&gt;ï¼šå¤šèŠ‚ç‚¹éƒ¨ç½²æ—¶ï¼Œè‹¥æœºå™¨ ID é‡å¤ï¼ˆå¦‚é…ç½®é”™è¯¯ï¼‰ï¼Œå¯¼è‡´ä¸åŒèŠ‚ç‚¹ç”Ÿæˆç›¸åŒ ID&lt;a class="link" href="@ref" &gt;4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€åˆ†é…&lt;/strong&gt;ï¼šé€šè¿‡ ZooKeeper/Redis åˆ†é…å”¯ä¸€æœºå™¨ IDï¼Œæ”¯æŒèŠ‚ç‚¹åŠ¨æ€æ‰©å®¹&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºç¡¬ä»¶ç”Ÿæˆ&lt;/strong&gt;ï¼šé€šè¿‡ MAC åœ°å€ã€IP å“ˆå¸Œå€¼è‡ªåŠ¨è®¡ç®—æœºå™¨ IDï¼ˆå¦‚ &lt;code&gt;getDatacenterId()&lt;/code&gt; æ–¹æ³•ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-æ€§èƒ½ä¼˜åŒ–ä¸å·¥ä¸šå®è·µ"&gt;ğŸš€ &lt;strong&gt;æ€§èƒ½ä¼˜åŒ–ä¸å·¥ä¸šå®è·µ&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="æ€§èƒ½ç“¶é¢ˆçªç ´"&gt;&lt;strong&gt;æ€§èƒ½ç“¶é¢ˆçªç ´&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç”Ÿæ€§èƒ½&lt;/strong&gt;ï¼šå•èŠ‚ç‚¹æ¯ç§’çº¦ 26 ä¸‡ IDï¼ˆä¾èµ–æ—¶é’Ÿè·å–æ•ˆç‡ï¼‰&lt;a class="link" href="@ref" &gt;7&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–æ‰‹æ®µï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¼“å­˜æ—¶é—´æˆ³&lt;/strong&gt;ï¼šé¢„å–æœªæ¥æ—¶é—´æˆ³ï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ç™¾åº¦ UidGenerator æ–¹æ¡ˆï¼‰&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— é”è®¾è®¡&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;ThreadLocal&lt;/code&gt; æˆ– CAS æ›¿ä»£ &lt;code&gt;synchronized&lt;/code&gt;ï¼ˆå¦‚æ”¹è¿›ç‰ˆ Hutool çš„ &lt;code&gt;Snowflake&lt;/code&gt; ç±»ï¼‰&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="å¼€æºæ¡†æ¶å¢å¼º"&gt;&lt;strong&gt;å¼€æºæ¡†æ¶å¢å¼º&lt;/strong&gt;
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ¡†æ¶&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ä¼˜åŒ–ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç¾å›¢ Leaf&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æŒå·æ®µæ¨¡å¼ï¼ˆé¢„åˆ†é… ID æ®µï¼‰ + Snowflake æ··åˆæ¨¡å¼ï¼Œé¿å…æ—¶é’Ÿä¾èµ–&lt;/td&gt;
&lt;td&gt;é‡‘èäº¤æ˜“ç­‰é«˜ä¸€è‡´æ€§ç³»ç»Ÿ&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç™¾åº¦ Uid&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è‡ªå®šä¹‰æ—¶é—´æˆ³/æœºå™¨ ID ä½æ•°ï¼Œå¼•å…¥å·¥ä½œè¿›ç¨‹ç¼–å·ï¼ˆæ‰©å±•è‡³ 22 ä½åºåˆ—å·ï¼‰&lt;/td&gt;
&lt;td&gt;è¶…é«˜é¢‘å¹¶å‘ï¼ˆ600 ä¸‡/ç§’ï¼‰&lt;a class="link" href="@ref" &gt;1&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Hutool&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æä¾›å¼€ç®±å³ç”¨çš„ &lt;code&gt;Snowflake&lt;/code&gt; ç±»ï¼Œå†…ç½®æ—¶é’Ÿå›æ‹¨æ£€æµ‹&lt;/td&gt;
&lt;td&gt;ä¸­å°å‹å¿«é€Ÿå¼€å‘&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h3 id="-é€‰å‹å»ºè®®ä¸æ€»ç»“"&gt;ğŸ’ &lt;strong&gt;é€‰å‹å»ºè®®ä¸æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="é€‚ç”¨åœºæ™¯"&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;æ¨èåœºæ™¯ï¼š
&lt;ul&gt;
&lt;li&gt;ç”µå•†è®¢å•å·ã€åˆ†å¸ƒå¼æ•°æ®åº“ä¸»é”®ï¼ˆè¶‹åŠ¿é€’å¢åˆ©äºç´¢å¼•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡è°ƒç”¨é“¾è¿½è¸ª IDï¼ˆæ—¶é—´æˆ³éšå«ç”Ÿæˆæ—¶é—´ï¼‰&lt;a class="link" href="@ref" &gt;3,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸æ¨èåœºæ™¯ï¼š
&lt;ul&gt;
&lt;li&gt;æ—¶é’Ÿä¸å¯é çš„ç¯å¢ƒï¼ˆå¦‚æœªéƒ¨ç½² NTP çš„æ—§æœåŠ¡å™¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;éœ€è¦ç»å¯¹é€’å¢ï¼ˆéè¶‹åŠ¿é€’å¢ï¼‰çš„ä¸šåŠ¡ï¼ˆå¦‚é‡‘èæµæ°´å·ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="é€‰å‹å†³ç­–æ ‘"&gt;&lt;strong&gt;é€‰å‹å†³ç­–æ ‘&lt;/strong&gt;
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;graph TD
A{æ˜¯å¦éœ€è¦å…¨å±€å”¯ä¸€ IDï¼Ÿ} --&amp;gt;|æ˜¯| B{å¹¶å‘é‡æ˜¯å¦ï¼10ä¸‡/ç§’ï¼Ÿ}
B --&amp;gt;|æ˜¯| C[ç™¾åº¦ UidGenerator æˆ–è‡ªå®šä¹‰æ‰©å±•]
B --&amp;gt;|å¦| D{æ˜¯å¦è¦æ±‚ä¸¥æ ¼é€’å¢ï¼Ÿ}
D --&amp;gt;|æ˜¯| E[æ•°æ®åº“è‡ªå¢ ID + æ­¥é•¿åˆ†é…]
D --&amp;gt;|å¦| F[Snowflake æˆ– Leaf æ··åˆæ¨¡å¼]
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æ ¸å¿ƒä»·å€¼"&gt;&lt;strong&gt;æ ¸å¿ƒä»·å€¼&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Snowflake æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„â€œæ—¶é—´æœ‰åº ID ç”Ÿæˆå™¨â€ï¼Œå…¶ä»·å€¼åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½ä¸ä½è€¦åˆ&lt;/strong&gt;ï¼šä¸ä¾èµ–æ•°æ®åº“ï¼Œå†…å­˜è®¡ç®—&lt;a class="link" href="@ref" &gt;1,8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç©ºé—´æ•ˆç‡&lt;/strong&gt;ï¼š64 ä½ ID æ¯” UUIDï¼ˆ128 ä½ï¼‰æ›´çœå­˜å‚¨&lt;a class="link" href="@ref" &gt;2,3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯æ‰©å±•æ€§&lt;/strong&gt;ï¼šé€šè¿‡è°ƒæ•´ä½æ•°åˆ†é…ï¼Œé€‚é…ä¸šåŠ¡å¢é•¿ï¼ˆå¦‚å»¶é•¿æ—¶é—´æˆ³æ”¯æŒå¹´é™ï¼‰&lt;a class="link" href="@ref" &gt;3,6&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç»ˆæå»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸­å°ç³»ç»Ÿç›´æ¥ç”¨ &lt;strong&gt;Hutool çš„ &lt;code&gt;Snowflake&lt;/code&gt;&lt;/strong&gt;ï¼Œé¿å…é‡å¤é€ è½®å­&lt;a class="link" href="@ref" &gt;8&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¤§å‹ç³»ç»Ÿç”¨ &lt;strong&gt;Leaf æ··åˆæ¨¡å¼&lt;/strong&gt;ï¼ˆSnowflake + å·æ®µï¼‰ï¼Œå…¼é¡¾æ€§èƒ½ä¸å®¹ç¾&lt;a class="link" href="@ref" &gt;3&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ—¶é’ŸåŒæ­¥æ˜¯åº•çº¿ï¼š&lt;strong&gt;å¿…é¡»éƒ¨ç½² NTP æœåŠ¡&lt;/strong&gt;ï¼Œå¹¶ç›‘æ§æ—¶é’Ÿåç§»é‡&lt;a class="link" href="@ref" &gt;1,4&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id="ä¸€è‡´æ€§å“ˆå¸Œ"&gt;ä¸€è‡´æ€§å“ˆå¸Œ
&lt;/h2&gt;&lt;p&gt;ä¸€è‡´æ€§å“ˆå¸Œï¼ˆConsistent Hashingï¼‰æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ ¸å¿ƒç®—æ³•ï¼Œæ—¨åœ¨è§£å†³èŠ‚ç‚¹åŠ¨æ€å˜åŒ–æ—¶æ•°æ®å¤§è§„æ¨¡è¿ç§»çš„é—®é¢˜ã€‚ä»¥ä¸‹ä»åŸç†ã€ç‰¹æ€§ã€ä¼˜åŒ–åˆ°åº”ç”¨åœºæ™¯çš„å…¨é¢è§£æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-æ ¸å¿ƒåŸç†å“ˆå¸Œç¯ä¸åŠ¨æ€æ˜ å°„"&gt;ğŸ”„ &lt;strong&gt;æ ¸å¿ƒåŸç†ï¼šå“ˆå¸Œç¯ä¸åŠ¨æ€æ˜ å°„&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å“ˆå¸Œç¯æ„å»º&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å°†å“ˆå¸Œå€¼ç©ºé—´ç»„ç»‡æˆç¯å½¢ç»“æ„ï¼ˆèŒƒå›´é€šå¸¸ä¸º &lt;code&gt;0 ~ 2Â³Â²-1&lt;/code&gt;ï¼‰ï¼Œé¦–å°¾ç›¸æ¥ã€‚&lt;/li&gt;
&lt;li&gt;èŠ‚ç‚¹ï¼ˆå¦‚æœåŠ¡å™¨ï¼‰å’Œæ•°æ®å‡é€šè¿‡å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚ MD5ã€SHA-1ï¼‰æ˜ å°„åˆ°ç¯ä¸Šç‰¹å®šä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®å®šä½è§„åˆ™&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®å­˜å‚¨æ—¶ï¼Œä»å…¶å“ˆå¸Œä½ç½®&lt;strong&gt;é¡ºæ—¶é’ˆæŸ¥æ‰¾&lt;/strong&gt;ï¼Œé‡åˆ°çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å³ä¸ºå½’å±èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼šæ•°æ® &lt;code&gt;D&lt;/code&gt; çš„å“ˆå¸Œå€¼ä½äºèŠ‚ç‚¹ &lt;code&gt;A&lt;/code&gt; å’Œ &lt;code&gt;B&lt;/code&gt; ä¹‹é—´ï¼Œåˆ™å­˜å…¥èŠ‚ç‚¹ &lt;code&gt;B&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä¼¸ç¼©æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–°å¢èŠ‚ç‚¹&lt;/strong&gt;ï¼šä»…å½±å“æ–°èŠ‚ç‚¹é€†æ—¶é’ˆæ–¹å‘è‡³ä¸‹ä¸€èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ï¼ˆå›¾ä¸­ä»… &lt;code&gt;C&lt;/code&gt; ä» &lt;code&gt;D&lt;/code&gt; è¿ç§»è‡³æ–°èŠ‚ç‚¹ &lt;code&gt;X&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ é™¤èŠ‚ç‚¹&lt;/strong&gt;ï¼šæ•…éšœèŠ‚ç‚¹çš„æ•°æ®ç”±å…¶é¡ºæ—¶é’ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥ç®¡ï¼ˆå¦‚èŠ‚ç‚¹ &lt;code&gt;C&lt;/code&gt; å®•æœºï¼Œæ•°æ® &lt;code&gt;C&lt;/code&gt; è¿ç§»è‡³ &lt;code&gt;D&lt;/code&gt;ï¼‰ã€‚
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ“ä½œ&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ•°æ®è¿ç§»èŒƒå›´&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å½±å“ç¨‹åº¦&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æ™®é€šå“ˆå¸Œå–æ¨¡&lt;/td&gt;
&lt;td&gt;å…¨éƒ¨æ•°æ®é‡æ–°æ˜ å°„&lt;/td&gt;
&lt;td&gt;å…¨å±€æ€§é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸€è‡´æ€§å“ˆå¸Œ&lt;/td&gt;
&lt;td&gt;ç›¸é‚»èŠ‚ç‚¹é—´çš„å°éƒ¨åˆ†æ•°æ®&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å±€éƒ¨æ€§ä½&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å…³é”®ç‰¹æ€§ä¸ä¼˜åŠ¿"&gt;âš–ï¸ &lt;strong&gt;å…³é”®ç‰¹æ€§ä¸ä¼˜åŠ¿&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å•è°ƒæ€§ï¼ˆMonotonicityï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;èŠ‚ç‚¹å¢å‡æ—¶ï¼Œä»…å°‘é‡æ•°æ®éœ€è¿ç§»ï¼Œä¸å½±å“ç³»ç»Ÿæ•´ä½“è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;é¿å…ä¼ ç»Ÿå“ˆå¸Œä¸­èŠ‚ç‚¹æ•°å˜åŒ–å¯¼è‡´çš„å…¨å±€æ•°æ®å¤±æ•ˆï¼ˆå¦‚ç¼“å­˜é›ªå´©ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹³è¡¡æ€§ï¼ˆBalanceï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç†æƒ³æƒ…å†µä¸‹æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œä½†ç‰©ç†èŠ‚ç‚¹å°‘æ—¶å¯èƒ½å€¾æ–œï¼ˆå¦‚ä¸¤èŠ‚ç‚¹åˆ†æ‹… 80%/20% è´Ÿè½½ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ï¼šå¼•å…¥è™šæ‹ŸèŠ‚ç‚¹ï¼ˆè§ä¸‹æ–‡ä¼˜åŒ–éƒ¨åˆ†ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ•£æ€§ï¼ˆSpreadï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åˆ†æ•£å­˜å‚¨ï¼Œæ— å•ç‚¹å­˜å‚¨å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹é”™æ€§ï¼ˆFault Toleranceï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;èŠ‚ç‚¹æ•…éšœåï¼Œå…¶æ•°æ®è‡ªåŠ¨è¿ç§»è‡³ä¸‹ä¸€èŠ‚ç‚¹ï¼Œç³»ç»Ÿä»å¯æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-æŒ‘æˆ˜ä¸ä¼˜åŒ–è™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯"&gt;ğŸ› ï¸ &lt;strong&gt;æŒ‘æˆ˜ä¸ä¼˜åŒ–ï¼šè™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é—®é¢˜æ ¹æº&lt;/strong&gt;ï¼šç‰©ç†èŠ‚ç‚¹å°‘æ—¶ï¼Œå“ˆå¸Œç¯åˆ†å¸ƒä¸å‡å¯¼è‡´æ•°æ®å€¾æ–œï¼ˆå¦‚å¤§éƒ¨åˆ†æ•°æ®é›†ä¸­åœ¨å°‘æ•°èŠ‚ç‚¹ï¼‰ã€‚
&lt;strong&gt;è™šæ‹ŸèŠ‚ç‚¹æ–¹æ¡ˆ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœºåˆ¶&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªç‰©ç†èŠ‚ç‚¹æ˜ å°„ä¸ºå¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆå¦‚ &lt;code&gt;Node A&lt;/code&gt; â†’ &lt;code&gt;A#1&lt;/code&gt;ã€&lt;code&gt;A#2&lt;/code&gt;&amp;hellip;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è™šæ‹ŸèŠ‚ç‚¹æ•£åˆ—åˆ†å¸ƒåœ¨ç¯ä¸Šï¼Œæ•°æ®å…ˆå®šä½åˆ°è™šæ‹ŸèŠ‚ç‚¹ï¼Œå†æ˜ å°„è‡³ç‰©ç†èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šç‰©ç†èŠ‚ç‚¹è´Ÿè½½æ›´å‡åŒ€ï¼ˆå³ä½¿èŠ‚ç‚¹å°‘ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ‰©ç¼©&lt;/strong&gt;ï¼šè°ƒæ•´è™šæ‹ŸèŠ‚ç‚¹æ•°é‡å³å¯ä¼˜åŒ–è´Ÿè½½ï¼Œæ— éœ€é‡æ„ç¯ã€‚
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;æ— è™šæ‹ŸèŠ‚ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;å«è™šæ‹ŸèŠ‚ç‚¹&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ç‰©ç†èŠ‚ç‚¹æ•°&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;2ï¼ˆå„å« 3 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ•°æ®åˆ†å¸ƒ&lt;/td&gt;
&lt;td&gt;80% åœ¨ Aï¼Œ20% åœ¨ B&lt;/td&gt;
&lt;td&gt;Aã€B å„æ‰¿æ‹… â‰ˆ50%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-åº”ç”¨åœºæ™¯-1"&gt;ğŸŒ &lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿ&lt;/strong&gt;ï¼ˆRedis Clusterã€Memcachedï¼‰
&lt;ul&gt;
&lt;li&gt;èŠ‚ç‚¹å®•æœºæ—¶ä»…å°‘é‡ç¼“å­˜å¤±æ•ˆï¼Œé¿å…æ•°æ®åº“è¢«å‡»ç©¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ•°æ®åº“&lt;/strong&gt;ï¼ˆCassandraã€DynamoDBï¼‰
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€æ‰©å®¹æ—¶æ•°æ®è¿ç§»é‡æå°ï¼Œæå‡ä¼¸ç¼©æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è¯·æ±‚æŒ‰å“ˆå¸Œå‡åŒ€åˆ†é…åç«¯æœåŠ¡å™¨ï¼Œæ–°å¢èŠ‚ç‚¹ä»…å½±å“å±€éƒ¨æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;èµ„æºæŒ‰å“ˆå¸Œåˆ†å¸ƒè¾¹ç¼˜èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å˜åŠ¨æ—¶ç”¨æˆ·è¯·æ±‚ä»é«˜æ•ˆå‘½ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h3 id="-å®ç°è¦ç‚¹ä»¥-java-ä¸ºä¾‹"&gt;âš™ï¸ &lt;strong&gt;å®ç°è¦ç‚¹ï¼ˆä»¥ Java ä¸ºä¾‹ï¼‰&lt;/strong&gt;
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;// ç®€åŒ–ç‰ˆä¸€è‡´æ€§å“ˆå¸Œå®ç°
public class ConsistentHash {
private final SortedMap&amp;lt;Integer, Node&amp;gt; ring = new TreeMap&amp;lt;&amp;gt;();
private int virtualNodesPerNode = 3; // è™šæ‹ŸèŠ‚ç‚¹æ•°
// æ·»åŠ èŠ‚ç‚¹
public void addNode(Node node) {
for (int i = 0; i &amp;lt; virtualNodesPerNode; i++) {
int hash = hash(node.id + &amp;#34;#&amp;#34; + i);
ring.put(hash, node);
}
}
// è·¯ç”±æ•°æ®
public Node getNode(String key) {
int hash = hash(key);
SortedMap&amp;lt;Integer, Node&amp;gt; tailMap = ring.tailMap(hash);
int targetHash = tailMap.isEmpty() ? ring.firstKey() : tailMap.firstKey();
return ring.get(targetHash);
}
private int hash(String value) {
return Math.abs(value.hashCode() % (int)Math.pow(2, 32)); // 32ä½å“ˆå¸Œç©ºé—´
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-11"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;ä¸€è‡´æ€§å“ˆå¸Œé€šè¿‡&lt;strong&gt;ç¯å½¢æ˜ å°„&lt;/strong&gt;å’Œ&lt;strong&gt;è™šæ‹ŸèŠ‚ç‚¹&lt;/strong&gt;æŠ€æœ¯ï¼Œè§£å†³äº†åˆ†å¸ƒå¼ç³»ç»ŸåŠ¨æ€ä¼¸ç¼©ä¸­çš„æ•°æ®è¿ç§»éš¾é¢˜ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é«˜å®¹é”™&lt;/strong&gt;ï¼šèŠ‚ç‚¹æ•…éšœä»…å½±å“ç›¸é‚»æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜“æ‰©å±•&lt;/strong&gt;ï¼šå¢åˆ èŠ‚ç‚¹è¿ç§»æˆæœ¬ä½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡&lt;/strong&gt;ï¼šè™šæ‹ŸèŠ‚ç‚¹é¿å…æ•°æ®å€¾æ–œã€‚
åœ¨åˆ†å¸ƒå¼ç¼“å­˜ã€æ•°æ®åº“ã€CDN ç­‰åœºæ™¯ä¸­ï¼Œå®ƒæ˜¯ä¿éšœç³»ç»Ÿç¨³å®šæ€§å’Œæ‰©å±•æ€§çš„åŸºçŸ³ã€‚ç°ä»£ç³»ç»Ÿï¼ˆå¦‚ Redis Clusterï¼‰å·²å°†å…¶ä½œä¸ºé»˜è®¤åˆ†ç‰‡ç­–ç•¥ï¼Œæœªæ¥åœ¨è¾¹ç¼˜è®¡ç®—ã€åŒºå—é“¾ä¸­åº”ç”¨æ½œåŠ›å·¨å¤§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="è´Ÿè½½ä¸å‡è¡¡"&gt;è´Ÿè½½ä¸å‡è¡¡
&lt;/h2&gt;&lt;p&gt;åœ¨ä¸€è‡´æ€§å“ˆå¸Œä¸­ï¼Œåˆ é™¤èŠ‚ç‚¹åæ•°æ®ç”±&lt;strong&gt;é¡ºæ—¶é’ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ‰˜ç®¡&lt;/strong&gt;ç¡®å®å¯èƒ½å¯¼è‡´è´Ÿè½½ä¸å‡è¡¡ï¼Œè¿™æ˜¯è¯¥ç®—æ³•çš„å›ºæœ‰ç¼ºé™·ã€‚ä½†é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯å’Œå…¶ä»–ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥æ˜¾è‘—ç¼“è§£è¿™ä¸€é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†åˆ†æï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="-åˆ é™¤èŠ‚ç‚¹åçš„è´Ÿè½½ä¸å‡è¡¡é—®é¢˜"&gt;âš ï¸ &lt;strong&gt;åˆ é™¤èŠ‚ç‚¹åçš„è´Ÿè½½ä¸å‡è¡¡é—®é¢˜&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;å½“èŠ‚ç‚¹è¢«åˆ é™¤æ—¶ï¼Œå…¶è´Ÿè´£çš„æ•°æ®ä¼šå…¨éƒ¨è½¬ç§»åˆ°é¡ºæ—¶é’ˆæ–¹å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¯¼è‡´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿè½½é›†ä¸­&lt;/strong&gt;ï¼šä¸‹ä¸€ä¸ªèŠ‚ç‚¹éœ€é¢å¤–æ‰¿æ‹…è¢«åˆ é™¤èŠ‚ç‚¹çš„å…¨éƒ¨æ•°æ®ï¼Œè´Ÿè½½çªå¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çƒ­ç‚¹é£é™©&lt;/strong&gt;ï¼šè‹¥è¢«åˆ é™¤èŠ‚ç‚¹åŸè´Ÿè´£å¤§é‡æ•°æ®ï¼Œæ¥ç®¡èŠ‚ç‚¹å¯èƒ½å› å‹åŠ›è¿‡å¤§è€Œå®•æœºï¼Œå¼•å‘é›ªå´©æ•ˆåº”ï¼ˆå¦‚èŠ‚ç‚¹Aå®•æœºåï¼ŒèŠ‚ç‚¹Bå› è´Ÿè½½è¿‡é«˜å®•æœºï¼Œå‹åŠ›è¿›ä¸€æ­¥ä¼ å¯¼è‡³èŠ‚ç‚¹Cï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæµªè´¹&lt;/strong&gt;ï¼šå…¶ä»–èŠ‚ç‚¹æœªåˆ†æ‹…å‹åŠ›ï¼Œç³»ç»Ÿæ•´ä½“è´Ÿè½½ä¸å‡ã€‚
&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;ï¼š
å‡è®¾3ä¸ªèŠ‚ç‚¹å‡åŒ€åˆ†æ‹…æ•°æ®ï¼ˆå„33%ï¼‰ã€‚è‹¥èŠ‚ç‚¹Bå®•æœºï¼ŒèŠ‚ç‚¹Céœ€æ¥ç®¡Bçš„å…¨éƒ¨æ•°æ®ï¼Œè´Ÿè½½å‡è‡³66%ï¼Œè€ŒèŠ‚ç‚¹Aä»ä¸º33%ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-è§£å†³æ–¹æ¡ˆè™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯"&gt;âš™ï¸ &lt;strong&gt;è§£å†³æ–¹æ¡ˆï¼šè™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;è™šæ‹ŸèŠ‚ç‚¹æ˜¯è§£å†³è´Ÿè½½ä¸å‡çš„æ ¸å¿ƒæœºåˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸç†&lt;/strong&gt;ï¼šæ¯ä¸ªç‰©ç†èŠ‚ç‚¹æ˜ å°„ä¸ºå¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆå¦‚200ä¸ªï¼‰ï¼Œåˆ†æ•£åœ¨å“ˆå¸Œç¯ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;åˆ é™¤èŠ‚ç‚¹æ—¶ï¼š
&lt;ul&gt;
&lt;li&gt;è¢«åˆ é™¤èŠ‚ç‚¹çš„è™šæ‹ŸèŠ‚ç‚¹å¤±æ•ˆï¼Œå…¶æ•°æ®ç”±å¤šä¸ªä¸åŒç‰©ç†èŠ‚ç‚¹æ¥ç®¡ï¼ˆè€Œéä»…ä¸€ä¸ªï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆæœ&lt;/strong&gt;ï¼šæ•°æ®è¿ç§»åˆ†æ•£åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œé¿å…å•ç‚¹è¿‡è½½ã€‚
&lt;strong&gt;è™šæ‹ŸèŠ‚ç‚¹é…ç½®å»ºè®®&lt;/strong&gt;ï¼š
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰©ç†èŠ‚ç‚¹æ•°&lt;/th&gt;
&lt;th&gt;æ¨èè™šæ‹ŸèŠ‚ç‚¹å€æ•°&lt;/th&gt;
&lt;th&gt;æ•ˆæœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;â‰¤10&lt;/td&gt;
&lt;td&gt;100~200å€&lt;/td&gt;
&lt;td&gt;è´Ÿè½½åˆ†å¸ƒè¾ƒå‡åŒ€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;gt;50&lt;/td&gt;
&lt;td&gt;50~100å€&lt;/td&gt;
&lt;td&gt;å¹³è¡¡æ€§èƒ½ä¸å¼€é”€&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;âœ… &lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼šç‰©ç†èŠ‚ç‚¹è¶Šå°‘ï¼Œè™šæ‹ŸèŠ‚ç‚¹å€æ•°éœ€è¶Šé«˜ï¼Œä»¥å¡«è¡¥å“ˆå¸Œç¯ä¸Šçš„åˆ†å¸ƒç©ºéš™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-è¿›ä¸€æ­¥ä¼˜åŒ–ç­–ç•¥"&gt;ğŸ”§ &lt;strong&gt;è¿›ä¸€æ­¥ä¼˜åŒ–ç­–ç•¥&lt;/strong&gt;
&lt;/h3&gt;&lt;h4 id="1-åŠ¨æ€è´Ÿè½½å‡è¡¡"&gt;(1) &lt;strong&gt;åŠ¨æ€è´Ÿè½½å‡è¡¡&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æƒé‡è°ƒæ•´&lt;/strong&gt;ï¼šæ ¹æ®èŠ‚ç‚¹æ€§èƒ½ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰åˆ†é…ä¸åŒæ•°é‡çš„è™šæ‹ŸèŠ‚ç‚¹ã€‚é«˜æ€§èƒ½èŠ‚ç‚¹æ‰¿è½½æ›´å¤šæ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶ç›‘æ§&lt;/strong&gt;ï¼šæ£€æµ‹èŠ‚ç‚¹è´Ÿè½½ï¼ŒåŠ¨æ€è¿ç§»è™šæ‹ŸèŠ‚ç‚¹ï¼Œä»é«˜è´Ÿè½½èŠ‚ç‚¹è½¬ç§»è‡³ä½è´Ÿè½½èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="2-æ•°æ®å†—ä½™ä¸æ•…éšœè½¬ç§»"&gt;(2) &lt;strong&gt;æ•°æ®å†—ä½™ä¸æ•…éšœè½¬ç§»&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šå‰¯æœ¬æœºåˆ¶&lt;/strong&gt;ï¼šæ•°æ®å­˜å‚¨å¤šä¸ªå‰¯æœ¬ï¼ˆå¦‚3å‰¯æœ¬ï¼‰ï¼Œåˆ†å¸ƒåœ¨ä¸åŒçš„ç‰©ç†èŠ‚ç‚¹ã€‚åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œå‰¯æœ¬èŠ‚ç‚¹å¯åˆ†æ‹…è¯»è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨æ¢å¤&lt;/strong&gt;ï¼šæ•…éšœèŠ‚ç‚¹æ¢å¤åï¼Œç³»ç»Ÿè‡ªåŠ¨åŒæ­¥æ•°æ®ï¼Œé¿å…äººå·¥å¹²é¢„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="3-ç»“åˆå…¶ä»–ç®—æ³•"&gt;(3) &lt;strong&gt;ç»“åˆå…¶ä»–ç®—æ³•&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Rendezvous Hashing&lt;/strong&gt;ï¼šåœ¨åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œæ•°æ®è¿ç§»æ›´åˆ†æ•£ï¼Œé€‚åˆå¯¹å‡è¡¡æ€§è¦æ±‚æé«˜çš„åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çƒ­ç‚¹æ•°æ®æ£€æµ‹&lt;/strong&gt;ï¼šè¯†åˆ«é«˜é¢‘è®¿é—®æ•°æ®ï¼Œå°†å…¶å¤åˆ¶åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œå‡å°‘å•ç‚¹å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-å®é™…åº”ç”¨æ•ˆæœ"&gt;ğŸ’ &lt;strong&gt;å®é™…åº”ç”¨æ•ˆæœ&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ— è™šæ‹ŸèŠ‚ç‚¹&lt;/strong&gt;ï¼šåˆ é™¤èŠ‚ç‚¹åï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹è´Ÿè½½å¯èƒ½ç¿»å€ï¼Œç³»ç»Ÿé£é™©é«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å«è™šæ‹ŸèŠ‚ç‚¹&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æ•°æ®è¿ç§»åˆ†æ•£è‡³å¤šä¸ªèŠ‚ç‚¹ï¼Œå„èŠ‚ç‚¹è´Ÿè½½å¢å¹…å¯æ§ï¼ˆå¦‚10%è€Œé100%ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿååé‡æ³¢åŠ¨å‡å°‘ï¼Œå“åº”æ—¶é—´æ›´ç¨³å®šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;ï¼šMemcachedé›†ç¾¤ä¸­ï¼Œä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹åï¼Œåˆ é™¤èŠ‚ç‚¹å¼•å‘çš„ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™ä»30%é™è‡³5%ä»¥ä¸‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-æ€»ç»“-12"&gt;ğŸ’ &lt;strong&gt;æ€»ç»“&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;åˆ é™¤èŠ‚ç‚¹åï¼Œæ•°æ®ç”±å•ä¸€èŠ‚ç‚¹æ‰˜ç®¡&lt;strong&gt;å¿…ç„¶å¯¼è‡´è´Ÿè½½ä¸å‡è¡¡&lt;/strong&gt;ï¼Œä½†é€šè¿‡&lt;strong&gt;è™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯&lt;/strong&gt;ï¼ˆåˆ†æ•£æ•°æ®è¿ç§»ï¼‰å’Œ&lt;strong&gt;åŠ¨æ€æƒé‡è°ƒæ•´&lt;/strong&gt;ï¼ˆæŒ‰æ€§èƒ½åˆ†é…è´Ÿè½½ï¼‰ï¼Œå¯å°†å½±å“é™è‡³æœ€ä½ã€‚åœ¨åˆ†å¸ƒå¼ç¼“å­˜ã€æ•°æ®åº“ç­‰åœºæ™¯ä¸­ï¼Œè¿™äº›ä¼˜åŒ–æ˜¯ä¿éšœé«˜å¯ç”¨çš„å…³é”®ã€‚&lt;/p&gt;</description></item></channel></rss>